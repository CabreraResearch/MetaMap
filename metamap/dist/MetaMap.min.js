(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.MetaMap = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Auth0 = require('./js/app/auth0');
var User = require('./js/app/user.js');
var Router = require('./js/app/Router.js');
var Eventer = require('./js/app/Eventer.js');
var PageFactory = require('./js/pages/PageFactory.js');
var NProgress = window.NProgress;
var Config = require('./js/app//Config.js');
var ga = require('./js/integrations/google.js');
var shims = require('./js/tools/shims.js');

var MetaMap = (function () {
    function MetaMap() {
        _classCallCheck(this, MetaMap);

        this._config = new Config();
        this.config = this._config.config;
        this.MetaFire = this._config.MetaFire;
        this.Eventer = new Eventer(this);

        this.onReady();
    }

    _createClass(MetaMap, [{
        key: 'onReady',
        value: function onReady() {
            var _this = this;

            if (!this._onReady) {
                this._onReady = new Promise(function (fulfill, reject) {
                    _this._config.onReady().then(function (config) {
                        _this.Auth0 = new Auth0(config.auth0);
                        fulfill();
                    })['catch'](function (err) {
                        reject(err);
                    });
                });
            }
            return this._onReady;
        }
    }, {
        key: 'init',
        value: function init() {
            var _this2 = this;

            this.onReady().then(function () {
                _this2.Auth0.login().then(function (profile) {
                    _this2.MetaFire.login().then(function (auth) {
                        _this2.User = new User(profile, auth, _this2.Eventer, _this2.MetaFire);
                        _this2.User.onReady().then(function () {
                            _this2.PageFactory = new PageFactory(_this2.Eventer, _this2.MetaFire);
                            _this2.Router = new Router(_this2);
                        });
                    });
                });
            });
        }
    }, {
        key: 'log',
        value: function log(val) {
            if (window.ga) {
                window.ga('send', 'event', 'log', 'label', val);
            }
            console.log(val);
        }
    }, {
        key: 'error',
        value: function error(val) {
            if (window.ga) {
                window.ga('send', 'exception', {
                    'exDescription': val.message,
                    'exFatal': true
                });
            }
            console.error(val);
        }
    }, {
        key: 'logout',
        value: function logout() {
            this.MetaFire.logout();
            this.Auth0.logout();
        }
    }]);

    return MetaMap;
})();

module.exports = MetaMap;

},{"./js/app//Config.js":12,"./js/app/Eventer.js":13,"./js/app/Router.js":15,"./js/app/auth0":16,"./js/app/user.js":17,"./js/integrations/google.js":44,"./js/pages/PageFactory.js":47,"./js/tools/shims.js":48}],2:[function(require,module,exports){
'use strict';

require('babel/polyfill');
window.riot = require('riot');
window._ = require('lodash');
window.Promise = require('bluebird');
require('core-js');
window.$ = window.jQuery = require('jquery');
require('jquery-ui');
require('bootstrap');
window.Firebase = require('firebase');
window.Humanize = require('humanize-plus');
window.moment = require('moment');
window.URI = require('URIjs');
window.localforage = require('localforage');

require('./js/canvas/editor.js');
require('./js/canvas/user.js');
require('./js/canvas/editor_options.js');
require('./js/canvas/analytics.js');
require('./js/canvas/attachments.js');
require('./js/canvas/autosave.js');
require('./js/canvas/generator.js');
require('./js/canvas/layouts.js');
require('./js/canvas/map.js');
require('./js/canvas/perspectives.js');
require('./js/canvas/presenter.js');
require('./js/canvas/sharing.js');
require('./js/canvas/standards.js');
require('./js/canvas/tagging.js');
require('./js/canvas/templates.js');
require('./js/canvas/tests.js');
require('./js/canvas/ui.js');

var mm = require('./MetaMap');

module.exports = new mm();

},{"./MetaMap":1,"./js/canvas/analytics.js":18,"./js/canvas/attachments.js":19,"./js/canvas/autosave.js":20,"./js/canvas/editor.js":21,"./js/canvas/editor_options.js":22,"./js/canvas/generator.js":24,"./js/canvas/layouts.js":25,"./js/canvas/map.js":26,"./js/canvas/perspectives.js":27,"./js/canvas/presenter.js":28,"./js/canvas/sharing.js":29,"./js/canvas/standards.js":30,"./js/canvas/tagging.js":31,"./js/canvas/templates.js":32,"./js/canvas/tests.js":33,"./js/canvas/ui.js":34,"./js/canvas/user.js":35,"URIjs":undefined,"babel/polyfill":"babel/polyfill","bluebird":undefined,"bootstrap":undefined,"core-js":undefined,"firebase":undefined,"humanize-plus":undefined,"jquery":undefined,"jquery-ui":undefined,"localforage":undefined,"lodash":undefined,"moment":undefined,"riot":"riot"}],3:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');
var ACTIONS = require('../constants/actions');

var Action = (function (_ActionBase) {
    _inherits(Action, _ActionBase);

    function Action() {
        _classCallCheck(this, Action);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(Action.prototype), 'constructor', this).apply(this, params);
        this._actions = {};
    }

    _createClass(Action, [{
        key: '_getAction',
        value: function _getAction(action) {
            var ret = this._actions[action];
            if (!ret) {
                var Method = null;
                switch (action) {
                    case ACTIONS.MAP:
                        Method = require('./OpenMap.js');
                        break;
                    case ACTIONS.NEW_MAP:
                        Method = require('./NewMap.js');
                        break;
                    case ACTIONS.COPY_MAP:
                        Method = require('./CopyMap.js');
                        break;
                    case ACTIONS.DELETE_MAP:
                        Method = require('./DeleteMap.js');
                        break;
                    case ACTIONS.MY_MAPS:
                        Method = require('./MyMaps.js');
                        break;
                    case ACTIONS.TERMS_AND_CONDITIONS:
                        Method = require('./Terms.js');
                        break;
                    default:
                        Method = require('./Home.js');
                        break;
                }
                if (Method) {
                    ret = new Method(this.metaFire, this.eventer, this.pageFactory);
                    this._actions[action] = ret;
                }
            }
            return ret;
        }
    }, {
        key: 'act',
        value: function act(action) {
            _get(Object.getPrototypeOf(Action.prototype), 'act', this).call(this);
            var method = this._getAction(action);
            if (method) {
                for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                    params[_key2 - 1] = arguments[_key2];
                }

                return method.act.apply(method, params);
            }
        }
    }]);

    return Action;
})(ActionBase);

module.exports = Action;

},{"../constants/actions":36,"./ActionBase.js":4,"./CopyMap.js":5,"./DeleteMap.js":6,"./Home.js":7,"./MyMaps.js":8,"./NewMap.js":9,"./OpenMap.js":10,"./Terms.js":11}],4:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EVENTS = require('../constants/events');

var ActionBase = (function () {
    function ActionBase(metaFire, eventer, pageFactory) {
        _classCallCheck(this, ActionBase);

        this.metaFire = metaFire;
        this.eventer = eventer;
        this.pageFactory = pageFactory;
        this.metaMap = require('../../entry.js');
    }

    _createClass(ActionBase, [{
        key: 'act',
        value: function act() {}
    }, {
        key: 'toggleSidebar',
        value: function toggleSidebar() {
            if (this.sidebarOpen) {
                this.openSidebar();
            } else {
                this.closeSidebar();
            }
        }
    }, {
        key: 'openSidebar',
        value: function openSidebar() {
            this.sidebarOpen = true;
            this.eventer['do'](EVENTS.SIDEBAR_OPEN);
        }
    }, {
        key: 'closeSidebar',
        value: function closeSidebar() {
            this.sidebarOpen = false;
            this.eventer['do'](EVENTS.SIDEBAR_CLOSE);
        }
    }]);

    return ActionBase;
})();

module.exports = ActionBase;

},{"../../entry.js":2,"../constants/events":38}],5:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');
var ROUTES = require('../constants/routes.js');

var CopyMap = (function (_ActionBase) {
    _inherits(CopyMap, _ActionBase);

    function CopyMap() {
        _classCallCheck(this, CopyMap);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(CopyMap.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(CopyMap, [{
        key: 'act',
        value: function act(id) {
            var _get2,
                _this = this;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(CopyMap.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            if (!id) {
                return new Error('Must have a map in order to copy.');
            }
            this.metaFire.getData('' + ROUTES.MAPS_LIST + id).then(function (oldMap) {
                var newMap = {
                    created_at: new Date(),
                    owner: _this.metaMap.User.userId,
                    name: _this.appendCopy(oldMap.name)
                };
                _this.metaFire.getData('' + ROUTES.MAPS_DATA + id).then(function (oldMapData) {
                    var pushState = _this.metaFire.pushData(newMap, '' + ROUTES.MAPS_LIST);
                    var mapId = pushState.key();
                    _this.metaFire.setData(oldMapData, '' + ROUTES.MAPS_DATA + mapId);
                    _this.metaMap.Router.to('map/' + mapId);
                });
            });
            return true;
        }
    }, {
        key: 'appendCopy',
        value: function appendCopy(str) {
            var ret = str;
            if (!_.contains(str, '(Copy')) {
                ret = ret + ' (Copy 1)';
            } else {
                var mess = str.split(' ');
                var cnt = 2;
                if (mess[mess.length - 2] == '(Copy') {
                    var grbg = mess[mess.length - 1];
                    if (grbg) {
                        grbg = grbg.replace(')', '');
                        cnt = +grbg + 1;
                        ret = mess.slice(0, mess.length - 2).join(' ');
                    }
                }
                ret += ' (Copy ' + cnt + ')';
            }
            return ret;
        }
    }]);

    return CopyMap;
})(ActionBase);

module.exports = CopyMap;

},{"../constants/routes.js":40,"./ActionBase.js":4}],6:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');
var ROUTES = require('../constants/routes.js');
var _ = require('lodash');
var PAGES = require('../constants/pages.js');

var DeleteMap = (function (_ActionBase) {
    _inherits(DeleteMap, _ActionBase);

    function DeleteMap() {
        _classCallCheck(this, DeleteMap);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(DeleteMap.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(DeleteMap, [{
        key: 'act',
        value: function act(id) {
            var _get2;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(DeleteMap.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            DeleteMap.deleteAll([id]);
            return true;
        }
    }], [{
        key: 'deleteAll',
        value: function deleteAll(ids) {
            var path = arguments.length <= 1 || arguments[1] === undefined ? PAGES.HOME : arguments[1];

            var metaMap = require('../../entry.js');
            _.each(ids, function (id) {
                metaMap.MetaFire.deleteData('' + ROUTES.MAPS_DATA + id);
                metaMap.MetaFire.deleteData('' + ROUTES.MAPS_LIST + id);
                metaMap.Eventer['do'](path);
            });
        }
    }]);

    return DeleteMap;
})(ActionBase);

module.exports = DeleteMap;

},{"../../entry.js":2,"../constants/pages.js":39,"../constants/routes.js":40,"./ActionBase.js":4,"lodash":undefined}],7:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var riot = require('riot');
var ActionBase = require('./ActionBase.js');
var ROUTES = require('../constants/routes.js');
var ELEMENTS = require('../constants/elements.js');
var TAGS = require('../constants/tags.js');
var home = require('../../tags/pages/home');
var EVENTS = require('../constants/events.js');

var Home = (function (_ActionBase) {
    _inherits(Home, _ActionBase);

    function Home() {
        _classCallCheck(this, Home);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(Home.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(Home, [{
        key: 'act',
        value: function act(id) {
            var _get2, _eventer;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(Home.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            $('#' + ELEMENTS.APP_CONTAINER).empty();
            riot.mount(document.getElementById(ELEMENTS.APP_CONTAINER), TAGS.HOME);
            (_eventer = this.eventer)['do'].apply(_eventer, [EVENTS.PAGE_NAME, { name: 'Home' }].concat(params));
            this.closeSidebar();
            return true;
        }
    }]);

    return Home;
})(ActionBase);

module.exports = Home;

},{"../../tags/pages/home":65,"../constants/elements.js":37,"../constants/events.js":38,"../constants/routes.js":40,"../constants/tags.js":41,"./ActionBase.js":4,"riot":"riot"}],8:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var riot = require('riot');
var ActionBase = require('./ActionBase.js');
var ROUTES = require('../constants/routes.js');
var PAGES = require('../constants/pages.js');
var TAGS = require('../constants/tags.js');
var ELEMENTS = require('../constants/elements.js');
var EVENTS = require('../constants/events.js');
var home = require('../../tags/pages/my-maps');

var MyMaps = (function (_ActionBase) {
    _inherits(MyMaps, _ActionBase);

    function MyMaps() {
        _classCallCheck(this, MyMaps);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(MyMaps.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(MyMaps, [{
        key: 'act',
        value: function act(id) {
            var _get2, _eventer, _eventer2;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(MyMaps.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            $('#' + ELEMENTS.APP_CONTAINER).empty();
            riot.mount(document.getElementById(ELEMENTS.APP_CONTAINER), TAGS.MY_MAPS);
            (_eventer = this.eventer)['do'].apply(_eventer, [PAGES.MY_MAPS, { id: id }].concat(params));
            (_eventer2 = this.eventer)['do'].apply(_eventer2, [EVENTS.PAGE_NAME, { name: 'My Maps' }].concat(params));
            this.closeSidebar();

            return true;
        }
    }]);

    return MyMaps;
})(ActionBase);

module.exports = MyMaps;

},{"../../tags/pages/my-maps":66,"../constants/elements.js":37,"../constants/events.js":38,"../constants/pages.js":39,"../constants/routes.js":40,"../constants/tags.js":41,"./ActionBase.js":4,"riot":"riot"}],9:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');
var ROUTES = require('../constants/routes.js');

var NewMap = (function (_ActionBase) {
    _inherits(NewMap, _ActionBase);

    function NewMap() {
        _classCallCheck(this, NewMap);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(NewMap.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(NewMap, [{
        key: 'act',
        value: function act() {
            var _this = this;

            _get(Object.getPrototypeOf(NewMap.prototype), 'act', this).call(this);
            this.metaFire.getData('' + ROUTES.MAPS_NEW_MAP).then(function (blankMap) {
                var newMap = {
                    created_at: new Date(),
                    owner: _this.metaMap.User.userId,
                    name: 'Untitled Map'
                };
                var pushState = _this.metaFire.pushData(newMap, '' + ROUTES.MAPS_LIST);
                var mapId = pushState.key();
                _this.metaFire.setData(blankMap, '' + ROUTES.MAPS_DATA + mapId);
                _this.metaMap.Router.to('map/' + mapId);
            });
            return true;
        }
    }]);

    return NewMap;
})(ActionBase);

module.exports = NewMap;

},{"../constants/routes.js":40,"./ActionBase.js":4}],10:[function(require,module,exports){
/// <reference path="../../../../typings/riotjs/riotjs.d.ts" />

'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var riot = require('riot');
var ActionBase = require('./ActionBase.js');
var ELEMENTS = require('../constants/elements.js');
var TAGS = require('../constants/tags.js');
var ROUTES = require('../constants/routes.js');
var EVENTS = require('../constants/events.js');
var metaCanvas = require('../../tags/canvas/meta-canvas.js');

var OpenMap = (function (_ActionBase) {
    _inherits(OpenMap, _ActionBase);

    function OpenMap() {
        _classCallCheck(this, OpenMap);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(OpenMap.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(OpenMap, [{
        key: 'act',
        value: function act(id) {
            var _get2,
                _this = this;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(OpenMap.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            $('#' + ELEMENTS.APP_CONTAINER).empty();
            this.metaFire.getData('' + ROUTES.MAPS_LIST + id).then(function (map) {
                if (map) {
                    var _eventer, _eventer2, _eventer3;

                    riot.mount(document.getElementById(ELEMENTS.APP_CONTAINER), TAGS.META_CANVAS);
                    map.id = id;
                    (_eventer = _this.eventer)['do'].apply(_eventer, [EVENTS.NAV, 'map', map].concat(params));
                    (_eventer2 = _this.eventer)['do'].apply(_eventer2, [EVENTS.PAGE_NAME, map].concat(params));
                    (_eventer3 = _this.eventer)['do'].apply(_eventer3, [EVENTS.MAP, map].concat(params));
                    _this.openSidebar();
                }
            });
            return true;
        }
    }]);

    return OpenMap;
})(ActionBase);

module.exports = OpenMap;

},{"../../tags/canvas/meta-canvas.js":50,"../constants/elements.js":37,"../constants/events.js":38,"../constants/routes.js":40,"../constants/tags.js":41,"./ActionBase.js":4,"riot":"riot"}],11:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var riot = require('riot');
var ActionBase = require('./ActionBase.js');
var ROUTES = require('../constants/routes.js');
var EVENTS = require('../constants/events.js');
var ELEMENTS = require('../constants/elements.js');
var TAGS = require('../constants/tags.js');
var terms = require('../../tags/pages/terms');

var Terms = (function (_ActionBase) {
    _inherits(Terms, _ActionBase);

    function Terms() {
        _classCallCheck(this, Terms);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(Terms.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(Terms, [{
        key: 'act',
        value: function act(id) {
            var _get2, _eventer;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(Terms.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            $('#' + ELEMENTS.APP_CONTAINER).empty();
            riot.mount(document.getElementById(ELEMENTS.APP_CONTAINER), TAGS.TERMS);
            (_eventer = this.eventer)['do'].apply(_eventer, [EVENTS.PAGE_NAME, { name: 'Terms and Conditions' }].concat(params));
            this.closeSidebar();
            return true;
        }
    }]);

    return Terms;
})(ActionBase);

module.exports = Terms;

},{"../../tags/pages/terms":67,"../constants/elements.js":37,"../constants/events.js":38,"../constants/routes.js":40,"../constants/tags.js":41,"./ActionBase.js":4,"riot":"riot"}],12:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var MetaFire = require('./Firebase.js');
var usersnap = require('../integrations/usersnap');
var ga = require('../integrations/google.js');
var twitter = require('../integrations/twitter.js');
var facebook = require('../integrations/facebook.js');
var addThis = require('../integrations/addthis.js');

var config = function config() {
    var SITES = {
        CRL: {
            db: 'meta-map-production'
        },
        CRL_STAGING: {
            db: 'meta-map-staging'
        },
        THINK_WATER: {
            db: 'thinkwater-production'
        }
    };

    var ret = {
        host: window.location.host,
        site: {}
    };
    var segments = ret.host.split('.');
    var first = segments[0];
    if (first === 'www') {
        first = segments[1];
    }
    switch (first.toLowerCase()) {
        case 'localhost':
        case 'meta-map-staging':
            ret.site = SITES.CRL_STAGING;
            break;

        case 'crlab':
        case 'frontend':
            ret.site = SITES.CRL;
            break;

        case 'thinkwater-production':
        case 'thinkwater-staging':
        case 'thinkwater':
            ret.site = SITES.THINK_WATER;
            break;
    }

    return ret;
};

var Config = (function () {
    function Config(tags) {
        _classCallCheck(this, Config);

        this.tags = tags;
        this.config = config();

        this.MetaFire = new MetaFire(this.config);
        this.socialFeatures = [];
    }

    _createClass(Config, [{
        key: 'initSocial',
        value: function initSocial() {
            _.each(this.socialFeatures, function (feature) {
                if (feature) feature();
            });
        }
    }, {
        key: 'onReady',
        value: function onReady() {
            var _this = this;

            if (!this._onReady) {
                this._onReady = new Promise(function (fulfill, reject) {
                    _this.MetaFire.on('config', function (data) {
                        try {
                            _.extend(_this.config.site, data);
                            document.title = _this.config.site.title;
                            var favico = document.getElementById('favico');
                            favico.setAttribute('href', _this.config.site.imageUrl + 'favicon.ico');
                            _this.init();
                            fulfill(_this.config.site);
                        } catch (e) {
                            reject(e);
                        }
                    });
                });
            }

            return this._onReady;
        }
    }, {
        key: 'init',
        value: function init() {
            var _this2 = this;

            return this.onReady().then(function (config) {
                ga(_this2.config.site.google);
                //this.socialFeatures.push(twitter());
                //this.socialFeatures.push(facebook());
                _this2.socialFeatures.push(addThis(_this2.config.site.addthis.pubid));
                usersnap();
            });
        }
    }, {
        key: 'site',
        get: function get() {
            return 'frontend';
        }
    }]);

    return Config;
})();

module.exports = Config;

},{"../integrations/addthis.js":42,"../integrations/facebook.js":43,"../integrations/google.js":44,"../integrations/twitter.js":45,"../integrations/usersnap":46,"./Firebase.js":14}],13:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Eventer = (function () {
    function Eventer(metaMap) {
        _classCallCheck(this, Eventer);

        riot.observable(this);

        this.events = {};
    }

    _createClass(Eventer, [{
        key: 'every',
        value: function every(event, reaction) {
            var _this = this;

            //let callback = reaction;
            //if (this.events[event]) {
            //    let piggyback = this.events[event];
            //    callback = (...params) => {
            //        piggyback(...params);
            //        reaction(...params);
            //    }
            //}
            var events = event.split(' ');
            _.each(events, function () {
                _this.events[event] = reaction;
                _this.on(event, reaction);
            });
        }
    }, {
        key: 'forget',
        value: function forget(event, callback) {
            var _this2 = this;

            var events = event.split(' ');
            _.each(events, function () {
                if (!callback) {
                    delete _this2.events[event];
                    _this2.off(event);
                } else {
                    _this2.off(event, callback);
                }
            });
        }
    }, {
        key: 'do',
        value: function _do(event) {
            var _this3 = this;

            for (var _len = arguments.length, params = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                params[_key - 1] = arguments[_key];
            }

            var events = event.split(' ');
            _.each(events, function () {
                _this3.trigger.apply(_this3, [event].concat(params));
            });
        }
    }]);

    return Eventer;
})();

module.exports = Eventer;

},{}],14:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Firebase = window.Firebase; //require('firebase');
var Promise = window.Promise;
var localforage = window.localforage;

var MetaFire = (function () {
    function MetaFire(config) {
        _classCallCheck(this, MetaFire);

        this.config = config;
        this.fb = new Firebase('https://' + this.config.site.db + '.firebaseio.com');
    }

    _createClass(MetaFire, [{
        key: 'login',
        value: function login() {
            var _this = this;

            if (!this._login) {
                this._login = new Promise(function (fulfill, reject) {
                    window.MetaMap.Auth0.getSession().then(function (profile) {

                        window.MetaMap.Auth0.lock.getClient().getDelegationToken({
                            target: _this.config.site.auth0.api,
                            id_token: profile.id_token,
                            api_type: 'firebase'
                        }, function (err, delegationResult) {
                            if (err) {
                                reject(err);
                            } else {
                                profile.firebase_token = delegationResult.id_token;
                                _this.firebase_token = delegationResult.id_token;
                                localforage.setItem('firebase_token', _this.firebase_token);
                                _this.fb.authWithCustomToken(_this.firebase_token, function (error, authData) {
                                    if (error) {
                                        _this.metaMap.error(error);
                                        reject(error);
                                    } else {
                                        fulfill(authData);
                                    }
                                });
                            }
                        });
                    })['catch'](function (err) {
                        console.log(err);
                        debugger;
                    });
                });
                this._onReady = this._login;
            }
            return this._login;
        }
    }, {
        key: 'onReady',
        value: function onReady() {
            if (!this._onReady) {
                this._onReady = new Promise(function (fulfill, reject) {
                    fulfill();
                });
            }
            return this._onReady;
        }
    }, {
        key: 'getChild',
        value: function getChild(path) {
            return this.fb.child(path);
        }
    }, {
        key: 'getData',
        value: function getData(path) {
            var _this2 = this;

            return this.onReady().then(function () {
                var child = _this2.fb;
                if (path) {
                    child = _this2.getChild(path);
                }
                return new Promise(function (resolve, reject) {

                    child.once('value', function (snapshot) {
                        var data = snapshot.val();
                        try {
                            resolve(data);
                        } catch (e) {
                            _this2.metaMap.error(e);
                        }
                    }, function (error) {
                        _this2.error(e, path);
                        reject(error);
                    });
                });
            });
        }
    }, {
        key: 'on',
        value: function on(path, callback) {
            var _this3 = this;

            var event = arguments.length <= 2 || arguments[2] === undefined ? 'value' : arguments[2];

            if (path) {
                this.onReady().then(function () {
                    var child = _this3.getChild(path);
                    var method = function method(snapshot) {
                        try {
                            if (!snapshot.exists()) {
                                child.off(event, method);
                                throw new Error('There is no data at ' + path);
                            }
                            var data = snapshot.val();
                            callback(data);
                        } catch (e) {
                            child.off(event, method);
                            _this3.error(e, path);
                        }
                    };
                    child.on(event, method);
                });
            }
        }
    }, {
        key: 'off',
        value: function off(path, method, callback) {
            var _this4 = this;

            if (method === undefined) method = 'value';

            if (path) {
                this.onReady().then(function () {
                    var child = _this4.getChild(path);
                    if (callback) {
                        child.off(method, callback);
                    } else {
                        child.off(method);
                    }
                });
            }
        }
    }, {
        key: 'setData',
        value: function setData(data, path) {
            var _this5 = this;

            var child = this.fb;
            if (path) {
                child = this.getChild(path);
            }
            try {
                return child.set(data, function (e) {
                    if (e) {
                        _this5.error(e, path);
                    }
                });
            } catch (e) {
                this.error(e, path);
            }
        }
    }, {
        key: 'deleteData',
        value: function deleteData(path) {
            return this.setData(null, path);
        }
    }, {
        key: 'pushData',
        value: function pushData(data, path) {
            var _this6 = this;

            var child = this.fb;
            if (path) {
                child = this.getChild(path);
            }
            try {
                return child.push(data, function (e) {
                    if (e) {
                        _this6.error(e, path);
                    }
                });
            } catch (e) {
                this.error(e, path);
            }
        }
    }, {
        key: 'setDataInTransaction',
        value: function setDataInTransaction(data, path, callback) {
            var _this7 = this;

            var child = this.fb;
            if (path) {
                child = this.getChild(path);
            }
            try {
                return child.transaction(function (currentValue) {
                    try {
                        return data;
                    } catch (e) {
                        _this7.error(e, path);
                    }
                });
            } catch (e) {
                this.error(e, path);
            }
        }
    }, {
        key: 'error',
        value: function error(e, path) {
            if (e) {
                this.metaMap.error(e);
            }
            if (path) {
                this.metaMap.error({ message: 'Permission denied to ' + path });
            }
        }
    }, {
        key: 'logout',
        value: function logout() {
            this._login = null;
            this._onReady = null;
            localforage.removeItem('firebase_token');
            this.fb.unauth();
        }
    }, {
        key: 'metaMap',
        get: function get() {
            if (!this._metaMap) {
                this._metaMap = require('../../entry.js');
            }
            return this._metaMap;
        }
    }]);

    return MetaFire;
})();

module.exports = MetaFire;

},{"../../entry.js":2}],15:[function(require,module,exports){
/// <reference path="../../../../typings/riotjs/riotjs.d.ts" />

'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var riot = require('riot');
var ACTIONS = require('../constants/actions');

var isHidden = false;

var track = function track(path) {
    if (window.ga) {
        window.ga('set', {
            page: path
        });
        window.ga('send', 'pageview');
    }
};

var toggleMain = function toggleMain(hide, path) {
    track(path);
    if (hide) {
        isHidden = true;
    } else {
        isHidden = false;
    }
};

var Router = (function () {
    function Router(metaMap) {
        var _this = this;

        _classCallCheck(this, Router);

        this.user = metaMap.User;
        this.PageFactory = metaMap.PageFactory;

        riot.route.start();
        riot.route(function (target) {
            for (var _len = arguments.length, params = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {
                params[_key - 3] = arguments[_key];
            }

            var _PageFactory;

            var id = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];
            var action = arguments.length <= 2 || arguments[2] === undefined ? '' : arguments[2];

            _this.path = _this.getPath(target);

            toggleMain(true, _this.path);
            (_PageFactory = _this.PageFactory).navigate.apply(_PageFactory, [_this.path, id, action].concat(params));

            metaMap.Eventer['do']('history', window.location.hash);
        });
        this.to(this.currentPage);
    }

    _createClass(Router, [{
        key: 'getPreviousPage',
        value: function getPreviousPage() {
            var pageNo = arguments.length <= 0 || arguments[0] === undefined ? 2 : arguments[0];

            var page = 'home';
            var pageCnt = this.user.history.length;
            if (pageCnt > 0) {
                page = this.getPath(this.user.history[pageCnt - pageNo]);
            }
            return page;
        }
    }, {
        key: 'getPath',
        value: function getPath(path) {
            return route.getPath(path);
        }
    }, {
        key: 'to',
        value: function to(path) {
            return route.to(path);
        }
    }, {
        key: 'back',
        value: function back() {
            var path = 'home';
            var pageCnt = this.user.history.length;
            if (pageCnt > 1 && (this.currentPage != 'mymaps' || this.currentPage != this.previousPage)) {
                path = this.previousPage;
                var backNo = 2;
                while (path.startsWith(ACTIONS.DELETE_MAP) || path.startsWith(ACTIONS.COPY_MAP) || path.startsWith(ACTIONS.NEW_MAP)) {

                    backNo += 1;
                    path = this.getPreviousPage(backNo);
                }
            }
            return this.to(path);
        }
    }, {
        key: 'currentPage',
        get: function get() {
            var page = 'home';
            var pageCnt = this.user.history.length;
            if (pageCnt > 0) {
                page = this.getPath(this.user.history[pageCnt - 1]);
            }
            return page;
        }
    }, {
        key: 'currentPath',
        get: function get() {
            return this.path;
        }
    }, {
        key: 'previousPage',
        get: function get() {
            return this.getPreviousPage(2);
        }
    }], [{
        key: 'getPath',
        value: function getPath(path) {
            if (path) {
                while (path.startsWith('!') || path.startsWith('#')) {
                    path = path.substr(1);
                }
            }
            return path;
        }
    }, {
        key: 'to',
        value: function to(path) {
            path = route.getPath(path);
            if (path) {
                toggleMain(true, path);
                riot.route('' + path);
            }
        }
    }]);

    return Router;
})();

var route = Router;

module.exports = Router;

},{"../constants/actions":36,"riot":"riot"}],16:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Auth0Lock = require('auth0-lock');

var Auth0 = (function () {
    function Auth0(config, metaMap) {
        _classCallCheck(this, Auth0);

        this.config = config;
        this.metaMap = metaMap;
        this.lock = new Auth0Lock(config.api, config.app);
        this.lock.on('loading ready', function () {});
    }

    _createClass(Auth0, [{
        key: 'login',
        value: function login() {
            var _this = this;

            if (!this._login) {
                this._login = new Promise(function (fulfill, reject) {
                    var showLogin = function showLogin() {
                        _this.lock.show({
                            closable: false,
                            loginAfterSignup: true,
                            authParams: {
                                scope: 'openid offline_access'
                            }
                        }, function (err, profile, id_token, ctoken, opt, refresh_token) {
                            if (err) {
                                _this.onFail(err, reject);
                            } else {
                                localforage.setItem('id_token', id_token);
                                localforage.setItem('profile', profile);

                                _this.ctoken = profile.ctoken = ctoken;
                                _this.id_token = profile.id_token = id_token;
                                _this.profile = profile;
                                _this.refresh_token = profile.refresh_token = refresh_token;
                                _this._getSession = fulfill(profile);
                            }
                        });
                    };
                    _this.getSession().then(function (profile) {
                        if (profile) {
                            fulfill(profile);
                        } else {
                            showLogin();
                        }
                    })['catch'](function (err) {
                        showLogin();
                    });
                });
            }
            return this._login;
        }
    }, {
        key: 'linkAccount',
        value: function linkAccount() {
            this.lock.show({
                callbackURL: location.href.replace(location.hash, ''),
                dict: {
                    signin: {
                        title: 'Link with another account'
                    }
                },
                authParams: {
                    access_token: this.ctoken
                }
            });
        }
    }, {
        key: 'onFail',
        value: function onFail(err, reject) {
            this.metaMap.error(err);
            if (reject) {
                reject(err);
                this.logout();
            }
        }
    }, {
        key: 'getSession',
        value: function getSession() {
            var _this2 = this;

            if (this.profile) {
                this._getSession = new Promise(function (fulfill, reject) {
                    fulfill(_this2.profile);
                });
            } else if (!this._getSession) {
                this._getSession = new Promise(function (fulfill, reject) {
                    return localforage.getItem('id_token').then(function (id_token) {
                        if (id_token) {
                            return _this2.lock.getProfile(id_token, function (err, profile) {
                                if (err) {
                                    _this2.onFail(err, reject);
                                } else {
                                    localforage.setItem('id_token', id_token);
                                    localforage.setItem('profile', profile);
                                    _this2.id_token = profile.id_token = id_token;
                                    _this2.profile = profile;
                                    return fulfill(profile);
                                }
                            });
                        } else {
                            return reject(new Error('No session'));
                        }
                    });
                });
            }
            return this._getSession;
        }
    }, {
        key: 'logout',
        value: function logout() {
            var _this3 = this;

            localforage.removeItem('id_token').then(function () {
                return localforage.removeItem('profile');
            }).then(function () {
                _this3.profile = null;
                _this3.ctoken = null;
                _this3.id_token = null;
                _this3.refresh_token = null;
                _this3._login = null;
                _this3._getSession = null;
                window.location.reload();
            });
        }
    }]);

    return Auth0;
})();

module.exports = Auth0;

},{"auth0-lock":undefined}],17:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var uuid = require('../tools/uuid.js');
var MetaMap = window.MetaMap;

var User = (function () {
    function User(profile, auth, eventer, metaFire) {
        _classCallCheck(this, User);

        this.auth = auth;
        this.eventer = eventer;
        this.metaFire = metaFire;
        this.params = URI(window.location).query(true);
        this.thinkquery = this.params.thinkquery ? true : false;
        this.userKey = uuid();
        this.onReady();
    }

    _createClass(User, [{
        key: 'onReady',
        value: function onReady() {
            var _this = this;

            if (!this._onReady) {
                (function () {
                    var trackHistory = _.once(function () {
                        _this.eventer.every('history', function (page) {
                            if (_this.history.length == 0 || page != _this.history[_this.history.length - 1]) {
                                _this.history.push(page);
                                _this.metaFire.setData(_this.history, 'users/' + _this.auth.uid + '/history');
                            }
                        });
                    });
                    _this._onReady = new Promise(function (fulfill, reject) {
                        _this.metaFire.on('users/' + _this.auth.uid, function (user) {
                            if (user) {
                                if (!user.history) {
                                    user.history = [];
                                }
                                _this.profile = user;
                                trackHistory();
                                fulfill(user);
                            }
                        });
                    });
                })();
            }
            return this._onReady;
        }
    }, {
        key: 'saveUserEditorOptions',
        value: function saveUserEditorOptions(options) {
            var data = {
                user: {
                    editor_options: JSON.stringify(options)
                }
            };
        }
    }, {
        key: 'displayName',
        get: function get() {
            var ret = this.fullName;
            if (this.profile && this.profile.identity) {
                if (ret) {
                    ret = ret.split(' ')[0];
                }
                if (!ret) {
                    ret = this.profile.identity.nickname;
                }
            }

            return ret;
        }
    }, {
        key: 'fullName',
        get: function get() {
            var ret = '';
            if (this.profile && this.profile.identity) {
                if (this.profile.identity.name) {
                    ret = this.profile.identity.name;
                }
            }
            return ret;
        }
    }, {
        key: 'picture',
        get: function get() {
            var ret = '';
            if (this.profile && this.profile.identity) {
                ret = this.profile.identity.picture;
            }
            return ret;
        }
    }, {
        key: 'userId',
        get: function get() {
            return this.auth.uid;
        }
    }, {
        key: 'isAdmin',
        get: function get() {
            var ret = false;
            if (this.profile && this.profile.identity) {
                ret = this.profile.identity.roles.indexOf('admin') !== -1;
            }
            return ret;
        }
    }, {
        key: 'history',
        get: function get() {
            return this.profile.history || [];
        }
    }]);

    return User;
})();

module.exports = User;

},{"../tools/uuid.js":49}],18:[function(require,module,exports){
// functions handling analytics
// analytics display is in views/maps/_analytics_tab_map and _analytics_tab_thing
'use strict';

SandbankEditor.Analytics = function ($scope, $http, map) {

    var self = this;

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.ui().currentTabIs(map.ui().TAB_ID_ANALYTICS_THING)) {
                self.updateContextualAnalytics();
            }
        }
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.ui().TAB_ID_ANALYTICS_THING) {
            // opening thing analytics tab
            self.updateContextualAnalytics();
        }
    };

    // this gets populated by map.loadMapExtraData, on load and after every autosave
    this.mapAnalytics = null;

    // --------- contextual analytics --------------
    // - these are all calculated here, unlike map analytics which are calculated on the server and connected with badges and points

    // this gets calculated by updateContextualAnalytics
    this.contextualAnalytics = {
        thingName: '',

        // thing stuff
        distinctFrom: 0,
        intentionallyDistinctFrom: 0,
        partOf: 0,
        includesParts: 0,
        relatedTo: 0,
        isRelationship: 0,
        lookingAt: 0,
        lookedAtFrom: 0,

        // R stuff
        rFromThingName: '',
        rToThingName: '',
        isRThing: false,
        isRSystem: false,
        isRPoint: false,
        isRView: false
    };

    this.updateContextualAnalytics = function () {
        //console.log('updateContextualAnalytics');
        if (!map.ui().currentTabIs(map.ui().TAB_ID_ANALYTICS_THING)) {
            return;
        }

        var diagram = map.getDiagram();
        var part = diagram.selection.first();
        var a = self.contextualAnalytics;

        if (part && part instanceof go.Group) {
            var thing = part;

            // thing name
            a.thingName = thing.data.text;

            // distinct from
            a.distinctFrom = _.where(diagram.model.nodeDataArray, { isGroup: true }).length - 1;

            // part of
            var level = 0;
            var thing2 = thing;
            while (thing2 = getContainingGroup(thing2)) {
                level++;
            }
            a.partOf = level;

            // includes parts
            a.includesParts = countGroups(thing);

            // related to / looking at / looked at from / intentionally distinct from
            a.relatedTo = 0;
            a.lookingAt = 0;
            a.lookedAtFrom = 0;
            a.intentionallyDistinctFrom = 0;
            var links = thing.linksConnected;
            var rConnectedThingKeys = [];
            while (links.next()) {
                var link = links.value;
                // P link
                if (link.data.category == 'P') {
                    if (link.fromNode == thing) {
                        a.lookingAt++;
                    } else if (link.toNode == thing) {
                        a.lookedAtFrom++;
                    }
                }
                // D link
                else if (link.data.category == 'D') {
                        a.intentionallyDistinctFrom++;
                    }
                    // R link
                    else if (!link.data.category) {
                            // track keys of related things so we don't count them multiple times
                            if (link.fromNode == thing) {
                                rConnectedThingKeys.push(link.toNode.data.key);
                            } else if (link.toNode == thing) {
                                rConnectedThingKeys.push(link.fromNode.data.key);
                            }
                        }
            }
            a.relatedTo = _.uniq(rConnectedThingKeys).length;

            // isRelationship
            a.isRelationship = thing.isLinkLabel;
        } else if (part && part instanceof go.Link) {
            var rel = part;

            // thing names
            a.rFromThingName = rel.fromNode.data.text;
            a.rToThingName = rel.toNode.data.text;

            // is R thing
            a.isRThing = rel.isLabeledLink;

            // is R system
            a.isRSystem = rel.isLabeledLink && countGroups(rel.labelNodes.first()) > 0;

            // is R point
            a.isRPoint = rel.isLabeledLink && isPoint(rel.labelNodes.first());

            // is R view
            a.isRView = rel.isLabeledLink && isView(rel.labelNodes.first());
        }
    };

    // returns either the containingGroup or the rThingContainingGroup, whichever is non-null
    function getContainingGroup(group) {
        return group.containingGroup || getRThingContainingGroup(group);
    }

    // if group is an R-thing between two sibling parts of a whole, returns the whole; else returns null
    function getRThingContainingGroup(group) {
        if (group.isLinkLabel) {
            var fromParent = group.labeledLink.fromNode.containingGroup;
            var toParent = group.labeledLink.toNode.containingGroup;
            if (fromParent !== null && toParent !== null && fromParent == toParent) {
                return fromParent;
            }
        }
        return null;
    }

    // counts the member parts of the group that are groups, recursively (not including the group itself)
    function countGroups(group) {
        var count = 0;
        var it = getMemberGroups(group).iterator;
        while (it.next()) {
            var part = it.value;
            count += 1 + countGroups(part);
        }

        return count;
    }

    // returns the collection of groups that are either a memberPart of this group, or an R-thing between sibling memberParts
    function getMemberGroups(group) {
        var members = new go.List();
        var it = group.memberParts;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group) {
                members.add(part);
                var rthing = getRThingToSibling(part); // NB: should not get duplication here, as this checks for r-things in only one direction
                if (rthing) {
                    members.add(rthing);
                }
            }
        }
        return members;
    }

    // if the group is linked by an R-thing to a sibling (with the group as the fromNode), returns the R-thing; else returns null
    function getRThingToSibling(group) {
        var it = group.findLinksOutOf();
        while (it.next()) {
            var link = it.value;
            if (link.labelNodes.count > 0 && link.toNode.containingGroup == group.containingGroup) {
                return link.labelNodes.first();
            }
        }
        return null;
    }

    function isPoint(group) {
        var it = group.findLinksOutOf();
        while (it.next()) {
            var link = it.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    }

    function isView(group) {
        var it = group.findLinksInto();
        while (it.next()) {
            var link = it.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    }
};

},{}],19:[function(require,module,exports){
// functions handling attachments

'use strict';

SandbankEditor.Attachments = function ($scope, $http, $resource, map) {

    var self = this;

    this.selectedThing = null;
    this.attachments = null;

    this.attachmentTypes = [{ name: 'note', labelSingular: 'Note', labelPlural: 'Notes' }, { name: 'link', labelSingular: 'Web Link', labelPlural: 'Web Links' }, { name: 'task', labelSingular: 'Task', labelPlural: 'Tasks' }, { name: 'map', labelSingular: 'Linked MetaMap', labelPlural: 'Linked MetaMaps' }
    //        {name: 'doc', labelSingular: 'Document', labelPlural: 'Documents'}  // limit overall storage space OR simpler rules?
    // limit file types - pdf, jpg, gif, png, office?...  whitelist vs. blacklist
    ];

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.ui().currentTabIs(map.ui().TAB_ID_ATTACHMENTS)) {
                self.stopEditingAll();
                self.saveAttachments();
                self.loadSelectedThingAttachments();
            }
        }
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.ui().TAB_ID_ATTACHMENTS) {
            // opening tab
            self.loadSelectedThingAttachments();
        }
        if (oldValue == map.ui().TAB_ID_ATTACHMENTS) {
            // closing tab
            self.saveAttachments();
        }
    };

    this.loadSelectedThingAttachments = function () {
        $scope.safeApply(function () {
            if (map.thingSelected()) {
                self.selectedThing = map.getUniqueThingSelected();
                self.attachments = self.selectedThing.data.attachments;
                if (self.attachments === undefined) {
                    self.attachments = [];
                }
            }
        });
    };

    // set all attachments to editing = false
    this.stopEditingAll = function () {
        $scope.safeApply(function () {
            if (self.attachments) {
                _.each(self.attachments, function (att) {
                    att.editing = false;
                });
            }
        });
    };

    this.editingAnItem = function () {
        return self.attachments && _.findWhere(self.attachments, { editing: true }) !== undefined;
    };

    // set all other attachments to editing = false
    this.startEditing = function (attachment) {
        $scope.safeApply(function () {
            self.stopEditingAll();
            attachment.editing = true;
        });
    };

    this.saveItem = function (attachment) {
        $scope.safeApply(function () {
            attachment.editing = false;
            self.saveAttachments();
        });
    };

    this.saveAttachments = function () {
        $scope.safeApply(function () {
            //console.log('saveAttachments, selected: ' + self.selectedThing);
            if (self.selectedThing) {
                map.getDiagram().model.setDataProperty(self.selectedThing.data, 'attachments', self.attachments);
                self.selectedThing.updateTargetBindings();
            }
            map.getAutosave().saveNow('edit_attachments');
        });
    };

    this.listAttachments = function (type) {
        var atts = _.where(self.attachments, { type: type });
        return atts;
    };

    this.addAttachment = function (type) {
        var item = { type: type, editing: true };
        if (type == 'note') {
            self.attachments.push(_.extend(item, { text: '', url: '' }));
        } else if (type == 'link') {
            self.attachments.push(_.extend(item, { label: '', url: '' }));
        } else if (type == 'task') {
            self.attachments.push(_.extend(item, { text: '' }));
        } else if (type == 'doc') {
            self.attachments.push(_.extend(item, { name: '' }));
        } else if (type == 'map') {
            self.attachments.push(_.extend(item, { mapRef: { id: 0, name: '' } }));
        }
    };

    this.isValid = function (attachment) {
        if (attachment.type == 'link') {
            return attachment.label && attachment.url && attachment.label.trim() !== '' && attachment.url.trim() !== '';
        } else if (attachment.type == 'note') {
            return attachment.text && attachment.text.trim() !== '';
        } else if (attachment.type == 'task') {
            return attachment.text && attachment.text.trim() !== '';
        } else if (attachment.type == 'doc') {
            return attachment.name && attachment.name.trim() !== '';
        } else if (attachment.type == 'map') {
            return attachment.mapRef && attachment.mapRef.id !== null && attachment.mapRef.id !== undefined;
        }
    };

    this.deleteAttachment = function (att) {
        var typeLabel = _.findWhere(self.attachmentTypes, { name: att.type }).labelSingular;
        if (confirm('Delete ' + typeLabel + '?')) {
            var i = _.indexOf(self.attachments, att);
            self.attachments.splice(i, 1);
        }
    };

    // query server for maps containing the given text in the map name
    this.getOtherMaps = function (viewValue) {
        // NB: this URL is constructed to match the one generated by the search form on the maps page...
        var url = '/maps/visible_maps.json?utf8=%E2%9C%93&q%5Bname_cont%5D=' + viewValue;
        return $http.get(url).then(function (response) {
            return response.data.maps;
        });
    };

    this.otherMapSelected = function (viewValue, modelValue) {
        //console.log('otherMapSelected, viewValue: ' + viewValue.id + ', modelValue: ' + modelValue);
    };

    this.formatOtherMap = function (model) {
        return model ? model.name : '';
    };
};

},{}],20:[function(require,module,exports){
// functions handling editor autosave function

'use strict';

SandbankEditor.Autosave = function ($scope, $http, map) {

    var self = this;

    var changeTypes = [];

    this.saveOnModelChanged = true;

    // do a save next time the set interval passes with no save requests
    this.save = function (changeType) {
        changeTypes.push(changeType);
        delayedAutosave();
    };

    // do a save right now
    this.saveNow = function (changeType) {
        changeTypes.push(changeType);
        autosave();
    };

    // don't let autosave be triggered more than every N milliseconds...
    var delayedAutosave = _.debounce(autosave, 2000);

    // compile the current list of change type descriptions, process them
    // to remove duplicates, and save the current data
    function autosave() {
        // stop right here if we're in the sandbox and/or we don't have edit permissions
        if ($scope.sandbox || !$scope.canEdit) {
            return;
        }

        if (!changeTypes.length) {
            //console.log('autosave: nothing to save!'); // shouldn't happen
            return;
        }

        // de-dupe the list of change types
        var changeList = _.uniq(changeTypes);
        //console.log('changeList: ' + changeList);
        // don't show move events unless that's all we have
        var changeListWithoutMoves = _.without(changeList, 'move');
        if (changeListWithoutMoves.length > 0) {
            changeList = changeListWithoutMoves;
        }
        //console.log('changeList without moves: ' + changeList);
        // get descriptions
        var descriptionList = _.map(changeList, function (ct) {
            return _.result(changeDescriptions, ct);
        });

        //console.log('autosave, changeList: ' + changeList + ', descriptionList: ' + descriptionList);
        var postData = {
            data: JSON.parse(map.getDiagram().model.toJson()),
            state_data: map.ui().getStateData(),
            editor_options: map.ui().getMapEditorOptions(),
            presenter_slides: map.getPresenter().getSlideCount(),
            activity_slides: map.getPresenter().getActivitySlideCount(),
            change_type: changeList.join(';'),
            change_description: descriptionList.join('; '),
            thumbnail_png: map.getPresenter().getMapThumbnail(),
            changed_by: MetaMap.User.userKey
        };
        var url = $scope.mapUrl + '.json';

        $scope.updateEditStatus($scope.SAVING);

        changeTypes = [];
        $scope.updateEditStatus($scope.SAVE_OK);
        // load returned data for analytics, points, badges, versions
        // $scope.map.loadMapExtraData(response.data.map);
        MetaMap.MetaFire.setDataInTransaction(postData, 'maps/data/' + $scope.mapId);
    }

    // -------------- handle model changes - trigger autosave ------------------

    var changeDescriptions = {
        move: 'Moved Objects',
        undo_redo: 'Performed Undo/Redo',
        edit_title: 'Edited MetaMap Title',
        edit_description: 'Edited MetaMap Description',
        edit_usertags: 'Edit MetaMap Tags',
        edit_d: 'Edited Distinctions',
        edit_s: 'Edited Systems',
        edit_r: 'Edited Relationships',
        edit_p: 'Edited Perspectives',
        add_thing: 'Added Ideas',
        rename_thing: 'Renamed Ideas',
        delete_thing: 'Deleted Ideas',
        edit_attachments: 'Edited Attachments',
        edit_presenter: 'Edited Presenter Slides',
        edit_generator: 'Inserted Ideas from ThinkQuery',
        edit_standards: 'Edited Links to Common Core Standards'
    };

    // e is a go.ChangedEvent
    this.modelChanged = function (e) {

        if (!self.saveOnModelChanged) {
            return;
        }

        var changeType = null;
        var changeDescription = null;

        if (e.propertyName == 'type') {
            // change R type
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,n,1,o,2,A,3,r,4,r,5,o,6,w,7,s] , newParam: null, newValue: [0,t,1,o] , propertyName: type
            changeType = 'edit_r';
            changeDescription = 'Changed Relationship Types';
        } else if (e.propertyName == 'layout') {
            // change system layout
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,l,1,e,2,f,3,t] , newParam: null, newValue: [0,r,1,i,2,g,3,h,4,t] , propertyName: layout
            changeType = 'edit_s';
        } else if (e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'fromPort', 'R')) {
            // add link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,P] , propertyName: linkDataArray
            // modelChange: linkToPortId, change: ChangedEvent.Property, oldParam: null, oldValue: [0,P] , newParam: null, newValue: [0,R] , propertyName: toPort
            changeType = 'edit_r';
        } else if (e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'fromPort', 'R')) {
            // delete link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,R] , newParam: null, newValue: [] , propertyName: linkDataArray
            changeType = 'edit_r';
        } else if (e.propertyName == 'linkDataArray') {
            // change P/D links
            // add P link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 2, newValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P] , propertyName: linkDataArray
            // modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
            // delete P link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 2, oldValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P,category,P] , newParam: null, newValue: [] , propertyName: linkDataArray
            // add D link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , propertyName: linkDataArray
            // remove D link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , newParam: null, newValue: [] , propertyName: linkDataArray

            if (e.newValue && e.newValue.category == 'P' || e.oldValue && e.oldValue.category == 'P') {
                changeType = 'edit_p';
            } else if (e.newValue && e.newValue.category == 'D' || e.oldValue && e.oldValue.category == 'D') {
                changeType = 'edit_d';
            }
        } else if (e.propertyName == 'category') {
            // add P link
            // modelChanged, modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
            changeType = 'edit_p';
        } else if (e.propertyName == 'group') {
            // drag into S
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
            // reorder part
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
            // drag to D
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group

            changeType = 'edit_s';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'isGroup', true)) {
            // add thing
            // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7] , propertyName: nodeDataArray
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,2,1,2,2,8,3,.,4,5,5,6,6,2,7,5,8, ,9,-,10,1,11,4,12,9,13,.,14,6,15,8,16,7,17,5] , propertyName: loc
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: children
            changeType = 'add_thing';
        } else if (e.propertyName == 'text') {
            // move thing
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,b,1,b,2,b,3,b,4,b] , newParam: null, newValue: [0,a,1,a,2,a,3,a,4,a] , propertyName: text
            changeType = 'rename_thing';
            changeDescription = 'Renamed Ideas';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'isGroup', true)) {
            // delete thing
            // modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7,loc,228.5625 -149.6875,children,0,attachments,] , newParam: null, newValue: [] , propertyName: nodeDataArray
            changeType = 'delete_thing';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'isGroup', false)) {
            // add slide
            // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877] , propertyName: nodeDataArray
            changeType = 'edit_presenter';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'isGroup', false)) {
            // delete slide
            //modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877,$$hashKey,0XN] , newParam: null, newValue: [] , propertyName: nodeDataArray
            changeType = 'edit_presenter';
        } else if (e.propertyName == 'loc' || e.propertyName == 'width' || e.propertyName == 'height') {
            // move thing or resize slide
            // move slide
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,8] , newParam: null, newValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,7] , propertyName: loc
            // resize slide
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: height
            // move thing
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,4,1,7,2,9,3,.,4,8,5,7,6,5,7, ,8,-,9,1,10,2,11,2,12,.,13,8,14,7,15,5] , newParam: null, newValue: [0,5,1,4,2,0,3,.,4,3,5,1,6,2,7,5,8, ,9,-,10,1,11,2,12,1,13,.,14,1,15,8,16,7,17,5] ,            
            changeType = 'move';
        } else if (e.propertyName == 'level' || e.propertyName == 'children') {
            // these attributes are updated as a result of other actions; ignore
            changeType = null;
        } else if (e.propertyName == 'attachments') {
            // edited attachments
            changeType = 'edit_attachments';
        } else if (e.propertyName == 'sExpanded' || e.propertyName == 'pExpanded') {
            // ignore expand/collapse
            changeType = 'move';
        } else if (e.propertyName == 'FinishedUndo' || e.propertyName == 'FinishedRedo') {
            changeType = 'undo_redo';
            map.refresh();
        } else if (e.change != go.ChangedEvent.Transaction) {
            //console.log('modelChanged, modelChange: ' + e.modelChange +
            //    ', change: ' + e.change +
            //    ', oldParam: ' + e.oldParam +
            //    ', oldValue: [' + _.pairs(e.oldValue) + '] ' +
            //    ', newParam: ' + e.newParam +
            //    ', newValue: [' + _.pairs(e.newValue) + '] ' +
            //    ', propertyName: ' + e.propertyName
            //);
        }

        if (changeType) {
            map.getAnalytics().updateContextualAnalytics();
            //console.log('calling delayedAutosave, changeType: ' + changeType);
            self.save(changeType);
        }
    };

    // convenience function for checking properties
    function propertyEquals(obj, key, value) {
        return obj !== null && _.has(obj, key) && _.result(obj, key) == value;
    }
};

},{}],21:[function(require,module,exports){
// main controller class

'use strict';

window.SandbankEditor = {};

window.MapEditorCtrl = function ($rootScope, $scope, $http, $resource, $timeout, $modal, $log) {

    $scope.map = new SandbankEditor.Map($scope, $http, $resource, $timeout, $modal, $log);

    // window.mapData is set in _form view
    var metadata = $scope.mapData.metadata;
    $scope.sandbox = metadata.sandbox;
    //$scope.mapData = window.mapData.map.data; // this gets overwritten by load() unless we are in the sandbox with no map ID
    //$scope.mapId = metadata.id;
    $scope.mapTitle = metadata.name;
    $scope.mapUserTags = metadata.userTags;
    $scope.mapUrl = metadata.url;
    $scope.canEdit = metadata.canEdit;
    $scope.updatedAt = metadata.updatedAt;
    $scope.updatedBy = metadata.updatedBy; // ID
    $scope.updatedByName = metadata.updatedByName;

    $scope.editingTitle = false;

    $scope.showImageExport = false;
    $scope.imageExportLoading = true;

    $scope.currentTab = null;

    // override parent scope (see user.js) since we're editing a map
    $scope.ccsTagging.mapId = $scope.mapId;

    $scope.maybeStartEditingTitle = function () {
        if ($scope.canEdit) {
            $scope.editingTitle = true;
        }
    };

    $scope.doneEditingTitle = function () {
        //console.log('doneEditingTitle');
        $scope.editingTitle = false;
        $scope.map.getAutosave().save('edit_title');
    };

    $scope.editingTitleKeypress = function (e) {
        if (e.which == 13) {
            $scope.doneEditingTitle();
        }
    };

    $scope.print = function () {
        window.print();
    };

    // ------------ save sandbox map (sign up/sign in) ---------------

    $scope.saveSandboxMap = function () {
        var modalInstance = $modal.open({
            templateUrl: 'template_sandbox_save_modal.html', // see views/users/_template_sandbox_save_modal
            backdrop: 'static',
            controller: sandboxSaveModalCtrl,
            windowClass: 'sandbox-save-modal',
            resolve: {
                outerScope: function outerScope() {
                    return $scope;
                },
                map: function map() {
                    return $scope.map;
                },
                userProfile: function userProfile() {
                    return $scope.userProfile;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    var sandboxSaveModalCtrl = function sandboxSaveModalCtrl($scope, $modalInstance, outerScope, map, userProfile) {

        $scope.map = map;
        $scope.userProfile = userProfile;

        $scope.mapData = map.getDiagram().model.toJson();
        $scope.thumbnailPng = map.getPresenter().getMapThumbnail();

        function getDefaultLoginData() {
            return {
                email: '',
                password: ''
            };
        }

        // this structure is used to store the form data, as well as the validation errors returned from the server...
        function getDefaultSignupData() {
            return {
                email: '',
                first_name: '',
                last_name: '',
                password: '',
                password_confirmation: ''
            };
        }

        $scope.loginData = getDefaultLoginData();
        $scope.loginError = '';

        $scope.signupData = getDefaultSignupData();
        $scope.signupErrors = getDefaultSignupData();

        $scope.doLogin = function () {
            $scope.loginErrors = getDefaultLoginData(); // reset errors
            $http.post('/sign_in.json', {
                user: $scope.loginData
            }).then(function (response) {
                // data is {id:XX, ...}
                outerScope.setUserId(response.data.id);
                outerScope.loadUserProfile(function () {
                    $scope.userProfile = outerScope.userProfile;
                });
            }, function (response) {
                // data is {"error": "Invalid email or password"}
                $scope.loginError = response.data.error;
            });
        };

        $scope.doSignup = function () {
            $scope.signupErrors = getDefaultSignupData(); // reset errors
            $http.post('/users.json', {
                user: $scope.signupData
            }).then(function (response) {
                // data is new user ID
                outerScope.setUserId(response.data);
                outerScope.loadUserProfile(function () {
                    $scope.userProfile = outerScope.userProfile;
                });
            }, function (response) {
                // data is e.g. {"first_name":["can't be blank"], ...}
                _.each(_.keys(response.data), function (key) {
                    $scope.signupErrors[key] = response.data[key].join('; ');
                });
            });
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    sandboxSaveModalCtrl.$inject = ['$scope', '$modalInstance', 'outerScope', 'map', 'userProfile'];

    // ------------- edit status message for header bar ------------------

    $scope.editStatus = '';

    $scope.LAST_UPDATED = '';
    $scope.READ_ONLY = 'View only';
    $scope.SAVING = 'Saving...';
    $scope.SAVE_OK = 'All changes saved';
    $scope.SAVE_FAILED = 'Changes could not be saved';

    $scope.updateEditStatus = function (s) {
        //console.log('updateEditStatus: ' + s);
        $scope.editStatus = s;
        if (s == $scope.SAVE_FAILED) {
            alert('Changes could not be saved - please check your network connection.');
        } else if (s == $scope.LAST_UPDATED) {
            var time = moment($scope.updatedAt).fromNow();
            var by = '';
            if ($scope.updatedBy == $scope.userId) {
                by = 'by me';
            } else if ($scope.updatedByName) {
                by = 'by ' + $scope.updatedByName;
            }
            // TODO: show 'by me' only for editable shared maps?

            $scope.editStatus = 'Last updated ' + time + ' ' + by;
        }

        // Last edit was XX ago by YY
    };

    // -------------------------------------------------------------

    function init() {
        $scope.safeApply(function () {
            $scope.map.init();

            if (!$scope.sandbox) {
                // overview diagram
                var overview = go.GraphObject.make(go.Overview, "overview-diagram", {
                    observed: $scope.map.getDiagram(),
                    contentAlignment: go.Spot.Center
                });
                var outline = overview.box.elements.first();
                outline.stroke = "#333";
            }

            //if ($scope.mapUrl) {
            $scope.map.load();
            //} else {
            //    $scope.map.loadForSandbox();
            //}

            addBehaviors();
            handleNavigation();
            handleBackspace();
        });
    }

    // misc. UI behaviors for tooltips, popups etc.
    // TODO: figure out which of these need to be reapplied after dynamic data changes (e.g. LessonBook popovers)
    function addBehaviors() {

        // NOTE: we have to use regular bootstrap tooltips for toolbar buttons (instead of ng-bootstrap ones)
        // so we can turn them off for mobile. We also put the tooltips on wrappers rather than on the actual
        // buttons, so we can avoid the issue of stuck tooltips if a button gets disabled while the tooltip is showing.

        if (!$scope.isTouchDevice()) {
            // $('.tooltip-wrapper').tooltip({
            //     placement: 'top',
            //     container: 'body'
            // });

            // $('.dropdown-menu .btn').tooltip({
            //     placement: 'left',
            //     container: 'body'
            // }); // for layout options

            $('header, #map-title').hover(function () {
                $('body.presenter-playing').addClass('hide-header');
            }, function () {
                $('body.presenter-playing').removeClass('hide-header');
            });
        }
    }

    function handleNavigation() {
        // cross-browser tweaks:
        try {
            // http://www.opera.com/support/kb/view/827/
            opera.setOverrideHistoryNavigationMode('compatible');
            history.navigationMode = 'compatible';
        } catch (e) {}
        // no biggie.

        // install before-unload handler:

        function exitMessage() {
            return "Navigating away from your Map will cause any unsaved changes to be lost " + "(any changes you make are automatically saved, but it takes a couple of seconds).";
        }

        //        $(window).bind('beforeunload', exitMessage);

        // prevent exit prompt when the user deliberately navigates away:

        $('#header-right a').click(function () {
            $(window).unbind('beforeunload', exitMessage);
        });
    }

    function handleBackspace() {
        var BACKSPACE = 8;

        $(document).on('keydown', function (event) {
            if (event.keyCode === BACKSPACE) {
                if (!$('body :focus').is(':input')) {
                    // prevent accidental backspace when no input has focus:
                    event.preventDefault();
                    event.stopPropagation();
                }
            }
        });
    }

    init();

    return $scope;
};

window.MapEditorCtrl.$inject = ['$rootScope', '$scope', '$http', '$resource', '$timeout', '$modal', '$log'];

},{}],22:[function(require,module,exports){
'use strict';

window.SandbankEditorOptions = {};

SandbankEditorOptions = function ($scope, $http, $resource, $modal, $log) {

    this.openModal = function (_options, _onSaveDefaults, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_editor_options_modal.html', // see views/maps/_template_editor_options_modal
            backdrop: 'static',
            controller: optionsModalCtrl,
            windowClass: 'options-modal',
            resolve: {
                options: function options() {
                    return _options;
                },
                onSaveDefaults: function onSaveDefaults() {
                    return _onSaveDefaults;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for options modal ---------------------

    var optionsModalCtrl = function optionsModalCtrl($scope, $modalInstance, options, onSaveDefaults, onUpdate) {

        $scope.options = options;

        $scope.setDefaults = {
            value: false
        };

        $scope.ok = function () {
            onUpdate($scope.options);
            if ($scope.setDefaults.value) {
                onSaveDefaults($scope.options);
            }
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    optionsModalCtrl.$inject = ['$scope', '$modalInstance', 'options', 'onSaveDefaults', 'onUpdate'];
};

},{}],23:[function(require,module,exports){
"use strict";
/*
*  Copyright (C) 1998-2015 by Northwoods Software Corporation. All Rights Reserved.
*/

// A custom Tool for moving a label on a Node

/**
* @constructor
* @extends Tool
* @class
* This tool only works when the Node has a label (any GraphObject) marked with
* { _isNodeLabel: true } that is positioned in a Spot Panel.
* It works by modifying that label's GraphObject.alignment property to have an
* offset from the center of the panel.
*/
function NodeLabelDraggingTool() {
  go.Tool.call(this);
  this.name = "NodeLabelDragging";

  /** @type {GraphObject} */
  this.label = null;
  /** @type {Point} */
  this._originalAlignment = null;
  /** @type {Point} */
  this._originalCenter = null;
}
go.Diagram.inherit(NodeLabelDraggingTool, go.Tool);

/**
* This tool can only start if the mouse has moved enough so that it is not a click,
* and if the mouse down point is on a GraphObject "label" in a Spot Panel,
* as determined by findLabel().
* @this {NodeLabelDraggingTool}
* @return {boolean}
*/
NodeLabelDraggingTool.prototype.canStart = function () {
  if (!go.Tool.prototype.canStart.call(this)) return false;
  var diagram = this.diagram;
  if (diagram === null) return false;
  // require left button & that it has moved far enough away from the mouse down point, so it isn't a click
  var e = diagram.lastInput;
  if (!e.left) return false;
  if (!this.isBeyondDragSize()) return false;

  return this.findLabel() !== null;
};

/**
* From the GraphObject at the mouse point, search up the visual tree until we get to
* an object that has the "_isNodeLabel" property set to true, that is in a Spot Panel,
* and that is not the first element of that Panel (i.e. not the main element of the panel).
* @this {NodeLabelDraggingTool}
* @return {GraphObject} This returns null if no such label is at the mouse down point.
*/
NodeLabelDraggingTool.prototype.findLabel = function () {
  var diagram = this.diagram;
  var e = diagram.firstInput;
  var elt = diagram.findObjectAt(e.documentPoint, null, null);

  if (elt === null || !(elt.part instanceof go.Node)) return null;
  while (elt.panel !== null && elt.panel.type === go.Panel.Spot && elt.panel.elt(0) !== elt) {
    if (elt._isNodeLabel) return elt;
    elt = elt.panel;
  }
  return null;
};

/**
* Start a transaction, call findLabel and remember it as the "label" property,
* and remember the original value for the label's alignment property.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doActivate = function () {
  this.startTransaction("Shifted Label");
  this.label = this.findLabel();
  if (this.label !== null) {
    this._originalAlignment = this.label.alignment.copy();
    var main = this.label.panel.findMainElement();
    this._originalCenter = main.getDocumentPoint(go.Spot.Center);
  }
  go.Tool.prototype.doActivate.call(this);
};

/**
* Stop any ongoing transaction.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doDeactivate = function () {
  go.Tool.prototype.doDeactivate.call(this);
  this.stopTransaction();
};

/**
* Clear any reference to a label element.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doStop = function () {
  this.label = null;
  go.Tool.prototype.doStop.call(this);
};

/**
* Restore the label's original value for GraphObject.alignment.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doCancel = function () {
  if (this.label !== null) {
    this.label.alignment = this._originalAlignment;
  }
  go.Tool.prototype.doCancel.call(this);
};

/**
* During the drag, call updateAlignment in order to set the GraphObject.alignment of the label.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doMouseMove = function () {
  if (!this.isActive) return;
  this.updateAlignment();
};

/**
* At the end of the drag, update the alignment of the label and finish the tool,
* completing a transaction.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doMouseUp = function () {
  if (!this.isActive) return;
  this.updateAlignment();
  this.transactionResult = "Shifted Label";
  this.stopTool();
};

/**
* Save the label's GraphObject.alignment as an absolute offset from the center of the Spot Panel
* that the label is in.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.updateAlignment = function () {
  if (this.label === null) return;
  var last = this.diagram.lastInput.documentPoint;
  var cntr = this._originalCenter;
  this.label.alignment = new go.Spot(0.5, 0.5, last.x - cntr.x, last.y - cntr.y);
};

module.exports = NodeLabelDraggingTool;

},{}],24:[function(require,module,exports){
// functions for the generator (aka ThinkQuery)

'use strict';

var GeneratorCtrl = function GeneratorCtrl($scope) {

    var map = $scope.map;
    var diagram = $scope.map.getDiagram();

    $scope.concept1 = '';
    $scope.concept2 = '';

    $scope.echoConcept1 = function () {
        return $scope.concept1 || '...';
    };

    $scope.echoConcept2 = function () {
        return $scope.concept2 || '...';
    };

    $scope.swapConcepts = function () {
        var tmp = $scope.concept1;
        $scope.concept1 = $scope.concept2;
        $scope.concept2 = tmp;
        $scope.safeApply();
    };

    $scope.mapIt = function (question) {
        startSpinner();
        diagram = map.getDiagram();
        map.getAutosave().saveOnModelChanged = false;

        if ($scope.sandbox) {
            diagram.clear();
        }

        // figure out location for inserted stuff
        var db = map.computeMapBounds();
        var x = db.x + db.width + 200;
        var y = db.y;
        if (isNaN(x) || isNaN(y)) {
            x = y = 0;
        }
        //console.log('x, y: ' + x + ', ' + y);

        // insert the stuff and deselect it
        question(x, y);
        diagram.clearSelection();

        diagram.updateAllTargetBindings();
        diagram.layoutDiagram(true);

        map.ui().resetZoom();

        map.getAutosave().saveOnModelChanged = true;
        map.getAutosave().save('edit_generator');
        stopSpinner();
    };

    $scope.selectedQuestion = null;

    $scope.selectQuestion = function (question) {
        $scope.selectedQuestion = question;
        if ($scope.sandbox) {
            $scope.mapIt(question);
        }
    };

    $scope.surpriseMe = function () {
        var keys = _.keys($scope.queries);
        var i = _.random(0, keys.length - 1);
        var question = $scope.queries[keys[i]];
        $scope.selectedQuestion = question;
        $scope.mapIt(question);

        $('#questions').animate({ scrollTop: i * 30 }, 1000);
    };

    // ---------- functions for creating each of the structures - see views/maps/generator_tab -----------

    $scope.queries = {

        WHAT_IS: function WHAT_IS(x, y) {
            // 1
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
        },

        WHAT_IS_NOT: function WHAT_IS_NOT(x, y) {
            // 2
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is not?');
            map.createChild(thing1, 'is not?');
            map.createChild(thing1, 'is not?');
        },

        DISTINGUISH_BETWEEN: function DISTINGUISH_BETWEEN(x, y) {
            // 3
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');

            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            diagram.model.setDataProperty(thing2.data, 'dflag', true);
            map.createChild(thing2, 'is?');
            map.createChild(thing2, 'is?');
            map.createChild(thing2, 'is?');
        },

        COMPARE_CONTRAST: function COMPARE_CONTRAST(x, y) {
            // 4
            var thing1 = map.createThing(x - 150, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 150, y, $scope.echoConcept2());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            diagram.model.setDataProperty(thing2.data, 'dflag', true);
            var rthing1 = map.createRLinkWithRThing(thing1, thing2, 'contrast');
            var rthing2 = map.createRLinkWithRThing(thing1, thing2, 'compare');
            diagram.model.setDataProperty(rthing1.labeledLink.data, 'type', 'toFrom');
            diagram.model.setDataProperty(rthing2.labeledLink.data, 'type', 'toFrom');
        },

        PARTS_OF: function PARTS_OF(x, y) {
            // 5
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            map.createChild(thing1, 'part?');
            map.createChild(thing1, 'part?');
            map.createChild(thing1, 'part?');
        },

        PART_OF: function PART_OF(x, y) {
            // 6
            var thing1 = map.createThing(x, y, 'part of?');
            map.createChild(thing1, $scope.echoConcept1());
        },

        PARTS_HAVE_PARTS: function PARTS_HAVE_PARTS(x, y) {
            // 7
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part?');
            map.createChild(child1, 'part?');
            map.createChild(child1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            map.createChild(child2, 'part?');
            map.createChild(child2, 'part?');
        },

        R_PARTS: function R_PARTS(x, y) {
            // 8
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            var rthing = map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createChild(rthing, 'part?');
            map.createChild(rthing, 'part?');
        },

        P_PARTS: function P_PARTS(x, y) {
            // 9
            var thing1 = map.createThing(x + 300, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var child2 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var child3 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var thing2 = map.createThing(x, y, $scope.echoConcept2());
            map.createPLink(thing2, thing1);
            map.createPLink(thing2, child1);
            map.createPLink(thing2, child2);
            map.createPLink(thing2, child3);
        },

        RS_TO_AND_BY: function RS_TO_AND_BY(x, y) {
            // 10
            var related1 = map.createThing(x, y, 'related idea?');
            var related2 = map.createThing(x + 300, y + 50, 'related idea?');
            var related3 = map.createThing(x + 50, y + 300, 'related idea?');
            var thing = map.createThing(x + 130, y + 130, $scope.echoConcept1());
            map.createRLink(related1, thing);
            map.createRLink(related2, thing);
            map.createRLink(related3, thing);

            var thing1 = map.createThing(x + 500, y + 150, 'idea?');
            var thing2 = map.createThing(x + 750, y + 150, 'idea?');
            map.createRLinkWithRThing(thing1, thing2, $scope.echoConcept1());
        },

        WHAT_IS_R: function WHAT_IS_R(x, y) {
            // 11
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            map.createRLinkWithRThing(thing1, thing2, 'idea?');
        },

        PART_RS_ARE: function PART_RS_ARE(x, y) {
            // 12
            var thing1 = map.createThing(x + 30, y, $scope.echoConcept1(), 'freehand');
            var child1 = map.createChild(thing1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            var child3 = map.createChild(thing1, 'part?');
            diagram.model.setDataProperty(child1.data, 'loc', '-20 110');
            diagram.model.setDataProperty(child2.data, 'loc', '80 110');
            diagram.model.setDataProperty(child3.data, 'loc', '30 190');
            map.createRLinkWithRThing(child1, child2, 'relationship?');
            map.createRLinkWithRThing(child2, child3, 'relationship?');
            map.createRLinkWithRThing(child3, child1, 'relationship?');
        },

        PART_RS_EXIST: function PART_RS_EXIST(x, y) {
            // 13
            var thing1 = map.createThing(x, y, $scope.echoConcept1(), 'right');
            var child11 = map.createChild(thing1, 'part?');
            var child12 = map.createChild(thing1, 'part?');
            var child13 = map.createChild(thing1, 'part?');
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            var child21 = map.createChild(thing2, 'part?');
            var child22 = map.createChild(thing2, 'part?');
            var child23 = map.createChild(thing2, 'part?');
            map.createRLink(thing1, thing2);
            map.createRLinkWithRThing(child11, child21, 'relationship?');
            map.createRLinkWithRThing(child12, child22, 'relationship?');
            map.createRLinkWithRThing(child13, child23, 'relationship?');
        },

        RS_WITH_OTHERS: function RS_WITH_OTHERS(x, y) {
            // 14
            var thing1 = map.createThing(x - 200, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 200, y, $scope.echoConcept2());
            var thing3 = map.createThing(x - 200, y + 200, 'another thing');
            var thing4 = map.createThing(x + 200, y + 200, 'another thing');
            map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createRLinkWithRThing(thing1, thing3, 'relationship?');
            map.createRLinkWithRThing(thing1, thing4, 'relationship?');
            map.createRLinkWithRThing(thing2, thing4, 'relationship?');
            map.createRLinkWithRThing(thing3, thing4, 'relationship?');
        },

        PARTS_OF_P: function PARTS_OF_P(x, y) {
            // 15
            var thing1 = map.createThing(x - 100, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            var child3 = map.createChild(thing1, 'part?');
            var thing2 = map.createThing(x + 100, y, $scope.echoConcept2());
            map.createPLink(thing1, thing2);
        },

        POINT_FOR: function POINT_FOR(x, y) {
            // 16
            var thing = map.createThing(x, y, 'new perspective');
            var thing1 = map.createThing(x - 150, y + 150, $scope.echoConcept1());
            var thing2 = map.createThing(x + 150, y + 150, $scope.echoConcept2());
            var rthing = map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createPLink(thing, rthing);
        },

        HAS_MULTIPLE_PS: function HAS_MULTIPLE_PS(x, y) {
            // 17
            var point1 = map.createThing(x, y + 50, 'viewpoint?');
            var point2 = map.createThing(x + 250, y, 'viewpoint?');
            var point3 = map.createThing(x + 500, y + 50, 'viewpoint?');
            var view = map.createThing(x + 250, y + 250, $scope.echoConcept1());
            map.createPLink(point1, view);
            map.createPLink(point2, view);
            map.createPLink(point3, view);
        },

        PARTS_FROM_MULTIPLE_PS: function PARTS_FROM_MULTIPLE_PS(x, y) {
            // 18
            var point1 = map.createThing(x - 100, y, 'viewpoint?');
            var point2 = map.createThing(x - 100, y + 125, 'viewpoint?');
            var point3 = map.createThing(x - 100, y + 250, 'viewpoint?');
            var thing = map.createThing(x + 150, y + 25, $scope.echoConcept1());
            var child1 = map.createChild(thing, 'part seen from viewpoint?');
            var child2 = map.createChild(thing, 'part seen from viewpoint?');
            var child3 = map.createChild(thing, 'part seen from viewpoint?');
            map.createPLink(point1, child1);
            map.createPLink(point1, child2);
            map.createPLink(point2, child2);
            map.createPLink(point3, child3);
        },

        WHAT_ABOUT: function WHAT_ABOUT(x, y) {
            // 19
            $scope.queries.WHAT_IS(x, y);
            $scope.queries.PARTS_OF(x + 300, y);
            $scope.queries.PARTS_FROM_MULTIPLE_PS(x + 700, y);
            $scope.queries.RS_TO_AND_BY(x, y + 400);
        }
    }; // queries
};

GeneratorCtrl.$inject = ['$scope'];

SandbankEditor.Generator = function ($scope, map) {

    this.init = function () {
        // NB: generator is opened on load of empty map; see map.js:load()
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (oldValue == map.ui().TAB_ID_GENERATOR) {
            // closing tab
            map.setEditingBlocked(false);
        } else if (newValue == map.ui().TAB_ID_GENERATOR) {
            // opening tab
            map.setEditingBlocked(true);
        }
    };

    // these get filtered out in LessonBook
    this.getPlaceholderIdeaNames = function () {
        return ['is?', 'is not?', 'part?', 'viewpoint?', 'related idea?', 'idea?', 'part seen from viewpoint?', 'contrast?', 'comparison?', 'relationship?'];
    };
};

},{}],25:[function(require,module,exports){
// layouts used in the editor, for the diagram or individual Groups, plus layout-related functions

'use strict';

SandbankEditor.Layouts = function ($scope, map) {

    var self = this;

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        var diagram = map.getDiagram();
        if (eventName == 'InitialLayoutCompleted') {
            diagram.updateAllTargetBindings();
            diagram.layoutDiagram(true);
        } else if (eventName == 'SelectionMoved') {
            updateSelectedPartLocationData(e);
            map.getDiagram().layoutDiagram(true);
        } else if (eventName == 'SelectionDeleted') {
            diagram.updateAllTargetBindings();
        } else if (eventName == 'PartCreated') {
            //console.log('Layouts, PartCreated');
            // setNewPartLocationData(e);
        } else if (eventName == 'PartResized') {
                setResizedPartDimensionData(e);
            } else if (eventName == 'LinkDrawn') {
                adjustLinkLayout(e.subject);
            } else if (eventName == 'LinkRelinked') {
                adjustLinkLayout(e.subject);
            }
    };

    // ------------ handle location/size attributes for nodes ---------------

    // only update w/h for slides, as all other node types have fixed dimensions according to the templates
    function setResizedPartDimensionData(e) {
        var diagram = map.getDiagram();
        var node = e.subject;
        if (node && node.category == 'slide') {
            //console.log('PartResized: ' + node.part.actualBounds);
            diagram.model.setDataProperty(node.data, 'width', node.part.actualBounds.width);
            diagram.model.setDataProperty(node.data, 'height', node.part.actualBounds.height);
        }
    }

    // set the 'loc' attribute for a new top-level node (created by double-clicking), to support freehand layout
    this.setNewPartLocationData = function (e) {
        var node = e.subject;
        if (node && node.part) {
            if (node instanceof go.Group) {
                map.getDiagram().model.setDataProperty(node.data, 'loc', node.part.location.x + ' ' + node.part.location.y);
            }
        }
    };

    // updates the 'loc' attribute for each selected part, to support freehand layout (does not apply to slides)
    function updateSelectedPartLocationData(e) {
        var diagram = map.getDiagram();
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Group) {
                // thing
                var part = it.value;
                var parentX = 0;
                var parentY = 0;
                if (part.containingGroup) {
                    parentX = part.containingGroup.location.x;
                    parentY = part.containingGroup.location.y;
                }
                //console.log('moving group, subject: ' + e.subject + ', part: ' + part + ', height: ' + part.part.desiredSize.height + ', location: ' + part.part.location);
                if (!isNaN(part.location.x)) {
                    diagram.model.setDataProperty(part.data, 'loc', part.location.x - parentX + ' ' + (part.location.y - parentY));
                }
            }
        }
    }

    // ----------- changing layouts of things and their descendants ----------------

    this.fromAndToNodesAreVisible = function (link) {
        return link.fromNode && link.toNode && !self.hasCollapsedAncestor(link.fromNode) && !self.hasCollapsedAncestor(link.toNode);
    };

    this.labelNodeIsVisible = function (link) {
        return link.labelNodes.count && link.labelNodes.first().visible;
    };

    this.hasCollapsedAncestor = function (group) {
        while (true) {
            if (!group.containingGroup) {
                return false;
            } else if (!group.containingGroup.isSubGraphExpanded) {
                return true;
            } else {
                group = group.containingGroup;
            }
        }
    };

    // this.hasLinkLabelAncestor = function(group) {
    //     while (true) {
    //         if (!group.containingGroup) {
    //             return false;
    //         }
    //         else if (group.containingGroup.isLinkLabel) {
    //             return true;
    //         }
    //         else {
    //             group = group.containingGroup;
    //         }
    //     }
    // };

    this.getHighestAncestorWithLayout = function (group, layoutNames) {
        while (true) {
            if (!group.containingGroup) {
                return false;
            } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                return group.containingGroup;
            } else {
                group = group.containingGroup;
            }
        }
    };

    this.areSistersInInventoryLayout = function (group1, group2) {
        return group1.containingGroup == group2.containingGroup && group1.containingGroup && _.contains(['left', 'right'], group1.containingGroup.data.layout);
    };

    this.isNotWithinInventoryLayout = function (group) {
        return !self.isWithinInventoryLayout(group);
    };

    this.isRThingWithinInventoryLayout = function (group) {
        return group.isLinkLabel && self.isWithinInventoryLayout(group);
    };

    this.isWithinInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['left', 'right']);
    };

    this.isWithinLeftInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['left']);
    };

    this.isWithinRightInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['right']);
    };

    this.isWithinFreehandLayout = function (group) {
        return self.isWithinLayout(group, ['freehand']);
    };

    this.isWithinStackedLayout = function (group) {
        return self.isWithinLayout(group, ['stacked']);
    };

    this.isWithinLayout = function (group, layoutNames) {
        while (true) {
            if (!group.containingGroup) {
                //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': false');
                return false;
            } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': true');
                return true;
            } else {
                group = group.containingGroup;
            }
        }
    };

    this.showLeftTextBlock = function (group) {
        return self.isWithinRightInventoryLayout(group) && !self.isWithinStackedLayout(group) && !group.isLinkLabel;
    };

    this.showRightTextBlock = function (group) {
        return self.isWithinLeftInventoryLayout(group) && !self.isWithinStackedLayout(group) && !group.isLinkLabel;
    };

    this.setDescendantLayouts = function (group, layoutName) {
        if (layoutName == 'left' || layoutName == 'right' || layoutName == 'stacked') {
            var it = group.memberParts.iterator;
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group && !part.isLinkLabel) {
                    part.data.layout = layoutName;
                    self.setDescendantLayouts(part, layoutName);
                }
            }
        } else if (layoutName == 'freehand') {
            // stacked?
        }
    };

    this.disableLayoutForSelectedThings = function (layoutName) {
        var it = map.getDiagram().selection.iterator;
        if (!it.count) {
            return true;
        }
        while (it.next()) {
            if (!(it.value instanceof go.Group)) {
                return true;
            } else {
                var group = it.value;
                if (self.isWithinLayout(group, ['left', 'right', 'stacked'])) {
                    return true;
                }
            }
        }
        return false;
    };

    // -------------- scaling functions, etc. ----------------------

    // Computes the level of this group
    this.computeLevel = function (group) {
        //console.log('computeLevel, part: ' + part + ', containingGroup: ' + part.containingGroup);
        if (!(group instanceof go.Group) || group.containingGroup === null) {
            return 0;
        } else {
            return self.computeLevel(group.containingGroup) + 1;
        }
    };

    // gets the basic scaling for thing squares, by level
    function getThingScale(level) {
        return Math.pow(0.45, level); // 1, .45, .2025, .091125, ...
    }

    // this is only used for groups
    this.getScale = function (group, visitedGroupKeys) {
        if (group) {
            // keep track of groups we've visited to avoid infinite recursion
            // TODO: track down exactly how infinite loops are occurring,
            // or IF they still are since map.checkModel was introduced...
            if (visitedGroupKeys && Array.isArray(visitedGroupKeys)) {
                //console.log('visitedGroupKeys: ' + visitedGroupKeys);
                if (_.contains(visitedGroupKeys, group.data.key)) {
                    //console.log('hit already visited key: ' + group.data.key);
                    return 1;
                } else {
                    visitedGroupKeys.push(group.data.key);
                }
            } else {
                visitedGroupKeys = [group.data.key];
            }

            if (group.labeledLink) {
                // R-thing
                var fromScale = self.getScale(group.labeledLink.fromNode, visitedGroupKeys);
                var toScale = self.getScale(group.labeledLink.toNode, visitedGroupKeys);
                //console.log('getScale, fromScale: ' + fromScale + ', toScale: ' + toScale + ', visitedGroupKeys: ' + visitedGroupKeys.join(','));
                return Math.min(fromScale, toScale) * 0.5;
            } else if (group.containingGroup) {
                return self.getScale(group.containingGroup, visitedGroupKeys) * 0.45;
            } else {
                return getThingScale(self.computeLevel(group));
            }
        }
        return 1; // can occur when dragging R to empty space
    };

    // gets the margin to be used in stack layout between this group's children
    function getStackMargin(group) {
        return 10 / 0.45 * self.getScale(group);
    }

    // gets the margin to be used in stack layout between this group's children
    function getInventoryMargin(group) {
        if (self.computeLevel(group) <= 2) {
            return 10 * self.getScale(group);
        } else {
            return 3 * self.getScale(group);
        }
    }

    this.getExternalTextScale = function (group) {
        return 1 - 0.1 * self.computeLevel(group);
    };

    this.getLinkStrokeWidth = function (link) {
        var fromScale = self.getScale(link.fromNode);
        var toScale = self.getScale(link.toNode);
        return (link.isSelected ? 4 : 2) * Math.min(fromScale, toScale); // 2, .9, ...
    };

    // scale arrowheads based on the smallest to/from node,
    // or just the To node for P links
    this.getArrowheadScale = function (link) {
        var fromScale = self.getScale(link.fromNode);
        var toScale = self.getScale(link.toNode);
        var minScale = Math.min(fromScale, toScale);
        //console.log("getArrowheadScale, fromScale: ", fromScale, ', toScale: ', toScale, ', minScale: ', minScale);
        if (link.data.category == 'P') {
            minScale = toScale;
        }
        if (minScale >= 1) {
            return 1 * minScale;
        } else {
            return 1.5 * minScale;
        }
    };

    // -------------- creating new things ----------------------

    // Returns a location for a new sister group (thing) to the given one,
    // which will not hide any existing things (overlap is allowed).
    // The returned coordinates are absolute for a top-level group,
    // or relative to the parent otherwise - suitable for use with FreehandDiagramLayout
    // or FreehandLayout, resp.
    this.getNewSisterLocation = function (group, withR) {
        var diagram = map.getDiagram();
        // if we are within another group, things are in absolute coordinates
        // and sisters are placed above the thing; otherwise relative and below...
        var inGroup = group.containingGroup !== null;
        // ... except if withR is true, we go to the right instead of above or below.

        // start below if in group, else above; or to the right if withR
        var x, y, w, h;
        if (withR) {
            x = group.location.x + group.actualBounds.width * 2.2;
            y = group.location.y;
        } else {
            x = group.location.x;
            y = group.location.y + group.actualBounds.height * 1.1 * (inGroup ? 1 : -1);
        }
        w = group.actualBounds.width;
        h = group.actualBounds.height;

        // check for overlapping parts; if found, increment x,y and continue

        while (true) {
            var rect = new go.Rect(x, y, w, h);
            rect.grow(h / 10, w / 10, h / 10, w / 10);
            var parts = diagram.findObjectsIn(rect, null, self.isGroup);
            if (parts.count) {
                //console.log('getNewSisterLocation: overlapping part found in ' + rect);
                if (withR) {
                    x += w / 10;
                    y += h / 10;
                } else {
                    x += w / 10;
                    y += h / 10 * (inGroup ? 1 : -1); // move down if in group, else up
                }
            } else {
                    //console.log('getNewSisterLocation: no overlapping part found in ' + rect);
                    break;
                }
        }
        if (inGroup) {
            // make coordinates relative
            x -= group.containingGroup.location.x;
            y -= group.containingGroup.location.y;
        }
        return new go.Point(x + Math.random(), y + Math.random());
    };

    // Returns a location for a new child group (thing) to the given one,
    // which will not hide any existing children (overlap is allowed).
    // The returned coordinates are relative to the parent group - suitable for use with FreehandLayout.
    this.getNewChildLocation = function (group) {
        var groupBounds = group.actualBounds;
        // NB: all x/y locations are relative to the group location
        var x = 0;
        var y = groupBounds.height * 1.1;
        var w, h;
        var members = group.memberParts;
        // keep testing new rectangles until we find one that doesn't overlap with any existing member of the group
        while (true) {
            members.reset();
            var overlaps = false;
            var member, newRect, memberRect;
            while (members.next()) {
                member = members.value;
                var memberBounds = member.actualBounds;
                w = memberBounds.width;
                h = memberBounds.height;
                // find the existing member's actual bounds (absolute coords)
                memberRect = new go.Rect(memberBounds.x - groupBounds.x, memberBounds.y - groupBounds.y, memberBounds.width, memberBounds.height);
                newRect = new go.Rect(x, y, w, h);
                newRect.grow(h / 5, w / 5, h / 5, w / 5);
                overlaps = newRect.containsRect(memberRect);
                //console.log('getNewChildLocation for ' + member + ': newRect = ' + newRect + ', memberRect = ' + memberRect + ', overlaps: ' + overlaps);
                if (overlaps) {
                    break;
                }
            }
            if (overlaps) {
                // increment x, y and try again
                x += w / 5;
                y += h / 5;
            } else {
                // found a good spot!
                break;
            }
        }
        return new go.Point(x, y);
    };

    // a simpler version of getNewChildLocation that places the child outside the bounds of the existing children
    this.getNewChildLocation2 = function (group) {
        var groupBounds = group.actualBounds;
        var childBounds = map.safeRect(map.getDiagram().computePartsBounds(group.memberParts));
        var x = 0;
        var y = 0;
        if (!group.memberParts.count) {
            y = groupBounds.height * 1.2;
        } else {
            y = groupBounds.height * 1.4 + childBounds.height;
        }
        //console.log('getNewChildLocation2, childBounds: ' + childBounds + ', groupBounds: ' + groupBounds + ', x: ' + x + ', y: ' + y);
        return new go.Point(x, y);
    };

    // move all the given new member groups so that their locations are relative to that of
    // the parent and its previously existing members, and scaled down appropriately
    this.layoutNewMembersRelativeTo = function (newMembers, parent, oldMemberBounds) {
        // how big was the parent system before the new groups were added?
        var systemBounds = parent.actualBounds.unionRect(oldMemberBounds);

        // figure out old/new origins - place new origin below existing system
        var oldBounds = map.getDiagram().computePartsBounds(newMembers);
        var oldOrigin = new go.Point(oldBounds.x, oldBounds.y);
        var newOrigin = new go.Point(0, systemBounds.height * 1.2);
        //console.log('layoutNewMembersRelativeTo, systemBounds: ' + systemBounds + ', oldBounds: ' + oldBounds +  ', oldOrigin: ' + oldOrigin + ', newOrigin: ' + newOrigin);

        // figure out new scaled locations
        // NB: we can assume newMembers are all one level down from parent (see map.addSelectedThingsAsChildrenOf),
        // so we just multiply by the standard scale factor
        var it = newMembers.iterator;
        while (it.next()) {
            var group = it.value;
            var groupBounds = group.actualBounds;
            var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) * 0.45;
            var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) * 0.45;
            var newLoc = go.Point.stringify(new go.Point(newX, newY));
            //console.log('layoutNewMembersRelativeTo, groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
            map.getDiagram().model.setDataProperty(group.data, 'loc', newLoc);
        }
    };

    // move all the given old member groups so that their locations are absolute and above
    // the parent, and scaled up appropriately
    this.layoutOldMembersOutsideOf = function (oldMembers, parent, oldMembersBounds, oldMembersLevel) {
        // figure out scale factor (members can be dragged up multiple levels, unlike dragging into S)
        var scaleFactor = Math.pow(0.45, oldMembersLevel - self.computeLevel(parent));
        //console.log('layoutOldMembersOutsideOf, scaleFactor: ' + scaleFactor);

        // figure out old/new origins - place new origin above parent, with vertical space for scaled-up oldMembers
        var parentBounds = parent.actualBounds;
        var oldOrigin = new go.Point(oldMembersBounds.x, oldMembersBounds.y);
        var newOrigin = new go.Point(parentBounds.x, parentBounds.y - oldMembersBounds.height * 1.2 / scaleFactor);

        // figure out new scaled locations
        var it = oldMembers.iterator;
        while (it.next()) {
            var group = it.value;
            var groupBounds = group.actualBounds;
            var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) / scaleFactor;
            var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) / scaleFactor;
            var newLoc = go.Point.stringify(new go.Point(newX, newY));
            //console.log('layoutOldMembersOutsideOf, parentBounds: ' + parentBounds + ', oldMembersBounds: ' + oldMembersBounds + ', newOrigin: ' + newOrigin + ', groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
            map.getDiagram().model.setDataProperty(group.data, 'loc', go.Point.stringify(newLoc));
        }
    };

    // ----------------- accessors -------------------

    // returns the appropriate layout class by abbreviated name
    this.getLayout = function (layoutName) {
        if (layoutName == 'freehand') return new FreehandLayout();else if (layoutName == 'right') return new RightInventoryLayout();else if (layoutName == 'stacked') return new StackedLayout();else return new LeftInventoryLayout();
    };

    this.getFreehandDiagramLayout = function () {
        return new FreehandDiagramLayout();
    };

    // --------------------------------------------------------------

    // returns true if the to and from nodes for the link have a common ancestor group with one of the given layout names.
    // TODO: verify logic - what if there are multiple such ancestors? - this should return the highest one...
    function getCommonAncestorWithLayout(group1, group2, layoutNames) {
        var ancestors1 = self.getAncestorGroups(group1);
        var ancestors2 = self.getAncestorGroups(group2);
        var commonAncestors = _.intersection(ancestors1, ancestors2);
        var layoutAncestors = _.filter(commonAncestors, function (group) {
            return _.indexOf(layoutNames, group.data.layout) != -1;
        });
        if (layoutAncestors.length) {
            return layoutAncestors[0];
        } else {
            return null;
        }
    }

    // returns the ancestors of this group, including itself
    this.getAncestorGroups = function (group) {
        var ancestors = [group];
        var g = group;
        while (g.containingGroup) {
            ancestors.push(g.containingGroup);
            g = g.containingGroup;
        }
        return ancestors;
    };

    // --------------------------------------------------------------

    function FreehandDiagramLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(FreehandDiagramLayout, go.Layout);

    FreehandDiagramLayout.prototype.toString = function () {
        return "FreehandDiagramLayout";
    };

    FreehandDiagramLayout.prototype.doLayout = function (coll) {
        //console.log('FreehandDiagramLayout.doLayout');
        var diagram = map.getDiagram();
        // diagram.startTransaction("Freehand Diagram Layout");

        //validateGroupLocations(diagram.findTopLevelGroups());
        var groups = diagram.findTopLevelGroups(); // get new iterator
        while (groups.next()) {
            var group = groups.value;
            if (!group.isLinkLabel) {
                var loc = go.Point.parse(group.data.loc);
                group.move(new go.Point(loc.x, loc.y));
                //console.log('FreehandDiagramLayout, group: ' + group + ' to location: ' + loc.x + ',' + loc.y);
            }
        }

        // all adjustment of links is done from here, not from the other layouts...
        getLinksByNodes(true);
        var links = diagram.links.iterator;
        while (links.next()) {
            var link = links.value;
            // if (isNaN(link.location.x)) {
            //     //console.log('link location isNaN');
            //     link.move(new go.Point(0,0));
            // }
            // //console.log('link location: ' + link.location);
            adjustLinkLayout(link);
        }

        // diagram.commitTransaction("Freehand Diagram Layout");
    };

    // if any group in the given Iterator does not have a location (data.loc), set one
    // that doesn't overlap with the other members
    function validateGroupLocations(groups) {}

    // --------------------------------------------------------------

    function FreehandLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(FreehandLayout, go.Layout);

    FreehandLayout.prototype.toString = function () {
        return "FreehandLayout";
    };

    FreehandLayout.prototype.doLayout = function (coll) {
        var diagram = map.getDiagram();
        diagram.startTransaction("Freehand Layout");

        var x = this.group.location.x;
        var y = this.group.location.y;

        var it = this.group.memberParts.iterator;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group && !part.isLinkLabel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('FreehandLayout, part: ' + part.data.text + ', loc: ' + loc + ', location: ' + part.location);
                part.move(new go.Point(x + loc.x, y + loc.y));
                part.layout.doLayout(part);
            }
        }

        diagram.commitTransaction("Freehand Layout");
    };

    // --------------------------------------------------------------

    function StackedLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(StackedLayout, go.Layout);

    StackedLayout.prototype.toString = function () {
        return "StackedLayout";
    };

    StackedLayout.prototype.doLayout = function (coll) {
        this.diagram.startTransaction("Stacked Layout");
        var margin = getStackMargin(this.group);
        var startX = this.group.location.x;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + margin / 2);
        layoutMembersForStacked(this.group, startX, startY);
        this.diagram.commitTransaction("Stacked Layout");
    };

    // returns the max y value after laying out the last part
    function layoutMembersForStacked(group, startX, startY) {
        var members = getOrderedMembers(group);
        var x = startX;
        var y = startY;
        var rowCount = 0;
        var maxStartY = startY;
        _.each(members, function (part) {
            if (part instanceof go.Group && !part.isLinkLabel) {
                var margin = getStackMargin(part);
                part.move(new go.Point(x, y));
                startY = y + part.actualBounds.height + margin / 2; // start Y position for part's children

                //console.log('layoutMembersForStacked: starting layout of children of ' + part + ' at ' + Math.round(x) + ',' + Math.round(startY));

                if (part.isSubGraphExpanded) {
                    // layout children of this part; check if we've already done a taller part+children in current row
                    maxStartY = Math.max(maxStartY, layoutMembersForStacked(part, x, startY));
                    //console.log('layoutMembersForStacked: laid out children of ' + part + ', maxStartY is now ' + Math.round(maxStartY));
                } else {
                        maxStartY = Math.max(maxStartY, startY);
                    }

                // decide whether to wrap
                rowCount++;
                if (rowCount < 2) {
                    // keep going on this line
                    x += part.actualBounds.width + margin;
                } else {
                    // wrap to next line
                    x = startX;
                    y = maxStartY + margin / 2;
                    rowCount = 0;
                }
            }
        });
        return maxStartY;
    }

    // --------------------------------------------------------------

    function RightInventoryLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(RightInventoryLayout, go.Layout);

    RightInventoryLayout.prototype.toString = function () {
        return "RightInventoryLayout";
    };

    RightInventoryLayout.prototype.doLayout = function (coll) {
        //this.diagram.startTransaction("Inventory Layout");
        var startX = this.group.location.x + this.group.actualBounds.width;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + getInventoryMargin(this.group));
        layoutMembersForInventory(this.group, startX, startY, 'R');
        //this.diagram.commitTransaction("Inventory Layout");
    };

    // --------------------------------------------------------------

    function LeftInventoryLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(LeftInventoryLayout, go.Layout);

    LeftInventoryLayout.prototype.toString = function () {
        return "LeftInventoryLayout";
    };

    LeftInventoryLayout.prototype.doLayout = function (coll) {
        //console.log('LeftInventoryLayout.doLayout, group: ' + this.group + ', location: ' + this.group.location);
        // this.diagram.startTransaction("Inventory Layout");
        var startX = this.group.location.x;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + getInventoryMargin(this.group));
        layoutMembersForInventory(this.group, startX, startY, 'L');
        // this.diagram.commitTransaction("Inventory Layout");
    };

    // shared stuff for Left/Right Inventory layouts...

    // returns the max y value after laying out the last part
    // side is 'L' or 'R'
    function layoutMembersForInventory(group, startX, startY, side) {
        var members = getOrderedMembers(group);
        _.each(members, function (part) {
            var x = startX; // for left, just use x
            if (side == 'R') x = startX - part.actualBounds.width; // for right, right-align parts to startX
            //console.log('layoutMembersForInventory, part: ' + part + ' to location: ' + x + ',' + startY);
            part.move(new go.Point(x, startY));
            startY += part.actualBounds.height + getInventoryMargin(part);
            if (part.isSubGraphExpanded) {
                //console.log('layoutMembersForInventory, y after moving: ' + part + ' = ' + startY);
                startY = layoutMembersForInventory(part, startX, startY, side);
            }
        });
        return startY + getInventoryMargin(group);
    }

    // returns an array of the group's (non-R-thing) members, sorted by the 'order' data property
    function getOrderedMembers(group) {
        var members = new go.List();
        var it = group.memberParts.iterator;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group && !part.isLinkLabel) {
                members.add(part);
            }
        }
        return _.sortBy(members.toArray(), function (member) {
            return member.data.order;
        });
    }

    // ------------------------ link routing and visibility ------------------------------

    // adjust the routing, visibility and other properties of a link according to various structural criteria
    function adjustLinkLayout(link) {
        if (!link || !link.fromNode || !link.toNode) {
            return;
        }

        // var loc = link.location;
        // if (isNaN(loc.x) || isNaN(loc.y)) {
        //     link.location = new go.Point(10, 10);
        //     //console.log('adjustLinkLayout, link.location: ' + link.location);
        // }
        // //console.log('adjustLinkLayout, link.location: ' + link.location);

        // see if link is within a stacked or inventory layout, or if it's a hidden P link
        var inventoryAncestor = getCommonAncestorWithLayout(link.fromNode, link.toNode, ['left', 'right']);
        var stackedAncestor = getCommonAncestorWithLayout(link.fromNode, link.toNode, ['stacked']);
        var hidePLink = link.data && link.data.category == 'P' && !map.getTemplates().showPLink(link);
        //var crowdedRThing = hasCrowdedRThing(link);

        // see if this is one of multiple links between the same two nodes
        var snpos = self.getSameNodesLinkPosition(link);
        var isMultiLink = snpos.count > 1;
        //console.log('snpos for link ' + link + ': ' + snpos.index + ' of ' + snpos.count);

        if (inventoryAncestor) {
            applyInventoryCurveRouting(link, snpos, inventoryAncestor.data.layout);
        } else if (isMultiLink) {
            applyMultilinkCurveRouting(link, snpos);
        } else {
            applyStraightRouting(link);
        }

        // show link only if both connected things are visible (no collapsed ancestors);
        // hide if both are in stacked layout or if it's a P-link that we shouldn't be showing now
        if (self.fromAndToNodesAreVisible(link) && !stackedAncestor && !hidePLink) {
            link.opacity = 1;
            showLabelNodes(link, true);
        } else {
            link.opacity = 0;
            showLabelNodes(link, false);
        }
    }

    // TODO: detect when the R-thing overlaps both from and to nodes, so we can change the link routing
    function hasCrowdedRThing(link) {
        return false;
    }

    function showLabelNodes(link, show) {
        //console.log('showLabelNodes, link: ' + link + ', show: ' + show);
        var it = link.labelNodes;
        if (it) {
            while (it.next()) {
                var group = it.value;
                group.visible = show;
                if (show) {
                    group.layout.doLayout(group);
                }
            }
        }
    }

    // if link is between two things in the same inventory layout (single or multiple),
    // make the line more or less circular on the appropriate side
    function applyInventoryCurveRouting(link, snpos, ancestorLayout) {
        if (ancestorLayout == 'left') {
            link.fromSpot = go.Spot.Left;
            link.toSpot = go.Spot.Left;
        } else if (ancestorLayout == 'right') {
            link.fromSpot = go.Spot.Right;
            link.toSpot = go.Spot.Right;
        }

        // aspect ratio for the link curves - make this smaller to make them taller, larger to make them fatter
        var curveRatio = 0.6;

        var y1 = link.fromNode.actualBounds.y;
        var y2 = link.toNode.actualBounds.y;

        var yDiff = Math.abs(y2 - y1);
        var c = (yDiff === 0 ? 50 : Math.floor(yDiff * curveRatio)) + 100 * (snpos.index / snpos.count);
        //console.log("yDiff = " + yDiff + ', c = ' + c + ' (' + link.fromNode.data.text + ' - ' + p1 + ' - to ' + link.toNode.data.text + ' - ' + p2 + ')');

        link.curve = go.Link.Bezier;
        link.fromEndSegmentLength = c;
        link.toEndSegmentLength = c;
    }

    // if non-inventory link is one of multiple ones between same nodes, make it curved
    function applyMultilinkCurveRouting(link, snpos) {
        link.fromSpot = go.Spot.Default;
        link.toSpot = go.Spot.Default;
        link.curve = go.Link.Bezier;
        // curviness values based on number of links:
        // 2: -25 25
        // 3: -50 0 50
        // 4: -100 -50 0 50 100
        var rangeSize = 10 * (snpos.count - 1);
        var rangeIncrement = 10;
        if (snpos.hasRThing) {
            rangeSize = 100 * (snpos.count - 1);
            rangeIncrement = 100;
        }

        // adjust curviness for smaller scales
        var linkScaleFactor = self.getLinkStrokeWidth(link) / 2; // 2 is max stroke width
        rangeSize *= linkScaleFactor;
        rangeIncrement *= linkScaleFactor;

        var rangeStart = 0 - rangeSize / 2;

        link.curviness = (rangeStart + rangeIncrement * snpos.index) * snpos.orientation;
        // //console.log('applyMultilinkCurveRouting, link: ' + link + ', curviness: ' + link.curviness);
    }

    // do normal straight lines for freehand layout, or links between descendants of things with different layouts
    function applyStraightRouting(link) {
        link.fromSpot = go.Spot.Default;
        link.toSpot = go.Spot.Default;
        link.routing = go.Link.Normal;
        link.curve = go.Link.Bezier;
        link.curviness = 25;
    }

    // --------------- calculate how many links there are between a link's nodes ---------------

    // Returns an object of the format { index: 1, count: 2, orientation: -1, hasRThing: false },
    // indicating how many other links there are between the same pair of nodes,
    // where the given link falls within this list, and what its orientation is.
    this.getSameNodesLinkPosition = function (link) {
        var linksByNodes = getLinksByNodes(true);
        // get links with the same key as this one (connecting same nodes)
        var sameLinks = _.where(linksByNodes, {
            key: getSameNodesLinkKey(link)
        });

        // default return value
        var snpos = {
            index: 0,
            count: 1,
            orientation: 1,
            hasRThing: false
        };
        // set index, count, orientation
        for (var i = 0; i < sameLinks.length; i++) {
            if (sameLinks[i].link == link) {
                snpos = {
                    index: i,
                    count: sameLinks.length,
                    orientation: getLinkOrientation(link)
                };
            }
        }
        // check for Rthing
        for (i = 0; i < sameLinks.length; i++) {
            if (sameLinks[i].hasRThing) {
                snpos.hasRThing = true;
            }
        }
        return snpos;
    };

    var _linksByNodes = null;

    // refreshes the cached list of all links with keys, to facilitate grouping them according to connected nodes
    function getLinksByNodes(refresh) {
        //console.log('getLinksByNodes');
        if (!self._linksByNodes || refresh) {
            self._linksByNodes = [];
            var diagram = map.getDiagram();
            var links = diagram.links.iterator;
            while (links.next()) {
                var link = links.value;
                var key = getSameNodesLinkKey(link);
                if (key) {
                    self._linksByNodes.push({
                        key: key,
                        link: link,
                        hasRThing: link.labelNodes.count > 0
                    });
                }
            }
        }
        return self._linksByNodes;
    }

    // Returns a key used to group links according to which pair of nodes they connect.
    // The returned key is non-empty for regular links and P links that should be shown currently,
    // so that these will all be routed by the same rules. A null key is returned for any other
    // links, indicating that no grouping is required.
    function getSameNodesLinkKey(link) {
        //        if (self.isRLink(link) || (self.isPLink(link) && map.getTemplates().showPLink(link))) {
        if (self.isRLink(link)) {
            var key = [link.fromNode.toString(), link.toNode.toString()].sort().join('|');
            //console.log('key: ' + key);
            return key;
        } else {
            return null;
        }
    }

    // We use this to distinguish an A-B link from a B-A link (based on fromNode and toNode, which
    // is independent of the arrowhead settings) when setting curviness, because setting curviness = 25
    // on an A-B link is the same as curviness = -25 on a B-A link.
    function getLinkOrientation(link) {
        if (link.fromNode && link.toNode && link.fromNode.toString() < link.toNode.toString()) {
            return 1;
        } else {
            return -1;
        }
    }

    // -------------- link tests ---------------

    this.isRLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category === undefined && link.fromNode && link.toNode;
    };

    this.isDLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category == 'D';
    };

    this.isPLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category == 'P';
    };

    this.isGroup = function (obj) {
        return obj instanceof go.Group;
    };
};

},{}],26:[function(require,module,exports){
'use strict';

var NodeLabelDraggingTool = require('./extensions/NodeLabelDraggingTool.js');

// functions for creating and manipulating the map (i.e. Diagram)

SandbankEditor.Map = function ($scope, $http, $resource, $timeout, $modal, $log) {

    var self = this;

    // ----------- constants ---------------
    this.LEFT = 'left';
    this.RIGHT = 'right';

    // ------------ instance vars ----------

    var _diagram = null;

    // components
    var _analytics = null;
    var _attachments = null;
    var _autosave = null;
    var _generator = null;
    //var _history = null;
    var _layouts = null;
    var _perspectives = null;
    var _presenter = null;
    var _standards = null;
    var _templates = null;
    var _tests = null;
    var _ui = null;

    // ------------ component accessors ----------------

    function getComponents() {
        return [_analytics, _attachments, _autosave, _generator,
        // _history,
        _layouts, _perspectives, _presenter, _standards, _templates, _tests, _ui];
    }

    this.getAnalytics = function () {
        return _analytics;
    };
    this.getAttachments = function () {
        return _attachments;
    };
    this.getAutosave = function () {
        return _autosave;
    };
    this.getGenerator = function () {
        return _generator;
    };
    // this.getHistory = function () { return _history; };
    this.getLayouts = function () {
        return _layouts;
    };
    this.getPerspectives = function () {
        return _perspectives;
    };
    this.getPresenter = function () {
        return _presenter;
    };
    this.getStandards = function () {
        return _standards;
    };
    this.getTemplates = function () {
        return _templates;
    };
    this.getTests = function () {
        return _tests;
    };
    this.ui = function () {
        return _ui;
    };

    // -------------- map init ------------------

    this.init = function () {

        // initialize components
        _analytics = new SandbankEditor.Analytics($scope, $http, self);
        _attachments = new SandbankEditor.Attachments($scope, $http, $resource, self);
        _autosave = new SandbankEditor.Autosave($scope, $http, self);
        _generator = new SandbankEditor.Generator($scope, self);
        // _history = new SandbankEditor.History($scope, $http, self);
        _layouts = new SandbankEditor.Layouts($scope, self);
        _perspectives = new SandbankEditor.Perspectives($scope, self);
        _presenter = new SandbankEditor.Presenter($scope, self);
        _standards = new SandbankEditor.Standards($scope, self);
        _templates = new SandbankEditor.Templates($scope, self);
        _tests = new SandbankEditor.Tests($scope, self);
        _ui = new SandbankEditor.UI($scope, $timeout, $http, $resource, $modal, $log, self);

        // call init for each component, if defined
        _.each(getComponents(), function (component) {
            if (component && component.init) component.init();
        });

        // create diagram
        _diagram = new go.Diagram("diagram");
        _diagram.initialContentAlignment = go.Spot.Center;
        _diagram.initialViewportSpot = go.Spot.Center;
        _diagram.initialDocumentSpot = go.Spot.Center;
        _diagram.hasHorizontalScrollbar = false;
        _diagram.hasVerticalScrollbar = false;
        _diagram.padding = 500;
        _diagram.layout = _layouts.getFreehandDiagramLayout();
        _diagram.toolManager.mouseMoveTools.insertAt(0, new NodeLabelDraggingTool());

        initTools();
        _templates.initTemplates(_diagram); // set up templates, customize temporary link behavior
        addDiagramListeners();

        _templates.addExportFooter();

        // watch for tab changes
        $scope.$watch('currentTab', function (newValue, oldValue) {
            self.currentTabChanged(newValue, oldValue);
        });
    };

    // this is called by a $scope.$watch in init()
    this.currentTabChanged = function (newValue, oldValue) {
        // //console.log('currentTabChanged, newValue: ' + newValue + ', oldValue: ' + oldValue);
        // notify any interested components
        _.each(getComponents(), function (component) {
            if (component && component.currentTabChanged) {
                component.currentTabChanged(newValue, oldValue);
            }
        });

        //$scope.safeApply();
    };

    this.getDiagram = function () {
        return _diagram;
    };

    // misc. tool configuration
    function initTools() {
        // disable clicking on TextBlocks to edit - we will invoke editing in other ways
        _diagram.allowTextEdit = false;

        // select text when activating editor;
        // use shift-enter to create new lines, enter to finish editing (NB: editor has multiline=true)
        var textTool = _diagram.toolManager.textEditingTool;
        textTool.doActivate = function () {
            go.TextEditingTool.prototype.doActivate.call(textTool);
            if (textTool.defaultTextEditor !== null) {
                textTool.defaultTextEditor.select();

                textTool.defaultTextEditor.addEventListener("keydown", function (e) {
                    if (e.which == 13 && !e.shiftKey) {
                        go.TextEditingTool.prototype.acceptText.call(textTool, go.TextEditingTool.LostFocus);
                    }
                });
            }
        };

        // handle delete key on Mac (default behavior only uses fn-Delete to delete from canvas)
        _diagram.commandHandler.doKeyDown = function () {
            var e = _diagram.lastInput;
            var cmd = _diagram.commandHandler;
            if (e.event.which === 8) {
                cmd.deleteSelection();
            } else {
                go.CommandHandler.prototype.doKeyDown.call(cmd); // call base method with no arguments
            }
        };

        // [disable keyboard shortcuts, as these do not do centering on zoom,
        // and can lead to confusion with browser zoom (which gets fired depends on focus)]
        // - turned back on to support pinch/zoom on iPad
        _diagram.allowZoom = true;

        _diagram.toolManager.mouseWheelBehavior = go.ToolManager.WheelZoom;

        // decide what kinds of Parts can be added to a Group or to top-level
        // _diagram.commandHandler.memberValidation = function (grp, node) {
        //     //if (grp instanceof go.Group && node instanceof go.Group) return false;  // cannot add Groups to Groups
        //     return true;
        // };

        // default link attributes
        _diagram.toolManager.linkingTool.archetypeLinkData = {
            type: 'noArrows'
        };

        // allow double-click in background to create a new node
        _diagram.toolManager.clickCreatingTool.archetypeNodeData = getNewThingData();

        // how long mouse must be held stationary before starting a drag-select (instead of a scroll) - default was 175ms
        _diagram.toolManager.dragSelectingTool.delay = 400;
    }

    // ----------- handling of DiagramEvents --------------------

    function addDiagramListeners() {

        // DiagramEvents to be handled here or by a component
        var diagramEvents = ["InitialLayoutCompleted", "ChangedSelection", "BackgroundSingleClicked", "SelectionCopied", "SelectionMoved", "SelectionDeleting", "SelectionDeleted", "PartCreated", "PartResized", "ClipboardChanged", "ClipboardPasted", "LinkDrawn", "LinkRelinked", "ViewportBoundsChanged"];
        _.each(diagramEvents, function (eventName) {
            _diagram.addDiagramListener(eventName, function (e) {
                broadcastDiagramEvent(eventName, e);
            });
        });

        _diagram.addDiagramListener("BackgroundContextClicked", function (e) {
            // TODO: turn off in production
            //console.log('diagram model:' + _diagram.model.toJson());
        });
    }

    // broadcasts the given DiagramEvent (see apidocs for go.DiagramEvent)
    // to any components that may be interested, including this one.
    function broadcastDiagramEvent(eventName, e) {
        self.handleDiagramEvent(eventName, e);
        _.each(getComponents(), function (component) {
            if (component && component.handleDiagramEvent) component.handleDiagramEvent(eventName, e);
        });
        $scope.safeApply();
    }

    this.handleDiagramEvent = function (eventName, e) {
        //console.log('handleDiagramEvent: ' + eventName);
        if (eventName == 'ChangedSelection') {
            changedSelection(e);
        } else if (eventName == 'SelectionCopied') {
            selectionCopied(e);
        } else if (eventName == 'PartCreated') {
            partCreated(e);
        } else if (eventName == 'BackgroundSingleClicked') {
            _ui.showHelpTip('canvasTip');
        } else if (eventName == 'LinkDrawn') {
            linkDrawn(e);
            setNewLinkDirection(e);
        } else if (eventName == 'LinkRelinked') {
            linkRelinked(e);
        } else if (eventName == 'ClipboardChanged') {
            clipboardChanged(e);
        } else if (eventName == 'ClipboardPasted') {
            clipboardPasted(e);
        }
    };

    // handle zoom to region if applicable
    function changedSelection(e) {
        //console.log('map.changedSelection');
        _diagram.updateAllTargetBindings();
        _ui.maybeZoomToRegion();
        if (self.relationshipsSelected()) {
            _ui.showHelpTip('relationshipTip');
        }
    }

    function partCreated(e) {
        //console.log('Map, PartCreated');
        var group = e.subject;
        if (!(group instanceof go.Group)) {
            return;
        }
        _diagram.model.setDataProperty(group.data, 'layout', _ui.getMapEditorOptions().defaultThingLayout || 'left');
        _layouts.setNewPartLocationData(e);
    }

    // fix link ports when a link is created -
    // the P and R ports both cover the whole node, and the P port is on top of the R port,
    // so both P and R links get the toPort set to P by default.
    function linkDrawn(e) {
        var link = e.subject;
        //console.log('linkDrawn, link: ' + link + ', fromPort: ' + link.fromPortId + ', toPort: ' + link.toPortId);
        if (link.fromPortId == 'P') {
            _diagram.model.startTransaction("change link category");
            _diagram.model.setDataProperty(link.data, 'toPort', 'P');
            _diagram.model.setDataProperty(link.data, 'category', 'P');
            _diagram.model.commitTransaction("change link category");
        }
        // prevent links from R to P
        else if (link.fromPortId == 'R') {
                _diagram.model.startTransaction("change link toPort");
                _diagram.model.setDataProperty(link.data, 'toPort', 'R');
                _diagram.model.commitTransaction("change link toPort");
            }
    }

    // fix link ports when a link is relinked -
    // dragging either end of an R-link to another node will set the corresponding port to P,
    // since P port is on top of R port, so we reset both ports to R if the category is not P.
    function linkRelinked(e) {
        var link = e.subject;
        if (link.data.category === undefined || link.data.category !== 'P') {
            _diagram.model.setDataProperty(link.data, 'fromPort', 'R');
            _diagram.model.setDataProperty(link.data, 'toPort', 'R');
        }
    }

    function setNewLinkDirection(e) {
        var link = e.subject;
        if (link.fromPortId == 'R') {
            _diagram.model.startTransaction("change link direction");
            _diagram.model.setDataProperty(link.data, 'type', _ui.getMapEditorOptions().defaultRelationshipDirection);
            _diagram.commitTransaction("change link direction");
        }
    }

    function clipboardChanged(e) {
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group) {
                //console.log('clipboardChanged: part ' + part + ', mainpanel scale: ' + part.findObject('mainpanel').scale);
            }
        }
    }

    // NB: this is called when parts are copied by control-drag, NOT when the copy button is clicked
    function selectionCopied(e) {
        //console.log('selectionCopied');
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group && part.isTopLevel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('selectionCopied: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                _diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                part.updateTargetBindings('loc');
            }
        }
    }

    function clipboardPasted(e) {
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group && part.isTopLevel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('clipboardPasted: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                _diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                part.updateTargetBindings('loc');
            }
        }
    }

    // computes the bounds of all groups in the diagram - this includes all ideas/things,
    // and excludes nodes, including slides, the slide blocker, and the export footer
    this.computeMapBounds = function () {
        var groups = new go.List(go.Group);
        var nodes = _diagram.nodes;
        while (nodes.next()) {
            if (nodes.value instanceof go.Group) {
                groups.add(nodes.value);
            }
        }
        return _diagram.computePartsBounds(groups).copy(); // return a mutable rect
    };

    // ------------ what is currently selected? ----------------

    // returns true if all selected items are things (i.e. Groups), including r-things
    this.thingsSelected = function () {
        if (_diagram == null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Group)) return false;
        }

        return true;
    };

    // returns true if exactly one thing (Group) is selected
    this.thingSelected = function () {
        return _diagram !== null && _diagram.selection.count == 1 && _diagram.selection.first() instanceof go.Group;
    };

    // if a single group is selected, returns it, otherwise returns null
    this.getUniqueThingSelected = function () {
        if (_diagram !== null && _diagram.selection.count == 1 && _diagram.selection.first() instanceof go.Group) {
            return _diagram.selection.first();
        } else {
            return null;
        }
    };

    this.thingsSelectedAreMembersOf = function (group) {
        if (_diagram === null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Group) || it.value.containingGroup != group) return false;
        }

        return true;
    };

    this.thingsSelectedAreDescendantsOf = function (group) {
        if (_diagram === null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            var ancestors = _layouts.getAncestorGroups(it.value);
            if (_.indexOf(ancestors, group) == -1) return false;
        }

        return true;
    };

    this.thingsSelectedIncludeSlide = function () {
        if (_diagram === null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (it.value.data && it.value.data.category == 'slide') {
                return true;
            }
        }

        return false;
    };

    // returns true if all selected items are relationships (i.e. Links)
    this.relationshipsSelected = function () {
        if (_diagram === null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Link) || !_layouts.isRLink(it.value)) return false;
        }

        return true;
    };

    // returns true if exactly one relationship (Link) is selected
    this.relationshipSelected = function () {
        return _diagram !== null && _diagram.selection.count == 1 && _diagram.selection.first() instanceof go.Link;
    };

    // ------------ load and initialize model -------------

    this.reload = function (data) {
        _diagram.model = go.Model.fromJson(data);
        _diagram.model.addChangedListener(_autosave.modelChanged);
    };

    this.load = function (data) {

        data = data || $scope.mapData.data;
        _diagram.model = go.Model.fromJson(data);
        _ui.setStateData($scope.mapData.state_data);
        _ui.setMapEditorOptions($scope.mapData.editor_options);

        self.checkModel();
        _diagram.updateAllTargetBindings();
        _diagram.undoManager.isEnabled = true;
        _diagram.model.addChangedListener(_autosave.modelChanged);
        _autosave.saveOnModelChanged = true;
        _diagram.isReadOnly = !$scope.canEdit;
        $scope.updateEditStatus($scope.canEdit ? $scope.LAST_UPDATED : $scope.READ_ONLY);
        //_ui.resetZoom();
        self.loadMapExtraData($scope.mapData);

        // if no nodes OR in thinkquery mode, launch generator
        if ($scope.thinkquery || !_diagram.model.nodeDataArray.length) {
            _ui.openTab(_ui.TAB_ID_GENERATOR);
        }
        // if we have slides, play presentation
        else if (!$scope.canEdit && _presenter.getSlideNodeDatas().length) {
                _presenter.playSlide(1);
            }
    };

    this.loadForSandbox = function () {
        _diagram.model = go.Model.fromJson($scope.mapData);
        _ui.setStateData(''); // important! (otherwise corner highlighting breaks)
        _diagram.updateAllTargetBindings();
        _diagram.undoManager.isEnabled = true;
        _ui.resetZoom();
        $scope.canEdit = true;

        // if no nodes OR in thinkquery mode, launch generator
        if ($scope.thinkquery) {
            _ui.openTab(_ui.TAB_ID_GENERATOR);
        }
        // if we have slides, play presentation
        else if (_presenter.getSlideNodeDatas().length) {
                _presenter.playSlide(1);
            }
    };

    // fix any structural problems in the model before displaying it
    this.checkModel = function () {
        // change "isLinkLabel" property to category:"LinkLabel" (change as of goJS 1.3)
        _.each(_diagram.model.nodeDataArray, function (nodeData, index, list) {
            if (nodeData.isLinkLabel) {
                delete nodeData.isLinkLabel;
                nodeData.category = "LinkLabel";
            }
        });

        // check for the link label (r-thing) for a link being the same as the from or to node
        // - this can cause infinite recursion in thinks like layout.getScale
        _.each(_diagram.model.linkDataArray, function (linkData, index, list) {
            var badLabelKeys = [];
            _.each(linkData.labelKeys, function (key, index2, list2) {
                if (key == linkData.from || key == linkData.to) {
                    //console.log('labelKey same as from or to of link: ' + key);
                    badLabelKeys.push(key);
                }
            });
            linkData.labelKeys = _.difference(linkData.labelKeys, badLabelKeys);
        });
    };

    // loads other data besides the diagram model from the json object returned by maps/show.json
    // - this includes points, badges, versions, and map analytics
    // NB: points and badges are set at page load time in layouts/user and users/badges, but
    // we also need to be able to update them here after an autosave

    // TODO: is this still all needed with the newer userProfile stuff?
    this.loadMapExtraData = function (mapData) {
        $scope.safeApply(function () {
            //console.log('map.loadMapExtraData, mapData: ' + mapData);
            $scope.mapUserTags = mapData.metadata.userTags; // TODO: is this used anywhere?

            //$scope.map.getHistory().versionList = mapData.versions;
            $scope.map.getAnalytics().mapAnalytics = mapData.analytics;
        });
    };

    // loads model data for an individual version and displays it
    // NB: this also disables autosave; load() must be called to re-enable it
    this.loadVersion = function (id) {
        $http.get('/map_versions/' + id).then(function (response) {
            if (response.status === 200) {
                try {
                    //console.log('loaded map version with ID: ' + id);
                    _diagram.model = go.Model.fromJson(response.data);
                    _diagram.updateAllTargetBindings();
                    _diagram.undoManager.isEnabled = false;
                    _autosave.saveOnModelChanged = false;
                    _diagram.layoutDiagram(true);
                    _diagram.isReadOnly = true;
                } catch (e) {
                    alert('Could not load MetaMap version');
                    //console.error(e.message);
                }
            }
        });
    };

    // set whether editing capability is temporarily suspended -
    // this is distinct from the global $scope.canEdit setting,
    // which if false prevents editing at all times
    this.setEditingBlocked = function (val) {
        if ($scope.canEdit) {
            _diagram.isReadOnly = val;
        }
    };

    // ------------- creating things in the model -------------------

    // default properties for all new Things (groups) - note that these can be overridden if needed
    function getNewThingData() {
        return {
            text: 'Idea',
            isGroup: true,
            layout: _ui.getMapEditorOptions().defaultThingLayout || 'left',
            sExpanded: true,
            pExpanded: true
        };
    }

    this.createSister = function (thing) {
        if (!$scope.canEdit) {
            return null;
        }

        var newLoc = _layouts.getNewSisterLocation(thing);
        var data = _.extend(getNewThingData(), {
            group: thing.data.group,
            text: 'Idea',
            loc: go.Point.stringify(newLoc)
        });
        _diagram.model.addNodeData(data);
        var newSister = _diagram.findNodeForData(data);

        // put new sister right after thing (not as the last sibling)
        if (thing.containingGroup) {
            self.moveSiblingNextTo(newSister, thing, self.RIGHT);
        }
        return newSister;
    };

    this.createRToSister = function (thing) {
        if (!$scope.canEdit) {
            return null;
        }

        var thingKey = _diagram.model.getKeyForNodeData(thing.data);
        //console.log('thingKey: ' + thingKey);
        var newLoc = _layouts.getNewSisterLocation(thing, true); // withR = true
        var data = _.extend(getNewThingData(), {
            group: thing.data.group,
            text: 'Idea',
            loc: go.Point.stringify(newLoc)
        });
        _diagram.model.addNodeData(data);
        var newSister = _diagram.findNodeForData(data);
        var groupKey = _diagram.model.getKeyForNodeData(data);

        // create link
        var linkData = {
            from: thingKey,
            to: groupKey,
            type: 'to',
            fromPort: 'R',
            toPort: 'R'
        };
        _diagram.model.addLinkData(linkData);

        // put new sister right after thing (not as the last sibling)
        if (thing.containingGroup) {
            self.moveSiblingNextTo(newSister, thing, self.RIGHT);
        }
        return newSister;
    };

    this.createChild = function (thing, name, x, y) {
        if (!$scope.canEdit) {
            return null;
        }

        var newLoc = _layouts.getNewChildLocation2(thing);
        if (x || y) {
            newLoc = new go.Point(x, y);
        }
        var data = _.extend(getNewThingData(), {
            group: thing.data.key,
            text: name || 'Part',
            loc: go.Point.stringify(newLoc)
        });
        _diagram.model.addNodeData(data);
        _layouts.setDescendantLayouts(thing, thing.data.layout);
        var child = _diagram.findNodeForData(data);
        child.updateTargetBindings();
        return child;
    };

    this.createRThing = function (link, name) {
        if (!$scope.canEdit) {
            return null;
        }

        // //console.log('createRThing, link: ' + link + ', name: ' + name);
        // don't allow multiple R-things
        if (link.isLabeledLink) {
            // //console.log('cannot create RThing, link is already labeled');
            return;
        }

        var data = _.extend(getNewThingData(), {
            text: name || 'Relationship Idea',
            //isLinkLabel: true,     // deprecated as of goJS 1.3
            category: "LinkLabel", // new as of goJS 1.3
            loc: '0 0'
        });
        _diagram.model.startTransaction("create R Thing");
        _diagram.model.addNodeData(data);
        var key = _diagram.model.getKeyForNodeData(data);
        var node = _diagram.findPartForKey(key);
        node.labeledLink = link;
        _diagram.model.commitTransaction("create R Thing");
        _diagram.updateAllTargetBindings();

        return _diagram.findNodeForData(data);
    };

    // ---------- creating things with specified names/locations - for use by generator and tests ------------

    this.createThing = function (x, y, name, layout) {
        group = _diagram.toolManager.clickCreatingTool.insertPart(new go.Point(x, y));
        _diagram.model.setDataProperty(group.data, 'text', name);
        if (layout) {
            _diagram.model.setDataProperty(group.data, 'layout', layout);
        }
        return group;
    };

    this.createRLinkWithRThing = function (thing1, thing2, name) {
        var link = self.createRLink(thing1, thing2);
        return self.createRThing(link, name);
    };

    // returns the linkData object for the new link
    this.createRLink = function (thing1, thing2) {
        _diagram.model.startTransaction('add link');
        var data = {
            type: 'noArrows',
            from: thing1.data.key,
            to: thing2.data.key,
            fromPort: 'R',
            toPort: 'R'
        };
        _diagram.model.addLinkData(data);
        _diagram.model.commitTransaction('add link');
        return _diagram.findLinkForData(data);
    };

    // returns the linkData object for the new link
    this.createPLink = function (thing1, thing2) {
        _diagram.model.startTransaction('add link');
        var data = {
            type: 'noArrows',
            from: thing1.data.key,
            to: thing2.data.key,
            fromPort: 'P',
            toPort: 'P',
            category: 'P'
        };
        _diagram.model.addLinkData(data);
        _diagram.model.commitTransaction('add link');
        _diagram.model.setDataProperty(thing1.data, 'pExpanded', true);
        return _diagram.findLinkForData(data);
    };

    // ------------- moving things in the model structure -------------------

    // returns a go.List of the items in the current selection that are Groups
    function getSelectedGroups() {
        var it = _diagram.selection.iterator;
        var members = new go.List();
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group) {
                members.add(part);
            }
        }
        return members;
    }

    // drag to S
    this.addSelectedThingsAsChildrenOf = function (group) {
        var newMembers = getSelectedGroups();

        // check existing members so we can calculate layout
        var oldMemberBounds = self.safeRect(_diagram.computePartsBounds(group.memberParts));

        // NB: this is subject to validation by CommandHandler.isValidMember,
        // so for example, members of members of newMembers will not be added as members
        group.addMembers(newMembers);

        _layouts.layoutNewMembersRelativeTo(newMembers, group, oldMemberBounds);

        _diagram.clearSelection();
    };

    // drag to D
    this.addSelectedThingsAsSistersOf = function (group) {
        var oldMembers = getSelectedGroups();

        // if dragging to top level, move dragged things so they don't overlap the former parent
        if (!group.containingGroup) {
            // check existing members so we can calculate layout
            var oldMembersBounds = _diagram.computePartsBounds(oldMembers);
            // NB: oldMembers can be on multiple levels, so not clear which level to use for rescaling old members after drag
            var oldMembersLevel = _layouts.computeLevel(oldMembers.first());

            var it = oldMembers.iterator;
            while (it.next()) {
                var member = it.value;
                member.containingGroup = null;
            }
            _layouts.layoutOldMembersOutsideOf(oldMembers, group, oldMembersBounds, oldMembersLevel);
        }
        // if not dragging to top level, place dragged things after former parent in outline
        else {
                var it2 = oldMembers.iterator;
                while (it2.next()) {
                    var member2 = it2.value;
                    member2.containingGroup = group.containingGroup;
                    self.moveSiblingNextTo(member2, group, self.RIGHT);
                }
            }
        _diagram.clearSelection();
    };

    // for dragging parts within a system - side is LEFT or RIGHT (i.e. above or below, resp. in inventory layout)
    this.addSelectedThingAsOrderedSisterOf = function (group, side) {
        //console.log('addSelectedThingAsOrderedSisterOf, side: ' + side);
        var thing = self.getUniqueThingSelected();
        if (!thing) {
            return;
        }
        self.moveSiblingNextTo(thing, group, side);
    };

    // moves the first thing (sibling) to be after the second thing (group)
    // in the part ordering - they are assumed to be siblings
    // side is LEFT or RIGHT
    this.moveSiblingNextTo = function (sibling, group, side) {
        var parent = group.containingGroup;
        //console.log('moveSiblingNextTo, sibling: ' + sibling + ', group: ' + group + ', parent: ' + parent + ', sibling.containingGroup: ' + sibling.containingGroup);

        if (!parent || sibling.containingGroup != parent) {}
        //console.error('Cannot do moveSiblingNextTo on non-siblings or top-level groups');

        // create new member order
        var memberOrder = new go.List();
        var it = parent.memberParts;
        var order = 0;
        while (it.next()) {
            var member = it.value;
            if (member instanceof go.Group) {
                // we're at the target group, so add the moved thing either before or after it
                if (member == group) {
                    if (side == self.LEFT) {
                        memberOrder.add(sibling);
                        _diagram.model.setDataProperty(sibling.data, 'order', order++);
                        memberOrder.add(member);
                        _diagram.model.setDataProperty(member.data, 'order', order++);
                    } else {
                        memberOrder.add(member);
                        _diagram.model.setDataProperty(member.data, 'order', order++);
                        memberOrder.add(sibling);
                        _diagram.model.setDataProperty(sibling.data, 'order', order++);
                    }
                }
                // don't re-add the moved thing, it was added above
                else if (member != sibling) {
                        memberOrder.add(member);
                        _diagram.model.setDataProperty(member.data, 'order', order++);
                    }
            }
        }

        // clear existing members
        var newIt = memberOrder.iterator;
        while (newIt.next()) {
            var member2 = newIt.value;
            member2.containingGroup = null;
        }

        // add new members
        newIt.reset();
        while (newIt.next()) {
            var member3 = newIt.value;
            member3.containingGroup = parent;
        }
    };

    this.addThingAsRThing = function (thing, link) {
        thing.labeledLink = link;
        thing.updateTargetBindings();
    };

    // D corner handler (single click)
    this.toggleDFlag = function (thing) {
        _diagram.model.setDataProperty(thing.data, 'dflag', !thing.data.dflag);
        thing.updateTargetBindings();
    };

    // S corner handler (single click)
    this.toggleSExpansion = function (thing) {
        var isExpanded = !(thing.data && !thing.data.sExpanded); // expand by default if property not present
        _diagram.model.setDataProperty(thing.data, 'sExpanded', !isExpanded);
        thing.updateTargetBindings();
        _ui.showCornerTip(thing, 'S');
    };

    // P corner handler (single click)
    this.togglePExpansion = function (thing) {
        _diagram.model.setDataProperty(thing.data, 'pExpanded', !self.pIsExpanded(thing));
        thing.updateTargetBindings();
        _ui.showCornerTip(thing, "P");
    };

    this.pIsExpanded = function (group) {
        return group.data && group.data.pExpanded === true;
    };

    // ---------------------- undo/redo --------------------

    this.canUndo = function () {
        return _diagram.commandHandler.canUndo();
    };

    this.undo = function () {
        _diagram.commandHandler.undo();
        _diagram.layoutDiagram(true);
    };

    this.canRedo = function () {
        return _diagram.commandHandler.canRedo();
    };

    this.redo = function () {
        _diagram.commandHandler.redo();
        _diagram.layoutDiagram(true);
    };

    this.refresh = function () {
        _diagram.updateAllTargetBindings();
        _diagram.layoutDiagram(true);
    };

    // ------------------- utility ----------------------

    // check for a rect with NaN X/Y/W/H coords, so we can do stuff with it such as unionRect
    // (NaN,NaN,0,0) => (0,0,0,0)
    this.safeRect = function (rect) {
        if (isNaN(rect.x)) {
            rect.x = 0;
        }
        if (isNaN(rect.y)) {
            rect.y = 0;
        }
        if (isNaN(rect.width)) {
            rect.width = 0;
        }
        if (isNaN(rect.height)) {
            rect.height = 0;
        }
        return rect;
    };

    // ------------------- debug map model ----------------------

    this.loadModel = function () {
        $('#map-model-debug').val(_diagram.model.toJson());
    };

    this.saveModel = function () {
        _diagram.model = go.Model.fromJson($('#map-model-debug').val());
        _diagram.updateAllTargetBindings();
        _diagram.model.addChangedListener(_autosave.modelChanged);
        _autosave.saveOnModelChanged = true;
    };
};

},{"./extensions/NodeLabelDraggingTool.js":23}],27:[function(require,module,exports){
// functions for editing perspectives AND distinctions, which work similarly in the UI

'use strict';

SandbankEditor.Perspectives = function ($scope, map) {

    var self = this;

    // temporary state flag for adding/removing P/D selections programmatically
    var selectingLinkedThings = false;

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        //console.log('Perspectives, currentTabChanged');
        if (newValue == map.ui().TAB_ID_PERSPECTIVES) {
            // opening perspectives
            setPorDThing('P');
            map.setEditingBlocked(true);
        } else if (oldValue == map.ui().TAB_ID_PERSPECTIVES) {
            // closing perspectives
            saveLinks('P');
            map.setEditingBlocked(false);
        } else if (newValue == map.ui().TAB_ID_DISTINCTIONS) {
            // opening distinctions
            setPorDThing('D');
            map.setEditingBlocked(true);
        } else if (oldValue == map.ui().TAB_ID_DISTINCTIONS) {
            // closing distinctions
            saveLinks('D');
            map.setEditingBlocked(false);
        }
    };

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.ui().currentTabIs(map.ui().TAB_ID_PERSPECTIVES) || map.ui().currentTabIs(map.ui().TAB_ID_DISTINCTIONS)) {
                updateLinks();
            }
        }
    };

    // ---------- P/D Editor state

    this.isInPOrDEditorMode = function () {
        return map.ui().state.perspectivePointKey !== null || map.ui().state.distinctionThingKey !== null;
    };

    this.isInPEditorMode = function () {
        return map.ui().state.perspectivePointKey !== null;
    };

    this.isInDEditorMode = function () {
        return map.ui().state.distinctionThingKey !== null;
    };

    this.isPEditorPoint = function (group) {
        return map.ui().state.perspectivePointKey == group.data.key;
    };

    this.isDEditorThing = function (group) {
        return map.ui().state.distinctionThingKey == group.data.key;
    };

    // NB: this is called via map.getCornerFunction, so we get the extra corner arg, which we can ignore
    this.setPEditorPoint = function (thing, corner) {
        if ($scope.canEdit) {
            map.ui().openTab(map.ui().TAB_ID_PERSPECTIVES);
        }
    };

    this.setDEditorThing = function (thing) {
        if ($scope.canEdit) {
            // NB: need to select only this thing, since this is invoked
            // by a control-click, which will not automatically select just it
            map.getDiagram().clearSelection();
            thing.isSelected = true;
            map.ui().openTab(map.ui().TAB_ID_DISTINCTIONS);
        }
    };

    // -----------------------

    this.isPerspectivePoint = function (group) {
        var links = group.findLinksOutOf();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    };

    this.isSelectedPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && map.pIsExpanded(link.fromNode) && link.fromNode.isSelected) {
                return true;
            }
        }
        return false;
    };

    this.isToggledPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && map.pIsExpanded(link.fromNode)) {
                return true;
            }
        }
        return false;
    };

    this.isMouseOverPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && link.fromNode == map.ui().mouseOverGroup) {
                return true;
            }
        }
        return false;
    };

    this.getPerspectiveViewWeight = function (group) {
        var mode = map.ui().getMapEditorOptions().perspectiveMode;
        if (mode == 'spotlight' || mode == 'both') {
            return (self.isSelectedPerspectiveView(group) ? 1 : 0) + (self.isToggledPerspectiveView(group) ? 1 : 0) + (self.isMouseOverPerspectiveView(group) ? 1 : 0);
        } else {
            return 0;
        }
    };

    // -----------------------

    // category is "P" or "D" (perspectives or distinctions)
    function setPorDThing(category) {
        // if already set, must do save perspectives or save distinctions
        if (map.ui().state.perspectivePointKey || map.ui().state.distinctionThingKey) return;

        var thing = map.getDiagram().selection.first();
        //console.log('setPorDThing: ' + thing);
        if (thing instanceof go.Group) {
            var key = thing.data.key;
            if (category == "P") {
                map.ui().state.perspectivePointKey = key;
            } else if (category == "D") {
                map.ui().state.distinctionThingKey = key;
            }

            // select views/others
            selectLinkedThingsFor(thing, category);
        }
    }

    // this is called when the selection changes - if the thing is set,
    // adds/removes D/P links according to what is selected; otherwise
    // just shows/hides D/P links for the selected thing(s)
    function updateLinks() {
        if (selectingLinkedThings) // selection is being changed programmatically, so don't respond
            return;

        var pOrDThing = null;
        var category = null;
        if (map.ui().state.perspectivePointKey) {
            pOrDThing = map.getDiagram().findNodeForKey(map.ui().state.perspectivePointKey);
            category = "P";
        } else if (map.ui().state.distinctionThingKey) {
            pOrDThing = map.getDiagram().findNodeForKey(map.ui().state.distinctionThingKey);
            category = "D";
        }

        var addLinksTo = new go.List();
        var removeLinks = new go.List();

        // iterate through all things
        if (category) {
            var layers = map.getDiagram().layers;
            while (layers.next()) {
                var layer = layers.value;
                var parts = layer.parts;
                while (parts.next()) {
                    var part = parts.value;
                    if (part instanceof go.Group) {
                        // calculate links to add/remove based on selection
                        if (pOrDThing) {
                            var links = part.findLinksInto();
                            var existingLink = null;
                            while (links.next()) {
                                var link = links.value;
                                if (link.fromNode.data.key == pOrDThing.data.key && link.data.category == category) existingLink = link;
                            }

                            // decide whether to add or remove a link to the part, depending on whether
                            // it is selected and whether a link exists
                            if (!existingLink && part.isSelected) addLinksTo.add(part);else if (existingLink && !part.isSelected) removeLinks.add(existingLink);
                        }
                    }
                }
            }
        }

        // do the adding/removing of links
        var adds = addLinksTo.iterator;
        while (adds.next()) {
            map.getDiagram().model.startTransaction('add link');
            var to = adds.value;
            //console.log('updateLinks: adding link from ' + pOrDThing + ' to ' + to);
            if (category == "D" && pOrDThing.data.key == to.data.key) {
                pOrDThing.isSelected = false;
                alert("You can't distinguish a thing from itself!");
                continue;
            }
            map.getDiagram().model.addLinkData({
                from: pOrDThing.data.key,
                to: to.data.key,
                fromPort: category,
                toPort: category,
                category: category
            });
            map.getDiagram().model.commitTransaction('add link');
        }
        var removes = removeLinks.iterator;
        while (removes.next()) {
            var remove = removes.value;
            //console.log('updateLinks: removing link from ' + remove.fromNode + ' to ' + remove.toNode);
            map.getDiagram().model.startTransaction('remove link');
            map.getDiagram().remove(remove);
            map.getDiagram().model.removeLinkData(remove.data);
            map.getDiagram().model.commitTransaction('remove link');
        }

        // show links
        map.getDiagram().updateAllTargetBindings();
    }

    function saveLinks(category) {
        var pOrDThing = null;
        if (category == "P") {
            pOrDThing = map.getDiagram().findNodeForKey(map.ui().state.perspectivePointKey);
            map.ui().state.perspectivePointKey = null;
        } else if (category == "D") {
            pOrDThing = map.getDiagram().findNodeForKey(map.ui().state.distinctionThingKey);
            map.ui().state.distinctionThingKey = null;
        }

        map.getDiagram().clearSelection();
        map.getDiagram().updateAllTargetBindings();
    }

    function selectLinkedThingsFor(group, category) {
        selectingLinkedThings = true;
        map.getDiagram().clearSelection();

        var links = group.findLinksOutOf();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == category) link.toNode.isSelected = true;
        }

        selectingLinkedThings = false;
    }
};

},{}],28:[function(require,module,exports){
// functions for the presenter/slides

'use strict';

SandbankEditor.Presenter = function ($scope, map) {

    var self = this;

    // constants
    this.SLIDE_BLOCKER_WIDTH = 1000;
    this.SLIDE_BLOCKER_COLOR = "#fff";
    this.SLIDE_BLOCKER_OPACITY = 0.9;

    // state vars
    this.currentSlideIndex = null;
    this.isPresenting = false;
    this.showTOC = false;
    this.isCreatingThumbnail = false;

    // mask applied around slide region when presenting
    this.slideBlocker = null;

    this.diagramAspectRatio = null;

    this.init = function () {};

    this.autosave = function () {
        map.getAutosave().save('edit_presenter');
    };

    // ---------- editing functions for different slide types -------------

    // NB: hasLinks can have values false, 1, or true (1 means only a single link)
    this.slideTypes = [{
        name: 'TITLE_BODY', label: 'Title and Body',
        hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: false, hasMapSummary: false, hasLinks: false
    }, {
        name: 'TITLE_BODY_MAP', label: 'Title, Body and MetaMap',
        hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
    }, {
        name: 'ACTIVITY_MAP', label: 'Lesson Activity and MetaMap',
        hasTitle: true, hasNotes: true, hasChecks: true, hasMapRegion: true, hasMapSummary: false, hasLinks: true
    }, {
        name: 'MAP_ONLY', label: 'MetaMap only',
        hasTitle: true, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
    }, {
        name: 'MAP_SUMMARY', label: 'MetaMap Summary',
        hasTitle: false, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: true, hasLinks: false
    }];

    // ------------------ link/attachment types -----------------------

    this.linkTypes = [{ name: '', label: '-- Select attachment type --' }, { name: 'WEB', label: 'Web Page' }, { name: 'PDF', label: 'PDF' }, { name: 'DOC', label: 'Document' }, { name: 'SPREADSHEET', label: 'Spreadsheet' }, { name: 'PRESENTATION', label: 'Presentation' }, { name: 'METAMAP', label: 'MetaMap' }, { name: 'IMAGE', label: 'Image' }, { name: 'AUDIO', label: 'Audio' }, { name: 'VIDEO', label: 'Video' }, { name: 'SURVEY', label: 'Survey' }, { name: 'WORKSHEET', label: 'Worksheet' }];

    // ------------ list of all things in the map, for map summary slides ---------------------

    this.ideaList = '';

    // only call this occasionally, as they won't be editing the map while presenter is open
    function updateIdeaList() {
        var nodes = map.getDiagram().nodes;
        var list = [];
        while (nodes.next()) {
            if (nodes.value instanceof go.Group) {
                list.push(nodes.value.data.text);
            }
        }
        list.sort();

        // filter out placeholder names - see map.js:getNewThingData, createSister, etc.
        list = _.difference(_.uniq(list, true), map.getGenerator().getPlaceholderIdeaNames(), ['New Idea', 'New Distinguished Idea', 'New Related Idea', 'New Relationship Idea', 'New Part Idea', 'Idea', 'Part', 'Relationship Idea'] // newer simplified names
        );

        self.ideaList = list.join(', ');
    }

    this.summaryAnalytics = [{ name: 'COUNT_THINGS', singularLabel: 'Distinction', pluralLabel: 'Distinctions' }, { name: 'COUNT_SYSTEMS', singularLabel: 'System', pluralLabel: 'Systems' }, { name: 'COUNT_RELATIONSHIPS', singularLabel: 'Relationship', pluralLabel: 'Relationships' }, { name: 'COUNT_PERSPECTIVES', singularLabel: 'Perspective', pluralLabel: 'Perspectives' }, { name: 'COUNT_RTHINGS', singularLabel: 'Relationship Idea', pluralLabel: 'Relationship Ideas' }, { name: 'COUNT_SYSTEM_RTHINGS', singularLabel: 'Relationship System', pluralLabel: 'Relationship Systems' }, { name: 'COUNT_SYSTEM_PERSPECTIVES', singularLabel: 'Perspective System', pluralLabel: 'Perspective Systems' }, { name: 'COUNT_DISTINCTIONS', singularLabel: 'Advanced Distinction', pluralLabel: 'Advanced Distinctions' }];

    this.addCheck = function (nodeData) {
        nodeData.checks.push({ text: '' });
        self.autosave();
    };

    this.deleteCheck = function (check, nodeData) {
        var i = _.indexOf(nodeData.checks, check);
        nodeData.checks.splice(i, 1);
        self.autosave();
    };

    this.addLink = function (nodeData) {
        nodeData.links.push({ title: '', url: '', type: '' });
        self.autosave();
    };

    this.deleteLink = function (link, nodeData) {
        var i = _.indexOf(nodeData.links, link);
        nodeData.links.splice(i, 1);
        self.autosave();
    };

    this.toggleTOC = function () {
        $scope.safeApply(function () {
            if (self.isPresenting) {
                self.showTOC = !self.showTOC;
            }
        });
    };

    // NB: can't create this in init as the diagram doesn't exist yet...
    function maybeInitSlideBlocker() {
        if (!self.slideBlocker) {
            var mk = go.GraphObject.make;
            self.slideBlocker = mk(go.Node, go.Panel.Auto, {
                layerName: 'Tool',
                opacity: self.SLIDE_BLOCKER_OPACITY
            }, mk(go.Shape, "Rectangle", {
                fill: null,
                stroke: self.SLIDE_BLOCKER_COLOR,
                strokeWidth: 1000
            }));
            map.getDiagram().add(self.slideBlocker);
        }
    }

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (oldValue == map.ui().TAB_ID_PRESENTER) {
            // closing tab
            self.stopPresenting();
        } else if (newValue == map.ui().TAB_ID_PRESENTER) {
            // opening tab
            // show slides (see layouts.slideTemplate, binding of visible attr)
            self.diagramAspectRatio = $('#diagram').width() / $('#diagram').height();
            //console.log('diagramAspectRatio: ' + self.diagramAspectRatio);

            $scope.map.getDiagram().updateAllTargetBindings();
            updateIdeaList();
            if (!self.currentSlideIndex && self.getSlideNodeDatas().length > 0) {
                self.currentSlideIndex = 1;
            }
            self.slideThumbnailSelected(1);
        }
    };

    this.handleDiagramEvent = function (eventName, e) {
        if (!map.ui().currentTabIs(map.ui().TAB_ID_PRESENTER)) {
            return;
        }

        if (eventName == 'SelectionDeleting') {
            var selection = e.subject;
            if (selection.count == 1) {
                var thing = selection.first();
                if (thing instanceof go.Node && thing.data.category == 'slide') {
                    if (!confirm("Delete this slide from the presentation?")) {
                        e.cancel = true;
                    }
                }
            }
        } else if (eventName == 'SelectionDeleted') {
            // if slide is deleted from canvas rather than by thumbnail x button, need to update indexes
            compactSlideIndexes();
        } else if (eventName == 'SelectionMoved' || eventName == 'PartResized') {
            // clear thumbnail cache
            thumbnailCache = [];
        } else if (eventName == 'ViewportBoundsChanged') {
            // adjust zooming of map region
            //self.windowResized();
        }
    };

    this.windowResized = _.debounce(function () {
        self.slideThumbnailSelected(self.currentSlideIndex);
    }, 1000);

    this.showSidebar = function () {
        return map.ui().currentTabIs(map.ui().TAB_ID_PRESENTER) && (!self.isPresenting || self.showTOC);
    };

    this.disableMapToolbarButtons = function () {
        return !map.ui().currentTabIs(map.ui().TAB_ID_PRESENTER) || self.isPresenting || !self.getCurrentSlideType().hasMapRegion;
    };

    // returns an array of node data objects (not the slide nodes themselves)
    this.getSlideNodeDatas = function () {
        var diagram = map.getDiagram();
        var nodes = diagram.model.nodeDataArray;
        var nodeDatas = _.filter(nodes, function (node) {
            return node.category == 'slide';
        });
        nodeDatas = _.sortBy(nodeDatas, function (nodeData) {
            return nodeData.index;
        });
        //console.log('getSlideNodeDatas, indexes: ' + _.pluck(slidesData, 'index'));
        return nodeDatas;
    };

    this.getSlideCount = function () {
        return self.getSlideNodeDatas().length;
    };

    this.getActivitySlideCount = function () {
        return _.where(self.getSlideNodeDatas(), { type: 'ACTIVITY_MAP' }).length;
    };

    this.getSlideType = function (typeName) {
        return _.findWhere(self.slideTypes, { name: typeName });
    };

    this.getCurrentSlideType = function () {
        var slide = findSlideByIndex(self.currentSlideIndex);
        if (slide) {
            return _.findWhere(self.slideTypes, { name: slide.data.type });
        } else {
            return {};
        }
    };

    function findSlideByIndex(index) {
        var diagram = map.getDiagram();
        var slideData = _.find(self.getSlideNodeDatas(), function (slideData) {
            return slideData.index == index;
        });
        if (slideData !== undefined) {
            return diagram.findNodeForKey(slideData.key);
        } else {
            return undefined;
        }
    }

    // increment is -1 or +1
    this.moveSlide = function (index, increment) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            var neighbor = findSlideByIndex(index + increment);
            if (slide && neighbor) {
                //console.log('moveSlide: swapping ' + slide.data.key + ' with ' + neighbor.data.key);
                diagram.startTransaction("move slide");
                diagram.model.setDataProperty(slide.data, 'index', slide.data.index + increment);
                diagram.model.setDataProperty(neighbor.data, 'index', neighbor.data.index - increment);
                diagram.commitTransaction("move slide");
                thumbnailCache = [];
            }
        });
    };

    function compactSlideIndexes() {
        $scope.safeApply(function () {
            //console.log('compactSlideIndexes');
            var slidesData = self.getSlideNodeDatas();
            var diagram = map.getDiagram();
            var newIndex = 1;
            diagram.startTransaction("compact slide indexes");
            _.each(slidesData, function (slideData) {
                diagram.model.setDataProperty(slideData, 'index', newIndex);
                //console.log('compactSlideIndexes: set index for ' + slideData.key + ' to ' + newIndex);
                newIndex++;
            });
            diagram.commitTransaction("compact slide indexes");
        });
    }

    function getNewSlideKey() {
        var diagram = map.getDiagram();
        var i = 1;
        while (diagram.model.findNodeDataForKey('slide-' + i)) {
            i++;
        }
        return 'slide-' + i;
    }

    // NB: indexes (and keys?) must be 1-based, otherwise first slide gets screwed up
    // (somewhere the index shows up as '' instead of 0)
    function getNewSlideIndex() {
        var slides = self.getSlideNodeDatas();
        return slides.length + 1;
    }

    this.addSlide = function (typeName) {
        $scope.safeApply(function () {
            //console.log('addSlide: ' + typeName);
            var diagram = map.getDiagram();

            var db = map.computeMapBounds();
            db.inflate(db.width / 20, db.height / 10);
            var newLoc = db.x + ' ' + db.y;
            var newIndex = getNewSlideIndex();

            var slideType = _.findWhere(self.slideTypes, { name: typeName });

            diagram.startTransaction("add slide");
            diagram.model.addNodeData({
                key: getNewSlideKey(),
                category: 'slide',
                index: newIndex,
                isGroup: false,
                width: db.width,
                height: db.height,
                loc: newLoc,
                level: 0,
                children: 0,
                type: typeName,
                title: '',
                notes: '',
                checks: [],
                hasRegion: slideType.hasMapRegion,
                isSummary: slideType.hasMapSummary,
                links: []
            });
            diagram.commitTransaction("add slide");
            thumbnailCache = [];

            self.slideThumbnailSelected(newIndex); // trigger display of edit form, zoom to map region if applicable
        });
    };

    this.duplicateSlide = function (index) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var newIndex = getNewSlideIndex();
            var slide = findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction("duplicate slide");

                // bump up indexes on subsequent slides to make room for new slide after current one
                _.each(self.getSlideNodeDatas(), function (slideData) {
                    if (slideData.index > index) {
                        diagram.model.setDataProperty(slideData, 'index', slideData.index + 1);
                    }
                });

                // NB: creating a new nodeData object here rather than copying and modifying, to avoid copying $$hashKey (??)
                diagram.model.addNodeData({
                    key: getNewSlideKey(),
                    category: 'slide',
                    index: index + 1,
                    isGroup: false,
                    width: slide.data.width,
                    height: slide.data.height,
                    loc: slide.data.loc,
                    level: 0,
                    children: 0,
                    type: slide.data.type,
                    title: slide.data.title + ' (Copy)',
                    notes: slide.data.notes,
                    checks: slide.data.checks, // clone?
                    hasRegion: slide.data.hasRegion,
                    isSummary: slide.data.isSummary,
                    links: slide.data.links // clone?
                });
                diagram.commitTransaction("duplicate slide");
                thumbnailCache = [];
            }
        });
    };

    this.removeSlide = function (index) {
        $scope.safeApply(function () {
            //console.log('removeSlide: ' + index);
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction("remove slide");
                diagram.model.removeNodeData(slide.data);
                diagram.commitTransaction("remove slide");
            }
            self.currentSlideIndex = null;
            thumbnailCache = [];
            compactSlideIndexes();
        });
    };

    var thumbnailCache = [];

    this.getSlideThumbnail = function (index) {
        return thumbnailCache[index];
    };

    this.createSlideThumbnails = function () {
        _.each(self.getSlideNodeDatas(), function (nd) {
            self.createSlideThumbnail(nd.index);
        });
    };

    this.createSlideThumbnail = function (index) {
        //console.log('createSlideThumbnail');

        var thumbWidth = 1000;
        var thumbHeight = 600;
        var diagram = map.getDiagram();

        var slide = findSlideByIndex(index);
        if (!slide) {
            return '';
        } else if (!slide.data.hasRegion && !slide.data.isSummary) {
            return '';
        } else {
            var db = diagram.documentBounds;
            var sb;
            if (slide.data.isSummary) {
                // for a summary slide we shoot the whole map
                sb = map.safeRect(map.computeMapBounds());
            } else {
                // otherwise just shoot the slide region
                sb = slide.part.actualBounds;
            }

            var imagePosition = new go.Point(sb.x, sb.y);
            //console.log('getSlideThumbnail, slide bounds: ' + sb + ', document bounds: ' + db + ', imagePosition: ' + imagePosition);

            var wScale = thumbWidth / sb.width;
            var hScale = thumbHeight / sb.height;
            var thumbScale = Math.min(wScale, hScale);
            //console.log('scale: ' + wScale + ',' + hScale);

            var w = thumbScale * sb.width;
            var h = thumbScale * sb.height;
            //console.log('thumbnail w/h: ' + w + ',' + h);

            // hide slides temporarily while creating thumbnail
            self.isCreatingThumbnail = true;
            diagram.updateAllTargetBindings();

            diagram.scale = thumbScale;

            var imgData = diagram.makeImageData({
                size: new go.Size(w, h),
                position: imagePosition,
                scale: thumbScale
            });

            self.isCreatingThumbnail = false;
            diagram.updateAllTargetBindings();

            thumbnailCache[index] = imgData;

            return imgData;
        }
    };

    // gets a thumbnail of the whole map, for saving (see autosave.js)
    this.getMapThumbnail = function () {

        var diagram = map.getDiagram();
        var sb = map.safeRect(map.computeMapBounds());
        sb.grow(10, 10, 10, 10);
        var w = 150;
        var h = 100;

        // hide slides temporarily while creating thumbnail
        self.isCreatingThumbnail = true;
        diagram.updateAllTargetBindings();

        var imgData = diagram.makeImageData({
            scale: Math.min(h / sb.height, w / sb.width),
            position: new go.Point(sb.x, sb.y),
            size: new go.Size(w, h)
        });

        self.isCreatingThumbnail = false;
        diagram.updateAllTargetBindings();

        return imgData;
    };

    // called via ng-click on thumbnail
    this.slideThumbnailSelected = function (index) {
        //console.log('slideThumbnailSelected: ' + index);
        var diagram = map.getDiagram();
        var slide = findSlideByIndex(index);

        $scope.safeApply(function () {
            // NB: order of statements is important here, as selectSlide can trigger changedSelection with an empty selection sometimes... ??
            selectSlide(index);
            self.currentSlideIndex = index;
            diagram.updateAllTargetBindings(); // show/hide slide nodes - see templates.js: slideTemplate

            if (slide) {
                zoomToSlideInCenter(slide);

                if (self.isPresenting) {
                    self.showTOC = false;
                }
            }
        });
    };

    this.needsNarrowCanvas = function () {
        var slide = findSlideByIndex(self.currentSlideIndex);
        return map.ui().currentTabIs(map.ui().TAB_ID_PRESENTER) && slide != null && (slide.data.type == 'TITLE_BODY_MAP' || slide.data.type == 'ACTIVITY_MAP' || slide.data.type == 'MAP_SUMMARY');
    };

    // sets the slide node as selected in the diagram.
    function selectSlide(index) {
        $scope.safeApply(function () {
            //console.log('select slide: ' + index);
            var diagram = map.getDiagram();
            diagram.clearSelection();
            if (index) {
                var slide = findSlideByIndex(index);
                if (slide) {
                    slide.isSelected = true;
                }
            }
            // TODO: scroll to slide?
        });
    }

    this.playSlide = function (index) {
        var diagram = map.getDiagram();
        map.ui().openTab(map.ui().TAB_ID_PRESENTER);

        var slides = self.getSlideNodeDatas();
        if (slides.length) {
            self.showTOC = false;
            presentSlide(index);
        }
    };

    // increment is -1 or +1
    this.advanceSlide = function (increment) {
        //console.log('advanceSlide, currentSlideIndex: ' + self.currentSlideIndex);
        $scope.safeApply(function () {
            var slide = findSlideByIndex(self.currentSlideIndex);
            if (slide) {
                self.currentSlideIndex += increment;
                if (self.isPresenting) {
                    presentSlide(self.currentSlideIndex);
                }
            }
        });
    };

    function presentSlide(index) {
        //console.log('presentSlide');
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            if (!slide) {
                return;
            }

            diagram.clearSelection();
            // NB: need to set this after clearSelection, as that will set it to null! (see changedSelection)
            self.currentSlideIndex = index;
            map.setEditingBlocked(true);
            //console.log('presentSlide, index: ' + index + ', slide: ' + slide + ', currentSlideIndex: ' + self.currentSlideIndex);

            maybeInitSlideBlocker();
            var blockerW = self.SLIDE_BLOCKER_WIDTH;

            if (slide.data.hasRegion) {
                zoomToSlideInCenter(slide);

                // show slide blocker
                self.slideBlocker.desiredSize = new go.Size(slide.actualBounds.width + 2 * blockerW, slide.actualBounds.height + 2 * blockerW);
                self.slideBlocker.location = new go.Point(slide.actualBounds.x - blockerW, slide.actualBounds.y - blockerW);
                self.slideBlocker.visible = true;
                //console.log('slideBlocker: ' + self.slideBlocker.actualBounds);
            } else if (slide.data.isSummary) {
                    zoomToSlideInCenter(slide);
                    self.slideBlocker.visible = false;
                } else {
                    map.ui().resetZoom();
                    self.slideBlocker.visible = false;
                }

            self.isPresenting = true;
            $('body').addClass('presenter-playing');

            map.getDiagram().updateAllTargetBindings(); // hide slide nodes - see templates.js: slideTemplate
        });
    }

    // zoom the diagram to show the given slide in the center of the canvas
    function zoomToSlideInCenter(slide) {
        var diagram = map.getDiagram();

        window.setTimeout(function () {

            var halfWidth = slide.data.type != 'MAP_ONLY';
            var zoomRect = self.getLetterboxedRect(slide.actualBounds, halfWidth);
            zoomRect.inflate(zoomRect.width / 10, zoomRect.height / 10);
            diagram.zoomToRect(zoomRect, go.Diagram.Uniform);
        }, 100);
    }

    // Returns a rectangle containing the given rect, but with appropriate width or height added
    // to give it same aspect ratio as the diagram.
    this.getLetterboxedRect = function (rect, halfWidth) {

        // NB: we calculate the aspect ratio when the tab is opened,
        // rather than each time as the diagram size might be changing...
        var dar = halfWidth ? self.diagramAspectRatio / 2 : self.diagramAspectRatio;
        //console.log('rect: ' + rect + ', dar: ' + dar);

        var rectAspectRatio = rect.width / rect.height;

        if (dar > rectAspectRatio) {
            // tall skinny rect, short wide target AR, so add side padding to the rect
            var lbw = rect.height * dar; // because lbw / lbh == dar == lbw / rect.height (lbh == rect.height)
            return rect.copy().inflate((lbw - rect.width) / 2, 0); // add half the width difference to each side of the rect
        } else {
                // short wide rect, tall skinny target AR, so add top/bottom padding to the rect
                var lbh = rect.width / dar; // because lbw / lbh == dar == lbh / rect.width (lbw == rect.width)
                return rect.copy().inflate(0, (lbh - rect.height) / 2); // add half the height difference to top/bottom of the rect
            }
    };

    this.stopPresenting = function () {
        $scope.safeApply(function () {
            //console.log('stopPresenting, currentSlideIndex: ' + self.currentSlideIndex);
            var diagram = map.getDiagram();

            if (self.slideBlocker) {
                self.slideBlocker.visible = false;
            }

            //self.currentSlideIndex = null;
            self.isPresenting = false;
            $('body').removeClass('presenter-playing');

            map.getDiagram().updateAllTargetBindings(); // show slide nodes

            diagram.clearSelection();
            map.setEditingBlocked(false);
            //map.ui().resetZoom();
        });
    };
};

},{}],29:[function(require,module,exports){
// functions for sharing maps, with a modal dialog

'use strict';

window.SandbankSharing = {};

SandbankSharing = function ($scope, $http, $resource, $modal, $log) {

    this.openModal = function (_mapIds, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_map_sharing_modal.html', // see views/shares/_template_map_sharing_modal
            backdrop: 'static',
            controller: sharingModalCtrl,
            windowClass: 'sharing-modal',
            resolve: {
                userId: function userId() {
                    return $scope.userId;
                },
                userProfile: function userProfile() {
                    return $scope.userProfile;
                },
                mapIds: function mapIds() {
                    return _mapIds;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for sharing modal ---------------------

    var sharingModalCtrl = function sharingModalCtrl($scope, $modalInstance, userId, userProfile, mapIds, onUpdate) {

        $scope.userId = userId;
        $scope.userProfile = userProfile;
        $scope.mapIds = mapIds;

        // all existing shares for selected maps
        // format: [{mapId:1, shareId:1, canEdit:true, userId:2, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.mapShares = [];

        // existing shares, grouped for display
        // format: [{name:'foo', userEmail:'foo@bar.com', userId: null, groupId: id, organizationId: null, isPublic:false, canEdit:true, mapIds:[1,2]}, ...]
        $scope.existingShares = [];

        // new shares added in the dialog
        // format: [{shareType:SHARE_TYPE_INDIVIDUAL, sharePermission:SHARE_PERMISSION_CANVIEW, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.newShares = [];

        // all updated shares, to be saved
        // format: [{mapId:1, canEdit:false, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.updatedShares = [];

        // indexes of users/groups/orgs - format: [{id:1, name:'foo'}, ...]
        $scope.users = [];
        $scope.groups = [];
        $scope.organizations = [];

        // constants
        $scope.SHARE_TYPE_INDIVIDUAL = 'One or more Individuals';
        $scope.SHARE_TYPE_GROUP = 'Group';
        $scope.SHARE_TYPE_ORGANIZATION = 'ThinkNation';
        $scope.SHARE_TYPE_PUBLIC = 'All MetaMap Users';

        $scope.shareTypes = [$scope.SHARE_TYPE_INDIVIDUAL,
        //$scope.SHARE_TYPE_GROUP,
        $scope.SHARE_TYPE_ORGANIZATION, $scope.SHARE_TYPE_PUBLIC];

        $scope.SHARE_PERMISSION_CANVIEW = 'Can view';
        $scope.SHARE_PERMISSION_CANEDIT = 'Can edit';

        $scope.sharePermissions = [$scope.SHARE_PERMISSION_CANVIEW, $scope.SHARE_PERMISSION_CANEDIT];

        $scope.canShareCultureMap = function (share) {
            return _.findWhere($scope.userProfile.memberships, {
                organizationId: share.organizationId,
                leader: true
            });
        };

        // get existing shares
        function loadShares(mapIds) {
            $http.get('/shares/map_shares.json?ids=' + mapIds.join(',')).then(function (response) {
                if (response.status === 200 || response.status === 204) {
                    $scope.mapShares = response.data.mapShares;
                    $scope.users = response.data.users;
                    $scope.groups = response.data.groups;
                    $scope.organizations = response.data.organizations;
                    initExistingShares();
                    if (!$scope.existingShares.length && $scope.canAddNewShare()) {
                        $scope.addNewShare();
                    }
                }
            }, function () {
                alert('Could not load sharing info');
            });
        }

        loadShares(mapIds);

        // group the existing shares by user, group, org and public
        function initExistingShares() {
            // find all emails that occur in a share
            var userEmails = _.without(_.uniq(_.pluck($scope.mapShares, 'userEmail')), null);
            // build an array of shares, one for each email, with the applicable map IDs
            var sharesByUserEmail = _.map(userEmails, function (email) {
                var user = _.findWhere($scope.users, {
                    email: email
                });
                return {
                    isDeleted: false,
                    userEmail: email,
                    userId: user ? user.id : null,
                    groupId: null,
                    organizationId: null,
                    isPublic: false,
                    isCultureMap: false,
                    name: email,
                    // NB: for this attribute we don't try to summarize the value for all the existing shares,
                    // because it would be too complicated to display...
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        userEmail: email
                    }), 'mapId')
                };
            });

            var groupIds = _.without(_.uniq(_.pluck($scope.mapShares, 'groupId')), null);
            var sharesByGroupId = _.map(groupIds, function (id) {
                var group = _.findWhere($scope.groups, {
                    id: id
                });
                return {
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: id,
                    organizationId: null,
                    isPublic: false,
                    isCultureMap: false,
                    name: 'Group: ' + (group ? group.name : ''),
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        groupId: id
                    }), 'mapId')
                };
            });

            var organizationIds = _.without(_.uniq(_.pluck($scope.mapShares, 'organizationId')), null);
            var sharesByOrganizationId = _.map(organizationIds, function (id) {
                var organization = _.findWhere($scope.organizations, {
                    id: id
                });
                return {
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: null,
                    organizationId: id,
                    isPublic: false,
                    isCultureMap: $scope.mapShares.length == 1 && $scope.mapShares[0].isCultureMap,
                    name: 'ThinkNation: ' + (organization ? organization.name : ''),
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        organizationId: id
                    }), 'mapId')
                };
            });

            // are any of the selected maps shared publicly?
            var publicShares = [];
            if (_.where($scope.mapShares, {
                isPublic: true
            }).length) {
                publicShares = [{
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: null,
                    organizationId: null,
                    isPublic: true,
                    isCultureMap: false,
                    name: 'Everyone',
                    canEdit: false,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        isPublic: true
                    }), 'mapId')
                }];
            }

            $scope.existingShares = _.union(sharesByUserEmail, sharesByGroupId, sharesByOrganizationId, publicShares);
        }

        function buildUpdatedShares() {
            $scope.updatedShares = [];

            // for each selected map, decompose the existingShares (grouped by user/group/org/public) into individual shares for saving
            _.each(mapIds, function (id) {
                // get existing shares for this map
                var existingSharesForMapId = _.filter($scope.existingShares, function (existingShare) {
                    // existingShares format: [{name:'foo', userEmail:'foo@bar.com', userId: null, groupId: id, organizationId: null, isPublic:false, isCultureMap:false, canEdit:true, mapIds:[1,2]}, ...]
                    return _.contains(existingShare.mapIds, id);
                });
                // decompose these into individual shares
                _.each(existingSharesForMapId, function (es) {
                    $scope.updatedShares.push({
                        isNew: false,
                        isDeleted: es.isDeleted,
                        mapId: id,
                        userEmail: es.userEmail,
                        userId: es.userId,
                        groupId: es.groupId,
                        organizationId: es.organizationId,
                        isPublic: es.isPublic,
                        isCultureMap: es.isCultureMap,
                        canEdit: es.canEdit
                    });
                });
            });

            // add in the newShares (for each selected map)
            _.each(mapIds, function (id) {
                _.each($scope.newShares, function (ns) {
                    $scope.updatedShares.push({
                        isNew: true,
                        mapId: id,
                        userEmail: ns.shareType == $scope.SHARE_TYPE_INDIVIDUAL ? ns.userEmail : null,
                        groupId: ns.shareType == $scope.SHARE_TYPE_GROUP ? ns.groupId : null,
                        organizationId: ns.shareType == $scope.SHARE_TYPE_ORGANIZATION ? ns.organizationId : null,
                        isPublic: ns.shareType == $scope.SHARE_TYPE_PUBLIC,
                        isCultureMap: ns.isCultureMap,
                        canEdit: ns.shareType == $scope.SHARE_TYPE_PUBLIC ? false : ns.sharePermission == $scope.SHARE_PERMISSION_CANEDIT,
                        message: ns.message
                    });
                });
            });
        }

        function saveShares(onUpdate) {
            $http.put('/shares/update_map_shares', $scope.updatedShares).then(function (response) {
                onUpdate();
            }, function () {
                alert('Could not save sharing info');
            });
        }

        $scope.canDeleteExistingShare = function () {
            return $scope.canAddNewShare();
        };

        $scope.deleteExistingShare = function (share) {
            share.isDeleted = true;
        };

        $scope.canAddNewShare = function () {
            // make sure all maps are owned by the current user
            var mapUserIds = _.uniq(_.pluck($scope.mapShares, 'mapUserId'));
            return mapUserIds.length == 0 || mapUserIds.length == 1 && mapUserIds[0] == $scope.userId;
        };

        $scope.addNewShare = function () {
            // NB: isPublic and canEdit are set in buildUpdateShares
            $scope.newShares.push({
                shareType: $scope.SHARE_TYPE_INDIVIDUAL,
                sharePermission: $scope.SHARE_PERMISSION_CANVIEW,
                userEmail: '',
                groupId: $scope.groups.length ? $scope.groups[0].id : null,
                organizationId: $scope.organizations.length ? $scope.organizations[0].id : null,
                isCultureMap: false,
                message: ''
            });
        };

        $scope.deleteNewShare = function (share) {
            var i = _.indexOf($scope.newShares, share);
            $scope.newShares.splice(i, 1);
        };

        $scope.ok = function () {
            buildUpdatedShares();
            saveShares(onUpdate);
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    sharingModalCtrl.$inject = ['$scope', '$modalInstance', 'userId', 'userProfile', 'mapIds', 'onUpdate'];
};

},{}],30:[function(require,module,exports){
// common core standards tab -
// this is delegated to the SandbankCcsTagging module, which handles CCS
// for a map OR the user profile - see tagging_ccs.js

"use strict";

SandbankEditor.Standards = function ($scope, map) {

    var self = this;

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.ui().TAB_ID_STANDARDS) {
            // opening tab
            // if there are no links, show the modal
            if ($scope.canEdit && !$scope.ccsTagging.links.length) {
                $scope.ccsTagging.addLink();
            }
        }
        if (oldValue == map.ui().TAB_ID_STANDARDS) {// closing tab
        }
    };
};

},{}],31:[function(require,module,exports){
// functions for user-tagging maps, with a modal dialog

// NB: the complexity here is due to the need to show existing tags that may apply
// to any number of the selected maps, vs. new tags that will be added to all selected maps -
// the tagging info needs to be grouped and ungrouped when loading and saving to handle this.

'use strict';

window.SandbankTagging = {};

SandbankTagging = function ($scope, $http, $resource, $modal, $log) {

    this.openModal = function (_mapIds, _showDescription, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_map_tagging_modal.html', // see views/user_tags/_template_map_tagging_modal
            backdrop: 'static',
            controller: tagsModalCtrl,
            windowClass: 'tags-modal',
            resolve: {
                mapIds: function mapIds() {
                    return _mapIds;
                },
                showDescription: function showDescription() {
                    return _showDescription;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for tags modal ---------------------

    var tagsModalCtrl = function tagsModalCtrl($scope, $modalInstance, mapIds, showDescription, onUpdate) {

        $scope.mapIds = mapIds;

        // all existing tags for selected maps - format: [{mapId: 1, tagId: 1, tagName:'foo'}, ...]
        $scope.mapUserTags = [];

        // existing tags, grouped for display - format: [{name:'foo', mapIds:[1,2]}, ...]
        $scope.existingTags = [];

        // new tags added in the dialog - format: [{name:'foo'}, ...]
        $scope.newTags = [];

        // all updated tags, to be saved - tags format: [{mapId: 1, userTags: "foo, bar, bam"}, ...]
        $scope.updatedTags = { description: '', tags: [] };

        $scope.showDescription = showDescription;

        function loadTags(mapIds) {
            $http.get('/user_tags/map_user_tags.json?ids=' + mapIds.join(',')).then(function (response) {
                $scope.mapUserTags = response.data.mapUserTags;
                // NB: the map description is always passed back if we only pass one map ID,
                // but we may not display it in the dialog - depends on the value of the showDescription flag.
                if (mapIds.length == 1) {
                    $scope.updatedTags.description = response.data.mapDescription;
                }
                initExistingTags();
                $scope.addNewTag();
            }, function () {
                alert('Could not load tags');
            });
        }

        loadTags(mapIds);

        function initExistingTags() {
            var tagNames = _.uniq(_.pluck($scope.mapUserTags, 'tagName')).sort();
            $scope.existingTags = _.map(tagNames, function (name) {
                var mapUserTagsForName = _.where($scope.mapUserTags, { tagName: name });
                var mapIds = _.pluck(mapUserTagsForName, 'mapId');
                return {
                    name: name,
                    mapIds: mapIds
                };
            });
        }

        function buildUpdatedTags() {
            $scope.updatedTags.tags = [];
            _.each(mapIds, function (id) {
                var existingTagsForId = _.filter($scope.existingTags, function (existingTag) {
                    // existingTag format: {name:'foo', mapIds:[1,2]}
                    return _.contains(existingTag.mapIds, id);
                });
                $scope.updatedTags.tags.push({
                    mapId: id,
                    userTags: _.union(_.pluck(existingTagsForId, 'name'), _.without(_.pluck($scope.newTags, 'name'), '') // remove empty tags
                    ).join(', ')
                });
            });
        }

        function saveTags(onUpdate) {
            $http.put('/user_tags/update_map_user_tags', [$scope.updatedTags]).then(function (response) {
                onUpdate();
            }, function () {
                alert('Could not save tags');
            });
        }

        $scope.deleteExistingTag = function (tag) {
            var i = _.indexOf($scope.existingTags, tag);
            $scope.existingTags.splice(i, 1);
        };

        $scope.addNewTag = function () {
            $scope.newTags.push({ name: '' });
        };

        $scope.tagSelected = function (item, model, label) {
            //console.log('tagSelected: ' + item + ', ' + model + ', ' + label);
            $scope.addNewTag();
        };

        $scope.editingTagKeypress = function (e) {
            if (e.which == 13) {
                $scope.addNewTag();
            }
        };

        $scope.deleteNewTag = function (tag) {
            var i = _.indexOf($scope.newTags, tag);
            $scope.newTags.splice(i, 1);
            if (!$scope.newTags.length) {
                $scope.addNewTag(); // always leave at least one tag field
            }
        };

        // tag autocomplete
        $scope.getUserTags = function (viewValue) {
            var url = '/user_tags/list.json?q=' + viewValue;
            return $http.get(url).then(function (response) {
                return response.data.tags;
            });
        };

        $scope.ok = function () {
            buildUpdatedTags();
            saveTags(onUpdate);
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    tagsModalCtrl.$inject = ['$scope', '$modalInstance', 'mapIds', 'showDescription', 'onUpdate'];
};

},{}],32:[function(require,module,exports){
// goJS templates used in the editor

'use strict';

SandbankEditor.Templates = function ($scope, map) {

    var self = this;

    // constants
    this.groupFillColor = "#f9f9f9";

    this.init = function () {};

    // initialize template-related stuff that depends on the diagram (and therefore can't go in init())
    this.initTemplates = function (diagram) {
        diagram.groupTemplate = self.groupTemplate;
        diagram.nodeTemplate = self.slideTemplate;
        diagram.linkTemplate = self.linkTemplate;
        diagram.linkTemplateMap.add('P', self.pLinkTemplate);
        diagram.linkTemplateMap.add('D', self.dLinkTemplate);

        self.setTemporaryLinkTemplates(diagram.toolManager.linkingTool);
        self.setTemporaryLinkTemplates(diagram.toolManager.relinkingTool);

        diagram.toolManager.linkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
            self.handlePortTargeted(diagram.toolManager.linkingTool, realnode, realport, tempnode, tempport, toend);
        };

        diagram.toolManager.relinkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
            self.handlePortTargeted(diagram.toolManager.relinkingTool, realnode, realport, tempnode, tempport, toend);
        };

        diagram.toolManager.relinkingTool.updateAdornments = function (part) {
            go.RelinkingTool.prototype.updateAdornments.call(this, part);
            var from = part.findAdornment('RelinkFrom');
            var to = part.findAdornment('RelinkTo');
            // if (from)
            //     //console.log('relinkfrom: ' + from.part.width);
        };

        diagram.toolManager.linkingTool.linkValidation = self.validateLink;
        diagram.toolManager.relinkingTool.linkValidation = self.validateLink;
    };

    // convenient abbreviation for creating templates
    var mk = go.GraphObject.make;

    // DSRP colors (from _variables.scss)
    var colorD = "#f2624c";
    var colorS = "#96c93d";
    var colorR = "#4cbfc2";
    var colorP = "#fbaa36";
    var colorPLight = "#FDDDAF";
    var colorPDark = "#C9882B";

    var eyeSvgPath = "M 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00c 47.559,94.979, 144.341,160.00, 256.00,160.00c 111.657,0.00, 208.439-65.021, 256.00-160.00 C 464.442,161.021, 367.657,96.00, 256.00,96.00z M 382.225,180.852c 30.081,19.187, 55.571,44.887, 74.717,75.148 c-19.146,30.261-44.637,55.961-74.718,75.149C 344.427,355.257, 300.779,368.00, 256.00,368.00c-44.78,0.00-88.428-12.743-126.225-36.852 C 99.695,311.962, 74.205,286.262, 55.058,256.00c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65 C 130.725,190.866, 128.00,205.613, 128.00,221.00c0.00,70.692, 57.308,128.00, 128.00,128.00s 128.00-57.308, 128.00-128.00c0.00-15.387-2.725-30.134-7.704-43.799 C 378.286,178.39, 380.265,179.602, 382.225,180.852z M 256.00,205.00c0.00,26.51-21.49,48.00-48.00,48.00s-48.00-21.49-48.00-48.00s 21.49-48.00, 48.00-48.00 S 256.00,178.49, 256.00,205.00z";
    var eyeBlockedSvgPath = "M 419.661,148.208 C 458.483,175.723 490.346,212.754 512.00,256.00 C 464.439,350.979 367.657,416.00 256.00,416.00 C 224.717,416.00 194.604,410.894 166.411,401.458 L 205.389,362.48 C 221.918,366.13 238.875,368.00 256.00,368.00 C 300.779,368.00 344.427,355.257 382.223,331.148 C 412.304,311.96 437.795,286.26 456.941,255.999 C 438.415,226.716 413.934,201.724 385.116,182.752 L 419.661,148.208 ZM 256.00,349.00 C 244.638,349.00 233.624,347.512 223.136,344.733 L 379.729,188.141 C 382.51,198.627 384.00,209.638 384.00,221.00 C 384.00,291.692 326.692,349.00 256.00,349.00 ZM 480.00,0.00l-26.869,0.00 L 343.325,109.806C 315.787,100.844, 286.448,96.00, 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00 c 21.329,42.596, 52.564,79.154, 90.597,106.534L0.00,453.131L0.00,480.00 l 26.869,0.00 L 480.00,26.869L 480.00,0.00 z M 208.00,157.00c 24.022,0.00, 43.923,17.647, 47.446,40.685 l-54.762,54.762C 177.647,248.923, 160.00,229.022, 160.00,205.00C 160.00,178.49, 181.49,157.00, 208.00,157.00z M 55.058,256.00 c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65C 130.725,190.866, 128.00,205.613, 128.00,221.00 c0.00,29.262, 9.825,56.224, 26.349,77.781l-29.275,29.275C 97.038,309.235, 73.197,284.67, 55.058,256.00z";
    var paperclipSvgPath = "M 348.916,163.524l-32.476-32.461L 154.035,293.434c-26.907,26.896-26.907,70.524,0.00,97.422 c 26.902,26.896, 70.53,26.896, 97.437,0.00l 194.886-194.854c 44.857-44.831, 44.857-117.531,0.00-162.363 c-44.833-44.852-117.556-44.852-162.391,0.00L 79.335,238.212l 0.017,0.016c-0.145,0.152-0.306,0.288-0.438,0.423 c-62.551,62.548-62.551,163.928,0.00,226.453c 62.527,62.528, 163.934,62.528, 226.494,0.00c 0.137-0.137, 0.258-0.284, 0.41-0.438l 0.016,0.017 l 139.666-139.646l-32.493-32.46L 273.35,432.208l-0.008,0.00 c-0.148,0.134-0.282,0.285-0.423,0.422 c-44.537,44.529-116.99,44.529-161.538,0.00c-44.531-44.521-44.531-116.961,0.00-161.489c 0.152-0.152, 0.302-0.291, 0.444-0.423l-0.023-0.03 l 204.64-204.583c 26.856-26.869, 70.572-26.869, 97.443,0.00c 26.856,26.867, 26.856,70.574,0.00,97.42L 218.999,358.375 c-8.968,8.961-23.527,8.961-32.486,0.00c-8.947-8.943-8.947-23.516,0.00-32.46L 348.916,163.524z";

    // footer for image export
    var _exportFooter = null;

    // ------------------- debug info for groups/links --------------------------------

    function groupInfo(obj) {
        return obj.data.text + "\n" + 'object: ' + obj + "\n" + 'key: ' + obj.data.key + "\n" + 'containingGroup: ' + obj.containingGroup + "\n" + 'layout: ' + obj.layout + "\n" + 'data.layout: ' + obj.data.layout + "\n" + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + "\n" + 'freehand position (data.loc): ' + go.Point.parse(obj.data.loc) + "\n" + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + "\n" + 'getScale(): ' + map.getLayouts().getScale(obj) + "\n" + 'isLinkLabel: ' + obj.data.isLinkLabel + "\n" + 'labeledLink: ' + obj.labeledLink + "\n";
    }

    function nodeInfo(obj) {
        return 'object: ' + obj + "\n" + 'key: ' + obj.data.key + "\n" + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + "\n" + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + "\n";
    }

    function linkInfo(obj) {
        var snpos = map.getLayouts().getSameNodesLinkPosition(obj);
        return '' + 'object: ' + obj + "\n" + 'fromNode: ' + obj.fromNode + "\n" + 'toNode: ' + obj.toNode + "\n" + 'labelNodes: ' + obj.labelNodes.count + "\n" + 'labelNodeIsVisible: ' + map.getLayouts().labelNodeIsVisible(obj) + "\n" + 'fromPortId: ' + obj.fromPortId + "\n" + 'toPortId: ' + obj.toPortId + "\n" + 'category: ' + (obj.data ? obj.data.category : '') + "\n" + 'containingGroup: ' + obj.containingGroup + "\n" + 'fromAndToNodesAreVisible: ' + map.getLayouts().fromAndToNodesAreVisible(obj) + "\n" + 'curve: ' + obj.curve + "\n" + 'curviness: ' + obj.curviness + "\n" + 'fromEndSegmentLength: ' + Math.round(obj.fromEndSegmentLength) + "\n" + 'toEndSegmentLength: ' + Math.round(obj.toEndSegmentLength) + "\n" + 'sameNodesLinkPosition: ' + snpos.index + ' of ' + snpos.count + "\n" +
        //+ 'geometry: ' + obj.geometry + "\n" +
        'getLinkStrokeWidth: ' + map.getLayouts().getLinkStrokeWidth(obj) + "\n";
    }

    // -----------------------------------------------------------------------------

    // NB: these are here because they are about colors;
    // similar functions that are scale-related are in layouts.js...
    function getGroupSelectionStroke(obj) {
        if (obj.isSelected) {
            if (map.getPerspectives().isInPEditorMode()) return colorP;else if (map.getPerspectives().isInDEditorMode()) return colorD;else return "#C0CDDC";
        } else {
            return "#C0CDDC";
        }
    }

    // OK, this isn't about colors, but it wants to be near the one above...
    function getGroupSelectionStrokeWidth(obj) {
        return obj.isSelected ? 5 : 3;
    }

    function getRLinkSelectionStroke(obj) {
        if (obj.isSelected || obj == map.ui().mouseOverLink) {
            return colorR; // TODO: can P links be selected?
        } else {
                return "#000";
            }
    }

    // -----------------------------------------------------------------------------

    // callbacks to determine when the corners should be visible

    function showDCorner(group) {
        if (map.getPerspectives().isDEditorThing(group)) {
            // mark distinction thing
            return true;
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.ui().mouseOverGroup || // show corners on mouseover
            $scope.isTouchDevice() && group.isSelected || canDragSelectionToBecomeSistersOf(group, false) && ( // drag to D (make it sisters)
            map.ui().dragTargetPosition === null || cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
        }
    }

    function showSCorner(group) {
        if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.ui().mouseOverGroup || // show corners on mouseover
            $scope.isTouchDevice() && group.isSelected || canDragSelectionToBecomeChildrenOf(group, false) && ( // drag to S (make it children)
            map.ui().dragTargetPosition === null || cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
        }
    }

    function showRCorner(group) {
        if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.ui().mouseOverGroup || $scope.isTouchDevice() && group.isSelected; // show corners on mouseover
        }
    }

    function showPCorner(group) {
        if (map.getPerspectives().isPEditorPoint(group)) {
            return true; // mark perspective point
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
                // don't show any corners if in P/D editor mode
                return false;
            } else if (map.getPresenter().isCreatingThumbnail) {
                // don't show any corners if capturing thumbnail
                return false;
            } else {
                return group == map.ui().mouseOverGroup || $scope.isTouchDevice() && group.isSelected; // show corners on mouseover
            }
    }

    // when a P link should be visible

    this.showPLink = function (link) {
        var mode = map.ui().getMapEditorOptions().perspectiveMode;
        if (map.getPerspectives().isPEditorPoint(link.fromNode)) {
            // show P's when this link is from the current Point
            return true;
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show P's for non-Point things, even on mouseover
            return false;
        } else {
            return (mode == 'lines' || mode == 'both') && (link.fromNode == map.ui().mouseOverGroup || map.pIsExpanded(link.fromNode));
        }
    };

    this.showPDot = function (link) {
        return true; // map.ui().getMapEditorOptions().perspectiveMode != 'both';
    };

    // these functions are used in two modes:
    // 1. with isDropping == false, to highlight drop targets based on map.ui().dragTargetGroup and map.ui().dragTargetPosition,
    //    which are set on mouseDragEnter/mouseDragleave
    // 2. with isDropping == true, on drop, when the above indicators have gone away, but we know what the dropped
    //    and target groups are, and we want to know what the drop should do.

    function canDragSelectionToBecomeSistersOf(group, isDropping) {
        return (group == map.ui().dragTargetGroup || isDropping) && map.thingsSelectedAreDescendantsOf(group);
    }

    function canDragSelectionToBecomeChildrenOf(group, isDropping) {
        return (group == map.ui().dragTargetGroup || isDropping) && !map.thingsSelectedIncludeSlide() && !map.thingsSelectedAreDescendantsOf(group);
    }

    // side is map.LEFT or map.RIGHT
    function canDragSelectionToBecomeOrderedSisterOf(targetGroup, side, isDropping) {
        // must be dragging single group
        var draggedGroup = map.getUniqueThingSelected();
        if (!draggedGroup) {
            return false;
        }

        // dragged and target must be Sisters in inventory layout
        return (targetGroup == map.ui().dragTargetGroup || isDropping) && (map.ui().dragTargetPosition == side || isDropping) && map.getLayouts().areSistersInInventoryLayout(draggedGroup, targetGroup);
    }

    function cannotDragSelectionToBecomeOrderedSisterOf(targetGroup) {
        return !canDragSelectionToBecomeOrderedSisterOf(targetGroup, map.LEFT) && !canDragSelectionToBecomeOrderedSisterOf(targetGroup, map.RIGHT);
    }

    // handle drop on one of the three target regions (top, middle, bottom)
    // side is map.LEFT or map.RIGHT
    function handleGroupMouseDrop(event, dropTarget, side) {
        //console.log('dragAboveTarget.mouseDrop, target: ' + dropTarget + ', part: ' + dropTarget .part + ', show: ' + show);
        if (side !== null && canDragSelectionToBecomeOrderedSisterOf(dropTarget.part, side, true)) {
            map.addSelectedThingAsOrderedSisterOf(dropTarget.part, side);
        } else if (canDragSelectionToBecomeSistersOf(dropTarget.part, true)) {
            map.addSelectedThingsAsSistersOf(dropTarget.part);
        } else if (canDragSelectionToBecomeChildrenOf(dropTarget.part, true)) {
            map.addSelectedThingsAsChildrenOf(dropTarget.part);
        }
    }

    // when to show the R-thing knob on a link
    function showKnob(link) {
        return link == map.ui().mouseOverLink;
    }

    // ---------------- components for main group template ------------------

    function dFlagMarker() {
        return mk(go.Shape, new go.Binding('fill', '', function (obj) {
            return obj.data.dflag ? '#000' : null;
        }).ofObject(), {
            name: "dflag",
            position: new go.Point(0, 0),
            desiredSize: new go.Size(18, 18),
            geometry: go.Geometry.parse("F M0 1 L0 18 L18 0 L1 0z", true),
            cursor: "pointer",
            pickable: false,
            stroke: null
        });
    }

    // "D" corner (top left, red)
    function cornerD() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showDCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: "cornerD",
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            opacity: 0
        }, mk(go.Shape, {
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            geometry: go.Geometry.parse("F M0 1 L0 50 L50 0 L1 0z", true),
            fill: colorD,
            stroke: null,
            cursor: 'pointer',
            click: function click(event, target) {
                //console.log('click, control:' + event.control + ', alt:' + event.alt + ', meta:' + event.meta);
                if (event.alt) {
                    // NB: a side effect of this will be to select just this group,
                    // which would not happen otherwise via control-click
                    map.getPerspectives().setDEditorThing(target.part);
                } else {
                    // handle single or double click
                    map.ui().handleCornerClick("D", target.part);
                }
            },
            contextClick: function contextClick(event, target) {
                //console.log('contextClick:' + event);
                map.toggleDFlag(target.part);
            }
        }), mk(go.TextBlock, {
            text: "D",
            stroke: "white",
            font: '9px sans-serif',
            position: new go.Point(12, 15),
            pickable: false
        }));
    }

    // "S" corner (bottom left, green)
    function cornerS() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showSCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: "cornerS",
            position: new go.Point(0, 50),
            desiredSize: new go.Size(50, 50),
            opacity: 0
        }, mk(go.Shape, {
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            geometry: go.Geometry.parse("F M0 0 L0 49 L1 50 L50 50z", true),
            fill: colorS,
            stroke: null,
            cursor: 'pointer',
            click: function click(event, target) {
                // handle single or double click
                map.ui().handleCornerClick("S", target.part);
            }
        }),
        // expansion indicator
        mk(go.Shape, new go.Binding('position', '', function (obj) {
            return obj.isSubGraphExpanded ? new go.Point(4, 43) : new go.Point(5, 38);
        }).ofObject(), new go.Binding('angle', '', function (obj) {
            return obj.isSubGraphExpanded ? 90 : 0;
        }).ofObject(), {
            desiredSize: new go.Size(5, 10),
            geometry: go.Geometry.parse("F M0 0 L5 5 L0 10z", true),
            fill: "#333",
            stroke: null,
            cursor: 'pointer',
            pickable: false
        }), mk(go.TextBlock, {
            text: "S",
            stroke: "white",
            font: '9px sans-serif',
            position: new go.Point(12, 28),
            pickable: false
        }));
    }

    // show only when system is collapsed
    function sCollapsedMarker() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return !showSCorner(obj) && obj.memberParts.count > 0 && !obj.isSubGraphExpanded;
        }).ofObject(), {
            position: new go.Point(5, 88),
            desiredSize: new go.Size(5, 10),
            geometry: go.Geometry.parse("F M0 0 L5 5 L0 10z", true),
            fill: '#333',
            stroke: null,
            cursor: 'pointer',
            pickable: false
        });
    }

    // "R" corner (bottom right, blue)
    function cornerR() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showRCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: "cornerR",
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            opacity: 0
        }, mk(go.Shape, {
            name: "cornerRShape",
            // NB: this corner is done differently from the others:
            // 1. the overall shape is the size of the whole square, so the port falls in the middle instead of the corner;
            // 2. the geometry traces around the edges of the whole square, because otherwise the link line will
            //    show inside the main square if it's crossing one of the other 3 quadrants
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            geometry: go.Geometry.parse("F" + "M0 0 L0 100 " + // top left to bottom left
            "L99 100 L100 99 L 100 0 " + // bottom/right sides (round bottom right corner)
            "L 0 0 L 100 0 " + // back to top left then top right
            "L 100 50 L 50 100 " + // to midpoint of right side, midpoint of bottom side
            "L0 100z", // bottom left, return home
            true),
            fill: colorR,
            stroke: null,
            cursor: 'pointer',

            portId: "R",
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: true,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: true,
            click: function click(event, target) {
                // handle single or double click
                map.ui().handleCornerClick("R", target.part);
            }
        }), mk(go.TextBlock, {
            text: "R",
            stroke: "white",
            font: '9px sans-serif',
            pickable: false,
            position: new go.Point(82, 78)
        }));
    }

    function attachmentPaperClip() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return obj.data.attachments !== null && obj.data.attachments !== undefined && obj.data.attachments.length > 0;
        }).ofObject(), new go.Binding('geometry', '', function (obj) {
            return go.Geometry.parse(paperclipSvgPath, true);
        }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
            return new go.Size(512, 512); // NB: the two icons don't scale to the same proportions for some reason - ??
        }).ofObject(), {
            position: new go.Point(46, 85),
            scale: 0.02,
            stroke: '#000',
            fill: '#000',
            click: function click(event, target) {
                //console.log('clip clicked');
                map.ui().toggleTab(map.ui().TAB_ID_ATTACHMENTS);
            }
        });
    }

    function pEyeball() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return map.getPerspectives().isPerspectivePoint(obj);
        }).ofObject(), new go.Binding('geometry', '', function (obj) {
            return go.Geometry.parse(map.pIsExpanded(obj) ? eyeSvgPath : eyeBlockedSvgPath, true);
        }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
            return new go.Size(512, map.pIsExpanded(obj) ? 440 : 512); // NB: the two icons don't scale to the same proportions for some reason - ??
        }).ofObject(), {
            position: new go.Point(87, 4),
            scale: 0.02,
            stroke: '#000',
            fill: '#000',
            pickable: false
        });
    }

    // P expansion indicator - this shows when the P corner is not visible, and only if the thing is a perspective point
    function pointMarker() {
        return pEyeball();
    }

    // P view indicator
    function viewMarker() {
        return mk(go.Shape, "Border", new go.Binding('visible', '', function (obj) {
            return true;
        }).ofObject(), new go.Binding('fill', '', function (obj) {
            return getViewMarkerFill(obj);
        }).ofObject(), {
            position: new go.Point(0, 0),
            height: 18,
            width: 100,
            stroke: null
        });
    }

    function getViewMarkerFill(obj) {
        var weight = map.getPerspectives().getPerspectiveViewWeight(obj);

        if (weight == 3) {
            return colorPDark;
        } else if (weight == 2) {
            return colorP;
        } else if (weight == 1) {
            return colorPLight;
        } else {
            return "transparent";
        }
    }

    // "P" corner (top right, orange)
    function cornerP() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showPCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: "cornerP",
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            opacity: 0
        }, mk(go.Shape, {
            name: "cornerPShape",
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            // NB: this geometry covers the whole square; see note above for cornerR
            geometry: go.Geometry.parse("F" + "M0 0 L0 100 L100 100" + // top left to bottom left to bottom right
            "L100 1 L99 0 L0 0" + // right/top sides (round top right corner)
            "L 50 0 L 100 50 " + // to midpoint of top side, midpoint of right side
            "L100 100 0 100z", // bottom right, bottom left, return home
            true),

            fill: colorP,
            stroke: null,
            cursor: 'pointer',

            portId: "P",
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: false,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: false,
            toMaxLinks: 1,
            click: function click(event, target) {
                // handle single or double click
                map.ui().handleCornerClick("P", target.part);
            }
        }), pEyeball(), // P expansion indicator
        mk(go.TextBlock, {
            text: "P",
            stroke: "white",
            font: '9px sans-serif',
            pickable: false,
            position: new go.Point(81, 15)
        }));
    }

    function mainBorder() {
        return mk(go.Shape, "Border", new go.Binding('stroke', '', getGroupSelectionStroke).ofObject(), new go.Binding('strokeWidth', '', getGroupSelectionStrokeWidth).ofObject(), {
            name: "mainarea",
            position: new go.Point(0, 0),
            height: 100,
            width: 100,
            fill: null,
            //portId: "",
            cursor: "pointer",
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: true,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: true
        });
    }

    // --------- handlers for mouse drag/drop actions on groups, which need to be replicated on different target parts -------

    // position is map.LEFT, null, or map.RIGHT
    function getGroupMouseDragEnterHandler(position) {
        return function (event, target, obj2) {
            //console.log('mouseDragEnter, e.dp: ' + event.documentPoint + ', target.part: ' + target.part + ', target bounds: ' + target.actualBounds);
            map.ui().dragTargetGroup = target.part;
            map.ui().dragTargetPosition = position;
            map.getDiagram().updateAllTargetBindings();
        };
    }

    var groupMouseDragLeaveHandler = function groupMouseDragLeaveHandler(event, target, obj2) {
        map.ui().dragTargetGroup = null;
        map.ui().dragTargetPosition = null;
        map.getDiagram().updateAllTargetBindings();
    };

    function getGroupMouseDropHandler(position) {
        return function (event, dropTarget) {
            handleGroupMouseDrop(event, dropTarget, position);
        };
    }

    var groupClickHandler = function groupClickHandler(event, target) {
        // handle single or double click
        map.ui().handleCornerClick("", target);
    };

    // --------------- targets for dragging to D or S -----------------

    function dragAboveTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(map.LEFT),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(map.LEFT),
            click: groupClickHandler
        },
        // drag target region
        mk(go.Shape, "Rectangle", {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            cursor: "pointer",
            stroke: null,
            fill: 'transparent'
        }),
        // drag indicator bar
        mk(go.Shape, "Border", new go.Binding('visible', '', function (obj) {
            return canDragSelectionToBecomeOrderedSisterOf(obj.part, map.LEFT, false);
        }).ofObject(), {
            position: new go.Point(0, 0),
            height: 10,
            width: 100,
            stroke: null,
            fill: '#000'
        }));
    }

    function dragIntoTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 25),
            height: 50,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(null),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(null),
            click: groupClickHandler
        }, mk(go.Shape, "Rectangle", {
            position: new go.Point(0, 0),
            height: 50,
            width: 100,
            cursor: "pointer",
            stroke: null,
            fill: 'transparent'
        }));
    }

    function dragBelowTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 75),
            height: 25,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(map.RIGHT),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(map.RIGHT),
            click: groupClickHandler
        },
        // drag target region
        mk(go.Shape, "Rectangle", {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            cursor: "pointer",
            stroke: null,
            fill: 'transparent'
        }),
        // drag indicator bar
        mk(go.Shape, "Border", new go.Binding('visible', '', function (obj) {
            return canDragSelectionToBecomeOrderedSisterOf(obj.part, map.RIGHT, false);
        }).ofObject(), {
            position: new go.Point(0, 15),
            height: 10,
            width: 100,
            stroke: null,
            fill: '#000'
        }));
    }

    // Returns the TextBlock for the group title, for use in the main group template, inside the box.
    function groupInternalTextBlock() {
        return mk(go.Panel, go.Panel.Horizontal, {
            alignment: go.Spot.Left,
            alignmentFocus: go.Spot.Right,
            position: new go.Point(0, -50),
            desiredSize: new go.Size(100, 100)
        }, mk(go.TextBlock, {
            width: 80,
            margin: 10,
            alignment: go.Spot.Left,
            alignmentFocus: go.Spot.Right,
            //alignment: go.Spot.Center,
            //textAlign: 'center',
            cursor: "move",
            font: '14px sans-serif',
            isMultiline: true,
            wrap: go.TextBlock.WrapDesiredSize,
            mouseDragEnter: getGroupMouseDragEnterHandler(null),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(null),
            click: groupClickHandler,
            contextClick: function contextClick(event, target) {
                if (event.control) {
                    //console.log(groupInfo(target.part));
                }
            }
        }, new go.Binding("text", "text").makeTwoWay(), new go.Binding("visible", "", function (group) {
            // always show text inside box for R-things, because external text will throw off layout
            return map.getLayouts().isNotWithinInventoryLayout(group) || map.getLayouts().isRThingWithinInventoryLayout(group);
        })));
    }

    // Returns a TextBlock for the group title, for use in the main group template, on the left or right.
    // visibleFn is a callback to be bound to the visibility attribute of the TextBlock.
    // textAlign is 'left' or 'right'.
    function groupExternalTextBlock(visibleFn, textAlign) {
        return mk(go.TextBlock, new go.Binding("text", "text").makeTwoWay(), new go.Binding("visible", "", visibleFn).ofObject(), new go.Binding("scale", "", map.getLayouts().getExternalTextScale).ofObject(), {
            name: 'externaltext-' + textAlign, // NB: this screws up layouts for some reason - ??
            textAlign: textAlign,
            margin: 5,
            font: '14px sans-serif',
            isMultiline: true,
            click: groupClickHandler
        });
    }

    // -------------- group/Thing template --------------------

    this.groupTemplate = mk(go.Group, go.Panel.Vertical, new go.Binding("layout", "layout", function (layoutName) {
        return map.getLayouts().getLayout(layoutName);
    }), new go.Binding("movable", "", function (obj) {
        return !obj.isLinkLabel;
    }).ofObject(), new go.Binding("isSubGraphExpanded", "sExpanded"),
    // dim the thing if it's being dragged over another thing (drop to sister/child)
    new go.Binding('opacity', '', function (obj) {
        return obj.isSelected && map.ui().dragTargetGroup ? 0.25 : 1;
    }).ofObject(), {
        locationObjectName: "mainpanel",
        locationSpot: go.Spot.TopLeft,
        selectionAdorned: false,
        isSubGraphExpanded: true,
        layerName: 'Foreground',
        // highlight corners
        mouseEnter: function mouseEnter(event, target, obj2) {
            map.ui().mouseOverGroup = target;
            map.getDiagram().updateAllTargetBindings();
        },
        // unhighlight corners
        mouseLeave: function mouseLeave(event, target, obj2) {
            map.ui().mouseOverGroup = null;
            map.getDiagram().updateAllTargetBindings();
        }
        // containingGroupChanged: function(part, oldgroup, newgroup) {
        //     map.getDiagram().model.setDataProperty(part.data, 'level', map.computeLevel(part));
        //     //part.updateTargetBindings();  
        // }
    }, mk(go.Panel, go.Panel.Horizontal, groupExternalTextBlock(map.getLayouts().showLeftTextBlock, 'right'), mk(go.Panel, go.Panel.Position, {
        name: "mainpanel"
    }, new go.Binding("scale", "", map.getLayouts().getScale).ofObject(),
    // drag area
    mk(go.Shape, "Rectangle", {
        name: "dragarea",
        position: new go.Point(0, 0),
        width: 100,
        height: 100,
        fill: self.groupFillColor,
        stroke: null,
        cursor: "move",
        // show debug info
        contextClick: function contextClick(event, target) {
            if (event.control) {
                //console.log(groupInfo(target.part));
            }
        }
    }), mk(go.Panel, go.Panel.Position, viewMarker(), dragAboveTarget(), dragIntoTarget(), dragBelowTarget(),
    //groupInternalTextBlock(),
    cornerD(), dFlagMarker(), cornerS(), sCollapsedMarker(), cornerR(), pointMarker(), cornerP(), attachmentPaperClip(), mainBorder())), groupExternalTextBlock(map.getLayouts().showRightTextBlock, 'left')), mk(go.TextBlock, {
        width: 80,
        margin: 10,
        alignment: go.Spot.Left,
        alignmentFocus: go.Spot.Right,
        _isNodeLabel: true,
        editable: true,
        //alignment: go.Spot.Center,
        //textAlign: 'center',
        cursor: "move",
        font: '14px sans-serif',
        isMultiline: true,
        wrap: go.TextBlock.WrapDesiredSize,
        mouseDragEnter: getGroupMouseDragEnterHandler(null),
        mouseDragLeave: groupMouseDragLeaveHandler,
        mouseDrop: getGroupMouseDropHandler(null),
        click: groupClickHandler,
        contextClick: function contextClick(event, target) {
            if (event.control) {
                //console.log(groupInfo(target.part));
            }
        }
    }, new go.Binding("text", "text").makeTwoWay(), new go.Binding("visible", "", function (group) {
        // always show text inside box for R-things, because external text will throw off layout
        return map.getLayouts().isNotWithinInventoryLayout(group) || map.getLayouts().isRThingWithinInventoryLayout(group);
    })),
    // the placeholder normally holds the child nodes, but we just use a dummy placeholder
    mk(go.Shape, {
        name: "placeholder",
        fill: "transparent",
        stroke: null,
        desiredSize: new go.Size(0, 0)
    }));

    // ------------------- link template ---------------------------

    this.shapes = ['to', 'from', 'toFrom', 'noArrows'];

    this.getNextRShape = function () {
        var current = self._currentRShape;
        var next = self.shapes[0];
        if (current) {
            var idx = self.shapes.indexOf(current) + 1;
            if (idx >= self.shapes.length) {
                idx = 0;
            }
            next = self.shapes[idx];
        }
        self._currentRShape = next;
        return next;
    };

    this.linkTemplate = mk(go.Link, {
        selectionAdorned: false,
        layerName: '',
        //routing: go.Link.Orthogonal,
        relinkableFrom: true,
        relinkableTo: true,
        smoothness: 1.0,
        adjusting: go.Link.Stretch,
        reshapable: true,
        mouseEnter: function mouseEnter(event, target, obj2) {
            map.ui().mouseOverLink = target;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseLeave: function mouseLeave(event, target, obj2) {
            map.ui().mouseOverLink = null;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDragEnter: function mouseDragEnter(event, target, dragObject) {
            map.ui().mouseOverLink = target;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDragLeave: function mouseDragLeave(event, dropTarget, dragObject) {
            map.ui().mouseOverLink = null;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDrop: function mouseDrop(event, dropTarget) {
            var parts = map.getDiagram().selection;
            if (parts && parts.count == 1 && parts.first() instanceof go.Group) {
                map.addThingAsRThing(parts.first(), dropTarget);
            }
        },
        click: function click(event, target) {
            var shape = self.getNextRShape();
            map.ui().setSelectedRelationshipsDirection(shape);
        },
        doubleClick: function doubleClick(event, target) {
            map.createRThing(target);
        },
        contextClick: function contextClick(event, target) {
            if (event.control) {
                //console.log(linkInfo(target));
            }
        }
    }, new go.Binding("points").makeTwoWay(), new go.Binding("curviness", "curviness"), mk(go.Shape, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding("strokeWidth", "", map.getLayouts().getLinkStrokeWidth).ofObject(), {
        name: "LINKSHAPE"
    }),
    // show to/from arrowheads based on link "type" attribute
    mk(go.Shape, {
        fromArrow: "Backward"
    }, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding("scale", "", map.getLayouts().getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t == 'from' || t == 'toFrom';
    })), mk(go.Shape, {
        toArrow: "Standard"
    }, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding("scale", "", map.getLayouts().getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t == 'to' || t == 'toFrom';
    })), mk(go.Panel, go.Panel.Auto, // link label "knob"
    new go.Binding('opacity', '', function (obj) {
        return showKnob(obj) ? 1 : 0;
    }).ofObject(), new go.Binding("scale", "", map.getLayouts().getArrowheadScale).ofObject(), mk(go.Shape, {
        figure: "Ellipse",
        fill: colorD,
        stroke: colorD,
        width: 12,
        height: 12
    })));

    this.pLinkTemplate = mk(go.Link, {
        curve: go.Link.Bezier,
        adjusting: go.Link.Stretch,
        reshapable: true
    }, new go.Binding("points").makeTwoWay(), new go.Binding("curviness", "curviness"), new go.Binding('opacity', '', function (obj) {
        return self.showPLink(obj) ? 1 : 0;
    }).ofObject(), {
        selectionAdorned: false,
        layerName: 'Background', // make P links fall behind R links
        routing: go.Link.Normal,
        curve: go.Link.Bezier,
        adjusting: go.Link.Stretch,
        reshapable: true,
        contextClick: function contextClick(event, target) {
            if (event.control) {
                //console.log(linkInfo(target));
            }
        }
    }, mk(go.Shape, new go.Binding("strokeWidth", "", map.getLayouts().getLinkStrokeWidth).ofObject(), {
        name: "LINKSHAPE",
        stroke: colorPLight,
        fill: colorPLight
    }), mk(go.Shape,
    // new go.Binding('visible', '', function(obj) {
    //     return (self.showPDot(obj) ? 1 : 0);
    // }).ofObject(),
    new go.Binding("scale", "", map.getLayouts().getArrowheadScale).ofObject(), {
        toArrow: "Circle",
        stroke: colorPLight,
        fill: colorPLight
    }));

    this.dLinkTemplate = mk(go.Link, {
        selectable: false
    }, mk(go.Shape, {
        name: "LINKSHAPE",
        stroke: null
    }));

    // ----------- temporary link/node templates, for use when dragging to create R/P lines -------------

    // define initial temporary link templates - these will be modified when handlePortTargeted is called
    this.setTemporaryLinkTemplates = function (tool) {
        tool.temporaryLink = makeTemporaryLinkTemplate();
        tool.temporaryFromNode = makeTemporaryNodeTemplate();
        tool.temporaryToNode = makeTemporaryNodeTemplate();
    };

    function makeTemporaryLinkTemplate() {
        return mk(go.Link, {
            layerName: "Tool",
            curve: go.Link.Bezier
        }, mk(go.Shape, {
            name: 'linkshape',
            strokeWidth: 2
        }));
    }

    function makeTemporaryNodeTemplate() {
        return mk(go.Group, {
            layerName: "Tool"
        }, mk(go.Shape, "Border", {
            name: 'border',
            strokeWidth: 3,
            fill: null
        }));
    }

    // change color and portId of temporary link templates based on the type of link being created/relinked
    this.handlePortTargeted = function (tool, realnode, realport, tempnode, tempport, toend) {
        // //console.log('portTargeted, realport: ' + (realport ? realport.name : '') + ', tempport: ' + (tempport ? tempport.name : '')
        //     + ', originalFromPort: ' + (ltool.originalFromPort ? ltool.originalFromPort.name : '') + ', originalToPort: ' + ltool.originalToPort);

        var linkShape = tool.temporaryLink.findObject('linkshape');
        var fromBorder = tool.temporaryFromNode.findObject('border');
        var toBorder = tool.temporaryToNode.findObject('border');

        if (tool.originalFromPort && tool.originalFromPort.name == 'cornerPShape') {
            linkShape.stroke = colorP;
            fromBorder.stroke = colorP;
            toBorder.stroke = colorP;
            fromBorder.portId = 'P';
            toBorder.portId = 'P';
        } else if (tool.originalFromPort && tool.originalFromPort.name == 'cornerRShape') {
            linkShape.stroke = colorR;
            fromBorder.stroke = colorR;
            toBorder.stroke = colorR;
            fromBorder.portId = 'R';
            toBorder.portId = 'R';
        }
        tempnode.scale = map.getLayouts().getScale(realnode);
    };

    // prevent duplicate 'P' links in the same direction between the same two things
    this.validateLink = function (fromNode, fromPort, toNode, toPort) {
        // the P port is on top of the R port, so both P and R links get the toPort set to R by default.
        if (fromPort.portId == 'P') {
            // NB: findLinksTo would be simpler, but it doesn't seem to work... (?)
            var pLinks = toNode.findLinksBetween(fromNode, 'P', 'P');
            //console.log('validateLink, pLinks from ' + fromNode + ':' + fromPort + ' to ' + toNode + ':' + toPort + ' = ' + pLinks.count);
            if (pLinks.count) {
                while (pLinks.next()) {
                    var pLink = pLinks.value;
                    if (pLink.fromNode == fromNode && pLink.toNode == toNode) {
                        return false;
                    }
                }
            }
        }
        return true;
    };

    // ------------------- slide node template ----------------------

    function createSlideResizeHandle(alignment) {
        return mk(go.Shape, new go.Binding("desiredSize", "", function (obj) {
            var slide = obj.adornedObject;
            var size = Math.min(slide.width, slide.height) * .05;
            return new go.Size(size, size);
        }).ofObject(), {
            alignment: alignment,
            cursor: "col-resize",
            fill: 'rgba(251,170,54,1)',
            stroke: null
        });
    }

    this.slideTemplate = mk(go.Node, go.Panel.Auto,
    // NB: unlike groups, slides just use a normal 2-way location binding
    new go.Binding("location", "loc", go.Point.parse).makeTwoWay(go.Point.stringify), new go.Binding("width", "width").makeTwoWay(), new go.Binding("height", "height").makeTwoWay(), new go.Binding("visible", "", function (obj) {
        return obj.data.hasRegion && map.ui().currentTabIs(map.ui().TAB_ID_PRESENTER) && !map.getPresenter().isPresenting && !map.getPresenter().isCreatingThumbnail && map.getPresenter().currentSlideIndex == obj.data.index;
    }).ofObject(), {
        locationSpot: go.Spot.TopLeft,
        selectionAdorned: false,
        resizable: true,
        resizeAdornmentTemplate: mk(go.Adornment, "Spot", mk(go.Placeholder), // takes size and position of adorned object                   
        createSlideResizeHandle(go.Spot.TopLeft), createSlideResizeHandle(go.Spot.Top), createSlideResizeHandle(go.Spot.TopRight), createSlideResizeHandle(go.Spot.Right), createSlideResizeHandle(go.Spot.BottomRight), createSlideResizeHandle(go.Spot.Bottom), createSlideResizeHandle(go.Spot.BottomLeft), createSlideResizeHandle(go.Spot.Left)),
        padding: 0,
        contextClick: function contextClick(event, target) {
            //console.log(nodeInfo(target.part));
        }
    }, mk(go.Shape, "Rectangle", {
        name: "slideborder",
        fill: 'rgba(251,170,54,.1)',
        stroke: null
    }));

    // ------------------- export footer ----------------------

    // NB: this is not a template per se, in that it is added to the diagram
    // statically, rather than being bound to something in the model.
    // But we put it here because it is about creating parts and stuff.

    function createExportFooter() {
        return mk(go.Node, go.Panel.Spot, {
            layerName: 'Foreground',
            location: new go.Point(0, 0),
            scale: 1,
            opacity: 0,
            pickable: false,
            selectable: false
        }, mk(go.Shape, "Rectangle", {
            name: "rectangle",
            height: 60,
            fill: null,
            stroke: null
        }), mk(go.Picture, {
            source: 'metamap/assets/img/metamap-logo-50.png',
            alignment: go.Spot.TopLeft,
            alignmentFocus: go.Spot.TopLeft,
            width: 195,
            height: 50
        }), mk(go.TextBlock, {
            text: "metamap.cabreraresearch.org",
            alignment: go.Spot.BottomLeft,
            alignmentFocus: go.Spot.BottomLeft,
            width: 200
        }), mk(go.TextBlock, {
            name: "mapTitle",
            text: "",
            textAlign: "right",
            alignment: go.Spot.TopRight,
            alignmentFocus: go.Spot.TopRight,
            width: 300
        }), mk(go.TextBlock, {
            name: "authorName",
            text: "",
            textAlign: "right",
            alignment: go.Spot.BottomRight,
            alignmentFocus: go.Spot.BottomRight,
            width: 300
        }));
    }

    // creates or refreshes the footer logo/text that is displayed in the image export
    this.addExportFooter = function () {
        if (!_exportFooter) {
            _exportFooter = createExportFooter();
            map.getDiagram().add(_exportFooter);
        }
    };

    this.showExportFooter = function () {
        var rect = map.computeMapBounds();
        // put footer at least 100 px below bottom of map; make it at least 500px wide
        var x = rect.x;
        var y = rect.y + rect.height + Math.max(100, rect.height / 5);
        var w = Math.max(500, rect.width);
        //console.log('showExportFooter, bounds rect: ' + rect + ', w: ' + w);
        _exportFooter.location = new go.Point(x, y);
        _exportFooter.findObject("rectangle").width = w;
        _exportFooter.findObject("mapTitle").text = "Map Title: " + $scope.mapTitle;
        _exportFooter.findObject("authorName").text = "Author: " + $scope.userName;
        _exportFooter.opacity = 1;
        _exportFooter.invalidateLayout();
    };

    this.hideExportFooter = function () {
        _exportFooter.opacity = 0;
    };
};

},{}],33:[function(require,module,exports){
'use strict';

SandbankEditor.Tests = function ($scope, map) {

    var self = this;

    this.TEST_STATUS_NOT_RUN = 'not-run';
    this.TEST_STATUS_PASSED = 'passed';
    this.TEST_STATUS_EXAMINE = 'examine';
    this.TEST_STATUS_FAILED = 'failed';

    this.currentTest = null;

    this.init = function () {};

    this.runTest = function (name) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var test = _.findWhere(self.tests, { name: name });
            test.status = self.TEST_STATUS_NOT_RUN;
            self.currentTest = test;
            diagram.clear();
            test.run(diagram);
            if (test.check === undefined) {
                test.status = self.TEST_STATUS_EXAMINE;
            } else {
                test.failReason = test.check(diagram);
                if (_.isString(test.failReason)) {
                    test.status = self.TEST_STATUS_FAILED;
                } else {
                    test.status = self.TEST_STATUS_PASSED;
                }
            }
        });
    };

    this.createGeneratorTest = function (name, mapItFn) {
        return {
            name: 'ThinkQ: ' + name,
            run: function run(diagram) {
                self.runGeneratorTest(mapItFn);
            }
        };
    };

    this.runGeneratorTest = function (mapItFn) {
        var diagram = map.getDiagram();
        var generator = map.getGenerator();
        generator.concept1 = 'CONCEPT 1';
        generator.concept2 = 'CONCEPT 2';
        generator.mapIt(mapItFn);
    };

    this.tests = [
    // {
    //     name: '[Failed test]',
    //     run: function(diagram) {
    //     },
    //     check: function(diagram) {
    //         return 'This test failed - this is only a test.';
    //     }
    // },
    {
        name: 'Reset map',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            map.refresh();
        },
        check: function check(diagram) {
            return diagram.findTopLevelGroups().count == 1;
        }
    }, {
        name: 'Create Sister',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createSister(group);
        },
        check: function check(diagram) {
            return diagram.findTopLevelGroups().count == 2;
        }
    }, {
        name: 'Create R to Sister',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createRToSister(group);
        }
    }, {
        name: 'Create Child',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createChild(group);
        }
    }, {
        name: 'Create 3 children and switch to freehand',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createChild(group);
            map.createChild(group);
            map.createChild(group);
            // diagram.model.setDataProperty(group.data, 'layout', 'freehand');
            group.isSelected = true;
            map.ui().setSelectedThingsLayout('freehand');
        },
        check: function check(diagram) {
            if (diagram.findTopLevelGroups().count != 1) {
                return 'Top level group count is not 1';
            }
            var group = diagram.findTopLevelGroups().first();
            if (group.memberParts.count != 3) {
                return 'Parent data children is not 3';
            }
            return true;
        }
    }, {
        name: 'Drag RTBB into outline S',
        instructions: 'Drag the preselected RTBB into Whole (S), then do an Undo',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createThing(250, 0, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createThing(500, 0, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB into freehand S',
        instructions: 'Drag the preselected RTBB into Whole (S) and examine layout',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var oldPart1 = map.createChild(whole, 'Old Part 1');
            var part1 = map.createThing(250, 30, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createThing(500, 70, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Create RTBB in outline and switch to freehand',
        instructions: 'Check auto-generated freehand layout of parts',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            whole.isSelected = true;
            map.ui().setSelectedThingsLayout('freehand');
            //diagram.model.setDataProperty(whole.data, 'layout', 'freehand');
            //map.refresh();
            diagram.clearSelection();
        }
    },

    // create RTBB in freehand, add part in outline, switch back to freehand
    // create RTBB in freehand, drag in part in outline, switch back to freehand

    {
        name: 'Drag RTBB out of S',
        instructions: 'Drag the preselected RTBB onto Whole (D)',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of freehand S',
        instructions: 'Drag the preselected RTBB onto Whole (D)',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1', 10, 120);
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2', 110, 150);
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of 2nd level S',
        instructions: 'Drag the preselected RTBB onto Whole (D) of Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var subpart12 = map.createChild(part1, 'Subpart 1.2');
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            var part2 = map.createChild(whole, 'Part 2');
            map.refresh();
            diagram.clearSelection();
            subpart11.isSelected = true;
            subpart12.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of 2nd level freehand S',
        instructions: 'Drag the preselected RTBB onto Whole (D) of Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1', 0, 120);
            var subpart11 = map.createChild(part1, 'Subpart 1.1', 10, 180);
            var subpart12 = map.createChild(part1, 'Subpart 1.2', 20, 220);
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            var part2 = map.createChild(whole, 'Part 2', 0, 300);
            map.refresh();
            diagram.clearSelection();
            subpart11.isSelected = true;
            subpart12.isSelected = true;
        }
    }, {
        name: 'Rchannel',
        instructions: 'Note that R-things are in part-whole relation',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole 1', 'right');
            var child11 = map.createChild(thing1, 'Part 1.1');
            var thing2 = map.createThing(250, 0, 'Whole 2');
            var child21 = map.createChild(thing2, 'Part 2.1');

            var rThing1 = map.createRLinkWithRThing(thing1, thing2, 'Rthing 1-2');
            var rThing11 = map.createRLinkWithRThing(child11, child21, 'Rthing 1.1 - 2.1');
            //console.log('Rchannel, rThing11: ' + rThing11);

            diagram.clearSelection();
            rThing11.isSelected = true;
            map.addSelectedThingsAsChildrenOf(rThing1);
        }
    }, {
        name: 'Disappearing parts on new idea creation',
        instructions: 'Create a new top-level idea - Part 1.1 should not disappear temporarily',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole 1', 'right');
            var child11 = map.createChild(thing1, 'Part 1.1');
        }
    }, {
        name: 'Drag top-level thing into freehand system',
        instructions: 'Drag New Part into Whole; examine resulting part layout',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole', 'freehand');
            var child11 = map.createChild(thing1, 'Part');
            var newPart = map.createThing(250, 0, 'New Part', 'left');
        }
    }, {
        name: 'Drag top-level RTBB into freehand system',
        instructions: 'Drag preselected RTBB into Whole; examine resulting part layout',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole', 'freehand');
            var child11 = map.createChild(thing1, 'Part');
            var bar = map.createThing(250, 0, 'Bar', 'left');
            var bell = map.createThing(500, 0, 'Bell', 'left');
            var rThing = map.createRLinkWithRThing(bar, bell, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            bar.isSelected = true;
            bell.isSelected = true;
        }
    }, {
        name: 'Drag R-thing square into freehand system',
        instructions: 'Drag preselected square into Whole; examine resulting part layout',
        run: function run(diagram) {
            var whole = map.createThing(-100, 50, 'Whole', 'freehand');
            var child11 = map.createChild(whole, 'Part');
            var part11 = map.createThing(250, 0, 'Part11', 'left');
            var part12 = map.createThing(500, 0, 'Part12', 'left');
            var part21 = map.createThing(250, 250, 'Part21', 'left');
            var part22 = map.createThing(500, 250, 'Part22', 'left');

            var rThing11_12 = map.createRLinkWithRThing(part11, part12, 'Rthing 11-12');
            var rThing11_21 = map.createRLinkWithRThing(part11, part21, 'Rthing 11-21');
            var rThing12_22 = map.createRLinkWithRThing(part12, part22, 'Rthing 12-22');
            var rThing21_22 = map.createRLinkWithRThing(part21, part22, 'Rthing 21-22');
            map.refresh();
            diagram.clearSelection();
            part11.isSelected = true;
            part12.isSelected = true;
            part21.isSelected = true;
            part22.isSelected = true;
        }
    }, {
        name: 'Drag R-thing square out of freehand system',
        instructions: 'Drag preselected square onto D of Whole; examine resulting layout',
        run: function run(diagram) {
            var whole = map.createThing(-100, 50, 'Whole', 'freehand');
            var child11 = map.createChild(whole, 'Part');
            var part11 = map.createChild(whole, 'Part11', 10, 190);
            var part12 = map.createChild(whole, 'Part12', 120, 190);
            var part21 = map.createChild(whole, 'Part21', 10, 300);
            var part22 = map.createChild(whole, 'Part22', 120, 300);

            var rThing11_12 = map.createRLinkWithRThing(part11, part12, 'Rthing 11-12');
            var rThing11_21 = map.createRLinkWithRThing(part11, part21, 'Rthing 11-21');
            var rThing12_22 = map.createRLinkWithRThing(part12, part22, 'Rthing 12-22');
            var rThing21_22 = map.createRLinkWithRThing(part21, part22, 'Rthing 21-22');
            map.refresh();
            diagram.clearSelection();
            part11.isSelected = true;
            part12.isSelected = true;
            part21.isSelected = true;
            part22.isSelected = true;
        }
    }, {
        name: 'Drag 2nd level part to D of parent',
        instructions: 'Drag Subpart 1.1 onto D of Part 1; it should appear below Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            map.refresh();
            diagram.clearSelection();
        }
    }, {
        name: 'Invisible R-thing in 2nd level of outline',
        instructions: 'R-thing between Subparts 1.1 and 1.2 should be visible',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var subpart12 = map.createChild(part1, 'Subpart 1.2');
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            rThing.desiredSize = new go.Size(30, 30);
            map.refresh();
            //console.log('rThing actualBounds: ' + rThing.actualBounds + ', scale: ' + rThing.scale + ', desiredSize: ' + rThing.desiredSize);
            //console.log('Whole desiredSize: ' + whole.desiredSize);
            diagram.clearSelection();
        }
    }, {
        name: 'R-thing between ideas in same location (error)',
        instructions: 'This should trigger an error',
        run: function run(diagram) {
            // try {
            var part1 = map.createThing(0, 0, 'Part 1', 'left');
            var part2 = map.createThing(0, 0, 'Part 2', 'left');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            // } catch(e) {
            //     alert(e.message);
            // }
        }
    },
    // {
    //     name: 'Fix bad R-thing leading to infinite loop',
    //     instructions: 'Map should display and not trigger infinite loop; model should be fixed so that r-thing is not Part 1.1 or Part 1.2',
    //     run: function(diagram) {
    //         var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
    //         var child11 = map.createChild(thing1, 'Part 1.1');
    //         var child12 = map.createChild(thing1, 'Part 1.2');
    //         var rThing = map.createRLinkWithRThing(child11, child12, 'Rthing');
    //         var rLink = rThing.labeledLink;
    //         rLink.data.labelKeys = [child11.data.key];
    //         map.checkModel();
    //         map.refresh();
    //     }
    // },
    {
        name: 'Drag to create R-line',
        instructions: 'Drag from the R-corner of Thing1 to Thing2; temporary drag line and square should be R-color; created line should be an R-line',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(100, 0, 'Thing2', 'freehand');
        }
    }, {
        name: 'Drag to create P-line',
        instructions: 'Drag from the P-corner of Thing1 to Thing2; temporary drag line and square should be P-color; created line should be a P-line',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(100, 0, 'Thing2', 'freehand');
        }
    }, {
        name: 'Relink from-port of R-line',
        instructions: 'Move the start of the R-link from Thing 1 to Thing 3; make sure it does not turn into a P-link',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(300, 0, 'Thing2', 'freehand');
            var thing3 = map.createThing(100, 200, 'Thing3', 'freehand');
            var rlink = map.createRLink(thing1, thing2);
        }
    }, {
        name: 'Relink to-port of R-line',
        instructions: 'Move the end of the R-link from Thing 2 to Thing 3; make sure it does not turn into a P-link',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(300, 0, 'Thing2', 'freehand');
            var thing3 = map.createThing(100, 200, 'Thing3', 'freehand');
            var rlink = map.createRLink(thing1, thing2);
        }
    }, {
        name: 'Showing parts of parts of a freehand whole',
        instructions: 'Whole, Part 1 and Subpart 1.1 should all be visible',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            map.refresh();
            diagram.clearSelection();
        }
    }

    // self.createGeneratorTest('WHAT_IS', map.getGenerator().WHAT_IS),
    // self.createGeneratorTest('PARTS_OF', map.getGenerator().PARTS_OF),
    // self.createGeneratorTest('PART_OF', map.getGenerator().PART_OF),
    // self.createGeneratorTest('PARTS_HAVE_PARTS', map.getGenerator().PARTS_HAVE_PARTS),
    // self.createGeneratorTest('POINT_FOR', map.getGenerator().POINT_FOR),
    // self.createGeneratorTest('HAS_MULTIPLE_PS', map.getGenerator().HAS_MULTIPLE_PS),
    // self.createGeneratorTest('R_TO', map.getGenerator().R_TO),
    // self.createGeneratorTest('R_EXISTS', map.getGenerator().R_EXISTS),
    // self.createGeneratorTest('WHAT_IS_R', map.getGenerator().WHAT_IS_R),
    // self.createGeneratorTest('DISTINGUISH_BETWEEN', map.getGenerator().DISTINGUISH_BETWEEN),
    // self.createGeneratorTest('IS_R_BETWEEN', map.getGenerator().IS_R_BETWEEN),
    // self.createGeneratorTest('CAN_BE_P', map.getGenerator().CAN_BE_P),
    // self.createGeneratorTest('MULTIPLE_PS_ARE', map.getGenerator().MULTIPLE_PS_ARE),
    // self.createGeneratorTest('P_PARTS', map.getGenerator().P_PARTS),
    // self.createGeneratorTest('COMPARE_CONTRAST', map.getGenerator().COMPARE_CONTRAST),
    // self.createGeneratorTest('R_PARTS', map.getGenerator().R_PARTS),
    // self.createGeneratorTest('PARTS_HAVE_RS', map.getGenerator().PARTS_HAVE_RS),
    // self.createGeneratorTest('PART_RS_EXIST', map.getGenerator().PART_RS_EXIST),
    // self.createGeneratorTest('PART_RS_ARE', map.getGenerator().PART_RS_ARE),
    // self.createGeneratorTest('WHAT_ABOUT', map.getGenerator().WHAT_ABOUT)

    // computePartsBounds

    // createRThing
    // addSelectedThingsAsChildrenOf
    // addSelectedThingAsOrderedSisterOf
    // addSelectedThingsAsSistersOf
    // addThingAsRThing
    // toggleDFlag
    // toggleSExpansion
    // togglePExpansion

    // presenter: select first slide and hit play; make sure first slide notes appear

    ];
};

},{}],34:[function(require,module,exports){
'use strict';

SandbankEditor.UI = function ($scope, $timeout, $http, $resource, $modal, $log, map) {

    var self = this;

    // ----------- tab ("slider") IDs - tabs are rendered in views/maps/_form --------------
    //this.TAB_ID_HISTORY = 'history-tab';
    this.TAB_ID_PRESENTER = 'presenter-tab';
    this.TAB_ID_ANALYTICS_MAP = 'analytics-tab-map';
    this.TAB_ID_ANALYTICS_THING = 'analytics-tab-thing';
    this.TAB_ID_PERSPECTIVES = 'perspectives-tab';
    this.TAB_ID_DISTINCTIONS = 'distinctions-tab';
    this.TAB_ID_ATTACHMENTS = 'attachments-tab';
    this.TAB_ID_GENERATOR = 'generator-tab';
    this.TAB_ID_STANDARDS = 'standards-tab';

    this.init = function () {};

    // ------------ editor options for map/user ----------

    var mapEditorOptions = {};

    var defaultEditorOptions = {
        // noArrows, to, from, toFrom
        defaultRelationshipDirection: 'noArrows',
        // left, right, stacked, freehand
        defaultThingLayout: 'left',
        // lines, spotlight, both
        perspectiveMode: 'lines'
    };

    // called when map is loaded to set stored options for map
    this.setMapEditorOptions = function (options) {
        mapEditorOptions = options;
    };

    // returns appropriate values from the user profile or the default options if options are not set for the map
    this.getMapEditorOptions = function () {
        var profileOptions = $scope.userProfile ? $scope.userProfile.editorOptions : null;
        var vals = [mapEditorOptions, profileOptions, defaultEditorOptions];
        mapEditorOptions = _.find(vals, function (val) {
            return !_.isEmpty(val);
        });
        return mapEditorOptions;
    };

    // saves default options for the user (map options are saved in autosave.js)
    function saveUserEditorOptions(options) {
        var data = {
            user: {
                editor_options: JSON.stringify(options)
            }
        };

        startSpinner();
        $http.put('/users/' + $scope.userId + '.json', data).then(function (response) {
            stopSpinner();
        }, function () {
            stopSpinner();
            $scope.profileEditStatus = 'Could not save editor options';
        });
    }

    // options modal

    $scope.editorOptions = new SandbankEditorOptions($scope, $http, $resource, $modal, $log);

    this.editOptions = function () {
        $scope.editorOptions.openModal(mapEditorOptions, function (options) {
            // onSaveDefaults
            saveUserEditorOptions(options);
        }, function (options) {
            // onUpdate
            mapEditorOptions = options;
            map.getAutosave().saveNow('edit_options');
        });
    };

    // ------------ state model ----------

    this.state = {};

    var defaultState = {
        showNavigator: false,
        currentTab: null,
        perspectivePointKey: null,
        distinctionThingKey: null
    };

    this.setStateData = function (data) {
        $scope.safeApply(function () {
            self.state = data || defaultState;
            //$scope.currentTab = self.state.currentTab;
        });
    };

    // TODO: Save state more frequently?? Currently it is only saved when autosave is triggered by other actions...

    this.getStateData = function () {
        return self.state;
    };

    // ----------- temporary state flags ------------

    this.zoomingToRegion = false;

    this.mouseOverGroup = null;
    this.mouseOverLink = null;

    this.dragTargetGroup = null;
    this.dragTargetPosition = null;

    this.helpTip = null;

    // ----------- handle bottom tabs ("sliders") -------------

    // in the following functions, ID is e.g. 'history-tab' (ID of one of the .bottom-tab's)

    // this is called by map.currentTabChanged, which is triggered by a $scope.$watch
    this.currentTabChanged = function (newValue, oldValue) {
        //console.log('ui, currentTabChanged: ' + newValue);
        self.state.currentTab = newValue;
    };

    this.currentTabIs = function (tabID) {
        return $scope.currentTab == tabID;
    };

    this.openTab = function (tabID) {
        $scope.safeApply(function () {
            $scope.currentTab = tabID;
        });
    };

    this.closeTab = function (tabID) {
        $scope.safeApply(function () {
            self.state.currentTab = null; // TODO: trigger autosave
            $scope.currentTab = null;
        });
    };

    this.disableTab = function (tabID) {
        // prevent opening other tabs when in P or D editor
        if ($scope.currentTab == self.TAB_ID_PERSPECTIVES || $scope.currentTab == self.TAB_ID_DISTINCTIONS) {
            return true;
        }
        return false;
    };

    this.toggleTab = function (tabID) {
        $scope.safeApply(function () {
            if ($scope.currentTab == tabID) {
                $scope.currentTab = null;
            } else if (!self.disableTab(tabID)) {
                $scope.currentTab = tabID;
            }
        });
    };

    this.toggleNavigator = function () {
        $scope.safeApply(function () {
            self.state.showNavigator = !self.state.showNavigator;
        });
    };

    this.toggleZoomingToRegion = function () {
        $scope.safeApply(function () {
            self.zoomingToRegion = !self.zoomingToRegion;
        });
    };

    // ----------------- zooming functions -------------------

    this.canZoomIn = function () {
        return map.getDiagram().scale < 32;
    };

    this.canZoomOut = function () {
        return map.getDiagram().scale > 0.25;
    };

    this.zoomIn = function () {
        var diagram = map.getDiagram();
        if (diagram.scale < 32) {
            var vb = diagram.viewportBounds.copy();
            diagram.scale = diagram.scale * 2;
            diagram.centerRect(vb);
        }
    };

    this.zoomOut = function () {
        var diagram = map.getDiagram();
        if (diagram.scale > 0.25) {
            var vb = diagram.viewportBounds.copy();
            diagram.scale = diagram.scale / 2;
            diagram.centerRect(vb);
        }
    };

    this.maybeZoomToRegion = function () {
        var diagram = map.getDiagram();
        // this flag is set by the toolbar button
        if (self.zoomingToRegion) {
            self.zoomingToRegion = false;
            //console.log('zoomToRegion, selection count: ' + diagram.selection.count);
            var rect = diagram.computePartsBounds(diagram.selection);
            diagram.zoomToRect(rect);
        }
        $scope.safeApply();
    };

    this.resetZoom = function () {
        var diagram = map.getDiagram();
        //var rect = diagram.computePartsBounds(diagram.nodes).copy();
        var rect = map.safeRect(map.computeMapBounds());
        //console.log('resetZoom, bounds: ' + rect);
        if (rect.width) {
            rect.inflate(rect.width / 5, rect.height / 5);
        }
        diagram.zoomToRect(rect);
        diagram.alignDocument(go.Spot.Center, go.Spot.Center);
        if (diagram.scale > 1) {
            diagram.scale = 1;
        }
    };

    // ------------ thing options (layout) ----------------

    this.getSelectedThingsOrDefaultLayout = function () {
        var sl = self.getSelectedThingsLayout();
        if (sl) {
            return sl;
        } else {
            return mapEditorOptions.defaultThingLayout;
        }
    };

    // returns a non-null value only if all selected items are groups with the same layout
    this.getSelectedThingsLayout = function () {
        var diagram = map.getDiagram();
        if (diagram === null || diagram.selection.count < 1) return null;

        var layout = null;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (!it.value instanceof go.Group) return null;
            var group = it.value;
            //console.log('getSelectedThingsLayout, it.value: ' + group);
            var groupLayout = group.data ? group.data.layout : null;
            if (layout !== null && groupLayout != layout) return null;
            layout = groupLayout;
        }
        //console.log('getSelectedThingsLayout: ' + layout);

        return layout;
    };

    // sets the layout of all selected things to the given layout
    this.setSelectedThingsLayout = function (layoutName) {
        var diagram = map.getDiagram();
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Group) {
                var group = it.value;
                diagram.model.setDataProperty(group.data, 'layout', layoutName);
                map.getLayouts().setDescendantLayouts(group, group.data.layout);
                map.refresh();
            }
        }
    };

    // ------------ relationship options (direction) ----------------

    this.getSelectedRelationshipsOrDefaultDirection = function () {
        var sd = self.getSelectedRelationshipsDirection();
        if (sd) {
            return sd;
        } else {
            return mapEditorOptions.defaultRelationshipDirection;
        }
    };

    // returns a non-null value only if all selected items are relationships with the same direction
    this.getSelectedRelationshipsDirection = function () {
        var diagram = map.getDiagram();
        if (diagram === null || diagram.selection.count < 1) return null;

        var type = null;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (!it.value instanceof go.Link) return null;
            var link = it.value;
            var linkType = link.data ? link.data.type : null;
            if (type !== null && linkType != type) return null;
            type = linkType;
        }

        return type;
    };

    // sets the direction of all selected relationships to the given direction
    this.setSelectedRelationshipsDirection = function (direction) {
        var diagram = map.getDiagram();
        //diagram.model.startTransaction("change relationship direction");
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Link) {
                //diagram.model.startTransaction("change link type");
                diagram.model.setDataProperty(it.value.data, 'type', direction);
                //diagram.model.commitTransaction("change link type");
            }
        }
        //diagram.commitTransaction("change relationship direction");
    };

    // ------- handle corner clicks and double clicks --------

    var _cornerClicked = null;
    var _cornerFunction = null;
    var _cornerTimeout = 300;

    this.handleCornerClick = function (corner, thing) {
        //console.log('handleCornerClick: corner = ' + corner + ', cornerClicked = ' + _cornerClicked);
        // assume it's a single click, and set handler
        _cornerFunction = getCornerFunction(corner, 1);
        // already clicked, so it's a double click; change handler
        if (_cornerClicked == corner) {
            _cornerFunction = getCornerFunction(corner, 2);
            //console.log('handleCornerClick: double click on ' + corner);
            return;
        }
        // remember that at least one click has happened for the current corner
        _cornerClicked = corner;

        // set timer to invoke whatever handler we have ready to go (unless another click happens within the interval)
        var timer = setTimeout(function () {
            // ding! invoke it
            if (_cornerFunction == self.showCornerTip) {
                _cornerFunction(thing, corner);
            } else {
                _cornerFunction(thing); // don't pass the corner arg to things like createChild that have a different second arg
            }
            // reset handler and clicked flag
            _cornerFunction = getCornerFunction(corner, 1);
            _cornerClicked = null;
        }, _cornerTimeout);
    };

    function getCornerFunction(corner, clicks) {
        if (corner == "D") {
            return clicks == 1 ? self.showCornerTip : map.createSister;
        } else if (corner == "S") {
            return clicks == 1 ? map.toggleSExpansion : map.createChild;
        } else if (corner == "R") {
            return clicks == 1 ? self.showCornerTip : map.createRToSister;
        } else if (corner == "P") {
            return clicks == 1 ? map.togglePExpansion : map.getPerspectives().setPEditorPoint;
        } else if (corner === "") {
            // click on text
            return clicks == 1 ? self.showCornerTip : editText;
        } else {
            return function () {
                //console.log('getCornerFunction: no function found for corner: ' + corner + '!');
            };
        }
    }

    // NB: in this case the thing is actually the TextBox, except in outline layout it is a Panel if the box is double-clicked...
    function editText(thing, corner) {
        if (!$scope.canEdit) {
            return null;
        }

        //console.log('editText, thing: ' + thing);
        if (thing instanceof go.Panel) {
            // outline layout
            var part = thing.part;
            //console.log('editText, part: ' + part);
            if (part instanceof go.Group && part.data && (part.data.layout == 'left' || part.data.layout == 'right')) {
                var textBlockName = 'externaltext-' + part.data.layout;
                var text = thing.part.findObject(textBlockName);
                if (text) {
                    thing = text;
                }
            }
        }
        map.getDiagram().commandHandler.editTextBlock(thing);
    }

    // ---------------- help tip functions - see also user.js, views/maps/help_tab ---------------

    // shows thingTip or one of the cornerXTips
    this.showCornerTip = function (thing, corner) {
        //console.log('showCornerTip');
        if (corner === '') {
            self.showHelpTip('thingTip');
        } else {
            self.showHelpTip('corner' + corner + 'Tip');
        }
    };

    this.showHelpTip = function (tip) {
        //console.log('showHelpTip: ' + tip);

        // don't show help if in presenter
        if (self.currentTabIs(self.TAB_ID_PRESENTER)) {
            return;
        }

        self.helpTip = tip;
        $scope.safeApply();
        $('#help-tip').show();

        setTimeout(function () {
            $('#help-tip').fadeOut(500, function () {
                self.helpTip = null;
                $scope.safeApply();
            });
        }, 5000);
    };

    // ------------ edit map UserTags ---------------

    $scope.tagging = new SandbankTagging($scope, $http, $resource, $modal, $log);

    this.editUserTags = function () {
        $scope.tagging.openModal([$scope.mapId], true, // show description field
        function () {
            map.getAutosave().saveNow('edit_usertags');
        } // on update
        );
    };

    // ------------ edit map sharing ---------------

    $scope.sharing = new SandbankSharing($scope, $http, $resource, $modal, $log);

    this.editMapShares = function () {
        $scope.sharing.openModal([$scope.mapId], function () {} // on update
        );
    };

    // ------------ print/export to image ---------------

    this.printSlides = function () {
        startSpinner();
        map.getPresenter().createSlideThumbnails();
        stopSpinner();
        setTimeout(function () {
            window.print();
        }, 500);
    };

    var MILLION = 1000 * 1000;

    this.exportToImage = function (format) {

        $scope.imageExportLoading = true;
        $('#export-image img').remove();
        map.getTemplates().showExportFooter();

        var rect = map.getDiagram().computePartsBounds(map.getDiagram().nodes).copy();

        var imageMB = rect.width * rect.height * 4 / MILLION; // 4 bytes/pixel
        //console.log('imageMB: ' + imageMB);

        // make the max size of the image 10MB
        // pngSize = imageMB * scale * scale
        // so max scale = sqrt(pngSize / imageMB)
        // These calculations don't seem to be right, but in practice using 500 here
        // we get a scale of 2.43 for an image 19984 x 3424 pixels
        // which results in a file size of 1.88 MB at 32 bits/pixel...
        // OR 28380 x 5196 pixels, scale = 3.41 => file size = 3.49 MB
        var scale = 4;
        if (imageMB) {
            scale = Math.min(4, Math.sqrt(50 / imageMB));
        }

        //console.log('image dimensions: ' + rect.width + ' x ' + rect.height + ', image bytes: ' + (rect.width * rect.height * 4) +
        //        ', imageMB: ' + imageMB + ', scale: ' + scale);

        $scope.showImageExport = true;

        var partsToExport = new go.List();
        partsToExport.addAll(map.getDiagram().nodes);
        partsToExport.addAll(map.getDiagram().links);
        partsToExport.remove(map.getPresenter().slideBlocker);

        var doImage = $timeout(function () {
            var img = map.getDiagram().makeImage({
                parts: partsToExport,
                maxSize: new go.Size((rect.width + 200) * scale, (rect.height + 200) * scale),
                scale: scale,
                padding: 100 * scale,
                background: '#ffffff'
            });

            $('#export-image').append(img);
            $scope.imageExportLoading = false;

            map.getTemplates().hideExportFooter();
        }, 100);
    };

    // --------- utils -------------

    this.splitLines = function (text) {
        return text.split(/\n/);
    };
};

},{}],35:[function(require,module,exports){
'use strict';

window.Sandbank = {};

// the topmost controller for the app

window.UserCtrl = function ($rootScope, $scope, $http, $modal, $upload) {

    // query string params
    $scope.params = URI(window.location).query(true);

    // auto-open thinkquery?
    $scope.thinkquery = $scope.params.thinkquery ? true : false;

    $scope.userId = window.userId; // set in layouts/user
    $scope.userIsAdmin = window.userIsAdmin;
    $scope.userName = '';
    $scope.userProfile = null;
    $scope.profileEditStatus = '';
    $scope.password = '';
    $scope.passwordConfirm = '';

    $scope.getNewWindowName = function (action, mapId) {
        if (action == 'VIEW_MAP') {
            return 'VIEW_MAP_' + mapId;
        }
    };

    // show/hide tests UI and model debug form
    $scope.showTests = false;
    $scope.showModel = false;

    $scope.toggleShowTests = function () {
        $scope.showTests = !$scope.showTests;
    };
    $scope.toggleShowModel = function () {
        $scope.showModel = !$scope.showModel;
    };

    $scope.setUserId = function (id) {
        $scope.userId = id;
    };

    function init() {
        window.addEventListener('resize', fixRowHeights);
    }

    // make all cells in a row the same height
    function fixRowHeights() {
        // window.setTimeout(function() {
        //     $('.row-height').each(function() { 
        //         var highestBox = 0;
        //         $('> div', this).each(function(){
        //             if ($(this).height() > highestBox)
        //                 highestBox = $(this).height();
        //         }); 
        //         $('> div', this).height(highestBox);
        //     });       
        // }, 300);
    }

    $scope.loadUserProfile = function (callback) {
        if ($scope.userId) {
            var url = '/users/' + $scope.userId + '/profile.json';
            window.startSpinner();
            $http.get(url).then(function (response) {
                // success
                $scope.userProfile = response.data;
                initSelectedAdminTags();
                initSelectedFollowableOrgs();
                if ($scope.ccsTagging) {
                    $scope.ccsTagging.loadCcsTags();
                }
                window.stopSpinner();
                if (callback) {
                    callback.call();
                }
                fixRowHeights();
            }, function (reason) {
                // error
                window.stopSpinner();
                alert('Could not load user profile data');
            });
        }
    };

    $scope.loadUserProfile();

    // -------------- courses/subscriptions ------------------

    // open the Stripe Checkout dialog and get a token
    // NB: amount is stored in the Stripe plan definition
    $scope.addSubscription = function (plan) {
        var handler = StripeCheckout.configure({
            key: $scope.userProfile.account.stripeKey,
            name: "Subscribe to MetaMap",
            image: "/assets/badge-logo-64.png",
            description: plan.name,
            panelLabel: "Pay {{amount}}/" + plan.interval,
            amount: plan.price,
            allowRememberMe: false,
            email: $scope.userProfile.user.email,
            token: function token(_token, args) {
                //console.log('token: ', token);
                window.startSpinner();
                $http.post('/charges/subscribe', {
                    plan_id: plan.code,
                    token_id: _token.id
                }).then(function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.success('Subscription created');
                    });
                }, function () {
                    $scope.loadUserProfile(function () {
                        alertify.error('Subscription could not be created');
                    });
                });
            }
        });
        handler.open();
    };

    // for buy-course-button directive
    $scope.getBuyButtonLabel = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            return 'Free';
        } else if (course = getEnrolledCourse(id)) {
            return 'Enrolled';
        } else if (course = getEnrollableCourse(id)) {
            return 'Enroll - $' + (course.price / 100).toFixed(2);
        } else {
            return '';
        }
    };

    $scope.getCourseStatusSummary = function (id) {
        var course = $scope.getCourse(id);
        if (course) {
            var text = course.stepsCompleted + ' of ' + course.steps + ' steps completed';
            if (course.enrolment) {
                text = "Enrolled " + course.enrolment.date + (course.enrolment.stripeData.refunded ? " (Refunded)" : "") + ' - ' + text;
            }
            return course.code + ' - ' + text;
        } else {
            return null;
        }
    };

    $scope.getCourseCompletedPercent = function (id) {
        var course = $scope.getCourse(id);
        if (course) {
            return course.stepsCompletedPercent;
        } else {
            return null;
        }
    };

    $scope.maybeBuyCourse = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            window.location.href = '/courses/' + course.id;
        } else if (course = getEnrolledCourse(id)) {
            window.location.href = '/courses/' + course.id;
        } else if (course = getEnrollableCourse(id)) {
            $scope.buyCourse(course);
        }
    };

    $scope.getCourse = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            return course;
        } else if (course = getEnrolledCourse(id)) {
            return course;
        } else if (course = getEnrollableCourse(id)) {
            return course;
        }
        return null;
    };

    function getFreeCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.freeAccessibleCourses, function (course) {
            return course.id == id && course.enrolment == undefined;
        });
    }

    function getEnrolledCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.freeAccessibleCourses, function (course) {
            return course.id == id && course.enrolment !== undefined;
        });
    }

    function getEnrollableCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.nonFreeAccessibleCourses, function (course) {
            return course.id == id;
        });
    }

    // open the Stripe Checkout dialog and get a token
    // NB: amount is passed from our course definition
    $scope.buyCourse = function (course) {
        var handler = StripeCheckout.configure({
            key: $scope.userProfile.account.stripeKey,
            name: "Enroll in Course",
            image: "/assets/badge-logo-64.png",
            description: course.code,
            amount: course.price,
            allowRememberMe: false,
            email: $scope.userProfile.user.email,
            token: function token(_token2, args) {
                //console.log('token: ', token);
                window.startSpinner();
                $http.post('/charges/buy_course', {
                    course_code: course.code,
                    course_price: course.price,
                    token_id: _token2.id
                }).then(function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.success('Course purchased');
                    });

                    // reload page to handle stripe bug (?) - links not clickable
                    window.setTimeout(function () {
                        window.location.reload();
                    }, 1000);
                }, function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.error('Course purchase could not be completed');
                        //console.log('stripe error: ', response);
                    });
                });
            }
        });
        handler.open();
    };

    $scope.cancelSubscription = function (subscription) {
        window.startSpinner();
        $http['delete']('/charges/unsubscribe?subscription_id=' + subscription.id).then(function (response) {
            $scope.loadUserProfile(function () {
                alertify.success('Subscription cancelled');
            });
        }, function () {
            $scope.loadUserProfile(function () {
                alertify.error('Subscription could not be cancelled');
            });
        });
    };

    // debug/test only
    $scope.clearCustomer = function () {
        window.startSpinner();
        $http['delete']('/charges/clear_customer').then(function (response) {
            $scope.loadUserProfile(function () {
                alertify.success('Customer cleared');
            });
        }, function () {
            $scope.loadUserProfile(function () {
                alertify.error('Customer could not be cleared');
            });
        });
    };

    // -------------- points and badges ----------------

    $scope.hasCurrentBadge = function (key, level) {
        return $scope.userProfile && $scope.userProfile.badges.current[key] == level;
    };

    $scope.hasNewBadge = function (key, level) {
        return $scope.userProfile && $scope.userProfile.badges['new'][key] == level;
    };

    $scope.hasNewBadges = function () {
        return $scope.userProfile && _.keys($scope.userProfile.badges['new']).length > 0;
    };

    $scope.getBadgeDefinition = function (key) {
        return _.findWhere($scope.userProfile.badges.definitions, {
            key: key
        });
    };

    // -------------- tutorial -----------------

    try {
        $scope.tutorialEnabled = function () {
            return window.mapData !== undefined;
        };

        // start tutorial:
        var _tutorial = new SandbankEditor.Tutorial();

        $scope.startTutorial = function () {
            _tutorial.start();
        };
    } catch (e) {}

    // -------------- feedback form -----------------

    $scope.feedback = '';

    $scope.toggleFeedback = function () {
        $('#feedback-dropdown').slideToggle('fast').find('textarea').get(0).focus();
    };

    $scope.submitFeedback = function () {
        if ($scope.feedback === '') {
            return; // empty input...
        }

        $.ajax({
            type: 'POST',
            url: '/users/feedback',
            data: {
                url: window.location.href,
                feedback: $scope.feedback
            },
            success: function success() {
                $scope.feedback = '';
                alert('Thank you for your feedback!');
            },
            error: function error() {
                //console.error('error sending feedback: ', arguments);
            }
        });

        $('#feedback-dropdown').slideToggle('fast');
    };

    // --------- user's user tags -----------

    // NB: this is similar to maps tagging in tagging.js - but simpler, as we do not have to deal with
    // multiple taggable items, which means tracking existing vs. new tags, etc...

    $scope.newTag = {
        name: ''
    };

    // tag autocomplete
    $scope.getUserTags = function (viewValue) {
        var url = '/user_tags/list.json?q=' + viewValue;
        return $http.get(url).then(function (response) {
            return response.data.tags;
        });
    };

    $scope.updateUserUserTags = function () {
        var tagList = _.pluck($scope.userProfile.userTags, 'name').join(',');
        $http.put('/user_tags/update_user_user_tags', [tagList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'Tags saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save tags';
        });
    };

    $scope.deleteTag = function (tag) {
        var i = _.indexOf($scope.userProfile.userTags, tag);
        $scope.userProfile.userTags.splice(i, 1);
        $scope.updateUserUserTags();
    };

    $scope.tagSelected = function (item, model, label) {
        //console.log('tagSelected: ', item, model, label);
        $scope.addTag(item.name);
    };

    $scope.editingTagKeypress = function (e) {
        if (e.which == 13) {
            $scope.addTag($scope.newTag.name);
        }
    };

    $scope.addTag = function (tagName) {
        $scope.userProfile.userTags.push({
            name: tagName
        });
        $scope.newTag.name = '';
        $scope.updateUserUserTags();
    };

    // --------- user's/map's CCS tags -----------

    // this manages CCS tags for either the current user or the current map,
    // depending which page we're on - mapId gets overridden in editor.js if we're editing a map

    try {
        $scope.ccsTagging = new SandbankCcsTagging($scope, $http, $modal);
        $scope.ccsTagging.mapId = null;
    } catch (e) {}

    // --------- user's admin tags -----------

    // key (index): admin tag ID; value: true/false (if user follows the admin tag)
    $scope.selectedUserAdminTags = [];

    function initSelectedAdminTags() {
        $scope.selectedUserAdminTags = [];
        _.each($scope.userProfile.adminTags, function (tag) {
            if (_.findWhere($scope.userProfile.userAdminTags, {
                id: tag.id
            })) {
                $scope.selectedUserAdminTags[tag.id] = true;
            }
        });
    }

    $scope.updateUserAdminTags = function () {
        var selectedTagNames = _.map($scope.userProfile.adminTags, function (tag) {
            return $scope.selectedUserAdminTags[tag.id] ? tag.name : null;
        });
        var tagList = _.without(selectedTagNames, null).join(',');
        $http.put('/admin_tags/update_user_admin_tags', [tagList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'Interests saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save interests';
        });
    };

    // --------- user's followed orgs -----------

    // key (index): org ID; value: true/false (if user follows the org)
    $scope.selectedFollowableOrganizations = [];

    $scope.userIsFollowingOrg = function (id) {
        return $scope.selectedFollowableOrganizations[id];
    };

    $scope.toggleUserFollowingOrg = function (id) {
        if (!$scope.selectedFollowableOrganizations[id] || confirm('Stop following this ThinkNation?')) {
            $scope.selectedFollowableOrganizations[id] = !$scope.selectedFollowableOrganizations[id];
            $scope.updateFollowedOrganizations();
        }
    };

    function initSelectedFollowableOrgs() {
        $scope.selectedFollowableOrganizations = [];
        _.each($scope.userProfile.followedOrganizations, function (org) {
            if (_.findWhere($scope.userProfile.followableOrganizations, {
                id: org.id
            })) {
                $scope.selectedFollowableOrganizations[org.id] = true;
            }
        });
    }

    $scope.updateFollowedOrganizations = function () {
        var selectedOrgIds = _.map($scope.userProfile.followableOrganizations, function (org) {
            return $scope.selectedFollowableOrganizations[org.id] ? org.id : null;
        });
        var orgIdList = _.without(selectedOrgIds, null).join(',');
        $http.put('/organization_follows/update_user_organization_follows', [orgIdList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'ThinkNations saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save ThinkNations';
        });
    };

    // --------- user's org memberships -----------

    $scope.joinNation = new SandbankJoinNation($scope, $http, $modal);

    function getMembershipForOrg(id) {
        return _.findWhere($scope.userProfile.memberships, {
            organizationId: id
        });
    }

    $scope.userIsMemberOfOrg = function (id) {
        if ($scope.userProfile) {
            return getMembershipForOrg(id) != undefined;
        } else {
            return false;
        }
    };

    $scope.toggleUserMemberOfOrg = function (id, name) {
        if ($scope.userIsMemberOfOrg(id)) {
            if (confirm('Remove your membership in this ThinkNation?')) {
                var membership = getMembershipForOrg(id);
                $http['delete']('/memberships/' + membership.id + '.json').then(function (response) {
                    $scope.loadUserProfile();
                });
            }
        } else {
            $scope.joinNation.openModal(id, name);
        }
    };

    // ------------ following other users ---------------

    $scope.followUser = function (user) {
        $http.post('/user_follows.json', {
            followee_id: user.id
        }).then(function (response) {
            user.followId = response.data;
            alertify.success('You are now following ' + user.name);
        }, function () {});
    };

    $scope.unfollowUser = function (user) {
        $http['delete']('/user_follows/' + user.followId + '.json').then(function (response) {
            user.followId = null;
            alertify.success('You are no longer following ' + user.name);
        }, function () {});
    };

    // ------------ following tags ---------------

    function followTag(controller, tag) {
        $http.post('/' + controller + '/' + tag.id + '/follow.json', {
            id: tag.id
        }).then(function (response) {
            tag.following = true;
            alertify.success('You are now following ' + tag.name);
        }, function () {});
    }

    function unfollowTag(controller, tag) {
        $http['delete']('/' + controller + '/' + tag.id + '/unfollow.json').then(function (response) {
            tag.following = false;
            alertify.success('You are no longer following ' + tag.name);
        }, function () {});
    }

    $scope.followUserTag = function (tag) {
        followTag('user_tags', tag);
    };
    $scope.unfollowUserTag = function (tag) {
        unfollowTag('user_tags', tag);
    };

    $scope.followAdminTag = function (tag) {
        followTag('admin_tags', tag);
    };
    $scope.unfollowAdminTag = function (tag) {
        unfollowTag('admin_tags', tag);
    };

    $scope.followCcsTag = function (tag) {
        followTag('common_core_standards', tag);
    };
    $scope.unfollowCcsTag = function (tag) {
        unfollowTag('common_core_standards', tag);
    };

    // ------------ auto-save user profile ---------------

    // don't let autosave be triggered more than every N milliseconds...
    $scope.autosave = _.debounce(autosaveNow, 2000);

    function autosaveNow() {
        //console.log('autosaving user profile');
        var data = {
            email: $scope.userProfile.user.email,
            alt_email: $scope.userProfile.user.altEmail,
            first_name: $scope.userProfile.user.firstName,
            last_name: $scope.userProfile.user.lastName,
            about_me: $scope.userProfile.user.aboutMe
        };
        if ($scope.passwordsMatch() && $scope.password.length) {
            data.password = $scope.password;
            data.password_confirmation = $scope.password;
        }

        startSpinner();
        $scope.profileEditStatus = 'Saving...';
        $http.put('/users/' + $scope.userId, data).then(function (response) {
            stopSpinner();
            if (_.has(data, 'password')) {
                $scope.profileEditStatus = 'Profile and password saved';
                //console.log($scope.profileEditStatus);
            } else {
                    $scope.profileEditStatus = 'Profile saved';
                    //console.log($scope.profileEditStatus);
                }
        }, function () {
            stopSpinner();
            $scope.profileEditStatus = 'Could not save profile';
        });
    }

    $scope.passwordsMatch = function () {
        return !$scope.password.length && !$scope.passwordConfirm.length || $scope.password == $scope.passwordConfirm;
    };

    // ------------ upload avatar ---------------

    // using: https://github.com/danialfarid/angular-file-upload
    $scope.onAvatarFileSelect = function ($files) {
        startSpinner();
        //$files: an array of files selected, each file has name, size, and type.
        for (var i = 0; i < $files.length; i++) {
            var file = $files[i];
            $scope.upload = $upload.upload({
                url: 'users/' + userId,
                method: 'PUT',
                withCredentials: true,
                file: file, // or list of files: $files for html5 only
                fileFormDataName: 'user[avatar]'
            }).success(function (data, status, headers, config) {
                $scope.loadUserProfile();
                $scope.profileEditStatus = 'Photo updated';
                stopSpinner();
            }).error(function () {
                stopSpinner();
                $scope.profileEditStatus = 'Error: Could not upload photo';
            });
            //.then(success, error, progress);
        }
    };

    // --------------- view helpers -------------------

    // returns e.g. "a day ago"
    // (NB: now is obtained from the DB to ensure that we have both dates in UTC;
    //    also, SQL vs. ruby dates need to be coerced into a similar format, both in UTC - see feed.json.jbuilder)
    $scope.getEventTime = function (t, now) {
        var time = moment(t, 'YYYY-MM-DD HH:mm:ss.SSS');
        var nowtime = moment(now, 'YYYY-MM-DD HH:mm:ss.SSS');
        // //console.log('t:       ' + t);
        // //console.log('now:     ' + now);
        // //console.log('time:    ' + time.format()); // + ' ' + time.isValid());
        // //console.log('nowtime: ' + nowtime.format()); // + ' ' + nowtime.isValid());
        return time.from(nowtime);
    };

    // --------------- notifications -------------------

    $scope.getNotificationFeedUrl = function (notification) {
        if (notification.actions.length) {
            var action = notification.actions[0];
            if (action.action == 'LIKE') {
                return '/social?like_id=' + action.likeId;
            } else if (action.action == 'COMMENT') {
                return '/social?comment_id=' + action.commentId;
            } else if (action.action == 'SHARE_INDIVIDUAL') {
                return '/maps/' + action.mapId;
            } else if (action.action == 'SHARE_PUBLIC') {
                return '/social?share_id=' + action.shareId;
            }
        }
        return '';
    };

    $scope.deleteNotification = function (notification) {
        $http['delete']('/notifications/' + notification.id + '.json').then(function (response) {
            // success
            notification.deleted = true;
        }, function (reason) {
            // error
            alert('Could not delete notification');
        });
    };

    $scope.notificationVerb = function (action) {
        var verbs = {
            LIKE: 'liked this:',
            COMMENT: 'commented on this:',
            SHARE_INDIVIDUAL: 'shared a MetaMap with you',
            SHARE_PUBLIC: 'shared a MetaMap with everyone',
            MAP_FOLLOW: 'followed a MetaMap:',
            USER_FOLLOW: 'followed you'
        };
        return verbs[action];
    };

    // ------------ utility functions ---------------

    // handy function for use with ng-class on radio buttons
    $scope.classIf = function (klass, b) {
        //console.log('classIf: ' + klass + ', ' + b);
        return b ? klass : '';
    };

    // avoid '$apply already in progress' error (source: https://coderwall.com/p/ngisma)
    $scope.safeApply = function (fn) {
        //console.log('safeApply on scope: ' + $scope);
        var phase = this.$root.$$phase;
        if (phase == '$apply' || phase == '$digest') {
            if (fn && typeof fn === 'function') {
                fn();
            }
        } else {
            this.$apply(fn);
        }
    };

    // source: http://ctrlq.org/code/19616-detect-touch-screen-javascript
    $scope.isTouchDevice = function () {
        return 'ontouchstart' in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
    };

    init();
};

window.UserCtrl.$inject = ['$rootScope', '$scope', '$http', '$modal', '$upload'];

},{}],36:[function(require,module,exports){
'use strict';

var ACTIONS = {
    MAP: 'map',
    NEW_MAP: 'new_map',
    COPY_MAP: 'copy_map',
    DELETE_MAP: 'delete_map',
    HOME: 'home',
    MY_MAPS: 'mymaps',
    TERMS_AND_CONDITIONS: 'terms'
};

Object.freeze(ACTIONS);

module.exports = ACTIONS;

},{}],37:[function(require,module,exports){
'use strict';

var ELEMENTS = {
    APP_CONTAINER: 'app-container',
    META_PROGRESS: 'meta_progress',
    META_PROGRESS_NEXT: 'meta_progress_next'
};

Object.freeze(ELEMENTS);

module.exports = ELEMENTS;

},{}],38:[function(require,module,exports){
'use strict';

var EVENTS = {
	SIDEBAR_OPEN: 'sidebar-open',
	SIDEBAR_CLOSE: 'sidebar-close',
	PAGE_NAME: 'pageName',
	NAV: 'nav',
	MAP: 'map'
};

Object.freeze(EVENTS);

module.exports = EVENTS;

},{}],39:[function(require,module,exports){
'use strict';

var ACTIONS = require('./actions.js');
var _ = require('lodash');

var PAGES = {
    MAP: 'map',
    NEW_MAP: 'new_map',
    COPY_MAP: 'copy_map',
    DELETE_MAP: 'delete_map',
    MY_MAPS: 'mymaps',
    TERMS_AND_CONDITIONS: 'terms',
    HOME: 'home'
};

_.extend();

Object.freeze(PAGES);

module.exports = PAGES;

},{"./actions.js":36,"lodash":undefined}],40:[function(require,module,exports){
'use strict';

var ROUTES = {
    MAPS_LIST: 'maps/list/',
    MAPS_DATA: 'maps/data/',
    MAPS_NEW_MAP: 'maps/new-map/',
    TERMS_AND_CONDITIONS: 'metamap/terms-and-conditions/',
    HOME: 'metamap/home/'
};

Object.freeze(ROUTES);

module.exports = ROUTES;

},{}],41:[function(require,module,exports){
'use strict';

var TAGS = {
    META_CANVAS: 'meta-canvas',
    HOME: 'home',
    TERMS: 'terms',
    MY_MAPS: 'my-maps'
};

Object.freeze(TAGS);

module.exports = TAGS;

},{}],42:[function(require,module,exports){
"use strict";

var addThis = function addThis(apiKey) {

    (function (d, s, id) {
        var js,
            fjs = d.getElementsByTagName(s)[0],
            t = window.addthis || {};
        if (d.getElementById(id)) return t;
        js = d.createElement(s);
        js.id = id;
        js.src = "//s7.addthis.com/js/300/addthis_widget.js#pubid=" + apiKey;
        fjs.parentNode.insertBefore(js, fjs);

        t._e = [];
        t.ready = function (f) {
            t._e.push(f);
        };

        return t;
    })(document, "script", "add-this-js");

    var init = function init() {
        window.addthis.ready(function () {
            if (['#home', '#contact'].indexOf(window.location.hash) >= 0) {
                var tryCount = 0;
                var hideShares = function hideShares(keepGoing) {
                    if ($('#at4-share') && $('#at4-share').length >= 1) {
                        $('#at4-share').parent().hide();
                        if (keepGoing) {
                            _.delay(hideShares, 3000);
                        }
                    } else {
                        tryCount += 1;
                        if (tryCount < 60) {
                            _.delay(hideShares, 250);
                        }
                    }
                };
                hideShares(true);
            }
        });
    };
    return init;
};

module.exports = addThis;

},{}],43:[function(require,module,exports){
'use strict';

var facebookApi = function facebookApi(apiKey) {

    window.fbAsyncInit = function () {
        window.FB.init({
            appId: '847702775304906',
            xfbml: true,
            version: 'v2.3'
        });

        window.FB.Event.subscribe('edge.create', function (targetUrl) {
            window.ga('send', 'social', 'facebook', 'like', targetUrl);
        });

        window.FB.Event.subscribe('edge.remove', function (targetUrl) {
            window.ga('send', 'social', 'facebook', 'unlike', targetUrl);
        });

        window.FB.Event.subscribe('message.send', function (targetUrl) {
            window.ga('send', 'social', 'facebook', 'send', targetUrl);
        });
    };

    (function (d, s, id) {
        var js,
            fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    })(document, 'script', 'facebook-jssdk');

    return window.fbAsyncInit;
};

module.exports = facebookApi;

},{}],44:[function(require,module,exports){
'use strict';

var googleAnalytics = function googleAnalytics(api) {

    // Google Plus API
    (function () {
        var po = document.createElement('script');po.type = 'text/javascript';po.async = true;
        po.src = 'https://apis.google.com/js/platform.js';
        var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(po, s);
    })();

    //Google Tag Manager API
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];w[l].push({
            'gtm.start': new Date().getTime(), event: 'gtm.js'
        });var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != 'dataLayer' ? '&l=' + l : '';j.async = true;j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', api.tagmanager);

    // Google Analytics API
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments);
        }, i[r].l = 1 * new Date();a = s.createElement(o), m = s.getElementsByTagName(o)[0];a.async = 1;a.src = g;
        m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    window.ga('create', api.analytics, 'auto');
    window.ga('send', 'pageview');
    return window.ga;
};

module.exports = googleAnalytics;

},{}],45:[function(require,module,exports){
// Define our custom event handlers
'use strict';

function clickEventToAnalytics(intentEvent) {
    if (!intentEvent) return;
    var label = intentEvent.region;
    window.ga('send', 'social', 'twitter', intentEvent.type, label);
}

function tweetIntentToAnalytics(intentEvent) {
    if (!intentEvent) return;
    var label = "tweet";
    window.ga('send', 'social', 'twitter', intentEvent.type, label);
}

function favIntentToAnalytics(intentEvent) {
    tweetIntentToAnalytics(intentEvent);
}

function retweetIntentToAnalytics(intentEvent) {
    if (!intentEvent) return;
    var label = intentEvent.data.source_tweet_id;
    window.ga('send', 'social', 'twitter', intentEvent.type, label);
}

function followIntentToAnalytics(intentEvent) {
    if (!intentEvent) return;
    var label = intentEvent.data.user_id + " (" + intentEvent.data.screen_name + ")";
    window.ga('send', 'social', 'twitter', intentEvent.type, label);
}

var twitterApi = function twitterApi(apiKey) {

    window.twttr = (function (d, s, id) {
        var js,
            fjs = d.getElementsByTagName(s)[0],
            t = window.twttr || {};
        if (d.getElementById(id)) return t;
        js = d.createElement(s);
        js.id = id;
        js.src = "https://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js, fjs);

        t._e = [];
        t.ready = function (f) {
            t._e.push(f);
        };

        return t;
    })(document, "script", "twitter-wjs");

    window.twttr.ready(function (twitter) {
        twitter.widgets.load();
        twitter.events.bind('click', clickEventToAnalytics);
        twitter.events.bind('tweet', tweetIntentToAnalytics);
        twitter.events.bind('retweet', retweetIntentToAnalytics);
        twitter.events.bind('favorite', favIntentToAnalytics);
        twitter.events.bind('follow', followIntentToAnalytics);
    });

    var tryCount = 0;
    var load = function load() {
        if (window.twttr && window.twttr.widgets) {
            return window.twttr.widgets.load();
        } else if (tryCount < 5) {
            tryCount += 1;
            _.delay(load, 250);
        }
    };

    return load;
};

module.exports = twitterApi;

},{}],46:[function(require,module,exports){
'use strict';

var userSnap = function userSnap(config) {
    var apiKey = '032baf87-8545-4ebc-a557-934859371fa5.js',
        s,
        x;
    if (config == null) {
        config = {};
    }
    apiKey = config.USER_SNAP_API_KEY;
    if (apiKey && window.location.hostname !== 'localhost') {
        window.usersnapconfig = {
            mode: 'report',
            shortcut: true,
            beforeOpen: function beforeOpen(obj) {
                return UserSnap.setEmailBox(Doc.app.user.userName);
            }
        };
        s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//api.usersnap.com/load/' + apiKey + '.js';
        x = document.getElementsByTagName('head')[0];
        return x.appendChild(s);
    }
};

module.exports = userSnap;

},{}],47:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var riot = window.riot;
var NProgress = window.NProgress;
var pageBody = require('../../tags/page-body.js');
var ELEMENTS = require('../constants/elements.js');
var Actions = require('../actions/Action.js');

var PageFactory = (function () {
    function PageFactory(eventer, metaFire) {
        _classCallCheck(this, PageFactory);

        this.metaFire = metaFire;
        this.eventer = eventer;
        this.actions = new Actions(metaFire, eventer, this);
        this.onReady();
    }

    _createClass(PageFactory, [{
        key: 'onReady',
        value: function onReady() {
            if (!this._onReady) {
                this._onReady = new Promise(function (fulfill, reject) {
                    $('#' + ELEMENTS.META_PROGRESS).remove();
                    riot.mount('*');
                    NProgress.configure({ parent: '#' + ELEMENTS.META_PROGRESS_NEXT });

                    _.delay(function () {
                        Metronic.init(); // init metronic core componets
                        Layout.init(); // init layout
                        Demo.init(); // init demo features
                        Index.init(); // init index page
                        Tasks.initDashboardWidget(); // init tash dashboard widget
                        fulfill();
                    }, 250);
                });
            }
            return this._onReady;
        }
    }, {
        key: 'navigate',
        value: function navigate(path, id, action) {
            var _actions;

            for (var _len = arguments.length, params = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {
                params[_key - 3] = arguments[_key];
            }

            var act = (_actions = this.actions).act.apply(_actions, [path, id, action].concat(params));
            if (!act) {
                var _eventer;

                (_eventer = this.eventer)['do'].apply(_eventer, [path, path, { id: id, action: action }].concat(params));
            }
        }
    }]);

    return PageFactory;
})();

module.exports = PageFactory;

},{"../../tags/page-body.js":56,"../actions/Action.js":3,"../constants/elements.js":37}],48:[function(require,module,exports){
'use strict';

if (!String.prototype.format) {
    String.prototype.format = function () {
        var args = arguments;
        return this.replace(/{(\d+)}/g, function (match, number) {
            return typeof args[number] != 'undefined' ? args[number] : match;
        });
    };
}

},{}],49:[function(require,module,exports){
'use strict';

var uuid = function uuid() {
    var hexDigits, i, s, uuid;
    s = [];
    s.length = 36;
    hexDigits = '0123456789abcdef';
    i = 0;
    while (i < 36) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
        i += 1;
    }
    s[14] = '4';
    s[19] = hexDigits.substr(s[19] & 0x3 | 0x8, 1);
    s[8] = s[13] = s[18] = s[23] = '-';
    uuid = s.join('');
    return uuid;
};

module.exports = uuid;

},{}],50:[function(require,module,exports){
'use strict';

var riot = require('riot');
var NProgress = window.NProgress;

var html = '\n<div class="portlet light">\n    <div class="portlet-body" id="diagram"></div>\n</div>\n<div id="overview-diagram" style="display: none;"></div>\n';

module.exports = riot.tag('meta-canvas', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.mapId = null;
    this.canvas = null;

    this.buildCanvas = function (map) {
        if (!_this.canvas) {
            $(_this.diagram).empty();
            $(_this['overview-diagram']).empty();

            var x = {
                mapId: _this.mapId,
                ccsTagging: {},
                safeApply: function safeApply(fn) {
                    if (fn) {
                        for (var _len = arguments.length, params = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                            params[_key - 1] = arguments[_key];
                        }

                        fn.apply(undefined, params);
                    }
                },
                $watch: function $watch() {},
                get: function get() {
                    return { then: function then() {} };
                },
                isTouchDevice: function isTouchDevice() {
                    return false;
                }
            };

            _this.update();

            x.mapData = map;
            map.metadata = {
                sandbox: null,
                canEdit: true
            };
            map.state_data = {
                "showNavigator": false,
                "currentTab": null,
                "perspectivePointKey": null,
                "distinctionThingKey": null
            };
            map.editor_options = {
                "defaultRelationshipDirection": "noArrows",
                "defaultThingLayout": "left",
                "perspectiveMode": "lines"
            };

            _this.canvas = MapEditorCtrl(x, x, x, x, x);
        } else {
            if (map.changed_by != MetaMap.User.userKey) {
                _this.canvas.map.load(map.data);
            }
        }
        NProgress.done();
    };

    this.build = function (opts) {
        if (opts.id != _this.mapId) {
            _this.canvas = null;
            if (_this.mapId) {
                MetaMap.MetaFire.off('maps/data/' + _this.mapId);
            }
            _this.mapId = opts.id;
            NProgress.start();

            MetaMap.MetaFire.on('maps/data/' + opts.id, _this.buildCanvas);
            MetaMap.Eventer.forget('map', _this.build);
        }
    };

    MetaMap.Eventer.every('map', this.build);

    this.correctHeight = function () {
        $(_this.diagram).css({
            height: window.innerHeight - 154 + 'px'
        });
    };

    this.on('update', function () {
        _this.correctHeight();
    });

    $(window).resize(function () {
        _this.correctHeight();
    });
});

},{"../../entry.js":2,"riot":"riot"}],51:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n            <i class="fa fa-graduation-cap"></i>\n        </a>\n        <ul class="dropdown-menu">\n            <li>\n                <ul class="dropdown-menu-list scroller" style="height: 270px;" data-handle-color="#637283">\n                    <li if="{ help }"\n                        each="{ help }"\n                        onclick="{ parent.onClick }">\n                        <a href="{ link }">\n                            <i class="{ icon }"></i>\n                            <span class="title">{ title }</span>\n                        </a>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n';

riot.tag('meta-help', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.onClick = function (event, params) {
        console.log(event, params);
        return true;
    };

    this.help = null;
    this.on('mount', function () {
        MetaMap.MetaFire.on('metamap/help', function (data) {
            _this.help = _.filter(_.sortBy(data, 'order'), function (d) {
                var include = d.archive != true;
                return include;
            });
            _this.update();
        });
    });
});

},{"../../entry.js":2,"riot":"riot"}],52:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n                    <i class="fa fa-bell-o"></i>\n                    <span class="badge badge-success">\n                        { notifications.length }\n                    </span>\n                </a>\n                <ul class="dropdown-menu">\n                    <li class="external">\n                        <h3>\n                            <span class ="bold">{ notifications.length } pending</span> notification{ s: notifications.length == 0 || notifications.length > 1 }\n                        </h3>\n                        <a href="javascript:;">view all</a>\n                    </li>\n                    <li>\n                        <ul class="dropdown-menu-list scroller" style="height: 250px;" data-handle-color="#637283">\n                            <li if="{ notifications }"\n                                each="{ notifications }"\n                                onclick="{ parent.onClick }">\n                                <a href="javascript:;">\n                                    <span class="time">{ time }</span>\n                                    <span class="details">\n                                        <span class="label label-sm label-icon label-success">\n                                            <i class="fa fa-plus"></i>\n                                        </span>\n                                        { event }\n                                    </span>\n                                </a>\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n';

riot.tag('meta-notifications', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.notifications = [];

    this.onClick = function (event, params) {
        console.log(event, params);
        return true;
    };

    this.on('mount', function () {
        MetaMap.MetaFire.on('metamap/notifications', function (data) {
            _this.notifications = _.filter(_.sortBy(data, 'order'), function (d) {
                var include = d.archive != true;
                return include;
            });
            _this.update();
        });
    });
});

},{"../../entry.js":2,"riot":"riot"}],53:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n                    <i class="fa fa-trophy"></i>\n                    <span class="badge badge-success">\n                        { points.length }\n                    </span>\n                </a>\n                <ul class="dropdown-menu">\n                    <li class="external">\n                        <h3>\n                            <span class ="bold">{ points.length } new </span> achievement{ s: points.length == 0 || points.length > 1 }\n                        </h3>\n                        <a href="javascript:;">view all</a>\n                    </li>\n                    <li>\n                        <ul class="dropdown-menu-list scroller" style="height: 250px;" data-handle-color="#637283">\n                            <li if="{ points }"\n                                each="{ points }"\n                                onclick="{ parent.onClick }">\n                                <a href="javascript:;">\n                                    <span class="time">{ time }</span>\n                                    <span class="details">\n                                        <span class="label label-sm label-icon label-success">\n                                            <i class="fa fa-plus"></i>\n                                        </span>\n                                        { event }\n                                    </span>\n                                </a>\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n';

riot.tag('meta-points', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');
    this.points = [];

    this.onClick = function (event, params) {
        console.log(event, params);
        return true;
    };

    this.on('mount', function () {
        MetaMap.MetaFire.on('users/' + MetaMap.User.userId + '/points', function (data) {
            _this.points = _.filter(_.sortBy(data, 'order'), function (d) {
                var include = d.archive != true;
                return include;
            });
            _this.update();
        });
    });
});

},{"../../entry.js":2,"riot":"riot"}],54:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n                    <span class="username username-hide-on-mobile">\n                        { username }\n                    </span>\n                    <img alt="" height="39" width="39" class="img-circle" src="{ picture }" />\n                </a>\n                <ul class="dropdown-menu dropdown-menu-default">\n                    <li if="{ menu }"\n                        each="{ menu }"\n                        onclick="{ parent.onClick }">\n                        <a href="{ link }">\n                            <i class="{ icon }"></i> { title }\n                        </a>\n                    </li>\n                </ul>\n';

riot.tag('meta-user', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.menu = [];
    this.username = '';
    this.picture = '';

    this.logout = function () {
        MetaMap.logout();
    };

    this.linkAccount = function () {
        MetaMap.Auth0.linkAccount();
    };

    this.onClick = function (event, params) {
        switch (event.item.link) {
            case '#logout':
                _this.logout();
                return false;
                break;

            case '#link-social-accounts':
                _this.linkAccount();
                return false;
                break;

            default:
                console.log(event, params);
                return true;
                break;
        }
    };

    this.on('mount', function () {
        MetaMap.MetaFire.on('metamap/user', function (data) {
            _this.username = MetaMap.User.displayName;
            _this.picture = MetaMap.User.picture;
            _this.menu = _.filter(_.sortBy(data, 'order'), function (d) {
                var include = d.archive != true;
                return include;
            });
            _this.update();
        });
    });
});

},{"../../entry.js":2,"riot":"riot"}],55:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '\n<div class="page-actions">\n    <div class="btn-group">\n        <button type="button" class="btn red-haze btn-sm dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n            <span class="hidden-sm hidden-xs">Actions&nbsp;</span>\n            <i class="fa fa-angle-down"></i>\n        </button>\n        <ul class="dropdown-menu" role="menu">\n            <li each="{ val, i in data }" class="{ start: i == 0, active: i == 0 }">\n                <a if="{ parent.getLinkAllowed(val) }" href="{ parent.getActionLink(val) }">\n                    <i class="{ val.icon }"></i> { val.title }\n                </a>\n            </li>\n            <li class="divider"></li>\n            <li>\n                <a href="#settings">\n                    <i class="fa fa-gear"></i> Settings\n                </a>\n            </li>\n        </ul>\n    </div>\n\n    <span style="padding-left: 5px;">\n        <span if="{ pageName }"\n                id="map_name"\n                data-type="text"\n                data-title="Enter map name">\n            { pageName }\n        </span>\n    </span>\n</div>\n';

module.exports = riot.tag('page-actions', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');

    this.data = [];
    this.pageName = 'Home';
    this.url = MetaMap.config.site.db + '.firebaseio.com';
    this.loaded = false;

    this.getActionLink = function (obj) {
        var ret = obj.link;
        if (obj.url_params) {
            (function () {
                var args = [];
                _.each(obj.url_params, function (prm) {
                    args.push(_this[prm.name]);
                });
                ret = obj.link.format.call(obj.link, args);
            })();
        }
        return ret;
    };

    this.getLinkAllowed = function (obj) {
        var ret = true == obj['allowed-on']['*'];
        if (!ret) {
            var currentPage = MetaMap.Router.currentPath;
            ret = true == obj['allowed-on'][currentPage];
        }
        return ret;
    };

    this.bindTopageName = _.once(function () {
        MetaMap.MetaFire.on('maps/list/' + _this.mapId + '/name', function (name) {
            _this.pageName = name || '';
            _this.update();
        });
        _this.loaded = true;
    });

    MetaMap.Eventer.every('pageName', function (opts) {
        if (_this.loaded) {
            $(_this.map_name).editable('destroy');
        }
        if (_this.mapId) {
            MetaMap.MetaFire.off('maps/list/' + _this.mapId + '/name');
            MetaMap.MetaFire.on('maps/list/' + opts.id + '/name', function (name) {
                _this.pageName = name;
                _this.update();
            });
        }
        _this.pageName = opts.name || 'Home';
        _this.mapId = opts.id;
        _this.update();
        if (_this.mapId) {
            $(_this.map_name).editable({ unsavedclass: null }).on('save', function (event, params) {
                MetaMap.MetaFire.setData(params.newValue, 'maps/list/' + _this.mapId + '/name');
            });
            _this.bindTopageName();
        }
    });

    MetaMap.MetaFire.on('metamap/actions', function (data) {
        _this.data = _.filter(_.sortBy(data, 'order'), function (d) {
            var include = d.archive != true;
            return include;
        });
        _this.update();
    });
});

},{"../entry.js":2,"riot":"riot"}],56:[function(require,module,exports){
'use strict';

var riot = require('riot');
var pageHeader = require('./page-header');
var pageContainer = require('./page-container');
//const metaDialog = require('./components/meta-dialog');
var pageFooter = require('./page-footer');
var EVENTS = require('../js/constants/events');

var html = '\n<div id="page_body" class="page-header-fixed page-sidebar-closed-hide-logo page-sidebar-closed-hide-logo">\n\n    <div id="meta_page_header"></div>\n\n    <div class="clearfix">\n    </div>\n\n    <div id="meta_page_container"></div>\n\n</div>\n\n<div id="meta_page_footer"></div>';

module.exports = riot.tag('page-body', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');

    this.on('mount', function () {
        riot.mount(_this.meta_page_header, 'page-header');
        riot.mount(_this.meta_page_container, 'page-container');
        //        riot.mount(this.meta_page_dialog, 'meta-dialog');
        riot.mount(_this.meta_page_footer, 'page-footer');
    });

    MetaMap.Eventer.on(EVENTS.SIDEBAR_CLOSE, function () {
        $(_this.page_body).addClass('page-sidebar-reversed');
    });

    MetaMap.Eventer.on(EVENTS.SIDEBAR_OPEN, function () {
        $(_this.page_body).removeClass('page-sidebar-reversed');
    });
});

},{"../entry.js":2,"../js/constants/events":38,"./page-container":57,"./page-footer":59,"./page-header":60,"riot":"riot"}],57:[function(require,module,exports){
'use strict';

var riot = require('riot');
var pageSidebar = require('./page-sidebar.js');
var pageContent = require('./page-content.js');

var html = '\n<div class="page-container">\n    <div id="meta_page_sidebar"></div>\n    <div id="meta_page_content"></div>\n</div>\n';

module.exports = riot.tag('page-container', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');

    this.on('mount', function () {
        riot.mount(_this.meta_page_sidebar, 'page-sidebar');
        riot.mount(_this.meta_page_content, 'page-content');
    });
});

},{"../entry.js":2,"./page-content.js":58,"./page-sidebar.js":63,"riot":"riot"}],58:[function(require,module,exports){
'use strict';

var riot = require('riot');
var EVENTS = require('../js/constants/events');
var _ = require('lodash');

var html = '\n<div class="page-content-wrapper">\n    <div id="page-content" class="page-content">\n\n        <div class="page-head">\n\n        </div>\n\n\n        <div id="app-container">\n\n        </div>\n    </div>\n</div>\n';

module.exports = riot.tag('page-content', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');

    MetaMap.Eventer.on(EVENTS.SIDEBAR_CLOSE, function () {
        var width = window.innerWidth;
        $(_this['app-container']).css({ width: width - 46 + 'px' });
    });

    $(window).on('resize', function () {
        $(_this['app-container']).css({ width: '100%' });
    });

    MetaMap.Eventer.on(EVENTS.SIDEBAR_OPEN, function () {
        $(_this['app-container']).css({ width: '100%' });
    });
});

},{"../entry.js":2,"../js/constants/events":38,"lodash":undefined,"riot":"riot"}],59:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '\n<div class="page-footer" style="position: fixed; bottom: 0;">\n    <div class="page-footer-inner">\n        <a href="#terms">&copy;2015</a>\n    </div>\n</div>\n';

module.exports = riot.tag('page-footer', html, function (opts) {

    var MetaMap = require('../entry.js');
});

},{"../entry.js":2,"riot":"riot"}],60:[function(require,module,exports){
'use strict';

var riot = require('riot');
var pageLogo = require('./page-logo.js');
var pageActions = require('./page-actions.js');
var pageSearch = require('./page-search.js');
var pageTopMenu = require('./page-topmenu');

var html = '\n<div id="header-top" class="page-header navbar navbar-fixed-top">\n    <div id="meta_progress_next" style="overflow: inherit;"></div>\n    <div id="header-content" class="page-header-inner">\n\n        <div id="meta_page_logo"></div>\n        \n        <div id="meta_page_actions"></div>\n        \n        <div id="meta_page_top" class="page-top">\n            <div id="meta_page_search"></div>\n            \n            <div id="meta_page_topmenu"></div>\n        </div>\n\n    </div>\n\n</div>\n';

module.exports = riot.tag('page-header', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');

    this.on('mount', function () {
        riot.mount(_this.meta_page_logo, 'page-logo');
        riot.mount(_this.meta_page_actions, 'page-actions');
        riot.mount(_this.meta_page_top, 'page-search');
        riot.mount(_this.meta_page_top, 'page-topmenu');
    });
});

},{"../entry.js":2,"./page-actions.js":55,"./page-logo.js":61,"./page-search.js":62,"./page-topmenu":64,"riot":"riot"}],61:[function(require,module,exports){
'use strict';

var riot = require('riot');
var EVENTS = require('../js/constants/events');

var html = '\n<div class ="page-logo">\n    <a id="meta_logo" href="#home">\n        <img src="metamap/assets/img/metamap_cloud.png" alt="logo" class ="logo-default" />\n    </a>\n    <div id="meta_menu_toggle" class ="menu-toggler sidebar-toggler" style="{ getDisplay(\'menu\') }">\n        <!--DOC: Remove the above "hide" to enable the sidebar toggler button on header-->\n    </div>\n</div>\n<a href="javascript:;" class ="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse">\n</a>\n';

module.exports = riot.tag('page-logo', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');
    this.display = true;

    this.getDisplay = function (el) {

        if (!_this.display) {
            return 'display: none;';
        } else {
            return '';
        }
    };

    MetaMap.Eventer.on(EVENTS.SIDEBAR_CLOSE, function () {
        _this.display = false;
        _this.update();
    });

    MetaMap.Eventer.on(EVENTS.SIDEBAR_OPEN, function () {
        _this.display = true;
        _this.update();
    });
});

},{"../entry.js":2,"../js/constants/events":38,"riot":"riot"}],62:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '\n<!-- DOC: Apply "search-form-expanded" right after the "search-form" class to have half expanded search box -->\n<form class="search-form" action="extra_search.html" method="GET">\n    <div class="input-group">\n        <input type="text" class="form-control input-sm" placeholder="Search..." name="query">\n            <span class="input-group-btn">\n                <a href="javascript:;" class="btn submit">\n                    <i class="fa fa-search"></i>\n                </a>\n            </span>\n        </div>\n</form>\n';

module.exports = riot.tag('page-search', html, function (opts) {

    var MetaMap = require('../entry.js');
});

},{"../entry.js":2,"riot":"riot"}],63:[function(require,module,exports){
'use strict';

var riot = require('riot');
var EVENTS = require('../js/constants/events');

var html = '\n<div class="page-sidebar-wrapper" style="{ getDisplay() }">\n    <div class="page-sidebar navbar-collapse collapse">\n        <ul class="page-sidebar-menu " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200">\n\n            <li if="{ data }" onclick="{ parent.click }" each="{ data }">\n                <a if="{ icon }" href="javascript:;">\n                    <i class="{ icon }" style="color:#{ color };"></i>\n                    <span class="title">{ title }</span>\n                    <span class="{ arrow: menu.length }"></span>\n                </a>\n                <ul if="{ menu && menu.length }" class="sub-menu">\n                    <li each="{ menu }">\n                        <a href="javascript:;">\n                            <i class="{ icon }"></i>\n                            <span class="title">{ title }</span>\n                        </a>\n                    </li>\n                </ul>\n            </li>\n\n        </ul>\n\n    </div>\n</div>\n';

module.exports = riot.tag('page-sidebar', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');

    this.click = function () {
        console.log('foo');
    };
    this.display = true;
    this.data = [];

    MetaMap.MetaFire.on('metamap/sidebar', function (data) {
        _this.data = _.filter(_.sortBy(data, 'order'), function (d) {
            var include = d.archive != true;
            if (include && d.menu && d.menu) {
                d.menu = _.filter(_.sortBy(d.menu, 'order'), function (m) {
                    return m.archive != true;
                });
            }
            return include;
        });
        _this.update();
    });

    this.getDisplay = function () {
        if (!_this.display) {
            return 'display: none;';
        } else {
            return '';
        }
    };

    MetaMap.Eventer.on(EVENTS.SIDEBAR_CLOSE, function () {
        _this.display = false;
        _this.update();
    });

    MetaMap.Eventer.on(EVENTS.SIDEBAR_OPEN, function () {
        _this.display = true;
        _this.update();
    });
});

},{"../entry.js":2,"../js/constants/events":38,"riot":"riot"}],64:[function(require,module,exports){
'use strict';

var riot = require('riot');
var metaPoints = require('./menu/meta-points.js');
var metaHelp = require('./menu/meta-help.js');
var metaUser = require('./menu/meta-user.js');
var metaNot = require('./menu/meta-notifications.js');

var html = '\n<div class="top-menu">\n    <ul class="nav navbar-nav pull-right">\n        <li class="separator hide"></li>\n        <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_notification_bar"></li>\n\n        <li class="separator hide"></li>\n        <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_points_bar"></li>\n\n        <li class="separator hide"></li>\n        <li class="dropdown" id="header_dashboard_bar" onclick="{ onClick }">\n            <a class="dropdown-toggle" href="#home">\n                <i class="fa fa-home"></i>\n            </a>\n        </li>\n            \n        <li class="separator hide"></li>\n        <li id="header_help_bar" class="dropdown dropdown-extended dropdown-notification dropdown"></li>\n            \n        <li class="separator hide"></li>\n        <li id="header_user_menu" class="dropdown dropdown-user dropdown"></li>\n    </ul>\n</div>\n';

module.exports = riot.tag('page-topmenu', html, function (opts) {
    var _this = this;

    this.onClick = function (event, params) {
        console.log(event, params);
        return true;
    };

    this.on('mount', function () {
        riot.mount(_this.header_points_bar, 'meta-points');
        riot.mount(_this.header_notification_bar, 'meta-notifications');
        riot.mount(_this.header_help_bar, 'meta-help');
        riot.mount(_this.header_user_menu, 'meta-user');
    });
});

},{"./menu/meta-help.js":51,"./menu/meta-notifications.js":52,"./menu/meta-points.js":53,"./menu/meta-user.js":54,"riot":"riot"}],65:[function(require,module,exports){
/// <reference path="../../../../typings/riotjs/riotjs.d.ts" />
/// <reference path="../../../../typings/nprogress/NProgress.d.ts" />

'use strict';

var riot = require('riot');
var NProgress = window.NProgress;
var ROUTES = require('../../js/constants/routes');

var html = '\n<div class="portlet light">\n\t\t\t\t<div class="portlet-body">\n\t\t\t\t\t<div class="row margin-bottom-30">\n\t\t\t\t\t\t<div if="{ header }" class="col-md-6">\n                            <h1>{ header.title }</h1>\n                            <p>{ header.text }</p>\n\t\t\t\t\t\t\t<ul class="list-unstyled margin-top-10 margin-bottom-10">\n\t\t\t\t\t\t\t\t<li each="{ areas }">\n\t\t\t\t\t\t\t\t\t<i class="{ icon }"></i> <b>{ title }</b> { text }\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<!-- Blockquotes -->\n\t\t\t\t\t\t\t<blockquote class="hero">\n\t\t\t\t\t\t\t\t<p>{ quote.text }</p>\n\t\t\t\t\t\t\t\t<small>{ quote.by }</small>\n\t\t\t\t\t\t\t</blockquote>\n                            <div class="addthis_horizontal_follow_toolbox"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class ="col-md-6">\n                          <iframe if="{ header.youtubeid }"\n                                id="ytplayer"\n                                type="text/html"\n                                src="https://www.youtube.com/embed/{ header.youtubeid }"\n                                frameborder="0" allowfullscreen\n                                class ="fitvids"\n                                style="height: 327px; width: 100%; display: block; margin-left: auto; margin-right: auto; broder: 0;"\n                            />\n\t\t\t\t\t\t\t</iframe>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                    <div class="headline">\n\t\t\t\t\t\t<h3>{ userName }{ vision.title }</h3>\n\t\t\t\t\t</div>\n                    <div>\n                        <p>{ vision.text }</p>\n                    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n';

module.exports = riot.tag('home', html, function (opts) {
  var _this = this;

  var MetaMap = require('../../entry.js');

  this.areas = [];
  this.header = {};

  MetaMap.MetaFire.on(ROUTES.HOME, function (data) {
    _this.areas = _.filter(_.sortBy(data.areas, 'order'), function (d) {
      var include = d.archive != true;
      return include;
    });
    _this.quote = data.quote;
    _this.header = data.header;
    _this.vision = data.vision;

    _this.userName = MetaMap.User.fullName;

    _this.update();

    NProgress.done();

    window.addthis.layers.refresh();
  });
});

},{"../../entry.js":2,"../../js/constants/routes":40,"riot":"riot"}],66:[function(require,module,exports){
'use strict';

var riot = require('riot');
var NProgress = window.NProgress;
var _ = require('lodash');
var ROUTES = require('../../js/constants/routes');
var PAGES = require('../../js/constants/pages');

var html = '\n<div class="portlet box grey-cascade">\n    <div class="portlet-title">\n        <div class="caption">\n            <i class="fa fa-icon-th-large"></i>MetaMaps\n        </div>\n        <div if="{ menu }" class="actions">\n            <a each="{ menu.buttons }" href="{ link }" onclick="{ parent.onActionClick }" class="btn btn-default btn-sm">\n                <i class="{ icon }"></i> { title }\n            </a>\n            <div class="btn-group">\n                <a class="btn btn-default btn-sm" href="javascript:;" data-toggle="dropdown">\n                    <i class="fa fa-cogs"></i> Tools <i class="fa fa-angle-down"></i>\n                </a>\n                <ul class="dropdown-menu pull-right">\n                    <li each="{ menu.menu }" onclick="{ parent.onMenuClick }">\n                        <a href="{ link }">\n                            <i class="{ icon }"></i> { title }\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    <div class="portlet-body">\n        <ul class="nav nav-tabs portlet-tabs">\n            <li onclick="{ parent.onTabSwitch }" each="{ val, i in tabs }" class="{ active: i == 0 }">\n                <a href="#mymaps_1_{ i }" data-toggle="tab" aria-expanded="{ true: i == 0 }">\n                { val.title }</a>\n            </li>\n        </ul>\n        <div class="table-toolbar">\n\n        </div>\n        <div class="tab-content">\n            <div each="{ val, i in tabs }" class="tab-pane fase in { active: i == 0 }" id="mymaps_1_{ i }">\n                <table class="table table-striped table-bordered table-hover" id="mymaps_table_{ i }">\n                    <thead>\n                        <tr>\n                            <th style="display: none;">\n                                MapId\n                            </th>\n                            <th class="table-checkbox">\n                                <input if="{ parent.currentTab == \'My Maps\' }" type="checkbox" class="group-checkable" data-set="#mymaps_table_{ i } .checkboxes"/>\n                            </th>\n                            <th style="display: none;">\n                                UserId\n                            </th>\n                            <th>\n                                Name\n                            </th>\n                            <th>\n                                Created On\n                            </th>\n                            <th>\n                                Status\n                            </th>\n                            <th>\n                                Action\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr if="{ parent.data && parent.data[i] }" each="{ parent.data[i] }" class="odd gradeX">\n                            <td style="display: none;" ><span data-selector="id" class ="mapid">{ id }</span></td>\n                            <td>\n                                <input if="{ parent.currentTab == \'My Maps\' }" type="checkbox" class="checkboxes" value="1"/>\n                            </td>\n                            <td style="display: none;">{ user_id }</td>\n                            <td if="{ val.editable }" class="meta_editable_{ i }" data-pk="{ id }" data-title="Edit Map Name">{ name }</td>\n                            <td if="{ !val.editable }">{ name }</td>\n                            <td class="center">{ created_at }</td>\n                            <td>\n                                <span class="label label-sm label-success">\n                                    Private\n                                </span>\n                            </td>\n                            <td>\n                                <button class="btn btn-sm blue filter-submit" onclick="{ parent.onOpen }">\n                                    <i class="fa fa-icon-eye-open"></i> Open\n                                </button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n';

module.exports = riot.tag('my-maps', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.data = null;
    this.menu = null;
    this.tabs = _.sortBy([{ title: 'My Maps', order: 0, editable: true }, { title: 'Shared with Me', order: 1, editable: false }], 'order');
    this.currentTab = 'My Maps';

    this.onOpen = function (event) {
        MetaMap.Router.to('map/' + event.item.id);
    };

    this.onTabSwitch = function (event) {
        _this.currentTab = event.item.val.title;
        switch (_this.currentTab) {
            case 'My Maps':

                break;
        }
    };

    this.onActionClick = function (event, tag) {
        return true;
    };

    this.onMenuClick = function (event, tag) {
        if (_this.currentTab == 'My Maps') {
            switch (event.item.title.toLowerCase()) {
                case 'delete':
                    var deleteMaps = require('../../js/actions/DeleteMap.js');
                    var selected = _this['table0'].find('.active').find('.mapid');
                    var ids = [];
                    _.each(selected, function (cell) {
                        ids.push(cell.innerHTML);
                    });
                    deleteMaps.deleteAll(ids, PAGES.MY_MAPS);
                    var find = _this['table0'].find('tbody tr .checkboxes');
                    find.each(function () {
                        $(this).attr('checked', false);
                        $(this).parents('tr').removeClass('active');
                    });
                    jQuery.uniform.update(find);
                    break;
            }
        }
    };

    this.on('mount', function () {
        NProgress.start();
        MetaMap.MetaFire.on('metamap/mymaps', function (data) {
            if (data) {
                _this.menu = {
                    buttons: _.sortBy(data.buttons, 'order'),
                    menu: _.sortBy(data.menu, 'order')
                };
                _this.update();
            }
        });

        var buildTable = function buildTable(idx, list, editable) {
            try {
                _this.data = _this.data || {};
                _this.data[idx] = list;
                if (_this['table' + idx]) {
                    $('.meta_editable_' + idx).editable('destroy');
                    _this['dataTable' + idx].destroy();
                }

                _this.update();

                _this['table' + idx] = $(_this['mymaps_table_' + idx]);
                _this['dataTable' + idx] = _this['table' + idx].DataTable({

                    // Uncomment below line('dom' parameter) to fix the dropdown overflow issue in the datatable cells. The default datatable layout
                    // setup uses scrollable div(table-scrollable) with overflow:auto to enable vertical scroll(see: assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js).
                    // So when dropdowns used the scrollable div should be removed.
                    //'dom': '<'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r>t<'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>',

                    //'bStateSave': true, // save datatable state(pagination, sort, etc) in cookie.
                    'columns': [{
                        orderable: false
                    }, {
                        'orderable': false
                    }, {
                        'orderable': true
                    }, {
                        'orderable': true
                    }, {
                        'orderable': true
                    }, {
                        'orderable': false
                    }, {
                        'orderable': false
                    }]
                });
                //this[`table${idx}`]Tools = new $.fn.dataTable.TableTools(this[`dataTable${idx}`], {});

                var tableWrapper = _this['table' + idx].parent().parent().parent().find('#mymaps_' + idx + '_table_wrapper');

                _this['table' + idx].find('.group-checkable').change(function () {
                    var set = jQuery(this).attr('data-set');
                    var checked = jQuery(this).is(':checked');
                    jQuery(set).each(function () {
                        if (checked) {
                            $(this).attr('checked', true);
                            $(this).parents('tr').addClass('active');
                        } else {
                            $(this).attr('checked', false);
                            $(this).parents('tr').removeClass('active');
                        }
                    });
                    jQuery.uniform.update(set);
                });

                _this['table' + idx].on('change', 'tbody tr .checkboxes', function () {
                    $(this).parents('tr').toggleClass('active');
                });

                tableWrapper.find('.dataTables_length select').addClass('form-control input-xsmall input-inline'); // modify table per page dropdown

                if (editable) {
                    $('.meta_editable_' + idx).editable({ unsavedclass: null }).on('save', function (event, params) {
                        var id = this.dataset.pk;
                        MetaMap.MetaFire.setData(params.newValue, 'maps/list/' + id + '/name');
                        return true;
                    });
                }
                NProgress.done();
            } catch (e) {
                NProgress.done();
                MetaMap.error(e);
            }
        };

        MetaMap.MetaFire.getChild(ROUTES.MAPS_LIST).orderByChild('owner').equalTo(MetaMap.User.userId).on('value', function (val) {
            var list = val.val();
            var maps = _.map(list, function (obj, key) {
                obj.id = key;
                obj.created_at = moment(obj.created_at).format('YYYY-MM-DD');
                return obj;
            });
            buildTable(0, maps);
        });

        MetaMap.MetaFire.getChild(ROUTES.MAPS_LIST).on('value', function (val) {
            var list = val.val();
            var maps = _.map(list, function (obj, key) {
                if (obj.owner == MetaMap.User.userId || obj.shared_with[MetaMap.User.userId] != true) {
                    return;
                } else {
                    obj.id = key;
                    obj.created_at = moment(obj.created_at).format('YYYY-MM-DD');
                    return obj;
                }
            });

            buildTable(1, maps);
        });
    });
});

},{"../../entry.js":2,"../../js/actions/DeleteMap.js":6,"../../js/constants/pages":39,"../../js/constants/routes":40,"lodash":undefined,"riot":"riot"}],67:[function(require,module,exports){
/// <reference path="../../../../typings/riotjs/riotjs.d.ts" />
/// <reference path="../../../../typings/nprogress/NProgress.d.ts" />

'use strict';

var riot = require('riot');
var NProgress = window.NProgress;
var ROUTES = require('../../js/constants/routes');

var html = '\n<div class="portlet light">\n\t\t\t\t<div class="portlet-body">\n\t\t\t\t\t<div class="row margin-bottom-30">\n\t\t\t\t\t\t<div if="{ header }" class="col-md-12">\n                            <h1>{ header.title }</h1>\n                            <p>{ header.text }</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                    <div each="{ areas }">\n                        <div class="headline">\n    \t\t\t\t\t\t<h3>{ title }</h3>\n    \t\t\t\t\t</div>\n                        <div>\n                            <p>{ text }</p>\n                        </div>\n                        <ul class="list-unstyled margin-top-10 margin-bottom-10">\n\t\t\t\t\t\t\t<li each="{ items }">\n\t\t\t\t\t\t\t\t<i class="{ icon }"></i> <b>{ title }</b> { text }\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n                    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n';

module.exports = riot.tag('terms', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.areas = [];
    this.header = {};

    MetaMap.MetaFire.on(ROUTES.TERMS_AND_CONDITIONS, function (data) {
        _this.areas = _.filter(_.sortBy(data.sections, 'order'), function (d) {
            var include = d.archive != true;
            if (include) {
                d.items = _.filter(_.sortBy(d.items, 'order'), function (d) {
                    var include2 = d.archive != true;
                    return include2;
                });
            }
            return include;
        });

        _this.header = data.header;
        _this.userName = MetaMap.User.fullName;

        _this.update();

        NProgress.done();
    });
});

},{"../../entry.js":2,"../../js/constants/routes":40,"riot":"riot"}]},{},[2])(2)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9NZXRhTWFwLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvZW50cnkuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hY3Rpb25zL0FjdGlvbi5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FjdGlvbnMvQWN0aW9uQmFzZS5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FjdGlvbnMvQ29weU1hcC5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FjdGlvbnMvRGVsZXRlTWFwLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYWN0aW9ucy9Ib21lLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYWN0aW9ucy9NeU1hcHMuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hY3Rpb25zL05ld01hcC5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FjdGlvbnMvT3Blbk1hcC5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FjdGlvbnMvVGVybXMuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hcHAvQ29uZmlnLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYXBwL0V2ZW50ZXIuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hcHAvRmlyZWJhc2UuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hcHAvUm91dGVyLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYXBwL2F1dGgwLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYXBwL3VzZXIuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvYW5hbHl0aWNzLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL2F0dGFjaG1lbnRzLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL2F1dG9zYXZlLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL2VkaXRvci5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9lZGl0b3Jfb3B0aW9ucy5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9leHRlbnNpb25zL05vZGVMYWJlbERyYWdnaW5nVG9vbC5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9nZW5lcmF0b3IuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvbGF5b3V0cy5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9tYXAuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvcGVyc3BlY3RpdmVzLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL3ByZXNlbnRlci5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9zaGFyaW5nLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL3N0YW5kYXJkcy5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy90YWdnaW5nLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL3RlbXBsYXRlcy5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy90ZXN0cy5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy91aS5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy91c2VyLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY29uc3RhbnRzL2FjdGlvbnMuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jb25zdGFudHMvZWxlbWVudHMuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jb25zdGFudHMvZXZlbnRzLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY29uc3RhbnRzL3BhZ2VzLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY29uc3RhbnRzL3JvdXRlcy5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NvbnN0YW50cy90YWdzLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvaW50ZWdyYXRpb25zL2FkZHRoaXMuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvZmFjZWJvb2suanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvZ29vZ2xlLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvaW50ZWdyYXRpb25zL3R3aXR0ZXIuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvdXNlcnNuYXAuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9wYWdlcy9QYWdlRmFjdG9yeS5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL3Rvb2xzL3NoaW1zLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvanMvdG9vbHMvdXVpZC5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvY2FudmFzL21ldGEtY2FudmFzLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvdGFncy9tZW51L21ldGEtaGVscC5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvbWVudS9tZXRhLW5vdGlmaWNhdGlvbnMuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy90YWdzL21lbnUvbWV0YS1wb2ludHMuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy90YWdzL21lbnUvbWV0YS11c2VyLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvdGFncy9wYWdlLWFjdGlvbnMuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy90YWdzL3BhZ2UtYm9keS5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvcGFnZS1jb250YWluZXIuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy90YWdzL3BhZ2UtY29udGVudC5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvcGFnZS1mb290ZXIuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy90YWdzL3BhZ2UtaGVhZGVyLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvdGFncy9wYWdlLWxvZ28uanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy90YWdzL3BhZ2Utc2VhcmNoLmpzIiwiL1VzZXJzL2NyZnJvZWhsaWNoL0RldmVsb3BtZW50L01ldGFNYXAvbWV0YW1hcC9zcmMvdGFncy9wYWdlLXNpZGViYXIuanMiLCIvVXNlcnMvY3Jmcm9laGxpY2gvRGV2ZWxvcG1lbnQvTWV0YU1hcC9tZXRhbWFwL3NyYy90YWdzL3BhZ2UtdG9wbWVudS5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvcGFnZXMvaG9tZS5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvcGFnZXMvbXktbWFwcy5qcyIsIi9Vc2Vycy9jcmZyb2VobGljaC9EZXZlbG9wbWVudC9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvcGFnZXMvdGVybXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUNBQSxJQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUN4QyxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUN6QyxJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUM3QyxJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQztBQUMvQyxJQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQztBQUN6RCxJQUFNLFNBQVMsR0FBRyxNQUFNLENB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QUMsQ0FBQztBQUNoRSxZQUFJLFNBQVMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdkQsWUFBSSxTQUFTLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDOzs7Ozs7QUFNM0QsWUFBSSxFQUFFLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQztBQUM3QixlQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLGdCQUFJLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO0FBQ3JCLGdCQUFJLFdBQVcsR0FBRyxLQUFLLENBQUMsWUFBWSxDQUFDO0FBQ3JDLGdCQUFJLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFBLEdBQUksSUFBSSxDQUFDO0FBQzlELGdCQUFJLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFBLEdBQUksSUFBSSxDQUFDO0FBQzlELGdCQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7O0FBRTFELGVBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1NBQ3JFO0tBQ0osQ0FBQzs7OztBQUlGLFFBQUksQ0FBQyx5QkFBeUIsR0FBRyxVQUFTLFVBQVUsRUFBRSxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsZUFBZSxFQUFFOztBQUU3RixZQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxlQUFlLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDOzs7O0FBSTlFLFlBQUksWUFBWSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUM7QUFDdkMsWUFBSSxTQUFTLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUMsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyRSxZQUFJLFNBQVMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLE1BQU0sR0FBRyxHQUFHLEdBQUcsV0FBVyxDQUFDLENBQUM7OztBQUczRyxZQUFJLEVBQUUsR0FBRyxVQUFVLENBQUMsUUFBUSxDQUFDO0FBQzdCLGVBQU8sRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2QsZ0JBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFDckIsZ0JBQUksV0FBVyxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUM7QUFDckMsZ0JBQUksSUFBSSxHQUFHLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUEsR0FBSSxXQUFXLENBQUM7QUFDckUsZ0JBQUksSUFBSSxHQUFHLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUEsR0FBSSxXQUFXLENBQUM7QUFDckUsZ0JBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQzs7QUFFMUQsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztTQUN6RjtLQUNKLENBQUM7Ozs7O0FBS0YsUUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFTLFVBQVUsRUFBRTtBQUNsQyxZQUFJLFVBQVUsSUFBSSxVQUFVLEVBQ3hCLE9BQU8sSUFBSSxjQUFjLEVBQUUsQ0FBQyxLQUMzQixJQUFJLFVBQVUsSUFBSSxPQUFPLEVBQzFCLE9BQU8sSUFBSSxvQkFBb0IsRUFBRSxDQUFDLEtBQ2pDLElBQUksVUFBVSxJQUFJLFNBQVMsRUFDNUIsT0FBTyxJQUFJLGFBQWEsRUFBRSxDQUFDLEtBRTNCLE9BQU8sSUFBSSxtQkFBbUIsRUFBRSxDQUFDO0tBQ3hDLENBQUM7O0FBRUYsUUFBSSxDQUFDLHdCQUF3QixHQUFHLFlBQVc7QUFDdkMsZUFBTyxJQUFJLHFCQUFxQixFQUFFLENBQUM7S0FDdEMsQ0FBQzs7Ozs7O0FBTUYsYUFBUywyQkFBMkIsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRTtBQUM5RCxZQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDaEQsWUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2hELFlBQUksZUFBZSxHQUFHLENBQUMsQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQzdELFlBQUksZUFBZSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsZUFBZSxFQUFFLFVBQVMsS0FBSyxFQUFFO0FBQzVELG1CQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7U0FDMUQsQ0FBQyxDQUFDO0FBQ0gsWUFBSSxlQUFlLENBQUMsTUFBTSxFQUFFO0FBQ3hCLG1CQUFPLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUM3QixNQUFNO0FBQ0gsbUJBQU8sSUFBSSxDQUFDO1NBQ2Y7S0FDSjs7O0FBR0QsUUFBSSxDQUFDLGlCQUFpQixHQUFHLFVBQVMsS0FBSyxFQUFFO0FBQ3JDLFlBQUksU0FBUyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDeEIsWUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDO0FBQ2QsZUFBTyxDQUFDLENBQUMsZUFBZSxFQUFFO0FBQ3RCLHFCQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUNsQyxhQUFDLEdBQUcsQ0FBQyxDQUFDLGVBQWUsQ0FBQztTQUN6QjtBQUNELGVBQU8sU0FBUyxDQUFDO0tBQ3BCLENBQUM7Ozs7QUFJRixhQUFTLHFCQUFxQixHQUFHO0FBQzdCLFVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3hCOztBQUVELE1BQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLHFCQUFxQixFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFckQseUJBQXFCLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxZQUFXO0FBQ2xELGVBQU8sdUJBQXVCLENBQUM7S0FDbEMsQ0FBQzs7QUFFRix5QkFBcUIsQ0FBQyxTQUFTLENBQUMsUUFBUSxHQUFHLFVBQVMsSUFBSSxFQUFFOztBQUV0RCxZQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7Ozs7QUFJL0IsWUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixFQUFFLENBQUM7QUFDMUMsZUFBTyxNQUFNLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDbEIsZ0JBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7QUFDekIsZ0JBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFO0FBQ3BCLG9CQUFJLEdBQUcsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3pDLHFCQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOzthQUUxQztTQUNKOzs7QUFHRCx1QkFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3RCLFlBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDO0FBQ25DLGVBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2pCLGdCQUFJLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDOzs7Ozs7QUFNdkIsNEJBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDMUI7OztLQUdKLENBQUM7Ozs7QUFLRixhQUFTLHNCQUFzQixDQUFDLE1BQU0sRUFBRSxFQUV2Qzs7OztBQUlELGFBQVMsY0FBYyxHQUFHO0FBQ3RCLFVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3hCOztBQUVELE1BQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRTlDLGtCQUFjLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxZQUFXO0FBQzNDLGVBQU8sZ0JBQWdCLENBQUM7S0FDM0IsQ0FBQzs7QUFFRixrQkFBYyxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsVUFBUyxJQUFJLEVBQUU7QUFDL0MsWUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQy9CLGVBQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDOztBQUU1QyxZQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDOUIsWUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDOztBQUU5QixZQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUM7QUFDekMsZUFBTyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDZCxnQkFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUNwQixnQkFBSSxJQUFJLFlBQVksRUFBRSxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUU7QUFDL0Msb0JBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7O0FBRXhDLG9CQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOUMsb0JBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQzlCO1NBQ0o7O0FBRUQsZUFBTyxDQUFDLGlCQUFpQixDQUFDLGlCQUFpQixDQUFDLENBQUM7S0FDaEQsQ0FBQzs7OztBQUlGLGFBQVMsYUFBYSxHQUFHO0FBQ3JCLFVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3hCOztBQUVELE1BQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRTdDLGlCQUFhLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxZQUFXO0FBQzFDLGVBQU8sZUFBZSxDQUFDO0tBQzFCLENBQUM7O0FBRUYsaUJBQWEsQ0FBQyxTQUFTLENBQUMsUUFBUSxHQUFHLFVBQVMsSUFBSSxFQUFFO0FBQzlDLFlBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUNoRCxZQUFJLE1BQU0sR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3hDLFlBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUNuQyxZQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxNQUFNLEdBQUcsQ0FBQyxDQUFBLEFBQUMsQ0FBQztBQUN4RiwrQkFBdUIsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztBQUNwRCxZQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLENBQUM7S0FDcEQsQ0FBQzs7O0FBR0YsYUFBUyx1QkFBdUIsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUNwRCxZQUFJLE9BQU8sR0FBRyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN2QyxZQUFJLENBQUMsR0FBRyxNQUFNLENBQUM7QUFDZixZQUFJLENBQUMsR0FBRyxNQUFNLENBQUM7QUFDZixZQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDakIsWUFBSSxTQUFTLEdBQUcsTUFBTSxDQUFDO0FBQ3ZCLFNBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFVBQVMsSUFBSSxFQUFFO0FBQzNCLGdCQUFJLElBQUksWUFBWSxFQUFFLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRTtBQUMvQyxvQkFBSSxNQUFNLEdBQUcsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2xDLG9CQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM5QixzQkFBTSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxNQUFNLEdBQUcsQ0FBQyxDQUFDOzs7O0FBSW5ELG9CQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRTs7QUFFekIsNkJBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSx1QkFBdUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7O2lCQUU3RSxNQUFNO0FBQ0gsaUNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQztxQkFDM0M7OztBQUdELHdCQUFRLEVBQUUsQ0FBQztBQUNYLG9CQUFJLFFBQVEsR0FBRyxDQUFDLEVBQUU7O0FBQ2QscUJBQUMsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7aUJBQ3pDLE1BQU07O0FBQ0gscUJBQUMsR0FBRyxNQUFNLENBQUM7QUFDWCxxQkFBQyxHQUFHLFNBQVMsR0FBRyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQzNCLDRCQUFRLEdBQUcsQ0FBQyxDQUFDO2lCQUNoQjthQUNKO1NBQ0osQ0FBQyxDQUFDO0FBQ0gsZUFBTyxTQUFTLENBQUM7S0FDcEI7Ozs7QUFJRCxhQUFTLG9CQUFvQixHQUFHO0FBQzVCLFVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3hCOztBQUVELE1BQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLG9CQUFvQixFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFcEQsd0JBQW9CLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxZQUFXO0FBQ2pELGVBQU8sc0JBQXNCLENBQUM7S0FDakMsQ0FBQzs7QUFFRix3QkFBb0IsQ0FBQyxTQUFTLENBQUMsUUFBUSxHQUFHLFVBQVMsSUFBSSxFQUFFOztBQUVyRCxZQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDO0FBQ25FLFlBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQSxBQUFDLENBQUM7QUFDNUcsaUNBQXlCLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDOztLQUU5RCxDQUFDOzs7O0FBSUYsYUFBUyxtQkFBbUIsR0FBRztBQUMzQixVQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUN4Qjs7QUFFRCxNQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRW5ELHVCQUFtQixDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsWUFBVztBQUNoRCxlQUFPLHFCQUFxQixDQUFDO0tBQ2hDLENBQUM7O0FBRUYsdUJBQW1CLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxVQUFTLElBQUksRUFBRTs7O0FBR3BELFlBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUNuQyxZQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUEsQUFBQyxDQUFDO0FBQzVHLGlDQUF5QixDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQzs7S0FFOUQsQ0FBQzs7Ozs7O0FBTUYsYUFBUyx5QkFBeUIsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7QUFDNUQsWUFBSSxPQUFPLEdBQUcsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdkMsU0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsVUFBUyxJQUFJLEVBQUU7QUFDM0IsZ0JBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQztBQUNmLGdCQUFJLElBQUksSUFBSSxHQUFHLEVBQ1gsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQzs7QUFFekMsZ0JBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ25DLGtCQUFNLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDOUQsZ0JBQUksSUFBSSxDQUFDLGtCQUFrQixFQUFFOztBQUV6QixzQkFBTSxHQUFHLHlCQUF5QixDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO2FBQ2xFO1NBQ0osQ0FBQyxDQUFDO0FBQ0gsZUFBTyxNQUFNLEdBQUcsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDN0M7OztBQUdELGFBQVMsaUJBQWlCLENBQUMsS0FBSyxFQUFFO0FBQzlCLFlBQUksT0FBTyxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQzVCLFlBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDO0FBQ3BDLGVBQU8sRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2QsZ0JBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFDcEIsZ0JBQUksSUFBSSxZQUFZLEVBQUUsQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFO0FBQy9DLHVCQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ3JCO1NBQ0o7QUFDRCxlQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFLFVBQVMsTUFBTSxFQUFFO0FBQ2hELG1CQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1NBQzVCLENBQUMsQ0FBQztLQUNOOzs7OztBQUtELGFBQVMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFO0FBQzVCLFlBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTtBQUN6QyxtQkFBTztTQUNWOzs7Ozs7Ozs7O0FBVUQsWUFBSSxpQkFBaUIsR0FBRywyQkFBMkIsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztBQUNuRyxZQUFJLGVBQWUsR0FBRywyQkFBMkIsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0FBQzNGLFlBQUksU0FBUyxHQUFJLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQUFBQyxDQUFDOzs7O0FBSWhHLFlBQUksS0FBSyxHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNoRCxZQUFJLFdBQVcsR0FBSSxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsQUFBQyxDQUFDOzs7QUFHcEMsWUFBSSxpQkFBaUIsRUFBRTtBQUNuQixzQ0FBMEIsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLGlCQUFpQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUMxRSxNQUFNLElBQUcsV0FBVyxFQUFFO0FBQ25CLHNDQUEwQixDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztTQUMzQyxNQUFNO0FBQ0gsZ0NBQW9CLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDOUI7Ozs7QUFJRCxZQUFJLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUN2RSxnQkFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUM7QUFDakIsMEJBQWMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDOUIsTUFBTTtBQUNILGdCQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQztBQUNqQiwwQkFBYyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztTQUMvQjtLQUNKOzs7QUFHRCxhQUFTLGdCQUFnQixDQUFDLElBQUksRUFBRTtBQUM1QixlQUFPLEtBQUssQ0FBQztLQUNoQjs7QUFFRCxhQUFTLGNBQWMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFOztBQUVoQyxZQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO0FBQ3pCLFlBQUksRUFBRSxFQUFFO0FBQ0osbUJBQU8sRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2Qsb0JBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFDckIscUJBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO0FBQ3JCLG9CQUFJLElBQUksRUFBRTtBQUNOLHlCQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztpQkFDaEM7YUFDSjtTQUNKO0tBQ0o7Ozs7QUFJRCxhQUFTLDBCQUEwQixDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFO0FBQzdELFlBQUksY0FBYyxJQUFJLE1BQU0sRUFBRTtBQUMxQixnQkFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztBQUM3QixnQkFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztTQUM5QixNQUFNLElBQUksY0FBYyxJQUFJLE9BQU8sRUFBRTtBQUNsQyxnQkFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztBQUM5QixnQkFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztTQUMvQjs7O0FBR0QsWUFBSSxVQUFVLEdBQUcsR0FBRyxDQUFDOztBQUVyQixZQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDdEMsWUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDOztBQUVwQyxZQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztBQUM5QixZQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLFVBQVUsQ0FBQyxDQUFBLEdBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQSxBQUFDLENBQUM7OztBQUdoRyxZQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQzVCLFlBQUksQ0FBQyxvQkFBb0IsR0FBRyxDQUFDLENBQUM7QUFDOUIsWUFBSSxDQUFDLGtCQUFrQixHQUFHLENBQUMsQ0FBQztLQUMvQjs7O0FBR0QsYUFBUywwQkFBMEIsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFO0FBQzdDLFlBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7QUFDaEMsWUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztBQUM5QixZQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDOzs7OztBQUs1QixZQUFJLFNBQVMsR0FBRyxFQUFFLElBQUksS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUEsQUFBQyxDQUFDO0FBQ3ZDLFlBQUksY0FBYyxHQUFHLEVBQUUsQ0FBQztBQUN4QixZQUFJLEtBQUssQ0FBQyxTQUFTLEVBQUU7QUFDakIscUJBQVMsR0FBRyxHQUFHLElBQUksS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUEsQUFBQyxDQUFDO0FBQ3BDLDBCQUFjLEdBQUcsR0FBRyxDQUFDO1NBQ3hCOzs7QUFHRCxZQUFJLGVBQWUsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3hELGlCQUFTLElBQUksZUFBZSxDQUFDO0FBQzdCLHNCQUFjLElBQUksZUFBZSxDQUFDOztBQUVsQyxZQUFJLFVBQVUsR0FBRyxDQUFDLEdBQUcsU0FBUyxHQUFHLENBQUMsQ0FBQzs7QUFFbkMsWUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLFVBQVUsR0FBRyxjQUFjLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQSxHQUFJLEtBQUssQ0FBQyxXQUFXLENBQUM7O0tBRXBGOzs7QUFHRCxhQUFTLG9CQUFvQixDQUFDLElBQUksRUFBRTtBQUNoQyxZQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0FBQ2hDLFlBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7QUFDOUIsWUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUM5QixZQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQzVCLFlBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0tBQ3ZCOzs7Ozs7O0FBT0QsUUFBSSxDQUFDLHdCQUF3QixHQUFHLFVBQVMsSUFBSSxFQUFFO0FBQzNDLFlBQUksWUFBWSxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFekMsWUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUU7QUFDbEMsZUFBRyxFQUFFLG1CQUFtQixDQUFDLElBQUksQ0FBQztTQUNqQyxDQUFDLENBQUM7OztBQUdILFlBQUksS0FBSyxHQUFHO0FBQ1IsaUJBQUssRUFBRSxDQUFDO0FBQ1IsaUJBQUssRUFBRSxDQUFDO0FBQ1IsdUJBQVcsRUFBRSxDQUFDO0FBQ2QscUJBQVMsRUFBRSxLQUFLO1NBQ25CLENBQUM7O0FBRUYsYUFBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDdkMsZ0JBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUU7QUFDM0IscUJBQUssR0FBRztBQUNKLHlCQUFLLEVBQUUsQ0FBQztBQUNSLHlCQUFLLEVBQUUsU0FBUyxDQUFDLE1BQU07QUFDdkIsK0JBQVcsRUFBRSxrQkFBa0IsQ0FBQyxJQUFJLENBQUM7aUJBQ3hDLENBQUM7YUFDTDtTQUNKOztBQUVELGFBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUNuQyxnQkFBSSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFO0FBQ3hCLHFCQUFLLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQzthQUMxQjtTQUNKO0FBQ0QsZUFBTyxLQUFLLENBQUM7S0FDaEIsQ0FBQzs7QUFFRixRQUFJLGFBQWEsR0FBRyxJQUFJLENBQUM7OztBQUd6QixhQUFTLGVBQWUsQ0FBQyxPQUFPLEVBQUU7O0FBRTlCLFlBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxJQUFJLE9BQU8sRUFBRTtBQUNoQyxnQkFBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7QUFDeEIsZ0JBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUMvQixnQkFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7QUFDbkMsbUJBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2pCLG9CQUFJLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQ3ZCLG9CQUFJLEdBQUcsR0FBRyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNwQyxvQkFBSSxHQUFHLEVBQUU7QUFDTCx3QkFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUM7QUFDcEIsMkJBQUcsRUFBRSxHQUFHO0FBQ1IsNEJBQUksRUFBRSxJQUFJO0FBQ1YsaUNBQVMsRUFBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssR0FBRyxDQUFDLEFBQUM7cUJBQ3pDLENBQUMsQ0FBQztpQkFDTjthQUNKO1NBQ0o7QUFDRCxlQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7S0FDN0I7Ozs7OztBQU1ELGFBQVMsbUJBQW1CLENBQUMsSUFBSSxFQUFFOztBQUUvQixZQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUU7QUFDcEIsZ0JBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUU5RSxtQkFBTyxHQUFHLENBQUM7U0FDZCxNQUFNO0FBQ0gsbUJBQU8sSUFBSSxDQUFDO1NBQ2Y7S0FDSjs7Ozs7QUFLRCxhQUFTLGtCQUFrQixDQUFDLElBQUksRUFBRTtBQUM5QixZQUFJLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLEVBQUU7QUFDbkYsbUJBQU8sQ0FBQyxDQUFDO1NBQ1osTUFBTTtBQUNILG1CQUFPLENBQUMsQ0FBQyxDQUFDO1NBQ2I7S0FDSjs7OztBQUlELFFBQUksQ0FBQyxPQUFPLEdBQUcsVUFBUyxJQUFJLEVBQUU7QUFDMUIsZUFBTyxJQUFJLFlBQVksRUFBRSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxLQUFLLFNBQVMsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUM7S0FDbkgsQ0FBQzs7QUFFRixRQUFJLENBQUMsT0FBTyxHQUFHLFVBQVMsSUFBSSxFQUFFO0FBQzFCLGVBQU8sSUFBSSxZQUFZLEVBQUUsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxHQUFHLENBQUM7S0FDNUUsQ0FBQzs7QUFFRixRQUFJLENBQUMsT0FBTyxHQUFHLFVBQVMsSUFBSSxFQUFFO0FBQzFCLGVBQU8sSUFBSSxZQUFZLEVBQUUsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxHQUFHLENBQUM7S0FDNUUsQ0FBQzs7QUFFRixRQUFJLENBQUMsT0FBTyxHQUFHLFVBQVMsR0FBRyxFQUFFO0FBQ3pCLGVBQU8sR0FBRyxZQUFZLEVBQUUsQ0FBQyxLQUFLLENBQUM7S0FDbEMsQ0FBQztDQUNMLENBQUM7Ozs7O0FDdjhCRixJQUFJLHFCQUFxQixHQUFHLE9BQU8sQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFDOzs7O0FBSTdFLGNBQWMsQ0FBQyxHQUFHLEdBQUcsVUFBUyxNQUFNLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTs7QUFFNUUsUUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDOzs7QUFHaEIsUUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUM7QUFDbkIsUUFBSSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUM7Ozs7QUFJckIsUUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDOzs7QUFHcEIsUUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3RCLFFBQUksWUFBWSxHQUFHLElBQUksQ0FBQztBQUN4QixRQUFJLFNBQVMsR0FBRyxJQUFJLENBQUM7QUFDckIsUUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDOztBQUV0QixRQUFJLFFBQVEsR0FBRyxJQUFJLENBQUM7QUFDcEIsUUFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDO0FBQ3pCLFFBQUksVUFBVSxHQUFHLElBQUksQ0FBQztBQUN0QixRQUFJLFVBQVUsR0FBRyxJQUFJLENBQUM7QUFDdEIsUUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3RCLFFBQUksTUFBTSxHQUFHLElBQUksQ0FBQztBQUNsQixRQUFJLEdBQUcsR0FBRyxJQUFJLENBQUM7Ozs7QUFJZixhQUFTLGFBQWEsR0FBRztBQUNyQixlQUFPLENBQ0gsVUFBVSxFQUNWLFlBQVksRUFDWixTQUFTLEVBQ1QsVUFBVTs7QUFFVixnQkFBUSxFQUNSLGFBQWEsRUFDYixVQUFVLEVBQ1YsVUFBVSxFQUNWLFVBQVUsRUFDVixNQUFNLEVBQ04sR0FBRyxDQUNOLENBQUM7S0FDTDs7QUFFRCxRQUFJLENBQUMsWUFBWSxHQUFHLFlBQVc7QUFDM0IsZUFBTyxVQUFVLENBQUM7S0FDckIsQ0FBQztBQUNGLFFBQUksQ0FBQyxjQUFjLEdBQUcsWUFBVztBQUM3QixlQUFPLFlBQVksQ0FBQztLQUN2QixDQUFDO0FBQ0YsUUFBSSxDQUFDLFdBQVcsR0FBRyxZQUFXO0FBQzFCLGVBQU8sU0FBUyxDQUFDO0tBQ3BCLENBQUM7QUFDRixRQUFJLENBQUMsWUFBWSxHQUFHLFlBQVc7QUFDM0IsZUFBTyxVQUFVLENBQUM7S0FDckIsQ0FBQzs7QUFFRixRQUFJLENBQUMsVUFBVSxHQUFHLFlBQVc7QUFDekIsZUFBTyxRQUFRLENBQUM7S0FDbkIsQ0FBQztBQUNGLFFBQUksQ0FBQyxlQUFlLEdBQUcsWUFBVztBQUM5QixlQUFPLGFBQWEsQ0FBQztLQUN4QixDQUFDO0FBQ0YsUUFBSSxDQUFDLFlBQVksR0FBRyxZQUFXO0FBQzNCLGVBQU8sVUFBVSxDQUFDO0tBQ3JCLENBQUM7QUFDRixRQUFJLENBQUMsWUFBWSxHQUFHLFlBQVc7QUFDM0IsZUFBTyxVQUFVLENBQUM7S0FDckIsQ0FBQztBQUNGLFFBQUksQ0FBQyxZQUFZLEdBQUcsWUFBVztBQUMzQixlQUFPLFVBQVUsQ0FBQztLQUNyQixDQUFDO0FBQ0YsUUFBSSxDQUFDLFFBQVEsR0FBRyxZQUFXO0FBQ3ZCLGVBQU8sTUFBTSxDQUFDO0tBQ2pCLENBQUM7QUFDRixRQUFJLENBQUMsS0FBSyxHQUFHLFlBQVc7QUFDcEIsZUFBTyxHQUFHLENBQUM7S0FDZCxDQUFDOzs7O0FBSUYsUUFBSSxDQUFDLElBQUksR0FBRyxZQUFXOzs7QUFHbkIsa0JBQVUsR0FBRyxJQUFJLGNBQWMsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMvRCxvQkFBWSxHQUFHLElBQUksY0FBYyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM5RSxpQkFBUyxHQUFHLElBQUksY0FBYyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzdELGtCQUFVLEdBQUcsSUFBSSxjQUFjLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFeEQsZ0JBQVEsR0FBRyxJQUFJLGNBQWMsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3BELHFCQUFhLEdBQUcsSUFBSSxjQUFjLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM5RCxrQkFBVSxHQUFHLElBQUksY0FBYyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDeEQsa0JBQVUsR0FBRyxJQUFJLGNBQWMsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3hELGtCQUFVLEdBQUcsSUFBSSxjQUFjLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN4RCxjQUFNLEdBQUcsSUFBSSxjQUFjLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNoRCxXQUFHLEdBQUcsSUFBSSxjQUFjLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDOzs7QUFHcEYsU0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBRSxVQUFTLFNBQVMsRUFBRTtBQUN4QyxnQkFBSSxTQUFTLElBQUksU0FBUyxDQUFDLElBQUksRUFDM0IsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ3hCLENBQUMsQ0FBQzs7O0FBR0gsZ0JBQVEsR0FBRyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDckMsZ0JBQVEsQ0FBQyx1QkFBdUIsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUNsRCxnQkFBUSxDQUFDLG1CQUFtQixHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQzlDLGdCQUFRLENBQUMsbUJBQW1CLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7QUFDOUMsZ0JBQVEsQ0FBQyxzQkFBc0IsR0FBRyxLQUFLLENBQUM7QUFDeEMsZ0JBQVEsQ0FBQyxvQkFBb0IsR0FBRyxLQUFLLENBQUM7QUFDdEMsZ0JBQVEsQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDO0FBQ3ZCLGdCQUFRLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO0FBQ3RELGdCQUFRLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLElBQUkscUJBQXFCLEVBQUUsQ0FBQyxDQUFDOztBQUU3RSxpQkFBUyxFQUFFLENBQUM7QUFDWixrQkFBVSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNuQywyQkFBbUIsRUFBRSxDQUFDOztBQUV0QixrQkFBVSxDQUFDLGVBQWUsRUFBRSxDQUFDOzs7QUFHN0IsY0FBTSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsVUFBUyxRQUFRLEVBQUUsUUFBUSxFQUFFO0FBQ3JELGdCQUFJLENBQUMsaUJBQWlCLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1NBQzlDLENBQUMsQ0FBQztLQUNOLENBQUM7OztBQUdGLFFBQUksQ0FBQyxpQkFBaUIsR0FBRyxVQUFTLFFBQVEsRUFBRSxRQUFRLEVBQUU7OztBQUdsRCxTQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxFQUFFLFVBQVMsU0FBUyxFQUFFO0FBQ3hDLGdCQUFJLFNBQVMsSUFBSSxTQUFTLENBQUMsaUJBQWlCLEVBQUU7QUFDMUMseUJBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7YUFDbkQ7U0FDSixDQUFDLENBQUM7OztLQUdOLENBQUM7O0FBRUYsUUFBSSxDQUFDLFVBQVUsR0FBRyxZQUFXO0FBQ3pCLGVBQU8sUUFBUSxDQUFDO0tBQ25CLENBQUM7OztBQUdGLGFBQVMsU0FBUyxHQUFHOztBQUVqQixnQkFBUSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7Ozs7QUFJL0IsWUFBSSxRQUFRLEdBQUcsUUFBUSxDQUFDLFdBQVcsQ0FBQyxlQUFlLENBQUM7QUFDcEQsZ0JBQVEsQ0FBQyxVQUFVLEdBQUcsWUFBVztBQUM3QixjQUFFLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3ZELGdCQUFJLFFBQVEsQ0FBQyxpQkFBaUIsS0FBSyxJQUFJLEVBQUU7QUFDckMsd0JBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQzs7QUFFcEMsd0JBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsVUFBUyxDQUFDLEVBQUU7QUFDL0Qsd0JBQUksQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFO0FBQzlCLDBCQUFFLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDO3FCQUN4RjtpQkFDSixDQUFDLENBQUM7YUFDTjtTQUNKLENBQUM7OztBQUdGLGdCQUFRLENBQUMsY0FBYyxDQUFDLFNBQVMsR0FBRyxZQUFXO0FBQzNDLGdCQUFJLENBQUMsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDO0FBQzNCLGdCQUFJLEdBQUcsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDO0FBQ2xDLGdCQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxLQUFLLENBQUMsRUFBRTtBQUNyQixtQkFBRyxDQUFDLGVBQWUsRUFBRSxDQUFDO2FBQ3pCLE1BQU07QUFDSCxrQkFBRSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUNuRDtTQUNKLENBQUM7Ozs7O0FBS0YsZ0JBQVEsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDOztBQUUxQixnQkFBUSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQzs7Ozs7Ozs7O0FBU25FLGdCQUFRLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsR0FBRztBQUNqRCxnQkFBSSxFQUFFLFVBQVU7U0FDbkIsQ0FBQzs7O0FBR0YsZ0JBQVEsQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsaUJBQWlCLEdBQUcsZUFBZSxFQUFFLENBQUM7OztBQUc3RSxnQkFBUSxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO0tBQ3REOzs7O0FBSUQsYUFBUyxtQkFBbUIsR0FBRzs7O0FBRzNCLFlBQUksYUFBYSxHQUFHLENBQ2hCLHdCQUF3QixFQUN4QixrQkFBa0IsRUFDbEIseUJBQXlCLEVBQ3pCLGlCQUFpQixFQUNqQixnQkFBZ0IsRUFDaEIsbUJBQW1CLEVBQ25CLGtCQUFrQixFQUNsQixhQUFhLEVBQ2IsYUFBYSxFQUNiLGtCQUFrQixFQUNsQixpQkFBaUIsRUFDakIsV0FBVyxFQUNYLGNBQWMsRUFDZCx1QkFBdUIsQ0FDMUIsQ0FBQztBQUNGLFNBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLFVBQVMsU0FBUyxFQUFFO0FBQ3RDLG9CQUFRLENBQUMsa0JBQWtCLENBQUMsU0FBUyxFQUFFLFVBQVMsQ0FBQyxFQUFFO0FBQy9DLHFDQUFxQixDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQzthQUN2QyxDQUFDLENBQUM7U0FDTixDQUFDLENBQUM7O0FBRUgsZ0JBQVEsQ0FBQyxrQkFBa0IsQ0FBQywwQkFBMEIsRUFBRSxVQUFTLENBQUMsRUFBRTs7O1NBR25FLENBQUMsQ0FBQztLQUNOOzs7O0FBSUQsYUFBUyxxQkFBcUIsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFO0FBQ3pDLFlBQUksQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdEMsU0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBRSxVQUFTLFNBQVMsRUFBRTtBQUN4QyxnQkFBSSxTQUFTLElBQUksU0FBUyxDQUFDLGtCQUFrQixFQUN6QyxTQUFTLENBQUMsa0JBQWtCLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ2xELENBQUMsQ0FBQztBQUNILGNBQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQztLQUN0Qjs7QUFFRCxRQUFJLENBQUMsa0JBQWtCLEdBQUcsVUFBUyxTQUFTLEVBQUUsQ0FBQyxFQUFFOztBQUU3QyxZQUFJLFNBQVMsSUFBSSxrQkFBa0IsRUFBRTtBQUNqQyw0QkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUN2QixNQUFNLElBQUksU0FBUyxJQUFJLGlCQUFpQixFQUFFO0FBQ3ZDLDJCQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDdEIsTUFBTSxJQUFJLFNBQVMsSUFBSSxhQUFhLEVBQUU7QUFDbkMsdUJBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNsQixNQUFNLElBQUksU0FBUyxJQUFJLHlCQUF5QixFQUFFO0FBQy9DLGVBQUcsQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7U0FDaEMsTUFBTSxJQUFJLFNBQVMsSUFBSSxXQUFXLEVBQUU7QUFDakMscUJBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNiLCtCQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzFCLE1BQU0sSUFBSSxTQUFTLElBQUksY0FBYyxFQUFFO0FBQ3BDLHdCQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDbkIsTUFBTSxJQUFJLFNBQVMsSUFBSSxrQkFBa0IsRUFBRTtBQUN4Qyw0QkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUN2QixNQUFNLElBQUksU0FBUyxJQUFJLGlCQUFpQixFQUFFO0FBQ3ZDLDJCQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDdEI7S0FDSixDQUFDOzs7QUFHRixhQUFTLGdCQUFnQixDQUFDLENBQUMsRUFBRTs7QUFFekIsZ0JBQVEsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO0FBQ25DLFdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0FBQ3hCLFlBQUksSUFBSSxDQUFDLHFCQUFxQixFQUFFLEVBQUU7QUFDOUIsZUFBRyxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1NBQ3RDO0tBQ0o7O0FBRUQsYUFBUyxXQUFXLENBQUMsQ0FBQyxFQUFFOztBQUVwQixZQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ3RCLFlBQUksRUFBRSxLQUFLLFlBQVksRUFBRSxDQUFDLEtBQUssQ0FBQSxBQUFDLEVBQUU7QUFDOUIsbUJBQU87U0FDVjtBQUNELGdCQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxHQUFHLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxrQkFBa0IsSUFBSSxNQUFNLENBQUMsQ0FBQztBQUM3RyxnQkFBUSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3RDOzs7OztBQUtELGFBQVMsU0FBUyxDQUFDLENBQUMsRUFBRTtBQUNsQixZQUFJLElBQUksR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDOztBQUVyQixZQUFJLElBQUksQ0FBQyxVQUFVLElBQUksR0FBRyxFQUFFO0FBQ3hCLG9CQUFRLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLHNCQUFzQixDQUFDLENBQUM7QUFDeEQsb0JBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ3pELG9CQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUMzRCxvQkFBUSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1NBQzVEOzthQUVJLElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSxHQUFHLEVBQUU7QUFDN0Isd0JBQVEsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUN0RCx3QkFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDekQsd0JBQVEsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsb0JBQW9CLENBQUMsQ0FBQzthQUMxRDtLQUNKOzs7OztBQUtELGFBQVMsWUFBWSxDQUFDLENBQUMsRUFBRTtBQUNyQixZQUFJLElBQUksR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ3JCLFlBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEtBQUssU0FBUyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxLQUFLLEdBQUcsRUFBRTtBQUNoRSxvQkFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDM0Qsb0JBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQzVEO0tBQ0o7O0FBRUQsYUFBUyxtQkFBbUIsQ0FBQyxDQUFDLEVBQUU7QUFDNUIsWUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUNyQixZQUFJLElBQUksQ0FBQyxVQUFVLElBQUksR0FBRyxFQUFFO0FBQ3hCLG9CQUFRLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLHVCQUF1QixDQUFDLENBQUM7QUFDekQsb0JBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLDRCQUE0QixDQUFDLENBQUM7QUFDMUcsb0JBQVEsQ0FBQyxpQkFBaUIsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1NBQ3ZEO0tBQ0o7O0FBRUQsYUFBUyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUU7QUFDekIsWUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDL0IsZUFBTyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDakIsZ0JBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDdkIsZ0JBQUksSUFBSSxZQUFZLEVBQUUsQ0FBQyxLQUFLLEVBQUU7O2FBRTdCO1NBQ0o7S0FDSjs7O0FBR0QsYUFBUyxlQUFlLENBQUMsQ0FBQyxFQUFFOztBQUV4QixZQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUMvQixlQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNqQixnQkFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztBQUN2QixnQkFBSSxJQUFJLFlBQVksRUFBRSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO0FBQzdDLG9CQUFJLEdBQUcsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUV4Qyx3QkFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsQUFBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBSSxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUEsQUFBQyxDQUFDLENBQUM7QUFDcEYsb0JBQUksQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUNwQztTQUNKO0tBQ0o7O0FBRUQsYUFBUyxlQUFlLENBQUMsQ0FBQyxFQUFFO0FBQ3hCLFlBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO0FBQy9CLGVBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2pCLGdCQUFJLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQ3ZCLGdCQUFJLElBQUksWUFBWSxFQUFFLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7QUFDN0Msb0JBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7O0FBRXhDLHdCQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxBQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFJLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUMsQ0FBQztBQUNwRixvQkFBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQ3BDO1NBQ0o7S0FDSjs7OztBQUlELFFBQUksQ0FBQyxnQkFBZ0IsR0FBRyxZQUFXO0FBQy9CLFlBQUksTUFBTSxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbkMsWUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQztBQUMzQixlQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNqQixnQkFBSSxLQUFLLENBQUMsS0FBSyxZQUFZLEVBQUUsQ0FBQyxLQUFLLEVBQUU7QUFDakMsc0JBQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQzNCO1NBQ0o7QUFDRCxlQUFPLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztLQUNyRCxDQUFDOzs7OztBQUtGLFFBQUksQ0FBQyxjQUFjLEdBQUcsWUFBVztBQUM3QixZQUFJLFFBQVEsSUFBSSxJQUFJLElBQUksUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUNoRCxPQUFPLEtBQUssQ0FBQzs7QUFFakIsWUFBSSxFQUFFLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUM7QUFDckMsZUFBTyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDZCxnQkFBSSxFQUFFLEVBQUUsQ0FBQyxLQUFLLFlBQVksRUFBRSxDQUFDLEtBQUssQ0FBQSxBQUFDLEVBQy9CLE9BQU8sS0FBSyxDQUFDO1NBQ3BCOztBQUVELGVBQU8sSUFBSSxDQUFDO0tBQ2YsQ0FBQzs7O0FBR0YsUUFBSSxDQUFDLGFBQWEsR0FBRyxZQUFXO0FBQzVCLGVBQU8sUUFBUSxLQUFLLElBQUksSUFBSSxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsWUFBWSxFQUFFLENBQUMsS0FBSyxDQUFDO0tBQy9HLENBQUM7OztBQUdGLFFBQUksQ0FBQyxzQkFBc0IsR0FBRyxZQUFXO0FBQ3JDLFlBQUksUUFBUSxLQUFLLElBQUksSUFBSSxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsWUFBWSxFQUFFLENBQUMsS0FBSyxFQUFFO0FBQ3RHLG1CQUFPLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDckMsTUFBTTtBQUNILG1CQUFPLElBQUksQ0FBQztTQUNmO0tBQ0osQ0FBQzs7QUFFRixRQUFJLENBQUMsMEJBQTBCLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDOUMsWUFBSSxRQUFRLEtBQUssSUFBSSxJQUFJLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsRUFDakQsT0FBTyxLQUFLLENBQUM7O0FBRWpCLFlBQUksRUFBRSxHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO0FBQ3JDLGVBQU8sRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2QsZ0JBQUksRUFBRSxFQUFFLENBQUMsS0FBSyxZQUFZLEVBQUUsQ0FBQyxLQUFLLENBQUEsQUFBQyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsZUFBZSxJQUFJLEtBQUssRUFDcEUsT0FBTyxLQUFLLENBQUM7U0FDcEI7O0FBRUQsZUFBTyxJQUFJLENBQUM7S0FDZixDQUFDOztBQUVGLFFBQUksQ0FBQyw4QkFBOEIsR0FBRyxVQUFTLEtBQUssRUFBRTtBQUNsRCxZQUFJLFFBQVEsS0FBSyxJQUFJLElBQUksUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUNqRCxPQUFPLEtBQUssQ0FBQzs7QUFFakIsWUFBSSxFQUFFLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUM7QUFDckMsZUFBTyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDZCxnQkFBSSxTQUFTLEdBQUcsUUFBUSxDQUFDLGlCQUFpQixDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNyRCxnQkFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsRUFDakMsT0FBTyxLQUFLLENBQUM7U0FDcEI7O0FBRUQsZUFBTyxJQUFJLENBQUM7S0FDZixDQUFDOztBQUVGLFFBQUksQ0FBQywwQkFBMEIsR0FBRyxZQUFXO0FBQ3pDLFlBQUksUUFBUSxLQUFLLElBQUksSUFBSSxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQ2pELE9BQU8sS0FBSyxDQUFDOztBQUVqQixZQUFJLEVBQUUsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQztBQUNyQyxlQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLGdCQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxPQUFPLEVBQUU7QUFDcEQsdUJBQU8sSUFBSSxDQUFDO2FBQ2Y7U0FDSjs7QUFFRCxlQUFPLEtBQUssQ0FBQztLQUNoQixDQUFDOzs7QUFHRixRQUFJLENBQUMscUJBQXFCLEdBQUcsWUFBVztBQUNwQyxZQUFJLFFBQVEsS0FBSyxJQUFJLElBQUksUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUNqRCxPQUFPLEtBQUssQ0FBQzs7QUFFakIsWUFBSSxFQUFFLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUM7QUFDckMsZUFBTyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDZCxnQkFBSSxFQUFFLEVBQUUsQ0FBQyxLQUFLLFlBQVksRUFBRSxDQUFDLElBQUksQ0FBQSxBQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFDN0QsT0FBTyxLQUFLLENBQUM7U0FDcEI7O0FBRUQsZUFBTyxJQUFJLENBQUM7S0FDZixDQUFDOzs7QUFHRixRQUFJLENBQUMsb0JBQW9CLEdBQUcsWUFBVztBQUNuQyxlQUFPLFFBQVEsS0FBSyxJQUFJLElBQUksUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLFlBQVksRUFBRSxDQUFDLElBQUksQ0FBQztLQUM5RyxDQUFDOzs7O0FBSUYsUUFBSSxDQUFDLE1BQU0sR0FBRyxVQUFTLElBQUksRUFBRTtBQUN6QixnQkFBUSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6QyxnQkFBUSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7S0FDN0QsQ0FBQTs7QUFFRCxRQUFJLENBQUMsSUFBSSxHQUFHLFVBQVMsSUFBSSxFQUFFOztBQUV2QixZQUFJLEdBQUcsSUFBSSxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO0FBQ25DLGdCQUFRLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3pDLFdBQUcsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUM1QyxXQUFHLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQzs7QUFFdkQsWUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQ2xCLGdCQUFRLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztBQUNuQyxnQkFBUSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO0FBQ3RDLGdCQUFRLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUMxRCxpQkFBUyxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztBQUNwQyxnQkFBUSxDQUFDLFVBQVUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUM7QUFDdEMsY0FBTSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7O0FBRWpGLFlBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7OztBQUd0QyxZQUFJLE1BQU0sQ0FBQyxVQUFVLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUU7QUFDM0QsZUFBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztTQUNyQzs7YUFFSSxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sSUFBSSxVQUFVLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxNQUFNLEVBQUU7QUFDL0QsMEJBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDM0I7S0FHSixDQUFDOztBQUVGLFFBQUksQ0FBQyxjQUFjLEdBQUcsWUFBVztBQUM3QixnQkFBUSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDbkQsV0FBRyxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNyQixnQkFBUSxDQUFDLHVCQUF1QixFQUFFLENBQUM7QUFDbkMsZ0JBQVEsQ0FBQyxXQUFXLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztBQUN0QyxXQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDaEIsY0FBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7OztBQUd0QixZQUFJLE1BQU0sQ0FBQyxVQUFVLEVBQUU7QUFDbkIsZUFBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztTQUNyQzs7YUFFSSxJQUFJLFVBQVUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLE1BQU0sRUFBRTtBQUM1QywwQkFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUMzQjtLQUVKLENBQUM7OztBQUdGLFFBQUksQ0FBQyxVQUFVLEdBQUcsWUFBVzs7QUFFekIsU0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBRSxVQUFTLFFBQVEsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFO0FBQ2pFLGdCQUFJLFFBQVEsQ0FBQyxXQUFXLEVBQUU7QUFDdEIsdUJBQU8sUUFBUSxDQUFDLFdBQVcsQ0FBQztBQUM1Qix3QkFBUSxDQUFDLFFBQVEsR0FBRyxXQUFXLENBQUM7YUFDbkM7U0FDSixDQUFDLENBQUM7Ozs7QUFJSCxTQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLFVBQVMsUUFBUSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7QUFDakUsZ0JBQUksWUFBWSxHQUFHLEVBQUUsQ0FBQztBQUN0QixhQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEVBQUUsVUFBUyxHQUFHLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtBQUNwRCxvQkFBSSxHQUFHLElBQUksUUFBUSxDQUFDLElBQUksSUFBSSxHQUFHLElBQUksUUFBUSxDQUFDLEVBQUUsRUFBRTs7QUFFNUMsZ0NBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7aUJBQzFCO2FBQ0osQ0FBQyxDQUFDO0FBQ0gsb0JBQVEsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxDQUFDO1NBQ3ZFLENBQUMsQ0FBQztLQUNOLENBQUM7Ozs7Ozs7O0FBUUYsUUFBSSxDQUFDLGdCQUFnQixHQUFHLFVBQVMsT0FBTyxFQUFFO0FBQ3RDLGNBQU0sQ0FBQyxTQUFTLENBQUMsWUFBVzs7QUFFeEIsa0JBQU0sQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7OztBQUcvQyxrQkFBTSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxZQUFZLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQztTQUM5RCxDQUFDLENBQUM7S0FDTixDQUFDOzs7O0FBSUYsUUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFTLEVBQUUsRUFBRTtBQUM1QixhQUFLLENBQUMsR0FBRyxDQUFDLGdCQUFnQixHQUFHLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFTLFFBQVEsRUFBRTtBQUNyRCxnQkFBSSxRQUFRLENBQUMsTUFBTSxLQUFLLEdBQUcsRUFBRTtBQUN6QixvQkFBSTs7QUFFQSw0QkFBUSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbEQsNEJBQVEsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO0FBQ25DLDRCQUFRLENBQUMsV0FBVyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7QUFDdkMsNkJBQVMsQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLENBQUM7QUFDckMsNEJBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDN0IsNEJBQVEsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO2lCQUM5QixDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQ1IseUJBQUssQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDOztpQkFFM0M7YUFDSjtTQUNKLENBQUMsQ0FBQztLQUNOLENBQUM7Ozs7O0FBS0YsUUFBSSxDQUFDLGlCQUFpQixHQUFHLFVBQVMsR0FBRyxFQUFFO0FBQ25DLFlBQUksTUFBTSxDQUFDLE9BQU8sRUFBRTtBQUNoQixvQkFBUSxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUM7U0FDN0I7S0FDSixDQUFDOzs7OztBQUtGLGFBQVMsZUFBZSxHQUFHO0FBQ3ZCLGVBQU87QUFDSCxnQkFBSSxFQUFFLE1BQU07QUFDWixtQkFBTyxFQUFFLElBQUk7QUFDYixrQkFBTSxFQUFFLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLGtCQUFrQixJQUFJLE1BQU07QUFDOUQscUJBQVMsRUFBRSxJQUFJO0FBQ2YscUJBQVMsRUFBRSxJQUFJO1NBQ2xCLENBQUM7S0FDTDs7QUFFRCxRQUFJLENBQUMsWUFBWSxHQUFHLFVBQVMsS0FBSyxFQUFFO0FBQ2hDLFlBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFO0FBQ2pCLG1CQUFPLElBQUksQ0FBQztTQUNmOztBQUVELFlBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNsRCxZQUFJLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLGVBQWUsRUFBRSxFQUFFO0FBQ25DLGlCQUFLLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLO0FBQ3ZCLGdCQUFJLEVBQUUsTUFBTTtBQUNaLGVBQUcsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUM7U0FDbEMsQ0FBQyxDQUFDO0FBQ0gsZ0JBQVEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pDLFlBQUksU0FBUyxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7OztBQUcvQyxZQUFJLEtBQUssQ0FBQyxlQUFlLEVBQUU7QUFDdkIsZ0JBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUN4RDtBQUNELGVBQU8sU0FBUyxDQUFDO0tBQ3BCLENBQUM7O0FBRUYsUUFBSSxDQUFDLGVBQWUsR0FBRyxVQUFTLEtBQUssRUFBRTtBQUNuQyxZQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRTtBQUNqQixtQkFBTyxJQUFJLENBQUM7U0FDZjs7QUFFRCxZQUFJLFFBQVEsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFNUQsWUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDLG9CQUFvQixDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN4RCxZQUFJLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLGVBQWUsRUFBRSxFQUFFO0FBQ25DLGlCQUFLLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLO0FBQ3ZCLGdCQUFJLEVBQUUsTUFBTTtBQUNaLGVBQUcsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUM7U0FDbEMsQ0FBQyxDQUFDO0FBQ0gsZ0JBQVEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pDLFlBQUksU0FBUyxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDL0MsWUFBSSxRQUFRLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQzs7O0FBR3RELFlBQUksUUFBUSxHQUFHO0FBQ1gsZ0JBQUksRUFBRSxRQUFRO0FBQ2QsY0FBRSxFQUFFLFFBQVE7QUFDWixnQkFBSSxFQUFFLElBQUk7QUFDVixvQkFBUSxFQUFFLEdBQUc7QUFDYixrQkFBTSxFQUFFLEdBQUc7U0FDZCxDQUFDO0FBQ0YsZ0JBQVEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDOzs7QUFHckMsWUFBSSxLQUFLLENBQUMsZUFBZSxFQUFFO0FBQ3ZCLGdCQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDeEQ7QUFDRCxlQUFPLFNBQVMsQ0FBQztLQUNwQixDQUFDOztBQUVGLFFBQUksQ0FBQyxXQUFXLEdBQUcsVUFBUyxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDM0MsWUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUU7QUFDakIsbUJBQU8sSUFBSSxDQUFDO1NBQ2Y7O0FBRUQsWUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2xELFlBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUNSLGtCQUFNLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUMvQjtBQUNELFlBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsZUFBZSxFQUFFLEVBQUU7QUFDbkMsaUJBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUc7QUFDckIsZ0JBQUksRUFBRSxJQUFJLElBQUksTUFBTTtBQUNwQixlQUFHLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDO1NBQ2xDLENBQUMsQ0FBQztBQUNILGdCQUFRLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNqQyxnQkFBUSxDQUFDLG9CQUFvQixDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3hELFlBQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDM0MsYUFBSyxDQUFDLG9CQUFvQixFQUFFLENBQUM7QUFDN0IsZUFBTyxLQUFLLENBQUM7S0FDaEIsQ0FBQzs7QUFFRixRQUFJLENBQUMsWUFBWSxHQUFHLFVBQVMsSUFBSSxFQUFFLElBQUksRUFBRTtBQUNyQyxZQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRTtBQUNqQixtQkFBTyxJQUFJLENBQUM7U0FDZjs7OztBQUlELFlBQUksSUFBSSxDQUFDLGFBQWEsRUFBRTs7QUFFcEIsbUJBQU87U0FDVjs7QUFFRCxZQUFJLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLGVBQWUsRUFBRSxFQUFFO0FBQ25DLGdCQUFJLEVBQUUsSUFBSSxJQUFJLG1CQUFtQjs7QUFFakMsb0JBQVEsRUFBRSxXQUFXO0FBQ3JCLGVBQUcsRUFBRSxLQUFLO1NBQ2IsQ0FBQyxDQUFDO0FBQ0gsZ0JBQVEsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUNsRCxnQkFBUSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDakMsWUFBSSxHQUFHLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNqRCxZQUFJLElBQUksR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3hDLFlBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO0FBQ3hCLGdCQUFRLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDbkQsZ0JBQVEsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDOztBQUVuQyxlQUFPLFFBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDekMsQ0FBQzs7OztBQUlGLFFBQUksQ0FBQyxXQUFXLEdBQUcsVUFBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUU7QUFDNUMsYUFBSyxHQUFHLFFBQVEsQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM5RSxnQkFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDekQsWUFBSSxNQUFNLEVBQUU7QUFDUixvQkFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7U0FDaEU7QUFDRCxlQUFPLEtBQUssQ0FBQztLQUNoQixDQUFDOztBQUVGLFFBQUksQ0FBQyxxQkFBcUIsR0FBRyxVQUFTLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO0FBQ3hELFlBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQzVDLGVBQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDeEMsQ0FBQzs7O0FBR0YsUUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFTLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDeEMsZ0JBQVEsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDNUMsWUFBSSxJQUFJLEdBQUc7QUFDUCxnQkFBSSxFQUFFLFVBQVU7QUFDaEIsZ0JBQUksRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUc7QUFDckIsY0FBRSxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRztBQUNuQixvQkFBUSxFQUFFLEdBQUc7QUFDYixrQkFBTSxFQUFFLEdBQUc7U0FDZCxDQUFDO0FBQ0YsZ0JBQVEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pDLGdCQUFRLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzdDLGVBQU8sUUFBUSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUN6QyxDQUFDOzs7QUFHRixRQUFJLENBQUMsV0FBVyxHQUFHLFVBQVMsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUN4QyxnQkFBUSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUM1QyxZQUFJLElBQUksR0FBRztBQUNQLGdCQUFJLEVBQUUsVUFBVTtBQUNoQixnQkFBSSxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRztBQUNyQixjQUFFLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHO0FBQ25CLG9CQUFRLEVBQUUsR0FBRztBQUNiLGtCQUFNLEVBQUUsR0FBRztBQUNYLG9CQUFRLEVBQUUsR0FBRztTQUNoQixDQUFDO0FBQ0YsZ0JBQVEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pDLGdCQUFRLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzdDLGdCQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMvRCxlQUFPLFFBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDekMsQ0FBQzs7Ozs7QUFLRixhQUFTLGlCQUFpQixHQUFHO0FBQ3pCLFlBQUksRUFBRSxHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO0FBQ3JDLFlBQUksT0FBTyxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQzVCLGVBQU8sRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2QsZ0JBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFDcEIsZ0JBQUksSUFBSSxZQUFZLEVBQUUsQ0FBQyxLQUFLLEVBQUU7QUFDMUIsdUJBQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDckI7U0FDSjtBQUNELGVBQU8sT0FBTyxDQUFDO0tBQ2xCOzs7QUFHRCxRQUFJLENBQUMsNkJBQTZCLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDakQsWUFBSSxVQUFVLEdBQUcsaUJBQWlCLEVBQUUsQ0FBQzs7O0FBR3JDLFlBQUksZUFBZSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDOzs7O0FBSXBGLGFBQUssQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7O0FBRTdCLGdCQUFRLENBQUMsMEJBQTBCLENBQUMsVUFBVSxFQUFFLEtBQUssRUFBRSxlQUFlLENBQUMsQ0FBQzs7QUFFeEUsZ0JBQVEsQ0FBQyxjQUFjLEVBQUUsQ0FBQztLQUM3QixDQUFDOzs7QUFHRixRQUFJLENBQUMsNEJBQTRCLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDaEQsWUFBSSxVQUFVLEdBQUcsaUJBQWlCLEVBQUUsQ0FBQzs7O0FBR3JDLFlBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFFOztBQUV4QixnQkFBSSxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsa0JBQWtCLENBQUMsVUFBVSxDQUFDLENBQUM7O0FBRS9ELGdCQUFJLGVBQWUsR0FBRyxRQUFRLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDOztBQUVoRSxnQkFBSSxFQUFFLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQztBQUM3QixtQkFBTyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDZCxvQkFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUN0QixzQkFBTSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7YUFDakM7QUFDRCxvQkFBUSxDQUFDLHlCQUF5QixDQUFDLFVBQVUsRUFBRSxLQUFLLEVBQUUsZ0JBQWdCLEVBQUUsZUFBZSxDQUFDLENBQUM7U0FDNUY7O2FBRUk7QUFDRCxvQkFBSSxHQUFHLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQztBQUM5Qix1QkFBTyxHQUFHLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDZix3QkFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztBQUN4QiwyQkFBTyxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUMsZUFBZSxDQUFDO0FBQ2hELHdCQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7aUJBQ3REO2FBQ0o7QUFDRCxnQkFBUSxDQUFDLGNBQWMsRUFBRSxDQUFDO0tBQzdCLENBQUM7OztBQUlGLFFBQUksQ0FBQyxpQ0FBaUMsR0FBRyxVQUFTLEtBQUssRUFBRSxJQUFJLEVBQUU7O0FBRTNELFlBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0FBQzFDLFlBQUksQ0FBQyxLQUFLLEVBQUU7QUFDUixtQkFBTztTQUNWO0FBQ0QsWUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDOUMsQ0FBQzs7Ozs7QUFLRixRQUFJLENBQUMsaUJBQWlCLEdBQUcsVUFBUyxPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRTtBQUNwRCxZQUFJLE1BQU0sR0FBRyxLQUFLLENBQUMsZUFBZSxDQUFDOzs7QUFHbkMsWUFBSSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQUMsZUFBZSxJQUFJLE1BQU0sRUFBRSxFQUVqRDs7OztBQUFBLEFBR0QsWUFBSSxXQUFXLEdBQUcsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDaEMsWUFBSSxFQUFFLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztBQUM1QixZQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7QUFDZCxlQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLGdCQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO0FBQ3RCLGdCQUFJLE1BQU0sWUFBWSxFQUFFLENBQUMsS0FBSyxFQUFFOztBQUU1QixvQkFBSSxNQUFNLElBQUksS0FBSyxFQUFFO0FBQ2pCLHdCQUFJLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO0FBQ25CLG1DQUFXLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3pCLGdDQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0FBQy9ELG1DQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3hCLGdDQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO3FCQUNqRSxNQUFNO0FBQ0gsbUNBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDeEIsZ0NBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7QUFDOUQsbUNBQVcsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDekIsZ0NBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7cUJBQ2xFO2lCQUNKOztxQkFFSSxJQUFJLE1BQU0sSUFBSSxPQUFPLEVBQUU7QUFDeEIsbUNBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDeEIsZ0NBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7cUJBQ2pFO2FBQ0o7U0FDSjs7O0FBR0QsWUFBSSxLQUFLLEdBQUcsV0FBVyxDQUFDLFFBQVEsQ0FBQztBQUNqQyxlQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNqQixnQkFBSSxPQUFPLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztBQUMxQixtQkFBTyxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7U0FDbEM7OztBQUdELGFBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNkLGVBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2pCLGdCQUFJLE9BQU8sR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQzFCLG1CQUFPLENBQUMsZUFBZSxHQUFHLE1BQU0sQ0FBQztTQUNwQztLQUNKLENBQUM7O0FBRUYsUUFBSSxDQUFDLGdCQUFnQixHQUFHLFVBQVMsS0FBSyxFQUFFLElBQUksRUFBRTtBQUMxQyxhQUFLLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztBQUN6QixhQUFLLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztLQUNoQyxDQUFDOzs7QUFHRixRQUFJLENBQUMsV0FBVyxHQUFHLFVBQVMsS0FBSyxFQUFFO0FBQy9CLGdCQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdkUsYUFBSyxDQUFDLG9CQUFvQixFQUFFLENBQUM7S0FDaEMsQ0FBQzs7O0FBR0YsUUFBSSxDQUFDLGdCQUFnQixHQUFHLFVBQVMsS0FBSyxFQUFFO0FBQ3BDLFlBQUksVUFBVSxHQUFHLEVBQUUsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFBLEFBQUMsQ0FBQztBQUN4RCxnQkFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxXQUFXLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNyRSxhQUFLLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztBQUM3QixXQUFHLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztLQUNqQyxDQUFDOzs7QUFHRixRQUFJLENBQUMsZ0JBQWdCLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDcEMsZ0JBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsV0FBVyxFQUFFLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ2xGLGFBQUssQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0FBQzdCLFdBQUcsQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0tBQ2pDLENBQUM7O0FBRUYsUUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFTLEtBQUssRUFBRTtBQUMvQixlQUFPLEtBQUssQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLEtBQUssSUFBSSxDQUFDO0tBQ3RELENBQUM7Ozs7QUFJRixRQUFJLENBQUMsT0FBTyxHQUFHLFlBQVc7QUFDdEIsZUFBTyxRQUFRLENBQUMsY0FBYyxDQUFDLE9BQU8sRUFBRSxDQUFDO0tBQzVDLENBQUM7O0FBRUYsUUFBSSxDQUFDLElBQUksR0FBRyxZQUFXO0FBQ25CLGdCQUFRLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQy9CLGdCQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ2hDLENBQUM7O0FBRUYsUUFBSSxDQUFDLE9BQU8sR0FBRyxZQUFXO0FBQ3RCLGVBQU8sUUFBUSxDQUFDLGNBQWMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztLQUM1QyxDQUFDOztBQUVGLFFBQUksQ0FBQyxJQUFJLEdBQUcsWUFBVztBQUNuQixnQkFBUSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMvQixnQkFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNoQyxDQUFDOztBQUVGLFFBQUksQ0FBQyxPQUFPLEdBQUcsWUFBVztBQUN0QixnQkFBUSxDQUFDLHVCQUF1QixFQUFFLENBQUM7QUFDbkMsZ0JBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDaEMsQ0FBQzs7Ozs7O0FBTUYsUUFBSSxDQUFDLFFBQVEsR0FBRyxVQUFTLElBQUksRUFBRTtBQUMzQixZQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDZixnQkFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDZDtBQUNELFlBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUNmLGdCQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUNkO0FBQ0QsWUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQ25CLGdCQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztTQUNsQjtBQUNELFlBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtBQUNwQixnQkFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7U0FDbkI7QUFDRCxlQUFPLElBQUksQ0FBQztLQUNmLENBQUM7Ozs7QUFJRixRQUFJLENBQUMsU0FBUyxHQUFHLFlBQVc7QUFDeEIsU0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztLQUN0RCxDQUFDOztBQUVGLFFBQUksQ0FBQyxTQUFTLEdBQUcsWUFBVztBQUN4QixnQkFBUSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQ2hFLGdCQUFRLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztBQUNuQyxnQkFBUSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDMUQsaUJBQVMsQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7S0FDdkMsQ0FBQztDQUNMLENBQUM7Ozs7Ozs7QUMvOEJGLGNBQWMsQ0FBQyxZQUFZLEdBQUcsVUFBUyxNQUFNLEVBQUUsR0FBRyxFQUFFOztBQUVoRCxRQUFJLElBQUksR0FBRyxJQUFJLENBQUM7OztBQUdoQixRQUFJLHFCQUFxQixHQUFHLEtBQUssQ0FBQzs7QUFFbEMsUUFBSSxDQUFDLElBQUksR0FBRyxZQUFXLEVBQUUsQ0FBQzs7O0FBRzFCLFFBQUksQ0FBQyxpQkFBaUIsR0FBRyxVQUFTLFFBQVEsRUFBRSxRQUFRLEVBQUU7O0FBRWxELFlBQUksUUFBUSxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRTs7QUFDN0Msd0JBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNsQixlQUFHLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDL0IsTUFBTSxJQUFJLFFBQVEsSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsbUJBQW1CLEVBQUU7O0FBQ3BELHFCQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDZixlQUFHLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDaEMsTUFBTSxJQUFJLFFBQVEsSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsbUJBQW1CLEVBQUU7O0FBQ3BELHdCQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDbEIsZUFBRyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO1NBQy9CLE1BQU0sSUFBSSxRQUFRLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLG1CQUFtQixFQUFFOztBQUNwRCxxQkFBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2YsZUFBRyxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ2hDO0tBQ0osQ0FBQzs7QUFFRixRQUFJLENBQUMsa0JBQWtCLEdBQUcsVUFBUyxTQUFTLEVBQUUsQ0FBQyxFQUFFO0FBQzdDLFlBQUksU0FBUyxJQUFJLGtCQUFrQixFQUFFO0FBQ2pDLGdCQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLG1CQUFtQixDQUFDLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsbUJBQW1CLENBQUMsRUFBRTtBQUN4SCwyQkFBVyxFQUFFLENBQUM7YUFDakI7U0FDSjtLQUNKLENBQUM7Ozs7QUFJRixRQUFJLENBQUMsa0JBQWtCLEdBQUcsWUFBVztBQUNqQyxlQUFPLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEtBQUssSUFBSSxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEtBQUssSUFBSSxDQUFDO0tBQzNHLENBQUM7O0FBRUYsUUFBSSxDQUFDLGVBQWUsR0FBRyxZQUFXO0FBQzlCLGVBQU8sR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsS0FBSyxJQUFJLENBQUM7S0FDekQsQ0FBQzs7QUFFRixRQUFJLENBQUMsZUFBZSxHQUFHLFlBQVc7QUFDOUIsZUFBTyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixLQUFLLElBQUksQ0FBQztLQUN6RCxDQUFDOztBQUVGLFFBQUksQ0FBQyxjQUFjLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDbEMsZUFBTyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO0tBQ2xFLENBQUM7O0FBRUYsUUFBSSxDQUFDLGNBQWMsR0FBRyxVQUFTLEtBQUssRUFBRTtBQUNsQyxlQUFPLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7S0FDbEUsQ0FBQzs7O0FBR0YsUUFBSSxDQUFDLGVBQWUsR0FBRyxVQUFTLEtBQUssRUFBRSxNQUFNLEVBQUU7QUFDM0MsWUFBSSxNQUFNLENBQUMsT0FBTyxFQUFFO0FBQ2hCLGVBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLG1CQUFtQixDQUFDLENBQUM7U0FDeEQ7S0FDSixDQUFDOztBQUVGLFFBQUksQ0FBQyxlQUFlLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDbkMsWUFBSSxNQUFNLENBQUMsT0FBTyxFQUFFOzs7QUFHaEIsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ2xDLGlCQUFLLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUN4QixlQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1NBQ3hEO0tBQ0osQ0FBQzs7OztBQUlGLFFBQUksQ0FBQyxrQkFBa0IsR0FBRyxVQUFTLEtBQUssRUFBRTtBQUN0QyxZQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDbkMsZUFBTyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDakIsZ0JBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDdkIsZ0JBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksR0FBRyxFQUFFO0FBQzNCLHVCQUFPLElBQUksQ0FBQzthQUNmO1NBQ0o7QUFDRCxlQUFPLEtBQUssQ0FBQztLQUNoQixDQUFDOztBQUVGLFFBQUksQ0FBQyx5QkFBeUIsR0FBRyxVQUFTLEtBQUssRUFBRTtBQUM3QyxZQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7QUFDbEMsZUFBTyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDakIsZ0JBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDdkIsZ0JBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksR0FBRyxJQUFJLEdBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFO0FBQ3pGLHVCQUFPLElBQUksQ0FBQzthQUNmO1NBQ0o7QUFDRCxlQUFPLEtBQUssQ0FBQztLQUNoQixDQUFDOztBQUVGLFFBQUksQ0FBQyx3QkFBd0IsR0FBRyxVQUFTLEtBQUssRUFBRTtBQUM1QyxZQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7QUFDbEMsZUFBTyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDakIsZ0JBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDdkIsZ0JBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksR0FBRyxJQUFJLEdBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFO0FBQzdELHVCQUFPLElBQUksQ0FBQzthQUNmO1NBQ0o7QUFDRCxlQUFPLEtBQUssQ0FBQztLQUNoQixDQUFDOztBQUVGLFFBQUksQ0FBQywwQkFBMEIsR0FBRyxVQUFTLEtBQUssRUFBRTtBQUM5QyxZQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7QUFDbEMsZUFBTyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDakIsZ0JBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDdkIsZ0JBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGNBQWMsRUFBRTtBQUMxRSx1QkFBTyxJQUFJLENBQUM7YUFDZjtTQUNKO0FBQ0QsZUFBTyxLQUFLLENBQUM7S0FDaEIsQ0FBQzs7QUFFRixRQUFJLENBQUMsd0JBQXdCLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDNUMsWUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLG1CQUFtQixFQUFFLENBQUMsZUFBZSxDQUFDO0FBQzdELFlBQUksSUFBSSxJQUFJLFdBQVcsSUFBSSxJQUFJLElBQUksTUFBTSxFQUFFO0FBQ3ZDLG1CQUFPLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUEsSUFDaEQsSUFBSSxDQUFDLHdCQUF3QixDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUEsQUFBQyxJQUM3QyxJQUFJLENBQUMsMEJBQTBCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQSxBQUFDLENBQUM7U0FDeEQsTUFBTTtBQUNILG1CQUFPLENBQUMsQ0FBQztTQUNaO0tBQ0osQ0FBQzs7Ozs7QUFLRixhQUFTLFlBQVksQ0FBQyxRQUFRLEVBQUU7O0FBRTVCLFlBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixFQUM5RSxPQUFPOztBQUVYLFlBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7O0FBRS9DLFlBQUksS0FBSyxZQUFZLEVBQUUsQ0FBQyxLQUFLLEVBQUU7QUFDM0IsZ0JBQUksR0FBRyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQ3pCLGdCQUFJLFFBQVEsSUFBSSxHQUFHLEVBQUU7QUFDakIsbUJBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEdBQUcsR0FBRyxDQUFDO2FBQy9DLE1BQU0sSUFBSSxRQUFRLElBQUksR0FBRyxFQUFFO0FBQ3hCLG1CQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixHQUFHLEdBQUcsQ0FBQzthQUMvQzs7O0FBR0QsaUNBQXFCLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1NBQzFDO0tBQ0o7Ozs7O0FBS0QsYUFBUyxXQUFXLEdBQUc7QUFDbkIsWUFBSSxxQkFBcUI7QUFDckIsbUJBQU87O0FBRVgsWUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDO0FBQ3JCLFlBQUksUUFBUSxHQUFHLElBQUksQ0FBQztBQUNwQixZQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEVBQUU7QUFDdkMscUJBQVMsR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUNuRixvQkFBUSxHQUFHLEdBQUcsQ0FBQztTQUNsQixNQUFNLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsRUFBRTtBQUM5QyxxQkFBUyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQ25GLG9CQUFRLEdBQUcsR0FBRyxDQUFDO1NBQ2xCOztBQUVELFlBQUksVUFBVSxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQy9CLFlBQUksV0FBVyxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDOzs7QUFHaEMsWUFBSSxRQUFRLEVBQUU7QUFDVixnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLE1BQU0sQ0FBQztBQUNyQyxtQkFBTyxNQUFNLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDbEIsb0JBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7QUFDekIsb0JBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDeEIsdUJBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2pCLHdCQUFJLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQ3ZCLHdCQUFJLElBQUksWUFBWSxFQUFFLENBQUMsS0FBSyxFQUFFOztBQUUxQiw0QkFBSSxTQUFTLEVBQUU7QUFDWCxnQ0FBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0FBQ2pDLGdDQUFJLFlBQVksR0FBRyxJQUFJLENBQUM7QUFDeEIsbUNBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2pCLG9DQUFJLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQ3ZCLG9DQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxRQUFRLEVBQzlFLFlBQVksR0FBRyxJQUFJLENBQUM7NkJBQzNCOzs7O0FBSUQsZ0NBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLFVBQVUsRUFDaEMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUNwQixJQUFJLFlBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQ3JDLFdBQVcsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7eUJBQ3JDO3FCQUNKO2lCQUNKO2FBQ0o7U0FDSjs7O0FBR0QsWUFBSSxJQUFJLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQztBQUMvQixlQUFPLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNoQixlQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3BELGdCQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDOztBQUVwQixnQkFBSSxRQUFRLElBQUksR0FBRyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFO0FBQ3RELHlCQUFTLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztBQUM3QixxQkFBSyxDQUFDLDRDQUE0QyxDQUFDLENBQUM7QUFDcEQseUJBQVM7YUFDWjtBQUNELGVBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDO0FBQy9CLG9CQUFJLEVBQUUsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHO0FBQ3hCLGtCQUFFLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHO0FBQ2Ysd0JBQVEsRUFBRSxRQUFRO0FBQ2xCLHNCQUFNLEVBQUUsUUFBUTtBQUNoQix3QkFBUSxFQUFFLFFBQVE7YUFDckIsQ0FBQyxDQUFDO0FBQ0gsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUN4RDtBQUNELFlBQUksT0FBTyxHQUFHLFdBQVcsQ0FBQyxRQUFRLENBQUM7QUFDbkMsZUFBTyxPQUFPLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDbkIsZ0JBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUM7O0FBRTNCLGVBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDdkQsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNoQyxlQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbkQsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxhQUFhLENBQUMsQ0FBQztTQUMzRDs7O0FBR0QsV0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLHVCQUF1QixFQUFFLENBQUM7S0FDOUM7O0FBRUQsYUFBUyxTQUFTLENBQUMsUUFBUSxFQUFFO0FBQ3pCLFlBQUksU0FBUyxHQUFHLElBQUksQ0FBQztBQUNyQixZQUFJLFFBQVEsSUFBSSxHQUFHLEVBQUU7QUFDakIscUJBQVMsR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUNuRixlQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQztTQUNoRCxNQUFNLElBQUksUUFBUSxJQUFJLEdBQUcsRUFBRTtBQUN4QixxQkFBUyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQ25GLGVBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDO1NBQ2hEOztBQUVELFdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUNsQyxXQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztLQUM5Qzs7QUFFRCxhQUFTLHFCQUFxQixDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUU7QUFDNUMsNkJBQXFCLEdBQUcsSUFBSSxDQUFDO0FBQzdCLFdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxjQUFjLEVBQUUsQ0FBQzs7QUFFbEMsWUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ25DLGVBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2pCLGdCQUFJLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQ3ZCLGdCQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLFFBQVEsRUFDOUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1NBQ3JDOztBQUVELDZCQUFxQixHQUFHLEtBQUssQ0FBQztLQUNqQztDQUNKLENBQUM7Ozs7Ozs7QUMxUUYsY0FBYyxDQUFDLFNBQVMsR0FBRyxVQUFVLE1BQU0sRUFBRSxHQUFHLEVBQUU7O0FBRTlDLFFBQUksSUFBSSxHQUFHLElBQUksQ0FBQzs7O0FBR2hCLFFBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUM7QUFDaEMsUUFBSSxDQUFDLG1CQUFtQixHQUFHLE1BQU0sQ0FBQztBQUNsQyxRQUFJLENBQUMscUJBQXFCLEdBQUcsR0FBRyxDQUFDOzs7QUFHakMsUUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQztBQUM5QixRQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztBQUMxQixRQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztBQUNyQixRQUFJLENBQUMsbUJBQW1CLEdBQUcsS0FBSyxDQUFDOzs7QUFHakMsUUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7O0FBRXpCLFFBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7O0FBRS9CLFFBQUksQ0FBQyxJQUFJLEdBQUcsWUFBWSxFQUN2QixDQUFDOztBQUVGLFFBQUksQ0FBQyxRQUFRLEdBQUcsWUFBVztBQUN2QixXQUFHLENBQUMsV0FBVyxFQUFFLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7S0FDNUMsQ0FBQzs7Ozs7QUFLRixRQUFJLENBQUMsVUFBVSxHQUFHLENBQ2Q7QUFDSSxZQUFJLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxnQkFBZ0I7QUFDM0MsZ0JBQVEsRUFBRSxJQUFJLEVBQUcsUUFBUSxFQUFFLElBQUksRUFBRyxTQUFTLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSztLQUNqSCxFQUNEO0FBQ0ksWUFBSSxFQUFFLGdCQUFnQixFQUFFLEtBQUssRUFBRSx5QkFBeUI7QUFDeEQsZ0JBQVEsRUFBRSxJQUFJLEVBQUcsUUFBUSxFQUFFLElBQUksRUFBRyxTQUFTLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUcsYUFBYSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSztLQUNqSCxFQUNEO0FBQ0ksWUFBSSxFQUFFLGNBQWMsRUFBRSxLQUFLLEVBQUUsNkJBQTZCO0FBQzFELGdCQUFRLEVBQUUsSUFBSSxFQUFHLFFBQVEsRUFBRSxJQUFJLEVBQUcsU0FBUyxFQUFFLElBQUksRUFBRyxZQUFZLEVBQUUsSUFBSSxFQUFHLGFBQWEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUk7S0FDaEgsRUFDRDtBQUNJLFlBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLGNBQWM7QUFDdkMsZ0JBQVEsRUFBRSxJQUFJLEVBQUcsUUFBUSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUcsYUFBYSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSztLQUNqSCxFQUNEO0FBQ0ksWUFBSSxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsaUJBQWlCO0FBQzdDLGdCQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLGFBQWEsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEtBQUs7S0FDL0csQ0FDSixDQUFDOzs7O0FBSUYsUUFBSSxDQUFDLFNBQVMsR0FBRyxDQUNiLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsOEJBQThCLEVBQUUsRUFDbkQsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsRUFDbEMsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFDN0IsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsRUFDbEMsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLEtBQUssRUFBRSxhQUFhLEVBQUUsRUFDN0MsRUFBRSxJQUFJLEVBQUUsY0FBYyxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUUsRUFDL0MsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsRUFDckMsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsRUFDakMsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsRUFDakMsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsRUFDakMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsRUFDbkMsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsQ0FDNUMsQ0FBQzs7OztBQUlGLFFBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDOzs7QUFHbkIsYUFBUyxjQUFjLEdBQUc7QUFDdEIsWUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUNuQyxZQUFJLElBQUksR0FBRyxFQUFFLENBQUM7QUFDZCxlQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNqQixnQkFBSyxLQUFLLENBQUMsS0FBSyxZQUFZLEVBQUUsQ0FBQyxLQUFLLEVBQUc7QUFDbkMsb0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDcEM7U0FDSjtBQUNELFlBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7O0FBR1osWUFBSSxHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQ2xDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxFQUM1QyxDQUFDLFVBQVUsRUFBRSx3QkFBd0IsRUFBRSxrQkFBa0IsRUFBRSx1QkFBdUIsRUFBRSxlQUFlLEVBQ2xHLE1BQU0sRUFBRSxNQUFNLEVBQUUsbUJBQW1CLENBQUM7U0FDeEMsQ0FBQzs7QUFFRixZQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDbkM7O0FBRUQsUUFBSSxDQUFDLGdCQUFnQixHQUFHLENBQ3BCLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxhQUFhLEVBQUUsYUFBYSxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsRUFDbkYsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLGFBQWEsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxFQUMxRSxFQUFFLElBQUksRUFBRSxxQkFBcUIsRUFBRSxhQUFhLEVBQUUsY0FBYyxFQUFFLFdBQVcsRUFBRSxlQUFlLEVBQUUsRUFDNUYsRUFBRSxJQUFJLEVBQUUsb0JBQW9CLEVBQUUsYUFBYSxFQUFFLGFBQWEsRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLEVBQ3pGLEVBQUUsSUFBSSxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsbUJBQW1CLEVBQUUsV0FBVyxFQUFFLG9CQUFvQixFQUFFLEVBQ2hHLEVBQUUsSUFBSSxFQUFFLHNCQUFzQixFQUFFLGFBQWEsRUFBRSxxQkFBcUIsRUFBRSxXQUFXLEVBQUUsc0JBQXNCLEVBQUUsRUFDM0csRUFBRSxJQUFJLEVBQUUsMkJBQTJCLEVBQUUsYUFBYSxFQUFFLG9CQUFvQixFQUFFLFdBQVcsRUFBRSxxQkFBcUIsRUFBRSxFQUM5RyxFQUFFLElBQUksRUFBRSxvQkFBb0IsRUFBRSxhQUFhLEVBQUUsc0JBQXNCLEVBQUUsV0FBVyxFQUFFLHVCQUF1QixFQUFFLENBQzlHLENBQUM7O0FBRUYsUUFBSSxDQUFDLFFBQVEsR0FBRyxVQUFTLFFBQVEsRUFBRTtBQUM5QixnQkFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNuQyxZQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7S0FDcEIsQ0FBQzs7QUFFRixRQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsS0FBSyxFQUFFLFFBQVEsRUFBRTtBQUMxQyxZQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDMUMsZ0JBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUM3QixZQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7S0FDbkIsQ0FBQzs7QUFFRixRQUFJLENBQUMsT0FBTyxHQUFHLFVBQVMsUUFBUSxFQUFFO0FBQzlCLGdCQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUN0RCxZQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7S0FDbkIsQ0FBQzs7QUFFRixRQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsSUFBSSxFQUFFLFFBQVEsRUFBRTtBQUN4QyxZQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDeEMsZ0JBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUM1QixZQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7S0FDbkIsQ0FBQzs7QUFFRixRQUFJLENBQUMsU0FBUyxHQUFHLFlBQVc7QUFDeEIsY0FBTSxDQUFDLFNBQVMsQ0FBQyxZQUFXO0FBQ3hCLGdCQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7QUFDbkIsb0JBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO2FBQ2hDO1NBQ0osQ0FBQyxDQUFDO0tBQ04sQ0FBQzs7O0FBR0YsYUFBUyxxQkFBcUIsR0FBRztBQUM3QixZQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRTtBQUNwQixnQkFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUM7QUFDN0IsZ0JBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQ3pDO0FBQ0kseUJBQVMsRUFBRSxNQUFNO0FBQ2pCLHVCQUFPLEVBQUUsSUFBSSxDQUFDLHFCQUFxQjthQUN0QyxFQUNELEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFDcEI7QUFDSSxvQkFBSSxFQUFFLElBQUk7QUFDVixzQkFBTSxFQUFFLElBQUksQ0FBQyxtQkFBbUI7QUFDaEMsMkJBQVcsRUFBQyxJQUFJO2FBQ25CLENBQ0osQ0FDSixDQUFDO0FBQ0YsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7U0FDM0M7S0FDSjs7O0FBR0QsUUFBSSxDQUFDLGlCQUFpQixHQUFHLFVBQVMsUUFBUSxFQUFFLFFBQVEsRUFBRTtBQUNsRCxZQUFJLFFBQVEsSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsZ0JBQWdCLEVBQUU7O0FBQzFDLGdCQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7U0FDekIsTUFDSSxJQUFJLFFBQVEsSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsZ0JBQWdCLEVBQUU7OztBQUUvQyxnQkFBSSxDQUFDLGtCQUFrQixHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7OztBQUd6RSxrQkFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO0FBQ2xELDBCQUFjLEVBQUUsQ0FBQztBQUNqQixnQkFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ2hFLG9CQUFJLENBQUMsaUJBQWlCLEdBQUcsQ0FBQyxDQUFDO2FBQzlCO0FBQ0QsZ0JBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNsQztLQUNKLENBQUM7O0FBRUYsUUFBSSxDQUFDLGtCQUFrQixHQUFHLFVBQVUsU0FBUyxFQUFFLENBQUMsRUFBRTtBQUM5QyxZQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtBQUN6RCxtQkFBTztTQUNWOztBQUVELFlBQUksU0FBUyxJQUFJLG1CQUFtQixFQUFFO0FBQ2xDLGdCQUFJLFNBQVMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQzFCLGdCQUFJLFNBQVMsQ0FBQyxLQUFLLElBQUksQ0FBQyxFQUFFO0FBQ3RCLG9CQUFJLEtBQUssR0FBRyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDOUIsb0JBQUksS0FBSyxZQUFZLEVBQUUsQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksT0FBTyxFQUFFO0FBQzVELHdCQUFJLENBQUMsT0FBTyxDQUFDLDBDQUEwQyxDQUFDLEVBQUU7QUFDdEQseUJBQUMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO3FCQUNuQjtpQkFDSjthQUNKO1NBQ0osTUFDSSxJQUFJLFNBQVMsSUFBSSxrQkFBa0IsRUFBRTs7QUFFdEMsK0JBQW1CLEVBQUUsQ0FBQztTQUN6QixNQUNJLElBQUksU0FBUyxJQUFJLGdCQUFnQixJQUFJLFNBQVMsSUFBSSxhQUFhLEVBQUU7O0FBRWxFLDBCQUFjLEdBQUcsRUFBRSxDQUFDO1NBQ3ZCLE1BQ0ksSUFBSSxTQUFTLElBQUksdUJBQXVCLEVBQUU7OztTQUc5QztLQUNKLENBQUM7O0FBRUYsUUFBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLFlBQVc7QUFDdkMsWUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0tBQ3ZELEVBQUUsSUFBSSxDQUFDLENBQUM7O0FBRVQsUUFBSSxDQUFDLFdBQVcsR0FBRyxZQUFXO0FBQzFCLGVBQU8sR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQSxBQUFDLENBQUM7S0FDekcsQ0FBQzs7QUFFRixRQUFJLENBQUMsd0JBQXdCLEdBQUcsWUFBVztBQUN2QyxlQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsSUFDdkQsSUFBSSxDQUFDLFlBQVksSUFDakIsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxZQUFZLENBQUM7S0FDbkQsQ0FBQTs7O0FBR0QsUUFBSSxDQUFDLGlCQUFpQixHQUFHLFlBQVk7QUFDakMsWUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQy9CLFlBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDO0FBQ3hDLFlBQUksU0FBUyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLFVBQVUsSUFBSSxFQUFFO0FBQzVDLG1CQUFPLElBQUksQ0FBQyxRQUFRLElBQUksT0FBTyxDQUFDO1NBQ25DLENBQUMsQ0FBQztBQUNILGlCQUFTLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsVUFBVSxRQUFRLEVBQUU7QUFDaEQsbUJBQU8sUUFBUSxDQUFDLEtBQUssQ0FBQztTQUN6QixDQUFDLENBQUM7O0FBRUgsZUFBTyxTQUFTLENBQUM7S0FDcEIsQ0FBQzs7QUFFRixRQUFJLENBQUMsYUFBYSxHQUFHLFlBQVc7QUFDNUIsZUFBTyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxNQUFNLENBQUM7S0FDMUMsQ0FBQzs7QUFFRixRQUFJLENBQUMscUJBQXFCLEdBQUcsWUFBVztBQUNwQyxlQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsY0FBYyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUM7S0FDN0UsQ0FBQzs7QUFFRixRQUFJLENBQUMsWUFBWSxHQUFHLFVBQVMsUUFBUSxFQUFFO0FBQ25DLGVBQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7S0FDM0QsQ0FBQzs7QUFFRixRQUFJLENBQUMsbUJBQW1CLEdBQUcsWUFBVztBQUNsQyxZQUFJLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUNyRCxZQUFJLEtBQUssRUFBRTtBQUNQLG1CQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7U0FDbEUsTUFDSTtBQUNELG1CQUFPLEVBQUUsQ0FBQztTQUNiO0tBQ0osQ0FBQzs7QUFFRixhQUFTLGdCQUFnQixDQUFDLEtBQUssRUFBRTtBQUM3QixZQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDL0IsWUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsRUFBRSxVQUFVLFNBQVMsRUFBRTtBQUNsRSxtQkFBTyxTQUFTLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQztTQUNuQyxDQUFDLENBQUM7QUFDSCxZQUFJLFNBQVMsS0FBSyxTQUFTLEVBQUU7QUFDekIsbUJBQU8sT0FBTyxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDaEQsTUFDSTtBQUNELG1CQUFPLFNBQVMsQ0FBQztTQUNwQjtLQUNKOzs7QUFHRCxRQUFJLENBQUMsU0FBUyxHQUFHLFVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRTtBQUN6QyxjQUFNLENBQUMsU0FBUyxDQUFDLFlBQVc7QUFDeEIsZ0JBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUMvQixnQkFBSSxLQUFLLEdBQUcsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDcEMsZ0JBQUksUUFBUSxHQUFHLGdCQUFnQixDQUFDLEtBQUssR0FBRyxTQUFTLENBQUMsQ0FBQztBQUNuRCxnQkFBSSxLQUFLLElBQUksUUFBUSxFQUFFOztBQUVuQix1QkFBTyxDQUFDLGdCQUFnQixDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ3ZDLHVCQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUMsQ0FBQztBQUNqRix1QkFBTyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLENBQUM7QUFDdkYsdUJBQU8sQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUN4Qyw4QkFBYyxHQUFHLEVBQUUsQ0FBQzthQUN2QjtTQUNKLENBQUMsQ0FBQztLQUNOLENBQUM7O0FBRUYsYUFBUyxtQkFBbUIsR0FBRztBQUMzQixjQUFNLENBQUMsU0FBUyxDQUFDLFlBQVc7O0FBRXhCLGdCQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztBQUMxQyxnQkFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQy9CLGdCQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDakIsbUJBQU8sQ0FBQyxnQkFBZ0IsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBQ2xELGFBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLFVBQVUsU0FBUyxFQUFFO0FBQ3BDLHVCQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDOztBQUU1RCx3QkFBUSxFQUFFLENBQUM7YUFDZCxDQUFDLENBQUM7QUFDSCxtQkFBTyxDQUFDLGlCQUFpQixDQUFDLHVCQUF1QixDQUFDLENBQUM7U0FDdEQsQ0FBQyxDQUFDO0tBQ047O0FBRUQsYUFBUyxjQUFjLEdBQUc7QUFDdEIsWUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQy9CLFlBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNWLGVBQU8sT0FBTyxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLEVBQUU7QUFDbkQsYUFBQyxFQUFFLENBQUM7U0FDUDtBQUNELGVBQU8sUUFBUSxHQUFHLENBQUMsQ0FBQztLQUN2Qjs7OztBQUlELGFBQVMsZ0JBQWdCLEdBQUc7QUFDeEIsWUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7QUFDdEMsZUFBTyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztLQUM1Qjs7QUFFRCxRQUFJLENBQUMsUUFBUSxHQUFHLFVBQVUsUUFBUSxFQUFFO0FBQ2hDLGNBQU0sQ0FBQyxTQUFTLENBQUMsWUFBVzs7QUFFeEIsZ0JBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQzs7QUFFL0IsZ0JBQUksRUFBRSxHQUFHLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0FBQ2hDLGNBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEtBQUssR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsQ0FBQztBQUMxQyxnQkFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUMvQixnQkFBSSxRQUFRLEdBQUcsZ0JBQWdCLEVBQUUsQ0FBQzs7QUFFbEMsZ0JBQUksU0FBUyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDOztBQUVqRSxtQkFBTyxDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3RDLG1CQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQztBQUN0QixtQkFBRyxFQUFFLGNBQWMsRUFBRTtBQUNyQix3QkFBUSxFQUFFLE9BQU87QUFDakIscUJBQUssRUFBRSxRQUFRO0FBQ2YsdUJBQU8sRUFBRSxLQUFLO0FBQ2QscUJBQUssRUFBRSxFQUFFLENBQUMsS0FBSztBQUNmLHNCQUFNLEVBQUUsRUFBRSxDQUFDLE1BQU07QUFDakIsbUJBQUcsRUFBRSxNQUFNO0FBQ1gscUJBQUssRUFBRSxDQUFDO0FBQ1Isd0JBQVEsRUFBRSxDQUFDO0FBQ1gsb0JBQUksRUFBRSxRQUFRO0FBQ2QscUJBQUssRUFBRSxFQUFFO0FBQ1QscUJBQUssRUFBRSxFQUFFO0FBQ1Qsc0JBQU0sRUFBRSxFQUFFO0FBQ1YseUJBQVMsRUFBRSxTQUFTLENBQUMsWUFBWTtBQUNqQyx5QkFBUyxFQUFFLFNBQVMsQ0FBQyxhQUFhO0FBQ2xDLHFCQUFLLEVBQUUsRUFBRTthQUNaLENBQUMsQ0FBQztBQUNILG1CQUFPLENBQUMsaUJBQWlCLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDdkMsMEJBQWMsR0FBRyxFQUFFLENBQUM7O0FBRXBCLGdCQUFJLENBQUMsc0JBQXNCLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDekMsQ0FBQyxDQUFDO0tBQ04sQ0FBQzs7QUFFRixRQUFJLENBQUMsY0FBYyxHQUFHLFVBQVUsS0FBSyxFQUFFO0FBQ25DLGNBQU0sQ0FBQyxTQUFTLENBQUMsWUFBVztBQUN4QixnQkFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQy9CLGdCQUFJLFFBQVEsR0FBRyxnQkFBZ0IsRUFBRSxDQUFDO0FBQ2xDLGdCQUFJLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNwQyxnQkFBSSxLQUFLLEVBQUU7QUFDUCx1QkFBTyxDQUFDLGdCQUFnQixDQUFDLGlCQUFpQixDQUFDLENBQUM7OztBQUc1QyxpQkFBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsRUFBRSxVQUFVLFNBQVMsRUFBRTtBQUNsRCx3QkFBSSxTQUFTLENBQUMsS0FBSyxHQUFHLEtBQUssRUFBRTtBQUN6QiwrQkFBTyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDO3FCQUMxRTtpQkFDSixDQUFDLENBQUM7OztBQUdILHVCQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQztBQUN0Qix1QkFBRyxFQUFFLGNBQWMsRUFBRTtBQUNyQiw0QkFBUSxFQUFFLE9BQU87QUFDakIseUJBQUssRUFBRSxLQUFLLEdBQUcsQ0FBQztBQUNoQiwyQkFBTyxFQUFFLEtBQUs7QUFDZCx5QkFBSyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSztBQUN2QiwwQkFBTSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTTtBQUN6Qix1QkFBRyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRztBQUNuQix5QkFBSyxFQUFFLENBQUM7QUFDUiw0QkFBUSxFQUFFLENBQUM7QUFDWCx3QkFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSTtBQUNyQix5QkFBSyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLFNBQVM7QUFDbkMseUJBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUs7QUFDdkIsMEJBQU0sRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU07QUFDekIsNkJBQVMsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVM7QUFDL0IsNkJBQVMsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVM7QUFDL0IseUJBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUs7aUJBQzFCLENBQUMsQ0FBQztBQUNILHVCQUFPLENBQUMsaUJBQWlCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUM3Qyw4QkFBYyxHQUFHLEVBQUUsQ0FBQzthQUN2QjtTQUNKLENBQUMsQ0FBQztLQUNOLENBQUM7O0FBRUYsUUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFVLEtBQUssRUFBRTtBQUNoQyxjQUFNLENBQUMsU0FBUyxDQUFDLFlBQVc7O0FBRXhCLGdCQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDL0IsZ0JBQUksS0FBSyxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3BDLGdCQUFJLEtBQUssRUFBRTtBQUNQLHVCQUFPLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDekMsdUJBQU8sQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6Qyx1QkFBTyxDQUFDLGlCQUFpQixDQUFDLGNBQWMsQ0FBQyxDQUFDO2FBQzdDO0FBQ0QsZ0JBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7QUFDOUIsMEJBQWMsR0FBRyxFQUFFLENBQUM7QUFDcEIsK0JBQW1CLEVBQUUsQ0FBQztTQUN6QixDQUFDLENBQUM7S0FDTixDQUFDOztBQUVGLFFBQUksY0FBYyxHQUFHLEVBQUUsQ0FBQzs7QUFFeEIsUUFBSSxDQUFDLGlCQUFpQixHQUFHLFVBQVUsS0FBSyxFQUFFO0FBQ3RDLGVBQU8sY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQ2hDLENBQUM7O0FBRUYsUUFBSSxDQUFDLHFCQUFxQixHQUFHLFlBQVc7QUFDcEMsU0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsRUFBRSxVQUFTLEVBQUUsRUFBRTtBQUMxQyxnQkFBSSxDQUFDLG9CQUFvQixDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUN2QyxDQUFDLENBQUM7S0FDTixDQUFDOztBQUVGLFFBQUksQ0FBQyxvQkFBb0IsR0FBRyxVQUFVLEtBQUssRUFBRTs7O0FBR3pDLFlBQUksVUFBVSxHQUFHLElBQUksQ0FBQztBQUN0QixZQUFJLFdBQVcsR0FBRyxHQUFHLENBQUM7QUFDdEIsWUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDOztBQUUvQixZQUFJLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNwQyxZQUFJLENBQUMsS0FBSyxFQUFFO0FBQ1IsbUJBQU8sRUFBRSxDQUFDO1NBQ2IsTUFDSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUNyRCxtQkFBTyxFQUFFLENBQUM7U0FDYixNQUNJO0FBQ0QsZ0JBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDaEMsZ0JBQUksRUFBRSxDQUFDO0FBQ1AsZ0JBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUU7O0FBQ3RCLGtCQUFFLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDO2FBQzdDLE1BQ0k7O0FBQ0Qsa0JBQUUsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQzthQUNoQzs7QUFFRCxnQkFBSSxhQUFhLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDOzs7QUFHN0MsZ0JBQUksTUFBTSxHQUFHLFVBQVUsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO0FBQ25DLGdCQUFJLE1BQU0sR0FBRyxXQUFXLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQztBQUNyQyxnQkFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7OztBQUcxQyxnQkFBSSxDQUFDLEdBQUcsVUFBVSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFDOUIsZ0JBQUksQ0FBQyxHQUFHLFVBQVUsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDOzs7O0FBSS9CLGdCQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDO0FBQ2hDLG1CQUFPLENBQUMsdUJBQXVCLEVBQUUsQ0FBQzs7QUFFbEMsbUJBQU8sQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDOztBQUUzQixnQkFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUNoQyxvQkFBSSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3ZCLHdCQUFRLEVBQUUsYUFBYTtBQUN2QixxQkFBSyxFQUFFLFVBQVU7YUFDcEIsQ0FBQyxDQUFDOztBQUVILGdCQUFJLENBQUMsbUJBQW1CLEdBQUcsS0FBSyxDQUFDO0FBQ2pDLG1CQUFPLENBQUMsdUJBQXVCLEVBQUUsQ0FBQzs7QUFFbEMsMEJBQWMsQ0FBQyxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUM7O0FBRWhDLG1CQUFPLE9BQU8sQ0FBQztTQUNsQjtLQUNKLENBQUM7OztBQUdGLFFBQUksQ0FBQyxlQUFlLEdBQUcsWUFBWTs7QUFFL0IsWUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQy9CLFlBQUksRUFBRSxHQUFHLEdBQUcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQztBQUM5QyxVQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3JCLFlBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUNaLFlBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQzs7O0FBR1osWUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQztBQUNoQyxlQUFPLENBQUMsdUJBQXVCLEVBQUUsQ0FBQzs7QUFFbEMsWUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUNoQyxpQkFBSyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFDNUMsb0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2xDLGdCQUFJLEVBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDekIsQ0FBQyxDQUFDOztBQUVILFlBQUksQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLENBQUM7QUFDakMsZUFBTyxDQUFDLHVCQUF1QixFQUFFLENBQUM7O0FBRWxDLGVBQU8sT0FBTyxDQUFDO0tBQ2xCLENBQUM7OztBQUlGLFFBQUksQ0FBQyxzQkFBc0IsR0FBRyxVQUFVLEtBQUssRUFBRTs7QUFFM0MsWUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQy9CLFlBQUksS0FBSyxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDOztBQUVwQyxjQUFNLENBQUMsU0FBUyxDQUFDLFlBQVc7O0FBRXhCLHVCQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbkIsZ0JBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUM7QUFDL0IsbUJBQU8sQ0FBQyx1QkFBdUIsRUFBRSxDQUFDOztBQUVsQyxnQkFBSSxLQUFLLEVBQUU7QUFDUCxtQ0FBbUIsQ0FBQyxLQUFLLENBQUMsQ0FBQzs7QUFFM0Isb0JBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtBQUNuQix3QkFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7aUJBQ3hCO2FBQ0o7U0FDSixDQUFDLENBQUM7S0FDTixDQUFDOztBQUVGLFFBQUksQ0FBQyxpQkFBaUIsR0FBRyxZQUFXO0FBQ2hDLFlBQUksS0FBSyxHQUFHLGdCQUFnQixDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3JELGVBQU8sR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsSUFDMUQsS0FBSyxJQUFJLElBQUksS0FDWixLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxnQkFBZ0IsSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxjQUFjLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksYUFBYSxDQUFBLEFBQUMsQ0FBQztLQUNySCxDQUFDOzs7QUFHRixhQUFTLFdBQVcsQ0FBQyxLQUFLLEVBQUU7QUFDeEIsY0FBTSxDQUFDLFNBQVMsQ0FBQyxZQUFXOztBQUV4QixnQkFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQy9CLG1CQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDekIsZ0JBQUksS0FBSyxFQUFFO0FBQ1Asb0JBQUksS0FBSyxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3BDLG9CQUFJLEtBQUssRUFBRTtBQUNQLHlCQUFLLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztpQkFDM0I7YUFDSjs7U0FFSixDQUFDLENBQUM7S0FDTjs7QUFFRCxRQUFJLENBQUMsU0FBUyxHQUFHLFVBQVUsS0FBSyxFQUFFO0FBQzlCLFlBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUMvQixXQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOztBQUVsRCxZQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztBQUN0QyxZQUFJLE1BQU0sQ0FBQyxNQUFNLEVBQUU7QUFDZixnQkFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7QUFDckIsd0JBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUN2QjtLQUNKLENBQUM7OztBQUdGLFFBQUksQ0FBQyxZQUFZLEdBQUcsVUFBVSxTQUFTLEVBQUU7O0FBRXJDLGNBQU0sQ0FBQyxTQUFTLENBQUMsWUFBVztBQUN4QixnQkFBSSxLQUFLLEdBQUcsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDckQsZ0JBQUksS0FBSyxFQUFFO0FBQ1Asb0JBQUksQ0FBQyxpQkFBaUIsSUFBSyxTQUFTLEFBQUMsQ0FBQztBQUN0QyxvQkFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO0FBQ25CLGdDQUFZLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7aUJBQ3hDO2FBQ0o7U0FDSixDQUFDLENBQUM7S0FDTixDQUFDOztBQUVGLGFBQVMsWUFBWSxDQUFDLEtBQUssRUFBRTs7QUFFekIsY0FBTSxDQUFDLFNBQVMsQ0FBQyxZQUFXO0FBQ3hCLGdCQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDL0IsZ0JBQUksS0FBSyxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3BDLGdCQUFJLENBQUMsS0FBSyxFQUFFO0FBQ1IsdUJBQU87YUFDVjs7QUFFRCxtQkFBTyxDQUFDLGNBQWMsRUFBRSxDQUFDOztBQUV6QixnQkFBSSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQztBQUMvQixlQUFHLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUM7OztBQUc1QixpQ0FBcUIsRUFBRSxDQUFDO0FBQ3hCLGdCQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUM7O0FBRXhDLGdCQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFO0FBQ3RCLG1DQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDOzs7QUFHM0Isb0JBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksQ0FDdkMsS0FBSyxDQUFDLFlBQVksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxHQUFHLFFBQVEsRUFDdkMsS0FBSyxDQUFDLFlBQVksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDO0FBQzlDLG9CQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsR0FBRyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQ3JDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxHQUFHLFFBQVEsRUFDL0IsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUM7QUFDckMsb0JBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQzs7YUFFcEMsTUFDSSxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFO0FBQzNCLHVDQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzNCLHdCQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7aUJBQ3JDLE1BQ0k7QUFDRCx1QkFBRyxDQUFDLEtBQUssRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBQ3hCLHdCQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7aUJBQ3JDOztBQUVELGdCQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztBQUN6QixhQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLENBQUM7O0FBRXhDLGVBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO1NBQzlDLENBQUMsQ0FBQztLQUNOOzs7QUFHRCxhQUFTLG1CQUFtQixDQUFDLEtBQUssRUFDbEM7QUFDSSxZQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7O0FBRS9CLGNBQU0sQ0FBQyxVQUFVLENBQUMsWUFBWTs7QUFFOUIsZ0JBQUksU0FBUyxHQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLFVBQVUsQUFBQyxDQUFDO0FBQ2hELGdCQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxTQUFTLENBQUMsQ0FBQztBQUN0RSxvQkFBUSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBSyxHQUFHLEVBQUUsRUFBRSxRQUFRLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQzVELG1CQUFPLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQ2hELEVBQUUsR0FBRyxDQUFDLENBQUM7S0FDWDs7OztBQUlELFFBQUksQ0FBQyxrQkFBa0IsR0FBRyxVQUFVLElBQUksRUFBRSxTQUFTLEVBQUU7Ozs7QUFJakQsWUFBSSxHQUFHLEdBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixBQUFDLENBQUM7OztBQUc5RSxZQUFJLGVBQWUsR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7O0FBRS9DLFlBQUksR0FBRyxHQUFHLGVBQWUsRUFBRTs7QUFFdkIsZ0JBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO0FBQzVCLG1CQUFPLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQSxHQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUN6RCxNQUNJOztBQUVELG9CQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQztBQUMzQix1QkFBTyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFBLEdBQUksQ0FBQyxDQUFDLENBQUM7YUFDMUQ7S0FDSixDQUFDOztBQUVGLFFBQUksQ0FBQyxjQUFjLEdBQUcsWUFBWTtBQUM5QixjQUFNLENBQUMsU0FBUyxDQUFDLFlBQVc7O0FBRXhCLGdCQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7O0FBRS9CLGdCQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7QUFDbkIsb0JBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQzthQUNyQzs7O0FBR0QsZ0JBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO0FBQzFCLGFBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLENBQUMsbUJBQW1CLENBQUMsQ0FBQzs7QUFFM0MsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLHVCQUF1QixFQUFFLENBQUM7O0FBRTNDLG1CQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDekIsZUFBRyxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDOztTQUVoQyxDQUFDLENBQUM7S0FDTixDQUFDO0NBRUwsQ0FBQzs7Ozs7OztBQzFxQkYsTUFBTSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7O0FBRTVCLGVBQWUsR0FBRyxVQUFTLE1BQU0sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7O0FBRS9ELFFBQUksQ0FBQyxTQUFTLEdBQUcsVUFBUyxPQUFNLEVBQUUsU0FBUSxFQUFFO0FBQ3hDLFlBQUksYUFBYSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUM7QUFDNUIsdUJBQVcsRUFBRSxpQ0FBaUM7QUFDOUMsb0JBQVEsRUFBRSxRQUFRO0FBQ2xCLHNCQUFVLEVBQUUsZ0JBQWdCO0FBQzVCLHVCQUFXLEVBQUUsZUFBZTtBQUM1QixtQkFBTyxFQUFFO0FBQ0wsc0JBQU0sRUFBRSxrQkFBVztBQUNmLDJCQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUM7aUJBQ3hCO0FBQ0QsMkJBQVcsRUFBRSx1QkFBVztBQUNwQiwyQkFBTyxNQUFNLENBQUMsV0FBVyxDQUFDO2lCQUM3QjtBQUNELHNCQUFNLEVBQUUsa0JBQVc7QUFDZiwyQkFBTyxPQUFNLENBQUM7aUJBQ2pCO0FBQ0Qsd0JBQVEsRUFBRSxvQkFBVztBQUNqQiwyQkFBTyxTQUFRLENBQUM7aUJBQ25CO2FBQ0o7U0FDSixDQUFDLENBQUM7O0FBRUgscUJBQWEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVcsRUFBRSxDQUFDLENBQUM7S0FDNUMsQ0FBQzs7OztBQUtGLFFBQUksZ0JBQWdCLEdBQUcsU0FBbkIsZ0JBQWdCLENBQVksTUFBTSxFQUFFLGNBQWMsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUU7O0FBRTNGLGNBQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQ3ZCLGNBQU0sQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO0FBQ2pDLGNBQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDOzs7O0FBSXZCLGNBQU0sQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDOzs7O0FBSXRCLGNBQU0sQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDOzs7O0FBSTNCLGNBQU0sQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDOzs7O0FBSXRCLGNBQU0sQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDOzs7QUFHMUIsY0FBTSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7QUFDbEIsY0FBTSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFDbkIsY0FBTSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7OztBQUcxQixjQUFNLENBQUMscUJBQXFCLEdBQUcseUJBQXlCLENBQUM7QUFDekQsY0FBTSxDQUFDLGdCQUFnQixHQUFHLE9BQU8sQ0FBQztBQUNsQyxjQUFNLENBQUMsdUJBQXVCLEdBQUcsYUFBYSxDQUFDO0FBQy9DLGNBQU0sQ0FBQyxpQkFBaUIsR0FBRyxtQkFBbUIsQ0FBQzs7QUFFL0MsY0FBTSxDQUFDLFVBQVUsR0FBRyxDQUNoQixNQUFNLENBQUMscUJBQXFCOztBQUU1QixjQUFNLENBQUMsdUJBQXVCLEVBQzlCLE1BQU0sQ0FBQyxpQkFBaUIsQ0FDM0IsQ0FBQzs7QUFFRixjQUFNLENBQUMsd0JBQXdCLEdBQUcsVUFBVSxDQUFDO0FBQzdDLGNBQU0sQ0FBQyx3QkFBd0IsR0FBRyxVQUFVLENBQUM7O0FBRTdDLGNBQU0sQ0FBQyxnQkFBZ0IsR0FBRyxDQUN0QixNQUFNLENBQUMsd0JBQXdCLEVBQy9CLE1BQU0sQ0FBQyx3QkFBd0IsQ0FDbEMsQ0FBQzs7QUFFRixjQUFNLENBQUMsa0JBQWtCLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDeEMsbUJBQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFdBQVcsRUFBRTtBQUMvQyw4QkFBYyxFQUFFLEtBQUssQ0FBQyxjQUFjO0FBQ3BDLHNCQUFNLEVBQUUsSUFBSTthQUNmLENBQUMsQ0FBQztTQUNOLENBQUM7OztBQUdGLGlCQUFTLFVBQVUsQ0FBQyxNQUFNLEVBQUU7QUFDeEIsaUJBQUssQ0FBQyxHQUFHLENBQUMsOEJBQThCLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFTLFFBQVEsRUFBRTtBQUM3RSxvQkFBSSxRQUFRLENBQUMsTUFBTSxLQUFLLEdBQUcsSUFBSSxRQUFRLENBQUMsTUFBTSxLQUFLLEdBQUcsRUFBRTtBQUNwRCwwQkFBTSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztBQUMzQywwQkFBTSxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztBQUNuQywwQkFBTSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUNyQywwQkFBTSxDQUFDLGFBQWEsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQztBQUNuRCxzQ0FBa0IsRUFBRSxDQUFDO0FBQ3JCLHdCQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLGNBQWMsRUFBRSxFQUFFO0FBQzFELDhCQUFNLENBQUMsV0FBVyxFQUFFLENBQUM7cUJBQ3hCO2lCQUNKO2FBQ0osRUFDRCxZQUFXO0FBQ1AscUJBQUssQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO2FBQ3hDLENBQUMsQ0FBQztTQUNWOztBQUVELGtCQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7OztBQUduQixpQkFBUyxrQkFBa0IsR0FBRzs7QUFFMUIsZ0JBQUksVUFBVSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsV0FBVyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFakYsZ0JBQUksaUJBQWlCLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsVUFBUyxLQUFLLEVBQUU7QUFDdEQsb0JBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRTtBQUNqQyx5QkFBSyxFQUFFLEtBQUs7aUJBQ2YsQ0FBQyxDQUFDO0FBQ0gsdUJBQU87QUFDSCw2QkFBUyxFQUFFLEtBQUs7QUFDaEIsNkJBQVMsRUFBRSxLQUFLO0FBQ2hCLDBCQUFNLEVBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxBQUFDO0FBQy9CLDJCQUFPLEVBQUUsSUFBSTtBQUNiLGtDQUFjLEVBQUUsSUFBSTtBQUNwQiw0QkFBUSxFQUFFLEtBQUs7QUFDZixnQ0FBWSxFQUFFLEtBQUs7QUFDbkIsd0JBQUksRUFBRSxLQUFLOzs7QUFHWCwyQkFBTyxFQUFFLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxJQUFJLENBQUMsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU87QUFDcEUsMEJBQU0sRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRTtBQUN0QyxpQ0FBUyxFQUFFLEtBQUs7cUJBQ25CLENBQUMsRUFBRSxPQUFPLENBQUM7aUJBQ2YsQ0FBQzthQUNMLENBQUMsQ0FBQzs7QUFFSCxnQkFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzdFLGdCQUFJLGVBQWUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxVQUFTLEVBQUUsRUFBRTtBQUMvQyxvQkFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFO0FBQ25DLHNCQUFFLEVBQUUsRUFBRTtpQkFDVCxDQUFDLENBQUM7QUFDSCx1QkFBTztBQUNILDZCQUFTLEVBQUUsS0FBSztBQUNoQiw2QkFBUyxFQUFFLElBQUk7QUFDZiwwQkFBTSxFQUFFLElBQUk7QUFDWiwyQkFBTyxFQUFFLEVBQUU7QUFDWCxrQ0FBYyxFQUFFLElBQUk7QUFDcEIsNEJBQVEsRUFBRSxLQUFLO0FBQ2YsZ0NBQVksRUFBRSxLQUFLO0FBQ25CLHdCQUFJLEVBQUUsU0FBUyxJQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQSxBQUFDO0FBQzNDLDJCQUFPLEVBQUUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLElBQUksQ0FBQyxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTztBQUNwRSwwQkFBTSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFO0FBQ3RDLCtCQUFPLEVBQUUsRUFBRTtxQkFDZCxDQUFDLEVBQUUsT0FBTyxDQUFDO2lCQUNmLENBQUM7YUFDTCxDQUFDLENBQUM7O0FBRUgsZ0JBQUksZUFBZSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzNGLGdCQUFJLHNCQUFzQixHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLFVBQVMsRUFBRSxFQUFFO0FBQzdELG9CQUFJLFlBQVksR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUU7QUFDakQsc0JBQUUsRUFBRSxFQUFFO2lCQUNULENBQUMsQ0FBQztBQUNILHVCQUFPO0FBQ0gsNkJBQVMsRUFBRSxLQUFLO0FBQ2hCLDZCQUFTLEVBQUUsSUFBSTtBQUNmLDBCQUFNLEVBQUUsSUFBSTtBQUNaLDJCQUFPLEVBQUUsSUFBSTtBQUNiLGtDQUFjLEVBQUUsRUFBRTtBQUNsQiw0QkFBUSxFQUFFLEtBQUs7QUFDZixnQ0FBWSxFQUFFLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxJQUFJLENBQUMsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVk7QUFDOUUsd0JBQUksRUFBRSxlQUFlLElBQUksWUFBWSxHQUFHLFlBQVksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFBLEFBQUM7QUFDL0QsMkJBQU8sRUFBRSxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPO0FBQ3BFLDBCQUFNLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUU7QUFDdEMsc0NBQWMsRUFBRSxFQUFFO3FCQUNyQixDQUFDLEVBQUUsT0FBTyxDQUFDO2lCQUNmLENBQUM7YUFDTCxDQUFDLENBQUM7OztBQUdILGdCQUFJLFlBQVksR0FBRyxFQUFFLENBQUM7QUFDdEIsZ0JBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFO0FBQzFCLHdCQUFRLEVBQUUsSUFBSTthQUNqQixDQUFDLENBQUMsTUFBTSxFQUFFO0FBQ1AsNEJBQVksR0FBRyxDQUFDO0FBQ1osNkJBQVMsRUFBRSxLQUFLO0FBQ2hCLDZCQUFTLEVBQUUsSUFBSTtBQUNmLDBCQUFNLEVBQUUsSUFBSTtBQUNaLDJCQUFPLEVBQUUsSUFBSTtBQUNiLGtDQUFjLEVBQUUsSUFBSTtBQUNwQiw0QkFBUSxFQUFFLElBQUk7QUFDZCxnQ0FBWSxFQUFFLEtBQUs7QUFDbkIsd0JBQUksRUFBRSxVQUFVO0FBQ2hCLDJCQUFPLEVBQUUsS0FBSztBQUNkLDBCQUFNLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUU7QUFDdEMsZ0NBQVEsRUFBRSxJQUFJO3FCQUNqQixDQUFDLEVBQUUsT0FBTyxDQUFDO2lCQUNmLENBQUMsQ0FBQzthQUNOOztBQUVELGtCQUFNLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsZUFBZSxFQUFFLHNCQUFzQixFQUFFLFlBQVksQ0FBQyxDQUFDO1NBQzdHOztBQUVELGlCQUFTLGtCQUFrQixHQUFHO0FBQzFCLGtCQUFNLENBQUMsYUFBYSxHQUFHLEVBQUUsQ0FBQzs7O0FBRzFCLGFBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLFVBQVMsRUFBRSxFQUFFOztBQUV4QixvQkFBSSxzQkFBc0IsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFjLEVBQUUsVUFBUyxhQUFhLEVBQUU7O0FBRWpGLDJCQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztpQkFDL0MsQ0FBQyxDQUFDOztBQUVILGlCQUFDLENBQUMsSUFBSSxDQUFDLHNCQUFzQixFQUFFLFVBQVMsRUFBRSxFQUFFO0FBQ3hDLDBCQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQztBQUN0Qiw2QkFBSyxFQUFFLEtBQUs7QUFDWixpQ0FBUyxFQUFFLEVBQUUsQ0FBQyxTQUFTO0FBQ3ZCLDZCQUFLLEVBQUUsRUFBRTtBQUNULGlDQUFTLEVBQUUsRUFBRSxDQUFDLFNBQVM7QUFDdkIsOEJBQU0sRUFBRSxFQUFFLENBQUMsTUFBTTtBQUNqQiwrQkFBTyxFQUFFLEVBQUUsQ0FBQyxPQUFPO0FBQ25CLHNDQUFjLEVBQUUsRUFBRSxDQUFDLGNBQWM7QUFDakMsZ0NBQVEsRUFBRSxFQUFFLENBQUMsUUFBUTtBQUNyQixvQ0FBWSxFQUFFLEVBQUUsQ0FBQyxZQUFZO0FBQzdCLCtCQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU87cUJBQ3RCLENBQUMsQ0FBQztpQkFDTixDQUFDLENBQUM7YUFDTixDQUFDLENBQUM7OztBQUdILGFBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLFVBQVMsRUFBRSxFQUFFO0FBQ3hCLGlCQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsVUFBUyxFQUFFLEVBQUU7QUFDbEMsMEJBQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDO0FBQ3RCLDZCQUFLLEVBQUUsSUFBSTtBQUNYLDZCQUFLLEVBQUUsRUFBRTtBQUNULGlDQUFTLEVBQUcsRUFBRSxDQUFDLFNBQVMsSUFBSSxNQUFNLENBQUMscUJBQXFCLEdBQUcsRUFBRSxDQUFDLFNBQVMsR0FBRyxJQUFJLEFBQUM7QUFDL0UsK0JBQU8sRUFBRyxFQUFFLENBQUMsU0FBUyxJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsR0FBRyxFQUFFLENBQUMsT0FBTyxHQUFHLElBQUksQUFBQztBQUN0RSxzQ0FBYyxFQUFHLEVBQUUsQ0FBQyxTQUFTLElBQUksTUFBTSxDQUFDLHVCQUF1QixHQUFHLEVBQUUsQ0FBQyxjQUFjLEdBQUcsSUFBSSxBQUFDO0FBQzNGLGdDQUFRLEVBQUUsRUFBRSxDQUFDLFNBQVMsSUFBSSxNQUFNLENBQUMsaUJBQWlCO0FBQ2xELG9DQUFZLEVBQUUsRUFBRSxDQUFDLFlBQVk7QUFDN0IsK0JBQU8sRUFBRyxFQUFFLENBQUMsU0FBUyxJQUFJLE1BQU0sQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLEdBQUcsRUFBRSxDQUFDLGVBQWUsSUFBSSxNQUFNLENBQUMsd0JBQXdCLEFBQUM7QUFDbkgsK0JBQU8sRUFBRSxFQUFFLENBQUMsT0FBTztxQkFDdEIsQ0FBQyxDQUFDO2lCQUNOLENBQUMsQ0FBQzthQUNOLENBQUMsQ0FBQztTQUNOOztBQUVELGlCQUFTLFVBQVUsQ0FBQyxRQUFRLEVBQUU7QUFDMUIsaUJBQUssQ0FBQyxHQUFHLENBQUMsMkJBQTJCLEVBQUUsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFTLFFBQVEsRUFBRTtBQUM3RSx3QkFBUSxFQUFFLENBQUM7YUFDZCxFQUNELFlBQVc7QUFDUCxxQkFBSyxDQUFDLDZCQUE2QixDQUFDLENBQUM7YUFDeEMsQ0FBQyxDQUFDO1NBQ1Y7O0FBRUQsY0FBTSxDQUFDLHNCQUFzQixHQUFHLFlBQVc7QUFDdkMsbUJBQU8sTUFBTSxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQ2xDLENBQUM7O0FBRUYsY0FBTSxDQUFDLG1CQUFtQixHQUFHLFVBQVMsS0FBSyxFQUFFO0FBQ3pDLGlCQUFLLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztTQUMxQixDQUFDOztBQUVGLGNBQU0sQ0FBQyxjQUFjLEdBQUcsWUFBVzs7QUFFL0IsZ0JBQUksVUFBVSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUM7QUFDaEUsbUJBQU8sVUFBVSxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUssVUFBVSxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxNQUFNLEFBQUMsQ0FBQztTQUMvRixDQUFDOztBQUVGLGNBQU0sQ0FBQyxXQUFXLEdBQUcsWUFBVzs7QUFFNUIsa0JBQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDO0FBQ2xCLHlCQUFTLEVBQUUsTUFBTSxDQUFDLHFCQUFxQjtBQUN2QywrQkFBZSxFQUFFLE1BQU0sQ0FBQyx3QkFBd0I7QUFDaEQseUJBQVMsRUFBRSxFQUFFO0FBQ2IsdUJBQU8sRUFBRyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxJQUFJLEFBQUM7QUFDNUQsOEJBQWMsRUFBRyxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxJQUFJLEFBQUM7QUFDakYsNEJBQVksRUFBRSxLQUFLO0FBQ25CLHVCQUFPLEVBQUUsRUFBRTthQUNkLENBQUMsQ0FBQztTQUNOLENBQUM7O0FBRUYsY0FBTSxDQUFDLGNBQWMsR0FBRyxVQUFTLEtBQUssRUFBRTtBQUNwQyxnQkFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQzNDLGtCQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDakMsQ0FBQzs7QUFFRixjQUFNLENBQUMsRUFBRSxHQUFHLFlBQVc7QUFDbkIsOEJBQWtCLEVBQUUsQ0FBQztBQUNyQixzQkFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3JCLDBCQUFjLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDMUIsQ0FBQzs7QUFFRixjQUFNLENBQUMsTUFBTSxHQUFHLFlBQVc7QUFDdkIsMEJBQWMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDcEMsQ0FBQztLQUNMLENBQUM7O0FBRUYsb0JBQWdCLENBQUMsT0FBTyxHQUFHLENBQUMsUUFBUSxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxhQUFhLEVBQUUsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0NBQzFHLENBQUM7Ozs7Ozs7OztBQ3pTRixjQUFjLENBQUMsU0FBUyxHQUFHLFVBQVUsTUFBTSxFQUFFLEdBQUcsRUFBRTs7QUFFOUMsUUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDOztBQUVoQixRQUFJLENBQUMsSUFBSSxHQUFHLFlBQVksRUFDdkIsQ0FBQzs7O0FBR0YsUUFBSSxDQUFDLGlCQUFpQixHQUFHLFVBQVMsUUFBUSxFQUFFLFFBQVEsRUFBRTtBQUNsRCxZQUFJLFFBQVEsSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsZ0JBQWdCLEVBQUU7OztBQUUxQyxnQkFBSSxNQUFNLENBQUMsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFO0FBQ25ELHNCQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDO2FBQy9CO1NBQ0o7QUFDRCxZQUFJLFFBQVEsSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsZ0JBQWdCLEVBQUU7U0FDN0M7S0FDSixDQUFDO0NBQ0wsQ0FBQzs7Ozs7Ozs7Ozs7QUNoQkYsTUFBTSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7O0FBRTVCLGVBQWUsR0FBRyxVQUFTLE1BQU0sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7O0FBRS9ELFFBQUksQ0FBQyxTQUFTLEdBQUcsVUFBVSxPQUFNLEVBQUUsZ0JBQWUsRUFBRSxTQUFRLEVBQUU7QUFDMUQsWUFBSSxhQUFhLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztBQUM1Qix1QkFBVyxFQUFFLGlDQUFpQztBQUM5QyxvQkFBUSxFQUFFLFFBQVE7QUFDbEIsc0JBQVUsRUFBRSxhQUFhO0FBQ3pCLHVCQUFXLEVBQUUsWUFBWTtBQUN6QixtQkFBTyxFQUFFO0FBQ0wsc0JBQU0sRUFBRSxrQkFBVztBQUFFLDJCQUFPLE9BQU0sQ0FBQztpQkFBRTtBQUNyQywrQkFBZSxFQUFFLDJCQUFXO0FBQUUsMkJBQU8sZ0JBQWUsQ0FBQztpQkFBRTtBQUN2RCx3QkFBUSxFQUFFLG9CQUFXO0FBQUUsMkJBQU8sU0FBUSxDQUFDO2lCQUFFO2FBQzVDO1NBQ0osQ0FBQyxDQUFDOztBQUVILHFCQUFhLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFXLEVBQUUsQ0FBQyxDQUFDO0tBQzVDLENBQUM7Ozs7QUFLRixRQUFJLGFBQWEsR0FBRyxTQUFoQixhQUFhLENBQWEsTUFBTSxFQUFFLGNBQWMsRUFBRSxNQUFNLEVBQUUsZUFBZSxFQUFFLFFBQVEsRUFBRTs7QUFFckYsY0FBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7OztBQUd2QixjQUFNLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQzs7O0FBR3hCLGNBQU0sQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDOzs7QUFHekIsY0FBTSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7OztBQUdwQixjQUFNLENBQUMsV0FBVyxHQUFHLEVBQUUsV0FBVyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUM7O0FBRW5ELGNBQU0sQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDOztBQUV6QyxpQkFBUyxRQUFRLENBQUMsTUFBTSxFQUFFO0FBQ3RCLGlCQUFLLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxRQUFRLEVBQUU7QUFDdkYsc0JBQU0sQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7OztBQUcvQyxvQkFBSSxNQUFNLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtBQUNwQiwwQkFBTSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUM7aUJBQ2pFO0FBQ0QsZ0NBQWdCLEVBQUUsQ0FBQztBQUNuQixzQkFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDO2FBQ3RCLEVBQ0QsWUFBVztBQUNQLHFCQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQzthQUNoQyxDQUFDLENBQUM7U0FDTjs7QUFFRCxnQkFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUVqQixpQkFBUyxnQkFBZ0IsR0FBRztBQUN4QixnQkFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNyRSxrQkFBTSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxVQUFTLElBQUksRUFBRTtBQUNqRCxvQkFBSSxrQkFBa0IsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsRUFBQyxPQUFPLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQztBQUN0RSxvQkFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNsRCx1QkFBTztBQUNILHdCQUFJLEVBQUMsSUFBSTtBQUNULDBCQUFNLEVBQUMsTUFBTTtpQkFDaEIsQ0FBQzthQUNMLENBQUMsQ0FBQztTQUNOOztBQUVELGlCQUFTLGdCQUFnQixHQUFHO0FBQzFCLGtCQUFNLENBQUMsV0FBVyxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7QUFDN0IsYUFBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsVUFBUyxFQUFFLEVBQUU7QUFDeEIsb0JBQUksaUJBQWlCLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLFVBQVMsV0FBVyxFQUFFOztBQUUxRSwyQkFBTyxDQUFDLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7aUJBQzNDLENBQUMsQ0FBQztBQUNILHNCQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDekIseUJBQUssRUFBRSxFQUFFO0FBQ1QsNEJBQVEsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUNiLENBQUMsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsTUFBTSxDQUFDLEVBQ2xDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQztxQkFDakQsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO2lCQUNmLENBQUMsQ0FBQzthQUNOLENBQUMsQ0FBQztTQUNKOztBQUVELGlCQUFTLFFBQVEsQ0FBQyxRQUFRLEVBQUU7QUFDeEIsaUJBQUssQ0FBQyxHQUFHLENBQUMsaUNBQWlDLEVBQUUsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxRQUFRLEVBQUU7QUFDdkYsd0JBQVEsRUFBRSxDQUFDO2FBQ2QsRUFDRCxZQUFXO0FBQ1AscUJBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO2FBQ2hDLENBQUMsQ0FBQztTQUNOOztBQUVELGNBQU0sQ0FBQyxpQkFBaUIsR0FBRyxVQUFTLEdBQUcsRUFBRTtBQUNyQyxnQkFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzVDLGtCQUFNLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDcEMsQ0FBQzs7QUFFRixjQUFNLENBQUMsU0FBUyxHQUFHLFlBQVc7QUFDMUIsa0JBQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUMsSUFBSSxFQUFFLEVBQUUsRUFBQyxDQUFDLENBQUM7U0FDbkMsQ0FBQzs7QUFFRixjQUFNLENBQUMsV0FBVyxHQUFHLFVBQVMsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7O0FBRWhELGtCQUFNLENBQUMsU0FBUyxFQUFFLENBQUM7U0FDcEIsQ0FBQzs7QUFFRixjQUFNLENBQUMsa0JBQWtCLEdBQUcsVUFBUyxDQUFDLEVBQUU7QUFDcEMsZ0JBQUksQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFFLEVBQUU7QUFDZixzQkFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDO2FBQ3RCO1NBQ0osQ0FBQzs7QUFFRixjQUFNLENBQUMsWUFBWSxHQUFHLFVBQVMsR0FBRyxFQUFFO0FBQ2hDLGdCQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDdkMsa0JBQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUM1QixnQkFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFO0FBQ3hCLHNCQUFNLENBQUMsU0FBUyxFQUFFLENBQUM7YUFDdEI7U0FDSixDQUFDOzs7QUFJRixjQUFNLENBQUMsV0FBVyxHQUFHLFVBQVMsU0FBUyxFQUFFO0FBQ3JDLGdCQUFJLEdBQUcsR0FBRyx5QkFBeUIsR0FBRyxTQUFTLENBQUM7QUFDaEQsbUJBQU8sS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxRQUFRLEVBQUU7QUFDMUMsdUJBQU8sUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7YUFDN0IsQ0FBQyxDQUFDO1NBQ04sQ0FBQzs7QUFFRixjQUFNLENBQUMsRUFBRSxHQUFHLFlBQVk7QUFDcEIsNEJBQWdCLEVBQUUsQ0FBQztBQUNuQixvQkFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ25CLDBCQUFjLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDMUIsQ0FBQzs7QUFFRixjQUFNLENBQUMsTUFBTSxHQUFHLFlBQVk7QUFDeEIsMEJBQWMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDcEMsQ0FBQztLQUNMLENBQUM7O0FBRUYsaUJBQWEsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxRQUFRLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLGlCQUFpQixFQUFFLFVBQVUsQ0FBQyxDQUFDO0NBQ2pHLENBQUM7Ozs7Ozs7QUN0SkYsY0FBYyxDQUFDLFNBQVMsR0FBRyxVQUFVLE1BQU0sRUFBRSxHQUFHLEVBQUU7O0FBRTlDLFFBQUksSUFBSSxHQUFHLElBQUksQ0FBQzs7O0FBR2hCLFFBQUksQ0FBQyxjQUFjLEdBQUcsU0FBUyxDQUFDOztBQUVoQyxRQUFJLENBQUMsSUFBSSxHQUFHLFlBQVksRUFBRyxDQUFDOzs7QUFHNUIsUUFBSSxDQUFDLGFBQWEsR0FBRyxVQUFVLE9BQU8sRUFBRTtBQUNwQyxlQUFPLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7QUFDM0MsZUFBTyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO0FBQzFDLGVBQU8sQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQztBQUN6QyxlQUFPLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ3JELGVBQU8sQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7O0FBRXJELFlBQUksQ0FBQyx5QkFBeUIsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ2hFLFlBQUksQ0FBQyx5QkFBeUIsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxDQUFDOztBQUVsRSxlQUFPLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxZQUFZLEdBQUcsVUFBVSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFO0FBQ3BHLGdCQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxXQUFXLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQzNHLENBQUM7O0FBRUYsZUFBTyxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsWUFBWSxHQUFHLFVBQVUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRTtBQUN0RyxnQkFBSSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsYUFBYSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztTQUM3RyxDQUFDOztBQUVGLGVBQU8sQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLGdCQUFnQixHQUFHLFVBQVUsSUFBSSxFQUFFO0FBQ2pFLGNBQUUsQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDN0QsZ0JBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDNUMsZ0JBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7OztTQUczQyxDQUFDOztBQUVGLGVBQU8sQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO0FBQ25FLGVBQU8sQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO0tBQ3hFLENBQUM7OztBQUdGLFFBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDOzs7QUFHN0IsUUFBSSxNQUFNLEdBQUcsU0FBUyxDQUFDO0FBQ3ZCLFFBQUksTUFBTSxHQUFHLFNBQVMsQ0FBQztBQUN2QixRQUFJLE1BQU0sR0FBRyxTQUFTLENBQUM7QUFDdkIsUUFBSSxNQUFNLEdBQUcsU0FBUyxDQUFDO0FBQ3ZCLFFBQUksV0FBVyxHQUFHLFNBQVMsQ0FBQztBQUM1QixRQUFJLFVBQVUsR0FBRyxTQUFTLENBQUM7O0FBRTNCLFFBQUksVUFBVSxHQUFHLHEyQkFBcTJCLENBQUM7QUFDdjNCLFFBQUksaUJBQWlCLEdBQUcsdXRDQUF1dEMsQ0FBQztBQUNodkMsUUFBSSxnQkFBZ0IsR0FBRyw2M0JBQTYzQixDQUFDOzs7QUFHcjVCLFFBQUksYUFBYSxHQUFHLElBQUksQ0FBQzs7OztBQUl6QixhQUFTLFNBQVMsQ0FBQyxHQUFHLEVBQUU7QUFDcEIsZUFBTyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLEdBQ3ZCLFVBQVUsR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUN2QixPQUFPLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxHQUM3QixtQkFBbUIsR0FBRyxHQUFHLENBQUMsZUFBZSxHQUFHLElBQUksR0FDaEQsVUFBVSxHQUFHLEdBQUcsQ0FBQyxNQUFNLEdBQUcsSUFBSSxHQUM5QixlQUFlLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxHQUN4QyxZQUFZLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLElBQUksR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxHQUN4RixnQ0FBZ0MsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FDdEUsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxHQUM1RyxjQUFjLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLEdBQ3RELGVBQWUsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLEdBQzdDLGVBQWUsR0FBRyxHQUFHLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztLQUNoRDs7QUFFRCxhQUFTLFFBQVEsQ0FBQyxHQUFHLEVBQUU7QUFDbkIsZUFBTyxVQUFVLEdBQUcsR0FBRyxHQUFHLElBQUksR0FDMUIsT0FBTyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksR0FDN0IsWUFBWSxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxJQUFJLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLElBQUksR0FDeEYsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDO0tBQ3BIOztBQUVELGFBQVMsUUFBUSxDQUFDLEdBQUcsRUFBRTtBQUNuQixZQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsd0JBQXdCLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDM0QsZUFBTyxFQUFFLEdBQ0wsVUFBVSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQ3ZCLFlBQVksR0FBRyxHQUFHLENBQUMsUUFBUSxHQUFHLElBQUksR0FDbEMsVUFBVSxHQUFHLEdBQUcsQ0FBQyxNQUFNLEdBQUcsSUFBSSxHQUM5QixjQUFjLEdBQUcsR0FBRyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsSUFBSSxHQUM1QyxzQkFBc0IsR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsa0JBQWtCLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxHQUN4RSxjQUFjLEdBQUcsR0FBRyxDQUFDLFVBQVUsR0FBRyxJQUFJLEdBQ3RDLFlBQVksR0FBRyxHQUFHLENBQUMsUUFBUSxHQUFHLElBQUksR0FDbEMsWUFBWSxJQUFJLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFBLEFBQUMsR0FBRyxJQUFJLEdBQ3pELG1CQUFtQixHQUFHLEdBQUcsQ0FBQyxlQUFlLEdBQUcsSUFBSSxHQUNoRCw0QkFBNEIsR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsd0JBQXdCLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxHQUNwRixTQUFTLEdBQUcsR0FBRyxDQUFDLEtBQUssR0FBRyxJQUFJLEdBQzVCLGFBQWEsR0FBRyxHQUFHLENBQUMsU0FBUyxHQUFHLElBQUksR0FDcEMsd0JBQXdCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsR0FBRyxJQUFJLEdBQ3RFLHNCQUFzQixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsSUFBSSxHQUNsRSx5QkFBeUIsR0FBRyxLQUFLLENBQUMsS0FBSyxHQUFHLE1BQU0sR0FBRyxLQUFLLENBQUMsS0FBSyxHQUFHLElBQUk7O0FBRXJFLDhCQUFzQixHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUM7S0FDaEY7Ozs7OztBQU1ELGFBQVMsdUJBQXVCLENBQUMsR0FBRyxFQUFFO0FBQ2xDLFlBQUksR0FBRyxDQUFDLFVBQVUsRUFBRTtBQUNoQixnQkFBSSxHQUFHLENBQUMsZUFBZSxFQUFFLENBQUMsZUFBZSxFQUFFLEVBQ3ZDLE9BQU8sTUFBTSxDQUFDLEtBQ2IsSUFBSSxHQUFHLENBQUMsZUFBZSxFQUFFLENBQUMsZUFBZSxFQUFFLEVBQzVDLE9BQU8sTUFBTSxDQUFDLEtBRWQsT0FBTyxTQUFTLENBQUM7U0FDeEIsTUFBTTtBQUNILG1CQUFPLFNBQVMsQ0FBQztTQUNwQjtLQUNKOzs7QUFHRCxhQUFTLDRCQUE0QixDQUFDLEdBQUcsRUFBRTtBQUN2QyxlQUFRLEdBQUcsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBRTtLQUNuQzs7QUFFRCxhQUFTLHVCQUF1QixDQUFDLEdBQUcsRUFBRTtBQUNsQyxZQUFJLEdBQUcsQ0FBQyxVQUFVLElBQUksR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxhQUFhLEVBQUU7QUFDcEQsbUJBQU8sTUFBTSxDQUFDO1NBQ2pCLE1BQU07QUFDSCx1QkFBTyxNQUFNLENBQUM7YUFDakI7S0FDSjs7Ozs7O0FBTUQsYUFBUyxXQUFXLENBQUMsS0FBSyxFQUFFO0FBQ3hCLFlBQUksR0FBRyxDQUFDLGVBQWUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsRUFBRTs7QUFDN0MsbUJBQU8sSUFBSSxDQUFDO1NBQ2YsTUFBTSxJQUFJLEdBQUcsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFOztBQUNuRCxtQkFBTyxLQUFLLENBQUM7U0FDaEIsTUFBTSxJQUFJLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRTs7QUFDL0MsbUJBQU8sS0FBSyxDQUFDO1NBQ2hCLE1BQU07QUFDSCxtQkFBTyxBQUFDLEtBQUssSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsY0FBYztBQUN0QyxrQkFBTSxDQUFDLGFBQWEsRUFBRSxJQUFJLEtBQUssQ0FBQyxVQUFVLEFBQUMsSUFDM0MsaUNBQWlDLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQztBQUMzQyxlQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsa0JBQWtCLEtBQUssSUFBSSxJQUNwQywwQ0FBMEMsQ0FBQyxLQUFLLENBQUMsQ0FBQSxBQUFDLEFBQUMsQ0FBQztTQUNuRTtLQUNKOztBQUVELGFBQVMsV0FBVyxDQUFDLEtBQUssRUFBRTtBQUN4QixZQUFJLEdBQUcsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFOztBQUM1QyxtQkFBTyxLQUFLLENBQUM7U0FDaEIsTUFBTSxJQUFJLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRTs7QUFDL0MsbUJBQU8sS0FBSyxDQUFDO1NBQ2hCLE1BQU07QUFDSCxtQkFBTyxBQUFDLEtBQUssSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsY0FBYztBQUN0QyxrQkFBTSxDQUFDLGFBQWEsRUFBRSxJQUFJLEtBQUssQ0FBQyxVQUFVLEFBQUMsSUFDM0Msa0NBQWtDLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQztBQUM1QyxlQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsa0JBQWtCLEtBQUssSUFBSSxJQUNwQywwQ0FBMEMsQ0FBQyxLQUFLLENBQUMsQ0FBQSxBQUFDLEFBQUMsQ0FBQztTQUNuRTtLQUNKOztBQUVELGFBQVMsV0FBVyxDQUFDLEtBQUssRUFBRTtBQUN4QixZQUFJLEdBQUcsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFOztBQUM1QyxtQkFBTyxLQUFLLENBQUM7U0FDaEIsTUFBTSxJQUFJLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRTs7QUFDL0MsbUJBQU8sS0FBSyxDQUFDO1NBQ2hCLE1BQU07QUFDSCxtQkFBTyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGNBQWMsSUFDckMsTUFBTSxDQUFDLGFBQWEsRUFBRSxJQUFJLEtBQUssQ0FBQyxVQUFVLEFBQUMsQ0FBQztTQUNwRDtLQUNKOztBQUVELGFBQVMsV0FBVyxDQUFDLEtBQUssRUFBRTtBQUN4QixZQUFJLEdBQUcsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDN0MsbUJBQU8sSUFBSSxDQUFDO1NBQ2YsTUFBTSxJQUFJLEdBQUcsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFOztBQUNuRCx1QkFBTyxLQUFLLENBQUM7YUFDaEIsTUFBTSxJQUFJLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRTs7QUFDL0MsdUJBQU8sS0FBSyxDQUFDO2FBQ2hCLE1BQU07QUFDSCx1QkFBTyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGNBQWMsSUFDckMsTUFBTSxDQUFDLGFBQWEsRUFBRSxJQUFJLEtBQUssQ0FBQyxVQUFVLEFBQUMsQ0FBQzthQUNwRDtLQUNKOzs7O0FBSUQsUUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFVLElBQUksRUFBRTtBQUM3QixZQUFJLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxlQUFlLENBQUM7QUFDN0QsWUFBSSxHQUFHLENBQUMsZUFBZSxFQUFFLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRTs7QUFDckQsbUJBQU8sSUFBSSxDQUFDO1NBQ2YsTUFBTSxJQUFJLEdBQUcsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFOztBQUNuRCxtQkFBTyxLQUFLLENBQUM7U0FDaEIsTUFBTTtBQUNILG1CQUFPLENBQUMsSUFBSSxJQUFJLE9BQU8sSUFBSSxJQUFJLElBQUksTUFBTSxDQUFBLEtBQU0sSUFBSSxDQUFDLFFBQVEsSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsY0FBYyxJQUFJLEdBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBLEFBQUMsQ0FBQztTQUNqSTtLQUNKLENBQUM7O0FBRUYsUUFBSSxDQUFDLFFBQVEsR0FBRyxVQUFVLElBQUksRUFBRTtBQUM1QixlQUFPLElBQUksQ0FBQztLQUNmLENBQUM7Ozs7Ozs7O0FBUUYsYUFBUyxpQ0FBaUMsQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFO0FBQzFELGVBQU8sQ0FBQyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGVBQWUsSUFBSSxVQUFVLENBQUEsSUFDdEQsR0FBRyxDQUFDLDhCQUE4QixDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQ2pEOztBQUVELGFBQVMsa0NBQWtDLENBQUMsS0FBSyxFQUFFLFVBQVUsRUFBRTtBQUMzRCxlQUFPLENBQUMsS0FBSyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxlQUFlLElBQUksVUFBVSxDQUFBLElBQ3RELENBQUMsR0FBRyxDQUFDLDBCQUEwQixFQUFFLElBQ2pDLENBQUMsR0FBRyxDQUFDLDhCQUE4QixDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQ2xEOzs7QUFHRCxhQUFTLHVDQUF1QyxDQUFDLFdBQVcsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFOztBQUU1RSxZQUFJLFlBQVksR0FBRyxHQUFHLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztBQUNoRCxZQUFJLENBQUMsWUFBWSxFQUFFO0FBQ2YsbUJBQU8sS0FBSyxDQUFDO1NBQ2hCOzs7QUFHRCxlQUFPLENBQUMsV0FBVyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxlQUFlLElBQUksVUFBVSxDQUFBLEtBQzNELEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxrQkFBa0IsSUFBSSxJQUFJLElBQUksVUFBVSxDQUFBLEFBQUMsSUFDdEQsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLDJCQUEyQixDQUFDLFlBQVksRUFBRSxXQUFXLENBQUMsQ0FBQztLQUMvRTs7QUFFRCxhQUFTLDBDQUEwQyxDQUFDLFdBQVcsRUFBRTtBQUM3RCxlQUFPLENBQUMsdUNBQXVDLENBQUMsV0FBVyxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFDbEUsQ0FBQyx1Q0FBdUMsQ0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQ3hFOzs7O0FBSUQsYUFBUyxvQkFBb0IsQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRTs7QUFFbkQsWUFBSSxJQUFJLEtBQUssSUFBSSxJQUFJLHVDQUF1QyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFO0FBQ3ZGLGVBQUcsQ0FBQyxpQ0FBaUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ2hFLE1BQU0sSUFBSSxpQ0FBaUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFO0FBQ2pFLGVBQUcsQ0FBQyw0QkFBNEIsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDckQsTUFBTSxJQUFJLGtDQUFrQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUU7QUFDbEUsZUFBRyxDQUFDLDZCQUE2QixDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUN0RDtLQUNKOzs7QUFHRCxhQUFTLFFBQVEsQ0FBQyxJQUFJLEVBQUU7QUFDcEIsZUFBTyxJQUFJLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGFBQWEsQ0FBQztLQUM1Qzs7OztBQUlELGFBQVMsV0FBVyxHQUFHO0FBQ25CLGVBQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQ2QsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxFQUFFLEVBQUUsVUFBVSxHQUFHLEVBQUU7QUFDdEMsbUJBQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQztTQUN6QyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7QUFDWCxnQkFBSSxFQUFFLE9BQU87QUFDYixvQkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLHVCQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUM7QUFDaEMsb0JBQVEsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsRUFBRSxJQUFJLENBQUM7QUFDN0Qsa0JBQU0sRUFBRSxTQUFTO0FBQ2pCLG9CQUFRLEVBQUUsS0FBSztBQUNmLGtCQUFNLEVBQUUsSUFBSTtTQUNmLENBQ0EsQ0FBQztLQUNUOzs7QUFHRCxhQUFTLE9BQU8sR0FBRztBQUNmLGVBQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQ2pDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLG1CQUFRLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFFO1NBQ3JDLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUNYLGdCQUFJLEVBQUUsU0FBUztBQUNmLG9CQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDNUIsdUJBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztBQUNoQyxtQkFBTyxFQUFFLENBQUM7U0FDYixFQUNELEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFO0FBQ1Qsb0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM1Qix1QkFBVyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDO0FBQ2hDLG9CQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsMEJBQTBCLEVBQUUsSUFBSSxDQUFDO0FBQzdELGdCQUFJLEVBQUUsTUFBTTtBQUNaLGtCQUFNLEVBQUUsSUFBSTtBQUNaLGtCQUFNLEVBQUUsU0FBUztBQUNqQixpQkFBSyxFQUFFLGVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRTs7QUFFNUIsb0JBQUksS0FBSyxDQUFDLEdBQUcsRUFBRTs7O0FBR1gsdUJBQUcsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO2lCQUN0RCxNQUFNOztBQUVILHVCQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsaUJBQWlCLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDbkQ7YUFDSjtBQUNELHdCQUFZLEVBQUUsc0JBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRTs7QUFFbkMsbUJBQUcsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ2hDO1NBQ0osQ0FBQyxFQUNGLEVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFO0FBQ2IsZ0JBQUksRUFBRSxHQUFHO0FBQ1Qsa0JBQU0sRUFBRSxPQUFPO0FBQ2YsZ0JBQUksRUFBRSxnQkFBZ0I7QUFDdEIsb0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztBQUM5QixvQkFBUSxFQUFFLEtBQUs7U0FDbEIsQ0FBQyxDQUNELENBQUM7S0FDVDs7O0FBR0QsYUFBUyxPQUFPLEdBQUc7QUFDZixlQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUNqQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUN6QyxtQkFBUSxXQUFXLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBRTtTQUNyQyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7QUFDWCxnQkFBSSxFQUFFLFNBQVM7QUFDZixvQkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQzdCLHVCQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUM7QUFDaEMsbUJBQU8sRUFBRSxDQUFDO1NBQ2IsRUFDRCxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRTtBQUNULG9CQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDNUIsdUJBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztBQUNoQyxvQkFBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLDRCQUE0QixFQUFFLElBQUksQ0FBQztBQUMvRCxnQkFBSSxFQUFFLE1BQU07QUFDWixrQkFBTSxFQUFFLElBQUk7QUFDWixrQkFBTSxFQUFFLFNBQVM7QUFDakIsaUJBQUssRUFBRSxlQUFVLEtBQUssRUFBRSxNQUFNLEVBQUU7O0FBRTVCLG1CQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsaUJBQWlCLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNuRDtTQUNKLENBQUM7O0FBRUYsVUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQ1AsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxFQUFFLEVBQUUsVUFBVSxHQUFHLEVBQUU7QUFDMUMsbUJBQVEsR0FBRyxDQUFDLGtCQUFrQixHQUFHLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBRTtTQUMvRSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQ2IsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsVUFBVSxHQUFHLEVBQUU7QUFDdkMsbUJBQVEsR0FBRyxDQUFDLGtCQUFrQixHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUU7U0FDNUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsdUJBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUMvQixvQkFBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLG9CQUFvQixFQUFFLElBQUksQ0FBQztBQUN2RCxnQkFBSSxFQUFFLE1BQU07QUFDWixrQkFBTSxFQUFFLElBQUk7QUFDWixrQkFBTSxFQUFFLFNBQVM7QUFDakIsb0JBQVEsRUFBRSxLQUFLO1NBQ2xCLENBQ0EsRUFDTCxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRTtBQUNiLGdCQUFJLEVBQUUsR0FBRztBQUNULGtCQUFNLEVBQUUsT0FBTztBQUNmLGdCQUFJLEVBQUUsZ0JBQWdCO0FBQ3RCLG9CQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUM7QUFDOUIsb0JBQVEsRUFBRSxLQUFLO1NBQ2xCLENBQUMsQ0FDRCxDQUFDO0tBQ1Q7OztBQUdELGFBQVMsZ0JBQWdCLEdBQUc7QUFDeEIsZUFBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFDZCxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUN6QyxtQkFBTyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUM7U0FDcEYsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsb0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUM3Qix1QkFBVyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQy9CLG9CQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxDQUFDO0FBQ3ZELGdCQUFJLEVBQUUsTUFBTTtBQUNaLGtCQUFNLEVBQUUsSUFBSTtBQUNaLGtCQUFNLEVBQUUsU0FBUztBQUNqQixvQkFBUSxFQUFFLEtBQUs7U0FDbEIsQ0FDQSxDQUFDO0tBQ1Q7OztBQUdELGFBQVMsT0FBTyxHQUFHO0FBQ2YsZUFBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFDakMsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUUsVUFBVSxHQUFHLEVBQUU7QUFDekMsbUJBQVEsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUU7U0FDckMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsZ0JBQUksRUFBRSxTQUFTO0FBQ2Ysb0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM1Qix1QkFBVyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO0FBQ2xDLG1CQUFPLEVBQUUsQ0FBQztTQUNiLEVBQ0QsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUU7QUFDVCxnQkFBSSxFQUFFLGNBQWM7Ozs7O0FBS3BCLG9CQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDNUIsdUJBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQztBQUNsQyxvQkFBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FDM0IsY0FBYztBQUNkLHNDQUEwQjtBQUMxQiw0QkFBZ0I7QUFDaEIsZ0NBQW9CO0FBQ3BCLHFCQUFTO0FBQ1QsZ0JBQUksQ0FBQztBQUNULGdCQUFJLEVBQUUsTUFBTTtBQUNaLGtCQUFNLEVBQUUsSUFBSTtBQUNaLGtCQUFNLEVBQUUsU0FBUzs7QUFFakIsa0JBQU0sRUFBRSxHQUFHO0FBQ1gsd0JBQVksRUFBRSxJQUFJO0FBQ2xCLGdDQUFvQixFQUFFLEtBQUs7QUFDM0Isa0NBQXNCLEVBQUUsSUFBSTtBQUM1QixzQkFBVSxFQUFFLElBQUk7QUFDaEIsOEJBQWtCLEVBQUUsS0FBSztBQUN6QixnQ0FBb0IsRUFBRSxJQUFJO0FBQzFCLGlCQUFLLEVBQUUsZUFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFOztBQUU1QixtQkFBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDbkQ7U0FDSixDQUFDLEVBQ0YsRUFBRSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUU7QUFDYixnQkFBSSxFQUFFLEdBQUc7QUFDVCxrQkFBTSxFQUFFLE9BQU87QUFDZixnQkFBSSxFQUFFLGdCQUFnQjtBQUN0QixvQkFBUSxFQUFFLEtBQUs7QUFDZixvQkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDO1NBQ2pDLENBQUMsQ0FDRCxDQUFDO0tBQ1Q7O0FBRUQsYUFBUyxtQkFBbUIsR0FBRztBQUMzQixlQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUNkLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLG1CQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxLQUFLLElBQUksSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsS0FBSyxTQUFTLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztTQUNqSCxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQ2IsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxFQUFFLEVBQUUsVUFBVSxHQUFHLEVBQUU7QUFDMUMsbUJBQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDcEQsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUNiLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsRUFBRSxFQUFFLFVBQVUsR0FBRyxFQUFFO0FBQzdDLG1CQUFPLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7U0FDaEMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsb0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztBQUM5QixpQkFBSyxFQUFFLElBQUk7QUFDWCxrQkFBTSxFQUFFLE1BQU07QUFDZCxnQkFBSSxFQUFFLE1BQU07QUFDWixpQkFBSyxFQUFFLGVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRTs7QUFFNUIsbUJBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGtCQUFrQixDQUFDLENBQUM7YUFDekQ7U0FDSixDQUNBLENBQUM7S0FDVDs7QUFFRCxhQUFTLFFBQVEsR0FBRztBQUNoQixlQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUNkLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLG1CQUFPLEdBQUcsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUN4RCxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQ2IsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxFQUFFLEVBQUUsVUFBVSxHQUFHLEVBQUU7QUFDMUMsbUJBQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxVQUFVLEdBQUcsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDekYsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUNiLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsRUFBRSxFQUFFLFVBQVUsR0FBRyxFQUFFO0FBQzdDLG1CQUFPLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7U0FDN0QsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsb0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUM3QixpQkFBSyxFQUFFLElBQUk7QUFDWCxrQkFBTSxFQUFFLE1BQU07QUFDZCxnQkFBSSxFQUFFLE1BQU07QUFDWixvQkFBUSxFQUFFLEtBQUs7U0FDbEIsQ0FDQSxDQUFDO0tBQ1Q7OztBQUdELGFBQVMsV0FBVyxHQUFHO0FBQ25CLGVBQU8sUUFBUSxFQUFFLENBQUM7S0FDckI7OztBQUdELGFBQVMsVUFBVSxHQUFHO0FBQ2xCLGVBQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUN4QixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUN6QyxtQkFBTyxJQUFJLENBQUM7U0FDZixDQUFDLENBQUMsUUFBUSxFQUFFLEVBQ2IsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxFQUFFLEVBQUUsVUFBVSxHQUFHLEVBQUU7QUFDdEMsbUJBQU8saUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDakMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsb0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM1QixrQkFBTSxFQUFFLEVBQUU7QUFDVixpQkFBSyxFQUFFLEdBQUc7QUFDVixrQkFBTSxFQUFFLElBQUk7U0FDZixDQUNBLENBQUM7S0FDVDs7QUFFRCxhQUFTLGlCQUFpQixDQUFDLEdBQUcsRUFBRTtBQUM1QixZQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsZUFBZSxFQUFFLENBQUMsd0JBQXdCLENBQUMsR0FBRyxDQUFDLENBQUM7O0FBRWpFLFlBQUksTUFBTSxJQUFJLENBQUMsRUFBRTtBQUNiLG1CQUFPLFVBQVUsQ0FBQztTQUNyQixNQUFNLElBQUksTUFBTSxJQUFJLENBQUMsRUFBRTtBQUNwQixtQkFBTyxNQUFNLENBQUM7U0FDakIsTUFBTSxJQUFJLE1BQU0sSUFBSSxDQUFDLEVBQUU7QUFDcEIsbUJBQU8sV0FBVyxDQUFDO1NBQ3RCLE1BQU07QUFDSCxtQkFBTyxhQUFhLENBQUM7U0FDeEI7S0FDSjs7O0FBR0QsYUFBUyxPQUFPLEdBQUc7QUFDZixlQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUNqQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUN6QyxtQkFBUSxXQUFXLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBRTtTQUNyQyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7QUFDWCxnQkFBSSxFQUFFLFNBQVM7QUFDZixvQkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLHVCQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUM7QUFDbEMsbUJBQU8sRUFBRSxDQUFDO1NBQ2IsRUFDRCxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRTtBQUNULGdCQUFJLEVBQUUsY0FBYztBQUNwQixvQkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLHVCQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUM7O0FBRWxDLG9CQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUMzQixzQkFBc0I7QUFDdEIsK0JBQW1CO0FBQ25CLDhCQUFrQjtBQUNsQiw2QkFBaUI7QUFDakIsZ0JBQUksQ0FBQzs7QUFFVCxnQkFBSSxFQUFFLE1BQU07QUFDWixrQkFBTSxFQUFFLElBQUk7QUFDWixrQkFBTSxFQUFFLFNBQVM7O0FBRWpCLGtCQUFNLEVBQUUsR0FBRztBQUNYLHdCQUFZLEVBQUUsSUFBSTtBQUNsQixnQ0FBb0IsRUFBRSxLQUFLO0FBQzNCLGtDQUFzQixFQUFFLEtBQUs7QUFDN0Isc0JBQVUsRUFBRSxJQUFJO0FBQ2hCLDhCQUFrQixFQUFFLEtBQUs7QUFDekIsZ0NBQW9CLEVBQUUsS0FBSztBQUMzQixzQkFBVSxFQUFFLENBQUM7QUFDYixpQkFBSyxFQUFFLGVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRTs7QUFFNUIsbUJBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ25EO1NBQ0osQ0FBQyxFQUNGLFFBQVEsRUFBRTtBQUNWLFVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFO0FBQ2IsZ0JBQUksRUFBRSxHQUFHO0FBQ1Qsa0JBQU0sRUFBRSxPQUFPO0FBQ2YsZ0JBQUksRUFBRSxnQkFBZ0I7QUFDdEIsb0JBQVEsRUFBRSxLQUFLO0FBQ2Ysb0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztTQUNqQyxDQUFDLENBQ0QsQ0FBQztLQUNUOztBQUVELGFBQVMsVUFBVSxHQUFHO0FBQ2xCLGVBQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUN4QixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUUsRUFBRSx1QkFBdUIsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUNoRSxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLEVBQUUsRUFBRSw0QkFBNEIsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ3hFLGdCQUFJLEVBQUUsVUFBVTtBQUNoQixvQkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLGtCQUFNLEVBQUUsR0FBRztBQUNYLGlCQUFLLEVBQUUsR0FBRztBQUNWLGdCQUFJLEVBQUUsSUFBSTs7QUFFVixrQkFBTSxFQUFFLFNBQVM7QUFDakIsd0JBQVksRUFBRSxJQUFJO0FBQ2xCLGdDQUFvQixFQUFFLEtBQUs7QUFDM0Isa0NBQXNCLEVBQUUsSUFBSTtBQUM1QixzQkFBVSxFQUFFLElBQUk7QUFDaEIsOEJBQWtCLEVBQUUsS0FBSztBQUN6QixnQ0FBb0IsRUFBRSxJQUFJO1NBQzdCLENBQ0EsQ0FBQztLQUNUOzs7OztBQUtELGFBQVMsNkJBQTZCLENBQUMsUUFBUSxFQUFFO0FBQzdDLGVBQU8sVUFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTs7QUFFbEMsZUFBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGVBQWUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQzFDLGVBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxrQkFBa0IsR0FBRyxRQUFRLENBQUM7QUFDMUMsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLHVCQUF1QixFQUFFLENBQUM7U0FDOUMsQ0FBQztLQUNMOztBQUVELFFBQUksMEJBQTBCLEdBQUcsU0FBN0IsMEJBQTBCLENBQWEsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7QUFDNUQsV0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7QUFDbkMsV0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztBQUN0QyxXQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztLQUM5QyxDQUFDOztBQUVGLGFBQVMsd0JBQXdCLENBQUMsUUFBUSxFQUFFO0FBQ3hDLGVBQU8sVUFBVSxLQUFLLEVBQUUsVUFBVSxFQUFFO0FBQ2hDLGdDQUFvQixDQUFDLEtBQUssRUFBRSxVQUFVLEVBQUUsUUFBUSxDQUFDLENBQUM7U0FDckQsQ0FBQztLQUNMOztBQUVELFFBQUksaUJBQWlCLEdBQUcsU0FBcEIsaUJBQWlCLENBQWEsS0FBSyxFQUFFLE1BQU0sRUFBRTs7QUFFN0MsV0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGlCQUFpQixDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztLQUM3QyxDQUFDOzs7O0FBSUYsYUFBUyxlQUFlLEdBQUc7QUFDdkIsZUFBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRTtBQUNuQyxvQkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLGtCQUFNLEVBQUUsRUFBRTtBQUNWLGlCQUFLLEVBQUUsR0FBRztBQUNWLDBCQUFjLEVBQUUsNkJBQTZCLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQztBQUN2RCwwQkFBYyxFQUFFLDBCQUEwQjtBQUMxQyxxQkFBUyxFQUFFLHdCQUF3QixDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUM7QUFDN0MsaUJBQUssRUFBRSxpQkFBaUI7U0FDM0I7O0FBRUcsVUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFO0FBQ3RCLG9CQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDNUIsa0JBQU0sRUFBRSxFQUFFO0FBQ1YsaUJBQUssRUFBRSxHQUFHO0FBQ1Ysa0JBQU0sRUFBRSxTQUFTO0FBQ2pCLGtCQUFNLEVBQUUsSUFBSTtBQUNaLGdCQUFJLEVBQUUsYUFBYTtTQUN0QixDQUFDOztBQUVGLFVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFDakIsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUUsVUFBVSxHQUFHLEVBQUU7QUFDekMsbUJBQU8sdUNBQXVDLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQzdFLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUNYLG9CQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDNUIsa0JBQU0sRUFBRSxFQUFFO0FBQ1YsaUJBQUssRUFBRSxHQUFHO0FBQ1Ysa0JBQU0sRUFBRSxJQUFJO0FBQ1osZ0JBQUksRUFBRSxNQUFNO1NBQ2YsQ0FDQSxDQUNKLENBQUM7S0FDVDs7QUFFRCxhQUFTLGNBQWMsR0FBRztBQUN0QixlQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFO0FBQ25DLG9CQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDN0Isa0JBQU0sRUFBRSxFQUFFO0FBQ1YsaUJBQUssRUFBRSxHQUFHO0FBQ1YsMEJBQWMsRUFBRSw2QkFBNkIsQ0FBQyxJQUFJLENBQUM7QUFDbkQsMEJBQWMsRUFBRSwwQkFBMEI7QUFDMUMscUJBQVMsRUFBRSx3QkFBd0IsQ0FBQyxJQUFJLENBQUM7QUFDekMsaUJBQUssRUFBRSxpQkFBaUI7U0FDM0IsRUFDRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxXQUFXLEVBQUU7QUFDdEIsb0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM1QixrQkFBTSxFQUFFLEVBQUU7QUFDVixpQkFBSyxFQUFFLEdBQUc7QUFDVixrQkFBTSxFQUFFLFNBQVM7QUFDakIsa0JBQU0sRUFBRSxJQUFJO0FBQ1osZ0JBQUksRUFBRSxhQUFhO1NBQ3RCLENBQUMsQ0FDRCxDQUFDO0tBQ1Q7O0FBRUQsYUFBUyxlQUFlLEdBQUc7QUFDdkIsZUFBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRTtBQUNuQyxvQkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQzdCLGtCQUFNLEVBQUUsRUFBRTtBQUNWLGlCQUFLLEVBQUUsR0FBRztBQUNWLDBCQUFjLEVBQUUsNkJBQTZCLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQztBQUN4RCwwQkFBYyxFQUFFLDBCQUEwQjtBQUMxQyxxQkFBUyxFQUFFLHdCQUF3QixDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUM7QUFDOUMsaUJBQUssRUFBRSxpQkFBaUI7U0FDM0I7O0FBRUcsVUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFO0FBQ3RCLG9CQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDNUIsa0JBQU0sRUFBRSxFQUFFO0FBQ1YsaUJBQUssRUFBRSxHQUFHO0FBQ1Ysa0JBQU0sRUFBRSxTQUFTO0FBQ2pCLGtCQUFNLEVBQUUsSUFBSTtBQUNaLGdCQUFJLEVBQUUsYUFBYTtTQUN0QixDQUFDOztBQUVGLFVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFDakIsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUUsVUFBVSxHQUFHLEVBQUU7QUFDekMsbUJBQU8sdUNBQXVDLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQzlFLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUNYLG9CQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDN0Isa0JBQU0sRUFBRSxFQUFFO0FBQ1YsaUJBQUssRUFBRSxHQUFHO0FBQ1Ysa0JBQU0sRUFBRSxJQUFJO0FBQ1osZ0JBQUksRUFBRSxNQUFNO1NBQ2YsQ0FDQSxDQUNKLENBQUM7S0FDVDs7O0FBR0QsYUFBUyxzQkFBc0IsR0FBRztBQUM5QixlQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFO0FBQ3JDLHFCQUFTLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJO0FBQ3ZCLDBCQUFjLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLO0FBQzdCLG9CQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztBQUM5Qix1QkFBVyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO1NBQ3JDLEVBQ0csRUFBRSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUU7QUFDYixpQkFBSyxFQUFFLEVBQUU7QUFDVCxrQkFBTSxFQUFFLEVBQUU7QUFDVixxQkFBUyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSTtBQUN2QiwwQkFBYyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSzs7O0FBRzdCLGtCQUFNLEVBQUUsTUFBTTtBQUNkLGdCQUFJLEVBQUUsaUJBQWlCO0FBQ3ZCLHVCQUFXLEVBQUUsSUFBSTtBQUNqQixnQkFBSSxFQUFFLEVBQUUsQ0FBQyxTQUFTLENBQUMsZUFBZTtBQUNsQywwQkFBYyxFQUFFLDZCQUE2QixDQUFDLElBQUksQ0FBQztBQUNuRCwwQkFBYyxFQUFFLDBCQUEwQjtBQUMxQyxxQkFBUyxFQUFFLHdCQUF3QixDQUFDLElBQUksQ0FBQztBQUN6QyxpQkFBSyxFQUFFLGlCQUFpQjtBQUN4Qix3QkFBWSxFQUFFLHNCQUFVLEtBQUssRUFBRSxNQUFNLEVBQUU7QUFDbkMsb0JBQUksS0FBSyxDQUFDLE9BQU8sRUFBRTs7aUJBRWxCO2FBQ0o7U0FDSixFQUNHLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsVUFBVSxFQUFFLEVBQzNDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLFVBQVUsS0FBSyxFQUFFOztBQUUzQyxtQkFBTyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsMEJBQTBCLENBQUMsS0FBSyxDQUFDLElBQ3JELEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyw2QkFBNkIsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUM3RCxDQUFDLENBQUMsQ0FDTixDQUFDO0tBQ1Q7Ozs7O0FBS0QsYUFBUyxzQkFBc0IsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFO0FBQ2xELGVBQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQ2xCLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsVUFBVSxFQUFFLEVBQzNDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUNuRCxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUMzRSxnQkFBSSxFQUFFLGVBQWUsR0FBRyxTQUFTO0FBQ2pDLHFCQUFTLEVBQUUsU0FBUztBQUNwQixrQkFBTSxFQUFFLENBQUM7QUFDVCxnQkFBSSxFQUFFLGlCQUFpQjtBQUN2Qix1QkFBVyxFQUFFLElBQUk7QUFDakIsaUJBQUssRUFBRSxpQkFBaUI7U0FDM0IsQ0FDQSxDQUFDO0tBQ1Q7Ozs7QUFJRCxRQUFJLENBQUMsYUFBYSxHQUNsQixFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFDMUIsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsVUFBVSxVQUFVLEVBQUU7QUFDckQsZUFBTyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQ2pELENBQUMsRUFDRixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUN6QyxlQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQztLQUMzQixDQUFDLENBQUMsUUFBUSxFQUFFLEVBQ2IsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLG9CQUFvQixFQUFFLFdBQVcsQ0FBQzs7QUFFakQsUUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUUsVUFBVSxHQUFHLEVBQUU7QUFDekMsZUFBUSxHQUFHLENBQUMsVUFBVSxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxlQUFlLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBRTtLQUNyRSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7QUFDWCwwQkFBa0IsRUFBRSxXQUFXO0FBQy9CLG9CQUFZLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPO0FBQzdCLHdCQUFnQixFQUFFLEtBQUs7QUFDdkIsMEJBQWtCLEVBQUUsSUFBSTtBQUN4QixpQkFBUyxFQUFFLFlBQVk7O0FBRXZCLGtCQUFVLEVBQUUsb0JBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7QUFDdkMsZUFBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGNBQWMsR0FBRyxNQUFNLENBQUM7QUFDcEMsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLHVCQUF1QixFQUFFLENBQUM7U0FDOUM7O0FBRUQsa0JBQVUsRUFBRSxvQkFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtBQUN2QyxlQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztBQUNsQyxlQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztTQUM5Qzs7Ozs7S0FLSixFQUNELEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUM1QixzQkFBc0IsQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsaUJBQWlCLEVBQUUsT0FBTyxDQUFDLEVBQ25FLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFO0FBQzVCLFlBQUksRUFBRSxXQUFXO0tBQ3BCLEVBQ0csSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsRUFBRTs7QUFFakUsTUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFO0FBQ3RCLFlBQUksRUFBRSxVQUFVO0FBQ2hCLGdCQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDNUIsYUFBSyxFQUFFLEdBQUc7QUFDVixjQUFNLEVBQUUsR0FBRztBQUNYLFlBQUksRUFBRSxJQUFJLENBQUMsY0FBYztBQUN6QixjQUFNLEVBQUUsSUFBSTtBQUNaLGNBQU0sRUFBRSxNQUFNOztBQUVkLG9CQUFZLEVBQUUsc0JBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRTtBQUNuQyxnQkFBSSxLQUFLLENBQUMsT0FBTyxFQUFFOzthQUVsQjtTQUNKO0tBQ0osQ0FBQyxFQUNGLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUMxQixVQUFVLEVBQUUsRUFDWixlQUFlLEVBQUUsRUFDakIsY0FBYyxFQUFFLEVBQ2hCLGVBQWUsRUFBRTs7QUFFakIsV0FBTyxFQUFFLEVBQ1QsV0FBVyxFQUFFLEVBQ2IsT0FBTyxFQUFFLEVBQ1QsZ0JBQWdCLEVBQUUsRUFDbEIsT0FBTyxFQUFFLEVBQ1QsV0FBVyxFQUFFLEVBQ2IsT0FBTyxFQUFFLEVBQ1QsbUJBQW1CLEVBQUUsRUFDckIsVUFBVSxFQUFFLENBQ1gsQ0FDSixFQUNMLHNCQUFzQixDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxNQUFNLENBQUMsQ0FDbEUsRUFDTCxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRTtBQUNiLGFBQUssRUFBRSxFQUFFO0FBQ1QsY0FBTSxFQUFFLEVBQUU7QUFDVixpQkFBUyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSTtBQUN2QixzQkFBYyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSztBQUM3QixvQkFBWSxFQUFFLElBQUk7QUFDbEIsZ0JBQVEsRUFBRSxJQUFJOzs7QUFHZCxjQUFNLEVBQUUsTUFBTTtBQUNkLFlBQUksRUFBRSxpQkFBaUI7QUFDdkIsbUJBQVcsRUFBRSxJQUFJO0FBQ2pCLFlBQUksRUFBRSxFQUFFLENBQUMsU0FBUyxDQUFDLGVBQWU7QUFDbEMsc0JBQWMsRUFBRSw2QkFBNkIsQ0FBQyxJQUFJLENBQUM7QUFDbkQsc0JBQWMsRUFBRSwwQkFBMEI7QUFDMUMsaUJBQVMsRUFBRSx3QkFBd0IsQ0FBQyxJQUFJLENBQUM7QUFDekMsYUFBSyxFQUFFLGlCQUFpQjtBQUN4QixvQkFBWSxFQUFFLHNCQUFVLEtBQUssRUFBRSxNQUFNLEVBQUU7QUFDbkMsZ0JBQUksS0FBSyxDQUFDLE9BQU8sRUFBRTs7YUFFbEI7U0FDSjtLQUNKLEVBQ0csSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQyxVQUFVLEVBQUUsRUFDM0MsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUUsVUFBVSxLQUFLLEVBQUU7O0FBRTNDLGVBQU8sR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLDBCQUEwQixDQUFDLEtBQUssQ0FBQyxJQUNyRCxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsNkJBQTZCLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDN0QsQ0FBQyxDQUFDOztBQUVQLE1BQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFO0FBQ1QsWUFBSSxFQUFFLGFBQWE7QUFDbkIsWUFBSSxFQUFFLGFBQWE7QUFDbkIsY0FBTSxFQUFFLElBQUk7QUFDWixtQkFBVyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQ2pDLENBQUMsQ0FDRCxDQUFDOzs7O0FBSU4sUUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFBOztBQUVsRCxRQUFJLENBQUMsYUFBYSxHQUFHLFlBQVk7QUFDN0IsWUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztBQUNsQyxZQUFJLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzFCLFlBQUksT0FBTyxFQUFFO0FBQ1QsZ0JBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMzQyxnQkFBSSxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUU7QUFDM0IsbUJBQUcsR0FBRyxDQUFDLENBQUM7YUFDWDtBQUNELGdCQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUMzQjtBQUNELFlBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO0FBQzNCLGVBQU8sSUFBSSxDQUFDO0tBQ2YsQ0FBQTs7QUFFRCxRQUFJLENBQUMsWUFBWSxHQUNqQixFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRTtBQUNSLHdCQUFnQixFQUFFLEtBQUs7QUFDdkIsaUJBQVMsRUFBRSxFQUFFOztBQUViLHNCQUFjLEVBQUUsSUFBSTtBQUNwQixvQkFBWSxFQUFFLElBQUk7QUFDbEIsa0JBQVUsRUFBRSxHQUFHO0FBQ2YsaUJBQVMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU87QUFDMUIsa0JBQVUsRUFBRSxJQUFJO0FBQ2hCLGtCQUFVLEVBQUUsb0JBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7QUFDdkMsZUFBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGFBQWEsR0FBRyxNQUFNLENBQUM7QUFDbkMsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLHVCQUF1QixFQUFFLENBQUM7U0FDOUM7QUFDRCxrQkFBVSxFQUFFLG9CQUFVLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO0FBQ3ZDLGVBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDO0FBQ2pDLGVBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO1NBQzlDO0FBQ0Qsc0JBQWMsRUFBRSx3QkFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRTtBQUNqRCxlQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsYUFBYSxHQUFHLE1BQU0sQ0FBQztBQUNuQyxlQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztTQUM5QztBQUNELHNCQUFjLEVBQUUsd0JBQVUsS0FBSyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUU7QUFDckQsZUFBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7QUFDakMsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLHVCQUF1QixFQUFFLENBQUM7U0FDOUM7QUFDRCxpQkFBUyxFQUFFLG1CQUFVLEtBQUssRUFBRSxVQUFVLEVBQUU7QUFDcEMsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxTQUFTLENBQUM7QUFDdkMsZ0JBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQyxLQUFLLEVBQUUsWUFBWSxFQUFFLENBQUMsS0FBSyxFQUFFO0FBQ2hFLG1CQUFHLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLFVBQVUsQ0FBQyxDQUFDO2FBQ25EO1NBQ0o7QUFDRCxhQUFLLEVBQUUsZUFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFO0FBQzVCLGdCQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7QUFDakMsZUFBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGlDQUFpQyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ3hEO0FBQ0QsbUJBQVcsRUFBRSxxQkFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFO0FBQ2xDLGVBQUcsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDNUI7QUFDRCxvQkFBWSxFQUFFLHNCQUFVLEtBQUssRUFBRSxNQUFNLEVBQUU7QUFDbkMsZ0JBQUksS0FBSyxDQUFDLE9BQU8sRUFBRTs7YUFFbEI7U0FDSjtLQUNKLEVBQ0csSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUNyQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxFQUN4QyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFDUCxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUUsRUFBRSx1QkFBdUIsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUNoRSxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUMvRSxZQUFJLEVBQUUsV0FBVztLQUNwQixDQUNBOztBQUVMLE1BQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFO0FBQ1QsaUJBQVMsRUFBRSxVQUFVO0tBQ3hCLEVBQ0csSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsdUJBQXVCLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFDaEUsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLENBQUMsUUFBUSxFQUFFLEVBQzFFLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLFVBQVUsQ0FBQyxFQUFFO0FBQzNDLGVBQU8sQ0FBQyxJQUFJLE1BQU0sSUFBSSxDQUFDLElBQUksUUFBUSxDQUFDO0tBQ3ZDLENBQUMsQ0FDRCxFQUNMLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFO0FBQ1QsZUFBTyxFQUFFLFVBQVU7S0FDdEIsRUFDRyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUUsRUFBRSx1QkFBdUIsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUNoRSxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFDMUUsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsVUFBVSxDQUFDLEVBQUU7QUFDM0MsZUFBTyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxRQUFRLENBQUM7S0FDckMsQ0FBQyxDQUNELEVBRUwsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJO0FBQ3RCLFFBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLGVBQVEsUUFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUU7S0FDbEMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUNiLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUMxRSxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRTtBQUNULGNBQU0sRUFBRSxTQUFTO0FBQ2pCLFlBQUksRUFBRSxNQUFNO0FBQ1osY0FBTSxFQUFFLE1BQU07QUFDZCxhQUFLLEVBQUUsRUFBRTtBQUNULGNBQU0sRUFBRSxFQUFFO0tBQ2IsQ0FBQyxDQUNELENBQ0osQ0FBQzs7QUFFTixRQUFJLENBQUMsYUFBYSxHQUNsQixFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksRUFDTjtBQUNJLGFBQUssRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU07QUFDckIsaUJBQVMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU87QUFDMUIsa0JBQVUsRUFBRSxJQUFJO0tBQ25CLEVBQ0QsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUNyQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxFQUN4QyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUN6QyxlQUFRLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBRTtLQUN4QyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7QUFDWCx3QkFBZ0IsRUFBRSxLQUFLO0FBQ3ZCLGlCQUFTLEVBQUUsWUFBWTtBQUN2QixlQUFPLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQ3ZCLGFBQUssRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU07QUFDckIsaUJBQVMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU87QUFDMUIsa0JBQVUsRUFBRSxJQUFJO0FBQ2hCLG9CQUFZLEVBQUUsc0JBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRTtBQUNuQyxnQkFBSSxLQUFLLENBQUMsT0FBTyxFQUFFOzthQUVsQjtTQUNKO0tBQ0osRUFDRCxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFDUCxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUMvRSxZQUFJLEVBQUUsV0FBVztBQUNqQixjQUFNLEVBQUUsV0FBVztBQUNuQixZQUFJLEVBQUUsV0FBVztLQUNwQixDQUNBLEVBQ0wsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLOzs7O0FBSVAsUUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7QUFDeEUsZUFBTyxFQUFFLFFBQVE7QUFDakIsY0FBTSxFQUFFLFdBQVc7QUFDbkIsWUFBSSxFQUFFLFdBQVc7S0FDcEIsQ0FDQSxDQUNKLENBQUM7O0FBRU4sUUFBSSxDQUFDLGFBQWEsR0FDbEIsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUU7QUFDUixrQkFBVSxFQUFFLEtBQUs7S0FDcEIsRUFDRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRTtBQUNULFlBQUksRUFBRSxXQUFXO0FBQ2pCLGNBQU0sRUFBRSxJQUFJO0tBQ2YsQ0FBQyxDQUNELENBQUM7Ozs7O0FBS04sUUFBSSxDQUFDLHlCQUF5QixHQUFHLFVBQVUsSUFBSSxFQUFFO0FBQzdDLFlBQUksQ0FBQyxhQUFhLEdBQUcseUJBQXlCLEVBQUUsQ0FBQztBQUNqRCxZQUFJLENBQUMsaUJBQWlCLEdBQUcseUJBQXlCLEVBQUUsQ0FBQztBQUNyRCxZQUFJLENBQUMsZUFBZSxHQUFHLHlCQUF5QixFQUFFLENBQUM7S0FDdEQsQ0FBQzs7QUFFRixhQUFTLHlCQUF5QixHQUFHO0FBQ2pDLGVBQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUU7QUFDZixxQkFBUyxFQUFFLE1BQU07QUFDakIsaUJBQUssRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU07U0FDeEIsRUFDRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRTtBQUNULGdCQUFJLEVBQUUsV0FBVztBQUNqQix1QkFBVyxFQUFFLENBQUM7U0FDakIsQ0FBQyxDQUNELENBQUM7S0FDVDs7QUFFRCxhQUFTLHlCQUF5QixHQUFHO0FBQ2pDLGVBQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUU7QUFDaEIscUJBQVMsRUFBRSxNQUFNO1NBQ3BCLEVBQ0csRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFO0FBQ25CLGdCQUFJLEVBQUUsUUFBUTtBQUNkLHVCQUFXLEVBQUUsQ0FBQztBQUNkLGdCQUFJLEVBQUUsSUFBSTtTQUNiLENBQUMsQ0FDRCxDQUFDO0tBQ1Q7OztBQUdELFFBQUksQ0FBQyxrQkFBa0IsR0FBRyxVQUFVLElBQUksRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFOzs7O0FBSXJGLFlBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzNELFlBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDN0QsWUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRXpELFlBQUksSUFBSSxDQUFDLGdCQUFnQixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLElBQUksY0FBYyxFQUFFO0FBQ3ZFLHFCQUFTLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztBQUMxQixzQkFBVSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDM0Isb0JBQVEsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQ3pCLHNCQUFVLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztBQUN4QixvQkFBUSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7U0FDekIsTUFBTSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxJQUFJLGNBQWMsRUFBRTtBQUM5RSxxQkFBUyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDMUIsc0JBQVUsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQzNCLG9CQUFRLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztBQUN6QixzQkFBVSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7QUFDeEIsb0JBQVEsQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO1NBQ3pCO0FBQ0QsZ0JBQVEsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUN4RCxDQUFDOzs7QUFHRixRQUFJLENBQUMsWUFBWSxHQUFHLFVBQVUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFOztBQUU5RCxZQUFJLFFBQVEsQ0FBQyxNQUFNLElBQUksR0FBRyxFQUFFOztBQUV4QixnQkFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7O0FBRXpELGdCQUFJLE1BQU0sQ0FBQyxLQUFLLEVBQUU7QUFDZCx1QkFBTyxNQUFNLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDbEIsd0JBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7QUFDekIsd0JBQUksS0FBSyxDQUFDLFFBQVEsSUFBSSxRQUFRLElBQUksS0FBSyxDQUFDLE1BQU0sSUFBSSxNQUFNLEVBQUU7QUFDdEQsK0JBQU8sS0FBSyxDQUFDO3FCQUNoQjtpQkFDSjthQUNKO1NBQ0o7QUFDRCxlQUFPLElBQUksQ0FBQztLQUNmLENBQUM7Ozs7QUFLRixhQUFTLHVCQUF1QixDQUFDLFNBQVMsRUFBRTtBQUN4QyxlQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUNkLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsRUFBRSxFQUFFLFVBQVUsR0FBRyxFQUFFO0FBQzdDLGdCQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDO0FBQzlCLGdCQUFJLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUNyRCxtQkFBTyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ2xDLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUNYLHFCQUFTLEVBQUUsU0FBUztBQUNwQixrQkFBTSxFQUFFLFlBQVk7QUFDcEIsZ0JBQUksRUFBRSxvQkFBb0I7QUFDMUIsa0JBQU0sRUFBRSxJQUFJO1NBQ2YsQ0FDQSxDQUFDO0tBQ1Q7O0FBRUQsUUFBSSxDQUFDLGFBQWEsR0FDbEIsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJOztBQUVyQixRQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxFQUNoRixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUM3QyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUMvQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUN6QyxlQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxJQUNyQixHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUN0RCxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxZQUFZLElBQ2hDLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxDQUFDLG1CQUFtQixJQUN2QyxHQUFHLENBQUMsWUFBWSxFQUFFLENBQUMsaUJBQWlCLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7S0FDOUQsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsb0JBQVksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU87QUFDN0Isd0JBQWdCLEVBQUUsS0FBSztBQUN2QixpQkFBUyxFQUFFLElBQUk7QUFDZiwrQkFBdUIsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQzVDLEVBQUUsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDO0FBQ2xCLCtCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQ3hDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQ3BDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQ3pDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQ3RDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQzVDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQ3ZDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQzNDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQ3BDO0FBQ0wsZUFBTyxFQUFFLENBQUM7QUFDVixvQkFBWSxFQUFFLHNCQUFVLEtBQUssRUFBRSxNQUFNLEVBQUU7O1NBRXRDO0tBQ0osRUFFRCxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxXQUFXLEVBQUU7QUFDdEIsWUFBSSxFQUFFLGFBQWE7QUFDbkIsWUFBSSxFQUFFLHFCQUFxQjtBQUMzQixjQUFNLEVBQUUsSUFBSTtLQUNmLENBQUMsQ0FDRCxDQUFDOzs7Ozs7OztBQVFOLGFBQVMsa0JBQWtCLEdBQUc7QUFDMUIsZUFBTyxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRTtBQUM5QixxQkFBUyxFQUFFLFlBQVk7QUFDdkIsb0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM1QixpQkFBSyxFQUFFLENBQUM7QUFDUixtQkFBTyxFQUFFLENBQUM7QUFDVixvQkFBUSxFQUFFLEtBQUs7QUFDZixzQkFBVSxFQUFFLEtBQUs7U0FDcEIsRUFDRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxXQUFXLEVBQUU7QUFDdEIsZ0JBQUksRUFBRSxXQUFXO0FBQ2pCLGtCQUFNLEVBQUUsRUFBRTtBQUNWLGdCQUFJLEVBQUUsSUFBSTtBQUNWLGtCQUFNLEVBQUUsSUFBSTtTQUNmLENBQUMsRUFDRixFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRTtBQUNYLGtCQUFNLEVBQUUsd0NBQXdDO0FBQ2hELHFCQUFTLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPO0FBQzFCLDBCQUFjLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPO0FBQy9CLGlCQUFLLEVBQUUsR0FBRztBQUNWLGtCQUFNLEVBQUUsRUFBRTtTQUNiLENBQUMsRUFDRixFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRTtBQUNiLGdCQUFJLEVBQUUsNkJBQTZCO0FBQ25DLHFCQUFTLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFVO0FBQzdCLDBCQUFjLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFVO0FBQ2xDLGlCQUFLLEVBQUUsR0FBRztTQUNiLENBQUMsRUFDRixFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRTtBQUNiLGdCQUFJLEVBQUUsVUFBVTtBQUNoQixnQkFBSSxFQUFFLEVBQUU7QUFDUixxQkFBUyxFQUFFLE9BQU87QUFDbEIscUJBQVMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVE7QUFDM0IsMEJBQWMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVE7QUFDaEMsaUJBQUssRUFBRSxHQUFHO1NBQ2IsQ0FBQyxFQUNGLEVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFO0FBQ2IsZ0JBQUksRUFBRSxZQUFZO0FBQ2xCLGdCQUFJLEVBQUUsRUFBRTtBQUNSLHFCQUFTLEVBQUUsT0FBTztBQUNsQixxQkFBUyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVztBQUM5QiwwQkFBYyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVztBQUNuQyxpQkFBSyxFQUFFLEdBQUc7U0FDYixDQUFDLENBQ0QsQ0FBQztLQUNUOzs7QUFHRCxRQUFJLENBQUMsZUFBZSxHQUFHLFlBQVk7QUFDL0IsWUFBSSxDQUFDLGFBQWEsRUFBRTtBQUNoQix5QkFBYSxHQUFHLGtCQUFrQixFQUFFLENBQUM7QUFDckMsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQztTQUN2QztLQUNKLENBQUM7O0FBRUYsUUFBSSxDQUFDLGdCQUFnQixHQUFHLFlBQVk7QUFDaEMsWUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLGdCQUFnQixFQUFFLENBQUM7O0FBRWxDLFlBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDZixZQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM5RCxZQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7O0FBRWxDLHFCQUFhLENBQUMsUUFBUSxHQUFHLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDNUMscUJBQWEsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztBQUNoRCxxQkFBYSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLEdBQUcsYUFBYSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUM7QUFDNUUscUJBQWEsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxHQUFHLFVBQVUsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO0FBQzNFLHFCQUFhLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQztBQUMxQixxQkFBYSxDQUFDLGdCQUFnQixFQUFFLENBQUM7S0FDcEMsQ0FBQzs7QUFFRixRQUFJLENBQUMsZ0JBQWdCLEdBQUcsWUFBWTtBQUNoQyxxQkFBYSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUM7S0FDN0IsQ0FBQztDQUVMLENBQUM7Ozs7O0FDM3VDRixjQUFjLENBQUMsS0FBSyxHQUFHLFVBQVUsTUFBTSxFQUFFLEdBQUcsRUFBRTs7QUFFMUMsUUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDOztBQUVoQixRQUFJLENBQUMsbUJBQW1CLEdBQUcsU0FBUyxDQUFDO0FBQ3JDLFFBQUksQ0FBQyxrQkFBa0IsR0FBRyxRQUFRLENBQUM7QUFDbkMsUUFBSSxDQUFDLG1CQUFtQixHQUFHLFNBQVMsQ0FBQztBQUNyQyxRQUFJLENBQUMsa0JBQWtCLEdBQUcsUUFBUSxDQUFDOztBQUVuQyxRQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQzs7QUFFeEIsUUFBSSxDQUFDLElBQUksR0FBRyxZQUFZLEVBQ3ZCLENBQUM7O0FBRUYsUUFBSSxDQUFDLE9BQU8sR0FBRyxVQUFTLElBQUksRUFBRTtBQUMxQixjQUFNLENBQUMsU0FBUyxDQUFDLFlBQVc7QUFDeEIsZ0JBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUMvQixnQkFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7QUFDbkQsZ0JBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDO0FBQ3ZDLGdCQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztBQUN4QixtQkFBTyxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2hCLGdCQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2xCLGdCQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssU0FBUyxFQUFFO0FBQzFCLG9CQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQzthQUMxQyxNQUNJO0FBQ0Qsb0JBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN0QyxvQkFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTtBQUM3Qix3QkFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUM7aUJBQ3pDLE1BQ0k7QUFDRCx3QkFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUM7aUJBQ3pDO2FBQ0o7U0FDSixDQUFDLENBQUM7S0FDTixDQUFDOztBQUVGLFFBQUksQ0FBQyxtQkFBbUIsR0FBRyxVQUFTLElBQUksRUFBRSxPQUFPLEVBQUU7QUFDL0MsZUFBTztBQUNILGdCQUFJLEVBQUUsVUFBVSxHQUFHLElBQUk7QUFDdkIsZUFBRyxFQUFFLGFBQVMsT0FBTyxFQUFFO0FBQUUsb0JBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQzthQUFFO1NBQzdELENBQUM7S0FDTCxDQUFDOztBQUVGLFFBQUksQ0FBQyxnQkFBZ0IsR0FBRyxVQUFTLE9BQU8sRUFBRTtBQUN0QyxZQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDL0IsWUFBSSxTQUFTLEdBQUcsR0FBRyxDQUFDLFlBQVksRUFBRSxDQUFDO0FBQ25DLGlCQUFTLENBQUMsUUFBUSxHQUFHLFdBQVcsQ0FBQztBQUNqQyxpQkFBUyxDQUFDLFFBQVEsR0FBRyxXQUFXLENBQUM7QUFDakMsaUJBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7S0FDNUIsQ0FBQzs7QUFFRixRQUFJLENBQUMsS0FBSyxHQUFHOzs7Ozs7Ozs7QUFTVDtBQUNJLFlBQUksRUFBRSxXQUFXO0FBQ2pCLFdBQUcsRUFBRSxhQUFTLE9BQU8sRUFBRTtBQUNuQixtQkFBTyxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BFLGVBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztTQUNqQjtBQUNELGFBQUssRUFBRSxlQUFTLE9BQU8sRUFBRTtBQUNyQixtQkFBTyxPQUFPLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDO1NBQ2xEO0tBQ0osRUFDRDtBQUNJLFlBQUksRUFBRSxlQUFlO0FBQ3JCLFdBQUcsRUFBRSxhQUFTLE9BQU8sRUFBRTtBQUNuQixtQkFBTyxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BFLGdCQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNqRCxlQUFHLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQzNCO0FBQ0QsYUFBSyxFQUFFLGVBQVMsT0FBTyxFQUFFO0FBQ3JCLG1CQUFPLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUM7U0FDbEQ7S0FDSixFQUNEO0FBQ0ksWUFBSSxFQUFFLG9CQUFvQjtBQUMxQixXQUFHLEVBQUUsYUFBUyxPQUFPLEVBQUU7QUFDbkIsbUJBQU8sQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwRSxnQkFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDakQsZUFBRyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUM5QjtLQUNKLEVBQ0Q7QUFDSSxZQUFJLEVBQUUsY0FBYztBQUNwQixXQUFHLEVBQUUsYUFBUyxPQUFPLEVBQUU7QUFDbkIsbUJBQU8sQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwRSxnQkFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDakQsZUFBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUMxQjtLQUNKLEVBQ0Q7QUFDSSxZQUFJLEVBQUUsMENBQTBDO0FBQ2hELFdBQUcsRUFBRSxhQUFTLE9BQU8sRUFBRTtBQUNuQixtQkFBTyxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BFLGdCQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNqRCxlQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3ZCLGVBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdkIsZUFBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQzs7QUFFdkIsaUJBQUssQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3hCLGVBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyx1QkFBdUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUNuRDtBQUNELGFBQUssRUFBRSxlQUFTLE9BQU8sRUFBRTtBQUNyQixnQkFBSSxPQUFPLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxLQUFLLElBQUksQ0FBQyxFQUFFO0FBQ3pDLHVCQUFPLGdDQUFnQyxDQUFDO2FBQzNDO0FBQ0QsZ0JBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2pELGdCQUFJLEtBQUssQ0FBQyxXQUFXLENBQUMsS0FBSyxJQUFJLENBQUMsRUFBRTtBQUM5Qix1QkFBTywrQkFBK0IsQ0FBQzthQUMxQztBQUNELG1CQUFPLElBQUksQ0FBQztTQUNmO0tBQ0osRUFDRDtBQUNJLFlBQUksRUFBRSwwQkFBMEI7QUFDaEMsb0JBQVksRUFBRSwyREFBMkQ7QUFDekUsV0FBRyxFQUFFLGFBQVMsT0FBTyxFQUFFO0FBQ25CLGdCQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ25ELGdCQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDOUMsZ0JBQUksU0FBUyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0FBQ3RELGdCQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDOUMsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQy9ELGVBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNkLG1CQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDekIsaUJBQUssQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3hCLGlCQUFLLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztTQUMzQjtLQUNKLEVBQ0Q7QUFDSSxZQUFJLEVBQUUsMkJBQTJCO0FBQ2pDLG9CQUFZLEVBQUUsNkRBQTZEO0FBQzNFLFdBQUcsRUFBRSxhQUFTLE9BQU8sRUFBRTtBQUNuQixnQkFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQztBQUN2RCxnQkFBSSxRQUFRLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDcEQsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUMvQyxnQkFBSSxTQUFTLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsYUFBYSxDQUFDLENBQUM7QUFDdEQsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUMvQyxnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLHFCQUFxQixDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDL0QsZUFBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ2QsbUJBQU8sQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUN6QixpQkFBSyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7QUFDeEIsaUJBQUssQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1NBQzNCO0tBQ0osRUFDRDtBQUNJLFlBQUksRUFBRSwrQ0FBK0M7QUFDckQsb0JBQVksRUFBRSwrQ0FBK0M7QUFDN0QsV0FBRyxFQUFFLGFBQVMsT0FBTyxFQUFFO0FBQ25CLGdCQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ25ELGdCQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQztBQUM3QyxnQkFBSSxTQUFTLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsYUFBYSxDQUFDLENBQUM7QUFDdEQsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzdDLGdCQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMscUJBQXFCLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQztBQUMvRCxpQkFBSyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7QUFDeEIsZUFBRyxDQUFDLEtBQUssRUFBRSxDQUFDLHVCQUF1QixDQUFDLFVBQVUsQ0FBQyxDQUFDOzs7QUFHaEQsbUJBQU8sQ0FBQyxjQUFjLEVBQUUsQ0FBQztTQUM1QjtLQUNKOzs7OztBQUtEO0FBQ0ksWUFBSSxFQUFFLG9CQUFvQjtBQUMxQixvQkFBWSxFQUFFLDBDQUEwQztBQUN4RCxXQUFHLEVBQUUsYUFBUyxPQUFPLEVBQUU7QUFDbkIsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDbkQsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzdDLGdCQUFJLFNBQVMsR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxhQUFhLENBQUMsQ0FBQztBQUN0RCxnQkFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDN0MsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQy9ELGVBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNkLG1CQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDekIsaUJBQUssQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3hCLGlCQUFLLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztTQUMzQjtLQUNKLEVBQ0Q7QUFDSSxZQUFJLEVBQUUsNkJBQTZCO0FBQ25DLG9CQUFZLEVBQUUsMENBQTBDO0FBQ3hELFdBQUcsRUFBRSxhQUFTLE9BQU8sRUFBRTtBQUNuQixnQkFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQztBQUN2RCxnQkFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUN0RCxnQkFBSSxTQUFTLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsYUFBYSxDQUFDLENBQUM7QUFDdEQsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDdkQsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQy9ELGVBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNkLG1CQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDekIsaUJBQUssQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3hCLGlCQUFLLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztTQUMzQjtLQUNKLEVBQ0Q7QUFDSSxZQUFJLEVBQUUsOEJBQThCO0FBQ3BDLG9CQUFZLEVBQUUsb0RBQW9EO0FBQ2xFLFdBQUcsRUFBRSxhQUFTLE9BQU8sRUFBRTtBQUNuQixnQkFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztBQUNuRCxnQkFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDN0MsZ0JBQUksU0FBUyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0FBQ3RELGdCQUFJLFNBQVMsR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxhQUFhLENBQUMsQ0FBQztBQUN0RCxnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLHFCQUFxQixDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDdkUsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzdDLGVBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNkLG1CQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDekIscUJBQVMsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQzVCLHFCQUFTLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztTQUMvQjtLQUNKLEVBQ0Q7QUFDSSxZQUFJLEVBQUUsdUNBQXVDO0FBQzdDLG9CQUFZLEVBQUUsb0RBQW9EO0FBQ2xFLFdBQUcsRUFBRSxhQUFTLE9BQU8sRUFBRTtBQUNuQixnQkFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQztBQUN2RCxnQkFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNyRCxnQkFBSSxTQUFTLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsYUFBYSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUMvRCxnQkFBSSxTQUFTLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsYUFBYSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUMvRCxnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLHFCQUFxQixDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDdkUsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDckQsZUFBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ2QsbUJBQU8sQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUN6QixxQkFBUyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7QUFDNUIscUJBQVMsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1NBQy9CO0tBQ0osRUFDRDtBQUNJLFlBQUksRUFBRSxVQUFVO0FBQ2hCLG9CQUFZLEVBQUUsK0NBQStDO0FBQzdELFdBQUcsRUFBRSxhQUFTLE9BQU8sRUFBRTtBQUNuQixnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN2RCxnQkFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDbEQsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztBQUNoRCxnQkFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7O0FBRWxELGdCQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMscUJBQXFCLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxZQUFZLENBQUMsQ0FBQztBQUN0RSxnQkFBSSxRQUFRLEdBQUcsR0FBRyxDQUFDLHFCQUFxQixDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsa0JBQWtCLENBQUMsQ0FBQzs7O0FBRy9FLG1CQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDekIsb0JBQVEsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQzNCLGVBQUcsQ0FBQyw2QkFBNkIsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUM5QztLQUNKLEVBQ0Q7QUFDSSxZQUFJLEVBQUUseUNBQXlDO0FBQy9DLG9CQUFZLEVBQUUseUVBQXlFO0FBQ3ZGLFdBQUcsRUFBRSxhQUFTLE9BQU8sRUFBRTtBQUNuQixnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN2RCxnQkFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7U0FDckQ7S0FDSixFQUNEO0FBQ0ksWUFBSSxFQUFFLDJDQUEyQztBQUNqRCxvQkFBWSxFQUFFLHlEQUF5RDtBQUN2RSxXQUFHLEVBQUUsYUFBUyxPQUFPLEVBQUU7QUFDbkIsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDeEQsZ0JBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQzlDLGdCQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1NBQzdEO0tBQ0osRUFDRDtBQUNJLFlBQUksRUFBRSwwQ0FBMEM7QUFDaEQsb0JBQVksRUFBRSxpRUFBaUU7QUFDL0UsV0FBRyxFQUFFLGFBQVMsT0FBTyxFQUFFO0FBQ25CLGdCQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQ3hELGdCQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztBQUM5QyxnQkFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztBQUNqRCxnQkFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztBQUNuRCxnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLHFCQUFxQixDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDNUQsZUFBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ2QsbUJBQU8sQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUN6QixlQUFHLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUN0QixnQkFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7U0FDMUI7S0FDSixFQUNEO0FBQ0ksWUFBSSxFQUFFLDBDQUEwQztBQUNoRCxvQkFBWSxFQUFFLG1FQUFtRTtBQUNqRixXQUFHLEVBQUUsYUFBUyxPQUFPLEVBQUU7QUFDbkIsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQztBQUMzRCxnQkFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDN0MsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDdkQsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDdkQsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDekQsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7O0FBRXpELGdCQUFJLFdBQVcsR0FBRyxHQUFHLENBQUMscUJBQXFCLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxjQUFjLENBQUMsQ0FBQztBQUM1RSxnQkFBSSxXQUFXLEdBQUcsR0FBRyxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsY0FBYyxDQUFDLENBQUM7QUFDNUUsZ0JBQUksV0FBVyxHQUFHLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQzVFLGdCQUFJLFdBQVcsR0FBRyxHQUFHLENBQUMscUJBQXFCLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxjQUFjLENBQUMsQ0FBQztBQUM1RSxlQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDZCxtQkFBTyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3pCLGtCQUFNLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUN6QixrQkFBTSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7QUFDekIsa0JBQU0sQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3pCLGtCQUFNLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztTQUM1QjtLQUNKLEVBQ0Q7QUFDSSxZQUFJLEVBQUUsNENBQTRDO0FBQ2xELG9CQUFZLEVBQUUsbUVBQW1FO0FBQ2pGLFdBQUcsRUFBRSxhQUFTLE9BQU8sRUFBRTtBQUNuQixnQkFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQzNELGdCQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztBQUM3QyxnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUN2RCxnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUN4RCxnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUN2RCxnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQzs7QUFFeEQsZ0JBQUksV0FBVyxHQUFHLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQzVFLGdCQUFJLFdBQVcsR0FBRyxHQUFHLENBQUMscUJBQXFCLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxjQUFjLENBQUMsQ0FBQztBQUM1RSxnQkFBSSxXQUFXLEdBQUcsR0FBRyxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsY0FBYyxDQUFDLENBQUM7QUFDNUUsZ0JBQUksV0FBVyxHQUFHLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQzVFLGVBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNkLG1CQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDekIsa0JBQU0sQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3pCLGtCQUFNLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUN6QixrQkFBTSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7QUFDekIsa0JBQU0sQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1NBQzVCO0tBQ0osRUFDRDtBQUNJLFlBQUksRUFBRSxvQ0FBb0M7QUFDMUMsb0JBQVksRUFBRSxrRUFBa0U7QUFDaEYsV0FBRyxFQUFFLGFBQVMsT0FBTyxFQUFFO0FBQ25CLGdCQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ25ELGdCQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQztBQUM3QyxnQkFBSSxTQUFTLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsYUFBYSxDQUFDLENBQUM7QUFDdEQsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzdDLGVBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNkLG1CQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7U0FDNUI7S0FDSixFQUNEO0FBQ0ksWUFBSSxFQUFFLDJDQUEyQztBQUNqRCxvQkFBWSxFQUFFLHdEQUF3RDtBQUN0RSxXQUFHLEVBQUUsYUFBUyxPQUFPLEVBQUU7QUFDbkIsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDbkQsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzdDLGdCQUFJLFNBQVMsR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxhQUFhLENBQUMsQ0FBQztBQUN0RCxnQkFBSSxTQUFTLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsYUFBYSxDQUFDLENBQUM7QUFDdEQsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQ3ZFLGtCQUFNLENBQUMsV0FBVyxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUMsRUFBRSxDQUFDLENBQUM7QUFDeEMsZUFBRyxDQUFDLE9BQU8sRUFBRSxDQUFDOzs7QUFHZCxtQkFBTyxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQzVCO0tBQ0osRUFDRDtBQUNJLFlBQUksRUFBRSxnREFBZ0Q7QUFDdEQsb0JBQVksRUFBRSw4QkFBOEI7QUFDNUMsV0FBRyxFQUFFLGFBQVMsT0FBTyxFQUFFOztBQUVmLGdCQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3BELGdCQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3BELGdCQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMscUJBQXFCLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQztBQUMvRCxlQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7Ozs7U0FJckI7S0FDSjs7Ozs7Ozs7Ozs7Ozs7O0FBZUQ7QUFDSSxZQUFJLEVBQUUsdUJBQXVCO0FBQzdCLG9CQUFZLEVBQUUsZ0lBQWdJO0FBQzlJLFdBQUcsRUFBRSxhQUFTLE9BQU8sRUFBRTtBQUNuQixnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQzVELGdCQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1NBQzlEO0tBQ0osRUFDRDtBQUNJLFlBQUksRUFBRSx1QkFBdUI7QUFDN0Isb0JBQVksRUFBRSwrSEFBK0g7QUFDN0ksV0FBRyxFQUFFLGFBQVMsT0FBTyxFQUFFO0FBQ25CLGdCQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDNUQsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7U0FDOUQ7S0FDSixFQUNEO0FBQ0ksWUFBSSxFQUFFLDRCQUE0QjtBQUNsQyxvQkFBWSxFQUFFLGdHQUFnRztBQUM5RyxXQUFHLEVBQUUsYUFBUyxPQUFPLEVBQUU7QUFDbkIsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUM1RCxnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUMzRCxnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUM3RCxnQkFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7U0FDL0M7S0FDSixFQUNEO0FBQ0ksWUFBSSxFQUFFLDBCQUEwQjtBQUNoQyxvQkFBWSxFQUFFLDhGQUE4RjtBQUM1RyxXQUFHLEVBQUUsYUFBUyxPQUFPLEVBQUU7QUFDbkIsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUM1RCxnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUMzRCxnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUM3RCxnQkFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7U0FDL0M7S0FDSixFQUNEO0FBQ0ksWUFBSSxFQUFFLDRDQUE0QztBQUNsRCxvQkFBWSxFQUFFLHFEQUFxRDtBQUNuRSxXQUFHLEVBQUUsYUFBUyxPQUFPLEVBQUU7QUFDbkIsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDdkQsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzdDLGdCQUFJLFNBQVMsR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxhQUFhLENBQUMsQ0FBQztBQUN0RCxlQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDZCxtQkFBTyxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQzVCO0tBQ0o7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQXdDSixDQUFDO0NBRUwsQ0FBQzs7Ozs7QUMzZEYsY0FBYyxDQUFDLEVBQUUsR0FBRyxVQUFTLE1BQU0sRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRTs7QUFFaEYsUUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDOzs7O0FBSWhCLFFBQUksQ0FBQyxnQkFBZ0IsR0FBRyxlQUFlLENBQUM7QUFDeEMsUUFBSSxDQUFDLG9CQUFvQixHQUFHLG1CQUFtQixDQUFDO0FBQ2hELFFBQUksQ0FBQyxzQkFBc0IsR0FBRyxxQkFBcUIsQ0FBQztBQUNwRCxRQUFJLENBQUMsbUJBQW1CLEdBQUcsa0JBQWtCLENBQUM7QUFDOUMsUUFBSSxDQUFDLG1CQUFtQixHQUFHLGtCQUFrQixDQUFDO0FBQzlDLFFBQUksQ0FBQyxrQkFBa0IsR0FBRyxpQkFBaUIsQ0FBQztBQUM1QyxRQUFJLENBQUMsZ0JBQWdCLEdBQUcsZUFBZSxDQUFDO0FBQ3hDLFFBQUksQ0FBQyxnQkFBZ0IsR0FBRyxlQUFlLENBQUM7O0FBRXhDLFFBQUksQ0FBQyxJQUFJLEdBQUcsWUFBVyxFQUFFLENBQUM7Ozs7QUFJMUIsUUFBSSxnQkFBZ0IsR0FBRyxFQUFFLENBQUM7O0FBRTFCLFFBQUksb0JBQW9CLEdBQUc7O0FBRXZCLG9DQUE0QixFQUFFLFVBQVU7O0FBRXhDLDBCQUFrQixFQUFFLE1BQU07O0FBRTFCLHVCQUFlLEVBQUUsT0FBTztLQUMzQixDQUFDOzs7QUFHRixRQUFJLENBQUMsbUJBQW1CLEdBQUcsVUFBUyxPQUFPLEVBQUU7QUFDekMsd0JBQWdCLEdBQUcsT0FBTyxDQUFDO0tBQzlCLENBQUM7OztBQUdGLFFBQUksQ0FBQyxtQkFBbUIsR0FBRyxZQUFXO0FBQ2xDLFlBQUksY0FBYyxHQUFJLE1BQU0sQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxhQUFhLEdBQUcsSUFBSSxBQUFDLENBQUM7QUFDcEYsWUFBSSxJQUFJLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxjQUFjLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztBQUNwRSx3QkFBZ0IsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFTLEdBQUcsRUFBRTtBQUMxQyxtQkFBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDMUIsQ0FBQyxDQUFDO0FBQ0gsZUFBTyxnQkFBZ0IsQ0FBQztLQUMzQixDQUFDOzs7QUFHRixhQUFTLHFCQUFxQixDQUFDLE9BQU8sRUFBRTtBQUNwQyxZQUFJLElBQUksR0FBRztBQUNQLGdCQUFJLEVBQUU7QUFDRiw4QkFBYyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDO2FBQzFDO1NBQ0osQ0FBQzs7QUFFRixvQkFBWSxFQUFFLENBQUM7QUFDZixhQUFLLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQ3JELFVBQVMsUUFBUSxFQUFFO0FBQ2YsdUJBQVcsRUFBRSxDQUFDO1NBQ2pCLEVBQ0QsWUFBVztBQUNQLHVCQUFXLEVBQUUsQ0FBQztBQUNkLGtCQUFNLENBQUMsaUJBQWlCLEdBQUcsK0JBQStCLENBQUM7U0FDOUQsQ0FDSixDQUFDO0tBQ0w7Ozs7QUFJRCxVQUFNLENBQUMsYUFBYSxHQUFHLElBQUkscUJBQXFCLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDOztBQUV6RixRQUFJLENBQUMsV0FBVyxHQUFHLFlBQVc7QUFDMUIsY0FBTSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQzFCLGdCQUFnQixFQUNoQixVQUFTLE9BQU8sRUFBRTs7QUFDZCxpQ0FBcUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUNsQyxFQUNELFVBQVMsT0FBTyxFQUFFOztBQUNkLDRCQUFnQixHQUFHLE9BQU8sQ0FBQztBQUMzQixlQUFHLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQzdDLENBQ0osQ0FBQztLQUNMLENBQUM7Ozs7QUFLRixRQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQzs7QUFFaEIsUUFBSSxZQUFZLEdBQUc7QUFDZixxQkFBYSxFQUFFLEtBQUs7QUFDcEIsa0JBQVUsRUFBRSxJQUFJO0FBQ2hCLDJCQUFtQixFQUFFLElBQUk7QUFDekIsMkJBQW1CLEVBQUUsSUFBSTtLQUM1QixDQUFDOztBQUVGLFFBQUksQ0FBQyxZQUFZLEdBQUcsVUFBUyxJQUFJLEVBQUU7QUFDL0IsY0FBTSxDQUFDLFNBQVMsQ0FBQyxZQUFXO0FBQ3hCLGdCQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxZQUFZLENBQUM7O1NBRXJDLENBQUMsQ0FBQztLQUNOLENBQUM7Ozs7QUFJRixRQUFJLENBQUMsWUFBWSxHQUFHLFlBQVc7QUFDM0IsZUFBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0tBQ3JCLENBQUM7Ozs7QUFJRixRQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQzs7QUFFN0IsUUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7QUFDM0IsUUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7O0FBRTFCLFFBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO0FBQzVCLFFBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7O0FBRS9CLFFBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDOzs7Ozs7O0FBT3BCLFFBQUksQ0FBQyxpQkFBaUIsR0FBRyxVQUFTLFFBQVEsRUFBRSxRQUFRLEVBQUU7O0FBRWxELFlBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQztLQUNwQyxDQUFDOztBQUVGLFFBQUksQ0FBQyxZQUFZLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDaEMsZUFBTyxNQUFNLENBQUMsVUFBVSxJQUFJLEtBQUssQ0FBQztLQUNyQyxDQUFDOztBQUVGLFFBQUksQ0FBQyxPQUFPLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDM0IsY0FBTSxDQUFDLFNBQVMsQ0FBQyxZQUFXO0FBQ3hCLGtCQUFNLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztTQUM3QixDQUFDLENBQUM7S0FDTixDQUFDOztBQUVGLFFBQUksQ0FBQyxRQUFRLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDNUIsY0FBTSxDQUFDLFNBQVMsQ0FBQyxZQUFXO0FBQ3hCLGdCQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7QUFDN0Isa0JBQU0sQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1NBQzVCLENBQUMsQ0FBQztLQUNOLENBQUM7O0FBRUYsUUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFTLEtBQUssRUFBRTs7QUFFOUIsWUFBSSxNQUFNLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxtQkFBbUIsSUFBSSxNQUFNLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxtQkFBbUIsRUFBRTtBQUNoRyxtQkFBTyxJQUFJLENBQUM7U0FDZjtBQUNELGVBQU8sS0FBSyxDQUFDO0tBQ2hCLENBQUM7O0FBRUYsUUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFTLEtBQUssRUFBRTtBQUM3QixjQUFNLENBQUMsU0FBUyxDQUFDLFlBQVc7QUFDeEIsZ0JBQUksTUFBTSxDQUFDLFVBQVUsSUFBSSxLQUFLLEVBQUU7QUFDNUIsc0JBQU0sQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO2FBQzVCLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDaEMsc0JBQU0sQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO2FBQzdCO1NBQ0osQ0FBQyxDQUFDO0tBQ04sQ0FBQzs7QUFFRixRQUFJLENBQUMsZUFBZSxHQUFHLFlBQVc7QUFDOUIsY0FBTSxDQUFDLFNBQVMsQ0FBQyxZQUFXO0FBQ3hCLGdCQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDO1NBQ3hELENBQUMsQ0FBQztLQUNOLENBQUM7O0FBRUYsUUFBSSxDQUFDLHFCQUFxQixHQUFHLFlBQVc7QUFDcEMsY0FBTSxDQUFDLFNBQVMsQ0FBQyxZQUFXO0FBQ3hCLGdCQUFJLENBQUMsZUFBZSxHQUFHLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQztTQUNoRCxDQUFDLENBQUM7S0FDTixDQUFDOzs7O0FBS0YsUUFBSSxDQUFDLFNBQVMsR0FBRyxZQUFXO0FBQ3hCLGVBQU8sR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7S0FDdEMsQ0FBQzs7QUFFRixRQUFJLENBQUMsVUFBVSxHQUFHLFlBQVc7QUFDekIsZUFBTyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztLQUN4QyxDQUFDOztBQUVGLFFBQUksQ0FBQyxNQUFNLEdBQUcsWUFBVztBQUNyQixZQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDL0IsWUFBSSxPQUFPLENBQUMsS0FBSyxHQUFHLEVBQUUsRUFBRTtBQUNwQixnQkFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUN2QyxtQkFBTyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztBQUNsQyxtQkFBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUMxQjtLQUNKLENBQUM7O0FBRUYsUUFBSSxDQUFDLE9BQU8sR0FBRyxZQUFXO0FBQ3RCLFlBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUMvQixZQUFJLE9BQU8sQ0FBQyxLQUFLLEdBQUcsSUFBSSxFQUFFO0FBQ3RCLGdCQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3ZDLG1CQUFPLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0FBQ2xDLG1CQUFPLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQzFCO0tBQ0osQ0FBQzs7QUFFRixRQUFJLENBQUMsaUJBQWlCLEdBQUcsWUFBVztBQUNoQyxZQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7O0FBRS9CLFlBQUksSUFBSSxDQUFDLGVBQWUsRUFBRTtBQUN0QixnQkFBSSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUM7O0FBRTdCLGdCQUFJLElBQUksR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3pELG1CQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzVCO0FBQ0QsY0FBTSxDQUFDLFNBQVMsRUFBRSxDQUFDO0tBQ3RCLENBQUM7O0FBRUYsUUFBSSxDQUFDLFNBQVMsR0FBRyxZQUFXO0FBQ3hCLFlBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQzs7QUFFL0IsWUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDOztBQUVoRCxZQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7QUFDWixnQkFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ2pEO0FBQ0QsZUFBTyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6QixlQUFPLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDdEQsWUFBSSxPQUFPLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRTtBQUNuQixtQkFBTyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7U0FDckI7S0FDSixDQUFDOzs7O0FBSUYsUUFBSSxDQUFDLGdDQUFnQyxHQUFHLFlBQVc7QUFDL0MsWUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7QUFDeEMsWUFBSSxFQUFFLEVBQUU7QUFDSixtQkFBTyxFQUFFLENBQUM7U0FDYixNQUFNO0FBQ0gsbUJBQU8sZ0JBQWdCLENBQUMsa0JBQWtCLENBQUM7U0FDOUM7S0FDSixDQUFDOzs7QUFHRixRQUFJLENBQUMsdUJBQXVCLEdBQUcsWUFBVztBQUN0QyxZQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDL0IsWUFBSSxPQUFPLEtBQUssSUFBSSxJQUFJLE9BQU8sQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsRUFDL0MsT0FBTyxJQUFJLENBQUM7O0FBRWhCLFlBQUksTUFBTSxHQUFHLElBQUksQ0FBQztBQUNsQixZQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQztBQUNwQyxlQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLGdCQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssWUFBWSxFQUFFLENBQUMsS0FBSyxFQUM3QixPQUFPLElBQUksQ0FBQztBQUNoQixnQkFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQzs7QUFFckIsZ0JBQUksV0FBVyxHQUFJLEtBQUssQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxBQUFDLENBQUM7QUFDMUQsZ0JBQUksTUFBTSxLQUFLLElBQUksSUFBSSxXQUFXLElBQUksTUFBTSxFQUN4QyxPQUFPLElBQUksQ0FBQztBQUNoQixrQkFBTSxHQUFHLFdBQVcsQ0FBQztTQUN4Qjs7O0FBR0QsZUFBTyxNQUFNLENBQUM7S0FDakIsQ0FBQzs7O0FBR0YsUUFBSSxDQUFDLHVCQUF1QixHQUFHLFVBQVMsVUFBVSxFQUFFO0FBQ2hELFlBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUMvQixZQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQztBQUNwQyxlQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLGdCQUFJLEVBQUUsQ0FBQyxLQUFLLFlBQVksRUFBRSxDQUFDLEtBQUssRUFBRTtBQUM5QixvQkFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUNyQix1QkFBTyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDaEUsbUJBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNoRSxtQkFBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO2FBQ2pCO1NBQ0o7S0FDSixDQUFDOzs7O0FBSUYsUUFBSSxDQUFDLDBDQUEwQyxHQUFHLFlBQVc7QUFDekQsWUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLGlDQUFpQyxFQUFFLENBQUM7QUFDbEQsWUFBSSxFQUFFLEVBQUU7QUFDSixtQkFBTyxFQUFFLENBQUM7U0FDYixNQUFNO0FBQ0gsbUJBQU8sZ0JBQWdCLENBQUMsNEJBQTRCLENBQUM7U0FDeEQ7S0FDSixDQUFDOzs7QUFHRixRQUFJLENBQUMsaUNBQWlDLEdBQUcsWUFBVztBQUNoRCxZQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDL0IsWUFBSSxPQUFPLEtBQUssSUFBSSxJQUFJLE9BQU8sQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsRUFDL0MsT0FBTyxJQUFJLENBQUM7O0FBRWhCLFlBQUksSUFBSSxHQUFHLElBQUksQ0FBQztBQUNoQixZQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQztBQUNwQyxlQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLGdCQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssWUFBWSxFQUFFLENBQUMsSUFBSSxFQUM1QixPQUFPLElBQUksQ0FBQztBQUNoQixnQkFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUNwQixnQkFBSSxRQUFRLEdBQUksSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLEFBQUMsQ0FBQztBQUNuRCxnQkFBSSxJQUFJLEtBQUssSUFBSSxJQUFJLFFBQVEsSUFBSSxJQUFJLEVBQ2pDLE9BQU8sSUFBSSxDQUFDO0FBQ2hCLGdCQUFJLEdBQUcsUUFBUSxDQUFDO1NBQ25COztBQUVELGVBQU8sSUFBSSxDQUFDO0tBQ2YsQ0FBQzs7O0FBR0YsUUFBSSxDQUFDLGlDQUFpQyxHQUFHLFVBQVMsU0FBUyxFQUFFO0FBQ3pELFlBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQzs7QUFFL0IsWUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUM7QUFDcEMsZUFBTyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDZCxnQkFBSSxFQUFFLENBQUMsS0FBSyxZQUFZLEVBQUUsQ0FBQyxJQUFJLEVBQUU7O0FBRTdCLHVCQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7O2FBRW5FO1NBQ0o7O0tBRUosQ0FBQzs7OztBQUlGLFFBQUksY0FBYyxHQUFHLElBQUksQ0FBQztBQUMxQixRQUFJLGVBQWUsR0FBRyxJQUFJLENBQUM7QUFDM0IsUUFBSSxjQUFjLEdBQUcsR0FBRyxDQUFDOztBQUV6QixRQUFJLENBQUMsaUJBQWlCLEdBQUcsVUFBUyxNQUFNLEVBQUUsS0FBSyxFQUFFOzs7QUFHN0MsdUJBQWUsR0FBRyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7O0FBRS9DLFlBQUksY0FBYyxJQUFJLE1BQU0sRUFBRTtBQUMxQiwyQkFBZSxHQUFHLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQzs7QUFFL0MsbUJBQU87U0FDVjs7QUFFRCxzQkFBYyxHQUFHLE1BQU0sQ0FBQzs7O0FBR3hCLFlBQUksS0FBSyxHQUFHLFVBQVUsQ0FBQyxZQUFXOztBQUU5QixnQkFBSSxlQUFlLElBQUksSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUN2QywrQkFBZSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQzthQUNsQyxNQUFNO0FBQ0gsK0JBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUMxQjs7QUFFRCwyQkFBZSxHQUFHLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztBQUMvQywwQkFBYyxHQUFHLElBQUksQ0FBQztTQUN6QixFQUFFLGNBQWMsQ0FBQyxDQUFDO0tBQ3RCLENBQUM7O0FBRUYsYUFBUyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3ZDLFlBQUksTUFBTSxJQUFJLEdBQUcsRUFBRTtBQUNmLG1CQUFRLE1BQU0sSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLENBQUMsWUFBWSxDQUFFO1NBQ2hFLE1BQU0sSUFBSSxNQUFNLElBQUksR0FBRyxFQUFFO0FBQ3RCLG1CQUFRLE1BQU0sSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLGdCQUFnQixHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUU7U0FDakUsTUFBTSxJQUFJLE1BQU0sSUFBSSxHQUFHLEVBQUU7QUFDdEIsbUJBQVEsTUFBTSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsYUFBYSxHQUFHLEdBQUcsQ0FBQyxlQUFlLENBQUU7U0FDbkUsTUFBTSxJQUFJLE1BQU0sSUFBSSxHQUFHLEVBQUU7QUFDdEIsbUJBQVEsTUFBTSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsZ0JBQWdCLEdBQUcsR0FBRyxDQUFDLGVBQWUsRUFBRSxDQUFDLGVBQWUsQ0FBRTtTQUN2RixNQUFNLElBQUksTUFBTSxLQUFLLEVBQUUsRUFBRTs7QUFDdEIsbUJBQVEsTUFBTSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsYUFBYSxHQUFHLFFBQVEsQ0FBRTtTQUN4RCxNQUFNO0FBQ0gsbUJBQU8sWUFBVzs7YUFFakIsQ0FBQztTQUNMO0tBQ0o7OztBQUdELGFBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUU7QUFDN0IsWUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUU7QUFDakIsbUJBQU8sSUFBSSxDQUFDO1NBQ2Y7OztBQUdELFlBQUksS0FBSyxZQUFZLEVBQUUsQ0FBQyxLQUFLLEVBQUU7O0FBQzNCLGdCQUFJLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDOztBQUV0QixnQkFBSSxJQUFJLFlBQVksRUFBRSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLE1BQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQUEsQUFBQyxFQUFFO0FBQ3RHLG9CQUFJLGFBQWEsR0FBRyxlQUFlLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7QUFDdkQsb0JBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ2hELG9CQUFJLElBQUksRUFBRTtBQUNOLHlCQUFLLEdBQUcsSUFBSSxDQUFDO2lCQUNoQjthQUNKO1NBQ0o7QUFDRCxXQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUN4RDs7Ozs7QUFNRCxRQUFJLENBQUMsYUFBYSxHQUFHLFVBQVMsS0FBSyxFQUFFLE1BQU0sRUFBRTs7QUFFekMsWUFBSSxNQUFNLEtBQUssRUFBRSxFQUFFO0FBQ2YsZ0JBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUM7U0FDaEMsTUFBTTtBQUNILGdCQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsR0FBRyxNQUFNLEdBQUcsS0FBSyxDQUFDLENBQUM7U0FDL0M7S0FDSixDQUFDOztBQUVGLFFBQUksQ0FBQyxXQUFXLEdBQUcsVUFBUyxHQUFHLEVBQUU7Ozs7QUFJN0IsWUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO0FBQzFDLG1CQUFPO1NBQ1Y7O0FBRUQsWUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUM7QUFDbkIsY0FBTSxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBQ25CLFNBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7QUFFdEIsa0JBQVUsQ0FBQyxZQUFXO0FBQ2xCLGFBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFlBQVc7QUFDbkMsb0JBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO0FBQ3BCLHNCQUFNLENBQUMsU0FBUyxFQUFFLENBQUM7YUFDdEIsQ0FBQyxDQUFDO1NBQ04sRUFBRSxJQUFJLENBQUMsQ0FBQztLQUNaLENBQUM7Ozs7QUFJRixVQUFNLENBQUMsT0FBTyxHQUFHLElBQUksZUFBZSxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFN0UsUUFBSSxDQUFDLFlBQVksR0FBRyxZQUFXO0FBQzNCLGNBQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUNwQixDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFDZCxJQUFJO0FBQ0osb0JBQVc7QUFDUCxlQUFHLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1NBQzlDO1NBQ0osQ0FBQztLQUNMLENBQUM7Ozs7QUFJRixVQUFNLENBQUMsT0FBTyxHQUFHLElBQUksZUFBZSxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFN0UsUUFBSSxDQUFDLGFBQWEsR0FBRyxZQUFXO0FBQzVCLGNBQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUNwQixDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFDZCxZQUFXLEVBQUU7U0FDaEIsQ0FBQztLQUNMLENBQUM7Ozs7QUFJRixRQUFJLENBQUMsV0FBVyxHQUFHLFlBQVc7QUFDMUIsb0JBQVksRUFBRSxDQUFDO0FBQ2YsV0FBRyxDQUFDLFlBQVksRUFBRSxDQUFDLHFCQUFxQixFQUFFLENBQUM7QUFDM0MsbUJBQVcsRUFBRSxDQUFDO0FBQ2Qsa0JBQVUsQ0FBQyxZQUFXO0FBQ2xCLGtCQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDbEIsRUFBRSxHQUFHLENBQUMsQ0FBQztLQUNYLENBQUM7O0FBRUYsUUFBSSxPQUFPLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQzs7QUFFMUIsUUFBSSxDQUFDLGFBQWEsR0FBRyxVQUFTLE1BQU0sRUFBRTs7QUFFbEMsY0FBTSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztBQUNqQyxTQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUNoQyxXQUFHLENBQUMsWUFBWSxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQzs7QUFFdEMsWUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7QUFFOUUsWUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsR0FBRyxPQUFPLENBQUM7Ozs7Ozs7Ozs7QUFVckQsWUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO0FBQ2QsWUFBSSxPQUFPLEVBQUU7QUFDVCxpQkFBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7U0FDaEQ7Ozs7O0FBS0QsY0FBTSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7O0FBRTlCLFlBQUksYUFBYSxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2xDLHFCQUFhLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUM3QyxxQkFBYSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDN0MscUJBQWEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDOztBQUV0RCxZQUFJLE9BQU8sR0FBRyxRQUFRLENBQUMsWUFBVztBQUM5QixnQkFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLFNBQVMsQ0FBQztBQUNqQyxxQkFBSyxFQUFFLGFBQWE7QUFDcEIsdUJBQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQSxHQUFJLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFBLEdBQUksS0FBSyxDQUFDO0FBQzdFLHFCQUFLLEVBQUUsS0FBSztBQUNaLHVCQUFPLEVBQUUsR0FBRyxHQUFHLEtBQUs7QUFDcEIsMEJBQVUsRUFBRSxTQUFTO2FBQ3hCLENBQUMsQ0FBQzs7QUFFSCxhQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQy9CLGtCQUFNLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxDQUFDOztBQUVsQyxlQUFHLENBQUMsWUFBWSxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztTQUN6QyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0tBQ1gsQ0FBQzs7OztBQUlGLFFBQUksQ0FBQyxVQUFVLEdBQUcsVUFBUyxJQUFJLEVBQUU7QUFDN0IsZUFBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzNCLENBQUM7Q0FDTCxDQUFDOzs7OztBQzVnQkYsTUFBTSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7Ozs7QUFJckIsTUFBTSxDQUFDLFFBQVEsR0FBRyxVQUFTLFVBQVUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUU7OztBQUduRSxVQUFNLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDOzs7QUFHakQsVUFBTSxDQUFDLFVBQVUsR0FBSSxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsR0FBRyxJQUFJLEdBQUcsS0FBSyxBQUFDLENBQUM7O0FBRTlELFVBQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUM5QixVQUFNLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUM7QUFDeEMsVUFBTSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7QUFDckIsVUFBTSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7QUFDMUIsVUFBTSxDQUFDLGlCQUFpQixHQUFHLEVBQUUsQ0FBQztBQUM5QixVQUFNLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztBQUNyQixVQUFNLENBQUMsZUFBZSxHQUFHLEVBQUUsQ0FBQzs7QUFFNUIsVUFBTSxDQUFDLGdCQUFnQixHQUFHLFVBQVMsTUFBTSxFQUFFLEtBQUssRUFBRTtBQUM5QyxZQUFJLE1BQU0sSUFBSSxVQUFVLEVBQUU7QUFDdEIsbUJBQU8sV0FBVyxHQUFHLEtBQUssQ0FBQztTQUM5QjtLQUNKLENBQUM7OztBQUdGLFVBQU0sQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO0FBQ3pCLFVBQU0sQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDOztBQUV6QixVQUFNLENBQUMsZUFBZSxHQUFHLFlBQVc7QUFDaEMsY0FBTSxDQUFDLFNBQVMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUM7S0FDeEMsQ0FBQztBQUNGLFVBQU0sQ0FBQyxlQUFlLEdBQUcsWUFBVztBQUNoQyxjQUFNLENBQUMsU0FBUyxHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQztLQUN4QyxDQUFDOztBQUVGLFVBQU0sQ0FBQyxTQUFTLEdBQUcsVUFBUyxFQUFFLEVBQUU7QUFDNUIsY0FBTSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7S0FDdEIsQ0FBQzs7QUFFRixhQUFTLElBQUksR0FBRztBQUNaLGNBQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsYUFBYSxDQUFDLENBQUM7S0FDcEQ7OztBQUdELGFBQVMsYUFBYSxHQUFHOzs7Ozs7Ozs7OztLQVd4Qjs7QUFFRCxVQUFNLENBQUMsZUFBZSxHQUFHLFVBQVMsUUFBUSxFQUFFO0FBQ3hDLFlBQUksTUFBTSxDQUFDLE1BQU0sRUFBRTtBQUNmLGdCQUFJLEdBQUcsR0FBRyxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxlQUFlLENBQUM7QUFDdEQsa0JBQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQztBQUN0QixpQkFBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQ2YsVUFBUyxRQUFRLEVBQUU7O0FBQ2Ysc0JBQU0sQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQztBQUNuQyxxQ0FBcUIsRUFBRSxDQUFDO0FBQ3hCLDBDQUEwQixFQUFFLENBQUM7QUFDN0Isb0JBQUksTUFBTSxDQUFDLFVBQVUsRUFBRTtBQUNuQiwwQkFBTSxDQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztpQkFDbkM7QUFDRCxzQkFBTSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQ3JCLG9CQUFJLFFBQVEsRUFBRTtBQUNWLDRCQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7aUJBQ25CO0FBQ0QsNkJBQWEsRUFBRSxDQUFDO2FBQ25CLEVBQ0QsVUFBUyxNQUFNLEVBQUU7O0FBQ2Isc0JBQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUNyQixxQkFBSyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7YUFDN0MsQ0FDSixDQUFDO1NBQ0w7S0FDSixDQUFDOztBQUVGLFVBQU0sQ0FBQyxlQUFlLEVBQUUsQ0FBQzs7Ozs7O0FBTXpCLFVBQU0sQ0FBQyxlQUFlLEdBQUcsVUFBUyxJQUFJLEVBQUU7QUFDcEMsWUFBSSxPQUFPLEdBQUcsY0FBYyxDQUFDLFNBQVMsQ0FBQztBQUNuQyxlQUFHLEVBQUUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsU0FBUztBQUN6QyxnQkFBSSxFQUFFLHNCQUFzQjtBQUM1QixpQkFBSyxFQUFFLDJCQUEyQjtBQUNsQyx1QkFBVyxFQUFFLElBQUksQ0FBQyxJQUFJO0FBQ3RCLHNCQUFVLEVBQUUsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLFFBQVE7QUFDN0Msa0JBQU0sRUFBRSxJQUFJLENBQUMsS0FBSztBQUNsQiwyQkFBZSxFQUFFLEtBQUs7QUFDdEIsaUJBQUssRUFBRSxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLO0FBQ3BDLGlCQUFLLEVBQUUsZUFBUyxNQUFLLEVBQUUsSUFBSSxFQUFFOztBQUV6QixzQkFBTSxDQUFDLFlBQVksRUFBRSxDQUFDO0FBQ3RCLHFCQUFLLENBQUMsSUFBSSxDQUFDLG9CQUFvQixFQUFFO0FBQzdCLDJCQUFPLEVBQUUsSUFBSSxDQUFDLElBQUk7QUFDbEIsNEJBQVEsRUFBRSxNQUFLLENBQUMsRUFBRTtpQkFDckIsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFTLFFBQVEsRUFBRTtBQUNuQiwwQkFBTSxDQUFDLGVBQWUsQ0FBQyxZQUFXO0FBQzlCLGdDQUFRLENBQUMsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7cUJBQzVDLENBQUMsQ0FBQztpQkFDTixFQUNELFlBQVc7QUFDUCwwQkFBTSxDQUFDLGVBQWUsQ0FBQyxZQUFXO0FBQzlCLGdDQUFRLENBQUMsS0FBSyxDQUFDLG1DQUFtQyxDQUFDLENBQUM7cUJBQ3ZELENBQUMsQ0FBQztpQkFDTixDQUFDLENBQUM7YUFDVjtTQUNKLENBQUMsQ0FBQztBQUNILGVBQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztLQUNsQixDQUFDOzs7QUFHRixVQUFNLENBQUMsaUJBQWlCLEdBQUcsVUFBUyxFQUFFLEVBQUU7QUFDcEMsWUFBSSxNQUFNLENBQUM7QUFDWCxZQUFJLE1BQU0sR0FBRyxhQUFhLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDNUIsbUJBQU8sTUFBTSxDQUFDO1NBQ2pCLE1BQU0sSUFBSSxNQUFNLEdBQUcsaUJBQWlCLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDdkMsbUJBQU8sVUFBVSxDQUFDO1NBQ3JCLE1BQU0sSUFBSSxNQUFNLEdBQUcsbUJBQW1CLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDekMsbUJBQU8sWUFBWSxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUEsQ0FBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDekQsTUFBTTtBQUNILG1CQUFPLEVBQUUsQ0FBQztTQUNiO0tBQ0osQ0FBQzs7QUFFRixVQUFNLENBQUMsc0JBQXNCLEdBQUcsVUFBUyxFQUFFLEVBQUU7QUFDekMsWUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNsQyxZQUFJLE1BQU0sRUFBRTtBQUNSLGdCQUFJLElBQUksR0FBRyxNQUFNLENBQUMsY0FBYyxHQUFHLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLGtCQUFrQixDQUFDO0FBQzlFLGdCQUFJLE1BQU0sQ0FBQyxTQUFTLEVBQUU7QUFDbEIsb0JBQUksR0FBRyxXQUFXLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLElBQ3JDLE1BQU0sQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLFFBQVEsR0FBRyxhQUFhLEdBQUcsRUFBRSxDQUFBLEFBQUMsR0FDM0QsS0FBSyxHQUNMLElBQUksQ0FBQzthQUNaO0FBQ0QsbUJBQU8sTUFBTSxDQUFDLElBQUksR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDO1NBQ3JDLE1BQU07QUFDSCxtQkFBTyxJQUFJLENBQUM7U0FDZjtLQUNKLENBQUM7O0FBRUYsVUFBTSxDQUFDLHlCQUF5QixHQUFHLFVBQVMsRUFBRSxFQUFFO0FBQzVDLFlBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDbEMsWUFBSSxNQUFNLEVBQUU7QUFDUixtQkFBTyxNQUFNLENBQUMscUJBQXFCLENBQUM7U0FDdkMsTUFBTTtBQUNILG1CQUFPLElBQUksQ0FBQztTQUNmO0tBQ0osQ0FBQzs7QUFFRixVQUFNLENBQUMsY0FBYyxHQUFHLFVBQVMsRUFBRSxFQUFFO0FBQ2pDLFlBQUksTUFBTSxDQUFDO0FBQ1gsWUFBSSxNQUFNLEdBQUcsYUFBYSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQzVCLGtCQUFNLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxXQUFXLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztTQUNsRCxNQUFNLElBQUksTUFBTSxHQUFHLGlCQUFpQixDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ3ZDLGtCQUFNLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxXQUFXLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztTQUNsRCxNQUFNLElBQUksTUFBTSxHQUFHLG1CQUFtQixDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ3pDLGtCQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQzVCO0tBQ0osQ0FBQzs7QUFFRixVQUFNLENBQUMsU0FBUyxHQUFHLFVBQVMsRUFBRSxFQUFFO0FBQzVCLFlBQUksTUFBTSxDQUFDO0FBQ1gsWUFBSSxNQUFNLEdBQUcsYUFBYSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQzVCLG1CQUFPLE1BQU0sQ0FBQztTQUNqQixNQUFNLElBQUksTUFBTSxHQUFHLGlCQUFpQixDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ3ZDLG1CQUFPLE1BQU0sQ0FBQztTQUNqQixNQUFNLElBQUksTUFBTSxHQUFHLG1CQUFtQixDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ3pDLG1CQUFPLE1BQU0sQ0FBQztTQUNqQjtBQUNELGVBQU8sSUFBSSxDQUFDO0tBQ2YsQ0FBQzs7QUFFRixhQUFTLGFBQWEsQ0FBQyxFQUFFLEVBQUU7QUFDdkIsZUFBTyxNQUFNLENBQUMsV0FBVyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxxQkFBcUIsRUFBRSxVQUFTLE1BQU0sRUFBRTtBQUMzRixtQkFBTyxNQUFNLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxNQUFNLENBQUMsU0FBUyxJQUFJLFNBQVMsQ0FBQztTQUMzRCxDQUFDLENBQUM7S0FDTjs7QUFFRCxhQUFTLGlCQUFpQixDQUFDLEVBQUUsRUFBRTtBQUMzQixlQUFPLE1BQU0sQ0FBQyxXQUFXLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLHFCQUFxQixFQUFFLFVBQVMsTUFBTSxFQUFFO0FBQzNGLG1CQUFPLE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLE1BQU0sQ0FBQyxTQUFTLEtBQUssU0FBUyxDQUFDO1NBQzVELENBQUMsQ0FBQztLQUNOOztBQUVELGFBQVMsbUJBQW1CLENBQUMsRUFBRSxFQUFFO0FBQzdCLGVBQU8sTUFBTSxDQUFDLFdBQVcsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsd0JBQXdCLEVBQUUsVUFBUyxNQUFNLEVBQUU7QUFDOUYsbUJBQU8sTUFBTSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUM7U0FDMUIsQ0FBQyxDQUFDO0tBQ047Ozs7QUFJRCxVQUFNLENBQUMsU0FBUyxHQUFHLFVBQVMsTUFBTSxFQUFFO0FBQ2hDLFlBQUksT0FBTyxHQUFHLGNBQWMsQ0FBQyxTQUFTLENBQUM7QUFDbkMsZUFBRyxFQUFFLE1BQU0sQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLFNBQVM7QUFDekMsZ0JBQUksRUFBRSxrQkFBa0I7QUFDeEIsaUJBQUssRUFBRSwyQkFBMkI7QUFDbEMsdUJBQVcsRUFBRSxNQUFNLENBQUMsSUFBSTtBQUN4QixrQkFBTSxFQUFFLE1BQU0sQ0FBQyxLQUFLO0FBQ3BCLDJCQUFlLEVBQUUsS0FBSztBQUN0QixpQkFBSyxFQUFFLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUs7QUFDcEMsaUJBQUssRUFBRSxlQUFTLE9BQUssRUFBRSxJQUFJLEVBQUU7O0FBRXpCLHNCQUFNLENBQUMsWUFBWSxFQUFFLENBQUM7QUFDdEIscUJBQUssQ0FBQyxJQUFJLENBQUMscUJBQXFCLEVBQUU7QUFDOUIsK0JBQVcsRUFBRSxNQUFNLENBQUMsSUFBSTtBQUN4QixnQ0FBWSxFQUFFLE1BQU0sQ0FBQyxLQUFLO0FBQzFCLDRCQUFRLEVBQUUsT0FBSyxDQUFDLEVBQUU7aUJBQ3JCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxRQUFRLEVBQUU7QUFDbkIsMEJBQU0sQ0FBQyxlQUFlLENBQUMsWUFBVztBQUM5QixnQ0FBUSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO3FCQUN4QyxDQUFDLENBQUM7OztBQUdILDBCQUFNLENBQUMsVUFBVSxDQUFDLFlBQVc7QUFDekIsOEJBQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7cUJBQzVCLEVBQUUsSUFBSSxDQUFDLENBQUM7aUJBQ1osRUFDRCxVQUFTLFFBQVEsRUFBRTtBQUNmLDBCQUFNLENBQUMsZUFBZSxDQUFDLFlBQVc7QUFDOUIsZ0NBQVEsQ0FBQyxLQUFLLENBQUMsd0NBQXdDLENBQUMsQ0FBQzs7cUJBRTVELENBQUMsQ0FBQztpQkFDTixDQUFDLENBQUM7YUFDVjtTQUNKLENBQUMsQ0FBQztBQUNILGVBQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztLQUNsQixDQUFDOztBQUVGLFVBQU0sQ0FBQyxrQkFBa0IsR0FBRyxVQUFTLFlBQVksRUFBRTtBQUMvQyxjQUFNLENBQUMsWUFBWSxFQUFFLENBQUM7QUFDdEIsYUFBSyxVQUFPLENBQUMsdUNBQXVDLEdBQUcsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFTLFFBQVEsRUFBRTtBQUN4RixrQkFBTSxDQUFDLGVBQWUsQ0FBQyxZQUFXO0FBQzlCLHdCQUFRLENBQUMsT0FBTyxDQUFDLHdCQUF3QixDQUFDLENBQUM7YUFDOUMsQ0FBQyxDQUFDO1NBQ04sRUFDRCxZQUFXO0FBQ1Asa0JBQU0sQ0FBQyxlQUFlLENBQUMsWUFBVztBQUM5Qix3QkFBUSxDQUFDLEtBQUssQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDO2FBQ3pELENBQUMsQ0FBQztTQUNOLENBQUMsQ0FBQztLQUNWLENBQUM7OztBQUdGLFVBQU0sQ0FBQyxhQUFhLEdBQUcsWUFBVztBQUM5QixjQUFNLENBQUMsWUFBWSxFQUFFLENBQUM7QUFDdEIsYUFBSyxVQUFPLENBQUMseUJBQXlCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxRQUFRLEVBQUU7QUFDeEQsa0JBQU0sQ0FBQyxlQUFlLENBQUMsWUFBVztBQUM5Qix3QkFBUSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO2FBQ3hDLENBQUMsQ0FBQztTQUNOLEVBQ0QsWUFBVztBQUNQLGtCQUFNLENBQUMsZUFBZSxDQUFDLFlBQVc7QUFDOUIsd0JBQVEsQ0FBQyxLQUFLLENBQUMsK0JBQStCLENBQUMsQ0FBQzthQUNuRCxDQUFDLENBQUM7U0FDTixDQUFDLENBQUM7S0FDVixDQUFDOzs7O0FBSUYsVUFBTSxDQUFDLGVBQWUsR0FBRyxVQUFTLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDMUMsZUFBTyxNQUFNLENBQUMsV0FBVyxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUM7S0FDaEYsQ0FBQzs7QUFFRixVQUFNLENBQUMsV0FBVyxHQUFHLFVBQVMsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUN0QyxlQUFPLE1BQU0sQ0FBQyxXQUFXLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLE9BQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUM7S0FDNUUsQ0FBQzs7QUFFRixVQUFNLENBQUMsWUFBWSxHQUFHLFlBQVc7QUFDN0IsZUFBTyxNQUFNLENBQUMsV0FBVyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLE9BQUksQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7S0FDakYsQ0FBQzs7QUFFRixVQUFNLENBQUMsa0JBQWtCLEdBQUcsVUFBUyxHQUFHLEVBQUU7QUFDdEMsZUFBTyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRTtBQUN0RCxlQUFHLEVBQUUsR0FBRztTQUNYLENBQUMsQ0FBQztLQUNOLENBQUE7Ozs7QUFJRCxRQUFJO0FBQ0EsY0FBTSxDQUFDLGVBQWUsR0FBRyxZQUFXO0FBQ2hDLG1CQUFPLE1BQU0sQ0FBQyxPQUFPLEtBQUssU0FBUyxDQUFDO1NBQ3ZDLENBQUM7OztBQUdGLFlBQUksU0FBUyxHQUFHLElBQUksY0FBYyxDQUFDLFFBQVEsRUFBRSxDQUFDOztBQUU5QyxjQUFNLENBQUMsYUFBYSxHQUFHLFlBQVc7QUFDOUIscUJBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNyQixDQUFDO0tBQ0wsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFOzs7O0FBSWQsVUFBTSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7O0FBRXJCLFVBQU0sQ0FBQyxjQUFjLEdBQUcsWUFBVztBQUMvQixTQUFDLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztLQUMvRSxDQUFDOztBQUVGLFVBQU0sQ0FBQyxjQUFjLEdBQUcsWUFBVztBQUMvQixZQUFJLE1BQU0sQ0FBQyxRQUFRLEtBQUssRUFBRSxFQUFFO0FBQ3hCLG1CQUFPO1NBQ1Y7O0FBRUQsU0FBQyxDQUFDLElBQUksQ0FBQztBQUNILGdCQUFJLEVBQUUsTUFBTTtBQUNaLGVBQUcsRUFBRSxpQkFBaUI7QUFDdEIsZ0JBQUksRUFBRTtBQUNGLG1CQUFHLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJO0FBQ3pCLHdCQUFRLEVBQUUsTUFBTSxDQUFDLFFBQVE7YUFDNUI7QUFDRCxtQkFBTyxFQUFFLG1CQUFXO0FBQ2hCLHNCQUFNLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztBQUNyQixxQkFBSyxDQUFDLDhCQUE4QixDQUFDLENBQUM7YUFDekM7QUFDRCxpQkFBSyxFQUFFLGlCQUFXOzthQUVqQjtTQUNKLENBQUMsQ0FBQzs7QUFFSCxTQUFDLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDL0MsQ0FBQzs7Ozs7OztBQU9GLFVBQU0sQ0FBQyxNQUFNLEdBQUc7QUFDWixZQUFJLEVBQUUsRUFBRTtLQUNYLENBQUM7OztBQUdGLFVBQU0sQ0FBQyxXQUFXLEdBQUcsVUFBUyxTQUFTLEVBQUU7QUFDckMsWUFBSSxHQUFHLEdBQUcseUJBQXlCLEdBQUcsU0FBUyxDQUFDO0FBQ2hELGVBQU8sS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxRQUFRLEVBQUU7QUFDMUMsbUJBQU8sUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7U0FDN0IsQ0FBQyxDQUFDO0tBQ04sQ0FBQzs7QUFFRixVQUFNLENBQUMsa0JBQWtCLEdBQUcsWUFBVztBQUNuQyxZQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNyRSxhQUFLLENBQUMsR0FBRyxDQUFDLGtDQUFrQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxRQUFRLEVBQUU7QUFDekUsa0JBQU0sQ0FBQyxlQUFlLEVBQUUsQ0FBQztBQUN6QixrQkFBTSxDQUFDLGlCQUFpQixHQUFHLFlBQVksQ0FBQztTQUMzQyxFQUNELFlBQVc7QUFDUCxrQkFBTSxDQUFDLGlCQUFpQixHQUFHLHFCQUFxQixDQUFDO1NBQ3BELENBQUMsQ0FBQztLQUNWLENBQUM7O0FBRUYsVUFBTSxDQUFDLFNBQVMsR0FBRyxVQUFTLEdBQUcsRUFBRTtBQUM3QixZQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ3BELGNBQU0sQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDekMsY0FBTSxDQUFDLGtCQUFrQixFQUFFLENBQUM7S0FDL0IsQ0FBQzs7QUFFRixVQUFNLENBQUMsV0FBVyxHQUFHLFVBQVMsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7O0FBRTlDLGNBQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzVCLENBQUM7O0FBRUYsVUFBTSxDQUFDLGtCQUFrQixHQUFHLFVBQVMsQ0FBQyxFQUFFO0FBQ3BDLFlBQUksQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFFLEVBQUU7QUFDZixrQkFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ3JDO0tBQ0osQ0FBQzs7QUFFRixVQUFNLENBQUMsTUFBTSxHQUFHLFVBQVMsT0FBTyxFQUFFO0FBQzlCLGNBQU0sQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztBQUM3QixnQkFBSSxFQUFFLE9BQU87U0FDaEIsQ0FBQyxDQUFDO0FBQ0gsY0FBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ3hCLGNBQU0sQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO0tBQy9CLENBQUM7Ozs7Ozs7QUFPRixRQUFJO0FBQ0EsY0FBTSxDQUFDLFVBQVUsR0FBRyxJQUFJLGtCQUFrQixDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDbEUsY0FBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO0tBQ2xDLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRTs7Ozs7QUFLZCxVQUFNLENBQUMscUJBQXFCLEdBQUcsRUFBRSxDQUFDOztBQUVsQyxhQUFTLHFCQUFxQixHQUFHO0FBQzdCLGNBQU0sQ0FBQyxxQkFBcUIsR0FBRyxFQUFFLENBQUM7QUFDbEMsU0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxVQUFTLEdBQUcsRUFBRTtBQUMvQyxnQkFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsYUFBYSxFQUFFO0FBQzlDLGtCQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUU7YUFDYixDQUFDLEVBQUU7QUFDQSxzQkFBTSxDQUFDLHFCQUFxQixDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUM7YUFDL0M7U0FDSixDQUFDLENBQUM7S0FDTjs7QUFFRCxVQUFNLENBQUMsbUJBQW1CLEdBQUcsWUFBVztBQUNwQyxZQUFJLGdCQUFnQixHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsVUFBUyxHQUFHLEVBQUU7QUFDckUsbUJBQU8sTUFBTSxDQUFDLHFCQUFxQixDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUNqRSxDQUFDLENBQUM7QUFDSCxZQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMxRCxhQUFLLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxRQUFRLEVBQUU7QUFDM0Usa0JBQU0sQ0FBQyxlQUFlLEVBQUUsQ0FBQztBQUN6QixrQkFBTSxDQUFDLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDO1NBQ2hELEVBQ0QsWUFBVztBQUNQLGtCQUFNLENBQUMsaUJBQWlCLEdBQUcsMEJBQTBCLENBQUM7U0FDekQsQ0FBQyxDQUFDO0tBQ1YsQ0FBQzs7Ozs7QUFLRixVQUFNLENBQUMsK0JBQStCLEdBQUcsRUFBRSxDQUFDOztBQUU1QyxVQUFNLENBQUMsa0JBQWtCLEdBQUcsVUFBUyxFQUFFLEVBQUU7QUFDckMsZUFBTyxNQUFNLENBQUMsK0JBQStCLENBQUMsRUFBRSxDQUFDLENBQUM7S0FDckQsQ0FBQzs7QUFFRixVQUFNLENBQUMsc0JBQXNCLEdBQUcsVUFBUyxFQUFFLEVBQUU7QUFDekMsWUFBSSxDQUFDLE1BQU0sQ0FBQywrQkFBK0IsQ0FBQyxFQUFFLENBQUMsSUFBSSxPQUFPLENBQUMsa0NBQWtDLENBQUMsRUFBRTtBQUM1RixrQkFBTSxDQUFDLCtCQUErQixDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLCtCQUErQixDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3pGLGtCQUFNLENBQUMsMkJBQTJCLEVBQUUsQ0FBQztTQUN4QztLQUNKLENBQUM7O0FBRUYsYUFBUywwQkFBMEIsR0FBRztBQUNsQyxjQUFNLENBQUMsK0JBQStCLEdBQUcsRUFBRSxDQUFDO0FBQzVDLFNBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxxQkFBcUIsRUFBRSxVQUFTLEdBQUcsRUFBRTtBQUMzRCxnQkFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsdUJBQXVCLEVBQUU7QUFDeEQsa0JBQUUsRUFBRSxHQUFHLENBQUMsRUFBRTthQUNiLENBQUMsRUFBRTtBQUNBLHNCQUFNLENBQUMsK0JBQStCLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQzthQUN6RDtTQUNKLENBQUMsQ0FBQztLQUNOOztBQUVELFVBQU0sQ0FBQywyQkFBMkIsR0FBRyxZQUFXO0FBQzVDLFlBQUksY0FBYyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyx1QkFBdUIsRUFBRSxVQUFTLEdBQUcsRUFBRTtBQUNqRixtQkFBTyxNQUFNLENBQUMsK0JBQStCLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDO1NBQ3pFLENBQUMsQ0FBQztBQUNILFlBQUksU0FBUyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMxRCxhQUFLLENBQUMsR0FBRyxDQUFDLHdEQUF3RCxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxRQUFRLEVBQUU7QUFDakcsa0JBQU0sQ0FBQyxlQUFlLEVBQUUsQ0FBQztBQUN6QixrQkFBTSxDQUFDLGlCQUFpQixHQUFHLG9CQUFvQixDQUFDO1NBQ25ELEVBQ0QsWUFBVztBQUNQLGtCQUFNLENBQUMsaUJBQWlCLEdBQUcsNkJBQTZCLENBQUM7U0FDNUQsQ0FBQyxDQUFDO0tBQ1YsQ0FBQzs7OztBQUlGLFVBQU0sQ0FBQyxVQUFVLEdBQUcsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDOztBQUVsRSxhQUFTLG1CQUFtQixDQUFDLEVBQUUsRUFBRTtBQUM3QixlQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEVBQUU7QUFDL0MsMEJBQWMsRUFBRSxFQUFFO1NBQ3JCLENBQUMsQ0FBQztLQUNOOztBQUVELFVBQU0sQ0FBQyxpQkFBaUIsR0FBRyxVQUFTLEVBQUUsRUFBRTtBQUNwQyxZQUFJLE1BQU0sQ0FBQyxXQUFXLEVBQUU7QUFDcEIsbUJBQVEsbUJBQW1CLENBQUMsRUFBRSxDQUFDLElBQUksU0FBUyxDQUFFO1NBQ2pELE1BQU07QUFDSCxtQkFBTyxLQUFLLENBQUM7U0FDaEI7S0FDSixDQUFDOztBQUVGLFVBQU0sQ0FBQyxxQkFBcUIsR0FBRyxVQUFTLEVBQUUsRUFBRSxJQUFJLEVBQUU7QUFDOUMsWUFBSSxNQUFNLENBQUMsaUJBQWlCLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDOUIsZ0JBQUksT0FBTyxDQUFDLDZDQUE2QyxDQUFDLEVBQUU7QUFDeEQsb0JBQUksVUFBVSxHQUFHLG1CQUFtQixDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3pDLHFCQUFLLFVBQU8sQ0FBQyxlQUFlLEdBQUcsVUFBVSxDQUFDLEVBQUUsR0FBRyxPQUFPLENBQUMsQ0FDbEQsSUFBSSxDQUFDLFVBQVMsUUFBUSxFQUFFO0FBQ3JCLDBCQUFNLENBQUMsZUFBZSxFQUFFLENBQUM7aUJBQzVCLENBQUMsQ0FBQzthQUNWO1NBQ0osTUFBTTtBQUNILGtCQUFNLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FDdkIsRUFBRSxFQUNGLElBQUksQ0FDUCxDQUFDO1NBQ0w7S0FDSixDQUFDOzs7O0FBS0YsVUFBTSxDQUFDLFVBQVUsR0FBRyxVQUFTLElBQUksRUFBRTtBQUMvQixhQUFLLENBQUMsSUFBSSxDQUFDLG9CQUFvQixFQUFFO0FBQzdCLHVCQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUU7U0FDdkIsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFTLFFBQVEsRUFBRTtBQUNuQixnQkFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDO0FBQzlCLG9CQUFRLENBQUMsT0FBTyxDQUFDLHdCQUF3QixHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUMxRCxFQUNELFlBQVcsRUFBRSxDQUFDLENBQUM7S0FDdEIsQ0FBQzs7QUFFRixVQUFNLENBQUMsWUFBWSxHQUFHLFVBQVMsSUFBSSxFQUFFO0FBQ2pDLGFBQUssVUFBTyxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVMsUUFBUSxFQUFFO0FBQ3pFLGdCQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztBQUNyQixvQkFBUSxDQUFDLE9BQU8sQ0FBQyw4QkFBOEIsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDaEUsRUFDRCxZQUFXLEVBQUUsQ0FBQyxDQUFDO0tBQ3RCLENBQUM7Ozs7QUFJRixhQUFTLFNBQVMsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO0FBQ2hDLGFBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLFVBQVUsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxjQUFjLEVBQUU7QUFDekQsY0FBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFO1NBQ2IsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFTLFFBQVEsRUFBRTtBQUNuQixlQUFHLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztBQUNyQixvQkFBUSxDQUFDLE9BQU8sQ0FBQyx3QkFBd0IsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDekQsRUFDRCxZQUFXLEVBQUUsQ0FBQyxDQUFDO0tBQ3RCOztBQUVELGFBQVMsV0FBVyxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7QUFDbEMsYUFBSyxVQUFPLENBQUMsR0FBRyxHQUFHLFVBQVUsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFTLFFBQVEsRUFBRTtBQUNqRixlQUFHLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztBQUN0QixvQkFBUSxDQUFDLE9BQU8sQ0FBQyw4QkFBOEIsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDL0QsRUFDRCxZQUFXLEVBQUUsQ0FBQyxDQUFDO0tBQ3RCOztBQUVELFVBQU0sQ0FBQyxhQUFhLEdBQUcsVUFBUyxHQUFHLEVBQUU7QUFDakMsaUJBQVMsQ0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLENBQUM7S0FDL0IsQ0FBQztBQUNGLFVBQU0sQ0FBQyxlQUFlLEdBQUcsVUFBUyxHQUFHLEVBQUU7QUFDbkMsbUJBQVcsQ0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLENBQUM7S0FDakMsQ0FBQzs7QUFFRixVQUFNLENBQUMsY0FBYyxHQUFHLFVBQVMsR0FBRyxFQUFFO0FBQ2xDLGlCQUFTLENBQUMsWUFBWSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0tBQ2hDLENBQUM7QUFDRixVQUFNLENBQUMsZ0JBQWdCLEdBQUcsVUFBUyxHQUFHLEVBQUU7QUFDcEMsbUJBQVcsQ0FBQyxZQUFZLEVBQUUsR0FBRyxDQUFDLENBQUM7S0FDbEMsQ0FBQzs7QUFFRixVQUFNLENBQUMsWUFBWSxHQUFHLFVBQVMsR0FBRyxFQUFFO0FBQ2hDLGlCQUFTLENBQUMsdUJBQXVCLEVBQUUsR0FBRyxDQUFDLENBQUM7S0FDM0MsQ0FBQztBQUNGLFVBQU0sQ0FBQyxjQUFjLEdBQUcsVUFBUyxHQUFHLEVBQUU7QUFDbEMsbUJBQVcsQ0FBQyx1QkFBdUIsRUFBRSxHQUFHLENBQUMsQ0FBQztLQUM3QyxDQUFDOzs7OztBQUtGLFVBQU0sQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUM7O0FBRWhELGFBQVMsV0FBVyxHQUFHOztBQUVuQixZQUFJLElBQUksR0FBRztBQUNQLGlCQUFLLEVBQUUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSztBQUNwQyxxQkFBUyxFQUFFLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVE7QUFDM0Msc0JBQVUsRUFBRSxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQzdDLHFCQUFTLEVBQUUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUTtBQUMzQyxvQkFBUSxFQUFFLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE9BQU87U0FDNUMsQ0FBQztBQUNGLFlBQUksTUFBTSxDQUFDLGNBQWMsRUFBRSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFO0FBQ25ELGdCQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUM7QUFDaEMsZ0JBQUksQ0FBQyxxQkFBcUIsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO1NBQ2hEOztBQUVELG9CQUFZLEVBQUUsQ0FBQztBQUNmLGNBQU0sQ0FBQyxpQkFBaUIsR0FBRyxXQUFXLENBQUM7QUFDdkMsYUFBSyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQzNDLFVBQVMsUUFBUSxFQUFFO0FBQ2YsdUJBQVcsRUFBRSxDQUFDO0FBQ2QsZ0JBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLEVBQUU7QUFDekIsc0JBQU0sQ0FBQyxpQkFBaUIsR0FBRyw0QkFBNEIsQ0FBQzs7YUFFM0QsTUFBTTtBQUNILDBCQUFNLENBQUMsaUJBQWlCLEdBQUcsZUFBZSxDQUFDOztpQkFFOUM7U0FDSixFQUNELFlBQVc7QUFDUCx1QkFBVyxFQUFFLENBQUM7QUFDZCxrQkFBTSxDQUFDLGlCQUFpQixHQUFHLHdCQUF3QixDQUFDO1NBQ3ZELENBQ0osQ0FBQztLQUNMOztBQUVELFVBQU0sQ0FBQyxjQUFjLEdBQUcsWUFBVztBQUMvQixlQUFPLEFBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsTUFBTSxJQUM3RCxNQUFNLENBQUMsUUFBUSxJQUFJLE1BQU0sQ0FBQyxlQUFlLENBQUM7S0FDakQsQ0FBQzs7Ozs7QUFLRixVQUFNLENBQUMsa0JBQWtCLEdBQUcsVUFBUyxNQUFNLEVBQUU7QUFDekMsb0JBQVksRUFBRSxDQUFDOztBQUVmLGFBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3BDLGdCQUFJLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDckIsa0JBQU0sQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUMzQixtQkFBRyxFQUFFLFFBQVEsR0FBRyxNQUFNO0FBQ3RCLHNCQUFNLEVBQUUsS0FBSztBQUNiLCtCQUFlLEVBQUUsSUFBSTtBQUNyQixvQkFBSSxFQUFFLElBQUk7QUFDVixnQ0FBZ0IsRUFBRSxjQUFjO2FBQ25DLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBUyxJQUFJLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDL0Msc0JBQU0sQ0FBQyxlQUFlLEVBQUUsQ0FBQztBQUN6QixzQkFBTSxDQUFDLGlCQUFpQixHQUFHLGVBQWUsQ0FBQztBQUMzQywyQkFBVyxFQUFFLENBQUM7YUFDakIsQ0FBQyxDQUNHLEtBQUssQ0FBQyxZQUFXO0FBQ2QsMkJBQVcsRUFBRSxDQUFDO0FBQ2Qsc0JBQU0sQ0FBQyxpQkFBaUIsR0FBRywrQkFBK0IsQ0FBQzthQUM5RCxDQUFDLENBQUE7O1NBRVQ7S0FDSixDQUFDOzs7Ozs7O0FBUUYsVUFBTSxDQUFDLFlBQVksR0FBRyxVQUFTLENBQUMsRUFBRSxHQUFHLEVBQUU7QUFDbkMsWUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLENBQUMsRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO0FBQ2hELFlBQUksT0FBTyxHQUFHLE1BQU0sQ0FBQyxHQUFHLEVBQUUseUJBQXlCLENBQUMsQ0FBQzs7Ozs7QUFLckQsZUFBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0tBQzdCLENBQUM7Ozs7QUFJRixVQUFNLENBQUMsc0JBQXNCLEdBQUcsVUFBUyxZQUFZLEVBQUU7QUFDbkQsWUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRTtBQUM3QixnQkFBSSxNQUFNLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyQyxnQkFBSSxNQUFNLENBQUMsTUFBTSxJQUFJLE1BQU0sRUFBRTtBQUN6Qix1QkFBTyxrQkFBa0IsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO2FBQzdDLE1BQU0sSUFBSSxNQUFNLENBQUMsTUFBTSxJQUFJLFNBQVMsRUFBRTtBQUNuQyx1QkFBTyxxQkFBcUIsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDO2FBQ25ELE1BQU0sSUFBSSxNQUFNLENBQUMsTUFBTSxJQUFJLGtCQUFrQixFQUFFO0FBQzVDLHVCQUFPLFFBQVEsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO2FBQ2xDLE1BQU0sSUFBSSxNQUFNLENBQUMsTUFBTSxJQUFJLGNBQWMsRUFBRTtBQUN4Qyx1QkFBTyxtQkFBbUIsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDO2FBQy9DO1NBQ0o7QUFDRCxlQUFPLEVBQUUsQ0FBQztLQUNiLENBQUM7O0FBRUYsVUFBTSxDQUFDLGtCQUFrQixHQUFHLFVBQVMsWUFBWSxFQUFFO0FBQy9DLGFBQUssVUFBTyxDQUFDLGlCQUFpQixHQUFHLFlBQVksQ0FBQyxFQUFFLEdBQUcsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUM1RCxVQUFTLFFBQVEsRUFBRTs7QUFDZix3QkFBWSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7U0FDL0IsRUFDRCxVQUFTLE1BQU0sRUFBRTs7QUFDYixpQkFBSyxDQUFDLCtCQUErQixDQUFDLENBQUM7U0FDMUMsQ0FDSixDQUFDO0tBQ0wsQ0FBQzs7QUFFRixVQUFNLENBQUMsZ0JBQWdCLEdBQUcsVUFBUyxNQUFNLEVBQUU7QUFDdkMsWUFBSSxLQUFLLEdBQUc7QUFDUixnQkFBSSxFQUFFLGFBQWE7QUFDbkIsbUJBQU8sRUFBRSxvQkFBb0I7QUFDN0IsNEJBQWdCLEVBQUUsMkJBQTJCO0FBQzdDLHdCQUFZLEVBQUUsZ0NBQWdDO0FBQzlDLHNCQUFVLEVBQUUscUJBQXFCO0FBQ2pDLHVCQUFXLEVBQUUsY0FBYztTQUM5QixDQUFDO0FBQ0YsZUFBTyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDeEIsQ0FBQzs7Ozs7QUFLRixVQUFNLENBQUMsT0FBTyxHQUFHLFVBQVMsS0FBSyxFQUFFLENBQUMsRUFBRTs7QUFFaEMsZUFBUSxDQUFDLEdBQUcsS0FBSyxHQUFHLEVBQUUsQ0FBRTtLQUMzQixDQUFDOzs7QUFHRixVQUFNLENBQUMsU0FBUyxHQUFHLFVBQVMsRUFBRSxFQUFFOztBQUU1QixZQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQztBQUMvQixZQUFJLEtBQUssSUFBSSxRQUFRLElBQUksS0FBSyxJQUFJLFNBQVMsRUFBRTtBQUN6QyxnQkFBSSxFQUFFLElBQUssT0FBTyxFQUFFLEFBQUMsS0FBSyxVQUFVLEFBQUMsRUFBRTtBQUNuQyxrQkFBRSxFQUFFLENBQUM7YUFDUjtTQUNKLE1BQU07QUFDSCxnQkFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNuQjtLQUNKLENBQUM7OztBQUdGLFVBQU0sQ0FBQyxhQUFhLEdBQUcsWUFBVztBQUM5QixlQUFRLEFBQUMsY0FBYyxJQUFJLE1BQU0sSUFBTSxTQUFTLENBQUMsY0FBYyxHQUFHLENBQUMsQUFBQyxJQUFLLFNBQVMsQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLEFBQUMsQ0FBRTtLQUM3RyxDQUFDOztBQUVGLFFBQUksRUFBRSxDQUFDO0NBQ1YsQ0FBQzs7QUFFRixNQUFNLENBQUMsUUFBUSxDQUFDLE9BQU8sR0FBRyxDQUFDLFlBQVksRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxTQUFTLENBQUMsQ0FBQzs7Ozs7QUNydEJqRixJQUFNLE9BQU8sR0FBRztBQUNaLE9BQUcsRUFBRSxLQUFLO0FBQ1YsV0FBTyxFQUFFLFNBQVM7QUFDbEIsWUFBUSxFQUFFLFVBQVU7QUFDcEIsY0FBVSxFQUFFLFlBQVk7QUFDeEIsUUFBSSxFQUFFLE1BQU07QUFDWixXQUFPLEVBQUUsUUFBUTtBQUNqQix3QkFBb0IsRUFBRSxPQUFPO0NBQ2hDLENBQUM7O0FBRUYsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFdkIsTUFBTSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7Ozs7O0FDWnpCLElBQU0sUUFBUSxHQUFHO0FBQ2IsaUJBQWEsRUFBRSxlQUFlO0FBQzlCLGlCQUFhLEVBQUUsZUFBZTtBQUM5QixzQkFBa0IsRUFBRSxvQkFBb0I7Q0FDM0MsQ0FBQzs7QUFFRixNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUV4QixNQUFNLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQzs7Ozs7QUNSMUIsSUFBTSxNQUFNLEdBQUc7QUFDZCxhQUFZLEVBQUUsY0FBYztBQUM1QixjQUFhLEVBQUUsZUFBZTtBQUM5QixVQUFTLEVBQUUsVUFBVTtBQUNyQixJQUFHLEVBQUUsS0FBSztBQUNWLElBQUcsRUFBRSxLQUFLO0NBQ1YsQ0FBQTs7QUFFRCxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUV0QixNQUFNLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQzs7Ozs7QUNWeEIsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQ3hDLElBQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFNUIsSUFBTSxLQUFLLEdBQUc7QUFDVixPQUFHLEVBQUUsS0FBSztBQUNWLFdBQU8sRUFBRSxTQUFTO0FBQ2xCLFlBQVEsRUFBRSxVQUFVO0FBQ3BCLGNBQVUsRUFBRSxZQUFZO0FBQ3hCLFdBQU8sRUFBRSxRQUFRO0FBQ2pCLHdCQUFvQixFQUFFLE9BQU87QUFDN0IsUUFBSSxFQUFFLE1BQU07Q0FDZixDQUFDOztBQUVGLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQTs7QUFFVixNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDOztBQUVyQixNQUFNLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQzs7Ozs7QUNqQnZCLElBQU0sTUFBTSxHQUFHO0FBQ1gsYUFBUyxFQUFFLFlBQVk7QUFDdkIsYUFBUyxFQUFFLFlBQVk7QUFDdkIsZ0JBQVksRUFBRSxlQUFlO0FBQzdCLHdCQUFvQixFQUFFLCtCQUErQjtBQUNyRCxRQUFJLEVBQUUsZUFBZTtDQUN4QixDQUFDOztBQUVGLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRXRCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDOzs7OztBQ1Z4QixJQUFNLElBQUksR0FBRztBQUNULGVBQVcsRUFBRSxhQUFhO0FBQzFCLFFBQUksRUFBRSxNQUFNO0FBQ1osU0FBSyxFQUFFLE9BQU87QUFDZCxXQUFPLEVBQUUsU0FBUztDQUNyQixDQUFDOztBQUVGLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRXBCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDOzs7OztBQ1R0QixJQUFJLE9BQU8sR0FBRyxTQUFWLE9BQU8sQ0FBYSxNQUFNLEVBQUU7O0FBRTVCLEFBQUMsS0FBQSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFO0FBQ2pCLFlBQUksRUFBRTtZQUFFLEdBQUcsR0FBRyxDQUFDLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hDLENBQUMsR0FBRyxNQUFNLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQztBQUMzQixZQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDbkMsVUFBRSxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEIsVUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7QUFDWCxVQUFFLENBQUMsR0FBRyx3REFBc0QsTUFBTSxBQUFFLENBQUM7QUFDckUsV0FBRyxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDOztBQUVyQyxTQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztBQUNWLFNBQUMsQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLEVBQUU7QUFDbkIsYUFBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDaEIsQ0FBQzs7QUFFRixlQUFPLENBQUMsQ0FBQztLQUNaLENBQUEsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLGFBQWEsQ0FBQyxDQUFFOztBQUV0QyxRQUFJLElBQUksR0FBRyxTQUFQLElBQUksR0FBUztBQUNiLGNBQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVc7QUFDNUIsZ0JBQUksQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQzFELG9CQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDakIsb0JBQUksVUFBVSxHQUFHLFNBQWIsVUFBVSxDQUFZLFNBQVMsRUFBRTtBQUNqQyx3QkFBSSxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7QUFDaEQseUJBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNoQyw0QkFBSSxTQUFTLEVBQUU7QUFDWCw2QkFBQyxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUM7eUJBQzdCO3FCQUNKLE1BQU07QUFDSCxnQ0FBUSxJQUFJLENBQUMsQ0FBQztBQUNkLDRCQUFJLFFBQVEsR0FBRyxFQUFFLEVBQUU7QUFDZiw2QkFBQyxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsR0FBRyxDQUFDLENBQUM7eUJBQzVCO3FCQUNKO2lCQUNKLENBQUE7QUFDRCwwQkFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ3BCO1NBQ0osQ0FBQyxDQUFDO0tBQ04sQ0FBQztBQUNGLFdBQU8sSUFBSSxDQUFDO0NBQ2YsQ0FBQzs7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQzs7Ozs7QUMxQ3pCLElBQUksV0FBVyxHQUFHLFNBQWQsV0FBVyxDQUFhLE1BQU0sRUFBRTs7QUFFaEMsVUFBTSxDQUFDLFdBQVcsR0FBRyxZQUFZO0FBQzdCLGNBQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDO0FBQ1gsaUJBQUssRUFBRSxpQkFBaUI7QUFDeEIsaUJBQUssRUFBRSxJQUFJO0FBQ1gsbUJBQU8sRUFBRSxNQUFNO1NBQ2xCLENBQUMsQ0FBQzs7QUFFSCxjQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLFVBQVUsU0FBUyxFQUFFO0FBQzFELGtCQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztTQUM5RCxDQUFDLENBQUM7O0FBRUgsY0FBTSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxVQUFVLFNBQVMsRUFBRTtBQUMxRCxrQkFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsU0FBUyxDQUFDLENBQUM7U0FDaEUsQ0FBQyxDQUFDOztBQUVILGNBQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxjQUFjLEVBQUUsVUFBVSxTQUFTLEVBQUU7QUFDM0Qsa0JBQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1NBQzlELENBQUMsQ0FBQztLQUNOLENBQUM7O0FBRUYsQUFBQyxLQUFBLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUU7QUFDakIsWUFBSSxFQUFFO1lBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzQyxZQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDdEIsbUJBQU87U0FDVjtBQUNELFVBQUUsR0FBRyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3hCLFVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDO0FBQ1gsVUFBRSxDQUFDLEdBQUcsR0FBRyxxQ0FBcUMsQ0FBQztBQUMvQyxXQUFHLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUM7S0FDeEMsQ0FBQSxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsZ0JBQWdCLENBQUMsQ0FBRTs7QUFFekMsV0FBTyxNQUFNLENBQUMsV0FBVyxDQUFDO0NBQzdCLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRyxXQUFXLENBQUM7Ozs7O0FDcEM3QixJQUFJLGVBQWUsR0FBRyxTQUFsQixlQUFlLENBQWEsR0FBRyxFQUFFOzs7QUFHakMsS0FBQyxZQUFZO0FBQ1QsWUFBSSxFQUFFLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxBQUFDLEVBQUUsQ0FBQyxJQUFJLEdBQUcsaUJBQWlCLENBQUMsQUFBQyxFQUFFLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztBQUN4RixVQUFFLENBQUMsR0FBRyxHQUFHLHdDQUF3QyxDQUFDO0FBQ2xELFlBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztLQUN4RixDQUFBLEVBQUcsQ0FBQzs7O0FBR1AsS0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDdEIsU0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ3pCLHVCQUFXLEVBQ1gsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxLQUFLLEVBQUUsUUFBUTtTQUN4QyxDQUFDLENBQUMsQUFBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hDLENBQUMsR0FBRyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztZQUFFLEVBQUUsR0FBRyxDQUFDLElBQUksV0FBVyxHQUFHLEtBQUssR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLEFBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsQUFBQyxDQUFDLENBQUMsR0FBRyxHQUNyRix1Q0FBdUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLEFBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQ3JGLENBQUEsQ0FBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDOzs7QUFHNUQsS0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUM1QixTQUFDLENBQUMsdUJBQXVCLENBQUMsR0FBRyxDQUFDLENBQUMsQUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFlBQVk7QUFDdkQsYUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBLENBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQzNDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxBQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxFQUNsRCxDQUFDLEdBQUcsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQUFBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUN6RCxTQUFDLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDbkMsQ0FBQSxDQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLHlDQUF5QyxFQUFFLElBQUksQ0FBQyxDQUFDOztBQUU5RSxVQUFNLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQzNDLFVBQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQzlCLFdBQU8sTUFBTSxDQUFDLEVBQUUsQ0FBQztDQUNwQixDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsZUFBZSxDQUFDOzs7Ozs7QUNqQ2pDLFNBQVMscUJBQXFCLENBQUMsV0FBVyxFQUFFO0FBQ3hDLFFBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTztBQUN6QixRQUFJLEtBQUssR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDO0FBQy9CLFVBQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztDQUNuRTs7QUFFRCxTQUFTLHNCQUFzQixDQUFDLFdBQVcsRUFBRTtBQUN6QyxRQUFJLENBQUMsV0FBVyxFQUFFLE9BQU87QUFDekIsUUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDO0FBQ3BCLFVBQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztDQUNuRTs7QUFFRCxTQUFTLG9CQUFvQixDQUFDLFdBQVcsRUFBRTtBQUN2QywwQkFBc0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztDQUN2Qzs7QUFFRCxTQUFTLHdCQUF3QixDQUFDLFdBQVcsRUFBRTtBQUMzQyxRQUFJLENBQUMsV0FBVyxFQUFFLE9BQU87QUFDekIsUUFBSSxLQUFLLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUM7QUFDN0MsVUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxXQUFXLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0NBQ25FOztBQUVELFNBQVMsdUJBQXVCLENBQUMsV0FBVyxFQUFFO0FBQzFDLFFBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTztBQUN6QixRQUFJLEtBQUssR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDO0FBQ2pGLFVBQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztDQUNuRTs7QUFHRCxJQUFJLFVBQVUsR0FBRyxTQUFiLFVBQVUsQ0FBYSxNQUFNLEVBQUU7O0FBRS9CLFVBQU0sQ0FBQyxLQUFLLEdBQUksQ0FBQSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFO0FBQ2hDLFlBQUksRUFBRTtZQUFFLEdBQUcsR0FBRyxDQUFDLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQztBQUN6QixZQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDbkMsVUFBRSxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEIsVUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7QUFDWCxVQUFFLENBQUMsR0FBRyxHQUFHLHlDQUF5QyxDQUFDO0FBQ25ELFdBQUcsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQzs7QUFFckMsU0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7QUFDVixTQUFDLENBQUMsS0FBSyxHQUFHLFVBQVUsQ0FBQyxFQUFFO0FBQ25CLGFBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2hCLENBQUM7O0FBRUYsZUFBTyxDQUFDLENBQUM7S0FDWixDQUFBLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxhQUFhLENBQUMsQUFBQyxDQUFDOztBQUV0QyxVQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxVQUFDLE9BQU8sRUFBSztBQUM1QixlQUFPLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3ZCLGVBQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxxQkFBcUIsQ0FBQyxDQUFDO0FBQ3BELGVBQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO0FBQ3JELGVBQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSx3QkFBd0IsQ0FBQyxDQUFDO0FBQ3pELGVBQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO0FBQ3RELGVBQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSx1QkFBdUIsQ0FBQyxDQUFDO0tBQzFELENBQUMsQ0FBQzs7QUFFSCxRQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDakIsUUFBSSxJQUFJLEdBQUcsU0FBUCxJQUFJLEdBQVM7QUFDYixZQUFJLE1BQU0sQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUU7QUFDdEMsbUJBQU8sTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDdEMsTUFBTSxJQUFHLFFBQVEsR0FBRyxDQUFDLEVBQUU7QUFDcEIsb0JBQVEsSUFBSSxDQUFDLENBQUM7QUFDZCxhQUFDLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztTQUN0QjtLQUNKLENBQUE7O0FBRUQsV0FBTyxJQUFJLENBQUM7Q0FFZixDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxDQUFDOzs7OztBQ3ZFNUIsSUFBSSxRQUFRLEdBQUcsU0FBWCxRQUFRLENBQWEsTUFBTSxFQUFFO0FBQzdCLFFBQUksTUFBTSxHQUFHLHlDQUF5QztRQUFFLENBQUM7UUFBRSxDQUFDLENBQUM7QUFDN0QsUUFBSSxNQUFNLElBQUksSUFBSSxFQUFFO0FBQ2hCLGNBQU0sR0FBRyxFQUFFLENBQUM7S0FDZjtBQUNELFVBQU0sR0FBRyxNQUFNLENBQUMsaUJBQWlCLENBQUM7QUFDbEMsUUFBSSxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEtBQUssV0FBVyxFQUFFO0FBQ3BELGNBQU0sQ0FBQyxjQUFjLEdBQUc7QUFDcEIsZ0JBQUksRUFBRSxRQUFRO0FBQ2Qsb0JBQVEsRUFBRSxJQUFJO0FBQ2Qsc0JBQVUsRUFBRSxvQkFBVSxHQUFHLEVBQUU7QUFDdkIsdUJBQU8sUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUN0RDtTQUNKLENBQUM7QUFDRixTQUFDLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNyQyxTQUFDLENBQUMsSUFBSSxHQUFHLGlCQUFpQixDQUFDO0FBQzNCLFNBQUMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO0FBQ2YsU0FBQyxDQUFDLEdBQUcsR0FBRywwQkFBMEIsR0FBRyxNQUFNLEdBQUcsS0FBSyxDQUFDO0FBQ3BELFNBQUMsR0FBRyxRQUFRLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0MsZUFBTyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQzNCO0NBQ0osQ0FBQzs7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQzs7Ozs7Ozs7O0FDeEIxQixJQUFNLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQ3pCLElBQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7QUFDbkMsSUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLHlCQUF5QixDQUFDLENBQUM7QUFDcEQsSUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDckQsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7O0lBRTFDLFdBQVc7QUFDRixhQURULFdBQVcsQ0FDRCxPQUFPLEVBQUUsUUFBUSxFQUFFOzhCQUQ3QixXQUFXOztBQUVULFlBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0FBQ3pCLFlBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO0FBQ3ZCLFlBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxPQUFPLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNwRCxZQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDbEI7O2lCQU5DLFdBQVc7O2VBUU4sbUJBQUc7QUFDTixnQkFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7QUFDaEIsb0JBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFLO0FBQzdDLHFCQUFDLE9BQUssUUFBUSxDQUFDLGFBQWEsQ0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ3pDLHdCQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2hCLDZCQUFTLENBQUMsU0FBUyxDQUFDLEVBQUUsTUFBTSxRQUFNLFFBQVEsQ0FBQyxrQkFBa0IsQUFBRSxFQUFFLENBQUMsQ0FBQzs7QUFFbkUscUJBQUMsQ0FBQyxLQUFLLENBQUMsWUFBTTtBQUNWLGdDQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDaEIsOEJBQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNkLDRCQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWiw2QkFBSyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2IsNkJBQUssQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0FBQzVCLCtCQUFPLEVBQUUsQ0FBQztxQkFDYixFQUFFLEdBQUcsQ0FBQyxDQUFDO2lCQUNYLENBQUMsQ0FBQzthQUNOO0FBQ0QsbUJBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztTQUN4Qjs7O2VBRU8sa0JBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQWE7Ozs4Q0FBUixNQUFNO0FBQU4sc0JBQU07OztBQUNoQyxnQkFBSSxHQUFHLEdBQUcsWUFBQSxJQUFJLENBQUMsT0FBTyxFQUFDLEdBQUcsTUFBQSxZQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsTUFBTSxTQUFLLE1BQU0sRUFBQyxDQUFDO0FBQ3hELGdCQUFJLENBQUMsR0FBRyxFQUFFOzs7QUFDTiw0QkFBQSxJQUFJLENBQUMsT0FBTyxhQUFHLFlBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxTQUFLLE1BQU0sRUFBQyxDQUFDO2FBQ3RFO1NBQ0o7OztXQWpDQyxXQUFXOzs7QUFvQ2pCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsV0FBVyxDQUFDOzs7OztBQzFDN0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFO0FBQzFCLFVBQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLFlBQVk7QUFDbEMsWUFBSSxJQUFJLEdBQUcsU0FBUyxDQUFDO0FBQ3JCLGVBQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsVUFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFO0FBQ3JELG1CQUFPLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLFdBQVcsR0FDckMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUNaLEtBQUssQ0FDUjtTQUNKLENBQUMsQ0FBQztLQUNOLENBQUM7Q0FDTDs7Ozs7QUNWRCxJQUFNLElBQUksR0FBRyxnQkFBWTtBQUNyQixRQUFJLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQztBQUMxQixLQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ1AsS0FBQyxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFDZCxhQUFTLEdBQUcsa0JBQWtCLENBQUM7QUFDL0IsS0FBQyxHQUFHLENBQUMsQ0FBQztBQUNOLFdBQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRTtBQUNYLFNBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzdELFNBQUMsSUFBSSxDQUFDLENBQUM7S0FDVjtBQUNELEtBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDWixLQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxBQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUksR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2pELEtBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDbkMsUUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDbEIsV0FBTyxJQUFJLENBQUM7Q0FDZixDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDOzs7OztBQ2pCdEIsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdCLElBQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7O0FBRW5DLElBQU0sSUFBSSx5SkFLVCxDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLFVBQVMsSUFBSSxFQUFFOzs7QUFFMUQsUUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7O0FBRTFDLFFBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO0FBQ2xCLFFBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDOztBQUVuQixRQUFJLENBQUMsV0FBVyxHQUFHLFVBQUMsR0FBRyxFQUFLO0FBQ3hCLFlBQUksQ0FBQyxNQUFLLE1BQU0sRUFBRTtBQUNkLGFBQUMsQ0FBQyxNQUFLLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ3hCLGFBQUMsQ0FBQyxNQUFLLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQzs7QUFFcEMsZ0JBQUksQ0FBQyxHQUFHO0FBQ0oscUJBQUssRUFBRSxNQUFLLEtBQUs7QUFDakIsMEJBQVUsRUFBRSxFQUFFO0FBQ2QseUJBQVMsRUFBRSxtQkFBUyxFQUFFLEVBQWE7QUFDL0Isd0JBQUksRUFBRSxFQUFFOzBEQURlLE1BQU07QUFBTixrQ0FBTTs7O0FBRXpCLDBCQUFFLGtCQUFJLE1BQU0sQ0FBQyxDQUFDO3FCQUNqQjtpQkFDSjtBQUNELHNCQUFNLEVBQUUsa0JBQVcsRUFBRTtBQUNyQixtQkFBRyxFQUFFLGVBQVc7QUFBRSwyQkFBTyxFQUFFLElBQUksRUFBRSxnQkFBVyxFQUFFLEVBQUUsQ0FBQTtpQkFBRTtBQUNsRCw2QkFBYSxFQUFFLHlCQUFXO0FBQUUsMkJBQU8sS0FBSyxDQUFDO2lCQUFFO2FBQzlDLENBQUE7O0FBRUQsa0JBQUssTUFBTSxFQUFFLENBQUM7O0FBRWQsYUFBQyxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUM7QUFDaEIsZUFBRyxDQUFDLFFBQVEsR0FBRztBQUNYLHVCQUFPLEVBQUUsSUFBSTtBQUNiLHVCQUFPLEVBQUUsSUFBSTthQUNoQixDQUFDO0FBQ0YsZUFBRyxDQUFDLFVBQVUsR0FBRztBQUNiLCtCQUFlLEVBQUUsS0FBSztBQUN0Qiw0QkFBWSxFQUFFLElBQUk7QUFDbEIscUNBQXFCLEVBQUUsSUFBSTtBQUMzQixxQ0FBcUIsRUFBRSxJQUFJO2FBQzlCLENBQUE7QUFDRCxlQUFHLENBQUMsY0FBYyxHQUFHO0FBQ2pCLDhDQUE4QixFQUFFLFVBQVU7QUFDMUMsb0NBQW9CLEVBQUUsTUFBTTtBQUM1QixpQ0FBaUIsRUFBRSxPQUFPO2FBQzdCLENBQUE7O0FBRUQsa0JBQUssTUFBTSxHQUFHLGFBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDOUMsTUFBTTtBQUNILGdCQUFJLEdBQUcsQ0FBQyxVQUFVLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7QUFDeEMsc0JBQUssTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFBO2FBQ2pDO1NBQ0o7QUFDRCxpQkFBUyxDQUFDLElBQUksRUFBRSxDQUFDO0tBQ3BCLENBQUE7O0FBRUQsUUFBSSxDQUFDLEtBQUssR0FBRyxVQUFDLElBQUksRUFBSztBQUNuQixZQUFJLElBQUksQ0FBQyxFQUFFLElBQUksTUFBSyxLQUFLLEVBQUU7QUFDdkIsa0JBQUssTUFBTSxHQUFHLElBQUksQ0FBQTtBQUNsQixnQkFBSSxNQUFLLEtBQUssRUFBRTtBQUNaLHVCQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsZ0JBQWMsTUFBSyxLQUFLLENBQUcsQ0FBQzthQUNuRDtBQUNELGtCQUFLLEtBQUssR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDO0FBQ3JCLHFCQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7O0FBRWxCLG1CQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsZ0JBQWMsSUFBSSxDQUFDLEVBQUUsRUFBSSxNQUFLLFdBQVcsQ0FBQyxDQUFDO0FBQzlELG1CQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsTUFBSyxLQUFLLENBQUMsQ0FBQztTQUM3QztLQUNKLENBQUE7O0FBRUQsV0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQzs7QUFFekMsUUFBSSxDQUFDLGFBQWEsR0FBRyxZQUFNO0FBQ3ZCLFNBQUMsQ0FBQyxNQUFLLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUNoQixrQkFBTSxFQUFFLE1BQU0sQ0FBQyxXQUFXLEdBQUcsR0FBRyxHQUFHLElBQUk7U0FDMUMsQ0FBQyxDQUFDO0tBQ04sQ0FBQTs7QUFFRCxRQUFJLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxZQUFNO0FBQ3BCLGNBQUssYUFBYSxFQUFFLENBQUM7S0FDeEIsQ0FBQyxDQUFDOztBQUVILEtBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBTTtBQUNuQixjQUFLLGFBQWEsRUFBRSxDQUFDO0tBQ3hCLENBQUMsQ0FBQztDQUNOLENBQUMsQ0FBQzs7Ozs7QUM1RkgsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUU3QixJQUFNLElBQUksNnZCQWlCVCxDQUFDOztBQUVGLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxVQUFVLElBQUksRUFBRTs7O0FBRXhDLFFBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOztBQUUxQyxRQUFJLENBQUMsT0FBTyxHQUFHLFVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBSztBQUM5QixlQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztBQUMzQixlQUFPLElBQUksQ0FBQztLQUNmLENBQUE7O0FBRUQsUUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7QUFDakIsUUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsWUFBTTtBQUNuQixlQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxjQUFjLEVBQUUsVUFBQyxJQUFJLEVBQUs7QUFDMUMsa0JBQUssSUFBSSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEVBQUUsVUFBQyxDQUFDLEVBQUs7QUFDakQsb0JBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDO0FBQ2hDLHVCQUFPLE9BQU8sQ0FBQzthQUNsQixDQUFDLENBQUM7QUFDSCxrQkFBSyxNQUFNLEVBQUUsQ0FBQztTQUNqQixDQUFDLENBQUM7S0FDTixDQUFDLENBQUM7Q0FDTixDQUFDLENBQUM7Ozs7O0FDeENILElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFN0IsSUFBTSxJQUFJLHlxREErQlQsQ0FBQzs7QUFFRixJQUFJLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFFLElBQUksRUFBRSxVQUFVLElBQUksRUFBRTs7O0FBRWpELFFBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOztBQUUxQyxRQUFJLENBQUMsYUFBYSxHQUFHLEVBQUUsQ0FBQzs7QUFFeEIsUUFBSSxDQUFDLE9BQU8sR0FBRyxVQUFDLEtBQUssRUFBRSxNQUFNLEVBQUs7QUFDOUIsZUFBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDM0IsZUFBTyxJQUFJLENBQUM7S0FDZixDQUFBOztBQUVELFFBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLFlBQU07QUFDbkIsZUFBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsdUJBQXVCLEVBQUUsVUFBQyxJQUFJLEVBQUs7QUFDbkQsa0JBQUssYUFBYSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEVBQUUsVUFBQyxDQUFDLEVBQUs7QUFDMUQsb0JBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDO0FBQ2hDLHVCQUFPLE9BQU8sQ0FBQzthQUNsQixDQUFDLENBQUM7QUFDSCxrQkFBSyxNQUFNLEVBQUUsQ0FBQztTQUNqQixDQUFDLENBQUM7S0FDTixDQUFDLENBQUM7Q0FDTixDQUFDLENBQUM7Ozs7O0FDdkRILElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFN0IsSUFBTSxJQUFJLDJuREErQlQsQ0FBQzs7QUFFRixJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxJQUFJLEVBQUUsVUFBVSxJQUFJLEVBQUU7OztBQUUxQyxRQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUMxQyxRQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQzs7QUFFakIsUUFBSSxDQUFDLE9BQU8sR0FBRyxVQUFDLEtBQUssRUFBRSxNQUFNLEVBQUs7QUFDOUIsZUFBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDM0IsZUFBTyxJQUFJLENBQUM7S0FDZixDQUFBOztBQUVELFFBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLFlBQU07QUFDbkIsZUFBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFLFlBQVUsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLGNBQVcsVUFBQyxJQUFJLEVBQUs7QUFDakUsa0JBQUssTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEVBQUUsVUFBQyxDQUFDLEVBQUs7QUFDbkQsb0JBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDO0FBQ2hDLHVCQUFPLE9BQU8sQ0FBQzthQUNsQixDQUFDLENBQUM7QUFDSCxrQkFBSyxNQUFNLEVBQUUsQ0FBQztTQUNqQixDQUFDLENBQUM7S0FDTixDQUFDLENBQUM7Q0FDTixDQUFDLENBQUM7Ozs7O0FDdERILElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFN0IsSUFBTSxJQUFJLGd3QkFlVCxDQUFDOztBQUVGLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxVQUFVLElBQUksRUFBRTs7O0FBRXhDLFFBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOztBQUUxQyxRQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztBQUNmLFFBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDOztBQUVsQixRQUFJLENBQUMsTUFBTSxHQUFHLFlBQU07QUFDaEIsZUFBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO0tBQ3BCLENBQUE7O0FBRUQsUUFBSSxDQUFDLFdBQVcsR0FBRyxZQUFNO0FBQ3JCLGVBQU8sQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUM7S0FDL0IsQ0FBQTs7QUFFRCxRQUFJLENBQUMsT0FBTyxHQUFHLFVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBSztBQUM5QixnQkFBTyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUk7QUFDbEIsaUJBQUssU0FBUztBQUNWLHNCQUFLLE1BQU0sRUFBRSxDQUFDO0FBQ2QsdUJBQU8sS0FBSyxDQUFDO0FBQ2Isc0JBQU07O0FBQUEsQUFFVixpQkFBSyx1QkFBdUI7QUFDeEIsc0JBQUssV0FBVyxFQUFFLENBQUM7QUFDbkIsdUJBQU8sS0FBSyxDQUFDO0FBQ2Isc0JBQU07O0FBQUEsQUFFVjtBQUNJLHVCQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztBQUMzQix1QkFBTyxJQUFJLENBQUM7QUFDWixzQkFBTTtBQUFBLFNBQ2I7S0FDSixDQUFBOztBQUVELFFBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLFlBQU07QUFDbkIsZUFBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFLGlCQUFpQixVQUFDLElBQUksRUFBSztBQUMxQyxrQkFBSyxRQUFRLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7QUFDekMsa0JBQUssT0FBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0FBQ3BDLGtCQUFLLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxFQUFFLFVBQUMsQ0FBQyxFQUFLO0FBQ2pELG9CQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQztBQUNoQyx1QkFBTyxPQUFPLENBQUM7YUFDbEIsQ0FBQyxDQUFDO0FBQ0gsa0JBQUssTUFBTSxFQUFFLENBQUM7U0FDakIsQ0FBQyxDQUFDO0tBQ04sQ0FBQyxDQUFDO0NBQ04sQ0FBQyxDQUFDOzs7OztBQ2pFSCxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRTdCLElBQU0sSUFBSSx5bkNBK0JULENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxJQUFJLEVBQUUsVUFBVSxJQUFJLEVBQUU7OztBQUU1RCxRQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7O0FBRXZDLFFBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ2YsUUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7QUFDdkIsUUFBSSxDQUFDLEdBQUcsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsaUJBQWlCLENBQUM7QUFDdEQsUUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7O0FBRXBCLFFBQUksQ0FBQyxhQUFhLEdBQUcsVUFBQyxHQUFHLEVBQUs7QUFDMUIsWUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQztBQUNuQixZQUFJLEdBQUcsQ0FBQyxVQUFVLEVBQUU7O0FBQ2hCLG9CQUFJLElBQUksR0FBRyxFQUFFLENBQUM7QUFDZCxpQkFBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLFVBQUMsR0FBRyxFQUFLO0FBQzVCLHdCQUFJLENBQUMsSUFBSSxDQUFDLE1BQUssR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7aUJBQzdCLENBQUMsQ0FBQztBQUNILG1CQUFHLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7O1NBQzlDO0FBQ0QsZUFBTyxHQUFHLENBQUM7S0FDZCxDQUFBOztBQUVELFFBQUksQ0FBQyxjQUFjLEdBQUcsVUFBQyxHQUFHLEVBQUs7QUFDM0IsWUFBSSxHQUFHLEdBQUcsSUFBSSxJQUFJLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN6QyxZQUFHLENBQUMsR0FBRyxFQUFFO0FBQ0wsZ0JBQUksV0FBVyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDO0FBQzdDLGVBQUcsR0FBRyxJQUFJLElBQUksR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBQ2hEO0FBQ0QsZUFBTyxHQUFHLENBQUM7S0FDZCxDQUFBOztBQUVELFFBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFNO0FBQy9CLGVBQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxnQkFBYyxNQUFLLEtBQUssWUFBUyxVQUFDLElBQUksRUFBSztBQUMxRCxrQkFBSyxRQUFRLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUMzQixrQkFBSyxNQUFNLEVBQUUsQ0FBQztTQUNqQixDQUFDLENBQUM7QUFDSCxjQUFLLE1BQU0sR0FBRyxJQUFJLENBQUM7S0FDdEIsQ0FBQyxDQUFDOztBQUVILFdBQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxVQUFDLElBQUksRUFBSztBQUN4QyxZQUFJLE1BQUssTUFBTSxFQUFFO0FBQ2IsYUFBQyxDQUFDLE1BQUssUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQ3hDO0FBQ0QsWUFBSSxNQUFLLEtBQUssRUFBRTtBQUNaLG1CQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsZ0JBQWMsTUFBSyxLQUFLLFdBQVEsQ0FBQztBQUNyRCxtQkFBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFLGdCQUFjLElBQUksQ0FBQyxFQUFFLFlBQVMsVUFBQyxJQUFJLEVBQUs7QUFDdkQsc0JBQUssUUFBUSxHQUFHLElBQUksQ0FBQztBQUNyQixzQkFBSyxNQUFNLEVBQUUsQ0FBQzthQUNqQixDQUFDLENBQUM7U0FDTjtBQUNELGNBQUssUUFBUSxHQUFHLElBQUksQ0FBQyxJQUFJLElBQUksTUFBTSxDQUFDO0FBQ3BDLGNBQUssS0FBSyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUM7QUFDckIsY0FBSyxNQUFNLEVBQUUsQ0FBQztBQUNkLFlBQUksTUFBSyxLQUFLLEVBQUU7QUFDWixhQUFDLENBQUMsTUFBSyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBSztBQUM1RSx1QkFBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFFBQVEsaUJBQWUsTUFBSyxLQUFLLFdBQVEsQ0FBQzthQUM3RSxDQUFDLENBQUM7QUFDSCxrQkFBSyxjQUFjLEVBQUUsQ0FBQztTQUN6QjtLQUNKLENBQUMsQ0FBQzs7QUFFSCxXQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxVQUFDLElBQUksRUFBSztBQUM3QyxjQUFLLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxFQUFFLFVBQUMsQ0FBQyxFQUFLO0FBQ2pELGdCQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQztBQUNoQyxtQkFBTyxPQUFPLENBQUM7U0FDbEIsQ0FBQyxDQUFDO0FBQ0gsY0FBSyxNQUFNLEVBQUUsQ0FBQztLQUNqQixDQUFDLENBQUM7Q0FFTixDQUFDLENBQUM7Ozs7O0FDdkdILElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM3QixJQUFNLFVBQVUsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDNUMsSUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7O0FBRWxELElBQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUM1QyxJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQzs7QUFFakQsSUFBTSxJQUFJLCtSQVl3QixDQUFDOztBQUVuQyxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxVQUFTLElBQUksRUFBRTs7O0FBRXhELFFBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQzs7QUFFdkMsUUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsWUFBTTtBQUNuQixZQUFJLENBQUMsS0FBSyxDQUFDLE1BQUssZ0JBQWdCLEVBQUUsYUFBYSxDQUFDLENBQUM7QUFDakQsWUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFLLG1CQUFtQixFQUFFLGdCQUFnQixDQUFDLENBQUM7O0FBRXZELFlBQUksQ0FBQyxLQUFLLENBQUMsTUFBSyxnQkFBZ0IsRUFBRSxhQUFhLENBQUMsQ0FBQztLQUNwRCxDQUFDLENBQUM7O0FBRUgsV0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLGFBQWEsRUFBRSxZQUFNO0FBQzNDLFNBQUMsQ0FBQyxNQUFLLFNBQVMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0tBQ3ZELENBQUMsQ0FBQzs7QUFHSCxXQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLFlBQU07QUFDMUMsU0FBQyxDQUFDLE1BQUssU0FBUyxDQUFDLENBQUMsV0FBVyxDQUFDLHVCQUF1QixDQUFDLENBQUM7S0FDMUQsQ0FBQyxDQUFDO0NBRU4sQ0FBQyxDQUFDOzs7OztBQ3pDSCxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsSUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDakQsSUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7O0FBRWpELElBQU0sSUFBSSw2SEFLVCxDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLEVBQUUsVUFBUyxJQUFJLEVBQUU7OztBQUU3RCxRQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7O0FBRXZDLFFBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLFlBQU07QUFDbkIsWUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFLLGlCQUFpQixFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQ25ELFlBQUksQ0FBQyxLQUFLLENBQUMsTUFBSyxpQkFBaUIsRUFBRSxjQUFjLENBQUMsQ0FBQztLQUN0RCxDQUFDLENBQUM7Q0FDTixDQUFDLENBQUM7Ozs7O0FDbkJILElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM3QixJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQztBQUNqRCxJQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRTVCLElBQU0sSUFBSSw4TkFjVCxDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsSUFBSSxFQUFFLFVBQVUsSUFBSSxFQUFFOzs7QUFFNUQsUUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDOztBQUV2QyxXQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsYUFBYSxFQUFFLFlBQU07QUFDM0MsWUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQztBQUM5QixTQUFDLENBQUMsTUFBSyxlQUFlLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBSyxLQUFLLEdBQUcsRUFBRSxPQUFJLEVBQUUsQ0FBQyxDQUFDO0tBQzlELENBQUMsQ0FBQzs7QUFFSCxLQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxZQUFNO0FBQ3pCLFNBQUMsQ0FBQyxNQUFLLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0tBQ25ELENBQUMsQ0FBQzs7QUFFSCxXQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLFlBQU07QUFDMUMsU0FBQyxDQUFDLE1BQUssZUFBZSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLFFBQVEsRUFBRSxDQUFDLENBQUM7S0FDbkQsQ0FBQyxDQUFDO0NBRU4sQ0FBQyxDQUFDOzs7OztBQ3JDSCxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRTdCLElBQU0sSUFBSSx3S0FNVCxDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLFVBQVMsSUFBSSxFQUFFOztBQUUxRCxRQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7Q0FDMUMsQ0FBQyxDQUFDOzs7OztBQ2JILElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM3QixJQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUMzQyxJQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUNqRCxJQUFNLFVBQVUsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUMvQyxJQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzs7QUFFOUMsSUFBTSxJQUFJLDBmQWtCVCxDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLFVBQVMsSUFBSSxFQUFFOzs7QUFFMUQsUUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDOztBQUV2QyxRQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxZQUFNO0FBQ25CLFlBQUksQ0FBQyxLQUFLLENBQUMsTUFBSyxjQUFjLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDN0MsWUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFLLGlCQUFpQixFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQ25ELFlBQUksQ0FBQyxLQUFLLENBQUMsTUFBSyxhQUFhLEVBQUUsYUFBYSxDQUFDLENBQUM7QUFDOUMsWUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFLLGFBQWEsRUFBRSxjQUFjLENBQUMsQ0FBQztLQUNsRCxDQUFDLENBQUM7Q0FFTixDQUFDLENBQUM7Ozs7O0FDckNILElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM3QixJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQzs7QUFFakQsSUFBTSxJQUFJLG1nQkFXVCxDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLFVBQVMsSUFBSSxFQUFFOzs7QUFFeEQsUUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ3ZDLFFBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDOztBQUVwQixRQUFJLENBQUMsVUFBVSxHQUFHLFVBQUMsRUFBRSxFQUFLOztBQUV0QixZQUFHLENBQUMsTUFBSyxPQUFPLEVBQUU7QUFDZCxtQkFBTyxnQkFBZ0IsQ0FBQztTQUMzQixNQUFNO0FBQ0gsbUJBQU8sRUFBRSxDQUFDO1NBQ2I7S0FDSixDQUFBOztBQUVELFdBQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUUsWUFBTTtBQUMzQyxjQUFLLE9BQU8sR0FBRyxLQUFLLENBQUM7QUFDckIsY0FBSyxNQUFNLEVBQUUsQ0FBQztLQUNqQixDQUFDLENBQUM7O0FBR0gsV0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxZQUFNO0FBQzFDLGNBQUssT0FBTyxHQUFHLElBQUksQ0FBQztBQUNwQixjQUFLLE1BQU0sRUFBRSxDQUFDO0tBQ2pCLENBQUMsQ0FBQztDQUVOLENBQUMsQ0FBQzs7Ozs7QUN6Q0gsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUU3QixJQUFNLElBQUkseWhCQVlULENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxJQUFJLEVBQUUsVUFBUyxJQUFJLEVBQUU7O0FBRTFELFFBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztDQUcxQyxDQUFDLENBQUM7Ozs7O0FDckJILElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM3QixJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQzs7QUFFakQsSUFBTSxJQUFJLCsrQkF5QlQsQ0FBQzs7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLElBQUksRUFBRSxVQUFTLElBQUksRUFBRTs7O0FBRTNELFFBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQzs7QUFFdkMsUUFBSSxDQUFDLEtBQUssR0FBRyxZQUFXO0FBQUUsZUFBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtLQUFFLENBQUE7QUFDOUMsUUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7QUFDcEIsUUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7O0FBRWYsV0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsVUFBQyxJQUFJLEVBQUs7QUFDN0MsY0FBSyxJQUFJLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsRUFBRSxVQUFDLENBQUMsRUFBSztBQUNqRCxnQkFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUM7QUFDaEMsZ0JBQUksT0FBTyxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRTtBQUM3QixpQkFBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsRUFBRSxVQUFDLENBQUMsRUFBSztBQUNoRCwyQkFBTyxDQUFDLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQztpQkFDNUIsQ0FBQyxDQUFDO2FBQ047QUFDRCxtQkFBTyxPQUFPLENBQUM7U0FDbEIsQ0FBQyxDQUFDO0FBQ0gsY0FBSyxNQUFNLEVBQUUsQ0FBQztLQUNqQixDQUFDLENBQUM7O0FBRUgsUUFBSSxDQUFDLFVBQVUsR0FBRyxZQUFNO0FBQ3BCLFlBQUcsQ0FBQyxNQUFLLE9BQU8sRUFBRTtBQUNkLG1CQUFPLGdCQUFnQixDQUFDO1NBQzNCLE1BQU07QUFDSCxtQkFBTyxFQUFFLENBQUM7U0FDYjtLQUNKLENBQUE7O0FBRUQsV0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLGFBQWEsRUFBRSxZQUFNO0FBQzNDLGNBQUssT0FBTyxHQUFHLEtBQUssQ0FBQztBQUNyQixjQUFLLE1BQU0sRUFBRSxDQUFDO0tBQ2pCLENBQUMsQ0FBQzs7QUFHSCxXQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLFlBQU07QUFDMUMsY0FBSyxPQUFPLEdBQUcsSUFBSSxDQUFDO0FBQ3BCLGNBQUssTUFBTSxFQUFFLENBQUM7S0FDakIsQ0FBQyxDQUFDO0NBQ04sQ0FBQyxDQUFDOzs7OztBQ3JFSCxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsSUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLHVCQUF1QixDQUFDLENBQUM7QUFDcEQsSUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLHFCQUFxQixDQUFDLENBQUM7QUFDaEQsSUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLHFCQUFxQixDQUFDLENBQUM7QUFDaEQsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLDhCQUE4QixDQUFDLENBQUM7O0FBRXhELElBQU0sSUFBSSwyN0JBdUJULENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxJQUFJLEVBQUUsVUFBUyxJQUFJLEVBQUU7OztBQUMzRCxRQUFJLENBQUMsT0FBTyxHQUFHLFVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBSztBQUM5QixlQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztBQUMzQixlQUFPLElBQUksQ0FBQztLQUNmLENBQUE7O0FBRUQsUUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsWUFBTTtBQUNuQixZQUFJLENBQUMsS0FBSyxDQUFDLE1BQUssaUJBQWlCLEVBQUUsYUFBYSxDQUFDLENBQUM7QUFDbEQsWUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFLLHVCQUF1QixFQUFFLG9CQUFvQixDQUFDLENBQUM7QUFDL0QsWUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFLLGVBQWUsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUM5QyxZQUFJLENBQUMsS0FBSyxDQUFDLE1BQUssZ0JBQWdCLEVBQUUsV0FBVyxDQUFDLENBQUM7S0FDbEQsQ0FBQyxDQUFDO0NBRU4sQ0FBQyxDQUFDOzs7Ozs7OztBQ3pDSCxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsSUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQztBQUNuQyxJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQzs7QUFFcEQsSUFBTSxJQUFJLHdvREF1Q1QsQ0FBQzs7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxVQUFTLElBQUksRUFBRTs7O0FBRW5ELE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOztBQUUxQyxNQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQTtBQUNmLE1BQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFBOztBQUVoQixTQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFVBQUMsSUFBSSxFQUFLO0FBQ3ZDLFVBQUssS0FBSyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxFQUFFLFVBQUMsQ0FBQyxFQUFLO0FBQ3hELFVBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDO0FBQ2hDLGFBQU8sT0FBTyxDQUFDO0tBQ2xCLENBQUMsQ0FBQztBQUNILFVBQUssS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDeEIsVUFBSyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUMxQixVQUFLLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDOztBQUUxQixVQUFLLFFBQVEsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQzs7QUFFdEMsVUFBSyxNQUFNLEVBQUUsQ0FBQzs7QUFFZCxhQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7O0FBRWpCLFVBQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO0dBQ25DLENBQUMsQ0FBQztDQUNOLENBQUMsQ0FBQzs7Ozs7QUN4RUgsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdCLElBQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7QUFDbkMsSUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzVCLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0FBQ3BELElBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDOztBQUVsRCxJQUFNLElBQUksd3BJQXlGVCxDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLFVBQVUsSUFBSSxFQUFFOzs7QUFFdkQsUUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7O0FBRTFDLFFBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ2pCLFFBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ2pCLFFBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxnQkFBZ0IsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3hJLFFBQUksQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDOztBQUU1QixRQUFJLENBQUMsTUFBTSxHQUFHLFVBQUMsS0FBSyxFQUFXO0FBQzNCLGVBQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxVQUFRLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFHLENBQUM7S0FDN0MsQ0FBQTs7QUFFRCxRQUFJLENBQUMsV0FBVyxHQUFHLFVBQUMsS0FBSyxFQUFXO0FBQ2hDLGNBQUssVUFBVSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQztBQUN2QyxnQkFBTyxNQUFLLFVBQVU7QUFDbEIsaUJBQUssU0FBUzs7QUFFVixzQkFBTTtBQUFBLFNBQ2I7S0FDSixDQUFBOztBQUVELFFBQUksQ0FBQyxhQUFhLEdBQUcsVUFBQyxLQUFLLEVBQUUsR0FBRyxFQUFLO0FBQ2pDLGVBQU8sSUFBSSxDQUFDO0tBQ2YsQ0FBQTs7QUFFRCxRQUFJLENBQUMsV0FBVyxHQUFHLFVBQUMsS0FBSyxFQUFFLEdBQUcsRUFBSztBQUMvQixZQUFHLE1BQUssVUFBVSxJQUFJLFNBQVMsRUFBRTtBQUM3QixvQkFBUSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUU7QUFDbEMscUJBQUssUUFBUTtBQUNULHdCQUFNLFVBQVUsR0FBRyxPQUFPLENBQUMsK0JBQStCLENBQUMsQ0FBQztBQUM1RCx3QkFBSSxRQUFRLEdBQUcsZUFBYyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDN0Qsd0JBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQztBQUNiLHFCQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxVQUFDLElBQUksRUFBSztBQUN2QiwyQkFBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7cUJBQzVCLENBQUMsQ0FBQztBQUNILDhCQUFVLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDekMsd0JBQUksSUFBSSxHQUFHLGVBQWMsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztBQUN2RCx3QkFBSSxDQUFDLElBQUksQ0FBQyxZQUFVO0FBQ2hCLHlCQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMvQix5QkFBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7cUJBQy9DLENBQUMsQ0FBQztBQUNILDBCQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM1QiwwQkFBTTtBQUFBLGFBQ2I7U0FDSjtLQUNKLENBQUE7O0FBRUQsUUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsWUFBTTtBQUNuQixpQkFBUyxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2xCLGVBQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLGdCQUFnQixFQUFFLFVBQUMsSUFBSSxFQUFLO0FBQzVDLGdCQUFJLElBQUksRUFBRTtBQUNOLHNCQUFLLElBQUksR0FBRztBQUNSLDJCQUFPLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztBQUN4Qyx3QkFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUM7aUJBQ3JDLENBQUM7QUFDRixzQkFBSyxNQUFNLEVBQUUsQ0FBQzthQUNqQjtTQUNKLENBQUMsQ0FBQzs7QUFFSCxZQUFNLFVBQVUsR0FBRyxTQUFiLFVBQVUsQ0FBSSxHQUFHLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBSztBQUN4QyxnQkFBSTtBQUNBLHNCQUFLLElBQUksR0FBRyxNQUFLLElBQUksSUFBSSxFQUFFLENBQUM7QUFDNUIsc0JBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQztBQUN0QixvQkFBSSxnQkFBYSxHQUFHLENBQUcsRUFBRTtBQUNyQixxQkFBQyxxQkFBbUIsR0FBRyxDQUFHLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQy9DLHdDQUFpQixHQUFHLENBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztpQkFDckM7O0FBRUQsc0JBQUssTUFBTSxFQUFFLENBQUM7O0FBRWQsZ0NBQWEsR0FBRyxDQUFHLEdBQUcsQ0FBQyxDQUFDLHdCQUFxQixHQUFHLENBQUcsQ0FBQyxDQUFDO0FBQ3JELG9DQUFpQixHQUFHLENBQUcsR0FBRyxnQkFBYSxHQUFHLENBQUcsQ0FBQyxTQUFTLENBQUM7Ozs7Ozs7O0FBUXBELDZCQUFTLEVBQUUsQ0FDUDtBQUNJLGlDQUFTLEVBQUUsS0FBSztxQkFDbkIsRUFBRTtBQUNDLG1DQUFXLEVBQUUsS0FBSztxQkFDckIsRUFBRTtBQUNDLG1DQUFXLEVBQUUsSUFBSTtxQkFDcEIsRUFBRTtBQUNDLG1DQUFXLEVBQUUsSUFBSTtxQkFDcEIsRUFBRTtBQUNDLG1DQUFXLEVBQUUsSUFBSTtxQkFDcEIsRUFBRTtBQUNDLG1DQUFXLEVBQUUsS0FBSztxQkFDckIsRUFBRTtBQUNDLG1DQUFXLEVBQUUsS0FBSztxQkFDckIsQ0FDSjtpQkFDSixDQUFDLENBQUM7OztBQUdILG9CQUFJLFlBQVksR0FBRyxnQkFBYSxHQUFHLENBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLGNBQVksR0FBRyxvQkFBaUIsQ0FBQzs7QUFFdkcsZ0NBQWEsR0FBRyxDQUFHLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVk7QUFDNUQsd0JBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDeEMsd0JBQUksT0FBTyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDMUMsMEJBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWTtBQUN6Qiw0QkFBSSxPQUFPLEVBQUU7QUFDVCw2QkFBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDOUIsNkJBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO3lCQUM1QyxNQUFNO0FBQ0gsNkJBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQy9CLDZCQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQzt5QkFDL0M7cUJBQ0osQ0FBQyxDQUFDO0FBQ0gsMEJBQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2lCQUM5QixDQUFDLENBQUM7O0FBRUgsZ0NBQWEsR0FBRyxDQUFHLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxZQUFZO0FBQ2pFLHFCQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDL0MsQ0FBQyxDQUFDOztBQUVILDRCQUFZLENBQUMsSUFBSSxDQUFDLDJCQUEyQixDQUFDLENBQUMsUUFBUSxDQUFDLHdDQUF3QyxDQUFDLENBQUM7O0FBRWxHLG9CQUFJLFFBQVEsRUFBRTtBQUNWLHFCQUFDLHFCQUFtQixHQUFHLENBQUcsQ0FBQyxRQUFRLENBQUMsRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRTtBQUM1Riw0QkFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7QUFDekIsK0JBQU8sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxRQUFRLGlCQUFlLEVBQUUsV0FBUSxDQUFDO0FBQ2xFLCtCQUFPLElBQUksQ0FBQztxQkFDZixDQUFDLENBQUM7aUJBQ047QUFDRCx5QkFBUyxDQUFDLElBQUksRUFBRSxDQUFDO2FBRXBCLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDUix5QkFBUyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2pCLHVCQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3BCO1NBQ0osQ0FBQzs7QUFFRixlQUFPLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsVUFBQyxHQUFHLEVBQUs7QUFDaEgsZ0JBQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUN2QixnQkFBTSxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsVUFBQyxHQUFHLEVBQUUsR0FBRyxFQUFLO0FBQ25DLG1CQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQztBQUNiLG1CQUFHLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQzdELHVCQUFPLEdBQUcsQ0FBQzthQUNkLENBQUMsQ0FBQztBQUNILHNCQUFVLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ3ZCLENBQUMsQ0FBQzs7QUFFSCxlQUFPLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxVQUFDLEdBQUcsRUFBSztBQUM3RCxnQkFBTSxJQUFJLEdBQUcsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ3ZCLGdCQUFNLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxVQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUs7QUFDbkMsb0JBQUksR0FBRyxDQUFDLEtBQUssSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxHQUFHLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxFQUFFO0FBQ2xGLDJCQUFPO2lCQUNWLE1BQU07QUFDSCx1QkFBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUM7QUFDYix1QkFBRyxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUM3RCwyQkFBTyxHQUFHLENBQUM7aUJBQ2Q7YUFDSixDQUFDLENBQUM7O0FBRUgsc0JBQVUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDdkIsQ0FBQyxDQUFDO0tBQ04sQ0FBQyxDQUFDO0NBQ04sQ0FBQyxDQUFDOzs7Ozs7OztBQ2pRSCxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsSUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQztBQUNuQyxJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQzs7QUFFcEQsSUFBTSxJQUFJLDQxQkF3QlQsQ0FBQzs7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxVQUFTLElBQUksRUFBRTs7O0FBRXBELFFBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOztBQUUxQyxRQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQTtBQUNmLFFBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFBOztBQUVoQixXQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsb0JBQW9CLEVBQUUsVUFBQyxJQUFJLEVBQUs7QUFDdkQsY0FBSyxLQUFLLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLEVBQUUsVUFBQyxDQUFDLEVBQUs7QUFDM0QsZ0JBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDO0FBQ2hDLGdCQUFHLE9BQU8sRUFBRTtBQUNSLGlCQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxFQUFFLFVBQUMsQ0FBQyxFQUFLO0FBQ2xELHdCQUFJLFFBQVEsR0FBRyxDQUFDLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQztBQUNqQywyQkFBTyxRQUFRLENBQUM7aUJBQ25CLENBQUMsQ0FBQzthQUNOO0FBQ0QsbUJBQU8sT0FBTyxDQUFDO1NBQ2xCLENBQUMsQ0FBQzs7QUFFSCxjQUFLLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQzFCLGNBQUssUUFBUSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDOztBQUV0QyxjQUFLLE1BQU0sRUFBRSxDQUFDOztBQUVkLGlCQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7S0FDcEIsQ0FBQyxDQUFDO0NBQ04sQ0FBQyxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImNvbnN0IEF1dGgwID0gcmVxdWlyZSgnLi9qcy9hcHAvYXV0aDAnKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuL2pzL2FwcC91c2VyLmpzJyk7XG5jb25zdCBSb3V0ZXIgPSByZXF1aXJlKCcuL2pzL2FwcC9Sb3V0ZXIuanMnKTtcbmNvbnN0IEV2ZW50ZXIgPSByZXF1aXJlKCcuL2pzL2FwcC9FdmVudGVyLmpzJyk7XG5jb25zdCBQYWdlRmFjdG9yeSA9IHJlcXVpcmUoJy4vanMvcGFnZXMvUGFnZUZhY3RvcnkuanMnKTtcbmNvbnN0IE5Qcm9ncmVzcyA9IHdpbmRvdy5OUHJvZ3Jlc3M7XG5jb25zdCBDb25maWcgPSByZXF1aXJlKCcuL2pzL2FwcC8vQ29uZmlnLmpzJyk7XG5jb25zdCBnYSA9IHJlcXVpcmUoJy4vanMvaW50ZWdyYXRpb25zL2dvb2dsZS5qcycpO1xuY29uc3Qgc2hpbXMgPSByZXF1aXJlKCcuL2pzL3Rvb2xzL3NoaW1zLmpzJyk7XG5cbmNsYXNzIE1ldGFNYXAge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IG5ldyBDb25maWcoKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSB0aGlzLl9jb25maWcuY29uZmlnO1xuICAgICAgICB0aGlzLk1ldGFGaXJlID0gdGhpcy5fY29uZmlnLk1ldGFGaXJlO1xuICAgICAgICB0aGlzLkV2ZW50ZXIgPSBuZXcgRXZlbnRlcih0aGlzKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMub25SZWFkeSgpO1xuICAgIH1cblxuICAgIG9uUmVhZHkoKSB7XG4gICAgICAgIGlmICghdGhpcy5fb25SZWFkeSkge1xuICAgICAgICAgICAgdGhpcy5fb25SZWFkeSA9IG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jb25maWcub25SZWFkeSgpLnRoZW4oKGNvbmZpZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkF1dGgwID0gbmV3IEF1dGgwKGNvbmZpZy5hdXRoMCk7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX29uUmVhZHk7XG4gICAgfVxuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5vblJlYWR5KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkF1dGgwLmxvZ2luKCkudGhlbigocHJvZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuTWV0YUZpcmUubG9naW4oKS50aGVuKChhdXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuVXNlciA9IG5ldyBVc2VyKHByb2ZpbGUsIGF1dGgsIHRoaXMuRXZlbnRlciwgdGhpcy5NZXRhRmlyZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuVXNlci5vblJlYWR5KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlBhZ2VGYWN0b3J5ID0gbmV3IFBhZ2VGYWN0b3J5KHRoaXMuRXZlbnRlciwgdGhpcy5NZXRhRmlyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlJvdXRlciA9IG5ldyBSb3V0ZXIodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBsb2codmFsKSB7XG4gICAgICAgIGlmICh3aW5kb3cuZ2EpIHtcbiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsICdsb2cnLCAnbGFiZWwnLCB2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKHZhbCk7XG4gICAgfVxuXG4gICAgZXJyb3IodmFsKSB7XG4gICAgICAgIGlmICh3aW5kb3cuZ2EpIHtcbiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdleGNlcHRpb24nLCB7XG4gICAgICAgICAgICAgICAgJ2V4RGVzY3JpcHRpb24nOiB2YWwubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAnZXhGYXRhbCc6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUuZXJyb3IodmFsKTtcbiAgICB9XG5cbiAgICBsb2dvdXQoKSB7XG4gICAgICAgIHRoaXMuTWV0YUZpcmUubG9nb3V0KCk7XG4gICAgICAgIHRoaXMuQXV0aDAubG9nb3V0KCk7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE1ldGFNYXA7IiwicmVxdWlyZSgnYmFiZWwvcG9seWZpbGwnKTtcbndpbmRvdy5yaW90ID0gcmVxdWlyZSgncmlvdCcpO1xud2luZG93Ll8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbndpbmRvdy5Qcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcbnJlcXVpcmUoJ2NvcmUtanMnKTtcbndpbmRvdy4kID0gd2luZG93LmpRdWVyeSA9IHJlcXVpcmUoJ2pxdWVyeScpO1xucmVxdWlyZSgnanF1ZXJ5LXVpJyk7XG5yZXF1aXJlKCdib290c3RyYXAnKTtcbndpbmRvdy5GaXJlYmFzZSA9IHJlcXVpcmUoJ2ZpcmViYXNlJyk7XG53aW5kb3cuSHVtYW5pemUgPSByZXF1aXJlKCdodW1hbml6ZS1wbHVzJyk7XG53aW5kb3cubW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG53aW5kb3cuVVJJID0gcmVxdWlyZSgnVVJJanMnKTtcbndpbmRvdy5sb2NhbGZvcmFnZSA9IHJlcXVpcmUoJ2xvY2FsZm9yYWdlJyk7XG5cblxucmVxdWlyZSgnLi9qcy9jYW52YXMvZWRpdG9yLmpzJyk7XG5yZXF1aXJlKCcuL2pzL2NhbnZhcy91c2VyLmpzJyk7XG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9lZGl0b3Jfb3B0aW9ucy5qcycpO1xucmVxdWlyZSgnLi9qcy9jYW52YXMvYW5hbHl0aWNzLmpzJyk7XG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9hdHRhY2htZW50cy5qcycpO1xucmVxdWlyZSgnLi9qcy9jYW52YXMvYXV0b3NhdmUuanMnKTtcbnJlcXVpcmUoJy4vanMvY2FudmFzL2dlbmVyYXRvci5qcycpO1xucmVxdWlyZSgnLi9qcy9jYW52YXMvbGF5b3V0cy5qcycpO1xucmVxdWlyZSgnLi9qcy9jYW52YXMvbWFwLmpzJyk7XG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9wZXJzcGVjdGl2ZXMuanMnKTtcbnJlcXVpcmUoJy4vanMvY2FudmFzL3ByZXNlbnRlci5qcycpO1xucmVxdWlyZSgnLi9qcy9jYW52YXMvc2hhcmluZy5qcycpO1xucmVxdWlyZSgnLi9qcy9jYW52YXMvc3RhbmRhcmRzLmpzJyk7XG5yZXF1aXJlKCcuL2pzL2NhbnZhcy90YWdnaW5nLmpzJyk7XG5yZXF1aXJlKCcuL2pzL2NhbnZhcy90ZW1wbGF0ZXMuanMnKTtcbnJlcXVpcmUoJy4vanMvY2FudmFzL3Rlc3RzLmpzJyk7XG5yZXF1aXJlKCcuL2pzL2NhbnZhcy91aS5qcycpO1xuXG52YXIgbW0gPSByZXF1aXJlKCcuL01ldGFNYXAnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgbW0oKTsiLCJjb25zdCBBY3Rpb25CYXNlID0gcmVxdWlyZSgnLi9BY3Rpb25CYXNlLmpzJyk7XG5jb25zdCBBQ1RJT05TID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2FjdGlvbnMnKTtcblxuY2xhc3MgQWN0aW9uIGV4dGVuZHMgQWN0aW9uQmFzZSB7XG4gICAgY29uc3RydWN0b3IoLi4ucGFyYW1zKSB7XG4gICAgICAgIHN1cGVyKC4uLnBhcmFtcyk7XG4gICAgICAgIHRoaXMuX2FjdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICBfZ2V0QWN0aW9uKGFjdGlvbikge1xuICAgICAgICBsZXQgcmV0ID0gdGhpcy5fYWN0aW9uc1thY3Rpb25dO1xuICAgICAgICBpZiAoIXJldCkge1xuICAgICAgICAgICAgbGV0IE1ldGhvZCA9IG51bGw7XG4gICAgICAgICAgICBzd2l0Y2goYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBBQ1RJT05TLk1BUDpcbiAgICAgICAgICAgICAgICAgICAgTWV0aG9kID0gcmVxdWlyZSgnLi9PcGVuTWFwLmpzJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQUNUSU9OUy5ORVdfTUFQOlxuICAgICAgICAgICAgICAgICAgICBNZXRob2QgPSByZXF1aXJlKCcuL05ld01hcC5qcycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEFDVElPTlMuQ09QWV9NQVA6XG4gICAgICAgICAgICAgICAgICAgIE1ldGhvZCA9IHJlcXVpcmUoJy4vQ29weU1hcC5qcycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEFDVElPTlMuREVMRVRFX01BUDpcbiAgICAgICAgICAgICAgICAgICAgTWV0aG9kID0gcmVxdWlyZSgnLi9EZWxldGVNYXAuanMnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBBQ1RJT05TLk1ZX01BUFM6XG4gICAgICAgICAgICAgICAgICAgIE1ldGhvZCA9IHJlcXVpcmUoJy4vTXlNYXBzLmpzJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQUNUSU9OUy5URVJNU19BTkRfQ09ORElUSU9OUzpcbiAgICAgICAgICAgICAgICAgICAgTWV0aG9kID0gcmVxdWlyZSgnLi9UZXJtcy5qcycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBNZXRob2QgPSByZXF1aXJlKCcuL0hvbWUuanMnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoTWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgcmV0ID0gbmV3IE1ldGhvZCh0aGlzLm1ldGFGaXJlLCB0aGlzLmV2ZW50ZXIsIHRoaXMucGFnZUZhY3RvcnkpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2FjdGlvbnNbYWN0aW9uXSA9IHJldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIGFjdChhY3Rpb24sIC4uLnBhcmFtcykge1xuICAgICAgICBzdXBlci5hY3QoKTtcbiAgICAgICAgbGV0IG1ldGhvZCA9IHRoaXMuX2dldEFjdGlvbihhY3Rpb24pO1xuICAgICAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgICAgICByZXR1cm4gbWV0aG9kLmFjdCguLi5wYXJhbXMpO1xuICAgICAgICB9XG4gICAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQWN0aW9uOyIsImNvbnN0IEVWRU5UUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9ldmVudHMnKTtcblxuY2xhc3MgQWN0aW9uQmFzZSB7XG4gICAgY29uc3RydWN0b3IobWV0YUZpcmUsIGV2ZW50ZXIsIHBhZ2VGYWN0b3J5KSB7XG4gICAgICAgIHRoaXMubWV0YUZpcmUgPSBtZXRhRmlyZTtcbiAgICAgICAgdGhpcy5ldmVudGVyID0gZXZlbnRlcjtcbiAgICAgICAgdGhpcy5wYWdlRmFjdG9yeSA9IHBhZ2VGYWN0b3J5O1xuICAgICAgICB0aGlzLm1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9lbnRyeS5qcycpO1xuICAgIH1cblxuICAgIGFjdCgpIHtcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHRvZ2dsZVNpZGViYXIoKSB7XG4gICAgICAgIGlmKHRoaXMuc2lkZWJhck9wZW4pIHtcbiAgICAgICAgICAgIHRoaXMub3BlblNpZGViYXIoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VTaWRlYmFyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgb3BlblNpZGViYXIoKSB7XG4gICAgICAgIHRoaXMuc2lkZWJhck9wZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLmV2ZW50ZXIuZG8oRVZFTlRTLlNJREVCQVJfT1BFTik7XG4gICAgfVxuICAgIFxuICAgIGNsb3NlU2lkZWJhcigpIHtcbiAgICAgICAgdGhpcy5zaWRlYmFyT3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmV2ZW50ZXIuZG8oRVZFTlRTLlNJREVCQVJfQ0xPU0UpO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBY3Rpb25CYXNlOyIsImNvbnN0IEFjdGlvbkJhc2UgPSByZXF1aXJlKCcuL0FjdGlvbkJhc2UuanMnKTtcbmNvbnN0IFJPVVRFUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9yb3V0ZXMuanMnKTtcblxuY2xhc3MgQ29weU1hcCBleHRlbmRzIEFjdGlvbkJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKC4uLnBhcmFtcykge1xuICAgICAgICBzdXBlciguLi5wYXJhbXMpO1xuICAgIH1cblxuICAgIGFjdChpZCwgLi4ucGFyYW1zKSB7XG4gICAgICAgIHN1cGVyLmFjdChpZCwgLi4ucGFyYW1zKTtcbiAgICAgICAgaWYgKCFpZCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignTXVzdCBoYXZlIGEgbWFwIGluIG9yZGVyIHRvIGNvcHkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tZXRhRmlyZS5nZXREYXRhKGAke1JPVVRFUy5NQVBTX0xJU1R9JHtpZH1gKS50aGVuKChvbGRNYXApID0+IHtcbiAgICAgICAgICAgIGxldCBuZXdNYXAgPSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICBvd25lcjogdGhpcy5tZXRhTWFwLlVzZXIudXNlcklkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuYXBwZW5kQ29weShvbGRNYXAubmFtZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWV0YUZpcmUuZ2V0RGF0YShgJHtST1VURVMuTUFQU19EQVRBfSR7aWR9YCkudGhlbigob2xkTWFwRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBwdXNoU3RhdGUgPSB0aGlzLm1ldGFGaXJlLnB1c2hEYXRhKG5ld01hcCwgYCR7Uk9VVEVTLk1BUFNfTElTVH1gKTtcbiAgICAgICAgICAgICAgICBsZXQgbWFwSWQgPSBwdXNoU3RhdGUua2V5KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXRhRmlyZS5zZXREYXRhKG9sZE1hcERhdGEsIGAke1JPVVRFUy5NQVBTX0RBVEF9JHttYXBJZH1gKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1ldGFNYXAuUm91dGVyLnRvKGBtYXAvJHttYXBJZH1gKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgYXBwZW5kQ29weShzdHIpIHtcbiAgICAgICAgbGV0IHJldCA9IHN0cjtcbiAgICAgICAgaWYgKCFfLmNvbnRhaW5zKHN0ciwgJyhDb3B5JykpIHtcbiAgICAgICAgICAgIHJldCA9IHJldCArICcgKENvcHkgMSknO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IG1lc3MgPSBzdHIuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgIGxldCBjbnQgPSAyO1xuICAgICAgICAgICAgaWYgKG1lc3NbbWVzcy5sZW5ndGggLSAyXSA9PSAnKENvcHknKSB7XG4gICAgICAgICAgICAgICAgbGV0IGdyYmcgPSBtZXNzW21lc3MubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgaWYgKGdyYmcpIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JiZyA9IGdyYmcucmVwbGFjZSgnKScsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgY250ID0gK2dyYmcgKyAxO1xuICAgICAgICAgICAgICAgICAgICByZXQgPSBtZXNzLnNsaWNlKDAsIG1lc3MubGVuZ3RoIC0gMikuam9pbignICcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldCArPSBgIChDb3B5ICR7Y250fSlgO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvcHlNYXA7IiwiY29uc3QgQWN0aW9uQmFzZSA9IHJlcXVpcmUoJy4vQWN0aW9uQmFzZS5qcycpO1xuY29uc3QgUk9VVEVTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL3JvdXRlcy5qcycpO1xuY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuY29uc3QgUEFHRVMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvcGFnZXMuanMnKTtcblxuY2xhc3MgRGVsZXRlTWFwIGV4dGVuZHMgQWN0aW9uQmFzZSB7XG4gICAgY29uc3RydWN0b3IoLi4ucGFyYW1zKSB7XG4gICAgICAgIHN1cGVyKC4uLnBhcmFtcyk7XG4gICAgfVxuXG4gICAgYWN0KGlkLCAuLi5wYXJhbXMpIHtcbiAgICAgICAgc3VwZXIuYWN0KGlkLCAuLi5wYXJhbXMpO1xuICAgICAgICBEZWxldGVNYXAuZGVsZXRlQWxsKFtpZF0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVsZXRlQWxsKGlkcywgcGF0aCA9IFBBR0VTLkhPTUUpIHtcbiAgICAgICAgY29uc3QgbWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uL2VudHJ5LmpzJyk7XG4gICAgICAgIF8uZWFjaChpZHMsIChpZCkgPT4ge1xuICAgICAgICAgICAgbWV0YU1hcC5NZXRhRmlyZS5kZWxldGVEYXRhKGAke1JPVVRFUy5NQVBTX0RBVEF9JHtpZH1gKTtcbiAgICAgICAgICAgIG1ldGFNYXAuTWV0YUZpcmUuZGVsZXRlRGF0YShgJHtST1VURVMuTUFQU19MSVNUfSR7aWR9YCk7XG4gICAgICAgICAgICBtZXRhTWFwLkV2ZW50ZXIuZG8ocGF0aCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBEZWxldGVNYXA7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKVxuY29uc3QgQWN0aW9uQmFzZSA9IHJlcXVpcmUoJy4vQWN0aW9uQmFzZS5qcycpO1xuY29uc3QgUk9VVEVTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL3JvdXRlcy5qcycpO1xuY29uc3QgRUxFTUVOVFMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvZWxlbWVudHMuanMnKTtcbmNvbnN0IFRBR1MgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvdGFncy5qcycpO1xuY29uc3QgaG9tZSA9IHJlcXVpcmUoJy4uLy4uL3RhZ3MvcGFnZXMvaG9tZScpO1xuY29uc3QgRVZFTlRTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2V2ZW50cy5qcycpO1xuXG5jbGFzcyBIb21lIGV4dGVuZHMgQWN0aW9uQmFzZSB7XG4gICAgY29uc3RydWN0b3IoLi4ucGFyYW1zKSB7XG4gICAgICAgIHN1cGVyKC4uLnBhcmFtcyk7XG4gICAgfVxuXG4gICAgYWN0KGlkLCAuLi5wYXJhbXMpIHtcbiAgICAgICAgc3VwZXIuYWN0KGlkLCAuLi5wYXJhbXMpO1xuICAgICAgICAkKGAjJHtFTEVNRU5UUy5BUFBfQ09OVEFJTkVSfWApLmVtcHR5KCk7XG4gICAgICAgIHJpb3QubW91bnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRUxFTUVOVFMuQVBQX0NPTlRBSU5FUiksIFRBR1MuSE9NRSk7XG4gICAgICAgIHRoaXMuZXZlbnRlci5kbyhFVkVOVFMuUEFHRV9OQU1FLCB7IG5hbWU6ICdIb21lJyB9LCAuLi5wYXJhbXMpO1xuICAgICAgICB0aGlzLmNsb3NlU2lkZWJhcigpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gSG9tZTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpXG5jb25zdCBBY3Rpb25CYXNlID0gcmVxdWlyZSgnLi9BY3Rpb25CYXNlLmpzJyk7XG5jb25zdCBST1VURVMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvcm91dGVzLmpzJyk7XG5jb25zdCBQQUdFUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9wYWdlcy5qcycpO1xuY29uc3QgVEFHUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy90YWdzLmpzJyk7XG5jb25zdCBFTEVNRU5UUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9lbGVtZW50cy5qcycpO1xuY29uc3QgRVZFTlRTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2V2ZW50cy5qcycpO1xuY29uc3QgaG9tZSA9IHJlcXVpcmUoJy4uLy4uL3RhZ3MvcGFnZXMvbXktbWFwcycpO1xuXG5jbGFzcyBNeU1hcHMgZXh0ZW5kcyBBY3Rpb25CYXNlIHtcbiAgICBjb25zdHJ1Y3RvciguLi5wYXJhbXMpIHtcbiAgICAgICAgc3VwZXIoLi4ucGFyYW1zKTtcbiAgICB9XG5cbiAgICBhY3QoaWQsIC4uLnBhcmFtcykge1xuICAgICAgICBzdXBlci5hY3QoaWQsIC4uLnBhcmFtcyk7XG4gICAgICAgICQoYCMke0VMRU1FTlRTLkFQUF9DT05UQUlORVJ9YCkuZW1wdHkoKTtcbiAgICAgICAgcmlvdC5tb3VudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChFTEVNRU5UUy5BUFBfQ09OVEFJTkVSKSwgVEFHUy5NWV9NQVBTKTtcbiAgICAgICAgdGhpcy5ldmVudGVyLmRvKFBBR0VTLk1ZX01BUFMsIHsgaWQ6IGlkIH0sIC4uLnBhcmFtcyk7XG4gICAgICAgIHRoaXMuZXZlbnRlci5kbyhFVkVOVFMuUEFHRV9OQU1FLCB7IG5hbWU6ICdNeSBNYXBzJyB9LCAuLi5wYXJhbXMpO1xuICAgICAgICB0aGlzLmNsb3NlU2lkZWJhcigpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE15TWFwczsiLCJjb25zdCBBY3Rpb25CYXNlID0gcmVxdWlyZSgnLi9BY3Rpb25CYXNlLmpzJyk7XG5jb25zdCBST1VURVMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvcm91dGVzLmpzJyk7XG5cbmNsYXNzIE5ld01hcCBleHRlbmRzIEFjdGlvbkJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKC4uLnBhcmFtcykge1xuICAgICAgICBzdXBlciguLi5wYXJhbXMpO1xuICAgIH1cblxuICAgIGFjdCgpIHtcbiAgICAgICAgc3VwZXIuYWN0KCk7XG4gICAgICAgIHRoaXMubWV0YUZpcmUuZ2V0RGF0YShgJHtST1VURVMuTUFQU19ORVdfTUFQfWApLnRoZW4oKGJsYW5rTWFwKSA9PiB7XG4gICAgICAgICAgICBsZXQgbmV3TWFwID0ge1xuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgb3duZXI6IHRoaXMubWV0YU1hcC5Vc2VyLnVzZXJJZCxcbiAgICAgICAgICAgICAgICBuYW1lOiAnVW50aXRsZWQgTWFwJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHB1c2hTdGF0ZSA9IHRoaXMubWV0YUZpcmUucHVzaERhdGEobmV3TWFwLCBgJHtST1VURVMuTUFQU19MSVNUfWApO1xuICAgICAgICAgICAgbGV0IG1hcElkID0gcHVzaFN0YXRlLmtleSgpO1xuICAgICAgICAgICAgdGhpcy5tZXRhRmlyZS5zZXREYXRhKGJsYW5rTWFwLCBgJHtST1VURVMuTUFQU19EQVRBfSR7bWFwSWR9YCk7XG4gICAgICAgICAgICB0aGlzLm1ldGFNYXAuUm91dGVyLnRvKGBtYXAvJHttYXBJZH1gKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBOZXdNYXA7IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL3R5cGluZ3MvcmlvdGpzL3Jpb3Rqcy5kLnRzXCIgLz5cblxuY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcbmNvbnN0IEFjdGlvbkJhc2UgPSByZXF1aXJlKCcuL0FjdGlvbkJhc2UuanMnKTtcbmNvbnN0IEVMRU1FTlRTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2VsZW1lbnRzLmpzJyk7XG5jb25zdCBUQUdTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL3RhZ3MuanMnKTtcbmNvbnN0IFJPVVRFUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9yb3V0ZXMuanMnKTtcbmNvbnN0IEVWRU5UUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9ldmVudHMuanMnKTtcbmNvbnN0IG1ldGFDYW52YXMgPSByZXF1aXJlKCcuLi8uLi90YWdzL2NhbnZhcy9tZXRhLWNhbnZhcy5qcycpO1xuXG5jbGFzcyBPcGVuTWFwIGV4dGVuZHMgQWN0aW9uQmFzZSB7XG4gICAgY29uc3RydWN0b3IoLi4ucGFyYW1zKSB7XG4gICAgICAgIHN1cGVyKC4uLnBhcmFtcyk7XG4gICAgfVxuXG4gICAgYWN0KGlkLCAuLi5wYXJhbXMpIHtcbiAgICAgICAgc3VwZXIuYWN0KGlkLCAuLi5wYXJhbXMpO1xuICAgICAgICAkKGAjJHtFTEVNRU5UUy5BUFBfQ09OVEFJTkVSfWApLmVtcHR5KCk7XG4gICAgICAgIHRoaXMubWV0YUZpcmUuZ2V0RGF0YShgJHtST1VURVMuTUFQU19MSVNUfSR7aWR9YCkudGhlbigobWFwKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFwKSB7XG4gICAgICAgICAgICAgICAgcmlvdC5tb3VudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChFTEVNRU5UUy5BUFBfQ09OVEFJTkVSKSwgVEFHUy5NRVRBX0NBTlZBUyk7XG4gICAgICAgICAgICAgICAgbWFwLmlkID0gaWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudGVyLmRvKEVWRU5UUy5OQVYsICdtYXAnLCBtYXAsIC4uLnBhcmFtcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudGVyLmRvKEVWRU5UUy5QQUdFX05BTUUsIG1hcCwgLi4ucGFyYW1zKTtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50ZXIuZG8oRVZFTlRTLk1BUCwgbWFwLCAuLi5wYXJhbXMpO1xuICAgICAgICAgICAgICAgIHRoaXMub3BlblNpZGViYXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBPcGVuTWFwOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90JylcbmNvbnN0IEFjdGlvbkJhc2UgPSByZXF1aXJlKCcuL0FjdGlvbkJhc2UuanMnKTtcbmNvbnN0IFJPVVRFUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9yb3V0ZXMuanMnKTtcbmNvbnN0IEVWRU5UUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9ldmVudHMuanMnKTtcbmNvbnN0IEVMRU1FTlRTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2VsZW1lbnRzLmpzJyk7XG5jb25zdCBUQUdTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL3RhZ3MuanMnKTtcbmNvbnN0IHRlcm1zID0gcmVxdWlyZSgnLi4vLi4vdGFncy9wYWdlcy90ZXJtcycpO1xuXG5jbGFzcyBUZXJtcyBleHRlbmRzIEFjdGlvbkJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKC4uLnBhcmFtcykge1xuICAgICAgICBzdXBlciguLi5wYXJhbXMpO1xuICAgIH1cblxuICAgIGFjdChpZCwgLi4ucGFyYW1zKSB7XG4gICAgICAgIHN1cGVyLmFjdChpZCwgLi4ucGFyYW1zKTtcbiAgICAgICAgJChgIyR7RUxFTUVOVFMuQVBQX0NPTlRBSU5FUn1gKS5lbXB0eSgpO1xuICAgICAgICByaW90Lm1vdW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEVMRU1FTlRTLkFQUF9DT05UQUlORVIpLCBUQUdTLlRFUk1TKTtcbiAgICAgICAgdGhpcy5ldmVudGVyLmRvKEVWRU5UUy5QQUdFX05BTUUsIHsgbmFtZTogJ1Rlcm1zIGFuZCBDb25kaXRpb25zJyB9LCAuLi5wYXJhbXMpO1xuICAgICAgICB0aGlzLmNsb3NlU2lkZWJhcigpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVGVybXM7IiwibGV0IE1ldGFGaXJlID0gcmVxdWlyZSgnLi9GaXJlYmFzZS5qcycpO1xubGV0IHVzZXJzbmFwID0gcmVxdWlyZSgnLi4vaW50ZWdyYXRpb25zL3VzZXJzbmFwJyk7XG5sZXQgZ2EgPSByZXF1aXJlKCcuLi9pbnRlZ3JhdGlvbnMvZ29vZ2xlLmpzJyk7XG5sZXQgdHdpdHRlciA9IHJlcXVpcmUoJy4uL2ludGVncmF0aW9ucy90d2l0dGVyLmpzJyk7XG5sZXQgZmFjZWJvb2sgPSByZXF1aXJlKCcuLi9pbnRlZ3JhdGlvbnMvZmFjZWJvb2suanMnKTtcbmxldCBhZGRUaGlzID0gcmVxdWlyZSgnLi4vaW50ZWdyYXRpb25zL2FkZHRoaXMuanMnKTtcblxuY29uc3QgY29uZmlnID0gKCkgPT4ge1xuICAgIGNvbnN0IFNJVEVTID0ge1xuICAgICAgICBDUkw6IHtcbiAgICAgICAgICAgIGRiOiAnbWV0YS1tYXAtcHJvZHVjdGlvbidcbiAgICAgICAgfSxcbiAgICAgICAgQ1JMX1NUQUdJTkc6IHtcbiAgICAgICAgICAgIGRiOiAnbWV0YS1tYXAtc3RhZ2luZydcbiAgICAgICAgfSxcbiAgICAgICAgVEhJTktfV0FURVI6IHtcbiAgICAgICAgICAgIGRiOiAndGhpbmt3YXRlci1wcm9kdWN0aW9uJ1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmV0ID0ge1xuICAgICAgICBob3N0OiB3aW5kb3cubG9jYXRpb24uaG9zdCxcbiAgICAgICAgc2l0ZToge31cbiAgICB9XG4gICAgbGV0IHNlZ21lbnRzID0gcmV0Lmhvc3Quc3BsaXQoJy4nKTtcbiAgICBsZXQgZmlyc3QgPSBzZWdtZW50c1swXTtcbiAgICBpZiAoZmlyc3QgPT09ICd3d3cnKSB7XG4gICAgICAgIGZpcnN0ID0gc2VnbWVudHNbMV07XG4gICAgfVxuICAgIHN3aXRjaCAoZmlyc3QudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICBjYXNlICdsb2NhbGhvc3QnOlxuICAgICAgICBjYXNlICdtZXRhLW1hcC1zdGFnaW5nJzpcbiAgICAgICAgICAgIHJldC5zaXRlID0gU0lURVMuQ1JMX1NUQUdJTkc7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdjcmxhYic6XG4gICAgICAgIGNhc2UgJ2Zyb250ZW5kJzpcbiAgICAgICAgICAgIHJldC5zaXRlID0gU0lURVMuQ1JMO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAndGhpbmt3YXRlci1wcm9kdWN0aW9uJzpcbiAgICAgICAgY2FzZSAndGhpbmt3YXRlci1zdGFnaW5nJzpcbiAgICAgICAgY2FzZSAndGhpbmt3YXRlcic6XG4gICAgICAgICAgICByZXQuc2l0ZSA9IFNJVEVTLlRISU5LX1dBVEVSO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbn07XG5cbmNsYXNzIENvbmZpZyB7XG5cbiAgICBjb25zdHJ1Y3Rvcih0YWdzKSB7XG4gICAgICAgIHRoaXMudGFncyA9IHRhZ3M7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnKCk7XG5cbiAgICAgICAgdGhpcy5NZXRhRmlyZSA9IG5ldyBNZXRhRmlyZSh0aGlzLmNvbmZpZyk7XG4gICAgICAgIHRoaXMuc29jaWFsRmVhdHVyZXMgPSBbXTtcbiAgICB9XG5cbiAgICBpbml0U29jaWFsKCkge1xuICAgICAgICBfLmVhY2godGhpcy5zb2NpYWxGZWF0dXJlcywgKGZlYXR1cmUpID0+IHtcbiAgICAgICAgICAgIGlmKGZlYXR1cmUpIGZlYXR1cmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0IHNpdGUoKSB7XG4gICAgICAgIHJldHVybiAnZnJvbnRlbmQnO1xuICAgIH1cblxuICAgIG9uUmVhZHkoKSB7XG4gICAgICAgIGlmICghdGhpcy5fb25SZWFkeSkge1xuICAgICAgICAgICAgdGhpcy5fb25SZWFkeSA9IG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLk1ldGFGaXJlLm9uKCdjb25maWcnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXy5leHRlbmQodGhpcy5jb25maWcuc2l0ZSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRoaXMuY29uZmlnLnNpdGUudGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmF2aWNvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZhdmljbycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmF2aWNvLnNldEF0dHJpYnV0ZSgnaHJlZicsIGAke3RoaXMuY29uZmlnLnNpdGUuaW1hZ2VVcmx9ZmF2aWNvbi5pY29gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbCh0aGlzLmNvbmZpZy5zaXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9vblJlYWR5O1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9uUmVhZHkoKS50aGVuKChjb25maWcpID0+IHtcbiAgICAgICAgICAgIGdhKHRoaXMuY29uZmlnLnNpdGUuZ29vZ2xlKTtcbiAgICAgICAgICAgIC8vdGhpcy5zb2NpYWxGZWF0dXJlcy5wdXNoKHR3aXR0ZXIoKSk7XG4gICAgICAgICAgICAvL3RoaXMuc29jaWFsRmVhdHVyZXMucHVzaChmYWNlYm9vaygpKTtcbiAgICAgICAgICAgIHRoaXMuc29jaWFsRmVhdHVyZXMucHVzaChhZGRUaGlzKHRoaXMuY29uZmlnLnNpdGUuYWRkdGhpcy5wdWJpZCkpO1xuICAgICAgICAgICAgdXNlcnNuYXAoKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbmZpZzsiLCJjbGFzcyBFdmVudGVyIHtcblxuICAgIGNvbnN0cnVjdG9yKG1ldGFNYXApIHtcbiAgICAgICAgXG4gICAgICAgIHJpb3Qub2JzZXJ2YWJsZSh0aGlzKTtcblxuICAgICAgICB0aGlzLmV2ZW50cyA9IHt9XG4gICAgfVxuXG4gICAgZXZlcnkoZXZlbnQsIHJlYWN0aW9uKSB7XG4gICAgICAgIC8vbGV0IGNhbGxiYWNrID0gcmVhY3Rpb247XG4gICAgICAgIC8vaWYgKHRoaXMuZXZlbnRzW2V2ZW50XSkge1xuICAgICAgICAvLyAgICBsZXQgcGlnZ3liYWNrID0gdGhpcy5ldmVudHNbZXZlbnRdO1xuICAgICAgICAvLyAgICBjYWxsYmFjayA9ICguLi5wYXJhbXMpID0+IHtcbiAgICAgICAgLy8gICAgICAgIHBpZ2d5YmFjayguLi5wYXJhbXMpO1xuICAgICAgICAvLyAgICAgICAgcmVhY3Rpb24oLi4ucGFyYW1zKTtcbiAgICAgICAgLy8gICAgfVxuICAgICAgICAvL31cbiAgICAgICAgbGV0IGV2ZW50cyA9IGV2ZW50LnNwbGl0KCcgJyk7XG4gICAgICAgIF8uZWFjaChldmVudHMsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IHJlYWN0aW9uO1xuICAgICAgICAgICAgdGhpcy5vbihldmVudCwgcmVhY3Rpb24pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmb3JnZXQoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGxldCBldmVudHMgPSBldmVudC5zcGxpdCgnICcpO1xuICAgICAgICBfLmVhY2goZXZlbnRzLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZXZlbnRzW2V2ZW50XTtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZihldmVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub2ZmKGV2ZW50LCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkbyhldmVudCwgLi4ucGFyYW1zKSB7XG4gICAgICAgIGxldCBldmVudHMgPSBldmVudC5zcGxpdCgnICcpO1xuICAgICAgICBfLmVhY2goZXZlbnRzLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoZXZlbnQsIC4uLnBhcmFtcyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50ZXI7IiwibGV0IEZpcmViYXNlID0gd2luZG93LkZpcmViYXNlOyAvL3JlcXVpcmUoJ2ZpcmViYXNlJyk7XG5sZXQgUHJvbWlzZSA9IHdpbmRvdy5Qcm9taXNlO1xubGV0IGxvY2FsZm9yYWdlID0gd2luZG93LmxvY2FsZm9yYWdlO1xuXG5jbGFzcyBNZXRhRmlyZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuZmIgPSBuZXcgRmlyZWJhc2UoYGh0dHBzOi8vJHt0aGlzLmNvbmZpZy5zaXRlLmRifS5maXJlYmFzZWlvLmNvbWApO1xuICAgIH1cblxuICAgIGdldCBtZXRhTWFwKCkge1xuICAgICAgICBpZiAoIXRoaXMuX21ldGFNYXApIHtcbiAgICAgICAgICAgIHRoaXMuX21ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9lbnRyeS5qcycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9tZXRhTWFwO1xuICAgIH1cblxuICAgIGxvZ2luKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2xvZ2luKSB7XG4gICAgICAgICAgICB0aGlzLl9sb2dpbiA9IG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuTWV0YU1hcC5BdXRoMC5nZXRTZXNzaW9uKClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHByb2ZpbGUpID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lk1ldGFNYXAuQXV0aDAubG9jay5nZXRDbGllbnQoKS5nZXREZWxlZ2F0aW9uVG9rZW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5jb25maWcuc2l0ZS5hdXRoMC5hcGksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRfdG9rZW46IHByb2ZpbGUuaWRfdG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpX3R5cGU6ICdmaXJlYmFzZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIChlcnIsIGRlbGVnYXRpb25SZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGUuZmlyZWJhc2VfdG9rZW4gPSBkZWxlZ2F0aW9uUmVzdWx0LmlkX3Rva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcmViYXNlX3Rva2VuID0gZGVsZWdhdGlvblJlc3VsdC5pZF90b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxmb3JhZ2Uuc2V0SXRlbSgnZmlyZWJhc2VfdG9rZW4nLCB0aGlzLmZpcmViYXNlX3Rva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mYi5hdXRoV2l0aEN1c3RvbVRva2VuKHRoaXMuZmlyZWJhc2VfdG9rZW4sIChlcnJvciwgYXV0aERhdGEsIC4uLnBhcmFtcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhTWFwLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGF1dGhEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9vblJlYWR5ID0gdGhpcy5fbG9naW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ2luO1xuICAgIH1cblxuICAgIG9uUmVhZHkoKSB7XG4gICAgICAgIGlmICghdGhpcy5fb25SZWFkeSkge1xuICAgICAgICAgICAgdGhpcy5fb25SZWFkeSA9IG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBmdWxmaWxsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fb25SZWFkeTtcbiAgICB9XG5cbiAgICBnZXRDaGlsZChwYXRoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZiLmNoaWxkKHBhdGgpO1xuICAgIH1cblxuICAgIGdldERhdGEocGF0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vblJlYWR5KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmZiO1xuICAgICAgICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgICAgICAgICBjaGlsZCA9IHRoaXMuZ2V0Q2hpbGQocGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgY2hpbGQub25jZSgndmFsdWUnLFxuICAgICAgICAgICAgICAgICAgICAoc25hcHNob3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gc25hcHNob3QudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhTWFwLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IoZSwgcGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbihwYXRoLCBjYWxsYmFjaywgZXZlbnQgPSAndmFsdWUnKSB7XG4gICAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgICAgICB0aGlzLm9uUmVhZHkoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmdldENoaWxkKHBhdGgpO1xuICAgICAgICAgICAgICAgIGxldCBtZXRob2QgPSAoc25hcHNob3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc25hcHNob3QuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5vZmYoZXZlbnQsIG1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGVyZSBpcyBubyBkYXRhIGF0ICR7cGF0aH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gc25hcHNob3QudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQub2ZmKGV2ZW50LCBtZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcihlLCBwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY2hpbGQub24oZXZlbnQsIG1ldGhvZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9mZihwYXRoLCBtZXRob2QgPSAndmFsdWUnLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgdGhpcy5vblJlYWR5KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5nZXRDaGlsZChwYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQub2ZmKG1ldGhvZCwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLm9mZihtZXRob2QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0RGF0YShkYXRhLCBwYXRoKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IHRoaXMuZmI7XG4gICAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgICAgICBjaGlsZCA9IHRoaXMuZ2V0Q2hpbGQocGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBjaGlsZC5zZXQoZGF0YSwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yKGUsIHBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yKGUsIHBhdGgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVsZXRlRGF0YShwYXRoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldERhdGEobnVsbCwgcGF0aCk7XG4gICAgfVxuXG4gICAgcHVzaERhdGEoZGF0YSwgcGF0aCkge1xuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmZiO1xuICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgY2hpbGQgPSB0aGlzLmdldENoaWxkKHBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGQucHVzaChkYXRhLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IoZSwgcGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZSwgcGF0aCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXREYXRhSW5UcmFuc2FjdGlvbihkYXRhLCBwYXRoLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmZiO1xuICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgY2hpbGQgPSB0aGlzLmdldENoaWxkKHBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGQudHJhbnNhY3Rpb24oKGN1cnJlbnRWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcihlLCBwYXRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5lcnJvcihlLCBwYXRoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGVycm9yKGUsIHBhdGgpIHtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIHRoaXMubWV0YU1hcC5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgdGhpcy5tZXRhTWFwLmVycm9yKHsgbWVzc2FnZTogYFBlcm1pc3Npb24gZGVuaWVkIHRvICR7cGF0aH1gIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9nb3V0KCkge1xuICAgICAgICB0aGlzLl9sb2dpbiA9IG51bGw7XG4gICAgICAgIHRoaXMuX29uUmVhZHkgPSBudWxsO1xuICAgICAgICBsb2NhbGZvcmFnZS5yZW1vdmVJdGVtKCdmaXJlYmFzZV90b2tlbicpO1xuICAgICAgICB0aGlzLmZiLnVuYXV0aCgpO1xuICAgIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gTWV0YUZpcmU7IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL3R5cGluZ3MvcmlvdGpzL3Jpb3Rqcy5kLnRzXCIgLz5cblxuY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKVxuY29uc3QgQUNUSU9OUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9hY3Rpb25zJylcblxubGV0IGlzSGlkZGVuID0gZmFsc2U7XG5cbmxldCB0cmFjayA9IChwYXRoKSA9PiB7XG4gICAgaWYgKHdpbmRvdy5nYSkge1xuICAgICAgICB3aW5kb3cuZ2EoJ3NldCcsIHtcbiAgICAgICAgICAgIHBhZ2U6IHBhdGhcbiAgICAgICAgfSk7XG4gICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdwYWdldmlldycpO1xuICAgIH1cbn1cblxubGV0IHRvZ2dsZU1haW4gPSAoaGlkZSwgcGF0aCkgPT4ge1xuICAgIHRyYWNrKHBhdGgpO1xuICAgIGlmIChoaWRlKSB7XG4gICAgICAgIGlzSGlkZGVuID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpc0hpZGRlbiA9IGZhbHNlO1xuICAgIH1cbn1cblxuY2xhc3MgUm91dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihtZXRhTWFwKSB7XG4gICAgICAgIHRoaXMudXNlciA9IG1ldGFNYXAuVXNlcjtcbiAgICAgICAgdGhpcy5QYWdlRmFjdG9yeSA9IG1ldGFNYXAuUGFnZUZhY3Rvcnk7XG5cbiAgICAgICAgcmlvdC5yb3V0ZS5zdGFydCgpO1xuICAgICAgICByaW90LnJvdXRlKCh0YXJnZXQsIGlkID0gJycsIGFjdGlvbiA9ICcnLCAuLi5wYXJhbXMpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGF0aCA9IHRoaXMuZ2V0UGF0aCh0YXJnZXQpO1xuXG4gICAgICAgICAgICB0b2dnbGVNYWluKHRydWUsIHRoaXMucGF0aCk7XG4gICAgICAgICAgICB0aGlzLlBhZ2VGYWN0b3J5Lm5hdmlnYXRlKHRoaXMucGF0aCwgaWQsIGFjdGlvbiwgLi4ucGFyYW1zKTtcblxuICAgICAgICAgICAgbWV0YU1hcC5FdmVudGVyLmRvKCdoaXN0b3J5Jywgd2luZG93LmxvY2F0aW9uLmhhc2gpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50byh0aGlzLmN1cnJlbnRQYWdlKTtcbiAgICB9XG5cbiAgICBnZXQgY3VycmVudFBhZ2UoKSB7XG4gICAgICAgIGxldCBwYWdlID0gJ2hvbWUnO1xuICAgICAgICBsZXQgcGFnZUNudCA9IHRoaXMudXNlci5oaXN0b3J5Lmxlbmd0aDtcbiAgICAgICAgaWYgKHBhZ2VDbnQgPiAwKSB7XG4gICAgICAgICAgICBwYWdlID0gdGhpcy5nZXRQYXRoKHRoaXMudXNlci5oaXN0b3J5W3BhZ2VDbnQgLSAxXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhZ2U7XG4gICAgfVxuICAgIFxuICAgIGdldCBjdXJyZW50UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aDtcbiAgICB9XG5cbiAgICBnZXRQcmV2aW91c1BhZ2UocGFnZU5vID0gMikge1xuICAgICAgICBsZXQgcGFnZSA9ICdob21lJztcbiAgICAgICAgbGV0IHBhZ2VDbnQgPSB0aGlzLnVzZXIuaGlzdG9yeS5sZW5ndGg7XG4gICAgICAgIGlmIChwYWdlQ250ID4gMCkge1xuICAgICAgICAgICAgcGFnZSA9IHRoaXMuZ2V0UGF0aCh0aGlzLnVzZXIuaGlzdG9yeVtwYWdlQ250IC0gcGFnZU5vXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhZ2U7XG4gICAgfVxuXG4gICAgZ2V0IHByZXZpb3VzUGFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJldmlvdXNQYWdlKDIpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRQYXRoKHBhdGgpIHtcbiAgICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgICAgIHdoaWxlIChwYXRoLnN0YXJ0c1dpdGgoJyEnKSB8fCBwYXRoLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICB9XG5cbiAgICBnZXRQYXRoKHBhdGgpIHtcbiAgICAgICAgcmV0dXJuIHJvdXRlLmdldFBhdGgocGF0aCk7XG4gICAgfVxuXG4gICAgc3RhdGljIHRvKHBhdGgpIHtcbiAgICAgICAgcGF0aCA9IHJvdXRlLmdldFBhdGgocGF0aCk7XG4gICAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgICAgICB0b2dnbGVNYWluKHRydWUsIHBhdGgpO1xuICAgICAgICAgICAgcmlvdC5yb3V0ZShgJHtwYXRofWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG8ocGF0aCkge1xuICAgICAgICByZXR1cm4gcm91dGUudG8ocGF0aCk7XG4gICAgfVxuXG4gICAgYmFjaygpIHtcbiAgICAgICAgbGV0IHBhdGggPSAnaG9tZSc7XG4gICAgICAgIGxldCBwYWdlQ250ID0gdGhpcy51c2VyLmhpc3RvcnkubGVuZ3RoO1xuICAgICAgICBpZiAocGFnZUNudCA+IDEgJiYgKHRoaXMuY3VycmVudFBhZ2UgIT0gJ215bWFwcycgfHwgdGhpcy5jdXJyZW50UGFnZSAhPSB0aGlzLnByZXZpb3VzUGFnZSkpIHtcbiAgICAgICAgICAgIHBhdGggPSB0aGlzLnByZXZpb3VzUGFnZTtcbiAgICAgICAgICAgIGxldCBiYWNrTm8gPSAyO1xuICAgICAgICAgICAgd2hpbGUgKHBhdGguc3RhcnRzV2l0aChBQ1RJT05TLkRFTEVURV9NQVApIHx8XG4gICAgICAgICAgICAgICAgcGF0aC5zdGFydHNXaXRoKEFDVElPTlMuQ09QWV9NQVApIHx8XG4gICAgICAgICAgICAgICAgcGF0aC5zdGFydHNXaXRoKEFDVElPTlMuTkVXX01BUCkpIHtcblxuICAgICAgICAgICAgICAgIGJhY2tObyArPSAxO1xuICAgICAgICAgICAgICAgIHBhdGggPSB0aGlzLmdldFByZXZpb3VzUGFnZShiYWNrTm8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnRvKHBhdGgpO1xuICAgIH1cbn1cblxuY29uc3Qgcm91dGUgPSBSb3V0ZXI7XG5cbm1vZHVsZS5leHBvcnRzID0gUm91dGVyOyIsImxldCBBdXRoMExvY2sgPSByZXF1aXJlKCdhdXRoMC1sb2NrJyk7XG5cbmNsYXNzIEF1dGgwIHtcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgbWV0YU1hcCkge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5tZXRhTWFwID0gbWV0YU1hcDtcbiAgICAgICAgdGhpcy5sb2NrID0gbmV3IEF1dGgwTG9jayhjb25maWcuYXBpLCBjb25maWcuYXBwKTtcbiAgICAgICAgdGhpcy5sb2NrLm9uKCdsb2FkaW5nIHJlYWR5JywgKC4uLmUpID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBsb2dpbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9sb2dpbikge1xuICAgICAgICAgICAgdGhpcy5fbG9naW4gPSBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHNob3dMb2dpbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NrLnNob3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2FibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9naW5BZnRlclNpZ251cDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZTogJ29wZW5pZCBvZmZsaW5lX2FjY2VzcydcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgKGVyciwgcHJvZmlsZSwgaWRfdG9rZW4sIGN0b2tlbiwgb3B0LCByZWZyZXNoX3Rva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkZhaWwoZXJyLCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGZvcmFnZS5zZXRJdGVtKCdpZF90b2tlbicsIGlkX3Rva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGZvcmFnZS5zZXRJdGVtKCdwcm9maWxlJywgcHJvZmlsZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0b2tlbiA9IHByb2ZpbGUuY3Rva2VuID0gY3Rva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaWRfdG9rZW4gPSBwcm9maWxlLmlkX3Rva2VuID0gaWRfdG9rZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9maWxlID0gcHJvZmlsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hfdG9rZW4gPSBwcm9maWxlLnJlZnJlc2hfdG9rZW4gPSByZWZyZXNoX3Rva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2dldFNlc3Npb24gPSBmdWxmaWxsKHByb2ZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTZXNzaW9uKCkudGhlbigocHJvZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChwcm9maWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dMb2dpbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzaG93TG9naW4oKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dpbjtcbiAgICB9XG5cbiAgICBsaW5rQWNjb3VudCgpIHtcbiAgICAgICAgdGhpcy5sb2NrLnNob3coe1xuICAgICAgICAgICAgY2FsbGJhY2tVUkw6IGxvY2F0aW9uLmhyZWYucmVwbGFjZShsb2NhdGlvbi5oYXNoLCAnJyksXG4gICAgICAgICAgICBkaWN0OiB7XG4gICAgICAgICAgICAgICAgc2lnbmluOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTGluayB3aXRoIGFub3RoZXIgYWNjb3VudCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXV0aFBhcmFtczoge1xuICAgICAgICAgICAgICAgIGFjY2Vzc190b2tlbjogdGhpcy5jdG9rZW5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25GYWlsKGVyciwgcmVqZWN0KSB7XG4gICAgICAgIHRoaXMubWV0YU1hcC5lcnJvcihlcnIpO1xuICAgICAgICBpZiAocmVqZWN0KSB7XG4gICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIHRoaXMubG9nb3V0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRTZXNzaW9uKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9maWxlKSB7XG4gICAgICAgICAgICB0aGlzLl9nZXRTZXNzaW9uID0gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGZ1bGZpbGwodGhpcy5wcm9maWxlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLl9nZXRTZXNzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLl9nZXRTZXNzaW9uID0gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbGZvcmFnZS5nZXRJdGVtKCdpZF90b2tlbicpLnRoZW4oKGlkX3Rva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpZF90b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jay5nZXRQcm9maWxlKGlkX3Rva2VuLCAoZXJyLCBwcm9maWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRmFpbChlcnIsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxmb3JhZ2Uuc2V0SXRlbSgnaWRfdG9rZW4nLCBpZF90b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ3Byb2ZpbGUnLCBwcm9maWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pZF90b2tlbiA9IHByb2ZpbGUuaWRfdG9rZW4gPSBpZF90b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9maWxlID0gcHJvZmlsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bGZpbGwocHJvZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcignTm8gc2Vzc2lvbicpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFNlc3Npb247XG4gICAgfVxuXG4gICAgbG9nb3V0KCkge1xuICAgICAgICBsb2NhbGZvcmFnZS5yZW1vdmVJdGVtKCdpZF90b2tlbicpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsZm9yYWdlLnJlbW92ZUl0ZW0oJ3Byb2ZpbGUnKTtcbiAgICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByb2ZpbGUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jdG9rZW4gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5pZF90b2tlbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hfdG9rZW4gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fbG9naW4gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fZ2V0U2Vzc2lvbiA9IG51bGw7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gQXV0aDA7XG5cblxuIiwiY29uc3QgdXVpZCA9IHJlcXVpcmUoJy4uL3Rvb2xzL3V1aWQuanMnKTtcbmNvbnN0IE1ldGFNYXAgPSB3aW5kb3cuTWV0YU1hcDtcblxuY2xhc3MgVXNlciB7XG4gICAgY29uc3RydWN0b3IocHJvZmlsZSwgYXV0aCwgZXZlbnRlciwgbWV0YUZpcmUpIHtcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcbiAgICAgICAgdGhpcy5ldmVudGVyID0gZXZlbnRlcjtcbiAgICAgICAgdGhpcy5tZXRhRmlyZSA9IG1ldGFGaXJlO1xuICAgICAgICB0aGlzLnBhcmFtcyA9IFVSSSh3aW5kb3cubG9jYXRpb24pLnF1ZXJ5KHRydWUpO1xuICAgICAgICB0aGlzLnRoaW5rcXVlcnkgPSAodGhpcy5wYXJhbXMudGhpbmtxdWVyeSA/IHRydWUgOiBmYWxzZSk7XG4gICAgICAgIHRoaXMudXNlcktleSA9IHV1aWQoKTtcbiAgICAgICAgdGhpcy5vblJlYWR5KCk7XG4gICAgfVxuXG4gICAgb25SZWFkeSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9vblJlYWR5KSB7XG4gICAgICAgICAgICBsZXQgdHJhY2tIaXN0b3J5ID0gXy5vbmNlKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50ZXIuZXZlcnkoJ2hpc3RvcnknLCAocGFnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oaXN0b3J5Lmxlbmd0aCA9PSAwIHx8IHBhZ2UgIT0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggLSAxXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gocGFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1ldGFGaXJlLnNldERhdGEodGhpcy5oaXN0b3J5LCBgdXNlcnMvJHt0aGlzLmF1dGgudWlkfS9oaXN0b3J5YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fb25SZWFkeSA9IG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1ldGFGaXJlLm9uKGB1c2Vycy8ke3RoaXMuYXV0aC51aWR9YCwgKHVzZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdXNlci5oaXN0b3J5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlci5oaXN0b3J5ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2ZpbGUgPSB1c2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tIaXN0b3J5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKHVzZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9vblJlYWR5O1xuICAgIH1cblxuICAgIGdldCBkaXNwbGF5TmFtZSgpIHtcbiAgICAgICAgbGV0IHJldCA9IHRoaXMuZnVsbE5hbWU7XG4gICAgICAgIGlmICh0aGlzLnByb2ZpbGUgJiYgdGhpcy5wcm9maWxlLmlkZW50aXR5KSB7XG4gICAgICAgICAgICBpZiAocmV0KSB7XG4gICAgICAgICAgICAgICAgcmV0ID0gcmV0LnNwbGl0KCcgJylbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJldCkge1xuICAgICAgICAgICAgICAgIHJldCA9IHRoaXMucHJvZmlsZS5pZGVudGl0eS5uaWNrbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIFxuICAgIGdldCBmdWxsTmFtZSgpIHtcbiAgICAgICAgbGV0IHJldCA9ICcnO1xuICAgICAgICBpZiAodGhpcy5wcm9maWxlICYmIHRoaXMucHJvZmlsZS5pZGVudGl0eSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvZmlsZS5pZGVudGl0eS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0ID0gdGhpcy5wcm9maWxlLmlkZW50aXR5Lm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICBnZXQgcGljdHVyZSgpIHtcbiAgICAgICAgbGV0IHJldCA9ICcnO1xuICAgICAgICBpZiAodGhpcy5wcm9maWxlICYmIHRoaXMucHJvZmlsZS5pZGVudGl0eSkge1xuICAgICAgICAgICAgcmV0ID0gdGhpcy5wcm9maWxlLmlkZW50aXR5LnBpY3R1cmU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICBnZXQgdXNlcklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdXRoLnVpZDtcbiAgICB9XG5cbiAgICBnZXQgaXNBZG1pbigpIHtcbiAgICAgICAgbGV0IHJldCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5wcm9maWxlICYmIHRoaXMucHJvZmlsZS5pZGVudGl0eSkge1xuICAgICAgICAgICAgcmV0ID0gdGhpcy5wcm9maWxlLmlkZW50aXR5LnJvbGVzLmluZGV4T2YoJ2FkbWluJykgIT09IC0xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgZ2V0IGhpc3RvcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2ZpbGUuaGlzdG9yeSB8fCBbXTtcbiAgICB9XG4gICAgc2F2ZVVzZXJFZGl0b3JPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGRhdGEgPSB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgICAgZWRpdG9yX29wdGlvbnM6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFVzZXI7IiwiLy8gZnVuY3Rpb25zIGhhbmRsaW5nIGFuYWx5dGljc1xuLy8gYW5hbHl0aWNzIGRpc3BsYXkgaXMgaW4gdmlld3MvbWFwcy9fYW5hbHl0aWNzX3RhYl9tYXAgYW5kIF9hbmFseXRpY3NfdGFiX3RoaW5nXG5TYW5kYmFua0VkaXRvci5BbmFseXRpY3MgPSBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgbWFwKSB7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgfTtcblxuICAgIHRoaXMuaGFuZGxlRGlhZ3JhbUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZSkge1xuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xuICAgICAgICAgICAgaWYgKG1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfQU5BTFlUSUNTX1RISU5HKSkge1xuICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlQ29udGV4dHVhbEFuYWx5dGljcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcbiAgICB0aGlzLmN1cnJlbnRUYWJDaGFuZ2VkID0gZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfQU5BTFlUSUNTX1RISU5HKSB7IC8vIG9wZW5pbmcgdGhpbmcgYW5hbHl0aWNzIHRhYlxuICAgICAgICAgICAgc2VsZi51cGRhdGVDb250ZXh0dWFsQW5hbHl0aWNzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gdGhpcyBnZXRzIHBvcHVsYXRlZCBieSBtYXAubG9hZE1hcEV4dHJhRGF0YSwgb24gbG9hZCBhbmQgYWZ0ZXIgZXZlcnkgYXV0b3NhdmVcbiAgICB0aGlzLm1hcEFuYWx5dGljcyA9IG51bGw7XG5cbiAgICAvLyAtLS0tLS0tLS0gY29udGV4dHVhbCBhbmFseXRpY3MgLS0tLS0tLS0tLS0tLS1cbiAgICAvLyAtIHRoZXNlIGFyZSBhbGwgY2FsY3VsYXRlZCBoZXJlLCB1bmxpa2UgbWFwIGFuYWx5dGljcyB3aGljaCBhcmUgY2FsY3VsYXRlZCBvbiB0aGUgc2VydmVyIGFuZCBjb25uZWN0ZWQgd2l0aCBiYWRnZXMgYW5kIHBvaW50c1xuXG4gICAgLy8gdGhpcyBnZXRzIGNhbGN1bGF0ZWQgYnkgdXBkYXRlQ29udGV4dHVhbEFuYWx5dGljc1xuICAgIHRoaXMuY29udGV4dHVhbEFuYWx5dGljcyA9IHtcbiAgICAgICAgdGhpbmdOYW1lOiAnJyxcblxuICAgICAgICAvLyB0aGluZyBzdHVmZlxuICAgICAgICBkaXN0aW5jdEZyb206IDAsXG4gICAgICAgIGludGVudGlvbmFsbHlEaXN0aW5jdEZyb206IDAsXG4gICAgICAgIHBhcnRPZjogMCxcbiAgICAgICAgaW5jbHVkZXNQYXJ0czogMCxcbiAgICAgICAgcmVsYXRlZFRvOiAwLFxuICAgICAgICBpc1JlbGF0aW9uc2hpcDogMCxcbiAgICAgICAgbG9va2luZ0F0OiAwLFxuICAgICAgICBsb29rZWRBdEZyb206IDAsXG5cbiAgICAgICAgLy8gUiBzdHVmZlxuICAgICAgICByRnJvbVRoaW5nTmFtZTogJycsXG4gICAgICAgIHJUb1RoaW5nTmFtZTogJycsXG4gICAgICAgIGlzUlRoaW5nOiBmYWxzZSxcbiAgICAgICAgaXNSU3lzdGVtOiBmYWxzZSxcbiAgICAgICAgaXNSUG9pbnQ6IGZhbHNlLFxuICAgICAgICBpc1JWaWV3OiBmYWxzZVxuICAgIH07XG5cbiAgICB0aGlzLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ3VwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MnKTtcbiAgICAgICAgaWYgKCFtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX0FOQUxZVElDU19USElORykpIHtcbiAgICAgICAgICAgIHJldHVybiA7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgIHZhciBwYXJ0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKTtcbiAgICAgICAgdmFyIGEgPSBzZWxmLmNvbnRleHR1YWxBbmFseXRpY3M7XG5cbiAgICAgICAgaWYgKHBhcnQgJiYgcGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XG4gICAgICAgICAgICB2YXIgdGhpbmcgPSBwYXJ0O1xuXG4gICAgICAgICAgICAvLyB0aGluZyBuYW1lXG4gICAgICAgICAgICBhLnRoaW5nTmFtZSA9IHRoaW5nLmRhdGEudGV4dDtcblxuICAgICAgICAgICAgLy8gZGlzdGluY3QgZnJvbVxuICAgICAgICAgICAgYS5kaXN0aW5jdEZyb20gPSBfLndoZXJlKGRpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheSwge2lzR3JvdXA6IHRydWV9KS5sZW5ndGggLSAxO1xuXG4gICAgICAgICAgICAvLyBwYXJ0IG9mXG4gICAgICAgICAgICB2YXIgbGV2ZWwgPSAwO1xuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IHRoaW5nO1xuICAgICAgICAgICAgd2hpbGUgKHRoaW5nMiA9IGdldENvbnRhaW5pbmdHcm91cCh0aGluZzIpKSB7XG4gICAgICAgICAgICAgICAgbGV2ZWwrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGEucGFydE9mID0gbGV2ZWw7XG5cbiAgICAgICAgICAgIC8vIGluY2x1ZGVzIHBhcnRzXG4gICAgICAgICAgICBhLmluY2x1ZGVzUGFydHMgPSBjb3VudEdyb3Vwcyh0aGluZyk7XG5cbiAgICAgICAgICAgIC8vIHJlbGF0ZWQgdG8gLyBsb29raW5nIGF0IC8gbG9va2VkIGF0IGZyb20gLyBpbnRlbnRpb25hbGx5IGRpc3RpbmN0IGZyb21cbiAgICAgICAgICAgIGEucmVsYXRlZFRvID0gMDtcbiAgICAgICAgICAgIGEubG9va2luZ0F0ID0gMDtcbiAgICAgICAgICAgIGEubG9va2VkQXRGcm9tID0gMDtcbiAgICAgICAgICAgIGEuaW50ZW50aW9uYWxseURpc3RpbmN0RnJvbSA9IDA7XG4gICAgICAgICAgICB2YXIgbGlua3MgPSB0aGluZy5saW5rc0Nvbm5lY3RlZDtcbiAgICAgICAgICAgIHZhciByQ29ubmVjdGVkVGhpbmdLZXlzID0gW107XG4gICAgICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcbiAgICAgICAgICAgICAgICAvLyBQIGxpbmtcbiAgICAgICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGluay5mcm9tTm9kZSA9PSB0aGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYS5sb29raW5nQXQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsaW5rLnRvTm9kZSA9PSB0aGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYS5sb29rZWRBdEZyb20rKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBEIGxpbmtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ0QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGEuaW50ZW50aW9uYWxseURpc3RpbmN0RnJvbSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBSIGxpbmtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghbGluay5kYXRhLmNhdGVnb3J5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRyYWNrIGtleXMgb2YgcmVsYXRlZCB0aGluZ3Mgc28gd2UgZG9uJ3QgY291bnQgdGhlbSBtdWx0aXBsZSB0aW1lc1xuICAgICAgICAgICAgICAgICAgICBpZiAobGluay5mcm9tTm9kZSA9PSB0aGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgckNvbm5lY3RlZFRoaW5nS2V5cy5wdXNoKGxpbmsudG9Ob2RlLmRhdGEua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsaW5rLnRvTm9kZSA9PSB0aGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgckNvbm5lY3RlZFRoaW5nS2V5cy5wdXNoKGxpbmsuZnJvbU5vZGUuZGF0YS5rZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYS5yZWxhdGVkVG8gPSBfLnVuaXEockNvbm5lY3RlZFRoaW5nS2V5cykubGVuZ3RoO1xuXG4gICAgICAgICAgICAvLyBpc1JlbGF0aW9uc2hpcFxuICAgICAgICAgICAgYS5pc1JlbGF0aW9uc2hpcCA9IHRoaW5nLmlzTGlua0xhYmVsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhcnQgJiYgcGFydCBpbnN0YW5jZW9mIGdvLkxpbmspIHtcbiAgICAgICAgICAgIHZhciByZWwgPSBwYXJ0O1xuXG4gICAgICAgICAgICAvLyB0aGluZyBuYW1lc1xuICAgICAgICAgICAgYS5yRnJvbVRoaW5nTmFtZSA9IHJlbC5mcm9tTm9kZS5kYXRhLnRleHQ7XG4gICAgICAgICAgICBhLnJUb1RoaW5nTmFtZSA9IHJlbC50b05vZGUuZGF0YS50ZXh0O1xuXG4gICAgICAgICAgICAvLyBpcyBSIHRoaW5nXG4gICAgICAgICAgICBhLmlzUlRoaW5nID0gcmVsLmlzTGFiZWxlZExpbms7XG5cbiAgICAgICAgICAgIC8vIGlzIFIgc3lzdGVtXG4gICAgICAgICAgICBhLmlzUlN5c3RlbSA9IHJlbC5pc0xhYmVsZWRMaW5rICYmIGNvdW50R3JvdXBzKHJlbC5sYWJlbE5vZGVzLmZpcnN0KCkpID4gMDtcblxuICAgICAgICAgICAgLy8gaXMgUiBwb2ludFxuICAgICAgICAgICAgYS5pc1JQb2ludCA9IHJlbC5pc0xhYmVsZWRMaW5rICYmIGlzUG9pbnQocmVsLmxhYmVsTm9kZXMuZmlyc3QoKSk7XG5cbiAgICAgICAgICAgIC8vIGlzIFIgdmlld1xuICAgICAgICAgICAgYS5pc1JWaWV3ID0gcmVsLmlzTGFiZWxlZExpbmsgJiYgaXNWaWV3KHJlbC5sYWJlbE5vZGVzLmZpcnN0KCkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIHJldHVybnMgZWl0aGVyIHRoZSBjb250YWluaW5nR3JvdXAgb3IgdGhlIHJUaGluZ0NvbnRhaW5pbmdHcm91cCwgd2hpY2hldmVyIGlzIG5vbi1udWxsXG4gICAgZnVuY3Rpb24gZ2V0Q29udGFpbmluZ0dyb3VwKGdyb3VwKSB7XG4gICAgICAgIHJldHVybiBncm91cC5jb250YWluaW5nR3JvdXAgfHwgZ2V0UlRoaW5nQ29udGFpbmluZ0dyb3VwKGdyb3VwKTtcbiAgICB9XG5cbiAgICAvLyBpZiBncm91cCBpcyBhbiBSLXRoaW5nIGJldHdlZW4gdHdvIHNpYmxpbmcgcGFydHMgb2YgYSB3aG9sZSwgcmV0dXJucyB0aGUgd2hvbGU7IGVsc2UgcmV0dXJucyBudWxsXG4gICAgZnVuY3Rpb24gZ2V0UlRoaW5nQ29udGFpbmluZ0dyb3VwKGdyb3VwKSB7XG4gICAgICAgIGlmIChncm91cC5pc0xpbmtMYWJlbCkge1xuICAgICAgICAgICAgdmFyIGZyb21QYXJlbnQgPSBncm91cC5sYWJlbGVkTGluay5mcm9tTm9kZS5jb250YWluaW5nR3JvdXA7XG4gICAgICAgICAgICB2YXIgdG9QYXJlbnQgPSBncm91cC5sYWJlbGVkTGluay50b05vZGUuY29udGFpbmluZ0dyb3VwO1xuICAgICAgICAgICAgaWYgKGZyb21QYXJlbnQgIT09IG51bGwgJiYgdG9QYXJlbnQgIT09IG51bGwgJiYgZnJvbVBhcmVudCA9PSB0b1BhcmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tUGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIGNvdW50cyB0aGUgbWVtYmVyIHBhcnRzIG9mIHRoZSBncm91cCB0aGF0IGFyZSBncm91cHMsIHJlY3Vyc2l2ZWx5IChub3QgaW5jbHVkaW5nIHRoZSBncm91cCBpdHNlbGYpXG4gICAgZnVuY3Rpb24gY291bnRHcm91cHMoZ3JvdXApIHtcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgdmFyIGl0ID0gZ2V0TWVtYmVyR3JvdXBzKGdyb3VwKS5pdGVyYXRvcjtcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xuICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcbiAgICAgICAgICAgIGNvdW50ICs9IDEgKyBjb3VudEdyb3VwcyhwYXJ0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG5cbiAgICAvLyByZXR1cm5zIHRoZSBjb2xsZWN0aW9uIG9mIGdyb3VwcyB0aGF0IGFyZSBlaXRoZXIgYSBtZW1iZXJQYXJ0IG9mIHRoaXMgZ3JvdXAsIG9yIGFuIFItdGhpbmcgYmV0d2VlbiBzaWJsaW5nIG1lbWJlclBhcnRzXG4gICAgZnVuY3Rpb24gZ2V0TWVtYmVyR3JvdXBzKGdyb3VwKSB7XG4gICAgICAgIHZhciBtZW1iZXJzID0gbmV3IGdvLkxpc3QoKTtcbiAgICAgICAgdmFyIGl0ID0gZ3JvdXAubWVtYmVyUGFydHM7XG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gaXQudmFsdWU7XG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XG4gICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocGFydCk7XG4gICAgICAgICAgICAgICAgdmFyIHJ0aGluZyA9IGdldFJUaGluZ1RvU2libGluZyhwYXJ0KTsgLy8gTkI6IHNob3VsZCBub3QgZ2V0IGR1cGxpY2F0aW9uIGhlcmUsIGFzIHRoaXMgY2hlY2tzIGZvciByLXRoaW5ncyBpbiBvbmx5IG9uZSBkaXJlY3Rpb25cbiAgICAgICAgICAgICAgICBpZiAocnRoaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcnMuYWRkKHJ0aGluZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZW1iZXJzO1xuICAgIH1cblxuICAgIC8vIGlmIHRoZSBncm91cCBpcyBsaW5rZWQgYnkgYW4gUi10aGluZyB0byBhIHNpYmxpbmcgKHdpdGggdGhlIGdyb3VwIGFzIHRoZSBmcm9tTm9kZSksIHJldHVybnMgdGhlIFItdGhpbmc7IGVsc2UgcmV0dXJucyBudWxsXG4gICAgZnVuY3Rpb24gZ2V0UlRoaW5nVG9TaWJsaW5nKGdyb3VwKSB7XG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBsaW5rID0gaXQudmFsdWU7XG4gICAgICAgICAgICBpZiAobGluay5sYWJlbE5vZGVzLmNvdW50ID4gMCAmJiBsaW5rLnRvTm9kZS5jb250YWluaW5nR3JvdXAgPT0gZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmsubGFiZWxOb2Rlcy5maXJzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzUG9pbnQoZ3JvdXApIHtcbiAgICAgICAgdmFyIGl0ID0gZ3JvdXAuZmluZExpbmtzT3V0T2YoKTtcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xuICAgICAgICAgICAgdmFyIGxpbmsgPSBpdC52YWx1ZTtcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzVmlldyhncm91cCkge1xuICAgICAgICB2YXIgaXQgPSBncm91cC5maW5kTGlua3NJbnRvKCk7XG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBsaW5rID0gaXQudmFsdWU7XG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59OyIsIi8vIGZ1bmN0aW9ucyBoYW5kbGluZyBhdHRhY2htZW50c1xuXG5TYW5kYmFua0VkaXRvci5BdHRhY2htZW50cyA9IGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkcmVzb3VyY2UsIG1hcCkge1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdGhpcy5zZWxlY3RlZFRoaW5nID0gbnVsbDtcbiAgICB0aGlzLmF0dGFjaG1lbnRzID0gbnVsbDtcblxuICAgIHRoaXMuYXR0YWNobWVudFR5cGVzID0gW1xuICAgICAgICB7bmFtZTogJ25vdGUnLCBsYWJlbFNpbmd1bGFyOiAnTm90ZScsIGxhYmVsUGx1cmFsOiAnTm90ZXMnfSwgXG4gICAgICAgIHtuYW1lOiAnbGluaycsIGxhYmVsU2luZ3VsYXI6ICdXZWIgTGluaycsIGxhYmVsUGx1cmFsOiAnV2ViIExpbmtzJ30sIFxuICAgICAgICB7bmFtZTogJ3Rhc2snLCBsYWJlbFNpbmd1bGFyOiAnVGFzaycsIGxhYmVsUGx1cmFsOiAnVGFza3MnfSwgXG4gICAgICAgIHtuYW1lOiAnbWFwJywgbGFiZWxTaW5ndWxhcjogJ0xpbmtlZCBNZXRhTWFwJywgbGFiZWxQbHVyYWw6ICdMaW5rZWQgTWV0YU1hcHMnfVxuLy8gICAgICAgIHtuYW1lOiAnZG9jJywgbGFiZWxTaW5ndWxhcjogJ0RvY3VtZW50JywgbGFiZWxQbHVyYWw6ICdEb2N1bWVudHMnfSAgLy8gbGltaXQgb3ZlcmFsbCBzdG9yYWdlIHNwYWNlIE9SIHNpbXBsZXIgcnVsZXM/XG4gICAgICAgIC8vIGxpbWl0IGZpbGUgdHlwZXMgLSBwZGYsIGpwZywgZ2lmLCBwbmcsIG9mZmljZT8uLi4gIHdoaXRlbGlzdCB2cy4gYmxhY2tsaXN0XG4gICAgXTtcblxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB9O1xuXG4gICAgdGhpcy5oYW5kbGVEaWFncmFtRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBlKSB7XG4gICAgICAgIGlmIChldmVudE5hbWUgPT0gJ0NoYW5nZWRTZWxlY3Rpb24nKSB7XG4gICAgICAgICAgICBpZiAobWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9BVFRBQ0hNRU5UUykpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnN0b3BFZGl0aW5nQWxsKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5zYXZlQXR0YWNobWVudHMoKTtcbiAgICAgICAgICAgICAgICBzZWxmLmxvYWRTZWxlY3RlZFRoaW5nQXR0YWNobWVudHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBjYWxsZWQgd2hlbiBhIHRhYiBpcyBvcGVuZWQgb3IgY2xvc2VkXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX0FUVEFDSE1FTlRTKSB7IC8vIG9wZW5pbmcgdGFiXG4gICAgICAgICAgICBzZWxmLmxvYWRTZWxlY3RlZFRoaW5nQXR0YWNobWVudHMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2xkVmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX0FUVEFDSE1FTlRTKSB7IC8vIGNsb3NpbmcgdGFiXG4gICAgICAgICAgICBzZWxmLnNhdmVBdHRhY2htZW50cygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubG9hZFNlbGVjdGVkVGhpbmdBdHRhY2htZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKG1hcC50aGluZ1NlbGVjdGVkKCkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGhpbmcgPSBtYXAuZ2V0VW5pcXVlVGhpbmdTZWxlY3RlZCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMgPSBzZWxmLnNlbGVjdGVkVGhpbmcuZGF0YS5hdHRhY2htZW50cztcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5hdHRhY2htZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBzZXQgYWxsIGF0dGFjaG1lbnRzIHRvIGVkaXRpbmcgPSBmYWxzZVxuICAgIHRoaXMuc3RvcEVkaXRpbmdBbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmF0dGFjaG1lbnRzKSB7XG4gICAgICAgICAgICAgICAgXy5lYWNoKHNlbGYuYXR0YWNobWVudHMsIGZ1bmN0aW9uIChhdHQpIHsgYXR0LmVkaXRpbmcgPSBmYWxzZTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmVkaXRpbmdBbkl0ZW0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuYXR0YWNobWVudHMgJiYgXy5maW5kV2hlcmUoc2VsZi5hdHRhY2htZW50cywge2VkaXRpbmc6IHRydWV9KSAhPT0gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICAvLyBzZXQgYWxsIG90aGVyIGF0dGFjaG1lbnRzIHRvIGVkaXRpbmcgPSBmYWxzZVxuICAgIHRoaXMuc3RhcnRFZGl0aW5nID0gZnVuY3Rpb24oYXR0YWNobWVudCkge1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5zdG9wRWRpdGluZ0FsbCgpO1xuICAgICAgICAgICAgYXR0YWNobWVudC5lZGl0aW5nID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMuc2F2ZUl0ZW0gPSBmdW5jdGlvbihhdHRhY2htZW50KSB7XG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhdHRhY2htZW50LmVkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHNlbGYuc2F2ZUF0dGFjaG1lbnRzKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLnNhdmVBdHRhY2htZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc2F2ZUF0dGFjaG1lbnRzLCBzZWxlY3RlZDogJyArIHNlbGYuc2VsZWN0ZWRUaGluZyk7XG4gICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZFRoaW5nKSB7XG4gICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2VsZi5zZWxlY3RlZFRoaW5nLmRhdGEsICdhdHRhY2htZW50cycsIHNlbGYuYXR0YWNobWVudHMpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUaGluZy51cGRhdGVUYXJnZXRCaW5kaW5ncygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFwLmdldEF1dG9zYXZlKCkuc2F2ZU5vdygnZWRpdF9hdHRhY2htZW50cycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5saXN0QXR0YWNobWVudHMgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICB2YXIgYXR0cyA9IF8ud2hlcmUoc2VsZi5hdHRhY2htZW50cywge3R5cGU6IHR5cGV9KTtcbiAgICAgICAgcmV0dXJuIGF0dHM7XG4gICAgfTtcblxuICAgIHRoaXMuYWRkQXR0YWNobWVudCA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIHZhciBpdGVtID0geyB0eXBlOiB0eXBlLCBlZGl0aW5nOiB0cnVlIH07XG4gICAgICAgIGlmICh0eXBlID09ICdub3RlJykge1xuICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgdGV4dDogJycsIHVybDogJycgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gJ2xpbmsnKSB7XG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyBsYWJlbDogJycsIHVybDogJycgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gJ3Rhc2snKSB7XG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyB0ZXh0OiAnJyB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAnZG9jJykge1xuICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgbmFtZTogJycgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gJ21hcCcpIHtcbiAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMucHVzaChfLmV4dGVuZChpdGVtLCB7IG1hcFJlZjogeyBpZDogMCwgbmFtZTogJycgIH0gfSkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaXNWYWxpZCA9IGZ1bmN0aW9uKGF0dGFjaG1lbnQpIHtcbiAgICAgICAgaWYgKGF0dGFjaG1lbnQudHlwZSA9PSAnbGluaycpIHtcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LmxhYmVsICYmIGF0dGFjaG1lbnQudXJsICYmIGF0dGFjaG1lbnQubGFiZWwudHJpbSgpICE9PSAnJyAmJiBhdHRhY2htZW50LnVybC50cmltKCkgIT09ICcnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PSAnbm90ZScpIHtcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LnRleHQgJiYgYXR0YWNobWVudC50ZXh0LnRyaW0oKSAhPT0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYXR0YWNobWVudC50eXBlID09ICd0YXNrJykge1xuICAgICAgICAgICAgcmV0dXJuIGF0dGFjaG1lbnQudGV4dCAmJiBhdHRhY2htZW50LnRleHQudHJpbSgpICE9PSAnJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhdHRhY2htZW50LnR5cGUgPT0gJ2RvYycpIHtcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50Lm5hbWUgJiYgYXR0YWNobWVudC5uYW1lLnRyaW0oKSAhPT0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYXR0YWNobWVudC50eXBlID09ICdtYXAnKSB7XG4gICAgICAgICAgICByZXR1cm4gYXR0YWNobWVudC5tYXBSZWYgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IG51bGwgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmRlbGV0ZUF0dGFjaG1lbnQgPSBmdW5jdGlvbiAoYXR0KSB7XG4gICAgICAgIHZhciB0eXBlTGFiZWwgPSBfLmZpbmRXaGVyZShzZWxmLmF0dGFjaG1lbnRUeXBlcywgeyBuYW1lOiBhdHQudHlwZSB9KS5sYWJlbFNpbmd1bGFyO1xuICAgICAgICBpZiAoY29uZmlybSAoJ0RlbGV0ZSAnICsgdHlwZUxhYmVsICsgJz8nKSkge1xuICAgICAgICAgICAgdmFyIGkgPSBfLmluZGV4T2Yoc2VsZi5hdHRhY2htZW50cywgYXR0KTtcbiAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMuc3BsaWNlKGksIDEpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIHF1ZXJ5IHNlcnZlciBmb3IgbWFwcyBjb250YWluaW5nIHRoZSBnaXZlbiB0ZXh0IGluIHRoZSBtYXAgbmFtZVxuICAgIHRoaXMuZ2V0T3RoZXJNYXBzID0gZnVuY3Rpb24odmlld1ZhbHVlKSB7XG4gICAgICAgIC8vIE5COiB0aGlzIFVSTCBpcyBjb25zdHJ1Y3RlZCB0byBtYXRjaCB0aGUgb25lIGdlbmVyYXRlZCBieSB0aGUgc2VhcmNoIGZvcm0gb24gdGhlIG1hcHMgcGFnZS4uLlxuICAgICAgICB2YXIgdXJsID0gJy9tYXBzL3Zpc2libGVfbWFwcy5qc29uP3V0Zjg9JUUyJTlDJTkzJnElNUJuYW1lX2NvbnQlNUQ9JyArIHZpZXdWYWx1ZTtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLm1hcHM7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLm90aGVyTWFwU2VsZWN0ZWQgPSBmdW5jdGlvbih2aWV3VmFsdWUsIG1vZGVsVmFsdWUpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnb3RoZXJNYXBTZWxlY3RlZCwgdmlld1ZhbHVlOiAnICsgdmlld1ZhbHVlLmlkICsgJywgbW9kZWxWYWx1ZTogJyArIG1vZGVsVmFsdWUpO1xuICAgIH07XG5cbiAgICB0aGlzLmZvcm1hdE90aGVyTWFwID0gZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgICAgIHJldHVybiAobW9kZWwgPyBtb2RlbC5uYW1lIDogJycpO1xuICAgIH07XG5cbn07IiwiLy8gZnVuY3Rpb25zIGhhbmRsaW5nIGVkaXRvciBhdXRvc2F2ZSBmdW5jdGlvblxuXG5TYW5kYmFua0VkaXRvci5BdXRvc2F2ZSA9IGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIG1hcCkge1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIGNoYW5nZVR5cGVzID0gW107XG5cbiAgICB0aGlzLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IHRydWU7XG5cbiAgICAvLyBkbyBhIHNhdmUgbmV4dCB0aW1lIHRoZSBzZXQgaW50ZXJ2YWwgcGFzc2VzIHdpdGggbm8gc2F2ZSByZXF1ZXN0c1xuICAgIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uKGNoYW5nZVR5cGUpIHtcbiAgICAgICAgY2hhbmdlVHlwZXMucHVzaChjaGFuZ2VUeXBlKTtcbiAgICAgICAgZGVsYXllZEF1dG9zYXZlKCk7XG4gICAgfTtcblxuICAgIC8vIGRvIGEgc2F2ZSByaWdodCBub3dcbiAgICB0aGlzLnNhdmVOb3cgPSBmdW5jdGlvbihjaGFuZ2VUeXBlKSB7XG4gICAgICAgIGNoYW5nZVR5cGVzLnB1c2goY2hhbmdlVHlwZSk7XG4gICAgICAgIGF1dG9zYXZlKCk7XG4gICAgfTtcblxuICAgIC8vIGRvbid0IGxldCBhdXRvc2F2ZSBiZSB0cmlnZ2VyZWQgbW9yZSB0aGFuIGV2ZXJ5IE4gbWlsbGlzZWNvbmRzLi4uXG4gICAgdmFyIGRlbGF5ZWRBdXRvc2F2ZSA9IF8uZGVib3VuY2UoYXV0b3NhdmUsIDIwMDApO1xuXG4gICAgLy8gY29tcGlsZSB0aGUgY3VycmVudCBsaXN0IG9mIGNoYW5nZSB0eXBlIGRlc2NyaXB0aW9ucywgcHJvY2VzcyB0aGVtIFxuICAgIC8vIHRvIHJlbW92ZSBkdXBsaWNhdGVzLCBhbmQgc2F2ZSB0aGUgY3VycmVudCBkYXRhXG4gICAgZnVuY3Rpb24gYXV0b3NhdmUoKSB7XG4gICAgICAgIC8vIHN0b3AgcmlnaHQgaGVyZSBpZiB3ZSdyZSBpbiB0aGUgc2FuZGJveCBhbmQvb3Igd2UgZG9uJ3QgaGF2ZSBlZGl0IHBlcm1pc3Npb25zXG4gICAgICAgIGlmICgkc2NvcGUuc2FuZGJveCB8fCAhJHNjb3BlLmNhbkVkaXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY2hhbmdlVHlwZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdhdXRvc2F2ZTogbm90aGluZyB0byBzYXZlIScpOyAvLyBzaG91bGRuJ3QgaGFwcGVuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkZS1kdXBlIHRoZSBsaXN0IG9mIGNoYW5nZSB0eXBlc1xuICAgICAgICB2YXIgY2hhbmdlTGlzdCA9IF8udW5pcShjaGFuZ2VUeXBlcyk7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NoYW5nZUxpc3Q6ICcgKyBjaGFuZ2VMaXN0KTtcbiAgICAgICAgLy8gZG9uJ3Qgc2hvdyBtb3ZlIGV2ZW50cyB1bmxlc3MgdGhhdCdzIGFsbCB3ZSBoYXZlXG4gICAgICAgIHZhciBjaGFuZ2VMaXN0V2l0aG91dE1vdmVzID0gXy53aXRob3V0KGNoYW5nZUxpc3QsICdtb3ZlJyk7XG4gICAgICAgIGlmIChjaGFuZ2VMaXN0V2l0aG91dE1vdmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNoYW5nZUxpc3QgPSBjaGFuZ2VMaXN0V2l0aG91dE1vdmVzO1xuICAgICAgICB9XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NoYW5nZUxpc3Qgd2l0aG91dCBtb3ZlczogJyArIGNoYW5nZUxpc3QpO1xuICAgICAgICAvLyBnZXQgZGVzY3JpcHRpb25zXG4gICAgICAgIHZhciBkZXNjcmlwdGlvbkxpc3QgPSBfLm1hcChjaGFuZ2VMaXN0LCBmdW5jdGlvbihjdCkge1xuICAgICAgICAgICAgcmV0dXJuIF8ucmVzdWx0KGNoYW5nZURlc2NyaXB0aW9ucywgY3QpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL2NvbnNvbGUubG9nKCdhdXRvc2F2ZSwgY2hhbmdlTGlzdDogJyArIGNoYW5nZUxpc3QgKyAnLCBkZXNjcmlwdGlvbkxpc3Q6ICcgKyBkZXNjcmlwdGlvbkxpc3QpO1xuICAgICAgICB2YXIgcG9zdERhdGEgPSB7XG4gICAgICAgICAgICBkYXRhOiBKU09OLnBhcnNlKG1hcC5nZXREaWFncmFtKCkubW9kZWwudG9Kc29uKCkpLFxuICAgICAgICAgICAgc3RhdGVfZGF0YTogbWFwLmdldFVpKCkuZ2V0U3RhdGVEYXRhKCksXG4gICAgICAgICAgICBlZGl0b3Jfb3B0aW9uczogbWFwLmdldFVpKCkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLFxuICAgICAgICAgICAgcHJlc2VudGVyX3NsaWRlczogbWFwLmdldFByZXNlbnRlcigpLmdldFNsaWRlQ291bnQoKSxcbiAgICAgICAgICAgIGFjdGl2aXR5X3NsaWRlczogbWFwLmdldFByZXNlbnRlcigpLmdldEFjdGl2aXR5U2xpZGVDb3VudCgpLFxuICAgICAgICAgICAgY2hhbmdlX3R5cGU6IGNoYW5nZUxpc3Quam9pbignOycpLFxuICAgICAgICAgICAgY2hhbmdlX2Rlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbkxpc3Quam9pbignOyAnKSxcbiAgICAgICAgICAgIHRodW1ibmFpbF9wbmc6IG1hcC5nZXRQcmVzZW50ZXIoKS5nZXRNYXBUaHVtYm5haWwoKSxcbiAgICAgICAgICAgIGNoYW5nZWRfYnk6IE1ldGFNYXAuVXNlci51c2VyS2V5XG4gICAgICAgIH07XG4gICAgICAgIHZhciB1cmwgPSAkc2NvcGUubWFwVXJsICsgJy5qc29uJztcblxuICAgICAgICAkc2NvcGUudXBkYXRlRWRpdFN0YXR1cygkc2NvcGUuU0FWSU5HKTtcblxuICAgICAgICBjaGFuZ2VUeXBlcyA9IFtdO1xuICAgICAgICAkc2NvcGUudXBkYXRlRWRpdFN0YXR1cygkc2NvcGUuU0FWRV9PSyk7XG4gICAgICAgIC8vIGxvYWQgcmV0dXJuZWQgZGF0YSBmb3IgYW5hbHl0aWNzLCBwb2ludHMsIGJhZGdlcywgdmVyc2lvbnNcbiAgICAgICAgLy8gJHNjb3BlLm1hcC5sb2FkTWFwRXh0cmFEYXRhKHJlc3BvbnNlLmRhdGEubWFwKTtcbiAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5zZXREYXRhSW5UcmFuc2FjdGlvbihwb3N0RGF0YSwgYG1hcHMvZGF0YS8keyRzY29wZS5tYXBJZH1gKTtcbiAgICB9XG5cblxuLy8gLS0tLS0tLS0tLS0tLS0gaGFuZGxlIG1vZGVsIGNoYW5nZXMgLSB0cmlnZ2VyIGF1dG9zYXZlIC0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgdmFyIGNoYW5nZURlc2NyaXB0aW9ucyA9IHtcbiAgICAgICAgbW92ZTogJ01vdmVkIE9iamVjdHMnLFxuICAgICAgICB1bmRvX3JlZG86ICdQZXJmb3JtZWQgVW5kby9SZWRvJyxcbiAgICAgICAgZWRpdF90aXRsZTogJ0VkaXRlZCBNZXRhTWFwIFRpdGxlJyxcbiAgICAgICAgZWRpdF9kZXNjcmlwdGlvbjogJ0VkaXRlZCBNZXRhTWFwIERlc2NyaXB0aW9uJyxcbiAgICAgICAgZWRpdF91c2VydGFnczogJ0VkaXQgTWV0YU1hcCBUYWdzJyxcbiAgICAgICAgZWRpdF9kOiAnRWRpdGVkIERpc3RpbmN0aW9ucycsXG4gICAgICAgIGVkaXRfczogJ0VkaXRlZCBTeXN0ZW1zJyxcbiAgICAgICAgZWRpdF9yOiAnRWRpdGVkIFJlbGF0aW9uc2hpcHMnLFxuICAgICAgICBlZGl0X3A6ICdFZGl0ZWQgUGVyc3BlY3RpdmVzJyxcbiAgICAgICAgYWRkX3RoaW5nOiAnQWRkZWQgSWRlYXMnLFxuICAgICAgICByZW5hbWVfdGhpbmc6ICdSZW5hbWVkIElkZWFzJyxcbiAgICAgICAgZGVsZXRlX3RoaW5nOiAnRGVsZXRlZCBJZGVhcycsXG4gICAgICAgIGVkaXRfYXR0YWNobWVudHM6ICdFZGl0ZWQgQXR0YWNobWVudHMnLFxuICAgICAgICBlZGl0X3ByZXNlbnRlcjogJ0VkaXRlZCBQcmVzZW50ZXIgU2xpZGVzJyxcbiAgICAgICAgZWRpdF9nZW5lcmF0b3I6ICdJbnNlcnRlZCBJZGVhcyBmcm9tIFRoaW5rUXVlcnknLFxuICAgICAgICBlZGl0X3N0YW5kYXJkczogJ0VkaXRlZCBMaW5rcyB0byBDb21tb24gQ29yZSBTdGFuZGFyZHMnXG4gICAgfTtcblxuICAgIC8vIGUgaXMgYSBnby5DaGFuZ2VkRXZlbnRcbiAgICB0aGlzLm1vZGVsQ2hhbmdlZCA9IGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICBpZiAoIXNlbGYuc2F2ZU9uTW9kZWxDaGFuZ2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY2hhbmdlVHlwZSA9IG51bGw7XG4gICAgICAgIHZhciBjaGFuZ2VEZXNjcmlwdGlvbiA9IG51bGw7XG5cbiAgICAgICAgaWYgKGUucHJvcGVydHlOYW1lID09ICd0eXBlJykge1xuICAgICAgICAgICAgLy8gY2hhbmdlIFIgdHlwZVxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsbiwxLG8sMixBLDMsciw0LHIsNSxvLDYsdyw3LHNdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCx0LDEsb10gLCBwcm9wZXJ0eU5hbWU6IHR5cGVcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9yJztcbiAgICAgICAgICAgIGNoYW5nZURlc2NyaXB0aW9uID0gJ0NoYW5nZWQgUmVsYXRpb25zaGlwIFR5cGVzJztcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnbGF5b3V0Jykge1xuICAgICAgICAgICAgLy8gY2hhbmdlIHN5c3RlbSBsYXlvdXRcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLGwsMSxlLDIsZiwzLHRdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCxyLDEsaSwyLGcsMyxoLDQsdF0gLCBwcm9wZXJ0eU5hbWU6IGxheW91dCBcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9zJztcbiAgICAgICAgfSBlbHNlIGlmIChlLmNoYW5nZSA9PSBnby5DaGFuZ2VkRXZlbnQuSW5zZXJ0ICYmIHByb3BlcnR5RXF1YWxzKGUubmV3VmFsdWUsICdmcm9tUG9ydCcsICdSJykpIHtcbiAgICAgICAgICAgIC8vIGFkZCBsaW5rXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuSW5zZXJ0LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IDEsIG5ld1ZhbHVlOiBbdHlwZSxub0Fycm93cyxfX2dvaGFzaGlkLDYwMDUsZnJvbSwtMix0bywtNCxsYWJlbEtleXMsLGZyb21Qb3J0LFIsdG9Qb3J0LFBdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5XG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua1RvUG9ydElkLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCxQXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsUl0gLCBwcm9wZXJ0eU5hbWU6IHRvUG9ydCBcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9yJztcbiAgICAgICAgfSBlbHNlIGlmIChlLmNoYW5nZSA9PSBnby5DaGFuZ2VkRXZlbnQuUmVtb3ZlICYmIHByb3BlcnR5RXF1YWxzKGUub2xkVmFsdWUsICdmcm9tUG9ydCcsICdSJykpIHtcbiAgICAgICAgICAgIC8vIGRlbGV0ZSBsaW5rXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogMSwgb2xkVmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsNjAwNSxmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUix0b1BvcnQsUl0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3InO1xuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdsaW5rRGF0YUFycmF5Jykge1xuICAgICAgICAgICAgLy8gY2hhbmdlIFAvRCBsaW5rc1xuICAgICAgICAgICAgLy8gYWRkIFAgbGlua1xuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiAyLCBuZXdWYWx1ZTogW3R5cGUsbm9BcnJvd3MsX19nb2hhc2hpZCwxOTEyMixmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUCx0b1BvcnQsUF0gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXkgXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0NhdGVnb3J5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsUF0gLCBwcm9wZXJ0eU5hbWU6IGNhdGVnb3J5IFxuICAgICAgICAgICAgLy8gZGVsZXRlIFAgbGlua1xuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlJlbW92ZSwgb2xkUGFyYW06IDIsIG9sZFZhbHVlOiBbdHlwZSxub0Fycm93cyxfX2dvaGFzaGlkLDE5MTIyLGZyb20sLTIsdG8sLTQsbGFiZWxLZXlzLCxmcm9tUG9ydCxQLHRvUG9ydCxQLGNhdGVnb3J5LFBdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheSBcbiAgICAgICAgICAgIC8vIGFkZCBEIGxpbmtcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogMSwgbmV3VmFsdWU6IFtmcm9tLC03LHRvLC01LGZyb21Qb3J0LEQsdG9Qb3J0LEQsY2F0ZWdvcnksRCxfX2dvaGFzaGlkLDE5NTIyXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheSBcbiAgICAgICAgICAgIC8vIHJlbW92ZSBEIGxpbmtcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiAxLCBvbGRWYWx1ZTogW2Zyb20sLTcsdG8sLTUsZnJvbVBvcnQsRCx0b1BvcnQsRCxjYXRlZ29yeSxELF9fZ29oYXNoaWQsMTk1MjJdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheSBcblxuICAgICAgICAgICAgaWYgKChlLm5ld1ZhbHVlICYmIGUubmV3VmFsdWUuY2F0ZWdvcnkgPT0gJ1AnKSB8fFxuICAgICAgICAgICAgICAgIChlLm9sZFZhbHVlICYmIGUub2xkVmFsdWUuY2F0ZWdvcnkgPT0gJ1AnKSkge1xuICAgICAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9wJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGUubmV3VmFsdWUgJiYgZS5uZXdWYWx1ZS5jYXRlZ29yeSA9PSAnRCcpIHx8XG4gICAgICAgICAgICAgICAgKGUub2xkVmFsdWUgJiYgZS5vbGRWYWx1ZS5jYXRlZ29yeSA9PSAnRCcpKSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X2QnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdjYXRlZ29yeScpIHtcbiAgICAgICAgICAgIC8vIGFkZCBQIGxpbmtcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlZCwgbW9kZWxDaGFuZ2U6IGxpbmtDYXRlZ29yeSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLFBdICwgcHJvcGVydHlOYW1lOiBjYXRlZ29yeSBcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9wJztcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnZ3JvdXAnKSB7XG4gICAgICAgICAgICAvLyBkcmFnIGludG8gU1xuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxuICAgICAgICAgICAgLy8gcmVvcmRlciBwYXJ0XG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZWQsIG1vZGVsQ2hhbmdlOiBub2RlR3JvdXBLZXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogZ3JvdXAgXG4gICAgICAgICAgICAvLyBkcmFnIHRvIERcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlZCwgbW9kZWxDaGFuZ2U6IG5vZGVHcm91cEtleSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBncm91cCBcblxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3MnO1xuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdub2RlRGF0YUFycmF5JyAmJiBlLmNoYW5nZSA9PSBnby5DaGFuZ2VkRXZlbnQuSW5zZXJ0ICYmIHByb3BlcnR5RXF1YWxzKGUubmV3VmFsdWUsICdpc0dyb3VwJywgdHJ1ZSkpIHtcbiAgICAgICAgICAgIC8vIGFkZCB0aGluZ1xuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiA1LCBuZXdWYWx1ZTogW3RleHQsTmV3IElkZWEsaXNHcm91cCx0cnVlLGxldmVsLDAsbGF5b3V0LGxlZnQsc0V4cGFuZGVkLHRydWUscEV4cGFuZGVkLGZhbHNlLGRFeHBhbmRlZCxmYWxzZSxfX2dvaGFzaGlkLDU0Njg4LGdyb3VwLCxrZXksLTddICwgcHJvcGVydHlOYW1lOiBub2RlRGF0YUFycmF5IFxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDIsMSwyLDIsOCwzLC4sNCw1LDUsNiw2LDIsNyw1LDgsICw5LC0sMTAsMSwxMSw0LDEyLDksMTMsLiwxNCw2LDE1LDgsMTYsNywxNyw1XSAsIHByb3BlcnR5TmFtZTogbG9jIFxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBjaGlsZHJlbiBcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnYWRkX3RoaW5nJztcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAndGV4dCcpIHtcbiAgICAgICAgICAgIC8vIG1vdmUgdGhpbmdcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLGIsMSxiLDIsYiwzLGIsNCxiXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsYSwxLGEsMixhLDMsYSw0LGFdICwgcHJvcGVydHlOYW1lOiB0ZXh0IFxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdyZW5hbWVfdGhpbmcnO1xuICAgICAgICAgICAgY2hhbmdlRGVzY3JpcHRpb24gPSAnUmVuYW1lZCBJZGVhcyc7XG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ25vZGVEYXRhQXJyYXknICYmIGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5SZW1vdmUgJiYgcHJvcGVydHlFcXVhbHMoZS5vbGRWYWx1ZSwgJ2lzR3JvdXAnLCB0cnVlKSkge1xuICAgICAgICAgICAgLy8gZGVsZXRlIHRoaW5nXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbm9kZURhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogNSwgb2xkVmFsdWU6IFt0ZXh0LE5ldyBJZGVhLGlzR3JvdXAsdHJ1ZSxsZXZlbCwwLGxheW91dCxsZWZ0LHNFeHBhbmRlZCx0cnVlLHBFeHBhbmRlZCxmYWxzZSxkRXhwYW5kZWQsZmFsc2UsX19nb2hhc2hpZCw1NDY4OCxncm91cCwsa2V5LC03LGxvYywyMjguNTYyNSAtMTQ5LjY4NzUsY2hpbGRyZW4sMCxhdHRhY2htZW50cyxdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogbm9kZURhdGFBcnJheSBcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZGVsZXRlX3RoaW5nJztcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnbm9kZURhdGFBcnJheScgJiYgZS5jaGFuZ2UgPT0gZ28uQ2hhbmdlZEV2ZW50Lkluc2VydCAmJiBwcm9wZXJ0eUVxdWFscyhlLm5ld1ZhbHVlLCAnaXNHcm91cCcsIGZhbHNlKSkge1xuICAgICAgICAgICAgLy8gYWRkIHNsaWRlXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbm9kZURhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuSW5zZXJ0LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IDUsIG5ld1ZhbHVlOiBba2V5LHNsaWRlLTAsY2F0ZWdvcnksc2xpZGUsaW5kZXgsMCxpc0dyb3VwLGZhbHNlLHdpZHRoLDIwMCxoZWlnaHQsMjAwLGxvYywxNTYuNTYyNSAtOTcuNjg3NSxsZXZlbCwwLGNoaWxkcmVuLDAsdGl0bGUsLG5vdGVzLCxfX2dvaGFzaGlkLDYzODc3XSAsIHByb3BlcnR5TmFtZTogbm9kZURhdGFBcnJheSBcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9wcmVzZW50ZXInO1xuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdub2RlRGF0YUFycmF5JyAmJiBlLmNoYW5nZSA9PSBnby5DaGFuZ2VkRXZlbnQuUmVtb3ZlICYmIHByb3BlcnR5RXF1YWxzKGUub2xkVmFsdWUsICdpc0dyb3VwJywgZmFsc2UpKSB7XG4gICAgICAgICAgICAvLyBkZWxldGUgc2xpZGVcbiAgICAgICAgICAgIC8vbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlJlbW92ZSwgb2xkUGFyYW06IDUsIG9sZFZhbHVlOiBba2V5LHNsaWRlLTAsY2F0ZWdvcnksc2xpZGUsaW5kZXgsMCxpc0dyb3VwLGZhbHNlLHdpZHRoLDIwMCxoZWlnaHQsMjAwLGxvYywxNTYuNTYyNSAtOTcuNjg3NSxsZXZlbCwwLGNoaWxkcmVuLDAsdGl0bGUsLG5vdGVzLCxfX2dvaGFzaGlkLDYzODc3LCQkaGFzaEtleSwwWE5dICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogbm9kZURhdGFBcnJheSBcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9wcmVzZW50ZXInO1xuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdsb2MnIHx8IGUucHJvcGVydHlOYW1lID09ICd3aWR0aCcgfHwgZS5wcm9wZXJ0eU5hbWUgPT0gJ2hlaWdodCcpIHtcbiAgICAgICAgICAgIC8vIG1vdmUgdGhpbmcgb3IgcmVzaXplIHNsaWRlXG4gICAgICAgICAgICAvLyBtb3ZlIHNsaWRlXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCwyLDEsNCwyLDMsMywgLDQsLSw1LDEsNiwyLDcsOF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDIsMSw0LDIsMywzLCAsNCwtLDUsMSw2LDIsNyw3XSAsIHByb3BlcnR5TmFtZTogbG9jIFxuICAgICAgICAgICAgLy8gcmVzaXplIHNsaWRlXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGhlaWdodCBcbiAgICAgICAgICAgIC8vIG1vdmUgdGhpbmdcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLDQsMSw3LDIsOSwzLC4sNCw4LDUsNyw2LDUsNywgLDgsLSw5LDEsMTAsMiwxMSwyLDEyLC4sMTMsOCwxNCw3LDE1LDVdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCw1LDEsNCwyLDAsMywuLDQsMyw1LDEsNiwyLDcsNSw4LCAsOSwtLDEwLDEsMTEsMiwxMiwxLDEzLC4sMTQsMSwxNSw4LDE2LDcsMTcsNV0gLCAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnbW92ZSc7XG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ2xldmVsJyB8fCBlLnByb3BlcnR5TmFtZSA9PSAnY2hpbGRyZW4nKSB7XG4gICAgICAgICAgICAvLyB0aGVzZSBhdHRyaWJ1dGVzIGFyZSB1cGRhdGVkIGFzIGEgcmVzdWx0IG9mIG90aGVyIGFjdGlvbnM7IGlnbm9yZVxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ2F0dGFjaG1lbnRzJykge1xuICAgICAgICAgICAgLy8gZWRpdGVkIGF0dGFjaG1lbnRzXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfYXR0YWNobWVudHMnO1xuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdzRXhwYW5kZWQnIHx8IGUucHJvcGVydHlOYW1lID09ICdwRXhwYW5kZWQnKSB7XG4gICAgICAgICAgICAvLyBpZ25vcmUgZXhwYW5kL2NvbGxhcHNlXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ21vdmUnO1xuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdGaW5pc2hlZFVuZG8nIHx8IGUucHJvcGVydHlOYW1lID09ICdGaW5pc2hlZFJlZG8nKSB7XG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ3VuZG9fcmVkbyc7XG4gICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGUuY2hhbmdlICE9IGdvLkNoYW5nZWRFdmVudC5UcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogJyArIGUubW9kZWxDaGFuZ2UgK1xuICAgICAgICAgICAgLy8gICAgJywgY2hhbmdlOiAnICsgZS5jaGFuZ2UgK1xuICAgICAgICAgICAgLy8gICAgJywgb2xkUGFyYW06ICcgKyBlLm9sZFBhcmFtICtcbiAgICAgICAgICAgIC8vICAgICcsIG9sZFZhbHVlOiBbJyArIF8ucGFpcnMoZS5vbGRWYWx1ZSkgKyAnXSAnICtcbiAgICAgICAgICAgIC8vICAgICcsIG5ld1BhcmFtOiAnICsgZS5uZXdQYXJhbSArXG4gICAgICAgICAgICAvLyAgICAnLCBuZXdWYWx1ZTogWycgKyBfLnBhaXJzKGUubmV3VmFsdWUpICsgJ10gJyArXG4gICAgICAgICAgICAvLyAgICAnLCBwcm9wZXJ0eU5hbWU6ICcgKyBlLnByb3BlcnR5TmFtZVxuICAgICAgICAgICAgLy8pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZVR5cGUpIHtcbiAgICAgICAgICAgIG1hcC5nZXRBbmFseXRpY3MoKS51cGRhdGVDb250ZXh0dWFsQW5hbHl0aWNzKCk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjYWxsaW5nIGRlbGF5ZWRBdXRvc2F2ZSwgY2hhbmdlVHlwZTogJyArIGNoYW5nZVR5cGUpO1xuICAgICAgICAgICAgc2VsZi5zYXZlKGNoYW5nZVR5cGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIGNvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBjaGVja2luZyBwcm9wZXJ0aWVzXG4gICAgZnVuY3Rpb24gcHJvcGVydHlFcXVhbHMob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBvYmogIT09IG51bGwgJiYgXy5oYXMob2JqLCBrZXkpICYmIF8ucmVzdWx0KG9iaiwga2V5KSA9PSB2YWx1ZTtcbiAgICB9XG5cblxufTsiLCIvLyBtYWluIGNvbnRyb2xsZXIgY2xhc3Ncblxud2luZG93LlNhbmRiYW5rRWRpdG9yID0ge307XG5cbndpbmRvdy5NYXBFZGl0b3JDdHJsID0gZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkdGltZW91dCwgJG1vZGFsLCAkbG9nKSB7XG5cbiAgICAkc2NvcGUubWFwID0gbmV3IFNhbmRiYW5rRWRpdG9yLk1hcCgkc2NvcGUsICRodHRwLCAkcmVzb3VyY2UsICR0aW1lb3V0LCAkbW9kYWwsICRsb2cpO1xuXG4gICAgLy8gd2luZG93Lm1hcERhdGEgaXMgc2V0IGluIF9mb3JtIHZpZXdcbiAgICB2YXIgbWV0YWRhdGEgPSAkc2NvcGUubWFwRGF0YS5tZXRhZGF0YTtcbiAgICAkc2NvcGUuc2FuZGJveCA9IG1ldGFkYXRhLnNhbmRib3g7XG4gICAgLy8kc2NvcGUubWFwRGF0YSA9IHdpbmRvdy5tYXBEYXRhLm1hcC5kYXRhOyAvLyB0aGlzIGdldHMgb3ZlcndyaXR0ZW4gYnkgbG9hZCgpIHVubGVzcyB3ZSBhcmUgaW4gdGhlIHNhbmRib3ggd2l0aCBubyBtYXAgSURcbiAgICAvLyRzY29wZS5tYXBJZCA9IG1ldGFkYXRhLmlkO1xuICAgICRzY29wZS5tYXBUaXRsZSA9IG1ldGFkYXRhLm5hbWU7XG4gICAgJHNjb3BlLm1hcFVzZXJUYWdzID0gbWV0YWRhdGEudXNlclRhZ3M7XG4gICAgJHNjb3BlLm1hcFVybCA9IG1ldGFkYXRhLnVybDtcbiAgICAkc2NvcGUuY2FuRWRpdCA9IG1ldGFkYXRhLmNhbkVkaXQ7XG4gICAgJHNjb3BlLnVwZGF0ZWRBdCA9IG1ldGFkYXRhLnVwZGF0ZWRBdDtcbiAgICAkc2NvcGUudXBkYXRlZEJ5ID0gbWV0YWRhdGEudXBkYXRlZEJ5OyAvLyBJRFxuICAgICRzY29wZS51cGRhdGVkQnlOYW1lID0gbWV0YWRhdGEudXBkYXRlZEJ5TmFtZTtcblxuICAgICRzY29wZS5lZGl0aW5nVGl0bGUgPSBmYWxzZTtcblxuICAgICRzY29wZS5zaG93SW1hZ2VFeHBvcnQgPSBmYWxzZTtcbiAgICAkc2NvcGUuaW1hZ2VFeHBvcnRMb2FkaW5nID0gdHJ1ZTtcblxuICAgICRzY29wZS5jdXJyZW50VGFiID0gbnVsbDtcblxuICAgIC8vIG92ZXJyaWRlIHBhcmVudCBzY29wZSAoc2VlIHVzZXIuanMpIHNpbmNlIHdlJ3JlIGVkaXRpbmcgYSBtYXBcbiAgICAkc2NvcGUuY2NzVGFnZ2luZy5tYXBJZCA9ICRzY29wZS5tYXBJZDtcblxuICAgICRzY29wZS5tYXliZVN0YXJ0RWRpdGluZ1RpdGxlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUuY2FuRWRpdCkge1xuICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmdUaXRsZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvbmVFZGl0aW5nVGl0bGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZG9uZUVkaXRpbmdUaXRsZScpO1xuICAgICAgICAkc2NvcGUuZWRpdGluZ1RpdGxlID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5tYXAuZ2V0QXV0b3NhdmUoKS5zYXZlKCdlZGl0X3RpdGxlJyk7XG4gICAgfTtcblxuICAgICRzY29wZS5lZGl0aW5nVGl0bGVLZXlwcmVzcyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMpIHtcbiAgICAgICAgICAgICRzY29wZS5kb25lRWRpdGluZ1RpdGxlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLnByaW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHdpbmRvdy5wcmludCgpO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0gc2F2ZSBzYW5kYm94IG1hcCAoc2lnbiB1cC9zaWduIGluKSAtLS0tLS0tLS0tLS0tLS1cblxuICAgICRzY29wZS5zYXZlU2FuZGJveE1hcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVfc2FuZGJveF9zYXZlX21vZGFsLmh0bWwnLCAvLyBzZWUgdmlld3MvdXNlcnMvX3RlbXBsYXRlX3NhbmRib3hfc2F2ZV9tb2RhbFxuICAgICAgICAgICAgYmFja2Ryb3A6ICdzdGF0aWMnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogc2FuZGJveFNhdmVNb2RhbEN0cmwsXG4gICAgICAgICAgICB3aW5kb3dDbGFzczogJ3NhbmRib3gtc2F2ZS1tb2RhbCcsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgb3V0ZXJTY29wZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtYXA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLm1hcDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVzZXJQcm9maWxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7fSk7XG4gICAgfTtcblxuICAgIHZhciBzYW5kYm94U2F2ZU1vZGFsQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIG91dGVyU2NvcGUsIG1hcCwgdXNlclByb2ZpbGUpIHtcblxuICAgICAgICAkc2NvcGUubWFwID0gbWFwO1xuICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUgPSB1c2VyUHJvZmlsZTtcblxuICAgICAgICAkc2NvcGUubWFwRGF0YSA9IG1hcC5nZXREaWFncmFtKCkubW9kZWwudG9Kc29uKCk7XG4gICAgICAgICRzY29wZS50aHVtYm5haWxQbmcgPSBtYXAuZ2V0UHJlc2VudGVyKCkuZ2V0TWFwVGh1bWJuYWlsKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RGVmYXVsdExvZ2luRGF0YSgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZW1haWw6ICcnLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAnJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoaXMgc3RydWN0dXJlIGlzIHVzZWQgdG8gc3RvcmUgdGhlIGZvcm0gZGF0YSwgYXMgd2VsbCBhcyB0aGUgdmFsaWRhdGlvbiBlcnJvcnMgcmV0dXJuZWQgZnJvbSB0aGUgc2VydmVyLi4uXG4gICAgICAgIGZ1bmN0aW9uIGdldERlZmF1bHRTaWdudXBEYXRhKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBlbWFpbDogJycsXG4gICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogJycsXG4gICAgICAgICAgICAgICAgbGFzdF9uYW1lOiAnJyxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogJycsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uOiAnJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5sb2dpbkRhdGEgPSBnZXREZWZhdWx0TG9naW5EYXRhKCk7XG4gICAgICAgICRzY29wZS5sb2dpbkVycm9yID0gJyc7XG5cbiAgICAgICAgJHNjb3BlLnNpZ251cERhdGEgPSBnZXREZWZhdWx0U2lnbnVwRGF0YSgpO1xuICAgICAgICAkc2NvcGUuc2lnbnVwRXJyb3JzID0gZ2V0RGVmYXVsdFNpZ251cERhdGEoKTtcblxuICAgICAgICAkc2NvcGUuZG9Mb2dpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luRXJyb3JzID0gZ2V0RGVmYXVsdExvZ2luRGF0YSgpOyAvLyByZXNldCBlcnJvcnNcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9zaWduX2luLmpzb24nLCB7XG4gICAgICAgICAgICAgICAgdXNlcjogJHNjb3BlLmxvZ2luRGF0YVxuICAgICAgICAgICAgfSkudGhlbihcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIGlzIHtpZDpYWCwgLi4ufVxuICAgICAgICAgICAgICAgICAgICBvdXRlclNjb3BlLnNldFVzZXJJZChyZXNwb25zZS5kYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgb3V0ZXJTY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUgPSBvdXRlclNjb3BlLnVzZXJQcm9maWxlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRhdGEgaXMge1wiZXJyb3JcIjogXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkXCJ9XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2dpbkVycm9yID0gcmVzcG9uc2UuZGF0YS5lcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZG9TaWdudXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5zaWdudXBFcnJvcnMgPSBnZXREZWZhdWx0U2lnbnVwRGF0YSgpOyAvLyByZXNldCBlcnJvcnNcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy91c2Vycy5qc29uJywge1xuICAgICAgICAgICAgICAgIHVzZXI6ICRzY29wZS5zaWdudXBEYXRhXG4gICAgICAgICAgICB9KS50aGVuKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRhdGEgaXMgbmV3IHVzZXIgSURcbiAgICAgICAgICAgICAgICAgICAgb3V0ZXJTY29wZS5zZXRVc2VySWQocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIG91dGVyU2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJQcm9maWxlID0gb3V0ZXJTY29wZS51c2VyUHJvZmlsZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIGlzIGUuZy4ge1wiZmlyc3RfbmFtZVwiOltcImNhbid0IGJlIGJsYW5rXCJdLCAuLi59XG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaChfLmtleXMocmVzcG9uc2UuZGF0YSksIGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNpZ251cEVycm9yc1trZXldID0gcmVzcG9uc2UuZGF0YVtrZXldLmpvaW4oJzsgJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBzYW5kYm94U2F2ZU1vZGFsQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnLCAnb3V0ZXJTY29wZScsICdtYXAnLCAndXNlclByb2ZpbGUnXTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0gZWRpdCBzdGF0dXMgbWVzc2FnZSBmb3IgaGVhZGVyIGJhciAtLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgICRzY29wZS5lZGl0U3RhdHVzID0gJyc7XG5cbiAgICAkc2NvcGUuTEFTVF9VUERBVEVEID0gJyc7XG4gICAgJHNjb3BlLlJFQURfT05MWSA9ICdWaWV3IG9ubHknO1xuICAgICRzY29wZS5TQVZJTkcgPSAnU2F2aW5nLi4uJztcbiAgICAkc2NvcGUuU0FWRV9PSyA9ICdBbGwgY2hhbmdlcyBzYXZlZCc7XG4gICAgJHNjb3BlLlNBVkVfRkFJTEVEID0gJ0NoYW5nZXMgY291bGQgbm90IGJlIHNhdmVkJztcblxuICAgICRzY29wZS51cGRhdGVFZGl0U3RhdHVzID0gZnVuY3Rpb24ocykge1xuICAgICAgICAvL2NvbnNvbGUubG9nKCd1cGRhdGVFZGl0U3RhdHVzOiAnICsgcyk7XG4gICAgICAgICRzY29wZS5lZGl0U3RhdHVzID0gcztcbiAgICAgICAgaWYgKHMgPT0gJHNjb3BlLlNBVkVfRkFJTEVEKSB7XG4gICAgICAgICAgICBhbGVydCgnQ2hhbmdlcyBjb3VsZCBub3QgYmUgc2F2ZWQgLSBwbGVhc2UgY2hlY2sgeW91ciBuZXR3b3JrIGNvbm5lY3Rpb24uJyk7XG4gICAgICAgIH0gZWxzZSBpZiAocyA9PSAkc2NvcGUuTEFTVF9VUERBVEVEKSB7XG4gICAgICAgICAgICB2YXIgdGltZSA9IG1vbWVudCgkc2NvcGUudXBkYXRlZEF0KS5mcm9tTm93KCk7XG4gICAgICAgICAgICB2YXIgYnkgPSAnJztcbiAgICAgICAgICAgIGlmICgkc2NvcGUudXBkYXRlZEJ5ID09ICRzY29wZS51c2VySWQpIHtcbiAgICAgICAgICAgICAgICBieSA9ICdieSBtZSc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS51cGRhdGVkQnlOYW1lKSB7XG4gICAgICAgICAgICAgICAgYnkgPSAnYnkgJyArICRzY29wZS51cGRhdGVkQnlOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVE9ETzogc2hvdyAnYnkgbWUnIG9ubHkgZm9yIGVkaXRhYmxlIHNoYXJlZCBtYXBzP1xuXG4gICAgICAgICAgICAkc2NvcGUuZWRpdFN0YXR1cyA9ICdMYXN0IHVwZGF0ZWQgJyArIHRpbWUgKyAnICcgKyBieTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExhc3QgZWRpdCB3YXMgWFggYWdvIGJ5IFlZXG4gICAgfTtcblxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5tYXAuaW5pdCgpO1xuXG4gICAgICAgICAgICBpZiAoISRzY29wZS5zYW5kYm94KSB7XG4gICAgICAgICAgICAgICAgLy8gb3ZlcnZpZXcgZGlhZ3JhbVxuICAgICAgICAgICAgICAgIHZhciBvdmVydmlldyA9IGdvLkdyYXBoT2JqZWN0Lm1ha2UoZ28uT3ZlcnZpZXcsIFwib3ZlcnZpZXctZGlhZ3JhbVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVkOiAkc2NvcGUubWFwLmdldERpYWdyYW0oKSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEFsaWdubWVudDogZ28uU3BvdC5DZW50ZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgb3V0bGluZSA9IG92ZXJ2aWV3LmJveC5lbGVtZW50cy5maXJzdCgpO1xuICAgICAgICAgICAgICAgIG91dGxpbmUuc3Ryb2tlID0gXCIjMzMzXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vaWYgKCRzY29wZS5tYXBVcmwpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubWFwLmxvYWQoKTtcbiAgICAgICAgICAgIC8vfSBlbHNlIHtcbiAgICAgICAgICAgIC8vICAgICRzY29wZS5tYXAubG9hZEZvclNhbmRib3goKTtcbiAgICAgICAgICAgIC8vfVxuXG4gICAgICAgICAgICBhZGRCZWhhdmlvcnMoKTtcbiAgICAgICAgICAgIGhhbmRsZU5hdmlnYXRpb24oKTtcbiAgICAgICAgICAgIGhhbmRsZUJhY2tzcGFjZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBtaXNjLiBVSSBiZWhhdmlvcnMgZm9yIHRvb2x0aXBzLCBwb3B1cHMgZXRjLlxuICAgIC8vIFRPRE86IGZpZ3VyZSBvdXQgd2hpY2ggb2YgdGhlc2UgbmVlZCB0byBiZSByZWFwcGxpZWQgYWZ0ZXIgZHluYW1pYyBkYXRhIGNoYW5nZXMgKGUuZy4gTGVzc29uQm9vayBwb3BvdmVycylcbiAgICBmdW5jdGlvbiBhZGRCZWhhdmlvcnMoKSB7XG5cbiAgICAgICAgLy8gTk9URTogd2UgaGF2ZSB0byB1c2UgcmVndWxhciBib290c3RyYXAgdG9vbHRpcHMgZm9yIHRvb2xiYXIgYnV0dG9ucyAoaW5zdGVhZCBvZiBuZy1ib290c3RyYXAgb25lcylcbiAgICAgICAgLy8gc28gd2UgY2FuIHR1cm4gdGhlbSBvZmYgZm9yIG1vYmlsZS4gV2UgYWxzbyBwdXQgdGhlIHRvb2x0aXBzIG9uIHdyYXBwZXJzIHJhdGhlciB0aGFuIG9uIHRoZSBhY3R1YWwgXG4gICAgICAgIC8vIGJ1dHRvbnMsIHNvIHdlIGNhbiBhdm9pZCB0aGUgaXNzdWUgb2Ygc3R1Y2sgdG9vbHRpcHMgaWYgYSBidXR0b24gZ2V0cyBkaXNhYmxlZCB3aGlsZSB0aGUgdG9vbHRpcCBpcyBzaG93aW5nLlxuXG4gICAgICAgIGlmICghJHNjb3BlLmlzVG91Y2hEZXZpY2UoKSkge1xuICAgICAgICAgICAgLy8gJCgnLnRvb2x0aXAtd3JhcHBlcicpLnRvb2x0aXAoe1xuICAgICAgICAgICAgLy8gICAgIHBsYWNlbWVudDogJ3RvcCcsXG4gICAgICAgICAgICAvLyAgICAgY29udGFpbmVyOiAnYm9keSdcbiAgICAgICAgICAgIC8vIH0pO1xuXG4gICAgICAgICAgICAvLyAkKCcuZHJvcGRvd24tbWVudSAuYnRuJykudG9vbHRpcCh7XG4gICAgICAgICAgICAvLyAgICAgcGxhY2VtZW50OiAnbGVmdCcsXG4gICAgICAgICAgICAvLyAgICAgY29udGFpbmVyOiAnYm9keSdcbiAgICAgICAgICAgIC8vIH0pOyAvLyBmb3IgbGF5b3V0IG9wdGlvbnNcblxuICAgICAgICAgICAgJCgnaGVhZGVyLCAjbWFwLXRpdGxlJykuaG92ZXIoXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHkucHJlc2VudGVyLXBsYXlpbmcnKS5hZGRDbGFzcygnaGlkZS1oZWFkZXInKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkKCdib2R5LnByZXNlbnRlci1wbGF5aW5nJykucmVtb3ZlQ2xhc3MoJ2hpZGUtaGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZU5hdmlnYXRpb24oKSB7XG4gICAgICAgIC8vIGNyb3NzLWJyb3dzZXIgdHdlYWtzOlxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gaHR0cDovL3d3dy5vcGVyYS5jb20vc3VwcG9ydC9rYi92aWV3LzgyNy9cbiAgICAgICAgICAgIG9wZXJhLnNldE92ZXJyaWRlSGlzdG9yeU5hdmlnYXRpb25Nb2RlKCdjb21wYXRpYmxlJyk7XG4gICAgICAgICAgICBoaXN0b3J5Lm5hdmlnYXRpb25Nb2RlID0gJ2NvbXBhdGlibGUnO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBubyBiaWdnaWUuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBpbnN0YWxsIGJlZm9yZS11bmxvYWQgaGFuZGxlcjpcblxuICAgICAgICBmdW5jdGlvbiBleGl0TWVzc2FnZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBcIk5hdmlnYXRpbmcgYXdheSBmcm9tIHlvdXIgTWFwIHdpbGwgY2F1c2UgYW55IHVuc2F2ZWQgY2hhbmdlcyB0byBiZSBsb3N0IFwiICtcbiAgICAgICAgICAgICAgICBcIihhbnkgY2hhbmdlcyB5b3UgbWFrZSBhcmUgYXV0b21hdGljYWxseSBzYXZlZCwgYnV0IGl0IHRha2VzIGEgY291cGxlIG9mIHNlY29uZHMpLlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gICAgICAgICQod2luZG93KS5iaW5kKCdiZWZvcmV1bmxvYWQnLCBleGl0TWVzc2FnZSk7XG5cbiAgICAgICAgLy8gcHJldmVudCBleGl0IHByb21wdCB3aGVuIHRoZSB1c2VyIGRlbGliZXJhdGVseSBuYXZpZ2F0ZXMgYXdheTpcblxuICAgICAgICAkKCcjaGVhZGVyLXJpZ2h0IGEnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQod2luZG93KS51bmJpbmQoJ2JlZm9yZXVubG9hZCcsIGV4aXRNZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlQmFja3NwYWNlKCkge1xuICAgICAgICB2YXIgQkFDS1NQQUNFID0gODtcblxuICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gQkFDS1NQQUNFKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkKCdib2R5IDpmb2N1cycpLmlzKCc6aW5wdXQnKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBwcmV2ZW50IGFjY2lkZW50YWwgYmFja3NwYWNlIHdoZW4gbm8gaW5wdXQgaGFzIGZvY3VzOlxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGluaXQoKTtcblxuICAgIHJldHVybiAkc2NvcGU7XG59O1xuXG53aW5kb3cuTWFwRWRpdG9yQ3RybC4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckaHR0cCcsICckcmVzb3VyY2UnLCAnJHRpbWVvdXQnLCAnJG1vZGFsJywgJyRsb2cnXTsiLCJ3aW5kb3cuU2FuZGJhbmtFZGl0b3JPcHRpb25zID0ge307XG5cblNhbmRiYW5rRWRpdG9yT3B0aW9ucyA9IGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgJG1vZGFsLCAkbG9nKSB7XG5cbiAgICB0aGlzLm9wZW5Nb2RhbCA9IGZ1bmN0aW9uKG9wdGlvbnMsIG9uU2F2ZURlZmF1bHRzLCBvblVwZGF0ZSkge1xuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVfZWRpdG9yX29wdGlvbnNfbW9kYWwuaHRtbCcsIC8vIHNlZSB2aWV3cy9tYXBzL190ZW1wbGF0ZV9lZGl0b3Jfb3B0aW9uc19tb2RhbFxuICAgICAgICAgICAgYmFja2Ryb3A6ICdzdGF0aWMnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogb3B0aW9uc01vZGFsQ3RybCxcbiAgICAgICAgICAgIHdpbmRvd0NsYXNzOiAnb3B0aW9ucy1tb2RhbCcsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgb3B0aW9uczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25TYXZlRGVmYXVsdHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25TYXZlRGVmYXVsdHM7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvblVwZGF0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7fSk7XG4gICAgfTtcblxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIGNvbnRyb2xsZXIgZm9yIG9wdGlvbnMgbW9kYWwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICB2YXIgb3B0aW9uc01vZGFsQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIG9wdGlvbnMsIG9uU2F2ZURlZmF1bHRzLCBvblVwZGF0ZSkge1xuXG4gICAgICAgICRzY29wZS5vcHRpb25zID0gb3B0aW9ucztcblxuICAgICAgICAkc2NvcGUuc2V0RGVmYXVsdHMgPSB7XG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUub2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG9uVXBkYXRlKCRzY29wZS5vcHRpb25zKTtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc2V0RGVmYXVsdHMudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBvblNhdmVEZWZhdWx0cygkc2NvcGUub3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBvcHRpb25zTW9kYWxDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsICdvcHRpb25zJywgJ29uU2F2ZURlZmF1bHRzJywgJ29uVXBkYXRlJ107XG59OyIsIlwidXNlIHN0cmljdFwiO1xuLypcbiogIENvcHlyaWdodCAoQykgMTk5OC0yMDE1IGJ5IE5vcnRod29vZHMgU29mdHdhcmUgQ29ycG9yYXRpb24uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4qL1xuXG4vLyBBIGN1c3RvbSBUb29sIGZvciBtb3ZpbmcgYSBsYWJlbCBvbiBhIE5vZGVcblxuLyoqXG4qIEBjb25zdHJ1Y3RvclxuKiBAZXh0ZW5kcyBUb29sXG4qIEBjbGFzc1xuKiBUaGlzIHRvb2wgb25seSB3b3JrcyB3aGVuIHRoZSBOb2RlIGhhcyBhIGxhYmVsIChhbnkgR3JhcGhPYmplY3QpIG1hcmtlZCB3aXRoXG4qIHsgX2lzTm9kZUxhYmVsOiB0cnVlIH0gdGhhdCBpcyBwb3NpdGlvbmVkIGluIGEgU3BvdCBQYW5lbC5cbiogSXQgd29ya3MgYnkgbW9kaWZ5aW5nIHRoYXQgbGFiZWwncyBHcmFwaE9iamVjdC5hbGlnbm1lbnQgcHJvcGVydHkgdG8gaGF2ZSBhblxuKiBvZmZzZXQgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBwYW5lbC5cbiovXG5mdW5jdGlvbiBOb2RlTGFiZWxEcmFnZ2luZ1Rvb2woKSB7XG4gIGdvLlRvb2wuY2FsbCh0aGlzKTtcbiAgdGhpcy5uYW1lID0gXCJOb2RlTGFiZWxEcmFnZ2luZ1wiO1xuXG4gIC8qKiBAdHlwZSB7R3JhcGhPYmplY3R9ICovXG4gIHRoaXMubGFiZWwgPSBudWxsO1xuICAvKiogQHR5cGUge1BvaW50fSAqL1xuICB0aGlzLl9vcmlnaW5hbEFsaWdubWVudCA9IG51bGw7XG4gIC8qKiBAdHlwZSB7UG9pbnR9ICovXG4gIHRoaXMuX29yaWdpbmFsQ2VudGVyID0gbnVsbDtcbn1cbmdvLkRpYWdyYW0uaW5oZXJpdChOb2RlTGFiZWxEcmFnZ2luZ1Rvb2wsIGdvLlRvb2wpO1xuXG4vKipcbiogVGhpcyB0b29sIGNhbiBvbmx5IHN0YXJ0IGlmIHRoZSBtb3VzZSBoYXMgbW92ZWQgZW5vdWdoIHNvIHRoYXQgaXQgaXMgbm90IGEgY2xpY2ssXG4qIGFuZCBpZiB0aGUgbW91c2UgZG93biBwb2ludCBpcyBvbiBhIEdyYXBoT2JqZWN0IFwibGFiZWxcIiBpbiBhIFNwb3QgUGFuZWwsXG4qIGFzIGRldGVybWluZWQgYnkgZmluZExhYmVsKCkuXG4qIEB0aGlzIHtOb2RlTGFiZWxEcmFnZ2luZ1Rvb2x9XG4qIEByZXR1cm4ge2Jvb2xlYW59XG4qL1xuTm9kZUxhYmVsRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5jYW5TdGFydCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIWdvLlRvb2wucHJvdG90eXBlLmNhblN0YXJ0LmNhbGwodGhpcykpIHJldHVybiBmYWxzZTtcbiAgdmFyIGRpYWdyYW0gPSB0aGlzLmRpYWdyYW07XG4gIGlmIChkaWFncmFtID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gIC8vIHJlcXVpcmUgbGVmdCBidXR0b24gJiB0aGF0IGl0IGhhcyBtb3ZlZCBmYXIgZW5vdWdoIGF3YXkgZnJvbSB0aGUgbW91c2UgZG93biBwb2ludCwgc28gaXQgaXNuJ3QgYSBjbGlja1xuICB2YXIgZSA9IGRpYWdyYW0ubGFzdElucHV0O1xuICBpZiAoIWUubGVmdCkgcmV0dXJuIGZhbHNlO1xuICBpZiAoIXRoaXMuaXNCZXlvbmREcmFnU2l6ZSgpKSByZXR1cm4gZmFsc2U7XG5cbiAgcmV0dXJuIHRoaXMuZmluZExhYmVsKCkgIT09IG51bGw7XG59XG5cbi8qKlxuKiBGcm9tIHRoZSBHcmFwaE9iamVjdCBhdCB0aGUgbW91c2UgcG9pbnQsIHNlYXJjaCB1cCB0aGUgdmlzdWFsIHRyZWUgdW50aWwgd2UgZ2V0IHRvXG4qIGFuIG9iamVjdCB0aGF0IGhhcyB0aGUgXCJfaXNOb2RlTGFiZWxcIiBwcm9wZXJ0eSBzZXQgdG8gdHJ1ZSwgdGhhdCBpcyBpbiBhIFNwb3QgUGFuZWwsXG4qIGFuZCB0aGF0IGlzIG5vdCB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGF0IFBhbmVsIChpLmUuIG5vdCB0aGUgbWFpbiBlbGVtZW50IG9mIHRoZSBwYW5lbCkuXG4qIEB0aGlzIHtOb2RlTGFiZWxEcmFnZ2luZ1Rvb2x9XG4qIEByZXR1cm4ge0dyYXBoT2JqZWN0fSBUaGlzIHJldHVybnMgbnVsbCBpZiBubyBzdWNoIGxhYmVsIGlzIGF0IHRoZSBtb3VzZSBkb3duIHBvaW50LlxuKi9cbk5vZGVMYWJlbERyYWdnaW5nVG9vbC5wcm90b3R5cGUuZmluZExhYmVsID0gZnVuY3Rpb24oKSB7XG4gIHZhciBkaWFncmFtID0gdGhpcy5kaWFncmFtO1xuICB2YXIgZSA9IGRpYWdyYW0uZmlyc3RJbnB1dDtcbiAgdmFyIGVsdCA9IGRpYWdyYW0uZmluZE9iamVjdEF0KGUuZG9jdW1lbnRQb2ludCwgbnVsbCwgbnVsbCk7XG5cbiAgaWYgKGVsdCA9PT0gbnVsbCB8fCAhKGVsdC5wYXJ0IGluc3RhbmNlb2YgZ28uTm9kZSkpIHJldHVybiBudWxsO1xuICB3aGlsZSAoZWx0LnBhbmVsICE9PSBudWxsICYmIGVsdC5wYW5lbC50eXBlID09PSBnby5QYW5lbC5TcG90ICYmIGVsdC5wYW5lbC5lbHQoMCkgIT09IGVsdCkge1xuICAgIGlmIChlbHQuX2lzTm9kZUxhYmVsKSByZXR1cm4gZWx0O1xuICAgIGVsdCA9IGVsdC5wYW5lbDtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuKiBTdGFydCBhIHRyYW5zYWN0aW9uLCBjYWxsIGZpbmRMYWJlbCBhbmQgcmVtZW1iZXIgaXQgYXMgdGhlIFwibGFiZWxcIiBwcm9wZXJ0eSxcbiogYW5kIHJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgdGhlIGxhYmVsJ3MgYWxpZ25tZW50IHByb3BlcnR5LlxuKiBAdGhpcyB7Tm9kZUxhYmVsRHJhZ2dpbmdUb29sfVxuKi9cbk5vZGVMYWJlbERyYWdnaW5nVG9vbC5wcm90b3R5cGUuZG9BY3RpdmF0ZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnN0YXJ0VHJhbnNhY3Rpb24oXCJTaGlmdGVkIExhYmVsXCIpO1xuICB0aGlzLmxhYmVsID0gdGhpcy5maW5kTGFiZWwoKTtcbiAgaWYgKHRoaXMubGFiZWwgIT09IG51bGwpIHtcbiAgICB0aGlzLl9vcmlnaW5hbEFsaWdubWVudCA9IHRoaXMubGFiZWwuYWxpZ25tZW50LmNvcHkoKTtcbiAgICB2YXIgbWFpbiA9IHRoaXMubGFiZWwucGFuZWwuZmluZE1haW5FbGVtZW50KCk7XG4gICAgdGhpcy5fb3JpZ2luYWxDZW50ZXIgPSBtYWluLmdldERvY3VtZW50UG9pbnQoZ28uU3BvdC5DZW50ZXIpO1xuICB9XG4gIGdvLlRvb2wucHJvdG90eXBlLmRvQWN0aXZhdGUuY2FsbCh0aGlzKTtcbn1cblxuLyoqXG4qIFN0b3AgYW55IG9uZ29pbmcgdHJhbnNhY3Rpb24uXG4qIEB0aGlzIHtOb2RlTGFiZWxEcmFnZ2luZ1Rvb2x9XG4qL1xuTm9kZUxhYmVsRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5kb0RlYWN0aXZhdGUgPSBmdW5jdGlvbigpIHtcbiAgZ28uVG9vbC5wcm90b3R5cGUuZG9EZWFjdGl2YXRlLmNhbGwodGhpcyk7XG4gIHRoaXMuc3RvcFRyYW5zYWN0aW9uKCk7XG59XG5cbi8qKlxuKiBDbGVhciBhbnkgcmVmZXJlbmNlIHRvIGEgbGFiZWwgZWxlbWVudC5cbiogQHRoaXMge05vZGVMYWJlbERyYWdnaW5nVG9vbH1cbiovXG5Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wucHJvdG90eXBlLmRvU3RvcCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmxhYmVsID0gbnVsbDtcbiAgZ28uVG9vbC5wcm90b3R5cGUuZG9TdG9wLmNhbGwodGhpcyk7XG59XG5cbi8qKlxuKiBSZXN0b3JlIHRoZSBsYWJlbCdzIG9yaWdpbmFsIHZhbHVlIGZvciBHcmFwaE9iamVjdC5hbGlnbm1lbnQuXG4qIEB0aGlzIHtOb2RlTGFiZWxEcmFnZ2luZ1Rvb2x9XG4qL1xuTm9kZUxhYmVsRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5kb0NhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5sYWJlbCAhPT0gbnVsbCkge1xuICAgIHRoaXMubGFiZWwuYWxpZ25tZW50ID0gdGhpcy5fb3JpZ2luYWxBbGlnbm1lbnQ7XG4gIH1cbiAgZ28uVG9vbC5wcm90b3R5cGUuZG9DYW5jZWwuY2FsbCh0aGlzKTtcbn1cblxuLyoqXG4qIER1cmluZyB0aGUgZHJhZywgY2FsbCB1cGRhdGVBbGlnbm1lbnQgaW4gb3JkZXIgdG8gc2V0IHRoZSBHcmFwaE9iamVjdC5hbGlnbm1lbnQgb2YgdGhlIGxhYmVsLlxuKiBAdGhpcyB7Tm9kZUxhYmVsRHJhZ2dpbmdUb29sfVxuKi9cbk5vZGVMYWJlbERyYWdnaW5nVG9vbC5wcm90b3R5cGUuZG9Nb3VzZU1vdmUgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCF0aGlzLmlzQWN0aXZlKSByZXR1cm47XG4gIHRoaXMudXBkYXRlQWxpZ25tZW50KCk7XG59XG5cbi8qKlxuKiBBdCB0aGUgZW5kIG9mIHRoZSBkcmFnLCB1cGRhdGUgdGhlIGFsaWdubWVudCBvZiB0aGUgbGFiZWwgYW5kIGZpbmlzaCB0aGUgdG9vbCxcbiogY29tcGxldGluZyBhIHRyYW5zYWN0aW9uLlxuKiBAdGhpcyB7Tm9kZUxhYmVsRHJhZ2dpbmdUb29sfVxuKi9cbk5vZGVMYWJlbERyYWdnaW5nVG9vbC5wcm90b3R5cGUuZG9Nb3VzZVVwID0gZnVuY3Rpb24oKSB7XG4gIGlmICghdGhpcy5pc0FjdGl2ZSkgcmV0dXJuO1xuICB0aGlzLnVwZGF0ZUFsaWdubWVudCgpO1xuICB0aGlzLnRyYW5zYWN0aW9uUmVzdWx0ID0gXCJTaGlmdGVkIExhYmVsXCI7XG4gIHRoaXMuc3RvcFRvb2woKTtcbn1cblxuLyoqXG4qIFNhdmUgdGhlIGxhYmVsJ3MgR3JhcGhPYmplY3QuYWxpZ25tZW50IGFzIGFuIGFic29sdXRlIG9mZnNldCBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIFNwb3QgUGFuZWxcbiogdGhhdCB0aGUgbGFiZWwgaXMgaW4uXG4qIEB0aGlzIHtOb2RlTGFiZWxEcmFnZ2luZ1Rvb2x9XG4qL1xuTm9kZUxhYmVsRHJhZ2dpbmdUb29sLnByb3RvdHlwZS51cGRhdGVBbGlnbm1lbnQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMubGFiZWwgPT09IG51bGwpIHJldHVybjtcbiAgdmFyIGxhc3QgPSB0aGlzLmRpYWdyYW0ubGFzdElucHV0LmRvY3VtZW50UG9pbnQ7XG4gIHZhciBjbnRyID0gdGhpcy5fb3JpZ2luYWxDZW50ZXI7XG4gIHRoaXMubGFiZWwuYWxpZ25tZW50ID0gbmV3IGdvLlNwb3QoMC41LCAwLjUsIGxhc3QueCAtIGNudHIueCwgbGFzdC55IC0gY250ci55KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBOb2RlTGFiZWxEcmFnZ2luZ1Rvb2w7IiwiLy8gZnVuY3Rpb25zIGZvciB0aGUgZ2VuZXJhdG9yIChha2EgVGhpbmtRdWVyeSlcblxudmFyIEdlbmVyYXRvckN0cmwgPSBmdW5jdGlvbiAoJHNjb3BlKSB7XG5cbiAgICB2YXIgbWFwID0gJHNjb3BlLm1hcDtcbiAgICB2YXIgZGlhZ3JhbSA9ICRzY29wZS5tYXAuZ2V0RGlhZ3JhbSgpO1xuXG4gICAgJHNjb3BlLmNvbmNlcHQxID0gJyc7XG4gICAgJHNjb3BlLmNvbmNlcHQyID0gJyc7XG5cbiAgICAkc2NvcGUuZWNob0NvbmNlcHQxID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkc2NvcGUuY29uY2VwdDEgfHwgJy4uLic7XG4gICAgfTtcblxuICAgICRzY29wZS5lY2hvQ29uY2VwdDIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICRzY29wZS5jb25jZXB0MiB8fCAnLi4uJztcbiAgICB9O1xuXG4gICAgJHNjb3BlLnN3YXBDb25jZXB0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdG1wID0gJHNjb3BlLmNvbmNlcHQxO1xuICAgICAgICAkc2NvcGUuY29uY2VwdDEgPSAkc2NvcGUuY29uY2VwdDI7XG4gICAgICAgICRzY29wZS5jb25jZXB0MiA9IHRtcDtcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgIH07XG5cbiAgICAkc2NvcGUubWFwSXQgPSBmdW5jdGlvbihxdWVzdGlvbikge1xuICAgICAgICBzdGFydFNwaW5uZXIoKTtcbiAgICAgICAgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgIG1hcC5nZXRBdXRvc2F2ZSgpLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgICAgIGlmICgkc2NvcGUuc2FuZGJveCkge1xuICAgICAgICAgICAgZGlhZ3JhbS5jbGVhcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmlndXJlIG91dCBsb2NhdGlvbiBmb3IgaW5zZXJ0ZWQgc3R1ZmZcbiAgICAgICAgdmFyIGRiID0gbWFwLmNvbXB1dGVNYXBCb3VuZHMoKTtcbiAgICAgICAgdmFyIHggPSBkYi54ICsgZGIud2lkdGggKyAyMDA7XG4gICAgICAgIHZhciB5ID0gZGIueTtcbiAgICAgICAgaWYgKGlzTmFOKHgpIHx8IGlzTmFOKHkpKSB7XG4gICAgICAgICAgICB4ID0geSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgLy9jb25zb2xlLmxvZygneCwgeTogJyArIHggKyAnLCAnICsgeSk7XG5cbiAgICAgICAgLy8gaW5zZXJ0IHRoZSBzdHVmZiBhbmQgZGVzZWxlY3QgaXRcbiAgICAgICAgcXVlc3Rpb24oeCx5KTtcbiAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpOyBcblxuICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XG4gICAgICAgIGRpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIG1hcC5nZXRVaSgpLnJlc2V0Wm9vbSgpO1xuXG4gICAgICAgIG1hcC5nZXRBdXRvc2F2ZSgpLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIG1hcC5nZXRBdXRvc2F2ZSgpLnNhdmUoJ2VkaXRfZ2VuZXJhdG9yJyk7XG4gICAgICAgIHN0b3BTcGlubmVyKCk7XG4gICAgfTtcblxuICAgICRzY29wZS5zZWxlY3RlZFF1ZXN0aW9uID0gbnVsbDtcblxuICAgICRzY29wZS5zZWxlY3RRdWVzdGlvbiA9IGZ1bmN0aW9uKHF1ZXN0aW9uKSB7XG4gICAgICAgICRzY29wZS5zZWxlY3RlZFF1ZXN0aW9uID0gcXVlc3Rpb247XG4gICAgICAgIGlmICgkc2NvcGUuc2FuZGJveCkge1xuICAgICAgICAgICAgJHNjb3BlLm1hcEl0KHF1ZXN0aW9uKTtcbiAgICAgICAgfVxuICAgIH07ICAgIFxuXG4gICAgJHNjb3BlLnN1cnByaXNlTWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGtleXMgPSBfLmtleXMoJHNjb3BlLnF1ZXJpZXMpO1xuICAgICAgICB2YXIgaSA9IF8ucmFuZG9tKDAsIGtleXMubGVuZ3RoIC0gMSk7XG4gICAgICAgIHZhciBxdWVzdGlvbiA9ICRzY29wZS5xdWVyaWVzW2tleXNbaV1dO1xuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRRdWVzdGlvbiA9IHF1ZXN0aW9uO1xuICAgICAgICAkc2NvcGUubWFwSXQocXVlc3Rpb24pO1xuXG4gICAgICAgICQoJyNxdWVzdGlvbnMnKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiBpICogMzAgfSwgMTAwMCk7XG4gICAgfTtcblxuICAgIC8vIC0tLS0tLS0tLS0gZnVuY3Rpb25zIGZvciBjcmVhdGluZyBlYWNoIG9mIHRoZSBzdHJ1Y3R1cmVzIC0gc2VlIHZpZXdzL21hcHMvZ2VuZXJhdG9yX3RhYiAtLS0tLS0tLS0tLVxuXG4gICAgJHNjb3BlLnF1ZXJpZXMgPSB7XG5cbiAgICAgICAgV0hBVF9JUzogZnVuY3Rpb24oeCwgeSkgeyAgLy8gMVxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcxLmRhdGEsICdkZmxhZycsIHRydWUpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzPycpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzPycpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzPycpO1xuICAgICAgICB9LFxuXG4gICAgICAgIFdIQVRfSVNfTk9UOiBmdW5jdGlvbih4LCB5KSB7IC8vIDJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMS5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcyBub3Q/Jyk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXMgbm90PycpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzIG5vdD8nKTtcbiAgICAgICAgfSxcblxuICAgICAgICBESVNUSU5HVUlTSF9CRVRXRUVOOiBmdW5jdGlvbih4LCB5KSB7IC8vIDNcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMS5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcz8nKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcz8nKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcz8nKTtcblxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcyLmRhdGEsICdkZmxhZycsIHRydWUpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ2lzPycpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ2lzPycpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ2lzPycpO1xuICAgICAgICB9LFxuXG4gICAgICAgIENPTVBBUkVfQ09OVFJBU1Q6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gNFxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMTUwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMTUwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcxLmRhdGEsICdkZmxhZycsIHRydWUpO1xuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcyLmRhdGEsICdkZmxhZycsIHRydWUpO1xuICAgICAgICAgICAgdmFyIHJ0aGluZzEgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAnY29udHJhc3QnKTtcbiAgICAgICAgICAgIHZhciBydGhpbmcyID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ2NvbXBhcmUnKTtcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHJ0aGluZzEubGFiZWxlZExpbmsuZGF0YSwgJ3R5cGUnLCAndG9Gcm9tJyk7XG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShydGhpbmcyLmxhYmVsZWRMaW5rLmRhdGEsICd0eXBlJywgJ3RvRnJvbScpO1xuICAgICAgICB9LFxuXG4gICAgICAgIFBBUlRTX09GOiBmdW5jdGlvbih4LCB5KSB7IC8vIDVcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcbiAgICAgICAgfSxcblxuICAgICAgICBQQVJUX09GOiBmdW5jdGlvbih4LCB5KSB7IC8vIDZcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJ3BhcnQgb2Y/Jyk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIFBBUlRTX0hBVkVfUEFSVFM6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gN1xuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xuICAgICAgICAgICAgdmFyIGNoaWxkMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGNoaWxkMSwgJ3BhcnQ/Jyk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoY2hpbGQxLCAncGFydD8nKTtcbiAgICAgICAgICAgIHZhciBjaGlsZDIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChjaGlsZDIsICdwYXJ0PycpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGNoaWxkMiwgJ3BhcnQ/Jyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgUl9QQVJUUzogZnVuY3Rpb24oeCwgeSkgeyAvLyA4XG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XG4gICAgICAgICAgICB2YXIgcnRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ3JlbGF0aW9uc2hpcD8nKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChydGhpbmcsICdwYXJ0PycpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHJ0aGluZywgJ3BhcnQ/Jyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgUF9QQVJUUzogZnVuY3Rpb24oeCwgeSkgeyAvLyA5XG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAzMDAsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XG4gICAgICAgICAgICB2YXIgY2hpbGQxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludCBvZiAnICsgJHNjb3BlLmVjaG9Db25jZXB0MigpICsgJz8nKTtcbiAgICAgICAgICAgIHZhciBjaGlsZDIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydCBzZWVuIGZyb20gdmlld3BvaW50IG9mICcgKyAkc2NvcGUuZWNob0NvbmNlcHQyKCkgKyAnPycpO1xuICAgICAgICAgICAgdmFyIGNoaWxkMyA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQgb2YgJyArICRzY29wZS5lY2hvQ29uY2VwdDIoKSArICc/Jyk7XG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcyLCB0aGluZzEpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHRoaW5nMiwgY2hpbGQxKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayh0aGluZzIsIGNoaWxkMik7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcyLCBjaGlsZDMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIFJTX1RPX0FORF9CWTogZnVuY3Rpb24oeCwgeSkgeyAvLyAxMFxuICAgICAgICAgICAgdmFyIHJlbGF0ZWQxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICdyZWxhdGVkIGlkZWE/Jyk7XG4gICAgICAgICAgICB2YXIgcmVsYXRlZDIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDMwMCwgeSArIDUwLCAncmVsYXRlZCBpZGVhPycpO1xuICAgICAgICAgICAgdmFyIHJlbGF0ZWQzID0gbWFwLmNyZWF0ZVRoaW5nKHggKyA1MCwgeSArIDMwMCwgJ3JlbGF0ZWQgaWRlYT8nKTtcbiAgICAgICAgICAgIHZhciB0aGluZyA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMTMwLCB5ICsgMTMwLCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rKHJlbGF0ZWQxLCB0aGluZyk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmsocmVsYXRlZDIsIHRoaW5nKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGluayhyZWxhdGVkMywgdGhpbmcpO1xuXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHggKyA1MDAsIHkgKyAxNTAsICdpZGVhPycpO1xuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgNzUwLCB5ICsgMTUwLCAnaWRlYT8nKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgV0hBVF9JU19SOiBmdW5jdGlvbih4LCB5KSB7IC8vIDExXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAnaWRlYT8nKTtcbiAgICAgICAgfSxcblxuICAgICAgICBQQVJUX1JTX0FSRTogZnVuY3Rpb24oeCwgeSkgeyAvLyAxMlxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMzAsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSwgJ2ZyZWVoYW5kJyk7XG4gICAgICAgICAgICB2YXIgY2hpbGQxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XG4gICAgICAgICAgICB2YXIgY2hpbGQyID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XG4gICAgICAgICAgICB2YXIgY2hpbGQzID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShjaGlsZDEuZGF0YSwgJ2xvYycsICctMjAgMTEwJyk7XG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShjaGlsZDIuZGF0YSwgJ2xvYycsICc4MCAxMTAnKTtcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGNoaWxkMy5kYXRhLCAnbG9jJywgJzMwIDE5MCcpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDEsIGNoaWxkMiwgJ3JlbGF0aW9uc2hpcD8nKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQyLCBjaGlsZDMsICdyZWxhdGlvbnNoaXA/Jyk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMywgY2hpbGQxLCAncmVsYXRpb25zaGlwPycpO1xuICAgICAgICB9LFxuXG4gICAgICAgIFBBUlRfUlNfRVhJU1Q6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTNcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpLCAncmlnaHQnKTtcbiAgICAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XG4gICAgICAgICAgICB2YXIgY2hpbGQxMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xuICAgICAgICAgICAgdmFyIGNoaWxkMTMgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcbiAgICAgICAgICAgIHZhciBjaGlsZDIxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ3BhcnQ/Jyk7XG4gICAgICAgICAgICB2YXIgY2hpbGQyMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdwYXJ0PycpO1xuICAgICAgICAgICAgdmFyIGNoaWxkMjMgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAncGFydD8nKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMik7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMTEsIGNoaWxkMjEsICdyZWxhdGlvbnNoaXA/Jyk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMTIsIGNoaWxkMjIsICdyZWxhdGlvbnNoaXA/Jyk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMTMsIGNoaWxkMjMsICdyZWxhdGlvbnNoaXA/Jyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgUlNfV0lUSF9PVEhFUlM6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTRcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDIwMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDIwMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcbiAgICAgICAgICAgIHZhciB0aGluZzMgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDIwMCwgeSArIDIwMCwgJ2Fub3RoZXIgdGhpbmcnKTtcbiAgICAgICAgICAgIHZhciB0aGluZzQgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDIwMCwgeSArIDIwMCwgJ2Fub3RoZXIgdGhpbmcnKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdyZWxhdGlvbnNoaXA/Jyk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmczLCAncmVsYXRpb25zaGlwPycpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nNCwgJ3JlbGF0aW9uc2hpcD8nKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcyLCB0aGluZzQsICdyZWxhdGlvbnNoaXA/Jyk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMywgdGhpbmc0LCAncmVsYXRpb25zaGlwPycpO1xuICAgICAgICB9LFxuXG4gICAgICAgIFBBUlRTX09GX1A6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTVcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDEwMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcbiAgICAgICAgICAgIHZhciBjaGlsZDEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcbiAgICAgICAgICAgIHZhciBjaGlsZDIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcbiAgICAgICAgICAgIHZhciBjaGlsZDMgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDEwMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayh0aGluZzEsIHRoaW5nMik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgUE9JTlRfRk9SOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE2XG4gICAgICAgICAgICB2YXIgdGhpbmcgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJ25ldyBwZXJzcGVjdGl2ZScpO1xuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMTUwLCB5ICsgMTUwLCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMTUwLCB5ICsgMTUwLCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xuICAgICAgICAgICAgdmFyIHJ0aGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdyZWxhdGlvbnNoaXA/Jyk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcsIHJ0aGluZyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgSEFTX01VTFRJUExFX1BTOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE3XG4gICAgICAgICAgICB2YXIgcG9pbnQxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHkgKyA1MCwgJ3ZpZXdwb2ludD8nKTtcbiAgICAgICAgICAgIHZhciBwb2ludDIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSwgJ3ZpZXdwb2ludD8nKTtcbiAgICAgICAgICAgIHZhciBwb2ludDMgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDUwMCwgeSArIDUwLCAndmlld3BvaW50PycpO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSArIDI1MCwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDEsIHZpZXcpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50Miwgdmlldyk7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsocG9pbnQzLCB2aWV3KTtcbiAgICAgICAgfSxcblxuICAgICAgICBQQVJUU19GUk9NX01VTFRJUExFX1BTOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE4XG4gICAgICAgICAgICB2YXIgcG9pbnQxID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHksICd2aWV3cG9pbnQ/Jyk7XG4gICAgICAgICAgICB2YXIgcG9pbnQyID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHkgKyAxMjUsICd2aWV3cG9pbnQ/Jyk7XG4gICAgICAgICAgICB2YXIgcG9pbnQzID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHkgKyAyNTAsICd2aWV3cG9pbnQ/Jyk7XG4gICAgICAgICAgICB2YXIgdGhpbmcgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDE1MCwgeSArIDI1LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xuICAgICAgICAgICAgdmFyIGNoaWxkMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZywgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludD8nKTtcbiAgICAgICAgICAgIHZhciBjaGlsZDIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQ/Jyk7XG4gICAgICAgICAgICB2YXIgY2hpbGQzID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nLCAncGFydCBzZWVuIGZyb20gdmlld3BvaW50PycpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50MSwgY2hpbGQxKTtcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDEsIGNoaWxkMik7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsocG9pbnQyLCBjaGlsZDIpO1xuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50MywgY2hpbGQzKTtcbiAgICAgICAgfSxcblxuICAgICAgICBXSEFUX0FCT1VUOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE5XG4gICAgICAgICAgICAkc2NvcGUucXVlcmllcy5XSEFUX0lTKHgsIHkpO1xuICAgICAgICAgICAgJHNjb3BlLnF1ZXJpZXMuUEFSVFNfT0YoeCArIDMwMCwgeSk7XG4gICAgICAgICAgICAkc2NvcGUucXVlcmllcy5QQVJUU19GUk9NX01VTFRJUExFX1BTKHggKyA3MDAsIHkpO1xuICAgICAgICAgICAgJHNjb3BlLnF1ZXJpZXMuUlNfVE9fQU5EX0JZKHgsIHkgKyA0MDApO1xuICAgICAgICB9XG4gICAgfTsgLy8gcXVlcmllc1xuXG59O1xuXG5HZW5lcmF0b3JDdHJsLiRpbmplY3QgPSBbJyRzY29wZSddO1xuXG5cblNhbmRiYW5rRWRpdG9yLkdlbmVyYXRvciA9IGZ1bmN0aW9uICgkc2NvcGUsIG1hcCkge1xuXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBOQjogZ2VuZXJhdG9yIGlzIG9wZW5lZCBvbiBsb2FkIG9mIGVtcHR5IG1hcDsgc2VlIG1hcC5qczpsb2FkKClcbiAgICB9O1xuXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgaWYgKG9sZFZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9HRU5FUkFUT1IpIHsgLy8gY2xvc2luZyB0YWJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZChmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX0dFTkVSQVRPUikgeyAvLyBvcGVuaW5nIHRhYlxuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIHRoZXNlIGdldCBmaWx0ZXJlZCBvdXQgaW4gTGVzc29uQm9va1xuICAgIHRoaXMuZ2V0UGxhY2Vob2xkZXJJZGVhTmFtZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFsnaXM/JywgJ2lzIG5vdD8nLCAncGFydD8nLCAndmlld3BvaW50PycsICdyZWxhdGVkIGlkZWE/JywgJ2lkZWE/JyxcbiAgICAgICAgICAgICAgICAncGFydCBzZWVuIGZyb20gdmlld3BvaW50PycsICdjb250cmFzdD8nLCAnY29tcGFyaXNvbj8nLCAncmVsYXRpb25zaGlwPyddO1xuICAgIH07XG59O1xuIiwiLy8gbGF5b3V0cyB1c2VkIGluIHRoZSBlZGl0b3IsIGZvciB0aGUgZGlhZ3JhbSBvciBpbmRpdmlkdWFsIEdyb3VwcywgcGx1cyBsYXlvdXQtcmVsYXRlZCBmdW5jdGlvbnNcblxuU2FuZGJhbmtFZGl0b3IuTGF5b3V0cyA9IGZ1bmN0aW9uKCRzY29wZSwgbWFwKSB7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgdGhpcy5oYW5kbGVEaWFncmFtRXZlbnQgPSBmdW5jdGlvbihldmVudE5hbWUsIGUpIHtcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdJbml0aWFsTGF5b3V0Q29tcGxldGVkJykge1xuICAgICAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xuICAgICAgICAgICAgZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnU2VsZWN0aW9uTW92ZWQnKSB7XG4gICAgICAgICAgICB1cGRhdGVTZWxlY3RlZFBhcnRMb2NhdGlvbkRhdGEoZSk7XG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmxheW91dERpYWdyYW0odHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25EZWxldGVkJykge1xuICAgICAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnUGFydENyZWF0ZWQnKSB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdMYXlvdXRzLCBQYXJ0Q3JlYXRlZCcpO1xuICAgICAgICAgICAgLy8gc2V0TmV3UGFydExvY2F0aW9uRGF0YShlKTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1BhcnRSZXNpemVkJykge1xuICAgICAgICAgICAgc2V0UmVzaXplZFBhcnREaW1lbnNpb25EYXRhKGUpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnTGlua0RyYXduJykge1xuICAgICAgICAgICAgYWRqdXN0TGlua0xheW91dChlLnN1YmplY3QpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnTGlua1JlbGlua2VkJykge1xuICAgICAgICAgICAgYWRqdXN0TGlua0xheW91dChlLnN1YmplY3QpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLSBoYW5kbGUgbG9jYXRpb24vc2l6ZSBhdHRyaWJ1dGVzIGZvciBub2RlcyAtLS0tLS0tLS0tLS0tLS1cblxuICAgIC8vIG9ubHkgdXBkYXRlIHcvaCBmb3Igc2xpZGVzLCBhcyBhbGwgb3RoZXIgbm9kZSB0eXBlcyBoYXZlIGZpeGVkIGRpbWVuc2lvbnMgYWNjb3JkaW5nIHRvIHRoZSB0ZW1wbGF0ZXNcbiAgICBmdW5jdGlvbiBzZXRSZXNpemVkUGFydERpbWVuc2lvbkRhdGEoZSkge1xuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgIHZhciBub2RlID0gZS5zdWJqZWN0O1xuICAgICAgICBpZiAobm9kZSAmJiBub2RlLmNhdGVnb3J5ID09ICdzbGlkZScpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ1BhcnRSZXNpemVkOiAnICsgbm9kZS5wYXJ0LmFjdHVhbEJvdW5kcyk7XG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShub2RlLmRhdGEsICd3aWR0aCcsIG5vZGUucGFydC5hY3R1YWxCb3VuZHMud2lkdGgpO1xuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobm9kZS5kYXRhLCAnaGVpZ2h0Jywgbm9kZS5wYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gc2V0IHRoZSAnbG9jJyBhdHRyaWJ1dGUgZm9yIGEgbmV3IHRvcC1sZXZlbCBub2RlIChjcmVhdGVkIGJ5IGRvdWJsZS1jbGlja2luZyksIHRvIHN1cHBvcnQgZnJlZWhhbmQgbGF5b3V0XG4gICAgdGhpcy5zZXROZXdQYXJ0TG9jYXRpb25EYXRhID0gZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgbm9kZSA9IGUuc3ViamVjdDtcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5wYXJ0KSB7XG4gICAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XG4gICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkobm9kZS5kYXRhLCAnbG9jJywgbm9kZS5wYXJ0LmxvY2F0aW9uLnggKyAnICcgKyBub2RlLnBhcnQubG9jYXRpb24ueSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gdXBkYXRlcyB0aGUgJ2xvYycgYXR0cmlidXRlIGZvciBlYWNoIHNlbGVjdGVkIHBhcnQsIHRvIHN1cHBvcnQgZnJlZWhhbmQgbGF5b3V0IChkb2VzIG5vdCBhcHBseSB0byBzbGlkZXMpXG4gICAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0ZWRQYXJ0TG9jYXRpb25EYXRhKGUpIHtcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xuICAgICAgICB2YXIgaXQgPSBkaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xuICAgICAgICAgICAgaWYgKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHsgLy8gdGhpbmdcbiAgICAgICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRYID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50WSA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnQuY29udGFpbmluZ0dyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFggPSBwYXJ0LmNvbnRhaW5pbmdHcm91cC5sb2NhdGlvbi54O1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRZID0gcGFydC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbW92aW5nIGdyb3VwLCBzdWJqZWN0OiAnICsgZS5zdWJqZWN0ICsgJywgcGFydDogJyArIHBhcnQgKyAnLCBoZWlnaHQ6ICcgKyBwYXJ0LnBhcnQuZGVzaXJlZFNpemUuaGVpZ2h0ICsgJywgbG9jYXRpb246ICcgKyBwYXJ0LnBhcnQubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFydC5sb2NhdGlvbi54KSkge1xuICAgICAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShwYXJ0LmRhdGEsICdsb2MnLCAocGFydC5sb2NhdGlvbi54IC0gcGFyZW50WCkgKyAnICcgKyAocGFydC5sb2NhdGlvbi55IC0gcGFyZW50WSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIC0tLS0tLS0tLS0tIGNoYW5naW5nIGxheW91dHMgb2YgdGhpbmdzIGFuZCB0aGVpciBkZXNjZW5kYW50cyAtLS0tLS0tLS0tLS0tLS0tXG5cbiAgICB0aGlzLmZyb21BbmRUb05vZGVzQXJlVmlzaWJsZSA9IGZ1bmN0aW9uKGxpbmspIHtcbiAgICAgICAgcmV0dXJuIGxpbmsuZnJvbU5vZGUgJiZcbiAgICAgICAgICAgIGxpbmsudG9Ob2RlICYmXG4gICAgICAgICAgICAhc2VsZi5oYXNDb2xsYXBzZWRBbmNlc3RvcihsaW5rLmZyb21Ob2RlKSAmJlxuICAgICAgICAgICAgIXNlbGYuaGFzQ29sbGFwc2VkQW5jZXN0b3IobGluay50b05vZGUpO1xuICAgIH07XG5cbiAgICB0aGlzLmxhYmVsTm9kZUlzVmlzaWJsZSA9IGZ1bmN0aW9uKGxpbmspIHtcbiAgICAgICAgcmV0dXJuIGxpbmsubGFiZWxOb2Rlcy5jb3VudCAmJiBsaW5rLmxhYmVsTm9kZXMuZmlyc3QoKS52aXNpYmxlO1xuICAgIH07XG5cbiAgICB0aGlzLmhhc0NvbGxhcHNlZEFuY2VzdG9yID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwLmlzU3ViR3JhcGhFeHBhbmRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBncm91cCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyB0aGlzLmhhc0xpbmtMYWJlbEFuY2VzdG9yID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAvLyAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAvLyAgICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XG4gICAgLy8gICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICAgICAgZWxzZSBpZiAoZ3JvdXAuY29udGFpbmluZ0dyb3VwLmlzTGlua0xhYmVsKSB7XG4gICAgLy8gICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgICAgICBlbHNlIHtcbiAgICAvLyAgICAgICAgICAgICBncm91cCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vIH07XG5cbiAgICB0aGlzLmdldEhpZ2hlc3RBbmNlc3RvcldpdGhMYXlvdXQgPSBmdW5jdGlvbihncm91cCwgbGF5b3V0TmFtZXMpIHtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChfLmNvbnRhaW5zKGxheW91dE5hbWVzLCBncm91cC5jb250YWluaW5nR3JvdXAuZGF0YS5sYXlvdXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZ3JvdXAgPSBncm91cC5jb250YWluaW5nR3JvdXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hcmVTaXN0ZXJzSW5JbnZlbnRvcnlMYXlvdXQgPSBmdW5jdGlvbihncm91cDEsIGdyb3VwMikge1xuICAgICAgICByZXR1cm4gZ3JvdXAxLmNvbnRhaW5pbmdHcm91cCA9PSBncm91cDIuY29udGFpbmluZ0dyb3VwICYmXG4gICAgICAgICAgICBncm91cDEuY29udGFpbmluZ0dyb3VwICYmXG4gICAgICAgICAgICBfLmNvbnRhaW5zKFsnbGVmdCcsICdyaWdodCddLCBncm91cDEuY29udGFpbmluZ0dyb3VwLmRhdGEubGF5b3V0KTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc05vdFdpdGhpbkludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgIHJldHVybiAhc2VsZi5pc1dpdGhpbkludmVudG9yeUxheW91dChncm91cCk7XG4gICAgfTtcblxuICAgIHRoaXMuaXNSVGhpbmdXaXRoaW5JbnZlbnRvcnlMYXlvdXQgPSBmdW5jdGlvbihncm91cCkge1xuICAgICAgICByZXR1cm4gZ3JvdXAuaXNMaW5rTGFiZWwgJiYgc2VsZi5pc1dpdGhpbkludmVudG9yeUxheW91dChncm91cCk7XG4gICAgfTtcblxuICAgIHRoaXMuaXNXaXRoaW5JbnZlbnRvcnlMYXlvdXQgPSBmdW5jdGlvbihncm91cCkge1xuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydsZWZ0JywgJ3JpZ2h0J10pO1xuICAgIH07XG5cbiAgICB0aGlzLmlzV2l0aGluTGVmdEludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgIHJldHVybiBzZWxmLmlzV2l0aGluTGF5b3V0KGdyb3VwLCBbJ2xlZnQnXSk7XG4gICAgfTtcblxuICAgIHRoaXMuaXNXaXRoaW5SaWdodEludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgIHJldHVybiBzZWxmLmlzV2l0aGluTGF5b3V0KGdyb3VwLCBbJ3JpZ2h0J10pO1xuICAgIH07XG5cbiAgICB0aGlzLmlzV2l0aGluRnJlZWhhbmRMYXlvdXQgPSBmdW5jdGlvbihncm91cCkge1xuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydmcmVlaGFuZCddKTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc1dpdGhpblN0YWNrZWRMYXlvdXQgPSBmdW5jdGlvbihncm91cCkge1xuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydzdGFja2VkJ10pO1xuICAgIH07XG5cbiAgICB0aGlzLmlzV2l0aGluTGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXAsIGxheW91dE5hbWVzKSB7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2lzV2l0aGluTGF5b3V0OiAnICsgZ3JvdXAgKyAnbGF5b3V0czogJyArIGxheW91dE5hbWVzLmpvaW4oKSArICc6IGZhbHNlJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChfLmNvbnRhaW5zKGxheW91dE5hbWVzLCBncm91cC5jb250YWluaW5nR3JvdXAuZGF0YS5sYXlvdXQpKSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnaXNXaXRoaW5MYXlvdXQ6ICcgKyBncm91cCArICdsYXlvdXRzOiAnICsgbGF5b3V0TmFtZXMuam9pbigpICsgJzogdHJ1ZScpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBncm91cCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNob3dMZWZ0VGV4dEJsb2NrID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuaXNXaXRoaW5SaWdodEludmVudG9yeUxheW91dChncm91cCkgJiZcbiAgICAgICAgICAgICFzZWxmLmlzV2l0aGluU3RhY2tlZExheW91dChncm91cCkgJiZcbiAgICAgICAgICAgICFncm91cC5pc0xpbmtMYWJlbDtcbiAgICB9O1xuXG4gICAgdGhpcy5zaG93UmlnaHRUZXh0QmxvY2sgPSBmdW5jdGlvbihncm91cCkge1xuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxlZnRJbnZlbnRvcnlMYXlvdXQoZ3JvdXApICYmXG4gICAgICAgICAgICAhc2VsZi5pc1dpdGhpblN0YWNrZWRMYXlvdXQoZ3JvdXApICYmXG4gICAgICAgICAgICAhZ3JvdXAuaXNMaW5rTGFiZWw7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0RGVzY2VuZGFudExheW91dHMgPSBmdW5jdGlvbihncm91cCwgbGF5b3V0TmFtZSkge1xuICAgICAgICBpZiAobGF5b3V0TmFtZSA9PSAnbGVmdCcgfHwgbGF5b3V0TmFtZSA9PSAncmlnaHQnIHx8IGxheW91dE5hbWUgPT0gJ3N0YWNrZWQnKSB7XG4gICAgICAgICAgICB2YXIgaXQgPSBncm91cC5tZW1iZXJQYXJ0cy5pdGVyYXRvcjtcbiAgICAgICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgIXBhcnQuaXNMaW5rTGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFydC5kYXRhLmxheW91dCA9IGxheW91dE5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0RGVzY2VuZGFudExheW91dHMocGFydCwgbGF5b3V0TmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGxheW91dE5hbWUgPT0gJ2ZyZWVoYW5kJykge1xuICAgICAgICAgICAgLy8gc3RhY2tlZD9cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmRpc2FibGVMYXlvdXRGb3JTZWxlY3RlZFRoaW5ncyA9IGZ1bmN0aW9uKGxheW91dE5hbWUpIHtcbiAgICAgICAgdmFyIGl0ID0gbWFwLmdldERpYWdyYW0oKS5zZWxlY3Rpb24uaXRlcmF0b3I7XG4gICAgICAgIGlmICghaXQuY291bnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgIGlmICghKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmlzV2l0aGluTGF5b3V0KGdyb3VwLCBbJ2xlZnQnLCAncmlnaHQnLCAnc3RhY2tlZCddKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBzY2FsaW5nIGZ1bmN0aW9ucywgZXRjLiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvLyBDb21wdXRlcyB0aGUgbGV2ZWwgb2YgdGhpcyBncm91cFxuICAgIHRoaXMuY29tcHV0ZUxldmVsID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnY29tcHV0ZUxldmVsLCBwYXJ0OiAnICsgcGFydCArICcsIGNvbnRhaW5pbmdHcm91cDogJyArIHBhcnQuY29udGFpbmluZ0dyb3VwKTtcbiAgICAgICAgaWYgKCEoZ3JvdXAgaW5zdGFuY2VvZiBnby5Hcm91cCkgfHwgZ3JvdXAuY29udGFpbmluZ0dyb3VwID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbXB1dGVMZXZlbChncm91cC5jb250YWluaW5nR3JvdXApICsgMTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBnZXRzIHRoZSBiYXNpYyBzY2FsaW5nIGZvciB0aGluZyBzcXVhcmVzLCBieSBsZXZlbFxuICAgIGZ1bmN0aW9uIGdldFRoaW5nU2NhbGUobGV2ZWwpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KDAuNDUsIGxldmVsKTsgLy8gMSwgLjQ1LCAuMjAyNSwgLjA5MTEyNSwgLi4uXG4gICAgfVxuXG4gICAgLy8gdGhpcyBpcyBvbmx5IHVzZWQgZm9yIGdyb3Vwc1xuICAgIHRoaXMuZ2V0U2NhbGUgPSBmdW5jdGlvbihncm91cCwgdmlzaXRlZEdyb3VwS2V5cykge1xuICAgICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgICAgIC8vIGtlZXAgdHJhY2sgb2YgZ3JvdXBzIHdlJ3ZlIHZpc2l0ZWQgdG8gYXZvaWQgaW5maW5pdGUgcmVjdXJzaW9uXG4gICAgICAgICAgICAvLyBUT0RPOiB0cmFjayBkb3duIGV4YWN0bHkgaG93IGluZmluaXRlIGxvb3BzIGFyZSBvY2N1cnJpbmcsXG4gICAgICAgICAgICAvLyBvciBJRiB0aGV5IHN0aWxsIGFyZSBzaW5jZSBtYXAuY2hlY2tNb2RlbCB3YXMgaW50cm9kdWNlZC4uLlxuICAgICAgICAgICAgaWYgKHZpc2l0ZWRHcm91cEtleXMgJiYgQXJyYXkuaXNBcnJheSh2aXNpdGVkR3JvdXBLZXlzKSkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Zpc2l0ZWRHcm91cEtleXM6ICcgKyB2aXNpdGVkR3JvdXBLZXlzKTtcbiAgICAgICAgICAgICAgICBpZiAoXy5jb250YWlucyh2aXNpdGVkR3JvdXBLZXlzLCBncm91cC5kYXRhLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnaGl0IGFscmVhZHkgdmlzaXRlZCBrZXk6ICcgKyBncm91cC5kYXRhLmtleSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRHcm91cEtleXMucHVzaChncm91cC5kYXRhLmtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2aXNpdGVkR3JvdXBLZXlzID0gW2dyb3VwLmRhdGEua2V5XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGdyb3VwLmxhYmVsZWRMaW5rKSB7IC8vIFItdGhpbmdcbiAgICAgICAgICAgICAgICB2YXIgZnJvbVNjYWxlID0gc2VsZi5nZXRTY2FsZShncm91cC5sYWJlbGVkTGluay5mcm9tTm9kZSwgdmlzaXRlZEdyb3VwS2V5cyk7XG4gICAgICAgICAgICAgICAgdmFyIHRvU2NhbGUgPSBzZWxmLmdldFNjYWxlKGdyb3VwLmxhYmVsZWRMaW5rLnRvTm9kZSwgdmlzaXRlZEdyb3VwS2V5cyk7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2NhbGUsIGZyb21TY2FsZTogJyArIGZyb21TY2FsZSArICcsIHRvU2NhbGU6ICcgKyB0b1NjYWxlICsgJywgdmlzaXRlZEdyb3VwS2V5czogJyArIHZpc2l0ZWRHcm91cEtleXMuam9pbignLCcpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oZnJvbVNjYWxlLCB0b1NjYWxlKSAqIDAuNTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0U2NhbGUoZ3JvdXAuY29udGFpbmluZ0dyb3VwLCB2aXNpdGVkR3JvdXBLZXlzKSAqIDAuNDU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRUaGluZ1NjYWxlKHNlbGYuY29tcHV0ZUxldmVsKGdyb3VwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDE7IC8vIGNhbiBvY2N1ciB3aGVuIGRyYWdnaW5nIFIgdG8gZW1wdHkgc3BhY2VcbiAgICB9O1xuXG4gICAgLy8gZ2V0cyB0aGUgbWFyZ2luIHRvIGJlIHVzZWQgaW4gc3RhY2sgbGF5b3V0IGJldHdlZW4gdGhpcyBncm91cCdzIGNoaWxkcmVuXG4gICAgZnVuY3Rpb24gZ2V0U3RhY2tNYXJnaW4oZ3JvdXApIHtcbiAgICAgICAgcmV0dXJuICgxMCAvIDAuNDUpICogc2VsZi5nZXRTY2FsZShncm91cCk7XG4gICAgfVxuXG4gICAgLy8gZ2V0cyB0aGUgbWFyZ2luIHRvIGJlIHVzZWQgaW4gc3RhY2sgbGF5b3V0IGJldHdlZW4gdGhpcyBncm91cCdzIGNoaWxkcmVuXG4gICAgZnVuY3Rpb24gZ2V0SW52ZW50b3J5TWFyZ2luKGdyb3VwKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbXB1dGVMZXZlbChncm91cCkgPD0gMikge1xuICAgICAgICAgICAgcmV0dXJuIDEwICogc2VsZi5nZXRTY2FsZShncm91cCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMyAqIHNlbGYuZ2V0U2NhbGUoZ3JvdXApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5nZXRFeHRlcm5hbFRleHRTY2FsZSA9IGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgIHJldHVybiAxIC0gMC4xICogc2VsZi5jb21wdXRlTGV2ZWwoZ3JvdXApO1xuICAgIH07XG5cbiAgICB0aGlzLmdldExpbmtTdHJva2VXaWR0aCA9IGZ1bmN0aW9uKGxpbmspIHtcbiAgICAgICAgdmFyIGZyb21TY2FsZSA9IHNlbGYuZ2V0U2NhbGUobGluay5mcm9tTm9kZSk7XG4gICAgICAgIHZhciB0b1NjYWxlID0gc2VsZi5nZXRTY2FsZShsaW5rLnRvTm9kZSk7XG4gICAgICAgIHJldHVybiAobGluay5pc1NlbGVjdGVkID8gNCA6IDIpICogTWF0aC5taW4oZnJvbVNjYWxlLCB0b1NjYWxlKTsgLy8gMiwgLjksIC4uLlxuICAgIH07XG5cbiAgICAvLyBzY2FsZSBhcnJvd2hlYWRzIGJhc2VkIG9uIHRoZSBzbWFsbGVzdCB0by9mcm9tIG5vZGUsIFxuICAgIC8vIG9yIGp1c3QgdGhlIFRvIG5vZGUgZm9yIFAgbGlua3NcbiAgICB0aGlzLmdldEFycm93aGVhZFNjYWxlID0gZnVuY3Rpb24obGluaykge1xuICAgICAgICB2YXIgZnJvbVNjYWxlID0gc2VsZi5nZXRTY2FsZShsaW5rLmZyb21Ob2RlKTtcbiAgICAgICAgdmFyIHRvU2NhbGUgPSBzZWxmLmdldFNjYWxlKGxpbmsudG9Ob2RlKTtcbiAgICAgICAgdmFyIG1pblNjYWxlID0gTWF0aC5taW4oZnJvbVNjYWxlLCB0b1NjYWxlKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcImdldEFycm93aGVhZFNjYWxlLCBmcm9tU2NhbGU6IFwiLCBmcm9tU2NhbGUsICcsIHRvU2NhbGU6ICcsIHRvU2NhbGUsICcsIG1pblNjYWxlOiAnLCBtaW5TY2FsZSk7XG4gICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnKSB7XG4gICAgICAgICAgICBtaW5TY2FsZSA9IHRvU2NhbGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1pblNjYWxlID49IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAxICogbWluU2NhbGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMS41ICogbWluU2NhbGU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gY3JlYXRpbmcgbmV3IHRoaW5ncyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvLyBSZXR1cm5zIGEgbG9jYXRpb24gZm9yIGEgbmV3IHNpc3RlciBncm91cCAodGhpbmcpIHRvIHRoZSBnaXZlbiBvbmUsIFxuICAgIC8vIHdoaWNoIHdpbGwgbm90IGhpZGUgYW55IGV4aXN0aW5nIHRoaW5ncyAob3ZlcmxhcCBpcyBhbGxvd2VkKS4gXG4gICAgLy8gVGhlIHJldHVybmVkIGNvb3JkaW5hdGVzIGFyZSBhYnNvbHV0ZSBmb3IgYSB0b3AtbGV2ZWwgZ3JvdXAsIFxuICAgIC8vIG9yIHJlbGF0aXZlIHRvIHRoZSBwYXJlbnQgb3RoZXJ3aXNlIC0gc3VpdGFibGUgZm9yIHVzZSB3aXRoIEZyZWVoYW5kRGlhZ3JhbUxheW91dFxuICAgIC8vIG9yIEZyZWVoYW5kTGF5b3V0LCByZXNwLlxuICAgIHRoaXMuZ2V0TmV3U2lzdGVyTG9jYXRpb24gPSBmdW5jdGlvbihncm91cCwgd2l0aFIpIHtcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xuICAgICAgICAvLyBpZiB3ZSBhcmUgd2l0aGluIGFub3RoZXIgZ3JvdXAsIHRoaW5ncyBhcmUgaW4gYWJzb2x1dGUgY29vcmRpbmF0ZXNcbiAgICAgICAgLy8gYW5kIHNpc3RlcnMgYXJlIHBsYWNlZCBhYm92ZSB0aGUgdGhpbmc7IG90aGVyd2lzZSByZWxhdGl2ZSBhbmQgYmVsb3cuLi5cbiAgICAgICAgdmFyIGluR3JvdXAgPSAoZ3JvdXAuY29udGFpbmluZ0dyb3VwICE9PSBudWxsKTtcbiAgICAgICAgLy8gLi4uIGV4Y2VwdCBpZiB3aXRoUiBpcyB0cnVlLCB3ZSBnbyB0byB0aGUgcmlnaHQgaW5zdGVhZCBvZiBhYm92ZSBvciBiZWxvdy5cblxuICAgICAgICAvLyBzdGFydCBiZWxvdyBpZiBpbiBncm91cCwgZWxzZSBhYm92ZTsgb3IgdG8gdGhlIHJpZ2h0IGlmIHdpdGhSXG4gICAgICAgIHZhciB4LCB5LCB3LCBoO1xuICAgICAgICBpZiAod2l0aFIpIHtcbiAgICAgICAgICAgIHggPSBncm91cC5sb2NhdGlvbi54ICsgZ3JvdXAuYWN0dWFsQm91bmRzLndpZHRoICogMi4yO1xuICAgICAgICAgICAgeSA9IGdyb3VwLmxvY2F0aW9uLnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4ID0gZ3JvdXAubG9jYXRpb24ueDtcbiAgICAgICAgICAgIHkgPSBncm91cC5sb2NhdGlvbi55ICsgZ3JvdXAuYWN0dWFsQm91bmRzLmhlaWdodCAqIDEuMSAqIChpbkdyb3VwID8gMSA6IC0xKTtcbiAgICAgICAgfVxuICAgICAgICB3ID0gZ3JvdXAuYWN0dWFsQm91bmRzLndpZHRoO1xuICAgICAgICBoID0gZ3JvdXAuYWN0dWFsQm91bmRzLmhlaWdodDtcblxuICAgICAgICAvLyBjaGVjayBmb3Igb3ZlcmxhcHBpbmcgcGFydHM7IGlmIGZvdW5kLCBpbmNyZW1lbnQgeCx5IGFuZCBjb250aW51ZVxuXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IG5ldyBnby5SZWN0KHgsIHksIHcsIGgpO1xuICAgICAgICAgICAgcmVjdC5ncm93KGggLyAxMCwgdyAvIDEwLCBoIC8gMTAsIHcgLyAxMCk7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBkaWFncmFtLmZpbmRPYmplY3RzSW4ocmVjdCwgbnVsbCwgc2VsZi5pc0dyb3VwKTtcbiAgICAgICAgICAgIGlmIChwYXJ0cy5jb3VudCkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2dldE5ld1Npc3RlckxvY2F0aW9uOiBvdmVybGFwcGluZyBwYXJ0IGZvdW5kIGluICcgKyByZWN0KTtcbiAgICAgICAgICAgICAgICBpZiAod2l0aFIpIHtcbiAgICAgICAgICAgICAgICAgICAgeCArPSB3IC8gMTA7XG4gICAgICAgICAgICAgICAgICAgIHkgKz0gaCAvIDEwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHggKz0gdyAvIDEwO1xuICAgICAgICAgICAgICAgICAgICB5ICs9IGggLyAxMCAqIChpbkdyb3VwID8gMSA6IC0xKTsgLy8gbW92ZSBkb3duIGlmIGluIGdyb3VwLCBlbHNlIHVwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXROZXdTaXN0ZXJMb2NhdGlvbjogbm8gb3ZlcmxhcHBpbmcgcGFydCBmb3VuZCBpbiAnICsgcmVjdCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluR3JvdXApIHsgLy8gbWFrZSBjb29yZGluYXRlcyByZWxhdGl2ZVxuICAgICAgICAgICAgeCAtPSBncm91cC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueDtcbiAgICAgICAgICAgIHkgLT0gZ3JvdXAuY29udGFpbmluZ0dyb3VwLmxvY2F0aW9uLnk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBnby5Qb2ludCh4ICsgTWF0aC5yYW5kb20oKSwgeSArIE1hdGgucmFuZG9tKCkpO1xuICAgIH07XG5cbiAgICAvLyBSZXR1cm5zIGEgbG9jYXRpb24gZm9yIGEgbmV3IGNoaWxkIGdyb3VwICh0aGluZykgdG8gdGhlIGdpdmVuIG9uZSxcbiAgICAvLyB3aGljaCB3aWxsIG5vdCBoaWRlIGFueSBleGlzdGluZyBjaGlsZHJlbiAob3ZlcmxhcCBpcyBhbGxvd2VkKS5cbiAgICAvLyBUaGUgcmV0dXJuZWQgY29vcmRpbmF0ZXMgYXJlIHJlbGF0aXZlIHRvIHRoZSBwYXJlbnQgZ3JvdXAgLSBzdWl0YWJsZSBmb3IgdXNlIHdpdGggRnJlZWhhbmRMYXlvdXQuXG4gICAgdGhpcy5nZXROZXdDaGlsZExvY2F0aW9uID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgdmFyIGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xuICAgICAgICAvLyBOQjogYWxsIHgveSBsb2NhdGlvbnMgYXJlIHJlbGF0aXZlIHRvIHRoZSBncm91cCBsb2NhdGlvblxuICAgICAgICB2YXIgeCA9IDA7XG4gICAgICAgIHZhciB5ID0gZ3JvdXBCb3VuZHMuaGVpZ2h0ICogMS4xO1xuICAgICAgICB2YXIgdywgaDtcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBncm91cC5tZW1iZXJQYXJ0cztcbiAgICAgICAgLy8ga2VlcCB0ZXN0aW5nIG5ldyByZWN0YW5nbGVzIHVudGlsIHdlIGZpbmQgb25lIHRoYXQgZG9lc24ndCBvdmVybGFwIHdpdGggYW55IGV4aXN0aW5nIG1lbWJlciBvZiB0aGUgZ3JvdXBcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIG1lbWJlcnMucmVzZXQoKTtcbiAgICAgICAgICAgIHZhciBvdmVybGFwcyA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIG1lbWJlciwgbmV3UmVjdCwgbWVtYmVyUmVjdDtcbiAgICAgICAgICAgIHdoaWxlIChtZW1iZXJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIG1lbWJlciA9IG1lbWJlcnMudmFsdWU7XG4gICAgICAgICAgICAgICAgdmFyIG1lbWJlckJvdW5kcyA9IG1lbWJlci5hY3R1YWxCb3VuZHM7XG4gICAgICAgICAgICAgICAgdyA9IG1lbWJlckJvdW5kcy53aWR0aDtcbiAgICAgICAgICAgICAgICBoID0gbWVtYmVyQm91bmRzLmhlaWdodDtcbiAgICAgICAgICAgICAgICAvLyBmaW5kIHRoZSBleGlzdGluZyBtZW1iZXIncyBhY3R1YWwgYm91bmRzIChhYnNvbHV0ZSBjb29yZHMpXG4gICAgICAgICAgICAgICAgbWVtYmVyUmVjdCA9IG5ldyBnby5SZWN0KG1lbWJlckJvdW5kcy54IC0gZ3JvdXBCb3VuZHMueCwgbWVtYmVyQm91bmRzLnkgLSBncm91cEJvdW5kcy55LCBtZW1iZXJCb3VuZHMud2lkdGgsIG1lbWJlckJvdW5kcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIG5ld1JlY3QgPSBuZXcgZ28uUmVjdCh4LCB5LCB3LCBoKTtcbiAgICAgICAgICAgICAgICBuZXdSZWN0Lmdyb3coaCAvIDUsIHcgLyA1LCBoIC8gNSwgdyAvIDUpO1xuICAgICAgICAgICAgICAgIG92ZXJsYXBzID0gbmV3UmVjdC5jb250YWluc1JlY3QobWVtYmVyUmVjdCk7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0TmV3Q2hpbGRMb2NhdGlvbiBmb3IgJyArIG1lbWJlciArICc6IG5ld1JlY3QgPSAnICsgbmV3UmVjdCArICcsIG1lbWJlclJlY3QgPSAnICsgbWVtYmVyUmVjdCArICcsIG92ZXJsYXBzOiAnICsgb3ZlcmxhcHMpO1xuICAgICAgICAgICAgICAgIGlmIChvdmVybGFwcykge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3ZlcmxhcHMpIHtcbiAgICAgICAgICAgICAgICAvLyBpbmNyZW1lbnQgeCwgeSBhbmQgdHJ5IGFnYWluXG4gICAgICAgICAgICAgICAgeCArPSB3IC8gNTtcbiAgICAgICAgICAgICAgICB5ICs9IGggLyA1O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBmb3VuZCBhIGdvb2Qgc3BvdCFcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGdvLlBvaW50KHgsIHkpO1xuICAgIH07XG5cbiAgICAvLyBhIHNpbXBsZXIgdmVyc2lvbiBvZiBnZXROZXdDaGlsZExvY2F0aW9uIHRoYXQgcGxhY2VzIHRoZSBjaGlsZCBvdXRzaWRlIHRoZSBib3VuZHMgb2YgdGhlIGV4aXN0aW5nIGNoaWxkcmVuXG4gICAgdGhpcy5nZXROZXdDaGlsZExvY2F0aW9uMiA9IGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgIHZhciBncm91cEJvdW5kcyA9IGdyb3VwLmFjdHVhbEJvdW5kcztcbiAgICAgICAgdmFyIGNoaWxkQm91bmRzID0gbWFwLnNhZmVSZWN0KG1hcC5nZXREaWFncmFtKCkuY29tcHV0ZVBhcnRzQm91bmRzKGdyb3VwLm1lbWJlclBhcnRzKSk7XG4gICAgICAgIHZhciB4ID0gMDtcbiAgICAgICAgdmFyIHkgPSAwO1xuICAgICAgICBpZiAoIWdyb3VwLm1lbWJlclBhcnRzLmNvdW50KSB7XG4gICAgICAgICAgICB5ID0gZ3JvdXBCb3VuZHMuaGVpZ2h0ICogMS4yO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeSA9IGdyb3VwQm91bmRzLmhlaWdodCAqIDEuNCArIGNoaWxkQm91bmRzLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXROZXdDaGlsZExvY2F0aW9uMiwgY2hpbGRCb3VuZHM6ICcgKyBjaGlsZEJvdW5kcyArICcsIGdyb3VwQm91bmRzOiAnICsgZ3JvdXBCb3VuZHMgKyAnLCB4OiAnICsgeCArICcsIHk6ICcgKyB5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBnby5Qb2ludCh4LCB5KTtcbiAgICB9O1xuXG4gICAgLy8gbW92ZSBhbGwgdGhlIGdpdmVuIG5ldyBtZW1iZXIgZ3JvdXBzIHNvIHRoYXQgdGhlaXIgbG9jYXRpb25zIGFyZSByZWxhdGl2ZSB0byB0aGF0IG9mIFxuICAgIC8vIHRoZSBwYXJlbnQgYW5kIGl0cyBwcmV2aW91c2x5IGV4aXN0aW5nIG1lbWJlcnMsIGFuZCBzY2FsZWQgZG93biBhcHByb3ByaWF0ZWx5XG4gICAgdGhpcy5sYXlvdXROZXdNZW1iZXJzUmVsYXRpdmVUbyA9IGZ1bmN0aW9uKG5ld01lbWJlcnMsIHBhcmVudCwgb2xkTWVtYmVyQm91bmRzKSB7XG4gICAgICAgIC8vIGhvdyBiaWcgd2FzIHRoZSBwYXJlbnQgc3lzdGVtIGJlZm9yZSB0aGUgbmV3IGdyb3VwcyB3ZXJlIGFkZGVkP1xuICAgICAgICB2YXIgc3lzdGVtQm91bmRzID0gcGFyZW50LmFjdHVhbEJvdW5kcy51bmlvblJlY3Qob2xkTWVtYmVyQm91bmRzKTtcblxuICAgICAgICAvLyBmaWd1cmUgb3V0IG9sZC9uZXcgb3JpZ2lucyAtIHBsYWNlIG5ldyBvcmlnaW4gYmVsb3cgZXhpc3Rpbmcgc3lzdGVtXG4gICAgICAgIHZhciBvbGRCb3VuZHMgPSBtYXAuZ2V0RGlhZ3JhbSgpLmNvbXB1dGVQYXJ0c0JvdW5kcyhuZXdNZW1iZXJzKTtcbiAgICAgICAgdmFyIG9sZE9yaWdpbiA9IG5ldyBnby5Qb2ludChvbGRCb3VuZHMueCwgb2xkQm91bmRzLnkpO1xuICAgICAgICB2YXIgbmV3T3JpZ2luID0gbmV3IGdvLlBvaW50KDAsIHN5c3RlbUJvdW5kcy5oZWlnaHQgKiAxLjIpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXROZXdNZW1iZXJzUmVsYXRpdmVUbywgc3lzdGVtQm91bmRzOiAnICsgc3lzdGVtQm91bmRzICsgJywgb2xkQm91bmRzOiAnICsgb2xkQm91bmRzICsgICcsIG9sZE9yaWdpbjogJyArIG9sZE9yaWdpbiArICcsIG5ld09yaWdpbjogJyArIG5ld09yaWdpbik7XG5cbiAgICAgICAgLy8gZmlndXJlIG91dCBuZXcgc2NhbGVkIGxvY2F0aW9uc1xuICAgICAgICAvLyBOQjogd2UgY2FuIGFzc3VtZSBuZXdNZW1iZXJzIGFyZSBhbGwgb25lIGxldmVsIGRvd24gZnJvbSBwYXJlbnQgKHNlZSBtYXAuYWRkU2VsZWN0ZWRUaGluZ3NBc0NoaWxkcmVuT2YpLCBcbiAgICAgICAgLy8gc28gd2UganVzdCBtdWx0aXBseSBieSB0aGUgc3RhbmRhcmQgc2NhbGUgZmFjdG9yXG4gICAgICAgIHZhciBpdCA9IG5ld01lbWJlcnMuaXRlcmF0b3I7XG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xuICAgICAgICAgICAgdmFyIGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xuICAgICAgICAgICAgdmFyIG5ld1ggPSBuZXdPcmlnaW4ueCArIChncm91cEJvdW5kcy54IC0gb2xkT3JpZ2luLngpICogMC40NTtcbiAgICAgICAgICAgIHZhciBuZXdZID0gbmV3T3JpZ2luLnkgKyAoZ3JvdXBCb3VuZHMueSAtIG9sZE9yaWdpbi55KSAqIDAuNDU7XG4gICAgICAgICAgICB2YXIgbmV3TG9jID0gZ28uUG9pbnQuc3RyaW5naWZ5KG5ldyBnby5Qb2ludChuZXdYLCBuZXdZKSk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXROZXdNZW1iZXJzUmVsYXRpdmVUbywgZ3JvdXBCb3VuZHM6ICcgKyBncm91cEJvdW5kcyArICcsIG5ld0xvYzogJyArIG5ld0xvYyk7XG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbG9jJywgbmV3TG9jKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBtb3ZlIGFsbCB0aGUgZ2l2ZW4gb2xkIG1lbWJlciBncm91cHMgc28gdGhhdCB0aGVpciBsb2NhdGlvbnMgYXJlIGFic29sdXRlIGFuZCBhYm92ZVxuICAgIC8vIHRoZSBwYXJlbnQsIGFuZCBzY2FsZWQgdXAgYXBwcm9wcmlhdGVseVxuICAgIHRoaXMubGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZiA9IGZ1bmN0aW9uKG9sZE1lbWJlcnMsIHBhcmVudCwgb2xkTWVtYmVyc0JvdW5kcywgb2xkTWVtYmVyc0xldmVsKSB7XG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgc2NhbGUgZmFjdG9yIChtZW1iZXJzIGNhbiBiZSBkcmFnZ2VkIHVwIG11bHRpcGxlIGxldmVscywgdW5saWtlIGRyYWdnaW5nIGludG8gUylcbiAgICAgICAgdmFyIHNjYWxlRmFjdG9yID0gTWF0aC5wb3coMC40NSwgb2xkTWVtYmVyc0xldmVsIC0gc2VsZi5jb21wdXRlTGV2ZWwocGFyZW50KSk7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2xheW91dE9sZE1lbWJlcnNPdXRzaWRlT2YsIHNjYWxlRmFjdG9yOiAnICsgc2NhbGVGYWN0b3IpO1xuXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgb2xkL25ldyBvcmlnaW5zIC0gcGxhY2UgbmV3IG9yaWdpbiBhYm92ZSBwYXJlbnQsIHdpdGggdmVydGljYWwgc3BhY2UgZm9yIHNjYWxlZC11cCBvbGRNZW1iZXJzXG4gICAgICAgIHZhciBwYXJlbnRCb3VuZHMgPSBwYXJlbnQuYWN0dWFsQm91bmRzO1xuICAgICAgICB2YXIgb2xkT3JpZ2luID0gbmV3IGdvLlBvaW50KG9sZE1lbWJlcnNCb3VuZHMueCwgb2xkTWVtYmVyc0JvdW5kcy55KTtcbiAgICAgICAgdmFyIG5ld09yaWdpbiA9IG5ldyBnby5Qb2ludChwYXJlbnRCb3VuZHMueCwgcGFyZW50Qm91bmRzLnkgLSBvbGRNZW1iZXJzQm91bmRzLmhlaWdodCAqIDEuMiAvIHNjYWxlRmFjdG9yKTtcblxuICAgICAgICAvLyBmaWd1cmUgb3V0IG5ldyBzY2FsZWQgbG9jYXRpb25zXG4gICAgICAgIHZhciBpdCA9IG9sZE1lbWJlcnMuaXRlcmF0b3I7XG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xuICAgICAgICAgICAgdmFyIGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xuICAgICAgICAgICAgdmFyIG5ld1ggPSBuZXdPcmlnaW4ueCArIChncm91cEJvdW5kcy54IC0gb2xkT3JpZ2luLngpIC8gc2NhbGVGYWN0b3I7XG4gICAgICAgICAgICB2YXIgbmV3WSA9IG5ld09yaWdpbi55ICsgKGdyb3VwQm91bmRzLnkgLSBvbGRPcmlnaW4ueSkgLyBzY2FsZUZhY3RvcjtcbiAgICAgICAgICAgIHZhciBuZXdMb2MgPSBnby5Qb2ludC5zdHJpbmdpZnkobmV3IGdvLlBvaW50KG5ld1gsIG5ld1kpKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xheW91dE9sZE1lbWJlcnNPdXRzaWRlT2YsIHBhcmVudEJvdW5kczogJyArIHBhcmVudEJvdW5kcyArICcsIG9sZE1lbWJlcnNCb3VuZHM6ICcgKyBvbGRNZW1iZXJzQm91bmRzICsgJywgbmV3T3JpZ2luOiAnICsgbmV3T3JpZ2luICsgJywgZ3JvdXBCb3VuZHM6ICcgKyBncm91cEJvdW5kcyArICcsIG5ld0xvYzogJyArIG5ld0xvYyk7XG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbG9jJywgZ28uUG9pbnQuc3RyaW5naWZ5KG5ld0xvYykpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tIGFjY2Vzc29ycyAtLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvLyByZXR1cm5zIHRoZSBhcHByb3ByaWF0ZSBsYXlvdXQgY2xhc3MgYnkgYWJicmV2aWF0ZWQgbmFtZVxuICAgIHRoaXMuZ2V0TGF5b3V0ID0gZnVuY3Rpb24obGF5b3V0TmFtZSkge1xuICAgICAgICBpZiAobGF5b3V0TmFtZSA9PSAnZnJlZWhhbmQnKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGcmVlaGFuZExheW91dCgpO1xuICAgICAgICBlbHNlIGlmIChsYXlvdXROYW1lID09ICdyaWdodCcpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJpZ2h0SW52ZW50b3J5TGF5b3V0KCk7XG4gICAgICAgIGVsc2UgaWYgKGxheW91dE5hbWUgPT0gJ3N0YWNrZWQnKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdGFja2VkTGF5b3V0KCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBuZXcgTGVmdEludmVudG9yeUxheW91dCgpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEZyZWVoYW5kRGlhZ3JhbUxheW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IEZyZWVoYW5kRGlhZ3JhbUxheW91dCgpO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIHRoZSB0byBhbmQgZnJvbSBub2RlcyBmb3IgdGhlIGxpbmsgaGF2ZSBhIGNvbW1vbiBhbmNlc3RvciBncm91cCB3aXRoIG9uZSBvZiB0aGUgZ2l2ZW4gbGF5b3V0IG5hbWVzLlxuICAgIC8vIFRPRE86IHZlcmlmeSBsb2dpYyAtIHdoYXQgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHN1Y2ggYW5jZXN0b3JzPyAtIHRoaXMgc2hvdWxkIHJldHVybiB0aGUgaGlnaGVzdCBvbmUuLi5cbiAgICBmdW5jdGlvbiBnZXRDb21tb25BbmNlc3RvcldpdGhMYXlvdXQoZ3JvdXAxLCBncm91cDIsIGxheW91dE5hbWVzKSB7XG4gICAgICAgIHZhciBhbmNlc3RvcnMxID0gc2VsZi5nZXRBbmNlc3Rvckdyb3Vwcyhncm91cDEpO1xuICAgICAgICB2YXIgYW5jZXN0b3JzMiA9IHNlbGYuZ2V0QW5jZXN0b3JHcm91cHMoZ3JvdXAyKTtcbiAgICAgICAgdmFyIGNvbW1vbkFuY2VzdG9ycyA9IF8uaW50ZXJzZWN0aW9uKGFuY2VzdG9yczEsIGFuY2VzdG9yczIpO1xuICAgICAgICB2YXIgbGF5b3V0QW5jZXN0b3JzID0gXy5maWx0ZXIoY29tbW9uQW5jZXN0b3JzLCBmdW5jdGlvbihncm91cCkge1xuICAgICAgICAgICAgcmV0dXJuIF8uaW5kZXhPZihsYXlvdXROYW1lcywgZ3JvdXAuZGF0YS5sYXlvdXQpICE9IC0xO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGxheW91dEFuY2VzdG9ycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXlvdXRBbmNlc3RvcnNbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybnMgdGhlIGFuY2VzdG9ycyBvZiB0aGlzIGdyb3VwLCBpbmNsdWRpbmcgaXRzZWxmXG4gICAgdGhpcy5nZXRBbmNlc3Rvckdyb3VwcyA9IGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgIHZhciBhbmNlc3RvcnMgPSBbZ3JvdXBdO1xuICAgICAgICB2YXIgZyA9IGdyb3VwO1xuICAgICAgICB3aGlsZSAoZy5jb250YWluaW5nR3JvdXApIHtcbiAgICAgICAgICAgIGFuY2VzdG9ycy5wdXNoKGcuY29udGFpbmluZ0dyb3VwKTtcbiAgICAgICAgICAgIGcgPSBnLmNvbnRhaW5pbmdHcm91cDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYW5jZXN0b3JzO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgZnVuY3Rpb24gRnJlZWhhbmREaWFncmFtTGF5b3V0KCkge1xuICAgICAgICBnby5MYXlvdXQuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBnby5EaWFncmFtLmluaGVyaXQoRnJlZWhhbmREaWFncmFtTGF5b3V0LCBnby5MYXlvdXQpO1xuXG4gICAgRnJlZWhhbmREaWFncmFtTGF5b3V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gXCJGcmVlaGFuZERpYWdyYW1MYXlvdXRcIjtcbiAgICB9O1xuXG4gICAgRnJlZWhhbmREaWFncmFtTGF5b3V0LnByb3RvdHlwZS5kb0xheW91dCA9IGZ1bmN0aW9uKGNvbGwpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnRnJlZWhhbmREaWFncmFtTGF5b3V0LmRvTGF5b3V0Jyk7XG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcbiAgICAgICAgLy8gZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiRnJlZWhhbmQgRGlhZ3JhbSBMYXlvdXRcIik7XG5cbiAgICAgICAgLy92YWxpZGF0ZUdyb3VwTG9jYXRpb25zKGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkpO1xuICAgICAgICB2YXIgZ3JvdXBzID0gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKTsgLy8gZ2V0IG5ldyBpdGVyYXRvclxuICAgICAgICB3aGlsZSAoZ3JvdXBzLm5leHQoKSkge1xuICAgICAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBzLnZhbHVlO1xuICAgICAgICAgICAgaWYgKCFncm91cC5pc0xpbmtMYWJlbCkge1xuICAgICAgICAgICAgICAgIHZhciBsb2MgPSBnby5Qb2ludC5wYXJzZShncm91cC5kYXRhLmxvYyk7XG4gICAgICAgICAgICAgICAgZ3JvdXAubW92ZShuZXcgZ28uUG9pbnQobG9jLngsIGxvYy55KSk7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnRnJlZWhhbmREaWFncmFtTGF5b3V0LCBncm91cDogJyArIGdyb3VwICsgJyB0byBsb2NhdGlvbjogJyArIGxvYy54ICsgJywnICsgbG9jLnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWxsIGFkanVzdG1lbnQgb2YgbGlua3MgaXMgZG9uZSBmcm9tIGhlcmUsIG5vdCBmcm9tIHRoZSBvdGhlciBsYXlvdXRzLi4uXG4gICAgICAgIGdldExpbmtzQnlOb2Rlcyh0cnVlKTtcbiAgICAgICAgdmFyIGxpbmtzID0gZGlhZ3JhbS5saW5rcy5pdGVyYXRvcjtcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcbiAgICAgICAgICAgIC8vIGlmIChpc05hTihsaW5rLmxvY2F0aW9uLngpKSB7XG4gICAgICAgICAgICAvLyAgICAgLy9jb25zb2xlLmxvZygnbGluayBsb2NhdGlvbiBpc05hTicpO1xuICAgICAgICAgICAgLy8gICAgIGxpbmsubW92ZShuZXcgZ28uUG9pbnQoMCwwKSk7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAvLyAvL2NvbnNvbGUubG9nKCdsaW5rIGxvY2F0aW9uOiAnICsgbGluay5sb2NhdGlvbik7XG4gICAgICAgICAgICBhZGp1c3RMaW5rTGF5b3V0KGxpbmspO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcIkZyZWVoYW5kIERpYWdyYW0gTGF5b3V0XCIpO1xuICAgIH07XG5cblxuICAgIC8vIGlmIGFueSBncm91cCBpbiB0aGUgZ2l2ZW4gSXRlcmF0b3IgZG9lcyBub3QgaGF2ZSBhIGxvY2F0aW9uIChkYXRhLmxvYyksIHNldCBvbmVcbiAgICAvLyB0aGF0IGRvZXNuJ3Qgb3ZlcmxhcCB3aXRoIHRoZSBvdGhlciBtZW1iZXJzXG4gICAgZnVuY3Rpb24gdmFsaWRhdGVHcm91cExvY2F0aW9ucyhncm91cHMpIHtcblxuICAgIH1cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBmdW5jdGlvbiBGcmVlaGFuZExheW91dCgpIHtcbiAgICAgICAgZ28uTGF5b3V0LmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZ28uRGlhZ3JhbS5pbmhlcml0KEZyZWVoYW5kTGF5b3V0LCBnby5MYXlvdXQpO1xuXG4gICAgRnJlZWhhbmRMYXlvdXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBcIkZyZWVoYW5kTGF5b3V0XCI7XG4gICAgfTtcblxuICAgIEZyZWVoYW5kTGF5b3V0LnByb3RvdHlwZS5kb0xheW91dCA9IGZ1bmN0aW9uKGNvbGwpIHtcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xuICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJGcmVlaGFuZCBMYXlvdXRcIik7XG5cbiAgICAgICAgdmFyIHggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLng7XG4gICAgICAgIHZhciB5ID0gdGhpcy5ncm91cC5sb2NhdGlvbi55O1xuXG4gICAgICAgIHZhciBpdCA9IHRoaXMuZ3JvdXAubWVtYmVyUGFydHMuaXRlcmF0b3I7XG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gaXQudmFsdWU7XG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmICFwYXJ0LmlzTGlua0xhYmVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxvYyA9IGdvLlBvaW50LnBhcnNlKHBhcnQuZGF0YS5sb2MpO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ0ZyZWVoYW5kTGF5b3V0LCBwYXJ0OiAnICsgcGFydC5kYXRhLnRleHQgKyAnLCBsb2M6ICcgKyBsb2MgKyAnLCBsb2NhdGlvbjogJyArIHBhcnQubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIHBhcnQubW92ZShuZXcgZ28uUG9pbnQoeCArIGxvYy54LCB5ICsgbG9jLnkpKTtcbiAgICAgICAgICAgICAgICBwYXJ0LmxheW91dC5kb0xheW91dChwYXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJGcmVlaGFuZCBMYXlvdXRcIik7XG4gICAgfTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBmdW5jdGlvbiBTdGFja2VkTGF5b3V0KCkge1xuICAgICAgICBnby5MYXlvdXQuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBnby5EaWFncmFtLmluaGVyaXQoU3RhY2tlZExheW91dCwgZ28uTGF5b3V0KTtcblxuICAgIFN0YWNrZWRMYXlvdXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBcIlN0YWNrZWRMYXlvdXRcIjtcbiAgICB9O1xuXG4gICAgU3RhY2tlZExheW91dC5wcm90b3R5cGUuZG9MYXlvdXQgPSBmdW5jdGlvbihjb2xsKSB7XG4gICAgICAgIHRoaXMuZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiU3RhY2tlZCBMYXlvdXRcIik7XG4gICAgICAgIHZhciBtYXJnaW4gPSBnZXRTdGFja01hcmdpbih0aGlzLmdyb3VwKTtcbiAgICAgICAgdmFyIHN0YXJ0WCA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueDtcbiAgICAgICAgdmFyIHN0YXJ0WSA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueSArICh0aGlzLmdyb3VwLnBhcnQuYWN0dWFsQm91bmRzLmhlaWdodCArIG1hcmdpbiAvIDIpO1xuICAgICAgICBsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZCh0aGlzLmdyb3VwLCBzdGFydFgsIHN0YXJ0WSk7XG4gICAgICAgIHRoaXMuZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcIlN0YWNrZWQgTGF5b3V0XCIpO1xuICAgIH07XG5cbiAgICAvLyByZXR1cm5zIHRoZSBtYXggeSB2YWx1ZSBhZnRlciBsYXlpbmcgb3V0IHRoZSBsYXN0IHBhcnRcbiAgICBmdW5jdGlvbiBsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZChncm91cCwgc3RhcnRYLCBzdGFydFkpIHtcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBnZXRPcmRlcmVkTWVtYmVycyhncm91cCk7XG4gICAgICAgIHZhciB4ID0gc3RhcnRYO1xuICAgICAgICB2YXIgeSA9IHN0YXJ0WTtcbiAgICAgICAgdmFyIHJvd0NvdW50ID0gMDtcbiAgICAgICAgdmFyIG1heFN0YXJ0WSA9IHN0YXJ0WTtcbiAgICAgICAgXy5lYWNoKG1lbWJlcnMsIGZ1bmN0aW9uKHBhcnQpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgIXBhcnQuaXNMaW5rTGFiZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFyZ2luID0gZ2V0U3RhY2tNYXJnaW4ocGFydCk7XG4gICAgICAgICAgICAgICAgcGFydC5tb3ZlKG5ldyBnby5Qb2ludCh4LCB5KSk7XG4gICAgICAgICAgICAgICAgc3RhcnRZID0geSArIHBhcnQuYWN0dWFsQm91bmRzLmhlaWdodCArIG1hcmdpbiAvIDI7IC8vIHN0YXJ0IFkgcG9zaXRpb24gZm9yIHBhcnQncyBjaGlsZHJlblxuXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvclN0YWNrZWQ6IHN0YXJ0aW5nIGxheW91dCBvZiBjaGlsZHJlbiBvZiAnICsgcGFydCArICcgYXQgJyArIE1hdGgucm91bmQoeCkgKyAnLCcgKyBNYXRoLnJvdW5kKHN0YXJ0WSkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBhcnQuaXNTdWJHcmFwaEV4cGFuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGxheW91dCBjaGlsZHJlbiBvZiB0aGlzIHBhcnQ7IGNoZWNrIGlmIHdlJ3ZlIGFscmVhZHkgZG9uZSBhIHRhbGxlciBwYXJ0K2NoaWxkcmVuIGluIGN1cnJlbnQgcm93XG4gICAgICAgICAgICAgICAgICAgIG1heFN0YXJ0WSA9IE1hdGgubWF4KG1heFN0YXJ0WSwgbGF5b3V0TWVtYmVyc0ZvclN0YWNrZWQocGFydCwgeCwgc3RhcnRZKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xheW91dE1lbWJlcnNGb3JTdGFja2VkOiBsYWlkIG91dCBjaGlsZHJlbiBvZiAnICsgcGFydCArICcsIG1heFN0YXJ0WSBpcyBub3cgJyArIE1hdGgucm91bmQobWF4U3RhcnRZKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4U3RhcnRZID0gTWF0aC5tYXgobWF4U3RhcnRZLCBzdGFydFkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGRlY2lkZSB3aGV0aGVyIHRvIHdyYXBcbiAgICAgICAgICAgICAgICByb3dDb3VudCsrO1xuICAgICAgICAgICAgICAgIGlmIChyb3dDb3VudCA8IDIpIHsgLy8ga2VlcCBnb2luZyBvbiB0aGlzIGxpbmVcbiAgICAgICAgICAgICAgICAgICAgeCArPSBwYXJ0LmFjdHVhbEJvdW5kcy53aWR0aCArIG1hcmdpbjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyB3cmFwIHRvIG5leHQgbGluZVxuICAgICAgICAgICAgICAgICAgICB4ID0gc3RhcnRYO1xuICAgICAgICAgICAgICAgICAgICB5ID0gbWF4U3RhcnRZICsgbWFyZ2luIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgcm93Q291bnQgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtYXhTdGFydFk7XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIGZ1bmN0aW9uIFJpZ2h0SW52ZW50b3J5TGF5b3V0KCkge1xuICAgICAgICBnby5MYXlvdXQuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBnby5EaWFncmFtLmluaGVyaXQoUmlnaHRJbnZlbnRvcnlMYXlvdXQsIGdvLkxheW91dCk7XG5cbiAgICBSaWdodEludmVudG9yeUxheW91dC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFwiUmlnaHRJbnZlbnRvcnlMYXlvdXRcIjtcbiAgICB9O1xuXG4gICAgUmlnaHRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xuICAgICAgICAvL3RoaXMuZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcbiAgICAgICAgdmFyIHN0YXJ0WCA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueCArIHRoaXMuZ3JvdXAuYWN0dWFsQm91bmRzLndpZHRoO1xuICAgICAgICB2YXIgc3RhcnRZID0gdGhpcy5ncm91cC5sb2NhdGlvbi55ICsgKHRoaXMuZ3JvdXAucGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgZ2V0SW52ZW50b3J5TWFyZ2luKHRoaXMuZ3JvdXApKTtcbiAgICAgICAgbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeSh0aGlzLmdyb3VwLCBzdGFydFgsIHN0YXJ0WSwgJ1InKTtcbiAgICAgICAgLy90aGlzLmRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJJbnZlbnRvcnkgTGF5b3V0XCIpO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgZnVuY3Rpb24gTGVmdEludmVudG9yeUxheW91dCgpIHtcbiAgICAgICAgZ28uTGF5b3V0LmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZ28uRGlhZ3JhbS5pbmhlcml0KExlZnRJbnZlbnRvcnlMYXlvdXQsIGdvLkxheW91dCk7XG5cbiAgICBMZWZ0SW52ZW50b3J5TGF5b3V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gXCJMZWZ0SW52ZW50b3J5TGF5b3V0XCI7XG4gICAgfTtcblxuICAgIExlZnRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdMZWZ0SW52ZW50b3J5TGF5b3V0LmRvTGF5b3V0LCBncm91cDogJyArIHRoaXMuZ3JvdXAgKyAnLCBsb2NhdGlvbjogJyArIHRoaXMuZ3JvdXAubG9jYXRpb24pO1xuICAgICAgICAvLyB0aGlzLmRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcIkludmVudG9yeSBMYXlvdXRcIik7XG4gICAgICAgIHZhciBzdGFydFggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLng7XG4gICAgICAgIHZhciBzdGFydFkgPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnkgKyAodGhpcy5ncm91cC5wYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyBnZXRJbnZlbnRvcnlNYXJnaW4odGhpcy5ncm91cCkpO1xuICAgICAgICBsYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5KHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZLCAnTCcpO1xuICAgICAgICAvLyB0aGlzLmRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJJbnZlbnRvcnkgTGF5b3V0XCIpO1xuICAgIH07XG5cbiAgICAvLyBzaGFyZWQgc3R1ZmYgZm9yIExlZnQvUmlnaHQgSW52ZW50b3J5IGxheW91dHMuLi5cblxuICAgIC8vIHJldHVybnMgdGhlIG1heCB5IHZhbHVlIGFmdGVyIGxheWluZyBvdXQgdGhlIGxhc3QgcGFydFxuICAgIC8vIHNpZGUgaXMgJ0wnIG9yICdSJ1xuICAgIGZ1bmN0aW9uIGxheW91dE1lbWJlcnNGb3JJbnZlbnRvcnkoZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZLCBzaWRlKSB7XG4gICAgICAgIHZhciBtZW1iZXJzID0gZ2V0T3JkZXJlZE1lbWJlcnMoZ3JvdXApO1xuICAgICAgICBfLmVhY2gobWVtYmVycywgZnVuY3Rpb24ocGFydCkge1xuICAgICAgICAgICAgdmFyIHggPSBzdGFydFg7IC8vIGZvciBsZWZ0LCBqdXN0IHVzZSB4XG4gICAgICAgICAgICBpZiAoc2lkZSA9PSAnUicpXG4gICAgICAgICAgICAgICAgeCA9IHN0YXJ0WCAtIHBhcnQuYWN0dWFsQm91bmRzLndpZHRoOyAvLyBmb3IgcmlnaHQsIHJpZ2h0LWFsaWduIHBhcnRzIHRvIHN0YXJ0WFxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeSwgcGFydDogJyArIHBhcnQgKyAnIHRvIGxvY2F0aW9uOiAnICsgeCArICcsJyArIHN0YXJ0WSk7XG4gICAgICAgICAgICBwYXJ0Lm1vdmUobmV3IGdvLlBvaW50KHgsIHN0YXJ0WSkpO1xuICAgICAgICAgICAgc3RhcnRZICs9IHBhcnQuYWN0dWFsQm91bmRzLmhlaWdodCArIGdldEludmVudG9yeU1hcmdpbihwYXJ0KTtcbiAgICAgICAgICAgIGlmIChwYXJ0LmlzU3ViR3JhcGhFeHBhbmRlZCkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xheW91dE1lbWJlcnNGb3JJbnZlbnRvcnksIHkgYWZ0ZXIgbW92aW5nOiAnICsgcGFydCArICcgPSAnICsgc3RhcnRZKTtcbiAgICAgICAgICAgICAgICBzdGFydFkgPSBsYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5KHBhcnQsIHN0YXJ0WCwgc3RhcnRZLCBzaWRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzdGFydFkgKyBnZXRJbnZlbnRvcnlNYXJnaW4oZ3JvdXApO1xuICAgIH1cblxuICAgIC8vIHJldHVybnMgYW4gYXJyYXkgb2YgdGhlIGdyb3VwJ3MgKG5vbi1SLXRoaW5nKSBtZW1iZXJzLCBzb3J0ZWQgYnkgdGhlICdvcmRlcicgZGF0YSBwcm9wZXJ0eVxuICAgIGZ1bmN0aW9uIGdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKSB7XG4gICAgICAgIHZhciBtZW1iZXJzID0gbmV3IGdvLkxpc3QoKTtcbiAgICAgICAgdmFyIGl0ID0gZ3JvdXAubWVtYmVyUGFydHMuaXRlcmF0b3I7XG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gaXQudmFsdWU7XG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmICFwYXJ0LmlzTGlua0xhYmVsKSB7XG4gICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF8uc29ydEJ5KG1lbWJlcnMudG9BcnJheSgpLCBmdW5jdGlvbihtZW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBtZW1iZXIuZGF0YS5vcmRlcjtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGxpbmsgcm91dGluZyBhbmQgdmlzaWJpbGl0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIC8vIGFkanVzdCB0aGUgcm91dGluZywgdmlzaWJpbGl0eSBhbmQgb3RoZXIgcHJvcGVydGllcyBvZiBhIGxpbmsgYWNjb3JkaW5nIHRvIHZhcmlvdXMgc3RydWN0dXJhbCBjcml0ZXJpYVxuICAgIGZ1bmN0aW9uIGFkanVzdExpbmtMYXlvdXQobGluaykge1xuICAgICAgICBpZiAoIWxpbmsgfHwgIWxpbmsuZnJvbU5vZGUgfHwgIWxpbmsudG9Ob2RlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YXIgbG9jID0gbGluay5sb2NhdGlvbjtcbiAgICAgICAgLy8gaWYgKGlzTmFOKGxvYy54KSB8fCBpc05hTihsb2MueSkpIHtcbiAgICAgICAgLy8gICAgIGxpbmsubG9jYXRpb24gPSBuZXcgZ28uUG9pbnQoMTAsIDEwKTtcbiAgICAgICAgLy8gICAgIC8vY29uc29sZS5sb2coJ2FkanVzdExpbmtMYXlvdXQsIGxpbmsubG9jYXRpb246ICcgKyBsaW5rLmxvY2F0aW9uKTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyAvL2NvbnNvbGUubG9nKCdhZGp1c3RMaW5rTGF5b3V0LCBsaW5rLmxvY2F0aW9uOiAnICsgbGluay5sb2NhdGlvbik7XG5cbiAgICAgICAgLy8gc2VlIGlmIGxpbmsgaXMgd2l0aGluIGEgc3RhY2tlZCBvciBpbnZlbnRvcnkgbGF5b3V0LCBvciBpZiBpdCdzIGEgaGlkZGVuIFAgbGlua1xuICAgICAgICB2YXIgaW52ZW50b3J5QW5jZXN0b3IgPSBnZXRDb21tb25BbmNlc3RvcldpdGhMYXlvdXQobGluay5mcm9tTm9kZSwgbGluay50b05vZGUsIFsnbGVmdCcsICdyaWdodCddKTtcbiAgICAgICAgdmFyIHN0YWNrZWRBbmNlc3RvciA9IGdldENvbW1vbkFuY2VzdG9yV2l0aExheW91dChsaW5rLmZyb21Ob2RlLCBsaW5rLnRvTm9kZSwgWydzdGFja2VkJ10pO1xuICAgICAgICB2YXIgaGlkZVBMaW5rID0gKGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnICYmICFtYXAuZ2V0VGVtcGxhdGVzKCkuc2hvd1BMaW5rKGxpbmspKTtcbiAgICAgICAgLy92YXIgY3Jvd2RlZFJUaGluZyA9IGhhc0Nyb3dkZWRSVGhpbmcobGluayk7XG5cbiAgICAgICAgLy8gc2VlIGlmIHRoaXMgaXMgb25lIG9mIG11bHRpcGxlIGxpbmtzIGJldHdlZW4gdGhlIHNhbWUgdHdvIG5vZGVzXG4gICAgICAgIHZhciBzbnBvcyA9IHNlbGYuZ2V0U2FtZU5vZGVzTGlua1Bvc2l0aW9uKGxpbmspO1xuICAgICAgICB2YXIgaXNNdWx0aUxpbmsgPSAoc25wb3MuY291bnQgPiAxKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc25wb3MgZm9yIGxpbmsgJyArIGxpbmsgKyAnOiAnICsgc25wb3MuaW5kZXggKyAnIG9mICcgKyBzbnBvcy5jb3VudCk7XG5cbiAgICAgICAgaWYgKGludmVudG9yeUFuY2VzdG9yKSB7XG4gICAgICAgICAgICBhcHBseUludmVudG9yeUN1cnZlUm91dGluZyhsaW5rLCBzbnBvcywgaW52ZW50b3J5QW5jZXN0b3IuZGF0YS5sYXlvdXQpO1xuICAgICAgICB9IGVsc2UgaWYoaXNNdWx0aUxpbmspIHtcbiAgICAgICAgICAgIGFwcGx5TXVsdGlsaW5rQ3VydmVSb3V0aW5nKGxpbmssIHNucG9zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5U3RyYWlnaHRSb3V0aW5nKGxpbmspO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2hvdyBsaW5rIG9ubHkgaWYgYm90aCBjb25uZWN0ZWQgdGhpbmdzIGFyZSB2aXNpYmxlIChubyBjb2xsYXBzZWQgYW5jZXN0b3JzKTsgXG4gICAgICAgIC8vIGhpZGUgaWYgYm90aCBhcmUgaW4gc3RhY2tlZCBsYXlvdXQgb3IgaWYgaXQncyBhIFAtbGluayB0aGF0IHdlIHNob3VsZG4ndCBiZSBzaG93aW5nIG5vd1xuICAgICAgICBpZiAoc2VsZi5mcm9tQW5kVG9Ob2Rlc0FyZVZpc2libGUobGluaykgJiYgIXN0YWNrZWRBbmNlc3RvciAmJiAhaGlkZVBMaW5rKSB7XG4gICAgICAgICAgICBsaW5rLm9wYWNpdHkgPSAxO1xuICAgICAgICAgICAgc2hvd0xhYmVsTm9kZXMobGluaywgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsaW5rLm9wYWNpdHkgPSAwO1xuICAgICAgICAgICAgc2hvd0xhYmVsTm9kZXMobGluaywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVE9ETzogZGV0ZWN0IHdoZW4gdGhlIFItdGhpbmcgb3ZlcmxhcHMgYm90aCBmcm9tIGFuZCB0byBub2Rlcywgc28gd2UgY2FuIGNoYW5nZSB0aGUgbGluayByb3V0aW5nXG4gICAgZnVuY3Rpb24gaGFzQ3Jvd2RlZFJUaGluZyhsaW5rKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93TGFiZWxOb2RlcyhsaW5rLCBzaG93KSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ3Nob3dMYWJlbE5vZGVzLCBsaW5rOiAnICsgbGluayArICcsIHNob3c6ICcgKyBzaG93KTtcbiAgICAgICAgdmFyIGl0ID0gbGluay5sYWJlbE5vZGVzO1xuICAgICAgICBpZiAoaXQpIHtcbiAgICAgICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBpdC52YWx1ZTtcbiAgICAgICAgICAgICAgICBncm91cC52aXNpYmxlID0gc2hvdztcbiAgICAgICAgICAgICAgICBpZiAoc2hvdykge1xuICAgICAgICAgICAgICAgICAgICBncm91cC5sYXlvdXQuZG9MYXlvdXQoZ3JvdXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGlmIGxpbmsgaXMgYmV0d2VlbiB0d28gdGhpbmdzIGluIHRoZSBzYW1lIGludmVudG9yeSBsYXlvdXQgKHNpbmdsZSBvciBtdWx0aXBsZSksXG4gICAgLy8gbWFrZSB0aGUgbGluZSBtb3JlIG9yIGxlc3MgY2lyY3VsYXIgb24gdGhlIGFwcHJvcHJpYXRlIHNpZGVcbiAgICBmdW5jdGlvbiBhcHBseUludmVudG9yeUN1cnZlUm91dGluZyhsaW5rLCBzbnBvcywgYW5jZXN0b3JMYXlvdXQpIHtcbiAgICAgICAgaWYgKGFuY2VzdG9yTGF5b3V0ID09ICdsZWZ0Jykge1xuICAgICAgICAgICAgbGluay5mcm9tU3BvdCA9IGdvLlNwb3QuTGVmdDtcbiAgICAgICAgICAgIGxpbmsudG9TcG90ID0gZ28uU3BvdC5MZWZ0O1xuICAgICAgICB9IGVsc2UgaWYgKGFuY2VzdG9yTGF5b3V0ID09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIGxpbmsuZnJvbVNwb3QgPSBnby5TcG90LlJpZ2h0O1xuICAgICAgICAgICAgbGluay50b1Nwb3QgPSBnby5TcG90LlJpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYXNwZWN0IHJhdGlvIGZvciB0aGUgbGluayBjdXJ2ZXMgLSBtYWtlIHRoaXMgc21hbGxlciB0byBtYWtlIHRoZW0gdGFsbGVyLCBsYXJnZXIgdG8gbWFrZSB0aGVtIGZhdHRlclxuICAgICAgICB2YXIgY3VydmVSYXRpbyA9IDAuNjtcblxuICAgICAgICB2YXIgeTEgPSBsaW5rLmZyb21Ob2RlLmFjdHVhbEJvdW5kcy55O1xuICAgICAgICB2YXIgeTIgPSBsaW5rLnRvTm9kZS5hY3R1YWxCb3VuZHMueTtcblxuICAgICAgICB2YXIgeURpZmYgPSBNYXRoLmFicyh5MiAtIHkxKTtcbiAgICAgICAgdmFyIGMgPSAoeURpZmYgPT09IDAgPyA1MCA6IE1hdGguZmxvb3IoeURpZmYgKiBjdXJ2ZVJhdGlvKSkgKyAxMDAgKiAoc25wb3MuaW5kZXggLyBzbnBvcy5jb3VudCk7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJ5RGlmZiA9IFwiICsgeURpZmYgKyAnLCBjID0gJyArIGMgKyAnICgnICsgbGluay5mcm9tTm9kZS5kYXRhLnRleHQgKyAnIC0gJyArIHAxICsgJyAtIHRvICcgKyBsaW5rLnRvTm9kZS5kYXRhLnRleHQgKyAnIC0gJyArIHAyICsgJyknKTtcblxuICAgICAgICBsaW5rLmN1cnZlID0gZ28uTGluay5CZXppZXI7XG4gICAgICAgIGxpbmsuZnJvbUVuZFNlZ21lbnRMZW5ndGggPSBjO1xuICAgICAgICBsaW5rLnRvRW5kU2VnbWVudExlbmd0aCA9IGM7XG4gICAgfVxuXG4gICAgLy8gaWYgbm9uLWludmVudG9yeSBsaW5rIGlzIG9uZSBvZiBtdWx0aXBsZSBvbmVzIGJldHdlZW4gc2FtZSBub2RlcywgbWFrZSBpdCBjdXJ2ZWRcbiAgICBmdW5jdGlvbiBhcHBseU11bHRpbGlua0N1cnZlUm91dGluZyhsaW5rLCBzbnBvcykge1xuICAgICAgICBsaW5rLmZyb21TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xuICAgICAgICBsaW5rLnRvU3BvdCA9IGdvLlNwb3QuRGVmYXVsdDtcbiAgICAgICAgbGluay5jdXJ2ZSA9IGdvLkxpbmsuQmV6aWVyO1xuICAgICAgICAvLyBjdXJ2aW5lc3MgdmFsdWVzIGJhc2VkIG9uIG51bWJlciBvZiBsaW5rczpcbiAgICAgICAgLy8gMjogLTI1IDI1XG4gICAgICAgIC8vIDM6IC01MCAwIDUwXG4gICAgICAgIC8vIDQ6IC0xMDAgLTUwIDAgNTAgMTAwXG4gICAgICAgIHZhciByYW5nZVNpemUgPSAxMCAqIChzbnBvcy5jb3VudCAtIDEpO1xuICAgICAgICB2YXIgcmFuZ2VJbmNyZW1lbnQgPSAxMDtcbiAgICAgICAgaWYgKHNucG9zLmhhc1JUaGluZykge1xuICAgICAgICAgICAgcmFuZ2VTaXplID0gMTAwICogKHNucG9zLmNvdW50IC0gMSk7XG4gICAgICAgICAgICByYW5nZUluY3JlbWVudCA9IDEwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkanVzdCBjdXJ2aW5lc3MgZm9yIHNtYWxsZXIgc2NhbGVzXG4gICAgICAgIHZhciBsaW5rU2NhbGVGYWN0b3IgPSBzZWxmLmdldExpbmtTdHJva2VXaWR0aChsaW5rKSAvIDI7IC8vIDIgaXMgbWF4IHN0cm9rZSB3aWR0aFxuICAgICAgICByYW5nZVNpemUgKj0gbGlua1NjYWxlRmFjdG9yO1xuICAgICAgICByYW5nZUluY3JlbWVudCAqPSBsaW5rU2NhbGVGYWN0b3I7XG5cbiAgICAgICAgdmFyIHJhbmdlU3RhcnQgPSAwIC0gcmFuZ2VTaXplIC8gMjtcblxuICAgICAgICBsaW5rLmN1cnZpbmVzcyA9IChyYW5nZVN0YXJ0ICsgcmFuZ2VJbmNyZW1lbnQgKiBzbnBvcy5pbmRleCkgKiBzbnBvcy5vcmllbnRhdGlvbjtcbiAgICAgICAgLy8gLy9jb25zb2xlLmxvZygnYXBwbHlNdWx0aWxpbmtDdXJ2ZVJvdXRpbmcsIGxpbms6ICcgKyBsaW5rICsgJywgY3VydmluZXNzOiAnICsgbGluay5jdXJ2aW5lc3MpOyBcbiAgICB9XG5cbiAgICAvLyBkbyBub3JtYWwgc3RyYWlnaHQgbGluZXMgZm9yIGZyZWVoYW5kIGxheW91dCwgb3IgbGlua3MgYmV0d2VlbiBkZXNjZW5kYW50cyBvZiB0aGluZ3Mgd2l0aCBkaWZmZXJlbnQgbGF5b3V0c1xuICAgIGZ1bmN0aW9uIGFwcGx5U3RyYWlnaHRSb3V0aW5nKGxpbmspIHtcbiAgICAgICAgbGluay5mcm9tU3BvdCA9IGdvLlNwb3QuRGVmYXVsdDtcbiAgICAgICAgbGluay50b1Nwb3QgPSBnby5TcG90LkRlZmF1bHQ7XG4gICAgICAgIGxpbmsucm91dGluZyA9IGdvLkxpbmsuTm9ybWFsO1xuICAgICAgICBsaW5rLmN1cnZlID0gZ28uTGluay5CZXppZXI7XG4gICAgICAgIGxpbmsuY3VydmluZXNzID0gMjU7XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIGNhbGN1bGF0ZSBob3cgbWFueSBsaW5rcyB0aGVyZSBhcmUgYmV0d2VlbiBhIGxpbmsncyBub2RlcyAtLS0tLS0tLS0tLS0tLS1cblxuICAgIC8vIFJldHVybnMgYW4gb2JqZWN0IG9mIHRoZSBmb3JtYXQgeyBpbmRleDogMSwgY291bnQ6IDIsIG9yaWVudGF0aW9uOiAtMSwgaGFzUlRoaW5nOiBmYWxzZSB9LCBcbiAgICAvLyBpbmRpY2F0aW5nIGhvdyBtYW55IG90aGVyIGxpbmtzIHRoZXJlIGFyZSBiZXR3ZWVuIHRoZSBzYW1lIHBhaXIgb2Ygbm9kZXMsXG4gICAgLy8gd2hlcmUgdGhlIGdpdmVuIGxpbmsgZmFsbHMgd2l0aGluIHRoaXMgbGlzdCwgYW5kIHdoYXQgaXRzIG9yaWVudGF0aW9uIGlzLlxuICAgIHRoaXMuZ2V0U2FtZU5vZGVzTGlua1Bvc2l0aW9uID0gZnVuY3Rpb24obGluaykge1xuICAgICAgICB2YXIgbGlua3NCeU5vZGVzID0gZ2V0TGlua3NCeU5vZGVzKHRydWUpO1xuICAgICAgICAvLyBnZXQgbGlua3Mgd2l0aCB0aGUgc2FtZSBrZXkgYXMgdGhpcyBvbmUgKGNvbm5lY3Rpbmcgc2FtZSBub2RlcylcbiAgICAgICAgdmFyIHNhbWVMaW5rcyA9IF8ud2hlcmUobGlua3NCeU5vZGVzLCB7XG4gICAgICAgICAgICBrZXk6IGdldFNhbWVOb2Rlc0xpbmtLZXkobGluaylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gZGVmYXVsdCByZXR1cm4gdmFsdWVcbiAgICAgICAgdmFyIHNucG9zID0ge1xuICAgICAgICAgICAgaW5kZXg6IDAsXG4gICAgICAgICAgICBjb3VudDogMSxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAxLFxuICAgICAgICAgICAgaGFzUlRoaW5nOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICAvLyBzZXQgaW5kZXgsIGNvdW50LCBvcmllbnRhdGlvblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNhbWVMaW5rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHNhbWVMaW5rc1tpXS5saW5rID09IGxpbmspIHtcbiAgICAgICAgICAgICAgICBzbnBvcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiBzYW1lTGlua3MubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbjogZ2V0TGlua09yaWVudGF0aW9uKGxpbmspXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBjaGVjayBmb3IgUnRoaW5nXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzYW1lTGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzYW1lTGlua3NbaV0uaGFzUlRoaW5nKSB7XG4gICAgICAgICAgICAgICAgc25wb3MuaGFzUlRoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc25wb3M7XG4gICAgfTtcblxuICAgIHZhciBfbGlua3NCeU5vZGVzID0gbnVsbDtcblxuICAgIC8vIHJlZnJlc2hlcyB0aGUgY2FjaGVkIGxpc3Qgb2YgYWxsIGxpbmtzIHdpdGgga2V5cywgdG8gZmFjaWxpdGF0ZSBncm91cGluZyB0aGVtIGFjY29yZGluZyB0byBjb25uZWN0ZWQgbm9kZXNcbiAgICBmdW5jdGlvbiBnZXRMaW5rc0J5Tm9kZXMocmVmcmVzaCkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRMaW5rc0J5Tm9kZXMnKTtcbiAgICAgICAgaWYgKCFzZWxmLl9saW5rc0J5Tm9kZXMgfHwgcmVmcmVzaCkge1xuICAgICAgICAgICAgc2VsZi5fbGlua3NCeU5vZGVzID0gW107XG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgICAgICB2YXIgbGlua3MgPSBkaWFncmFtLmxpbmtzLml0ZXJhdG9yO1xuICAgICAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGdldFNhbWVOb2Rlc0xpbmtLZXkobGluayk7XG4gICAgICAgICAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9saW5rc0J5Tm9kZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbms6IGxpbmssXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNSVGhpbmc6IChsaW5rLmxhYmVsTm9kZXMuY291bnQgPiAwKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlbGYuX2xpbmtzQnlOb2RlcztcbiAgICB9XG5cbiAgICAvLyBSZXR1cm5zIGEga2V5IHVzZWQgdG8gZ3JvdXAgbGlua3MgYWNjb3JkaW5nIHRvIHdoaWNoIHBhaXIgb2Ygbm9kZXMgdGhleSBjb25uZWN0LlxuICAgIC8vIFRoZSByZXR1cm5lZCBrZXkgaXMgbm9uLWVtcHR5IGZvciByZWd1bGFyIGxpbmtzIGFuZCBQIGxpbmtzIHRoYXQgc2hvdWxkIGJlIHNob3duIGN1cnJlbnRseSxcbiAgICAvLyBzbyB0aGF0IHRoZXNlIHdpbGwgYWxsIGJlIHJvdXRlZCBieSB0aGUgc2FtZSBydWxlcy4gQSBudWxsIGtleSBpcyByZXR1cm5lZCBmb3IgYW55IG90aGVyIFxuICAgIC8vIGxpbmtzLCBpbmRpY2F0aW5nIHRoYXQgbm8gZ3JvdXBpbmcgaXMgcmVxdWlyZWQuXG4gICAgZnVuY3Rpb24gZ2V0U2FtZU5vZGVzTGlua0tleShsaW5rKSB7XG4gICAgICAgIC8vICAgICAgICBpZiAoc2VsZi5pc1JMaW5rKGxpbmspIHx8IChzZWxmLmlzUExpbmsobGluaykgJiYgbWFwLmdldFRlbXBsYXRlcygpLnNob3dQTGluayhsaW5rKSkpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNSTGluayhsaW5rKSkge1xuICAgICAgICAgICAgdmFyIGtleSA9IFtsaW5rLmZyb21Ob2RlLnRvU3RyaW5nKCksIGxpbmsudG9Ob2RlLnRvU3RyaW5nKCldLnNvcnQoKS5qb2luKCd8Jyk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdrZXk6ICcgKyBrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2UgdXNlIHRoaXMgdG8gZGlzdGluZ3Vpc2ggYW4gQS1CIGxpbmsgZnJvbSBhIEItQSBsaW5rIChiYXNlZCBvbiBmcm9tTm9kZSBhbmQgdG9Ob2RlLCB3aGljaFxuICAgIC8vIGlzIGluZGVwZW5kZW50IG9mIHRoZSBhcnJvd2hlYWQgc2V0dGluZ3MpIHdoZW4gc2V0dGluZyBjdXJ2aW5lc3MsIGJlY2F1c2Ugc2V0dGluZyBjdXJ2aW5lc3MgPSAyNVxuICAgIC8vIG9uIGFuIEEtQiBsaW5rIGlzIHRoZSBzYW1lIGFzIGN1cnZpbmVzcyA9IC0yNSBvbiBhIEItQSBsaW5rLlxuICAgIGZ1bmN0aW9uIGdldExpbmtPcmllbnRhdGlvbihsaW5rKSB7XG4gICAgICAgIGlmIChsaW5rLmZyb21Ob2RlICYmIGxpbmsudG9Ob2RlICYmIGxpbmsuZnJvbU5vZGUudG9TdHJpbmcoKSA8IGxpbmsudG9Ob2RlLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gbGluayB0ZXN0cyAtLS0tLS0tLS0tLS0tLS1cblxuICAgIHRoaXMuaXNSTGluayA9IGZ1bmN0aW9uKGxpbmspIHtcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT09IHVuZGVmaW5lZCAmJiBsaW5rLmZyb21Ob2RlICYmIGxpbmsudG9Ob2RlO1xuICAgIH07XG5cbiAgICB0aGlzLmlzRExpbmsgPSBmdW5jdGlvbihsaW5rKSB7XG4gICAgICAgIHJldHVybiBsaW5rIGluc3RhbmNlb2YgZ28uTGluayAmJiBsaW5rLmRhdGEgJiYgbGluay5kYXRhLmNhdGVnb3J5ID09ICdEJztcbiAgICB9O1xuXG4gICAgdGhpcy5pc1BMaW5rID0gZnVuY3Rpb24obGluaykge1xuICAgICAgICByZXR1cm4gbGluayBpbnN0YW5jZW9mIGdvLkxpbmsgJiYgbGluay5kYXRhICYmIGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCc7XG4gICAgfTtcblxuICAgIHRoaXMuaXNHcm91cCA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgZ28uR3JvdXA7XG4gICAgfTtcbn07IiwibGV0IE5vZGVMYWJlbERyYWdnaW5nVG9vbCA9IHJlcXVpcmUoJy4vZXh0ZW5zaW9ucy9Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wuanMnKTtcblxuLy8gZnVuY3Rpb25zIGZvciBjcmVhdGluZyBhbmQgbWFuaXB1bGF0aW5nIHRoZSBtYXAgKGkuZS4gRGlhZ3JhbSlcblxuU2FuZGJhbmtFZGl0b3IuTWFwID0gZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkdGltZW91dCwgJG1vZGFsLCAkbG9nKSB7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyAtLS0tLS0tLS0tLSBjb25zdGFudHMgLS0tLS0tLS0tLS0tLS0tXG4gICAgdGhpcy5MRUZUID0gJ2xlZnQnO1xuICAgIHRoaXMuUklHSFQgPSAncmlnaHQnO1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tIGluc3RhbmNlIHZhcnMgLS0tLS0tLS0tLVxuXG4gICAgdmFyIF9kaWFncmFtID0gbnVsbDtcblxuICAgIC8vIGNvbXBvbmVudHNcbiAgICB2YXIgX2FuYWx5dGljcyA9IG51bGw7XG4gICAgdmFyIF9hdHRhY2htZW50cyA9IG51bGw7XG4gICAgdmFyIF9hdXRvc2F2ZSA9IG51bGw7XG4gICAgdmFyIF9nZW5lcmF0b3IgPSBudWxsO1xuICAgIC8vdmFyIF9oaXN0b3J5ID0gbnVsbDtcbiAgICB2YXIgX2xheW91dHMgPSBudWxsO1xuICAgIHZhciBfcGVyc3BlY3RpdmVzID0gbnVsbDtcbiAgICB2YXIgX3ByZXNlbnRlciA9IG51bGw7XG4gICAgdmFyIF9zdGFuZGFyZHMgPSBudWxsO1xuICAgIHZhciBfdGVtcGxhdGVzID0gbnVsbDtcbiAgICB2YXIgX3Rlc3RzID0gbnVsbDtcbiAgICB2YXIgX3VpID0gbnVsbDtcblxuICAgIC8vIC0tLS0tLS0tLS0tLSBjb21wb25lbnQgYWNjZXNzb3JzIC0tLS0tLS0tLS0tLS0tLS1cblxuICAgIGZ1bmN0aW9uIGdldENvbXBvbmVudHMoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBfYW5hbHl0aWNzLFxuICAgICAgICAgICAgX2F0dGFjaG1lbnRzLFxuICAgICAgICAgICAgX2F1dG9zYXZlLFxuICAgICAgICAgICAgX2dlbmVyYXRvcixcbiAgICAgICAgICAgIC8vIF9oaXN0b3J5LCBcbiAgICAgICAgICAgIF9sYXlvdXRzLFxuICAgICAgICAgICAgX3BlcnNwZWN0aXZlcyxcbiAgICAgICAgICAgIF9wcmVzZW50ZXIsXG4gICAgICAgICAgICBfc3RhbmRhcmRzLFxuICAgICAgICAgICAgX3RlbXBsYXRlcyxcbiAgICAgICAgICAgIF90ZXN0cyxcbiAgICAgICAgICAgIF91aVxuICAgICAgICBdO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0QW5hbHl0aWNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfYW5hbHl0aWNzO1xuICAgIH07XG4gICAgdGhpcy5nZXRBdHRhY2htZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX2F0dGFjaG1lbnRzO1xuICAgIH07XG4gICAgdGhpcy5nZXRBdXRvc2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX2F1dG9zYXZlO1xuICAgIH07XG4gICAgdGhpcy5nZXRHZW5lcmF0b3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9nZW5lcmF0b3I7XG4gICAgfTtcbiAgICAvLyB0aGlzLmdldEhpc3RvcnkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfaGlzdG9yeTsgfTtcbiAgICB0aGlzLmdldExheW91dHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9sYXlvdXRzO1xuICAgIH07XG4gICAgdGhpcy5nZXRQZXJzcGVjdGl2ZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9wZXJzcGVjdGl2ZXM7XG4gICAgfTtcbiAgICB0aGlzLmdldFByZXNlbnRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3ByZXNlbnRlcjtcbiAgICB9O1xuICAgIHRoaXMuZ2V0U3RhbmRhcmRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfc3RhbmRhcmRzO1xuICAgIH07XG4gICAgdGhpcy5nZXRUZW1wbGF0ZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF90ZW1wbGF0ZXM7XG4gICAgfTtcbiAgICB0aGlzLmdldFRlc3RzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfdGVzdHM7XG4gICAgfTtcbiAgICB0aGlzLmdldFVpID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfdWk7XG4gICAgfTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIG1hcCBpbml0IC0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBjb21wb25lbnRzXG4gICAgICAgIF9hbmFseXRpY3MgPSBuZXcgU2FuZGJhbmtFZGl0b3IuQW5hbHl0aWNzKCRzY29wZSwgJGh0dHAsIHNlbGYpO1xuICAgICAgICBfYXR0YWNobWVudHMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuQXR0YWNobWVudHMoJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCBzZWxmKTtcbiAgICAgICAgX2F1dG9zYXZlID0gbmV3IFNhbmRiYW5rRWRpdG9yLkF1dG9zYXZlKCRzY29wZSwgJGh0dHAsIHNlbGYpO1xuICAgICAgICBfZ2VuZXJhdG9yID0gbmV3IFNhbmRiYW5rRWRpdG9yLkdlbmVyYXRvcigkc2NvcGUsIHNlbGYpO1xuICAgICAgICAvLyBfaGlzdG9yeSA9IG5ldyBTYW5kYmFua0VkaXRvci5IaXN0b3J5KCRzY29wZSwgJGh0dHAsIHNlbGYpO1xuICAgICAgICBfbGF5b3V0cyA9IG5ldyBTYW5kYmFua0VkaXRvci5MYXlvdXRzKCRzY29wZSwgc2VsZik7XG4gICAgICAgIF9wZXJzcGVjdGl2ZXMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuUGVyc3BlY3RpdmVzKCRzY29wZSwgc2VsZik7XG4gICAgICAgIF9wcmVzZW50ZXIgPSBuZXcgU2FuZGJhbmtFZGl0b3IuUHJlc2VudGVyKCRzY29wZSwgc2VsZik7XG4gICAgICAgIF9zdGFuZGFyZHMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuU3RhbmRhcmRzKCRzY29wZSwgc2VsZik7XG4gICAgICAgIF90ZW1wbGF0ZXMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVGVtcGxhdGVzKCRzY29wZSwgc2VsZik7XG4gICAgICAgIF90ZXN0cyA9IG5ldyBTYW5kYmFua0VkaXRvci5UZXN0cygkc2NvcGUsIHNlbGYpO1xuICAgICAgICBfdWkgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVUkoJHNjb3BlLCAkdGltZW91dCwgJGh0dHAsICRyZXNvdXJjZSwgJG1vZGFsLCAkbG9nLCBzZWxmKTtcblxuICAgICAgICAvLyBjYWxsIGluaXQgZm9yIGVhY2ggY29tcG9uZW50LCBpZiBkZWZpbmVkXG4gICAgICAgIF8uZWFjaChnZXRDb21wb25lbnRzKCksIGZ1bmN0aW9uKGNvbXBvbmVudCkge1xuICAgICAgICAgICAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQuaW5pdClcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuaW5pdCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjcmVhdGUgZGlhZ3JhbVxuICAgICAgICBfZGlhZ3JhbSA9IG5ldyBnby5EaWFncmFtKFwiZGlhZ3JhbVwiKTtcbiAgICAgICAgX2RpYWdyYW0uaW5pdGlhbENvbnRlbnRBbGlnbm1lbnQgPSBnby5TcG90LkNlbnRlcjtcbiAgICAgICAgX2RpYWdyYW0uaW5pdGlhbFZpZXdwb3J0U3BvdCA9IGdvLlNwb3QuQ2VudGVyO1xuICAgICAgICBfZGlhZ3JhbS5pbml0aWFsRG9jdW1lbnRTcG90ID0gZ28uU3BvdC5DZW50ZXI7XG4gICAgICAgIF9kaWFncmFtLmhhc0hvcml6b250YWxTY3JvbGxiYXIgPSBmYWxzZTtcbiAgICAgICAgX2RpYWdyYW0uaGFzVmVydGljYWxTY3JvbGxiYXIgPSBmYWxzZTtcbiAgICAgICAgX2RpYWdyYW0ucGFkZGluZyA9IDUwMDtcbiAgICAgICAgX2RpYWdyYW0ubGF5b3V0ID0gX2xheW91dHMuZ2V0RnJlZWhhbmREaWFncmFtTGF5b3V0KCk7XG4gICAgICAgIF9kaWFncmFtLnRvb2xNYW5hZ2VyLm1vdXNlTW92ZVRvb2xzLmluc2VydEF0KDAsIG5ldyBOb2RlTGFiZWxEcmFnZ2luZ1Rvb2woKSk7XG5cbiAgICAgICAgaW5pdFRvb2xzKCk7XG4gICAgICAgIF90ZW1wbGF0ZXMuaW5pdFRlbXBsYXRlcyhfZGlhZ3JhbSk7IC8vIHNldCB1cCB0ZW1wbGF0ZXMsIGN1c3RvbWl6ZSB0ZW1wb3JhcnkgbGluayBiZWhhdmlvciBcbiAgICAgICAgYWRkRGlhZ3JhbUxpc3RlbmVycygpO1xuXG4gICAgICAgIF90ZW1wbGF0ZXMuYWRkRXhwb3J0Rm9vdGVyKCk7XG5cbiAgICAgICAgLy8gd2F0Y2ggZm9yIHRhYiBjaGFuZ2VzXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ2N1cnJlbnRUYWInLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIHRoaXMgaXMgY2FsbGVkIGJ5IGEgJHNjb3BlLiR3YXRjaCBpbiBpbml0KClcbiAgICB0aGlzLmN1cnJlbnRUYWJDaGFuZ2VkID0gZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIC8vIC8vY29uc29sZS5sb2coJ2N1cnJlbnRUYWJDaGFuZ2VkLCBuZXdWYWx1ZTogJyArIG5ld1ZhbHVlICsgJywgb2xkVmFsdWU6ICcgKyBvbGRWYWx1ZSk7XG4gICAgICAgIC8vIG5vdGlmeSBhbnkgaW50ZXJlc3RlZCBjb21wb25lbnRzXG4gICAgICAgIF8uZWFjaChnZXRDb21wb25lbnRzKCksIGZ1bmN0aW9uKGNvbXBvbmVudCkge1xuICAgICAgICAgICAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQuY3VycmVudFRhYkNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8kc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0RGlhZ3JhbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX2RpYWdyYW07XG4gICAgfTtcblxuICAgIC8vIG1pc2MuIHRvb2wgY29uZmlndXJhdGlvblxuICAgIGZ1bmN0aW9uIGluaXRUb29scygpIHtcbiAgICAgICAgLy8gZGlzYWJsZSBjbGlja2luZyBvbiBUZXh0QmxvY2tzIHRvIGVkaXQgLSB3ZSB3aWxsIGludm9rZSBlZGl0aW5nIGluIG90aGVyIHdheXNcbiAgICAgICAgX2RpYWdyYW0uYWxsb3dUZXh0RWRpdCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIHNlbGVjdCB0ZXh0IHdoZW4gYWN0aXZhdGluZyBlZGl0b3I7IFxuICAgICAgICAvLyB1c2Ugc2hpZnQtZW50ZXIgdG8gY3JlYXRlIG5ldyBsaW5lcywgZW50ZXIgdG8gZmluaXNoIGVkaXRpbmcgKE5COiBlZGl0b3IgaGFzIG11bHRpbGluZT10cnVlKVxuICAgICAgICB2YXIgdGV4dFRvb2wgPSBfZGlhZ3JhbS50b29sTWFuYWdlci50ZXh0RWRpdGluZ1Rvb2w7XG4gICAgICAgIHRleHRUb29sLmRvQWN0aXZhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGdvLlRleHRFZGl0aW5nVG9vbC5wcm90b3R5cGUuZG9BY3RpdmF0ZS5jYWxsKHRleHRUb29sKTtcbiAgICAgICAgICAgIGlmICh0ZXh0VG9vbC5kZWZhdWx0VGV4dEVkaXRvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRleHRUb29sLmRlZmF1bHRUZXh0RWRpdG9yLnNlbGVjdCgpO1xuXG4gICAgICAgICAgICAgICAgdGV4dFRvb2wuZGVmYXVsdFRleHRFZGl0b3IuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS53aGljaCA9PSAxMyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ28uVGV4dEVkaXRpbmdUb29sLnByb3RvdHlwZS5hY2NlcHRUZXh0LmNhbGwodGV4dFRvb2wsIGdvLlRleHRFZGl0aW5nVG9vbC5Mb3N0Rm9jdXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gaGFuZGxlIGRlbGV0ZSBrZXkgb24gTWFjIChkZWZhdWx0IGJlaGF2aW9yIG9ubHkgdXNlcyBmbi1EZWxldGUgdG8gZGVsZXRlIGZyb20gY2FudmFzKVxuICAgICAgICBfZGlhZ3JhbS5jb21tYW5kSGFuZGxlci5kb0tleURvd24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBlID0gX2RpYWdyYW0ubGFzdElucHV0O1xuICAgICAgICAgICAgdmFyIGNtZCA9IF9kaWFncmFtLmNvbW1hbmRIYW5kbGVyO1xuICAgICAgICAgICAgaWYgKGUuZXZlbnQud2hpY2ggPT09IDgpIHtcbiAgICAgICAgICAgICAgICBjbWQuZGVsZXRlU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGdvLkNvbW1hbmRIYW5kbGVyLnByb3RvdHlwZS5kb0tleURvd24uY2FsbChjbWQpOyAvLyBjYWxsIGJhc2UgbWV0aG9kIHdpdGggbm8gYXJndW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gW2Rpc2FibGUga2V5Ym9hcmQgc2hvcnRjdXRzLCBhcyB0aGVzZSBkbyBub3QgZG8gY2VudGVyaW5nIG9uIHpvb20sIFxuICAgICAgICAvLyBhbmQgY2FuIGxlYWQgdG8gY29uZnVzaW9uIHdpdGggYnJvd3NlciB6b29tICh3aGljaCBnZXRzIGZpcmVkIGRlcGVuZHMgb24gZm9jdXMpXVxuICAgICAgICAvLyAtIHR1cm5lZCBiYWNrIG9uIHRvIHN1cHBvcnQgcGluY2gvem9vbSBvbiBpUGFkXG4gICAgICAgIF9kaWFncmFtLmFsbG93Wm9vbSA9IHRydWU7XG5cbiAgICAgICAgX2RpYWdyYW0udG9vbE1hbmFnZXIubW91c2VXaGVlbEJlaGF2aW9yID0gZ28uVG9vbE1hbmFnZXIuV2hlZWxab29tO1xuXG4gICAgICAgIC8vIGRlY2lkZSB3aGF0IGtpbmRzIG9mIFBhcnRzIGNhbiBiZSBhZGRlZCB0byBhIEdyb3VwIG9yIHRvIHRvcC1sZXZlbFxuICAgICAgICAvLyBfZGlhZ3JhbS5jb21tYW5kSGFuZGxlci5tZW1iZXJWYWxpZGF0aW9uID0gZnVuY3Rpb24gKGdycCwgbm9kZSkge1xuICAgICAgICAvLyAgICAgLy9pZiAoZ3JwIGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgbm9kZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSByZXR1cm4gZmFsc2U7ICAvLyBjYW5ub3QgYWRkIEdyb3VwcyB0byBHcm91cHNcbiAgICAgICAgLy8gICAgIHJldHVybiB0cnVlO1xuICAgICAgICAvLyB9O1xuXG4gICAgICAgIC8vIGRlZmF1bHQgbGluayBhdHRyaWJ1dGVzXG4gICAgICAgIF9kaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sLmFyY2hldHlwZUxpbmtEYXRhID0ge1xuICAgICAgICAgICAgdHlwZTogJ25vQXJyb3dzJ1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGFsbG93IGRvdWJsZS1jbGljayBpbiBiYWNrZ3JvdW5kIHRvIGNyZWF0ZSBhIG5ldyBub2RlXG4gICAgICAgIF9kaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmFyY2hldHlwZU5vZGVEYXRhID0gZ2V0TmV3VGhpbmdEYXRhKCk7XG5cbiAgICAgICAgLy8gaG93IGxvbmcgbW91c2UgbXVzdCBiZSBoZWxkIHN0YXRpb25hcnkgYmVmb3JlIHN0YXJ0aW5nIGEgZHJhZy1zZWxlY3QgKGluc3RlYWQgb2YgYSBzY3JvbGwpIC0gZGVmYXVsdCB3YXMgMTc1bXNcbiAgICAgICAgX2RpYWdyYW0udG9vbE1hbmFnZXIuZHJhZ1NlbGVjdGluZ1Rvb2wuZGVsYXkgPSA0MDA7XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0gaGFuZGxpbmcgb2YgRGlhZ3JhbUV2ZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgZnVuY3Rpb24gYWRkRGlhZ3JhbUxpc3RlbmVycygpIHtcblxuICAgICAgICAvLyBEaWFncmFtRXZlbnRzIHRvIGJlIGhhbmRsZWQgaGVyZSBvciBieSBhIGNvbXBvbmVudFxuICAgICAgICB2YXIgZGlhZ3JhbUV2ZW50cyA9IFtcbiAgICAgICAgICAgIFwiSW5pdGlhbExheW91dENvbXBsZXRlZFwiLFxuICAgICAgICAgICAgXCJDaGFuZ2VkU2VsZWN0aW9uXCIsXG4gICAgICAgICAgICBcIkJhY2tncm91bmRTaW5nbGVDbGlja2VkXCIsXG4gICAgICAgICAgICBcIlNlbGVjdGlvbkNvcGllZFwiLFxuICAgICAgICAgICAgXCJTZWxlY3Rpb25Nb3ZlZFwiLFxuICAgICAgICAgICAgXCJTZWxlY3Rpb25EZWxldGluZ1wiLFxuICAgICAgICAgICAgXCJTZWxlY3Rpb25EZWxldGVkXCIsXG4gICAgICAgICAgICBcIlBhcnRDcmVhdGVkXCIsXG4gICAgICAgICAgICBcIlBhcnRSZXNpemVkXCIsXG4gICAgICAgICAgICBcIkNsaXBib2FyZENoYW5nZWRcIixcbiAgICAgICAgICAgIFwiQ2xpcGJvYXJkUGFzdGVkXCIsXG4gICAgICAgICAgICBcIkxpbmtEcmF3blwiLFxuICAgICAgICAgICAgXCJMaW5rUmVsaW5rZWRcIixcbiAgICAgICAgICAgIFwiVmlld3BvcnRCb3VuZHNDaGFuZ2VkXCJcbiAgICAgICAgXTtcbiAgICAgICAgXy5lYWNoKGRpYWdyYW1FdmVudHMsIGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xuICAgICAgICAgICAgX2RpYWdyYW0uYWRkRGlhZ3JhbUxpc3RlbmVyKGV2ZW50TmFtZSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGJyb2FkY2FzdERpYWdyYW1FdmVudChldmVudE5hbWUsIGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIF9kaWFncmFtLmFkZERpYWdyYW1MaXN0ZW5lcihcIkJhY2tncm91bmRDb250ZXh0Q2xpY2tlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiB0dXJuIG9mZiBpbiBwcm9kdWN0aW9uXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdkaWFncmFtIG1vZGVsOicgKyBfZGlhZ3JhbS5tb2RlbC50b0pzb24oKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGJyb2FkY2FzdHMgdGhlIGdpdmVuIERpYWdyYW1FdmVudCAoc2VlIGFwaWRvY3MgZm9yIGdvLkRpYWdyYW1FdmVudClcbiAgICAvLyB0byBhbnkgY29tcG9uZW50cyB0aGF0IG1heSBiZSBpbnRlcmVzdGVkLCBpbmNsdWRpbmcgdGhpcyBvbmUuXG4gICAgZnVuY3Rpb24gYnJvYWRjYXN0RGlhZ3JhbUV2ZW50KGV2ZW50TmFtZSwgZSkge1xuICAgICAgICBzZWxmLmhhbmRsZURpYWdyYW1FdmVudChldmVudE5hbWUsIGUpO1xuICAgICAgICBfLmVhY2goZ2V0Q29tcG9uZW50cygpLCBmdW5jdGlvbihjb21wb25lbnQpIHtcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50LmhhbmRsZURpYWdyYW1FdmVudClcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuaGFuZGxlRGlhZ3JhbUV2ZW50KGV2ZW50TmFtZSwgZSk7XG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgfVxuXG4gICAgdGhpcy5oYW5kbGVEaWFncmFtRXZlbnQgPSBmdW5jdGlvbihldmVudE5hbWUsIGUpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaGFuZGxlRGlhZ3JhbUV2ZW50OiAnICsgZXZlbnROYW1lKTtcbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PSAnQ2hhbmdlZFNlbGVjdGlvbicpIHtcbiAgICAgICAgICAgIGNoYW5nZWRTZWxlY3Rpb24oZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25Db3BpZWQnKSB7XG4gICAgICAgICAgICBzZWxlY3Rpb25Db3BpZWQoZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdQYXJ0Q3JlYXRlZCcpIHtcbiAgICAgICAgICAgIHBhcnRDcmVhdGVkKGUpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnQmFja2dyb3VuZFNpbmdsZUNsaWNrZWQnKSB7XG4gICAgICAgICAgICBfdWkuc2hvd0hlbHBUaXAoJ2NhbnZhc1RpcCcpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnTGlua0RyYXduJykge1xuICAgICAgICAgICAgbGlua0RyYXduKGUpO1xuICAgICAgICAgICAgc2V0TmV3TGlua0RpcmVjdGlvbihlKTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ0xpbmtSZWxpbmtlZCcpIHtcbiAgICAgICAgICAgIGxpbmtSZWxpbmtlZChlKTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ0NsaXBib2FyZENoYW5nZWQnKSB7XG4gICAgICAgICAgICBjbGlwYm9hcmRDaGFuZ2VkKGUpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnQ2xpcGJvYXJkUGFzdGVkJykge1xuICAgICAgICAgICAgY2xpcGJvYXJkUGFzdGVkKGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIGhhbmRsZSB6b29tIHRvIHJlZ2lvbiBpZiBhcHBsaWNhYmxlXG4gICAgZnVuY3Rpb24gY2hhbmdlZFNlbGVjdGlvbihlKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ21hcC5jaGFuZ2VkU2VsZWN0aW9uJyk7XG4gICAgICAgIF9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XG4gICAgICAgIF91aS5tYXliZVpvb21Ub1JlZ2lvbigpO1xuICAgICAgICBpZiAoc2VsZi5yZWxhdGlvbnNoaXBzU2VsZWN0ZWQoKSkge1xuICAgICAgICAgICAgX3VpLnNob3dIZWxwVGlwKCdyZWxhdGlvbnNoaXBUaXAnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnRDcmVhdGVkKGUpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnTWFwLCBQYXJ0Q3JlYXRlZCcpO1xuICAgICAgICB2YXIgZ3JvdXAgPSBlLnN1YmplY3Q7XG4gICAgICAgIGlmICghKGdyb3VwIGluc3RhbmNlb2YgZ28uR3JvdXApKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsYXlvdXQnLCBfdWkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLmRlZmF1bHRUaGluZ0xheW91dCB8fCAnbGVmdCcpO1xuICAgICAgICBfbGF5b3V0cy5zZXROZXdQYXJ0TG9jYXRpb25EYXRhKGUpO1xuICAgIH1cblxuICAgIC8vIGZpeCBsaW5rIHBvcnRzIHdoZW4gYSBsaW5rIGlzIGNyZWF0ZWQgLSBcbiAgICAvLyB0aGUgUCBhbmQgUiBwb3J0cyBib3RoIGNvdmVyIHRoZSB3aG9sZSBub2RlLCBhbmQgdGhlIFAgcG9ydCBpcyBvbiB0b3Agb2YgdGhlIFIgcG9ydCwgXG4gICAgLy8gc28gYm90aCBQIGFuZCBSIGxpbmtzIGdldCB0aGUgdG9Qb3J0IHNldCB0byBQIGJ5IGRlZmF1bHQuXG4gICAgZnVuY3Rpb24gbGlua0RyYXduKGUpIHtcbiAgICAgICAgdmFyIGxpbmsgPSBlLnN1YmplY3Q7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2xpbmtEcmF3biwgbGluazogJyArIGxpbmsgKyAnLCBmcm9tUG9ydDogJyArIGxpbmsuZnJvbVBvcnRJZCArICcsIHRvUG9ydDogJyArIGxpbmsudG9Qb3J0SWQpO1xuICAgICAgICBpZiAobGluay5mcm9tUG9ydElkID09ICdQJykge1xuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIGNhdGVnb3J5XCIpO1xuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ3RvUG9ydCcsICdQJyk7XG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAnY2F0ZWdvcnknLCAnUCcpO1xuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayBjYXRlZ29yeVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBwcmV2ZW50IGxpbmtzIGZyb20gUiB0byBQXG4gICAgICAgIGVsc2UgaWYgKGxpbmsuZnJvbVBvcnRJZCA9PSAnUicpIHtcbiAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayB0b1BvcnRcIik7XG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndG9Qb3J0JywgJ1InKTtcbiAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgdG9Qb3J0XCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gZml4IGxpbmsgcG9ydHMgd2hlbiBhIGxpbmsgaXMgcmVsaW5rZWQgLSBcbiAgICAvLyBkcmFnZ2luZyBlaXRoZXIgZW5kIG9mIGFuIFItbGluayB0byBhbm90aGVyIG5vZGUgd2lsbCBzZXQgdGhlIGNvcnJlc3BvbmRpbmcgcG9ydCB0byBQLCBcbiAgICAvLyBzaW5jZSBQIHBvcnQgaXMgb24gdG9wIG9mIFIgcG9ydCwgc28gd2UgcmVzZXQgYm90aCBwb3J0cyB0byBSIGlmIHRoZSBjYXRlZ29yeSBpcyBub3QgUC5cbiAgICBmdW5jdGlvbiBsaW5rUmVsaW5rZWQoZSkge1xuICAgICAgICB2YXIgbGluayA9IGUuc3ViamVjdDtcbiAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PT0gdW5kZWZpbmVkIHx8IGxpbmsuZGF0YS5jYXRlZ29yeSAhPT0gJ1AnKSB7XG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAnZnJvbVBvcnQnLCAnUicpO1xuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ3RvUG9ydCcsICdSJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXROZXdMaW5rRGlyZWN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGxpbmsgPSBlLnN1YmplY3Q7XG4gICAgICAgIGlmIChsaW5rLmZyb21Qb3J0SWQgPT0gJ1InKSB7XG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgZGlyZWN0aW9uXCIpO1xuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ3R5cGUnLCBfdWkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLmRlZmF1bHRSZWxhdGlvbnNoaXBEaXJlY3Rpb24pO1xuICAgICAgICAgICAgX2RpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayBkaXJlY3Rpb25cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGlwYm9hcmRDaGFuZ2VkKGUpIHtcbiAgICAgICAgdmFyIHBhcnRzID0gZS5zdWJqZWN0Lml0ZXJhdG9yO1xuICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XG4gICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NsaXBib2FyZENoYW5nZWQ6IHBhcnQgJyArIHBhcnQgKyAnLCBtYWlucGFuZWwgc2NhbGU6ICcgKyBwYXJ0LmZpbmRPYmplY3QoJ21haW5wYW5lbCcpLnNjYWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5COiB0aGlzIGlzIGNhbGxlZCB3aGVuIHBhcnRzIGFyZSBjb3BpZWQgYnkgY29udHJvbC1kcmFnLCBOT1Qgd2hlbiB0aGUgY29weSBidXR0b24gaXMgY2xpY2tlZFxuICAgIGZ1bmN0aW9uIHNlbGVjdGlvbkNvcGllZChlKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NlbGVjdGlvbkNvcGllZCcpO1xuICAgICAgICB2YXIgcGFydHMgPSBlLnN1YmplY3QuaXRlcmF0b3I7XG4gICAgICAgIHdoaWxlIChwYXJ0cy5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHMudmFsdWU7XG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmIHBhcnQuaXNUb3BMZXZlbCkge1xuICAgICAgICAgICAgICAgIHZhciBsb2MgPSBnby5Qb2ludC5wYXJzZShwYXJ0LmRhdGEubG9jKTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdzZWxlY3Rpb25Db3BpZWQ6IHVwZGF0aW5nIGxvYyBvZiBwYXJ0ICcgKyBwYXJ0ICsgJyA9ICcgKyBsb2MgKyAnLCBzY2FsZTogJyArIHBhcnQuc2NhbGUpO1xuICAgICAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShwYXJ0LmRhdGEsICdsb2MnLCAobG9jLnggKyA1MCkgKyAnICcgKyAobG9jLnkgKyA1MCkpO1xuICAgICAgICAgICAgICAgIHBhcnQudXBkYXRlVGFyZ2V0QmluZGluZ3MoJ2xvYycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xpcGJvYXJkUGFzdGVkKGUpIHtcbiAgICAgICAgdmFyIHBhcnRzID0gZS5zdWJqZWN0Lml0ZXJhdG9yO1xuICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XG4gICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiBwYXJ0LmlzVG9wTGV2ZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG9jID0gZ28uUG9pbnQucGFyc2UocGFydC5kYXRhLmxvYyk7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY2xpcGJvYXJkUGFzdGVkOiB1cGRhdGluZyBsb2Mgb2YgcGFydCAnICsgcGFydCArICcgPSAnICsgbG9jICsgJywgc2NhbGU6ICcgKyBwYXJ0LnNjYWxlKTtcbiAgICAgICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbG9jJywgKGxvYy54ICsgNTApICsgJyAnICsgKGxvYy55ICsgNTApKTtcbiAgICAgICAgICAgICAgICBwYXJ0LnVwZGF0ZVRhcmdldEJpbmRpbmdzKCdsb2MnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNvbXB1dGVzIHRoZSBib3VuZHMgb2YgYWxsIGdyb3VwcyBpbiB0aGUgZGlhZ3JhbSAtIHRoaXMgaW5jbHVkZXMgYWxsIGlkZWFzL3RoaW5ncywgXG4gICAgLy8gYW5kIGV4Y2x1ZGVzIG5vZGVzLCBpbmNsdWRpbmcgc2xpZGVzLCB0aGUgc2xpZGUgYmxvY2tlciwgYW5kIHRoZSBleHBvcnQgZm9vdGVyXG4gICAgdGhpcy5jb21wdXRlTWFwQm91bmRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBncm91cHMgPSBuZXcgZ28uTGlzdChnby5Hcm91cCk7XG4gICAgICAgIHZhciBub2RlcyA9IF9kaWFncmFtLm5vZGVzO1xuICAgICAgICB3aGlsZSAobm9kZXMubmV4dCgpKSB7XG4gICAgICAgICAgICBpZiAobm9kZXMudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xuICAgICAgICAgICAgICAgIGdyb3Vwcy5hZGQobm9kZXMudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfZGlhZ3JhbS5jb21wdXRlUGFydHNCb3VuZHMoZ3JvdXBzKS5jb3B5KCk7IC8vIHJldHVybiBhIG11dGFibGUgcmVjdFxuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0gd2hhdCBpcyBjdXJyZW50bHkgc2VsZWN0ZWQ/IC0tLS0tLS0tLS0tLS0tLS1cblxuICAgIC8vIHJldHVybnMgdHJ1ZSBpZiBhbGwgc2VsZWN0ZWQgaXRlbXMgYXJlIHRoaW5ncyAoaS5lLiBHcm91cHMpLCBpbmNsdWRpbmcgci10aGluZ3NcbiAgICB0aGlzLnRoaW5nc1NlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChfZGlhZ3JhbSA9PSBudWxsIHx8IF9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgdmFyIGl0ID0gX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XG4gICAgICAgICAgICBpZiAoIShpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIGV4YWN0bHkgb25lIHRoaW5nIChHcm91cCkgaXMgc2VsZWN0ZWRcbiAgICB0aGlzLnRoaW5nU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9kaWFncmFtICE9PSBudWxsICYmIF9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA9PSAxICYmIF9kaWFncmFtLnNlbGVjdGlvbi5maXJzdCgpIGluc3RhbmNlb2YgZ28uR3JvdXA7XG4gICAgfTtcblxuICAgIC8vIGlmIGEgc2luZ2xlIGdyb3VwIGlzIHNlbGVjdGVkLCByZXR1cm5zIGl0LCBvdGhlcndpc2UgcmV0dXJucyBudWxsXG4gICAgdGhpcy5nZXRVbmlxdWVUaGluZ1NlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChfZGlhZ3JhbSAhPT0gbnVsbCAmJiBfZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPT0gMSAmJiBfZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKSBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XG4gICAgICAgICAgICByZXR1cm4gX2RpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnRoaW5nc1NlbGVjdGVkQXJlTWVtYmVyc09mID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgaWYgKF9kaWFncmFtID09PSBudWxsIHx8IF9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgdmFyIGl0ID0gX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XG4gICAgICAgICAgICBpZiAoIShpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSB8fCBpdC52YWx1ZS5jb250YWluaW5nR3JvdXAgIT0gZ3JvdXApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHRoaXMudGhpbmdzU2VsZWN0ZWRBcmVEZXNjZW5kYW50c09mID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgaWYgKF9kaWFncmFtID09PSBudWxsIHx8IF9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgdmFyIGl0ID0gX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XG4gICAgICAgICAgICB2YXIgYW5jZXN0b3JzID0gX2xheW91dHMuZ2V0QW5jZXN0b3JHcm91cHMoaXQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKF8uaW5kZXhPZihhbmNlc3RvcnMsIGdyb3VwKSA9PSAtMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgdGhpcy50aGluZ3NTZWxlY3RlZEluY2x1ZGVTbGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoX2RpYWdyYW0gPT09IG51bGwgfHwgX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICB2YXIgaXQgPSBfZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgIGlmIChpdC52YWx1ZS5kYXRhICYmIGl0LnZhbHVlLmRhdGEuY2F0ZWdvcnkgPT0gJ3NsaWRlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICAvLyByZXR1cm5zIHRydWUgaWYgYWxsIHNlbGVjdGVkIGl0ZW1zIGFyZSByZWxhdGlvbnNoaXBzIChpLmUuIExpbmtzKVxuICAgIHRoaXMucmVsYXRpb25zaGlwc1NlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChfZGlhZ3JhbSA9PT0gbnVsbCB8fCBfZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIHZhciBpdCA9IF9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xuICAgICAgICAgICAgaWYgKCEoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5MaW5rKSB8fCAhX2xheW91dHMuaXNSTGluayhpdC52YWx1ZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIC8vIHJldHVybnMgdHJ1ZSBpZiBleGFjdGx5IG9uZSByZWxhdGlvbnNoaXAgKExpbmspIGlzIHNlbGVjdGVkXG4gICAgdGhpcy5yZWxhdGlvbnNoaXBTZWxlY3RlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX2RpYWdyYW0gIT09IG51bGwgJiYgX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50ID09IDEgJiYgX2RpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCkgaW5zdGFuY2VvZiBnby5MaW5rO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0gbG9hZCBhbmQgaW5pdGlhbGl6ZSBtb2RlbCAtLS0tLS0tLS0tLS0tXG5cbiAgICB0aGlzLnJlbG9hZCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbihkYXRhKTtcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkQ2hhbmdlZExpc3RlbmVyKF9hdXRvc2F2ZS5tb2RlbENoYW5nZWQpO1xuICAgIH1cblxuICAgIHRoaXMubG9hZCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICBcbiAgICAgICAgZGF0YSA9IGRhdGEgfHwgJHNjb3BlLm1hcERhdGEuZGF0YTtcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbihkYXRhKTtcbiAgICAgICAgX3VpLnNldFN0YXRlRGF0YSgkc2NvcGUubWFwRGF0YS5zdGF0ZV9kYXRhKTtcbiAgICAgICAgX3VpLnNldE1hcEVkaXRvck9wdGlvbnMoJHNjb3BlLm1hcERhdGEuZWRpdG9yX29wdGlvbnMpO1xuXG4gICAgICAgIHNlbGYuY2hlY2tNb2RlbCgpO1xuICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xuICAgICAgICBfZGlhZ3JhbS51bmRvTWFuYWdlci5pc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGRDaGFuZ2VkTGlzdGVuZXIoX2F1dG9zYXZlLm1vZGVsQ2hhbmdlZCk7XG4gICAgICAgIF9hdXRvc2F2ZS5zYXZlT25Nb2RlbENoYW5nZWQgPSB0cnVlO1xuICAgICAgICBfZGlhZ3JhbS5pc1JlYWRPbmx5ID0gISRzY29wZS5jYW5FZGl0O1xuICAgICAgICAkc2NvcGUudXBkYXRlRWRpdFN0YXR1cygkc2NvcGUuY2FuRWRpdCA/ICRzY29wZS5MQVNUX1VQREFURUQgOiAkc2NvcGUuUkVBRF9PTkxZKTtcbiAgICAgICAgLy9fdWkucmVzZXRab29tKCk7XG4gICAgICAgIHNlbGYubG9hZE1hcEV4dHJhRGF0YSgkc2NvcGUubWFwRGF0YSk7XG5cbiAgICAgICAgLy8gaWYgbm8gbm9kZXMgT1IgaW4gdGhpbmtxdWVyeSBtb2RlLCBsYXVuY2ggZ2VuZXJhdG9yXG4gICAgICAgIGlmICgkc2NvcGUudGhpbmtxdWVyeSB8fCAhX2RpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICAgIF91aS5vcGVuVGFiKF91aS5UQUJfSURfR0VORVJBVE9SKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB3ZSBoYXZlIHNsaWRlcywgcGxheSBwcmVzZW50YXRpb25cbiAgICAgICAgZWxzZSBpZiAoISRzY29wZS5jYW5FZGl0ICYmIF9wcmVzZW50ZXIuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIF9wcmVzZW50ZXIucGxheVNsaWRlKDEpO1xuICAgICAgICB9XG5cblxuICAgIH07XG5cbiAgICB0aGlzLmxvYWRGb3JTYW5kYm94ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIF9kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24oJHNjb3BlLm1hcERhdGEpO1xuICAgICAgICBfdWkuc2V0U3RhdGVEYXRhKCcnKTsgLy8gaW1wb3J0YW50ISAob3RoZXJ3aXNlIGNvcm5lciBoaWdobGlnaHRpbmcgYnJlYWtzKVxuICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xuICAgICAgICBfZGlhZ3JhbS51bmRvTWFuYWdlci5pc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICBfdWkucmVzZXRab29tKCk7XG4gICAgICAgICRzY29wZS5jYW5FZGl0ID0gdHJ1ZTtcblxuICAgICAgICAvLyBpZiBubyBub2RlcyBPUiBpbiB0aGlua3F1ZXJ5IG1vZGUsIGxhdW5jaCBnZW5lcmF0b3JcbiAgICAgICAgaWYgKCRzY29wZS50aGlua3F1ZXJ5KSB7XG4gICAgICAgICAgICBfdWkub3BlblRhYihfdWkuVEFCX0lEX0dFTkVSQVRPUik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBzbGlkZXMsIHBsYXkgcHJlc2VudGF0aW9uXG4gICAgICAgIGVsc2UgaWYgKF9wcmVzZW50ZXIuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIF9wcmVzZW50ZXIucGxheVNsaWRlKDEpO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgLy8gZml4IGFueSBzdHJ1Y3R1cmFsIHByb2JsZW1zIGluIHRoZSBtb2RlbCBiZWZvcmUgZGlzcGxheWluZyBpdFxuICAgIHRoaXMuY2hlY2tNb2RlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBjaGFuZ2UgXCJpc0xpbmtMYWJlbFwiIHByb3BlcnR5IHRvIGNhdGVnb3J5OlwiTGlua0xhYmVsXCIgKGNoYW5nZSBhcyBvZiBnb0pTIDEuMylcbiAgICAgICAgXy5lYWNoKF9kaWFncmFtLm1vZGVsLm5vZGVEYXRhQXJyYXksIGZ1bmN0aW9uKG5vZGVEYXRhLCBpbmRleCwgbGlzdCkge1xuICAgICAgICAgICAgaWYgKG5vZGVEYXRhLmlzTGlua0xhYmVsKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG5vZGVEYXRhLmlzTGlua0xhYmVsO1xuICAgICAgICAgICAgICAgIG5vZGVEYXRhLmNhdGVnb3J5ID0gXCJMaW5rTGFiZWxcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gY2hlY2sgZm9yIHRoZSBsaW5rIGxhYmVsIChyLXRoaW5nKSBmb3IgYSBsaW5rIGJlaW5nIHRoZSBzYW1lIGFzIHRoZSBmcm9tIG9yIHRvIG5vZGUgXG4gICAgICAgIC8vIC0gdGhpcyBjYW4gY2F1c2UgaW5maW5pdGUgcmVjdXJzaW9uIGluIHRoaW5rcyBsaWtlIGxheW91dC5nZXRTY2FsZVxuICAgICAgICBfLmVhY2goX2RpYWdyYW0ubW9kZWwubGlua0RhdGFBcnJheSwgZnVuY3Rpb24obGlua0RhdGEsIGluZGV4LCBsaXN0KSB7XG4gICAgICAgICAgICB2YXIgYmFkTGFiZWxLZXlzID0gW107XG4gICAgICAgICAgICBfLmVhY2gobGlua0RhdGEubGFiZWxLZXlzLCBmdW5jdGlvbihrZXksIGluZGV4MiwgbGlzdDIpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09IGxpbmtEYXRhLmZyb20gfHwga2V5ID09IGxpbmtEYXRhLnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xhYmVsS2V5IHNhbWUgYXMgZnJvbSBvciB0byBvZiBsaW5rOiAnICsga2V5KTtcbiAgICAgICAgICAgICAgICAgICAgYmFkTGFiZWxLZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxpbmtEYXRhLmxhYmVsS2V5cyA9IF8uZGlmZmVyZW5jZShsaW5rRGF0YS5sYWJlbEtleXMsIGJhZExhYmVsS2V5cyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBsb2FkcyBvdGhlciBkYXRhIGJlc2lkZXMgdGhlIGRpYWdyYW0gbW9kZWwgZnJvbSB0aGUganNvbiBvYmplY3QgcmV0dXJuZWQgYnkgbWFwcy9zaG93Lmpzb25cbiAgICAvLyAtIHRoaXMgaW5jbHVkZXMgcG9pbnRzLCBiYWRnZXMsIHZlcnNpb25zLCBhbmQgbWFwIGFuYWx5dGljc1xuICAgIC8vIE5COiBwb2ludHMgYW5kIGJhZGdlcyBhcmUgc2V0IGF0IHBhZ2UgbG9hZCB0aW1lIGluIGxheW91dHMvdXNlciBhbmQgdXNlcnMvYmFkZ2VzLCBidXRcbiAgICAvLyB3ZSBhbHNvIG5lZWQgdG8gYmUgYWJsZSB0byB1cGRhdGUgdGhlbSBoZXJlIGFmdGVyIGFuIGF1dG9zYXZlXG5cbiAgICAvLyBUT0RPOiBpcyB0aGlzIHN0aWxsIGFsbCBuZWVkZWQgd2l0aCB0aGUgbmV3ZXIgdXNlclByb2ZpbGUgc3R1ZmY/XG4gICAgdGhpcy5sb2FkTWFwRXh0cmFEYXRhID0gZnVuY3Rpb24obWFwRGF0YSkge1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbWFwLmxvYWRNYXBFeHRyYURhdGEsIG1hcERhdGE6ICcgKyBtYXBEYXRhKTtcbiAgICAgICAgICAgICRzY29wZS5tYXBVc2VyVGFncyA9IG1hcERhdGEubWV0YWRhdGEudXNlclRhZ3M7IC8vIFRPRE86IGlzIHRoaXMgdXNlZCBhbnl3aGVyZT9cblxuICAgICAgICAgICAgLy8kc2NvcGUubWFwLmdldEhpc3RvcnkoKS52ZXJzaW9uTGlzdCA9IG1hcERhdGEudmVyc2lvbnM7XG4gICAgICAgICAgICAkc2NvcGUubWFwLmdldEFuYWx5dGljcygpLm1hcEFuYWx5dGljcyA9IG1hcERhdGEuYW5hbHl0aWNzO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gbG9hZHMgbW9kZWwgZGF0YSBmb3IgYW4gaW5kaXZpZHVhbCB2ZXJzaW9uIGFuZCBkaXNwbGF5cyBpdFxuICAgIC8vIE5COiB0aGlzIGFsc28gZGlzYWJsZXMgYXV0b3NhdmU7IGxvYWQoKSBtdXN0IGJlIGNhbGxlZCB0byByZS1lbmFibGUgaXRcbiAgICB0aGlzLmxvYWRWZXJzaW9uID0gZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvbWFwX3ZlcnNpb25zLycgKyBpZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbG9hZGVkIG1hcCB2ZXJzaW9uIHdpdGggSUQ6ICcgKyBpZCk7XG4gICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24ocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLnVuZG9NYW5hZ2VyLmlzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBfYXV0b3NhdmUuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLmlzUmVhZE9ubHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBsb2FkIE1ldGFNYXAgdmVyc2lvbicpO1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBzZXQgd2hldGhlciBlZGl0aW5nIGNhcGFiaWxpdHkgaXMgdGVtcG9yYXJpbHkgc3VzcGVuZGVkIC1cbiAgICAvLyB0aGlzIGlzIGRpc3RpbmN0IGZyb20gdGhlIGdsb2JhbCAkc2NvcGUuY2FuRWRpdCBzZXR0aW5nLFxuICAgIC8vIHdoaWNoIGlmIGZhbHNlIHByZXZlbnRzIGVkaXRpbmcgYXQgYWxsIHRpbWVzXG4gICAgdGhpcy5zZXRFZGl0aW5nQmxvY2tlZCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICBpZiAoJHNjb3BlLmNhbkVkaXQpIHtcbiAgICAgICAgICAgIF9kaWFncmFtLmlzUmVhZE9ubHkgPSB2YWw7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLSBjcmVhdGluZyB0aGluZ3MgaW4gdGhlIG1vZGVsIC0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIC8vIGRlZmF1bHQgcHJvcGVydGllcyBmb3IgYWxsIG5ldyBUaGluZ3MgKGdyb3VwcykgLSBub3RlIHRoYXQgdGhlc2UgY2FuIGJlIG92ZXJyaWRkZW4gaWYgbmVlZGVkXG4gICAgZnVuY3Rpb24gZ2V0TmV3VGhpbmdEYXRhKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGV4dDogJ0lkZWEnLFxuICAgICAgICAgICAgaXNHcm91cDogdHJ1ZSxcbiAgICAgICAgICAgIGxheW91dDogX3VpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5kZWZhdWx0VGhpbmdMYXlvdXQgfHwgJ2xlZnQnLFxuICAgICAgICAgICAgc0V4cGFuZGVkOiB0cnVlLFxuICAgICAgICAgICAgcEV4cGFuZGVkOiB0cnVlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVTaXN0ZXIgPSBmdW5jdGlvbih0aGluZykge1xuICAgICAgICBpZiAoISRzY29wZS5jYW5FZGl0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBuZXdMb2MgPSBfbGF5b3V0cy5nZXROZXdTaXN0ZXJMb2NhdGlvbih0aGluZyk7XG4gICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQoZ2V0TmV3VGhpbmdEYXRhKCksIHtcbiAgICAgICAgICAgIGdyb3VwOiB0aGluZy5kYXRhLmdyb3VwLFxuICAgICAgICAgICAgdGV4dDogJ0lkZWEnLFxuICAgICAgICAgICAgbG9jOiBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKVxuICAgICAgICB9KTtcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoZGF0YSk7XG4gICAgICAgIHZhciBuZXdTaXN0ZXIgPSBfZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XG5cbiAgICAgICAgLy8gcHV0IG5ldyBzaXN0ZXIgcmlnaHQgYWZ0ZXIgdGhpbmcgKG5vdCBhcyB0aGUgbGFzdCBzaWJsaW5nKVxuICAgICAgICBpZiAodGhpbmcuY29udGFpbmluZ0dyb3VwKSB7XG4gICAgICAgICAgICBzZWxmLm1vdmVTaWJsaW5nTmV4dFRvKG5ld1Npc3RlciwgdGhpbmcsIHNlbGYuUklHSFQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdTaXN0ZXI7XG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlUlRvU2lzdGVyID0gZnVuY3Rpb24odGhpbmcpIHtcbiAgICAgICAgaWYgKCEkc2NvcGUuY2FuRWRpdCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdGhpbmdLZXkgPSBfZGlhZ3JhbS5tb2RlbC5nZXRLZXlGb3JOb2RlRGF0YSh0aGluZy5kYXRhKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZygndGhpbmdLZXk6ICcgKyB0aGluZ0tleSk7XG4gICAgICAgIHZhciBuZXdMb2MgPSBfbGF5b3V0cy5nZXROZXdTaXN0ZXJMb2NhdGlvbih0aGluZywgdHJ1ZSk7IC8vIHdpdGhSID0gdHJ1ZVxuICAgICAgICB2YXIgZGF0YSA9IF8uZXh0ZW5kKGdldE5ld1RoaW5nRGF0YSgpLCB7XG4gICAgICAgICAgICBncm91cDogdGhpbmcuZGF0YS5ncm91cCxcbiAgICAgICAgICAgIHRleHQ6ICdJZGVhJyxcbiAgICAgICAgICAgIGxvYzogZ28uUG9pbnQuc3RyaW5naWZ5KG5ld0xvYylcbiAgICAgICAgfSk7XG4gICAgICAgIF9kaWFncmFtLm1vZGVsLmFkZE5vZGVEYXRhKGRhdGEpO1xuICAgICAgICB2YXIgbmV3U2lzdGVyID0gX2RpYWdyYW0uZmluZE5vZGVGb3JEYXRhKGRhdGEpO1xuICAgICAgICB2YXIgZ3JvdXBLZXkgPSBfZGlhZ3JhbS5tb2RlbC5nZXRLZXlGb3JOb2RlRGF0YShkYXRhKTtcblxuICAgICAgICAvLyBjcmVhdGUgbGlua1xuICAgICAgICB2YXIgbGlua0RhdGEgPSB7XG4gICAgICAgICAgICBmcm9tOiB0aGluZ0tleSxcbiAgICAgICAgICAgIHRvOiBncm91cEtleSxcbiAgICAgICAgICAgIHR5cGU6ICd0bycsXG4gICAgICAgICAgICBmcm9tUG9ydDogJ1InLFxuICAgICAgICAgICAgdG9Qb3J0OiAnUidcbiAgICAgICAgfTtcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkTGlua0RhdGEobGlua0RhdGEpO1xuXG4gICAgICAgIC8vIHB1dCBuZXcgc2lzdGVyIHJpZ2h0IGFmdGVyIHRoaW5nIChub3QgYXMgdGhlIGxhc3Qgc2libGluZylcbiAgICAgICAgaWYgKHRoaW5nLmNvbnRhaW5pbmdHcm91cCkge1xuICAgICAgICAgICAgc2VsZi5tb3ZlU2libGluZ05leHRUbyhuZXdTaXN0ZXIsIHRoaW5nLCBzZWxmLlJJR0hUKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3U2lzdGVyO1xuICAgIH07XG5cbiAgICB0aGlzLmNyZWF0ZUNoaWxkID0gZnVuY3Rpb24odGhpbmcsIG5hbWUsIHgsIHkpIHtcbiAgICAgICAgaWYgKCEkc2NvcGUuY2FuRWRpdCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbmV3TG9jID0gX2xheW91dHMuZ2V0TmV3Q2hpbGRMb2NhdGlvbjIodGhpbmcpO1xuICAgICAgICBpZiAoeCB8fCB5KSB7XG4gICAgICAgICAgICBuZXdMb2MgPSBuZXcgZ28uUG9pbnQoeCwgeSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRhdGEgPSBfLmV4dGVuZChnZXROZXdUaGluZ0RhdGEoKSwge1xuICAgICAgICAgICAgZ3JvdXA6IHRoaW5nLmRhdGEua2V5LFxuICAgICAgICAgICAgdGV4dDogbmFtZSB8fCAnUGFydCcsXG4gICAgICAgICAgICBsb2M6IGdvLlBvaW50LnN0cmluZ2lmeShuZXdMb2MpXG4gICAgICAgIH0pO1xuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcbiAgICAgICAgX2xheW91dHMuc2V0RGVzY2VuZGFudExheW91dHModGhpbmcsIHRoaW5nLmRhdGEubGF5b3V0KTtcbiAgICAgICAgdmFyIGNoaWxkID0gX2RpYWdyYW0uZmluZE5vZGVGb3JEYXRhKGRhdGEpO1xuICAgICAgICBjaGlsZC51cGRhdGVUYXJnZXRCaW5kaW5ncygpO1xuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlUlRoaW5nID0gZnVuY3Rpb24obGluaywgbmFtZSkge1xuICAgICAgICBpZiAoISRzY29wZS5jYW5FZGl0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC8vY29uc29sZS5sb2coJ2NyZWF0ZVJUaGluZywgbGluazogJyArIGxpbmsgKyAnLCBuYW1lOiAnICsgbmFtZSk7XG4gICAgICAgIC8vIGRvbid0IGFsbG93IG11bHRpcGxlIFItdGhpbmdzXG4gICAgICAgIGlmIChsaW5rLmlzTGFiZWxlZExpbmspIHtcbiAgICAgICAgICAgIC8vIC8vY29uc29sZS5sb2coJ2Nhbm5vdCBjcmVhdGUgUlRoaW5nLCBsaW5rIGlzIGFscmVhZHkgbGFiZWxlZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGEgPSBfLmV4dGVuZChnZXROZXdUaGluZ0RhdGEoKSwge1xuICAgICAgICAgICAgdGV4dDogbmFtZSB8fCAnUmVsYXRpb25zaGlwIElkZWEnLFxuICAgICAgICAgICAgLy9pc0xpbmtMYWJlbDogdHJ1ZSwgICAgIC8vIGRlcHJlY2F0ZWQgYXMgb2YgZ29KUyAxLjNcbiAgICAgICAgICAgIGNhdGVnb3J5OiBcIkxpbmtMYWJlbFwiLCAvLyBuZXcgYXMgb2YgZ29KUyAxLjNcbiAgICAgICAgICAgIGxvYzogJzAgMCdcbiAgICAgICAgfSk7XG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oXCJjcmVhdGUgUiBUaGluZ1wiKTtcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoZGF0YSk7XG4gICAgICAgIHZhciBrZXkgPSBfZGlhZ3JhbS5tb2RlbC5nZXRLZXlGb3JOb2RlRGF0YShkYXRhKTtcbiAgICAgICAgdmFyIG5vZGUgPSBfZGlhZ3JhbS5maW5kUGFydEZvcktleShrZXkpO1xuICAgICAgICBub2RlLmxhYmVsZWRMaW5rID0gbGluaztcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oXCJjcmVhdGUgUiBUaGluZ1wiKTtcbiAgICAgICAgX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcblxuICAgICAgICByZXR1cm4gX2RpYWdyYW0uZmluZE5vZGVGb3JEYXRhKGRhdGEpO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tIGNyZWF0aW5nIHRoaW5ncyB3aXRoIHNwZWNpZmllZCBuYW1lcy9sb2NhdGlvbnMgLSBmb3IgdXNlIGJ5IGdlbmVyYXRvciBhbmQgdGVzdHMgLS0tLS0tLS0tLS0tXG5cbiAgICB0aGlzLmNyZWF0ZVRoaW5nID0gZnVuY3Rpb24oeCwgeSwgbmFtZSwgbGF5b3V0KSB7XG4gICAgICAgIGdyb3VwID0gX2RpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuaW5zZXJ0UGFydChuZXcgZ28uUG9pbnQoeCwgeSkpO1xuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ3RleHQnLCBuYW1lKTtcbiAgICAgICAgaWYgKGxheW91dCkge1xuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsYXlvdXQnLCBsYXlvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBncm91cDtcbiAgICB9O1xuXG4gICAgdGhpcy5jcmVhdGVSTGlua1dpdGhSVGhpbmcgPSBmdW5jdGlvbih0aGluZzEsIHRoaW5nMiwgbmFtZSkge1xuICAgICAgICB2YXIgbGluayA9IHNlbGYuY3JlYXRlUkxpbmsodGhpbmcxLCB0aGluZzIpO1xuICAgICAgICByZXR1cm4gc2VsZi5jcmVhdGVSVGhpbmcobGluaywgbmFtZSk7XG4gICAgfTtcblxuICAgIC8vIHJldHVybnMgdGhlIGxpbmtEYXRhIG9iamVjdCBmb3IgdGhlIG5ldyBsaW5rXG4gICAgdGhpcy5jcmVhdGVSTGluayA9IGZ1bmN0aW9uKHRoaW5nMSwgdGhpbmcyKSB7XG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgdHlwZTogJ25vQXJyb3dzJyxcbiAgICAgICAgICAgIGZyb206IHRoaW5nMS5kYXRhLmtleSxcbiAgICAgICAgICAgIHRvOiB0aGluZzIuZGF0YS5rZXksXG4gICAgICAgICAgICBmcm9tUG9ydDogJ1InLFxuICAgICAgICAgICAgdG9Qb3J0OiAnUidcbiAgICAgICAgfTtcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkTGlua0RhdGEoZGF0YSk7XG4gICAgICAgIF9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xuICAgICAgICByZXR1cm4gX2RpYWdyYW0uZmluZExpbmtGb3JEYXRhKGRhdGEpO1xuICAgIH07XG5cbiAgICAvLyByZXR1cm5zIHRoZSBsaW5rRGF0YSBvYmplY3QgZm9yIHRoZSBuZXcgbGlua1xuICAgIHRoaXMuY3JlYXRlUExpbmsgPSBmdW5jdGlvbih0aGluZzEsIHRoaW5nMikge1xuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdub0Fycm93cycsXG4gICAgICAgICAgICBmcm9tOiB0aGluZzEuZGF0YS5rZXksXG4gICAgICAgICAgICB0bzogdGhpbmcyLmRhdGEua2V5LFxuICAgICAgICAgICAgZnJvbVBvcnQ6ICdQJyxcbiAgICAgICAgICAgIHRvUG9ydDogJ1AnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdQJ1xuICAgICAgICB9O1xuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGRMaW5rRGF0YShkYXRhKTtcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ3BFeHBhbmRlZCcsIHRydWUpO1xuICAgICAgICByZXR1cm4gX2RpYWdyYW0uZmluZExpbmtGb3JEYXRhKGRhdGEpO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tIG1vdmluZyB0aGluZ3MgaW4gdGhlIG1vZGVsIHN0cnVjdHVyZSAtLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvLyByZXR1cm5zIGEgZ28uTGlzdCBvZiB0aGUgaXRlbXMgaW4gdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHRoYXQgYXJlIEdyb3Vwc1xuICAgIGZ1bmN0aW9uIGdldFNlbGVjdGVkR3JvdXBzKCkge1xuICAgICAgICB2YXIgaXQgPSBfZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XG4gICAgICAgIHZhciBtZW1iZXJzID0gbmV3IGdvLkxpc3QoKTtcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xuICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXApIHtcbiAgICAgICAgICAgICAgICBtZW1iZXJzLmFkZChwYXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVtYmVycztcbiAgICB9XG5cbiAgICAvLyBkcmFnIHRvIFNcbiAgICB0aGlzLmFkZFNlbGVjdGVkVGhpbmdzQXNDaGlsZHJlbk9mID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgdmFyIG5ld01lbWJlcnMgPSBnZXRTZWxlY3RlZEdyb3VwcygpO1xuXG4gICAgICAgIC8vIGNoZWNrIGV4aXN0aW5nIG1lbWJlcnMgc28gd2UgY2FuIGNhbGN1bGF0ZSBsYXlvdXRcbiAgICAgICAgdmFyIG9sZE1lbWJlckJvdW5kcyA9IHNlbGYuc2FmZVJlY3QoX2RpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKGdyb3VwLm1lbWJlclBhcnRzKSk7XG5cbiAgICAgICAgLy8gTkI6IHRoaXMgaXMgc3ViamVjdCB0byB2YWxpZGF0aW9uIGJ5IENvbW1hbmRIYW5kbGVyLmlzVmFsaWRNZW1iZXIsXG4gICAgICAgIC8vIHNvIGZvciBleGFtcGxlLCBtZW1iZXJzIG9mIG1lbWJlcnMgb2YgbmV3TWVtYmVycyB3aWxsIG5vdCBiZSBhZGRlZCBhcyBtZW1iZXJzXG4gICAgICAgIGdyb3VwLmFkZE1lbWJlcnMobmV3TWVtYmVycyk7XG5cbiAgICAgICAgX2xheW91dHMubGF5b3V0TmV3TWVtYmVyc1JlbGF0aXZlVG8obmV3TWVtYmVycywgZ3JvdXAsIG9sZE1lbWJlckJvdW5kcyk7XG5cbiAgICAgICAgX2RpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB9O1xuXG4gICAgLy8gZHJhZyB0byBEXG4gICAgdGhpcy5hZGRTZWxlY3RlZFRoaW5nc0FzU2lzdGVyc09mID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgdmFyIG9sZE1lbWJlcnMgPSBnZXRTZWxlY3RlZEdyb3VwcygpO1xuXG4gICAgICAgIC8vIGlmIGRyYWdnaW5nIHRvIHRvcCBsZXZlbCwgbW92ZSBkcmFnZ2VkIHRoaW5ncyBzbyB0aGV5IGRvbid0IG92ZXJsYXAgdGhlIGZvcm1lciBwYXJlbnRcbiAgICAgICAgaWYgKCFncm91cC5jb250YWluaW5nR3JvdXApIHtcbiAgICAgICAgICAgIC8vIGNoZWNrIGV4aXN0aW5nIG1lbWJlcnMgc28gd2UgY2FuIGNhbGN1bGF0ZSBsYXlvdXRcbiAgICAgICAgICAgIHZhciBvbGRNZW1iZXJzQm91bmRzID0gX2RpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKG9sZE1lbWJlcnMpO1xuICAgICAgICAgICAgLy8gTkI6IG9sZE1lbWJlcnMgY2FuIGJlIG9uIG11bHRpcGxlIGxldmVscywgc28gbm90IGNsZWFyIHdoaWNoIGxldmVsIHRvIHVzZSBmb3IgcmVzY2FsaW5nIG9sZCBtZW1iZXJzIGFmdGVyIGRyYWdcbiAgICAgICAgICAgIHZhciBvbGRNZW1iZXJzTGV2ZWwgPSBfbGF5b3V0cy5jb21wdXRlTGV2ZWwob2xkTWVtYmVycy5maXJzdCgpKTtcblxuICAgICAgICAgICAgdmFyIGl0ID0gb2xkTWVtYmVycy5pdGVyYXRvcjtcbiAgICAgICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWVtYmVyID0gaXQudmFsdWU7XG4gICAgICAgICAgICAgICAgbWVtYmVyLmNvbnRhaW5pbmdHcm91cCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfbGF5b3V0cy5sYXlvdXRPbGRNZW1iZXJzT3V0c2lkZU9mKG9sZE1lbWJlcnMsIGdyb3VwLCBvbGRNZW1iZXJzQm91bmRzLCBvbGRNZW1iZXJzTGV2ZWwpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIG5vdCBkcmFnZ2luZyB0byB0b3AgbGV2ZWwsIHBsYWNlIGRyYWdnZWQgdGhpbmdzIGFmdGVyIGZvcm1lciBwYXJlbnQgaW4gb3V0bGluZVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpdDIgPSBvbGRNZW1iZXJzLml0ZXJhdG9yO1xuICAgICAgICAgICAgd2hpbGUgKGl0Mi5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWVtYmVyMiA9IGl0Mi52YWx1ZTtcbiAgICAgICAgICAgICAgICBtZW1iZXIyLmNvbnRhaW5pbmdHcm91cCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcbiAgICAgICAgICAgICAgICBzZWxmLm1vdmVTaWJsaW5nTmV4dFRvKG1lbWJlcjIsIGdyb3VwLCBzZWxmLlJJR0hUKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xuICAgIH07XG5cblxuICAgIC8vIGZvciBkcmFnZ2luZyBwYXJ0cyB3aXRoaW4gYSBzeXN0ZW0gLSBzaWRlIGlzIExFRlQgb3IgUklHSFQgKGkuZS4gYWJvdmUgb3IgYmVsb3csIHJlc3AuIGluIGludmVudG9yeSBsYXlvdXQpXG4gICAgdGhpcy5hZGRTZWxlY3RlZFRoaW5nQXNPcmRlcmVkU2lzdGVyT2YgPSBmdW5jdGlvbihncm91cCwgc2lkZSkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdhZGRTZWxlY3RlZFRoaW5nQXNPcmRlcmVkU2lzdGVyT2YsIHNpZGU6ICcgKyBzaWRlKTtcbiAgICAgICAgdmFyIHRoaW5nID0gc2VsZi5nZXRVbmlxdWVUaGluZ1NlbGVjdGVkKCk7XG4gICAgICAgIGlmICghdGhpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLm1vdmVTaWJsaW5nTmV4dFRvKHRoaW5nLCBncm91cCwgc2lkZSk7XG4gICAgfTtcblxuICAgIC8vIG1vdmVzIHRoZSBmaXJzdCB0aGluZyAoc2libGluZykgdG8gYmUgYWZ0ZXIgdGhlIHNlY29uZCB0aGluZyAoZ3JvdXApXG4gICAgLy8gaW4gdGhlIHBhcnQgb3JkZXJpbmcgLSB0aGV5IGFyZSBhc3N1bWVkIHRvIGJlIHNpYmxpbmdzXG4gICAgLy8gc2lkZSBpcyBMRUZUIG9yIFJJR0hUXG4gICAgdGhpcy5tb3ZlU2libGluZ05leHRUbyA9IGZ1bmN0aW9uKHNpYmxpbmcsIGdyb3VwLCBzaWRlKSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSBncm91cC5jb250YWluaW5nR3JvdXA7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ21vdmVTaWJsaW5nTmV4dFRvLCBzaWJsaW5nOiAnICsgc2libGluZyArICcsIGdyb3VwOiAnICsgZ3JvdXAgKyAnLCBwYXJlbnQ6ICcgKyBwYXJlbnQgKyAnLCBzaWJsaW5nLmNvbnRhaW5pbmdHcm91cDogJyArIHNpYmxpbmcuY29udGFpbmluZ0dyb3VwKTtcblxuICAgICAgICBpZiAoIXBhcmVudCB8fCBzaWJsaW5nLmNvbnRhaW5pbmdHcm91cCAhPSBwYXJlbnQpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5lcnJvcignQ2Fubm90IGRvIG1vdmVTaWJsaW5nTmV4dFRvIG9uIG5vbi1zaWJsaW5ncyBvciB0b3AtbGV2ZWwgZ3JvdXBzJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjcmVhdGUgbmV3IG1lbWJlciBvcmRlclxuICAgICAgICB2YXIgbWVtYmVyT3JkZXIgPSBuZXcgZ28uTGlzdCgpO1xuICAgICAgICB2YXIgaXQgPSBwYXJlbnQubWVtYmVyUGFydHM7XG4gICAgICAgIHZhciBvcmRlciA9IDA7XG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBtZW1iZXIgPSBpdC52YWx1ZTtcbiAgICAgICAgICAgIGlmIChtZW1iZXIgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIGF0IHRoZSB0YXJnZXQgZ3JvdXAsIHNvIGFkZCB0aGUgbW92ZWQgdGhpbmcgZWl0aGVyIGJlZm9yZSBvciBhZnRlciBpdFxuICAgICAgICAgICAgICAgIGlmIChtZW1iZXIgPT0gZ3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpZGUgPT0gc2VsZi5MRUZUKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJPcmRlci5hZGQoc2libGluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2libGluZy5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChtZW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG1lbWJlci5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChtZW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG1lbWJlci5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChzaWJsaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzaWJsaW5nLmRhdGEsICdvcmRlcicsIG9yZGVyKyspO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGRvbid0IHJlLWFkZCB0aGUgbW92ZWQgdGhpbmcsIGl0IHdhcyBhZGRlZCBhYm92ZVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1lbWJlciAhPSBzaWJsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChtZW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobWVtYmVyLmRhdGEsICdvcmRlcicsIG9yZGVyKyspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNsZWFyIGV4aXN0aW5nIG1lbWJlcnNcbiAgICAgICAgdmFyIG5ld0l0ID0gbWVtYmVyT3JkZXIuaXRlcmF0b3I7XG4gICAgICAgIHdoaWxlIChuZXdJdC5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBtZW1iZXIyID0gbmV3SXQudmFsdWU7XG4gICAgICAgICAgICBtZW1iZXIyLmNvbnRhaW5pbmdHcm91cCA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgbmV3IG1lbWJlcnNcbiAgICAgICAgbmV3SXQucmVzZXQoKTtcbiAgICAgICAgd2hpbGUgKG5ld0l0Lm5leHQoKSkge1xuICAgICAgICAgICAgdmFyIG1lbWJlcjMgPSBuZXdJdC52YWx1ZTtcbiAgICAgICAgICAgIG1lbWJlcjMuY29udGFpbmluZ0dyb3VwID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuYWRkVGhpbmdBc1JUaGluZyA9IGZ1bmN0aW9uKHRoaW5nLCBsaW5rKSB7XG4gICAgICAgIHRoaW5nLmxhYmVsZWRMaW5rID0gbGluaztcbiAgICAgICAgdGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcbiAgICB9O1xuXG4gICAgLy8gRCBjb3JuZXIgaGFuZGxlciAoc2luZ2xlIGNsaWNrKVxuICAgIHRoaXMudG9nZ2xlREZsYWcgPSBmdW5jdGlvbih0aGluZykge1xuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcuZGF0YSwgJ2RmbGFnJywgIXRoaW5nLmRhdGEuZGZsYWcpO1xuICAgICAgICB0aGluZy51cGRhdGVUYXJnZXRCaW5kaW5ncygpO1xuICAgIH07XG5cbiAgICAvLyBTIGNvcm5lciBoYW5kbGVyIChzaW5nbGUgY2xpY2spXG4gICAgdGhpcy50b2dnbGVTRXhwYW5zaW9uID0gZnVuY3Rpb24odGhpbmcpIHtcbiAgICAgICAgdmFyIGlzRXhwYW5kZWQgPSAhKHRoaW5nLmRhdGEgJiYgIXRoaW5nLmRhdGEuc0V4cGFuZGVkKTsgLy8gZXhwYW5kIGJ5IGRlZmF1bHQgaWYgcHJvcGVydHkgbm90IHByZXNlbnRcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nLmRhdGEsICdzRXhwYW5kZWQnLCAhaXNFeHBhbmRlZCk7XG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XG4gICAgICAgIF91aS5zaG93Q29ybmVyVGlwKHRoaW5nLCAnUycpO1xuICAgIH07XG5cbiAgICAvLyBQIGNvcm5lciBoYW5kbGVyIChzaW5nbGUgY2xpY2spXG4gICAgdGhpcy50b2dnbGVQRXhwYW5zaW9uID0gZnVuY3Rpb24odGhpbmcpIHtcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nLmRhdGEsICdwRXhwYW5kZWQnLCAhc2VsZi5wSXNFeHBhbmRlZCh0aGluZykpO1xuICAgICAgICB0aGluZy51cGRhdGVUYXJnZXRCaW5kaW5ncygpO1xuICAgICAgICBfdWkuc2hvd0Nvcm5lclRpcCh0aGluZywgXCJQXCIpO1xuICAgIH07XG5cbiAgICB0aGlzLnBJc0V4cGFuZGVkID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgcmV0dXJuIGdyb3VwLmRhdGEgJiYgZ3JvdXAuZGF0YS5wRXhwYW5kZWQgPT09IHRydWU7XG4gICAgfTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gdW5kby9yZWRvIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICB0aGlzLmNhblVuZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLmNhblVuZG8oKTtcbiAgICB9O1xuXG4gICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIF9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLnVuZG8oKTtcbiAgICAgICAgX2RpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jYW5SZWRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfZGlhZ3JhbS5jb21tYW5kSGFuZGxlci5jYW5SZWRvKCk7XG4gICAgfTtcblxuICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBfZGlhZ3JhbS5jb21tYW5kSGFuZGxlci5yZWRvKCk7XG4gICAgICAgIF9kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XG4gICAgfTtcblxuICAgIHRoaXMucmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xuICAgICAgICBfZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tIHV0aWxpdHkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgLy8gY2hlY2sgZm9yIGEgcmVjdCB3aXRoIE5hTiBYL1kvVy9IIGNvb3Jkcywgc28gd2UgY2FuIGRvIHN0dWZmIHdpdGggaXQgc3VjaCBhcyB1bmlvblJlY3RcbiAgICAvLyAoTmFOLE5hTiwwLDApID0+ICgwLDAsMCwwKVxuICAgIHRoaXMuc2FmZVJlY3QgPSBmdW5jdGlvbihyZWN0KSB7XG4gICAgICAgIGlmIChpc05hTihyZWN0LngpKSB7XG4gICAgICAgICAgICByZWN0LnggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05hTihyZWN0LnkpKSB7XG4gICAgICAgICAgICByZWN0LnkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05hTihyZWN0LndpZHRoKSkge1xuICAgICAgICAgICAgcmVjdC53aWR0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTmFOKHJlY3QuaGVpZ2h0KSkge1xuICAgICAgICAgICAgcmVjdC5oZWlnaHQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWN0O1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tIGRlYnVnIG1hcCBtb2RlbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICB0aGlzLmxvYWRNb2RlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcjbWFwLW1vZGVsLWRlYnVnJykudmFsKF9kaWFncmFtLm1vZGVsLnRvSnNvbigpKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zYXZlTW9kZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbigkKCcjbWFwLW1vZGVsLWRlYnVnJykudmFsKCkpO1xuICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGRDaGFuZ2VkTGlzdGVuZXIoX2F1dG9zYXZlLm1vZGVsQ2hhbmdlZCk7XG4gICAgICAgIF9hdXRvc2F2ZS5zYXZlT25Nb2RlbENoYW5nZWQgPSB0cnVlO1xuICAgIH07XG59OyIsIi8vIGZ1bmN0aW9ucyBmb3IgZWRpdGluZyBwZXJzcGVjdGl2ZXMgQU5EIGRpc3RpbmN0aW9ucywgd2hpY2ggd29yayBzaW1pbGFybHkgaW4gdGhlIFVJXG5cblNhbmRiYW5rRWRpdG9yLlBlcnNwZWN0aXZlcyA9IGZ1bmN0aW9uKCRzY29wZSwgbWFwKSB7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyB0ZW1wb3Jhcnkgc3RhdGUgZmxhZyBmb3IgYWRkaW5nL3JlbW92aW5nIFAvRCBzZWxlY3Rpb25zIHByb2dyYW1tYXRpY2FsbHlcbiAgICB2YXIgc2VsZWN0aW5nTGlua2VkVGhpbmdzID0gZmFsc2U7XG5cbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnUGVyc3BlY3RpdmVzLCBjdXJyZW50VGFiQ2hhbmdlZCcpO1xuICAgICAgICBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX1BFUlNQRUNUSVZFUykgeyAvLyBvcGVuaW5nIHBlcnNwZWN0aXZlc1xuICAgICAgICAgICAgc2V0UG9yRFRoaW5nKCdQJyk7XG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAob2xkVmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX1BFUlNQRUNUSVZFUykgeyAvLyBjbG9zaW5nIHBlcnNwZWN0aXZlc1xuICAgICAgICAgICAgc2F2ZUxpbmtzKCdQJyk7XG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQoZmFsc2UpO1xuICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9ESVNUSU5DVElPTlMpIHsgLy8gb3BlbmluZyBkaXN0aW5jdGlvbnNcbiAgICAgICAgICAgIHNldFBvckRUaGluZygnRCcpO1xuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKG9sZFZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9ESVNUSU5DVElPTlMpIHsgLy8gY2xvc2luZyBkaXN0aW5jdGlvbnNcbiAgICAgICAgICAgIHNhdmVMaW5rcygnRCcpO1xuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZSkge1xuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xuICAgICAgICAgICAgaWYgKG1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfUEVSU1BFQ1RJVkVTKSB8fCBtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX0RJU1RJTkNUSU9OUykpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVMaW5rcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIC0tLS0tLS0tLS0gUC9EIEVkaXRvciBzdGF0ZVxuXG4gICAgdGhpcy5pc0luUE9yREVkaXRvck1vZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgIT09IG51bGwgfHwgbWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSAhPT0gbnVsbDtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0luUEVkaXRvck1vZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgIT09IG51bGw7XG4gICAgfTtcblxuICAgIHRoaXMuaXNJbkRFZGl0b3JNb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5ICE9PSBudWxsO1xuICAgIH07XG5cbiAgICB0aGlzLmlzUEVkaXRvclBvaW50ID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgPT0gZ3JvdXAuZGF0YS5rZXk7XG4gICAgfTtcblxuICAgIHRoaXMuaXNERWRpdG9yVGhpbmcgPSBmdW5jdGlvbihncm91cCkge1xuICAgICAgICByZXR1cm4gbWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSA9PSBncm91cC5kYXRhLmtleTtcbiAgICB9O1xuXG4gICAgLy8gTkI6IHRoaXMgaXMgY2FsbGVkIHZpYSBtYXAuZ2V0Q29ybmVyRnVuY3Rpb24sIHNvIHdlIGdldCB0aGUgZXh0cmEgY29ybmVyIGFyZywgd2hpY2ggd2UgY2FuIGlnbm9yZVxuICAgIHRoaXMuc2V0UEVkaXRvclBvaW50ID0gZnVuY3Rpb24odGhpbmcsIGNvcm5lcikge1xuICAgICAgICBpZiAoJHNjb3BlLmNhbkVkaXQpIHtcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLm9wZW5UYWIobWFwLmdldFVpKCkuVEFCX0lEX1BFUlNQRUNUSVZFUyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5zZXRERWRpdG9yVGhpbmcgPSBmdW5jdGlvbih0aGluZykge1xuICAgICAgICBpZiAoJHNjb3BlLmNhbkVkaXQpIHtcbiAgICAgICAgICAgIC8vIE5COiBuZWVkIHRvIHNlbGVjdCBvbmx5IHRoaXMgdGhpbmcsIHNpbmNlIHRoaXMgaXMgaW52b2tlZFxuICAgICAgICAgICAgLy8gYnkgYSBjb250cm9sLWNsaWNrLCB3aGljaCB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHNlbGVjdCBqdXN0IGl0XG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGluZy5pc1NlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLm9wZW5UYWIobWFwLmdldFVpKCkuVEFCX0lEX0RJU1RJTkNUSU9OUyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIHRoaXMuaXNQZXJzcGVjdGl2ZVBvaW50ID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgdmFyIGxpbmtzID0gZ3JvdXAuZmluZExpbmtzT3V0T2YoKTtcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICB0aGlzLmlzU2VsZWN0ZWRQZXJzcGVjdGl2ZVZpZXcgPSBmdW5jdGlvbihncm91cCkge1xuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NJbnRvKCk7XG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJyAmJiBtYXAucElzRXhwYW5kZWQobGluay5mcm9tTm9kZSkgJiYgbGluay5mcm9tTm9kZS5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICB0aGlzLmlzVG9nZ2xlZFBlcnNwZWN0aXZlVmlldyA9IGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgIHZhciBsaW5rcyA9IGdyb3VwLmZpbmRMaW5rc0ludG8oKTtcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnICYmIG1hcC5wSXNFeHBhbmRlZChsaW5rLmZyb21Ob2RlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc01vdXNlT3ZlclBlcnNwZWN0aXZlVmlldyA9IGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgIHZhciBsaW5rcyA9IGdyb3VwLmZpbmRMaW5rc0ludG8oKTtcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnICYmIGxpbmsuZnJvbU5vZGUgPT0gbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0UGVyc3BlY3RpdmVWaWV3V2VpZ2h0ID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgdmFyIG1vZGUgPSBtYXAuZ2V0VWkoKS5nZXRNYXBFZGl0b3JPcHRpb25zKCkucGVyc3BlY3RpdmVNb2RlO1xuICAgICAgICBpZiAobW9kZSA9PSAnc3BvdGxpZ2h0JyB8fCBtb2RlID09ICdib3RoJykge1xuICAgICAgICAgICAgcmV0dXJuIChzZWxmLmlzU2VsZWN0ZWRQZXJzcGVjdGl2ZVZpZXcoZ3JvdXApID8gMSA6IDApICtcbiAgICAgICAgICAgICAgICAoc2VsZi5pc1RvZ2dsZWRQZXJzcGVjdGl2ZVZpZXcoZ3JvdXApID8gMSA6IDApICtcbiAgICAgICAgICAgICAgICAoc2VsZi5pc01vdXNlT3ZlclBlcnNwZWN0aXZlVmlldyhncm91cCkgPyAxIDogMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgLy8gY2F0ZWdvcnkgaXMgXCJQXCIgb3IgXCJEXCIgKHBlcnNwZWN0aXZlcyBvciBkaXN0aW5jdGlvbnMpXG4gICAgZnVuY3Rpb24gc2V0UG9yRFRoaW5nKGNhdGVnb3J5KSB7XG4gICAgICAgIC8vIGlmIGFscmVhZHkgc2V0LCBtdXN0IGRvIHNhdmUgcGVyc3BlY3RpdmVzIG9yIHNhdmUgZGlzdGluY3Rpb25zXG4gICAgICAgIGlmIChtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5IHx8IG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdmFyIHRoaW5nID0gbWFwLmdldERpYWdyYW0oKS5zZWxlY3Rpb24uZmlyc3QoKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2V0UG9yRFRoaW5nOiAnICsgdGhpbmcpO1xuICAgICAgICBpZiAodGhpbmcgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IHRoaW5nLmRhdGEua2V5O1xuICAgICAgICAgICAgaWYgKGNhdGVnb3J5ID09IFwiUFwiKSB7XG4gICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSA9IGtleTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2F0ZWdvcnkgPT0gXCJEXCIpIHtcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5ID0ga2V5O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBzZWxlY3Qgdmlld3Mvb3RoZXJzXG4gICAgICAgICAgICBzZWxlY3RMaW5rZWRUaGluZ3NGb3IodGhpbmcsIGNhdGVnb3J5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIHNlbGVjdGlvbiBjaGFuZ2VzIC0gaWYgdGhlIHRoaW5nIGlzIHNldCxcbiAgICAvLyBhZGRzL3JlbW92ZXMgRC9QIGxpbmtzIGFjY29yZGluZyB0byB3aGF0IGlzIHNlbGVjdGVkOyBvdGhlcndpc2VcbiAgICAvLyBqdXN0IHNob3dzL2hpZGVzIEQvUCBsaW5rcyBmb3IgdGhlIHNlbGVjdGVkIHRoaW5nKHMpXG4gICAgZnVuY3Rpb24gdXBkYXRlTGlua3MoKSB7XG4gICAgICAgIGlmIChzZWxlY3RpbmdMaW5rZWRUaGluZ3MpIC8vIHNlbGVjdGlvbiBpcyBiZWluZyBjaGFuZ2VkIHByb2dyYW1tYXRpY2FsbHksIHNvIGRvbid0IHJlc3BvbmRcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB2YXIgcE9yRFRoaW5nID0gbnVsbDtcbiAgICAgICAgdmFyIGNhdGVnb3J5ID0gbnVsbDtcbiAgICAgICAgaWYgKG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkpIHtcbiAgICAgICAgICAgIHBPckRUaGluZyA9IG1hcC5nZXREaWFncmFtKCkuZmluZE5vZGVGb3JLZXkobWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSk7XG4gICAgICAgICAgICBjYXRlZ29yeSA9IFwiUFwiO1xuICAgICAgICB9IGVsc2UgaWYgKG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkpIHtcbiAgICAgICAgICAgIHBPckRUaGluZyA9IG1hcC5nZXREaWFncmFtKCkuZmluZE5vZGVGb3JLZXkobWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSk7XG4gICAgICAgICAgICBjYXRlZ29yeSA9IFwiRFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFkZExpbmtzVG8gPSBuZXcgZ28uTGlzdCgpO1xuICAgICAgICB2YXIgcmVtb3ZlTGlua3MgPSBuZXcgZ28uTGlzdCgpO1xuXG4gICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBhbGwgdGhpbmdzXG4gICAgICAgIGlmIChjYXRlZ29yeSkge1xuICAgICAgICAgICAgdmFyIGxheWVycyA9IG1hcC5nZXREaWFncmFtKCkubGF5ZXJzO1xuICAgICAgICAgICAgd2hpbGUgKGxheWVycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllcnMudmFsdWU7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gbGF5ZXIucGFydHM7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHBhcnRzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgbGlua3MgdG8gYWRkL3JlbW92ZSBiYXNlZCBvbiBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwT3JEVGhpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlua3MgPSBwYXJ0LmZpbmRMaW5rc0ludG8oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdMaW5rID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rLmZyb21Ob2RlLmRhdGEua2V5ID09IHBPckRUaGluZy5kYXRhLmtleSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gY2F0ZWdvcnkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0xpbmsgPSBsaW5rO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlY2lkZSB3aGV0aGVyIHRvIGFkZCBvciByZW1vdmUgYSBsaW5rIHRvIHRoZSBwYXJ0LCBkZXBlbmRpbmcgb24gd2hldGhlciBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCBpcyBzZWxlY3RlZCBhbmQgd2hldGhlciBhIGxpbmsgZXhpc3RzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZ0xpbmsgJiYgcGFydC5pc1NlbGVjdGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRMaW5rc1RvLmFkZChwYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChleGlzdGluZ0xpbmsgJiYgIXBhcnQuaXNTZWxlY3RlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTGlua3MuYWRkKGV4aXN0aW5nTGluayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkbyB0aGUgYWRkaW5nL3JlbW92aW5nIG9mIGxpbmtzXG4gICAgICAgIHZhciBhZGRzID0gYWRkTGlua3NUby5pdGVyYXRvcjtcbiAgICAgICAgd2hpbGUgKGFkZHMubmV4dCgpKSB7XG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XG4gICAgICAgICAgICB2YXIgdG8gPSBhZGRzLnZhbHVlO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndXBkYXRlTGlua3M6IGFkZGluZyBsaW5rIGZyb20gJyArIHBPckRUaGluZyArICcgdG8gJyArIHRvKTtcbiAgICAgICAgICAgIGlmIChjYXRlZ29yeSA9PSBcIkRcIiAmJiBwT3JEVGhpbmcuZGF0YS5rZXkgPT0gdG8uZGF0YS5rZXkpIHtcbiAgICAgICAgICAgICAgICBwT3JEVGhpbmcuaXNTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiWW91IGNhbid0IGRpc3Rpbmd1aXNoIGEgdGhpbmcgZnJvbSBpdHNlbGYhXCIpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5hZGRMaW5rRGF0YSh7XG4gICAgICAgICAgICAgICAgZnJvbTogcE9yRFRoaW5nLmRhdGEua2V5LFxuICAgICAgICAgICAgICAgIHRvOiB0by5kYXRhLmtleSxcbiAgICAgICAgICAgICAgICBmcm9tUG9ydDogY2F0ZWdvcnksXG4gICAgICAgICAgICAgICAgdG9Qb3J0OiBjYXRlZ29yeSxcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbignYWRkIGxpbmsnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVtb3ZlcyA9IHJlbW92ZUxpbmtzLml0ZXJhdG9yO1xuICAgICAgICB3aGlsZSAocmVtb3Zlcy5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciByZW1vdmUgPSByZW1vdmVzLnZhbHVlO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndXBkYXRlTGlua3M6IHJlbW92aW5nIGxpbmsgZnJvbSAnICsgcmVtb3ZlLmZyb21Ob2RlICsgJyB0byAnICsgcmVtb3ZlLnRvTm9kZSk7XG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ3JlbW92ZSBsaW5rJyk7XG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnJlbW92ZShyZW1vdmUpO1xuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5yZW1vdmVMaW5rRGF0YShyZW1vdmUuZGF0YSk7XG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdyZW1vdmUgbGluaycpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2hvdyBsaW5rc1xuICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2F2ZUxpbmtzKGNhdGVnb3J5KSB7XG4gICAgICAgIHZhciBwT3JEVGhpbmcgPSBudWxsO1xuICAgICAgICBpZiAoY2F0ZWdvcnkgPT0gXCJQXCIpIHtcbiAgICAgICAgICAgIHBPckRUaGluZyA9IG1hcC5nZXREaWFncmFtKCkuZmluZE5vZGVGb3JLZXkobWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSk7XG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5ID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChjYXRlZ29yeSA9PSBcIkRcIikge1xuICAgICAgICAgICAgcE9yRFRoaW5nID0gbWFwLmdldERpYWdyYW0oKS5maW5kTm9kZUZvcktleShtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5KTtcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgbWFwLmdldERpYWdyYW0oKS5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VsZWN0TGlua2VkVGhpbmdzRm9yKGdyb3VwLCBjYXRlZ29yeSkge1xuICAgICAgICBzZWxlY3RpbmdMaW5rZWRUaGluZ3MgPSB0cnVlO1xuICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmNsZWFyU2VsZWN0aW9uKCk7XG5cbiAgICAgICAgdmFyIGxpbmtzID0gZ3JvdXAuZmluZExpbmtzT3V0T2YoKTtcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gY2F0ZWdvcnkpXG4gICAgICAgICAgICAgICAgbGluay50b05vZGUuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3RpbmdMaW5rZWRUaGluZ3MgPSBmYWxzZTtcbiAgICB9XG59OyIsIi8vIGZ1bmN0aW9ucyBmb3IgdGhlIHByZXNlbnRlci9zbGlkZXNcblxuU2FuZGJhbmtFZGl0b3IuUHJlc2VudGVyID0gZnVuY3Rpb24gKCRzY29wZSwgbWFwKSB7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBjb25zdGFudHNcbiAgICB0aGlzLlNMSURFX0JMT0NLRVJfV0lEVEggPSAxMDAwO1xuICAgIHRoaXMuU0xJREVfQkxPQ0tFUl9DT0xPUiA9IFwiI2ZmZlwiO1xuICAgIHRoaXMuU0xJREVfQkxPQ0tFUl9PUEFDSVRZID0gMC45O1xuXG4gICAgLy8gc3RhdGUgdmFyc1xuICAgIHRoaXMuY3VycmVudFNsaWRlSW5kZXggPSBudWxsO1xuICAgIHRoaXMuaXNQcmVzZW50aW5nID0gZmFsc2U7XG4gICAgdGhpcy5zaG93VE9DID0gZmFsc2U7XG4gICAgdGhpcy5pc0NyZWF0aW5nVGh1bWJuYWlsID0gZmFsc2U7XG5cbiAgICAvLyBtYXNrIGFwcGxpZWQgYXJvdW5kIHNsaWRlIHJlZ2lvbiB3aGVuIHByZXNlbnRpbmdcbiAgICB0aGlzLnNsaWRlQmxvY2tlciA9IG51bGw7XG5cbiAgICB0aGlzLmRpYWdyYW1Bc3BlY3RSYXRpbyA9IG51bGw7XG5cbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgfTtcblxuICAgIHRoaXMuYXV0b3NhdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgbWFwLmdldEF1dG9zYXZlKCkuc2F2ZSgnZWRpdF9wcmVzZW50ZXInKTsgXG4gICAgfTtcblxuICAgIC8vIC0tLS0tLS0tLS0gZWRpdGluZyBmdW5jdGlvbnMgZm9yIGRpZmZlcmVudCBzbGlkZSB0eXBlcyAtLS0tLS0tLS0tLS0tXG5cbiAgICAvLyBOQjogaGFzTGlua3MgY2FuIGhhdmUgdmFsdWVzIGZhbHNlLCAxLCBvciB0cnVlICgxIG1lYW5zIG9ubHkgYSBzaW5nbGUgbGluaylcbiAgICB0aGlzLnNsaWRlVHlwZXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdUSVRMRV9CT0RZJywgbGFiZWw6ICdUaXRsZSBhbmQgQm9keScsXG4gICAgICAgICAgICBoYXNUaXRsZTogdHJ1ZSwgIGhhc05vdGVzOiB0cnVlLCAgaGFzQ2hlY2tzOiBmYWxzZSwgaGFzTWFwUmVnaW9uOiBmYWxzZSwgaGFzTWFwU3VtbWFyeTogZmFsc2UsIGhhc0xpbmtzOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICB7IFxuICAgICAgICAgICAgbmFtZTogJ1RJVExFX0JPRFlfTUFQJywgbGFiZWw6ICdUaXRsZSwgQm9keSBhbmQgTWV0YU1hcCcsXG4gICAgICAgICAgICBoYXNUaXRsZTogdHJ1ZSwgIGhhc05vdGVzOiB0cnVlLCAgaGFzQ2hlY2tzOiBmYWxzZSwgaGFzTWFwUmVnaW9uOiB0cnVlLCAgaGFzTWFwU3VtbWFyeTogZmFsc2UsIGhhc0xpbmtzOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICB7IFxuICAgICAgICAgICAgbmFtZTogJ0FDVElWSVRZX01BUCcsIGxhYmVsOiAnTGVzc29uIEFjdGl2aXR5IGFuZCBNZXRhTWFwJyxcbiAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCAgaGFzTm90ZXM6IHRydWUsICBoYXNDaGVja3M6IHRydWUsICBoYXNNYXBSZWdpb246IHRydWUsICBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgeyBcbiAgICAgICAgICAgIG5hbWU6ICdNQVBfT05MWScsIGxhYmVsOiAnTWV0YU1hcCBvbmx5JyxcbiAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCAgaGFzTm90ZXM6IGZhbHNlLCBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IHRydWUsICBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHsgXG4gICAgICAgICAgICBuYW1lOiAnTUFQX1NVTU1BUlknLCBsYWJlbDogJ01ldGFNYXAgU3VtbWFyeScsXG4gICAgICAgICAgICBoYXNUaXRsZTogZmFsc2UsIGhhc05vdGVzOiBmYWxzZSwgaGFzQ2hlY2tzOiBmYWxzZSwgaGFzTWFwUmVnaW9uOiB0cnVlLCBoYXNNYXBTdW1tYXJ5OiB0cnVlLCBoYXNMaW5rczogZmFsc2VcbiAgICAgICAgfVxuICAgIF07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0gbGluay9hdHRhY2htZW50IHR5cGVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICB0aGlzLmxpbmtUeXBlcyA9IFtcbiAgICAgICAgeyBuYW1lOiAnJywgbGFiZWw6ICctLSBTZWxlY3QgYXR0YWNobWVudCB0eXBlIC0tJyB9LFxuICAgICAgICB7IG5hbWU6ICdXRUInLCBsYWJlbDogJ1dlYiBQYWdlJyB9LFxuICAgICAgICB7IG5hbWU6ICdQREYnLCBsYWJlbDogJ1BERicgfSxcbiAgICAgICAgeyBuYW1lOiAnRE9DJywgbGFiZWw6ICdEb2N1bWVudCcgfSxcbiAgICAgICAgeyBuYW1lOiAnU1BSRUFEU0hFRVQnLCBsYWJlbDogJ1NwcmVhZHNoZWV0JyB9LFxuICAgICAgICB7IG5hbWU6ICdQUkVTRU5UQVRJT04nLCBsYWJlbDogJ1ByZXNlbnRhdGlvbicgfSxcbiAgICAgICAgeyBuYW1lOiAnTUVUQU1BUCcsIGxhYmVsOiAnTWV0YU1hcCcgfSxcbiAgICAgICAgeyBuYW1lOiAnSU1BR0UnLCBsYWJlbDogJ0ltYWdlJyB9LFxuICAgICAgICB7IG5hbWU6ICdBVURJTycsIGxhYmVsOiAnQXVkaW8nIH0sXG4gICAgICAgIHsgbmFtZTogJ1ZJREVPJywgbGFiZWw6ICdWaWRlbycgfSxcbiAgICAgICAgeyBuYW1lOiAnU1VSVkVZJywgbGFiZWw6ICdTdXJ2ZXknIH0sXG4gICAgICAgIHsgbmFtZTogJ1dPUktTSEVFVCcsIGxhYmVsOiAnV29ya3NoZWV0JyB9XG4gICAgXTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLSBsaXN0IG9mIGFsbCB0aGluZ3MgaW4gdGhlIG1hcCwgZm9yIG1hcCBzdW1tYXJ5IHNsaWRlcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIHRoaXMuaWRlYUxpc3QgPSAnJztcblxuICAgIC8vIG9ubHkgY2FsbCB0aGlzIG9jY2FzaW9uYWxseSwgYXMgdGhleSB3b24ndCBiZSBlZGl0aW5nIHRoZSBtYXAgd2hpbGUgcHJlc2VudGVyIGlzIG9wZW5cbiAgICBmdW5jdGlvbiB1cGRhdGVJZGVhTGlzdCgpIHtcbiAgICAgICAgdmFyIG5vZGVzID0gbWFwLmdldERpYWdyYW0oKS5ub2RlcztcbiAgICAgICAgdmFyIGxpc3QgPSBbXTtcbiAgICAgICAgd2hpbGUgKG5vZGVzLm5leHQoKSkge1xuICAgICAgICAgICAgaWYgKChub2Rlcy52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSkge1xuICAgICAgICAgICAgICAgIGxpc3QucHVzaChub2Rlcy52YWx1ZS5kYXRhLnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxpc3Quc29ydCgpO1xuXG4gICAgICAgIC8vIGZpbHRlciBvdXQgcGxhY2Vob2xkZXIgbmFtZXMgLSBzZWUgbWFwLmpzOmdldE5ld1RoaW5nRGF0YSwgY3JlYXRlU2lzdGVyLCBldGMuXG4gICAgICAgIGxpc3QgPSBfLmRpZmZlcmVuY2UoXy51bmlxKGxpc3QsIHRydWUpLCBcbiAgICAgICAgICAgIG1hcC5nZXRHZW5lcmF0b3IoKS5nZXRQbGFjZWhvbGRlcklkZWFOYW1lcygpLCBcbiAgICAgICAgICAgIFsnTmV3IElkZWEnLCAnTmV3IERpc3Rpbmd1aXNoZWQgSWRlYScsICdOZXcgUmVsYXRlZCBJZGVhJywgJ05ldyBSZWxhdGlvbnNoaXAgSWRlYScsICdOZXcgUGFydCBJZGVhJyxcbiAgICAgICAgICAgICAnSWRlYScsICdQYXJ0JywgJ1JlbGF0aW9uc2hpcCBJZGVhJ10gLy8gbmV3ZXIgc2ltcGxpZmllZCBuYW1lc1xuICAgICAgICApO1xuXG4gICAgICAgIHNlbGYuaWRlYUxpc3QgPSBsaXN0LmpvaW4oJywgJyk7XG4gICAgfVxuXG4gICAgdGhpcy5zdW1tYXJ5QW5hbHl0aWNzID0gW1xuICAgICAgICB7IG5hbWU6ICdDT1VOVF9USElOR1MnLCBzaW5ndWxhckxhYmVsOiAnRGlzdGluY3Rpb24nLCBwbHVyYWxMYWJlbDogJ0Rpc3RpbmN0aW9ucycgfSxcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfU1lTVEVNUycsIHNpbmd1bGFyTGFiZWw6ICdTeXN0ZW0nLCBwbHVyYWxMYWJlbDogJ1N5c3RlbXMnIH0sXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1JFTEFUSU9OU0hJUFMnLCBzaW5ndWxhckxhYmVsOiAnUmVsYXRpb25zaGlwJywgcGx1cmFsTGFiZWw6ICdSZWxhdGlvbnNoaXBzJyB9LFxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9QRVJTUEVDVElWRVMnLCBzaW5ndWxhckxhYmVsOiAnUGVyc3BlY3RpdmUnLCBwbHVyYWxMYWJlbDogJ1BlcnNwZWN0aXZlcycgfSxcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfUlRISU5HUycsIHNpbmd1bGFyTGFiZWw6ICdSZWxhdGlvbnNoaXAgSWRlYScsIHBsdXJhbExhYmVsOiAnUmVsYXRpb25zaGlwIElkZWFzJyB9LFxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9TWVNURU1fUlRISU5HUycsIHNpbmd1bGFyTGFiZWw6ICdSZWxhdGlvbnNoaXAgU3lzdGVtJywgcGx1cmFsTGFiZWw6ICdSZWxhdGlvbnNoaXAgU3lzdGVtcycgfSxcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfU1lTVEVNX1BFUlNQRUNUSVZFUycsIHNpbmd1bGFyTGFiZWw6ICdQZXJzcGVjdGl2ZSBTeXN0ZW0nLCBwbHVyYWxMYWJlbDogJ1BlcnNwZWN0aXZlIFN5c3RlbXMnIH0sXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX0RJU1RJTkNUSU9OUycsIHNpbmd1bGFyTGFiZWw6ICdBZHZhbmNlZCBEaXN0aW5jdGlvbicsIHBsdXJhbExhYmVsOiAnQWR2YW5jZWQgRGlzdGluY3Rpb25zJyB9LFxuICAgIF07XG5cbiAgICB0aGlzLmFkZENoZWNrID0gZnVuY3Rpb24obm9kZURhdGEpIHtcbiAgICAgICAgIG5vZGVEYXRhLmNoZWNrcy5wdXNoKHsgdGV4dDogJycgfSk7XG4gICAgICAgICBzZWxmLmF1dG9zYXZlKCk7XG4gICAgfTtcblxuICAgIHRoaXMuZGVsZXRlQ2hlY2sgPSBmdW5jdGlvbiAoY2hlY2ssIG5vZGVEYXRhKSB7XG4gICAgICAgIHZhciBpID0gXy5pbmRleE9mKG5vZGVEYXRhLmNoZWNrcywgY2hlY2spO1xuICAgICAgICBub2RlRGF0YS5jaGVja3Muc3BsaWNlKGksIDEpO1xuICAgICAgICBzZWxmLmF1dG9zYXZlKCk7XG4gICAgfTtcblxuICAgIHRoaXMuYWRkTGluayA9IGZ1bmN0aW9uKG5vZGVEYXRhKSB7XG4gICAgICAgIG5vZGVEYXRhLmxpbmtzLnB1c2goeyB0aXRsZTogJycsIHVybDogJycsIHR5cGU6ICcnIH0pO1xuICAgICAgICBzZWxmLmF1dG9zYXZlKCk7XG4gICAgfTtcblxuICAgIHRoaXMuZGVsZXRlTGluayA9IGZ1bmN0aW9uIChsaW5rLCBub2RlRGF0YSkge1xuICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZihub2RlRGF0YS5saW5rcywgbGluayk7XG4gICAgICAgIG5vZGVEYXRhLmxpbmtzLnNwbGljZShpLCAxKTtcbiAgICAgICAgc2VsZi5hdXRvc2F2ZSgpO1xuICAgIH07XG5cbiAgICB0aGlzLnRvZ2dsZVRPQyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuaXNQcmVzZW50aW5nKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zaG93VE9DID0gIXNlbGYuc2hvd1RPQztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIE5COiBjYW4ndCBjcmVhdGUgdGhpcyBpbiBpbml0IGFzIHRoZSBkaWFncmFtIGRvZXNuJ3QgZXhpc3QgeWV0Li4uXG4gICAgZnVuY3Rpb24gbWF5YmVJbml0U2xpZGVCbG9ja2VyKCkge1xuICAgICAgICBpZiAoIXNlbGYuc2xpZGVCbG9ja2VyKSB7XG4gICAgICAgICAgICB2YXIgbWsgPSBnby5HcmFwaE9iamVjdC5tYWtlO1xuICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIgPSBtayhnby5Ob2RlLCBnby5QYW5lbC5BdXRvLFxuICAgICAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgICAgIGxheWVyTmFtZTogJ1Rvb2wnLFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBzZWxmLlNMSURFX0JMT0NLRVJfT1BBQ0lUWVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiUmVjdGFuZ2xlXCIsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IHNlbGYuU0xJREVfQkxPQ0tFUl9DT0xPUixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOjEwMDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmFkZChzZWxmLnNsaWRlQmxvY2tlcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjYWxsZWQgd2hlbiBhIHRhYiBpcyBvcGVuZWQgb3IgY2xvc2VkXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBpZiAob2xkVmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUikgeyAvLyBjbG9zaW5nIHRhYlxuICAgICAgICAgICAgc2VsZi5zdG9wUHJlc2VudGluZygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5ld1ZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9QUkVTRU5URVIpIHsgLy8gb3BlbmluZyB0YWJcbiAgICAgICAgICAgIC8vIHNob3cgc2xpZGVzIChzZWUgbGF5b3V0cy5zbGlkZVRlbXBsYXRlLCBiaW5kaW5nIG9mIHZpc2libGUgYXR0cilcbiAgICAgICAgICAgIHNlbGYuZGlhZ3JhbUFzcGVjdFJhdGlvID0gJCgnI2RpYWdyYW0nKS53aWR0aCgpIC8gJCgnI2RpYWdyYW0nKS5oZWlnaHQoKTsgICAgICAgIFxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZGlhZ3JhbUFzcGVjdFJhdGlvOiAnICsgc2VsZi5kaWFncmFtQXNwZWN0UmF0aW8pO1xuXG4gICAgICAgICAgICAkc2NvcGUubWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xuICAgICAgICAgICAgdXBkYXRlSWRlYUxpc3QoKTtcbiAgICAgICAgICAgIGlmICghc2VsZi5jdXJyZW50U2xpZGVJbmRleCAmJiBzZWxmLmdldFNsaWRlTm9kZURhdGFzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZi5zbGlkZVRodW1ibmFpbFNlbGVjdGVkKDEpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaGFuZGxlRGlhZ3JhbUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZSkge1xuICAgICAgICBpZiAoIW1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PSAnU2VsZWN0aW9uRGVsZXRpbmcnKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gZS5zdWJqZWN0O1xuICAgICAgICAgICAgaWYgKHNlbGVjdGlvbi5jb3VudCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nID0gc2VsZWN0aW9uLmZpcnN0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaW5nIGluc3RhbmNlb2YgZ28uTm9kZSAmJiB0aGluZy5kYXRhLmNhdGVnb3J5ID09ICdzbGlkZScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maXJtKFwiRGVsZXRlIHRoaXMgc2xpZGUgZnJvbSB0aGUgcHJlc2VudGF0aW9uP1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnU2VsZWN0aW9uRGVsZXRlZCcpIHtcbiAgICAgICAgICAgIC8vIGlmIHNsaWRlIGlzIGRlbGV0ZWQgZnJvbSBjYW52YXMgcmF0aGVyIHRoYW4gYnkgdGh1bWJuYWlsIHggYnV0dG9uLCBuZWVkIHRvIHVwZGF0ZSBpbmRleGVzXG4gICAgICAgICAgICBjb21wYWN0U2xpZGVJbmRleGVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25Nb3ZlZCcgfHwgZXZlbnROYW1lID09ICdQYXJ0UmVzaXplZCcpIHtcbiAgICAgICAgICAgIC8vIGNsZWFyIHRodW1ibmFpbCBjYWNoZVxuICAgICAgICAgICAgdGh1bWJuYWlsQ2FjaGUgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1ZpZXdwb3J0Qm91bmRzQ2hhbmdlZCcpIHtcbiAgICAgICAgICAgIC8vIGFkanVzdCB6b29taW5nIG9mIG1hcCByZWdpb25cbiAgICAgICAgICAgIC8vc2VsZi53aW5kb3dSZXNpemVkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy53aW5kb3dSZXNpemVkID0gXy5kZWJvdW5jZShmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5zbGlkZVRodW1ibmFpbFNlbGVjdGVkKHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xuICAgIH0sIDEwMDApO1xuXG4gICAgdGhpcy5zaG93U2lkZWJhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9QUkVTRU5URVIpICYmICghc2VsZi5pc1ByZXNlbnRpbmcgfHwgc2VsZi5zaG93VE9DKTtcbiAgICB9O1xuXG4gICAgdGhpcy5kaXNhYmxlTWFwVG9vbGJhckJ1dHRvbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICFtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUikgXG4gICAgICAgICAgICB8fCBzZWxmLmlzUHJlc2VudGluZyBcbiAgICAgICAgICAgIHx8ICFzZWxmLmdldEN1cnJlbnRTbGlkZVR5cGUoKS5oYXNNYXBSZWdpb247XG4gICAgfVxuXG4gICAgLy8gcmV0dXJucyBhbiBhcnJheSBvZiBub2RlIGRhdGEgb2JqZWN0cyAobm90IHRoZSBzbGlkZSBub2RlcyB0aGVtc2VsdmVzKVxuICAgIHRoaXMuZ2V0U2xpZGVOb2RlRGF0YXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcbiAgICAgICAgdmFyIG5vZGVzID0gZGlhZ3JhbS5tb2RlbC5ub2RlRGF0YUFycmF5O1xuICAgICAgICB2YXIgbm9kZURhdGFzID0gXy5maWx0ZXIobm9kZXMsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5jYXRlZ29yeSA9PSAnc2xpZGUnO1xuICAgICAgICB9KTtcbiAgICAgICAgbm9kZURhdGFzID0gXy5zb3J0Qnkobm9kZURhdGFzLCBmdW5jdGlvbiAobm9kZURhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlRGF0YS5pbmRleDtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2dldFNsaWRlTm9kZURhdGFzLCBpbmRleGVzOiAnICsgXy5wbHVjayhzbGlkZXNEYXRhLCAnaW5kZXgnKSk7XG4gICAgICAgIHJldHVybiBub2RlRGF0YXM7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0U2xpZGVDb3VudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLmxlbmd0aDtcbiAgICB9OyAgXG5cbiAgICB0aGlzLmdldEFjdGl2aXR5U2xpZGVDb3VudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gXy53aGVyZShzZWxmLmdldFNsaWRlTm9kZURhdGFzKCksIHsgdHlwZTogJ0FDVElWSVRZX01BUCcgfSkubGVuZ3RoO1xuICAgIH07ICBcblxuICAgIHRoaXMuZ2V0U2xpZGVUeXBlID0gZnVuY3Rpb24odHlwZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIF8uZmluZFdoZXJlKHNlbGYuc2xpZGVUeXBlcywgeyBuYW1lOiB0eXBlTmFtZSB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRDdXJyZW50U2xpZGVUeXBlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XG4gICAgICAgIGlmIChzbGlkZSkge1xuICAgICAgICAgICAgcmV0dXJuIF8uZmluZFdoZXJlKHNlbGYuc2xpZGVUeXBlcywgeyBuYW1lOiBzbGlkZS5kYXRhLnR5cGUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZmluZFNsaWRlQnlJbmRleChpbmRleCkge1xuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgIHZhciBzbGlkZURhdGEgPSBfLmZpbmQoc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLCBmdW5jdGlvbiAoc2xpZGVEYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gc2xpZGVEYXRhLmluZGV4ID09IGluZGV4O1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHNsaWRlRGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZGlhZ3JhbS5maW5kTm9kZUZvcktleShzbGlkZURhdGEua2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBpbmNyZW1lbnQgaXMgLTEgb3IgKzFcbiAgICB0aGlzLm1vdmVTbGlkZSA9IGZ1bmN0aW9uIChpbmRleCwgaW5jcmVtZW50KSB7XG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTtcbiAgICAgICAgICAgIHZhciBuZWlnaGJvciA9IGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXggKyBpbmNyZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHNsaWRlICYmIG5laWdoYm9yKSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbW92ZVNsaWRlOiBzd2FwcGluZyAnICsgc2xpZGUuZGF0YS5rZXkgKyAnIHdpdGggJyArIG5laWdoYm9yLmRhdGEua2V5KTtcbiAgICAgICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJtb3ZlIHNsaWRlXCIpO1xuICAgICAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHNsaWRlLmRhdGEsICdpbmRleCcsIHNsaWRlLmRhdGEuaW5kZXggKyBpbmNyZW1lbnQpO1xuICAgICAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5laWdoYm9yLmRhdGEsICdpbmRleCcsIG5laWdoYm9yLmRhdGEuaW5kZXggLSBpbmNyZW1lbnQpO1xuICAgICAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJtb3ZlIHNsaWRlXCIpO1xuICAgICAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBjb21wYWN0U2xpZGVJbmRleGVzKCkge1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY29tcGFjdFNsaWRlSW5kZXhlcycpO1xuICAgICAgICAgICAgdmFyIHNsaWRlc0RhdGEgPSBzZWxmLmdldFNsaWRlTm9kZURhdGFzKCk7XG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgICAgICB2YXIgbmV3SW5kZXggPSAxO1xuICAgICAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiY29tcGFjdCBzbGlkZSBpbmRleGVzXCIpO1xuICAgICAgICAgICAgXy5lYWNoKHNsaWRlc0RhdGEsIGZ1bmN0aW9uIChzbGlkZURhdGEpIHtcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzbGlkZURhdGEsICdpbmRleCcsIG5ld0luZGV4KTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjb21wYWN0U2xpZGVJbmRleGVzOiBzZXQgaW5kZXggZm9yICcgKyBzbGlkZURhdGEua2V5ICsgJyB0byAnICsgbmV3SW5kZXgpO1xuICAgICAgICAgICAgICAgIG5ld0luZGV4Kys7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJjb21wYWN0IHNsaWRlIGluZGV4ZXNcIik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE5ld1NsaWRlS2V5KCkge1xuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgIHZhciBpID0gMTtcbiAgICAgICAgd2hpbGUgKGRpYWdyYW0ubW9kZWwuZmluZE5vZGVEYXRhRm9yS2V5KCdzbGlkZS0nICsgaSkpIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ3NsaWRlLScgKyBpO1xuICAgIH1cblxuICAgIC8vIE5COiBpbmRleGVzIChhbmQga2V5cz8pIG11c3QgYmUgMS1iYXNlZCwgb3RoZXJ3aXNlIGZpcnN0IHNsaWRlIGdldHMgc2NyZXdlZCB1cFxuICAgIC8vIChzb21ld2hlcmUgdGhlIGluZGV4IHNob3dzIHVwIGFzICcnIGluc3RlYWQgb2YgMClcbiAgICBmdW5jdGlvbiBnZXROZXdTbGlkZUluZGV4KCkge1xuICAgICAgICB2YXIgc2xpZGVzID0gc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpO1xuICAgICAgICByZXR1cm4gc2xpZGVzLmxlbmd0aCArIDE7IFxuICAgIH1cblxuICAgIHRoaXMuYWRkU2xpZGUgPSBmdW5jdGlvbiAodHlwZU5hbWUpIHtcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2FkZFNsaWRlOiAnICsgdHlwZU5hbWUpO1xuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xuXG4gICAgICAgICAgICB2YXIgZGIgPSBtYXAuY29tcHV0ZU1hcEJvdW5kcygpO1xuICAgICAgICAgICAgZGIuaW5mbGF0ZShkYi53aWR0aCAvIDIwLCBkYi5oZWlnaHQgLyAxMCk7XG4gICAgICAgICAgICB2YXIgbmV3TG9jID0gZGIueCArICcgJyArIGRiLnk7XG4gICAgICAgICAgICB2YXIgbmV3SW5kZXggPSBnZXROZXdTbGlkZUluZGV4KCk7XG5cbiAgICAgICAgICAgIHZhciBzbGlkZVR5cGUgPSBfLmZpbmRXaGVyZShzZWxmLnNsaWRlVHlwZXMsIHsgbmFtZTogdHlwZU5hbWUgfSk7XG5cbiAgICAgICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcImFkZCBzbGlkZVwiKTtcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoe1xuICAgICAgICAgICAgICAgIGtleTogZ2V0TmV3U2xpZGVLZXkoKSxcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJ3NsaWRlJyxcbiAgICAgICAgICAgICAgICBpbmRleDogbmV3SW5kZXgsXG4gICAgICAgICAgICAgICAgaXNHcm91cDogZmFsc2UsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGRiLndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogZGIuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGxvYzogbmV3TG9jLFxuICAgICAgICAgICAgICAgIGxldmVsOiAwLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAwLFxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGVOYW1lLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcbiAgICAgICAgICAgICAgICBub3RlczogJycsXG4gICAgICAgICAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgICAgICAgICBoYXNSZWdpb246IHNsaWRlVHlwZS5oYXNNYXBSZWdpb24sXG4gICAgICAgICAgICAgICAgaXNTdW1tYXJ5OiBzbGlkZVR5cGUuaGFzTWFwU3VtbWFyeSxcbiAgICAgICAgICAgICAgICBsaW5rczogW11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImFkZCBzbGlkZVwiKTtcbiAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XG5cbiAgICAgICAgICAgIHNlbGYuc2xpZGVUaHVtYm5haWxTZWxlY3RlZChuZXdJbmRleCk7IC8vIHRyaWdnZXIgZGlzcGxheSBvZiBlZGl0IGZvcm0sIHpvb20gdG8gbWFwIHJlZ2lvbiBpZiBhcHBsaWNhYmxlXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmR1cGxpY2F0ZVNsaWRlID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgICAgICB2YXIgbmV3SW5kZXggPSBnZXROZXdTbGlkZUluZGV4KCk7XG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTsgXG4gICAgICAgICAgICBpZiAoc2xpZGUpIHtcbiAgICAgICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJkdXBsaWNhdGUgc2xpZGVcIik7XG5cbiAgICAgICAgICAgICAgICAvLyBidW1wIHVwIGluZGV4ZXMgb24gc3Vic2VxdWVudCBzbGlkZXMgdG8gbWFrZSByb29tIGZvciBuZXcgc2xpZGUgYWZ0ZXIgY3VycmVudCBvbmVcbiAgICAgICAgICAgICAgICBfLmVhY2goc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLCBmdW5jdGlvbiAoc2xpZGVEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzbGlkZURhdGEuaW5kZXggPiBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2xpZGVEYXRhLCAnaW5kZXgnLCBzbGlkZURhdGEuaW5kZXggKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gTkI6IGNyZWF0aW5nIGEgbmV3IG5vZGVEYXRhIG9iamVjdCBoZXJlIHJhdGhlciB0aGFuIGNvcHlpbmcgYW5kIG1vZGlmeWluZywgdG8gYXZvaWQgY29weWluZyAkJGhhc2hLZXkgKD8/KVxuICAgICAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IGdldE5ld1NsaWRlS2V5KCksXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnc2xpZGUnLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaW5kZXggKyAxLFxuICAgICAgICAgICAgICAgICAgICBpc0dyb3VwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHNsaWRlLmRhdGEud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogc2xpZGUuZGF0YS5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIGxvYzogc2xpZGUuZGF0YS5sb2MsXG4gICAgICAgICAgICAgICAgICAgIGxldmVsOiAwLFxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogMCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogc2xpZGUuZGF0YS50eXBlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogc2xpZGUuZGF0YS50aXRsZSArICcgKENvcHkpJyxcbiAgICAgICAgICAgICAgICAgICAgbm90ZXM6IHNsaWRlLmRhdGEubm90ZXMsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrczogc2xpZGUuZGF0YS5jaGVja3MsIC8vIGNsb25lP1xuICAgICAgICAgICAgICAgICAgICBoYXNSZWdpb246IHNsaWRlLmRhdGEuaGFzUmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICBpc1N1bW1hcnk6IHNsaWRlLmRhdGEuaXNTdW1tYXJ5LFxuICAgICAgICAgICAgICAgICAgICBsaW5rczogc2xpZGUuZGF0YS5saW5rcyAvLyBjbG9uZT9cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiZHVwbGljYXRlIHNsaWRlXCIpO1xuICAgICAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLnJlbW92ZVNsaWRlID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdyZW1vdmVTbGlkZTogJyArIGluZGV4KTtcbiAgICAgICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcbiAgICAgICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpOyBcbiAgICAgICAgICAgIGlmIChzbGlkZSkge1xuICAgICAgICAgICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcInJlbW92ZSBzbGlkZVwiKTtcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnJlbW92ZU5vZGVEYXRhKHNsaWRlLmRhdGEpO1xuICAgICAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJyZW1vdmUgc2xpZGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRTbGlkZUluZGV4ID0gbnVsbDtcbiAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XG4gICAgICAgICAgICBjb21wYWN0U2xpZGVJbmRleGVzKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgdGh1bWJuYWlsQ2FjaGUgPSBbXTtcblxuICAgIHRoaXMuZ2V0U2xpZGVUaHVtYm5haWwgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRodW1ibmFpbENhY2hlW2luZGV4XTtcbiAgICB9O1xuXG4gICAgdGhpcy5jcmVhdGVTbGlkZVRodW1ibmFpbHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXy5lYWNoKHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKSwgZnVuY3Rpb24obmQpIHsgXG4gICAgICAgICAgICBzZWxmLmNyZWF0ZVNsaWRlVGh1bWJuYWlsKG5kLmluZGV4KTsgXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmNyZWF0ZVNsaWRlVGh1bWJuYWlsID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NyZWF0ZVNsaWRlVGh1bWJuYWlsJyk7XG5cbiAgICAgICAgdmFyIHRodW1iV2lkdGggPSAxMDAwO1xuICAgICAgICB2YXIgdGh1bWJIZWlnaHQgPSA2MDA7XG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcblxuICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTtcbiAgICAgICAgaWYgKCFzbGlkZSkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFzbGlkZS5kYXRhLmhhc1JlZ2lvbiAmJiAhc2xpZGUuZGF0YS5pc1N1bW1hcnkpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkYiA9IGRpYWdyYW0uZG9jdW1lbnRCb3VuZHM7XG4gICAgICAgICAgICB2YXIgc2I7XG4gICAgICAgICAgICBpZiAoc2xpZGUuZGF0YS5pc1N1bW1hcnkpIHsgLy8gZm9yIGEgc3VtbWFyeSBzbGlkZSB3ZSBzaG9vdCB0aGUgd2hvbGUgbWFwXG4gICAgICAgICAgICAgICAgc2IgPSBtYXAuc2FmZVJlY3QobWFwLmNvbXB1dGVNYXBCb3VuZHMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHsgLy8gb3RoZXJ3aXNlIGp1c3Qgc2hvb3QgdGhlIHNsaWRlIHJlZ2lvblxuICAgICAgICAgICAgICAgIHNiID0gc2xpZGUucGFydC5hY3R1YWxCb3VuZHM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpbWFnZVBvc2l0aW9uID0gbmV3IGdvLlBvaW50KHNiLngsIHNiLnkpO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2xpZGVUaHVtYm5haWwsIHNsaWRlIGJvdW5kczogJyArIHNiICsgJywgZG9jdW1lbnQgYm91bmRzOiAnICsgZGIgKyAnLCBpbWFnZVBvc2l0aW9uOiAnICsgaW1hZ2VQb3NpdGlvbik7XG5cbiAgICAgICAgICAgIHZhciB3U2NhbGUgPSB0aHVtYldpZHRoIC8gc2Iud2lkdGg7XG4gICAgICAgICAgICB2YXIgaFNjYWxlID0gdGh1bWJIZWlnaHQgLyBzYi5oZWlnaHQ7XG4gICAgICAgICAgICB2YXIgdGh1bWJTY2FsZSA9IE1hdGgubWluKHdTY2FsZSwgaFNjYWxlKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3NjYWxlOiAnICsgd1NjYWxlICsgJywnICsgaFNjYWxlKTtcblxuICAgICAgICAgICAgdmFyIHcgPSB0aHVtYlNjYWxlICogc2Iud2lkdGg7XG4gICAgICAgICAgICB2YXIgaCA9IHRodW1iU2NhbGUgKiBzYi5oZWlnaHQ7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd0aHVtYm5haWwgdy9oOiAnICsgdyArICcsJyArIGgpO1xuXG4gICAgICAgICAgICAvLyBoaWRlIHNsaWRlcyB0ZW1wb3JhcmlseSB3aGlsZSBjcmVhdGluZyB0aHVtYm5haWxcbiAgICAgICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IHRydWU7XG4gICAgICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XG5cbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSB0aHVtYlNjYWxlO1xuXG4gICAgICAgICAgICB2YXIgaW1nRGF0YSA9IGRpYWdyYW0ubWFrZUltYWdlRGF0YSh7XG4gICAgICAgICAgICAgICAgc2l6ZTogbmV3IGdvLlNpemUodywgaCksXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGltYWdlUG9zaXRpb24sXG4gICAgICAgICAgICAgICAgc2NhbGU6IHRodW1iU2NhbGVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZWxmLmlzQ3JlYXRpbmdUaHVtYm5haWwgPSBmYWxzZTtcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcblxuICAgICAgICAgICAgdGh1bWJuYWlsQ2FjaGVbaW5kZXhdID0gaW1nRGF0YTtcblxuICAgICAgICAgICAgcmV0dXJuIGltZ0RhdGE7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gZ2V0cyBhIHRodW1ibmFpbCBvZiB0aGUgd2hvbGUgbWFwLCBmb3Igc2F2aW5nIChzZWUgYXV0b3NhdmUuanMpXG4gICAgdGhpcy5nZXRNYXBUaHVtYm5haWwgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xuICAgICAgICB2YXIgc2IgPSBtYXAuc2FmZVJlY3QobWFwLmNvbXB1dGVNYXBCb3VuZHMoKSk7XG4gICAgICAgIHNiLmdyb3coMTAsMTAsMTAsMTApO1xuICAgICAgICB2YXIgdyA9IDE1MDtcbiAgICAgICAgdmFyIGggPSAxMDA7XG5cbiAgICAgICAgLy8gaGlkZSBzbGlkZXMgdGVtcG9yYXJpbHkgd2hpbGUgY3JlYXRpbmcgdGh1bWJuYWlsXG4gICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IHRydWU7XG4gICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcblxuICAgICAgICB2YXIgaW1nRGF0YSA9IGRpYWdyYW0ubWFrZUltYWdlRGF0YSh7XG4gICAgICAgICAgICBzY2FsZTogTWF0aC5taW4oaCAvIHNiLmhlaWdodCwgdyAvIHNiLndpZHRoKSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoc2IueCwgc2IueSksXG4gICAgICAgICAgICBzaXplOm5ldyBnby5TaXplKHcsIGgpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IGZhbHNlO1xuICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XG5cbiAgICAgICAgcmV0dXJuIGltZ0RhdGE7XG4gICAgfTtcblxuXG4gICAgLy8gY2FsbGVkIHZpYSBuZy1jbGljayBvbiB0aHVtYm5haWxcbiAgICB0aGlzLnNsaWRlVGh1bWJuYWlsU2VsZWN0ZWQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2xpZGVUaHVtYm5haWxTZWxlY3RlZDogJyArIGluZGV4KTtcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xuICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTtcblxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gTkI6IG9yZGVyIG9mIHN0YXRlbWVudHMgaXMgaW1wb3J0YW50IGhlcmUsIGFzIHNlbGVjdFNsaWRlIGNhbiB0cmlnZ2VyIGNoYW5nZWRTZWxlY3Rpb24gd2l0aCBhbiBlbXB0eSBzZWxlY3Rpb24gc29tZXRpbWVzLi4uID8/XG4gICAgICAgICAgICBzZWxlY3RTbGlkZShpbmRleCk7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRTbGlkZUluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7IC8vIHNob3cvaGlkZSBzbGlkZSBub2RlcyAtIHNlZSB0ZW1wbGF0ZXMuanM6IHNsaWRlVGVtcGxhdGVcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHNsaWRlKSB7XG4gICAgICAgICAgICAgICAgem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuaXNQcmVzZW50aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd1RPQyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMubmVlZHNOYXJyb3dDYW52YXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSAmJiBcbiAgICAgICAgICAgc2xpZGUgIT0gbnVsbCAmJiBcbiAgICAgICAgICAgKHNsaWRlLmRhdGEudHlwZSA9PSAnVElUTEVfQk9EWV9NQVAnIHx8IHNsaWRlLmRhdGEudHlwZSA9PSAnQUNUSVZJVFlfTUFQJyB8fCBzbGlkZS5kYXRhLnR5cGUgPT0gJ01BUF9TVU1NQVJZJyk7XG4gICAgfTtcblxuICAgIC8vIHNldHMgdGhlIHNsaWRlIG5vZGUgYXMgc2VsZWN0ZWQgaW4gdGhlIGRpYWdyYW0uXG4gICAgZnVuY3Rpb24gc2VsZWN0U2xpZGUoaW5kZXgpIHtcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3NlbGVjdCBzbGlkZTogJyArIGluZGV4KTtcbiAgICAgICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcbiAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGlmIChpbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmIChzbGlkZSkge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZS5pc1NlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT0RPOiBzY3JvbGwgdG8gc2xpZGU/XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMucGxheVNsaWRlID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcbiAgICAgICAgbWFwLmdldFVpKCkub3BlblRhYihtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKTsgXG5cbiAgICAgICAgdmFyIHNsaWRlcyA9IHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKTtcbiAgICAgICAgaWYgKHNsaWRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHNlbGYuc2hvd1RPQyA9IGZhbHNlO1xuICAgICAgICAgICAgcHJlc2VudFNsaWRlKGluZGV4KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBpbmNyZW1lbnQgaXMgLTEgb3IgKzFcbiAgICB0aGlzLmFkdmFuY2VTbGlkZSA9IGZ1bmN0aW9uIChpbmNyZW1lbnQpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnYWR2YW5jZVNsaWRlLCBjdXJyZW50U2xpZGVJbmRleDogJyArIHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcbiAgICAgICAgICAgIGlmIChzbGlkZSkge1xuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggKz0gKGluY3JlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuaXNQcmVzZW50aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXNlbnRTbGlkZShzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBwcmVzZW50U2xpZGUoaW5kZXgpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygncHJlc2VudFNsaWRlJyk7XG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTtcbiAgICAgICAgICAgIGlmICghc2xpZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIC8vIE5COiBuZWVkIHRvIHNldCB0aGlzIGFmdGVyIGNsZWFyU2VsZWN0aW9uLCBhcyB0aGF0IHdpbGwgc2V0IGl0IHRvIG51bGwhIChzZWUgY2hhbmdlZFNlbGVjdGlvbilcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZCh0cnVlKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3ByZXNlbnRTbGlkZSwgaW5kZXg6ICcgKyBpbmRleCArICcsIHNsaWRlOiAnICsgc2xpZGUgKyAnLCBjdXJyZW50U2xpZGVJbmRleDogJyArIHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xuXG4gICAgICAgICAgICBtYXliZUluaXRTbGlkZUJsb2NrZXIoKTtcbiAgICAgICAgICAgIHZhciBibG9ja2VyVyA9IHNlbGYuU0xJREVfQkxPQ0tFUl9XSURUSDtcblxuICAgICAgICAgICAgaWYgKHNsaWRlLmRhdGEuaGFzUmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBzaG93IHNsaWRlIGJsb2NrZXJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci5kZXNpcmVkU2l6ZSA9IG5ldyBnby5TaXplKFxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMud2lkdGggKyAyICogYmxvY2tlclcsIFxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgMiAqIGJsb2NrZXJXKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci5sb2NhdGlvbiA9IG5ldyBnby5Qb2ludChcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuYWN0dWFsQm91bmRzLnggLSBibG9ja2VyVywgXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlLmFjdHVhbEJvdW5kcy55IC0gYmxvY2tlclcpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2xpZGVCbG9ja2VyLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3NsaWRlQmxvY2tlcjogJyArIHNlbGYuc2xpZGVCbG9ja2VyLmFjdHVhbEJvdW5kcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzbGlkZS5kYXRhLmlzU3VtbWFyeSkge1xuICAgICAgICAgICAgICAgIHpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2xpZGVCbG9ja2VyLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLnJlc2V0Wm9vbSgpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2xpZGVCbG9ja2VyLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5pc1ByZXNlbnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdwcmVzZW50ZXItcGxheWluZycpO1xuXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7IC8vIGhpZGUgc2xpZGUgbm9kZXMgLSBzZWUgdGVtcGxhdGVzLmpzOiBzbGlkZVRlbXBsYXRlXG4gICAgICAgIH0pOyAgICAgICAgXG4gICAgfVxuXG4gICAgLy8gem9vbSB0aGUgZGlhZ3JhbSB0byBzaG93IHRoZSBnaXZlbiBzbGlkZSBpbiB0aGUgY2VudGVyIG9mIHRoZSBjYW52YXNcbiAgICBmdW5jdGlvbiB6b29tVG9TbGlkZUluQ2VudGVyKHNsaWRlKVxuICAgIHtcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xuXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgaGFsZldpZHRoID0gKHNsaWRlLmRhdGEudHlwZSAhPSAnTUFQX09OTFknKTtcbiAgICAgICAgdmFyIHpvb21SZWN0ID0gc2VsZi5nZXRMZXR0ZXJib3hlZFJlY3Qoc2xpZGUuYWN0dWFsQm91bmRzLCBoYWxmV2lkdGgpO1xuICAgICAgICB6b29tUmVjdC5pbmZsYXRlKHpvb21SZWN0LndpZHRoIC8gMTAsIHpvb21SZWN0LmhlaWdodCAvIDEwKTtcbiAgICAgICAgZGlhZ3JhbS56b29tVG9SZWN0KHpvb21SZWN0LCBnby5EaWFncmFtLlVuaWZvcm0pO1xuICAgICAgICB9LCAxMDApO1xuICAgIH1cblxuICAgIC8vIFJldHVybnMgYSByZWN0YW5nbGUgY29udGFpbmluZyB0aGUgZ2l2ZW4gcmVjdCwgYnV0IHdpdGggYXBwcm9wcmlhdGUgd2lkdGggb3IgaGVpZ2h0IGFkZGVkXG4gICAgLy8gdG8gZ2l2ZSBpdCBzYW1lIGFzcGVjdCByYXRpbyBhcyB0aGUgZGlhZ3JhbS5cbiAgICB0aGlzLmdldExldHRlcmJveGVkUmVjdCA9IGZ1bmN0aW9uIChyZWN0LCBoYWxmV2lkdGgpIHtcblxuICAgICAgICAvLyBOQjogd2UgY2FsY3VsYXRlIHRoZSBhc3BlY3QgcmF0aW8gd2hlbiB0aGUgdGFiIGlzIG9wZW5lZCwgXG4gICAgICAgIC8vIHJhdGhlciB0aGFuIGVhY2ggdGltZSBhcyB0aGUgZGlhZ3JhbSBzaXplIG1pZ2h0IGJlIGNoYW5naW5nLi4uXG4gICAgICAgIHZhciBkYXIgPSAoaGFsZldpZHRoID8gc2VsZi5kaWFncmFtQXNwZWN0UmF0aW8gLyAyIDogc2VsZi5kaWFncmFtQXNwZWN0UmF0aW8pO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdyZWN0OiAnICsgcmVjdCArICcsIGRhcjogJyArIGRhcik7XG5cbiAgICAgICAgdmFyIHJlY3RBc3BlY3RSYXRpbyA9IHJlY3Qud2lkdGggLyByZWN0LmhlaWdodDtcblxuICAgICAgICBpZiAoZGFyID4gcmVjdEFzcGVjdFJhdGlvKSB7XG4gICAgICAgICAgICAvLyB0YWxsIHNraW5ueSByZWN0LCBzaG9ydCB3aWRlIHRhcmdldCBBUiwgc28gYWRkIHNpZGUgcGFkZGluZyB0byB0aGUgcmVjdFxuICAgICAgICAgICAgdmFyIGxidyA9IHJlY3QuaGVpZ2h0ICogZGFyOyAvLyBiZWNhdXNlIGxidyAvIGxiaCA9PSBkYXIgPT0gbGJ3IC8gcmVjdC5oZWlnaHQgKGxiaCA9PSByZWN0LmhlaWdodClcbiAgICAgICAgICAgIHJldHVybiByZWN0LmNvcHkoKS5pbmZsYXRlKChsYncgLSByZWN0LndpZHRoKSAvIDIsIDApOyAvLyBhZGQgaGFsZiB0aGUgd2lkdGggZGlmZmVyZW5jZSB0byBlYWNoIHNpZGUgb2YgdGhlIHJlY3RcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHNob3J0IHdpZGUgcmVjdCwgdGFsbCBza2lubnkgdGFyZ2V0IEFSLCBzbyBhZGQgdG9wL2JvdHRvbSBwYWRkaW5nIHRvIHRoZSByZWN0XG4gICAgICAgICAgICB2YXIgbGJoID0gcmVjdC53aWR0aCAvIGRhcjsgLy8gYmVjYXVzZSBsYncgLyBsYmggPT0gZGFyID09IGxiaCAvIHJlY3Qud2lkdGggKGxidyA9PSByZWN0LndpZHRoKVxuICAgICAgICAgICAgcmV0dXJuIHJlY3QuY29weSgpLmluZmxhdGUoMCwgKGxiaCAtIHJlY3QuaGVpZ2h0KSAvIDIpOyAgLy8gYWRkIGhhbGYgdGhlIGhlaWdodCBkaWZmZXJlbmNlIHRvIHRvcC9ib3R0b20gb2YgdGhlIHJlY3RcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnN0b3BQcmVzZW50aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc3RvcFByZXNlbnRpbmcsIGN1cnJlbnRTbGlkZUluZGV4OiAnICsgc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG5cbiAgICAgICAgICAgIGlmIChzZWxmLnNsaWRlQmxvY2tlcikge1xuICAgICAgICAgICAgICAgIHNlbGYuc2xpZGVCbG9ja2VyLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9zZWxmLmN1cnJlbnRTbGlkZUluZGV4ID0gbnVsbDtcbiAgICAgICAgICAgIHNlbGYuaXNQcmVzZW50aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3ByZXNlbnRlci1wbGF5aW5nJyk7XG5cbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTsgLy8gc2hvdyBzbGlkZSBub2Rlc1xuXG4gICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQoZmFsc2UpO1xuICAgICAgICAgICAgLy9tYXAuZ2V0VWkoKS5yZXNldFpvb20oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxufTtcbiIsIi8vIGZ1bmN0aW9ucyBmb3Igc2hhcmluZyBtYXBzLCB3aXRoIGEgbW9kYWwgZGlhbG9nXG5cbndpbmRvdy5TYW5kYmFua1NoYXJpbmcgPSB7fTtcblxuU2FuZGJhbmtTaGFyaW5nID0gZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkbW9kYWwsICRsb2cpIHtcblxuICAgIHRoaXMub3Blbk1vZGFsID0gZnVuY3Rpb24obWFwSWRzLCBvblVwZGF0ZSkge1xuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVfbWFwX3NoYXJpbmdfbW9kYWwuaHRtbCcsIC8vIHNlZSB2aWV3cy9zaGFyZXMvX3RlbXBsYXRlX21hcF9zaGFyaW5nX21vZGFsXG4gICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBzaGFyaW5nTW9kYWxDdHJsLFxuICAgICAgICAgICAgd2luZG93Q2xhc3M6ICdzaGFyaW5nLW1vZGFsJyxcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICB1c2VySWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJJZDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVzZXJQcm9maWxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1hcElkczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXBJZHM7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvblVwZGF0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7fSk7XG4gICAgfTtcblxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIGNvbnRyb2xsZXIgZm9yIHNoYXJpbmcgbW9kYWwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICB2YXIgc2hhcmluZ01vZGFsQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIHVzZXJJZCwgdXNlclByb2ZpbGUsIG1hcElkcywgb25VcGRhdGUpIHtcblxuICAgICAgICAkc2NvcGUudXNlcklkID0gdXNlcklkO1xuICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUgPSB1c2VyUHJvZmlsZTtcbiAgICAgICAgJHNjb3BlLm1hcElkcyA9IG1hcElkcztcblxuICAgICAgICAvLyBhbGwgZXhpc3Rpbmcgc2hhcmVzIGZvciBzZWxlY3RlZCBtYXBzXG4gICAgICAgIC8vIGZvcm1hdDogW3ttYXBJZDoxLCBzaGFyZUlkOjEsIGNhbkVkaXQ6dHJ1ZSwgdXNlcklkOjIsIHVzZXJFbWFpbDonZm9vQGJhci5jb20nLCBncm91cElkOm51bGwsIG9yZ2FuaXphdGlvbklkOm51bGwsIGlzUHVibGljOmZhbHNlIH0sIC4uLl1cbiAgICAgICAgJHNjb3BlLm1hcFNoYXJlcyA9IFtdO1xuXG4gICAgICAgIC8vIGV4aXN0aW5nIHNoYXJlcywgZ3JvdXBlZCBmb3IgZGlzcGxheVxuICAgICAgICAvLyBmb3JtYXQ6IFt7bmFtZTonZm9vJywgdXNlckVtYWlsOidmb29AYmFyLmNvbScsIHVzZXJJZDogbnVsbCwgZ3JvdXBJZDogaWQsIG9yZ2FuaXphdGlvbklkOiBudWxsLCBpc1B1YmxpYzpmYWxzZSwgY2FuRWRpdDp0cnVlLCBtYXBJZHM6WzEsMl19LCAuLi5dXG4gICAgICAgICRzY29wZS5leGlzdGluZ1NoYXJlcyA9IFtdO1xuXG4gICAgICAgIC8vIG5ldyBzaGFyZXMgYWRkZWQgaW4gdGhlIGRpYWxvZyBcbiAgICAgICAgLy8gZm9ybWF0OiBbe3NoYXJlVHlwZTpTSEFSRV9UWVBFX0lORElWSURVQUwsIHNoYXJlUGVybWlzc2lvbjpTSEFSRV9QRVJNSVNTSU9OX0NBTlZJRVcsIHVzZXJFbWFpbDonZm9vQGJhci5jb20nLCBncm91cElkOm51bGwsIG9yZ2FuaXphdGlvbklkOm51bGwsIGlzUHVibGljOmZhbHNlIH0sIC4uLl1cbiAgICAgICAgJHNjb3BlLm5ld1NoYXJlcyA9IFtdO1xuXG4gICAgICAgIC8vIGFsbCB1cGRhdGVkIHNoYXJlcywgdG8gYmUgc2F2ZWRcbiAgICAgICAgLy8gZm9ybWF0OiBbe21hcElkOjEsIGNhbkVkaXQ6ZmFsc2UsIHVzZXJFbWFpbDonZm9vQGJhci5jb20nLCBncm91cElkOm51bGwsIG9yZ2FuaXphdGlvbklkOm51bGwsIGlzUHVibGljOmZhbHNlIH0sIC4uLl1cbiAgICAgICAgJHNjb3BlLnVwZGF0ZWRTaGFyZXMgPSBbXTtcblxuICAgICAgICAvLyBpbmRleGVzIG9mIHVzZXJzL2dyb3Vwcy9vcmdzIC0gZm9ybWF0OiBbe2lkOjEsIG5hbWU6J2Zvbyd9LCAuLi5dXG4gICAgICAgICRzY29wZS51c2VycyA9IFtdO1xuICAgICAgICAkc2NvcGUuZ3JvdXBzID0gW107XG4gICAgICAgICRzY29wZS5vcmdhbml6YXRpb25zID0gW107XG5cbiAgICAgICAgLy8gY29uc3RhbnRzXG4gICAgICAgICRzY29wZS5TSEFSRV9UWVBFX0lORElWSURVQUwgPSAnT25lIG9yIG1vcmUgSW5kaXZpZHVhbHMnO1xuICAgICAgICAkc2NvcGUuU0hBUkVfVFlQRV9HUk9VUCA9ICdHcm91cCc7XG4gICAgICAgICRzY29wZS5TSEFSRV9UWVBFX09SR0FOSVpBVElPTiA9ICdUaGlua05hdGlvbic7XG4gICAgICAgICRzY29wZS5TSEFSRV9UWVBFX1BVQkxJQyA9ICdBbGwgTWV0YU1hcCBVc2Vycyc7XG5cbiAgICAgICAgJHNjb3BlLnNoYXJlVHlwZXMgPSBbXG4gICAgICAgICAgICAkc2NvcGUuU0hBUkVfVFlQRV9JTkRJVklEVUFMLFxuICAgICAgICAgICAgLy8kc2NvcGUuU0hBUkVfVFlQRV9HUk9VUCwgXG4gICAgICAgICAgICAkc2NvcGUuU0hBUkVfVFlQRV9PUkdBTklaQVRJT04sXG4gICAgICAgICAgICAkc2NvcGUuU0hBUkVfVFlQRV9QVUJMSUNcbiAgICAgICAgXTtcblxuICAgICAgICAkc2NvcGUuU0hBUkVfUEVSTUlTU0lPTl9DQU5WSUVXID0gJ0NhbiB2aWV3JztcbiAgICAgICAgJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FORURJVCA9ICdDYW4gZWRpdCc7XG5cbiAgICAgICAgJHNjb3BlLnNoYXJlUGVybWlzc2lvbnMgPSBbXG4gICAgICAgICAgICAkc2NvcGUuU0hBUkVfUEVSTUlTU0lPTl9DQU5WSUVXLFxuICAgICAgICAgICAgJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FORURJVFxuICAgICAgICBdO1xuXG4gICAgICAgICRzY29wZS5jYW5TaGFyZUN1bHR1cmVNYXAgPSBmdW5jdGlvbihzaGFyZSkge1xuICAgICAgICAgICAgcmV0dXJuIF8uZmluZFdoZXJlKCRzY29wZS51c2VyUHJvZmlsZS5tZW1iZXJzaGlwcywge1xuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBzaGFyZS5vcmdhbml6YXRpb25JZCxcbiAgICAgICAgICAgICAgICBsZWFkZXI6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGdldCBleGlzdGluZyBzaGFyZXNcbiAgICAgICAgZnVuY3Rpb24gbG9hZFNoYXJlcyhtYXBJZHMpIHtcbiAgICAgICAgICAgICRodHRwLmdldCgnL3NoYXJlcy9tYXBfc2hhcmVzLmpzb24/aWRzPScgKyBtYXBJZHMuam9pbignLCcpKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCB8fCByZXNwb25zZS5zdGF0dXMgPT09IDIwNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1hcFNoYXJlcyA9IHJlc3BvbnNlLmRhdGEubWFwU2hhcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gcmVzcG9uc2UuZGF0YS51c2VycztcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5ncm91cHMgPSByZXNwb25zZS5kYXRhLmdyb3VwcztcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmdhbml6YXRpb25zID0gcmVzcG9uc2UuZGF0YS5vcmdhbml6YXRpb25zO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdEV4aXN0aW5nU2hhcmVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5leGlzdGluZ1NoYXJlcy5sZW5ndGggJiYgJHNjb3BlLmNhbkFkZE5ld1NoYXJlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmV3U2hhcmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3QgbG9hZCBzaGFyaW5nIGluZm8nKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxvYWRTaGFyZXMobWFwSWRzKTtcblxuICAgICAgICAvLyBncm91cCB0aGUgZXhpc3Rpbmcgc2hhcmVzIGJ5IHVzZXIsIGdyb3VwLCBvcmcgYW5kIHB1YmxpY1xuICAgICAgICBmdW5jdGlvbiBpbml0RXhpc3RpbmdTaGFyZXMoKSB7XG4gICAgICAgICAgICAvLyBmaW5kIGFsbCBlbWFpbHMgdGhhdCBvY2N1ciBpbiBhIHNoYXJlXG4gICAgICAgICAgICB2YXIgdXNlckVtYWlscyA9IF8ud2l0aG91dChfLnVuaXEoXy5wbHVjaygkc2NvcGUubWFwU2hhcmVzLCAndXNlckVtYWlsJykpLCBudWxsKTtcbiAgICAgICAgICAgIC8vIGJ1aWxkIGFuIGFycmF5IG9mIHNoYXJlcywgb25lIGZvciBlYWNoIGVtYWlsLCB3aXRoIHRoZSBhcHBsaWNhYmxlIG1hcCBJRHNcbiAgICAgICAgICAgIHZhciBzaGFyZXNCeVVzZXJFbWFpbCA9IF8ubWFwKHVzZXJFbWFpbHMsIGZ1bmN0aW9uKGVtYWlsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVzZXIgPSBfLmZpbmRXaGVyZSgkc2NvcGUudXNlcnMsIHtcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaXNEZWxldGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiAodXNlciA/IHVzZXIuaWQgOiBudWxsKSxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGlzUHVibGljOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNDdWx0dXJlTWFwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIC8vIE5COiBmb3IgdGhpcyBhdHRyaWJ1dGUgd2UgZG9uJ3QgdHJ5IHRvIHN1bW1hcml6ZSB0aGUgdmFsdWUgZm9yIGFsbCB0aGUgZXhpc3Rpbmcgc2hhcmVzLCBcbiAgICAgICAgICAgICAgICAgICAgLy8gYmVjYXVzZSBpdCB3b3VsZCBiZSB0b28gY29tcGxpY2F0ZWQgdG8gZGlzcGxheS4uLlxuICAgICAgICAgICAgICAgICAgICBjYW5FZGl0OiAkc2NvcGUubWFwU2hhcmVzLmxlbmd0aCA9PSAxICYmICRzY29wZS5tYXBTaGFyZXNbMF0uY2FuRWRpdCxcbiAgICAgICAgICAgICAgICAgICAgbWFwSWRzOiBfLnBsdWNrKF8ud2hlcmUoJHNjb3BlLm1hcFNoYXJlcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBlbWFpbFxuICAgICAgICAgICAgICAgICAgICB9KSwgJ21hcElkJylcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBncm91cElkcyA9IF8ud2l0aG91dChfLnVuaXEoXy5wbHVjaygkc2NvcGUubWFwU2hhcmVzLCAnZ3JvdXBJZCcpKSwgbnVsbCk7XG4gICAgICAgICAgICB2YXIgc2hhcmVzQnlHcm91cElkID0gXy5tYXAoZ3JvdXBJZHMsIGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gXy5maW5kV2hlcmUoJHNjb3BlLmdyb3Vwcywge1xuICAgICAgICAgICAgICAgICAgICBpZDogaWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpc0RlbGV0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogaWQsXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzQ3VsdHVyZU1hcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdHcm91cDogJyArIChncm91cCA/IGdyb3VwLm5hbWUgOiAnJyksXG4gICAgICAgICAgICAgICAgICAgIGNhbkVkaXQ6ICRzY29wZS5tYXBTaGFyZXMubGVuZ3RoID09IDEgJiYgJHNjb3BlLm1hcFNoYXJlc1swXS5jYW5FZGl0LFxuICAgICAgICAgICAgICAgICAgICBtYXBJZHM6IF8ucGx1Y2soXy53aGVyZSgkc2NvcGUubWFwU2hhcmVzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBpZFxuICAgICAgICAgICAgICAgICAgICB9KSwgJ21hcElkJylcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBvcmdhbml6YXRpb25JZHMgPSBfLndpdGhvdXQoXy51bmlxKF8ucGx1Y2soJHNjb3BlLm1hcFNoYXJlcywgJ29yZ2FuaXphdGlvbklkJykpLCBudWxsKTtcbiAgICAgICAgICAgIHZhciBzaGFyZXNCeU9yZ2FuaXphdGlvbklkID0gXy5tYXAob3JnYW5pemF0aW9uSWRzLCBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgIHZhciBvcmdhbml6YXRpb24gPSBfLmZpbmRXaGVyZSgkc2NvcGUub3JnYW5pemF0aW9ucywge1xuICAgICAgICAgICAgICAgICAgICBpZDogaWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpc0RlbGV0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzQ3VsdHVyZU1hcDogJHNjb3BlLm1hcFNoYXJlcy5sZW5ndGggPT0gMSAmJiAkc2NvcGUubWFwU2hhcmVzWzBdLmlzQ3VsdHVyZU1hcCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1RoaW5rTmF0aW9uOiAnICsgKG9yZ2FuaXphdGlvbiA/IG9yZ2FuaXphdGlvbi5uYW1lIDogJycpLFxuICAgICAgICAgICAgICAgICAgICBjYW5FZGl0OiAkc2NvcGUubWFwU2hhcmVzLmxlbmd0aCA9PSAxICYmICRzY29wZS5tYXBTaGFyZXNbMF0uY2FuRWRpdCxcbiAgICAgICAgICAgICAgICAgICAgbWFwSWRzOiBfLnBsdWNrKF8ud2hlcmUoJHNjb3BlLm1hcFNoYXJlcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGlkXG4gICAgICAgICAgICAgICAgICAgIH0pLCAnbWFwSWQnKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gYXJlIGFueSBvZiB0aGUgc2VsZWN0ZWQgbWFwcyBzaGFyZWQgcHVibGljbHk/XG4gICAgICAgICAgICB2YXIgcHVibGljU2hhcmVzID0gW107XG4gICAgICAgICAgICBpZiAoXy53aGVyZSgkc2NvcGUubWFwU2hhcmVzLCB7XG4gICAgICAgICAgICAgICAgaXNQdWJsaWM6IHRydWVcbiAgICAgICAgICAgIH0pLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHB1YmxpY1NoYXJlcyA9IFt7XG4gICAgICAgICAgICAgICAgICAgIGlzRGVsZXRlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaXNQdWJsaWM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzQ3VsdHVyZU1hcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdFdmVyeW9uZScsXG4gICAgICAgICAgICAgICAgICAgIGNhbkVkaXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtYXBJZHM6IF8ucGx1Y2soXy53aGVyZSgkc2NvcGUubWFwU2hhcmVzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KSwgJ21hcElkJylcbiAgICAgICAgICAgICAgICB9XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmV4aXN0aW5nU2hhcmVzID0gXy51bmlvbihzaGFyZXNCeVVzZXJFbWFpbCwgc2hhcmVzQnlHcm91cElkLCBzaGFyZXNCeU9yZ2FuaXphdGlvbklkLCBwdWJsaWNTaGFyZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYnVpbGRVcGRhdGVkU2hhcmVzKCkge1xuICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZWRTaGFyZXMgPSBbXTtcblxuICAgICAgICAgICAgLy8gZm9yIGVhY2ggc2VsZWN0ZWQgbWFwLCBkZWNvbXBvc2UgdGhlIGV4aXN0aW5nU2hhcmVzIChncm91cGVkIGJ5IHVzZXIvZ3JvdXAvb3JnL3B1YmxpYykgaW50byBpbmRpdmlkdWFsIHNoYXJlcyBmb3Igc2F2aW5nXG4gICAgICAgICAgICBfLmVhY2gobWFwSWRzLCBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgIC8vIGdldCBleGlzdGluZyBzaGFyZXMgZm9yIHRoaXMgbWFwXG4gICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nU2hhcmVzRm9yTWFwSWQgPSBfLmZpbHRlcigkc2NvcGUuZXhpc3RpbmdTaGFyZXMsIGZ1bmN0aW9uKGV4aXN0aW5nU2hhcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RpbmdTaGFyZXMgZm9ybWF0OiBbe25hbWU6J2ZvbycsIHVzZXJFbWFpbDonZm9vQGJhci5jb20nLCB1c2VySWQ6IG51bGwsIGdyb3VwSWQ6IGlkLCBvcmdhbml6YXRpb25JZDogbnVsbCwgaXNQdWJsaWM6ZmFsc2UsIGlzQ3VsdHVyZU1hcDpmYWxzZSwgY2FuRWRpdDp0cnVlLCBtYXBJZHM6WzEsMl19LCAuLi5dXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLmNvbnRhaW5zKGV4aXN0aW5nU2hhcmUubWFwSWRzLCBpZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gZGVjb21wb3NlIHRoZXNlIGludG8gaW5kaXZpZHVhbCBzaGFyZXNcbiAgICAgICAgICAgICAgICBfLmVhY2goZXhpc3RpbmdTaGFyZXNGb3JNYXBJZCwgZnVuY3Rpb24oZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZWRTaGFyZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc05ldzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RlbGV0ZWQ6IGVzLmlzRGVsZXRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcElkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogZXMudXNlckVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBlcy51c2VySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBlcy5ncm91cElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGVzLm9yZ2FuaXphdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQdWJsaWM6IGVzLmlzUHVibGljLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDdWx0dXJlTWFwOiBlcy5pc0N1bHR1cmVNYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5FZGl0OiBlcy5jYW5FZGl0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGFkZCBpbiB0aGUgbmV3U2hhcmVzIChmb3IgZWFjaCBzZWxlY3RlZCBtYXApXG4gICAgICAgICAgICBfLmVhY2gobWFwSWRzLCBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgIF8uZWFjaCgkc2NvcGUubmV3U2hhcmVzLCBmdW5jdGlvbihucykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlZFNoYXJlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTmV3OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwSWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiAobnMuc2hhcmVUeXBlID09ICRzY29wZS5TSEFSRV9UWVBFX0lORElWSURVQUwgPyBucy51c2VyRW1haWwgOiBudWxsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IChucy5zaGFyZVR5cGUgPT0gJHNjb3BlLlNIQVJFX1RZUEVfR1JPVVAgPyBucy5ncm91cElkIDogbnVsbCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogKG5zLnNoYXJlVHlwZSA9PSAkc2NvcGUuU0hBUkVfVFlQRV9PUkdBTklaQVRJT04gPyBucy5vcmdhbml6YXRpb25JZCA6IG51bGwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQdWJsaWM6IG5zLnNoYXJlVHlwZSA9PSAkc2NvcGUuU0hBUkVfVFlQRV9QVUJMSUMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0N1bHR1cmVNYXA6IG5zLmlzQ3VsdHVyZU1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkVkaXQ6IChucy5zaGFyZVR5cGUgPT0gJHNjb3BlLlNIQVJFX1RZUEVfUFVCTElDID8gZmFsc2UgOiBucy5zaGFyZVBlcm1pc3Npb24gPT0gJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FORURJVCksXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBucy5tZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzYXZlU2hhcmVzKG9uVXBkYXRlKSB7XG4gICAgICAgICAgICAkaHR0cC5wdXQoJy9zaGFyZXMvdXBkYXRlX21hcF9zaGFyZXMnLCAkc2NvcGUudXBkYXRlZFNoYXJlcykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3Qgc2F2ZSBzaGFyaW5nIGluZm8nKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5jYW5EZWxldGVFeGlzdGluZ1NoYXJlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLmNhbkFkZE5ld1NoYXJlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmRlbGV0ZUV4aXN0aW5nU2hhcmUgPSBmdW5jdGlvbihzaGFyZSkge1xuICAgICAgICAgICAgc2hhcmUuaXNEZWxldGVkID0gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuY2FuQWRkTmV3U2hhcmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBhbGwgbWFwcyBhcmUgb3duZWQgYnkgdGhlIGN1cnJlbnQgdXNlclxuICAgICAgICAgICAgdmFyIG1hcFVzZXJJZHMgPSBfLnVuaXEoXy5wbHVjaygkc2NvcGUubWFwU2hhcmVzLCAnbWFwVXNlcklkJykpO1xuICAgICAgICAgICAgcmV0dXJuIG1hcFVzZXJJZHMubGVuZ3RoID09IDAgfHwgKG1hcFVzZXJJZHMubGVuZ3RoID09IDEgJiYgbWFwVXNlcklkc1swXSA9PSAkc2NvcGUudXNlcklkKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkTmV3U2hhcmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIE5COiBpc1B1YmxpYyBhbmQgY2FuRWRpdCBhcmUgc2V0IGluIGJ1aWxkVXBkYXRlU2hhcmVzXG4gICAgICAgICAgICAkc2NvcGUubmV3U2hhcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgIHNoYXJlVHlwZTogJHNjb3BlLlNIQVJFX1RZUEVfSU5ESVZJRFVBTCxcbiAgICAgICAgICAgICAgICBzaGFyZVBlcm1pc3Npb246ICRzY29wZS5TSEFSRV9QRVJNSVNTSU9OX0NBTlZJRVcsXG4gICAgICAgICAgICAgICAgdXNlckVtYWlsOiAnJyxcbiAgICAgICAgICAgICAgICBncm91cElkOiAoJHNjb3BlLmdyb3Vwcy5sZW5ndGggPyAkc2NvcGUuZ3JvdXBzWzBdLmlkIDogbnVsbCksXG4gICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6ICgkc2NvcGUub3JnYW5pemF0aW9ucy5sZW5ndGggPyAkc2NvcGUub3JnYW5pemF0aW9uc1swXS5pZCA6IG51bGwpLFxuICAgICAgICAgICAgICAgIGlzQ3VsdHVyZU1hcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5kZWxldGVOZXdTaGFyZSA9IGZ1bmN0aW9uKHNoYXJlKSB7XG4gICAgICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZigkc2NvcGUubmV3U2hhcmVzLCBzaGFyZSk7XG4gICAgICAgICAgICAkc2NvcGUubmV3U2hhcmVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUub2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGJ1aWxkVXBkYXRlZFNoYXJlcygpO1xuICAgICAgICAgICAgc2F2ZVNoYXJlcyhvblVwZGF0ZSk7XG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBzaGFyaW5nTW9kYWxDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsICd1c2VySWQnLCAndXNlclByb2ZpbGUnLCAnbWFwSWRzJywgJ29uVXBkYXRlJ107XG59OyIsIi8vIGNvbW1vbiBjb3JlIHN0YW5kYXJkcyB0YWIgLVxuLy8gdGhpcyBpcyBkZWxlZ2F0ZWQgdG8gdGhlIFNhbmRiYW5rQ2NzVGFnZ2luZyBtb2R1bGUsIHdoaWNoIGhhbmRsZXMgQ0NTIFxuLy8gZm9yIGEgbWFwIE9SIHRoZSB1c2VyIHByb2ZpbGUgLSBzZWUgdGFnZ2luZ19jY3MuanNcblxuU2FuZGJhbmtFZGl0b3IuU3RhbmRhcmRzID0gZnVuY3Rpb24gKCRzY29wZSwgbWFwKSB7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgfTtcblxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcbiAgICB0aGlzLmN1cnJlbnRUYWJDaGFuZ2VkID0gZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfU1RBTkRBUkRTKSB7IC8vIG9wZW5pbmcgdGFiXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbm8gbGlua3MsIHNob3cgdGhlIG1vZGFsXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmNhbkVkaXQgJiYgISRzY29wZS5jY3NUYWdnaW5nLmxpbmtzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5jY3NUYWdnaW5nLmFkZExpbmsoKTsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9sZFZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9TVEFOREFSRFMpIHsgLy8gY2xvc2luZyB0YWJcbiAgICAgICAgfVxuICAgIH07XG59OyIsIi8vIGZ1bmN0aW9ucyBmb3IgdXNlci10YWdnaW5nIG1hcHMsIHdpdGggYSBtb2RhbCBkaWFsb2dcblxuLy8gTkI6IHRoZSBjb21wbGV4aXR5IGhlcmUgaXMgZHVlIHRvIHRoZSBuZWVkIHRvIHNob3cgZXhpc3RpbmcgdGFncyB0aGF0IG1heSBhcHBseSBcbi8vIHRvIGFueSBudW1iZXIgb2YgdGhlIHNlbGVjdGVkIG1hcHMsIHZzLiBuZXcgdGFncyB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gYWxsIHNlbGVjdGVkIG1hcHMgLVxuLy8gdGhlIHRhZ2dpbmcgaW5mbyBuZWVkcyB0byBiZSBncm91cGVkIGFuZCB1bmdyb3VwZWQgd2hlbiBsb2FkaW5nIGFuZCBzYXZpbmcgdG8gaGFuZGxlIHRoaXMuXG5cbndpbmRvdy5TYW5kYmFua1RhZ2dpbmcgPSB7fTtcblxuU2FuZGJhbmtUYWdnaW5nID0gZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkbW9kYWwsICRsb2cpIHtcblxuICAgIHRoaXMub3Blbk1vZGFsID0gZnVuY3Rpb24gKG1hcElkcywgc2hvd0Rlc2NyaXB0aW9uLCBvblVwZGF0ZSkge1xuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVfbWFwX3RhZ2dpbmdfbW9kYWwuaHRtbCcsIC8vIHNlZSB2aWV3cy91c2VyX3RhZ3MvX3RlbXBsYXRlX21hcF90YWdnaW5nX21vZGFsXG4gICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXG4gICAgICAgICAgICBjb250cm9sbGVyOiB0YWdzTW9kYWxDdHJsLFxuICAgICAgICAgICAgd2luZG93Q2xhc3M6ICd0YWdzLW1vZGFsJyxcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICBtYXBJZHM6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbWFwSWRzOyB9LFxuICAgICAgICAgICAgICAgIHNob3dEZXNjcmlwdGlvbjogZnVuY3Rpb24oKSB7IHJldHVybiBzaG93RGVzY3JpcHRpb247IH0sXG4gICAgICAgICAgICAgICAgb25VcGRhdGU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gb25VcGRhdGU7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbigpIHt9KTtcbiAgICB9O1xuXG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gY29udHJvbGxlciBmb3IgdGFncyBtb2RhbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIHZhciB0YWdzTW9kYWxDdHJsID0gZnVuY3Rpb24gKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIG1hcElkcywgc2hvd0Rlc2NyaXB0aW9uLCBvblVwZGF0ZSkge1xuXG4gICAgICAgICRzY29wZS5tYXBJZHMgPSBtYXBJZHM7XG5cbiAgICAgICAgLy8gYWxsIGV4aXN0aW5nIHRhZ3MgZm9yIHNlbGVjdGVkIG1hcHMgLSBmb3JtYXQ6IFt7bWFwSWQ6IDEsIHRhZ0lkOiAxLCB0YWdOYW1lOidmb28nfSwgLi4uXVxuICAgICAgICAkc2NvcGUubWFwVXNlclRhZ3MgPSBbXTsgICAgXG4gICAgICAgIFxuICAgICAgICAvLyBleGlzdGluZyB0YWdzLCBncm91cGVkIGZvciBkaXNwbGF5IC0gZm9ybWF0OiBbe25hbWU6J2ZvbycsIG1hcElkczpbMSwyXX0sIC4uLl1cbiAgICAgICAgJHNjb3BlLmV4aXN0aW5nVGFncyA9IFtdOyAgIFxuXG4gICAgICAgIC8vIG5ldyB0YWdzIGFkZGVkIGluIHRoZSBkaWFsb2cgLSBmb3JtYXQ6IFt7bmFtZTonZm9vJ30sIC4uLl1cbiAgICAgICAgJHNjb3BlLm5ld1RhZ3MgPSBbXTsgICAgICAgIFxuXG4gICAgICAgIC8vIGFsbCB1cGRhdGVkIHRhZ3MsIHRvIGJlIHNhdmVkIC0gdGFncyBmb3JtYXQ6IFt7bWFwSWQ6IDEsIHVzZXJUYWdzOiBcImZvbywgYmFyLCBiYW1cIn0sIC4uLl1cbiAgICAgICAgJHNjb3BlLnVwZGF0ZWRUYWdzID0geyBkZXNjcmlwdGlvbjogJycsIHRhZ3M6IFtdIH07XG5cbiAgICAgICAgJHNjb3BlLnNob3dEZXNjcmlwdGlvbiA9IHNob3dEZXNjcmlwdGlvbjtcblxuICAgICAgICBmdW5jdGlvbiBsb2FkVGFncyhtYXBJZHMpIHtcbiAgICAgICAgICAgICRodHRwLmdldCgnL3VzZXJfdGFncy9tYXBfdXNlcl90YWdzLmpzb24/aWRzPScgKyBtYXBJZHMuam9pbignLCcpKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1hcFVzZXJUYWdzID0gcmVzcG9uc2UuZGF0YS5tYXBVc2VyVGFncztcbiAgICAgICAgICAgICAgICAvLyBOQjogdGhlIG1hcCBkZXNjcmlwdGlvbiBpcyBhbHdheXMgcGFzc2VkIGJhY2sgaWYgd2Ugb25seSBwYXNzIG9uZSBtYXAgSUQsIFxuICAgICAgICAgICAgICAgIC8vIGJ1dCB3ZSBtYXkgbm90IGRpc3BsYXkgaXQgaW4gdGhlIGRpYWxvZyAtIGRlcGVuZHMgb24gdGhlIHZhbHVlIG9mIHRoZSBzaG93RGVzY3JpcHRpb24gZmxhZy5cbiAgICAgICAgICAgICAgICBpZiAobWFwSWRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVkVGFncy5kZXNjcmlwdGlvbiA9IHJlc3BvbnNlLmRhdGEubWFwRGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluaXRFeGlzdGluZ1RhZ3MoKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmV3VGFnKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBsb2FkIHRhZ3MnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbG9hZFRhZ3MobWFwSWRzKTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0RXhpc3RpbmdUYWdzKCkge1xuICAgICAgICAgICAgdmFyIHRhZ05hbWVzID0gXy51bmlxKF8ucGx1Y2soJHNjb3BlLm1hcFVzZXJUYWdzLCAndGFnTmFtZScpKS5zb3J0KCk7XG4gICAgICAgICAgICAkc2NvcGUuZXhpc3RpbmdUYWdzID0gXy5tYXAodGFnTmFtZXMsIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFwVXNlclRhZ3NGb3JOYW1lID0gXy53aGVyZSgkc2NvcGUubWFwVXNlclRhZ3MsIHt0YWdOYW1lOiBuYW1lfSk7XG4gICAgICAgICAgICAgICAgdmFyIG1hcElkcyA9IF8ucGx1Y2sobWFwVXNlclRhZ3NGb3JOYW1lLCAnbWFwSWQnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgICAgICAgICAgbmFtZTpuYW1lLCBcbiAgICAgICAgICAgICAgICAgICAgbWFwSWRzOm1hcElkc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkVXBkYXRlZFRhZ3MoKSB7XG4gICAgICAgICAgJHNjb3BlLnVwZGF0ZWRUYWdzLnRhZ3MgPSBbXTtcbiAgICAgICAgICBfLmVhY2gobWFwSWRzLCBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdUYWdzRm9ySWQgPSBfLmZpbHRlcigkc2NvcGUuZXhpc3RpbmdUYWdzLCBmdW5jdGlvbihleGlzdGluZ1RhZykgeyBcbiAgICAgICAgICAgICAgICAvLyBleGlzdGluZ1RhZyBmb3JtYXQ6IHtuYW1lOidmb28nLCBtYXBJZHM6WzEsMl19XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uY29udGFpbnMoZXhpc3RpbmdUYWcubWFwSWRzLCBpZCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlZFRhZ3MudGFncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIG1hcElkOiBpZCwgXG4gICAgICAgICAgICAgICAgICB1c2VyVGFnczogXy51bmlvbihcbiAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKGV4aXN0aW5nVGFnc0ZvcklkLCAnbmFtZScpLFxuICAgICAgICAgICAgICAgICAgICAgIF8ud2l0aG91dChfLnBsdWNrKCRzY29wZS5uZXdUYWdzLCAnbmFtZScpLCAnJykgLy8gcmVtb3ZlIGVtcHR5IHRhZ3NcbiAgICAgICAgICAgICAgICAgICkuam9pbignLCAnKVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNhdmVUYWdzKG9uVXBkYXRlKSB7XG4gICAgICAgICAgICAkaHR0cC5wdXQoJy91c2VyX3RhZ3MvdXBkYXRlX21hcF91c2VyX3RhZ3MnLCBbJHNjb3BlLnVwZGF0ZWRUYWdzXSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIG9uVXBkYXRlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBzYXZlIHRhZ3MnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmRlbGV0ZUV4aXN0aW5nVGFnID0gZnVuY3Rpb24odGFnKSB7XG4gICAgICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZigkc2NvcGUuZXhpc3RpbmdUYWdzLCB0YWcpO1xuICAgICAgICAgICAgJHNjb3BlLmV4aXN0aW5nVGFncy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH07ICBcblxuICAgICAgICAkc2NvcGUuYWRkTmV3VGFnID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUubmV3VGFncy5wdXNoKHtuYW1lOiAnJ30pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS50YWdTZWxlY3RlZCA9IGZ1bmN0aW9uKGl0ZW0sIG1vZGVsLCBsYWJlbCkge1xuICAgICAgICAgIC8vY29uc29sZS5sb2coJ3RhZ1NlbGVjdGVkOiAnICsgaXRlbSArICcsICcgKyBtb2RlbCArICcsICcgKyBsYWJlbCk7XG4gICAgICAgICAgJHNjb3BlLmFkZE5ld1RhZygpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5lZGl0aW5nVGFnS2V5cHJlc3MgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PSAxMykge1xuICAgICAgICAgICAgICAgICRzY29wZS5hZGROZXdUYWcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZGVsZXRlTmV3VGFnID0gZnVuY3Rpb24odGFnKSB7XG4gICAgICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZigkc2NvcGUubmV3VGFncywgdGFnKTtcbiAgICAgICAgICAgICRzY29wZS5uZXdUYWdzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGlmICghJHNjb3BlLm5ld1RhZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZE5ld1RhZygpOyAvLyBhbHdheXMgbGVhdmUgYXQgbGVhc3Qgb25lIHRhZyBmaWVsZFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgLy8gdGFnIGF1dG9jb21wbGV0ZVxuICAgICAgICAkc2NvcGUuZ2V0VXNlclRhZ3MgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSAnL3VzZXJfdGFncy9saXN0Lmpzb24/cT0nICsgdmlld1ZhbHVlOyBcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEudGFncztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5vayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJ1aWxkVXBkYXRlZFRhZ3MoKTtcbiAgICAgICAgICAgIHNhdmVUYWdzKG9uVXBkYXRlKTtcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICB0YWdzTW9kYWxDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsICdtYXBJZHMnLCAnc2hvd0Rlc2NyaXB0aW9uJywgJ29uVXBkYXRlJ107XG59O1xuIiwiLy8gZ29KUyB0ZW1wbGF0ZXMgdXNlZCBpbiB0aGUgZWRpdG9yXG5cblNhbmRiYW5rRWRpdG9yLlRlbXBsYXRlcyA9IGZ1bmN0aW9uICgkc2NvcGUsIG1hcCkge1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gY29uc3RhbnRzXG4gICAgdGhpcy5ncm91cEZpbGxDb2xvciA9IFwiI2Y5ZjlmOVwiO1xuXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkgeyB9O1xuXG4gICAgLy8gaW5pdGlhbGl6ZSB0ZW1wbGF0ZS1yZWxhdGVkIHN0dWZmIHRoYXQgZGVwZW5kcyBvbiB0aGUgZGlhZ3JhbSAoYW5kIHRoZXJlZm9yZSBjYW4ndCBnbyBpbiBpbml0KCkpXG4gICAgdGhpcy5pbml0VGVtcGxhdGVzID0gZnVuY3Rpb24gKGRpYWdyYW0pIHtcbiAgICAgICAgZGlhZ3JhbS5ncm91cFRlbXBsYXRlID0gc2VsZi5ncm91cFRlbXBsYXRlO1xuICAgICAgICBkaWFncmFtLm5vZGVUZW1wbGF0ZSA9IHNlbGYuc2xpZGVUZW1wbGF0ZTtcbiAgICAgICAgZGlhZ3JhbS5saW5rVGVtcGxhdGUgPSBzZWxmLmxpbmtUZW1wbGF0ZTtcbiAgICAgICAgZGlhZ3JhbS5saW5rVGVtcGxhdGVNYXAuYWRkKCdQJywgc2VsZi5wTGlua1RlbXBsYXRlKTtcbiAgICAgICAgZGlhZ3JhbS5saW5rVGVtcGxhdGVNYXAuYWRkKCdEJywgc2VsZi5kTGlua1RlbXBsYXRlKTtcblxuICAgICAgICBzZWxmLnNldFRlbXBvcmFyeUxpbmtUZW1wbGF0ZXMoZGlhZ3JhbS50b29sTWFuYWdlci5saW5raW5nVG9vbCk7XG4gICAgICAgIHNlbGYuc2V0VGVtcG9yYXJ5TGlua1RlbXBsYXRlcyhkaWFncmFtLnRvb2xNYW5hZ2VyLnJlbGlua2luZ1Rvb2wpO1xuXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIubGlua2luZ1Rvb2wucG9ydFRhcmdldGVkID0gZnVuY3Rpb24gKHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCkge1xuICAgICAgICAgICAgc2VsZi5oYW5kbGVQb3J0VGFyZ2V0ZWQoZGlhZ3JhbS50b29sTWFuYWdlci5saW5raW5nVG9vbCwgcmVhbG5vZGUsIHJlYWxwb3J0LCB0ZW1wbm9kZSwgdGVtcHBvcnQsIHRvZW5kKTtcbiAgICAgICAgfTtcblxuICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLnJlbGlua2luZ1Rvb2wucG9ydFRhcmdldGVkID0gZnVuY3Rpb24gKHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCkge1xuICAgICAgICAgICAgc2VsZi5oYW5kbGVQb3J0VGFyZ2V0ZWQoZGlhZ3JhbS50b29sTWFuYWdlci5yZWxpbmtpbmdUb29sLCByZWFsbm9kZSwgcmVhbHBvcnQsIHRlbXBub2RlLCB0ZW1wcG9ydCwgdG9lbmQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbC51cGRhdGVBZG9ybm1lbnRzID0gZnVuY3Rpb24gKHBhcnQpIHtcbiAgICAgICAgICAgIGdvLlJlbGlua2luZ1Rvb2wucHJvdG90eXBlLnVwZGF0ZUFkb3JubWVudHMuY2FsbCh0aGlzLCBwYXJ0KTtcbiAgICAgICAgICAgIHZhciBmcm9tID0gcGFydC5maW5kQWRvcm5tZW50KCdSZWxpbmtGcm9tJyk7XG4gICAgICAgICAgICB2YXIgdG8gPSBwYXJ0LmZpbmRBZG9ybm1lbnQoJ1JlbGlua1RvJyk7XG4gICAgICAgICAgICAvLyBpZiAoZnJvbSlcbiAgICAgICAgICAgIC8vICAgICAvL2NvbnNvbGUubG9nKCdyZWxpbmtmcm9tOiAnICsgZnJvbS5wYXJ0LndpZHRoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sLmxpbmtWYWxpZGF0aW9uID0gc2VsZi52YWxpZGF0ZUxpbms7XG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbC5saW5rVmFsaWRhdGlvbiA9IHNlbGYudmFsaWRhdGVMaW5rO1xuICAgIH07XG5cbiAgICAvLyBjb252ZW5pZW50IGFiYnJldmlhdGlvbiBmb3IgY3JlYXRpbmcgdGVtcGxhdGVzXG4gICAgdmFyIG1rID0gZ28uR3JhcGhPYmplY3QubWFrZTtcblxuICAgIC8vIERTUlAgY29sb3JzIChmcm9tIF92YXJpYWJsZXMuc2NzcylcbiAgICB2YXIgY29sb3JEID0gXCIjZjI2MjRjXCI7XG4gICAgdmFyIGNvbG9yUyA9IFwiIzk2YzkzZFwiO1xuICAgIHZhciBjb2xvclIgPSBcIiM0Y2JmYzJcIjtcbiAgICB2YXIgY29sb3JQID0gXCIjZmJhYTM2XCI7XG4gICAgdmFyIGNvbG9yUExpZ2h0ID0gXCIjRkREREFGXCI7XG4gICAgdmFyIGNvbG9yUERhcmsgPSBcIiNDOTg4MkJcIjtcblxuICAgIHZhciBleWVTdmdQYXRoID0gXCJNIDI1Ni4wMCw5Ni4wMEMgMTQ0LjM0MSw5Ni4wMCwgNDcuNTU5LDE2MS4wMjEsMC4wMCwyNTYuMDBjIDQ3LjU1OSw5NC45NzksIDE0NC4zNDEsMTYwLjAwLCAyNTYuMDAsMTYwLjAwYyAxMTEuNjU3LDAuMDAsIDIwOC40MzktNjUuMDIxLCAyNTYuMDAtMTYwLjAwIEMgNDY0LjQ0MiwxNjEuMDIxLCAzNjcuNjU3LDk2LjAwLCAyNTYuMDAsOTYuMDB6IE0gMzgyLjIyNSwxODAuODUyYyAzMC4wODEsMTkuMTg3LCA1NS41NzEsNDQuODg3LCA3NC43MTcsNzUuMTQ4IGMtMTkuMTQ2LDMwLjI2MS00NC42MzcsNTUuOTYxLTc0LjcxOCw3NS4xNDlDIDM0NC40MjcsMzU1LjI1NywgMzAwLjc3OSwzNjguMDAsIDI1Ni4wMCwzNjguMDBjLTQ0Ljc4LDAuMDAtODguNDI4LTEyLjc0My0xMjYuMjI1LTM2Ljg1MiBDIDk5LjY5NSwzMTEuOTYyLCA3NC4yMDUsMjg2LjI2MiwgNTUuMDU4LDI1Ni4wMGMgMTkuMTQ2LTMwLjI2MiwgNDQuNjM3LTU1Ljk2MiwgNzQuNzE3LTc1LjE0OGMgMS45NTktMS4yNSwgMy45MzgtMi40NjEsIDUuOTI5LTMuNjUgQyAxMzAuNzI1LDE5MC44NjYsIDEyOC4wMCwyMDUuNjEzLCAxMjguMDAsMjIxLjAwYzAuMDAsNzAuNjkyLCA1Ny4zMDgsMTI4LjAwLCAxMjguMDAsMTI4LjAwcyAxMjguMDAtNTcuMzA4LCAxMjguMDAtMTI4LjAwYzAuMDAtMTUuMzg3LTIuNzI1LTMwLjEzNC03LjcwNC00My43OTkgQyAzNzguMjg2LDE3OC4zOSwgMzgwLjI2NSwxNzkuNjAyLCAzODIuMjI1LDE4MC44NTJ6IE0gMjU2LjAwLDIwNS4wMGMwLjAwLDI2LjUxLTIxLjQ5LDQ4LjAwLTQ4LjAwLDQ4LjAwcy00OC4wMC0yMS40OS00OC4wMC00OC4wMHMgMjEuNDktNDguMDAsIDQ4LjAwLTQ4LjAwIFMgMjU2LjAwLDE3OC40OSwgMjU2LjAwLDIwNS4wMHpcIjtcbiAgICB2YXIgZXllQmxvY2tlZFN2Z1BhdGggPSBcIk0gNDE5LjY2MSwxNDguMjA4IEMgNDU4LjQ4MywxNzUuNzIzIDQ5MC4zNDYsMjEyLjc1NCA1MTIuMDAsMjU2LjAwIEMgNDY0LjQzOSwzNTAuOTc5IDM2Ny42NTcsNDE2LjAwIDI1Ni4wMCw0MTYuMDAgQyAyMjQuNzE3LDQxNi4wMCAxOTQuNjA0LDQxMC44OTQgMTY2LjQxMSw0MDEuNDU4IEwgMjA1LjM4OSwzNjIuNDggQyAyMjEuOTE4LDM2Ni4xMyAyMzguODc1LDM2OC4wMCAyNTYuMDAsMzY4LjAwIEMgMzAwLjc3OSwzNjguMDAgMzQ0LjQyNywzNTUuMjU3IDM4Mi4yMjMsMzMxLjE0OCBDIDQxMi4zMDQsMzExLjk2IDQzNy43OTUsMjg2LjI2IDQ1Ni45NDEsMjU1Ljk5OSBDIDQzOC40MTUsMjI2LjcxNiA0MTMuOTM0LDIwMS43MjQgMzg1LjExNiwxODIuNzUyIEwgNDE5LjY2MSwxNDguMjA4IFpNIDI1Ni4wMCwzNDkuMDAgQyAyNDQuNjM4LDM0OS4wMCAyMzMuNjI0LDM0Ny41MTIgMjIzLjEzNiwzNDQuNzMzIEwgMzc5LjcyOSwxODguMTQxIEMgMzgyLjUxLDE5OC42MjcgMzg0LjAwLDIwOS42MzggMzg0LjAwLDIyMS4wMCBDIDM4NC4wMCwyOTEuNjkyIDMyNi42OTIsMzQ5LjAwIDI1Ni4wMCwzNDkuMDAgWk0gNDgwLjAwLDAuMDBsLTI2Ljg2OSwwLjAwIEwgMzQzLjMyNSwxMDkuODA2QyAzMTUuNzg3LDEwMC44NDQsIDI4Ni40NDgsOTYuMDAsIDI1Ni4wMCw5Ni4wMEMgMTQ0LjM0MSw5Ni4wMCwgNDcuNTU5LDE2MS4wMjEsMC4wMCwyNTYuMDAgYyAyMS4zMjksNDIuNTk2LCA1Mi41NjQsNzkuMTU0LCA5MC41OTcsMTA2LjUzNEwwLjAwLDQ1My4xMzFMMC4wMCw0ODAuMDAgbCAyNi44NjksMC4wMCBMIDQ4MC4wMCwyNi44NjlMIDQ4MC4wMCwwLjAwIHogTSAyMDguMDAsMTU3LjAwYyAyNC4wMjIsMC4wMCwgNDMuOTIzLDE3LjY0NywgNDcuNDQ2LDQwLjY4NSBsLTU0Ljc2Miw1NC43NjJDIDE3Ny42NDcsMjQ4LjkyMywgMTYwLjAwLDIyOS4wMjIsIDE2MC4wMCwyMDUuMDBDIDE2MC4wMCwxNzguNDksIDE4MS40OSwxNTcuMDAsIDIwOC4wMCwxNTcuMDB6IE0gNTUuMDU4LDI1Ni4wMCBjIDE5LjE0Ni0zMC4yNjIsIDQ0LjYzNy01NS45NjIsIDc0LjcxNy03NS4xNDhjIDEuOTU5LTEuMjUsIDMuOTM4LTIuNDYxLCA1LjkyOS0zLjY1QyAxMzAuNzI1LDE5MC44NjYsIDEyOC4wMCwyMDUuNjEzLCAxMjguMDAsMjIxLjAwIGMwLjAwLDI5LjI2MiwgOS44MjUsNTYuMjI0LCAyNi4zNDksNzcuNzgxbC0yOS4yNzUsMjkuMjc1QyA5Ny4wMzgsMzA5LjIzNSwgNzMuMTk3LDI4NC42NywgNTUuMDU4LDI1Ni4wMHpcIjtcbiAgICB2YXIgcGFwZXJjbGlwU3ZnUGF0aCA9IFwiTSAzNDguOTE2LDE2My41MjRsLTMyLjQ3Ni0zMi40NjFMIDE1NC4wMzUsMjkzLjQzNGMtMjYuOTA3LDI2Ljg5Ni0yNi45MDcsNzAuNTI0LDAuMDAsOTcuNDIyIGMgMjYuOTAyLDI2Ljg5NiwgNzAuNTMsMjYuODk2LCA5Ny40MzcsMC4wMGwgMTk0Ljg4Ni0xOTQuODU0YyA0NC44NTctNDQuODMxLCA0NC44NTctMTE3LjUzMSwwLjAwLTE2Mi4zNjMgYy00NC44MzMtNDQuODUyLTExNy41NTYtNDQuODUyLTE2Mi4zOTEsMC4wMEwgNzkuMzM1LDIzOC4yMTJsIDAuMDE3LDAuMDE2Yy0wLjE0NSwwLjE1Mi0wLjMwNiwwLjI4OC0wLjQzOCwwLjQyMyBjLTYyLjU1MSw2Mi41NDgtNjIuNTUxLDE2My45MjgsMC4wMCwyMjYuNDUzYyA2Mi41MjcsNjIuNTI4LCAxNjMuOTM0LDYyLjUyOCwgMjI2LjQ5NCwwLjAwYyAwLjEzNy0wLjEzNywgMC4yNTgtMC4yODQsIDAuNDEtMC40MzhsIDAuMDE2LDAuMDE3IGwgMTM5LjY2Ni0xMzkuNjQ2bC0zMi40OTMtMzIuNDZMIDI3My4zNSw0MzIuMjA4bC0wLjAwOCwwLjAwIGMtMC4xNDgsMC4xMzQtMC4yODIsMC4yODUtMC40MjMsMC40MjIgYy00NC41MzcsNDQuNTI5LTExNi45OSw0NC41MjktMTYxLjUzOCwwLjAwYy00NC41MzEtNDQuNTIxLTQ0LjUzMS0xMTYuOTYxLDAuMDAtMTYxLjQ4OWMgMC4xNTItMC4xNTIsIDAuMzAyLTAuMjkxLCAwLjQ0NC0wLjQyM2wtMC4wMjMtMC4wMyBsIDIwNC42NC0yMDQuNTgzYyAyNi44NTYtMjYuODY5LCA3MC41NzItMjYuODY5LCA5Ny40NDMsMC4wMGMgMjYuODU2LDI2Ljg2NywgMjYuODU2LDcwLjU3NCwwLjAwLDk3LjQyTCAyMTguOTk5LDM1OC4zNzUgYy04Ljk2OCw4Ljk2MS0yMy41MjcsOC45NjEtMzIuNDg2LDAuMDBjLTguOTQ3LTguOTQzLTguOTQ3LTIzLjUxNiwwLjAwLTMyLjQ2TCAzNDguOTE2LDE2My41MjR6XCI7XG5cbiAgICAvLyBmb290ZXIgZm9yIGltYWdlIGV4cG9ydFxuICAgIHZhciBfZXhwb3J0Rm9vdGVyID0gbnVsbDtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gZGVidWcgaW5mbyBmb3IgZ3JvdXBzL2xpbmtzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBmdW5jdGlvbiBncm91cEluZm8ob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmouZGF0YS50ZXh0ICsgXCJcXG5cIiArXG4gICAgICAgICAgICAnb2JqZWN0OiAnICsgb2JqICsgXCJcXG5cIiArXG4gICAgICAgICAgICAna2V5OiAnICsgb2JqLmRhdGEua2V5ICsgXCJcXG5cIiArXG4gICAgICAgICAgICAnY29udGFpbmluZ0dyb3VwOiAnICsgb2JqLmNvbnRhaW5pbmdHcm91cCArIFwiXFxuXCIgK1xuICAgICAgICAgICAgJ2xheW91dDogJyArIG9iai5sYXlvdXQgKyBcIlxcblwiICtcbiAgICAgICAgICAgICdkYXRhLmxheW91dDogJyArIG9iai5kYXRhLmxheW91dCArIFwiXFxuXCIgK1xuICAgICAgICAgICAgJ3Bvc2l0aW9uOiAnICsgcGFyc2VJbnQob2JqLnBvc2l0aW9uLngsIDEwKSArICcsICcgKyBwYXJzZUludChvYmoucG9zaXRpb24ueSwgMTApICsgXCJcXG5cIiArXG4gICAgICAgICAgICAnZnJlZWhhbmQgcG9zaXRpb24gKGRhdGEubG9jKTogJyArIGdvLlBvaW50LnBhcnNlKG9iai5kYXRhLmxvYykgKyBcIlxcblwiICtcbiAgICAgICAgICAgICd3aWR0aC9oZWlnaHQ6ICcgKyBwYXJzZUludChvYmouYWN0dWFsQm91bmRzLndpZHRoLCAxMCkgKyAnLycgKyBwYXJzZUludChvYmouYWN0dWFsQm91bmRzLmhlaWdodCwgMTApICsgXCJcXG5cIiArXG4gICAgICAgICAgICAnZ2V0U2NhbGUoKTogJyArIG1hcC5nZXRMYXlvdXRzKCkuZ2V0U2NhbGUob2JqKSArIFwiXFxuXCIgK1xuICAgICAgICAgICAgJ2lzTGlua0xhYmVsOiAnICsgb2JqLmRhdGEuaXNMaW5rTGFiZWwgKyBcIlxcblwiICtcbiAgICAgICAgICAgICdsYWJlbGVkTGluazogJyArIG9iai5sYWJlbGVkTGluayArIFwiXFxuXCI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbm9kZUluZm8ob2JqKSB7XG4gICAgICAgIHJldHVybiAnb2JqZWN0OiAnICsgb2JqICsgXCJcXG5cIiArXG4gICAgICAgICAgICAna2V5OiAnICsgb2JqLmRhdGEua2V5ICsgXCJcXG5cIiArXG4gICAgICAgICAgICAncG9zaXRpb246ICcgKyBwYXJzZUludChvYmoucG9zaXRpb24ueCwgMTApICsgJywgJyArIHBhcnNlSW50KG9iai5wb3NpdGlvbi55LCAxMCkgKyBcIlxcblwiICtcbiAgICAgICAgICAgICd3aWR0aC9oZWlnaHQ6ICcgKyBwYXJzZUludChvYmouYWN0dWFsQm91bmRzLndpZHRoLCAxMCkgKyAnLycgKyBwYXJzZUludChvYmouYWN0dWFsQm91bmRzLmhlaWdodCwgMTApICsgXCJcXG5cIjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaW5rSW5mbyhvYmopIHtcbiAgICAgICAgdmFyIHNucG9zID0gbWFwLmdldExheW91dHMoKS5nZXRTYW1lTm9kZXNMaW5rUG9zaXRpb24ob2JqKTtcbiAgICAgICAgcmV0dXJuICcnICtcbiAgICAgICAgICAgICdvYmplY3Q6ICcgKyBvYmogKyBcIlxcblwiICtcbiAgICAgICAgICAgICdmcm9tTm9kZTogJyArIG9iai5mcm9tTm9kZSArIFwiXFxuXCIgK1xuICAgICAgICAgICAgJ3RvTm9kZTogJyArIG9iai50b05vZGUgKyBcIlxcblwiICtcbiAgICAgICAgICAgICdsYWJlbE5vZGVzOiAnICsgb2JqLmxhYmVsTm9kZXMuY291bnQgKyBcIlxcblwiICtcbiAgICAgICAgICAgICdsYWJlbE5vZGVJc1Zpc2libGU6ICcgKyBtYXAuZ2V0TGF5b3V0cygpLmxhYmVsTm9kZUlzVmlzaWJsZShvYmopICsgXCJcXG5cIiArXG4gICAgICAgICAgICAnZnJvbVBvcnRJZDogJyArIG9iai5mcm9tUG9ydElkICsgXCJcXG5cIiArXG4gICAgICAgICAgICAndG9Qb3J0SWQ6ICcgKyBvYmoudG9Qb3J0SWQgKyBcIlxcblwiICtcbiAgICAgICAgICAgICdjYXRlZ29yeTogJyArIChvYmouZGF0YSA/IG9iai5kYXRhLmNhdGVnb3J5IDogJycpICsgXCJcXG5cIiArXG4gICAgICAgICAgICAnY29udGFpbmluZ0dyb3VwOiAnICsgb2JqLmNvbnRhaW5pbmdHcm91cCArIFwiXFxuXCIgK1xuICAgICAgICAgICAgJ2Zyb21BbmRUb05vZGVzQXJlVmlzaWJsZTogJyArIG1hcC5nZXRMYXlvdXRzKCkuZnJvbUFuZFRvTm9kZXNBcmVWaXNpYmxlKG9iaikgKyBcIlxcblwiICtcbiAgICAgICAgICAgICdjdXJ2ZTogJyArIG9iai5jdXJ2ZSArIFwiXFxuXCIgK1xuICAgICAgICAgICAgJ2N1cnZpbmVzczogJyArIG9iai5jdXJ2aW5lc3MgKyBcIlxcblwiICtcbiAgICAgICAgICAgICdmcm9tRW5kU2VnbWVudExlbmd0aDogJyArIE1hdGgucm91bmQob2JqLmZyb21FbmRTZWdtZW50TGVuZ3RoKSArIFwiXFxuXCIgK1xuICAgICAgICAgICAgJ3RvRW5kU2VnbWVudExlbmd0aDogJyArIE1hdGgucm91bmQob2JqLnRvRW5kU2VnbWVudExlbmd0aCkgKyBcIlxcblwiICtcbiAgICAgICAgICAgICdzYW1lTm9kZXNMaW5rUG9zaXRpb246ICcgKyBzbnBvcy5pbmRleCArICcgb2YgJyArIHNucG9zLmNvdW50ICsgXCJcXG5cIiArXG4gICAgICAgIC8vKyAnZ2VvbWV0cnk6ICcgKyBvYmouZ2VvbWV0cnkgKyBcIlxcblwiICtcbiAgICAgICAgICAgICdnZXRMaW5rU3Ryb2tlV2lkdGg6ICcgKyBtYXAuZ2V0TGF5b3V0cygpLmdldExpbmtTdHJva2VXaWR0aChvYmopICsgXCJcXG5cIjtcbiAgICB9XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgLy8gTkI6IHRoZXNlIGFyZSBoZXJlIGJlY2F1c2UgdGhleSBhcmUgYWJvdXQgY29sb3JzOyBcbiAgICAvLyBzaW1pbGFyIGZ1bmN0aW9ucyB0aGF0IGFyZSBzY2FsZS1yZWxhdGVkIGFyZSBpbiBsYXlvdXRzLmpzLi4uXG4gICAgZnVuY3Rpb24gZ2V0R3JvdXBTZWxlY3Rpb25TdHJva2Uob2JqKSB7XG4gICAgICAgIGlmIChvYmouaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luUEVkaXRvck1vZGUoKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JQO1xuICAgICAgICAgICAgZWxzZSBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5ERWRpdG9yTW9kZSgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvckQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiI0MwQ0REQ1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiI0MwQ0REQ1wiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gT0ssIHRoaXMgaXNuJ3QgYWJvdXQgY29sb3JzLCBidXQgaXQgd2FudHMgdG8gYmUgbmVhciB0aGUgb25lIGFib3ZlLi4uXG4gICAgZnVuY3Rpb24gZ2V0R3JvdXBTZWxlY3Rpb25TdHJva2VXaWR0aChvYmopIHtcbiAgICAgICAgcmV0dXJuIChvYmouaXNTZWxlY3RlZCA/IDUgOiAzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRSTGlua1NlbGVjdGlvblN0cm9rZShvYmopIHtcbiAgICAgICAgaWYgKG9iai5pc1NlbGVjdGVkIHx8IG9iaiA9PSBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJMaW5rKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sb3JSOyAvLyBUT0RPOiBjYW4gUCBsaW5rcyBiZSBzZWxlY3RlZD9cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcIiMwMDBcIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvLyBjYWxsYmFja3MgdG8gZGV0ZXJtaW5lIHdoZW4gdGhlIGNvcm5lcnMgc2hvdWxkIGJlIHZpc2libGVcblxuICAgIGZ1bmN0aW9uIHNob3dEQ29ybmVyKGdyb3VwKSB7XG4gICAgICAgIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNERWRpdG9yVGhpbmcoZ3JvdXApKSB7IC8vIG1hcmsgZGlzdGluY3Rpb24gdGhpbmdcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luUE9yREVkaXRvck1vZGUoKSkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGluIFAvRCBlZGl0b3IgbW9kZVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKG1hcC5nZXRQcmVzZW50ZXIoKS5pc0NyZWF0aW5nVGh1bWJuYWlsKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgY2FwdHVyaW5nIHRodW1ibmFpbFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIChncm91cCA9PSBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCkgfHwgLy8gc2hvdyBjb3JuZXJzIG9uIG1vdXNlb3ZlclxuICAgICAgICAgICAgICAgICgkc2NvcGUuaXNUb3VjaERldmljZSgpICYmIGdyb3VwLmlzU2VsZWN0ZWQpIHx8XG4gICAgICAgICAgICAgICAgKGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZVNpc3RlcnNPZihncm91cCwgZmFsc2UpICYmIC8vIGRyYWcgdG8gRCAobWFrZSBpdCBzaXN0ZXJzKVxuICAgICAgICAgICAgICAgICAgICAobWFwLmdldFVpKCkuZHJhZ1RhcmdldFBvc2l0aW9uID09PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5ub3REcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YoZ3JvdXApKSk7IC8vIG5vdCBzaG93aW5nIGRyYWcgYWJvdmUvYmVsb3cgaW5kaWNhdG9yc1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd1NDb3JuZXIoZ3JvdXApIHtcbiAgICAgICAgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luUE9yREVkaXRvck1vZGUoKSkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGluIFAvRCBlZGl0b3IgbW9kZVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKG1hcC5nZXRQcmVzZW50ZXIoKS5pc0NyZWF0aW5nVGh1bWJuYWlsKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgY2FwdHVyaW5nIHRodW1ibmFpbFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIChncm91cCA9PSBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCkgfHwgLy8gc2hvdyBjb3JuZXJzIG9uIG1vdXNlb3ZlclxuICAgICAgICAgICAgICAgICgkc2NvcGUuaXNUb3VjaERldmljZSgpICYmIGdyb3VwLmlzU2VsZWN0ZWQpIHx8XG4gICAgICAgICAgICAgICAgKGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZUNoaWxkcmVuT2YoZ3JvdXAsIGZhbHNlKSAmJiAvLyBkcmFnIHRvIFMgKG1ha2UgaXQgY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgICAgIChtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0UG9zaXRpb24gPT09IG51bGwgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbm5vdERyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihncm91cCkpKTsgLy8gbm90IHNob3dpbmcgZHJhZyBhYm92ZS9iZWxvdyBpbmRpY2F0b3JzXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93UkNvcm5lcihncm91cCkge1xuICAgICAgICBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgaW4gUC9EIGVkaXRvciBtb2RlXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFByZXNlbnRlcigpLmlzQ3JlYXRpbmdUaHVtYm5haWwpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBjYXB0dXJpbmcgdGh1bWJuYWlsXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZ3JvdXAgPT0gbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXAgfHxcbiAgICAgICAgICAgICAgICAoJHNjb3BlLmlzVG91Y2hEZXZpY2UoKSAmJiBncm91cC5pc1NlbGVjdGVkKTsgLy8gc2hvdyBjb3JuZXJzIG9uIG1vdXNlb3ZlclxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd1BDb3JuZXIoZ3JvdXApIHtcbiAgICAgICAgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc1BFZGl0b3JQb2ludChncm91cCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBtYXJrIHBlcnNwZWN0aXZlIHBvaW50XG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgaW4gUC9EIGVkaXRvciBtb2RlXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFByZXNlbnRlcigpLmlzQ3JlYXRpbmdUaHVtYm5haWwpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBjYXB0dXJpbmcgdGh1bWJuYWlsXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZ3JvdXAgPT0gbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXAgfHxcbiAgICAgICAgICAgICAgICAoJHNjb3BlLmlzVG91Y2hEZXZpY2UoKSAmJiBncm91cC5pc1NlbGVjdGVkKTsgLy8gc2hvdyBjb3JuZXJzIG9uIG1vdXNlb3ZlclxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gd2hlbiBhIFAgbGluayBzaG91bGQgYmUgdmlzaWJsZVxuXG4gICAgdGhpcy5zaG93UExpbmsgPSBmdW5jdGlvbiAobGluaykge1xuICAgICAgICB2YXIgbW9kZSA9IG1hcC5nZXRVaSgpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5wZXJzcGVjdGl2ZU1vZGU7XG4gICAgICAgIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNQRWRpdG9yUG9pbnQobGluay5mcm9tTm9kZSkpIHsgLy8gc2hvdyBQJ3Mgd2hlbiB0aGlzIGxpbmsgaXMgZnJvbSB0aGUgY3VycmVudCBQb2ludFxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgUCdzIGZvciBub24tUG9pbnQgdGhpbmdzLCBldmVuIG9uIG1vdXNlb3ZlclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIChtb2RlID09ICdsaW5lcycgfHwgbW9kZSA9PSAnYm90aCcpICYmIChsaW5rLmZyb21Ob2RlID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwIHx8IG1hcC5wSXNFeHBhbmRlZChsaW5rLmZyb21Ob2RlKSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5zaG93UERvdCA9IGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBtYXAuZ2V0VWkoKS5nZXRNYXBFZGl0b3JPcHRpb25zKCkucGVyc3BlY3RpdmVNb2RlICE9ICdib3RoJztcbiAgICB9O1xuXG4gICAgLy8gdGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIGluIHR3byBtb2RlczpcbiAgICAvLyAxLiB3aXRoIGlzRHJvcHBpbmcgPT0gZmFsc2UsIHRvIGhpZ2hsaWdodCBkcm9wIHRhcmdldHMgYmFzZWQgb24gbWFwLmdldFVpKCkuZHJhZ1RhcmdldEdyb3VwIGFuZCBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0UG9zaXRpb24sXG4gICAgLy8gICAgd2hpY2ggYXJlIHNldCBvbiBtb3VzZURyYWdFbnRlci9tb3VzZURyYWdsZWF2ZVxuICAgIC8vIDIuIHdpdGggaXNEcm9wcGluZyA9PSB0cnVlLCBvbiBkcm9wLCB3aGVuIHRoZSBhYm92ZSBpbmRpY2F0b3JzIGhhdmUgZ29uZSBhd2F5LCBidXQgd2Uga25vdyB3aGF0IHRoZSBkcm9wcGVkXG4gICAgLy8gICAgYW5kIHRhcmdldCBncm91cHMgYXJlLCBhbmQgd2Ugd2FudCB0byBrbm93IHdoYXQgdGhlIGRyb3Agc2hvdWxkIGRvLlxuXG4gICAgZnVuY3Rpb24gY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lU2lzdGVyc09mKGdyb3VwLCBpc0Ryb3BwaW5nKSB7XG4gICAgICAgIHJldHVybiAoZ3JvdXAgPT0gbWFwLmdldFVpKCkuZHJhZ1RhcmdldEdyb3VwIHx8IGlzRHJvcHBpbmcpICYmXG4gICAgICAgICAgICBtYXAudGhpbmdzU2VsZWN0ZWRBcmVEZXNjZW5kYW50c09mKGdyb3VwKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVDaGlsZHJlbk9mKGdyb3VwLCBpc0Ryb3BwaW5nKSB7XG4gICAgICAgIHJldHVybiAoZ3JvdXAgPT0gbWFwLmdldFVpKCkuZHJhZ1RhcmdldEdyb3VwIHx8IGlzRHJvcHBpbmcpICYmXG4gICAgICAgICAgICAhbWFwLnRoaW5nc1NlbGVjdGVkSW5jbHVkZVNsaWRlKCkgJiZcbiAgICAgICAgICAgICFtYXAudGhpbmdzU2VsZWN0ZWRBcmVEZXNjZW5kYW50c09mKGdyb3VwKTtcbiAgICB9XG5cbiAgICAvLyBzaWRlIGlzIG1hcC5MRUZUIG9yIG1hcC5SSUdIVFxuICAgIGZ1bmN0aW9uIGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZih0YXJnZXRHcm91cCwgc2lkZSwgaXNEcm9wcGluZykge1xuICAgICAgICAvLyBtdXN0IGJlIGRyYWdnaW5nIHNpbmdsZSBncm91cFxuICAgICAgICB2YXIgZHJhZ2dlZEdyb3VwID0gbWFwLmdldFVuaXF1ZVRoaW5nU2VsZWN0ZWQoKTtcbiAgICAgICAgaWYgKCFkcmFnZ2VkR3JvdXApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRyYWdnZWQgYW5kIHRhcmdldCBtdXN0IGJlIFNpc3RlcnMgaW4gaW52ZW50b3J5IGxheW91dFxuICAgICAgICByZXR1cm4gKHRhcmdldEdyb3VwID09IG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRHcm91cCB8fCBpc0Ryb3BwaW5nKSAmJlxuICAgICAgICAgICAgKG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbiA9PSBzaWRlIHx8IGlzRHJvcHBpbmcpICYmXG4gICAgICAgICAgICBtYXAuZ2V0TGF5b3V0cygpLmFyZVNpc3RlcnNJbkludmVudG9yeUxheW91dChkcmFnZ2VkR3JvdXAsIHRhcmdldEdyb3VwKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5ub3REcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YodGFyZ2V0R3JvdXApIHtcbiAgICAgICAgcmV0dXJuICFjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YodGFyZ2V0R3JvdXAsIG1hcC5MRUZUKSAmJlxuICAgICAgICAgICAgIWNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZih0YXJnZXRHcm91cCwgbWFwLlJJR0hUKTtcbiAgICB9XG5cbiAgICAvLyBoYW5kbGUgZHJvcCBvbiBvbmUgb2YgdGhlIHRocmVlIHRhcmdldCByZWdpb25zICh0b3AsIG1pZGRsZSwgYm90dG9tKVxuICAgIC8vIHNpZGUgaXMgbWFwLkxFRlQgb3IgbWFwLlJJR0hUXG4gICAgZnVuY3Rpb24gaGFuZGxlR3JvdXBNb3VzZURyb3AoZXZlbnQsIGRyb3BUYXJnZXQsIHNpZGUpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZHJhZ0Fib3ZlVGFyZ2V0Lm1vdXNlRHJvcCwgdGFyZ2V0OiAnICsgZHJvcFRhcmdldCArICcsIHBhcnQ6ICcgKyBkcm9wVGFyZ2V0IC5wYXJ0ICsgJywgc2hvdzogJyArIHNob3cpO1xuICAgICAgICBpZiAoc2lkZSAhPT0gbnVsbCAmJiBjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YoZHJvcFRhcmdldC5wYXJ0LCBzaWRlLCB0cnVlKSkge1xuICAgICAgICAgICAgbWFwLmFkZFNlbGVjdGVkVGhpbmdBc09yZGVyZWRTaXN0ZXJPZihkcm9wVGFyZ2V0LnBhcnQsIHNpZGUpO1xuICAgICAgICB9IGVsc2UgaWYgKGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZVNpc3RlcnNPZihkcm9wVGFyZ2V0LnBhcnQsIHRydWUpKSB7XG4gICAgICAgICAgICBtYXAuYWRkU2VsZWN0ZWRUaGluZ3NBc1Npc3RlcnNPZihkcm9wVGFyZ2V0LnBhcnQpO1xuICAgICAgICB9IGVsc2UgaWYgKGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZUNoaWxkcmVuT2YoZHJvcFRhcmdldC5wYXJ0LCB0cnVlKSkge1xuICAgICAgICAgICAgbWFwLmFkZFNlbGVjdGVkVGhpbmdzQXNDaGlsZHJlbk9mKGRyb3BUYXJnZXQucGFydCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB3aGVuIHRvIHNob3cgdGhlIFItdGhpbmcga25vYiBvbiBhIGxpbmtcbiAgICBmdW5jdGlvbiBzaG93S25vYihsaW5rKSB7XG4gICAgICAgIHJldHVybiBsaW5rID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckxpbms7XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLSBjb21wb25lbnRzIGZvciBtYWluIGdyb3VwIHRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgZnVuY3Rpb24gZEZsYWdNYXJrZXIoKSB7XG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSxcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdmaWxsJywgJycsIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmRhdGEuZGZsYWcgPyAnIzAwMCcgOiBudWxsO1xuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiZGZsYWdcIixcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxOCwgMTgpLFxuICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBnby5HZW9tZXRyeS5wYXJzZShcIkYgTTAgMSBMMCAxOCBMMTggMCBMMSAwelwiLCB0cnVlKSxcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXCJEXCIgY29ybmVyICh0b3AgbGVmdCwgcmVkKVxuICAgIGZ1bmN0aW9uIGNvcm5lckQoKSB7XG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChzaG93RENvcm5lcihvYmopID8gMSA6IDApO1xuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiY29ybmVyRFwiLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUwLCA1MCksXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNTAsIDUwKSxcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGIE0wIDEgTDAgNTAgTDUwIDAgTDEgMHpcIiwgdHJ1ZSksXG4gICAgICAgICAgICAgICAgZmlsbDogY29sb3JELFxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY2xpY2ssIGNvbnRyb2w6JyArIGV2ZW50LmNvbnRyb2wgKyAnLCBhbHQ6JyArIGV2ZW50LmFsdCArICcsIG1ldGE6JyArIGV2ZW50Lm1ldGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuYWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOQjogYSBzaWRlIGVmZmVjdCBvZiB0aGlzIHdpbGwgYmUgdG8gc2VsZWN0IGp1c3QgdGhpcyBncm91cCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoaWNoIHdvdWxkIG5vdCBoYXBwZW4gb3RoZXJ3aXNlIHZpYSBjb250cm9sLWNsaWNrXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuc2V0REVkaXRvclRoaW5nKHRhcmdldC5wYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5oYW5kbGVDb3JuZXJDbGljayhcIkRcIiwgdGFyZ2V0LnBhcnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NvbnRleHRDbGljazonICsgZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBtYXAudG9nZ2xlREZsYWcodGFyZ2V0LnBhcnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogXCJEXCIsXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBcIndoaXRlXCIsXG4gICAgICAgICAgICAgICAgZm9udDogJzlweCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDEyLCAxNSksXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBcIlNcIiBjb3JuZXIgKGJvdHRvbSBsZWZ0LCBncmVlbilcbiAgICBmdW5jdGlvbiBjb3JuZXJTKCkge1xuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLFxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiAoc2hvd1NDb3JuZXIob2JqKSA/IDEgOiAwKTtcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvcm5lclNcIixcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDUwKSxcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNTAsIDUwKSxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1MCwgNTApLFxuICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBnby5HZW9tZXRyeS5wYXJzZShcIkYgTTAgMCBMMCA0OSBMMSA1MCBMNTAgNTB6XCIsIHRydWUpLFxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUyxcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLmhhbmRsZUNvcm5lckNsaWNrKFwiU1wiLCB0YXJnZXQucGFydCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAvLyBleHBhbnNpb24gaW5kaWNhdG9yXG4gICAgICAgICAgICBtayhnby5TaGFwZSxcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygncG9zaXRpb24nLCAnJywgZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG9iai5pc1N1YkdyYXBoRXhwYW5kZWQgPyBuZXcgZ28uUG9pbnQoNCwgNDMpIDogbmV3IGdvLlBvaW50KDUsIDM4KSk7XG4gICAgICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnYW5nbGUnLCAnJywgZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG9iai5pc1N1YkdyYXBoRXhwYW5kZWQgPyA5MCA6IDApO1xuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUsIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRiBNMCAwIEw1IDUgTDAgMTB6XCIsIHRydWUpLFxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBcIiMzMzNcIixcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlNcIixcbiAgICAgICAgICAgICAgICBzdHJva2U6IFwid2hpdGVcIixcbiAgICAgICAgICAgICAgICBmb250OiAnOXB4IHNhbnMtc2VyaWYnLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMTIsIDI4KSxcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIHNob3cgb25seSB3aGVuIHN5c3RlbSBpcyBjb2xsYXBzZWRcbiAgICBmdW5jdGlvbiBzQ29sbGFwc2VkTWFya2VyKCkge1xuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFzaG93U0Nvcm5lcihvYmopICYmIG9iai5tZW1iZXJQYXJ0cy5jb3VudCA+IDAgJiYgIW9iai5pc1N1YkdyYXBoRXhwYW5kZWQ7XG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg1LCA4OCksXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUsIDEwKSxcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGIE0wIDAgTDUgNSBMMCAxMHpcIiwgdHJ1ZSksXG4gICAgICAgICAgICAgICAgZmlsbDogJyMzMzMnLFxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gXCJSXCIgY29ybmVyIChib3R0b20gcmlnaHQsIGJsdWUpXG4gICAgZnVuY3Rpb24gY29ybmVyUigpIHtcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dSQ29ybmVyKG9iaikgPyAxIDogMCk7XG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJjb3JuZXJSXCIsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMTAwLCAxMDApLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiY29ybmVyUlNoYXBlXCIsXG4gICAgICAgICAgICAgICAgLy8gTkI6IHRoaXMgY29ybmVyIGlzIGRvbmUgZGlmZmVyZW50bHkgZnJvbSB0aGUgb3RoZXJzOlxuICAgICAgICAgICAgICAgIC8vIDEuIHRoZSBvdmVyYWxsIHNoYXBlIGlzIHRoZSBzaXplIG9mIHRoZSB3aG9sZSBzcXVhcmUsIHNvIHRoZSBwb3J0IGZhbGxzIGluIHRoZSBtaWRkbGUgaW5zdGVhZCBvZiB0aGUgY29ybmVyO1xuICAgICAgICAgICAgICAgIC8vIDIuIHRoZSBnZW9tZXRyeSB0cmFjZXMgYXJvdW5kIHRoZSBlZGdlcyBvZiB0aGUgd2hvbGUgc3F1YXJlLCBiZWNhdXNlIG90aGVyd2lzZSB0aGUgbGluayBsaW5lIHdpbGxcbiAgICAgICAgICAgICAgICAvLyAgICBzaG93IGluc2lkZSB0aGUgbWFpbiBzcXVhcmUgaWYgaXQncyBjcm9zc2luZyBvbmUgb2YgdGhlIG90aGVyIDMgcXVhZHJhbnRzIFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDEwMCwgMTAwKSxcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIk0wIDAgTDAgMTAwIFwiICsgLy8gdG9wIGxlZnQgdG8gYm90dG9tIGxlZnRcbiAgICAgICAgICAgICAgICAgICAgXCJMOTkgMTAwIEwxMDAgOTkgTCAxMDAgMCBcIiArIC8vIGJvdHRvbS9yaWdodCBzaWRlcyAocm91bmQgYm90dG9tIHJpZ2h0IGNvcm5lcilcbiAgICAgICAgICAgICAgICAgICAgXCJMIDAgMCBMIDEwMCAwIFwiICsgLy8gYmFjayB0byB0b3AgbGVmdCB0aGVuIHRvcCByaWdodFxuICAgICAgICAgICAgICAgICAgICBcIkwgMTAwIDUwIEwgNTAgMTAwIFwiICsgLy8gdG8gbWlkcG9pbnQgb2YgcmlnaHQgc2lkZSwgbWlkcG9pbnQgb2YgYm90dG9tIHNpZGVcbiAgICAgICAgICAgICAgICAgICAgXCJMMCAxMDB6XCIsIC8vIGJvdHRvbSBsZWZ0LCByZXR1cm4gaG9tZVxuICAgICAgICAgICAgICAgICAgICB0cnVlKSxcbiAgICAgICAgICAgICAgICBmaWxsOiBjb2xvclIsXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuXG4gICAgICAgICAgICAgICAgcG9ydElkOiBcIlJcIixcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlU2VsZk5vZGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGZyb21MaW5rYWJsZUR1cGxpY2F0ZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlU2VsZk5vZGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5oYW5kbGVDb3JuZXJDbGljayhcIlJcIiwgdGFyZ2V0LnBhcnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogXCJSXCIsXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBcIndoaXRlXCIsXG4gICAgICAgICAgICAgICAgZm9udDogJzlweCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg4MiwgNzgpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdHRhY2htZW50UGFwZXJDbGlwKCkge1xuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5kYXRhLmF0dGFjaG1lbnRzICE9PSBudWxsICYmIG9iai5kYXRhLmF0dGFjaG1lbnRzICE9PSB1bmRlZmluZWQgJiYgb2JqLmRhdGEuYXR0YWNobWVudHMubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnZ2VvbWV0cnknLCAnJywgZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBnby5HZW9tZXRyeS5wYXJzZShwYXBlcmNsaXBTdmdQYXRoLCB0cnVlKTtcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnZGVzaXJlZFNpemUnLCAnJywgZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZ28uU2l6ZSg1MTIsIDUxMik7IC8vIE5COiB0aGUgdHdvIGljb25zIGRvbid0IHNjYWxlIHRvIHRoZSBzYW1lIHByb3BvcnRpb25zIGZvciBzb21lIHJlYXNvbiAtID8/XG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg0NiwgODUpLFxuICAgICAgICAgICAgICAgIHNjYWxlOiAwLjAyLFxuICAgICAgICAgICAgICAgIHN0cm9rZTogJyMwMDAnLFxuICAgICAgICAgICAgICAgIGZpbGw6ICcjMDAwJyxcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY2xpcCBjbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLnRvZ2dsZVRhYihtYXAuZ2V0VWkoKS5UQUJfSURfQVRUQUNITUVOVFMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcEV5ZWJhbGwoKSB7XG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSxcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFwLmdldFBlcnNwZWN0aXZlcygpLmlzUGVyc3BlY3RpdmVQb2ludChvYmopO1xuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdnZW9tZXRyeScsICcnLCBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdvLkdlb21ldHJ5LnBhcnNlKG1hcC5wSXNFeHBhbmRlZChvYmopID8gZXllU3ZnUGF0aCA6IGV5ZUJsb2NrZWRTdmdQYXRoLCB0cnVlKTtcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnZGVzaXJlZFNpemUnLCAnJywgZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZ28uU2l6ZSg1MTIsIG1hcC5wSXNFeHBhbmRlZChvYmopID8gNDQwIDogNTEyKTsgLy8gTkI6IHRoZSB0d28gaWNvbnMgZG9uJ3Qgc2NhbGUgdG8gdGhlIHNhbWUgcHJvcG9ydGlvbnMgZm9yIHNvbWUgcmVhc29uIC0gPz9cbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDg3LCA0KSxcbiAgICAgICAgICAgICAgICBzY2FsZTogMC4wMixcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwJyxcbiAgICAgICAgICAgICAgICBmaWxsOiAnIzAwMCcsXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFAgZXhwYW5zaW9uIGluZGljYXRvciAtIHRoaXMgc2hvd3Mgd2hlbiB0aGUgUCBjb3JuZXIgaXMgbm90IHZpc2libGUsIGFuZCBvbmx5IGlmIHRoZSB0aGluZyBpcyBhIHBlcnNwZWN0aXZlIHBvaW50XG4gICAgZnVuY3Rpb24gcG9pbnRNYXJrZXIoKSB7XG4gICAgICAgIHJldHVybiBwRXllYmFsbCgpO1xuICAgIH1cblxuICAgIC8vIFAgdmlldyBpbmRpY2F0b3JcbiAgICBmdW5jdGlvbiB2aWV3TWFya2VyKCkge1xuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsIFwiQm9yZGVyXCIsXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2ZpbGwnLCAnJywgZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRWaWV3TWFya2VyRmlsbChvYmopO1xuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxOCxcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRWaWV3TWFya2VyRmlsbChvYmopIHtcbiAgICAgICAgdmFyIHdlaWdodCA9IG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5nZXRQZXJzcGVjdGl2ZVZpZXdXZWlnaHQob2JqKTtcblxuICAgICAgICBpZiAod2VpZ2h0ID09IDMpIHtcbiAgICAgICAgICAgIHJldHVybiBjb2xvclBEYXJrO1xuICAgICAgICB9IGVsc2UgaWYgKHdlaWdodCA9PSAyKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sb3JQO1xuICAgICAgICB9IGVsc2UgaWYgKHdlaWdodCA9PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sb3JQTGlnaHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJ0cmFuc3BhcmVudFwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXCJQXCIgY29ybmVyICh0b3AgcmlnaHQsIG9yYW5nZSlcbiAgICBmdW5jdGlvbiBjb3JuZXJQKCkge1xuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLFxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiAoc2hvd1BDb3JuZXIob2JqKSA/IDEgOiAwKTtcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvcm5lclBcIixcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJjb3JuZXJQU2hhcGVcIixcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXG4gICAgICAgICAgICAgICAgLy8gTkI6IHRoaXMgZ2VvbWV0cnkgY292ZXJzIHRoZSB3aG9sZSBzcXVhcmU7IHNlZSBub3RlIGFib3ZlIGZvciBjb3JuZXJSXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRlwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJNMCAwIEwwIDEwMCBMMTAwIDEwMFwiICsgLy8gdG9wIGxlZnQgdG8gYm90dG9tIGxlZnQgdG8gYm90dG9tIHJpZ2h0XG4gICAgICAgICAgICAgICAgICAgIFwiTDEwMCAxIEw5OSAwIEwwIDBcIiArIC8vIHJpZ2h0L3RvcCBzaWRlcyAocm91bmQgdG9wIHJpZ2h0IGNvcm5lcilcbiAgICAgICAgICAgICAgICAgICAgXCJMIDUwIDAgTCAxMDAgNTAgXCIgKyAvLyB0byBtaWRwb2ludCBvZiB0b3Agc2lkZSwgbWlkcG9pbnQgb2YgcmlnaHQgc2lkZVxuICAgICAgICAgICAgICAgICAgICBcIkwxMDAgMTAwIDAgMTAwelwiLCAvLyBib3R0b20gcmlnaHQsIGJvdHRvbSBsZWZ0LCByZXR1cm4gaG9tZVxuICAgICAgICAgICAgICAgICAgICB0cnVlKSxcblxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUCxcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG5cbiAgICAgICAgICAgICAgICBwb3J0SWQ6IFwiUFwiLFxuICAgICAgICAgICAgICAgIGZyb21MaW5rYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlRHVwbGljYXRlczogZmFsc2UsXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlU2VsZk5vZGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVEdXBsaWNhdGVzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0b01heExpbmtzOiAxLFxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5oYW5kbGVDb3JuZXJDbGljayhcIlBcIiwgdGFyZ2V0LnBhcnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgcEV5ZWJhbGwoKSwgLy8gUCBleHBhbnNpb24gaW5kaWNhdG9yXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlBcIixcbiAgICAgICAgICAgICAgICBzdHJva2U6IFwid2hpdGVcIixcbiAgICAgICAgICAgICAgICBmb250OiAnOXB4IHNhbnMtc2VyaWYnLFxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDgxLCAxNSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1haW5Cb3JkZXIoKSB7XG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSwgXCJCb3JkZXJcIixcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgZ2V0R3JvdXBTZWxlY3Rpb25TdHJva2UpLm9mT2JqZWN0KCksXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc3Ryb2tlV2lkdGgnLCAnJywgZ2V0R3JvdXBTZWxlY3Rpb25TdHJva2VXaWR0aCkub2ZPYmplY3QoKSwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwibWFpbmFyZWFcIixcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXG4gICAgICAgICAgICAgICAgZmlsbDogbnVsbCxcbiAgICAgICAgICAgICAgICAvL3BvcnRJZDogXCJcIixcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxuICAgICAgICAgICAgICAgIGZyb21MaW5rYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlRHVwbGljYXRlczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZUR1cGxpY2F0ZXM6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tIGhhbmRsZXJzIGZvciBtb3VzZSBkcmFnL2Ryb3AgYWN0aW9ucyBvbiBncm91cHMsIHdoaWNoIG5lZWQgdG8gYmUgcmVwbGljYXRlZCBvbiBkaWZmZXJlbnQgdGFyZ2V0IHBhcnRzIC0tLS0tLS1cblxuICAgIC8vIHBvc2l0aW9uIGlzIG1hcC5MRUZULCBudWxsLCBvciBtYXAuUklHSFRcbiAgICBmdW5jdGlvbiBnZXRHcm91cE1vdXNlRHJhZ0VudGVySGFuZGxlcihwb3NpdGlvbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ21vdXNlRHJhZ0VudGVyLCBlLmRwOiAnICsgZXZlbnQuZG9jdW1lbnRQb2ludCArICcsIHRhcmdldC5wYXJ0OiAnICsgdGFyZ2V0LnBhcnQgKyAnLCB0YXJnZXQgYm91bmRzOiAnICsgdGFyZ2V0LmFjdHVhbEJvdW5kcyk7XG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgPSB0YXJnZXQucGFydDtcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHZhciBncm91cE1vdXNlRHJhZ0xlYXZlSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0LCBvYmoyKSB7XG4gICAgICAgIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRHcm91cCA9IG51bGw7XG4gICAgICAgIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbiA9IG51bGw7XG4gICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0R3JvdXBNb3VzZURyb3BIYW5kbGVyKHBvc2l0aW9uKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQsIGRyb3BUYXJnZXQpIHtcbiAgICAgICAgICAgIGhhbmRsZUdyb3VwTW91c2VEcm9wKGV2ZW50LCBkcm9wVGFyZ2V0LCBwb3NpdGlvbik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGdyb3VwQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgLy8gaGFuZGxlIHNpbmdsZSBvciBkb3VibGUgY2xpY2tcbiAgICAgICAgbWFwLmdldFVpKCkuaGFuZGxlQ29ybmVyQ2xpY2soXCJcIiwgdGFyZ2V0KTtcbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIHRhcmdldHMgZm9yIGRyYWdnaW5nIHRvIEQgb3IgUyAtLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgZnVuY3Rpb24gZHJhZ0Fib3ZlVGFyZ2V0KCkge1xuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLCB7XG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNSxcbiAgICAgICAgICAgIHdpZHRoOiAxMDAsXG4gICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIobWFwLkxFRlQpLFxuICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6IGdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyLFxuICAgICAgICAgICAgbW91c2VEcm9wOiBnZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIobWFwLkxFRlQpLFxuICAgICAgICAgICAgY2xpY2s6IGdyb3VwQ2xpY2tIYW5kbGVyXG4gICAgICAgIH0sXG4gICAgICAgICAgICAvLyBkcmFnIHRhcmdldCByZWdpb25cbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1LFxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXG4gICAgICAgICAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50J1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAvLyBkcmFnIGluZGljYXRvciBiYXJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIkJvcmRlclwiLFxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihvYmoucGFydCwgbWFwLkxFRlQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJyMwMDAnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZHJhZ0ludG9UYXJnZXQoKSB7XG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMjUpLFxuICAgICAgICAgICAgaGVpZ2h0OiA1MCxcbiAgICAgICAgICAgIHdpZHRoOiAxMDAsXG4gICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIobnVsbCksXG4gICAgICAgICAgICBtb3VzZURyYWdMZWF2ZTogZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIsXG4gICAgICAgICAgICBtb3VzZURyb3A6IGdldEdyb3VwTW91c2VEcm9wSGFuZGxlcihudWxsKSxcbiAgICAgICAgICAgIGNsaWNrOiBncm91cENsaWNrSGFuZGxlclxuICAgICAgICB9LFxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiUmVjdGFuZ2xlXCIsIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgICAgIGhlaWdodDogNTAsXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcbiAgICAgICAgICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkcmFnQmVsb3dUYXJnZXQoKSB7XG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgNzUpLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNSxcbiAgICAgICAgICAgIHdpZHRoOiAxMDAsXG4gICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIobWFwLlJJR0hUKSxcbiAgICAgICAgICAgIG1vdXNlRHJhZ0xlYXZlOiBncm91cE1vdXNlRHJhZ0xlYXZlSGFuZGxlcixcbiAgICAgICAgICAgIG1vdXNlRHJvcDogZ2V0R3JvdXBNb3VzZURyb3BIYW5kbGVyKG1hcC5SSUdIVCksXG4gICAgICAgICAgICBjbGljazogZ3JvdXBDbGlja0hhbmRsZXJcbiAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIGRyYWcgdGFyZ2V0IHJlZ2lvblxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiUmVjdGFuZ2xlXCIsIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgICAgIGhlaWdodDogMjUsXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcbiAgICAgICAgICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIC8vIGRyYWcgaW5kaWNhdG9yIGJhclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiQm9yZGVyXCIsXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKG9iai5wYXJ0LCBtYXAuUklHSFQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMTUpLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6ICcjMDAwJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFJldHVybnMgdGhlIFRleHRCbG9jayBmb3IgdGhlIGdyb3VwIHRpdGxlLCBmb3IgdXNlIGluIHRoZSBtYWluIGdyb3VwIHRlbXBsYXRlLCBpbnNpZGUgdGhlIGJveC5cbiAgICBmdW5jdGlvbiBncm91cEludGVybmFsVGV4dEJsb2NrKCkge1xuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLkhvcml6b250YWwsIHtcbiAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5MZWZ0LFxuICAgICAgICAgICAgYWxpZ25tZW50Rm9jdXM6IGdvLlNwb3QuUmlnaHQsXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIC01MCksXG4gICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMTAwLCAxMDApXG4gICAgICAgIH0sXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogODAsXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxMCxcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuTGVmdCxcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnRGb2N1czogZ28uU3BvdC5SaWdodCxcbiAgICAgICAgICAgICAgICAvL2FsaWdubWVudDogZ28uU3BvdC5DZW50ZXIsXG4gICAgICAgICAgICAgICAgLy90ZXh0QWxpZ246ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCIsXG4gICAgICAgICAgICAgICAgZm9udDogJzE0cHggc2Fucy1zZXJpZicsXG4gICAgICAgICAgICAgICAgaXNNdWx0aWxpbmU6IHRydWUsXG4gICAgICAgICAgICAgICAgd3JhcDogZ28uVGV4dEJsb2NrLldyYXBEZXNpcmVkU2l6ZSxcbiAgICAgICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIobnVsbCksXG4gICAgICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6IGdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyLFxuICAgICAgICAgICAgICAgIG1vdXNlRHJvcDogZ2V0R3JvdXBNb3VzZURyb3BIYW5kbGVyKG51bGwpLFxuICAgICAgICAgICAgICAgIGNsaWNrOiBncm91cENsaWNrSGFuZGxlcixcbiAgICAgICAgICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGdyb3VwSW5mbyh0YXJnZXQucGFydCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInRleHRcIiwgXCJ0ZXh0XCIpLm1ha2VUd29XYXkoKSxcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInZpc2libGVcIiwgXCJcIiwgZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFsd2F5cyBzaG93IHRleHQgaW5zaWRlIGJveCBmb3IgUi10aGluZ3MsIGJlY2F1c2UgZXh0ZXJuYWwgdGV4dCB3aWxsIHRocm93IG9mZiBsYXlvdXRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcC5nZXRMYXlvdXRzKCkuaXNOb3RXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0TGF5b3V0cygpLmlzUlRoaW5nV2l0aGluSW52ZW50b3J5TGF5b3V0KGdyb3VwKTtcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJucyBhIFRleHRCbG9jayBmb3IgdGhlIGdyb3VwIHRpdGxlLCBmb3IgdXNlIGluIHRoZSBtYWluIGdyb3VwIHRlbXBsYXRlLCBvbiB0aGUgbGVmdCBvciByaWdodC5cbiAgICAvLyB2aXNpYmxlRm4gaXMgYSBjYWxsYmFjayB0byBiZSBib3VuZCB0byB0aGUgdmlzaWJpbGl0eSBhdHRyaWJ1dGUgb2YgdGhlIFRleHRCbG9jay5cbiAgICAvLyB0ZXh0QWxpZ24gaXMgJ2xlZnQnIG9yICdyaWdodCcuXG4gICAgZnVuY3Rpb24gZ3JvdXBFeHRlcm5hbFRleHRCbG9jayh2aXNpYmxlRm4sIHRleHRBbGlnbikge1xuICAgICAgICByZXR1cm4gbWsoZ28uVGV4dEJsb2NrLFxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJ0ZXh0XCIsIFwidGV4dFwiKS5tYWtlVHdvV2F5KCksXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInZpc2libGVcIiwgXCJcIiwgdmlzaWJsZUZuKS5vZk9iamVjdCgpLFxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldEV4dGVybmFsVGV4dFNjYWxlKS5vZk9iamVjdCgpLCB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2V4dGVybmFsdGV4dC0nICsgdGV4dEFsaWduLCAvLyBOQjogdGhpcyBzY3Jld3MgdXAgbGF5b3V0cyBmb3Igc29tZSByZWFzb24gLSA/P1xuICAgICAgICAgICAgICAgIHRleHRBbGlnbjogdGV4dEFsaWduLFxuICAgICAgICAgICAgICAgIG1hcmdpbjogNSxcbiAgICAgICAgICAgICAgICBmb250OiAnMTRweCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICAgICAgICBpc011bHRpbGluZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjbGljazogZ3JvdXBDbGlja0hhbmRsZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gZ3JvdXAvVGhpbmcgdGVtcGxhdGUgLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIHRoaXMuZ3JvdXBUZW1wbGF0ZSA9XG4gICAgbWsoZ28uR3JvdXAsIGdvLlBhbmVsLlZlcnRpY2FsLFxuICAgICAgICBuZXcgZ28uQmluZGluZyhcImxheW91dFwiLCBcImxheW91dFwiLCBmdW5jdGlvbiAobGF5b3V0TmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIG1hcC5nZXRMYXlvdXRzKCkuZ2V0TGF5b3V0KGxheW91dE5hbWUpO1xuICAgICAgICB9KSxcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJtb3ZhYmxlXCIsIFwiXCIsIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiAhb2JqLmlzTGlua0xhYmVsO1xuICAgICAgICB9KS5vZk9iamVjdCgpLFxuICAgICAgICBuZXcgZ28uQmluZGluZyhcImlzU3ViR3JhcGhFeHBhbmRlZFwiLCBcInNFeHBhbmRlZFwiKSxcbiAgICAgICAgLy8gZGltIHRoZSB0aGluZyBpZiBpdCdzIGJlaW5nIGRyYWdnZWQgb3ZlciBhbm90aGVyIHRoaW5nIChkcm9wIHRvIHNpc3Rlci9jaGlsZClcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIChvYmouaXNTZWxlY3RlZCAmJiBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgPyAwLjI1IDogMSk7XG4gICAgICAgIH0pLm9mT2JqZWN0KCksIHtcbiAgICAgICAgICAgIGxvY2F0aW9uT2JqZWN0TmFtZTogXCJtYWlucGFuZWxcIixcbiAgICAgICAgICAgIGxvY2F0aW9uU3BvdDogZ28uU3BvdC5Ub3BMZWZ0LFxuICAgICAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXG4gICAgICAgICAgICBpc1N1YkdyYXBoRXhwYW5kZWQ6IHRydWUsXG4gICAgICAgICAgICBsYXllck5hbWU6ICdGb3JlZ3JvdW5kJyxcbiAgICAgICAgICAgIC8vIGhpZ2hsaWdodCBjb3JuZXJzXG4gICAgICAgICAgICBtb3VzZUVudGVyOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgb2JqMikge1xuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyB1bmhpZ2hsaWdodCBjb3JuZXJzXG4gICAgICAgICAgICBtb3VzZUxlYXZlOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgb2JqMikge1xuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwID0gbnVsbDtcbiAgICAgICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjb250YWluaW5nR3JvdXBDaGFuZ2VkOiBmdW5jdGlvbihwYXJ0LCBvbGRncm91cCwgbmV3Z3JvdXApIHsgXG4gICAgICAgICAgICAvLyAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbGV2ZWwnLCBtYXAuY29tcHV0ZUxldmVsKHBhcnQpKTsgXG4gICAgICAgICAgICAvLyAgICAgLy9wYXJ0LnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7ICAgXG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIH0sXG4gICAgICAgIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Ib3Jpem9udGFsLFxuICAgICAgICAgICAgZ3JvdXBFeHRlcm5hbFRleHRCbG9jayhtYXAuZ2V0TGF5b3V0cygpLnNob3dMZWZ0VGV4dEJsb2NrLCAncmlnaHQnKSxcbiAgICAgICAgICAgIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbiwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwibWFpbnBhbmVsXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldFNjYWxlKS5vZk9iamVjdCgpLFxuICAgICAgICAgICAgICAgIC8vIGRyYWcgYXJlYVxuICAgICAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiZHJhZ2FyZWFcIixcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAsXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IHNlbGYuZ3JvdXBGaWxsQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcIm1vdmVcIixcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hvdyBkZWJ1ZyBpbmZvXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhncm91cEluZm8odGFyZ2V0LnBhcnQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgdmlld01hcmtlcigpLFxuICAgICAgICAgICAgICAgICAgICBkcmFnQWJvdmVUYXJnZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0ludG9UYXJnZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0JlbG93VGFyZ2V0KCksXG4gICAgICAgICAgICAgICAgICAgIC8vZ3JvdXBJbnRlcm5hbFRleHRCbG9jaygpLFxuICAgICAgICAgICAgICAgICAgICBjb3JuZXJEKCksXG4gICAgICAgICAgICAgICAgICAgIGRGbGFnTWFya2VyKCksXG4gICAgICAgICAgICAgICAgICAgIGNvcm5lclMoKSxcbiAgICAgICAgICAgICAgICAgICAgc0NvbGxhcHNlZE1hcmtlcigpLFxuICAgICAgICAgICAgICAgICAgICBjb3JuZXJSKCksXG4gICAgICAgICAgICAgICAgICAgIHBvaW50TWFya2VyKCksXG4gICAgICAgICAgICAgICAgICAgIGNvcm5lclAoKSxcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudFBhcGVyQ2xpcCgpLFxuICAgICAgICAgICAgICAgICAgICBtYWluQm9yZGVyKClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICBncm91cEV4dGVybmFsVGV4dEJsb2NrKG1hcC5nZXRMYXlvdXRzKCkuc2hvd1JpZ2h0VGV4dEJsb2NrLCAnbGVmdCcpXG4gICAgICAgICAgICApLFxuICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcbiAgICAgICAgICAgIHdpZHRoOiA4MCxcbiAgICAgICAgICAgIG1hcmdpbjogMTAsXG4gICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuTGVmdCxcbiAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LlJpZ2h0LFxuICAgICAgICAgICAgX2lzTm9kZUxhYmVsOiB0cnVlLFxuICAgICAgICAgICAgZWRpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAvL2FsaWdubWVudDogZ28uU3BvdC5DZW50ZXIsXG4gICAgICAgICAgICAvL3RleHRBbGlnbjogJ2NlbnRlcicsXG4gICAgICAgICAgICBjdXJzb3I6IFwibW92ZVwiLFxuICAgICAgICAgICAgZm9udDogJzE0cHggc2Fucy1zZXJpZicsXG4gICAgICAgICAgICBpc011bHRpbGluZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyYXA6IGdvLlRleHRCbG9jay5XcmFwRGVzaXJlZFNpemUsXG4gICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIobnVsbCksXG4gICAgICAgICAgICBtb3VzZURyYWdMZWF2ZTogZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIsXG4gICAgICAgICAgICBtb3VzZURyb3A6IGdldEdyb3VwTW91c2VEcm9wSGFuZGxlcihudWxsKSxcbiAgICAgICAgICAgIGNsaWNrOiBncm91cENsaWNrSGFuZGxlcixcbiAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY29udHJvbCkge1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGdyb3VwSW5mbyh0YXJnZXQucGFydCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwidGV4dFwiLCBcInRleHRcIikubWFrZVR3b1dheSgpLFxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJ2aXNpYmxlXCIsIFwiXCIsIGZ1bmN0aW9uIChncm91cCkge1xuICAgICAgICAgICAgICAgIC8vIGFsd2F5cyBzaG93IHRleHQgaW5zaWRlIGJveCBmb3IgUi10aGluZ3MsIGJlY2F1c2UgZXh0ZXJuYWwgdGV4dCB3aWxsIHRocm93IG9mZiBsYXlvdXRcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFwLmdldExheW91dHMoKS5pc05vdFdpdGhpbkludmVudG9yeUxheW91dChncm91cCkgfHxcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldExheW91dHMoKS5pc1JUaGluZ1dpdGhpbkludmVudG9yeUxheW91dChncm91cCk7XG4gICAgICAgICAgICB9KSksXG4gICAgICAgIC8vIHRoZSBwbGFjZWhvbGRlciBub3JtYWxseSBob2xkcyB0aGUgY2hpbGQgbm9kZXMsIGJ1dCB3ZSBqdXN0IHVzZSBhIGR1bW15IHBsYWNlaG9sZGVyXG4gICAgICAgIG1rKGdvLlNoYXBlLCB7XG4gICAgICAgICAgICBuYW1lOiBcInBsYWNlaG9sZGVyXCIsXG4gICAgICAgICAgICBmaWxsOiBcInRyYW5zcGFyZW50XCIsXG4gICAgICAgICAgICBzdHJva2U6IG51bGwsXG4gICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMCwgMClcbiAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gbGluayB0ZW1wbGF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIHRoaXMuc2hhcGVzID0gWyd0bycsICdmcm9tJywgJ3RvRnJvbScsICdub0Fycm93cyddXG5cbiAgICB0aGlzLmdldE5leHRSU2hhcGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBjdXJyZW50ID0gc2VsZi5fY3VycmVudFJTaGFwZTtcbiAgICAgICAgbGV0IG5leHQgPSBzZWxmLnNoYXBlc1swXTtcbiAgICAgICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgICAgICAgIGxldCBpZHggPSBzZWxmLnNoYXBlcy5pbmRleE9mKGN1cnJlbnQpICsgMTtcbiAgICAgICAgICAgIGlmIChpZHggPj0gc2VsZi5zaGFwZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWR4ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHQgPSBzZWxmLnNoYXBlc1tpZHhdO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuX2N1cnJlbnRSU2hhcGUgPSBuZXh0O1xuICAgICAgICByZXR1cm4gbmV4dDtcbiAgICB9XG5cbiAgICB0aGlzLmxpbmtUZW1wbGF0ZSA9XG4gICAgbWsoZ28uTGluaywge1xuICAgICAgICBzZWxlY3Rpb25BZG9ybmVkOiBmYWxzZSxcbiAgICAgICAgbGF5ZXJOYW1lOiAnJyxcbiAgICAgICAgLy9yb3V0aW5nOiBnby5MaW5rLk9ydGhvZ29uYWwsXG4gICAgICAgIHJlbGlua2FibGVGcm9tOiB0cnVlLFxuICAgICAgICByZWxpbmthYmxlVG86IHRydWUsXG4gICAgICAgIHNtb290aG5lc3M6IDEuMCxcbiAgICAgICAgYWRqdXN0aW5nOiBnby5MaW5rLlN0cmV0Y2gsXG4gICAgICAgIHJlc2hhcGFibGU6IHRydWUsXG4gICAgICAgIG1vdXNlRW50ZXI6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0LCBvYmoyKSB7XG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJMaW5rID0gdGFyZ2V0O1xuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xuICAgICAgICB9LFxuICAgICAgICBtb3VzZUxlYXZlOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgb2JqMikge1xuICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyTGluayA9IG51bGw7XG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG1vdXNlRHJhZ0VudGVyOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgZHJhZ09iamVjdCkge1xuICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyTGluayA9IHRhcmdldDtcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcbiAgICAgICAgfSxcbiAgICAgICAgbW91c2VEcmFnTGVhdmU6IGZ1bmN0aW9uIChldmVudCwgZHJvcFRhcmdldCwgZHJhZ09iamVjdCkge1xuICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyTGluayA9IG51bGw7XG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG1vdXNlRHJvcDogZnVuY3Rpb24gKGV2ZW50LCBkcm9wVGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBtYXAuZ2V0RGlhZ3JhbSgpLnNlbGVjdGlvbjtcbiAgICAgICAgICAgIGlmIChwYXJ0cyAmJiBwYXJ0cy5jb3VudCA9PSAxICYmIHBhcnRzLmZpcnN0KCkgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xuICAgICAgICAgICAgICAgIG1hcC5hZGRUaGluZ0FzUlRoaW5nKHBhcnRzLmZpcnN0KCksIGRyb3BUYXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIGxldCBzaGFwZSA9IHNlbGYuZ2V0TmV4dFJTaGFwZSgpO1xuICAgICAgICAgICAgbWFwLmdldFVpKCkuc2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzRGlyZWN0aW9uKHNoYXBlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZG91YmxlQ2xpY2s6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XG4gICAgICAgICAgICBtYXAuY3JlYXRlUlRoaW5nKHRhcmdldCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhsaW5rSW5mbyh0YXJnZXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwicG9pbnRzXCIpLm1ha2VUd29XYXkoKSxcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJjdXJ2aW5lc3NcIiwgXCJjdXJ2aW5lc3NcIiksXG4gICAgICAgIG1rKGdvLlNoYXBlLFxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3N0cm9rZScsICcnLCBnZXRSTGlua1NlbGVjdGlvblN0cm9rZSkub2ZPYmplY3QoKSxcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic3Ryb2tlV2lkdGhcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRMaW5rU3Ryb2tlV2lkdGgpLm9mT2JqZWN0KCksIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIkxJTktTSEFQRVwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICApLFxuICAgICAgICAvLyBzaG93IHRvL2Zyb20gYXJyb3doZWFkcyBiYXNlZCBvbiBsaW5rIFwidHlwZVwiIGF0dHJpYnV0ZVxuICAgICAgICBtayhnby5TaGFwZSwge1xuICAgICAgICAgICAgZnJvbUFycm93OiBcIkJhY2t3YXJkXCJcbiAgICAgICAgfSxcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2UpLm9mT2JqZWN0KCksXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInNjYWxlXCIsIFwiXCIsIG1hcC5nZXRMYXlvdXRzKCkuZ2V0QXJyb3doZWFkU2NhbGUpLm9mT2JqZWN0KCksXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICd0eXBlJywgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdCA9PSAnZnJvbScgfHwgdCA9PSAndG9Gcm9tJztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApLFxuICAgICAgICBtayhnby5TaGFwZSwge1xuICAgICAgICAgICAgdG9BcnJvdzogXCJTdGFuZGFyZFwiXG4gICAgICAgIH0sXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc3Ryb2tlJywgJycsIGdldFJMaW5rU2VsZWN0aW9uU3Ryb2tlKS5vZk9iamVjdCgpLFxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldEFycm93aGVhZFNjYWxlKS5vZk9iamVjdCgpLFxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAndHlwZScsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgPT0gJ3RvJyB8fCB0ID09ICd0b0Zyb20nO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICksXG5cbiAgICAgICAgbWsoZ28uUGFuZWwsIGdvLlBhbmVsLkF1dG8sIC8vIGxpbmsgbGFiZWwgXCJrbm9iXCJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dLbm9iKG9iaikgPyAxIDogMCk7XG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldEFycm93aGVhZFNjYWxlKS5vZk9iamVjdCgpLFxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcbiAgICAgICAgICAgICAgICBmaWd1cmU6IFwiRWxsaXBzZVwiLFxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yRCxcbiAgICAgICAgICAgICAgICBzdHJva2U6IGNvbG9yRCxcbiAgICAgICAgICAgICAgICB3aWR0aDogMTIsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgIHRoaXMucExpbmtUZW1wbGF0ZSA9XG4gICAgbWsoZ28uTGluayxcbiAgICAgICAge1xuICAgICAgICAgICAgY3VydmU6IGdvLkxpbmsuQmV6aWVyLFxuICAgICAgICAgICAgYWRqdXN0aW5nOiBnby5MaW5rLlN0cmV0Y2gsXG4gICAgICAgICAgICByZXNoYXBhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwicG9pbnRzXCIpLm1ha2VUd29XYXkoKSxcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJjdXJ2aW5lc3NcIiwgXCJjdXJ2aW5lc3NcIiksXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiAoc2VsZi5zaG93UExpbmsob2JqKSA/IDEgOiAwKTtcbiAgICAgICAgfSkub2ZPYmplY3QoKSwge1xuICAgICAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXG4gICAgICAgICAgICBsYXllck5hbWU6ICdCYWNrZ3JvdW5kJywgLy8gbWFrZSBQIGxpbmtzIGZhbGwgYmVoaW5kIFIgbGlua3NcbiAgICAgICAgICAgIHJvdXRpbmc6IGdvLkxpbmsuTm9ybWFsLFxuICAgICAgICAgICAgY3VydmU6IGdvLkxpbmsuQmV6aWVyLFxuICAgICAgICAgICAgYWRqdXN0aW5nOiBnby5MaW5rLlN0cmV0Y2gsXG4gICAgICAgICAgICByZXNoYXBhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29udGV4dENsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobGlua0luZm8odGFyZ2V0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBtayhnby5TaGFwZSxcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic3Ryb2tlV2lkdGhcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRMaW5rU3Ryb2tlV2lkdGgpLm9mT2JqZWN0KCksIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIkxJTktTSEFQRVwiLFxuICAgICAgICAgICAgICAgIHN0cm9rZTogY29sb3JQTGlnaHQsXG4gICAgICAgICAgICAgICAgZmlsbDogY29sb3JQTGlnaHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICksXG4gICAgICAgIG1rKGdvLlNoYXBlLFxuICAgICAgICAgICAgLy8gbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIChzZWxmLnNob3dQRG90KG9iaikgPyAxIDogMCk7XG4gICAgICAgICAgICAvLyB9KS5vZk9iamVjdCgpLFxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldEFycm93aGVhZFNjYWxlKS5vZk9iamVjdCgpLCB7XG4gICAgICAgICAgICAgICAgdG9BcnJvdzogXCJDaXJjbGVcIixcbiAgICAgICAgICAgICAgICBzdHJva2U6IGNvbG9yUExpZ2h0LFxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUExpZ2h0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICB0aGlzLmRMaW5rVGVtcGxhdGUgPVxuICAgIG1rKGdvLkxpbmssIHtcbiAgICAgICAgc2VsZWN0YWJsZTogZmFsc2VcbiAgICB9LFxuICAgICAgICBtayhnby5TaGFwZSwge1xuICAgICAgICAgICAgbmFtZTogXCJMSU5LU0hBUEVcIixcbiAgICAgICAgICAgIHN0cm9rZTogbnVsbFxuICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgLy8gLS0tLS0tLS0tLS0gdGVtcG9yYXJ5IGxpbmsvbm9kZSB0ZW1wbGF0ZXMsIGZvciB1c2Ugd2hlbiBkcmFnZ2luZyB0byBjcmVhdGUgUi9QIGxpbmVzIC0tLS0tLS0tLS0tLS1cblxuICAgIC8vIGRlZmluZSBpbml0aWFsIHRlbXBvcmFyeSBsaW5rIHRlbXBsYXRlcyAtIHRoZXNlIHdpbGwgYmUgbW9kaWZpZWQgd2hlbiBoYW5kbGVQb3J0VGFyZ2V0ZWQgaXMgY2FsbGVkXG4gICAgdGhpcy5zZXRUZW1wb3JhcnlMaW5rVGVtcGxhdGVzID0gZnVuY3Rpb24gKHRvb2wpIHtcbiAgICAgICAgdG9vbC50ZW1wb3JhcnlMaW5rID0gbWFrZVRlbXBvcmFyeUxpbmtUZW1wbGF0ZSgpO1xuICAgICAgICB0b29sLnRlbXBvcmFyeUZyb21Ob2RlID0gbWFrZVRlbXBvcmFyeU5vZGVUZW1wbGF0ZSgpO1xuICAgICAgICB0b29sLnRlbXBvcmFyeVRvTm9kZSA9IG1ha2VUZW1wb3JhcnlOb2RlVGVtcGxhdGUoKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gbWFrZVRlbXBvcmFyeUxpbmtUZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG1rKGdvLkxpbmssIHtcbiAgICAgICAgICAgIGxheWVyTmFtZTogXCJUb29sXCIsXG4gICAgICAgICAgICBjdXJ2ZTogZ28uTGluay5CZXppZXJcbiAgICAgICAgfSxcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2xpbmtzaGFwZScsXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VUZW1wb3JhcnlOb2RlVGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiBtayhnby5Hcm91cCwge1xuICAgICAgICAgICAgbGF5ZXJOYW1lOiBcIlRvb2xcIlxuICAgICAgICB9LFxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiQm9yZGVyXCIsIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnYm9yZGVyJyxcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMyxcbiAgICAgICAgICAgICAgICBmaWxsOiBudWxsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBjaGFuZ2UgY29sb3IgYW5kIHBvcnRJZCBvZiB0ZW1wb3JhcnkgbGluayB0ZW1wbGF0ZXMgYmFzZWQgb24gdGhlIHR5cGUgb2YgbGluayBiZWluZyBjcmVhdGVkL3JlbGlua2VkXG4gICAgdGhpcy5oYW5kbGVQb3J0VGFyZ2V0ZWQgPSBmdW5jdGlvbiAodG9vbCwgcmVhbG5vZGUsIHJlYWxwb3J0LCB0ZW1wbm9kZSwgdGVtcHBvcnQsIHRvZW5kKSB7XG4gICAgICAgIC8vIC8vY29uc29sZS5sb2coJ3BvcnRUYXJnZXRlZCwgcmVhbHBvcnQ6ICcgKyAocmVhbHBvcnQgPyByZWFscG9ydC5uYW1lIDogJycpICsgJywgdGVtcHBvcnQ6ICcgKyAodGVtcHBvcnQgPyB0ZW1wcG9ydC5uYW1lIDogJycpIFxuICAgICAgICAvLyAgICAgKyAnLCBvcmlnaW5hbEZyb21Qb3J0OiAnICsgKGx0b29sLm9yaWdpbmFsRnJvbVBvcnQgPyBsdG9vbC5vcmlnaW5hbEZyb21Qb3J0Lm5hbWUgOiAnJykgKyAnLCBvcmlnaW5hbFRvUG9ydDogJyArIGx0b29sLm9yaWdpbmFsVG9Qb3J0KTtcblxuICAgICAgICB2YXIgbGlua1NoYXBlID0gdG9vbC50ZW1wb3JhcnlMaW5rLmZpbmRPYmplY3QoJ2xpbmtzaGFwZScpO1xuICAgICAgICB2YXIgZnJvbUJvcmRlciA9IHRvb2wudGVtcG9yYXJ5RnJvbU5vZGUuZmluZE9iamVjdCgnYm9yZGVyJyk7XG4gICAgICAgIHZhciB0b0JvcmRlciA9IHRvb2wudGVtcG9yYXJ5VG9Ob2RlLmZpbmRPYmplY3QoJ2JvcmRlcicpO1xuXG4gICAgICAgIGlmICh0b29sLm9yaWdpbmFsRnJvbVBvcnQgJiYgdG9vbC5vcmlnaW5hbEZyb21Qb3J0Lm5hbWUgPT0gJ2Nvcm5lclBTaGFwZScpIHtcbiAgICAgICAgICAgIGxpbmtTaGFwZS5zdHJva2UgPSBjb2xvclA7XG4gICAgICAgICAgICBmcm9tQm9yZGVyLnN0cm9rZSA9IGNvbG9yUDtcbiAgICAgICAgICAgIHRvQm9yZGVyLnN0cm9rZSA9IGNvbG9yUDtcbiAgICAgICAgICAgIGZyb21Cb3JkZXIucG9ydElkID0gJ1AnO1xuICAgICAgICAgICAgdG9Cb3JkZXIucG9ydElkID0gJ1AnO1xuICAgICAgICB9IGVsc2UgaWYgKHRvb2wub3JpZ2luYWxGcm9tUG9ydCAmJiB0b29sLm9yaWdpbmFsRnJvbVBvcnQubmFtZSA9PSAnY29ybmVyUlNoYXBlJykge1xuICAgICAgICAgICAgbGlua1NoYXBlLnN0cm9rZSA9IGNvbG9yUjtcbiAgICAgICAgICAgIGZyb21Cb3JkZXIuc3Ryb2tlID0gY29sb3JSO1xuICAgICAgICAgICAgdG9Cb3JkZXIuc3Ryb2tlID0gY29sb3JSO1xuICAgICAgICAgICAgZnJvbUJvcmRlci5wb3J0SWQgPSAnUic7XG4gICAgICAgICAgICB0b0JvcmRlci5wb3J0SWQgPSAnUic7XG4gICAgICAgIH1cbiAgICAgICAgdGVtcG5vZGUuc2NhbGUgPSBtYXAuZ2V0TGF5b3V0cygpLmdldFNjYWxlKHJlYWxub2RlKTtcbiAgICB9O1xuXG4gICAgLy8gcHJldmVudCBkdXBsaWNhdGUgJ1AnIGxpbmtzIGluIHRoZSBzYW1lIGRpcmVjdGlvbiBiZXR3ZWVuIHRoZSBzYW1lIHR3byB0aGluZ3NcbiAgICB0aGlzLnZhbGlkYXRlTGluayA9IGZ1bmN0aW9uIChmcm9tTm9kZSwgZnJvbVBvcnQsIHRvTm9kZSwgdG9Qb3J0KSB7XG4gICAgICAgIC8vIHRoZSBQIHBvcnQgaXMgb24gdG9wIG9mIHRoZSBSIHBvcnQsIHNvIGJvdGggUCBhbmQgUiBsaW5rcyBnZXQgdGhlIHRvUG9ydCBzZXQgdG8gUiBieSBkZWZhdWx0LlxuICAgICAgICBpZiAoZnJvbVBvcnQucG9ydElkID09ICdQJykge1xuICAgICAgICAgICAgLy8gTkI6IGZpbmRMaW5rc1RvIHdvdWxkIGJlIHNpbXBsZXIsIGJ1dCBpdCBkb2Vzbid0IHNlZW0gdG8gd29yay4uLiAoPylcbiAgICAgICAgICAgIHZhciBwTGlua3MgPSB0b05vZGUuZmluZExpbmtzQmV0d2Vlbihmcm9tTm9kZSwgJ1AnLCAnUCcpO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndmFsaWRhdGVMaW5rLCBwTGlua3MgZnJvbSAnICsgZnJvbU5vZGUgKyAnOicgKyBmcm9tUG9ydCArICcgdG8gJyArIHRvTm9kZSArICc6JyArIHRvUG9ydCArICcgPSAnICsgcExpbmtzLmNvdW50KTtcbiAgICAgICAgICAgIGlmIChwTGlua3MuY291bnQpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAocExpbmtzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcExpbmsgPSBwTGlua3MudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwTGluay5mcm9tTm9kZSA9PSBmcm9tTm9kZSAmJiBwTGluay50b05vZGUgPT0gdG9Ob2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSBzbGlkZSBub2RlIHRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGFsaWdubWVudCkge1xuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcImRlc2lyZWRTaXplXCIsIFwiXCIsIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICB2YXIgc2xpZGUgPSBvYmouYWRvcm5lZE9iamVjdDtcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IE1hdGgubWluKHNsaWRlLndpZHRoLCBzbGlkZS5oZWlnaHQpICogLjA1O1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZ28uU2l6ZShzaXplLCBzaXplKTtcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGFsaWdubWVudCxcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwiY29sLXJlc2l6ZVwiLFxuICAgICAgICAgICAgICAgIGZpbGw6ICdyZ2JhKDI1MSwxNzAsNTQsMSknLFxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLnNsaWRlVGVtcGxhdGUgPVxuICAgIG1rKGdvLk5vZGUsIGdvLlBhbmVsLkF1dG8sXG4gICAgICAgIC8vIE5COiB1bmxpa2UgZ3JvdXBzLCBzbGlkZXMganVzdCB1c2UgYSBub3JtYWwgMi13YXkgbG9jYXRpb24gYmluZGluZ1xuICAgICAgICBuZXcgZ28uQmluZGluZyhcImxvY2F0aW9uXCIsIFwibG9jXCIsIGdvLlBvaW50LnBhcnNlKS5tYWtlVHdvV2F5KGdvLlBvaW50LnN0cmluZ2lmeSksXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwid2lkdGhcIiwgXCJ3aWR0aFwiKS5tYWtlVHdvV2F5KCksXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwiaGVpZ2h0XCIsIFwiaGVpZ2h0XCIpLm1ha2VUd29XYXkoKSxcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJ2aXNpYmxlXCIsIFwiXCIsIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBvYmouZGF0YS5oYXNSZWdpb24gJiZcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUikgJiZcbiAgICAgICAgICAgICAgICAhbWFwLmdldFByZXNlbnRlcigpLmlzUHJlc2VudGluZyAmJlxuICAgICAgICAgICAgICAgICFtYXAuZ2V0UHJlc2VudGVyKCkuaXNDcmVhdGluZ1RodW1ibmFpbCAmJlxuICAgICAgICAgICAgICAgIG1hcC5nZXRQcmVzZW50ZXIoKS5jdXJyZW50U2xpZGVJbmRleCA9PSBvYmouZGF0YS5pbmRleDtcbiAgICAgICAgfSkub2ZPYmplY3QoKSwge1xuICAgICAgICAgICAgbG9jYXRpb25TcG90OiBnby5TcG90LlRvcExlZnQsXG4gICAgICAgICAgICBzZWxlY3Rpb25BZG9ybmVkOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHJlc2l6ZUFkb3JubWVudFRlbXBsYXRlOiBtayhnby5BZG9ybm1lbnQsIFwiU3BvdFwiLFxuICAgICAgICAgICAgICAgIG1rKGdvLlBsYWNlaG9sZGVyKSwgLy8gdGFrZXMgc2l6ZSBhbmQgcG9zaXRpb24gb2YgYWRvcm5lZCBvYmplY3QgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuVG9wTGVmdCksXG4gICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Ub3ApLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuVG9wUmlnaHQpLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuUmlnaHQpLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuQm90dG9tUmlnaHQpLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuQm90dG9tKSxcbiAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LkJvdHRvbUxlZnQpLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuTGVmdClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgcGFkZGluZzogMCxcbiAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKG5vZGVJbmZvKHRhcmdldC5wYXJ0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgbWsoZ28uU2hhcGUsIFwiUmVjdGFuZ2xlXCIsIHtcbiAgICAgICAgICAgIG5hbWU6IFwic2xpZGVib3JkZXJcIixcbiAgICAgICAgICAgIGZpbGw6ICdyZ2JhKDI1MSwxNzAsNTQsLjEpJyxcbiAgICAgICAgICAgIHN0cm9rZTogbnVsbFxuICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSBleHBvcnQgZm9vdGVyIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIC8vIE5COiB0aGlzIGlzIG5vdCBhIHRlbXBsYXRlIHBlciBzZSwgaW4gdGhhdCBpdCBpcyBhZGRlZCB0byB0aGUgZGlhZ3JhbSBcbiAgICAvLyBzdGF0aWNhbGx5LCByYXRoZXIgdGhhbiBiZWluZyBib3VuZCB0byBzb21ldGhpbmcgaW4gdGhlIG1vZGVsLlxuICAgIC8vIEJ1dCB3ZSBwdXQgaXQgaGVyZSBiZWNhdXNlIGl0IGlzIGFib3V0IGNyZWF0aW5nIHBhcnRzIGFuZCBzdHVmZi5cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUV4cG9ydEZvb3RlcigpIHtcbiAgICAgICAgcmV0dXJuIG1rKGdvLk5vZGUsIGdvLlBhbmVsLlNwb3QsIHtcbiAgICAgICAgICAgIGxheWVyTmFtZTogJ0ZvcmVncm91bmQnLFxuICAgICAgICAgICAgbG9jYXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHNlbGVjdGFibGU6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJSZWN0YW5nbGVcIiwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicmVjdGFuZ2xlXCIsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA2MCxcbiAgICAgICAgICAgICAgICBmaWxsOiBudWxsLFxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBtayhnby5QaWN0dXJlLCB7XG4gICAgICAgICAgICAgICAgc291cmNlOiAnbWV0YW1hcC9hc3NldHMvaW1nL21ldGFtYXAtbG9nby01MC5wbmcnLFxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Ub3BMZWZ0LFxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LlRvcExlZnQsXG4gICAgICAgICAgICAgICAgd2lkdGg6IDE5NSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDUwXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xuICAgICAgICAgICAgICAgIHRleHQ6IFwibWV0YW1hcC5jYWJyZXJhcmVzZWFyY2gub3JnXCIsXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50OiBnby5TcG90LkJvdHRvbUxlZnQsXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50Rm9jdXM6IGdvLlNwb3QuQm90dG9tTGVmdCxcbiAgICAgICAgICAgICAgICB3aWR0aDogMjAwXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwibWFwVGl0bGVcIixcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgICAgIHRleHRBbGlnbjogXCJyaWdodFwiLFxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Ub3BSaWdodCxcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnRGb2N1czogZ28uU3BvdC5Ub3BSaWdodCxcbiAgICAgICAgICAgICAgICB3aWR0aDogMzAwXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiYXV0aG9yTmFtZVwiLFxuICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCIsXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50OiBnby5TcG90LkJvdHRvbVJpZ2h0LFxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LkJvdHRvbVJpZ2h0LFxuICAgICAgICAgICAgICAgIHdpZHRoOiAzMDBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZXMgb3IgcmVmcmVzaGVzIHRoZSBmb290ZXIgbG9nby90ZXh0IHRoYXQgaXMgZGlzcGxheWVkIGluIHRoZSBpbWFnZSBleHBvcnRcbiAgICB0aGlzLmFkZEV4cG9ydEZvb3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFfZXhwb3J0Rm9vdGVyKSB7XG4gICAgICAgICAgICBfZXhwb3J0Rm9vdGVyID0gY3JlYXRlRXhwb3J0Rm9vdGVyKCk7XG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmFkZChfZXhwb3J0Rm9vdGVyKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNob3dFeHBvcnRGb290ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZWN0ID0gbWFwLmNvbXB1dGVNYXBCb3VuZHMoKTtcbiAgICAgICAgLy8gcHV0IGZvb3RlciBhdCBsZWFzdCAxMDAgcHggYmVsb3cgYm90dG9tIG9mIG1hcDsgbWFrZSBpdCBhdCBsZWFzdCA1MDBweCB3aWRlXG4gICAgICAgIHZhciB4ID0gcmVjdC54O1xuICAgICAgICB2YXIgeSA9IHJlY3QueSArIHJlY3QuaGVpZ2h0ICsgTWF0aC5tYXgoMTAwLCByZWN0LmhlaWdodCAvIDUpO1xuICAgICAgICB2YXIgdyA9IE1hdGgubWF4KDUwMCwgcmVjdC53aWR0aCk7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ3Nob3dFeHBvcnRGb290ZXIsIGJvdW5kcyByZWN0OiAnICsgcmVjdCArICcsIHc6ICcgKyB3KTtcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5sb2NhdGlvbiA9IG5ldyBnby5Qb2ludCh4LCB5KTtcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5maW5kT2JqZWN0KFwicmVjdGFuZ2xlXCIpLndpZHRoID0gdztcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5maW5kT2JqZWN0KFwibWFwVGl0bGVcIikudGV4dCA9IFwiTWFwIFRpdGxlOiBcIiArICRzY29wZS5tYXBUaXRsZTtcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5maW5kT2JqZWN0KFwiYXV0aG9yTmFtZVwiKS50ZXh0ID0gXCJBdXRob3I6IFwiICsgJHNjb3BlLnVzZXJOYW1lO1xuICAgICAgICBfZXhwb3J0Rm9vdGVyLm9wYWNpdHkgPSAxO1xuICAgICAgICBfZXhwb3J0Rm9vdGVyLmludmFsaWRhdGVMYXlvdXQoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5oaWRlRXhwb3J0Rm9vdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfZXhwb3J0Rm9vdGVyLm9wYWNpdHkgPSAwO1xuICAgIH07XG5cbn07IiwiXG5TYW5kYmFua0VkaXRvci5UZXN0cyA9IGZ1bmN0aW9uICgkc2NvcGUsIG1hcCkge1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdGhpcy5URVNUX1NUQVRVU19OT1RfUlVOID0gJ25vdC1ydW4nO1xuICAgIHRoaXMuVEVTVF9TVEFUVVNfUEFTU0VEID0gJ3Bhc3NlZCc7XG4gICAgdGhpcy5URVNUX1NUQVRVU19FWEFNSU5FID0gJ2V4YW1pbmUnO1xuICAgIHRoaXMuVEVTVF9TVEFUVVNfRkFJTEVEID0gJ2ZhaWxlZCc7XG5cbiAgICB0aGlzLmN1cnJlbnRUZXN0ID0gbnVsbDtcblxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB9O1xuXG4gICAgdGhpcy5ydW5UZXN0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xuICAgICAgICAgICAgdmFyIHRlc3QgPSBfLmZpbmRXaGVyZShzZWxmLnRlc3RzLCB7IG5hbWU6IG5hbWUgfSk7XG4gICAgICAgICAgICB0ZXN0LnN0YXR1cyA9IHNlbGYuVEVTVF9TVEFUVVNfTk9UX1JVTjtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFRlc3QgPSB0ZXN0O1xuICAgICAgICAgICAgZGlhZ3JhbS5jbGVhcigpO1xuICAgICAgICAgICAgdGVzdC5ydW4oZGlhZ3JhbSk7XG4gICAgICAgICAgICBpZiAodGVzdC5jaGVjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGVzdC5zdGF0dXMgPSBzZWxmLlRFU1RfU1RBVFVTX0VYQU1JTkU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZXN0LmZhaWxSZWFzb24gPSB0ZXN0LmNoZWNrKGRpYWdyYW0pO1xuICAgICAgICAgICAgICAgIGlmIChfLmlzU3RyaW5nKHRlc3QuZmFpbFJlYXNvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVzdC5zdGF0dXMgPSBzZWxmLlRFU1RfU1RBVFVTX0ZBSUxFRDsgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0ZXN0LnN0YXR1cyA9IHNlbGYuVEVTVF9TVEFUVVNfUEFTU0VEOyAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pOyAgICAgICAgXG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlR2VuZXJhdG9yVGVzdCA9IGZ1bmN0aW9uKG5hbWUsIG1hcEl0Rm4pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6ICdUaGlua1E6ICcgKyBuYW1lLFxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7IHNlbGYucnVuR2VuZXJhdG9yVGVzdChtYXBJdEZuKTsgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICB0aGlzLnJ1bkdlbmVyYXRvclRlc3QgPSBmdW5jdGlvbihtYXBJdEZuKSB7XG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcbiAgICAgICAgdmFyIGdlbmVyYXRvciA9IG1hcC5nZXRHZW5lcmF0b3IoKTtcbiAgICAgICAgZ2VuZXJhdG9yLmNvbmNlcHQxID0gJ0NPTkNFUFQgMSc7XG4gICAgICAgIGdlbmVyYXRvci5jb25jZXB0MiA9ICdDT05DRVBUIDInO1xuICAgICAgICBnZW5lcmF0b3IubWFwSXQobWFwSXRGbik7XG4gICAgfTtcblxuICAgIHRoaXMudGVzdHMgPSBbXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gICAgIG5hbWU6ICdbRmFpbGVkIHRlc3RdJyxcbiAgICAgICAgLy8gICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgIGNoZWNrOiBmdW5jdGlvbihkaWFncmFtKSB7XG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuICdUaGlzIHRlc3QgZmFpbGVkIC0gdGhpcyBpcyBvbmx5IGEgdGVzdC4nO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnUmVzZXQgbWFwJyxcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xuICAgICAgICAgICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuaW5zZXJ0UGFydChuZXcgZ28uUG9pbnQoMCwwKSk7XG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaGVjazogZnVuY3Rpb24oZGlhZ3JhbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpLmNvdW50ID09IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgU2lzdGVyJyxcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xuICAgICAgICAgICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuaW5zZXJ0UGFydChuZXcgZ28uUG9pbnQoMCwwKSk7XG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5maXJzdCgpO1xuICAgICAgICAgICAgICAgIG1hcC5jcmVhdGVTaXN0ZXIoZ3JvdXApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbihkaWFncmFtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkuY291bnQgPT0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0NyZWF0ZSBSIHRvIFNpc3RlcicsXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcbiAgICAgICAgICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmluc2VydFBhcnQobmV3IGdvLlBvaW50KDAsMCkpO1xuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkuZmlyc3QoKTtcbiAgICAgICAgICAgICAgICBtYXAuY3JlYXRlUlRvU2lzdGVyKGdyb3VwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0NyZWF0ZSBDaGlsZCcsXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcbiAgICAgICAgICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmluc2VydFBhcnQobmV3IGdvLlBvaW50KDAsMCkpO1xuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkuZmlyc3QoKTtcbiAgICAgICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoZ3JvdXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnQ3JlYXRlIDMgY2hpbGRyZW4gYW5kIHN3aXRjaCB0byBmcmVlaGFuZCcsXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcbiAgICAgICAgICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmluc2VydFBhcnQobmV3IGdvLlBvaW50KDAsMCkpO1xuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkuZmlyc3QoKTtcbiAgICAgICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoZ3JvdXApO1xuICAgICAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChncm91cCk7XG4gICAgICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGdyb3VwKTtcbiAgICAgICAgICAgICAgICAvLyBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbGF5b3V0JywgJ2ZyZWVoYW5kJyk7XG4gICAgICAgICAgICAgICAgZ3JvdXAuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuc2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQoJ2ZyZWVoYW5kJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uKGRpYWdyYW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5jb3VudCAhPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnVG9wIGxldmVsIGdyb3VwIGNvdW50IGlzIG5vdCAxJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5maXJzdCgpO1xuICAgICAgICAgICAgICAgIGlmIChncm91cC5tZW1iZXJQYXJ0cy5jb3VudCAhPSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnUGFyZW50IGRhdGEgY2hpbGRyZW4gaXMgbm90IDMnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0RyYWcgUlRCQiBpbnRvIG91dGxpbmUgUycsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIHRoZSBwcmVzZWxlY3RlZCBSVEJCIGludG8gV2hvbGUgKFMpLCB0aGVuIGRvIGFuIFVuZG8nLFxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdsZWZ0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZVRoaW5nKDI1MCwgMCwgJ1BhcnQgMScpO1xuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVUaGluZyg1MDAsIDAsICdQYXJ0IDInKTtcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MSwgcGFydDIsICdSdGhpbmcnKTtcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBwYXJ0MS5pc1NlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwYXJ0Mi5pc1NlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0RyYWcgUlRCQiBpbnRvIGZyZWVoYW5kIFMnLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyB0aGUgcHJlc2VsZWN0ZWQgUlRCQiBpbnRvIFdob2xlIChTKSBhbmQgZXhhbWluZSBsYXlvdXQnLFxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xuICAgICAgICAgICAgICAgIHZhciBvbGRQYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ09sZCBQYXJ0IDEnKTtcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAzMCwgJ1BhcnQgMScpO1xuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVUaGluZyg1MDAsIDcwLCAnUGFydCAyJyk7XG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEsIHBhcnQyLCAnUnRoaW5nJyk7XG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgcGFydDEuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcGFydDIuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgUlRCQiBpbiBvdXRsaW5lIGFuZCBzd2l0Y2ggdG8gZnJlZWhhbmQnLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnQ2hlY2sgYXV0by1nZW5lcmF0ZWQgZnJlZWhhbmQgbGF5b3V0IG9mIHBhcnRzJyxcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnbGVmdCcpO1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMScpO1xuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMicpO1xuICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxLCBwYXJ0MiwgJ1J0aGluZycpO1xuICAgICAgICAgICAgICAgIHdob2xlLmlzU2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLnNldFNlbGVjdGVkVGhpbmdzTGF5b3V0KCdmcmVlaGFuZCcpO1xuICAgICAgICAgICAgICAgIC8vZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkod2hvbGUuZGF0YSwgJ2xheW91dCcsICdmcmVlaGFuZCcpO1xuICAgICAgICAgICAgICAgIC8vbWFwLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gY3JlYXRlIFJUQkIgaW4gZnJlZWhhbmQsIGFkZCBwYXJ0IGluIG91dGxpbmUsIHN3aXRjaCBiYWNrIHRvIGZyZWVoYW5kXG4gICAgICAgIC8vIGNyZWF0ZSBSVEJCIGluIGZyZWVoYW5kLCBkcmFnIGluIHBhcnQgaW4gb3V0bGluZSwgc3dpdGNoIGJhY2sgdG8gZnJlZWhhbmRcblxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnRHJhZyBSVEJCIG91dCBvZiBTJyxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgdGhlIHByZXNlbGVjdGVkIFJUQkIgb250byBXaG9sZSAoRCknLFxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdsZWZ0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAxJyk7XG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAyJyk7XG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEsIHBhcnQyLCAnUnRoaW5nJyk7XG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgcGFydDEuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcGFydDIuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFJUQkIgb3V0IG9mIGZyZWVoYW5kIFMnLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyB0aGUgcHJlc2VsZWN0ZWQgUlRCQiBvbnRvIFdob2xlIChEKScsXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2ZyZWVoYW5kJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAxJywgMTAsIDEyMCk7XG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAyJywgMTEwLCAxNTApO1xuICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxLCBwYXJ0MiwgJ1J0aGluZycpO1xuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgIHBhcnQxLmlzU2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHBhcnQyLmlzU2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnRHJhZyBSVEJCIG91dCBvZiAybmQgbGV2ZWwgUycsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIHRoZSBwcmVzZWxlY3RlZCBSVEJCIG9udG8gV2hvbGUgKEQpIG9mIFBhcnQgMScsXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2xlZnQnKTtcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnKTtcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnKTtcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDEyID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjInKTtcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhzdWJwYXJ0MTEsIHN1YnBhcnQxMiwgJ1J0aGluZycpO1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMicpO1xuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgIHN1YnBhcnQxMS5pc1NlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzdWJwYXJ0MTIuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFJUQkIgb3V0IG9mIDJuZCBsZXZlbCBmcmVlaGFuZCBTJyxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgdGhlIHByZXNlbGVjdGVkIFJUQkIgb250byBXaG9sZSAoRCkgb2YgUGFydCAxJyxcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnLCAwLCAxMjApO1xuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScsIDEwLCAxODApO1xuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTIgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMicsIDIwLCAyMjApO1xuICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHN1YnBhcnQxMSwgc3VicGFydDEyLCAnUnRoaW5nJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAyJywgMCwgMzAwKTtcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBzdWJwYXJ0MTEuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc3VicGFydDEyLmlzU2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnUmNoYW5uZWwnLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnTm90ZSB0aGF0IFItdGhpbmdzIGFyZSBpbiBwYXJ0LXdob2xlIHJlbGF0aW9uJyxcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xuICAgICAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlIDEnLCAncmlnaHQnKTtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQxMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdQYXJ0IDEuMScpO1xuICAgICAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAwLCAnV2hvbGUgMicpO1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZDIxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ1BhcnQgMi4xJyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzEgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAnUnRoaW5nIDEtMicpO1xuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMSA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQxMSwgY2hpbGQyMSwgJ1J0aGluZyAxLjEgLSAyLjEnKTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdSY2hhbm5lbCwgclRoaW5nMTE6ICcgKyByVGhpbmcxMSk7XG5cbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgclRoaW5nMTEuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgbWFwLmFkZFNlbGVjdGVkVGhpbmdzQXNDaGlsZHJlbk9mKHJUaGluZzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnRGlzYXBwZWFyaW5nIHBhcnRzIG9uIG5ldyBpZGVhIGNyZWF0aW9uJyxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0NyZWF0ZSBhIG5ldyB0b3AtbGV2ZWwgaWRlYSAtIFBhcnQgMS4xIHNob3VsZCBub3QgZGlzYXBwZWFyIHRlbXBvcmFyaWx5JyxcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xuICAgICAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlIDEnLCAncmlnaHQnKTtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQxMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdQYXJ0IDEuMScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnRHJhZyB0b3AtbGV2ZWwgdGhpbmcgaW50byBmcmVlaGFuZCBzeXN0ZW0nLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBOZXcgUGFydCBpbnRvIFdob2xlOyBleGFtaW5lIHJlc3VsdGluZyBwYXJ0IGxheW91dCcsXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ1BhcnQnKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3UGFydCA9IG1hcC5jcmVhdGVUaGluZygyNTAsIDAsICdOZXcgUGFydCcsICdsZWZ0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIHRvcC1sZXZlbCBSVEJCIGludG8gZnJlZWhhbmQgc3lzdGVtJyxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgcHJlc2VsZWN0ZWQgUlRCQiBpbnRvIFdob2xlOyBleGFtaW5lIHJlc3VsdGluZyBwYXJ0IGxheW91dCcsXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ1BhcnQnKTtcbiAgICAgICAgICAgICAgICB2YXIgYmFyID0gbWFwLmNyZWF0ZVRoaW5nKDI1MCwgMCwgJ0JhcicsICdsZWZ0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIGJlbGwgPSBtYXAuY3JlYXRlVGhpbmcoNTAwLCAwLCAnQmVsbCcsICdsZWZ0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoYmFyLCBiZWxsLCAnUnRoaW5nJyk7XG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgYmFyLmlzU2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJlbGwuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFItdGhpbmcgc3F1YXJlIGludG8gZnJlZWhhbmQgc3lzdGVtJyxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgcHJlc2VsZWN0ZWQgc3F1YXJlIGludG8gV2hvbGU7IGV4YW1pbmUgcmVzdWx0aW5nIHBhcnQgbGF5b3V0JyxcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCA1MCwgJ1dob2xlJywgJ2ZyZWVoYW5kJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxMSA9IG1hcC5jcmVhdGVUaGluZygyNTAsIDAsICdQYXJ0MTEnLCAnbGVmdCcpO1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0MTIgPSBtYXAuY3JlYXRlVGhpbmcoNTAwLCAwLCAnUGFydDEyJywgJ2xlZnQnKTtcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIxID0gbWFwLmNyZWF0ZVRoaW5nKDI1MCwgMjUwLCAnUGFydDIxJywgJ2xlZnQnKTtcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIyID0gbWFwLmNyZWF0ZVRoaW5nKDUwMCwgMjUwLCAnUGFydDIyJywgJ2xlZnQnKTtcblxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMV8xMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDExLCBwYXJ0MTIsICdSdGhpbmcgMTEtMTInKTtcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nMTFfMjEgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxMSwgcGFydDIxLCAnUnRoaW5nIDExLTIxJyk7XG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzEyXzIyID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MTIsIHBhcnQyMiwgJ1J0aGluZyAxMi0yMicpO1xuICAgICAgICAgICAgICAgIHZhciByVGhpbmcyMV8yMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDIxLCBwYXJ0MjIsICdSdGhpbmcgMjEtMjInKTtcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBwYXJ0MTEuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcGFydDEyLmlzU2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHBhcnQyMS5pc1NlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwYXJ0MjIuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFItdGhpbmcgc3F1YXJlIG91dCBvZiBmcmVlaGFuZCBzeXN0ZW0nLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBwcmVzZWxlY3RlZCBzcXVhcmUgb250byBEIG9mIFdob2xlOyBleGFtaW5lIHJlc3VsdGluZyBsYXlvdXQnLFxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKC0xMDAsIDUwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQxMSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQnKTtcbiAgICAgICAgICAgICAgICB2YXIgcGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydDExJywgMTAsIDE5MCk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxMiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQxMicsIDEyMCwgMTkwKTtcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydDIxJywgMTAsIDMwMCk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyMiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQyMicsIDEyMCwgMzAwKTtcblxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMV8xMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDExLCBwYXJ0MTIsICdSdGhpbmcgMTEtMTInKTtcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nMTFfMjEgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxMSwgcGFydDIxLCAnUnRoaW5nIDExLTIxJyk7XG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzEyXzIyID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MTIsIHBhcnQyMiwgJ1J0aGluZyAxMi0yMicpO1xuICAgICAgICAgICAgICAgIHZhciByVGhpbmcyMV8yMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDIxLCBwYXJ0MjIsICdSdGhpbmcgMjEtMjInKTtcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBwYXJ0MTEuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcGFydDEyLmlzU2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHBhcnQyMS5pc1NlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwYXJ0MjIuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIDJuZCBsZXZlbCBwYXJ0IHRvIEQgb2YgcGFyZW50JyxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgU3VicGFydCAxLjEgb250byBEIG9mIFBhcnQgMTsgaXQgc2hvdWxkIGFwcGVhciBiZWxvdyBQYXJ0IDEnLFxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdsZWZ0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAxJyk7XG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAyJyk7XG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdJbnZpc2libGUgUi10aGluZyBpbiAybmQgbGV2ZWwgb2Ygb3V0bGluZScsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdSLXRoaW5nIGJldHdlZW4gU3VicGFydHMgMS4xIGFuZCAxLjIgc2hvdWxkIGJlIHZpc2libGUnLFxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdsZWZ0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAxJyk7XG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMiA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4yJyk7XG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoc3VicGFydDExLCBzdWJwYXJ0MTIsICdSdGhpbmcnKTtcbiAgICAgICAgICAgICAgICByVGhpbmcuZGVzaXJlZFNpemUgPSBuZXcgZ28uU2l6ZSgzMCwzMCk7XG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdyVGhpbmcgYWN0dWFsQm91bmRzOiAnICsgclRoaW5nLmFjdHVhbEJvdW5kcyArICcsIHNjYWxlOiAnICsgclRoaW5nLnNjYWxlICsgJywgZGVzaXJlZFNpemU6ICcgKyByVGhpbmcuZGVzaXJlZFNpemUpO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ1dob2xlIGRlc2lyZWRTaXplOiAnICsgd2hvbGUuZGVzaXJlZFNpemUpO1xuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1ItdGhpbmcgYmV0d2VlbiBpZGVhcyBpbiBzYW1lIGxvY2F0aW9uIChlcnJvciknLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnVGhpcyBzaG91bGQgdHJpZ2dlciBhbiBlcnJvcicsXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcbiAgICAgICAgICAgICAgICAvLyB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1BhcnQgMScsICdsZWZ0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnUGFydCAyJywgJ2xlZnQnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEsIHBhcnQyLCAnUnRoaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgLy8gfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgIGFsZXJ0KGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvLyB7XG4gICAgICAgIC8vICAgICBuYW1lOiAnRml4IGJhZCBSLXRoaW5nIGxlYWRpbmcgdG8gaW5maW5pdGUgbG9vcCcsXG4gICAgICAgIC8vICAgICBpbnN0cnVjdGlvbnM6ICdNYXAgc2hvdWxkIGRpc3BsYXkgYW5kIG5vdCB0cmlnZ2VyIGluZmluaXRlIGxvb3A7IG1vZGVsIHNob3VsZCBiZSBmaXhlZCBzbyB0aGF0IHItdGhpbmcgaXMgbm90IFBhcnQgMS4xIG9yIFBhcnQgMS4yJyxcbiAgICAgICAgLy8gICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xuICAgICAgICAvLyAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoLTEwMCwgMCwgJ1RoaW5nMScsICdmcmVlaGFuZCcpO1xuICAgICAgICAvLyAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ1BhcnQgMS4xJyk7XG4gICAgICAgIC8vICAgICAgICAgdmFyIGNoaWxkMTIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnUGFydCAxLjInKTtcbiAgICAgICAgLy8gICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDExLCBjaGlsZDEyLCAnUnRoaW5nJyk7XG4gICAgICAgIC8vICAgICAgICAgdmFyIHJMaW5rID0gclRoaW5nLmxhYmVsZWRMaW5rO1xuICAgICAgICAvLyAgICAgICAgIHJMaW5rLmRhdGEubGFiZWxLZXlzID0gW2NoaWxkMTEuZGF0YS5rZXldO1xuICAgICAgICAvLyAgICAgICAgIG1hcC5jaGVja01vZGVsKCk7XG4gICAgICAgIC8vICAgICAgICAgbWFwLnJlZnJlc2goKTtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0RyYWcgdG8gY3JlYXRlIFItbGluZScsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIGZyb20gdGhlIFItY29ybmVyIG9mIFRoaW5nMSB0byBUaGluZzI7IHRlbXBvcmFyeSBkcmFnIGxpbmUgYW5kIHNxdWFyZSBzaG91bGQgYmUgUi1jb2xvcjsgY3JlYXRlZCBsaW5lIHNob3VsZCBiZSBhbiBSLWxpbmUnLFxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCAwLCAnVGhpbmcxJywgJ2ZyZWVoYW5kJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZygxMDAsIDAsICdUaGluZzInLCAnZnJlZWhhbmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0RyYWcgdG8gY3JlYXRlIFAtbGluZScsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIGZyb20gdGhlIFAtY29ybmVyIG9mIFRoaW5nMSB0byBUaGluZzI7IHRlbXBvcmFyeSBkcmFnIGxpbmUgYW5kIHNxdWFyZSBzaG91bGQgYmUgUC1jb2xvcjsgY3JlYXRlZCBsaW5lIHNob3VsZCBiZSBhIFAtbGluZScsXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKC0xMDAsIDAsICdUaGluZzEnLCAnZnJlZWhhbmQnKTtcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKDEwMCwgMCwgJ1RoaW5nMicsICdmcmVlaGFuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnUmVsaW5rIGZyb20tcG9ydCBvZiBSLWxpbmUnLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnTW92ZSB0aGUgc3RhcnQgb2YgdGhlIFItbGluayBmcm9tIFRoaW5nIDEgdG8gVGhpbmcgMzsgbWFrZSBzdXJlIGl0IGRvZXMgbm90IHR1cm4gaW50byBhIFAtbGluaycsXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKC0xMDAsIDAsICdUaGluZzEnLCAnZnJlZWhhbmQnKTtcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKDMwMCwgMCwgJ1RoaW5nMicsICdmcmVlaGFuZCcpO1xuICAgICAgICAgICAgICAgIHZhciB0aGluZzMgPSBtYXAuY3JlYXRlVGhpbmcoMTAwLCAyMDAsICdUaGluZzMnLCAnZnJlZWhhbmQnKTtcbiAgICAgICAgICAgICAgICB2YXIgcmxpbmsgPSBtYXAuY3JlYXRlUkxpbmsodGhpbmcxLCB0aGluZzIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnUmVsaW5rIHRvLXBvcnQgb2YgUi1saW5lJyxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ01vdmUgdGhlIGVuZCBvZiB0aGUgUi1saW5rIGZyb20gVGhpbmcgMiB0byBUaGluZyAzOyBtYWtlIHN1cmUgaXQgZG9lcyBub3QgdHVybiBpbnRvIGEgUC1saW5rJyxcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xuICAgICAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoLTEwMCwgMCwgJ1RoaW5nMScsICdmcmVlaGFuZCcpO1xuICAgICAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoMzAwLCAwLCAnVGhpbmcyJywgJ2ZyZWVoYW5kJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMyA9IG1hcC5jcmVhdGVUaGluZygxMDAsIDIwMCwgJ1RoaW5nMycsICdmcmVlaGFuZCcpO1xuICAgICAgICAgICAgICAgIHZhciBybGluayA9IG1hcC5jcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdTaG93aW5nIHBhcnRzIG9mIHBhcnRzIG9mIGEgZnJlZWhhbmQgd2hvbGUnLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnV2hvbGUsIFBhcnQgMSBhbmQgU3VicGFydCAxLjEgc2hvdWxkIGFsbCBiZSB2aXNpYmxlJyxcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnKTtcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnKTtcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdXSEFUX0lTJywgbWFwLmdldEdlbmVyYXRvcigpLldIQVRfSVMpLFxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1BBUlRTX09GJywgbWFwLmdldEdlbmVyYXRvcigpLlBBUlRTX09GKSxcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdQQVJUX09GJywgbWFwLmdldEdlbmVyYXRvcigpLlBBUlRfT0YpLFxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1BBUlRTX0hBVkVfUEFSVFMnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUEFSVFNfSEFWRV9QQVJUUyksXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUE9JTlRfRk9SJywgbWFwLmdldEdlbmVyYXRvcigpLlBPSU5UX0ZPUiksXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnSEFTX01VTFRJUExFX1BTJywgbWFwLmdldEdlbmVyYXRvcigpLkhBU19NVUxUSVBMRV9QUyksXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUl9UTycsIG1hcC5nZXRHZW5lcmF0b3IoKS5SX1RPKSxcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdSX0VYSVNUUycsIG1hcC5nZXRHZW5lcmF0b3IoKS5SX0VYSVNUUyksXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnV0hBVF9JU19SJywgbWFwLmdldEdlbmVyYXRvcigpLldIQVRfSVNfUiksXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnRElTVElOR1VJU0hfQkVUV0VFTicsIG1hcC5nZXRHZW5lcmF0b3IoKS5ESVNUSU5HVUlTSF9CRVRXRUVOKSxcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdJU19SX0JFVFdFRU4nLCBtYXAuZ2V0R2VuZXJhdG9yKCkuSVNfUl9CRVRXRUVOKSxcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdDQU5fQkVfUCcsIG1hcC5nZXRHZW5lcmF0b3IoKS5DQU5fQkVfUCksXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnTVVMVElQTEVfUFNfQVJFJywgbWFwLmdldEdlbmVyYXRvcigpLk1VTFRJUExFX1BTX0FSRSksXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUF9QQVJUUycsIG1hcC5nZXRHZW5lcmF0b3IoKS5QX1BBUlRTKSxcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdDT01QQVJFX0NPTlRSQVNUJywgbWFwLmdldEdlbmVyYXRvcigpLkNPTVBBUkVfQ09OVFJBU1QpLFxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1JfUEFSVFMnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUl9QQVJUUyksXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUEFSVFNfSEFWRV9SUycsIG1hcC5nZXRHZW5lcmF0b3IoKS5QQVJUU19IQVZFX1JTKSxcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdQQVJUX1JTX0VYSVNUJywgbWFwLmdldEdlbmVyYXRvcigpLlBBUlRfUlNfRVhJU1QpLFxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1BBUlRfUlNfQVJFJywgbWFwLmdldEdlbmVyYXRvcigpLlBBUlRfUlNfQVJFKSxcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdXSEFUX0FCT1VUJywgbWFwLmdldEdlbmVyYXRvcigpLldIQVRfQUJPVVQpXG5cblxuLy8gY29tcHV0ZVBhcnRzQm91bmRzXG5cbi8vIGNyZWF0ZVJUaGluZ1xuLy8gYWRkU2VsZWN0ZWRUaGluZ3NBc0NoaWxkcmVuT2Zcbi8vIGFkZFNlbGVjdGVkVGhpbmdBc09yZGVyZWRTaXN0ZXJPZlxuLy8gYWRkU2VsZWN0ZWRUaGluZ3NBc1Npc3RlcnNPZlxuLy8gYWRkVGhpbmdBc1JUaGluZ1xuLy8gdG9nZ2xlREZsYWdcbi8vIHRvZ2dsZVNFeHBhbnNpb25cbi8vIHRvZ2dsZVBFeHBhbnNpb25cblxuLy8gcHJlc2VudGVyOiBzZWxlY3QgZmlyc3Qgc2xpZGUgYW5kIGhpdCBwbGF5OyBtYWtlIHN1cmUgZmlyc3Qgc2xpZGUgbm90ZXMgYXBwZWFyXG5cblxuXG4gICAgXTtcbiAgICBcbn07XG5cblxuIiwiU2FuZGJhbmtFZGl0b3IuVUkgPSBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0LCAkaHR0cCwgJHJlc291cmNlLCAkbW9kYWwsICRsb2csIG1hcCkge1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gLS0tLS0tLS0tLS0gdGFiIChcInNsaWRlclwiKSBJRHMgLSB0YWJzIGFyZSByZW5kZXJlZCBpbiB2aWV3cy9tYXBzL19mb3JtIC0tLS0tLS0tLS0tLS0tXG4gICAgLy90aGlzLlRBQl9JRF9ISVNUT1JZID0gJ2hpc3RvcnktdGFiJztcbiAgICB0aGlzLlRBQl9JRF9QUkVTRU5URVIgPSAncHJlc2VudGVyLXRhYic7XG4gICAgdGhpcy5UQUJfSURfQU5BTFlUSUNTX01BUCA9ICdhbmFseXRpY3MtdGFiLW1hcCc7XG4gICAgdGhpcy5UQUJfSURfQU5BTFlUSUNTX1RISU5HID0gJ2FuYWx5dGljcy10YWItdGhpbmcnO1xuICAgIHRoaXMuVEFCX0lEX1BFUlNQRUNUSVZFUyA9ICdwZXJzcGVjdGl2ZXMtdGFiJztcbiAgICB0aGlzLlRBQl9JRF9ESVNUSU5DVElPTlMgPSAnZGlzdGluY3Rpb25zLXRhYic7XG4gICAgdGhpcy5UQUJfSURfQVRUQUNITUVOVFMgPSAnYXR0YWNobWVudHMtdGFiJztcbiAgICB0aGlzLlRBQl9JRF9HRU5FUkFUT1IgPSAnZ2VuZXJhdG9yLXRhYic7XG4gICAgdGhpcy5UQUJfSURfU1RBTkRBUkRTID0gJ3N0YW5kYXJkcy10YWInO1xuXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7fTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLSBlZGl0b3Igb3B0aW9ucyBmb3IgbWFwL3VzZXIgLS0tLS0tLS0tLVxuXG4gICAgdmFyIG1hcEVkaXRvck9wdGlvbnMgPSB7fTtcblxuICAgIHZhciBkZWZhdWx0RWRpdG9yT3B0aW9ucyA9IHtcbiAgICAgICAgLy8gbm9BcnJvd3MsIHRvLCBmcm9tLCB0b0Zyb21cbiAgICAgICAgZGVmYXVsdFJlbGF0aW9uc2hpcERpcmVjdGlvbjogJ25vQXJyb3dzJyxcbiAgICAgICAgLy8gbGVmdCwgcmlnaHQsIHN0YWNrZWQsIGZyZWVoYW5kXG4gICAgICAgIGRlZmF1bHRUaGluZ0xheW91dDogJ2xlZnQnLFxuICAgICAgICAvLyBsaW5lcywgc3BvdGxpZ2h0LCBib3RoXG4gICAgICAgIHBlcnNwZWN0aXZlTW9kZTogJ2xpbmVzJ1xuICAgIH07XG5cbiAgICAvLyBjYWxsZWQgd2hlbiBtYXAgaXMgbG9hZGVkIHRvIHNldCBzdG9yZWQgb3B0aW9ucyBmb3IgbWFwXG4gICAgdGhpcy5zZXRNYXBFZGl0b3JPcHRpb25zID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBtYXBFZGl0b3JPcHRpb25zID0gb3B0aW9ucztcbiAgICB9O1xuXG4gICAgLy8gcmV0dXJucyBhcHByb3ByaWF0ZSB2YWx1ZXMgZnJvbSB0aGUgdXNlciBwcm9maWxlIG9yIHRoZSBkZWZhdWx0IG9wdGlvbnMgaWYgb3B0aW9ucyBhcmUgbm90IHNldCBmb3IgdGhlIG1hcFxuICAgIHRoaXMuZ2V0TWFwRWRpdG9yT3B0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcHJvZmlsZU9wdGlvbnMgPSAoJHNjb3BlLnVzZXJQcm9maWxlID8gJHNjb3BlLnVzZXJQcm9maWxlLmVkaXRvck9wdGlvbnMgOiBudWxsKTtcbiAgICAgICAgdmFyIHZhbHMgPSBbbWFwRWRpdG9yT3B0aW9ucywgcHJvZmlsZU9wdGlvbnMsIGRlZmF1bHRFZGl0b3JPcHRpb25zXTtcbiAgICAgICAgbWFwRWRpdG9yT3B0aW9ucyA9IF8uZmluZCh2YWxzLCBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiAhXy5pc0VtcHR5KHZhbCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbWFwRWRpdG9yT3B0aW9ucztcbiAgICB9O1xuXG4gICAgLy8gc2F2ZXMgZGVmYXVsdCBvcHRpb25zIGZvciB0aGUgdXNlciAobWFwIG9wdGlvbnMgYXJlIHNhdmVkIGluIGF1dG9zYXZlLmpzKVxuICAgIGZ1bmN0aW9uIHNhdmVVc2VyRWRpdG9yT3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgIGVkaXRvcl9vcHRpb25zOiBKU09OLnN0cmluZ2lmeShvcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHN0YXJ0U3Bpbm5lcigpO1xuICAgICAgICAkaHR0cC5wdXQoJy91c2Vycy8nICsgJHNjb3BlLnVzZXJJZCArICcuanNvbicsIGRhdGEpLnRoZW4oXG4gICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgc3RvcFNwaW5uZXIoKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgZWRpdG9yIG9wdGlvbnMnO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIG9wdGlvbnMgbW9kYWxcblxuICAgICRzY29wZS5lZGl0b3JPcHRpb25zID0gbmV3IFNhbmRiYW5rRWRpdG9yT3B0aW9ucygkc2NvcGUsICRodHRwLCAkcmVzb3VyY2UsICRtb2RhbCwgJGxvZyk7XG5cbiAgICB0aGlzLmVkaXRPcHRpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS5lZGl0b3JPcHRpb25zLm9wZW5Nb2RhbChcbiAgICAgICAgICAgIG1hcEVkaXRvck9wdGlvbnMsXG4gICAgICAgICAgICBmdW5jdGlvbihvcHRpb25zKSB7IC8vIG9uU2F2ZURlZmF1bHRzXG4gICAgICAgICAgICAgICAgc2F2ZVVzZXJFZGl0b3JPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKG9wdGlvbnMpIHsgLy8gb25VcGRhdGVcbiAgICAgICAgICAgICAgICBtYXBFZGl0b3JPcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgICAgICAgICBtYXAuZ2V0QXV0b3NhdmUoKS5zYXZlTm93KCdlZGl0X29wdGlvbnMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9O1xuXG5cbiAgICAvLyAtLS0tLS0tLS0tLS0gc3RhdGUgbW9kZWwgLS0tLS0tLS0tLVxuXG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xuXG4gICAgdmFyIGRlZmF1bHRTdGF0ZSA9IHtcbiAgICAgICAgc2hvd05hdmlnYXRvcjogZmFsc2UsXG4gICAgICAgIGN1cnJlbnRUYWI6IG51bGwsXG4gICAgICAgIHBlcnNwZWN0aXZlUG9pbnRLZXk6IG51bGwsXG4gICAgICAgIGRpc3RpbmN0aW9uVGhpbmdLZXk6IG51bGxcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRTdGF0ZURhdGEgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnN0YXRlID0gZGF0YSB8fCBkZWZhdWx0U3RhdGU7XG4gICAgICAgICAgICAvLyRzY29wZS5jdXJyZW50VGFiID0gc2VsZi5zdGF0ZS5jdXJyZW50VGFiO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gVE9ETzogU2F2ZSBzdGF0ZSBtb3JlIGZyZXF1ZW50bHk/PyBDdXJyZW50bHkgaXQgaXMgb25seSBzYXZlZCB3aGVuIGF1dG9zYXZlIGlzIHRyaWdnZXJlZCBieSBvdGhlciBhY3Rpb25zLi4uXG5cbiAgICB0aGlzLmdldFN0YXRlRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gc2VsZi5zdGF0ZTtcbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tLS0gdGVtcG9yYXJ5IHN0YXRlIGZsYWdzIC0tLS0tLS0tLS0tLVxuXG4gICAgdGhpcy56b29taW5nVG9SZWdpb24gPSBmYWxzZTtcblxuICAgIHRoaXMubW91c2VPdmVyR3JvdXAgPSBudWxsO1xuICAgIHRoaXMubW91c2VPdmVyTGluayA9IG51bGw7XG5cbiAgICB0aGlzLmRyYWdUYXJnZXRHcm91cCA9IG51bGw7XG4gICAgdGhpcy5kcmFnVGFyZ2V0UG9zaXRpb24gPSBudWxsO1xuXG4gICAgdGhpcy5oZWxwVGlwID0gbnVsbDtcblxuICAgIC8vIC0tLS0tLS0tLS0tIGhhbmRsZSBib3R0b20gdGFicyAoXCJzbGlkZXJzXCIpIC0tLS0tLS0tLS0tLS1cblxuICAgIC8vIGluIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zLCBJRCBpcyBlLmcuICdoaXN0b3J5LXRhYicgKElEIG9mIG9uZSBvZiB0aGUgLmJvdHRvbS10YWIncylcblxuICAgIC8vIHRoaXMgaXMgY2FsbGVkIGJ5IG1hcC5jdXJyZW50VGFiQ2hhbmdlZCwgd2hpY2ggaXMgdHJpZ2dlcmVkIGJ5IGEgJHNjb3BlLiR3YXRjaFxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygndWksIGN1cnJlbnRUYWJDaGFuZ2VkOiAnICsgbmV3VmFsdWUpO1xuICAgICAgICBzZWxmLnN0YXRlLmN1cnJlbnRUYWIgPSBuZXdWYWx1ZTtcbiAgICB9O1xuXG4gICAgdGhpcy5jdXJyZW50VGFiSXMgPSBmdW5jdGlvbih0YWJJRCkge1xuICAgICAgICByZXR1cm4gJHNjb3BlLmN1cnJlbnRUYWIgPT0gdGFiSUQ7XG4gICAgfTtcblxuICAgIHRoaXMub3BlblRhYiA9IGZ1bmN0aW9uKHRhYklEKSB7XG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudFRhYiA9IHRhYklEO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5jbG9zZVRhYiA9IGZ1bmN0aW9uKHRhYklEKSB7XG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnN0YXRlLmN1cnJlbnRUYWIgPSBudWxsOyAvLyBUT0RPOiB0cmlnZ2VyIGF1dG9zYXZlXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudFRhYiA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmRpc2FibGVUYWIgPSBmdW5jdGlvbih0YWJJRCkge1xuICAgICAgICAvLyBwcmV2ZW50IG9wZW5pbmcgb3RoZXIgdGFicyB3aGVuIGluIFAgb3IgRCBlZGl0b3JcbiAgICAgICAgaWYgKCRzY29wZS5jdXJyZW50VGFiID09IHNlbGYuVEFCX0lEX1BFUlNQRUNUSVZFUyB8fCAkc2NvcGUuY3VycmVudFRhYiA9PSBzZWxmLlRBQl9JRF9ESVNUSU5DVElPTlMpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgdGhpcy50b2dnbGVUYWIgPSBmdW5jdGlvbih0YWJJRCkge1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5jdXJyZW50VGFiID09IHRhYklEKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRUYWIgPSBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghc2VsZi5kaXNhYmxlVGFiKHRhYklEKSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50VGFiID0gdGFiSUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLnRvZ2dsZU5hdmlnYXRvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5zdGF0ZS5zaG93TmF2aWdhdG9yID0gIXNlbGYuc3RhdGUuc2hvd05hdmlnYXRvcjtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMudG9nZ2xlWm9vbWluZ1RvUmVnaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnpvb21pbmdUb1JlZ2lvbiA9ICFzZWxmLnpvb21pbmdUb1JlZ2lvbjtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0gem9vbWluZyBmdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgdGhpcy5jYW5ab29tSW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG1hcC5nZXREaWFncmFtKCkuc2NhbGUgPCAzMjtcbiAgICB9O1xuXG4gICAgdGhpcy5jYW5ab29tT3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBtYXAuZ2V0RGlhZ3JhbSgpLnNjYWxlID4gMC4yNTtcbiAgICB9O1xuXG4gICAgdGhpcy56b29tSW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xuICAgICAgICBpZiAoZGlhZ3JhbS5zY2FsZSA8IDMyKSB7XG4gICAgICAgICAgICB2YXIgdmIgPSBkaWFncmFtLnZpZXdwb3J0Qm91bmRzLmNvcHkoKTtcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSBkaWFncmFtLnNjYWxlICogMjtcbiAgICAgICAgICAgIGRpYWdyYW0uY2VudGVyUmVjdCh2Yik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy56b29tT3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcbiAgICAgICAgaWYgKGRpYWdyYW0uc2NhbGUgPiAwLjI1KSB7XG4gICAgICAgICAgICB2YXIgdmIgPSBkaWFncmFtLnZpZXdwb3J0Qm91bmRzLmNvcHkoKTtcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSBkaWFncmFtLnNjYWxlIC8gMjtcbiAgICAgICAgICAgIGRpYWdyYW0uY2VudGVyUmVjdCh2Yik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5tYXliZVpvb21Ub1JlZ2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgIC8vIHRoaXMgZmxhZyBpcyBzZXQgYnkgdGhlIHRvb2xiYXIgYnV0dG9uXG4gICAgICAgIGlmIChzZWxmLnpvb21pbmdUb1JlZ2lvbikge1xuICAgICAgICAgICAgc2VsZi56b29taW5nVG9SZWdpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3pvb21Ub1JlZ2lvbiwgc2VsZWN0aW9uIGNvdW50OiAnICsgZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQpO1xuICAgICAgICAgICAgdmFyIHJlY3QgPSBkaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhkaWFncmFtLnNlbGVjdGlvbik7XG4gICAgICAgICAgICBkaWFncmFtLnpvb21Ub1JlY3QocmVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgIH07XG5cbiAgICB0aGlzLnJlc2V0Wm9vbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgIC8vdmFyIHJlY3QgPSBkaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhkaWFncmFtLm5vZGVzKS5jb3B5KCk7XG4gICAgICAgIHZhciByZWN0ID0gbWFwLnNhZmVSZWN0KG1hcC5jb21wdXRlTWFwQm91bmRzKCkpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdyZXNldFpvb20sIGJvdW5kczogJyArIHJlY3QpO1xuICAgICAgICBpZiAocmVjdC53aWR0aCkge1xuICAgICAgICAgICAgcmVjdC5pbmZsYXRlKHJlY3Qud2lkdGggLyA1LCByZWN0LmhlaWdodCAvIDUpO1xuICAgICAgICB9XG4gICAgICAgIGRpYWdyYW0uem9vbVRvUmVjdChyZWN0KTtcbiAgICAgICAgZGlhZ3JhbS5hbGlnbkRvY3VtZW50KGdvLlNwb3QuQ2VudGVyLCBnby5TcG90LkNlbnRlcik7XG4gICAgICAgIGlmIChkaWFncmFtLnNjYWxlID4gMSkge1xuICAgICAgICAgICAgZGlhZ3JhbS5zY2FsZSA9IDE7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tIHRoaW5nIG9wdGlvbnMgKGxheW91dCkgLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgdGhpcy5nZXRTZWxlY3RlZFRoaW5nc09yRGVmYXVsdExheW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2wgPSBzZWxmLmdldFNlbGVjdGVkVGhpbmdzTGF5b3V0KCk7XG4gICAgICAgIGlmIChzbCkge1xuICAgICAgICAgICAgcmV0dXJuIHNsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1hcEVkaXRvck9wdGlvbnMuZGVmYXVsdFRoaW5nTGF5b3V0O1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIHJldHVybnMgYSBub24tbnVsbCB2YWx1ZSBvbmx5IGlmIGFsbCBzZWxlY3RlZCBpdGVtcyBhcmUgZ3JvdXBzIHdpdGggdGhlIHNhbWUgbGF5b3V0XG4gICAgdGhpcy5nZXRTZWxlY3RlZFRoaW5nc0xheW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgIGlmIChkaWFncmFtID09PSBudWxsIHx8IGRpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgIHZhciBsYXlvdXQgPSBudWxsO1xuICAgICAgICB2YXIgaXQgPSBkaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xuICAgICAgICAgICAgaWYgKCFpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgdmFyIGdyb3VwID0gaXQudmFsdWU7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTZWxlY3RlZFRoaW5nc0xheW91dCwgaXQudmFsdWU6ICcgKyBncm91cCk7XG4gICAgICAgICAgICB2YXIgZ3JvdXBMYXlvdXQgPSAoZ3JvdXAuZGF0YSA/IGdyb3VwLmRhdGEubGF5b3V0IDogbnVsbCk7XG4gICAgICAgICAgICBpZiAobGF5b3V0ICE9PSBudWxsICYmIGdyb3VwTGF5b3V0ICE9IGxheW91dClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGxheW91dCA9IGdyb3VwTGF5b3V0O1xuICAgICAgICB9XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2dldFNlbGVjdGVkVGhpbmdzTGF5b3V0OiAnICsgbGF5b3V0KTtcblxuICAgICAgICByZXR1cm4gbGF5b3V0O1xuICAgIH07XG5cbiAgICAvLyBzZXRzIHRoZSBsYXlvdXQgb2YgYWxsIHNlbGVjdGVkIHRoaW5ncyB0byB0aGUgZ2l2ZW4gbGF5b3V0XG4gICAgdGhpcy5zZXRTZWxlY3RlZFRoaW5nc0xheW91dCA9IGZ1bmN0aW9uKGxheW91dE5hbWUpIHtcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xuICAgICAgICB2YXIgaXQgPSBkaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xuICAgICAgICAgICAgaWYgKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBpdC52YWx1ZTtcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbGF5b3V0JywgbGF5b3V0TmFtZSk7XG4gICAgICAgICAgICAgICAgbWFwLmdldExheW91dHMoKS5zZXREZXNjZW5kYW50TGF5b3V0cyhncm91cCwgZ3JvdXAuZGF0YS5sYXlvdXQpO1xuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tIHJlbGF0aW9uc2hpcCBvcHRpb25zIChkaXJlY3Rpb24pIC0tLS0tLS0tLS0tLS0tLS1cblxuICAgIHRoaXMuZ2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzT3JEZWZhdWx0RGlyZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZCA9IHNlbGYuZ2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzRGlyZWN0aW9uKCk7XG4gICAgICAgIGlmIChzZCkge1xuICAgICAgICAgICAgcmV0dXJuIHNkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1hcEVkaXRvck9wdGlvbnMuZGVmYXVsdFJlbGF0aW9uc2hpcERpcmVjdGlvbjtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyByZXR1cm5zIGEgbm9uLW51bGwgdmFsdWUgb25seSBpZiBhbGwgc2VsZWN0ZWQgaXRlbXMgYXJlIHJlbGF0aW9uc2hpcHMgd2l0aCB0aGUgc2FtZSBkaXJlY3Rpb25cbiAgICB0aGlzLmdldFNlbGVjdGVkUmVsYXRpb25zaGlwc0RpcmVjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XG4gICAgICAgIGlmIChkaWFncmFtID09PSBudWxsIHx8IGRpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgIHZhciB0eXBlID0gbnVsbDtcbiAgICAgICAgdmFyIGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgIGlmICghaXQudmFsdWUgaW5zdGFuY2VvZiBnby5MaW5rKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgdmFyIGxpbmsgPSBpdC52YWx1ZTtcbiAgICAgICAgICAgIHZhciBsaW5rVHlwZSA9IChsaW5rLmRhdGEgPyBsaW5rLmRhdGEudHlwZSA6IG51bGwpO1xuICAgICAgICAgICAgaWYgKHR5cGUgIT09IG51bGwgJiYgbGlua1R5cGUgIT0gdHlwZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHR5cGUgPSBsaW5rVHlwZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0eXBlO1xuICAgIH07XG5cbiAgICAvLyBzZXRzIHRoZSBkaXJlY3Rpb24gb2YgYWxsIHNlbGVjdGVkIHJlbGF0aW9uc2hpcHMgdG8gdGhlIGdpdmVuIGRpcmVjdGlvblxuICAgIHRoaXMuc2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzRGlyZWN0aW9uID0gZnVuY3Rpb24oZGlyZWN0aW9uKSB7XG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcbiAgICAgICAgLy9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgcmVsYXRpb25zaGlwIGRpcmVjdGlvblwiKTtcbiAgICAgICAgdmFyIGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcbiAgICAgICAgICAgIGlmIChpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkxpbmspIHtcbiAgICAgICAgICAgICAgICAvL2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHR5cGVcIik7XG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoaXQudmFsdWUuZGF0YSwgJ3R5cGUnLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIC8vZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHR5cGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy9kaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiY2hhbmdlIHJlbGF0aW9uc2hpcCBkaXJlY3Rpb25cIik7XG4gICAgfTtcblxuICAgIC8vIC0tLS0tLS0gaGFuZGxlIGNvcm5lciBjbGlja3MgYW5kIGRvdWJsZSBjbGlja3MgLS0tLS0tLS1cblxuICAgIHZhciBfY29ybmVyQ2xpY2tlZCA9IG51bGw7XG4gICAgdmFyIF9jb3JuZXJGdW5jdGlvbiA9IG51bGw7XG4gICAgdmFyIF9jb3JuZXJUaW1lb3V0ID0gMzAwO1xuXG4gICAgdGhpcy5oYW5kbGVDb3JuZXJDbGljayA9IGZ1bmN0aW9uKGNvcm5lciwgdGhpbmcpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaGFuZGxlQ29ybmVyQ2xpY2s6IGNvcm5lciA9ICcgKyBjb3JuZXIgKyAnLCBjb3JuZXJDbGlja2VkID0gJyArIF9jb3JuZXJDbGlja2VkKTtcbiAgICAgICAgLy8gYXNzdW1lIGl0J3MgYSBzaW5nbGUgY2xpY2ssIGFuZCBzZXQgaGFuZGxlclxuICAgICAgICBfY29ybmVyRnVuY3Rpb24gPSBnZXRDb3JuZXJGdW5jdGlvbihjb3JuZXIsIDEpO1xuICAgICAgICAvLyBhbHJlYWR5IGNsaWNrZWQsIHNvIGl0J3MgYSBkb3VibGUgY2xpY2s7IGNoYW5nZSBoYW5kbGVyXG4gICAgICAgIGlmIChfY29ybmVyQ2xpY2tlZCA9PSBjb3JuZXIpIHtcbiAgICAgICAgICAgIF9jb3JuZXJGdW5jdGlvbiA9IGdldENvcm5lckZ1bmN0aW9uKGNvcm5lciwgMik7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdoYW5kbGVDb3JuZXJDbGljazogZG91YmxlIGNsaWNrIG9uICcgKyBjb3JuZXIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlbWVtYmVyIHRoYXQgYXQgbGVhc3Qgb25lIGNsaWNrIGhhcyBoYXBwZW5lZCBmb3IgdGhlIGN1cnJlbnQgY29ybmVyXG4gICAgICAgIF9jb3JuZXJDbGlja2VkID0gY29ybmVyO1xuXG4gICAgICAgIC8vIHNldCB0aW1lciB0byBpbnZva2Ugd2hhdGV2ZXIgaGFuZGxlciB3ZSBoYXZlIHJlYWR5IHRvIGdvICh1bmxlc3MgYW5vdGhlciBjbGljayBoYXBwZW5zIHdpdGhpbiB0aGUgaW50ZXJ2YWwpXG4gICAgICAgIHZhciB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBkaW5nISBpbnZva2UgaXRcbiAgICAgICAgICAgIGlmIChfY29ybmVyRnVuY3Rpb24gPT0gc2VsZi5zaG93Q29ybmVyVGlwKSB7XG4gICAgICAgICAgICAgICAgX2Nvcm5lckZ1bmN0aW9uKHRoaW5nLCBjb3JuZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfY29ybmVyRnVuY3Rpb24odGhpbmcpOyAvLyBkb24ndCBwYXNzIHRoZSBjb3JuZXIgYXJnIHRvIHRoaW5ncyBsaWtlIGNyZWF0ZUNoaWxkIHRoYXQgaGF2ZSBhIGRpZmZlcmVudCBzZWNvbmQgYXJnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZXNldCBoYW5kbGVyIGFuZCBjbGlja2VkIGZsYWdcbiAgICAgICAgICAgIF9jb3JuZXJGdW5jdGlvbiA9IGdldENvcm5lckZ1bmN0aW9uKGNvcm5lciwgMSk7XG4gICAgICAgICAgICBfY29ybmVyQ2xpY2tlZCA9IG51bGw7XG4gICAgICAgIH0sIF9jb3JuZXJUaW1lb3V0KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0Q29ybmVyRnVuY3Rpb24oY29ybmVyLCBjbGlja3MpIHtcbiAgICAgICAgaWYgKGNvcm5lciA9PSBcIkRcIikge1xuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IHNlbGYuc2hvd0Nvcm5lclRpcCA6IG1hcC5jcmVhdGVTaXN0ZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PSBcIlNcIikge1xuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IG1hcC50b2dnbGVTRXhwYW5zaW9uIDogbWFwLmNyZWF0ZUNoaWxkKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb3JuZXIgPT0gXCJSXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09IDEgPyBzZWxmLnNob3dDb3JuZXJUaXAgOiBtYXAuY3JlYXRlUlRvU2lzdGVyKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb3JuZXIgPT0gXCJQXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09IDEgPyBtYXAudG9nZ2xlUEV4cGFuc2lvbiA6IG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5zZXRQRWRpdG9yUG9pbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gXCJcIikgeyAvLyBjbGljayBvbiB0ZXh0XG4gICAgICAgICAgICByZXR1cm4gKGNsaWNrcyA9PSAxID8gc2VsZi5zaG93Q29ybmVyVGlwIDogZWRpdFRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2dldENvcm5lckZ1bmN0aW9uOiBubyBmdW5jdGlvbiBmb3VuZCBmb3IgY29ybmVyOiAnICsgY29ybmVyICsgJyEnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOQjogaW4gdGhpcyBjYXNlIHRoZSB0aGluZyBpcyBhY3R1YWxseSB0aGUgVGV4dEJveCwgZXhjZXB0IGluIG91dGxpbmUgbGF5b3V0IGl0IGlzIGEgUGFuZWwgaWYgdGhlIGJveCBpcyBkb3VibGUtY2xpY2tlZC4uLlxuICAgIGZ1bmN0aW9uIGVkaXRUZXh0KHRoaW5nLCBjb3JuZXIpIHtcbiAgICAgICAgaWYgKCEkc2NvcGUuY2FuRWRpdCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvL2NvbnNvbGUubG9nKCdlZGl0VGV4dCwgdGhpbmc6ICcgKyB0aGluZyk7XG4gICAgICAgIGlmICh0aGluZyBpbnN0YW5jZW9mIGdvLlBhbmVsKSB7IC8vIG91dGxpbmUgbGF5b3V0XG4gICAgICAgICAgICB2YXIgcGFydCA9IHRoaW5nLnBhcnQ7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdlZGl0VGV4dCwgcGFydDogJyArIHBhcnQpO1xuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiBwYXJ0LmRhdGEgJiYgKHBhcnQuZGF0YS5sYXlvdXQgPT0gJ2xlZnQnIHx8IHBhcnQuZGF0YS5sYXlvdXQgPT0gJ3JpZ2h0JykpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dEJsb2NrTmFtZSA9ICdleHRlcm5hbHRleHQtJyArIHBhcnQuZGF0YS5sYXlvdXQ7XG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSB0aGluZy5wYXJ0LmZpbmRPYmplY3QodGV4dEJsb2NrTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpbmcgPSB0ZXh0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmNvbW1hbmRIYW5kbGVyLmVkaXRUZXh0QmxvY2sodGhpbmcpO1xuICAgIH1cblxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLSBoZWxwIHRpcCBmdW5jdGlvbnMgLSBzZWUgYWxzbyB1c2VyLmpzLCB2aWV3cy9tYXBzL2hlbHBfdGFiIC0tLS0tLS0tLS0tLS0tLVxuXG4gICAgLy8gc2hvd3MgdGhpbmdUaXAgb3Igb25lIG9mIHRoZSBjb3JuZXJYVGlwc1xuICAgIHRoaXMuc2hvd0Nvcm5lclRpcCA9IGZ1bmN0aW9uKHRoaW5nLCBjb3JuZXIpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0Nvcm5lclRpcCcpO1xuICAgICAgICBpZiAoY29ybmVyID09PSAnJykge1xuICAgICAgICAgICAgc2VsZi5zaG93SGVscFRpcCgndGhpbmdUaXAnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuc2hvd0hlbHBUaXAoJ2Nvcm5lcicgKyBjb3JuZXIgKyAnVGlwJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5zaG93SGVscFRpcCA9IGZ1bmN0aW9uKHRpcCkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdzaG93SGVscFRpcDogJyArIHRpcCk7XG5cbiAgICAgICAgLy8gZG9uJ3Qgc2hvdyBoZWxwIGlmIGluIHByZXNlbnRlclxuICAgICAgICBpZiAoc2VsZi5jdXJyZW50VGFiSXMoc2VsZi5UQUJfSURfUFJFU0VOVEVSKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5oZWxwVGlwID0gdGlwO1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICQoJyNoZWxwLXRpcCcpLnNob3coKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnI2hlbHAtdGlwJykuZmFkZU91dCg1MDAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNlbGYuaGVscFRpcCA9IG51bGw7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDUwMDApO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0gZWRpdCBtYXAgVXNlclRhZ3MgLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAkc2NvcGUudGFnZ2luZyA9IG5ldyBTYW5kYmFua1RhZ2dpbmcoJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkbW9kYWwsICRsb2cpO1xuXG4gICAgdGhpcy5lZGl0VXNlclRhZ3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnRhZ2dpbmcub3Blbk1vZGFsKFxuICAgICAgICAgICAgWyRzY29wZS5tYXBJZF0sXG4gICAgICAgICAgICB0cnVlLCAvLyBzaG93IGRlc2NyaXB0aW9uIGZpZWxkXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBtYXAuZ2V0QXV0b3NhdmUoKS5zYXZlTm93KCdlZGl0X3VzZXJ0YWdzJyk7XG4gICAgICAgICAgICB9IC8vIG9uIHVwZGF0ZVxuICAgICAgICApO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0gZWRpdCBtYXAgc2hhcmluZyAtLS0tLS0tLS0tLS0tLS1cblxuICAgICRzY29wZS5zaGFyaW5nID0gbmV3IFNhbmRiYW5rU2hhcmluZygkc2NvcGUsICRodHRwLCAkcmVzb3VyY2UsICRtb2RhbCwgJGxvZyk7XG5cbiAgICB0aGlzLmVkaXRNYXBTaGFyZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnNoYXJpbmcub3Blbk1vZGFsKFxuICAgICAgICAgICAgWyRzY29wZS5tYXBJZF0sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHt9IC8vIG9uIHVwZGF0ZVxuICAgICAgICApO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0gcHJpbnQvZXhwb3J0IHRvIGltYWdlIC0tLS0tLS0tLS0tLS0tLVxuXG4gICAgdGhpcy5wcmludFNsaWRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzdGFydFNwaW5uZXIoKTtcbiAgICAgICAgbWFwLmdldFByZXNlbnRlcigpLmNyZWF0ZVNsaWRlVGh1bWJuYWlscygpO1xuICAgICAgICBzdG9wU3Bpbm5lcigpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgd2luZG93LnByaW50KCk7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgfTtcblxuICAgIHZhciBNSUxMSU9OID0gMTAwMCAqIDEwMDA7XG5cbiAgICB0aGlzLmV4cG9ydFRvSW1hZ2UgPSBmdW5jdGlvbihmb3JtYXQpIHtcblxuICAgICAgICAkc2NvcGUuaW1hZ2VFeHBvcnRMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgJCgnI2V4cG9ydC1pbWFnZSBpbWcnKS5yZW1vdmUoKTtcbiAgICAgICAgbWFwLmdldFRlbXBsYXRlcygpLnNob3dFeHBvcnRGb290ZXIoKTtcblxuICAgICAgICB2YXIgcmVjdCA9IG1hcC5nZXREaWFncmFtKCkuY29tcHV0ZVBhcnRzQm91bmRzKG1hcC5nZXREaWFncmFtKCkubm9kZXMpLmNvcHkoKTtcblxuICAgICAgICB2YXIgaW1hZ2VNQiA9IHJlY3Qud2lkdGggKiByZWN0LmhlaWdodCAqIDQgLyBNSUxMSU9OOyAvLyA0IGJ5dGVzL3BpeGVsXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2ltYWdlTUI6ICcgKyBpbWFnZU1CKTtcblxuICAgICAgICAvLyBtYWtlIHRoZSBtYXggc2l6ZSBvZiB0aGUgaW1hZ2UgMTBNQlxuICAgICAgICAvLyBwbmdTaXplID0gaW1hZ2VNQiAqIHNjYWxlICogc2NhbGVcbiAgICAgICAgLy8gc28gbWF4IHNjYWxlID0gc3FydChwbmdTaXplIC8gaW1hZ2VNQilcbiAgICAgICAgLy8gVGhlc2UgY2FsY3VsYXRpb25zIGRvbid0IHNlZW0gdG8gYmUgcmlnaHQsIGJ1dCBpbiBwcmFjdGljZSB1c2luZyA1MDAgaGVyZVxuICAgICAgICAvLyB3ZSBnZXQgYSBzY2FsZSBvZiAyLjQzIGZvciBhbiBpbWFnZSAxOTk4NCB4IDM0MjQgcGl4ZWxzXG4gICAgICAgIC8vIHdoaWNoIHJlc3VsdHMgaW4gYSBmaWxlIHNpemUgb2YgMS44OCBNQiBhdCAzMiBiaXRzL3BpeGVsLi4uXG4gICAgICAgIC8vIE9SIDI4MzgwIHggNTE5NiBwaXhlbHMsIHNjYWxlID0gMy40MSA9PiBmaWxlIHNpemUgPSAzLjQ5IE1CXG4gICAgICAgIHZhciBzY2FsZSA9IDQ7XG4gICAgICAgIGlmIChpbWFnZU1CKSB7XG4gICAgICAgICAgICBzY2FsZSA9IE1hdGgubWluKDQsIE1hdGguc3FydCg1MCAvIGltYWdlTUIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2ltYWdlIGRpbWVuc2lvbnM6ICcgKyByZWN0LndpZHRoICsgJyB4ICcgKyByZWN0LmhlaWdodCArICcsIGltYWdlIGJ5dGVzOiAnICsgKHJlY3Qud2lkdGggKiByZWN0LmhlaWdodCAqIDQpICsgXG4gICAgICAgIC8vICAgICAgICAnLCBpbWFnZU1COiAnICsgaW1hZ2VNQiArICcsIHNjYWxlOiAnICsgc2NhbGUpO1xuXG4gICAgICAgICRzY29wZS5zaG93SW1hZ2VFeHBvcnQgPSB0cnVlO1xuXG4gICAgICAgIHZhciBwYXJ0c1RvRXhwb3J0ID0gbmV3IGdvLkxpc3QoKTtcbiAgICAgICAgcGFydHNUb0V4cG9ydC5hZGRBbGwobWFwLmdldERpYWdyYW0oKS5ub2Rlcyk7XG4gICAgICAgIHBhcnRzVG9FeHBvcnQuYWRkQWxsKG1hcC5nZXREaWFncmFtKCkubGlua3MpO1xuICAgICAgICBwYXJ0c1RvRXhwb3J0LnJlbW92ZShtYXAuZ2V0UHJlc2VudGVyKCkuc2xpZGVCbG9ja2VyKTtcblxuICAgICAgICB2YXIgZG9JbWFnZSA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGltZyA9IG1hcC5nZXREaWFncmFtKCkubWFrZUltYWdlKHtcbiAgICAgICAgICAgICAgICBwYXJ0czogcGFydHNUb0V4cG9ydCxcbiAgICAgICAgICAgICAgICBtYXhTaXplOiBuZXcgZ28uU2l6ZSgocmVjdC53aWR0aCArIDIwMCkgKiBzY2FsZSwgKHJlY3QuaGVpZ2h0ICsgMjAwKSAqIHNjYWxlKSxcbiAgICAgICAgICAgICAgICBzY2FsZTogc2NhbGUsXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTAwICogc2NhbGUsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJyNmZmZmZmYnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCgnI2V4cG9ydC1pbWFnZScpLmFwcGVuZChpbWcpO1xuICAgICAgICAgICAgJHNjb3BlLmltYWdlRXhwb3J0TG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICBtYXAuZ2V0VGVtcGxhdGVzKCkuaGlkZUV4cG9ydEZvb3RlcigpO1xuICAgICAgICB9LCAxMDApO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0gdXRpbHMgLS0tLS0tLS0tLS0tLVxuXG4gICAgdGhpcy5zcGxpdExpbmVzID0gZnVuY3Rpb24odGV4dCkge1xuICAgICAgICByZXR1cm4gdGV4dC5zcGxpdCgvXFxuLyk7XG4gICAgfTtcbn07Iiwid2luZG93LlNhbmRiYW5rID0ge307XG5cbi8vIHRoZSB0b3Btb3N0IGNvbnRyb2xsZXIgZm9yIHRoZSBhcHBcblxud2luZG93LlVzZXJDdHJsID0gZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkaHR0cCwgJG1vZGFsLCAkdXBsb2FkKSB7XG5cbiAgICAvLyBxdWVyeSBzdHJpbmcgcGFyYW1zXG4gICAgJHNjb3BlLnBhcmFtcyA9IFVSSSh3aW5kb3cubG9jYXRpb24pLnF1ZXJ5KHRydWUpO1xuXG4gICAgLy8gYXV0by1vcGVuIHRoaW5rcXVlcnk/XG4gICAgJHNjb3BlLnRoaW5rcXVlcnkgPSAoJHNjb3BlLnBhcmFtcy50aGlua3F1ZXJ5ID8gdHJ1ZSA6IGZhbHNlKTtcblxuICAgICRzY29wZS51c2VySWQgPSB3aW5kb3cudXNlcklkOyAvLyBzZXQgaW4gbGF5b3V0cy91c2VyXG4gICAgJHNjb3BlLnVzZXJJc0FkbWluID0gd2luZG93LnVzZXJJc0FkbWluO1xuICAgICRzY29wZS51c2VyTmFtZSA9ICcnO1xuICAgICRzY29wZS51c2VyUHJvZmlsZSA9IG51bGw7XG4gICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJyc7XG4gICAgJHNjb3BlLnBhc3N3b3JkID0gJyc7XG4gICAgJHNjb3BlLnBhc3N3b3JkQ29uZmlybSA9ICcnO1xuXG4gICAgJHNjb3BlLmdldE5ld1dpbmRvd05hbWUgPSBmdW5jdGlvbihhY3Rpb24sIG1hcElkKSB7XG4gICAgICAgIGlmIChhY3Rpb24gPT0gJ1ZJRVdfTUFQJykge1xuICAgICAgICAgICAgcmV0dXJuICdWSUVXX01BUF8nICsgbWFwSWQ7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gc2hvdy9oaWRlIHRlc3RzIFVJIGFuZCBtb2RlbCBkZWJ1ZyBmb3JtXG4gICAgJHNjb3BlLnNob3dUZXN0cyA9IGZhbHNlO1xuICAgICRzY29wZS5zaG93TW9kZWwgPSBmYWxzZTtcblxuICAgICRzY29wZS50b2dnbGVTaG93VGVzdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnNob3dUZXN0cyA9ICEkc2NvcGUuc2hvd1Rlc3RzO1xuICAgIH07XG4gICAgJHNjb3BlLnRvZ2dsZVNob3dNb2RlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuc2hvd01vZGVsID0gISRzY29wZS5zaG93TW9kZWw7XG4gICAgfTtcblxuICAgICRzY29wZS5zZXRVc2VySWQgPSBmdW5jdGlvbihpZCkge1xuICAgICAgICAkc2NvcGUudXNlcklkID0gaWQ7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmaXhSb3dIZWlnaHRzKTtcbiAgICB9XG5cbiAgICAvLyBtYWtlIGFsbCBjZWxscyBpbiBhIHJvdyB0aGUgc2FtZSBoZWlnaHRcbiAgICBmdW5jdGlvbiBmaXhSb3dIZWlnaHRzKCkge1xuICAgICAgICAvLyB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gICAgICQoJy5yb3ctaGVpZ2h0JykuZWFjaChmdW5jdGlvbigpIHsgIFxuICAgICAgICAvLyAgICAgICAgIHZhciBoaWdoZXN0Qm94ID0gMDtcbiAgICAgICAgLy8gICAgICAgICAkKCc+IGRpdicsIHRoaXMpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gICAgICAgICAgICAgaWYgKCQodGhpcykuaGVpZ2h0KCkgPiBoaWdoZXN0Qm94KSBcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGhpZ2hlc3RCb3ggPSAkKHRoaXMpLmhlaWdodCgpO1xuICAgICAgICAvLyAgICAgICAgIH0pOyAgXG4gICAgICAgIC8vICAgICAgICAgJCgnPiBkaXYnLCB0aGlzKS5oZWlnaHQoaGlnaGVzdEJveCk7XG4gICAgICAgIC8vICAgICB9KTsgICAgICAgIFxuICAgICAgICAvLyB9LCAzMDApO1xuICAgIH1cblxuICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICBpZiAoJHNjb3BlLnVzZXJJZCkge1xuICAgICAgICAgICAgdmFyIHVybCA9ICcvdXNlcnMvJyArICRzY29wZS51c2VySWQgKyAnL3Byb2ZpbGUuanNvbic7XG4gICAgICAgICAgICB3aW5kb3cuc3RhcnRTcGlubmVyKCk7XG4gICAgICAgICAgICAkaHR0cC5nZXQodXJsKS50aGVuKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7IC8vIHN1Y2Nlc3NcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJQcm9maWxlID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgaW5pdFNlbGVjdGVkQWRtaW5UYWdzKCk7XG4gICAgICAgICAgICAgICAgICAgIGluaXRTZWxlY3RlZEZvbGxvd2FibGVPcmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2NzVGFnZ2luZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNjc1RhZ2dpbmcubG9hZENjc1RhZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc3RvcFNwaW5uZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZml4Um93SGVpZ2h0cygpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVhc29uKSB7IC8vIGVycm9yXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zdG9wU3Bpbm5lcigpO1xuICAgICAgICAgICAgICAgICAgICBhbGVydCgnQ291bGQgbm90IGxvYWQgdXNlciBwcm9maWxlIGRhdGEnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIGNvdXJzZXMvc3Vic2NyaXB0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIC8vIG9wZW4gdGhlIFN0cmlwZSBDaGVja291dCBkaWFsb2cgYW5kIGdldCBhIHRva2VuXG4gICAgLy8gTkI6IGFtb3VudCBpcyBzdG9yZWQgaW4gdGhlIFN0cmlwZSBwbGFuIGRlZmluaXRpb25cbiAgICAkc2NvcGUuYWRkU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24ocGxhbikge1xuICAgICAgICB2YXIgaGFuZGxlciA9IFN0cmlwZUNoZWNrb3V0LmNvbmZpZ3VyZSh7XG4gICAgICAgICAgICBrZXk6ICRzY29wZS51c2VyUHJvZmlsZS5hY2NvdW50LnN0cmlwZUtleSxcbiAgICAgICAgICAgIG5hbWU6IFwiU3Vic2NyaWJlIHRvIE1ldGFNYXBcIixcbiAgICAgICAgICAgIGltYWdlOiBcIi9hc3NldHMvYmFkZ2UtbG9nby02NC5wbmdcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwbGFuLm5hbWUsXG4gICAgICAgICAgICBwYW5lbExhYmVsOiBcIlBheSB7e2Ftb3VudH19L1wiICsgcGxhbi5pbnRlcnZhbCxcbiAgICAgICAgICAgIGFtb3VudDogcGxhbi5wcmljZSxcbiAgICAgICAgICAgIGFsbG93UmVtZW1iZXJNZTogZmFsc2UsXG4gICAgICAgICAgICBlbWFpbDogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuZW1haWwsXG4gICAgICAgICAgICB0b2tlbjogZnVuY3Rpb24odG9rZW4sIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd0b2tlbjogJywgdG9rZW4pO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvY2hhcmdlcy9zdWJzY3JpYmUnLCB7XG4gICAgICAgICAgICAgICAgICAgIHBsYW5faWQ6IHBsYW4uY29kZSxcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5faWQ6IHRva2VuLmlkXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5zdWNjZXNzKCdTdWJzY3JpcHRpb24gY3JlYXRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5lcnJvcignU3Vic2NyaXB0aW9uIGNvdWxkIG5vdCBiZSBjcmVhdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBoYW5kbGVyLm9wZW4oKTtcbiAgICB9O1xuXG4gICAgLy8gZm9yIGJ1eS1jb3Vyc2UtYnV0dG9uIGRpcmVjdGl2ZVxuICAgICRzY29wZS5nZXRCdXlCdXR0b25MYWJlbCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgIHZhciBjb3Vyc2U7XG4gICAgICAgIGlmIChjb3Vyc2UgPSBnZXRGcmVlQ291cnNlKGlkKSkge1xuICAgICAgICAgICAgcmV0dXJuICdGcmVlJztcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxlZENvdXJzZShpZCkpIHtcbiAgICAgICAgICAgIHJldHVybiAnRW5yb2xsZWQnO1xuICAgICAgICB9IGVsc2UgaWYgKGNvdXJzZSA9IGdldEVucm9sbGFibGVDb3Vyc2UoaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0Vucm9sbCAtICQnICsgKGNvdXJzZS5wcmljZSAvIDEwMCkudG9GaXhlZCgyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkc2NvcGUuZ2V0Q291cnNlU3RhdHVzU3VtbWFyeSA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgIHZhciBjb3Vyc2UgPSAkc2NvcGUuZ2V0Q291cnNlKGlkKTtcbiAgICAgICAgaWYgKGNvdXJzZSkge1xuICAgICAgICAgICAgdmFyIHRleHQgPSBjb3Vyc2Uuc3RlcHNDb21wbGV0ZWQgKyAnIG9mICcgKyBjb3Vyc2Uuc3RlcHMgKyAnIHN0ZXBzIGNvbXBsZXRlZCc7XG4gICAgICAgICAgICBpZiAoY291cnNlLmVucm9sbWVudCkge1xuICAgICAgICAgICAgICAgIHRleHQgPSBcIkVucm9sbGVkIFwiICsgY291cnNlLmVucm9sbWVudC5kYXRlICtcbiAgICAgICAgICAgICAgICAgICAgKGNvdXJzZS5lbnJvbG1lbnQuc3RyaXBlRGF0YS5yZWZ1bmRlZCA/IFwiIChSZWZ1bmRlZClcIiA6IFwiXCIpICtcbiAgICAgICAgICAgICAgICAgICAgJyAtICcgK1xuICAgICAgICAgICAgICAgICAgICB0ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZS5jb2RlICsgJyAtICcgKyB0ZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLmdldENvdXJzZUNvbXBsZXRlZFBlcmNlbnQgPSBmdW5jdGlvbihpZCkge1xuICAgICAgICB2YXIgY291cnNlID0gJHNjb3BlLmdldENvdXJzZShpZCk7XG4gICAgICAgIGlmIChjb3Vyc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2Uuc3RlcHNDb21wbGV0ZWRQZXJjZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLm1heWJlQnV5Q291cnNlID0gZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgdmFyIGNvdXJzZTtcbiAgICAgICAgaWYgKGNvdXJzZSA9IGdldEZyZWVDb3Vyc2UoaWQpKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvY291cnNlcy8nICsgY291cnNlLmlkO1xuICAgICAgICB9IGVsc2UgaWYgKGNvdXJzZSA9IGdldEVucm9sbGVkQ291cnNlKGlkKSkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2NvdXJzZXMvJyArIGNvdXJzZS5pZDtcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxhYmxlQ291cnNlKGlkKSkge1xuICAgICAgICAgICAgJHNjb3BlLmJ1eUNvdXJzZShjb3Vyc2UpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5nZXRDb3Vyc2UgPSBmdW5jdGlvbihpZCkge1xuICAgICAgICB2YXIgY291cnNlO1xuICAgICAgICBpZiAoY291cnNlID0gZ2V0RnJlZUNvdXJzZShpZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoY291cnNlID0gZ2V0RW5yb2xsZWRDb3Vyc2UoaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gY291cnNlO1xuICAgICAgICB9IGVsc2UgaWYgKGNvdXJzZSA9IGdldEVucm9sbGFibGVDb3Vyc2UoaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gY291cnNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRGcmVlQ291cnNlKGlkKSB7XG4gICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGUgJiYgXy5maW5kKCRzY29wZS51c2VyUHJvZmlsZS5mcmVlQWNjZXNzaWJsZUNvdXJzZXMsIGZ1bmN0aW9uKGNvdXJzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZS5pZCA9PSBpZCAmJiBjb3Vyc2UuZW5yb2xtZW50ID09IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RW5yb2xsZWRDb3Vyc2UoaWQpIHtcbiAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZSAmJiBfLmZpbmQoJHNjb3BlLnVzZXJQcm9maWxlLmZyZWVBY2Nlc3NpYmxlQ291cnNlcywgZnVuY3Rpb24oY291cnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gY291cnNlLmlkID09IGlkICYmIGNvdXJzZS5lbnJvbG1lbnQgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RW5yb2xsYWJsZUNvdXJzZShpZCkge1xuICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlICYmIF8uZmluZCgkc2NvcGUudXNlclByb2ZpbGUubm9uRnJlZUFjY2Vzc2libGVDb3Vyc2VzLCBmdW5jdGlvbihjb3Vyc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2UuaWQgPT0gaWQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIG9wZW4gdGhlIFN0cmlwZSBDaGVja291dCBkaWFsb2cgYW5kIGdldCBhIHRva2VuXG4gICAgLy8gTkI6IGFtb3VudCBpcyBwYXNzZWQgZnJvbSBvdXIgY291cnNlIGRlZmluaXRpb25cbiAgICAkc2NvcGUuYnV5Q291cnNlID0gZnVuY3Rpb24oY291cnNlKSB7XG4gICAgICAgIHZhciBoYW5kbGVyID0gU3RyaXBlQ2hlY2tvdXQuY29uZmlndXJlKHtcbiAgICAgICAgICAgIGtleTogJHNjb3BlLnVzZXJQcm9maWxlLmFjY291bnQuc3RyaXBlS2V5LFxuICAgICAgICAgICAgbmFtZTogXCJFbnJvbGwgaW4gQ291cnNlXCIsXG4gICAgICAgICAgICBpbWFnZTogXCIvYXNzZXRzL2JhZGdlLWxvZ28tNjQucG5nXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogY291cnNlLmNvZGUsXG4gICAgICAgICAgICBhbW91bnQ6IGNvdXJzZS5wcmljZSxcbiAgICAgICAgICAgIGFsbG93UmVtZW1iZXJNZTogZmFsc2UsXG4gICAgICAgICAgICBlbWFpbDogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuZW1haWwsXG4gICAgICAgICAgICB0b2tlbjogZnVuY3Rpb24odG9rZW4sIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd0b2tlbjogJywgdG9rZW4pO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvY2hhcmdlcy9idXlfY291cnNlJywge1xuICAgICAgICAgICAgICAgICAgICBjb3Vyc2VfY29kZTogY291cnNlLmNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGNvdXJzZV9wcmljZTogY291cnNlLnByaWNlLFxuICAgICAgICAgICAgICAgICAgICB0b2tlbl9pZDogdG9rZW4uaWRcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ0NvdXJzZSBwdXJjaGFzZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZWxvYWQgcGFnZSB0byBoYW5kbGUgc3RyaXBlIGJ1ZyAoPykgLSBsaW5rcyBub3QgY2xpY2thYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuZXJyb3IoJ0NvdXJzZSBwdXJjaGFzZSBjb3VsZCBub3QgYmUgY29tcGxldGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc3RyaXBlIGVycm9yOiAnLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBoYW5kbGVyLm9wZW4oKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNhbmNlbFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbikge1xuICAgICAgICB3aW5kb3cuc3RhcnRTcGlubmVyKCk7XG4gICAgICAgICRodHRwLmRlbGV0ZSgnL2NoYXJnZXMvdW5zdWJzY3JpYmU/c3Vic2NyaXB0aW9uX2lkPScgKyBzdWJzY3JpcHRpb24uaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5zdWNjZXNzKCdTdWJzY3JpcHRpb24gY2FuY2VsbGVkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuZXJyb3IoJ1N1YnNjcmlwdGlvbiBjb3VsZCBub3QgYmUgY2FuY2VsbGVkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gZGVidWcvdGVzdCBvbmx5XG4gICAgJHNjb3BlLmNsZWFyQ3VzdG9tZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgd2luZG93LnN0YXJ0U3Bpbm5lcigpO1xuICAgICAgICAkaHR0cC5kZWxldGUoJy9jaGFyZ2VzL2NsZWFyX2N1c3RvbWVyJykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ0N1c3RvbWVyIGNsZWFyZWQnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5lcnJvcignQ3VzdG9tZXIgY291bGQgbm90IGJlIGNsZWFyZWQnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBwb2ludHMgYW5kIGJhZGdlcyAtLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAkc2NvcGUuaGFzQ3VycmVudEJhZGdlID0gZnVuY3Rpb24oa2V5LCBsZXZlbCkge1xuICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlICYmICRzY29wZS51c2VyUHJvZmlsZS5iYWRnZXMuY3VycmVudFtrZXldID09IGxldmVsO1xuICAgIH07XG5cbiAgICAkc2NvcGUuaGFzTmV3QmFkZ2UgPSBmdW5jdGlvbihrZXksIGxldmVsKSB7XG4gICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGUgJiYgJHNjb3BlLnVzZXJQcm9maWxlLmJhZGdlcy5uZXdba2V5XSA9PSBsZXZlbDtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmhhc05ld0JhZGdlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlICYmIF8ua2V5cygkc2NvcGUudXNlclByb2ZpbGUuYmFkZ2VzLm5ldykubGVuZ3RoID4gMDtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmdldEJhZGdlRGVmaW5pdGlvbiA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUoJHNjb3BlLnVzZXJQcm9maWxlLmJhZGdlcy5kZWZpbml0aW9ucywge1xuICAgICAgICAgICAga2V5OiBrZXlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gdHV0b3JpYWwgLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIHRyeSB7XG4gICAgICAgICRzY29wZS50dXRvcmlhbEVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cubWFwRGF0YSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIHN0YXJ0IHR1dG9yaWFsOlxuICAgICAgICB2YXIgX3R1dG9yaWFsID0gbmV3IFNhbmRiYW5rRWRpdG9yLlR1dG9yaWFsKCk7XG5cbiAgICAgICAgJHNjb3BlLnN0YXJ0VHV0b3JpYWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF90dXRvcmlhbC5zdGFydCgpO1xuICAgICAgICB9O1xuICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBmZWVkYmFjayBmb3JtIC0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAkc2NvcGUuZmVlZGJhY2sgPSAnJztcblxuICAgICRzY29wZS50b2dnbGVGZWVkYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcjZmVlZGJhY2stZHJvcGRvd24nKS5zbGlkZVRvZ2dsZSgnZmFzdCcpLmZpbmQoJ3RleHRhcmVhJykuZ2V0KDApLmZvY3VzKCk7XG4gICAgfTtcblxuICAgICRzY29wZS5zdWJtaXRGZWVkYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoJHNjb3BlLmZlZWRiYWNrID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBlbXB0eSBpbnB1dC4uLlxuICAgICAgICB9XG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogJy91c2Vycy9mZWVkYmFjaycsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZixcbiAgICAgICAgICAgICAgICBmZWVkYmFjazogJHNjb3BlLmZlZWRiYWNrXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZlZWRiYWNrID0gJyc7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ1RoYW5rIHlvdSBmb3IgeW91ciBmZWVkYmFjayEnKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmVycm9yKCdlcnJvciBzZW5kaW5nIGZlZWRiYWNrOiAnLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKCcjZmVlZGJhY2stZHJvcGRvd24nKS5zbGlkZVRvZ2dsZSgnZmFzdCcpO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0gdXNlcidzIHVzZXIgdGFncyAtLS0tLS0tLS0tLVxuXG4gICAgLy8gTkI6IHRoaXMgaXMgc2ltaWxhciB0byBtYXBzIHRhZ2dpbmcgaW4gdGFnZ2luZy5qcyAtIGJ1dCBzaW1wbGVyLCBhcyB3ZSBkbyBub3QgaGF2ZSB0byBkZWFsIHdpdGggXG4gICAgLy8gbXVsdGlwbGUgdGFnZ2FibGUgaXRlbXMsIHdoaWNoIG1lYW5zIHRyYWNraW5nIGV4aXN0aW5nIHZzLiBuZXcgdGFncywgZXRjLi4uXG5cbiAgICAkc2NvcGUubmV3VGFnID0ge1xuICAgICAgICBuYW1lOiAnJ1xuICAgIH07XG5cbiAgICAvLyB0YWcgYXV0b2NvbXBsZXRlXG4gICAgJHNjb3BlLmdldFVzZXJUYWdzID0gZnVuY3Rpb24odmlld1ZhbHVlKSB7XG4gICAgICAgIHZhciB1cmwgPSAnL3VzZXJfdGFncy9saXN0Lmpzb24/cT0nICsgdmlld1ZhbHVlO1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEudGFncztcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS51cGRhdGVVc2VyVXNlclRhZ3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHRhZ0xpc3QgPSBfLnBsdWNrKCRzY29wZS51c2VyUHJvZmlsZS51c2VyVGFncywgJ25hbWUnKS5qb2luKCcsJyk7XG4gICAgICAgICRodHRwLnB1dCgnL3VzZXJfdGFncy91cGRhdGVfdXNlcl91c2VyX3RhZ3MnLCBbdGFnTGlzdF0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1RhZ3Mgc2F2ZWQnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdDb3VsZCBub3Qgc2F2ZSB0YWdzJztcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZGVsZXRlVGFnID0gZnVuY3Rpb24odGFnKSB7XG4gICAgICAgIHZhciBpID0gXy5pbmRleE9mKCRzY29wZS51c2VyUHJvZmlsZS51c2VyVGFncywgdGFnKTtcbiAgICAgICAgJHNjb3BlLnVzZXJQcm9maWxlLnVzZXJUYWdzLnNwbGljZShpLCAxKTtcbiAgICAgICAgJHNjb3BlLnVwZGF0ZVVzZXJVc2VyVGFncygpO1xuICAgIH07XG5cbiAgICAkc2NvcGUudGFnU2VsZWN0ZWQgPSBmdW5jdGlvbihpdGVtLCBtb2RlbCwgbGFiZWwpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygndGFnU2VsZWN0ZWQ6ICcsIGl0ZW0sIG1vZGVsLCBsYWJlbCk7XG4gICAgICAgICRzY29wZS5hZGRUYWcoaXRlbS5uYW1lKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmVkaXRpbmdUYWdLZXlwcmVzcyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMpIHtcbiAgICAgICAgICAgICRzY29wZS5hZGRUYWcoJHNjb3BlLm5ld1RhZy5uYW1lKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkc2NvcGUuYWRkVGFnID0gZnVuY3Rpb24odGFnTmFtZSkge1xuICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUudXNlclRhZ3MucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiB0YWdOYW1lXG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUubmV3VGFnLm5hbWUgPSAnJztcbiAgICAgICAgJHNjb3BlLnVwZGF0ZVVzZXJVc2VyVGFncygpO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0gdXNlcidzL21hcCdzIENDUyB0YWdzIC0tLS0tLS0tLS0tXG5cbiAgICAvLyB0aGlzIG1hbmFnZXMgQ0NTIHRhZ3MgZm9yIGVpdGhlciB0aGUgY3VycmVudCB1c2VyIG9yIHRoZSBjdXJyZW50IG1hcCwgXG4gICAgLy8gZGVwZW5kaW5nIHdoaWNoIHBhZ2Ugd2UncmUgb24gLSBtYXBJZCBnZXRzIG92ZXJyaWRkZW4gaW4gZWRpdG9yLmpzIGlmIHdlJ3JlIGVkaXRpbmcgYSBtYXBcblxuICAgIHRyeSB7XG4gICAgICAgICRzY29wZS5jY3NUYWdnaW5nID0gbmV3IFNhbmRiYW5rQ2NzVGFnZ2luZygkc2NvcGUsICRodHRwLCAkbW9kYWwpO1xuICAgICAgICAkc2NvcGUuY2NzVGFnZ2luZy5tYXBJZCA9IG51bGw7XG4gICAgfSBjYXRjaCAoZSkge31cblxuICAgIC8vIC0tLS0tLS0tLSB1c2VyJ3MgYWRtaW4gdGFncyAtLS0tLS0tLS0tLVxuXG4gICAgLy8ga2V5IChpbmRleCk6IGFkbWluIHRhZyBJRDsgdmFsdWU6IHRydWUvZmFsc2UgKGlmIHVzZXIgZm9sbG93cyB0aGUgYWRtaW4gdGFnKVxuICAgICRzY29wZS5zZWxlY3RlZFVzZXJBZG1pblRhZ3MgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGluaXRTZWxlY3RlZEFkbWluVGFncygpIHtcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkVXNlckFkbWluVGFncyA9IFtdO1xuICAgICAgICBfLmVhY2goJHNjb3BlLnVzZXJQcm9maWxlLmFkbWluVGFncywgZnVuY3Rpb24odGFnKSB7XG4gICAgICAgICAgICBpZiAoXy5maW5kV2hlcmUoJHNjb3BlLnVzZXJQcm9maWxlLnVzZXJBZG1pblRhZ3MsIHtcbiAgICAgICAgICAgICAgICBpZDogdGFnLmlkXG4gICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFVzZXJBZG1pblRhZ3NbdGFnLmlkXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICRzY29wZS51cGRhdGVVc2VyQWRtaW5UYWdzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZWxlY3RlZFRhZ05hbWVzID0gXy5tYXAoJHNjb3BlLnVzZXJQcm9maWxlLmFkbWluVGFncywgZnVuY3Rpb24odGFnKSB7XG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLnNlbGVjdGVkVXNlckFkbWluVGFnc1t0YWcuaWRdID8gdGFnLm5hbWUgOiBudWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHRhZ0xpc3QgPSBfLndpdGhvdXQoc2VsZWN0ZWRUYWdOYW1lcywgbnVsbCkuam9pbignLCcpO1xuICAgICAgICAkaHR0cC5wdXQoJy9hZG1pbl90YWdzL3VwZGF0ZV91c2VyX2FkbWluX3RhZ3MnLCBbdGFnTGlzdF0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ0ludGVyZXN0cyBzYXZlZCc7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ0NvdWxkIG5vdCBzYXZlIGludGVyZXN0cyc7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tIHVzZXIncyBmb2xsb3dlZCBvcmdzIC0tLS0tLS0tLS0tXG5cbiAgICAvLyBrZXkgKGluZGV4KTogb3JnIElEOyB2YWx1ZTogdHJ1ZS9mYWxzZSAoaWYgdXNlciBmb2xsb3dzIHRoZSBvcmcpXG4gICAgJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnMgPSBbXTtcblxuICAgICRzY29wZS51c2VySXNGb2xsb3dpbmdPcmcgPSBmdW5jdGlvbihpZCkge1xuICAgICAgICByZXR1cm4gJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbaWRdO1xuICAgIH07XG5cbiAgICAkc2NvcGUudG9nZ2xlVXNlckZvbGxvd2luZ09yZyA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgIGlmICghJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbaWRdIHx8IGNvbmZpcm0oJ1N0b3AgZm9sbG93aW5nIHRoaXMgVGhpbmtOYXRpb24/JykpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zW2lkXSA9ICEkc2NvcGUuc2VsZWN0ZWRGb2xsb3dhYmxlT3JnYW5pemF0aW9uc1tpZF07XG4gICAgICAgICAgICAkc2NvcGUudXBkYXRlRm9sbG93ZWRPcmdhbml6YXRpb25zKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaW5pdFNlbGVjdGVkRm9sbG93YWJsZU9yZ3MoKSB7XG4gICAgICAgICRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zID0gW107XG4gICAgICAgIF8uZWFjaCgkc2NvcGUudXNlclByb2ZpbGUuZm9sbG93ZWRPcmdhbml6YXRpb25zLCBmdW5jdGlvbihvcmcpIHtcbiAgICAgICAgICAgIGlmIChfLmZpbmRXaGVyZSgkc2NvcGUudXNlclByb2ZpbGUuZm9sbG93YWJsZU9yZ2FuaXphdGlvbnMsIHtcbiAgICAgICAgICAgICAgICBpZDogb3JnLmlkXG4gICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zW29yZy5pZF0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUudXBkYXRlRm9sbG93ZWRPcmdhbml6YXRpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZWxlY3RlZE9yZ0lkcyA9IF8ubWFwKCRzY29wZS51c2VyUHJvZmlsZS5mb2xsb3dhYmxlT3JnYW5pemF0aW9ucywgZnVuY3Rpb24ob3JnKSB7XG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbb3JnLmlkXSA/IG9yZy5pZCA6IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgb3JnSWRMaXN0ID0gXy53aXRob3V0KHNlbGVjdGVkT3JnSWRzLCBudWxsKS5qb2luKCcsJyk7XG4gICAgICAgICRodHRwLnB1dCgnL29yZ2FuaXphdGlvbl9mb2xsb3dzL3VwZGF0ZV91c2VyX29yZ2FuaXphdGlvbl9mb2xsb3dzJywgW29yZ0lkTGlzdF0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1RoaW5rTmF0aW9ucyBzYXZlZCc7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ0NvdWxkIG5vdCBzYXZlIFRoaW5rTmF0aW9ucyc7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tIHVzZXIncyBvcmcgbWVtYmVyc2hpcHMgLS0tLS0tLS0tLS1cblxuICAgICRzY29wZS5qb2luTmF0aW9uID0gbmV3IFNhbmRiYW5rSm9pbk5hdGlvbigkc2NvcGUsICRodHRwLCAkbW9kYWwpO1xuXG4gICAgZnVuY3Rpb24gZ2V0TWVtYmVyc2hpcEZvck9yZyhpZCkge1xuICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUoJHNjb3BlLnVzZXJQcm9maWxlLm1lbWJlcnNoaXBzLCB7XG4gICAgICAgICAgICBvcmdhbml6YXRpb25JZDogaWRcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLnVzZXJJc01lbWJlck9mT3JnID0gZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgaWYgKCRzY29wZS51c2VyUHJvZmlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIChnZXRNZW1iZXJzaGlwRm9yT3JnKGlkKSAhPSB1bmRlZmluZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS50b2dnbGVVc2VyTWVtYmVyT2ZPcmcgPSBmdW5jdGlvbihpZCwgbmFtZSkge1xuICAgICAgICBpZiAoJHNjb3BlLnVzZXJJc01lbWJlck9mT3JnKGlkKSkge1xuICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1JlbW92ZSB5b3VyIG1lbWJlcnNoaXAgaW4gdGhpcyBUaGlua05hdGlvbj8nKSkge1xuICAgICAgICAgICAgICAgIHZhciBtZW1iZXJzaGlwID0gZ2V0TWVtYmVyc2hpcEZvck9yZyhpZCk7XG4gICAgICAgICAgICAgICAgJGh0dHAuZGVsZXRlKCcvbWVtYmVyc2hpcHMvJyArIG1lbWJlcnNoaXAuaWQgKyAnLmpzb24nKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzY29wZS5qb2luTmF0aW9uLm9wZW5Nb2RhbChcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLy8gLS0tLS0tLS0tLS0tIGZvbGxvd2luZyBvdGhlciB1c2VycyAtLS0tLS0tLS0tLS0tLS1cblxuICAgICRzY29wZS5mb2xsb3dVc2VyID0gZnVuY3Rpb24odXNlcikge1xuICAgICAgICAkaHR0cC5wb3N0KCcvdXNlcl9mb2xsb3dzLmpzb24nLCB7XG4gICAgICAgICAgICBmb2xsb3dlZV9pZDogdXNlci5pZFxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdXNlci5mb2xsb3dJZCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnWW91IGFyZSBub3cgZm9sbG93aW5nICcgKyB1c2VyLm5hbWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge30pO1xuICAgIH07XG5cbiAgICAkc2NvcGUudW5mb2xsb3dVc2VyID0gZnVuY3Rpb24odXNlcikge1xuICAgICAgICAkaHR0cC5kZWxldGUoJy91c2VyX2ZvbGxvd3MvJyArIHVzZXIuZm9sbG93SWQgKyAnLmpzb24nKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdXNlci5mb2xsb3dJZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnWW91IGFyZSBubyBsb25nZXIgZm9sbG93aW5nICcgKyB1c2VyLm5hbWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge30pO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0gZm9sbG93aW5nIHRhZ3MgLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBmdW5jdGlvbiBmb2xsb3dUYWcoY29udHJvbGxlciwgdGFnKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy8nICsgY29udHJvbGxlciArICcvJyArIHRhZy5pZCArICcvZm9sbG93Lmpzb24nLCB7XG4gICAgICAgICAgICBpZDogdGFnLmlkXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB0YWcuZm9sbG93aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBhbGVydGlmeS5zdWNjZXNzKCdZb3UgYXJlIG5vdyBmb2xsb3dpbmcgJyArIHRhZy5uYW1lKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHt9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1bmZvbGxvd1RhZyhjb250cm9sbGVyLCB0YWcpIHtcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvJyArIGNvbnRyb2xsZXIgKyAnLycgKyB0YWcuaWQgKyAnL3VuZm9sbG93Lmpzb24nKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdGFnLmZvbGxvd2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ1lvdSBhcmUgbm8gbG9uZ2VyIGZvbGxvd2luZyAnICsgdGFnLm5hbWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge30pO1xuICAgIH1cblxuICAgICRzY29wZS5mb2xsb3dVc2VyVGFnID0gZnVuY3Rpb24odGFnKSB7XG4gICAgICAgIGZvbGxvd1RhZygndXNlcl90YWdzJywgdGFnKTtcbiAgICB9O1xuICAgICRzY29wZS51bmZvbGxvd1VzZXJUYWcgPSBmdW5jdGlvbih0YWcpIHtcbiAgICAgICAgdW5mb2xsb3dUYWcoJ3VzZXJfdGFncycsIHRhZyk7XG4gICAgfTtcblxuICAgICRzY29wZS5mb2xsb3dBZG1pblRhZyA9IGZ1bmN0aW9uKHRhZykge1xuICAgICAgICBmb2xsb3dUYWcoJ2FkbWluX3RhZ3MnLCB0YWcpO1xuICAgIH07XG4gICAgJHNjb3BlLnVuZm9sbG93QWRtaW5UYWcgPSBmdW5jdGlvbih0YWcpIHtcbiAgICAgICAgdW5mb2xsb3dUYWcoJ2FkbWluX3RhZ3MnLCB0YWcpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZm9sbG93Q2NzVGFnID0gZnVuY3Rpb24odGFnKSB7XG4gICAgICAgIGZvbGxvd1RhZygnY29tbW9uX2NvcmVfc3RhbmRhcmRzJywgdGFnKTtcbiAgICB9O1xuICAgICRzY29wZS51bmZvbGxvd0Njc1RhZyA9IGZ1bmN0aW9uKHRhZykge1xuICAgICAgICB1bmZvbGxvd1RhZygnY29tbW9uX2NvcmVfc3RhbmRhcmRzJywgdGFnKTtcbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tIGF1dG8tc2F2ZSB1c2VyIHByb2ZpbGUgLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvLyBkb24ndCBsZXQgYXV0b3NhdmUgYmUgdHJpZ2dlcmVkIG1vcmUgdGhhbiBldmVyeSBOIG1pbGxpc2Vjb25kcy4uLlxuICAgICRzY29wZS5hdXRvc2F2ZSA9IF8uZGVib3VuY2UoYXV0b3NhdmVOb3csIDIwMDApO1xuXG4gICAgZnVuY3Rpb24gYXV0b3NhdmVOb3coKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2F1dG9zYXZpbmcgdXNlciBwcm9maWxlJyk7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgZW1haWw6ICRzY29wZS51c2VyUHJvZmlsZS51c2VyLmVtYWlsLFxuICAgICAgICAgICAgYWx0X2VtYWlsOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5hbHRFbWFpbCxcbiAgICAgICAgICAgIGZpcnN0X25hbWU6ICRzY29wZS51c2VyUHJvZmlsZS51c2VyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3RfbmFtZTogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIubGFzdE5hbWUsXG4gICAgICAgICAgICBhYm91dF9tZTogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuYWJvdXRNZVxuICAgICAgICB9O1xuICAgICAgICBpZiAoJHNjb3BlLnBhc3N3b3Jkc01hdGNoKCkgJiYgJHNjb3BlLnBhc3N3b3JkLmxlbmd0aCkge1xuICAgICAgICAgICAgZGF0YS5wYXNzd29yZCA9ICRzY29wZS5wYXNzd29yZDtcbiAgICAgICAgICAgIGRhdGEucGFzc3dvcmRfY29uZmlybWF0aW9uID0gJHNjb3BlLnBhc3N3b3JkO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhcnRTcGlubmVyKCk7XG4gICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdTYXZpbmcuLi4nO1xuICAgICAgICAkaHR0cC5wdXQoJy91c2Vycy8nICsgJHNjb3BlLnVzZXJJZCwgZGF0YSkudGhlbihcbiAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgc3RvcFNwaW5uZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXMoZGF0YSwgJ3Bhc3N3b3JkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1Byb2ZpbGUgYW5kIHBhc3N3b3JkIHNhdmVkJztcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdQcm9maWxlIHNhdmVkJztcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdDb3VsZCBub3Qgc2F2ZSBwcm9maWxlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAkc2NvcGUucGFzc3dvcmRzTWF0Y2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICghJHNjb3BlLnBhc3N3b3JkLmxlbmd0aCAmJiAhJHNjb3BlLnBhc3N3b3JkQ29uZmlybS5sZW5ndGgpIHx8XG4gICAgICAgICAgICAkc2NvcGUucGFzc3dvcmQgPT0gJHNjb3BlLnBhc3N3b3JkQ29uZmlybTtcbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tIHVwbG9hZCBhdmF0YXIgLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvLyB1c2luZzogaHR0cHM6Ly9naXRodWIuY29tL2RhbmlhbGZhcmlkL2FuZ3VsYXItZmlsZS11cGxvYWRcbiAgICAkc2NvcGUub25BdmF0YXJGaWxlU2VsZWN0ID0gZnVuY3Rpb24oJGZpbGVzKSB7XG4gICAgICAgIHN0YXJ0U3Bpbm5lcigpO1xuICAgICAgICAvLyRmaWxlczogYW4gYXJyYXkgb2YgZmlsZXMgc2VsZWN0ZWQsIGVhY2ggZmlsZSBoYXMgbmFtZSwgc2l6ZSwgYW5kIHR5cGUuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJGZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZmlsZSA9ICRmaWxlc1tpXTtcbiAgICAgICAgICAgICRzY29wZS51cGxvYWQgPSAkdXBsb2FkLnVwbG9hZCh7XG4gICAgICAgICAgICAgICAgdXJsOiAndXNlcnMvJyArIHVzZXJJZCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmaWxlOiBmaWxlLCAvLyBvciBsaXN0IG9mIGZpbGVzOiAkZmlsZXMgZm9yIGh0bWw1IG9ubHlcbiAgICAgICAgICAgICAgICBmaWxlRm9ybURhdGFOYW1lOiAndXNlclthdmF0YXJdJ1xuICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnUGhvdG8gdXBkYXRlZCc7XG4gICAgICAgICAgICAgICAgc3RvcFNwaW5uZXIoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnRXJyb3I6IENvdWxkIG5vdCB1cGxvYWQgcGhvdG8nO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLy50aGVuKHN1Y2Nlc3MsIGVycm9yLCBwcm9ncmVzcyk7IFxuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIHZpZXcgaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvLyByZXR1cm5zIGUuZy4gXCJhIGRheSBhZ29cIlxuICAgIC8vIChOQjogbm93IGlzIG9idGFpbmVkIGZyb20gdGhlIERCIHRvIGVuc3VyZSB0aGF0IHdlIGhhdmUgYm90aCBkYXRlcyBpbiBVVEM7IFxuICAgIC8vICAgIGFsc28sIFNRTCB2cy4gcnVieSBkYXRlcyBuZWVkIHRvIGJlIGNvZXJjZWQgaW50byBhIHNpbWlsYXIgZm9ybWF0LCBib3RoIGluIFVUQyAtIHNlZSBmZWVkLmpzb24uamJ1aWxkZXIpXG4gICAgJHNjb3BlLmdldEV2ZW50VGltZSA9IGZ1bmN0aW9uKHQsIG5vdykge1xuICAgICAgICB2YXIgdGltZSA9IG1vbWVudCh0LCAnWVlZWS1NTS1ERCBISDptbTpzcy5TU1MnKTtcbiAgICAgICAgdmFyIG5vd3RpbWUgPSBtb21lbnQobm93LCAnWVlZWS1NTS1ERCBISDptbTpzcy5TU1MnKTtcbiAgICAgICAgLy8gLy9jb25zb2xlLmxvZygndDogICAgICAgJyArIHQpO1xuICAgICAgICAvLyAvL2NvbnNvbGUubG9nKCdub3c6ICAgICAnICsgbm93KTtcbiAgICAgICAgLy8gLy9jb25zb2xlLmxvZygndGltZTogICAgJyArIHRpbWUuZm9ybWF0KCkpOyAvLyArICcgJyArIHRpbWUuaXNWYWxpZCgpKTtcbiAgICAgICAgLy8gLy9jb25zb2xlLmxvZygnbm93dGltZTogJyArIG5vd3RpbWUuZm9ybWF0KCkpOyAvLyArICcgJyArIG5vd3RpbWUuaXNWYWxpZCgpKTtcbiAgICAgICAgcmV0dXJuIHRpbWUuZnJvbShub3d0aW1lKTtcbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIG5vdGlmaWNhdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgJHNjb3BlLmdldE5vdGlmaWNhdGlvbkZlZWRVcmwgPSBmdW5jdGlvbihub3RpZmljYXRpb24pIHtcbiAgICAgICAgaWYgKG5vdGlmaWNhdGlvbi5hY3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IG5vdGlmaWNhdGlvbi5hY3Rpb25zWzBdO1xuICAgICAgICAgICAgaWYgKGFjdGlvbi5hY3Rpb24gPT0gJ0xJS0UnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcvc29jaWFsP2xpa2VfaWQ9JyArIGFjdGlvbi5saWtlSWQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbi5hY3Rpb24gPT0gJ0NPTU1FTlQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcvc29jaWFsP2NvbW1lbnRfaWQ9JyArIGFjdGlvbi5jb21tZW50SWQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbi5hY3Rpb24gPT0gJ1NIQVJFX0lORElWSURVQUwnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcvbWFwcy8nICsgYWN0aW9uLm1hcElkO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24uYWN0aW9uID09ICdTSEFSRV9QVUJMSUMnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcvc29jaWFsP3NoYXJlX2lkPScgKyBhY3Rpb24uc2hhcmVJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfTtcblxuICAgICRzY29wZS5kZWxldGVOb3RpZmljYXRpb24gPSBmdW5jdGlvbihub3RpZmljYXRpb24pIHtcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvbm90aWZpY2F0aW9ucy8nICsgbm90aWZpY2F0aW9uLmlkICsgJy5qc29uJykudGhlbihcbiAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7IC8vIHN1Y2Nlc3NcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uZGVsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24ocmVhc29uKSB7IC8vIGVycm9yXG4gICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBkZWxldGUgbm90aWZpY2F0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfTtcblxuICAgICRzY29wZS5ub3RpZmljYXRpb25WZXJiID0gZnVuY3Rpb24oYWN0aW9uKSB7XG4gICAgICAgIHZhciB2ZXJicyA9IHtcbiAgICAgICAgICAgIExJS0U6ICdsaWtlZCB0aGlzOicsXG4gICAgICAgICAgICBDT01NRU5UOiAnY29tbWVudGVkIG9uIHRoaXM6JyxcbiAgICAgICAgICAgIFNIQVJFX0lORElWSURVQUw6ICdzaGFyZWQgYSBNZXRhTWFwIHdpdGggeW91JyxcbiAgICAgICAgICAgIFNIQVJFX1BVQkxJQzogJ3NoYXJlZCBhIE1ldGFNYXAgd2l0aCBldmVyeW9uZScsXG4gICAgICAgICAgICBNQVBfRk9MTE9XOiAnZm9sbG93ZWQgYSBNZXRhTWFwOicsXG4gICAgICAgICAgICBVU0VSX0ZPTExPVzogJ2ZvbGxvd2VkIHlvdSdcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHZlcmJzW2FjdGlvbl07XG4gICAgfTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLSB1dGlsaXR5IGZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS1cblxuICAgIC8vIGhhbmR5IGZ1bmN0aW9uIGZvciB1c2Ugd2l0aCBuZy1jbGFzcyBvbiByYWRpbyBidXR0b25zXG4gICAgJHNjb3BlLmNsYXNzSWYgPSBmdW5jdGlvbihrbGFzcywgYikge1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGFzc0lmOiAnICsga2xhc3MgKyAnLCAnICsgYik7XG4gICAgICAgIHJldHVybiAoYiA/IGtsYXNzIDogJycpO1xuICAgIH07XG5cbiAgICAvLyBhdm9pZCAnJGFwcGx5IGFscmVhZHkgaW4gcHJvZ3Jlc3MnIGVycm9yIChzb3VyY2U6IGh0dHBzOi8vY29kZXJ3YWxsLmNvbS9wL25naXNtYSlcbiAgICAkc2NvcGUuc2FmZUFwcGx5ID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2FmZUFwcGx5IG9uIHNjb3BlOiAnICsgJHNjb3BlKTtcbiAgICAgICAgdmFyIHBoYXNlID0gdGhpcy4kcm9vdC4kJHBoYXNlO1xuICAgICAgICBpZiAocGhhc2UgPT0gJyRhcHBseScgfHwgcGhhc2UgPT0gJyRkaWdlc3QnKSB7XG4gICAgICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZihmbikgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuJGFwcGx5KGZuKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBzb3VyY2U6IGh0dHA6Ly9jdHJscS5vcmcvY29kZS8xOTYxNi1kZXRlY3QtdG91Y2gtc2NyZWVuLWphdmFzY3JpcHRcbiAgICAkc2NvcGUuaXNUb3VjaERldmljZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKCgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHx8IChuYXZpZ2F0b3IuTWF4VG91Y2hQb2ludHMgPiAwKSB8fCAobmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAwKSk7XG4gICAgfTtcblxuICAgIGluaXQoKTtcbn07XG5cbndpbmRvdy5Vc2VyQ3RybC4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckaHR0cCcsICckbW9kYWwnLCAnJHVwbG9hZCddOyIsImNvbnN0IEFDVElPTlMgPSB7XG4gICAgTUFQOiAnbWFwJyxcbiAgICBORVdfTUFQOiAnbmV3X21hcCcsXG4gICAgQ09QWV9NQVA6ICdjb3B5X21hcCcsXG4gICAgREVMRVRFX01BUDogJ2RlbGV0ZV9tYXAnLFxuICAgIEhPTUU6ICdob21lJyxcbiAgICBNWV9NQVBTOiAnbXltYXBzJyxcbiAgICBURVJNU19BTkRfQ09ORElUSU9OUzogJ3Rlcm1zJ1xufTtcblxuT2JqZWN0LmZyZWV6ZShBQ1RJT05TKTtcblxubW9kdWxlLmV4cG9ydHMgPSBBQ1RJT05TOyIsImNvbnN0IEVMRU1FTlRTID0ge1xuICAgIEFQUF9DT05UQUlORVI6ICdhcHAtY29udGFpbmVyJyxcbiAgICBNRVRBX1BST0dSRVNTOiAnbWV0YV9wcm9ncmVzcycsXG4gICAgTUVUQV9QUk9HUkVTU19ORVhUOiAnbWV0YV9wcm9ncmVzc19uZXh0J1xufTtcblxuT2JqZWN0LmZyZWV6ZShFTEVNRU5UUyk7XG5cbm1vZHVsZS5leHBvcnRzID0gRUxFTUVOVFM7IiwiY29uc3QgRVZFTlRTID0ge1xuXHRTSURFQkFSX09QRU46ICdzaWRlYmFyLW9wZW4nLFxuXHRTSURFQkFSX0NMT1NFOiAnc2lkZWJhci1jbG9zZScsXG5cdFBBR0VfTkFNRTogJ3BhZ2VOYW1lJyxcblx0TkFWOiAnbmF2Jyxcblx0TUFQOiAnbWFwJ1xufVxuXG5PYmplY3QuZnJlZXplKEVWRU5UUyk7XG5cbm1vZHVsZS5leHBvcnRzID0gRVZFTlRTOyIsImNvbnN0IEFDVElPTlMgPSByZXF1aXJlKCcuL2FjdGlvbnMuanMnKTtcbmNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuY29uc3QgUEFHRVMgPSB7XG4gICAgTUFQOiAnbWFwJyxcbiAgICBORVdfTUFQOiAnbmV3X21hcCcsXG4gICAgQ09QWV9NQVA6ICdjb3B5X21hcCcsXG4gICAgREVMRVRFX01BUDogJ2RlbGV0ZV9tYXAnLFxuICAgIE1ZX01BUFM6ICdteW1hcHMnLFxuICAgIFRFUk1TX0FORF9DT05ESVRJT05TOiAndGVybXMnLFxuICAgIEhPTUU6ICdob21lJ1xufTtcblxuXy5leHRlbmQoKVxuXG5PYmplY3QuZnJlZXplKFBBR0VTKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQQUdFUzsiLCJjb25zdCBST1VURVMgPSB7XG4gICAgTUFQU19MSVNUOiAnbWFwcy9saXN0LycsXG4gICAgTUFQU19EQVRBOiAnbWFwcy9kYXRhLycsXG4gICAgTUFQU19ORVdfTUFQOiAnbWFwcy9uZXctbWFwLycsXG4gICAgVEVSTVNfQU5EX0NPTkRJVElPTlM6ICdtZXRhbWFwL3Rlcm1zLWFuZC1jb25kaXRpb25zLycsXG4gICAgSE9NRTogJ21ldGFtYXAvaG9tZS8nXG59O1xuXG5PYmplY3QuZnJlZXplKFJPVVRFUyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUk9VVEVTOyIsImNvbnN0IFRBR1MgPSB7XG4gICAgTUVUQV9DQU5WQVM6ICdtZXRhLWNhbnZhcycsXG4gICAgSE9NRTogJ2hvbWUnLFxuICAgIFRFUk1TOiAndGVybXMnLFxuICAgIE1ZX01BUFM6ICdteS1tYXBzJ1xufTtcblxuT2JqZWN0LmZyZWV6ZShUQUdTKTtcblxubW9kdWxlLmV4cG9ydHMgPSBUQUdTOyIsInZhciBhZGRUaGlzID0gZnVuY3Rpb24gKGFwaUtleSkge1xuICAgIFxuICAgIChmdW5jdGlvbiAoZCwgcywgaWQpIHtcbiAgICAgICAgdmFyIGpzLCBmanMgPSBkLmdldEVsZW1lbnRzQnlUYWdOYW1lKHMpWzBdLFxuICAgICAgICAgIHQgPSB3aW5kb3cuYWRkdGhpcyB8fCB7fTtcbiAgICAgICAgaWYgKGQuZ2V0RWxlbWVudEJ5SWQoaWQpKSByZXR1cm4gdDtcbiAgICAgICAganMgPSBkLmNyZWF0ZUVsZW1lbnQocyk7XG4gICAgICAgIGpzLmlkID0gaWQ7XG4gICAgICAgIGpzLnNyYyA9IGAvL3M3LmFkZHRoaXMuY29tL2pzLzMwMC9hZGR0aGlzX3dpZGdldC5qcyNwdWJpZD0ke2FwaUtleX1gO1xuICAgICAgICBmanMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoanMsIGZqcyk7XG5cbiAgICAgICAgdC5fZSA9IFtdO1xuICAgICAgICB0LnJlYWR5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgIHQuX2UucHVzaChmKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdDtcbiAgICB9KGRvY3VtZW50LCBcInNjcmlwdFwiLCBcImFkZC10aGlzLWpzXCIpKTtcblxuICAgIGxldCBpbml0ID0gKCkgPT4ge1xuICAgICAgICB3aW5kb3cuYWRkdGhpcy5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChbJyNob21lJywgJyNjb250YWN0J10uaW5kZXhPZih3aW5kb3cubG9jYXRpb24uaGFzaCkgPj0gMCkge1xuICAgICAgICAgICAgICAgIHZhciB0cnlDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGhpZGVTaGFyZXMgPSBmdW5jdGlvbihrZWVwR29pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJyNhdDQtc2hhcmUnKSAmJiAkKCcjYXQ0LXNoYXJlJykubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNhdDQtc2hhcmUnKS5wYXJlbnQoKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2VlcEdvaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5kZWxheShoaWRlU2hhcmVzLCAzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNvdW50ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJ5Q291bnQgPCA2MCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uZGVsYXkoaGlkZVNoYXJlcywgMjUwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoaWRlU2hhcmVzKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBpbml0O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBhZGRUaGlzO1xuXG5cbiIsIlxudmFyIGZhY2Vib29rQXBpID0gZnVuY3Rpb24gKGFwaUtleSkge1xuICAgIFxuICAgIHdpbmRvdy5mYkFzeW5jSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93LkZCLmluaXQoe1xuICAgICAgICAgICAgYXBwSWQ6ICc4NDc3MDI3NzUzMDQ5MDYnLFxuICAgICAgICAgICAgeGZibWw6IHRydWUsXG4gICAgICAgICAgICB2ZXJzaW9uOiAndjIuMydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgd2luZG93LkZCLkV2ZW50LnN1YnNjcmliZSgnZWRnZS5jcmVhdGUnLCBmdW5jdGlvbiAodGFyZ2V0VXJsKSB7XG4gICAgICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnc29jaWFsJywgJ2ZhY2Vib29rJywgJ2xpa2UnLCB0YXJnZXRVcmwpO1xuICAgICAgICB9KTtcblxuICAgICAgICB3aW5kb3cuRkIuRXZlbnQuc3Vic2NyaWJlKCdlZGdlLnJlbW92ZScsIGZ1bmN0aW9uICh0YXJnZXRVcmwpIHtcbiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdzb2NpYWwnLCAnZmFjZWJvb2snLCAndW5saWtlJywgdGFyZ2V0VXJsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgd2luZG93LkZCLkV2ZW50LnN1YnNjcmliZSgnbWVzc2FnZS5zZW5kJywgZnVuY3Rpb24gKHRhcmdldFVybCkge1xuICAgICAgICAgICAgd2luZG93LmdhKCdzZW5kJywgJ3NvY2lhbCcsICdmYWNlYm9vaycsICdzZW5kJywgdGFyZ2V0VXJsKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIChmdW5jdGlvbiAoZCwgcywgaWQpIHtcbiAgICAgICAgdmFyIGpzLCBmanMgPSBkLmdldEVsZW1lbnRzQnlUYWdOYW1lKHMpWzBdO1xuICAgICAgICBpZiAoZC5nZXRFbGVtZW50QnlJZChpZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqcyA9IGQuY3JlYXRlRWxlbWVudChzKTtcbiAgICAgICAganMuaWQgPSBpZDtcbiAgICAgICAganMuc3JjID0gXCIvL2Nvbm5lY3QuZmFjZWJvb2submV0L2VuX1VTL3Nkay5qc1wiO1xuICAgICAgICBmanMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoanMsIGZqcyk7XG4gICAgfShkb2N1bWVudCwgJ3NjcmlwdCcsICdmYWNlYm9vay1qc3NkaycpKTtcblxuICAgIHJldHVybiB3aW5kb3cuZmJBc3luY0luaXQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZhY2Vib29rQXBpO1xuXG5cbiIsIlxudmFyIGdvb2dsZUFuYWx5dGljcyA9IGZ1bmN0aW9uIChhcGkpIHtcbiAgICBcbiAgICAvLyBHb29nbGUgUGx1cyBBUElcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgcG8udHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOyBwby5hc3luYyA9IHRydWU7XG4gICAgICAgIHBvLnNyYyA9ICdodHRwczovL2FwaXMuZ29vZ2xlLmNvbS9qcy9wbGF0Zm9ybS5qcyc7XG4gICAgICAgIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHBvLCBzKTtcbiAgICB9KSgpO1xuXG4gICAgLy9Hb29nbGUgVGFnIE1hbmFnZXIgQVBJXG4gIChmdW5jdGlvbiAodywgZCwgcywgbCwgaSkge1xuICAgICAgd1tsXSA9IHdbbF0gfHwgW107IHdbbF0ucHVzaCh7XG4gICAgICAgICAgJ2d0bS5zdGFydCc6XG4gICAgICAgICAgbmV3IERhdGUoKS5nZXRUaW1lKCksIGV2ZW50OiAnZ3RtLmpzJ1xuICAgICAgfSk7IHZhciBmID0gZC5nZXRFbGVtZW50c0J5VGFnTmFtZShzKVswXSxcbiAgICAgIGogPSBkLmNyZWF0ZUVsZW1lbnQocyksIGRsID0gbCAhPSAnZGF0YUxheWVyJyA/ICcmbD0nICsgbCA6ICcnOyBqLmFzeW5jID0gdHJ1ZTsgai5zcmMgPVxuICAgICAgJy8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0bS5qcz9pZD0nICsgaSArIGRsOyBmLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGosIGYpO1xuICB9KSh3aW5kb3csIGRvY3VtZW50LCAnc2NyaXB0JywgJ2RhdGFMYXllcicsIGFwaS50YWdtYW5hZ2VyKTtcblxuICAgIC8vIEdvb2dsZSBBbmFseXRpY3MgQVBJXG4gIChmdW5jdGlvbiAoaSwgcywgbywgZywgciwgYSwgbSkge1xuICAgICAgaVsnR29vZ2xlQW5hbHl0aWNzT2JqZWN0J10gPSByOyBpW3JdID0gaVtyXSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgKGlbcl0ucSA9IGlbcl0ucSB8fCBbXSkucHVzaChhcmd1bWVudHMpO1xuICAgICAgfSwgaVtyXS5sID0gMSAqIG5ldyBEYXRlKCk7IGEgPSBzLmNyZWF0ZUVsZW1lbnQobyksXG4gICAgICBtID0gcy5nZXRFbGVtZW50c0J5VGFnTmFtZShvKVswXTsgYS5hc3luYyA9IDE7IGEuc3JjID0gZztcbiAgICAgIG0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSwgbSk7XG4gIH0pKHdpbmRvdywgZG9jdW1lbnQsICdzY3JpcHQnLCAnLy93d3cuZ29vZ2xlLWFuYWx5dGljcy5jb20vYW5hbHl0aWNzLmpzJywgJ2dhJyk7XG5cbiAgICB3aW5kb3cuZ2EoJ2NyZWF0ZScsIGFwaS5hbmFseXRpY3MsICdhdXRvJyk7XG4gICAgd2luZG93LmdhKCdzZW5kJywgJ3BhZ2V2aWV3Jyk7XG4gICAgcmV0dXJuIHdpbmRvdy5nYTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZ29vZ2xlQW5hbHl0aWNzO1xuXG5cbiIsIi8vIERlZmluZSBvdXIgY3VzdG9tIGV2ZW50IGhhbmRsZXJzXG5mdW5jdGlvbiBjbGlja0V2ZW50VG9BbmFseXRpY3MoaW50ZW50RXZlbnQpIHtcbiAgICBpZiAoIWludGVudEV2ZW50KSByZXR1cm47XG4gICAgdmFyIGxhYmVsID0gaW50ZW50RXZlbnQucmVnaW9uO1xuICAgIHdpbmRvdy5nYSgnc2VuZCcsICdzb2NpYWwnLCAndHdpdHRlcicsIGludGVudEV2ZW50LnR5cGUsIGxhYmVsKTtcbn1cblxuZnVuY3Rpb24gdHdlZXRJbnRlbnRUb0FuYWx5dGljcyhpbnRlbnRFdmVudCkge1xuICAgIGlmICghaW50ZW50RXZlbnQpIHJldHVybjtcbiAgICB2YXIgbGFiZWwgPSBcInR3ZWV0XCI7XG4gICAgd2luZG93LmdhKCdzZW5kJywgJ3NvY2lhbCcsICd0d2l0dGVyJywgaW50ZW50RXZlbnQudHlwZSwgbGFiZWwpO1xufVxuXG5mdW5jdGlvbiBmYXZJbnRlbnRUb0FuYWx5dGljcyhpbnRlbnRFdmVudCkge1xuICAgIHR3ZWV0SW50ZW50VG9BbmFseXRpY3MoaW50ZW50RXZlbnQpO1xufVxuXG5mdW5jdGlvbiByZXR3ZWV0SW50ZW50VG9BbmFseXRpY3MoaW50ZW50RXZlbnQpIHtcbiAgICBpZiAoIWludGVudEV2ZW50KSByZXR1cm47XG4gICAgdmFyIGxhYmVsID0gaW50ZW50RXZlbnQuZGF0YS5zb3VyY2VfdHdlZXRfaWQ7XG4gICAgd2luZG93LmdhKCdzZW5kJywgJ3NvY2lhbCcsICd0d2l0dGVyJywgaW50ZW50RXZlbnQudHlwZSwgbGFiZWwpO1xufVxuXG5mdW5jdGlvbiBmb2xsb3dJbnRlbnRUb0FuYWx5dGljcyhpbnRlbnRFdmVudCkge1xuICAgIGlmICghaW50ZW50RXZlbnQpIHJldHVybjtcbiAgICB2YXIgbGFiZWwgPSBpbnRlbnRFdmVudC5kYXRhLnVzZXJfaWQgKyBcIiAoXCIgKyBpbnRlbnRFdmVudC5kYXRhLnNjcmVlbl9uYW1lICsgXCIpXCI7XG4gICAgd2luZG93LmdhKCdzZW5kJywgJ3NvY2lhbCcsICd0d2l0dGVyJywgaW50ZW50RXZlbnQudHlwZSwgbGFiZWwpO1xufVxuXG5cbnZhciB0d2l0dGVyQXBpID0gZnVuY3Rpb24gKGFwaUtleSkge1xuICAgIFxuICAgIHdpbmRvdy50d3R0ciA9IChmdW5jdGlvbiAoZCwgcywgaWQpIHtcbiAgICAgICAgdmFyIGpzLCBmanMgPSBkLmdldEVsZW1lbnRzQnlUYWdOYW1lKHMpWzBdLFxuICAgICAgICAgIHQgPSB3aW5kb3cudHd0dHIgfHwge307XG4gICAgICAgIGlmIChkLmdldEVsZW1lbnRCeUlkKGlkKSkgcmV0dXJuIHQ7XG4gICAgICAgIGpzID0gZC5jcmVhdGVFbGVtZW50KHMpO1xuICAgICAgICBqcy5pZCA9IGlkO1xuICAgICAgICBqcy5zcmMgPSBcImh0dHBzOi8vcGxhdGZvcm0udHdpdHRlci5jb20vd2lkZ2V0cy5qc1wiO1xuICAgICAgICBmanMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoanMsIGZqcyk7XG5cbiAgICAgICAgdC5fZSA9IFtdO1xuICAgICAgICB0LnJlYWR5ID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgIHQuX2UucHVzaChmKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdDtcbiAgICB9KGRvY3VtZW50LCBcInNjcmlwdFwiLCBcInR3aXR0ZXItd2pzXCIpKTtcblxuICAgIHdpbmRvdy50d3R0ci5yZWFkeSgodHdpdHRlcikgPT4ge1xuICAgICAgICB0d2l0dGVyLndpZGdldHMubG9hZCgpO1xuICAgICAgICB0d2l0dGVyLmV2ZW50cy5iaW5kKCdjbGljaycsIGNsaWNrRXZlbnRUb0FuYWx5dGljcyk7XG4gICAgICAgIHR3aXR0ZXIuZXZlbnRzLmJpbmQoJ3R3ZWV0JywgdHdlZXRJbnRlbnRUb0FuYWx5dGljcyk7XG4gICAgICAgIHR3aXR0ZXIuZXZlbnRzLmJpbmQoJ3JldHdlZXQnLCByZXR3ZWV0SW50ZW50VG9BbmFseXRpY3MpO1xuICAgICAgICB0d2l0dGVyLmV2ZW50cy5iaW5kKCdmYXZvcml0ZScsIGZhdkludGVudFRvQW5hbHl0aWNzKTtcbiAgICAgICAgdHdpdHRlci5ldmVudHMuYmluZCgnZm9sbG93JywgZm9sbG93SW50ZW50VG9BbmFseXRpY3MpO1xuICAgIH0pO1xuXG4gICAgbGV0IHRyeUNvdW50ID0gMDtcbiAgICBsZXQgbG9hZCA9ICgpID0+IHtcbiAgICAgICAgaWYgKHdpbmRvdy50d3R0ciAmJiB3aW5kb3cudHd0dHIud2lkZ2V0cykge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy50d3R0ci53aWRnZXRzLmxvYWQoKTtcbiAgICAgICAgfSBlbHNlIGlmKHRyeUNvdW50IDwgNSkge1xuICAgICAgICAgICAgdHJ5Q291bnQgKz0gMTtcbiAgICAgICAgICAgIF8uZGVsYXkobG9hZCwgMjUwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsb2FkO1xuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHR3aXR0ZXJBcGk7XG5cblxuIiwiXG52YXIgdXNlclNuYXAgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgdmFyIGFwaUtleSA9ICcwMzJiYWY4Ny04NTQ1LTRlYmMtYTU1Ny05MzQ4NTkzNzFmYTUuanMnLCBzLCB4O1xuICAgIGlmIChjb25maWcgPT0gbnVsbCkge1xuICAgICAgICBjb25maWcgPSB7fTtcbiAgICB9XG4gICAgYXBpS2V5ID0gY29uZmlnLlVTRVJfU05BUF9BUElfS0VZO1xuICAgIGlmIChhcGlLZXkgJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICE9PSAnbG9jYWxob3N0Jykge1xuICAgICAgICB3aW5kb3cudXNlcnNuYXBjb25maWcgPSB7XG4gICAgICAgICAgICBtb2RlOiAncmVwb3J0JyxcbiAgICAgICAgICAgIHNob3J0Y3V0OiB0cnVlLFxuICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBVc2VyU25hcC5zZXRFbWFpbEJveChEb2MuYXBwLnVzZXIudXNlck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIHMudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICAgICAgICBzLmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgcy5zcmMgPSAnLy9hcGkudXNlcnNuYXAuY29tL2xvYWQvJyArIGFwaUtleSArICcuanMnO1xuICAgICAgICB4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgICAgICAgcmV0dXJuIHguYXBwZW5kQ2hpbGQocyk7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB1c2VyU25hcDtcblxuXG4iLCJjb25zdCByaW90ID0gd2luZG93LnJpb3Q7XG5jb25zdCBOUHJvZ3Jlc3MgPSB3aW5kb3cuTlByb2dyZXNzO1xuY29uc3QgcGFnZUJvZHkgPSByZXF1aXJlKCcuLi8uLi90YWdzL3BhZ2UtYm9keS5qcycpO1xuY29uc3QgRUxFTUVOVFMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvZWxlbWVudHMuanMnKTtcbmNvbnN0IEFjdGlvbnMgPSByZXF1aXJlKCcuLi9hY3Rpb25zL0FjdGlvbi5qcycpO1xuXG5jbGFzcyBQYWdlRmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IoZXZlbnRlciwgbWV0YUZpcmUpIHtcbiAgICAgICAgdGhpcy5tZXRhRmlyZSA9IG1ldGFGaXJlO1xuICAgICAgICB0aGlzLmV2ZW50ZXIgPSBldmVudGVyO1xuICAgICAgICB0aGlzLmFjdGlvbnMgPSBuZXcgQWN0aW9ucyhtZXRhRmlyZSwgZXZlbnRlciwgdGhpcyk7XG4gICAgICAgIHRoaXMub25SZWFkeSgpO1xuICAgIH1cblxuICAgIG9uUmVhZHkoKSB7XG4gICAgICAgIGlmICghdGhpcy5fb25SZWFkeSkge1xuICAgICAgICAgICAgdGhpcy5fb25SZWFkeSA9IG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAkKGAjJHtFTEVNRU5UUy5NRVRBX1BST0dSRVNTfWApLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHJpb3QubW91bnQoJyonKTtcbiAgICAgICAgICAgICAgICBOUHJvZ3Jlc3MuY29uZmlndXJlKHsgcGFyZW50OiBgIyR7RUxFTUVOVFMuTUVUQV9QUk9HUkVTU19ORVhUfWAgfSk7XG5cbiAgICAgICAgICAgICAgICBfLmRlbGF5KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgTWV0cm9uaWMuaW5pdCgpOyAvLyBpbml0IG1ldHJvbmljIGNvcmUgY29tcG9uZXRzXG4gICAgICAgICAgICAgICAgICAgIExheW91dC5pbml0KCk7IC8vIGluaXQgbGF5b3V0XG4gICAgICAgICAgICAgICAgICAgIERlbW8uaW5pdCgpOyAvLyBpbml0IGRlbW8gZmVhdHVyZXNcbiAgICAgICAgICAgICAgICAgICAgSW5kZXguaW5pdCgpOyAvLyBpbml0IGluZGV4IHBhZ2VcbiAgICAgICAgICAgICAgICAgICAgVGFza3MuaW5pdERhc2hib2FyZFdpZGdldCgpOyAvLyBpbml0IHRhc2ggZGFzaGJvYXJkIHdpZGdldFxuICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKCk7XG4gICAgICAgICAgICAgICAgfSwgMjUwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9vblJlYWR5O1xuICAgIH1cblxuICAgIG5hdmlnYXRlKHBhdGgsIGlkLCBhY3Rpb24sIC4uLnBhcmFtcykge1xuICAgICAgICBsZXQgYWN0ID0gdGhpcy5hY3Rpb25zLmFjdChwYXRoLCBpZCwgYWN0aW9uLCAuLi5wYXJhbXMpO1xuICAgICAgICBpZiAoIWFjdCkge1xuICAgICAgICAgICAgdGhpcy5ldmVudGVyLmRvKHBhdGgsIHBhdGgsIHsgaWQ6IGlkLCBhY3Rpb246IGFjdGlvbiB9LCAuLi5wYXJhbXMpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFBhZ2VGYWN0b3J5OyIsImlmICghU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQpIHtcbiAgICBTdHJpbmcucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL3soXFxkKyl9L2csIGZ1bmN0aW9uIChtYXRjaCwgbnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGFyZ3NbbnVtYmVyXSAhPSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICA/IGFyZ3NbbnVtYmVyXVxuICAgICAgICAgICAgICA6IG1hdGNoXG4gICAgICAgICAgICA7XG4gICAgICAgIH0pO1xuICAgIH07XG59IiwiY29uc3QgdXVpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaGV4RGlnaXRzLCBpLCBzLCB1dWlkO1xuICAgIHMgPSBbXTtcbiAgICBzLmxlbmd0aCA9IDM2O1xuICAgIGhleERpZ2l0cyA9ICcwMTIzNDU2Nzg5YWJjZGVmJztcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IDM2KSB7XG4gICAgICAgIHNbaV0gPSBoZXhEaWdpdHMuc3Vic3RyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDB4MTApLCAxKTtcbiAgICAgICAgaSArPSAxO1xuICAgIH1cbiAgICBzWzE0XSA9ICc0JztcbiAgICBzWzE5XSA9IGhleERpZ2l0cy5zdWJzdHIoKHNbMTldICYgMHgzKSB8IDB4OCwgMSk7XG4gICAgc1s4XSA9IHNbMTNdID0gc1sxOF0gPSBzWzIzXSA9ICctJztcbiAgICB1dWlkID0gcy5qb2luKCcnKTtcbiAgICByZXR1cm4gdXVpZDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdXVpZDsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xuY29uc3QgTlByb2dyZXNzID0gd2luZG93Lk5Qcm9ncmVzcztcblxuY29uc3QgaHRtbCA9IGBcbjxkaXYgY2xhc3M9XCJwb3J0bGV0IGxpZ2h0XCI+XG4gICAgPGRpdiBjbGFzcz1cInBvcnRsZXQtYm9keVwiIGlkPVwiZGlhZ3JhbVwiPjwvZGl2PlxuPC9kaXY+XG48ZGl2IGlkPVwib3ZlcnZpZXctZGlhZ3JhbVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48L2Rpdj5cbmA7XG5cbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ21ldGEtY2FudmFzJywgaHRtbCwgZnVuY3Rpb24ob3B0cykge1xuXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uL2VudHJ5LmpzJyk7XG5cbiAgICB0aGlzLm1hcElkID0gbnVsbDtcbiAgICB0aGlzLmNhbnZhcyA9IG51bGw7XG5cbiAgICB0aGlzLmJ1aWxkQ2FudmFzID0gKG1hcCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuY2FudmFzKSB7XG4gICAgICAgICAgICAkKHRoaXMuZGlhZ3JhbSkuZW1wdHkoKTtcbiAgICAgICAgICAgICQodGhpc1snb3ZlcnZpZXctZGlhZ3JhbSddKS5lbXB0eSgpO1xuXG4gICAgICAgICAgICB2YXIgeCA9IHtcbiAgICAgICAgICAgICAgICBtYXBJZDogdGhpcy5tYXBJZCxcbiAgICAgICAgICAgICAgICBjY3NUYWdnaW5nOiB7fSxcbiAgICAgICAgICAgICAgICBzYWZlQXBwbHk6IGZ1bmN0aW9uKGZuLCAuLi5wYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbiguLi5wYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAkd2F0Y2g6IGZ1bmN0aW9uKCkge30sXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHsgdGhlbjogZnVuY3Rpb24oKSB7fSB9IH0sXG4gICAgICAgICAgICAgICAgaXNUb3VjaERldmljZTogZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuXG4gICAgICAgICAgICB4Lm1hcERhdGEgPSBtYXA7XG4gICAgICAgICAgICBtYXAubWV0YWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgc2FuZGJveDogbnVsbCxcbiAgICAgICAgICAgICAgICBjYW5FZGl0OiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbWFwLnN0YXRlX2RhdGEgPSB7XG4gICAgICAgICAgICAgICAgXCJzaG93TmF2aWdhdG9yXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIFwiY3VycmVudFRhYlwiOiBudWxsLFxuICAgICAgICAgICAgICAgIFwicGVyc3BlY3RpdmVQb2ludEtleVwiOiBudWxsLFxuICAgICAgICAgICAgICAgIFwiZGlzdGluY3Rpb25UaGluZ0tleVwiOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXAuZWRpdG9yX29wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgXCJkZWZhdWx0UmVsYXRpb25zaGlwRGlyZWN0aW9uXCI6IFwibm9BcnJvd3NcIixcbiAgICAgICAgICAgICAgICBcImRlZmF1bHRUaGluZ0xheW91dFwiOiBcImxlZnRcIixcbiAgICAgICAgICAgICAgICBcInBlcnNwZWN0aXZlTW9kZVwiOiBcImxpbmVzXCJcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jYW52YXMgPSBNYXBFZGl0b3JDdHJsKHgsIHgsIHgsIHgsIHgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG1hcC5jaGFuZ2VkX2J5ICE9IE1ldGFNYXAuVXNlci51c2VyS2V5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMubWFwLmxvYWQobWFwLmRhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgTlByb2dyZXNzLmRvbmUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmJ1aWxkID0gKG9wdHMpID0+IHtcbiAgICAgICAgaWYgKG9wdHMuaWQgIT0gdGhpcy5tYXBJZCkge1xuICAgICAgICAgICAgdGhpcy5jYW52YXMgPSBudWxsXG4gICAgICAgICAgICBpZiAodGhpcy5tYXBJZCkge1xuICAgICAgICAgICAgICAgIE1ldGFNYXAuTWV0YUZpcmUub2ZmKGBtYXBzL2RhdGEvJHt0aGlzLm1hcElkfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXBJZCA9IG9wdHMuaWQ7XG4gICAgICAgICAgICBOUHJvZ3Jlc3Muc3RhcnQoKTtcblxuICAgICAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5vbihgbWFwcy9kYXRhLyR7b3B0cy5pZH1gLCB0aGlzLmJ1aWxkQ2FudmFzKTtcbiAgICAgICAgICAgIE1ldGFNYXAuRXZlbnRlci5mb3JnZXQoJ21hcCcsIHRoaXMuYnVpbGQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgTWV0YU1hcC5FdmVudGVyLmV2ZXJ5KCdtYXAnLCB0aGlzLmJ1aWxkKTtcblxuICAgIHRoaXMuY29ycmVjdEhlaWdodCA9ICgpID0+IHtcbiAgICAgICAgJCh0aGlzLmRpYWdyYW0pLmNzcyh7XG4gICAgICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCAtIDE1NCArICdweCdcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5vbigndXBkYXRlJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmNvcnJlY3RIZWlnaHQoKTtcbiAgICB9KTtcblxuICAgICQod2luZG93KS5yZXNpemUoKCkgPT4ge1xuICAgICAgICB0aGlzLmNvcnJlY3RIZWlnaHQoKTtcbiAgICB9KTtcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5cbmNvbnN0IGh0bWwgPSBgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIGRhdGEtaG92ZXI9XCJkcm9wZG93blwiIGRhdGEtY2xvc2Utb3RoZXJzPVwidHJ1ZVwiPlxuICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1ncmFkdWF0aW9uLWNhcFwiPjwvaT5cbiAgICAgICAgPC9hPlxuICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCI+XG4gICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudS1saXN0IHNjcm9sbGVyXCIgc3R5bGU9XCJoZWlnaHQ6IDI3MHB4O1wiIGRhdGEtaGFuZGxlLWNvbG9yPVwiIzYzNzI4M1wiPlxuICAgICAgICAgICAgICAgICAgICA8bGkgaWY9XCJ7IGhlbHAgfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBlYWNoPVwieyBoZWxwIH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz1cInsgcGFyZW50Lm9uQ2xpY2sgfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cInsgbGluayB9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ7IGljb24gfVwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRpdGxlXCI+eyB0aXRsZSB9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICA8L3VsPlxuYDtcblxucmlvdC50YWcoJ21ldGEtaGVscCcsIGh0bWwsIGZ1bmN0aW9uIChvcHRzKSB7XG5cbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vZW50cnkuanMnKTtcblxuICAgIHRoaXMub25DbGljayA9IChldmVudCwgcGFyYW1zKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgICAgIFxuICAgIHRoaXMuaGVscCA9IG51bGw7XG4gICAgdGhpcy5vbignbW91bnQnLCAoKSA9PiB7XG4gICAgICAgIE1ldGFNYXAuTWV0YUZpcmUub24oJ21ldGFtYXAvaGVscCcsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhlbHAgPSBfLmZpbHRlcihfLnNvcnRCeShkYXRhLCAnb3JkZXInKSwgKGQpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgaW5jbHVkZSA9IGQuYXJjaGl2ZSAhPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmNsdWRlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5cbmNvbnN0IGh0bWwgPSBgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIGRhdGEtaG92ZXI9XCJkcm9wZG93blwiIGRhdGEtY2xvc2Utb3RoZXJzPVwidHJ1ZVwiPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWJlbGwtb1wiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJiYWRnZSBiYWRnZS1zdWNjZXNzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IG5vdGlmaWNhdGlvbnMubGVuZ3RoIH1cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCI+XG4gICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cImV4dGVybmFsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3MgPVwiYm9sZFwiPnsgbm90aWZpY2F0aW9ucy5sZW5ndGggfSBwZW5kaW5nPC9zcGFuPiBub3RpZmljYXRpb257IHM6IG5vdGlmaWNhdGlvbnMubGVuZ3RoID09IDAgfHwgbm90aWZpY2F0aW9ucy5sZW5ndGggPiAxIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+dmlldyBhbGw8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUtbGlzdCBzY3JvbGxlclwiIHN0eWxlPVwiaGVpZ2h0OiAyNTBweDtcIiBkYXRhLWhhbmRsZS1jb2xvcj1cIiM2MzcyODNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgaWY9XCJ7IG5vdGlmaWNhdGlvbnMgfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhY2g9XCJ7IG5vdGlmaWNhdGlvbnMgfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9XCJ7IHBhcmVudC5vbkNsaWNrIH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0aW1lXCI+eyB0aW1lIH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRldGFpbHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxhYmVsIGxhYmVsLXNtIGxhYmVsLWljb24gbGFiZWwtc3VjY2Vzc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXBsdXNcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgZXZlbnQgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgPC91bD5cbmA7XG5cbnJpb3QudGFnKCdtZXRhLW5vdGlmaWNhdGlvbnMnLCBodG1sLCBmdW5jdGlvbiAob3B0cykge1xuXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uL2VudHJ5LmpzJyk7XG5cbiAgICB0aGlzLm5vdGlmaWNhdGlvbnMgPSBbXTtcblxuICAgIHRoaXMub25DbGljayA9IChldmVudCwgcGFyYW1zKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgICAgIFxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xuICAgICAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKCdtZXRhbWFwL25vdGlmaWNhdGlvbnMnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zID0gXy5maWx0ZXIoXy5zb3J0QnkoZGF0YSwgJ29yZGVyJyksIChkKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIGluY2x1ZGUgPSBkLmFyY2hpdmUgIT0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5jbHVkZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xuXG5jb25zdCBodG1sID0gYDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjbGFzcz1cImRyb3Bkb3duLXRvZ2dsZVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBkYXRhLWhvdmVyPVwiZHJvcGRvd25cIiBkYXRhLWNsb3NlLW90aGVycz1cInRydWVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS10cm9waHlcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYmFkZ2UgYmFkZ2Utc3VjY2Vzc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBwb2ludHMubGVuZ3RoIH1cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCI+XG4gICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cImV4dGVybmFsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3MgPVwiYm9sZFwiPnsgcG9pbnRzLmxlbmd0aCB9IG5ldyA8L3NwYW4+IGFjaGlldmVtZW50eyBzOiBwb2ludHMubGVuZ3RoID09IDAgfHwgcG9pbnRzLmxlbmd0aCA+IDEgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj52aWV3IGFsbDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudS1saXN0IHNjcm9sbGVyXCIgc3R5bGU9XCJoZWlnaHQ6IDI1MHB4O1wiIGRhdGEtaGFuZGxlLWNvbG9yPVwiIzYzNzI4M1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBpZj1cInsgcG9pbnRzIH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYWNoPVwieyBwb2ludHMgfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9XCJ7IHBhcmVudC5vbkNsaWNrIH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0aW1lXCI+eyB0aW1lIH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRldGFpbHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxhYmVsIGxhYmVsLXNtIGxhYmVsLWljb24gbGFiZWwtc3VjY2Vzc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXBsdXNcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgZXZlbnQgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgPC91bD5cbmA7XG5cbnJpb3QudGFnKCdtZXRhLXBvaW50cycsIGh0bWwsIGZ1bmN0aW9uIChvcHRzKSB7XG5cbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vZW50cnkuanMnKTtcbiAgICB0aGlzLnBvaW50cyA9IFtdO1xuXG4gICAgdGhpcy5vbkNsaWNrID0gKGV2ZW50LCBwYXJhbXMpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXZlbnQsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xuICAgICAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKGB1c2Vycy8ke01ldGFNYXAuVXNlci51c2VySWR9L3BvaW50c2AsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBvaW50cyA9IF8uZmlsdGVyKF8uc29ydEJ5KGRhdGEsICdvcmRlcicpLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBpbmNsdWRlID0gZC5hcmNoaXZlICE9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluY2x1ZGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcblxuY29uc3QgaHRtbCA9IGA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgZGF0YS1ob3Zlcj1cImRyb3Bkb3duXCIgZGF0YS1jbG9zZS1vdGhlcnM9XCJ0cnVlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidXNlcm5hbWUgdXNlcm5hbWUtaGlkZS1vbi1tb2JpbGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgdXNlcm5hbWUgfVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgYWx0PVwiXCIgaGVpZ2h0PVwiMzlcIiB3aWR0aD1cIjM5XCIgY2xhc3M9XCJpbWctY2lyY2xlXCIgc3JjPVwieyBwaWN0dXJlIH1cIiAvPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51IGRyb3Bkb3duLW1lbnUtZGVmYXVsdFwiPlxuICAgICAgICAgICAgICAgICAgICA8bGkgaWY9XCJ7IG1lbnUgfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBlYWNoPVwieyBtZW51IH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz1cInsgcGFyZW50Lm9uQ2xpY2sgfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cInsgbGluayB9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ7IGljb24gfVwiPjwvaT4geyB0aXRsZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgPC91bD5cbmA7XG5cbnJpb3QudGFnKCdtZXRhLXVzZXInLCBodG1sLCBmdW5jdGlvbiAob3B0cykge1xuXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uL2VudHJ5LmpzJyk7XG5cbiAgICB0aGlzLm1lbnUgPSBbXTtcbiAgICB0aGlzLnVzZXJuYW1lID0gJyc7XG4gICAgdGhpcy5waWN0dXJlID0gJyc7XG5cbiAgICB0aGlzLmxvZ291dCA9ICgpID0+IHtcbiAgICAgICAgTWV0YU1hcC5sb2dvdXQoKTtcbiAgICB9XG5cbiAgICB0aGlzLmxpbmtBY2NvdW50ID0gKCkgPT4ge1xuICAgICAgICBNZXRhTWFwLkF1dGgwLmxpbmtBY2NvdW50KCk7XG4gICAgfVxuXG4gICAgdGhpcy5vbkNsaWNrID0gKGV2ZW50LCBwYXJhbXMpID0+IHtcbiAgICAgICAgc3dpdGNoKGV2ZW50Lml0ZW0ubGluaykge1xuICAgICAgICAgICAgY2FzZSAnI2xvZ291dCc6XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dvdXQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJyNsaW5rLXNvY2lhbC1hY2NvdW50cyc6XG4gICAgICAgICAgICAgICAgdGhpcy5saW5rQWNjb3VudCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhldmVudCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xuICAgICAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKGBtZXRhbWFwL3VzZXJgLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgdGhpcy51c2VybmFtZSA9IE1ldGFNYXAuVXNlci5kaXNwbGF5TmFtZTtcbiAgICAgICAgICAgIHRoaXMucGljdHVyZSA9IE1ldGFNYXAuVXNlci5waWN0dXJlO1xuICAgICAgICAgICAgdGhpcy5tZW51ID0gXy5maWx0ZXIoXy5zb3J0QnkoZGF0YSwgJ29yZGVyJyksIChkKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIGluY2x1ZGUgPSBkLmFyY2hpdmUgIT0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5jbHVkZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xuXG5jb25zdCBodG1sID0gYFxuPGRpdiBjbGFzcz1cInBhZ2UtYWN0aW9uc1wiPlxuICAgIDxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIj5cbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gcmVkLWhhemUgYnRuLXNtIGRyb3Bkb3duLXRvZ2dsZVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBkYXRhLWhvdmVyPVwiZHJvcGRvd25cIiBkYXRhLWNsb3NlLW90aGVycz1cInRydWVcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaGlkZGVuLXNtIGhpZGRlbi14c1wiPkFjdGlvbnMmbmJzcDs8L3NwYW4+XG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWFuZ2xlLWRvd25cIj48L2k+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCIgcm9sZT1cIm1lbnVcIj5cbiAgICAgICAgICAgIDxsaSBlYWNoPVwieyB2YWwsIGkgaW4gZGF0YSB9XCIgY2xhc3M9XCJ7IHN0YXJ0OiBpID09IDAsIGFjdGl2ZTogaSA9PSAwIH1cIj5cbiAgICAgICAgICAgICAgICA8YSBpZj1cInsgcGFyZW50LmdldExpbmtBbGxvd2VkKHZhbCkgfVwiIGhyZWY9XCJ7IHBhcmVudC5nZXRBY3Rpb25MaW5rKHZhbCkgfVwiPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInsgdmFsLmljb24gfVwiPjwvaT4geyB2YWwudGl0bGUgfVxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJkaXZpZGVyXCI+PC9saT5cbiAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiI3NldHRpbmdzXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtZ2VhclwiPjwvaT4gU2V0dGluZ3NcbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICA8L3VsPlxuICAgIDwvZGl2PlxuXG4gICAgPHNwYW4gc3R5bGU9XCJwYWRkaW5nLWxlZnQ6IDVweDtcIj5cbiAgICAgICAgPHNwYW4gaWY9XCJ7IHBhZ2VOYW1lIH1cIlxuICAgICAgICAgICAgICAgIGlkPVwibWFwX25hbWVcIlxuICAgICAgICAgICAgICAgIGRhdGEtdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgIGRhdGEtdGl0bGU9XCJFbnRlciBtYXAgbmFtZVwiPlxuICAgICAgICAgICAgeyBwYWdlTmFtZSB9XG4gICAgICAgIDwvc3Bhbj5cbiAgICA8L3NwYW4+XG48L2Rpdj5cbmA7XG5cbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtYWN0aW9ucycsIGh0bWwsIGZ1bmN0aW9uIChvcHRzKSB7XG5cbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vZW50cnkuanMnKTtcblxuICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgIHRoaXMucGFnZU5hbWUgPSAnSG9tZSc7XG4gICAgdGhpcy51cmwgPSBNZXRhTWFwLmNvbmZpZy5zaXRlLmRiICsgJy5maXJlYmFzZWlvLmNvbSc7XG4gICAgdGhpcy5sb2FkZWQgPSBmYWxzZTtcblxuICAgIHRoaXMuZ2V0QWN0aW9uTGluayA9IChvYmopID0+IHtcbiAgICAgICAgbGV0IHJldCA9IG9iai5saW5rO1xuICAgICAgICBpZiAob2JqLnVybF9wYXJhbXMpIHtcbiAgICAgICAgICAgIGxldCBhcmdzID0gW107XG4gICAgICAgICAgICBfLmVhY2gob2JqLnVybF9wYXJhbXMsIChwcm0pID0+IHtcbiAgICAgICAgICAgICAgICBhcmdzLnB1c2godGhpc1twcm0ubmFtZV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXQgPSBvYmoubGluay5mb3JtYXQuY2FsbChvYmoubGluaywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICB0aGlzLmdldExpbmtBbGxvd2VkID0gKG9iaikgPT4ge1xuICAgICAgICBsZXQgcmV0ID0gdHJ1ZSA9PSBvYmpbJ2FsbG93ZWQtb24nXVsnKiddO1xuICAgICAgICBpZighcmV0KSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudFBhZ2UgPSBNZXRhTWFwLlJvdXRlci5jdXJyZW50UGF0aDtcbiAgICAgICAgICAgIHJldCA9IHRydWUgPT0gb2JqWydhbGxvd2VkLW9uJ11bY3VycmVudFBhZ2VdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgdGhpcy5iaW5kVG9wYWdlTmFtZSA9IF8ub25jZSgoKSA9PiB7XG4gICAgICAgIE1ldGFNYXAuTWV0YUZpcmUub24oYG1hcHMvbGlzdC8ke3RoaXMubWFwSWR9L25hbWVgLCAobmFtZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wYWdlTmFtZSA9IG5hbWUgfHwgJyc7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgTWV0YU1hcC5FdmVudGVyLmV2ZXJ5KCdwYWdlTmFtZScsIChvcHRzKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmxvYWRlZCkge1xuICAgICAgICAgICAgJCh0aGlzLm1hcF9uYW1lKS5lZGl0YWJsZSgnZGVzdHJveScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1hcElkKSB7XG4gICAgICAgICAgICBNZXRhTWFwLk1ldGFGaXJlLm9mZihgbWFwcy9saXN0LyR7dGhpcy5tYXBJZH0vbmFtZWApO1xuICAgICAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5vbihgbWFwcy9saXN0LyR7b3B0cy5pZH0vbmFtZWAsIChuYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlTmFtZSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFnZU5hbWUgPSBvcHRzLm5hbWUgfHwgJ0hvbWUnO1xuICAgICAgICB0aGlzLm1hcElkID0gb3B0cy5pZDtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgaWYgKHRoaXMubWFwSWQpIHtcbiAgICAgICAgICAgICQodGhpcy5tYXBfbmFtZSkuZWRpdGFibGUoeyB1bnNhdmVkY2xhc3M6IG51bGwgfSkub24oJ3NhdmUnLCAoZXZlbnQsIHBhcmFtcykgPT4ge1xuICAgICAgICAgICAgICAgIE1ldGFNYXAuTWV0YUZpcmUuc2V0RGF0YShwYXJhbXMubmV3VmFsdWUsIGBtYXBzL2xpc3QvJHt0aGlzLm1hcElkfS9uYW1lYCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYmluZFRvcGFnZU5hbWUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgTWV0YU1hcC5NZXRhRmlyZS5vbignbWV0YW1hcC9hY3Rpb25zJywgKGRhdGEpID0+IHtcbiAgICAgICAgdGhpcy5kYXRhID0gXy5maWx0ZXIoXy5zb3J0QnkoZGF0YSwgJ29yZGVyJyksIChkKSA9PiB7XG4gICAgICAgICAgICB2YXIgaW5jbHVkZSA9IGQuYXJjaGl2ZSAhPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGluY2x1ZGU7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH0pO1xuXG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xuY29uc3QgcGFnZUhlYWRlciA9IHJlcXVpcmUoJy4vcGFnZS1oZWFkZXInKTtcbmNvbnN0IHBhZ2VDb250YWluZXIgPSByZXF1aXJlKCcuL3BhZ2UtY29udGFpbmVyJyk7XG4vL2NvbnN0IG1ldGFEaWFsb2cgPSByZXF1aXJlKCcuL2NvbXBvbmVudHMvbWV0YS1kaWFsb2cnKTtcbmNvbnN0IHBhZ2VGb290ZXIgPSByZXF1aXJlKCcuL3BhZ2UtZm9vdGVyJyk7XG5jb25zdCBFVkVOVFMgPSByZXF1aXJlKCcuLi9qcy9jb25zdGFudHMvZXZlbnRzJyk7XG5cbmNvbnN0IGh0bWwgPSBgXG48ZGl2IGlkPVwicGFnZV9ib2R5XCIgY2xhc3M9XCJwYWdlLWhlYWRlci1maXhlZCBwYWdlLXNpZGViYXItY2xvc2VkLWhpZGUtbG9nbyBwYWdlLXNpZGViYXItY2xvc2VkLWhpZGUtbG9nb1wiPlxuXG4gICAgPGRpdiBpZD1cIm1ldGFfcGFnZV9oZWFkZXJcIj48L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJjbGVhcmZpeFwiPlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBpZD1cIm1ldGFfcGFnZV9jb250YWluZXJcIj48L2Rpdj5cblxuPC9kaXY+XG5cbjxkaXYgaWQ9XCJtZXRhX3BhZ2VfZm9vdGVyXCI+PC9kaXY+YDtcblxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1ib2R5JywgaHRtbCwgZnVuY3Rpb24ob3B0cykge1xuXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uL2VudHJ5LmpzJyk7XG5cbiAgICB0aGlzLm9uKCdtb3VudCcsICgpID0+IHtcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV9oZWFkZXIsICdwYWdlLWhlYWRlcicpO1xuICAgICAgICByaW90Lm1vdW50KHRoaXMubWV0YV9wYWdlX2NvbnRhaW5lciwgJ3BhZ2UtY29udGFpbmVyJyk7XG4vLyAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV9kaWFsb2csICdtZXRhLWRpYWxvZycpO1xuICAgICAgICByaW90Lm1vdW50KHRoaXMubWV0YV9wYWdlX2Zvb3RlciwgJ3BhZ2UtZm9vdGVyJyk7XG4gICAgfSk7XG4gICAgXG4gICAgTWV0YU1hcC5FdmVudGVyLm9uKEVWRU5UUy5TSURFQkFSX0NMT1NFLCAoKSA9PiB7XG4gICAgICAgICQodGhpcy5wYWdlX2JvZHkpLmFkZENsYXNzKCdwYWdlLXNpZGViYXItcmV2ZXJzZWQnKTtcbiAgICB9KTtcbiAgICBcbiAgICBcbiAgICBNZXRhTWFwLkV2ZW50ZXIub24oRVZFTlRTLlNJREVCQVJfT1BFTiwgKCkgPT4ge1xuICAgICAgICAkKHRoaXMucGFnZV9ib2R5KS5yZW1vdmVDbGFzcygncGFnZS1zaWRlYmFyLXJldmVyc2VkJyk7XG4gICAgfSk7XG5cbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5jb25zdCBwYWdlU2lkZWJhciA9IHJlcXVpcmUoJy4vcGFnZS1zaWRlYmFyLmpzJyk7XG5jb25zdCBwYWdlQ29udGVudCA9IHJlcXVpcmUoJy4vcGFnZS1jb250ZW50LmpzJyk7XG5cbmNvbnN0IGh0bWwgPSBgXG48ZGl2IGNsYXNzPVwicGFnZS1jb250YWluZXJcIj5cbiAgICA8ZGl2IGlkPVwibWV0YV9wYWdlX3NpZGViYXJcIj48L2Rpdj5cbiAgICA8ZGl2IGlkPVwibWV0YV9wYWdlX2NvbnRlbnRcIj48L2Rpdj5cbjwvZGl2PlxuYDtcblxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1jb250YWluZXInLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XG5cbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vZW50cnkuanMnKTtcblxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xuICAgICAgICByaW90Lm1vdW50KHRoaXMubWV0YV9wYWdlX3NpZGViYXIsICdwYWdlLXNpZGViYXInKTtcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV9jb250ZW50LCAncGFnZS1jb250ZW50Jyk7XG4gICAgfSk7XG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xuY29uc3QgRVZFTlRTID0gcmVxdWlyZSgnLi4vanMvY29uc3RhbnRzL2V2ZW50cycpO1xuY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG5jb25zdCBodG1sID0gYFxuPGRpdiBjbGFzcz1cInBhZ2UtY29udGVudC13cmFwcGVyXCI+XG4gICAgPGRpdiBpZD1cInBhZ2UtY29udGVudFwiIGNsYXNzPVwicGFnZS1jb250ZW50XCI+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cInBhZ2UtaGVhZFwiPlxuXG4gICAgICAgIDwvZGl2PlxuXG5cbiAgICAgICAgPGRpdiBpZD1cImFwcC1jb250YWluZXJcIj5cblxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbjwvZGl2PlxuYDtcblxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1jb250ZW50JywgaHRtbCwgZnVuY3Rpb24gKG9wdHMpIHtcblxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi9lbnRyeS5qcycpO1xuXG4gICAgTWV0YU1hcC5FdmVudGVyLm9uKEVWRU5UUy5TSURFQkFSX0NMT1NFLCAoKSA9PiB7XG4gICAgICAgIGxldCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAkKHRoaXNbJ2FwcC1jb250YWluZXInXSkuY3NzKHsgd2lkdGg6IGAke3dpZHRoIC0gNDZ9cHhgIH0pO1xuICAgIH0pO1xuXG4gICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICAgICQodGhpc1snYXBwLWNvbnRhaW5lciddKS5jc3MoeyB3aWR0aDogYDEwMCVgIH0pO1xuICAgIH0pO1xuXG4gICAgTWV0YU1hcC5FdmVudGVyLm9uKEVWRU5UUy5TSURFQkFSX09QRU4sICgpID0+IHtcbiAgICAgICAgJCh0aGlzWydhcHAtY29udGFpbmVyJ10pLmNzcyh7IHdpZHRoOiBgMTAwJWAgfSk7XG4gICAgfSk7XG5cbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5cbmNvbnN0IGh0bWwgPSBgXG48ZGl2IGNsYXNzPVwicGFnZS1mb290ZXJcIiBzdHlsZT1cInBvc2l0aW9uOiBmaXhlZDsgYm90dG9tOiAwO1wiPlxuICAgIDxkaXYgY2xhc3M9XCJwYWdlLWZvb3Rlci1pbm5lclwiPlxuICAgICAgICA8YSBocmVmPVwiI3Rlcm1zXCI+JmNvcHk7MjAxNTwvYT5cbiAgICA8L2Rpdj5cbjwvZGl2PlxuYDtcblxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1mb290ZXInLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XG5cbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vZW50cnkuanMnKTtcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5jb25zdCBwYWdlTG9nbyA9IHJlcXVpcmUoJy4vcGFnZS1sb2dvLmpzJyk7XG5jb25zdCBwYWdlQWN0aW9ucyA9IHJlcXVpcmUoJy4vcGFnZS1hY3Rpb25zLmpzJyk7XG5jb25zdCBwYWdlU2VhcmNoID0gcmVxdWlyZSgnLi9wYWdlLXNlYXJjaC5qcycpO1xuY29uc3QgcGFnZVRvcE1lbnUgPSByZXF1aXJlKCcuL3BhZ2UtdG9wbWVudScpO1xuXG5jb25zdCBodG1sID0gYFxuPGRpdiBpZD1cImhlYWRlci10b3BcIiBjbGFzcz1cInBhZ2UtaGVhZGVyIG5hdmJhciBuYXZiYXItZml4ZWQtdG9wXCI+XG4gICAgPGRpdiBpZD1cIm1ldGFfcHJvZ3Jlc3NfbmV4dFwiIHN0eWxlPVwib3ZlcmZsb3c6IGluaGVyaXQ7XCI+PC9kaXY+XG4gICAgPGRpdiBpZD1cImhlYWRlci1jb250ZW50XCIgY2xhc3M9XCJwYWdlLWhlYWRlci1pbm5lclwiPlxuXG4gICAgICAgIDxkaXYgaWQ9XCJtZXRhX3BhZ2VfbG9nb1wiPjwvZGl2PlxuICAgICAgICBcbiAgICAgICAgPGRpdiBpZD1cIm1ldGFfcGFnZV9hY3Rpb25zXCI+PC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGlkPVwibWV0YV9wYWdlX3RvcFwiIGNsYXNzPVwicGFnZS10b3BcIj5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCJtZXRhX3BhZ2Vfc2VhcmNoXCI+PC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJtZXRhX3BhZ2VfdG9wbWVudVwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgIDwvZGl2PlxuXG48L2Rpdj5cbmA7XG5cbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtaGVhZGVyJywgaHRtbCwgZnVuY3Rpb24ob3B0cykge1xuXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uL2VudHJ5LmpzJyk7XG5cbiAgICB0aGlzLm9uKCdtb3VudCcsICgpID0+IHtcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV9sb2dvLCAncGFnZS1sb2dvJyk7XG4gICAgICAgIHJpb3QubW91bnQodGhpcy5tZXRhX3BhZ2VfYWN0aW9ucywgJ3BhZ2UtYWN0aW9ucycpO1xuICAgICAgICByaW90Lm1vdW50KHRoaXMubWV0YV9wYWdlX3RvcCwgJ3BhZ2Utc2VhcmNoJyk7XG4gICAgICAgIHJpb3QubW91bnQodGhpcy5tZXRhX3BhZ2VfdG9wLCAncGFnZS10b3BtZW51Jyk7XG4gICAgfSk7XG5cbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5jb25zdCBFVkVOVFMgPSByZXF1aXJlKCcuLi9qcy9jb25zdGFudHMvZXZlbnRzJyk7XG5cbmNvbnN0IGh0bWwgPSBgXG48ZGl2IGNsYXNzID1cInBhZ2UtbG9nb1wiPlxuICAgIDxhIGlkPVwibWV0YV9sb2dvXCIgaHJlZj1cIiNob21lXCI+XG4gICAgICAgIDxpbWcgc3JjPVwibWV0YW1hcC9hc3NldHMvaW1nL21ldGFtYXBfY2xvdWQucG5nXCIgYWx0PVwibG9nb1wiIGNsYXNzID1cImxvZ28tZGVmYXVsdFwiIC8+XG4gICAgPC9hPlxuICAgIDxkaXYgaWQ9XCJtZXRhX21lbnVfdG9nZ2xlXCIgY2xhc3MgPVwibWVudS10b2dnbGVyIHNpZGViYXItdG9nZ2xlclwiIHN0eWxlPVwieyBnZXREaXNwbGF5KCdtZW51JykgfVwiPlxuICAgICAgICA8IS0tRE9DOiBSZW1vdmUgdGhlIGFib3ZlIFwiaGlkZVwiIHRvIGVuYWJsZSB0aGUgc2lkZWJhciB0b2dnbGVyIGJ1dHRvbiBvbiBoZWFkZXItLT5cbiAgICA8L2Rpdj5cbjwvZGl2PlxuPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzID1cIm1lbnUtdG9nZ2xlciByZXNwb25zaXZlLXRvZ2dsZXJcIiBkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCIgZGF0YS10YXJnZXQ9XCIubmF2YmFyLWNvbGxhcHNlXCI+XG48L2E+XG5gO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLWxvZ28nLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XG5cbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vZW50cnkuanMnKTtcbiAgICB0aGlzLmRpc3BsYXkgPSB0cnVlO1xuICAgIFxuICAgIHRoaXMuZ2V0RGlzcGxheSA9IChlbCkgPT4ge1xuICAgICAgICBcbiAgICAgICAgaWYoIXRoaXMuZGlzcGxheSkge1xuICAgICAgICAgICAgcmV0dXJuICdkaXNwbGF5OiBub25lOyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgTWV0YU1hcC5FdmVudGVyLm9uKEVWRU5UUy5TSURFQkFSX0NMT1NFLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZGlzcGxheSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH0pO1xuICAgIFxuICAgIFxuICAgIE1ldGFNYXAuRXZlbnRlci5vbihFVkVOVFMuU0lERUJBUl9PUEVOLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZGlzcGxheSA9IHRydWU7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfSk7XG4gICAgXG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xuXG5jb25zdCBodG1sID0gYFxuPCEtLSBET0M6IEFwcGx5IFwic2VhcmNoLWZvcm0tZXhwYW5kZWRcIiByaWdodCBhZnRlciB0aGUgXCJzZWFyY2gtZm9ybVwiIGNsYXNzIHRvIGhhdmUgaGFsZiBleHBhbmRlZCBzZWFyY2ggYm94IC0tPlxuPGZvcm0gY2xhc3M9XCJzZWFyY2gtZm9ybVwiIGFjdGlvbj1cImV4dHJhX3NlYXJjaC5odG1sXCIgbWV0aG9kPVwiR0VUXCI+XG4gICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sIGlucHV0LXNtXCIgcGxhY2Vob2xkZXI9XCJTZWFyY2guLi5cIiBuYW1lPVwicXVlcnlcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYnRuXCI+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiYnRuIHN1Ym1pdFwiPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXNlYXJjaFwiPjwvaT5cbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuPC9mb3JtPlxuYDtcblxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1zZWFyY2gnLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XG5cbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vZW50cnkuanMnKTtcblxuICAgIFxufSk7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcbmNvbnN0IEVWRU5UUyA9IHJlcXVpcmUoJy4uL2pzL2NvbnN0YW50cy9ldmVudHMnKTtcblxuY29uc3QgaHRtbCA9IGBcbjxkaXYgY2xhc3M9XCJwYWdlLXNpZGViYXItd3JhcHBlclwiIHN0eWxlPVwieyBnZXREaXNwbGF5KCkgfVwiPlxuICAgIDxkaXYgY2xhc3M9XCJwYWdlLXNpZGViYXIgbmF2YmFyLWNvbGxhcHNlIGNvbGxhcHNlXCI+XG4gICAgICAgIDx1bCBjbGFzcz1cInBhZ2Utc2lkZWJhci1tZW51IFwiIGRhdGEta2VlcC1leHBhbmRlZD1cImZhbHNlXCIgZGF0YS1hdXRvLXNjcm9sbD1cInRydWVcIiBkYXRhLXNsaWRlLXNwZWVkPVwiMjAwXCI+XG5cbiAgICAgICAgICAgIDxsaSBpZj1cInsgZGF0YSB9XCIgb25jbGljaz1cInsgcGFyZW50LmNsaWNrIH1cIiBlYWNoPVwieyBkYXRhIH1cIj5cbiAgICAgICAgICAgICAgICA8YSBpZj1cInsgaWNvbiB9XCIgaHJlZj1cImphdmFzY3JpcHQ6O1wiPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInsgaWNvbiB9XCIgc3R5bGU9XCJjb2xvcjojeyBjb2xvciB9O1wiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0aXRsZVwiPnsgdGl0bGUgfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ7IGFycm93OiBtZW51Lmxlbmd0aCB9XCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8dWwgaWY9XCJ7IG1lbnUgJiYgbWVudS5sZW5ndGggfVwiIGNsYXNzPVwic3ViLW1lbnVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGxpIGVhY2g9XCJ7IG1lbnUgfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwieyBpY29uIH1cIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0aXRsZVwiPnsgdGl0bGUgfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPC9saT5cblxuICAgICAgICA8L3VsPlxuXG4gICAgPC9kaXY+XG48L2Rpdj5cbmA7XG5cbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2Utc2lkZWJhcicsIGh0bWwsIGZ1bmN0aW9uKG9wdHMpIHtcblxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi9lbnRyeS5qcycpO1xuXG4gICAgdGhpcy5jbGljayA9IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnZm9vJykgfVxuICAgIHRoaXMuZGlzcGxheSA9IHRydWU7XG4gICAgdGhpcy5kYXRhID0gW107XG5cbiAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKCdtZXRhbWFwL3NpZGViYXInLCAoZGF0YSkgPT4ge1xuICAgICAgICB0aGlzLmRhdGEgPSBfLmZpbHRlcihfLnNvcnRCeShkYXRhLCAnb3JkZXInKSwgKGQpID0+IHtcbiAgICAgICAgICAgIHZhciBpbmNsdWRlID0gZC5hcmNoaXZlICE9IHRydWU7XG4gICAgICAgICAgICBpZiAoaW5jbHVkZSAmJiBkLm1lbnUgJiYgZC5tZW51KSB7XG4gICAgICAgICAgICAgICAgZC5tZW51ID0gXy5maWx0ZXIoXy5zb3J0QnkoZC5tZW51LCAnb3JkZXInKSwgKG0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0uYXJjaGl2ZSAhPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluY2x1ZGU7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMuZ2V0RGlzcGxheSA9ICgpID0+IHtcbiAgICAgICAgaWYoIXRoaXMuZGlzcGxheSkge1xuICAgICAgICAgICAgcmV0dXJuICdkaXNwbGF5OiBub25lOyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgTWV0YU1hcC5FdmVudGVyLm9uKEVWRU5UUy5TSURFQkFSX0NMT1NFLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZGlzcGxheSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH0pO1xuICAgIFxuICAgIFxuICAgIE1ldGFNYXAuRXZlbnRlci5vbihFVkVOVFMuU0lERUJBUl9PUEVOLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZGlzcGxheSA9IHRydWU7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfSk7XG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xuY29uc3QgbWV0YVBvaW50cyA9IHJlcXVpcmUoJy4vbWVudS9tZXRhLXBvaW50cy5qcycpO1xuY29uc3QgbWV0YUhlbHAgPSByZXF1aXJlKCcuL21lbnUvbWV0YS1oZWxwLmpzJyk7XG5jb25zdCBtZXRhVXNlciA9IHJlcXVpcmUoJy4vbWVudS9tZXRhLXVzZXIuanMnKTtcbmNvbnN0IG1ldGFOb3QgPSByZXF1aXJlKCcuL21lbnUvbWV0YS1ub3RpZmljYXRpb25zLmpzJyk7XG5cbmNvbnN0IGh0bWwgPSBgXG48ZGl2IGNsYXNzPVwidG9wLW1lbnVcIj5cbiAgICA8dWwgY2xhc3M9XCJuYXYgbmF2YmFyLW5hdiBwdWxsLXJpZ2h0XCI+XG4gICAgICAgIDxsaSBjbGFzcz1cInNlcGFyYXRvciBoaWRlXCI+PC9saT5cbiAgICAgICAgPGxpIGNsYXNzPVwiZHJvcGRvd24gZHJvcGRvd24tZXh0ZW5kZWQgZHJvcGRvd24tbm90aWZpY2F0aW9uIGRyb3Bkb3duXCIgaWQ9XCJoZWFkZXJfbm90aWZpY2F0aW9uX2JhclwiPjwvbGk+XG5cbiAgICAgICAgPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPlxuICAgICAgICA8bGkgY2xhc3M9XCJkcm9wZG93biBkcm9wZG93bi1leHRlbmRlZCBkcm9wZG93bi1ub3RpZmljYXRpb24gZHJvcGRvd25cIiBpZD1cImhlYWRlcl9wb2ludHNfYmFyXCI+PC9saT5cblxuICAgICAgICA8bGkgY2xhc3M9XCJzZXBhcmF0b3IgaGlkZVwiPjwvbGk+XG4gICAgICAgIDxsaSBjbGFzcz1cImRyb3Bkb3duXCIgaWQ9XCJoZWFkZXJfZGFzaGJvYXJkX2JhclwiIG9uY2xpY2s9XCJ7IG9uQ2xpY2sgfVwiPlxuICAgICAgICAgICAgPGEgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIiBocmVmPVwiI2hvbWVcIj5cbiAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWhvbWVcIj48L2k+XG4gICAgICAgICAgICA8L2E+XG4gICAgICAgIDwvbGk+XG4gICAgICAgICAgICBcbiAgICAgICAgPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPlxuICAgICAgICA8bGkgaWQ9XCJoZWFkZXJfaGVscF9iYXJcIiBjbGFzcz1cImRyb3Bkb3duIGRyb3Bkb3duLWV4dGVuZGVkIGRyb3Bkb3duLW5vdGlmaWNhdGlvbiBkcm9wZG93blwiPjwvbGk+XG4gICAgICAgICAgICBcbiAgICAgICAgPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPlxuICAgICAgICA8bGkgaWQ9XCJoZWFkZXJfdXNlcl9tZW51XCIgY2xhc3M9XCJkcm9wZG93biBkcm9wZG93bi11c2VyIGRyb3Bkb3duXCI+PC9saT5cbiAgICA8L3VsPlxuPC9kaXY+XG5gO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLXRvcG1lbnUnLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XG4gICAgdGhpcy5vbkNsaWNrID0gKGV2ZW50LCBwYXJhbXMpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXZlbnQsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xuICAgICAgICByaW90Lm1vdW50KHRoaXMuaGVhZGVyX3BvaW50c19iYXIsICdtZXRhLXBvaW50cycpO1xuICAgICAgICByaW90Lm1vdW50KHRoaXMuaGVhZGVyX25vdGlmaWNhdGlvbl9iYXIsICdtZXRhLW5vdGlmaWNhdGlvbnMnKTtcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLmhlYWRlcl9oZWxwX2JhciwgJ21ldGEtaGVscCcpO1xuICAgICAgICByaW90Lm1vdW50KHRoaXMuaGVhZGVyX3VzZXJfbWVudSwgJ21ldGEtdXNlcicpO1xuICAgIH0pO1xuXG59KTsiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vLi4vdHlwaW5ncy9yaW90anMvcmlvdGpzLmQudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL3R5cGluZ3MvbnByb2dyZXNzL05Qcm9ncmVzcy5kLnRzXCIgLz5cblxuY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcbmNvbnN0IE5Qcm9ncmVzcyA9IHdpbmRvdy5OUHJvZ3Jlc3M7XG5jb25zdCBST1VURVMgPSByZXF1aXJlKCcuLi8uLi9qcy9jb25zdGFudHMvcm91dGVzJyk7XG5cbmNvbnN0IGh0bWwgPSBgXG48ZGl2IGNsYXNzPVwicG9ydGxldCBsaWdodFwiPlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwicG9ydGxldC1ib2R5XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInJvdyBtYXJnaW4tYm90dG9tLTMwXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGlmPVwieyBoZWFkZXIgfVwiIGNsYXNzPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+eyBoZWFkZXIudGl0bGUgfTwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+eyBoZWFkZXIudGV4dCB9PC9wPlxuXHRcdFx0XHRcdFx0XHQ8dWwgY2xhc3M9XCJsaXN0LXVuc3R5bGVkIG1hcmdpbi10b3AtMTAgbWFyZ2luLWJvdHRvbS0xMFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxsaSBlYWNoPVwieyBhcmVhcyB9XCI+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8aSBjbGFzcz1cInsgaWNvbiB9XCI+PC9pPiA8Yj57IHRpdGxlIH08L2I+IHsgdGV4dCB9XG5cdFx0XHRcdFx0XHRcdFx0PC9saT5cblx0XHRcdFx0XHRcdFx0PC91bD5cblx0XHRcdFx0XHRcdFx0PCEtLSBCbG9ja3F1b3RlcyAtLT5cblx0XHRcdFx0XHRcdFx0PGJsb2NrcXVvdGUgY2xhc3M9XCJoZXJvXCI+XG5cdFx0XHRcdFx0XHRcdFx0PHA+eyBxdW90ZS50ZXh0IH08L3A+XG5cdFx0XHRcdFx0XHRcdFx0PHNtYWxsPnsgcXVvdGUuYnkgfTwvc21hbGw+XG5cdFx0XHRcdFx0XHRcdDwvYmxvY2txdW90ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWRkdGhpc19ob3Jpem9udGFsX2ZvbGxvd190b29sYm94XCI+PC9kaXY+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3MgPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlmcmFtZSBpZj1cInsgaGVhZGVyLnlvdXR1YmVpZCB9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJ5dHBsYXllclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0L2h0bWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9XCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC97IGhlYWRlci55b3V0dWJlaWQgfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lYm9yZGVyPVwiMFwiIGFsbG93ZnVsbHNjcmVlblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcyA9XCJmaXR2aWRzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJoZWlnaHQ6IDMyN3B4OyB3aWR0aDogMTAwJTsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1sZWZ0OiBhdXRvOyBtYXJnaW4tcmlnaHQ6IGF1dG87IGJyb2RlcjogMDtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG5cdFx0XHRcdFx0XHRcdDwvaWZyYW1lPlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkbGluZVwiPlxuXHRcdFx0XHRcdFx0PGgzPnsgdXNlck5hbWUgfXsgdmlzaW9uLnRpdGxlIH08L2gzPlxuXHRcdFx0XHRcdDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+eyB2aXNpb24udGV4dCB9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHQ8L2Rpdj5cbmA7XG5cbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ2hvbWUnLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XG5cbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vZW50cnkuanMnKTtcbiAgICBcbiAgICB0aGlzLmFyZWFzID0gW11cbiAgICB0aGlzLmhlYWRlciA9IHt9XG5cbiAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKFJPVVRFUy5IT01FLCAoZGF0YSkgPT4ge1xuICAgICAgICB0aGlzLmFyZWFzID0gXy5maWx0ZXIoXy5zb3J0QnkoZGF0YS5hcmVhcywgJ29yZGVyJyksIChkKSA9PiB7XG4gICAgICAgICAgICB2YXIgaW5jbHVkZSA9IGQuYXJjaGl2ZSAhPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGluY2x1ZGU7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnF1b3RlID0gZGF0YS5xdW90ZTtcbiAgICAgICAgdGhpcy5oZWFkZXIgPSBkYXRhLmhlYWRlcjtcbiAgICAgICAgdGhpcy52aXNpb24gPSBkYXRhLnZpc2lvbjtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudXNlck5hbWUgPSBNZXRhTWFwLlVzZXIuZnVsbE5hbWU7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICBcbiAgICAgICAgTlByb2dyZXNzLmRvbmUoKTtcbiAgICAgICAgXG4gICAgICAgIHdpbmRvdy5hZGR0aGlzLmxheWVycy5yZWZyZXNoKCk7XG4gICAgfSk7XG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xuY29uc3QgTlByb2dyZXNzID0gd2luZG93Lk5Qcm9ncmVzcztcbmNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbmNvbnN0IFJPVVRFUyA9IHJlcXVpcmUoJy4uLy4uL2pzL2NvbnN0YW50cy9yb3V0ZXMnKTtcbmNvbnN0IFBBR0VTID0gcmVxdWlyZSgnLi4vLi4vanMvY29uc3RhbnRzL3BhZ2VzJyk7XG5cbmNvbnN0IGh0bWwgPSBgXG48ZGl2IGNsYXNzPVwicG9ydGxldCBib3ggZ3JleS1jYXNjYWRlXCI+XG4gICAgPGRpdiBjbGFzcz1cInBvcnRsZXQtdGl0bGVcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNhcHRpb25cIj5cbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtaWNvbi10aC1sYXJnZVwiPjwvaT5NZXRhTWFwc1xuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBpZj1cInsgbWVudSB9XCIgY2xhc3M9XCJhY3Rpb25zXCI+XG4gICAgICAgICAgICA8YSBlYWNoPVwieyBtZW51LmJ1dHRvbnMgfVwiIGhyZWY9XCJ7IGxpbmsgfVwiIG9uY2xpY2s9XCJ7IHBhcmVudC5vbkFjdGlvbkNsaWNrIH1cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc21cIj5cbiAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInsgaWNvbiB9XCI+PC9pPiB7IHRpdGxlIH1cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc21cIiBocmVmPVwiamF2YXNjcmlwdDo7XCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWNvZ3NcIj48L2k+IFRvb2xzIDxpIGNsYXNzPVwiZmEgZmEtYW5nbGUtZG93blwiPjwvaT5cbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudSBwdWxsLXJpZ2h0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxsaSBlYWNoPVwieyBtZW51Lm1lbnUgfVwiIG9uY2xpY2s9XCJ7IHBhcmVudC5vbk1lbnVDbGljayB9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwieyBsaW5rIH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInsgaWNvbiB9XCI+PC9pPiB7IHRpdGxlIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJwb3J0bGV0LWJvZHlcIj5cbiAgICAgICAgPHVsIGNsYXNzPVwibmF2IG5hdi10YWJzIHBvcnRsZXQtdGFic1wiPlxuICAgICAgICAgICAgPGxpIG9uY2xpY2s9XCJ7IHBhcmVudC5vblRhYlN3aXRjaCB9XCIgZWFjaD1cInsgdmFsLCBpIGluIHRhYnMgfVwiIGNsYXNzPVwieyBhY3RpdmU6IGkgPT0gMCB9XCI+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNteW1hcHNfMV97IGkgfVwiIGRhdGEtdG9nZ2xlPVwidGFiXCIgYXJpYS1leHBhbmRlZD1cInsgdHJ1ZTogaSA9PSAwIH1cIj5cbiAgICAgICAgICAgICAgICB7IHZhbC50aXRsZSB9PC9hPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRhYmxlLXRvb2xiYXJcIj5cblxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRhYi1jb250ZW50XCI+XG4gICAgICAgICAgICA8ZGl2IGVhY2g9XCJ7IHZhbCwgaSBpbiB0YWJzIH1cIiBjbGFzcz1cInRhYi1wYW5lIGZhc2UgaW4geyBhY3RpdmU6IGkgPT0gMCB9XCIgaWQ9XCJteW1hcHNfMV97IGkgfVwiPlxuICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cInRhYmxlIHRhYmxlLXN0cmlwZWQgdGFibGUtYm9yZGVyZWQgdGFibGUtaG92ZXJcIiBpZD1cIm15bWFwc190YWJsZV97IGkgfVwiPlxuICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFwSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzcz1cInRhYmxlLWNoZWNrYm94XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZj1cInsgcGFyZW50LmN1cnJlbnRUYWIgPT0gJ015IE1hcHMnIH1cIiB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cImdyb3VwLWNoZWNrYWJsZVwiIGRhdGEtc2V0PVwiI215bWFwc190YWJsZV97IGkgfSAuY2hlY2tib3hlc1wiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZXJJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWF0ZWQgT25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhdHVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dHIgaWY9XCJ7IHBhcmVudC5kYXRhICYmIHBhcmVudC5kYXRhW2ldIH1cIiBlYWNoPVwieyBwYXJlbnQuZGF0YVtpXSB9XCIgY2xhc3M9XCJvZGQgZ3JhZGVYXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIiA+PHNwYW4gZGF0YS1zZWxlY3Rvcj1cImlkXCIgY2xhc3MgPVwibWFwaWRcIj57IGlkIH08L3NwYW4+PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZj1cInsgcGFyZW50LmN1cnJlbnRUYWIgPT0gJ015IE1hcHMnIH1cIiB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cImNoZWNrYm94ZXNcIiB2YWx1ZT1cIjFcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPnsgdXNlcl9pZCB9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgaWY9XCJ7IHZhbC5lZGl0YWJsZSB9XCIgY2xhc3M9XCJtZXRhX2VkaXRhYmxlX3sgaSB9XCIgZGF0YS1waz1cInsgaWQgfVwiIGRhdGEtdGl0bGU9XCJFZGl0IE1hcCBOYW1lXCI+eyBuYW1lIH08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBpZj1cInsgIXZhbC5lZGl0YWJsZSB9XCI+eyBuYW1lIH08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImNlbnRlclwiPnsgY3JlYXRlZF9hdCB9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGFiZWwgbGFiZWwtc20gbGFiZWwtc3VjY2Vzc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJpdmF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXNtIGJsdWUgZmlsdGVyLXN1Ym1pdFwiIG9uY2xpY2s9XCJ7IHBhcmVudC5vbk9wZW4gfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1pY29uLWV5ZS1vcGVuXCI+PC9pPiBPcGVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG48L2Rpdj5cbmA7XG5cbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ215LW1hcHMnLCBodG1sLCBmdW5jdGlvbiAob3B0cykge1xuXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uL2VudHJ5LmpzJyk7XG5cbiAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgIHRoaXMubWVudSA9IG51bGw7XG4gICAgdGhpcy50YWJzID0gXy5zb3J0QnkoW3sgdGl0bGU6ICdNeSBNYXBzJywgb3JkZXI6IDAsIGVkaXRhYmxlOiB0cnVlIH0sIHsgdGl0bGU6ICdTaGFyZWQgd2l0aCBNZScsIG9yZGVyOiAxLCBlZGl0YWJsZTogZmFsc2UgfV0sICdvcmRlcicpO1xuICAgIHRoaXMuY3VycmVudFRhYiA9ICdNeSBNYXBzJztcbiAgICBcbiAgICB0aGlzLm9uT3BlbiA9IChldmVudCwgLi4ubykgPT4ge1xuICAgICAgICBNZXRhTWFwLlJvdXRlci50byhgbWFwLyR7ZXZlbnQuaXRlbS5pZH1gKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5vblRhYlN3aXRjaCA9IChldmVudCwgLi4ubykgPT4ge1xuICAgICAgICB0aGlzLmN1cnJlbnRUYWIgPSBldmVudC5pdGVtLnZhbC50aXRsZTtcbiAgICAgICAgc3dpdGNoKHRoaXMuY3VycmVudFRhYikge1xuICAgICAgICAgICAgY2FzZSAnTXkgTWFwcyc6IFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm9uQWN0aW9uQ2xpY2sgPSAoZXZlbnQsIHRhZykgPT4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLm9uTWVudUNsaWNrID0gKGV2ZW50LCB0YWcpID0+IHtcbiAgICAgICAgaWYodGhpcy5jdXJyZW50VGFiID09ICdNeSBNYXBzJykge1xuICAgICAgICAgICAgc3dpdGNoIChldmVudC5pdGVtLnRpdGxlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVNYXBzID0gcmVxdWlyZSgnLi4vLi4vanMvYWN0aW9ucy9EZWxldGVNYXAuanMnKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gdGhpc1tgdGFibGUwYF0uZmluZCgnLmFjdGl2ZScpLmZpbmQoJy5tYXBpZCcpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaWRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaChzZWxlY3RlZCwgKGNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkcy5wdXNoKGNlbGwuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZU1hcHMuZGVsZXRlQWxsKGlkcywgUEFHRVMuTVlfTUFQUyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaW5kID0gdGhpc1tgdGFibGUwYF0uZmluZCgndGJvZHkgdHIgLmNoZWNrYm94ZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgZmluZC5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3RyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LnVuaWZvcm0udXBkYXRlKGZpbmQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xuICAgICAgICBOUHJvZ3Jlc3Muc3RhcnQoKTtcbiAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5vbignbWV0YW1hcC9teW1hcHMnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnUgPSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnM6IF8uc29ydEJ5KGRhdGEuYnV0dG9ucywgJ29yZGVyJyksXG4gICAgICAgICAgICAgICAgICAgIG1lbnU6IF8uc29ydEJ5KGRhdGEubWVudSwgJ29yZGVyJylcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGJ1aWxkVGFibGUgPSAoaWR4LCBsaXN0LCBlZGl0YWJsZSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmRhdGEgfHwge307XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW2lkeF0gPSBsaXN0O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzW2B0YWJsZSR7aWR4fWBdKSB7XG4gICAgICAgICAgICAgICAgICAgICQoYC5tZXRhX2VkaXRhYmxlXyR7aWR4fWApLmVkaXRhYmxlKCdkZXN0cm95Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbYGRhdGFUYWJsZSR7aWR4fWBdLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuXG4gICAgICAgICAgICAgICAgdGhpc1tgdGFibGUke2lkeH1gXSA9ICQodGhpc1tgbXltYXBzX3RhYmxlXyR7aWR4fWBdKTtcbiAgICAgICAgICAgICAgICB0aGlzW2BkYXRhVGFibGUke2lkeH1gXSA9IHRoaXNbYHRhYmxlJHtpZHh9YF0uRGF0YVRhYmxlKHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBVbmNvbW1lbnQgYmVsb3cgbGluZSgnZG9tJyBwYXJhbWV0ZXIpIHRvIGZpeCB0aGUgZHJvcGRvd24gb3ZlcmZsb3cgaXNzdWUgaW4gdGhlIGRhdGF0YWJsZSBjZWxscy4gVGhlIGRlZmF1bHQgZGF0YXRhYmxlIGxheW91dFxuICAgICAgICAgICAgICAgICAgICAvLyBzZXR1cCB1c2VzIHNjcm9sbGFibGUgZGl2KHRhYmxlLXNjcm9sbGFibGUpIHdpdGggb3ZlcmZsb3c6YXV0byB0byBlbmFibGUgdmVydGljYWwgc2Nyb2xsKHNlZTogYXNzZXRzL2dsb2JhbC9wbHVnaW5zL2RhdGF0YWJsZXMvcGx1Z2lucy9ib290c3RyYXAvZGF0YVRhYmxlcy5ib290c3RyYXAuanMpLiBcbiAgICAgICAgICAgICAgICAgICAgLy8gU28gd2hlbiBkcm9wZG93bnMgdXNlZCB0aGUgc2Nyb2xsYWJsZSBkaXYgc2hvdWxkIGJlIHJlbW92ZWQuIFxuICAgICAgICAgICAgICAgICAgICAvLydkb20nOiAnPCdyb3cnPCdjb2wtbWQtNiBjb2wtc20tMTInbD48J2NvbC1tZC02IGNvbC1zbS0xMidmPnI+dDwncm93JzwnY29sLW1kLTUgY29sLXNtLTEyJ2k+PCdjb2wtbWQtNyBjb2wtc20tMTIncD4+JyxcblxuICAgICAgICAgICAgICAgICAgICAvLydiU3RhdGVTYXZlJzogdHJ1ZSwgLy8gc2F2ZSBkYXRhdGFibGUgc3RhdGUocGFnaW5hdGlvbiwgc29ydCwgZXRjKSBpbiBjb29raWUuXG4gICAgICAgICAgICAgICAgICAgICdjb2x1bW5zJzogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyYWJsZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3JkZXJhYmxlJzogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3JkZXJhYmxlJzogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcmRlcmFibGUnOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29yZGVyYWJsZSc6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3JkZXJhYmxlJzogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3JkZXJhYmxlJzogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vdGhpc1tgdGFibGUke2lkeH1gXVRvb2xzID0gbmV3ICQuZm4uZGF0YVRhYmxlLlRhYmxlVG9vbHModGhpc1tgZGF0YVRhYmxlJHtpZHh9YF0sIHt9KTtcblxuICAgICAgICAgICAgICAgIHZhciB0YWJsZVdyYXBwZXIgPSB0aGlzW2B0YWJsZSR7aWR4fWBdLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoYCNteW1hcHNfJHtpZHh9X3RhYmxlX3dyYXBwZXJgKTtcblxuICAgICAgICAgICAgICAgIHRoaXNbYHRhYmxlJHtpZHh9YF0uZmluZCgnLmdyb3VwLWNoZWNrYWJsZScpLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXQgPSBqUXVlcnkodGhpcykuYXR0cignZGF0YS1zZXQnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSBqUXVlcnkodGhpcykuaXMoJzpjaGVja2VkJyk7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeShzZXQpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3RyJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd0cicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS51bmlmb3JtLnVwZGF0ZShzZXQpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpc1tgdGFibGUke2lkeH1gXS5vbignY2hhbmdlJywgJ3Rib2R5IHRyIC5jaGVja2JveGVzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3RyJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGFibGVXcmFwcGVyLmZpbmQoJy5kYXRhVGFibGVzX2xlbmd0aCBzZWxlY3QnKS5hZGRDbGFzcygnZm9ybS1jb250cm9sIGlucHV0LXhzbWFsbCBpbnB1dC1pbmxpbmUnKTsgLy8gbW9kaWZ5IHRhYmxlIHBlciBwYWdlIGRyb3Bkb3duXG5cbiAgICAgICAgICAgICAgICBpZiAoZWRpdGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgJChgLm1ldGFfZWRpdGFibGVfJHtpZHh9YCkuZWRpdGFibGUoeyB1bnNhdmVkY2xhc3M6IG51bGwgfSkub24oJ3NhdmUnLCBmdW5jdGlvbiAoZXZlbnQsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gdGhpcy5kYXRhc2V0LnBrO1xuICAgICAgICAgICAgICAgICAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5zZXREYXRhKHBhcmFtcy5uZXdWYWx1ZSwgYG1hcHMvbGlzdC8ke2lkfS9uYW1lYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpO1xuICAgICAgICAgICAgICAgIE1ldGFNYXAuZXJyb3IoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5nZXRDaGlsZChST1VURVMuTUFQU19MSVNUKS5vcmRlckJ5Q2hpbGQoJ293bmVyJykuZXF1YWxUbyhNZXRhTWFwLlVzZXIudXNlcklkKS5vbigndmFsdWUnLCAodmFsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gdmFsLnZhbCgpO1xuICAgICAgICAgICAgY29uc3QgbWFwcyA9IF8ubWFwKGxpc3QsIChvYmosIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIG9iai5pZCA9IGtleTtcbiAgICAgICAgICAgICAgICBvYmouY3JlYXRlZF9hdCA9IG1vbWVudChvYmouY3JlYXRlZF9hdCkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnVpbGRUYWJsZSgwLCBtYXBzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5nZXRDaGlsZChST1VURVMuTUFQU19MSVNUKS5vbigndmFsdWUnLCAodmFsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gdmFsLnZhbCgpO1xuICAgICAgICAgICAgY29uc3QgbWFwcyA9IF8ubWFwKGxpc3QsIChvYmosIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChvYmoub3duZXIgPT0gTWV0YU1hcC5Vc2VyLnVzZXJJZCB8fCBvYmouc2hhcmVkX3dpdGhbTWV0YU1hcC5Vc2VyLnVzZXJJZF0gIT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqLmlkID0ga2V5O1xuICAgICAgICAgICAgICAgICAgICBvYmouY3JlYXRlZF9hdCA9IG1vbWVudChvYmouY3JlYXRlZF9hdCkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGJ1aWxkVGFibGUoMSwgbWFwcyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL3R5cGluZ3MvcmlvdGpzL3Jpb3Rqcy5kLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi90eXBpbmdzL25wcm9ncmVzcy9OUHJvZ3Jlc3MuZC50c1wiIC8+XG5cbmNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5jb25zdCBOUHJvZ3Jlc3MgPSB3aW5kb3cuTlByb2dyZXNzO1xuY29uc3QgUk9VVEVTID0gcmVxdWlyZSgnLi4vLi4vanMvY29uc3RhbnRzL3JvdXRlcycpO1xuXG5jb25zdCBodG1sID0gYFxuPGRpdiBjbGFzcz1cInBvcnRsZXQgbGlnaHRcIj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInBvcnRsZXQtYm9keVwiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJyb3cgbWFyZ2luLWJvdHRvbS0zMFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBpZj1cInsgaGVhZGVyIH1cIiBjbGFzcz1cImNvbC1tZC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT57IGhlYWRlci50aXRsZSB9PC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD57IGhlYWRlci50ZXh0IH08L3A+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBlYWNoPVwieyBhcmVhcyB9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGxpbmVcIj5cbiAgICBcdFx0XHRcdFx0XHQ8aDM+eyB0aXRsZSB9PC9oMz5cbiAgICBcdFx0XHRcdFx0PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPnsgdGV4dCB9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJsaXN0LXVuc3R5bGVkIG1hcmdpbi10b3AtMTAgbWFyZ2luLWJvdHRvbS0xMFwiPlxuXHRcdFx0XHRcdFx0XHQ8bGkgZWFjaD1cInsgaXRlbXMgfVwiPlxuXHRcdFx0XHRcdFx0XHRcdDxpIGNsYXNzPVwieyBpY29uIH1cIj48L2k+IDxiPnsgdGl0bGUgfTwvYj4geyB0ZXh0IH1cblx0XHRcdFx0XHRcdFx0PC9saT5cblx0XHRcdFx0XHRcdDwvdWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdDwvZGl2PlxuYDtcblxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygndGVybXMnLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XG5cbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vZW50cnkuanMnKTtcbiAgICBcbiAgICB0aGlzLmFyZWFzID0gW11cbiAgICB0aGlzLmhlYWRlciA9IHt9XG5cbiAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKFJPVVRFUy5URVJNU19BTkRfQ09ORElUSU9OUywgKGRhdGEpID0+IHtcbiAgICAgICAgdGhpcy5hcmVhcyA9IF8uZmlsdGVyKF8uc29ydEJ5KGRhdGEuc2VjdGlvbnMsICdvcmRlcicpLCAoZCkgPT4ge1xuICAgICAgICAgICAgbGV0IGluY2x1ZGUgPSBkLmFyY2hpdmUgIT0gdHJ1ZTtcbiAgICAgICAgICAgIGlmKGluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICBkLml0ZW1zID0gXy5maWx0ZXIoXy5zb3J0QnkoZC5pdGVtcywgJ29yZGVyJyksIChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmNsdWRlMiA9IGQuYXJjaGl2ZSAhPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5jbHVkZTI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5jbHVkZTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmhlYWRlciA9IGRhdGEuaGVhZGVyO1xuICAgICAgICB0aGlzLnVzZXJOYW1lID0gTWV0YU1hcC5Vc2VyLmZ1bGxOYW1lO1xuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgXG4gICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7XG4gICAgfSk7XG59KTsiXX0=
