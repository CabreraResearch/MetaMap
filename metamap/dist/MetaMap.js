(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.MetaMap = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Auth0 = require('./js/app/auth0');
var User = require('./js/app/user.js');
var Router = require('./js/app/Router.js');
var Eventer = require('./js/app/Eventer.js');
var PageFactory = require('./js/pages/PageFactory.js');
var NProgress = window.NProgress;
var Config = require('./js/app//Config.js');
var ga = require('./js/integrations/google.js');
var shims = require('./js/tools/shims.js');

var MetaMap = (function () {
    function MetaMap() {
        _classCallCheck(this, MetaMap);

        this._config = new Config();
        this.config = this._config.config;
        this.MetaFire = this._config.MetaFire;
        this.Eventer = new Eventer(this);

        this.onReady();
    }

    _createClass(MetaMap, [{
        key: 'onReady',
        value: function onReady() {
            var _this = this;

            if (!this._onReady) {
                this._onReady = new Promise(function (fulfill, reject) {
                    _this._config.onReady().then(function (config) {
                        _this.Auth0 = new Auth0(config.auth0);
                        fulfill();
                    })['catch'](function (err) {
                        reject(err);
                    });
                });
            }
            return this._onReady;
        }
    }, {
        key: 'init',
        value: function init() {
            var _this2 = this;

            this.onReady().then(function () {
                _this2.Auth0.login().then(function (profile) {
                    _this2.MetaFire.login().then(function (auth) {
                        _this2.User = new User(profile, auth, _this2.Eventer, _this2.MetaFire);
                        _this2.User.onReady().then(function () {
                            _this2.PageFactory = new PageFactory(_this2.Eventer, _this2.MetaFire);
                            _this2.Router = new Router(_this2);
                        });
                    });
                });
            });
        }
    }, {
        key: 'log',
        value: function log(val) {
            if (window.ga) {
                window.ga('send', 'event', 'log', 'label', val);
            }
            console.log(val);
        }
    }, {
        key: 'error',
        value: function error(val) {
            if (window.ga) {
                window.ga('send', 'exception', {
                    'exDescription': val.message,
                    'exFatal': true
                });
            }
            console.error(val);
        }
    }, {
        key: 'logout',
        value: function logout() {
            this.MetaFire.logout();
            this.Auth0.logout();
        }
    }]);

    return MetaMap;
})();

module.exports = MetaMap;

},{"./js/app//Config.js":12,"./js/app/Eventer.js":13,"./js/app/Router.js":15,"./js/app/auth0":16,"./js/app/user.js":17,"./js/integrations/google.js":44,"./js/pages/PageFactory.js":47,"./js/tools/shims.js":48}],2:[function(require,module,exports){
'use strict';

require('babel/polyfill');
window.riot = require('riot');
window._ = require('lodash');
window.Promise = require('bluebird');
require('core-js');
window.$ = window.jQuery = require('jquery');
require('jquery-ui');
require('bootstrap');
window.Firebase = require('firebase');
window.Humanize = require('humanize-plus');
window.moment = require('moment');
window.URI = require('URIjs');
window.localforage = require('localforage');

require('./js/canvas/editor.js');
require('./js/canvas/user.js');
require('./js/canvas/editor_options.js');
require('./js/canvas/analytics.js');
require('./js/canvas/attachments.js');
require('./js/canvas/autosave.js');
require('./js/canvas/generator.js');
require('./js/canvas/layouts.js');
require('./js/canvas/map.js');
require('./js/canvas/perspectives.js');
require('./js/canvas/presenter.js');
require('./js/canvas/sharing.js');
require('./js/canvas/standards.js');
require('./js/canvas/tagging.js');
require('./js/canvas/templates.js');
require('./js/canvas/tests.js');
require('./js/canvas/ui.js');

var mm = require('./MetaMap');

module.exports = new mm();

},{"./MetaMap":1,"./js/canvas/analytics.js":18,"./js/canvas/attachments.js":19,"./js/canvas/autosave.js":20,"./js/canvas/editor.js":21,"./js/canvas/editor_options.js":22,"./js/canvas/generator.js":24,"./js/canvas/layouts.js":25,"./js/canvas/map.js":26,"./js/canvas/perspectives.js":27,"./js/canvas/presenter.js":28,"./js/canvas/sharing.js":29,"./js/canvas/standards.js":30,"./js/canvas/tagging.js":31,"./js/canvas/templates.js":32,"./js/canvas/tests.js":33,"./js/canvas/ui.js":34,"./js/canvas/user.js":35,"URIjs":undefined,"babel/polyfill":"babel/polyfill","bluebird":undefined,"bootstrap":undefined,"core-js":undefined,"firebase":undefined,"humanize-plus":undefined,"jquery":undefined,"jquery-ui":undefined,"localforage":undefined,"lodash":undefined,"moment":undefined,"riot":"riot"}],3:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');
var ACTIONS = require('../constants/actions');

var Action = (function (_ActionBase) {
    _inherits(Action, _ActionBase);

    function Action() {
        _classCallCheck(this, Action);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(Action.prototype), 'constructor', this).apply(this, params);
        this._actions = {};
    }

    _createClass(Action, [{
        key: '_getAction',
        value: function _getAction(action) {
            var ret = this._actions[action];
            if (!ret) {
                var Method = null;
                switch (action) {
                    case ACTIONS.MAP:
                        Method = require('./OpenMap.js');
                        break;
                    case ACTIONS.NEW_MAP:
                        Method = require('./NewMap.js');
                        break;
                    case ACTIONS.COPY_MAP:
                        Method = require('./CopyMap.js');
                        break;
                    case ACTIONS.DELETE_MAP:
                        Method = require('./DeleteMap.js');
                        break;
                    case ACTIONS.MY_MAPS:
                        Method = require('./MyMaps.js');
                        break;
                    case ACTIONS.TERMS_AND_CONDITIONS:
                        Method = require('./Terms.js');
                        break;
                    default:
                        Method = require('./Home.js');
                        break;
                }
                if (Method) {
                    ret = new Method(this.metaFire, this.eventer, this.pageFactory);
                    this._actions[action] = ret;
                }
            }
            return ret;
        }
    }, {
        key: 'act',
        value: function act(action) {
            _get(Object.getPrototypeOf(Action.prototype), 'act', this).call(this);
            var method = this._getAction(action);
            if (method) {
                for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                    params[_key2 - 1] = arguments[_key2];
                }

                return method.act.apply(method, params);
            }
        }
    }]);

    return Action;
})(ActionBase);

module.exports = Action;

},{"../constants/actions":36,"./ActionBase.js":4,"./CopyMap.js":5,"./DeleteMap.js":6,"./Home.js":7,"./MyMaps.js":8,"./NewMap.js":9,"./OpenMap.js":10,"./Terms.js":11}],4:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EVENTS = require('../constants/events');

var ActionBase = (function () {
    function ActionBase(metaFire, eventer, pageFactory) {
        _classCallCheck(this, ActionBase);

        this.metaFire = metaFire;
        this.eventer = eventer;
        this.pageFactory = pageFactory;
        this.metaMap = require('../../entry.js');
    }

    _createClass(ActionBase, [{
        key: 'act',
        value: function act() {}
    }, {
        key: 'toggleSidebar',
        value: function toggleSidebar() {
            if (this.sidebarOpen) {
                this.openSidebar();
            } else {
                this.closeSidebar();
            }
        }
    }, {
        key: 'openSidebar',
        value: function openSidebar() {
            this.sidebarOpen = true;
            this.eventer['do'](EVENTS.SIDEBAR_OPEN);
        }
    }, {
        key: 'closeSidebar',
        value: function closeSidebar() {
            this.sidebarOpen = false;
            this.eventer['do'](EVENTS.SIDEBAR_CLOSE);
        }
    }]);

    return ActionBase;
})();

module.exports = ActionBase;

},{"../../entry.js":2,"../constants/events":38}],5:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');
var ROUTES = require('../constants/routes.js');

var CopyMap = (function (_ActionBase) {
    _inherits(CopyMap, _ActionBase);

    function CopyMap() {
        _classCallCheck(this, CopyMap);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(CopyMap.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(CopyMap, [{
        key: 'act',
        value: function act(id) {
            var _get2,
                _this = this;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(CopyMap.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            if (!id) {
                return new Error('Must have a map in order to copy.');
            }
            this.metaFire.getData('' + ROUTES.MAPS_LIST + id).then(function (oldMap) {
                var newMap = {
                    created_at: new Date(),
                    owner: _this.metaMap.User.userId,
                    name: _this.appendCopy(oldMap.name)
                };
                _this.metaFire.getData('' + ROUTES.MAPS_DATA + id).then(function (oldMapData) {
                    var pushState = _this.metaFire.pushData(newMap, '' + ROUTES.MAPS_LIST);
                    var mapId = pushState.key();
                    _this.metaFire.setData(oldMapData, '' + ROUTES.MAPS_DATA + mapId);
                    _this.metaMap.Router.to('map/' + mapId);
                });
            });
            return true;
        }
    }, {
        key: 'appendCopy',
        value: function appendCopy(str) {
            var ret = str;
            if (!_.contains(str, '(Copy')) {
                ret = ret + ' (Copy 1)';
            } else {
                var mess = str.split(' ');
                var cnt = 2;
                if (mess[mess.length - 2] == '(Copy') {
                    var grbg = mess[mess.length - 1];
                    if (grbg) {
                        grbg = grbg.replace(')', '');
                        cnt = +grbg + 1;
                        ret = mess.slice(0, mess.length - 2).join(' ');
                    }
                }
                ret += ' (Copy ' + cnt + ')';
            }
            return ret;
        }
    }]);

    return CopyMap;
})(ActionBase);

module.exports = CopyMap;

},{"../constants/routes.js":40,"./ActionBase.js":4}],6:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');
var ROUTES = require('../constants/routes.js');
var _ = require('lodash');
var PAGES = require('../constants/pages.js');

var DeleteMap = (function (_ActionBase) {
    _inherits(DeleteMap, _ActionBase);

    function DeleteMap() {
        _classCallCheck(this, DeleteMap);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(DeleteMap.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(DeleteMap, [{
        key: 'act',
        value: function act(id) {
            var _get2;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(DeleteMap.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            DeleteMap.deleteAll([id]);
            return true;
        }
    }], [{
        key: 'deleteAll',
        value: function deleteAll(ids) {
            var _this = this;

            _.each(ids, function (id) {
                _this.metaMap.MetaFire.deleteData('' + ROUTES.MAPS_DATA + id);
                _this.metaMap.MetaFire.deleteData('' + ROUTES.MAPS_LIST + id);
                _this.eventer['do'](PAGES.HOME);
            });
        }
    }]);

    return DeleteMap;
})(ActionBase);

module.exports = DeleteMap;

},{"../constants/pages.js":39,"../constants/routes.js":40,"./ActionBase.js":4,"lodash":undefined}],7:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var riot = require('riot');
var ActionBase = require('./ActionBase.js');
var ROUTES = require('../constants/routes.js');
var ELEMENTS = require('../constants/elements.js');
var TAGS = require('../constants/tags.js');
var home = require('../../tags/pages/home');

var Home = (function (_ActionBase) {
    _inherits(Home, _ActionBase);

    function Home() {
        _classCallCheck(this, Home);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(Home.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(Home, [{
        key: 'act',
        value: function act(id) {
            var _get2, _eventer;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(Home.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            $('#' + ELEMENTS.APP_CONTAINER).empty();
            riot.mount(document.getElementById(ELEMENTS.APP_CONTAINER), TAGS.HOME);
            (_eventer = this.eventer)['do'].apply(_eventer, ['pageName', { name: 'Home' }].concat(params));
            this.closeSidebar();
            return true;
        }
    }]);

    return Home;
})(ActionBase);

module.exports = Home;

},{"../../tags/pages/home":67,"../constants/elements.js":37,"../constants/routes.js":40,"../constants/tags.js":41,"./ActionBase.js":4,"riot":"riot"}],8:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var riot = require('riot');
var ActionBase = require('./ActionBase.js');
var ROUTES = require('../constants/routes.js');
var PAGES = require('../constants/pages.js');
var TAGS = require('../constants/tags.js');
var home = require('../../tags/pages/home');

var Home = (function (_ActionBase) {
    _inherits(Home, _ActionBase);

    function Home() {
        _classCallCheck(this, Home);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(Home.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(Home, [{
        key: 'act',
        value: function act(id) {
            var _get2, _eventer;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(Home.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            (_eventer = this.eventer)['do'].apply(_eventer, [PAGES.MY_MAPS, { id: id }].concat(params));
            return true;
        }
    }]);

    return Home;
})(ActionBase);

module.exports = Home;

},{"../../tags/pages/home":67,"../constants/pages.js":39,"../constants/routes.js":40,"../constants/tags.js":41,"./ActionBase.js":4,"riot":"riot"}],9:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');
var ROUTES = require('../constants/routes.js');

var NewMap = (function (_ActionBase) {
    _inherits(NewMap, _ActionBase);

    function NewMap() {
        _classCallCheck(this, NewMap);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(NewMap.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(NewMap, [{
        key: 'act',
        value: function act() {
            var _this = this;

            _get(Object.getPrototypeOf(NewMap.prototype), 'act', this).call(this);
            this.metaFire.getData('' + ROUTES.MAPS_NEW_MAP).then(function (blankMap) {
                var newMap = {
                    created_at: new Date(),
                    owner: _this.metaMap.User.userId,
                    name: 'Untitled Map'
                };
                var pushState = _this.metaFire.pushData(newMap, '' + ROUTES.MAPS_LIST);
                var mapId = pushState.key();
                _this.metaFire.setData(blankMap, '' + ROUTES.MAPS_DATA + mapId);
                _this.metaMap.Router.to('map/' + mapId);
            });
            return true;
        }
    }]);

    return NewMap;
})(ActionBase);

module.exports = NewMap;

},{"../constants/routes.js":40,"./ActionBase.js":4}],10:[function(require,module,exports){
/// <reference path="../../../../typings/riotjs/riotjs.d.ts" />

'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var riot = require('riot');
var ActionBase = require('./ActionBase.js');
var ELEMENTS = require('../constants/elements.js');
var TAGS = require('../constants/tags.js');
var ROUTES = require('../constants/routes.js');
var metaCanvas = require('../../tags/canvas/meta-canvas.js');

var OpenMap = (function (_ActionBase) {
    _inherits(OpenMap, _ActionBase);

    function OpenMap() {
        _classCallCheck(this, OpenMap);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(OpenMap.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(OpenMap, [{
        key: 'act',
        value: function act(id) {
            var _get2,
                _this = this;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(OpenMap.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            $('#' + ELEMENTS.APP_CONTAINER).empty();
            this.metaFire.getData('' + ROUTES.MAPS_LIST + id).then(function (map) {
                if (map) {
                    var _eventer, _eventer2, _eventer3;

                    riot.mount(document.getElementById(ELEMENTS.APP_CONTAINER), TAGS.META_CANVAS);
                    map.id = id;
                    (_eventer = _this.eventer)['do'].apply(_eventer, ['nav', 'map', map].concat(params));
                    (_eventer2 = _this.eventer)['do'].apply(_eventer2, ['pageName', map].concat(params));
                    (_eventer3 = _this.eventer)['do'].apply(_eventer3, ['map', map].concat(params));
                    _this.openSidebar();
                }
            });
            return true;
        }
    }]);

    return OpenMap;
})(ActionBase);

module.exports = OpenMap;

},{"../../tags/canvas/meta-canvas.js":50,"../constants/elements.js":37,"../constants/routes.js":40,"../constants/tags.js":41,"./ActionBase.js":4,"riot":"riot"}],11:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var riot = require('riot');
var ActionBase = require('./ActionBase.js');
var ROUTES = require('../constants/routes.js');
var ELEMENTS = require('../constants/elements.js');
var TAGS = require('../constants/tags.js');
var terms = require('../../tags/pages/terms');

var Terms = (function (_ActionBase) {
    _inherits(Terms, _ActionBase);

    function Terms() {
        _classCallCheck(this, Terms);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(Terms.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(Terms, [{
        key: 'act',
        value: function act(id) {
            var _get2, _eventer;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(Terms.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            $('#' + ELEMENTS.APP_CONTAINER).empty();
            riot.mount(document.getElementById(ELEMENTS.APP_CONTAINER), TAGS.TERMS);
            (_eventer = this.eventer)['do'].apply(_eventer, ['pageName', { name: 'Terms and Conditions' }].concat(params));
            this.closeSidebar();
            return true;
        }
    }]);

    return Terms;
})(ActionBase);

module.exports = Terms;

},{"../../tags/pages/terms":68,"../constants/elements.js":37,"../constants/routes.js":40,"../constants/tags.js":41,"./ActionBase.js":4,"riot":"riot"}],12:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var MetaFire = require('./Firebase.js');
var usersnap = require('../integrations/usersnap');
var ga = require('../integrations/google.js');
var twitter = require('../integrations/twitter.js');
var facebook = require('../integrations/facebook.js');
var addThis = require('../integrations/addthis.js');

var config = function config() {
    var SITES = {
        CRL: {
            db: 'meta-map-production'
        },
        CRL_STAGING: {
            db: 'meta-map-staging'
        },
        THINK_WATER: {
            db: 'thinkwater-production'
        }
    };

    var ret = {
        host: window.location.host,
        site: {}
    };
    var segments = ret.host.split('.');
    var first = segments[0];
    if (first === 'www') {
        first = segments[1];
    }
    switch (first.toLowerCase()) {
        case 'localhost':
        case 'meta-map-staging':
            ret.site = SITES.CRL_STAGING;
            break;

        case 'crlab':
        case 'frontend':
            ret.site = SITES.CRL;
            break;

        case 'thinkwater-production':
        case 'thinkwater-staging':
        case 'thinkwater':
            ret.site = SITES.THINK_WATER;
            break;
    }

    return ret;
};

var Config = (function () {
    function Config(tags) {
        _classCallCheck(this, Config);

        this.tags = tags;
        this.config = config();

        this.MetaFire = new MetaFire(this.config);
        this.socialFeatures = [];
    }

    _createClass(Config, [{
        key: 'initSocial',
        value: function initSocial() {
            _.each(this.socialFeatures, function (feature) {
                if (feature) feature();
            });
        }
    }, {
        key: 'onReady',
        value: function onReady() {
            var _this = this;

            if (!this._onReady) {
                this._onReady = new Promise(function (fulfill, reject) {
                    _this.MetaFire.on('config', function (data) {
                        try {
                            _.extend(_this.config.site, data);
                            document.title = _this.config.site.title;
                            var favico = document.getElementById('favico');
                            favico.setAttribute('href', _this.config.site.imageUrl + 'favicon.ico');
                            _this.init();
                            fulfill(_this.config.site);
                        } catch (e) {
                            reject(e);
                        }
                    });
                });
            }

            return this._onReady;
        }
    }, {
        key: 'init',
        value: function init() {
            var _this2 = this;

            return this.onReady().then(function (config) {
                ga(_this2.config.site.google);
                //this.socialFeatures.push(twitter());
                //this.socialFeatures.push(facebook());
                _this2.socialFeatures.push(addThis(_this2.config.site.addthis.pubid));
                usersnap();
            });
        }
    }, {
        key: 'site',
        get: function get() {
            return 'frontend';
        }
    }]);

    return Config;
})();

module.exports = Config;

},{"../integrations/addthis.js":42,"../integrations/facebook.js":43,"../integrations/google.js":44,"../integrations/twitter.js":45,"../integrations/usersnap":46,"./Firebase.js":14}],13:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Eventer = (function () {
    function Eventer(metaMap) {
        _classCallCheck(this, Eventer);

        riot.observable(this);

        this.events = {};
    }

    _createClass(Eventer, [{
        key: 'every',
        value: function every(event, reaction) {
            var _this = this;

            //let callback = reaction;
            //if (this.events[event]) {
            //    let piggyback = this.events[event];
            //    callback = (...params) => {
            //        piggyback(...params);
            //        reaction(...params);
            //    }
            //}
            var events = event.split(' ');
            _.each(events, function () {
                _this.events[event] = reaction;
                _this.on(event, reaction);
            });
        }
    }, {
        key: 'forget',
        value: function forget(event, callback) {
            var _this2 = this;

            var events = event.split(' ');
            _.each(events, function () {
                if (!callback) {
                    delete _this2.events[event];
                    _this2.off(event);
                } else {
                    _this2.off(event, callback);
                }
            });
        }
    }, {
        key: 'do',
        value: function _do(event) {
            var _this3 = this;

            for (var _len = arguments.length, params = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                params[_key - 1] = arguments[_key];
            }

            var events = event.split(' ');
            _.each(events, function () {
                _this3.trigger.apply(_this3, [event].concat(params));
            });
        }
    }]);

    return Eventer;
})();

module.exports = Eventer;

},{}],14:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Firebase = window.Firebase; //require('firebase');
var Promise = window.Promise;
var localforage = window.localforage;

var MetaFire = (function () {
    function MetaFire(config) {
        _classCallCheck(this, MetaFire);

        this.config = config;
        this.fb = new Firebase('https://' + this.config.site.db + '.firebaseio.com');
    }

    _createClass(MetaFire, [{
        key: 'login',
        value: function login() {
            var _this = this;

            if (!this._login) {
                this._login = new Promise(function (fulfill, reject) {
                    window.MetaMap.Auth0.getSession().then(function (profile) {

                        window.MetaMap.Auth0.lock.getClient().getDelegationToken({
                            target: _this.config.site.auth0.api,
                            id_token: profile.id_token,
                            api_type: 'firebase'
                        }, function (err, delegationResult) {
                            if (err) {
                                reject(err);
                            } else {
                                profile.firebase_token = delegationResult.id_token;
                                _this.firebase_token = delegationResult.id_token;
                                localforage.setItem('firebase_token', _this.firebase_token);
                                _this.fb.authWithCustomToken(_this.firebase_token, function (error, authData) {
                                    if (error) {
                                        _this.metaMap.error(error);
                                        reject(error);
                                    } else {
                                        fulfill(authData);
                                    }
                                });
                            }
                        });
                    })['catch'](function (err) {
                        console.log(err);
                        debugger;
                    });
                });
                this._onReady = this._login;
            }
            return this._login;
        }
    }, {
        key: 'onReady',
        value: function onReady() {
            if (!this._onReady) {
                this._onReady = new Promise(function (fulfill, reject) {
                    fulfill();
                });
            }
            return this._onReady;
        }
    }, {
        key: 'getChild',
        value: function getChild(path) {
            return this.fb.child(path);
        }
    }, {
        key: 'getData',
        value: function getData(path) {
            var _this2 = this;

            return this.onReady().then(function () {
                var child = _this2.fb;
                if (path) {
                    child = _this2.getChild(path);
                }
                return new Promise(function (resolve, reject) {

                    child.once('value', function (snapshot) {
                        var data = snapshot.val();
                        try {
                            resolve(data);
                        } catch (e) {
                            _this2.metaMap.error(e);
                        }
                    }, function (error) {
                        _this2.metaMap.error({ message: 'Cannot access ' + path });
                        reject(error);
                    });
                });
            });
        }
    }, {
        key: 'on',
        value: function on(path, callback) {
            var _this3 = this;

            var event = arguments.length <= 2 || arguments[2] === undefined ? 'value' : arguments[2];

            if (path) {
                this.onReady().then(function () {
                    var child = _this3.getChild(path);
                    child.on(event, function (snapshot) {
                        try {
                            if (!snapshot.exists()) {
                                throw new Error('There is no data at ' + path);
                            }
                            var data = snapshot.val();
                            callback(data);
                        } catch (e) {
                            _this3.metaMap.error(e);
                        }
                    });
                });
            }
        }
    }, {
        key: 'off',
        value: function off(path, method, callback) {
            var _this4 = this;

            if (method === undefined) method = 'value';

            if (path) {
                this.onReady().then(function () {
                    var child = _this4.getChild(path);
                    if (callback) {
                        child.off(method, callback);
                    } else {
                        child.off(method);
                    }
                });
            }
        }
    }, {
        key: 'setData',
        value: function setData(data, path) {
            var _this5 = this;

            var child = this.fb;
            if (path) {
                child = this.getChild(path);
            }
            try {
                return child.set(data, function (e) {
                    if (e) {
                        _this5.metaMap.error(e);
                    }
                });
            } catch (e) {
                this.metaMap.error(e);
            }
        }
    }, {
        key: 'deleteData',
        value: function deleteData(path) {
            return this.setData(null, path);
        }
    }, {
        key: 'pushData',
        value: function pushData(data, path) {
            var _this6 = this;

            var child = this.fb;
            if (path) {
                child = this.getChild(path);
            }
            try {
                return child.push(data, function (e) {
                    if (e) {
                        _this6.metaMap.error(e);
                    }
                });
            } catch (e) {
                this.metaMap.error(e);
            }
        }
    }, {
        key: 'setDataInTransaction',
        value: function setDataInTransaction(data, path, callback) {
            var _this7 = this;

            var child = this.fb;
            if (path) {
                child = this.getChild(path);
            }
            try {
                return child.transaction(function (currentValue) {
                    try {
                        return data;
                    } catch (e) {
                        _this7.metaMap.error(e);
                    }
                });
            } catch (e) {
                this.metaMap.error(e);
            }
        }
    }, {
        key: 'logout',
        value: function logout() {
            this._login = null;
            this._onReady = null;
            localforage.removeItem('firebase_token');
            this.fb.unauth();
        }
    }, {
        key: 'metaMap',
        get: function get() {
            if (!this._metaMap) {
                this._metaMap = require('../../entry.js');
            }
            return this._metaMap;
        }
    }]);

    return MetaFire;
})();

module.exports = MetaFire;

},{"../../entry.js":2}],15:[function(require,module,exports){
/// <reference path="../../../../typings/riotjs/riotjs.d.ts" />

'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var riot = require('riot');
var ACTIONS = require('../constants/actions');

var isHidden = false;

var track = function track(path) {
    if (window.ga) {
        window.ga('set', {
            page: path
        });
        window.ga('send', 'pageview');
    }
};

var toggleMain = function toggleMain(hide, path) {
    track(path);
    if (hide) {
        isHidden = true;
    } else {
        isHidden = false;
    }
};

var Router = (function () {
    function Router(metaMap) {
        var _this = this;

        _classCallCheck(this, Router);

        this.user = metaMap.User;
        this.PageFactory = metaMap.PageFactory;

        riot.route.start();
        riot.route(function (target) {
            for (var _len = arguments.length, params = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {
                params[_key - 3] = arguments[_key];
            }

            var _PageFactory;

            var id = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];
            var action = arguments.length <= 2 || arguments[2] === undefined ? '' : arguments[2];

            _this.path = _this.getPath(target);

            toggleMain(true, _this.path);
            (_PageFactory = _this.PageFactory).navigate.apply(_PageFactory, [_this.path, id, action].concat(params));

            metaMap.Eventer['do']('history', window.location.hash);
        });
        this.to(this.currentPage);
    }

    _createClass(Router, [{
        key: 'getPreviousPage',
        value: function getPreviousPage() {
            var pageNo = arguments.length <= 0 || arguments[0] === undefined ? 2 : arguments[0];

            var page = 'home';
            var pageCnt = this.user.history.length;
            if (pageCnt > 0) {
                page = this.getPath(this.user.history[pageCnt - pageNo]);
            }
            return page;
        }
    }, {
        key: 'getPath',
        value: function getPath(path) {
            return route.getPath(path);
        }
    }, {
        key: 'to',
        value: function to(path) {
            return route.to(path);
        }
    }, {
        key: 'back',
        value: function back() {
            var path = 'home';
            var pageCnt = this.user.history.length;
            if (pageCnt > 1 && (this.currentPage != 'mymaps' || this.currentPage != this.previousPage)) {
                path = this.previousPage;
                var backNo = 2;
                while (path.startsWith(ACTIONS.DELETE_MAP) || path.startsWith(ACTIONS.COPY_MAP) || path.startsWith(ACTIONS.NEW_MAP)) {

                    backNo += 1;
                    path = this.getPreviousPage(backNo);
                }
            }
            return this.to(path);
        }
    }, {
        key: 'currentPage',
        get: function get() {
            var page = 'home';
            var pageCnt = this.user.history.length;
            if (pageCnt > 0) {
                page = this.getPath(this.user.history[pageCnt - 1]);
            }
            return page;
        }
    }, {
        key: 'currentPath',
        get: function get() {
            return this.path;
        }
    }, {
        key: 'previousPage',
        get: function get() {
            return this.getPreviousPage(2);
        }
    }], [{
        key: 'getPath',
        value: function getPath(path) {
            if (path) {
                while (path.startsWith('!') || path.startsWith('#')) {
                    path = path.substr(1);
                }
            }
            return path;
        }
    }, {
        key: 'to',
        value: function to(path) {
            path = route.getPath(path);
            if (path) {
                toggleMain(true, path);
                riot.route('' + path);
            }
        }
    }]);

    return Router;
})();

var route = Router;

module.exports = Router;

},{"../constants/actions":36,"riot":"riot"}],16:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Auth0Lock = require('auth0-lock');

var Auth0 = (function () {
    function Auth0(config, metaMap) {
        _classCallCheck(this, Auth0);

        this.config = config;
        this.metaMap = metaMap;
        this.lock = new Auth0Lock(config.api, config.app);
        this.lock.on('loading ready', function () {});
    }

    _createClass(Auth0, [{
        key: 'login',
        value: function login() {
            var _this = this;

            if (!this._login) {
                this._login = new Promise(function (fulfill, reject) {
                    var showLogin = function showLogin() {
                        _this.lock.show({
                            closable: false,
                            loginAfterSignup: true,
                            authParams: {
                                scope: 'openid offline_access'
                            }
                        }, function (err, profile, id_token, ctoken, opt, refresh_token) {
                            if (err) {
                                _this.onFail(err, reject);
                            } else {
                                localforage.setItem('id_token', id_token);
                                localforage.setItem('profile', profile);

                                _this.ctoken = profile.ctoken = ctoken;
                                _this.id_token = profile.id_token = id_token;
                                _this.profile = profile;
                                _this.refresh_token = profile.refresh_token = refresh_token;
                                _this._getSession = fulfill(profile);
                            }
                        });
                    };
                    _this.getSession().then(function (profile) {
                        if (profile) {
                            fulfill(profile);
                        } else {
                            showLogin();
                        }
                    })['catch'](function (err) {
                        showLogin();
                    });
                });
            }
            return this._login;
        }
    }, {
        key: 'linkAccount',
        value: function linkAccount() {
            this.lock.show({
                callbackURL: location.href.replace(location.hash, ''),
                dict: {
                    signin: {
                        title: 'Link with another account'
                    }
                },
                authParams: {
                    access_token: this.ctoken
                }
            });
        }
    }, {
        key: 'onFail',
        value: function onFail(err, reject) {
            this.metaMap.error(err);
            if (reject) {
                reject(err);
                this.logout();
            }
        }
    }, {
        key: 'getSession',
        value: function getSession() {
            var _this2 = this;

            if (this.profile) {
                this._getSession = new Promise(function (fulfill, reject) {
                    fulfill(_this2.profile);
                });
            } else if (!this._getSession) {
                this._getSession = new Promise(function (fulfill, reject) {
                    return localforage.getItem('id_token').then(function (id_token) {
                        if (id_token) {
                            return _this2.lock.getProfile(id_token, function (err, profile) {
                                if (err) {
                                    _this2.onFail(err, reject);
                                } else {
                                    localforage.setItem('id_token', id_token);
                                    localforage.setItem('profile', profile);
                                    _this2.id_token = profile.id_token = id_token;
                                    _this2.profile = profile;
                                    return fulfill(profile);
                                }
                            });
                        } else {
                            return reject(new Error('No session'));
                        }
                    });
                });
            }
            return this._getSession;
        }
    }, {
        key: 'logout',
        value: function logout() {
            var _this3 = this;

            localforage.removeItem('id_token').then(function () {
                return localforage.removeItem('profile');
            }).then(function () {
                _this3.profile = null;
                _this3.ctoken = null;
                _this3.id_token = null;
                _this3.refresh_token = null;
                _this3._login = null;
                _this3._getSession = null;
                window.location.reload();
            });
        }
    }]);

    return Auth0;
})();

module.exports = Auth0;

},{"auth0-lock":undefined}],17:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var uuid = require('../tools/uuid.js');
var MetaMap = window.MetaMap;

var User = (function () {
    function User(profile, auth, eventer, metaFire) {
        _classCallCheck(this, User);

        this.auth = auth;
        this.eventer = eventer;
        this.metaFire = metaFire;
        this.params = URI(window.location).query(true);
        this.thinkquery = this.params.thinkquery ? true : false;
        this.userKey = uuid();
        this.onReady();
    }

    _createClass(User, [{
        key: 'onReady',
        value: function onReady() {
            var _this = this;

            if (!this._onReady) {
                (function () {
                    var trackHistory = _.once(function () {
                        _this.eventer.every('history', function (page) {
                            if (_this.history.length == 0 || page != _this.history[_this.history.length - 1]) {
                                _this.history.push(page);
                                _this.metaFire.setData(_this.history, 'users/' + _this.auth.uid + '/history');
                            }
                        });
                    });
                    _this._onReady = new Promise(function (fulfill, reject) {
                        _this.metaFire.on('users/' + _this.auth.uid, function (user) {
                            if (user) {
                                if (!user.history) {
                                    user.history = [];
                                }
                                _this.profile = user;
                                trackHistory();
                                fulfill(user);
                            }
                        });
                    });
                })();
            }
            return this._onReady;
        }
    }, {
        key: 'saveUserEditorOptions',
        value: function saveUserEditorOptions(options) {
            var data = {
                user: {
                    editor_options: JSON.stringify(options)
                }
            };
        }
    }, {
        key: 'displayName',
        get: function get() {
            var ret = this.fullName;
            if (this.profile && this.profile.identity) {
                if (ret) {
                    ret = ret.split(' ')[0];
                }
                if (!ret) {
                    ret = this.profile.identity.nickname;
                }
            }

            return ret;
        }
    }, {
        key: 'fullName',
        get: function get() {
            var ret = '';
            if (this.profile && this.profile.identity) {
                if (this.profile.identity.name) {
                    ret = this.profile.identity.name;
                }
            }
            return ret;
        }
    }, {
        key: 'picture',
        get: function get() {
            var ret = '';
            if (this.profile && this.profile.identity) {
                ret = this.profile.identity.picture;
            }
            return ret;
        }
    }, {
        key: 'userId',
        get: function get() {
            return this.auth.uid;
        }
    }, {
        key: 'isAdmin',
        get: function get() {
            var ret = false;
            if (this.profile && this.profile.identity) {
                ret = this.profile.identity.roles.indexOf('admin') !== -1;
            }
            return ret;
        }
    }, {
        key: 'history',
        get: function get() {
            return this.profile.history || [];
        }
    }]);

    return User;
})();

module.exports = User;

},{"../tools/uuid.js":49}],18:[function(require,module,exports){
// functions handling analytics
// analytics display is in views/maps/_analytics_tab_map and _analytics_tab_thing
'use strict';

SandbankEditor.Analytics = function ($scope, $http, map) {

    var self = this;

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.getUi().currentTabIs(map.getUi().TAB_ID_ANALYTICS_THING)) {
                self.updateContextualAnalytics();
            }
        }
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.getUi().TAB_ID_ANALYTICS_THING) {
            // opening thing analytics tab
            self.updateContextualAnalytics();
        }
    };

    // this gets populated by map.loadMapExtraData, on load and after every autosave
    this.mapAnalytics = null;

    // --------- contextual analytics --------------
    // - these are all calculated here, unlike map analytics which are calculated on the server and connected with badges and points

    // this gets calculated by updateContextualAnalytics
    this.contextualAnalytics = {
        thingName: '',

        // thing stuff
        distinctFrom: 0,
        intentionallyDistinctFrom: 0,
        partOf: 0,
        includesParts: 0,
        relatedTo: 0,
        isRelationship: 0,
        lookingAt: 0,
        lookedAtFrom: 0,

        // R stuff
        rFromThingName: '',
        rToThingName: '',
        isRThing: false,
        isRSystem: false,
        isRPoint: false,
        isRView: false
    };

    this.updateContextualAnalytics = function () {
        //console.log('updateContextualAnalytics');
        if (!map.getUi().currentTabIs(map.getUi().TAB_ID_ANALYTICS_THING)) {
            return;
        }

        var diagram = map.getDiagram();
        var part = diagram.selection.first();
        var a = self.contextualAnalytics;

        if (part && part instanceof go.Group) {
            var thing = part;

            // thing name
            a.thingName = thing.data.text;

            // distinct from
            a.distinctFrom = _.where(diagram.model.nodeDataArray, { isGroup: true }).length - 1;

            // part of
            var level = 0;
            var thing2 = thing;
            while (thing2 = getContainingGroup(thing2)) {
                level++;
            }
            a.partOf = level;

            // includes parts
            a.includesParts = countGroups(thing);

            // related to / looking at / looked at from / intentionally distinct from
            a.relatedTo = 0;
            a.lookingAt = 0;
            a.lookedAtFrom = 0;
            a.intentionallyDistinctFrom = 0;
            var links = thing.linksConnected;
            var rConnectedThingKeys = [];
            while (links.next()) {
                var link = links.value;
                // P link
                if (link.data.category == 'P') {
                    if (link.fromNode == thing) {
                        a.lookingAt++;
                    } else if (link.toNode == thing) {
                        a.lookedAtFrom++;
                    }
                }
                // D link
                else if (link.data.category == 'D') {
                    a.intentionallyDistinctFrom++;
                }
                // R link
                else if (!link.data.category) {
                    // track keys of related things so we don't count them multiple times
                    if (link.fromNode == thing) {
                        rConnectedThingKeys.push(link.toNode.data.key);
                    } else if (link.toNode == thing) {
                        rConnectedThingKeys.push(link.fromNode.data.key);
                    }
                }
            }
            a.relatedTo = _.uniq(rConnectedThingKeys).length;

            // isRelationship
            a.isRelationship = thing.isLinkLabel;
        } else if (part && part instanceof go.Link) {
            var rel = part;

            // thing names
            a.rFromThingName = rel.fromNode.data.text;
            a.rToThingName = rel.toNode.data.text;

            // is R thing
            a.isRThing = rel.isLabeledLink;

            // is R system
            a.isRSystem = rel.isLabeledLink && countGroups(rel.labelNodes.first()) > 0;

            // is R point
            a.isRPoint = rel.isLabeledLink && isPoint(rel.labelNodes.first());

            // is R view
            a.isRView = rel.isLabeledLink && isView(rel.labelNodes.first());
        }
    };

    // returns either the containingGroup or the rThingContainingGroup, whichever is non-null
    function getContainingGroup(group) {
        return group.containingGroup || getRThingContainingGroup(group);
    }

    // if group is an R-thing between two sibling parts of a whole, returns the whole; else returns null
    function getRThingContainingGroup(group) {
        if (group.isLinkLabel) {
            var fromParent = group.labeledLink.fromNode.containingGroup;
            var toParent = group.labeledLink.toNode.containingGroup;
            if (fromParent !== null && toParent !== null && fromParent == toParent) {
                return fromParent;
            }
        }
        return null;
    }

    // counts the member parts of the group that are groups, recursively (not including the group itself)
    function countGroups(group) {
        var count = 0;
        var it = getMemberGroups(group).iterator;
        while (it.next()) {
            var part = it.value;
            count += 1 + countGroups(part);
        }

        return count;
    }

    // returns the collection of groups that are either a memberPart of this group, or an R-thing between sibling memberParts
    function getMemberGroups(group) {
        var members = new go.List();
        var it = group.memberParts;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group) {
                members.add(part);
                var rthing = getRThingToSibling(part); // NB: should not get duplication here, as this checks for r-things in only one direction
                if (rthing) {
                    members.add(rthing);
                }
            }
        }
        return members;
    }

    // if the group is linked by an R-thing to a sibling (with the group as the fromNode), returns the R-thing; else returns null
    function getRThingToSibling(group) {
        var it = group.findLinksOutOf();
        while (it.next()) {
            var link = it.value;
            if (link.labelNodes.count > 0 && link.toNode.containingGroup == group.containingGroup) {
                return link.labelNodes.first();
            }
        }
        return null;
    }

    function isPoint(group) {
        var it = group.findLinksOutOf();
        while (it.next()) {
            var link = it.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    }

    function isView(group) {
        var it = group.findLinksInto();
        while (it.next()) {
            var link = it.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    }
};

},{}],19:[function(require,module,exports){
// functions handling attachments

'use strict';

SandbankEditor.Attachments = function ($scope, $http, $resource, map) {

    var self = this;

    this.selectedThing = null;
    this.attachments = null;

    this.attachmentTypes = [{ name: 'note', labelSingular: 'Note', labelPlural: 'Notes' }, { name: 'link', labelSingular: 'Web Link', labelPlural: 'Web Links' }, { name: 'task', labelSingular: 'Task', labelPlural: 'Tasks' }, { name: 'map', labelSingular: 'Linked MetaMap', labelPlural: 'Linked MetaMaps' }
    //        {name: 'doc', labelSingular: 'Document', labelPlural: 'Documents'}  // limit overall storage space OR simpler rules?
    // limit file types - pdf, jpg, gif, png, office?...  whitelist vs. blacklist
    ];

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.getUi().currentTabIs(map.getUi().TAB_ID_ATTACHMENTS)) {
                self.stopEditingAll();
                self.saveAttachments();
                self.loadSelectedThingAttachments();
            }
        }
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.getUi().TAB_ID_ATTACHMENTS) {
            // opening tab
            self.loadSelectedThingAttachments();
        }
        if (oldValue == map.getUi().TAB_ID_ATTACHMENTS) {
            // closing tab
            self.saveAttachments();
        }
    };

    this.loadSelectedThingAttachments = function () {
        $scope.safeApply(function () {
            if (map.thingSelected()) {
                self.selectedThing = map.getUniqueThingSelected();
                self.attachments = self.selectedThing.data.attachments;
                if (self.attachments === undefined) {
                    self.attachments = [];
                }
            }
        });
    };

    // set all attachments to editing = false
    this.stopEditingAll = function () {
        $scope.safeApply(function () {
            if (self.attachments) {
                _.each(self.attachments, function (att) {
                    att.editing = false;
                });
            }
        });
    };

    this.editingAnItem = function () {
        return self.attachments && _.findWhere(self.attachments, { editing: true }) !== undefined;
    };

    // set all other attachments to editing = false
    this.startEditing = function (attachment) {
        $scope.safeApply(function () {
            self.stopEditingAll();
            attachment.editing = true;
        });
    };

    this.saveItem = function (attachment) {
        $scope.safeApply(function () {
            attachment.editing = false;
            self.saveAttachments();
        });
    };

    this.saveAttachments = function () {
        $scope.safeApply(function () {
            //console.log('saveAttachments, selected: ' + self.selectedThing);
            if (self.selectedThing) {
                map.getDiagram().model.setDataProperty(self.selectedThing.data, 'attachments', self.attachments);
                self.selectedThing.updateTargetBindings();
            }
            map.getAutosave().saveNow('edit_attachments');
        });
    };

    this.listAttachments = function (type) {
        var atts = _.where(self.attachments, { type: type });
        return atts;
    };

    this.addAttachment = function (type) {
        var item = { type: type, editing: true };
        if (type == 'note') {
            self.attachments.push(_.extend(item, { text: '', url: '' }));
        } else if (type == 'link') {
            self.attachments.push(_.extend(item, { label: '', url: '' }));
        } else if (type == 'task') {
            self.attachments.push(_.extend(item, { text: '' }));
        } else if (type == 'doc') {
            self.attachments.push(_.extend(item, { name: '' }));
        } else if (type == 'map') {
            self.attachments.push(_.extend(item, { mapRef: { id: 0, name: '' } }));
        }
    };

    this.isValid = function (attachment) {
        if (attachment.type == 'link') {
            return attachment.label && attachment.url && attachment.label.trim() !== '' && attachment.url.trim() !== '';
        } else if (attachment.type == 'note') {
            return attachment.text && attachment.text.trim() !== '';
        } else if (attachment.type == 'task') {
            return attachment.text && attachment.text.trim() !== '';
        } else if (attachment.type == 'doc') {
            return attachment.name && attachment.name.trim() !== '';
        } else if (attachment.type == 'map') {
            return attachment.mapRef && attachment.mapRef.id !== null && attachment.mapRef.id !== undefined;
        }
    };

    this.deleteAttachment = function (att) {
        var typeLabel = _.findWhere(self.attachmentTypes, { name: att.type }).labelSingular;
        if (confirm('Delete ' + typeLabel + '?')) {
            var i = _.indexOf(self.attachments, att);
            self.attachments.splice(i, 1);
        }
    };

    // query server for maps containing the given text in the map name
    this.getOtherMaps = function (viewValue) {
        // NB: this URL is constructed to match the one generated by the search form on the maps page...
        var url = '/maps/visible_maps.json?utf8=%E2%9C%93&q%5Bname_cont%5D=' + viewValue;
        return $http.get(url).then(function (response) {
            return response.data.maps;
        });
    };

    this.otherMapSelected = function (viewValue, modelValue) {};

    this.formatOtherMap = function (model) {
        return model ? model.name : '';
    };
};

//console.log('otherMapSelected, viewValue: ' + viewValue.id + ', modelValue: ' + modelValue);

},{}],20:[function(require,module,exports){
// functions handling editor autosave function

'use strict';

SandbankEditor.Autosave = function ($scope, $http, map) {

    var self = this;

    var changeTypes = [];

    this.saveOnModelChanged = true;

    // do a save next time the set interval passes with no save requests
    this.save = function (changeType) {
        changeTypes.push(changeType);
        delayedAutosave();
    };

    // do a save right now
    this.saveNow = function (changeType) {
        changeTypes.push(changeType);
        autosave();
    };

    // don't let autosave be triggered more than every N milliseconds...
    var delayedAutosave = _.debounce(autosave, 2000);

    // compile the current list of change type descriptions, process them
    // to remove duplicates, and save the current data
    function autosave() {
        // stop right here if we're in the sandbox and/or we don't have edit permissions
        if ($scope.sandbox || !$scope.canEdit) {
            return;
        }

        if (!changeTypes.length) {
            //console.log('autosave: nothing to save!'); // shouldn't happen
            return;
        }

        // de-dupe the list of change types
        var changeList = _.uniq(changeTypes);
        //console.log('changeList: ' + changeList);
        // don't show move events unless that's all we have
        var changeListWithoutMoves = _.without(changeList, 'move');
        if (changeListWithoutMoves.length > 0) {
            changeList = changeListWithoutMoves;
        }
        //console.log('changeList without moves: ' + changeList);
        // get descriptions
        var descriptionList = _.map(changeList, function (ct) {
            return _.result(changeDescriptions, ct);
        });

        //console.log('autosave, changeList: ' + changeList + ', descriptionList: ' + descriptionList);
        var postData = {
            data: JSON.parse(map.getDiagram().model.toJson()),
            state_data: map.getUi().getStateData(),
            editor_options: map.getUi().getMapEditorOptions(),
            presenter_slides: map.getPresenter().getSlideCount(),
            activity_slides: map.getPresenter().getActivitySlideCount(),
            change_type: changeList.join(';'),
            change_description: descriptionList.join('; '),
            thumbnail_png: map.getPresenter().getMapThumbnail(),
            changed_by: MetaMap.User.userKey
        };
        var url = $scope.mapUrl + '.json';

        $scope.updateEditStatus($scope.SAVING);

        changeTypes = [];
        $scope.updateEditStatus($scope.SAVE_OK);
        // load returned data for analytics, points, badges, versions
        // $scope.map.loadMapExtraData(response.data.map);
        MetaMap.MetaFire.setDataInTransaction(postData, 'maps/data/' + $scope.mapId);
    }

    // -------------- handle model changes - trigger autosave ------------------

    var changeDescriptions = {
        move: 'Moved Objects',
        undo_redo: 'Performed Undo/Redo',
        edit_title: 'Edited MetaMap Title',
        edit_description: 'Edited MetaMap Description',
        edit_usertags: 'Edit MetaMap Tags',
        edit_d: 'Edited Distinctions',
        edit_s: 'Edited Systems',
        edit_r: 'Edited Relationships',
        edit_p: 'Edited Perspectives',
        add_thing: 'Added Ideas',
        rename_thing: 'Renamed Ideas',
        delete_thing: 'Deleted Ideas',
        edit_attachments: 'Edited Attachments',
        edit_presenter: 'Edited Presenter Slides',
        edit_generator: 'Inserted Ideas from ThinkQuery',
        edit_standards: 'Edited Links to Common Core Standards'
    };

    // e is a go.ChangedEvent
    this.modelChanged = function (e) {

        if (!self.saveOnModelChanged) {
            return;
        }

        var changeType = null;
        var changeDescription = null;

        if (e.propertyName == 'type') {
            // change R type
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,n,1,o,2,A,3,r,4,r,5,o,6,w,7,s] , newParam: null, newValue: [0,t,1,o] , propertyName: type
            changeType = 'edit_r';
            changeDescription = 'Changed Relationship Types';
        } else if (e.propertyName == 'layout') {
            // change system layout
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,l,1,e,2,f,3,t] , newParam: null, newValue: [0,r,1,i,2,g,3,h,4,t] , propertyName: layout
            changeType = 'edit_s';
        } else if (e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'fromPort', 'R')) {
            // add link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,P] , propertyName: linkDataArray
            // modelChange: linkToPortId, change: ChangedEvent.Property, oldParam: null, oldValue: [0,P] , newParam: null, newValue: [0,R] , propertyName: toPort
            changeType = 'edit_r';
        } else if (e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'fromPort', 'R')) {
            // delete link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,R] , newParam: null, newValue: [] , propertyName: linkDataArray
            changeType = 'edit_r';
        } else if (e.propertyName == 'linkDataArray') {
            // change P/D links
            // add P link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 2, newValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P] , propertyName: linkDataArray
            // modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
            // delete P link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 2, oldValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P,category,P] , newParam: null, newValue: [] , propertyName: linkDataArray
            // add D link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , propertyName: linkDataArray
            // remove D link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , newParam: null, newValue: [] , propertyName: linkDataArray

            if (e.newValue && e.newValue.category == 'P' || e.oldValue && e.oldValue.category == 'P') {
                changeType = 'edit_p';
            } else if (e.newValue && e.newValue.category == 'D' || e.oldValue && e.oldValue.category == 'D') {
                changeType = 'edit_d';
            }
        } else if (e.propertyName == 'category') {
            // add P link
            // modelChanged, modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
            changeType = 'edit_p';
        } else if (e.propertyName == 'group') {
            // drag into S
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
            // reorder part
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
            // drag to D
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group

            changeType = 'edit_s';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'isGroup', true)) {
            // add thing
            // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7] , propertyName: nodeDataArray
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,2,1,2,2,8,3,.,4,5,5,6,6,2,7,5,8, ,9,-,10,1,11,4,12,9,13,.,14,6,15,8,16,7,17,5] , propertyName: loc
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: children
            changeType = 'add_thing';
        } else if (e.propertyName == 'text') {
            // move thing
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,b,1,b,2,b,3,b,4,b] , newParam: null, newValue: [0,a,1,a,2,a,3,a,4,a] , propertyName: text
            changeType = 'rename_thing';
            changeDescription = 'Renamed Ideas';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'isGroup', true)) {
            // delete thing
            // modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7,loc,228.5625 -149.6875,children,0,attachments,] , newParam: null, newValue: [] , propertyName: nodeDataArray
            changeType = 'delete_thing';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'isGroup', false)) {
            // add slide
            // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877] , propertyName: nodeDataArray
            changeType = 'edit_presenter';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'isGroup', false)) {
            // delete slide
            //modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877,$$hashKey,0XN] , newParam: null, newValue: [] , propertyName: nodeDataArray
            changeType = 'edit_presenter';
        } else if (e.propertyName == 'loc' || e.propertyName == 'width' || e.propertyName == 'height') {
            // move thing or resize slide
            // move slide
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,8] , newParam: null, newValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,7] , propertyName: loc
            // resize slide
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: height
            // move thing
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,4,1,7,2,9,3,.,4,8,5,7,6,5,7, ,8,-,9,1,10,2,11,2,12,.,13,8,14,7,15,5] , newParam: null, newValue: [0,5,1,4,2,0,3,.,4,3,5,1,6,2,7,5,8, ,9,-,10,1,11,2,12,1,13,.,14,1,15,8,16,7,17,5] ,            
            changeType = 'move';
        } else if (e.propertyName == 'level' || e.propertyName == 'children') {
            // these attributes are updated as a result of other actions; ignore
            changeType = null;
        } else if (e.propertyName == 'attachments') {
            // edited attachments
            changeType = 'edit_attachments';
        } else if (e.propertyName == 'sExpanded' || e.propertyName == 'pExpanded') {
            // ignore expand/collapse
            changeType = 'move';
        } else if (e.propertyName == 'FinishedUndo' || e.propertyName == 'FinishedRedo') {
            changeType = 'undo_redo';
            map.refresh();
        } else if (e.change != go.ChangedEvent.Transaction) {}

        if (changeType) {
            map.getAnalytics().updateContextualAnalytics();
            //console.log('calling delayedAutosave, changeType: ' + changeType);
            self.save(changeType);
        }
    };

    // convenience function for checking properties
    function propertyEquals(obj, key, value) {
        return obj !== null && _.has(obj, key) && _.result(obj, key) == value;
    }
};

//console.log('modelChanged, modelChange: ' + e.modelChange +
//    ', change: ' + e.change +
//    ', oldParam: ' + e.oldParam +
//    ', oldValue: [' + _.pairs(e.oldValue) + '] ' +
//    ', newParam: ' + e.newParam +
//    ', newValue: [' + _.pairs(e.newValue) + '] ' +
//    ', propertyName: ' + e.propertyName
//);

},{}],21:[function(require,module,exports){
// main controller class

'use strict';

window.SandbankEditor = {};

window.MapEditorCtrl = function ($rootScope, $scope, $http, $resource, $timeout, $modal, $log) {

    $scope.map = new SandbankEditor.Map($scope, $http, $resource, $timeout, $modal, $log);

    // window.mapData is set in _form view
    var metadata = $scope.mapData.metadata;
    $scope.sandbox = metadata.sandbox;
    //$scope.mapData = window.mapData.map.data; // this gets overwritten by load() unless we are in the sandbox with no map ID
    //$scope.mapId = metadata.id;
    $scope.mapTitle = metadata.name;
    $scope.mapUserTags = metadata.userTags;
    $scope.mapUrl = metadata.url;
    $scope.canEdit = metadata.canEdit;
    $scope.updatedAt = metadata.updatedAt;
    $scope.updatedBy = metadata.updatedBy; // ID
    $scope.updatedByName = metadata.updatedByName;

    $scope.editingTitle = false;

    $scope.showImageExport = false;
    $scope.imageExportLoading = true;

    $scope.currentTab = null;

    // override parent scope (see user.js) since we're editing a map
    $scope.ccsTagging.mapId = $scope.mapId;

    $scope.maybeStartEditingTitle = function () {
        if ($scope.canEdit) {
            $scope.editingTitle = true;
        }
    };

    $scope.doneEditingTitle = function () {
        //console.log('doneEditingTitle');
        $scope.editingTitle = false;
        $scope.map.getAutosave().save('edit_title');
    };

    $scope.editingTitleKeypress = function (e) {
        if (e.which == 13) {
            $scope.doneEditingTitle();
        }
    };

    $scope.print = function () {
        window.print();
    };

    // ------------ save sandbox map (sign up/sign in) ---------------

    $scope.saveSandboxMap = function () {
        var modalInstance = $modal.open({
            templateUrl: 'template_sandbox_save_modal.html', // see views/users/_template_sandbox_save_modal
            backdrop: 'static',
            controller: sandboxSaveModalCtrl,
            windowClass: 'sandbox-save-modal',
            resolve: {
                outerScope: function outerScope() {
                    return $scope;
                },
                map: function map() {
                    return $scope.map;
                },
                userProfile: function userProfile() {
                    return $scope.userProfile;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    var sandboxSaveModalCtrl = function sandboxSaveModalCtrl($scope, $modalInstance, outerScope, map, userProfile) {

        $scope.map = map;
        $scope.userProfile = userProfile;

        $scope.mapData = map.getDiagram().model.toJson();
        $scope.thumbnailPng = map.getPresenter().getMapThumbnail();

        function getDefaultLoginData() {
            return {
                email: '',
                password: ''
            };
        }

        // this structure is used to store the form data, as well as the validation errors returned from the server...
        function getDefaultSignupData() {
            return {
                email: '',
                first_name: '',
                last_name: '',
                password: '',
                password_confirmation: ''
            };
        }

        $scope.loginData = getDefaultLoginData();
        $scope.loginError = '';

        $scope.signupData = getDefaultSignupData();
        $scope.signupErrors = getDefaultSignupData();

        $scope.doLogin = function () {
            $scope.loginErrors = getDefaultLoginData(); // reset errors
            $http.post('/sign_in.json', {
                user: $scope.loginData
            }).then(function (response) {
                // data is {id:XX, ...}
                outerScope.setUserId(response.data.id);
                outerScope.loadUserProfile(function () {
                    $scope.userProfile = outerScope.userProfile;
                });
            }, function (response) {
                // data is {"error": "Invalid email or password"}
                $scope.loginError = response.data.error;
            });
        };

        $scope.doSignup = function () {
            $scope.signupErrors = getDefaultSignupData(); // reset errors
            $http.post('/users.json', {
                user: $scope.signupData
            }).then(function (response) {
                // data is new user ID
                outerScope.setUserId(response.data);
                outerScope.loadUserProfile(function () {
                    $scope.userProfile = outerScope.userProfile;
                });
            }, function (response) {
                // data is e.g. {"first_name":["can't be blank"], ...}
                _.each(_.keys(response.data), function (key) {
                    $scope.signupErrors[key] = response.data[key].join('; ');
                });
            });
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    sandboxSaveModalCtrl.$inject = ['$scope', '$modalInstance', 'outerScope', 'map', 'userProfile'];

    // ------------- edit status message for header bar ------------------

    $scope.editStatus = '';

    $scope.LAST_UPDATED = '';
    $scope.READ_ONLY = 'View only';
    $scope.SAVING = 'Saving...';
    $scope.SAVE_OK = 'All changes saved';
    $scope.SAVE_FAILED = 'Changes could not be saved';

    $scope.updateEditStatus = function (s) {
        //console.log('updateEditStatus: ' + s);
        $scope.editStatus = s;
        if (s == $scope.SAVE_FAILED) {
            alert('Changes could not be saved - please check your network connection.');
        } else if (s == $scope.LAST_UPDATED) {
            var time = moment($scope.updatedAt).fromNow();
            var by = '';
            if ($scope.updatedBy == $scope.userId) {
                by = 'by me';
            } else if ($scope.updatedByName) {
                by = 'by ' + $scope.updatedByName;
            }
            // TODO: show 'by me' only for editable shared maps?

            $scope.editStatus = 'Last updated ' + time + ' ' + by;
        }

        // Last edit was XX ago by YY
    };

    // -------------------------------------------------------------

    function init() {
        $scope.safeApply(function () {
            $scope.map.init();

            if (!$scope.sandbox) {
                // overview diagram
                var overview = go.GraphObject.make(go.Overview, 'overview-diagram', {
                    observed: $scope.map.getDiagram(),
                    contentAlignment: go.Spot.Center
                });
                var outline = overview.box.elements.first();
                outline.stroke = '#333';
            }

            //if ($scope.mapUrl) {
            $scope.map.load();
            //} else {
            //    $scope.map.loadForSandbox();
            //}

            addBehaviors();
            handleNavigation();
            handleBackspace();
        });
    }

    // misc. UI behaviors for tooltips, popups etc.
    // TODO: figure out which of these need to be reapplied after dynamic data changes (e.g. LessonBook popovers)
    function addBehaviors() {

        // NOTE: we have to use regular bootstrap tooltips for toolbar buttons (instead of ng-bootstrap ones)
        // so we can turn them off for mobile. We also put the tooltips on wrappers rather than on the actual
        // buttons, so we can avoid the issue of stuck tooltips if a button gets disabled while the tooltip is showing.

        if (!$scope.isTouchDevice()) {
            // $('.tooltip-wrapper').tooltip({
            //     placement: 'top',
            //     container: 'body'
            // });

            // $('.dropdown-menu .btn').tooltip({
            //     placement: 'left',
            //     container: 'body'
            // }); // for layout options

            $('header, #map-title').hover(function () {
                $('body.presenter-playing').addClass('hide-header');
            }, function () {
                $('body.presenter-playing').removeClass('hide-header');
            });
        }
    }

    function handleNavigation() {
        // cross-browser tweaks:
        try {
            // http://www.opera.com/support/kb/view/827/
            opera.setOverrideHistoryNavigationMode('compatible');
            history.navigationMode = 'compatible';
        } catch (e) {}

        // install before-unload handler:

        function exitMessage() {
            return 'Navigating away from your Map will cause any unsaved changes to be lost ' + '(any changes you make are automatically saved, but it takes a couple of seconds).';
        }

        //        $(window).bind('beforeunload', exitMessage);

        // prevent exit prompt when the user deliberately navigates away:

        $('#header-right a').click(function () {
            $(window).unbind('beforeunload', exitMessage);
        });
    }

    function handleBackspace() {
        var BACKSPACE = 8;

        $(document).on('keydown', function (event) {
            if (event.keyCode === BACKSPACE) {
                if (!$('body :focus').is(':input')) {
                    // prevent accidental backspace when no input has focus:
                    event.preventDefault();
                    event.stopPropagation();
                }
            }
        });
    }

    init();

    return $scope;
};

window.MapEditorCtrl.$inject = ['$rootScope', '$scope', '$http', '$resource', '$timeout', '$modal', '$log'];

// no biggie.

},{}],22:[function(require,module,exports){
'use strict';

window.SandbankEditorOptions = {};

SandbankEditorOptions = function ($scope, $http, $resource, $modal, $log) {

    this.openModal = function (_options, _onSaveDefaults, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_editor_options_modal.html', // see views/maps/_template_editor_options_modal
            backdrop: 'static',
            controller: optionsModalCtrl,
            windowClass: 'options-modal',
            resolve: {
                options: function options() {
                    return _options;
                },
                onSaveDefaults: function onSaveDefaults() {
                    return _onSaveDefaults;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for options modal ---------------------

    var optionsModalCtrl = function optionsModalCtrl($scope, $modalInstance, options, onSaveDefaults, onUpdate) {

        $scope.options = options;

        $scope.setDefaults = {
            value: false
        };

        $scope.ok = function () {
            onUpdate($scope.options);
            if ($scope.setDefaults.value) {
                onSaveDefaults($scope.options);
            }
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    optionsModalCtrl.$inject = ['$scope', '$modalInstance', 'options', 'onSaveDefaults', 'onUpdate'];
};

},{}],23:[function(require,module,exports){
"use strict";
/*
*  Copyright (C) 1998-2015 by Northwoods Software Corporation. All Rights Reserved.
*/

// A custom Tool for moving a label on a Node

/**
* @constructor
* @extends Tool
* @class
* This tool only works when the Node has a label (any GraphObject) marked with
* { _isNodeLabel: true } that is positioned in a Spot Panel.
* It works by modifying that label's GraphObject.alignment property to have an
* offset from the center of the panel.
*/
function NodeLabelDraggingTool() {
  go.Tool.call(this);
  this.name = "NodeLabelDragging";

  /** @type {GraphObject} */
  this.label = null;
  /** @type {Point} */
  this._originalAlignment = null;
  /** @type {Point} */
  this._originalCenter = null;
}
go.Diagram.inherit(NodeLabelDraggingTool, go.Tool);

/**
* This tool can only start if the mouse has moved enough so that it is not a click,
* and if the mouse down point is on a GraphObject "label" in a Spot Panel,
* as determined by findLabel().
* @this {NodeLabelDraggingTool}
* @return {boolean}
*/
NodeLabelDraggingTool.prototype.canStart = function () {
  if (!go.Tool.prototype.canStart.call(this)) return false;
  var diagram = this.diagram;
  if (diagram === null) return false;
  // require left button & that it has moved far enough away from the mouse down point, so it isn't a click
  var e = diagram.lastInput;
  if (!e.left) return false;
  if (!this.isBeyondDragSize()) return false;

  return this.findLabel() !== null;
};

/**
* From the GraphObject at the mouse point, search up the visual tree until we get to
* an object that has the "_isNodeLabel" property set to true, that is in a Spot Panel,
* and that is not the first element of that Panel (i.e. not the main element of the panel).
* @this {NodeLabelDraggingTool}
* @return {GraphObject} This returns null if no such label is at the mouse down point.
*/
NodeLabelDraggingTool.prototype.findLabel = function () {
  var diagram = this.diagram;
  var e = diagram.firstInput;
  var elt = diagram.findObjectAt(e.documentPoint, null, null);

  if (elt === null || !(elt.part instanceof go.Node)) return null;
  while (elt.panel !== null && elt.panel.type === go.Panel.Spot && elt.panel.elt(0) !== elt) {
    if (elt._isNodeLabel) return elt;
    elt = elt.panel;
  }
  return null;
};

/**
* Start a transaction, call findLabel and remember it as the "label" property,
* and remember the original value for the label's alignment property.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doActivate = function () {
  this.startTransaction("Shifted Label");
  this.label = this.findLabel();
  if (this.label !== null) {
    this._originalAlignment = this.label.alignment.copy();
    var main = this.label.panel.findMainElement();
    this._originalCenter = main.getDocumentPoint(go.Spot.Center);
  }
  go.Tool.prototype.doActivate.call(this);
};

/**
* Stop any ongoing transaction.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doDeactivate = function () {
  go.Tool.prototype.doDeactivate.call(this);
  this.stopTransaction();
};

/**
* Clear any reference to a label element.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doStop = function () {
  this.label = null;
  go.Tool.prototype.doStop.call(this);
};

/**
* Restore the label's original value for GraphObject.alignment.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doCancel = function () {
  if (this.label !== null) {
    this.label.alignment = this._originalAlignment;
  }
  go.Tool.prototype.doCancel.call(this);
};

/**
* During the drag, call updateAlignment in order to set the GraphObject.alignment of the label.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doMouseMove = function () {
  if (!this.isActive) return;
  this.updateAlignment();
};

/**
* At the end of the drag, update the alignment of the label and finish the tool,
* completing a transaction.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doMouseUp = function () {
  if (!this.isActive) return;
  this.updateAlignment();
  this.transactionResult = "Shifted Label";
  this.stopTool();
};

/**
* Save the label's GraphObject.alignment as an absolute offset from the center of the Spot Panel
* that the label is in.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.updateAlignment = function () {
  if (this.label === null) return;
  var last = this.diagram.lastInput.documentPoint;
  var cntr = this._originalCenter;
  this.label.alignment = new go.Spot(0.5, 0.5, last.x - cntr.x, last.y - cntr.y);
};

module.exports = NodeLabelDraggingTool;

},{}],24:[function(require,module,exports){
// functions for the generator (aka ThinkQuery)

'use strict';

var GeneratorCtrl = function GeneratorCtrl($scope) {

    var map = $scope.map;
    var diagram = $scope.map.getDiagram();

    $scope.concept1 = '';
    $scope.concept2 = '';

    $scope.echoConcept1 = function () {
        return $scope.concept1 || '...';
    };

    $scope.echoConcept2 = function () {
        return $scope.concept2 || '...';
    };

    $scope.swapConcepts = function () {
        var tmp = $scope.concept1;
        $scope.concept1 = $scope.concept2;
        $scope.concept2 = tmp;
        $scope.safeApply();
    };

    $scope.mapIt = function (question) {
        startSpinner();
        diagram = map.getDiagram();
        map.getAutosave().saveOnModelChanged = false;

        if ($scope.sandbox) {
            diagram.clear();
        }

        // figure out location for inserted stuff
        var db = map.computeMapBounds();
        var x = db.x + db.width + 200;
        var y = db.y;
        if (isNaN(x) || isNaN(y)) {
            x = y = 0;
        }
        //console.log('x, y: ' + x + ', ' + y);

        // insert the stuff and deselect it
        question(x, y);
        diagram.clearSelection();

        diagram.updateAllTargetBindings();
        diagram.layoutDiagram(true);

        map.getUi().resetZoom();

        map.getAutosave().saveOnModelChanged = true;
        map.getAutosave().save('edit_generator');
        stopSpinner();
    };

    $scope.selectedQuestion = null;

    $scope.selectQuestion = function (question) {
        $scope.selectedQuestion = question;
        if ($scope.sandbox) {
            $scope.mapIt(question);
        }
    };

    $scope.surpriseMe = function () {
        var keys = _.keys($scope.queries);
        var i = _.random(0, keys.length - 1);
        var question = $scope.queries[keys[i]];
        $scope.selectedQuestion = question;
        $scope.mapIt(question);

        $('#questions').animate({ scrollTop: i * 30 }, 1000);
    };

    // ---------- functions for creating each of the structures - see views/maps/generator_tab -----------

    $scope.queries = {

        WHAT_IS: function WHAT_IS(x, y) {
            // 1
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
        },

        WHAT_IS_NOT: function WHAT_IS_NOT(x, y) {
            // 2
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is not?');
            map.createChild(thing1, 'is not?');
            map.createChild(thing1, 'is not?');
        },

        DISTINGUISH_BETWEEN: function DISTINGUISH_BETWEEN(x, y) {
            // 3
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');

            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            diagram.model.setDataProperty(thing2.data, 'dflag', true);
            map.createChild(thing2, 'is?');
            map.createChild(thing2, 'is?');
            map.createChild(thing2, 'is?');
        },

        COMPARE_CONTRAST: function COMPARE_CONTRAST(x, y) {
            // 4
            var thing1 = map.createThing(x - 150, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 150, y, $scope.echoConcept2());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            diagram.model.setDataProperty(thing2.data, 'dflag', true);
            var rthing1 = map.createRLinkWithRThing(thing1, thing2, 'contrast');
            var rthing2 = map.createRLinkWithRThing(thing1, thing2, 'compare');
            diagram.model.setDataProperty(rthing1.labeledLink.data, 'type', 'toFrom');
            diagram.model.setDataProperty(rthing2.labeledLink.data, 'type', 'toFrom');
        },

        PARTS_OF: function PARTS_OF(x, y) {
            // 5
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            map.createChild(thing1, 'part?');
            map.createChild(thing1, 'part?');
            map.createChild(thing1, 'part?');
        },

        PART_OF: function PART_OF(x, y) {
            // 6
            var thing1 = map.createThing(x, y, 'part of?');
            map.createChild(thing1, $scope.echoConcept1());
        },

        PARTS_HAVE_PARTS: function PARTS_HAVE_PARTS(x, y) {
            // 7
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part?');
            map.createChild(child1, 'part?');
            map.createChild(child1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            map.createChild(child2, 'part?');
            map.createChild(child2, 'part?');
        },

        R_PARTS: function R_PARTS(x, y) {
            // 8
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            var rthing = map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createChild(rthing, 'part?');
            map.createChild(rthing, 'part?');
        },

        P_PARTS: function P_PARTS(x, y) {
            // 9
            var thing1 = map.createThing(x + 300, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var child2 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var child3 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var thing2 = map.createThing(x, y, $scope.echoConcept2());
            map.createPLink(thing2, thing1);
            map.createPLink(thing2, child1);
            map.createPLink(thing2, child2);
            map.createPLink(thing2, child3);
        },

        RS_TO_AND_BY: function RS_TO_AND_BY(x, y) {
            // 10
            var related1 = map.createThing(x, y, 'related idea?');
            var related2 = map.createThing(x + 300, y + 50, 'related idea?');
            var related3 = map.createThing(x + 50, y + 300, 'related idea?');
            var thing = map.createThing(x + 130, y + 130, $scope.echoConcept1());
            map.createRLink(related1, thing);
            map.createRLink(related2, thing);
            map.createRLink(related3, thing);

            var thing1 = map.createThing(x + 500, y + 150, 'idea?');
            var thing2 = map.createThing(x + 750, y + 150, 'idea?');
            map.createRLinkWithRThing(thing1, thing2, $scope.echoConcept1());
        },

        WHAT_IS_R: function WHAT_IS_R(x, y) {
            // 11
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            map.createRLinkWithRThing(thing1, thing2, 'idea?');
        },

        PART_RS_ARE: function PART_RS_ARE(x, y) {
            // 12
            var thing1 = map.createThing(x + 30, y, $scope.echoConcept1(), 'freehand');
            var child1 = map.createChild(thing1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            var child3 = map.createChild(thing1, 'part?');
            diagram.model.setDataProperty(child1.data, 'loc', '-20 110');
            diagram.model.setDataProperty(child2.data, 'loc', '80 110');
            diagram.model.setDataProperty(child3.data, 'loc', '30 190');
            map.createRLinkWithRThing(child1, child2, 'relationship?');
            map.createRLinkWithRThing(child2, child3, 'relationship?');
            map.createRLinkWithRThing(child3, child1, 'relationship?');
        },

        PART_RS_EXIST: function PART_RS_EXIST(x, y) {
            // 13
            var thing1 = map.createThing(x, y, $scope.echoConcept1(), 'right');
            var child11 = map.createChild(thing1, 'part?');
            var child12 = map.createChild(thing1, 'part?');
            var child13 = map.createChild(thing1, 'part?');
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            var child21 = map.createChild(thing2, 'part?');
            var child22 = map.createChild(thing2, 'part?');
            var child23 = map.createChild(thing2, 'part?');
            map.createRLink(thing1, thing2);
            map.createRLinkWithRThing(child11, child21, 'relationship?');
            map.createRLinkWithRThing(child12, child22, 'relationship?');
            map.createRLinkWithRThing(child13, child23, 'relationship?');
        },

        RS_WITH_OTHERS: function RS_WITH_OTHERS(x, y) {
            // 14
            var thing1 = map.createThing(x - 200, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 200, y, $scope.echoConcept2());
            var thing3 = map.createThing(x - 200, y + 200, 'another thing');
            var thing4 = map.createThing(x + 200, y + 200, 'another thing');
            map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createRLinkWithRThing(thing1, thing3, 'relationship?');
            map.createRLinkWithRThing(thing1, thing4, 'relationship?');
            map.createRLinkWithRThing(thing2, thing4, 'relationship?');
            map.createRLinkWithRThing(thing3, thing4, 'relationship?');
        },

        PARTS_OF_P: function PARTS_OF_P(x, y) {
            // 15
            var thing1 = map.createThing(x - 100, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            var child3 = map.createChild(thing1, 'part?');
            var thing2 = map.createThing(x + 100, y, $scope.echoConcept2());
            map.createPLink(thing1, thing2);
        },

        POINT_FOR: function POINT_FOR(x, y) {
            // 16
            var thing = map.createThing(x, y, 'new perspective');
            var thing1 = map.createThing(x - 150, y + 150, $scope.echoConcept1());
            var thing2 = map.createThing(x + 150, y + 150, $scope.echoConcept2());
            var rthing = map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createPLink(thing, rthing);
        },

        HAS_MULTIPLE_PS: function HAS_MULTIPLE_PS(x, y) {
            // 17
            var point1 = map.createThing(x, y + 50, 'viewpoint?');
            var point2 = map.createThing(x + 250, y, 'viewpoint?');
            var point3 = map.createThing(x + 500, y + 50, 'viewpoint?');
            var view = map.createThing(x + 250, y + 250, $scope.echoConcept1());
            map.createPLink(point1, view);
            map.createPLink(point2, view);
            map.createPLink(point3, view);
        },

        PARTS_FROM_MULTIPLE_PS: function PARTS_FROM_MULTIPLE_PS(x, y) {
            // 18
            var point1 = map.createThing(x - 100, y, 'viewpoint?');
            var point2 = map.createThing(x - 100, y + 125, 'viewpoint?');
            var point3 = map.createThing(x - 100, y + 250, 'viewpoint?');
            var thing = map.createThing(x + 150, y + 25, $scope.echoConcept1());
            var child1 = map.createChild(thing, 'part seen from viewpoint?');
            var child2 = map.createChild(thing, 'part seen from viewpoint?');
            var child3 = map.createChild(thing, 'part seen from viewpoint?');
            map.createPLink(point1, child1);
            map.createPLink(point1, child2);
            map.createPLink(point2, child2);
            map.createPLink(point3, child3);
        },

        WHAT_ABOUT: function WHAT_ABOUT(x, y) {
            // 19
            $scope.queries.WHAT_IS(x, y);
            $scope.queries.PARTS_OF(x + 300, y);
            $scope.queries.PARTS_FROM_MULTIPLE_PS(x + 700, y);
            $scope.queries.RS_TO_AND_BY(x, y + 400);
        }
    }; // queries
};

GeneratorCtrl.$inject = ['$scope'];

SandbankEditor.Generator = function ($scope, map) {

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (oldValue == map.getUi().TAB_ID_GENERATOR) {
            // closing tab
            map.setEditingBlocked(false);
        } else if (newValue == map.getUi().TAB_ID_GENERATOR) {
            // opening tab
            map.setEditingBlocked(true);
        }
    };

    // these get filtered out in LessonBook
    this.getPlaceholderIdeaNames = function () {
        return ['is?', 'is not?', 'part?', 'viewpoint?', 'related idea?', 'idea?', 'part seen from viewpoint?', 'contrast?', 'comparison?', 'relationship?'];
    };
};

// NB: generator is opened on load of empty map; see map.js:load()

},{}],25:[function(require,module,exports){
// layouts used in the editor, for the diagram or individual Groups, plus layout-related functions

'use strict';

SandbankEditor.Layouts = function ($scope, map) {

    var self = this;

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        var diagram = map.getDiagram();
        if (eventName == 'InitialLayoutCompleted') {
            diagram.updateAllTargetBindings();
            diagram.layoutDiagram(true);
        } else if (eventName == 'SelectionMoved') {
            updateSelectedPartLocationData(e);
            map.getDiagram().layoutDiagram(true);
        } else if (eventName == 'SelectionDeleted') {
            diagram.updateAllTargetBindings();
        } else if (eventName == 'PartCreated') {} else if (eventName == 'PartResized') {
            setResizedPartDimensionData(e);
        } else if (eventName == 'LinkDrawn') {
            adjustLinkLayout(e.subject);
        } else if (eventName == 'LinkRelinked') {
            adjustLinkLayout(e.subject);
        }
    };

    // ------------ handle location/size attributes for nodes ---------------

    // only update w/h for slides, as all other node types have fixed dimensions according to the templates
    function setResizedPartDimensionData(e) {
        var diagram = map.getDiagram();
        var node = e.subject;
        if (node && node.category == 'slide') {
            //console.log('PartResized: ' + node.part.actualBounds);
            diagram.model.setDataProperty(node.data, 'width', node.part.actualBounds.width);
            diagram.model.setDataProperty(node.data, 'height', node.part.actualBounds.height);
        }
    }

    // set the 'loc' attribute for a new top-level node (created by double-clicking), to support freehand layout
    this.setNewPartLocationData = function (e) {
        var node = e.subject;
        if (node && node.part) {
            if (node instanceof go.Group) {
                map.getDiagram().model.setDataProperty(node.data, 'loc', node.part.location.x + ' ' + node.part.location.y);
            }
        }
    };

    // updates the 'loc' attribute for each selected part, to support freehand layout (does not apply to slides)
    function updateSelectedPartLocationData(e) {
        var diagram = map.getDiagram();
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Group) {
                // thing
                var part = it.value;
                var parentX = 0;
                var parentY = 0;
                if (part.containingGroup) {
                    parentX = part.containingGroup.location.x;
                    parentY = part.containingGroup.location.y;
                }
                //console.log('moving group, subject: ' + e.subject + ', part: ' + part + ', height: ' + part.part.desiredSize.height + ', location: ' + part.part.location);
                if (!isNaN(part.location.x)) {
                    diagram.model.setDataProperty(part.data, 'loc', part.location.x - parentX + ' ' + (part.location.y - parentY));
                }
            }
        }
    }

    // ----------- changing layouts of things and their descendants ----------------

    this.fromAndToNodesAreVisible = function (link) {
        return link.fromNode && link.toNode && !self.hasCollapsedAncestor(link.fromNode) && !self.hasCollapsedAncestor(link.toNode);
    };

    this.labelNodeIsVisible = function (link) {
        return link.labelNodes.count && link.labelNodes.first().visible;
    };

    this.hasCollapsedAncestor = function (group) {
        while (true) {
            if (!group.containingGroup) {
                return false;
            } else if (!group.containingGroup.isSubGraphExpanded) {
                return true;
            } else {
                group = group.containingGroup;
            }
        }
    };

    // this.hasLinkLabelAncestor = function(group) {
    //     while (true) {
    //         if (!group.containingGroup) {
    //             return false;
    //         }
    //         else if (group.containingGroup.isLinkLabel) {
    //             return true;
    //         }
    //         else {
    //             group = group.containingGroup;
    //         }
    //     }
    // };

    this.getHighestAncestorWithLayout = function (group, layoutNames) {
        while (true) {
            if (!group.containingGroup) {
                return false;
            } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                return group.containingGroup;
            } else {
                group = group.containingGroup;
            }
        }
    };

    this.areSistersInInventoryLayout = function (group1, group2) {
        return group1.containingGroup == group2.containingGroup && group1.containingGroup && _.contains(['left', 'right'], group1.containingGroup.data.layout);
    };

    this.isNotWithinInventoryLayout = function (group) {
        return !self.isWithinInventoryLayout(group);
    };

    this.isRThingWithinInventoryLayout = function (group) {
        return group.isLinkLabel && self.isWithinInventoryLayout(group);
    };

    this.isWithinInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['left', 'right']);
    };

    this.isWithinLeftInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['left']);
    };

    this.isWithinRightInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['right']);
    };

    this.isWithinFreehandLayout = function (group) {
        return self.isWithinLayout(group, ['freehand']);
    };

    this.isWithinStackedLayout = function (group) {
        return self.isWithinLayout(group, ['stacked']);
    };

    this.isWithinLayout = function (group, layoutNames) {
        while (true) {
            if (!group.containingGroup) {
                //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': false');
                return false;
            } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': true');
                return true;
            } else {
                group = group.containingGroup;
            }
        }
    };

    this.showLeftTextBlock = function (group) {
        return self.isWithinRightInventoryLayout(group) && !self.isWithinStackedLayout(group) && !group.isLinkLabel;
    };

    this.showRightTextBlock = function (group) {
        return self.isWithinLeftInventoryLayout(group) && !self.isWithinStackedLayout(group) && !group.isLinkLabel;
    };

    this.setDescendantLayouts = function (group, layoutName) {
        if (layoutName == 'left' || layoutName == 'right' || layoutName == 'stacked') {
            var it = group.memberParts.iterator;
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group && !part.isLinkLabel) {
                    part.data.layout = layoutName;
                    self.setDescendantLayouts(part, layoutName);
                }
            }
        } else if (layoutName == 'freehand') {}
    };

    this.disableLayoutForSelectedThings = function (layoutName) {
        var it = map.getDiagram().selection.iterator;
        if (!it.count) {
            return true;
        }
        while (it.next()) {
            if (!(it.value instanceof go.Group)) {
                return true;
            } else {
                var group = it.value;
                if (self.isWithinLayout(group, ['left', 'right', 'stacked'])) {
                    return true;
                }
            }
        }
        return false;
    };

    // -------------- scaling functions, etc. ----------------------

    // Computes the level of this group
    this.computeLevel = function (group) {
        //console.log('computeLevel, part: ' + part + ', containingGroup: ' + part.containingGroup);
        if (!(group instanceof go.Group) || group.containingGroup === null) {
            return 0;
        } else {
            return self.computeLevel(group.containingGroup) + 1;
        }
    };

    // gets the basic scaling for thing squares, by level
    function getThingScale(level) {
        return Math.pow(0.45, level); // 1, .45, .2025, .091125, ...
    }

    // this is only used for groups
    this.getScale = function (group, visitedGroupKeys) {
        if (group) {
            // keep track of groups we've visited to avoid infinite recursion
            // TODO: track down exactly how infinite loops are occurring,
            // or IF they still are since map.checkModel was introduced...
            if (visitedGroupKeys && Array.isArray(visitedGroupKeys)) {
                //console.log('visitedGroupKeys: ' + visitedGroupKeys);
                if (_.contains(visitedGroupKeys, group.data.key)) {
                    //console.log('hit already visited key: ' + group.data.key);
                    return 1;
                } else {
                    visitedGroupKeys.push(group.data.key);
                }
            } else {
                visitedGroupKeys = [group.data.key];
            }

            if (group.labeledLink) {
                // R-thing
                var fromScale = self.getScale(group.labeledLink.fromNode, visitedGroupKeys);
                var toScale = self.getScale(group.labeledLink.toNode, visitedGroupKeys);
                //console.log('getScale, fromScale: ' + fromScale + ', toScale: ' + toScale + ', visitedGroupKeys: ' + visitedGroupKeys.join(','));
                return Math.min(fromScale, toScale) * 0.5;
            } else if (group.containingGroup) {
                return self.getScale(group.containingGroup, visitedGroupKeys) * 0.45;
            } else {
                return getThingScale(self.computeLevel(group));
            }
        }
        return 1; // can occur when dragging R to empty space
    };

    // gets the margin to be used in stack layout between this group's children
    function getStackMargin(group) {
        return 10 / 0.45 * self.getScale(group);
    }

    // gets the margin to be used in stack layout between this group's children
    function getInventoryMargin(group) {
        if (self.computeLevel(group) <= 2) {
            return 10 * self.getScale(group);
        } else {
            return 3 * self.getScale(group);
        }
    }

    this.getExternalTextScale = function (group) {
        return 1 - 0.1 * self.computeLevel(group);
    };

    this.getLinkStrokeWidth = function (link) {
        var fromScale = self.getScale(link.fromNode);
        var toScale = self.getScale(link.toNode);
        return (link.isSelected ? 4 : 2) * Math.min(fromScale, toScale); // 2, .9, ...
    };

    // scale arrowheads based on the smallest to/from node,
    // or just the To node for P links
    this.getArrowheadScale = function (link) {
        var fromScale = self.getScale(link.fromNode);
        var toScale = self.getScale(link.toNode);
        var minScale = Math.min(fromScale, toScale);
        //console.log("getArrowheadScale, fromScale: ", fromScale, ', toScale: ', toScale, ', minScale: ', minScale);
        if (link.data.category == 'P') {
            minScale = toScale;
        }
        if (minScale >= 1) {
            return 1 * minScale;
        } else {
            return 1.5 * minScale;
        }
    };

    // -------------- creating new things ----------------------

    // Returns a location for a new sister group (thing) to the given one,
    // which will not hide any existing things (overlap is allowed).
    // The returned coordinates are absolute for a top-level group,
    // or relative to the parent otherwise - suitable for use with FreehandDiagramLayout
    // or FreehandLayout, resp.
    this.getNewSisterLocation = function (group, withR) {
        var diagram = map.getDiagram();
        // if we are within another group, things are in absolute coordinates
        // and sisters are placed above the thing; otherwise relative and below...
        var inGroup = group.containingGroup !== null;
        // ... except if withR is true, we go to the right instead of above or below.

        // start below if in group, else above; or to the right if withR
        var x, y, w, h;
        if (withR) {
            x = group.location.x + group.actualBounds.width * 2.2;
            y = group.location.y;
        } else {
            x = group.location.x;
            y = group.location.y + group.actualBounds.height * 1.1 * (inGroup ? 1 : -1);
        }
        w = group.actualBounds.width;
        h = group.actualBounds.height;

        // check for overlapping parts; if found, increment x,y and continue

        while (true) {
            var rect = new go.Rect(x, y, w, h);
            rect.grow(h / 10, w / 10, h / 10, w / 10);
            var parts = diagram.findObjectsIn(rect, null, self.isGroup);
            if (parts.count) {
                //console.log('getNewSisterLocation: overlapping part found in ' + rect);
                if (withR) {
                    x += w / 10;
                    y += h / 10;
                } else {
                    x += w / 10;
                    y += h / 10 * (inGroup ? 1 : -1); // move down if in group, else up
                }
            } else {
                //console.log('getNewSisterLocation: no overlapping part found in ' + rect);
                break;
            }
        }
        if (inGroup) {
            // make coordinates relative
            x -= group.containingGroup.location.x;
            y -= group.containingGroup.location.y;
        }
        return new go.Point(x + Math.random(), y + Math.random());
    };

    // Returns a location for a new child group (thing) to the given one,
    // which will not hide any existing children (overlap is allowed).
    // The returned coordinates are relative to the parent group - suitable for use with FreehandLayout.
    this.getNewChildLocation = function (group) {
        var groupBounds = group.actualBounds;
        // NB: all x/y locations are relative to the group location
        var x = 0;
        var y = groupBounds.height * 1.1;
        var w, h;
        var members = group.memberParts;
        // keep testing new rectangles until we find one that doesn't overlap with any existing member of the group
        while (true) {
            members.reset();
            var overlaps = false;
            var member, newRect, memberRect;
            while (members.next()) {
                member = members.value;
                var memberBounds = member.actualBounds;
                w = memberBounds.width;
                h = memberBounds.height;
                // find the existing member's actual bounds (absolute coords)
                memberRect = new go.Rect(memberBounds.x - groupBounds.x, memberBounds.y - groupBounds.y, memberBounds.width, memberBounds.height);
                newRect = new go.Rect(x, y, w, h);
                newRect.grow(h / 5, w / 5, h / 5, w / 5);
                overlaps = newRect.containsRect(memberRect);
                //console.log('getNewChildLocation for ' + member + ': newRect = ' + newRect + ', memberRect = ' + memberRect + ', overlaps: ' + overlaps);
                if (overlaps) {
                    break;
                }
            }
            if (overlaps) {
                // increment x, y and try again
                x += w / 5;
                y += h / 5;
            } else {
                // found a good spot!
                break;
            }
        }
        return new go.Point(x, y);
    };

    // a simpler version of getNewChildLocation that places the child outside the bounds of the existing children
    this.getNewChildLocation2 = function (group) {
        var groupBounds = group.actualBounds;
        var childBounds = map.safeRect(map.getDiagram().computePartsBounds(group.memberParts));
        var x = 0;
        var y = 0;
        if (!group.memberParts.count) {
            y = groupBounds.height * 1.2;
        } else {
            y = groupBounds.height * 1.4 + childBounds.height;
        }
        //console.log('getNewChildLocation2, childBounds: ' + childBounds + ', groupBounds: ' + groupBounds + ', x: ' + x + ', y: ' + y);
        return new go.Point(x, y);
    };

    // move all the given new member groups so that their locations are relative to that of
    // the parent and its previously existing members, and scaled down appropriately
    this.layoutNewMembersRelativeTo = function (newMembers, parent, oldMemberBounds) {
        // how big was the parent system before the new groups were added?
        var systemBounds = parent.actualBounds.unionRect(oldMemberBounds);

        // figure out old/new origins - place new origin below existing system
        var oldBounds = map.getDiagram().computePartsBounds(newMembers);
        var oldOrigin = new go.Point(oldBounds.x, oldBounds.y);
        var newOrigin = new go.Point(0, systemBounds.height * 1.2);
        //console.log('layoutNewMembersRelativeTo, systemBounds: ' + systemBounds + ', oldBounds: ' + oldBounds +  ', oldOrigin: ' + oldOrigin + ', newOrigin: ' + newOrigin);

        // figure out new scaled locations
        // NB: we can assume newMembers are all one level down from parent (see map.addSelectedThingsAsChildrenOf),
        // so we just multiply by the standard scale factor
        var it = newMembers.iterator;
        while (it.next()) {
            var group = it.value;
            var groupBounds = group.actualBounds;
            var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) * 0.45;
            var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) * 0.45;
            var newLoc = go.Point.stringify(new go.Point(newX, newY));
            //console.log('layoutNewMembersRelativeTo, groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
            map.getDiagram().model.setDataProperty(group.data, 'loc', newLoc);
        }
    };

    // move all the given old member groups so that their locations are absolute and above
    // the parent, and scaled up appropriately
    this.layoutOldMembersOutsideOf = function (oldMembers, parent, oldMembersBounds, oldMembersLevel) {
        // figure out scale factor (members can be dragged up multiple levels, unlike dragging into S)
        var scaleFactor = Math.pow(0.45, oldMembersLevel - self.computeLevel(parent));
        //console.log('layoutOldMembersOutsideOf, scaleFactor: ' + scaleFactor);

        // figure out old/new origins - place new origin above parent, with vertical space for scaled-up oldMembers
        var parentBounds = parent.actualBounds;
        var oldOrigin = new go.Point(oldMembersBounds.x, oldMembersBounds.y);
        var newOrigin = new go.Point(parentBounds.x, parentBounds.y - oldMembersBounds.height * 1.2 / scaleFactor);

        // figure out new scaled locations
        var it = oldMembers.iterator;
        while (it.next()) {
            var group = it.value;
            var groupBounds = group.actualBounds;
            var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) / scaleFactor;
            var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) / scaleFactor;
            var newLoc = go.Point.stringify(new go.Point(newX, newY));
            //console.log('layoutOldMembersOutsideOf, parentBounds: ' + parentBounds + ', oldMembersBounds: ' + oldMembersBounds + ', newOrigin: ' + newOrigin + ', groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
            map.getDiagram().model.setDataProperty(group.data, 'loc', go.Point.stringify(newLoc));
        }
    };

    // ----------------- accessors -------------------

    // returns the appropriate layout class by abbreviated name
    this.getLayout = function (layoutName) {
        if (layoutName == 'freehand') return new FreehandLayout();else if (layoutName == 'right') return new RightInventoryLayout();else if (layoutName == 'stacked') return new StackedLayout();else return new LeftInventoryLayout();
    };

    this.getFreehandDiagramLayout = function () {
        return new FreehandDiagramLayout();
    };

    // --------------------------------------------------------------

    // returns true if the to and from nodes for the link have a common ancestor group with one of the given layout names.
    // TODO: verify logic - what if there are multiple such ancestors? - this should return the highest one...
    function getCommonAncestorWithLayout(group1, group2, layoutNames) {
        var ancestors1 = self.getAncestorGroups(group1);
        var ancestors2 = self.getAncestorGroups(group2);
        var commonAncestors = _.intersection(ancestors1, ancestors2);
        var layoutAncestors = _.filter(commonAncestors, function (group) {
            return _.indexOf(layoutNames, group.data.layout) != -1;
        });
        if (layoutAncestors.length) {
            return layoutAncestors[0];
        } else {
            return null;
        }
    }

    // returns the ancestors of this group, including itself
    this.getAncestorGroups = function (group) {
        var ancestors = [group];
        var g = group;
        while (g.containingGroup) {
            ancestors.push(g.containingGroup);
            g = g.containingGroup;
        }
        return ancestors;
    };

    // --------------------------------------------------------------

    function FreehandDiagramLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(FreehandDiagramLayout, go.Layout);

    FreehandDiagramLayout.prototype.toString = function () {
        return 'FreehandDiagramLayout';
    };

    FreehandDiagramLayout.prototype.doLayout = function (coll) {
        //console.log('FreehandDiagramLayout.doLayout');
        var diagram = map.getDiagram();
        // diagram.startTransaction("Freehand Diagram Layout");

        //validateGroupLocations(diagram.findTopLevelGroups());
        var groups = diagram.findTopLevelGroups(); // get new iterator
        while (groups.next()) {
            var group = groups.value;
            if (!group.isLinkLabel) {
                var loc = go.Point.parse(group.data.loc);
                group.move(new go.Point(loc.x, loc.y));
                //console.log('FreehandDiagramLayout, group: ' + group + ' to location: ' + loc.x + ',' + loc.y);
            }
        }

        // all adjustment of links is done from here, not from the other layouts...
        getLinksByNodes(true);
        var links = diagram.links.iterator;
        while (links.next()) {
            var link = links.value;
            // if (isNaN(link.location.x)) {
            //     //console.log('link location isNaN');
            //     link.move(new go.Point(0,0));
            // }
            // //console.log('link location: ' + link.location);
            adjustLinkLayout(link);
        }

        // diagram.commitTransaction("Freehand Diagram Layout");
    };

    // if any group in the given Iterator does not have a location (data.loc), set one
    // that doesn't overlap with the other members
    function validateGroupLocations(groups) {}

    // --------------------------------------------------------------

    function FreehandLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(FreehandLayout, go.Layout);

    FreehandLayout.prototype.toString = function () {
        return 'FreehandLayout';
    };

    FreehandLayout.prototype.doLayout = function (coll) {
        var diagram = map.getDiagram();
        diagram.startTransaction('Freehand Layout');

        var x = this.group.location.x;
        var y = this.group.location.y;

        var it = this.group.memberParts.iterator;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group && !part.isLinkLabel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('FreehandLayout, part: ' + part.data.text + ', loc: ' + loc + ', location: ' + part.location);
                part.move(new go.Point(x + loc.x, y + loc.y));
                part.layout.doLayout(part);
            }
        }

        diagram.commitTransaction('Freehand Layout');
    };

    // --------------------------------------------------------------

    function StackedLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(StackedLayout, go.Layout);

    StackedLayout.prototype.toString = function () {
        return 'StackedLayout';
    };

    StackedLayout.prototype.doLayout = function (coll) {
        this.diagram.startTransaction('Stacked Layout');
        var margin = getStackMargin(this.group);
        var startX = this.group.location.x;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + margin / 2);
        layoutMembersForStacked(this.group, startX, startY);
        this.diagram.commitTransaction('Stacked Layout');
    };

    // returns the max y value after laying out the last part
    function layoutMembersForStacked(group, startX, startY) {
        var members = getOrderedMembers(group);
        var x = startX;
        var y = startY;
        var rowCount = 0;
        var maxStartY = startY;
        _.each(members, function (part) {
            if (part instanceof go.Group && !part.isLinkLabel) {
                var margin = getStackMargin(part);
                part.move(new go.Point(x, y));
                startY = y + part.actualBounds.height + margin / 2; // start Y position for part's children

                //console.log('layoutMembersForStacked: starting layout of children of ' + part + ' at ' + Math.round(x) + ',' + Math.round(startY));

                if (part.isSubGraphExpanded) {
                    // layout children of this part; check if we've already done a taller part+children in current row
                    maxStartY = Math.max(maxStartY, layoutMembersForStacked(part, x, startY));
                    //console.log('layoutMembersForStacked: laid out children of ' + part + ', maxStartY is now ' + Math.round(maxStartY));
                } else {
                    maxStartY = Math.max(maxStartY, startY);
                }

                // decide whether to wrap
                rowCount++;
                if (rowCount < 2) {
                    // keep going on this line
                    x += part.actualBounds.width + margin;
                } else {
                    // wrap to next line
                    x = startX;
                    y = maxStartY + margin / 2;
                    rowCount = 0;
                }
            }
        });
        return maxStartY;
    }

    // --------------------------------------------------------------

    function RightInventoryLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(RightInventoryLayout, go.Layout);

    RightInventoryLayout.prototype.toString = function () {
        return 'RightInventoryLayout';
    };

    RightInventoryLayout.prototype.doLayout = function (coll) {
        //this.diagram.startTransaction("Inventory Layout");
        var startX = this.group.location.x + this.group.actualBounds.width;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + getInventoryMargin(this.group));
        layoutMembersForInventory(this.group, startX, startY, 'R');
        //this.diagram.commitTransaction("Inventory Layout");
    };

    // --------------------------------------------------------------

    function LeftInventoryLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(LeftInventoryLayout, go.Layout);

    LeftInventoryLayout.prototype.toString = function () {
        return 'LeftInventoryLayout';
    };

    LeftInventoryLayout.prototype.doLayout = function (coll) {
        //console.log('LeftInventoryLayout.doLayout, group: ' + this.group + ', location: ' + this.group.location);
        // this.diagram.startTransaction("Inventory Layout");
        var startX = this.group.location.x;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + getInventoryMargin(this.group));
        layoutMembersForInventory(this.group, startX, startY, 'L');
        // this.diagram.commitTransaction("Inventory Layout");
    };

    // shared stuff for Left/Right Inventory layouts...

    // returns the max y value after laying out the last part
    // side is 'L' or 'R'
    function layoutMembersForInventory(group, startX, startY, side) {
        var members = getOrderedMembers(group);
        _.each(members, function (part) {
            var x = startX; // for left, just use x
            if (side == 'R') x = startX - part.actualBounds.width; // for right, right-align parts to startX
            //console.log('layoutMembersForInventory, part: ' + part + ' to location: ' + x + ',' + startY);
            part.move(new go.Point(x, startY));
            startY += part.actualBounds.height + getInventoryMargin(part);
            if (part.isSubGraphExpanded) {
                //console.log('layoutMembersForInventory, y after moving: ' + part + ' = ' + startY);
                startY = layoutMembersForInventory(part, startX, startY, side);
            }
        });
        return startY + getInventoryMargin(group);
    }

    // returns an array of the group's (non-R-thing) members, sorted by the 'order' data property
    function getOrderedMembers(group) {
        var members = new go.List();
        var it = group.memberParts.iterator;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group && !part.isLinkLabel) {
                members.add(part);
            }
        }
        return _.sortBy(members.toArray(), function (member) {
            return member.data.order;
        });
    }

    // ------------------------ link routing and visibility ------------------------------

    // adjust the routing, visibility and other properties of a link according to various structural criteria
    function adjustLinkLayout(link) {
        if (!link || !link.fromNode || !link.toNode) {
            return;
        }

        // var loc = link.location;
        // if (isNaN(loc.x) || isNaN(loc.y)) {
        //     link.location = new go.Point(10, 10);
        //     //console.log('adjustLinkLayout, link.location: ' + link.location);
        // }
        // //console.log('adjustLinkLayout, link.location: ' + link.location);

        // see if link is within a stacked or inventory layout, or if it's a hidden P link
        var inventoryAncestor = getCommonAncestorWithLayout(link.fromNode, link.toNode, ['left', 'right']);
        var stackedAncestor = getCommonAncestorWithLayout(link.fromNode, link.toNode, ['stacked']);
        var hidePLink = link.data && link.data.category == 'P' && !map.getTemplates().showPLink(link);
        //var crowdedRThing = hasCrowdedRThing(link);

        // see if this is one of multiple links between the same two nodes
        var snpos = self.getSameNodesLinkPosition(link);
        var isMultiLink = snpos.count > 1;
        //console.log('snpos for link ' + link + ': ' + snpos.index + ' of ' + snpos.count);

        if (inventoryAncestor) {
            applyInventoryCurveRouting(link, snpos, inventoryAncestor.data.layout);
        } else if (isMultiLink) {
            applyMultilinkCurveRouting(link, snpos);
        } else {
            applyStraightRouting(link);
        }

        // show link only if both connected things are visible (no collapsed ancestors);
        // hide if both are in stacked layout or if it's a P-link that we shouldn't be showing now
        if (self.fromAndToNodesAreVisible(link) && !stackedAncestor && !hidePLink) {
            link.opacity = 1;
            showLabelNodes(link, true);
        } else {
            link.opacity = 0;
            showLabelNodes(link, false);
        }
    }

    // TODO: detect when the R-thing overlaps both from and to nodes, so we can change the link routing
    function hasCrowdedRThing(link) {
        return false;
    }

    function showLabelNodes(link, show) {
        //console.log('showLabelNodes, link: ' + link + ', show: ' + show);
        var it = link.labelNodes;
        if (it) {
            while (it.next()) {
                var group = it.value;
                group.visible = show;
                if (show) {
                    group.layout.doLayout(group);
                }
            }
        }
    }

    // if link is between two things in the same inventory layout (single or multiple),
    // make the line more or less circular on the appropriate side
    function applyInventoryCurveRouting(link, snpos, ancestorLayout) {
        if (ancestorLayout == 'left') {
            link.fromSpot = go.Spot.Left;
            link.toSpot = go.Spot.Left;
        } else if (ancestorLayout == 'right') {
            link.fromSpot = go.Spot.Right;
            link.toSpot = go.Spot.Right;
        }

        // aspect ratio for the link curves - make this smaller to make them taller, larger to make them fatter
        var curveRatio = 0.6;

        var y1 = link.fromNode.actualBounds.y;
        var y2 = link.toNode.actualBounds.y;

        var yDiff = Math.abs(y2 - y1);
        var c = (yDiff === 0 ? 50 : Math.floor(yDiff * curveRatio)) + 100 * (snpos.index / snpos.count);
        //console.log("yDiff = " + yDiff + ', c = ' + c + ' (' + link.fromNode.data.text + ' - ' + p1 + ' - to ' + link.toNode.data.text + ' - ' + p2 + ')');

        link.curve = go.Link.Bezier;
        link.fromEndSegmentLength = c;
        link.toEndSegmentLength = c;
    }

    // if non-inventory link is one of multiple ones between same nodes, make it curved
    function applyMultilinkCurveRouting(link, snpos) {
        link.fromSpot = go.Spot.Default;
        link.toSpot = go.Spot.Default;
        link.curve = go.Link.Bezier;
        // curviness values based on number of links:
        // 2: -25 25
        // 3: -50 0 50
        // 4: -100 -50 0 50 100
        var rangeSize = 10 * (snpos.count - 1);
        var rangeIncrement = 10;
        if (snpos.hasRThing) {
            rangeSize = 100 * (snpos.count - 1);
            rangeIncrement = 100;
        }

        // adjust curviness for smaller scales
        var linkScaleFactor = self.getLinkStrokeWidth(link) / 2; // 2 is max stroke width
        rangeSize *= linkScaleFactor;
        rangeIncrement *= linkScaleFactor;

        var rangeStart = 0 - rangeSize / 2;

        link.curviness = (rangeStart + rangeIncrement * snpos.index) * snpos.orientation;
        // //console.log('applyMultilinkCurveRouting, link: ' + link + ', curviness: ' + link.curviness);
    }

    // do normal straight lines for freehand layout, or links between descendants of things with different layouts
    function applyStraightRouting(link) {
        link.fromSpot = go.Spot.Default;
        link.toSpot = go.Spot.Default;
        link.routing = go.Link.Normal;
        link.curve = go.Link.Bezier;
        link.curviness = 25;
    }

    // --------------- calculate how many links there are between a link's nodes ---------------

    // Returns an object of the format { index: 1, count: 2, orientation: -1, hasRThing: false },
    // indicating how many other links there are between the same pair of nodes,
    // where the given link falls within this list, and what its orientation is.
    this.getSameNodesLinkPosition = function (link) {
        var linksByNodes = getLinksByNodes(true);
        // get links with the same key as this one (connecting same nodes)
        var sameLinks = _.where(linksByNodes, {
            key: getSameNodesLinkKey(link)
        });

        // default return value
        var snpos = {
            index: 0,
            count: 1,
            orientation: 1,
            hasRThing: false
        };
        // set index, count, orientation
        for (var i = 0; i < sameLinks.length; i++) {
            if (sameLinks[i].link == link) {
                snpos = {
                    index: i,
                    count: sameLinks.length,
                    orientation: getLinkOrientation(link)
                };
            }
        }
        // check for Rthing
        for (i = 0; i < sameLinks.length; i++) {
            if (sameLinks[i].hasRThing) {
                snpos.hasRThing = true;
            }
        }
        return snpos;
    };

    var _linksByNodes = null;

    // refreshes the cached list of all links with keys, to facilitate grouping them according to connected nodes
    function getLinksByNodes(refresh) {
        //console.log('getLinksByNodes');
        if (!self._linksByNodes || refresh) {
            self._linksByNodes = [];
            var diagram = map.getDiagram();
            var links = diagram.links.iterator;
            while (links.next()) {
                var link = links.value;
                var key = getSameNodesLinkKey(link);
                if (key) {
                    self._linksByNodes.push({
                        key: key,
                        link: link,
                        hasRThing: link.labelNodes.count > 0
                    });
                }
            }
        }
        return self._linksByNodes;
    }

    // Returns a key used to group links according to which pair of nodes they connect.
    // The returned key is non-empty for regular links and P links that should be shown currently,
    // so that these will all be routed by the same rules. A null key is returned for any other
    // links, indicating that no grouping is required.
    function getSameNodesLinkKey(link) {
        //        if (self.isRLink(link) || (self.isPLink(link) && map.getTemplates().showPLink(link))) {
        if (self.isRLink(link)) {
            var key = [link.fromNode.toString(), link.toNode.toString()].sort().join('|');
            //console.log('key: ' + key);
            return key;
        } else {
            return null;
        }
    }

    // We use this to distinguish an A-B link from a B-A link (based on fromNode and toNode, which
    // is independent of the arrowhead settings) when setting curviness, because setting curviness = 25
    // on an A-B link is the same as curviness = -25 on a B-A link.
    function getLinkOrientation(link) {
        if (link.fromNode && link.toNode && link.fromNode.toString() < link.toNode.toString()) {
            return 1;
        } else {
            return -1;
        }
    }

    // -------------- link tests ---------------

    this.isRLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category === undefined && link.fromNode && link.toNode;
    };

    this.isDLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category == 'D';
    };

    this.isPLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category == 'P';
    };

    this.isGroup = function (obj) {
        return obj instanceof go.Group;
    };
};

//console.log('Layouts, PartCreated');
// setNewPartLocationData(e);

// stacked?

},{}],26:[function(require,module,exports){
'use strict';

var NodeLabelDraggingTool = require('./extensions/NodeLabelDraggingTool.js');

// functions for creating and manipulating the map (i.e. Diagram)

SandbankEditor.Map = function ($scope, $http, $resource, $timeout, $modal, $log) {

    var self = this;

    // ----------- constants ---------------
    this.LEFT = 'left';
    this.RIGHT = 'right';

    // ------------ instance vars ----------

    var _diagram = null;

    // components
    var _analytics = null;
    var _attachments = null;
    var _autosave = null;
    var _generator = null;
    //var _history = null;
    var _layouts = null;
    var _perspectives = null;
    var _presenter = null;
    var _standards = null;
    var _templates = null;
    var _tests = null;
    var _ui = null;

    // ------------ component accessors ----------------

    function getComponents() {
        return [_analytics, _attachments, _autosave, _generator,
        // _history,
        _layouts, _perspectives, _presenter, _standards, _templates, _tests, _ui];
    }

    this.getAnalytics = function () {
        return _analytics;
    };
    this.getAttachments = function () {
        return _attachments;
    };
    this.getAutosave = function () {
        return _autosave;
    };
    this.getGenerator = function () {
        return _generator;
    };
    // this.getHistory = function () { return _history; };
    this.getLayouts = function () {
        return _layouts;
    };
    this.getPerspectives = function () {
        return _perspectives;
    };
    this.getPresenter = function () {
        return _presenter;
    };
    this.getStandards = function () {
        return _standards;
    };
    this.getTemplates = function () {
        return _templates;
    };
    this.getTests = function () {
        return _tests;
    };
    this.getUi = function () {
        return _ui;
    };

    // -------------- map init ------------------

    this.init = function () {

        // initialize components
        _analytics = new SandbankEditor.Analytics($scope, $http, self);
        _attachments = new SandbankEditor.Attachments($scope, $http, $resource, self);
        _autosave = new SandbankEditor.Autosave($scope, $http, self);
        _generator = new SandbankEditor.Generator($scope, self);
        // _history = new SandbankEditor.History($scope, $http, self);
        _layouts = new SandbankEditor.Layouts($scope, self);
        _perspectives = new SandbankEditor.Perspectives($scope, self);
        _presenter = new SandbankEditor.Presenter($scope, self);
        _standards = new SandbankEditor.Standards($scope, self);
        _templates = new SandbankEditor.Templates($scope, self);
        _tests = new SandbankEditor.Tests($scope, self);
        _ui = new SandbankEditor.UI($scope, $timeout, $http, $resource, $modal, $log, self);

        // call init for each component, if defined
        _.each(getComponents(), function (component) {
            if (component && component.init) component.init();
        });

        // create diagram
        _diagram = new go.Diagram('diagram');
        _diagram.initialContentAlignment = go.Spot.Center;
        _diagram.initialViewportSpot = go.Spot.Center;
        _diagram.initialDocumentSpot = go.Spot.Center;
        _diagram.hasHorizontalScrollbar = false;
        _diagram.hasVerticalScrollbar = false;
        _diagram.padding = 500;
        _diagram.layout = _layouts.getFreehandDiagramLayout();
        _diagram.toolManager.mouseMoveTools.insertAt(0, new NodeLabelDraggingTool());

        initTools();
        _templates.initTemplates(_diagram); // set up templates, customize temporary link behavior
        addDiagramListeners();

        _templates.addExportFooter();

        // watch for tab changes
        $scope.$watch('currentTab', function (newValue, oldValue) {
            self.currentTabChanged(newValue, oldValue);
        });
    };

    // this is called by a $scope.$watch in init()
    this.currentTabChanged = function (newValue, oldValue) {
        // //console.log('currentTabChanged, newValue: ' + newValue + ', oldValue: ' + oldValue);
        // notify any interested components
        _.each(getComponents(), function (component) {
            if (component && component.currentTabChanged) {
                component.currentTabChanged(newValue, oldValue);
            }
        });

        //$scope.safeApply();
    };

    this.getDiagram = function () {
        return _diagram;
    };

    // misc. tool configuration
    function initTools() {
        // disable clicking on TextBlocks to edit - we will invoke editing in other ways
        _diagram.allowTextEdit = false;

        // select text when activating editor;
        // use shift-enter to create new lines, enter to finish editing (NB: editor has multiline=true)
        var textTool = _diagram.toolManager.textEditingTool;
        textTool.doActivate = function () {
            go.TextEditingTool.prototype.doActivate.call(textTool);
            if (textTool.defaultTextEditor !== null) {
                textTool.defaultTextEditor.select();

                textTool.defaultTextEditor.addEventListener('keydown', function (e) {
                    if (e.which == 13 && !e.shiftKey) {
                        go.TextEditingTool.prototype.acceptText.call(textTool, go.TextEditingTool.LostFocus);
                    }
                });
            }
        };

        // handle delete key on Mac (default behavior only uses fn-Delete to delete from canvas)
        _diagram.commandHandler.doKeyDown = function () {
            var e = _diagram.lastInput;
            var cmd = _diagram.commandHandler;
            if (e.event.which === 8) {
                cmd.deleteSelection();
            } else {
                go.CommandHandler.prototype.doKeyDown.call(cmd); // call base method with no arguments
            }
        };

        // [disable keyboard shortcuts, as these do not do centering on zoom,
        // and can lead to confusion with browser zoom (which gets fired depends on focus)]
        // - turned back on to support pinch/zoom on iPad
        _diagram.allowZoom = true;

        _diagram.toolManager.mouseWheelBehavior = go.ToolManager.WheelZoom;

        // decide what kinds of Parts can be added to a Group or to top-level
        // _diagram.commandHandler.memberValidation = function (grp, node) {
        //     //if (grp instanceof go.Group && node instanceof go.Group) return false;  // cannot add Groups to Groups
        //     return true;
        // };

        // default link attributes
        _diagram.toolManager.linkingTool.archetypeLinkData = {
            type: 'noArrows'
        };

        // allow double-click in background to create a new node
        _diagram.toolManager.clickCreatingTool.archetypeNodeData = getNewThingData();

        // how long mouse must be held stationary before starting a drag-select (instead of a scroll) - default was 175ms
        _diagram.toolManager.dragSelectingTool.delay = 400;
    }

    // ----------- handling of DiagramEvents --------------------

    function addDiagramListeners() {

        // DiagramEvents to be handled here or by a component
        var diagramEvents = ['InitialLayoutCompleted', 'ChangedSelection', 'BackgroundSingleClicked', 'SelectionCopied', 'SelectionMoved', 'SelectionDeleting', 'SelectionDeleted', 'PartCreated', 'PartResized', 'ClipboardChanged', 'ClipboardPasted', 'LinkDrawn', 'LinkRelinked', 'ViewportBoundsChanged'];
        _.each(diagramEvents, function (eventName) {
            _diagram.addDiagramListener(eventName, function (e) {
                broadcastDiagramEvent(eventName, e);
            });
        });

        _diagram.addDiagramListener('BackgroundContextClicked', function (e) {});
    }

    // broadcasts the given DiagramEvent (see apidocs for go.DiagramEvent)
    // to any components that may be interested, including this one.
    function broadcastDiagramEvent(eventName, e) {
        self.handleDiagramEvent(eventName, e);
        _.each(getComponents(), function (component) {
            if (component && component.handleDiagramEvent) component.handleDiagramEvent(eventName, e);
        });
        $scope.safeApply();
    }

    this.handleDiagramEvent = function (eventName, e) {
        //console.log('handleDiagramEvent: ' + eventName);
        if (eventName == 'ChangedSelection') {
            changedSelection(e);
        } else if (eventName == 'SelectionCopied') {
            selectionCopied(e);
        } else if (eventName == 'PartCreated') {
            partCreated(e);
        } else if (eventName == 'BackgroundSingleClicked') {
            _ui.showHelpTip('canvasTip');
        } else if (eventName == 'LinkDrawn') {
            linkDrawn(e);
            setNewLinkDirection(e);
        } else if (eventName == 'LinkRelinked') {
            linkRelinked(e);
        } else if (eventName == 'ClipboardChanged') {
            clipboardChanged(e);
        } else if (eventName == 'ClipboardPasted') {
            clipboardPasted(e);
        }
    };

    // handle zoom to region if applicable
    function changedSelection(e) {
        //console.log('map.changedSelection');
        _diagram.updateAllTargetBindings();
        _ui.maybeZoomToRegion();
        if (self.relationshipsSelected()) {
            _ui.showHelpTip('relationshipTip');
        }
    }

    function partCreated(e) {
        //console.log('Map, PartCreated');
        var group = e.subject;
        if (!(group instanceof go.Group)) {
            return;
        }
        _diagram.model.setDataProperty(group.data, 'layout', _ui.getMapEditorOptions().defaultThingLayout || 'left');
        _layouts.setNewPartLocationData(e);
    }

    // fix link ports when a link is created -
    // the P and R ports both cover the whole node, and the P port is on top of the R port,
    // so both P and R links get the toPort set to P by default.
    function linkDrawn(e) {
        var link = e.subject;
        //console.log('linkDrawn, link: ' + link + ', fromPort: ' + link.fromPortId + ', toPort: ' + link.toPortId);
        if (link.fromPortId == 'P') {
            _diagram.model.startTransaction('change link category');
            _diagram.model.setDataProperty(link.data, 'toPort', 'P');
            _diagram.model.setDataProperty(link.data, 'category', 'P');
            _diagram.model.commitTransaction('change link category');
        }
        // prevent links from R to P
        else if (link.fromPortId == 'R') {
            _diagram.model.startTransaction('change link toPort');
            _diagram.model.setDataProperty(link.data, 'toPort', 'R');
            _diagram.model.commitTransaction('change link toPort');
        }
    }

    // fix link ports when a link is relinked -
    // dragging either end of an R-link to another node will set the corresponding port to P,
    // since P port is on top of R port, so we reset both ports to R if the category is not P.
    function linkRelinked(e) {
        var link = e.subject;
        if (link.data.category === undefined || link.data.category !== 'P') {
            _diagram.model.setDataProperty(link.data, 'fromPort', 'R');
            _diagram.model.setDataProperty(link.data, 'toPort', 'R');
        }
    }

    function setNewLinkDirection(e) {
        var link = e.subject;
        if (link.fromPortId == 'R') {
            _diagram.model.startTransaction('change link direction');
            _diagram.model.setDataProperty(link.data, 'type', _ui.getMapEditorOptions().defaultRelationshipDirection);
            _diagram.commitTransaction('change link direction');
        }
    }

    function clipboardChanged(e) {
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group) {}
        }
    }

    // NB: this is called when parts are copied by control-drag, NOT when the copy button is clicked
    function selectionCopied(e) {
        //console.log('selectionCopied');
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group && part.isTopLevel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('selectionCopied: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                _diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                part.updateTargetBindings('loc');
            }
        }
    }

    function clipboardPasted(e) {
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group && part.isTopLevel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('clipboardPasted: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                _diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                part.updateTargetBindings('loc');
            }
        }
    }

    // computes the bounds of all groups in the diagram - this includes all ideas/things,
    // and excludes nodes, including slides, the slide blocker, and the export footer
    this.computeMapBounds = function () {
        var groups = new go.List(go.Group);
        var nodes = _diagram.nodes;
        while (nodes.next()) {
            if (nodes.value instanceof go.Group) {
                groups.add(nodes.value);
            }
        }
        return _diagram.computePartsBounds(groups).copy(); // return a mutable rect
    };

    // ------------ what is currently selected? ----------------

    // returns true if all selected items are things (i.e. Groups), including r-things
    this.thingsSelected = function () {
        if (_diagram == null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Group)) return false;
        }

        return true;
    };

    // returns true if exactly one thing (Group) is selected
    this.thingSelected = function () {
        return _diagram !== null && _diagram.selection.count == 1 && _diagram.selection.first() instanceof go.Group;
    };

    // if a single group is selected, returns it, otherwise returns null
    this.getUniqueThingSelected = function () {
        if (_diagram !== null && _diagram.selection.count == 1 && _diagram.selection.first() instanceof go.Group) {
            return _diagram.selection.first();
        } else {
            return null;
        }
    };

    this.thingsSelectedAreMembersOf = function (group) {
        if (_diagram === null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Group) || it.value.containingGroup != group) return false;
        }

        return true;
    };

    this.thingsSelectedAreDescendantsOf = function (group) {
        if (_diagram === null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            var ancestors = _layouts.getAncestorGroups(it.value);
            if (_.indexOf(ancestors, group) == -1) return false;
        }

        return true;
    };

    this.thingsSelectedIncludeSlide = function () {
        if (_diagram === null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (it.value.data && it.value.data.category == 'slide') {
                return true;
            }
        }

        return false;
    };

    // returns true if all selected items are relationships (i.e. Links)
    this.relationshipsSelected = function () {
        if (_diagram === null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Link) || !_layouts.isRLink(it.value)) return false;
        }

        return true;
    };

    // returns true if exactly one relationship (Link) is selected
    this.relationshipSelected = function () {
        return _diagram !== null && _diagram.selection.count == 1 && _diagram.selection.first() instanceof go.Link;
    };

    // ------------ load and initialize model -------------

    this.reload = function (data) {
        _diagram.model = go.Model.fromJson(data);
        _diagram.model.addChangedListener(_autosave.modelChanged);
    };

    this.load = function (data) {

        data = data || $scope.mapData.data;
        _diagram.model = go.Model.fromJson(data);
        _ui.setStateData($scope.mapData.state_data);
        _ui.setMapEditorOptions($scope.mapData.editor_options);

        self.checkModel();
        _diagram.updateAllTargetBindings();
        _diagram.undoManager.isEnabled = true;
        _diagram.model.addChangedListener(_autosave.modelChanged);
        _autosave.saveOnModelChanged = true;
        _diagram.isReadOnly = !$scope.canEdit;
        $scope.updateEditStatus($scope.canEdit ? $scope.LAST_UPDATED : $scope.READ_ONLY);
        //_ui.resetZoom();
        self.loadMapExtraData($scope.mapData);

        // if no nodes OR in thinkquery mode, launch generator
        if ($scope.thinkquery || !_diagram.model.nodeDataArray.length) {
            _ui.openTab(_ui.TAB_ID_GENERATOR);
        }
        // if we have slides, play presentation
        else if (!$scope.canEdit && _presenter.getSlideNodeDatas().length) {
            _presenter.playSlide(1);
        }
    };

    this.loadForSandbox = function () {
        _diagram.model = go.Model.fromJson($scope.mapData);
        _ui.setStateData(''); // important! (otherwise corner highlighting breaks)
        _diagram.updateAllTargetBindings();
        _diagram.undoManager.isEnabled = true;
        _ui.resetZoom();
        $scope.canEdit = true;

        // if no nodes OR in thinkquery mode, launch generator
        if ($scope.thinkquery) {
            _ui.openTab(_ui.TAB_ID_GENERATOR);
        }
        // if we have slides, play presentation
        else if (_presenter.getSlideNodeDatas().length) {
            _presenter.playSlide(1);
        }
    };

    // fix any structural problems in the model before displaying it
    this.checkModel = function () {
        // change "isLinkLabel" property to category:"LinkLabel" (change as of goJS 1.3)
        _.each(_diagram.model.nodeDataArray, function (nodeData, index, list) {
            if (nodeData.isLinkLabel) {
                delete nodeData.isLinkLabel;
                nodeData.category = 'LinkLabel';
            }
        });

        // check for the link label (r-thing) for a link being the same as the from or to node
        // - this can cause infinite recursion in thinks like layout.getScale
        _.each(_diagram.model.linkDataArray, function (linkData, index, list) {
            var badLabelKeys = [];
            _.each(linkData.labelKeys, function (key, index2, list2) {
                if (key == linkData.from || key == linkData.to) {
                    //console.log('labelKey same as from or to of link: ' + key);
                    badLabelKeys.push(key);
                }
            });
            linkData.labelKeys = _.difference(linkData.labelKeys, badLabelKeys);
        });
    };

    // loads other data besides the diagram model from the json object returned by maps/show.json
    // - this includes points, badges, versions, and map analytics
    // NB: points and badges are set at page load time in layouts/user and users/badges, but
    // we also need to be able to update them here after an autosave

    // TODO: is this still all needed with the newer userProfile stuff?
    this.loadMapExtraData = function (mapData) {
        $scope.safeApply(function () {
            //console.log('map.loadMapExtraData, mapData: ' + mapData);
            $scope.mapUserTags = mapData.metadata.userTags; // TODO: is this used anywhere?

            //$scope.map.getHistory().versionList = mapData.versions;
            $scope.map.getAnalytics().mapAnalytics = mapData.analytics;
        });
    };

    // loads model data for an individual version and displays it
    // NB: this also disables autosave; load() must be called to re-enable it
    this.loadVersion = function (id) {
        $http.get('/map_versions/' + id).then(function (response) {
            if (response.status === 200) {
                try {
                    //console.log('loaded map version with ID: ' + id);
                    _diagram.model = go.Model.fromJson(response.data);
                    _diagram.updateAllTargetBindings();
                    _diagram.undoManager.isEnabled = false;
                    _autosave.saveOnModelChanged = false;
                    _diagram.layoutDiagram(true);
                    _diagram.isReadOnly = true;
                } catch (e) {
                    alert('Could not load MetaMap version');
                    //console.error(e.message);
                }
            }
        });
    };

    // set whether editing capability is temporarily suspended -
    // this is distinct from the global $scope.canEdit setting,
    // which if false prevents editing at all times
    this.setEditingBlocked = function (val) {
        if ($scope.canEdit) {
            _diagram.isReadOnly = val;
        }
    };

    // ------------- creating things in the model -------------------

    // default properties for all new Things (groups) - note that these can be overridden if needed
    function getNewThingData() {
        return {
            text: 'Idea',
            isGroup: true,
            layout: _ui.getMapEditorOptions().defaultThingLayout || 'left',
            sExpanded: true,
            pExpanded: true
        };
    }

    this.createSister = function (thing) {
        if (!$scope.canEdit) {
            return null;
        }

        var newLoc = _layouts.getNewSisterLocation(thing);
        var data = _.extend(getNewThingData(), {
            group: thing.data.group,
            text: 'Idea',
            loc: go.Point.stringify(newLoc)
        });
        _diagram.model.addNodeData(data);
        var newSister = _diagram.findNodeForData(data);

        // put new sister right after thing (not as the last sibling)
        if (thing.containingGroup) {
            self.moveSiblingNextTo(newSister, thing, self.RIGHT);
        }
        return newSister;
    };

    this.createRToSister = function (thing) {
        if (!$scope.canEdit) {
            return null;
        }

        var thingKey = _diagram.model.getKeyForNodeData(thing.data);
        //console.log('thingKey: ' + thingKey);
        var newLoc = _layouts.getNewSisterLocation(thing, true); // withR = true
        var data = _.extend(getNewThingData(), {
            group: thing.data.group,
            text: 'Idea',
            loc: go.Point.stringify(newLoc)
        });
        _diagram.model.addNodeData(data);
        var newSister = _diagram.findNodeForData(data);
        var groupKey = _diagram.model.getKeyForNodeData(data);

        // create link
        var linkData = {
            from: thingKey,
            to: groupKey,
            type: 'to',
            fromPort: 'R',
            toPort: 'R'
        };
        _diagram.model.addLinkData(linkData);

        // put new sister right after thing (not as the last sibling)
        if (thing.containingGroup) {
            self.moveSiblingNextTo(newSister, thing, self.RIGHT);
        }
        return newSister;
    };

    this.createChild = function (thing, name, x, y) {
        if (!$scope.canEdit) {
            return null;
        }

        var newLoc = _layouts.getNewChildLocation2(thing);
        if (x || y) {
            newLoc = new go.Point(x, y);
        }
        var data = _.extend(getNewThingData(), {
            group: thing.data.key,
            text: name || 'Part',
            loc: go.Point.stringify(newLoc)
        });
        _diagram.model.addNodeData(data);
        _layouts.setDescendantLayouts(thing, thing.data.layout);
        var child = _diagram.findNodeForData(data);
        child.updateTargetBindings();
        return child;
    };

    this.createRThing = function (link, name) {
        if (!$scope.canEdit) {
            return null;
        }

        // //console.log('createRThing, link: ' + link + ', name: ' + name);
        // don't allow multiple R-things
        if (link.isLabeledLink) {
            // //console.log('cannot create RThing, link is already labeled');
            return;
        }

        var data = _.extend(getNewThingData(), {
            text: name || 'Relationship Idea',
            //isLinkLabel: true,     // deprecated as of goJS 1.3
            category: 'LinkLabel', // new as of goJS 1.3
            loc: '0 0'
        });
        _diagram.model.startTransaction('create R Thing');
        _diagram.model.addNodeData(data);
        var key = _diagram.model.getKeyForNodeData(data);
        var node = _diagram.findPartForKey(key);
        node.labeledLink = link;
        _diagram.model.commitTransaction('create R Thing');
        _diagram.updateAllTargetBindings();

        return _diagram.findNodeForData(data);
    };

    // ---------- creating things with specified names/locations - for use by generator and tests ------------

    this.createThing = function (x, y, name, layout) {
        group = _diagram.toolManager.clickCreatingTool.insertPart(new go.Point(x, y));
        _diagram.model.setDataProperty(group.data, 'text', name);
        if (layout) {
            _diagram.model.setDataProperty(group.data, 'layout', layout);
        }
        return group;
    };

    this.createRLinkWithRThing = function (thing1, thing2, name) {
        var link = self.createRLink(thing1, thing2);
        return self.createRThing(link, name);
    };

    // returns the linkData object for the new link
    this.createRLink = function (thing1, thing2) {
        _diagram.model.startTransaction('add link');
        var data = {
            type: 'noArrows',
            from: thing1.data.key,
            to: thing2.data.key,
            fromPort: 'R',
            toPort: 'R'
        };
        _diagram.model.addLinkData(data);
        _diagram.model.commitTransaction('add link');
        return _diagram.findLinkForData(data);
    };

    // returns the linkData object for the new link
    this.createPLink = function (thing1, thing2) {
        _diagram.model.startTransaction('add link');
        var data = {
            type: 'noArrows',
            from: thing1.data.key,
            to: thing2.data.key,
            fromPort: 'P',
            toPort: 'P',
            category: 'P'
        };
        _diagram.model.addLinkData(data);
        _diagram.model.commitTransaction('add link');
        _diagram.model.setDataProperty(thing1.data, 'pExpanded', true);
        return _diagram.findLinkForData(data);
    };

    // ------------- moving things in the model structure -------------------

    // returns a go.List of the items in the current selection that are Groups
    function getSelectedGroups() {
        var it = _diagram.selection.iterator;
        var members = new go.List();
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group) {
                members.add(part);
            }
        }
        return members;
    }

    // drag to S
    this.addSelectedThingsAsChildrenOf = function (group) {
        var newMembers = getSelectedGroups();

        // check existing members so we can calculate layout
        var oldMemberBounds = self.safeRect(_diagram.computePartsBounds(group.memberParts));

        // NB: this is subject to validation by CommandHandler.isValidMember,
        // so for example, members of members of newMembers will not be added as members
        group.addMembers(newMembers);

        _layouts.layoutNewMembersRelativeTo(newMembers, group, oldMemberBounds);

        _diagram.clearSelection();
    };

    // drag to D
    this.addSelectedThingsAsSistersOf = function (group) {
        var oldMembers = getSelectedGroups();

        // if dragging to top level, move dragged things so they don't overlap the former parent
        if (!group.containingGroup) {
            // check existing members so we can calculate layout
            var oldMembersBounds = _diagram.computePartsBounds(oldMembers);
            // NB: oldMembers can be on multiple levels, so not clear which level to use for rescaling old members after drag
            var oldMembersLevel = _layouts.computeLevel(oldMembers.first());

            var it = oldMembers.iterator;
            while (it.next()) {
                var member = it.value;
                member.containingGroup = null;
            }
            _layouts.layoutOldMembersOutsideOf(oldMembers, group, oldMembersBounds, oldMembersLevel);
        }
        // if not dragging to top level, place dragged things after former parent in outline
        else {
            var it2 = oldMembers.iterator;
            while (it2.next()) {
                var member2 = it2.value;
                member2.containingGroup = group.containingGroup;
                self.moveSiblingNextTo(member2, group, self.RIGHT);
            }
        }
        _diagram.clearSelection();
    };

    // for dragging parts within a system - side is LEFT or RIGHT (i.e. above or below, resp. in inventory layout)
    this.addSelectedThingAsOrderedSisterOf = function (group, side) {
        //console.log('addSelectedThingAsOrderedSisterOf, side: ' + side);
        var thing = self.getUniqueThingSelected();
        if (!thing) {
            return;
        }
        self.moveSiblingNextTo(thing, group, side);
    };

    // moves the first thing (sibling) to be after the second thing (group)
    // in the part ordering - they are assumed to be siblings
    // side is LEFT or RIGHT
    this.moveSiblingNextTo = function (sibling, group, side) {
        var parent = group.containingGroup;
        //console.log('moveSiblingNextTo, sibling: ' + sibling + ', group: ' + group + ', parent: ' + parent + ', sibling.containingGroup: ' + sibling.containingGroup);

        if (!parent || sibling.containingGroup != parent) {}

        // create new member order
        var memberOrder = new go.List();
        var it = parent.memberParts;
        var order = 0;
        while (it.next()) {
            var member = it.value;
            if (member instanceof go.Group) {
                // we're at the target group, so add the moved thing either before or after it
                if (member == group) {
                    if (side == self.LEFT) {
                        memberOrder.add(sibling);
                        _diagram.model.setDataProperty(sibling.data, 'order', order++);
                        memberOrder.add(member);
                        _diagram.model.setDataProperty(member.data, 'order', order++);
                    } else {
                        memberOrder.add(member);
                        _diagram.model.setDataProperty(member.data, 'order', order++);
                        memberOrder.add(sibling);
                        _diagram.model.setDataProperty(sibling.data, 'order', order++);
                    }
                }
                // don't re-add the moved thing, it was added above
                else if (member != sibling) {
                    memberOrder.add(member);
                    _diagram.model.setDataProperty(member.data, 'order', order++);
                }
            }
        }

        // clear existing members
        var newIt = memberOrder.iterator;
        while (newIt.next()) {
            var member2 = newIt.value;
            member2.containingGroup = null;
        }

        // add new members
        newIt.reset();
        while (newIt.next()) {
            var member3 = newIt.value;
            member3.containingGroup = parent;
        }
    };

    this.addThingAsRThing = function (thing, link) {
        thing.labeledLink = link;
        thing.updateTargetBindings();
    };

    // D corner handler (single click)
    this.toggleDFlag = function (thing) {
        _diagram.model.setDataProperty(thing.data, 'dflag', !thing.data.dflag);
        thing.updateTargetBindings();
    };

    // S corner handler (single click)
    this.toggleSExpansion = function (thing) {
        var isExpanded = !(thing.data && !thing.data.sExpanded); // expand by default if property not present
        _diagram.model.setDataProperty(thing.data, 'sExpanded', !isExpanded);
        thing.updateTargetBindings();
        _ui.showCornerTip(thing, 'S');
    };

    // P corner handler (single click)
    this.togglePExpansion = function (thing) {
        _diagram.model.setDataProperty(thing.data, 'pExpanded', !self.pIsExpanded(thing));
        thing.updateTargetBindings();
        _ui.showCornerTip(thing, 'P');
    };

    this.pIsExpanded = function (group) {
        return group.data && group.data.pExpanded === true;
    };

    // ---------------------- undo/redo --------------------

    this.canUndo = function () {
        return _diagram.commandHandler.canUndo();
    };

    this.undo = function () {
        _diagram.commandHandler.undo();
        _diagram.layoutDiagram(true);
    };

    this.canRedo = function () {
        return _diagram.commandHandler.canRedo();
    };

    this.redo = function () {
        _diagram.commandHandler.redo();
        _diagram.layoutDiagram(true);
    };

    this.refresh = function () {
        _diagram.updateAllTargetBindings();
        _diagram.layoutDiagram(true);
    };

    // ------------------- utility ----------------------

    // check for a rect with NaN X/Y/W/H coords, so we can do stuff with it such as unionRect
    // (NaN,NaN,0,0) => (0,0,0,0)
    this.safeRect = function (rect) {
        if (isNaN(rect.x)) {
            rect.x = 0;
        }
        if (isNaN(rect.y)) {
            rect.y = 0;
        }
        if (isNaN(rect.width)) {
            rect.width = 0;
        }
        if (isNaN(rect.height)) {
            rect.height = 0;
        }
        return rect;
    };

    // ------------------- debug map model ----------------------

    this.loadModel = function () {
        $('#map-model-debug').val(_diagram.model.toJson());
    };

    this.saveModel = function () {
        _diagram.model = go.Model.fromJson($('#map-model-debug').val());
        _diagram.updateAllTargetBindings();
        _diagram.model.addChangedListener(_autosave.modelChanged);
        _autosave.saveOnModelChanged = true;
    };
};

// TODO: turn off in production
//console.log('diagram model:' + _diagram.model.toJson());

//console.log('clipboardChanged: part ' + part + ', mainpanel scale: ' + part.findObject('mainpanel').scale);

//console.error('Cannot do moveSiblingNextTo on non-siblings or top-level groups');

},{"./extensions/NodeLabelDraggingTool.js":23}],27:[function(require,module,exports){
// functions for editing perspectives AND distinctions, which work similarly in the UI

'use strict';

SandbankEditor.Perspectives = function ($scope, map) {

    var self = this;

    // temporary state flag for adding/removing P/D selections programmatically
    var selectingLinkedThings = false;

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        //console.log('Perspectives, currentTabChanged');
        if (newValue == map.getUi().TAB_ID_PERSPECTIVES) {
            // opening perspectives
            setPorDThing('P');
            map.setEditingBlocked(true);
        } else if (oldValue == map.getUi().TAB_ID_PERSPECTIVES) {
            // closing perspectives
            saveLinks('P');
            map.setEditingBlocked(false);
        } else if (newValue == map.getUi().TAB_ID_DISTINCTIONS) {
            // opening distinctions
            setPorDThing('D');
            map.setEditingBlocked(true);
        } else if (oldValue == map.getUi().TAB_ID_DISTINCTIONS) {
            // closing distinctions
            saveLinks('D');
            map.setEditingBlocked(false);
        }
    };

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.getUi().currentTabIs(map.getUi().TAB_ID_PERSPECTIVES) || map.getUi().currentTabIs(map.getUi().TAB_ID_DISTINCTIONS)) {
                updateLinks();
            }
        }
    };

    // ---------- P/D Editor state

    this.isInPOrDEditorMode = function () {
        return map.getUi().state.perspectivePointKey !== null || map.getUi().state.distinctionThingKey !== null;
    };

    this.isInPEditorMode = function () {
        return map.getUi().state.perspectivePointKey !== null;
    };

    this.isInDEditorMode = function () {
        return map.getUi().state.distinctionThingKey !== null;
    };

    this.isPEditorPoint = function (group) {
        return map.getUi().state.perspectivePointKey == group.data.key;
    };

    this.isDEditorThing = function (group) {
        return map.getUi().state.distinctionThingKey == group.data.key;
    };

    // NB: this is called via map.getCornerFunction, so we get the extra corner arg, which we can ignore
    this.setPEditorPoint = function (thing, corner) {
        if ($scope.canEdit) {
            map.getUi().openTab(map.getUi().TAB_ID_PERSPECTIVES);
        }
    };

    this.setDEditorThing = function (thing) {
        if ($scope.canEdit) {
            // NB: need to select only this thing, since this is invoked
            // by a control-click, which will not automatically select just it
            map.getDiagram().clearSelection();
            thing.isSelected = true;
            map.getUi().openTab(map.getUi().TAB_ID_DISTINCTIONS);
        }
    };

    // -----------------------

    this.isPerspectivePoint = function (group) {
        var links = group.findLinksOutOf();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    };

    this.isSelectedPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && map.pIsExpanded(link.fromNode) && link.fromNode.isSelected) {
                return true;
            }
        }
        return false;
    };

    this.isToggledPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && map.pIsExpanded(link.fromNode)) {
                return true;
            }
        }
        return false;
    };

    this.isMouseOverPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && link.fromNode == map.getUi().mouseOverGroup) {
                return true;
            }
        }
        return false;
    };

    this.getPerspectiveViewWeight = function (group) {
        var mode = map.getUi().getMapEditorOptions().perspectiveMode;
        if (mode == 'spotlight' || mode == 'both') {
            return (self.isSelectedPerspectiveView(group) ? 1 : 0) + (self.isToggledPerspectiveView(group) ? 1 : 0) + (self.isMouseOverPerspectiveView(group) ? 1 : 0);
        } else {
            return 0;
        }
    };

    // -----------------------

    // category is "P" or "D" (perspectives or distinctions)
    function setPorDThing(category) {
        // if already set, must do save perspectives or save distinctions
        if (map.getUi().state.perspectivePointKey || map.getUi().state.distinctionThingKey) return;

        var thing = map.getDiagram().selection.first();
        //console.log('setPorDThing: ' + thing);
        if (thing instanceof go.Group) {
            var key = thing.data.key;
            if (category == 'P') {
                map.getUi().state.perspectivePointKey = key;
            } else if (category == 'D') {
                map.getUi().state.distinctionThingKey = key;
            }

            // select views/others
            selectLinkedThingsFor(thing, category);
        }
    }

    // this is called when the selection changes - if the thing is set,
    // adds/removes D/P links according to what is selected; otherwise
    // just shows/hides D/P links for the selected thing(s)
    function updateLinks() {
        if (selectingLinkedThings) // selection is being changed programmatically, so don't respond
            return;

        var pOrDThing = null;
        var category = null;
        if (map.getUi().state.perspectivePointKey) {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.perspectivePointKey);
            category = 'P';
        } else if (map.getUi().state.distinctionThingKey) {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.distinctionThingKey);
            category = 'D';
        }

        var addLinksTo = new go.List();
        var removeLinks = new go.List();

        // iterate through all things
        if (category) {
            var layers = map.getDiagram().layers;
            while (layers.next()) {
                var layer = layers.value;
                var parts = layer.parts;
                while (parts.next()) {
                    var part = parts.value;
                    if (part instanceof go.Group) {
                        // calculate links to add/remove based on selection
                        if (pOrDThing) {
                            var links = part.findLinksInto();
                            var existingLink = null;
                            while (links.next()) {
                                var link = links.value;
                                if (link.fromNode.data.key == pOrDThing.data.key && link.data.category == category) existingLink = link;
                            }

                            // decide whether to add or remove a link to the part, depending on whether
                            // it is selected and whether a link exists
                            if (!existingLink && part.isSelected) addLinksTo.add(part);else if (existingLink && !part.isSelected) removeLinks.add(existingLink);
                        }
                    }
                }
            }
        }

        // do the adding/removing of links
        var adds = addLinksTo.iterator;
        while (adds.next()) {
            map.getDiagram().model.startTransaction('add link');
            var to = adds.value;
            //console.log('updateLinks: adding link from ' + pOrDThing + ' to ' + to);
            if (category == 'D' && pOrDThing.data.key == to.data.key) {
                pOrDThing.isSelected = false;
                alert('You can\'t distinguish a thing from itself!');
                continue;
            }
            map.getDiagram().model.addLinkData({
                from: pOrDThing.data.key,
                to: to.data.key,
                fromPort: category,
                toPort: category,
                category: category
            });
            map.getDiagram().model.commitTransaction('add link');
        }
        var removes = removeLinks.iterator;
        while (removes.next()) {
            var remove = removes.value;
            //console.log('updateLinks: removing link from ' + remove.fromNode + ' to ' + remove.toNode);
            map.getDiagram().model.startTransaction('remove link');
            map.getDiagram().remove(remove);
            map.getDiagram().model.removeLinkData(remove.data);
            map.getDiagram().model.commitTransaction('remove link');
        }

        // show links
        map.getDiagram().updateAllTargetBindings();
    }

    function saveLinks(category) {
        var pOrDThing = null;
        if (category == 'P') {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.perspectivePointKey);
            map.getUi().state.perspectivePointKey = null;
        } else if (category == 'D') {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.distinctionThingKey);
            map.getUi().state.distinctionThingKey = null;
        }

        map.getDiagram().clearSelection();
        map.getDiagram().updateAllTargetBindings();
    }

    function selectLinkedThingsFor(group, category) {
        selectingLinkedThings = true;
        map.getDiagram().clearSelection();

        var links = group.findLinksOutOf();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == category) link.toNode.isSelected = true;
        }

        selectingLinkedThings = false;
    }
};

},{}],28:[function(require,module,exports){
// functions for the presenter/slides

'use strict';

SandbankEditor.Presenter = function ($scope, map) {

    var self = this;

    // constants
    this.SLIDE_BLOCKER_WIDTH = 1000;
    this.SLIDE_BLOCKER_COLOR = '#fff';
    this.SLIDE_BLOCKER_OPACITY = 0.9;

    // state vars
    this.currentSlideIndex = null;
    this.isPresenting = false;
    this.showTOC = false;
    this.isCreatingThumbnail = false;

    // mask applied around slide region when presenting
    this.slideBlocker = null;

    this.diagramAspectRatio = null;

    this.init = function () {};

    this.autosave = function () {
        map.getAutosave().save('edit_presenter');
    };

    // ---------- editing functions for different slide types -------------

    // NB: hasLinks can have values false, 1, or true (1 means only a single link)
    this.slideTypes = [{
        name: 'TITLE_BODY', label: 'Title and Body',
        hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: false, hasMapSummary: false, hasLinks: false
    }, {
        name: 'TITLE_BODY_MAP', label: 'Title, Body and MetaMap',
        hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
    }, {
        name: 'ACTIVITY_MAP', label: 'Lesson Activity and MetaMap',
        hasTitle: true, hasNotes: true, hasChecks: true, hasMapRegion: true, hasMapSummary: false, hasLinks: true
    }, {
        name: 'MAP_ONLY', label: 'MetaMap only',
        hasTitle: true, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
    }, {
        name: 'MAP_SUMMARY', label: 'MetaMap Summary',
        hasTitle: false, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: true, hasLinks: false
    }];

    // ------------------ link/attachment types -----------------------

    this.linkTypes = [{ name: '', label: '-- Select attachment type --' }, { name: 'WEB', label: 'Web Page' }, { name: 'PDF', label: 'PDF' }, { name: 'DOC', label: 'Document' }, { name: 'SPREADSHEET', label: 'Spreadsheet' }, { name: 'PRESENTATION', label: 'Presentation' }, { name: 'METAMAP', label: 'MetaMap' }, { name: 'IMAGE', label: 'Image' }, { name: 'AUDIO', label: 'Audio' }, { name: 'VIDEO', label: 'Video' }, { name: 'SURVEY', label: 'Survey' }, { name: 'WORKSHEET', label: 'Worksheet' }];

    // ------------ list of all things in the map, for map summary slides ---------------------

    this.ideaList = '';

    // only call this occasionally, as they won't be editing the map while presenter is open
    function updateIdeaList() {
        var nodes = map.getDiagram().nodes;
        var list = [];
        while (nodes.next()) {
            if (nodes.value instanceof go.Group) {
                list.push(nodes.value.data.text);
            }
        }
        list.sort();

        // filter out placeholder names - see map.js:getNewThingData, createSister, etc.
        list = _.difference(_.uniq(list, true), map.getGenerator().getPlaceholderIdeaNames(), ['New Idea', 'New Distinguished Idea', 'New Related Idea', 'New Relationship Idea', 'New Part Idea', 'Idea', 'Part', 'Relationship Idea'] // newer simplified names
        );

        self.ideaList = list.join(', ');
    }

    this.summaryAnalytics = [{ name: 'COUNT_THINGS', singularLabel: 'Distinction', pluralLabel: 'Distinctions' }, { name: 'COUNT_SYSTEMS', singularLabel: 'System', pluralLabel: 'Systems' }, { name: 'COUNT_RELATIONSHIPS', singularLabel: 'Relationship', pluralLabel: 'Relationships' }, { name: 'COUNT_PERSPECTIVES', singularLabel: 'Perspective', pluralLabel: 'Perspectives' }, { name: 'COUNT_RTHINGS', singularLabel: 'Relationship Idea', pluralLabel: 'Relationship Ideas' }, { name: 'COUNT_SYSTEM_RTHINGS', singularLabel: 'Relationship System', pluralLabel: 'Relationship Systems' }, { name: 'COUNT_SYSTEM_PERSPECTIVES', singularLabel: 'Perspective System', pluralLabel: 'Perspective Systems' }, { name: 'COUNT_DISTINCTIONS', singularLabel: 'Advanced Distinction', pluralLabel: 'Advanced Distinctions' }];

    this.addCheck = function (nodeData) {
        nodeData.checks.push({ text: '' });
        self.autosave();
    };

    this.deleteCheck = function (check, nodeData) {
        var i = _.indexOf(nodeData.checks, check);
        nodeData.checks.splice(i, 1);
        self.autosave();
    };

    this.addLink = function (nodeData) {
        nodeData.links.push({ title: '', url: '', type: '' });
        self.autosave();
    };

    this.deleteLink = function (link, nodeData) {
        var i = _.indexOf(nodeData.links, link);
        nodeData.links.splice(i, 1);
        self.autosave();
    };

    this.toggleTOC = function () {
        $scope.safeApply(function () {
            if (self.isPresenting) {
                self.showTOC = !self.showTOC;
            }
        });
    };

    // NB: can't create this in init as the diagram doesn't exist yet...
    function maybeInitSlideBlocker() {
        if (!self.slideBlocker) {
            var mk = go.GraphObject.make;
            self.slideBlocker = mk(go.Node, go.Panel.Auto, {
                layerName: 'Tool',
                opacity: self.SLIDE_BLOCKER_OPACITY
            }, mk(go.Shape, 'Rectangle', {
                fill: null,
                stroke: self.SLIDE_BLOCKER_COLOR,
                strokeWidth: 1000
            }));
            map.getDiagram().add(self.slideBlocker);
        }
    }

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (oldValue == map.getUi().TAB_ID_PRESENTER) {
            // closing tab
            self.stopPresenting();
        } else if (newValue == map.getUi().TAB_ID_PRESENTER) {
            // opening tab
            // show slides (see layouts.slideTemplate, binding of visible attr)
            self.diagramAspectRatio = $('#diagram').width() / $('#diagram').height();
            //console.log('diagramAspectRatio: ' + self.diagramAspectRatio);

            $scope.map.getDiagram().updateAllTargetBindings();
            updateIdeaList();
            if (!self.currentSlideIndex && self.getSlideNodeDatas().length > 0) {
                self.currentSlideIndex = 1;
            }
            self.slideThumbnailSelected(1);
        }
    };

    this.handleDiagramEvent = function (eventName, e) {
        if (!map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER)) {
            return;
        }

        if (eventName == 'SelectionDeleting') {
            var selection = e.subject;
            if (selection.count == 1) {
                var thing = selection.first();
                if (thing instanceof go.Node && thing.data.category == 'slide') {
                    if (!confirm('Delete this slide from the presentation?')) {
                        e.cancel = true;
                    }
                }
            }
        } else if (eventName == 'SelectionDeleted') {
            // if slide is deleted from canvas rather than by thumbnail x button, need to update indexes
            compactSlideIndexes();
        } else if (eventName == 'SelectionMoved' || eventName == 'PartResized') {
            // clear thumbnail cache
            thumbnailCache = [];
        } else if (eventName == 'ViewportBoundsChanged') {}
    };

    this.windowResized = _.debounce(function () {
        self.slideThumbnailSelected(self.currentSlideIndex);
    }, 1000);

    this.showSidebar = function () {
        return map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) && (!self.isPresenting || self.showTOC);
    };

    this.disableMapToolbarButtons = function () {
        return !map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) || self.isPresenting || !self.getCurrentSlideType().hasMapRegion;
    };

    // returns an array of node data objects (not the slide nodes themselves)
    this.getSlideNodeDatas = function () {
        var diagram = map.getDiagram();
        var nodes = diagram.model.nodeDataArray;
        var nodeDatas = _.filter(nodes, function (node) {
            return node.category == 'slide';
        });
        nodeDatas = _.sortBy(nodeDatas, function (nodeData) {
            return nodeData.index;
        });
        //console.log('getSlideNodeDatas, indexes: ' + _.pluck(slidesData, 'index'));
        return nodeDatas;
    };

    this.getSlideCount = function () {
        return self.getSlideNodeDatas().length;
    };

    this.getActivitySlideCount = function () {
        return _.where(self.getSlideNodeDatas(), { type: 'ACTIVITY_MAP' }).length;
    };

    this.getSlideType = function (typeName) {
        return _.findWhere(self.slideTypes, { name: typeName });
    };

    this.getCurrentSlideType = function () {
        var slide = findSlideByIndex(self.currentSlideIndex);
        if (slide) {
            return _.findWhere(self.slideTypes, { name: slide.data.type });
        } else {
            return {};
        }
    };

    function findSlideByIndex(index) {
        var diagram = map.getDiagram();
        var slideData = _.find(self.getSlideNodeDatas(), function (slideData) {
            return slideData.index == index;
        });
        if (slideData !== undefined) {
            return diagram.findNodeForKey(slideData.key);
        } else {
            return undefined;
        }
    }

    // increment is -1 or +1
    this.moveSlide = function (index, increment) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            var neighbor = findSlideByIndex(index + increment);
            if (slide && neighbor) {
                //console.log('moveSlide: swapping ' + slide.data.key + ' with ' + neighbor.data.key);
                diagram.startTransaction('move slide');
                diagram.model.setDataProperty(slide.data, 'index', slide.data.index + increment);
                diagram.model.setDataProperty(neighbor.data, 'index', neighbor.data.index - increment);
                diagram.commitTransaction('move slide');
                thumbnailCache = [];
            }
        });
    };

    function compactSlideIndexes() {
        $scope.safeApply(function () {
            //console.log('compactSlideIndexes');
            var slidesData = self.getSlideNodeDatas();
            var diagram = map.getDiagram();
            var newIndex = 1;
            diagram.startTransaction('compact slide indexes');
            _.each(slidesData, function (slideData) {
                diagram.model.setDataProperty(slideData, 'index', newIndex);
                //console.log('compactSlideIndexes: set index for ' + slideData.key + ' to ' + newIndex);
                newIndex++;
            });
            diagram.commitTransaction('compact slide indexes');
        });
    }

    function getNewSlideKey() {
        var diagram = map.getDiagram();
        var i = 1;
        while (diagram.model.findNodeDataForKey('slide-' + i)) {
            i++;
        }
        return 'slide-' + i;
    }

    // NB: indexes (and keys?) must be 1-based, otherwise first slide gets screwed up
    // (somewhere the index shows up as '' instead of 0)
    function getNewSlideIndex() {
        var slides = self.getSlideNodeDatas();
        return slides.length + 1;
    }

    this.addSlide = function (typeName) {
        $scope.safeApply(function () {
            //console.log('addSlide: ' + typeName);
            var diagram = map.getDiagram();

            var db = map.computeMapBounds();
            db.inflate(db.width / 20, db.height / 10);
            var newLoc = db.x + ' ' + db.y;
            var newIndex = getNewSlideIndex();

            var slideType = _.findWhere(self.slideTypes, { name: typeName });

            diagram.startTransaction('add slide');
            diagram.model.addNodeData({
                key: getNewSlideKey(),
                category: 'slide',
                index: newIndex,
                isGroup: false,
                width: db.width,
                height: db.height,
                loc: newLoc,
                level: 0,
                children: 0,
                type: typeName,
                title: '',
                notes: '',
                checks: [],
                hasRegion: slideType.hasMapRegion,
                isSummary: slideType.hasMapSummary,
                links: []
            });
            diagram.commitTransaction('add slide');
            thumbnailCache = [];

            self.slideThumbnailSelected(newIndex); // trigger display of edit form, zoom to map region if applicable
        });
    };

    this.duplicateSlide = function (index) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var newIndex = getNewSlideIndex();
            var slide = findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction('duplicate slide');

                // bump up indexes on subsequent slides to make room for new slide after current one
                _.each(self.getSlideNodeDatas(), function (slideData) {
                    if (slideData.index > index) {
                        diagram.model.setDataProperty(slideData, 'index', slideData.index + 1);
                    }
                });

                // NB: creating a new nodeData object here rather than copying and modifying, to avoid copying $$hashKey (??)
                diagram.model.addNodeData({
                    key: getNewSlideKey(),
                    category: 'slide',
                    index: index + 1,
                    isGroup: false,
                    width: slide.data.width,
                    height: slide.data.height,
                    loc: slide.data.loc,
                    level: 0,
                    children: 0,
                    type: slide.data.type,
                    title: slide.data.title + ' (Copy)',
                    notes: slide.data.notes,
                    checks: slide.data.checks, // clone?
                    hasRegion: slide.data.hasRegion,
                    isSummary: slide.data.isSummary,
                    links: slide.data.links // clone?
                });
                diagram.commitTransaction('duplicate slide');
                thumbnailCache = [];
            }
        });
    };

    this.removeSlide = function (index) {
        $scope.safeApply(function () {
            //console.log('removeSlide: ' + index);
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction('remove slide');
                diagram.model.removeNodeData(slide.data);
                diagram.commitTransaction('remove slide');
            }
            self.currentSlideIndex = null;
            thumbnailCache = [];
            compactSlideIndexes();
        });
    };

    var thumbnailCache = [];

    this.getSlideThumbnail = function (index) {
        return thumbnailCache[index];
    };

    this.createSlideThumbnails = function () {
        _.each(self.getSlideNodeDatas(), function (nd) {
            self.createSlideThumbnail(nd.index);
        });
    };

    this.createSlideThumbnail = function (index) {
        //console.log('createSlideThumbnail');

        var thumbWidth = 1000;
        var thumbHeight = 600;
        var diagram = map.getDiagram();

        var slide = findSlideByIndex(index);
        if (!slide) {
            return '';
        } else if (!slide.data.hasRegion && !slide.data.isSummary) {
            return '';
        } else {
            var db = diagram.documentBounds;
            var sb;
            if (slide.data.isSummary) {
                // for a summary slide we shoot the whole map
                sb = map.safeRect(map.computeMapBounds());
            } else {
                // otherwise just shoot the slide region
                sb = slide.part.actualBounds;
            }

            var imagePosition = new go.Point(sb.x, sb.y);
            //console.log('getSlideThumbnail, slide bounds: ' + sb + ', document bounds: ' + db + ', imagePosition: ' + imagePosition);

            var wScale = thumbWidth / sb.width;
            var hScale = thumbHeight / sb.height;
            var thumbScale = Math.min(wScale, hScale);
            //console.log('scale: ' + wScale + ',' + hScale);

            var w = thumbScale * sb.width;
            var h = thumbScale * sb.height;
            //console.log('thumbnail w/h: ' + w + ',' + h);

            // hide slides temporarily while creating thumbnail
            self.isCreatingThumbnail = true;
            diagram.updateAllTargetBindings();

            diagram.scale = thumbScale;

            var imgData = diagram.makeImageData({
                size: new go.Size(w, h),
                position: imagePosition,
                scale: thumbScale
            });

            self.isCreatingThumbnail = false;
            diagram.updateAllTargetBindings();

            thumbnailCache[index] = imgData;

            return imgData;
        }
    };

    // gets a thumbnail of the whole map, for saving (see autosave.js)
    this.getMapThumbnail = function () {

        var diagram = map.getDiagram();
        var sb = map.safeRect(map.computeMapBounds());
        sb.grow(10, 10, 10, 10);
        var w = 150;
        var h = 100;

        // hide slides temporarily while creating thumbnail
        self.isCreatingThumbnail = true;
        diagram.updateAllTargetBindings();

        var imgData = diagram.makeImageData({
            scale: Math.min(h / sb.height, w / sb.width),
            position: new go.Point(sb.x, sb.y),
            size: new go.Size(w, h)
        });

        self.isCreatingThumbnail = false;
        diagram.updateAllTargetBindings();

        return imgData;
    };

    // called via ng-click on thumbnail
    this.slideThumbnailSelected = function (index) {
        //console.log('slideThumbnailSelected: ' + index);
        var diagram = map.getDiagram();
        var slide = findSlideByIndex(index);

        $scope.safeApply(function () {
            // NB: order of statements is important here, as selectSlide can trigger changedSelection with an empty selection sometimes... ??
            selectSlide(index);
            self.currentSlideIndex = index;
            diagram.updateAllTargetBindings(); // show/hide slide nodes - see templates.js: slideTemplate

            if (slide) {
                zoomToSlideInCenter(slide);

                if (self.isPresenting) {
                    self.showTOC = false;
                }
            }
        });
    };

    this.needsNarrowCanvas = function () {
        var slide = findSlideByIndex(self.currentSlideIndex);
        return map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) && slide != null && (slide.data.type == 'TITLE_BODY_MAP' || slide.data.type == 'ACTIVITY_MAP' || slide.data.type == 'MAP_SUMMARY');
    };

    // sets the slide node as selected in the diagram.
    function selectSlide(index) {
        $scope.safeApply(function () {
            //console.log('select slide: ' + index);
            var diagram = map.getDiagram();
            diagram.clearSelection();
            if (index) {
                var slide = findSlideByIndex(index);
                if (slide) {
                    slide.isSelected = true;
                }
            }
            // TODO: scroll to slide?
        });
    }

    this.playSlide = function (index) {
        var diagram = map.getDiagram();
        map.getUi().openTab(map.getUi().TAB_ID_PRESENTER);

        var slides = self.getSlideNodeDatas();
        if (slides.length) {
            self.showTOC = false;
            presentSlide(index);
        }
    };

    // increment is -1 or +1
    this.advanceSlide = function (increment) {
        //console.log('advanceSlide, currentSlideIndex: ' + self.currentSlideIndex);
        $scope.safeApply(function () {
            var slide = findSlideByIndex(self.currentSlideIndex);
            if (slide) {
                self.currentSlideIndex += increment;
                if (self.isPresenting) {
                    presentSlide(self.currentSlideIndex);
                }
            }
        });
    };

    function presentSlide(index) {
        //console.log('presentSlide');
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            if (!slide) {
                return;
            }

            diagram.clearSelection();
            // NB: need to set this after clearSelection, as that will set it to null! (see changedSelection)
            self.currentSlideIndex = index;
            map.setEditingBlocked(true);
            //console.log('presentSlide, index: ' + index + ', slide: ' + slide + ', currentSlideIndex: ' + self.currentSlideIndex);

            maybeInitSlideBlocker();
            var blockerW = self.SLIDE_BLOCKER_WIDTH;

            if (slide.data.hasRegion) {
                zoomToSlideInCenter(slide);

                // show slide blocker
                self.slideBlocker.desiredSize = new go.Size(slide.actualBounds.width + 2 * blockerW, slide.actualBounds.height + 2 * blockerW);
                self.slideBlocker.location = new go.Point(slide.actualBounds.x - blockerW, slide.actualBounds.y - blockerW);
                self.slideBlocker.visible = true;
                //console.log('slideBlocker: ' + self.slideBlocker.actualBounds);
            } else if (slide.data.isSummary) {
                zoomToSlideInCenter(slide);
                self.slideBlocker.visible = false;
            } else {
                map.getUi().resetZoom();
                self.slideBlocker.visible = false;
            }

            self.isPresenting = true;
            $('body').addClass('presenter-playing');

            map.getDiagram().updateAllTargetBindings(); // hide slide nodes - see templates.js: slideTemplate
        });
    }

    // zoom the diagram to show the given slide in the center of the canvas
    function zoomToSlideInCenter(slide) {
        var diagram = map.getDiagram();

        window.setTimeout(function () {

            var halfWidth = slide.data.type != 'MAP_ONLY';
            var zoomRect = self.getLetterboxedRect(slide.actualBounds, halfWidth);
            zoomRect.inflate(zoomRect.width / 10, zoomRect.height / 10);
            diagram.zoomToRect(zoomRect, go.Diagram.Uniform);
        }, 100);
    }

    // Returns a rectangle containing the given rect, but with appropriate width or height added
    // to give it same aspect ratio as the diagram.
    this.getLetterboxedRect = function (rect, halfWidth) {

        // NB: we calculate the aspect ratio when the tab is opened,
        // rather than each time as the diagram size might be changing...
        var dar = halfWidth ? self.diagramAspectRatio / 2 : self.diagramAspectRatio;
        //console.log('rect: ' + rect + ', dar: ' + dar);

        var rectAspectRatio = rect.width / rect.height;

        if (dar > rectAspectRatio) {
            // tall skinny rect, short wide target AR, so add side padding to the rect
            var lbw = rect.height * dar; // because lbw / lbh == dar == lbw / rect.height (lbh == rect.height)
            return rect.copy().inflate((lbw - rect.width) / 2, 0); // add half the width difference to each side of the rect
        } else {
            // short wide rect, tall skinny target AR, so add top/bottom padding to the rect
            var lbh = rect.width / dar; // because lbw / lbh == dar == lbh / rect.width (lbw == rect.width)
            return rect.copy().inflate(0, (lbh - rect.height) / 2); // add half the height difference to top/bottom of the rect
        }
    };

    this.stopPresenting = function () {
        $scope.safeApply(function () {
            //console.log('stopPresenting, currentSlideIndex: ' + self.currentSlideIndex);
            var diagram = map.getDiagram();

            if (self.slideBlocker) {
                self.slideBlocker.visible = false;
            }

            //self.currentSlideIndex = null;
            self.isPresenting = false;
            $('body').removeClass('presenter-playing');

            map.getDiagram().updateAllTargetBindings(); // show slide nodes

            diagram.clearSelection();
            map.setEditingBlocked(false);
            //map.getUi().resetZoom();
        });
    };
};

// adjust zooming of map region
//self.windowResized();

},{}],29:[function(require,module,exports){
// functions for sharing maps, with a modal dialog

'use strict';

window.SandbankSharing = {};

SandbankSharing = function ($scope, $http, $resource, $modal, $log) {

    this.openModal = function (_mapIds, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_map_sharing_modal.html', // see views/shares/_template_map_sharing_modal
            backdrop: 'static',
            controller: sharingModalCtrl,
            windowClass: 'sharing-modal',
            resolve: {
                userId: function userId() {
                    return $scope.userId;
                },
                userProfile: function userProfile() {
                    return $scope.userProfile;
                },
                mapIds: function mapIds() {
                    return _mapIds;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for sharing modal ---------------------

    var sharingModalCtrl = function sharingModalCtrl($scope, $modalInstance, userId, userProfile, mapIds, onUpdate) {

        $scope.userId = userId;
        $scope.userProfile = userProfile;
        $scope.mapIds = mapIds;

        // all existing shares for selected maps
        // format: [{mapId:1, shareId:1, canEdit:true, userId:2, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.mapShares = [];

        // existing shares, grouped for display
        // format: [{name:'foo', userEmail:'foo@bar.com', userId: null, groupId: id, organizationId: null, isPublic:false, canEdit:true, mapIds:[1,2]}, ...]
        $scope.existingShares = [];

        // new shares added in the dialog
        // format: [{shareType:SHARE_TYPE_INDIVIDUAL, sharePermission:SHARE_PERMISSION_CANVIEW, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.newShares = [];

        // all updated shares, to be saved
        // format: [{mapId:1, canEdit:false, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.updatedShares = [];

        // indexes of users/groups/orgs - format: [{id:1, name:'foo'}, ...]
        $scope.users = [];
        $scope.groups = [];
        $scope.organizations = [];

        // constants
        $scope.SHARE_TYPE_INDIVIDUAL = 'One or more Individuals';
        $scope.SHARE_TYPE_GROUP = 'Group';
        $scope.SHARE_TYPE_ORGANIZATION = 'ThinkNation';
        $scope.SHARE_TYPE_PUBLIC = 'All MetaMap Users';

        $scope.shareTypes = [$scope.SHARE_TYPE_INDIVIDUAL,
        //$scope.SHARE_TYPE_GROUP,
        $scope.SHARE_TYPE_ORGANIZATION, $scope.SHARE_TYPE_PUBLIC];

        $scope.SHARE_PERMISSION_CANVIEW = 'Can view';
        $scope.SHARE_PERMISSION_CANEDIT = 'Can edit';

        $scope.sharePermissions = [$scope.SHARE_PERMISSION_CANVIEW, $scope.SHARE_PERMISSION_CANEDIT];

        $scope.canShareCultureMap = function (share) {
            return _.findWhere($scope.userProfile.memberships, {
                organizationId: share.organizationId,
                leader: true
            });
        };

        // get existing shares
        function loadShares(mapIds) {
            $http.get('/shares/map_shares.json?ids=' + mapIds.join(',')).then(function (response) {
                if (response.status === 200 || response.status === 204) {
                    $scope.mapShares = response.data.mapShares;
                    $scope.users = response.data.users;
                    $scope.groups = response.data.groups;
                    $scope.organizations = response.data.organizations;
                    initExistingShares();
                    if (!$scope.existingShares.length && $scope.canAddNewShare()) {
                        $scope.addNewShare();
                    }
                }
            }, function () {
                alert('Could not load sharing info');
            });
        }

        loadShares(mapIds);

        // group the existing shares by user, group, org and public
        function initExistingShares() {
            // find all emails that occur in a share
            var userEmails = _.without(_.uniq(_.pluck($scope.mapShares, 'userEmail')), null);
            // build an array of shares, one for each email, with the applicable map IDs
            var sharesByUserEmail = _.map(userEmails, function (email) {
                var user = _.findWhere($scope.users, {
                    email: email
                });
                return {
                    isDeleted: false,
                    userEmail: email,
                    userId: user ? user.id : null,
                    groupId: null,
                    organizationId: null,
                    isPublic: false,
                    isCultureMap: false,
                    name: email,
                    // NB: for this attribute we don't try to summarize the value for all the existing shares,
                    // because it would be too complicated to display...
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        userEmail: email
                    }), 'mapId')
                };
            });

            var groupIds = _.without(_.uniq(_.pluck($scope.mapShares, 'groupId')), null);
            var sharesByGroupId = _.map(groupIds, function (id) {
                var group = _.findWhere($scope.groups, {
                    id: id
                });
                return {
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: id,
                    organizationId: null,
                    isPublic: false,
                    isCultureMap: false,
                    name: 'Group: ' + (group ? group.name : ''),
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        groupId: id
                    }), 'mapId')
                };
            });

            var organizationIds = _.without(_.uniq(_.pluck($scope.mapShares, 'organizationId')), null);
            var sharesByOrganizationId = _.map(organizationIds, function (id) {
                var organization = _.findWhere($scope.organizations, {
                    id: id
                });
                return {
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: null,
                    organizationId: id,
                    isPublic: false,
                    isCultureMap: $scope.mapShares.length == 1 && $scope.mapShares[0].isCultureMap,
                    name: 'ThinkNation: ' + (organization ? organization.name : ''),
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        organizationId: id
                    }), 'mapId')
                };
            });

            // are any of the selected maps shared publicly?
            var publicShares = [];
            if (_.where($scope.mapShares, {
                isPublic: true
            }).length) {
                publicShares = [{
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: null,
                    organizationId: null,
                    isPublic: true,
                    isCultureMap: false,
                    name: 'Everyone',
                    canEdit: false,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        isPublic: true
                    }), 'mapId')
                }];
            }

            $scope.existingShares = _.union(sharesByUserEmail, sharesByGroupId, sharesByOrganizationId, publicShares);
        }

        function buildUpdatedShares() {
            $scope.updatedShares = [];

            // for each selected map, decompose the existingShares (grouped by user/group/org/public) into individual shares for saving
            _.each(mapIds, function (id) {
                // get existing shares for this map
                var existingSharesForMapId = _.filter($scope.existingShares, function (existingShare) {
                    // existingShares format: [{name:'foo', userEmail:'foo@bar.com', userId: null, groupId: id, organizationId: null, isPublic:false, isCultureMap:false, canEdit:true, mapIds:[1,2]}, ...]
                    return _.contains(existingShare.mapIds, id);
                });
                // decompose these into individual shares
                _.each(existingSharesForMapId, function (es) {
                    $scope.updatedShares.push({
                        isNew: false,
                        isDeleted: es.isDeleted,
                        mapId: id,
                        userEmail: es.userEmail,
                        userId: es.userId,
                        groupId: es.groupId,
                        organizationId: es.organizationId,
                        isPublic: es.isPublic,
                        isCultureMap: es.isCultureMap,
                        canEdit: es.canEdit
                    });
                });
            });

            // add in the newShares (for each selected map)
            _.each(mapIds, function (id) {
                _.each($scope.newShares, function (ns) {
                    $scope.updatedShares.push({
                        isNew: true,
                        mapId: id,
                        userEmail: ns.shareType == $scope.SHARE_TYPE_INDIVIDUAL ? ns.userEmail : null,
                        groupId: ns.shareType == $scope.SHARE_TYPE_GROUP ? ns.groupId : null,
                        organizationId: ns.shareType == $scope.SHARE_TYPE_ORGANIZATION ? ns.organizationId : null,
                        isPublic: ns.shareType == $scope.SHARE_TYPE_PUBLIC,
                        isCultureMap: ns.isCultureMap,
                        canEdit: ns.shareType == $scope.SHARE_TYPE_PUBLIC ? false : ns.sharePermission == $scope.SHARE_PERMISSION_CANEDIT,
                        message: ns.message
                    });
                });
            });
        }

        function saveShares(onUpdate) {
            $http.put('/shares/update_map_shares', $scope.updatedShares).then(function (response) {
                onUpdate();
            }, function () {
                alert('Could not save sharing info');
            });
        }

        $scope.canDeleteExistingShare = function () {
            return $scope.canAddNewShare();
        };

        $scope.deleteExistingShare = function (share) {
            share.isDeleted = true;
        };

        $scope.canAddNewShare = function () {
            // make sure all maps are owned by the current user
            var mapUserIds = _.uniq(_.pluck($scope.mapShares, 'mapUserId'));
            return mapUserIds.length == 0 || mapUserIds.length == 1 && mapUserIds[0] == $scope.userId;
        };

        $scope.addNewShare = function () {
            // NB: isPublic and canEdit are set in buildUpdateShares
            $scope.newShares.push({
                shareType: $scope.SHARE_TYPE_INDIVIDUAL,
                sharePermission: $scope.SHARE_PERMISSION_CANVIEW,
                userEmail: '',
                groupId: $scope.groups.length ? $scope.groups[0].id : null,
                organizationId: $scope.organizations.length ? $scope.organizations[0].id : null,
                isCultureMap: false,
                message: ''
            });
        };

        $scope.deleteNewShare = function (share) {
            var i = _.indexOf($scope.newShares, share);
            $scope.newShares.splice(i, 1);
        };

        $scope.ok = function () {
            buildUpdatedShares();
            saveShares(onUpdate);
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    sharingModalCtrl.$inject = ['$scope', '$modalInstance', 'userId', 'userProfile', 'mapIds', 'onUpdate'];
};

},{}],30:[function(require,module,exports){
// common core standards tab -
// this is delegated to the SandbankCcsTagging module, which handles CCS
// for a map OR the user profile - see tagging_ccs.js

"use strict";

SandbankEditor.Standards = function ($scope, map) {

    var self = this;

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.getUi().TAB_ID_STANDARDS) {
            // opening tab
            // if there are no links, show the modal
            if ($scope.canEdit && !$scope.ccsTagging.links.length) {
                $scope.ccsTagging.addLink();
            }
        }
        if (oldValue == map.getUi().TAB_ID_STANDARDS) {}
    };
};
// closing tab

},{}],31:[function(require,module,exports){
// functions for user-tagging maps, with a modal dialog

// NB: the complexity here is due to the need to show existing tags that may apply
// to any number of the selected maps, vs. new tags that will be added to all selected maps -
// the tagging info needs to be grouped and ungrouped when loading and saving to handle this.

'use strict';

window.SandbankTagging = {};

SandbankTagging = function ($scope, $http, $resource, $modal, $log) {

    this.openModal = function (_mapIds, _showDescription, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_map_tagging_modal.html', // see views/user_tags/_template_map_tagging_modal
            backdrop: 'static',
            controller: tagsModalCtrl,
            windowClass: 'tags-modal',
            resolve: {
                mapIds: function mapIds() {
                    return _mapIds;
                },
                showDescription: function showDescription() {
                    return _showDescription;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for tags modal ---------------------

    var tagsModalCtrl = function tagsModalCtrl($scope, $modalInstance, mapIds, showDescription, onUpdate) {

        $scope.mapIds = mapIds;

        // all existing tags for selected maps - format: [{mapId: 1, tagId: 1, tagName:'foo'}, ...]
        $scope.mapUserTags = [];

        // existing tags, grouped for display - format: [{name:'foo', mapIds:[1,2]}, ...]
        $scope.existingTags = [];

        // new tags added in the dialog - format: [{name:'foo'}, ...]
        $scope.newTags = [];

        // all updated tags, to be saved - tags format: [{mapId: 1, userTags: "foo, bar, bam"}, ...]
        $scope.updatedTags = { description: '', tags: [] };

        $scope.showDescription = showDescription;

        function loadTags(mapIds) {
            $http.get('/user_tags/map_user_tags.json?ids=' + mapIds.join(',')).then(function (response) {
                $scope.mapUserTags = response.data.mapUserTags;
                // NB: the map description is always passed back if we only pass one map ID,
                // but we may not display it in the dialog - depends on the value of the showDescription flag.
                if (mapIds.length == 1) {
                    $scope.updatedTags.description = response.data.mapDescription;
                }
                initExistingTags();
                $scope.addNewTag();
            }, function () {
                alert('Could not load tags');
            });
        }

        loadTags(mapIds);

        function initExistingTags() {
            var tagNames = _.uniq(_.pluck($scope.mapUserTags, 'tagName')).sort();
            $scope.existingTags = _.map(tagNames, function (name) {
                var mapUserTagsForName = _.where($scope.mapUserTags, { tagName: name });
                var mapIds = _.pluck(mapUserTagsForName, 'mapId');
                return {
                    name: name,
                    mapIds: mapIds
                };
            });
        }

        function buildUpdatedTags() {
            $scope.updatedTags.tags = [];
            _.each(mapIds, function (id) {
                var existingTagsForId = _.filter($scope.existingTags, function (existingTag) {
                    // existingTag format: {name:'foo', mapIds:[1,2]}
                    return _.contains(existingTag.mapIds, id);
                });
                $scope.updatedTags.tags.push({
                    mapId: id,
                    userTags: _.union(_.pluck(existingTagsForId, 'name'), _.without(_.pluck($scope.newTags, 'name'), '') // remove empty tags
                    ).join(', ')
                });
            });
        }

        function saveTags(onUpdate) {
            $http.put('/user_tags/update_map_user_tags', [$scope.updatedTags]).then(function (response) {
                onUpdate();
            }, function () {
                alert('Could not save tags');
            });
        }

        $scope.deleteExistingTag = function (tag) {
            var i = _.indexOf($scope.existingTags, tag);
            $scope.existingTags.splice(i, 1);
        };

        $scope.addNewTag = function () {
            $scope.newTags.push({ name: '' });
        };

        $scope.tagSelected = function (item, model, label) {
            //console.log('tagSelected: ' + item + ', ' + model + ', ' + label);
            $scope.addNewTag();
        };

        $scope.editingTagKeypress = function (e) {
            if (e.which == 13) {
                $scope.addNewTag();
            }
        };

        $scope.deleteNewTag = function (tag) {
            var i = _.indexOf($scope.newTags, tag);
            $scope.newTags.splice(i, 1);
            if (!$scope.newTags.length) {
                $scope.addNewTag(); // always leave at least one tag field
            }
        };

        // tag autocomplete
        $scope.getUserTags = function (viewValue) {
            var url = '/user_tags/list.json?q=' + viewValue;
            return $http.get(url).then(function (response) {
                return response.data.tags;
            });
        };

        $scope.ok = function () {
            buildUpdatedTags();
            saveTags(onUpdate);
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    tagsModalCtrl.$inject = ['$scope', '$modalInstance', 'mapIds', 'showDescription', 'onUpdate'];
};

},{}],32:[function(require,module,exports){
// goJS templates used in the editor

'use strict';

SandbankEditor.Templates = function ($scope, map) {

    var self = this;

    // constants
    this.groupFillColor = '#f9f9f9';

    this.init = function () {};

    // initialize template-related stuff that depends on the diagram (and therefore can't go in init())
    this.initTemplates = function (diagram) {
        diagram.groupTemplate = self.groupTemplate;
        diagram.nodeTemplate = self.slideTemplate;
        diagram.linkTemplate = self.linkTemplate;
        diagram.linkTemplateMap.add('P', self.pLinkTemplate);
        diagram.linkTemplateMap.add('D', self.dLinkTemplate);

        self.setTemporaryLinkTemplates(diagram.toolManager.linkingTool);
        self.setTemporaryLinkTemplates(diagram.toolManager.relinkingTool);

        diagram.toolManager.linkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
            self.handlePortTargeted(diagram.toolManager.linkingTool, realnode, realport, tempnode, tempport, toend);
        };

        diagram.toolManager.relinkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
            self.handlePortTargeted(diagram.toolManager.relinkingTool, realnode, realport, tempnode, tempport, toend);
        };

        diagram.toolManager.relinkingTool.updateAdornments = function (part) {
            go.RelinkingTool.prototype.updateAdornments.call(this, part);
            var from = part.findAdornment('RelinkFrom');
            var to = part.findAdornment('RelinkTo');
            // if (from)
            //     //console.log('relinkfrom: ' + from.part.width);
        };

        diagram.toolManager.linkingTool.linkValidation = self.validateLink;
        diagram.toolManager.relinkingTool.linkValidation = self.validateLink;
    };

    // convenient abbreviation for creating templates
    var mk = go.GraphObject.make;

    // DSRP colors (from _variables.scss)
    var colorD = '#f2624c';
    var colorS = '#96c93d';
    var colorR = '#4cbfc2';
    var colorP = '#fbaa36';
    var colorPLight = '#FDDDAF';
    var colorPDark = '#C9882B';

    var eyeSvgPath = 'M 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00c 47.559,94.979, 144.341,160.00, 256.00,160.00c 111.657,0.00, 208.439-65.021, 256.00-160.00 C 464.442,161.021, 367.657,96.00, 256.00,96.00z M 382.225,180.852c 30.081,19.187, 55.571,44.887, 74.717,75.148 c-19.146,30.261-44.637,55.961-74.718,75.149C 344.427,355.257, 300.779,368.00, 256.00,368.00c-44.78,0.00-88.428-12.743-126.225-36.852 C 99.695,311.962, 74.205,286.262, 55.058,256.00c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65 C 130.725,190.866, 128.00,205.613, 128.00,221.00c0.00,70.692, 57.308,128.00, 128.00,128.00s 128.00-57.308, 128.00-128.00c0.00-15.387-2.725-30.134-7.704-43.799 C 378.286,178.39, 380.265,179.602, 382.225,180.852z M 256.00,205.00c0.00,26.51-21.49,48.00-48.00,48.00s-48.00-21.49-48.00-48.00s 21.49-48.00, 48.00-48.00 S 256.00,178.49, 256.00,205.00z';
    var eyeBlockedSvgPath = 'M 419.661,148.208 C 458.483,175.723 490.346,212.754 512.00,256.00 C 464.439,350.979 367.657,416.00 256.00,416.00 C 224.717,416.00 194.604,410.894 166.411,401.458 L 205.389,362.48 C 221.918,366.13 238.875,368.00 256.00,368.00 C 300.779,368.00 344.427,355.257 382.223,331.148 C 412.304,311.96 437.795,286.26 456.941,255.999 C 438.415,226.716 413.934,201.724 385.116,182.752 L 419.661,148.208 ZM 256.00,349.00 C 244.638,349.00 233.624,347.512 223.136,344.733 L 379.729,188.141 C 382.51,198.627 384.00,209.638 384.00,221.00 C 384.00,291.692 326.692,349.00 256.00,349.00 ZM 480.00,0.00l-26.869,0.00 L 343.325,109.806C 315.787,100.844, 286.448,96.00, 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00 c 21.329,42.596, 52.564,79.154, 90.597,106.534L0.00,453.131L0.00,480.00 l 26.869,0.00 L 480.00,26.869L 480.00,0.00 z M 208.00,157.00c 24.022,0.00, 43.923,17.647, 47.446,40.685 l-54.762,54.762C 177.647,248.923, 160.00,229.022, 160.00,205.00C 160.00,178.49, 181.49,157.00, 208.00,157.00z M 55.058,256.00 c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65C 130.725,190.866, 128.00,205.613, 128.00,221.00 c0.00,29.262, 9.825,56.224, 26.349,77.781l-29.275,29.275C 97.038,309.235, 73.197,284.67, 55.058,256.00z';
    var paperclipSvgPath = 'M 348.916,163.524l-32.476-32.461L 154.035,293.434c-26.907,26.896-26.907,70.524,0.00,97.422 c 26.902,26.896, 70.53,26.896, 97.437,0.00l 194.886-194.854c 44.857-44.831, 44.857-117.531,0.00-162.363 c-44.833-44.852-117.556-44.852-162.391,0.00L 79.335,238.212l 0.017,0.016c-0.145,0.152-0.306,0.288-0.438,0.423 c-62.551,62.548-62.551,163.928,0.00,226.453c 62.527,62.528, 163.934,62.528, 226.494,0.00c 0.137-0.137, 0.258-0.284, 0.41-0.438l 0.016,0.017 l 139.666-139.646l-32.493-32.46L 273.35,432.208l-0.008,0.00 c-0.148,0.134-0.282,0.285-0.423,0.422 c-44.537,44.529-116.99,44.529-161.538,0.00c-44.531-44.521-44.531-116.961,0.00-161.489c 0.152-0.152, 0.302-0.291, 0.444-0.423l-0.023-0.03 l 204.64-204.583c 26.856-26.869, 70.572-26.869, 97.443,0.00c 26.856,26.867, 26.856,70.574,0.00,97.42L 218.999,358.375 c-8.968,8.961-23.527,8.961-32.486,0.00c-8.947-8.943-8.947-23.516,0.00-32.46L 348.916,163.524z';

    // footer for image export
    var _exportFooter = null;

    // ------------------- debug info for groups/links --------------------------------

    function groupInfo(obj) {
        return obj.data.text + '\n' + 'object: ' + obj + '\n' + 'key: ' + obj.data.key + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'layout: ' + obj.layout + '\n' + 'data.layout: ' + obj.data.layout + '\n' + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + '\n' + 'freehand position (data.loc): ' + go.Point.parse(obj.data.loc) + '\n' + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + '\n' + 'getScale(): ' + map.getLayouts().getScale(obj) + '\n' + 'isLinkLabel: ' + obj.data.isLinkLabel + '\n' + 'labeledLink: ' + obj.labeledLink + '\n';
    }

    function nodeInfo(obj) {
        return 'object: ' + obj + '\n' + 'key: ' + obj.data.key + '\n' + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + '\n' + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + '\n';
    }

    function linkInfo(obj) {
        var snpos = map.getLayouts().getSameNodesLinkPosition(obj);
        return '' + 'object: ' + obj + '\n' + 'fromNode: ' + obj.fromNode + '\n' + 'toNode: ' + obj.toNode + '\n' + 'labelNodes: ' + obj.labelNodes.count + '\n' + 'labelNodeIsVisible: ' + map.getLayouts().labelNodeIsVisible(obj) + '\n' + 'fromPortId: ' + obj.fromPortId + '\n' + 'toPortId: ' + obj.toPortId + '\n' + 'category: ' + (obj.data ? obj.data.category : '') + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'fromAndToNodesAreVisible: ' + map.getLayouts().fromAndToNodesAreVisible(obj) + '\n' + 'curve: ' + obj.curve + '\n' + 'curviness: ' + obj.curviness + '\n' + 'fromEndSegmentLength: ' + Math.round(obj.fromEndSegmentLength) + '\n' + 'toEndSegmentLength: ' + Math.round(obj.toEndSegmentLength) + '\n' + 'sameNodesLinkPosition: ' + snpos.index + ' of ' + snpos.count + '\n' +
        //+ 'geometry: ' + obj.geometry + "\n" +
        'getLinkStrokeWidth: ' + map.getLayouts().getLinkStrokeWidth(obj) + '\n';
    }

    // -----------------------------------------------------------------------------

    // NB: these are here because they are about colors;
    // similar functions that are scale-related are in layouts.js...
    function getGroupSelectionStroke(obj) {
        if (obj.isSelected) {
            if (map.getPerspectives().isInPEditorMode()) return colorP;else if (map.getPerspectives().isInDEditorMode()) return colorD;else return '#000';
        } else {
            return '#000';
        }
    }

    // OK, this isn't about colors, but it wants to be near the one above...
    function getGroupSelectionStrokeWidth(obj) {
        return obj.isSelected ? 3 : 1;
    }

    function getRLinkSelectionStroke(obj) {
        if (obj.isSelected || obj == map.getUi().mouseOverLink) {
            return colorR; // TODO: can P links be selected?
        } else {
            return '#000';
        }
    }

    // -----------------------------------------------------------------------------

    // callbacks to determine when the corners should be visible

    function showDCorner(group) {
        if (map.getPerspectives().isDEditorThing(group)) {
            // mark distinction thing
            return true;
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || $scope.isTouchDevice() && group.isSelected || canDragSelectionToBecomeSistersOf(group, false) && (map.getUi().dragTargetPosition === null || cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
        }
    }

    function showSCorner(group) {
        if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || $scope.isTouchDevice() && group.isSelected || canDragSelectionToBecomeChildrenOf(group, false) && (map.getUi().dragTargetPosition === null || cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
        }
    }

    function showRCorner(group) {
        if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || $scope.isTouchDevice() && group.isSelected; // show corners on mouseover
        }
    }

    function showPCorner(group) {
        if (map.getPerspectives().isPEditorPoint(group)) {
            return true; // mark perspective point
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || $scope.isTouchDevice() && group.isSelected; // show corners on mouseover
        }
    }

    // when a P link should be visible

    this.showPLink = function (link) {
        var mode = map.getUi().getMapEditorOptions().perspectiveMode;
        if (map.getPerspectives().isPEditorPoint(link.fromNode)) {
            // show P's when this link is from the current Point
            return true;
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show P's for non-Point things, even on mouseover
            return false;
        } else {
            return (mode == 'lines' || mode == 'both') && (link.fromNode == map.getUi().mouseOverGroup || map.pIsExpanded(link.fromNode));
        }
    };

    this.showPDot = function (link) {
        return true; // map.getUi().getMapEditorOptions().perspectiveMode != 'both';
    };

    // these functions are used in two modes:
    // 1. with isDropping == false, to highlight drop targets based on map.getUi().dragTargetGroup and map.getUi().dragTargetPosition,
    //    which are set on mouseDragEnter/mouseDragleave
    // 2. with isDropping == true, on drop, when the above indicators have gone away, but we know what the dropped
    //    and target groups are, and we want to know what the drop should do.

    function canDragSelectionToBecomeSistersOf(group, isDropping) {
        return (group == map.getUi().dragTargetGroup || isDropping) && map.thingsSelectedAreDescendantsOf(group);
    }

    function canDragSelectionToBecomeChildrenOf(group, isDropping) {
        return (group == map.getUi().dragTargetGroup || isDropping) && !map.thingsSelectedIncludeSlide() && !map.thingsSelectedAreDescendantsOf(group);
    }

    // side is map.LEFT or map.RIGHT
    function canDragSelectionToBecomeOrderedSisterOf(targetGroup, side, isDropping) {
        // must be dragging single group
        var draggedGroup = map.getUniqueThingSelected();
        if (!draggedGroup) {
            return false;
        }

        // dragged and target must be Sisters in inventory layout
        return (targetGroup == map.getUi().dragTargetGroup || isDropping) && (map.getUi().dragTargetPosition == side || isDropping) && map.getLayouts().areSistersInInventoryLayout(draggedGroup, targetGroup);
    }

    function cannotDragSelectionToBecomeOrderedSisterOf(targetGroup) {
        return !canDragSelectionToBecomeOrderedSisterOf(targetGroup, map.LEFT) && !canDragSelectionToBecomeOrderedSisterOf(targetGroup, map.RIGHT);
    }

    // handle drop on one of the three target regions (top, middle, bottom)
    // side is map.LEFT or map.RIGHT
    function handleGroupMouseDrop(event, dropTarget, side) {
        //console.log('dragAboveTarget.mouseDrop, target: ' + dropTarget + ', part: ' + dropTarget .part + ', show: ' + show);
        if (side !== null && canDragSelectionToBecomeOrderedSisterOf(dropTarget.part, side, true)) {
            map.addSelectedThingAsOrderedSisterOf(dropTarget.part, side);
        } else if (canDragSelectionToBecomeSistersOf(dropTarget.part, true)) {
            map.addSelectedThingsAsSistersOf(dropTarget.part);
        } else if (canDragSelectionToBecomeChildrenOf(dropTarget.part, true)) {
            map.addSelectedThingsAsChildrenOf(dropTarget.part);
        }
    }

    // when to show the R-thing knob on a link
    function showKnob(link) {
        return link == map.getUi().mouseOverLink;
    }

    // ---------------- components for main group template ------------------

    function dFlagMarker() {
        return mk(go.Shape, new go.Binding('fill', '', function (obj) {
            return obj.data.dflag ? '#000' : null;
        }).ofObject(), {
            name: 'dflag',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(18, 18),
            geometry: go.Geometry.parse('F M0 1 L0 18 L18 0 L1 0z', true),
            cursor: 'pointer',
            pickable: false,
            stroke: null
        });
    }

    // "D" corner (top left, red)
    function cornerD() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showDCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerD',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            opacity: 0
        }, mk(go.Shape, {
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            geometry: go.Geometry.parse('F M0 1 L0 50 L50 0 L1 0z', true),
            fill: colorD,
            stroke: null,
            cursor: 'pointer',
            click: function click(event, target) {
                //console.log('click, control:' + event.control + ', alt:' + event.alt + ', meta:' + event.meta);
                if (event.alt) {
                    // NB: a side effect of this will be to select just this group,
                    // which would not happen otherwise via control-click
                    map.getPerspectives().setDEditorThing(target.part);
                } else {
                    // handle single or double click
                    map.getUi().handleCornerClick('D', target.part);
                }
            },
            contextClick: function contextClick(event, target) {
                //console.log('contextClick:' + event);
                map.toggleDFlag(target.part);
            }
        }), mk(go.TextBlock, {
            text: 'D',
            stroke: 'white',
            font: '9px sans-serif',
            position: new go.Point(12, 15),
            pickable: false
        }));
    }

    // "S" corner (bottom left, green)
    function cornerS() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showSCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerS',
            position: new go.Point(0, 50),
            desiredSize: new go.Size(50, 50),
            opacity: 0
        }, mk(go.Shape, {
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            geometry: go.Geometry.parse('F M0 0 L0 49 L1 50 L50 50z', true),
            fill: colorS,
            stroke: null,
            cursor: 'pointer',
            click: function click(event, target) {
                // handle single or double click
                map.getUi().handleCornerClick('S', target.part);
            }
        }),
        // expansion indicator
        mk(go.Shape, new go.Binding('position', '', function (obj) {
            return obj.isSubGraphExpanded ? new go.Point(4, 43) : new go.Point(5, 38);
        }).ofObject(), new go.Binding('angle', '', function (obj) {
            return obj.isSubGraphExpanded ? 90 : 0;
        }).ofObject(), {
            desiredSize: new go.Size(5, 10),
            geometry: go.Geometry.parse('F M0 0 L5 5 L0 10z', true),
            fill: '#333',
            stroke: null,
            cursor: 'pointer',
            pickable: false
        }), mk(go.TextBlock, {
            text: 'S',
            stroke: 'white',
            font: '9px sans-serif',
            position: new go.Point(12, 28),
            pickable: false
        }));
    }

    // show only when system is collapsed
    function sCollapsedMarker() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return !showSCorner(obj) && obj.memberParts.count > 0 && !obj.isSubGraphExpanded;
        }).ofObject(), {
            position: new go.Point(5, 88),
            desiredSize: new go.Size(5, 10),
            geometry: go.Geometry.parse('F M0 0 L5 5 L0 10z', true),
            fill: '#333',
            stroke: null,
            cursor: 'pointer',
            pickable: false
        });
    }

    // "R" corner (bottom right, blue)
    function cornerR() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showRCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerR',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            opacity: 0
        }, mk(go.Shape, {
            name: 'cornerRShape',
            // NB: this corner is done differently from the others:
            // 1. the overall shape is the size of the whole square, so the port falls in the middle instead of the corner;
            // 2. the geometry traces around the edges of the whole square, because otherwise the link line will
            //    show inside the main square if it's crossing one of the other 3 quadrants
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            geometry: go.Geometry.parse('F' + 'M0 0 L0 100 ' + // top left to bottom left
            'L99 100 L100 99 L 100 0 ' + // bottom/right sides (round bottom right corner)
            'L 0 0 L 100 0 ' + // back to top left then top right
            'L 100 50 L 50 100 ' + // to midpoint of right side, midpoint of bottom side
            'L0 100z', // bottom left, return home
            true),
            fill: colorR,
            stroke: null,
            cursor: 'pointer',

            portId: 'R',
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: true,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: true,
            click: function click(event, target) {
                // handle single or double click
                map.getUi().handleCornerClick('R', target.part);
            }
        }), mk(go.TextBlock, {
            text: 'R',
            stroke: 'white',
            font: '9px sans-serif',
            pickable: false,
            position: new go.Point(82, 78)
        }));
    }

    function attachmentPaperClip() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return obj.data.attachments !== null && obj.data.attachments !== undefined && obj.data.attachments.length > 0;
        }).ofObject(), new go.Binding('geometry', '', function (obj) {
            return go.Geometry.parse(paperclipSvgPath, true);
        }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
            return new go.Size(512, 512); // NB: the two icons don't scale to the same proportions for some reason - ??
        }).ofObject(), {
            position: new go.Point(46, 85),
            scale: 0.02,
            stroke: '#000',
            fill: '#000',
            click: function click(event, target) {
                //console.log('clip clicked');
                map.getUi().toggleTab(map.getUi().TAB_ID_ATTACHMENTS);
            }
        });
    }

    function pEyeball() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return map.getPerspectives().isPerspectivePoint(obj);
        }).ofObject(), new go.Binding('geometry', '', function (obj) {
            return go.Geometry.parse(map.pIsExpanded(obj) ? eyeSvgPath : eyeBlockedSvgPath, true);
        }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
            return new go.Size(512, map.pIsExpanded(obj) ? 440 : 512); // NB: the two icons don't scale to the same proportions for some reason - ??
        }).ofObject(), {
            position: new go.Point(87, 4),
            scale: 0.02,
            stroke: '#000',
            fill: '#000',
            pickable: false
        });
    }

    // P expansion indicator - this shows when the P corner is not visible, and only if the thing is a perspective point
    function pointMarker() {
        return pEyeball();
    }

    // P view indicator
    function viewMarker() {
        return mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
            return true;
        }).ofObject(), new go.Binding('fill', '', function (obj) {
            return getViewMarkerFill(obj);
        }).ofObject(), {
            position: new go.Point(0, 0),
            height: 18,
            width: 100,
            stroke: null
        });
    }

    function getViewMarkerFill(obj) {
        var weight = map.getPerspectives().getPerspectiveViewWeight(obj);

        if (weight == 3) {
            return colorPDark;
        } else if (weight == 2) {
            return colorP;
        } else if (weight == 1) {
            return colorPLight;
        } else {
            return 'transparent';
        }
    }

    // "P" corner (top right, orange)
    function cornerP() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showPCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerP',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            opacity: 0
        }, mk(go.Shape, {
            name: 'cornerPShape',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            // NB: this geometry covers the whole square; see note above for cornerR
            geometry: go.Geometry.parse('F' + 'M0 0 L0 100 L100 100' + // top left to bottom left to bottom right
            'L100 1 L99 0 L0 0' + // right/top sides (round top right corner)
            'L 50 0 L 100 50 ' + // to midpoint of top side, midpoint of right side
            'L100 100 0 100z', // bottom right, bottom left, return home
            true),

            fill: colorP,
            stroke: null,
            cursor: 'pointer',

            portId: 'P',
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: false,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: false,
            toMaxLinks: 1,
            click: function click(event, target) {
                // handle single or double click
                map.getUi().handleCornerClick('P', target.part);
            }
        }), pEyeball(), // P expansion indicator
        mk(go.TextBlock, {
            text: 'P',
            stroke: 'white',
            font: '9px sans-serif',
            pickable: false,
            position: new go.Point(81, 15)
        }));
    }

    function mainBorder() {
        return mk(go.Shape, 'Border', new go.Binding('stroke', '', getGroupSelectionStroke).ofObject(), new go.Binding('strokeWidth', '', getGroupSelectionStrokeWidth).ofObject(), {
            name: 'mainarea',
            position: new go.Point(0, 0),
            height: 100,
            width: 100,
            fill: null,
            //portId: "",
            cursor: 'pointer',
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: true,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: true
        });
    }

    // --------- handlers for mouse drag/drop actions on groups, which need to be replicated on different target parts -------

    // position is map.LEFT, null, or map.RIGHT
    function getGroupMouseDragEnterHandler(position) {
        return function (event, target, obj2) {
            //console.log('mouseDragEnter, e.dp: ' + event.documentPoint + ', target.part: ' + target.part + ', target bounds: ' + target.actualBounds);
            map.getUi().dragTargetGroup = target.part;
            map.getUi().dragTargetPosition = position;
            map.getDiagram().updateAllTargetBindings();
        };
    }

    var groupMouseDragLeaveHandler = function groupMouseDragLeaveHandler(event, target, obj2) {
        map.getUi().dragTargetGroup = null;
        map.getUi().dragTargetPosition = null;
        map.getDiagram().updateAllTargetBindings();
    };

    function getGroupMouseDropHandler(position) {
        return function (event, dropTarget) {
            handleGroupMouseDrop(event, dropTarget, position);
        };
    }

    var groupClickHandler = function groupClickHandler(event, target) {
        // handle single or double click
        map.getUi().handleCornerClick('', target);
    };

    // --------------- targets for dragging to D or S -----------------

    function dragAboveTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(map.LEFT),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(map.LEFT),
            click: groupClickHandler
        },
        // drag target region
        mk(go.Shape, 'Rectangle', {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            cursor: 'pointer',
            stroke: null,
            fill: 'transparent'
        }),
        // drag indicator bar
        mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
            return canDragSelectionToBecomeOrderedSisterOf(obj.part, map.LEFT, false);
        }).ofObject(), {
            position: new go.Point(0, 0),
            height: 10,
            width: 100,
            stroke: null,
            fill: '#000'
        }));
    }

    function dragIntoTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 25),
            height: 50,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(null),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(null),
            click: groupClickHandler
        }, mk(go.Shape, 'Rectangle', {
            position: new go.Point(0, 0),
            height: 50,
            width: 100,
            cursor: 'pointer',
            stroke: null,
            fill: 'transparent'
        }));
    }

    function dragBelowTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 75),
            height: 25,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(map.RIGHT),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(map.RIGHT),
            click: groupClickHandler
        },
        // drag target region
        mk(go.Shape, 'Rectangle', {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            cursor: 'pointer',
            stroke: null,
            fill: 'transparent'
        }),
        // drag indicator bar
        mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
            return canDragSelectionToBecomeOrderedSisterOf(obj.part, map.RIGHT, false);
        }).ofObject(), {
            position: new go.Point(0, 15),
            height: 10,
            width: 100,
            stroke: null,
            fill: '#000'
        }));
    }

    // Returns the TextBlock for the group title, for use in the main group template, inside the box.
    function groupInternalTextBlock() {
        return mk(go.Panel, go.Panel.Horizontal, {
            alignment: go.Spot.Left,
            alignmentFocus: go.Spot.Right,
            position: new go.Point(0, -50),
            desiredSize: new go.Size(100, 100)
        }, mk(go.TextBlock, {
            width: 80,
            margin: 10,
            alignment: go.Spot.Left,
            alignmentFocus: go.Spot.Right,
            //alignment: go.Spot.Center,
            //textAlign: 'center',
            cursor: 'move',
            font: '10px sans-serif',
            isMultiline: true,
            wrap: go.TextBlock.WrapDesiredSize,
            mouseDragEnter: getGroupMouseDragEnterHandler(null),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(null),
            click: groupClickHandler,
            contextClick: function contextClick(event, target) {
                if (event.control) {}
            }
        }, new go.Binding('text', 'text').makeTwoWay(), new go.Binding('visible', '', function (group) {
            // always show text inside box for R-things, because external text will throw off layout
            return map.getLayouts().isNotWithinInventoryLayout(group) || map.getLayouts().isRThingWithinInventoryLayout(group);
        })));
    }

    // Returns a TextBlock for the group title, for use in the main group template, on the left or right.
    // visibleFn is a callback to be bound to the visibility attribute of the TextBlock.
    // textAlign is 'left' or 'right'.
    function groupExternalTextBlock(visibleFn, textAlign) {
        return mk(go.TextBlock, new go.Binding('text', 'text').makeTwoWay(), new go.Binding('visible', '', visibleFn).ofObject(), new go.Binding('scale', '', map.getLayouts().getExternalTextScale).ofObject(), {
            name: 'externaltext-' + textAlign, // NB: this screws up layouts for some reason - ??
            textAlign: textAlign,
            margin: 5,
            font: '10px sans-serif',
            isMultiline: true,
            click: groupClickHandler
        });
    }

    // -------------- group/Thing template --------------------

    this.groupTemplate = mk(go.Group, go.Panel.Vertical, new go.Binding('layout', 'layout', function (layoutName) {
        return map.getLayouts().getLayout(layoutName);
    }), new go.Binding('movable', '', function (obj) {
        return !obj.isLinkLabel;
    }).ofObject(), new go.Binding('isSubGraphExpanded', 'sExpanded'),
    // dim the thing if it's being dragged over another thing (drop to sister/child)
    new go.Binding('opacity', '', function (obj) {
        return obj.isSelected && map.getUi().dragTargetGroup ? 0.25 : 1;
    }).ofObject(), {
        locationObjectName: 'mainpanel',
        locationSpot: go.Spot.TopLeft,
        selectionAdorned: false,
        isSubGraphExpanded: true,
        layerName: 'Foreground',
        // highlight corners
        mouseEnter: function mouseEnter(event, target, obj2) {
            map.getUi().mouseOverGroup = target;
            map.getDiagram().updateAllTargetBindings();
        },
        // unhighlight corners
        mouseLeave: function mouseLeave(event, target, obj2) {
            map.getUi().mouseOverGroup = null;
            map.getDiagram().updateAllTargetBindings();
        }
        // containingGroupChanged: function(part, oldgroup, newgroup) {
        //     map.getDiagram().model.setDataProperty(part.data, 'level', map.computeLevel(part));
        //     //part.updateTargetBindings();  
        // }
    }, mk(go.Panel, go.Panel.Horizontal, groupExternalTextBlock(map.getLayouts().showLeftTextBlock, 'right'), mk(go.Panel, go.Panel.Position, {
        name: 'mainpanel'
    }, new go.Binding('scale', '', map.getLayouts().getScale).ofObject(),
    // drag area
    mk(go.Shape, 'Rectangle', {
        name: 'dragarea',
        position: new go.Point(0, 0),
        width: 100,
        height: 100,
        fill: self.groupFillColor,
        stroke: null,
        cursor: 'move',
        // show debug info
        contextClick: function contextClick(event, target) {
            if (event.control) {}
        }
    }), mk(go.Panel, go.Panel.Position, viewMarker(), dragAboveTarget(), dragIntoTarget(), dragBelowTarget(),
    //groupInternalTextBlock(),
    cornerD(), dFlagMarker(), cornerS(), sCollapsedMarker(), cornerR(), pointMarker(), cornerP(), attachmentPaperClip(), mainBorder())), groupExternalTextBlock(map.getLayouts().showRightTextBlock, 'left')), mk(go.TextBlock, {
        width: 80,
        margin: 10,
        alignment: go.Spot.Left,
        alignmentFocus: go.Spot.Right,
        _isNodeLabel: true,
        editable: true,
        //alignment: go.Spot.Center,
        //textAlign: 'center',
        cursor: 'move',
        font: '10px sans-serif',
        isMultiline: true,
        wrap: go.TextBlock.WrapDesiredSize,
        mouseDragEnter: getGroupMouseDragEnterHandler(null),
        mouseDragLeave: groupMouseDragLeaveHandler,
        mouseDrop: getGroupMouseDropHandler(null),
        click: groupClickHandler,
        contextClick: function contextClick(event, target) {
            if (event.control) {}
        }
    }, new go.Binding('text', 'text').makeTwoWay(), new go.Binding('visible', '', function (group) {
        // always show text inside box for R-things, because external text will throw off layout
        return map.getLayouts().isNotWithinInventoryLayout(group) || map.getLayouts().isRThingWithinInventoryLayout(group);
    })),
    // the placeholder normally holds the child nodes, but we just use a dummy placeholder
    mk(go.Shape, {
        name: 'placeholder',
        fill: 'transparent',
        stroke: null,
        desiredSize: new go.Size(0, 0)
    }));

    // ------------------- link template ---------------------------

    this.shapes = ['to', 'from', 'toFrom', 'noArrows'];

    this.getNextRShape = function () {
        var current = self._currentRShape;
        var next = self.shapes[0];
        if (current) {
            var idx = self.shapes.indexOf(current) + 1;
            if (idx >= self.shapes.length) {
                idx = 0;
            }
            next = self.shapes[idx];
        }
        self._currentRShape = next;
        return next;
    };

    this.linkTemplate = mk(go.Link, {
        selectionAdorned: false,
        layerName: '',
        //routing: go.Link.Orthogonal,
        relinkableFrom: true,
        relinkableTo: true,
        smoothness: 1.0,
        adjusting: go.Link.Stretch,
        reshapable: true,
        mouseEnter: function mouseEnter(event, target, obj2) {
            map.getUi().mouseOverLink = target;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseLeave: function mouseLeave(event, target, obj2) {
            map.getUi().mouseOverLink = null;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDragEnter: function mouseDragEnter(event, target, dragObject) {
            map.getUi().mouseOverLink = target;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDragLeave: function mouseDragLeave(event, dropTarget, dragObject) {
            map.getUi().mouseOverLink = null;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDrop: function mouseDrop(event, dropTarget) {
            var parts = map.getDiagram().selection;
            if (parts && parts.count == 1 && parts.first() instanceof go.Group) {
                map.addThingAsRThing(parts.first(), dropTarget);
            }
        },
        click: function click(event, target) {
            var shape = self.getNextRShape();
            map.getUi().setSelectedRelationshipsDirection(shape);
        },
        doubleClick: function doubleClick(event, target) {
            map.createRThing(target);
        },
        contextClick: function contextClick(event, target) {
            if (event.control) {}
        }
    }, new go.Binding('points').makeTwoWay(), new go.Binding('curviness', 'curviness'), mk(go.Shape, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding('strokeWidth', '', map.getLayouts().getLinkStrokeWidth).ofObject(), {
        name: 'LINKSHAPE'
    }),
    // show to/from arrowheads based on link "type" attribute
    mk(go.Shape, {
        fromArrow: 'Backward'
    }, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t == 'from' || t == 'toFrom';
    })), mk(go.Shape, {
        toArrow: 'Standard'
    }, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t == 'to' || t == 'toFrom';
    })), mk(go.Panel, go.Panel.Auto, // link label "knob"
    new go.Binding('opacity', '', function (obj) {
        return showKnob(obj) ? 1 : 0;
    }).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), mk(go.Shape, {
        figure: 'Ellipse',
        fill: colorD,
        stroke: colorD,
        width: 12,
        height: 12
    })));

    this.pLinkTemplate = mk(go.Link, {
        curve: go.Link.Bezier,
        adjusting: go.Link.Stretch,
        reshapable: true
    }, new go.Binding('points').makeTwoWay(), new go.Binding('curviness', 'curviness'), new go.Binding('opacity', '', function (obj) {
        return self.showPLink(obj) ? 1 : 0;
    }).ofObject(), {
        selectionAdorned: false,
        layerName: 'Background', // make P links fall behind R links
        routing: go.Link.Normal,
        curve: go.Link.Bezier,
        adjusting: go.Link.Stretch,
        reshapable: true,
        contextClick: function contextClick(event, target) {
            if (event.control) {}
        }
    }, mk(go.Shape, new go.Binding('strokeWidth', '', map.getLayouts().getLinkStrokeWidth).ofObject(), {
        name: 'LINKSHAPE',
        stroke: colorPLight,
        fill: colorPLight
    }), mk(go.Shape,
    // new go.Binding('visible', '', function(obj) {
    //     return (self.showPDot(obj) ? 1 : 0);
    // }).ofObject(),
    new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), {
        toArrow: 'Circle',
        stroke: colorPLight,
        fill: colorPLight
    }));

    this.dLinkTemplate = mk(go.Link, {
        selectable: false
    }, mk(go.Shape, {
        name: 'LINKSHAPE',
        stroke: null
    }));

    // ----------- temporary link/node templates, for use when dragging to create R/P lines -------------

    // define initial temporary link templates - these will be modified when handlePortTargeted is called
    this.setTemporaryLinkTemplates = function (tool) {
        tool.temporaryLink = makeTemporaryLinkTemplate();
        tool.temporaryFromNode = makeTemporaryNodeTemplate();
        tool.temporaryToNode = makeTemporaryNodeTemplate();
    };

    function makeTemporaryLinkTemplate() {
        return mk(go.Link, {
            layerName: 'Tool',
            curve: go.Link.Bezier
        }, mk(go.Shape, {
            name: 'linkshape',
            strokeWidth: 2
        }));
    }

    function makeTemporaryNodeTemplate() {
        return mk(go.Group, {
            layerName: 'Tool'
        }, mk(go.Shape, 'Border', {
            name: 'border',
            strokeWidth: 3,
            fill: null
        }));
    }

    // change color and portId of temporary link templates based on the type of link being created/relinked
    this.handlePortTargeted = function (tool, realnode, realport, tempnode, tempport, toend) {
        // //console.log('portTargeted, realport: ' + (realport ? realport.name : '') + ', tempport: ' + (tempport ? tempport.name : '')
        //     + ', originalFromPort: ' + (ltool.originalFromPort ? ltool.originalFromPort.name : '') + ', originalToPort: ' + ltool.originalToPort);

        var linkShape = tool.temporaryLink.findObject('linkshape');
        var fromBorder = tool.temporaryFromNode.findObject('border');
        var toBorder = tool.temporaryToNode.findObject('border');

        if (tool.originalFromPort && tool.originalFromPort.name == 'cornerPShape') {
            linkShape.stroke = colorP;
            fromBorder.stroke = colorP;
            toBorder.stroke = colorP;
            fromBorder.portId = 'P';
            toBorder.portId = 'P';
        } else if (tool.originalFromPort && tool.originalFromPort.name == 'cornerRShape') {
            linkShape.stroke = colorR;
            fromBorder.stroke = colorR;
            toBorder.stroke = colorR;
            fromBorder.portId = 'R';
            toBorder.portId = 'R';
        }
        tempnode.scale = map.getLayouts().getScale(realnode);
    };

    // prevent duplicate 'P' links in the same direction between the same two things
    this.validateLink = function (fromNode, fromPort, toNode, toPort) {
        // the P port is on top of the R port, so both P and R links get the toPort set to R by default.
        if (fromPort.portId == 'P') {
            // NB: findLinksTo would be simpler, but it doesn't seem to work... (?)
            var pLinks = toNode.findLinksBetween(fromNode, 'P', 'P');
            //console.log('validateLink, pLinks from ' + fromNode + ':' + fromPort + ' to ' + toNode + ':' + toPort + ' = ' + pLinks.count);
            if (pLinks.count) {
                while (pLinks.next()) {
                    var pLink = pLinks.value;
                    if (pLink.fromNode == fromNode && pLink.toNode == toNode) {
                        return false;
                    }
                }
            }
        }
        return true;
    };

    // ------------------- slide node template ----------------------

    function createSlideResizeHandle(alignment) {
        return mk(go.Shape, new go.Binding('desiredSize', '', function (obj) {
            var slide = obj.adornedObject;
            var size = Math.min(slide.width, slide.height) * .05;
            return new go.Size(size, size);
        }).ofObject(), {
            alignment: alignment,
            cursor: 'col-resize',
            fill: 'rgba(251,170,54,1)',
            stroke: null
        });
    }

    this.slideTemplate = mk(go.Node, go.Panel.Auto,
    // NB: unlike groups, slides just use a normal 2-way location binding
    new go.Binding('location', 'loc', go.Point.parse).makeTwoWay(go.Point.stringify), new go.Binding('width', 'width').makeTwoWay(), new go.Binding('height', 'height').makeTwoWay(), new go.Binding('visible', '', function (obj) {
        return obj.data.hasRegion && map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) && !map.getPresenter().isPresenting && !map.getPresenter().isCreatingThumbnail && map.getPresenter().currentSlideIndex == obj.data.index;
    }).ofObject(), {
        locationSpot: go.Spot.TopLeft,
        selectionAdorned: false,
        resizable: true,
        resizeAdornmentTemplate: mk(go.Adornment, 'Spot', mk(go.Placeholder), // takes size and position of adorned object                   
        createSlideResizeHandle(go.Spot.TopLeft), createSlideResizeHandle(go.Spot.Top), createSlideResizeHandle(go.Spot.TopRight), createSlideResizeHandle(go.Spot.Right), createSlideResizeHandle(go.Spot.BottomRight), createSlideResizeHandle(go.Spot.Bottom), createSlideResizeHandle(go.Spot.BottomLeft), createSlideResizeHandle(go.Spot.Left)),
        padding: 0,
        contextClick: function contextClick(event, target) {}
    }, mk(go.Shape, 'Rectangle', {
        name: 'slideborder',
        fill: 'rgba(251,170,54,.1)',
        stroke: null
    }));

    // ------------------- export footer ----------------------

    // NB: this is not a template per se, in that it is added to the diagram
    // statically, rather than being bound to something in the model.
    // But we put it here because it is about creating parts and stuff.

    function createExportFooter() {
        return mk(go.Node, go.Panel.Spot, {
            layerName: 'Foreground',
            location: new go.Point(0, 0),
            scale: 1,
            opacity: 0,
            pickable: false,
            selectable: false
        }, mk(go.Shape, 'Rectangle', {
            name: 'rectangle',
            height: 60,
            fill: null,
            stroke: null
        }), mk(go.Picture, {
            source: 'metamap/assets/img/metamap-logo-50.png',
            alignment: go.Spot.TopLeft,
            alignmentFocus: go.Spot.TopLeft,
            width: 195,
            height: 50
        }), mk(go.TextBlock, {
            text: 'metamap.cabreraresearch.org',
            alignment: go.Spot.BottomLeft,
            alignmentFocus: go.Spot.BottomLeft,
            width: 200
        }), mk(go.TextBlock, {
            name: 'mapTitle',
            text: '',
            textAlign: 'right',
            alignment: go.Spot.TopRight,
            alignmentFocus: go.Spot.TopRight,
            width: 300
        }), mk(go.TextBlock, {
            name: 'authorName',
            text: '',
            textAlign: 'right',
            alignment: go.Spot.BottomRight,
            alignmentFocus: go.Spot.BottomRight,
            width: 300
        }));
    }

    // creates or refreshes the footer logo/text that is displayed in the image export
    this.addExportFooter = function () {
        if (!_exportFooter) {
            _exportFooter = createExportFooter();
            map.getDiagram().add(_exportFooter);
        }
    };

    this.showExportFooter = function () {
        var rect = map.computeMapBounds();
        // put footer at least 100 px below bottom of map; make it at least 500px wide
        var x = rect.x;
        var y = rect.y + rect.height + Math.max(100, rect.height / 5);
        var w = Math.max(500, rect.width);
        //console.log('showExportFooter, bounds rect: ' + rect + ', w: ' + w);
        _exportFooter.location = new go.Point(x, y);
        _exportFooter.findObject('rectangle').width = w;
        _exportFooter.findObject('mapTitle').text = 'Map Title: ' + $scope.mapTitle;
        _exportFooter.findObject('authorName').text = 'Author: ' + $scope.userName;
        _exportFooter.opacity = 1;
        _exportFooter.invalidateLayout();
    };

    this.hideExportFooter = function () {
        _exportFooter.opacity = 0;
    };
};
// show corners on mouseover
// drag to D (make it sisters)
// show corners on mouseover
// drag to S (make it children)

//console.log(groupInfo(target.part));

//console.log(groupInfo(target.part));

//console.log(groupInfo(target.part));

//console.log(linkInfo(target));

//console.log(linkInfo(target));

//console.log(nodeInfo(target.part));

},{}],33:[function(require,module,exports){
'use strict';

SandbankEditor.Tests = function ($scope, map) {

    var self = this;

    this.TEST_STATUS_NOT_RUN = 'not-run';
    this.TEST_STATUS_PASSED = 'passed';
    this.TEST_STATUS_EXAMINE = 'examine';
    this.TEST_STATUS_FAILED = 'failed';

    this.currentTest = null;

    this.init = function () {};

    this.runTest = function (name) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var test = _.findWhere(self.tests, { name: name });
            test.status = self.TEST_STATUS_NOT_RUN;
            self.currentTest = test;
            diagram.clear();
            test.run(diagram);
            if (test.check === undefined) {
                test.status = self.TEST_STATUS_EXAMINE;
            } else {
                test.failReason = test.check(diagram);
                if (_.isString(test.failReason)) {
                    test.status = self.TEST_STATUS_FAILED;
                } else {
                    test.status = self.TEST_STATUS_PASSED;
                }
            }
        });
    };

    this.createGeneratorTest = function (name, mapItFn) {
        return {
            name: 'ThinkQ: ' + name,
            run: function run(diagram) {
                self.runGeneratorTest(mapItFn);
            }
        };
    };

    this.runGeneratorTest = function (mapItFn) {
        var diagram = map.getDiagram();
        var generator = map.getGenerator();
        generator.concept1 = 'CONCEPT 1';
        generator.concept2 = 'CONCEPT 2';
        generator.mapIt(mapItFn);
    };

    this.tests = [
    // {
    //     name: '[Failed test]',
    //     run: function(diagram) {
    //     },
    //     check: function(diagram) {
    //         return 'This test failed - this is only a test.';
    //     }
    // },
    {
        name: 'Reset map',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            map.refresh();
        },
        check: function check(diagram) {
            return diagram.findTopLevelGroups().count == 1;
        }
    }, {
        name: 'Create Sister',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createSister(group);
        },
        check: function check(diagram) {
            return diagram.findTopLevelGroups().count == 2;
        }
    }, {
        name: 'Create R to Sister',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createRToSister(group);
        }
    }, {
        name: 'Create Child',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createChild(group);
        }
    }, {
        name: 'Create 3 children and switch to freehand',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createChild(group);
            map.createChild(group);
            map.createChild(group);
            // diagram.model.setDataProperty(group.data, 'layout', 'freehand');
            group.isSelected = true;
            map.getUi().setSelectedThingsLayout('freehand');
        },
        check: function check(diagram) {
            if (diagram.findTopLevelGroups().count != 1) {
                return 'Top level group count is not 1';
            }
            var group = diagram.findTopLevelGroups().first();
            if (group.memberParts.count != 3) {
                return 'Parent data children is not 3';
            }
            return true;
        }
    }, {
        name: 'Drag RTBB into outline S',
        instructions: 'Drag the preselected RTBB into Whole (S), then do an Undo',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createThing(250, 0, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createThing(500, 0, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB into freehand S',
        instructions: 'Drag the preselected RTBB into Whole (S) and examine layout',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var oldPart1 = map.createChild(whole, 'Old Part 1');
            var part1 = map.createThing(250, 30, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createThing(500, 70, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Create RTBB in outline and switch to freehand',
        instructions: 'Check auto-generated freehand layout of parts',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            whole.isSelected = true;
            map.getUi().setSelectedThingsLayout('freehand');
            //diagram.model.setDataProperty(whole.data, 'layout', 'freehand');
            //map.refresh();
            diagram.clearSelection();
        }
    },

    // create RTBB in freehand, add part in outline, switch back to freehand
    // create RTBB in freehand, drag in part in outline, switch back to freehand

    {
        name: 'Drag RTBB out of S',
        instructions: 'Drag the preselected RTBB onto Whole (D)',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of freehand S',
        instructions: 'Drag the preselected RTBB onto Whole (D)',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1', 10, 120);
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2', 110, 150);
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of 2nd level S',
        instructions: 'Drag the preselected RTBB onto Whole (D) of Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var subpart12 = map.createChild(part1, 'Subpart 1.2');
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            var part2 = map.createChild(whole, 'Part 2');
            map.refresh();
            diagram.clearSelection();
            subpart11.isSelected = true;
            subpart12.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of 2nd level freehand S',
        instructions: 'Drag the preselected RTBB onto Whole (D) of Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1', 0, 120);
            var subpart11 = map.createChild(part1, 'Subpart 1.1', 10, 180);
            var subpart12 = map.createChild(part1, 'Subpart 1.2', 20, 220);
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            var part2 = map.createChild(whole, 'Part 2', 0, 300);
            map.refresh();
            diagram.clearSelection();
            subpart11.isSelected = true;
            subpart12.isSelected = true;
        }
    }, {
        name: 'Rchannel',
        instructions: 'Note that R-things are in part-whole relation',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole 1', 'right');
            var child11 = map.createChild(thing1, 'Part 1.1');
            var thing2 = map.createThing(250, 0, 'Whole 2');
            var child21 = map.createChild(thing2, 'Part 2.1');

            var rThing1 = map.createRLinkWithRThing(thing1, thing2, 'Rthing 1-2');
            var rThing11 = map.createRLinkWithRThing(child11, child21, 'Rthing 1.1 - 2.1');
            //console.log('Rchannel, rThing11: ' + rThing11);

            diagram.clearSelection();
            rThing11.isSelected = true;
            map.addSelectedThingsAsChildrenOf(rThing1);
        }
    }, {
        name: 'Disappearing parts on new idea creation',
        instructions: 'Create a new top-level idea - Part 1.1 should not disappear temporarily',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole 1', 'right');
            var child11 = map.createChild(thing1, 'Part 1.1');
        }
    }, {
        name: 'Drag top-level thing into freehand system',
        instructions: 'Drag New Part into Whole; examine resulting part layout',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole', 'freehand');
            var child11 = map.createChild(thing1, 'Part');
            var newPart = map.createThing(250, 0, 'New Part', 'left');
        }
    }, {
        name: 'Drag top-level RTBB into freehand system',
        instructions: 'Drag preselected RTBB into Whole; examine resulting part layout',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole', 'freehand');
            var child11 = map.createChild(thing1, 'Part');
            var bar = map.createThing(250, 0, 'Bar', 'left');
            var bell = map.createThing(500, 0, 'Bell', 'left');
            var rThing = map.createRLinkWithRThing(bar, bell, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            bar.isSelected = true;
            bell.isSelected = true;
        }
    }, {
        name: 'Drag R-thing square into freehand system',
        instructions: 'Drag preselected square into Whole; examine resulting part layout',
        run: function run(diagram) {
            var whole = map.createThing(-100, 50, 'Whole', 'freehand');
            var child11 = map.createChild(whole, 'Part');
            var part11 = map.createThing(250, 0, 'Part11', 'left');
            var part12 = map.createThing(500, 0, 'Part12', 'left');
            var part21 = map.createThing(250, 250, 'Part21', 'left');
            var part22 = map.createThing(500, 250, 'Part22', 'left');

            var rThing11_12 = map.createRLinkWithRThing(part11, part12, 'Rthing 11-12');
            var rThing11_21 = map.createRLinkWithRThing(part11, part21, 'Rthing 11-21');
            var rThing12_22 = map.createRLinkWithRThing(part12, part22, 'Rthing 12-22');
            var rThing21_22 = map.createRLinkWithRThing(part21, part22, 'Rthing 21-22');
            map.refresh();
            diagram.clearSelection();
            part11.isSelected = true;
            part12.isSelected = true;
            part21.isSelected = true;
            part22.isSelected = true;
        }
    }, {
        name: 'Drag R-thing square out of freehand system',
        instructions: 'Drag preselected square onto D of Whole; examine resulting layout',
        run: function run(diagram) {
            var whole = map.createThing(-100, 50, 'Whole', 'freehand');
            var child11 = map.createChild(whole, 'Part');
            var part11 = map.createChild(whole, 'Part11', 10, 190);
            var part12 = map.createChild(whole, 'Part12', 120, 190);
            var part21 = map.createChild(whole, 'Part21', 10, 300);
            var part22 = map.createChild(whole, 'Part22', 120, 300);

            var rThing11_12 = map.createRLinkWithRThing(part11, part12, 'Rthing 11-12');
            var rThing11_21 = map.createRLinkWithRThing(part11, part21, 'Rthing 11-21');
            var rThing12_22 = map.createRLinkWithRThing(part12, part22, 'Rthing 12-22');
            var rThing21_22 = map.createRLinkWithRThing(part21, part22, 'Rthing 21-22');
            map.refresh();
            diagram.clearSelection();
            part11.isSelected = true;
            part12.isSelected = true;
            part21.isSelected = true;
            part22.isSelected = true;
        }
    }, {
        name: 'Drag 2nd level part to D of parent',
        instructions: 'Drag Subpart 1.1 onto D of Part 1; it should appear below Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            map.refresh();
            diagram.clearSelection();
        }
    }, {
        name: 'Invisible R-thing in 2nd level of outline',
        instructions: 'R-thing between Subparts 1.1 and 1.2 should be visible',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var subpart12 = map.createChild(part1, 'Subpart 1.2');
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            rThing.desiredSize = new go.Size(30, 30);
            map.refresh();
            //console.log('rThing actualBounds: ' + rThing.actualBounds + ', scale: ' + rThing.scale + ', desiredSize: ' + rThing.desiredSize);
            //console.log('Whole desiredSize: ' + whole.desiredSize);
            diagram.clearSelection();
        }
    }, {
        name: 'R-thing between ideas in same location (error)',
        instructions: 'This should trigger an error',
        run: function run(diagram) {
            // try {
            var part1 = map.createThing(0, 0, 'Part 1', 'left');
            var part2 = map.createThing(0, 0, 'Part 2', 'left');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            // } catch(e) {
            //     alert(e.message);
            // }
        }
    },
    // {
    //     name: 'Fix bad R-thing leading to infinite loop',
    //     instructions: 'Map should display and not trigger infinite loop; model should be fixed so that r-thing is not Part 1.1 or Part 1.2',
    //     run: function(diagram) {
    //         var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
    //         var child11 = map.createChild(thing1, 'Part 1.1');
    //         var child12 = map.createChild(thing1, 'Part 1.2');
    //         var rThing = map.createRLinkWithRThing(child11, child12, 'Rthing');
    //         var rLink = rThing.labeledLink;
    //         rLink.data.labelKeys = [child11.data.key];
    //         map.checkModel();
    //         map.refresh();
    //     }
    // },
    {
        name: 'Drag to create R-line',
        instructions: 'Drag from the R-corner of Thing1 to Thing2; temporary drag line and square should be R-color; created line should be an R-line',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(100, 0, 'Thing2', 'freehand');
        }
    }, {
        name: 'Drag to create P-line',
        instructions: 'Drag from the P-corner of Thing1 to Thing2; temporary drag line and square should be P-color; created line should be a P-line',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(100, 0, 'Thing2', 'freehand');
        }
    }, {
        name: 'Relink from-port of R-line',
        instructions: 'Move the start of the R-link from Thing 1 to Thing 3; make sure it does not turn into a P-link',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(300, 0, 'Thing2', 'freehand');
            var thing3 = map.createThing(100, 200, 'Thing3', 'freehand');
            var rlink = map.createRLink(thing1, thing2);
        }
    }, {
        name: 'Relink to-port of R-line',
        instructions: 'Move the end of the R-link from Thing 2 to Thing 3; make sure it does not turn into a P-link',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(300, 0, 'Thing2', 'freehand');
            var thing3 = map.createThing(100, 200, 'Thing3', 'freehand');
            var rlink = map.createRLink(thing1, thing2);
        }
    }, {
        name: 'Showing parts of parts of a freehand whole',
        instructions: 'Whole, Part 1 and Subpart 1.1 should all be visible',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            map.refresh();
            diagram.clearSelection();
        }
    }

    // self.createGeneratorTest('WHAT_IS', map.getGenerator().WHAT_IS),
    // self.createGeneratorTest('PARTS_OF', map.getGenerator().PARTS_OF),
    // self.createGeneratorTest('PART_OF', map.getGenerator().PART_OF),
    // self.createGeneratorTest('PARTS_HAVE_PARTS', map.getGenerator().PARTS_HAVE_PARTS),
    // self.createGeneratorTest('POINT_FOR', map.getGenerator().POINT_FOR),
    // self.createGeneratorTest('HAS_MULTIPLE_PS', map.getGenerator().HAS_MULTIPLE_PS),
    // self.createGeneratorTest('R_TO', map.getGenerator().R_TO),
    // self.createGeneratorTest('R_EXISTS', map.getGenerator().R_EXISTS),
    // self.createGeneratorTest('WHAT_IS_R', map.getGenerator().WHAT_IS_R),
    // self.createGeneratorTest('DISTINGUISH_BETWEEN', map.getGenerator().DISTINGUISH_BETWEEN),
    // self.createGeneratorTest('IS_R_BETWEEN', map.getGenerator().IS_R_BETWEEN),
    // self.createGeneratorTest('CAN_BE_P', map.getGenerator().CAN_BE_P),
    // self.createGeneratorTest('MULTIPLE_PS_ARE', map.getGenerator().MULTIPLE_PS_ARE),
    // self.createGeneratorTest('P_PARTS', map.getGenerator().P_PARTS),
    // self.createGeneratorTest('COMPARE_CONTRAST', map.getGenerator().COMPARE_CONTRAST),
    // self.createGeneratorTest('R_PARTS', map.getGenerator().R_PARTS),
    // self.createGeneratorTest('PARTS_HAVE_RS', map.getGenerator().PARTS_HAVE_RS),
    // self.createGeneratorTest('PART_RS_EXIST', map.getGenerator().PART_RS_EXIST),
    // self.createGeneratorTest('PART_RS_ARE', map.getGenerator().PART_RS_ARE),
    // self.createGeneratorTest('WHAT_ABOUT', map.getGenerator().WHAT_ABOUT)

    // computePartsBounds

    // createRThing
    // addSelectedThingsAsChildrenOf
    // addSelectedThingAsOrderedSisterOf
    // addSelectedThingsAsSistersOf
    // addThingAsRThing
    // toggleDFlag
    // toggleSExpansion
    // togglePExpansion

    // presenter: select first slide and hit play; make sure first slide notes appear

    ];
};

},{}],34:[function(require,module,exports){
'use strict';

SandbankEditor.UI = function ($scope, $timeout, $http, $resource, $modal, $log, map) {

    var self = this;

    // ----------- tab ("slider") IDs - tabs are rendered in views/maps/_form --------------
    //this.TAB_ID_HISTORY = 'history-tab';
    this.TAB_ID_PRESENTER = 'presenter-tab';
    this.TAB_ID_ANALYTICS_MAP = 'analytics-tab-map';
    this.TAB_ID_ANALYTICS_THING = 'analytics-tab-thing';
    this.TAB_ID_PERSPECTIVES = 'perspectives-tab';
    this.TAB_ID_DISTINCTIONS = 'distinctions-tab';
    this.TAB_ID_ATTACHMENTS = 'attachments-tab';
    this.TAB_ID_GENERATOR = 'generator-tab';
    this.TAB_ID_STANDARDS = 'standards-tab';

    this.init = function () {};

    // ------------ editor options for map/user ----------

    var mapEditorOptions = {};

    var defaultEditorOptions = {
        // noArrows, to, from, toFrom
        defaultRelationshipDirection: 'noArrows',
        // left, right, stacked, freehand
        defaultThingLayout: 'left',
        // lines, spotlight, both
        perspectiveMode: 'lines'
    };

    // called when map is loaded to set stored options for map
    this.setMapEditorOptions = function (options) {
        mapEditorOptions = options;
    };

    // returns appropriate values from the user profile or the default options if options are not set for the map
    this.getMapEditorOptions = function () {
        var profileOptions = $scope.userProfile ? $scope.userProfile.editorOptions : null;
        var vals = [mapEditorOptions, profileOptions, defaultEditorOptions];
        mapEditorOptions = _.find(vals, function (val) {
            return !_.isEmpty(val);
        });
        return mapEditorOptions;
    };

    // saves default options for the user (map options are saved in autosave.js)
    function saveUserEditorOptions(options) {
        var data = {
            user: {
                editor_options: JSON.stringify(options)
            }
        };

        startSpinner();
        $http.put('/users/' + $scope.userId + '.json', data).then(function (response) {
            stopSpinner();
        }, function () {
            stopSpinner();
            $scope.profileEditStatus = 'Could not save editor options';
        });
    }

    // options modal

    $scope.editorOptions = new SandbankEditorOptions($scope, $http, $resource, $modal, $log);

    this.editOptions = function () {
        $scope.editorOptions.openModal(mapEditorOptions, function (options) {
            // onSaveDefaults
            saveUserEditorOptions(options);
        }, function (options) {
            // onUpdate
            mapEditorOptions = options;
            map.getAutosave().saveNow('edit_options');
        });
    };

    // ------------ state model ----------

    this.state = {};

    var defaultState = {
        showNavigator: false,
        currentTab: null,
        perspectivePointKey: null,
        distinctionThingKey: null
    };

    this.setStateData = function (data) {
        $scope.safeApply(function () {
            self.state = data || defaultState;
            //$scope.currentTab = self.state.currentTab;
        });
    };

    // TODO: Save state more frequently?? Currently it is only saved when autosave is triggered by other actions...

    this.getStateData = function () {
        return self.state;
    };

    // ----------- temporary state flags ------------

    this.zoomingToRegion = false;

    this.mouseOverGroup = null;
    this.mouseOverLink = null;

    this.dragTargetGroup = null;
    this.dragTargetPosition = null;

    this.helpTip = null;

    // ----------- handle bottom tabs ("sliders") -------------

    // in the following functions, ID is e.g. 'history-tab' (ID of one of the .bottom-tab's)

    // this is called by map.currentTabChanged, which is triggered by a $scope.$watch
    this.currentTabChanged = function (newValue, oldValue) {
        //console.log('ui, currentTabChanged: ' + newValue);
        self.state.currentTab = newValue;
    };

    this.currentTabIs = function (tabID) {
        return $scope.currentTab == tabID;
    };

    this.openTab = function (tabID) {
        $scope.safeApply(function () {
            $scope.currentTab = tabID;
        });
    };

    this.closeTab = function (tabID) {
        $scope.safeApply(function () {
            self.state.currentTab = null; // TODO: trigger autosave
            $scope.currentTab = null;
        });
    };

    this.disableTab = function (tabID) {
        // prevent opening other tabs when in P or D editor
        if ($scope.currentTab == self.TAB_ID_PERSPECTIVES || $scope.currentTab == self.TAB_ID_DISTINCTIONS) {
            return true;
        }
        return false;
    };

    this.toggleTab = function (tabID) {
        $scope.safeApply(function () {
            if ($scope.currentTab == tabID) {
                $scope.currentTab = null;
            } else if (!self.disableTab(tabID)) {
                $scope.currentTab = tabID;
            }
        });
    };

    this.toggleNavigator = function () {
        $scope.safeApply(function () {
            self.state.showNavigator = !self.state.showNavigator;
        });
    };

    this.toggleZoomingToRegion = function () {
        $scope.safeApply(function () {
            self.zoomingToRegion = !self.zoomingToRegion;
        });
    };

    // ----------------- zooming functions -------------------

    this.canZoomIn = function () {
        return map.getDiagram().scale < 32;
    };

    this.canZoomOut = function () {
        return map.getDiagram().scale > 0.25;
    };

    this.zoomIn = function () {
        var diagram = map.getDiagram();
        if (diagram.scale < 32) {
            var vb = diagram.viewportBounds.copy();
            diagram.scale = diagram.scale * 2;
            diagram.centerRect(vb);
        }
    };

    this.zoomOut = function () {
        var diagram = map.getDiagram();
        if (diagram.scale > 0.25) {
            var vb = diagram.viewportBounds.copy();
            diagram.scale = diagram.scale / 2;
            diagram.centerRect(vb);
        }
    };

    this.maybeZoomToRegion = function () {
        var diagram = map.getDiagram();
        // this flag is set by the toolbar button
        if (self.zoomingToRegion) {
            self.zoomingToRegion = false;
            //console.log('zoomToRegion, selection count: ' + diagram.selection.count);
            var rect = diagram.computePartsBounds(diagram.selection);
            diagram.zoomToRect(rect);
        }
        $scope.safeApply();
    };

    this.resetZoom = function () {
        var diagram = map.getDiagram();
        //var rect = diagram.computePartsBounds(diagram.nodes).copy();
        var rect = map.safeRect(map.computeMapBounds());
        //console.log('resetZoom, bounds: ' + rect);
        if (rect.width) {
            rect.inflate(rect.width / 5, rect.height / 5);
        }
        diagram.zoomToRect(rect);
        diagram.alignDocument(go.Spot.Center, go.Spot.Center);
        if (diagram.scale > 1) {
            diagram.scale = 1;
        }
    };

    // ------------ thing options (layout) ----------------

    this.getSelectedThingsOrDefaultLayout = function () {
        var sl = self.getSelectedThingsLayout();
        if (sl) {
            return sl;
        } else {
            return mapEditorOptions.defaultThingLayout;
        }
    };

    // returns a non-null value only if all selected items are groups with the same layout
    this.getSelectedThingsLayout = function () {
        var diagram = map.getDiagram();
        if (diagram === null || diagram.selection.count < 1) return null;

        var layout = null;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (!it.value instanceof go.Group) return null;
            var group = it.value;
            //console.log('getSelectedThingsLayout, it.value: ' + group);
            var groupLayout = group.data ? group.data.layout : null;
            if (layout !== null && groupLayout != layout) return null;
            layout = groupLayout;
        }
        //console.log('getSelectedThingsLayout: ' + layout);

        return layout;
    };

    // sets the layout of all selected things to the given layout
    this.setSelectedThingsLayout = function (layoutName) {
        var diagram = map.getDiagram();
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Group) {
                var group = it.value;
                diagram.model.setDataProperty(group.data, 'layout', layoutName);
                map.getLayouts().setDescendantLayouts(group, group.data.layout);
                map.refresh();
            }
        }
    };

    // ------------ relationship options (direction) ----------------

    this.getSelectedRelationshipsOrDefaultDirection = function () {
        var sd = self.getSelectedRelationshipsDirection();
        if (sd) {
            return sd;
        } else {
            return mapEditorOptions.defaultRelationshipDirection;
        }
    };

    // returns a non-null value only if all selected items are relationships with the same direction
    this.getSelectedRelationshipsDirection = function () {
        var diagram = map.getDiagram();
        if (diagram === null || diagram.selection.count < 1) return null;

        var type = null;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (!it.value instanceof go.Link) return null;
            var link = it.value;
            var linkType = link.data ? link.data.type : null;
            if (type !== null && linkType != type) return null;
            type = linkType;
        }

        return type;
    };

    // sets the direction of all selected relationships to the given direction
    this.setSelectedRelationshipsDirection = function (direction) {
        var diagram = map.getDiagram();
        //diagram.model.startTransaction("change relationship direction");
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Link) {
                //diagram.model.startTransaction("change link type");
                diagram.model.setDataProperty(it.value.data, 'type', direction);
                //diagram.model.commitTransaction("change link type");
            }
        }
        //diagram.commitTransaction("change relationship direction");
    };

    // ------- handle corner clicks and double clicks --------

    var _cornerClicked = null;
    var _cornerFunction = null;
    var _cornerTimeout = 300;

    this.handleCornerClick = function (corner, thing) {
        //console.log('handleCornerClick: corner = ' + corner + ', cornerClicked = ' + _cornerClicked);
        // assume it's a single click, and set handler
        _cornerFunction = getCornerFunction(corner, 1);
        // already clicked, so it's a double click; change handler
        if (_cornerClicked == corner) {
            _cornerFunction = getCornerFunction(corner, 2);
            //console.log('handleCornerClick: double click on ' + corner);
            return;
        }
        // remember that at least one click has happened for the current corner
        _cornerClicked = corner;

        // set timer to invoke whatever handler we have ready to go (unless another click happens within the interval)
        var timer = setTimeout(function () {
            // ding! invoke it
            if (_cornerFunction == self.showCornerTip) {
                _cornerFunction(thing, corner);
            } else {
                _cornerFunction(thing); // don't pass the corner arg to things like createChild that have a different second arg
            }
            // reset handler and clicked flag
            _cornerFunction = getCornerFunction(corner, 1);
            _cornerClicked = null;
        }, _cornerTimeout);
    };

    function getCornerFunction(corner, clicks) {
        if (corner == 'D') {
            return clicks == 1 ? self.showCornerTip : map.createSister;
        } else if (corner == 'S') {
            return clicks == 1 ? map.toggleSExpansion : map.createChild;
        } else if (corner == 'R') {
            return clicks == 1 ? self.showCornerTip : map.createRToSister;
        } else if (corner == 'P') {
            return clicks == 1 ? map.togglePExpansion : map.getPerspectives().setPEditorPoint;
        } else if (corner === '') {
            // click on text
            return clicks == 1 ? self.showCornerTip : editText;
        } else {
            return function () {};
        }
    }

    // NB: in this case the thing is actually the TextBox, except in outline layout it is a Panel if the box is double-clicked...
    function editText(thing, corner) {
        if (!$scope.canEdit) {
            return null;
        }

        //console.log('editText, thing: ' + thing);
        if (thing instanceof go.Panel) {
            // outline layout
            var part = thing.part;
            //console.log('editText, part: ' + part);
            if (part instanceof go.Group && part.data && (part.data.layout == 'left' || part.data.layout == 'right')) {
                var textBlockName = 'externaltext-' + part.data.layout;
                var text = thing.part.findObject(textBlockName);
                if (text) {
                    thing = text;
                }
            }
        }
        map.getDiagram().commandHandler.editTextBlock(thing);
    }

    // ---------------- help tip functions - see also user.js, views/maps/help_tab ---------------

    // shows thingTip or one of the cornerXTips
    this.showCornerTip = function (thing, corner) {
        //console.log('showCornerTip');
        if (corner === '') {
            self.showHelpTip('thingTip');
        } else {
            self.showHelpTip('corner' + corner + 'Tip');
        }
    };

    this.showHelpTip = function (tip) {
        //console.log('showHelpTip: ' + tip);

        // don't show help if in presenter
        if (self.currentTabIs(self.TAB_ID_PRESENTER)) {
            return;
        }

        self.helpTip = tip;
        $scope.safeApply();
        $('#help-tip').show();

        setTimeout(function () {
            $('#help-tip').fadeOut(500, function () {
                self.helpTip = null;
                $scope.safeApply();
            });
        }, 5000);
    };

    // ------------ edit map UserTags ---------------

    $scope.tagging = new SandbankTagging($scope, $http, $resource, $modal, $log);

    this.editUserTags = function () {
        $scope.tagging.openModal([$scope.mapId], true, // show description field
        function () {
            map.getAutosave().saveNow('edit_usertags');
        } // on update
        );
    };

    // ------------ edit map sharing ---------------

    $scope.sharing = new SandbankSharing($scope, $http, $resource, $modal, $log);

    this.editMapShares = function () {
        $scope.sharing.openModal([$scope.mapId], function () {} // on update
        );
    };

    // ------------ print/export to image ---------------

    this.printSlides = function () {
        startSpinner();
        map.getPresenter().createSlideThumbnails();
        stopSpinner();
        setTimeout(function () {
            window.print();
        }, 500);
    };

    var MILLION = 1000 * 1000;

    this.exportToImage = function (format) {

        $scope.imageExportLoading = true;
        $('#export-image img').remove();
        map.getTemplates().showExportFooter();

        var rect = map.getDiagram().computePartsBounds(map.getDiagram().nodes).copy();

        var imageMB = rect.width * rect.height * 4 / MILLION; // 4 bytes/pixel
        //console.log('imageMB: ' + imageMB);

        // make the max size of the image 10MB
        // pngSize = imageMB * scale * scale
        // so max scale = sqrt(pngSize / imageMB)
        // These calculations don't seem to be right, but in practice using 500 here
        // we get a scale of 2.43 for an image 19984 x 3424 pixels
        // which results in a file size of 1.88 MB at 32 bits/pixel...
        // OR 28380 x 5196 pixels, scale = 3.41 => file size = 3.49 MB
        var scale = 4;
        if (imageMB) {
            scale = Math.min(4, Math.sqrt(50 / imageMB));
        }

        //console.log('image dimensions: ' + rect.width + ' x ' + rect.height + ', image bytes: ' + (rect.width * rect.height * 4) +
        //        ', imageMB: ' + imageMB + ', scale: ' + scale);

        $scope.showImageExport = true;

        var partsToExport = new go.List();
        partsToExport.addAll(map.getDiagram().nodes);
        partsToExport.addAll(map.getDiagram().links);
        partsToExport.remove(map.getPresenter().slideBlocker);

        var doImage = $timeout(function () {
            var img = map.getDiagram().makeImage({
                parts: partsToExport,
                maxSize: new go.Size((rect.width + 200) * scale, (rect.height + 200) * scale),
                scale: scale,
                padding: 100 * scale,
                background: '#ffffff'
            });

            $('#export-image').append(img);
            $scope.imageExportLoading = false;

            map.getTemplates().hideExportFooter();
        }, 100);
    };

    // --------- utils -------------

    this.splitLines = function (text) {
        return text.split(/\n/);
    };
};

//console.log('getCornerFunction: no function found for corner: ' + corner + '!');

},{}],35:[function(require,module,exports){
'use strict';

window.Sandbank = {};

// the topmost controller for the app

window.UserCtrl = function ($rootScope, $scope, $http, $modal, $upload) {

    // query string params
    $scope.params = URI(window.location).query(true);

    // auto-open thinkquery?
    $scope.thinkquery = $scope.params.thinkquery ? true : false;

    $scope.userId = window.userId; // set in layouts/user
    $scope.userIsAdmin = window.userIsAdmin;
    $scope.userName = '';
    $scope.userProfile = null;
    $scope.profileEditStatus = '';
    $scope.password = '';
    $scope.passwordConfirm = '';

    $scope.getNewWindowName = function (action, mapId) {
        if (action == 'VIEW_MAP') {
            return 'VIEW_MAP_' + mapId;
        }
    };

    // show/hide tests UI and model debug form
    $scope.showTests = false;
    $scope.showModel = false;

    $scope.toggleShowTests = function () {
        $scope.showTests = !$scope.showTests;
    };
    $scope.toggleShowModel = function () {
        $scope.showModel = !$scope.showModel;
    };

    $scope.setUserId = function (id) {
        $scope.userId = id;
    };

    function init() {
        window.addEventListener('resize', fixRowHeights);
    }

    // make all cells in a row the same height
    function fixRowHeights() {}

    $scope.loadUserProfile = function (callback) {
        if ($scope.userId) {
            var url = '/users/' + $scope.userId + '/profile.json';
            window.startSpinner();
            $http.get(url).then(function (response) {
                // success
                $scope.userProfile = response.data;
                initSelectedAdminTags();
                initSelectedFollowableOrgs();
                if ($scope.ccsTagging) {
                    $scope.ccsTagging.loadCcsTags();
                }
                window.stopSpinner();
                if (callback) {
                    callback.call();
                }
                fixRowHeights();
            }, function (reason) {
                // error
                window.stopSpinner();
                alert('Could not load user profile data');
            });
        }
    };

    $scope.loadUserProfile();

    // -------------- courses/subscriptions ------------------

    // open the Stripe Checkout dialog and get a token
    // NB: amount is stored in the Stripe plan definition
    $scope.addSubscription = function (plan) {
        var handler = StripeCheckout.configure({
            key: $scope.userProfile.account.stripeKey,
            name: 'Subscribe to MetaMap',
            image: '/assets/badge-logo-64.png',
            description: plan.name,
            panelLabel: 'Pay {{amount}}/' + plan.interval,
            amount: plan.price,
            allowRememberMe: false,
            email: $scope.userProfile.user.email,
            token: function token(_token, args) {
                //console.log('token: ', token);
                window.startSpinner();
                $http.post('/charges/subscribe', {
                    plan_id: plan.code,
                    token_id: _token.id
                }).then(function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.success('Subscription created');
                    });
                }, function () {
                    $scope.loadUserProfile(function () {
                        alertify.error('Subscription could not be created');
                    });
                });
            }
        });
        handler.open();
    };

    // for buy-course-button directive
    $scope.getBuyButtonLabel = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            return 'Free';
        } else if (course = getEnrolledCourse(id)) {
            return 'Enrolled';
        } else if (course = getEnrollableCourse(id)) {
            return 'Enroll - $' + (course.price / 100).toFixed(2);
        } else {
            return '';
        }
    };

    $scope.getCourseStatusSummary = function (id) {
        var course = $scope.getCourse(id);
        if (course) {
            var text = course.stepsCompleted + ' of ' + course.steps + ' steps completed';
            if (course.enrolment) {
                text = 'Enrolled ' + course.enrolment.date + (course.enrolment.stripeData.refunded ? ' (Refunded)' : '') + ' - ' + text;
            }
            return course.code + ' - ' + text;
        } else {
            return null;
        }
    };

    $scope.getCourseCompletedPercent = function (id) {
        var course = $scope.getCourse(id);
        if (course) {
            return course.stepsCompletedPercent;
        } else {
            return null;
        }
    };

    $scope.maybeBuyCourse = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            window.location.href = '/courses/' + course.id;
        } else if (course = getEnrolledCourse(id)) {
            window.location.href = '/courses/' + course.id;
        } else if (course = getEnrollableCourse(id)) {
            $scope.buyCourse(course);
        }
    };

    $scope.getCourse = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            return course;
        } else if (course = getEnrolledCourse(id)) {
            return course;
        } else if (course = getEnrollableCourse(id)) {
            return course;
        }
        return null;
    };

    function getFreeCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.freeAccessibleCourses, function (course) {
            return course.id == id && course.enrolment == undefined;
        });
    }

    function getEnrolledCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.freeAccessibleCourses, function (course) {
            return course.id == id && course.enrolment !== undefined;
        });
    }

    function getEnrollableCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.nonFreeAccessibleCourses, function (course) {
            return course.id == id;
        });
    }

    // open the Stripe Checkout dialog and get a token
    // NB: amount is passed from our course definition
    $scope.buyCourse = function (course) {
        var handler = StripeCheckout.configure({
            key: $scope.userProfile.account.stripeKey,
            name: 'Enroll in Course',
            image: '/assets/badge-logo-64.png',
            description: course.code,
            amount: course.price,
            allowRememberMe: false,
            email: $scope.userProfile.user.email,
            token: function token(_token2, args) {
                //console.log('token: ', token);
                window.startSpinner();
                $http.post('/charges/buy_course', {
                    course_code: course.code,
                    course_price: course.price,
                    token_id: _token2.id
                }).then(function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.success('Course purchased');
                    });

                    // reload page to handle stripe bug (?) - links not clickable
                    window.setTimeout(function () {
                        window.location.reload();
                    }, 1000);
                }, function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.error('Course purchase could not be completed');
                        //console.log('stripe error: ', response);
                    });
                });
            }
        });
        handler.open();
    };

    $scope.cancelSubscription = function (subscription) {
        window.startSpinner();
        $http['delete']('/charges/unsubscribe?subscription_id=' + subscription.id).then(function (response) {
            $scope.loadUserProfile(function () {
                alertify.success('Subscription cancelled');
            });
        }, function () {
            $scope.loadUserProfile(function () {
                alertify.error('Subscription could not be cancelled');
            });
        });
    };

    // debug/test only
    $scope.clearCustomer = function () {
        window.startSpinner();
        $http['delete']('/charges/clear_customer').then(function (response) {
            $scope.loadUserProfile(function () {
                alertify.success('Customer cleared');
            });
        }, function () {
            $scope.loadUserProfile(function () {
                alertify.error('Customer could not be cleared');
            });
        });
    };

    // -------------- points and badges ----------------

    $scope.hasCurrentBadge = function (key, level) {
        return $scope.userProfile && $scope.userProfile.badges.current[key] == level;
    };

    $scope.hasNewBadge = function (key, level) {
        return $scope.userProfile && $scope.userProfile.badges['new'][key] == level;
    };

    $scope.hasNewBadges = function () {
        return $scope.userProfile && _.keys($scope.userProfile.badges['new']).length > 0;
    };

    $scope.getBadgeDefinition = function (key) {
        return _.findWhere($scope.userProfile.badges.definitions, {
            key: key
        });
    };

    // -------------- tutorial -----------------

    try {
        $scope.tutorialEnabled = function () {
            return window.mapData !== undefined;
        };

        // start tutorial:
        var _tutorial = new SandbankEditor.Tutorial();

        $scope.startTutorial = function () {
            _tutorial.start();
        };
    } catch (e) {}

    // -------------- feedback form -----------------

    $scope.feedback = '';

    $scope.toggleFeedback = function () {
        $('#feedback-dropdown').slideToggle('fast').find('textarea').get(0).focus();
    };

    $scope.submitFeedback = function () {
        if ($scope.feedback === '') {
            return; // empty input...
        }

        $.ajax({
            type: 'POST',
            url: '/users/feedback',
            data: {
                url: window.location.href,
                feedback: $scope.feedback
            },
            success: function success() {
                $scope.feedback = '';
                alert('Thank you for your feedback!');
            },
            error: function error() {}
        });

        $('#feedback-dropdown').slideToggle('fast');
    };

    // --------- user's user tags -----------

    // NB: this is similar to maps tagging in tagging.js - but simpler, as we do not have to deal with
    // multiple taggable items, which means tracking existing vs. new tags, etc...

    $scope.newTag = {
        name: ''
    };

    // tag autocomplete
    $scope.getUserTags = function (viewValue) {
        var url = '/user_tags/list.json?q=' + viewValue;
        return $http.get(url).then(function (response) {
            return response.data.tags;
        });
    };

    $scope.updateUserUserTags = function () {
        var tagList = _.pluck($scope.userProfile.userTags, 'name').join(',');
        $http.put('/user_tags/update_user_user_tags', [tagList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'Tags saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save tags';
        });
    };

    $scope.deleteTag = function (tag) {
        var i = _.indexOf($scope.userProfile.userTags, tag);
        $scope.userProfile.userTags.splice(i, 1);
        $scope.updateUserUserTags();
    };

    $scope.tagSelected = function (item, model, label) {
        //console.log('tagSelected: ', item, model, label);
        $scope.addTag(item.name);
    };

    $scope.editingTagKeypress = function (e) {
        if (e.which == 13) {
            $scope.addTag($scope.newTag.name);
        }
    };

    $scope.addTag = function (tagName) {
        $scope.userProfile.userTags.push({
            name: tagName
        });
        $scope.newTag.name = '';
        $scope.updateUserUserTags();
    };

    // --------- user's/map's CCS tags -----------

    // this manages CCS tags for either the current user or the current map,
    // depending which page we're on - mapId gets overridden in editor.js if we're editing a map

    try {
        $scope.ccsTagging = new SandbankCcsTagging($scope, $http, $modal);
        $scope.ccsTagging.mapId = null;
    } catch (e) {}

    // --------- user's admin tags -----------

    // key (index): admin tag ID; value: true/false (if user follows the admin tag)
    $scope.selectedUserAdminTags = [];

    function initSelectedAdminTags() {
        $scope.selectedUserAdminTags = [];
        _.each($scope.userProfile.adminTags, function (tag) {
            if (_.findWhere($scope.userProfile.userAdminTags, {
                id: tag.id
            })) {
                $scope.selectedUserAdminTags[tag.id] = true;
            }
        });
    }

    $scope.updateUserAdminTags = function () {
        var selectedTagNames = _.map($scope.userProfile.adminTags, function (tag) {
            return $scope.selectedUserAdminTags[tag.id] ? tag.name : null;
        });
        var tagList = _.without(selectedTagNames, null).join(',');
        $http.put('/admin_tags/update_user_admin_tags', [tagList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'Interests saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save interests';
        });
    };

    // --------- user's followed orgs -----------

    // key (index): org ID; value: true/false (if user follows the org)
    $scope.selectedFollowableOrganizations = [];

    $scope.userIsFollowingOrg = function (id) {
        return $scope.selectedFollowableOrganizations[id];
    };

    $scope.toggleUserFollowingOrg = function (id) {
        if (!$scope.selectedFollowableOrganizations[id] || confirm('Stop following this ThinkNation?')) {
            $scope.selectedFollowableOrganizations[id] = !$scope.selectedFollowableOrganizations[id];
            $scope.updateFollowedOrganizations();
        }
    };

    function initSelectedFollowableOrgs() {
        $scope.selectedFollowableOrganizations = [];
        _.each($scope.userProfile.followedOrganizations, function (org) {
            if (_.findWhere($scope.userProfile.followableOrganizations, {
                id: org.id
            })) {
                $scope.selectedFollowableOrganizations[org.id] = true;
            }
        });
    }

    $scope.updateFollowedOrganizations = function () {
        var selectedOrgIds = _.map($scope.userProfile.followableOrganizations, function (org) {
            return $scope.selectedFollowableOrganizations[org.id] ? org.id : null;
        });
        var orgIdList = _.without(selectedOrgIds, null).join(',');
        $http.put('/organization_follows/update_user_organization_follows', [orgIdList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'ThinkNations saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save ThinkNations';
        });
    };

    // --------- user's org memberships -----------

    $scope.joinNation = new SandbankJoinNation($scope, $http, $modal);

    function getMembershipForOrg(id) {
        return _.findWhere($scope.userProfile.memberships, {
            organizationId: id
        });
    }

    $scope.userIsMemberOfOrg = function (id) {
        if ($scope.userProfile) {
            return getMembershipForOrg(id) != undefined;
        } else {
            return false;
        }
    };

    $scope.toggleUserMemberOfOrg = function (id, name) {
        if ($scope.userIsMemberOfOrg(id)) {
            if (confirm('Remove your membership in this ThinkNation?')) {
                var membership = getMembershipForOrg(id);
                $http['delete']('/memberships/' + membership.id + '.json').then(function (response) {
                    $scope.loadUserProfile();
                });
            }
        } else {
            $scope.joinNation.openModal(id, name);
        }
    };

    // ------------ following other users ---------------

    $scope.followUser = function (user) {
        $http.post('/user_follows.json', {
            followee_id: user.id
        }).then(function (response) {
            user.followId = response.data;
            alertify.success('You are now following ' + user.name);
        }, function () {});
    };

    $scope.unfollowUser = function (user) {
        $http['delete']('/user_follows/' + user.followId + '.json').then(function (response) {
            user.followId = null;
            alertify.success('You are no longer following ' + user.name);
        }, function () {});
    };

    // ------------ following tags ---------------

    function followTag(controller, tag) {
        $http.post('/' + controller + '/' + tag.id + '/follow.json', {
            id: tag.id
        }).then(function (response) {
            tag.following = true;
            alertify.success('You are now following ' + tag.name);
        }, function () {});
    }

    function unfollowTag(controller, tag) {
        $http['delete']('/' + controller + '/' + tag.id + '/unfollow.json').then(function (response) {
            tag.following = false;
            alertify.success('You are no longer following ' + tag.name);
        }, function () {});
    }

    $scope.followUserTag = function (tag) {
        followTag('user_tags', tag);
    };
    $scope.unfollowUserTag = function (tag) {
        unfollowTag('user_tags', tag);
    };

    $scope.followAdminTag = function (tag) {
        followTag('admin_tags', tag);
    };
    $scope.unfollowAdminTag = function (tag) {
        unfollowTag('admin_tags', tag);
    };

    $scope.followCcsTag = function (tag) {
        followTag('common_core_standards', tag);
    };
    $scope.unfollowCcsTag = function (tag) {
        unfollowTag('common_core_standards', tag);
    };

    // ------------ auto-save user profile ---------------

    // don't let autosave be triggered more than every N milliseconds...
    $scope.autosave = _.debounce(autosaveNow, 2000);

    function autosaveNow() {
        //console.log('autosaving user profile');
        var data = {
            email: $scope.userProfile.user.email,
            alt_email: $scope.userProfile.user.altEmail,
            first_name: $scope.userProfile.user.firstName,
            last_name: $scope.userProfile.user.lastName,
            about_me: $scope.userProfile.user.aboutMe
        };
        if ($scope.passwordsMatch() && $scope.password.length) {
            data.password = $scope.password;
            data.password_confirmation = $scope.password;
        }

        startSpinner();
        $scope.profileEditStatus = 'Saving...';
        $http.put('/users/' + $scope.userId, data).then(function (response) {
            stopSpinner();
            if (_.has(data, 'password')) {
                $scope.profileEditStatus = 'Profile and password saved';
                //console.log($scope.profileEditStatus);
            } else {
                $scope.profileEditStatus = 'Profile saved';
                //console.log($scope.profileEditStatus);
            }
        }, function () {
            stopSpinner();
            $scope.profileEditStatus = 'Could not save profile';
        });
    }

    $scope.passwordsMatch = function () {
        return !$scope.password.length && !$scope.passwordConfirm.length || $scope.password == $scope.passwordConfirm;
    };

    // ------------ upload avatar ---------------

    // using: https://github.com/danialfarid/angular-file-upload
    $scope.onAvatarFileSelect = function ($files) {
        startSpinner();
        //$files: an array of files selected, each file has name, size, and type.
        for (var i = 0; i < $files.length; i++) {
            var file = $files[i];
            $scope.upload = $upload.upload({
                url: 'users/' + userId,
                method: 'PUT',
                withCredentials: true,
                file: file, // or list of files: $files for html5 only
                fileFormDataName: 'user[avatar]'
            }).success(function (data, status, headers, config) {
                $scope.loadUserProfile();
                $scope.profileEditStatus = 'Photo updated';
                stopSpinner();
            }).error(function () {
                stopSpinner();
                $scope.profileEditStatus = 'Error: Could not upload photo';
            })
            //.then(success, error, progress);
            ;
        }
    };

    // --------------- view helpers -------------------

    // returns e.g. "a day ago"
    // (NB: now is obtained from the DB to ensure that we have both dates in UTC;
    //    also, SQL vs. ruby dates need to be coerced into a similar format, both in UTC - see feed.json.jbuilder)
    $scope.getEventTime = function (t, now) {
        var time = moment(t, 'YYYY-MM-DD HH:mm:ss.SSS');
        var nowtime = moment(now, 'YYYY-MM-DD HH:mm:ss.SSS');
        // //console.log('t:       ' + t);
        // //console.log('now:     ' + now);
        // //console.log('time:    ' + time.format()); // + ' ' + time.isValid());
        // //console.log('nowtime: ' + nowtime.format()); // + ' ' + nowtime.isValid());
        return time.from(nowtime);
    };

    // --------------- notifications -------------------

    $scope.getNotificationFeedUrl = function (notification) {
        if (notification.actions.length) {
            var action = notification.actions[0];
            if (action.action == 'LIKE') {
                return '/social?like_id=' + action.likeId;
            } else if (action.action == 'COMMENT') {
                return '/social?comment_id=' + action.commentId;
            } else if (action.action == 'SHARE_INDIVIDUAL') {
                return '/maps/' + action.mapId;
            } else if (action.action == 'SHARE_PUBLIC') {
                return '/social?share_id=' + action.shareId;
            }
        }
        return '';
    };

    $scope.deleteNotification = function (notification) {
        $http['delete']('/notifications/' + notification.id + '.json').then(function (response) {
            // success
            notification.deleted = true;
        }, function (reason) {
            // error
            alert('Could not delete notification');
        });
    };

    $scope.notificationVerb = function (action) {
        var verbs = {
            LIKE: 'liked this:',
            COMMENT: 'commented on this:',
            SHARE_INDIVIDUAL: 'shared a MetaMap with you',
            SHARE_PUBLIC: 'shared a MetaMap with everyone',
            MAP_FOLLOW: 'followed a MetaMap:',
            USER_FOLLOW: 'followed you'
        };
        return verbs[action];
    };

    // ------------ utility functions ---------------

    // handy function for use with ng-class on radio buttons
    $scope.classIf = function (klass, b) {
        //console.log('classIf: ' + klass + ', ' + b);
        return b ? klass : '';
    };

    // avoid '$apply already in progress' error (source: https://coderwall.com/p/ngisma)
    $scope.safeApply = function (fn) {
        //console.log('safeApply on scope: ' + $scope);
        var phase = this.$root.$$phase;
        if (phase == '$apply' || phase == '$digest') {
            if (fn && typeof fn === 'function') {
                fn();
            }
        } else {
            this.$apply(fn);
        }
    };

    // source: http://ctrlq.org/code/19616-detect-touch-screen-javascript
    $scope.isTouchDevice = function () {
        return 'ontouchstart' in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
    };

    init();
};

window.UserCtrl.$inject = ['$rootScope', '$scope', '$http', '$modal', '$upload'];

// window.setTimeout(function() {
//     $('.row-height').each(function() { 
//         var highestBox = 0;
//         $('> div', this).each(function(){
//             if ($(this).height() > highestBox)
//                 highestBox = $(this).height();
//         }); 
//         $('> div', this).height(highestBox);
//     });       
// }, 300);

//console.error('error sending feedback: ', arguments);

},{}],36:[function(require,module,exports){
'use strict';

var ACTIONS = {
    MAP: 'map',
    NEW_MAP: 'new_map',
    COPY_MAP: 'copy_map',
    DELETE_MAP: 'delete_map',
    HOME: 'home',
    MY_MAPS: 'mymaps',
    TERMS_AND_CONDITIONS: 'terms'
};

Object.freeze(ACTIONS);

module.exports = ACTIONS;

},{}],37:[function(require,module,exports){
'use strict';

var ELEMENTS = {
    APP_CONTAINER: 'app-container',
    META_PROGRESS: 'meta_progress',
    META_PROGRESS_NEXT: 'meta_progress_next'
};

Object.freeze(ELEMENTS);

module.exports = ELEMENTS;

},{}],38:[function(require,module,exports){
'use strict';

var EVENTS = {
	SIDEBAR_OPEN: 'sidebar-open',
	SIDEBAR_CLOSE: 'sidebar-close'
};

Object.freeze(EVENTS);

module.exports = EVENTS;

},{}],39:[function(require,module,exports){
'use strict';

var ACTIONS = require('./actions.js');
var _ = require('lodash');

var PAGES = {
    MAP: 'map',
    NEW_MAP: 'new_map',
    COPY_MAP: 'copy_map',
    DELETE_MAP: 'delete_map',
    MY_MAPS: 'mymaps',
    TERMS_AND_CONDITIONS: 'terms'
};

_.extend();

Object.freeze(PAGES);

module.exports = PAGES;

},{"./actions.js":36,"lodash":undefined}],40:[function(require,module,exports){
'use strict';

var ROUTES = {
    MAPS_LIST: 'maps/list/',
    MAPS_DATA: 'maps/data/',
    MAPS_NEW_MAP: 'maps/new-map/',
    TERMS_AND_CONDITIONS: 'metamap/terms-and-conditions/',
    HOME: 'metamap/home/'
};

Object.freeze(ROUTES);

module.exports = ROUTES;

},{}],41:[function(require,module,exports){
'use strict';

var TAGS = {
    META_CANVAS: 'meta-canvas',
    HOME: 'home',
    TERMS: 'terms'
};

Object.freeze(TAGS);

module.exports = TAGS;

},{}],42:[function(require,module,exports){
"use strict";

var addThis = function addThis(apiKey) {

    (function (d, s, id) {
        var js,
            fjs = d.getElementsByTagName(s)[0],
            t = window.addthis || {};
        if (d.getElementById(id)) return t;
        js = d.createElement(s);
        js.id = id;
        js.src = "//s7.addthis.com/js/300/addthis_widget.js#pubid=" + apiKey;
        fjs.parentNode.insertBefore(js, fjs);

        t._e = [];
        t.ready = function (f) {
            t._e.push(f);
        };

        return t;
    })(document, "script", "add-this-js");

    var init = function init() {
        window.addthis.ready(function () {
            if (["#home", "#contact"].indexOf(window.location.hash) >= 0) {
                var tryCount = 0;
                var hideShares = function hideShares(keepGoing) {
                    if ($("#at4-share") && $("#at4-share").length >= 1) {
                        $("#at4-share").parent().hide();
                        if (keepGoing) {
                            _.delay(hideShares, 3000);
                        }
                    } else {
                        tryCount += 1;
                        if (tryCount < 60) {
                            _.delay(hideShares, 250);
                        }
                    }
                };
                hideShares(true);
            }
        });
    };
    return init;
};

module.exports = addThis;

},{}],43:[function(require,module,exports){
'use strict';

var facebookApi = function facebookApi(apiKey) {

    window.fbAsyncInit = function () {
        window.FB.init({
            appId: '847702775304906',
            xfbml: true,
            version: 'v2.3'
        });

        window.FB.Event.subscribe('edge.create', function (targetUrl) {
            window.ga('send', 'social', 'facebook', 'like', targetUrl);
        });

        window.FB.Event.subscribe('edge.remove', function (targetUrl) {
            window.ga('send', 'social', 'facebook', 'unlike', targetUrl);
        });

        window.FB.Event.subscribe('message.send', function (targetUrl) {
            window.ga('send', 'social', 'facebook', 'send', targetUrl);
        });
    };

    (function (d, s, id) {
        var js,
            fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = '//connect.facebook.net/en_US/sdk.js';
        fjs.parentNode.insertBefore(js, fjs);
    })(document, 'script', 'facebook-jssdk');

    return window.fbAsyncInit;
};

module.exports = facebookApi;

},{}],44:[function(require,module,exports){
'use strict';

var googleAnalytics = function googleAnalytics(api) {

    // Google Plus API
    (function () {
        var po = document.createElement('script');po.type = 'text/javascript';po.async = true;
        po.src = 'https://apis.google.com/js/platform.js';
        var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(po, s);
    })();

    //Google Tag Manager API
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];w[l].push({
            'gtm.start': new Date().getTime(), event: 'gtm.js'
        });var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != 'dataLayer' ? '&l=' + l : '';j.async = true;j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', api.tagmanager);

    // Google Analytics API
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments);
        }, i[r].l = 1 * new Date();a = s.createElement(o), m = s.getElementsByTagName(o)[0];a.async = 1;a.src = g;
        m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    window.ga('create', api.analytics, 'auto');
    window.ga('send', 'pageview');
    return window.ga;
};

module.exports = googleAnalytics;

},{}],45:[function(require,module,exports){
// Define our custom event handlers
'use strict';

function clickEventToAnalytics(intentEvent) {
    if (!intentEvent) return;
    var label = intentEvent.region;
    window.ga('send', 'social', 'twitter', intentEvent.type, label);
}

function tweetIntentToAnalytics(intentEvent) {
    if (!intentEvent) return;
    var label = 'tweet';
    window.ga('send', 'social', 'twitter', intentEvent.type, label);
}

function favIntentToAnalytics(intentEvent) {
    tweetIntentToAnalytics(intentEvent);
}

function retweetIntentToAnalytics(intentEvent) {
    if (!intentEvent) return;
    var label = intentEvent.data.source_tweet_id;
    window.ga('send', 'social', 'twitter', intentEvent.type, label);
}

function followIntentToAnalytics(intentEvent) {
    if (!intentEvent) return;
    var label = intentEvent.data.user_id + ' (' + intentEvent.data.screen_name + ')';
    window.ga('send', 'social', 'twitter', intentEvent.type, label);
}

var twitterApi = function twitterApi(apiKey) {

    window.twttr = (function (d, s, id) {
        var js,
            fjs = d.getElementsByTagName(s)[0],
            t = window.twttr || {};
        if (d.getElementById(id)) return t;
        js = d.createElement(s);
        js.id = id;
        js.src = 'https://platform.twitter.com/widgets.js';
        fjs.parentNode.insertBefore(js, fjs);

        t._e = [];
        t.ready = function (f) {
            t._e.push(f);
        };

        return t;
    })(document, 'script', 'twitter-wjs');

    window.twttr.ready(function (twitter) {
        twitter.widgets.load();
        twitter.events.bind('click', clickEventToAnalytics);
        twitter.events.bind('tweet', tweetIntentToAnalytics);
        twitter.events.bind('retweet', retweetIntentToAnalytics);
        twitter.events.bind('favorite', favIntentToAnalytics);
        twitter.events.bind('follow', followIntentToAnalytics);
    });

    var tryCount = 0;
    var load = function load() {
        if (window.twttr && window.twttr.widgets) {
            return window.twttr.widgets.load();
        } else if (tryCount < 5) {
            tryCount += 1;
            _.delay(load, 250);
        }
    };

    return load;
};

module.exports = twitterApi;

},{}],46:[function(require,module,exports){
'use strict';

var userSnap = function userSnap(config) {
    var apiKey = '032baf87-8545-4ebc-a557-934859371fa5.js',
        s,
        x;
    if (config == null) {
        config = {};
    }
    apiKey = config.USER_SNAP_API_KEY;
    if (apiKey && window.location.hostname !== 'localhost') {
        window.usersnapconfig = {
            mode: 'report',
            shortcut: true,
            beforeOpen: function beforeOpen(obj) {
                return UserSnap.setEmailBox(Doc.app.user.userName);
            }
        };
        s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//api.usersnap.com/load/' + apiKey + '.js';
        x = document.getElementsByTagName('head')[0];
        return x.appendChild(s);
    }
};

module.exports = userSnap;

},{}],47:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var riot = window.riot;
var NProgress = window.NProgress;
var pageBody = require('../../tags/page-body.js');
var ELEMENTS = require('../constants/elements.js');
var Actions = require('../actions/Action.js');

var PageFactory = (function () {
    function PageFactory(eventer, metaFire) {
        _classCallCheck(this, PageFactory);

        this.metaFire = metaFire;
        this.eventer = eventer;
        this.actions = new Actions(metaFire, eventer, this);
        this.onReady();
    }

    _createClass(PageFactory, [{
        key: 'onReady',
        value: function onReady() {
            if (!this._onReady) {
                this._onReady = new Promise(function (fulfill, reject) {
                    $('#' + ELEMENTS.META_PROGRESS).remove();
                    riot.mount('*');
                    NProgress.configure({ parent: '#' + ELEMENTS.META_PROGRESS_NEXT });

                    _.delay(function () {
                        Metronic.init(); // init metronic core componets
                        Layout.init(); // init layout
                        Demo.init(); // init demo features
                        Index.init(); // init index page
                        Tasks.initDashboardWidget(); // init tash dashboard widget
                        fulfill();
                    }, 250);
                });
            }
            return this._onReady;
        }
    }, {
        key: 'navigate',
        value: function navigate(path, id, action) {
            var _actions;

            for (var _len = arguments.length, params = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {
                params[_key - 3] = arguments[_key];
            }

            var act = (_actions = this.actions).act.apply(_actions, [path, id, action].concat(params));
            if (!act) {
                var _eventer;

                (_eventer = this.eventer)['do'].apply(_eventer, [path, path, { id: id, action: action }].concat(params));
            }
        }
    }]);

    return PageFactory;
})();

module.exports = PageFactory;

},{"../../tags/page-body.js":58,"../actions/Action.js":3,"../constants/elements.js":37}],48:[function(require,module,exports){
'use strict';

if (!String.prototype.format) {
    String.prototype.format = function () {
        var args = arguments;
        return this.replace(/{(\d+)}/g, function (match, number) {
            return typeof args[number] != 'undefined' ? args[number] : match;
        });
    };
}

},{}],49:[function(require,module,exports){
'use strict';

var uuid = function uuid() {
    var hexDigits, i, s, uuid;
    s = [];
    s.length = 36;
    hexDigits = '0123456789abcdef';
    i = 0;
    while (i < 36) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
        i += 1;
    }
    s[14] = '4';
    s[19] = hexDigits.substr(s[19] & 0x3 | 0x8, 1);
    s[8] = s[13] = s[18] = s[23] = '-';
    uuid = s.join('');
    return uuid;
};

module.exports = uuid;

},{}],50:[function(require,module,exports){
'use strict';

var riot = require('riot');
var NProgress = window.NProgress;

var html = '\n<div class="portlet light">\n    <div class="portlet-body" id="diagram"></div>\n</div>\n<div id="overview-diagram" style="display: none;"></div>\n';

module.exports = riot.tag('meta-canvas', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.mapId = null;
    this.canvas = null;

    this.buildCanvas = function (map) {
        if (!_this.canvas) {
            $(_this.diagram).empty();
            $(_this['overview-diagram']).empty();

            var x = {
                mapId: _this.mapId,
                ccsTagging: {},
                safeApply: function safeApply(fn) {
                    if (fn) {
                        for (var _len = arguments.length, params = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                            params[_key - 1] = arguments[_key];
                        }

                        fn.apply(undefined, params);
                    }
                },
                $watch: function $watch() {},
                get: function get() {
                    return { then: function then() {} };
                },
                isTouchDevice: function isTouchDevice() {
                    return false;
                }
            };

            _this.update();

            x.mapData = map;
            map.metadata = {
                sandbox: null,
                canEdit: true
            };
            map.state_data = {
                'showNavigator': false,
                'currentTab': null,
                'perspectivePointKey': null,
                'distinctionThingKey': null
            };
            map.editor_options = {
                'defaultRelationshipDirection': 'noArrows',
                'defaultThingLayout': 'left',
                'perspectiveMode': 'lines'
            };

            _this.canvas = MapEditorCtrl(x, x, x, x, x);
        } else {
            if (map.changed_by != MetaMap.User.userKey) {
                _this.canvas.map.load(map.data);
            }
        }
        NProgress.done();
    };

    this.build = function (opts) {
        if (opts.id != _this.mapId) {
            _this.canvas = null;
            if (_this.mapId) {
                MetaMap.MetaFire.off('maps/data/' + _this.mapId);
            }
            _this.mapId = opts.id;
            NProgress.start();

            MetaMap.MetaFire.on('maps/data/' + opts.id, _this.buildCanvas);
            MetaMap.Eventer.forget('map', _this.build);
        }
    };

    MetaMap.Eventer.every('map', this.build);

    this.correctHeight = function () {
        $(_this.diagram).css({
            height: window.innerHeight - 154 + 'px'
        });
    };

    this.on('update', function () {
        _this.correctHeight();
    });

    $(window).resize(function () {
        _this.correctHeight();
    });
});

},{"../../entry.js":2,"riot":"riot"}],51:[function(require,module,exports){
/// <reference path="../../../../typings/jquery/jquery.d.ts" />
/// <reference path="../../../../typings/lodash/lodash.d.ts" />
/// <reference path="../../../../typings/riotjs/riotjs.d.ts" />

'use strict';

var $ = require('jquery');
var riot = require('riot');
var metaTable = require('./meta-table.js');

var html = '\n<div class="modal fade" id="full" tabindex="-1" role="dialog" aria-hidden="true">\n    <div class="modal-dialog modal-full">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n                <h4 if="{title}" class="modal-title">{title}</h4>\n            </div>\n            <div id="modal_content" class="modal-body">\n\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn default" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n';

module.exports = riot.tag('meta-dialog', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.title = '';
    this.visible = false;
    this.load = _.once(function () {
        riot.mount(_this.modal_content, 'meta-table');
    });

    $(this.full).on('hide.bs.modal', function () {
        _this.visible = false;
        if (MetaMap.Router.currentPage == 'mymaps') {
            MetaMap.Router.back();
        }
    });

    this.show = function () {
        if (!_this.visible) {
            _this.load();
            $(_this.full).modal('show');
            _this.visible = true;
        }
    };

    this.hide = function () {
        if (_this.visible) {
            $(_this.full).modal('hide');
            _this.visible = false;
        }
    };

    this.toggle = function () {
        if (_this.visible) {
            _this.hide();
        } else {
            _this.show();
        }
    };

    MetaMap.Eventer.every('nav mymaps', function (event) {
        if (event == 'nav') {
            _this.hide();
        } else {
            _this.show();
        }
    });
});

},{"../../entry.js":2,"./meta-table.js":52,"jquery":undefined,"riot":"riot"}],52:[function(require,module,exports){
'use strict';

var riot = require('riot');
var NProgress = window.NProgress;
var _ = require('lodash');

var html = '\n<div class="row">\n    <div class="col-md-12">\n        <div class="portlet box grey-cascade">\n            <div class="portlet-title">\n                <div class="caption">\n                    <i class="fa fa-icon-th-large"></i>My Maps\n                </div>\n                <div if="{ menu }" class="actions">\n                    <a each="{ menu.buttons }" href="{ link }" onclick="{ parent.onActionClick }" class="btn btn-default btn-sm">\n                        <i class="{ icon }"></i> { title }\n                    </a>\n                    <div class="btn-group">\n                        <a class="btn btn-default btn-sm" href="javascript:;" data-toggle="dropdown">\n                            <i class="fa fa-cogs"></i> Tools <i class="fa fa-angle-down"></i>\n                        </a>\n                        <ul class="dropdown-menu pull-right">\n                            <li each="{ menu.menu }" onclick="{ parent.onMenuClick }">\n                                <a href="{ link }">\n                                    <i class="{ icon }"></i> { title }\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <div class="portlet-body">\n                <div class="table-toolbar">\n\n                </div>\n                <table class="table table-striped table-bordered table-hover" id="mymaps_table">\n                    <thead>\n                        <tr>\n                            <th style="display: none;">\n                                MapId\n                            </th>\n                            <th class="table-checkbox">\n                                <input type="checkbox" class="group-checkable" data-set="#mymaps_table .checkboxes"/>\n                            </th>\n                            <th style="display: none;">\n                                UserId\n                            </th>\n                            <th>\n                                Name\n                            </th>\n                            <th>\n                                Created On\n                            </th>\n                            <th>\n                                Status\n                            </th>\n                            <th>\n                                Action\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr each="{ data }" class="odd gradeX">\n                            <td style="display: none;" ><span data-selector="id" class ="mapid">{ id }</span></td>\n                            <td>\n                                <input type="checkbox" class="checkboxes" value="1"/>\n                            </td>\n                            <td style="display: none;">{ user_id }</td>\n                            <td class="meta-editable" data-pk="{ id }" data-title="Edit Map Name">{ name }</td>\n                            <td class="center">{ created_at }</td>\n                            <td>\n                                <span class="label label-sm label-success">\n                                    Private\n                                </span>\n                            </td>\n                            <td>\n                                <button class="btn btn-sm blue filter-submit" onclick="{ parent.onOpen }">\n                                    <i class="fa fa-icon-eye-open"></i> Open\n                                </button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n';

module.exports = riot.tag('meta-table', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.data = null;
    this.menu = null;

    this.onOpen = function (event) {
        MetaMap.Router.to('map/' + event.item.id);
    };

    this.onActionClick = function (event, tag) {
        debugger;
    };

    this.onMenuClick = function (event, tag) {
        switch (event.item.title.toLowerCase()) {
            case 'delete':
                var deleteMaps = require('../../js/actions/DeleteMap.js');
                var selected = _this.table.find('.active').find('.mapid');
                var ids = [];
                _.each(selected, function (cell) {
                    ids.push(cell.innerHTML);
                });
                deleteMaps.deleteAll(ids);
                break;
        }
    };

    this.on('mount', function () {
        NProgress.start();
        MetaMap.MetaFire.on('metamap/mymaps', function (data) {
            if (data) {
                _this.menu = {
                    buttons: _.sortBy(data.buttons, 'order'),
                    menu: _.sortBy(data.menu, 'order')
                };
                _this.update();
            }
        });

        MetaMap.MetaFire.getChild('maps/list').orderByChild('owner').equalTo(MetaMap.User.userId).on('value', function (val) {
            var data = val.val();
            try {
                _this.data = _.map(data, function (obj, key) {
                    obj.id = key;
                    obj.created_at = moment(obj.created_at).format('YYYY-MM-DD');
                    return obj;
                });
                if (_this.table) {
                    $('.meta-editable').editable('destroy');
                    _this.dataTable.destroy();
                    //this.table.empty();
                }

                _this.update();

                _this.table = $(_this.mymaps_table);
                _this.dataTable = _this.table.DataTable({

                    // Uncomment below line("dom" parameter) to fix the dropdown overflow issue in the datatable cells. The default datatable layout
                    // setup uses scrollable div(table-scrollable) with overflow:auto to enable vertical scroll(see: assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js).
                    // So when dropdowns used the scrollable div should be removed.
                    //"dom": "<'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r>t<'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",

                    //"bStateSave": true, // save datatable state(pagination, sort, etc) in cookie.
                    'columns': [{
                        orderable: false
                    }, {
                        'orderable': false
                    }, {
                        'orderable': true
                    }, {
                        'orderable': true
                    }, {
                        'orderable': true
                    }, {
                        'orderable': false
                    }, {
                        'orderable': false
                    }]
                });
                //this.tableTools = new $.fn.dataTable.TableTools(this.dataTable, {});

                var tableWrapper = _this.table.parent().parent().parent().find('#mymaps_table_wrapper');

                _this.table.find('.group-checkable').change(function () {
                    var set = jQuery(this).attr('data-set');
                    var checked = jQuery(this).is(':checked');
                    jQuery(set).each(function () {
                        if (checked) {
                            $(this).attr('checked', true);
                            $(this).parents('tr').addClass('active');
                        } else {
                            $(this).attr('checked', false);
                            $(this).parents('tr').removeClass('active');
                        }
                    });
                    jQuery.uniform.update(set);
                });

                _this.table.on('change', 'tbody tr .checkboxes', function () {
                    $(this).parents('tr').toggleClass('active');
                });

                tableWrapper.find('.dataTables_length select').addClass('form-control input-xsmall input-inline'); // modify table per page dropdown

                $('.meta-editable').editable({ unsavedclass: null }).on('save', function (event, params) {
                    var id = this.dataset.pk;
                    MetaMap.MetaFire.setData(params.newValue, 'maps/list/' + id + '/name');
                    return true;
                });

                NProgress.done();
            } catch (e) {
                NProgress.done();
                MetaMap.error(e);
            }
        });
    });
});

},{"../../entry.js":2,"../../js/actions/DeleteMap.js":6,"lodash":undefined,"riot":"riot"}],53:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n            <i class="fa fa-graduation-cap"></i>\n        </a>\n        <ul class="dropdown-menu">\n            <li>\n                <ul class="dropdown-menu-list scroller" style="height: 270px;" data-handle-color="#637283">\n                    <li if="{ help }"\n                        each="{ help }"\n                        onclick="{ parent.onClick }">\n                        <a href="{ link }">\n                            <i class="{ icon }"></i>\n                            <span class="title">{ title }</span>\n                        </a>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n';

riot.tag('meta-help', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.onClick = function (event, params) {
        console.log(event, params);
        return true;
    };

    this.help = null;
    this.on('mount', function () {
        MetaMap.MetaFire.on('metamap/help', function (data) {
            _this.help = _.filter(_.sortBy(data, 'order'), function (d) {
                var include = d.archive != true;
                return include;
            });
            _this.update();
        });
    });
});

},{"../../entry.js":2,"riot":"riot"}],54:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n                    <i class="fa fa-bell-o"></i>\n                    <span class="badge badge-success">\n                        { notifications.length }\n                    </span>\n                </a>\n                <ul class="dropdown-menu">\n                    <li class="external">\n                        <h3>\n                            <span class ="bold">{ notifications.length } pending</span> notification{ s: notifications.length == 0 || notifications.length > 1 }\n                        </h3>\n                        <a href="javascript:;">view all</a>\n                    </li>\n                    <li>\n                        <ul class="dropdown-menu-list scroller" style="height: 250px;" data-handle-color="#637283">\n                            <li if="{ notifications }"\n                                each="{ notifications }"\n                                onclick="{ parent.onClick }">\n                                <a href="javascript:;">\n                                    <span class="time">{ time }</span>\n                                    <span class="details">\n                                        <span class="label label-sm label-icon label-success">\n                                            <i class="fa fa-plus"></i>\n                                        </span>\n                                        { event }\n                                    </span>\n                                </a>\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n';

riot.tag('meta-notifications', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.notifications = [];

    this.onClick = function (event, params) {
        console.log(event, params);
        return true;
    };

    this.on('mount', function () {
        MetaMap.MetaFire.on('metamap/notifications', function (data) {
            _this.notifications = _.filter(_.sortBy(data, 'order'), function (d) {
                var include = d.archive != true;
                return include;
            });
            _this.update();
        });
    });
});

},{"../../entry.js":2,"riot":"riot"}],55:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n                    <i class="fa fa-trophy"></i>\n                    <span class="badge badge-success">\n                        { points.length }\n                    </span>\n                </a>\n                <ul class="dropdown-menu">\n                    <li class="external">\n                        <h3>\n                            <span class ="bold">{ points.length } new </span> achievement{ s: points.length == 0 || points.length > 1 }\n                        </h3>\n                        <a href="javascript:;">view all</a>\n                    </li>\n                    <li>\n                        <ul class="dropdown-menu-list scroller" style="height: 250px;" data-handle-color="#637283">\n                            <li if="{ points }"\n                                each="{ points }"\n                                onclick="{ parent.onClick }">\n                                <a href="javascript:;">\n                                    <span class="time">{ time }</span>\n                                    <span class="details">\n                                        <span class="label label-sm label-icon label-success">\n                                            <i class="fa fa-plus"></i>\n                                        </span>\n                                        { event }\n                                    </span>\n                                </a>\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n';

riot.tag('meta-points', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');
    this.points = [];

    this.onClick = function (event, params) {
        console.log(event, params);
        return true;
    };

    this.on('mount', function () {
        MetaMap.MetaFire.on('users/' + MetaMap.User.userId + '/points', function (data) {
            _this.points = _.filter(_.sortBy(data, 'order'), function (d) {
                var include = d.archive != true;
                return include;
            });
            _this.update();
        });
    });
});

},{"../../entry.js":2,"riot":"riot"}],56:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n                    <span class="username username-hide-on-mobile">\n                        { username }\n                    </span>\n                    <img alt="" height="39" width="39" class="img-circle" src="{ picture }" />\n                </a>\n                <ul class="dropdown-menu dropdown-menu-default">\n                    <li if="{ menu }"\n                        each="{ menu }"\n                        onclick="{ parent.onClick }">\n                        <a href="{ link }">\n                            <i class="{ icon }"></i> { title }\n                        </a>\n                    </li>\n                </ul>\n';

riot.tag('meta-user', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.menu = [];
    this.username = '';
    this.picture = '';

    this.logout = function () {
        MetaMap.logout();
    };

    this.linkAccount = function () {
        MetaMap.Auth0.linkAccount();
    };

    this.onClick = function (event, params) {
        switch (event.item.link) {
            case '#logout':
                _this.logout();
                return false;
                break;

            case '#link-social-accounts':
                _this.linkAccount();
                return false;
                break;

            default:
                console.log(event, params);
                return true;
                break;
        }
    };

    this.on('mount', function () {
        MetaMap.MetaFire.on('metamap/user', function (data) {
            _this.username = MetaMap.User.displayName;
            _this.picture = MetaMap.User.picture;
            _this.menu = _.filter(_.sortBy(data, 'order'), function (d) {
                var include = d.archive != true;
                return include;
            });
            _this.update();
        });
    });
});

},{"../../entry.js":2,"riot":"riot"}],57:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '\n<div class="page-actions">\n    <div class="btn-group">\n        <button type="button" class="btn red-haze btn-sm dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n            <span class="hidden-sm hidden-xs">Actions&nbsp;</span>\n            <i class="fa fa-angle-down"></i>\n        </button>\n        <ul class="dropdown-menu" role="menu">\n            <li each="{ val, i in data }" class="{ start: i == 0, active: i == 0 }">\n                <a if="{ parent.getLinkAllowed(val) }" href="{ parent.getActionLink(val) }">\n                    <i class="{ val.icon }"></i> { val.title }\n                </a>\n            </li>\n            <li class="divider"></li>\n            <li>\n                <a href="#settings">\n                    <i class="fa fa-gear"></i> Settings\n                </a>\n            </li>\n        </ul>\n    </div>\n\n    <span style="padding-left: 5px;">\n        <span if="{ pageName }"\n                id="map_name"\n                data-type="text"\n                data-title="Enter map name">\n            { pageName }\n        </span>\n    </span>\n</div>\n';

module.exports = riot.tag('page-actions', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');

    this.data = [];
    this.pageName = 'Home';
    this.url = MetaMap.config.site.db + '.firebaseio.com';
    this.loaded = false;

    this.getActionLink = function (obj) {
        var ret = obj.link;
        if (obj.url_params) {
            (function () {
                var args = [];
                _.each(obj.url_params, function (prm) {
                    args.push(_this[prm.name]);
                });
                ret = obj.link.format.call(obj.link, args);
            })();
        }
        return ret;
    };

    this.getLinkAllowed = function (obj) {
        var ret = true == obj['allowed-on']['*'];
        if (!ret) {
            var currentPage = MetaMap.Router.currentPath;
            ret = true == obj['allowed-on'][currentPage];
        }
        return ret;
    };

    this.bindTopageName = _.once(function () {
        MetaMap.MetaFire.on('maps/list/' + _this.mapId + '/name', function (name) {
            _this.pageName = name || '';
            _this.update();
        });
        _this.loaded = true;
    });

    MetaMap.Eventer.every('pageName', function (opts) {
        if (_this.loaded) {
            $(_this.map_name).editable('destroy');
        }
        if (_this.mapId) {
            MetaMap.MetaFire.off('maps/list/' + _this.mapId + '/name');
            MetaMap.MetaFire.on('maps/list/' + opts.id + '/name', function (name) {
                _this.pageName = name;
                _this.update();
            });
        }
        _this.pageName = opts.name || 'Home';
        _this.mapId = opts.id;
        _this.update();
        if (_this.mapId) {
            $(_this.map_name).editable({ unsavedclass: null }).on('save', function (event, params) {
                MetaMap.MetaFire.setData(params.newValue, 'maps/list/' + _this.mapId + '/name');
            });
            _this.bindTopageName();
        }
    });

    MetaMap.MetaFire.on('metamap/actions', function (data) {
        _this.data = _.filter(_.sortBy(data, 'order'), function (d) {
            var include = d.archive != true;
            return include;
        });
        _this.update();
    });
});

},{"../entry.js":2,"riot":"riot"}],58:[function(require,module,exports){
'use strict';

var riot = require('riot');
var pageHeader = require('./page-header');
var pageContainer = require('./page-container');
var metaDialog = require('./components/meta-dialog');
var pageFooter = require('./page-footer');
var EVENTS = require('../js/constants/events');

var html = '\n<div id="page_body" class="page-header-fixed page-sidebar-closed-hide-logo page-sidebar-closed-hide-logo">\n\n    <div id="meta_page_header"></div>\n\n    <div class="clearfix">\n    </div>\n\n    <div id="meta_page_container"></div>\n\n</div>\n\n<div id="meta_page_dialog"></div>\n\n<div id="meta_page_footer"></div>';

module.exports = riot.tag('page-body', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');

    this.on('mount', function () {
        riot.mount(_this.meta_page_header, 'page-header');
        riot.mount(_this.meta_page_container, 'page-container');
        riot.mount(_this.meta_page_dialog, 'meta-dialog');
        riot.mount(_this.meta_page_footer, 'page-footer');
    });

    MetaMap.Eventer.on(EVENTS.SIDEBAR_CLOSE, function () {
        $(_this.page_body).addClass('page-sidebar-reversed');
    });

    MetaMap.Eventer.on(EVENTS.SIDEBAR_OPEN, function () {
        $(_this.page_body).removeClass('page-sidebar-reversed');
    });
});

},{"../entry.js":2,"../js/constants/events":38,"./components/meta-dialog":51,"./page-container":59,"./page-footer":61,"./page-header":62,"riot":"riot"}],59:[function(require,module,exports){
'use strict';

var riot = require('riot');
var pageSidebar = require('./page-sidebar.js');
var pageContent = require('./page-content.js');

var html = '\n<div class="page-container">\n    <div id="meta_page_sidebar"></div>\n    <div id="meta_page_content"></div>\n</div>\n';

module.exports = riot.tag('page-container', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');

    this.on('mount', function () {
        riot.mount(_this.meta_page_sidebar, 'page-sidebar');
        riot.mount(_this.meta_page_content, 'page-content');
    });
});

},{"../entry.js":2,"./page-content.js":60,"./page-sidebar.js":65,"riot":"riot"}],60:[function(require,module,exports){
'use strict';

var riot = require('riot');
var EVENTS = require('../js/constants/events');
var _ = require('lodash');

var html = '\n<div class="page-content-wrapper">\n    <div id="page-content" class="page-content">\n\n        <div class="page-head">\n\n        </div>\n\n\n        <div id="app-container">\n\n        </div>\n    </div>\n</div>\n';

module.exports = riot.tag('page-content', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');

    MetaMap.Eventer.on(EVENTS.SIDEBAR_CLOSE, function () {
        var width = window.innerWidth;
        $(_this['app-container']).css({ width: width - 46 + 'px' });
    });

    $(window).on('resize', function () {
        $(_this['app-container']).css({ width: '100%' });
    });

    MetaMap.Eventer.on(EVENTS.SIDEBAR_OPEN, function () {
        $(_this['app-container']).css({ width: '100%' });
    });
});

},{"../entry.js":2,"../js/constants/events":38,"lodash":undefined,"riot":"riot"}],61:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '\n<div class="page-footer" style="position: fixed; bottom: 0;">\n    <div class="page-footer-inner">\n        <a href="#terms">&copy;2015</a>\n    </div>\n</div>\n';

module.exports = riot.tag('page-footer', html, function (opts) {

    var MetaMap = require('../entry.js');
});

},{"../entry.js":2,"riot":"riot"}],62:[function(require,module,exports){
'use strict';

var riot = require('riot');
var pageLogo = require('./page-logo.js');
var pageActions = require('./page-actions.js');
var pageSearch = require('./page-search.js');
var pageTopMenu = require('./page-topmenu');

var html = '\n<div id="header-top" class="page-header navbar navbar-fixed-top">\n    <div id="meta_progress_next" style="overflow: inherit;"></div>\n    <div id="header-content" class="page-header-inner">\n\n        <div id="meta_page_logo"></div>\n        \n        <div id="meta_page_actions"></div>\n        \n        <div id="meta_page_top" class="page-top">\n            <div id="meta_page_search"></div>\n            \n            <div id="meta_page_topmenu"></div>\n        </div>\n\n    </div>\n\n</div>\n';

module.exports = riot.tag('page-header', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');

    this.on('mount', function () {
        riot.mount(_this.meta_page_logo, 'page-logo');
        riot.mount(_this.meta_page_actions, 'page-actions');
        riot.mount(_this.meta_page_top, 'page-search');
        riot.mount(_this.meta_page_top, 'page-topmenu');
    });
});

},{"../entry.js":2,"./page-actions.js":57,"./page-logo.js":63,"./page-search.js":64,"./page-topmenu":66,"riot":"riot"}],63:[function(require,module,exports){
'use strict';

var riot = require('riot');
var EVENTS = require('../js/constants/events');

var html = '\n<div class ="page-logo">\n    <a id="meta_logo" href="#home">\n        <img src="metamap/assets/img/metamap_cloud.png" alt="logo" class ="logo-default" />\n    </a>\n    <div id="meta_menu_toggle" class ="menu-toggler sidebar-toggler" style="{ getDisplay(\'menu\') }">\n        <!--DOC: Remove the above "hide" to enable the sidebar toggler button on header-->\n    </div>\n</div>\n<a href="javascript:;" class ="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse">\n</a>\n';

module.exports = riot.tag('page-logo', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');
    this.display = true;

    this.getDisplay = function (el) {

        if (!_this.display) {
            return 'display: none;';
        } else {
            return '';
        }
    };

    MetaMap.Eventer.on(EVENTS.SIDEBAR_CLOSE, function () {
        _this.display = false;
        _this.update();
    });

    MetaMap.Eventer.on(EVENTS.SIDEBAR_OPEN, function () {
        _this.display = true;
        _this.update();
    });
});

},{"../entry.js":2,"../js/constants/events":38,"riot":"riot"}],64:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '\n<!-- DOC: Apply "search-form-expanded" right after the "search-form" class to have half expanded search box -->\n<form class="search-form" action="extra_search.html" method="GET">\n    <div class="input-group">\n        <input type="text" class="form-control input-sm" placeholder="Search..." name="query">\n            <span class="input-group-btn">\n                <a href="javascript:;" class="btn submit">\n                    <i class="fa fa-search"></i>\n                </a>\n            </span>\n        </div>\n</form>\n';

module.exports = riot.tag('page-search', html, function (opts) {

    var MetaMap = require('../entry.js');
});

},{"../entry.js":2,"riot":"riot"}],65:[function(require,module,exports){
'use strict';

var riot = require('riot');
var EVENTS = require('../js/constants/events');

var html = '\n<div class="page-sidebar-wrapper" style="{ getDisplay() }">\n    <div class="page-sidebar navbar-collapse collapse">\n        <ul class="page-sidebar-menu " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200">\n\n            <li if="{ data }" onclick="{ parent.click }" each="{ data }">\n                <a if="{ icon }" href="javascript:;">\n                    <i class="{ icon }" style="color:#{ color };"></i>\n                    <span class="title">{ title }</span>\n                    <span class="{ arrow: menu.length }"></span>\n                </a>\n                <ul if="{ menu && menu.length }" class="sub-menu">\n                    <li each="{ menu }">\n                        <a href="javascript:;">\n                            <i class="{ icon }"></i>\n                            <span class="title">{ title }</span>\n                        </a>\n                    </li>\n                </ul>\n            </li>\n\n        </ul>\n\n    </div>\n</div>\n';

module.exports = riot.tag('page-sidebar', html, function (opts) {
    var _this = this;

    var MetaMap = require('../entry.js');

    this.click = function () {
        console.log('foo');
    };
    this.display = true;
    this.data = [];

    MetaMap.MetaFire.on('metamap/sidebar', function (data) {
        _this.data = _.filter(_.sortBy(data, 'order'), function (d) {
            var include = d.archive != true;
            if (include && d.menu && d.menu) {
                d.menu = _.filter(_.sortBy(d.menu, 'order'), function (m) {
                    return m.archive != true;
                });
            }
            return include;
        });
        _this.update();
    });

    this.getDisplay = function () {
        if (!_this.display) {
            return 'display: none;';
        } else {
            return '';
        }
    };

    MetaMap.Eventer.on(EVENTS.SIDEBAR_CLOSE, function () {
        _this.display = false;
        _this.update();
    });

    MetaMap.Eventer.on(EVENTS.SIDEBAR_OPEN, function () {
        _this.display = true;
        _this.update();
    });
});

},{"../entry.js":2,"../js/constants/events":38,"riot":"riot"}],66:[function(require,module,exports){
'use strict';

var riot = require('riot');
var metaPoints = require('./menu/meta-points.js');
var metaHelp = require('./menu/meta-help.js');
var metaUser = require('./menu/meta-user.js');
var metaNot = require('./menu/meta-notifications.js');

var html = '\n<div class="top-menu">\n    <ul class="nav navbar-nav pull-right">\n        <li class="separator hide"></li>\n        <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_notification_bar"></li>\n\n        <li class="separator hide"></li>\n        <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_points_bar"></li>\n\n        <li class="separator hide"></li>\n        <li class="dropdown" id="header_dashboard_bar" onclick="{ onClick }">\n            <a class="dropdown-toggle" href="#home">\n                <i class="fa fa-home"></i>\n            </a>\n        </li>\n            \n        <li class="separator hide"></li>\n        <li id="header_help_bar" class="dropdown dropdown-extended dropdown-notification dropdown"></li>\n            \n        <li class="separator hide"></li>\n        <li id="header_user_menu" class="dropdown dropdown-user dropdown"></li>\n    </ul>\n</div>\n';

module.exports = riot.tag('page-topmenu', html, function (opts) {
    var _this = this;

    this.onClick = function (event, params) {
        console.log(event, params);
        return true;
    };

    this.on('mount', function () {
        riot.mount(_this.header_points_bar, 'meta-points');
        riot.mount(_this.header_notification_bar, 'meta-notifications');
        riot.mount(_this.header_help_bar, 'meta-help');
        riot.mount(_this.header_user_menu, 'meta-user');
    });
});

},{"./menu/meta-help.js":53,"./menu/meta-notifications.js":54,"./menu/meta-points.js":55,"./menu/meta-user.js":56,"riot":"riot"}],67:[function(require,module,exports){
/// <reference path="../../../../typings/riotjs/riotjs.d.ts" />
/// <reference path="../../../../typings/nprogress/NProgress.d.ts" />

'use strict';

var riot = require('riot');
var NProgress = window.NProgress;
var ROUTES = require('../../js/constants/routes');

var html = '\n<div class="portlet light">\n\t\t\t\t<div class="portlet-body">\n\t\t\t\t\t<div class="row margin-bottom-30">\n\t\t\t\t\t\t<div if="{ header }" class="col-md-6">\n                            <h1>{ header.title }</h1>\n                            <p>{ header.text }</p>\n\t\t\t\t\t\t\t<ul class="list-unstyled margin-top-10 margin-bottom-10">\n\t\t\t\t\t\t\t\t<li each="{ areas }">\n\t\t\t\t\t\t\t\t\t<i class="{ icon }"></i> <b>{ title }</b> { text }\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<!-- Blockquotes -->\n\t\t\t\t\t\t\t<blockquote class="hero">\n\t\t\t\t\t\t\t\t<p>{ quote.text }</p>\n\t\t\t\t\t\t\t\t<small>{ quote.by }</small>\n\t\t\t\t\t\t\t</blockquote>\n                            <div class="addthis_horizontal_follow_toolbox"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class ="col-md-6">\n                          <iframe if="{ header.youtubeid }"\n                                id="ytplayer"\n                                type="text/html"\n                                src="https://www.youtube.com/embed/{ header.youtubeid }"\n                                frameborder="0" allowfullscreen\n                                class ="fitvids"\n                                style="height: 327px; width: 100%; display: block; margin-left: auto; margin-right: auto; broder: 0;"\n                            />\n\t\t\t\t\t\t\t</iframe>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                    <div class="headline">\n\t\t\t\t\t\t<h3>{ userName }{ vision.title }</h3>\n\t\t\t\t\t</div>\n                    <div>\n                        <p>{ vision.text }</p>\n                    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n';

module.exports = riot.tag('home', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.areas = [];
    this.header = {};

    MetaMap.MetaFire.on(ROUTES.HOME, function (data) {
        _this.areas = _.filter(_.sortBy(data.areas, 'order'), function (d) {
            var include = d.archive != true;
            return include;
        });
        _this.quote = data.quote;
        _this.header = data.header;
        _this.vision = data.vision;

        _this.userName = MetaMap.User.fullName;

        _this.update();

        NProgress.done();

        window.addthis.layers.refresh();
    });
});

},{"../../entry.js":2,"../../js/constants/routes":40,"riot":"riot"}],68:[function(require,module,exports){
/// <reference path="../../../../typings/riotjs/riotjs.d.ts" />
/// <reference path="../../../../typings/nprogress/NProgress.d.ts" />

'use strict';

var riot = require('riot');
var NProgress = window.NProgress;
var ROUTES = require('../../js/constants/routes');

var html = '\n<div class="portlet light">\n\t\t\t\t<div class="portlet-body">\n\t\t\t\t\t<div class="row margin-bottom-30">\n\t\t\t\t\t\t<div if="{ header }" class="col-md-12">\n                            <h1>{ header.title }</h1>\n                            <p>{ header.text }</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                    <div each="{ areas }">\n                        <div class="headline">\n    \t\t\t\t\t\t<h3>{ title }</h3>\n    \t\t\t\t\t</div>\n                        <div>\n                            <p>{ text }</p>\n                        </div>\n                        <ul class="list-unstyled margin-top-10 margin-bottom-10">\n\t\t\t\t\t\t\t<li each="{ items }">\n\t\t\t\t\t\t\t\t<i class="{ icon }"></i> <b>{ title }</b> { text }\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n                    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n';

module.exports = riot.tag('terms', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../entry.js');

    this.areas = [];
    this.header = {};

    MetaMap.MetaFire.on(ROUTES.TERMS_AND_CONDITIONS, function (data) {
        _this.areas = _.filter(_.sortBy(data.sections, 'order'), function (d) {
            var include = d.archive != true;
            if (include) {
                d.items = _.filter(_.sortBy(d.items, 'order'), function (d) {
                    var include2 = d.archive != true;
                    return include2;
                });
            }
            return include;
        });

        _this.header = data.header;
        _this.userName = MetaMap.User.fullName;

        _this.update();

        NProgress.done();
    });
});

},{"../../entry.js":2,"../../js/constants/routes":40,"riot":"riot"}]},{},[2])(2)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9NZXRhTWFwLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvZW50cnkuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hY3Rpb25zL0FjdGlvbi5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FjdGlvbnMvQWN0aW9uQmFzZS5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FjdGlvbnMvQ29weU1hcC5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FjdGlvbnMvRGVsZXRlTWFwLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYWN0aW9ucy9Ib21lLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYWN0aW9ucy9NeU1hcHMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hY3Rpb25zL05ld01hcC5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FjdGlvbnMvT3Blbk1hcC5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FjdGlvbnMvVGVybXMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hcHAvQ29uZmlnLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYXBwL0V2ZW50ZXIuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hcHAvRmlyZWJhc2UuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hcHAvUm91dGVyLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYXBwL2F1dGgwLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYXBwL3VzZXIuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvYW5hbHl0aWNzLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL2F0dGFjaG1lbnRzLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL2F1dG9zYXZlLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL2VkaXRvci5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9lZGl0b3Jfb3B0aW9ucy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9leHRlbnNpb25zL05vZGVMYWJlbERyYWdnaW5nVG9vbC5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9nZW5lcmF0b3IuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvbGF5b3V0cy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9tYXAuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvcGVyc3BlY3RpdmVzLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL3ByZXNlbnRlci5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9zaGFyaW5nLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL3N0YW5kYXJkcy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy90YWdnaW5nLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL3RlbXBsYXRlcy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy90ZXN0cy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy91aS5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy91c2VyLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY29uc3RhbnRzL2FjdGlvbnMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jb25zdGFudHMvZWxlbWVudHMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jb25zdGFudHMvZXZlbnRzLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY29uc3RhbnRzL3BhZ2VzLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY29uc3RhbnRzL3JvdXRlcy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NvbnN0YW50cy90YWdzLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvaW50ZWdyYXRpb25zL2FkZHRoaXMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvZmFjZWJvb2suanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvZ29vZ2xlLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvaW50ZWdyYXRpb25zL3R3aXR0ZXIuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvdXNlcnNuYXAuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9wYWdlcy9QYWdlRmFjdG9yeS5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL3Rvb2xzL3NoaW1zLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvdG9vbHMvdXVpZC5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvY2FudmFzL21ldGEtY2FudmFzLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvdGFncy9jb21wb25lbnRzL21ldGEtZGlhbG9nLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvdGFncy9jb21wb25lbnRzL21ldGEtdGFibGUuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy90YWdzL21lbnUvbWV0YS1oZWxwLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvdGFncy9tZW51L21ldGEtbm90aWZpY2F0aW9ucy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvbWVudS9tZXRhLXBvaW50cy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvbWVudS9tZXRhLXVzZXIuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy90YWdzL3BhZ2UtYWN0aW9ucy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvcGFnZS1ib2R5LmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvdGFncy9wYWdlLWNvbnRhaW5lci5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvcGFnZS1jb250ZW50LmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvdGFncy9wYWdlLWZvb3Rlci5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvcGFnZS1oZWFkZXIuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy90YWdzL3BhZ2UtbG9nby5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvcGFnZS1zZWFyY2guanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy90YWdzL3BhZ2Utc2lkZWJhci5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL3RhZ3MvcGFnZS10b3BtZW51LmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvdGFncy9wYWdlcy9ob21lLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvdGFncy9wYWdlcy90ZXJtcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztBQ0FBLElBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3hDLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0FBQ3pDLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0FBQzdDLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQy9DLElBQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0FBQ3pELElBQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7QUFDbkMsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLHFCQUFxQixDQUFDLENBQUM7QUFDOUMsSUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLDZCQUE2QixDQUFDLENBQUM7QUFDbEQsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLHFCQUFxQixDQUFDLENBQUM7O0lBRXZDLE9BQU87QUFFRSxhQUZULE9BQU8sR0FFSzs4QkFGWixPQUFPOztBQUdMLFlBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztBQUM1QixZQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQ2xDLFlBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDdEMsWUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFakMsWUFBSSxDQUFDLE9BQU8s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QU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztTQUM3RTs7QUFFRCxnQkFBUSxFQUFFLGtCQUFTLENBQUMsRUFBRSxDQUFDLEVBQUU7O0FBQ3JCLGdCQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDMUQsZUFBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDakMsZUFBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDakMsZUFBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FDcEM7O0FBRUQsZUFBTyxFQUFFLGlCQUFTLENBQUMsRUFBRSxDQUFDLEVBQUU7O0FBQ3BCLGdCQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDL0MsZUFBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUM7U0FDbEQ7O0FBRUQsd0JBQWdCLEVBQUUsMEJBQVMsQ0FBQyxFQUFFLENBQUMsRUFBRTs7QUFDN0IsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQztBQUMxRCxnQkFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDOUMsZUFBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDakMsZUFBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDakMsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsTUFBTSxF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IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJjb25zdCBBdXRoMCA9IHJlcXVpcmUoJy4vanMvYXBwL2F1dGgwJyk7XHJcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuL2pzL2FwcC91c2VyLmpzJyk7XHJcbmNvbnN0IFJvdXRlciA9IHJlcXVpcmUoJy4vanMvYXBwL1JvdXRlci5qcycpO1xyXG5jb25zdCBFdmVudGVyID0gcmVxdWlyZSgnLi9qcy9hcHAvRXZlbnRlci5qcycpO1xyXG5jb25zdCBQYWdlRmFjdG9yeSA9IHJlcXVpcmUoJy4vanMvcGFnZXMvUGFnZUZhY3RvcnkuanMnKTtcclxuY29uc3QgTlByb2dyZXNzID0gd2luZG93Lk5Qcm9ncmVzcztcclxuY29uc3QgQ29uZmlnID0gcmVxdWlyZSgnLi9qcy9hcHAvL0NvbmZpZy5qcycpO1xyXG5jb25zdCBnYSA9IHJlcXVpcmUoJy4vanMvaW50ZWdyYXRpb25zL2dvb2dsZS5qcycpO1xyXG5jb25zdCBzaGltcyA9IHJlcXVpcmUoJy4vanMvdG9vbHMvc2hpbXMuanMnKTtcclxuXHJcbmNsYXNzIE1ldGFNYXAge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IG5ldyBDb25maWcoKTtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IHRoaXMuX2NvbmZpZy5jb25maWc7XHJcbiAgICAgICAgdGhpcy5NZXRhRmlyZSA9IHRoaXMuX2NvbmZpZy5NZXRhRmlyZTtcclxuICAgICAgICB0aGlzLkV2ZW50ZXIgPSBuZXcgRXZlbnRlcih0aGlzKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLm9uUmVhZHkoKTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlYWR5KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fb25SZWFkeSkge1xyXG4gICAgICAgICAgICB0aGlzLl9vblJlYWR5ID0gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29uZmlnLm9uUmVhZHkoKS50aGVuKChjb25maWcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkF1dGgwID0gbmV3IEF1dGgwKGNvbmZpZy5hdXRoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZnVsZmlsbCgpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fb25SZWFkeTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMub25SZWFkeSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLkF1dGgwLmxvZ2luKCkudGhlbigocHJvZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5NZXRhRmlyZS5sb2dpbigpLnRoZW4oKGF1dGgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLlVzZXIgPSBuZXcgVXNlcihwcm9maWxlLCBhdXRoLCB0aGlzLkV2ZW50ZXIsIHRoaXMuTWV0YUZpcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuVXNlci5vblJlYWR5KCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuUGFnZUZhY3RvcnkgPSBuZXcgUGFnZUZhY3RvcnkodGhpcy5FdmVudGVyLCB0aGlzLk1ldGFGaXJlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5Sb3V0ZXIgPSBuZXcgUm91dGVyKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBsb2codmFsKSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5nYSkge1xyXG4gICAgICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCAnbG9nJywgJ2xhYmVsJywgdmFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2codmFsKTtcclxuICAgIH1cclxuXHJcbiAgICBlcnJvcih2YWwpIHtcclxuICAgICAgICBpZiAod2luZG93LmdhKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdleGNlcHRpb24nLCB7XHJcbiAgICAgICAgICAgICAgICAnZXhEZXNjcmlwdGlvbic6IHZhbC5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgJ2V4RmF0YWwnOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmVycm9yKHZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9nb3V0KCkge1xyXG4gICAgICAgIHRoaXMuTWV0YUZpcmUubG9nb3V0KCk7XHJcbiAgICAgICAgdGhpcy5BdXRoMC5sb2dvdXQoKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNZXRhTWFwOyIsInJlcXVpcmUoJ2JhYmVsL3BvbHlmaWxsJyk7XHJcbndpbmRvdy5yaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG53aW5kb3cuXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG53aW5kb3cuUHJvbWlzZSA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XHJcbnJlcXVpcmUoJ2NvcmUtanMnKTtcclxud2luZG93LiQgPSB3aW5kb3cualF1ZXJ5ID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnJlcXVpcmUoJ2pxdWVyeS11aScpO1xyXG5yZXF1aXJlKCdib290c3RyYXAnKTtcclxud2luZG93LkZpcmViYXNlID0gcmVxdWlyZSgnZmlyZWJhc2UnKTtcclxud2luZG93Lkh1bWFuaXplID0gcmVxdWlyZSgnaHVtYW5pemUtcGx1cycpO1xyXG53aW5kb3cubW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XHJcbndpbmRvdy5VUkkgPSByZXF1aXJlKCdVUklqcycpO1xyXG53aW5kb3cubG9jYWxmb3JhZ2UgPSByZXF1aXJlKCdsb2NhbGZvcmFnZScpO1xyXG5cclxuXHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL2VkaXRvci5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy91c2VyLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL2VkaXRvcl9vcHRpb25zLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL2FuYWx5dGljcy5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9hdHRhY2htZW50cy5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9hdXRvc2F2ZS5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9nZW5lcmF0b3IuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvbGF5b3V0cy5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9tYXAuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvcGVyc3BlY3RpdmVzLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL3ByZXNlbnRlci5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9zaGFyaW5nLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL3N0YW5kYXJkcy5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy90YWdnaW5nLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL3RlbXBsYXRlcy5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy90ZXN0cy5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy91aS5qcycpO1xyXG5cclxudmFyIG1tID0gcmVxdWlyZSgnLi9NZXRhTWFwJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBtbSgpOyIsImNvbnN0IEFjdGlvbkJhc2UgPSByZXF1aXJlKCcuL0FjdGlvbkJhc2UuanMnKTtcclxuY29uc3QgQUNUSU9OUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9hY3Rpb25zJyk7XHJcblxyXG5jbGFzcyBBY3Rpb24gZXh0ZW5kcyBBY3Rpb25CYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKC4uLnBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKC4uLnBhcmFtcyk7XHJcbiAgICAgICAgdGhpcy5fYWN0aW9ucyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRBY3Rpb24oYWN0aW9uKSB7XHJcbiAgICAgICAgbGV0IHJldCA9IHRoaXMuX2FjdGlvbnNbYWN0aW9uXTtcclxuICAgICAgICBpZiAoIXJldCkge1xyXG4gICAgICAgICAgICBsZXQgTWV0aG9kID0gbnVsbDtcclxuICAgICAgICAgICAgc3dpdGNoKGFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBBQ1RJT05TLk1BUDpcclxuICAgICAgICAgICAgICAgICAgICBNZXRob2QgPSByZXF1aXJlKCcuL09wZW5NYXAuanMnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQUNUSU9OUy5ORVdfTUFQOlxyXG4gICAgICAgICAgICAgICAgICAgIE1ldGhvZCA9IHJlcXVpcmUoJy4vTmV3TWFwLmpzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEFDVElPTlMuQ09QWV9NQVA6XHJcbiAgICAgICAgICAgICAgICAgICAgTWV0aG9kID0gcmVxdWlyZSgnLi9Db3B5TWFwLmpzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEFDVElPTlMuREVMRVRFX01BUDpcclxuICAgICAgICAgICAgICAgICAgICBNZXRob2QgPSByZXF1aXJlKCcuL0RlbGV0ZU1hcC5qcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBBQ1RJT05TLk1ZX01BUFM6XHJcbiAgICAgICAgICAgICAgICAgICAgTWV0aG9kID0gcmVxdWlyZSgnLi9NeU1hcHMuanMnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQUNUSU9OUy5URVJNU19BTkRfQ09ORElUSU9OUzpcclxuICAgICAgICAgICAgICAgICAgICBNZXRob2QgPSByZXF1aXJlKCcuL1Rlcm1zLmpzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIE1ldGhvZCA9IHJlcXVpcmUoJy4vSG9tZS5qcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChNZXRob2QpIHtcclxuICAgICAgICAgICAgICAgIHJldCA9IG5ldyBNZXRob2QodGhpcy5tZXRhRmlyZSwgdGhpcy5ldmVudGVyLCB0aGlzLnBhZ2VGYWN0b3J5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FjdGlvbnNbYWN0aW9uXSA9IHJldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG5cclxuICAgIGFjdChhY3Rpb24sIC4uLnBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyLmFjdCgpO1xyXG4gICAgICAgIGxldCBtZXRob2QgPSB0aGlzLl9nZXRBY3Rpb24oYWN0aW9uKTtcclxuICAgICAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtZXRob2QuYWN0KC4uLnBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBY3Rpb247IiwiY29uc3QgRVZFTlRTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2V2ZW50cycpO1xyXG5cclxuY2xhc3MgQWN0aW9uQmFzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihtZXRhRmlyZSwgZXZlbnRlciwgcGFnZUZhY3RvcnkpIHtcclxuICAgICAgICB0aGlzLm1ldGFGaXJlID0gbWV0YUZpcmU7XHJcbiAgICAgICAgdGhpcy5ldmVudGVyID0gZXZlbnRlcjtcclxuICAgICAgICB0aGlzLnBhZ2VGYWN0b3J5ID0gcGFnZUZhY3Rvcnk7XHJcbiAgICAgICAgdGhpcy5tZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vZW50cnkuanMnKTtcclxuICAgIH1cclxuXHJcbiAgICBhY3QoKSB7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRvZ2dsZVNpZGViYXIoKSB7XHJcbiAgICAgICAgaWYodGhpcy5zaWRlYmFyT3Blbikge1xyXG4gICAgICAgICAgICB0aGlzLm9wZW5TaWRlYmFyKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZVNpZGViYXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG9wZW5TaWRlYmFyKCkge1xyXG4gICAgICAgIHRoaXMuc2lkZWJhck9wZW4gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZXZlbnRlci5kbyhFVkVOVFMuU0lERUJBUl9PUEVOKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY2xvc2VTaWRlYmFyKCkge1xyXG4gICAgICAgIHRoaXMuc2lkZWJhck9wZW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmV2ZW50ZXIuZG8oRVZFTlRTLlNJREVCQVJfQ0xPU0UpO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEFjdGlvbkJhc2U7IiwiY29uc3QgQWN0aW9uQmFzZSA9IHJlcXVpcmUoJy4vQWN0aW9uQmFzZS5qcycpO1xyXG5jb25zdCBST1VURVMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvcm91dGVzLmpzJyk7XHJcblxyXG5jbGFzcyBDb3B5TWFwIGV4dGVuZHMgQWN0aW9uQmFzZSB7XHJcbiAgICBjb25zdHJ1Y3RvciguLi5wYXJhbXMpIHtcclxuICAgICAgICBzdXBlciguLi5wYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFjdChpZCwgLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIuYWN0KGlkLCAuLi5wYXJhbXMpO1xyXG4gICAgICAgIGlmICghaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignTXVzdCBoYXZlIGEgbWFwIGluIG9yZGVyIHRvIGNvcHkuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWV0YUZpcmUuZ2V0RGF0YShgJHtST1VURVMuTUFQU19MSVNUfSR7aWR9YCkudGhlbigob2xkTWFwKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuZXdNYXAgPSB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgb3duZXI6IHRoaXMubWV0YU1hcC5Vc2VyLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuYXBwZW5kQ29weShvbGRNYXAubmFtZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm1ldGFGaXJlLmdldERhdGEoYCR7Uk9VVEVTLk1BUFNfREFUQX0ke2lkfWApLnRoZW4oKG9sZE1hcERhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBwdXNoU3RhdGUgPSB0aGlzLm1ldGFGaXJlLnB1c2hEYXRhKG5ld01hcCwgYCR7Uk9VVEVTLk1BUFNfTElTVH1gKTtcclxuICAgICAgICAgICAgICAgIGxldCBtYXBJZCA9IHB1c2hTdGF0ZS5rZXkoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWV0YUZpcmUuc2V0RGF0YShvbGRNYXBEYXRhLCBgJHtST1VURVMuTUFQU19EQVRBfSR7bWFwSWR9YCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1ldGFNYXAuUm91dGVyLnRvKGBtYXAvJHttYXBJZH1gKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kQ29weShzdHIpIHtcclxuICAgICAgICBsZXQgcmV0ID0gc3RyO1xyXG4gICAgICAgIGlmICghXy5jb250YWlucyhzdHIsICcoQ29weScpKSB7XHJcbiAgICAgICAgICAgIHJldCA9IHJldCArICcgKENvcHkgMSknO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBtZXNzID0gc3RyLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIGxldCBjbnQgPSAyO1xyXG4gICAgICAgICAgICBpZiAobWVzc1ttZXNzLmxlbmd0aCAtIDJdID09ICcoQ29weScpIHtcclxuICAgICAgICAgICAgICAgIGxldCBncmJnID0gbWVzc1ttZXNzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdyYmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBncmJnID0gZ3JiZy5yZXBsYWNlKCcpJywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNudCA9ICtncmJnICsgMTtcclxuICAgICAgICAgICAgICAgICAgICByZXQgPSBtZXNzLnNsaWNlKDAsIG1lc3MubGVuZ3RoIC0gMikuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldCArPSBgIChDb3B5ICR7Y250fSlgO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENvcHlNYXA7IiwiY29uc3QgQWN0aW9uQmFzZSA9IHJlcXVpcmUoJy4vQWN0aW9uQmFzZS5qcycpO1xyXG5jb25zdCBST1VURVMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvcm91dGVzLmpzJyk7XHJcbmNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuY29uc3QgUEFHRVMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvcGFnZXMuanMnKTtcclxuXHJcbmNsYXNzIERlbGV0ZU1hcCBleHRlbmRzIEFjdGlvbkJhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIoLi4ucGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBhY3QoaWQsIC4uLnBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyLmFjdChpZCwgLi4ucGFyYW1zKTtcclxuICAgICAgICBEZWxldGVNYXAuZGVsZXRlQWxsKFtpZF0pO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBkZWxldGVBbGwoaWRzKSB7XHJcbiAgICAgICAgXy5lYWNoKGlkcywgKGlkKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubWV0YU1hcC5NZXRhRmlyZS5kZWxldGVEYXRhKGAke1JPVVRFUy5NQVBTX0RBVEF9JHtpZH1gKTtcclxuICAgICAgICAgICAgdGhpcy5tZXRhTWFwLk1ldGFGaXJlLmRlbGV0ZURhdGEoYCR7Uk9VVEVTLk1BUFNfTElTVH0ke2lkfWApO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50ZXIuZG8oUEFHRVMuSE9NRSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRGVsZXRlTWFwOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90JylcclxuY29uc3QgQWN0aW9uQmFzZSA9IHJlcXVpcmUoJy4vQWN0aW9uQmFzZS5qcycpO1xyXG5jb25zdCBST1VURVMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvcm91dGVzLmpzJyk7XHJcbmNvbnN0IEVMRU1FTlRTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2VsZW1lbnRzLmpzJyk7XHJcbmNvbnN0IFRBR1MgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvdGFncy5qcycpO1xyXG5jb25zdCBob21lID0gcmVxdWlyZSgnLi4vLi4vdGFncy9wYWdlcy9ob21lJyk7XHJcblxyXG5jbGFzcyBIb21lIGV4dGVuZHMgQWN0aW9uQmFzZSB7XHJcbiAgICBjb25zdHJ1Y3RvciguLi5wYXJhbXMpIHtcclxuICAgICAgICBzdXBlciguLi5wYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFjdChpZCwgLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIuYWN0KGlkLCAuLi5wYXJhbXMpO1xyXG4gICAgICAgICQoYCMke0VMRU1FTlRTLkFQUF9DT05UQUlORVJ9YCkuZW1wdHkoKTtcclxuICAgICAgICByaW90Lm1vdW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEVMRU1FTlRTLkFQUF9DT05UQUlORVIpLCBUQUdTLkhPTUUpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRlci5kbygncGFnZU5hbWUnLCB7IG5hbWU6ICdIb21lJyB9LCAuLi5wYXJhbXMpO1xyXG4gICAgICAgIHRoaXMuY2xvc2VTaWRlYmFyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSG9tZTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpXHJcbmNvbnN0IEFjdGlvbkJhc2UgPSByZXF1aXJlKCcuL0FjdGlvbkJhc2UuanMnKTtcclxuY29uc3QgUk9VVEVTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL3JvdXRlcy5qcycpO1xyXG5jb25zdCBQQUdFUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9wYWdlcy5qcycpO1xyXG5jb25zdCBUQUdTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL3RhZ3MuanMnKTtcclxuY29uc3QgaG9tZSA9IHJlcXVpcmUoJy4uLy4uL3RhZ3MvcGFnZXMvaG9tZScpO1xyXG5cclxuY2xhc3MgSG9tZSBleHRlbmRzIEFjdGlvbkJhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIoLi4ucGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBhY3QoaWQsIC4uLnBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyLmFjdChpZCwgLi4ucGFyYW1zKTtcclxuICAgICAgICB0aGlzLmV2ZW50ZXIuZG8oUEFHRVMuTVlfTUFQUywgeyBpZDogaWQgfSwgLi4ucGFyYW1zKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBIb21lOyIsImNvbnN0IEFjdGlvbkJhc2UgPSByZXF1aXJlKCcuL0FjdGlvbkJhc2UuanMnKTtcclxuY29uc3QgUk9VVEVTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL3JvdXRlcy5qcycpO1xyXG5cclxuY2xhc3MgTmV3TWFwIGV4dGVuZHMgQWN0aW9uQmFzZSB7XHJcbiAgICBjb25zdHJ1Y3RvciguLi5wYXJhbXMpIHtcclxuICAgICAgICBzdXBlciguLi5wYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFjdCgpIHtcclxuICAgICAgICBzdXBlci5hY3QoKTtcclxuICAgICAgICB0aGlzLm1ldGFGaXJlLmdldERhdGEoYCR7Uk9VVEVTLk1BUFNfTkVXX01BUH1gKS50aGVuKChibGFua01hcCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbmV3TWFwID0ge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIG93bmVyOiB0aGlzLm1ldGFNYXAuVXNlci51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnVW50aXRsZWQgTWFwJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBwdXNoU3RhdGUgPSB0aGlzLm1ldGFGaXJlLnB1c2hEYXRhKG5ld01hcCwgYCR7Uk9VVEVTLk1BUFNfTElTVH1gKTtcclxuICAgICAgICAgICAgbGV0IG1hcElkID0gcHVzaFN0YXRlLmtleSgpO1xyXG4gICAgICAgICAgICB0aGlzLm1ldGFGaXJlLnNldERhdGEoYmxhbmtNYXAsIGAke1JPVVRFUy5NQVBTX0RBVEF9JHttYXBJZH1gKTtcclxuICAgICAgICAgICAgdGhpcy5tZXRhTWFwLlJvdXRlci50byhgbWFwLyR7bWFwSWR9YCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTmV3TWFwOyIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi90eXBpbmdzL3Jpb3Rqcy9yaW90anMuZC50c1wiIC8+XHJcblxyXG5jb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG5jb25zdCBBY3Rpb25CYXNlID0gcmVxdWlyZSgnLi9BY3Rpb25CYXNlLmpzJyk7XHJcbmNvbnN0IEVMRU1FTlRTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2VsZW1lbnRzLmpzJyk7XHJcbmNvbnN0IFRBR1MgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvdGFncy5qcycpO1xyXG5jb25zdCBST1VURVMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvcm91dGVzLmpzJyk7XHJcbmNvbnN0IG1ldGFDYW52YXMgPSByZXF1aXJlKCcuLi8uLi90YWdzL2NhbnZhcy9tZXRhLWNhbnZhcy5qcycpO1xyXG5cclxuY2xhc3MgT3Blbk1hcCBleHRlbmRzIEFjdGlvbkJhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIoLi4ucGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBhY3QoaWQsIC4uLnBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyLmFjdChpZCwgLi4ucGFyYW1zKTtcclxuICAgICAgICAkKGAjJHtFTEVNRU5UUy5BUFBfQ09OVEFJTkVSfWApLmVtcHR5KCk7XHJcbiAgICAgICAgdGhpcy5tZXRhRmlyZS5nZXREYXRhKGAke1JPVVRFUy5NQVBTX0xJU1R9JHtpZH1gKS50aGVuKChtYXApID0+IHtcclxuICAgICAgICAgICAgaWYgKG1hcCkge1xyXG4gICAgICAgICAgICAgICAgcmlvdC5tb3VudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChFTEVNRU5UUy5BUFBfQ09OVEFJTkVSKSwgVEFHUy5NRVRBX0NBTlZBUyk7XHJcbiAgICAgICAgICAgICAgICBtYXAuaWQgPSBpZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRlci5kbygnbmF2JywgJ21hcCcsIG1hcCwgLi4ucGFyYW1zKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRlci5kbygncGFnZU5hbWUnLCBtYXAsIC4uLnBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50ZXIuZG8oJ21hcCcsIG1hcCwgLi4ucGFyYW1zKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3BlblNpZGViYXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE9wZW5NYXA7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKVxyXG5jb25zdCBBY3Rpb25CYXNlID0gcmVxdWlyZSgnLi9BY3Rpb25CYXNlLmpzJyk7XHJcbmNvbnN0IFJPVVRFUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9yb3V0ZXMuanMnKTtcclxuY29uc3QgRUxFTUVOVFMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvZWxlbWVudHMuanMnKTtcclxuY29uc3QgVEFHUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy90YWdzLmpzJyk7XHJcbmNvbnN0IHRlcm1zID0gcmVxdWlyZSgnLi4vLi4vdGFncy9wYWdlcy90ZXJtcycpO1xyXG5cclxuY2xhc3MgVGVybXMgZXh0ZW5kcyBBY3Rpb25CYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKC4uLnBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKC4uLnBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgYWN0KGlkLCAuLi5wYXJhbXMpIHtcclxuICAgICAgICBzdXBlci5hY3QoaWQsIC4uLnBhcmFtcyk7XHJcbiAgICAgICAgJChgIyR7RUxFTUVOVFMuQVBQX0NPTlRBSU5FUn1gKS5lbXB0eSgpO1xyXG4gICAgICAgIHJpb3QubW91bnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRUxFTUVOVFMuQVBQX0NPTlRBSU5FUiksIFRBR1MuVEVSTVMpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRlci5kbygncGFnZU5hbWUnLCB7IG5hbWU6ICdUZXJtcyBhbmQgQ29uZGl0aW9ucycgfSwgLi4ucGFyYW1zKTtcclxuICAgICAgICB0aGlzLmNsb3NlU2lkZWJhcigpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFRlcm1zOyIsImxldCBNZXRhRmlyZSA9IHJlcXVpcmUoJy4vRmlyZWJhc2UuanMnKTtcclxubGV0IHVzZXJzbmFwID0gcmVxdWlyZSgnLi4vaW50ZWdyYXRpb25zL3VzZXJzbmFwJyk7XHJcbmxldCBnYSA9IHJlcXVpcmUoJy4uL2ludGVncmF0aW9ucy9nb29nbGUuanMnKTtcclxubGV0IHR3aXR0ZXIgPSByZXF1aXJlKCcuLi9pbnRlZ3JhdGlvbnMvdHdpdHRlci5qcycpO1xyXG5sZXQgZmFjZWJvb2sgPSByZXF1aXJlKCcuLi9pbnRlZ3JhdGlvbnMvZmFjZWJvb2suanMnKTtcclxubGV0IGFkZFRoaXMgPSByZXF1aXJlKCcuLi9pbnRlZ3JhdGlvbnMvYWRkdGhpcy5qcycpO1xyXG5cclxuY29uc3QgY29uZmlnID0gKCkgPT4ge1xyXG4gICAgY29uc3QgU0lURVMgPSB7XHJcbiAgICAgICAgQ1JMOiB7XHJcbiAgICAgICAgICAgIGRiOiAnbWV0YS1tYXAtcHJvZHVjdGlvbidcclxuICAgICAgICB9LFxyXG4gICAgICAgIENSTF9TVEFHSU5HOiB7XHJcbiAgICAgICAgICAgIGRiOiAnbWV0YS1tYXAtc3RhZ2luZydcclxuICAgICAgICB9LFxyXG4gICAgICAgIFRISU5LX1dBVEVSOiB7XHJcbiAgICAgICAgICAgIGRiOiAndGhpbmt3YXRlci1wcm9kdWN0aW9uJ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXQgPSB7XHJcbiAgICAgICAgaG9zdDogd2luZG93LmxvY2F0aW9uLmhvc3QsXHJcbiAgICAgICAgc2l0ZToge31cclxuICAgIH1cclxuICAgIGxldCBzZWdtZW50cyA9IHJldC5ob3N0LnNwbGl0KCcuJyk7XHJcbiAgICBsZXQgZmlyc3QgPSBzZWdtZW50c1swXTtcclxuICAgIGlmIChmaXJzdCA9PT0gJ3d3dycpIHtcclxuICAgICAgICBmaXJzdCA9IHNlZ21lbnRzWzFdO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChmaXJzdC50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgY2FzZSAnbG9jYWxob3N0JzpcclxuICAgICAgICBjYXNlICdtZXRhLW1hcC1zdGFnaW5nJzpcclxuICAgICAgICAgICAgcmV0LnNpdGUgPSBTSVRFUy5DUkxfU1RBR0lORztcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgJ2NybGFiJzpcclxuICAgICAgICBjYXNlICdmcm9udGVuZCc6XHJcbiAgICAgICAgICAgIHJldC5zaXRlID0gU0lURVMuQ1JMO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSAndGhpbmt3YXRlci1wcm9kdWN0aW9uJzpcclxuICAgICAgICBjYXNlICd0aGlua3dhdGVyLXN0YWdpbmcnOlxyXG4gICAgICAgIGNhc2UgJ3RoaW5rd2F0ZXInOlxyXG4gICAgICAgICAgICByZXQuc2l0ZSA9IFNJVEVTLlRISU5LX1dBVEVSO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmV0O1xyXG59O1xyXG5cclxuY2xhc3MgQ29uZmlnIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0YWdzKSB7XHJcbiAgICAgICAgdGhpcy50YWdzID0gdGFncztcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZygpO1xyXG5cclxuICAgICAgICB0aGlzLk1ldGFGaXJlID0gbmV3IE1ldGFGaXJlKHRoaXMuY29uZmlnKTtcclxuICAgICAgICB0aGlzLnNvY2lhbEZlYXR1cmVzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdFNvY2lhbCgpIHtcclxuICAgICAgICBfLmVhY2godGhpcy5zb2NpYWxGZWF0dXJlcywgKGZlYXR1cmUpID0+IHtcclxuICAgICAgICAgICAgaWYoZmVhdHVyZSkgZmVhdHVyZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzaXRlKCkge1xyXG4gICAgICAgIHJldHVybiAnZnJvbnRlbmQnO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVhZHkoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9vblJlYWR5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uUmVhZHkgPSBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLk1ldGFGaXJlLm9uKCdjb25maWcnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZXh0ZW5kKHRoaXMuY29uZmlnLnNpdGUsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRoaXMuY29uZmlnLnNpdGUudGl0bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmYXZpY28gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmF2aWNvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhdmljby5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBgJHt0aGlzLmNvbmZpZy5zaXRlLmltYWdlVXJsfWZhdmljb24uaWNvYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKHRoaXMuY29uZmlnLnNpdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9vblJlYWR5O1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub25SZWFkeSgpLnRoZW4oKGNvbmZpZykgPT4ge1xyXG4gICAgICAgICAgICBnYSh0aGlzLmNvbmZpZy5zaXRlLmdvb2dsZSk7XHJcbiAgICAgICAgICAgIC8vdGhpcy5zb2NpYWxGZWF0dXJlcy5wdXNoKHR3aXR0ZXIoKSk7XHJcbiAgICAgICAgICAgIC8vdGhpcy5zb2NpYWxGZWF0dXJlcy5wdXNoKGZhY2Vib29rKCkpO1xyXG4gICAgICAgICAgICB0aGlzLnNvY2lhbEZlYXR1cmVzLnB1c2goYWRkVGhpcyh0aGlzLmNvbmZpZy5zaXRlLmFkZHRoaXMucHViaWQpKTtcclxuICAgICAgICAgICAgdXNlcnNuYXAoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDb25maWc7IiwiY2xhc3MgRXZlbnRlciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IobWV0YU1hcCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJpb3Qub2JzZXJ2YWJsZSh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5ldmVudHMgPSB7fVxyXG4gICAgfVxyXG5cclxuICAgIGV2ZXJ5KGV2ZW50LCByZWFjdGlvbikge1xyXG4gICAgICAgIC8vbGV0IGNhbGxiYWNrID0gcmVhY3Rpb247XHJcbiAgICAgICAgLy9pZiAodGhpcy5ldmVudHNbZXZlbnRdKSB7XHJcbiAgICAgICAgLy8gICAgbGV0IHBpZ2d5YmFjayA9IHRoaXMuZXZlbnRzW2V2ZW50XTtcclxuICAgICAgICAvLyAgICBjYWxsYmFjayA9ICguLi5wYXJhbXMpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgcGlnZ3liYWNrKC4uLnBhcmFtcyk7XHJcbiAgICAgICAgLy8gICAgICAgIHJlYWN0aW9uKC4uLnBhcmFtcyk7XHJcbiAgICAgICAgLy8gICAgfVxyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIGxldCBldmVudHMgPSBldmVudC5zcGxpdCgnICcpO1xyXG4gICAgICAgIF8uZWFjaChldmVudHMsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRdID0gcmVhY3Rpb247XHJcbiAgICAgICAgICAgIHRoaXMub24oZXZlbnQsIHJlYWN0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmb3JnZXQoZXZlbnQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgbGV0IGV2ZW50cyA9IGV2ZW50LnNwbGl0KCcgJyk7XHJcbiAgICAgICAgXy5lYWNoKGV2ZW50cywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5ldmVudHNbZXZlbnRdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYoZXZlbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYoZXZlbnQsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZG8oZXZlbnQsIC4uLnBhcmFtcykge1xyXG4gICAgICAgIGxldCBldmVudHMgPSBldmVudC5zcGxpdCgnICcpO1xyXG4gICAgICAgIF8uZWFjaChldmVudHMsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKGV2ZW50LCAuLi5wYXJhbXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBFdmVudGVyOyIsImxldCBGaXJlYmFzZSA9IHdpbmRvdy5GaXJlYmFzZTsgLy9yZXF1aXJlKCdmaXJlYmFzZScpO1xyXG5sZXQgUHJvbWlzZSA9IHdpbmRvdy5Qcm9taXNlO1xyXG5sZXQgbG9jYWxmb3JhZ2UgPSB3aW5kb3cubG9jYWxmb3JhZ2U7XHJcblxyXG5jbGFzcyBNZXRhRmlyZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIHRoaXMuZmIgPSBuZXcgRmlyZWJhc2UoYGh0dHBzOi8vJHt0aGlzLmNvbmZpZy5zaXRlLmRifS5maXJlYmFzZWlvLmNvbWApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBtZXRhTWFwKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fbWV0YU1hcCkge1xyXG4gICAgICAgICAgICB0aGlzLl9tZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vZW50cnkuanMnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21ldGFNYXA7XHJcbiAgICB9XHJcblxyXG4gICAgbG9naW4oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9sb2dpbikge1xyXG4gICAgICAgICAgICB0aGlzLl9sb2dpbiA9IG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5NZXRhTWFwLkF1dGgwLmdldFNlc3Npb24oKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChwcm9maWxlKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuTWV0YU1hcC5BdXRoMC5sb2NrLmdldENsaWVudCgpLmdldERlbGVnYXRpb25Ub2tlbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMuY29uZmlnLnNpdGUuYXV0aDAuYXBpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRfdG9rZW46IHByb2ZpbGUuaWRfdG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlfdHlwZTogJ2ZpcmViYXNlJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAoZXJyLCBkZWxlZ2F0aW9uUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGUuZmlyZWJhc2VfdG9rZW4gPSBkZWxlZ2F0aW9uUmVzdWx0LmlkX3Rva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyZWJhc2VfdG9rZW4gPSBkZWxlZ2F0aW9uUmVzdWx0LmlkX3Rva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ2ZpcmViYXNlX3Rva2VuJywgdGhpcy5maXJlYmFzZV90b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mYi5hdXRoV2l0aEN1c3RvbVRva2VuKHRoaXMuZmlyZWJhc2VfdG9rZW4sIChlcnJvciwgYXV0aERhdGEsIC4uLnBhcmFtcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWV0YU1hcC5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChhdXRoRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX29uUmVhZHkgPSB0aGlzLl9sb2dpbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ2luO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVhZHkoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9vblJlYWR5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uUmVhZHkgPSBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmdWxmaWxsKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fb25SZWFkeTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDaGlsZChwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmIuY2hpbGQocGF0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uUmVhZHkoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5mYjtcclxuICAgICAgICAgICAgaWYgKHBhdGgpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkID0gdGhpcy5nZXRDaGlsZChwYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGNoaWxkLm9uY2UoJ3ZhbHVlJyxcclxuICAgICAgICAgICAgICAgIChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gc25hcHNob3QudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWV0YU1hcC5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhTWFwLmVycm9yKHsgbWVzc2FnZTogYENhbm5vdCBhY2Nlc3MgJHtwYXRofWAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbiAocGF0aCwgY2FsbGJhY2ssIGV2ZW50ID0gJ3ZhbHVlJyApIHtcclxuICAgICAgICBpZiAocGF0aCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uUmVhZHkoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuZ2V0Q2hpbGQocGF0aCk7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5vbihldmVudCwgKHNuYXBzaG90KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzbmFwc2hvdC5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGVyZSBpcyBubyBkYXRhIGF0ICR7cGF0aH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHNuYXBzaG90LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWV0YU1hcC5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9mZihwYXRoLCBtZXRob2Q9J3ZhbHVlJyxjYWxsYmFjaykge1xyXG4gICAgICAgIGlmIChwYXRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25SZWFkeSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5nZXRDaGlsZChwYXRoKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLm9mZihtZXRob2QsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQub2ZmKG1ldGhvZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXREYXRhIChkYXRhLCBwYXRoKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5mYjtcclxuICAgICAgICBpZiAocGF0aCkge1xyXG4gICAgICAgICAgICBjaGlsZCA9IHRoaXMuZ2V0Q2hpbGQocGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjaGlsZC5zZXQoZGF0YSwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhTWFwLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWV0YU1hcC5lcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlRGF0YSAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNldERhdGEobnVsbCwgcGF0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVzaERhdGEgKGRhdGEsIHBhdGgpIHtcclxuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmZiO1xyXG4gICAgICAgIGlmIChwYXRoKSB7XHJcbiAgICAgICAgICAgIGNoaWxkID0gdGhpcy5nZXRDaGlsZChwYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkLnB1c2goZGF0YSwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhTWFwLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWV0YU1hcC5lcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGF0YUluVHJhbnNhY3Rpb24gKGRhdGEsIHBhdGgsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5mYjtcclxuICAgICAgICBpZiAocGF0aCkge1xyXG4gICAgICAgICAgICBjaGlsZCA9IHRoaXMuZ2V0Q2hpbGQocGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjaGlsZC50cmFuc2FjdGlvbigoY3VycmVudFZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWV0YU1hcC5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1ldGFNYXAuZXJyb3IoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvZ291dCAoKSB7XHJcbiAgICAgICAgdGhpcy5fbG9naW4gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX29uUmVhZHkgPSBudWxsO1xyXG4gICAgICAgIGxvY2FsZm9yYWdlLnJlbW92ZUl0ZW0oJ2ZpcmViYXNlX3Rva2VuJyk7XHJcbiAgICAgICAgdGhpcy5mYi51bmF1dGgoKTtcclxuICAgIH1cclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IE1ldGFGaXJlOyIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi90eXBpbmdzL3Jpb3Rqcy9yaW90anMuZC50c1wiIC8+XHJcblxyXG5jb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpXHJcbmNvbnN0IEFDVElPTlMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvYWN0aW9ucycpXHJcblxyXG5sZXQgaXNIaWRkZW4gPSBmYWxzZTtcclxuXHJcbmxldCB0cmFjayA9IChwYXRoKSA9PiB7XHJcbiAgICBpZiAod2luZG93LmdhKSB7XHJcbiAgICAgICAgd2luZG93LmdhKCdzZXQnLCB7XHJcbiAgICAgICAgICAgIHBhZ2U6IHBhdGhcclxuICAgICAgICB9KTtcclxuICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAncGFnZXZpZXcnKTtcclxuICAgIH1cclxufVxyXG5cclxubGV0IHRvZ2dsZU1haW4gPSAoaGlkZSwgcGF0aCkgPT4ge1xyXG4gICAgdHJhY2socGF0aCk7XHJcbiAgICBpZiAoaGlkZSkge1xyXG4gICAgICAgIGlzSGlkZGVuID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaXNIaWRkZW4gPSBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUm91dGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG1ldGFNYXApIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSBtZXRhTWFwLlVzZXI7XHJcbiAgICAgICAgdGhpcy5QYWdlRmFjdG9yeSA9IG1ldGFNYXAuUGFnZUZhY3Rvcnk7XHJcblxyXG4gICAgICAgIHJpb3Qucm91dGUuc3RhcnQoKTtcclxuICAgICAgICByaW90LnJvdXRlKCh0YXJnZXQsIGlkID0gJycsIGFjdGlvbiA9ICcnLCAuLi5wYXJhbXMpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wYXRoID0gdGhpcy5nZXRQYXRoKHRhcmdldCk7XHJcblxyXG4gICAgICAgICAgICB0b2dnbGVNYWluKHRydWUsIHRoaXMucGF0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuUGFnZUZhY3RvcnkubmF2aWdhdGUodGhpcy5wYXRoLCBpZCwgYWN0aW9uLCAuLi5wYXJhbXMpO1xyXG5cclxuICAgICAgICAgICAgbWV0YU1hcC5FdmVudGVyLmRvKCdoaXN0b3J5Jywgd2luZG93LmxvY2F0aW9uLmhhc2gpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudG8odGhpcy5jdXJyZW50UGFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGN1cnJlbnRQYWdlKCkge1xyXG4gICAgICAgIGxldCBwYWdlID0gJ2hvbWUnO1xyXG4gICAgICAgIGxldCBwYWdlQ250ID0gdGhpcy51c2VyLmhpc3RvcnkubGVuZ3RoO1xyXG4gICAgICAgIGlmIChwYWdlQ250ID4gMCkge1xyXG4gICAgICAgICAgICBwYWdlID0gdGhpcy5nZXRQYXRoKHRoaXMudXNlci5oaXN0b3J5W3BhZ2VDbnQgLSAxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwYWdlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXQgY3VycmVudFBhdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcmV2aW91c1BhZ2UocGFnZU5vID0gMikge1xyXG4gICAgICAgIGxldCBwYWdlID0gJ2hvbWUnO1xyXG4gICAgICAgIGxldCBwYWdlQ250ID0gdGhpcy51c2VyLmhpc3RvcnkubGVuZ3RoO1xyXG4gICAgICAgIGlmIChwYWdlQ250ID4gMCkge1xyXG4gICAgICAgICAgICBwYWdlID0gdGhpcy5nZXRQYXRoKHRoaXMudXNlci5oaXN0b3J5W3BhZ2VDbnQgLSBwYWdlTm9dKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHByZXZpb3VzUGFnZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRQcmV2aW91c1BhZ2UoMik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFBhdGgocGF0aCkge1xyXG4gICAgICAgIGlmIChwYXRoKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChwYXRoLnN0YXJ0c1dpdGgoJyEnKSB8fCBwYXRoLnN0YXJ0c1dpdGgoJyMnKSkge1xyXG4gICAgICAgICAgICAgICAgcGF0aCA9IHBhdGguc3Vic3RyKDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwYXRoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFBhdGgocGF0aCkge1xyXG4gICAgICAgIHJldHVybiByb3V0ZS5nZXRQYXRoKHBhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB0byhwYXRoKSB7XHJcbiAgICAgICAgcGF0aCA9IHJvdXRlLmdldFBhdGgocGF0aCk7XHJcbiAgICAgICAgaWYgKHBhdGgpIHtcclxuICAgICAgICAgICAgdG9nZ2xlTWFpbih0cnVlLCBwYXRoKTtcclxuICAgICAgICAgICAgcmlvdC5yb3V0ZShgJHtwYXRofWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0byhwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHJvdXRlLnRvKHBhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIGJhY2soKSB7XHJcbiAgICAgICAgbGV0IHBhdGggPSAnaG9tZSc7XHJcbiAgICAgICAgbGV0IHBhZ2VDbnQgPSB0aGlzLnVzZXIuaGlzdG9yeS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKHBhZ2VDbnQgPiAxICYmICh0aGlzLmN1cnJlbnRQYWdlICE9ICdteW1hcHMnIHx8IHRoaXMuY3VycmVudFBhZ2UgIT0gdGhpcy5wcmV2aW91c1BhZ2UpKSB7XHJcbiAgICAgICAgICAgIHBhdGggPSB0aGlzLnByZXZpb3VzUGFnZTtcclxuICAgICAgICAgICAgbGV0IGJhY2tObyA9IDI7XHJcbiAgICAgICAgICAgIHdoaWxlIChwYXRoLnN0YXJ0c1dpdGgoQUNUSU9OUy5ERUxFVEVfTUFQKSB8fFxyXG4gICAgICAgICAgICAgICAgcGF0aC5zdGFydHNXaXRoKEFDVElPTlMuQ09QWV9NQVApIHx8XHJcbiAgICAgICAgICAgICAgICBwYXRoLnN0YXJ0c1dpdGgoQUNUSU9OUy5ORVdfTUFQKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGJhY2tObyArPSAxO1xyXG4gICAgICAgICAgICAgICAgcGF0aCA9IHRoaXMuZ2V0UHJldmlvdXNQYWdlKGJhY2tObyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG8ocGF0aCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IHJvdXRlID0gUm91dGVyO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBSb3V0ZXI7IiwibGV0IEF1dGgwTG9jayA9IHJlcXVpcmUoJ2F1dGgwLWxvY2snKTtcblxuY2xhc3MgQXV0aDAge1xuXG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBtZXRhTWFwKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLm1ldGFNYXAgPSBtZXRhTWFwO1xuICAgICAgICB0aGlzLmxvY2sgPSBuZXcgQXV0aDBMb2NrKGNvbmZpZy5hcGksIGNvbmZpZy5hcHApO1xuICAgICAgICB0aGlzLmxvY2sub24oJ2xvYWRpbmcgcmVhZHknLCAoLi4uZSkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGxvZ2luKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2xvZ2luKSB7XG4gICAgICAgICAgICB0aGlzLl9sb2dpbiA9IG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgc2hvd0xvZ2luID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2suc2hvdyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dpbkFmdGVyU2lnbnVwOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aFBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlOiAnb3BlbmlkIG9mZmxpbmVfYWNjZXNzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCAoZXJyLCBwcm9maWxlLCBpZF90b2tlbiwgY3Rva2VuLCBvcHQsIHJlZnJlc2hfdG9rZW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRmFpbChlcnIsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ2lkX3Rva2VuJywgaWRfdG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ3Byb2ZpbGUnLCBwcm9maWxlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3Rva2VuID0gcHJvZmlsZS5jdG9rZW4gPSBjdG9rZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pZF90b2tlbiA9IHByb2ZpbGUuaWRfdG9rZW4gPSBpZF90b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2ZpbGUgPSBwcm9maWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaF90b2tlbiA9IHByb2ZpbGUucmVmcmVzaF90b2tlbiA9IHJlZnJlc2hfdG9rZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2V0U2Vzc2lvbiA9IGZ1bGZpbGwocHJvZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmdldFNlc3Npb24oKS50aGVuKChwcm9maWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKHByb2ZpbGUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0xvZ2luKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dMb2dpbigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ2luO1xuICAgIH1cblxuICAgIGxpbmtBY2NvdW50KCkge1xuICAgICAgICB0aGlzLmxvY2suc2hvdyh7XG4gICAgICAgICAgICBjYWxsYmFja1VSTDogbG9jYXRpb24uaHJlZi5yZXBsYWNlKGxvY2F0aW9uLmhhc2gsICcnKSxcbiAgICAgICAgICAgIGRpY3Q6IHtcbiAgICAgICAgICAgICAgICBzaWduaW46IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdMaW5rIHdpdGggYW5vdGhlciBhY2NvdW50J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdXRoUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgYWNjZXNzX3Rva2VuOiB0aGlzLmN0b2tlblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbkZhaWwoZXJyLCByZWplY3QpIHtcbiAgICAgICAgdGhpcy5tZXRhTWFwLmVycm9yKGVycik7XG4gICAgICAgIGlmIChyZWplY3QpIHtcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgdGhpcy5sb2dvdXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFNlc3Npb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnByb2ZpbGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2dldFNlc3Npb24gPSBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgZnVsZmlsbCh0aGlzLnByb2ZpbGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuX2dldFNlc3Npb24pIHtcbiAgICAgICAgICAgIHRoaXMuX2dldFNlc3Npb24gPSBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsZm9yYWdlLmdldEl0ZW0oJ2lkX3Rva2VuJykudGhlbigoaWRfdG9rZW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkX3Rva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NrLmdldFByb2ZpbGUoaWRfdG9rZW4sIChlcnIsIHByb2ZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25GYWlsKGVyciwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGZvcmFnZS5zZXRJdGVtKCdpZF90b2tlbicsIGlkX3Rva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxmb3JhZ2Uuc2V0SXRlbSgncHJvZmlsZScsIHByb2ZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlkX3Rva2VuID0gcHJvZmlsZS5pZF90b2tlbiA9IGlkX3Rva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2ZpbGUgPSBwcm9maWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVsZmlsbChwcm9maWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKCdObyBzZXNzaW9uJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0U2Vzc2lvbjtcbiAgICB9XG5cbiAgICBsb2dvdXQoKSB7XG4gICAgICAgIGxvY2FsZm9yYWdlLnJlbW92ZUl0ZW0oJ2lkX3Rva2VuJykudGhlbigoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxmb3JhZ2UucmVtb3ZlSXRlbSgncHJvZmlsZScpO1xuICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJvZmlsZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmN0b2tlbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmlkX3Rva2VuID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaF90b2tlbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9sb2dpbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9nZXRTZXNzaW9uID0gbnVsbDtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBBdXRoMDtcblxuXG4iLCJjb25zdCB1dWlkID0gcmVxdWlyZSgnLi4vdG9vbHMvdXVpZC5qcycpO1xyXG5jb25zdCBNZXRhTWFwID0gd2luZG93Lk1ldGFNYXA7XHJcblxyXG5jbGFzcyBVc2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKHByb2ZpbGUsIGF1dGgsIGV2ZW50ZXIsIG1ldGFGaXJlKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLmV2ZW50ZXIgPSBldmVudGVyO1xyXG4gICAgICAgIHRoaXMubWV0YUZpcmUgPSBtZXRhRmlyZTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IFVSSSh3aW5kb3cubG9jYXRpb24pLnF1ZXJ5KHRydWUpO1xyXG4gICAgICAgIHRoaXMudGhpbmtxdWVyeSA9ICh0aGlzLnBhcmFtcy50aGlua3F1ZXJ5ID8gdHJ1ZSA6IGZhbHNlKTtcclxuICAgICAgICB0aGlzLnVzZXJLZXkgPSB1dWlkKCk7XHJcbiAgICAgICAgdGhpcy5vblJlYWR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZWFkeSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX29uUmVhZHkpIHtcclxuICAgICAgICAgICAgbGV0IHRyYWNrSGlzdG9yeSA9IF8ub25jZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50ZXIuZXZlcnkoJ2hpc3RvcnknLCAocGFnZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoID09IDAgfHwgcGFnZSAhPSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKHBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1ldGFGaXJlLnNldERhdGEodGhpcy5oaXN0b3J5LCBgdXNlcnMvJHt0aGlzLmF1dGgudWlkfS9oaXN0b3J5YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLl9vblJlYWR5ID0gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXRhRmlyZS5vbihgdXNlcnMvJHt0aGlzLmF1dGgudWlkfWAsICh1c2VyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1c2VyLmhpc3RvcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXIuaGlzdG9yeSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZmlsZSA9IHVzZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrSGlzdG9yeSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uUmVhZHk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRpc3BsYXlOYW1lKCkge1xyXG4gICAgICAgIGxldCByZXQgPSB0aGlzLmZ1bGxOYW1lO1xyXG4gICAgICAgIGlmICh0aGlzLnByb2ZpbGUgJiYgdGhpcy5wcm9maWxlLmlkZW50aXR5KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXQpIHtcclxuICAgICAgICAgICAgICAgIHJldCA9IHJldC5zcGxpdCgnICcpWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghcmV0KSB7XHJcbiAgICAgICAgICAgICAgICByZXQgPSB0aGlzLnByb2ZpbGUuaWRlbnRpdHkubmlja25hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGdldCBmdWxsTmFtZSgpIHtcclxuICAgICAgICBsZXQgcmV0ID0gJyc7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvZmlsZSAmJiB0aGlzLnByb2ZpbGUuaWRlbnRpdHkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucHJvZmlsZS5pZGVudGl0eS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXQgPSB0aGlzLnByb2ZpbGUuaWRlbnRpdHkubmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwaWN0dXJlKCkge1xyXG4gICAgICAgIGxldCByZXQgPSAnJztcclxuICAgICAgICBpZiAodGhpcy5wcm9maWxlICYmIHRoaXMucHJvZmlsZS5pZGVudGl0eSkge1xyXG4gICAgICAgICAgICByZXQgPSB0aGlzLnByb2ZpbGUuaWRlbnRpdHkucGljdHVyZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdXNlcklkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF1dGgudWlkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc0FkbWluKCkge1xyXG4gICAgICAgIGxldCByZXQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5wcm9maWxlICYmIHRoaXMucHJvZmlsZS5pZGVudGl0eSkge1xyXG4gICAgICAgICAgICByZXQgPSB0aGlzLnByb2ZpbGUuaWRlbnRpdHkucm9sZXMuaW5kZXhPZignYWRtaW4nKSAhPT0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGhpc3RvcnkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZmlsZS5oaXN0b3J5IHx8IFtdO1xyXG4gICAgfVxyXG4gICAgc2F2ZVVzZXJFZGl0b3JPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yX29wdGlvbnM6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFVzZXI7IiwiLy8gZnVuY3Rpb25zIGhhbmRsaW5nIGFuYWx5dGljc1xyXG4vLyBhbmFseXRpY3MgZGlzcGxheSBpcyBpbiB2aWV3cy9tYXBzL19hbmFseXRpY3NfdGFiX21hcCBhbmQgX2FuYWx5dGljc190YWJfdGhpbmdcclxuU2FuZGJhbmtFZGl0b3IuQW5hbHl0aWNzID0gZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaGFuZGxlRGlhZ3JhbUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIGlmIChldmVudE5hbWUgPT0gJ0NoYW5nZWRTZWxlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX0FOQUxZVElDU19USElORykpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlQ29udGV4dHVhbEFuYWx5dGljcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBhIHRhYiBpcyBvcGVuZWQgb3IgY2xvc2VkXHJcbiAgICB0aGlzLmN1cnJlbnRUYWJDaGFuZ2VkID0gZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKG5ld1ZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9BTkFMWVRJQ1NfVEhJTkcpIHsgLy8gb3BlbmluZyB0aGluZyBhbmFseXRpY3MgdGFiXHJcbiAgICAgICAgICAgIHNlbGYudXBkYXRlQ29udGV4dHVhbEFuYWx5dGljcygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gdGhpcyBnZXRzIHBvcHVsYXRlZCBieSBtYXAubG9hZE1hcEV4dHJhRGF0YSwgb24gbG9hZCBhbmQgYWZ0ZXIgZXZlcnkgYXV0b3NhdmVcclxuICAgIHRoaXMubWFwQW5hbHl0aWNzID0gbnVsbDtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0gY29udGV4dHVhbCBhbmFseXRpY3MgLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIC0gdGhlc2UgYXJlIGFsbCBjYWxjdWxhdGVkIGhlcmUsIHVubGlrZSBtYXAgYW5hbHl0aWNzIHdoaWNoIGFyZSBjYWxjdWxhdGVkIG9uIHRoZSBzZXJ2ZXIgYW5kIGNvbm5lY3RlZCB3aXRoIGJhZGdlcyBhbmQgcG9pbnRzXHJcblxyXG4gICAgLy8gdGhpcyBnZXRzIGNhbGN1bGF0ZWQgYnkgdXBkYXRlQ29udGV4dHVhbEFuYWx5dGljc1xyXG4gICAgdGhpcy5jb250ZXh0dWFsQW5hbHl0aWNzID0ge1xyXG4gICAgICAgIHRoaW5nTmFtZTogJycsXHJcblxyXG4gICAgICAgIC8vIHRoaW5nIHN0dWZmXHJcbiAgICAgICAgZGlzdGluY3RGcm9tOiAwLFxyXG4gICAgICAgIGludGVudGlvbmFsbHlEaXN0aW5jdEZyb206IDAsXHJcbiAgICAgICAgcGFydE9mOiAwLFxyXG4gICAgICAgIGluY2x1ZGVzUGFydHM6IDAsXHJcbiAgICAgICAgcmVsYXRlZFRvOiAwLFxyXG4gICAgICAgIGlzUmVsYXRpb25zaGlwOiAwLFxyXG4gICAgICAgIGxvb2tpbmdBdDogMCxcclxuICAgICAgICBsb29rZWRBdEZyb206IDAsXHJcblxyXG4gICAgICAgIC8vIFIgc3R1ZmZcclxuICAgICAgICByRnJvbVRoaW5nTmFtZTogJycsXHJcbiAgICAgICAgclRvVGhpbmdOYW1lOiAnJyxcclxuICAgICAgICBpc1JUaGluZzogZmFsc2UsXHJcbiAgICAgICAgaXNSU3lzdGVtOiBmYWxzZSxcclxuICAgICAgICBpc1JQb2ludDogZmFsc2UsXHJcbiAgICAgICAgaXNSVmlldzogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy51cGRhdGVDb250ZXh0dWFsQW5hbHl0aWNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3VwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MnKTtcclxuICAgICAgICBpZiAoIW1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfQU5BTFlUSUNTX1RISU5HKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHZhciBwYXJ0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKTtcclxuICAgICAgICB2YXIgYSA9IHNlbGYuY29udGV4dHVhbEFuYWx5dGljcztcclxuXHJcbiAgICAgICAgaWYgKHBhcnQgJiYgcGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGluZyA9IHBhcnQ7XHJcblxyXG4gICAgICAgICAgICAvLyB0aGluZyBuYW1lXHJcbiAgICAgICAgICAgIGEudGhpbmdOYW1lID0gdGhpbmcuZGF0YS50ZXh0O1xyXG5cclxuICAgICAgICAgICAgLy8gZGlzdGluY3QgZnJvbVxyXG4gICAgICAgICAgICBhLmRpc3RpbmN0RnJvbSA9IF8ud2hlcmUoZGlhZ3JhbS5tb2RlbC5ub2RlRGF0YUFycmF5LCB7aXNHcm91cDogdHJ1ZX0pLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgICAgICAvLyBwYXJ0IG9mXHJcbiAgICAgICAgICAgIHZhciBsZXZlbCA9IDA7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSB0aGluZztcclxuICAgICAgICAgICAgd2hpbGUgKHRoaW5nMiA9IGdldENvbnRhaW5pbmdHcm91cCh0aGluZzIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXZlbCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGEucGFydE9mID0gbGV2ZWw7XHJcblxyXG4gICAgICAgICAgICAvLyBpbmNsdWRlcyBwYXJ0c1xyXG4gICAgICAgICAgICBhLmluY2x1ZGVzUGFydHMgPSBjb3VudEdyb3Vwcyh0aGluZyk7XHJcblxyXG4gICAgICAgICAgICAvLyByZWxhdGVkIHRvIC8gbG9va2luZyBhdCAvIGxvb2tlZCBhdCBmcm9tIC8gaW50ZW50aW9uYWxseSBkaXN0aW5jdCBmcm9tXHJcbiAgICAgICAgICAgIGEucmVsYXRlZFRvID0gMDtcclxuICAgICAgICAgICAgYS5sb29raW5nQXQgPSAwO1xyXG4gICAgICAgICAgICBhLmxvb2tlZEF0RnJvbSA9IDA7XHJcbiAgICAgICAgICAgIGEuaW50ZW50aW9uYWxseURpc3RpbmN0RnJvbSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBsaW5rcyA9IHRoaW5nLmxpbmtzQ29ubmVjdGVkO1xyXG4gICAgICAgICAgICB2YXIgckNvbm5lY3RlZFRoaW5nS2V5cyA9IFtdO1xyXG4gICAgICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgLy8gUCBsaW5rXHJcbiAgICAgICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5rLmZyb21Ob2RlID09IHRoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGEubG9va2luZ0F0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxpbmsudG9Ob2RlID09IHRoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGEubG9va2VkQXRGcm9tKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gRCBsaW5rXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ0QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYS5pbnRlbnRpb25hbGx5RGlzdGluY3RGcm9tKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBSIGxpbmtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFsaW5rLmRhdGEuY2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0cmFjayBrZXlzIG9mIHJlbGF0ZWQgdGhpbmdzIHNvIHdlIGRvbid0IGNvdW50IHRoZW0gbXVsdGlwbGUgdGltZXNcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGluay5mcm9tTm9kZSA9PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByQ29ubmVjdGVkVGhpbmdLZXlzLnB1c2gobGluay50b05vZGUuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsaW5rLnRvTm9kZSA9PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByQ29ubmVjdGVkVGhpbmdLZXlzLnB1c2gobGluay5mcm9tTm9kZS5kYXRhLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGEucmVsYXRlZFRvID0gXy51bmlxKHJDb25uZWN0ZWRUaGluZ0tleXMpLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIC8vIGlzUmVsYXRpb25zaGlwXHJcbiAgICAgICAgICAgIGEuaXNSZWxhdGlvbnNoaXAgPSB0aGluZy5pc0xpbmtMYWJlbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocGFydCAmJiBwYXJ0IGluc3RhbmNlb2YgZ28uTGluaykge1xyXG4gICAgICAgICAgICB2YXIgcmVsID0gcGFydDtcclxuXHJcbiAgICAgICAgICAgIC8vIHRoaW5nIG5hbWVzXHJcbiAgICAgICAgICAgIGEuckZyb21UaGluZ05hbWUgPSByZWwuZnJvbU5vZGUuZGF0YS50ZXh0O1xyXG4gICAgICAgICAgICBhLnJUb1RoaW5nTmFtZSA9IHJlbC50b05vZGUuZGF0YS50ZXh0O1xyXG5cclxuICAgICAgICAgICAgLy8gaXMgUiB0aGluZ1xyXG4gICAgICAgICAgICBhLmlzUlRoaW5nID0gcmVsLmlzTGFiZWxlZExpbms7XHJcblxyXG4gICAgICAgICAgICAvLyBpcyBSIHN5c3RlbVxyXG4gICAgICAgICAgICBhLmlzUlN5c3RlbSA9IHJlbC5pc0xhYmVsZWRMaW5rICYmIGNvdW50R3JvdXBzKHJlbC5sYWJlbE5vZGVzLmZpcnN0KCkpID4gMDtcclxuXHJcbiAgICAgICAgICAgIC8vIGlzIFIgcG9pbnRcclxuICAgICAgICAgICAgYS5pc1JQb2ludCA9IHJlbC5pc0xhYmVsZWRMaW5rICYmIGlzUG9pbnQocmVsLmxhYmVsTm9kZXMuZmlyc3QoKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBpcyBSIHZpZXdcclxuICAgICAgICAgICAgYS5pc1JWaWV3ID0gcmVsLmlzTGFiZWxlZExpbmsgJiYgaXNWaWV3KHJlbC5sYWJlbE5vZGVzLmZpcnN0KCkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyBlaXRoZXIgdGhlIGNvbnRhaW5pbmdHcm91cCBvciB0aGUgclRoaW5nQ29udGFpbmluZ0dyb3VwLCB3aGljaGV2ZXIgaXMgbm9uLW51bGxcclxuICAgIGZ1bmN0aW9uIGdldENvbnRhaW5pbmdHcm91cChncm91cCkge1xyXG4gICAgICAgIHJldHVybiBncm91cC5jb250YWluaW5nR3JvdXAgfHwgZ2V0UlRoaW5nQ29udGFpbmluZ0dyb3VwKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBncm91cCBpcyBhbiBSLXRoaW5nIGJldHdlZW4gdHdvIHNpYmxpbmcgcGFydHMgb2YgYSB3aG9sZSwgcmV0dXJucyB0aGUgd2hvbGU7IGVsc2UgcmV0dXJucyBudWxsXHJcbiAgICBmdW5jdGlvbiBnZXRSVGhpbmdDb250YWluaW5nR3JvdXAoZ3JvdXApIHtcclxuICAgICAgICBpZiAoZ3JvdXAuaXNMaW5rTGFiZWwpIHtcclxuICAgICAgICAgICAgdmFyIGZyb21QYXJlbnQgPSBncm91cC5sYWJlbGVkTGluay5mcm9tTm9kZS5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgIHZhciB0b1BhcmVudCA9IGdyb3VwLmxhYmVsZWRMaW5rLnRvTm9kZS5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgIGlmIChmcm9tUGFyZW50ICE9PSBudWxsICYmIHRvUGFyZW50ICE9PSBudWxsICYmIGZyb21QYXJlbnQgPT0gdG9QYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tUGFyZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvdW50cyB0aGUgbWVtYmVyIHBhcnRzIG9mIHRoZSBncm91cCB0aGF0IGFyZSBncm91cHMsIHJlY3Vyc2l2ZWx5IChub3QgaW5jbHVkaW5nIHRoZSBncm91cCBpdHNlbGYpXHJcbiAgICBmdW5jdGlvbiBjb3VudEdyb3Vwcyhncm91cCkge1xyXG4gICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIGl0ID0gZ2V0TWVtYmVyR3JvdXBzKGdyb3VwKS5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGNvdW50ICs9IDEgKyBjb3VudEdyb3VwcyhwYXJ0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb3VudDtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBjb2xsZWN0aW9uIG9mIGdyb3VwcyB0aGF0IGFyZSBlaXRoZXIgYSBtZW1iZXJQYXJ0IG9mIHRoaXMgZ3JvdXAsIG9yIGFuIFItdGhpbmcgYmV0d2VlbiBzaWJsaW5nIG1lbWJlclBhcnRzXHJcbiAgICBmdW5jdGlvbiBnZXRNZW1iZXJHcm91cHMoZ3JvdXApIHtcclxuICAgICAgICB2YXIgbWVtYmVycyA9IG5ldyBnby5MaXN0KCk7XHJcbiAgICAgICAgdmFyIGl0ID0gZ3JvdXAubWVtYmVyUGFydHM7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXJzLmFkZChwYXJ0KTtcclxuICAgICAgICAgICAgICAgIHZhciBydGhpbmcgPSBnZXRSVGhpbmdUb1NpYmxpbmcocGFydCk7IC8vIE5COiBzaG91bGQgbm90IGdldCBkdXBsaWNhdGlvbiBoZXJlLCBhcyB0aGlzIGNoZWNrcyBmb3Igci10aGluZ3MgaW4gb25seSBvbmUgZGlyZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBpZiAocnRoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocnRoaW5nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVtYmVycztcclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiB0aGUgZ3JvdXAgaXMgbGlua2VkIGJ5IGFuIFItdGhpbmcgdG8gYSBzaWJsaW5nICh3aXRoIHRoZSBncm91cCBhcyB0aGUgZnJvbU5vZGUpLCByZXR1cm5zIHRoZSBSLXRoaW5nOyBlbHNlIHJldHVybnMgbnVsbFxyXG4gICAgZnVuY3Rpb24gZ2V0UlRoaW5nVG9TaWJsaW5nKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGl0ID0gZ3JvdXAuZmluZExpbmtzT3V0T2YoKTtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmxhYmVsTm9kZXMuY291bnQgPiAwICYmIGxpbmsudG9Ob2RlLmNvbnRhaW5pbmdHcm91cCA9PSBncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsaW5rLmxhYmVsTm9kZXMuZmlyc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc1BvaW50KGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGl0ID0gZ3JvdXAuZmluZExpbmtzT3V0T2YoKTtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNWaWV3KGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGl0ID0gZ3JvdXAuZmluZExpbmtzSW50bygpO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufTsiLCIvLyBmdW5jdGlvbnMgaGFuZGxpbmcgYXR0YWNobWVudHNcclxuXHJcblNhbmRiYW5rRWRpdG9yLkF0dGFjaG1lbnRzID0gZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMuc2VsZWN0ZWRUaGluZyA9IG51bGw7XHJcbiAgICB0aGlzLmF0dGFjaG1lbnRzID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmF0dGFjaG1lbnRUeXBlcyA9IFtcclxuICAgICAgICB7bmFtZTogJ25vdGUnLCBsYWJlbFNpbmd1bGFyOiAnTm90ZScsIGxhYmVsUGx1cmFsOiAnTm90ZXMnfSwgXHJcbiAgICAgICAge25hbWU6ICdsaW5rJywgbGFiZWxTaW5ndWxhcjogJ1dlYiBMaW5rJywgbGFiZWxQbHVyYWw6ICdXZWIgTGlua3MnfSwgXHJcbiAgICAgICAge25hbWU6ICd0YXNrJywgbGFiZWxTaW5ndWxhcjogJ1Rhc2snLCBsYWJlbFBsdXJhbDogJ1Rhc2tzJ30sIFxyXG4gICAgICAgIHtuYW1lOiAnbWFwJywgbGFiZWxTaW5ndWxhcjogJ0xpbmtlZCBNZXRhTWFwJywgbGFiZWxQbHVyYWw6ICdMaW5rZWQgTWV0YU1hcHMnfVxyXG4vLyAgICAgICAge25hbWU6ICdkb2MnLCBsYWJlbFNpbmd1bGFyOiAnRG9jdW1lbnQnLCBsYWJlbFBsdXJhbDogJ0RvY3VtZW50cyd9ICAvLyBsaW1pdCBvdmVyYWxsIHN0b3JhZ2Ugc3BhY2UgT1Igc2ltcGxlciBydWxlcz9cclxuICAgICAgICAvLyBsaW1pdCBmaWxlIHR5cGVzIC0gcGRmLCBqcGcsIGdpZiwgcG5nLCBvZmZpY2U/Li4uICB3aGl0ZWxpc3QgdnMuIGJsYWNrbGlzdFxyXG4gICAgXTtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaGFuZGxlRGlhZ3JhbUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIGlmIChldmVudE5hbWUgPT0gJ0NoYW5nZWRTZWxlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX0FUVEFDSE1FTlRTKSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zdG9wRWRpdGluZ0FsbCgpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zYXZlQXR0YWNobWVudHMoKTtcclxuICAgICAgICAgICAgICAgIHNlbGYubG9hZFNlbGVjdGVkVGhpbmdBdHRhY2htZW50cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBhIHRhYiBpcyBvcGVuZWQgb3IgY2xvc2VkXHJcbiAgICB0aGlzLmN1cnJlbnRUYWJDaGFuZ2VkID0gZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKG5ld1ZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9BVFRBQ0hNRU5UUykgeyAvLyBvcGVuaW5nIHRhYlxyXG4gICAgICAgICAgICBzZWxmLmxvYWRTZWxlY3RlZFRoaW5nQXR0YWNobWVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9sZFZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9BVFRBQ0hNRU5UUykgeyAvLyBjbG9zaW5nIHRhYlxyXG4gICAgICAgICAgICBzZWxmLnNhdmVBdHRhY2htZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5sb2FkU2VsZWN0ZWRUaGluZ0F0dGFjaG1lbnRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKG1hcC50aGluZ1NlbGVjdGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUaGluZyA9IG1hcC5nZXRVbmlxdWVUaGluZ1NlbGVjdGVkKCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzID0gc2VsZi5zZWxlY3RlZFRoaW5nLmRhdGEuYXR0YWNobWVudHM7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5hdHRhY2htZW50cyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNldCBhbGwgYXR0YWNobWVudHMgdG8gZWRpdGluZyA9IGZhbHNlXHJcbiAgICB0aGlzLnN0b3BFZGl0aW5nQWxsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYuYXR0YWNobWVudHMpIHtcclxuICAgICAgICAgICAgICAgIF8uZWFjaChzZWxmLmF0dGFjaG1lbnRzLCBmdW5jdGlvbiAoYXR0KSB7IGF0dC5lZGl0aW5nID0gZmFsc2U7IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZWRpdGluZ0FuSXRlbSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmF0dGFjaG1lbnRzICYmIF8uZmluZFdoZXJlKHNlbGYuYXR0YWNobWVudHMsIHtlZGl0aW5nOiB0cnVlfSkgIT09IHVuZGVmaW5lZDtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0IGFsbCBvdGhlciBhdHRhY2htZW50cyB0byBlZGl0aW5nID0gZmFsc2VcclxuICAgIHRoaXMuc3RhcnRFZGl0aW5nID0gZnVuY3Rpb24oYXR0YWNobWVudCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc3RvcEVkaXRpbmdBbGwoKTtcclxuICAgICAgICAgICAgYXR0YWNobWVudC5lZGl0aW5nID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zYXZlSXRlbSA9IGZ1bmN0aW9uKGF0dGFjaG1lbnQpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBhdHRhY2htZW50LmVkaXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgc2VsZi5zYXZlQXR0YWNobWVudHMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zYXZlQXR0YWNobWVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdzYXZlQXR0YWNobWVudHMsIHNlbGVjdGVkOiAnICsgc2VsZi5zZWxlY3RlZFRoaW5nKTtcclxuICAgICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWRUaGluZykge1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2VsZi5zZWxlY3RlZFRoaW5nLmRhdGEsICdhdHRhY2htZW50cycsIHNlbGYuYXR0YWNobWVudHMpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWFwLmdldEF1dG9zYXZlKCkuc2F2ZU5vdygnZWRpdF9hdHRhY2htZW50cycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxpc3RBdHRhY2htZW50cyA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgdmFyIGF0dHMgPSBfLndoZXJlKHNlbGYuYXR0YWNobWVudHMsIHt0eXBlOiB0eXBlfSk7XHJcbiAgICAgICAgcmV0dXJuIGF0dHM7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYWRkQXR0YWNobWVudCA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgdmFyIGl0ZW0gPSB7IHR5cGU6IHR5cGUsIGVkaXRpbmc6IHRydWUgfTtcclxuICAgICAgICBpZiAodHlwZSA9PSAnbm90ZScpIHtcclxuICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgdGV4dDogJycsIHVybDogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICdsaW5rJykge1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyBsYWJlbDogJycsIHVybDogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICd0YXNrJykge1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyB0ZXh0OiAnJyB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gJ2RvYycpIHtcclxuICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgbmFtZTogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICdtYXAnKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMucHVzaChfLmV4dGVuZChpdGVtLCB7IG1hcFJlZjogeyBpZDogMCwgbmFtZTogJycgIH0gfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1ZhbGlkID0gZnVuY3Rpb24oYXR0YWNobWVudCkge1xyXG4gICAgICAgIGlmIChhdHRhY2htZW50LnR5cGUgPT0gJ2xpbmsnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LmxhYmVsICYmIGF0dGFjaG1lbnQudXJsICYmIGF0dGFjaG1lbnQubGFiZWwudHJpbSgpICE9PSAnJyAmJiBhdHRhY2htZW50LnVybC50cmltKCkgIT09ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhdHRhY2htZW50LnR5cGUgPT0gJ25vdGUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LnRleHQgJiYgYXR0YWNobWVudC50ZXh0LnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PSAndGFzaycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0dGFjaG1lbnQudGV4dCAmJiBhdHRhY2htZW50LnRleHQudHJpbSgpICE9PSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYXR0YWNobWVudC50eXBlID09ICdkb2MnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50Lm5hbWUgJiYgYXR0YWNobWVudC5uYW1lLnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PSAnbWFwJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYXR0YWNobWVudC5tYXBSZWYgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IG51bGwgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGVsZXRlQXR0YWNobWVudCA9IGZ1bmN0aW9uIChhdHQpIHtcclxuICAgICAgICB2YXIgdHlwZUxhYmVsID0gXy5maW5kV2hlcmUoc2VsZi5hdHRhY2htZW50VHlwZXMsIHsgbmFtZTogYXR0LnR5cGUgfSkubGFiZWxTaW5ndWxhcjtcclxuICAgICAgICBpZiAoY29uZmlybSAoJ0RlbGV0ZSAnICsgdHlwZUxhYmVsICsgJz8nKSkge1xyXG4gICAgICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZihzZWxmLmF0dGFjaG1lbnRzLCBhdHQpO1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnNwbGljZShpLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHF1ZXJ5IHNlcnZlciBmb3IgbWFwcyBjb250YWluaW5nIHRoZSBnaXZlbiB0ZXh0IGluIHRoZSBtYXAgbmFtZVxyXG4gICAgdGhpcy5nZXRPdGhlck1hcHMgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICAvLyBOQjogdGhpcyBVUkwgaXMgY29uc3RydWN0ZWQgdG8gbWF0Y2ggdGhlIG9uZSBnZW5lcmF0ZWQgYnkgdGhlIHNlYXJjaCBmb3JtIG9uIHRoZSBtYXBzIHBhZ2UuLi5cclxuICAgICAgICB2YXIgdXJsID0gJy9tYXBzL3Zpc2libGVfbWFwcy5qc29uP3V0Zjg9JUUyJTlDJTkzJnElNUJuYW1lX2NvbnQlNUQ9JyArIHZpZXdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5tYXBzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm90aGVyTWFwU2VsZWN0ZWQgPSBmdW5jdGlvbih2aWV3VmFsdWUsIG1vZGVsVmFsdWUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdvdGhlck1hcFNlbGVjdGVkLCB2aWV3VmFsdWU6ICcgKyB2aWV3VmFsdWUuaWQgKyAnLCBtb2RlbFZhbHVlOiAnICsgbW9kZWxWYWx1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZm9ybWF0T3RoZXJNYXAgPSBmdW5jdGlvbiAobW9kZWwpIHtcclxuICAgICAgICByZXR1cm4gKG1vZGVsID8gbW9kZWwubmFtZSA6ICcnKTtcclxuICAgIH07XHJcblxyXG59OyIsIi8vIGZ1bmN0aW9ucyBoYW5kbGluZyBlZGl0b3IgYXV0b3NhdmUgZnVuY3Rpb25cclxuXHJcblNhbmRiYW5rRWRpdG9yLkF1dG9zYXZlID0gZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHZhciBjaGFuZ2VUeXBlcyA9IFtdO1xyXG5cclxuICAgIHRoaXMuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBkbyBhIHNhdmUgbmV4dCB0aW1lIHRoZSBzZXQgaW50ZXJ2YWwgcGFzc2VzIHdpdGggbm8gc2F2ZSByZXF1ZXN0c1xyXG4gICAgdGhpcy5zYXZlID0gZnVuY3Rpb24oY2hhbmdlVHlwZSkge1xyXG4gICAgICAgIGNoYW5nZVR5cGVzLnB1c2goY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgZGVsYXllZEF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRvIGEgc2F2ZSByaWdodCBub3dcclxuICAgIHRoaXMuc2F2ZU5vdyA9IGZ1bmN0aW9uKGNoYW5nZVR5cGUpIHtcclxuICAgICAgICBjaGFuZ2VUeXBlcy5wdXNoKGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIGF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRvbid0IGxldCBhdXRvc2F2ZSBiZSB0cmlnZ2VyZWQgbW9yZSB0aGFuIGV2ZXJ5IE4gbWlsbGlzZWNvbmRzLi4uXHJcbiAgICB2YXIgZGVsYXllZEF1dG9zYXZlID0gXy5kZWJvdW5jZShhdXRvc2F2ZSwgMjAwMCk7XHJcblxyXG4gICAgLy8gY29tcGlsZSB0aGUgY3VycmVudCBsaXN0IG9mIGNoYW5nZSB0eXBlIGRlc2NyaXB0aW9ucywgcHJvY2VzcyB0aGVtIFxyXG4gICAgLy8gdG8gcmVtb3ZlIGR1cGxpY2F0ZXMsIGFuZCBzYXZlIHRoZSBjdXJyZW50IGRhdGFcclxuICAgIGZ1bmN0aW9uIGF1dG9zYXZlKCkge1xyXG4gICAgICAgIC8vIHN0b3AgcmlnaHQgaGVyZSBpZiB3ZSdyZSBpbiB0aGUgc2FuZGJveCBhbmQvb3Igd2UgZG9uJ3QgaGF2ZSBlZGl0IHBlcm1pc3Npb25zXHJcbiAgICAgICAgaWYgKCRzY29wZS5zYW5kYm94IHx8ICEkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWNoYW5nZVR5cGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdhdXRvc2F2ZTogbm90aGluZyB0byBzYXZlIScpOyAvLyBzaG91bGRuJ3QgaGFwcGVuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRlLWR1cGUgdGhlIGxpc3Qgb2YgY2hhbmdlIHR5cGVzXHJcbiAgICAgICAgdmFyIGNoYW5nZUxpc3QgPSBfLnVuaXEoY2hhbmdlVHlwZXMpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NoYW5nZUxpc3Q6ICcgKyBjaGFuZ2VMaXN0KTtcclxuICAgICAgICAvLyBkb24ndCBzaG93IG1vdmUgZXZlbnRzIHVubGVzcyB0aGF0J3MgYWxsIHdlIGhhdmVcclxuICAgICAgICB2YXIgY2hhbmdlTGlzdFdpdGhvdXRNb3ZlcyA9IF8ud2l0aG91dChjaGFuZ2VMaXN0LCAnbW92ZScpO1xyXG4gICAgICAgIGlmIChjaGFuZ2VMaXN0V2l0aG91dE1vdmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY2hhbmdlTGlzdCA9IGNoYW5nZUxpc3RXaXRob3V0TW92ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NoYW5nZUxpc3Qgd2l0aG91dCBtb3ZlczogJyArIGNoYW5nZUxpc3QpO1xyXG4gICAgICAgIC8vIGdldCBkZXNjcmlwdGlvbnNcclxuICAgICAgICB2YXIgZGVzY3JpcHRpb25MaXN0ID0gXy5tYXAoY2hhbmdlTGlzdCwgZnVuY3Rpb24oY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF8ucmVzdWx0KGNoYW5nZURlc2NyaXB0aW9ucywgY3QpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdhdXRvc2F2ZSwgY2hhbmdlTGlzdDogJyArIGNoYW5nZUxpc3QgKyAnLCBkZXNjcmlwdGlvbkxpc3Q6ICcgKyBkZXNjcmlwdGlvbkxpc3QpO1xyXG4gICAgICAgIHZhciBwb3N0RGF0YSA9IHtcclxuICAgICAgICAgICAgZGF0YTogSlNPTi5wYXJzZShtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnRvSnNvbigpKSxcclxuICAgICAgICAgICAgc3RhdGVfZGF0YTogbWFwLmdldFVpKCkuZ2V0U3RhdGVEYXRhKCksXHJcbiAgICAgICAgICAgIGVkaXRvcl9vcHRpb25zOiBtYXAuZ2V0VWkoKS5nZXRNYXBFZGl0b3JPcHRpb25zKCksXHJcbiAgICAgICAgICAgIHByZXNlbnRlcl9zbGlkZXM6IG1hcC5nZXRQcmVzZW50ZXIoKS5nZXRTbGlkZUNvdW50KCksXHJcbiAgICAgICAgICAgIGFjdGl2aXR5X3NsaWRlczogbWFwLmdldFByZXNlbnRlcigpLmdldEFjdGl2aXR5U2xpZGVDb3VudCgpLFxyXG4gICAgICAgICAgICBjaGFuZ2VfdHlwZTogY2hhbmdlTGlzdC5qb2luKCc7JyksXHJcbiAgICAgICAgICAgIGNoYW5nZV9kZXNjcmlwdGlvbjogZGVzY3JpcHRpb25MaXN0LmpvaW4oJzsgJyksXHJcbiAgICAgICAgICAgIHRodW1ibmFpbF9wbmc6IG1hcC5nZXRQcmVzZW50ZXIoKS5nZXRNYXBUaHVtYm5haWwoKSxcclxuICAgICAgICAgICAgY2hhbmdlZF9ieTogTWV0YU1hcC5Vc2VyLnVzZXJLZXlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciB1cmwgPSAkc2NvcGUubWFwVXJsICsgJy5qc29uJztcclxuXHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZUVkaXRTdGF0dXMoJHNjb3BlLlNBVklORyk7XHJcblxyXG4gICAgICAgIGNoYW5nZVR5cGVzID0gW107XHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZUVkaXRTdGF0dXMoJHNjb3BlLlNBVkVfT0spO1xyXG4gICAgICAgIC8vIGxvYWQgcmV0dXJuZWQgZGF0YSBmb3IgYW5hbHl0aWNzLCBwb2ludHMsIGJhZGdlcywgdmVyc2lvbnNcclxuICAgICAgICAvLyAkc2NvcGUubWFwLmxvYWRNYXBFeHRyYURhdGEocmVzcG9uc2UuZGF0YS5tYXApO1xyXG4gICAgICAgIE1ldGFNYXAuTWV0YUZpcmUuc2V0RGF0YUluVHJhbnNhY3Rpb24ocG9zdERhdGEsIGBtYXBzL2RhdGEvJHskc2NvcGUubWFwSWR9YCk7XHJcbiAgICB9XHJcblxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0gaGFuZGxlIG1vZGVsIGNoYW5nZXMgLSB0cmlnZ2VyIGF1dG9zYXZlIC0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHZhciBjaGFuZ2VEZXNjcmlwdGlvbnMgPSB7XHJcbiAgICAgICAgbW92ZTogJ01vdmVkIE9iamVjdHMnLFxyXG4gICAgICAgIHVuZG9fcmVkbzogJ1BlcmZvcm1lZCBVbmRvL1JlZG8nLFxyXG4gICAgICAgIGVkaXRfdGl0bGU6ICdFZGl0ZWQgTWV0YU1hcCBUaXRsZScsXHJcbiAgICAgICAgZWRpdF9kZXNjcmlwdGlvbjogJ0VkaXRlZCBNZXRhTWFwIERlc2NyaXB0aW9uJyxcclxuICAgICAgICBlZGl0X3VzZXJ0YWdzOiAnRWRpdCBNZXRhTWFwIFRhZ3MnLFxyXG4gICAgICAgIGVkaXRfZDogJ0VkaXRlZCBEaXN0aW5jdGlvbnMnLFxyXG4gICAgICAgIGVkaXRfczogJ0VkaXRlZCBTeXN0ZW1zJyxcclxuICAgICAgICBlZGl0X3I6ICdFZGl0ZWQgUmVsYXRpb25zaGlwcycsXHJcbiAgICAgICAgZWRpdF9wOiAnRWRpdGVkIFBlcnNwZWN0aXZlcycsXHJcbiAgICAgICAgYWRkX3RoaW5nOiAnQWRkZWQgSWRlYXMnLFxyXG4gICAgICAgIHJlbmFtZV90aGluZzogJ1JlbmFtZWQgSWRlYXMnLFxyXG4gICAgICAgIGRlbGV0ZV90aGluZzogJ0RlbGV0ZWQgSWRlYXMnLFxyXG4gICAgICAgIGVkaXRfYXR0YWNobWVudHM6ICdFZGl0ZWQgQXR0YWNobWVudHMnLFxyXG4gICAgICAgIGVkaXRfcHJlc2VudGVyOiAnRWRpdGVkIFByZXNlbnRlciBTbGlkZXMnLFxyXG4gICAgICAgIGVkaXRfZ2VuZXJhdG9yOiAnSW5zZXJ0ZWQgSWRlYXMgZnJvbSBUaGlua1F1ZXJ5JyxcclxuICAgICAgICBlZGl0X3N0YW5kYXJkczogJ0VkaXRlZCBMaW5rcyB0byBDb21tb24gQ29yZSBTdGFuZGFyZHMnXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGUgaXMgYSBnby5DaGFuZ2VkRXZlbnRcclxuICAgIHRoaXMubW9kZWxDaGFuZ2VkID0gZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICBpZiAoIXNlbGYuc2F2ZU9uTW9kZWxDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBjaGFuZ2VUeXBlID0gbnVsbDtcclxuICAgICAgICB2YXIgY2hhbmdlRGVzY3JpcHRpb24gPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ3R5cGUnKSB7XHJcbiAgICAgICAgICAgIC8vIGNoYW5nZSBSIHR5cGVcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsbiwxLG8sMixBLDMsciw0LHIsNSxvLDYsdyw3LHNdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCx0LDEsb10gLCBwcm9wZXJ0eU5hbWU6IHR5cGVcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3InO1xyXG4gICAgICAgICAgICBjaGFuZ2VEZXNjcmlwdGlvbiA9ICdDaGFuZ2VkIFJlbGF0aW9uc2hpcCBUeXBlcyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnbGF5b3V0Jykge1xyXG4gICAgICAgICAgICAvLyBjaGFuZ2Ugc3lzdGVtIGxheW91dFxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCxsLDEsZSwyLGYsMyx0XSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsciwxLGksMixnLDMsaCw0LHRdICwgcHJvcGVydHlOYW1lOiBsYXlvdXQgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9zJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5JbnNlcnQgJiYgcHJvcGVydHlFcXVhbHMoZS5uZXdWYWx1ZSwgJ2Zyb21Qb3J0JywgJ1InKSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuSW5zZXJ0LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IDEsIG5ld1ZhbHVlOiBbdHlwZSxub0Fycm93cyxfX2dvaGFzaGlkLDYwMDUsZnJvbSwtMix0bywtNCxsYWJlbEtleXMsLGZyb21Qb3J0LFIsdG9Qb3J0LFBdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5XHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rVG9Qb3J0SWQsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLFBdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCxSXSAsIHByb3BlcnR5TmFtZTogdG9Qb3J0IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLmNoYW5nZSA9PSBnby5DaGFuZ2VkRXZlbnQuUmVtb3ZlICYmIHByb3BlcnR5RXF1YWxzKGUub2xkVmFsdWUsICdmcm9tUG9ydCcsICdSJykpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIGxpbmtcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlJlbW92ZSwgb2xkUGFyYW06IDEsIG9sZFZhbHVlOiBbdHlwZSxub0Fycm93cyxfX2dvaGFzaGlkLDYwMDUsZnJvbSwtMix0bywtNCxsYWJlbEtleXMsLGZyb21Qb3J0LFIsdG9Qb3J0LFJdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheSBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3InO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ2xpbmtEYXRhQXJyYXknKSB7XHJcbiAgICAgICAgICAgIC8vIGNoYW5nZSBQL0QgbGlua3NcclxuICAgICAgICAgICAgLy8gYWRkIFAgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuSW5zZXJ0LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IDIsIG5ld1ZhbHVlOiBbdHlwZSxub0Fycm93cyxfX2dvaGFzaGlkLDE5MTIyLGZyb20sLTIsdG8sLTQsbGFiZWxLZXlzLCxmcm9tUG9ydCxQLHRvUG9ydCxQXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheSBcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtDYXRlZ29yeSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLFBdICwgcHJvcGVydHlOYW1lOiBjYXRlZ29yeSBcclxuICAgICAgICAgICAgLy8gZGVsZXRlIFAgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogMiwgb2xkVmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsMTkxMjIsZnJvbSwtMix0bywtNCxsYWJlbEtleXMsLGZyb21Qb3J0LFAsdG9Qb3J0LFAsY2F0ZWdvcnksUF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyBhZGQgRCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogMSwgbmV3VmFsdWU6IFtmcm9tLC03LHRvLC01LGZyb21Qb3J0LEQsdG9Qb3J0LEQsY2F0ZWdvcnksRCxfX2dvaGFzaGlkLDE5NTIyXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheSBcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIEQgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogMSwgb2xkVmFsdWU6IFtmcm9tLC03LHRvLC01LGZyb21Qb3J0LEQsdG9Qb3J0LEQsY2F0ZWdvcnksRCxfX2dvaGFzaGlkLDE5NTIyXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXkgXHJcblxyXG4gICAgICAgICAgICBpZiAoKGUubmV3VmFsdWUgJiYgZS5uZXdWYWx1ZS5jYXRlZ29yeSA9PSAnUCcpIHx8XHJcbiAgICAgICAgICAgICAgICAoZS5vbGRWYWx1ZSAmJiBlLm9sZFZhbHVlLmNhdGVnb3J5ID09ICdQJykpIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9wJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgoZS5uZXdWYWx1ZSAmJiBlLm5ld1ZhbHVlLmNhdGVnb3J5ID09ICdEJykgfHxcclxuICAgICAgICAgICAgICAgIChlLm9sZFZhbHVlICYmIGUub2xkVmFsdWUuY2F0ZWdvcnkgPT0gJ0QnKSkge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X2QnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnY2F0ZWdvcnknKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBQIGxpbmtcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbGlua0NhdGVnb3J5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsUF0gLCBwcm9wZXJ0eU5hbWU6IGNhdGVnb3J5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcCc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnZ3JvdXAnKSB7XHJcbiAgICAgICAgICAgIC8vIGRyYWcgaW50byBTXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlZCwgbW9kZWxDaGFuZ2U6IG5vZGVHcm91cEtleSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBncm91cCBcclxuICAgICAgICAgICAgLy8gcmVvcmRlciBwYXJ0XHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlZCwgbW9kZWxDaGFuZ2U6IG5vZGVHcm91cEtleSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBncm91cCBcclxuICAgICAgICAgICAgLy8gZHJhZyB0byBEXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlZCwgbW9kZWxDaGFuZ2U6IG5vZGVHcm91cEtleSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBncm91cCBcclxuXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9zJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdub2RlRGF0YUFycmF5JyAmJiBlLmNoYW5nZSA9PSBnby5DaGFuZ2VkRXZlbnQuSW5zZXJ0ICYmIHByb3BlcnR5RXF1YWxzKGUubmV3VmFsdWUsICdpc0dyb3VwJywgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgLy8gYWRkIHRoaW5nXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBub2RlRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogNSwgbmV3VmFsdWU6IFt0ZXh0LE5ldyBJZGVhLGlzR3JvdXAsdHJ1ZSxsZXZlbCwwLGxheW91dCxsZWZ0LHNFeHBhbmRlZCx0cnVlLHBFeHBhbmRlZCxmYWxzZSxkRXhwYW5kZWQsZmFsc2UsX19nb2hhc2hpZCw1NDY4OCxncm91cCwsa2V5LC03XSAsIHByb3BlcnR5TmFtZTogbm9kZURhdGFBcnJheSBcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDIsMSwyLDIsOCwzLC4sNCw1LDUsNiw2LDIsNyw1LDgsICw5LC0sMTAsMSwxMSw0LDEyLDksMTMsLiwxNCw2LDE1LDgsMTYsNywxNyw1XSAsIHByb3BlcnR5TmFtZTogbG9jIFxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGNoaWxkcmVuIFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2FkZF90aGluZyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAndGV4dCcpIHtcclxuICAgICAgICAgICAgLy8gbW92ZSB0aGluZ1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCxiLDEsYiwyLGIsMyxiLDQsYl0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLGEsMSxhLDIsYSwzLGEsNCxhXSAsIHByb3BlcnR5TmFtZTogdGV4dCBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdyZW5hbWVfdGhpbmcnO1xyXG4gICAgICAgICAgICBjaGFuZ2VEZXNjcmlwdGlvbiA9ICdSZW5hbWVkIElkZWFzJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdub2RlRGF0YUFycmF5JyAmJiBlLmNoYW5nZSA9PSBnby5DaGFuZ2VkRXZlbnQuUmVtb3ZlICYmIHByb3BlcnR5RXF1YWxzKGUub2xkVmFsdWUsICdpc0dyb3VwJywgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoaW5nXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBub2RlRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiA1LCBvbGRWYWx1ZTogW3RleHQsTmV3IElkZWEsaXNHcm91cCx0cnVlLGxldmVsLDAsbGF5b3V0LGxlZnQsc0V4cGFuZGVkLHRydWUscEV4cGFuZGVkLGZhbHNlLGRFeHBhbmRlZCxmYWxzZSxfX2dvaGFzaGlkLDU0Njg4LGdyb3VwLCxrZXksLTcsbG9jLDIyOC41NjI1IC0xNDkuNjg3NSxjaGlsZHJlbiwwLGF0dGFjaG1lbnRzLF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBub2RlRGF0YUFycmF5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2RlbGV0ZV90aGluZyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnbm9kZURhdGFBcnJheScgJiYgZS5jaGFuZ2UgPT0gZ28uQ2hhbmdlZEV2ZW50Lkluc2VydCAmJiBwcm9wZXJ0eUVxdWFscyhlLm5ld1ZhbHVlLCAnaXNHcm91cCcsIGZhbHNlKSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgc2xpZGVcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiA1LCBuZXdWYWx1ZTogW2tleSxzbGlkZS0wLGNhdGVnb3J5LHNsaWRlLGluZGV4LDAsaXNHcm91cCxmYWxzZSx3aWR0aCwyMDAsaGVpZ2h0LDIwMCxsb2MsMTU2LjU2MjUgLTk3LjY4NzUsbGV2ZWwsMCxjaGlsZHJlbiwwLHRpdGxlLCxub3RlcywsX19nb2hhc2hpZCw2Mzg3N10gLCBwcm9wZXJ0eU5hbWU6IG5vZGVEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9wcmVzZW50ZXInO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ25vZGVEYXRhQXJyYXknICYmIGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5SZW1vdmUgJiYgcHJvcGVydHlFcXVhbHMoZS5vbGRWYWx1ZSwgJ2lzR3JvdXAnLCBmYWxzZSkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHNsaWRlXHJcbiAgICAgICAgICAgIC8vbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlJlbW92ZSwgb2xkUGFyYW06IDUsIG9sZFZhbHVlOiBba2V5LHNsaWRlLTAsY2F0ZWdvcnksc2xpZGUsaW5kZXgsMCxpc0dyb3VwLGZhbHNlLHdpZHRoLDIwMCxoZWlnaHQsMjAwLGxvYywxNTYuNTYyNSAtOTcuNjg3NSxsZXZlbCwwLGNoaWxkcmVuLDAsdGl0bGUsLG5vdGVzLCxfX2dvaGFzaGlkLDYzODc3LCQkaGFzaEtleSwwWE5dICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogbm9kZURhdGFBcnJheSBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3ByZXNlbnRlcic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnbG9jJyB8fCBlLnByb3BlcnR5TmFtZSA9PSAnd2lkdGgnIHx8IGUucHJvcGVydHlOYW1lID09ICdoZWlnaHQnKSB7XHJcbiAgICAgICAgICAgIC8vIG1vdmUgdGhpbmcgb3IgcmVzaXplIHNsaWRlXHJcbiAgICAgICAgICAgIC8vIG1vdmUgc2xpZGVcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsMiwxLDQsMiwzLDMsICw0LC0sNSwxLDYsMiw3LDhdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCwyLDEsNCwyLDMsMywgLDQsLSw1LDEsNiwyLDcsN10gLCBwcm9wZXJ0eU5hbWU6IGxvYyBcclxuICAgICAgICAgICAgLy8gcmVzaXplIHNsaWRlXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogaGVpZ2h0IFxyXG4gICAgICAgICAgICAvLyBtb3ZlIHRoaW5nXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLDQsMSw3LDIsOSwzLC4sNCw4LDUsNyw2LDUsNywgLDgsLSw5LDEsMTAsMiwxMSwyLDEyLC4sMTMsOCwxNCw3LDE1LDVdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCw1LDEsNCwyLDAsMywuLDQsMyw1LDEsNiwyLDcsNSw4LCAsOSwtLDEwLDEsMTEsMiwxMiwxLDEzLC4sMTQsMSwxNSw4LDE2LDcsMTcsNV0gLCAgICAgICAgICAgICBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdtb3ZlJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdsZXZlbCcgfHwgZS5wcm9wZXJ0eU5hbWUgPT0gJ2NoaWxkcmVuJykge1xyXG4gICAgICAgICAgICAvLyB0aGVzZSBhdHRyaWJ1dGVzIGFyZSB1cGRhdGVkIGFzIGEgcmVzdWx0IG9mIG90aGVyIGFjdGlvbnM7IGlnbm9yZVxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gbnVsbDtcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdhdHRhY2htZW50cycpIHtcclxuICAgICAgICAgICAgLy8gZWRpdGVkIGF0dGFjaG1lbnRzXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9hdHRhY2htZW50cyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnc0V4cGFuZGVkJyB8fCBlLnByb3BlcnR5TmFtZSA9PSAncEV4cGFuZGVkJykge1xyXG4gICAgICAgICAgICAvLyBpZ25vcmUgZXhwYW5kL2NvbGxhcHNlXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnbW92ZSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnRmluaXNoZWRVbmRvJyB8fCBlLnByb3BlcnR5TmFtZSA9PSAnRmluaXNoZWRSZWRvJykge1xyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ3VuZG9fcmVkbyc7XHJcbiAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLmNoYW5nZSAhPSBnby5DaGFuZ2VkRXZlbnQuVHJhbnNhY3Rpb24pIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogJyArIGUubW9kZWxDaGFuZ2UgK1xyXG4gICAgICAgICAgICAvLyAgICAnLCBjaGFuZ2U6ICcgKyBlLmNoYW5nZSArXHJcbiAgICAgICAgICAgIC8vICAgICcsIG9sZFBhcmFtOiAnICsgZS5vbGRQYXJhbSArXHJcbiAgICAgICAgICAgIC8vICAgICcsIG9sZFZhbHVlOiBbJyArIF8ucGFpcnMoZS5vbGRWYWx1ZSkgKyAnXSAnICtcclxuICAgICAgICAgICAgLy8gICAgJywgbmV3UGFyYW06ICcgKyBlLm5ld1BhcmFtICtcclxuICAgICAgICAgICAgLy8gICAgJywgbmV3VmFsdWU6IFsnICsgXy5wYWlycyhlLm5ld1ZhbHVlKSArICddICcgK1xyXG4gICAgICAgICAgICAvLyAgICAnLCBwcm9wZXJ0eU5hbWU6ICcgKyBlLnByb3BlcnR5TmFtZVxyXG4gICAgICAgICAgICAvLyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlVHlwZSkge1xyXG4gICAgICAgICAgICBtYXAuZ2V0QW5hbHl0aWNzKCkudXBkYXRlQ29udGV4dHVhbEFuYWx5dGljcygpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjYWxsaW5nIGRlbGF5ZWRBdXRvc2F2ZSwgY2hhbmdlVHlwZTogJyArIGNoYW5nZVR5cGUpO1xyXG4gICAgICAgICAgICBzZWxmLnNhdmUoY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjb252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgcHJvcGVydGllc1xyXG4gICAgZnVuY3Rpb24gcHJvcGVydHlFcXVhbHMob2JqLCBrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiBfLmhhcyhvYmosIGtleSkgJiYgXy5yZXN1bHQob2JqLCBrZXkpID09IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuXHJcbn07IiwiLy8gbWFpbiBjb250cm9sbGVyIGNsYXNzXHJcblxyXG53aW5kb3cuU2FuZGJhbmtFZGl0b3IgPSB7fTtcclxuXHJcbndpbmRvdy5NYXBFZGl0b3JDdHJsID0gZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkdGltZW91dCwgJG1vZGFsLCAkbG9nKSB7XHJcblxyXG4gICAgJHNjb3BlLm1hcCA9IG5ldyBTYW5kYmFua0VkaXRvci5NYXAoJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkdGltZW91dCwgJG1vZGFsLCAkbG9nKTtcclxuXHJcbiAgICAvLyB3aW5kb3cubWFwRGF0YSBpcyBzZXQgaW4gX2Zvcm0gdmlld1xyXG4gICAgdmFyIG1ldGFkYXRhID0gJHNjb3BlLm1hcERhdGEubWV0YWRhdGE7XHJcbiAgICAkc2NvcGUuc2FuZGJveCA9IG1ldGFkYXRhLnNhbmRib3g7XHJcbiAgICAvLyRzY29wZS5tYXBEYXRhID0gd2luZG93Lm1hcERhdGEubWFwLmRhdGE7IC8vIHRoaXMgZ2V0cyBvdmVyd3JpdHRlbiBieSBsb2FkKCkgdW5sZXNzIHdlIGFyZSBpbiB0aGUgc2FuZGJveCB3aXRoIG5vIG1hcCBJRFxyXG4gICAgLy8kc2NvcGUubWFwSWQgPSBtZXRhZGF0YS5pZDtcclxuICAgICRzY29wZS5tYXBUaXRsZSA9IG1ldGFkYXRhLm5hbWU7XHJcbiAgICAkc2NvcGUubWFwVXNlclRhZ3MgPSBtZXRhZGF0YS51c2VyVGFncztcclxuICAgICRzY29wZS5tYXBVcmwgPSBtZXRhZGF0YS51cmw7XHJcbiAgICAkc2NvcGUuY2FuRWRpdCA9IG1ldGFkYXRhLmNhbkVkaXQ7XHJcbiAgICAkc2NvcGUudXBkYXRlZEF0ID0gbWV0YWRhdGEudXBkYXRlZEF0O1xyXG4gICAgJHNjb3BlLnVwZGF0ZWRCeSA9IG1ldGFkYXRhLnVwZGF0ZWRCeTsgLy8gSURcclxuICAgICRzY29wZS51cGRhdGVkQnlOYW1lID0gbWV0YWRhdGEudXBkYXRlZEJ5TmFtZTtcclxuXHJcbiAgICAkc2NvcGUuZWRpdGluZ1RpdGxlID0gZmFsc2U7XHJcblxyXG4gICAgJHNjb3BlLnNob3dJbWFnZUV4cG9ydCA9IGZhbHNlO1xyXG4gICAgJHNjb3BlLmltYWdlRXhwb3J0TG9hZGluZyA9IHRydWU7XHJcblxyXG4gICAgJHNjb3BlLmN1cnJlbnRUYWIgPSBudWxsO1xyXG5cclxuICAgIC8vIG92ZXJyaWRlIHBhcmVudCBzY29wZSAoc2VlIHVzZXIuanMpIHNpbmNlIHdlJ3JlIGVkaXRpbmcgYSBtYXBcclxuICAgICRzY29wZS5jY3NUYWdnaW5nLm1hcElkID0gJHNjb3BlLm1hcElkO1xyXG5cclxuICAgICRzY29wZS5tYXliZVN0YXJ0RWRpdGluZ1RpdGxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgICRzY29wZS5lZGl0aW5nVGl0bGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmRvbmVFZGl0aW5nVGl0bGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdkb25lRWRpdGluZ1RpdGxlJyk7XHJcbiAgICAgICAgJHNjb3BlLmVkaXRpbmdUaXRsZSA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5tYXAuZ2V0QXV0b3NhdmUoKS5zYXZlKCdlZGl0X3RpdGxlJyk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5lZGl0aW5nVGl0bGVLZXlwcmVzcyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS53aGljaCA9PSAxMykge1xyXG4gICAgICAgICAgICAkc2NvcGUuZG9uZUVkaXRpbmdUaXRsZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnByaW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgd2luZG93LnByaW50KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBzYXZlIHNhbmRib3ggbWFwIChzaWduIHVwL3NpZ24gaW4pIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5zYXZlU2FuZGJveE1hcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlX3NhbmRib3hfc2F2ZV9tb2RhbC5odG1sJywgLy8gc2VlIHZpZXdzL3VzZXJzL190ZW1wbGF0ZV9zYW5kYm94X3NhdmVfbW9kYWxcclxuICAgICAgICAgICAgYmFja2Ryb3A6ICdzdGF0aWMnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBzYW5kYm94U2F2ZU1vZGFsQ3RybCxcclxuICAgICAgICAgICAgd2luZG93Q2xhc3M6ICdzYW5kYm94LXNhdmUtbW9kYWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICBvdXRlclNjb3BlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1hcDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5tYXA7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXNlclByb2ZpbGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbigpIHt9KTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHNhbmRib3hTYXZlTW9kYWxDdHJsID0gZnVuY3Rpb24oJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSwgb3V0ZXJTY29wZSwgbWFwLCB1c2VyUHJvZmlsZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUubWFwID0gbWFwO1xyXG4gICAgICAgICRzY29wZS51c2VyUHJvZmlsZSA9IHVzZXJQcm9maWxlO1xyXG5cclxuICAgICAgICAkc2NvcGUubWFwRGF0YSA9IG1hcC5nZXREaWFncmFtKCkubW9kZWwudG9Kc29uKCk7XHJcbiAgICAgICAgJHNjb3BlLnRodW1ibmFpbFBuZyA9IG1hcC5nZXRQcmVzZW50ZXIoKS5nZXRNYXBUaHVtYm5haWwoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RGVmYXVsdExvZ2luRGF0YSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGVtYWlsOiAnJyxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAnJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdGhpcyBzdHJ1Y3R1cmUgaXMgdXNlZCB0byBzdG9yZSB0aGUgZm9ybSBkYXRhLCBhcyB3ZWxsIGFzIHRoZSB2YWxpZGF0aW9uIGVycm9ycyByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXIuLi5cclxuICAgICAgICBmdW5jdGlvbiBnZXREZWZhdWx0U2lnbnVwRGF0YSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGVtYWlsOiAnJyxcclxuICAgICAgICAgICAgICAgIGZpcnN0X25hbWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdF9uYW1lOiAnJyxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAnJyxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbjogJydcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRzY29wZS5sb2dpbkRhdGEgPSBnZXREZWZhdWx0TG9naW5EYXRhKCk7XHJcbiAgICAgICAgJHNjb3BlLmxvZ2luRXJyb3IgPSAnJztcclxuXHJcbiAgICAgICAgJHNjb3BlLnNpZ251cERhdGEgPSBnZXREZWZhdWx0U2lnbnVwRGF0YSgpO1xyXG4gICAgICAgICRzY29wZS5zaWdudXBFcnJvcnMgPSBnZXREZWZhdWx0U2lnbnVwRGF0YSgpO1xyXG5cclxuICAgICAgICAkc2NvcGUuZG9Mb2dpbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUubG9naW5FcnJvcnMgPSBnZXREZWZhdWx0TG9naW5EYXRhKCk7IC8vIHJlc2V0IGVycm9yc1xyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvc2lnbl9pbi5qc29uJywge1xyXG4gICAgICAgICAgICAgICAgdXNlcjogJHNjb3BlLmxvZ2luRGF0YVxyXG4gICAgICAgICAgICB9KS50aGVuKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIGlzIHtpZDpYWCwgLi4ufVxyXG4gICAgICAgICAgICAgICAgICAgIG91dGVyU2NvcGUuc2V0VXNlcklkKHJlc3BvbnNlLmRhdGEuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dGVyU2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUgPSBvdXRlclNjb3BlLnVzZXJQcm9maWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YSBpcyB7XCJlcnJvclwiOiBcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmRcIn1cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9naW5FcnJvciA9IHJlc3BvbnNlLmRhdGEuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZG9TaWdudXAgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNpZ251cEVycm9ycyA9IGdldERlZmF1bHRTaWdudXBEYXRhKCk7IC8vIHJlc2V0IGVycm9yc1xyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvdXNlcnMuanNvbicsIHtcclxuICAgICAgICAgICAgICAgIHVzZXI6ICRzY29wZS5zaWdudXBEYXRhXHJcbiAgICAgICAgICAgIH0pLnRoZW4oXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRhdGEgaXMgbmV3IHVzZXIgSURcclxuICAgICAgICAgICAgICAgICAgICBvdXRlclNjb3BlLnNldFVzZXJJZChyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRlclNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJQcm9maWxlID0gb3V0ZXJTY29wZS51c2VyUHJvZmlsZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRhdGEgaXMgZS5nLiB7XCJmaXJzdF9uYW1lXCI6W1wiY2FuJ3QgYmUgYmxhbmtcIl0sIC4uLn1cclxuICAgICAgICAgICAgICAgICAgICBfLmVhY2goXy5rZXlzKHJlc3BvbnNlLmRhdGEpLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNpZ251cEVycm9yc1trZXldID0gcmVzcG9uc2UuZGF0YVtrZXldLmpvaW4oJzsgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIHNhbmRib3hTYXZlTW9kYWxDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsICdvdXRlclNjb3BlJywgJ21hcCcsICd1c2VyUHJvZmlsZSddO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0gZWRpdCBzdGF0dXMgbWVzc2FnZSBmb3IgaGVhZGVyIGJhciAtLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuZWRpdFN0YXR1cyA9ICcnO1xyXG5cclxuICAgICRzY29wZS5MQVNUX1VQREFURUQgPSAnJztcclxuICAgICRzY29wZS5SRUFEX09OTFkgPSAnVmlldyBvbmx5JztcclxuICAgICRzY29wZS5TQVZJTkcgPSAnU2F2aW5nLi4uJztcclxuICAgICRzY29wZS5TQVZFX09LID0gJ0FsbCBjaGFuZ2VzIHNhdmVkJztcclxuICAgICRzY29wZS5TQVZFX0ZBSUxFRCA9ICdDaGFuZ2VzIGNvdWxkIG5vdCBiZSBzYXZlZCc7XHJcblxyXG4gICAgJHNjb3BlLnVwZGF0ZUVkaXRTdGF0dXMgPSBmdW5jdGlvbihzKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygndXBkYXRlRWRpdFN0YXR1czogJyArIHMpO1xyXG4gICAgICAgICRzY29wZS5lZGl0U3RhdHVzID0gcztcclxuICAgICAgICBpZiAocyA9PSAkc2NvcGUuU0FWRV9GQUlMRUQpIHtcclxuICAgICAgICAgICAgYWxlcnQoJ0NoYW5nZXMgY291bGQgbm90IGJlIHNhdmVkIC0gcGxlYXNlIGNoZWNrIHlvdXIgbmV0d29yayBjb25uZWN0aW9uLicpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocyA9PSAkc2NvcGUuTEFTVF9VUERBVEVEKSB7XHJcbiAgICAgICAgICAgIHZhciB0aW1lID0gbW9tZW50KCRzY29wZS51cGRhdGVkQXQpLmZyb21Ob3coKTtcclxuICAgICAgICAgICAgdmFyIGJ5ID0gJyc7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUudXBkYXRlZEJ5ID09ICRzY29wZS51c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIGJ5ID0gJ2J5IG1lJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUudXBkYXRlZEJ5TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgYnkgPSAnYnkgJyArICRzY29wZS51cGRhdGVkQnlOYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHNob3cgJ2J5IG1lJyBvbmx5IGZvciBlZGl0YWJsZSBzaGFyZWQgbWFwcz9cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5lZGl0U3RhdHVzID0gJ0xhc3QgdXBkYXRlZCAnICsgdGltZSArICcgJyArIGJ5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTGFzdCBlZGl0IHdhcyBYWCBhZ28gYnkgWVlcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5tYXAuaW5pdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCEkc2NvcGUuc2FuZGJveCkge1xyXG4gICAgICAgICAgICAgICAgLy8gb3ZlcnZpZXcgZGlhZ3JhbVxyXG4gICAgICAgICAgICAgICAgdmFyIG92ZXJ2aWV3ID0gZ28uR3JhcGhPYmplY3QubWFrZShnby5PdmVydmlldywgXCJvdmVydmlldy1kaWFncmFtXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlZDogJHNjb3BlLm1hcC5nZXREaWFncmFtKCksXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEFsaWdubWVudDogZ28uU3BvdC5DZW50ZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIG91dGxpbmUgPSBvdmVydmlldy5ib3guZWxlbWVudHMuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIG91dGxpbmUuc3Ryb2tlID0gXCIjMzMzXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vaWYgKCRzY29wZS5tYXBVcmwpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5tYXAubG9hZCgpO1xyXG4gICAgICAgICAgICAvL30gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICAgICRzY29wZS5tYXAubG9hZEZvclNhbmRib3goKTtcclxuICAgICAgICAgICAgLy99XHJcblxyXG4gICAgICAgICAgICBhZGRCZWhhdmlvcnMoKTtcclxuICAgICAgICAgICAgaGFuZGxlTmF2aWdhdGlvbigpO1xyXG4gICAgICAgICAgICBoYW5kbGVCYWNrc3BhY2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBtaXNjLiBVSSBiZWhhdmlvcnMgZm9yIHRvb2x0aXBzLCBwb3B1cHMgZXRjLlxyXG4gICAgLy8gVE9ETzogZmlndXJlIG91dCB3aGljaCBvZiB0aGVzZSBuZWVkIHRvIGJlIHJlYXBwbGllZCBhZnRlciBkeW5hbWljIGRhdGEgY2hhbmdlcyAoZS5nLiBMZXNzb25Cb29rIHBvcG92ZXJzKVxyXG4gICAgZnVuY3Rpb24gYWRkQmVoYXZpb3JzKCkge1xyXG5cclxuICAgICAgICAvLyBOT1RFOiB3ZSBoYXZlIHRvIHVzZSByZWd1bGFyIGJvb3RzdHJhcCB0b29sdGlwcyBmb3IgdG9vbGJhciBidXR0b25zIChpbnN0ZWFkIG9mIG5nLWJvb3RzdHJhcCBvbmVzKVxyXG4gICAgICAgIC8vIHNvIHdlIGNhbiB0dXJuIHRoZW0gb2ZmIGZvciBtb2JpbGUuIFdlIGFsc28gcHV0IHRoZSB0b29sdGlwcyBvbiB3cmFwcGVycyByYXRoZXIgdGhhbiBvbiB0aGUgYWN0dWFsIFxyXG4gICAgICAgIC8vIGJ1dHRvbnMsIHNvIHdlIGNhbiBhdm9pZCB0aGUgaXNzdWUgb2Ygc3R1Y2sgdG9vbHRpcHMgaWYgYSBidXR0b24gZ2V0cyBkaXNhYmxlZCB3aGlsZSB0aGUgdG9vbHRpcCBpcyBzaG93aW5nLlxyXG5cclxuICAgICAgICBpZiAoISRzY29wZS5pc1RvdWNoRGV2aWNlKCkpIHtcclxuICAgICAgICAgICAgLy8gJCgnLnRvb2x0aXAtd3JhcHBlcicpLnRvb2x0aXAoe1xyXG4gICAgICAgICAgICAvLyAgICAgcGxhY2VtZW50OiAndG9wJyxcclxuICAgICAgICAgICAgLy8gICAgIGNvbnRhaW5lcjogJ2JvZHknXHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gJCgnLmRyb3Bkb3duLW1lbnUgLmJ0bicpLnRvb2x0aXAoe1xyXG4gICAgICAgICAgICAvLyAgICAgcGxhY2VtZW50OiAnbGVmdCcsXHJcbiAgICAgICAgICAgIC8vICAgICBjb250YWluZXI6ICdib2R5J1xyXG4gICAgICAgICAgICAvLyB9KTsgLy8gZm9yIGxheW91dCBvcHRpb25zXHJcblxyXG4gICAgICAgICAgICAkKCdoZWFkZXIsICNtYXAtdGl0bGUnKS5ob3ZlcihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHkucHJlc2VudGVyLXBsYXlpbmcnKS5hZGRDbGFzcygnaGlkZS1oZWFkZXInKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCdib2R5LnByZXNlbnRlci1wbGF5aW5nJykucmVtb3ZlQ2xhc3MoJ2hpZGUtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGhhbmRsZU5hdmlnYXRpb24oKSB7XHJcbiAgICAgICAgLy8gY3Jvc3MtYnJvd3NlciB0d2Vha3M6XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gaHR0cDovL3d3dy5vcGVyYS5jb20vc3VwcG9ydC9rYi92aWV3LzgyNy9cclxuICAgICAgICAgICAgb3BlcmEuc2V0T3ZlcnJpZGVIaXN0b3J5TmF2aWdhdGlvbk1vZGUoJ2NvbXBhdGlibGUnKTtcclxuICAgICAgICAgICAgaGlzdG9yeS5uYXZpZ2F0aW9uTW9kZSA9ICdjb21wYXRpYmxlJztcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIG5vIGJpZ2dpZS5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGluc3RhbGwgYmVmb3JlLXVubG9hZCBoYW5kbGVyOlxyXG5cclxuICAgICAgICBmdW5jdGlvbiBleGl0TWVzc2FnZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiTmF2aWdhdGluZyBhd2F5IGZyb20geW91ciBNYXAgd2lsbCBjYXVzZSBhbnkgdW5zYXZlZCBjaGFuZ2VzIHRvIGJlIGxvc3QgXCIgK1xyXG4gICAgICAgICAgICAgICAgXCIoYW55IGNoYW5nZXMgeW91IG1ha2UgYXJlIGF1dG9tYXRpY2FsbHkgc2F2ZWQsIGJ1dCBpdCB0YWtlcyBhIGNvdXBsZSBvZiBzZWNvbmRzKS5cIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICAgICAgICAkKHdpbmRvdykuYmluZCgnYmVmb3JldW5sb2FkJywgZXhpdE1lc3NhZ2UpO1xyXG5cclxuICAgICAgICAvLyBwcmV2ZW50IGV4aXQgcHJvbXB0IHdoZW4gdGhlIHVzZXIgZGVsaWJlcmF0ZWx5IG5hdmlnYXRlcyBhd2F5OlxyXG5cclxuICAgICAgICAkKCcjaGVhZGVyLXJpZ2h0IGEnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJCh3aW5kb3cpLnVuYmluZCgnYmVmb3JldW5sb2FkJywgZXhpdE1lc3NhZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGhhbmRsZUJhY2tzcGFjZSgpIHtcclxuICAgICAgICB2YXIgQkFDS1NQQUNFID0gODtcclxuXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2tleWRvd24nLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gQkFDS1NQQUNFKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISQoJ2JvZHkgOmZvY3VzJykuaXMoJzppbnB1dCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJldmVudCBhY2NpZGVudGFsIGJhY2tzcGFjZSB3aGVuIG5vIGlucHV0IGhhcyBmb2N1czpcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpO1xyXG5cclxuICAgIHJldHVybiAkc2NvcGU7XHJcbn07XHJcblxyXG53aW5kb3cuTWFwRWRpdG9yQ3RybC4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckaHR0cCcsICckcmVzb3VyY2UnLCAnJHRpbWVvdXQnLCAnJG1vZGFsJywgJyRsb2cnXTsiLCJ3aW5kb3cuU2FuZGJhbmtFZGl0b3JPcHRpb25zID0ge307XHJcblxyXG5TYW5kYmFua0VkaXRvck9wdGlvbnMgPSBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkcmVzb3VyY2UsICRtb2RhbCwgJGxvZykge1xyXG5cclxuICAgIHRoaXMub3Blbk1vZGFsID0gZnVuY3Rpb24ob3B0aW9ucywgb25TYXZlRGVmYXVsdHMsIG9uVXBkYXRlKSB7XHJcbiAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVfZWRpdG9yX29wdGlvbnNfbW9kYWwuaHRtbCcsIC8vIHNlZSB2aWV3cy9tYXBzL190ZW1wbGF0ZV9lZGl0b3Jfb3B0aW9uc19tb2RhbFxyXG4gICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IG9wdGlvbnNNb2RhbEN0cmwsXHJcbiAgICAgICAgICAgIHdpbmRvd0NsYXNzOiAnb3B0aW9ucy1tb2RhbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uU2F2ZURlZmF1bHRzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25TYXZlRGVmYXVsdHM7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25VcGRhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvblVwZGF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uKCkge30pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIGNvbnRyb2xsZXIgZm9yIG9wdGlvbnMgbW9kYWwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdmFyIG9wdGlvbnNNb2RhbEN0cmwgPSBmdW5jdGlvbigkc2NvcGUsICRtb2RhbEluc3RhbmNlLCBvcHRpb25zLCBvblNhdmVEZWZhdWx0cywgb25VcGRhdGUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLm9wdGlvbnMgPSBvcHRpb25zO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2V0RGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5vayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBvblVwZGF0ZSgkc2NvcGUub3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc2V0RGVmYXVsdHMudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG9uU2F2ZURlZmF1bHRzKCRzY29wZS5vcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgb3B0aW9uc01vZGFsQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnLCAnb3B0aW9ucycsICdvblNhdmVEZWZhdWx0cycsICdvblVwZGF0ZSddO1xyXG59OyIsIlwidXNlIHN0cmljdFwiO1xyXG4vKlxyXG4qICBDb3B5cmlnaHQgKEMpIDE5OTgtMjAxNSBieSBOb3J0aHdvb2RzIFNvZnR3YXJlIENvcnBvcmF0aW9uLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4qL1xyXG5cclxuLy8gQSBjdXN0b20gVG9vbCBmb3IgbW92aW5nIGEgbGFiZWwgb24gYSBOb2RlXHJcblxyXG4vKipcclxuKiBAY29uc3RydWN0b3JcclxuKiBAZXh0ZW5kcyBUb29sXHJcbiogQGNsYXNzXHJcbiogVGhpcyB0b29sIG9ubHkgd29ya3Mgd2hlbiB0aGUgTm9kZSBoYXMgYSBsYWJlbCAoYW55IEdyYXBoT2JqZWN0KSBtYXJrZWQgd2l0aFxyXG4qIHsgX2lzTm9kZUxhYmVsOiB0cnVlIH0gdGhhdCBpcyBwb3NpdGlvbmVkIGluIGEgU3BvdCBQYW5lbC5cclxuKiBJdCB3b3JrcyBieSBtb2RpZnlpbmcgdGhhdCBsYWJlbCdzIEdyYXBoT2JqZWN0LmFsaWdubWVudCBwcm9wZXJ0eSB0byBoYXZlIGFuXHJcbiogb2Zmc2V0IGZyb20gdGhlIGNlbnRlciBvZiB0aGUgcGFuZWwuXHJcbiovXHJcbmZ1bmN0aW9uIE5vZGVMYWJlbERyYWdnaW5nVG9vbCgpIHtcclxuICBnby5Ub29sLmNhbGwodGhpcyk7XHJcbiAgdGhpcy5uYW1lID0gXCJOb2RlTGFiZWxEcmFnZ2luZ1wiO1xyXG5cclxuICAvKiogQHR5cGUge0dyYXBoT2JqZWN0fSAqL1xyXG4gIHRoaXMubGFiZWwgPSBudWxsO1xyXG4gIC8qKiBAdHlwZSB7UG9pbnR9ICovXHJcbiAgdGhpcy5fb3JpZ2luYWxBbGlnbm1lbnQgPSBudWxsO1xyXG4gIC8qKiBAdHlwZSB7UG9pbnR9ICovXHJcbiAgdGhpcy5fb3JpZ2luYWxDZW50ZXIgPSBudWxsO1xyXG59XHJcbmdvLkRpYWdyYW0uaW5oZXJpdChOb2RlTGFiZWxEcmFnZ2luZ1Rvb2wsIGdvLlRvb2wpO1xyXG5cclxuLyoqXHJcbiogVGhpcyB0b29sIGNhbiBvbmx5IHN0YXJ0IGlmIHRoZSBtb3VzZSBoYXMgbW92ZWQgZW5vdWdoIHNvIHRoYXQgaXQgaXMgbm90IGEgY2xpY2ssXHJcbiogYW5kIGlmIHRoZSBtb3VzZSBkb3duIHBvaW50IGlzIG9uIGEgR3JhcGhPYmplY3QgXCJsYWJlbFwiIGluIGEgU3BvdCBQYW5lbCxcclxuKiBhcyBkZXRlcm1pbmVkIGJ5IGZpbmRMYWJlbCgpLlxyXG4qIEB0aGlzIHtOb2RlTGFiZWxEcmFnZ2luZ1Rvb2x9XHJcbiogQHJldHVybiB7Ym9vbGVhbn1cclxuKi9cclxuTm9kZUxhYmVsRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5jYW5TdGFydCA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICghZ28uVG9vbC5wcm90b3R5cGUuY2FuU3RhcnQuY2FsbCh0aGlzKSkgcmV0dXJuIGZhbHNlO1xyXG4gIHZhciBkaWFncmFtID0gdGhpcy5kaWFncmFtO1xyXG4gIGlmIChkaWFncmFtID09PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcbiAgLy8gcmVxdWlyZSBsZWZ0IGJ1dHRvbiAmIHRoYXQgaXQgaGFzIG1vdmVkIGZhciBlbm91Z2ggYXdheSBmcm9tIHRoZSBtb3VzZSBkb3duIHBvaW50LCBzbyBpdCBpc24ndCBhIGNsaWNrXHJcbiAgdmFyIGUgPSBkaWFncmFtLmxhc3RJbnB1dDtcclxuICBpZiAoIWUubGVmdCkgcmV0dXJuIGZhbHNlO1xyXG4gIGlmICghdGhpcy5pc0JleW9uZERyYWdTaXplKCkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgcmV0dXJuIHRoaXMuZmluZExhYmVsKCkgIT09IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4qIEZyb20gdGhlIEdyYXBoT2JqZWN0IGF0IHRoZSBtb3VzZSBwb2ludCwgc2VhcmNoIHVwIHRoZSB2aXN1YWwgdHJlZSB1bnRpbCB3ZSBnZXQgdG9cclxuKiBhbiBvYmplY3QgdGhhdCBoYXMgdGhlIFwiX2lzTm9kZUxhYmVsXCIgcHJvcGVydHkgc2V0IHRvIHRydWUsIHRoYXQgaXMgaW4gYSBTcG90IFBhbmVsLFxyXG4qIGFuZCB0aGF0IGlzIG5vdCB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGF0IFBhbmVsIChpLmUuIG5vdCB0aGUgbWFpbiBlbGVtZW50IG9mIHRoZSBwYW5lbCkuXHJcbiogQHRoaXMge05vZGVMYWJlbERyYWdnaW5nVG9vbH1cclxuKiBAcmV0dXJuIHtHcmFwaE9iamVjdH0gVGhpcyByZXR1cm5zIG51bGwgaWYgbm8gc3VjaCBsYWJlbCBpcyBhdCB0aGUgbW91c2UgZG93biBwb2ludC5cclxuKi9cclxuTm9kZUxhYmVsRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5maW5kTGFiZWwgPSBmdW5jdGlvbigpIHtcclxuICB2YXIgZGlhZ3JhbSA9IHRoaXMuZGlhZ3JhbTtcclxuICB2YXIgZSA9IGRpYWdyYW0uZmlyc3RJbnB1dDtcclxuICB2YXIgZWx0ID0gZGlhZ3JhbS5maW5kT2JqZWN0QXQoZS5kb2N1bWVudFBvaW50LCBudWxsLCBudWxsKTtcclxuXHJcbiAgaWYgKGVsdCA9PT0gbnVsbCB8fCAhKGVsdC5wYXJ0IGluc3RhbmNlb2YgZ28uTm9kZSkpIHJldHVybiBudWxsO1xyXG4gIHdoaWxlIChlbHQucGFuZWwgIT09IG51bGwgJiYgZWx0LnBhbmVsLnR5cGUgPT09IGdvLlBhbmVsLlNwb3QgJiYgZWx0LnBhbmVsLmVsdCgwKSAhPT0gZWx0KSB7XHJcbiAgICBpZiAoZWx0Ll9pc05vZGVMYWJlbCkgcmV0dXJuIGVsdDtcclxuICAgIGVsdCA9IGVsdC5wYW5lbDtcclxuICB9XHJcbiAgcmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG4vKipcclxuKiBTdGFydCBhIHRyYW5zYWN0aW9uLCBjYWxsIGZpbmRMYWJlbCBhbmQgcmVtZW1iZXIgaXQgYXMgdGhlIFwibGFiZWxcIiBwcm9wZXJ0eSxcclxuKiBhbmQgcmVtZW1iZXIgdGhlIG9yaWdpbmFsIHZhbHVlIGZvciB0aGUgbGFiZWwncyBhbGlnbm1lbnQgcHJvcGVydHkuXHJcbiogQHRoaXMge05vZGVMYWJlbERyYWdnaW5nVG9vbH1cclxuKi9cclxuTm9kZUxhYmVsRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5kb0FjdGl2YXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy5zdGFydFRyYW5zYWN0aW9uKFwiU2hpZnRlZCBMYWJlbFwiKTtcclxuICB0aGlzLmxhYmVsID0gdGhpcy5maW5kTGFiZWwoKTtcclxuICBpZiAodGhpcy5sYWJlbCAhPT0gbnVsbCkge1xyXG4gICAgdGhpcy5fb3JpZ2luYWxBbGlnbm1lbnQgPSB0aGlzLmxhYmVsLmFsaWdubWVudC5jb3B5KCk7XHJcbiAgICB2YXIgbWFpbiA9IHRoaXMubGFiZWwucGFuZWwuZmluZE1haW5FbGVtZW50KCk7XHJcbiAgICB0aGlzLl9vcmlnaW5hbENlbnRlciA9IG1haW4uZ2V0RG9jdW1lbnRQb2ludChnby5TcG90LkNlbnRlcik7XHJcbiAgfVxyXG4gIGdvLlRvb2wucHJvdG90eXBlLmRvQWN0aXZhdGUuY2FsbCh0aGlzKTtcclxufVxyXG5cclxuLyoqXHJcbiogU3RvcCBhbnkgb25nb2luZyB0cmFuc2FjdGlvbi5cclxuKiBAdGhpcyB7Tm9kZUxhYmVsRHJhZ2dpbmdUb29sfVxyXG4qL1xyXG5Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wucHJvdG90eXBlLmRvRGVhY3RpdmF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIGdvLlRvb2wucHJvdG90eXBlLmRvRGVhY3RpdmF0ZS5jYWxsKHRoaXMpO1xyXG4gIHRoaXMuc3RvcFRyYW5zYWN0aW9uKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4qIENsZWFyIGFueSByZWZlcmVuY2UgdG8gYSBsYWJlbCBlbGVtZW50LlxyXG4qIEB0aGlzIHtOb2RlTGFiZWxEcmFnZ2luZ1Rvb2x9XHJcbiovXHJcbk5vZGVMYWJlbERyYWdnaW5nVG9vbC5wcm90b3R5cGUuZG9TdG9wID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy5sYWJlbCA9IG51bGw7XHJcbiAgZ28uVG9vbC5wcm90b3R5cGUuZG9TdG9wLmNhbGwodGhpcyk7XHJcbn1cclxuXHJcbi8qKlxyXG4qIFJlc3RvcmUgdGhlIGxhYmVsJ3Mgb3JpZ2luYWwgdmFsdWUgZm9yIEdyYXBoT2JqZWN0LmFsaWdubWVudC5cclxuKiBAdGhpcyB7Tm9kZUxhYmVsRHJhZ2dpbmdUb29sfVxyXG4qL1xyXG5Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wucHJvdG90eXBlLmRvQ2FuY2VsID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKHRoaXMubGFiZWwgIT09IG51bGwpIHtcclxuICAgIHRoaXMubGFiZWwuYWxpZ25tZW50ID0gdGhpcy5fb3JpZ2luYWxBbGlnbm1lbnQ7XHJcbiAgfVxyXG4gIGdvLlRvb2wucHJvdG90eXBlLmRvQ2FuY2VsLmNhbGwodGhpcyk7XHJcbn1cclxuXHJcbi8qKlxyXG4qIER1cmluZyB0aGUgZHJhZywgY2FsbCB1cGRhdGVBbGlnbm1lbnQgaW4gb3JkZXIgdG8gc2V0IHRoZSBHcmFwaE9iamVjdC5hbGlnbm1lbnQgb2YgdGhlIGxhYmVsLlxyXG4qIEB0aGlzIHtOb2RlTGFiZWxEcmFnZ2luZ1Rvb2x9XHJcbiovXHJcbk5vZGVMYWJlbERyYWdnaW5nVG9vbC5wcm90b3R5cGUuZG9Nb3VzZU1vdmUgPSBmdW5jdGlvbigpIHtcclxuICBpZiAoIXRoaXMuaXNBY3RpdmUpIHJldHVybjtcclxuICB0aGlzLnVwZGF0ZUFsaWdubWVudCgpO1xyXG59XHJcblxyXG4vKipcclxuKiBBdCB0aGUgZW5kIG9mIHRoZSBkcmFnLCB1cGRhdGUgdGhlIGFsaWdubWVudCBvZiB0aGUgbGFiZWwgYW5kIGZpbmlzaCB0aGUgdG9vbCxcclxuKiBjb21wbGV0aW5nIGEgdHJhbnNhY3Rpb24uXHJcbiogQHRoaXMge05vZGVMYWJlbERyYWdnaW5nVG9vbH1cclxuKi9cclxuTm9kZUxhYmVsRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5kb01vdXNlVXAgPSBmdW5jdGlvbigpIHtcclxuICBpZiAoIXRoaXMuaXNBY3RpdmUpIHJldHVybjtcclxuICB0aGlzLnVwZGF0ZUFsaWdubWVudCgpO1xyXG4gIHRoaXMudHJhbnNhY3Rpb25SZXN1bHQgPSBcIlNoaWZ0ZWQgTGFiZWxcIjtcclxuICB0aGlzLnN0b3BUb29sKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4qIFNhdmUgdGhlIGxhYmVsJ3MgR3JhcGhPYmplY3QuYWxpZ25tZW50IGFzIGFuIGFic29sdXRlIG9mZnNldCBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIFNwb3QgUGFuZWxcclxuKiB0aGF0IHRoZSBsYWJlbCBpcyBpbi5cclxuKiBAdGhpcyB7Tm9kZUxhYmVsRHJhZ2dpbmdUb29sfVxyXG4qL1xyXG5Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wucHJvdG90eXBlLnVwZGF0ZUFsaWdubWVudCA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICh0aGlzLmxhYmVsID09PSBudWxsKSByZXR1cm47XHJcbiAgdmFyIGxhc3QgPSB0aGlzLmRpYWdyYW0ubGFzdElucHV0LmRvY3VtZW50UG9pbnQ7XHJcbiAgdmFyIGNudHIgPSB0aGlzLl9vcmlnaW5hbENlbnRlcjtcclxuICB0aGlzLmxhYmVsLmFsaWdubWVudCA9IG5ldyBnby5TcG90KDAuNSwgMC41LCBsYXN0LnggLSBjbnRyLngsIGxhc3QueSAtIGNudHIueSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTm9kZUxhYmVsRHJhZ2dpbmdUb29sOyIsIi8vIGZ1bmN0aW9ucyBmb3IgdGhlIGdlbmVyYXRvciAoYWthIFRoaW5rUXVlcnkpXHJcblxyXG52YXIgR2VuZXJhdG9yQ3RybCA9IGZ1bmN0aW9uICgkc2NvcGUpIHtcclxuXHJcbiAgICB2YXIgbWFwID0gJHNjb3BlLm1hcDtcclxuICAgIHZhciBkaWFncmFtID0gJHNjb3BlLm1hcC5nZXREaWFncmFtKCk7XHJcblxyXG4gICAgJHNjb3BlLmNvbmNlcHQxID0gJyc7XHJcbiAgICAkc2NvcGUuY29uY2VwdDIgPSAnJztcclxuXHJcbiAgICAkc2NvcGUuZWNob0NvbmNlcHQxID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS5jb25jZXB0MSB8fCAnLi4uJztcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmVjaG9Db25jZXB0MiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUuY29uY2VwdDIgfHwgJy4uLic7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zd2FwQ29uY2VwdHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdG1wID0gJHNjb3BlLmNvbmNlcHQxO1xyXG4gICAgICAgICRzY29wZS5jb25jZXB0MSA9ICRzY29wZS5jb25jZXB0MjtcclxuICAgICAgICAkc2NvcGUuY29uY2VwdDIgPSB0bXA7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUubWFwSXQgPSBmdW5jdGlvbihxdWVzdGlvbikge1xyXG4gICAgICAgIHN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIG1hcC5nZXRBdXRvc2F2ZSgpLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoJHNjb3BlLnNhbmRib3gpIHtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jbGVhcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBsb2NhdGlvbiBmb3IgaW5zZXJ0ZWQgc3R1ZmZcclxuICAgICAgICB2YXIgZGIgPSBtYXAuY29tcHV0ZU1hcEJvdW5kcygpO1xyXG4gICAgICAgIHZhciB4ID0gZGIueCArIGRiLndpZHRoICsgMjAwO1xyXG4gICAgICAgIHZhciB5ID0gZGIueTtcclxuICAgICAgICBpZiAoaXNOYU4oeCkgfHwgaXNOYU4oeSkpIHtcclxuICAgICAgICAgICAgeCA9IHkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd4LCB5OiAnICsgeCArICcsICcgKyB5KTtcclxuXHJcbiAgICAgICAgLy8gaW5zZXJ0IHRoZSBzdHVmZiBhbmQgZGVzZWxlY3QgaXRcclxuICAgICAgICBxdWVzdGlvbih4LHkpO1xyXG4gICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTsgXHJcblxyXG4gICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICBkaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWFwLmdldFVpKCkucmVzZXRab29tKCk7XHJcblxyXG4gICAgICAgIG1hcC5nZXRBdXRvc2F2ZSgpLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgbWFwLmdldEF1dG9zYXZlKCkuc2F2ZSgnZWRpdF9nZW5lcmF0b3InKTtcclxuICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc2VsZWN0ZWRRdWVzdGlvbiA9IG51bGw7XHJcblxyXG4gICAgJHNjb3BlLnNlbGVjdFF1ZXN0aW9uID0gZnVuY3Rpb24ocXVlc3Rpb24pIHtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRRdWVzdGlvbiA9IHF1ZXN0aW9uO1xyXG4gICAgICAgIGlmICgkc2NvcGUuc2FuZGJveCkge1xyXG4gICAgICAgICAgICAkc2NvcGUubWFwSXQocXVlc3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH07ICAgIFxyXG5cclxuICAgICRzY29wZS5zdXJwcmlzZU1lID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGtleXMgPSBfLmtleXMoJHNjb3BlLnF1ZXJpZXMpO1xyXG4gICAgICAgIHZhciBpID0gXy5yYW5kb20oMCwga2V5cy5sZW5ndGggLSAxKTtcclxuICAgICAgICB2YXIgcXVlc3Rpb24gPSAkc2NvcGUucXVlcmllc1trZXlzW2ldXTtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRRdWVzdGlvbiA9IHF1ZXN0aW9uO1xyXG4gICAgICAgICRzY29wZS5tYXBJdChxdWVzdGlvbik7XHJcblxyXG4gICAgICAgICQoJyNxdWVzdGlvbnMnKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiBpICogMzAgfSwgMTAwMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0gZnVuY3Rpb25zIGZvciBjcmVhdGluZyBlYWNoIG9mIHRoZSBzdHJ1Y3R1cmVzIC0gc2VlIHZpZXdzL21hcHMvZ2VuZXJhdG9yX3RhYiAtLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5xdWVyaWVzID0ge1xyXG5cclxuICAgICAgICBXSEFUX0lTOiBmdW5jdGlvbih4LCB5KSB7ICAvLyAxXHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcxLmRhdGEsICdkZmxhZycsIHRydWUpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcz8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzPycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFdIQVRfSVNfTk9UOiBmdW5jdGlvbih4LCB5KSB7IC8vIDJcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcyBub3Q/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcyBub3Q/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcyBub3Q/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgRElTVElOR1VJU0hfQkVUV0VFTjogZnVuY3Rpb24oeCwgeSkgeyAvLyAzXHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcxLmRhdGEsICdkZmxhZycsIHRydWUpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcz8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzPycpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzIuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdpcz8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ2lzPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAnaXM/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgQ09NUEFSRV9DT05UUkFTVDogZnVuY3Rpb24oeCwgeSkgeyAvLyA0XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDE1MCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMTUwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMi5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgdmFyIHJ0aGluZzEgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAnY29udHJhc3QnKTtcclxuICAgICAgICAgICAgdmFyIHJ0aGluZzIgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAnY29tcGFyZScpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShydGhpbmcxLmxhYmVsZWRMaW5rLmRhdGEsICd0eXBlJywgJ3RvRnJvbScpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShydGhpbmcyLmxhYmVsZWRMaW5rLmRhdGEsICd0eXBlJywgJ3RvRnJvbScpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBBUlRTX09GOiBmdW5jdGlvbih4LCB5KSB7IC8vIDVcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBBUlRfT0Y6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gNlxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICdwYXJ0IG9mPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBBUlRTX0hBVkVfUEFSVFM6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gN1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGNoaWxkMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChjaGlsZDEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQyID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChjaGlsZDIsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoY2hpbGQyLCAncGFydD8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBSX1BBUlRTOiBmdW5jdGlvbih4LCB5KSB7IC8vIDhcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIHZhciBydGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQocnRoaW5nLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHJ0aGluZywgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUF9QQVJUUzogZnVuY3Rpb24oeCwgeSkgeyAvLyA5XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDMwMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQgb2YgJyArICRzY29wZS5lY2hvQ29uY2VwdDIoKSArICc/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydCBzZWVuIGZyb20gdmlld3BvaW50IG9mICcgKyAkc2NvcGUuZWNob0NvbmNlcHQyKCkgKyAnPycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQzID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludCBvZiAnICsgJHNjb3BlLmVjaG9Db25jZXB0MigpICsgJz8nKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcyLCB0aGluZzEpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcyLCBjaGlsZDEpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcyLCBjaGlsZDIpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcyLCBjaGlsZDMpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFJTX1RPX0FORF9CWTogZnVuY3Rpb24oeCwgeSkgeyAvLyAxMFxyXG4gICAgICAgICAgICB2YXIgcmVsYXRlZDEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJ3JlbGF0ZWQgaWRlYT8nKTtcclxuICAgICAgICAgICAgdmFyIHJlbGF0ZWQyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAzMDAsIHkgKyA1MCwgJ3JlbGF0ZWQgaWRlYT8nKTtcclxuICAgICAgICAgICAgdmFyIHJlbGF0ZWQzID0gbWFwLmNyZWF0ZVRoaW5nKHggKyA1MCwgeSArIDMwMCwgJ3JlbGF0ZWQgaWRlYT8nKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAxMzAsIHkgKyAxMzAsICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGluayhyZWxhdGVkMSwgdGhpbmcpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmsocmVsYXRlZDIsIHRoaW5nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rKHJlbGF0ZWQzLCB0aGluZyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHggKyA1MDAsIHkgKyAxNTAsICdpZGVhPycpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyA3NTAsIHkgKyAxNTAsICdpZGVhPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFdIQVRfSVNfUjogZnVuY3Rpb24oeCwgeSkgeyAvLyAxMVxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ2lkZWE/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUEFSVF9SU19BUkU6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTJcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMzAsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSwgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQzID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGNoaWxkMS5kYXRhLCAnbG9jJywgJy0yMCAxMTAnKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoY2hpbGQyLmRhdGEsICdsb2MnLCAnODAgMTEwJyk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGNoaWxkMy5kYXRhLCAnbG9jJywgJzMwIDE5MCcpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMSwgY2hpbGQyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMiwgY2hpbGQzLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMywgY2hpbGQxLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBBUlRfUlNfRVhJU1Q6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTNcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCksICdyaWdodCcpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQxMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQxMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQxMyA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIyID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIzID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMik7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQxMSwgY2hpbGQyMSwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDEyLCBjaGlsZDIyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMTMsIGNoaWxkMjMsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUlNfV0lUSF9PVEhFUlM6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTRcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMjAwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyMDAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzMgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDIwMCwgeSArIDIwMCwgJ2Fub3RoZXIgdGhpbmcnKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nNCA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjAwLCB5ICsgMjAwLCAnYW5vdGhlciB0aGluZycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmczLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmc0LCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMiwgdGhpbmc0LCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMywgdGhpbmc0LCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBBUlRTX09GX1A6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTVcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMTAwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMyA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAxMDAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayh0aGluZzEsIHRoaW5nMik7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUE9JTlRfRk9SOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE2XHJcbiAgICAgICAgICAgIHZhciB0aGluZyA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAnbmV3IHBlcnNwZWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDE1MCwgeSArIDE1MCwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMTUwLCB5ICsgMTUwLCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICB2YXIgcnRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHRoaW5nLCBydGhpbmcpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIEhBU19NVUxUSVBMRV9QUzogZnVuY3Rpb24oeCwgeSkgeyAvLyAxN1xyXG4gICAgICAgICAgICB2YXIgcG9pbnQxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHkgKyA1MCwgJ3ZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIHBvaW50MiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICB2YXIgcG9pbnQzID0gbWFwLmNyZWF0ZVRoaW5nKHggKyA1MDAsIHkgKyA1MCwgJ3ZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSArIDI1MCwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50MSwgdmlldyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDIsIHZpZXcpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsocG9pbnQzLCB2aWV3KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBQQVJUU19GUk9NX01VTFRJUExFX1BTOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE4XHJcbiAgICAgICAgICAgIHZhciBwb2ludDEgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDEwMCwgeSwgJ3ZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIHBvaW50MiA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMTAwLCB5ICsgMTI1LCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICB2YXIgcG9pbnQzID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHkgKyAyNTAsICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZyA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMTUwLCB5ICsgMjUsICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDMgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDEsIGNoaWxkMSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDEsIGNoaWxkMik7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDIsIGNoaWxkMik7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDMsIGNoaWxkMyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgV0hBVF9BQk9VVDogZnVuY3Rpb24oeCwgeSkgeyAvLyAxOVxyXG4gICAgICAgICAgICAkc2NvcGUucXVlcmllcy5XSEFUX0lTKHgsIHkpO1xyXG4gICAgICAgICAgICAkc2NvcGUucXVlcmllcy5QQVJUU19PRih4ICsgMzAwLCB5KTtcclxuICAgICAgICAgICAgJHNjb3BlLnF1ZXJpZXMuUEFSVFNfRlJPTV9NVUxUSVBMRV9QUyh4ICsgNzAwLCB5KTtcclxuICAgICAgICAgICAgJHNjb3BlLnF1ZXJpZXMuUlNfVE9fQU5EX0JZKHgsIHkgKyA0MDApO1xyXG4gICAgICAgIH1cclxuICAgIH07IC8vIHF1ZXJpZXNcclxuXHJcbn07XHJcblxyXG5HZW5lcmF0b3JDdHJsLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG5cclxuXHJcblNhbmRiYW5rRWRpdG9yLkdlbmVyYXRvciA9IGZ1bmN0aW9uICgkc2NvcGUsIG1hcCkge1xyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBOQjogZ2VuZXJhdG9yIGlzIG9wZW5lZCBvbiBsb2FkIG9mIGVtcHR5IG1hcDsgc2VlIG1hcC5qczpsb2FkKClcclxuICAgIH07XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChvbGRWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfR0VORVJBVE9SKSB7IC8vIGNsb3NpbmcgdGFiXHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG5ld1ZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9HRU5FUkFUT1IpIHsgLy8gb3BlbmluZyB0YWJcclxuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gdGhlc2UgZ2V0IGZpbHRlcmVkIG91dCBpbiBMZXNzb25Cb29rXHJcbiAgICB0aGlzLmdldFBsYWNlaG9sZGVySWRlYU5hbWVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIFsnaXM/JywgJ2lzIG5vdD8nLCAncGFydD8nLCAndmlld3BvaW50PycsICdyZWxhdGVkIGlkZWE/JywgJ2lkZWE/JyxcclxuICAgICAgICAgICAgICAgICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQ/JywgJ2NvbnRyYXN0PycsICdjb21wYXJpc29uPycsICdyZWxhdGlvbnNoaXA/J107XHJcbiAgICB9O1xyXG59O1xyXG4iLCIvLyBsYXlvdXRzIHVzZWQgaW4gdGhlIGVkaXRvciwgZm9yIHRoZSBkaWFncmFtIG9yIGluZGl2aWR1YWwgR3JvdXBzLCBwbHVzIGxheW91dC1yZWxhdGVkIGZ1bmN0aW9uc1xyXG5cclxuU2FuZGJhbmtFZGl0b3IuTGF5b3V0cyA9IGZ1bmN0aW9uKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge307XHJcblxyXG4gICAgdGhpcy5oYW5kbGVEaWFncmFtRXZlbnQgPSBmdW5jdGlvbihldmVudE5hbWUsIGUpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PSAnSW5pdGlhbExheW91dENvbXBsZXRlZCcpIHtcclxuICAgICAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICBkaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1NlbGVjdGlvbk1vdmVkJykge1xyXG4gICAgICAgICAgICB1cGRhdGVTZWxlY3RlZFBhcnRMb2NhdGlvbkRhdGEoZSk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnU2VsZWN0aW9uRGVsZXRlZCcpIHtcclxuICAgICAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdQYXJ0Q3JlYXRlZCcpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnTGF5b3V0cywgUGFydENyZWF0ZWQnKTtcclxuICAgICAgICAgICAgLy8gc2V0TmV3UGFydExvY2F0aW9uRGF0YShlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnUGFydFJlc2l6ZWQnKSB7XHJcbiAgICAgICAgICAgIHNldFJlc2l6ZWRQYXJ0RGltZW5zaW9uRGF0YShlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnTGlua0RyYXduJykge1xyXG4gICAgICAgICAgICBhZGp1c3RMaW5rTGF5b3V0KGUuc3ViamVjdCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ0xpbmtSZWxpbmtlZCcpIHtcclxuICAgICAgICAgICAgYWRqdXN0TGlua0xheW91dChlLnN1YmplY3QpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIGhhbmRsZSBsb2NhdGlvbi9zaXplIGF0dHJpYnV0ZXMgZm9yIG5vZGVzIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIG9ubHkgdXBkYXRlIHcvaCBmb3Igc2xpZGVzLCBhcyBhbGwgb3RoZXIgbm9kZSB0eXBlcyBoYXZlIGZpeGVkIGRpbWVuc2lvbnMgYWNjb3JkaW5nIHRvIHRoZSB0ZW1wbGF0ZXNcclxuICAgIGZ1bmN0aW9uIHNldFJlc2l6ZWRQYXJ0RGltZW5zaW9uRGF0YShlKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHZhciBub2RlID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGlmIChub2RlICYmIG5vZGUuY2F0ZWdvcnkgPT0gJ3NsaWRlJykge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdQYXJ0UmVzaXplZDogJyArIG5vZGUucGFydC5hY3R1YWxCb3VuZHMpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShub2RlLmRhdGEsICd3aWR0aCcsIG5vZGUucGFydC5hY3R1YWxCb3VuZHMud2lkdGgpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShub2RlLmRhdGEsICdoZWlnaHQnLCBub2RlLnBhcnQuYWN0dWFsQm91bmRzLmhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldCB0aGUgJ2xvYycgYXR0cmlidXRlIGZvciBhIG5ldyB0b3AtbGV2ZWwgbm9kZSAoY3JlYXRlZCBieSBkb3VibGUtY2xpY2tpbmcpLCB0byBzdXBwb3J0IGZyZWVoYW5kIGxheW91dFxyXG4gICAgdGhpcy5zZXROZXdQYXJ0TG9jYXRpb25EYXRhID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHZhciBub2RlID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGlmIChub2RlICYmIG5vZGUucGFydCkge1xyXG4gICAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnNldERhdGFQcm9wZXJ0eShub2RlLmRhdGEsICdsb2MnLCBub2RlLnBhcnQubG9jYXRpb24ueCArICcgJyArIG5vZGUucGFydC5sb2NhdGlvbi55KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gdXBkYXRlcyB0aGUgJ2xvYycgYXR0cmlidXRlIGZvciBlYWNoIHNlbGVjdGVkIHBhcnQsIHRvIHN1cHBvcnQgZnJlZWhhbmQgbGF5b3V0IChkb2VzIG5vdCBhcHBseSB0byBzbGlkZXMpXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3RlZFBhcnRMb2NhdGlvbkRhdGEoZSkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgaXQgPSBkaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7IC8vIHRoaW5nXHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudFggPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudFkgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnQuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50WCA9IHBhcnQuY29udGFpbmluZ0dyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50WSA9IHBhcnQuY29udGFpbmluZ0dyb3VwLmxvY2F0aW9uLnk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtb3ZpbmcgZ3JvdXAsIHN1YmplY3Q6ICcgKyBlLnN1YmplY3QgKyAnLCBwYXJ0OiAnICsgcGFydCArICcsIGhlaWdodDogJyArIHBhcnQucGFydC5kZXNpcmVkU2l6ZS5oZWlnaHQgKyAnLCBsb2NhdGlvbjogJyArIHBhcnQucGFydC5sb2NhdGlvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnQubG9jYXRpb24ueCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShwYXJ0LmRhdGEsICdsb2MnLCAocGFydC5sb2NhdGlvbi54IC0gcGFyZW50WCkgKyAnICcgKyAocGFydC5sb2NhdGlvbi55IC0gcGFyZW50WSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIGNoYW5naW5nIGxheW91dHMgb2YgdGhpbmdzIGFuZCB0aGVpciBkZXNjZW5kYW50cyAtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5mcm9tQW5kVG9Ob2Rlc0FyZVZpc2libGUgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsuZnJvbU5vZGUgJiZcclxuICAgICAgICAgICAgbGluay50b05vZGUgJiZcclxuICAgICAgICAgICAgIXNlbGYuaGFzQ29sbGFwc2VkQW5jZXN0b3IobGluay5mcm9tTm9kZSkgJiZcclxuICAgICAgICAgICAgIXNlbGYuaGFzQ29sbGFwc2VkQW5jZXN0b3IobGluay50b05vZGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxhYmVsTm9kZUlzVmlzaWJsZSA9IGZ1bmN0aW9uKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gbGluay5sYWJlbE5vZGVzLmNvdW50ICYmIGxpbmsubGFiZWxOb2Rlcy5maXJzdCgpLnZpc2libGU7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaGFzQ29sbGFwc2VkQW5jZXN0b3IgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cC5pc1N1YkdyYXBoRXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAgPSBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoaXMuaGFzTGlua0xhYmVsQW5jZXN0b3IgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgLy8gICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAvLyAgICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAvLyAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICAgICAgZWxzZSBpZiAoZ3JvdXAuY29udGFpbmluZ0dyb3VwLmlzTGlua0xhYmVsKSB7XHJcbiAgICAvLyAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIC8vICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICBlbHNlIHtcclxuICAgIC8vICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfTtcclxuXHJcbiAgICB0aGlzLmdldEhpZ2hlc3RBbmNlc3RvcldpdGhMYXlvdXQgPSBmdW5jdGlvbihncm91cCwgbGF5b3V0TmFtZXMpIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKF8uY29udGFpbnMobGF5b3V0TmFtZXMsIGdyb3VwLmNvbnRhaW5pbmdHcm91cC5kYXRhLmxheW91dCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBncm91cCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hcmVTaXN0ZXJzSW5JbnZlbnRvcnlMYXlvdXQgPSBmdW5jdGlvbihncm91cDEsIGdyb3VwMikge1xyXG4gICAgICAgIHJldHVybiBncm91cDEuY29udGFpbmluZ0dyb3VwID09IGdyb3VwMi5jb250YWluaW5nR3JvdXAgJiZcclxuICAgICAgICAgICAgZ3JvdXAxLmNvbnRhaW5pbmdHcm91cCAmJlxyXG4gICAgICAgICAgICBfLmNvbnRhaW5zKFsnbGVmdCcsICdyaWdodCddLCBncm91cDEuY29udGFpbmluZ0dyb3VwLmRhdGEubGF5b3V0KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc05vdFdpdGhpbkludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuICFzZWxmLmlzV2l0aGluSW52ZW50b3J5TGF5b3V0KGdyb3VwKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1JUaGluZ1dpdGhpbkludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwLmlzTGlua0xhYmVsICYmIHNlbGYuaXNXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzV2l0aGluSW52ZW50b3J5TGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydsZWZ0JywgJ3JpZ2h0J10pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzV2l0aGluTGVmdEludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuaXNXaXRoaW5MYXlvdXQoZ3JvdXAsIFsnbGVmdCddKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1dpdGhpblJpZ2h0SW52ZW50b3J5TGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydyaWdodCddKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1dpdGhpbkZyZWVoYW5kTGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydmcmVlaGFuZCddKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1dpdGhpblN0YWNrZWRMYXlvdXQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmlzV2l0aGluTGF5b3V0KGdyb3VwLCBbJ3N0YWNrZWQnXSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNXaXRoaW5MYXlvdXQgPSBmdW5jdGlvbihncm91cCwgbGF5b3V0TmFtZXMpIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnaXNXaXRoaW5MYXlvdXQ6ICcgKyBncm91cCArICdsYXlvdXRzOiAnICsgbGF5b3V0TmFtZXMuam9pbigpICsgJzogZmFsc2UnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChfLmNvbnRhaW5zKGxheW91dE5hbWVzLCBncm91cC5jb250YWluaW5nR3JvdXAuZGF0YS5sYXlvdXQpKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdpc1dpdGhpbkxheW91dDogJyArIGdyb3VwICsgJ2xheW91dHM6ICcgKyBsYXlvdXROYW1lcy5qb2luKCkgKyAnOiB0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNob3dMZWZ0VGV4dEJsb2NrID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpblJpZ2h0SW52ZW50b3J5TGF5b3V0KGdyb3VwKSAmJlxyXG4gICAgICAgICAgICAhc2VsZi5pc1dpdGhpblN0YWNrZWRMYXlvdXQoZ3JvdXApICYmXHJcbiAgICAgICAgICAgICFncm91cC5pc0xpbmtMYWJlbDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zaG93UmlnaHRUZXh0QmxvY2sgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmlzV2l0aGluTGVmdEludmVudG9yeUxheW91dChncm91cCkgJiZcclxuICAgICAgICAgICAgIXNlbGYuaXNXaXRoaW5TdGFja2VkTGF5b3V0KGdyb3VwKSAmJlxyXG4gICAgICAgICAgICAhZ3JvdXAuaXNMaW5rTGFiZWw7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2V0RGVzY2VuZGFudExheW91dHMgPSBmdW5jdGlvbihncm91cCwgbGF5b3V0TmFtZSkge1xyXG4gICAgICAgIGlmIChsYXlvdXROYW1lID09ICdsZWZ0JyB8fCBsYXlvdXROYW1lID09ICdyaWdodCcgfHwgbGF5b3V0TmFtZSA9PSAnc3RhY2tlZCcpIHtcclxuICAgICAgICAgICAgdmFyIGl0ID0gZ3JvdXAubWVtYmVyUGFydHMuaXRlcmF0b3I7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmICFwYXJ0LmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydC5kYXRhLmxheW91dCA9IGxheW91dE5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXREZXNjZW5kYW50TGF5b3V0cyhwYXJ0LCBsYXlvdXROYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAobGF5b3V0TmFtZSA9PSAnZnJlZWhhbmQnKSB7XHJcbiAgICAgICAgICAgIC8vIHN0YWNrZWQ/XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmRpc2FibGVMYXlvdXRGb3JTZWxlY3RlZFRoaW5ncyA9IGZ1bmN0aW9uKGxheW91dE5hbWUpIHtcclxuICAgICAgICB2YXIgaXQgPSBtYXAuZ2V0RGlhZ3JhbSgpLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICBpZiAoIWl0LmNvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuaXNXaXRoaW5MYXlvdXQoZ3JvdXAsIFsnbGVmdCcsICdyaWdodCcsICdzdGFja2VkJ10pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBzY2FsaW5nIGZ1bmN0aW9ucywgZXRjLiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gQ29tcHV0ZXMgdGhlIGxldmVsIG9mIHRoaXMgZ3JvdXBcclxuICAgIHRoaXMuY29tcHV0ZUxldmVsID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjb21wdXRlTGV2ZWwsIHBhcnQ6ICcgKyBwYXJ0ICsgJywgY29udGFpbmluZ0dyb3VwOiAnICsgcGFydC5jb250YWluaW5nR3JvdXApO1xyXG4gICAgICAgIGlmICghKGdyb3VwIGluc3RhbmNlb2YgZ28uR3JvdXApIHx8IGdyb3VwLmNvbnRhaW5pbmdHcm91cCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb21wdXRlTGV2ZWwoZ3JvdXAuY29udGFpbmluZ0dyb3VwKSArIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBnZXRzIHRoZSBiYXNpYyBzY2FsaW5nIGZvciB0aGluZyBzcXVhcmVzLCBieSBsZXZlbFxyXG4gICAgZnVuY3Rpb24gZ2V0VGhpbmdTY2FsZShsZXZlbCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnBvdygwLjQ1LCBsZXZlbCk7IC8vIDEsIC40NSwgLjIwMjUsIC4wOTExMjUsIC4uLlxyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoaXMgaXMgb25seSB1c2VkIGZvciBncm91cHNcclxuICAgIHRoaXMuZ2V0U2NhbGUgPSBmdW5jdGlvbihncm91cCwgdmlzaXRlZEdyb3VwS2V5cykge1xyXG4gICAgICAgIGlmIChncm91cCkge1xyXG4gICAgICAgICAgICAvLyBrZWVwIHRyYWNrIG9mIGdyb3VwcyB3ZSd2ZSB2aXNpdGVkIHRvIGF2b2lkIGluZmluaXRlIHJlY3Vyc2lvblxyXG4gICAgICAgICAgICAvLyBUT0RPOiB0cmFjayBkb3duIGV4YWN0bHkgaG93IGluZmluaXRlIGxvb3BzIGFyZSBvY2N1cnJpbmcsXHJcbiAgICAgICAgICAgIC8vIG9yIElGIHRoZXkgc3RpbGwgYXJlIHNpbmNlIG1hcC5jaGVja01vZGVsIHdhcyBpbnRyb2R1Y2VkLi4uXHJcbiAgICAgICAgICAgIGlmICh2aXNpdGVkR3JvdXBLZXlzICYmIEFycmF5LmlzQXJyYXkodmlzaXRlZEdyb3VwS2V5cykpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Zpc2l0ZWRHcm91cEtleXM6ICcgKyB2aXNpdGVkR3JvdXBLZXlzKTtcclxuICAgICAgICAgICAgICAgIGlmIChfLmNvbnRhaW5zKHZpc2l0ZWRHcm91cEtleXMsIGdyb3VwLmRhdGEua2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2hpdCBhbHJlYWR5IHZpc2l0ZWQga2V5OiAnICsgZ3JvdXAuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2aXNpdGVkR3JvdXBLZXlzLnB1c2goZ3JvdXAuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmlzaXRlZEdyb3VwS2V5cyA9IFtncm91cC5kYXRhLmtleV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChncm91cC5sYWJlbGVkTGluaykgeyAvLyBSLXRoaW5nXHJcbiAgICAgICAgICAgICAgICB2YXIgZnJvbVNjYWxlID0gc2VsZi5nZXRTY2FsZShncm91cC5sYWJlbGVkTGluay5mcm9tTm9kZSwgdmlzaXRlZEdyb3VwS2V5cyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG9TY2FsZSA9IHNlbGYuZ2V0U2NhbGUoZ3JvdXAubGFiZWxlZExpbmsudG9Ob2RlLCB2aXNpdGVkR3JvdXBLZXlzKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2dldFNjYWxlLCBmcm9tU2NhbGU6ICcgKyBmcm9tU2NhbGUgKyAnLCB0b1NjYWxlOiAnICsgdG9TY2FsZSArICcsIHZpc2l0ZWRHcm91cEtleXM6ICcgKyB2aXNpdGVkR3JvdXBLZXlzLmpvaW4oJywnKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oZnJvbVNjYWxlLCB0b1NjYWxlKSAqIDAuNTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmdldFNjYWxlKGdyb3VwLmNvbnRhaW5pbmdHcm91cCwgdmlzaXRlZEdyb3VwS2V5cykgKiAwLjQ1O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFRoaW5nU2NhbGUoc2VsZi5jb21wdXRlTGV2ZWwoZ3JvdXApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMTsgLy8gY2FuIG9jY3VyIHdoZW4gZHJhZ2dpbmcgUiB0byBlbXB0eSBzcGFjZVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBnZXRzIHRoZSBtYXJnaW4gdG8gYmUgdXNlZCBpbiBzdGFjayBsYXlvdXQgYmV0d2VlbiB0aGlzIGdyb3VwJ3MgY2hpbGRyZW5cclxuICAgIGZ1bmN0aW9uIGdldFN0YWNrTWFyZ2luKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuICgxMCAvIDAuNDUpICogc2VsZi5nZXRTY2FsZShncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0cyB0aGUgbWFyZ2luIHRvIGJlIHVzZWQgaW4gc3RhY2sgbGF5b3V0IGJldHdlZW4gdGhpcyBncm91cCdzIGNoaWxkcmVuXHJcbiAgICBmdW5jdGlvbiBnZXRJbnZlbnRvcnlNYXJnaW4oZ3JvdXApIHtcclxuICAgICAgICBpZiAoc2VsZi5jb21wdXRlTGV2ZWwoZ3JvdXApIDw9IDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEwICogc2VsZi5nZXRTY2FsZShncm91cCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDMgKiBzZWxmLmdldFNjYWxlKGdyb3VwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5nZXRFeHRlcm5hbFRleHRTY2FsZSA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSAwLjEgKiBzZWxmLmNvbXB1dGVMZXZlbChncm91cCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0TGlua1N0cm9rZVdpZHRoID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHZhciBmcm9tU2NhbGUgPSBzZWxmLmdldFNjYWxlKGxpbmsuZnJvbU5vZGUpO1xyXG4gICAgICAgIHZhciB0b1NjYWxlID0gc2VsZi5nZXRTY2FsZShsaW5rLnRvTm9kZSk7XHJcbiAgICAgICAgcmV0dXJuIChsaW5rLmlzU2VsZWN0ZWQgPyA0IDogMikgKiBNYXRoLm1pbihmcm9tU2NhbGUsIHRvU2NhbGUpOyAvLyAyLCAuOSwgLi4uXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNjYWxlIGFycm93aGVhZHMgYmFzZWQgb24gdGhlIHNtYWxsZXN0IHRvL2Zyb20gbm9kZSwgXHJcbiAgICAvLyBvciBqdXN0IHRoZSBUbyBub2RlIGZvciBQIGxpbmtzXHJcbiAgICB0aGlzLmdldEFycm93aGVhZFNjYWxlID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHZhciBmcm9tU2NhbGUgPSBzZWxmLmdldFNjYWxlKGxpbmsuZnJvbU5vZGUpO1xyXG4gICAgICAgIHZhciB0b1NjYWxlID0gc2VsZi5nZXRTY2FsZShsaW5rLnRvTm9kZSk7XHJcbiAgICAgICAgdmFyIG1pblNjYWxlID0gTWF0aC5taW4oZnJvbVNjYWxlLCB0b1NjYWxlKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiZ2V0QXJyb3doZWFkU2NhbGUsIGZyb21TY2FsZTogXCIsIGZyb21TY2FsZSwgJywgdG9TY2FsZTogJywgdG9TY2FsZSwgJywgbWluU2NhbGU6ICcsIG1pblNjYWxlKTtcclxuICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJykge1xyXG4gICAgICAgICAgICBtaW5TY2FsZSA9IHRvU2NhbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtaW5TY2FsZSA+PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxICogbWluU2NhbGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEuNSAqIG1pblNjYWxlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gY3JlYXRpbmcgbmV3IHRoaW5ncyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gUmV0dXJucyBhIGxvY2F0aW9uIGZvciBhIG5ldyBzaXN0ZXIgZ3JvdXAgKHRoaW5nKSB0byB0aGUgZ2l2ZW4gb25lLCBcclxuICAgIC8vIHdoaWNoIHdpbGwgbm90IGhpZGUgYW55IGV4aXN0aW5nIHRoaW5ncyAob3ZlcmxhcCBpcyBhbGxvd2VkKS4gXHJcbiAgICAvLyBUaGUgcmV0dXJuZWQgY29vcmRpbmF0ZXMgYXJlIGFic29sdXRlIGZvciBhIHRvcC1sZXZlbCBncm91cCwgXHJcbiAgICAvLyBvciByZWxhdGl2ZSB0byB0aGUgcGFyZW50IG90aGVyd2lzZSAtIHN1aXRhYmxlIGZvciB1c2Ugd2l0aCBGcmVlaGFuZERpYWdyYW1MYXlvdXRcclxuICAgIC8vIG9yIEZyZWVoYW5kTGF5b3V0LCByZXNwLlxyXG4gICAgdGhpcy5nZXROZXdTaXN0ZXJMb2NhdGlvbiA9IGZ1bmN0aW9uKGdyb3VwLCB3aXRoUikge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAvLyBpZiB3ZSBhcmUgd2l0aGluIGFub3RoZXIgZ3JvdXAsIHRoaW5ncyBhcmUgaW4gYWJzb2x1dGUgY29vcmRpbmF0ZXNcclxuICAgICAgICAvLyBhbmQgc2lzdGVycyBhcmUgcGxhY2VkIGFib3ZlIHRoZSB0aGluZzsgb3RoZXJ3aXNlIHJlbGF0aXZlIGFuZCBiZWxvdy4uLlxyXG4gICAgICAgIHZhciBpbkdyb3VwID0gKGdyb3VwLmNvbnRhaW5pbmdHcm91cCAhPT0gbnVsbCk7XHJcbiAgICAgICAgLy8gLi4uIGV4Y2VwdCBpZiB3aXRoUiBpcyB0cnVlLCB3ZSBnbyB0byB0aGUgcmlnaHQgaW5zdGVhZCBvZiBhYm92ZSBvciBiZWxvdy5cclxuXHJcbiAgICAgICAgLy8gc3RhcnQgYmVsb3cgaWYgaW4gZ3JvdXAsIGVsc2UgYWJvdmU7IG9yIHRvIHRoZSByaWdodCBpZiB3aXRoUlxyXG4gICAgICAgIHZhciB4LCB5LCB3LCBoO1xyXG4gICAgICAgIGlmICh3aXRoUikge1xyXG4gICAgICAgICAgICB4ID0gZ3JvdXAubG9jYXRpb24ueCArIGdyb3VwLmFjdHVhbEJvdW5kcy53aWR0aCAqIDIuMjtcclxuICAgICAgICAgICAgeSA9IGdyb3VwLmxvY2F0aW9uLnk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgeCA9IGdyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgICAgIHkgPSBncm91cC5sb2NhdGlvbi55ICsgZ3JvdXAuYWN0dWFsQm91bmRzLmhlaWdodCAqIDEuMSAqIChpbkdyb3VwID8gMSA6IC0xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdyA9IGdyb3VwLmFjdHVhbEJvdW5kcy53aWR0aDtcclxuICAgICAgICBoID0gZ3JvdXAuYWN0dWFsQm91bmRzLmhlaWdodDtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIG92ZXJsYXBwaW5nIHBhcnRzOyBpZiBmb3VuZCwgaW5jcmVtZW50IHgseSBhbmQgY29udGludWVcclxuXHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgdmFyIHJlY3QgPSBuZXcgZ28uUmVjdCh4LCB5LCB3LCBoKTtcclxuICAgICAgICAgICAgcmVjdC5ncm93KGggLyAxMCwgdyAvIDEwLCBoIC8gMTAsIHcgLyAxMCk7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0cyA9IGRpYWdyYW0uZmluZE9iamVjdHNJbihyZWN0LCBudWxsLCBzZWxmLmlzR3JvdXApO1xyXG4gICAgICAgICAgICBpZiAocGFydHMuY291bnQpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2dldE5ld1Npc3RlckxvY2F0aW9uOiBvdmVybGFwcGluZyBwYXJ0IGZvdW5kIGluICcgKyByZWN0KTtcclxuICAgICAgICAgICAgICAgIGlmICh3aXRoUikge1xyXG4gICAgICAgICAgICAgICAgICAgIHggKz0gdyAvIDEwO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgKz0gaCAvIDEwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB4ICs9IHcgLyAxMDtcclxuICAgICAgICAgICAgICAgICAgICB5ICs9IGggLyAxMCAqIChpbkdyb3VwID8gMSA6IC0xKTsgLy8gbW92ZSBkb3duIGlmIGluIGdyb3VwLCBlbHNlIHVwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXROZXdTaXN0ZXJMb2NhdGlvbjogbm8gb3ZlcmxhcHBpbmcgcGFydCBmb3VuZCBpbiAnICsgcmVjdCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW5Hcm91cCkgeyAvLyBtYWtlIGNvb3JkaW5hdGVzIHJlbGF0aXZlXHJcbiAgICAgICAgICAgIHggLT0gZ3JvdXAuY29udGFpbmluZ0dyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgICAgIHkgLT0gZ3JvdXAuY29udGFpbmluZ0dyb3VwLmxvY2F0aW9uLnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgZ28uUG9pbnQoeCArIE1hdGgucmFuZG9tKCksIHkgKyBNYXRoLnJhbmRvbSgpKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gUmV0dXJucyBhIGxvY2F0aW9uIGZvciBhIG5ldyBjaGlsZCBncm91cCAodGhpbmcpIHRvIHRoZSBnaXZlbiBvbmUsXHJcbiAgICAvLyB3aGljaCB3aWxsIG5vdCBoaWRlIGFueSBleGlzdGluZyBjaGlsZHJlbiAob3ZlcmxhcCBpcyBhbGxvd2VkKS5cclxuICAgIC8vIFRoZSByZXR1cm5lZCBjb29yZGluYXRlcyBhcmUgcmVsYXRpdmUgdG8gdGhlIHBhcmVudCBncm91cCAtIHN1aXRhYmxlIGZvciB1c2Ugd2l0aCBGcmVlaGFuZExheW91dC5cclxuICAgIHRoaXMuZ2V0TmV3Q2hpbGRMb2NhdGlvbiA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgIC8vIE5COiBhbGwgeC95IGxvY2F0aW9ucyBhcmUgcmVsYXRpdmUgdG8gdGhlIGdyb3VwIGxvY2F0aW9uXHJcbiAgICAgICAgdmFyIHggPSAwO1xyXG4gICAgICAgIHZhciB5ID0gZ3JvdXBCb3VuZHMuaGVpZ2h0ICogMS4xO1xyXG4gICAgICAgIHZhciB3LCBoO1xyXG4gICAgICAgIHZhciBtZW1iZXJzID0gZ3JvdXAubWVtYmVyUGFydHM7XHJcbiAgICAgICAgLy8ga2VlcCB0ZXN0aW5nIG5ldyByZWN0YW5nbGVzIHVudGlsIHdlIGZpbmQgb25lIHRoYXQgZG9lc24ndCBvdmVybGFwIHdpdGggYW55IGV4aXN0aW5nIG1lbWJlciBvZiB0aGUgZ3JvdXBcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBtZW1iZXJzLnJlc2V0KCk7XHJcbiAgICAgICAgICAgIHZhciBvdmVybGFwcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgbWVtYmVyLCBuZXdSZWN0LCBtZW1iZXJSZWN0O1xyXG4gICAgICAgICAgICB3aGlsZSAobWVtYmVycy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIG1lbWJlciA9IG1lbWJlcnMudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVtYmVyQm91bmRzID0gbWVtYmVyLmFjdHVhbEJvdW5kcztcclxuICAgICAgICAgICAgICAgIHcgPSBtZW1iZXJCb3VuZHMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBoID0gbWVtYmVyQm91bmRzLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIC8vIGZpbmQgdGhlIGV4aXN0aW5nIG1lbWJlcidzIGFjdHVhbCBib3VuZHMgKGFic29sdXRlIGNvb3JkcylcclxuICAgICAgICAgICAgICAgIG1lbWJlclJlY3QgPSBuZXcgZ28uUmVjdChtZW1iZXJCb3VuZHMueCAtIGdyb3VwQm91bmRzLngsIG1lbWJlckJvdW5kcy55IC0gZ3JvdXBCb3VuZHMueSwgbWVtYmVyQm91bmRzLndpZHRoLCBtZW1iZXJCb3VuZHMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIG5ld1JlY3QgPSBuZXcgZ28uUmVjdCh4LCB5LCB3LCBoKTtcclxuICAgICAgICAgICAgICAgIG5ld1JlY3QuZ3JvdyhoIC8gNSwgdyAvIDUsIGggLyA1LCB3IC8gNSk7XHJcbiAgICAgICAgICAgICAgICBvdmVybGFwcyA9IG5ld1JlY3QuY29udGFpbnNSZWN0KG1lbWJlclJlY3QpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0TmV3Q2hpbGRMb2NhdGlvbiBmb3IgJyArIG1lbWJlciArICc6IG5ld1JlY3QgPSAnICsgbmV3UmVjdCArICcsIG1lbWJlclJlY3QgPSAnICsgbWVtYmVyUmVjdCArICcsIG92ZXJsYXBzOiAnICsgb3ZlcmxhcHMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG92ZXJsYXBzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG92ZXJsYXBzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpbmNyZW1lbnQgeCwgeSBhbmQgdHJ5IGFnYWluXHJcbiAgICAgICAgICAgICAgICB4ICs9IHcgLyA1O1xyXG4gICAgICAgICAgICAgICAgeSArPSBoIC8gNTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGZvdW5kIGEgZ29vZCBzcG90IVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBnby5Qb2ludCh4LCB5KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gYSBzaW1wbGVyIHZlcnNpb24gb2YgZ2V0TmV3Q2hpbGRMb2NhdGlvbiB0aGF0IHBsYWNlcyB0aGUgY2hpbGQgb3V0c2lkZSB0aGUgYm91bmRzIG9mIHRoZSBleGlzdGluZyBjaGlsZHJlblxyXG4gICAgdGhpcy5nZXROZXdDaGlsZExvY2F0aW9uMiA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgIHZhciBjaGlsZEJvdW5kcyA9IG1hcC5zYWZlUmVjdChtYXAuZ2V0RGlhZ3JhbSgpLmNvbXB1dGVQYXJ0c0JvdW5kcyhncm91cC5tZW1iZXJQYXJ0cykpO1xyXG4gICAgICAgIHZhciB4ID0gMDtcclxuICAgICAgICB2YXIgeSA9IDA7XHJcbiAgICAgICAgaWYgKCFncm91cC5tZW1iZXJQYXJ0cy5jb3VudCkge1xyXG4gICAgICAgICAgICB5ID0gZ3JvdXBCb3VuZHMuaGVpZ2h0ICogMS4yO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHkgPSBncm91cEJvdW5kcy5oZWlnaHQgKiAxLjQgKyBjaGlsZEJvdW5kcy5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2dldE5ld0NoaWxkTG9jYXRpb24yLCBjaGlsZEJvdW5kczogJyArIGNoaWxkQm91bmRzICsgJywgZ3JvdXBCb3VuZHM6ICcgKyBncm91cEJvdW5kcyArICcsIHg6ICcgKyB4ICsgJywgeTogJyArIHkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgZ28uUG9pbnQoeCwgeSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIG1vdmUgYWxsIHRoZSBnaXZlbiBuZXcgbWVtYmVyIGdyb3VwcyBzbyB0aGF0IHRoZWlyIGxvY2F0aW9ucyBhcmUgcmVsYXRpdmUgdG8gdGhhdCBvZiBcclxuICAgIC8vIHRoZSBwYXJlbnQgYW5kIGl0cyBwcmV2aW91c2x5IGV4aXN0aW5nIG1lbWJlcnMsIGFuZCBzY2FsZWQgZG93biBhcHByb3ByaWF0ZWx5XHJcbiAgICB0aGlzLmxheW91dE5ld01lbWJlcnNSZWxhdGl2ZVRvID0gZnVuY3Rpb24obmV3TWVtYmVycywgcGFyZW50LCBvbGRNZW1iZXJCb3VuZHMpIHtcclxuICAgICAgICAvLyBob3cgYmlnIHdhcyB0aGUgcGFyZW50IHN5c3RlbSBiZWZvcmUgdGhlIG5ldyBncm91cHMgd2VyZSBhZGRlZD9cclxuICAgICAgICB2YXIgc3lzdGVtQm91bmRzID0gcGFyZW50LmFjdHVhbEJvdW5kcy51bmlvblJlY3Qob2xkTWVtYmVyQm91bmRzKTtcclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBvbGQvbmV3IG9yaWdpbnMgLSBwbGFjZSBuZXcgb3JpZ2luIGJlbG93IGV4aXN0aW5nIHN5c3RlbVxyXG4gICAgICAgIHZhciBvbGRCb3VuZHMgPSBtYXAuZ2V0RGlhZ3JhbSgpLmNvbXB1dGVQYXJ0c0JvdW5kcyhuZXdNZW1iZXJzKTtcclxuICAgICAgICB2YXIgb2xkT3JpZ2luID0gbmV3IGdvLlBvaW50KG9sZEJvdW5kcy54LCBvbGRCb3VuZHMueSk7XHJcbiAgICAgICAgdmFyIG5ld09yaWdpbiA9IG5ldyBnby5Qb2ludCgwLCBzeXN0ZW1Cb3VuZHMuaGVpZ2h0ICogMS4yKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXROZXdNZW1iZXJzUmVsYXRpdmVUbywgc3lzdGVtQm91bmRzOiAnICsgc3lzdGVtQm91bmRzICsgJywgb2xkQm91bmRzOiAnICsgb2xkQm91bmRzICsgICcsIG9sZE9yaWdpbjogJyArIG9sZE9yaWdpbiArICcsIG5ld09yaWdpbjogJyArIG5ld09yaWdpbik7XHJcblxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgbmV3IHNjYWxlZCBsb2NhdGlvbnNcclxuICAgICAgICAvLyBOQjogd2UgY2FuIGFzc3VtZSBuZXdNZW1iZXJzIGFyZSBhbGwgb25lIGxldmVsIGRvd24gZnJvbSBwYXJlbnQgKHNlZSBtYXAuYWRkU2VsZWN0ZWRUaGluZ3NBc0NoaWxkcmVuT2YpLCBcclxuICAgICAgICAvLyBzbyB3ZSBqdXN0IG11bHRpcGx5IGJ5IHRoZSBzdGFuZGFyZCBzY2FsZSBmYWN0b3JcclxuICAgICAgICB2YXIgaXQgPSBuZXdNZW1iZXJzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBncm91cEJvdW5kcyA9IGdyb3VwLmFjdHVhbEJvdW5kcztcclxuICAgICAgICAgICAgdmFyIG5ld1ggPSBuZXdPcmlnaW4ueCArIChncm91cEJvdW5kcy54IC0gb2xkT3JpZ2luLngpICogMC40NTtcclxuICAgICAgICAgICAgdmFyIG5ld1kgPSBuZXdPcmlnaW4ueSArIChncm91cEJvdW5kcy55IC0gb2xkT3JpZ2luLnkpICogMC40NTtcclxuICAgICAgICAgICAgdmFyIG5ld0xvYyA9IGdvLlBvaW50LnN0cmluZ2lmeShuZXcgZ28uUG9pbnQobmV3WCwgbmV3WSkpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXROZXdNZW1iZXJzUmVsYXRpdmVUbywgZ3JvdXBCb3VuZHM6ICcgKyBncm91cEJvdW5kcyArICcsIG5ld0xvYzogJyArIG5ld0xvYyk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsb2MnLCBuZXdMb2MpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gbW92ZSBhbGwgdGhlIGdpdmVuIG9sZCBtZW1iZXIgZ3JvdXBzIHNvIHRoYXQgdGhlaXIgbG9jYXRpb25zIGFyZSBhYnNvbHV0ZSBhbmQgYWJvdmVcclxuICAgIC8vIHRoZSBwYXJlbnQsIGFuZCBzY2FsZWQgdXAgYXBwcm9wcmlhdGVseVxyXG4gICAgdGhpcy5sYXlvdXRPbGRNZW1iZXJzT3V0c2lkZU9mID0gZnVuY3Rpb24ob2xkTWVtYmVycywgcGFyZW50LCBvbGRNZW1iZXJzQm91bmRzLCBvbGRNZW1iZXJzTGV2ZWwpIHtcclxuICAgICAgICAvLyBmaWd1cmUgb3V0IHNjYWxlIGZhY3RvciAobWVtYmVycyBjYW4gYmUgZHJhZ2dlZCB1cCBtdWx0aXBsZSBsZXZlbHMsIHVubGlrZSBkcmFnZ2luZyBpbnRvIFMpXHJcbiAgICAgICAgdmFyIHNjYWxlRmFjdG9yID0gTWF0aC5wb3coMC40NSwgb2xkTWVtYmVyc0xldmVsIC0gc2VsZi5jb21wdXRlTGV2ZWwocGFyZW50KSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZiwgc2NhbGVGYWN0b3I6ICcgKyBzY2FsZUZhY3Rvcik7XHJcblxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgb2xkL25ldyBvcmlnaW5zIC0gcGxhY2UgbmV3IG9yaWdpbiBhYm92ZSBwYXJlbnQsIHdpdGggdmVydGljYWwgc3BhY2UgZm9yIHNjYWxlZC11cCBvbGRNZW1iZXJzXHJcbiAgICAgICAgdmFyIHBhcmVudEJvdW5kcyA9IHBhcmVudC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgdmFyIG9sZE9yaWdpbiA9IG5ldyBnby5Qb2ludChvbGRNZW1iZXJzQm91bmRzLngsIG9sZE1lbWJlcnNCb3VuZHMueSk7XHJcbiAgICAgICAgdmFyIG5ld09yaWdpbiA9IG5ldyBnby5Qb2ludChwYXJlbnRCb3VuZHMueCwgcGFyZW50Qm91bmRzLnkgLSBvbGRNZW1iZXJzQm91bmRzLmhlaWdodCAqIDEuMiAvIHNjYWxlRmFjdG9yKTtcclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBuZXcgc2NhbGVkIGxvY2F0aW9uc1xyXG4gICAgICAgIHZhciBpdCA9IG9sZE1lbWJlcnMuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgdmFyIGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgICAgICB2YXIgbmV3WCA9IG5ld09yaWdpbi54ICsgKGdyb3VwQm91bmRzLnggLSBvbGRPcmlnaW4ueCkgLyBzY2FsZUZhY3RvcjtcclxuICAgICAgICAgICAgdmFyIG5ld1kgPSBuZXdPcmlnaW4ueSArIChncm91cEJvdW5kcy55IC0gb2xkT3JpZ2luLnkpIC8gc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIHZhciBuZXdMb2MgPSBnby5Qb2ludC5zdHJpbmdpZnkobmV3IGdvLlBvaW50KG5ld1gsIG5ld1kpKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZiwgcGFyZW50Qm91bmRzOiAnICsgcGFyZW50Qm91bmRzICsgJywgb2xkTWVtYmVyc0JvdW5kczogJyArIG9sZE1lbWJlcnNCb3VuZHMgKyAnLCBuZXdPcmlnaW46ICcgKyBuZXdPcmlnaW4gKyAnLCBncm91cEJvdW5kczogJyArIGdyb3VwQm91bmRzICsgJywgbmV3TG9jOiAnICsgbmV3TG9jKTtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ2xvYycsIGdvLlBvaW50LnN0cmluZ2lmeShuZXdMb2MpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tIGFjY2Vzc29ycyAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgYXBwcm9wcmlhdGUgbGF5b3V0IGNsYXNzIGJ5IGFiYnJldmlhdGVkIG5hbWVcclxuICAgIHRoaXMuZ2V0TGF5b3V0ID0gZnVuY3Rpb24obGF5b3V0TmFtZSkge1xyXG4gICAgICAgIGlmIChsYXlvdXROYW1lID09ICdmcmVlaGFuZCcpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnJlZWhhbmRMYXlvdXQoKTtcclxuICAgICAgICBlbHNlIGlmIChsYXlvdXROYW1lID09ICdyaWdodCcpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmlnaHRJbnZlbnRvcnlMYXlvdXQoKTtcclxuICAgICAgICBlbHNlIGlmIChsYXlvdXROYW1lID09ICdzdGFja2VkJylcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdGFja2VkTGF5b3V0KCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IExlZnRJbnZlbnRvcnlMYXlvdXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRGcmVlaGFuZERpYWdyYW1MYXlvdXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEZyZWVoYW5kRGlhZ3JhbUxheW91dCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHJldHVybnMgdHJ1ZSBpZiB0aGUgdG8gYW5kIGZyb20gbm9kZXMgZm9yIHRoZSBsaW5rIGhhdmUgYSBjb21tb24gYW5jZXN0b3IgZ3JvdXAgd2l0aCBvbmUgb2YgdGhlIGdpdmVuIGxheW91dCBuYW1lcy5cclxuICAgIC8vIFRPRE86IHZlcmlmeSBsb2dpYyAtIHdoYXQgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHN1Y2ggYW5jZXN0b3JzPyAtIHRoaXMgc2hvdWxkIHJldHVybiB0aGUgaGlnaGVzdCBvbmUuLi5cclxuICAgIGZ1bmN0aW9uIGdldENvbW1vbkFuY2VzdG9yV2l0aExheW91dChncm91cDEsIGdyb3VwMiwgbGF5b3V0TmFtZXMpIHtcclxuICAgICAgICB2YXIgYW5jZXN0b3JzMSA9IHNlbGYuZ2V0QW5jZXN0b3JHcm91cHMoZ3JvdXAxKTtcclxuICAgICAgICB2YXIgYW5jZXN0b3JzMiA9IHNlbGYuZ2V0QW5jZXN0b3JHcm91cHMoZ3JvdXAyKTtcclxuICAgICAgICB2YXIgY29tbW9uQW5jZXN0b3JzID0gXy5pbnRlcnNlY3Rpb24oYW5jZXN0b3JzMSwgYW5jZXN0b3JzMik7XHJcbiAgICAgICAgdmFyIGxheW91dEFuY2VzdG9ycyA9IF8uZmlsdGVyKGNvbW1vbkFuY2VzdG9ycywgZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIF8uaW5kZXhPZihsYXlvdXROYW1lcywgZ3JvdXAuZGF0YS5sYXlvdXQpICE9IC0xO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChsYXlvdXRBbmNlc3RvcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXlvdXRBbmNlc3RvcnNbMF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIGFuY2VzdG9ycyBvZiB0aGlzIGdyb3VwLCBpbmNsdWRpbmcgaXRzZWxmXHJcbiAgICB0aGlzLmdldEFuY2VzdG9yR3JvdXBzID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgYW5jZXN0b3JzID0gW2dyb3VwXTtcclxuICAgICAgICB2YXIgZyA9IGdyb3VwO1xyXG4gICAgICAgIHdoaWxlIChnLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICBhbmNlc3RvcnMucHVzaChnLmNvbnRhaW5pbmdHcm91cCk7XHJcbiAgICAgICAgICAgIGcgPSBnLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ycztcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBGcmVlaGFuZERpYWdyYW1MYXlvdXQoKSB7XHJcbiAgICAgICAgZ28uTGF5b3V0LmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ28uRGlhZ3JhbS5pbmhlcml0KEZyZWVoYW5kRGlhZ3JhbUxheW91dCwgZ28uTGF5b3V0KTtcclxuXHJcbiAgICBGcmVlaGFuZERpYWdyYW1MYXlvdXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiRnJlZWhhbmREaWFncmFtTGF5b3V0XCI7XHJcbiAgICB9O1xyXG5cclxuICAgIEZyZWVoYW5kRGlhZ3JhbUxheW91dC5wcm90b3R5cGUuZG9MYXlvdXQgPSBmdW5jdGlvbihjb2xsKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnRnJlZWhhbmREaWFncmFtTGF5b3V0LmRvTGF5b3V0Jyk7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIC8vIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcIkZyZWVoYW5kIERpYWdyYW0gTGF5b3V0XCIpO1xyXG5cclxuICAgICAgICAvL3ZhbGlkYXRlR3JvdXBMb2NhdGlvbnMoZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKSk7XHJcbiAgICAgICAgdmFyIGdyb3VwcyA9IGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCk7IC8vIGdldCBuZXcgaXRlcmF0b3JcclxuICAgICAgICB3aGlsZSAoZ3JvdXBzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBncm91cHMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmICghZ3JvdXAuaXNMaW5rTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsb2MgPSBnby5Qb2ludC5wYXJzZShncm91cC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICBncm91cC5tb3ZlKG5ldyBnby5Qb2ludChsb2MueCwgbG9jLnkpKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ0ZyZWVoYW5kRGlhZ3JhbUxheW91dCwgZ3JvdXA6ICcgKyBncm91cCArICcgdG8gbG9jYXRpb246ICcgKyBsb2MueCArICcsJyArIGxvYy55KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWxsIGFkanVzdG1lbnQgb2YgbGlua3MgaXMgZG9uZSBmcm9tIGhlcmUsIG5vdCBmcm9tIHRoZSBvdGhlciBsYXlvdXRzLi4uXHJcbiAgICAgICAgZ2V0TGlua3NCeU5vZGVzKHRydWUpO1xyXG4gICAgICAgIHZhciBsaW5rcyA9IGRpYWdyYW0ubGlua3MuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICAvLyBpZiAoaXNOYU4obGluay5sb2NhdGlvbi54KSkge1xyXG4gICAgICAgICAgICAvLyAgICAgLy9jb25zb2xlLmxvZygnbGluayBsb2NhdGlvbiBpc05hTicpO1xyXG4gICAgICAgICAgICAvLyAgICAgbGluay5tb3ZlKG5ldyBnby5Qb2ludCgwLDApKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyAvL2NvbnNvbGUubG9nKCdsaW5rIGxvY2F0aW9uOiAnICsgbGluay5sb2NhdGlvbik7XHJcbiAgICAgICAgICAgIGFkanVzdExpbmtMYXlvdXQobGluayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiRnJlZWhhbmQgRGlhZ3JhbSBMYXlvdXRcIik7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyBpZiBhbnkgZ3JvdXAgaW4gdGhlIGdpdmVuIEl0ZXJhdG9yIGRvZXMgbm90IGhhdmUgYSBsb2NhdGlvbiAoZGF0YS5sb2MpLCBzZXQgb25lXHJcbiAgICAvLyB0aGF0IGRvZXNuJ3Qgb3ZlcmxhcCB3aXRoIHRoZSBvdGhlciBtZW1iZXJzXHJcbiAgICBmdW5jdGlvbiB2YWxpZGF0ZUdyb3VwTG9jYXRpb25zKGdyb3Vwcykge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIEZyZWVoYW5kTGF5b3V0KCkge1xyXG4gICAgICAgIGdvLkxheW91dC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdvLkRpYWdyYW0uaW5oZXJpdChGcmVlaGFuZExheW91dCwgZ28uTGF5b3V0KTtcclxuXHJcbiAgICBGcmVlaGFuZExheW91dC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gXCJGcmVlaGFuZExheW91dFwiO1xyXG4gICAgfTtcclxuXHJcbiAgICBGcmVlaGFuZExheW91dC5wcm90b3R5cGUuZG9MYXlvdXQgPSBmdW5jdGlvbihjb2xsKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcIkZyZWVoYW5kIExheW91dFwiKTtcclxuXHJcbiAgICAgICAgdmFyIHggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgdmFyIHkgPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnk7XHJcblxyXG4gICAgICAgIHZhciBpdCA9IHRoaXMuZ3JvdXAubWVtYmVyUGFydHMuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmICFwYXJ0LmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jID0gZ28uUG9pbnQucGFyc2UocGFydC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdGcmVlaGFuZExheW91dCwgcGFydDogJyArIHBhcnQuZGF0YS50ZXh0ICsgJywgbG9jOiAnICsgbG9jICsgJywgbG9jYXRpb246ICcgKyBwYXJ0LmxvY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIHBhcnQubW92ZShuZXcgZ28uUG9pbnQoeCArIGxvYy54LCB5ICsgbG9jLnkpKTtcclxuICAgICAgICAgICAgICAgIHBhcnQubGF5b3V0LmRvTGF5b3V0KHBhcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiRnJlZWhhbmQgTGF5b3V0XCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIFN0YWNrZWRMYXlvdXQoKSB7XHJcbiAgICAgICAgZ28uTGF5b3V0LmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ28uRGlhZ3JhbS5pbmhlcml0KFN0YWNrZWRMYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG4gICAgU3RhY2tlZExheW91dC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gXCJTdGFja2VkTGF5b3V0XCI7XHJcbiAgICB9O1xyXG5cclxuICAgIFN0YWNrZWRMYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xyXG4gICAgICAgIHRoaXMuZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiU3RhY2tlZCBMYXlvdXRcIik7XHJcbiAgICAgICAgdmFyIG1hcmdpbiA9IGdldFN0YWNrTWFyZ2luKHRoaXMuZ3JvdXApO1xyXG4gICAgICAgIHZhciBzdGFydFggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgdmFyIHN0YXJ0WSA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueSArICh0aGlzLmdyb3VwLnBhcnQuYWN0dWFsQm91bmRzLmhlaWdodCArIG1hcmdpbiAvIDIpO1xyXG4gICAgICAgIGxheW91dE1lbWJlcnNGb3JTdGFja2VkKHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZKTtcclxuICAgICAgICB0aGlzLmRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJTdGFja2VkIExheW91dFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgbWF4IHkgdmFsdWUgYWZ0ZXIgbGF5aW5nIG91dCB0aGUgbGFzdCBwYXJ0XHJcbiAgICBmdW5jdGlvbiBsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZChncm91cCwgc3RhcnRYLCBzdGFydFkpIHtcclxuICAgICAgICB2YXIgbWVtYmVycyA9IGdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKTtcclxuICAgICAgICB2YXIgeCA9IHN0YXJ0WDtcclxuICAgICAgICB2YXIgeSA9IHN0YXJ0WTtcclxuICAgICAgICB2YXIgcm93Q291bnQgPSAwO1xyXG4gICAgICAgIHZhciBtYXhTdGFydFkgPSBzdGFydFk7XHJcbiAgICAgICAgXy5lYWNoKG1lbWJlcnMsIGZ1bmN0aW9uKHBhcnQpIHtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiAhcGFydC5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcmdpbiA9IGdldFN0YWNrTWFyZ2luKHBhcnQpO1xyXG4gICAgICAgICAgICAgICAgcGFydC5tb3ZlKG5ldyBnby5Qb2ludCh4LCB5KSk7XHJcbiAgICAgICAgICAgICAgICBzdGFydFkgPSB5ICsgcGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgbWFyZ2luIC8gMjsgLy8gc3RhcnQgWSBwb3NpdGlvbiBmb3IgcGFydCdzIGNoaWxkcmVuXHJcblxyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvclN0YWNrZWQ6IHN0YXJ0aW5nIGxheW91dCBvZiBjaGlsZHJlbiBvZiAnICsgcGFydCArICcgYXQgJyArIE1hdGgucm91bmQoeCkgKyAnLCcgKyBNYXRoLnJvdW5kKHN0YXJ0WSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0LmlzU3ViR3JhcGhFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxheW91dCBjaGlsZHJlbiBvZiB0aGlzIHBhcnQ7IGNoZWNrIGlmIHdlJ3ZlIGFscmVhZHkgZG9uZSBhIHRhbGxlciBwYXJ0K2NoaWxkcmVuIGluIGN1cnJlbnQgcm93XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4U3RhcnRZID0gTWF0aC5tYXgobWF4U3RhcnRZLCBsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZChwYXJ0LCB4LCBzdGFydFkpKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZDogbGFpZCBvdXQgY2hpbGRyZW4gb2YgJyArIHBhcnQgKyAnLCBtYXhTdGFydFkgaXMgbm93ICcgKyBNYXRoLnJvdW5kKG1heFN0YXJ0WSkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhTdGFydFkgPSBNYXRoLm1heChtYXhTdGFydFksIHN0YXJ0WSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZGVjaWRlIHdoZXRoZXIgdG8gd3JhcFxyXG4gICAgICAgICAgICAgICAgcm93Q291bnQrKztcclxuICAgICAgICAgICAgICAgIGlmIChyb3dDb3VudCA8IDIpIHsgLy8ga2VlcCBnb2luZyBvbiB0aGlzIGxpbmVcclxuICAgICAgICAgICAgICAgICAgICB4ICs9IHBhcnQuYWN0dWFsQm91bmRzLndpZHRoICsgbWFyZ2luO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gd3JhcCB0byBuZXh0IGxpbmVcclxuICAgICAgICAgICAgICAgICAgICB4ID0gc3RhcnRYO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgPSBtYXhTdGFydFkgKyBtYXJnaW4gLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd0NvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBtYXhTdGFydFk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBSaWdodEludmVudG9yeUxheW91dCgpIHtcclxuICAgICAgICBnby5MYXlvdXQuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnby5EaWFncmFtLmluaGVyaXQoUmlnaHRJbnZlbnRvcnlMYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG4gICAgUmlnaHRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiUmlnaHRJbnZlbnRvcnlMYXlvdXRcIjtcclxuICAgIH07XHJcblxyXG4gICAgUmlnaHRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xyXG4gICAgICAgIC8vdGhpcy5kaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJJbnZlbnRvcnkgTGF5b3V0XCIpO1xyXG4gICAgICAgIHZhciBzdGFydFggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnggKyB0aGlzLmdyb3VwLmFjdHVhbEJvdW5kcy53aWR0aDtcclxuICAgICAgICB2YXIgc3RhcnRZID0gdGhpcy5ncm91cC5sb2NhdGlvbi55ICsgKHRoaXMuZ3JvdXAucGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgZ2V0SW52ZW50b3J5TWFyZ2luKHRoaXMuZ3JvdXApKTtcclxuICAgICAgICBsYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5KHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZLCAnUicpO1xyXG4gICAgICAgIC8vdGhpcy5kaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBMZWZ0SW52ZW50b3J5TGF5b3V0KCkge1xyXG4gICAgICAgIGdvLkxheW91dC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdvLkRpYWdyYW0uaW5oZXJpdChMZWZ0SW52ZW50b3J5TGF5b3V0LCBnby5MYXlvdXQpO1xyXG5cclxuICAgIExlZnRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiTGVmdEludmVudG9yeUxheW91dFwiO1xyXG4gICAgfTtcclxuXHJcbiAgICBMZWZ0SW52ZW50b3J5TGF5b3V0LnByb3RvdHlwZS5kb0xheW91dCA9IGZ1bmN0aW9uKGNvbGwpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdMZWZ0SW52ZW50b3J5TGF5b3V0LmRvTGF5b3V0LCBncm91cDogJyArIHRoaXMuZ3JvdXAgKyAnLCBsb2NhdGlvbjogJyArIHRoaXMuZ3JvdXAubG9jYXRpb24pO1xyXG4gICAgICAgIC8vIHRoaXMuZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcclxuICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5ncm91cC5sb2NhdGlvbi54O1xyXG4gICAgICAgIHZhciBzdGFydFkgPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnkgKyAodGhpcy5ncm91cC5wYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyBnZXRJbnZlbnRvcnlNYXJnaW4odGhpcy5ncm91cCkpO1xyXG4gICAgICAgIGxheW91dE1lbWJlcnNGb3JJbnZlbnRvcnkodGhpcy5ncm91cCwgc3RhcnRYLCBzdGFydFksICdMJyk7XHJcbiAgICAgICAgLy8gdGhpcy5kaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2hhcmVkIHN0dWZmIGZvciBMZWZ0L1JpZ2h0IEludmVudG9yeSBsYXlvdXRzLi4uXHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgbWF4IHkgdmFsdWUgYWZ0ZXIgbGF5aW5nIG91dCB0aGUgbGFzdCBwYXJ0XHJcbiAgICAvLyBzaWRlIGlzICdMJyBvciAnUidcclxuICAgIGZ1bmN0aW9uIGxheW91dE1lbWJlcnNGb3JJbnZlbnRvcnkoZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZLCBzaWRlKSB7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBnZXRPcmRlcmVkTWVtYmVycyhncm91cCk7XHJcbiAgICAgICAgXy5lYWNoKG1lbWJlcnMsIGZ1bmN0aW9uKHBhcnQpIHtcclxuICAgICAgICAgICAgdmFyIHggPSBzdGFydFg7IC8vIGZvciBsZWZ0LCBqdXN0IHVzZSB4XHJcbiAgICAgICAgICAgIGlmIChzaWRlID09ICdSJylcclxuICAgICAgICAgICAgICAgIHggPSBzdGFydFggLSBwYXJ0LmFjdHVhbEJvdW5kcy53aWR0aDsgLy8gZm9yIHJpZ2h0LCByaWdodC1hbGlnbiBwYXJ0cyB0byBzdGFydFhcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeSwgcGFydDogJyArIHBhcnQgKyAnIHRvIGxvY2F0aW9uOiAnICsgeCArICcsJyArIHN0YXJ0WSk7XHJcbiAgICAgICAgICAgIHBhcnQubW92ZShuZXcgZ28uUG9pbnQoeCwgc3RhcnRZKSk7XHJcbiAgICAgICAgICAgIHN0YXJ0WSArPSBwYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyBnZXRJbnZlbnRvcnlNYXJnaW4ocGFydCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0LmlzU3ViR3JhcGhFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeSwgeSBhZnRlciBtb3Zpbmc6ICcgKyBwYXJ0ICsgJyA9ICcgKyBzdGFydFkpO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRZID0gbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeShwYXJ0LCBzdGFydFgsIHN0YXJ0WSwgc2lkZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gc3RhcnRZICsgZ2V0SW52ZW50b3J5TWFyZ2luKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBncm91cCdzIChub24tUi10aGluZykgbWVtYmVycywgc29ydGVkIGJ5IHRoZSAnb3JkZXInIGRhdGEgcHJvcGVydHlcclxuICAgIGZ1bmN0aW9uIGdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLm1lbWJlclBhcnRzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiAhcGFydC5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocGFydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF8uc29ydEJ5KG1lbWJlcnMudG9BcnJheSgpLCBmdW5jdGlvbihtZW1iZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1lbWJlci5kYXRhLm9yZGVyO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBsaW5rIHJvdXRpbmcgYW5kIHZpc2liaWxpdHkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gYWRqdXN0IHRoZSByb3V0aW5nLCB2aXNpYmlsaXR5IGFuZCBvdGhlciBwcm9wZXJ0aWVzIG9mIGEgbGluayBhY2NvcmRpbmcgdG8gdmFyaW91cyBzdHJ1Y3R1cmFsIGNyaXRlcmlhXHJcbiAgICBmdW5jdGlvbiBhZGp1c3RMaW5rTGF5b3V0KGxpbmspIHtcclxuICAgICAgICBpZiAoIWxpbmsgfHwgIWxpbmsuZnJvbU5vZGUgfHwgIWxpbmsudG9Ob2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHZhciBsb2MgPSBsaW5rLmxvY2F0aW9uO1xyXG4gICAgICAgIC8vIGlmIChpc05hTihsb2MueCkgfHwgaXNOYU4obG9jLnkpKSB7XHJcbiAgICAgICAgLy8gICAgIGxpbmsubG9jYXRpb24gPSBuZXcgZ28uUG9pbnQoMTAsIDEwKTtcclxuICAgICAgICAvLyAgICAgLy9jb25zb2xlLmxvZygnYWRqdXN0TGlua0xheW91dCwgbGluay5sb2NhdGlvbjogJyArIGxpbmsubG9jYXRpb24pO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyAvL2NvbnNvbGUubG9nKCdhZGp1c3RMaW5rTGF5b3V0LCBsaW5rLmxvY2F0aW9uOiAnICsgbGluay5sb2NhdGlvbik7XHJcblxyXG4gICAgICAgIC8vIHNlZSBpZiBsaW5rIGlzIHdpdGhpbiBhIHN0YWNrZWQgb3IgaW52ZW50b3J5IGxheW91dCwgb3IgaWYgaXQncyBhIGhpZGRlbiBQIGxpbmtcclxuICAgICAgICB2YXIgaW52ZW50b3J5QW5jZXN0b3IgPSBnZXRDb21tb25BbmNlc3RvcldpdGhMYXlvdXQobGluay5mcm9tTm9kZSwgbGluay50b05vZGUsIFsnbGVmdCcsICdyaWdodCddKTtcclxuICAgICAgICB2YXIgc3RhY2tlZEFuY2VzdG9yID0gZ2V0Q29tbW9uQW5jZXN0b3JXaXRoTGF5b3V0KGxpbmsuZnJvbU5vZGUsIGxpbmsudG9Ob2RlLCBbJ3N0YWNrZWQnXSk7XHJcbiAgICAgICAgdmFyIGhpZGVQTGluayA9IChsaW5rLmRhdGEgJiYgbGluay5kYXRhLmNhdGVnb3J5ID09ICdQJyAmJiAhbWFwLmdldFRlbXBsYXRlcygpLnNob3dQTGluayhsaW5rKSk7XHJcbiAgICAgICAgLy92YXIgY3Jvd2RlZFJUaGluZyA9IGhhc0Nyb3dkZWRSVGhpbmcobGluayk7XHJcblxyXG4gICAgICAgIC8vIHNlZSBpZiB0aGlzIGlzIG9uZSBvZiBtdWx0aXBsZSBsaW5rcyBiZXR3ZWVuIHRoZSBzYW1lIHR3byBub2Rlc1xyXG4gICAgICAgIHZhciBzbnBvcyA9IHNlbGYuZ2V0U2FtZU5vZGVzTGlua1Bvc2l0aW9uKGxpbmspO1xyXG4gICAgICAgIHZhciBpc011bHRpTGluayA9IChzbnBvcy5jb3VudCA+IDEpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NucG9zIGZvciBsaW5rICcgKyBsaW5rICsgJzogJyArIHNucG9zLmluZGV4ICsgJyBvZiAnICsgc25wb3MuY291bnQpO1xyXG5cclxuICAgICAgICBpZiAoaW52ZW50b3J5QW5jZXN0b3IpIHtcclxuICAgICAgICAgICAgYXBwbHlJbnZlbnRvcnlDdXJ2ZVJvdXRpbmcobGluaywgc25wb3MsIGludmVudG9yeUFuY2VzdG9yLmRhdGEubGF5b3V0KTtcclxuICAgICAgICB9IGVsc2UgaWYoaXNNdWx0aUxpbmspIHtcclxuICAgICAgICAgICAgYXBwbHlNdWx0aWxpbmtDdXJ2ZVJvdXRpbmcobGluaywgc25wb3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFwcGx5U3RyYWlnaHRSb3V0aW5nKGxpbmspO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc2hvdyBsaW5rIG9ubHkgaWYgYm90aCBjb25uZWN0ZWQgdGhpbmdzIGFyZSB2aXNpYmxlIChubyBjb2xsYXBzZWQgYW5jZXN0b3JzKTsgXHJcbiAgICAgICAgLy8gaGlkZSBpZiBib3RoIGFyZSBpbiBzdGFja2VkIGxheW91dCBvciBpZiBpdCdzIGEgUC1saW5rIHRoYXQgd2Ugc2hvdWxkbid0IGJlIHNob3dpbmcgbm93XHJcbiAgICAgICAgaWYgKHNlbGYuZnJvbUFuZFRvTm9kZXNBcmVWaXNpYmxlKGxpbmspICYmICFzdGFja2VkQW5jZXN0b3IgJiYgIWhpZGVQTGluaykge1xyXG4gICAgICAgICAgICBsaW5rLm9wYWNpdHkgPSAxO1xyXG4gICAgICAgICAgICBzaG93TGFiZWxOb2RlcyhsaW5rLCB0cnVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsaW5rLm9wYWNpdHkgPSAwO1xyXG4gICAgICAgICAgICBzaG93TGFiZWxOb2RlcyhsaW5rLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFRPRE86IGRldGVjdCB3aGVuIHRoZSBSLXRoaW5nIG92ZXJsYXBzIGJvdGggZnJvbSBhbmQgdG8gbm9kZXMsIHNvIHdlIGNhbiBjaGFuZ2UgdGhlIGxpbmsgcm91dGluZ1xyXG4gICAgZnVuY3Rpb24gaGFzQ3Jvd2RlZFJUaGluZyhsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dMYWJlbE5vZGVzKGxpbmssIHNob3cpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdzaG93TGFiZWxOb2RlcywgbGluazogJyArIGxpbmsgKyAnLCBzaG93OiAnICsgc2hvdyk7XHJcbiAgICAgICAgdmFyIGl0ID0gbGluay5sYWJlbE5vZGVzO1xyXG4gICAgICAgIGlmIChpdCkge1xyXG4gICAgICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGdyb3VwLnZpc2libGUgPSBzaG93O1xyXG4gICAgICAgICAgICAgICAgaWYgKHNob3cpIHtcclxuICAgICAgICAgICAgICAgICAgICBncm91cC5sYXlvdXQuZG9MYXlvdXQoZ3JvdXApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGxpbmsgaXMgYmV0d2VlbiB0d28gdGhpbmdzIGluIHRoZSBzYW1lIGludmVudG9yeSBsYXlvdXQgKHNpbmdsZSBvciBtdWx0aXBsZSksXHJcbiAgICAvLyBtYWtlIHRoZSBsaW5lIG1vcmUgb3IgbGVzcyBjaXJjdWxhciBvbiB0aGUgYXBwcm9wcmlhdGUgc2lkZVxyXG4gICAgZnVuY3Rpb24gYXBwbHlJbnZlbnRvcnlDdXJ2ZVJvdXRpbmcobGluaywgc25wb3MsIGFuY2VzdG9yTGF5b3V0KSB7XHJcbiAgICAgICAgaWYgKGFuY2VzdG9yTGF5b3V0ID09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICBsaW5rLmZyb21TcG90ID0gZ28uU3BvdC5MZWZ0O1xyXG4gICAgICAgICAgICBsaW5rLnRvU3BvdCA9IGdvLlNwb3QuTGVmdDtcclxuICAgICAgICB9IGVsc2UgaWYgKGFuY2VzdG9yTGF5b3V0ID09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgbGluay5mcm9tU3BvdCA9IGdvLlNwb3QuUmlnaHQ7XHJcbiAgICAgICAgICAgIGxpbmsudG9TcG90ID0gZ28uU3BvdC5SaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFzcGVjdCByYXRpbyBmb3IgdGhlIGxpbmsgY3VydmVzIC0gbWFrZSB0aGlzIHNtYWxsZXIgdG8gbWFrZSB0aGVtIHRhbGxlciwgbGFyZ2VyIHRvIG1ha2UgdGhlbSBmYXR0ZXJcclxuICAgICAgICB2YXIgY3VydmVSYXRpbyA9IDAuNjtcclxuXHJcbiAgICAgICAgdmFyIHkxID0gbGluay5mcm9tTm9kZS5hY3R1YWxCb3VuZHMueTtcclxuICAgICAgICB2YXIgeTIgPSBsaW5rLnRvTm9kZS5hY3R1YWxCb3VuZHMueTtcclxuXHJcbiAgICAgICAgdmFyIHlEaWZmID0gTWF0aC5hYnMoeTIgLSB5MSk7XHJcbiAgICAgICAgdmFyIGMgPSAoeURpZmYgPT09IDAgPyA1MCA6IE1hdGguZmxvb3IoeURpZmYgKiBjdXJ2ZVJhdGlvKSkgKyAxMDAgKiAoc25wb3MuaW5kZXggLyBzbnBvcy5jb3VudCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInlEaWZmID0gXCIgKyB5RGlmZiArICcsIGMgPSAnICsgYyArICcgKCcgKyBsaW5rLmZyb21Ob2RlLmRhdGEudGV4dCArICcgLSAnICsgcDEgKyAnIC0gdG8gJyArIGxpbmsudG9Ob2RlLmRhdGEudGV4dCArICcgLSAnICsgcDIgKyAnKScpO1xyXG5cclxuICAgICAgICBsaW5rLmN1cnZlID0gZ28uTGluay5CZXppZXI7XHJcbiAgICAgICAgbGluay5mcm9tRW5kU2VnbWVudExlbmd0aCA9IGM7XHJcbiAgICAgICAgbGluay50b0VuZFNlZ21lbnRMZW5ndGggPSBjO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIG5vbi1pbnZlbnRvcnkgbGluayBpcyBvbmUgb2YgbXVsdGlwbGUgb25lcyBiZXR3ZWVuIHNhbWUgbm9kZXMsIG1ha2UgaXQgY3VydmVkXHJcbiAgICBmdW5jdGlvbiBhcHBseU11bHRpbGlua0N1cnZlUm91dGluZyhsaW5rLCBzbnBvcykge1xyXG4gICAgICAgIGxpbmsuZnJvbVNwb3QgPSBnby5TcG90LkRlZmF1bHQ7XHJcbiAgICAgICAgbGluay50b1Nwb3QgPSBnby5TcG90LkRlZmF1bHQ7XHJcbiAgICAgICAgbGluay5jdXJ2ZSA9IGdvLkxpbmsuQmV6aWVyO1xyXG4gICAgICAgIC8vIGN1cnZpbmVzcyB2YWx1ZXMgYmFzZWQgb24gbnVtYmVyIG9mIGxpbmtzOlxyXG4gICAgICAgIC8vIDI6IC0yNSAyNVxyXG4gICAgICAgIC8vIDM6IC01MCAwIDUwXHJcbiAgICAgICAgLy8gNDogLTEwMCAtNTAgMCA1MCAxMDBcclxuICAgICAgICB2YXIgcmFuZ2VTaXplID0gMTAgKiAoc25wb3MuY291bnQgLSAxKTtcclxuICAgICAgICB2YXIgcmFuZ2VJbmNyZW1lbnQgPSAxMDtcclxuICAgICAgICBpZiAoc25wb3MuaGFzUlRoaW5nKSB7XHJcbiAgICAgICAgICAgIHJhbmdlU2l6ZSA9IDEwMCAqIChzbnBvcy5jb3VudCAtIDEpO1xyXG4gICAgICAgICAgICByYW5nZUluY3JlbWVudCA9IDEwMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFkanVzdCBjdXJ2aW5lc3MgZm9yIHNtYWxsZXIgc2NhbGVzXHJcbiAgICAgICAgdmFyIGxpbmtTY2FsZUZhY3RvciA9IHNlbGYuZ2V0TGlua1N0cm9rZVdpZHRoKGxpbmspIC8gMjsgLy8gMiBpcyBtYXggc3Ryb2tlIHdpZHRoXHJcbiAgICAgICAgcmFuZ2VTaXplICo9IGxpbmtTY2FsZUZhY3RvcjtcclxuICAgICAgICByYW5nZUluY3JlbWVudCAqPSBsaW5rU2NhbGVGYWN0b3I7XHJcblxyXG4gICAgICAgIHZhciByYW5nZVN0YXJ0ID0gMCAtIHJhbmdlU2l6ZSAvIDI7XHJcblxyXG4gICAgICAgIGxpbmsuY3VydmluZXNzID0gKHJhbmdlU3RhcnQgKyByYW5nZUluY3JlbWVudCAqIHNucG9zLmluZGV4KSAqIHNucG9zLm9yaWVudGF0aW9uO1xyXG4gICAgICAgIC8vIC8vY29uc29sZS5sb2coJ2FwcGx5TXVsdGlsaW5rQ3VydmVSb3V0aW5nLCBsaW5rOiAnICsgbGluayArICcsIGN1cnZpbmVzczogJyArIGxpbmsuY3VydmluZXNzKTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gZG8gbm9ybWFsIHN0cmFpZ2h0IGxpbmVzIGZvciBmcmVlaGFuZCBsYXlvdXQsIG9yIGxpbmtzIGJldHdlZW4gZGVzY2VuZGFudHMgb2YgdGhpbmdzIHdpdGggZGlmZmVyZW50IGxheW91dHNcclxuICAgIGZ1bmN0aW9uIGFwcGx5U3RyYWlnaHRSb3V0aW5nKGxpbmspIHtcclxuICAgICAgICBsaW5rLmZyb21TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsudG9TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsucm91dGluZyA9IGdvLkxpbmsuTm9ybWFsO1xyXG4gICAgICAgIGxpbmsuY3VydmUgPSBnby5MaW5rLkJlemllcjtcclxuICAgICAgICBsaW5rLmN1cnZpbmVzcyA9IDI1O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBjYWxjdWxhdGUgaG93IG1hbnkgbGlua3MgdGhlcmUgYXJlIGJldHdlZW4gYSBsaW5rJ3Mgbm9kZXMgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgb2YgdGhlIGZvcm1hdCB7IGluZGV4OiAxLCBjb3VudDogMiwgb3JpZW50YXRpb246IC0xLCBoYXNSVGhpbmc6IGZhbHNlIH0sIFxyXG4gICAgLy8gaW5kaWNhdGluZyBob3cgbWFueSBvdGhlciBsaW5rcyB0aGVyZSBhcmUgYmV0d2VlbiB0aGUgc2FtZSBwYWlyIG9mIG5vZGVzLFxyXG4gICAgLy8gd2hlcmUgdGhlIGdpdmVuIGxpbmsgZmFsbHMgd2l0aGluIHRoaXMgbGlzdCwgYW5kIHdoYXQgaXRzIG9yaWVudGF0aW9uIGlzLlxyXG4gICAgdGhpcy5nZXRTYW1lTm9kZXNMaW5rUG9zaXRpb24gPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgdmFyIGxpbmtzQnlOb2RlcyA9IGdldExpbmtzQnlOb2Rlcyh0cnVlKTtcclxuICAgICAgICAvLyBnZXQgbGlua3Mgd2l0aCB0aGUgc2FtZSBrZXkgYXMgdGhpcyBvbmUgKGNvbm5lY3Rpbmcgc2FtZSBub2RlcylcclxuICAgICAgICB2YXIgc2FtZUxpbmtzID0gXy53aGVyZShsaW5rc0J5Tm9kZXMsIHtcclxuICAgICAgICAgICAga2V5OiBnZXRTYW1lTm9kZXNMaW5rS2V5KGxpbmspXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGRlZmF1bHQgcmV0dXJuIHZhbHVlXHJcbiAgICAgICAgdmFyIHNucG9zID0ge1xyXG4gICAgICAgICAgICBpbmRleDogMCxcclxuICAgICAgICAgICAgY291bnQ6IDEsXHJcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAxLFxyXG4gICAgICAgICAgICBoYXNSVGhpbmc6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBzZXQgaW5kZXgsIGNvdW50LCBvcmllbnRhdGlvblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2FtZUxpbmtzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChzYW1lTGlua3NbaV0ubGluayA9PSBsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICBzbnBvcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaSxcclxuICAgICAgICAgICAgICAgICAgICBjb3VudDogc2FtZUxpbmtzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbjogZ2V0TGlua09yaWVudGF0aW9uKGxpbmspXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNoZWNrIGZvciBSdGhpbmdcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2FtZUxpbmtzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChzYW1lTGlua3NbaV0uaGFzUlRoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBzbnBvcy5oYXNSVGhpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzbnBvcztcclxuICAgIH07XHJcblxyXG4gICAgdmFyIF9saW5rc0J5Tm9kZXMgPSBudWxsO1xyXG5cclxuICAgIC8vIHJlZnJlc2hlcyB0aGUgY2FjaGVkIGxpc3Qgb2YgYWxsIGxpbmtzIHdpdGgga2V5cywgdG8gZmFjaWxpdGF0ZSBncm91cGluZyB0aGVtIGFjY29yZGluZyB0byBjb25uZWN0ZWQgbm9kZXNcclxuICAgIGZ1bmN0aW9uIGdldExpbmtzQnlOb2RlcyhyZWZyZXNoKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0TGlua3NCeU5vZGVzJyk7XHJcbiAgICAgICAgaWYgKCFzZWxmLl9saW5rc0J5Tm9kZXMgfHwgcmVmcmVzaCkge1xyXG4gICAgICAgICAgICBzZWxmLl9saW5rc0J5Tm9kZXMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgbGlua3MgPSBkaWFncmFtLmxpbmtzLml0ZXJhdG9yO1xyXG4gICAgICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGdldFNhbWVOb2Rlc0xpbmtLZXkobGluayk7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbGlua3NCeU5vZGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluazogbGluayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzUlRoaW5nOiAobGluay5sYWJlbE5vZGVzLmNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2VsZi5fbGlua3NCeU5vZGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgYSBrZXkgdXNlZCB0byBncm91cCBsaW5rcyBhY2NvcmRpbmcgdG8gd2hpY2ggcGFpciBvZiBub2RlcyB0aGV5IGNvbm5lY3QuXHJcbiAgICAvLyBUaGUgcmV0dXJuZWQga2V5IGlzIG5vbi1lbXB0eSBmb3IgcmVndWxhciBsaW5rcyBhbmQgUCBsaW5rcyB0aGF0IHNob3VsZCBiZSBzaG93biBjdXJyZW50bHksXHJcbiAgICAvLyBzbyB0aGF0IHRoZXNlIHdpbGwgYWxsIGJlIHJvdXRlZCBieSB0aGUgc2FtZSBydWxlcy4gQSBudWxsIGtleSBpcyByZXR1cm5lZCBmb3IgYW55IG90aGVyIFxyXG4gICAgLy8gbGlua3MsIGluZGljYXRpbmcgdGhhdCBubyBncm91cGluZyBpcyByZXF1aXJlZC5cclxuICAgIGZ1bmN0aW9uIGdldFNhbWVOb2Rlc0xpbmtLZXkobGluaykge1xyXG4gICAgICAgIC8vICAgICAgICBpZiAoc2VsZi5pc1JMaW5rKGxpbmspIHx8IChzZWxmLmlzUExpbmsobGluaykgJiYgbWFwLmdldFRlbXBsYXRlcygpLnNob3dQTGluayhsaW5rKSkpIHtcclxuICAgICAgICBpZiAoc2VsZi5pc1JMaW5rKGxpbmspKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBbbGluay5mcm9tTm9kZS50b1N0cmluZygpLCBsaW5rLnRvTm9kZS50b1N0cmluZygpXS5zb3J0KCkuam9pbignfCcpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdrZXk6ICcgKyBrZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBXZSB1c2UgdGhpcyB0byBkaXN0aW5ndWlzaCBhbiBBLUIgbGluayBmcm9tIGEgQi1BIGxpbmsgKGJhc2VkIG9uIGZyb21Ob2RlIGFuZCB0b05vZGUsIHdoaWNoXHJcbiAgICAvLyBpcyBpbmRlcGVuZGVudCBvZiB0aGUgYXJyb3doZWFkIHNldHRpbmdzKSB3aGVuIHNldHRpbmcgY3VydmluZXNzLCBiZWNhdXNlIHNldHRpbmcgY3VydmluZXNzID0gMjVcclxuICAgIC8vIG9uIGFuIEEtQiBsaW5rIGlzIHRoZSBzYW1lIGFzIGN1cnZpbmVzcyA9IC0yNSBvbiBhIEItQSBsaW5rLlxyXG4gICAgZnVuY3Rpb24gZ2V0TGlua09yaWVudGF0aW9uKGxpbmspIHtcclxuICAgICAgICBpZiAobGluay5mcm9tTm9kZSAmJiBsaW5rLnRvTm9kZSAmJiBsaW5rLmZyb21Ob2RlLnRvU3RyaW5nKCkgPCBsaW5rLnRvTm9kZS50b1N0cmluZygpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gbGluayB0ZXN0cyAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmlzUkxpbmsgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT09IHVuZGVmaW5lZCAmJiBsaW5rLmZyb21Ob2RlICYmIGxpbmsudG9Ob2RlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzRExpbmsgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ0QnO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzUExpbmsgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzR3JvdXAgPSBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgZ28uR3JvdXA7XHJcbiAgICB9O1xyXG59OyIsImxldCBOb2RlTGFiZWxEcmFnZ2luZ1Rvb2wgPSByZXF1aXJlKCcuL2V4dGVuc2lvbnMvTm9kZUxhYmVsRHJhZ2dpbmdUb29sLmpzJyk7XHJcblxyXG4vLyBmdW5jdGlvbnMgZm9yIGNyZWF0aW5nIGFuZCBtYW5pcHVsYXRpbmcgdGhlIG1hcCAoaS5lLiBEaWFncmFtKVxyXG5cclxuU2FuZGJhbmtFZGl0b3IuTWFwID0gZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkdGltZW91dCwgJG1vZGFsLCAkbG9nKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIGNvbnN0YW50cyAtLS0tLS0tLS0tLS0tLS1cclxuICAgIHRoaXMuTEVGVCA9ICdsZWZ0JztcclxuICAgIHRoaXMuUklHSFQgPSAncmlnaHQnO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBpbnN0YW5jZSB2YXJzIC0tLS0tLS0tLS1cclxuXHJcbiAgICB2YXIgX2RpYWdyYW0gPSBudWxsO1xyXG5cclxuICAgIC8vIGNvbXBvbmVudHNcclxuICAgIHZhciBfYW5hbHl0aWNzID0gbnVsbDtcclxuICAgIHZhciBfYXR0YWNobWVudHMgPSBudWxsO1xyXG4gICAgdmFyIF9hdXRvc2F2ZSA9IG51bGw7XHJcbiAgICB2YXIgX2dlbmVyYXRvciA9IG51bGw7XHJcbiAgICAvL3ZhciBfaGlzdG9yeSA9IG51bGw7XHJcbiAgICB2YXIgX2xheW91dHMgPSBudWxsO1xyXG4gICAgdmFyIF9wZXJzcGVjdGl2ZXMgPSBudWxsO1xyXG4gICAgdmFyIF9wcmVzZW50ZXIgPSBudWxsO1xyXG4gICAgdmFyIF9zdGFuZGFyZHMgPSBudWxsO1xyXG4gICAgdmFyIF90ZW1wbGF0ZXMgPSBudWxsO1xyXG4gICAgdmFyIF90ZXN0cyA9IG51bGw7XHJcbiAgICB2YXIgX3VpID0gbnVsbDtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gY29tcG9uZW50IGFjY2Vzc29ycyAtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50cygpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBfYW5hbHl0aWNzLFxyXG4gICAgICAgICAgICBfYXR0YWNobWVudHMsXHJcbiAgICAgICAgICAgIF9hdXRvc2F2ZSxcclxuICAgICAgICAgICAgX2dlbmVyYXRvcixcclxuICAgICAgICAgICAgLy8gX2hpc3RvcnksIFxyXG4gICAgICAgICAgICBfbGF5b3V0cyxcclxuICAgICAgICAgICAgX3BlcnNwZWN0aXZlcyxcclxuICAgICAgICAgICAgX3ByZXNlbnRlcixcclxuICAgICAgICAgICAgX3N0YW5kYXJkcyxcclxuICAgICAgICAgICAgX3RlbXBsYXRlcyxcclxuICAgICAgICAgICAgX3Rlc3RzLFxyXG4gICAgICAgICAgICBfdWlcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZ2V0QW5hbHl0aWNzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9hbmFseXRpY3M7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5nZXRBdHRhY2htZW50cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfYXR0YWNobWVudHM7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5nZXRBdXRvc2F2ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfYXV0b3NhdmU7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5nZXRHZW5lcmF0b3IgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX2dlbmVyYXRvcjtcclxuICAgIH07XHJcbiAgICAvLyB0aGlzLmdldEhpc3RvcnkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfaGlzdG9yeTsgfTtcclxuICAgIHRoaXMuZ2V0TGF5b3V0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfbGF5b3V0cztcclxuICAgIH07XHJcbiAgICB0aGlzLmdldFBlcnNwZWN0aXZlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfcGVyc3BlY3RpdmVzO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZ2V0UHJlc2VudGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9wcmVzZW50ZXI7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5nZXRTdGFuZGFyZHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX3N0YW5kYXJkcztcclxuICAgIH07XHJcbiAgICB0aGlzLmdldFRlbXBsYXRlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfdGVtcGxhdGVzO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZ2V0VGVzdHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX3Rlc3RzO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZ2V0VWkgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX3VpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBtYXAgaW5pdCAtLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBjb21wb25lbnRzXHJcbiAgICAgICAgX2FuYWx5dGljcyA9IG5ldyBTYW5kYmFua0VkaXRvci5BbmFseXRpY3MoJHNjb3BlLCAkaHR0cCwgc2VsZik7XHJcbiAgICAgICAgX2F0dGFjaG1lbnRzID0gbmV3IFNhbmRiYW5rRWRpdG9yLkF0dGFjaG1lbnRzKCRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgc2VsZik7XHJcbiAgICAgICAgX2F1dG9zYXZlID0gbmV3IFNhbmRiYW5rRWRpdG9yLkF1dG9zYXZlKCRzY29wZSwgJGh0dHAsIHNlbGYpO1xyXG4gICAgICAgIF9nZW5lcmF0b3IgPSBuZXcgU2FuZGJhbmtFZGl0b3IuR2VuZXJhdG9yKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgLy8gX2hpc3RvcnkgPSBuZXcgU2FuZGJhbmtFZGl0b3IuSGlzdG9yeSgkc2NvcGUsICRodHRwLCBzZWxmKTtcclxuICAgICAgICBfbGF5b3V0cyA9IG5ldyBTYW5kYmFua0VkaXRvci5MYXlvdXRzKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgX3BlcnNwZWN0aXZlcyA9IG5ldyBTYW5kYmFua0VkaXRvci5QZXJzcGVjdGl2ZXMoJHNjb3BlLCBzZWxmKTtcclxuICAgICAgICBfcHJlc2VudGVyID0gbmV3IFNhbmRiYW5rRWRpdG9yLlByZXNlbnRlcigkc2NvcGUsIHNlbGYpO1xyXG4gICAgICAgIF9zdGFuZGFyZHMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuU3RhbmRhcmRzKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgX3RlbXBsYXRlcyA9IG5ldyBTYW5kYmFua0VkaXRvci5UZW1wbGF0ZXMoJHNjb3BlLCBzZWxmKTtcclxuICAgICAgICBfdGVzdHMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVGVzdHMoJHNjb3BlLCBzZWxmKTtcclxuICAgICAgICBfdWkgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVUkoJHNjb3BlLCAkdGltZW91dCwgJGh0dHAsICRyZXNvdXJjZSwgJG1vZGFsLCAkbG9nLCBzZWxmKTtcclxuXHJcbiAgICAgICAgLy8gY2FsbCBpbml0IGZvciBlYWNoIGNvbXBvbmVudCwgaWYgZGVmaW5lZFxyXG4gICAgICAgIF8uZWFjaChnZXRDb21wb25lbnRzKCksIGZ1bmN0aW9uKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50ICYmIGNvbXBvbmVudC5pbml0KVxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50LmluaXQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIGRpYWdyYW1cclxuICAgICAgICBfZGlhZ3JhbSA9IG5ldyBnby5EaWFncmFtKFwiZGlhZ3JhbVwiKTtcclxuICAgICAgICBfZGlhZ3JhbS5pbml0aWFsQ29udGVudEFsaWdubWVudCA9IGdvLlNwb3QuQ2VudGVyO1xyXG4gICAgICAgIF9kaWFncmFtLmluaXRpYWxWaWV3cG9ydFNwb3QgPSBnby5TcG90LkNlbnRlcjtcclxuICAgICAgICBfZGlhZ3JhbS5pbml0aWFsRG9jdW1lbnRTcG90ID0gZ28uU3BvdC5DZW50ZXI7XHJcbiAgICAgICAgX2RpYWdyYW0uaGFzSG9yaXpvbnRhbFNjcm9sbGJhciA9IGZhbHNlO1xyXG4gICAgICAgIF9kaWFncmFtLmhhc1ZlcnRpY2FsU2Nyb2xsYmFyID0gZmFsc2U7XHJcbiAgICAgICAgX2RpYWdyYW0ucGFkZGluZyA9IDUwMDtcclxuICAgICAgICBfZGlhZ3JhbS5sYXlvdXQgPSBfbGF5b3V0cy5nZXRGcmVlaGFuZERpYWdyYW1MYXlvdXQoKTtcclxuICAgICAgICBfZGlhZ3JhbS50b29sTWFuYWdlci5tb3VzZU1vdmVUb29scy5pbnNlcnRBdCgwLCBuZXcgTm9kZUxhYmVsRHJhZ2dpbmdUb29sKCkpO1xyXG5cclxuICAgICAgICBpbml0VG9vbHMoKTtcclxuICAgICAgICBfdGVtcGxhdGVzLmluaXRUZW1wbGF0ZXMoX2RpYWdyYW0pOyAvLyBzZXQgdXAgdGVtcGxhdGVzLCBjdXN0b21pemUgdGVtcG9yYXJ5IGxpbmsgYmVoYXZpb3IgXHJcbiAgICAgICAgYWRkRGlhZ3JhbUxpc3RlbmVycygpO1xyXG5cclxuICAgICAgICBfdGVtcGxhdGVzLmFkZEV4cG9ydEZvb3RlcigpO1xyXG5cclxuICAgICAgICAvLyB3YXRjaCBmb3IgdGFiIGNoYW5nZXNcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdjdXJyZW50VGFiJywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gdGhpcyBpcyBjYWxsZWQgYnkgYSAkc2NvcGUuJHdhdGNoIGluIGluaXQoKVxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vIC8vY29uc29sZS5sb2coJ2N1cnJlbnRUYWJDaGFuZ2VkLCBuZXdWYWx1ZTogJyArIG5ld1ZhbHVlICsgJywgb2xkVmFsdWU6ICcgKyBvbGRWYWx1ZSk7XHJcbiAgICAgICAgLy8gbm90aWZ5IGFueSBpbnRlcmVzdGVkIGNvbXBvbmVudHNcclxuICAgICAgICBfLmVhY2goZ2V0Q29tcG9uZW50cygpLCBmdW5jdGlvbihjb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQuY3VycmVudFRhYkNoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5jdXJyZW50VGFiQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldERpYWdyYW0gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX2RpYWdyYW07XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIG1pc2MuIHRvb2wgY29uZmlndXJhdGlvblxyXG4gICAgZnVuY3Rpb24gaW5pdFRvb2xzKCkge1xyXG4gICAgICAgIC8vIGRpc2FibGUgY2xpY2tpbmcgb24gVGV4dEJsb2NrcyB0byBlZGl0IC0gd2Ugd2lsbCBpbnZva2UgZWRpdGluZyBpbiBvdGhlciB3YXlzXHJcbiAgICAgICAgX2RpYWdyYW0uYWxsb3dUZXh0RWRpdCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBzZWxlY3QgdGV4dCB3aGVuIGFjdGl2YXRpbmcgZWRpdG9yOyBcclxuICAgICAgICAvLyB1c2Ugc2hpZnQtZW50ZXIgdG8gY3JlYXRlIG5ldyBsaW5lcywgZW50ZXIgdG8gZmluaXNoIGVkaXRpbmcgKE5COiBlZGl0b3IgaGFzIG11bHRpbGluZT10cnVlKVxyXG4gICAgICAgIHZhciB0ZXh0VG9vbCA9IF9kaWFncmFtLnRvb2xNYW5hZ2VyLnRleHRFZGl0aW5nVG9vbDtcclxuICAgICAgICB0ZXh0VG9vbC5kb0FjdGl2YXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGdvLlRleHRFZGl0aW5nVG9vbC5wcm90b3R5cGUuZG9BY3RpdmF0ZS5jYWxsKHRleHRUb29sKTtcclxuICAgICAgICAgICAgaWYgKHRleHRUb29sLmRlZmF1bHRUZXh0RWRpdG9yICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0VG9vbC5kZWZhdWx0VGV4dEVkaXRvci5zZWxlY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0ZXh0VG9vbC5kZWZhdWx0VGV4dEVkaXRvci5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMgJiYgIWUuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ28uVGV4dEVkaXRpbmdUb29sLnByb3RvdHlwZS5hY2NlcHRUZXh0LmNhbGwodGV4dFRvb2wsIGdvLlRleHRFZGl0aW5nVG9vbC5Mb3N0Rm9jdXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gaGFuZGxlIGRlbGV0ZSBrZXkgb24gTWFjIChkZWZhdWx0IGJlaGF2aW9yIG9ubHkgdXNlcyBmbi1EZWxldGUgdG8gZGVsZXRlIGZyb20gY2FudmFzKVxyXG4gICAgICAgIF9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLmRvS2V5RG93biA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgZSA9IF9kaWFncmFtLmxhc3RJbnB1dDtcclxuICAgICAgICAgICAgdmFyIGNtZCA9IF9kaWFncmFtLmNvbW1hbmRIYW5kbGVyO1xyXG4gICAgICAgICAgICBpZiAoZS5ldmVudC53aGljaCA9PT0gOCkge1xyXG4gICAgICAgICAgICAgICAgY21kLmRlbGV0ZVNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZ28uQ29tbWFuZEhhbmRsZXIucHJvdG90eXBlLmRvS2V5RG93bi5jYWxsKGNtZCk7IC8vIGNhbGwgYmFzZSBtZXRob2Qgd2l0aCBubyBhcmd1bWVudHNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFtkaXNhYmxlIGtleWJvYXJkIHNob3J0Y3V0cywgYXMgdGhlc2UgZG8gbm90IGRvIGNlbnRlcmluZyBvbiB6b29tLCBcclxuICAgICAgICAvLyBhbmQgY2FuIGxlYWQgdG8gY29uZnVzaW9uIHdpdGggYnJvd3NlciB6b29tICh3aGljaCBnZXRzIGZpcmVkIGRlcGVuZHMgb24gZm9jdXMpXVxyXG4gICAgICAgIC8vIC0gdHVybmVkIGJhY2sgb24gdG8gc3VwcG9ydCBwaW5jaC96b29tIG9uIGlQYWRcclxuICAgICAgICBfZGlhZ3JhbS5hbGxvd1pvb20gPSB0cnVlO1xyXG5cclxuICAgICAgICBfZGlhZ3JhbS50b29sTWFuYWdlci5tb3VzZVdoZWVsQmVoYXZpb3IgPSBnby5Ub29sTWFuYWdlci5XaGVlbFpvb207XHJcblxyXG4gICAgICAgIC8vIGRlY2lkZSB3aGF0IGtpbmRzIG9mIFBhcnRzIGNhbiBiZSBhZGRlZCB0byBhIEdyb3VwIG9yIHRvIHRvcC1sZXZlbFxyXG4gICAgICAgIC8vIF9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLm1lbWJlclZhbGlkYXRpb24gPSBmdW5jdGlvbiAoZ3JwLCBub2RlKSB7XHJcbiAgICAgICAgLy8gICAgIC8vaWYgKGdycCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmIG5vZGUgaW5zdGFuY2VvZiBnby5Hcm91cCkgcmV0dXJuIGZhbHNlOyAgLy8gY2Fubm90IGFkZCBHcm91cHMgdG8gR3JvdXBzXHJcbiAgICAgICAgLy8gICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIC8vIH07XHJcblxyXG4gICAgICAgIC8vIGRlZmF1bHQgbGluayBhdHRyaWJ1dGVzXHJcbiAgICAgICAgX2RpYWdyYW0udG9vbE1hbmFnZXIubGlua2luZ1Rvb2wuYXJjaGV0eXBlTGlua0RhdGEgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdub0Fycm93cydcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBhbGxvdyBkb3VibGUtY2xpY2sgaW4gYmFja2dyb3VuZCB0byBjcmVhdGUgYSBuZXcgbm9kZVxyXG4gICAgICAgIF9kaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmFyY2hldHlwZU5vZGVEYXRhID0gZ2V0TmV3VGhpbmdEYXRhKCk7XHJcblxyXG4gICAgICAgIC8vIGhvdyBsb25nIG1vdXNlIG11c3QgYmUgaGVsZCBzdGF0aW9uYXJ5IGJlZm9yZSBzdGFydGluZyBhIGRyYWctc2VsZWN0IChpbnN0ZWFkIG9mIGEgc2Nyb2xsKSAtIGRlZmF1bHQgd2FzIDE3NW1zXHJcbiAgICAgICAgX2RpYWdyYW0udG9vbE1hbmFnZXIuZHJhZ1NlbGVjdGluZ1Rvb2wuZGVsYXkgPSA0MDA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0gaGFuZGxpbmcgb2YgRGlhZ3JhbUV2ZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZERpYWdyYW1MaXN0ZW5lcnMoKSB7XHJcblxyXG4gICAgICAgIC8vIERpYWdyYW1FdmVudHMgdG8gYmUgaGFuZGxlZCBoZXJlIG9yIGJ5IGEgY29tcG9uZW50XHJcbiAgICAgICAgdmFyIGRpYWdyYW1FdmVudHMgPSBbXHJcbiAgICAgICAgICAgIFwiSW5pdGlhbExheW91dENvbXBsZXRlZFwiLFxyXG4gICAgICAgICAgICBcIkNoYW5nZWRTZWxlY3Rpb25cIixcclxuICAgICAgICAgICAgXCJCYWNrZ3JvdW5kU2luZ2xlQ2xpY2tlZFwiLFxyXG4gICAgICAgICAgICBcIlNlbGVjdGlvbkNvcGllZFwiLFxyXG4gICAgICAgICAgICBcIlNlbGVjdGlvbk1vdmVkXCIsXHJcbiAgICAgICAgICAgIFwiU2VsZWN0aW9uRGVsZXRpbmdcIixcclxuICAgICAgICAgICAgXCJTZWxlY3Rpb25EZWxldGVkXCIsXHJcbiAgICAgICAgICAgIFwiUGFydENyZWF0ZWRcIixcclxuICAgICAgICAgICAgXCJQYXJ0UmVzaXplZFwiLFxyXG4gICAgICAgICAgICBcIkNsaXBib2FyZENoYW5nZWRcIixcclxuICAgICAgICAgICAgXCJDbGlwYm9hcmRQYXN0ZWRcIixcclxuICAgICAgICAgICAgXCJMaW5rRHJhd25cIixcclxuICAgICAgICAgICAgXCJMaW5rUmVsaW5rZWRcIixcclxuICAgICAgICAgICAgXCJWaWV3cG9ydEJvdW5kc0NoYW5nZWRcIlxyXG4gICAgICAgIF07XHJcbiAgICAgICAgXy5lYWNoKGRpYWdyYW1FdmVudHMsIGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xyXG4gICAgICAgICAgICBfZGlhZ3JhbS5hZGREaWFncmFtTGlzdGVuZXIoZXZlbnROYW1lLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICBicm9hZGNhc3REaWFncmFtRXZlbnQoZXZlbnROYW1lLCBlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIF9kaWFncmFtLmFkZERpYWdyYW1MaXN0ZW5lcihcIkJhY2tncm91bmRDb250ZXh0Q2xpY2tlZFwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHR1cm4gb2ZmIGluIHByb2R1Y3Rpb25cclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZGlhZ3JhbSBtb2RlbDonICsgX2RpYWdyYW0ubW9kZWwudG9Kc29uKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGJyb2FkY2FzdHMgdGhlIGdpdmVuIERpYWdyYW1FdmVudCAoc2VlIGFwaWRvY3MgZm9yIGdvLkRpYWdyYW1FdmVudClcclxuICAgIC8vIHRvIGFueSBjb21wb25lbnRzIHRoYXQgbWF5IGJlIGludGVyZXN0ZWQsIGluY2x1ZGluZyB0aGlzIG9uZS5cclxuICAgIGZ1bmN0aW9uIGJyb2FkY2FzdERpYWdyYW1FdmVudChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBzZWxmLmhhbmRsZURpYWdyYW1FdmVudChldmVudE5hbWUsIGUpO1xyXG4gICAgICAgIF8uZWFjaChnZXRDb21wb25lbnRzKCksIGZ1bmN0aW9uKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50ICYmIGNvbXBvbmVudC5oYW5kbGVEaWFncmFtRXZlbnQpXHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuaGFuZGxlRGlhZ3JhbUV2ZW50KGV2ZW50TmFtZSwgZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaGFuZGxlRGlhZ3JhbUV2ZW50ID0gZnVuY3Rpb24oZXZlbnROYW1lLCBlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaGFuZGxlRGlhZ3JhbUV2ZW50OiAnICsgZXZlbnROYW1lKTtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xyXG4gICAgICAgICAgICBjaGFuZ2VkU2VsZWN0aW9uKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25Db3BpZWQnKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGlvbkNvcGllZChlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnUGFydENyZWF0ZWQnKSB7XHJcbiAgICAgICAgICAgIHBhcnRDcmVhdGVkKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdCYWNrZ3JvdW5kU2luZ2xlQ2xpY2tlZCcpIHtcclxuICAgICAgICAgICAgX3VpLnNob3dIZWxwVGlwKCdjYW52YXNUaXAnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnTGlua0RyYXduJykge1xyXG4gICAgICAgICAgICBsaW5rRHJhd24oZSk7XHJcbiAgICAgICAgICAgIHNldE5ld0xpbmtEaXJlY3Rpb24oZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ0xpbmtSZWxpbmtlZCcpIHtcclxuICAgICAgICAgICAgbGlua1JlbGlua2VkKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdDbGlwYm9hcmRDaGFuZ2VkJykge1xyXG4gICAgICAgICAgICBjbGlwYm9hcmRDaGFuZ2VkKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdDbGlwYm9hcmRQYXN0ZWQnKSB7XHJcbiAgICAgICAgICAgIGNsaXBib2FyZFBhc3RlZChlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGhhbmRsZSB6b29tIHRvIHJlZ2lvbiBpZiBhcHBsaWNhYmxlXHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VkU2VsZWN0aW9uKGUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdtYXAuY2hhbmdlZFNlbGVjdGlvbicpO1xyXG4gICAgICAgIF9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgX3VpLm1heWJlWm9vbVRvUmVnaW9uKCk7XHJcbiAgICAgICAgaWYgKHNlbGYucmVsYXRpb25zaGlwc1NlbGVjdGVkKCkpIHtcclxuICAgICAgICAgICAgX3VpLnNob3dIZWxwVGlwKCdyZWxhdGlvbnNoaXBUaXAnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcGFydENyZWF0ZWQoZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ01hcCwgUGFydENyZWF0ZWQnKTtcclxuICAgICAgICB2YXIgZ3JvdXAgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKCEoZ3JvdXAgaW5zdGFuY2VvZiBnby5Hcm91cCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ2xheW91dCcsIF91aS5nZXRNYXBFZGl0b3JPcHRpb25zKCkuZGVmYXVsdFRoaW5nTGF5b3V0IHx8ICdsZWZ0Jyk7XHJcbiAgICAgICAgX2xheW91dHMuc2V0TmV3UGFydExvY2F0aW9uRGF0YShlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmaXggbGluayBwb3J0cyB3aGVuIGEgbGluayBpcyBjcmVhdGVkIC0gXHJcbiAgICAvLyB0aGUgUCBhbmQgUiBwb3J0cyBib3RoIGNvdmVyIHRoZSB3aG9sZSBub2RlLCBhbmQgdGhlIFAgcG9ydCBpcyBvbiB0b3Agb2YgdGhlIFIgcG9ydCwgXHJcbiAgICAvLyBzbyBib3RoIFAgYW5kIFIgbGlua3MgZ2V0IHRoZSB0b1BvcnQgc2V0IHRvIFAgYnkgZGVmYXVsdC5cclxuICAgIGZ1bmN0aW9uIGxpbmtEcmF3bihlKSB7XHJcbiAgICAgICAgdmFyIGxpbmsgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnbGlua0RyYXduLCBsaW5rOiAnICsgbGluayArICcsIGZyb21Qb3J0OiAnICsgbGluay5mcm9tUG9ydElkICsgJywgdG9Qb3J0OiAnICsgbGluay50b1BvcnRJZCk7XHJcbiAgICAgICAgaWYgKGxpbmsuZnJvbVBvcnRJZCA9PSAnUCcpIHtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIGNhdGVnb3J5XCIpO1xyXG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndG9Qb3J0JywgJ1AnKTtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ2NhdGVnb3J5JywgJ1AnKTtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayBjYXRlZ29yeVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcHJldmVudCBsaW5rcyBmcm9tIFIgdG8gUFxyXG4gICAgICAgIGVsc2UgaWYgKGxpbmsuZnJvbVBvcnRJZCA9PSAnUicpIHtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHRvUG9ydFwiKTtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ3RvUG9ydCcsICdSJyk7XHJcbiAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgdG9Qb3J0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBmaXggbGluayBwb3J0cyB3aGVuIGEgbGluayBpcyByZWxpbmtlZCAtIFxyXG4gICAgLy8gZHJhZ2dpbmcgZWl0aGVyIGVuZCBvZiBhbiBSLWxpbmsgdG8gYW5vdGhlciBub2RlIHdpbGwgc2V0IHRoZSBjb3JyZXNwb25kaW5nIHBvcnQgdG8gUCwgXHJcbiAgICAvLyBzaW5jZSBQIHBvcnQgaXMgb24gdG9wIG9mIFIgcG9ydCwgc28gd2UgcmVzZXQgYm90aCBwb3J0cyB0byBSIGlmIHRoZSBjYXRlZ29yeSBpcyBub3QgUC5cclxuICAgIGZ1bmN0aW9uIGxpbmtSZWxpbmtlZChlKSB7XHJcbiAgICAgICAgdmFyIGxpbmsgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PT0gdW5kZWZpbmVkIHx8IGxpbmsuZGF0YS5jYXRlZ29yeSAhPT0gJ1AnKSB7XHJcbiAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShsaW5rLmRhdGEsICdmcm9tUG9ydCcsICdSJyk7XHJcbiAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShsaW5rLmRhdGEsICd0b1BvcnQnLCAnUicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXROZXdMaW5rRGlyZWN0aW9uKGUpIHtcclxuICAgICAgICB2YXIgbGluayA9IGUuc3ViamVjdDtcclxuICAgICAgICBpZiAobGluay5mcm9tUG9ydElkID09ICdSJykge1xyXG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgZGlyZWN0aW9uXCIpO1xyXG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndHlwZScsIF91aS5nZXRNYXBFZGl0b3JPcHRpb25zKCkuZGVmYXVsdFJlbGF0aW9uc2hpcERpcmVjdGlvbik7XHJcbiAgICAgICAgICAgIF9kaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgZGlyZWN0aW9uXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjbGlwYm9hcmRDaGFuZ2VkKGUpIHtcclxuICAgICAgICB2YXIgcGFydHMgPSBlLnN1YmplY3QuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKHBhcnRzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGlwYm9hcmRDaGFuZ2VkOiBwYXJ0ICcgKyBwYXJ0ICsgJywgbWFpbnBhbmVsIHNjYWxlOiAnICsgcGFydC5maW5kT2JqZWN0KCdtYWlucGFuZWwnKS5zY2FsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTkI6IHRoaXMgaXMgY2FsbGVkIHdoZW4gcGFydHMgYXJlIGNvcGllZCBieSBjb250cm9sLWRyYWcsIE5PVCB3aGVuIHRoZSBjb3B5IGJ1dHRvbiBpcyBjbGlja2VkXHJcbiAgICBmdW5jdGlvbiBzZWxlY3Rpb25Db3BpZWQoZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NlbGVjdGlvbkNvcGllZCcpO1xyXG4gICAgICAgIHZhciBwYXJ0cyA9IGUuc3ViamVjdC5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgcGFydC5pc1RvcExldmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jID0gZ28uUG9pbnQucGFyc2UocGFydC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdzZWxlY3Rpb25Db3BpZWQ6IHVwZGF0aW5nIGxvYyBvZiBwYXJ0ICcgKyBwYXJ0ICsgJyA9ICcgKyBsb2MgKyAnLCBzY2FsZTogJyArIHBhcnQuc2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHBhcnQuZGF0YSwgJ2xvYycsIChsb2MueCArIDUwKSArICcgJyArIChsb2MueSArIDUwKSk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0LnVwZGF0ZVRhcmdldEJpbmRpbmdzKCdsb2MnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjbGlwYm9hcmRQYXN0ZWQoZSkge1xyXG4gICAgICAgIHZhciBwYXJ0cyA9IGUuc3ViamVjdC5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgcGFydC5pc1RvcExldmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jID0gZ28uUG9pbnQucGFyc2UocGFydC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGlwYm9hcmRQYXN0ZWQ6IHVwZGF0aW5nIGxvYyBvZiBwYXJ0ICcgKyBwYXJ0ICsgJyA9ICcgKyBsb2MgKyAnLCBzY2FsZTogJyArIHBhcnQuc2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHBhcnQuZGF0YSwgJ2xvYycsIChsb2MueCArIDUwKSArICcgJyArIChsb2MueSArIDUwKSk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0LnVwZGF0ZVRhcmdldEJpbmRpbmdzKCdsb2MnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBjb21wdXRlcyB0aGUgYm91bmRzIG9mIGFsbCBncm91cHMgaW4gdGhlIGRpYWdyYW0gLSB0aGlzIGluY2x1ZGVzIGFsbCBpZGVhcy90aGluZ3MsIFxyXG4gICAgLy8gYW5kIGV4Y2x1ZGVzIG5vZGVzLCBpbmNsdWRpbmcgc2xpZGVzLCB0aGUgc2xpZGUgYmxvY2tlciwgYW5kIHRoZSBleHBvcnQgZm9vdGVyXHJcbiAgICB0aGlzLmNvbXB1dGVNYXBCb3VuZHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZ3JvdXBzID0gbmV3IGdvLkxpc3QoZ28uR3JvdXApO1xyXG4gICAgICAgIHZhciBub2RlcyA9IF9kaWFncmFtLm5vZGVzO1xyXG4gICAgICAgIHdoaWxlIChub2Rlcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGVzLnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIGdyb3Vwcy5hZGQobm9kZXMudmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfZGlhZ3JhbS5jb21wdXRlUGFydHNCb3VuZHMoZ3JvdXBzKS5jb3B5KCk7IC8vIHJldHVybiBhIG11dGFibGUgcmVjdFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gd2hhdCBpcyBjdXJyZW50bHkgc2VsZWN0ZWQ/IC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRydWUgaWYgYWxsIHNlbGVjdGVkIGl0ZW1zIGFyZSB0aGluZ3MgKGkuZS4gR3JvdXBzKSwgaW5jbHVkaW5nIHItdGhpbmdzXHJcbiAgICB0aGlzLnRoaW5nc1NlbGVjdGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKF9kaWFncmFtID09IG51bGwgfHwgX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgaXQgPSBfZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIShpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIHRydWUgaWYgZXhhY3RseSBvbmUgdGhpbmcgKEdyb3VwKSBpcyBzZWxlY3RlZFxyXG4gICAgdGhpcy50aGluZ1NlbGVjdGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9kaWFncmFtICE9PSBudWxsICYmIF9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA9PSAxICYmIF9kaWFncmFtLnNlbGVjdGlvbi5maXJzdCgpIGluc3RhbmNlb2YgZ28uR3JvdXA7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGlmIGEgc2luZ2xlIGdyb3VwIGlzIHNlbGVjdGVkLCByZXR1cm5zIGl0LCBvdGhlcndpc2UgcmV0dXJucyBudWxsXHJcbiAgICB0aGlzLmdldFVuaXF1ZVRoaW5nU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoX2RpYWdyYW0gIT09IG51bGwgJiYgX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50ID09IDEgJiYgX2RpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCkgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2RpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRoaW5nc1NlbGVjdGVkQXJlTWVtYmVyc09mID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICBpZiAoX2RpYWdyYW0gPT09IG51bGwgfHwgX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgaXQgPSBfZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIShpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSB8fCBpdC52YWx1ZS5jb250YWluaW5nR3JvdXAgIT0gZ3JvdXApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50aGluZ3NTZWxlY3RlZEFyZURlc2NlbmRhbnRzT2YgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIGlmIChfZGlhZ3JhbSA9PT0gbnVsbCB8fCBfZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciBpdCA9IF9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBhbmNlc3RvcnMgPSBfbGF5b3V0cy5nZXRBbmNlc3Rvckdyb3VwcyhpdC52YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmIChfLmluZGV4T2YoYW5jZXN0b3JzLCBncm91cCkgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50aGluZ3NTZWxlY3RlZEluY2x1ZGVTbGlkZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChfZGlhZ3JhbSA9PT0gbnVsbCB8fCBfZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciBpdCA9IF9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChpdC52YWx1ZS5kYXRhICYmIGl0LnZhbHVlLmRhdGEuY2F0ZWdvcnkgPT0gJ3NsaWRlJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIGFsbCBzZWxlY3RlZCBpdGVtcyBhcmUgcmVsYXRpb25zaGlwcyAoaS5lLiBMaW5rcylcclxuICAgIHRoaXMucmVsYXRpb25zaGlwc1NlbGVjdGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKF9kaWFncmFtID09PSBudWxsIHx8IF9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGl0ID0gX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5MaW5rKSB8fCAhX2xheW91dHMuaXNSTGluayhpdC52YWx1ZSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIGV4YWN0bHkgb25lIHJlbGF0aW9uc2hpcCAoTGluaykgaXMgc2VsZWN0ZWRcclxuICAgIHRoaXMucmVsYXRpb25zaGlwU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX2RpYWdyYW0gIT09IG51bGwgJiYgX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50ID09IDEgJiYgX2RpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCkgaW5zdGFuY2VvZiBnby5MaW5rO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gbG9hZCBhbmQgaW5pdGlhbGl6ZSBtb2RlbCAtLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5yZWxvYWQgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbihkYXRhKTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGRDaGFuZ2VkTGlzdGVuZXIoX2F1dG9zYXZlLm1vZGVsQ2hhbmdlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sb2FkID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgXHJcbiAgICAgICAgZGF0YSA9IGRhdGEgfHwgJHNjb3BlLm1hcERhdGEuZGF0YTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbCA9IGdvLk1vZGVsLmZyb21Kc29uKGRhdGEpO1xyXG4gICAgICAgIF91aS5zZXRTdGF0ZURhdGEoJHNjb3BlLm1hcERhdGEuc3RhdGVfZGF0YSk7XHJcbiAgICAgICAgX3VpLnNldE1hcEVkaXRvck9wdGlvbnMoJHNjb3BlLm1hcERhdGEuZWRpdG9yX29wdGlvbnMpO1xyXG5cclxuICAgICAgICBzZWxmLmNoZWNrTW9kZWwoKTtcclxuICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIF9kaWFncmFtLnVuZG9NYW5hZ2VyLmlzRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkQ2hhbmdlZExpc3RlbmVyKF9hdXRvc2F2ZS5tb2RlbENoYW5nZWQpO1xyXG4gICAgICAgIF9hdXRvc2F2ZS5zYXZlT25Nb2RlbENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIF9kaWFncmFtLmlzUmVhZE9ubHkgPSAhJHNjb3BlLmNhbkVkaXQ7XHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZUVkaXRTdGF0dXMoJHNjb3BlLmNhbkVkaXQgPyAkc2NvcGUuTEFTVF9VUERBVEVEIDogJHNjb3BlLlJFQURfT05MWSk7XHJcbiAgICAgICAgLy9fdWkucmVzZXRab29tKCk7XHJcbiAgICAgICAgc2VsZi5sb2FkTWFwRXh0cmFEYXRhKCRzY29wZS5tYXBEYXRhKTtcclxuXHJcbiAgICAgICAgLy8gaWYgbm8gbm9kZXMgT1IgaW4gdGhpbmtxdWVyeSBtb2RlLCBsYXVuY2ggZ2VuZXJhdG9yXHJcbiAgICAgICAgaWYgKCRzY29wZS50aGlua3F1ZXJ5IHx8ICFfZGlhZ3JhbS5tb2RlbC5ub2RlRGF0YUFycmF5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBfdWkub3BlblRhYihfdWkuVEFCX0lEX0dFTkVSQVRPUik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHdlIGhhdmUgc2xpZGVzLCBwbGF5IHByZXNlbnRhdGlvblxyXG4gICAgICAgIGVsc2UgaWYgKCEkc2NvcGUuY2FuRWRpdCAmJiBfcHJlc2VudGVyLmdldFNsaWRlTm9kZURhdGFzKCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIF9wcmVzZW50ZXIucGxheVNsaWRlKDEpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxvYWRGb3JTYW5kYm94ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbigkc2NvcGUubWFwRGF0YSk7XHJcbiAgICAgICAgX3VpLnNldFN0YXRlRGF0YSgnJyk7IC8vIGltcG9ydGFudCEgKG90aGVyd2lzZSBjb3JuZXIgaGlnaGxpZ2h0aW5nIGJyZWFrcylcclxuICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIF9kaWFncmFtLnVuZG9NYW5hZ2VyLmlzRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgX3VpLnJlc2V0Wm9vbSgpO1xyXG4gICAgICAgICRzY29wZS5jYW5FZGl0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8gaWYgbm8gbm9kZXMgT1IgaW4gdGhpbmtxdWVyeSBtb2RlLCBsYXVuY2ggZ2VuZXJhdG9yXHJcbiAgICAgICAgaWYgKCRzY29wZS50aGlua3F1ZXJ5KSB7XHJcbiAgICAgICAgICAgIF91aS5vcGVuVGFiKF91aS5UQUJfSURfR0VORVJBVE9SKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBzbGlkZXMsIHBsYXkgcHJlc2VudGF0aW9uXHJcbiAgICAgICAgZWxzZSBpZiAoX3ByZXNlbnRlci5nZXRTbGlkZU5vZGVEYXRhcygpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBfcHJlc2VudGVyLnBsYXlTbGlkZSgxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBmaXggYW55IHN0cnVjdHVyYWwgcHJvYmxlbXMgaW4gdGhlIG1vZGVsIGJlZm9yZSBkaXNwbGF5aW5nIGl0XHJcbiAgICB0aGlzLmNoZWNrTW9kZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBjaGFuZ2UgXCJpc0xpbmtMYWJlbFwiIHByb3BlcnR5IHRvIGNhdGVnb3J5OlwiTGlua0xhYmVsXCIgKGNoYW5nZSBhcyBvZiBnb0pTIDEuMylcclxuICAgICAgICBfLmVhY2goX2RpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheSwgZnVuY3Rpb24obm9kZURhdGEsIGluZGV4LCBsaXN0KSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlRGF0YS5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIG5vZGVEYXRhLmlzTGlua0xhYmVsO1xyXG4gICAgICAgICAgICAgICAgbm9kZURhdGEuY2F0ZWdvcnkgPSBcIkxpbmtMYWJlbFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGZvciB0aGUgbGluayBsYWJlbCAoci10aGluZykgZm9yIGEgbGluayBiZWluZyB0aGUgc2FtZSBhcyB0aGUgZnJvbSBvciB0byBub2RlIFxyXG4gICAgICAgIC8vIC0gdGhpcyBjYW4gY2F1c2UgaW5maW5pdGUgcmVjdXJzaW9uIGluIHRoaW5rcyBsaWtlIGxheW91dC5nZXRTY2FsZVxyXG4gICAgICAgIF8uZWFjaChfZGlhZ3JhbS5tb2RlbC5saW5rRGF0YUFycmF5LCBmdW5jdGlvbihsaW5rRGF0YSwgaW5kZXgsIGxpc3QpIHtcclxuICAgICAgICAgICAgdmFyIGJhZExhYmVsS2V5cyA9IFtdO1xyXG4gICAgICAgICAgICBfLmVhY2gobGlua0RhdGEubGFiZWxLZXlzLCBmdW5jdGlvbihrZXksIGluZGV4MiwgbGlzdDIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gbGlua0RhdGEuZnJvbSB8fCBrZXkgPT0gbGlua0RhdGEudG8pIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdsYWJlbEtleSBzYW1lIGFzIGZyb20gb3IgdG8gb2YgbGluazogJyArIGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFkTGFiZWxLZXlzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxpbmtEYXRhLmxhYmVsS2V5cyA9IF8uZGlmZmVyZW5jZShsaW5rRGF0YS5sYWJlbEtleXMsIGJhZExhYmVsS2V5cyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGxvYWRzIG90aGVyIGRhdGEgYmVzaWRlcyB0aGUgZGlhZ3JhbSBtb2RlbCBmcm9tIHRoZSBqc29uIG9iamVjdCByZXR1cm5lZCBieSBtYXBzL3Nob3cuanNvblxyXG4gICAgLy8gLSB0aGlzIGluY2x1ZGVzIHBvaW50cywgYmFkZ2VzLCB2ZXJzaW9ucywgYW5kIG1hcCBhbmFseXRpY3NcclxuICAgIC8vIE5COiBwb2ludHMgYW5kIGJhZGdlcyBhcmUgc2V0IGF0IHBhZ2UgbG9hZCB0aW1lIGluIGxheW91dHMvdXNlciBhbmQgdXNlcnMvYmFkZ2VzLCBidXRcclxuICAgIC8vIHdlIGFsc28gbmVlZCB0byBiZSBhYmxlIHRvIHVwZGF0ZSB0aGVtIGhlcmUgYWZ0ZXIgYW4gYXV0b3NhdmVcclxuXHJcbiAgICAvLyBUT0RPOiBpcyB0aGlzIHN0aWxsIGFsbCBuZWVkZWQgd2l0aCB0aGUgbmV3ZXIgdXNlclByb2ZpbGUgc3R1ZmY/XHJcbiAgICB0aGlzLmxvYWRNYXBFeHRyYURhdGEgPSBmdW5jdGlvbihtYXBEYXRhKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbWFwLmxvYWRNYXBFeHRyYURhdGEsIG1hcERhdGE6ICcgKyBtYXBEYXRhKTtcclxuICAgICAgICAgICAgJHNjb3BlLm1hcFVzZXJUYWdzID0gbWFwRGF0YS5tZXRhZGF0YS51c2VyVGFnczsgLy8gVE9ETzogaXMgdGhpcyB1c2VkIGFueXdoZXJlP1xyXG5cclxuICAgICAgICAgICAgLy8kc2NvcGUubWFwLmdldEhpc3RvcnkoKS52ZXJzaW9uTGlzdCA9IG1hcERhdGEudmVyc2lvbnM7XHJcbiAgICAgICAgICAgICRzY29wZS5tYXAuZ2V0QW5hbHl0aWNzKCkubWFwQW5hbHl0aWNzID0gbWFwRGF0YS5hbmFseXRpY3M7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGxvYWRzIG1vZGVsIGRhdGEgZm9yIGFuIGluZGl2aWR1YWwgdmVyc2lvbiBhbmQgZGlzcGxheXMgaXRcclxuICAgIC8vIE5COiB0aGlzIGFsc28gZGlzYWJsZXMgYXV0b3NhdmU7IGxvYWQoKSBtdXN0IGJlIGNhbGxlZCB0byByZS1lbmFibGUgaXRcclxuICAgIHRoaXMubG9hZFZlcnNpb24gPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICRodHRwLmdldCgnL21hcF92ZXJzaW9ucy8nICsgaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xvYWRlZCBtYXAgdmVyc2lvbiB3aXRoIElEOiAnICsgaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24ocmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBfZGlhZ3JhbS51bmRvTWFuYWdlci5pc0VuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBfYXV0b3NhdmUuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBfZGlhZ3JhbS5pc1JlYWRPbmx5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgnQ291bGQgbm90IGxvYWQgTWV0YU1hcCB2ZXJzaW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmVycm9yKGUubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0IHdoZXRoZXIgZWRpdGluZyBjYXBhYmlsaXR5IGlzIHRlbXBvcmFyaWx5IHN1c3BlbmRlZCAtXHJcbiAgICAvLyB0aGlzIGlzIGRpc3RpbmN0IGZyb20gdGhlIGdsb2JhbCAkc2NvcGUuY2FuRWRpdCBzZXR0aW5nLFxyXG4gICAgLy8gd2hpY2ggaWYgZmFsc2UgcHJldmVudHMgZWRpdGluZyBhdCBhbGwgdGltZXNcclxuICAgIHRoaXMuc2V0RWRpdGluZ0Jsb2NrZWQgPSBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgX2RpYWdyYW0uaXNSZWFkT25seSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0gY3JlYXRpbmcgdGhpbmdzIGluIHRoZSBtb2RlbCAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gZGVmYXVsdCBwcm9wZXJ0aWVzIGZvciBhbGwgbmV3IFRoaW5ncyAoZ3JvdXBzKSAtIG5vdGUgdGhhdCB0aGVzZSBjYW4gYmUgb3ZlcnJpZGRlbiBpZiBuZWVkZWRcclxuICAgIGZ1bmN0aW9uIGdldE5ld1RoaW5nRGF0YSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0ZXh0OiAnSWRlYScsXHJcbiAgICAgICAgICAgIGlzR3JvdXA6IHRydWUsXHJcbiAgICAgICAgICAgIGxheW91dDogX3VpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5kZWZhdWx0VGhpbmdMYXlvdXQgfHwgJ2xlZnQnLFxyXG4gICAgICAgICAgICBzRXhwYW5kZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIHBFeHBhbmRlZDogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jcmVhdGVTaXN0ZXIgPSBmdW5jdGlvbih0aGluZykge1xyXG4gICAgICAgIGlmICghJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbmV3TG9jID0gX2xheW91dHMuZ2V0TmV3U2lzdGVyTG9jYXRpb24odGhpbmcpO1xyXG4gICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQoZ2V0TmV3VGhpbmdEYXRhKCksIHtcclxuICAgICAgICAgICAgZ3JvdXA6IHRoaW5nLmRhdGEuZ3JvdXAsXHJcbiAgICAgICAgICAgIHRleHQ6ICdJZGVhJyxcclxuICAgICAgICAgICAgbG9jOiBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLmFkZE5vZGVEYXRhKGRhdGEpO1xyXG4gICAgICAgIHZhciBuZXdTaXN0ZXIgPSBfZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XHJcblxyXG4gICAgICAgIC8vIHB1dCBuZXcgc2lzdGVyIHJpZ2h0IGFmdGVyIHRoaW5nIChub3QgYXMgdGhlIGxhc3Qgc2libGluZylcclxuICAgICAgICBpZiAodGhpbmcuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgIHNlbGYubW92ZVNpYmxpbmdOZXh0VG8obmV3U2lzdGVyLCB0aGluZywgc2VsZi5SSUdIVCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdTaXN0ZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlUlRvU2lzdGVyID0gZnVuY3Rpb24odGhpbmcpIHtcclxuICAgICAgICBpZiAoISRzY29wZS5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRoaW5nS2V5ID0gX2RpYWdyYW0ubW9kZWwuZ2V0S2V5Rm9yTm9kZURhdGEodGhpbmcuZGF0YSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygndGhpbmdLZXk6ICcgKyB0aGluZ0tleSk7XHJcbiAgICAgICAgdmFyIG5ld0xvYyA9IF9sYXlvdXRzLmdldE5ld1Npc3RlckxvY2F0aW9uKHRoaW5nLCB0cnVlKTsgLy8gd2l0aFIgPSB0cnVlXHJcbiAgICAgICAgdmFyIGRhdGEgPSBfLmV4dGVuZChnZXROZXdUaGluZ0RhdGEoKSwge1xyXG4gICAgICAgICAgICBncm91cDogdGhpbmcuZGF0YS5ncm91cCxcclxuICAgICAgICAgICAgdGV4dDogJ0lkZWEnLFxyXG4gICAgICAgICAgICBsb2M6IGdvLlBvaW50LnN0cmluZ2lmeShuZXdMb2MpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoZGF0YSk7XHJcbiAgICAgICAgdmFyIG5ld1Npc3RlciA9IF9kaWFncmFtLmZpbmROb2RlRm9yRGF0YShkYXRhKTtcclxuICAgICAgICB2YXIgZ3JvdXBLZXkgPSBfZGlhZ3JhbS5tb2RlbC5nZXRLZXlGb3JOb2RlRGF0YShkYXRhKTtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIGxpbmtcclxuICAgICAgICB2YXIgbGlua0RhdGEgPSB7XHJcbiAgICAgICAgICAgIGZyb206IHRoaW5nS2V5LFxyXG4gICAgICAgICAgICB0bzogZ3JvdXBLZXksXHJcbiAgICAgICAgICAgIHR5cGU6ICd0bycsXHJcbiAgICAgICAgICAgIGZyb21Qb3J0OiAnUicsXHJcbiAgICAgICAgICAgIHRvUG9ydDogJ1InXHJcbiAgICAgICAgfTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGRMaW5rRGF0YShsaW5rRGF0YSk7XHJcblxyXG4gICAgICAgIC8vIHB1dCBuZXcgc2lzdGVyIHJpZ2h0IGFmdGVyIHRoaW5nIChub3QgYXMgdGhlIGxhc3Qgc2libGluZylcclxuICAgICAgICBpZiAodGhpbmcuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgIHNlbGYubW92ZVNpYmxpbmdOZXh0VG8obmV3U2lzdGVyLCB0aGluZywgc2VsZi5SSUdIVCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdTaXN0ZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlQ2hpbGQgPSBmdW5jdGlvbih0aGluZywgbmFtZSwgeCwgeSkge1xyXG4gICAgICAgIGlmICghJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbmV3TG9jID0gX2xheW91dHMuZ2V0TmV3Q2hpbGRMb2NhdGlvbjIodGhpbmcpO1xyXG4gICAgICAgIGlmICh4IHx8IHkpIHtcclxuICAgICAgICAgICAgbmV3TG9jID0gbmV3IGdvLlBvaW50KHgsIHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZGF0YSA9IF8uZXh0ZW5kKGdldE5ld1RoaW5nRGF0YSgpLCB7XHJcbiAgICAgICAgICAgIGdyb3VwOiB0aGluZy5kYXRhLmtleSxcclxuICAgICAgICAgICAgdGV4dDogbmFtZSB8fCAnUGFydCcsXHJcbiAgICAgICAgICAgIGxvYzogZ28uUG9pbnQuc3RyaW5naWZ5KG5ld0xvYylcclxuICAgICAgICB9KTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICBfbGF5b3V0cy5zZXREZXNjZW5kYW50TGF5b3V0cyh0aGluZywgdGhpbmcuZGF0YS5sYXlvdXQpO1xyXG4gICAgICAgIHZhciBjaGlsZCA9IF9kaWFncmFtLmZpbmROb2RlRm9yRGF0YShkYXRhKTtcclxuICAgICAgICBjaGlsZC51cGRhdGVUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGVSVGhpbmcgPSBmdW5jdGlvbihsaW5rLCBuYW1lKSB7XHJcbiAgICAgICAgaWYgKCEkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIC8vY29uc29sZS5sb2coJ2NyZWF0ZVJUaGluZywgbGluazogJyArIGxpbmsgKyAnLCBuYW1lOiAnICsgbmFtZSk7XHJcbiAgICAgICAgLy8gZG9uJ3QgYWxsb3cgbXVsdGlwbGUgUi10aGluZ3NcclxuICAgICAgICBpZiAobGluay5pc0xhYmVsZWRMaW5rKSB7XHJcbiAgICAgICAgICAgIC8vIC8vY29uc29sZS5sb2coJ2Nhbm5vdCBjcmVhdGUgUlRoaW5nLCBsaW5rIGlzIGFscmVhZHkgbGFiZWxlZCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZGF0YSA9IF8uZXh0ZW5kKGdldE5ld1RoaW5nRGF0YSgpLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IG5hbWUgfHwgJ1JlbGF0aW9uc2hpcCBJZGVhJyxcclxuICAgICAgICAgICAgLy9pc0xpbmtMYWJlbDogdHJ1ZSwgICAgIC8vIGRlcHJlY2F0ZWQgYXMgb2YgZ29KUyAxLjNcclxuICAgICAgICAgICAgY2F0ZWdvcnk6IFwiTGlua0xhYmVsXCIsIC8vIG5ldyBhcyBvZiBnb0pTIDEuM1xyXG4gICAgICAgICAgICBsb2M6ICcwIDAnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNyZWF0ZSBSIFRoaW5nXCIpO1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLmFkZE5vZGVEYXRhKGRhdGEpO1xyXG4gICAgICAgIHZhciBrZXkgPSBfZGlhZ3JhbS5tb2RlbC5nZXRLZXlGb3JOb2RlRGF0YShkYXRhKTtcclxuICAgICAgICB2YXIgbm9kZSA9IF9kaWFncmFtLmZpbmRQYXJ0Rm9yS2V5KGtleSk7XHJcbiAgICAgICAgbm9kZS5sYWJlbGVkTGluayA9IGxpbms7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oXCJjcmVhdGUgUiBUaGluZ1wiKTtcclxuICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG5cclxuICAgICAgICByZXR1cm4gX2RpYWdyYW0uZmluZE5vZGVGb3JEYXRhKGRhdGEpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tIGNyZWF0aW5nIHRoaW5ncyB3aXRoIHNwZWNpZmllZCBuYW1lcy9sb2NhdGlvbnMgLSBmb3IgdXNlIGJ5IGdlbmVyYXRvciBhbmQgdGVzdHMgLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5jcmVhdGVUaGluZyA9IGZ1bmN0aW9uKHgsIHksIG5hbWUsIGxheW91dCkge1xyXG4gICAgICAgIGdyb3VwID0gX2RpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuaW5zZXJ0UGFydChuZXcgZ28uUG9pbnQoeCwgeSkpO1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAndGV4dCcsIG5hbWUpO1xyXG4gICAgICAgIGlmIChsYXlvdXQpIHtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsYXlvdXQnLCBsYXlvdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZ3JvdXA7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlUkxpbmtXaXRoUlRoaW5nID0gZnVuY3Rpb24odGhpbmcxLCB0aGluZzIsIG5hbWUpIHtcclxuICAgICAgICB2YXIgbGluayA9IHNlbGYuY3JlYXRlUkxpbmsodGhpbmcxLCB0aGluZzIpO1xyXG4gICAgICAgIHJldHVybiBzZWxmLmNyZWF0ZVJUaGluZyhsaW5rLCBuYW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgbGlua0RhdGEgb2JqZWN0IGZvciB0aGUgbmV3IGxpbmtcclxuICAgIHRoaXMuY3JlYXRlUkxpbmsgPSBmdW5jdGlvbih0aGluZzEsIHRoaW5nMikge1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdub0Fycm93cycsXHJcbiAgICAgICAgICAgIGZyb206IHRoaW5nMS5kYXRhLmtleSxcclxuICAgICAgICAgICAgdG86IHRoaW5nMi5kYXRhLmtleSxcclxuICAgICAgICAgICAgZnJvbVBvcnQ6ICdSJyxcclxuICAgICAgICAgICAgdG9Qb3J0OiAnUidcclxuICAgICAgICB9O1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLmFkZExpbmtEYXRhKGRhdGEpO1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgIHJldHVybiBfZGlhZ3JhbS5maW5kTGlua0ZvckRhdGEoZGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIGxpbmtEYXRhIG9iamVjdCBmb3IgdGhlIG5ldyBsaW5rXHJcbiAgICB0aGlzLmNyZWF0ZVBMaW5rID0gZnVuY3Rpb24odGhpbmcxLCB0aGluZzIpIHtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnbm9BcnJvd3MnLFxyXG4gICAgICAgICAgICBmcm9tOiB0aGluZzEuZGF0YS5rZXksXHJcbiAgICAgICAgICAgIHRvOiB0aGluZzIuZGF0YS5rZXksXHJcbiAgICAgICAgICAgIGZyb21Qb3J0OiAnUCcsXHJcbiAgICAgICAgICAgIHRvUG9ydDogJ1AnLFxyXG4gICAgICAgICAgICBjYXRlZ29yeTogJ1AnXHJcbiAgICAgICAgfTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGRMaW5rRGF0YShkYXRhKTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbignYWRkIGxpbmsnKTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcxLmRhdGEsICdwRXhwYW5kZWQnLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gX2RpYWdyYW0uZmluZExpbmtGb3JEYXRhKGRhdGEpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tIG1vdmluZyB0aGluZ3MgaW4gdGhlIG1vZGVsIHN0cnVjdHVyZSAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gcmV0dXJucyBhIGdvLkxpc3Qgb2YgdGhlIGl0ZW1zIGluIHRoZSBjdXJyZW50IHNlbGVjdGlvbiB0aGF0IGFyZSBHcm91cHNcclxuICAgIGZ1bmN0aW9uIGdldFNlbGVjdGVkR3JvdXBzKCkge1xyXG4gICAgICAgIHZhciBpdCA9IF9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB2YXIgbWVtYmVycyA9IG5ldyBnby5MaXN0KCk7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXJzLmFkZChwYXJ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVtYmVycztcclxuICAgIH1cclxuXHJcbiAgICAvLyBkcmFnIHRvIFNcclxuICAgIHRoaXMuYWRkU2VsZWN0ZWRUaGluZ3NBc0NoaWxkcmVuT2YgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHZhciBuZXdNZW1iZXJzID0gZ2V0U2VsZWN0ZWRHcm91cHMoKTtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZXhpc3RpbmcgbWVtYmVycyBzbyB3ZSBjYW4gY2FsY3VsYXRlIGxheW91dFxyXG4gICAgICAgIHZhciBvbGRNZW1iZXJCb3VuZHMgPSBzZWxmLnNhZmVSZWN0KF9kaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhncm91cC5tZW1iZXJQYXJ0cykpO1xyXG5cclxuICAgICAgICAvLyBOQjogdGhpcyBpcyBzdWJqZWN0IHRvIHZhbGlkYXRpb24gYnkgQ29tbWFuZEhhbmRsZXIuaXNWYWxpZE1lbWJlcixcclxuICAgICAgICAvLyBzbyBmb3IgZXhhbXBsZSwgbWVtYmVycyBvZiBtZW1iZXJzIG9mIG5ld01lbWJlcnMgd2lsbCBub3QgYmUgYWRkZWQgYXMgbWVtYmVyc1xyXG4gICAgICAgIGdyb3VwLmFkZE1lbWJlcnMobmV3TWVtYmVycyk7XHJcblxyXG4gICAgICAgIF9sYXlvdXRzLmxheW91dE5ld01lbWJlcnNSZWxhdGl2ZVRvKG5ld01lbWJlcnMsIGdyb3VwLCBvbGRNZW1iZXJCb3VuZHMpO1xyXG5cclxuICAgICAgICBfZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBkcmFnIHRvIERcclxuICAgIHRoaXMuYWRkU2VsZWN0ZWRUaGluZ3NBc1Npc3RlcnNPZiA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG9sZE1lbWJlcnMgPSBnZXRTZWxlY3RlZEdyb3VwcygpO1xyXG5cclxuICAgICAgICAvLyBpZiBkcmFnZ2luZyB0byB0b3AgbGV2ZWwsIG1vdmUgZHJhZ2dlZCB0aGluZ3Mgc28gdGhleSBkb24ndCBvdmVybGFwIHRoZSBmb3JtZXIgcGFyZW50XHJcbiAgICAgICAgaWYgKCFncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgLy8gY2hlY2sgZXhpc3RpbmcgbWVtYmVycyBzbyB3ZSBjYW4gY2FsY3VsYXRlIGxheW91dFxyXG4gICAgICAgICAgICB2YXIgb2xkTWVtYmVyc0JvdW5kcyA9IF9kaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhvbGRNZW1iZXJzKTtcclxuICAgICAgICAgICAgLy8gTkI6IG9sZE1lbWJlcnMgY2FuIGJlIG9uIG11bHRpcGxlIGxldmVscywgc28gbm90IGNsZWFyIHdoaWNoIGxldmVsIHRvIHVzZSBmb3IgcmVzY2FsaW5nIG9sZCBtZW1iZXJzIGFmdGVyIGRyYWdcclxuICAgICAgICAgICAgdmFyIG9sZE1lbWJlcnNMZXZlbCA9IF9sYXlvdXRzLmNvbXB1dGVMZXZlbChvbGRNZW1iZXJzLmZpcnN0KCkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGl0ID0gb2xkTWVtYmVycy5pdGVyYXRvcjtcclxuICAgICAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lbWJlciA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbWVtYmVyLmNvbnRhaW5pbmdHcm91cCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX2xheW91dHMubGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZihvbGRNZW1iZXJzLCBncm91cCwgb2xkTWVtYmVyc0JvdW5kcywgb2xkTWVtYmVyc0xldmVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgbm90IGRyYWdnaW5nIHRvIHRvcCBsZXZlbCwgcGxhY2UgZHJhZ2dlZCB0aGluZ3MgYWZ0ZXIgZm9ybWVyIHBhcmVudCBpbiBvdXRsaW5lXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBpdDIgPSBvbGRNZW1iZXJzLml0ZXJhdG9yO1xyXG4gICAgICAgICAgICB3aGlsZSAoaXQyLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lbWJlcjIgPSBpdDIudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXIyLmNvbnRhaW5pbmdHcm91cCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICAgICAgICAgIHNlbGYubW92ZVNpYmxpbmdOZXh0VG8obWVtYmVyMiwgZ3JvdXAsIHNlbGYuUklHSFQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9kaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyBmb3IgZHJhZ2dpbmcgcGFydHMgd2l0aGluIGEgc3lzdGVtIC0gc2lkZSBpcyBMRUZUIG9yIFJJR0hUIChpLmUuIGFib3ZlIG9yIGJlbG93LCByZXNwLiBpbiBpbnZlbnRvcnkgbGF5b3V0KVxyXG4gICAgdGhpcy5hZGRTZWxlY3RlZFRoaW5nQXNPcmRlcmVkU2lzdGVyT2YgPSBmdW5jdGlvbihncm91cCwgc2lkZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2FkZFNlbGVjdGVkVGhpbmdBc09yZGVyZWRTaXN0ZXJPZiwgc2lkZTogJyArIHNpZGUpO1xyXG4gICAgICAgIHZhciB0aGluZyA9IHNlbGYuZ2V0VW5pcXVlVGhpbmdTZWxlY3RlZCgpO1xyXG4gICAgICAgIGlmICghdGhpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLm1vdmVTaWJsaW5nTmV4dFRvKHRoaW5nLCBncm91cCwgc2lkZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIG1vdmVzIHRoZSBmaXJzdCB0aGluZyAoc2libGluZykgdG8gYmUgYWZ0ZXIgdGhlIHNlY29uZCB0aGluZyAoZ3JvdXApXHJcbiAgICAvLyBpbiB0aGUgcGFydCBvcmRlcmluZyAtIHRoZXkgYXJlIGFzc3VtZWQgdG8gYmUgc2libGluZ3NcclxuICAgIC8vIHNpZGUgaXMgTEVGVCBvciBSSUdIVFxyXG4gICAgdGhpcy5tb3ZlU2libGluZ05leHRUbyA9IGZ1bmN0aW9uKHNpYmxpbmcsIGdyb3VwLCBzaWRlKSB7XHJcbiAgICAgICAgdmFyIHBhcmVudCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdtb3ZlU2libGluZ05leHRUbywgc2libGluZzogJyArIHNpYmxpbmcgKyAnLCBncm91cDogJyArIGdyb3VwICsgJywgcGFyZW50OiAnICsgcGFyZW50ICsgJywgc2libGluZy5jb250YWluaW5nR3JvdXA6ICcgKyBzaWJsaW5nLmNvbnRhaW5pbmdHcm91cCk7XHJcblxyXG4gICAgICAgIGlmICghcGFyZW50IHx8IHNpYmxpbmcuY29udGFpbmluZ0dyb3VwICE9IHBhcmVudCkge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBkbyBtb3ZlU2libGluZ05leHRUbyBvbiBub24tc2libGluZ3Mgb3IgdG9wLWxldmVsIGdyb3VwcycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIG5ldyBtZW1iZXIgb3JkZXJcclxuICAgICAgICB2YXIgbWVtYmVyT3JkZXIgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHZhciBpdCA9IHBhcmVudC5tZW1iZXJQYXJ0cztcclxuICAgICAgICB2YXIgb3JkZXIgPSAwO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIG1lbWJlciA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobWVtYmVyIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIGF0IHRoZSB0YXJnZXQgZ3JvdXAsIHNvIGFkZCB0aGUgbW92ZWQgdGhpbmcgZWl0aGVyIGJlZm9yZSBvciBhZnRlciBpdFxyXG4gICAgICAgICAgICAgICAgaWYgKG1lbWJlciA9PSBncm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaWRlID09IHNlbGYuTEVGVCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJPcmRlci5hZGQoc2libGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzaWJsaW5nLmRhdGEsICdvcmRlcicsIG9yZGVyKyspO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJPcmRlci5hZGQobWVtYmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG1lbWJlci5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJPcmRlci5hZGQobWVtYmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG1lbWJlci5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKHNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2libGluZy5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBkb24ndCByZS1hZGQgdGhlIG1vdmVkIHRoaW5nLCBpdCB3YXMgYWRkZWQgYWJvdmVcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1lbWJlciAhPSBzaWJsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKG1lbWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG1lbWJlci5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2xlYXIgZXhpc3RpbmcgbWVtYmVyc1xyXG4gICAgICAgIHZhciBuZXdJdCA9IG1lbWJlck9yZGVyLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChuZXdJdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIG1lbWJlcjIgPSBuZXdJdC52YWx1ZTtcclxuICAgICAgICAgICAgbWVtYmVyMi5jb250YWluaW5nR3JvdXAgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWRkIG5ldyBtZW1iZXJzXHJcbiAgICAgICAgbmV3SXQucmVzZXQoKTtcclxuICAgICAgICB3aGlsZSAobmV3SXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBtZW1iZXIzID0gbmV3SXQudmFsdWU7XHJcbiAgICAgICAgICAgIG1lbWJlcjMuY29udGFpbmluZ0dyb3VwID0gcGFyZW50O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hZGRUaGluZ0FzUlRoaW5nID0gZnVuY3Rpb24odGhpbmcsIGxpbmspIHtcclxuICAgICAgICB0aGluZy5sYWJlbGVkTGluayA9IGxpbms7XHJcbiAgICAgICAgdGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gRCBjb3JuZXIgaGFuZGxlciAoc2luZ2xlIGNsaWNrKVxyXG4gICAgdGhpcy50b2dnbGVERmxhZyA9IGZ1bmN0aW9uKHRoaW5nKSB7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nLmRhdGEsICdkZmxhZycsICF0aGluZy5kYXRhLmRmbGFnKTtcclxuICAgICAgICB0aGluZy51cGRhdGVUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTIGNvcm5lciBoYW5kbGVyIChzaW5nbGUgY2xpY2spXHJcbiAgICB0aGlzLnRvZ2dsZVNFeHBhbnNpb24gPSBmdW5jdGlvbih0aGluZykge1xyXG4gICAgICAgIHZhciBpc0V4cGFuZGVkID0gISh0aGluZy5kYXRhICYmICF0aGluZy5kYXRhLnNFeHBhbmRlZCk7IC8vIGV4cGFuZCBieSBkZWZhdWx0IGlmIHByb3BlcnR5IG5vdCBwcmVzZW50XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nLmRhdGEsICdzRXhwYW5kZWQnLCAhaXNFeHBhbmRlZCk7XHJcbiAgICAgICAgdGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICBfdWkuc2hvd0Nvcm5lclRpcCh0aGluZywgJ1MnKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gUCBjb3JuZXIgaGFuZGxlciAoc2luZ2xlIGNsaWNrKVxyXG4gICAgdGhpcy50b2dnbGVQRXhwYW5zaW9uID0gZnVuY3Rpb24odGhpbmcpIHtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcuZGF0YSwgJ3BFeHBhbmRlZCcsICFzZWxmLnBJc0V4cGFuZGVkKHRoaW5nKSk7XHJcbiAgICAgICAgdGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICBfdWkuc2hvd0Nvcm5lclRpcCh0aGluZywgXCJQXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnBJc0V4cGFuZGVkID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gZ3JvdXAuZGF0YSAmJiBncm91cC5kYXRhLnBFeHBhbmRlZCA9PT0gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB1bmRvL3JlZG8gLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmNhblVuZG8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIuY2FuVW5kbygpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnVuZG8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBfZGlhZ3JhbS5jb21tYW5kSGFuZGxlci51bmRvKCk7XHJcbiAgICAgICAgX2RpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jYW5SZWRvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLmNhblJlZG8oKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5yZWRvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIucmVkbygpO1xyXG4gICAgICAgIF9kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIF9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgX2RpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSB1dGlsaXR5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBjaGVjayBmb3IgYSByZWN0IHdpdGggTmFOIFgvWS9XL0ggY29vcmRzLCBzbyB3ZSBjYW4gZG8gc3R1ZmYgd2l0aCBpdCBzdWNoIGFzIHVuaW9uUmVjdFxyXG4gICAgLy8gKE5hTixOYU4sMCwwKSA9PiAoMCwwLDAsMClcclxuICAgIHRoaXMuc2FmZVJlY3QgPSBmdW5jdGlvbihyZWN0KSB7XHJcbiAgICAgICAgaWYgKGlzTmFOKHJlY3QueCkpIHtcclxuICAgICAgICAgICAgcmVjdC54ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzTmFOKHJlY3QueSkpIHtcclxuICAgICAgICAgICAgcmVjdC55ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzTmFOKHJlY3Qud2lkdGgpKSB7XHJcbiAgICAgICAgICAgIHJlY3Qud2lkdGggPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNOYU4ocmVjdC5oZWlnaHQpKSB7XHJcbiAgICAgICAgICAgIHJlY3QuaGVpZ2h0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlY3Q7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gZGVidWcgbWFwIG1vZGVsIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmxvYWRNb2RlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQoJyNtYXAtbW9kZWwtZGVidWcnKS52YWwoX2RpYWdyYW0ubW9kZWwudG9Kc29uKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNhdmVNb2RlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24oJCgnI21hcC1tb2RlbC1kZWJ1ZycpLnZhbCgpKTtcclxuICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLmFkZENoYW5nZWRMaXN0ZW5lcihfYXV0b3NhdmUubW9kZWxDaGFuZ2VkKTtcclxuICAgICAgICBfYXV0b3NhdmUuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gdHJ1ZTtcclxuICAgIH07XHJcbn07IiwiLy8gZnVuY3Rpb25zIGZvciBlZGl0aW5nIHBlcnNwZWN0aXZlcyBBTkQgZGlzdGluY3Rpb25zLCB3aGljaCB3b3JrIHNpbWlsYXJseSBpbiB0aGUgVUlcclxuXHJcblNhbmRiYW5rRWRpdG9yLlBlcnNwZWN0aXZlcyA9IGZ1bmN0aW9uKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIC8vIHRlbXBvcmFyeSBzdGF0ZSBmbGFnIGZvciBhZGRpbmcvcmVtb3ZpbmcgUC9EIHNlbGVjdGlvbnMgcHJvZ3JhbW1hdGljYWxseVxyXG4gICAgdmFyIHNlbGVjdGluZ0xpbmtlZFRoaW5ncyA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge307XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ1BlcnNwZWN0aXZlcywgY3VycmVudFRhYkNoYW5nZWQnKTtcclxuICAgICAgICBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX1BFUlNQRUNUSVZFUykgeyAvLyBvcGVuaW5nIHBlcnNwZWN0aXZlc1xyXG4gICAgICAgICAgICBzZXRQb3JEVGhpbmcoJ1AnKTtcclxuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAob2xkVmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX1BFUlNQRUNUSVZFUykgeyAvLyBjbG9zaW5nIHBlcnNwZWN0aXZlc1xyXG4gICAgICAgICAgICBzYXZlTGlua3MoJ1AnKTtcclxuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKGZhbHNlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9ESVNUSU5DVElPTlMpIHsgLy8gb3BlbmluZyBkaXN0aW5jdGlvbnNcclxuICAgICAgICAgICAgc2V0UG9yRFRoaW5nKCdEJyk7XHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZCh0cnVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9sZFZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9ESVNUSU5DVElPTlMpIHsgLy8gY2xvc2luZyBkaXN0aW5jdGlvbnNcclxuICAgICAgICAgICAgc2F2ZUxpbmtzKCdEJyk7XHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIGlmIChldmVudE5hbWUgPT0gJ0NoYW5nZWRTZWxlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX1BFUlNQRUNUSVZFUykgfHwgbWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9ESVNUSU5DVElPTlMpKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVMaW5rcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tIFAvRCBFZGl0b3Igc3RhdGVcclxuXHJcbiAgICB0aGlzLmlzSW5QT3JERWRpdG9yTW9kZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5ICE9PSBudWxsIHx8IG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgIT09IG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNJblBFZGl0b3JNb2RlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgIT09IG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNJbkRFZGl0b3JNb2RlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgIT09IG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNQRWRpdG9yUG9pbnQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5ID09IGdyb3VwLmRhdGEua2V5O1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzREVkaXRvclRoaW5nID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gbWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSA9PSBncm91cC5kYXRhLmtleTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gTkI6IHRoaXMgaXMgY2FsbGVkIHZpYSBtYXAuZ2V0Q29ybmVyRnVuY3Rpb24sIHNvIHdlIGdldCB0aGUgZXh0cmEgY29ybmVyIGFyZywgd2hpY2ggd2UgY2FuIGlnbm9yZVxyXG4gICAgdGhpcy5zZXRQRWRpdG9yUG9pbnQgPSBmdW5jdGlvbih0aGluZywgY29ybmVyKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLm9wZW5UYWIobWFwLmdldFVpKCkuVEFCX0lEX1BFUlNQRUNUSVZFUyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNldERFZGl0b3JUaGluZyA9IGZ1bmN0aW9uKHRoaW5nKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIC8vIE5COiBuZWVkIHRvIHNlbGVjdCBvbmx5IHRoaXMgdGhpbmcsIHNpbmNlIHRoaXMgaXMgaW52b2tlZFxyXG4gICAgICAgICAgICAvLyBieSBhIGNvbnRyb2wtY2xpY2ssIHdoaWNoIHdpbGwgbm90IGF1dG9tYXRpY2FsbHkgc2VsZWN0IGp1c3QgaXRcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB0aGluZy5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgbWFwLmdldFVpKCkub3BlblRhYihtYXAuZ2V0VWkoKS5UQUJfSURfRElTVElOQ1RJT05TKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5pc1BlcnNwZWN0aXZlUG9pbnQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHZhciBsaW5rcyA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzU2VsZWN0ZWRQZXJzcGVjdGl2ZVZpZXcgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHZhciBsaW5rcyA9IGdyb3VwLmZpbmRMaW5rc0ludG8oKTtcclxuICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnICYmIG1hcC5wSXNFeHBhbmRlZChsaW5rLmZyb21Ob2RlKSAmJiBsaW5rLmZyb21Ob2RlLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1RvZ2dsZWRQZXJzcGVjdGl2ZVZpZXcgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHZhciBsaW5rcyA9IGdyb3VwLmZpbmRMaW5rc0ludG8oKTtcclxuICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnICYmIG1hcC5wSXNFeHBhbmRlZChsaW5rLmZyb21Ob2RlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzTW91c2VPdmVyUGVyc3BlY3RpdmVWaWV3ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NJbnRvKCk7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJyAmJiBsaW5rLmZyb21Ob2RlID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0UGVyc3BlY3RpdmVWaWV3V2VpZ2h0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgbW9kZSA9IG1hcC5nZXRVaSgpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5wZXJzcGVjdGl2ZU1vZGU7XHJcbiAgICAgICAgaWYgKG1vZGUgPT0gJ3Nwb3RsaWdodCcgfHwgbW9kZSA9PSAnYm90aCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChzZWxmLmlzU2VsZWN0ZWRQZXJzcGVjdGl2ZVZpZXcoZ3JvdXApID8gMSA6IDApICtcclxuICAgICAgICAgICAgICAgIChzZWxmLmlzVG9nZ2xlZFBlcnNwZWN0aXZlVmlldyhncm91cCkgPyAxIDogMCkgK1xyXG4gICAgICAgICAgICAgICAgKHNlbGYuaXNNb3VzZU92ZXJQZXJzcGVjdGl2ZVZpZXcoZ3JvdXApID8gMSA6IDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBjYXRlZ29yeSBpcyBcIlBcIiBvciBcIkRcIiAocGVyc3BlY3RpdmVzIG9yIGRpc3RpbmN0aW9ucylcclxuICAgIGZ1bmN0aW9uIHNldFBvckRUaGluZyhjYXRlZ29yeSkge1xyXG4gICAgICAgIC8vIGlmIGFscmVhZHkgc2V0LCBtdXN0IGRvIHNhdmUgcGVyc3BlY3RpdmVzIG9yIHNhdmUgZGlzdGluY3Rpb25zXHJcbiAgICAgICAgaWYgKG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgfHwgbWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgdGhpbmcgPSBtYXAuZ2V0RGlhZ3JhbSgpLnNlbGVjdGlvbi5maXJzdCgpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NldFBvckRUaGluZzogJyArIHRoaW5nKTtcclxuICAgICAgICBpZiAodGhpbmcgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpbmcuZGF0YS5rZXk7XHJcbiAgICAgICAgICAgIGlmIChjYXRlZ29yeSA9PSBcIlBcIikge1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSA9IGtleTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjYXRlZ29yeSA9PSBcIkRcIikge1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSA9IGtleTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gc2VsZWN0IHZpZXdzL290aGVyc1xyXG4gICAgICAgICAgICBzZWxlY3RMaW5rZWRUaGluZ3NGb3IodGhpbmcsIGNhdGVnb3J5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgc2VsZWN0aW9uIGNoYW5nZXMgLSBpZiB0aGUgdGhpbmcgaXMgc2V0LFxyXG4gICAgLy8gYWRkcy9yZW1vdmVzIEQvUCBsaW5rcyBhY2NvcmRpbmcgdG8gd2hhdCBpcyBzZWxlY3RlZDsgb3RoZXJ3aXNlXHJcbiAgICAvLyBqdXN0IHNob3dzL2hpZGVzIEQvUCBsaW5rcyBmb3IgdGhlIHNlbGVjdGVkIHRoaW5nKHMpXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVMaW5rcygpIHtcclxuICAgICAgICBpZiAoc2VsZWN0aW5nTGlua2VkVGhpbmdzKSAvLyBzZWxlY3Rpb24gaXMgYmVpbmcgY2hhbmdlZCBwcm9ncmFtbWF0aWNhbGx5LCBzbyBkb24ndCByZXNwb25kXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdmFyIHBPckRUaGluZyA9IG51bGw7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5ID0gbnVsbDtcclxuICAgICAgICBpZiAobWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSkge1xyXG4gICAgICAgICAgICBwT3JEVGhpbmcgPSBtYXAuZ2V0RGlhZ3JhbSgpLmZpbmROb2RlRm9yS2V5KG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkpO1xyXG4gICAgICAgICAgICBjYXRlZ29yeSA9IFwiUFwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSkge1xyXG4gICAgICAgICAgICBwT3JEVGhpbmcgPSBtYXAuZ2V0RGlhZ3JhbSgpLmZpbmROb2RlRm9yS2V5KG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkpO1xyXG4gICAgICAgICAgICBjYXRlZ29yeSA9IFwiRFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFkZExpbmtzVG8gPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHZhciByZW1vdmVMaW5rcyA9IG5ldyBnby5MaXN0KCk7XHJcblxyXG4gICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBhbGwgdGhpbmdzXHJcbiAgICAgICAgaWYgKGNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgIHZhciBsYXllcnMgPSBtYXAuZ2V0RGlhZ3JhbSgpLmxheWVycztcclxuICAgICAgICAgICAgd2hpbGUgKGxheWVycy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVycy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGxheWVyLnBhcnRzO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHBhcnRzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgbGlua3MgdG8gYWRkL3JlbW92ZSBiYXNlZCBvbiBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBPckRUaGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmtzID0gcGFydC5maW5kTGlua3NJbnRvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdMaW5rID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rLmZyb21Ob2RlLmRhdGEua2V5ID09IHBPckRUaGluZy5kYXRhLmtleSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gY2F0ZWdvcnkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nTGluayA9IGxpbms7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVjaWRlIHdoZXRoZXIgdG8gYWRkIG9yIHJlbW92ZSBhIGxpbmsgdG8gdGhlIHBhcnQsIGRlcGVuZGluZyBvbiB3aGV0aGVyIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQgaXMgc2VsZWN0ZWQgYW5kIHdoZXRoZXIgYSBsaW5rIGV4aXN0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZ0xpbmsgJiYgcGFydC5pc1NlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZExpbmtzVG8uYWRkKHBhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXhpc3RpbmdMaW5rICYmICFwYXJ0LmlzU2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTGlua3MuYWRkKGV4aXN0aW5nTGluayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRvIHRoZSBhZGRpbmcvcmVtb3Zpbmcgb2YgbGlua3NcclxuICAgICAgICB2YXIgYWRkcyA9IGFkZExpbmtzVG8uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGFkZHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuc3RhcnRUcmFuc2FjdGlvbignYWRkIGxpbmsnKTtcclxuICAgICAgICAgICAgdmFyIHRvID0gYWRkcy52YWx1ZTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndXBkYXRlTGlua3M6IGFkZGluZyBsaW5rIGZyb20gJyArIHBPckRUaGluZyArICcgdG8gJyArIHRvKTtcclxuICAgICAgICAgICAgaWYgKGNhdGVnb3J5ID09IFwiRFwiICYmIHBPckRUaGluZy5kYXRhLmtleSA9PSB0by5kYXRhLmtleSkge1xyXG4gICAgICAgICAgICAgICAgcE9yRFRoaW5nLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiWW91IGNhbid0IGRpc3Rpbmd1aXNoIGEgdGhpbmcgZnJvbSBpdHNlbGYhXCIpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5hZGRMaW5rRGF0YSh7XHJcbiAgICAgICAgICAgICAgICBmcm9tOiBwT3JEVGhpbmcuZGF0YS5rZXksXHJcbiAgICAgICAgICAgICAgICB0bzogdG8uZGF0YS5rZXksXHJcbiAgICAgICAgICAgICAgICBmcm9tUG9ydDogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICB0b1BvcnQ6IGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmVtb3ZlcyA9IHJlbW92ZUxpbmtzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChyZW1vdmVzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcmVtb3ZlID0gcmVtb3Zlcy52YWx1ZTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndXBkYXRlTGlua3M6IHJlbW92aW5nIGxpbmsgZnJvbSAnICsgcmVtb3ZlLmZyb21Ob2RlICsgJyB0byAnICsgcmVtb3ZlLnRvTm9kZSk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuc3RhcnRUcmFuc2FjdGlvbigncmVtb3ZlIGxpbmsnKTtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5yZW1vdmUocmVtb3ZlKTtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5yZW1vdmVMaW5rRGF0YShyZW1vdmUuZGF0YSk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oJ3JlbW92ZSBsaW5rJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzaG93IGxpbmtzXHJcbiAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVMaW5rcyhjYXRlZ29yeSkge1xyXG4gICAgICAgIHZhciBwT3JEVGhpbmcgPSBudWxsO1xyXG4gICAgICAgIGlmIChjYXRlZ29yeSA9PSBcIlBcIikge1xyXG4gICAgICAgICAgICBwT3JEVGhpbmcgPSBtYXAuZ2V0RGlhZ3JhbSgpLmZpbmROb2RlRm9yS2V5KG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkpO1xyXG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5ID0gbnVsbDtcclxuICAgICAgICB9IGVsc2UgaWYgKGNhdGVnb3J5ID09IFwiRFwiKSB7XHJcbiAgICAgICAgICAgIHBPckRUaGluZyA9IG1hcC5nZXREaWFncmFtKCkuZmluZE5vZGVGb3JLZXkobWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSk7XHJcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWFwLmdldERpYWdyYW0oKS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZWxlY3RMaW5rZWRUaGluZ3NGb3IoZ3JvdXAsIGNhdGVnb3J5KSB7XHJcbiAgICAgICAgc2VsZWN0aW5nTGlua2VkVGhpbmdzID0gdHJ1ZTtcclxuICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmNsZWFyU2VsZWN0aW9uKCk7XHJcblxyXG4gICAgICAgIHZhciBsaW5rcyA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09IGNhdGVnb3J5KVxyXG4gICAgICAgICAgICAgICAgbGluay50b05vZGUuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxlY3RpbmdMaW5rZWRUaGluZ3MgPSBmYWxzZTtcclxuICAgIH1cclxufTsiLCIvLyBmdW5jdGlvbnMgZm9yIHRoZSBwcmVzZW50ZXIvc2xpZGVzXHJcblxyXG5TYW5kYmFua0VkaXRvci5QcmVzZW50ZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgLy8gY29uc3RhbnRzXHJcbiAgICB0aGlzLlNMSURFX0JMT0NLRVJfV0lEVEggPSAxMDAwO1xyXG4gICAgdGhpcy5TTElERV9CTE9DS0VSX0NPTE9SID0gXCIjZmZmXCI7XHJcbiAgICB0aGlzLlNMSURFX0JMT0NLRVJfT1BBQ0lUWSA9IDAuOTtcclxuXHJcbiAgICAvLyBzdGF0ZSB2YXJzXHJcbiAgICB0aGlzLmN1cnJlbnRTbGlkZUluZGV4ID0gbnVsbDtcclxuICAgIHRoaXMuaXNQcmVzZW50aW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLnNob3dUT0MgPSBmYWxzZTtcclxuICAgIHRoaXMuaXNDcmVhdGluZ1RodW1ibmFpbCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIG1hc2sgYXBwbGllZCBhcm91bmQgc2xpZGUgcmVnaW9uIHdoZW4gcHJlc2VudGluZ1xyXG4gICAgdGhpcy5zbGlkZUJsb2NrZXIgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuZGlhZ3JhbUFzcGVjdFJhdGlvID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYXV0b3NhdmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBtYXAuZ2V0QXV0b3NhdmUoKS5zYXZlKCdlZGl0X3ByZXNlbnRlcicpOyBcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLSBlZGl0aW5nIGZ1bmN0aW9ucyBmb3IgZGlmZmVyZW50IHNsaWRlIHR5cGVzIC0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBOQjogaGFzTGlua3MgY2FuIGhhdmUgdmFsdWVzIGZhbHNlLCAxLCBvciB0cnVlICgxIG1lYW5zIG9ubHkgYSBzaW5nbGUgbGluaylcclxuICAgIHRoaXMuc2xpZGVUeXBlcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdUSVRMRV9CT0RZJywgbGFiZWw6ICdUaXRsZSBhbmQgQm9keScsXHJcbiAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCAgaGFzTm90ZXM6IHRydWUsICBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IGZhbHNlLCBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgICBuYW1lOiAnVElUTEVfQk9EWV9NQVAnLCBsYWJlbDogJ1RpdGxlLCBCb2R5IGFuZCBNZXRhTWFwJyxcclxuICAgICAgICAgICAgaGFzVGl0bGU6IHRydWUsICBoYXNOb3RlczogdHJ1ZSwgIGhhc0NoZWNrczogZmFsc2UsIGhhc01hcFJlZ2lvbjogdHJ1ZSwgIGhhc01hcFN1bW1hcnk6IGZhbHNlLCBoYXNMaW5rczogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIG5hbWU6ICdBQ1RJVklUWV9NQVAnLCBsYWJlbDogJ0xlc3NvbiBBY3Rpdml0eSBhbmQgTWV0YU1hcCcsXHJcbiAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCAgaGFzTm90ZXM6IHRydWUsICBoYXNDaGVja3M6IHRydWUsICBoYXNNYXBSZWdpb246IHRydWUsICBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIG5hbWU6ICdNQVBfT05MWScsIGxhYmVsOiAnTWV0YU1hcCBvbmx5JyxcclxuICAgICAgICAgICAgaGFzVGl0bGU6IHRydWUsICBoYXNOb3RlczogZmFsc2UsIGhhc0NoZWNrczogZmFsc2UsIGhhc01hcFJlZ2lvbjogdHJ1ZSwgIGhhc01hcFN1bW1hcnk6IGZhbHNlLCBoYXNMaW5rczogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIG5hbWU6ICdNQVBfU1VNTUFSWScsIGxhYmVsOiAnTWV0YU1hcCBTdW1tYXJ5JyxcclxuICAgICAgICAgICAgaGFzVGl0bGU6IGZhbHNlLCBoYXNOb3RlczogZmFsc2UsIGhhc0NoZWNrczogZmFsc2UsIGhhc01hcFJlZ2lvbjogdHJ1ZSwgaGFzTWFwU3VtbWFyeTogdHJ1ZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgXTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0gbGluay9hdHRhY2htZW50IHR5cGVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5saW5rVHlwZXMgPSBbXHJcbiAgICAgICAgeyBuYW1lOiAnJywgbGFiZWw6ICctLSBTZWxlY3QgYXR0YWNobWVudCB0eXBlIC0tJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ1dFQicsIGxhYmVsOiAnV2ViIFBhZ2UnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnUERGJywgbGFiZWw6ICdQREYnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnRE9DJywgbGFiZWw6ICdEb2N1bWVudCcgfSxcclxuICAgICAgICB7IG5hbWU6ICdTUFJFQURTSEVFVCcsIGxhYmVsOiAnU3ByZWFkc2hlZXQnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnUFJFU0VOVEFUSU9OJywgbGFiZWw6ICdQcmVzZW50YXRpb24nIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnTUVUQU1BUCcsIGxhYmVsOiAnTWV0YU1hcCcgfSxcclxuICAgICAgICB7IG5hbWU6ICdJTUFHRScsIGxhYmVsOiAnSW1hZ2UnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnQVVESU8nLCBsYWJlbDogJ0F1ZGlvJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ1ZJREVPJywgbGFiZWw6ICdWaWRlbycgfSxcclxuICAgICAgICB7IG5hbWU6ICdTVVJWRVknLCBsYWJlbDogJ1N1cnZleScgfSxcclxuICAgICAgICB7IG5hbWU6ICdXT1JLU0hFRVQnLCBsYWJlbDogJ1dvcmtzaGVldCcgfVxyXG4gICAgXTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gbGlzdCBvZiBhbGwgdGhpbmdzIGluIHRoZSBtYXAsIGZvciBtYXAgc3VtbWFyeSBzbGlkZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5pZGVhTGlzdCA9ICcnO1xyXG5cclxuICAgIC8vIG9ubHkgY2FsbCB0aGlzIG9jY2FzaW9uYWxseSwgYXMgdGhleSB3b24ndCBiZSBlZGl0aW5nIHRoZSBtYXAgd2hpbGUgcHJlc2VudGVyIGlzIG9wZW5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZUlkZWFMaXN0KCkge1xyXG4gICAgICAgIHZhciBub2RlcyA9IG1hcC5nZXREaWFncmFtKCkubm9kZXM7XHJcbiAgICAgICAgdmFyIGxpc3QgPSBbXTtcclxuICAgICAgICB3aGlsZSAobm9kZXMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICgobm9kZXMudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkpIHtcclxuICAgICAgICAgICAgICAgIGxpc3QucHVzaChub2Rlcy52YWx1ZS5kYXRhLnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpc3Quc29ydCgpO1xyXG5cclxuICAgICAgICAvLyBmaWx0ZXIgb3V0IHBsYWNlaG9sZGVyIG5hbWVzIC0gc2VlIG1hcC5qczpnZXROZXdUaGluZ0RhdGEsIGNyZWF0ZVNpc3RlciwgZXRjLlxyXG4gICAgICAgIGxpc3QgPSBfLmRpZmZlcmVuY2UoXy51bmlxKGxpc3QsIHRydWUpLCBcclxuICAgICAgICAgICAgbWFwLmdldEdlbmVyYXRvcigpLmdldFBsYWNlaG9sZGVySWRlYU5hbWVzKCksIFxyXG4gICAgICAgICAgICBbJ05ldyBJZGVhJywgJ05ldyBEaXN0aW5ndWlzaGVkIElkZWEnLCAnTmV3IFJlbGF0ZWQgSWRlYScsICdOZXcgUmVsYXRpb25zaGlwIElkZWEnLCAnTmV3IFBhcnQgSWRlYScsXHJcbiAgICAgICAgICAgICAnSWRlYScsICdQYXJ0JywgJ1JlbGF0aW9uc2hpcCBJZGVhJ10gLy8gbmV3ZXIgc2ltcGxpZmllZCBuYW1lc1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHNlbGYuaWRlYUxpc3QgPSBsaXN0LmpvaW4oJywgJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zdW1tYXJ5QW5hbHl0aWNzID0gW1xyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1RISU5HUycsIHNpbmd1bGFyTGFiZWw6ICdEaXN0aW5jdGlvbicsIHBsdXJhbExhYmVsOiAnRGlzdGluY3Rpb25zJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1NZU1RFTVMnLCBzaW5ndWxhckxhYmVsOiAnU3lzdGVtJywgcGx1cmFsTGFiZWw6ICdTeXN0ZW1zJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1JFTEFUSU9OU0hJUFMnLCBzaW5ndWxhckxhYmVsOiAnUmVsYXRpb25zaGlwJywgcGx1cmFsTGFiZWw6ICdSZWxhdGlvbnNoaXBzJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1BFUlNQRUNUSVZFUycsIHNpbmd1bGFyTGFiZWw6ICdQZXJzcGVjdGl2ZScsIHBsdXJhbExhYmVsOiAnUGVyc3BlY3RpdmVzJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1JUSElOR1MnLCBzaW5ndWxhckxhYmVsOiAnUmVsYXRpb25zaGlwIElkZWEnLCBwbHVyYWxMYWJlbDogJ1JlbGF0aW9uc2hpcCBJZGVhcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9TWVNURU1fUlRISU5HUycsIHNpbmd1bGFyTGFiZWw6ICdSZWxhdGlvbnNoaXAgU3lzdGVtJywgcGx1cmFsTGFiZWw6ICdSZWxhdGlvbnNoaXAgU3lzdGVtcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9TWVNURU1fUEVSU1BFQ1RJVkVTJywgc2luZ3VsYXJMYWJlbDogJ1BlcnNwZWN0aXZlIFN5c3RlbScsIHBsdXJhbExhYmVsOiAnUGVyc3BlY3RpdmUgU3lzdGVtcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9ESVNUSU5DVElPTlMnLCBzaW5ndWxhckxhYmVsOiAnQWR2YW5jZWQgRGlzdGluY3Rpb24nLCBwbHVyYWxMYWJlbDogJ0FkdmFuY2VkIERpc3RpbmN0aW9ucycgfSxcclxuICAgIF07XHJcblxyXG4gICAgdGhpcy5hZGRDaGVjayA9IGZ1bmN0aW9uKG5vZGVEYXRhKSB7XHJcbiAgICAgICAgIG5vZGVEYXRhLmNoZWNrcy5wdXNoKHsgdGV4dDogJycgfSk7XHJcbiAgICAgICAgIHNlbGYuYXV0b3NhdmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kZWxldGVDaGVjayA9IGZ1bmN0aW9uIChjaGVjaywgbm9kZURhdGEpIHtcclxuICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZihub2RlRGF0YS5jaGVja3MsIGNoZWNrKTtcclxuICAgICAgICBub2RlRGF0YS5jaGVja3Muc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIHNlbGYuYXV0b3NhdmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hZGRMaW5rID0gZnVuY3Rpb24obm9kZURhdGEpIHtcclxuICAgICAgICBub2RlRGF0YS5saW5rcy5wdXNoKHsgdGl0bGU6ICcnLCB1cmw6ICcnLCB0eXBlOiAnJyB9KTtcclxuICAgICAgICBzZWxmLmF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGVsZXRlTGluayA9IGZ1bmN0aW9uIChsaW5rLCBub2RlRGF0YSkge1xyXG4gICAgICAgIHZhciBpID0gXy5pbmRleE9mKG5vZGVEYXRhLmxpbmtzLCBsaW5rKTtcclxuICAgICAgICBub2RlRGF0YS5saW5rcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgc2VsZi5hdXRvc2F2ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZVRPQyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmlzUHJlc2VudGluZykge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zaG93VE9DID0gIXNlbGYuc2hvd1RPQztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBOQjogY2FuJ3QgY3JlYXRlIHRoaXMgaW4gaW5pdCBhcyB0aGUgZGlhZ3JhbSBkb2Vzbid0IGV4aXN0IHlldC4uLlxyXG4gICAgZnVuY3Rpb24gbWF5YmVJbml0U2xpZGVCbG9ja2VyKCkge1xyXG4gICAgICAgIGlmICghc2VsZi5zbGlkZUJsb2NrZXIpIHtcclxuICAgICAgICAgICAgdmFyIG1rID0gZ28uR3JhcGhPYmplY3QubWFrZTtcclxuICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIgPSBtayhnby5Ob2RlLCBnby5QYW5lbC5BdXRvLFxyXG4gICAgICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgICAgICBsYXllck5hbWU6ICdUb29sJyxcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBzZWxmLlNMSURFX0JMT0NLRVJfT1BBQ0lUWVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBzZWxmLlNMSURFX0JMT0NLRVJfQ09MT1IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOjEwMDBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkuYWRkKHNlbGYuc2xpZGVCbG9ja2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChvbGRWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSB7IC8vIGNsb3NpbmcgdGFiXHJcbiAgICAgICAgICAgIHNlbGYuc3RvcFByZXNlbnRpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUikgeyAvLyBvcGVuaW5nIHRhYlxyXG4gICAgICAgICAgICAvLyBzaG93IHNsaWRlcyAoc2VlIGxheW91dHMuc2xpZGVUZW1wbGF0ZSwgYmluZGluZyBvZiB2aXNpYmxlIGF0dHIpXHJcbiAgICAgICAgICAgIHNlbGYuZGlhZ3JhbUFzcGVjdFJhdGlvID0gJCgnI2RpYWdyYW0nKS53aWR0aCgpIC8gJCgnI2RpYWdyYW0nKS5oZWlnaHQoKTsgICAgICAgIFxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdkaWFncmFtQXNwZWN0UmF0aW86ICcgKyBzZWxmLmRpYWdyYW1Bc3BlY3RSYXRpbyk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUubWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICB1cGRhdGVJZGVhTGlzdCgpO1xyXG4gICAgICAgICAgICBpZiAoIXNlbGYuY3VycmVudFNsaWRlSW5kZXggJiYgc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlbGYuc2xpZGVUaHVtYm5haWxTZWxlY3RlZCgxKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaGFuZGxlRGlhZ3JhbUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIGlmICghbWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9QUkVTRU5URVIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChldmVudE5hbWUgPT0gJ1NlbGVjdGlvbkRlbGV0aW5nJykge1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gZS5zdWJqZWN0O1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0aW9uLmNvdW50ID09IDEpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZyA9IHNlbGVjdGlvbi5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaW5nIGluc3RhbmNlb2YgZ28uTm9kZSAmJiB0aGluZy5kYXRhLmNhdGVnb3J5ID09ICdzbGlkZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm0oXCJEZWxldGUgdGhpcyBzbGlkZSBmcm9tIHRoZSBwcmVzZW50YXRpb24/XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25EZWxldGVkJykge1xyXG4gICAgICAgICAgICAvLyBpZiBzbGlkZSBpcyBkZWxldGVkIGZyb20gY2FudmFzIHJhdGhlciB0aGFuIGJ5IHRodW1ibmFpbCB4IGJ1dHRvbiwgbmVlZCB0byB1cGRhdGUgaW5kZXhlc1xyXG4gICAgICAgICAgICBjb21wYWN0U2xpZGVJbmRleGVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnU2VsZWN0aW9uTW92ZWQnIHx8IGV2ZW50TmFtZSA9PSAnUGFydFJlc2l6ZWQnKSB7XHJcbiAgICAgICAgICAgIC8vIGNsZWFyIHRodW1ibmFpbCBjYWNoZVxyXG4gICAgICAgICAgICB0aHVtYm5haWxDYWNoZSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1ZpZXdwb3J0Qm91bmRzQ2hhbmdlZCcpIHtcclxuICAgICAgICAgICAgLy8gYWRqdXN0IHpvb21pbmcgb2YgbWFwIHJlZ2lvblxyXG4gICAgICAgICAgICAvL3NlbGYud2luZG93UmVzaXplZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy53aW5kb3dSZXNpemVkID0gXy5kZWJvdW5jZShmdW5jdGlvbigpIHtcclxuICAgICAgICBzZWxmLnNsaWRlVGh1bWJuYWlsU2VsZWN0ZWQoc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICB9LCAxMDAwKTtcclxuXHJcbiAgICB0aGlzLnNob3dTaWRlYmFyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSAmJiAoIXNlbGYuaXNQcmVzZW50aW5nIHx8IHNlbGYuc2hvd1RPQyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGlzYWJsZU1hcFRvb2xiYXJCdXR0b25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuICFtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUikgXHJcbiAgICAgICAgICAgIHx8IHNlbGYuaXNQcmVzZW50aW5nIFxyXG4gICAgICAgICAgICB8fCAhc2VsZi5nZXRDdXJyZW50U2xpZGVUeXBlKCkuaGFzTWFwUmVnaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJldHVybnMgYW4gYXJyYXkgb2Ygbm9kZSBkYXRhIG9iamVjdHMgKG5vdCB0aGUgc2xpZGUgbm9kZXMgdGhlbXNlbHZlcylcclxuICAgIHRoaXMuZ2V0U2xpZGVOb2RlRGF0YXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHZhciBub2RlcyA9IGRpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheTtcclxuICAgICAgICB2YXIgbm9kZURhdGFzID0gXy5maWx0ZXIobm9kZXMsIGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlLmNhdGVnb3J5ID09ICdzbGlkZSc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbm9kZURhdGFzID0gXy5zb3J0Qnkobm9kZURhdGFzLCBmdW5jdGlvbiAobm9kZURhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGVEYXRhLmluZGV4O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2dldFNsaWRlTm9kZURhdGFzLCBpbmRleGVzOiAnICsgXy5wbHVjayhzbGlkZXNEYXRhLCAnaW5kZXgnKSk7XHJcbiAgICAgICAgcmV0dXJuIG5vZGVEYXRhcztcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRTbGlkZUNvdW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGg7XHJcbiAgICB9OyAgXHJcblxyXG4gICAgdGhpcy5nZXRBY3Rpdml0eVNsaWRlQ291bnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gXy53aGVyZShzZWxmLmdldFNsaWRlTm9kZURhdGFzKCksIHsgdHlwZTogJ0FDVElWSVRZX01BUCcgfSkubGVuZ3RoO1xyXG4gICAgfTsgIFxyXG5cclxuICAgIHRoaXMuZ2V0U2xpZGVUeXBlID0gZnVuY3Rpb24odHlwZU5hbWUpIHtcclxuICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUoc2VsZi5zbGlkZVR5cGVzLCB7IG5hbWU6IHR5cGVOYW1lIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldEN1cnJlbnRTbGlkZVR5cGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xyXG4gICAgICAgIGlmIChzbGlkZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUoc2VsZi5zbGlkZVR5cGVzLCB7IG5hbWU6IHNsaWRlLmRhdGEudHlwZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIHNsaWRlRGF0YSA9IF8uZmluZChzZWxmLmdldFNsaWRlTm9kZURhdGFzKCksIGZ1bmN0aW9uIChzbGlkZURhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNsaWRlRGF0YS5pbmRleCA9PSBpbmRleDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoc2xpZGVEYXRhICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRpYWdyYW0uZmluZE5vZGVGb3JLZXkoc2xpZGVEYXRhLmtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBpbmNyZW1lbnQgaXMgLTEgb3IgKzFcclxuICAgIHRoaXMubW92ZVNsaWRlID0gZnVuY3Rpb24gKGluZGV4LCBpbmNyZW1lbnQpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpO1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3IgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4ICsgaW5jcmVtZW50KTtcclxuICAgICAgICAgICAgaWYgKHNsaWRlICYmIG5laWdoYm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtb3ZlU2xpZGU6IHN3YXBwaW5nICcgKyBzbGlkZS5kYXRhLmtleSArICcgd2l0aCAnICsgbmVpZ2hib3IuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwibW92ZSBzbGlkZVwiKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHNsaWRlLmRhdGEsICdpbmRleCcsIHNsaWRlLmRhdGEuaW5kZXggKyBpbmNyZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobmVpZ2hib3IuZGF0YSwgJ2luZGV4JywgbmVpZ2hib3IuZGF0YS5pbmRleCAtIGluY3JlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwibW92ZSBzbGlkZVwiKTtcclxuICAgICAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gY29tcGFjdFNsaWRlSW5kZXhlcygpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjb21wYWN0U2xpZGVJbmRleGVzJyk7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZXNEYXRhID0gc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpO1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IDE7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcImNvbXBhY3Qgc2xpZGUgaW5kZXhlc1wiKTtcclxuICAgICAgICAgICAgXy5lYWNoKHNsaWRlc0RhdGEsIGZ1bmN0aW9uIChzbGlkZURhdGEpIHtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHNsaWRlRGF0YSwgJ2luZGV4JywgbmV3SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY29tcGFjdFNsaWRlSW5kZXhlczogc2V0IGluZGV4IGZvciAnICsgc2xpZGVEYXRhLmtleSArICcgdG8gJyArIG5ld0luZGV4KTtcclxuICAgICAgICAgICAgICAgIG5ld0luZGV4Kys7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiY29tcGFjdCBzbGlkZSBpbmRleGVzXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldE5ld1NsaWRlS2V5KCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgaSA9IDE7XHJcbiAgICAgICAgd2hpbGUgKGRpYWdyYW0ubW9kZWwuZmluZE5vZGVEYXRhRm9yS2V5KCdzbGlkZS0nICsgaSkpIHtcclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJ3NsaWRlLScgKyBpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE5COiBpbmRleGVzIChhbmQga2V5cz8pIG11c3QgYmUgMS1iYXNlZCwgb3RoZXJ3aXNlIGZpcnN0IHNsaWRlIGdldHMgc2NyZXdlZCB1cFxyXG4gICAgLy8gKHNvbWV3aGVyZSB0aGUgaW5kZXggc2hvd3MgdXAgYXMgJycgaW5zdGVhZCBvZiAwKVxyXG4gICAgZnVuY3Rpb24gZ2V0TmV3U2xpZGVJbmRleCgpIHtcclxuICAgICAgICB2YXIgc2xpZGVzID0gc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpO1xyXG4gICAgICAgIHJldHVybiBzbGlkZXMubGVuZ3RoICsgMTsgXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5hZGRTbGlkZSA9IGZ1bmN0aW9uICh0eXBlTmFtZSkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2FkZFNsaWRlOiAnICsgdHlwZU5hbWUpO1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGIgPSBtYXAuY29tcHV0ZU1hcEJvdW5kcygpO1xyXG4gICAgICAgICAgICBkYi5pbmZsYXRlKGRiLndpZHRoIC8gMjAsIGRiLmhlaWdodCAvIDEwKTtcclxuICAgICAgICAgICAgdmFyIG5ld0xvYyA9IGRiLnggKyAnICcgKyBkYi55O1xyXG4gICAgICAgICAgICB2YXIgbmV3SW5kZXggPSBnZXROZXdTbGlkZUluZGV4KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2xpZGVUeXBlID0gXy5maW5kV2hlcmUoc2VsZi5zbGlkZVR5cGVzLCB7IG5hbWU6IHR5cGVOYW1lIH0pO1xyXG5cclxuICAgICAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiYWRkIHNsaWRlXCIpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLmFkZE5vZGVEYXRhKHtcclxuICAgICAgICAgICAgICAgIGtleTogZ2V0TmV3U2xpZGVLZXkoKSxcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnc2xpZGUnLFxyXG4gICAgICAgICAgICAgICAgaW5kZXg6IG5ld0luZGV4LFxyXG4gICAgICAgICAgICAgICAgaXNHcm91cDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogZGIud2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGRiLmhlaWdodCxcclxuICAgICAgICAgICAgICAgIGxvYzogbmV3TG9jLFxyXG4gICAgICAgICAgICAgICAgbGV2ZWw6IDAsXHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogMCxcclxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgbm90ZXM6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hlY2tzOiBbXSxcclxuICAgICAgICAgICAgICAgIGhhc1JlZ2lvbjogc2xpZGVUeXBlLmhhc01hcFJlZ2lvbixcclxuICAgICAgICAgICAgICAgIGlzU3VtbWFyeTogc2xpZGVUeXBlLmhhc01hcFN1bW1hcnksXHJcbiAgICAgICAgICAgICAgICBsaW5rczogW11cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJhZGQgc2xpZGVcIik7XHJcbiAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XHJcblxyXG4gICAgICAgICAgICBzZWxmLnNsaWRlVGh1bWJuYWlsU2VsZWN0ZWQobmV3SW5kZXgpOyAvLyB0cmlnZ2VyIGRpc3BsYXkgb2YgZWRpdCBmb3JtLCB6b29tIHRvIG1hcCByZWdpb24gaWYgYXBwbGljYWJsZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmR1cGxpY2F0ZVNsaWRlID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgbmV3SW5kZXggPSBnZXROZXdTbGlkZUluZGV4KCk7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpOyBcclxuICAgICAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJkdXBsaWNhdGUgc2xpZGVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gYnVtcCB1cCBpbmRleGVzIG9uIHN1YnNlcXVlbnQgc2xpZGVzIHRvIG1ha2Ugcm9vbSBmb3IgbmV3IHNsaWRlIGFmdGVyIGN1cnJlbnQgb25lXHJcbiAgICAgICAgICAgICAgICBfLmVhY2goc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLCBmdW5jdGlvbiAoc2xpZGVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlRGF0YS5pbmRleCA+IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHNsaWRlRGF0YSwgJ2luZGV4Jywgc2xpZGVEYXRhLmluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTkI6IGNyZWF0aW5nIGEgbmV3IG5vZGVEYXRhIG9iamVjdCBoZXJlIHJhdGhlciB0aGFuIGNvcHlpbmcgYW5kIG1vZGlmeWluZywgdG8gYXZvaWQgY29weWluZyAkJGhhc2hLZXkgKD8/KVxyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiBnZXROZXdTbGlkZUtleSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnc2xpZGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNHcm91cDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHNsaWRlLmRhdGEud2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBzbGlkZS5kYXRhLmhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBsb2M6IHNsaWRlLmRhdGEubG9jLFxyXG4gICAgICAgICAgICAgICAgICAgIGxldmVsOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHNsaWRlLmRhdGEudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogc2xpZGUuZGF0YS50aXRsZSArICcgKENvcHkpJyxcclxuICAgICAgICAgICAgICAgICAgICBub3Rlczogc2xpZGUuZGF0YS5ub3RlcyxcclxuICAgICAgICAgICAgICAgICAgICBjaGVja3M6IHNsaWRlLmRhdGEuY2hlY2tzLCAvLyBjbG9uZT9cclxuICAgICAgICAgICAgICAgICAgICBoYXNSZWdpb246IHNsaWRlLmRhdGEuaGFzUmVnaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzU3VtbWFyeTogc2xpZGUuZGF0YS5pc1N1bW1hcnksXHJcbiAgICAgICAgICAgICAgICAgICAgbGlua3M6IHNsaWRlLmRhdGEubGlua3MgLy8gY2xvbmU/XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJkdXBsaWNhdGUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgICAgICB0aHVtYm5haWxDYWNoZSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucmVtb3ZlU2xpZGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdyZW1vdmVTbGlkZTogJyArIGluZGV4KTtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTsgXHJcbiAgICAgICAgICAgIGlmIChzbGlkZSkge1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwicmVtb3ZlIHNsaWRlXCIpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5yZW1vdmVOb2RlRGF0YShzbGlkZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJyZW1vdmUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50U2xpZGVJbmRleCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XHJcbiAgICAgICAgICAgIGNvbXBhY3RTbGlkZUluZGV4ZXMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHRodW1ibmFpbENhY2hlID0gW107XHJcblxyXG4gICAgdGhpcy5nZXRTbGlkZVRodW1ibmFpbCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aHVtYm5haWxDYWNoZVtpbmRleF07XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlU2xpZGVUaHVtYm5haWxzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgXy5lYWNoKHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKSwgZnVuY3Rpb24obmQpIHsgXHJcbiAgICAgICAgICAgIHNlbGYuY3JlYXRlU2xpZGVUaHVtYm5haWwobmQuaW5kZXgpOyBcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGVTbGlkZVRodW1ibmFpbCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NyZWF0ZVNsaWRlVGh1bWJuYWlsJyk7XHJcblxyXG4gICAgICAgIHZhciB0aHVtYldpZHRoID0gMTAwMDtcclxuICAgICAgICB2YXIgdGh1bWJIZWlnaHQgPSA2MDA7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG5cclxuICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTtcclxuICAgICAgICBpZiAoIXNsaWRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIXNsaWRlLmRhdGEuaGFzUmVnaW9uICYmICFzbGlkZS5kYXRhLmlzU3VtbWFyeSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgZGIgPSBkaWFncmFtLmRvY3VtZW50Qm91bmRzO1xyXG4gICAgICAgICAgICB2YXIgc2I7XHJcbiAgICAgICAgICAgIGlmIChzbGlkZS5kYXRhLmlzU3VtbWFyeSkgeyAvLyBmb3IgYSBzdW1tYXJ5IHNsaWRlIHdlIHNob290IHRoZSB3aG9sZSBtYXBcclxuICAgICAgICAgICAgICAgIHNiID0gbWFwLnNhZmVSZWN0KG1hcC5jb21wdXRlTWFwQm91bmRzKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgeyAvLyBvdGhlcndpc2UganVzdCBzaG9vdCB0aGUgc2xpZGUgcmVnaW9uXHJcbiAgICAgICAgICAgICAgICBzYiA9IHNsaWRlLnBhcnQuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgaW1hZ2VQb3NpdGlvbiA9IG5ldyBnby5Qb2ludChzYi54LCBzYi55KTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2xpZGVUaHVtYm5haWwsIHNsaWRlIGJvdW5kczogJyArIHNiICsgJywgZG9jdW1lbnQgYm91bmRzOiAnICsgZGIgKyAnLCBpbWFnZVBvc2l0aW9uOiAnICsgaW1hZ2VQb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICB2YXIgd1NjYWxlID0gdGh1bWJXaWR0aCAvIHNiLndpZHRoO1xyXG4gICAgICAgICAgICB2YXIgaFNjYWxlID0gdGh1bWJIZWlnaHQgLyBzYi5oZWlnaHQ7XHJcbiAgICAgICAgICAgIHZhciB0aHVtYlNjYWxlID0gTWF0aC5taW4od1NjYWxlLCBoU2NhbGUpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdzY2FsZTogJyArIHdTY2FsZSArICcsJyArIGhTY2FsZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdyA9IHRodW1iU2NhbGUgKiBzYi53aWR0aDtcclxuICAgICAgICAgICAgdmFyIGggPSB0aHVtYlNjYWxlICogc2IuaGVpZ2h0O1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd0aHVtYm5haWwgdy9oOiAnICsgdyArICcsJyArIGgpO1xyXG5cclxuICAgICAgICAgICAgLy8gaGlkZSBzbGlkZXMgdGVtcG9yYXJpbHkgd2hpbGUgY3JlYXRpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IHRydWU7XHJcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSB0aHVtYlNjYWxlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGltZ0RhdGEgPSBkaWFncmFtLm1ha2VJbWFnZURhdGEoe1xyXG4gICAgICAgICAgICAgICAgc2l6ZTogbmV3IGdvLlNpemUodywgaCksXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogaW1hZ2VQb3NpdGlvbixcclxuICAgICAgICAgICAgICAgIHNjYWxlOiB0aHVtYlNjYWxlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc2VsZi5pc0NyZWF0aW5nVGh1bWJuYWlsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgICAgIHRodW1ibmFpbENhY2hlW2luZGV4XSA9IGltZ0RhdGE7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaW1nRGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGdldHMgYSB0aHVtYm5haWwgb2YgdGhlIHdob2xlIG1hcCwgZm9yIHNhdmluZyAoc2VlIGF1dG9zYXZlLmpzKVxyXG4gICAgdGhpcy5nZXRNYXBUaHVtYm5haWwgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgc2IgPSBtYXAuc2FmZVJlY3QobWFwLmNvbXB1dGVNYXBCb3VuZHMoKSk7XHJcbiAgICAgICAgc2IuZ3JvdygxMCwxMCwxMCwxMCk7XHJcbiAgICAgICAgdmFyIHcgPSAxNTA7XHJcbiAgICAgICAgdmFyIGggPSAxMDA7XHJcblxyXG4gICAgICAgIC8vIGhpZGUgc2xpZGVzIHRlbXBvcmFyaWx5IHdoaWxlIGNyZWF0aW5nIHRodW1ibmFpbFxyXG4gICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IHRydWU7XHJcbiAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG5cclxuICAgICAgICB2YXIgaW1nRGF0YSA9IGRpYWdyYW0ubWFrZUltYWdlRGF0YSh7XHJcbiAgICAgICAgICAgIHNjYWxlOiBNYXRoLm1pbihoIC8gc2IuaGVpZ2h0LCB3IC8gc2Iud2lkdGgpLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KHNiLngsIHNiLnkpLFxyXG4gICAgICAgICAgICBzaXplOm5ldyBnby5TaXplKHcsIGgpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IGZhbHNlO1xyXG4gICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGltZ0RhdGE7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyBjYWxsZWQgdmlhIG5nLWNsaWNrIG9uIHRodW1ibmFpbFxyXG4gICAgdGhpcy5zbGlkZVRodW1ibmFpbFNlbGVjdGVkID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2xpZGVUaHVtYm5haWxTZWxlY3RlZDogJyArIGluZGV4KTtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcblxyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIE5COiBvcmRlciBvZiBzdGF0ZW1lbnRzIGlzIGltcG9ydGFudCBoZXJlLCBhcyBzZWxlY3RTbGlkZSBjYW4gdHJpZ2dlciBjaGFuZ2VkU2VsZWN0aW9uIHdpdGggYW4gZW1wdHkgc2VsZWN0aW9uIHNvbWV0aW1lcy4uLiA/P1xyXG4gICAgICAgICAgICBzZWxlY3RTbGlkZShpbmRleCk7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpOyAvLyBzaG93L2hpZGUgc2xpZGUgbm9kZXMgLSBzZWUgdGVtcGxhdGVzLmpzOiBzbGlkZVRlbXBsYXRlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIHpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc1ByZXNlbnRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dUT0MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm5lZWRzTmFycm93Q2FudmFzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICByZXR1cm4gbWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9QUkVTRU5URVIpICYmIFxyXG4gICAgICAgICAgIHNsaWRlICE9IG51bGwgJiYgXHJcbiAgICAgICAgICAgKHNsaWRlLmRhdGEudHlwZSA9PSAnVElUTEVfQk9EWV9NQVAnIHx8IHNsaWRlLmRhdGEudHlwZSA9PSAnQUNUSVZJVFlfTUFQJyB8fCBzbGlkZS5kYXRhLnR5cGUgPT0gJ01BUF9TVU1NQVJZJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNldHMgdGhlIHNsaWRlIG5vZGUgYXMgc2VsZWN0ZWQgaW4gdGhlIGRpYWdyYW0uXHJcbiAgICBmdW5jdGlvbiBzZWxlY3RTbGlkZShpbmRleCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3NlbGVjdCBzbGlkZTogJyArIGluZGV4KTtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiBzY3JvbGwgdG8gc2xpZGU/XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wbGF5U2xpZGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgbWFwLmdldFVpKCkub3BlblRhYihtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKTsgXHJcblxyXG4gICAgICAgIHZhciBzbGlkZXMgPSBzZWxmLmdldFNsaWRlTm9kZURhdGFzKCk7XHJcbiAgICAgICAgaWYgKHNsaWRlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc2VsZi5zaG93VE9DID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHByZXNlbnRTbGlkZShpbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBpbmNyZW1lbnQgaXMgLTEgb3IgKzFcclxuICAgIHRoaXMuYWR2YW5jZVNsaWRlID0gZnVuY3Rpb24gKGluY3JlbWVudCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2FkdmFuY2VTbGlkZSwgY3VycmVudFNsaWRlSW5kZXg6ICcgKyBzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggKz0gKGluY3JlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc1ByZXNlbnRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVzZW50U2xpZGUoc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gcHJlc2VudFNsaWRlKGluZGV4KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygncHJlc2VudFNsaWRlJyk7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTtcclxuICAgICAgICAgICAgaWYgKCFzbGlkZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIC8vIE5COiBuZWVkIHRvIHNldCB0aGlzIGFmdGVyIGNsZWFyU2VsZWN0aW9uLCBhcyB0aGF0IHdpbGwgc2V0IGl0IHRvIG51bGwhIChzZWUgY2hhbmdlZFNlbGVjdGlvbilcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50U2xpZGVJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3ByZXNlbnRTbGlkZSwgaW5kZXg6ICcgKyBpbmRleCArICcsIHNsaWRlOiAnICsgc2xpZGUgKyAnLCBjdXJyZW50U2xpZGVJbmRleDogJyArIHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xyXG5cclxuICAgICAgICAgICAgbWF5YmVJbml0U2xpZGVCbG9ja2VyKCk7XHJcbiAgICAgICAgICAgIHZhciBibG9ja2VyVyA9IHNlbGYuU0xJREVfQkxPQ0tFUl9XSURUSDtcclxuXHJcbiAgICAgICAgICAgIGlmIChzbGlkZS5kYXRhLmhhc1JlZ2lvbikge1xyXG4gICAgICAgICAgICAgICAgem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2hvdyBzbGlkZSBibG9ja2VyXHJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci5kZXNpcmVkU2l6ZSA9IG5ldyBnby5TaXplKFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlLmFjdHVhbEJvdW5kcy53aWR0aCArIDIgKiBibG9ja2VyVywgXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuYWN0dWFsQm91bmRzLmhlaWdodCArIDIgKiBibG9ja2VyVyk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci5sb2NhdGlvbiA9IG5ldyBnby5Qb2ludChcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMueCAtIGJsb2NrZXJXLCBcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMueSAtIGJsb2NrZXJXKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2xpZGVCbG9ja2VyLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc2xpZGVCbG9ja2VyOiAnICsgc2VsZi5zbGlkZUJsb2NrZXIuYWN0dWFsQm91bmRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzbGlkZS5kYXRhLmlzU3VtbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5yZXNldFpvb20oKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2xpZGVCbG9ja2VyLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2VsZi5pc1ByZXNlbnRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3ByZXNlbnRlci1wbGF5aW5nJyk7XHJcblxyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7IC8vIGhpZGUgc2xpZGUgbm9kZXMgLSBzZWUgdGVtcGxhdGVzLmpzOiBzbGlkZVRlbXBsYXRlXHJcbiAgICAgICAgfSk7ICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICAvLyB6b29tIHRoZSBkaWFncmFtIHRvIHNob3cgdGhlIGdpdmVuIHNsaWRlIGluIHRoZSBjZW50ZXIgb2YgdGhlIGNhbnZhc1xyXG4gICAgZnVuY3Rpb24gem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSlcclxuICAgIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyIGhhbGZXaWR0aCA9IChzbGlkZS5kYXRhLnR5cGUgIT0gJ01BUF9PTkxZJyk7XHJcbiAgICAgICAgdmFyIHpvb21SZWN0ID0gc2VsZi5nZXRMZXR0ZXJib3hlZFJlY3Qoc2xpZGUuYWN0dWFsQm91bmRzLCBoYWxmV2lkdGgpO1xyXG4gICAgICAgIHpvb21SZWN0LmluZmxhdGUoem9vbVJlY3Qud2lkdGggLyAxMCwgem9vbVJlY3QuaGVpZ2h0IC8gMTApO1xyXG4gICAgICAgIGRpYWdyYW0uem9vbVRvUmVjdCh6b29tUmVjdCwgZ28uRGlhZ3JhbS5Vbmlmb3JtKTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgYSByZWN0YW5nbGUgY29udGFpbmluZyB0aGUgZ2l2ZW4gcmVjdCwgYnV0IHdpdGggYXBwcm9wcmlhdGUgd2lkdGggb3IgaGVpZ2h0IGFkZGVkXHJcbiAgICAvLyB0byBnaXZlIGl0IHNhbWUgYXNwZWN0IHJhdGlvIGFzIHRoZSBkaWFncmFtLlxyXG4gICAgdGhpcy5nZXRMZXR0ZXJib3hlZFJlY3QgPSBmdW5jdGlvbiAocmVjdCwgaGFsZldpZHRoKSB7XHJcblxyXG4gICAgICAgIC8vIE5COiB3ZSBjYWxjdWxhdGUgdGhlIGFzcGVjdCByYXRpbyB3aGVuIHRoZSB0YWIgaXMgb3BlbmVkLCBcclxuICAgICAgICAvLyByYXRoZXIgdGhhbiBlYWNoIHRpbWUgYXMgdGhlIGRpYWdyYW0gc2l6ZSBtaWdodCBiZSBjaGFuZ2luZy4uLlxyXG4gICAgICAgIHZhciBkYXIgPSAoaGFsZldpZHRoID8gc2VsZi5kaWFncmFtQXNwZWN0UmF0aW8gLyAyIDogc2VsZi5kaWFncmFtQXNwZWN0UmF0aW8pO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3JlY3Q6ICcgKyByZWN0ICsgJywgZGFyOiAnICsgZGFyKTtcclxuXHJcbiAgICAgICAgdmFyIHJlY3RBc3BlY3RSYXRpbyA9IHJlY3Qud2lkdGggLyByZWN0LmhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKGRhciA+IHJlY3RBc3BlY3RSYXRpbykge1xyXG4gICAgICAgICAgICAvLyB0YWxsIHNraW5ueSByZWN0LCBzaG9ydCB3aWRlIHRhcmdldCBBUiwgc28gYWRkIHNpZGUgcGFkZGluZyB0byB0aGUgcmVjdFxyXG4gICAgICAgICAgICB2YXIgbGJ3ID0gcmVjdC5oZWlnaHQgKiBkYXI7IC8vIGJlY2F1c2UgbGJ3IC8gbGJoID09IGRhciA9PSBsYncgLyByZWN0LmhlaWdodCAobGJoID09IHJlY3QuaGVpZ2h0KVxyXG4gICAgICAgICAgICByZXR1cm4gcmVjdC5jb3B5KCkuaW5mbGF0ZSgobGJ3IC0gcmVjdC53aWR0aCkgLyAyLCAwKTsgLy8gYWRkIGhhbGYgdGhlIHdpZHRoIGRpZmZlcmVuY2UgdG8gZWFjaCBzaWRlIG9mIHRoZSByZWN0XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBzaG9ydCB3aWRlIHJlY3QsIHRhbGwgc2tpbm55IHRhcmdldCBBUiwgc28gYWRkIHRvcC9ib3R0b20gcGFkZGluZyB0byB0aGUgcmVjdFxyXG4gICAgICAgICAgICB2YXIgbGJoID0gcmVjdC53aWR0aCAvIGRhcjsgLy8gYmVjYXVzZSBsYncgLyBsYmggPT0gZGFyID09IGxiaCAvIHJlY3Qud2lkdGggKGxidyA9PSByZWN0LndpZHRoKVxyXG4gICAgICAgICAgICByZXR1cm4gcmVjdC5jb3B5KCkuaW5mbGF0ZSgwLCAobGJoIC0gcmVjdC5oZWlnaHQpIC8gMik7ICAvLyBhZGQgaGFsZiB0aGUgaGVpZ2h0IGRpZmZlcmVuY2UgdG8gdG9wL2JvdHRvbSBvZiB0aGUgcmVjdFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zdG9wUHJlc2VudGluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdzdG9wUHJlc2VudGluZywgY3VycmVudFNsaWRlSW5kZXg6ICcgKyBzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNlbGYuc2xpZGVCbG9ja2VyKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vc2VsZi5jdXJyZW50U2xpZGVJbmRleCA9IG51bGw7XHJcbiAgICAgICAgICAgIHNlbGYuaXNQcmVzZW50aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygncHJlc2VudGVyLXBsYXlpbmcnKTtcclxuXHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTsgLy8gc2hvdyBzbGlkZSBub2Rlc1xyXG5cclxuICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAvL21hcC5nZXRVaSgpLnJlc2V0Wm9vbSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbn07XHJcbiIsIi8vIGZ1bmN0aW9ucyBmb3Igc2hhcmluZyBtYXBzLCB3aXRoIGEgbW9kYWwgZGlhbG9nXHJcblxyXG53aW5kb3cuU2FuZGJhbmtTaGFyaW5nID0ge307XHJcblxyXG5TYW5kYmFua1NoYXJpbmcgPSBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkcmVzb3VyY2UsICRtb2RhbCwgJGxvZykge1xyXG5cclxuICAgIHRoaXMub3Blbk1vZGFsID0gZnVuY3Rpb24obWFwSWRzLCBvblVwZGF0ZSkge1xyXG4gICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlX21hcF9zaGFyaW5nX21vZGFsLmh0bWwnLCAvLyBzZWUgdmlld3Mvc2hhcmVzL190ZW1wbGF0ZV9tYXBfc2hhcmluZ19tb2RhbFxyXG4gICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IHNoYXJpbmdNb2RhbEN0cmwsXHJcbiAgICAgICAgICAgIHdpbmRvd0NsYXNzOiAnc2hhcmluZy1tb2RhbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIHVzZXJJZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS51c2VySWQ7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXNlclByb2ZpbGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGU7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbWFwSWRzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFwSWRzO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25VcGRhdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbigpIHt9KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBjb250cm9sbGVyIGZvciBzaGFyaW5nIG1vZGFsIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHZhciBzaGFyaW5nTW9kYWxDdHJsID0gZnVuY3Rpb24oJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSwgdXNlcklkLCB1c2VyUHJvZmlsZSwgbWFwSWRzLCBvblVwZGF0ZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUudXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgICRzY29wZS51c2VyUHJvZmlsZSA9IHVzZXJQcm9maWxlO1xyXG4gICAgICAgICRzY29wZS5tYXBJZHMgPSBtYXBJZHM7XHJcblxyXG4gICAgICAgIC8vIGFsbCBleGlzdGluZyBzaGFyZXMgZm9yIHNlbGVjdGVkIG1hcHNcclxuICAgICAgICAvLyBmb3JtYXQ6IFt7bWFwSWQ6MSwgc2hhcmVJZDoxLCBjYW5FZGl0OnRydWUsIHVzZXJJZDoyLCB1c2VyRW1haWw6J2Zvb0BiYXIuY29tJywgZ3JvdXBJZDpudWxsLCBvcmdhbml6YXRpb25JZDpudWxsLCBpc1B1YmxpYzpmYWxzZSB9LCAuLi5dXHJcbiAgICAgICAgJHNjb3BlLm1hcFNoYXJlcyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBleGlzdGluZyBzaGFyZXMsIGdyb3VwZWQgZm9yIGRpc3BsYXlcclxuICAgICAgICAvLyBmb3JtYXQ6IFt7bmFtZTonZm9vJywgdXNlckVtYWlsOidmb29AYmFyLmNvbScsIHVzZXJJZDogbnVsbCwgZ3JvdXBJZDogaWQsIG9yZ2FuaXphdGlvbklkOiBudWxsLCBpc1B1YmxpYzpmYWxzZSwgY2FuRWRpdDp0cnVlLCBtYXBJZHM6WzEsMl19LCAuLi5dXHJcbiAgICAgICAgJHNjb3BlLmV4aXN0aW5nU2hhcmVzID0gW107XHJcblxyXG4gICAgICAgIC8vIG5ldyBzaGFyZXMgYWRkZWQgaW4gdGhlIGRpYWxvZyBcclxuICAgICAgICAvLyBmb3JtYXQ6IFt7c2hhcmVUeXBlOlNIQVJFX1RZUEVfSU5ESVZJRFVBTCwgc2hhcmVQZXJtaXNzaW9uOlNIQVJFX1BFUk1JU1NJT05fQ0FOVklFVywgdXNlckVtYWlsOidmb29AYmFyLmNvbScsIGdyb3VwSWQ6bnVsbCwgb3JnYW5pemF0aW9uSWQ6bnVsbCwgaXNQdWJsaWM6ZmFsc2UgfSwgLi4uXVxyXG4gICAgICAgICRzY29wZS5uZXdTaGFyZXMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gYWxsIHVwZGF0ZWQgc2hhcmVzLCB0byBiZSBzYXZlZFxyXG4gICAgICAgIC8vIGZvcm1hdDogW3ttYXBJZDoxLCBjYW5FZGl0OmZhbHNlLCB1c2VyRW1haWw6J2Zvb0BiYXIuY29tJywgZ3JvdXBJZDpudWxsLCBvcmdhbml6YXRpb25JZDpudWxsLCBpc1B1YmxpYzpmYWxzZSB9LCAuLi5dXHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZWRTaGFyZXMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gaW5kZXhlcyBvZiB1c2Vycy9ncm91cHMvb3JncyAtIGZvcm1hdDogW3tpZDoxLCBuYW1lOidmb28nfSwgLi4uXVxyXG4gICAgICAgICRzY29wZS51c2VycyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5ncm91cHMgPSBbXTtcclxuICAgICAgICAkc2NvcGUub3JnYW5pemF0aW9ucyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBjb25zdGFudHNcclxuICAgICAgICAkc2NvcGUuU0hBUkVfVFlQRV9JTkRJVklEVUFMID0gJ09uZSBvciBtb3JlIEluZGl2aWR1YWxzJztcclxuICAgICAgICAkc2NvcGUuU0hBUkVfVFlQRV9HUk9VUCA9ICdHcm91cCc7XHJcbiAgICAgICAgJHNjb3BlLlNIQVJFX1RZUEVfT1JHQU5JWkFUSU9OID0gJ1RoaW5rTmF0aW9uJztcclxuICAgICAgICAkc2NvcGUuU0hBUkVfVFlQRV9QVUJMSUMgPSAnQWxsIE1ldGFNYXAgVXNlcnMnO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2hhcmVUeXBlcyA9IFtcclxuICAgICAgICAgICAgJHNjb3BlLlNIQVJFX1RZUEVfSU5ESVZJRFVBTCxcclxuICAgICAgICAgICAgLy8kc2NvcGUuU0hBUkVfVFlQRV9HUk9VUCwgXHJcbiAgICAgICAgICAgICRzY29wZS5TSEFSRV9UWVBFX09SR0FOSVpBVElPTixcclxuICAgICAgICAgICAgJHNjb3BlLlNIQVJFX1RZUEVfUFVCTElDXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FOVklFVyA9ICdDYW4gdmlldyc7XHJcbiAgICAgICAgJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FORURJVCA9ICdDYW4gZWRpdCc7XHJcblxyXG4gICAgICAgICRzY29wZS5zaGFyZVBlcm1pc3Npb25zID0gW1xyXG4gICAgICAgICAgICAkc2NvcGUuU0hBUkVfUEVSTUlTU0lPTl9DQU5WSUVXLFxyXG4gICAgICAgICAgICAkc2NvcGUuU0hBUkVfUEVSTUlTU0lPTl9DQU5FRElUXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhblNoYXJlQ3VsdHVyZU1hcCA9IGZ1bmN0aW9uKHNoYXJlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmZpbmRXaGVyZSgkc2NvcGUudXNlclByb2ZpbGUubWVtYmVyc2hpcHMsIHtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBzaGFyZS5vcmdhbml6YXRpb25JZCxcclxuICAgICAgICAgICAgICAgIGxlYWRlcjogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBnZXQgZXhpc3Rpbmcgc2hhcmVzXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZFNoYXJlcyhtYXBJZHMpIHtcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCcvc2hhcmVzL21hcF9zaGFyZXMuanNvbj9pZHM9JyArIG1hcElkcy5qb2luKCcsJykpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1hcFNoYXJlcyA9IHJlc3BvbnNlLmRhdGEubWFwU2hhcmVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnMgPSByZXNwb25zZS5kYXRhLnVzZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ3JvdXBzID0gcmVzcG9uc2UuZGF0YS5ncm91cHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmdhbml6YXRpb25zID0gcmVzcG9uc2UuZGF0YS5vcmdhbml6YXRpb25zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0RXhpc3RpbmdTaGFyZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuZXhpc3RpbmdTaGFyZXMubGVuZ3RoICYmICRzY29wZS5jYW5BZGROZXdTaGFyZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmV3U2hhcmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgnQ291bGQgbm90IGxvYWQgc2hhcmluZyBpbmZvJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvYWRTaGFyZXMobWFwSWRzKTtcclxuXHJcbiAgICAgICAgLy8gZ3JvdXAgdGhlIGV4aXN0aW5nIHNoYXJlcyBieSB1c2VyLCBncm91cCwgb3JnIGFuZCBwdWJsaWNcclxuICAgICAgICBmdW5jdGlvbiBpbml0RXhpc3RpbmdTaGFyZXMoKSB7XHJcbiAgICAgICAgICAgIC8vIGZpbmQgYWxsIGVtYWlscyB0aGF0IG9jY3VyIGluIGEgc2hhcmVcclxuICAgICAgICAgICAgdmFyIHVzZXJFbWFpbHMgPSBfLndpdGhvdXQoXy51bmlxKF8ucGx1Y2soJHNjb3BlLm1hcFNoYXJlcywgJ3VzZXJFbWFpbCcpKSwgbnVsbCk7XHJcbiAgICAgICAgICAgIC8vIGJ1aWxkIGFuIGFycmF5IG9mIHNoYXJlcywgb25lIGZvciBlYWNoIGVtYWlsLCB3aXRoIHRoZSBhcHBsaWNhYmxlIG1hcCBJRHNcclxuICAgICAgICAgICAgdmFyIHNoYXJlc0J5VXNlckVtYWlsID0gXy5tYXAodXNlckVtYWlscywgZnVuY3Rpb24oZW1haWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VyID0gXy5maW5kV2hlcmUoJHNjb3BlLnVzZXJzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNEZWxldGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogKHVzZXIgPyB1c2VyLmlkIDogbnVsbCksXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNDdWx0dXJlTWFwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBlbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICAvLyBOQjogZm9yIHRoaXMgYXR0cmlidXRlIHdlIGRvbid0IHRyeSB0byBzdW1tYXJpemUgdGhlIHZhbHVlIGZvciBhbGwgdGhlIGV4aXN0aW5nIHNoYXJlcywgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYmVjYXVzZSBpdCB3b3VsZCBiZSB0b28gY29tcGxpY2F0ZWQgdG8gZGlzcGxheS4uLlxyXG4gICAgICAgICAgICAgICAgICAgIGNhbkVkaXQ6ICRzY29wZS5tYXBTaGFyZXMubGVuZ3RoID09IDEgJiYgJHNjb3BlLm1hcFNoYXJlc1swXS5jYW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcElkczogXy5wbHVjayhfLndoZXJlKCRzY29wZS5tYXBTaGFyZXMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBlbWFpbFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLCAnbWFwSWQnKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZ3JvdXBJZHMgPSBfLndpdGhvdXQoXy51bmlxKF8ucGx1Y2soJHNjb3BlLm1hcFNoYXJlcywgJ2dyb3VwSWQnKSksIG51bGwpO1xyXG4gICAgICAgICAgICB2YXIgc2hhcmVzQnlHcm91cElkID0gXy5tYXAoZ3JvdXBJZHMsIGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBfLmZpbmRXaGVyZSgkc2NvcGUuZ3JvdXBzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNEZWxldGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzUHVibGljOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpc0N1bHR1cmVNYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdHcm91cDogJyArIChncm91cCA/IGdyb3VwLm5hbWUgOiAnJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuRWRpdDogJHNjb3BlLm1hcFNoYXJlcy5sZW5ndGggPT0gMSAmJiAkc2NvcGUubWFwU2hhcmVzWzBdLmNhbkVkaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwSWRzOiBfLnBsdWNrKF8ud2hlcmUoJHNjb3BlLm1hcFNoYXJlcywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBpZFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLCAnbWFwSWQnKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3JnYW5pemF0aW9uSWRzID0gXy53aXRob3V0KF8udW5pcShfLnBsdWNrKCRzY29wZS5tYXBTaGFyZXMsICdvcmdhbml6YXRpb25JZCcpKSwgbnVsbCk7XHJcbiAgICAgICAgICAgIHZhciBzaGFyZXNCeU9yZ2FuaXphdGlvbklkID0gXy5tYXAob3JnYW5pemF0aW9uSWRzLCBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yZ2FuaXphdGlvbiA9IF8uZmluZFdoZXJlKCRzY29wZS5vcmdhbml6YXRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNEZWxldGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzUHVibGljOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpc0N1bHR1cmVNYXA6ICRzY29wZS5tYXBTaGFyZXMubGVuZ3RoID09IDEgJiYgJHNjb3BlLm1hcFNoYXJlc1swXS5pc0N1bHR1cmVNYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1RoaW5rTmF0aW9uOiAnICsgKG9yZ2FuaXphdGlvbiA/IG9yZ2FuaXphdGlvbi5uYW1lIDogJycpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbkVkaXQ6ICRzY29wZS5tYXBTaGFyZXMubGVuZ3RoID09IDEgJiYgJHNjb3BlLm1hcFNoYXJlc1swXS5jYW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcElkczogXy5wbHVjayhfLndoZXJlKCRzY29wZS5tYXBTaGFyZXMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGlkXHJcbiAgICAgICAgICAgICAgICAgICAgfSksICdtYXBJZCcpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIGFyZSBhbnkgb2YgdGhlIHNlbGVjdGVkIG1hcHMgc2hhcmVkIHB1YmxpY2x5P1xyXG4gICAgICAgICAgICB2YXIgcHVibGljU2hhcmVzID0gW107XHJcbiAgICAgICAgICAgIGlmIChfLndoZXJlKCRzY29wZS5tYXBTaGFyZXMsIHtcclxuICAgICAgICAgICAgICAgIGlzUHVibGljOiB0cnVlXHJcbiAgICAgICAgICAgIH0pLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcHVibGljU2hhcmVzID0gW3tcclxuICAgICAgICAgICAgICAgICAgICBpc0RlbGV0ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBpc0N1bHR1cmVNYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdFdmVyeW9uZScsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuRWRpdDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwSWRzOiBfLnBsdWNrKF8ud2hlcmUoJHNjb3BlLm1hcFNoYXJlcywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLCAnbWFwSWQnKVxyXG4gICAgICAgICAgICAgICAgfV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5leGlzdGluZ1NoYXJlcyA9IF8udW5pb24oc2hhcmVzQnlVc2VyRW1haWwsIHNoYXJlc0J5R3JvdXBJZCwgc2hhcmVzQnlPcmdhbml6YXRpb25JZCwgcHVibGljU2hhcmVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkVXBkYXRlZFNoYXJlcygpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZWRTaGFyZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vIGZvciBlYWNoIHNlbGVjdGVkIG1hcCwgZGVjb21wb3NlIHRoZSBleGlzdGluZ1NoYXJlcyAoZ3JvdXBlZCBieSB1c2VyL2dyb3VwL29yZy9wdWJsaWMpIGludG8gaW5kaXZpZHVhbCBzaGFyZXMgZm9yIHNhdmluZ1xyXG4gICAgICAgICAgICBfLmVhY2gobWFwSWRzLCBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZ2V0IGV4aXN0aW5nIHNoYXJlcyBmb3IgdGhpcyBtYXBcclxuICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ1NoYXJlc0Zvck1hcElkID0gXy5maWx0ZXIoJHNjb3BlLmV4aXN0aW5nU2hhcmVzLCBmdW5jdGlvbihleGlzdGluZ1NoYXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RpbmdTaGFyZXMgZm9ybWF0OiBbe25hbWU6J2ZvbycsIHVzZXJFbWFpbDonZm9vQGJhci5jb20nLCB1c2VySWQ6IG51bGwsIGdyb3VwSWQ6IGlkLCBvcmdhbml6YXRpb25JZDogbnVsbCwgaXNQdWJsaWM6ZmFsc2UsIGlzQ3VsdHVyZU1hcDpmYWxzZSwgY2FuRWRpdDp0cnVlLCBtYXBJZHM6WzEsMl19LCAuLi5dXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8uY29udGFpbnMoZXhpc3RpbmdTaGFyZS5tYXBJZHMsIGlkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gZGVjb21wb3NlIHRoZXNlIGludG8gaW5kaXZpZHVhbCBzaGFyZXNcclxuICAgICAgICAgICAgICAgIF8uZWFjaChleGlzdGluZ1NoYXJlc0Zvck1hcElkLCBmdW5jdGlvbihlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVkU2hhcmVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05ldzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVsZXRlZDogZXMuaXNEZWxldGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBJZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogZXMudXNlckVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGVzLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogZXMuZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGVzLm9yZ2FuaXphdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogZXMuaXNQdWJsaWMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ3VsdHVyZU1hcDogZXMuaXNDdWx0dXJlTWFwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5FZGl0OiBlcy5jYW5FZGl0XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBhZGQgaW4gdGhlIG5ld1NoYXJlcyAoZm9yIGVhY2ggc2VsZWN0ZWQgbWFwKVxyXG4gICAgICAgICAgICBfLmVhY2gobWFwSWRzLCBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgICAgXy5lYWNoKCRzY29wZS5uZXdTaGFyZXMsIGZ1bmN0aW9uKG5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZWRTaGFyZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTmV3OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBJZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogKG5zLnNoYXJlVHlwZSA9PSAkc2NvcGUuU0hBUkVfVFlQRV9JTkRJVklEVUFMID8gbnMudXNlckVtYWlsIDogbnVsbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IChucy5zaGFyZVR5cGUgPT0gJHNjb3BlLlNIQVJFX1RZUEVfR1JPVVAgPyBucy5ncm91cElkIDogbnVsbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiAobnMuc2hhcmVUeXBlID09ICRzY29wZS5TSEFSRV9UWVBFX09SR0FOSVpBVElPTiA/IG5zLm9yZ2FuaXphdGlvbklkIDogbnVsbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUHVibGljOiBucy5zaGFyZVR5cGUgPT0gJHNjb3BlLlNIQVJFX1RZUEVfUFVCTElDLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0N1bHR1cmVNYXA6IG5zLmlzQ3VsdHVyZU1hcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRWRpdDogKG5zLnNoYXJlVHlwZSA9PSAkc2NvcGUuU0hBUkVfVFlQRV9QVUJMSUMgPyBmYWxzZSA6IG5zLnNoYXJlUGVybWlzc2lvbiA9PSAkc2NvcGUuU0hBUkVfUEVSTUlTU0lPTl9DQU5FRElUKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbnMubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2F2ZVNoYXJlcyhvblVwZGF0ZSkge1xyXG4gICAgICAgICAgICAkaHR0cC5wdXQoJy9zaGFyZXMvdXBkYXRlX21hcF9zaGFyZXMnLCAkc2NvcGUudXBkYXRlZFNoYXJlcykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBzYXZlIHNoYXJpbmcgaW5mbycpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuY2FuRGVsZXRlRXhpc3RpbmdTaGFyZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLmNhbkFkZE5ld1NoYXJlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmRlbGV0ZUV4aXN0aW5nU2hhcmUgPSBmdW5jdGlvbihzaGFyZSkge1xyXG4gICAgICAgICAgICBzaGFyZS5pc0RlbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5BZGROZXdTaGFyZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgYWxsIG1hcHMgYXJlIG93bmVkIGJ5IHRoZSBjdXJyZW50IHVzZXJcclxuICAgICAgICAgICAgdmFyIG1hcFVzZXJJZHMgPSBfLnVuaXEoXy5wbHVjaygkc2NvcGUubWFwU2hhcmVzLCAnbWFwVXNlcklkJykpO1xyXG4gICAgICAgICAgICByZXR1cm4gbWFwVXNlcklkcy5sZW5ndGggPT0gMCB8fCAobWFwVXNlcklkcy5sZW5ndGggPT0gMSAmJiBtYXBVc2VySWRzWzBdID09ICRzY29wZS51c2VySWQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5hZGROZXdTaGFyZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBOQjogaXNQdWJsaWMgYW5kIGNhbkVkaXQgYXJlIHNldCBpbiBidWlsZFVwZGF0ZVNoYXJlc1xyXG4gICAgICAgICAgICAkc2NvcGUubmV3U2hhcmVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc2hhcmVUeXBlOiAkc2NvcGUuU0hBUkVfVFlQRV9JTkRJVklEVUFMLFxyXG4gICAgICAgICAgICAgICAgc2hhcmVQZXJtaXNzaW9uOiAkc2NvcGUuU0hBUkVfUEVSTUlTU0lPTl9DQU5WSUVXLFxyXG4gICAgICAgICAgICAgICAgdXNlckVtYWlsOiAnJyxcclxuICAgICAgICAgICAgICAgIGdyb3VwSWQ6ICgkc2NvcGUuZ3JvdXBzLmxlbmd0aCA/ICRzY29wZS5ncm91cHNbMF0uaWQgOiBudWxsKSxcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiAoJHNjb3BlLm9yZ2FuaXphdGlvbnMubGVuZ3RoID8gJHNjb3BlLm9yZ2FuaXphdGlvbnNbMF0uaWQgOiBudWxsKSxcclxuICAgICAgICAgICAgICAgIGlzQ3VsdHVyZU1hcDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZGVsZXRlTmV3U2hhcmUgPSBmdW5jdGlvbihzaGFyZSkge1xyXG4gICAgICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZigkc2NvcGUubmV3U2hhcmVzLCBzaGFyZSk7XHJcbiAgICAgICAgICAgICRzY29wZS5uZXdTaGFyZXMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5vayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBidWlsZFVwZGF0ZWRTaGFyZXMoKTtcclxuICAgICAgICAgICAgc2F2ZVNoYXJlcyhvblVwZGF0ZSk7XHJcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICBzaGFyaW5nTW9kYWxDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsICd1c2VySWQnLCAndXNlclByb2ZpbGUnLCAnbWFwSWRzJywgJ29uVXBkYXRlJ107XHJcbn07IiwiLy8gY29tbW9uIGNvcmUgc3RhbmRhcmRzIHRhYiAtXHJcbi8vIHRoaXMgaXMgZGVsZWdhdGVkIHRvIHRoZSBTYW5kYmFua0Njc1RhZ2dpbmcgbW9kdWxlLCB3aGljaCBoYW5kbGVzIENDUyBcclxuLy8gZm9yIGEgbWFwIE9SIHRoZSB1c2VyIHByb2ZpbGUgLSBzZWUgdGFnZ2luZ19jY3MuanNcclxuXHJcblNhbmRiYW5rRWRpdG9yLlN0YW5kYXJkcyA9IGZ1bmN0aW9uICgkc2NvcGUsIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX1NUQU5EQVJEUykgeyAvLyBvcGVuaW5nIHRhYlxyXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbm8gbGlua3MsIHNob3cgdGhlIG1vZGFsXHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuY2FuRWRpdCAmJiAhJHNjb3BlLmNjc1RhZ2dpbmcubGlua3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2NzVGFnZ2luZy5hZGRMaW5rKCk7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvbGRWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfU1RBTkRBUkRTKSB7IC8vIGNsb3NpbmcgdGFiXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTsiLCIvLyBmdW5jdGlvbnMgZm9yIHVzZXItdGFnZ2luZyBtYXBzLCB3aXRoIGEgbW9kYWwgZGlhbG9nXHJcblxyXG4vLyBOQjogdGhlIGNvbXBsZXhpdHkgaGVyZSBpcyBkdWUgdG8gdGhlIG5lZWQgdG8gc2hvdyBleGlzdGluZyB0YWdzIHRoYXQgbWF5IGFwcGx5IFxyXG4vLyB0byBhbnkgbnVtYmVyIG9mIHRoZSBzZWxlY3RlZCBtYXBzLCB2cy4gbmV3IHRhZ3MgdGhhdCB3aWxsIGJlIGFkZGVkIHRvIGFsbCBzZWxlY3RlZCBtYXBzIC1cclxuLy8gdGhlIHRhZ2dpbmcgaW5mbyBuZWVkcyB0byBiZSBncm91cGVkIGFuZCB1bmdyb3VwZWQgd2hlbiBsb2FkaW5nIGFuZCBzYXZpbmcgdG8gaGFuZGxlIHRoaXMuXHJcblxyXG53aW5kb3cuU2FuZGJhbmtUYWdnaW5nID0ge307XHJcblxyXG5TYW5kYmFua1RhZ2dpbmcgPSBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkcmVzb3VyY2UsICRtb2RhbCwgJGxvZykge1xyXG5cclxuICAgIHRoaXMub3Blbk1vZGFsID0gZnVuY3Rpb24gKG1hcElkcywgc2hvd0Rlc2NyaXB0aW9uLCBvblVwZGF0ZSkge1xyXG4gICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlX21hcF90YWdnaW5nX21vZGFsLmh0bWwnLCAvLyBzZWUgdmlld3MvdXNlcl90YWdzL190ZW1wbGF0ZV9tYXBfdGFnZ2luZ19tb2RhbFxyXG4gICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IHRhZ3NNb2RhbEN0cmwsXHJcbiAgICAgICAgICAgIHdpbmRvd0NsYXNzOiAndGFncy1tb2RhbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIG1hcElkczogZnVuY3Rpb24oKSB7IHJldHVybiBtYXBJZHM7IH0sXHJcbiAgICAgICAgICAgICAgICBzaG93RGVzY3JpcHRpb246IGZ1bmN0aW9uKCkgeyByZXR1cm4gc2hvd0Rlc2NyaXB0aW9uOyB9LFxyXG4gICAgICAgICAgICAgICAgb25VcGRhdGU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gb25VcGRhdGU7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uKCkge30pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIGNvbnRyb2xsZXIgZm9yIHRhZ3MgbW9kYWwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdmFyIHRhZ3NNb2RhbEN0cmwgPSBmdW5jdGlvbiAoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSwgbWFwSWRzLCBzaG93RGVzY3JpcHRpb24sIG9uVXBkYXRlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5tYXBJZHMgPSBtYXBJZHM7XHJcblxyXG4gICAgICAgIC8vIGFsbCBleGlzdGluZyB0YWdzIGZvciBzZWxlY3RlZCBtYXBzIC0gZm9ybWF0OiBbe21hcElkOiAxLCB0YWdJZDogMSwgdGFnTmFtZTonZm9vJ30sIC4uLl1cclxuICAgICAgICAkc2NvcGUubWFwVXNlclRhZ3MgPSBbXTsgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gZXhpc3RpbmcgdGFncywgZ3JvdXBlZCBmb3IgZGlzcGxheSAtIGZvcm1hdDogW3tuYW1lOidmb28nLCBtYXBJZHM6WzEsMl19LCAuLi5dXHJcbiAgICAgICAgJHNjb3BlLmV4aXN0aW5nVGFncyA9IFtdOyAgIFxyXG5cclxuICAgICAgICAvLyBuZXcgdGFncyBhZGRlZCBpbiB0aGUgZGlhbG9nIC0gZm9ybWF0OiBbe25hbWU6J2Zvbyd9LCAuLi5dXHJcbiAgICAgICAgJHNjb3BlLm5ld1RhZ3MgPSBbXTsgICAgICAgIFxyXG5cclxuICAgICAgICAvLyBhbGwgdXBkYXRlZCB0YWdzLCB0byBiZSBzYXZlZCAtIHRhZ3MgZm9ybWF0OiBbe21hcElkOiAxLCB1c2VyVGFnczogXCJmb28sIGJhciwgYmFtXCJ9LCAuLi5dXHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZWRUYWdzID0geyBkZXNjcmlwdGlvbjogJycsIHRhZ3M6IFtdIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zaG93RGVzY3JpcHRpb24gPSBzaG93RGVzY3JpcHRpb247XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRUYWdzKG1hcElkcykge1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy91c2VyX3RhZ3MvbWFwX3VzZXJfdGFncy5qc29uP2lkcz0nICsgbWFwSWRzLmpvaW4oJywnKSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm1hcFVzZXJUYWdzID0gcmVzcG9uc2UuZGF0YS5tYXBVc2VyVGFncztcclxuICAgICAgICAgICAgICAgIC8vIE5COiB0aGUgbWFwIGRlc2NyaXB0aW9uIGlzIGFsd2F5cyBwYXNzZWQgYmFjayBpZiB3ZSBvbmx5IHBhc3Mgb25lIG1hcCBJRCwgXHJcbiAgICAgICAgICAgICAgICAvLyBidXQgd2UgbWF5IG5vdCBkaXNwbGF5IGl0IGluIHRoZSBkaWFsb2cgLSBkZXBlbmRzIG9uIHRoZSB2YWx1ZSBvZiB0aGUgc2hvd0Rlc2NyaXB0aW9uIGZsYWcuXHJcbiAgICAgICAgICAgICAgICBpZiAobWFwSWRzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZWRUYWdzLmRlc2NyaXB0aW9uID0gcmVzcG9uc2UuZGF0YS5tYXBEZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGluaXRFeGlzdGluZ1RhZ3MoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGROZXdUYWcoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydCgnQ291bGQgbm90IGxvYWQgdGFncycpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvYWRUYWdzKG1hcElkcyk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRFeGlzdGluZ1RhZ3MoKSB7XHJcbiAgICAgICAgICAgIHZhciB0YWdOYW1lcyA9IF8udW5pcShfLnBsdWNrKCRzY29wZS5tYXBVc2VyVGFncywgJ3RhZ05hbWUnKSkuc29ydCgpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXhpc3RpbmdUYWdzID0gXy5tYXAodGFnTmFtZXMsIGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXBVc2VyVGFnc0Zvck5hbWUgPSBfLndoZXJlKCRzY29wZS5tYXBVc2VyVGFncywge3RhZ05hbWU6IG5hbWV9KTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXBJZHMgPSBfLnBsdWNrKG1hcFVzZXJUYWdzRm9yTmFtZSwgJ21hcElkJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOm5hbWUsIFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcElkczptYXBJZHNcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYnVpbGRVcGRhdGVkVGFncygpIHtcclxuICAgICAgICAgICRzY29wZS51cGRhdGVkVGFncy50YWdzID0gW107XHJcbiAgICAgICAgICBfLmVhY2gobWFwSWRzLCBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgIHZhciBleGlzdGluZ1RhZ3NGb3JJZCA9IF8uZmlsdGVyKCRzY29wZS5leGlzdGluZ1RhZ3MsIGZ1bmN0aW9uKGV4aXN0aW5nVGFnKSB7IFxyXG4gICAgICAgICAgICAgICAgLy8gZXhpc3RpbmdUYWcgZm9ybWF0OiB7bmFtZTonZm9vJywgbWFwSWRzOlsxLDJdfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uY29udGFpbnMoZXhpc3RpbmdUYWcubWFwSWRzLCBpZCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZWRUYWdzLnRhZ3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgIG1hcElkOiBpZCwgXHJcbiAgICAgICAgICAgICAgICAgIHVzZXJUYWdzOiBfLnVuaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgXy5wbHVjayhleGlzdGluZ1RhZ3NGb3JJZCwgJ25hbWUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgIF8ud2l0aG91dChfLnBsdWNrKCRzY29wZS5uZXdUYWdzLCAnbmFtZScpLCAnJykgLy8gcmVtb3ZlIGVtcHR5IHRhZ3NcclxuICAgICAgICAgICAgICAgICAgKS5qb2luKCcsICcpXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNhdmVUYWdzKG9uVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICRodHRwLnB1dCgnL3VzZXJfdGFncy91cGRhdGVfbWFwX3VzZXJfdGFncycsIFskc2NvcGUudXBkYXRlZFRhZ3NdKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3Qgc2F2ZSB0YWdzJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLmRlbGV0ZUV4aXN0aW5nVGFnID0gZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgICAgIHZhciBpID0gXy5pbmRleE9mKCRzY29wZS5leGlzdGluZ1RhZ3MsIHRhZyk7XHJcbiAgICAgICAgICAgICRzY29wZS5leGlzdGluZ1RhZ3Muc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIH07ICBcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZE5ld1RhZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUubmV3VGFncy5wdXNoKHtuYW1lOiAnJ30pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50YWdTZWxlY3RlZCA9IGZ1bmN0aW9uKGl0ZW0sIG1vZGVsLCBsYWJlbCkge1xyXG4gICAgICAgICAgLy9jb25zb2xlLmxvZygndGFnU2VsZWN0ZWQ6ICcgKyBpdGVtICsgJywgJyArIG1vZGVsICsgJywgJyArIGxhYmVsKTtcclxuICAgICAgICAgICRzY29wZS5hZGROZXdUYWcoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZWRpdGluZ1RhZ0tleXByZXNzID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZE5ld1RhZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmRlbGV0ZU5ld1RhZyA9IGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZigkc2NvcGUubmV3VGFncywgdGFnKTtcclxuICAgICAgICAgICAgJHNjb3BlLm5ld1RhZ3Muc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICBpZiAoISRzY29wZS5uZXdUYWdzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZE5ld1RhZygpOyAvLyBhbHdheXMgbGVhdmUgYXQgbGVhc3Qgb25lIHRhZyBmaWVsZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIC8vIHRhZyBhdXRvY29tcGxldGVcclxuICAgICAgICAkc2NvcGUuZ2V0VXNlclRhZ3MgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICcvdXNlcl90YWdzL2xpc3QuanNvbj9xPScgKyB2aWV3VmFsdWU7IFxyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEudGFncztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm9rID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBidWlsZFVwZGF0ZWRUYWdzKCk7XHJcbiAgICAgICAgICAgIHNhdmVUYWdzKG9uVXBkYXRlKTtcclxuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICB0YWdzTW9kYWxDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsICdtYXBJZHMnLCAnc2hvd0Rlc2NyaXB0aW9uJywgJ29uVXBkYXRlJ107XHJcbn07XHJcbiIsIi8vIGdvSlMgdGVtcGxhdGVzIHVzZWQgaW4gdGhlIGVkaXRvclxyXG5cclxuU2FuZGJhbmtFZGl0b3IuVGVtcGxhdGVzID0gZnVuY3Rpb24gKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIC8vIGNvbnN0YW50c1xyXG4gICAgdGhpcy5ncm91cEZpbGxDb2xvciA9IFwiI2Y5ZjlmOVwiO1xyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHsgfTtcclxuXHJcbiAgICAvLyBpbml0aWFsaXplIHRlbXBsYXRlLXJlbGF0ZWQgc3R1ZmYgdGhhdCBkZXBlbmRzIG9uIHRoZSBkaWFncmFtIChhbmQgdGhlcmVmb3JlIGNhbid0IGdvIGluIGluaXQoKSlcclxuICAgIHRoaXMuaW5pdFRlbXBsYXRlcyA9IGZ1bmN0aW9uIChkaWFncmFtKSB7XHJcbiAgICAgICAgZGlhZ3JhbS5ncm91cFRlbXBsYXRlID0gc2VsZi5ncm91cFRlbXBsYXRlO1xyXG4gICAgICAgIGRpYWdyYW0ubm9kZVRlbXBsYXRlID0gc2VsZi5zbGlkZVRlbXBsYXRlO1xyXG4gICAgICAgIGRpYWdyYW0ubGlua1RlbXBsYXRlID0gc2VsZi5saW5rVGVtcGxhdGU7XHJcbiAgICAgICAgZGlhZ3JhbS5saW5rVGVtcGxhdGVNYXAuYWRkKCdQJywgc2VsZi5wTGlua1RlbXBsYXRlKTtcclxuICAgICAgICBkaWFncmFtLmxpbmtUZW1wbGF0ZU1hcC5hZGQoJ0QnLCBzZWxmLmRMaW5rVGVtcGxhdGUpO1xyXG5cclxuICAgICAgICBzZWxmLnNldFRlbXBvcmFyeUxpbmtUZW1wbGF0ZXMoZGlhZ3JhbS50b29sTWFuYWdlci5saW5raW5nVG9vbCk7XHJcbiAgICAgICAgc2VsZi5zZXRUZW1wb3JhcnlMaW5rVGVtcGxhdGVzKGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbCk7XHJcblxyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIubGlua2luZ1Rvb2wucG9ydFRhcmdldGVkID0gZnVuY3Rpb24gKHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCkge1xyXG4gICAgICAgICAgICBzZWxmLmhhbmRsZVBvcnRUYXJnZXRlZChkaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sLCByZWFsbm9kZSwgcmVhbHBvcnQsIHRlbXBub2RlLCB0ZW1wcG9ydCwgdG9lbmQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbC5wb3J0VGFyZ2V0ZWQgPSBmdW5jdGlvbiAocmVhbG5vZGUsIHJlYWxwb3J0LCB0ZW1wbm9kZSwgdGVtcHBvcnQsIHRvZW5kKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaGFuZGxlUG9ydFRhcmdldGVkKGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbCwgcmVhbG5vZGUsIHJlYWxwb3J0LCB0ZW1wbm9kZSwgdGVtcHBvcnQsIHRvZW5kKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLnJlbGlua2luZ1Rvb2wudXBkYXRlQWRvcm5tZW50cyA9IGZ1bmN0aW9uIChwYXJ0KSB7XHJcbiAgICAgICAgICAgIGdvLlJlbGlua2luZ1Rvb2wucHJvdG90eXBlLnVwZGF0ZUFkb3JubWVudHMuY2FsbCh0aGlzLCBwYXJ0KTtcclxuICAgICAgICAgICAgdmFyIGZyb20gPSBwYXJ0LmZpbmRBZG9ybm1lbnQoJ1JlbGlua0Zyb20nKTtcclxuICAgICAgICAgICAgdmFyIHRvID0gcGFydC5maW5kQWRvcm5tZW50KCdSZWxpbmtUbycpO1xyXG4gICAgICAgICAgICAvLyBpZiAoZnJvbSlcclxuICAgICAgICAgICAgLy8gICAgIC8vY29uc29sZS5sb2coJ3JlbGlua2Zyb206ICcgKyBmcm9tLnBhcnQud2lkdGgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIubGlua2luZ1Rvb2wubGlua1ZhbGlkYXRpb24gPSBzZWxmLnZhbGlkYXRlTGluaztcclxuICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLnJlbGlua2luZ1Rvb2wubGlua1ZhbGlkYXRpb24gPSBzZWxmLnZhbGlkYXRlTGluaztcclxuICAgIH07XHJcblxyXG4gICAgLy8gY29udmVuaWVudCBhYmJyZXZpYXRpb24gZm9yIGNyZWF0aW5nIHRlbXBsYXRlc1xyXG4gICAgdmFyIG1rID0gZ28uR3JhcGhPYmplY3QubWFrZTtcclxuXHJcbiAgICAvLyBEU1JQIGNvbG9ycyAoZnJvbSBfdmFyaWFibGVzLnNjc3MpXHJcbiAgICB2YXIgY29sb3JEID0gXCIjZjI2MjRjXCI7XHJcbiAgICB2YXIgY29sb3JTID0gXCIjOTZjOTNkXCI7XHJcbiAgICB2YXIgY29sb3JSID0gXCIjNGNiZmMyXCI7XHJcbiAgICB2YXIgY29sb3JQID0gXCIjZmJhYTM2XCI7XHJcbiAgICB2YXIgY29sb3JQTGlnaHQgPSBcIiNGREREQUZcIjtcclxuICAgIHZhciBjb2xvclBEYXJrID0gXCIjQzk4ODJCXCI7XHJcblxyXG4gICAgdmFyIGV5ZVN2Z1BhdGggPSBcIk0gMjU2LjAwLDk2LjAwQyAxNDQuMzQxLDk2LjAwLCA0Ny41NTksMTYxLjAyMSwwLjAwLDI1Ni4wMGMgNDcuNTU5LDk0Ljk3OSwgMTQ0LjM0MSwxNjAuMDAsIDI1Ni4wMCwxNjAuMDBjIDExMS42NTcsMC4wMCwgMjA4LjQzOS02NS4wMjEsIDI1Ni4wMC0xNjAuMDAgQyA0NjQuNDQyLDE2MS4wMjEsIDM2Ny42NTcsOTYuMDAsIDI1Ni4wMCw5Ni4wMHogTSAzODIuMjI1LDE4MC44NTJjIDMwLjA4MSwxOS4xODcsIDU1LjU3MSw0NC44ODcsIDc0LjcxNyw3NS4xNDggYy0xOS4xNDYsMzAuMjYxLTQ0LjYzNyw1NS45NjEtNzQuNzE4LDc1LjE0OUMgMzQ0LjQyNywzNTUuMjU3LCAzMDAuNzc5LDM2OC4wMCwgMjU2LjAwLDM2OC4wMGMtNDQuNzgsMC4wMC04OC40MjgtMTIuNzQzLTEyNi4yMjUtMzYuODUyIEMgOTkuNjk1LDMxMS45NjIsIDc0LjIwNSwyODYuMjYyLCA1NS4wNTgsMjU2LjAwYyAxOS4xNDYtMzAuMjYyLCA0NC42MzctNTUuOTYyLCA3NC43MTctNzUuMTQ4YyAxLjk1OS0xLjI1LCAzLjkzOC0yLjQ2MSwgNS45MjktMy42NSBDIDEzMC43MjUsMTkwLjg2NiwgMTI4LjAwLDIwNS42MTMsIDEyOC4wMCwyMjEuMDBjMC4wMCw3MC42OTIsIDU3LjMwOCwxMjguMDAsIDEyOC4wMCwxMjguMDBzIDEyOC4wMC01Ny4zMDgsIDEyOC4wMC0xMjguMDBjMC4wMC0xNS4zODctMi43MjUtMzAuMTM0LTcuNzA0LTQzLjc5OSBDIDM3OC4yODYsMTc4LjM5LCAzODAuMjY1LDE3OS42MDIsIDM4Mi4yMjUsMTgwLjg1MnogTSAyNTYuMDAsMjA1LjAwYzAuMDAsMjYuNTEtMjEuNDksNDguMDAtNDguMDAsNDguMDBzLTQ4LjAwLTIxLjQ5LTQ4LjAwLTQ4LjAwcyAyMS40OS00OC4wMCwgNDguMDAtNDguMDAgUyAyNTYuMDAsMTc4LjQ5LCAyNTYuMDAsMjA1LjAwelwiO1xyXG4gICAgdmFyIGV5ZUJsb2NrZWRTdmdQYXRoID0gXCJNIDQxOS42NjEsMTQ4LjIwOCBDIDQ1OC40ODMsMTc1LjcyMyA0OTAuMzQ2LDIxMi43NTQgNTEyLjAwLDI1Ni4wMCBDIDQ2NC40MzksMzUwLjk3OSAzNjcuNjU3LDQxNi4wMCAyNTYuMDAsNDE2LjAwIEMgMjI0LjcxNyw0MTYuMDAgMTk0LjYwNCw0MTAuODk0IDE2Ni40MTEsNDAxLjQ1OCBMIDIwNS4zODksMzYyLjQ4IEMgMjIxLjkxOCwzNjYuMTMgMjM4Ljg3NSwzNjguMDAgMjU2LjAwLDM2OC4wMCBDIDMwMC43NzksMzY4LjAwIDM0NC40MjcsMzU1LjI1NyAzODIuMjIzLDMzMS4xNDggQyA0MTIuMzA0LDMxMS45NiA0MzcuNzk1LDI4Ni4yNiA0NTYuOTQxLDI1NS45OTkgQyA0MzguNDE1LDIyNi43MTYgNDEzLjkzNCwyMDEuNzI0IDM4NS4xMTYsMTgyLjc1MiBMIDQxOS42NjEsMTQ4LjIwOCBaTSAyNTYuMDAsMzQ5LjAwIEMgMjQ0LjYzOCwzNDkuMDAgMjMzLjYyNCwzNDcuNTEyIDIyMy4xMzYsMzQ0LjczMyBMIDM3OS43MjksMTg4LjE0MSBDIDM4Mi41MSwxOTguNjI3IDM4NC4wMCwyMDkuNjM4IDM4NC4wMCwyMjEuMDAgQyAzODQuMDAsMjkxLjY5MiAzMjYuNjkyLDM0OS4wMCAyNTYuMDAsMzQ5LjAwIFpNIDQ4MC4wMCwwLjAwbC0yNi44NjksMC4wMCBMIDM0My4zMjUsMTA5LjgwNkMgMzE1Ljc4NywxMDAuODQ0LCAyODYuNDQ4LDk2LjAwLCAyNTYuMDAsOTYuMDBDIDE0NC4zNDEsOTYuMDAsIDQ3LjU1OSwxNjEuMDIxLDAuMDAsMjU2LjAwIGMgMjEuMzI5LDQyLjU5NiwgNTIuNTY0LDc5LjE1NCwgOTAuNTk3LDEwNi41MzRMMC4wMCw0NTMuMTMxTDAuMDAsNDgwLjAwIGwgMjYuODY5LDAuMDAgTCA0ODAuMDAsMjYuODY5TCA0ODAuMDAsMC4wMCB6IE0gMjA4LjAwLDE1Ny4wMGMgMjQuMDIyLDAuMDAsIDQzLjkyMywxNy42NDcsIDQ3LjQ0Niw0MC42ODUgbC01NC43NjIsNTQuNzYyQyAxNzcuNjQ3LDI0OC45MjMsIDE2MC4wMCwyMjkuMDIyLCAxNjAuMDAsMjA1LjAwQyAxNjAuMDAsMTc4LjQ5LCAxODEuNDksMTU3LjAwLCAyMDguMDAsMTU3LjAweiBNIDU1LjA1OCwyNTYuMDAgYyAxOS4xNDYtMzAuMjYyLCA0NC42MzctNTUuOTYyLCA3NC43MTctNzUuMTQ4YyAxLjk1OS0xLjI1LCAzLjkzOC0yLjQ2MSwgNS45MjktMy42NUMgMTMwLjcyNSwxOTAuODY2LCAxMjguMDAsMjA1LjYxMywgMTI4LjAwLDIyMS4wMCBjMC4wMCwyOS4yNjIsIDkuODI1LDU2LjIyNCwgMjYuMzQ5LDc3Ljc4MWwtMjkuMjc1LDI5LjI3NUMgOTcuMDM4LDMwOS4yMzUsIDczLjE5NywyODQuNjcsIDU1LjA1OCwyNTYuMDB6XCI7XHJcbiAgICB2YXIgcGFwZXJjbGlwU3ZnUGF0aCA9IFwiTSAzNDguOTE2LDE2My41MjRsLTMyLjQ3Ni0zMi40NjFMIDE1NC4wMzUsMjkzLjQzNGMtMjYuOTA3LDI2Ljg5Ni0yNi45MDcsNzAuNTI0LDAuMDAsOTcuNDIyIGMgMjYuOTAyLDI2Ljg5NiwgNzAuNTMsMjYuODk2LCA5Ny40MzcsMC4wMGwgMTk0Ljg4Ni0xOTQuODU0YyA0NC44NTctNDQuODMxLCA0NC44NTctMTE3LjUzMSwwLjAwLTE2Mi4zNjMgYy00NC44MzMtNDQuODUyLTExNy41NTYtNDQuODUyLTE2Mi4zOTEsMC4wMEwgNzkuMzM1LDIzOC4yMTJsIDAuMDE3LDAuMDE2Yy0wLjE0NSwwLjE1Mi0wLjMwNiwwLjI4OC0wLjQzOCwwLjQyMyBjLTYyLjU1MSw2Mi41NDgtNjIuNTUxLDE2My45MjgsMC4wMCwyMjYuNDUzYyA2Mi41MjcsNjIuNTI4LCAxNjMuOTM0LDYyLjUyOCwgMjI2LjQ5NCwwLjAwYyAwLjEzNy0wLjEzNywgMC4yNTgtMC4yODQsIDAuNDEtMC40MzhsIDAuMDE2LDAuMDE3IGwgMTM5LjY2Ni0xMzkuNjQ2bC0zMi40OTMtMzIuNDZMIDI3My4zNSw0MzIuMjA4bC0wLjAwOCwwLjAwIGMtMC4xNDgsMC4xMzQtMC4yODIsMC4yODUtMC40MjMsMC40MjIgYy00NC41MzcsNDQuNTI5LTExNi45OSw0NC41MjktMTYxLjUzOCwwLjAwYy00NC41MzEtNDQuNTIxLTQ0LjUzMS0xMTYuOTYxLDAuMDAtMTYxLjQ4OWMgMC4xNTItMC4xNTIsIDAuMzAyLTAuMjkxLCAwLjQ0NC0wLjQyM2wtMC4wMjMtMC4wMyBsIDIwNC42NC0yMDQuNTgzYyAyNi44NTYtMjYuODY5LCA3MC41NzItMjYuODY5LCA5Ny40NDMsMC4wMGMgMjYuODU2LDI2Ljg2NywgMjYuODU2LDcwLjU3NCwwLjAwLDk3LjQyTCAyMTguOTk5LDM1OC4zNzUgYy04Ljk2OCw4Ljk2MS0yMy41MjcsOC45NjEtMzIuNDg2LDAuMDBjLTguOTQ3LTguOTQzLTguOTQ3LTIzLjUxNiwwLjAwLTMyLjQ2TCAzNDguOTE2LDE2My41MjR6XCI7XHJcblxyXG4gICAgLy8gZm9vdGVyIGZvciBpbWFnZSBleHBvcnRcclxuICAgIHZhciBfZXhwb3J0Rm9vdGVyID0gbnVsbDtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tIGRlYnVnIGluZm8gZm9yIGdyb3Vwcy9saW5rcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIGdyb3VwSW5mbyhvYmopIHtcclxuICAgICAgICByZXR1cm4gb2JqLmRhdGEudGV4dCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnb2JqZWN0OiAnICsgb2JqICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdrZXk6ICcgKyBvYmouZGF0YS5rZXkgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2NvbnRhaW5pbmdHcm91cDogJyArIG9iai5jb250YWluaW5nR3JvdXAgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2xheW91dDogJyArIG9iai5sYXlvdXQgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2RhdGEubGF5b3V0OiAnICsgb2JqLmRhdGEubGF5b3V0ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdwb3NpdGlvbjogJyArIHBhcnNlSW50KG9iai5wb3NpdGlvbi54LCAxMCkgKyAnLCAnICsgcGFyc2VJbnQob2JqLnBvc2l0aW9uLnksIDEwKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZnJlZWhhbmQgcG9zaXRpb24gKGRhdGEubG9jKTogJyArIGdvLlBvaW50LnBhcnNlKG9iai5kYXRhLmxvYykgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3dpZHRoL2hlaWdodDogJyArIHBhcnNlSW50KG9iai5hY3R1YWxCb3VuZHMud2lkdGgsIDEwKSArICcvJyArIHBhcnNlSW50KG9iai5hY3R1YWxCb3VuZHMuaGVpZ2h0LCAxMCkgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2dldFNjYWxlKCk6ICcgKyBtYXAuZ2V0TGF5b3V0cygpLmdldFNjYWxlKG9iaikgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2lzTGlua0xhYmVsOiAnICsgb2JqLmRhdGEuaXNMaW5rTGFiZWwgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2xhYmVsZWRMaW5rOiAnICsgb2JqLmxhYmVsZWRMaW5rICsgXCJcXG5cIjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBub2RlSW5mbyhvYmopIHtcclxuICAgICAgICByZXR1cm4gJ29iamVjdDogJyArIG9iaiArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAna2V5OiAnICsgb2JqLmRhdGEua2V5ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdwb3NpdGlvbjogJyArIHBhcnNlSW50KG9iai5wb3NpdGlvbi54LCAxMCkgKyAnLCAnICsgcGFyc2VJbnQob2JqLnBvc2l0aW9uLnksIDEwKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnd2lkdGgvaGVpZ2h0OiAnICsgcGFyc2VJbnQob2JqLmFjdHVhbEJvdW5kcy53aWR0aCwgMTApICsgJy8nICsgcGFyc2VJbnQob2JqLmFjdHVhbEJvdW5kcy5oZWlnaHQsIDEwKSArIFwiXFxuXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbGlua0luZm8ob2JqKSB7XHJcbiAgICAgICAgdmFyIHNucG9zID0gbWFwLmdldExheW91dHMoKS5nZXRTYW1lTm9kZXNMaW5rUG9zaXRpb24ob2JqKTtcclxuICAgICAgICByZXR1cm4gJycgK1xyXG4gICAgICAgICAgICAnb2JqZWN0OiAnICsgb2JqICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdmcm9tTm9kZTogJyArIG9iai5mcm9tTm9kZSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAndG9Ob2RlOiAnICsgb2JqLnRvTm9kZSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnbGFiZWxOb2RlczogJyArIG9iai5sYWJlbE5vZGVzLmNvdW50ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdsYWJlbE5vZGVJc1Zpc2libGU6ICcgKyBtYXAuZ2V0TGF5b3V0cygpLmxhYmVsTm9kZUlzVmlzaWJsZShvYmopICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdmcm9tUG9ydElkOiAnICsgb2JqLmZyb21Qb3J0SWQgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3RvUG9ydElkOiAnICsgb2JqLnRvUG9ydElkICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdjYXRlZ29yeTogJyArIChvYmouZGF0YSA/IG9iai5kYXRhLmNhdGVnb3J5IDogJycpICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdjb250YWluaW5nR3JvdXA6ICcgKyBvYmouY29udGFpbmluZ0dyb3VwICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdmcm9tQW5kVG9Ob2Rlc0FyZVZpc2libGU6ICcgKyBtYXAuZ2V0TGF5b3V0cygpLmZyb21BbmRUb05vZGVzQXJlVmlzaWJsZShvYmopICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdjdXJ2ZTogJyArIG9iai5jdXJ2ZSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnY3VydmluZXNzOiAnICsgb2JqLmN1cnZpbmVzcyArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZnJvbUVuZFNlZ21lbnRMZW5ndGg6ICcgKyBNYXRoLnJvdW5kKG9iai5mcm9tRW5kU2VnbWVudExlbmd0aCkgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3RvRW5kU2VnbWVudExlbmd0aDogJyArIE1hdGgucm91bmQob2JqLnRvRW5kU2VnbWVudExlbmd0aCkgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3NhbWVOb2Rlc0xpbmtQb3NpdGlvbjogJyArIHNucG9zLmluZGV4ICsgJyBvZiAnICsgc25wb3MuY291bnQgKyBcIlxcblwiICtcclxuICAgICAgICAvLysgJ2dlb21ldHJ5OiAnICsgb2JqLmdlb21ldHJ5ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdnZXRMaW5rU3Ryb2tlV2lkdGg6ICcgKyBtYXAuZ2V0TGF5b3V0cygpLmdldExpbmtTdHJva2VXaWR0aChvYmopICsgXCJcXG5cIjtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIE5COiB0aGVzZSBhcmUgaGVyZSBiZWNhdXNlIHRoZXkgYXJlIGFib3V0IGNvbG9yczsgXHJcbiAgICAvLyBzaW1pbGFyIGZ1bmN0aW9ucyB0aGF0IGFyZSBzY2FsZS1yZWxhdGVkIGFyZSBpbiBsYXlvdXRzLmpzLi4uXHJcbiAgICBmdW5jdGlvbiBnZXRHcm91cFNlbGVjdGlvblN0cm9rZShvYmopIHtcclxuICAgICAgICBpZiAob2JqLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luUEVkaXRvck1vZGUoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvclA7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luREVkaXRvck1vZGUoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvckQ7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIiMwMDBcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCIjMDAwXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE9LLCB0aGlzIGlzbid0IGFib3V0IGNvbG9ycywgYnV0IGl0IHdhbnRzIHRvIGJlIG5lYXIgdGhlIG9uZSBhYm92ZS4uLlxyXG4gICAgZnVuY3Rpb24gZ2V0R3JvdXBTZWxlY3Rpb25TdHJva2VXaWR0aChvYmopIHtcclxuICAgICAgICByZXR1cm4gKG9iai5pc1NlbGVjdGVkID8gMyA6IDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFJMaW5rU2VsZWN0aW9uU3Ryb2tlKG9iaikge1xyXG4gICAgICAgIGlmIChvYmouaXNTZWxlY3RlZCB8fCBvYmogPT0gbWFwLmdldFVpKCkubW91c2VPdmVyTGluaykge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sb3JSOyAvLyBUT0RPOiBjYW4gUCBsaW5rcyBiZSBzZWxlY3RlZD9cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCIjMDAwXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gY2FsbGJhY2tzIHRvIGRldGVybWluZSB3aGVuIHRoZSBjb3JuZXJzIHNob3VsZCBiZSB2aXNpYmxlXHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd0RDb3JuZXIoZ3JvdXApIHtcclxuICAgICAgICBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzREVkaXRvclRoaW5nKGdyb3VwKSkgeyAvLyBtYXJrIGRpc3RpbmN0aW9uIHRoaW5nXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgaW4gUC9EIGVkaXRvciBtb2RlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcC5nZXRQcmVzZW50ZXIoKS5pc0NyZWF0aW5nVGh1bWJuYWlsKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgY2FwdHVyaW5nIHRodW1ibmFpbFxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChncm91cCA9PSBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCkgfHwgLy8gc2hvdyBjb3JuZXJzIG9uIG1vdXNlb3ZlclxyXG4gICAgICAgICAgICAgICAgKCRzY29wZS5pc1RvdWNoRGV2aWNlKCkgJiYgZ3JvdXAuaXNTZWxlY3RlZCkgfHxcclxuICAgICAgICAgICAgICAgIChjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVTaXN0ZXJzT2YoZ3JvdXAsIGZhbHNlKSAmJiAvLyBkcmFnIHRvIEQgKG1ha2UgaXQgc2lzdGVycylcclxuICAgICAgICAgICAgICAgICAgICAobWFwLmdldFVpKCkuZHJhZ1RhcmdldFBvc2l0aW9uID09PSBudWxsIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbm5vdERyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihncm91cCkpKTsgLy8gbm90IHNob3dpbmcgZHJhZyBhYm92ZS9iZWxvdyBpbmRpY2F0b3JzXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dTQ29ybmVyKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luUE9yREVkaXRvck1vZGUoKSkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGluIFAvRCBlZGl0b3IgbW9kZVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAuZ2V0UHJlc2VudGVyKCkuaXNDcmVhdGluZ1RodW1ibmFpbCkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGNhcHR1cmluZyB0aHVtYm5haWxcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoZ3JvdXAgPT0gbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXApIHx8IC8vIHNob3cgY29ybmVycyBvbiBtb3VzZW92ZXJcclxuICAgICAgICAgICAgICAgICgkc2NvcGUuaXNUb3VjaERldmljZSgpICYmIGdyb3VwLmlzU2VsZWN0ZWQpIHx8XHJcbiAgICAgICAgICAgICAgICAoY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lQ2hpbGRyZW5PZihncm91cCwgZmFsc2UpICYmIC8vIGRyYWcgdG8gUyAobWFrZSBpdCBjaGlsZHJlbilcclxuICAgICAgICAgICAgICAgICAgICAobWFwLmdldFVpKCkuZHJhZ1RhcmdldFBvc2l0aW9uID09PSBudWxsIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbm5vdERyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihncm91cCkpKTsgLy8gbm90IHNob3dpbmcgZHJhZyBhYm92ZS9iZWxvdyBpbmRpY2F0b3JzXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dSQ29ybmVyKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luUE9yREVkaXRvck1vZGUoKSkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGluIFAvRCBlZGl0b3IgbW9kZVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAuZ2V0UHJlc2VudGVyKCkuaXNDcmVhdGluZ1RodW1ibmFpbCkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGNhcHR1cmluZyB0aHVtYm5haWxcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBncm91cCA9PSBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCB8fFxyXG4gICAgICAgICAgICAgICAgKCRzY29wZS5pc1RvdWNoRGV2aWNlKCkgJiYgZ3JvdXAuaXNTZWxlY3RlZCk7IC8vIHNob3cgY29ybmVycyBvbiBtb3VzZW92ZXJcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd1BDb3JuZXIoZ3JvdXApIHtcclxuICAgICAgICBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzUEVkaXRvclBvaW50KGdyb3VwKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gbWFyayBwZXJzcGVjdGl2ZSBwb2ludFxyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgaW4gUC9EIGVkaXRvciBtb2RlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcC5nZXRQcmVzZW50ZXIoKS5pc0NyZWF0aW5nVGh1bWJuYWlsKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgY2FwdHVyaW5nIHRodW1ibmFpbFxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdyb3VwID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwIHx8XHJcbiAgICAgICAgICAgICAgICAoJHNjb3BlLmlzVG91Y2hEZXZpY2UoKSAmJiBncm91cC5pc1NlbGVjdGVkKTsgLy8gc2hvdyBjb3JuZXJzIG9uIG1vdXNlb3ZlclxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyB3aGVuIGEgUCBsaW5rIHNob3VsZCBiZSB2aXNpYmxlXHJcblxyXG4gICAgdGhpcy5zaG93UExpbmsgPSBmdW5jdGlvbiAobGluaykge1xyXG4gICAgICAgIHZhciBtb2RlID0gbWFwLmdldFVpKCkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLnBlcnNwZWN0aXZlTW9kZTtcclxuICAgICAgICBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzUEVkaXRvclBvaW50KGxpbmsuZnJvbU5vZGUpKSB7IC8vIHNob3cgUCdzIHdoZW4gdGhpcyBsaW5rIGlzIGZyb20gdGhlIGN1cnJlbnQgUG9pbnRcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNJblBPckRFZGl0b3JNb2RlKCkpIHsgLy8gZG9uJ3Qgc2hvdyBQJ3MgZm9yIG5vbi1Qb2ludCB0aGluZ3MsIGV2ZW4gb24gbW91c2VvdmVyXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKG1vZGUgPT0gJ2xpbmVzJyB8fCBtb2RlID09ICdib3RoJykgJiYgKGxpbmsuZnJvbU5vZGUgPT0gbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXAgfHwgbWFwLnBJc0V4cGFuZGVkKGxpbmsuZnJvbU5vZGUpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2hvd1BEb3QgPSBmdW5jdGlvbiAobGluaykge1xyXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBtYXAuZ2V0VWkoKS5nZXRNYXBFZGl0b3JPcHRpb25zKCkucGVyc3BlY3RpdmVNb2RlICE9ICdib3RoJztcclxuICAgIH07XHJcblxyXG4gICAgLy8gdGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIGluIHR3byBtb2RlczpcclxuICAgIC8vIDEuIHdpdGggaXNEcm9wcGluZyA9PSBmYWxzZSwgdG8gaGlnaGxpZ2h0IGRyb3AgdGFyZ2V0cyBiYXNlZCBvbiBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgYW5kIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbixcclxuICAgIC8vICAgIHdoaWNoIGFyZSBzZXQgb24gbW91c2VEcmFnRW50ZXIvbW91c2VEcmFnbGVhdmVcclxuICAgIC8vIDIuIHdpdGggaXNEcm9wcGluZyA9PSB0cnVlLCBvbiBkcm9wLCB3aGVuIHRoZSBhYm92ZSBpbmRpY2F0b3JzIGhhdmUgZ29uZSBhd2F5LCBidXQgd2Uga25vdyB3aGF0IHRoZSBkcm9wcGVkXHJcbiAgICAvLyAgICBhbmQgdGFyZ2V0IGdyb3VwcyBhcmUsIGFuZCB3ZSB3YW50IHRvIGtub3cgd2hhdCB0aGUgZHJvcCBzaG91bGQgZG8uXHJcblxyXG4gICAgZnVuY3Rpb24gY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lU2lzdGVyc09mKGdyb3VwLCBpc0Ryb3BwaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIChncm91cCA9PSBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgbWFwLnRoaW5nc1NlbGVjdGVkQXJlRGVzY2VuZGFudHNPZihncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lQ2hpbGRyZW5PZihncm91cCwgaXNEcm9wcGluZykge1xyXG4gICAgICAgIHJldHVybiAoZ3JvdXAgPT0gbWFwLmdldFVpKCkuZHJhZ1RhcmdldEdyb3VwIHx8IGlzRHJvcHBpbmcpICYmXHJcbiAgICAgICAgICAgICFtYXAudGhpbmdzU2VsZWN0ZWRJbmNsdWRlU2xpZGUoKSAmJlxyXG4gICAgICAgICAgICAhbWFwLnRoaW5nc1NlbGVjdGVkQXJlRGVzY2VuZGFudHNPZihncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2lkZSBpcyBtYXAuTEVGVCBvciBtYXAuUklHSFRcclxuICAgIGZ1bmN0aW9uIGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZih0YXJnZXRHcm91cCwgc2lkZSwgaXNEcm9wcGluZykge1xyXG4gICAgICAgIC8vIG11c3QgYmUgZHJhZ2dpbmcgc2luZ2xlIGdyb3VwXHJcbiAgICAgICAgdmFyIGRyYWdnZWRHcm91cCA9IG1hcC5nZXRVbmlxdWVUaGluZ1NlbGVjdGVkKCk7XHJcbiAgICAgICAgaWYgKCFkcmFnZ2VkR3JvdXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZHJhZ2dlZCBhbmQgdGFyZ2V0IG11c3QgYmUgU2lzdGVycyBpbiBpbnZlbnRvcnkgbGF5b3V0XHJcbiAgICAgICAgcmV0dXJuICh0YXJnZXRHcm91cCA9PSBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgKG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbiA9PSBzaWRlIHx8IGlzRHJvcHBpbmcpICYmXHJcbiAgICAgICAgICAgIG1hcC5nZXRMYXlvdXRzKCkuYXJlU2lzdGVyc0luSW52ZW50b3J5TGF5b3V0KGRyYWdnZWRHcm91cCwgdGFyZ2V0R3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNhbm5vdERyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZih0YXJnZXRHcm91cCkge1xyXG4gICAgICAgIHJldHVybiAhY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKHRhcmdldEdyb3VwLCBtYXAuTEVGVCkgJiZcclxuICAgICAgICAgICAgIWNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZih0YXJnZXRHcm91cCwgbWFwLlJJR0hUKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBoYW5kbGUgZHJvcCBvbiBvbmUgb2YgdGhlIHRocmVlIHRhcmdldCByZWdpb25zICh0b3AsIG1pZGRsZSwgYm90dG9tKVxyXG4gICAgLy8gc2lkZSBpcyBtYXAuTEVGVCBvciBtYXAuUklHSFRcclxuICAgIGZ1bmN0aW9uIGhhbmRsZUdyb3VwTW91c2VEcm9wKGV2ZW50LCBkcm9wVGFyZ2V0LCBzaWRlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZHJhZ0Fib3ZlVGFyZ2V0Lm1vdXNlRHJvcCwgdGFyZ2V0OiAnICsgZHJvcFRhcmdldCArICcsIHBhcnQ6ICcgKyBkcm9wVGFyZ2V0IC5wYXJ0ICsgJywgc2hvdzogJyArIHNob3cpO1xyXG4gICAgICAgIGlmIChzaWRlICE9PSBudWxsICYmIGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihkcm9wVGFyZ2V0LnBhcnQsIHNpZGUsIHRydWUpKSB7XHJcbiAgICAgICAgICAgIG1hcC5hZGRTZWxlY3RlZFRoaW5nQXNPcmRlcmVkU2lzdGVyT2YoZHJvcFRhcmdldC5wYXJ0LCBzaWRlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZVNpc3RlcnNPZihkcm9wVGFyZ2V0LnBhcnQsIHRydWUpKSB7XHJcbiAgICAgICAgICAgIG1hcC5hZGRTZWxlY3RlZFRoaW5nc0FzU2lzdGVyc09mKGRyb3BUYXJnZXQucGFydCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVDaGlsZHJlbk9mKGRyb3BUYXJnZXQucGFydCwgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgbWFwLmFkZFNlbGVjdGVkVGhpbmdzQXNDaGlsZHJlbk9mKGRyb3BUYXJnZXQucGFydCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHdoZW4gdG8gc2hvdyB0aGUgUi10aGluZyBrbm9iIG9uIGEgbGlua1xyXG4gICAgZnVuY3Rpb24gc2hvd0tub2IobGluaykge1xyXG4gICAgICAgIHJldHVybiBsaW5rID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckxpbms7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLSBjb21wb25lbnRzIGZvciBtYWluIGdyb3VwIHRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIGRGbGFnTWFya2VyKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2ZpbGwnLCAnJywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5kYXRhLmRmbGFnID8gJyMwMDAnIDogbnVsbDtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJkZmxhZ1wiLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxOCwgMTgpLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRiBNMCAxIEwwIDE4IEwxOCAwIEwxIDB6XCIsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXCJEXCIgY29ybmVyICh0b3AgbGVmdCwgcmVkKVxyXG4gICAgZnVuY3Rpb24gY29ybmVyRCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dEQ29ybmVyKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY29ybmVyRFwiLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1MCwgNTApLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1MCwgNTApLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRiBNMCAxIEwwIDUwIEw1MCAwIEwxIDB6XCIsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogY29sb3JELFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGljaywgY29udHJvbDonICsgZXZlbnQuY29udHJvbCArICcsIGFsdDonICsgZXZlbnQuYWx0ICsgJywgbWV0YTonICsgZXZlbnQubWV0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmFsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOQjogYSBzaWRlIGVmZmVjdCBvZiB0aGlzIHdpbGwgYmUgdG8gc2VsZWN0IGp1c3QgdGhpcyBncm91cCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hpY2ggd291bGQgbm90IGhhcHBlbiBvdGhlcndpc2UgdmlhIGNvbnRyb2wtY2xpY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmdldFBlcnNwZWN0aXZlcygpLnNldERFZGl0b3JUaGluZyh0YXJnZXQucGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIHNpbmdsZSBvciBkb3VibGUgY2xpY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuaGFuZGxlQ29ybmVyQ2xpY2soXCJEXCIsIHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY29udGV4dENsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NvbnRleHRDbGljazonICsgZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC50b2dnbGVERmxhZyh0YXJnZXQucGFydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiRFwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBcIndoaXRlXCIsXHJcbiAgICAgICAgICAgICAgICBmb250OiAnOXB4IHNhbnMtc2VyaWYnLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgxMiwgMTUpLFxyXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXCJTXCIgY29ybmVyIChib3R0b20gbGVmdCwgZ3JlZW4pXHJcbiAgICBmdW5jdGlvbiBjb3JuZXJTKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoc2hvd1NDb3JuZXIob2JqKSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJjb3JuZXJTXCIsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDUwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1MCwgNTApLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1MCwgNTApLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRiBNMCAwIEwwIDQ5IEwxIDUwIEw1MCA1MHpcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBjb2xvclMsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuaGFuZGxlQ29ybmVyQ2xpY2soXCJTXCIsIHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIC8vIGV4cGFuc2lvbiBpbmRpY2F0b3JcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygncG9zaXRpb24nLCAnJywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAob2JqLmlzU3ViR3JhcGhFeHBhbmRlZCA/IG5ldyBnby5Qb2ludCg0LCA0MykgOiBuZXcgZ28uUG9pbnQoNSwgMzgpKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnYW5nbGUnLCAnJywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAob2JqLmlzU3ViR3JhcGhFeHBhbmRlZCA/IDkwIDogMCk7XHJcbiAgICAgICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUsIDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGIE0wIDAgTDUgNSBMMCAxMHpcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogXCIjMzMzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlNcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogXCJ3aGl0ZVwiLFxyXG4gICAgICAgICAgICAgICAgZm9udDogJzlweCBzYW5zLXNlcmlmJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMTIsIDI4KSxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNob3cgb25seSB3aGVuIHN5c3RlbSBpcyBjb2xsYXBzZWRcclxuICAgIGZ1bmN0aW9uIHNDb2xsYXBzZWRNYXJrZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIXNob3dTQ29ybmVyKG9iaikgJiYgb2JqLm1lbWJlclBhcnRzLmNvdW50ID4gMCAmJiAhb2JqLmlzU3ViR3JhcGhFeHBhbmRlZDtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg1LCA4OCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNSwgMTApLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRiBNMCAwIEw1IDUgTDAgMTB6XCIsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJyMzMzMnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFwiUlwiIGNvcm5lciAoYm90dG9tIHJpZ2h0LCBibHVlKVxyXG4gICAgZnVuY3Rpb24gY29ybmVyUigpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dSQ29ybmVyKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY29ybmVyUlwiLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvcm5lclJTaGFwZVwiLFxyXG4gICAgICAgICAgICAgICAgLy8gTkI6IHRoaXMgY29ybmVyIGlzIGRvbmUgZGlmZmVyZW50bHkgZnJvbSB0aGUgb3RoZXJzOlxyXG4gICAgICAgICAgICAgICAgLy8gMS4gdGhlIG92ZXJhbGwgc2hhcGUgaXMgdGhlIHNpemUgb2YgdGhlIHdob2xlIHNxdWFyZSwgc28gdGhlIHBvcnQgZmFsbHMgaW4gdGhlIG1pZGRsZSBpbnN0ZWFkIG9mIHRoZSBjb3JuZXI7XHJcbiAgICAgICAgICAgICAgICAvLyAyLiB0aGUgZ2VvbWV0cnkgdHJhY2VzIGFyb3VuZCB0aGUgZWRnZXMgb2YgdGhlIHdob2xlIHNxdWFyZSwgYmVjYXVzZSBvdGhlcndpc2UgdGhlIGxpbmsgbGluZSB3aWxsXHJcbiAgICAgICAgICAgICAgICAvLyAgICBzaG93IGluc2lkZSB0aGUgbWFpbiBzcXVhcmUgaWYgaXQncyBjcm9zc2luZyBvbmUgb2YgdGhlIG90aGVyIDMgcXVhZHJhbnRzIFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiTTAgMCBMMCAxMDAgXCIgKyAvLyB0b3AgbGVmdCB0byBib3R0b20gbGVmdFxyXG4gICAgICAgICAgICAgICAgICAgIFwiTDk5IDEwMCBMMTAwIDk5IEwgMTAwIDAgXCIgKyAvLyBib3R0b20vcmlnaHQgc2lkZXMgKHJvdW5kIGJvdHRvbSByaWdodCBjb3JuZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgXCJMIDAgMCBMIDEwMCAwIFwiICsgLy8gYmFjayB0byB0b3AgbGVmdCB0aGVuIHRvcCByaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIFwiTCAxMDAgNTAgTCA1MCAxMDAgXCIgKyAvLyB0byBtaWRwb2ludCBvZiByaWdodCBzaWRlLCBtaWRwb2ludCBvZiBib3R0b20gc2lkZVxyXG4gICAgICAgICAgICAgICAgICAgIFwiTDAgMTAwelwiLCAvLyBib3R0b20gbGVmdCwgcmV0dXJuIGhvbWVcclxuICAgICAgICAgICAgICAgICAgICB0cnVlKSxcclxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG5cclxuICAgICAgICAgICAgICAgIHBvcnRJZDogXCJSXCIsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlRHVwbGljYXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuaGFuZGxlQ29ybmVyQ2xpY2soXCJSXCIsIHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJSXCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IFwid2hpdGVcIixcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICc5cHggc2Fucy1zZXJpZicsXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDgyLCA3OClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhdHRhY2htZW50UGFwZXJDbGlwKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5kYXRhLmF0dGFjaG1lbnRzICE9PSBudWxsICYmIG9iai5kYXRhLmF0dGFjaG1lbnRzICE9PSB1bmRlZmluZWQgJiYgb2JqLmRhdGEuYXR0YWNobWVudHMubGVuZ3RoID4gMDtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2dlb21ldHJ5JywgJycsIGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnby5HZW9tZXRyeS5wYXJzZShwYXBlcmNsaXBTdmdQYXRoLCB0cnVlKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2Rlc2lyZWRTaXplJywgJycsIGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZ28uU2l6ZSg1MTIsIDUxMik7IC8vIE5COiB0aGUgdHdvIGljb25zIGRvbid0IHNjYWxlIHRvIHRoZSBzYW1lIHByb3BvcnRpb25zIGZvciBzb21lIHJlYXNvbiAtID8/XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoNDYsIDg1KSxcclxuICAgICAgICAgICAgICAgIHNjYWxlOiAwLjAyLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMCcsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAnIzAwMCcsXHJcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGlwIGNsaWNrZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS50b2dnbGVUYWIobWFwLmdldFVpKCkuVEFCX0lEX0FUVEFDSE1FTlRTKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBFeWViYWxsKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc1BlcnNwZWN0aXZlUG9pbnQob2JqKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2dlb21ldHJ5JywgJycsIGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnby5HZW9tZXRyeS5wYXJzZShtYXAucElzRXhwYW5kZWQob2JqKSA/IGV5ZVN2Z1BhdGggOiBleWVCbG9ja2VkU3ZnUGF0aCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdkZXNpcmVkU2l6ZScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGdvLlNpemUoNTEyLCBtYXAucElzRXhwYW5kZWQob2JqKSA/IDQ0MCA6IDUxMik7IC8vIE5COiB0aGUgdHdvIGljb25zIGRvbid0IHNjYWxlIHRvIHRoZSBzYW1lIHByb3BvcnRpb25zIGZvciBzb21lIHJlYXNvbiAtID8/XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoODcsIDQpLFxyXG4gICAgICAgICAgICAgICAgc2NhbGU6IDAuMDIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwJyxcclxuICAgICAgICAgICAgICAgIGZpbGw6ICcjMDAwJyxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUCBleHBhbnNpb24gaW5kaWNhdG9yIC0gdGhpcyBzaG93cyB3aGVuIHRoZSBQIGNvcm5lciBpcyBub3QgdmlzaWJsZSwgYW5kIG9ubHkgaWYgdGhlIHRoaW5nIGlzIGEgcGVyc3BlY3RpdmUgcG9pbnRcclxuICAgIGZ1bmN0aW9uIHBvaW50TWFya2VyKCkge1xyXG4gICAgICAgIHJldHVybiBwRXllYmFsbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFAgdmlldyBpbmRpY2F0b3JcclxuICAgIGZ1bmN0aW9uIHZpZXdNYXJrZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLCBcIkJvcmRlclwiLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2ZpbGwnLCAnJywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFZpZXdNYXJrZXJGaWxsKG9iaik7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Vmlld01hcmtlckZpbGwob2JqKSB7XHJcbiAgICAgICAgdmFyIHdlaWdodCA9IG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5nZXRQZXJzcGVjdGl2ZVZpZXdXZWlnaHQob2JqKTtcclxuXHJcbiAgICAgICAgaWYgKHdlaWdodCA9PSAzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvclBEYXJrO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2VpZ2h0ID09IDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG9yUDtcclxuICAgICAgICB9IGVsc2UgaWYgKHdlaWdodCA9PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvclBMaWdodDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJ0cmFuc3BhcmVudFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcIlBcIiBjb3JuZXIgKHRvcCByaWdodCwgb3JhbmdlKVxyXG4gICAgZnVuY3Rpb24gY29ybmVyUCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dQQ29ybmVyKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY29ybmVyUFwiLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvcm5lclBTaGFwZVwiLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXHJcbiAgICAgICAgICAgICAgICAvLyBOQjogdGhpcyBnZW9tZXRyeSBjb3ZlcnMgdGhlIHdob2xlIHNxdWFyZTsgc2VlIG5vdGUgYWJvdmUgZm9yIGNvcm5lclJcclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBnby5HZW9tZXRyeS5wYXJzZShcIkZcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJNMCAwIEwwIDEwMCBMMTAwIDEwMFwiICsgLy8gdG9wIGxlZnQgdG8gYm90dG9tIGxlZnQgdG8gYm90dG9tIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgXCJMMTAwIDEgTDk5IDAgTDAgMFwiICsgLy8gcmlnaHQvdG9wIHNpZGVzIChyb3VuZCB0b3AgcmlnaHQgY29ybmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIFwiTCA1MCAwIEwgMTAwIDUwIFwiICsgLy8gdG8gbWlkcG9pbnQgb2YgdG9wIHNpZGUsIG1pZHBvaW50IG9mIHJpZ2h0IHNpZGVcclxuICAgICAgICAgICAgICAgICAgICBcIkwxMDAgMTAwIDAgMTAwelwiLCAvLyBib3R0b20gcmlnaHQsIGJvdHRvbSBsZWZ0LCByZXR1cm4gaG9tZVxyXG4gICAgICAgICAgICAgICAgICAgIHRydWUpLFxyXG5cclxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUCxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG5cclxuICAgICAgICAgICAgICAgIHBvcnRJZDogXCJQXCIsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVEdXBsaWNhdGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlU2VsZk5vZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZUR1cGxpY2F0ZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdG9NYXhMaW5rczogMSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuaGFuZGxlQ29ybmVyQ2xpY2soXCJQXCIsIHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHBFeWViYWxsKCksIC8vIFAgZXhwYW5zaW9uIGluZGljYXRvclxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiUFwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBcIndoaXRlXCIsXHJcbiAgICAgICAgICAgICAgICBmb250OiAnOXB4IHNhbnMtc2VyaWYnLFxyXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg4MSwgMTUpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWFpbkJvcmRlcigpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsIFwiQm9yZGVyXCIsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgZ2V0R3JvdXBTZWxlY3Rpb25TdHJva2UpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2VXaWR0aCcsICcnLCBnZXRHcm91cFNlbGVjdGlvblN0cm9rZVdpZHRoKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIm1haW5hcmVhXCIsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogbnVsbCxcclxuICAgICAgICAgICAgICAgIC8vcG9ydElkOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcclxuICAgICAgICAgICAgICAgIGZyb21MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGZyb21MaW5rYWJsZVNlbGZOb2RlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGZyb21MaW5rYWJsZUR1cGxpY2F0ZXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZVNlbGZOb2RlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0gaGFuZGxlcnMgZm9yIG1vdXNlIGRyYWcvZHJvcCBhY3Rpb25zIG9uIGdyb3Vwcywgd2hpY2ggbmVlZCB0byBiZSByZXBsaWNhdGVkIG9uIGRpZmZlcmVudCB0YXJnZXQgcGFydHMgLS0tLS0tLVxyXG5cclxuICAgIC8vIHBvc2l0aW9uIGlzIG1hcC5MRUZULCBudWxsLCBvciBtYXAuUklHSFRcclxuICAgIGZ1bmN0aW9uIGdldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0LCBvYmoyKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ21vdXNlRHJhZ0VudGVyLCBlLmRwOiAnICsgZXZlbnQuZG9jdW1lbnRQb2ludCArICcsIHRhcmdldC5wYXJ0OiAnICsgdGFyZ2V0LnBhcnQgKyAnLCB0YXJnZXQgYm91bmRzOiAnICsgdGFyZ2V0LmFjdHVhbEJvdW5kcyk7XHJcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRHcm91cCA9IHRhcmdldC5wYXJ0O1xyXG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0UG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgPSBudWxsO1xyXG4gICAgICAgIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbiA9IG51bGw7XHJcbiAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIocG9zaXRpb24pIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50LCBkcm9wVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGhhbmRsZUdyb3VwTW91c2VEcm9wKGV2ZW50LCBkcm9wVGFyZ2V0LCBwb3NpdGlvbik7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZ3JvdXBDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgbWFwLmdldFVpKCkuaGFuZGxlQ29ybmVyQ2xpY2soXCJcIiwgdGFyZ2V0KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIHRhcmdldHMgZm9yIGRyYWdnaW5nIHRvIEQgb3IgUyAtLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIGRyYWdBYm92ZVRhcmdldCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLCB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgIGhlaWdodDogMjUsXHJcbiAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgIG1vdXNlRHJhZ0VudGVyOiBnZXRHcm91cE1vdXNlRHJhZ0VudGVySGFuZGxlcihtYXAuTEVGVCksXHJcbiAgICAgICAgICAgIG1vdXNlRHJhZ0xlYXZlOiBncm91cE1vdXNlRHJhZ0xlYXZlSGFuZGxlcixcclxuICAgICAgICAgICAgbW91c2VEcm9wOiBnZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIobWFwLkxFRlQpLFxyXG4gICAgICAgICAgICBjbGljazogZ3JvdXBDbGlja0hhbmRsZXJcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBkcmFnIHRhcmdldCByZWdpb25cclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiUmVjdGFuZ2xlXCIsIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAvLyBkcmFnIGluZGljYXRvciBiYXJcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiQm9yZGVyXCIsXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihvYmoucGFydCwgbWFwLkxFRlQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJyMwMDAnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZHJhZ0ludG9UYXJnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbiwge1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDI1KSxcclxuICAgICAgICAgICAgaGVpZ2h0OiA1MCxcclxuICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgbW91c2VEcmFnRW50ZXI6IGdldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKG51bGwpLFxyXG4gICAgICAgICAgICBtb3VzZURyYWdMZWF2ZTogZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIsXHJcbiAgICAgICAgICAgIG1vdXNlRHJvcDogZ2V0R3JvdXBNb3VzZURyb3BIYW5kbGVyKG51bGwpLFxyXG4gICAgICAgICAgICBjbGljazogZ3JvdXBDbGlja0hhbmRsZXJcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJSZWN0YW5nbGVcIiwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNTAsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkcmFnQmVsb3dUYXJnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbiwge1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDc1KSxcclxuICAgICAgICAgICAgaGVpZ2h0OiAyNSxcclxuICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgbW91c2VEcmFnRW50ZXI6IGdldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKG1hcC5SSUdIVCksXHJcbiAgICAgICAgICAgIG1vdXNlRHJhZ0xlYXZlOiBncm91cE1vdXNlRHJhZ0xlYXZlSGFuZGxlcixcclxuICAgICAgICAgICAgbW91c2VEcm9wOiBnZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIobWFwLlJJR0hUKSxcclxuICAgICAgICAgICAgY2xpY2s6IGdyb3VwQ2xpY2tIYW5kbGVyXHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gZHJhZyB0YXJnZXQgcmVnaW9uXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyNSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50J1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgLy8gZHJhZyBpbmRpY2F0b3IgYmFyXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIkJvcmRlclwiLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2Yob2JqLnBhcnQsIG1hcC5SSUdIVCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMTUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJyMwMDAnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJucyB0aGUgVGV4dEJsb2NrIGZvciB0aGUgZ3JvdXAgdGl0bGUsIGZvciB1c2UgaW4gdGhlIG1haW4gZ3JvdXAgdGVtcGxhdGUsIGluc2lkZSB0aGUgYm94LlxyXG4gICAgZnVuY3Rpb24gZ3JvdXBJbnRlcm5hbFRleHRCbG9jaygpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLkhvcml6b250YWwsIHtcclxuICAgICAgICAgICAgYWxpZ25tZW50OiBnby5TcG90LkxlZnQsXHJcbiAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LlJpZ2h0LFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIC01MCksXHJcbiAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMClcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiA4MCxcclxuICAgICAgICAgICAgICAgIG1hcmdpbjogMTAsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuTGVmdCxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LlJpZ2h0LFxyXG4gICAgICAgICAgICAgICAgLy9hbGlnbm1lbnQ6IGdvLlNwb3QuQ2VudGVyLFxyXG4gICAgICAgICAgICAgICAgLy90ZXh0QWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcIm1vdmVcIixcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICcxMHB4IHNhbnMtc2VyaWYnLFxyXG4gICAgICAgICAgICAgICAgaXNNdWx0aWxpbmU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB3cmFwOiBnby5UZXh0QmxvY2suV3JhcERlc2lyZWRTaXplLFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcmFnRW50ZXI6IGdldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKG51bGwpLFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6IGdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcm9wOiBnZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIobnVsbCksXHJcbiAgICAgICAgICAgICAgICBjbGljazogZ3JvdXBDbGlja0hhbmRsZXIsXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhncm91cEluZm8odGFyZ2V0LnBhcnQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInRleHRcIiwgXCJ0ZXh0XCIpLm1ha2VUd29XYXkoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwidmlzaWJsZVwiLCBcIlwiLCBmdW5jdGlvbiAoZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbHdheXMgc2hvdyB0ZXh0IGluc2lkZSBib3ggZm9yIFItdGhpbmdzLCBiZWNhdXNlIGV4dGVybmFsIHRleHQgd2lsbCB0aHJvdyBvZmYgbGF5b3V0XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcC5nZXRMYXlvdXRzKCkuaXNOb3RXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5nZXRMYXlvdXRzKCkuaXNSVGhpbmdXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApO1xyXG4gICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJucyBhIFRleHRCbG9jayBmb3IgdGhlIGdyb3VwIHRpdGxlLCBmb3IgdXNlIGluIHRoZSBtYWluIGdyb3VwIHRlbXBsYXRlLCBvbiB0aGUgbGVmdCBvciByaWdodC5cclxuICAgIC8vIHZpc2libGVGbiBpcyBhIGNhbGxiYWNrIHRvIGJlIGJvdW5kIHRvIHRoZSB2aXNpYmlsaXR5IGF0dHJpYnV0ZSBvZiB0aGUgVGV4dEJsb2NrLlxyXG4gICAgLy8gdGV4dEFsaWduIGlzICdsZWZ0JyBvciAncmlnaHQnLlxyXG4gICAgZnVuY3Rpb24gZ3JvdXBFeHRlcm5hbFRleHRCbG9jayh2aXNpYmxlRm4sIHRleHRBbGlnbikge1xyXG4gICAgICAgIHJldHVybiBtayhnby5UZXh0QmxvY2ssXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwidGV4dFwiLCBcInRleHRcIikubWFrZVR3b1dheSgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInZpc2libGVcIiwgXCJcIiwgdmlzaWJsZUZuKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInNjYWxlXCIsIFwiXCIsIG1hcC5nZXRMYXlvdXRzKCkuZ2V0RXh0ZXJuYWxUZXh0U2NhbGUpLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdleHRlcm5hbHRleHQtJyArIHRleHRBbGlnbiwgLy8gTkI6IHRoaXMgc2NyZXdzIHVwIGxheW91dHMgZm9yIHNvbWUgcmVhc29uIC0gPz9cclxuICAgICAgICAgICAgICAgIHRleHRBbGlnbjogdGV4dEFsaWduLFxyXG4gICAgICAgICAgICAgICAgbWFyZ2luOiA1LFxyXG4gICAgICAgICAgICAgICAgZm9udDogJzEwcHggc2Fucy1zZXJpZicsXHJcbiAgICAgICAgICAgICAgICBpc011bHRpbGluZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBncm91cENsaWNrSGFuZGxlclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gZ3JvdXAvVGhpbmcgdGVtcGxhdGUgLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmdyb3VwVGVtcGxhdGUgPVxyXG4gICAgbWsoZ28uR3JvdXAsIGdvLlBhbmVsLlZlcnRpY2FsLFxyXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwibGF5b3V0XCIsIFwibGF5b3V0XCIsIGZ1bmN0aW9uIChsYXlvdXROYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXAuZ2V0TGF5b3V0cygpLmdldExheW91dChsYXlvdXROYW1lKTtcclxuICAgICAgICB9KSxcclxuICAgICAgICBuZXcgZ28uQmluZGluZyhcIm1vdmFibGVcIiwgXCJcIiwgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gIW9iai5pc0xpbmtMYWJlbDtcclxuICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwiaXNTdWJHcmFwaEV4cGFuZGVkXCIsIFwic0V4cGFuZGVkXCIpLFxyXG4gICAgICAgIC8vIGRpbSB0aGUgdGhpbmcgaWYgaXQncyBiZWluZyBkcmFnZ2VkIG92ZXIgYW5vdGhlciB0aGluZyAoZHJvcCB0byBzaXN0ZXIvY2hpbGQpXHJcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gKG9iai5pc1NlbGVjdGVkICYmIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRHcm91cCA/IDAuMjUgOiAxKTtcclxuICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uT2JqZWN0TmFtZTogXCJtYWlucGFuZWxcIixcclxuICAgICAgICAgICAgbG9jYXRpb25TcG90OiBnby5TcG90LlRvcExlZnQsXHJcbiAgICAgICAgICAgIHNlbGVjdGlvbkFkb3JuZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc1N1YkdyYXBoRXhwYW5kZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGxheWVyTmFtZTogJ0ZvcmVncm91bmQnLFxyXG4gICAgICAgICAgICAvLyBoaWdobGlnaHQgY29ybmVyc1xyXG4gICAgICAgICAgICBtb3VzZUVudGVyOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgb2JqMikge1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXAgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIHVuaGlnaGxpZ2h0IGNvcm5lcnNcclxuICAgICAgICAgICAgbW91c2VMZWF2ZTogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb250YWluaW5nR3JvdXBDaGFuZ2VkOiBmdW5jdGlvbihwYXJ0LCBvbGRncm91cCwgbmV3Z3JvdXApIHsgXHJcbiAgICAgICAgICAgIC8vICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnNldERhdGFQcm9wZXJ0eShwYXJ0LmRhdGEsICdsZXZlbCcsIG1hcC5jb21wdXRlTGV2ZWwocGFydCkpOyBcclxuICAgICAgICAgICAgLy8gICAgIC8vcGFydC51cGRhdGVUYXJnZXRCaW5kaW5ncygpOyAgIFxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtayhnby5QYW5lbCwgZ28uUGFuZWwuSG9yaXpvbnRhbCxcclxuICAgICAgICAgICAgZ3JvdXBFeHRlcm5hbFRleHRCbG9jayhtYXAuZ2V0TGF5b3V0cygpLnNob3dMZWZ0VGV4dEJsb2NrLCAncmlnaHQnKSxcclxuICAgICAgICAgICAgbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIm1haW5wYW5lbFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInNjYWxlXCIsIFwiXCIsIG1hcC5nZXRMYXlvdXRzKCkuZ2V0U2NhbGUpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICAvLyBkcmFnIGFyZWFcclxuICAgICAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJkcmFnYXJlYVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBzZWxmLmdyb3VwRmlsbENvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IFwibW92ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNob3cgZGVidWcgaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZ3JvdXBJbmZvKHRhcmdldC5wYXJ0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICB2aWV3TWFya2VyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0Fib3ZlVGFyZ2V0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0ludG9UYXJnZXQoKSxcclxuICAgICAgICAgICAgICAgICAgICBkcmFnQmVsb3dUYXJnZXQoKSxcclxuICAgICAgICAgICAgICAgICAgICAvL2dyb3VwSW50ZXJuYWxUZXh0QmxvY2soKSxcclxuICAgICAgICAgICAgICAgICAgICBjb3JuZXJEKCksXHJcbiAgICAgICAgICAgICAgICAgICAgZEZsYWdNYXJrZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICBjb3JuZXJTKCksXHJcbiAgICAgICAgICAgICAgICAgICAgc0NvbGxhcHNlZE1hcmtlcigpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvcm5lclIoKSxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludE1hcmtlcigpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvcm5lclAoKSxcclxuICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50UGFwZXJDbGlwKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFpbkJvcmRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgZ3JvdXBFeHRlcm5hbFRleHRCbG9jayhtYXAuZ2V0TGF5b3V0cygpLnNob3dSaWdodFRleHRCbG9jaywgJ2xlZnQnKVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xyXG4gICAgICAgICAgICB3aWR0aDogODAsXHJcbiAgICAgICAgICAgIG1hcmdpbjogMTAsXHJcbiAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5MZWZ0LFxyXG4gICAgICAgICAgICBhbGlnbm1lbnRGb2N1czogZ28uU3BvdC5SaWdodCxcclxuICAgICAgICAgICAgX2lzTm9kZUxhYmVsOiB0cnVlLFxyXG4gICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgLy9hbGlnbm1lbnQ6IGdvLlNwb3QuQ2VudGVyLFxyXG4gICAgICAgICAgICAvL3RleHRBbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCIsXHJcbiAgICAgICAgICAgIGZvbnQ6ICcxMHB4IHNhbnMtc2VyaWYnLFxyXG4gICAgICAgICAgICBpc011bHRpbGluZTogdHJ1ZSxcclxuICAgICAgICAgICAgd3JhcDogZ28uVGV4dEJsb2NrLldyYXBEZXNpcmVkU2l6ZSxcclxuICAgICAgICAgICAgbW91c2VEcmFnRW50ZXI6IGdldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKG51bGwpLFxyXG4gICAgICAgICAgICBtb3VzZURyYWdMZWF2ZTogZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIsXHJcbiAgICAgICAgICAgIG1vdXNlRHJvcDogZ2V0R3JvdXBNb3VzZURyb3BIYW5kbGVyKG51bGwpLFxyXG4gICAgICAgICAgICBjbGljazogZ3JvdXBDbGlja0hhbmRsZXIsXHJcbiAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhncm91cEluZm8odGFyZ2V0LnBhcnQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwidGV4dFwiLCBcInRleHRcIikubWFrZVR3b1dheSgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInZpc2libGVcIiwgXCJcIiwgZnVuY3Rpb24gKGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhbHdheXMgc2hvdyB0ZXh0IGluc2lkZSBib3ggZm9yIFItdGhpbmdzLCBiZWNhdXNlIGV4dGVybmFsIHRleHQgd2lsbCB0aHJvdyBvZmYgbGF5b3V0XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFwLmdldExheW91dHMoKS5pc05vdFdpdGhpbkludmVudG9yeUxheW91dChncm91cCkgfHxcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0TGF5b3V0cygpLmlzUlRoaW5nV2l0aGluSW52ZW50b3J5TGF5b3V0KGdyb3VwKTtcclxuICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgIC8vIHRoZSBwbGFjZWhvbGRlciBub3JtYWxseSBob2xkcyB0aGUgY2hpbGQgbm9kZXMsIGJ1dCB3ZSBqdXN0IHVzZSBhIGR1bW15IHBsYWNlaG9sZGVyXHJcbiAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgbmFtZTogXCJwbGFjZWhvbGRlclwiLFxyXG4gICAgICAgICAgICBmaWxsOiBcInRyYW5zcGFyZW50XCIsXHJcbiAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDAsIDApXHJcbiAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gbGluayB0ZW1wbGF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLnNoYXBlcyA9IFsndG8nLCAnZnJvbScsICd0b0Zyb20nLCAnbm9BcnJvd3MnXVxyXG5cclxuICAgIHRoaXMuZ2V0TmV4dFJTaGFwZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgY3VycmVudCA9IHNlbGYuX2N1cnJlbnRSU2hhcGU7XHJcbiAgICAgICAgbGV0IG5leHQgPSBzZWxmLnNoYXBlc1swXTtcclxuICAgICAgICBpZiAoY3VycmVudCkge1xyXG4gICAgICAgICAgICBsZXQgaWR4ID0gc2VsZi5zaGFwZXMuaW5kZXhPZihjdXJyZW50KSArIDE7XHJcbiAgICAgICAgICAgIGlmIChpZHggPj0gc2VsZi5zaGFwZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZHggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5leHQgPSBzZWxmLnNoYXBlc1tpZHhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLl9jdXJyZW50UlNoYXBlID0gbmV4dDtcclxuICAgICAgICByZXR1cm4gbmV4dDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmxpbmtUZW1wbGF0ZSA9XHJcbiAgICBtayhnby5MaW5rLCB7XHJcbiAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXHJcbiAgICAgICAgbGF5ZXJOYW1lOiAnJyxcclxuICAgICAgICAvL3JvdXRpbmc6IGdvLkxpbmsuT3J0aG9nb25hbCxcclxuICAgICAgICByZWxpbmthYmxlRnJvbTogdHJ1ZSxcclxuICAgICAgICByZWxpbmthYmxlVG86IHRydWUsXHJcbiAgICAgICAgc21vb3RobmVzczogMS4wLFxyXG4gICAgICAgIGFkanVzdGluZzogZ28uTGluay5TdHJldGNoLFxyXG4gICAgICAgIHJlc2hhcGFibGU6IHRydWUsXHJcbiAgICAgICAgbW91c2VFbnRlcjogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyTGluayA9IHRhcmdldDtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbW91c2VMZWF2ZTogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyTGluayA9IG51bGw7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1vdXNlRHJhZ0VudGVyOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgZHJhZ09iamVjdCkge1xyXG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJMaW5rID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtb3VzZURyYWdMZWF2ZTogZnVuY3Rpb24gKGV2ZW50LCBkcm9wVGFyZ2V0LCBkcmFnT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLm1vdXNlT3ZlckxpbmsgPSBudWxsO1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtb3VzZURyb3A6IGZ1bmN0aW9uIChldmVudCwgZHJvcFRhcmdldCkge1xyXG4gICAgICAgICAgICB2YXIgcGFydHMgPSBtYXAuZ2V0RGlhZ3JhbSgpLnNlbGVjdGlvbjtcclxuICAgICAgICAgICAgaWYgKHBhcnRzICYmIHBhcnRzLmNvdW50ID09IDEgJiYgcGFydHMuZmlyc3QoKSBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuYWRkVGhpbmdBc1JUaGluZyhwYXJ0cy5maXJzdCgpLCBkcm9wVGFyZ2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGxldCBzaGFwZSA9IHNlbGYuZ2V0TmV4dFJTaGFwZSgpO1xyXG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5zZXRTZWxlY3RlZFJlbGF0aW9uc2hpcHNEaXJlY3Rpb24oc2hhcGUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZG91YmxlQ2xpY2s6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSVGhpbmcodGFyZ2V0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobGlua0luZm8odGFyZ2V0KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwicG9pbnRzXCIpLm1ha2VUd29XYXkoKSxcclxuICAgICAgICBuZXcgZ28uQmluZGluZyhcImN1cnZpbmVzc1wiLCBcImN1cnZpbmVzc1wiKSxcclxuICAgICAgICBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3N0cm9rZScsICcnLCBnZXRSTGlua1NlbGVjdGlvblN0cm9rZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzdHJva2VXaWR0aFwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldExpbmtTdHJva2VXaWR0aCkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJMSU5LU0hBUEVcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgLy8gc2hvdyB0by9mcm9tIGFycm93aGVhZHMgYmFzZWQgb24gbGluayBcInR5cGVcIiBhdHRyaWJ1dGVcclxuICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICBmcm9tQXJyb3c6IFwiQmFja3dhcmRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2UpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic2NhbGVcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRBcnJvd2hlYWRTY2FsZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAndHlwZScsIGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdCA9PSAnZnJvbScgfHwgdCA9PSAndG9Gcm9tJztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICB0b0Fycm93OiBcIlN0YW5kYXJkXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc3Ryb2tlJywgJycsIGdldFJMaW5rU2VsZWN0aW9uU3Ryb2tlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInNjYWxlXCIsIFwiXCIsIG1hcC5nZXRMYXlvdXRzKCkuZ2V0QXJyb3doZWFkU2NhbGUpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJ3R5cGUnLCBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgPT0gJ3RvJyB8fCB0ID09ICd0b0Zyb20nO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApLFxyXG5cclxuICAgICAgICBtayhnby5QYW5lbCwgZ28uUGFuZWwuQXV0bywgLy8gbGluayBsYWJlbCBcImtub2JcIlxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dLbm9iKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic2NhbGVcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRBcnJvd2hlYWRTY2FsZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgIGZpZ3VyZTogXCJFbGxpcHNlXCIsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBjb2xvckQsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IGNvbG9yRCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMixcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMTJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgdGhpcy5wTGlua1RlbXBsYXRlID1cclxuICAgIG1rKGdvLkxpbmssXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjdXJ2ZTogZ28uTGluay5CZXppZXIsXHJcbiAgICAgICAgICAgIGFkanVzdGluZzogZ28uTGluay5TdHJldGNoLFxyXG4gICAgICAgICAgICByZXNoYXBhYmxlOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBuZXcgZ28uQmluZGluZyhcInBvaW50c1wiKS5tYWtlVHdvV2F5KCksXHJcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJjdXJ2aW5lc3NcIiwgXCJjdXJ2aW5lc3NcIiksXHJcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gKHNlbGYuc2hvd1BMaW5rKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICBzZWxlY3Rpb25BZG9ybmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgbGF5ZXJOYW1lOiAnQmFja2dyb3VuZCcsIC8vIG1ha2UgUCBsaW5rcyBmYWxsIGJlaGluZCBSIGxpbmtzXHJcbiAgICAgICAgICAgIHJvdXRpbmc6IGdvLkxpbmsuTm9ybWFsLFxyXG4gICAgICAgICAgICBjdXJ2ZTogZ28uTGluay5CZXppZXIsXHJcbiAgICAgICAgICAgIGFkanVzdGluZzogZ28uTGluay5TdHJldGNoLFxyXG4gICAgICAgICAgICByZXNoYXBhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobGlua0luZm8odGFyZ2V0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInN0cm9rZVdpZHRoXCIsIFwiXCIsIG1hcC5nZXRMYXlvdXRzKCkuZ2V0TGlua1N0cm9rZVdpZHRoKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIkxJTktTSEFQRVwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBjb2xvclBMaWdodCxcclxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUExpZ2h0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKSxcclxuICAgICAgICBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgLy8gbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gKHNlbGYuc2hvd1BEb3Qob2JqKSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgLy8gfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldEFycm93aGVhZFNjYWxlKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICB0b0Fycm93OiBcIkNpcmNsZVwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBjb2xvclBMaWdodCxcclxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUExpZ2h0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgdGhpcy5kTGlua1RlbXBsYXRlID1cclxuICAgIG1rKGdvLkxpbmssIHtcclxuICAgICAgICBzZWxlY3RhYmxlOiBmYWxzZVxyXG4gICAgfSxcclxuICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICBuYW1lOiBcIkxJTktTSEFQRVwiLFxyXG4gICAgICAgICAgICBzdHJva2U6IG51bGxcclxuICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0gdGVtcG9yYXJ5IGxpbmsvbm9kZSB0ZW1wbGF0ZXMsIGZvciB1c2Ugd2hlbiBkcmFnZ2luZyB0byBjcmVhdGUgUi9QIGxpbmVzIC0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBkZWZpbmUgaW5pdGlhbCB0ZW1wb3JhcnkgbGluayB0ZW1wbGF0ZXMgLSB0aGVzZSB3aWxsIGJlIG1vZGlmaWVkIHdoZW4gaGFuZGxlUG9ydFRhcmdldGVkIGlzIGNhbGxlZFxyXG4gICAgdGhpcy5zZXRUZW1wb3JhcnlMaW5rVGVtcGxhdGVzID0gZnVuY3Rpb24gKHRvb2wpIHtcclxuICAgICAgICB0b29sLnRlbXBvcmFyeUxpbmsgPSBtYWtlVGVtcG9yYXJ5TGlua1RlbXBsYXRlKCk7XHJcbiAgICAgICAgdG9vbC50ZW1wb3JhcnlGcm9tTm9kZSA9IG1ha2VUZW1wb3JhcnlOb2RlVGVtcGxhdGUoKTtcclxuICAgICAgICB0b29sLnRlbXBvcmFyeVRvTm9kZSA9IG1ha2VUZW1wb3JhcnlOb2RlVGVtcGxhdGUoKTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gbWFrZVRlbXBvcmFyeUxpbmtUZW1wbGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uTGluaywge1xyXG4gICAgICAgICAgICBsYXllck5hbWU6IFwiVG9vbFwiLFxyXG4gICAgICAgICAgICBjdXJ2ZTogZ28uTGluay5CZXppZXJcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2xpbmtzaGFwZScsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1ha2VUZW1wb3JhcnlOb2RlVGVtcGxhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLkdyb3VwLCB7XHJcbiAgICAgICAgICAgIGxheWVyTmFtZTogXCJUb29sXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJCb3JkZXJcIiwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2JvcmRlcicsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMyxcclxuICAgICAgICAgICAgICAgIGZpbGw6IG51bGxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjaGFuZ2UgY29sb3IgYW5kIHBvcnRJZCBvZiB0ZW1wb3JhcnkgbGluayB0ZW1wbGF0ZXMgYmFzZWQgb24gdGhlIHR5cGUgb2YgbGluayBiZWluZyBjcmVhdGVkL3JlbGlua2VkXHJcbiAgICB0aGlzLmhhbmRsZVBvcnRUYXJnZXRlZCA9IGZ1bmN0aW9uICh0b29sLCByZWFsbm9kZSwgcmVhbHBvcnQsIHRlbXBub2RlLCB0ZW1wcG9ydCwgdG9lbmQpIHtcclxuICAgICAgICAvLyAvL2NvbnNvbGUubG9nKCdwb3J0VGFyZ2V0ZWQsIHJlYWxwb3J0OiAnICsgKHJlYWxwb3J0ID8gcmVhbHBvcnQubmFtZSA6ICcnKSArICcsIHRlbXBwb3J0OiAnICsgKHRlbXBwb3J0ID8gdGVtcHBvcnQubmFtZSA6ICcnKSBcclxuICAgICAgICAvLyAgICAgKyAnLCBvcmlnaW5hbEZyb21Qb3J0OiAnICsgKGx0b29sLm9yaWdpbmFsRnJvbVBvcnQgPyBsdG9vbC5vcmlnaW5hbEZyb21Qb3J0Lm5hbWUgOiAnJykgKyAnLCBvcmlnaW5hbFRvUG9ydDogJyArIGx0b29sLm9yaWdpbmFsVG9Qb3J0KTtcclxuXHJcbiAgICAgICAgdmFyIGxpbmtTaGFwZSA9IHRvb2wudGVtcG9yYXJ5TGluay5maW5kT2JqZWN0KCdsaW5rc2hhcGUnKTtcclxuICAgICAgICB2YXIgZnJvbUJvcmRlciA9IHRvb2wudGVtcG9yYXJ5RnJvbU5vZGUuZmluZE9iamVjdCgnYm9yZGVyJyk7XHJcbiAgICAgICAgdmFyIHRvQm9yZGVyID0gdG9vbC50ZW1wb3JhcnlUb05vZGUuZmluZE9iamVjdCgnYm9yZGVyJyk7XHJcblxyXG4gICAgICAgIGlmICh0b29sLm9yaWdpbmFsRnJvbVBvcnQgJiYgdG9vbC5vcmlnaW5hbEZyb21Qb3J0Lm5hbWUgPT0gJ2Nvcm5lclBTaGFwZScpIHtcclxuICAgICAgICAgICAgbGlua1NoYXBlLnN0cm9rZSA9IGNvbG9yUDtcclxuICAgICAgICAgICAgZnJvbUJvcmRlci5zdHJva2UgPSBjb2xvclA7XHJcbiAgICAgICAgICAgIHRvQm9yZGVyLnN0cm9rZSA9IGNvbG9yUDtcclxuICAgICAgICAgICAgZnJvbUJvcmRlci5wb3J0SWQgPSAnUCc7XHJcbiAgICAgICAgICAgIHRvQm9yZGVyLnBvcnRJZCA9ICdQJztcclxuICAgICAgICB9IGVsc2UgaWYgKHRvb2wub3JpZ2luYWxGcm9tUG9ydCAmJiB0b29sLm9yaWdpbmFsRnJvbVBvcnQubmFtZSA9PSAnY29ybmVyUlNoYXBlJykge1xyXG4gICAgICAgICAgICBsaW5rU2hhcGUuc3Ryb2tlID0gY29sb3JSO1xyXG4gICAgICAgICAgICBmcm9tQm9yZGVyLnN0cm9rZSA9IGNvbG9yUjtcclxuICAgICAgICAgICAgdG9Cb3JkZXIuc3Ryb2tlID0gY29sb3JSO1xyXG4gICAgICAgICAgICBmcm9tQm9yZGVyLnBvcnRJZCA9ICdSJztcclxuICAgICAgICAgICAgdG9Cb3JkZXIucG9ydElkID0gJ1InO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0ZW1wbm9kZS5zY2FsZSA9IG1hcC5nZXRMYXlvdXRzKCkuZ2V0U2NhbGUocmVhbG5vZGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBwcmV2ZW50IGR1cGxpY2F0ZSAnUCcgbGlua3MgaW4gdGhlIHNhbWUgZGlyZWN0aW9uIGJldHdlZW4gdGhlIHNhbWUgdHdvIHRoaW5nc1xyXG4gICAgdGhpcy52YWxpZGF0ZUxpbmsgPSBmdW5jdGlvbiAoZnJvbU5vZGUsIGZyb21Qb3J0LCB0b05vZGUsIHRvUG9ydCkge1xyXG4gICAgICAgIC8vIHRoZSBQIHBvcnQgaXMgb24gdG9wIG9mIHRoZSBSIHBvcnQsIHNvIGJvdGggUCBhbmQgUiBsaW5rcyBnZXQgdGhlIHRvUG9ydCBzZXQgdG8gUiBieSBkZWZhdWx0LlxyXG4gICAgICAgIGlmIChmcm9tUG9ydC5wb3J0SWQgPT0gJ1AnKSB7XHJcbiAgICAgICAgICAgIC8vIE5COiBmaW5kTGlua3NUbyB3b3VsZCBiZSBzaW1wbGVyLCBidXQgaXQgZG9lc24ndCBzZWVtIHRvIHdvcmsuLi4gKD8pXHJcbiAgICAgICAgICAgIHZhciBwTGlua3MgPSB0b05vZGUuZmluZExpbmtzQmV0d2Vlbihmcm9tTm9kZSwgJ1AnLCAnUCcpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd2YWxpZGF0ZUxpbmssIHBMaW5rcyBmcm9tICcgKyBmcm9tTm9kZSArICc6JyArIGZyb21Qb3J0ICsgJyB0byAnICsgdG9Ob2RlICsgJzonICsgdG9Qb3J0ICsgJyA9ICcgKyBwTGlua3MuY291bnQpO1xyXG4gICAgICAgICAgICBpZiAocExpbmtzLmNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocExpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwTGluayA9IHBMaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocExpbmsuZnJvbU5vZGUgPT0gZnJvbU5vZGUgJiYgcExpbmsudG9Ob2RlID09IHRvTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSBzbGlkZSBub2RlIHRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShhbGlnbm1lbnQpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwiZGVzaXJlZFNpemVcIiwgXCJcIiwgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlID0gb2JqLmFkb3JuZWRPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IE1hdGgubWluKHNsaWRlLndpZHRoLCBzbGlkZS5oZWlnaHQpICogLjA1O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBnby5TaXplKHNpemUsIHNpemUpO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGFsaWdubWVudCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJjb2wtcmVzaXplXCIsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAncmdiYSgyNTEsMTcwLDU0LDEpJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zbGlkZVRlbXBsYXRlID1cclxuICAgIG1rKGdvLk5vZGUsIGdvLlBhbmVsLkF1dG8sXHJcbiAgICAgICAgLy8gTkI6IHVubGlrZSBncm91cHMsIHNsaWRlcyBqdXN0IHVzZSBhIG5vcm1hbCAyLXdheSBsb2NhdGlvbiBiaW5kaW5nXHJcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJsb2NhdGlvblwiLCBcImxvY1wiLCBnby5Qb2ludC5wYXJzZSkubWFrZVR3b1dheShnby5Qb2ludC5zdHJpbmdpZnkpLFxyXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwid2lkdGhcIiwgXCJ3aWR0aFwiKS5tYWtlVHdvV2F5KCksXHJcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJoZWlnaHRcIiwgXCJoZWlnaHRcIikubWFrZVR3b1dheSgpLFxyXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwidmlzaWJsZVwiLCBcIlwiLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmouZGF0YS5oYXNSZWdpb24gJiZcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSAmJlxyXG4gICAgICAgICAgICAgICAgIW1hcC5nZXRQcmVzZW50ZXIoKS5pc1ByZXNlbnRpbmcgJiZcclxuICAgICAgICAgICAgICAgICFtYXAuZ2V0UHJlc2VudGVyKCkuaXNDcmVhdGluZ1RodW1ibmFpbCAmJlxyXG4gICAgICAgICAgICAgICAgbWFwLmdldFByZXNlbnRlcigpLmN1cnJlbnRTbGlkZUluZGV4ID09IG9iai5kYXRhLmluZGV4O1xyXG4gICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgbG9jYXRpb25TcG90OiBnby5TcG90LlRvcExlZnQsXHJcbiAgICAgICAgICAgIHNlbGVjdGlvbkFkb3JuZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICByZXNpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHJlc2l6ZUFkb3JubWVudFRlbXBsYXRlOiBtayhnby5BZG9ybm1lbnQsIFwiU3BvdFwiLFxyXG4gICAgICAgICAgICAgICAgbWsoZ28uUGxhY2Vob2xkZXIpLCAvLyB0YWtlcyBzaXplIGFuZCBwb3NpdGlvbiBvZiBhZG9ybmVkIG9iamVjdCAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlRvcExlZnQpLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Ub3ApLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Ub3BSaWdodCksXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlJpZ2h0KSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuQm90dG9tUmlnaHQpLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Cb3R0b20pLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Cb3R0b21MZWZ0KSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuTGVmdClcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDAsXHJcbiAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobm9kZUluZm8odGFyZ2V0LnBhcnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLCB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwic2xpZGVib3JkZXJcIixcclxuICAgICAgICAgICAgZmlsbDogJ3JnYmEoMjUxLDE3MCw1NCwuMSknLFxyXG4gICAgICAgICAgICBzdHJva2U6IG51bGxcclxuICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSBleHBvcnQgZm9vdGVyIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBOQjogdGhpcyBpcyBub3QgYSB0ZW1wbGF0ZSBwZXIgc2UsIGluIHRoYXQgaXQgaXMgYWRkZWQgdG8gdGhlIGRpYWdyYW0gXHJcbiAgICAvLyBzdGF0aWNhbGx5LCByYXRoZXIgdGhhbiBiZWluZyBib3VuZCB0byBzb21ldGhpbmcgaW4gdGhlIG1vZGVsLlxyXG4gICAgLy8gQnV0IHdlIHB1dCBpdCBoZXJlIGJlY2F1c2UgaXQgaXMgYWJvdXQgY3JlYXRpbmcgcGFydHMgYW5kIHN0dWZmLlxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUV4cG9ydEZvb3RlcigpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uTm9kZSwgZ28uUGFuZWwuU3BvdCwge1xyXG4gICAgICAgICAgICBsYXllck5hbWU6ICdGb3JlZ3JvdW5kJyxcclxuICAgICAgICAgICAgbG9jYXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgc2NhbGU6IDEsXHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgc2VsZWN0YWJsZTogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJSZWN0YW5nbGVcIiwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJyZWN0YW5nbGVcIixcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNjAsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtayhnby5QaWN0dXJlLCB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdtZXRhbWFwL2Fzc2V0cy9pbWcvbWV0YW1hcC1sb2dvLTUwLnBuZycsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuVG9wTGVmdCxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LlRvcExlZnQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTk1LFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA1MFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIm1ldGFtYXAuY2FicmVyYXJlc2VhcmNoLm9yZ1wiLFxyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50OiBnby5TcG90LkJvdHRvbUxlZnQsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnRGb2N1czogZ28uU3BvdC5Cb3R0b21MZWZ0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDIwMFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIm1hcFRpdGxlXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuVG9wUmlnaHQsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnRGb2N1czogZ28uU3BvdC5Ub3BSaWdodCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAzMDBcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJhdXRob3JOYW1lXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuQm90dG9tUmlnaHQsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnRGb2N1czogZ28uU3BvdC5Cb3R0b21SaWdodCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAzMDBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjcmVhdGVzIG9yIHJlZnJlc2hlcyB0aGUgZm9vdGVyIGxvZ28vdGV4dCB0aGF0IGlzIGRpc3BsYXllZCBpbiB0aGUgaW1hZ2UgZXhwb3J0XHJcbiAgICB0aGlzLmFkZEV4cG9ydEZvb3RlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIV9leHBvcnRGb290ZXIpIHtcclxuICAgICAgICAgICAgX2V4cG9ydEZvb3RlciA9IGNyZWF0ZUV4cG9ydEZvb3RlcigpO1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmFkZChfZXhwb3J0Rm9vdGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2hvd0V4cG9ydEZvb3RlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVjdCA9IG1hcC5jb21wdXRlTWFwQm91bmRzKCk7XHJcbiAgICAgICAgLy8gcHV0IGZvb3RlciBhdCBsZWFzdCAxMDAgcHggYmVsb3cgYm90dG9tIG9mIG1hcDsgbWFrZSBpdCBhdCBsZWFzdCA1MDBweCB3aWRlXHJcbiAgICAgICAgdmFyIHggPSByZWN0Lng7XHJcbiAgICAgICAgdmFyIHkgPSByZWN0LnkgKyByZWN0LmhlaWdodCArIE1hdGgubWF4KDEwMCwgcmVjdC5oZWlnaHQgLyA1KTtcclxuICAgICAgICB2YXIgdyA9IE1hdGgubWF4KDUwMCwgcmVjdC53aWR0aCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0V4cG9ydEZvb3RlciwgYm91bmRzIHJlY3Q6ICcgKyByZWN0ICsgJywgdzogJyArIHcpO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIubG9jYXRpb24gPSBuZXcgZ28uUG9pbnQoeCwgeSk7XHJcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5maW5kT2JqZWN0KFwicmVjdGFuZ2xlXCIpLndpZHRoID0gdztcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLmZpbmRPYmplY3QoXCJtYXBUaXRsZVwiKS50ZXh0ID0gXCJNYXAgVGl0bGU6IFwiICsgJHNjb3BlLm1hcFRpdGxlO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIuZmluZE9iamVjdChcImF1dGhvck5hbWVcIikudGV4dCA9IFwiQXV0aG9yOiBcIiArICRzY29wZS51c2VyTmFtZTtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLm9wYWNpdHkgPSAxO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIuaW52YWxpZGF0ZUxheW91dCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhpZGVFeHBvcnRGb290ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5vcGFjaXR5ID0gMDtcclxuICAgIH07XHJcblxyXG59OyIsIlxyXG5TYW5kYmFua0VkaXRvci5UZXN0cyA9IGZ1bmN0aW9uICgkc2NvcGUsIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICB0aGlzLlRFU1RfU1RBVFVTX05PVF9SVU4gPSAnbm90LXJ1bic7XHJcbiAgICB0aGlzLlRFU1RfU1RBVFVTX1BBU1NFRCA9ICdwYXNzZWQnO1xyXG4gICAgdGhpcy5URVNUX1NUQVRVU19FWEFNSU5FID0gJ2V4YW1pbmUnO1xyXG4gICAgdGhpcy5URVNUX1NUQVRVU19GQUlMRUQgPSAnZmFpbGVkJztcclxuXHJcbiAgICB0aGlzLmN1cnJlbnRUZXN0ID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucnVuVGVzdCA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgICAgIHZhciB0ZXN0ID0gXy5maW5kV2hlcmUoc2VsZi50ZXN0cywgeyBuYW1lOiBuYW1lIH0pO1xyXG4gICAgICAgICAgICB0ZXN0LnN0YXR1cyA9IHNlbGYuVEVTVF9TVEFUVVNfTk9UX1JVTjtcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50VGVzdCA9IHRlc3Q7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY2xlYXIoKTtcclxuICAgICAgICAgICAgdGVzdC5ydW4oZGlhZ3JhbSk7XHJcbiAgICAgICAgICAgIGlmICh0ZXN0LmNoZWNrID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRlc3Quc3RhdHVzID0gc2VsZi5URVNUX1NUQVRVU19FWEFNSU5FO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGVzdC5mYWlsUmVhc29uID0gdGVzdC5jaGVjayhkaWFncmFtKTtcclxuICAgICAgICAgICAgICAgIGlmIChfLmlzU3RyaW5nKHRlc3QuZmFpbFJlYXNvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXN0LnN0YXR1cyA9IHNlbGYuVEVTVF9TVEFUVVNfRkFJTEVEOyAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlc3Quc3RhdHVzID0gc2VsZi5URVNUX1NUQVRVU19QQVNTRUQ7ICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7ICAgICAgICBcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGVHZW5lcmF0b3JUZXN0ID0gZnVuY3Rpb24obmFtZSwgbWFwSXRGbikge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdUaGlua1E6ICcgKyBuYW1lLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHsgc2VsZi5ydW5HZW5lcmF0b3JUZXN0KG1hcEl0Rm4pOyB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5ydW5HZW5lcmF0b3JUZXN0ID0gZnVuY3Rpb24obWFwSXRGbikge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgZ2VuZXJhdG9yID0gbWFwLmdldEdlbmVyYXRvcigpO1xyXG4gICAgICAgIGdlbmVyYXRvci5jb25jZXB0MSA9ICdDT05DRVBUIDEnO1xyXG4gICAgICAgIGdlbmVyYXRvci5jb25jZXB0MiA9ICdDT05DRVBUIDInO1xyXG4gICAgICAgIGdlbmVyYXRvci5tYXBJdChtYXBJdEZuKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50ZXN0cyA9IFtcclxuICAgICAgICAvLyB7XHJcbiAgICAgICAgLy8gICAgIG5hbWU6ICdbRmFpbGVkIHRlc3RdJyxcclxuICAgICAgICAvLyAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgLy8gICAgIGNoZWNrOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gJ1RoaXMgdGVzdCBmYWlsZWQgLSB0aGlzIGlzIG9ubHkgYSB0ZXN0Lic7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ1Jlc2V0IG1hcCcsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5jbGlja0NyZWF0aW5nVG9vbC5pbnNlcnRQYXJ0KG5ldyBnby5Qb2ludCgwLDApKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5jb3VudCA9PSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgU2lzdGVyJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmluc2VydFBhcnQobmV3IGdvLlBvaW50KDAsMCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgbWFwLmNyZWF0ZVNpc3Rlcihncm91cCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5jb3VudCA9PSAyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgUiB0byBTaXN0ZXInLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuaW5zZXJ0UGFydChuZXcgZ28uUG9pbnQoMCwwKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBtYXAuY3JlYXRlUlRvU2lzdGVyKGdyb3VwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnQ3JlYXRlIENoaWxkJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmluc2VydFBhcnQobmV3IGdvLlBvaW50KDAsMCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGdyb3VwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnQ3JlYXRlIDMgY2hpbGRyZW4gYW5kIHN3aXRjaCB0byBmcmVlaGFuZCcsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5jbGlja0NyZWF0aW5nVG9vbC5pbnNlcnRQYXJ0KG5ldyBnby5Qb2ludCgwLDApKTtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChncm91cCk7XHJcbiAgICAgICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoZ3JvdXApO1xyXG4gICAgICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGdyb3VwKTtcclxuICAgICAgICAgICAgICAgIC8vIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsYXlvdXQnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIGdyb3VwLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuc2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQoJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5jb3VudCAhPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdUb3AgbGV2ZWwgZ3JvdXAgY291bnQgaXMgbm90IDEnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwLm1lbWJlclBhcnRzLmNvdW50ICE9IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1BhcmVudCBkYXRhIGNoaWxkcmVuIGlzIG5vdCAzJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFJUQkIgaW50byBvdXRsaW5lIFMnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIHRoZSBwcmVzZWxlY3RlZCBSVEJCIGludG8gV2hvbGUgKFMpLCB0aGVuIGRvIGFuIFVuZG8nLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZVRoaW5nKDI1MCwgMCwgJ1BhcnQgMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIgPSBtYXAuY3JlYXRlVGhpbmcoNTAwLCAwLCAnUGFydCAyJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MSwgcGFydDIsICdSdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhcnQyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFJUQkIgaW50byBmcmVlaGFuZCBTJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyB0aGUgcHJlc2VsZWN0ZWQgUlRCQiBpbnRvIFdob2xlIChTKSBhbmQgZXhhbWluZSBsYXlvdXQnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBvbGRQYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ09sZCBQYXJ0IDEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVUaGluZygyNTAsIDMwLCAnUGFydCAxJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVUaGluZyg1MDAsIDcwLCAnUGFydCAyJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MSwgcGFydDIsICdSdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhcnQyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgUlRCQiBpbiBvdXRsaW5lIGFuZCBzd2l0Y2ggdG8gZnJlZWhhbmQnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdDaGVjayBhdXRvLWdlbmVyYXRlZCBmcmVlaGFuZCBsYXlvdXQgb2YgcGFydHMnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAxJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEsIHBhcnQyLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICB3aG9sZS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLnNldFNlbGVjdGVkVGhpbmdzTGF5b3V0KCdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgLy9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh3aG9sZS5kYXRhLCAnbGF5b3V0JywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICAvL21hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyBjcmVhdGUgUlRCQiBpbiBmcmVlaGFuZCwgYWRkIHBhcnQgaW4gb3V0bGluZSwgc3dpdGNoIGJhY2sgdG8gZnJlZWhhbmRcclxuICAgICAgICAvLyBjcmVhdGUgUlRCQiBpbiBmcmVlaGFuZCwgZHJhZyBpbiBwYXJ0IGluIG91dGxpbmUsIHN3aXRjaCBiYWNrIHRvIGZyZWVoYW5kXHJcblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgUlRCQiBvdXQgb2YgUycsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgdGhlIHByZXNlbGVjdGVkIFJUQkIgb250byBXaG9sZSAoRCknLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAxJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEsIHBhcnQyLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgcGFydDEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0Mi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyBSVEJCIG91dCBvZiBmcmVlaGFuZCBTJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyB0aGUgcHJlc2VsZWN0ZWQgUlRCQiBvbnRvIFdob2xlIChEKScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAxJywgMTAsIDEyMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMicsIDExMCwgMTUwKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxLCBwYXJ0MiwgJ1J0aGluZycpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHBhcnQxLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcGFydDIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgUlRCQiBvdXQgb2YgMm5kIGxldmVsIFMnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIHRoZSBwcmVzZWxlY3RlZCBSVEJCIG9udG8gV2hvbGUgKEQpIG9mIFBhcnQgMScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMiA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4yJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhzdWJwYXJ0MTEsIHN1YnBhcnQxMiwgJ1J0aGluZycpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAyJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgc3VicGFydDExLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc3VicGFydDEyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFJUQkIgb3V0IG9mIDJuZCBsZXZlbCBmcmVlaGFuZCBTJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyB0aGUgcHJlc2VsZWN0ZWQgUlRCQiBvbnRvIFdob2xlIChEKSBvZiBQYXJ0IDEnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMScsIDAsIDEyMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnLCAxMCwgMTgwKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTIgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMicsIDIwLCAyMjApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoc3VicGFydDExLCBzdWJwYXJ0MTIsICdSdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMicsIDAsIDMwMCk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgc3VicGFydDExLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc3VicGFydDEyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdSY2hhbm5lbCcsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ05vdGUgdGhhdCBSLXRoaW5ncyBhcmUgaW4gcGFydC13aG9sZSByZWxhdGlvbicsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUgMScsICdyaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnUGFydCAxLjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAwLCAnV2hvbGUgMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMjEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAnUGFydCAyLjEnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzEgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAnUnRoaW5nIDEtMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzExID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDExLCBjaGlsZDIxLCAnUnRoaW5nIDEuMSAtIDIuMScpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnUmNoYW5uZWwsIHJUaGluZzExOiAnICsgclRoaW5nMTEpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHJUaGluZzExLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgbWFwLmFkZFNlbGVjdGVkVGhpbmdzQXNDaGlsZHJlbk9mKHJUaGluZzEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEaXNhcHBlYXJpbmcgcGFydHMgb24gbmV3IGlkZWEgY3JlYXRpb24nLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdDcmVhdGUgYSBuZXcgdG9wLWxldmVsIGlkZWEgLSBQYXJ0IDEuMSBzaG91bGQgbm90IGRpc2FwcGVhciB0ZW1wb3JhcmlseScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUgMScsICdyaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnUGFydCAxLjEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyB0b3AtbGV2ZWwgdGhpbmcgaW50byBmcmVlaGFuZCBzeXN0ZW0nLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIE5ldyBQYXJ0IGludG8gV2hvbGU7IGV4YW1pbmUgcmVzdWx0aW5nIHBhcnQgbGF5b3V0JyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnUGFydCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1BhcnQgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAwLCAnTmV3IFBhcnQnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIHRvcC1sZXZlbCBSVEJCIGludG8gZnJlZWhhbmQgc3lzdGVtJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBwcmVzZWxlY3RlZCBSVEJCIGludG8gV2hvbGU7IGV4YW1pbmUgcmVzdWx0aW5nIHBhcnQgbGF5b3V0JyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnUGFydCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhciA9IG1hcC5jcmVhdGVUaGluZygyNTAsIDAsICdCYXInLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJlbGwgPSBtYXAuY3JlYXRlVGhpbmcoNTAwLCAwLCAnQmVsbCcsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhiYXIsIGJlbGwsICdSdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBiYXIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBiZWxsLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFItdGhpbmcgc3F1YXJlIGludG8gZnJlZWhhbmQgc3lzdGVtJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBwcmVzZWxlY3RlZCBzcXVhcmUgaW50byBXaG9sZTsgZXhhbWluZSByZXN1bHRpbmcgcGFydCBsYXlvdXQnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCA1MCwgJ1dob2xlJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQxMSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MTEgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAwLCAnUGFydDExJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MTIgPSBtYXAuY3JlYXRlVGhpbmcoNTAwLCAwLCAnUGFydDEyJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MjEgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAyNTAsICdQYXJ0MjEnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyMiA9IG1hcC5jcmVhdGVUaGluZyg1MDAsIDI1MCwgJ1BhcnQyMicsICdsZWZ0Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzExXzEyID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MTEsIHBhcnQxMiwgJ1J0aGluZyAxMS0xMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzExXzIxID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MTEsIHBhcnQyMSwgJ1J0aGluZyAxMS0yMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzEyXzIyID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MTIsIHBhcnQyMiwgJ1J0aGluZyAxMi0yMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzIxXzIyID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MjEsIHBhcnQyMiwgJ1J0aGluZyAyMS0yMicpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHBhcnQxMS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhcnQxMi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhcnQyMS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhcnQyMi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyBSLXRoaW5nIHNxdWFyZSBvdXQgb2YgZnJlZWhhbmQgc3lzdGVtJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBwcmVzZWxlY3RlZCBzcXVhcmUgb250byBEIG9mIFdob2xlOyBleGFtaW5lIHJlc3VsdGluZyBsYXlvdXQnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCA1MCwgJ1dob2xlJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQxMSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0MTEnLCAxMCwgMTkwKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MTIgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0MTInLCAxMjAsIDE5MCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydDIxJywgMTAsIDMwMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydDIyJywgMTIwLCAzMDApO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMV8xMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDExLCBwYXJ0MTIsICdSdGhpbmcgMTEtMTInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMV8yMSA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDExLCBwYXJ0MjEsICdSdGhpbmcgMTEtMjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMl8yMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEyLCBwYXJ0MjIsICdSdGhpbmcgMTItMjInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcyMV8yMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDIxLCBwYXJ0MjIsICdSdGhpbmcgMjEtMjInKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MTEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MTIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MjEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MjIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgMm5kIGxldmVsIHBhcnQgdG8gRCBvZiBwYXJlbnQnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIFN1YnBhcnQgMS4xIG9udG8gRCBvZiBQYXJ0IDE7IGl0IHNob3VsZCBhcHBlYXIgYmVsb3cgUGFydCAxJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDInKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0ludmlzaWJsZSBSLXRoaW5nIGluIDJuZCBsZXZlbCBvZiBvdXRsaW5lJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnUi10aGluZyBiZXR3ZWVuIFN1YnBhcnRzIDEuMSBhbmQgMS4yIHNob3VsZCBiZSB2aXNpYmxlJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDEyID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHN1YnBhcnQxMSwgc3VicGFydDEyLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICByVGhpbmcuZGVzaXJlZFNpemUgPSBuZXcgZ28uU2l6ZSgzMCwzMCk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnclRoaW5nIGFjdHVhbEJvdW5kczogJyArIHJUaGluZy5hY3R1YWxCb3VuZHMgKyAnLCBzY2FsZTogJyArIHJUaGluZy5zY2FsZSArICcsIGRlc2lyZWRTaXplOiAnICsgclRoaW5nLmRlc2lyZWRTaXplKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ1dob2xlIGRlc2lyZWRTaXplOiAnICsgd2hvbGUuZGVzaXJlZFNpemUpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdSLXRoaW5nIGJldHdlZW4gaWRlYXMgaW4gc2FtZSBsb2NhdGlvbiAoZXJyb3IpJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnVGhpcyBzaG91bGQgdHJpZ2dlciBhbiBlcnJvcicsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgLy8gdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1BhcnQgMScsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdQYXJ0IDInLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxLCBwYXJ0MiwgJ1J0aGluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICAvLyB9IGNhdGNoKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBhbGVydChlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyB7XHJcbiAgICAgICAgLy8gICAgIG5hbWU6ICdGaXggYmFkIFItdGhpbmcgbGVhZGluZyB0byBpbmZpbml0ZSBsb29wJyxcclxuICAgICAgICAvLyAgICAgaW5zdHJ1Y3Rpb25zOiAnTWFwIHNob3VsZCBkaXNwbGF5IGFuZCBub3QgdHJpZ2dlciBpbmZpbml0ZSBsb29wOyBtb2RlbCBzaG91bGQgYmUgZml4ZWQgc28gdGhhdCByLXRoaW5nIGlzIG5vdCBQYXJ0IDEuMSBvciBQYXJ0IDEuMicsXHJcbiAgICAgICAgLy8gICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgIC8vICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCAwLCAnVGhpbmcxJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgLy8gICAgICAgICB2YXIgY2hpbGQxMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdQYXJ0IDEuMScpO1xyXG4gICAgICAgIC8vICAgICAgICAgdmFyIGNoaWxkMTIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnUGFydCAxLjInKTtcclxuICAgICAgICAvLyAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMTEsIGNoaWxkMTIsICdSdGhpbmcnKTtcclxuICAgICAgICAvLyAgICAgICAgIHZhciByTGluayA9IHJUaGluZy5sYWJlbGVkTGluaztcclxuICAgICAgICAvLyAgICAgICAgIHJMaW5rLmRhdGEubGFiZWxLZXlzID0gW2NoaWxkMTEuZGF0YS5rZXldO1xyXG4gICAgICAgIC8vICAgICAgICAgbWFwLmNoZWNrTW9kZWwoKTtcclxuICAgICAgICAvLyAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgdG8gY3JlYXRlIFItbGluZScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgZnJvbSB0aGUgUi1jb3JuZXIgb2YgVGhpbmcxIHRvIFRoaW5nMjsgdGVtcG9yYXJ5IGRyYWcgbGluZSBhbmQgc3F1YXJlIHNob3VsZCBiZSBSLWNvbG9yOyBjcmVhdGVkIGxpbmUgc2hvdWxkIGJlIGFuIFItbGluZScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCAwLCAnVGhpbmcxJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKDEwMCwgMCwgJ1RoaW5nMicsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIHRvIGNyZWF0ZSBQLWxpbmUnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIGZyb20gdGhlIFAtY29ybmVyIG9mIFRoaW5nMSB0byBUaGluZzI7IHRlbXBvcmFyeSBkcmFnIGxpbmUgYW5kIHNxdWFyZSBzaG91bGQgYmUgUC1jb2xvcjsgY3JlYXRlZCBsaW5lIHNob3VsZCBiZSBhIFAtbGluZScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCAwLCAnVGhpbmcxJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKDEwMCwgMCwgJ1RoaW5nMicsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdSZWxpbmsgZnJvbS1wb3J0IG9mIFItbGluZScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ01vdmUgdGhlIHN0YXJ0IG9mIHRoZSBSLWxpbmsgZnJvbSBUaGluZyAxIHRvIFRoaW5nIDM7IG1ha2Ugc3VyZSBpdCBkb2VzIG5vdCB0dXJuIGludG8gYSBQLWxpbmsnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoLTEwMCwgMCwgJ1RoaW5nMScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZygzMDAsIDAsICdUaGluZzInLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzMgPSBtYXAuY3JlYXRlVGhpbmcoMTAwLCAyMDAsICdUaGluZzMnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBybGluayA9IG1hcC5jcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ1JlbGluayB0by1wb3J0IG9mIFItbGluZScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ01vdmUgdGhlIGVuZCBvZiB0aGUgUi1saW5rIGZyb20gVGhpbmcgMiB0byBUaGluZyAzOyBtYWtlIHN1cmUgaXQgZG9lcyBub3QgdHVybiBpbnRvIGEgUC1saW5rJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKC0xMDAsIDAsICdUaGluZzEnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoMzAwLCAwLCAnVGhpbmcyJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmczID0gbWFwLmNyZWF0ZVRoaW5nKDEwMCwgMjAwLCAnVGhpbmczJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmxpbmsgPSBtYXAuY3JlYXRlUkxpbmsodGhpbmcxLCB0aGluZzIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdTaG93aW5nIHBhcnRzIG9mIHBhcnRzIG9mIGEgZnJlZWhhbmQgd2hvbGUnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdXaG9sZSwgUGFydCAxIGFuZCBTdWJwYXJ0IDEuMSBzaG91bGQgYWxsIGJlIHZpc2libGUnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdXSEFUX0lTJywgbWFwLmdldEdlbmVyYXRvcigpLldIQVRfSVMpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUEFSVFNfT0YnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUEFSVFNfT0YpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUEFSVF9PRicsIG1hcC5nZXRHZW5lcmF0b3IoKS5QQVJUX09GKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1BBUlRTX0hBVkVfUEFSVFMnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUEFSVFNfSEFWRV9QQVJUUyksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdQT0lOVF9GT1InLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUE9JTlRfRk9SKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ0hBU19NVUxUSVBMRV9QUycsIG1hcC5nZXRHZW5lcmF0b3IoKS5IQVNfTVVMVElQTEVfUFMpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUl9UTycsIG1hcC5nZXRHZW5lcmF0b3IoKS5SX1RPKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1JfRVhJU1RTJywgbWFwLmdldEdlbmVyYXRvcigpLlJfRVhJU1RTKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1dIQVRfSVNfUicsIG1hcC5nZXRHZW5lcmF0b3IoKS5XSEFUX0lTX1IpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnRElTVElOR1VJU0hfQkVUV0VFTicsIG1hcC5nZXRHZW5lcmF0b3IoKS5ESVNUSU5HVUlTSF9CRVRXRUVOKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ0lTX1JfQkVUV0VFTicsIG1hcC5nZXRHZW5lcmF0b3IoKS5JU19SX0JFVFdFRU4pLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnQ0FOX0JFX1AnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuQ0FOX0JFX1ApLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnTVVMVElQTEVfUFNfQVJFJywgbWFwLmdldEdlbmVyYXRvcigpLk1VTFRJUExFX1BTX0FSRSksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdQX1BBUlRTJywgbWFwLmdldEdlbmVyYXRvcigpLlBfUEFSVFMpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnQ09NUEFSRV9DT05UUkFTVCcsIG1hcC5nZXRHZW5lcmF0b3IoKS5DT01QQVJFX0NPTlRSQVNUKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1JfUEFSVFMnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUl9QQVJUUyksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdQQVJUU19IQVZFX1JTJywgbWFwLmdldEdlbmVyYXRvcigpLlBBUlRTX0hBVkVfUlMpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUEFSVF9SU19FWElTVCcsIG1hcC5nZXRHZW5lcmF0b3IoKS5QQVJUX1JTX0VYSVNUKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1BBUlRfUlNfQVJFJywgbWFwLmdldEdlbmVyYXRvcigpLlBBUlRfUlNfQVJFKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1dIQVRfQUJPVVQnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuV0hBVF9BQk9VVClcclxuXHJcblxyXG4vLyBjb21wdXRlUGFydHNCb3VuZHNcclxuXHJcbi8vIGNyZWF0ZVJUaGluZ1xyXG4vLyBhZGRTZWxlY3RlZFRoaW5nc0FzQ2hpbGRyZW5PZlxyXG4vLyBhZGRTZWxlY3RlZFRoaW5nQXNPcmRlcmVkU2lzdGVyT2ZcclxuLy8gYWRkU2VsZWN0ZWRUaGluZ3NBc1Npc3RlcnNPZlxyXG4vLyBhZGRUaGluZ0FzUlRoaW5nXHJcbi8vIHRvZ2dsZURGbGFnXHJcbi8vIHRvZ2dsZVNFeHBhbnNpb25cclxuLy8gdG9nZ2xlUEV4cGFuc2lvblxyXG5cclxuLy8gcHJlc2VudGVyOiBzZWxlY3QgZmlyc3Qgc2xpZGUgYW5kIGhpdCBwbGF5OyBtYWtlIHN1cmUgZmlyc3Qgc2xpZGUgbm90ZXMgYXBwZWFyXHJcblxyXG5cclxuXHJcbiAgICBdO1xyXG4gICAgXHJcbn07XHJcblxyXG5cclxuIiwiU2FuZGJhbmtFZGl0b3IuVUkgPSBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0LCAkaHR0cCwgJHJlc291cmNlLCAkbW9kYWwsICRsb2csIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSB0YWIgKFwic2xpZGVyXCIpIElEcyAtIHRhYnMgYXJlIHJlbmRlcmVkIGluIHZpZXdzL21hcHMvX2Zvcm0gLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vdGhpcy5UQUJfSURfSElTVE9SWSA9ICdoaXN0b3J5LXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9QUkVTRU5URVIgPSAncHJlc2VudGVyLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9BTkFMWVRJQ1NfTUFQID0gJ2FuYWx5dGljcy10YWItbWFwJztcclxuICAgIHRoaXMuVEFCX0lEX0FOQUxZVElDU19USElORyA9ICdhbmFseXRpY3MtdGFiLXRoaW5nJztcclxuICAgIHRoaXMuVEFCX0lEX1BFUlNQRUNUSVZFUyA9ICdwZXJzcGVjdGl2ZXMtdGFiJztcclxuICAgIHRoaXMuVEFCX0lEX0RJU1RJTkNUSU9OUyA9ICdkaXN0aW5jdGlvbnMtdGFiJztcclxuICAgIHRoaXMuVEFCX0lEX0FUVEFDSE1FTlRTID0gJ2F0dGFjaG1lbnRzLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9HRU5FUkFUT1IgPSAnZ2VuZXJhdG9yLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9TVEFOREFSRFMgPSAnc3RhbmRhcmRzLXRhYic7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7fTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZWRpdG9yIG9wdGlvbnMgZm9yIG1hcC91c2VyIC0tLS0tLS0tLS1cclxuXHJcbiAgICB2YXIgbWFwRWRpdG9yT3B0aW9ucyA9IHt9O1xyXG5cclxuICAgIHZhciBkZWZhdWx0RWRpdG9yT3B0aW9ucyA9IHtcclxuICAgICAgICAvLyBub0Fycm93cywgdG8sIGZyb20sIHRvRnJvbVxyXG4gICAgICAgIGRlZmF1bHRSZWxhdGlvbnNoaXBEaXJlY3Rpb246ICdub0Fycm93cycsXHJcbiAgICAgICAgLy8gbGVmdCwgcmlnaHQsIHN0YWNrZWQsIGZyZWVoYW5kXHJcbiAgICAgICAgZGVmYXVsdFRoaW5nTGF5b3V0OiAnbGVmdCcsXHJcbiAgICAgICAgLy8gbGluZXMsIHNwb3RsaWdodCwgYm90aFxyXG4gICAgICAgIHBlcnNwZWN0aXZlTW9kZTogJ2xpbmVzJ1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBtYXAgaXMgbG9hZGVkIHRvIHNldCBzdG9yZWQgb3B0aW9ucyBmb3IgbWFwXHJcbiAgICB0aGlzLnNldE1hcEVkaXRvck9wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgbWFwRWRpdG9yT3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgYXBwcm9wcmlhdGUgdmFsdWVzIGZyb20gdGhlIHVzZXIgcHJvZmlsZSBvciB0aGUgZGVmYXVsdCBvcHRpb25zIGlmIG9wdGlvbnMgYXJlIG5vdCBzZXQgZm9yIHRoZSBtYXBcclxuICAgIHRoaXMuZ2V0TWFwRWRpdG9yT3B0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBwcm9maWxlT3B0aW9ucyA9ICgkc2NvcGUudXNlclByb2ZpbGUgPyAkc2NvcGUudXNlclByb2ZpbGUuZWRpdG9yT3B0aW9ucyA6IG51bGwpO1xyXG4gICAgICAgIHZhciB2YWxzID0gW21hcEVkaXRvck9wdGlvbnMsIHByb2ZpbGVPcHRpb25zLCBkZWZhdWx0RWRpdG9yT3B0aW9uc107XHJcbiAgICAgICAgbWFwRWRpdG9yT3B0aW9ucyA9IF8uZmluZCh2YWxzLCBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuICFfLmlzRW1wdHkodmFsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbWFwRWRpdG9yT3B0aW9ucztcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2F2ZXMgZGVmYXVsdCBvcHRpb25zIGZvciB0aGUgdXNlciAobWFwIG9wdGlvbnMgYXJlIHNhdmVkIGluIGF1dG9zYXZlLmpzKVxyXG4gICAgZnVuY3Rpb24gc2F2ZVVzZXJFZGl0b3JPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yX29wdGlvbnM6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAkaHR0cC5wdXQoJy91c2Vycy8nICsgJHNjb3BlLnVzZXJJZCArICcuanNvbicsIGRhdGEpLnRoZW4oXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgZWRpdG9yIG9wdGlvbnMnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBvcHRpb25zIG1vZGFsXHJcblxyXG4gICAgJHNjb3BlLmVkaXRvck9wdGlvbnMgPSBuZXcgU2FuZGJhbmtFZGl0b3JPcHRpb25zKCRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgJG1vZGFsLCAkbG9nKTtcclxuXHJcbiAgICB0aGlzLmVkaXRPcHRpb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLmVkaXRvck9wdGlvbnMub3Blbk1vZGFsKFxyXG4gICAgICAgICAgICBtYXBFZGl0b3JPcHRpb25zLFxyXG4gICAgICAgICAgICBmdW5jdGlvbihvcHRpb25zKSB7IC8vIG9uU2F2ZURlZmF1bHRzXHJcbiAgICAgICAgICAgICAgICBzYXZlVXNlckVkaXRvck9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKG9wdGlvbnMpIHsgLy8gb25VcGRhdGVcclxuICAgICAgICAgICAgICAgIG1hcEVkaXRvck9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldEF1dG9zYXZlKCkuc2F2ZU5vdygnZWRpdF9vcHRpb25zJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHN0YXRlIG1vZGVsIC0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLnN0YXRlID0ge307XHJcblxyXG4gICAgdmFyIGRlZmF1bHRTdGF0ZSA9IHtcclxuICAgICAgICBzaG93TmF2aWdhdG9yOiBmYWxzZSxcclxuICAgICAgICBjdXJyZW50VGFiOiBudWxsLFxyXG4gICAgICAgIHBlcnNwZWN0aXZlUG9pbnRLZXk6IG51bGwsXHJcbiAgICAgICAgZGlzdGluY3Rpb25UaGluZ0tleTogbnVsbFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNldFN0YXRlRGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzZWxmLnN0YXRlID0gZGF0YSB8fCBkZWZhdWx0U3RhdGU7XHJcbiAgICAgICAgICAgIC8vJHNjb3BlLmN1cnJlbnRUYWIgPSBzZWxmLnN0YXRlLmN1cnJlbnRUYWI7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFRPRE86IFNhdmUgc3RhdGUgbW9yZSBmcmVxdWVudGx5Pz8gQ3VycmVudGx5IGl0IGlzIG9ubHkgc2F2ZWQgd2hlbiBhdXRvc2F2ZSBpcyB0cmlnZ2VyZWQgYnkgb3RoZXIgYWN0aW9ucy4uLlxyXG5cclxuICAgIHRoaXMuZ2V0U3RhdGVEYXRhID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuc3RhdGU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIHRlbXBvcmFyeSBzdGF0ZSBmbGFncyAtLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLnpvb21pbmdUb1JlZ2lvbiA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMubW91c2VPdmVyR3JvdXAgPSBudWxsO1xyXG4gICAgdGhpcy5tb3VzZU92ZXJMaW5rID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmRyYWdUYXJnZXRHcm91cCA9IG51bGw7XHJcbiAgICB0aGlzLmRyYWdUYXJnZXRQb3NpdGlvbiA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5oZWxwVGlwID0gbnVsbDtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSBoYW5kbGUgYm90dG9tIHRhYnMgKFwic2xpZGVyc1wiKSAtLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gaW4gdGhlIGZvbGxvd2luZyBmdW5jdGlvbnMsIElEIGlzIGUuZy4gJ2hpc3RvcnktdGFiJyAoSUQgb2Ygb25lIG9mIHRoZSAuYm90dG9tLXRhYidzKVxyXG5cclxuICAgIC8vIHRoaXMgaXMgY2FsbGVkIGJ5IG1hcC5jdXJyZW50VGFiQ2hhbmdlZCwgd2hpY2ggaXMgdHJpZ2dlcmVkIGJ5IGEgJHNjb3BlLiR3YXRjaFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3VpLCBjdXJyZW50VGFiQ2hhbmdlZDogJyArIG5ld1ZhbHVlKTtcclxuICAgICAgICBzZWxmLnN0YXRlLmN1cnJlbnRUYWIgPSBuZXdWYWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jdXJyZW50VGFiSXMgPSBmdW5jdGlvbih0YWJJRCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUuY3VycmVudFRhYiA9PSB0YWJJRDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5vcGVuVGFiID0gZnVuY3Rpb24odGFiSUQpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudFRhYiA9IHRhYklEO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNsb3NlVGFiID0gZnVuY3Rpb24odGFiSUQpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzZWxmLnN0YXRlLmN1cnJlbnRUYWIgPSBudWxsOyAvLyBUT0RPOiB0cmlnZ2VyIGF1dG9zYXZlXHJcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50VGFiID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kaXNhYmxlVGFiID0gZnVuY3Rpb24odGFiSUQpIHtcclxuICAgICAgICAvLyBwcmV2ZW50IG9wZW5pbmcgb3RoZXIgdGFicyB3aGVuIGluIFAgb3IgRCBlZGl0b3JcclxuICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRUYWIgPT0gc2VsZi5UQUJfSURfUEVSU1BFQ1RJVkVTIHx8ICRzY29wZS5jdXJyZW50VGFiID09IHNlbGYuVEFCX0lEX0RJU1RJTkNUSU9OUykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZVRhYiA9IGZ1bmN0aW9uKHRhYklEKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5jdXJyZW50VGFiID09IHRhYklEKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudFRhYiA9IG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXNlbGYuZGlzYWJsZVRhYih0YWJJRCkpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50VGFiID0gdGFiSUQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50b2dnbGVOYXZpZ2F0b3IgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzZWxmLnN0YXRlLnNob3dOYXZpZ2F0b3IgPSAhc2VsZi5zdGF0ZS5zaG93TmF2aWdhdG9yO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZVpvb21pbmdUb1JlZ2lvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNlbGYuem9vbWluZ1RvUmVnaW9uID0gIXNlbGYuem9vbWluZ1RvUmVnaW9uO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0gem9vbWluZyBmdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuY2FuWm9vbUluID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5nZXREaWFncmFtKCkuc2NhbGUgPCAzMjtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jYW5ab29tT3V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5nZXREaWFncmFtKCkuc2NhbGUgPiAwLjI1O1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnpvb21JbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoZGlhZ3JhbS5zY2FsZSA8IDMyKSB7XHJcbiAgICAgICAgICAgIHZhciB2YiA9IGRpYWdyYW0udmlld3BvcnRCb3VuZHMuY29weSgpO1xyXG4gICAgICAgICAgICBkaWFncmFtLnNjYWxlID0gZGlhZ3JhbS5zY2FsZSAqIDI7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY2VudGVyUmVjdCh2Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnpvb21PdXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgaWYgKGRpYWdyYW0uc2NhbGUgPiAwLjI1KSB7XHJcbiAgICAgICAgICAgIHZhciB2YiA9IGRpYWdyYW0udmlld3BvcnRCb3VuZHMuY29weSgpO1xyXG4gICAgICAgICAgICBkaWFncmFtLnNjYWxlID0gZGlhZ3JhbS5zY2FsZSAvIDI7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY2VudGVyUmVjdCh2Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm1heWJlWm9vbVRvUmVnaW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIC8vIHRoaXMgZmxhZyBpcyBzZXQgYnkgdGhlIHRvb2xiYXIgYnV0dG9uXHJcbiAgICAgICAgaWYgKHNlbGYuem9vbWluZ1RvUmVnaW9uKSB7XHJcbiAgICAgICAgICAgIHNlbGYuem9vbWluZ1RvUmVnaW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3pvb21Ub1JlZ2lvbiwgc2VsZWN0aW9uIGNvdW50OiAnICsgZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQpO1xyXG4gICAgICAgICAgICB2YXIgcmVjdCA9IGRpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKGRpYWdyYW0uc2VsZWN0aW9uKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS56b29tVG9SZWN0KHJlY3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucmVzZXRab29tID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIC8vdmFyIHJlY3QgPSBkaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhkaWFncmFtLm5vZGVzKS5jb3B5KCk7XHJcbiAgICAgICAgdmFyIHJlY3QgPSBtYXAuc2FmZVJlY3QobWFwLmNvbXB1dGVNYXBCb3VuZHMoKSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygncmVzZXRab29tLCBib3VuZHM6ICcgKyByZWN0KTtcclxuICAgICAgICBpZiAocmVjdC53aWR0aCkge1xyXG4gICAgICAgICAgICByZWN0LmluZmxhdGUocmVjdC53aWR0aCAvIDUsIHJlY3QuaGVpZ2h0IC8gNSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpYWdyYW0uem9vbVRvUmVjdChyZWN0KTtcclxuICAgICAgICBkaWFncmFtLmFsaWduRG9jdW1lbnQoZ28uU3BvdC5DZW50ZXIsIGdvLlNwb3QuQ2VudGVyKTtcclxuICAgICAgICBpZiAoZGlhZ3JhbS5zY2FsZSA+IDEpIHtcclxuICAgICAgICAgICAgZGlhZ3JhbS5zY2FsZSA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gdGhpbmcgb3B0aW9ucyAobGF5b3V0KSAtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5nZXRTZWxlY3RlZFRoaW5nc09yRGVmYXVsdExheW91dCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBzbCA9IHNlbGYuZ2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQoKTtcclxuICAgICAgICBpZiAoc2wpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXBFZGl0b3JPcHRpb25zLmRlZmF1bHRUaGluZ0xheW91dDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgYSBub24tbnVsbCB2YWx1ZSBvbmx5IGlmIGFsbCBzZWxlY3RlZCBpdGVtcyBhcmUgZ3JvdXBzIHdpdGggdGhlIHNhbWUgbGF5b3V0XHJcbiAgICB0aGlzLmdldFNlbGVjdGVkVGhpbmdzTGF5b3V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGlmIChkaWFncmFtID09PSBudWxsIHx8IGRpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIHZhciBsYXlvdXQgPSBudWxsO1xyXG4gICAgICAgIHZhciBpdCA9IGRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCFpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTZWxlY3RlZFRoaW5nc0xheW91dCwgaXQudmFsdWU6ICcgKyBncm91cCk7XHJcbiAgICAgICAgICAgIHZhciBncm91cExheW91dCA9IChncm91cC5kYXRhID8gZ3JvdXAuZGF0YS5sYXlvdXQgOiBudWxsKTtcclxuICAgICAgICAgICAgaWYgKGxheW91dCAhPT0gbnVsbCAmJiBncm91cExheW91dCAhPSBsYXlvdXQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgbGF5b3V0ID0gZ3JvdXBMYXlvdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2dldFNlbGVjdGVkVGhpbmdzTGF5b3V0OiAnICsgbGF5b3V0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGxheW91dDtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0cyB0aGUgbGF5b3V0IG9mIGFsbCBzZWxlY3RlZCB0aGluZ3MgdG8gdGhlIGdpdmVuIGxheW91dFxyXG4gICAgdGhpcy5zZXRTZWxlY3RlZFRoaW5nc0xheW91dCA9IGZ1bmN0aW9uKGxheW91dE5hbWUpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbGF5b3V0JywgbGF5b3V0TmFtZSk7XHJcbiAgICAgICAgICAgICAgICBtYXAuZ2V0TGF5b3V0cygpLnNldERlc2NlbmRhbnRMYXlvdXRzKGdyb3VwLCBncm91cC5kYXRhLmxheW91dCk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gcmVsYXRpb25zaGlwIG9wdGlvbnMgKGRpcmVjdGlvbikgLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuZ2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzT3JEZWZhdWx0RGlyZWN0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNkID0gc2VsZi5nZXRTZWxlY3RlZFJlbGF0aW9uc2hpcHNEaXJlY3Rpb24oKTtcclxuICAgICAgICBpZiAoc2QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXBFZGl0b3JPcHRpb25zLmRlZmF1bHRSZWxhdGlvbnNoaXBEaXJlY3Rpb247XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIGEgbm9uLW51bGwgdmFsdWUgb25seSBpZiBhbGwgc2VsZWN0ZWQgaXRlbXMgYXJlIHJlbGF0aW9uc2hpcHMgd2l0aCB0aGUgc2FtZSBkaXJlY3Rpb25cclxuICAgIHRoaXMuZ2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzRGlyZWN0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGlmIChkaWFncmFtID09PSBudWxsIHx8IGRpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIHZhciB0eXBlID0gbnVsbDtcclxuICAgICAgICB2YXIgaXQgPSBkaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghaXQudmFsdWUgaW5zdGFuY2VvZiBnby5MaW5rKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBsaW5rVHlwZSA9IChsaW5rLmRhdGEgPyBsaW5rLmRhdGEudHlwZSA6IG51bGwpO1xyXG4gICAgICAgICAgICBpZiAodHlwZSAhPT0gbnVsbCAmJiBsaW5rVHlwZSAhPSB0eXBlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHR5cGUgPSBsaW5rVHlwZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0eXBlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzZXRzIHRoZSBkaXJlY3Rpb24gb2YgYWxsIHNlbGVjdGVkIHJlbGF0aW9uc2hpcHMgdG8gdGhlIGdpdmVuIGRpcmVjdGlvblxyXG4gICAgdGhpcy5zZXRTZWxlY3RlZFJlbGF0aW9uc2hpcHNEaXJlY3Rpb24gPSBmdW5jdGlvbihkaXJlY3Rpb24pIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgLy9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgcmVsYXRpb25zaGlwIGRpcmVjdGlvblwiKTtcclxuICAgICAgICB2YXIgaXQgPSBkaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkxpbmspIHtcclxuICAgICAgICAgICAgICAgIC8vZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgdHlwZVwiKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGl0LnZhbHVlLmRhdGEsICd0eXBlJywgZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIC8vZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHR5cGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy9kaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiY2hhbmdlIHJlbGF0aW9uc2hpcCBkaXJlY3Rpb25cIik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0gaGFuZGxlIGNvcm5lciBjbGlja3MgYW5kIGRvdWJsZSBjbGlja3MgLS0tLS0tLS1cclxuXHJcbiAgICB2YXIgX2Nvcm5lckNsaWNrZWQgPSBudWxsO1xyXG4gICAgdmFyIF9jb3JuZXJGdW5jdGlvbiA9IG51bGw7XHJcbiAgICB2YXIgX2Nvcm5lclRpbWVvdXQgPSAzMDA7XHJcblxyXG4gICAgdGhpcy5oYW5kbGVDb3JuZXJDbGljayA9IGZ1bmN0aW9uKGNvcm5lciwgdGhpbmcpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdoYW5kbGVDb3JuZXJDbGljazogY29ybmVyID0gJyArIGNvcm5lciArICcsIGNvcm5lckNsaWNrZWQgPSAnICsgX2Nvcm5lckNsaWNrZWQpO1xyXG4gICAgICAgIC8vIGFzc3VtZSBpdCdzIGEgc2luZ2xlIGNsaWNrLCBhbmQgc2V0IGhhbmRsZXJcclxuICAgICAgICBfY29ybmVyRnVuY3Rpb24gPSBnZXRDb3JuZXJGdW5jdGlvbihjb3JuZXIsIDEpO1xyXG4gICAgICAgIC8vIGFscmVhZHkgY2xpY2tlZCwgc28gaXQncyBhIGRvdWJsZSBjbGljazsgY2hhbmdlIGhhbmRsZXJcclxuICAgICAgICBpZiAoX2Nvcm5lckNsaWNrZWQgPT0gY29ybmVyKSB7XHJcbiAgICAgICAgICAgIF9jb3JuZXJGdW5jdGlvbiA9IGdldENvcm5lckZ1bmN0aW9uKGNvcm5lciwgMik7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2hhbmRsZUNvcm5lckNsaWNrOiBkb3VibGUgY2xpY2sgb24gJyArIGNvcm5lcik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcmVtZW1iZXIgdGhhdCBhdCBsZWFzdCBvbmUgY2xpY2sgaGFzIGhhcHBlbmVkIGZvciB0aGUgY3VycmVudCBjb3JuZXJcclxuICAgICAgICBfY29ybmVyQ2xpY2tlZCA9IGNvcm5lcjtcclxuXHJcbiAgICAgICAgLy8gc2V0IHRpbWVyIHRvIGludm9rZSB3aGF0ZXZlciBoYW5kbGVyIHdlIGhhdmUgcmVhZHkgdG8gZ28gKHVubGVzcyBhbm90aGVyIGNsaWNrIGhhcHBlbnMgd2l0aGluIHRoZSBpbnRlcnZhbClcclxuICAgICAgICB2YXIgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBkaW5nISBpbnZva2UgaXRcclxuICAgICAgICAgICAgaWYgKF9jb3JuZXJGdW5jdGlvbiA9PSBzZWxmLnNob3dDb3JuZXJUaXApIHtcclxuICAgICAgICAgICAgICAgIF9jb3JuZXJGdW5jdGlvbih0aGluZywgY29ybmVyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9jb3JuZXJGdW5jdGlvbih0aGluZyk7IC8vIGRvbid0IHBhc3MgdGhlIGNvcm5lciBhcmcgdG8gdGhpbmdzIGxpa2UgY3JlYXRlQ2hpbGQgdGhhdCBoYXZlIGEgZGlmZmVyZW50IHNlY29uZCBhcmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyByZXNldCBoYW5kbGVyIGFuZCBjbGlja2VkIGZsYWdcclxuICAgICAgICAgICAgX2Nvcm5lckZ1bmN0aW9uID0gZ2V0Q29ybmVyRnVuY3Rpb24oY29ybmVyLCAxKTtcclxuICAgICAgICAgICAgX2Nvcm5lckNsaWNrZWQgPSBudWxsO1xyXG4gICAgICAgIH0sIF9jb3JuZXJUaW1lb3V0KTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q29ybmVyRnVuY3Rpb24oY29ybmVyLCBjbGlja3MpIHtcclxuICAgICAgICBpZiAoY29ybmVyID09IFwiRFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09IDEgPyBzZWxmLnNob3dDb3JuZXJUaXAgOiBtYXAuY3JlYXRlU2lzdGVyKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PSBcIlNcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gKGNsaWNrcyA9PSAxID8gbWFwLnRvZ2dsZVNFeHBhbnNpb24gOiBtYXAuY3JlYXRlQ2hpbGQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29ybmVyID09IFwiUlwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09IDEgPyBzZWxmLnNob3dDb3JuZXJUaXAgOiBtYXAuY3JlYXRlUlRvU2lzdGVyKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PSBcIlBcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gKGNsaWNrcyA9PSAxID8gbWFwLnRvZ2dsZVBFeHBhbnNpb24gOiBtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuc2V0UEVkaXRvclBvaW50KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gXCJcIikgeyAvLyBjbGljayBvbiB0ZXh0XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09IDEgPyBzZWxmLnNob3dDb3JuZXJUaXAgOiBlZGl0VGV4dCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0Q29ybmVyRnVuY3Rpb246IG5vIGZ1bmN0aW9uIGZvdW5kIGZvciBjb3JuZXI6ICcgKyBjb3JuZXIgKyAnIScpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBOQjogaW4gdGhpcyBjYXNlIHRoZSB0aGluZyBpcyBhY3R1YWxseSB0aGUgVGV4dEJveCwgZXhjZXB0IGluIG91dGxpbmUgbGF5b3V0IGl0IGlzIGEgUGFuZWwgaWYgdGhlIGJveCBpcyBkb3VibGUtY2xpY2tlZC4uLlxyXG4gICAgZnVuY3Rpb24gZWRpdFRleHQodGhpbmcsIGNvcm5lcikge1xyXG4gICAgICAgIGlmICghJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdlZGl0VGV4dCwgdGhpbmc6ICcgKyB0aGluZyk7XHJcbiAgICAgICAgaWYgKHRoaW5nIGluc3RhbmNlb2YgZ28uUGFuZWwpIHsgLy8gb3V0bGluZSBsYXlvdXRcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSB0aGluZy5wYXJ0O1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdlZGl0VGV4dCwgcGFydDogJyArIHBhcnQpO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmIHBhcnQuZGF0YSAmJiAocGFydC5kYXRhLmxheW91dCA9PSAnbGVmdCcgfHwgcGFydC5kYXRhLmxheW91dCA9PSAncmlnaHQnKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRleHRCbG9ja05hbWUgPSAnZXh0ZXJuYWx0ZXh0LScgKyBwYXJ0LmRhdGEubGF5b3V0O1xyXG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSB0aGluZy5wYXJ0LmZpbmRPYmplY3QodGV4dEJsb2NrTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaW5nID0gdGV4dDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmNvbW1hbmRIYW5kbGVyLmVkaXRUZXh0QmxvY2sodGhpbmcpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tIGhlbHAgdGlwIGZ1bmN0aW9ucyAtIHNlZSBhbHNvIHVzZXIuanMsIHZpZXdzL21hcHMvaGVscF90YWIgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gc2hvd3MgdGhpbmdUaXAgb3Igb25lIG9mIHRoZSBjb3JuZXJYVGlwc1xyXG4gICAgdGhpcy5zaG93Q29ybmVyVGlwID0gZnVuY3Rpb24odGhpbmcsIGNvcm5lcikge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3Nob3dDb3JuZXJUaXAnKTtcclxuICAgICAgICBpZiAoY29ybmVyID09PSAnJykge1xyXG4gICAgICAgICAgICBzZWxmLnNob3dIZWxwVGlwKCd0aGluZ1RpcCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2hvd0hlbHBUaXAoJ2Nvcm5lcicgKyBjb3JuZXIgKyAnVGlwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNob3dIZWxwVGlwID0gZnVuY3Rpb24odGlwKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0hlbHBUaXA6ICcgKyB0aXApO1xyXG5cclxuICAgICAgICAvLyBkb24ndCBzaG93IGhlbHAgaWYgaW4gcHJlc2VudGVyXHJcbiAgICAgICAgaWYgKHNlbGYuY3VycmVudFRhYklzKHNlbGYuVEFCX0lEX1BSRVNFTlRFUikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZi5oZWxwVGlwID0gdGlwO1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcclxuICAgICAgICAkKCcjaGVscC10aXAnKS5zaG93KCk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQoJyNoZWxwLXRpcCcpLmZhZGVPdXQoNTAwLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaGVscFRpcCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIDUwMDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZWRpdCBtYXAgVXNlclRhZ3MgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLnRhZ2dpbmcgPSBuZXcgU2FuZGJhbmtUYWdnaW5nKCRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgJG1vZGFsLCAkbG9nKTtcclxuXHJcbiAgICB0aGlzLmVkaXRVc2VyVGFncyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS50YWdnaW5nLm9wZW5Nb2RhbChcclxuICAgICAgICAgICAgWyRzY29wZS5tYXBJZF0sXHJcbiAgICAgICAgICAgIHRydWUsIC8vIHNob3cgZGVzY3JpcHRpb24gZmllbGRcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuZ2V0QXV0b3NhdmUoKS5zYXZlTm93KCdlZGl0X3VzZXJ0YWdzJyk7XHJcbiAgICAgICAgICAgIH0gLy8gb24gdXBkYXRlXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIGVkaXQgbWFwIHNoYXJpbmcgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLnNoYXJpbmcgPSBuZXcgU2FuZGJhbmtTaGFyaW5nKCRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgJG1vZGFsLCAkbG9nKTtcclxuXHJcbiAgICB0aGlzLmVkaXRNYXBTaGFyZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2hhcmluZy5vcGVuTW9kYWwoXHJcbiAgICAgICAgICAgIFskc2NvcGUubWFwSWRdLFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHt9IC8vIG9uIHVwZGF0ZVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBwcmludC9leHBvcnQgdG8gaW1hZ2UgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5wcmludFNsaWRlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgIG1hcC5nZXRQcmVzZW50ZXIoKS5jcmVhdGVTbGlkZVRodW1ibmFpbHMoKTtcclxuICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5wcmludCgpO1xyXG4gICAgICAgIH0sIDUwMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBNSUxMSU9OID0gMTAwMCAqIDEwMDA7XHJcblxyXG4gICAgdGhpcy5leHBvcnRUb0ltYWdlID0gZnVuY3Rpb24oZm9ybWF0KSB7XHJcblxyXG4gICAgICAgICRzY29wZS5pbWFnZUV4cG9ydExvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICQoJyNleHBvcnQtaW1hZ2UgaW1nJykucmVtb3ZlKCk7XHJcbiAgICAgICAgbWFwLmdldFRlbXBsYXRlcygpLnNob3dFeHBvcnRGb290ZXIoKTtcclxuXHJcbiAgICAgICAgdmFyIHJlY3QgPSBtYXAuZ2V0RGlhZ3JhbSgpLmNvbXB1dGVQYXJ0c0JvdW5kcyhtYXAuZ2V0RGlhZ3JhbSgpLm5vZGVzKS5jb3B5KCk7XHJcblxyXG4gICAgICAgIHZhciBpbWFnZU1CID0gcmVjdC53aWR0aCAqIHJlY3QuaGVpZ2h0ICogNCAvIE1JTExJT047IC8vIDQgYnl0ZXMvcGl4ZWxcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdpbWFnZU1COiAnICsgaW1hZ2VNQik7XHJcblxyXG4gICAgICAgIC8vIG1ha2UgdGhlIG1heCBzaXplIG9mIHRoZSBpbWFnZSAxME1CXHJcbiAgICAgICAgLy8gcG5nU2l6ZSA9IGltYWdlTUIgKiBzY2FsZSAqIHNjYWxlXHJcbiAgICAgICAgLy8gc28gbWF4IHNjYWxlID0gc3FydChwbmdTaXplIC8gaW1hZ2VNQilcclxuICAgICAgICAvLyBUaGVzZSBjYWxjdWxhdGlvbnMgZG9uJ3Qgc2VlbSB0byBiZSByaWdodCwgYnV0IGluIHByYWN0aWNlIHVzaW5nIDUwMCBoZXJlXHJcbiAgICAgICAgLy8gd2UgZ2V0IGEgc2NhbGUgb2YgMi40MyBmb3IgYW4gaW1hZ2UgMTk5ODQgeCAzNDI0IHBpeGVsc1xyXG4gICAgICAgIC8vIHdoaWNoIHJlc3VsdHMgaW4gYSBmaWxlIHNpemUgb2YgMS44OCBNQiBhdCAzMiBiaXRzL3BpeGVsLi4uXHJcbiAgICAgICAgLy8gT1IgMjgzODAgeCA1MTk2IHBpeGVscywgc2NhbGUgPSAzLjQxID0+IGZpbGUgc2l6ZSA9IDMuNDkgTUJcclxuICAgICAgICB2YXIgc2NhbGUgPSA0O1xyXG4gICAgICAgIGlmIChpbWFnZU1CKSB7XHJcbiAgICAgICAgICAgIHNjYWxlID0gTWF0aC5taW4oNCwgTWF0aC5zcXJ0KDUwIC8gaW1hZ2VNQikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaW1hZ2UgZGltZW5zaW9uczogJyArIHJlY3Qud2lkdGggKyAnIHggJyArIHJlY3QuaGVpZ2h0ICsgJywgaW1hZ2UgYnl0ZXM6ICcgKyAocmVjdC53aWR0aCAqIHJlY3QuaGVpZ2h0ICogNCkgKyBcclxuICAgICAgICAvLyAgICAgICAgJywgaW1hZ2VNQjogJyArIGltYWdlTUIgKyAnLCBzY2FsZTogJyArIHNjYWxlKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNob3dJbWFnZUV4cG9ydCA9IHRydWU7XHJcblxyXG4gICAgICAgIHZhciBwYXJ0c1RvRXhwb3J0ID0gbmV3IGdvLkxpc3QoKTtcclxuICAgICAgICBwYXJ0c1RvRXhwb3J0LmFkZEFsbChtYXAuZ2V0RGlhZ3JhbSgpLm5vZGVzKTtcclxuICAgICAgICBwYXJ0c1RvRXhwb3J0LmFkZEFsbChtYXAuZ2V0RGlhZ3JhbSgpLmxpbmtzKTtcclxuICAgICAgICBwYXJ0c1RvRXhwb3J0LnJlbW92ZShtYXAuZ2V0UHJlc2VudGVyKCkuc2xpZGVCbG9ja2VyKTtcclxuXHJcbiAgICAgICAgdmFyIGRvSW1hZ2UgPSAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGltZyA9IG1hcC5nZXREaWFncmFtKCkubWFrZUltYWdlKHtcclxuICAgICAgICAgICAgICAgIHBhcnRzOiBwYXJ0c1RvRXhwb3J0LFxyXG4gICAgICAgICAgICAgICAgbWF4U2l6ZTogbmV3IGdvLlNpemUoKHJlY3Qud2lkdGggKyAyMDApICogc2NhbGUsIChyZWN0LmhlaWdodCArIDIwMCkgKiBzY2FsZSksXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogc2NhbGUsXHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMDAgKiBzY2FsZSxcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICcjZmZmZmZmJ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQoJyNleHBvcnQtaW1hZ2UnKS5hcHBlbmQoaW1nKTtcclxuICAgICAgICAgICAgJHNjb3BlLmltYWdlRXhwb3J0TG9hZGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgbWFwLmdldFRlbXBsYXRlcygpLmhpZGVFeHBvcnRGb290ZXIoKTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0gdXRpbHMgLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuc3BsaXRMaW5lcyA9IGZ1bmN0aW9uKHRleHQpIHtcclxuICAgICAgICByZXR1cm4gdGV4dC5zcGxpdCgvXFxuLyk7XHJcbiAgICB9O1xyXG59OyIsIndpbmRvdy5TYW5kYmFuayA9IHt9O1xyXG5cclxuLy8gdGhlIHRvcG1vc3QgY29udHJvbGxlciBmb3IgdGhlIGFwcFxyXG5cclxud2luZG93LlVzZXJDdHJsID0gZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkaHR0cCwgJG1vZGFsLCAkdXBsb2FkKSB7XHJcblxyXG4gICAgLy8gcXVlcnkgc3RyaW5nIHBhcmFtc1xyXG4gICAgJHNjb3BlLnBhcmFtcyA9IFVSSSh3aW5kb3cubG9jYXRpb24pLnF1ZXJ5KHRydWUpO1xyXG5cclxuICAgIC8vIGF1dG8tb3BlbiB0aGlua3F1ZXJ5P1xyXG4gICAgJHNjb3BlLnRoaW5rcXVlcnkgPSAoJHNjb3BlLnBhcmFtcy50aGlua3F1ZXJ5ID8gdHJ1ZSA6IGZhbHNlKTtcclxuXHJcbiAgICAkc2NvcGUudXNlcklkID0gd2luZG93LnVzZXJJZDsgLy8gc2V0IGluIGxheW91dHMvdXNlclxyXG4gICAgJHNjb3BlLnVzZXJJc0FkbWluID0gd2luZG93LnVzZXJJc0FkbWluO1xyXG4gICAgJHNjb3BlLnVzZXJOYW1lID0gJyc7XHJcbiAgICAkc2NvcGUudXNlclByb2ZpbGUgPSBudWxsO1xyXG4gICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJyc7XHJcbiAgICAkc2NvcGUucGFzc3dvcmQgPSAnJztcclxuICAgICRzY29wZS5wYXNzd29yZENvbmZpcm0gPSAnJztcclxuXHJcbiAgICAkc2NvcGUuZ2V0TmV3V2luZG93TmFtZSA9IGZ1bmN0aW9uKGFjdGlvbiwgbWFwSWQpIHtcclxuICAgICAgICBpZiAoYWN0aW9uID09ICdWSUVXX01BUCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdWSUVXX01BUF8nICsgbWFwSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzaG93L2hpZGUgdGVzdHMgVUkgYW5kIG1vZGVsIGRlYnVnIGZvcm1cclxuICAgICRzY29wZS5zaG93VGVzdHMgPSBmYWxzZTtcclxuICAgICRzY29wZS5zaG93TW9kZWwgPSBmYWxzZTtcclxuXHJcbiAgICAkc2NvcGUudG9nZ2xlU2hvd1Rlc3RzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnNob3dUZXN0cyA9ICEkc2NvcGUuc2hvd1Rlc3RzO1xyXG4gICAgfTtcclxuICAgICRzY29wZS50b2dnbGVTaG93TW9kZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2hvd01vZGVsID0gISRzY29wZS5zaG93TW9kZWw7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRVc2VySWQgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICRzY29wZS51c2VySWQgPSBpZDtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZml4Um93SGVpZ2h0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbWFrZSBhbGwgY2VsbHMgaW4gYSByb3cgdGhlIHNhbWUgaGVpZ2h0XHJcbiAgICBmdW5jdGlvbiBmaXhSb3dIZWlnaHRzKCkge1xyXG4gICAgICAgIC8vIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vICAgICAkKCcucm93LWhlaWdodCcpLmVhY2goZnVuY3Rpb24oKSB7ICBcclxuICAgICAgICAvLyAgICAgICAgIHZhciBoaWdoZXN0Qm94ID0gMDtcclxuICAgICAgICAvLyAgICAgICAgICQoJz4gZGl2JywgdGhpcykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhlaWdodCgpID4gaGlnaGVzdEJveCkgXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGhpZ2hlc3RCb3ggPSAkKHRoaXMpLmhlaWdodCgpO1xyXG4gICAgICAgIC8vICAgICAgICAgfSk7ICBcclxuICAgICAgICAvLyAgICAgICAgICQoJz4gZGl2JywgdGhpcykuaGVpZ2h0KGhpZ2hlc3RCb3gpO1xyXG4gICAgICAgIC8vICAgICB9KTsgICAgICAgIFxyXG4gICAgICAgIC8vIH0sIDMwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS51c2VySWQpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICcvdXNlcnMvJyArICRzY29wZS51c2VySWQgKyAnL3Byb2ZpbGUuanNvbic7XHJcbiAgICAgICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KHVybCkudGhlbihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7IC8vIHN1Y2Nlc3NcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUgPSByZXNwb25zZS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRTZWxlY3RlZEFkbWluVGFncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRTZWxlY3RlZEZvbGxvd2FibGVPcmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jY3NUYWdnaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jY3NUYWdnaW5nLmxvYWRDY3NUYWdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZpeFJvd0hlaWdodHMoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZWFzb24pIHsgLy8gZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc3RvcFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgnQ291bGQgbm90IGxvYWQgdXNlciBwcm9maWxlIGRhdGEnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBjb3Vyc2VzL3N1YnNjcmlwdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gb3BlbiB0aGUgU3RyaXBlIENoZWNrb3V0IGRpYWxvZyBhbmQgZ2V0IGEgdG9rZW5cclxuICAgIC8vIE5COiBhbW91bnQgaXMgc3RvcmVkIGluIHRoZSBTdHJpcGUgcGxhbiBkZWZpbml0aW9uXHJcbiAgICAkc2NvcGUuYWRkU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24ocGxhbikge1xyXG4gICAgICAgIHZhciBoYW5kbGVyID0gU3RyaXBlQ2hlY2tvdXQuY29uZmlndXJlKHtcclxuICAgICAgICAgICAga2V5OiAkc2NvcGUudXNlclByb2ZpbGUuYWNjb3VudC5zdHJpcGVLZXksXHJcbiAgICAgICAgICAgIG5hbWU6IFwiU3Vic2NyaWJlIHRvIE1ldGFNYXBcIixcclxuICAgICAgICAgICAgaW1hZ2U6IFwiL2Fzc2V0cy9iYWRnZS1sb2dvLTY0LnBuZ1wiLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogcGxhbi5uYW1lLFxyXG4gICAgICAgICAgICBwYW5lbExhYmVsOiBcIlBheSB7e2Ftb3VudH19L1wiICsgcGxhbi5pbnRlcnZhbCxcclxuICAgICAgICAgICAgYW1vdW50OiBwbGFuLnByaWNlLFxyXG4gICAgICAgICAgICBhbGxvd1JlbWVtYmVyTWU6IGZhbHNlLFxyXG4gICAgICAgICAgICBlbWFpbDogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgIHRva2VuOiBmdW5jdGlvbih0b2tlbiwgYXJncykge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndG9rZW46ICcsIHRva2VuKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9jaGFyZ2VzL3N1YnNjcmliZScsIHtcclxuICAgICAgICAgICAgICAgICAgICBwbGFuX2lkOiBwbGFuLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5faWQ6IHRva2VuLmlkXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5zdWNjZXNzKCdTdWJzY3JpcHRpb24gY3JlYXRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuZXJyb3IoJ1N1YnNjcmlwdGlvbiBjb3VsZCBub3QgYmUgY3JlYXRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGhhbmRsZXIub3BlbigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBmb3IgYnV5LWNvdXJzZS1idXR0b24gZGlyZWN0aXZlXHJcbiAgICAkc2NvcGUuZ2V0QnV5QnV0dG9uTGFiZWwgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIHZhciBjb3Vyc2U7XHJcbiAgICAgICAgaWYgKGNvdXJzZSA9IGdldEZyZWVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnRnJlZSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxlZENvdXJzZShpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdFbnJvbGxlZCc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxhYmxlQ291cnNlKGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0Vucm9sbCAtICQnICsgKGNvdXJzZS5wcmljZSAvIDEwMCkudG9GaXhlZCgyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZ2V0Q291cnNlU3RhdHVzU3VtbWFyeSA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgdmFyIGNvdXJzZSA9ICRzY29wZS5nZXRDb3Vyc2UoaWQpO1xyXG4gICAgICAgIGlmIChjb3Vyc2UpIHtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBjb3Vyc2Uuc3RlcHNDb21wbGV0ZWQgKyAnIG9mICcgKyBjb3Vyc2Uuc3RlcHMgKyAnIHN0ZXBzIGNvbXBsZXRlZCc7XHJcbiAgICAgICAgICAgIGlmIChjb3Vyc2UuZW5yb2xtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0ID0gXCJFbnJvbGxlZCBcIiArIGNvdXJzZS5lbnJvbG1lbnQuZGF0ZSArXHJcbiAgICAgICAgICAgICAgICAgICAgKGNvdXJzZS5lbnJvbG1lbnQuc3RyaXBlRGF0YS5yZWZ1bmRlZCA/IFwiIChSZWZ1bmRlZClcIiA6IFwiXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAnIC0gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY291cnNlLmNvZGUgKyAnIC0gJyArIHRleHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZ2V0Q291cnNlQ29tcGxldGVkUGVyY2VudCA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgdmFyIGNvdXJzZSA9ICRzY29wZS5nZXRDb3Vyc2UoaWQpO1xyXG4gICAgICAgIGlmIChjb3Vyc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZS5zdGVwc0NvbXBsZXRlZFBlcmNlbnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUubWF5YmVCdXlDb3Vyc2UgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIHZhciBjb3Vyc2U7XHJcbiAgICAgICAgaWYgKGNvdXJzZSA9IGdldEZyZWVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9jb3Vyc2VzLycgKyBjb3Vyc2UuaWQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxlZENvdXJzZShpZCkpIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2NvdXJzZXMvJyArIGNvdXJzZS5pZDtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvdXJzZSA9IGdldEVucm9sbGFibGVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5idXlDb3Vyc2UoY291cnNlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5nZXRDb3Vyc2UgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIHZhciBjb3Vyc2U7XHJcbiAgICAgICAgaWYgKGNvdXJzZSA9IGdldEZyZWVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxlZENvdXJzZShpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvdXJzZSA9IGdldEVucm9sbGFibGVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRGcmVlQ291cnNlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZSAmJiBfLmZpbmQoJHNjb3BlLnVzZXJQcm9maWxlLmZyZWVBY2Nlc3NpYmxlQ291cnNlcywgZnVuY3Rpb24oY291cnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2UuaWQgPT0gaWQgJiYgY291cnNlLmVucm9sbWVudCA9PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RW5yb2xsZWRDb3Vyc2UoaWQpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlICYmIF8uZmluZCgkc2NvcGUudXNlclByb2ZpbGUuZnJlZUFjY2Vzc2libGVDb3Vyc2VzLCBmdW5jdGlvbihjb3Vyc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZS5pZCA9PSBpZCAmJiBjb3Vyc2UuZW5yb2xtZW50ICE9PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RW5yb2xsYWJsZUNvdXJzZShpZCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGUgJiYgXy5maW5kKCRzY29wZS51c2VyUHJvZmlsZS5ub25GcmVlQWNjZXNzaWJsZUNvdXJzZXMsIGZ1bmN0aW9uKGNvdXJzZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY291cnNlLmlkID09IGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG9wZW4gdGhlIFN0cmlwZSBDaGVja291dCBkaWFsb2cgYW5kIGdldCBhIHRva2VuXHJcbiAgICAvLyBOQjogYW1vdW50IGlzIHBhc3NlZCBmcm9tIG91ciBjb3Vyc2UgZGVmaW5pdGlvblxyXG4gICAgJHNjb3BlLmJ1eUNvdXJzZSA9IGZ1bmN0aW9uKGNvdXJzZSkge1xyXG4gICAgICAgIHZhciBoYW5kbGVyID0gU3RyaXBlQ2hlY2tvdXQuY29uZmlndXJlKHtcclxuICAgICAgICAgICAga2V5OiAkc2NvcGUudXNlclByb2ZpbGUuYWNjb3VudC5zdHJpcGVLZXksXHJcbiAgICAgICAgICAgIG5hbWU6IFwiRW5yb2xsIGluIENvdXJzZVwiLFxyXG4gICAgICAgICAgICBpbWFnZTogXCIvYXNzZXRzL2JhZGdlLWxvZ28tNjQucG5nXCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBjb3Vyc2UuY29kZSxcclxuICAgICAgICAgICAgYW1vdW50OiBjb3Vyc2UucHJpY2UsXHJcbiAgICAgICAgICAgIGFsbG93UmVtZW1iZXJNZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGVtYWlsOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5lbWFpbCxcclxuICAgICAgICAgICAgdG9rZW46IGZ1bmN0aW9uKHRva2VuLCBhcmdzKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd0b2tlbjogJywgdG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2NoYXJnZXMvYnV5X2NvdXJzZScsIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3Vyc2VfY29kZTogY291cnNlLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgY291cnNlX3ByaWNlOiBjb3Vyc2UucHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5faWQ6IHRva2VuLmlkXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5zdWNjZXNzKCdDb3Vyc2UgcHVyY2hhc2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVsb2FkIHBhZ2UgdG8gaGFuZGxlIHN0cmlwZSBidWcgKD8pIC0gbGlua3Mgbm90IGNsaWNrYWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuZXJyb3IoJ0NvdXJzZSBwdXJjaGFzZSBjb3VsZCBub3QgYmUgY29tcGxldGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdzdHJpcGUgZXJyb3I6ICcsIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBoYW5kbGVyLm9wZW4oKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNhbmNlbFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAkaHR0cC5kZWxldGUoJy9jaGFyZ2VzL3Vuc3Vic2NyaWJlP3N1YnNjcmlwdGlvbl9pZD0nICsgc3Vic2NyaXB0aW9uLmlkKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ1N1YnNjcmlwdGlvbiBjYW5jZWxsZWQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuZXJyb3IoJ1N1YnNjcmlwdGlvbiBjb3VsZCBub3QgYmUgY2FuY2VsbGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRlYnVnL3Rlc3Qgb25seVxyXG4gICAgJHNjb3BlLmNsZWFyQ3VzdG9tZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB3aW5kb3cuc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvY2hhcmdlcy9jbGVhcl9jdXN0b21lcicpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnQ3VzdG9tZXIgY2xlYXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5lcnJvcignQ3VzdG9tZXIgY291bGQgbm90IGJlIGNsZWFyZWQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gcG9pbnRzIGFuZCBiYWRnZXMgLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5oYXNDdXJyZW50QmFkZ2UgPSBmdW5jdGlvbihrZXksIGxldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZSAmJiAkc2NvcGUudXNlclByb2ZpbGUuYmFkZ2VzLmN1cnJlbnRba2V5XSA9PSBsZXZlbDtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmhhc05ld0JhZGdlID0gZnVuY3Rpb24oa2V5LCBsZXZlbCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGUgJiYgJHNjb3BlLnVzZXJQcm9maWxlLmJhZGdlcy5uZXdba2V5XSA9PSBsZXZlbDtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmhhc05ld0JhZGdlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGUgJiYgXy5rZXlzKCRzY29wZS51c2VyUHJvZmlsZS5iYWRnZXMubmV3KS5sZW5ndGggPiAwO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZ2V0QmFkZ2VEZWZpbml0aW9uID0gZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIF8uZmluZFdoZXJlKCRzY29wZS51c2VyUHJvZmlsZS5iYWRnZXMuZGVmaW5pdGlvbnMsIHtcclxuICAgICAgICAgICAga2V5OiBrZXlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSB0dXRvcmlhbCAtLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgJHNjb3BlLnR1dG9yaWFsRW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gd2luZG93Lm1hcERhdGEgIT09IHVuZGVmaW5lZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBzdGFydCB0dXRvcmlhbDpcclxuICAgICAgICB2YXIgX3R1dG9yaWFsID0gbmV3IFNhbmRiYW5rRWRpdG9yLlR1dG9yaWFsKCk7XHJcblxyXG4gICAgICAgICRzY29wZS5zdGFydFR1dG9yaWFsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIF90dXRvcmlhbC5zdGFydCgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlKSB7fVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIGZlZWRiYWNrIGZvcm0gLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuZmVlZGJhY2sgPSAnJztcclxuXHJcbiAgICAkc2NvcGUudG9nZ2xlRmVlZGJhY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKCcjZmVlZGJhY2stZHJvcGRvd24nKS5zbGlkZVRvZ2dsZSgnZmFzdCcpLmZpbmQoJ3RleHRhcmVhJykuZ2V0KDApLmZvY3VzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zdWJtaXRGZWVkYmFjayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkc2NvcGUuZmVlZGJhY2sgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjsgLy8gZW1wdHkgaW5wdXQuLi5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgdXJsOiAnL3VzZXJzL2ZlZWRiYWNrJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZixcclxuICAgICAgICAgICAgICAgIGZlZWRiYWNrOiAkc2NvcGUuZmVlZGJhY2tcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmVlZGJhY2sgPSAnJztcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdUaGFuayB5b3UgZm9yIHlvdXIgZmVlZGJhY2shJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5lcnJvcignZXJyb3Igc2VuZGluZyBmZWVkYmFjazogJywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcjZmVlZGJhY2stZHJvcGRvd24nKS5zbGlkZVRvZ2dsZSgnZmFzdCcpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0gdXNlcidzIHVzZXIgdGFncyAtLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIE5COiB0aGlzIGlzIHNpbWlsYXIgdG8gbWFwcyB0YWdnaW5nIGluIHRhZ2dpbmcuanMgLSBidXQgc2ltcGxlciwgYXMgd2UgZG8gbm90IGhhdmUgdG8gZGVhbCB3aXRoIFxyXG4gICAgLy8gbXVsdGlwbGUgdGFnZ2FibGUgaXRlbXMsIHdoaWNoIG1lYW5zIHRyYWNraW5nIGV4aXN0aW5nIHZzLiBuZXcgdGFncywgZXRjLi4uXHJcblxyXG4gICAgJHNjb3BlLm5ld1RhZyA9IHtcclxuICAgICAgICBuYW1lOiAnJ1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyB0YWcgYXV0b2NvbXBsZXRlXHJcbiAgICAkc2NvcGUuZ2V0VXNlclRhZ3MgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICB2YXIgdXJsID0gJy91c2VyX3RhZ3MvbGlzdC5qc29uP3E9JyArIHZpZXdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS50YWdzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudXBkYXRlVXNlclVzZXJUYWdzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHRhZ0xpc3QgPSBfLnBsdWNrKCRzY29wZS51c2VyUHJvZmlsZS51c2VyVGFncywgJ25hbWUnKS5qb2luKCcsJyk7XHJcbiAgICAgICAgJGh0dHAucHV0KCcvdXNlcl90YWdzL3VwZGF0ZV91c2VyX3VzZXJfdGFncycsIFt0YWdMaXN0XSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1RhZ3Mgc2F2ZWQnO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdDb3VsZCBub3Qgc2F2ZSB0YWdzJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5kZWxldGVUYWcgPSBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZigkc2NvcGUudXNlclByb2ZpbGUudXNlclRhZ3MsIHRhZyk7XHJcbiAgICAgICAgJHNjb3BlLnVzZXJQcm9maWxlLnVzZXJUYWdzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAkc2NvcGUudXBkYXRlVXNlclVzZXJUYWdzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS50YWdTZWxlY3RlZCA9IGZ1bmN0aW9uKGl0ZW0sIG1vZGVsLCBsYWJlbCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3RhZ1NlbGVjdGVkOiAnLCBpdGVtLCBtb2RlbCwgbGFiZWwpO1xyXG4gICAgICAgICRzY29wZS5hZGRUYWcoaXRlbS5uYW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmVkaXRpbmdUYWdLZXlwcmVzcyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS53aGljaCA9PSAxMykge1xyXG4gICAgICAgICAgICAkc2NvcGUuYWRkVGFnKCRzY29wZS5uZXdUYWcubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuYWRkVGFnID0gZnVuY3Rpb24odGFnTmFtZSkge1xyXG4gICAgICAgICRzY29wZS51c2VyUHJvZmlsZS51c2VyVGFncy5wdXNoKHtcclxuICAgICAgICAgICAgbmFtZTogdGFnTmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS5uZXdUYWcubmFtZSA9ICcnO1xyXG4gICAgICAgICRzY29wZS51cGRhdGVVc2VyVXNlclRhZ3MoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIHVzZXIncy9tYXAncyBDQ1MgdGFncyAtLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHRoaXMgbWFuYWdlcyBDQ1MgdGFncyBmb3IgZWl0aGVyIHRoZSBjdXJyZW50IHVzZXIgb3IgdGhlIGN1cnJlbnQgbWFwLCBcclxuICAgIC8vIGRlcGVuZGluZyB3aGljaCBwYWdlIHdlJ3JlIG9uIC0gbWFwSWQgZ2V0cyBvdmVycmlkZGVuIGluIGVkaXRvci5qcyBpZiB3ZSdyZSBlZGl0aW5nIGEgbWFwXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAkc2NvcGUuY2NzVGFnZ2luZyA9IG5ldyBTYW5kYmFua0Njc1RhZ2dpbmcoJHNjb3BlLCAkaHR0cCwgJG1vZGFsKTtcclxuICAgICAgICAkc2NvcGUuY2NzVGFnZ2luZy5tYXBJZCA9IG51bGw7XHJcbiAgICB9IGNhdGNoIChlKSB7fVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLSB1c2VyJ3MgYWRtaW4gdGFncyAtLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGtleSAoaW5kZXgpOiBhZG1pbiB0YWcgSUQ7IHZhbHVlOiB0cnVlL2ZhbHNlIChpZiB1c2VyIGZvbGxvd3MgdGhlIGFkbWluIHRhZylcclxuICAgICRzY29wZS5zZWxlY3RlZFVzZXJBZG1pblRhZ3MgPSBbXTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0U2VsZWN0ZWRBZG1pblRhZ3MoKSB7XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkVXNlckFkbWluVGFncyA9IFtdO1xyXG4gICAgICAgIF8uZWFjaCgkc2NvcGUudXNlclByb2ZpbGUuYWRtaW5UYWdzLCBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICAgICAgaWYgKF8uZmluZFdoZXJlKCRzY29wZS51c2VyUHJvZmlsZS51c2VyQWRtaW5UYWdzLCB7XHJcbiAgICAgICAgICAgICAgICBpZDogdGFnLmlkXHJcbiAgICAgICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRVc2VyQWRtaW5UYWdzW3RhZy5pZF0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLnVwZGF0ZVVzZXJBZG1pblRhZ3MgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRUYWdOYW1lcyA9IF8ubWFwKCRzY29wZS51c2VyUHJvZmlsZS5hZG1pblRhZ3MsIGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLnNlbGVjdGVkVXNlckFkbWluVGFnc1t0YWcuaWRdID8gdGFnLm5hbWUgOiBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciB0YWdMaXN0ID0gXy53aXRob3V0KHNlbGVjdGVkVGFnTmFtZXMsIG51bGwpLmpvaW4oJywnKTtcclxuICAgICAgICAkaHR0cC5wdXQoJy9hZG1pbl90YWdzL3VwZGF0ZV91c2VyX2FkbWluX3RhZ3MnLCBbdGFnTGlzdF0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdJbnRlcmVzdHMgc2F2ZWQnO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdDb3VsZCBub3Qgc2F2ZSBpbnRlcmVzdHMnO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIHVzZXIncyBmb2xsb3dlZCBvcmdzIC0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8ga2V5IChpbmRleCk6IG9yZyBJRDsgdmFsdWU6IHRydWUvZmFsc2UgKGlmIHVzZXIgZm9sbG93cyB0aGUgb3JnKVxyXG4gICAgJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnMgPSBbXTtcclxuXHJcbiAgICAkc2NvcGUudXNlcklzRm9sbG93aW5nT3JnID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbaWRdO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudG9nZ2xlVXNlckZvbGxvd2luZ09yZyA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgaWYgKCEkc2NvcGUuc2VsZWN0ZWRGb2xsb3dhYmxlT3JnYW5pemF0aW9uc1tpZF0gfHwgY29uZmlybSgnU3RvcCBmb2xsb3dpbmcgdGhpcyBUaGlua05hdGlvbj8nKSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRGb2xsb3dhYmxlT3JnYW5pemF0aW9uc1tpZF0gPSAhJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbaWRdO1xyXG4gICAgICAgICAgICAkc2NvcGUudXBkYXRlRm9sbG93ZWRPcmdhbml6YXRpb25zKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0U2VsZWN0ZWRGb2xsb3dhYmxlT3JncygpIHtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRGb2xsb3dhYmxlT3JnYW5pemF0aW9ucyA9IFtdO1xyXG4gICAgICAgIF8uZWFjaCgkc2NvcGUudXNlclByb2ZpbGUuZm9sbG93ZWRPcmdhbml6YXRpb25zLCBmdW5jdGlvbihvcmcpIHtcclxuICAgICAgICAgICAgaWYgKF8uZmluZFdoZXJlKCRzY29wZS51c2VyUHJvZmlsZS5mb2xsb3dhYmxlT3JnYW5pemF0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgaWQ6IG9yZy5pZFxyXG4gICAgICAgICAgICB9KSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbb3JnLmlkXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUudXBkYXRlRm9sbG93ZWRPcmdhbml6YXRpb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkT3JnSWRzID0gXy5tYXAoJHNjb3BlLnVzZXJQcm9maWxlLmZvbGxvd2FibGVPcmdhbml6YXRpb25zLCBmdW5jdGlvbihvcmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zW29yZy5pZF0gPyBvcmcuaWQgOiBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBvcmdJZExpc3QgPSBfLndpdGhvdXQoc2VsZWN0ZWRPcmdJZHMsIG51bGwpLmpvaW4oJywnKTtcclxuICAgICAgICAkaHR0cC5wdXQoJy9vcmdhbml6YXRpb25fZm9sbG93cy91cGRhdGVfdXNlcl9vcmdhbml6YXRpb25fZm9sbG93cycsIFtvcmdJZExpc3RdKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnVGhpbmtOYXRpb25zIHNhdmVkJztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgVGhpbmtOYXRpb25zJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLSB1c2VyJ3Mgb3JnIG1lbWJlcnNoaXBzIC0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLmpvaW5OYXRpb24gPSBuZXcgU2FuZGJhbmtKb2luTmF0aW9uKCRzY29wZSwgJGh0dHAsICRtb2RhbCk7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0TWVtYmVyc2hpcEZvck9yZyhpZCkge1xyXG4gICAgICAgIHJldHVybiBfLmZpbmRXaGVyZSgkc2NvcGUudXNlclByb2ZpbGUubWVtYmVyc2hpcHMsIHtcclxuICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGlkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLnVzZXJJc01lbWJlck9mT3JnID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLnVzZXJQcm9maWxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoZ2V0TWVtYmVyc2hpcEZvck9yZyhpZCkgIT0gdW5kZWZpbmVkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudG9nZ2xlVXNlck1lbWJlck9mT3JnID0gZnVuY3Rpb24oaWQsIG5hbWUpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLnVzZXJJc01lbWJlck9mT3JnKGlkKSkge1xyXG4gICAgICAgICAgICBpZiAoY29uZmlybSgnUmVtb3ZlIHlvdXIgbWVtYmVyc2hpcCBpbiB0aGlzIFRoaW5rTmF0aW9uPycpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVtYmVyc2hpcCA9IGdldE1lbWJlcnNoaXBGb3JPcmcoaWQpO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZGVsZXRlKCcvbWVtYmVyc2hpcHMvJyArIG1lbWJlcnNoaXAuaWQgKyAnLmpzb24nKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRzY29wZS5qb2luTmF0aW9uLm9wZW5Nb2RhbChcclxuICAgICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICAgICAgbmFtZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBmb2xsb3dpbmcgb3RoZXIgdXNlcnMgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLmZvbGxvd1VzZXIgPSBmdW5jdGlvbih1c2VyKSB7XHJcbiAgICAgICAgJGh0dHAucG9zdCgnL3VzZXJfZm9sbG93cy5qc29uJywge1xyXG4gICAgICAgICAgICBmb2xsb3dlZV9pZDogdXNlci5pZFxyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHVzZXIuZm9sbG93SWQgPSByZXNwb25zZS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnWW91IGFyZSBub3cgZm9sbG93aW5nICcgKyB1c2VyLm5hbWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHt9KTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnVuZm9sbG93VXNlciA9IGZ1bmN0aW9uKHVzZXIpIHtcclxuICAgICAgICAkaHR0cC5kZWxldGUoJy91c2VyX2ZvbGxvd3MvJyArIHVzZXIuZm9sbG93SWQgKyAnLmpzb24nKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyLmZvbGxvd0lkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ1lvdSBhcmUgbm8gbG9uZ2VyIGZvbGxvd2luZyAnICsgdXNlci5uYW1lKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBmb2xsb3dpbmcgdGFncyAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBmb2xsb3dUYWcoY29udHJvbGxlciwgdGFnKSB7XHJcbiAgICAgICAgJGh0dHAucG9zdCgnLycgKyBjb250cm9sbGVyICsgJy8nICsgdGFnLmlkICsgJy9mb2xsb3cuanNvbicsIHtcclxuICAgICAgICAgICAgaWQ6IHRhZy5pZFxyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHRhZy5mb2xsb3dpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnWW91IGFyZSBub3cgZm9sbG93aW5nICcgKyB0YWcubmFtZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge30pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVuZm9sbG93VGFnKGNvbnRyb2xsZXIsIHRhZykge1xyXG4gICAgICAgICRodHRwLmRlbGV0ZSgnLycgKyBjb250cm9sbGVyICsgJy8nICsgdGFnLmlkICsgJy91bmZvbGxvdy5qc29uJykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgdGFnLmZvbGxvd2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnWW91IGFyZSBubyBsb25nZXIgZm9sbG93aW5nICcgKyB0YWcubmFtZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge30pO1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS5mb2xsb3dVc2VyVGFnID0gZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgZm9sbG93VGFnKCd1c2VyX3RhZ3MnLCB0YWcpO1xyXG4gICAgfTtcclxuICAgICRzY29wZS51bmZvbGxvd1VzZXJUYWcgPSBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICB1bmZvbGxvd1RhZygndXNlcl90YWdzJywgdGFnKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmZvbGxvd0FkbWluVGFnID0gZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgZm9sbG93VGFnKCdhZG1pbl90YWdzJywgdGFnKTtcclxuICAgIH07XHJcbiAgICAkc2NvcGUudW5mb2xsb3dBZG1pblRhZyA9IGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgIHVuZm9sbG93VGFnKCdhZG1pbl90YWdzJywgdGFnKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmZvbGxvd0Njc1RhZyA9IGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgIGZvbGxvd1RhZygnY29tbW9uX2NvcmVfc3RhbmRhcmRzJywgdGFnKTtcclxuICAgIH07XHJcbiAgICAkc2NvcGUudW5mb2xsb3dDY3NUYWcgPSBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICB1bmZvbGxvd1RhZygnY29tbW9uX2NvcmVfc3RhbmRhcmRzJywgdGFnKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIGF1dG8tc2F2ZSB1c2VyIHByb2ZpbGUgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gZG9uJ3QgbGV0IGF1dG9zYXZlIGJlIHRyaWdnZXJlZCBtb3JlIHRoYW4gZXZlcnkgTiBtaWxsaXNlY29uZHMuLi5cclxuICAgICRzY29wZS5hdXRvc2F2ZSA9IF8uZGVib3VuY2UoYXV0b3NhdmVOb3csIDIwMDApO1xyXG5cclxuICAgIGZ1bmN0aW9uIGF1dG9zYXZlTm93KCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2F1dG9zYXZpbmcgdXNlciBwcm9maWxlJyk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGVtYWlsOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5lbWFpbCxcclxuICAgICAgICAgICAgYWx0X2VtYWlsOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5hbHRFbWFpbCxcclxuICAgICAgICAgICAgZmlyc3RfbmFtZTogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICBsYXN0X25hbWU6ICRzY29wZS51c2VyUHJvZmlsZS51c2VyLmxhc3ROYW1lLFxyXG4gICAgICAgICAgICBhYm91dF9tZTogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuYWJvdXRNZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKCRzY29wZS5wYXNzd29yZHNNYXRjaCgpICYmICRzY29wZS5wYXNzd29yZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZGF0YS5wYXNzd29yZCA9ICRzY29wZS5wYXNzd29yZDtcclxuICAgICAgICAgICAgZGF0YS5wYXNzd29yZF9jb25maXJtYXRpb24gPSAkc2NvcGUucGFzc3dvcmQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnU2F2aW5nLi4uJztcclxuICAgICAgICAkaHR0cC5wdXQoJy91c2Vycy8nICsgJHNjb3BlLnVzZXJJZCwgZGF0YSkudGhlbihcclxuICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXMoZGF0YSwgJ3Bhc3N3b3JkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnUHJvZmlsZSBhbmQgcGFzc3dvcmQgc2F2ZWQnO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1Byb2ZpbGUgc2F2ZWQnO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ0NvdWxkIG5vdCBzYXZlIHByb2ZpbGUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUucGFzc3dvcmRzTWF0Y2ggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gKCEkc2NvcGUucGFzc3dvcmQubGVuZ3RoICYmICEkc2NvcGUucGFzc3dvcmRDb25maXJtLmxlbmd0aCkgfHxcclxuICAgICAgICAgICAgJHNjb3BlLnBhc3N3b3JkID09ICRzY29wZS5wYXNzd29yZENvbmZpcm07XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSB1cGxvYWQgYXZhdGFyIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHVzaW5nOiBodHRwczovL2dpdGh1Yi5jb20vZGFuaWFsZmFyaWQvYW5ndWxhci1maWxlLXVwbG9hZFxyXG4gICAgJHNjb3BlLm9uQXZhdGFyRmlsZVNlbGVjdCA9IGZ1bmN0aW9uKCRmaWxlcykge1xyXG4gICAgICAgIHN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgIC8vJGZpbGVzOiBhbiBhcnJheSBvZiBmaWxlcyBzZWxlY3RlZCwgZWFjaCBmaWxlIGhhcyBuYW1lLCBzaXplLCBhbmQgdHlwZS5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRmaWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgZmlsZSA9ICRmaWxlc1tpXTtcclxuICAgICAgICAgICAgJHNjb3BlLnVwbG9hZCA9ICR1cGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgICAgIHVybDogJ3VzZXJzLycgKyB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZmlsZTogZmlsZSwgLy8gb3IgbGlzdCBvZiBmaWxlczogJGZpbGVzIGZvciBodG1sNSBvbmx5XHJcbiAgICAgICAgICAgICAgICBmaWxlRm9ybURhdGFOYW1lOiAndXNlclthdmF0YXJdJ1xyXG4gICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnUGhvdG8gdXBkYXRlZCc7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ0Vycm9yOiBDb3VsZCBub3QgdXBsb2FkIHBob3RvJztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vLnRoZW4oc3VjY2VzcywgZXJyb3IsIHByb2dyZXNzKTsgXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIHZpZXcgaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gcmV0dXJucyBlLmcuIFwiYSBkYXkgYWdvXCJcclxuICAgIC8vIChOQjogbm93IGlzIG9idGFpbmVkIGZyb20gdGhlIERCIHRvIGVuc3VyZSB0aGF0IHdlIGhhdmUgYm90aCBkYXRlcyBpbiBVVEM7IFxyXG4gICAgLy8gICAgYWxzbywgU1FMIHZzLiBydWJ5IGRhdGVzIG5lZWQgdG8gYmUgY29lcmNlZCBpbnRvIGEgc2ltaWxhciBmb3JtYXQsIGJvdGggaW4gVVRDIC0gc2VlIGZlZWQuanNvbi5qYnVpbGRlcilcclxuICAgICRzY29wZS5nZXRFdmVudFRpbWUgPSBmdW5jdGlvbih0LCBub3cpIHtcclxuICAgICAgICB2YXIgdGltZSA9IG1vbWVudCh0LCAnWVlZWS1NTS1ERCBISDptbTpzcy5TU1MnKTtcclxuICAgICAgICB2YXIgbm93dGltZSA9IG1vbWVudChub3csICdZWVlZLU1NLUREIEhIOm1tOnNzLlNTUycpO1xyXG4gICAgICAgIC8vIC8vY29uc29sZS5sb2coJ3Q6ICAgICAgICcgKyB0KTtcclxuICAgICAgICAvLyAvL2NvbnNvbGUubG9nKCdub3c6ICAgICAnICsgbm93KTtcclxuICAgICAgICAvLyAvL2NvbnNvbGUubG9nKCd0aW1lOiAgICAnICsgdGltZS5mb3JtYXQoKSk7IC8vICsgJyAnICsgdGltZS5pc1ZhbGlkKCkpO1xyXG4gICAgICAgIC8vIC8vY29uc29sZS5sb2coJ25vd3RpbWU6ICcgKyBub3d0aW1lLmZvcm1hdCgpKTsgLy8gKyAnICcgKyBub3d0aW1lLmlzVmFsaWQoKSk7XHJcbiAgICAgICAgcmV0dXJuIHRpbWUuZnJvbShub3d0aW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIG5vdGlmaWNhdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5nZXROb3RpZmljYXRpb25GZWVkVXJsID0gZnVuY3Rpb24obm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgaWYgKG5vdGlmaWNhdGlvbi5hY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gbm90aWZpY2F0aW9uLmFjdGlvbnNbMF07XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24uYWN0aW9uID09ICdMSUtFJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcvc29jaWFsP2xpa2VfaWQ9JyArIGFjdGlvbi5saWtlSWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uLmFjdGlvbiA9PSAnQ09NTUVOVCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnL3NvY2lhbD9jb21tZW50X2lkPScgKyBhY3Rpb24uY29tbWVudElkO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbi5hY3Rpb24gPT0gJ1NIQVJFX0lORElWSURVQUwnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJy9tYXBzLycgKyBhY3Rpb24ubWFwSWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uLmFjdGlvbiA9PSAnU0hBUkVfUFVCTElDJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcvc29jaWFsP3NoYXJlX2lkPScgKyBhY3Rpb24uc2hhcmVJZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5kZWxldGVOb3RpZmljYXRpb24gPSBmdW5jdGlvbihub3RpZmljYXRpb24pIHtcclxuICAgICAgICAkaHR0cC5kZWxldGUoJy9ub3RpZmljYXRpb25zLycgKyBub3RpZmljYXRpb24uaWQgKyAnLmpzb24nKS50aGVuKFxyXG4gICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkgeyAvLyBzdWNjZXNzXHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uZGVsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKHJlYXNvbikgeyAvLyBlcnJvclxyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBkZWxldGUgbm90aWZpY2F0aW9uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUubm90aWZpY2F0aW9uVmVyYiA9IGZ1bmN0aW9uKGFjdGlvbikge1xyXG4gICAgICAgIHZhciB2ZXJicyA9IHtcclxuICAgICAgICAgICAgTElLRTogJ2xpa2VkIHRoaXM6JyxcclxuICAgICAgICAgICAgQ09NTUVOVDogJ2NvbW1lbnRlZCBvbiB0aGlzOicsXHJcbiAgICAgICAgICAgIFNIQVJFX0lORElWSURVQUw6ICdzaGFyZWQgYSBNZXRhTWFwIHdpdGggeW91JyxcclxuICAgICAgICAgICAgU0hBUkVfUFVCTElDOiAnc2hhcmVkIGEgTWV0YU1hcCB3aXRoIGV2ZXJ5b25lJyxcclxuICAgICAgICAgICAgTUFQX0ZPTExPVzogJ2ZvbGxvd2VkIGEgTWV0YU1hcDonLFxyXG4gICAgICAgICAgICBVU0VSX0ZPTExPVzogJ2ZvbGxvd2VkIHlvdSdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB2ZXJic1thY3Rpb25dO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gdXRpbGl0eSBmdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gaGFuZHkgZnVuY3Rpb24gZm9yIHVzZSB3aXRoIG5nLWNsYXNzIG9uIHJhZGlvIGJ1dHRvbnNcclxuICAgICRzY29wZS5jbGFzc0lmID0gZnVuY3Rpb24oa2xhc3MsIGIpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGFzc0lmOiAnICsga2xhc3MgKyAnLCAnICsgYik7XHJcbiAgICAgICAgcmV0dXJuIChiID8ga2xhc3MgOiAnJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGF2b2lkICckYXBwbHkgYWxyZWFkeSBpbiBwcm9ncmVzcycgZXJyb3IgKHNvdXJjZTogaHR0cHM6Ly9jb2RlcndhbGwuY29tL3Avbmdpc21hKVxyXG4gICAgJHNjb3BlLnNhZmVBcHBseSA9IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2FmZUFwcGx5IG9uIHNjb3BlOiAnICsgJHNjb3BlKTtcclxuICAgICAgICB2YXIgcGhhc2UgPSB0aGlzLiRyb290LiQkcGhhc2U7XHJcbiAgICAgICAgaWYgKHBoYXNlID09ICckYXBwbHknIHx8IHBoYXNlID09ICckZGlnZXN0Jykge1xyXG4gICAgICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZihmbikgPT09ICdmdW5jdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICBmbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy4kYXBwbHkoZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gc291cmNlOiBodHRwOi8vY3RybHEub3JnL2NvZGUvMTk2MTYtZGV0ZWN0LXRvdWNoLXNjcmVlbi1qYXZhc2NyaXB0XHJcbiAgICAkc2NvcGUuaXNUb3VjaERldmljZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAoKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgfHwgKG5hdmlnYXRvci5NYXhUb3VjaFBvaW50cyA+IDApIHx8IChuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDApKTtcclxuICAgIH07XHJcblxyXG4gICAgaW5pdCgpO1xyXG59O1xyXG5cclxud2luZG93LlVzZXJDdHJsLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRodHRwJywgJyRtb2RhbCcsICckdXBsb2FkJ107IiwiY29uc3QgQUNUSU9OUyA9IHtcclxuICAgIE1BUDogJ21hcCcsXHJcbiAgICBORVdfTUFQOiAnbmV3X21hcCcsXHJcbiAgICBDT1BZX01BUDogJ2NvcHlfbWFwJyxcclxuICAgIERFTEVURV9NQVA6ICdkZWxldGVfbWFwJyxcclxuICAgIEhPTUU6ICdob21lJyxcclxuICAgIE1ZX01BUFM6ICdteW1hcHMnLFxyXG4gICAgVEVSTVNfQU5EX0NPTkRJVElPTlM6ICd0ZXJtcydcclxufTtcclxuXHJcbk9iamVjdC5mcmVlemUoQUNUSU9OUyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEFDVElPTlM7IiwiY29uc3QgRUxFTUVOVFMgPSB7XHJcbiAgICBBUFBfQ09OVEFJTkVSOiAnYXBwLWNvbnRhaW5lcicsXHJcbiAgICBNRVRBX1BST0dSRVNTOiAnbWV0YV9wcm9ncmVzcycsXHJcbiAgICBNRVRBX1BST0dSRVNTX05FWFQ6ICdtZXRhX3Byb2dyZXNzX25leHQnXHJcbn07XHJcblxyXG5PYmplY3QuZnJlZXplKEVMRU1FTlRTKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRUxFTUVOVFM7IiwiY29uc3QgRVZFTlRTID0ge1xyXG5cdFNJREVCQVJfT1BFTjogJ3NpZGViYXItb3BlbicsXHJcblx0U0lERUJBUl9DTE9TRTogJ3NpZGViYXItY2xvc2UnXHJcbn1cclxuXHJcbk9iamVjdC5mcmVlemUoRVZFTlRTKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRVZFTlRTOyIsImNvbnN0IEFDVElPTlMgPSByZXF1aXJlKCcuL2FjdGlvbnMuanMnKTtcclxuY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5cclxuY29uc3QgUEFHRVMgPSB7XHJcbiAgICBNQVA6ICdtYXAnLFxyXG4gICAgTkVXX01BUDogJ25ld19tYXAnLFxyXG4gICAgQ09QWV9NQVA6ICdjb3B5X21hcCcsXHJcbiAgICBERUxFVEVfTUFQOiAnZGVsZXRlX21hcCcsXHJcbiAgICBNWV9NQVBTOiAnbXltYXBzJyxcclxuICAgIFRFUk1TX0FORF9DT05ESVRJT05TOiAndGVybXMnXHJcbn07XHJcblxyXG5fLmV4dGVuZCgpXHJcblxyXG5PYmplY3QuZnJlZXplKFBBR0VTKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUEFHRVM7IiwiY29uc3QgUk9VVEVTID0ge1xyXG4gICAgTUFQU19MSVNUOiAnbWFwcy9saXN0LycsXHJcbiAgICBNQVBTX0RBVEE6ICdtYXBzL2RhdGEvJyxcclxuICAgIE1BUFNfTkVXX01BUDogJ21hcHMvbmV3LW1hcC8nLFxyXG4gICAgVEVSTVNfQU5EX0NPTkRJVElPTlM6ICdtZXRhbWFwL3Rlcm1zLWFuZC1jb25kaXRpb25zLycsXHJcbiAgICBIT01FOiAnbWV0YW1hcC9ob21lLydcclxufTtcclxuXHJcbk9iamVjdC5mcmVlemUoUk9VVEVTKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUk9VVEVTOyIsImNvbnN0IFRBR1MgPSB7XHJcbiAgICBNRVRBX0NBTlZBUzogJ21ldGEtY2FudmFzJyxcclxuICAgIEhPTUU6ICdob21lJyxcclxuICAgIFRFUk1TOiAndGVybXMnXHJcbn07XHJcblxyXG5PYmplY3QuZnJlZXplKFRBR1MpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBUQUdTOyIsInZhciBhZGRUaGlzID0gZnVuY3Rpb24gKGFwaUtleSkge1xyXG4gICAgXHJcbiAgICAoZnVuY3Rpb24gKGQsIHMsIGlkKSB7XHJcbiAgICAgICAgdmFyIGpzLCBmanMgPSBkLmdldEVsZW1lbnRzQnlUYWdOYW1lKHMpWzBdLFxyXG4gICAgICAgICAgdCA9IHdpbmRvdy5hZGR0aGlzIHx8IHt9O1xyXG4gICAgICAgIGlmIChkLmdldEVsZW1lbnRCeUlkKGlkKSkgcmV0dXJuIHQ7XHJcbiAgICAgICAganMgPSBkLmNyZWF0ZUVsZW1lbnQocyk7XHJcbiAgICAgICAganMuaWQgPSBpZDtcclxuICAgICAgICBqcy5zcmMgPSBgLy9zNy5hZGR0aGlzLmNvbS9qcy8zMDAvYWRkdGhpc193aWRnZXQuanMjcHViaWQ9JHthcGlLZXl9YDtcclxuICAgICAgICBmanMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoanMsIGZqcyk7XHJcblxyXG4gICAgICAgIHQuX2UgPSBbXTtcclxuICAgICAgICB0LnJlYWR5ID0gZnVuY3Rpb24gKGYpIHtcclxuICAgICAgICAgICAgdC5fZS5wdXNoKGYpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfShkb2N1bWVudCwgXCJzY3JpcHRcIiwgXCJhZGQtdGhpcy1qc1wiKSk7XHJcblxyXG4gICAgbGV0IGluaXQgPSAoKSA9PiB7XHJcbiAgICAgICAgd2luZG93LmFkZHRoaXMucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChbJyNob21lJywgJyNjb250YWN0J10uaW5kZXhPZih3aW5kb3cubG9jYXRpb24uaGFzaCkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyeUNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciBoaWRlU2hhcmVzID0gZnVuY3Rpb24oa2VlcEdvaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJyNhdDQtc2hhcmUnKSAmJiAkKCcjYXQ0LXNoYXJlJykubGVuZ3RoID49IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2F0NC1zaGFyZScpLnBhcmVudCgpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtlZXBHb2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5kZWxheShoaWRlU2hhcmVzLCAzMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNvdW50ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cnlDb3VudCA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmRlbGF5KGhpZGVTaGFyZXMsIDI1MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBoaWRlU2hhcmVzKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGluaXQ7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGFkZFRoaXM7XHJcblxyXG5cclxuIiwiXHJcbnZhciBmYWNlYm9va0FwaSA9IGZ1bmN0aW9uIChhcGlLZXkpIHtcclxuICAgIFxyXG4gICAgd2luZG93LmZiQXN5bmNJbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHdpbmRvdy5GQi5pbml0KHtcclxuICAgICAgICAgICAgYXBwSWQ6ICc4NDc3MDI3NzUzMDQ5MDYnLFxyXG4gICAgICAgICAgICB4ZmJtbDogdHJ1ZSxcclxuICAgICAgICAgICAgdmVyc2lvbjogJ3YyLjMnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5GQi5FdmVudC5zdWJzY3JpYmUoJ2VkZ2UuY3JlYXRlJywgZnVuY3Rpb24gKHRhcmdldFVybCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnc29jaWFsJywgJ2ZhY2Vib29rJywgJ2xpa2UnLCB0YXJnZXRVcmwpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB3aW5kb3cuRkIuRXZlbnQuc3Vic2NyaWJlKCdlZGdlLnJlbW92ZScsIGZ1bmN0aW9uICh0YXJnZXRVcmwpIHtcclxuICAgICAgICAgICAgd2luZG93LmdhKCdzZW5kJywgJ3NvY2lhbCcsICdmYWNlYm9vaycsICd1bmxpa2UnLCB0YXJnZXRVcmwpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB3aW5kb3cuRkIuRXZlbnQuc3Vic2NyaWJlKCdtZXNzYWdlLnNlbmQnLCBmdW5jdGlvbiAodGFyZ2V0VXJsKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdzb2NpYWwnLCAnZmFjZWJvb2snLCAnc2VuZCcsIHRhcmdldFVybCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIChmdW5jdGlvbiAoZCwgcywgaWQpIHtcclxuICAgICAgICB2YXIganMsIGZqcyA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUocylbMF07XHJcbiAgICAgICAgaWYgKGQuZ2V0RWxlbWVudEJ5SWQoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAganMgPSBkLmNyZWF0ZUVsZW1lbnQocyk7XHJcbiAgICAgICAganMuaWQgPSBpZDtcclxuICAgICAgICBqcy5zcmMgPSBcIi8vY29ubmVjdC5mYWNlYm9vay5uZXQvZW5fVVMvc2RrLmpzXCI7XHJcbiAgICAgICAgZmpzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGpzLCBmanMpO1xyXG4gICAgfShkb2N1bWVudCwgJ3NjcmlwdCcsICdmYWNlYm9vay1qc3NkaycpKTtcclxuXHJcbiAgICByZXR1cm4gd2luZG93LmZiQXN5bmNJbml0O1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmYWNlYm9va0FwaTtcclxuXHJcblxyXG4iLCJcclxudmFyIGdvb2dsZUFuYWx5dGljcyA9IGZ1bmN0aW9uIChhcGkpIHtcclxuICAgIFxyXG4gICAgLy8gR29vZ2xlIFBsdXMgQVBJXHJcbiAgICAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOyBwby50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7IHBvLmFzeW5jID0gdHJ1ZTtcclxuICAgICAgICBwby5zcmMgPSAnaHR0cHM6Ly9hcGlzLmdvb2dsZS5jb20vanMvcGxhdGZvcm0uanMnO1xyXG4gICAgICAgIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHBvLCBzKTtcclxuICAgIH0pKCk7XHJcblxyXG4gICAgLy9Hb29nbGUgVGFnIE1hbmFnZXIgQVBJXHJcbiAgKGZ1bmN0aW9uICh3LCBkLCBzLCBsLCBpKSB7XHJcbiAgICAgIHdbbF0gPSB3W2xdIHx8IFtdOyB3W2xdLnB1c2goe1xyXG4gICAgICAgICAgJ2d0bS5zdGFydCc6XHJcbiAgICAgICAgICBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgZXZlbnQ6ICdndG0uanMnXHJcbiAgICAgIH0pOyB2YXIgZiA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUocylbMF0sXHJcbiAgICAgIGogPSBkLmNyZWF0ZUVsZW1lbnQocyksIGRsID0gbCAhPSAnZGF0YUxheWVyJyA/ICcmbD0nICsgbCA6ICcnOyBqLmFzeW5jID0gdHJ1ZTsgai5zcmMgPVxyXG4gICAgICAnLy93d3cuZ29vZ2xldGFnbWFuYWdlci5jb20vZ3RtLmpzP2lkPScgKyBpICsgZGw7IGYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaiwgZik7XHJcbiAgfSkod2luZG93LCBkb2N1bWVudCwgJ3NjcmlwdCcsICdkYXRhTGF5ZXInLCBhcGkudGFnbWFuYWdlcik7XHJcblxyXG4gICAgLy8gR29vZ2xlIEFuYWx5dGljcyBBUElcclxuICAoZnVuY3Rpb24gKGksIHMsIG8sIGcsIHIsIGEsIG0pIHtcclxuICAgICAgaVsnR29vZ2xlQW5hbHl0aWNzT2JqZWN0J10gPSByOyBpW3JdID0gaVtyXSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAoaVtyXS5xID0gaVtyXS5xIHx8IFtdKS5wdXNoKGFyZ3VtZW50cyk7XHJcbiAgICAgIH0sIGlbcl0ubCA9IDEgKiBuZXcgRGF0ZSgpOyBhID0gcy5jcmVhdGVFbGVtZW50KG8pLFxyXG4gICAgICBtID0gcy5nZXRFbGVtZW50c0J5VGFnTmFtZShvKVswXTsgYS5hc3luYyA9IDE7IGEuc3JjID0gZztcclxuICAgICAgbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLCBtKTtcclxuICB9KSh3aW5kb3csIGRvY3VtZW50LCAnc2NyaXB0JywgJy8vd3d3Lmdvb2dsZS1hbmFseXRpY3MuY29tL2FuYWx5dGljcy5qcycsICdnYScpO1xyXG5cclxuICAgIHdpbmRvdy5nYSgnY3JlYXRlJywgYXBpLmFuYWx5dGljcywgJ2F1dG8nKTtcclxuICAgIHdpbmRvdy5nYSgnc2VuZCcsICdwYWdldmlldycpO1xyXG4gICAgcmV0dXJuIHdpbmRvdy5nYTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZ29vZ2xlQW5hbHl0aWNzO1xyXG5cclxuXHJcbiIsIi8vIERlZmluZSBvdXIgY3VzdG9tIGV2ZW50IGhhbmRsZXJzXHJcbmZ1bmN0aW9uIGNsaWNrRXZlbnRUb0FuYWx5dGljcyhpbnRlbnRFdmVudCkge1xyXG4gICAgaWYgKCFpbnRlbnRFdmVudCkgcmV0dXJuO1xyXG4gICAgdmFyIGxhYmVsID0gaW50ZW50RXZlbnQucmVnaW9uO1xyXG4gICAgd2luZG93LmdhKCdzZW5kJywgJ3NvY2lhbCcsICd0d2l0dGVyJywgaW50ZW50RXZlbnQudHlwZSwgbGFiZWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0d2VldEludGVudFRvQW5hbHl0aWNzKGludGVudEV2ZW50KSB7XHJcbiAgICBpZiAoIWludGVudEV2ZW50KSByZXR1cm47XHJcbiAgICB2YXIgbGFiZWwgPSBcInR3ZWV0XCI7XHJcbiAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnc29jaWFsJywgJ3R3aXR0ZXInLCBpbnRlbnRFdmVudC50eXBlLCBsYWJlbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZhdkludGVudFRvQW5hbHl0aWNzKGludGVudEV2ZW50KSB7XHJcbiAgICB0d2VldEludGVudFRvQW5hbHl0aWNzKGludGVudEV2ZW50KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmV0d2VldEludGVudFRvQW5hbHl0aWNzKGludGVudEV2ZW50KSB7XHJcbiAgICBpZiAoIWludGVudEV2ZW50KSByZXR1cm47XHJcbiAgICB2YXIgbGFiZWwgPSBpbnRlbnRFdmVudC5kYXRhLnNvdXJjZV90d2VldF9pZDtcclxuICAgIHdpbmRvdy5nYSgnc2VuZCcsICdzb2NpYWwnLCAndHdpdHRlcicsIGludGVudEV2ZW50LnR5cGUsIGxhYmVsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9sbG93SW50ZW50VG9BbmFseXRpY3MoaW50ZW50RXZlbnQpIHtcclxuICAgIGlmICghaW50ZW50RXZlbnQpIHJldHVybjtcclxuICAgIHZhciBsYWJlbCA9IGludGVudEV2ZW50LmRhdGEudXNlcl9pZCArIFwiIChcIiArIGludGVudEV2ZW50LmRhdGEuc2NyZWVuX25hbWUgKyBcIilcIjtcclxuICAgIHdpbmRvdy5nYSgnc2VuZCcsICdzb2NpYWwnLCAndHdpdHRlcicsIGludGVudEV2ZW50LnR5cGUsIGxhYmVsKTtcclxufVxyXG5cclxuXHJcbnZhciB0d2l0dGVyQXBpID0gZnVuY3Rpb24gKGFwaUtleSkge1xyXG4gICAgXHJcbiAgICB3aW5kb3cudHd0dHIgPSAoZnVuY3Rpb24gKGQsIHMsIGlkKSB7XHJcbiAgICAgICAgdmFyIGpzLCBmanMgPSBkLmdldEVsZW1lbnRzQnlUYWdOYW1lKHMpWzBdLFxyXG4gICAgICAgICAgdCA9IHdpbmRvdy50d3R0ciB8fCB7fTtcclxuICAgICAgICBpZiAoZC5nZXRFbGVtZW50QnlJZChpZCkpIHJldHVybiB0O1xyXG4gICAgICAgIGpzID0gZC5jcmVhdGVFbGVtZW50KHMpO1xyXG4gICAgICAgIGpzLmlkID0gaWQ7XHJcbiAgICAgICAganMuc3JjID0gXCJodHRwczovL3BsYXRmb3JtLnR3aXR0ZXIuY29tL3dpZGdldHMuanNcIjtcclxuICAgICAgICBmanMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoanMsIGZqcyk7XHJcblxyXG4gICAgICAgIHQuX2UgPSBbXTtcclxuICAgICAgICB0LnJlYWR5ID0gZnVuY3Rpb24gKGYpIHtcclxuICAgICAgICAgICAgdC5fZS5wdXNoKGYpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfShkb2N1bWVudCwgXCJzY3JpcHRcIiwgXCJ0d2l0dGVyLXdqc1wiKSk7XHJcblxyXG4gICAgd2luZG93LnR3dHRyLnJlYWR5KCh0d2l0dGVyKSA9PiB7XHJcbiAgICAgICAgdHdpdHRlci53aWRnZXRzLmxvYWQoKTtcclxuICAgICAgICB0d2l0dGVyLmV2ZW50cy5iaW5kKCdjbGljaycsIGNsaWNrRXZlbnRUb0FuYWx5dGljcyk7XHJcbiAgICAgICAgdHdpdHRlci5ldmVudHMuYmluZCgndHdlZXQnLCB0d2VldEludGVudFRvQW5hbHl0aWNzKTtcclxuICAgICAgICB0d2l0dGVyLmV2ZW50cy5iaW5kKCdyZXR3ZWV0JywgcmV0d2VldEludGVudFRvQW5hbHl0aWNzKTtcclxuICAgICAgICB0d2l0dGVyLmV2ZW50cy5iaW5kKCdmYXZvcml0ZScsIGZhdkludGVudFRvQW5hbHl0aWNzKTtcclxuICAgICAgICB0d2l0dGVyLmV2ZW50cy5iaW5kKCdmb2xsb3cnLCBmb2xsb3dJbnRlbnRUb0FuYWx5dGljcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgdHJ5Q291bnQgPSAwO1xyXG4gICAgbGV0IGxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy50d3R0ciAmJiB3aW5kb3cudHd0dHIud2lkZ2V0cykge1xyXG4gICAgICAgICAgICByZXR1cm4gd2luZG93LnR3dHRyLndpZGdldHMubG9hZCgpO1xyXG4gICAgICAgIH0gZWxzZSBpZih0cnlDb3VudCA8IDUpIHtcclxuICAgICAgICAgICAgdHJ5Q291bnQgKz0gMTtcclxuICAgICAgICAgICAgXy5kZWxheShsb2FkLCAyNTApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbG9hZDtcclxuXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHR3aXR0ZXJBcGk7XHJcblxyXG5cclxuIiwiXHJcbnZhciB1c2VyU25hcCA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgIHZhciBhcGlLZXkgPSAnMDMyYmFmODctODU0NS00ZWJjLWE1NTctOTM0ODU5MzcxZmE1LmpzJywgcywgeDtcclxuICAgIGlmIChjb25maWcgPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbmZpZyA9IHt9O1xyXG4gICAgfVxyXG4gICAgYXBpS2V5ID0gY29uZmlnLlVTRVJfU05BUF9BUElfS0VZO1xyXG4gICAgaWYgKGFwaUtleSAmJiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgIT09ICdsb2NhbGhvc3QnKSB7XHJcbiAgICAgICAgd2luZG93LnVzZXJzbmFwY29uZmlnID0ge1xyXG4gICAgICAgICAgICBtb2RlOiAncmVwb3J0JyxcclxuICAgICAgICAgICAgc2hvcnRjdXQ6IHRydWUsXHJcbiAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBVc2VyU25hcC5zZXRFbWFpbEJveChEb2MuYXBwLnVzZXIudXNlck5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgcy50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XHJcbiAgICAgICAgcy5hc3luYyA9IHRydWU7XHJcbiAgICAgICAgcy5zcmMgPSAnLy9hcGkudXNlcnNuYXAuY29tL2xvYWQvJyArIGFwaUtleSArICcuanMnO1xyXG4gICAgICAgIHggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xyXG4gICAgICAgIHJldHVybiB4LmFwcGVuZENoaWxkKHMpO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB1c2VyU25hcDtcclxuXHJcblxyXG4iLCJjb25zdCByaW90ID0gd2luZG93LnJpb3Q7XHJcbmNvbnN0IE5Qcm9ncmVzcyA9IHdpbmRvdy5OUHJvZ3Jlc3M7XHJcbmNvbnN0IHBhZ2VCb2R5ID0gcmVxdWlyZSgnLi4vLi4vdGFncy9wYWdlLWJvZHkuanMnKTtcclxuY29uc3QgRUxFTUVOVFMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvZWxlbWVudHMuanMnKTtcclxuY29uc3QgQWN0aW9ucyA9IHJlcXVpcmUoJy4uL2FjdGlvbnMvQWN0aW9uLmpzJyk7XHJcblxyXG5jbGFzcyBQYWdlRmFjdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihldmVudGVyLCBtZXRhRmlyZSkge1xyXG4gICAgICAgIHRoaXMubWV0YUZpcmUgPSBtZXRhRmlyZTtcclxuICAgICAgICB0aGlzLmV2ZW50ZXIgPSBldmVudGVyO1xyXG4gICAgICAgIHRoaXMuYWN0aW9ucyA9IG5ldyBBY3Rpb25zKG1ldGFGaXJlLCBldmVudGVyLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm9uUmVhZHkoKTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlYWR5KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fb25SZWFkeSkge1xyXG4gICAgICAgICAgICB0aGlzLl9vblJlYWR5ID0gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJChgIyR7RUxFTUVOVFMuTUVUQV9QUk9HUkVTU31gKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHJpb3QubW91bnQoJyonKTtcclxuICAgICAgICAgICAgICAgIE5Qcm9ncmVzcy5jb25maWd1cmUoeyBwYXJlbnQ6IGAjJHtFTEVNRU5UUy5NRVRBX1BST0dSRVNTX05FWFR9YCB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfLmRlbGF5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBNZXRyb25pYy5pbml0KCk7IC8vIGluaXQgbWV0cm9uaWMgY29yZSBjb21wb25ldHNcclxuICAgICAgICAgICAgICAgICAgICBMYXlvdXQuaW5pdCgpOyAvLyBpbml0IGxheW91dFxyXG4gICAgICAgICAgICAgICAgICAgIERlbW8uaW5pdCgpOyAvLyBpbml0IGRlbW8gZmVhdHVyZXNcclxuICAgICAgICAgICAgICAgICAgICBJbmRleC5pbml0KCk7IC8vIGluaXQgaW5kZXggcGFnZVxyXG4gICAgICAgICAgICAgICAgICAgIFRhc2tzLmluaXREYXNoYm9hcmRXaWRnZXQoKTsgLy8gaW5pdCB0YXNoIGRhc2hib2FyZCB3aWRnZXRcclxuICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAyNTApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uUmVhZHk7XHJcbiAgICB9XHJcblxyXG4gICAgbmF2aWdhdGUocGF0aCwgaWQsIGFjdGlvbiwgLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgbGV0IGFjdCA9IHRoaXMuYWN0aW9ucy5hY3QocGF0aCwgaWQsIGFjdGlvbiwgLi4ucGFyYW1zKTtcclxuICAgICAgICBpZiAoIWFjdCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50ZXIuZG8ocGF0aCwgcGF0aCwgeyBpZDogaWQsIGFjdGlvbjogYWN0aW9uIH0sIC4uLnBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBhZ2VGYWN0b3J5OyIsImlmICghU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQpIHtcclxuICAgIFN0cmluZy5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC97KFxcZCspfS9nLCBmdW5jdGlvbiAobWF0Y2gsIG51bWJlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGFyZ3NbbnVtYmVyXSAhPSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICA/IGFyZ3NbbnVtYmVyXVxuICAgICAgICAgICAgICA6IG1hdGNoXG4gICAgICAgICAgICA7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59IiwiY29uc3QgdXVpZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBoZXhEaWdpdHMsIGksIHMsIHV1aWQ7XHJcbiAgICBzID0gW107XHJcbiAgICBzLmxlbmd0aCA9IDM2O1xyXG4gICAgaGV4RGlnaXRzID0gJzAxMjM0NTY3ODlhYmNkZWYnO1xyXG4gICAgaSA9IDA7XHJcbiAgICB3aGlsZSAoaSA8IDM2KSB7XHJcbiAgICAgICAgc1tpXSA9IGhleERpZ2l0cy5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMHgxMCksIDEpO1xyXG4gICAgICAgIGkgKz0gMTtcclxuICAgIH1cclxuICAgIHNbMTRdID0gJzQnO1xyXG4gICAgc1sxOV0gPSBoZXhEaWdpdHMuc3Vic3RyKChzWzE5XSAmIDB4MykgfCAweDgsIDEpO1xyXG4gICAgc1s4XSA9IHNbMTNdID0gc1sxOF0gPSBzWzIzXSA9ICctJztcclxuICAgIHV1aWQgPSBzLmpvaW4oJycpO1xyXG4gICAgcmV0dXJuIHV1aWQ7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHV1aWQ7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcclxuY29uc3QgTlByb2dyZXNzID0gd2luZG93Lk5Qcm9ncmVzcztcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjxkaXYgY2xhc3M9XCJwb3J0bGV0IGxpZ2h0XCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwicG9ydGxldC1ib2R5XCIgaWQ9XCJkaWFncmFtXCI+PC9kaXY+XHJcbjwvZGl2PlxyXG48ZGl2IGlkPVwib3ZlcnZpZXctZGlhZ3JhbVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48L2Rpdj5cclxuYDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ21ldGEtY2FudmFzJywgaHRtbCwgZnVuY3Rpb24ob3B0cykge1xyXG5cclxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9lbnRyeS5qcycpO1xyXG5cclxuICAgIHRoaXMubWFwSWQgPSBudWxsO1xyXG4gICAgdGhpcy5jYW52YXMgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuYnVpbGRDYW52YXMgPSAobWFwKSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNhbnZhcykge1xyXG4gICAgICAgICAgICAkKHRoaXMuZGlhZ3JhbSkuZW1wdHkoKTtcclxuICAgICAgICAgICAgJCh0aGlzWydvdmVydmlldy1kaWFncmFtJ10pLmVtcHR5KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgeCA9IHtcclxuICAgICAgICAgICAgICAgIG1hcElkOiB0aGlzLm1hcElkLFxyXG4gICAgICAgICAgICAgICAgY2NzVGFnZ2luZzoge30sXHJcbiAgICAgICAgICAgICAgICBzYWZlQXBwbHk6IGZ1bmN0aW9uKGZuLCAuLi5wYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZm4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm4oLi4ucGFyYW1zKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJHdhdGNoOiBmdW5jdGlvbigpIHt9LFxyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHsgdGhlbjogZnVuY3Rpb24oKSB7fSB9IH0sXHJcbiAgICAgICAgICAgICAgICBpc1RvdWNoRGV2aWNlOiBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XHJcblxyXG4gICAgICAgICAgICB4Lm1hcERhdGEgPSBtYXA7XHJcbiAgICAgICAgICAgIG1hcC5tZXRhZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIHNhbmRib3g6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBjYW5FZGl0OiB0cnVlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG1hcC5zdGF0ZV9kYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgXCJzaG93TmF2aWdhdG9yXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgXCJjdXJyZW50VGFiXCI6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBcInBlcnNwZWN0aXZlUG9pbnRLZXlcIjogbnVsbCxcclxuICAgICAgICAgICAgICAgIFwiZGlzdGluY3Rpb25UaGluZ0tleVwiOiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWFwLmVkaXRvcl9vcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgXCJkZWZhdWx0UmVsYXRpb25zaGlwRGlyZWN0aW9uXCI6IFwibm9BcnJvd3NcIixcclxuICAgICAgICAgICAgICAgIFwiZGVmYXVsdFRoaW5nTGF5b3V0XCI6IFwibGVmdFwiLFxyXG4gICAgICAgICAgICAgICAgXCJwZXJzcGVjdGl2ZU1vZGVcIjogXCJsaW5lc1wiXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzID0gTWFwRWRpdG9yQ3RybCh4LCB4LCB4LCB4LCB4KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobWFwLmNoYW5nZWRfYnkgIT0gTWV0YU1hcC5Vc2VyLnVzZXJLZXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLm1hcC5sb2FkKG1hcC5kYXRhKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5idWlsZCA9IChvcHRzKSA9PiB7XHJcbiAgICAgICAgaWYgKG9wdHMuaWQgIT0gdGhpcy5tYXBJZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcyA9IG51bGxcclxuICAgICAgICAgICAgaWYgKHRoaXMubWFwSWQpIHtcclxuICAgICAgICAgICAgICAgIE1ldGFNYXAuTWV0YUZpcmUub2ZmKGBtYXBzL2RhdGEvJHt0aGlzLm1hcElkfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubWFwSWQgPSBvcHRzLmlkO1xyXG4gICAgICAgICAgICBOUHJvZ3Jlc3Muc3RhcnQoKTtcclxuXHJcbiAgICAgICAgICAgIE1ldGFNYXAuTWV0YUZpcmUub24oYG1hcHMvZGF0YS8ke29wdHMuaWR9YCwgdGhpcy5idWlsZENhbnZhcyk7XHJcbiAgICAgICAgICAgIE1ldGFNYXAuRXZlbnRlci5mb3JnZXQoJ21hcCcsIHRoaXMuYnVpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBNZXRhTWFwLkV2ZW50ZXIuZXZlcnkoJ21hcCcsIHRoaXMuYnVpbGQpO1xyXG5cclxuICAgIHRoaXMuY29ycmVjdEhlaWdodCA9ICgpID0+IHtcclxuICAgICAgICAkKHRoaXMuZGlhZ3JhbSkuY3NzKHtcclxuICAgICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgLSAxNTQgKyAncHgnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vbigndXBkYXRlJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY29ycmVjdEhlaWdodCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCh3aW5kb3cpLnJlc2l6ZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jb3JyZWN0SGVpZ2h0KCk7XHJcbiAgICB9KTtcclxufSk7IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL3R5cGluZ3MvanF1ZXJ5L2pxdWVyeS5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL3R5cGluZ3MvbG9kYXNoL2xvZGFzaC5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL3R5cGluZ3MvcmlvdGpzL3Jpb3Rqcy5kLnRzXCIgLz5cclxuXHJcbmNvbnN0ICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxuY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcclxuY29uc3QgbWV0YVRhYmxlID0gcmVxdWlyZSgnLi9tZXRhLXRhYmxlLmpzJyk7XHJcblxyXG5jb25zdCBodG1sID0gYFxyXG48ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIGlkPVwiZnVsbFwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nIG1vZGFsLWZ1bGxcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxoNCBpZj1cInt0aXRsZX1cIiBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+e3RpdGxlfTwvaDQ+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGlkPVwibW9kYWxfY29udGVudFwiIGNsYXNzPVwibW9kYWwtYm9keVwiPlxyXG5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGRlZmF1bHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPkNsb3NlPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbjwvZGl2PlxyXG5gO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygnbWV0YS1kaWFsb2cnLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uL2VudHJ5LmpzJyk7XHJcbiAgICBcclxuICAgIHRoaXMudGl0bGUgPSAnJ1xyXG4gICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLmxvYWQgPSBfLm9uY2UoKCkgPT4ge1xyXG4gICAgICAgIHJpb3QubW91bnQodGhpcy5tb2RhbF9jb250ZW50LCAnbWV0YS10YWJsZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCh0aGlzLmZ1bGwpLm9uKCdoaWRlLmJzLm1vZGFsJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChNZXRhTWFwLlJvdXRlci5jdXJyZW50UGFnZSA9PSAnbXltYXBzJykge1xyXG4gICAgICAgICAgICBNZXRhTWFwLlJvdXRlci5iYWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zaG93ID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZCgpO1xyXG4gICAgICAgICAgICAkKHRoaXMuZnVsbCkubW9kYWwoJ3Nob3cnKTtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5oaWRlID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnZpc2libGUpIHtcclxuICAgICAgICAgICAgJCh0aGlzLmZ1bGwpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRvZ2dsZSA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgTWV0YU1hcC5FdmVudGVyLmV2ZXJ5KCduYXYgbXltYXBzJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGV2ZW50ID09ICduYXYnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufSk7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcclxuY29uc3QgTlByb2dyZXNzID0gd2luZG93Lk5Qcm9ncmVzcztcclxuY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5cclxuY29uc3QgaHRtbCA9IGBcclxuPGRpdiBjbGFzcz1cInJvd1wiPlxyXG4gICAgPGRpdiBjbGFzcz1cImNvbC1tZC0xMlwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwb3J0bGV0IGJveCBncmV5LWNhc2NhZGVcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBvcnRsZXQtdGl0bGVcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXB0aW9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1pY29uLXRoLWxhcmdlXCI+PC9pPk15IE1hcHNcclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBpZj1cInsgbWVudSB9XCIgY2xhc3M9XCJhY3Rpb25zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGEgZWFjaD1cInsgbWVudS5idXR0b25zIH1cIiBocmVmPVwieyBsaW5rIH1cIiBvbmNsaWNrPVwieyBwYXJlbnQub25BY3Rpb25DbGljayB9XCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwieyBpY29uIH1cIj48L2k+IHsgdGl0bGUgfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbVwiIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWNvZ3NcIj48L2k+IFRvb2xzIDxpIGNsYXNzPVwiZmEgZmEtYW5nbGUtZG93blwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51IHB1bGwtcmlnaHRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBlYWNoPVwieyBtZW51Lm1lbnUgfVwiIG9uY2xpY2s9XCJ7IHBhcmVudC5vbk1lbnVDbGljayB9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cInsgbGluayB9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwieyBpY29uIH1cIj48L2k+IHsgdGl0bGUgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3J0bGV0LWJvZHlcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsZS10b29sYmFyXCI+XHJcblxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJ0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWJvcmRlcmVkIHRhYmxlLWhvdmVyXCIgaWQ9XCJteW1hcHNfdGFibGVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFwSWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3M9XCJ0YWJsZS1jaGVja2JveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cImdyb3VwLWNoZWNrYWJsZVwiIGRhdGEtc2V0PVwiI215bWFwc190YWJsZSAuY2hlY2tib3hlc1wiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZXJJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWF0ZWQgT25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhdHVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGVhY2g9XCJ7IGRhdGEgfVwiIGNsYXNzPVwib2RkIGdyYWRlWFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIiA+PHNwYW4gZGF0YS1zZWxlY3Rvcj1cImlkXCIgY2xhc3MgPVwibWFwaWRcIj57IGlkIH08L3NwYW4+PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJjaGVja2JveGVzXCIgdmFsdWU9XCIxXCIvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+eyB1c2VyX2lkIH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwibWV0YS1lZGl0YWJsZVwiIGRhdGEtcGs9XCJ7IGlkIH1cIiBkYXRhLXRpdGxlPVwiRWRpdCBNYXAgTmFtZVwiPnsgbmFtZSB9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImNlbnRlclwiPnsgY3JlYXRlZF9hdCB9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxhYmVsIGxhYmVsLXNtIGxhYmVsLXN1Y2Nlc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJpdmF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tc20gYmx1ZSBmaWx0ZXItc3VibWl0XCIgb25jbGljaz1cInsgcGFyZW50Lm9uT3BlbiB9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtaWNvbi1leWUtb3BlblwiPjwvaT4gT3BlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+XHJcbmA7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdtZXRhLXRhYmxlJywgaHRtbCwgZnVuY3Rpb24ob3B0cykge1xyXG5cclxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9lbnRyeS5qcycpO1xyXG5cclxuICAgIHRoaXMuZGF0YSA9IG51bGw7XHJcbiAgICB0aGlzLm1lbnUgPSBudWxsO1xyXG5cclxuICAgIHRoaXMub25PcGVuID0gKGV2ZW50LCAuLi5vKSA9PiB7XHJcbiAgICAgICAgTWV0YU1hcC5Sb3V0ZXIudG8oYG1hcC8ke2V2ZW50Lml0ZW0uaWR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vbkFjdGlvbkNsaWNrID0gKGV2ZW50LCB0YWcpID0+IHtcclxuICAgICAgICBkZWJ1Z2dlcjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9uTWVudUNsaWNrID0gKGV2ZW50LCB0YWcpID0+IHtcclxuICAgICAgICBzd2l0Y2ggKGV2ZW50Lml0ZW0udGl0bGUudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgIGNhc2UgJ2RlbGV0ZSc6XHJcbiAgICAgICAgICAgIGNvbnN0IGRlbGV0ZU1hcHMgPSByZXF1aXJlKCcuLi8uLi9qcy9hY3Rpb25zL0RlbGV0ZU1hcC5qcycpO1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLnRhYmxlLmZpbmQoJy5hY3RpdmUnKS5maW5kKCcubWFwaWQnKTtcclxuICAgICAgICAgICAgbGV0IGlkcyA9IFtdO1xyXG4gICAgICAgICAgICBfLmVhY2goc2VsZWN0ZWQsIChjZWxsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZHMucHVzaChjZWxsLmlubmVySFRNTCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkZWxldGVNYXBzLmRlbGV0ZUFsbChpZHMpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vbignbW91bnQnLCAoKSA9PiB7XHJcbiAgICAgICAgTlByb2dyZXNzLnN0YXJ0KCk7XHJcbiAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5vbignbWV0YW1hcC9teW1hcHMnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZW51ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnM6IF8uc29ydEJ5KGRhdGEuYnV0dG9ucywgJ29yZGVyJyksXHJcbiAgICAgICAgICAgICAgICAgICAgbWVudTogXy5zb3J0QnkoZGF0YS5tZW51LCAnb3JkZXInKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5nZXRDaGlsZCgnbWFwcy9saXN0Jykub3JkZXJCeUNoaWxkKCdvd25lcicpLmVxdWFsVG8oTWV0YU1hcC5Vc2VyLnVzZXJJZCkub24oJ3ZhbHVlJywgKHZhbCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gdmFsLnZhbCgpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gXy5tYXAoZGF0YSwgKG9iaiwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmlkID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5jcmVhdGVkX2F0ID0gbW9tZW50KG9iai5jcmVhdGVkX2F0KS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5tZXRhLWVkaXRhYmxlJykuZWRpdGFibGUoJ2Rlc3Ryb3knKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFUYWJsZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLnRhYmxlLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJsZSA9ICQodGhpcy5teW1hcHNfdGFibGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhVGFibGUgPSB0aGlzLnRhYmxlLkRhdGFUYWJsZSh7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVuY29tbWVudCBiZWxvdyBsaW5lKFwiZG9tXCIgcGFyYW1ldGVyKSB0byBmaXggdGhlIGRyb3Bkb3duIG92ZXJmbG93IGlzc3VlIGluIHRoZSBkYXRhdGFibGUgY2VsbHMuIFRoZSBkZWZhdWx0IGRhdGF0YWJsZSBsYXlvdXRcclxuICAgICAgICAgICAgICAgICAgICAvLyBzZXR1cCB1c2VzIHNjcm9sbGFibGUgZGl2KHRhYmxlLXNjcm9sbGFibGUpIHdpdGggb3ZlcmZsb3c6YXV0byB0byBlbmFibGUgdmVydGljYWwgc2Nyb2xsKHNlZTogYXNzZXRzL2dsb2JhbC9wbHVnaW5zL2RhdGF0YWJsZXMvcGx1Z2lucy9ib290c3RyYXAvZGF0YVRhYmxlcy5ib290c3RyYXAuanMpLiBcclxuICAgICAgICAgICAgICAgICAgICAvLyBTbyB3aGVuIGRyb3Bkb3ducyB1c2VkIHRoZSBzY3JvbGxhYmxlIGRpdiBzaG91bGQgYmUgcmVtb3ZlZC4gXHJcbiAgICAgICAgICAgICAgICAgICAgLy9cImRvbVwiOiBcIjwncm93JzwnY29sLW1kLTYgY29sLXNtLTEyJ2w+PCdjb2wtbWQtNiBjb2wtc20tMTInZj5yPnQ8J3Jvdyc8J2NvbC1tZC01IGNvbC1zbS0xMidpPjwnY29sLW1kLTcgY29sLXNtLTEyJ3A+PlwiLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL1wiYlN0YXRlU2F2ZVwiOiB0cnVlLCAvLyBzYXZlIGRhdGF0YWJsZSBzdGF0ZShwYWdpbmF0aW9uLCBzb3J0LCBldGMpIGluIGNvb2tpZS5cclxuICAgICAgICAgICAgICAgICAgICBcImNvbHVtbnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcmFibGU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3JkZXJhYmxlXCI6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3JkZXJhYmxlXCI6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcmRlcmFibGVcIjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9yZGVyYWJsZVwiOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3JkZXJhYmxlXCI6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3JkZXJhYmxlXCI6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vdGhpcy50YWJsZVRvb2xzID0gbmV3ICQuZm4uZGF0YVRhYmxlLlRhYmxlVG9vbHModGhpcy5kYXRhVGFibGUsIHt9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIHRhYmxlV3JhcHBlciA9IHRoaXMudGFibGUucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkuZmluZCgnI215bWFwc190YWJsZV93cmFwcGVyJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJsZS5maW5kKCcuZ3JvdXAtY2hlY2thYmxlJykuY2hhbmdlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXQgPSBqUXVlcnkodGhpcykuYXR0cihcImRhdGEtc2V0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGVja2VkID0galF1ZXJ5KHRoaXMpLmlzKFwiOmNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHNldCkuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cihcImNoZWNrZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3RyJykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoXCJjaGVja2VkXCIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50cygndHInKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS51bmlmb3JtLnVwZGF0ZShzZXQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJsZS5vbignY2hhbmdlJywgJ3Rib2R5IHRyIC5jaGVja2JveGVzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd0cicpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGFibGVXcmFwcGVyLmZpbmQoJy5kYXRhVGFibGVzX2xlbmd0aCBzZWxlY3QnKS5hZGRDbGFzcyhcImZvcm0tY29udHJvbCBpbnB1dC14c21hbGwgaW5wdXQtaW5saW5lXCIpOyAvLyBtb2RpZnkgdGFibGUgcGVyIHBhZ2UgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgJCgnLm1ldGEtZWRpdGFibGUnKS5lZGl0YWJsZSh7IHVuc2F2ZWRjbGFzczogbnVsbCB9KS5vbignc2F2ZScsIGZ1bmN0aW9uIChldmVudCwgcGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gdGhpcy5kYXRhc2V0LnBrO1xyXG4gICAgICAgICAgICAgICAgICAgIE1ldGFNYXAuTWV0YUZpcmUuc2V0RGF0YShwYXJhbXMubmV3VmFsdWUsIGBtYXBzL2xpc3QvJHtpZH0vbmFtZWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTtcclxuXHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICBNZXRhTWFwLmVycm9yKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIGRhdGEtaG92ZXI9XCJkcm9wZG93blwiIGRhdGEtY2xvc2Utb3RoZXJzPVwidHJ1ZVwiPlxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWdyYWR1YXRpb24tY2FwXCI+PC9pPlxyXG4gICAgICAgIDwvYT5cclxuICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCI+XHJcbiAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUtbGlzdCBzY3JvbGxlclwiIHN0eWxlPVwiaGVpZ2h0OiAyNzBweDtcIiBkYXRhLWhhbmRsZS1jb2xvcj1cIiM2MzcyODNcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGkgaWY9XCJ7IGhlbHAgfVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhY2g9XCJ7IGhlbHAgfVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9XCJ7IHBhcmVudC5vbkNsaWNrIH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cInsgbGluayB9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInsgaWNvbiB9XCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0aXRsZVwiPnsgdGl0bGUgfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgIDwvdWw+XHJcbmA7XHJcblxyXG5yaW90LnRhZygnbWV0YS1oZWxwJywgaHRtbCwgZnVuY3Rpb24gKG9wdHMpIHtcclxuXHJcbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vZW50cnkuanMnKTtcclxuXHJcbiAgICB0aGlzLm9uQ2xpY2sgPSAoZXZlbnQsIHBhcmFtcykgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LCBwYXJhbXMpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgICAgIFxyXG4gICAgdGhpcy5oZWxwID0gbnVsbDtcclxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xyXG4gICAgICAgIE1ldGFNYXAuTWV0YUZpcmUub24oJ21ldGFtYXAvaGVscCcsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVscCA9IF8uZmlsdGVyKF8uc29ydEJ5KGRhdGEsICdvcmRlcicpLCAoZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluY2x1ZGUgPSBkLmFyY2hpdmUgIT0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbmNsdWRlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG5cclxuY29uc3QgaHRtbCA9IGA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgZGF0YS1ob3Zlcj1cImRyb3Bkb3duXCIgZGF0YS1jbG9zZS1vdGhlcnM9XCJ0cnVlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1iZWxsLW9cIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJiYWRnZSBiYWRnZS1zdWNjZXNzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbm90aWZpY2F0aW9ucy5sZW5ndGggfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJleHRlcm5hbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcyA9XCJib2xkXCI+eyBub3RpZmljYXRpb25zLmxlbmd0aCB9IHBlbmRpbmc8L3NwYW4+IG5vdGlmaWNhdGlvbnsgczogbm90aWZpY2F0aW9ucy5sZW5ndGggPT0gMCB8fCBub3RpZmljYXRpb25zLmxlbmd0aCA+IDEgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+dmlldyBhbGw8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUtbGlzdCBzY3JvbGxlclwiIHN0eWxlPVwiaGVpZ2h0OiAyNTBweDtcIiBkYXRhLWhhbmRsZS1jb2xvcj1cIiM2MzcyODNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBpZj1cInsgbm90aWZpY2F0aW9ucyB9XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYWNoPVwieyBub3RpZmljYXRpb25zIH1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9XCJ7IHBhcmVudC5vbkNsaWNrIH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGltZVwiPnsgdGltZSB9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRldGFpbHNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGFiZWwgbGFiZWwtc20gbGFiZWwtaWNvbiBsYWJlbC1zdWNjZXNzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1wbHVzXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBldmVudCB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICA8L3VsPlxyXG5gO1xyXG5cclxucmlvdC50YWcoJ21ldGEtbm90aWZpY2F0aW9ucycsIGh0bWwsIGZ1bmN0aW9uIChvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uL2VudHJ5LmpzJyk7XHJcblxyXG4gICAgdGhpcy5ub3RpZmljYXRpb25zID0gW107XHJcblxyXG4gICAgdGhpcy5vbkNsaWNrID0gKGV2ZW50LCBwYXJhbXMpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhldmVudCwgcGFyYW1zKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgICAgICBcclxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xyXG4gICAgICAgIE1ldGFNYXAuTWV0YUZpcmUub24oJ21ldGFtYXAvbm90aWZpY2F0aW9ucycsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZpY2F0aW9ucyA9IF8uZmlsdGVyKF8uc29ydEJ5KGRhdGEsICdvcmRlcicpLCAoZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluY2x1ZGUgPSBkLmFyY2hpdmUgIT0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbmNsdWRlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG5cclxuY29uc3QgaHRtbCA9IGA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgZGF0YS1ob3Zlcj1cImRyb3Bkb3duXCIgZGF0YS1jbG9zZS1vdGhlcnM9XCJ0cnVlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS10cm9waHlcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJiYWRnZSBiYWRnZS1zdWNjZXNzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgcG9pbnRzLmxlbmd0aCB9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cImV4dGVybmFsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzID1cImJvbGRcIj57IHBvaW50cy5sZW5ndGggfSBuZXcgPC9zcGFuPiBhY2hpZXZlbWVudHsgczogcG9pbnRzLmxlbmd0aCA9PSAwIHx8IHBvaW50cy5sZW5ndGggPiAxIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPnZpZXcgYWxsPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51LWxpc3Qgc2Nyb2xsZXJcIiBzdHlsZT1cImhlaWdodDogMjUwcHg7XCIgZGF0YS1oYW5kbGUtY29sb3I9XCIjNjM3MjgzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgaWY9XCJ7IHBvaW50cyB9XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYWNoPVwieyBwb2ludHMgfVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz1cInsgcGFyZW50Lm9uQ2xpY2sgfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0aW1lXCI+eyB0aW1lIH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsYWJlbCBsYWJlbC1zbSBsYWJlbC1pY29uIGxhYmVsLXN1Y2Nlc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXBsdXNcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGV2ZW50IH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgIDwvdWw+XHJcbmA7XHJcblxyXG5yaW90LnRhZygnbWV0YS1wb2ludHMnLCBodG1sLCBmdW5jdGlvbiAob3B0cykge1xyXG5cclxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9lbnRyeS5qcycpO1xyXG4gICAgdGhpcy5wb2ludHMgPSBbXTtcclxuXHJcbiAgICB0aGlzLm9uQ2xpY2sgPSAoZXZlbnQsIHBhcmFtcykgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LCBwYXJhbXMpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xyXG4gICAgICAgIE1ldGFNYXAuTWV0YUZpcmUub24oYHVzZXJzLyR7TWV0YU1hcC5Vc2VyLnVzZXJJZH0vcG9pbnRzYCwgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wb2ludHMgPSBfLmZpbHRlcihfLnNvcnRCeShkYXRhLCAnb3JkZXInKSwgKGQpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmNsdWRlID0gZC5hcmNoaXZlICE9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5jbHVkZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIGRhdGEtaG92ZXI9XCJkcm9wZG93blwiIGRhdGEtY2xvc2Utb3RoZXJzPVwidHJ1ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidXNlcm5hbWUgdXNlcm5hbWUtaGlkZS1vbi1tb2JpbGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeyB1c2VybmFtZSB9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgYWx0PVwiXCIgaGVpZ2h0PVwiMzlcIiB3aWR0aD1cIjM5XCIgY2xhc3M9XCJpbWctY2lyY2xlXCIgc3JjPVwieyBwaWN0dXJlIH1cIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudSBkcm9wZG93bi1tZW51LWRlZmF1bHRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGkgaWY9XCJ7IG1lbnUgfVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhY2g9XCJ7IG1lbnUgfVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9XCJ7IHBhcmVudC5vbkNsaWNrIH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cInsgbGluayB9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInsgaWNvbiB9XCI+PC9pPiB7IHRpdGxlIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICA8L3VsPlxyXG5gO1xyXG5cclxucmlvdC50YWcoJ21ldGEtdXNlcicsIGh0bWwsIGZ1bmN0aW9uIChvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uL2VudHJ5LmpzJyk7XHJcblxyXG4gICAgdGhpcy5tZW51ID0gW107XHJcbiAgICB0aGlzLnVzZXJuYW1lID0gJyc7XHJcbiAgICB0aGlzLnBpY3R1cmUgPSAnJztcclxuXHJcbiAgICB0aGlzLmxvZ291dCA9ICgpID0+IHtcclxuICAgICAgICBNZXRhTWFwLmxvZ291dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubGlua0FjY291bnQgPSAoKSA9PiB7XHJcbiAgICAgICAgTWV0YU1hcC5BdXRoMC5saW5rQWNjb3VudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub25DbGljayA9IChldmVudCwgcGFyYW1zKSA9PiB7XHJcbiAgICAgICAgc3dpdGNoKGV2ZW50Lml0ZW0ubGluaykge1xyXG4gICAgICAgICAgICBjYXNlICcjbG9nb3V0JzpcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nb3V0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJyNsaW5rLXNvY2lhbC1hY2NvdW50cyc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmtBY2NvdW50KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhldmVudCwgcGFyYW1zKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xyXG4gICAgICAgIE1ldGFNYXAuTWV0YUZpcmUub24oYG1ldGFtYXAvdXNlcmAsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXNlcm5hbWUgPSBNZXRhTWFwLlVzZXIuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMucGljdHVyZSA9IE1ldGFNYXAuVXNlci5waWN0dXJlO1xyXG4gICAgICAgICAgICB0aGlzLm1lbnUgPSBfLmZpbHRlcihfLnNvcnRCeShkYXRhLCAnb3JkZXInKSwgKGQpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmNsdWRlID0gZC5hcmNoaXZlICE9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5jbHVkZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjxkaXYgY2xhc3M9XCJwYWdlLWFjdGlvbnNcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIj5cclxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biByZWQtaGF6ZSBidG4tc20gZHJvcGRvd24tdG9nZ2xlXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIGRhdGEtaG92ZXI9XCJkcm9wZG93blwiIGRhdGEtY2xvc2Utb3RoZXJzPVwidHJ1ZVwiPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImhpZGRlbi1zbSBoaWRkZW4teHNcIj5BY3Rpb25zJm5ic3A7PC9zcGFuPlxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWFuZ2xlLWRvd25cIj48L2k+XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiIHJvbGU9XCJtZW51XCI+XHJcbiAgICAgICAgICAgIDxsaSBlYWNoPVwieyB2YWwsIGkgaW4gZGF0YSB9XCIgY2xhc3M9XCJ7IHN0YXJ0OiBpID09IDAsIGFjdGl2ZTogaSA9PSAwIH1cIj5cclxuICAgICAgICAgICAgICAgIDxhIGlmPVwieyBwYXJlbnQuZ2V0TGlua0FsbG93ZWQodmFsKSB9XCIgaHJlZj1cInsgcGFyZW50LmdldEFjdGlvbkxpbmsodmFsKSB9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ7IHZhbC5pY29uIH1cIj48L2k+IHsgdmFsLnRpdGxlIH1cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgPGxpIGNsYXNzPVwiZGl2aWRlclwiPjwvbGk+XHJcbiAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjc2V0dGluZ3NcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWdlYXJcIj48L2k+IFNldHRpbmdzXHJcbiAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgPC91bD5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIDxzcGFuIHN0eWxlPVwicGFkZGluZy1sZWZ0OiA1cHg7XCI+XHJcbiAgICAgICAgPHNwYW4gaWY9XCJ7IHBhZ2VOYW1lIH1cIlxyXG4gICAgICAgICAgICAgICAgaWQ9XCJtYXBfbmFtZVwiXHJcbiAgICAgICAgICAgICAgICBkYXRhLXR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgIGRhdGEtdGl0bGU9XCJFbnRlciBtYXAgbmFtZVwiPlxyXG4gICAgICAgICAgICB7IHBhZ2VOYW1lIH1cclxuICAgICAgICA8L3NwYW4+XHJcbiAgICA8L3NwYW4+XHJcbjwvZGl2PlxyXG5gO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1hY3Rpb25zJywgaHRtbCwgZnVuY3Rpb24gKG9wdHMpIHtcclxuXHJcbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vZW50cnkuanMnKTtcclxuXHJcbiAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgIHRoaXMucGFnZU5hbWUgPSAnSG9tZSc7XHJcbiAgICB0aGlzLnVybCA9IE1ldGFNYXAuY29uZmlnLnNpdGUuZGIgKyAnLmZpcmViYXNlaW8uY29tJztcclxuICAgIHRoaXMubG9hZGVkID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5nZXRBY3Rpb25MaW5rID0gKG9iaikgPT4ge1xyXG4gICAgICAgIGxldCByZXQgPSBvYmoubGluaztcclxuICAgICAgICBpZiAob2JqLnVybF9wYXJhbXMpIHtcclxuICAgICAgICAgICAgbGV0IGFyZ3MgPSBbXTtcclxuICAgICAgICAgICAgXy5lYWNoKG9iai51cmxfcGFyYW1zLCAocHJtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhcmdzLnB1c2godGhpc1twcm0ubmFtZV0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0ID0gb2JqLmxpbmsuZm9ybWF0LmNhbGwob2JqLmxpbmssIGFyZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZ2V0TGlua0FsbG93ZWQgPSAob2JqKSA9PiB7XHJcbiAgICAgICAgbGV0IHJldCA9IHRydWUgPT0gb2JqWydhbGxvd2VkLW9uJ11bJyonXTtcclxuICAgICAgICBpZighcmV0KSB7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50UGFnZSA9IE1ldGFNYXAuUm91dGVyLmN1cnJlbnRQYXRoO1xyXG4gICAgICAgICAgICByZXQgPSB0cnVlID09IG9ialsnYWxsb3dlZC1vbiddW2N1cnJlbnRQYWdlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJpbmRUb3BhZ2VOYW1lID0gXy5vbmNlKCgpID0+IHtcclxuICAgICAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKGBtYXBzL2xpc3QvJHt0aGlzLm1hcElkfS9uYW1lYCwgKG5hbWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wYWdlTmFtZSA9IG5hbWUgfHwgJyc7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgTWV0YU1hcC5FdmVudGVyLmV2ZXJ5KCdwYWdlTmFtZScsIChvcHRzKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMubG9hZGVkKSB7XHJcbiAgICAgICAgICAgICQodGhpcy5tYXBfbmFtZSkuZWRpdGFibGUoJ2Rlc3Ryb3knKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubWFwSWQpIHtcclxuICAgICAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5vZmYoYG1hcHMvbGlzdC8ke3RoaXMubWFwSWR9L25hbWVgKTtcclxuICAgICAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5vbihgbWFwcy9saXN0LyR7b3B0cy5pZH0vbmFtZWAsIChuYW1lKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VOYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhZ2VOYW1lID0gb3B0cy5uYW1lIHx8ICdIb21lJztcclxuICAgICAgICB0aGlzLm1hcElkID0gb3B0cy5pZDtcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLm1hcElkKSB7XHJcbiAgICAgICAgICAgICQodGhpcy5tYXBfbmFtZSkuZWRpdGFibGUoeyB1bnNhdmVkY2xhc3M6IG51bGwgfSkub24oJ3NhdmUnLCAoZXZlbnQsIHBhcmFtcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5zZXREYXRhKHBhcmFtcy5uZXdWYWx1ZSwgYG1hcHMvbGlzdC8ke3RoaXMubWFwSWR9L25hbWVgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZFRvcGFnZU5hbWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKCdtZXRhbWFwL2FjdGlvbnMnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IF8uZmlsdGVyKF8uc29ydEJ5KGRhdGEsICdvcmRlcicpLCAoZCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgaW5jbHVkZSA9IGQuYXJjaGl2ZSAhPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gaW5jbHVkZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgfSk7XHJcblxyXG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG5jb25zdCBwYWdlSGVhZGVyID0gcmVxdWlyZSgnLi9wYWdlLWhlYWRlcicpO1xyXG5jb25zdCBwYWdlQ29udGFpbmVyID0gcmVxdWlyZSgnLi9wYWdlLWNvbnRhaW5lcicpO1xyXG5jb25zdCBtZXRhRGlhbG9nID0gcmVxdWlyZSgnLi9jb21wb25lbnRzL21ldGEtZGlhbG9nJyk7XHJcbmNvbnN0IHBhZ2VGb290ZXIgPSByZXF1aXJlKCcuL3BhZ2UtZm9vdGVyJyk7XHJcbmNvbnN0IEVWRU5UUyA9IHJlcXVpcmUoJy4uL2pzL2NvbnN0YW50cy9ldmVudHMnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjxkaXYgaWQ9XCJwYWdlX2JvZHlcIiBjbGFzcz1cInBhZ2UtaGVhZGVyLWZpeGVkIHBhZ2Utc2lkZWJhci1jbG9zZWQtaGlkZS1sb2dvIHBhZ2Utc2lkZWJhci1jbG9zZWQtaGlkZS1sb2dvXCI+XHJcblxyXG4gICAgPGRpdiBpZD1cIm1ldGFfcGFnZV9oZWFkZXJcIj48L2Rpdj5cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwiY2xlYXJmaXhcIj5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIDxkaXYgaWQ9XCJtZXRhX3BhZ2VfY29udGFpbmVyXCI+PC9kaXY+XHJcblxyXG48L2Rpdj5cclxuXHJcbjxkaXYgaWQ9XCJtZXRhX3BhZ2VfZGlhbG9nXCI+PC9kaXY+XHJcblxyXG48ZGl2IGlkPVwibWV0YV9wYWdlX2Zvb3RlclwiPjwvZGl2PmA7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLWJvZHknLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uL2VudHJ5LmpzJyk7XHJcblxyXG4gICAgdGhpcy5vbignbW91bnQnLCAoKSA9PiB7XHJcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV9oZWFkZXIsICdwYWdlLWhlYWRlcicpO1xyXG4gICAgICAgIHJpb3QubW91bnQodGhpcy5tZXRhX3BhZ2VfY29udGFpbmVyLCAncGFnZS1jb250YWluZXInKTtcclxuICAgICAgICByaW90Lm1vdW50KHRoaXMubWV0YV9wYWdlX2RpYWxvZywgJ21ldGEtZGlhbG9nJyk7XHJcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV9mb290ZXIsICdwYWdlLWZvb3RlcicpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIE1ldGFNYXAuRXZlbnRlci5vbihFVkVOVFMuU0lERUJBUl9DTE9TRSwgKCkgPT4ge1xyXG4gICAgICAgICQodGhpcy5wYWdlX2JvZHkpLmFkZENsYXNzKCdwYWdlLXNpZGViYXItcmV2ZXJzZWQnKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBcclxuICAgIE1ldGFNYXAuRXZlbnRlci5vbihFVkVOVFMuU0lERUJBUl9PUEVOLCAoKSA9PiB7XHJcbiAgICAgICAgJCh0aGlzLnBhZ2VfYm9keSkucmVtb3ZlQ2xhc3MoJ3BhZ2Utc2lkZWJhci1yZXZlcnNlZCcpO1xyXG4gICAgfSk7XHJcblxyXG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG5jb25zdCBwYWdlU2lkZWJhciA9IHJlcXVpcmUoJy4vcGFnZS1zaWRlYmFyLmpzJyk7XHJcbmNvbnN0IHBhZ2VDb250ZW50ID0gcmVxdWlyZSgnLi9wYWdlLWNvbnRlbnQuanMnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjxkaXYgY2xhc3M9XCJwYWdlLWNvbnRhaW5lclwiPlxyXG4gICAgPGRpdiBpZD1cIm1ldGFfcGFnZV9zaWRlYmFyXCI+PC9kaXY+XHJcbiAgICA8ZGl2IGlkPVwibWV0YV9wYWdlX2NvbnRlbnRcIj48L2Rpdj5cclxuPC9kaXY+XHJcbmA7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLWNvbnRhaW5lcicsIGh0bWwsIGZ1bmN0aW9uKG9wdHMpIHtcclxuXHJcbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vZW50cnkuanMnKTtcclxuXHJcbiAgICB0aGlzLm9uKCdtb3VudCcsICgpID0+IHtcclxuICAgICAgICByaW90Lm1vdW50KHRoaXMubWV0YV9wYWdlX3NpZGViYXIsICdwYWdlLXNpZGViYXInKTtcclxuICAgICAgICByaW90Lm1vdW50KHRoaXMubWV0YV9wYWdlX2NvbnRlbnQsICdwYWdlLWNvbnRlbnQnKTtcclxuICAgIH0pO1xyXG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG5jb25zdCBFVkVOVFMgPSByZXF1aXJlKCcuLi9qcy9jb25zdGFudHMvZXZlbnRzJyk7XHJcbmNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjxkaXYgY2xhc3M9XCJwYWdlLWNvbnRlbnQtd3JhcHBlclwiPlxyXG4gICAgPGRpdiBpZD1cInBhZ2UtY29udGVudFwiIGNsYXNzPVwicGFnZS1jb250ZW50XCI+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwYWdlLWhlYWRcIj5cclxuXHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG5cclxuICAgICAgICA8ZGl2IGlkPVwiYXBwLWNvbnRhaW5lclwiPlxyXG5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuYDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtY29udGVudCcsIGh0bWwsIGZ1bmN0aW9uIChvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uL2VudHJ5LmpzJyk7XHJcblxyXG4gICAgTWV0YU1hcC5FdmVudGVyLm9uKEVWRU5UUy5TSURFQkFSX0NMT1NFLCAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgJCh0aGlzWydhcHAtY29udGFpbmVyJ10pLmNzcyh7IHdpZHRoOiBgJHt3aWR0aCAtIDQ2fXB4YCB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgICQod2luZG93KS5vbigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgICQodGhpc1snYXBwLWNvbnRhaW5lciddKS5jc3MoeyB3aWR0aDogYDEwMCVgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgTWV0YU1hcC5FdmVudGVyLm9uKEVWRU5UUy5TSURFQkFSX09QRU4sICgpID0+IHtcclxuICAgICAgICAkKHRoaXNbJ2FwcC1jb250YWluZXInXSkuY3NzKHsgd2lkdGg6IGAxMDAlYCB9KTtcclxuICAgIH0pO1xyXG5cclxufSk7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjxkaXYgY2xhc3M9XCJwYWdlLWZvb3RlclwiIHN0eWxlPVwicG9zaXRpb246IGZpeGVkOyBib3R0b206IDA7XCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwicGFnZS1mb290ZXItaW5uZXJcIj5cclxuICAgICAgICA8YSBocmVmPVwiI3Rlcm1zXCI+JmNvcHk7MjAxNTwvYT5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuYDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtZm9vdGVyJywgaHRtbCwgZnVuY3Rpb24ob3B0cykge1xyXG5cclxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi9lbnRyeS5qcycpO1xyXG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG5jb25zdCBwYWdlTG9nbyA9IHJlcXVpcmUoJy4vcGFnZS1sb2dvLmpzJyk7XHJcbmNvbnN0IHBhZ2VBY3Rpb25zID0gcmVxdWlyZSgnLi9wYWdlLWFjdGlvbnMuanMnKTtcclxuY29uc3QgcGFnZVNlYXJjaCA9IHJlcXVpcmUoJy4vcGFnZS1zZWFyY2guanMnKTtcclxuY29uc3QgcGFnZVRvcE1lbnUgPSByZXF1aXJlKCcuL3BhZ2UtdG9wbWVudScpO1xyXG5cclxuY29uc3QgaHRtbCA9IGBcclxuPGRpdiBpZD1cImhlYWRlci10b3BcIiBjbGFzcz1cInBhZ2UtaGVhZGVyIG5hdmJhciBuYXZiYXItZml4ZWQtdG9wXCI+XHJcbiAgICA8ZGl2IGlkPVwibWV0YV9wcm9ncmVzc19uZXh0XCIgc3R5bGU9XCJvdmVyZmxvdzogaW5oZXJpdDtcIj48L2Rpdj5cclxuICAgIDxkaXYgaWQ9XCJoZWFkZXItY29udGVudFwiIGNsYXNzPVwicGFnZS1oZWFkZXItaW5uZXJcIj5cclxuXHJcbiAgICAgICAgPGRpdiBpZD1cIm1ldGFfcGFnZV9sb2dvXCI+PC9kaXY+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPGRpdiBpZD1cIm1ldGFfcGFnZV9hY3Rpb25zXCI+PC9kaXY+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPGRpdiBpZD1cIm1ldGFfcGFnZV90b3BcIiBjbGFzcz1cInBhZ2UtdG9wXCI+XHJcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJtZXRhX3BhZ2Vfc2VhcmNoXCI+PC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8ZGl2IGlkPVwibWV0YV9wYWdlX3RvcG1lbnVcIj48L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICA8L2Rpdj5cclxuXHJcbjwvZGl2PlxyXG5gO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1oZWFkZXInLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uL2VudHJ5LmpzJyk7XHJcblxyXG4gICAgdGhpcy5vbignbW91bnQnLCAoKSA9PiB7XHJcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV9sb2dvLCAncGFnZS1sb2dvJyk7XHJcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV9hY3Rpb25zLCAncGFnZS1hY3Rpb25zJyk7XHJcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV90b3AsICdwYWdlLXNlYXJjaCcpO1xyXG4gICAgICAgIHJpb3QubW91bnQodGhpcy5tZXRhX3BhZ2VfdG9wLCAncGFnZS10b3BtZW51Jyk7XHJcbiAgICB9KTtcclxuXHJcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcbmNvbnN0IEVWRU5UUyA9IHJlcXVpcmUoJy4uL2pzL2NvbnN0YW50cy9ldmVudHMnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjxkaXYgY2xhc3MgPVwicGFnZS1sb2dvXCI+XHJcbiAgICA8YSBpZD1cIm1ldGFfbG9nb1wiIGhyZWY9XCIjaG9tZVwiPlxyXG4gICAgICAgIDxpbWcgc3JjPVwibWV0YW1hcC9hc3NldHMvaW1nL21ldGFtYXBfY2xvdWQucG5nXCIgYWx0PVwibG9nb1wiIGNsYXNzID1cImxvZ28tZGVmYXVsdFwiIC8+XHJcbiAgICA8L2E+XHJcbiAgICA8ZGl2IGlkPVwibWV0YV9tZW51X3RvZ2dsZVwiIGNsYXNzID1cIm1lbnUtdG9nZ2xlciBzaWRlYmFyLXRvZ2dsZXJcIiBzdHlsZT1cInsgZ2V0RGlzcGxheSgnbWVudScpIH1cIj5cclxuICAgICAgICA8IS0tRE9DOiBSZW1vdmUgdGhlIGFib3ZlIFwiaGlkZVwiIHRvIGVuYWJsZSB0aGUgc2lkZWJhciB0b2dnbGVyIGJ1dHRvbiBvbiBoZWFkZXItLT5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzID1cIm1lbnUtdG9nZ2xlciByZXNwb25zaXZlLXRvZ2dsZXJcIiBkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCIgZGF0YS10YXJnZXQ9XCIubmF2YmFyLWNvbGxhcHNlXCI+XHJcbjwvYT5cclxuYDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtbG9nbycsIGh0bWwsIGZ1bmN0aW9uKG9wdHMpIHtcclxuXHJcbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vZW50cnkuanMnKTtcclxuICAgIHRoaXMuZGlzcGxheSA9IHRydWU7XHJcbiAgICBcclxuICAgIHRoaXMuZ2V0RGlzcGxheSA9IChlbCkgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKCF0aGlzLmRpc3BsYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdkaXNwbGF5OiBub25lOyc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgTWV0YU1hcC5FdmVudGVyLm9uKEVWRU5UUy5TSURFQkFSX0NMT1NFLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBcclxuICAgIE1ldGFNYXAuRXZlbnRlci5vbihFVkVOVFMuU0lERUJBUl9PUEVOLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBcclxufSk7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjwhLS0gRE9DOiBBcHBseSBcInNlYXJjaC1mb3JtLWV4cGFuZGVkXCIgcmlnaHQgYWZ0ZXIgdGhlIFwic2VhcmNoLWZvcm1cIiBjbGFzcyB0byBoYXZlIGhhbGYgZXhwYW5kZWQgc2VhcmNoIGJveCAtLT5cclxuPGZvcm0gY2xhc3M9XCJzZWFyY2gtZm9ybVwiIGFjdGlvbj1cImV4dHJhX3NlYXJjaC5odG1sXCIgbWV0aG9kPVwiR0VUXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXBcIj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbCBpbnB1dC1zbVwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoLi4uXCIgbmFtZT1cInF1ZXJ5XCI+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYnRuXCI+XHJcbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJidG4gc3VibWl0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1zZWFyY2hcIj48L2k+XHJcbiAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5cclxuPC9mb3JtPlxyXG5gO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1zZWFyY2gnLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uL2VudHJ5LmpzJyk7XHJcblxyXG4gICAgXHJcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcbmNvbnN0IEVWRU5UUyA9IHJlcXVpcmUoJy4uL2pzL2NvbnN0YW50cy9ldmVudHMnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjxkaXYgY2xhc3M9XCJwYWdlLXNpZGViYXItd3JhcHBlclwiIHN0eWxlPVwieyBnZXREaXNwbGF5KCkgfVwiPlxyXG4gICAgPGRpdiBjbGFzcz1cInBhZ2Utc2lkZWJhciBuYXZiYXItY29sbGFwc2UgY29sbGFwc2VcIj5cclxuICAgICAgICA8dWwgY2xhc3M9XCJwYWdlLXNpZGViYXItbWVudSBcIiBkYXRhLWtlZXAtZXhwYW5kZWQ9XCJmYWxzZVwiIGRhdGEtYXV0by1zY3JvbGw9XCJ0cnVlXCIgZGF0YS1zbGlkZS1zcGVlZD1cIjIwMFwiPlxyXG5cclxuICAgICAgICAgICAgPGxpIGlmPVwieyBkYXRhIH1cIiBvbmNsaWNrPVwieyBwYXJlbnQuY2xpY2sgfVwiIGVhY2g9XCJ7IGRhdGEgfVwiPlxyXG4gICAgICAgICAgICAgICAgPGEgaWY9XCJ7IGljb24gfVwiIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInsgaWNvbiB9XCIgc3R5bGU9XCJjb2xvcjojeyBjb2xvciB9O1wiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRpdGxlXCI+eyB0aXRsZSB9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwieyBhcnJvdzogbWVudS5sZW5ndGggfVwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgIDx1bCBpZj1cInsgbWVudSAmJiBtZW51Lmxlbmd0aCB9XCIgY2xhc3M9XCJzdWItbWVudVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaSBlYWNoPVwieyBtZW51IH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ7IGljb24gfVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGl0bGVcIj57IHRpdGxlIH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgPC9saT5cclxuXHJcbiAgICAgICAgPC91bD5cclxuXHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+XHJcbmA7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLXNpZGViYXInLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uL2VudHJ5LmpzJyk7XHJcblxyXG4gICAgdGhpcy5jbGljayA9IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnZm9vJykgfVxyXG4gICAgdGhpcy5kaXNwbGF5ID0gdHJ1ZTtcclxuICAgIHRoaXMuZGF0YSA9IFtdO1xyXG5cclxuICAgIE1ldGFNYXAuTWV0YUZpcmUub24oJ21ldGFtYXAvc2lkZWJhcicsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gXy5maWx0ZXIoXy5zb3J0QnkoZGF0YSwgJ29yZGVyJyksIChkKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBpbmNsdWRlID0gZC5hcmNoaXZlICE9IHRydWU7XHJcbiAgICAgICAgICAgIGlmIChpbmNsdWRlICYmIGQubWVudSAmJiBkLm1lbnUpIHtcclxuICAgICAgICAgICAgICAgIGQubWVudSA9IF8uZmlsdGVyKF8uc29ydEJ5KGQubWVudSwgJ29yZGVyJyksIChtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0uYXJjaGl2ZSAhPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGluY2x1ZGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0aGlzLmdldERpc3BsYXkgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYoIXRoaXMuZGlzcGxheSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2Rpc3BsYXk6IG5vbmU7JztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBNZXRhTWFwLkV2ZW50ZXIub24oRVZFTlRTLlNJREVCQVJfQ0xPU0UsICgpID0+IHtcclxuICAgICAgICB0aGlzLmRpc3BsYXkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgTWV0YU1hcC5FdmVudGVyLm9uKEVWRU5UUy5TSURFQkFSX09QRU4sICgpID0+IHtcclxuICAgICAgICB0aGlzLmRpc3BsYXkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICB9KTtcclxufSk7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcclxuY29uc3QgbWV0YVBvaW50cyA9IHJlcXVpcmUoJy4vbWVudS9tZXRhLXBvaW50cy5qcycpO1xyXG5jb25zdCBtZXRhSGVscCA9IHJlcXVpcmUoJy4vbWVudS9tZXRhLWhlbHAuanMnKTtcclxuY29uc3QgbWV0YVVzZXIgPSByZXF1aXJlKCcuL21lbnUvbWV0YS11c2VyLmpzJyk7XHJcbmNvbnN0IG1ldGFOb3QgPSByZXF1aXJlKCcuL21lbnUvbWV0YS1ub3RpZmljYXRpb25zLmpzJyk7XHJcblxyXG5jb25zdCBodG1sID0gYFxyXG48ZGl2IGNsYXNzPVwidG9wLW1lbnVcIj5cclxuICAgIDx1bCBjbGFzcz1cIm5hdiBuYXZiYXItbmF2IHB1bGwtcmlnaHRcIj5cclxuICAgICAgICA8bGkgY2xhc3M9XCJzZXBhcmF0b3IgaGlkZVwiPjwvbGk+XHJcbiAgICAgICAgPGxpIGNsYXNzPVwiZHJvcGRvd24gZHJvcGRvd24tZXh0ZW5kZWQgZHJvcGRvd24tbm90aWZpY2F0aW9uIGRyb3Bkb3duXCIgaWQ9XCJoZWFkZXJfbm90aWZpY2F0aW9uX2JhclwiPjwvbGk+XHJcblxyXG4gICAgICAgIDxsaSBjbGFzcz1cInNlcGFyYXRvciBoaWRlXCI+PC9saT5cclxuICAgICAgICA8bGkgY2xhc3M9XCJkcm9wZG93biBkcm9wZG93bi1leHRlbmRlZCBkcm9wZG93bi1ub3RpZmljYXRpb24gZHJvcGRvd25cIiBpZD1cImhlYWRlcl9wb2ludHNfYmFyXCI+PC9saT5cclxuXHJcbiAgICAgICAgPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPlxyXG4gICAgICAgIDxsaSBjbGFzcz1cImRyb3Bkb3duXCIgaWQ9XCJoZWFkZXJfZGFzaGJvYXJkX2JhclwiIG9uY2xpY2s9XCJ7IG9uQ2xpY2sgfVwiPlxyXG4gICAgICAgICAgICA8YSBjbGFzcz1cImRyb3Bkb3duLXRvZ2dsZVwiIGhyZWY9XCIjaG9tZVwiPlxyXG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1ob21lXCI+PC9pPlxyXG4gICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPlxyXG4gICAgICAgIDxsaSBpZD1cImhlYWRlcl9oZWxwX2JhclwiIGNsYXNzPVwiZHJvcGRvd24gZHJvcGRvd24tZXh0ZW5kZWQgZHJvcGRvd24tbm90aWZpY2F0aW9uIGRyb3Bkb3duXCI+PC9saT5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPlxyXG4gICAgICAgIDxsaSBpZD1cImhlYWRlcl91c2VyX21lbnVcIiBjbGFzcz1cImRyb3Bkb3duIGRyb3Bkb3duLXVzZXIgZHJvcGRvd25cIj48L2xpPlxyXG4gICAgPC91bD5cclxuPC9kaXY+XHJcbmA7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLXRvcG1lbnUnLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XHJcbiAgICB0aGlzLm9uQ2xpY2sgPSAoZXZlbnQsIHBhcmFtcykgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LCBwYXJhbXMpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xyXG4gICAgICAgIHJpb3QubW91bnQodGhpcy5oZWFkZXJfcG9pbnRzX2JhciwgJ21ldGEtcG9pbnRzJyk7XHJcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLmhlYWRlcl9ub3RpZmljYXRpb25fYmFyLCAnbWV0YS1ub3RpZmljYXRpb25zJyk7XHJcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLmhlYWRlcl9oZWxwX2JhciwgJ21ldGEtaGVscCcpO1xyXG4gICAgICAgIHJpb3QubW91bnQodGhpcy5oZWFkZXJfdXNlcl9tZW51LCAnbWV0YS11c2VyJyk7XHJcbiAgICB9KTtcclxuXHJcbn0pOyIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi90eXBpbmdzL3Jpb3Rqcy9yaW90anMuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi90eXBpbmdzL25wcm9ncmVzcy9OUHJvZ3Jlc3MuZC50c1wiIC8+XHJcblxyXG5jb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG5jb25zdCBOUHJvZ3Jlc3MgPSB3aW5kb3cuTlByb2dyZXNzO1xyXG5jb25zdCBST1VURVMgPSByZXF1aXJlKCcuLi8uLi9qcy9jb25zdGFudHMvcm91dGVzJyk7XHJcblxyXG5jb25zdCBodG1sID0gYFxyXG48ZGl2IGNsYXNzPVwicG9ydGxldCBsaWdodFwiPlxyXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJwb3J0bGV0LWJvZHlcIj5cclxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJyb3cgbWFyZ2luLWJvdHRvbS0zMFwiPlxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGlmPVwieyBoZWFkZXIgfVwiIGNsYXNzPVwiY29sLW1kLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT57IGhlYWRlci50aXRsZSB9PC9oMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPnsgaGVhZGVyLnRleHQgfTwvcD5cclxuXHRcdFx0XHRcdFx0XHQ8dWwgY2xhc3M9XCJsaXN0LXVuc3R5bGVkIG1hcmdpbi10b3AtMTAgbWFyZ2luLWJvdHRvbS0xMFwiPlxyXG5cdFx0XHRcdFx0XHRcdFx0PGxpIGVhY2g9XCJ7IGFyZWFzIH1cIj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PGkgY2xhc3M9XCJ7IGljb24gfVwiPjwvaT4gPGI+eyB0aXRsZSB9PC9iPiB7IHRleHQgfVxyXG5cdFx0XHRcdFx0XHRcdFx0PC9saT5cclxuXHRcdFx0XHRcdFx0XHQ8L3VsPlxyXG5cdFx0XHRcdFx0XHRcdDwhLS0gQmxvY2txdW90ZXMgLS0+XHJcblx0XHRcdFx0XHRcdFx0PGJsb2NrcXVvdGUgY2xhc3M9XCJoZXJvXCI+XHJcblx0XHRcdFx0XHRcdFx0XHQ8cD57IHF1b3RlLnRleHQgfTwvcD5cclxuXHRcdFx0XHRcdFx0XHRcdDxzbWFsbD57IHF1b3RlLmJ5IH08L3NtYWxsPlxyXG5cdFx0XHRcdFx0XHRcdDwvYmxvY2txdW90ZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhZGR0aGlzX2hvcml6b250YWxfZm9sbG93X3Rvb2xib3hcIj48L2Rpdj5cclxuXHRcdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3MgPVwiY29sLW1kLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aWZyYW1lIGlmPVwieyBoZWFkZXIueW91dHViZWlkIH1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwieXRwbGF5ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0L2h0bWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz1cImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL3sgaGVhZGVyLnlvdXR1YmVpZCB9XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcyA9XCJmaXR2aWRzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cImhlaWdodDogMzI3cHg7IHdpZHRoOiAxMDAlOyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWxlZnQ6IGF1dG87IG1hcmdpbi1yaWdodDogYXV0bzsgYnJvZGVyOiAwO1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG5cdFx0XHRcdFx0XHRcdDwvaWZyYW1lPlxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkbGluZVwiPlxyXG5cdFx0XHRcdFx0XHQ8aDM+eyB1c2VyTmFtZSB9eyB2aXNpb24udGl0bGUgfTwvaDM+XHJcblx0XHRcdFx0XHQ8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD57IHZpc2lvbi50ZXh0IH08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdDwvZGl2PlxyXG5gO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygnaG9tZScsIGh0bWwsIGZ1bmN0aW9uKG9wdHMpIHtcclxuXHJcbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vZW50cnkuanMnKTtcclxuICAgIFxyXG4gICAgdGhpcy5hcmVhcyA9IFtdXHJcbiAgICB0aGlzLmhlYWRlciA9IHt9XHJcblxyXG4gICAgTWV0YU1hcC5NZXRhRmlyZS5vbihST1VURVMuSE9NRSwgKGRhdGEpID0+IHtcclxuICAgICAgICB0aGlzLmFyZWFzID0gXy5maWx0ZXIoXy5zb3J0QnkoZGF0YS5hcmVhcywgJ29yZGVyJyksIChkKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBpbmNsdWRlID0gZC5hcmNoaXZlICE9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBpbmNsdWRlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucXVvdGUgPSBkYXRhLnF1b3RlO1xyXG4gICAgICAgIHRoaXMuaGVhZGVyID0gZGF0YS5oZWFkZXI7XHJcbiAgICAgICAgdGhpcy52aXNpb24gPSBkYXRhLnZpc2lvbjtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnVzZXJOYW1lID0gTWV0YU1hcC5Vc2VyLmZ1bGxOYW1lO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgTlByb2dyZXNzLmRvbmUoKTtcclxuICAgICAgICBcclxuICAgICAgICB3aW5kb3cuYWRkdGhpcy5sYXllcnMucmVmcmVzaCgpO1xyXG4gICAgfSk7XHJcbn0pOyIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi90eXBpbmdzL3Jpb3Rqcy9yaW90anMuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi90eXBpbmdzL25wcm9ncmVzcy9OUHJvZ3Jlc3MuZC50c1wiIC8+XHJcblxyXG5jb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG5jb25zdCBOUHJvZ3Jlc3MgPSB3aW5kb3cuTlByb2dyZXNzO1xyXG5jb25zdCBST1VURVMgPSByZXF1aXJlKCcuLi8uLi9qcy9jb25zdGFudHMvcm91dGVzJyk7XHJcblxyXG5jb25zdCBodG1sID0gYFxyXG48ZGl2IGNsYXNzPVwicG9ydGxldCBsaWdodFwiPlxyXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJwb3J0bGV0LWJvZHlcIj5cclxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJyb3cgbWFyZ2luLWJvdHRvbS0zMFwiPlxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGlmPVwieyBoZWFkZXIgfVwiIGNsYXNzPVwiY29sLW1kLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+eyBoZWFkZXIudGl0bGUgfTwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD57IGhlYWRlci50ZXh0IH08L3A+XHJcblx0XHRcdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdFx0PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBlYWNoPVwieyBhcmVhcyB9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkbGluZVwiPlxyXG4gICAgXHRcdFx0XHRcdFx0PGgzPnsgdGl0bGUgfTwvaDM+XHJcbiAgICBcdFx0XHRcdFx0PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD57IHRleHQgfTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImxpc3QtdW5zdHlsZWQgbWFyZ2luLXRvcC0xMCBtYXJnaW4tYm90dG9tLTEwXCI+XHJcblx0XHRcdFx0XHRcdFx0PGxpIGVhY2g9XCJ7IGl0ZW1zIH1cIj5cclxuXHRcdFx0XHRcdFx0XHRcdDxpIGNsYXNzPVwieyBpY29uIH1cIj48L2k+IDxiPnsgdGl0bGUgfTwvYj4geyB0ZXh0IH1cclxuXHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHQ8L3VsPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHQ8L2Rpdj5cclxuYDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3Rlcm1zJywgaHRtbCwgZnVuY3Rpb24ob3B0cykge1xyXG5cclxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9lbnRyeS5qcycpO1xyXG4gICAgXHJcbiAgICB0aGlzLmFyZWFzID0gW11cclxuICAgIHRoaXMuaGVhZGVyID0ge31cclxuXHJcbiAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKFJPVVRFUy5URVJNU19BTkRfQ09ORElUSU9OUywgKGRhdGEpID0+IHtcclxuICAgICAgICB0aGlzLmFyZWFzID0gXy5maWx0ZXIoXy5zb3J0QnkoZGF0YS5zZWN0aW9ucywgJ29yZGVyJyksIChkKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBpbmNsdWRlID0gZC5hcmNoaXZlICE9IHRydWU7XHJcbiAgICAgICAgICAgIGlmKGluY2x1ZGUpIHtcclxuICAgICAgICAgICAgICAgIGQuaXRlbXMgPSBfLmZpbHRlcihfLnNvcnRCeShkLml0ZW1zLCAnb3JkZXInKSwgKGQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5jbHVkZTIgPSBkLmFyY2hpdmUgIT0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5jbHVkZTI7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaW5jbHVkZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmhlYWRlciA9IGRhdGEuaGVhZGVyO1xyXG4gICAgICAgIHRoaXMudXNlck5hbWUgPSBNZXRhTWFwLlVzZXIuZnVsbE5hbWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgICAgICBcclxuICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpO1xyXG4gICAgfSk7XHJcbn0pOyJdfQ==
