(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.MetaMap = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Auth0 = require('./js/integrations/auth0');
var usersnap = require('./js/integrations/usersnap');
var User = require('./js/app/user.js');
var Editor = require('./js/canvas/editor.js');

var MetaMap = (function () {
    function MetaMap() {
        _classCallCheck(this, MetaMap);

        this.MetaFire = FrontEnd.MetaFire;
        this.Auth0 = new Auth0();
        usersnap();
    }

    _createClass(MetaMap, [{
        key: 'init',
        value: function init() {
            var _this = this;

            var self = this;
            this.Auth0.login().then(function (profile) {
                self.User = new User(profile);

                _this.MetaFire.login();
                window.FrontEnd.init();
                _.delay(function () {
                    Metronic.init(); // init metronic core componets
                    Layout.init(); // init layout
                    Demo.init(); // init demo features
                    Index.init(); // init index page
                    Tasks.initDashboardWidget(); // init tash dashboard widget
                    var x = {
                        ccsTagging: {},
                        safeApply: function safeApply(fn) {
                            if (fn) {
                                for (var _len = arguments.length, params = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                                    params[_key - 1] = arguments[_key];
                                }

                                fn.apply(undefined, params);
                            }
                        },
                        $watch: function $watch() {},
                        get: function get() {
                            return { then: function then() {} };
                        },
                        isTouchDevice: function isTouchDevice() {
                            return false;
                        }
                    };

                    window.mapData = x.mapData = { 'map': { 'metadata': { 'sandbox': false, 'id': 5547, 'name': 'Untitled Map', 'url': '/maps/5547', 'canEdit': true, 'updatedAt': '2015-05-15T12:29:40.721-04:00', 'updatedBy': null, 'updatedByName': null, 'userTags': [] }, 'data': { 'class': 'go.GraphLinksModel', 'nodeIsLinkLabelProperty': 'isLinkLabel', 'linkLabelKeysProperty': 'labelKeys', 'linkFromPortIdProperty': 'fromPort', 'linkToPortIdProperty': 'toPort', 'nodeDataArray': [{ 'key': 1, 'text': 'New Idea', 'isGroup': true, 'loc': '0 0', 'layout': 'left', 'sExpanded': true, 'pExpanded': true }], 'linkDataArray': [] }, 'stateData': null, 'editorOptions': null, 'analytics': {}, 'versions': [] } };
                    window._mapEditorCtrl = MapEditorCtrl(x, x, x, x, x);
                }, 250);
            });
        }
    }, {
        key: 'logout',
        value: function logout() {
            this.MetaFire.logout();
            this.Auth0.logout();
        }
    }]);

    return MetaMap;
})();

module.exports = MetaMap;

},{"./js/app/user.js":3,"./js/canvas/editor.js":7,"./js/integrations/auth0":21,"./js/integrations/usersnap":25}],2:[function(require,module,exports){
'use strict';

require('babel/polyfill');
window.riot = require('riot');
window._ = require('lodash');
window.Promise = require('bluebird');
require('core-js');
window.$ = window.jQuery = require('jquery');
require('jquery-ui');
require('bootstrap');
window.Firebase = require('firebase');
window.Humanize = require('humanize-plus');
window.moment = require('moment');
window.URI = require('URIjs');
window.localforage = require('localforage');

require('./js/integrations/auth0');
require('./js/integrations/googleanalytics');
require('./js/integrations/newrelic');
require('./js/integrations/raygun');
require('./js/integrations/usersnap');

require('./tags/components/meta-dialog.tag');
require('./tags/components/meta-table.tag');
require('./tags/page-actions.tag');
require('./tags/page-container.tag');
require('./tags/page-content.tag');
require('./tags/page-footer.tag');
require('./tags/page-header.tag');
require('./tags/page-logo.tag');
require('./tags/page-search.tag');
require('./tags/page-sidebar.tag');
require('./tags/page-topmenu.tag');
require('./tags/page-body.tag');

require('./js/canvas/editor.js');
require('./js/canvas/user.js');
require('./js/canvas/editor_options.js');
require('./js/canvas/analytics.js');
require('./js/canvas/attachments.js');
require('./js/canvas/autosave.js');
require('./js/canvas/generator.js');
require('./js/canvas/layouts.js');
require('./js/canvas/map.js');
require('./js/canvas/perspectives.js');
require('./js/canvas/presenter.js');
require('./js/canvas/sharing.js');
require('./js/canvas/standards.js');
require('./js/canvas/tagging.js');
require('./js/canvas/templates.js');
require('./js/canvas/tests.js');
require('./js/canvas/ui.js');

var mm = require('./MetaMap');

module.exports = new mm();

},{"./MetaMap":1,"./js/canvas/analytics.js":4,"./js/canvas/attachments.js":5,"./js/canvas/autosave.js":6,"./js/canvas/editor.js":7,"./js/canvas/editor_options.js":8,"./js/canvas/generator.js":9,"./js/canvas/layouts.js":10,"./js/canvas/map.js":11,"./js/canvas/perspectives.js":12,"./js/canvas/presenter.js":13,"./js/canvas/sharing.js":14,"./js/canvas/standards.js":15,"./js/canvas/tagging.js":16,"./js/canvas/templates.js":17,"./js/canvas/tests.js":18,"./js/canvas/ui.js":19,"./js/canvas/user.js":20,"./js/integrations/auth0":21,"./js/integrations/googleanalytics":22,"./js/integrations/newrelic":23,"./js/integrations/raygun":24,"./js/integrations/usersnap":25,"./tags/components/meta-dialog.tag":26,"./tags/components/meta-table.tag":27,"./tags/page-actions.tag":28,"./tags/page-body.tag":29,"./tags/page-container.tag":30,"./tags/page-content.tag":31,"./tags/page-footer.tag":32,"./tags/page-header.tag":33,"./tags/page-logo.tag":34,"./tags/page-search.tag":35,"./tags/page-sidebar.tag":36,"./tags/page-topmenu.tag":37,"URIjs":undefined,"babel/polyfill":"babel/polyfill","bluebird":undefined,"bootstrap":undefined,"core-js":undefined,"firebase":undefined,"humanize-plus":undefined,"jquery":undefined,"jquery-ui":undefined,"localforage":undefined,"lodash":undefined,"moment":undefined,"riot":"riot"}],3:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var User = (function () {
    function User(profile) {
        _classCallCheck(this, User);

        this.profile = profile;
        this.params = URI(window.location).query(true);
        this.thinkquery = this.params.thinkquery ? true : false;
    }

    _createClass(User, [{
        key: 'saveUserEditorOptions',
        value: function saveUserEditorOptions(options) {
            var data = {
                user: {
                    editor_options: JSON.stringify(options)
                }
            };

            //startSpinner();
            //$http.put('/users/' + $scope.userId + '.json', data).then(
            //    function (response) {
            //        stopSpinner();
            //    },
            //    function () {
            //        stopSpinner();
            //        $scope.profileEditStatus = 'Could not save editor options';
            //    }
            //);
        }
    }, {
        key: 'userId',
        get: function get() {
            return this.profile.user_id;
        }
    }, {
        key: 'isAdmin',
        get: function get() {
            return this.profile.roles.indexOf('admin') !== -1;
        }
    }, {
        key: 'name',
        get: function get() {
            return this.profile.name;
        }
    }]);

    return User;
})();

module.exports = User;

},{}],4:[function(require,module,exports){
// functions handling analytics
// analytics display is in views/maps/_analytics_tab_map and _analytics_tab_thing
'use strict';

SandbankEditor.Analytics = function ($scope, $http, map) {

    var self = this;

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.getUi().currentTabIs(map.getUi().TAB_ID_ANALYTICS_THING)) {
                self.updateContextualAnalytics();
            }
        }
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.getUi().TAB_ID_ANALYTICS_THING) {
            // opening thing analytics tab
            self.updateContextualAnalytics();
        }
    };

    // this gets populated by map.loadMapExtraData, on load and after every autosave
    this.mapAnalytics = null;

    // --------- contextual analytics --------------
    // - these are all calculated here, unlike map analytics which are calculated on the server and connected with badges and points

    // this gets calculated by updateContextualAnalytics
    this.contextualAnalytics = {
        thingName: '',

        // thing stuff
        distinctFrom: 0,
        intentionallyDistinctFrom: 0,
        partOf: 0,
        includesParts: 0,
        relatedTo: 0,
        isRelationship: 0,
        lookingAt: 0,
        lookedAtFrom: 0,

        // R stuff
        rFromThingName: '',
        rToThingName: '',
        isRThing: false,
        isRSystem: false,
        isRPoint: false,
        isRView: false
    };

    this.updateContextualAnalytics = function () {
        //console.log('updateContextualAnalytics');
        if (!map.getUi().currentTabIs(map.getUi().TAB_ID_ANALYTICS_THING)) {
            return;
        }

        var diagram = map.getDiagram();
        var part = diagram.selection.first();
        var a = self.contextualAnalytics;

        if (part && part instanceof go.Group) {
            var thing = part;

            // thing name
            a.thingName = thing.data.text;

            // distinct from
            a.distinctFrom = _.where(diagram.model.nodeDataArray, { isGroup: true }).length - 1;

            // part of
            var level = 0;
            var thing2 = thing;
            while (thing2 = getContainingGroup(thing2)) {
                level++;
            }
            a.partOf = level;

            // includes parts
            a.includesParts = countGroups(thing);

            // related to / looking at / looked at from / intentionally distinct from
            a.relatedTo = 0;
            a.lookingAt = 0;
            a.lookedAtFrom = 0;
            a.intentionallyDistinctFrom = 0;
            var links = thing.linksConnected;
            var rConnectedThingKeys = [];
            while (links.next()) {
                var link = links.value;
                // P link
                if (link.data.category == 'P') {
                    if (link.fromNode == thing) {
                        a.lookingAt++;
                    } else if (link.toNode == thing) {
                        a.lookedAtFrom++;
                    }
                }
                // D link
                else if (link.data.category == 'D') {
                    a.intentionallyDistinctFrom++;
                }
                // R link
                else if (!link.data.category) {
                    // track keys of related things so we don't count them multiple times
                    if (link.fromNode == thing) {
                        rConnectedThingKeys.push(link.toNode.data.key);
                    } else if (link.toNode == thing) {
                        rConnectedThingKeys.push(link.fromNode.data.key);
                    }
                }
            }
            a.relatedTo = _.uniq(rConnectedThingKeys).length;

            // isRelationship
            a.isRelationship = thing.isLinkLabel;
        } else if (part && part instanceof go.Link) {
            var rel = part;

            // thing names
            a.rFromThingName = rel.fromNode.data.text;
            a.rToThingName = rel.toNode.data.text;

            // is R thing
            a.isRThing = rel.isLabeledLink;

            // is R system
            a.isRSystem = rel.isLabeledLink && countGroups(rel.labelNodes.first()) > 0;

            // is R point
            a.isRPoint = rel.isLabeledLink && isPoint(rel.labelNodes.first());

            // is R view
            a.isRView = rel.isLabeledLink && isView(rel.labelNodes.first());
        }
    };

    // returns either the containingGroup or the rThingContainingGroup, whichever is non-null
    function getContainingGroup(group) {
        return group.containingGroup || getRThingContainingGroup(group);
    }

    // if group is an R-thing between two sibling parts of a whole, returns the whole; else returns null
    function getRThingContainingGroup(group) {
        if (group.isLinkLabel) {
            var fromParent = group.labeledLink.fromNode.containingGroup;
            var toParent = group.labeledLink.toNode.containingGroup;
            if (fromParent !== null && toParent !== null && fromParent == toParent) {
                return fromParent;
            }
        }
        return null;
    }

    // counts the member parts of the group that are groups, recursively (not including the group itself)
    function countGroups(group) {
        var count = 0;
        var it = getMemberGroups(group).iterator;
        while (it.next()) {
            var part = it.value;
            count += 1 + countGroups(part);
        }

        return count;
    }

    // returns the collection of groups that are either a memberPart of this group, or an R-thing between sibling memberParts
    function getMemberGroups(group) {
        var members = new go.List();
        var it = group.memberParts;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group) {
                members.add(part);
                var rthing = getRThingToSibling(part); // NB: should not get duplication here, as this checks for r-things in only one direction
                if (rthing) {
                    members.add(rthing);
                }
            }
        }
        return members;
    }

    // if the group is linked by an R-thing to a sibling (with the group as the fromNode), returns the R-thing; else returns null
    function getRThingToSibling(group) {
        var it = group.findLinksOutOf();
        while (it.next()) {
            var link = it.value;
            if (link.labelNodes.count > 0 && link.toNode.containingGroup == group.containingGroup) {
                return link.labelNodes.first();
            }
        }
        return null;
    }

    function isPoint(group) {
        var it = group.findLinksOutOf();
        while (it.next()) {
            var link = it.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    }

    function isView(group) {
        var it = group.findLinksInto();
        while (it.next()) {
            var link = it.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    }
};

},{}],5:[function(require,module,exports){
// functions handling attachments

'use strict';

SandbankEditor.Attachments = function ($scope, $http, $resource, map) {

    var self = this;

    this.selectedThing = null;
    this.attachments = null;

    this.attachmentTypes = [{ name: 'note', labelSingular: 'Note', labelPlural: 'Notes' }, { name: 'link', labelSingular: 'Web Link', labelPlural: 'Web Links' }, { name: 'task', labelSingular: 'Task', labelPlural: 'Tasks' }, { name: 'map', labelSingular: 'Linked MetaMap', labelPlural: 'Linked MetaMaps' }
    //        {name: 'doc', labelSingular: 'Document', labelPlural: 'Documents'}  // limit overall storage space OR simpler rules?
    // limit file types - pdf, jpg, gif, png, office?...  whitelist vs. blacklist
    ];

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.getUi().currentTabIs(map.getUi().TAB_ID_ATTACHMENTS)) {
                self.stopEditingAll();
                self.saveAttachments();
                self.loadSelectedThingAttachments();
            }
        }
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.getUi().TAB_ID_ATTACHMENTS) {
            // opening tab
            self.loadSelectedThingAttachments();
        }
        if (oldValue == map.getUi().TAB_ID_ATTACHMENTS) {
            // closing tab
            self.saveAttachments();
        }
    };

    this.loadSelectedThingAttachments = function () {
        $scope.safeApply(function () {
            if (map.thingSelected()) {
                self.selectedThing = map.getUniqueThingSelected();
                self.attachments = self.selectedThing.data.attachments;
                if (self.attachments === undefined) {
                    self.attachments = [];
                }
            }
        });
    };

    // set all attachments to editing = false
    this.stopEditingAll = function () {
        $scope.safeApply(function () {
            if (self.attachments) {
                _.each(self.attachments, function (att) {
                    att.editing = false;
                });
            }
        });
    };

    this.editingAnItem = function () {
        return self.attachments && _.findWhere(self.attachments, { editing: true }) !== undefined;
    };

    // set all other attachments to editing = false
    this.startEditing = function (attachment) {
        $scope.safeApply(function () {
            self.stopEditingAll();
            attachment.editing = true;
        });
    };

    this.saveItem = function (attachment) {
        $scope.safeApply(function () {
            attachment.editing = false;
            self.saveAttachments();
        });
    };

    this.saveAttachments = function () {
        $scope.safeApply(function () {
            console.log('saveAttachments, selected: ' + self.selectedThing);
            if (self.selectedThing) {
                map.getDiagram().model.setDataProperty(self.selectedThing.data, 'attachments', self.attachments);
                self.selectedThing.updateTargetBindings();
            }
            map.getAutosave().saveNow('edit_attachments');
        });
    };

    this.listAttachments = function (type) {
        var atts = _.where(self.attachments, { type: type });
        return atts;
    };

    this.addAttachment = function (type) {
        var item = { type: type, editing: true };
        if (type == 'note') {
            self.attachments.push(_.extend(item, { text: '', url: '' }));
        } else if (type == 'link') {
            self.attachments.push(_.extend(item, { label: '', url: '' }));
        } else if (type == 'task') {
            self.attachments.push(_.extend(item, { text: '' }));
        } else if (type == 'doc') {
            self.attachments.push(_.extend(item, { name: '' }));
        } else if (type == 'map') {
            self.attachments.push(_.extend(item, { mapRef: { id: 0, name: '' } }));
        }
    };

    this.isValid = function (attachment) {
        if (attachment.type == 'link') {
            return attachment.label && attachment.url && attachment.label.trim() !== '' && attachment.url.trim() !== '';
        } else if (attachment.type == 'note') {
            return attachment.text && attachment.text.trim() !== '';
        } else if (attachment.type == 'task') {
            return attachment.text && attachment.text.trim() !== '';
        } else if (attachment.type == 'doc') {
            return attachment.name && attachment.name.trim() !== '';
        } else if (attachment.type == 'map') {
            return attachment.mapRef && attachment.mapRef.id !== null && attachment.mapRef.id !== undefined;
        }
    };

    this.deleteAttachment = function (att) {
        var typeLabel = _.findWhere(self.attachmentTypes, { name: att.type }).labelSingular;
        if (confirm('Delete ' + typeLabel + '?')) {
            var i = _.indexOf(self.attachments, att);
            self.attachments.splice(i, 1);
        }
    };

    // query server for maps containing the given text in the map name
    this.getOtherMaps = function (viewValue) {
        // NB: this URL is constructed to match the one generated by the search form on the maps page...
        var url = '/maps/visible_maps.json?utf8=%E2%9C%93&q%5Bname_cont%5D=' + viewValue;
        return $http.get(url).then(function (response) {
            return response.data.maps;
        });
    };

    this.otherMapSelected = function (viewValue, modelValue) {
        console.log('otherMapSelected, viewValue: ' + viewValue.id + ', modelValue: ' + modelValue);
    };

    this.formatOtherMap = function (model) {
        return model ? model.name : '';
    };
};

},{}],6:[function(require,module,exports){
// functions handling editor autosave function

'use strict';

SandbankEditor.Autosave = function ($scope, $http, map) {

    var self = this;

    var changeTypes = [];

    this.saveOnModelChanged = true;

    // do a save next time the set interval passes with no save requests
    this.save = function (changeType) {
        changeTypes.push(changeType);
        delayedAutosave();
    };

    // do a save right now
    this.saveNow = function (changeType) {
        changeTypes.push(changeType);
        autosave();
    };

    // don't let autosave be triggered more than every N milliseconds...
    var delayedAutosave = _.debounce(autosave, 2000);

    // compile the current list of change type descriptions, process them
    // to remove duplicates, and save the current data
    function autosave() {
        // stop right here if we're in the sandbox and/or we don't have edit permissions
        if ($scope.sandbox || !$scope.canEdit) {
            return;
        }

        if (!changeTypes.length) {
            console.log('autosave: nothing to save!'); // shouldn't happen
            return;
        }

        // de-dupe the list of change types
        var changeList = _.uniq(changeTypes);
        //console.log('changeList: ' + changeList);
        // don't show move events unless that's all we have
        var changeListWithoutMoves = _.without(changeList, 'move');
        if (changeListWithoutMoves.length > 0) {
            changeList = changeListWithoutMoves;
        }
        //console.log('changeList without moves: ' + changeList);
        // get descriptions
        var descriptionList = _.map(changeList, function (ct) {
            return _.result(changeDescriptions, ct);
        });

        //console.log('autosave, changeList: ' + changeList + ', descriptionList: ' + descriptionList);
        var postData = {
            'name': $scope.mapTitle,
            'data': map.getDiagram().model.toJson(),
            'state_data': JSON.stringify(map.getUi().getStateData()),
            'editor_options': JSON.stringify(map.getUi().getMapEditorOptions()),
            'presenter_slides': map.getPresenter().getSlideCount(),
            'activity_slides': map.getPresenter().getActivitySlideCount(),
            'change_type': changeList.join(';'),
            'change_description': descriptionList.join('; '),
            'thumbnail_png': map.getPresenter().getMapThumbnail()
        };
        var url = $scope.mapUrl + '.json';

        $scope.updateEditStatus($scope.SAVING);

        changeTypes = [];
        $scope.updateEditStatus($scope.SAVE_OK);
        // load returned data for analytics, points, badges, versions
        // $scope.map.loadMapExtraData(response.data.map);
    }

    // -------------- handle model changes - trigger autosave ------------------

    var changeDescriptions = {
        move: 'Moved Objects',
        undo_redo: 'Performed Undo/Redo',
        edit_title: 'Edited MetaMap Title',
        edit_description: 'Edited MetaMap Description',
        edit_usertags: 'Edit MetaMap Tags',
        edit_d: 'Edited Distinctions',
        edit_s: 'Edited Systems',
        edit_r: 'Edited Relationships',
        edit_p: 'Edited Perspectives',
        add_thing: 'Added Ideas',
        rename_thing: 'Renamed Ideas',
        delete_thing: 'Deleted Ideas',
        edit_attachments: 'Edited Attachments',
        edit_presenter: 'Edited Presenter Slides',
        edit_generator: 'Inserted Ideas from ThinkQuery',
        edit_standards: 'Edited Links to Common Core Standards'
    };

    // e is a go.ChangedEvent
    this.modelChanged = function (e) {

        if (!self.saveOnModelChanged) {
            return;
        }

        var changeType = null;
        var changeDescription = null;

        if (e.propertyName == 'type') {
            // change R type
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,n,1,o,2,A,3,r,4,r,5,o,6,w,7,s] , newParam: null, newValue: [0,t,1,o] , propertyName: type
            changeType = 'edit_r';
            changeDescription = 'Changed Relationship Types';
        } else if (e.propertyName == 'layout') {
            // change system layout
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,l,1,e,2,f,3,t] , newParam: null, newValue: [0,r,1,i,2,g,3,h,4,t] , propertyName: layout
            changeType = 'edit_s';
        } else if (e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'fromPort', 'R')) {
            // add link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,P] , propertyName: linkDataArray
            // modelChange: linkToPortId, change: ChangedEvent.Property, oldParam: null, oldValue: [0,P] , newParam: null, newValue: [0,R] , propertyName: toPort
            changeType = 'edit_r';
        } else if (e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'fromPort', 'R')) {
            // delete link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,R] , newParam: null, newValue: [] , propertyName: linkDataArray
            changeType = 'edit_r';
        } else if (e.propertyName == 'linkDataArray') {
            // change P/D links
            // add P link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 2, newValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P] , propertyName: linkDataArray
            // modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
            // delete P link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 2, oldValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P,category,P] , newParam: null, newValue: [] , propertyName: linkDataArray
            // add D link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , propertyName: linkDataArray
            // remove D link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , newParam: null, newValue: [] , propertyName: linkDataArray

            if (e.newValue && e.newValue.category == 'P' || e.oldValue && e.oldValue.category == 'P') {
                changeType = 'edit_p';
            } else if (e.newValue && e.newValue.category == 'D' || e.oldValue && e.oldValue.category == 'D') {
                changeType = 'edit_d';
            }
        } else if (e.propertyName == 'category') {
            // add P link
            // modelChanged, modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
            changeType = 'edit_p';
        } else if (e.propertyName == 'group') {
            // drag into S
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
            // reorder part
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
            // drag to D
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group

            changeType = 'edit_s';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'isGroup', true)) {
            // add thing
            // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7] , propertyName: nodeDataArray
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,2,1,2,2,8,3,.,4,5,5,6,6,2,7,5,8, ,9,-,10,1,11,4,12,9,13,.,14,6,15,8,16,7,17,5] , propertyName: loc
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: children
            changeType = 'add_thing';
        } else if (e.propertyName == 'text') {
            // move thing
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,b,1,b,2,b,3,b,4,b] , newParam: null, newValue: [0,a,1,a,2,a,3,a,4,a] , propertyName: text
            changeType = 'rename_thing';
            changeDescription = 'Renamed Ideas';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'isGroup', true)) {
            // delete thing
            // modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7,loc,228.5625 -149.6875,children,0,attachments,] , newParam: null, newValue: [] , propertyName: nodeDataArray
            changeType = 'delete_thing';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'isGroup', false)) {
            // add slide
            // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877] , propertyName: nodeDataArray
            changeType = 'edit_presenter';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'isGroup', false)) {
            // delete slide
            //modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877,$$hashKey,0XN] , newParam: null, newValue: [] , propertyName: nodeDataArray
            changeType = 'edit_presenter';
        } else if (e.propertyName == 'loc' || e.propertyName == 'width' || e.propertyName == 'height') {
            // move thing or resize slide
            // move slide
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,8] , newParam: null, newValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,7] , propertyName: loc
            // resize slide
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: height
            // move thing
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,4,1,7,2,9,3,.,4,8,5,7,6,5,7, ,8,-,9,1,10,2,11,2,12,.,13,8,14,7,15,5] , newParam: null, newValue: [0,5,1,4,2,0,3,.,4,3,5,1,6,2,7,5,8, ,9,-,10,1,11,2,12,1,13,.,14,1,15,8,16,7,17,5] ,            
            changeType = 'move';
        } else if (e.propertyName == 'level' || e.propertyName == 'children') {
            // these attributes are updated as a result of other actions; ignore
            changeType = null;
        } else if (e.propertyName == 'attachments') {
            // edited attachments
            changeType = 'edit_attachments';
        } else if (e.propertyName == 'sExpanded' || e.propertyName == 'pExpanded') {
            // ignore expand/collapse
            changeType = 'move';
        } else if (e.propertyName == 'FinishedUndo' || e.propertyName == 'FinishedRedo') {
            changeType = 'undo_redo';
            map.refresh();
        } else if (e.change != go.ChangedEvent.Transaction) {
            console.log('modelChanged, modelChange: ' + e.modelChange + ', change: ' + e.change + ', oldParam: ' + e.oldParam + ', oldValue: [' + _.pairs(e.oldValue) + '] ' + ', newParam: ' + e.newParam + ', newValue: [' + _.pairs(e.newValue) + '] ' + ', propertyName: ' + e.propertyName);
        }

        if (changeType) {
            map.getAnalytics().updateContextualAnalytics();
            //console.log('calling delayedAutosave, changeType: ' + changeType);
            self.save(changeType);
        }
    };

    // convenience function for checking properties
    function propertyEquals(obj, key, value) {
        return obj !== null && _.has(obj, key) && _.result(obj, key) == value;
    }
};

},{}],7:[function(require,module,exports){
// main controller class

'use strict';

window.SandbankEditor = {};

window.MapEditorCtrl = function ($rootScope, $scope, $http, $resource, $timeout, $modal, $log) {

    $scope.map = new SandbankEditor.Map($scope, $http, $resource, $timeout, $modal, $log);

    // window.mapData is set in _form view
    var metadata = window.mapData.map.metadata;
    $scope.sandbox = metadata.sandbox;
    $scope.mapData = window.mapData.map.data; // this gets overwritten by load() unless we are in the sandbox with no map ID
    $scope.mapId = metadata.id;
    $scope.mapTitle = metadata.name;
    $scope.mapUserTags = metadata.userTags;
    $scope.mapUrl = metadata.url;
    $scope.canEdit = metadata.canEdit;
    $scope.updatedAt = metadata.updatedAt;
    $scope.updatedBy = metadata.updatedBy; // ID
    $scope.updatedByName = metadata.updatedByName;

    $scope.editingTitle = false;

    $scope.showImageExport = false;
    $scope.imageExportLoading = true;

    $scope.currentTab = null;

    // override parent scope (see user.js) since we're editing a map
    $scope.ccsTagging.mapId = $scope.mapId;

    $scope.maybeStartEditingTitle = function () {
        if ($scope.canEdit) {
            $scope.editingTitle = true;
        }
    };

    $scope.doneEditingTitle = function () {
        //console.log('doneEditingTitle');
        $scope.editingTitle = false;
        $scope.map.getAutosave().save('edit_title');
    };

    $scope.editingTitleKeypress = function (e) {
        if (e.which == 13) {
            $scope.doneEditingTitle();
        }
    };

    $scope.print = function () {
        window.print();
    };

    // ------------ save sandbox map (sign up/sign in) ---------------

    $scope.saveSandboxMap = function () {
        var modalInstance = $modal.open({
            templateUrl: 'template_sandbox_save_modal.html', // see views/users/_template_sandbox_save_modal
            backdrop: 'static',
            controller: sandboxSaveModalCtrl,
            windowClass: 'sandbox-save-modal',
            resolve: {
                outerScope: function outerScope() {
                    return $scope;
                },
                map: function map() {
                    return $scope.map;
                },
                userProfile: function userProfile() {
                    return $scope.userProfile;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    var sandboxSaveModalCtrl = function sandboxSaveModalCtrl($scope, $modalInstance, outerScope, map, userProfile) {

        $scope.map = map;
        $scope.userProfile = userProfile;

        $scope.mapData = map.getDiagram().model.toJson();
        $scope.thumbnailPng = map.getPresenter().getMapThumbnail();

        function getDefaultLoginData() {
            return {
                email: '',
                password: ''
            };
        }

        // this structure is used to store the form data, as well as the validation errors returned from the server...
        function getDefaultSignupData() {
            return {
                email: '',
                first_name: '',
                last_name: '',
                password: '',
                password_confirmation: ''
            };
        }

        $scope.loginData = getDefaultLoginData();
        $scope.loginError = '';

        $scope.signupData = getDefaultSignupData();
        $scope.signupErrors = getDefaultSignupData();

        $scope.doLogin = function () {
            $scope.loginErrors = getDefaultLoginData(); // reset errors
            $http.post('/sign_in.json', {
                user: $scope.loginData
            }).then(function (response) {
                // data is {id:XX, ...}
                outerScope.setUserId(response.data.id);
                outerScope.loadUserProfile(function () {
                    $scope.userProfile = outerScope.userProfile;
                });
            }, function (response) {
                // data is {"error": "Invalid email or password"}
                $scope.loginError = response.data.error;
            });
        };

        $scope.doSignup = function () {
            $scope.signupErrors = getDefaultSignupData(); // reset errors
            $http.post('/users.json', {
                user: $scope.signupData
            }).then(function (response) {
                // data is new user ID
                outerScope.setUserId(response.data);
                outerScope.loadUserProfile(function () {
                    $scope.userProfile = outerScope.userProfile;
                });
            }, function (response) {
                // data is e.g. {"first_name":["can't be blank"], ...}
                _.each(_.keys(response.data), function (key) {
                    $scope.signupErrors[key] = response.data[key].join('; ');
                });
            });
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    sandboxSaveModalCtrl.$inject = ['$scope', '$modalInstance', 'outerScope', 'map', 'userProfile'];

    // ------------- edit status message for header bar ------------------

    $scope.editStatus = '';

    $scope.LAST_UPDATED = '';
    $scope.READ_ONLY = 'View only';
    $scope.SAVING = 'Saving...';
    $scope.SAVE_OK = 'All changes saved';
    $scope.SAVE_FAILED = 'Changes could not be saved';

    $scope.updateEditStatus = function (s) {
        //console.log('updateEditStatus: ' + s);
        $scope.editStatus = s;
        if (s == $scope.SAVE_FAILED) {
            alert('Changes could not be saved - please check your network connection.');
        } else if (s == $scope.LAST_UPDATED) {
            var time = moment($scope.updatedAt).fromNow();
            var by = '';
            if ($scope.updatedBy == $scope.userId) {
                by = 'by me';
            } else if ($scope.updatedByName) {
                by = 'by ' + $scope.updatedByName;
            }
            // TODO: show 'by me' only for editable shared maps?

            $scope.editStatus = 'Last updated ' + time + ' ' + by;
        }

        // Last edit was XX ago by YY
    };

    // -------------------------------------------------------------

    function init() {
        $scope.safeApply(function () {
            $scope.map.init();

            if (!$scope.sandbox) {
                // overview diagram
                var overview = go.GraphObject.make(go.Overview, 'overview-diagram', {
                    observed: $scope.map.getDiagram(),
                    contentAlignment: go.Spot.Center
                });
                var outline = overview.box.elements.first();
                outline.stroke = '#333';
            }

            //if ($scope.mapUrl) {
            $scope.map.load();
            //} else {
            //    $scope.map.loadForSandbox();
            //}

            addBehaviors();
            handleNavigation();
            handleBackspace();
        });
    }

    // misc. UI behaviors for tooltips, popups etc.
    // TODO: figure out which of these need to be reapplied after dynamic data changes (e.g. LessonBook popovers)
    function addBehaviors() {

        // NOTE: we have to use regular bootstrap tooltips for toolbar buttons (instead of ng-bootstrap ones)
        // so we can turn them off for mobile. We also put the tooltips on wrappers rather than on the actual
        // buttons, so we can avoid the issue of stuck tooltips if a button gets disabled while the tooltip is showing.

        if (!$scope.isTouchDevice()) {
            // $('.tooltip-wrapper').tooltip({
            //     placement: 'top',
            //     container: 'body'
            // });

            // $('.dropdown-menu .btn').tooltip({
            //     placement: 'left',
            //     container: 'body'
            // }); // for layout options

            $('header, #map-title').hover(function () {
                $('body.presenter-playing').addClass('hide-header');
            }, function () {
                $('body.presenter-playing').removeClass('hide-header');
            });
        }
    }

    function handleNavigation() {
        // cross-browser tweaks:
        try {
            // http://www.opera.com/support/kb/view/827/
            opera.setOverrideHistoryNavigationMode('compatible');
            history.navigationMode = 'compatible';
        } catch (e) {}

        // install before-unload handler:

        function exitMessage() {
            return 'Navigating away from your Map will cause any unsaved changes to be lost ' + '(any changes you make are automatically saved, but it takes a couple of seconds).';
        }

        //        $(window).bind('beforeunload', exitMessage);

        // prevent exit prompt when the user deliberately navigates away:

        $('#header-right a').click(function () {
            $(window).unbind('beforeunload', exitMessage);
        });
    }

    function handleBackspace() {
        var BACKSPACE = 8;

        $(document).on('keydown', function (event) {
            if (event.keyCode === BACKSPACE) {
                if (!$('body :focus').is(':input')) {
                    // prevent accidental backspace when no input has focus:
                    event.preventDefault();
                    event.stopPropagation();
                }
            }
        });
    }

    init();
};

window.MapEditorCtrl.$inject = ['$rootScope', '$scope', '$http', '$resource', '$timeout', '$modal', '$log'];

// no biggie.

},{}],8:[function(require,module,exports){
'use strict';

window.SandbankEditorOptions = {};

SandbankEditorOptions = function ($scope, $http, $resource, $modal, $log) {

    this.openModal = function (_options, _onSaveDefaults, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_editor_options_modal.html', // see views/maps/_template_editor_options_modal
            backdrop: 'static',
            controller: optionsModalCtrl,
            windowClass: 'options-modal',
            resolve: {
                options: function options() {
                    return _options;
                },
                onSaveDefaults: function onSaveDefaults() {
                    return _onSaveDefaults;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for options modal ---------------------

    var optionsModalCtrl = function optionsModalCtrl($scope, $modalInstance, options, onSaveDefaults, onUpdate) {

        $scope.options = options;

        $scope.setDefaults = {
            value: false
        };

        $scope.ok = function () {
            onUpdate($scope.options);
            if ($scope.setDefaults.value) {
                onSaveDefaults($scope.options);
            }
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    optionsModalCtrl.$inject = ['$scope', '$modalInstance', 'options', 'onSaveDefaults', 'onUpdate'];
};

},{}],9:[function(require,module,exports){
// functions for the generator (aka ThinkQuery)

'use strict';

var GeneratorCtrl = function GeneratorCtrl($scope) {

    var map = $scope.map;
    var diagram = $scope.map.getDiagram();

    $scope.concept1 = '';
    $scope.concept2 = '';

    $scope.echoConcept1 = function () {
        return $scope.concept1 || '...';
    };

    $scope.echoConcept2 = function () {
        return $scope.concept2 || '...';
    };

    $scope.swapConcepts = function () {
        var tmp = $scope.concept1;
        $scope.concept1 = $scope.concept2;
        $scope.concept2 = tmp;
        $scope.safeApply();
    };

    $scope.mapIt = function (question) {
        startSpinner();
        diagram = map.getDiagram();
        map.getAutosave().saveOnModelChanged = false;

        if ($scope.sandbox) {
            diagram.clear();
        }

        // figure out location for inserted stuff
        var db = map.computeMapBounds();
        var x = db.x + db.width + 200;
        var y = db.y;
        if (isNaN(x) || isNaN(y)) {
            x = y = 0;
        }
        //console.log('x, y: ' + x + ', ' + y);

        // insert the stuff and deselect it
        question(x, y);
        diagram.clearSelection();

        diagram.updateAllTargetBindings();
        diagram.layoutDiagram(true);

        map.getUi().resetZoom();

        map.getAutosave().saveOnModelChanged = true;
        map.getAutosave().save('edit_generator');
        stopSpinner();
    };

    $scope.selectedQuestion = null;

    $scope.selectQuestion = function (question) {
        $scope.selectedQuestion = question;
        if ($scope.sandbox) {
            $scope.mapIt(question);
        }
    };

    $scope.surpriseMe = function () {
        var keys = _.keys($scope.queries);
        var i = _.random(0, keys.length - 1);
        var question = $scope.queries[keys[i]];
        $scope.selectedQuestion = question;
        $scope.mapIt(question);

        $('#questions').animate({ scrollTop: i * 30 }, 1000);
    };

    // ---------- functions for creating each of the structures - see views/maps/generator_tab -----------

    $scope.queries = {

        WHAT_IS: function WHAT_IS(x, y) {
            // 1
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
        },

        WHAT_IS_NOT: function WHAT_IS_NOT(x, y) {
            // 2
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is not?');
            map.createChild(thing1, 'is not?');
            map.createChild(thing1, 'is not?');
        },

        DISTINGUISH_BETWEEN: function DISTINGUISH_BETWEEN(x, y) {
            // 3
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');

            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            diagram.model.setDataProperty(thing2.data, 'dflag', true);
            map.createChild(thing2, 'is?');
            map.createChild(thing2, 'is?');
            map.createChild(thing2, 'is?');
        },

        COMPARE_CONTRAST: function COMPARE_CONTRAST(x, y) {
            // 4
            var thing1 = map.createThing(x - 150, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 150, y, $scope.echoConcept2());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            diagram.model.setDataProperty(thing2.data, 'dflag', true);
            var rthing1 = map.createRLinkWithRThing(thing1, thing2, 'contrast');
            var rthing2 = map.createRLinkWithRThing(thing1, thing2, 'compare');
            diagram.model.setDataProperty(rthing1.labeledLink.data, 'type', 'toFrom');
            diagram.model.setDataProperty(rthing2.labeledLink.data, 'type', 'toFrom');
        },

        PARTS_OF: function PARTS_OF(x, y) {
            // 5
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            map.createChild(thing1, 'part?');
            map.createChild(thing1, 'part?');
            map.createChild(thing1, 'part?');
        },

        PART_OF: function PART_OF(x, y) {
            // 6
            var thing1 = map.createThing(x, y, 'part of?');
            map.createChild(thing1, $scope.echoConcept1());
        },

        PARTS_HAVE_PARTS: function PARTS_HAVE_PARTS(x, y) {
            // 7
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part?');
            map.createChild(child1, 'part?');
            map.createChild(child1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            map.createChild(child2, 'part?');
            map.createChild(child2, 'part?');
        },

        R_PARTS: function R_PARTS(x, y) {
            // 8
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            var rthing = map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createChild(rthing, 'part?');
            map.createChild(rthing, 'part?');
        },

        P_PARTS: function P_PARTS(x, y) {
            // 9
            var thing1 = map.createThing(x + 300, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var child2 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var child3 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var thing2 = map.createThing(x, y, $scope.echoConcept2());
            map.createPLink(thing2, thing1);
            map.createPLink(thing2, child1);
            map.createPLink(thing2, child2);
            map.createPLink(thing2, child3);
        },

        RS_TO_AND_BY: function RS_TO_AND_BY(x, y) {
            // 10
            var related1 = map.createThing(x, y, 'related idea?');
            var related2 = map.createThing(x + 300, y + 50, 'related idea?');
            var related3 = map.createThing(x + 50, y + 300, 'related idea?');
            var thing = map.createThing(x + 130, y + 130, $scope.echoConcept1());
            map.createRLink(related1, thing);
            map.createRLink(related2, thing);
            map.createRLink(related3, thing);

            var thing1 = map.createThing(x + 500, y + 150, 'idea?');
            var thing2 = map.createThing(x + 750, y + 150, 'idea?');
            map.createRLinkWithRThing(thing1, thing2, $scope.echoConcept1());
        },

        WHAT_IS_R: function WHAT_IS_R(x, y) {
            // 11
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            map.createRLinkWithRThing(thing1, thing2, 'idea?');
        },

        PART_RS_ARE: function PART_RS_ARE(x, y) {
            // 12
            var thing1 = map.createThing(x + 30, y, $scope.echoConcept1(), 'freehand');
            var child1 = map.createChild(thing1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            var child3 = map.createChild(thing1, 'part?');
            diagram.model.setDataProperty(child1.data, 'loc', '-20 110');
            diagram.model.setDataProperty(child2.data, 'loc', '80 110');
            diagram.model.setDataProperty(child3.data, 'loc', '30 190');
            map.createRLinkWithRThing(child1, child2, 'relationship?');
            map.createRLinkWithRThing(child2, child3, 'relationship?');
            map.createRLinkWithRThing(child3, child1, 'relationship?');
        },

        PART_RS_EXIST: function PART_RS_EXIST(x, y) {
            // 13
            var thing1 = map.createThing(x, y, $scope.echoConcept1(), 'right');
            var child11 = map.createChild(thing1, 'part?');
            var child12 = map.createChild(thing1, 'part?');
            var child13 = map.createChild(thing1, 'part?');
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            var child21 = map.createChild(thing2, 'part?');
            var child22 = map.createChild(thing2, 'part?');
            var child23 = map.createChild(thing2, 'part?');
            map.createRLink(thing1, thing2);
            map.createRLinkWithRThing(child11, child21, 'relationship?');
            map.createRLinkWithRThing(child12, child22, 'relationship?');
            map.createRLinkWithRThing(child13, child23, 'relationship?');
        },

        RS_WITH_OTHERS: function RS_WITH_OTHERS(x, y) {
            // 14
            var thing1 = map.createThing(x - 200, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 200, y, $scope.echoConcept2());
            var thing3 = map.createThing(x - 200, y + 200, 'another thing');
            var thing4 = map.createThing(x + 200, y + 200, 'another thing');
            map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createRLinkWithRThing(thing1, thing3, 'relationship?');
            map.createRLinkWithRThing(thing1, thing4, 'relationship?');
            map.createRLinkWithRThing(thing2, thing4, 'relationship?');
            map.createRLinkWithRThing(thing3, thing4, 'relationship?');
        },

        PARTS_OF_P: function PARTS_OF_P(x, y) {
            // 15
            var thing1 = map.createThing(x - 100, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            var child3 = map.createChild(thing1, 'part?');
            var thing2 = map.createThing(x + 100, y, $scope.echoConcept2());
            map.createPLink(thing1, thing2);
        },

        POINT_FOR: function POINT_FOR(x, y) {
            // 16
            var thing = map.createThing(x, y, 'new perspective');
            var thing1 = map.createThing(x - 150, y + 150, $scope.echoConcept1());
            var thing2 = map.createThing(x + 150, y + 150, $scope.echoConcept2());
            var rthing = map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createPLink(thing, rthing);
        },

        HAS_MULTIPLE_PS: function HAS_MULTIPLE_PS(x, y) {
            // 17
            var point1 = map.createThing(x, y + 50, 'viewpoint?');
            var point2 = map.createThing(x + 250, y, 'viewpoint?');
            var point3 = map.createThing(x + 500, y + 50, 'viewpoint?');
            var view = map.createThing(x + 250, y + 250, $scope.echoConcept1());
            map.createPLink(point1, view);
            map.createPLink(point2, view);
            map.createPLink(point3, view);
        },

        PARTS_FROM_MULTIPLE_PS: function PARTS_FROM_MULTIPLE_PS(x, y) {
            // 18
            var point1 = map.createThing(x - 100, y, 'viewpoint?');
            var point2 = map.createThing(x - 100, y + 125, 'viewpoint?');
            var point3 = map.createThing(x - 100, y + 250, 'viewpoint?');
            var thing = map.createThing(x + 150, y + 25, $scope.echoConcept1());
            var child1 = map.createChild(thing, 'part seen from viewpoint?');
            var child2 = map.createChild(thing, 'part seen from viewpoint?');
            var child3 = map.createChild(thing, 'part seen from viewpoint?');
            map.createPLink(point1, child1);
            map.createPLink(point1, child2);
            map.createPLink(point2, child2);
            map.createPLink(point3, child3);
        },

        WHAT_ABOUT: function WHAT_ABOUT(x, y) {
            // 19
            $scope.queries.WHAT_IS(x, y);
            $scope.queries.PARTS_OF(x + 300, y);
            $scope.queries.PARTS_FROM_MULTIPLE_PS(x + 700, y);
            $scope.queries.RS_TO_AND_BY(x, y + 400);
        }
    }; // queries
};

GeneratorCtrl.$inject = ['$scope'];

SandbankEditor.Generator = function ($scope, map) {

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (oldValue == map.getUi().TAB_ID_GENERATOR) {
            // closing tab
            map.setEditingBlocked(false);
        } else if (newValue == map.getUi().TAB_ID_GENERATOR) {
            // opening tab
            map.setEditingBlocked(true);
        }
    };

    // these get filtered out in LessonBook
    this.getPlaceholderIdeaNames = function () {
        return ['is?', 'is not?', 'part?', 'viewpoint?', 'related idea?', 'idea?', 'part seen from viewpoint?', 'contrast?', 'comparison?', 'relationship?'];
    };
};

// NB: generator is opened on load of empty map; see map.js:load()

},{}],10:[function(require,module,exports){
// layouts used in the editor, for the diagram or individual Groups, plus layout-related functions

'use strict';

SandbankEditor.Layouts = function ($scope, map) {

    var self = this;

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        var diagram = map.getDiagram();
        if (eventName == 'InitialLayoutCompleted') {
            diagram.updateAllTargetBindings();
            diagram.layoutDiagram(true);
        } else if (eventName == 'SelectionMoved') {
            updateSelectedPartLocationData(e);
            map.getDiagram().layoutDiagram(true);
        } else if (eventName == 'SelectionDeleted') {
            diagram.updateAllTargetBindings();
        } else if (eventName == 'PartCreated') {} else if (eventName == 'PartResized') {
            setResizedPartDimensionData(e);
        } else if (eventName == 'LinkDrawn') {
            adjustLinkLayout(e.subject);
        } else if (eventName == 'LinkRelinked') {
            adjustLinkLayout(e.subject);
        }
    };

    // ------------ handle location/size attributes for nodes ---------------

    // only update w/h for slides, as all other node types have fixed dimensions according to the templates
    function setResizedPartDimensionData(e) {
        var diagram = map.getDiagram();
        var node = e.subject;
        if (node && node.category == 'slide') {
            //console.log('PartResized: ' + node.part.actualBounds);
            diagram.model.setDataProperty(node.data, 'width', node.part.actualBounds.width);
            diagram.model.setDataProperty(node.data, 'height', node.part.actualBounds.height);
        }
    }

    // set the 'loc' attribute for a new top-level node (created by double-clicking), to support freehand layout
    this.setNewPartLocationData = function (e) {
        var node = e.subject;
        if (node && node.part) {
            if (node instanceof go.Group) {
                map.getDiagram().model.setDataProperty(node.data, 'loc', node.part.location.x + ' ' + node.part.location.y);
            }
        }
    };

    // updates the 'loc' attribute for each selected part, to support freehand layout (does not apply to slides)
    function updateSelectedPartLocationData(e) {
        var diagram = map.getDiagram();
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Group) {
                // thing
                var part = it.value;
                var parentX = 0;
                var parentY = 0;
                if (part.containingGroup) {
                    parentX = part.containingGroup.location.x;
                    parentY = part.containingGroup.location.y;
                }
                console.log('moving group, subject: ' + e.subject + ', part: ' + part + ', height: ' + part.part.desiredSize.height + ', location: ' + part.part.location);
                if (!isNaN(part.location.x)) {
                    diagram.model.setDataProperty(part.data, 'loc', part.location.x - parentX + ' ' + (part.location.y - parentY));
                }
            }
        }
    }

    // ----------- changing layouts of things and their descendants ----------------

    this.fromAndToNodesAreVisible = function (link) {
        return link.fromNode && link.toNode && !self.hasCollapsedAncestor(link.fromNode) && !self.hasCollapsedAncestor(link.toNode);
    };

    this.labelNodeIsVisible = function (link) {
        return link.labelNodes.count && link.labelNodes.first().visible;
    };

    this.hasCollapsedAncestor = function (group) {
        while (true) {
            if (!group.containingGroup) {
                return false;
            } else if (!group.containingGroup.isSubGraphExpanded) {
                return true;
            } else {
                group = group.containingGroup;
            }
        }
    };

    // this.hasLinkLabelAncestor = function(group) {
    //     while (true) {
    //         if (!group.containingGroup) {
    //             return false;
    //         }
    //         else if (group.containingGroup.isLinkLabel) {
    //             return true;
    //         }
    //         else {
    //             group = group.containingGroup;
    //         }
    //     }
    // };

    this.getHighestAncestorWithLayout = function (group, layoutNames) {
        while (true) {
            if (!group.containingGroup) {
                return false;
            } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                return group.containingGroup;
            } else {
                group = group.containingGroup;
            }
        }
    };

    this.areSistersInInventoryLayout = function (group1, group2) {
        return group1.containingGroup == group2.containingGroup && group1.containingGroup && _.contains(['left', 'right'], group1.containingGroup.data.layout);
    };

    this.isNotWithinInventoryLayout = function (group) {
        return !self.isWithinInventoryLayout(group);
    };

    this.isRThingWithinInventoryLayout = function (group) {
        return group.isLinkLabel && self.isWithinInventoryLayout(group);
    };

    this.isWithinInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['left', 'right']);
    };

    this.isWithinLeftInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['left']);
    };

    this.isWithinRightInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['right']);
    };

    this.isWithinFreehandLayout = function (group) {
        return self.isWithinLayout(group, ['freehand']);
    };

    this.isWithinStackedLayout = function (group) {
        return self.isWithinLayout(group, ['stacked']);
    };

    this.isWithinLayout = function (group, layoutNames) {
        while (true) {
            if (!group.containingGroup) {
                //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': false');
                return false;
            } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': true');
                return true;
            } else {
                group = group.containingGroup;
            }
        }
    };

    this.showLeftTextBlock = function (group) {
        return self.isWithinRightInventoryLayout(group) && !self.isWithinStackedLayout(group) && !group.isLinkLabel;
    };

    this.showRightTextBlock = function (group) {
        return self.isWithinLeftInventoryLayout(group) && !self.isWithinStackedLayout(group) && !group.isLinkLabel;
    };

    this.setDescendantLayouts = function (group, layoutName) {
        if (layoutName == 'left' || layoutName == 'right' || layoutName == 'stacked') {
            var it = group.memberParts.iterator;
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group && !part.isLinkLabel) {
                    part.data.layout = layoutName;
                    self.setDescendantLayouts(part, layoutName);
                }
            }
        } else if (layoutName == 'freehand') {}
    };

    this.disableLayoutForSelectedThings = function (layoutName) {
        var it = map.getDiagram().selection.iterator;
        if (!it.count) {
            return true;
        }
        while (it.next()) {
            if (!(it.value instanceof go.Group)) {
                return true;
            } else {
                var group = it.value;
                if (self.isWithinLayout(group, ['left', 'right', 'stacked'])) {
                    return true;
                }
            }
        }
        return false;
    };

    // -------------- scaling functions, etc. ----------------------

    // Computes the level of this group
    this.computeLevel = function (group) {
        //console.log('computeLevel, part: ' + part + ', containingGroup: ' + part.containingGroup);
        if (!(group instanceof go.Group) || group.containingGroup === null) {
            return 0;
        } else {
            return self.computeLevel(group.containingGroup) + 1;
        }
    };

    // gets the basic scaling for thing squares, by level
    function getThingScale(level) {
        return Math.pow(0.45, level); // 1, .45, .2025, .091125, ...
    }

    // this is only used for groups
    this.getScale = function (group, visitedGroupKeys) {
        if (group) {
            // keep track of groups we've visited to avoid infinite recursion
            // TODO: track down exactly how infinite loops are occurring,
            // or IF they still are since map.checkModel was introduced...
            if (visitedGroupKeys && Array.isArray(visitedGroupKeys)) {
                //console.log('visitedGroupKeys: ' + visitedGroupKeys);
                if (_.contains(visitedGroupKeys, group.data.key)) {
                    //console.log('hit already visited key: ' + group.data.key);
                    return 1;
                } else {
                    visitedGroupKeys.push(group.data.key);
                }
            } else {
                visitedGroupKeys = [group.data.key];
            }

            if (group.labeledLink) {
                // R-thing
                var fromScale = self.getScale(group.labeledLink.fromNode, visitedGroupKeys);
                var toScale = self.getScale(group.labeledLink.toNode, visitedGroupKeys);
                //console.log('getScale, fromScale: ' + fromScale + ', toScale: ' + toScale + ', visitedGroupKeys: ' + visitedGroupKeys.join(','));
                return Math.min(fromScale, toScale) * 0.5;
            } else if (group.containingGroup) {
                return self.getScale(group.containingGroup, visitedGroupKeys) * 0.45;
            } else {
                return getThingScale(self.computeLevel(group));
            }
        }
        return 1; // can occur when dragging R to empty space
    };

    // gets the margin to be used in stack layout between this group's children
    function getStackMargin(group) {
        return 10 / 0.45 * self.getScale(group);
    }

    // gets the margin to be used in stack layout between this group's children
    function getInventoryMargin(group) {
        if (self.computeLevel(group) <= 2) {
            return 10 * self.getScale(group);
        } else {
            return 3 * self.getScale(group);
        }
    }

    this.getExternalTextScale = function (group) {
        return 1 - 0.1 * self.computeLevel(group);
    };

    this.getLinkStrokeWidth = function (link) {
        var fromScale = self.getScale(link.fromNode);
        var toScale = self.getScale(link.toNode);
        return (link.isSelected ? 4 : 2) * Math.min(fromScale, toScale); // 2, .9, ...
    };

    // scale arrowheads based on the smallest to/from node,
    // or just the To node for P links
    this.getArrowheadScale = function (link) {
        var fromScale = self.getScale(link.fromNode);
        var toScale = self.getScale(link.toNode);
        var minScale = Math.min(fromScale, toScale);
        //console.log("getArrowheadScale, fromScale: ", fromScale, ', toScale: ', toScale, ', minScale: ', minScale);
        if (link.data.category == 'P') {
            minScale = toScale;
        }
        if (minScale >= 1) {
            return 1 * minScale;
        } else {
            return 1.5 * minScale;
        }
    };

    // -------------- creating new things ----------------------

    // Returns a location for a new sister group (thing) to the given one,
    // which will not hide any existing things (overlap is allowed).
    // The returned coordinates are absolute for a top-level group,
    // or relative to the parent otherwise - suitable for use with FreehandDiagramLayout
    // or FreehandLayout, resp.
    this.getNewSisterLocation = function (group, withR) {
        var diagram = map.getDiagram();
        // if we are within another group, things are in absolute coordinates
        // and sisters are placed above the thing; otherwise relative and below...
        var inGroup = group.containingGroup !== null;
        // ... except if withR is true, we go to the right instead of above or below.

        // start below if in group, else above; or to the right if withR
        var x, y, w, h;
        if (withR) {
            x = group.location.x + group.actualBounds.width * 2.2;
            y = group.location.y;
        } else {
            x = group.location.x;
            y = group.location.y + group.actualBounds.height * 1.1 * (inGroup ? 1 : -1);
        }
        w = group.actualBounds.width;
        h = group.actualBounds.height;

        // check for overlapping parts; if found, increment x,y and continue

        while (true) {
            var rect = new go.Rect(x, y, w, h);
            rect.grow(h / 10, w / 10, h / 10, w / 10);
            var parts = diagram.findObjectsIn(rect, null, self.isGroup);
            if (parts.count) {
                console.log('getNewSisterLocation: overlapping part found in ' + rect);
                if (withR) {
                    x += w / 10;
                    y += h / 10;
                } else {
                    x += w / 10;
                    y += h / 10 * (inGroup ? 1 : -1); // move down if in group, else up
                }
            } else {
                console.log('getNewSisterLocation: no overlapping part found in ' + rect);
                break;
            }
        }
        if (inGroup) {
            // make coordinates relative
            x -= group.containingGroup.location.x;
            y -= group.containingGroup.location.y;
        }
        return new go.Point(x + Math.random(), y + Math.random());
    };

    // Returns a location for a new child group (thing) to the given one,
    // which will not hide any existing children (overlap is allowed).
    // The returned coordinates are relative to the parent group - suitable for use with FreehandLayout.
    this.getNewChildLocation = function (group) {
        var groupBounds = group.actualBounds;
        // NB: all x/y locations are relative to the group location
        var x = 0;
        var y = groupBounds.height * 1.1;
        var w, h;
        var members = group.memberParts;
        // keep testing new rectangles until we find one that doesn't overlap with any existing member of the group
        while (true) {
            members.reset();
            var overlaps = false;
            var member, newRect, memberRect;
            while (members.next()) {
                member = members.value;
                var memberBounds = member.actualBounds;
                w = memberBounds.width;
                h = memberBounds.height;
                // find the existing member's actual bounds (absolute coords)
                memberRect = new go.Rect(memberBounds.x - groupBounds.x, memberBounds.y - groupBounds.y, memberBounds.width, memberBounds.height);
                newRect = new go.Rect(x, y, w, h);
                newRect.grow(h / 5, w / 5, h / 5, w / 5);
                overlaps = newRect.containsRect(memberRect);
                console.log('getNewChildLocation for ' + member + ': newRect = ' + newRect + ', memberRect = ' + memberRect + ', overlaps: ' + overlaps);
                if (overlaps) {
                    break;
                }
            }
            if (overlaps) {
                // increment x, y and try again
                x += w / 5;
                y += h / 5;
            } else {
                // found a good spot!
                break;
            }
        }
        return new go.Point(x, y);
    };

    // a simpler version of getNewChildLocation that places the child outside the bounds of the existing children
    this.getNewChildLocation2 = function (group) {
        var groupBounds = group.actualBounds;
        var childBounds = map.safeRect(map.getDiagram().computePartsBounds(group.memberParts));
        var x = 0;
        var y = 0;
        if (!group.memberParts.count) {
            y = groupBounds.height * 1.2;
        } else {
            y = groupBounds.height * 1.4 + childBounds.height;
        }
        //console.log('getNewChildLocation2, childBounds: ' + childBounds + ', groupBounds: ' + groupBounds + ', x: ' + x + ', y: ' + y);
        return new go.Point(x, y);
    };

    // move all the given new member groups so that their locations are relative to that of
    // the parent and its previously existing members, and scaled down appropriately
    this.layoutNewMembersRelativeTo = function (newMembers, parent, oldMemberBounds) {
        // how big was the parent system before the new groups were added?
        var systemBounds = parent.actualBounds.unionRect(oldMemberBounds);

        // figure out old/new origins - place new origin below existing system
        var oldBounds = map.getDiagram().computePartsBounds(newMembers);
        var oldOrigin = new go.Point(oldBounds.x, oldBounds.y);
        var newOrigin = new go.Point(0, systemBounds.height * 1.2);
        console.log('layoutNewMembersRelativeTo, systemBounds: ' + systemBounds + ', oldBounds: ' + oldBounds + ', oldOrigin: ' + oldOrigin + ', newOrigin: ' + newOrigin);

        // figure out new scaled locations
        // NB: we can assume newMembers are all one level down from parent (see map.addSelectedThingsAsChildrenOf),
        // so we just multiply by the standard scale factor
        var it = newMembers.iterator;
        while (it.next()) {
            var group = it.value;
            var groupBounds = group.actualBounds;
            var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) * 0.45;
            var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) * 0.45;
            var newLoc = go.Point.stringify(new go.Point(newX, newY));
            console.log('layoutNewMembersRelativeTo, groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
            map.getDiagram().model.setDataProperty(group.data, 'loc', newLoc);
        }
    };

    // move all the given old member groups so that their locations are absolute and above
    // the parent, and scaled up appropriately
    this.layoutOldMembersOutsideOf = function (oldMembers, parent, oldMembersBounds, oldMembersLevel) {
        // figure out scale factor (members can be dragged up multiple levels, unlike dragging into S)
        var scaleFactor = Math.pow(0.45, oldMembersLevel - self.computeLevel(parent));
        console.log('layoutOldMembersOutsideOf, scaleFactor: ' + scaleFactor);

        // figure out old/new origins - place new origin above parent, with vertical space for scaled-up oldMembers
        var parentBounds = parent.actualBounds;
        var oldOrigin = new go.Point(oldMembersBounds.x, oldMembersBounds.y);
        var newOrigin = new go.Point(parentBounds.x, parentBounds.y - oldMembersBounds.height * 1.2 / scaleFactor);

        // figure out new scaled locations
        var it = oldMembers.iterator;
        while (it.next()) {
            var group = it.value;
            var groupBounds = group.actualBounds;
            var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) / scaleFactor;
            var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) / scaleFactor;
            var newLoc = go.Point.stringify(new go.Point(newX, newY));
            console.log('layoutOldMembersOutsideOf, parentBounds: ' + parentBounds + ', oldMembersBounds: ' + oldMembersBounds + ', newOrigin: ' + newOrigin + ', groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
            map.getDiagram().model.setDataProperty(group.data, 'loc', go.Point.stringify(newLoc));
        }
    };

    // ----------------- accessors -------------------

    // returns the appropriate layout class by abbreviated name
    this.getLayout = function (layoutName) {
        if (layoutName == 'freehand') return new FreehandLayout();else if (layoutName == 'right') return new RightInventoryLayout();else if (layoutName == 'stacked') return new StackedLayout();else return new LeftInventoryLayout();
    };

    this.getFreehandDiagramLayout = function () {
        return new FreehandDiagramLayout();
    };

    // --------------------------------------------------------------

    // returns true if the to and from nodes for the link have a common ancestor group with one of the given layout names.
    // TODO: verify logic - what if there are multiple such ancestors? - this should return the highest one...
    function getCommonAncestorWithLayout(group1, group2, layoutNames) {
        var ancestors1 = self.getAncestorGroups(group1);
        var ancestors2 = self.getAncestorGroups(group2);
        var commonAncestors = _.intersection(ancestors1, ancestors2);
        var layoutAncestors = _.filter(commonAncestors, function (group) {
            return _.indexOf(layoutNames, group.data.layout) != -1;
        });
        if (layoutAncestors.length) {
            return layoutAncestors[0];
        } else {
            return null;
        }
    }

    // returns the ancestors of this group, including itself
    this.getAncestorGroups = function (group) {
        var ancestors = [group];
        var g = group;
        while (g.containingGroup) {
            ancestors.push(g.containingGroup);
            g = g.containingGroup;
        }
        return ancestors;
    };

    // --------------------------------------------------------------

    function FreehandDiagramLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(FreehandDiagramLayout, go.Layout);

    FreehandDiagramLayout.prototype.toString = function () {
        return 'FreehandDiagramLayout';
    };

    FreehandDiagramLayout.prototype.doLayout = function (coll) {
        //console.log('FreehandDiagramLayout.doLayout');
        var diagram = map.getDiagram();
        // diagram.startTransaction("Freehand Diagram Layout");

        //validateGroupLocations(diagram.findTopLevelGroups());
        var groups = diagram.findTopLevelGroups(); // get new iterator
        while (groups.next()) {
            var group = groups.value;
            if (!group.isLinkLabel) {
                var loc = go.Point.parse(group.data.loc);
                group.move(new go.Point(loc.x, loc.y));
                //console.log('FreehandDiagramLayout, group: ' + group + ' to location: ' + loc.x + ',' + loc.y);
            }
        }

        // all adjustment of links is done from here, not from the other layouts...
        getLinksByNodes(true);
        var links = diagram.links.iterator;
        while (links.next()) {
            var link = links.value;
            // if (isNaN(link.location.x)) {
            //     console.log('link location isNaN');
            //     link.move(new go.Point(0,0));
            // }
            // console.log('link location: ' + link.location);
            adjustLinkLayout(link);
        }

        // diagram.commitTransaction("Freehand Diagram Layout");
    };

    // if any group in the given Iterator does not have a location (data.loc), set one
    // that doesn't overlap with the other members
    function validateGroupLocations(groups) {}

    // --------------------------------------------------------------

    function FreehandLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(FreehandLayout, go.Layout);

    FreehandLayout.prototype.toString = function () {
        return 'FreehandLayout';
    };

    FreehandLayout.prototype.doLayout = function (coll) {
        var diagram = map.getDiagram();
        diagram.startTransaction('Freehand Layout');

        var x = this.group.location.x;
        var y = this.group.location.y;

        var it = this.group.memberParts.iterator;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group && !part.isLinkLabel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('FreehandLayout, part: ' + part.data.text + ', loc: ' + loc + ', location: ' + part.location);
                part.move(new go.Point(x + loc.x, y + loc.y));
                part.layout.doLayout(part);
            }
        }

        diagram.commitTransaction('Freehand Layout');
    };

    // --------------------------------------------------------------

    function StackedLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(StackedLayout, go.Layout);

    StackedLayout.prototype.toString = function () {
        return 'StackedLayout';
    };

    StackedLayout.prototype.doLayout = function (coll) {
        this.diagram.startTransaction('Stacked Layout');
        var margin = getStackMargin(this.group);
        var startX = this.group.location.x;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + margin / 2);
        layoutMembersForStacked(this.group, startX, startY);
        this.diagram.commitTransaction('Stacked Layout');
    };

    // returns the max y value after laying out the last part
    function layoutMembersForStacked(group, startX, startY) {
        var members = getOrderedMembers(group);
        var x = startX;
        var y = startY;
        var rowCount = 0;
        var maxStartY = startY;
        _.each(members, function (part) {
            if (part instanceof go.Group && !part.isLinkLabel) {
                var margin = getStackMargin(part);
                part.move(new go.Point(x, y));
                startY = y + part.actualBounds.height + margin / 2; // start Y position for part's children

                //console.log('layoutMembersForStacked: starting layout of children of ' + part + ' at ' + Math.round(x) + ',' + Math.round(startY));

                if (part.isSubGraphExpanded) {
                    // layout children of this part; check if we've already done a taller part+children in current row
                    maxStartY = Math.max(maxStartY, layoutMembersForStacked(part, x, startY));
                    //console.log('layoutMembersForStacked: laid out children of ' + part + ', maxStartY is now ' + Math.round(maxStartY));
                } else {
                    maxStartY = Math.max(maxStartY, startY);
                }

                // decide whether to wrap
                rowCount++;
                if (rowCount < 2) {
                    // keep going on this line
                    x += part.actualBounds.width + margin;
                } else {
                    // wrap to next line
                    x = startX;
                    y = maxStartY + margin / 2;
                    rowCount = 0;
                }
            }
        });
        return maxStartY;
    }

    // --------------------------------------------------------------

    function RightInventoryLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(RightInventoryLayout, go.Layout);

    RightInventoryLayout.prototype.toString = function () {
        return 'RightInventoryLayout';
    };

    RightInventoryLayout.prototype.doLayout = function (coll) {
        //this.diagram.startTransaction("Inventory Layout");
        var startX = this.group.location.x + this.group.actualBounds.width;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + getInventoryMargin(this.group));
        layoutMembersForInventory(this.group, startX, startY, 'R');
        //this.diagram.commitTransaction("Inventory Layout");
    };

    // --------------------------------------------------------------

    function LeftInventoryLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(LeftInventoryLayout, go.Layout);

    LeftInventoryLayout.prototype.toString = function () {
        return 'LeftInventoryLayout';
    };

    LeftInventoryLayout.prototype.doLayout = function (coll) {
        //console.log('LeftInventoryLayout.doLayout, group: ' + this.group + ', location: ' + this.group.location);
        // this.diagram.startTransaction("Inventory Layout");
        var startX = this.group.location.x;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + getInventoryMargin(this.group));
        layoutMembersForInventory(this.group, startX, startY, 'L');
        // this.diagram.commitTransaction("Inventory Layout");
    };

    // shared stuff for Left/Right Inventory layouts...

    // returns the max y value after laying out the last part
    // side is 'L' or 'R'
    function layoutMembersForInventory(group, startX, startY, side) {
        var members = getOrderedMembers(group);
        _.each(members, function (part) {
            var x = startX; // for left, just use x
            if (side == 'R') x = startX - part.actualBounds.width; // for right, right-align parts to startX
            //console.log('layoutMembersForInventory, part: ' + part + ' to location: ' + x + ',' + startY);
            part.move(new go.Point(x, startY));
            startY += part.actualBounds.height + getInventoryMargin(part);
            if (part.isSubGraphExpanded) {
                //console.log('layoutMembersForInventory, y after moving: ' + part + ' = ' + startY);
                startY = layoutMembersForInventory(part, startX, startY, side);
            }
        });
        return startY + getInventoryMargin(group);
    }

    // returns an array of the group's (non-R-thing) members, sorted by the 'order' data property
    function getOrderedMembers(group) {
        var members = new go.List();
        var it = group.memberParts.iterator;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group && !part.isLinkLabel) {
                members.add(part);
            }
        }
        return _.sortBy(members.toArray(), function (member) {
            return member.data.order;
        });
    }

    // ------------------------ link routing and visibility ------------------------------

    // adjust the routing, visibility and other properties of a link according to various structural criteria
    function adjustLinkLayout(link) {
        if (!link || !link.fromNode || !link.toNode) {
            return;
        }

        // var loc = link.location;
        // if (isNaN(loc.x) || isNaN(loc.y)) {
        //     link.location = new go.Point(10, 10);
        //     console.log('adjustLinkLayout, link.location: ' + link.location);
        // }
        // console.log('adjustLinkLayout, link.location: ' + link.location);

        // see if link is within a stacked or inventory layout, or if it's a hidden P link
        var inventoryAncestor = getCommonAncestorWithLayout(link.fromNode, link.toNode, ['left', 'right']);
        var stackedAncestor = getCommonAncestorWithLayout(link.fromNode, link.toNode, ['stacked']);
        var hidePLink = link.data && link.data.category == 'P' && !map.getTemplates().showPLink(link);
        var crowdedRThing = hasCrowdedRThing(link);

        // see if this is one of multiple links between the same two nodes
        var snpos = self.getSameNodesLinkPosition(link);
        var isMultiLink = snpos.count > 1;
        //console.log('snpos for link ' + link + ': ' + snpos.index + ' of ' + snpos.count);

        if (inventoryAncestor) {
            applyInventoryCurveRouting(link, snpos, inventoryAncestor.data.layout);
        } else if (isMultiLink) {
            applyMultilinkCurveRouting(link, snpos);
        } else if (crowdedRThing) {
            applyInventoryCurveRouting(link, snpos, 'left');
        } else {
            applyStraightRouting(link);
        }

        // show link only if both connected things are visible (no collapsed ancestors);
        // hide if both are in stacked layout or if it's a P-link that we shouldn't be showing now
        if (self.fromAndToNodesAreVisible(link) && !stackedAncestor && !hidePLink) {
            link.opacity = 1;
            showLabelNodes(link, true);
        } else {
            link.opacity = 0;
            showLabelNodes(link, false);
        }
    }

    // TODO: detect when the R-thing overlaps both from and to nodes, so we can change the link routing
    function hasCrowdedRThing(link) {
        return false;
    }

    function showLabelNodes(link, show) {
        //console.log('showLabelNodes, link: ' + link + ', show: ' + show);
        var it = link.labelNodes;
        if (it) {
            while (it.next()) {
                var group = it.value;
                group.visible = show;
                if (show) {
                    group.layout.doLayout(group);
                }
            }
        }
    }

    // if link is between two things in the same inventory layout (single or multiple),
    // make the line more or less circular on the appropriate side
    function applyInventoryCurveRouting(link, snpos, ancestorLayout) {
        if (ancestorLayout == 'left') {
            link.fromSpot = go.Spot.Left;
            link.toSpot = go.Spot.Left;
        } else if (ancestorLayout == 'right') {
            link.fromSpot = go.Spot.Right;
            link.toSpot = go.Spot.Right;
        }

        // aspect ratio for the link curves - make this smaller to make them taller, larger to make them fatter
        var curveRatio = 0.6;

        var y1 = link.fromNode.actualBounds.y;
        var y2 = link.toNode.actualBounds.y;

        var yDiff = Math.abs(y2 - y1);
        var c = (yDiff === 0 ? 50 : Math.floor(yDiff * curveRatio)) + 100 * (snpos.index / snpos.count);
        //console.log("yDiff = " + yDiff + ', c = ' + c + ' (' + link.fromNode.data.text + ' - ' + p1 + ' - to ' + link.toNode.data.text + ' - ' + p2 + ')');

        link.curve = go.Link.Bezier;
        link.fromEndSegmentLength = c;
        link.toEndSegmentLength = c;
    }

    // if non-inventory link is one of multiple ones between same nodes, make it curved
    function applyMultilinkCurveRouting(link, snpos) {
        link.fromSpot = go.Spot.Default;
        link.toSpot = go.Spot.Default;
        link.curve = go.Link.Bezier;
        // curviness values based on number of links:
        // 2: -25 25
        // 3: -50 0 50
        // 4: -100 -50 0 50 100
        var rangeSize = 10 * (snpos.count - 1);
        var rangeIncrement = 10;
        if (snpos.hasRThing) {
            rangeSize = 100 * (snpos.count - 1);
            rangeIncrement = 100;
        }

        // adjust curviness for smaller scales
        var linkScaleFactor = self.getLinkStrokeWidth(link) / 2; // 2 is max stroke width
        rangeSize *= linkScaleFactor;
        rangeIncrement *= linkScaleFactor;

        var rangeStart = 0 - rangeSize / 2;

        link.curviness = (rangeStart + rangeIncrement * snpos.index) * snpos.orientation;
        // console.log('applyMultilinkCurveRouting, link: ' + link + ', curviness: ' + link.curviness);
    }

    // do normal straight lines for freehand layout, or links between descendants of things with different layouts
    function applyStraightRouting(link) {
        link.fromSpot = go.Spot.Default;
        link.toSpot = go.Spot.Default;
        link.routing = go.Link.Normal;
        link.curve = go.Link.None;
        link.curviness = 0;
    }

    // --------------- calculate how many links there are between a link's nodes ---------------

    // Returns an object of the format { index: 1, count: 2, orientation: -1, hasRThing: false },
    // indicating how many other links there are between the same pair of nodes,
    // where the given link falls within this list, and what its orientation is.
    this.getSameNodesLinkPosition = function (link) {
        var linksByNodes = getLinksByNodes(true);
        // get links with the same key as this one (connecting same nodes)
        var sameLinks = _.where(linksByNodes, {
            key: getSameNodesLinkKey(link)
        });

        // default return value
        var snpos = {
            index: 0,
            count: 1,
            orientation: 1,
            hasRThing: false
        };
        // set index, count, orientation
        for (var i = 0; i < sameLinks.length; i++) {
            if (sameLinks[i].link == link) {
                snpos = {
                    index: i,
                    count: sameLinks.length,
                    orientation: getLinkOrientation(link)
                };
            }
        }
        // check for Rthing
        for (i = 0; i < sameLinks.length; i++) {
            if (sameLinks[i].hasRThing) {
                snpos.hasRThing = true;
            }
        }
        return snpos;
    };

    var _linksByNodes = null;

    // refreshes the cached list of all links with keys, to facilitate grouping them according to connected nodes
    function getLinksByNodes(refresh) {
        //console.log('getLinksByNodes');
        if (!self._linksByNodes || refresh) {
            self._linksByNodes = [];
            var diagram = map.getDiagram();
            var links = diagram.links.iterator;
            while (links.next()) {
                var link = links.value;
                var key = getSameNodesLinkKey(link);
                if (key) {
                    self._linksByNodes.push({
                        key: key,
                        link: link,
                        hasRThing: link.labelNodes.count > 0
                    });
                }
            }
        }
        return self._linksByNodes;
    }

    // Returns a key used to group links according to which pair of nodes they connect.
    // The returned key is non-empty for regular links and P links that should be shown currently,
    // so that these will all be routed by the same rules. A null key is returned for any other
    // links, indicating that no grouping is required.
    function getSameNodesLinkKey(link) {
        //        if (self.isRLink(link) || (self.isPLink(link) && map.getTemplates().showPLink(link))) {
        if (self.isRLink(link)) {
            var key = [link.fromNode.toString(), link.toNode.toString()].sort().join('|');
            //console.log('key: ' + key);
            return key;
        } else {
            return null;
        }
    }

    // We use this to distinguish an A-B link from a B-A link (based on fromNode and toNode, which
    // is independent of the arrowhead settings) when setting curviness, because setting curviness = 25
    // on an A-B link is the same as curviness = -25 on a B-A link.
    function getLinkOrientation(link) {
        if (link.fromNode && link.toNode && link.fromNode.toString() < link.toNode.toString()) {
            return 1;
        } else {
            return -1;
        }
    }

    // -------------- link tests ---------------

    this.isRLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category === undefined && link.fromNode && link.toNode;
    };

    this.isDLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category == 'D';
    };

    this.isPLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category == 'P';
    };

    this.isGroup = function (obj) {
        return obj instanceof go.Group;
    };
};

//console.log('Layouts, PartCreated');
// setNewPartLocationData(e);

// stacked?

},{}],11:[function(require,module,exports){
// functions for creating and manipulating the map (i.e. Diagram)

'use strict';

SandbankEditor.Map = function ($scope, $http, $resource, $timeout, $modal, $log) {

    var self = this;

    // ----------- constants ---------------
    this.LEFT = 'left';
    this.RIGHT = 'right';

    // ------------ instance vars ----------

    var _diagram = null;

    // components
    var _analytics = null;
    var _attachments = null;
    var _autosave = null;
    var _generator = null;
    //var _history = null;
    var _layouts = null;
    var _perspectives = null;
    var _presenter = null;
    var _standards = null;
    var _templates = null;
    var _tests = null;
    var _ui = null;

    // ------------ component accessors ----------------

    function getComponents() {
        return [_analytics, _attachments, _autosave, _generator,
        // _history,
        _layouts, _perspectives, _presenter, _standards, _templates, _tests, _ui];
    }

    this.getAnalytics = function () {
        return _analytics;
    };
    this.getAttachments = function () {
        return _attachments;
    };
    this.getAutosave = function () {
        return _autosave;
    };
    this.getGenerator = function () {
        return _generator;
    };
    // this.getHistory = function () { return _history; };
    this.getLayouts = function () {
        return _layouts;
    };
    this.getPerspectives = function () {
        return _perspectives;
    };
    this.getPresenter = function () {
        return _presenter;
    };
    this.getStandards = function () {
        return _standards;
    };
    this.getTemplates = function () {
        return _templates;
    };
    this.getTests = function () {
        return _tests;
    };
    this.getUi = function () {
        return _ui;
    };

    // -------------- map init ------------------

    this.init = function () {

        // initialize components
        _analytics = new SandbankEditor.Analytics($scope, $http, self);
        _attachments = new SandbankEditor.Attachments($scope, $http, $resource, self);
        _autosave = new SandbankEditor.Autosave($scope, $http, self);
        _generator = new SandbankEditor.Generator($scope, self);
        // _history = new SandbankEditor.History($scope, $http, self);
        _layouts = new SandbankEditor.Layouts($scope, self);
        _perspectives = new SandbankEditor.Perspectives($scope, self);
        _presenter = new SandbankEditor.Presenter($scope, self);
        _standards = new SandbankEditor.Standards($scope, self);
        _templates = new SandbankEditor.Templates($scope, self);
        _tests = new SandbankEditor.Tests($scope, self);
        _ui = new SandbankEditor.UI($scope, $timeout, $http, $resource, $modal, $log, self);

        // call init for each component, if defined
        _.each(getComponents(), function (component) {
            if (component && component.init) component.init();
        });

        // create diagram
        _diagram = new go.Diagram('diagram');
        _diagram.initialContentAlignment = go.Spot.Center;
        _diagram.initialViewportSpot = go.Spot.Center;
        _diagram.initialDocumentSpot = go.Spot.Center;
        _diagram.hasHorizontalScrollbar = false;
        _diagram.hasVerticalScrollbar = false;
        _diagram.padding = 500;
        _diagram.layout = _layouts.getFreehandDiagramLayout();

        initTools();
        _templates.initTemplates(_diagram); // set up templates, customize temporary link behavior
        addDiagramListeners();

        _templates.addExportFooter();

        // watch for tab changes
        $scope.$watch('currentTab', function (newValue, oldValue) {
            self.currentTabChanged(newValue, oldValue);
        });
    };

    // this is called by a $scope.$watch in init()
    this.currentTabChanged = function (newValue, oldValue) {
        // console.log('currentTabChanged, newValue: ' + newValue + ', oldValue: ' + oldValue);
        // notify any interested components
        _.each(getComponents(), function (component) {
            if (component && component.currentTabChanged) {
                component.currentTabChanged(newValue, oldValue);
            }
        });

        //$scope.safeApply();
    };

    this.getDiagram = function () {
        return _diagram;
    };

    // misc. tool configuration
    function initTools() {
        // disable clicking on TextBlocks to edit - we will invoke editing in other ways
        _diagram.allowTextEdit = false;

        // select text when activating editor;
        // use shift-enter to create new lines, enter to finish editing (NB: editor has multiline=true)
        var textTool = _diagram.toolManager.textEditingTool;
        textTool.doActivate = function () {
            go.TextEditingTool.prototype.doActivate.call(textTool);
            if (textTool.defaultTextEditor !== null) {
                textTool.defaultTextEditor.select();

                textTool.defaultTextEditor.addEventListener('keydown', function (e) {
                    if (e.which == 13 && !e.shiftKey) {
                        go.TextEditingTool.prototype.acceptText.call(textTool, go.TextEditingTool.LostFocus);
                    }
                });
            }
        };

        // handle delete key on Mac (default behavior only uses fn-Delete to delete from canvas)
        _diagram.commandHandler.doKeyDown = function () {
            var e = _diagram.lastInput;
            var cmd = _diagram.commandHandler;
            if (e.event.which === 8) {
                cmd.deleteSelection();
            } else {
                go.CommandHandler.prototype.doKeyDown.call(cmd); // call base method with no arguments
            }
        };

        // [disable keyboard shortcuts, as these do not do centering on zoom,
        // and can lead to confusion with browser zoom (which gets fired depends on focus)]
        // - turned back on to support pinch/zoom on iPad
        _diagram.allowZoom = true;

        _diagram.toolManager.mouseWheelBehavior = go.ToolManager.WheelZoom;

        // decide what kinds of Parts can be added to a Group or to top-level
        // _diagram.commandHandler.memberValidation = function (grp, node) {
        //     //if (grp instanceof go.Group && node instanceof go.Group) return false;  // cannot add Groups to Groups
        //     return true;
        // };

        // default link attributes
        _diagram.toolManager.linkingTool.archetypeLinkData = {
            type: 'noArrows'
        };

        // allow double-click in background to create a new node
        _diagram.toolManager.clickCreatingTool.archetypeNodeData = getNewThingData();

        // how long mouse must be held stationary before starting a drag-select (instead of a scroll) - default was 175ms
        _diagram.toolManager.dragSelectingTool.delay = 400;
    }

    // ----------- handling of DiagramEvents --------------------

    function addDiagramListeners() {

        // DiagramEvents to be handled here or by a component
        var diagramEvents = ['InitialLayoutCompleted', 'ChangedSelection', 'BackgroundSingleClicked', 'SelectionCopied', 'SelectionMoved', 'SelectionDeleting', 'SelectionDeleted', 'PartCreated', 'PartResized', 'ClipboardChanged', 'ClipboardPasted', 'LinkDrawn', 'LinkRelinked', 'ViewportBoundsChanged'];
        _.each(diagramEvents, function (eventName) {
            _diagram.addDiagramListener(eventName, function (e) {
                broadcastDiagramEvent(eventName, e);
            });
        });

        _diagram.addDiagramListener('BackgroundContextClicked', function (e) {});
    }

    // broadcasts the given DiagramEvent (see apidocs for go.DiagramEvent)
    // to any components that may be interested, including this one.
    function broadcastDiagramEvent(eventName, e) {
        self.handleDiagramEvent(eventName, e);
        _.each(getComponents(), function (component) {
            if (component && component.handleDiagramEvent) component.handleDiagramEvent(eventName, e);
        });
        $scope.safeApply();
    }

    this.handleDiagramEvent = function (eventName, e) {
        //console.log('handleDiagramEvent: ' + eventName);
        if (eventName == 'ChangedSelection') {
            changedSelection(e);
        } else if (eventName == 'SelectionCopied') {
            selectionCopied(e);
        } else if (eventName == 'PartCreated') {
            partCreated(e);
        } else if (eventName == 'BackgroundSingleClicked') {
            _ui.showHelpTip('canvasTip');
        } else if (eventName == 'LinkDrawn') {
            linkDrawn(e);
            setNewLinkDirection(e);
        } else if (eventName == 'LinkRelinked') {
            linkRelinked(e);
        } else if (eventName == 'ClipboardChanged') {
            clipboardChanged(e);
        } else if (eventName == 'ClipboardPasted') {
            clipboardPasted(e);
        }
    };

    // handle zoom to region if applicable
    function changedSelection(e) {
        //console.log('map.changedSelection');
        _diagram.updateAllTargetBindings();
        _ui.maybeZoomToRegion();
        if (self.relationshipsSelected()) {
            _ui.showHelpTip('relationshipTip');
        }
    }

    function partCreated(e) {
        //console.log('Map, PartCreated');
        var group = e.subject;
        if (!(group instanceof go.Group)) {
            return;
        }
        _diagram.model.setDataProperty(group.data, 'layout', _ui.getMapEditorOptions().defaultThingLayout || 'left');
        _layouts.setNewPartLocationData(e);
    }

    // fix link ports when a link is created -
    // the P and R ports both cover the whole node, and the P port is on top of the R port,
    // so both P and R links get the toPort set to P by default.
    function linkDrawn(e) {
        var link = e.subject;
        console.log('linkDrawn, link: ' + link + ', fromPort: ' + link.fromPortId + ', toPort: ' + link.toPortId);
        if (link.fromPortId == 'P') {
            _diagram.model.startTransaction('change link category');
            _diagram.model.setDataProperty(link.data, 'toPort', 'P');
            _diagram.model.setDataProperty(link.data, 'category', 'P');
            _diagram.model.commitTransaction('change link category');
        }
        // prevent links from R to P
        else if (link.fromPortId == 'R') {
            _diagram.model.startTransaction('change link toPort');
            _diagram.model.setDataProperty(link.data, 'toPort', 'R');
            _diagram.model.commitTransaction('change link toPort');
        }
    }

    // fix link ports when a link is relinked -
    // dragging either end of an R-link to another node will set the corresponding port to P,
    // since P port is on top of R port, so we reset both ports to R if the category is not P.
    function linkRelinked(e) {
        var link = e.subject;
        if (link.data.category === undefined || link.data.category !== 'P') {
            _diagram.model.setDataProperty(link.data, 'fromPort', 'R');
            _diagram.model.setDataProperty(link.data, 'toPort', 'R');
        }
    }

    function setNewLinkDirection(e) {
        var link = e.subject;
        if (link.fromPortId == 'R') {
            _diagram.model.startTransaction('change link direction');
            _diagram.model.setDataProperty(link.data, 'type', _ui.getMapEditorOptions().defaultRelationshipDirection);
            _diagram.commitTransaction('change link direction');
        }
    }

    function clipboardChanged(e) {
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group) {
                console.log('clipboardChanged: part ' + part + ', mainpanel scale: ' + part.findObject('mainpanel').scale);
            }
        }
    }

    // NB: this is called when parts are copied by control-drag, NOT when the copy button is clicked
    function selectionCopied(e) {
        console.log('selectionCopied');
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group && part.isTopLevel) {
                var loc = go.Point.parse(part.data.loc);
                console.log('selectionCopied: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                _diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                part.updateTargetBindings('loc');
            }
        }
    }

    function clipboardPasted(e) {
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group && part.isTopLevel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('clipboardPasted: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                _diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                part.updateTargetBindings('loc');
            }
        }
    }

    // computes the bounds of all groups in the diagram - this includes all ideas/things,
    // and excludes nodes, including slides, the slide blocker, and the export footer
    this.computeMapBounds = function () {
        var groups = new go.List(go.Group);
        var nodes = _diagram.nodes;
        while (nodes.next()) {
            if (nodes.value instanceof go.Group) {
                groups.add(nodes.value);
            }
        }
        return _diagram.computePartsBounds(groups).copy(); // return a mutable rect
    };

    // ------------ what is currently selected? ----------------

    // returns true if all selected items are things (i.e. Groups), including r-things
    this.thingsSelected = function () {
        if (_diagram == null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Group)) return false;
        }

        return true;
    };

    // returns true if exactly one thing (Group) is selected
    this.thingSelected = function () {
        return _diagram !== null && _diagram.selection.count == 1 && _diagram.selection.first() instanceof go.Group;
    };

    // if a single group is selected, returns it, otherwise returns null
    this.getUniqueThingSelected = function () {
        if (_diagram !== null && _diagram.selection.count == 1 && _diagram.selection.first() instanceof go.Group) {
            return _diagram.selection.first();
        } else {
            return null;
        }
    };

    this.thingsSelectedAreMembersOf = function (group) {
        if (_diagram === null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Group) || it.value.containingGroup != group) return false;
        }

        return true;
    };

    this.thingsSelectedAreDescendantsOf = function (group) {
        if (_diagram === null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            var ancestors = _layouts.getAncestorGroups(it.value);
            if (_.indexOf(ancestors, group) == -1) return false;
        }

        return true;
    };

    this.thingsSelectedIncludeSlide = function () {
        if (_diagram === null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (it.value.data && it.value.data.category == 'slide') {
                return true;
            }
        }

        return false;
    };

    // returns true if all selected items are relationships (i.e. Links)
    this.relationshipsSelected = function () {
        if (_diagram === null || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Link) || !_layouts.isRLink(it.value)) return false;
        }

        return true;
    };

    // returns true if exactly one relationship (Link) is selected
    this.relationshipSelected = function () {
        return _diagram !== null && _diagram.selection.count == 1 && _diagram.selection.first() instanceof go.Link;
    };

    // ------------ load and initialize model -------------

    this.load = function () {

        var data = { 'map': { 'metadata': { 'sandbox': null, 'id': 5954, 'name': 'Untitled Map', 'url': '/maps/5954', 'canEdit': true, 'updatedAt': '2015-07-07T18:28:55.765-04:00', 'updatedBy': 863, 'updatedByName': 'Christopher Froehlich', 'userTags': [] }, 'data': { 'class': 'go.GraphLinksModel', 'linkFromPortIdProperty': 'fromPort', 'linkToPortIdProperty': 'toPort', 'nodeIsLinkLabelProperty': 'isLinkLabel', 'linkLabelKeysProperty': 'labelKeys', 'nodeDataArray': [{ 'key': 1, 'text': 'New Idea', 'isGroup': true, 'loc': '-130.5 -78.5', 'layout': 'left', 'sExpanded': true, 'pExpanded': true }, { 'text': 'Idea', 'isGroup': true, 'layout': 'left', 'sExpanded': true, 'pExpanded': true, 'key': -2, 'loc': '101.5 -78.5' }, { 'text': 'Idea', 'isGroup': true, 'layout': 'left', 'sExpanded': true, 'pExpanded': true, 'key': -3, 'loc': '530.5 -77.5' }], 'linkDataArray': [{ 'type': 'noArrows', 'from': -2, 'to': 1, 'labelKeys': [], 'fromPort': 'P', 'toPort': 'P', 'category': 'P' }, { 'type': 'noArrows', 'from': -2, 'to': -3, 'labelKeys': [], 'fromPort': 'R', 'toPort': 'R' }] }, 'stateData': { 'showNavigator': false, 'currentTab': null, 'perspectivePointKey': null, 'distinctionThingKey': null }, 'editorOptions': { 'defaultRelationshipDirection': 'noArrows', 'defaultThingLayout': 'left', 'perspectiveMode': 'lines' }, 'analytics': { 'COUNT_THINGS': '3.0', 'COUNT_SYSTEMS': '0.0', 'COUNT_RELATIONSHIPS': '1.0', 'COUNT_RTHINGS': '0.0', 'COUNT_SYSTEM_RTHINGS': '0.0', 'COUNT_PERSPECTIVES': '1.0', 'COUNT_DISTINCTIONS': '0.0', 'COUNT_SYSTEM_PERSPECTIVES': '0.0' }, 'versions': [] } };
        _diagram.model = go.Model.fromJson(data);
        _ui.setStateData(data.map.stateData);
        _ui.setMapEditorOptions(data.map.editorOptions);

        self.checkModel();
        _diagram.updateAllTargetBindings();
        _diagram.undoManager.isEnabled = true;
        _diagram.model.addChangedListener(_autosave.modelChanged);
        _autosave.saveOnModelChanged = true;
        _diagram.isReadOnly = !$scope.canEdit;
        $scope.updateEditStatus($scope.canEdit ? $scope.LAST_UPDATED : $scope.READ_ONLY);
        _ui.resetZoom();
        self.loadMapExtraData(data.map);

        // if no nodes OR in thinkquery mode, launch generator
        if ($scope.thinkquery || !_diagram.model.nodeDataArray.length) {
            _ui.openTab(_ui.TAB_ID_GENERATOR);
        }
        // if we have slides, play presentation
        else if (!$scope.canEdit && _presenter.getSlideNodeDatas().length) {
            _presenter.playSlide(1);
        }
    };

    this.loadForSandbox = function () {
        _diagram.model = go.Model.fromJson($scope.mapData);
        _ui.setStateData(''); // important! (otherwise corner highlighting breaks)
        _diagram.updateAllTargetBindings();
        _diagram.undoManager.isEnabled = true;
        _ui.resetZoom();
        $scope.canEdit = true;

        // if no nodes OR in thinkquery mode, launch generator
        if ($scope.thinkquery) {
            _ui.openTab(_ui.TAB_ID_GENERATOR);
        }
        // if we have slides, play presentation
        else if (_presenter.getSlideNodeDatas().length) {
            _presenter.playSlide(1);
        }
    };

    // fix any structural problems in the model before displaying it
    this.checkModel = function () {
        // change "isLinkLabel" property to category:"LinkLabel" (change as of goJS 1.3)
        _.each(_diagram.model.nodeDataArray, function (nodeData, index, list) {
            if (nodeData.isLinkLabel) {
                delete nodeData.isLinkLabel;
                nodeData.category = 'LinkLabel';
            }
        });

        // check for the link label (r-thing) for a link being the same as the from or to node
        // - this can cause infinite recursion in thinks like layout.getScale
        _.each(_diagram.model.linkDataArray, function (linkData, index, list) {
            var badLabelKeys = [];
            _.each(linkData.labelKeys, function (key, index2, list2) {
                if (key == linkData.from || key == linkData.to) {
                    console.log('labelKey same as from or to of link: ' + key);
                    badLabelKeys.push(key);
                }
            });
            linkData.labelKeys = _.difference(linkData.labelKeys, badLabelKeys);
        });
    };

    // loads other data besides the diagram model from the json object returned by maps/show.json
    // - this includes points, badges, versions, and map analytics
    // NB: points and badges are set at page load time in layouts/user and users/badges, but
    // we also need to be able to update them here after an autosave

    // TODO: is this still all needed with the newer userProfile stuff?
    this.loadMapExtraData = function (mapData) {
        $scope.safeApply(function () {
            //console.log('map.loadMapExtraData, mapData: ' + mapData);
            $scope.mapUserTags = mapData.metadata.userTags; // TODO: is this used anywhere?

            //$scope.map.getHistory().versionList = mapData.versions;
            $scope.map.getAnalytics().mapAnalytics = mapData.analytics;
        });
    };

    // loads model data for an individual version and displays it
    // NB: this also disables autosave; load() must be called to re-enable it
    this.loadVersion = function (id) {
        $http.get('/map_versions/' + id).then(function (response) {
            if (response.status === 200) {
                try {
                    //console.log('loaded map version with ID: ' + id);
                    _diagram.model = go.Model.fromJson(response.data);
                    _diagram.updateAllTargetBindings();
                    _diagram.undoManager.isEnabled = false;
                    _autosave.saveOnModelChanged = false;
                    _diagram.layoutDiagram(true);
                    _diagram.isReadOnly = true;
                } catch (e) {
                    alert('Could not load MetaMap version');
                    console.error(e.message);
                }
            }
        });
    };

    // set whether editing capability is temporarily suspended -
    // this is distinct from the global $scope.canEdit setting,
    // which if false prevents editing at all times
    this.setEditingBlocked = function (val) {
        if ($scope.canEdit) {
            _diagram.isReadOnly = val;
        }
    };

    // ------------- creating things in the model -------------------

    // default properties for all new Things (groups) - note that these can be overridden if needed
    function getNewThingData() {
        return {
            text: 'Idea',
            isGroup: true,
            layout: _ui.getMapEditorOptions().defaultThingLayout || 'left',
            sExpanded: true,
            pExpanded: true
        };
    }

    this.createSister = function (thing) {
        if (!$scope.canEdit) {
            return null;
        }

        var newLoc = _layouts.getNewSisterLocation(thing);
        var data = _.extend(getNewThingData(), {
            group: thing.data.group,
            text: 'Idea',
            loc: go.Point.stringify(newLoc)
        });
        _diagram.model.addNodeData(data);
        var newSister = _diagram.findNodeForData(data);

        // put new sister right after thing (not as the last sibling)
        if (thing.containingGroup) {
            self.moveSiblingNextTo(newSister, thing, self.RIGHT);
        }
        return newSister;
    };

    this.createRToSister = function (thing) {
        if (!$scope.canEdit) {
            return null;
        }

        var thingKey = _diagram.model.getKeyForNodeData(thing.data);
        //console.log('thingKey: ' + thingKey);
        var newLoc = _layouts.getNewSisterLocation(thing, true); // withR = true
        var data = _.extend(getNewThingData(), {
            group: thing.data.group,
            text: 'Idea',
            loc: go.Point.stringify(newLoc)
        });
        _diagram.model.addNodeData(data);
        var newSister = _diagram.findNodeForData(data);
        var groupKey = _diagram.model.getKeyForNodeData(data);

        // create link
        var linkData = {
            from: thingKey,
            to: groupKey,
            type: 'to',
            fromPort: 'R',
            toPort: 'R'
        };
        _diagram.model.addLinkData(linkData);

        // put new sister right after thing (not as the last sibling)
        if (thing.containingGroup) {
            self.moveSiblingNextTo(newSister, thing, self.RIGHT);
        }
        return newSister;
    };

    this.createChild = function (thing, name, x, y) {
        if (!$scope.canEdit) {
            return null;
        }

        var newLoc = _layouts.getNewChildLocation2(thing);
        if (x || y) {
            newLoc = new go.Point(x, y);
        }
        var data = _.extend(getNewThingData(), {
            group: thing.data.key,
            text: name || 'Part',
            loc: go.Point.stringify(newLoc)
        });
        _diagram.model.addNodeData(data);
        _layouts.setDescendantLayouts(thing, thing.data.layout);
        var child = _diagram.findNodeForData(data);
        child.updateTargetBindings();
        return child;
    };

    this.createRThing = function (link, name) {
        if (!$scope.canEdit) {
            return null;
        }

        // console.log('createRThing, link: ' + link + ', name: ' + name);
        // don't allow multiple R-things
        if (link.isLabeledLink) {
            // console.log('cannot create RThing, link is already labeled');
            return;
        }

        var data = _.extend(getNewThingData(), {
            text: name || 'Relationship Idea',
            //isLinkLabel: true,     // deprecated as of goJS 1.3
            category: 'LinkLabel', // new as of goJS 1.3
            loc: '0 0'
        });
        _diagram.model.startTransaction('create R Thing');
        _diagram.model.addNodeData(data);
        var key = _diagram.model.getKeyForNodeData(data);
        var node = _diagram.findPartForKey(key);
        node.labeledLink = link;
        _diagram.model.commitTransaction('create R Thing');
        _diagram.updateAllTargetBindings();

        return _diagram.findNodeForData(data);
    };

    // ---------- creating things with specified names/locations - for use by generator and tests ------------

    this.createThing = function (x, y, name, layout) {
        group = _diagram.toolManager.clickCreatingTool.insertPart(new go.Point(x, y));
        _diagram.model.setDataProperty(group.data, 'text', name);
        if (layout) {
            _diagram.model.setDataProperty(group.data, 'layout', layout);
        }
        return group;
    };

    this.createRLinkWithRThing = function (thing1, thing2, name) {
        var link = self.createRLink(thing1, thing2);
        return self.createRThing(link, name);
    };

    // returns the linkData object for the new link
    this.createRLink = function (thing1, thing2) {
        _diagram.model.startTransaction('add link');
        var data = {
            type: 'noArrows',
            from: thing1.data.key,
            to: thing2.data.key,
            fromPort: 'R',
            toPort: 'R'
        };
        _diagram.model.addLinkData(data);
        _diagram.model.commitTransaction('add link');
        return _diagram.findLinkForData(data);
    };

    // returns the linkData object for the new link
    this.createPLink = function (thing1, thing2) {
        _diagram.model.startTransaction('add link');
        var data = {
            type: 'noArrows',
            from: thing1.data.key,
            to: thing2.data.key,
            fromPort: 'P',
            toPort: 'P',
            category: 'P'
        };
        _diagram.model.addLinkData(data);
        _diagram.model.commitTransaction('add link');
        _diagram.model.setDataProperty(thing1.data, 'pExpanded', true);
        return _diagram.findLinkForData(data);
    };

    // ------------- moving things in the model structure -------------------

    // returns a go.List of the items in the current selection that are Groups
    function getSelectedGroups() {
        var it = _diagram.selection.iterator;
        var members = new go.List();
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group) {
                members.add(part);
            }
        }
        return members;
    }

    // drag to S
    this.addSelectedThingsAsChildrenOf = function (group) {
        var newMembers = getSelectedGroups();

        // check existing members so we can calculate layout
        var oldMemberBounds = self.safeRect(_diagram.computePartsBounds(group.memberParts));

        // NB: this is subject to validation by CommandHandler.isValidMember,
        // so for example, members of members of newMembers will not be added as members
        group.addMembers(newMembers);

        _layouts.layoutNewMembersRelativeTo(newMembers, group, oldMemberBounds);

        _diagram.clearSelection();
    };

    // drag to D
    this.addSelectedThingsAsSistersOf = function (group) {
        var oldMembers = getSelectedGroups();

        // if dragging to top level, move dragged things so they don't overlap the former parent
        if (!group.containingGroup) {
            // check existing members so we can calculate layout
            var oldMembersBounds = _diagram.computePartsBounds(oldMembers);
            // NB: oldMembers can be on multiple levels, so not clear which level to use for rescaling old members after drag
            var oldMembersLevel = _layouts.computeLevel(oldMembers.first());

            var it = oldMembers.iterator;
            while (it.next()) {
                var member = it.value;
                member.containingGroup = null;
            }
            _layouts.layoutOldMembersOutsideOf(oldMembers, group, oldMembersBounds, oldMembersLevel);
        }
        // if not dragging to top level, place dragged things after former parent in outline
        else {
            var it2 = oldMembers.iterator;
            while (it2.next()) {
                var member2 = it2.value;
                member2.containingGroup = group.containingGroup;
                self.moveSiblingNextTo(member2, group, self.RIGHT);
            }
        }
        _diagram.clearSelection();
    };

    // for dragging parts within a system - side is LEFT or RIGHT (i.e. above or below, resp. in inventory layout)
    this.addSelectedThingAsOrderedSisterOf = function (group, side) {
        //console.log('addSelectedThingAsOrderedSisterOf, side: ' + side);
        var thing = self.getUniqueThingSelected();
        if (!thing) {
            return;
        }
        self.moveSiblingNextTo(thing, group, side);
    };

    // moves the first thing (sibling) to be after the second thing (group)
    // in the part ordering - they are assumed to be siblings
    // side is LEFT or RIGHT
    this.moveSiblingNextTo = function (sibling, group, side) {
        var parent = group.containingGroup;
        console.log('moveSiblingNextTo, sibling: ' + sibling + ', group: ' + group + ', parent: ' + parent + ', sibling.containingGroup: ' + sibling.containingGroup);

        if (!parent || sibling.containingGroup != parent) {
            console.error('Cannot do moveSiblingNextTo on non-siblings or top-level groups');
        }

        // create new member order
        var memberOrder = new go.List();
        var it = parent.memberParts;
        var order = 0;
        while (it.next()) {
            var member = it.value;
            if (member instanceof go.Group) {
                // we're at the target group, so add the moved thing either before or after it
                if (member == group) {
                    if (side == self.LEFT) {
                        memberOrder.add(sibling);
                        _diagram.model.setDataProperty(sibling.data, 'order', order++);
                        memberOrder.add(member);
                        _diagram.model.setDataProperty(member.data, 'order', order++);
                    } else {
                        memberOrder.add(member);
                        _diagram.model.setDataProperty(member.data, 'order', order++);
                        memberOrder.add(sibling);
                        _diagram.model.setDataProperty(sibling.data, 'order', order++);
                    }
                }
                // don't re-add the moved thing, it was added above
                else if (member != sibling) {
                    memberOrder.add(member);
                    _diagram.model.setDataProperty(member.data, 'order', order++);
                }
            }
        }

        // clear existing members
        var newIt = memberOrder.iterator;
        while (newIt.next()) {
            var member2 = newIt.value;
            member2.containingGroup = null;
        }

        // add new members
        newIt.reset();
        while (newIt.next()) {
            var member3 = newIt.value;
            member3.containingGroup = parent;
        }
    };

    this.addThingAsRThing = function (thing, link) {
        thing.labeledLink = link;
        thing.updateTargetBindings();
    };

    // D corner handler (single click)
    this.toggleDFlag = function (thing) {
        _diagram.model.setDataProperty(thing.data, 'dflag', !thing.data.dflag);
        thing.updateTargetBindings();
    };

    // S corner handler (single click)
    this.toggleSExpansion = function (thing) {
        var isExpanded = !(thing.data && !thing.data.sExpanded); // expand by default if property not present
        _diagram.model.setDataProperty(thing.data, 'sExpanded', !isExpanded);
        thing.updateTargetBindings();
        _ui.showCornerTip(thing, 'S');
    };

    // P corner handler (single click)
    this.togglePExpansion = function (thing) {
        _diagram.model.setDataProperty(thing.data, 'pExpanded', !self.pIsExpanded(thing));
        thing.updateTargetBindings();
        _ui.showCornerTip(thing, 'P');
    };

    this.pIsExpanded = function (group) {
        return group.data && group.data.pExpanded === true;
    };

    // ---------------------- undo/redo --------------------

    this.canUndo = function () {
        return _diagram.commandHandler.canUndo();
    };

    this.undo = function () {
        _diagram.commandHandler.undo();
        _diagram.layoutDiagram(true);
    };

    this.canRedo = function () {
        return _diagram.commandHandler.canRedo();
    };

    this.redo = function () {
        _diagram.commandHandler.redo();
        _diagram.layoutDiagram(true);
    };

    this.refresh = function () {
        _diagram.updateAllTargetBindings();
        _diagram.layoutDiagram(true);
    };

    // ------------------- utility ----------------------

    // check for a rect with NaN X/Y/W/H coords, so we can do stuff with it such as unionRect
    // (NaN,NaN,0,0) => (0,0,0,0)
    this.safeRect = function (rect) {
        if (isNaN(rect.x)) {
            rect.x = 0;
        }
        if (isNaN(rect.y)) {
            rect.y = 0;
        }
        if (isNaN(rect.width)) {
            rect.width = 0;
        }
        if (isNaN(rect.height)) {
            rect.height = 0;
        }
        return rect;
    };

    // ------------------- debug map model ----------------------

    this.loadModel = function () {
        $('#map-model-debug').val(_diagram.model.toJson());
    };

    this.saveModel = function () {
        _diagram.model = go.Model.fromJson($('#map-model-debug').val());
        _diagram.updateAllTargetBindings();
        _diagram.model.addChangedListener(_autosave.modelChanged);
        _autosave.saveOnModelChanged = true;
    };
};

// TODO: turn off in production
//console.log('diagram model:' + _diagram.model.toJson());

},{}],12:[function(require,module,exports){
// functions for editing perspectives AND distinctions, which work similarly in the UI

'use strict';

SandbankEditor.Perspectives = function ($scope, map) {

    var self = this;

    // temporary state flag for adding/removing P/D selections programmatically
    var selectingLinkedThings = false;

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        //console.log('Perspectives, currentTabChanged');
        if (newValue == map.getUi().TAB_ID_PERSPECTIVES) {
            // opening perspectives
            setPorDThing('P');
            map.setEditingBlocked(true);
        } else if (oldValue == map.getUi().TAB_ID_PERSPECTIVES) {
            // closing perspectives
            saveLinks('P');
            map.setEditingBlocked(false);
        } else if (newValue == map.getUi().TAB_ID_DISTINCTIONS) {
            // opening distinctions
            setPorDThing('D');
            map.setEditingBlocked(true);
        } else if (oldValue == map.getUi().TAB_ID_DISTINCTIONS) {
            // closing distinctions
            saveLinks('D');
            map.setEditingBlocked(false);
        }
    };

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.getUi().currentTabIs(map.getUi().TAB_ID_PERSPECTIVES) || map.getUi().currentTabIs(map.getUi().TAB_ID_DISTINCTIONS)) {
                updateLinks();
            }
        }
    };

    // ---------- P/D Editor state

    this.isInPOrDEditorMode = function () {
        return map.getUi().state.perspectivePointKey !== null || map.getUi().state.distinctionThingKey !== null;
    };

    this.isInPEditorMode = function () {
        return map.getUi().state.perspectivePointKey !== null;
    };

    this.isInDEditorMode = function () {
        return map.getUi().state.distinctionThingKey !== null;
    };

    this.isPEditorPoint = function (group) {
        return map.getUi().state.perspectivePointKey == group.data.key;
    };

    this.isDEditorThing = function (group) {
        return map.getUi().state.distinctionThingKey == group.data.key;
    };

    // NB: this is called via map.getCornerFunction, so we get the extra corner arg, which we can ignore
    this.setPEditorPoint = function (thing, corner) {
        if ($scope.canEdit) {
            map.getUi().openTab(map.getUi().TAB_ID_PERSPECTIVES);
        }
    };

    this.setDEditorThing = function (thing) {
        if ($scope.canEdit) {
            // NB: need to select only this thing, since this is invoked
            // by a control-click, which will not automatically select just it
            map.getDiagram().clearSelection();
            thing.isSelected = true;
            map.getUi().openTab(map.getUi().TAB_ID_DISTINCTIONS);
        }
    };

    // -----------------------

    this.isPerspectivePoint = function (group) {
        var links = group.findLinksOutOf();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    };

    this.isSelectedPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && map.pIsExpanded(link.fromNode) && link.fromNode.isSelected) {
                return true;
            }
        }
        return false;
    };

    this.isToggledPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && map.pIsExpanded(link.fromNode)) {
                return true;
            }
        }
        return false;
    };

    this.isMouseOverPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && link.fromNode == map.getUi().mouseOverGroup) {
                return true;
            }
        }
        return false;
    };

    this.getPerspectiveViewWeight = function (group) {
        var mode = map.getUi().getMapEditorOptions().perspectiveMode;
        if (mode == 'spotlight' || mode == 'both') {
            return (self.isSelectedPerspectiveView(group) ? 1 : 0) + (self.isToggledPerspectiveView(group) ? 1 : 0) + (self.isMouseOverPerspectiveView(group) ? 1 : 0);
        } else {
            return 0;
        }
    };

    // -----------------------

    // category is "P" or "D" (perspectives or distinctions)
    function setPorDThing(category) {
        // if already set, must do save perspectives or save distinctions
        if (map.getUi().state.perspectivePointKey || map.getUi().state.distinctionThingKey) return;

        var thing = map.getDiagram().selection.first();
        //console.log('setPorDThing: ' + thing);
        if (thing instanceof go.Group) {
            var key = thing.data.key;
            if (category == 'P') {
                map.getUi().state.perspectivePointKey = key;
            } else if (category == 'D') {
                map.getUi().state.distinctionThingKey = key;
            }

            // select views/others
            selectLinkedThingsFor(thing, category);
        }
    }

    // this is called when the selection changes - if the thing is set,
    // adds/removes D/P links according to what is selected; otherwise
    // just shows/hides D/P links for the selected thing(s)
    function updateLinks() {
        if (selectingLinkedThings) // selection is being changed programmatically, so don't respond
            return;

        var pOrDThing = null;
        var category = null;
        if (map.getUi().state.perspectivePointKey) {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.perspectivePointKey);
            category = 'P';
        } else if (map.getUi().state.distinctionThingKey) {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.distinctionThingKey);
            category = 'D';
        }

        var addLinksTo = new go.List();
        var removeLinks = new go.List();

        // iterate through all things
        if (category) {
            var layers = map.getDiagram().layers;
            while (layers.next()) {
                var layer = layers.value;
                var parts = layer.parts;
                while (parts.next()) {
                    var part = parts.value;
                    if (part instanceof go.Group) {
                        // calculate links to add/remove based on selection
                        if (pOrDThing) {
                            var links = part.findLinksInto();
                            var existingLink = null;
                            while (links.next()) {
                                var link = links.value;
                                if (link.fromNode.data.key == pOrDThing.data.key && link.data.category == category) existingLink = link;
                            }

                            // decide whether to add or remove a link to the part, depending on whether
                            // it is selected and whether a link exists
                            if (!existingLink && part.isSelected) addLinksTo.add(part);else if (existingLink && !part.isSelected) removeLinks.add(existingLink);
                        }
                    }
                }
            }
        }

        // do the adding/removing of links
        var adds = addLinksTo.iterator;
        while (adds.next()) {
            map.getDiagram().model.startTransaction('add link');
            var to = adds.value;
            console.log('updateLinks: adding link from ' + pOrDThing + ' to ' + to);
            if (category == 'D' && pOrDThing.data.key == to.data.key) {
                pOrDThing.isSelected = false;
                alert('You can\'t distinguish a thing from itself!');
                continue;
            }
            map.getDiagram().model.addLinkData({
                from: pOrDThing.data.key,
                to: to.data.key,
                fromPort: category,
                toPort: category,
                category: category
            });
            map.getDiagram().model.commitTransaction('add link');
        }
        var removes = removeLinks.iterator;
        while (removes.next()) {
            var remove = removes.value;
            console.log('updateLinks: removing link from ' + remove.fromNode + ' to ' + remove.toNode);
            map.getDiagram().model.startTransaction('remove link');
            map.getDiagram().remove(remove);
            map.getDiagram().model.removeLinkData(remove.data);
            map.getDiagram().model.commitTransaction('remove link');
        }

        // show links
        map.getDiagram().updateAllTargetBindings();
    }

    function saveLinks(category) {
        var pOrDThing = null;
        if (category == 'P') {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.perspectivePointKey);
            map.getUi().state.perspectivePointKey = null;
        } else if (category == 'D') {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.distinctionThingKey);
            map.getUi().state.distinctionThingKey = null;
        }

        map.getDiagram().clearSelection();
        map.getDiagram().updateAllTargetBindings();
    }

    function selectLinkedThingsFor(group, category) {
        selectingLinkedThings = true;
        map.getDiagram().clearSelection();

        var links = group.findLinksOutOf();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == category) link.toNode.isSelected = true;
        }

        selectingLinkedThings = false;
    }
};

},{}],13:[function(require,module,exports){
// functions for the presenter/slides

'use strict';

SandbankEditor.Presenter = function ($scope, map) {

    var self = this;

    // constants
    this.SLIDE_BLOCKER_WIDTH = 1000;
    this.SLIDE_BLOCKER_COLOR = '#fff';
    this.SLIDE_BLOCKER_OPACITY = 0.9;

    // state vars
    this.currentSlideIndex = null;
    this.isPresenting = false;
    this.showTOC = false;
    this.isCreatingThumbnail = false;

    // mask applied around slide region when presenting
    this.slideBlocker = null;

    this.diagramAspectRatio = null;

    this.init = function () {};

    this.autosave = function () {
        map.getAutosave().save('edit_presenter');
    };

    // ---------- editing functions for different slide types -------------

    // NB: hasLinks can have values false, 1, or true (1 means only a single link)
    this.slideTypes = [{
        name: 'TITLE_BODY', label: 'Title and Body',
        hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: false, hasMapSummary: false, hasLinks: false
    }, {
        name: 'TITLE_BODY_MAP', label: 'Title, Body and MetaMap',
        hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
    }, {
        name: 'ACTIVITY_MAP', label: 'Lesson Activity and MetaMap',
        hasTitle: true, hasNotes: true, hasChecks: true, hasMapRegion: true, hasMapSummary: false, hasLinks: true
    }, {
        name: 'MAP_ONLY', label: 'MetaMap only',
        hasTitle: true, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
    }, {
        name: 'MAP_SUMMARY', label: 'MetaMap Summary',
        hasTitle: false, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: true, hasLinks: false
    }];

    // ------------------ link/attachment types -----------------------

    this.linkTypes = [{ name: '', label: '-- Select attachment type --' }, { name: 'WEB', label: 'Web Page' }, { name: 'PDF', label: 'PDF' }, { name: 'DOC', label: 'Document' }, { name: 'SPREADSHEET', label: 'Spreadsheet' }, { name: 'PRESENTATION', label: 'Presentation' }, { name: 'METAMAP', label: 'MetaMap' }, { name: 'IMAGE', label: 'Image' }, { name: 'AUDIO', label: 'Audio' }, { name: 'VIDEO', label: 'Video' }, { name: 'SURVEY', label: 'Survey' }, { name: 'WORKSHEET', label: 'Worksheet' }];

    // ------------ list of all things in the map, for map summary slides ---------------------

    this.ideaList = '';

    // only call this occasionally, as they won't be editing the map while presenter is open
    function updateIdeaList() {
        var nodes = map.getDiagram().nodes;
        var list = [];
        while (nodes.next()) {
            if (nodes.value instanceof go.Group) {
                list.push(nodes.value.data.text);
            }
        }
        list.sort();

        // filter out placeholder names - see map.js:getNewThingData, createSister, etc.
        list = _.difference(_.uniq(list, true), map.getGenerator().getPlaceholderIdeaNames(), ['New Idea', 'New Distinguished Idea', 'New Related Idea', 'New Relationship Idea', 'New Part Idea', 'Idea', 'Part', 'Relationship Idea'] // newer simplified names
        );

        self.ideaList = list.join(', ');
    }

    this.summaryAnalytics = [{ name: 'COUNT_THINGS', singularLabel: 'Distinction', pluralLabel: 'Distinctions' }, { name: 'COUNT_SYSTEMS', singularLabel: 'System', pluralLabel: 'Systems' }, { name: 'COUNT_RELATIONSHIPS', singularLabel: 'Relationship', pluralLabel: 'Relationships' }, { name: 'COUNT_PERSPECTIVES', singularLabel: 'Perspective', pluralLabel: 'Perspectives' }, { name: 'COUNT_RTHINGS', singularLabel: 'Relationship Idea', pluralLabel: 'Relationship Ideas' }, { name: 'COUNT_SYSTEM_RTHINGS', singularLabel: 'Relationship System', pluralLabel: 'Relationship Systems' }, { name: 'COUNT_SYSTEM_PERSPECTIVES', singularLabel: 'Perspective System', pluralLabel: 'Perspective Systems' }, { name: 'COUNT_DISTINCTIONS', singularLabel: 'Advanced Distinction', pluralLabel: 'Advanced Distinctions' }];

    this.addCheck = function (nodeData) {
        nodeData.checks.push({ text: '' });
        self.autosave();
    };

    this.deleteCheck = function (check, nodeData) {
        var i = _.indexOf(nodeData.checks, check);
        nodeData.checks.splice(i, 1);
        self.autosave();
    };

    this.addLink = function (nodeData) {
        nodeData.links.push({ title: '', url: '', type: '' });
        self.autosave();
    };

    this.deleteLink = function (link, nodeData) {
        var i = _.indexOf(nodeData.links, link);
        nodeData.links.splice(i, 1);
        self.autosave();
    };

    this.toggleTOC = function () {
        $scope.safeApply(function () {
            if (self.isPresenting) {
                self.showTOC = !self.showTOC;
            }
        });
    };

    // NB: can't create this in init as the diagram doesn't exist yet...
    function maybeInitSlideBlocker() {
        if (!self.slideBlocker) {
            var mk = go.GraphObject.make;
            self.slideBlocker = mk(go.Node, go.Panel.Auto, {
                layerName: 'Tool',
                opacity: self.SLIDE_BLOCKER_OPACITY
            }, mk(go.Shape, 'Rectangle', {
                fill: null,
                stroke: self.SLIDE_BLOCKER_COLOR,
                strokeWidth: 1000
            }));
            map.getDiagram().add(self.slideBlocker);
        }
    }

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (oldValue == map.getUi().TAB_ID_PRESENTER) {
            // closing tab
            self.stopPresenting();
        } else if (newValue == map.getUi().TAB_ID_PRESENTER) {
            // opening tab
            // show slides (see layouts.slideTemplate, binding of visible attr)
            self.diagramAspectRatio = $('#diagram').width() / $('#diagram').height();
            console.log('diagramAspectRatio: ' + self.diagramAspectRatio);

            $scope.map.getDiagram().updateAllTargetBindings();
            updateIdeaList();
            if (!self.currentSlideIndex && self.getSlideNodeDatas().length > 0) {
                self.currentSlideIndex = 1;
            }
            self.slideThumbnailSelected(1);
        }
    };

    this.handleDiagramEvent = function (eventName, e) {
        if (!map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER)) {
            return;
        }

        if (eventName == 'SelectionDeleting') {
            var selection = e.subject;
            if (selection.count == 1) {
                var thing = selection.first();
                if (thing instanceof go.Node && thing.data.category == 'slide') {
                    if (!confirm('Delete this slide from the presentation?')) {
                        e.cancel = true;
                    }
                }
            }
        } else if (eventName == 'SelectionDeleted') {
            // if slide is deleted from canvas rather than by thumbnail x button, need to update indexes
            compactSlideIndexes();
        } else if (eventName == 'SelectionMoved' || eventName == 'PartResized') {
            // clear thumbnail cache
            thumbnailCache = [];
        } else if (eventName == 'ViewportBoundsChanged') {}
    };

    this.windowResized = _.debounce(function () {
        self.slideThumbnailSelected(self.currentSlideIndex);
    }, 1000);

    this.showSidebar = function () {
        return map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) && (!self.isPresenting || self.showTOC);
    };

    this.disableMapToolbarButtons = function () {
        return !map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) || self.isPresenting || !self.getCurrentSlideType().hasMapRegion;
    };

    // returns an array of node data objects (not the slide nodes themselves)
    this.getSlideNodeDatas = function () {
        var diagram = map.getDiagram();
        var nodes = diagram.model.nodeDataArray;
        var nodeDatas = _.filter(nodes, function (node) {
            return node.category == 'slide';
        });
        nodeDatas = _.sortBy(nodeDatas, function (nodeData) {
            return nodeData.index;
        });
        //console.log('getSlideNodeDatas, indexes: ' + _.pluck(slidesData, 'index'));
        return nodeDatas;
    };

    this.getSlideCount = function () {
        return self.getSlideNodeDatas().length;
    };

    this.getActivitySlideCount = function () {
        return _.where(self.getSlideNodeDatas(), { type: 'ACTIVITY_MAP' }).length;
    };

    this.getSlideType = function (typeName) {
        return _.findWhere(self.slideTypes, { name: typeName });
    };

    this.getCurrentSlideType = function () {
        var slide = findSlideByIndex(self.currentSlideIndex);
        if (slide) {
            return _.findWhere(self.slideTypes, { name: slide.data.type });
        } else {
            return {};
        }
    };

    function findSlideByIndex(index) {
        var diagram = map.getDiagram();
        var slideData = _.find(self.getSlideNodeDatas(), function (slideData) {
            return slideData.index == index;
        });
        if (slideData !== undefined) {
            return diagram.findNodeForKey(slideData.key);
        } else {
            return undefined;
        }
    }

    // increment is -1 or +1
    this.moveSlide = function (index, increment) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            var neighbor = findSlideByIndex(index + increment);
            if (slide && neighbor) {
                //console.log('moveSlide: swapping ' + slide.data.key + ' with ' + neighbor.data.key);
                diagram.startTransaction('move slide');
                diagram.model.setDataProperty(slide.data, 'index', slide.data.index + increment);
                diagram.model.setDataProperty(neighbor.data, 'index', neighbor.data.index - increment);
                diagram.commitTransaction('move slide');
                thumbnailCache = [];
            }
        });
    };

    function compactSlideIndexes() {
        $scope.safeApply(function () {
            //console.log('compactSlideIndexes');
            var slidesData = self.getSlideNodeDatas();
            var diagram = map.getDiagram();
            var newIndex = 1;
            diagram.startTransaction('compact slide indexes');
            _.each(slidesData, function (slideData) {
                diagram.model.setDataProperty(slideData, 'index', newIndex);
                //console.log('compactSlideIndexes: set index for ' + slideData.key + ' to ' + newIndex);
                newIndex++;
            });
            diagram.commitTransaction('compact slide indexes');
        });
    }

    function getNewSlideKey() {
        var diagram = map.getDiagram();
        var i = 1;
        while (diagram.model.findNodeDataForKey('slide-' + i)) {
            i++;
        }
        return 'slide-' + i;
    }

    // NB: indexes (and keys?) must be 1-based, otherwise first slide gets screwed up
    // (somewhere the index shows up as '' instead of 0)
    function getNewSlideIndex() {
        var slides = self.getSlideNodeDatas();
        return slides.length + 1;
    }

    this.addSlide = function (typeName) {
        $scope.safeApply(function () {
            console.log('addSlide: ' + typeName);
            var diagram = map.getDiagram();

            var db = map.computeMapBounds();
            db.inflate(db.width / 20, db.height / 10);
            var newLoc = db.x + ' ' + db.y;
            var newIndex = getNewSlideIndex();

            var slideType = _.findWhere(self.slideTypes, { name: typeName });

            diagram.startTransaction('add slide');
            diagram.model.addNodeData({
                key: getNewSlideKey(),
                category: 'slide',
                index: newIndex,
                isGroup: false,
                width: db.width,
                height: db.height,
                loc: newLoc,
                level: 0,
                children: 0,
                type: typeName,
                title: '',
                notes: '',
                checks: [],
                hasRegion: slideType.hasMapRegion,
                isSummary: slideType.hasMapSummary,
                links: []
            });
            diagram.commitTransaction('add slide');
            thumbnailCache = [];

            self.slideThumbnailSelected(newIndex); // trigger display of edit form, zoom to map region if applicable
        });
    };

    this.duplicateSlide = function (index) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var newIndex = getNewSlideIndex();
            var slide = findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction('duplicate slide');

                // bump up indexes on subsequent slides to make room for new slide after current one
                _.each(self.getSlideNodeDatas(), function (slideData) {
                    if (slideData.index > index) {
                        diagram.model.setDataProperty(slideData, 'index', slideData.index + 1);
                    }
                });

                // NB: creating a new nodeData object here rather than copying and modifying, to avoid copying $$hashKey (??)
                diagram.model.addNodeData({
                    key: getNewSlideKey(),
                    category: 'slide',
                    index: index + 1,
                    isGroup: false,
                    width: slide.data.width,
                    height: slide.data.height,
                    loc: slide.data.loc,
                    level: 0,
                    children: 0,
                    type: slide.data.type,
                    title: slide.data.title + ' (Copy)',
                    notes: slide.data.notes,
                    checks: slide.data.checks, // clone?
                    hasRegion: slide.data.hasRegion,
                    isSummary: slide.data.isSummary,
                    links: slide.data.links // clone?
                });
                diagram.commitTransaction('duplicate slide');
                thumbnailCache = [];
            }
        });
    };

    this.removeSlide = function (index) {
        $scope.safeApply(function () {
            //console.log('removeSlide: ' + index);
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction('remove slide');
                diagram.model.removeNodeData(slide.data);
                diagram.commitTransaction('remove slide');
            }
            self.currentSlideIndex = null;
            thumbnailCache = [];
            compactSlideIndexes();
        });
    };

    var thumbnailCache = [];

    this.getSlideThumbnail = function (index) {
        return thumbnailCache[index];
    };

    this.createSlideThumbnails = function () {
        _.each(self.getSlideNodeDatas(), function (nd) {
            self.createSlideThumbnail(nd.index);
        });
    };

    this.createSlideThumbnail = function (index) {
        //console.log('createSlideThumbnail');

        var thumbWidth = 1000;
        var thumbHeight = 600;
        var diagram = map.getDiagram();

        var slide = findSlideByIndex(index);
        if (!slide) {
            return '';
        } else if (!slide.data.hasRegion && !slide.data.isSummary) {
            return '';
        } else {
            var db = diagram.documentBounds;
            var sb;
            if (slide.data.isSummary) {
                // for a summary slide we shoot the whole map
                sb = map.safeRect(map.computeMapBounds());
            } else {
                // otherwise just shoot the slide region
                sb = slide.part.actualBounds;
            }

            var imagePosition = new go.Point(sb.x, sb.y);
            //console.log('getSlideThumbnail, slide bounds: ' + sb + ', document bounds: ' + db + ', imagePosition: ' + imagePosition);

            var wScale = thumbWidth / sb.width;
            var hScale = thumbHeight / sb.height;
            var thumbScale = Math.min(wScale, hScale);
            console.log('scale: ' + wScale + ',' + hScale);

            var w = thumbScale * sb.width;
            var h = thumbScale * sb.height;
            //console.log('thumbnail w/h: ' + w + ',' + h);

            // hide slides temporarily while creating thumbnail
            self.isCreatingThumbnail = true;
            diagram.updateAllTargetBindings();

            diagram.scale = thumbScale;

            var imgData = diagram.makeImageData({
                size: new go.Size(w, h),
                position: imagePosition,
                scale: thumbScale
            });

            self.isCreatingThumbnail = false;
            diagram.updateAllTargetBindings();

            thumbnailCache[index] = imgData;

            return imgData;
        }
    };

    // gets a thumbnail of the whole map, for saving (see autosave.js)
    this.getMapThumbnail = function () {

        var diagram = map.getDiagram();
        var sb = map.safeRect(map.computeMapBounds());
        sb.grow(10, 10, 10, 10);
        var w = 150;
        var h = 100;

        // hide slides temporarily while creating thumbnail
        self.isCreatingThumbnail = true;
        diagram.updateAllTargetBindings();

        var imgData = diagram.makeImageData({
            scale: Math.min(h / sb.height, w / sb.width),
            position: new go.Point(sb.x, sb.y),
            size: new go.Size(w, h)
        });

        self.isCreatingThumbnail = false;
        diagram.updateAllTargetBindings();

        return imgData;
    };

    // called via ng-click on thumbnail
    this.slideThumbnailSelected = function (index) {
        //console.log('slideThumbnailSelected: ' + index);
        var diagram = map.getDiagram();
        var slide = findSlideByIndex(index);

        $scope.safeApply(function () {
            // NB: order of statements is important here, as selectSlide can trigger changedSelection with an empty selection sometimes... ??
            selectSlide(index);
            self.currentSlideIndex = index;
            diagram.updateAllTargetBindings(); // show/hide slide nodes - see templates.js: slideTemplate

            if (slide) {
                zoomToSlideInCenter(slide);

                if (self.isPresenting) {
                    self.showTOC = false;
                }
            }
        });
    };

    this.needsNarrowCanvas = function () {
        var slide = findSlideByIndex(self.currentSlideIndex);
        return map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) && slide != null && (slide.data.type == 'TITLE_BODY_MAP' || slide.data.type == 'ACTIVITY_MAP' || slide.data.type == 'MAP_SUMMARY');
    };

    // sets the slide node as selected in the diagram.
    function selectSlide(index) {
        $scope.safeApply(function () {
            //console.log('select slide: ' + index);
            var diagram = map.getDiagram();
            diagram.clearSelection();
            if (index) {
                var slide = findSlideByIndex(index);
                if (slide) {
                    slide.isSelected = true;
                }
            }
            // TODO: scroll to slide?
        });
    }

    this.playSlide = function (index) {
        var diagram = map.getDiagram();
        map.getUi().openTab(map.getUi().TAB_ID_PRESENTER);

        var slides = self.getSlideNodeDatas();
        if (slides.length) {
            self.showTOC = false;
            presentSlide(index);
        }
    };

    // increment is -1 or +1
    this.advanceSlide = function (increment) {
        //console.log('advanceSlide, currentSlideIndex: ' + self.currentSlideIndex);
        $scope.safeApply(function () {
            var slide = findSlideByIndex(self.currentSlideIndex);
            if (slide) {
                self.currentSlideIndex += increment;
                if (self.isPresenting) {
                    presentSlide(self.currentSlideIndex);
                }
            }
        });
    };

    function presentSlide(index) {
        //console.log('presentSlide');
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            if (!slide) {
                return;
            }

            diagram.clearSelection();
            // NB: need to set this after clearSelection, as that will set it to null! (see changedSelection)
            self.currentSlideIndex = index;
            map.setEditingBlocked(true);
            //console.log('presentSlide, index: ' + index + ', slide: ' + slide + ', currentSlideIndex: ' + self.currentSlideIndex);

            maybeInitSlideBlocker();
            var blockerW = self.SLIDE_BLOCKER_WIDTH;

            if (slide.data.hasRegion) {
                zoomToSlideInCenter(slide);

                // show slide blocker
                self.slideBlocker.desiredSize = new go.Size(slide.actualBounds.width + 2 * blockerW, slide.actualBounds.height + 2 * blockerW);
                self.slideBlocker.location = new go.Point(slide.actualBounds.x - blockerW, slide.actualBounds.y - blockerW);
                self.slideBlocker.visible = true;
                //console.log('slideBlocker: ' + self.slideBlocker.actualBounds);
            } else if (slide.data.isSummary) {
                zoomToSlideInCenter(slide);
                self.slideBlocker.visible = false;
            } else {
                map.getUi().resetZoom();
                self.slideBlocker.visible = false;
            }

            self.isPresenting = true;
            $('body').addClass('presenter-playing');

            map.getDiagram().updateAllTargetBindings(); // hide slide nodes - see templates.js: slideTemplate
        });
    }

    // zoom the diagram to show the given slide in the center of the canvas
    function zoomToSlideInCenter(slide) {
        var diagram = map.getDiagram();

        window.setTimeout(function () {

            var halfWidth = slide.data.type != 'MAP_ONLY';
            var zoomRect = self.getLetterboxedRect(slide.actualBounds, halfWidth);
            zoomRect.inflate(zoomRect.width / 10, zoomRect.height / 10);
            diagram.zoomToRect(zoomRect, go.Diagram.Uniform);
        }, 100);
    }

    // Returns a rectangle containing the given rect, but with appropriate width or height added
    // to give it same aspect ratio as the diagram.
    this.getLetterboxedRect = function (rect, halfWidth) {

        // NB: we calculate the aspect ratio when the tab is opened,
        // rather than each time as the diagram size might be changing...
        var dar = halfWidth ? self.diagramAspectRatio / 2 : self.diagramAspectRatio;
        console.log('rect: ' + rect + ', dar: ' + dar);

        var rectAspectRatio = rect.width / rect.height;

        if (dar > rectAspectRatio) {
            // tall skinny rect, short wide target AR, so add side padding to the rect
            var lbw = rect.height * dar; // because lbw / lbh == dar == lbw / rect.height (lbh == rect.height)
            return rect.copy().inflate((lbw - rect.width) / 2, 0); // add half the width difference to each side of the rect
        } else {
            // short wide rect, tall skinny target AR, so add top/bottom padding to the rect
            var lbh = rect.width / dar; // because lbw / lbh == dar == lbh / rect.width (lbw == rect.width)
            return rect.copy().inflate(0, (lbh - rect.height) / 2); // add half the height difference to top/bottom of the rect
        }
    };

    this.stopPresenting = function () {
        $scope.safeApply(function () {
            //console.log('stopPresenting, currentSlideIndex: ' + self.currentSlideIndex);
            var diagram = map.getDiagram();

            if (self.slideBlocker) {
                self.slideBlocker.visible = false;
            }

            //self.currentSlideIndex = null;
            self.isPresenting = false;
            $('body').removeClass('presenter-playing');

            map.getDiagram().updateAllTargetBindings(); // show slide nodes

            diagram.clearSelection();
            map.setEditingBlocked(false);
            //map.getUi().resetZoom();
        });
    };
};

// adjust zooming of map region
//self.windowResized();

},{}],14:[function(require,module,exports){
// functions for sharing maps, with a modal dialog

'use strict';

window.SandbankSharing = {};

SandbankSharing = function ($scope, $http, $resource, $modal, $log) {

    this.openModal = function (_mapIds, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_map_sharing_modal.html', // see views/shares/_template_map_sharing_modal
            backdrop: 'static',
            controller: sharingModalCtrl,
            windowClass: 'sharing-modal',
            resolve: {
                userId: function userId() {
                    return $scope.userId;
                },
                userProfile: function userProfile() {
                    return $scope.userProfile;
                },
                mapIds: function mapIds() {
                    return _mapIds;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for sharing modal ---------------------

    var sharingModalCtrl = function sharingModalCtrl($scope, $modalInstance, userId, userProfile, mapIds, onUpdate) {

        $scope.userId = userId;
        $scope.userProfile = userProfile;
        $scope.mapIds = mapIds;

        // all existing shares for selected maps
        // format: [{mapId:1, shareId:1, canEdit:true, userId:2, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.mapShares = [];

        // existing shares, grouped for display
        // format: [{name:'foo', userEmail:'foo@bar.com', userId: null, groupId: id, organizationId: null, isPublic:false, canEdit:true, mapIds:[1,2]}, ...]
        $scope.existingShares = [];

        // new shares added in the dialog
        // format: [{shareType:SHARE_TYPE_INDIVIDUAL, sharePermission:SHARE_PERMISSION_CANVIEW, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.newShares = [];

        // all updated shares, to be saved
        // format: [{mapId:1, canEdit:false, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.updatedShares = [];

        // indexes of users/groups/orgs - format: [{id:1, name:'foo'}, ...]
        $scope.users = [];
        $scope.groups = [];
        $scope.organizations = [];

        // constants
        $scope.SHARE_TYPE_INDIVIDUAL = 'One or more Individuals';
        $scope.SHARE_TYPE_GROUP = 'Group';
        $scope.SHARE_TYPE_ORGANIZATION = 'ThinkNation';
        $scope.SHARE_TYPE_PUBLIC = 'All MetaMap Users';

        $scope.shareTypes = [$scope.SHARE_TYPE_INDIVIDUAL,
        //$scope.SHARE_TYPE_GROUP,
        $scope.SHARE_TYPE_ORGANIZATION, $scope.SHARE_TYPE_PUBLIC];

        $scope.SHARE_PERMISSION_CANVIEW = 'Can view';
        $scope.SHARE_PERMISSION_CANEDIT = 'Can edit';

        $scope.sharePermissions = [$scope.SHARE_PERMISSION_CANVIEW, $scope.SHARE_PERMISSION_CANEDIT];

        $scope.canShareCultureMap = function (share) {
            return _.findWhere($scope.userProfile.memberships, {
                organizationId: share.organizationId,
                leader: true
            });
        };

        // get existing shares
        function loadShares(mapIds) {
            $http.get('/shares/map_shares.json?ids=' + mapIds.join(',')).then(function (response) {
                if (response.status === 200 || response.status === 204) {
                    $scope.mapShares = response.data.mapShares;
                    $scope.users = response.data.users;
                    $scope.groups = response.data.groups;
                    $scope.organizations = response.data.organizations;
                    initExistingShares();
                    if (!$scope.existingShares.length && $scope.canAddNewShare()) {
                        $scope.addNewShare();
                    }
                }
            }, function () {
                alert('Could not load sharing info');
            });
        }

        loadShares(mapIds);

        // group the existing shares by user, group, org and public
        function initExistingShares() {
            // find all emails that occur in a share
            var userEmails = _.without(_.uniq(_.pluck($scope.mapShares, 'userEmail')), null);
            // build an array of shares, one for each email, with the applicable map IDs
            var sharesByUserEmail = _.map(userEmails, function (email) {
                var user = _.findWhere($scope.users, {
                    email: email
                });
                return {
                    isDeleted: false,
                    userEmail: email,
                    userId: user ? user.id : null,
                    groupId: null,
                    organizationId: null,
                    isPublic: false,
                    isCultureMap: false,
                    name: email,
                    // NB: for this attribute we don't try to summarize the value for all the existing shares,
                    // because it would be too complicated to display...
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        userEmail: email
                    }), 'mapId')
                };
            });

            var groupIds = _.without(_.uniq(_.pluck($scope.mapShares, 'groupId')), null);
            var sharesByGroupId = _.map(groupIds, function (id) {
                var group = _.findWhere($scope.groups, {
                    id: id
                });
                return {
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: id,
                    organizationId: null,
                    isPublic: false,
                    isCultureMap: false,
                    name: 'Group: ' + (group ? group.name : ''),
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        groupId: id
                    }), 'mapId')
                };
            });

            var organizationIds = _.without(_.uniq(_.pluck($scope.mapShares, 'organizationId')), null);
            var sharesByOrganizationId = _.map(organizationIds, function (id) {
                var organization = _.findWhere($scope.organizations, {
                    id: id
                });
                return {
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: null,
                    organizationId: id,
                    isPublic: false,
                    isCultureMap: $scope.mapShares.length == 1 && $scope.mapShares[0].isCultureMap,
                    name: 'ThinkNation: ' + (organization ? organization.name : ''),
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        organizationId: id
                    }), 'mapId')
                };
            });

            // are any of the selected maps shared publicly?
            var publicShares = [];
            if (_.where($scope.mapShares, {
                isPublic: true
            }).length) {
                publicShares = [{
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: null,
                    organizationId: null,
                    isPublic: true,
                    isCultureMap: false,
                    name: 'Everyone',
                    canEdit: false,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        isPublic: true
                    }), 'mapId')
                }];
            }

            $scope.existingShares = _.union(sharesByUserEmail, sharesByGroupId, sharesByOrganizationId, publicShares);
        }

        function buildUpdatedShares() {
            $scope.updatedShares = [];

            // for each selected map, decompose the existingShares (grouped by user/group/org/public) into individual shares for saving
            _.each(mapIds, function (id) {
                // get existing shares for this map
                var existingSharesForMapId = _.filter($scope.existingShares, function (existingShare) {
                    // existingShares format: [{name:'foo', userEmail:'foo@bar.com', userId: null, groupId: id, organizationId: null, isPublic:false, isCultureMap:false, canEdit:true, mapIds:[1,2]}, ...]
                    return _.contains(existingShare.mapIds, id);
                });
                // decompose these into individual shares
                _.each(existingSharesForMapId, function (es) {
                    $scope.updatedShares.push({
                        isNew: false,
                        isDeleted: es.isDeleted,
                        mapId: id,
                        userEmail: es.userEmail,
                        userId: es.userId,
                        groupId: es.groupId,
                        organizationId: es.organizationId,
                        isPublic: es.isPublic,
                        isCultureMap: es.isCultureMap,
                        canEdit: es.canEdit
                    });
                });
            });

            // add in the newShares (for each selected map)
            _.each(mapIds, function (id) {
                _.each($scope.newShares, function (ns) {
                    $scope.updatedShares.push({
                        isNew: true,
                        mapId: id,
                        userEmail: ns.shareType == $scope.SHARE_TYPE_INDIVIDUAL ? ns.userEmail : null,
                        groupId: ns.shareType == $scope.SHARE_TYPE_GROUP ? ns.groupId : null,
                        organizationId: ns.shareType == $scope.SHARE_TYPE_ORGANIZATION ? ns.organizationId : null,
                        isPublic: ns.shareType == $scope.SHARE_TYPE_PUBLIC,
                        isCultureMap: ns.isCultureMap,
                        canEdit: ns.shareType == $scope.SHARE_TYPE_PUBLIC ? false : ns.sharePermission == $scope.SHARE_PERMISSION_CANEDIT,
                        message: ns.message
                    });
                });
            });
        }

        function saveShares(onUpdate) {
            $http.put('/shares/update_map_shares', $scope.updatedShares).then(function (response) {
                onUpdate();
            }, function () {
                alert('Could not save sharing info');
            });
        }

        $scope.canDeleteExistingShare = function () {
            return $scope.canAddNewShare();
        };

        $scope.deleteExistingShare = function (share) {
            share.isDeleted = true;
        };

        $scope.canAddNewShare = function () {
            // make sure all maps are owned by the current user
            var mapUserIds = _.uniq(_.pluck($scope.mapShares, 'mapUserId'));
            return mapUserIds.length == 0 || mapUserIds.length == 1 && mapUserIds[0] == $scope.userId;
        };

        $scope.addNewShare = function () {
            // NB: isPublic and canEdit are set in buildUpdateShares
            $scope.newShares.push({
                shareType: $scope.SHARE_TYPE_INDIVIDUAL,
                sharePermission: $scope.SHARE_PERMISSION_CANVIEW,
                userEmail: '',
                groupId: $scope.groups.length ? $scope.groups[0].id : null,
                organizationId: $scope.organizations.length ? $scope.organizations[0].id : null,
                isCultureMap: false,
                message: ''
            });
        };

        $scope.deleteNewShare = function (share) {
            var i = _.indexOf($scope.newShares, share);
            $scope.newShares.splice(i, 1);
        };

        $scope.ok = function () {
            buildUpdatedShares();
            saveShares(onUpdate);
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    sharingModalCtrl.$inject = ['$scope', '$modalInstance', 'userId', 'userProfile', 'mapIds', 'onUpdate'];
};

},{}],15:[function(require,module,exports){
// common core standards tab -
// this is delegated to the SandbankCcsTagging module, which handles CCS
// for a map OR the user profile - see tagging_ccs.js

"use strict";

SandbankEditor.Standards = function ($scope, map) {

    var self = this;

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.getUi().TAB_ID_STANDARDS) {
            // opening tab
            // if there are no links, show the modal
            if ($scope.canEdit && !$scope.ccsTagging.links.length) {
                $scope.ccsTagging.addLink();
            }
        }
        if (oldValue == map.getUi().TAB_ID_STANDARDS) {}
    };
};
// closing tab

},{}],16:[function(require,module,exports){
// functions for user-tagging maps, with a modal dialog

// NB: the complexity here is due to the need to show existing tags that may apply
// to any number of the selected maps, vs. new tags that will be added to all selected maps -
// the tagging info needs to be grouped and ungrouped when loading and saving to handle this.

'use strict';

window.SandbankTagging = {};

SandbankTagging = function ($scope, $http, $resource, $modal, $log) {

    this.openModal = function (_mapIds, _showDescription, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_map_tagging_modal.html', // see views/user_tags/_template_map_tagging_modal
            backdrop: 'static',
            controller: tagsModalCtrl,
            windowClass: 'tags-modal',
            resolve: {
                mapIds: function mapIds() {
                    return _mapIds;
                },
                showDescription: function showDescription() {
                    return _showDescription;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for tags modal ---------------------

    var tagsModalCtrl = function tagsModalCtrl($scope, $modalInstance, mapIds, showDescription, onUpdate) {

        $scope.mapIds = mapIds;

        // all existing tags for selected maps - format: [{mapId: 1, tagId: 1, tagName:'foo'}, ...]
        $scope.mapUserTags = [];

        // existing tags, grouped for display - format: [{name:'foo', mapIds:[1,2]}, ...]
        $scope.existingTags = [];

        // new tags added in the dialog - format: [{name:'foo'}, ...]
        $scope.newTags = [];

        // all updated tags, to be saved - tags format: [{mapId: 1, userTags: "foo, bar, bam"}, ...]
        $scope.updatedTags = { description: '', tags: [] };

        $scope.showDescription = showDescription;

        function loadTags(mapIds) {
            $http.get('/user_tags/map_user_tags.json?ids=' + mapIds.join(',')).then(function (response) {
                $scope.mapUserTags = response.data.mapUserTags;
                // NB: the map description is always passed back if we only pass one map ID,
                // but we may not display it in the dialog - depends on the value of the showDescription flag.
                if (mapIds.length == 1) {
                    $scope.updatedTags.description = response.data.mapDescription;
                }
                initExistingTags();
                $scope.addNewTag();
            }, function () {
                alert('Could not load tags');
            });
        }

        loadTags(mapIds);

        function initExistingTags() {
            var tagNames = _.uniq(_.pluck($scope.mapUserTags, 'tagName')).sort();
            $scope.existingTags = _.map(tagNames, function (name) {
                var mapUserTagsForName = _.where($scope.mapUserTags, { tagName: name });
                var mapIds = _.pluck(mapUserTagsForName, 'mapId');
                return {
                    name: name,
                    mapIds: mapIds
                };
            });
        }

        function buildUpdatedTags() {
            $scope.updatedTags.tags = [];
            _.each(mapIds, function (id) {
                var existingTagsForId = _.filter($scope.existingTags, function (existingTag) {
                    // existingTag format: {name:'foo', mapIds:[1,2]}
                    return _.contains(existingTag.mapIds, id);
                });
                $scope.updatedTags.tags.push({
                    mapId: id,
                    userTags: _.union(_.pluck(existingTagsForId, 'name'), _.without(_.pluck($scope.newTags, 'name'), '') // remove empty tags
                    ).join(', ')
                });
            });
        }

        function saveTags(onUpdate) {
            $http.put('/user_tags/update_map_user_tags', [$scope.updatedTags]).then(function (response) {
                onUpdate();
            }, function () {
                alert('Could not save tags');
            });
        }

        $scope.deleteExistingTag = function (tag) {
            var i = _.indexOf($scope.existingTags, tag);
            $scope.existingTags.splice(i, 1);
        };

        $scope.addNewTag = function () {
            $scope.newTags.push({ name: '' });
        };

        $scope.tagSelected = function (item, model, label) {
            //console.log('tagSelected: ' + item + ', ' + model + ', ' + label);
            $scope.addNewTag();
        };

        $scope.editingTagKeypress = function (e) {
            if (e.which == 13) {
                $scope.addNewTag();
            }
        };

        $scope.deleteNewTag = function (tag) {
            var i = _.indexOf($scope.newTags, tag);
            $scope.newTags.splice(i, 1);
            if (!$scope.newTags.length) {
                $scope.addNewTag(); // always leave at least one tag field
            }
        };

        // tag autocomplete
        $scope.getUserTags = function (viewValue) {
            var url = '/user_tags/list.json?q=' + viewValue;
            return $http.get(url).then(function (response) {
                return response.data.tags;
            });
        };

        $scope.ok = function () {
            buildUpdatedTags();
            saveTags(onUpdate);
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    tagsModalCtrl.$inject = ['$scope', '$modalInstance', 'mapIds', 'showDescription', 'onUpdate'];
};

},{}],17:[function(require,module,exports){
// goJS templates used in the editor

'use strict';

SandbankEditor.Templates = function ($scope, map) {

    var self = this;

    // constants
    this.groupFillColor = '#f9f9f9';

    this.init = function () {};

    // initialize template-related stuff that depends on the diagram (and therefore can't go in init())
    this.initTemplates = function (diagram) {
        diagram.groupTemplate = self.groupTemplate;
        diagram.nodeTemplate = self.slideTemplate;
        diagram.linkTemplate = self.linkTemplate;
        diagram.linkTemplateMap.add('P', self.pLinkTemplate);
        diagram.linkTemplateMap.add('D', self.dLinkTemplate);

        self.setTemporaryLinkTemplates(diagram.toolManager.linkingTool);
        self.setTemporaryLinkTemplates(diagram.toolManager.relinkingTool);

        diagram.toolManager.linkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
            self.handlePortTargeted(diagram.toolManager.linkingTool, realnode, realport, tempnode, tempport, toend);
        };

        diagram.toolManager.relinkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
            self.handlePortTargeted(diagram.toolManager.relinkingTool, realnode, realport, tempnode, tempport, toend);
        };

        diagram.toolManager.relinkingTool.updateAdornments = function (part) {
            go.RelinkingTool.prototype.updateAdornments.call(this, part);
            var from = part.findAdornment('RelinkFrom');
            var to = part.findAdornment('RelinkTo');
            // if (from)
            //     console.log('relinkfrom: ' + from.part.width);
        };

        diagram.toolManager.linkingTool.linkValidation = self.validateLink;
        diagram.toolManager.relinkingTool.linkValidation = self.validateLink;
    };

    // convenient abbreviation for creating templates
    var mk = go.GraphObject.make;

    // DSRP colors (from _variables.scss)
    var colorD = '#f2624c';
    var colorS = '#96c93d';
    var colorR = '#4cbfc2';
    var colorP = '#fbaa36';
    var colorPLight = '#FDDDAF';
    var colorPDark = '#C9882B';

    var eyeSvgPath = 'M 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00c 47.559,94.979, 144.341,160.00, 256.00,160.00c 111.657,0.00, 208.439-65.021, 256.00-160.00 C 464.442,161.021, 367.657,96.00, 256.00,96.00z M 382.225,180.852c 30.081,19.187, 55.571,44.887, 74.717,75.148 c-19.146,30.261-44.637,55.961-74.718,75.149C 344.427,355.257, 300.779,368.00, 256.00,368.00c-44.78,0.00-88.428-12.743-126.225-36.852 C 99.695,311.962, 74.205,286.262, 55.058,256.00c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65 C 130.725,190.866, 128.00,205.613, 128.00,221.00c0.00,70.692, 57.308,128.00, 128.00,128.00s 128.00-57.308, 128.00-128.00c0.00-15.387-2.725-30.134-7.704-43.799 C 378.286,178.39, 380.265,179.602, 382.225,180.852z M 256.00,205.00c0.00,26.51-21.49,48.00-48.00,48.00s-48.00-21.49-48.00-48.00s 21.49-48.00, 48.00-48.00 S 256.00,178.49, 256.00,205.00z';
    var eyeBlockedSvgPath = 'M 419.661,148.208 C 458.483,175.723 490.346,212.754 512.00,256.00 C 464.439,350.979 367.657,416.00 256.00,416.00 C 224.717,416.00 194.604,410.894 166.411,401.458 L 205.389,362.48 C 221.918,366.13 238.875,368.00 256.00,368.00 C 300.779,368.00 344.427,355.257 382.223,331.148 C 412.304,311.96 437.795,286.26 456.941,255.999 C 438.415,226.716 413.934,201.724 385.116,182.752 L 419.661,148.208 ZM 256.00,349.00 C 244.638,349.00 233.624,347.512 223.136,344.733 L 379.729,188.141 C 382.51,198.627 384.00,209.638 384.00,221.00 C 384.00,291.692 326.692,349.00 256.00,349.00 ZM 480.00,0.00l-26.869,0.00 L 343.325,109.806C 315.787,100.844, 286.448,96.00, 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00 c 21.329,42.596, 52.564,79.154, 90.597,106.534L0.00,453.131L0.00,480.00 l 26.869,0.00 L 480.00,26.869L 480.00,0.00 z M 208.00,157.00c 24.022,0.00, 43.923,17.647, 47.446,40.685 l-54.762,54.762C 177.647,248.923, 160.00,229.022, 160.00,205.00C 160.00,178.49, 181.49,157.00, 208.00,157.00z M 55.058,256.00 c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65C 130.725,190.866, 128.00,205.613, 128.00,221.00 c0.00,29.262, 9.825,56.224, 26.349,77.781l-29.275,29.275C 97.038,309.235, 73.197,284.67, 55.058,256.00z';
    var paperclipSvgPath = 'M 348.916,163.524l-32.476-32.461L 154.035,293.434c-26.907,26.896-26.907,70.524,0.00,97.422 c 26.902,26.896, 70.53,26.896, 97.437,0.00l 194.886-194.854c 44.857-44.831, 44.857-117.531,0.00-162.363 c-44.833-44.852-117.556-44.852-162.391,0.00L 79.335,238.212l 0.017,0.016c-0.145,0.152-0.306,0.288-0.438,0.423 c-62.551,62.548-62.551,163.928,0.00,226.453c 62.527,62.528, 163.934,62.528, 226.494,0.00c 0.137-0.137, 0.258-0.284, 0.41-0.438l 0.016,0.017 l 139.666-139.646l-32.493-32.46L 273.35,432.208l-0.008,0.00 c-0.148,0.134-0.282,0.285-0.423,0.422 c-44.537,44.529-116.99,44.529-161.538,0.00c-44.531-44.521-44.531-116.961,0.00-161.489c 0.152-0.152, 0.302-0.291, 0.444-0.423l-0.023-0.03 l 204.64-204.583c 26.856-26.869, 70.572-26.869, 97.443,0.00c 26.856,26.867, 26.856,70.574,0.00,97.42L 218.999,358.375 c-8.968,8.961-23.527,8.961-32.486,0.00c-8.947-8.943-8.947-23.516,0.00-32.46L 348.916,163.524z';

    // footer for image export
    var _exportFooter = null;

    // ------------------- debug info for groups/links --------------------------------

    function groupInfo(obj) {
        return obj.data.text + '\n' + 'object: ' + obj + '\n' + 'key: ' + obj.data.key + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'layout: ' + obj.layout + '\n' + 'data.layout: ' + obj.data.layout + '\n' + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + '\n' + 'freehand position (data.loc): ' + go.Point.parse(obj.data.loc) + '\n' + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + '\n' + 'getScale(): ' + map.getLayouts().getScale(obj) + '\n' + 'isLinkLabel: ' + obj.data.isLinkLabel + '\n' + 'labeledLink: ' + obj.labeledLink + '\n';
    }

    function nodeInfo(obj) {
        return 'object: ' + obj + '\n' + 'key: ' + obj.data.key + '\n' + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + '\n' + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + '\n';
    }

    function linkInfo(obj) {
        var snpos = map.getLayouts().getSameNodesLinkPosition(obj);
        return '' + 'object: ' + obj + '\n' + 'fromNode: ' + obj.fromNode + '\n' + 'toNode: ' + obj.toNode + '\n' + 'labelNodes: ' + obj.labelNodes.count + '\n' + 'labelNodeIsVisible: ' + map.getLayouts().labelNodeIsVisible(obj) + '\n' + 'fromPortId: ' + obj.fromPortId + '\n' + 'toPortId: ' + obj.toPortId + '\n' + 'category: ' + (obj.data ? obj.data.category : '') + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'fromAndToNodesAreVisible: ' + map.getLayouts().fromAndToNodesAreVisible(obj) + '\n' + 'curve: ' + obj.curve + '\n' + 'curviness: ' + obj.curviness + '\n' + 'fromEndSegmentLength: ' + Math.round(obj.fromEndSegmentLength) + '\n' + 'toEndSegmentLength: ' + Math.round(obj.toEndSegmentLength) + '\n' + 'sameNodesLinkPosition: ' + snpos.index + ' of ' + snpos.count + '\n' +
        //+ 'geometry: ' + obj.geometry + "\n" +
        'getLinkStrokeWidth: ' + map.getLayouts().getLinkStrokeWidth(obj) + '\n';
    }

    // -----------------------------------------------------------------------------

    // NB: these are here because they are about colors;
    // similar functions that are scale-related are in layouts.js...
    function getGroupSelectionStroke(obj) {
        if (obj.isSelected) {
            if (map.getPerspectives().isInPEditorMode()) return colorP;else if (map.getPerspectives().isInDEditorMode()) return colorD;else return '#000';
        } else {
            return '#000';
        }
    }

    // OK, this isn't about colors, but it wants to be near the one above...
    function getGroupSelectionStrokeWidth(obj) {
        return obj.isSelected ? 3 : 1;
    }

    function getRLinkSelectionStroke(obj) {
        if (obj.isSelected || obj == map.getUi().mouseOverLink) {
            return colorR; // TODO: can P links be selected?
        } else {
            return '#000';
        }
    }

    // -----------------------------------------------------------------------------

    // callbacks to determine when the corners should be visible

    function showDCorner(group) {
        if (map.getPerspectives().isDEditorThing(group)) {
            // mark distinction thing
            return true;
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || $scope.isTouchDevice() && group.isSelected || canDragSelectionToBecomeSistersOf(group, false) && (map.getUi().dragTargetPosition === null || cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
        }
    }

    function showSCorner(group) {
        if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || $scope.isTouchDevice() && group.isSelected || canDragSelectionToBecomeChildrenOf(group, false) && (map.getUi().dragTargetPosition === null || cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
        }
    }

    function showRCorner(group) {
        if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || $scope.isTouchDevice() && group.isSelected; // show corners on mouseover
        }
    }

    function showPCorner(group) {
        if (map.getPerspectives().isPEditorPoint(group)) {
            return true; // mark perspective point
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || $scope.isTouchDevice() && group.isSelected; // show corners on mouseover
        }
    }

    // when a P link should be visible

    this.showPLink = function (link) {
        var mode = map.getUi().getMapEditorOptions().perspectiveMode;
        if (map.getPerspectives().isPEditorPoint(link.fromNode)) {
            // show P's when this link is from the current Point
            return true;
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show P's for non-Point things, even on mouseover
            return false;
        } else {
            return (mode == 'lines' || mode == 'both') && (link.fromNode == map.getUi().mouseOverGroup || map.pIsExpanded(link.fromNode));
        }
    };

    this.showPDot = function (link) {
        return true; // map.getUi().getMapEditorOptions().perspectiveMode != 'both';
    };

    // these functions are used in two modes:
    // 1. with isDropping == false, to highlight drop targets based on map.getUi().dragTargetGroup and map.getUi().dragTargetPosition,
    //    which are set on mouseDragEnter/mouseDragleave
    // 2. with isDropping == true, on drop, when the above indicators have gone away, but we know what the dropped
    //    and target groups are, and we want to know what the drop should do.

    function canDragSelectionToBecomeSistersOf(group, isDropping) {
        return (group == map.getUi().dragTargetGroup || isDropping) && map.thingsSelectedAreDescendantsOf(group);
    }

    function canDragSelectionToBecomeChildrenOf(group, isDropping) {
        return (group == map.getUi().dragTargetGroup || isDropping) && !map.thingsSelectedIncludeSlide() && !map.thingsSelectedAreDescendantsOf(group);
    }

    // side is map.LEFT or map.RIGHT
    function canDragSelectionToBecomeOrderedSisterOf(targetGroup, side, isDropping) {
        // must be dragging single group
        var draggedGroup = map.getUniqueThingSelected();
        if (!draggedGroup) {
            return false;
        }

        // dragged and target must be Sisters in inventory layout
        return (targetGroup == map.getUi().dragTargetGroup || isDropping) && (map.getUi().dragTargetPosition == side || isDropping) && map.getLayouts().areSistersInInventoryLayout(draggedGroup, targetGroup);
    }

    function cannotDragSelectionToBecomeOrderedSisterOf(targetGroup) {
        return !canDragSelectionToBecomeOrderedSisterOf(targetGroup, map.LEFT) && !canDragSelectionToBecomeOrderedSisterOf(targetGroup, map.RIGHT);
    }

    // handle drop on one of the three target regions (top, middle, bottom)
    // side is map.LEFT or map.RIGHT
    function handleGroupMouseDrop(event, dropTarget, side) {
        //console.log('dragAboveTarget.mouseDrop, target: ' + dropTarget + ', part: ' + dropTarget .part + ', show: ' + show);
        if (side !== null && canDragSelectionToBecomeOrderedSisterOf(dropTarget.part, side, true)) {
            map.addSelectedThingAsOrderedSisterOf(dropTarget.part, side);
        } else if (canDragSelectionToBecomeSistersOf(dropTarget.part, true)) {
            map.addSelectedThingsAsSistersOf(dropTarget.part);
        } else if (canDragSelectionToBecomeChildrenOf(dropTarget.part, true)) {
            map.addSelectedThingsAsChildrenOf(dropTarget.part);
        }
    }

    // when to show the R-thing knob on a link
    function showKnob(link) {
        return link == map.getUi().mouseOverLink;
    }

    // ---------------- components for main group template ------------------

    function dFlagMarker() {
        return mk(go.Shape, new go.Binding('fill', '', function (obj) {
            return obj.data.dflag ? '#000' : null;
        }).ofObject(), {
            name: 'dflag',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(18, 18),
            geometry: go.Geometry.parse('F M0 1 L0 18 L18 0 L1 0z', true),
            cursor: 'pointer',
            pickable: false,
            stroke: null
        });
    }

    // "D" corner (top left, red)
    function cornerD() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showDCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerD',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            opacity: 0
        }, mk(go.Shape, {
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            geometry: go.Geometry.parse('F M0 1 L0 50 L50 0 L1 0z', true),
            fill: colorD,
            stroke: null,
            cursor: 'pointer',
            click: function click(event, target) {
                //console.log('click, control:' + event.control + ', alt:' + event.alt + ', meta:' + event.meta);
                if (event.alt) {
                    // NB: a side effect of this will be to select just this group,
                    // which would not happen otherwise via control-click
                    map.getPerspectives().setDEditorThing(target.part);
                } else {
                    // handle single or double click
                    map.getUi().handleCornerClick('D', target.part);
                }
            },
            contextClick: function contextClick(event, target) {
                //console.log('contextClick:' + event);
                map.toggleDFlag(target.part);
            }
        }), mk(go.TextBlock, {
            text: 'D',
            stroke: 'white',
            font: '9px sans-serif',
            position: new go.Point(12, 15),
            pickable: false
        }));
    }

    // "S" corner (bottom left, green)
    function cornerS() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showSCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerS',
            position: new go.Point(0, 50),
            desiredSize: new go.Size(50, 50),
            opacity: 0
        }, mk(go.Shape, {
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            geometry: go.Geometry.parse('F M0 0 L0 49 L1 50 L50 50z', true),
            fill: colorS,
            stroke: null,
            cursor: 'pointer',
            click: function click(event, target) {
                // handle single or double click
                map.getUi().handleCornerClick('S', target.part);
            }
        }),
        // expansion indicator
        mk(go.Shape, new go.Binding('position', '', function (obj) {
            return obj.isSubGraphExpanded ? new go.Point(4, 43) : new go.Point(5, 38);
        }).ofObject(), new go.Binding('angle', '', function (obj) {
            return obj.isSubGraphExpanded ? 90 : 0;
        }).ofObject(), {
            desiredSize: new go.Size(5, 10),
            geometry: go.Geometry.parse('F M0 0 L5 5 L0 10z', true),
            fill: '#333',
            stroke: null,
            cursor: 'pointer',
            pickable: false
        }), mk(go.TextBlock, {
            text: 'S',
            stroke: 'white',
            font: '9px sans-serif',
            position: new go.Point(12, 28),
            pickable: false
        }));
    }

    // show only when system is collapsed
    function sCollapsedMarker() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return !showSCorner(obj) && obj.memberParts.count > 0 && !obj.isSubGraphExpanded;
        }).ofObject(), {
            position: new go.Point(5, 88),
            desiredSize: new go.Size(5, 10),
            geometry: go.Geometry.parse('F M0 0 L5 5 L0 10z', true),
            fill: '#333',
            stroke: null,
            cursor: 'pointer',
            pickable: false
        });
    }

    // "R" corner (bottom right, blue)
    function cornerR() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showRCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerR',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            opacity: 0
        }, mk(go.Shape, {
            name: 'cornerRShape',
            // NB: this corner is done differently from the others:
            // 1. the overall shape is the size of the whole square, so the port falls in the middle instead of the corner;
            // 2. the geometry traces around the edges of the whole square, because otherwise the link line will
            //    show inside the main square if it's crossing one of the other 3 quadrants
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            geometry: go.Geometry.parse('F' + 'M0 0 L0 100 ' + // top left to bottom left
            'L99 100 L100 99 L 100 0 ' + // bottom/right sides (round bottom right corner)
            'L 0 0 L 100 0 ' + // back to top left then top right
            'L 100 50 L 50 100 ' + // to midpoint of right side, midpoint of bottom side
            'L0 100z', // bottom left, return home
            true),
            fill: colorR,
            stroke: null,
            cursor: 'pointer',

            portId: 'R',
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: true,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: true,
            click: function click(event, target) {
                // handle single or double click
                map.getUi().handleCornerClick('R', target.part);
            }
        }), mk(go.TextBlock, {
            text: 'R',
            stroke: 'white',
            font: '9px sans-serif',
            pickable: false,
            position: new go.Point(82, 78)
        }));
    }

    function attachmentPaperClip() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return obj.data.attachments !== null && obj.data.attachments !== undefined && obj.data.attachments.length > 0;
        }).ofObject(), new go.Binding('geometry', '', function (obj) {
            return go.Geometry.parse(paperclipSvgPath, true);
        }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
            return new go.Size(512, 512); // NB: the two icons don't scale to the same proportions for some reason - ??
        }).ofObject(), {
            position: new go.Point(46, 85),
            scale: 0.02,
            stroke: '#000',
            fill: '#000',
            click: function click(event, target) {
                console.log('clip clicked');
                map.getUi().toggleTab(map.getUi().TAB_ID_ATTACHMENTS);
            }
        });
    }

    function pEyeball() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return map.getPerspectives().isPerspectivePoint(obj);
        }).ofObject(), new go.Binding('geometry', '', function (obj) {
            return go.Geometry.parse(map.pIsExpanded(obj) ? eyeSvgPath : eyeBlockedSvgPath, true);
        }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
            return new go.Size(512, map.pIsExpanded(obj) ? 440 : 512); // NB: the two icons don't scale to the same proportions for some reason - ??
        }).ofObject(), {
            position: new go.Point(87, 4),
            scale: 0.02,
            stroke: '#000',
            fill: '#000',
            pickable: false
        });
    }

    // P expansion indicator - this shows when the P corner is not visible, and only if the thing is a perspective point
    function pointMarker() {
        return pEyeball();
    }

    // P view indicator
    function viewMarker() {
        return mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
            return true;
        }).ofObject(), new go.Binding('fill', '', function (obj) {
            return getViewMarkerFill(obj);
        }).ofObject(), {
            position: new go.Point(0, 0),
            height: 18,
            width: 100,
            stroke: null
        });
    }

    function getViewMarkerFill(obj) {
        var weight = map.getPerspectives().getPerspectiveViewWeight(obj);

        if (weight == 3) {
            return colorPDark;
        } else if (weight == 2) {
            return colorP;
        } else if (weight == 1) {
            return colorPLight;
        } else {
            return 'transparent';
        }
    }

    // "P" corner (top right, orange)
    function cornerP() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showPCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerP',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            opacity: 0
        }, mk(go.Shape, {
            name: 'cornerPShape',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            // NB: this geometry covers the whole square; see note above for cornerR
            geometry: go.Geometry.parse('F' + 'M0 0 L0 100 L100 100' + // top left to bottom left to bottom right
            'L100 1 L99 0 L0 0' + // right/top sides (round top right corner)
            'L 50 0 L 100 50 ' + // to midpoint of top side, midpoint of right side
            'L100 100 0 100z', // bottom right, bottom left, return home
            true),

            fill: colorP,
            stroke: null,
            cursor: 'pointer',

            portId: 'P',
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: false,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: false,
            toMaxLinks: 1,
            click: function click(event, target) {
                // handle single or double click
                map.getUi().handleCornerClick('P', target.part);
            }
        }), pEyeball(), // P expansion indicator
        mk(go.TextBlock, {
            text: 'P',
            stroke: 'white',
            font: '9px sans-serif',
            pickable: false,
            position: new go.Point(81, 15)
        }));
    }

    function mainBorder() {
        return mk(go.Shape, 'Border', new go.Binding('stroke', '', getGroupSelectionStroke).ofObject(), new go.Binding('strokeWidth', '', getGroupSelectionStrokeWidth).ofObject(), {
            name: 'mainarea',
            position: new go.Point(0, 0),
            height: 100,
            width: 100,
            fill: null,
            //portId: "",
            cursor: 'pointer',
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: true,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: true
        });
    }

    // --------- handlers for mouse drag/drop actions on groups, which need to be replicated on different target parts -------

    // position is map.LEFT, null, or map.RIGHT
    function getGroupMouseDragEnterHandler(position) {
        return function (event, target, obj2) {
            //console.log('mouseDragEnter, e.dp: ' + event.documentPoint + ', target.part: ' + target.part + ', target bounds: ' + target.actualBounds);
            map.getUi().dragTargetGroup = target.part;
            map.getUi().dragTargetPosition = position;
            map.getDiagram().updateAllTargetBindings();
        };
    }

    var groupMouseDragLeaveHandler = function groupMouseDragLeaveHandler(event, target, obj2) {
        map.getUi().dragTargetGroup = null;
        map.getUi().dragTargetPosition = null;
        map.getDiagram().updateAllTargetBindings();
    };

    function getGroupMouseDropHandler(position) {
        return function (event, dropTarget) {
            handleGroupMouseDrop(event, dropTarget, position);
        };
    }

    var groupClickHandler = function groupClickHandler(event, target) {
        // handle single or double click
        map.getUi().handleCornerClick('', target);
    };

    // --------------- targets for dragging to D or S -----------------

    function dragAboveTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(map.LEFT),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(map.LEFT),
            click: groupClickHandler
        },
        // drag target region
        mk(go.Shape, 'Rectangle', {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            cursor: 'pointer',
            stroke: null,
            fill: 'transparent'
        }),
        // drag indicator bar
        mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
            return canDragSelectionToBecomeOrderedSisterOf(obj.part, map.LEFT, false);
        }).ofObject(), {
            position: new go.Point(0, 0),
            height: 10,
            width: 100,
            stroke: null,
            fill: '#000'
        }));
    }

    function dragIntoTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 25),
            height: 50,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(null),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(null),
            click: groupClickHandler
        }, mk(go.Shape, 'Rectangle', {
            position: new go.Point(0, 0),
            height: 50,
            width: 100,
            cursor: 'pointer',
            stroke: null,
            fill: 'transparent'
        }));
    }

    function dragBelowTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 75),
            height: 25,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(map.RIGHT),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(map.RIGHT),
            click: groupClickHandler
        },
        // drag target region
        mk(go.Shape, 'Rectangle', {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            cursor: 'pointer',
            stroke: null,
            fill: 'transparent'
        }),
        // drag indicator bar
        mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
            return canDragSelectionToBecomeOrderedSisterOf(obj.part, map.RIGHT, false);
        }).ofObject(), {
            position: new go.Point(0, 15),
            height: 10,
            width: 100,
            stroke: null,
            fill: '#000'
        }));
    }

    // Returns the TextBlock for the group title, for use in the main group template, inside the box.
    function groupInternalTextBlock() {
        return mk(go.Panel, go.Panel.Horizontal, {
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100)
        }, mk(go.TextBlock, new go.Binding('text', 'text').makeTwoWay(), new go.Binding('visible', '', function (group) {
            // always show text inside box for R-things, because external text will throw off layout
            return map.getLayouts().isNotWithinInventoryLayout(group) || map.getLayouts().isRThingWithinInventoryLayout(group);
        }).ofObject(), {
            width: 80,
            margin: 10,
            alignment: go.Spot.Center,
            textAlign: 'center',
            cursor: 'move',
            font: '10px sans-serif',
            isMultiline: true,
            wrap: go.TextBlock.WrapDesiredSize,

            mouseDragEnter: getGroupMouseDragEnterHandler(null),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(null),
            click: groupClickHandler,
            contextClick: function contextClick(event, target) {
                if (event.control) {
                    console.log(groupInfo(target.part));
                }
            }
        }));
    }

    // Returns a TextBlock for the group title, for use in the main group template, on the left or right.
    // visibleFn is a callback to be bound to the visibility attribute of the TextBlock.
    // textAlign is 'left' or 'right'.
    function groupExternalTextBlock(visibleFn, textAlign) {
        return mk(go.TextBlock, new go.Binding('text', 'text').makeTwoWay(), new go.Binding('visible', '', visibleFn).ofObject(), new go.Binding('scale', '', map.getLayouts().getExternalTextScale).ofObject(), {
            name: 'externaltext-' + textAlign, // NB: this screws up layouts for some reason - ??
            textAlign: textAlign,
            margin: 5,
            font: '10px sans-serif',
            isMultiline: true,
            click: groupClickHandler
        });
    }

    // -------------- group/Thing template --------------------

    this.groupTemplate = mk(go.Group, go.Panel.Vertical, new go.Binding('layout', 'layout', function (layoutName) {
        return map.getLayouts().getLayout(layoutName);
    }), new go.Binding('movable', '', function (obj) {
        return !obj.isLinkLabel;
    }).ofObject(), new go.Binding('isSubGraphExpanded', 'sExpanded'),
    // dim the thing if it's being dragged over another thing (drop to sister/child)
    new go.Binding('opacity', '', function (obj) {
        return obj.isSelected && map.getUi().dragTargetGroup ? 0.25 : 1;
    }).ofObject(), {
        locationObjectName: 'mainpanel',
        locationSpot: go.Spot.TopLeft,
        selectionAdorned: false,
        isSubGraphExpanded: true,
        layerName: 'Foreground',
        // highlight corners
        mouseEnter: function mouseEnter(event, target, obj2) {
            map.getUi().mouseOverGroup = target;
            map.getDiagram().updateAllTargetBindings();
        },
        // unhighlight corners
        mouseLeave: function mouseLeave(event, target, obj2) {
            map.getUi().mouseOverGroup = null;
            map.getDiagram().updateAllTargetBindings();
        }
        // containingGroupChanged: function(part, oldgroup, newgroup) {
        //     map.getDiagram().model.setDataProperty(part.data, 'level', map.computeLevel(part));
        //     //part.updateTargetBindings();  
        // }
    }, mk(go.Panel, go.Panel.Horizontal, groupExternalTextBlock(map.getLayouts().showLeftTextBlock, 'right'), mk(go.Panel, go.Panel.Position, {
        name: 'mainpanel'
    }, new go.Binding('scale', '', map.getLayouts().getScale).ofObject(),
    // drag area
    mk(go.Shape, 'Rectangle', {
        name: 'dragarea',
        position: new go.Point(0, 0),
        width: 100,
        height: 100,
        fill: self.groupFillColor,
        stroke: null,
        cursor: 'move',
        // show debug info
        contextClick: function contextClick(event, target) {
            if (event.control) {
                console.log(groupInfo(target.part));
            }
        }
    }), mk(go.Panel, go.Panel.Position, viewMarker(), dragAboveTarget(), dragIntoTarget(), dragBelowTarget(), groupInternalTextBlock(), cornerD(), dFlagMarker(), cornerS(), sCollapsedMarker(), cornerR(), pointMarker(), cornerP(), attachmentPaperClip(), mainBorder())), groupExternalTextBlock(map.getLayouts().showRightTextBlock, 'left')),

    // the placeholder normally holds the child nodes, but we just use a dummy placeholder
    mk(go.Shape, {
        name: 'placeholder',
        fill: 'transparent',
        stroke: null,
        desiredSize: new go.Size(0, 0)
    }));

    // ------------------- link template ---------------------------

    this.linkTemplate = mk(go.Link, {
        selectionAdorned: false,
        layerName: '',
        routing: go.Link.Normal,
        relinkableFrom: true,
        relinkableTo: true,
        mouseEnter: function mouseEnter(event, target, obj2) {
            map.getUi().mouseOverLink = target;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseLeave: function mouseLeave(event, target, obj2) {
            map.getUi().mouseOverLink = null;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDragEnter: function mouseDragEnter(event, target, dragObject) {
            map.getUi().mouseOverLink = target;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDragLeave: function mouseDragLeave(event, dropTarget, dragObject) {
            map.getUi().mouseOverLink = null;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDrop: function mouseDrop(event, dropTarget) {
            var parts = map.getDiagram().selection;
            if (parts && parts.count == 1 && parts.first() instanceof go.Group) {
                map.addThingAsRThing(parts.first(), dropTarget);
            }
        },
        doubleClick: function doubleClick(event, target) {
            map.createRThing(target);
        },
        contextClick: function contextClick(event, target) {
            if (event.control) {
                console.log(linkInfo(target));
            }
        }
    }, mk(go.Shape, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding('strokeWidth', '', map.getLayouts().getLinkStrokeWidth).ofObject(), {
        name: 'LINKSHAPE'
    }),

    // show to/from arrowheads based on link "type" attribute
    mk(go.Shape, {
        fromArrow: 'Backward'
    }, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t == 'from' || t == 'toFrom';
    })), mk(go.Shape, {
        toArrow: 'Standard'
    }, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t == 'to' || t == 'toFrom';
    })), mk(go.Panel, go.Panel.Auto, // link label "knob"
    new go.Binding('opacity', '', function (obj) {
        return showKnob(obj) ? 1 : 0;
    }).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), mk(go.Shape, {
        figure: 'Ellipse',
        fill: colorD,
        stroke: colorD,
        width: 12,
        height: 12
    })));

    this.pLinkTemplate = mk(go.Link, new go.Binding('opacity', '', function (obj) {
        return self.showPLink(obj) ? 1 : 0;
    }).ofObject(), {
        selectionAdorned: false,
        layerName: 'Background', // make P links fall behind R links
        routing: go.Link.Normal,
        contextClick: function contextClick(event, target) {
            if (event.control) {
                console.log(linkInfo(target));
            }
        }
    }, mk(go.Shape, new go.Binding('strokeWidth', '', map.getLayouts().getLinkStrokeWidth).ofObject(), {
        name: 'LINKSHAPE',
        stroke: colorPLight,
        fill: colorPLight
    }), mk(go.Shape,
    // new go.Binding('visible', '', function(obj) {
    //     return (self.showPDot(obj) ? 1 : 0);
    // }).ofObject(),
    new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), {
        toArrow: 'Circle',
        stroke: colorPLight,
        fill: colorPLight
    }));

    this.dLinkTemplate = mk(go.Link, {
        selectable: false
    }, mk(go.Shape, {
        name: 'LINKSHAPE',
        stroke: null
    }));

    // ----------- temporary link/node templates, for use when dragging to create R/P lines -------------

    // define initial temporary link templates - these will be modified when handlePortTargeted is called
    this.setTemporaryLinkTemplates = function (tool) {
        tool.temporaryLink = makeTemporaryLinkTemplate();
        tool.temporaryFromNode = makeTemporaryNodeTemplate();
        tool.temporaryToNode = makeTemporaryNodeTemplate();
    };

    function makeTemporaryLinkTemplate() {
        return mk(go.Link, {
            layerName: 'Tool'
        }, mk(go.Shape, {
            name: 'linkshape',
            strokeWidth: 2
        }));
    }

    function makeTemporaryNodeTemplate() {
        return mk(go.Group, {
            layerName: 'Tool'
        }, mk(go.Shape, 'Border', {
            name: 'border',
            strokeWidth: 3,
            fill: null
        }));
    }

    // change color and portId of temporary link templates based on the type of link being created/relinked
    this.handlePortTargeted = function (tool, realnode, realport, tempnode, tempport, toend) {
        // console.log('portTargeted, realport: ' + (realport ? realport.name : '') + ', tempport: ' + (tempport ? tempport.name : '')
        //     + ', originalFromPort: ' + (ltool.originalFromPort ? ltool.originalFromPort.name : '') + ', originalToPort: ' + ltool.originalToPort);

        var linkShape = tool.temporaryLink.findObject('linkshape');
        var fromBorder = tool.temporaryFromNode.findObject('border');
        var toBorder = tool.temporaryToNode.findObject('border');

        if (tool.originalFromPort && tool.originalFromPort.name == 'cornerPShape') {
            linkShape.stroke = colorP;
            fromBorder.stroke = colorP;
            toBorder.stroke = colorP;
            fromBorder.portId = 'P';
            toBorder.portId = 'P';
        } else if (tool.originalFromPort && tool.originalFromPort.name == 'cornerRShape') {
            linkShape.stroke = colorR;
            fromBorder.stroke = colorR;
            toBorder.stroke = colorR;
            fromBorder.portId = 'R';
            toBorder.portId = 'R';
        }
        tempnode.scale = map.getLayouts().getScale(realnode);
    };

    // prevent duplicate 'P' links in the same direction between the same two things
    this.validateLink = function (fromNode, fromPort, toNode, toPort) {
        // the P port is on top of the R port, so both P and R links get the toPort set to R by default.
        if (fromPort.portId == 'P') {
            // NB: findLinksTo would be simpler, but it doesn't seem to work... (?)
            var pLinks = toNode.findLinksBetween(fromNode, 'P', 'P');
            //console.log('validateLink, pLinks from ' + fromNode + ':' + fromPort + ' to ' + toNode + ':' + toPort + ' = ' + pLinks.count);
            if (pLinks.count) {
                while (pLinks.next()) {
                    var pLink = pLinks.value;
                    if (pLink.fromNode == fromNode && pLink.toNode == toNode) {
                        return false;
                    }
                }
            }
        }
        return true;
    };

    // ------------------- slide node template ----------------------

    function createSlideResizeHandle(alignment) {
        return mk(go.Shape, new go.Binding('desiredSize', '', function (obj) {
            var slide = obj.adornedObject;
            var size = Math.min(slide.width, slide.height) * .05;
            return new go.Size(size, size);
        }).ofObject(), {
            alignment: alignment,
            cursor: 'col-resize',
            fill: 'rgba(251,170,54,1)',
            stroke: null
        });
    }

    this.slideTemplate = mk(go.Node, go.Panel.Auto,
    // NB: unlike groups, slides just use a normal 2-way location binding
    new go.Binding('location', 'loc', go.Point.parse).makeTwoWay(go.Point.stringify), new go.Binding('width', 'width').makeTwoWay(), new go.Binding('height', 'height').makeTwoWay(), new go.Binding('visible', '', function (obj) {
        return obj.data.hasRegion && map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) && !map.getPresenter().isPresenting && !map.getPresenter().isCreatingThumbnail && map.getPresenter().currentSlideIndex == obj.data.index;
    }).ofObject(), {
        locationSpot: go.Spot.TopLeft,
        selectionAdorned: false,
        resizable: true,
        resizeAdornmentTemplate: mk(go.Adornment, 'Spot', mk(go.Placeholder), // takes size and position of adorned object                   
        createSlideResizeHandle(go.Spot.TopLeft), createSlideResizeHandle(go.Spot.Top), createSlideResizeHandle(go.Spot.TopRight), createSlideResizeHandle(go.Spot.Right), createSlideResizeHandle(go.Spot.BottomRight), createSlideResizeHandle(go.Spot.Bottom), createSlideResizeHandle(go.Spot.BottomLeft), createSlideResizeHandle(go.Spot.Left)),
        padding: 0,
        contextClick: function contextClick(event, target) {
            console.log(nodeInfo(target.part));
        }
    }, mk(go.Shape, 'Rectangle', {
        name: 'slideborder',
        fill: 'rgba(251,170,54,.1)',
        stroke: null
    }));

    // ------------------- export footer ----------------------

    // NB: this is not a template per se, in that it is added to the diagram
    // statically, rather than being bound to something in the model.
    // But we put it here because it is about creating parts and stuff.

    function createExportFooter() {
        return mk(go.Node, go.Panel.Spot, {
            layerName: 'Foreground',
            location: new go.Point(0, 0),
            scale: 1,
            opacity: 0,
            pickable: false,
            selectable: false
        }, mk(go.Shape, 'Rectangle', {
            name: 'rectangle',
            height: 60,
            fill: null,
            stroke: null
        }), mk(go.Picture, {
            source: '/assets/metamap-logo-50.png',
            alignment: go.Spot.TopLeft,
            alignmentFocus: go.Spot.TopLeft,
            width: 195,
            height: 50
        }), mk(go.TextBlock, {
            text: 'metamap.cabreraresearch.org',
            alignment: go.Spot.BottomLeft,
            alignmentFocus: go.Spot.BottomLeft,
            width: 200
        }), mk(go.TextBlock, {
            name: 'mapTitle',
            text: '',
            textAlign: 'right',
            alignment: go.Spot.TopRight,
            alignmentFocus: go.Spot.TopRight,
            width: 300
        }), mk(go.TextBlock, {
            name: 'authorName',
            text: '',
            textAlign: 'right',
            alignment: go.Spot.BottomRight,
            alignmentFocus: go.Spot.BottomRight,
            width: 300
        }));
    }

    // creates or refreshes the footer logo/text that is displayed in the image export
    this.addExportFooter = function () {
        if (!_exportFooter) {
            _exportFooter = createExportFooter();
            map.getDiagram().add(_exportFooter);
        }
    };

    this.showExportFooter = function () {
        var rect = map.computeMapBounds();
        // put footer at least 100 px below bottom of map; make it at least 500px wide
        var x = rect.x;
        var y = rect.y + rect.height + Math.max(100, rect.height / 5);
        var w = Math.max(500, rect.width);
        //console.log('showExportFooter, bounds rect: ' + rect + ', w: ' + w);
        _exportFooter.location = new go.Point(x, y);
        _exportFooter.findObject('rectangle').width = w;
        _exportFooter.findObject('mapTitle').text = 'Map Title: ' + $scope.mapTitle;
        _exportFooter.findObject('authorName').text = 'Author: ' + $scope.userName;
        _exportFooter.opacity = 1;
        _exportFooter.invalidateLayout();
    };

    this.hideExportFooter = function () {
        _exportFooter.opacity = 0;
    };
};
// show corners on mouseover
// drag to D (make it sisters)
// show corners on mouseover
// drag to S (make it children)

},{}],18:[function(require,module,exports){
'use strict';

SandbankEditor.Tests = function ($scope, map) {

    var self = this;

    this.TEST_STATUS_NOT_RUN = 'not-run';
    this.TEST_STATUS_PASSED = 'passed';
    this.TEST_STATUS_EXAMINE = 'examine';
    this.TEST_STATUS_FAILED = 'failed';

    this.currentTest = null;

    this.init = function () {};

    this.runTest = function (name) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var test = _.findWhere(self.tests, { name: name });
            test.status = self.TEST_STATUS_NOT_RUN;
            self.currentTest = test;
            diagram.clear();
            test.run(diagram);
            if (test.check === undefined) {
                test.status = self.TEST_STATUS_EXAMINE;
            } else {
                test.failReason = test.check(diagram);
                if (_.isString(test.failReason)) {
                    test.status = self.TEST_STATUS_FAILED;
                } else {
                    test.status = self.TEST_STATUS_PASSED;
                }
            }
        });
    };

    this.createGeneratorTest = function (name, mapItFn) {
        return {
            name: 'ThinkQ: ' + name,
            run: function run(diagram) {
                self.runGeneratorTest(mapItFn);
            }
        };
    };

    this.runGeneratorTest = function (mapItFn) {
        var diagram = map.getDiagram();
        var generator = map.getGenerator();
        generator.concept1 = 'CONCEPT 1';
        generator.concept2 = 'CONCEPT 2';
        generator.mapIt(mapItFn);
    };

    this.tests = [
    // {
    //     name: '[Failed test]',
    //     run: function(diagram) {
    //     },
    //     check: function(diagram) {
    //         return 'This test failed - this is only a test.';
    //     }
    // },
    {
        name: 'Reset map',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            map.refresh();
        },
        check: function check(diagram) {
            return diagram.findTopLevelGroups().count == 1;
        }
    }, {
        name: 'Create Sister',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createSister(group);
        },
        check: function check(diagram) {
            return diagram.findTopLevelGroups().count == 2;
        }
    }, {
        name: 'Create R to Sister',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createRToSister(group);
        }
    }, {
        name: 'Create Child',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createChild(group);
        }
    }, {
        name: 'Create 3 children and switch to freehand',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createChild(group);
            map.createChild(group);
            map.createChild(group);
            // diagram.model.setDataProperty(group.data, 'layout', 'freehand');
            group.isSelected = true;
            map.getUi().setSelectedThingsLayout('freehand');
        },
        check: function check(diagram) {
            if (diagram.findTopLevelGroups().count != 1) {
                return 'Top level group count is not 1';
            }
            var group = diagram.findTopLevelGroups().first();
            if (group.memberParts.count != 3) {
                return 'Parent data children is not 3';
            }
            return true;
        }
    }, {
        name: 'Drag RTBB into outline S',
        instructions: 'Drag the preselected RTBB into Whole (S), then do an Undo',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createThing(250, 0, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createThing(500, 0, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB into freehand S',
        instructions: 'Drag the preselected RTBB into Whole (S) and examine layout',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var oldPart1 = map.createChild(whole, 'Old Part 1');
            var part1 = map.createThing(250, 30, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createThing(500, 70, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Create RTBB in outline and switch to freehand',
        instructions: 'Check auto-generated freehand layout of parts',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            whole.isSelected = true;
            map.getUi().setSelectedThingsLayout('freehand');
            //diagram.model.setDataProperty(whole.data, 'layout', 'freehand');
            //map.refresh();
            diagram.clearSelection();
        }
    },

    // create RTBB in freehand, add part in outline, switch back to freehand
    // create RTBB in freehand, drag in part in outline, switch back to freehand

    {
        name: 'Drag RTBB out of S',
        instructions: 'Drag the preselected RTBB onto Whole (D)',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of freehand S',
        instructions: 'Drag the preselected RTBB onto Whole (D)',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1', 10, 120);
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2', 110, 150);
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of 2nd level S',
        instructions: 'Drag the preselected RTBB onto Whole (D) of Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var subpart12 = map.createChild(part1, 'Subpart 1.2');
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            var part2 = map.createChild(whole, 'Part 2');
            map.refresh();
            diagram.clearSelection();
            subpart11.isSelected = true;
            subpart12.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of 2nd level freehand S',
        instructions: 'Drag the preselected RTBB onto Whole (D) of Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1', 0, 120);
            var subpart11 = map.createChild(part1, 'Subpart 1.1', 10, 180);
            var subpart12 = map.createChild(part1, 'Subpart 1.2', 20, 220);
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            var part2 = map.createChild(whole, 'Part 2', 0, 300);
            map.refresh();
            diagram.clearSelection();
            subpart11.isSelected = true;
            subpart12.isSelected = true;
        }
    }, {
        name: 'Rchannel',
        instructions: 'Note that R-things are in part-whole relation',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole 1', 'right');
            var child11 = map.createChild(thing1, 'Part 1.1');
            var thing2 = map.createThing(250, 0, 'Whole 2');
            var child21 = map.createChild(thing2, 'Part 2.1');

            var rThing1 = map.createRLinkWithRThing(thing1, thing2, 'Rthing 1-2');
            var rThing11 = map.createRLinkWithRThing(child11, child21, 'Rthing 1.1 - 2.1');
            console.log('Rchannel, rThing11: ' + rThing11);

            diagram.clearSelection();
            rThing11.isSelected = true;
            map.addSelectedThingsAsChildrenOf(rThing1);
        }
    }, {
        name: 'Disappearing parts on new idea creation',
        instructions: 'Create a new top-level idea - Part 1.1 should not disappear temporarily',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole 1', 'right');
            var child11 = map.createChild(thing1, 'Part 1.1');
        }
    }, {
        name: 'Drag top-level thing into freehand system',
        instructions: 'Drag New Part into Whole; examine resulting part layout',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole', 'freehand');
            var child11 = map.createChild(thing1, 'Part');
            var newPart = map.createThing(250, 0, 'New Part', 'left');
        }
    }, {
        name: 'Drag top-level RTBB into freehand system',
        instructions: 'Drag preselected RTBB into Whole; examine resulting part layout',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole', 'freehand');
            var child11 = map.createChild(thing1, 'Part');
            var bar = map.createThing(250, 0, 'Bar', 'left');
            var bell = map.createThing(500, 0, 'Bell', 'left');
            var rThing = map.createRLinkWithRThing(bar, bell, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            bar.isSelected = true;
            bell.isSelected = true;
        }
    }, {
        name: 'Drag R-thing square into freehand system',
        instructions: 'Drag preselected square into Whole; examine resulting part layout',
        run: function run(diagram) {
            var whole = map.createThing(-100, 50, 'Whole', 'freehand');
            var child11 = map.createChild(whole, 'Part');
            var part11 = map.createThing(250, 0, 'Part11', 'left');
            var part12 = map.createThing(500, 0, 'Part12', 'left');
            var part21 = map.createThing(250, 250, 'Part21', 'left');
            var part22 = map.createThing(500, 250, 'Part22', 'left');

            var rThing11_12 = map.createRLinkWithRThing(part11, part12, 'Rthing 11-12');
            var rThing11_21 = map.createRLinkWithRThing(part11, part21, 'Rthing 11-21');
            var rThing12_22 = map.createRLinkWithRThing(part12, part22, 'Rthing 12-22');
            var rThing21_22 = map.createRLinkWithRThing(part21, part22, 'Rthing 21-22');
            map.refresh();
            diagram.clearSelection();
            part11.isSelected = true;
            part12.isSelected = true;
            part21.isSelected = true;
            part22.isSelected = true;
        }
    }, {
        name: 'Drag R-thing square out of freehand system',
        instructions: 'Drag preselected square onto D of Whole; examine resulting layout',
        run: function run(diagram) {
            var whole = map.createThing(-100, 50, 'Whole', 'freehand');
            var child11 = map.createChild(whole, 'Part');
            var part11 = map.createChild(whole, 'Part11', 10, 190);
            var part12 = map.createChild(whole, 'Part12', 120, 190);
            var part21 = map.createChild(whole, 'Part21', 10, 300);
            var part22 = map.createChild(whole, 'Part22', 120, 300);

            var rThing11_12 = map.createRLinkWithRThing(part11, part12, 'Rthing 11-12');
            var rThing11_21 = map.createRLinkWithRThing(part11, part21, 'Rthing 11-21');
            var rThing12_22 = map.createRLinkWithRThing(part12, part22, 'Rthing 12-22');
            var rThing21_22 = map.createRLinkWithRThing(part21, part22, 'Rthing 21-22');
            map.refresh();
            diagram.clearSelection();
            part11.isSelected = true;
            part12.isSelected = true;
            part21.isSelected = true;
            part22.isSelected = true;
        }
    }, {
        name: 'Drag 2nd level part to D of parent',
        instructions: 'Drag Subpart 1.1 onto D of Part 1; it should appear below Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            map.refresh();
            diagram.clearSelection();
        }
    }, {
        name: 'Invisible R-thing in 2nd level of outline',
        instructions: 'R-thing between Subparts 1.1 and 1.2 should be visible',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var subpart12 = map.createChild(part1, 'Subpart 1.2');
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            rThing.desiredSize = new go.Size(30, 30);
            map.refresh();
            console.log('rThing actualBounds: ' + rThing.actualBounds + ', scale: ' + rThing.scale + ', desiredSize: ' + rThing.desiredSize);
            console.log('Whole desiredSize: ' + whole.desiredSize);
            diagram.clearSelection();
        }
    }, {
        name: 'R-thing between ideas in same location (error)',
        instructions: 'This should trigger an error',
        run: function run(diagram) {
            // try {
            var part1 = map.createThing(0, 0, 'Part 1', 'left');
            var part2 = map.createThing(0, 0, 'Part 2', 'left');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            // } catch(e) {
            //     alert(e.message);
            // }
        }
    },
    // {
    //     name: 'Fix bad R-thing leading to infinite loop',
    //     instructions: 'Map should display and not trigger infinite loop; model should be fixed so that r-thing is not Part 1.1 or Part 1.2',
    //     run: function(diagram) {
    //         var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
    //         var child11 = map.createChild(thing1, 'Part 1.1');
    //         var child12 = map.createChild(thing1, 'Part 1.2');
    //         var rThing = map.createRLinkWithRThing(child11, child12, 'Rthing');
    //         var rLink = rThing.labeledLink;
    //         rLink.data.labelKeys = [child11.data.key];
    //         map.checkModel();
    //         map.refresh();
    //     }
    // },
    {
        name: 'Drag to create R-line',
        instructions: 'Drag from the R-corner of Thing1 to Thing2; temporary drag line and square should be R-color; created line should be an R-line',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(100, 0, 'Thing2', 'freehand');
        }
    }, {
        name: 'Drag to create P-line',
        instructions: 'Drag from the P-corner of Thing1 to Thing2; temporary drag line and square should be P-color; created line should be a P-line',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(100, 0, 'Thing2', 'freehand');
        }
    }, {
        name: 'Relink from-port of R-line',
        instructions: 'Move the start of the R-link from Thing 1 to Thing 3; make sure it does not turn into a P-link',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(300, 0, 'Thing2', 'freehand');
            var thing3 = map.createThing(100, 200, 'Thing3', 'freehand');
            var rlink = map.createRLink(thing1, thing2);
        }
    }, {
        name: 'Relink to-port of R-line',
        instructions: 'Move the end of the R-link from Thing 2 to Thing 3; make sure it does not turn into a P-link',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(300, 0, 'Thing2', 'freehand');
            var thing3 = map.createThing(100, 200, 'Thing3', 'freehand');
            var rlink = map.createRLink(thing1, thing2);
        }
    }, {
        name: 'Showing parts of parts of a freehand whole',
        instructions: 'Whole, Part 1 and Subpart 1.1 should all be visible',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            map.refresh();
            diagram.clearSelection();
        }
    }

    // self.createGeneratorTest('WHAT_IS', map.getGenerator().WHAT_IS),
    // self.createGeneratorTest('PARTS_OF', map.getGenerator().PARTS_OF),
    // self.createGeneratorTest('PART_OF', map.getGenerator().PART_OF),
    // self.createGeneratorTest('PARTS_HAVE_PARTS', map.getGenerator().PARTS_HAVE_PARTS),
    // self.createGeneratorTest('POINT_FOR', map.getGenerator().POINT_FOR),
    // self.createGeneratorTest('HAS_MULTIPLE_PS', map.getGenerator().HAS_MULTIPLE_PS),
    // self.createGeneratorTest('R_TO', map.getGenerator().R_TO),
    // self.createGeneratorTest('R_EXISTS', map.getGenerator().R_EXISTS),
    // self.createGeneratorTest('WHAT_IS_R', map.getGenerator().WHAT_IS_R),
    // self.createGeneratorTest('DISTINGUISH_BETWEEN', map.getGenerator().DISTINGUISH_BETWEEN),
    // self.createGeneratorTest('IS_R_BETWEEN', map.getGenerator().IS_R_BETWEEN),
    // self.createGeneratorTest('CAN_BE_P', map.getGenerator().CAN_BE_P),
    // self.createGeneratorTest('MULTIPLE_PS_ARE', map.getGenerator().MULTIPLE_PS_ARE),
    // self.createGeneratorTest('P_PARTS', map.getGenerator().P_PARTS),
    // self.createGeneratorTest('COMPARE_CONTRAST', map.getGenerator().COMPARE_CONTRAST),
    // self.createGeneratorTest('R_PARTS', map.getGenerator().R_PARTS),
    // self.createGeneratorTest('PARTS_HAVE_RS', map.getGenerator().PARTS_HAVE_RS),
    // self.createGeneratorTest('PART_RS_EXIST', map.getGenerator().PART_RS_EXIST),
    // self.createGeneratorTest('PART_RS_ARE', map.getGenerator().PART_RS_ARE),
    // self.createGeneratorTest('WHAT_ABOUT', map.getGenerator().WHAT_ABOUT)

    // computePartsBounds

    // createRThing
    // addSelectedThingsAsChildrenOf
    // addSelectedThingAsOrderedSisterOf
    // addSelectedThingsAsSistersOf
    // addThingAsRThing
    // toggleDFlag
    // toggleSExpansion
    // togglePExpansion

    // presenter: select first slide and hit play; make sure first slide notes appear

    ];
};

},{}],19:[function(require,module,exports){
'use strict';

SandbankEditor.UI = function ($scope, $timeout, $http, $resource, $modal, $log, map) {

    var self = this;

    // ----------- tab ("slider") IDs - tabs are rendered in views/maps/_form --------------
    //this.TAB_ID_HISTORY = 'history-tab';
    this.TAB_ID_PRESENTER = 'presenter-tab';
    this.TAB_ID_ANALYTICS_MAP = 'analytics-tab-map';
    this.TAB_ID_ANALYTICS_THING = 'analytics-tab-thing';
    this.TAB_ID_PERSPECTIVES = 'perspectives-tab';
    this.TAB_ID_DISTINCTIONS = 'distinctions-tab';
    this.TAB_ID_ATTACHMENTS = 'attachments-tab';
    this.TAB_ID_GENERATOR = 'generator-tab';
    this.TAB_ID_STANDARDS = 'standards-tab';

    this.init = function () {};

    // ------------ editor options for map/user ----------

    var mapEditorOptions = {};

    var defaultEditorOptions = {
        // noArrows, to, from, toFrom
        defaultRelationshipDirection: 'noArrows',
        // left, right, stacked, freehand
        defaultThingLayout: 'left',
        // lines, spotlight, both
        perspectiveMode: 'lines'
    };

    // called when map is loaded to set stored options for map
    this.setMapEditorOptions = function (options) {
        mapEditorOptions = options;
    };

    // returns appropriate values from the user profile or the default options if options are not set for the map
    this.getMapEditorOptions = function () {
        var profileOptions = $scope.userProfile ? $scope.userProfile.editorOptions : null;
        var vals = [mapEditorOptions, profileOptions, defaultEditorOptions];
        mapEditorOptions = _.find(vals, function (val) {
            return !_.isEmpty(val);
        });
        return mapEditorOptions;
    };

    // saves default options for the user (map options are saved in autosave.js)
    function saveUserEditorOptions(options) {
        var data = {
            user: {
                editor_options: JSON.stringify(options)
            }
        };

        startSpinner();
        $http.put('/users/' + $scope.userId + '.json', data).then(function (response) {
            stopSpinner();
        }, function () {
            stopSpinner();
            $scope.profileEditStatus = 'Could not save editor options';
        });
    }

    // options modal

    $scope.editorOptions = new SandbankEditorOptions($scope, $http, $resource, $modal, $log);

    this.editOptions = function () {
        $scope.editorOptions.openModal(mapEditorOptions, function (options) {
            // onSaveDefaults
            saveUserEditorOptions(options);
        }, function (options) {
            // onUpdate
            mapEditorOptions = options;
            map.getAutosave().saveNow('edit_options');
        });
    };

    // ------------ state model ----------

    this.state = {};

    var defaultState = {
        showNavigator: false,
        currentTab: null,
        perspectivePointKey: null,
        distinctionThingKey: null
    };

    this.setStateData = function (data) {
        $scope.safeApply(function () {
            self.state = data || defaultState;
            //$scope.currentTab = self.state.currentTab;
        });
    };

    // TODO: Save state more frequently?? Currently it is only saved when autosave is triggered by other actions...

    this.getStateData = function () {
        return self.state;
    };

    // ----------- temporary state flags ------------

    this.zoomingToRegion = false;

    this.mouseOverGroup = null;
    this.mouseOverLink = null;

    this.dragTargetGroup = null;
    this.dragTargetPosition = null;

    this.helpTip = null;

    // ----------- handle bottom tabs ("sliders") -------------

    // in the following functions, ID is e.g. 'history-tab' (ID of one of the .bottom-tab's)

    // this is called by map.currentTabChanged, which is triggered by a $scope.$watch
    this.currentTabChanged = function (newValue, oldValue) {
        //console.log('ui, currentTabChanged: ' + newValue);
        self.state.currentTab = newValue;
    };

    this.currentTabIs = function (tabID) {
        return $scope.currentTab == tabID;
    };

    this.openTab = function (tabID) {
        $scope.safeApply(function () {
            $scope.currentTab = tabID;
        });
    };

    this.closeTab = function (tabID) {
        $scope.safeApply(function () {
            self.state.currentTab = null; // TODO: trigger autosave
            $scope.currentTab = null;
        });
    };

    this.disableTab = function (tabID) {
        // prevent opening other tabs when in P or D editor
        if ($scope.currentTab == self.TAB_ID_PERSPECTIVES || $scope.currentTab == self.TAB_ID_DISTINCTIONS) {
            return true;
        }
        return false;
    };

    this.toggleTab = function (tabID) {
        $scope.safeApply(function () {
            if ($scope.currentTab == tabID) {
                $scope.currentTab = null;
            } else if (!self.disableTab(tabID)) {
                $scope.currentTab = tabID;
            }
        });
    };

    this.toggleNavigator = function () {
        $scope.safeApply(function () {
            self.state.showNavigator = !self.state.showNavigator;
        });
    };

    this.toggleZoomingToRegion = function () {
        $scope.safeApply(function () {
            self.zoomingToRegion = !self.zoomingToRegion;
        });
    };

    // ----------------- zooming functions -------------------

    this.canZoomIn = function () {
        return map.getDiagram().scale < 32;
    };

    this.canZoomOut = function () {
        return map.getDiagram().scale > 0.25;
    };

    this.zoomIn = function () {
        var diagram = map.getDiagram();
        if (diagram.scale < 32) {
            var vb = diagram.viewportBounds.copy();
            diagram.scale = diagram.scale * 2;
            diagram.centerRect(vb);
        }
    };

    this.zoomOut = function () {
        var diagram = map.getDiagram();
        if (diagram.scale > 0.25) {
            var vb = diagram.viewportBounds.copy();
            diagram.scale = diagram.scale / 2;
            diagram.centerRect(vb);
        }
    };

    this.maybeZoomToRegion = function () {
        var diagram = map.getDiagram();
        // this flag is set by the toolbar button
        if (self.zoomingToRegion) {
            self.zoomingToRegion = false;
            console.log('zoomToRegion, selection count: ' + diagram.selection.count);
            var rect = diagram.computePartsBounds(diagram.selection);
            diagram.zoomToRect(rect);
        }
        $scope.safeApply();
    };

    this.resetZoom = function () {
        var diagram = map.getDiagram();
        //var rect = diagram.computePartsBounds(diagram.nodes).copy();
        var rect = map.safeRect(map.computeMapBounds());
        //console.log('resetZoom, bounds: ' + rect);
        if (rect.width) {
            rect.inflate(rect.width / 5, rect.height / 5);
        }
        diagram.zoomToRect(rect);
        diagram.alignDocument(go.Spot.Center, go.Spot.Center);
        if (diagram.scale > 1) {
            diagram.scale = 1;
        }
    };

    // ------------ thing options (layout) ----------------

    this.getSelectedThingsOrDefaultLayout = function () {
        var sl = self.getSelectedThingsLayout();
        if (sl) {
            return sl;
        } else {
            return mapEditorOptions.defaultThingLayout;
        }
    };

    // returns a non-null value only if all selected items are groups with the same layout
    this.getSelectedThingsLayout = function () {
        var diagram = map.getDiagram();
        if (diagram === null || diagram.selection.count < 1) return null;

        var layout = null;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (!it.value instanceof go.Group) return null;
            var group = it.value;
            //console.log('getSelectedThingsLayout, it.value: ' + group);
            var groupLayout = group.data ? group.data.layout : null;
            if (layout !== null && groupLayout != layout) return null;
            layout = groupLayout;
        }
        //console.log('getSelectedThingsLayout: ' + layout);

        return layout;
    };

    // sets the layout of all selected things to the given layout
    this.setSelectedThingsLayout = function (layoutName) {
        var diagram = map.getDiagram();
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Group) {
                var group = it.value;
                diagram.model.setDataProperty(group.data, 'layout', layoutName);
                map.getLayouts().setDescendantLayouts(group, group.data.layout);
                map.refresh();
            }
        }
    };

    // ------------ relationship options (direction) ----------------

    this.getSelectedRelationshipsOrDefaultDirection = function () {
        var sd = self.getSelectedRelationshipsDirection();
        if (sd) {
            return sd;
        } else {
            return mapEditorOptions.defaultRelationshipDirection;
        }
    };

    // returns a non-null value only if all selected items are relationships with the same direction
    this.getSelectedRelationshipsDirection = function () {
        var diagram = map.getDiagram();
        if (diagram === null || diagram.selection.count < 1) return null;

        var type = null;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (!it.value instanceof go.Link) return null;
            var link = it.value;
            var linkType = link.data ? link.data.type : null;
            if (type !== null && linkType != type) return null;
            type = linkType;
        }

        return type;
    };

    // sets the direction of all selected relationships to the given direction
    this.setSelectedRelationshipsDirection = function (direction) {
        var diagram = map.getDiagram();
        //diagram.model.startTransaction("change relationship direction");
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Link) {
                //diagram.model.startTransaction("change link type");
                diagram.model.setDataProperty(it.value.data, 'type', direction);
                //diagram.model.commitTransaction("change link type");
            }
        }
        //diagram.commitTransaction("change relationship direction");
    };

    // ------- handle corner clicks and double clicks --------

    var _cornerClicked = null;
    var _cornerFunction = null;
    var _cornerTimeout = 300;

    this.handleCornerClick = function (corner, thing) {
        //console.log('handleCornerClick: corner = ' + corner + ', cornerClicked = ' + _cornerClicked);
        // assume it's a single click, and set handler
        _cornerFunction = getCornerFunction(corner, 1);
        // already clicked, so it's a double click; change handler
        if (_cornerClicked == corner) {
            _cornerFunction = getCornerFunction(corner, 2);
            console.log('handleCornerClick: double click on ' + corner);
            return;
        }
        // remember that at least one click has happened for the current corner
        _cornerClicked = corner;

        // set timer to invoke whatever handler we have ready to go (unless another click happens within the interval)
        var timer = setTimeout(function () {
            // ding! invoke it
            if (_cornerFunction == self.showCornerTip) {
                _cornerFunction(thing, corner);
            } else {
                _cornerFunction(thing); // don't pass the corner arg to things like createChild that have a different second arg
            }
            // reset handler and clicked flag
            _cornerFunction = getCornerFunction(corner, 1);
            _cornerClicked = null;
        }, _cornerTimeout);
    };

    function getCornerFunction(corner, clicks) {
        if (corner == 'D') {
            return clicks == 1 ? self.showCornerTip : map.createSister;
        } else if (corner == 'S') {
            return clicks == 1 ? map.toggleSExpansion : map.createChild;
        } else if (corner == 'R') {
            return clicks == 1 ? self.showCornerTip : map.createRToSister;
        } else if (corner == 'P') {
            return clicks == 1 ? map.togglePExpansion : map.getPerspectives().setPEditorPoint;
        } else if (corner === '') {
            // click on text
            return clicks == 1 ? self.showCornerTip : editText;
        } else {
            return function () {
                console.log('getCornerFunction: no function found for corner: ' + corner + '!');
            };
        }
    }

    // NB: in this case the thing is actually the TextBox, except in outline layout it is a Panel if the box is double-clicked...
    function editText(thing, corner) {
        if (!$scope.canEdit) {
            return null;
        }

        console.log('editText, thing: ' + thing);
        if (thing instanceof go.Panel) {
            // outline layout
            var part = thing.part;
            console.log('editText, part: ' + part);
            if (part instanceof go.Group && part.data && (part.data.layout == 'left' || part.data.layout == 'right')) {
                var textBlockName = 'externaltext-' + part.data.layout;
                var text = thing.part.findObject(textBlockName);
                if (text) {
                    thing = text;
                }
            }
        }
        map.getDiagram().commandHandler.editTextBlock(thing);
    }

    // ---------------- help tip functions - see also user.js, views/maps/help_tab ---------------

    // shows thingTip or one of the cornerXTips
    this.showCornerTip = function (thing, corner) {
        //console.log('showCornerTip');
        if (corner === '') {
            self.showHelpTip('thingTip');
        } else {
            self.showHelpTip('corner' + corner + 'Tip');
        }
    };

    this.showHelpTip = function (tip) {
        //console.log('showHelpTip: ' + tip);

        // don't show help if in presenter
        if (self.currentTabIs(self.TAB_ID_PRESENTER)) {
            return;
        }

        self.helpTip = tip;
        $scope.safeApply();
        $('#help-tip').show();

        setTimeout(function () {
            $('#help-tip').fadeOut(500, function () {
                self.helpTip = null;
                $scope.safeApply();
            });
        }, 5000);
    };

    // ------------ edit map UserTags ---------------

    $scope.tagging = new SandbankTagging($scope, $http, $resource, $modal, $log);

    this.editUserTags = function () {
        $scope.tagging.openModal([$scope.mapId], true, // show description field
        function () {
            map.getAutosave().saveNow('edit_usertags');
        } // on update
        );
    };

    // ------------ edit map sharing ---------------

    $scope.sharing = new SandbankSharing($scope, $http, $resource, $modal, $log);

    this.editMapShares = function () {
        $scope.sharing.openModal([$scope.mapId], function () {} // on update
        );
    };

    // ------------ print/export to image ---------------

    this.printSlides = function () {
        startSpinner();
        map.getPresenter().createSlideThumbnails();
        stopSpinner();
        setTimeout(function () {
            window.print();
        }, 500);
    };

    var MILLION = 1000 * 1000;

    this.exportToImage = function (format) {

        $scope.imageExportLoading = true;
        $('#export-image img').remove();
        map.getTemplates().showExportFooter();

        var rect = map.getDiagram().computePartsBounds(map.getDiagram().nodes).copy();

        var imageMB = rect.width * rect.height * 4 / MILLION; // 4 bytes/pixel
        //console.log('imageMB: ' + imageMB);

        // make the max size of the image 10MB
        // pngSize = imageMB * scale * scale
        // so max scale = sqrt(pngSize / imageMB)
        // These calculations don't seem to be right, but in practice using 500 here
        // we get a scale of 2.43 for an image 19984 x 3424 pixels
        // which results in a file size of 1.88 MB at 32 bits/pixel...
        // OR 28380 x 5196 pixels, scale = 3.41 => file size = 3.49 MB
        var scale = 4;
        if (imageMB) {
            scale = Math.min(4, Math.sqrt(50 / imageMB));
        }

        //console.log('image dimensions: ' + rect.width + ' x ' + rect.height + ', image bytes: ' + (rect.width * rect.height * 4) +
        //        ', imageMB: ' + imageMB + ', scale: ' + scale);

        $scope.showImageExport = true;

        var partsToExport = new go.List();
        partsToExport.addAll(map.getDiagram().nodes);
        partsToExport.addAll(map.getDiagram().links);
        partsToExport.remove(map.getPresenter().slideBlocker);

        var doImage = $timeout(function () {
            var img = map.getDiagram().makeImage({
                parts: partsToExport,
                maxSize: new go.Size((rect.width + 200) * scale, (rect.height + 200) * scale),
                scale: scale,
                padding: 100 * scale,
                background: '#ffffff'
            });

            $('#export-image').append(img);
            $scope.imageExportLoading = false;

            map.getTemplates().hideExportFooter();
        }, 100);
    };

    // --------- utils -------------

    this.splitLines = function (text) {
        return text.split(/\n/);
    };
};

},{}],20:[function(require,module,exports){
'use strict';

window.Sandbank = {};

// the topmost controller for the app

window.UserCtrl = function ($rootScope, $scope, $http, $modal, $upload) {

    // query string params
    $scope.params = URI(window.location).query(true);

    // auto-open thinkquery?
    $scope.thinkquery = $scope.params.thinkquery ? true : false;

    $scope.userId = window.userId; // set in layouts/user
    $scope.userIsAdmin = window.userIsAdmin;
    $scope.userName = '';
    $scope.userProfile = null;
    $scope.profileEditStatus = '';
    $scope.password = '';
    $scope.passwordConfirm = '';

    $scope.getNewWindowName = function (action, mapId) {
        if (action == 'VIEW_MAP') {
            return 'VIEW_MAP_' + mapId;
        }
    };

    // show/hide tests UI and model debug form
    $scope.showTests = false;
    $scope.showModel = false;

    $scope.toggleShowTests = function () {
        $scope.showTests = !$scope.showTests;
    };
    $scope.toggleShowModel = function () {
        $scope.showModel = !$scope.showModel;
    };

    $scope.setUserId = function (id) {
        $scope.userId = id;
    };

    function init() {
        window.addEventListener('resize', fixRowHeights);
    }

    // make all cells in a row the same height
    function fixRowHeights() {}

    $scope.loadUserProfile = function (callback) {
        if ($scope.userId) {
            var url = '/users/' + $scope.userId + '/profile.json';
            window.startSpinner();
            $http.get(url).then(function (response) {
                // success
                $scope.userProfile = response.data;
                initSelectedAdminTags();
                initSelectedFollowableOrgs();
                if ($scope.ccsTagging) {
                    $scope.ccsTagging.loadCcsTags();
                }
                window.stopSpinner();
                if (callback) {
                    callback.call();
                }
                fixRowHeights();
            }, function (reason) {
                // error
                window.stopSpinner();
                alert('Could not load user profile data');
            });
        }
    };

    $scope.loadUserProfile();

    // -------------- courses/subscriptions ------------------

    // open the Stripe Checkout dialog and get a token
    // NB: amount is stored in the Stripe plan definition
    $scope.addSubscription = function (plan) {
        var handler = StripeCheckout.configure({
            key: $scope.userProfile.account.stripeKey,
            name: 'Subscribe to MetaMap',
            image: '/assets/badge-logo-64.png',
            description: plan.name,
            panelLabel: 'Pay {{amount}}/' + plan.interval,
            amount: plan.price,
            allowRememberMe: false,
            email: $scope.userProfile.user.email,
            token: function token(_token, args) {
                console.log('token: ', _token);
                window.startSpinner();
                $http.post('/charges/subscribe', {
                    plan_id: plan.code,
                    token_id: _token.id
                }).then(function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.success('Subscription created');
                    });
                }, function () {
                    $scope.loadUserProfile(function () {
                        alertify.error('Subscription could not be created');
                    });
                });
            }
        });
        handler.open();
    };

    // for buy-course-button directive
    $scope.getBuyButtonLabel = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            return 'Free';
        } else if (course = getEnrolledCourse(id)) {
            return 'Enrolled';
        } else if (course = getEnrollableCourse(id)) {
            return 'Enroll - $' + (course.price / 100).toFixed(2);
        } else {
            return '';
        }
    };

    $scope.getCourseStatusSummary = function (id) {
        var course = $scope.getCourse(id);
        if (course) {
            var text = course.stepsCompleted + ' of ' + course.steps + ' steps completed';
            if (course.enrolment) {
                text = 'Enrolled ' + course.enrolment.date + (course.enrolment.stripeData.refunded ? ' (Refunded)' : '') + ' - ' + text;
            }
            return course.code + ' - ' + text;
        } else {
            return null;
        }
    };

    $scope.getCourseCompletedPercent = function (id) {
        var course = $scope.getCourse(id);
        if (course) {
            return course.stepsCompletedPercent;
        } else {
            return null;
        }
    };

    $scope.maybeBuyCourse = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            window.location.href = '/courses/' + course.id;
        } else if (course = getEnrolledCourse(id)) {
            window.location.href = '/courses/' + course.id;
        } else if (course = getEnrollableCourse(id)) {
            $scope.buyCourse(course);
        }
    };

    $scope.getCourse = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            return course;
        } else if (course = getEnrolledCourse(id)) {
            return course;
        } else if (course = getEnrollableCourse(id)) {
            return course;
        }
        return null;
    };

    function getFreeCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.freeAccessibleCourses, function (course) {
            return course.id == id && course.enrolment == undefined;
        });
    }

    function getEnrolledCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.freeAccessibleCourses, function (course) {
            return course.id == id && course.enrolment !== undefined;
        });
    }

    function getEnrollableCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.nonFreeAccessibleCourses, function (course) {
            return course.id == id;
        });
    }

    // open the Stripe Checkout dialog and get a token
    // NB: amount is passed from our course definition
    $scope.buyCourse = function (course) {
        var handler = StripeCheckout.configure({
            key: $scope.userProfile.account.stripeKey,
            name: 'Enroll in Course',
            image: '/assets/badge-logo-64.png',
            description: course.code,
            amount: course.price,
            allowRememberMe: false,
            email: $scope.userProfile.user.email,
            token: function token(_token2, args) {
                console.log('token: ', _token2);
                window.startSpinner();
                $http.post('/charges/buy_course', {
                    course_code: course.code,
                    course_price: course.price,
                    token_id: _token2.id
                }).then(function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.success('Course purchased');
                    });

                    // reload page to handle stripe bug (?) - links not clickable
                    window.setTimeout(function () {
                        window.location.reload();
                    }, 1000);
                }, function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.error('Course purchase could not be completed');
                        console.log('stripe error: ', response);
                    });
                });
            }
        });
        handler.open();
    };

    $scope.cancelSubscription = function (subscription) {
        window.startSpinner();
        $http['delete']('/charges/unsubscribe?subscription_id=' + subscription.id).then(function (response) {
            $scope.loadUserProfile(function () {
                alertify.success('Subscription cancelled');
            });
        }, function () {
            $scope.loadUserProfile(function () {
                alertify.error('Subscription could not be cancelled');
            });
        });
    };

    // debug/test only
    $scope.clearCustomer = function () {
        window.startSpinner();
        $http['delete']('/charges/clear_customer').then(function (response) {
            $scope.loadUserProfile(function () {
                alertify.success('Customer cleared');
            });
        }, function () {
            $scope.loadUserProfile(function () {
                alertify.error('Customer could not be cleared');
            });
        });
    };

    // -------------- points and badges ----------------

    $scope.hasCurrentBadge = function (key, level) {
        return $scope.userProfile && $scope.userProfile.badges.current[key] == level;
    };

    $scope.hasNewBadge = function (key, level) {
        return $scope.userProfile && $scope.userProfile.badges['new'][key] == level;
    };

    $scope.hasNewBadges = function () {
        return $scope.userProfile && _.keys($scope.userProfile.badges['new']).length > 0;
    };

    $scope.getBadgeDefinition = function (key) {
        return _.findWhere($scope.userProfile.badges.definitions, {
            key: key
        });
    };

    // -------------- tutorial -----------------

    try {
        $scope.tutorialEnabled = function () {
            return window.mapData !== undefined;
        };

        // start tutorial:
        var _tutorial = new SandbankEditor.Tutorial();

        $scope.startTutorial = function () {
            _tutorial.start();
        };
    } catch (e) {}

    // -------------- feedback form -----------------

    $scope.feedback = '';

    $scope.toggleFeedback = function () {
        $('#feedback-dropdown').slideToggle('fast').find('textarea').get(0).focus();
    };

    $scope.submitFeedback = function () {
        if ($scope.feedback === '') {
            return; // empty input...
        }

        $.ajax({
            type: 'POST',
            url: '/users/feedback',
            data: {
                url: window.location.href,
                feedback: $scope.feedback
            },
            success: function success() {
                $scope.feedback = '';
                alert('Thank you for your feedback!');
            },
            error: function error() {
                console.error('error sending feedback: ', arguments);
            }
        });

        $('#feedback-dropdown').slideToggle('fast');
    };

    // --------- user's user tags -----------

    // NB: this is similar to maps tagging in tagging.js - but simpler, as we do not have to deal with
    // multiple taggable items, which means tracking existing vs. new tags, etc...

    $scope.newTag = {
        name: ''
    };

    // tag autocomplete
    $scope.getUserTags = function (viewValue) {
        var url = '/user_tags/list.json?q=' + viewValue;
        return $http.get(url).then(function (response) {
            return response.data.tags;
        });
    };

    $scope.updateUserUserTags = function () {
        var tagList = _.pluck($scope.userProfile.userTags, 'name').join(',');
        $http.put('/user_tags/update_user_user_tags', [tagList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'Tags saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save tags';
        });
    };

    $scope.deleteTag = function (tag) {
        var i = _.indexOf($scope.userProfile.userTags, tag);
        $scope.userProfile.userTags.splice(i, 1);
        $scope.updateUserUserTags();
    };

    $scope.tagSelected = function (item, model, label) {
        //console.log('tagSelected: ', item, model, label);
        $scope.addTag(item.name);
    };

    $scope.editingTagKeypress = function (e) {
        if (e.which == 13) {
            $scope.addTag($scope.newTag.name);
        }
    };

    $scope.addTag = function (tagName) {
        $scope.userProfile.userTags.push({
            name: tagName
        });
        $scope.newTag.name = '';
        $scope.updateUserUserTags();
    };

    // --------- user's/map's CCS tags -----------

    // this manages CCS tags for either the current user or the current map,
    // depending which page we're on - mapId gets overridden in editor.js if we're editing a map

    try {
        $scope.ccsTagging = new SandbankCcsTagging($scope, $http, $modal);
        $scope.ccsTagging.mapId = null;
    } catch (e) {}

    // --------- user's admin tags -----------

    // key (index): admin tag ID; value: true/false (if user follows the admin tag)
    $scope.selectedUserAdminTags = [];

    function initSelectedAdminTags() {
        $scope.selectedUserAdminTags = [];
        _.each($scope.userProfile.adminTags, function (tag) {
            if (_.findWhere($scope.userProfile.userAdminTags, {
                id: tag.id
            })) {
                $scope.selectedUserAdminTags[tag.id] = true;
            }
        });
    }

    $scope.updateUserAdminTags = function () {
        var selectedTagNames = _.map($scope.userProfile.adminTags, function (tag) {
            return $scope.selectedUserAdminTags[tag.id] ? tag.name : null;
        });
        var tagList = _.without(selectedTagNames, null).join(',');
        $http.put('/admin_tags/update_user_admin_tags', [tagList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'Interests saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save interests';
        });
    };

    // --------- user's followed orgs -----------

    // key (index): org ID; value: true/false (if user follows the org)
    $scope.selectedFollowableOrganizations = [];

    $scope.userIsFollowingOrg = function (id) {
        return $scope.selectedFollowableOrganizations[id];
    };

    $scope.toggleUserFollowingOrg = function (id) {
        if (!$scope.selectedFollowableOrganizations[id] || confirm('Stop following this ThinkNation?')) {
            $scope.selectedFollowableOrganizations[id] = !$scope.selectedFollowableOrganizations[id];
            $scope.updateFollowedOrganizations();
        }
    };

    function initSelectedFollowableOrgs() {
        $scope.selectedFollowableOrganizations = [];
        _.each($scope.userProfile.followedOrganizations, function (org) {
            if (_.findWhere($scope.userProfile.followableOrganizations, {
                id: org.id
            })) {
                $scope.selectedFollowableOrganizations[org.id] = true;
            }
        });
    }

    $scope.updateFollowedOrganizations = function () {
        var selectedOrgIds = _.map($scope.userProfile.followableOrganizations, function (org) {
            return $scope.selectedFollowableOrganizations[org.id] ? org.id : null;
        });
        var orgIdList = _.without(selectedOrgIds, null).join(',');
        $http.put('/organization_follows/update_user_organization_follows', [orgIdList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'ThinkNations saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save ThinkNations';
        });
    };

    // --------- user's org memberships -----------

    $scope.joinNation = new SandbankJoinNation($scope, $http, $modal);

    function getMembershipForOrg(id) {
        return _.findWhere($scope.userProfile.memberships, {
            organizationId: id
        });
    }

    $scope.userIsMemberOfOrg = function (id) {
        if ($scope.userProfile) {
            return getMembershipForOrg(id) != undefined;
        } else {
            return false;
        }
    };

    $scope.toggleUserMemberOfOrg = function (id, name) {
        if ($scope.userIsMemberOfOrg(id)) {
            if (confirm('Remove your membership in this ThinkNation?')) {
                var membership = getMembershipForOrg(id);
                $http['delete']('/memberships/' + membership.id + '.json').then(function (response) {
                    $scope.loadUserProfile();
                });
            }
        } else {
            $scope.joinNation.openModal(id, name);
        }
    };

    // ------------ following other users ---------------

    $scope.followUser = function (user) {
        $http.post('/user_follows.json', {
            followee_id: user.id
        }).then(function (response) {
            user.followId = response.data;
            alertify.success('You are now following ' + user.name);
        }, function () {});
    };

    $scope.unfollowUser = function (user) {
        $http['delete']('/user_follows/' + user.followId + '.json').then(function (response) {
            user.followId = null;
            alertify.success('You are no longer following ' + user.name);
        }, function () {});
    };

    // ------------ following tags ---------------

    function followTag(controller, tag) {
        $http.post('/' + controller + '/' + tag.id + '/follow.json', {
            id: tag.id
        }).then(function (response) {
            tag.following = true;
            alertify.success('You are now following ' + tag.name);
        }, function () {});
    }

    function unfollowTag(controller, tag) {
        $http['delete']('/' + controller + '/' + tag.id + '/unfollow.json').then(function (response) {
            tag.following = false;
            alertify.success('You are no longer following ' + tag.name);
        }, function () {});
    }

    $scope.followUserTag = function (tag) {
        followTag('user_tags', tag);
    };
    $scope.unfollowUserTag = function (tag) {
        unfollowTag('user_tags', tag);
    };

    $scope.followAdminTag = function (tag) {
        followTag('admin_tags', tag);
    };
    $scope.unfollowAdminTag = function (tag) {
        unfollowTag('admin_tags', tag);
    };

    $scope.followCcsTag = function (tag) {
        followTag('common_core_standards', tag);
    };
    $scope.unfollowCcsTag = function (tag) {
        unfollowTag('common_core_standards', tag);
    };

    // ------------ auto-save user profile ---------------

    // don't let autosave be triggered more than every N milliseconds...
    $scope.autosave = _.debounce(autosaveNow, 2000);

    function autosaveNow() {
        //console.log('autosaving user profile');
        var data = {
            email: $scope.userProfile.user.email,
            alt_email: $scope.userProfile.user.altEmail,
            first_name: $scope.userProfile.user.firstName,
            last_name: $scope.userProfile.user.lastName,
            about_me: $scope.userProfile.user.aboutMe
        };
        if ($scope.passwordsMatch() && $scope.password.length) {
            data.password = $scope.password;
            data.password_confirmation = $scope.password;
        }

        startSpinner();
        $scope.profileEditStatus = 'Saving...';
        $http.put('/users/' + $scope.userId, data).then(function (response) {
            stopSpinner();
            if (_.has(data, 'password')) {
                $scope.profileEditStatus = 'Profile and password saved';
                console.log($scope.profileEditStatus);
            } else {
                $scope.profileEditStatus = 'Profile saved';
                console.log($scope.profileEditStatus);
            }
        }, function () {
            stopSpinner();
            $scope.profileEditStatus = 'Could not save profile';
        });
    }

    $scope.passwordsMatch = function () {
        return !$scope.password.length && !$scope.passwordConfirm.length || $scope.password == $scope.passwordConfirm;
    };

    // ------------ upload avatar ---------------

    // using: https://github.com/danialfarid/angular-file-upload
    $scope.onAvatarFileSelect = function ($files) {
        startSpinner();
        //$files: an array of files selected, each file has name, size, and type.
        for (var i = 0; i < $files.length; i++) {
            var file = $files[i];
            $scope.upload = $upload.upload({
                url: 'users/' + userId,
                method: 'PUT',
                withCredentials: true,
                file: file, // or list of files: $files for html5 only
                fileFormDataName: 'user[avatar]'
            }).success(function (data, status, headers, config) {
                $scope.loadUserProfile();
                $scope.profileEditStatus = 'Photo updated';
                stopSpinner();
            }).error(function () {
                stopSpinner();
                $scope.profileEditStatus = 'Error: Could not upload photo';
            })
            //.then(success, error, progress);
            ;
        }
    };

    // --------------- view helpers -------------------

    // returns e.g. "a day ago"
    // (NB: now is obtained from the DB to ensure that we have both dates in UTC;
    //    also, SQL vs. ruby dates need to be coerced into a similar format, both in UTC - see feed.json.jbuilder)
    $scope.getEventTime = function (t, now) {
        var time = moment(t, 'YYYY-MM-DD HH:mm:ss.SSS');
        var nowtime = moment(now, 'YYYY-MM-DD HH:mm:ss.SSS');
        // console.log('t:       ' + t);
        // console.log('now:     ' + now);
        // console.log('time:    ' + time.format()); // + ' ' + time.isValid());
        // console.log('nowtime: ' + nowtime.format()); // + ' ' + nowtime.isValid());
        return time.from(nowtime);
    };

    // --------------- notifications -------------------

    $scope.getNotificationFeedUrl = function (notification) {
        if (notification.actions.length) {
            var action = notification.actions[0];
            if (action.action == 'LIKE') {
                return '/social?like_id=' + action.likeId;
            } else if (action.action == 'COMMENT') {
                return '/social?comment_id=' + action.commentId;
            } else if (action.action == 'SHARE_INDIVIDUAL') {
                return '/maps/' + action.mapId;
            } else if (action.action == 'SHARE_PUBLIC') {
                return '/social?share_id=' + action.shareId;
            }
        }
        return '';
    };

    $scope.deleteNotification = function (notification) {
        $http['delete']('/notifications/' + notification.id + '.json').then(function (response) {
            // success
            notification.deleted = true;
        }, function (reason) {
            // error
            alert('Could not delete notification');
        });
    };

    $scope.notificationVerb = function (action) {
        var verbs = {
            LIKE: 'liked this:',
            COMMENT: 'commented on this:',
            SHARE_INDIVIDUAL: 'shared a MetaMap with you',
            SHARE_PUBLIC: 'shared a MetaMap with everyone',
            MAP_FOLLOW: 'followed a MetaMap:',
            USER_FOLLOW: 'followed you'
        };
        return verbs[action];
    };

    // ------------ utility functions ---------------

    // handy function for use with ng-class on radio buttons
    $scope.classIf = function (klass, b) {
        //console.log('classIf: ' + klass + ', ' + b);
        return b ? klass : '';
    };

    // avoid '$apply already in progress' error (source: https://coderwall.com/p/ngisma)
    $scope.safeApply = function (fn) {
        //console.log('safeApply on scope: ' + $scope);
        var phase = this.$root.$$phase;
        if (phase == '$apply' || phase == '$digest') {
            if (fn && typeof fn === 'function') {
                fn();
            }
        } else {
            this.$apply(fn);
        }
    };

    // source: http://ctrlq.org/code/19616-detect-touch-screen-javascript
    $scope.isTouchDevice = function () {
        return 'ontouchstart' in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
    };

    init();
};

window.UserCtrl.$inject = ['$rootScope', '$scope', '$http', '$modal', '$upload'];

// window.setTimeout(function() {
//     $('.row-height').each(function() { 
//         var highestBox = 0;
//         $('> div', this).each(function(){
//             if ($(this).height() > highestBox)
//                 highestBox = $(this).height();
//         }); 
//         $('> div', this).height(highestBox);
//     });       
// }, 300);

},{}],21:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Auth0Lock = require('auth0-lock');

var Auth0 = (function () {
    function Auth0() {
        _classCallCheck(this, Auth0);

        this.lock = new Auth0Lock('wsOnart23yViIShqT4wfJ18w2vt2cl32', 'metamap.auth0.com');
        this.lock.on('loading ready', function () {});
    }

    _createClass(Auth0, [{
        key: 'login',
        value: function login() {
            var that = this;

            var promise = new Promise(function (fulfill, reject) {
                that.getSession().then(function (profile) {
                    if (profile) {
                        fulfill(profile);
                    } else {
                        that.lock.show({
                            closable: false,
                            loginAfterSignup: true,
                            authParams: {
                                scope: 'openid offline_access'
                            }
                        }, function (err, profile, id_token, ctoken, opt, refresh_token) {
                            if (err) {
                                reject(err);
                            } else {
                                localforage.setItem('id_token', id_token);
                                localforage.setItem('profile', profile);

                                that.ctoken = ctoken;
                                that.id_token = id_token;
                                that.profile = profile;
                                that.refresh_token = refresh_token;
                                fulfill(profile);
                            }
                        });
                    }
                });
            });
            return promise;
        }
    }, {
        key: 'linkAccount',
        value: function linkAccount() {
            var that = this;
            this.lock.show({
                callbackURL: 'https://popping-fire-897.firebaseapp.com/',
                dict: {
                    signin: {
                        title: 'Link with another account'
                    }
                },
                authParams: {
                    access_token: that.ctoken
                }
            });
        }
    }, {
        key: 'getSession',
        value: function getSession() {
            var that = this;
            var getProfile = function getProfile(id_token, fulfill, reject) {
                return that.lock.getProfile(id_token, function (err, profile) {
                    if (err) {
                        reject(err);
                    } else {
                        localforage.setItem('id_token', id_token);
                        localforage.setItem('profile', profile);
                        that.id_token = id_token;
                        that.profile = profile;
                        fulfill(profile, id_token);
                    }
                });
            };
            var promise = new Promise(function (fulfill, reject) {
                var fulfilled = false;

                localforage.getItem('id_token').then(function (id_token) {
                    if (id_token) {
                        getProfile(id_token, fulfill, reject);
                    } else {
                        fulfill(null);
                    }
                });
            });
            return promise;
        }
    }, {
        key: 'logout',
        value: function logout() {
            localforage.removeItem('id_token');
            localforage.removeItem('profile');
            this.profile = null;
            window.location.reload();
        }
    }]);

    return Auth0;
})();

module.exports = Auth0;

},{"auth0-lock":undefined}],22:[function(require,module,exports){
'use strict';

var googleAnalytics = function googleAnalytics(config) {
    var apiKey, e, r;
    if (config == null) {
        config = {};
    }
    apiKey = config.GOOGLE_ANALYTICS_TRACKING_ID;
    if (apiKey && window.location.hostname !== 'localhost') {
        window.GoogleAnalyticsObject = 'ga';
        window.ga || (window.ga = function () {
            (window.ga.q = window.ga.q || []).push(arguments);
        });
        window.ga.ga = +new Date();
        e = document.createElement('script');
        r = document.getElementsByTagName('script')[0];
        e.src = '//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e, r);
        ga('create', apiKey);
        return ga('send', 'pageview');
    }
};

module.exports = googleAnalytics;

},{}],23:[function(require,module,exports){
"use strict";

var newRelic = function newRelic(config) {
    var appId, licenseKey;
    if (config == null) {
        config = {};
    }
    licenseKey = config.NEW_RELIC_LICENSE_KEY;
    appId = config.NEW_RELIC_APPLICATION_ID;
    if (licenseKey && appId && window.location.hostname !== "localhost") {
        return (window.NREUM || (NREUM = {}), __nr_require = (function (t, e, n) {
            function r(n) {
                if (!e[n]) {
                    var o = e[n] = { exports: {} };t[n][0].call(o.exports, function (e) {
                        var o = t[n][1][e];return r(o ? o : e);
                    }, o, o.exports);
                }return e[n].exports;
            }if ("function" == typeof __nr_require) return __nr_require;for (var o = 0; o < n.length; o++) r(n[o]);return r;
        })({ QJf3ax: [function (t, e) {
                function n(t) {
                    function e(e, n, a) {
                        t && t(e, n, a), a || (a = {});for (var c = s(e), f = c.length, u = i(a, o, r), d = 0; f > d; d++) c[d].apply(u, n);return u;
                    }function a(t, e) {
                        f[t] = s(t).concat(e);
                    }function s(t) {
                        return f[t] || [];
                    }function c() {
                        return n(e);
                    }var f = {};return { on: a, emit: e, create: c, listeners: s, _events: f };
                }function r() {
                    return {};
                }var o = "nr@context",
                    i = t("gos");e.exports = n();
            }, { gos: "7eSDFh" }], ee: [function (t, e) {
                e.exports = t("QJf3ax");
            }, {}], 3: [function (t) {
                function e(t, e, n, i, s) {
                    try {
                        c ? c -= 1 : r("err", [s || new UncaughtException(t, e, n)]);
                    } catch (f) {
                        try {
                            r("ierr", [f, new Date().getTime(), !0]);
                        } catch (u) {}
                    }return "function" == typeof a ? a.apply(this, o(arguments)) : !1;
                }function UncaughtException(t, e, n) {
                    this.message = t || "Uncaught error with no additional information", this.sourceURL = e, this.line = n;
                }function n(t) {
                    r("err", [t, new Date().getTime()]);
                }var r = t("handle"),
                    o = t(5),
                    i = t("ee"),
                    a = window.onerror,
                    s = !1,
                    c = 0;t("loader").features.err = !0, window.onerror = e, NREUM.noticeError = n;try {
                    throw new Error();
                } catch (f) {
                    "stack" in f && (t(1), t(4), "addEventListener" in window && t(2), window.XMLHttpRequest && XMLHttpRequest.prototype && XMLHttpRequest.prototype.addEventListener && t(3), s = !0);
                }i.on("fn-start", function () {
                    s && (c += 1);
                }), i.on("fn-err", function (t, e, r) {
                    s && (this.thrown = !0, n(r));
                }), i.on("fn-end", function () {
                    s && !this.thrown && c > 0 && (c -= 1);
                }), i.on("internal-error", function (t) {
                    r("ierr", [t, new Date().getTime(), !0]);
                });
            }, { 1: 8, 2: 5, 3: 9, 4: 7, 5: 21, ee: "QJf3ax", handle: "D5DuLP", loader: "G9z0Bl" }], 4: [function (t) {
                function e() {}if (window.performance && window.performance.timing && window.performance.getEntriesByType) {
                    var n = t("ee"),
                        r = t("handle"),
                        o = t(2);t("loader").features.stn = !0, t(1), n.on("fn-start", function (t) {
                        var e = t[0];e instanceof Event && (this.bstStart = Date.now());
                    }), n.on("fn-end", function (t, e) {
                        var n = t[0];n instanceof Event && r("bst", [n, e, this.bstStart, Date.now()]);
                    }), o.on("fn-start", function (t, e, n) {
                        this.bstStart = Date.now(), this.bstType = n;
                    }), o.on("fn-end", function (t, e) {
                        r("bstTimer", [e, this.bstStart, Date.now(), this.bstType]);
                    }), n.on("pushState-start", function () {
                        this.time = Date.now(), this.startPath = location.pathname + location.hash;
                    }), n.on("pushState-end", function () {
                        r("bstHist", [location.pathname + location.hash, this.startPath, this.time]);
                    }), "addEventListener" in window.performance && (window.performance.addEventListener("webkitresourcetimingbufferfull", function () {
                        r("bstResource", [window.performance.getEntriesByType("resource")]), window.performance.webkitClearResourceTimings();
                    }, !1), window.performance.addEventListener("resourcetimingbufferfull", function () {
                        r("bstResource", [window.performance.getEntriesByType("resource")]), window.performance.clearResourceTimings();
                    }, !1)), document.addEventListener("scroll", e, !1), document.addEventListener("keypress", e, !1), document.addEventListener("click", e, !1);
                }
            }, { 1: 6, 2: 8, ee: "QJf3ax", handle: "D5DuLP", loader: "G9z0Bl" }], 5: [function (t, e) {
                function n(t) {
                    i.inPlace(t, ["addEventListener", "removeEventListener"], "-", r);
                }function r(t) {
                    return t[1];
                }var o = (t(1), t("ee").create()),
                    i = t(2)(o),
                    a = t("gos");if ((e.exports = o, n(window), "getPrototypeOf" in Object)) {
                    for (var s = document; s && !s.hasOwnProperty("addEventListener");) s = Object.getPrototypeOf(s);s && n(s);for (var c = XMLHttpRequest.prototype; c && !c.hasOwnProperty("addEventListener");) c = Object.getPrototypeOf(c);c && n(c);
                } else XMLHttpRequest.prototype.hasOwnProperty("addEventListener") && n(XMLHttpRequest.prototype);o.on("addEventListener-start", function (t) {
                    if (t[1]) {
                        var e = t[1];"function" == typeof e ? this.wrapped = t[1] = a(e, "nr@wrapped", function () {
                            return i(e, "fn-", null, e.name || "anonymous");
                        }) : "function" == typeof e.handleEvent && i.inPlace(e, ["handleEvent"], "fn-");
                    }
                }), o.on("removeEventListener-start", function (t) {
                    var e = this.wrapped;e && (t[1] = e);
                });
            }, { 1: 21, 2: 22, ee: "QJf3ax", gos: "7eSDFh" }], 6: [function (t, e) {
                var n = (t(2), t("ee").create()),
                    r = t(1)(n);e.exports = n, r.inPlace(window.history, ["pushState"], "-");
            }, { 1: 22, 2: 21, ee: "QJf3ax" }], 7: [function (t, e) {
                var n = (t(2), t("ee").create()),
                    r = t(1)(n);e.exports = n, r.inPlace(window, ["requestAnimationFrame", "mozRequestAnimationFrame", "webkitRequestAnimationFrame", "msRequestAnimationFrame"], "raf-"), n.on("raf-start", function (t) {
                    t[0] = r(t[0], "fn-");
                });
            }, { 1: 22, 2: 21, ee: "QJf3ax" }], 8: [function (t, e) {
                function n(t, e, n) {
                    var r = t[0];"string" == typeof r && (r = new Function(r)), t[0] = o(r, "fn-", null, n);
                }var r = (t(2), t("ee").create()),
                    o = t(1)(r);e.exports = r, o.inPlace(window, ["setTimeout", "setInterval", "setImmediate"], "setTimer-"), r.on("setTimer-start", n);
            }, { 1: 22, 2: 21, ee: "QJf3ax" }], 9: [function (t, e) {
                function n() {
                    c.inPlace(this, d, "fn-");
                }function r(t, e) {
                    c.inPlace(e, ["onreadystatechange"], "fn-");
                }function o(t, e) {
                    return e;
                }var i = t("ee").create(),
                    a = t(1),
                    s = t(2),
                    c = s(i),
                    f = s(a),
                    u = window.XMLHttpRequest,
                    d = ["onload", "onerror", "onabort", "onloadstart", "onloadend", "onprogress", "ontimeout"];e.exports = i, window.XMLHttpRequest = function (t) {
                    var e = new u(t);try {
                        i.emit("new-xhr", [], e), f.inPlace(e, ["addEventListener", "removeEventListener"], "-", function (t, e) {
                            return e;
                        }), e.addEventListener("readystatechange", n, !1);
                    } catch (r) {
                        try {
                            i.emit("internal-error", [r]);
                        } catch (o) {}
                    }return e;
                }, window.XMLHttpRequest.prototype = u.prototype, c.inPlace(XMLHttpRequest.prototype, ["open", "send"], "-xhr-", o), i.on("send-xhr-start", r), i.on("open-xhr-start", r);
            }, { 1: 5, 2: 22, ee: "QJf3ax" }], 10: [function (t) {
                function e(t) {
                    if ("string" == typeof t && t.length) return t.length;if ("object" != typeof t) return void 0;if ("undefined" != typeof ArrayBuffer && t instanceof ArrayBuffer && t.byteLength) return t.byteLength;if ("undefined" != typeof Blob && t instanceof Blob && t.size) return t.size;if ("undefined" != typeof FormData && t instanceof FormData) return void 0;try {
                        return JSON.stringify(t).length;
                    } catch (e) {
                        return void 0;
                    }
                }function n(t) {
                    var n = this.params,
                        r = this.metrics;if (!this.ended) {
                        this.ended = !0;for (var i = 0; c > i; i++) t.removeEventListener(s[i], this.listener, !1);if (!n.aborted) {
                            if ((r.duration = new Date().getTime() - this.startTime, 4 === t.readyState)) {
                                n.status = t.status;var a = t.responseType,
                                    f = "arraybuffer" === a || "blob" === a || "json" === a ? t.response : t.responseText,
                                    u = e(f);if ((u && (r.rxSize = u), this.sameOrigin)) {
                                    var d = t.getResponseHeader("X-NewRelic-App-Data");d && (n.cat = d.split(", ").pop());
                                }
                            } else n.status = 0;r.cbTime = this.cbTime, o("xhr", [n, r, this.startTime]);
                        }
                    }
                }function r(t, e) {
                    var n = i(e),
                        r = t.params;r.host = n.hostname + ":" + n.port, r.pathname = n.pathname, t.sameOrigin = n.sameOrigin;
                }if (window.XMLHttpRequest && XMLHttpRequest.prototype && XMLHttpRequest.prototype.addEventListener && !/CriOS/.test(navigator.userAgent)) {
                    t("loader").features.xhr = !0;var o = t("handle"),
                        i = t(2),
                        a = t("ee"),
                        s = ["load", "error", "abort", "timeout"],
                        c = s.length,
                        f = t(1);t(4), t(3), a.on("new-xhr", function () {
                        this.totalCbs = 0, this.called = 0, this.cbTime = 0, this.end = n, this.ended = !1, this.xhrGuids = {};
                    }), a.on("open-xhr-start", function (t) {
                        this.params = { method: t[0] }, r(this, t[1]), this.metrics = {};
                    }), a.on("open-xhr-end", function (t, e) {
                        "loader_config" in NREUM && "xpid" in NREUM.loader_config && this.sameOrigin && e.setRequestHeader("X-NewRelic-ID", NREUM.loader_config.xpid);
                    }), a.on("send-xhr-start", function (t, n) {
                        var r = this.metrics,
                            o = t[0],
                            i = this;if (r && o) {
                            var f = e(o);f && (r.txSize = f);
                        }this.startTime = new Date().getTime(), this.listener = function (t) {
                            try {
                                "abort" === t.type && (i.params.aborted = !0), ("load" !== t.type || i.called === i.totalCbs && (i.onloadCalled || "function" != typeof n.onload)) && i.end(n);
                            } catch (e) {
                                try {
                                    a.emit("internal-error", [e]);
                                } catch (r) {}
                            }
                        };for (var u = 0; c > u; u++) n.addEventListener(s[u], this.listener, !1);
                    }), a.on("xhr-cb-time", function (t, e, n) {
                        this.cbTime += t, e ? this.onloadCalled = !0 : this.called += 1, this.called !== this.totalCbs || !this.onloadCalled && "function" == typeof n.onload || this.end(n);
                    }), a.on("xhr-load-added", function (t, e) {
                        var n = "" + f(t) + !!e;this.xhrGuids && !this.xhrGuids[n] && (this.xhrGuids[n] = !0, this.totalCbs += 1);
                    }), a.on("xhr-load-removed", function (t, e) {
                        var n = "" + f(t) + !!e;this.xhrGuids && this.xhrGuids[n] && (delete this.xhrGuids[n], this.totalCbs -= 1);
                    }), a.on("addEventListener-end", function (t, e) {
                        e instanceof XMLHttpRequest && "load" === t[0] && a.emit("xhr-load-added", [t[1], t[2]], e);
                    }), a.on("removeEventListener-end", function (t, e) {
                        e instanceof XMLHttpRequest && "load" === t[0] && a.emit("xhr-load-removed", [t[1], t[2]], e);
                    }), a.on("fn-start", function (t, e, n) {
                        e instanceof XMLHttpRequest && ("onload" === n && (this.onload = !0), ("load" === (t[0] && t[0].type) || this.onload) && (this.xhrCbStart = new Date().getTime()));
                    }), a.on("fn-end", function (t, e) {
                        this.xhrCbStart && a.emit("xhr-cb-time", [new Date().getTime() - this.xhrCbStart, this.onload, e], e);
                    });
                }
            }, { 1: "XL7HBI", 2: 11, 3: 9, 4: 5, ee: "QJf3ax", handle: "D5DuLP", loader: "G9z0Bl" }], 11: [function (t, e) {
                e.exports = function (t) {
                    var e = document.createElement("a"),
                        n = window.location,
                        r = {};e.href = t, r.port = e.port;var o = e.href.split("://");return (!r.port && o[1] && (r.port = o[1].split("/")[0].split("@").pop().split(":")[1]), r.port && "0" !== r.port || (r.port = "https" === o[0] ? "443" : "80"), r.hostname = e.hostname || n.hostname, r.pathname = e.pathname, r.protocol = o[0], "/" !== r.pathname.charAt(0) && (r.pathname = "/" + r.pathname), r.sameOrigin = !e.hostname || e.hostname === document.domain && e.port === n.port && e.protocol === n.protocol, r);
                };
            }, {}], gos: [function (t, e) {
                e.exports = t("7eSDFh");
            }, {}], "7eSDFh": [function (t, e) {
                function n(t, e, n) {
                    if (r.call(t, e)) return t[e];var o = n();if (Object.defineProperty && Object.keys) try {
                        return (Object.defineProperty(t, e, { value: o, writable: !0, enumerable: !1 }), o);
                    } catch (i) {}return (t[e] = o, o);
                }var r = Object.prototype.hasOwnProperty;e.exports = n;
            }, {}], D5DuLP: [function (t, e) {
                function n(t, e, n) {
                    return r.listeners(t).length ? r.emit(t, e, n) : (o[t] || (o[t] = []), void o[t].push(e));
                }var r = t("ee").create(),
                    o = {};e.exports = n, n.ee = r, r.q = o;
            }, { ee: "QJf3ax" }], handle: [function (t, e) {
                e.exports = t("D5DuLP");
            }, {}], XL7HBI: [function (t, e) {
                function n(t) {
                    var e = typeof t;return !t || "object" !== e && "function" !== e ? -1 : t === window ? 0 : i(t, o, function () {
                        return r++;
                    });
                }var r = 1,
                    o = "nr@id",
                    i = t("gos");e.exports = n;
            }, { gos: "7eSDFh" }], id: [function (t, e) {
                e.exports = t("XL7HBI");
            }, {}], loader: [function (t, e) {
                e.exports = t("G9z0Bl");
            }, {}], G9z0Bl: [function (t, e) {
                function n() {
                    var t = l.info = NREUM.info;if (t && t.licenseKey && t.applicationID && f && f.body) {
                        s(h, function (e, n) {
                            e in t || (t[e] = n);
                        }), l.proto = "https" === p.split(":")[0] || t.sslForHttp ? "https://" : "http://", a("mark", ["onload", i()]);var e = f.createElement("script");e.src = l.proto + t.agent, f.body.appendChild(e);
                    }
                }function r() {
                    "complete" === f.readyState && o();
                }function o() {
                    a("mark", ["domContent", i()]);
                }function i() {
                    return new Date().getTime();
                }var a = t("handle"),
                    s = t(1),
                    c = window,
                    f = c.document,
                    u = "addEventListener",
                    d = "attachEvent",
                    p = ("" + location).split("?")[0],
                    h = { beacon: "bam.nr-data.net", errorBeacon: "bam.nr-data.net", agent: "js-agent.newrelic.com/nr-515.min.js" },
                    l = e.exports = { offset: i(), origin: p, features: {} };f[u] ? (f[u]("DOMContentLoaded", o, !1), c[u]("load", n, !1)) : (f[d]("onreadystatechange", r), c[d]("onload", n)), a("mark", ["firstbyte", i()]);
            }, { 1: 20, handle: "D5DuLP" }], 20: [function (t, e) {
                function n(t, e) {
                    var n = [],
                        o = "",
                        i = 0;for (o in t) r.call(t, o) && (n[i] = e(o, t[o]), i += 1);return n;
                }var r = Object.prototype.hasOwnProperty;e.exports = n;
            }, {}], 21: [function (t, e) {
                function n(t, e, n) {
                    e || (e = 0), "undefined" == typeof n && (n = t ? t.length : 0);for (var r = -1, o = n - e || 0, i = Array(0 > o ? 0 : o); ++r < o;) i[r] = t[e + r];return i;
                }e.exports = n;
            }, {}], 22: [function (t, e) {
                function n(t) {
                    return !(t && "function" == typeof t && t.apply && !t[i]);
                }var r = t("ee"),
                    o = t(1),
                    i = "nr@wrapper",
                    a = Object.prototype.hasOwnProperty;e.exports = function (t) {
                    function e(t, e, r, a) {
                        function nrWrapper() {
                            var n, i, s, f;try {
                                i = this, n = o(arguments), s = r && r(n, i) || {};
                            } catch (d) {
                                u([d, "", [n, i, a], s]);
                            }c(e + "start", [n, i, a], s);try {
                                return f = t.apply(i, n);
                            } catch (p) {
                                throw (c(e + "err", [n, i, p], s), p);
                            } finally {
                                c(e + "end", [n, i, f], s);
                            }
                        }return n(t) ? t : (e || (e = ""), nrWrapper[i] = !0, f(t, nrWrapper), nrWrapper);
                    }function s(t, r, o, i) {
                        o || (o = "");var a,
                            s,
                            c,
                            f = "-" === o.charAt(0);for (c = 0; c < r.length; c++) s = r[c], a = t[s], n(a) || (t[s] = e(a, f ? s + o : o, i, s, t));
                    }function c(e, n, r) {
                        try {
                            t.emit(e, n, r);
                        } catch (o) {
                            u([o, e, n, r]);
                        }
                    }function f(t, e) {
                        if (Object.defineProperty && Object.keys) try {
                            var n = Object.keys(t);return (n.forEach(function (n) {
                                Object.defineProperty(e, n, { get: function get() {
                                        return t[n];
                                    }, set: function set(e) {
                                        return (t[n] = e, e);
                                    } });
                            }), e);
                        } catch (r) {
                            u([r]);
                        }for (var o in t) a.call(t, o) && (e[o] = t[o]);return e;
                    }function u(e) {
                        try {
                            t.emit("internal-error", e);
                        } catch (n) {}
                    }return (t || (t = r), e.inPlace = s, e.flag = i, e);
                };
            }, { 1: 21, ee: "QJf3ax" }] }, {}, ["G9z0Bl", 3, 10, 4]));
        ;NREUM.info = { beacon: "bam.nr-data.net", errorBeacon: "bam.nr-data.net", licenseKey: licenseKey, applicationID: appId, sa: 1, agent: "js-agent.newrelic.com/nr-515.min.js" };
    }
};

module.exports = newRelic;

},{}],24:[function(require,module,exports){
'use strict';

var rayGun = function rayGun(config) {
    var apiKey;
    if (config == null) {
        config = {};
    }
    apiKey = config.RAYGUN_API_KEY;
    if (apiKey && window.location.hostname !== 'localhost') {
        if (Raygun != null) {
            Raygun.init(apiKey, {
                ignore3rdPartyErrors: true
            }).attach();
        }
        return Raygun != null ? Raygun.filterSensitiveData(['password']) : void 0;
    }
};

module.exports = rayGun;

},{}],25:[function(require,module,exports){
'use strict';

var userSnap = function userSnap(config) {
    var apiKey = '032baf87-8545-4ebc-a557-934859371fa5.js',
        s,
        x;
    if (config == null) {
        config = {};
    }
    apiKey = config.USER_SNAP_API_KEY;
    if (apiKey && window.location.hostname !== 'localhost') {
        window.usersnapconfig = {
            mode: 'report',
            shortcut: true,
            beforeOpen: function beforeOpen(obj) {
                return UserSnap.setEmailBox(Doc.app.user.userName);
            }
        };
        s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//api.usersnap.com/load/' + apiKey + '.js';
        x = document.getElementsByTagName('head')[0];
        return x.appendChild(s);
    }
};

module.exports = userSnap;

},{}],26:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('meta-dialog', '<div id="full-width" class="modal container fade" tabindex="-1"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button> <h4 class="modal-title">Full Width</h4> </div> <div class="modal-body"> <meta-table></meta-table> </div> <div class="modal-footer"> <button type="button" data-dismiss="modal" class="btn btn-default">Close</button>  </div> </div>', function(opts) {
});
},{"riot":"riot"}],27:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('meta-table', '<div class="row"> <div class="col-md-12"> <div class="portlet box grey-cascade"> <div class="portlet-title"> <div class="caption"> <i class="fa fa-icon-th-large"></i>Maps </div> <div class="actions"> <a href="javascript:;" class="btn btn-default btn-sm"> <i class="fa fa-pencil"></i> Add </a> <div class="btn-group"> <a class="btn btn-default btn-sm" href="javascript:;" data-toggle="dropdown"> <i class="fa fa-cogs"></i> Tools <i class="fa fa-angle-down"></i> </a> <ul class="dropdown-menu pull-right"> <li> <a href="javascript:;"> <i class="fa fa-pencil"></i> Edit </a> </li> <li> <a href="javascript:;"> <i class="fa fa-trash-o"></i> Delete </a> </li> <li> <a href="javascript:;"> <i class="fa fa-share"></i> Share </a> </li> <li class="divider"> </li> </ul> </div> </div> </div> <div class="portlet-body"> <div class="table-toolbar"> </div> <table class="table table-striped table-bordered table-hover" id="sample_1"> <thead> <tr> <th class="table-checkbox"> <input type="checkbox" class="group-checkable" data-set="#sample_1 .checkboxes"> </th> <th> User ID </th> <th> Name </th> <th> Created On </th> <th> Status </th> </tr> </thead> <tbody> <tr each="{ data }" class="odd gradeX"> <td> <input type="checkbox" class="checkboxes" value="1"> </td> <td>{ user_id }</td> <td>{ name }</td> <td class="center"> { created_at } </td> <td> <span class="label label-sm label-success"> Private </span> </td> </tr> </tbody> </table> </div> </div> </div> </div>', function(opts) {var _this = this;

this.mixin('config');
this.url = this.pathImg();

FrontEnd.MetaFire.getData('maps/list').then(function (data) {

    try {
        _this.data = _.toArray(data);
        _this.update();

        var table = $(_this.sample_1);

        // begin first table
        table.dataTable({

            // Uncomment below line("dom" parameter) to fix the dropdown overflow issue in the datatable cells. The default datatable layout
            // setup uses scrollable div(table-scrollable) with overflow:auto to enable vertical scroll(see: assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js).
            // So when dropdowns used the scrollable div should be removed.
            //"dom": "<'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r>t<'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",

            "bStateSave": true, // save datatable state(pagination, sort, etc) in cookie.

            "columns": [{
                "orderable": false
            }, {
                "orderable": true
            }, {
                "orderable": true
            }, {
                "orderable": true
            }, {
                "orderable": false
            }],
            "lengthMenu": [[5, 15, 20, -1], [5, 15, 20, "All"] // change per page values here
            ]
        });

        var tableWrapper = table.parent().parent().parent().find('#sample_1_wrapper');

        table.find('.group-checkable').change(function () {
            var set = jQuery(this).attr("data-set");
            var checked = jQuery(this).is(":checked");
            jQuery(set).each(function () {
                if (checked) {
                    $(this).attr("checked", true);
                    $(this).parents('tr').addClass("active");
                } else {
                    $(this).attr("checked", false);
                    $(this).parents('tr').removeClass("active");
                }
            });
            jQuery.uniform.update(set);
        });

        table.on('change', 'tbody tr .checkboxes', function () {
            $(this).parents('tr').toggleClass("active");
        });

        tableWrapper.find('.dataTables_length select').addClass("form-control input-xsmall input-inline"); // modify table per page dropdown
    } catch (e) {
        window.FrontEnd.error(e);
    }
});
});
},{"riot":"riot"}],28:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-actions', '<div class="page-actions"> <div class="btn-group"> <button type="button" class="btn red-haze btn-sm dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <span class="hidden-sm hidden-xs">Actions&nbsp;</span><i class="fa fa-angle-down"></i> </button> <ul class="dropdown-menu" role="menu"> <li class="start active "> <a href="javascript:;"> <i class="fa fa-pencil-square-o"> New Map </i> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-print"> Export/Print </i> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-tag"> Tag Map </i> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-copy"></i> Duplicate Map </a> </li> <li> <a href="javascript:;"> <i class="fa fa-users"></i> Share Map </a> </li> <li class="divider"> </li> <li> <a href="javascript:;"> <i class="fa fa-gear"></i> Settings </a> </li> </ul> </div> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Page Title </span> </div>', function(opts) {
});
},{"riot":"riot"}],29:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-body', '<div class="page-header-fixed page-sidebar-closed-hide-logo page-sidebar-closed-hide-logo"> <page-header></page-header> <div class="clearfix"> </div> <page-container></page-container> <page-footer></page-footer> </div> <meta-dialog></meta-dialog>', function(opts) {
});
},{"riot":"riot"}],30:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-container', '<div class="page-container"> <page-sidebar></page-sidebar> <page-content></page-content> </div>', function(opts) {
});
},{"riot":"riot"}],31:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-content', '<div class="page-content-wrapper"> <div class="page-content"> <div class="page-head"> <div id="app-container"> <div id="diagram" style="position:absolute; background-color: white; height: 100%; width: 80%; "></div> <div id="overview-diagram" style="display: none;"></div> </div> </div> </div> </div>', function(opts) {
});
},{"riot":"riot"}],32:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-footer', '<div class="page-footer"> <div class="page-footer-inner"> 2015 &copy; Cabrera Research Lab </div> <div class="scroll-to-top"> <i class="icon-arrow-up"></i> </div> </div>', function(opts) {
});
},{"riot":"riot"}],33:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-header', '<div id="header-top" class="page-header navbar navbar-fixed-top"> <div id="header-content" class="page-header-inner"> <page-logo></page-logo> <page-actions></page-actions> <div class="page-top"> <page-search></page-search> <page-topmenu></page-topmenu> </div> </div> </div>', function(opts) {
});
},{"riot":"riot"}],34:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-logo', '<div class="page-logo"> <a href="index.html"> <img src="metamap/assets/img/metamap_cloud.png" alt="logo" class="logo-default"> </a> <div class="menu-toggler sidebar-toggler">  </div> </div> <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse"> </a>', function(opts) {
});
},{"riot":"riot"}],35:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-search', ' <form class="search-form" action="extra_search.html" method="GET"> <div class="input-group"> <input type="text" class="form-control input-sm" placeholder="Search..." name="query"> <span class="input-group-btn"> <a href="javascript:;" class="btn submit"><i class="fa fa-search"></i></a> </span> </div> </form>', function(opts) {
});
},{"riot":"riot"}],36:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-sidebar', '<div class="page-sidebar-wrapper"> <div class="page-sidebar navbar-collapse collapse"> <ul class="page-sidebar-menu " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200"> <li onclick="{ parent.click }" each="{ data }"> <a if="{ icon }" href="javascript:;"> <i class="{ icon }" riot-style="color:#{ color };"></i> <span class="title">{ title }</span> <span class="{ arrow: menu.length }"></span> </a> <ul if="{ menu.length }" class="sub-menu"> <li each="{ menu }"> <a href="javascript:;"> <i class="{ icon }"></i> <span class="title">{ title }</span> </a> </li> </ul> </li> </ul> </div> </div>', function(opts) {

this.click = function () {
    console.log('foo');
};

var that = this;
that.data = [];
that.MetaMap = MetaMap;
that.MetaMap.MetaFire.getData('metamap/sidebar').then(function (data) {
    that.data = _.filter(_.sortBy(data, 'order'), function (d) {
        var include = d.archive != true;
        if (include && d.menu && d.menu) {
            d.menu = _.filter(_.sortBy(d.menu, 'order'), function (m) {
                return m.archive != true;
            });
        }
        return include;
    });
    that.update();
});
});
},{"riot":"riot"}],37:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-topmenu', '<div class="top-menu"> <ul class="nav navbar-nav pull-right"> <li class="separator hide"></li>  <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_notification_bar"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <i class="fa fa-bell-o"></i> <span class="badge badge-success"> 1 </span> </a> <ul class="dropdown-menu"> <li class="external"> <h3> <span class="bold">1 pending</span> notification </h3> <a href="javascript:;">view all</a> </li> <li> <ul class="dropdown-menu-list scroller" style="height: 250px;" data-handle-color="#637283"> <li> <a href="javascript:;"> <span class="time">just now</span> <span class="details"> <span class="label label-sm label-icon label-success"> <i class="fa fa-plus"></i> </span> New user registered. </span> </a> </li> </ul> </li> </ul> </li> <li class="separator hide"></li>  <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_points_bar"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <i class="fa fa-trophy"></i> <span class="badge badge-success"> 3 </span> </a> <ul class="dropdown-menu"> <li class="external"> <h3> <span class="bold">3 new</span> achievements </h3> <a href="javascript:;">view all</a> </li> <li> <ul class="dropdown-menu-list scroller" style="height: 250px;" data-handle-color="#637283"> <li> <a href="javascript:;"> <span class="time">just now</span> <span class="details"> <span class="label label-sm label-icon label-success"> <i class="fa fa-plus"></i> </span> Created a perspective circle! </span> </a> </li> </ul> </li> </ul> </li>  <li class="separator hide"></li>  <li class="dropdown" id="header_dashboard_bar"> <a class="dropdown-toggle" href="javascript:;"> <i class="fa fa-home"></i> </a> </li> <li class="separator hide"></li>  <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_help_bar"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <i class="fa fa-graduation-cap"></i> </a> <ul class="dropdown-menu"> <li> <ul class="dropdown-menu-list scroller" style="height: 270px;" data-handle-color="#637283"> <li> <a href="javascript:;"> <i class="fa fa-lightbulb-o"></i> <span class="title">Tutorial</span> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-question"></i> <span class="title">FAQ</span> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-life-ring"></i> <span class="title">Support</span> </a> </li> <li onclick="UserSnap.openReportWindow();"> <a href="javascript:;" > <i class="fa fa-frown-o"></i> <span class="title">Feedback</span> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-bullseye"></i> <span class="title">Inline Training</span> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-laptop"></i> <span class="title">Online Training</span> </a> </li> </ul> </li> </ul> </li> <li class="separator hide"> </li> <li class="dropdown dropdown-user dropdown"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <span class="username username-hide-on-mobile"> { username } </span> <img alt="" height="39" width="39" class="img-circle" riot-src="{ picture }"> </a> <ul class="dropdown-menu dropdown-menu-default"> <li> <a href="javascript:;"> <i class="fa fa-user"></i> My Profile </a> </li> <li onclick="{ linkAccount }"> <a href="javascript:;"> <i class="fa fa-compress"></i> Link Account </a> </li> <li onclick="{ logout }"> <a href="javascript:;"> <i class="fa fa-sign-out"></i> Log Out </a> </li> </ul> </li> </ul> </div>', function(opts) {
this.username = '';
this.picture = '';

var that = this;
localforage.getItem('profile').then(function (profile) {
    that.username = profile.nickname;
    that.picture = profile.picture || 'metamap/assets/admin/layout4/img/avatar.jpg';
    that.update();
});

this.logout = function () {
    MetaMap.Auth0.logout();
};

this.linkAccount = function () {
    MetaMap.Auth0.linkAccount();
};
});
},{"riot":"riot"}]},{},[2])(2)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9NZXRhTWFwLmpzIiwiQzovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvZW50cnkuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hcHAvdXNlci5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9hbmFseXRpY3MuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvYXR0YWNobWVudHMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvYXV0b3NhdmUuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvZWRpdG9yLmpzIiwiQzovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL2VkaXRvcl9vcHRpb25zLmpzIiwiQzovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL2dlbmVyYXRvci5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9sYXlvdXRzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL21hcC5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9wZXJzcGVjdGl2ZXMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvcHJlc2VudGVyLmpzIiwiQzovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL3NoYXJpbmcuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvc3RhbmRhcmRzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL3RhZ2dpbmcuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvdGVtcGxhdGVzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL3Rlc3RzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL3VpLmpzIiwiQzovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL3VzZXIuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvYXV0aDAuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvZ29vZ2xlYW5hbHl0aWNzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvaW50ZWdyYXRpb25zL25ld3JlbGljLmpzIiwiQzovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvaW50ZWdyYXRpb25zL3JheWd1bi5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2ludGVncmF0aW9ucy91c2Vyc25hcC5qcyIsIm1ldGFtYXAvc3JjL3RhZ3MvY29tcG9uZW50cy9tZXRhLWRpYWxvZy50YWciLCJtZXRhbWFwL3NyYy90YWdzL2NvbXBvbmVudHMvbWV0YS10YWJsZS50YWciLCJtZXRhbWFwL3NyYy90YWdzL3BhZ2UtYWN0aW9ucy50YWciLCJtZXRhbWFwL3NyYy90YWdzL3BhZ2UtYm9keS50YWciLCJtZXRhbWFwL3NyYy90YWdzL3BhZ2UtY29udGFpbmVyLnRhZyIsIm1ldGFtYXAvc3JjL3RhZ3MvcGFnZS1jb250ZW50LnRhZyIsIm1ldGFtYXAvc3JjL3RhZ3MvcGFnZS1mb290ZXIudGFnIiwibWV0YW1hcC9zcmMvdGFncy9wYWdlLWhlYWRlci50YWciLCJtZXRhbWFwL3NyYy90YWdzL3BhZ2UtbG9nby50YWciLCJtZXRhbWFwL3NyYy90YWdzL3BhZ2Utc2VhcmNoLnRhZyIsIm1ldGFtYXAvc3JjL3RhZ3MvcGFnZS1zaWRlYmFyLnRhZyIsIm1ldGFtYXAvc3JjL3RhZ3MvcGFnZS10b3BtZW51LnRhZyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztBQ0FBLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0FBQy9DLElBQUksUUFBUSxHQUFHLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0FBQ3JELElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDOztJQUV4QyxPQUFPO0FBRUUsYUFGVCxPQUFPLEdBRUs7OEJBRlosT0FBTzs7QUFJTCxZQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUM7QUFDbEMsWUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO0FBQ3pCLGdCQUFRLEVBQUUsQ0FBQztLQUNkOztpQkFQQyxPQUFPOztlQVNMLGdCQUFHOzs7QUFDSCxnQkFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ2hCLGdCQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFDLE9BQU8sRUFBSztBQUNqQyxvQkFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFOUIsc0JBQUssUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ3RCLHNCQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3ZCLGlCQUFDLENBQUMsS0FBSyxDQUFDLFlBQU07QUFDViw0QkFBUSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2hCLDBCQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDZCx3QkFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1oseUJBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNiLHlCQUFLLENBQUMs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LEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLENBQUM7OztBQUdsRSxZQUFJLFNBQVMsR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsa0JBQWtCLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDaEUsWUFBSSxTQUFTLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZELFlBQUksU0FBUyxHQUFHLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQztBQUMzRCxlQUFPLENBQUMsR0FBRyxDQUFDLDRDQUE0QyxHQUFHLFlBQVksR0FBRyxlQUFlLEdBQUcsU0FBUyxHQUNqRyxlQUFlLEdBQUcsU0FBUyxHQUFHLGVBQWUsR0FBRyxTQUFTLENBQUMsQ0FBQzs7Ozs7QUFLL0QsWUFBSSxFQUFFLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQztBQUM3QixlQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLGdCQUFJLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO0FBQ3JCLGdCQUFJLFdBQVcsR0FBRyxLQUFLLENBQUMsWUFBWSxDQUFDO0FBQ3JDLGdCQUFJLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFBLEdBQUksSUFBSSxDQUFDO0FBQzlELGdCQUFJLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFBLEdBQUksSUFBSSxDQUFDO0FBQzlELGdCQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7QUFD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LEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsT0FBTyxDQUFDLENBQUE7U0FBRSxDQUFBLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx5QkFBUyxDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQUUsNkJBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUMsQUFBQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEFBQUMsT0FBTyxDQUFDLENBQUE7cUJBQUUsQUFBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFBO3FCQUFFLEFBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQUUsK0JBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtxQkFBRSxBQUFDLFNBQVMsQ0FBQyxHQUFHO0FBQUUsK0JBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO3FCQUFF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Q0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLGNBQWMsSUFBSSxjQUFjLENBQUMsU0FBUyxJQUFJLGNBQWMsQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQSxBQUFDLENBQUE7aUJBQUUsQUFBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxZQUFZO0FBQUUscUJBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFBLEFBQUMsQ0FBQTtpQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHFCQUFDLEtBQUssSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUEsQUFBQyxDQUFBO2lCQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxZQUFZO0FBQUUscUJBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFBLEFBQUMsQ0FBQTtpQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxVQUFVLENBQUMsRUFBRTtBQUFFLHFCQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLEFBQUMsSUFBSSxJQUFJLEVBQUEsQ0FBRSxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7aUJBQUUsQ0FBQyxDQUFBO2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUU7QUFBRSx5QkFBUyxDQUFDLEdBQUcsRUFBRyxBQUFDLElBQUksTUFBTSxDQUFDLFdBQVcsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLGdCQUFnQixFQUFFO0FBQUUsd0JBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7d0JBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUM7d0JBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxDQUFDLFlBQVksS0FBSyxLQUFLLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFBLEFBQUMsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsNEJBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLENBQUMsWUFBWSxLQUFLLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFBO3FCQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsNEJBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxD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QUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUE7cUJBQUU7aUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsMkJBQTJCLEVBQUUsVUFBVSxDQUFDLEVBQUU7QUFBRSx3QkFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxBQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBLEFBQUMsQ0FBQTtpQkFBRSxDQUFDLENBQUE7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsb0JBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUEsQUFBQztvQkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUE7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLG9CQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFBLEFBQUM7b0JBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsdUJBQXVCLEVBQUUsMEJBQTBCLEVBQUUsNkJBQTZCLEVBQUUseUJBQXlCLENBQUMsRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLFdBQVcsRUFBRSxVQUFVLENBQUMsRUFBRTtBQUFFLHFCQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQTtpQkFBRSxDQUFDLENBQUE7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHdCQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxRQUFRLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFBLEFBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFBO2lCQUFFLEFBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQSxBQUFDO29CQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLE1B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LE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLEFBQUMsSUFBSSxRQUFRLElBQUksT0FBTyxDQUFDLEVBQUUsT0FBTyxLQUFLLENBQUMsQ0FBQyxBQUFDLElBQUksV0FBVyxJQUFJLE9BQU8sV0FBVyxJQUFJLENBQUMsWUFBWSxXQUFXLElBQUksQ0FBQyxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQyxVQUFVLENBQUMsQUFBQyxJQUFJLFdBQVcsSUFBSSxPQUFPLElBQUksSUFBSSxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEFBQUMsSUFBSSxXQUFXLElBQUksT0FBTyxRQUFRLElBQUksQ0FBQyxZQUFZLFFBQVEsRUFBRSxPQUFPLEtBQUssQ0FBQyxDQUFDLEFBQUMsSUFBSTtBQUFFLCtCQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFBO3FCQUFFLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFBRSwrQkFBTyxLQUFLLENBQUMsQ0FBQTtxQkFBRTtpQkFBRSxBQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUFFLHdCQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTTt3QkFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxBQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFO0FBQUUsNEJBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQUFBQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUU7QUFBRSxpQ0FBSSxDQUFDLENBQUMsUUFBUSxHQUFHLEFBQUMsSUFBSSxJQUFJLEVBQUEsQ0FBRSxPQUFPLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVSxDQUFBLEVBQUU7QUFBRSxpQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEFBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFlBQVk7b0NBQUUsQ0FBQyxHQUFHLGFBQWEsS0FBSyxDQUFDLElBQUksTUFBTSxLQUFLLENBQUMsSUFBSSxNQUFNLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLFlBQVk7b0NBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLEtBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFBLEFBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFBLEVBQUU7QUFBRSx3Q0FBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLHFCQUFxQixDQUFDLENBQUMsQUFBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFBLEFBQUMsQ0FBQTtpQ0FBRTs2QkFBRSxNQUFNLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEFBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFBO3lCQUFFO3FCQUFFO2lCQUFFLEFBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHdCQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEFBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsUUFBUSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUE7aUJBQUUsQUFBQyxJQUFJLE1BQU0sQ0FBQyxjQUFjLElBQUksY0FBYyxDQUFDLFNBQVMsSUFBSSxjQUFjLENBQUMsU0FBUyxDQUFDLGdCQUFnQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEVBQUU7QUFBRSxxQkFBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQUFBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDO3dCQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO3dCQUFFLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLFNBQVMsQ0FBQzt3QkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU07d0JBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsWUFBWTtBQUFFLDRCQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFBO3FCQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLGdCQUFnQixFQUFFLFVBQVUsQ0FBQyxFQUFFO0FBQUUsNEJBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxjQUFjLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsdUNBQWUsSUFBSSxLQUFLLElBQUksTUFBTSxJQUFJLEtBQUssQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxFQUFFLEtBQUssQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsNEJBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPOzRCQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDOzRCQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQUFBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7QUFBRSxnQ0FBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFBLEFBQUMsQ0FBQTt5QkFBRSxBQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsQUFBQyxJQUFJLElBQUksRUFBQSxDQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFDLEVBQUU7QUFBRSxnQ0FBSTtBQUFFLHVDQUFPLEtBQUssQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQSxBQUFDLEVBQUUsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxRQUFRLEtBQUssQ0FBQyxDQUFDLFlBQVksSUFBSSxVQUFVLElBQUksT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFBLEFBQUMsQ0FBQSxJQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7NkJBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUFFLG9DQUFJO0FBQUUscUNBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO2lDQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRzs2QkFBRTt5QkFBRSxDQUFDLEFBQUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxLQUFLLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxJQUFJLFVBQVUsSUFBSSxPQUFPLENBQUMsQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSw0QkFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxJQUFJLENBQUMsQ0FBQSxBQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsa0JBQWtCLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsNEJBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUEsQUFBQyxDQUFBO3FCQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLHNCQUFzQixFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFDLFlBQVksY0FBYyxJQUFJLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyx5QkFBeUIsRUFBRSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx5QkFBQyxZQUFZLGNBQWMsSUFBSSxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx5QkFBQyxZQUFZLGNBQWMsS0FBSyxRQUFRLEtBQUssQ0FBQyxLQUFLLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUEsQUFBQyxFQUFFLENBQUMsTUFBTSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFBLEFBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFBLEtBQU0sSUFBSSxDQUFDLFVBQVUsR0FBRyxBQUFDLElBQUksSUFBSSxFQUFBLENBQUUsT0FBTyxFQUFFLENBQUEsQUFBQyxDQUFBLEFBQUMsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsNEJBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxBQUFDLElBQUksSUFBSSxFQUFBLENBQUUsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO3FCQUFFLENBQUMsQ0FBQTtpQkFBRTthQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxpQkFBQyxDQUFDLE9BQU8sR0FBRyxVQUFVLENBQUMsRUFBRTtBQUFFLHdCQUFJLENBQUMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQzt3QkFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLFFBQVE7d0JBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxBQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxBQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEFBQUMsUUFBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLEFBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxJQUFJLEdBQUcsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFBLEFBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFRLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUEsQUFBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUMsUUFBUSxJQUFJLENBQUMsQ0FBQyxRQUFRLEtBQUssUUFBUSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLFFBQVEsS0FBSyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQSxDQUFBO2lCQUFFLENBQUE7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLGlCQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQTthQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsd0JBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxBQUFDLElBQUksTUFBTSxDQUFDLGNBQWMsSUFBSSxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUk7QUFBRSxnQ0FBTyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQSxDQUFBO3FCQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRyxBQUFDLFFBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUEsQ0FBQTtpQkFBRSxBQUFDLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLEFBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUE7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLDJCQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBLEFBQUMsQ0FBQTtpQkFBRSxBQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUU7b0JBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxBQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO2FBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLGlCQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQTthQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUFFLHdCQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxBQUFD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Q0FBQyxJQUFJLENBQUMsQ0FBQSxBQUFDLENBQUMsQUFBQyxPQUFPLENBQUMsQ0FBQTtpQkFBRSxBQUFDLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLEFBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUE7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHFCQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQSxBQUFDLEVBQUUsV0FBVyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUEsQUFBQyxDQUFDLEFBQUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQUFBQyxPQUFPLENBQUMsQ0FBQTtpQkFBRSxBQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFBO2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx5QkFBUyxDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQUUsMkJBQU8sRUFBRSxDQUFDLElBQUksVUFBVSxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUEsQUFBQyxDQUFBO2lCQUFFLEFBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQztvQkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFBRSxDQUFDLEdBQUcsWUFBWTtvQkFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsQUFBQyxDQUFDLENBQUMsT0FBTyxHQUFHLFVBQVUsQ0FBQyxFQUFFO0FBQUUsNkJBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLGlDQUFTLFNBQVMsR0FBRztBQUFFLGdDQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxBQUFDLElBQUk7QUFBRSxpQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUE7NkJBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUFFLGlDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBOzZCQUFFLEFBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEFBQUMsSUFBSTtBQUFFLHVDQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTs2QkFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQUUsdUNBQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQSxDQUFBOzZCQUFFLFNBQVM7QUFBRSxpQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBOzZCQUFFO3lCQUFFLEFBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFBLEFBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsRUFBRSxTQUFTLENBQUEsQUFBQyxDQUFBO3FCQUFFLEFBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFBLEFBQUMsQ0FBQyxBQUFDLElBQUksQ0FBQzs0QkFBRSxDQUFDOzRCQUFFLENBQUM7NEJBQUUsQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUEsQUFBQyxDQUFBO3FCQUFFLEFBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSw0QkFBSTtBQUFFLDZCQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FB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Q0osQ0FBQzs7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQzs7O0FDeEIxQjtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pFQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIEF1dGgwID0gcmVxdWlyZSgnLi9qcy9pbnRlZ3JhdGlvbnMvYXV0aDAnKTtcclxudmFyIHVzZXJzbmFwID0gcmVxdWlyZSgnLi9qcy9pbnRlZ3JhdGlvbnMvdXNlcnNuYXAnKTtcclxudmFyIFVzZXIgPSByZXF1aXJlKCcuL2pzL2FwcC91c2VyLmpzJyk7XHJcbnZhciBFZGl0b3IgPSByZXF1aXJlKCcuL2pzL2NhbnZhcy9lZGl0b3IuanMnKTtcclxuXHJcbmNsYXNzIE1ldGFNYXAge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgICAgICB0aGlzLk1ldGFGaXJlID0gRnJvbnRFbmQuTWV0YUZpcmU7XHJcbiAgICAgICAgdGhpcy5BdXRoMCA9IG5ldyBBdXRoMCgpO1xyXG4gICAgICAgIHVzZXJzbmFwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5BdXRoMC5sb2dpbigpLnRoZW4oKHByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgc2VsZi5Vc2VyID0gbmV3IFVzZXIocHJvZmlsZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLk1ldGFGaXJlLmxvZ2luKCk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5Gcm9udEVuZC5pbml0KCk7XHJcbiAgICAgICAgICAgIF8uZGVsYXkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgTWV0cm9uaWMuaW5pdCgpOyAvLyBpbml0IG1ldHJvbmljIGNvcmUgY29tcG9uZXRzXHJcbiAgICAgICAgICAgICAgICBMYXlvdXQuaW5pdCgpOyAvLyBpbml0IGxheW91dFxyXG4gICAgICAgICAgICAgICAgRGVtby5pbml0KCk7IC8vIGluaXQgZGVtbyBmZWF0dXJlc1xyXG4gICAgICAgICAgICAgICAgSW5kZXguaW5pdCgpOyAvLyBpbml0IGluZGV4IHBhZ2VcclxuICAgICAgICAgICAgICAgIFRhc2tzLmluaXREYXNoYm9hcmRXaWRnZXQoKTsgLy8gaW5pdCB0YXNoIGRhc2hib2FyZCB3aWRnZXRcclxuICAgICAgICAgICAgICAgIHZhciB4ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjc1RhZ2dpbmc6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNhZmVBcHBseTogZnVuY3Rpb24gKGZuLCAuLi5wYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiguLi5wYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAkd2F0Y2g6IGZ1bmN0aW9uICgpIHsgfSxcclxuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHsgdGhlbjogZnVuY3Rpb24gKCkgeyB9IH0gfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNUb3VjaERldmljZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgd2luZG93Lm1hcERhdGEgPSB4Lm1hcERhdGEgPSB7IFwibWFwXCI6IHsgXCJtZXRhZGF0YVwiOiB7IFwic2FuZGJveFwiOiBmYWxzZSwgXCJpZFwiOiA1NTQ3LCBcIm5hbWVcIjogXCJVbnRpdGxlZCBNYXBcIiwgXCJ1cmxcIjogXCIvbWFwcy81NTQ3XCIsIFwiY2FuRWRpdFwiOiB0cnVlLCBcInVwZGF0ZWRBdFwiOiBcIjIwMTUtMDUtMTVUMTI6Mjk6NDAuNzIxLTA0OjAwXCIsIFwidXBkYXRlZEJ5XCI6IG51bGwsIFwidXBkYXRlZEJ5TmFtZVwiOiBudWxsLCBcInVzZXJUYWdzXCI6IFtdIH0sIFwiZGF0YVwiOiB7IFwiY2xhc3NcIjogXCJnby5HcmFwaExpbmtzTW9kZWxcIiwgXCJub2RlSXNMaW5rTGFiZWxQcm9wZXJ0eVwiOiBcImlzTGlua0xhYmVsXCIsIFwibGlua0xhYmVsS2V5c1Byb3BlcnR5XCI6IFwibGFiZWxLZXlzXCIsIFwibGlua0Zyb21Qb3J0SWRQcm9wZXJ0eVwiOiBcImZyb21Qb3J0XCIsIFwibGlua1RvUG9ydElkUHJvcGVydHlcIjogXCJ0b1BvcnRcIiwgXCJub2RlRGF0YUFycmF5XCI6IFt7IFwia2V5XCI6IDEsIFwidGV4dFwiOiBcIk5ldyBJZGVhXCIsIFwiaXNHcm91cFwiOiB0cnVlLCBcImxvY1wiOiBcIjAgMFwiLCBcImxheW91dFwiOiBcImxlZnRcIiwgXCJzRXhwYW5kZWRcIjogdHJ1ZSwgXCJwRXhwYW5kZWRcIjogdHJ1ZSB9XSwgXCJsaW5rRGF0YUFycmF5XCI6IFtdIH0sIFwic3RhdGVEYXRhXCI6IG51bGwsIFwiZWRpdG9yT3B0aW9uc1wiOiBudWxsLCBcImFuYWx5dGljc1wiOiB7fSwgXCJ2ZXJzaW9uc1wiOiBbXSB9fTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5fbWFwRWRpdG9yQ3RybCA9IE1hcEVkaXRvckN0cmwoeCwgeCwgeCwgeCwgeCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSwgMjUwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsb2dvdXQoKSB7XHJcbiAgICAgICAgdGhpcy5NZXRhRmlyZS5sb2dvdXQoKTtcclxuICAgICAgICB0aGlzLkF1dGgwLmxvZ291dCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1ldGFNYXA7IiwicmVxdWlyZSgnYmFiZWwvcG9seWZpbGwnKTtcclxud2luZG93LnJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcbndpbmRvdy5fID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbndpbmRvdy5Qcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcclxucmVxdWlyZSgnY29yZS1qcycpO1xyXG53aW5kb3cuJCA9IHdpbmRvdy5qUXVlcnkgPSByZXF1aXJlKCdqcXVlcnknKTtcclxucmVxdWlyZSgnanF1ZXJ5LXVpJyk7XHJcbnJlcXVpcmUoJ2Jvb3RzdHJhcCcpO1xyXG53aW5kb3cuRmlyZWJhc2UgPSByZXF1aXJlKCdmaXJlYmFzZScpO1xyXG53aW5kb3cuSHVtYW5pemUgPSByZXF1aXJlKCdodW1hbml6ZS1wbHVzJyk7XHJcbndpbmRvdy5tb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcclxud2luZG93LlVSSSA9IHJlcXVpcmUoJ1VSSWpzJyk7XHJcbndpbmRvdy5sb2NhbGZvcmFnZSA9IHJlcXVpcmUoJ2xvY2FsZm9yYWdlJyk7XHJcblxyXG5yZXF1aXJlKCcuL2pzL2ludGVncmF0aW9ucy9hdXRoMCcpO1xyXG5yZXF1aXJlKCcuL2pzL2ludGVncmF0aW9ucy9nb29nbGVhbmFseXRpY3MnKTtcclxucmVxdWlyZSgnLi9qcy9pbnRlZ3JhdGlvbnMvbmV3cmVsaWMnKTtcclxucmVxdWlyZSgnLi9qcy9pbnRlZ3JhdGlvbnMvcmF5Z3VuJyk7XHJcbnJlcXVpcmUoJy4vanMvaW50ZWdyYXRpb25zL3VzZXJzbmFwJyk7XHJcblxyXG5yZXF1aXJlKCcuL3RhZ3MvY29tcG9uZW50cy9tZXRhLWRpYWxvZy50YWcnKTtcclxucmVxdWlyZSgnLi90YWdzL2NvbXBvbmVudHMvbWV0YS10YWJsZS50YWcnKTtcclxucmVxdWlyZSgnLi90YWdzL3BhZ2UtYWN0aW9ucy50YWcnKTtcclxucmVxdWlyZSgnLi90YWdzL3BhZ2UtY29udGFpbmVyLnRhZycpO1xyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS1jb250ZW50LnRhZycpO1xyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS1mb290ZXIudGFnJyk7XHJcbnJlcXVpcmUoJy4vdGFncy9wYWdlLWhlYWRlci50YWcnKTtcclxucmVxdWlyZSgnLi90YWdzL3BhZ2UtbG9nby50YWcnKTtcclxucmVxdWlyZSgnLi90YWdzL3BhZ2Utc2VhcmNoLnRhZycpO1xyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS1zaWRlYmFyLnRhZycpO1xyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS10b3BtZW51LnRhZycpO1xyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS1ib2R5LnRhZycpO1xyXG5cclxucmVxdWlyZSgnLi9qcy9jYW52YXMvZWRpdG9yLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL3VzZXIuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvZWRpdG9yX29wdGlvbnMuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvYW5hbHl0aWNzLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL2F0dGFjaG1lbnRzLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL2F1dG9zYXZlLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL2dlbmVyYXRvci5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9sYXlvdXRzLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL21hcC5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9wZXJzcGVjdGl2ZXMuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvcHJlc2VudGVyLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL3NoYXJpbmcuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvc3RhbmRhcmRzLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL3RhZ2dpbmcuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvdGVtcGxhdGVzLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL3Rlc3RzLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL3VpLmpzJyk7XHJcblxyXG52YXIgbW0gPSByZXF1aXJlKCcuL01ldGFNYXAnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbmV3IG1tKCk7IiwiY2xhc3MgVXNlciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9maWxlKSB7XHJcbiAgICAgICAgdGhpcy5wcm9maWxlID0gcHJvZmlsZTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IFVSSSh3aW5kb3cubG9jYXRpb24pLnF1ZXJ5KHRydWUpO1xyXG4gICAgICAgIHRoaXMudGhpbmtxdWVyeSA9ICh0aGlzLnBhcmFtcy50aGlua3F1ZXJ5ID8gdHJ1ZSA6IGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdXNlcklkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb2ZpbGUudXNlcl9pZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNBZG1pbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9maWxlLnJvbGVzLmluZGV4T2YoJ2FkbWluJykgIT09IC0xO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBuYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb2ZpbGUubmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlVXNlckVkaXRvck9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3Jfb3B0aW9uczogSlNPTi5zdHJpbmdpZnkob3B0aW9ucylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgLy8kaHR0cC5wdXQoJy91c2Vycy8nICsgJHNjb3BlLnVzZXJJZCArICcuanNvbicsIGRhdGEpLnRoZW4oXHJcbiAgICAgICAgLy8gICAgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgLy8gICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgLy8gICAgfSxcclxuICAgICAgICAvLyAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgLy8gICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdDb3VsZCBub3Qgc2F2ZSBlZGl0b3Igb3B0aW9ucyc7XHJcbiAgICAgICAgLy8gICAgfVxyXG4gICAgICAgIC8vKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBVc2VyOyIsIi8vIGZ1bmN0aW9ucyBoYW5kbGluZyBhbmFseXRpY3NcclxuLy8gYW5hbHl0aWNzIGRpc3BsYXkgaXMgaW4gdmlld3MvbWFwcy9fYW5hbHl0aWNzX3RhYl9tYXAgYW5kIF9hbmFseXRpY3NfdGFiX3RoaW5nXHJcblNhbmRiYW5rRWRpdG9yLkFuYWx5dGljcyA9IGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xyXG4gICAgICAgICAgICBpZiAobWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9BTkFMWVRJQ1NfVEhJTkcpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfQU5BTFlUSUNTX1RISU5HKSB7IC8vIG9wZW5pbmcgdGhpbmcgYW5hbHl0aWNzIHRhYlxyXG4gICAgICAgICAgICBzZWxmLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoaXMgZ2V0cyBwb3B1bGF0ZWQgYnkgbWFwLmxvYWRNYXBFeHRyYURhdGEsIG9uIGxvYWQgYW5kIGFmdGVyIGV2ZXJ5IGF1dG9zYXZlXHJcbiAgICB0aGlzLm1hcEFuYWx5dGljcyA9IG51bGw7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIGNvbnRleHR1YWwgYW5hbHl0aWNzIC0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyAtIHRoZXNlIGFyZSBhbGwgY2FsY3VsYXRlZCBoZXJlLCB1bmxpa2UgbWFwIGFuYWx5dGljcyB3aGljaCBhcmUgY2FsY3VsYXRlZCBvbiB0aGUgc2VydmVyIGFuZCBjb25uZWN0ZWQgd2l0aCBiYWRnZXMgYW5kIHBvaW50c1xyXG5cclxuICAgIC8vIHRoaXMgZ2V0cyBjYWxjdWxhdGVkIGJ5IHVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3NcclxuICAgIHRoaXMuY29udGV4dHVhbEFuYWx5dGljcyA9IHtcclxuICAgICAgICB0aGluZ05hbWU6ICcnLFxyXG5cclxuICAgICAgICAvLyB0aGluZyBzdHVmZlxyXG4gICAgICAgIGRpc3RpbmN0RnJvbTogMCxcclxuICAgICAgICBpbnRlbnRpb25hbGx5RGlzdGluY3RGcm9tOiAwLFxyXG4gICAgICAgIHBhcnRPZjogMCxcclxuICAgICAgICBpbmNsdWRlc1BhcnRzOiAwLFxyXG4gICAgICAgIHJlbGF0ZWRUbzogMCxcclxuICAgICAgICBpc1JlbGF0aW9uc2hpcDogMCxcclxuICAgICAgICBsb29raW5nQXQ6IDAsXHJcbiAgICAgICAgbG9va2VkQXRGcm9tOiAwLFxyXG5cclxuICAgICAgICAvLyBSIHN0dWZmXHJcbiAgICAgICAgckZyb21UaGluZ05hbWU6ICcnLFxyXG4gICAgICAgIHJUb1RoaW5nTmFtZTogJycsXHJcbiAgICAgICAgaXNSVGhpbmc6IGZhbHNlLFxyXG4gICAgICAgIGlzUlN5c3RlbTogZmFsc2UsXHJcbiAgICAgICAgaXNSUG9pbnQ6IGZhbHNlLFxyXG4gICAgICAgIGlzUlZpZXc6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudXBkYXRlQ29udGV4dHVhbEFuYWx5dGljcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd1cGRhdGVDb250ZXh0dWFsQW5hbHl0aWNzJyk7XHJcbiAgICAgICAgaWYgKCFtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX0FOQUxZVElDU19USElORykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgcGFydCA9IGRpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCk7XHJcbiAgICAgICAgdmFyIGEgPSBzZWxmLmNvbnRleHR1YWxBbmFseXRpY3M7XHJcblxyXG4gICAgICAgIGlmIChwYXJ0ICYmIHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcgPSBwYXJ0O1xyXG5cclxuICAgICAgICAgICAgLy8gdGhpbmcgbmFtZVxyXG4gICAgICAgICAgICBhLnRoaW5nTmFtZSA9IHRoaW5nLmRhdGEudGV4dDtcclxuXHJcbiAgICAgICAgICAgIC8vIGRpc3RpbmN0IGZyb21cclxuICAgICAgICAgICAgYS5kaXN0aW5jdEZyb20gPSBfLndoZXJlKGRpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheSwge2lzR3JvdXA6IHRydWV9KS5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICAgICAgLy8gcGFydCBvZlxyXG4gICAgICAgICAgICB2YXIgbGV2ZWwgPSAwO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gdGhpbmc7XHJcbiAgICAgICAgICAgIHdoaWxlICh0aGluZzIgPSBnZXRDb250YWluaW5nR3JvdXAodGhpbmcyKSkge1xyXG4gICAgICAgICAgICAgICAgbGV2ZWwrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhLnBhcnRPZiA9IGxldmVsO1xyXG5cclxuICAgICAgICAgICAgLy8gaW5jbHVkZXMgcGFydHNcclxuICAgICAgICAgICAgYS5pbmNsdWRlc1BhcnRzID0gY291bnRHcm91cHModGhpbmcpO1xyXG5cclxuICAgICAgICAgICAgLy8gcmVsYXRlZCB0byAvIGxvb2tpbmcgYXQgLyBsb29rZWQgYXQgZnJvbSAvIGludGVudGlvbmFsbHkgZGlzdGluY3QgZnJvbVxyXG4gICAgICAgICAgICBhLnJlbGF0ZWRUbyA9IDA7XHJcbiAgICAgICAgICAgIGEubG9va2luZ0F0ID0gMDtcclxuICAgICAgICAgICAgYS5sb29rZWRBdEZyb20gPSAwO1xyXG4gICAgICAgICAgICBhLmludGVudGlvbmFsbHlEaXN0aW5jdEZyb20gPSAwO1xyXG4gICAgICAgICAgICB2YXIgbGlua3MgPSB0aGluZy5saW5rc0Nvbm5lY3RlZDtcclxuICAgICAgICAgICAgdmFyIHJDb25uZWN0ZWRUaGluZ0tleXMgPSBbXTtcclxuICAgICAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIC8vIFAgbGlua1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGluay5mcm9tTm9kZSA9PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhLmxvb2tpbmdBdCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsaW5rLnRvTm9kZSA9PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhLmxvb2tlZEF0RnJvbSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEQgbGlua1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdEJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGEuaW50ZW50aW9uYWxseURpc3RpbmN0RnJvbSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gUiBsaW5rXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghbGluay5kYXRhLmNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJhY2sga2V5cyBvZiByZWxhdGVkIHRoaW5ncyBzbyB3ZSBkb24ndCBjb3VudCB0aGVtIG11bHRpcGxlIHRpbWVzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmsuZnJvbU5vZGUgPT0gdGhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgckNvbm5lY3RlZFRoaW5nS2V5cy5wdXNoKGxpbmsudG9Ob2RlLmRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobGluay50b05vZGUgPT0gdGhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgckNvbm5lY3RlZFRoaW5nS2V5cy5wdXNoKGxpbmsuZnJvbU5vZGUuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhLnJlbGF0ZWRUbyA9IF8udW5pcShyQ29ubmVjdGVkVGhpbmdLZXlzKS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAvLyBpc1JlbGF0aW9uc2hpcFxyXG4gICAgICAgICAgICBhLmlzUmVsYXRpb25zaGlwID0gdGhpbmcuaXNMaW5rTGFiZWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBhcnQgJiYgcGFydCBpbnN0YW5jZW9mIGdvLkxpbmspIHtcclxuICAgICAgICAgICAgdmFyIHJlbCA9IHBhcnQ7XHJcblxyXG4gICAgICAgICAgICAvLyB0aGluZyBuYW1lc1xyXG4gICAgICAgICAgICBhLnJGcm9tVGhpbmdOYW1lID0gcmVsLmZyb21Ob2RlLmRhdGEudGV4dDtcclxuICAgICAgICAgICAgYS5yVG9UaGluZ05hbWUgPSByZWwudG9Ob2RlLmRhdGEudGV4dDtcclxuXHJcbiAgICAgICAgICAgIC8vIGlzIFIgdGhpbmdcclxuICAgICAgICAgICAgYS5pc1JUaGluZyA9IHJlbC5pc0xhYmVsZWRMaW5rO1xyXG5cclxuICAgICAgICAgICAgLy8gaXMgUiBzeXN0ZW1cclxuICAgICAgICAgICAgYS5pc1JTeXN0ZW0gPSByZWwuaXNMYWJlbGVkTGluayAmJiBjb3VudEdyb3VwcyhyZWwubGFiZWxOb2Rlcy5maXJzdCgpKSA+IDA7XHJcblxyXG4gICAgICAgICAgICAvLyBpcyBSIHBvaW50XHJcbiAgICAgICAgICAgIGEuaXNSUG9pbnQgPSByZWwuaXNMYWJlbGVkTGluayAmJiBpc1BvaW50KHJlbC5sYWJlbE5vZGVzLmZpcnN0KCkpO1xyXG5cclxuICAgICAgICAgICAgLy8gaXMgUiB2aWV3XHJcbiAgICAgICAgICAgIGEuaXNSVmlldyA9IHJlbC5pc0xhYmVsZWRMaW5rICYmIGlzVmlldyhyZWwubGFiZWxOb2Rlcy5maXJzdCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgZWl0aGVyIHRoZSBjb250YWluaW5nR3JvdXAgb3IgdGhlIHJUaGluZ0NvbnRhaW5pbmdHcm91cCwgd2hpY2hldmVyIGlzIG5vbi1udWxsXHJcbiAgICBmdW5jdGlvbiBnZXRDb250YWluaW5nR3JvdXAoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gZ3JvdXAuY29udGFpbmluZ0dyb3VwIHx8IGdldFJUaGluZ0NvbnRhaW5pbmdHcm91cChncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgZ3JvdXAgaXMgYW4gUi10aGluZyBiZXR3ZWVuIHR3byBzaWJsaW5nIHBhcnRzIG9mIGEgd2hvbGUsIHJldHVybnMgdGhlIHdob2xlOyBlbHNlIHJldHVybnMgbnVsbFxyXG4gICAgZnVuY3Rpb24gZ2V0UlRoaW5nQ29udGFpbmluZ0dyb3VwKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKGdyb3VwLmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgIHZhciBmcm9tUGFyZW50ID0gZ3JvdXAubGFiZWxlZExpbmsuZnJvbU5vZGUuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB2YXIgdG9QYXJlbnQgPSBncm91cC5sYWJlbGVkTGluay50b05vZGUuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICBpZiAoZnJvbVBhcmVudCAhPT0gbnVsbCAmJiB0b1BhcmVudCAhPT0gbnVsbCAmJiBmcm9tUGFyZW50ID09IHRvUGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbVBhcmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjb3VudHMgdGhlIG1lbWJlciBwYXJ0cyBvZiB0aGUgZ3JvdXAgdGhhdCBhcmUgZ3JvdXBzLCByZWN1cnNpdmVseSAobm90IGluY2x1ZGluZyB0aGUgZ3JvdXAgaXRzZWxmKVxyXG4gICAgZnVuY3Rpb24gY291bnRHcm91cHMoZ3JvdXApIHtcclxuICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgIHZhciBpdCA9IGdldE1lbWJlckdyb3Vwcyhncm91cCkuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBjb3VudCArPSAxICsgY291bnRHcm91cHMocGFydCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgY29sbGVjdGlvbiBvZiBncm91cHMgdGhhdCBhcmUgZWl0aGVyIGEgbWVtYmVyUGFydCBvZiB0aGlzIGdyb3VwLCBvciBhbiBSLXRoaW5nIGJldHdlZW4gc2libGluZyBtZW1iZXJQYXJ0c1xyXG4gICAgZnVuY3Rpb24gZ2V0TWVtYmVyR3JvdXBzKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLm1lbWJlclBhcnRzO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocGFydCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnRoaW5nID0gZ2V0UlRoaW5nVG9TaWJsaW5nKHBhcnQpOyAvLyBOQjogc2hvdWxkIG5vdCBnZXQgZHVwbGljYXRpb24gaGVyZSwgYXMgdGhpcyBjaGVja3MgZm9yIHItdGhpbmdzIGluIG9ubHkgb25lIGRpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKHJ0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcnMuYWRkKHJ0aGluZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lbWJlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgdGhlIGdyb3VwIGlzIGxpbmtlZCBieSBhbiBSLXRoaW5nIHRvIGEgc2libGluZyAod2l0aCB0aGUgZ3JvdXAgYXMgdGhlIGZyb21Ob2RlKSwgcmV0dXJucyB0aGUgUi10aGluZzsgZWxzZSByZXR1cm5zIG51bGxcclxuICAgIGZ1bmN0aW9uIGdldFJUaGluZ1RvU2libGluZyhncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5sYWJlbE5vZGVzLmNvdW50ID4gMCAmJiBsaW5rLnRvTm9kZS5jb250YWluaW5nR3JvdXAgPT0gZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGluay5sYWJlbE5vZGVzLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNQb2ludChncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzVmlldyhncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc0ludG8oKTtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn07IiwiLy8gZnVuY3Rpb25zIGhhbmRsaW5nIGF0dGFjaG1lbnRzXHJcblxyXG5TYW5kYmFua0VkaXRvci5BdHRhY2htZW50cyA9IGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkcmVzb3VyY2UsIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICB0aGlzLnNlbGVjdGVkVGhpbmcgPSBudWxsO1xyXG4gICAgdGhpcy5hdHRhY2htZW50cyA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5hdHRhY2htZW50VHlwZXMgPSBbXHJcbiAgICAgICAge25hbWU6ICdub3RlJywgbGFiZWxTaW5ndWxhcjogJ05vdGUnLCBsYWJlbFBsdXJhbDogJ05vdGVzJ30sIFxyXG4gICAgICAgIHtuYW1lOiAnbGluaycsIGxhYmVsU2luZ3VsYXI6ICdXZWIgTGluaycsIGxhYmVsUGx1cmFsOiAnV2ViIExpbmtzJ30sIFxyXG4gICAgICAgIHtuYW1lOiAndGFzaycsIGxhYmVsU2luZ3VsYXI6ICdUYXNrJywgbGFiZWxQbHVyYWw6ICdUYXNrcyd9LCBcclxuICAgICAgICB7bmFtZTogJ21hcCcsIGxhYmVsU2luZ3VsYXI6ICdMaW5rZWQgTWV0YU1hcCcsIGxhYmVsUGx1cmFsOiAnTGlua2VkIE1ldGFNYXBzJ31cclxuLy8gICAgICAgIHtuYW1lOiAnZG9jJywgbGFiZWxTaW5ndWxhcjogJ0RvY3VtZW50JywgbGFiZWxQbHVyYWw6ICdEb2N1bWVudHMnfSAgLy8gbGltaXQgb3ZlcmFsbCBzdG9yYWdlIHNwYWNlIE9SIHNpbXBsZXIgcnVsZXM/XHJcbiAgICAgICAgLy8gbGltaXQgZmlsZSB0eXBlcyAtIHBkZiwganBnLCBnaWYsIHBuZywgb2ZmaWNlPy4uLiAgd2hpdGVsaXN0IHZzLiBibGFja2xpc3RcclxuICAgIF07XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xyXG4gICAgICAgICAgICBpZiAobWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9BVFRBQ0hNRU5UUykpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuc3RvcEVkaXRpbmdBbGwoKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2F2ZUF0dGFjaG1lbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmxvYWRTZWxlY3RlZFRoaW5nQXR0YWNobWVudHMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfQVRUQUNITUVOVFMpIHsgLy8gb3BlbmluZyB0YWJcclxuICAgICAgICAgICAgc2VsZi5sb2FkU2VsZWN0ZWRUaGluZ0F0dGFjaG1lbnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvbGRWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfQVRUQUNITUVOVFMpIHsgLy8gY2xvc2luZyB0YWJcclxuICAgICAgICAgICAgc2VsZi5zYXZlQXR0YWNobWVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubG9hZFNlbGVjdGVkVGhpbmdBdHRhY2htZW50cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXAudGhpbmdTZWxlY3RlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGhpbmcgPSBtYXAuZ2V0VW5pcXVlVGhpbmdTZWxlY3RlZCgpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cyA9IHNlbGYuc2VsZWN0ZWRUaGluZy5kYXRhLmF0dGFjaG1lbnRzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuYXR0YWNobWVudHMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzZXQgYWxsIGF0dGFjaG1lbnRzIHRvIGVkaXRpbmcgPSBmYWxzZVxyXG4gICAgdGhpcy5zdG9wRWRpdGluZ0FsbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmF0dGFjaG1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBfLmVhY2goc2VsZi5hdHRhY2htZW50cywgZnVuY3Rpb24gKGF0dCkgeyBhdHQuZWRpdGluZyA9IGZhbHNlOyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmVkaXRpbmdBbkl0ZW0gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5hdHRhY2htZW50cyAmJiBfLmZpbmRXaGVyZShzZWxmLmF0dGFjaG1lbnRzLCB7ZWRpdGluZzogdHJ1ZX0pICE9PSB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNldCBhbGwgb3RoZXIgYXR0YWNobWVudHMgdG8gZWRpdGluZyA9IGZhbHNlXHJcbiAgICB0aGlzLnN0YXJ0RWRpdGluZyA9IGZ1bmN0aW9uKGF0dGFjaG1lbnQpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzZWxmLnN0b3BFZGl0aW5nQWxsKCk7XHJcbiAgICAgICAgICAgIGF0dGFjaG1lbnQuZWRpdGluZyA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2F2ZUl0ZW0gPSBmdW5jdGlvbihhdHRhY2htZW50KSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgYXR0YWNobWVudC5lZGl0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNlbGYuc2F2ZUF0dGFjaG1lbnRzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2F2ZUF0dGFjaG1lbnRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NhdmVBdHRhY2htZW50cywgc2VsZWN0ZWQ6ICcgKyBzZWxmLnNlbGVjdGVkVGhpbmcpO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZFRoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzZWxmLnNlbGVjdGVkVGhpbmcuZGF0YSwgJ2F0dGFjaG1lbnRzJywgc2VsZi5hdHRhY2htZW50cyk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtYXAuZ2V0QXV0b3NhdmUoKS5zYXZlTm93KCdlZGl0X2F0dGFjaG1lbnRzJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubGlzdEF0dGFjaG1lbnRzID0gZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICB2YXIgYXR0cyA9IF8ud2hlcmUoc2VsZi5hdHRhY2htZW50cywge3R5cGU6IHR5cGV9KTtcclxuICAgICAgICByZXR1cm4gYXR0cztcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hZGRBdHRhY2htZW50ID0gZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICB2YXIgaXRlbSA9IHsgdHlwZTogdHlwZSwgZWRpdGluZzogdHJ1ZSB9O1xyXG4gICAgICAgIGlmICh0eXBlID09ICdub3RlJykge1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyB0ZXh0OiAnJywgdXJsOiAnJyB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gJ2xpbmsnKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMucHVzaChfLmV4dGVuZChpdGVtLCB7IGxhYmVsOiAnJywgdXJsOiAnJyB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gJ3Rhc2snKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMucHVzaChfLmV4dGVuZChpdGVtLCB7IHRleHQ6ICcnIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAnZG9jJykge1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyBuYW1lOiAnJyB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gJ21hcCcpIHtcclxuICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgbWFwUmVmOiB7IGlkOiAwLCBuYW1lOiAnJyAgfSB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzVmFsaWQgPSBmdW5jdGlvbihhdHRhY2htZW50KSB7XHJcbiAgICAgICAgaWYgKGF0dGFjaG1lbnQudHlwZSA9PSAnbGluaycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0dGFjaG1lbnQubGFiZWwgJiYgYXR0YWNobWVudC51cmwgJiYgYXR0YWNobWVudC5sYWJlbC50cmltKCkgIT09ICcnICYmIGF0dGFjaG1lbnQudXJsLnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PSAnbm90ZScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0dGFjaG1lbnQudGV4dCAmJiBhdHRhY2htZW50LnRleHQudHJpbSgpICE9PSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYXR0YWNobWVudC50eXBlID09ICd0YXNrJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYXR0YWNobWVudC50ZXh0ICYmIGF0dGFjaG1lbnQudGV4dC50cmltKCkgIT09ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhdHRhY2htZW50LnR5cGUgPT0gJ2RvYycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0dGFjaG1lbnQubmFtZSAmJiBhdHRhY2htZW50Lm5hbWUudHJpbSgpICE9PSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYXR0YWNobWVudC50eXBlID09ICdtYXAnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50Lm1hcFJlZiAmJiBhdHRhY2htZW50Lm1hcFJlZi5pZCAhPT0gbnVsbCAmJiBhdHRhY2htZW50Lm1hcFJlZi5pZCAhPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kZWxldGVBdHRhY2htZW50ID0gZnVuY3Rpb24gKGF0dCkge1xyXG4gICAgICAgIHZhciB0eXBlTGFiZWwgPSBfLmZpbmRXaGVyZShzZWxmLmF0dGFjaG1lbnRUeXBlcywgeyBuYW1lOiBhdHQudHlwZSB9KS5sYWJlbFNpbmd1bGFyO1xyXG4gICAgICAgIGlmIChjb25maXJtICgnRGVsZXRlICcgKyB0eXBlTGFiZWwgKyAnPycpKSB7XHJcbiAgICAgICAgICAgIHZhciBpID0gXy5pbmRleE9mKHNlbGYuYXR0YWNobWVudHMsIGF0dCk7XHJcbiAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gcXVlcnkgc2VydmVyIGZvciBtYXBzIGNvbnRhaW5pbmcgdGhlIGdpdmVuIHRleHQgaW4gdGhlIG1hcCBuYW1lXHJcbiAgICB0aGlzLmdldE90aGVyTWFwcyA9IGZ1bmN0aW9uKHZpZXdWYWx1ZSkge1xyXG4gICAgICAgIC8vIE5COiB0aGlzIFVSTCBpcyBjb25zdHJ1Y3RlZCB0byBtYXRjaCB0aGUgb25lIGdlbmVyYXRlZCBieSB0aGUgc2VhcmNoIGZvcm0gb24gdGhlIG1hcHMgcGFnZS4uLlxyXG4gICAgICAgIHZhciB1cmwgPSAnL21hcHMvdmlzaWJsZV9tYXBzLmpzb24/dXRmOD0lRTIlOUMlOTMmcSU1Qm5hbWVfY29udCU1RD0nICsgdmlld1ZhbHVlO1xyXG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLm1hcHM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMub3RoZXJNYXBTZWxlY3RlZCA9IGZ1bmN0aW9uKHZpZXdWYWx1ZSwgbW9kZWxWYWx1ZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdvdGhlck1hcFNlbGVjdGVkLCB2aWV3VmFsdWU6ICcgKyB2aWV3VmFsdWUuaWQgKyAnLCBtb2RlbFZhbHVlOiAnICsgbW9kZWxWYWx1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZm9ybWF0T3RoZXJNYXAgPSBmdW5jdGlvbiAobW9kZWwpIHtcclxuICAgICAgICByZXR1cm4gKG1vZGVsID8gbW9kZWwubmFtZSA6ICcnKTtcclxuICAgIH07XHJcblxyXG59OyIsIi8vIGZ1bmN0aW9ucyBoYW5kbGluZyBlZGl0b3IgYXV0b3NhdmUgZnVuY3Rpb25cclxuXHJcblNhbmRiYW5rRWRpdG9yLkF1dG9zYXZlID0gZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHZhciBjaGFuZ2VUeXBlcyA9IFtdO1xyXG5cclxuICAgIHRoaXMuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBkbyBhIHNhdmUgbmV4dCB0aW1lIHRoZSBzZXQgaW50ZXJ2YWwgcGFzc2VzIHdpdGggbm8gc2F2ZSByZXF1ZXN0c1xyXG4gICAgdGhpcy5zYXZlID0gZnVuY3Rpb24oY2hhbmdlVHlwZSkge1xyXG4gICAgICAgIGNoYW5nZVR5cGVzLnB1c2goY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgZGVsYXllZEF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRvIGEgc2F2ZSByaWdodCBub3dcclxuICAgIHRoaXMuc2F2ZU5vdyA9IGZ1bmN0aW9uKGNoYW5nZVR5cGUpIHtcclxuICAgICAgICBjaGFuZ2VUeXBlcy5wdXNoKGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIGF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRvbid0IGxldCBhdXRvc2F2ZSBiZSB0cmlnZ2VyZWQgbW9yZSB0aGFuIGV2ZXJ5IE4gbWlsbGlzZWNvbmRzLi4uXHJcbiAgICB2YXIgZGVsYXllZEF1dG9zYXZlID0gXy5kZWJvdW5jZShhdXRvc2F2ZSwgMjAwMCk7XHJcblxyXG4gICAgLy8gY29tcGlsZSB0aGUgY3VycmVudCBsaXN0IG9mIGNoYW5nZSB0eXBlIGRlc2NyaXB0aW9ucywgcHJvY2VzcyB0aGVtIFxyXG4gICAgLy8gdG8gcmVtb3ZlIGR1cGxpY2F0ZXMsIGFuZCBzYXZlIHRoZSBjdXJyZW50IGRhdGFcclxuICAgIGZ1bmN0aW9uIGF1dG9zYXZlKCkge1xyXG4gICAgICAgIC8vIHN0b3AgcmlnaHQgaGVyZSBpZiB3ZSdyZSBpbiB0aGUgc2FuZGJveCBhbmQvb3Igd2UgZG9uJ3QgaGF2ZSBlZGl0IHBlcm1pc3Npb25zXHJcbiAgICAgICAgaWYgKCRzY29wZS5zYW5kYm94IHx8ICEkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWNoYW5nZVR5cGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYXV0b3NhdmU6IG5vdGhpbmcgdG8gc2F2ZSEnKTsgLy8gc2hvdWxkbid0IGhhcHBlblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkZS1kdXBlIHRoZSBsaXN0IG9mIGNoYW5nZSB0eXBlc1xyXG4gICAgICAgIHZhciBjaGFuZ2VMaXN0ID0gXy51bmlxKGNoYW5nZVR5cGVzKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjaGFuZ2VMaXN0OiAnICsgY2hhbmdlTGlzdCk7XHJcbiAgICAgICAgLy8gZG9uJ3Qgc2hvdyBtb3ZlIGV2ZW50cyB1bmxlc3MgdGhhdCdzIGFsbCB3ZSBoYXZlXHJcbiAgICAgICAgdmFyIGNoYW5nZUxpc3RXaXRob3V0TW92ZXMgPSBfLndpdGhvdXQoY2hhbmdlTGlzdCwgJ21vdmUnKTtcclxuICAgICAgICBpZiAoY2hhbmdlTGlzdFdpdGhvdXRNb3Zlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZUxpc3QgPSBjaGFuZ2VMaXN0V2l0aG91dE1vdmVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjaGFuZ2VMaXN0IHdpdGhvdXQgbW92ZXM6ICcgKyBjaGFuZ2VMaXN0KTtcclxuICAgICAgICAvLyBnZXQgZGVzY3JpcHRpb25zXHJcbiAgICAgICAgdmFyIGRlc2NyaXB0aW9uTGlzdCA9IF8ubWFwKGNoYW5nZUxpc3QsIGZ1bmN0aW9uKGN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfLnJlc3VsdChjaGFuZ2VEZXNjcmlwdGlvbnMsIGN0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnYXV0b3NhdmUsIGNoYW5nZUxpc3Q6ICcgKyBjaGFuZ2VMaXN0ICsgJywgZGVzY3JpcHRpb25MaXN0OiAnICsgZGVzY3JpcHRpb25MaXN0KTtcclxuICAgICAgICB2YXIgcG9zdERhdGEgPSB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiAkc2NvcGUubWFwVGl0bGUsXHJcbiAgICAgICAgICAgIFwiZGF0YVwiOiBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnRvSnNvbigpLFxyXG4gICAgICAgICAgICBcInN0YXRlX2RhdGFcIjogSlNPTi5zdHJpbmdpZnkobWFwLmdldFVpKCkuZ2V0U3RhdGVEYXRhKCkpLFxyXG4gICAgICAgICAgICBcImVkaXRvcl9vcHRpb25zXCI6IEpTT04uc3RyaW5naWZ5KG1hcC5nZXRVaSgpLmdldE1hcEVkaXRvck9wdGlvbnMoKSksXHJcbiAgICAgICAgICAgIFwicHJlc2VudGVyX3NsaWRlc1wiOiBtYXAuZ2V0UHJlc2VudGVyKCkuZ2V0U2xpZGVDb3VudCgpLFxyXG4gICAgICAgICAgICBcImFjdGl2aXR5X3NsaWRlc1wiOiBtYXAuZ2V0UHJlc2VudGVyKCkuZ2V0QWN0aXZpdHlTbGlkZUNvdW50KCksXHJcbiAgICAgICAgICAgIFwiY2hhbmdlX3R5cGVcIjogY2hhbmdlTGlzdC5qb2luKCc7JyksXHJcbiAgICAgICAgICAgIFwiY2hhbmdlX2Rlc2NyaXB0aW9uXCI6IGRlc2NyaXB0aW9uTGlzdC5qb2luKCc7ICcpLFxyXG4gICAgICAgICAgICBcInRodW1ibmFpbF9wbmdcIjogbWFwLmdldFByZXNlbnRlcigpLmdldE1hcFRodW1ibmFpbCgpXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdXJsID0gJHNjb3BlLm1hcFVybCArICcuanNvbic7XHJcblxyXG4gICAgICAgICRzY29wZS51cGRhdGVFZGl0U3RhdHVzKCRzY29wZS5TQVZJTkcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVFZGl0U3RhdHVzKCRzY29wZS5TQVZFX09LKTtcclxuICAgICAgICAgICAgICAgIC8vIGxvYWQgcmV0dXJuZWQgZGF0YSBmb3IgYW5hbHl0aWNzLCBwb2ludHMsIGJhZGdlcywgdmVyc2lvbnNcclxuICAgICAgICAgICAgICAgLy8gJHNjb3BlLm1hcC5sb2FkTWFwRXh0cmFEYXRhKHJlc3BvbnNlLmRhdGEubWFwKTtcclxuICAgICAgICAgICAgXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBoYW5kbGUgbW9kZWwgY2hhbmdlcyAtIHRyaWdnZXIgYXV0b3NhdmUgLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdmFyIGNoYW5nZURlc2NyaXB0aW9ucyA9IHtcclxuICAgICAgICBtb3ZlOiAnTW92ZWQgT2JqZWN0cycsXHJcbiAgICAgICAgdW5kb19yZWRvOiAnUGVyZm9ybWVkIFVuZG8vUmVkbycsXHJcbiAgICAgICAgZWRpdF90aXRsZTogJ0VkaXRlZCBNZXRhTWFwIFRpdGxlJyxcclxuICAgICAgICBlZGl0X2Rlc2NyaXB0aW9uOiAnRWRpdGVkIE1ldGFNYXAgRGVzY3JpcHRpb24nLFxyXG4gICAgICAgIGVkaXRfdXNlcnRhZ3M6ICdFZGl0IE1ldGFNYXAgVGFncycsXHJcbiAgICAgICAgZWRpdF9kOiAnRWRpdGVkIERpc3RpbmN0aW9ucycsXHJcbiAgICAgICAgZWRpdF9zOiAnRWRpdGVkIFN5c3RlbXMnLFxyXG4gICAgICAgIGVkaXRfcjogJ0VkaXRlZCBSZWxhdGlvbnNoaXBzJyxcclxuICAgICAgICBlZGl0X3A6ICdFZGl0ZWQgUGVyc3BlY3RpdmVzJyxcclxuICAgICAgICBhZGRfdGhpbmc6ICdBZGRlZCBJZGVhcycsXHJcbiAgICAgICAgcmVuYW1lX3RoaW5nOiAnUmVuYW1lZCBJZGVhcycsXHJcbiAgICAgICAgZGVsZXRlX3RoaW5nOiAnRGVsZXRlZCBJZGVhcycsXHJcbiAgICAgICAgZWRpdF9hdHRhY2htZW50czogJ0VkaXRlZCBBdHRhY2htZW50cycsXHJcbiAgICAgICAgZWRpdF9wcmVzZW50ZXI6ICdFZGl0ZWQgUHJlc2VudGVyIFNsaWRlcycsXHJcbiAgICAgICAgZWRpdF9nZW5lcmF0b3I6ICdJbnNlcnRlZCBJZGVhcyBmcm9tIFRoaW5rUXVlcnknLFxyXG4gICAgICAgIGVkaXRfc3RhbmRhcmRzOiAnRWRpdGVkIExpbmtzIHRvIENvbW1vbiBDb3JlIFN0YW5kYXJkcydcclxuICAgIH07XHJcblxyXG4gICAgLy8gZSBpcyBhIGdvLkNoYW5nZWRFdmVudFxyXG4gICAgdGhpcy5tb2RlbENoYW5nZWQgPSBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgIGlmICghc2VsZi5zYXZlT25Nb2RlbENoYW5nZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGNoYW5nZVR5cGUgPSBudWxsO1xyXG4gICAgICAgIHZhciBjaGFuZ2VEZXNjcmlwdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChlLnByb3BlcnR5TmFtZSA9PSAndHlwZScpIHtcclxuICAgICAgICAgICAgLy8gY2hhbmdlIFIgdHlwZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCxuLDEsbywyLEEsMyxyLDQsciw1LG8sNix3LDcsc10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLHQsMSxvXSAsIHByb3BlcnR5TmFtZTogdHlwZVxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcic7XHJcbiAgICAgICAgICAgIGNoYW5nZURlc2NyaXB0aW9uID0gJ0NoYW5nZWQgUmVsYXRpb25zaGlwIFR5cGVzJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdsYXlvdXQnKSB7XHJcbiAgICAgICAgICAgIC8vIGNoYW5nZSBzeXN0ZW0gbGF5b3V0XHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLGwsMSxlLDIsZiwzLHRdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCxyLDEsaSwyLGcsMyxoLDQsdF0gLCBwcm9wZXJ0eU5hbWU6IGxheW91dCBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3MnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5jaGFuZ2UgPT0gZ28uQ2hhbmdlZEV2ZW50Lkluc2VydCAmJiBwcm9wZXJ0eUVxdWFscyhlLm5ld1ZhbHVlLCAnZnJvbVBvcnQnLCAnUicpKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogMSwgbmV3VmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsNjAwNSxmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUix0b1BvcnQsUF0gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXlcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtUb1BvcnRJZCwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsUF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLFJdICwgcHJvcGVydHlOYW1lOiB0b1BvcnQgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9yJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5SZW1vdmUgJiYgcHJvcGVydHlFcXVhbHMoZS5vbGRWYWx1ZSwgJ2Zyb21Qb3J0JywgJ1InKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogMSwgb2xkVmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsNjAwNSxmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUix0b1BvcnQsUl0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnbGlua0RhdGFBcnJheScpIHtcclxuICAgICAgICAgICAgLy8gY2hhbmdlIFAvRCBsaW5rc1xyXG4gICAgICAgICAgICAvLyBhZGQgUCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogMiwgbmV3VmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsMTkxMjIsZnJvbSwtMix0bywtNCxsYWJlbEtleXMsLGZyb21Qb3J0LFAsdG9Qb3J0LFBdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0NhdGVnb3J5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsUF0gLCBwcm9wZXJ0eU5hbWU6IGNhdGVnb3J5IFxyXG4gICAgICAgICAgICAvLyBkZWxldGUgUCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiAyLCBvbGRWYWx1ZTogW3R5cGUsbm9BcnJvd3MsX19nb2hhc2hpZCwxOTEyMixmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUCx0b1BvcnQsUCxjYXRlZ29yeSxQXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIC8vIGFkZCBEIGxpbmtcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiAxLCBuZXdWYWx1ZTogW2Zyb20sLTcsdG8sLTUsZnJvbVBvcnQsRCx0b1BvcnQsRCxjYXRlZ29yeSxELF9fZ29oYXNoaWQsMTk1MjJdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyByZW1vdmUgRCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiAxLCBvbGRWYWx1ZTogW2Zyb20sLTcsdG8sLTUsZnJvbVBvcnQsRCx0b1BvcnQsRCxjYXRlZ29yeSxELF9fZ29oYXNoaWQsMTk1MjJdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheSBcclxuXHJcbiAgICAgICAgICAgIGlmICgoZS5uZXdWYWx1ZSAmJiBlLm5ld1ZhbHVlLmNhdGVnb3J5ID09ICdQJykgfHxcclxuICAgICAgICAgICAgICAgIChlLm9sZFZhbHVlICYmIGUub2xkVmFsdWUuY2F0ZWdvcnkgPT0gJ1AnKSkge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3AnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKChlLm5ld1ZhbHVlICYmIGUubmV3VmFsdWUuY2F0ZWdvcnkgPT0gJ0QnKSB8fFxyXG4gICAgICAgICAgICAgICAgKGUub2xkVmFsdWUgJiYgZS5vbGRWYWx1ZS5jYXRlZ29yeSA9PSAnRCcpKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfZCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdjYXRlZ29yeScpIHtcclxuICAgICAgICAgICAgLy8gYWRkIFAgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZWQsIG1vZGVsQ2hhbmdlOiBsaW5rQ2F0ZWdvcnksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCxQXSAsIHByb3BlcnR5TmFtZTogY2F0ZWdvcnkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9wJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdncm91cCcpIHtcclxuICAgICAgICAgICAgLy8gZHJhZyBpbnRvIFNcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG4gICAgICAgICAgICAvLyByZW9yZGVyIHBhcnRcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG4gICAgICAgICAgICAvLyBkcmFnIHRvIERcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG5cclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3MnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ25vZGVEYXRhQXJyYXknICYmIGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5JbnNlcnQgJiYgcHJvcGVydHlFcXVhbHMoZS5uZXdWYWx1ZSwgJ2lzR3JvdXAnLCB0cnVlKSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiA1LCBuZXdWYWx1ZTogW3RleHQsTmV3IElkZWEsaXNHcm91cCx0cnVlLGxldmVsLDAsbGF5b3V0LGxlZnQsc0V4cGFuZGVkLHRydWUscEV4cGFuZGVkLGZhbHNlLGRFeHBhbmRlZCxmYWxzZSxfX2dvaGFzaGlkLDU0Njg4LGdyb3VwLCxrZXksLTddICwgcHJvcGVydHlOYW1lOiBub2RlRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsMiwxLDIsMiw4LDMsLiw0LDUsNSw2LDYsMiw3LDUsOCwgLDksLSwxMCwxLDExLDQsMTIsOSwxMywuLDE0LDYsMTUsOCwxNiw3LDE3LDVdICwgcHJvcGVydHlOYW1lOiBsb2MgXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogY2hpbGRyZW4gXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnYWRkX3RoaW5nJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICd0ZXh0Jykge1xyXG4gICAgICAgICAgICAvLyBtb3ZlIHRoaW5nXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLGIsMSxiLDIsYiwzLGIsNCxiXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsYSwxLGEsMixhLDMsYSw0LGFdICwgcHJvcGVydHlOYW1lOiB0ZXh0IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ3JlbmFtZV90aGluZyc7XHJcbiAgICAgICAgICAgIGNoYW5nZURlc2NyaXB0aW9uID0gJ1JlbmFtZWQgSWRlYXMnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ25vZGVEYXRhQXJyYXknICYmIGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5SZW1vdmUgJiYgcHJvcGVydHlFcXVhbHMoZS5vbGRWYWx1ZSwgJ2lzR3JvdXAnLCB0cnVlKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlJlbW92ZSwgb2xkUGFyYW06IDUsIG9sZFZhbHVlOiBbdGV4dCxOZXcgSWRlYSxpc0dyb3VwLHRydWUsbGV2ZWwsMCxsYXlvdXQsbGVmdCxzRXhwYW5kZWQsdHJ1ZSxwRXhwYW5kZWQsZmFsc2UsZEV4cGFuZGVkLGZhbHNlLF9fZ29oYXNoaWQsNTQ2ODgsZ3JvdXAsLGtleSwtNyxsb2MsMjI4LjU2MjUgLTE0OS42ODc1LGNoaWxkcmVuLDAsYXR0YWNobWVudHMsXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IG5vZGVEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZGVsZXRlX3RoaW5nJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdub2RlRGF0YUFycmF5JyAmJiBlLmNoYW5nZSA9PSBnby5DaGFuZ2VkRXZlbnQuSW5zZXJ0ICYmIHByb3BlcnR5RXF1YWxzKGUubmV3VmFsdWUsICdpc0dyb3VwJywgZmFsc2UpKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBzbGlkZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbm9kZURhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuSW5zZXJ0LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IDUsIG5ld1ZhbHVlOiBba2V5LHNsaWRlLTAsY2F0ZWdvcnksc2xpZGUsaW5kZXgsMCxpc0dyb3VwLGZhbHNlLHdpZHRoLDIwMCxoZWlnaHQsMjAwLGxvYywxNTYuNTYyNSAtOTcuNjg3NSxsZXZlbCwwLGNoaWxkcmVuLDAsdGl0bGUsLG5vdGVzLCxfX2dvaGFzaGlkLDYzODc3XSAsIHByb3BlcnR5TmFtZTogbm9kZURhdGFBcnJheSBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3ByZXNlbnRlcic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnbm9kZURhdGFBcnJheScgJiYgZS5jaGFuZ2UgPT0gZ28uQ2hhbmdlZEV2ZW50LlJlbW92ZSAmJiBwcm9wZXJ0eUVxdWFscyhlLm9sZFZhbHVlLCAnaXNHcm91cCcsIGZhbHNlKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgc2xpZGVcclxuICAgICAgICAgICAgLy9tb2RlbENoYW5nZTogbm9kZURhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogNSwgb2xkVmFsdWU6IFtrZXksc2xpZGUtMCxjYXRlZ29yeSxzbGlkZSxpbmRleCwwLGlzR3JvdXAsZmFsc2Usd2lkdGgsMjAwLGhlaWdodCwyMDAsbG9jLDE1Ni41NjI1IC05Ny42ODc1LGxldmVsLDAsY2hpbGRyZW4sMCx0aXRsZSwsbm90ZXMsLF9fZ29oYXNoaWQsNjM4NzcsJCRoYXNoS2V5LDBYTl0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBub2RlRGF0YUFycmF5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcHJlc2VudGVyJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdsb2MnIHx8IGUucHJvcGVydHlOYW1lID09ICd3aWR0aCcgfHwgZS5wcm9wZXJ0eU5hbWUgPT0gJ2hlaWdodCcpIHtcclxuICAgICAgICAgICAgLy8gbW92ZSB0aGluZyBvciByZXNpemUgc2xpZGVcclxuICAgICAgICAgICAgLy8gbW92ZSBzbGlkZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCwyLDEsNCwyLDMsMywgLDQsLSw1LDEsNiwyLDcsOF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDIsMSw0LDIsMywzLCAsNCwtLDUsMSw2LDIsNyw3XSAsIHByb3BlcnR5TmFtZTogbG9jIFxyXG4gICAgICAgICAgICAvLyByZXNpemUgc2xpZGVcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBoZWlnaHQgXHJcbiAgICAgICAgICAgIC8vIG1vdmUgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsNCwxLDcsMiw5LDMsLiw0LDgsNSw3LDYsNSw3LCAsOCwtLDksMSwxMCwyLDExLDIsMTIsLiwxMyw4LDE0LDcsMTUsNV0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDUsMSw0LDIsMCwzLC4sNCwzLDUsMSw2LDIsNyw1LDgsICw5LC0sMTAsMSwxMSwyLDEyLDEsMTMsLiwxNCwxLDE1LDgsMTYsNywxNyw1XSAsICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ21vdmUnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ2xldmVsJyB8fCBlLnByb3BlcnR5TmFtZSA9PSAnY2hpbGRyZW4nKSB7XHJcbiAgICAgICAgICAgIC8vIHRoZXNlIGF0dHJpYnV0ZXMgYXJlIHVwZGF0ZWQgYXMgYSByZXN1bHQgb2Ygb3RoZXIgYWN0aW9uczsgaWdub3JlXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ2F0dGFjaG1lbnRzJykge1xyXG4gICAgICAgICAgICAvLyBlZGl0ZWQgYXR0YWNobWVudHNcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X2F0dGFjaG1lbnRzJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdzRXhwYW5kZWQnIHx8IGUucHJvcGVydHlOYW1lID09ICdwRXhwYW5kZWQnKSB7XHJcbiAgICAgICAgICAgIC8vIGlnbm9yZSBleHBhbmQvY29sbGFwc2VcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdtb3ZlJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdGaW5pc2hlZFVuZG8nIHx8IGUucHJvcGVydHlOYW1lID09ICdGaW5pc2hlZFJlZG8nKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAndW5kb19yZWRvJztcclxuICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUuY2hhbmdlICE9IGdvLkNoYW5nZWRFdmVudC5UcmFuc2FjdGlvbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogJyArIGUubW9kZWxDaGFuZ2UgK1xyXG4gICAgICAgICAgICAgICAgJywgY2hhbmdlOiAnICsgZS5jaGFuZ2UgK1xyXG4gICAgICAgICAgICAgICAgJywgb2xkUGFyYW06ICcgKyBlLm9sZFBhcmFtICtcclxuICAgICAgICAgICAgICAgICcsIG9sZFZhbHVlOiBbJyArIF8ucGFpcnMoZS5vbGRWYWx1ZSkgKyAnXSAnICtcclxuICAgICAgICAgICAgICAgICcsIG5ld1BhcmFtOiAnICsgZS5uZXdQYXJhbSArXHJcbiAgICAgICAgICAgICAgICAnLCBuZXdWYWx1ZTogWycgKyBfLnBhaXJzKGUubmV3VmFsdWUpICsgJ10gJyArXHJcbiAgICAgICAgICAgICAgICAnLCBwcm9wZXJ0eU5hbWU6ICcgKyBlLnByb3BlcnR5TmFtZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZVR5cGUpIHtcclxuICAgICAgICAgICAgbWFwLmdldEFuYWx5dGljcygpLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY2FsbGluZyBkZWxheWVkQXV0b3NhdmUsIGNoYW5nZVR5cGU6ICcgKyBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgc2VsZi5zYXZlKGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gY29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIGNoZWNraW5nIHByb3BlcnRpZXNcclxuICAgIGZ1bmN0aW9uIHByb3BlcnR5RXF1YWxzKG9iaiwga2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBvYmogIT09IG51bGwgJiYgXy5oYXMob2JqLCBrZXkpICYmIF8ucmVzdWx0KG9iaiwga2V5KSA9PSB2YWx1ZTtcclxuICAgIH1cclxuXHJcblxyXG59OyIsIi8vIG1haW4gY29udHJvbGxlciBjbGFzc1xyXG5cclxud2luZG93LlNhbmRiYW5rRWRpdG9yID0ge307XHJcblxyXG53aW5kb3cuTWFwRWRpdG9yQ3RybCA9IGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgJHRpbWVvdXQsICRtb2RhbCwgJGxvZykge1xyXG5cclxuICAgICRzY29wZS5tYXAgPSBuZXcgU2FuZGJhbmtFZGl0b3IuTWFwKCRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgJHRpbWVvdXQsICRtb2RhbCwgJGxvZyk7XHJcblxyXG4gICAgLy8gd2luZG93Lm1hcERhdGEgaXMgc2V0IGluIF9mb3JtIHZpZXdcclxuICAgIHZhciBtZXRhZGF0YSA9IHdpbmRvdy5tYXBEYXRhLm1hcC5tZXRhZGF0YTtcclxuICAgICRzY29wZS5zYW5kYm94ID0gbWV0YWRhdGEuc2FuZGJveDtcclxuICAgICRzY29wZS5tYXBEYXRhID0gd2luZG93Lm1hcERhdGEubWFwLmRhdGE7IC8vIHRoaXMgZ2V0cyBvdmVyd3JpdHRlbiBieSBsb2FkKCkgdW5sZXNzIHdlIGFyZSBpbiB0aGUgc2FuZGJveCB3aXRoIG5vIG1hcCBJRFxyXG4gICAgJHNjb3BlLm1hcElkID0gbWV0YWRhdGEuaWQ7XHJcbiAgICAkc2NvcGUubWFwVGl0bGUgPSBtZXRhZGF0YS5uYW1lO1xyXG4gICAgJHNjb3BlLm1hcFVzZXJUYWdzID0gbWV0YWRhdGEudXNlclRhZ3M7XHJcbiAgICAkc2NvcGUubWFwVXJsID0gbWV0YWRhdGEudXJsO1xyXG4gICAgJHNjb3BlLmNhbkVkaXQgPSBtZXRhZGF0YS5jYW5FZGl0O1xyXG4gICAgJHNjb3BlLnVwZGF0ZWRBdCA9IG1ldGFkYXRhLnVwZGF0ZWRBdDtcclxuICAgICRzY29wZS51cGRhdGVkQnkgPSBtZXRhZGF0YS51cGRhdGVkQnk7IC8vIElEXHJcbiAgICAkc2NvcGUudXBkYXRlZEJ5TmFtZSA9IG1ldGFkYXRhLnVwZGF0ZWRCeU5hbWU7XHJcblxyXG4gICAgJHNjb3BlLmVkaXRpbmdUaXRsZSA9IGZhbHNlO1xyXG5cclxuICAgICRzY29wZS5zaG93SW1hZ2VFeHBvcnQgPSBmYWxzZTtcclxuICAgICRzY29wZS5pbWFnZUV4cG9ydExvYWRpbmcgPSB0cnVlO1xyXG5cclxuICAgICRzY29wZS5jdXJyZW50VGFiID0gbnVsbDtcclxuXHJcbiAgICAvLyBvdmVycmlkZSBwYXJlbnQgc2NvcGUgKHNlZSB1c2VyLmpzKSBzaW5jZSB3ZSdyZSBlZGl0aW5nIGEgbWFwXHJcbiAgICAkc2NvcGUuY2NzVGFnZ2luZy5tYXBJZCA9ICRzY29wZS5tYXBJZDtcclxuXHJcbiAgICAkc2NvcGUubWF5YmVTdGFydEVkaXRpbmdUaXRsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZWRpdGluZ1RpdGxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5kb25lRWRpdGluZ1RpdGxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZG9uZUVkaXRpbmdUaXRsZScpO1xyXG4gICAgICAgICRzY29wZS5lZGl0aW5nVGl0bGUgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUubWFwLmdldEF1dG9zYXZlKCkuc2F2ZSgnZWRpdF90aXRsZScpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZWRpdGluZ1RpdGxlS2V5cHJlc3MgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmRvbmVFZGl0aW5nVGl0bGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5wcmludCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHdpbmRvdy5wcmludCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gc2F2ZSBzYW5kYm94IG1hcCAoc2lnbiB1cC9zaWduIGluKSAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuc2F2ZVNhbmRib3hNYXAgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZV9zYW5kYm94X3NhdmVfbW9kYWwuaHRtbCcsIC8vIHNlZSB2aWV3cy91c2Vycy9fdGVtcGxhdGVfc2FuZGJveF9zYXZlX21vZGFsXHJcbiAgICAgICAgICAgIGJhY2tkcm9wOiAnc3RhdGljJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogc2FuZGJveFNhdmVNb2RhbEN0cmwsXHJcbiAgICAgICAgICAgIHdpbmRvd0NsYXNzOiAnc2FuZGJveC1zYXZlLW1vZGFsJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgb3V0ZXJTY29wZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtYXA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUubWFwO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVzZXJQcm9maWxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBzYW5kYm94U2F2ZU1vZGFsQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIG91dGVyU2NvcGUsIG1hcCwgdXNlclByb2ZpbGUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1hcCA9IG1hcDtcclxuICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUgPSB1c2VyUHJvZmlsZTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1hcERhdGEgPSBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnRvSnNvbigpO1xyXG4gICAgICAgICRzY29wZS50aHVtYm5haWxQbmcgPSBtYXAuZ2V0UHJlc2VudGVyKCkuZ2V0TWFwVGh1bWJuYWlsKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldERlZmF1bHRMb2dpbkRhdGEoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBlbWFpbDogJycsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogJydcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRoaXMgc3RydWN0dXJlIGlzIHVzZWQgdG8gc3RvcmUgdGhlIGZvcm0gZGF0YSwgYXMgd2VsbCBhcyB0aGUgdmFsaWRhdGlvbiBlcnJvcnMgcmV0dXJuZWQgZnJvbSB0aGUgc2VydmVyLi4uXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RGVmYXVsdFNpZ251cERhdGEoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBlbWFpbDogJycsXHJcbiAgICAgICAgICAgICAgICBmaXJzdF9uYW1lOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RfbmFtZTogJycsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogJycsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246ICcnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUubG9naW5EYXRhID0gZ2V0RGVmYXVsdExvZ2luRGF0YSgpO1xyXG4gICAgICAgICRzY29wZS5sb2dpbkVycm9yID0gJyc7XHJcblxyXG4gICAgICAgICRzY29wZS5zaWdudXBEYXRhID0gZ2V0RGVmYXVsdFNpZ251cERhdGEoKTtcclxuICAgICAgICAkc2NvcGUuc2lnbnVwRXJyb3JzID0gZ2V0RGVmYXVsdFNpZ251cERhdGEoKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmRvTG9naW4gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmxvZ2luRXJyb3JzID0gZ2V0RGVmYXVsdExvZ2luRGF0YSgpOyAvLyByZXNldCBlcnJvcnNcclxuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3NpZ25faW4uanNvbicsIHtcclxuICAgICAgICAgICAgICAgIHVzZXI6ICRzY29wZS5sb2dpbkRhdGFcclxuICAgICAgICAgICAgfSkudGhlbihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YSBpcyB7aWQ6WFgsIC4uLn1cclxuICAgICAgICAgICAgICAgICAgICBvdXRlclNjb3BlLnNldFVzZXJJZChyZXNwb25zZS5kYXRhLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRlclNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJQcm9maWxlID0gb3V0ZXJTY29wZS51c2VyUHJvZmlsZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRhdGEgaXMge1wiZXJyb3JcIjogXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvZ2luRXJyb3IgPSByZXNwb25zZS5kYXRhLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmRvU2lnbnVwID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zaWdudXBFcnJvcnMgPSBnZXREZWZhdWx0U2lnbnVwRGF0YSgpOyAvLyByZXNldCBlcnJvcnNcclxuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3VzZXJzLmpzb24nLCB7XHJcbiAgICAgICAgICAgICAgICB1c2VyOiAkc2NvcGUuc2lnbnVwRGF0YVxyXG4gICAgICAgICAgICB9KS50aGVuKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIGlzIG5ldyB1c2VyIElEXHJcbiAgICAgICAgICAgICAgICAgICAgb3V0ZXJTY29wZS5zZXRVc2VySWQocmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0ZXJTY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyUHJvZmlsZSA9IG91dGVyU2NvcGUudXNlclByb2ZpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIGlzIGUuZy4ge1wiZmlyc3RfbmFtZVwiOltcImNhbid0IGJlIGJsYW5rXCJdLCAuLi59XHJcbiAgICAgICAgICAgICAgICAgICAgXy5lYWNoKF8ua2V5cyhyZXNwb25zZS5kYXRhKSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zaWdudXBFcnJvcnNba2V5XSA9IHJlc3BvbnNlLmRhdGFba2V5XS5qb2luKCc7ICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICBzYW5kYm94U2F2ZU1vZGFsQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnLCAnb3V0ZXJTY29wZScsICdtYXAnLCAndXNlclByb2ZpbGUnXTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tIGVkaXQgc3RhdHVzIG1lc3NhZ2UgZm9yIGhlYWRlciBiYXIgLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLmVkaXRTdGF0dXMgPSAnJztcclxuXHJcbiAgICAkc2NvcGUuTEFTVF9VUERBVEVEID0gJyc7XHJcbiAgICAkc2NvcGUuUkVBRF9PTkxZID0gJ1ZpZXcgb25seSc7XHJcbiAgICAkc2NvcGUuU0FWSU5HID0gJ1NhdmluZy4uLic7XHJcbiAgICAkc2NvcGUuU0FWRV9PSyA9ICdBbGwgY2hhbmdlcyBzYXZlZCc7XHJcbiAgICAkc2NvcGUuU0FWRV9GQUlMRUQgPSAnQ2hhbmdlcyBjb3VsZCBub3QgYmUgc2F2ZWQnO1xyXG5cclxuICAgICRzY29wZS51cGRhdGVFZGl0U3RhdHVzID0gZnVuY3Rpb24ocykge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3VwZGF0ZUVkaXRTdGF0dXM6ICcgKyBzKTtcclxuICAgICAgICAkc2NvcGUuZWRpdFN0YXR1cyA9IHM7XHJcbiAgICAgICAgaWYgKHMgPT0gJHNjb3BlLlNBVkVfRkFJTEVEKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCdDaGFuZ2VzIGNvdWxkIG5vdCBiZSBzYXZlZCAtIHBsZWFzZSBjaGVjayB5b3VyIG5ldHdvcmsgY29ubmVjdGlvbi4nKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHMgPT0gJHNjb3BlLkxBU1RfVVBEQVRFRCkge1xyXG4gICAgICAgICAgICB2YXIgdGltZSA9IG1vbWVudCgkc2NvcGUudXBkYXRlZEF0KS5mcm9tTm93KCk7XHJcbiAgICAgICAgICAgIHZhciBieSA9ICcnO1xyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnVwZGF0ZWRCeSA9PSAkc2NvcGUudXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICBieSA9ICdieSBtZSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLnVwZGF0ZWRCeU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGJ5ID0gJ2J5ICcgKyAkc2NvcGUudXBkYXRlZEJ5TmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiBzaG93ICdieSBtZScgb25seSBmb3IgZWRpdGFibGUgc2hhcmVkIG1hcHM/XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuZWRpdFN0YXR1cyA9ICdMYXN0IHVwZGF0ZWQgJyArIHRpbWUgKyAnICcgKyBieTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIExhc3QgZWRpdCB3YXMgWFggYWdvIGJ5IFlZXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUubWFwLmluaXQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghJHNjb3BlLnNhbmRib3gpIHtcclxuICAgICAgICAgICAgICAgIC8vIG92ZXJ2aWV3IGRpYWdyYW1cclxuICAgICAgICAgICAgICAgIHZhciBvdmVydmlldyA9IGdvLkdyYXBoT2JqZWN0Lm1ha2UoZ28uT3ZlcnZpZXcsIFwib3ZlcnZpZXctZGlhZ3JhbVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZWQ6ICRzY29wZS5tYXAuZ2V0RGlhZ3JhbSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBbGlnbm1lbnQ6IGdvLlNwb3QuQ2VudGVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHZhciBvdXRsaW5lID0gb3ZlcnZpZXcuYm94LmVsZW1lbnRzLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lLnN0cm9rZSA9IFwiIzMzM1wiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL2lmICgkc2NvcGUubWFwVXJsKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubWFwLmxvYWQoKTtcclxuICAgICAgICAgICAgLy99IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAkc2NvcGUubWFwLmxvYWRGb3JTYW5kYm94KCk7XHJcbiAgICAgICAgICAgIC8vfVxyXG5cclxuICAgICAgICAgICAgYWRkQmVoYXZpb3JzKCk7XHJcbiAgICAgICAgICAgIGhhbmRsZU5hdmlnYXRpb24oKTtcclxuICAgICAgICAgICAgaGFuZGxlQmFja3NwYWNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbWlzYy4gVUkgYmVoYXZpb3JzIGZvciB0b29sdGlwcywgcG9wdXBzIGV0Yy5cclxuICAgIC8vIFRPRE86IGZpZ3VyZSBvdXQgd2hpY2ggb2YgdGhlc2UgbmVlZCB0byBiZSByZWFwcGxpZWQgYWZ0ZXIgZHluYW1pYyBkYXRhIGNoYW5nZXMgKGUuZy4gTGVzc29uQm9vayBwb3BvdmVycylcclxuICAgIGZ1bmN0aW9uIGFkZEJlaGF2aW9ycygpIHtcclxuXHJcbiAgICAgICAgLy8gTk9URTogd2UgaGF2ZSB0byB1c2UgcmVndWxhciBib290c3RyYXAgdG9vbHRpcHMgZm9yIHRvb2xiYXIgYnV0dG9ucyAoaW5zdGVhZCBvZiBuZy1ib290c3RyYXAgb25lcylcclxuICAgICAgICAvLyBzbyB3ZSBjYW4gdHVybiB0aGVtIG9mZiBmb3IgbW9iaWxlLiBXZSBhbHNvIHB1dCB0aGUgdG9vbHRpcHMgb24gd3JhcHBlcnMgcmF0aGVyIHRoYW4gb24gdGhlIGFjdHVhbCBcclxuICAgICAgICAvLyBidXR0b25zLCBzbyB3ZSBjYW4gYXZvaWQgdGhlIGlzc3VlIG9mIHN0dWNrIHRvb2x0aXBzIGlmIGEgYnV0dG9uIGdldHMgZGlzYWJsZWQgd2hpbGUgdGhlIHRvb2x0aXAgaXMgc2hvd2luZy5cclxuXHJcbiAgICAgICAgaWYgKCEkc2NvcGUuaXNUb3VjaERldmljZSgpKSB7XHJcbiAgICAgICAgICAgIC8vICQoJy50b29sdGlwLXdyYXBwZXInKS50b29sdGlwKHtcclxuICAgICAgICAgICAgLy8gICAgIHBsYWNlbWVudDogJ3RvcCcsXHJcbiAgICAgICAgICAgIC8vICAgICBjb250YWluZXI6ICdib2R5J1xyXG4gICAgICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vICQoJy5kcm9wZG93bi1tZW51IC5idG4nKS50b29sdGlwKHtcclxuICAgICAgICAgICAgLy8gICAgIHBsYWNlbWVudDogJ2xlZnQnLFxyXG4gICAgICAgICAgICAvLyAgICAgY29udGFpbmVyOiAnYm9keSdcclxuICAgICAgICAgICAgLy8gfSk7IC8vIGZvciBsYXlvdXQgb3B0aW9uc1xyXG5cclxuICAgICAgICAgICAgJCgnaGVhZGVyLCAjbWFwLXRpdGxlJykuaG92ZXIoXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCdib2R5LnByZXNlbnRlci1wbGF5aW5nJykuYWRkQ2xhc3MoJ2hpZGUtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keS5wcmVzZW50ZXItcGxheWluZycpLnJlbW92ZUNsYXNzKCdoaWRlLWhlYWRlcicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVOYXZpZ2F0aW9uKCkge1xyXG4gICAgICAgIC8vIGNyb3NzLWJyb3dzZXIgdHdlYWtzOlxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIGh0dHA6Ly93d3cub3BlcmEuY29tL3N1cHBvcnQva2Ivdmlldy84MjcvXHJcbiAgICAgICAgICAgIG9wZXJhLnNldE92ZXJyaWRlSGlzdG9yeU5hdmlnYXRpb25Nb2RlKCdjb21wYXRpYmxlJyk7XHJcbiAgICAgICAgICAgIGhpc3RvcnkubmF2aWdhdGlvbk1vZGUgPSAnY29tcGF0aWJsZSc7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBubyBiaWdnaWUuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpbnN0YWxsIGJlZm9yZS11bmxvYWQgaGFuZGxlcjpcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXhpdE1lc3NhZ2UoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIk5hdmlnYXRpbmcgYXdheSBmcm9tIHlvdXIgTWFwIHdpbGwgY2F1c2UgYW55IHVuc2F2ZWQgY2hhbmdlcyB0byBiZSBsb3N0IFwiICtcclxuICAgICAgICAgICAgICAgIFwiKGFueSBjaGFuZ2VzIHlvdSBtYWtlIGFyZSBhdXRvbWF0aWNhbGx5IHNhdmVkLCBidXQgaXQgdGFrZXMgYSBjb3VwbGUgb2Ygc2Vjb25kcykuXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgICAgICAgJCh3aW5kb3cpLmJpbmQoJ2JlZm9yZXVubG9hZCcsIGV4aXRNZXNzYWdlKTtcclxuXHJcbiAgICAgICAgLy8gcHJldmVudCBleGl0IHByb21wdCB3aGVuIHRoZSB1c2VyIGRlbGliZXJhdGVseSBuYXZpZ2F0ZXMgYXdheTpcclxuXHJcbiAgICAgICAgJCgnI2hlYWRlci1yaWdodCBhJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQod2luZG93KS51bmJpbmQoJ2JlZm9yZXVubG9hZCcsIGV4aXRNZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVCYWNrc3BhY2UoKSB7XHJcbiAgICAgICAgdmFyIEJBQ0tTUEFDRSA9IDg7XHJcblxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdrZXlkb3duJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEJBQ0tTUEFDRSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKCdib2R5IDpmb2N1cycpLmlzKCc6aW5wdXQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHByZXZlbnQgYWNjaWRlbnRhbCBiYWNrc3BhY2Ugd2hlbiBubyBpbnB1dCBoYXMgZm9jdXM6XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKTtcclxufTtcclxuXHJcbndpbmRvdy5NYXBFZGl0b3JDdHJsLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRodHRwJywgJyRyZXNvdXJjZScsICckdGltZW91dCcsICckbW9kYWwnLCAnJGxvZyddOyIsIndpbmRvdy5TYW5kYmFua0VkaXRvck9wdGlvbnMgPSB7fTtcclxuXHJcblNhbmRiYW5rRWRpdG9yT3B0aW9ucyA9IGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgJG1vZGFsLCAkbG9nKSB7XHJcblxyXG4gICAgdGhpcy5vcGVuTW9kYWwgPSBmdW5jdGlvbihvcHRpb25zLCBvblNhdmVEZWZhdWx0cywgb25VcGRhdGUpIHtcclxuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZV9lZGl0b3Jfb3B0aW9uc19tb2RhbC5odG1sJywgLy8gc2VlIHZpZXdzL21hcHMvX3RlbXBsYXRlX2VkaXRvcl9vcHRpb25zX21vZGFsXHJcbiAgICAgICAgICAgIGJhY2tkcm9wOiAnc3RhdGljJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogb3B0aW9uc01vZGFsQ3RybCxcclxuICAgICAgICAgICAgd2luZG93Q2xhc3M6ICdvcHRpb25zLW1vZGFsJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25TYXZlRGVmYXVsdHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvblNhdmVEZWZhdWx0cztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uVXBkYXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gY29udHJvbGxlciBmb3Igb3B0aW9ucyBtb2RhbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB2YXIgb3B0aW9uc01vZGFsQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIG9wdGlvbnMsIG9uU2F2ZURlZmF1bHRzLCBvblVwZGF0ZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUub3B0aW9ucyA9IG9wdGlvbnM7XHJcblxyXG4gICAgICAgICRzY29wZS5zZXREZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm9rID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG9uVXBkYXRlKCRzY29wZS5vcHRpb25zKTtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5zZXREZWZhdWx0cy52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgb25TYXZlRGVmYXVsdHMoJHNjb3BlLm9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICBvcHRpb25zTW9kYWxDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsICdvcHRpb25zJywgJ29uU2F2ZURlZmF1bHRzJywgJ29uVXBkYXRlJ107XHJcbn07IiwiLy8gZnVuY3Rpb25zIGZvciB0aGUgZ2VuZXJhdG9yIChha2EgVGhpbmtRdWVyeSlcclxuXHJcbnZhciBHZW5lcmF0b3JDdHJsID0gZnVuY3Rpb24gKCRzY29wZSkge1xyXG5cclxuICAgIHZhciBtYXAgPSAkc2NvcGUubWFwO1xyXG4gICAgdmFyIGRpYWdyYW0gPSAkc2NvcGUubWFwLmdldERpYWdyYW0oKTtcclxuXHJcbiAgICAkc2NvcGUuY29uY2VwdDEgPSAnJztcclxuICAgICRzY29wZS5jb25jZXB0MiA9ICcnO1xyXG5cclxuICAgICRzY29wZS5lY2hvQ29uY2VwdDEgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLmNvbmNlcHQxIHx8ICcuLi4nO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZWNob0NvbmNlcHQyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS5jb25jZXB0MiB8fCAnLi4uJztcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnN3YXBDb25jZXB0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB0bXAgPSAkc2NvcGUuY29uY2VwdDE7XHJcbiAgICAgICAgJHNjb3BlLmNvbmNlcHQxID0gJHNjb3BlLmNvbmNlcHQyO1xyXG4gICAgICAgICRzY29wZS5jb25jZXB0MiA9IHRtcDtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5tYXBJdCA9IGZ1bmN0aW9uKHF1ZXN0aW9uKSB7XHJcbiAgICAgICAgc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgbWFwLmdldEF1dG9zYXZlKCkuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICgkc2NvcGUuc2FuZGJveCkge1xyXG4gICAgICAgICAgICBkaWFncmFtLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmaWd1cmUgb3V0IGxvY2F0aW9uIGZvciBpbnNlcnRlZCBzdHVmZlxyXG4gICAgICAgIHZhciBkYiA9IG1hcC5jb21wdXRlTWFwQm91bmRzKCk7XHJcbiAgICAgICAgdmFyIHggPSBkYi54ICsgZGIud2lkdGggKyAyMDA7XHJcbiAgICAgICAgdmFyIHkgPSBkYi55O1xyXG4gICAgICAgIGlmIChpc05hTih4KSB8fCBpc05hTih5KSkge1xyXG4gICAgICAgICAgICB4ID0geSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3gsIHk6ICcgKyB4ICsgJywgJyArIHkpO1xyXG5cclxuICAgICAgICAvLyBpbnNlcnQgdGhlIHN0dWZmIGFuZCBkZXNlbGVjdCBpdFxyXG4gICAgICAgIHF1ZXN0aW9uKHgseSk7XHJcbiAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpOyBcclxuXHJcbiAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIGRpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgICAgICBcclxuICAgICAgICBtYXAuZ2V0VWkoKS5yZXNldFpvb20oKTtcclxuXHJcbiAgICAgICAgbWFwLmdldEF1dG9zYXZlKCkuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICBtYXAuZ2V0QXV0b3NhdmUoKS5zYXZlKCdlZGl0X2dlbmVyYXRvcicpO1xyXG4gICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZWxlY3RlZFF1ZXN0aW9uID0gbnVsbDtcclxuXHJcbiAgICAkc2NvcGUuc2VsZWN0UXVlc3Rpb24gPSBmdW5jdGlvbihxdWVzdGlvbikge1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZFF1ZXN0aW9uID0gcXVlc3Rpb247XHJcbiAgICAgICAgaWYgKCRzY29wZS5zYW5kYm94KSB7XHJcbiAgICAgICAgICAgICRzY29wZS5tYXBJdChxdWVzdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTsgICAgXHJcblxyXG4gICAgJHNjb3BlLnN1cnByaXNlTWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIga2V5cyA9IF8ua2V5cygkc2NvcGUucXVlcmllcyk7XHJcbiAgICAgICAgdmFyIGkgPSBfLnJhbmRvbSgwLCBrZXlzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIHZhciBxdWVzdGlvbiA9ICRzY29wZS5xdWVyaWVzW2tleXNbaV1dO1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZFF1ZXN0aW9uID0gcXVlc3Rpb247XHJcbiAgICAgICAgJHNjb3BlLm1hcEl0KHF1ZXN0aW9uKTtcclxuXHJcbiAgICAgICAgJCgnI3F1ZXN0aW9ucycpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IGkgKiAzMCB9LCAxMDAwKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLSBmdW5jdGlvbnMgZm9yIGNyZWF0aW5nIGVhY2ggb2YgdGhlIHN0cnVjdHVyZXMgLSBzZWUgdmlld3MvbWFwcy9nZW5lcmF0b3JfdGFiIC0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLnF1ZXJpZXMgPSB7XHJcblxyXG4gICAgICAgIFdIQVRfSVM6IGZ1bmN0aW9uKHgsIHkpIHsgIC8vIDFcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcz8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgV0hBVF9JU19OT1Q6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMlxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMS5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzIG5vdD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzIG5vdD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzIG5vdD8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBESVNUSU5HVUlTSF9CRVRXRUVOOiBmdW5jdGlvbih4LCB5KSB7IC8vIDNcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcz8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMi5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ2lzPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdpcz8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBDT01QQVJFX0NPTlRSQVNUOiBmdW5jdGlvbih4LCB5KSB7IC8vIDRcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMTUwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAxNTAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMS5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcyLmRhdGEsICdkZmxhZycsIHRydWUpO1xyXG4gICAgICAgICAgICB2YXIgcnRoaW5nMSA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdjb250cmFzdCcpO1xyXG4gICAgICAgICAgICB2YXIgcnRoaW5nMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdjb21wYXJlJyk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHJ0aGluZzEubGFiZWxlZExpbmsuZGF0YSwgJ3R5cGUnLCAndG9Gcm9tJyk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHJ0aGluZzIubGFiZWxlZExpbmsuZGF0YSwgJ3R5cGUnLCAndG9Gcm9tJyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUEFSVFNfT0Y6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gNVxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUEFSVF9PRjogZnVuY3Rpb24oeCwgeSkgeyAvLyA2XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJ3BhcnQgb2Y/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUEFSVFNfSEFWRV9QQVJUUzogZnVuY3Rpb24oeCwgeSkgeyAvLyA3XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoY2hpbGQxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGNoaWxkMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGNoaWxkMiwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChjaGlsZDIsICdwYXJ0PycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFJfUEFSVFM6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gOFxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgdmFyIHJ0aGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChydGhpbmcsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQocnRoaW5nLCAncGFydD8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBQX1BBUlRTOiBmdW5jdGlvbih4LCB5KSB7IC8vIDlcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMzAwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludCBvZiAnICsgJHNjb3BlLmVjaG9Db25jZXB0MigpICsgJz8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQgb2YgJyArICRzY29wZS5lY2hvQ29uY2VwdDIoKSArICc/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDMgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydCBzZWVuIGZyb20gdmlld3BvaW50IG9mICcgKyAkc2NvcGUuZWNob0NvbmNlcHQyKCkgKyAnPycpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayh0aGluZzIsIHRoaW5nMSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayh0aGluZzIsIGNoaWxkMSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayh0aGluZzIsIGNoaWxkMik7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayh0aGluZzIsIGNoaWxkMyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUlNfVE9fQU5EX0JZOiBmdW5jdGlvbih4LCB5KSB7IC8vIDEwXHJcbiAgICAgICAgICAgIHZhciByZWxhdGVkMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAncmVsYXRlZCBpZGVhPycpO1xyXG4gICAgICAgICAgICB2YXIgcmVsYXRlZDIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDMwMCwgeSArIDUwLCAncmVsYXRlZCBpZGVhPycpO1xyXG4gICAgICAgICAgICB2YXIgcmVsYXRlZDMgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDUwLCB5ICsgMzAwLCAncmVsYXRlZCBpZGVhPycpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDEzMCwgeSArIDEzMCwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rKHJlbGF0ZWQxLCB0aGluZyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGluayhyZWxhdGVkMiwgdGhpbmcpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmsocmVsYXRlZDMsIHRoaW5nKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDUwMCwgeSArIDE1MCwgJ2lkZWE/Jyk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDc1MCwgeSArIDE1MCwgJ2lkZWE/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgV0hBVF9JU19SOiBmdW5jdGlvbih4LCB5KSB7IC8vIDExXHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAnaWRlYT8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBQQVJUX1JTX0FSRTogZnVuY3Rpb24oeCwgeSkgeyAvLyAxMlxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAzMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQyID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDMgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoY2hpbGQxLmRhdGEsICdsb2MnLCAnLTIwIDExMCcpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShjaGlsZDIuZGF0YSwgJ2xvYycsICc4MCAxMTAnKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoY2hpbGQzLmRhdGEsICdsb2MnLCAnMzAgMTkwJyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQxLCBjaGlsZDIsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQyLCBjaGlsZDMsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQzLCBjaGlsZDEsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUEFSVF9SU19FWElTVDogZnVuY3Rpb24oeCwgeSkgeyAvLyAxM1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSwgJ3JpZ2h0Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDEyID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDEzID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMjEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMjIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMjMgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rKHRoaW5nMSwgdGhpbmcyKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDExLCBjaGlsZDIxLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMTIsIGNoaWxkMjIsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQxMywgY2hpbGQyMywgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBSU19XSVRIX09USEVSUzogZnVuY3Rpb24oeCwgeSkgeyAvLyAxNFxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAyMDAsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDIwMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMyA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMjAwLCB5ICsgMjAwLCAnYW5vdGhlciB0aGluZycpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmc0ID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyMDAsIHkgKyAyMDAsICdhbm90aGVyIHRoaW5nJyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzMsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzQsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcyLCB0aGluZzQsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmczLCB0aGluZzQsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUEFSVFNfT0ZfUDogZnVuY3Rpb24oeCwgeSkgeyAvLyAxNVxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQzID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDEwMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHRoaW5nMSwgdGhpbmcyKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBQT0lOVF9GT1I6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTZcclxuICAgICAgICAgICAgdmFyIHRoaW5nID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICduZXcgcGVyc3BlY3RpdmUnKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMTUwLCB5ICsgMTUwLCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAxNTAsIHkgKyAxNTAsICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIHZhciBydGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcsIHJ0aGluZyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgSEFTX01VTFRJUExFX1BTOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE3XHJcbiAgICAgICAgICAgIHZhciBwb2ludDEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSArIDUwLCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICB2YXIgcG9pbnQyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHksICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBwb2ludDMgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDUwMCwgeSArIDUwLCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5ICsgMjUwLCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsocG9pbnQxLCB2aWV3KTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50Miwgdmlldyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDMsIHZpZXcpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBBUlRTX0ZST01fTVVMVElQTEVfUFM6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMThcclxuICAgICAgICAgICAgdmFyIHBvaW50MSA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMTAwLCB5LCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICB2YXIgcG9pbnQyID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHkgKyAxMjUsICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBwb2ludDMgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDEwMCwgeSArIDI1MCwgJ3ZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAxNTAsIHkgKyAyNSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZywgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZywgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMyA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZywgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50MSwgY2hpbGQxKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50MSwgY2hpbGQyKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50MiwgY2hpbGQyKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50MywgY2hpbGQzKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBXSEFUX0FCT1VUOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE5XHJcbiAgICAgICAgICAgICRzY29wZS5xdWVyaWVzLldIQVRfSVMoeCwgeSk7XHJcbiAgICAgICAgICAgICRzY29wZS5xdWVyaWVzLlBBUlRTX09GKHggKyAzMDAsIHkpO1xyXG4gICAgICAgICAgICAkc2NvcGUucXVlcmllcy5QQVJUU19GUk9NX01VTFRJUExFX1BTKHggKyA3MDAsIHkpO1xyXG4gICAgICAgICAgICAkc2NvcGUucXVlcmllcy5SU19UT19BTkRfQlkoeCwgeSArIDQwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTsgLy8gcXVlcmllc1xyXG5cclxufTtcclxuXHJcbkdlbmVyYXRvckN0cmwuJGluamVjdCA9IFsnJHNjb3BlJ107XHJcblxyXG5cclxuU2FuZGJhbmtFZGl0b3IuR2VuZXJhdG9yID0gZnVuY3Rpb24gKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIE5COiBnZW5lcmF0b3IgaXMgb3BlbmVkIG9uIGxvYWQgb2YgZW1wdHkgbWFwOyBzZWUgbWFwLmpzOmxvYWQoKVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBhIHRhYiBpcyBvcGVuZWQgb3IgY2xvc2VkXHJcbiAgICB0aGlzLmN1cnJlbnRUYWJDaGFuZ2VkID0gZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKG9sZFZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9HRU5FUkFUT1IpIHsgLy8gY2xvc2luZyB0YWJcclxuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX0dFTkVSQVRPUikgeyAvLyBvcGVuaW5nIHRhYlxyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyB0aGVzZSBnZXQgZmlsdGVyZWQgb3V0IGluIExlc3NvbkJvb2tcclxuICAgIHRoaXMuZ2V0UGxhY2Vob2xkZXJJZGVhTmFtZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gWydpcz8nLCAnaXMgbm90PycsICdwYXJ0PycsICd2aWV3cG9pbnQ/JywgJ3JlbGF0ZWQgaWRlYT8nLCAnaWRlYT8nLFxyXG4gICAgICAgICAgICAgICAgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludD8nLCAnY29udHJhc3Q/JywgJ2NvbXBhcmlzb24/JywgJ3JlbGF0aW9uc2hpcD8nXTtcclxuICAgIH07XHJcbn07XHJcbiIsIi8vIGxheW91dHMgdXNlZCBpbiB0aGUgZWRpdG9yLCBmb3IgdGhlIGRpYWdyYW0gb3IgaW5kaXZpZHVhbCBHcm91cHMsIHBsdXMgbGF5b3V0LXJlbGF0ZWQgZnVuY3Rpb25zXHJcblxyXG5TYW5kYmFua0VkaXRvci5MYXlvdXRzID0gZnVuY3Rpb24oJHNjb3BlLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7fTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdJbml0aWFsTGF5b3V0Q29tcGxldGVkJykge1xyXG4gICAgICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnU2VsZWN0aW9uTW92ZWQnKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZVNlbGVjdGVkUGFydExvY2F0aW9uRGF0YShlKTtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25EZWxldGVkJykge1xyXG4gICAgICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1BhcnRDcmVhdGVkJykge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdMYXlvdXRzLCBQYXJ0Q3JlYXRlZCcpO1xyXG4gICAgICAgICAgICAvLyBzZXROZXdQYXJ0TG9jYXRpb25EYXRhKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdQYXJ0UmVzaXplZCcpIHtcclxuICAgICAgICAgICAgc2V0UmVzaXplZFBhcnREaW1lbnNpb25EYXRhKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdMaW5rRHJhd24nKSB7XHJcbiAgICAgICAgICAgIGFkanVzdExpbmtMYXlvdXQoZS5zdWJqZWN0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnTGlua1JlbGlua2VkJykge1xyXG4gICAgICAgICAgICBhZGp1c3RMaW5rTGF5b3V0KGUuc3ViamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gaGFuZGxlIGxvY2F0aW9uL3NpemUgYXR0cmlidXRlcyBmb3Igbm9kZXMgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gb25seSB1cGRhdGUgdy9oIGZvciBzbGlkZXMsIGFzIGFsbCBvdGhlciBub2RlIHR5cGVzIGhhdmUgZml4ZWQgZGltZW5zaW9ucyBhY2NvcmRpbmcgdG8gdGhlIHRlbXBsYXRlc1xyXG4gICAgZnVuY3Rpb24gc2V0UmVzaXplZFBhcnREaW1lbnNpb25EYXRhKGUpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5jYXRlZ29yeSA9PSAnc2xpZGUnKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ1BhcnRSZXNpemVkOiAnICsgbm9kZS5wYXJ0LmFjdHVhbEJvdW5kcyk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5vZGUuZGF0YSwgJ3dpZHRoJywgbm9kZS5wYXJ0LmFjdHVhbEJvdW5kcy53aWR0aCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5vZGUuZGF0YSwgJ2hlaWdodCcsIG5vZGUucGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0IHRoZSAnbG9jJyBhdHRyaWJ1dGUgZm9yIGEgbmV3IHRvcC1sZXZlbCBub2RlIChjcmVhdGVkIGJ5IGRvdWJsZS1jbGlja2luZyksIHRvIHN1cHBvcnQgZnJlZWhhbmQgbGF5b3V0XHJcbiAgICB0aGlzLnNldE5ld1BhcnRMb2NhdGlvbkRhdGEgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5wYXJ0KSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5vZGUuZGF0YSwgJ2xvYycsIG5vZGUucGFydC5sb2NhdGlvbi54ICsgJyAnICsgbm9kZS5wYXJ0LmxvY2F0aW9uLnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyB1cGRhdGVzIHRoZSAnbG9jJyBhdHRyaWJ1dGUgZm9yIGVhY2ggc2VsZWN0ZWQgcGFydCwgdG8gc3VwcG9ydCBmcmVlaGFuZCBsYXlvdXQgKGRvZXMgbm90IGFwcGx5IHRvIHNsaWRlcylcclxuICAgIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkUGFydExvY2F0aW9uRGF0YShlKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHZhciBpdCA9IGRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHsgLy8gdGhpbmdcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50WCA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50WSA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFydC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRYID0gcGFydC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRZID0gcGFydC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtb3ZpbmcgZ3JvdXAsIHN1YmplY3Q6ICcgKyBlLnN1YmplY3QgKyAnLCBwYXJ0OiAnICsgcGFydCArICcsIGhlaWdodDogJyArIHBhcnQucGFydC5kZXNpcmVkU2l6ZS5oZWlnaHQgKyAnLCBsb2NhdGlvbjogJyArIHBhcnQucGFydC5sb2NhdGlvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnQubG9jYXRpb24ueCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShwYXJ0LmRhdGEsICdsb2MnLCAocGFydC5sb2NhdGlvbi54IC0gcGFyZW50WCkgKyAnICcgKyAocGFydC5sb2NhdGlvbi55IC0gcGFyZW50WSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIGNoYW5naW5nIGxheW91dHMgb2YgdGhpbmdzIGFuZCB0aGVpciBkZXNjZW5kYW50cyAtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5mcm9tQW5kVG9Ob2Rlc0FyZVZpc2libGUgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsuZnJvbU5vZGUgJiZcclxuICAgICAgICAgICAgbGluay50b05vZGUgJiZcclxuICAgICAgICAgICAgIXNlbGYuaGFzQ29sbGFwc2VkQW5jZXN0b3IobGluay5mcm9tTm9kZSkgJiZcclxuICAgICAgICAgICAgIXNlbGYuaGFzQ29sbGFwc2VkQW5jZXN0b3IobGluay50b05vZGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxhYmVsTm9kZUlzVmlzaWJsZSA9IGZ1bmN0aW9uKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gbGluay5sYWJlbE5vZGVzLmNvdW50ICYmIGxpbmsubGFiZWxOb2Rlcy5maXJzdCgpLnZpc2libGU7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaGFzQ29sbGFwc2VkQW5jZXN0b3IgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cC5pc1N1YkdyYXBoRXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAgPSBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoaXMuaGFzTGlua0xhYmVsQW5jZXN0b3IgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgLy8gICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAvLyAgICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAvLyAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICAgICAgZWxzZSBpZiAoZ3JvdXAuY29udGFpbmluZ0dyb3VwLmlzTGlua0xhYmVsKSB7XHJcbiAgICAvLyAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIC8vICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICBlbHNlIHtcclxuICAgIC8vICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfTtcclxuXHJcbiAgICB0aGlzLmdldEhpZ2hlc3RBbmNlc3RvcldpdGhMYXlvdXQgPSBmdW5jdGlvbihncm91cCwgbGF5b3V0TmFtZXMpIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKF8uY29udGFpbnMobGF5b3V0TmFtZXMsIGdyb3VwLmNvbnRhaW5pbmdHcm91cC5kYXRhLmxheW91dCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBncm91cCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hcmVTaXN0ZXJzSW5JbnZlbnRvcnlMYXlvdXQgPSBmdW5jdGlvbihncm91cDEsIGdyb3VwMikge1xyXG4gICAgICAgIHJldHVybiBncm91cDEuY29udGFpbmluZ0dyb3VwID09IGdyb3VwMi5jb250YWluaW5nR3JvdXAgJiZcclxuICAgICAgICAgICAgZ3JvdXAxLmNvbnRhaW5pbmdHcm91cCAmJlxyXG4gICAgICAgICAgICBfLmNvbnRhaW5zKFsnbGVmdCcsICdyaWdodCddLCBncm91cDEuY29udGFpbmluZ0dyb3VwLmRhdGEubGF5b3V0KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc05vdFdpdGhpbkludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuICFzZWxmLmlzV2l0aGluSW52ZW50b3J5TGF5b3V0KGdyb3VwKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1JUaGluZ1dpdGhpbkludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwLmlzTGlua0xhYmVsICYmIHNlbGYuaXNXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzV2l0aGluSW52ZW50b3J5TGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydsZWZ0JywgJ3JpZ2h0J10pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzV2l0aGluTGVmdEludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuaXNXaXRoaW5MYXlvdXQoZ3JvdXAsIFsnbGVmdCddKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1dpdGhpblJpZ2h0SW52ZW50b3J5TGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydyaWdodCddKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1dpdGhpbkZyZWVoYW5kTGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydmcmVlaGFuZCddKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1dpdGhpblN0YWNrZWRMYXlvdXQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmlzV2l0aGluTGF5b3V0KGdyb3VwLCBbJ3N0YWNrZWQnXSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNXaXRoaW5MYXlvdXQgPSBmdW5jdGlvbihncm91cCwgbGF5b3V0TmFtZXMpIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnaXNXaXRoaW5MYXlvdXQ6ICcgKyBncm91cCArICdsYXlvdXRzOiAnICsgbGF5b3V0TmFtZXMuam9pbigpICsgJzogZmFsc2UnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChfLmNvbnRhaW5zKGxheW91dE5hbWVzLCBncm91cC5jb250YWluaW5nR3JvdXAuZGF0YS5sYXlvdXQpKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdpc1dpdGhpbkxheW91dDogJyArIGdyb3VwICsgJ2xheW91dHM6ICcgKyBsYXlvdXROYW1lcy5qb2luKCkgKyAnOiB0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNob3dMZWZ0VGV4dEJsb2NrID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpblJpZ2h0SW52ZW50b3J5TGF5b3V0KGdyb3VwKSAmJlxyXG4gICAgICAgICAgICAhc2VsZi5pc1dpdGhpblN0YWNrZWRMYXlvdXQoZ3JvdXApICYmXHJcbiAgICAgICAgICAgICFncm91cC5pc0xpbmtMYWJlbDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zaG93UmlnaHRUZXh0QmxvY2sgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmlzV2l0aGluTGVmdEludmVudG9yeUxheW91dChncm91cCkgJiZcclxuICAgICAgICAgICAgIXNlbGYuaXNXaXRoaW5TdGFja2VkTGF5b3V0KGdyb3VwKSAmJlxyXG4gICAgICAgICAgICAhZ3JvdXAuaXNMaW5rTGFiZWw7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2V0RGVzY2VuZGFudExheW91dHMgPSBmdW5jdGlvbihncm91cCwgbGF5b3V0TmFtZSkge1xyXG4gICAgICAgIGlmIChsYXlvdXROYW1lID09ICdsZWZ0JyB8fCBsYXlvdXROYW1lID09ICdyaWdodCcgfHwgbGF5b3V0TmFtZSA9PSAnc3RhY2tlZCcpIHtcclxuICAgICAgICAgICAgdmFyIGl0ID0gZ3JvdXAubWVtYmVyUGFydHMuaXRlcmF0b3I7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmICFwYXJ0LmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydC5kYXRhLmxheW91dCA9IGxheW91dE5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXREZXNjZW5kYW50TGF5b3V0cyhwYXJ0LCBsYXlvdXROYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAobGF5b3V0TmFtZSA9PSAnZnJlZWhhbmQnKSB7XHJcbiAgICAgICAgICAgIC8vIHN0YWNrZWQ/XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmRpc2FibGVMYXlvdXRGb3JTZWxlY3RlZFRoaW5ncyA9IGZ1bmN0aW9uKGxheW91dE5hbWUpIHtcclxuICAgICAgICB2YXIgaXQgPSBtYXAuZ2V0RGlhZ3JhbSgpLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICBpZiAoIWl0LmNvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuaXNXaXRoaW5MYXlvdXQoZ3JvdXAsIFsnbGVmdCcsICdyaWdodCcsICdzdGFja2VkJ10pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBzY2FsaW5nIGZ1bmN0aW9ucywgZXRjLiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gQ29tcHV0ZXMgdGhlIGxldmVsIG9mIHRoaXMgZ3JvdXBcclxuICAgIHRoaXMuY29tcHV0ZUxldmVsID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjb21wdXRlTGV2ZWwsIHBhcnQ6ICcgKyBwYXJ0ICsgJywgY29udGFpbmluZ0dyb3VwOiAnICsgcGFydC5jb250YWluaW5nR3JvdXApO1xyXG4gICAgICAgIGlmICghKGdyb3VwIGluc3RhbmNlb2YgZ28uR3JvdXApIHx8IGdyb3VwLmNvbnRhaW5pbmdHcm91cCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb21wdXRlTGV2ZWwoZ3JvdXAuY29udGFpbmluZ0dyb3VwKSArIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBnZXRzIHRoZSBiYXNpYyBzY2FsaW5nIGZvciB0aGluZyBzcXVhcmVzLCBieSBsZXZlbFxyXG4gICAgZnVuY3Rpb24gZ2V0VGhpbmdTY2FsZShsZXZlbCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnBvdygwLjQ1LCBsZXZlbCk7IC8vIDEsIC40NSwgLjIwMjUsIC4wOTExMjUsIC4uLlxyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoaXMgaXMgb25seSB1c2VkIGZvciBncm91cHNcclxuICAgIHRoaXMuZ2V0U2NhbGUgPSBmdW5jdGlvbihncm91cCwgdmlzaXRlZEdyb3VwS2V5cykge1xyXG4gICAgICAgIGlmIChncm91cCkge1xyXG4gICAgICAgICAgICAvLyBrZWVwIHRyYWNrIG9mIGdyb3VwcyB3ZSd2ZSB2aXNpdGVkIHRvIGF2b2lkIGluZmluaXRlIHJlY3Vyc2lvblxyXG4gICAgICAgICAgICAvLyBUT0RPOiB0cmFjayBkb3duIGV4YWN0bHkgaG93IGluZmluaXRlIGxvb3BzIGFyZSBvY2N1cnJpbmcsXHJcbiAgICAgICAgICAgIC8vIG9yIElGIHRoZXkgc3RpbGwgYXJlIHNpbmNlIG1hcC5jaGVja01vZGVsIHdhcyBpbnRyb2R1Y2VkLi4uXHJcbiAgICAgICAgICAgIGlmICh2aXNpdGVkR3JvdXBLZXlzICYmIEFycmF5LmlzQXJyYXkodmlzaXRlZEdyb3VwS2V5cykpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Zpc2l0ZWRHcm91cEtleXM6ICcgKyB2aXNpdGVkR3JvdXBLZXlzKTtcclxuICAgICAgICAgICAgICAgIGlmIChfLmNvbnRhaW5zKHZpc2l0ZWRHcm91cEtleXMsIGdyb3VwLmRhdGEua2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2hpdCBhbHJlYWR5IHZpc2l0ZWQga2V5OiAnICsgZ3JvdXAuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2aXNpdGVkR3JvdXBLZXlzLnB1c2goZ3JvdXAuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmlzaXRlZEdyb3VwS2V5cyA9IFtncm91cC5kYXRhLmtleV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChncm91cC5sYWJlbGVkTGluaykgeyAvLyBSLXRoaW5nXHJcbiAgICAgICAgICAgICAgICB2YXIgZnJvbVNjYWxlID0gc2VsZi5nZXRTY2FsZShncm91cC5sYWJlbGVkTGluay5mcm9tTm9kZSwgdmlzaXRlZEdyb3VwS2V5cyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG9TY2FsZSA9IHNlbGYuZ2V0U2NhbGUoZ3JvdXAubGFiZWxlZExpbmsudG9Ob2RlLCB2aXNpdGVkR3JvdXBLZXlzKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2dldFNjYWxlLCBmcm9tU2NhbGU6ICcgKyBmcm9tU2NhbGUgKyAnLCB0b1NjYWxlOiAnICsgdG9TY2FsZSArICcsIHZpc2l0ZWRHcm91cEtleXM6ICcgKyB2aXNpdGVkR3JvdXBLZXlzLmpvaW4oJywnKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oZnJvbVNjYWxlLCB0b1NjYWxlKSAqIDAuNTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmdldFNjYWxlKGdyb3VwLmNvbnRhaW5pbmdHcm91cCwgdmlzaXRlZEdyb3VwS2V5cykgKiAwLjQ1O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFRoaW5nU2NhbGUoc2VsZi5jb21wdXRlTGV2ZWwoZ3JvdXApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMTsgLy8gY2FuIG9jY3VyIHdoZW4gZHJhZ2dpbmcgUiB0byBlbXB0eSBzcGFjZVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBnZXRzIHRoZSBtYXJnaW4gdG8gYmUgdXNlZCBpbiBzdGFjayBsYXlvdXQgYmV0d2VlbiB0aGlzIGdyb3VwJ3MgY2hpbGRyZW5cclxuICAgIGZ1bmN0aW9uIGdldFN0YWNrTWFyZ2luKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuICgxMCAvIDAuNDUpICogc2VsZi5nZXRTY2FsZShncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0cyB0aGUgbWFyZ2luIHRvIGJlIHVzZWQgaW4gc3RhY2sgbGF5b3V0IGJldHdlZW4gdGhpcyBncm91cCdzIGNoaWxkcmVuXHJcbiAgICBmdW5jdGlvbiBnZXRJbnZlbnRvcnlNYXJnaW4oZ3JvdXApIHtcclxuICAgICAgICBpZiAoc2VsZi5jb21wdXRlTGV2ZWwoZ3JvdXApIDw9IDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEwICogc2VsZi5nZXRTY2FsZShncm91cCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDMgKiBzZWxmLmdldFNjYWxlKGdyb3VwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5nZXRFeHRlcm5hbFRleHRTY2FsZSA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSAwLjEgKiBzZWxmLmNvbXB1dGVMZXZlbChncm91cCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0TGlua1N0cm9rZVdpZHRoID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHZhciBmcm9tU2NhbGUgPSBzZWxmLmdldFNjYWxlKGxpbmsuZnJvbU5vZGUpO1xyXG4gICAgICAgIHZhciB0b1NjYWxlID0gc2VsZi5nZXRTY2FsZShsaW5rLnRvTm9kZSk7XHJcbiAgICAgICAgcmV0dXJuIChsaW5rLmlzU2VsZWN0ZWQgPyA0IDogMikgKiBNYXRoLm1pbihmcm9tU2NhbGUsIHRvU2NhbGUpOyAvLyAyLCAuOSwgLi4uXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNjYWxlIGFycm93aGVhZHMgYmFzZWQgb24gdGhlIHNtYWxsZXN0IHRvL2Zyb20gbm9kZSwgXHJcbiAgICAvLyBvciBqdXN0IHRoZSBUbyBub2RlIGZvciBQIGxpbmtzXHJcbiAgICB0aGlzLmdldEFycm93aGVhZFNjYWxlID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHZhciBmcm9tU2NhbGUgPSBzZWxmLmdldFNjYWxlKGxpbmsuZnJvbU5vZGUpO1xyXG4gICAgICAgIHZhciB0b1NjYWxlID0gc2VsZi5nZXRTY2FsZShsaW5rLnRvTm9kZSk7XHJcbiAgICAgICAgdmFyIG1pblNjYWxlID0gTWF0aC5taW4oZnJvbVNjYWxlLCB0b1NjYWxlKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiZ2V0QXJyb3doZWFkU2NhbGUsIGZyb21TY2FsZTogXCIsIGZyb21TY2FsZSwgJywgdG9TY2FsZTogJywgdG9TY2FsZSwgJywgbWluU2NhbGU6ICcsIG1pblNjYWxlKTtcclxuICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJykge1xyXG4gICAgICAgICAgICBtaW5TY2FsZSA9IHRvU2NhbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtaW5TY2FsZSA+PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxICogbWluU2NhbGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEuNSAqIG1pblNjYWxlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gY3JlYXRpbmcgbmV3IHRoaW5ncyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gUmV0dXJucyBhIGxvY2F0aW9uIGZvciBhIG5ldyBzaXN0ZXIgZ3JvdXAgKHRoaW5nKSB0byB0aGUgZ2l2ZW4gb25lLCBcclxuICAgIC8vIHdoaWNoIHdpbGwgbm90IGhpZGUgYW55IGV4aXN0aW5nIHRoaW5ncyAob3ZlcmxhcCBpcyBhbGxvd2VkKS4gXHJcbiAgICAvLyBUaGUgcmV0dXJuZWQgY29vcmRpbmF0ZXMgYXJlIGFic29sdXRlIGZvciBhIHRvcC1sZXZlbCBncm91cCwgXHJcbiAgICAvLyBvciByZWxhdGl2ZSB0byB0aGUgcGFyZW50IG90aGVyd2lzZSAtIHN1aXRhYmxlIGZvciB1c2Ugd2l0aCBGcmVlaGFuZERpYWdyYW1MYXlvdXRcclxuICAgIC8vIG9yIEZyZWVoYW5kTGF5b3V0LCByZXNwLlxyXG4gICAgdGhpcy5nZXROZXdTaXN0ZXJMb2NhdGlvbiA9IGZ1bmN0aW9uKGdyb3VwLCB3aXRoUikge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAvLyBpZiB3ZSBhcmUgd2l0aGluIGFub3RoZXIgZ3JvdXAsIHRoaW5ncyBhcmUgaW4gYWJzb2x1dGUgY29vcmRpbmF0ZXNcclxuICAgICAgICAvLyBhbmQgc2lzdGVycyBhcmUgcGxhY2VkIGFib3ZlIHRoZSB0aGluZzsgb3RoZXJ3aXNlIHJlbGF0aXZlIGFuZCBiZWxvdy4uLlxyXG4gICAgICAgIHZhciBpbkdyb3VwID0gKGdyb3VwLmNvbnRhaW5pbmdHcm91cCAhPT0gbnVsbCk7XHJcbiAgICAgICAgLy8gLi4uIGV4Y2VwdCBpZiB3aXRoUiBpcyB0cnVlLCB3ZSBnbyB0byB0aGUgcmlnaHQgaW5zdGVhZCBvZiBhYm92ZSBvciBiZWxvdy5cclxuXHJcbiAgICAgICAgLy8gc3RhcnQgYmVsb3cgaWYgaW4gZ3JvdXAsIGVsc2UgYWJvdmU7IG9yIHRvIHRoZSByaWdodCBpZiB3aXRoUlxyXG4gICAgICAgIHZhciB4LCB5LCB3LCBoO1xyXG4gICAgICAgIGlmICh3aXRoUikge1xyXG4gICAgICAgICAgICB4ID0gZ3JvdXAubG9jYXRpb24ueCArIGdyb3VwLmFjdHVhbEJvdW5kcy53aWR0aCAqIDIuMjtcclxuICAgICAgICAgICAgeSA9IGdyb3VwLmxvY2F0aW9uLnk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgeCA9IGdyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgICAgIHkgPSBncm91cC5sb2NhdGlvbi55ICsgZ3JvdXAuYWN0dWFsQm91bmRzLmhlaWdodCAqIDEuMSAqIChpbkdyb3VwID8gMSA6IC0xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdyA9IGdyb3VwLmFjdHVhbEJvdW5kcy53aWR0aDtcclxuICAgICAgICBoID0gZ3JvdXAuYWN0dWFsQm91bmRzLmhlaWdodDtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIG92ZXJsYXBwaW5nIHBhcnRzOyBpZiBmb3VuZCwgaW5jcmVtZW50IHgseSBhbmQgY29udGludWVcclxuXHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgdmFyIHJlY3QgPSBuZXcgZ28uUmVjdCh4LCB5LCB3LCBoKTtcclxuICAgICAgICAgICAgcmVjdC5ncm93KGggLyAxMCwgdyAvIDEwLCBoIC8gMTAsIHcgLyAxMCk7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0cyA9IGRpYWdyYW0uZmluZE9iamVjdHNJbihyZWN0LCBudWxsLCBzZWxmLmlzR3JvdXApO1xyXG4gICAgICAgICAgICBpZiAocGFydHMuY291bnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXROZXdTaXN0ZXJMb2NhdGlvbjogb3ZlcmxhcHBpbmcgcGFydCBmb3VuZCBpbiAnICsgcmVjdCk7XHJcbiAgICAgICAgICAgICAgICBpZiAod2l0aFIpIHtcclxuICAgICAgICAgICAgICAgICAgICB4ICs9IHcgLyAxMDtcclxuICAgICAgICAgICAgICAgICAgICB5ICs9IGggLyAxMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeCArPSB3IC8gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgeSArPSBoIC8gMTAgKiAoaW5Hcm91cCA/IDEgOiAtMSk7IC8vIG1vdmUgZG93biBpZiBpbiBncm91cCwgZWxzZSB1cFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldE5ld1Npc3RlckxvY2F0aW9uOiBubyBvdmVybGFwcGluZyBwYXJ0IGZvdW5kIGluICcgKyByZWN0KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbkdyb3VwKSB7IC8vIG1ha2UgY29vcmRpbmF0ZXMgcmVsYXRpdmVcclxuICAgICAgICAgICAgeCAtPSBncm91cC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICAgICAgeSAtPSBncm91cC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBnby5Qb2ludCh4ICsgTWF0aC5yYW5kb20oKSwgeSArIE1hdGgucmFuZG9tKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBSZXR1cm5zIGEgbG9jYXRpb24gZm9yIGEgbmV3IGNoaWxkIGdyb3VwICh0aGluZykgdG8gdGhlIGdpdmVuIG9uZSxcclxuICAgIC8vIHdoaWNoIHdpbGwgbm90IGhpZGUgYW55IGV4aXN0aW5nIGNoaWxkcmVuIChvdmVybGFwIGlzIGFsbG93ZWQpLlxyXG4gICAgLy8gVGhlIHJldHVybmVkIGNvb3JkaW5hdGVzIGFyZSByZWxhdGl2ZSB0byB0aGUgcGFyZW50IGdyb3VwIC0gc3VpdGFibGUgZm9yIHVzZSB3aXRoIEZyZWVoYW5kTGF5b3V0LlxyXG4gICAgdGhpcy5nZXROZXdDaGlsZExvY2F0aW9uID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgZ3JvdXBCb3VuZHMgPSBncm91cC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgLy8gTkI6IGFsbCB4L3kgbG9jYXRpb25zIGFyZSByZWxhdGl2ZSB0byB0aGUgZ3JvdXAgbG9jYXRpb25cclxuICAgICAgICB2YXIgeCA9IDA7XHJcbiAgICAgICAgdmFyIHkgPSBncm91cEJvdW5kcy5oZWlnaHQgKiAxLjE7XHJcbiAgICAgICAgdmFyIHcsIGg7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBncm91cC5tZW1iZXJQYXJ0cztcclxuICAgICAgICAvLyBrZWVwIHRlc3RpbmcgbmV3IHJlY3RhbmdsZXMgdW50aWwgd2UgZmluZCBvbmUgdGhhdCBkb2Vzbid0IG92ZXJsYXAgd2l0aCBhbnkgZXhpc3RpbmcgbWVtYmVyIG9mIHRoZSBncm91cFxyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIG1lbWJlcnMucmVzZXQoKTtcclxuICAgICAgICAgICAgdmFyIG92ZXJsYXBzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBtZW1iZXIsIG5ld1JlY3QsIG1lbWJlclJlY3Q7XHJcbiAgICAgICAgICAgIHdoaWxlIChtZW1iZXJzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVyID0gbWVtYmVycy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBtZW1iZXJCb3VuZHMgPSBtZW1iZXIuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgICAgICAgICAgdyA9IG1lbWJlckJvdW5kcy53aWR0aDtcclxuICAgICAgICAgICAgICAgIGggPSBtZW1iZXJCb3VuZHMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgLy8gZmluZCB0aGUgZXhpc3RpbmcgbWVtYmVyJ3MgYWN0dWFsIGJvdW5kcyAoYWJzb2x1dGUgY29vcmRzKVxyXG4gICAgICAgICAgICAgICAgbWVtYmVyUmVjdCA9IG5ldyBnby5SZWN0KG1lbWJlckJvdW5kcy54IC0gZ3JvdXBCb3VuZHMueCwgbWVtYmVyQm91bmRzLnkgLSBncm91cEJvdW5kcy55LCBtZW1iZXJCb3VuZHMud2lkdGgsIG1lbWJlckJvdW5kcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgbmV3UmVjdCA9IG5ldyBnby5SZWN0KHgsIHksIHcsIGgpO1xyXG4gICAgICAgICAgICAgICAgbmV3UmVjdC5ncm93KGggLyA1LCB3IC8gNSwgaCAvIDUsIHcgLyA1KTtcclxuICAgICAgICAgICAgICAgIG92ZXJsYXBzID0gbmV3UmVjdC5jb250YWluc1JlY3QobWVtYmVyUmVjdCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0TmV3Q2hpbGRMb2NhdGlvbiBmb3IgJyArIG1lbWJlciArICc6IG5ld1JlY3QgPSAnICsgbmV3UmVjdCArICcsIG1lbWJlclJlY3QgPSAnICsgbWVtYmVyUmVjdCArICcsIG92ZXJsYXBzOiAnICsgb3ZlcmxhcHMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG92ZXJsYXBzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG92ZXJsYXBzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpbmNyZW1lbnQgeCwgeSBhbmQgdHJ5IGFnYWluXHJcbiAgICAgICAgICAgICAgICB4ICs9IHcgLyA1O1xyXG4gICAgICAgICAgICAgICAgeSArPSBoIC8gNTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGZvdW5kIGEgZ29vZCBzcG90IVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBnby5Qb2ludCh4LCB5KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gYSBzaW1wbGVyIHZlcnNpb24gb2YgZ2V0TmV3Q2hpbGRMb2NhdGlvbiB0aGF0IHBsYWNlcyB0aGUgY2hpbGQgb3V0c2lkZSB0aGUgYm91bmRzIG9mIHRoZSBleGlzdGluZyBjaGlsZHJlblxyXG4gICAgdGhpcy5nZXROZXdDaGlsZExvY2F0aW9uMiA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgIHZhciBjaGlsZEJvdW5kcyA9IG1hcC5zYWZlUmVjdChtYXAuZ2V0RGlhZ3JhbSgpLmNvbXB1dGVQYXJ0c0JvdW5kcyhncm91cC5tZW1iZXJQYXJ0cykpO1xyXG4gICAgICAgIHZhciB4ID0gMDtcclxuICAgICAgICB2YXIgeSA9IDA7XHJcbiAgICAgICAgaWYgKCFncm91cC5tZW1iZXJQYXJ0cy5jb3VudCkge1xyXG4gICAgICAgICAgICB5ID0gZ3JvdXBCb3VuZHMuaGVpZ2h0ICogMS4yO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHkgPSBncm91cEJvdW5kcy5oZWlnaHQgKiAxLjQgKyBjaGlsZEJvdW5kcy5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2dldE5ld0NoaWxkTG9jYXRpb24yLCBjaGlsZEJvdW5kczogJyArIGNoaWxkQm91bmRzICsgJywgZ3JvdXBCb3VuZHM6ICcgKyBncm91cEJvdW5kcyArICcsIHg6ICcgKyB4ICsgJywgeTogJyArIHkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgZ28uUG9pbnQoeCwgeSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIG1vdmUgYWxsIHRoZSBnaXZlbiBuZXcgbWVtYmVyIGdyb3VwcyBzbyB0aGF0IHRoZWlyIGxvY2F0aW9ucyBhcmUgcmVsYXRpdmUgdG8gdGhhdCBvZiBcclxuICAgIC8vIHRoZSBwYXJlbnQgYW5kIGl0cyBwcmV2aW91c2x5IGV4aXN0aW5nIG1lbWJlcnMsIGFuZCBzY2FsZWQgZG93biBhcHByb3ByaWF0ZWx5XHJcbiAgICB0aGlzLmxheW91dE5ld01lbWJlcnNSZWxhdGl2ZVRvID0gZnVuY3Rpb24obmV3TWVtYmVycywgcGFyZW50LCBvbGRNZW1iZXJCb3VuZHMpIHtcclxuICAgICAgICAvLyBob3cgYmlnIHdhcyB0aGUgcGFyZW50IHN5c3RlbSBiZWZvcmUgdGhlIG5ldyBncm91cHMgd2VyZSBhZGRlZD9cclxuICAgICAgICB2YXIgc3lzdGVtQm91bmRzID0gcGFyZW50LmFjdHVhbEJvdW5kcy51bmlvblJlY3Qob2xkTWVtYmVyQm91bmRzKTtcclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBvbGQvbmV3IG9yaWdpbnMgLSBwbGFjZSBuZXcgb3JpZ2luIGJlbG93IGV4aXN0aW5nIHN5c3RlbVxyXG4gICAgICAgIHZhciBvbGRCb3VuZHMgPSBtYXAuZ2V0RGlhZ3JhbSgpLmNvbXB1dGVQYXJ0c0JvdW5kcyhuZXdNZW1iZXJzKTtcclxuICAgICAgICB2YXIgb2xkT3JpZ2luID0gbmV3IGdvLlBvaW50KG9sZEJvdW5kcy54LCBvbGRCb3VuZHMueSk7XHJcbiAgICAgICAgdmFyIG5ld09yaWdpbiA9IG5ldyBnby5Qb2ludCgwLCBzeXN0ZW1Cb3VuZHMuaGVpZ2h0ICogMS4yKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnbGF5b3V0TmV3TWVtYmVyc1JlbGF0aXZlVG8sIHN5c3RlbUJvdW5kczogJyArIHN5c3RlbUJvdW5kcyArICcsIG9sZEJvdW5kczogJyArIG9sZEJvdW5kcyArXHJcbiAgICAgICAgICAgICcsIG9sZE9yaWdpbjogJyArIG9sZE9yaWdpbiArICcsIG5ld09yaWdpbjogJyArIG5ld09yaWdpbik7XHJcblxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgbmV3IHNjYWxlZCBsb2NhdGlvbnNcclxuICAgICAgICAvLyBOQjogd2UgY2FuIGFzc3VtZSBuZXdNZW1iZXJzIGFyZSBhbGwgb25lIGxldmVsIGRvd24gZnJvbSBwYXJlbnQgKHNlZSBtYXAuYWRkU2VsZWN0ZWRUaGluZ3NBc0NoaWxkcmVuT2YpLCBcclxuICAgICAgICAvLyBzbyB3ZSBqdXN0IG11bHRpcGx5IGJ5IHRoZSBzdGFuZGFyZCBzY2FsZSBmYWN0b3JcclxuICAgICAgICB2YXIgaXQgPSBuZXdNZW1iZXJzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBncm91cEJvdW5kcyA9IGdyb3VwLmFjdHVhbEJvdW5kcztcclxuICAgICAgICAgICAgdmFyIG5ld1ggPSBuZXdPcmlnaW4ueCArIChncm91cEJvdW5kcy54IC0gb2xkT3JpZ2luLngpICogMC40NTtcclxuICAgICAgICAgICAgdmFyIG5ld1kgPSBuZXdPcmlnaW4ueSArIChncm91cEJvdW5kcy55IC0gb2xkT3JpZ2luLnkpICogMC40NTtcclxuICAgICAgICAgICAgdmFyIG5ld0xvYyA9IGdvLlBvaW50LnN0cmluZ2lmeShuZXcgZ28uUG9pbnQobmV3WCwgbmV3WSkpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbGF5b3V0TmV3TWVtYmVyc1JlbGF0aXZlVG8sIGdyb3VwQm91bmRzOiAnICsgZ3JvdXBCb3VuZHMgKyAnLCBuZXdMb2M6ICcgKyBuZXdMb2MpO1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbG9jJywgbmV3TG9jKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIG1vdmUgYWxsIHRoZSBnaXZlbiBvbGQgbWVtYmVyIGdyb3VwcyBzbyB0aGF0IHRoZWlyIGxvY2F0aW9ucyBhcmUgYWJzb2x1dGUgYW5kIGFib3ZlXHJcbiAgICAvLyB0aGUgcGFyZW50LCBhbmQgc2NhbGVkIHVwIGFwcHJvcHJpYXRlbHlcclxuICAgIHRoaXMubGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZiA9IGZ1bmN0aW9uKG9sZE1lbWJlcnMsIHBhcmVudCwgb2xkTWVtYmVyc0JvdW5kcywgb2xkTWVtYmVyc0xldmVsKSB7XHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBzY2FsZSBmYWN0b3IgKG1lbWJlcnMgY2FuIGJlIGRyYWdnZWQgdXAgbXVsdGlwbGUgbGV2ZWxzLCB1bmxpa2UgZHJhZ2dpbmcgaW50byBTKVxyXG4gICAgICAgIHZhciBzY2FsZUZhY3RvciA9IE1hdGgucG93KDAuNDUsIG9sZE1lbWJlcnNMZXZlbCAtIHNlbGYuY29tcHV0ZUxldmVsKHBhcmVudCkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdsYXlvdXRPbGRNZW1iZXJzT3V0c2lkZU9mLCBzY2FsZUZhY3RvcjogJyArIHNjYWxlRmFjdG9yKTtcclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBvbGQvbmV3IG9yaWdpbnMgLSBwbGFjZSBuZXcgb3JpZ2luIGFib3ZlIHBhcmVudCwgd2l0aCB2ZXJ0aWNhbCBzcGFjZSBmb3Igc2NhbGVkLXVwIG9sZE1lbWJlcnNcclxuICAgICAgICB2YXIgcGFyZW50Qm91bmRzID0gcGFyZW50LmFjdHVhbEJvdW5kcztcclxuICAgICAgICB2YXIgb2xkT3JpZ2luID0gbmV3IGdvLlBvaW50KG9sZE1lbWJlcnNCb3VuZHMueCwgb2xkTWVtYmVyc0JvdW5kcy55KTtcclxuICAgICAgICB2YXIgbmV3T3JpZ2luID0gbmV3IGdvLlBvaW50KHBhcmVudEJvdW5kcy54LCBwYXJlbnRCb3VuZHMueSAtIG9sZE1lbWJlcnNCb3VuZHMuaGVpZ2h0ICogMS4yIC8gc2NhbGVGYWN0b3IpO1xyXG5cclxuICAgICAgICAvLyBmaWd1cmUgb3V0IG5ldyBzY2FsZWQgbG9jYXRpb25zXHJcbiAgICAgICAgdmFyIGl0ID0gb2xkTWVtYmVycy5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXBCb3VuZHMgPSBncm91cC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgICAgIHZhciBuZXdYID0gbmV3T3JpZ2luLnggKyAoZ3JvdXBCb3VuZHMueCAtIG9sZE9yaWdpbi54KSAvIHNjYWxlRmFjdG9yO1xyXG4gICAgICAgICAgICB2YXIgbmV3WSA9IG5ld09yaWdpbi55ICsgKGdyb3VwQm91bmRzLnkgLSBvbGRPcmlnaW4ueSkgLyBzY2FsZUZhY3RvcjtcclxuICAgICAgICAgICAgdmFyIG5ld0xvYyA9IGdvLlBvaW50LnN0cmluZ2lmeShuZXcgZ28uUG9pbnQobmV3WCwgbmV3WSkpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZiwgcGFyZW50Qm91bmRzOiAnICsgcGFyZW50Qm91bmRzICsgJywgb2xkTWVtYmVyc0JvdW5kczogJyArIG9sZE1lbWJlcnNCb3VuZHMgK1xyXG4gICAgICAgICAgICAgICAgJywgbmV3T3JpZ2luOiAnICsgbmV3T3JpZ2luICsgJywgZ3JvdXBCb3VuZHM6ICcgKyBncm91cEJvdW5kcyArICcsIG5ld0xvYzogJyArIG5ld0xvYyk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsb2MnLCBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLSBhY2Nlc3NvcnMgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlIGxheW91dCBjbGFzcyBieSBhYmJyZXZpYXRlZCBuYW1lXHJcbiAgICB0aGlzLmdldExheW91dCA9IGZ1bmN0aW9uKGxheW91dE5hbWUpIHtcclxuICAgICAgICBpZiAobGF5b3V0TmFtZSA9PSAnZnJlZWhhbmQnKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZyZWVoYW5kTGF5b3V0KCk7XHJcbiAgICAgICAgZWxzZSBpZiAobGF5b3V0TmFtZSA9PSAncmlnaHQnKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJpZ2h0SW52ZW50b3J5TGF5b3V0KCk7XHJcbiAgICAgICAgZWxzZSBpZiAobGF5b3V0TmFtZSA9PSAnc3RhY2tlZCcpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RhY2tlZExheW91dCgpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBMZWZ0SW52ZW50b3J5TGF5b3V0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0RnJlZWhhbmREaWFncmFtTGF5b3V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGcmVlaGFuZERpYWdyYW1MYXlvdXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRydWUgaWYgdGhlIHRvIGFuZCBmcm9tIG5vZGVzIGZvciB0aGUgbGluayBoYXZlIGEgY29tbW9uIGFuY2VzdG9yIGdyb3VwIHdpdGggb25lIG9mIHRoZSBnaXZlbiBsYXlvdXQgbmFtZXMuXHJcbiAgICAvLyBUT0RPOiB2ZXJpZnkgbG9naWMgLSB3aGF0IGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBzdWNoIGFuY2VzdG9ycz8gLSB0aGlzIHNob3VsZCByZXR1cm4gdGhlIGhpZ2hlc3Qgb25lLi4uXHJcbiAgICBmdW5jdGlvbiBnZXRDb21tb25BbmNlc3RvcldpdGhMYXlvdXQoZ3JvdXAxLCBncm91cDIsIGxheW91dE5hbWVzKSB7XHJcbiAgICAgICAgdmFyIGFuY2VzdG9yczEgPSBzZWxmLmdldEFuY2VzdG9yR3JvdXBzKGdyb3VwMSk7XHJcbiAgICAgICAgdmFyIGFuY2VzdG9yczIgPSBzZWxmLmdldEFuY2VzdG9yR3JvdXBzKGdyb3VwMik7XHJcbiAgICAgICAgdmFyIGNvbW1vbkFuY2VzdG9ycyA9IF8uaW50ZXJzZWN0aW9uKGFuY2VzdG9yczEsIGFuY2VzdG9yczIpO1xyXG4gICAgICAgIHZhciBsYXlvdXRBbmNlc3RvcnMgPSBfLmZpbHRlcihjb21tb25BbmNlc3RvcnMsIGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmluZGV4T2YobGF5b3V0TmFtZXMsIGdyb3VwLmRhdGEubGF5b3V0KSAhPSAtMTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAobGF5b3V0QW5jZXN0b3JzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbGF5b3V0QW5jZXN0b3JzWzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBhbmNlc3RvcnMgb2YgdGhpcyBncm91cCwgaW5jbHVkaW5nIGl0c2VsZlxyXG4gICAgdGhpcy5nZXRBbmNlc3Rvckdyb3VwcyA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGFuY2VzdG9ycyA9IFtncm91cF07XHJcbiAgICAgICAgdmFyIGcgPSBncm91cDtcclxuICAgICAgICB3aGlsZSAoZy5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgYW5jZXN0b3JzLnB1c2goZy5jb250YWluaW5nR3JvdXApO1xyXG4gICAgICAgICAgICBnID0gZy5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhbmNlc3RvcnM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gRnJlZWhhbmREaWFncmFtTGF5b3V0KCkge1xyXG4gICAgICAgIGdvLkxheW91dC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdvLkRpYWdyYW0uaW5oZXJpdChGcmVlaGFuZERpYWdyYW1MYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG4gICAgRnJlZWhhbmREaWFncmFtTGF5b3V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBcIkZyZWVoYW5kRGlhZ3JhbUxheW91dFwiO1xyXG4gICAgfTtcclxuXHJcbiAgICBGcmVlaGFuZERpYWdyYW1MYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ0ZyZWVoYW5kRGlhZ3JhbUxheW91dC5kb0xheW91dCcpO1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAvLyBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJGcmVlaGFuZCBEaWFncmFtIExheW91dFwiKTtcclxuXHJcbiAgICAgICAgLy92YWxpZGF0ZUdyb3VwTG9jYXRpb25zKGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkpO1xyXG4gICAgICAgIHZhciBncm91cHMgPSBkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpOyAvLyBnZXQgbmV3IGl0ZXJhdG9yXHJcbiAgICAgICAgd2hpbGUgKGdyb3Vwcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoIWdyb3VwLmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jID0gZ28uUG9pbnQucGFyc2UoZ3JvdXAuZGF0YS5sb2MpO1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAubW92ZShuZXcgZ28uUG9pbnQobG9jLngsIGxvYy55KSk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdGcmVlaGFuZERpYWdyYW1MYXlvdXQsIGdyb3VwOiAnICsgZ3JvdXAgKyAnIHRvIGxvY2F0aW9uOiAnICsgbG9jLnggKyAnLCcgKyBsb2MueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFsbCBhZGp1c3RtZW50IG9mIGxpbmtzIGlzIGRvbmUgZnJvbSBoZXJlLCBub3QgZnJvbSB0aGUgb3RoZXIgbGF5b3V0cy4uLlxyXG4gICAgICAgIGdldExpbmtzQnlOb2Rlcyh0cnVlKTtcclxuICAgICAgICB2YXIgbGlua3MgPSBkaWFncmFtLmxpbmtzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgLy8gaWYgKGlzTmFOKGxpbmsubG9jYXRpb24ueCkpIHtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdsaW5rIGxvY2F0aW9uIGlzTmFOJyk7XHJcbiAgICAgICAgICAgIC8vICAgICBsaW5rLm1vdmUobmV3IGdvLlBvaW50KDAsMCkpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdsaW5rIGxvY2F0aW9uOiAnICsgbGluay5sb2NhdGlvbik7XHJcbiAgICAgICAgICAgIGFkanVzdExpbmtMYXlvdXQobGluayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiRnJlZWhhbmQgRGlhZ3JhbSBMYXlvdXRcIik7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyBpZiBhbnkgZ3JvdXAgaW4gdGhlIGdpdmVuIEl0ZXJhdG9yIGRvZXMgbm90IGhhdmUgYSBsb2NhdGlvbiAoZGF0YS5sb2MpLCBzZXQgb25lXHJcbiAgICAvLyB0aGF0IGRvZXNuJ3Qgb3ZlcmxhcCB3aXRoIHRoZSBvdGhlciBtZW1iZXJzXHJcbiAgICBmdW5jdGlvbiB2YWxpZGF0ZUdyb3VwTG9jYXRpb25zKGdyb3Vwcykge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIEZyZWVoYW5kTGF5b3V0KCkge1xyXG4gICAgICAgIGdvLkxheW91dC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdvLkRpYWdyYW0uaW5oZXJpdChGcmVlaGFuZExheW91dCwgZ28uTGF5b3V0KTtcclxuXHJcbiAgICBGcmVlaGFuZExheW91dC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gXCJGcmVlaGFuZExheW91dFwiO1xyXG4gICAgfTtcclxuXHJcbiAgICBGcmVlaGFuZExheW91dC5wcm90b3R5cGUuZG9MYXlvdXQgPSBmdW5jdGlvbihjb2xsKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcIkZyZWVoYW5kIExheW91dFwiKTtcclxuXHJcbiAgICAgICAgdmFyIHggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgdmFyIHkgPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnk7XHJcblxyXG4gICAgICAgIHZhciBpdCA9IHRoaXMuZ3JvdXAubWVtYmVyUGFydHMuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmICFwYXJ0LmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jID0gZ28uUG9pbnQucGFyc2UocGFydC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdGcmVlaGFuZExheW91dCwgcGFydDogJyArIHBhcnQuZGF0YS50ZXh0ICsgJywgbG9jOiAnICsgbG9jICsgJywgbG9jYXRpb246ICcgKyBwYXJ0LmxvY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIHBhcnQubW92ZShuZXcgZ28uUG9pbnQoeCArIGxvYy54LCB5ICsgbG9jLnkpKTtcclxuICAgICAgICAgICAgICAgIHBhcnQubGF5b3V0LmRvTGF5b3V0KHBhcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiRnJlZWhhbmQgTGF5b3V0XCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIFN0YWNrZWRMYXlvdXQoKSB7XHJcbiAgICAgICAgZ28uTGF5b3V0LmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ28uRGlhZ3JhbS5pbmhlcml0KFN0YWNrZWRMYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG4gICAgU3RhY2tlZExheW91dC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gXCJTdGFja2VkTGF5b3V0XCI7XHJcbiAgICB9O1xyXG5cclxuICAgIFN0YWNrZWRMYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xyXG4gICAgICAgIHRoaXMuZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiU3RhY2tlZCBMYXlvdXRcIik7XHJcbiAgICAgICAgdmFyIG1hcmdpbiA9IGdldFN0YWNrTWFyZ2luKHRoaXMuZ3JvdXApO1xyXG4gICAgICAgIHZhciBzdGFydFggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgdmFyIHN0YXJ0WSA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueSArICh0aGlzLmdyb3VwLnBhcnQuYWN0dWFsQm91bmRzLmhlaWdodCArIG1hcmdpbiAvIDIpO1xyXG4gICAgICAgIGxheW91dE1lbWJlcnNGb3JTdGFja2VkKHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZKTtcclxuICAgICAgICB0aGlzLmRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJTdGFja2VkIExheW91dFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgbWF4IHkgdmFsdWUgYWZ0ZXIgbGF5aW5nIG91dCB0aGUgbGFzdCBwYXJ0XHJcbiAgICBmdW5jdGlvbiBsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZChncm91cCwgc3RhcnRYLCBzdGFydFkpIHtcclxuICAgICAgICB2YXIgbWVtYmVycyA9IGdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKTtcclxuICAgICAgICB2YXIgeCA9IHN0YXJ0WDtcclxuICAgICAgICB2YXIgeSA9IHN0YXJ0WTtcclxuICAgICAgICB2YXIgcm93Q291bnQgPSAwO1xyXG4gICAgICAgIHZhciBtYXhTdGFydFkgPSBzdGFydFk7XHJcbiAgICAgICAgXy5lYWNoKG1lbWJlcnMsIGZ1bmN0aW9uKHBhcnQpIHtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiAhcGFydC5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcmdpbiA9IGdldFN0YWNrTWFyZ2luKHBhcnQpO1xyXG4gICAgICAgICAgICAgICAgcGFydC5tb3ZlKG5ldyBnby5Qb2ludCh4LCB5KSk7XHJcbiAgICAgICAgICAgICAgICBzdGFydFkgPSB5ICsgcGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgbWFyZ2luIC8gMjsgLy8gc3RhcnQgWSBwb3NpdGlvbiBmb3IgcGFydCdzIGNoaWxkcmVuXHJcblxyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvclN0YWNrZWQ6IHN0YXJ0aW5nIGxheW91dCBvZiBjaGlsZHJlbiBvZiAnICsgcGFydCArICcgYXQgJyArIE1hdGgucm91bmQoeCkgKyAnLCcgKyBNYXRoLnJvdW5kKHN0YXJ0WSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0LmlzU3ViR3JhcGhFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxheW91dCBjaGlsZHJlbiBvZiB0aGlzIHBhcnQ7IGNoZWNrIGlmIHdlJ3ZlIGFscmVhZHkgZG9uZSBhIHRhbGxlciBwYXJ0K2NoaWxkcmVuIGluIGN1cnJlbnQgcm93XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4U3RhcnRZID0gTWF0aC5tYXgobWF4U3RhcnRZLCBsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZChwYXJ0LCB4LCBzdGFydFkpKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZDogbGFpZCBvdXQgY2hpbGRyZW4gb2YgJyArIHBhcnQgKyAnLCBtYXhTdGFydFkgaXMgbm93ICcgKyBNYXRoLnJvdW5kKG1heFN0YXJ0WSkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhTdGFydFkgPSBNYXRoLm1heChtYXhTdGFydFksIHN0YXJ0WSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZGVjaWRlIHdoZXRoZXIgdG8gd3JhcFxyXG4gICAgICAgICAgICAgICAgcm93Q291bnQrKztcclxuICAgICAgICAgICAgICAgIGlmIChyb3dDb3VudCA8IDIpIHsgLy8ga2VlcCBnb2luZyBvbiB0aGlzIGxpbmVcclxuICAgICAgICAgICAgICAgICAgICB4ICs9IHBhcnQuYWN0dWFsQm91bmRzLndpZHRoICsgbWFyZ2luO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gd3JhcCB0byBuZXh0IGxpbmVcclxuICAgICAgICAgICAgICAgICAgICB4ID0gc3RhcnRYO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgPSBtYXhTdGFydFkgKyBtYXJnaW4gLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd0NvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBtYXhTdGFydFk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBSaWdodEludmVudG9yeUxheW91dCgpIHtcclxuICAgICAgICBnby5MYXlvdXQuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnby5EaWFncmFtLmluaGVyaXQoUmlnaHRJbnZlbnRvcnlMYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG4gICAgUmlnaHRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiUmlnaHRJbnZlbnRvcnlMYXlvdXRcIjtcclxuICAgIH07XHJcblxyXG4gICAgUmlnaHRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xyXG4gICAgICAgIC8vdGhpcy5kaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJJbnZlbnRvcnkgTGF5b3V0XCIpO1xyXG4gICAgICAgIHZhciBzdGFydFggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnggKyB0aGlzLmdyb3VwLmFjdHVhbEJvdW5kcy53aWR0aDtcclxuICAgICAgICB2YXIgc3RhcnRZID0gdGhpcy5ncm91cC5sb2NhdGlvbi55ICsgKHRoaXMuZ3JvdXAucGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgZ2V0SW52ZW50b3J5TWFyZ2luKHRoaXMuZ3JvdXApKTtcclxuICAgICAgICBsYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5KHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZLCAnUicpO1xyXG4gICAgICAgIC8vdGhpcy5kaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBMZWZ0SW52ZW50b3J5TGF5b3V0KCkge1xyXG4gICAgICAgIGdvLkxheW91dC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdvLkRpYWdyYW0uaW5oZXJpdChMZWZ0SW52ZW50b3J5TGF5b3V0LCBnby5MYXlvdXQpO1xyXG5cclxuICAgIExlZnRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiTGVmdEludmVudG9yeUxheW91dFwiO1xyXG4gICAgfTtcclxuXHJcbiAgICBMZWZ0SW52ZW50b3J5TGF5b3V0LnByb3RvdHlwZS5kb0xheW91dCA9IGZ1bmN0aW9uKGNvbGwpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdMZWZ0SW52ZW50b3J5TGF5b3V0LmRvTGF5b3V0LCBncm91cDogJyArIHRoaXMuZ3JvdXAgKyAnLCBsb2NhdGlvbjogJyArIHRoaXMuZ3JvdXAubG9jYXRpb24pO1xyXG4gICAgICAgIC8vIHRoaXMuZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcclxuICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5ncm91cC5sb2NhdGlvbi54O1xyXG4gICAgICAgIHZhciBzdGFydFkgPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnkgKyAodGhpcy5ncm91cC5wYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyBnZXRJbnZlbnRvcnlNYXJnaW4odGhpcy5ncm91cCkpO1xyXG4gICAgICAgIGxheW91dE1lbWJlcnNGb3JJbnZlbnRvcnkodGhpcy5ncm91cCwgc3RhcnRYLCBzdGFydFksICdMJyk7XHJcbiAgICAgICAgLy8gdGhpcy5kaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2hhcmVkIHN0dWZmIGZvciBMZWZ0L1JpZ2h0IEludmVudG9yeSBsYXlvdXRzLi4uXHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgbWF4IHkgdmFsdWUgYWZ0ZXIgbGF5aW5nIG91dCB0aGUgbGFzdCBwYXJ0XHJcbiAgICAvLyBzaWRlIGlzICdMJyBvciAnUidcclxuICAgIGZ1bmN0aW9uIGxheW91dE1lbWJlcnNGb3JJbnZlbnRvcnkoZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZLCBzaWRlKSB7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBnZXRPcmRlcmVkTWVtYmVycyhncm91cCk7XHJcbiAgICAgICAgXy5lYWNoKG1lbWJlcnMsIGZ1bmN0aW9uKHBhcnQpIHtcclxuICAgICAgICAgICAgdmFyIHggPSBzdGFydFg7IC8vIGZvciBsZWZ0LCBqdXN0IHVzZSB4XHJcbiAgICAgICAgICAgIGlmIChzaWRlID09ICdSJylcclxuICAgICAgICAgICAgICAgIHggPSBzdGFydFggLSBwYXJ0LmFjdHVhbEJvdW5kcy53aWR0aDsgLy8gZm9yIHJpZ2h0LCByaWdodC1hbGlnbiBwYXJ0cyB0byBzdGFydFhcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeSwgcGFydDogJyArIHBhcnQgKyAnIHRvIGxvY2F0aW9uOiAnICsgeCArICcsJyArIHN0YXJ0WSk7XHJcbiAgICAgICAgICAgIHBhcnQubW92ZShuZXcgZ28uUG9pbnQoeCwgc3RhcnRZKSk7XHJcbiAgICAgICAgICAgIHN0YXJ0WSArPSBwYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyBnZXRJbnZlbnRvcnlNYXJnaW4ocGFydCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0LmlzU3ViR3JhcGhFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeSwgeSBhZnRlciBtb3Zpbmc6ICcgKyBwYXJ0ICsgJyA9ICcgKyBzdGFydFkpO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRZID0gbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeShwYXJ0LCBzdGFydFgsIHN0YXJ0WSwgc2lkZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gc3RhcnRZICsgZ2V0SW52ZW50b3J5TWFyZ2luKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBncm91cCdzIChub24tUi10aGluZykgbWVtYmVycywgc29ydGVkIGJ5IHRoZSAnb3JkZXInIGRhdGEgcHJvcGVydHlcclxuICAgIGZ1bmN0aW9uIGdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLm1lbWJlclBhcnRzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiAhcGFydC5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocGFydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF8uc29ydEJ5KG1lbWJlcnMudG9BcnJheSgpLCBmdW5jdGlvbihtZW1iZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1lbWJlci5kYXRhLm9yZGVyO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBsaW5rIHJvdXRpbmcgYW5kIHZpc2liaWxpdHkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gYWRqdXN0IHRoZSByb3V0aW5nLCB2aXNpYmlsaXR5IGFuZCBvdGhlciBwcm9wZXJ0aWVzIG9mIGEgbGluayBhY2NvcmRpbmcgdG8gdmFyaW91cyBzdHJ1Y3R1cmFsIGNyaXRlcmlhXHJcbiAgICBmdW5jdGlvbiBhZGp1c3RMaW5rTGF5b3V0KGxpbmspIHtcclxuICAgICAgICBpZiAoIWxpbmsgfHwgIWxpbmsuZnJvbU5vZGUgfHwgIWxpbmsudG9Ob2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHZhciBsb2MgPSBsaW5rLmxvY2F0aW9uO1xyXG4gICAgICAgIC8vIGlmIChpc05hTihsb2MueCkgfHwgaXNOYU4obG9jLnkpKSB7XHJcbiAgICAgICAgLy8gICAgIGxpbmsubG9jYXRpb24gPSBuZXcgZ28uUG9pbnQoMTAsIDEwKTtcclxuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ2FkanVzdExpbmtMYXlvdXQsIGxpbmsubG9jYXRpb246ICcgKyBsaW5rLmxvY2F0aW9uKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2FkanVzdExpbmtMYXlvdXQsIGxpbmsubG9jYXRpb246ICcgKyBsaW5rLmxvY2F0aW9uKTtcclxuXHJcbiAgICAgICAgLy8gc2VlIGlmIGxpbmsgaXMgd2l0aGluIGEgc3RhY2tlZCBvciBpbnZlbnRvcnkgbGF5b3V0LCBvciBpZiBpdCdzIGEgaGlkZGVuIFAgbGlua1xyXG4gICAgICAgIHZhciBpbnZlbnRvcnlBbmNlc3RvciA9IGdldENvbW1vbkFuY2VzdG9yV2l0aExheW91dChsaW5rLmZyb21Ob2RlLCBsaW5rLnRvTm9kZSwgWydsZWZ0JywgJ3JpZ2h0J10pO1xyXG4gICAgICAgIHZhciBzdGFja2VkQW5jZXN0b3IgPSBnZXRDb21tb25BbmNlc3RvcldpdGhMYXlvdXQobGluay5mcm9tTm9kZSwgbGluay50b05vZGUsIFsnc3RhY2tlZCddKTtcclxuICAgICAgICB2YXIgaGlkZVBMaW5rID0gKGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnICYmICFtYXAuZ2V0VGVtcGxhdGVzKCkuc2hvd1BMaW5rKGxpbmspKTtcclxuICAgICAgICB2YXIgY3Jvd2RlZFJUaGluZyA9IGhhc0Nyb3dkZWRSVGhpbmcobGluayk7XHJcblxyXG4gICAgICAgIC8vIHNlZSBpZiB0aGlzIGlzIG9uZSBvZiBtdWx0aXBsZSBsaW5rcyBiZXR3ZWVuIHRoZSBzYW1lIHR3byBub2Rlc1xyXG4gICAgICAgIHZhciBzbnBvcyA9IHNlbGYuZ2V0U2FtZU5vZGVzTGlua1Bvc2l0aW9uKGxpbmspO1xyXG4gICAgICAgIHZhciBpc011bHRpTGluayA9IChzbnBvcy5jb3VudCA+IDEpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NucG9zIGZvciBsaW5rICcgKyBsaW5rICsgJzogJyArIHNucG9zLmluZGV4ICsgJyBvZiAnICsgc25wb3MuY291bnQpO1xyXG5cclxuICAgICAgICBpZiAoaW52ZW50b3J5QW5jZXN0b3IpIHtcclxuICAgICAgICAgICAgYXBwbHlJbnZlbnRvcnlDdXJ2ZVJvdXRpbmcobGluaywgc25wb3MsIGludmVudG9yeUFuY2VzdG9yLmRhdGEubGF5b3V0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlzTXVsdGlMaW5rKSB7XHJcbiAgICAgICAgICAgIGFwcGx5TXVsdGlsaW5rQ3VydmVSb3V0aW5nKGxpbmssIHNucG9zKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNyb3dkZWRSVGhpbmcpIHtcclxuICAgICAgICAgICAgYXBwbHlJbnZlbnRvcnlDdXJ2ZVJvdXRpbmcobGluaywgc25wb3MsICdsZWZ0Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXBwbHlTdHJhaWdodFJvdXRpbmcobGluayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzaG93IGxpbmsgb25seSBpZiBib3RoIGNvbm5lY3RlZCB0aGluZ3MgYXJlIHZpc2libGUgKG5vIGNvbGxhcHNlZCBhbmNlc3RvcnMpOyBcclxuICAgICAgICAvLyBoaWRlIGlmIGJvdGggYXJlIGluIHN0YWNrZWQgbGF5b3V0IG9yIGlmIGl0J3MgYSBQLWxpbmsgdGhhdCB3ZSBzaG91bGRuJ3QgYmUgc2hvd2luZyBub3dcclxuICAgICAgICBpZiAoc2VsZi5mcm9tQW5kVG9Ob2Rlc0FyZVZpc2libGUobGluaykgJiYgIXN0YWNrZWRBbmNlc3RvciAmJiAhaGlkZVBMaW5rKSB7XHJcbiAgICAgICAgICAgIGxpbmsub3BhY2l0eSA9IDE7XHJcbiAgICAgICAgICAgIHNob3dMYWJlbE5vZGVzKGxpbmssIHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxpbmsub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgICAgIHNob3dMYWJlbE5vZGVzKGxpbmssIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzogZGV0ZWN0IHdoZW4gdGhlIFItdGhpbmcgb3ZlcmxhcHMgYm90aCBmcm9tIGFuZCB0byBub2Rlcywgc28gd2UgY2FuIGNoYW5nZSB0aGUgbGluayByb3V0aW5nXHJcbiAgICBmdW5jdGlvbiBoYXNDcm93ZGVkUlRoaW5nKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd0xhYmVsTm9kZXMobGluaywgc2hvdykge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3Nob3dMYWJlbE5vZGVzLCBsaW5rOiAnICsgbGluayArICcsIHNob3c6ICcgKyBzaG93KTtcclxuICAgICAgICB2YXIgaXQgPSBsaW5rLmxhYmVsTm9kZXM7XHJcbiAgICAgICAgaWYgKGl0KSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAudmlzaWJsZSA9IHNob3c7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwLmxheW91dC5kb0xheW91dChncm91cCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgbGluayBpcyBiZXR3ZWVuIHR3byB0aGluZ3MgaW4gdGhlIHNhbWUgaW52ZW50b3J5IGxheW91dCAoc2luZ2xlIG9yIG11bHRpcGxlKSxcclxuICAgIC8vIG1ha2UgdGhlIGxpbmUgbW9yZSBvciBsZXNzIGNpcmN1bGFyIG9uIHRoZSBhcHByb3ByaWF0ZSBzaWRlXHJcbiAgICBmdW5jdGlvbiBhcHBseUludmVudG9yeUN1cnZlUm91dGluZyhsaW5rLCBzbnBvcywgYW5jZXN0b3JMYXlvdXQpIHtcclxuICAgICAgICBpZiAoYW5jZXN0b3JMYXlvdXQgPT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgIGxpbmsuZnJvbVNwb3QgPSBnby5TcG90LkxlZnQ7XHJcbiAgICAgICAgICAgIGxpbmsudG9TcG90ID0gZ28uU3BvdC5MZWZ0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYW5jZXN0b3JMYXlvdXQgPT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICBsaW5rLmZyb21TcG90ID0gZ28uU3BvdC5SaWdodDtcclxuICAgICAgICAgICAgbGluay50b1Nwb3QgPSBnby5TcG90LlJpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYXNwZWN0IHJhdGlvIGZvciB0aGUgbGluayBjdXJ2ZXMgLSBtYWtlIHRoaXMgc21hbGxlciB0byBtYWtlIHRoZW0gdGFsbGVyLCBsYXJnZXIgdG8gbWFrZSB0aGVtIGZhdHRlclxyXG4gICAgICAgIHZhciBjdXJ2ZVJhdGlvID0gMC42O1xyXG5cclxuICAgICAgICB2YXIgeTEgPSBsaW5rLmZyb21Ob2RlLmFjdHVhbEJvdW5kcy55O1xyXG4gICAgICAgIHZhciB5MiA9IGxpbmsudG9Ob2RlLmFjdHVhbEJvdW5kcy55O1xyXG5cclxuICAgICAgICB2YXIgeURpZmYgPSBNYXRoLmFicyh5MiAtIHkxKTtcclxuICAgICAgICB2YXIgYyA9ICh5RGlmZiA9PT0gMCA/IDUwIDogTWF0aC5mbG9vcih5RGlmZiAqIGN1cnZlUmF0aW8pKSArIDEwMCAqIChzbnBvcy5pbmRleCAvIHNucG9zLmNvdW50KTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwieURpZmYgPSBcIiArIHlEaWZmICsgJywgYyA9ICcgKyBjICsgJyAoJyArIGxpbmsuZnJvbU5vZGUuZGF0YS50ZXh0ICsgJyAtICcgKyBwMSArICcgLSB0byAnICsgbGluay50b05vZGUuZGF0YS50ZXh0ICsgJyAtICcgKyBwMiArICcpJyk7XHJcblxyXG4gICAgICAgIGxpbmsuY3VydmUgPSBnby5MaW5rLkJlemllcjtcclxuICAgICAgICBsaW5rLmZyb21FbmRTZWdtZW50TGVuZ3RoID0gYztcclxuICAgICAgICBsaW5rLnRvRW5kU2VnbWVudExlbmd0aCA9IGM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgbm9uLWludmVudG9yeSBsaW5rIGlzIG9uZSBvZiBtdWx0aXBsZSBvbmVzIGJldHdlZW4gc2FtZSBub2RlcywgbWFrZSBpdCBjdXJ2ZWRcclxuICAgIGZ1bmN0aW9uIGFwcGx5TXVsdGlsaW5rQ3VydmVSb3V0aW5nKGxpbmssIHNucG9zKSB7XHJcbiAgICAgICAgbGluay5mcm9tU3BvdCA9IGdvLlNwb3QuRGVmYXVsdDtcclxuICAgICAgICBsaW5rLnRvU3BvdCA9IGdvLlNwb3QuRGVmYXVsdDtcclxuICAgICAgICBsaW5rLmN1cnZlID0gZ28uTGluay5CZXppZXI7XHJcbiAgICAgICAgLy8gY3VydmluZXNzIHZhbHVlcyBiYXNlZCBvbiBudW1iZXIgb2YgbGlua3M6XHJcbiAgICAgICAgLy8gMjogLTI1IDI1XHJcbiAgICAgICAgLy8gMzogLTUwIDAgNTBcclxuICAgICAgICAvLyA0OiAtMTAwIC01MCAwIDUwIDEwMFxyXG4gICAgICAgIHZhciByYW5nZVNpemUgPSAxMCAqIChzbnBvcy5jb3VudCAtIDEpO1xyXG4gICAgICAgIHZhciByYW5nZUluY3JlbWVudCA9IDEwO1xyXG4gICAgICAgIGlmIChzbnBvcy5oYXNSVGhpbmcpIHtcclxuICAgICAgICAgICAgcmFuZ2VTaXplID0gMTAwICogKHNucG9zLmNvdW50IC0gMSk7XHJcbiAgICAgICAgICAgIHJhbmdlSW5jcmVtZW50ID0gMTAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWRqdXN0IGN1cnZpbmVzcyBmb3Igc21hbGxlciBzY2FsZXNcclxuICAgICAgICB2YXIgbGlua1NjYWxlRmFjdG9yID0gc2VsZi5nZXRMaW5rU3Ryb2tlV2lkdGgobGluaykgLyAyOyAvLyAyIGlzIG1heCBzdHJva2Ugd2lkdGhcclxuICAgICAgICByYW5nZVNpemUgKj0gbGlua1NjYWxlRmFjdG9yO1xyXG4gICAgICAgIHJhbmdlSW5jcmVtZW50ICo9IGxpbmtTY2FsZUZhY3RvcjtcclxuXHJcbiAgICAgICAgdmFyIHJhbmdlU3RhcnQgPSAwIC0gcmFuZ2VTaXplIC8gMjtcclxuXHJcbiAgICAgICAgbGluay5jdXJ2aW5lc3MgPSAocmFuZ2VTdGFydCArIHJhbmdlSW5jcmVtZW50ICogc25wb3MuaW5kZXgpICogc25wb3Mub3JpZW50YXRpb247XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2FwcGx5TXVsdGlsaW5rQ3VydmVSb3V0aW5nLCBsaW5rOiAnICsgbGluayArICcsIGN1cnZpbmVzczogJyArIGxpbmsuY3VydmluZXNzKTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gZG8gbm9ybWFsIHN0cmFpZ2h0IGxpbmVzIGZvciBmcmVlaGFuZCBsYXlvdXQsIG9yIGxpbmtzIGJldHdlZW4gZGVzY2VuZGFudHMgb2YgdGhpbmdzIHdpdGggZGlmZmVyZW50IGxheW91dHNcclxuICAgIGZ1bmN0aW9uIGFwcGx5U3RyYWlnaHRSb3V0aW5nKGxpbmspIHtcclxuICAgICAgICBsaW5rLmZyb21TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsudG9TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsucm91dGluZyA9IGdvLkxpbmsuTm9ybWFsO1xyXG4gICAgICAgIGxpbmsuY3VydmUgPSBnby5MaW5rLk5vbmU7XHJcbiAgICAgICAgbGluay5jdXJ2aW5lc3MgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBjYWxjdWxhdGUgaG93IG1hbnkgbGlua3MgdGhlcmUgYXJlIGJldHdlZW4gYSBsaW5rJ3Mgbm9kZXMgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgb2YgdGhlIGZvcm1hdCB7IGluZGV4OiAxLCBjb3VudDogMiwgb3JpZW50YXRpb246IC0xLCBoYXNSVGhpbmc6IGZhbHNlIH0sIFxyXG4gICAgLy8gaW5kaWNhdGluZyBob3cgbWFueSBvdGhlciBsaW5rcyB0aGVyZSBhcmUgYmV0d2VlbiB0aGUgc2FtZSBwYWlyIG9mIG5vZGVzLFxyXG4gICAgLy8gd2hlcmUgdGhlIGdpdmVuIGxpbmsgZmFsbHMgd2l0aGluIHRoaXMgbGlzdCwgYW5kIHdoYXQgaXRzIG9yaWVudGF0aW9uIGlzLlxyXG4gICAgdGhpcy5nZXRTYW1lTm9kZXNMaW5rUG9zaXRpb24gPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgdmFyIGxpbmtzQnlOb2RlcyA9IGdldExpbmtzQnlOb2Rlcyh0cnVlKTtcclxuICAgICAgICAvLyBnZXQgbGlua3Mgd2l0aCB0aGUgc2FtZSBrZXkgYXMgdGhpcyBvbmUgKGNvbm5lY3Rpbmcgc2FtZSBub2RlcylcclxuICAgICAgICB2YXIgc2FtZUxpbmtzID0gXy53aGVyZShsaW5rc0J5Tm9kZXMsIHtcclxuICAgICAgICAgICAga2V5OiBnZXRTYW1lTm9kZXNMaW5rS2V5KGxpbmspXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGRlZmF1bHQgcmV0dXJuIHZhbHVlXHJcbiAgICAgICAgdmFyIHNucG9zID0ge1xyXG4gICAgICAgICAgICBpbmRleDogMCxcclxuICAgICAgICAgICAgY291bnQ6IDEsXHJcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAxLFxyXG4gICAgICAgICAgICBoYXNSVGhpbmc6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBzZXQgaW5kZXgsIGNvdW50LCBvcmllbnRhdGlvblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2FtZUxpbmtzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChzYW1lTGlua3NbaV0ubGluayA9PSBsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICBzbnBvcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaSxcclxuICAgICAgICAgICAgICAgICAgICBjb3VudDogc2FtZUxpbmtzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbjogZ2V0TGlua09yaWVudGF0aW9uKGxpbmspXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNoZWNrIGZvciBSdGhpbmdcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2FtZUxpbmtzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChzYW1lTGlua3NbaV0uaGFzUlRoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBzbnBvcy5oYXNSVGhpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzbnBvcztcclxuICAgIH07XHJcblxyXG4gICAgdmFyIF9saW5rc0J5Tm9kZXMgPSBudWxsO1xyXG5cclxuICAgIC8vIHJlZnJlc2hlcyB0aGUgY2FjaGVkIGxpc3Qgb2YgYWxsIGxpbmtzIHdpdGgga2V5cywgdG8gZmFjaWxpdGF0ZSBncm91cGluZyB0aGVtIGFjY29yZGluZyB0byBjb25uZWN0ZWQgbm9kZXNcclxuICAgIGZ1bmN0aW9uIGdldExpbmtzQnlOb2RlcyhyZWZyZXNoKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0TGlua3NCeU5vZGVzJyk7XHJcbiAgICAgICAgaWYgKCFzZWxmLl9saW5rc0J5Tm9kZXMgfHwgcmVmcmVzaCkge1xyXG4gICAgICAgICAgICBzZWxmLl9saW5rc0J5Tm9kZXMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgbGlua3MgPSBkaWFncmFtLmxpbmtzLml0ZXJhdG9yO1xyXG4gICAgICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGdldFNhbWVOb2Rlc0xpbmtLZXkobGluayk7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbGlua3NCeU5vZGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluazogbGluayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzUlRoaW5nOiAobGluay5sYWJlbE5vZGVzLmNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2VsZi5fbGlua3NCeU5vZGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgYSBrZXkgdXNlZCB0byBncm91cCBsaW5rcyBhY2NvcmRpbmcgdG8gd2hpY2ggcGFpciBvZiBub2RlcyB0aGV5IGNvbm5lY3QuXHJcbiAgICAvLyBUaGUgcmV0dXJuZWQga2V5IGlzIG5vbi1lbXB0eSBmb3IgcmVndWxhciBsaW5rcyBhbmQgUCBsaW5rcyB0aGF0IHNob3VsZCBiZSBzaG93biBjdXJyZW50bHksXHJcbiAgICAvLyBzbyB0aGF0IHRoZXNlIHdpbGwgYWxsIGJlIHJvdXRlZCBieSB0aGUgc2FtZSBydWxlcy4gQSBudWxsIGtleSBpcyByZXR1cm5lZCBmb3IgYW55IG90aGVyIFxyXG4gICAgLy8gbGlua3MsIGluZGljYXRpbmcgdGhhdCBubyBncm91cGluZyBpcyByZXF1aXJlZC5cclxuICAgIGZ1bmN0aW9uIGdldFNhbWVOb2Rlc0xpbmtLZXkobGluaykge1xyXG4gICAgICAgIC8vICAgICAgICBpZiAoc2VsZi5pc1JMaW5rKGxpbmspIHx8IChzZWxmLmlzUExpbmsobGluaykgJiYgbWFwLmdldFRlbXBsYXRlcygpLnNob3dQTGluayhsaW5rKSkpIHtcclxuICAgICAgICBpZiAoc2VsZi5pc1JMaW5rKGxpbmspKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBbbGluay5mcm9tTm9kZS50b1N0cmluZygpLCBsaW5rLnRvTm9kZS50b1N0cmluZygpXS5zb3J0KCkuam9pbignfCcpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdrZXk6ICcgKyBrZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBXZSB1c2UgdGhpcyB0byBkaXN0aW5ndWlzaCBhbiBBLUIgbGluayBmcm9tIGEgQi1BIGxpbmsgKGJhc2VkIG9uIGZyb21Ob2RlIGFuZCB0b05vZGUsIHdoaWNoXHJcbiAgICAvLyBpcyBpbmRlcGVuZGVudCBvZiB0aGUgYXJyb3doZWFkIHNldHRpbmdzKSB3aGVuIHNldHRpbmcgY3VydmluZXNzLCBiZWNhdXNlIHNldHRpbmcgY3VydmluZXNzID0gMjVcclxuICAgIC8vIG9uIGFuIEEtQiBsaW5rIGlzIHRoZSBzYW1lIGFzIGN1cnZpbmVzcyA9IC0yNSBvbiBhIEItQSBsaW5rLlxyXG4gICAgZnVuY3Rpb24gZ2V0TGlua09yaWVudGF0aW9uKGxpbmspIHtcclxuICAgICAgICBpZiAobGluay5mcm9tTm9kZSAmJiBsaW5rLnRvTm9kZSAmJiBsaW5rLmZyb21Ob2RlLnRvU3RyaW5nKCkgPCBsaW5rLnRvTm9kZS50b1N0cmluZygpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gbGluayB0ZXN0cyAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmlzUkxpbmsgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT09IHVuZGVmaW5lZCAmJiBsaW5rLmZyb21Ob2RlICYmIGxpbmsudG9Ob2RlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzRExpbmsgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ0QnO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzUExpbmsgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzR3JvdXAgPSBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgZ28uR3JvdXA7XHJcbiAgICB9O1xyXG59OyIsIi8vIGZ1bmN0aW9ucyBmb3IgY3JlYXRpbmcgYW5kIG1hbmlwdWxhdGluZyB0aGUgbWFwIChpLmUuIERpYWdyYW0pXHJcblxyXG5TYW5kYmFua0VkaXRvci5NYXAgPSBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkcmVzb3VyY2UsICR0aW1lb3V0LCAkbW9kYWwsICRsb2cpIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0gY29uc3RhbnRzIC0tLS0tLS0tLS0tLS0tLVxyXG4gICAgdGhpcy5MRUZUID0gJ2xlZnQnO1xyXG4gICAgdGhpcy5SSUdIVCA9ICdyaWdodCc7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIGluc3RhbmNlIHZhcnMgLS0tLS0tLS0tLVxyXG5cclxuICAgIHZhciBfZGlhZ3JhbSA9IG51bGw7XHJcblxyXG4gICAgLy8gY29tcG9uZW50c1xyXG4gICAgdmFyIF9hbmFseXRpY3MgPSBudWxsO1xyXG4gICAgdmFyIF9hdHRhY2htZW50cyA9IG51bGw7XHJcbiAgICB2YXIgX2F1dG9zYXZlID0gbnVsbDtcclxuICAgIHZhciBfZ2VuZXJhdG9yID0gbnVsbDtcclxuICAgIC8vdmFyIF9oaXN0b3J5ID0gbnVsbDtcclxuICAgIHZhciBfbGF5b3V0cyA9IG51bGw7XHJcbiAgICB2YXIgX3BlcnNwZWN0aXZlcyA9IG51bGw7XHJcbiAgICB2YXIgX3ByZXNlbnRlciA9IG51bGw7XHJcbiAgICB2YXIgX3N0YW5kYXJkcyA9IG51bGw7XHJcbiAgICB2YXIgX3RlbXBsYXRlcyA9IG51bGw7XHJcbiAgICB2YXIgX3Rlc3RzID0gbnVsbDtcclxuICAgIHZhciBfdWkgPSBudWxsO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBjb21wb25lbnQgYWNjZXNzb3JzIC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDb21wb25lbnRzKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIF9hbmFseXRpY3MsXHJcbiAgICAgICAgICAgIF9hdHRhY2htZW50cyxcclxuICAgICAgICAgICAgX2F1dG9zYXZlLFxyXG4gICAgICAgICAgICBfZ2VuZXJhdG9yLFxyXG4gICAgICAgICAgICAvLyBfaGlzdG9yeSwgXHJcbiAgICAgICAgICAgIF9sYXlvdXRzLFxyXG4gICAgICAgICAgICBfcGVyc3BlY3RpdmVzLFxyXG4gICAgICAgICAgICBfcHJlc2VudGVyLFxyXG4gICAgICAgICAgICBfc3RhbmRhcmRzLFxyXG4gICAgICAgICAgICBfdGVtcGxhdGVzLFxyXG4gICAgICAgICAgICBfdGVzdHMsXHJcbiAgICAgICAgICAgIF91aVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5nZXRBbmFseXRpY3MgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX2FuYWx5dGljcztcclxuICAgIH07XHJcbiAgICB0aGlzLmdldEF0dGFjaG1lbnRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9hdHRhY2htZW50cztcclxuICAgIH07XHJcbiAgICB0aGlzLmdldEF1dG9zYXZlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9hdXRvc2F2ZTtcclxuICAgIH07XHJcbiAgICB0aGlzLmdldEdlbmVyYXRvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfZ2VuZXJhdG9yO1xyXG4gICAgfTtcclxuICAgIC8vIHRoaXMuZ2V0SGlzdG9yeSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9oaXN0b3J5OyB9O1xyXG4gICAgdGhpcy5nZXRMYXlvdXRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9sYXlvdXRzO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZ2V0UGVyc3BlY3RpdmVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9wZXJzcGVjdGl2ZXM7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5nZXRQcmVzZW50ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX3ByZXNlbnRlcjtcclxuICAgIH07XHJcbiAgICB0aGlzLmdldFN0YW5kYXJkcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfc3RhbmRhcmRzO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZ2V0VGVtcGxhdGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF90ZW1wbGF0ZXM7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5nZXRUZXN0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfdGVzdHM7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5nZXRVaSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfdWk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIG1hcCBpbml0IC0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAvLyBpbml0aWFsaXplIGNvbXBvbmVudHNcclxuICAgICAgICBfYW5hbHl0aWNzID0gbmV3IFNhbmRiYW5rRWRpdG9yLkFuYWx5dGljcygkc2NvcGUsICRodHRwLCBzZWxmKTtcclxuICAgICAgICBfYXR0YWNobWVudHMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuQXR0YWNobWVudHMoJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCBzZWxmKTtcclxuICAgICAgICBfYXV0b3NhdmUgPSBuZXcgU2FuZGJhbmtFZGl0b3IuQXV0b3NhdmUoJHNjb3BlLCAkaHR0cCwgc2VsZik7XHJcbiAgICAgICAgX2dlbmVyYXRvciA9IG5ldyBTYW5kYmFua0VkaXRvci5HZW5lcmF0b3IoJHNjb3BlLCBzZWxmKTtcclxuICAgICAgICAvLyBfaGlzdG9yeSA9IG5ldyBTYW5kYmFua0VkaXRvci5IaXN0b3J5KCRzY29wZSwgJGh0dHAsIHNlbGYpO1xyXG4gICAgICAgIF9sYXlvdXRzID0gbmV3IFNhbmRiYW5rRWRpdG9yLkxheW91dHMoJHNjb3BlLCBzZWxmKTtcclxuICAgICAgICBfcGVyc3BlY3RpdmVzID0gbmV3IFNhbmRiYW5rRWRpdG9yLlBlcnNwZWN0aXZlcygkc2NvcGUsIHNlbGYpO1xyXG4gICAgICAgIF9wcmVzZW50ZXIgPSBuZXcgU2FuZGJhbmtFZGl0b3IuUHJlc2VudGVyKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgX3N0YW5kYXJkcyA9IG5ldyBTYW5kYmFua0VkaXRvci5TdGFuZGFyZHMoJHNjb3BlLCBzZWxmKTtcclxuICAgICAgICBfdGVtcGxhdGVzID0gbmV3IFNhbmRiYW5rRWRpdG9yLlRlbXBsYXRlcygkc2NvcGUsIHNlbGYpO1xyXG4gICAgICAgIF90ZXN0cyA9IG5ldyBTYW5kYmFua0VkaXRvci5UZXN0cygkc2NvcGUsIHNlbGYpO1xyXG4gICAgICAgIF91aSA9IG5ldyBTYW5kYmFua0VkaXRvci5VSSgkc2NvcGUsICR0aW1lb3V0LCAkaHR0cCwgJHJlc291cmNlLCAkbW9kYWwsICRsb2csIHNlbGYpO1xyXG5cclxuICAgICAgICAvLyBjYWxsIGluaXQgZm9yIGVhY2ggY29tcG9uZW50LCBpZiBkZWZpbmVkXHJcbiAgICAgICAgXy5lYWNoKGdldENvbXBvbmVudHMoKSwgZnVuY3Rpb24oY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50LmluaXQpXHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuaW5pdCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBjcmVhdGUgZGlhZ3JhbVxyXG4gICAgICAgIF9kaWFncmFtID0gbmV3IGdvLkRpYWdyYW0oXCJkaWFncmFtXCIpO1xyXG4gICAgICAgIF9kaWFncmFtLmluaXRpYWxDb250ZW50QWxpZ25tZW50ID0gZ28uU3BvdC5DZW50ZXI7XHJcbiAgICAgICAgX2RpYWdyYW0uaW5pdGlhbFZpZXdwb3J0U3BvdCA9IGdvLlNwb3QuQ2VudGVyO1xyXG4gICAgICAgIF9kaWFncmFtLmluaXRpYWxEb2N1bWVudFNwb3QgPSBnby5TcG90LkNlbnRlcjtcclxuICAgICAgICBfZGlhZ3JhbS5oYXNIb3Jpem9udGFsU2Nyb2xsYmFyID0gZmFsc2U7XHJcbiAgICAgICAgX2RpYWdyYW0uaGFzVmVydGljYWxTY3JvbGxiYXIgPSBmYWxzZTtcclxuICAgICAgICBfZGlhZ3JhbS5wYWRkaW5nID0gNTAwO1xyXG4gICAgICAgIF9kaWFncmFtLmxheW91dCA9IF9sYXlvdXRzLmdldEZyZWVoYW5kRGlhZ3JhbUxheW91dCgpO1xyXG5cclxuICAgICAgICBpbml0VG9vbHMoKTtcclxuICAgICAgICBfdGVtcGxhdGVzLmluaXRUZW1wbGF0ZXMoX2RpYWdyYW0pOyAvLyBzZXQgdXAgdGVtcGxhdGVzLCBjdXN0b21pemUgdGVtcG9yYXJ5IGxpbmsgYmVoYXZpb3IgXHJcbiAgICAgICAgYWRkRGlhZ3JhbUxpc3RlbmVycygpO1xyXG5cclxuICAgICAgICBfdGVtcGxhdGVzLmFkZEV4cG9ydEZvb3RlcigpO1xyXG5cclxuICAgICAgICAvLyB3YXRjaCBmb3IgdGFiIGNoYW5nZXNcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdjdXJyZW50VGFiJywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gdGhpcyBpcyBjYWxsZWQgYnkgYSAkc2NvcGUuJHdhdGNoIGluIGluaXQoKVxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjdXJyZW50VGFiQ2hhbmdlZCwgbmV3VmFsdWU6ICcgKyBuZXdWYWx1ZSArICcsIG9sZFZhbHVlOiAnICsgb2xkVmFsdWUpO1xyXG4gICAgICAgIC8vIG5vdGlmeSBhbnkgaW50ZXJlc3RlZCBjb21wb25lbnRzXHJcbiAgICAgICAgXy5lYWNoKGdldENvbXBvbmVudHMoKSwgZnVuY3Rpb24oY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50LmN1cnJlbnRUYWJDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyRzY29wZS5zYWZlQXBwbHkoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXREaWFncmFtID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9kaWFncmFtO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBtaXNjLiB0b29sIGNvbmZpZ3VyYXRpb25cclxuICAgIGZ1bmN0aW9uIGluaXRUb29scygpIHtcclxuICAgICAgICAvLyBkaXNhYmxlIGNsaWNraW5nIG9uIFRleHRCbG9ja3MgdG8gZWRpdCAtIHdlIHdpbGwgaW52b2tlIGVkaXRpbmcgaW4gb3RoZXIgd2F5c1xyXG4gICAgICAgIF9kaWFncmFtLmFsbG93VGV4dEVkaXQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gc2VsZWN0IHRleHQgd2hlbiBhY3RpdmF0aW5nIGVkaXRvcjsgXHJcbiAgICAgICAgLy8gdXNlIHNoaWZ0LWVudGVyIHRvIGNyZWF0ZSBuZXcgbGluZXMsIGVudGVyIHRvIGZpbmlzaCBlZGl0aW5nIChOQjogZWRpdG9yIGhhcyBtdWx0aWxpbmU9dHJ1ZSlcclxuICAgICAgICB2YXIgdGV4dFRvb2wgPSBfZGlhZ3JhbS50b29sTWFuYWdlci50ZXh0RWRpdGluZ1Rvb2w7XHJcbiAgICAgICAgdGV4dFRvb2wuZG9BY3RpdmF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBnby5UZXh0RWRpdGluZ1Rvb2wucHJvdG90eXBlLmRvQWN0aXZhdGUuY2FsbCh0ZXh0VG9vbCk7XHJcbiAgICAgICAgICAgIGlmICh0ZXh0VG9vbC5kZWZhdWx0VGV4dEVkaXRvciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGV4dFRvb2wuZGVmYXVsdFRleHRFZGl0b3Iuc2VsZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGV4dFRvb2wuZGVmYXVsdFRleHRFZGl0b3IuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLndoaWNoID09IDEzICYmICFlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvLlRleHRFZGl0aW5nVG9vbC5wcm90b3R5cGUuYWNjZXB0VGV4dC5jYWxsKHRleHRUb29sLCBnby5UZXh0RWRpdGluZ1Rvb2wuTG9zdEZvY3VzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGhhbmRsZSBkZWxldGUga2V5IG9uIE1hYyAoZGVmYXVsdCBiZWhhdmlvciBvbmx5IHVzZXMgZm4tRGVsZXRlIHRvIGRlbGV0ZSBmcm9tIGNhbnZhcylcclxuICAgICAgICBfZGlhZ3JhbS5jb21tYW5kSGFuZGxlci5kb0tleURvd24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGUgPSBfZGlhZ3JhbS5sYXN0SW5wdXQ7XHJcbiAgICAgICAgICAgIHZhciBjbWQgPSBfZGlhZ3JhbS5jb21tYW5kSGFuZGxlcjtcclxuICAgICAgICAgICAgaWYgKGUuZXZlbnQud2hpY2ggPT09IDgpIHtcclxuICAgICAgICAgICAgICAgIGNtZC5kZWxldGVTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdvLkNvbW1hbmRIYW5kbGVyLnByb3RvdHlwZS5kb0tleURvd24uY2FsbChjbWQpOyAvLyBjYWxsIGJhc2UgbWV0aG9kIHdpdGggbm8gYXJndW1lbnRzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBbZGlzYWJsZSBrZXlib2FyZCBzaG9ydGN1dHMsIGFzIHRoZXNlIGRvIG5vdCBkbyBjZW50ZXJpbmcgb24gem9vbSwgXHJcbiAgICAgICAgLy8gYW5kIGNhbiBsZWFkIHRvIGNvbmZ1c2lvbiB3aXRoIGJyb3dzZXIgem9vbSAod2hpY2ggZ2V0cyBmaXJlZCBkZXBlbmRzIG9uIGZvY3VzKV1cclxuICAgICAgICAvLyAtIHR1cm5lZCBiYWNrIG9uIHRvIHN1cHBvcnQgcGluY2gvem9vbSBvbiBpUGFkXHJcbiAgICAgICAgX2RpYWdyYW0uYWxsb3dab29tID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgX2RpYWdyYW0udG9vbE1hbmFnZXIubW91c2VXaGVlbEJlaGF2aW9yID0gZ28uVG9vbE1hbmFnZXIuV2hlZWxab29tO1xyXG5cclxuICAgICAgICAvLyBkZWNpZGUgd2hhdCBraW5kcyBvZiBQYXJ0cyBjYW4gYmUgYWRkZWQgdG8gYSBHcm91cCBvciB0byB0b3AtbGV2ZWxcclxuICAgICAgICAvLyBfZGlhZ3JhbS5jb21tYW5kSGFuZGxlci5tZW1iZXJWYWxpZGF0aW9uID0gZnVuY3Rpb24gKGdycCwgbm9kZSkge1xyXG4gICAgICAgIC8vICAgICAvL2lmIChncnAgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiBub2RlIGluc3RhbmNlb2YgZ28uR3JvdXApIHJldHVybiBmYWxzZTsgIC8vIGNhbm5vdCBhZGQgR3JvdXBzIHRvIEdyb3Vwc1xyXG4gICAgICAgIC8vICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAvLyB9O1xyXG5cclxuICAgICAgICAvLyBkZWZhdWx0IGxpbmsgYXR0cmlidXRlc1xyXG4gICAgICAgIF9kaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sLmFyY2hldHlwZUxpbmtEYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnbm9BcnJvd3MnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gYWxsb3cgZG91YmxlLWNsaWNrIGluIGJhY2tncm91bmQgdG8gY3JlYXRlIGEgbmV3IG5vZGVcclxuICAgICAgICBfZGlhZ3JhbS50b29sTWFuYWdlci5jbGlja0NyZWF0aW5nVG9vbC5hcmNoZXR5cGVOb2RlRGF0YSA9IGdldE5ld1RoaW5nRGF0YSgpO1xyXG5cclxuICAgICAgICAvLyBob3cgbG9uZyBtb3VzZSBtdXN0IGJlIGhlbGQgc3RhdGlvbmFyeSBiZWZvcmUgc3RhcnRpbmcgYSBkcmFnLXNlbGVjdCAoaW5zdGVhZCBvZiBhIHNjcm9sbCkgLSBkZWZhdWx0IHdhcyAxNzVtc1xyXG4gICAgICAgIF9kaWFncmFtLnRvb2xNYW5hZ2VyLmRyYWdTZWxlY3RpbmdUb29sLmRlbGF5ID0gNDAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIGhhbmRsaW5nIG9mIERpYWdyYW1FdmVudHMgLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGREaWFncmFtTGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgICAvLyBEaWFncmFtRXZlbnRzIHRvIGJlIGhhbmRsZWQgaGVyZSBvciBieSBhIGNvbXBvbmVudFxyXG4gICAgICAgIHZhciBkaWFncmFtRXZlbnRzID0gW1xyXG4gICAgICAgICAgICBcIkluaXRpYWxMYXlvdXRDb21wbGV0ZWRcIixcclxuICAgICAgICAgICAgXCJDaGFuZ2VkU2VsZWN0aW9uXCIsXHJcbiAgICAgICAgICAgIFwiQmFja2dyb3VuZFNpbmdsZUNsaWNrZWRcIixcclxuICAgICAgICAgICAgXCJTZWxlY3Rpb25Db3BpZWRcIixcclxuICAgICAgICAgICAgXCJTZWxlY3Rpb25Nb3ZlZFwiLFxyXG4gICAgICAgICAgICBcIlNlbGVjdGlvbkRlbGV0aW5nXCIsXHJcbiAgICAgICAgICAgIFwiU2VsZWN0aW9uRGVsZXRlZFwiLFxyXG4gICAgICAgICAgICBcIlBhcnRDcmVhdGVkXCIsXHJcbiAgICAgICAgICAgIFwiUGFydFJlc2l6ZWRcIixcclxuICAgICAgICAgICAgXCJDbGlwYm9hcmRDaGFuZ2VkXCIsXHJcbiAgICAgICAgICAgIFwiQ2xpcGJvYXJkUGFzdGVkXCIsXHJcbiAgICAgICAgICAgIFwiTGlua0RyYXduXCIsXHJcbiAgICAgICAgICAgIFwiTGlua1JlbGlua2VkXCIsXHJcbiAgICAgICAgICAgIFwiVmlld3BvcnRCb3VuZHNDaGFuZ2VkXCJcclxuICAgICAgICBdO1xyXG4gICAgICAgIF8uZWFjaChkaWFncmFtRXZlbnRzLCBmdW5jdGlvbihldmVudE5hbWUpIHtcclxuICAgICAgICAgICAgX2RpYWdyYW0uYWRkRGlhZ3JhbUxpc3RlbmVyKGV2ZW50TmFtZSwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgYnJvYWRjYXN0RGlhZ3JhbUV2ZW50KGV2ZW50TmFtZSwgZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBfZGlhZ3JhbS5hZGREaWFncmFtTGlzdGVuZXIoXCJCYWNrZ3JvdW5kQ29udGV4dENsaWNrZWRcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiB0dXJuIG9mZiBpbiBwcm9kdWN0aW9uXHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2RpYWdyYW0gbW9kZWw6JyArIF9kaWFncmFtLm1vZGVsLnRvSnNvbigpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBicm9hZGNhc3RzIHRoZSBnaXZlbiBEaWFncmFtRXZlbnQgKHNlZSBhcGlkb2NzIGZvciBnby5EaWFncmFtRXZlbnQpXHJcbiAgICAvLyB0byBhbnkgY29tcG9uZW50cyB0aGF0IG1heSBiZSBpbnRlcmVzdGVkLCBpbmNsdWRpbmcgdGhpcyBvbmUuXHJcbiAgICBmdW5jdGlvbiBicm9hZGNhc3REaWFncmFtRXZlbnQoZXZlbnROYW1lLCBlKSB7XHJcbiAgICAgICAgc2VsZi5oYW5kbGVEaWFncmFtRXZlbnQoZXZlbnROYW1lLCBlKTtcclxuICAgICAgICBfLmVhY2goZ2V0Q29tcG9uZW50cygpLCBmdW5jdGlvbihjb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQuaGFuZGxlRGlhZ3JhbUV2ZW50KVxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50LmhhbmRsZURpYWdyYW1FdmVudChldmVudE5hbWUsIGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2hhbmRsZURpYWdyYW1FdmVudDogJyArIGV2ZW50TmFtZSk7XHJcbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PSAnQ2hhbmdlZFNlbGVjdGlvbicpIHtcclxuICAgICAgICAgICAgY2hhbmdlZFNlbGVjdGlvbihlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnU2VsZWN0aW9uQ29waWVkJykge1xyXG4gICAgICAgICAgICBzZWxlY3Rpb25Db3BpZWQoZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1BhcnRDcmVhdGVkJykge1xyXG4gICAgICAgICAgICBwYXJ0Q3JlYXRlZChlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnQmFja2dyb3VuZFNpbmdsZUNsaWNrZWQnKSB7XHJcbiAgICAgICAgICAgIF91aS5zaG93SGVscFRpcCgnY2FudmFzVGlwJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ0xpbmtEcmF3bicpIHtcclxuICAgICAgICAgICAgbGlua0RyYXduKGUpO1xyXG4gICAgICAgICAgICBzZXROZXdMaW5rRGlyZWN0aW9uKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdMaW5rUmVsaW5rZWQnKSB7XHJcbiAgICAgICAgICAgIGxpbmtSZWxpbmtlZChlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnQ2xpcGJvYXJkQ2hhbmdlZCcpIHtcclxuICAgICAgICAgICAgY2xpcGJvYXJkQ2hhbmdlZChlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnQ2xpcGJvYXJkUGFzdGVkJykge1xyXG4gICAgICAgICAgICBjbGlwYm9hcmRQYXN0ZWQoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBoYW5kbGUgem9vbSB0byByZWdpb24gaWYgYXBwbGljYWJsZVxyXG4gICAgZnVuY3Rpb24gY2hhbmdlZFNlbGVjdGlvbihlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnbWFwLmNoYW5nZWRTZWxlY3Rpb24nKTtcclxuICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIF91aS5tYXliZVpvb21Ub1JlZ2lvbigpO1xyXG4gICAgICAgIGlmIChzZWxmLnJlbGF0aW9uc2hpcHNTZWxlY3RlZCgpKSB7XHJcbiAgICAgICAgICAgIF91aS5zaG93SGVscFRpcCgncmVsYXRpb25zaGlwVGlwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBhcnRDcmVhdGVkKGUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdNYXAsIFBhcnRDcmVhdGVkJyk7XHJcbiAgICAgICAgdmFyIGdyb3VwID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGlmICghKGdyb3VwIGluc3RhbmNlb2YgZ28uR3JvdXApKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsYXlvdXQnLCBfdWkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLmRlZmF1bHRUaGluZ0xheW91dCB8fCAnbGVmdCcpO1xyXG4gICAgICAgIF9sYXlvdXRzLnNldE5ld1BhcnRMb2NhdGlvbkRhdGEoZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZml4IGxpbmsgcG9ydHMgd2hlbiBhIGxpbmsgaXMgY3JlYXRlZCAtIFxyXG4gICAgLy8gdGhlIFAgYW5kIFIgcG9ydHMgYm90aCBjb3ZlciB0aGUgd2hvbGUgbm9kZSwgYW5kIHRoZSBQIHBvcnQgaXMgb24gdG9wIG9mIHRoZSBSIHBvcnQsIFxyXG4gICAgLy8gc28gYm90aCBQIGFuZCBSIGxpbmtzIGdldCB0aGUgdG9Qb3J0IHNldCB0byBQIGJ5IGRlZmF1bHQuXHJcbiAgICBmdW5jdGlvbiBsaW5rRHJhd24oZSkge1xyXG4gICAgICAgIHZhciBsaW5rID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdsaW5rRHJhd24sIGxpbms6ICcgKyBsaW5rICsgJywgZnJvbVBvcnQ6ICcgKyBsaW5rLmZyb21Qb3J0SWQgKyAnLCB0b1BvcnQ6ICcgKyBsaW5rLnRvUG9ydElkKTtcclxuICAgICAgICBpZiAobGluay5mcm9tUG9ydElkID09ICdQJykge1xyXG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgY2F0ZWdvcnlcIik7XHJcbiAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShsaW5rLmRhdGEsICd0b1BvcnQnLCAnUCcpO1xyXG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAnY2F0ZWdvcnknLCAnUCcpO1xyXG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIGNhdGVnb3J5XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwcmV2ZW50IGxpbmtzIGZyb20gUiB0byBQXHJcbiAgICAgICAgZWxzZSBpZiAobGluay5mcm9tUG9ydElkID09ICdSJykge1xyXG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgdG9Qb3J0XCIpO1xyXG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndG9Qb3J0JywgJ1InKTtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayB0b1BvcnRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGZpeCBsaW5rIHBvcnRzIHdoZW4gYSBsaW5rIGlzIHJlbGlua2VkIC0gXHJcbiAgICAvLyBkcmFnZ2luZyBlaXRoZXIgZW5kIG9mIGFuIFItbGluayB0byBhbm90aGVyIG5vZGUgd2lsbCBzZXQgdGhlIGNvcnJlc3BvbmRpbmcgcG9ydCB0byBQLCBcclxuICAgIC8vIHNpbmNlIFAgcG9ydCBpcyBvbiB0b3Agb2YgUiBwb3J0LCBzbyB3ZSByZXNldCBib3RoIHBvcnRzIHRvIFIgaWYgdGhlIGNhdGVnb3J5IGlzIG5vdCBQLlxyXG4gICAgZnVuY3Rpb24gbGlua1JlbGlua2VkKGUpIHtcclxuICAgICAgICB2YXIgbGluayA9IGUuc3ViamVjdDtcclxuICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09PSB1bmRlZmluZWQgfHwgbGluay5kYXRhLmNhdGVnb3J5ICE9PSAnUCcpIHtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ2Zyb21Qb3J0JywgJ1InKTtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ3RvUG9ydCcsICdSJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldE5ld0xpbmtEaXJlY3Rpb24oZSkge1xyXG4gICAgICAgIHZhciBsaW5rID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGlmIChsaW5rLmZyb21Qb3J0SWQgPT0gJ1InKSB7XHJcbiAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayBkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShsaW5rLmRhdGEsICd0eXBlJywgX3VpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5kZWZhdWx0UmVsYXRpb25zaGlwRGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgX2RpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayBkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsaXBib2FyZENoYW5nZWQoZSkge1xyXG4gICAgICAgIHZhciBwYXJ0cyA9IGUuc3ViamVjdC5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGlwYm9hcmRDaGFuZ2VkOiBwYXJ0ICcgKyBwYXJ0ICsgJywgbWFpbnBhbmVsIHNjYWxlOiAnICsgcGFydC5maW5kT2JqZWN0KCdtYWlucGFuZWwnKS5zY2FsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTkI6IHRoaXMgaXMgY2FsbGVkIHdoZW4gcGFydHMgYXJlIGNvcGllZCBieSBjb250cm9sLWRyYWcsIE5PVCB3aGVuIHRoZSBjb3B5IGJ1dHRvbiBpcyBjbGlja2VkXHJcbiAgICBmdW5jdGlvbiBzZWxlY3Rpb25Db3BpZWQoZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3Rpb25Db3BpZWQnKTtcclxuICAgICAgICB2YXIgcGFydHMgPSBlLnN1YmplY3QuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKHBhcnRzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmIHBhcnQuaXNUb3BMZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvYyA9IGdvLlBvaW50LnBhcnNlKHBhcnQuZGF0YS5sb2MpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGlvbkNvcGllZDogdXBkYXRpbmcgbG9jIG9mIHBhcnQgJyArIHBhcnQgKyAnID0gJyArIGxvYyArICcsIHNjYWxlOiAnICsgcGFydC5zY2FsZSk7XHJcbiAgICAgICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbG9jJywgKGxvYy54ICsgNTApICsgJyAnICsgKGxvYy55ICsgNTApKTtcclxuICAgICAgICAgICAgICAgIHBhcnQudXBkYXRlVGFyZ2V0QmluZGluZ3MoJ2xvYycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsaXBib2FyZFBhc3RlZChlKSB7XHJcbiAgICAgICAgdmFyIHBhcnRzID0gZS5zdWJqZWN0Lml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChwYXJ0cy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSBwYXJ0cy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiBwYXJ0LmlzVG9wTGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsb2MgPSBnby5Qb2ludC5wYXJzZShwYXJ0LmRhdGEubG9jKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NsaXBib2FyZFBhc3RlZDogdXBkYXRpbmcgbG9jIG9mIHBhcnQgJyArIHBhcnQgKyAnID0gJyArIGxvYyArICcsIHNjYWxlOiAnICsgcGFydC5zY2FsZSk7XHJcbiAgICAgICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbG9jJywgKGxvYy54ICsgNTApICsgJyAnICsgKGxvYy55ICsgNTApKTtcclxuICAgICAgICAgICAgICAgIHBhcnQudXBkYXRlVGFyZ2V0QmluZGluZ3MoJ2xvYycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvbXB1dGVzIHRoZSBib3VuZHMgb2YgYWxsIGdyb3VwcyBpbiB0aGUgZGlhZ3JhbSAtIHRoaXMgaW5jbHVkZXMgYWxsIGlkZWFzL3RoaW5ncywgXHJcbiAgICAvLyBhbmQgZXhjbHVkZXMgbm9kZXMsIGluY2x1ZGluZyBzbGlkZXMsIHRoZSBzbGlkZSBibG9ja2VyLCBhbmQgdGhlIGV4cG9ydCBmb290ZXJcclxuICAgIHRoaXMuY29tcHV0ZU1hcEJvdW5kcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBncm91cHMgPSBuZXcgZ28uTGlzdChnby5Hcm91cCk7XHJcbiAgICAgICAgdmFyIG5vZGVzID0gX2RpYWdyYW0ubm9kZXM7XHJcbiAgICAgICAgd2hpbGUgKG5vZGVzLm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAobm9kZXMudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBzLmFkZChub2Rlcy52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9kaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhncm91cHMpLmNvcHkoKTsgLy8gcmV0dXJuIGEgbXV0YWJsZSByZWN0XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSB3aGF0IGlzIGN1cnJlbnRseSBzZWxlY3RlZD8gLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHJldHVybnMgdHJ1ZSBpZiBhbGwgc2VsZWN0ZWQgaXRlbXMgYXJlIHRoaW5ncyAoaS5lLiBHcm91cHMpLCBpbmNsdWRpbmcgci10aGluZ3NcclxuICAgIHRoaXMudGhpbmdzU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoX2RpYWdyYW0gPT0gbnVsbCB8fCBfZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciBpdCA9IF9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgdHJ1ZSBpZiBleGFjdGx5IG9uZSB0aGluZyAoR3JvdXApIGlzIHNlbGVjdGVkXHJcbiAgICB0aGlzLnRoaW5nU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX2RpYWdyYW0gIT09IG51bGwgJiYgX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50ID09IDEgJiYgX2RpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCkgaW5zdGFuY2VvZiBnby5Hcm91cDtcclxuICAgIH07XHJcblxyXG4gICAgLy8gaWYgYSBzaW5nbGUgZ3JvdXAgaXMgc2VsZWN0ZWQsIHJldHVybnMgaXQsIG90aGVyd2lzZSByZXR1cm5zIG51bGxcclxuICAgIHRoaXMuZ2V0VW5pcXVlVGhpbmdTZWxlY3RlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChfZGlhZ3JhbSAhPT0gbnVsbCAmJiBfZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPT0gMSAmJiBfZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKSBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudGhpbmdzU2VsZWN0ZWRBcmVNZW1iZXJzT2YgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIGlmIChfZGlhZ3JhbSA9PT0gbnVsbCB8fCBfZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciBpdCA9IF9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHx8IGl0LnZhbHVlLmNvbnRhaW5pbmdHcm91cCAhPSBncm91cClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRoaW5nc1NlbGVjdGVkQXJlRGVzY2VuZGFudHNPZiA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKF9kaWFncmFtID09PSBudWxsIHx8IF9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGl0ID0gX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGFuY2VzdG9ycyA9IF9sYXlvdXRzLmdldEFuY2VzdG9yR3JvdXBzKGl0LnZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKF8uaW5kZXhPZihhbmNlc3RvcnMsIGdyb3VwKSA9PSAtMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRoaW5nc1NlbGVjdGVkSW5jbHVkZVNsaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKF9kaWFncmFtID09PSBudWxsIHx8IF9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGl0ID0gX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKGl0LnZhbHVlLmRhdGEgJiYgaXQudmFsdWUuZGF0YS5jYXRlZ29yeSA9PSAnc2xpZGUnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIHRydWUgaWYgYWxsIHNlbGVjdGVkIGl0ZW1zIGFyZSByZWxhdGlvbnNoaXBzIChpLmUuIExpbmtzKVxyXG4gICAgdGhpcy5yZWxhdGlvbnNoaXBzU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoX2RpYWdyYW0gPT09IG51bGwgfHwgX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgaXQgPSBfZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIShpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkxpbmspIHx8ICFfbGF5b3V0cy5pc1JMaW5rKGl0LnZhbHVlKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIHRydWUgaWYgZXhhY3RseSBvbmUgcmVsYXRpb25zaGlwIChMaW5rKSBpcyBzZWxlY3RlZFxyXG4gICAgdGhpcy5yZWxhdGlvbnNoaXBTZWxlY3RlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfZGlhZ3JhbSAhPT0gbnVsbCAmJiBfZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPT0gMSAmJiBfZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKSBpbnN0YW5jZW9mIGdvLkxpbms7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBsb2FkIGFuZCBpbml0aWFsaXplIG1vZGVsIC0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgIFxyXG4gICAgICAgIHZhciBkYXRhID0geyBcIm1hcFwiOiB7IFwibWV0YWRhdGFcIjogeyBcInNhbmRib3hcIjogbnVsbCwgXCJpZFwiOiA1OTU0LCBcIm5hbWVcIjogXCJVbnRpdGxlZCBNYXBcIiwgXCJ1cmxcIjogXCIvbWFwcy81OTU0XCIsIFwiY2FuRWRpdFwiOiB0cnVlLCBcInVwZGF0ZWRBdFwiOiBcIjIwMTUtMDctMDdUMTg6Mjg6NTUuNzY1LTA0OjAwXCIsIFwidXBkYXRlZEJ5XCI6IDg2MywgXCJ1cGRhdGVkQnlOYW1lXCI6IFwiQ2hyaXN0b3BoZXIgRnJvZWhsaWNoXCIsIFwidXNlclRhZ3NcIjogW10gfSwgXCJkYXRhXCI6IHsgXCJjbGFzc1wiOiBcImdvLkdyYXBoTGlua3NNb2RlbFwiLCBcImxpbmtGcm9tUG9ydElkUHJvcGVydHlcIjogXCJmcm9tUG9ydFwiLCBcImxpbmtUb1BvcnRJZFByb3BlcnR5XCI6IFwidG9Qb3J0XCIsIFwibm9kZUlzTGlua0xhYmVsUHJvcGVydHlcIjogXCJpc0xpbmtMYWJlbFwiLCBcImxpbmtMYWJlbEtleXNQcm9wZXJ0eVwiOiBcImxhYmVsS2V5c1wiLCBcIm5vZGVEYXRhQXJyYXlcIjogW3sgXCJrZXlcIjogMSwgXCJ0ZXh0XCI6IFwiTmV3IElkZWFcIiwgXCJpc0dyb3VwXCI6IHRydWUsIFwibG9jXCI6IFwiLTEzMC41IC03OC41XCIsIFwibGF5b3V0XCI6IFwibGVmdFwiLCBcInNFeHBhbmRlZFwiOiB0cnVlLCBcInBFeHBhbmRlZFwiOiB0cnVlIH0sIHsgXCJ0ZXh0XCI6IFwiSWRlYVwiLCBcImlzR3JvdXBcIjogdHJ1ZSwgXCJsYXlvdXRcIjogXCJsZWZ0XCIsIFwic0V4cGFuZGVkXCI6IHRydWUsIFwicEV4cGFuZGVkXCI6IHRydWUsIFwia2V5XCI6IC0yLCBcImxvY1wiOiBcIjEwMS41IC03OC41XCIgfSwgeyBcInRleHRcIjogXCJJZGVhXCIsIFwiaXNHcm91cFwiOiB0cnVlLCBcImxheW91dFwiOiBcImxlZnRcIiwgXCJzRXhwYW5kZWRcIjogdHJ1ZSwgXCJwRXhwYW5kZWRcIjogdHJ1ZSwgXCJrZXlcIjogLTMsIFwibG9jXCI6IFwiNTMwLjUgLTc3LjVcIiB9XSwgXCJsaW5rRGF0YUFycmF5XCI6IFt7IFwidHlwZVwiOiBcIm5vQXJyb3dzXCIsIFwiZnJvbVwiOiAtMiwgXCJ0b1wiOiAxLCBcImxhYmVsS2V5c1wiOiBbXSwgXCJmcm9tUG9ydFwiOiBcIlBcIiwgXCJ0b1BvcnRcIjogXCJQXCIsIFwiY2F0ZWdvcnlcIjogXCJQXCIgfSwgeyBcInR5cGVcIjogXCJub0Fycm93c1wiLCBcImZyb21cIjogLTIsIFwidG9cIjogLTMsIFwibGFiZWxLZXlzXCI6IFtdLCBcImZyb21Qb3J0XCI6IFwiUlwiLCBcInRvUG9ydFwiOiBcIlJcIiB9XSB9LCBcInN0YXRlRGF0YVwiOiB7IFwic2hvd05hdmlnYXRvclwiOiBmYWxzZSwgXCJjdXJyZW50VGFiXCI6IG51bGwsIFwicGVyc3BlY3RpdmVQb2ludEtleVwiOiBudWxsLCBcImRpc3RpbmN0aW9uVGhpbmdLZXlcIjogbnVsbCB9LCBcImVkaXRvck9wdGlvbnNcIjogeyBcImRlZmF1bHRSZWxhdGlvbnNoaXBEaXJlY3Rpb25cIjogXCJub0Fycm93c1wiLCBcImRlZmF1bHRUaGluZ0xheW91dFwiOiBcImxlZnRcIiwgXCJwZXJzcGVjdGl2ZU1vZGVcIjogXCJsaW5lc1wiIH0sIFwiYW5hbHl0aWNzXCI6IHsgXCJDT1VOVF9USElOR1NcIjogXCIzLjBcIiwgXCJDT1VOVF9TWVNURU1TXCI6IFwiMC4wXCIsIFwiQ09VTlRfUkVMQVRJT05TSElQU1wiOiBcIjEuMFwiLCBcIkNPVU5UX1JUSElOR1NcIjogXCIwLjBcIiwgXCJDT1VOVF9TWVNURU1fUlRISU5HU1wiOiBcIjAuMFwiLCBcIkNPVU5UX1BFUlNQRUNUSVZFU1wiOiBcIjEuMFwiLCBcIkNPVU5UX0RJU1RJTkNUSU9OU1wiOiBcIjAuMFwiLCBcIkNPVU5UX1NZU1RFTV9QRVJTUEVDVElWRVNcIjogXCIwLjBcIiB9LCBcInZlcnNpb25zXCI6IFtdIH0gfVxyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24oZGF0YSk7XHJcbiAgICAgICAgX3VpLnNldFN0YXRlRGF0YShkYXRhLm1hcC5zdGF0ZURhdGEpO1xyXG4gICAgICAgIF91aS5zZXRNYXBFZGl0b3JPcHRpb25zKGRhdGEubWFwLmVkaXRvck9wdGlvbnMpO1xyXG5cclxuICAgICAgICBzZWxmLmNoZWNrTW9kZWwoKTtcclxuICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIF9kaWFncmFtLnVuZG9NYW5hZ2VyLmlzRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkQ2hhbmdlZExpc3RlbmVyKF9hdXRvc2F2ZS5tb2RlbENoYW5nZWQpO1xyXG4gICAgICAgIF9hdXRvc2F2ZS5zYXZlT25Nb2RlbENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIF9kaWFncmFtLmlzUmVhZE9ubHkgPSAhJHNjb3BlLmNhbkVkaXQ7XHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZUVkaXRTdGF0dXMoJHNjb3BlLmNhbkVkaXQgPyAkc2NvcGUuTEFTVF9VUERBVEVEIDogJHNjb3BlLlJFQURfT05MWSk7XHJcbiAgICAgICAgX3VpLnJlc2V0Wm9vbSgpO1xyXG4gICAgICAgIHNlbGYubG9hZE1hcEV4dHJhRGF0YShkYXRhLm1hcCk7XHJcblxyXG4gICAgICAgIC8vIGlmIG5vIG5vZGVzIE9SIGluIHRoaW5rcXVlcnkgbW9kZSwgbGF1bmNoIGdlbmVyYXRvclxyXG4gICAgICAgIGlmICgkc2NvcGUudGhpbmtxdWVyeSB8fCAhX2RpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgX3VpLm9wZW5UYWIoX3VpLlRBQl9JRF9HRU5FUkFUT1IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiB3ZSBoYXZlIHNsaWRlcywgcGxheSBwcmVzZW50YXRpb25cclxuICAgICAgICBlbHNlIGlmICghJHNjb3BlLmNhbkVkaXQgJiYgX3ByZXNlbnRlci5nZXRTbGlkZU5vZGVEYXRhcygpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBfcHJlc2VudGVyLnBsYXlTbGlkZSgxKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5sb2FkRm9yU2FuZGJveCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24oJHNjb3BlLm1hcERhdGEpO1xyXG4gICAgICAgIF91aS5zZXRTdGF0ZURhdGEoJycpOyAvLyBpbXBvcnRhbnQhIChvdGhlcndpc2UgY29ybmVyIGhpZ2hsaWdodGluZyBicmVha3MpXHJcbiAgICAgICAgX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICBfZGlhZ3JhbS51bmRvTWFuYWdlci5pc0VuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIF91aS5yZXNldFpvb20oKTtcclxuICAgICAgICAkc2NvcGUuY2FuRWRpdCA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIGlmIG5vIG5vZGVzIE9SIGluIHRoaW5rcXVlcnkgbW9kZSwgbGF1bmNoIGdlbmVyYXRvclxyXG4gICAgICAgIGlmICgkc2NvcGUudGhpbmtxdWVyeSkge1xyXG4gICAgICAgICAgICBfdWkub3BlblRhYihfdWkuVEFCX0lEX0dFTkVSQVRPUik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHdlIGhhdmUgc2xpZGVzLCBwbGF5IHByZXNlbnRhdGlvblxyXG4gICAgICAgIGVsc2UgaWYgKF9wcmVzZW50ZXIuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgX3ByZXNlbnRlci5wbGF5U2xpZGUoMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgLy8gZml4IGFueSBzdHJ1Y3R1cmFsIHByb2JsZW1zIGluIHRoZSBtb2RlbCBiZWZvcmUgZGlzcGxheWluZyBpdFxyXG4gICAgdGhpcy5jaGVja01vZGVsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gY2hhbmdlIFwiaXNMaW5rTGFiZWxcIiBwcm9wZXJ0eSB0byBjYXRlZ29yeTpcIkxpbmtMYWJlbFwiIChjaGFuZ2UgYXMgb2YgZ29KUyAxLjMpXHJcbiAgICAgICAgXy5lYWNoKF9kaWFncmFtLm1vZGVsLm5vZGVEYXRhQXJyYXksIGZ1bmN0aW9uKG5vZGVEYXRhLCBpbmRleCwgbGlzdCkge1xyXG4gICAgICAgICAgICBpZiAobm9kZURhdGEuaXNMaW5rTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBub2RlRGF0YS5pc0xpbmtMYWJlbDtcclxuICAgICAgICAgICAgICAgIG5vZGVEYXRhLmNhdGVnb3J5ID0gXCJMaW5rTGFiZWxcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBjaGVjayBmb3IgdGhlIGxpbmsgbGFiZWwgKHItdGhpbmcpIGZvciBhIGxpbmsgYmVpbmcgdGhlIHNhbWUgYXMgdGhlIGZyb20gb3IgdG8gbm9kZSBcclxuICAgICAgICAvLyAtIHRoaXMgY2FuIGNhdXNlIGluZmluaXRlIHJlY3Vyc2lvbiBpbiB0aGlua3MgbGlrZSBsYXlvdXQuZ2V0U2NhbGVcclxuICAgICAgICBfLmVhY2goX2RpYWdyYW0ubW9kZWwubGlua0RhdGFBcnJheSwgZnVuY3Rpb24obGlua0RhdGEsIGluZGV4LCBsaXN0KSB7XHJcbiAgICAgICAgICAgIHZhciBiYWRMYWJlbEtleXMgPSBbXTtcclxuICAgICAgICAgICAgXy5lYWNoKGxpbmtEYXRhLmxhYmVsS2V5cywgZnVuY3Rpb24oa2V5LCBpbmRleDIsIGxpc3QyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09IGxpbmtEYXRhLmZyb20gfHwga2V5ID09IGxpbmtEYXRhLnRvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xhYmVsS2V5IHNhbWUgYXMgZnJvbSBvciB0byBvZiBsaW5rOiAnICsga2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBiYWRMYWJlbEtleXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGlua0RhdGEubGFiZWxLZXlzID0gXy5kaWZmZXJlbmNlKGxpbmtEYXRhLmxhYmVsS2V5cywgYmFkTGFiZWxLZXlzKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbG9hZHMgb3RoZXIgZGF0YSBiZXNpZGVzIHRoZSBkaWFncmFtIG1vZGVsIGZyb20gdGhlIGpzb24gb2JqZWN0IHJldHVybmVkIGJ5IG1hcHMvc2hvdy5qc29uXHJcbiAgICAvLyAtIHRoaXMgaW5jbHVkZXMgcG9pbnRzLCBiYWRnZXMsIHZlcnNpb25zLCBhbmQgbWFwIGFuYWx5dGljc1xyXG4gICAgLy8gTkI6IHBvaW50cyBhbmQgYmFkZ2VzIGFyZSBzZXQgYXQgcGFnZSBsb2FkIHRpbWUgaW4gbGF5b3V0cy91c2VyIGFuZCB1c2Vycy9iYWRnZXMsIGJ1dFxyXG4gICAgLy8gd2UgYWxzbyBuZWVkIHRvIGJlIGFibGUgdG8gdXBkYXRlIHRoZW0gaGVyZSBhZnRlciBhbiBhdXRvc2F2ZVxyXG5cclxuICAgIC8vIFRPRE86IGlzIHRoaXMgc3RpbGwgYWxsIG5lZWRlZCB3aXRoIHRoZSBuZXdlciB1c2VyUHJvZmlsZSBzdHVmZj9cclxuICAgIHRoaXMubG9hZE1hcEV4dHJhRGF0YSA9IGZ1bmN0aW9uKG1hcERhdGEpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtYXAubG9hZE1hcEV4dHJhRGF0YSwgbWFwRGF0YTogJyArIG1hcERhdGEpO1xyXG4gICAgICAgICAgICAkc2NvcGUubWFwVXNlclRhZ3MgPSBtYXBEYXRhLm1ldGFkYXRhLnVzZXJUYWdzOyAvLyBUT0RPOiBpcyB0aGlzIHVzZWQgYW55d2hlcmU/XHJcblxyXG4gICAgICAgICAgICAvLyRzY29wZS5tYXAuZ2V0SGlzdG9yeSgpLnZlcnNpb25MaXN0ID0gbWFwRGF0YS52ZXJzaW9ucztcclxuICAgICAgICAgICAgJHNjb3BlLm1hcC5nZXRBbmFseXRpY3MoKS5tYXBBbmFseXRpY3MgPSBtYXBEYXRhLmFuYWx5dGljcztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbG9hZHMgbW9kZWwgZGF0YSBmb3IgYW4gaW5kaXZpZHVhbCB2ZXJzaW9uIGFuZCBkaXNwbGF5cyBpdFxyXG4gICAgLy8gTkI6IHRoaXMgYWxzbyBkaXNhYmxlcyBhdXRvc2F2ZTsgbG9hZCgpIG11c3QgYmUgY2FsbGVkIHRvIHJlLWVuYWJsZSBpdFxyXG4gICAgdGhpcy5sb2FkVmVyc2lvbiA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgJGh0dHAuZ2V0KCcvbWFwX3ZlcnNpb25zLycgKyBpZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbG9hZGVkIG1hcCB2ZXJzaW9uIHdpdGggSUQ6ICcgKyBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbihyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLnVuZG9NYW5hZ2VyLmlzRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hdXRvc2F2ZS5zYXZlT25Nb2RlbENoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBfZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLmlzUmVhZE9ubHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3QgbG9hZCBNZXRhTWFwIHZlcnNpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0IHdoZXRoZXIgZWRpdGluZyBjYXBhYmlsaXR5IGlzIHRlbXBvcmFyaWx5IHN1c3BlbmRlZCAtXHJcbiAgICAvLyB0aGlzIGlzIGRpc3RpbmN0IGZyb20gdGhlIGdsb2JhbCAkc2NvcGUuY2FuRWRpdCBzZXR0aW5nLFxyXG4gICAgLy8gd2hpY2ggaWYgZmFsc2UgcHJldmVudHMgZWRpdGluZyBhdCBhbGwgdGltZXNcclxuICAgIHRoaXMuc2V0RWRpdGluZ0Jsb2NrZWQgPSBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgX2RpYWdyYW0uaXNSZWFkT25seSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0gY3JlYXRpbmcgdGhpbmdzIGluIHRoZSBtb2RlbCAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gZGVmYXVsdCBwcm9wZXJ0aWVzIGZvciBhbGwgbmV3IFRoaW5ncyAoZ3JvdXBzKSAtIG5vdGUgdGhhdCB0aGVzZSBjYW4gYmUgb3ZlcnJpZGRlbiBpZiBuZWVkZWRcclxuICAgIGZ1bmN0aW9uIGdldE5ld1RoaW5nRGF0YSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0ZXh0OiAnSWRlYScsXHJcbiAgICAgICAgICAgIGlzR3JvdXA6IHRydWUsXHJcbiAgICAgICAgICAgIGxheW91dDogX3VpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5kZWZhdWx0VGhpbmdMYXlvdXQgfHwgJ2xlZnQnLFxyXG4gICAgICAgICAgICBzRXhwYW5kZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIHBFeHBhbmRlZDogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jcmVhdGVTaXN0ZXIgPSBmdW5jdGlvbih0aGluZykge1xyXG4gICAgICAgIGlmICghJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbmV3TG9jID0gX2xheW91dHMuZ2V0TmV3U2lzdGVyTG9jYXRpb24odGhpbmcpO1xyXG4gICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQoZ2V0TmV3VGhpbmdEYXRhKCksIHtcclxuICAgICAgICAgICAgZ3JvdXA6IHRoaW5nLmRhdGEuZ3JvdXAsXHJcbiAgICAgICAgICAgIHRleHQ6ICdJZGVhJyxcclxuICAgICAgICAgICAgbG9jOiBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLmFkZE5vZGVEYXRhKGRhdGEpO1xyXG4gICAgICAgIHZhciBuZXdTaXN0ZXIgPSBfZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XHJcblxyXG4gICAgICAgIC8vIHB1dCBuZXcgc2lzdGVyIHJpZ2h0IGFmdGVyIHRoaW5nIChub3QgYXMgdGhlIGxhc3Qgc2libGluZylcclxuICAgICAgICBpZiAodGhpbmcuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgIHNlbGYubW92ZVNpYmxpbmdOZXh0VG8obmV3U2lzdGVyLCB0aGluZywgc2VsZi5SSUdIVCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdTaXN0ZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlUlRvU2lzdGVyID0gZnVuY3Rpb24odGhpbmcpIHtcclxuICAgICAgICBpZiAoISRzY29wZS5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRoaW5nS2V5ID0gX2RpYWdyYW0ubW9kZWwuZ2V0S2V5Rm9yTm9kZURhdGEodGhpbmcuZGF0YSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygndGhpbmdLZXk6ICcgKyB0aGluZ0tleSk7XHJcbiAgICAgICAgdmFyIG5ld0xvYyA9IF9sYXlvdXRzLmdldE5ld1Npc3RlckxvY2F0aW9uKHRoaW5nLCB0cnVlKTsgLy8gd2l0aFIgPSB0cnVlXHJcbiAgICAgICAgdmFyIGRhdGEgPSBfLmV4dGVuZChnZXROZXdUaGluZ0RhdGEoKSwge1xyXG4gICAgICAgICAgICBncm91cDogdGhpbmcuZGF0YS5ncm91cCxcclxuICAgICAgICAgICAgdGV4dDogJ0lkZWEnLFxyXG4gICAgICAgICAgICBsb2M6IGdvLlBvaW50LnN0cmluZ2lmeShuZXdMb2MpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoZGF0YSk7XHJcbiAgICAgICAgdmFyIG5ld1Npc3RlciA9IF9kaWFncmFtLmZpbmROb2RlRm9yRGF0YShkYXRhKTtcclxuICAgICAgICB2YXIgZ3JvdXBLZXkgPSBfZGlhZ3JhbS5tb2RlbC5nZXRLZXlGb3JOb2RlRGF0YShkYXRhKTtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIGxpbmtcclxuICAgICAgICB2YXIgbGlua0RhdGEgPSB7XHJcbiAgICAgICAgICAgIGZyb206IHRoaW5nS2V5LFxyXG4gICAgICAgICAgICB0bzogZ3JvdXBLZXksXHJcbiAgICAgICAgICAgIHR5cGU6ICd0bycsXHJcbiAgICAgICAgICAgIGZyb21Qb3J0OiAnUicsXHJcbiAgICAgICAgICAgIHRvUG9ydDogJ1InXHJcbiAgICAgICAgfTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGRMaW5rRGF0YShsaW5rRGF0YSk7XHJcblxyXG4gICAgICAgIC8vIHB1dCBuZXcgc2lzdGVyIHJpZ2h0IGFmdGVyIHRoaW5nIChub3QgYXMgdGhlIGxhc3Qgc2libGluZylcclxuICAgICAgICBpZiAodGhpbmcuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgIHNlbGYubW92ZVNpYmxpbmdOZXh0VG8obmV3U2lzdGVyLCB0aGluZywgc2VsZi5SSUdIVCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdTaXN0ZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlQ2hpbGQgPSBmdW5jdGlvbih0aGluZywgbmFtZSwgeCwgeSkge1xyXG4gICAgICAgIGlmICghJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbmV3TG9jID0gX2xheW91dHMuZ2V0TmV3Q2hpbGRMb2NhdGlvbjIodGhpbmcpO1xyXG4gICAgICAgIGlmICh4IHx8IHkpIHtcclxuICAgICAgICAgICAgbmV3TG9jID0gbmV3IGdvLlBvaW50KHgsIHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZGF0YSA9IF8uZXh0ZW5kKGdldE5ld1RoaW5nRGF0YSgpLCB7XHJcbiAgICAgICAgICAgIGdyb3VwOiB0aGluZy5kYXRhLmtleSxcclxuICAgICAgICAgICAgdGV4dDogbmFtZSB8fCAnUGFydCcsXHJcbiAgICAgICAgICAgIGxvYzogZ28uUG9pbnQuc3RyaW5naWZ5KG5ld0xvYylcclxuICAgICAgICB9KTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICBfbGF5b3V0cy5zZXREZXNjZW5kYW50TGF5b3V0cyh0aGluZywgdGhpbmcuZGF0YS5sYXlvdXQpO1xyXG4gICAgICAgIHZhciBjaGlsZCA9IF9kaWFncmFtLmZpbmROb2RlRm9yRGF0YShkYXRhKTtcclxuICAgICAgICBjaGlsZC51cGRhdGVUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGVSVGhpbmcgPSBmdW5jdGlvbihsaW5rLCBuYW1lKSB7XHJcbiAgICAgICAgaWYgKCEkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjcmVhdGVSVGhpbmcsIGxpbms6ICcgKyBsaW5rICsgJywgbmFtZTogJyArIG5hbWUpO1xyXG4gICAgICAgIC8vIGRvbid0IGFsbG93IG11bHRpcGxlIFItdGhpbmdzXHJcbiAgICAgICAgaWYgKGxpbmsuaXNMYWJlbGVkTGluaykge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2Fubm90IGNyZWF0ZSBSVGhpbmcsIGxpbmsgaXMgYWxyZWFkeSBsYWJlbGVkJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQoZ2V0TmV3VGhpbmdEYXRhKCksIHtcclxuICAgICAgICAgICAgdGV4dDogbmFtZSB8fCAnUmVsYXRpb25zaGlwIElkZWEnLFxyXG4gICAgICAgICAgICAvL2lzTGlua0xhYmVsOiB0cnVlLCAgICAgLy8gZGVwcmVjYXRlZCBhcyBvZiBnb0pTIDEuM1xyXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJMaW5rTGFiZWxcIiwgLy8gbmV3IGFzIG9mIGdvSlMgMS4zXHJcbiAgICAgICAgICAgIGxvYzogJzAgMCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY3JlYXRlIFIgVGhpbmdcIik7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoZGF0YSk7XHJcbiAgICAgICAgdmFyIGtleSA9IF9kaWFncmFtLm1vZGVsLmdldEtleUZvck5vZGVEYXRhKGRhdGEpO1xyXG4gICAgICAgIHZhciBub2RlID0gX2RpYWdyYW0uZmluZFBhcnRGb3JLZXkoa2V5KTtcclxuICAgICAgICBub2RlLmxhYmVsZWRMaW5rID0gbGluaztcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbihcImNyZWF0ZSBSIFRoaW5nXCIpO1xyXG4gICAgICAgIF9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBfZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0gY3JlYXRpbmcgdGhpbmdzIHdpdGggc3BlY2lmaWVkIG5hbWVzL2xvY2F0aW9ucyAtIGZvciB1c2UgYnkgZ2VuZXJhdG9yIGFuZCB0ZXN0cyAtLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmNyZWF0ZVRoaW5nID0gZnVuY3Rpb24oeCwgeSwgbmFtZSwgbGF5b3V0KSB7XHJcbiAgICAgICAgZ3JvdXAgPSBfZGlhZ3JhbS50b29sTWFuYWdlci5jbGlja0NyZWF0aW5nVG9vbC5pbnNlcnRQYXJ0KG5ldyBnby5Qb2ludCh4LCB5KSk7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICd0ZXh0JywgbmFtZSk7XHJcbiAgICAgICAgaWYgKGxheW91dCkge1xyXG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ2xheW91dCcsIGxheW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBncm91cDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGVSTGlua1dpdGhSVGhpbmcgPSBmdW5jdGlvbih0aGluZzEsIHRoaW5nMiwgbmFtZSkge1xyXG4gICAgICAgIHZhciBsaW5rID0gc2VsZi5jcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuY3JlYXRlUlRoaW5nKGxpbmssIG5hbWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBsaW5rRGF0YSBvYmplY3QgZm9yIHRoZSBuZXcgbGlua1xyXG4gICAgdGhpcy5jcmVhdGVSTGluayA9IGZ1bmN0aW9uKHRoaW5nMSwgdGhpbmcyKSB7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbignYWRkIGxpbmsnKTtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ25vQXJyb3dzJyxcclxuICAgICAgICAgICAgZnJvbTogdGhpbmcxLmRhdGEua2V5LFxyXG4gICAgICAgICAgICB0bzogdGhpbmcyLmRhdGEua2V5LFxyXG4gICAgICAgICAgICBmcm9tUG9ydDogJ1InLFxyXG4gICAgICAgICAgICB0b1BvcnQ6ICdSJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkTGlua0RhdGEoZGF0YSk7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgcmV0dXJuIF9kaWFncmFtLmZpbmRMaW5rRm9yRGF0YShkYXRhKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgbGlua0RhdGEgb2JqZWN0IGZvciB0aGUgbmV3IGxpbmtcclxuICAgIHRoaXMuY3JlYXRlUExpbmsgPSBmdW5jdGlvbih0aGluZzEsIHRoaW5nMikge1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdub0Fycm93cycsXHJcbiAgICAgICAgICAgIGZyb206IHRoaW5nMS5kYXRhLmtleSxcclxuICAgICAgICAgICAgdG86IHRoaW5nMi5kYXRhLmtleSxcclxuICAgICAgICAgICAgZnJvbVBvcnQ6ICdQJyxcclxuICAgICAgICAgICAgdG9Qb3J0OiAnUCcsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnUCdcclxuICAgICAgICB9O1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLmFkZExpbmtEYXRhKGRhdGEpO1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ3BFeHBhbmRlZCcsIHRydWUpO1xyXG4gICAgICAgIHJldHVybiBfZGlhZ3JhbS5maW5kTGlua0ZvckRhdGEoZGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0gbW92aW5nIHRoaW5ncyBpbiB0aGUgbW9kZWwgc3RydWN0dXJlIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyByZXR1cm5zIGEgZ28uTGlzdCBvZiB0aGUgaXRlbXMgaW4gdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHRoYXQgYXJlIEdyb3Vwc1xyXG4gICAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRHcm91cHMoKSB7XHJcbiAgICAgICAgdmFyIGl0ID0gX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHZhciBtZW1iZXJzID0gbmV3IGdvLkxpc3QoKTtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIG1lbWJlcnMuYWRkKHBhcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZW1iZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRyYWcgdG8gU1xyXG4gICAgdGhpcy5hZGRTZWxlY3RlZFRoaW5nc0FzQ2hpbGRyZW5PZiA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG5ld01lbWJlcnMgPSBnZXRTZWxlY3RlZEdyb3VwcygpO1xyXG5cclxuICAgICAgICAvLyBjaGVjayBleGlzdGluZyBtZW1iZXJzIHNvIHdlIGNhbiBjYWxjdWxhdGUgbGF5b3V0XHJcbiAgICAgICAgdmFyIG9sZE1lbWJlckJvdW5kcyA9IHNlbGYuc2FmZVJlY3QoX2RpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKGdyb3VwLm1lbWJlclBhcnRzKSk7XHJcblxyXG4gICAgICAgIC8vIE5COiB0aGlzIGlzIHN1YmplY3QgdG8gdmFsaWRhdGlvbiBieSBDb21tYW5kSGFuZGxlci5pc1ZhbGlkTWVtYmVyLFxyXG4gICAgICAgIC8vIHNvIGZvciBleGFtcGxlLCBtZW1iZXJzIG9mIG1lbWJlcnMgb2YgbmV3TWVtYmVycyB3aWxsIG5vdCBiZSBhZGRlZCBhcyBtZW1iZXJzXHJcbiAgICAgICAgZ3JvdXAuYWRkTWVtYmVycyhuZXdNZW1iZXJzKTtcclxuXHJcbiAgICAgICAgX2xheW91dHMubGF5b3V0TmV3TWVtYmVyc1JlbGF0aXZlVG8obmV3TWVtYmVycywgZ3JvdXAsIG9sZE1lbWJlckJvdW5kcyk7XHJcblxyXG4gICAgICAgIF9kaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRyYWcgdG8gRFxyXG4gICAgdGhpcy5hZGRTZWxlY3RlZFRoaW5nc0FzU2lzdGVyc09mID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgb2xkTWVtYmVycyA9IGdldFNlbGVjdGVkR3JvdXBzKCk7XHJcblxyXG4gICAgICAgIC8vIGlmIGRyYWdnaW5nIHRvIHRvcCBsZXZlbCwgbW92ZSBkcmFnZ2VkIHRoaW5ncyBzbyB0aGV5IGRvbid0IG92ZXJsYXAgdGhlIGZvcm1lciBwYXJlbnRcclxuICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAvLyBjaGVjayBleGlzdGluZyBtZW1iZXJzIHNvIHdlIGNhbiBjYWxjdWxhdGUgbGF5b3V0XHJcbiAgICAgICAgICAgIHZhciBvbGRNZW1iZXJzQm91bmRzID0gX2RpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKG9sZE1lbWJlcnMpO1xyXG4gICAgICAgICAgICAvLyBOQjogb2xkTWVtYmVycyBjYW4gYmUgb24gbXVsdGlwbGUgbGV2ZWxzLCBzbyBub3QgY2xlYXIgd2hpY2ggbGV2ZWwgdG8gdXNlIGZvciByZXNjYWxpbmcgb2xkIG1lbWJlcnMgYWZ0ZXIgZHJhZ1xyXG4gICAgICAgICAgICB2YXIgb2xkTWVtYmVyc0xldmVsID0gX2xheW91dHMuY29tcHV0ZUxldmVsKG9sZE1lbWJlcnMuZmlyc3QoKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaXQgPSBvbGRNZW1iZXJzLml0ZXJhdG9yO1xyXG4gICAgICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVtYmVyID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXIuY29udGFpbmluZ0dyb3VwID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfbGF5b3V0cy5sYXlvdXRPbGRNZW1iZXJzT3V0c2lkZU9mKG9sZE1lbWJlcnMsIGdyb3VwLCBvbGRNZW1iZXJzQm91bmRzLCBvbGRNZW1iZXJzTGV2ZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiBub3QgZHJhZ2dpbmcgdG8gdG9wIGxldmVsLCBwbGFjZSBkcmFnZ2VkIHRoaW5ncyBhZnRlciBmb3JtZXIgcGFyZW50IGluIG91dGxpbmVcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGl0MiA9IG9sZE1lbWJlcnMuaXRlcmF0b3I7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdDIubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVtYmVyMiA9IGl0Mi52YWx1ZTtcclxuICAgICAgICAgICAgICAgIG1lbWJlcjIuY29udGFpbmluZ0dyb3VwID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5tb3ZlU2libGluZ05leHRUbyhtZW1iZXIyLCBncm91cCwgc2VsZi5SSUdIVCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgX2RpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIGZvciBkcmFnZ2luZyBwYXJ0cyB3aXRoaW4gYSBzeXN0ZW0gLSBzaWRlIGlzIExFRlQgb3IgUklHSFQgKGkuZS4gYWJvdmUgb3IgYmVsb3csIHJlc3AuIGluIGludmVudG9yeSBsYXlvdXQpXHJcbiAgICB0aGlzLmFkZFNlbGVjdGVkVGhpbmdBc09yZGVyZWRTaXN0ZXJPZiA9IGZ1bmN0aW9uKGdyb3VwLCBzaWRlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnYWRkU2VsZWN0ZWRUaGluZ0FzT3JkZXJlZFNpc3Rlck9mLCBzaWRlOiAnICsgc2lkZSk7XHJcbiAgICAgICAgdmFyIHRoaW5nID0gc2VsZi5nZXRVbmlxdWVUaGluZ1NlbGVjdGVkKCk7XHJcbiAgICAgICAgaWYgKCF0aGluZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYubW92ZVNpYmxpbmdOZXh0VG8odGhpbmcsIGdyb3VwLCBzaWRlKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbW92ZXMgdGhlIGZpcnN0IHRoaW5nIChzaWJsaW5nKSB0byBiZSBhZnRlciB0aGUgc2Vjb25kIHRoaW5nIChncm91cClcclxuICAgIC8vIGluIHRoZSBwYXJ0IG9yZGVyaW5nIC0gdGhleSBhcmUgYXNzdW1lZCB0byBiZSBzaWJsaW5nc1xyXG4gICAgLy8gc2lkZSBpcyBMRUZUIG9yIFJJR0hUXHJcbiAgICB0aGlzLm1vdmVTaWJsaW5nTmV4dFRvID0gZnVuY3Rpb24oc2libGluZywgZ3JvdXAsIHNpZGUpIHtcclxuICAgICAgICB2YXIgcGFyZW50ID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdtb3ZlU2libGluZ05leHRUbywgc2libGluZzogJyArIHNpYmxpbmcgKyAnLCBncm91cDogJyArIGdyb3VwICsgJywgcGFyZW50OiAnICsgcGFyZW50ICsgJywgc2libGluZy5jb250YWluaW5nR3JvdXA6ICcgKyBzaWJsaW5nLmNvbnRhaW5pbmdHcm91cCk7XHJcblxyXG4gICAgICAgIGlmICghcGFyZW50IHx8IHNpYmxpbmcuY29udGFpbmluZ0dyb3VwICE9IHBhcmVudCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDYW5ub3QgZG8gbW92ZVNpYmxpbmdOZXh0VG8gb24gbm9uLXNpYmxpbmdzIG9yIHRvcC1sZXZlbCBncm91cHMnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSBuZXcgbWVtYmVyIG9yZGVyXHJcbiAgICAgICAgdmFyIG1lbWJlck9yZGVyID0gbmV3IGdvLkxpc3QoKTtcclxuICAgICAgICB2YXIgaXQgPSBwYXJlbnQubWVtYmVyUGFydHM7XHJcbiAgICAgICAgdmFyIG9yZGVyID0gMDtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBtZW1iZXIgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKG1lbWJlciBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3ZSdyZSBhdCB0aGUgdGFyZ2V0IGdyb3VwLCBzbyBhZGQgdGhlIG1vdmVkIHRoaW5nIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgaXRcclxuICAgICAgICAgICAgICAgIGlmIChtZW1iZXIgPT0gZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA9PSBzZWxmLkxFRlQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKHNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2libGluZy5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKG1lbWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShtZW1iZXIuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKG1lbWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShtZW1iZXIuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChzaWJsaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHNpYmxpbmcuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZG9uJ3QgcmUtYWRkIHRoZSBtb3ZlZCB0aGluZywgaXQgd2FzIGFkZGVkIGFib3ZlXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtZW1iZXIgIT0gc2libGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChtZW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShtZW1iZXIuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNsZWFyIGV4aXN0aW5nIG1lbWJlcnNcclxuICAgICAgICB2YXIgbmV3SXQgPSBtZW1iZXJPcmRlci5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAobmV3SXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBtZW1iZXIyID0gbmV3SXQudmFsdWU7XHJcbiAgICAgICAgICAgIG1lbWJlcjIuY29udGFpbmluZ0dyb3VwID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFkZCBuZXcgbWVtYmVyc1xyXG4gICAgICAgIG5ld0l0LnJlc2V0KCk7XHJcbiAgICAgICAgd2hpbGUgKG5ld0l0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbWVtYmVyMyA9IG5ld0l0LnZhbHVlO1xyXG4gICAgICAgICAgICBtZW1iZXIzLmNvbnRhaW5pbmdHcm91cCA9IHBhcmVudDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYWRkVGhpbmdBc1JUaGluZyA9IGZ1bmN0aW9uKHRoaW5nLCBsaW5rKSB7XHJcbiAgICAgICAgdGhpbmcubGFiZWxlZExpbmsgPSBsaW5rO1xyXG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEQgY29ybmVyIGhhbmRsZXIgKHNpbmdsZSBjbGljaylcclxuICAgIHRoaXMudG9nZ2xlREZsYWcgPSBmdW5jdGlvbih0aGluZykge1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAnZGZsYWcnLCAhdGhpbmcuZGF0YS5kZmxhZyk7XHJcbiAgICAgICAgdGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gUyBjb3JuZXIgaGFuZGxlciAoc2luZ2xlIGNsaWNrKVxyXG4gICAgdGhpcy50b2dnbGVTRXhwYW5zaW9uID0gZnVuY3Rpb24odGhpbmcpIHtcclxuICAgICAgICB2YXIgaXNFeHBhbmRlZCA9ICEodGhpbmcuZGF0YSAmJiAhdGhpbmcuZGF0YS5zRXhwYW5kZWQpOyAvLyBleHBhbmQgYnkgZGVmYXVsdCBpZiBwcm9wZXJ0eSBub3QgcHJlc2VudFxyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAnc0V4cGFuZGVkJywgIWlzRXhwYW5kZWQpO1xyXG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgX3VpLnNob3dDb3JuZXJUaXAodGhpbmcsICdTJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFAgY29ybmVyIGhhbmRsZXIgKHNpbmdsZSBjbGljaylcclxuICAgIHRoaXMudG9nZ2xlUEV4cGFuc2lvbiA9IGZ1bmN0aW9uKHRoaW5nKSB7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nLmRhdGEsICdwRXhwYW5kZWQnLCAhc2VsZi5wSXNFeHBhbmRlZCh0aGluZykpO1xyXG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgX3VpLnNob3dDb3JuZXJUaXAodGhpbmcsIFwiUFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5wSXNFeHBhbmRlZCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwLmRhdGEgJiYgZ3JvdXAuZGF0YS5wRXhwYW5kZWQgPT09IHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gdW5kby9yZWRvIC0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5jYW5VbmRvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLmNhblVuZG8oKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIudW5kbygpO1xyXG4gICAgICAgIF9kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY2FuUmVkbyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfZGlhZ3JhbS5jb21tYW5kSGFuZGxlci5jYW5SZWRvKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIF9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLnJlZG8oKTtcclxuICAgICAgICBfZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJlZnJlc2ggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIF9kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gdXRpbGl0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gY2hlY2sgZm9yIGEgcmVjdCB3aXRoIE5hTiBYL1kvVy9IIGNvb3Jkcywgc28gd2UgY2FuIGRvIHN0dWZmIHdpdGggaXQgc3VjaCBhcyB1bmlvblJlY3RcclxuICAgIC8vIChOYU4sTmFOLDAsMCkgPT4gKDAsMCwwLDApXHJcbiAgICB0aGlzLnNhZmVSZWN0ID0gZnVuY3Rpb24ocmVjdCkge1xyXG4gICAgICAgIGlmIChpc05hTihyZWN0LngpKSB7XHJcbiAgICAgICAgICAgIHJlY3QueCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05hTihyZWN0LnkpKSB7XHJcbiAgICAgICAgICAgIHJlY3QueSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05hTihyZWN0LndpZHRoKSkge1xyXG4gICAgICAgICAgICByZWN0LndpZHRoID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzTmFOKHJlY3QuaGVpZ2h0KSkge1xyXG4gICAgICAgICAgICByZWN0LmhlaWdodCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tIGRlYnVnIG1hcCBtb2RlbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5sb2FkTW9kZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKCcjbWFwLW1vZGVsLWRlYnVnJykudmFsKF9kaWFncmFtLm1vZGVsLnRvSnNvbigpKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zYXZlTW9kZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbCA9IGdvLk1vZGVsLmZyb21Kc29uKCQoJyNtYXAtbW9kZWwtZGVidWcnKS52YWwoKSk7XHJcbiAgICAgICAgX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGRDaGFuZ2VkTGlzdGVuZXIoX2F1dG9zYXZlLm1vZGVsQ2hhbmdlZCk7XHJcbiAgICAgICAgX2F1dG9zYXZlLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IHRydWU7XHJcbiAgICB9O1xyXG59OyIsIi8vIGZ1bmN0aW9ucyBmb3IgZWRpdGluZyBwZXJzcGVjdGl2ZXMgQU5EIGRpc3RpbmN0aW9ucywgd2hpY2ggd29yayBzaW1pbGFybHkgaW4gdGhlIFVJXHJcblxyXG5TYW5kYmFua0VkaXRvci5QZXJzcGVjdGl2ZXMgPSBmdW5jdGlvbigkc2NvcGUsIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAvLyB0ZW1wb3Jhcnkgc3RhdGUgZmxhZyBmb3IgYWRkaW5nL3JlbW92aW5nIFAvRCBzZWxlY3Rpb25zIHByb2dyYW1tYXRpY2FsbHlcclxuICAgIHZhciBzZWxlY3RpbmdMaW5rZWRUaGluZ3MgPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHt9O1xyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdQZXJzcGVjdGl2ZXMsIGN1cnJlbnRUYWJDaGFuZ2VkJyk7XHJcbiAgICAgICAgaWYgKG5ld1ZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9QRVJTUEVDVElWRVMpIHsgLy8gb3BlbmluZyBwZXJzcGVjdGl2ZXNcclxuICAgICAgICAgICAgc2V0UG9yRFRoaW5nKCdQJyk7XHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZCh0cnVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9sZFZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9QRVJTUEVDVElWRVMpIHsgLy8gY2xvc2luZyBwZXJzcGVjdGl2ZXNcclxuICAgICAgICAgICAgc2F2ZUxpbmtzKCdQJyk7XHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZChmYWxzZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChuZXdWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfRElTVElOQ1RJT05TKSB7IC8vIG9wZW5pbmcgZGlzdGluY3Rpb25zXHJcbiAgICAgICAgICAgIHNldFBvckRUaGluZygnRCcpO1xyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQodHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChvbGRWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfRElTVElOQ1RJT05TKSB7IC8vIGNsb3NpbmcgZGlzdGluY3Rpb25zXHJcbiAgICAgICAgICAgIHNhdmVMaW5rcygnRCcpO1xyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5oYW5kbGVEaWFncmFtRXZlbnQgPSBmdW5jdGlvbihldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xyXG4gICAgICAgICAgICBpZiAobWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9QRVJTUEVDVElWRVMpIHx8IG1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfRElTVElOQ1RJT05TKSkge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlTGlua3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLSBQL0QgRWRpdG9yIHN0YXRlXHJcblxyXG4gICAgdGhpcy5pc0luUE9yREVkaXRvck1vZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gbWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSAhPT0gbnVsbCB8fCBtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5ICE9PSBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzSW5QRWRpdG9yTW9kZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5ICE9PSBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzSW5ERWRpdG9yTW9kZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5ICE9PSBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzUEVkaXRvclBvaW50ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gbWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSA9PSBncm91cC5kYXRhLmtleTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc0RFZGl0b3JUaGluZyA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgPT0gZ3JvdXAuZGF0YS5rZXk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIE5COiB0aGlzIGlzIGNhbGxlZCB2aWEgbWFwLmdldENvcm5lckZ1bmN0aW9uLCBzbyB3ZSBnZXQgdGhlIGV4dHJhIGNvcm5lciBhcmcsIHdoaWNoIHdlIGNhbiBpZ25vcmVcclxuICAgIHRoaXMuc2V0UEVkaXRvclBvaW50ID0gZnVuY3Rpb24odGhpbmcsIGNvcm5lcikge1xyXG4gICAgICAgIGlmICgkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5vcGVuVGFiKG1hcC5nZXRVaSgpLlRBQl9JRF9QRVJTUEVDVElWRVMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zZXRERWRpdG9yVGhpbmcgPSBmdW5jdGlvbih0aGluZykge1xyXG4gICAgICAgIGlmICgkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICAvLyBOQjogbmVlZCB0byBzZWxlY3Qgb25seSB0aGlzIHRoaW5nLCBzaW5jZSB0aGlzIGlzIGludm9rZWRcclxuICAgICAgICAgICAgLy8gYnkgYSBjb250cm9sLWNsaWNrLCB3aGljaCB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHNlbGVjdCBqdXN0IGl0XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkuY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgdGhpbmcuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLm9wZW5UYWIobWFwLmdldFVpKCkuVEFCX0lEX0RJU1RJTkNUSU9OUyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuaXNQZXJzcGVjdGl2ZVBvaW50ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NPdXRPZigpO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1NlbGVjdGVkUGVyc3BlY3RpdmVWaWV3ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NJbnRvKCk7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJyAmJiBtYXAucElzRXhwYW5kZWQobGluay5mcm9tTm9kZSkgJiYgbGluay5mcm9tTm9kZS5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNUb2dnbGVkUGVyc3BlY3RpdmVWaWV3ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NJbnRvKCk7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJyAmJiBtYXAucElzRXhwYW5kZWQobGluay5mcm9tTm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc01vdXNlT3ZlclBlcnNwZWN0aXZlVmlldyA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGxpbmtzID0gZ3JvdXAuZmluZExpbmtzSW50bygpO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcgJiYgbGluay5mcm9tTm9kZSA9PSBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldFBlcnNwZWN0aXZlVmlld1dlaWdodCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG1vZGUgPSBtYXAuZ2V0VWkoKS5nZXRNYXBFZGl0b3JPcHRpb25zKCkucGVyc3BlY3RpdmVNb2RlO1xyXG4gICAgICAgIGlmIChtb2RlID09ICdzcG90bGlnaHQnIHx8IG1vZGUgPT0gJ2JvdGgnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoc2VsZi5pc1NlbGVjdGVkUGVyc3BlY3RpdmVWaWV3KGdyb3VwKSA/IDEgOiAwKSArXHJcbiAgICAgICAgICAgICAgICAoc2VsZi5pc1RvZ2dsZWRQZXJzcGVjdGl2ZVZpZXcoZ3JvdXApID8gMSA6IDApICtcclxuICAgICAgICAgICAgICAgIChzZWxmLmlzTW91c2VPdmVyUGVyc3BlY3RpdmVWaWV3KGdyb3VwKSA/IDEgOiAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gY2F0ZWdvcnkgaXMgXCJQXCIgb3IgXCJEXCIgKHBlcnNwZWN0aXZlcyBvciBkaXN0aW5jdGlvbnMpXHJcbiAgICBmdW5jdGlvbiBzZXRQb3JEVGhpbmcoY2F0ZWdvcnkpIHtcclxuICAgICAgICAvLyBpZiBhbHJlYWR5IHNldCwgbXVzdCBkbyBzYXZlIHBlcnNwZWN0aXZlcyBvciBzYXZlIGRpc3RpbmN0aW9uc1xyXG4gICAgICAgIGlmIChtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5IHx8IG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdmFyIHRoaW5nID0gbWFwLmdldERpYWdyYW0oKS5zZWxlY3Rpb24uZmlyc3QoKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdzZXRQb3JEVGhpbmc6ICcgKyB0aGluZyk7XHJcbiAgICAgICAgaWYgKHRoaW5nIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaW5nLmRhdGEua2V5O1xyXG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkgPT0gXCJQXCIpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgPSBrZXk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2F0ZWdvcnkgPT0gXCJEXCIpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgPSBrZXk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHNlbGVjdCB2aWV3cy9vdGhlcnNcclxuICAgICAgICAgICAgc2VsZWN0TGlua2VkVGhpbmdzRm9yKHRoaW5nLCBjYXRlZ29yeSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIHNlbGVjdGlvbiBjaGFuZ2VzIC0gaWYgdGhlIHRoaW5nIGlzIHNldCxcclxuICAgIC8vIGFkZHMvcmVtb3ZlcyBEL1AgbGlua3MgYWNjb3JkaW5nIHRvIHdoYXQgaXMgc2VsZWN0ZWQ7IG90aGVyd2lzZVxyXG4gICAgLy8ganVzdCBzaG93cy9oaWRlcyBEL1AgbGlua3MgZm9yIHRoZSBzZWxlY3RlZCB0aGluZyhzKVxyXG4gICAgZnVuY3Rpb24gdXBkYXRlTGlua3MoKSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGluZ0xpbmtlZFRoaW5ncykgLy8gc2VsZWN0aW9uIGlzIGJlaW5nIGNoYW5nZWQgcHJvZ3JhbW1hdGljYWxseSwgc28gZG9uJ3QgcmVzcG9uZFxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciBwT3JEVGhpbmcgPSBudWxsO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeSA9IG51bGw7XHJcbiAgICAgICAgaWYgKG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkpIHtcclxuICAgICAgICAgICAgcE9yRFRoaW5nID0gbWFwLmdldERpYWdyYW0oKS5maW5kTm9kZUZvcktleShtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5KTtcclxuICAgICAgICAgICAgY2F0ZWdvcnkgPSBcIlBcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkpIHtcclxuICAgICAgICAgICAgcE9yRFRoaW5nID0gbWFwLmdldERpYWdyYW0oKS5maW5kTm9kZUZvcktleShtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5KTtcclxuICAgICAgICAgICAgY2F0ZWdvcnkgPSBcIkRcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBhZGRMaW5rc1RvID0gbmV3IGdvLkxpc3QoKTtcclxuICAgICAgICB2YXIgcmVtb3ZlTGlua3MgPSBuZXcgZ28uTGlzdCgpO1xyXG5cclxuICAgICAgICAvLyBpdGVyYXRlIHRocm91Z2ggYWxsIHRoaW5nc1xyXG4gICAgICAgIGlmIChjYXRlZ29yeSkge1xyXG4gICAgICAgICAgICB2YXIgbGF5ZXJzID0gbWFwLmdldERpYWdyYW0oKS5sYXllcnM7XHJcbiAgICAgICAgICAgIHdoaWxlIChsYXllcnMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllcnMudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSBsYXllci5wYXJ0cztcclxuICAgICAgICAgICAgICAgIHdoaWxlIChwYXJ0cy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGxpbmtzIHRvIGFkZC9yZW1vdmUgYmFzZWQgb24gc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwT3JEVGhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaW5rcyA9IHBhcnQuZmluZExpbmtzSW50bygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nTGluayA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGluay5mcm9tTm9kZS5kYXRhLmtleSA9PSBwT3JEVGhpbmcuZGF0YS5rZXkgJiYgbGluay5kYXRhLmNhdGVnb3J5ID09IGNhdGVnb3J5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0xpbmsgPSBsaW5rO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlY2lkZSB3aGV0aGVyIHRvIGFkZCBvciByZW1vdmUgYSBsaW5rIHRvIHRoZSBwYXJ0LCBkZXBlbmRpbmcgb24gd2hldGhlciBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0IGlzIHNlbGVjdGVkIGFuZCB3aGV0aGVyIGEgbGluayBleGlzdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdMaW5rICYmIHBhcnQuaXNTZWxlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRMaW5rc1RvLmFkZChwYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV4aXN0aW5nTGluayAmJiAhcGFydC5pc1NlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUxpbmtzLmFkZChleGlzdGluZ0xpbmspO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkbyB0aGUgYWRkaW5nL3JlbW92aW5nIG9mIGxpbmtzXHJcbiAgICAgICAgdmFyIGFkZHMgPSBhZGRMaW5rc1RvLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChhZGRzLm5leHQoKSkge1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgICAgIHZhciB0byA9IGFkZHMudmFsdWU7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1cGRhdGVMaW5rczogYWRkaW5nIGxpbmsgZnJvbSAnICsgcE9yRFRoaW5nICsgJyB0byAnICsgdG8pO1xyXG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkgPT0gXCJEXCIgJiYgcE9yRFRoaW5nLmRhdGEua2V5ID09IHRvLmRhdGEua2V5KSB7XHJcbiAgICAgICAgICAgICAgICBwT3JEVGhpbmcuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJZb3UgY2FuJ3QgZGlzdGluZ3Vpc2ggYSB0aGluZyBmcm9tIGl0c2VsZiFcIik7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLmFkZExpbmtEYXRhKHtcclxuICAgICAgICAgICAgICAgIGZyb206IHBPckRUaGluZy5kYXRhLmtleSxcclxuICAgICAgICAgICAgICAgIHRvOiB0by5kYXRhLmtleSxcclxuICAgICAgICAgICAgICAgIGZyb21Qb3J0OiBjYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgIHRvUG9ydDogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZW1vdmVzID0gcmVtb3ZlTGlua3MuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKHJlbW92ZXMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciByZW1vdmUgPSByZW1vdmVzLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndXBkYXRlTGlua3M6IHJlbW92aW5nIGxpbmsgZnJvbSAnICsgcmVtb3ZlLmZyb21Ob2RlICsgJyB0byAnICsgcmVtb3ZlLnRvTm9kZSk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuc3RhcnRUcmFuc2FjdGlvbigncmVtb3ZlIGxpbmsnKTtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5yZW1vdmUocmVtb3ZlKTtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5yZW1vdmVMaW5rRGF0YShyZW1vdmUuZGF0YSk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oJ3JlbW92ZSBsaW5rJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzaG93IGxpbmtzXHJcbiAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVMaW5rcyhjYXRlZ29yeSkge1xyXG4gICAgICAgIHZhciBwT3JEVGhpbmcgPSBudWxsO1xyXG4gICAgICAgIGlmIChjYXRlZ29yeSA9PSBcIlBcIikge1xyXG4gICAgICAgICAgICBwT3JEVGhpbmcgPSBtYXAuZ2V0RGlhZ3JhbSgpLmZpbmROb2RlRm9yS2V5KG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkpO1xyXG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5ID0gbnVsbDtcclxuICAgICAgICB9IGVsc2UgaWYgKGNhdGVnb3J5ID09IFwiRFwiKSB7XHJcbiAgICAgICAgICAgIHBPckRUaGluZyA9IG1hcC5nZXREaWFncmFtKCkuZmluZE5vZGVGb3JLZXkobWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSk7XHJcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWFwLmdldERpYWdyYW0oKS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZWxlY3RMaW5rZWRUaGluZ3NGb3IoZ3JvdXAsIGNhdGVnb3J5KSB7XHJcbiAgICAgICAgc2VsZWN0aW5nTGlua2VkVGhpbmdzID0gdHJ1ZTtcclxuICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmNsZWFyU2VsZWN0aW9uKCk7XHJcblxyXG4gICAgICAgIHZhciBsaW5rcyA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09IGNhdGVnb3J5KVxyXG4gICAgICAgICAgICAgICAgbGluay50b05vZGUuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxlY3RpbmdMaW5rZWRUaGluZ3MgPSBmYWxzZTtcclxuICAgIH1cclxufTsiLCIvLyBmdW5jdGlvbnMgZm9yIHRoZSBwcmVzZW50ZXIvc2xpZGVzXHJcblxyXG5TYW5kYmFua0VkaXRvci5QcmVzZW50ZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgLy8gY29uc3RhbnRzXHJcbiAgICB0aGlzLlNMSURFX0JMT0NLRVJfV0lEVEggPSAxMDAwO1xyXG4gICAgdGhpcy5TTElERV9CTE9DS0VSX0NPTE9SID0gXCIjZmZmXCI7XHJcbiAgICB0aGlzLlNMSURFX0JMT0NLRVJfT1BBQ0lUWSA9IDAuOTtcclxuXHJcbiAgICAvLyBzdGF0ZSB2YXJzXHJcbiAgICB0aGlzLmN1cnJlbnRTbGlkZUluZGV4ID0gbnVsbDtcclxuICAgIHRoaXMuaXNQcmVzZW50aW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLnNob3dUT0MgPSBmYWxzZTtcclxuICAgIHRoaXMuaXNDcmVhdGluZ1RodW1ibmFpbCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIG1hc2sgYXBwbGllZCBhcm91bmQgc2xpZGUgcmVnaW9uIHdoZW4gcHJlc2VudGluZ1xyXG4gICAgdGhpcy5zbGlkZUJsb2NrZXIgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuZGlhZ3JhbUFzcGVjdFJhdGlvID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYXV0b3NhdmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBtYXAuZ2V0QXV0b3NhdmUoKS5zYXZlKCdlZGl0X3ByZXNlbnRlcicpOyBcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLSBlZGl0aW5nIGZ1bmN0aW9ucyBmb3IgZGlmZmVyZW50IHNsaWRlIHR5cGVzIC0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBOQjogaGFzTGlua3MgY2FuIGhhdmUgdmFsdWVzIGZhbHNlLCAxLCBvciB0cnVlICgxIG1lYW5zIG9ubHkgYSBzaW5nbGUgbGluaylcclxuICAgIHRoaXMuc2xpZGVUeXBlcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdUSVRMRV9CT0RZJywgbGFiZWw6ICdUaXRsZSBhbmQgQm9keScsXHJcbiAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCAgaGFzTm90ZXM6IHRydWUsICBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IGZhbHNlLCBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgICBuYW1lOiAnVElUTEVfQk9EWV9NQVAnLCBsYWJlbDogJ1RpdGxlLCBCb2R5IGFuZCBNZXRhTWFwJyxcclxuICAgICAgICAgICAgaGFzVGl0bGU6IHRydWUsICBoYXNOb3RlczogdHJ1ZSwgIGhhc0NoZWNrczogZmFsc2UsIGhhc01hcFJlZ2lvbjogdHJ1ZSwgIGhhc01hcFN1bW1hcnk6IGZhbHNlLCBoYXNMaW5rczogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIG5hbWU6ICdBQ1RJVklUWV9NQVAnLCBsYWJlbDogJ0xlc3NvbiBBY3Rpdml0eSBhbmQgTWV0YU1hcCcsXHJcbiAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCAgaGFzTm90ZXM6IHRydWUsICBoYXNDaGVja3M6IHRydWUsICBoYXNNYXBSZWdpb246IHRydWUsICBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIG5hbWU6ICdNQVBfT05MWScsIGxhYmVsOiAnTWV0YU1hcCBvbmx5JyxcclxuICAgICAgICAgICAgaGFzVGl0bGU6IHRydWUsICBoYXNOb3RlczogZmFsc2UsIGhhc0NoZWNrczogZmFsc2UsIGhhc01hcFJlZ2lvbjogdHJ1ZSwgIGhhc01hcFN1bW1hcnk6IGZhbHNlLCBoYXNMaW5rczogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIG5hbWU6ICdNQVBfU1VNTUFSWScsIGxhYmVsOiAnTWV0YU1hcCBTdW1tYXJ5JyxcclxuICAgICAgICAgICAgaGFzVGl0bGU6IGZhbHNlLCBoYXNOb3RlczogZmFsc2UsIGhhc0NoZWNrczogZmFsc2UsIGhhc01hcFJlZ2lvbjogdHJ1ZSwgaGFzTWFwU3VtbWFyeTogdHJ1ZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgXTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0gbGluay9hdHRhY2htZW50IHR5cGVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5saW5rVHlwZXMgPSBbXHJcbiAgICAgICAgeyBuYW1lOiAnJywgbGFiZWw6ICctLSBTZWxlY3QgYXR0YWNobWVudCB0eXBlIC0tJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ1dFQicsIGxhYmVsOiAnV2ViIFBhZ2UnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnUERGJywgbGFiZWw6ICdQREYnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnRE9DJywgbGFiZWw6ICdEb2N1bWVudCcgfSxcclxuICAgICAgICB7IG5hbWU6ICdTUFJFQURTSEVFVCcsIGxhYmVsOiAnU3ByZWFkc2hlZXQnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnUFJFU0VOVEFUSU9OJywgbGFiZWw6ICdQcmVzZW50YXRpb24nIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnTUVUQU1BUCcsIGxhYmVsOiAnTWV0YU1hcCcgfSxcclxuICAgICAgICB7IG5hbWU6ICdJTUFHRScsIGxhYmVsOiAnSW1hZ2UnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnQVVESU8nLCBsYWJlbDogJ0F1ZGlvJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ1ZJREVPJywgbGFiZWw6ICdWaWRlbycgfSxcclxuICAgICAgICB7IG5hbWU6ICdTVVJWRVknLCBsYWJlbDogJ1N1cnZleScgfSxcclxuICAgICAgICB7IG5hbWU6ICdXT1JLU0hFRVQnLCBsYWJlbDogJ1dvcmtzaGVldCcgfVxyXG4gICAgXTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gbGlzdCBvZiBhbGwgdGhpbmdzIGluIHRoZSBtYXAsIGZvciBtYXAgc3VtbWFyeSBzbGlkZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5pZGVhTGlzdCA9ICcnO1xyXG5cclxuICAgIC8vIG9ubHkgY2FsbCB0aGlzIG9jY2FzaW9uYWxseSwgYXMgdGhleSB3b24ndCBiZSBlZGl0aW5nIHRoZSBtYXAgd2hpbGUgcHJlc2VudGVyIGlzIG9wZW5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZUlkZWFMaXN0KCkge1xyXG4gICAgICAgIHZhciBub2RlcyA9IG1hcC5nZXREaWFncmFtKCkubm9kZXM7XHJcbiAgICAgICAgdmFyIGxpc3QgPSBbXTtcclxuICAgICAgICB3aGlsZSAobm9kZXMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICgobm9kZXMudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkpIHtcclxuICAgICAgICAgICAgICAgIGxpc3QucHVzaChub2Rlcy52YWx1ZS5kYXRhLnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpc3Quc29ydCgpO1xyXG5cclxuICAgICAgICAvLyBmaWx0ZXIgb3V0IHBsYWNlaG9sZGVyIG5hbWVzIC0gc2VlIG1hcC5qczpnZXROZXdUaGluZ0RhdGEsIGNyZWF0ZVNpc3RlciwgZXRjLlxyXG4gICAgICAgIGxpc3QgPSBfLmRpZmZlcmVuY2UoXy51bmlxKGxpc3QsIHRydWUpLCBcclxuICAgICAgICAgICAgbWFwLmdldEdlbmVyYXRvcigpLmdldFBsYWNlaG9sZGVySWRlYU5hbWVzKCksIFxyXG4gICAgICAgICAgICBbJ05ldyBJZGVhJywgJ05ldyBEaXN0aW5ndWlzaGVkIElkZWEnLCAnTmV3IFJlbGF0ZWQgSWRlYScsICdOZXcgUmVsYXRpb25zaGlwIElkZWEnLCAnTmV3IFBhcnQgSWRlYScsXHJcbiAgICAgICAgICAgICAnSWRlYScsICdQYXJ0JywgJ1JlbGF0aW9uc2hpcCBJZGVhJ10gLy8gbmV3ZXIgc2ltcGxpZmllZCBuYW1lc1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHNlbGYuaWRlYUxpc3QgPSBsaXN0LmpvaW4oJywgJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zdW1tYXJ5QW5hbHl0aWNzID0gW1xyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1RISU5HUycsIHNpbmd1bGFyTGFiZWw6ICdEaXN0aW5jdGlvbicsIHBsdXJhbExhYmVsOiAnRGlzdGluY3Rpb25zJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1NZU1RFTVMnLCBzaW5ndWxhckxhYmVsOiAnU3lzdGVtJywgcGx1cmFsTGFiZWw6ICdTeXN0ZW1zJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1JFTEFUSU9OU0hJUFMnLCBzaW5ndWxhckxhYmVsOiAnUmVsYXRpb25zaGlwJywgcGx1cmFsTGFiZWw6ICdSZWxhdGlvbnNoaXBzJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1BFUlNQRUNUSVZFUycsIHNpbmd1bGFyTGFiZWw6ICdQZXJzcGVjdGl2ZScsIHBsdXJhbExhYmVsOiAnUGVyc3BlY3RpdmVzJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1JUSElOR1MnLCBzaW5ndWxhckxhYmVsOiAnUmVsYXRpb25zaGlwIElkZWEnLCBwbHVyYWxMYWJlbDogJ1JlbGF0aW9uc2hpcCBJZGVhcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9TWVNURU1fUlRISU5HUycsIHNpbmd1bGFyTGFiZWw6ICdSZWxhdGlvbnNoaXAgU3lzdGVtJywgcGx1cmFsTGFiZWw6ICdSZWxhdGlvbnNoaXAgU3lzdGVtcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9TWVNURU1fUEVSU1BFQ1RJVkVTJywgc2luZ3VsYXJMYWJlbDogJ1BlcnNwZWN0aXZlIFN5c3RlbScsIHBsdXJhbExhYmVsOiAnUGVyc3BlY3RpdmUgU3lzdGVtcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9ESVNUSU5DVElPTlMnLCBzaW5ndWxhckxhYmVsOiAnQWR2YW5jZWQgRGlzdGluY3Rpb24nLCBwbHVyYWxMYWJlbDogJ0FkdmFuY2VkIERpc3RpbmN0aW9ucycgfSxcclxuICAgIF07XHJcblxyXG4gICAgdGhpcy5hZGRDaGVjayA9IGZ1bmN0aW9uKG5vZGVEYXRhKSB7XHJcbiAgICAgICAgIG5vZGVEYXRhLmNoZWNrcy5wdXNoKHsgdGV4dDogJycgfSk7XHJcbiAgICAgICAgIHNlbGYuYXV0b3NhdmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kZWxldGVDaGVjayA9IGZ1bmN0aW9uIChjaGVjaywgbm9kZURhdGEpIHtcclxuICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZihub2RlRGF0YS5jaGVja3MsIGNoZWNrKTtcclxuICAgICAgICBub2RlRGF0YS5jaGVja3Muc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIHNlbGYuYXV0b3NhdmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hZGRMaW5rID0gZnVuY3Rpb24obm9kZURhdGEpIHtcclxuICAgICAgICBub2RlRGF0YS5saW5rcy5wdXNoKHsgdGl0bGU6ICcnLCB1cmw6ICcnLCB0eXBlOiAnJyB9KTtcclxuICAgICAgICBzZWxmLmF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGVsZXRlTGluayA9IGZ1bmN0aW9uIChsaW5rLCBub2RlRGF0YSkge1xyXG4gICAgICAgIHZhciBpID0gXy5pbmRleE9mKG5vZGVEYXRhLmxpbmtzLCBsaW5rKTtcclxuICAgICAgICBub2RlRGF0YS5saW5rcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgc2VsZi5hdXRvc2F2ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZVRPQyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmlzUHJlc2VudGluZykge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zaG93VE9DID0gIXNlbGYuc2hvd1RPQztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBOQjogY2FuJ3QgY3JlYXRlIHRoaXMgaW4gaW5pdCBhcyB0aGUgZGlhZ3JhbSBkb2Vzbid0IGV4aXN0IHlldC4uLlxyXG4gICAgZnVuY3Rpb24gbWF5YmVJbml0U2xpZGVCbG9ja2VyKCkge1xyXG4gICAgICAgIGlmICghc2VsZi5zbGlkZUJsb2NrZXIpIHtcclxuICAgICAgICAgICAgdmFyIG1rID0gZ28uR3JhcGhPYmplY3QubWFrZTtcclxuICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIgPSBtayhnby5Ob2RlLCBnby5QYW5lbC5BdXRvLFxyXG4gICAgICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgICAgICBsYXllck5hbWU6ICdUb29sJyxcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBzZWxmLlNMSURFX0JMT0NLRVJfT1BBQ0lUWVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBzZWxmLlNMSURFX0JMT0NLRVJfQ09MT1IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOjEwMDBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkuYWRkKHNlbGYuc2xpZGVCbG9ja2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChvbGRWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSB7IC8vIGNsb3NpbmcgdGFiXHJcbiAgICAgICAgICAgIHNlbGYuc3RvcFByZXNlbnRpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUikgeyAvLyBvcGVuaW5nIHRhYlxyXG4gICAgICAgICAgICAvLyBzaG93IHNsaWRlcyAoc2VlIGxheW91dHMuc2xpZGVUZW1wbGF0ZSwgYmluZGluZyBvZiB2aXNpYmxlIGF0dHIpXHJcbiAgICAgICAgICAgIHNlbGYuZGlhZ3JhbUFzcGVjdFJhdGlvID0gJCgnI2RpYWdyYW0nKS53aWR0aCgpIC8gJCgnI2RpYWdyYW0nKS5oZWlnaHQoKTsgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGlhZ3JhbUFzcGVjdFJhdGlvOiAnICsgc2VsZi5kaWFncmFtQXNwZWN0UmF0aW8pO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLm1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgdXBkYXRlSWRlYUxpc3QoKTtcclxuICAgICAgICAgICAgaWYgKCFzZWxmLmN1cnJlbnRTbGlkZUluZGV4ICYmIHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRTbGlkZUluZGV4ID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLnNsaWRlVGh1bWJuYWlsU2VsZWN0ZWQoMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoIW1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25EZWxldGluZycpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGUuc3ViamVjdDtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGlvbi5jb3VudCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcgPSBzZWxlY3Rpb24uZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGluZyBpbnN0YW5jZW9mIGdvLk5vZGUgJiYgdGhpbmcuZGF0YS5jYXRlZ29yeSA9PSAnc2xpZGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maXJtKFwiRGVsZXRlIHRoaXMgc2xpZGUgZnJvbSB0aGUgcHJlc2VudGF0aW9uP1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLmNhbmNlbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnU2VsZWN0aW9uRGVsZXRlZCcpIHtcclxuICAgICAgICAgICAgLy8gaWYgc2xpZGUgaXMgZGVsZXRlZCBmcm9tIGNhbnZhcyByYXRoZXIgdGhhbiBieSB0aHVtYm5haWwgeCBidXR0b24sIG5lZWQgdG8gdXBkYXRlIGluZGV4ZXNcclxuICAgICAgICAgICAgY29tcGFjdFNsaWRlSW5kZXhlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1NlbGVjdGlvbk1vdmVkJyB8fCBldmVudE5hbWUgPT0gJ1BhcnRSZXNpemVkJykge1xyXG4gICAgICAgICAgICAvLyBjbGVhciB0aHVtYm5haWwgY2FjaGVcclxuICAgICAgICAgICAgdGh1bWJuYWlsQ2FjaGUgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXZlbnROYW1lID09ICdWaWV3cG9ydEJvdW5kc0NoYW5nZWQnKSB7XHJcbiAgICAgICAgICAgIC8vIGFkanVzdCB6b29taW5nIG9mIG1hcCByZWdpb25cclxuICAgICAgICAgICAgLy9zZWxmLndpbmRvd1Jlc2l6ZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMud2luZG93UmVzaXplZCA9IF8uZGVib3VuY2UoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2VsZi5zbGlkZVRodW1ibmFpbFNlbGVjdGVkKHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xyXG4gICAgfSwgMTAwMCk7XHJcblxyXG4gICAgdGhpcy5zaG93U2lkZWJhciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUikgJiYgKCFzZWxmLmlzUHJlc2VudGluZyB8fCBzZWxmLnNob3dUT0MpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmRpc2FibGVNYXBUb29sYmFyQnV0dG9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAhbWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9QUkVTRU5URVIpIFxyXG4gICAgICAgICAgICB8fCBzZWxmLmlzUHJlc2VudGluZyBcclxuICAgICAgICAgICAgfHwgIXNlbGYuZ2V0Q3VycmVudFNsaWRlVHlwZSgpLmhhc01hcFJlZ2lvbjtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIGFuIGFycmF5IG9mIG5vZGUgZGF0YSBvYmplY3RzIChub3QgdGhlIHNsaWRlIG5vZGVzIHRoZW1zZWx2ZXMpXHJcbiAgICB0aGlzLmdldFNsaWRlTm9kZURhdGFzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgbm9kZXMgPSBkaWFncmFtLm1vZGVsLm5vZGVEYXRhQXJyYXk7XHJcbiAgICAgICAgdmFyIG5vZGVEYXRhcyA9IF8uZmlsdGVyKG5vZGVzLCBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZS5jYXRlZ29yeSA9PSAnc2xpZGUnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG5vZGVEYXRhcyA9IF8uc29ydEJ5KG5vZGVEYXRhcywgZnVuY3Rpb24gKG5vZGVEYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlRGF0YS5pbmRleDtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTbGlkZU5vZGVEYXRhcywgaW5kZXhlczogJyArIF8ucGx1Y2soc2xpZGVzRGF0YSwgJ2luZGV4JykpO1xyXG4gICAgICAgIHJldHVybiBub2RlRGF0YXM7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0U2xpZGVDb3VudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmdldFNsaWRlTm9kZURhdGFzKCkubGVuZ3RoO1xyXG4gICAgfTsgIFxyXG5cclxuICAgIHRoaXMuZ2V0QWN0aXZpdHlTbGlkZUNvdW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF8ud2hlcmUoc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLCB7IHR5cGU6ICdBQ1RJVklUWV9NQVAnIH0pLmxlbmd0aDtcclxuICAgIH07ICBcclxuXHJcbiAgICB0aGlzLmdldFNsaWRlVHlwZSA9IGZ1bmN0aW9uKHR5cGVOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIF8uZmluZFdoZXJlKHNlbGYuc2xpZGVUeXBlcywgeyBuYW1lOiB0eXBlTmFtZSB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRDdXJyZW50U2xpZGVUeXBlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF8uZmluZFdoZXJlKHNlbGYuc2xpZGVUeXBlcywgeyBuYW1lOiBzbGlkZS5kYXRhLnR5cGUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBmaW5kU2xpZGVCeUluZGV4KGluZGV4KSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHZhciBzbGlkZURhdGEgPSBfLmZpbmQoc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLCBmdW5jdGlvbiAoc2xpZGVEYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzbGlkZURhdGEuaW5kZXggPT0gaW5kZXg7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHNsaWRlRGF0YSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkaWFncmFtLmZpbmROb2RlRm9yS2V5KHNsaWRlRGF0YS5rZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaW5jcmVtZW50IGlzIC0xIG9yICsxXHJcbiAgICB0aGlzLm1vdmVTbGlkZSA9IGZ1bmN0aW9uIChpbmRleCwgaW5jcmVtZW50KSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTtcclxuICAgICAgICAgICAgdmFyIG5laWdoYm9yID0gZmluZFNsaWRlQnlJbmRleChpbmRleCArIGluY3JlbWVudCk7XHJcbiAgICAgICAgICAgIGlmIChzbGlkZSAmJiBuZWlnaGJvcikge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbW92ZVNsaWRlOiBzd2FwcGluZyAnICsgc2xpZGUuZGF0YS5rZXkgKyAnIHdpdGggJyArIG5laWdoYm9yLmRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcIm1vdmUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzbGlkZS5kYXRhLCAnaW5kZXgnLCBzbGlkZS5kYXRhLmluZGV4ICsgaW5jcmVtZW50KTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5laWdoYm9yLmRhdGEsICdpbmRleCcsIG5laWdoYm9yLmRhdGEuaW5kZXggLSBpbmNyZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcIm1vdmUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgICAgICB0aHVtYm5haWxDYWNoZSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbXBhY3RTbGlkZUluZGV4ZXMoKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY29tcGFjdFNsaWRlSW5kZXhlcycpO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGVzRGF0YSA9IHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKTtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgbmV3SW5kZXggPSAxO1xyXG4gICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJjb21wYWN0IHNsaWRlIGluZGV4ZXNcIik7XHJcbiAgICAgICAgICAgIF8uZWFjaChzbGlkZXNEYXRhLCBmdW5jdGlvbiAoc2xpZGVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzbGlkZURhdGEsICdpbmRleCcsIG5ld0luZGV4KTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NvbXBhY3RTbGlkZUluZGV4ZXM6IHNldCBpbmRleCBmb3IgJyArIHNsaWRlRGF0YS5rZXkgKyAnIHRvICcgKyBuZXdJbmRleCk7XHJcbiAgICAgICAgICAgICAgICBuZXdJbmRleCsrO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImNvbXBhY3Qgc2xpZGUgaW5kZXhlc1wiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXROZXdTbGlkZUtleSgpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIGkgPSAxO1xyXG4gICAgICAgIHdoaWxlIChkaWFncmFtLm1vZGVsLmZpbmROb2RlRGF0YUZvcktleSgnc2xpZGUtJyArIGkpKSB7XHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICdzbGlkZS0nICsgaTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBOQjogaW5kZXhlcyAoYW5kIGtleXM/KSBtdXN0IGJlIDEtYmFzZWQsIG90aGVyd2lzZSBmaXJzdCBzbGlkZSBnZXRzIHNjcmV3ZWQgdXBcclxuICAgIC8vIChzb21ld2hlcmUgdGhlIGluZGV4IHNob3dzIHVwIGFzICcnIGluc3RlYWQgb2YgMClcclxuICAgIGZ1bmN0aW9uIGdldE5ld1NsaWRlSW5kZXgoKSB7XHJcbiAgICAgICAgdmFyIHNsaWRlcyA9IHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKTtcclxuICAgICAgICByZXR1cm4gc2xpZGVzLmxlbmd0aCArIDE7IFxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYWRkU2xpZGUgPSBmdW5jdGlvbiAodHlwZU5hbWUpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYWRkU2xpZGU6ICcgKyB0eXBlTmFtZSk7XHJcbiAgICAgICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYiA9IG1hcC5jb21wdXRlTWFwQm91bmRzKCk7XHJcbiAgICAgICAgICAgIGRiLmluZmxhdGUoZGIud2lkdGggLyAyMCwgZGIuaGVpZ2h0IC8gMTApO1xyXG4gICAgICAgICAgICB2YXIgbmV3TG9jID0gZGIueCArICcgJyArIGRiLnk7XHJcbiAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IGdldE5ld1NsaWRlSW5kZXgoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzbGlkZVR5cGUgPSBfLmZpbmRXaGVyZShzZWxmLnNsaWRlVHlwZXMsIHsgbmFtZTogdHlwZU5hbWUgfSk7XHJcblxyXG4gICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJhZGQgc2xpZGVcIik7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoe1xyXG4gICAgICAgICAgICAgICAga2V5OiBnZXROZXdTbGlkZUtleSgpLFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdzbGlkZScsXHJcbiAgICAgICAgICAgICAgICBpbmRleDogbmV3SW5kZXgsXHJcbiAgICAgICAgICAgICAgICBpc0dyb3VwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBkYi53aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogZGIuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgbG9jOiBuZXdMb2MsXHJcbiAgICAgICAgICAgICAgICBsZXZlbDogMCxcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAwLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZU5hbWUsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgICAgICAgICBub3RlczogJycsXHJcbiAgICAgICAgICAgICAgICBjaGVja3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgaGFzUmVnaW9uOiBzbGlkZVR5cGUuaGFzTWFwUmVnaW9uLFxyXG4gICAgICAgICAgICAgICAgaXNTdW1tYXJ5OiBzbGlkZVR5cGUuaGFzTWFwU3VtbWFyeSxcclxuICAgICAgICAgICAgICAgIGxpbmtzOiBbXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImFkZCBzbGlkZVwiKTtcclxuICAgICAgICAgICAgdGh1bWJuYWlsQ2FjaGUgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHNlbGYuc2xpZGVUaHVtYm5haWxTZWxlY3RlZChuZXdJbmRleCk7IC8vIHRyaWdnZXIgZGlzcGxheSBvZiBlZGl0IGZvcm0sIHpvb20gdG8gbWFwIHJlZ2lvbiBpZiBhcHBsaWNhYmxlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZHVwbGljYXRlU2xpZGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IGdldE5ld1NsaWRlSW5kZXgoKTtcclxuICAgICAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7IFxyXG4gICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcImR1cGxpY2F0ZSBzbGlkZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBidW1wIHVwIGluZGV4ZXMgb24gc3Vic2VxdWVudCBzbGlkZXMgdG8gbWFrZSByb29tIGZvciBuZXcgc2xpZGUgYWZ0ZXIgY3VycmVudCBvbmVcclxuICAgICAgICAgICAgICAgIF8uZWFjaChzZWxmLmdldFNsaWRlTm9kZURhdGFzKCksIGZ1bmN0aW9uIChzbGlkZURhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2xpZGVEYXRhLmluZGV4ID4gaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2xpZGVEYXRhLCAnaW5kZXgnLCBzbGlkZURhdGEuaW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBOQjogY3JlYXRpbmcgYSBuZXcgbm9kZURhdGEgb2JqZWN0IGhlcmUgcmF0aGVyIHRoYW4gY29weWluZyBhbmQgbW9kaWZ5aW5nLCB0byBhdm9pZCBjb3B5aW5nICQkaGFzaEtleSAoPz8pXHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLmFkZE5vZGVEYXRhKHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6IGdldE5ld1NsaWRlS2V5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdzbGlkZScsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4ICsgMSxcclxuICAgICAgICAgICAgICAgICAgICBpc0dyb3VwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogc2xpZGUuZGF0YS53aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHNsaWRlLmRhdGEuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxvYzogc2xpZGUuZGF0YS5sb2MsXHJcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogc2xpZGUuZGF0YS50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBzbGlkZS5kYXRhLnRpdGxlICsgJyAoQ29weSknLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vdGVzOiBzbGlkZS5kYXRhLm5vdGVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrczogc2xpZGUuZGF0YS5jaGVja3MsIC8vIGNsb25lP1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc1JlZ2lvbjogc2xpZGUuZGF0YS5oYXNSZWdpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgaXNTdW1tYXJ5OiBzbGlkZS5kYXRhLmlzU3VtbWFyeSxcclxuICAgICAgICAgICAgICAgICAgICBsaW5rczogc2xpZGUuZGF0YS5saW5rcyAvLyBjbG9uZT9cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImR1cGxpY2F0ZSBzbGlkZVwiKTtcclxuICAgICAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5yZW1vdmVTbGlkZSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3JlbW92ZVNsaWRlOiAnICsgaW5kZXgpO1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpOyBcclxuICAgICAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJyZW1vdmUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnJlbW92ZU5vZGVEYXRhKHNsaWRlLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcInJlbW92ZSBzbGlkZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRTbGlkZUluZGV4ID0gbnVsbDtcclxuICAgICAgICAgICAgdGh1bWJuYWlsQ2FjaGUgPSBbXTtcclxuICAgICAgICAgICAgY29tcGFjdFNsaWRlSW5kZXhlcygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgdGh1bWJuYWlsQ2FjaGUgPSBbXTtcclxuXHJcbiAgICB0aGlzLmdldFNsaWRlVGh1bWJuYWlsID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRodW1ibmFpbENhY2hlW2luZGV4XTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGVTbGlkZVRodW1ibmFpbHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBfLmVhY2goc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLCBmdW5jdGlvbihuZCkgeyBcclxuICAgICAgICAgICAgc2VsZi5jcmVhdGVTbGlkZVRodW1ibmFpbChuZC5pbmRleCk7IFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNyZWF0ZVNsaWRlVGh1bWJuYWlsID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnY3JlYXRlU2xpZGVUaHVtYm5haWwnKTtcclxuXHJcbiAgICAgICAgdmFyIHRodW1iV2lkdGggPSAxMDAwO1xyXG4gICAgICAgIHZhciB0aHVtYkhlaWdodCA9IDYwMDtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcblxyXG4gICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpO1xyXG4gICAgICAgIGlmICghc2xpZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghc2xpZGUuZGF0YS5oYXNSZWdpb24gJiYgIXNsaWRlLmRhdGEuaXNTdW1tYXJ5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBkYiA9IGRpYWdyYW0uZG9jdW1lbnRCb3VuZHM7XHJcbiAgICAgICAgICAgIHZhciBzYjtcclxuICAgICAgICAgICAgaWYgKHNsaWRlLmRhdGEuaXNTdW1tYXJ5KSB7IC8vIGZvciBhIHN1bW1hcnkgc2xpZGUgd2Ugc2hvb3QgdGhlIHdob2xlIG1hcFxyXG4gICAgICAgICAgICAgICAgc2IgPSBtYXAuc2FmZVJlY3QobWFwLmNvbXB1dGVNYXBCb3VuZHMoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7IC8vIG90aGVyd2lzZSBqdXN0IHNob290IHRoZSBzbGlkZSByZWdpb25cclxuICAgICAgICAgICAgICAgIHNiID0gc2xpZGUucGFydC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBpbWFnZVBvc2l0aW9uID0gbmV3IGdvLlBvaW50KHNiLngsIHNiLnkpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTbGlkZVRodW1ibmFpbCwgc2xpZGUgYm91bmRzOiAnICsgc2IgKyAnLCBkb2N1bWVudCBib3VuZHM6ICcgKyBkYiArICcsIGltYWdlUG9zaXRpb246ICcgKyBpbWFnZVBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB3U2NhbGUgPSB0aHVtYldpZHRoIC8gc2Iud2lkdGg7XHJcbiAgICAgICAgICAgIHZhciBoU2NhbGUgPSB0aHVtYkhlaWdodCAvIHNiLmhlaWdodDtcclxuICAgICAgICAgICAgdmFyIHRodW1iU2NhbGUgPSBNYXRoLm1pbih3U2NhbGUsIGhTY2FsZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY2FsZTogJyArIHdTY2FsZSArICcsJyArIGhTY2FsZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdyA9IHRodW1iU2NhbGUgKiBzYi53aWR0aDtcclxuICAgICAgICAgICAgdmFyIGggPSB0aHVtYlNjYWxlICogc2IuaGVpZ2h0O1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd0aHVtYm5haWwgdy9oOiAnICsgdyArICcsJyArIGgpO1xyXG5cclxuICAgICAgICAgICAgLy8gaGlkZSBzbGlkZXMgdGVtcG9yYXJpbHkgd2hpbGUgY3JlYXRpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IHRydWU7XHJcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSB0aHVtYlNjYWxlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGltZ0RhdGEgPSBkaWFncmFtLm1ha2VJbWFnZURhdGEoe1xyXG4gICAgICAgICAgICAgICAgc2l6ZTogbmV3IGdvLlNpemUodywgaCksXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogaW1hZ2VQb3NpdGlvbixcclxuICAgICAgICAgICAgICAgIHNjYWxlOiB0aHVtYlNjYWxlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc2VsZi5pc0NyZWF0aW5nVGh1bWJuYWlsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgICAgIHRodW1ibmFpbENhY2hlW2luZGV4XSA9IGltZ0RhdGE7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaW1nRGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGdldHMgYSB0aHVtYm5haWwgb2YgdGhlIHdob2xlIG1hcCwgZm9yIHNhdmluZyAoc2VlIGF1dG9zYXZlLmpzKVxyXG4gICAgdGhpcy5nZXRNYXBUaHVtYm5haWwgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgc2IgPSBtYXAuc2FmZVJlY3QobWFwLmNvbXB1dGVNYXBCb3VuZHMoKSk7XHJcbiAgICAgICAgc2IuZ3JvdygxMCwxMCwxMCwxMCk7XHJcbiAgICAgICAgdmFyIHcgPSAxNTA7XHJcbiAgICAgICAgdmFyIGggPSAxMDA7XHJcblxyXG4gICAgICAgIC8vIGhpZGUgc2xpZGVzIHRlbXBvcmFyaWx5IHdoaWxlIGNyZWF0aW5nIHRodW1ibmFpbFxyXG4gICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IHRydWU7XHJcbiAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG5cclxuICAgICAgICB2YXIgaW1nRGF0YSA9IGRpYWdyYW0ubWFrZUltYWdlRGF0YSh7XHJcbiAgICAgICAgICAgIHNjYWxlOiBNYXRoLm1pbihoIC8gc2IuaGVpZ2h0LCB3IC8gc2Iud2lkdGgpLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KHNiLngsIHNiLnkpLFxyXG4gICAgICAgICAgICBzaXplOm5ldyBnby5TaXplKHcsIGgpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IGZhbHNlO1xyXG4gICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGltZ0RhdGE7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyBjYWxsZWQgdmlhIG5nLWNsaWNrIG9uIHRodW1ibmFpbFxyXG4gICAgdGhpcy5zbGlkZVRodW1ibmFpbFNlbGVjdGVkID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2xpZGVUaHVtYm5haWxTZWxlY3RlZDogJyArIGluZGV4KTtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcblxyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIE5COiBvcmRlciBvZiBzdGF0ZW1lbnRzIGlzIGltcG9ydGFudCBoZXJlLCBhcyBzZWxlY3RTbGlkZSBjYW4gdHJpZ2dlciBjaGFuZ2VkU2VsZWN0aW9uIHdpdGggYW4gZW1wdHkgc2VsZWN0aW9uIHNvbWV0aW1lcy4uLiA/P1xyXG4gICAgICAgICAgICBzZWxlY3RTbGlkZShpbmRleCk7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpOyAvLyBzaG93L2hpZGUgc2xpZGUgbm9kZXMgLSBzZWUgdGVtcGxhdGVzLmpzOiBzbGlkZVRlbXBsYXRlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIHpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc1ByZXNlbnRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dUT0MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm5lZWRzTmFycm93Q2FudmFzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICByZXR1cm4gbWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9QUkVTRU5URVIpICYmIFxyXG4gICAgICAgICAgIHNsaWRlICE9IG51bGwgJiYgXHJcbiAgICAgICAgICAgKHNsaWRlLmRhdGEudHlwZSA9PSAnVElUTEVfQk9EWV9NQVAnIHx8IHNsaWRlLmRhdGEudHlwZSA9PSAnQUNUSVZJVFlfTUFQJyB8fCBzbGlkZS5kYXRhLnR5cGUgPT0gJ01BUF9TVU1NQVJZJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNldHMgdGhlIHNsaWRlIG5vZGUgYXMgc2VsZWN0ZWQgaW4gdGhlIGRpYWdyYW0uXHJcbiAgICBmdW5jdGlvbiBzZWxlY3RTbGlkZShpbmRleCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3NlbGVjdCBzbGlkZTogJyArIGluZGV4KTtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiBzY3JvbGwgdG8gc2xpZGU/XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wbGF5U2xpZGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgbWFwLmdldFVpKCkub3BlblRhYihtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKTsgXHJcblxyXG4gICAgICAgIHZhciBzbGlkZXMgPSBzZWxmLmdldFNsaWRlTm9kZURhdGFzKCk7XHJcbiAgICAgICAgaWYgKHNsaWRlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc2VsZi5zaG93VE9DID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHByZXNlbnRTbGlkZShpbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBpbmNyZW1lbnQgaXMgLTEgb3IgKzFcclxuICAgIHRoaXMuYWR2YW5jZVNsaWRlID0gZnVuY3Rpb24gKGluY3JlbWVudCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2FkdmFuY2VTbGlkZSwgY3VycmVudFNsaWRlSW5kZXg6ICcgKyBzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggKz0gKGluY3JlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc1ByZXNlbnRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVzZW50U2xpZGUoc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gcHJlc2VudFNsaWRlKGluZGV4KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygncHJlc2VudFNsaWRlJyk7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTtcclxuICAgICAgICAgICAgaWYgKCFzbGlkZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIC8vIE5COiBuZWVkIHRvIHNldCB0aGlzIGFmdGVyIGNsZWFyU2VsZWN0aW9uLCBhcyB0aGF0IHdpbGwgc2V0IGl0IHRvIG51bGwhIChzZWUgY2hhbmdlZFNlbGVjdGlvbilcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50U2xpZGVJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3ByZXNlbnRTbGlkZSwgaW5kZXg6ICcgKyBpbmRleCArICcsIHNsaWRlOiAnICsgc2xpZGUgKyAnLCBjdXJyZW50U2xpZGVJbmRleDogJyArIHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xyXG5cclxuICAgICAgICAgICAgbWF5YmVJbml0U2xpZGVCbG9ja2VyKCk7XHJcbiAgICAgICAgICAgIHZhciBibG9ja2VyVyA9IHNlbGYuU0xJREVfQkxPQ0tFUl9XSURUSDtcclxuXHJcbiAgICAgICAgICAgIGlmIChzbGlkZS5kYXRhLmhhc1JlZ2lvbikge1xyXG4gICAgICAgICAgICAgICAgem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2hvdyBzbGlkZSBibG9ja2VyXHJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci5kZXNpcmVkU2l6ZSA9IG5ldyBnby5TaXplKFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlLmFjdHVhbEJvdW5kcy53aWR0aCArIDIgKiBibG9ja2VyVywgXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuYWN0dWFsQm91bmRzLmhlaWdodCArIDIgKiBibG9ja2VyVyk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci5sb2NhdGlvbiA9IG5ldyBnby5Qb2ludChcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMueCAtIGJsb2NrZXJXLCBcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMueSAtIGJsb2NrZXJXKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2xpZGVCbG9ja2VyLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc2xpZGVCbG9ja2VyOiAnICsgc2VsZi5zbGlkZUJsb2NrZXIuYWN0dWFsQm91bmRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzbGlkZS5kYXRhLmlzU3VtbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5yZXNldFpvb20oKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2xpZGVCbG9ja2VyLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2VsZi5pc1ByZXNlbnRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3ByZXNlbnRlci1wbGF5aW5nJyk7XHJcblxyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7IC8vIGhpZGUgc2xpZGUgbm9kZXMgLSBzZWUgdGVtcGxhdGVzLmpzOiBzbGlkZVRlbXBsYXRlXHJcbiAgICAgICAgfSk7ICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICAvLyB6b29tIHRoZSBkaWFncmFtIHRvIHNob3cgdGhlIGdpdmVuIHNsaWRlIGluIHRoZSBjZW50ZXIgb2YgdGhlIGNhbnZhc1xyXG4gICAgZnVuY3Rpb24gem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSlcclxuICAgIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyIGhhbGZXaWR0aCA9IChzbGlkZS5kYXRhLnR5cGUgIT0gJ01BUF9PTkxZJyk7XHJcbiAgICAgICAgdmFyIHpvb21SZWN0ID0gc2VsZi5nZXRMZXR0ZXJib3hlZFJlY3Qoc2xpZGUuYWN0dWFsQm91bmRzLCBoYWxmV2lkdGgpO1xyXG4gICAgICAgIHpvb21SZWN0LmluZmxhdGUoem9vbVJlY3Qud2lkdGggLyAxMCwgem9vbVJlY3QuaGVpZ2h0IC8gMTApO1xyXG4gICAgICAgIGRpYWdyYW0uem9vbVRvUmVjdCh6b29tUmVjdCwgZ28uRGlhZ3JhbS5Vbmlmb3JtKTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgYSByZWN0YW5nbGUgY29udGFpbmluZyB0aGUgZ2l2ZW4gcmVjdCwgYnV0IHdpdGggYXBwcm9wcmlhdGUgd2lkdGggb3IgaGVpZ2h0IGFkZGVkXHJcbiAgICAvLyB0byBnaXZlIGl0IHNhbWUgYXNwZWN0IHJhdGlvIGFzIHRoZSBkaWFncmFtLlxyXG4gICAgdGhpcy5nZXRMZXR0ZXJib3hlZFJlY3QgPSBmdW5jdGlvbiAocmVjdCwgaGFsZldpZHRoKSB7XHJcblxyXG4gICAgICAgIC8vIE5COiB3ZSBjYWxjdWxhdGUgdGhlIGFzcGVjdCByYXRpbyB3aGVuIHRoZSB0YWIgaXMgb3BlbmVkLCBcclxuICAgICAgICAvLyByYXRoZXIgdGhhbiBlYWNoIHRpbWUgYXMgdGhlIGRpYWdyYW0gc2l6ZSBtaWdodCBiZSBjaGFuZ2luZy4uLlxyXG4gICAgICAgIHZhciBkYXIgPSAoaGFsZldpZHRoID8gc2VsZi5kaWFncmFtQXNwZWN0UmF0aW8gLyAyIDogc2VsZi5kaWFncmFtQXNwZWN0UmF0aW8pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdyZWN0OiAnICsgcmVjdCArICcsIGRhcjogJyArIGRhcik7XHJcblxyXG4gICAgICAgIHZhciByZWN0QXNwZWN0UmF0aW8gPSByZWN0LndpZHRoIC8gcmVjdC5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmIChkYXIgPiByZWN0QXNwZWN0UmF0aW8pIHtcclxuICAgICAgICAgICAgLy8gdGFsbCBza2lubnkgcmVjdCwgc2hvcnQgd2lkZSB0YXJnZXQgQVIsIHNvIGFkZCBzaWRlIHBhZGRpbmcgdG8gdGhlIHJlY3RcclxuICAgICAgICAgICAgdmFyIGxidyA9IHJlY3QuaGVpZ2h0ICogZGFyOyAvLyBiZWNhdXNlIGxidyAvIGxiaCA9PSBkYXIgPT0gbGJ3IC8gcmVjdC5oZWlnaHQgKGxiaCA9PSByZWN0LmhlaWdodClcclxuICAgICAgICAgICAgcmV0dXJuIHJlY3QuY29weSgpLmluZmxhdGUoKGxidyAtIHJlY3Qud2lkdGgpIC8gMiwgMCk7IC8vIGFkZCBoYWxmIHRoZSB3aWR0aCBkaWZmZXJlbmNlIHRvIGVhY2ggc2lkZSBvZiB0aGUgcmVjdFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gc2hvcnQgd2lkZSByZWN0LCB0YWxsIHNraW5ueSB0YXJnZXQgQVIsIHNvIGFkZCB0b3AvYm90dG9tIHBhZGRpbmcgdG8gdGhlIHJlY3RcclxuICAgICAgICAgICAgdmFyIGxiaCA9IHJlY3Qud2lkdGggLyBkYXI7IC8vIGJlY2F1c2UgbGJ3IC8gbGJoID09IGRhciA9PSBsYmggLyByZWN0LndpZHRoIChsYncgPT0gcmVjdC53aWR0aClcclxuICAgICAgICAgICAgcmV0dXJuIHJlY3QuY29weSgpLmluZmxhdGUoMCwgKGxiaCAtIHJlY3QuaGVpZ2h0KSAvIDIpOyAgLy8gYWRkIGhhbGYgdGhlIGhlaWdodCBkaWZmZXJlbmNlIHRvIHRvcC9ib3R0b20gb2YgdGhlIHJlY3RcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc3RvcFByZXNlbnRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc3RvcFByZXNlbnRpbmcsIGN1cnJlbnRTbGlkZUluZGV4OiAnICsgc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzZWxmLnNsaWRlQmxvY2tlcikge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL3NlbGYuY3VycmVudFNsaWRlSW5kZXggPSBudWxsO1xyXG4gICAgICAgICAgICBzZWxmLmlzUHJlc2VudGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3ByZXNlbnRlci1wbGF5aW5nJyk7XHJcblxyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7IC8vIHNob3cgc2xpZGUgbm9kZXNcclxuXHJcbiAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKGZhbHNlKTtcclxuICAgICAgICAgICAgLy9tYXAuZ2V0VWkoKS5yZXNldFpvb20oKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG59O1xyXG4iLCIvLyBmdW5jdGlvbnMgZm9yIHNoYXJpbmcgbWFwcywgd2l0aCBhIG1vZGFsIGRpYWxvZ1xyXG5cclxud2luZG93LlNhbmRiYW5rU2hhcmluZyA9IHt9O1xyXG5cclxuU2FuZGJhbmtTaGFyaW5nID0gZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkbW9kYWwsICRsb2cpIHtcclxuXHJcbiAgICB0aGlzLm9wZW5Nb2RhbCA9IGZ1bmN0aW9uKG1hcElkcywgb25VcGRhdGUpIHtcclxuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZV9tYXBfc2hhcmluZ19tb2RhbC5odG1sJywgLy8gc2VlIHZpZXdzL3NoYXJlcy9fdGVtcGxhdGVfbWFwX3NoYXJpbmdfbW9kYWxcclxuICAgICAgICAgICAgYmFja2Ryb3A6ICdzdGF0aWMnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBzaGFyaW5nTW9kYWxDdHJsLFxyXG4gICAgICAgICAgICB3aW5kb3dDbGFzczogJ3NoYXJpbmctbW9kYWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICB1c2VySWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUudXNlcklkO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVzZXJQcm9maWxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1hcElkczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcElkcztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uVXBkYXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gY29udHJvbGxlciBmb3Igc2hhcmluZyBtb2RhbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB2YXIgc2hhcmluZ01vZGFsQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIHVzZXJJZCwgdXNlclByb2ZpbGUsIG1hcElkcywgb25VcGRhdGUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLnVzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUgPSB1c2VyUHJvZmlsZTtcclxuICAgICAgICAkc2NvcGUubWFwSWRzID0gbWFwSWRzO1xyXG5cclxuICAgICAgICAvLyBhbGwgZXhpc3Rpbmcgc2hhcmVzIGZvciBzZWxlY3RlZCBtYXBzXHJcbiAgICAgICAgLy8gZm9ybWF0OiBbe21hcElkOjEsIHNoYXJlSWQ6MSwgY2FuRWRpdDp0cnVlLCB1c2VySWQ6MiwgdXNlckVtYWlsOidmb29AYmFyLmNvbScsIGdyb3VwSWQ6bnVsbCwgb3JnYW5pemF0aW9uSWQ6bnVsbCwgaXNQdWJsaWM6ZmFsc2UgfSwgLi4uXVxyXG4gICAgICAgICRzY29wZS5tYXBTaGFyZXMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gZXhpc3Rpbmcgc2hhcmVzLCBncm91cGVkIGZvciBkaXNwbGF5XHJcbiAgICAgICAgLy8gZm9ybWF0OiBbe25hbWU6J2ZvbycsIHVzZXJFbWFpbDonZm9vQGJhci5jb20nLCB1c2VySWQ6IG51bGwsIGdyb3VwSWQ6IGlkLCBvcmdhbml6YXRpb25JZDogbnVsbCwgaXNQdWJsaWM6ZmFsc2UsIGNhbkVkaXQ6dHJ1ZSwgbWFwSWRzOlsxLDJdfSwgLi4uXVxyXG4gICAgICAgICRzY29wZS5leGlzdGluZ1NoYXJlcyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBuZXcgc2hhcmVzIGFkZGVkIGluIHRoZSBkaWFsb2cgXHJcbiAgICAgICAgLy8gZm9ybWF0OiBbe3NoYXJlVHlwZTpTSEFSRV9UWVBFX0lORElWSURVQUwsIHNoYXJlUGVybWlzc2lvbjpTSEFSRV9QRVJNSVNTSU9OX0NBTlZJRVcsIHVzZXJFbWFpbDonZm9vQGJhci5jb20nLCBncm91cElkOm51bGwsIG9yZ2FuaXphdGlvbklkOm51bGwsIGlzUHVibGljOmZhbHNlIH0sIC4uLl1cclxuICAgICAgICAkc2NvcGUubmV3U2hhcmVzID0gW107XHJcblxyXG4gICAgICAgIC8vIGFsbCB1cGRhdGVkIHNoYXJlcywgdG8gYmUgc2F2ZWRcclxuICAgICAgICAvLyBmb3JtYXQ6IFt7bWFwSWQ6MSwgY2FuRWRpdDpmYWxzZSwgdXNlckVtYWlsOidmb29AYmFyLmNvbScsIGdyb3VwSWQ6bnVsbCwgb3JnYW5pemF0aW9uSWQ6bnVsbCwgaXNQdWJsaWM6ZmFsc2UgfSwgLi4uXVxyXG4gICAgICAgICRzY29wZS51cGRhdGVkU2hhcmVzID0gW107XHJcblxyXG4gICAgICAgIC8vIGluZGV4ZXMgb2YgdXNlcnMvZ3JvdXBzL29yZ3MgLSBmb3JtYXQ6IFt7aWQ6MSwgbmFtZTonZm9vJ30sIC4uLl1cclxuICAgICAgICAkc2NvcGUudXNlcnMgPSBbXTtcclxuICAgICAgICAkc2NvcGUuZ3JvdXBzID0gW107XHJcbiAgICAgICAgJHNjb3BlLm9yZ2FuaXphdGlvbnMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gY29uc3RhbnRzXHJcbiAgICAgICAgJHNjb3BlLlNIQVJFX1RZUEVfSU5ESVZJRFVBTCA9ICdPbmUgb3IgbW9yZSBJbmRpdmlkdWFscyc7XHJcbiAgICAgICAgJHNjb3BlLlNIQVJFX1RZUEVfR1JPVVAgPSAnR3JvdXAnO1xyXG4gICAgICAgICRzY29wZS5TSEFSRV9UWVBFX09SR0FOSVpBVElPTiA9ICdUaGlua05hdGlvbic7XHJcbiAgICAgICAgJHNjb3BlLlNIQVJFX1RZUEVfUFVCTElDID0gJ0FsbCBNZXRhTWFwIFVzZXJzJztcclxuXHJcbiAgICAgICAgJHNjb3BlLnNoYXJlVHlwZXMgPSBbXHJcbiAgICAgICAgICAgICRzY29wZS5TSEFSRV9UWVBFX0lORElWSURVQUwsXHJcbiAgICAgICAgICAgIC8vJHNjb3BlLlNIQVJFX1RZUEVfR1JPVVAsIFxyXG4gICAgICAgICAgICAkc2NvcGUuU0hBUkVfVFlQRV9PUkdBTklaQVRJT04sXHJcbiAgICAgICAgICAgICRzY29wZS5TSEFSRV9UWVBFX1BVQkxJQ1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgICRzY29wZS5TSEFSRV9QRVJNSVNTSU9OX0NBTlZJRVcgPSAnQ2FuIHZpZXcnO1xyXG4gICAgICAgICRzY29wZS5TSEFSRV9QRVJNSVNTSU9OX0NBTkVESVQgPSAnQ2FuIGVkaXQnO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2hhcmVQZXJtaXNzaW9ucyA9IFtcclxuICAgICAgICAgICAgJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FOVklFVyxcclxuICAgICAgICAgICAgJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FORURJVFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5TaGFyZUN1bHR1cmVNYXAgPSBmdW5jdGlvbihzaGFyZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUoJHNjb3BlLnVzZXJQcm9maWxlLm1lbWJlcnNoaXBzLCB7XHJcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogc2hhcmUub3JnYW5pemF0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICBsZWFkZXI6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IGV4aXN0aW5nIHNoYXJlc1xyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRTaGFyZXMobWFwSWRzKSB7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnL3NoYXJlcy9tYXBfc2hhcmVzLmpzb24/aWRzPScgKyBtYXBJZHMuam9pbignLCcpKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tYXBTaGFyZXMgPSByZXNwb25zZS5kYXRhLm1hcFNoYXJlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gcmVzcG9uc2UuZGF0YS51c2VycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdyb3VwcyA9IHJlc3BvbnNlLmRhdGEuZ3JvdXBzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JnYW5pemF0aW9ucyA9IHJlc3BvbnNlLmRhdGEub3JnYW5pemF0aW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdEV4aXN0aW5nU2hhcmVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmV4aXN0aW5nU2hhcmVzLmxlbmd0aCAmJiAkc2NvcGUuY2FuQWRkTmV3U2hhcmUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZE5ld1NoYXJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBsb2FkIHNoYXJpbmcgaW5mbycpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2FkU2hhcmVzKG1hcElkcyk7XHJcblxyXG4gICAgICAgIC8vIGdyb3VwIHRoZSBleGlzdGluZyBzaGFyZXMgYnkgdXNlciwgZ3JvdXAsIG9yZyBhbmQgcHVibGljXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdEV4aXN0aW5nU2hhcmVzKCkge1xyXG4gICAgICAgICAgICAvLyBmaW5kIGFsbCBlbWFpbHMgdGhhdCBvY2N1ciBpbiBhIHNoYXJlXHJcbiAgICAgICAgICAgIHZhciB1c2VyRW1haWxzID0gXy53aXRob3V0KF8udW5pcShfLnBsdWNrKCRzY29wZS5tYXBTaGFyZXMsICd1c2VyRW1haWwnKSksIG51bGwpO1xyXG4gICAgICAgICAgICAvLyBidWlsZCBhbiBhcnJheSBvZiBzaGFyZXMsIG9uZSBmb3IgZWFjaCBlbWFpbCwgd2l0aCB0aGUgYXBwbGljYWJsZSBtYXAgSURzXHJcbiAgICAgICAgICAgIHZhciBzaGFyZXNCeVVzZXJFbWFpbCA9IF8ubWFwKHVzZXJFbWFpbHMsIGZ1bmN0aW9uKGVtYWlsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXNlciA9IF8uZmluZFdoZXJlKCRzY29wZS51c2Vycywge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRGVsZXRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBlbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6ICh1c2VyID8gdXNlci5pZCA6IG51bGwpLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNQdWJsaWM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQ3VsdHVyZU1hcDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTkI6IGZvciB0aGlzIGF0dHJpYnV0ZSB3ZSBkb24ndCB0cnkgdG8gc3VtbWFyaXplIHRoZSB2YWx1ZSBmb3IgYWxsIHRoZSBleGlzdGluZyBzaGFyZXMsIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgaXQgd291bGQgYmUgdG9vIGNvbXBsaWNhdGVkIHRvIGRpc3BsYXkuLi5cclxuICAgICAgICAgICAgICAgICAgICBjYW5FZGl0OiAkc2NvcGUubWFwU2hhcmVzLmxlbmd0aCA9PSAxICYmICRzY29wZS5tYXBTaGFyZXNbMF0uY2FuRWRpdCxcclxuICAgICAgICAgICAgICAgICAgICBtYXBJZHM6IF8ucGx1Y2soXy53aGVyZSgkc2NvcGUubWFwU2hhcmVzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogZW1haWxcclxuICAgICAgICAgICAgICAgICAgICB9KSwgJ21hcElkJylcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIGdyb3VwSWRzID0gXy53aXRob3V0KF8udW5pcShfLnBsdWNrKCRzY29wZS5tYXBTaGFyZXMsICdncm91cElkJykpLCBudWxsKTtcclxuICAgICAgICAgICAgdmFyIHNoYXJlc0J5R3JvdXBJZCA9IF8ubWFwKGdyb3VwSWRzLCBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gXy5maW5kV2hlcmUoJHNjb3BlLmdyb3Vwcywge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRGVsZXRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNDdWx0dXJlTWFwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnR3JvdXA6ICcgKyAoZ3JvdXAgPyBncm91cC5uYW1lIDogJycpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbkVkaXQ6ICRzY29wZS5tYXBTaGFyZXMubGVuZ3RoID09IDEgJiYgJHNjb3BlLm1hcFNoYXJlc1swXS5jYW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcElkczogXy5wbHVjayhfLndoZXJlKCRzY29wZS5tYXBTaGFyZXMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogaWRcclxuICAgICAgICAgICAgICAgICAgICB9KSwgJ21hcElkJylcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIG9yZ2FuaXphdGlvbklkcyA9IF8ud2l0aG91dChfLnVuaXEoXy5wbHVjaygkc2NvcGUubWFwU2hhcmVzLCAnb3JnYW5pemF0aW9uSWQnKSksIG51bGwpO1xyXG4gICAgICAgICAgICB2YXIgc2hhcmVzQnlPcmdhbml6YXRpb25JZCA9IF8ubWFwKG9yZ2FuaXphdGlvbklkcywgZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmdhbml6YXRpb24gPSBfLmZpbmRXaGVyZSgkc2NvcGUub3JnYW5pemF0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRGVsZXRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNDdWx0dXJlTWFwOiAkc2NvcGUubWFwU2hhcmVzLmxlbmd0aCA9PSAxICYmICRzY29wZS5tYXBTaGFyZXNbMF0uaXNDdWx0dXJlTWFwLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdUaGlua05hdGlvbjogJyArIChvcmdhbml6YXRpb24gPyBvcmdhbml6YXRpb24ubmFtZSA6ICcnKSxcclxuICAgICAgICAgICAgICAgICAgICBjYW5FZGl0OiAkc2NvcGUubWFwU2hhcmVzLmxlbmd0aCA9PSAxICYmICRzY29wZS5tYXBTaGFyZXNbMF0uY2FuRWRpdCxcclxuICAgICAgICAgICAgICAgICAgICBtYXBJZHM6IF8ucGx1Y2soXy53aGVyZSgkc2NvcGUubWFwU2hhcmVzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBpZFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLCAnbWFwSWQnKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBhcmUgYW55IG9mIHRoZSBzZWxlY3RlZCBtYXBzIHNoYXJlZCBwdWJsaWNseT9cclxuICAgICAgICAgICAgdmFyIHB1YmxpY1NoYXJlcyA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoXy53aGVyZSgkc2NvcGUubWFwU2hhcmVzLCB7XHJcbiAgICAgICAgICAgICAgICBpc1B1YmxpYzogdHJ1ZVxyXG4gICAgICAgICAgICB9KS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHB1YmxpY1NoYXJlcyA9IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNEZWxldGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNQdWJsaWM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNDdWx0dXJlTWFwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnRXZlcnlvbmUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbkVkaXQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcElkczogXy5wbHVjayhfLndoZXJlKCRzY29wZS5tYXBTaGFyZXMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQdWJsaWM6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KSwgJ21hcElkJylcclxuICAgICAgICAgICAgICAgIH1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuZXhpc3RpbmdTaGFyZXMgPSBfLnVuaW9uKHNoYXJlc0J5VXNlckVtYWlsLCBzaGFyZXNCeUdyb3VwSWQsIHNoYXJlc0J5T3JnYW5pemF0aW9uSWQsIHB1YmxpY1NoYXJlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBidWlsZFVwZGF0ZWRTaGFyZXMoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS51cGRhdGVkU2hhcmVzID0gW107XHJcblxyXG4gICAgICAgICAgICAvLyBmb3IgZWFjaCBzZWxlY3RlZCBtYXAsIGRlY29tcG9zZSB0aGUgZXhpc3RpbmdTaGFyZXMgKGdyb3VwZWQgYnkgdXNlci9ncm91cC9vcmcvcHVibGljKSBpbnRvIGluZGl2aWR1YWwgc2hhcmVzIGZvciBzYXZpbmdcclxuICAgICAgICAgICAgXy5lYWNoKG1hcElkcywgZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGdldCBleGlzdGluZyBzaGFyZXMgZm9yIHRoaXMgbWFwXHJcbiAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdTaGFyZXNGb3JNYXBJZCA9IF8uZmlsdGVyKCRzY29wZS5leGlzdGluZ1NoYXJlcywgZnVuY3Rpb24oZXhpc3RpbmdTaGFyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nU2hhcmVzIGZvcm1hdDogW3tuYW1lOidmb28nLCB1c2VyRW1haWw6J2Zvb0BiYXIuY29tJywgdXNlcklkOiBudWxsLCBncm91cElkOiBpZCwgb3JnYW5pemF0aW9uSWQ6IG51bGwsIGlzUHVibGljOmZhbHNlLCBpc0N1bHR1cmVNYXA6ZmFsc2UsIGNhbkVkaXQ6dHJ1ZSwgbWFwSWRzOlsxLDJdfSwgLi4uXVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLmNvbnRhaW5zKGV4aXN0aW5nU2hhcmUubWFwSWRzLCBpZCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIGRlY29tcG9zZSB0aGVzZSBpbnRvIGluZGl2aWR1YWwgc2hhcmVzXHJcbiAgICAgICAgICAgICAgICBfLmVhY2goZXhpc3RpbmdTaGFyZXNGb3JNYXBJZCwgZnVuY3Rpb24oZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlZFNoYXJlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RlbGV0ZWQ6IGVzLmlzRGVsZXRlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwSWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGVzLnVzZXJFbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBlcy51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGVzLmdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBlcy5vcmdhbml6YXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQdWJsaWM6IGVzLmlzUHVibGljLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0N1bHR1cmVNYXA6IGVzLmlzQ3VsdHVyZU1hcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRWRpdDogZXMuY2FuRWRpdFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gYWRkIGluIHRoZSBuZXdTaGFyZXMgKGZvciBlYWNoIHNlbGVjdGVkIG1hcClcclxuICAgICAgICAgICAgXy5lYWNoKG1hcElkcywgZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAgICAgICAgIF8uZWFjaCgkc2NvcGUubmV3U2hhcmVzLCBmdW5jdGlvbihucykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVkU2hhcmVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05ldzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwSWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IChucy5zaGFyZVR5cGUgPT0gJHNjb3BlLlNIQVJFX1RZUEVfSU5ESVZJRFVBTCA/IG5zLnVzZXJFbWFpbCA6IG51bGwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiAobnMuc2hhcmVUeXBlID09ICRzY29wZS5TSEFSRV9UWVBFX0dST1VQID8gbnMuZ3JvdXBJZCA6IG51bGwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogKG5zLnNoYXJlVHlwZSA9PSAkc2NvcGUuU0hBUkVfVFlQRV9PUkdBTklaQVRJT04gPyBucy5vcmdhbml6YXRpb25JZCA6IG51bGwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogbnMuc2hhcmVUeXBlID09ICRzY29wZS5TSEFSRV9UWVBFX1BVQkxJQyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDdWx0dXJlTWFwOiBucy5pc0N1bHR1cmVNYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkVkaXQ6IChucy5zaGFyZVR5cGUgPT0gJHNjb3BlLlNIQVJFX1RZUEVfUFVCTElDID8gZmFsc2UgOiBucy5zaGFyZVBlcm1pc3Npb24gPT0gJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FORURJVCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG5zLm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNhdmVTaGFyZXMob25VcGRhdGUpIHtcclxuICAgICAgICAgICAgJGh0dHAucHV0KCcvc2hhcmVzL3VwZGF0ZV9tYXBfc2hhcmVzJywgJHNjb3BlLnVwZGF0ZWRTaGFyZXMpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3Qgc2F2ZSBzaGFyaW5nIGluZm8nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbkRlbGV0ZUV4aXN0aW5nU2hhcmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRzY29wZS5jYW5BZGROZXdTaGFyZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5kZWxldGVFeGlzdGluZ1NoYXJlID0gZnVuY3Rpb24oc2hhcmUpIHtcclxuICAgICAgICAgICAgc2hhcmUuaXNEZWxldGVkID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FuQWRkTmV3U2hhcmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIGFsbCBtYXBzIGFyZSBvd25lZCBieSB0aGUgY3VycmVudCB1c2VyXHJcbiAgICAgICAgICAgIHZhciBtYXBVc2VySWRzID0gXy51bmlxKF8ucGx1Y2soJHNjb3BlLm1hcFNoYXJlcywgJ21hcFVzZXJJZCcpKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1hcFVzZXJJZHMubGVuZ3RoID09IDAgfHwgKG1hcFVzZXJJZHMubGVuZ3RoID09IDEgJiYgbWFwVXNlcklkc1swXSA9PSAkc2NvcGUudXNlcklkKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkTmV3U2hhcmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gTkI6IGlzUHVibGljIGFuZCBjYW5FZGl0IGFyZSBzZXQgaW4gYnVpbGRVcGRhdGVTaGFyZXNcclxuICAgICAgICAgICAgJHNjb3BlLm5ld1NoYXJlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHNoYXJlVHlwZTogJHNjb3BlLlNIQVJFX1RZUEVfSU5ESVZJRFVBTCxcclxuICAgICAgICAgICAgICAgIHNoYXJlUGVybWlzc2lvbjogJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FOVklFVyxcclxuICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogJycsXHJcbiAgICAgICAgICAgICAgICBncm91cElkOiAoJHNjb3BlLmdyb3Vwcy5sZW5ndGggPyAkc2NvcGUuZ3JvdXBzWzBdLmlkIDogbnVsbCksXHJcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogKCRzY29wZS5vcmdhbml6YXRpb25zLmxlbmd0aCA/ICRzY29wZS5vcmdhbml6YXRpb25zWzBdLmlkIDogbnVsbCksXHJcbiAgICAgICAgICAgICAgICBpc0N1bHR1cmVNYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJydcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmRlbGV0ZU5ld1NoYXJlID0gZnVuY3Rpb24oc2hhcmUpIHtcclxuICAgICAgICAgICAgdmFyIGkgPSBfLmluZGV4T2YoJHNjb3BlLm5ld1NoYXJlcywgc2hhcmUpO1xyXG4gICAgICAgICAgICAkc2NvcGUubmV3U2hhcmVzLnNwbGljZShpLCAxKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUub2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgYnVpbGRVcGRhdGVkU2hhcmVzKCk7XHJcbiAgICAgICAgICAgIHNhdmVTaGFyZXMob25VcGRhdGUpO1xyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgc2hhcmluZ01vZGFsQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnLCAndXNlcklkJywgJ3VzZXJQcm9maWxlJywgJ21hcElkcycsICdvblVwZGF0ZSddO1xyXG59OyIsIi8vIGNvbW1vbiBjb3JlIHN0YW5kYXJkcyB0YWIgLVxyXG4vLyB0aGlzIGlzIGRlbGVnYXRlZCB0byB0aGUgU2FuZGJhbmtDY3NUYWdnaW5nIG1vZHVsZSwgd2hpY2ggaGFuZGxlcyBDQ1MgXHJcbi8vIGZvciBhIG1hcCBPUiB0aGUgdXNlciBwcm9maWxlIC0gc2VlIHRhZ2dpbmdfY2NzLmpzXHJcblxyXG5TYW5kYmFua0VkaXRvci5TdGFuZGFyZHMgPSBmdW5jdGlvbiAoJHNjb3BlLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBhIHRhYiBpcyBvcGVuZWQgb3IgY2xvc2VkXHJcbiAgICB0aGlzLmN1cnJlbnRUYWJDaGFuZ2VkID0gZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKG5ld1ZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9TVEFOREFSRFMpIHsgLy8gb3BlbmluZyB0YWJcclxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgYXJlIG5vIGxpbmtzLCBzaG93IHRoZSBtb2RhbFxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmNhbkVkaXQgJiYgISRzY29wZS5jY3NUYWdnaW5nLmxpbmtzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNjc1RhZ2dpbmcuYWRkTGluaygpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2xkVmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX1NUQU5EQVJEUykgeyAvLyBjbG9zaW5nIHRhYlxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07IiwiLy8gZnVuY3Rpb25zIGZvciB1c2VyLXRhZ2dpbmcgbWFwcywgd2l0aCBhIG1vZGFsIGRpYWxvZ1xyXG5cclxuLy8gTkI6IHRoZSBjb21wbGV4aXR5IGhlcmUgaXMgZHVlIHRvIHRoZSBuZWVkIHRvIHNob3cgZXhpc3RpbmcgdGFncyB0aGF0IG1heSBhcHBseSBcclxuLy8gdG8gYW55IG51bWJlciBvZiB0aGUgc2VsZWN0ZWQgbWFwcywgdnMuIG5ldyB0YWdzIHRoYXQgd2lsbCBiZSBhZGRlZCB0byBhbGwgc2VsZWN0ZWQgbWFwcyAtXHJcbi8vIHRoZSB0YWdnaW5nIGluZm8gbmVlZHMgdG8gYmUgZ3JvdXBlZCBhbmQgdW5ncm91cGVkIHdoZW4gbG9hZGluZyBhbmQgc2F2aW5nIHRvIGhhbmRsZSB0aGlzLlxyXG5cclxud2luZG93LlNhbmRiYW5rVGFnZ2luZyA9IHt9O1xyXG5cclxuU2FuZGJhbmtUYWdnaW5nID0gZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkbW9kYWwsICRsb2cpIHtcclxuXHJcbiAgICB0aGlzLm9wZW5Nb2RhbCA9IGZ1bmN0aW9uIChtYXBJZHMsIHNob3dEZXNjcmlwdGlvbiwgb25VcGRhdGUpIHtcclxuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZV9tYXBfdGFnZ2luZ19tb2RhbC5odG1sJywgLy8gc2VlIHZpZXdzL3VzZXJfdGFncy9fdGVtcGxhdGVfbWFwX3RhZ2dpbmdfbW9kYWxcclxuICAgICAgICAgICAgYmFja2Ryb3A6ICdzdGF0aWMnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiB0YWdzTW9kYWxDdHJsLFxyXG4gICAgICAgICAgICB3aW5kb3dDbGFzczogJ3RhZ3MtbW9kYWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICBtYXBJZHM6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbWFwSWRzOyB9LFxyXG4gICAgICAgICAgICAgICAgc2hvd0Rlc2NyaXB0aW9uOiBmdW5jdGlvbigpIHsgcmV0dXJuIHNob3dEZXNjcmlwdGlvbjsgfSxcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlOiBmdW5jdGlvbigpIHsgcmV0dXJuIG9uVXBkYXRlOyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbigpIHt9KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBjb250cm9sbGVyIGZvciB0YWdzIG1vZGFsIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHZhciB0YWdzTW9kYWxDdHJsID0gZnVuY3Rpb24gKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIG1hcElkcywgc2hvd0Rlc2NyaXB0aW9uLCBvblVwZGF0ZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUubWFwSWRzID0gbWFwSWRzO1xyXG5cclxuICAgICAgICAvLyBhbGwgZXhpc3RpbmcgdGFncyBmb3Igc2VsZWN0ZWQgbWFwcyAtIGZvcm1hdDogW3ttYXBJZDogMSwgdGFnSWQ6IDEsIHRhZ05hbWU6J2Zvbyd9LCAuLi5dXHJcbiAgICAgICAgJHNjb3BlLm1hcFVzZXJUYWdzID0gW107ICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGV4aXN0aW5nIHRhZ3MsIGdyb3VwZWQgZm9yIGRpc3BsYXkgLSBmb3JtYXQ6IFt7bmFtZTonZm9vJywgbWFwSWRzOlsxLDJdfSwgLi4uXVxyXG4gICAgICAgICRzY29wZS5leGlzdGluZ1RhZ3MgPSBbXTsgICBcclxuXHJcbiAgICAgICAgLy8gbmV3IHRhZ3MgYWRkZWQgaW4gdGhlIGRpYWxvZyAtIGZvcm1hdDogW3tuYW1lOidmb28nfSwgLi4uXVxyXG4gICAgICAgICRzY29wZS5uZXdUYWdzID0gW107ICAgICAgICBcclxuXHJcbiAgICAgICAgLy8gYWxsIHVwZGF0ZWQgdGFncywgdG8gYmUgc2F2ZWQgLSB0YWdzIGZvcm1hdDogW3ttYXBJZDogMSwgdXNlclRhZ3M6IFwiZm9vLCBiYXIsIGJhbVwifSwgLi4uXVxyXG4gICAgICAgICRzY29wZS51cGRhdGVkVGFncyA9IHsgZGVzY3JpcHRpb246ICcnLCB0YWdzOiBbXSB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2hvd0Rlc2NyaXB0aW9uID0gc2hvd0Rlc2NyaXB0aW9uO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2FkVGFncyhtYXBJZHMpIHtcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCcvdXNlcl90YWdzL21hcF91c2VyX3RhZ3MuanNvbj9pZHM9JyArIG1hcElkcy5qb2luKCcsJykpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5tYXBVc2VyVGFncyA9IHJlc3BvbnNlLmRhdGEubWFwVXNlclRhZ3M7XHJcbiAgICAgICAgICAgICAgICAvLyBOQjogdGhlIG1hcCBkZXNjcmlwdGlvbiBpcyBhbHdheXMgcGFzc2VkIGJhY2sgaWYgd2Ugb25seSBwYXNzIG9uZSBtYXAgSUQsIFxyXG4gICAgICAgICAgICAgICAgLy8gYnV0IHdlIG1heSBub3QgZGlzcGxheSBpdCBpbiB0aGUgZGlhbG9nIC0gZGVwZW5kcyBvbiB0aGUgdmFsdWUgb2YgdGhlIHNob3dEZXNjcmlwdGlvbiBmbGFnLlxyXG4gICAgICAgICAgICAgICAgaWYgKG1hcElkcy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVkVGFncy5kZXNjcmlwdGlvbiA9IHJlc3BvbnNlLmRhdGEubWFwRGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbml0RXhpc3RpbmdUYWdzKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmV3VGFnKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBsb2FkIHRhZ3MnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2FkVGFncyhtYXBJZHMpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbml0RXhpc3RpbmdUYWdzKCkge1xyXG4gICAgICAgICAgICB2YXIgdGFnTmFtZXMgPSBfLnVuaXEoXy5wbHVjaygkc2NvcGUubWFwVXNlclRhZ3MsICd0YWdOYW1lJykpLnNvcnQoKTtcclxuICAgICAgICAgICAgJHNjb3BlLmV4aXN0aW5nVGFncyA9IF8ubWFwKHRhZ05hbWVzLCBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFwVXNlclRhZ3NGb3JOYW1lID0gXy53aGVyZSgkc2NvcGUubWFwVXNlclRhZ3MsIHt0YWdOYW1lOiBuYW1lfSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFwSWRzID0gXy5wbHVjayhtYXBVc2VyVGFnc0Zvck5hbWUsICdtYXBJZCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTpuYW1lLCBcclxuICAgICAgICAgICAgICAgICAgICBtYXBJZHM6bWFwSWRzXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkVXBkYXRlZFRhZ3MoKSB7XHJcbiAgICAgICAgICAkc2NvcGUudXBkYXRlZFRhZ3MudGFncyA9IFtdO1xyXG4gICAgICAgICAgXy5lYWNoKG1hcElkcywgZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdUYWdzRm9ySWQgPSBfLmZpbHRlcigkc2NvcGUuZXhpc3RpbmdUYWdzLCBmdW5jdGlvbihleGlzdGluZ1RhZykgeyBcclxuICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nVGFnIGZvcm1hdDoge25hbWU6J2ZvbycsIG1hcElkczpbMSwyXX1cclxuICAgICAgICAgICAgICAgIHJldHVybiBfLmNvbnRhaW5zKGV4aXN0aW5nVGFnLm1hcElkcywgaWQpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICRzY29wZS51cGRhdGVkVGFncy50YWdzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICBtYXBJZDogaWQsIFxyXG4gICAgICAgICAgICAgICAgICB1c2VyVGFnczogXy51bmlvbihcclxuICAgICAgICAgICAgICAgICAgICAgIF8ucGx1Y2soZXhpc3RpbmdUYWdzRm9ySWQsICduYW1lJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICBfLndpdGhvdXQoXy5wbHVjaygkc2NvcGUubmV3VGFncywgJ25hbWUnKSwgJycpIC8vIHJlbW92ZSBlbXB0eSB0YWdzXHJcbiAgICAgICAgICAgICAgICAgICkuam9pbignLCAnKVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzYXZlVGFncyhvblVwZGF0ZSkge1xyXG4gICAgICAgICAgICAkaHR0cC5wdXQoJy91c2VyX3RhZ3MvdXBkYXRlX21hcF91c2VyX3RhZ3MnLCBbJHNjb3BlLnVwZGF0ZWRUYWdzXSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgb25VcGRhdGUoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydCgnQ291bGQgbm90IHNhdmUgdGFncycpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRzY29wZS5kZWxldGVFeGlzdGluZ1RhZyA9IGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZigkc2NvcGUuZXhpc3RpbmdUYWdzLCB0YWcpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXhpc3RpbmdUYWdzLnNwbGljZShpLCAxKTtcclxuICAgICAgICB9OyAgXHJcblxyXG4gICAgICAgICRzY29wZS5hZGROZXdUYWcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm5ld1RhZ3MucHVzaCh7bmFtZTogJyd9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudGFnU2VsZWN0ZWQgPSBmdW5jdGlvbihpdGVtLCBtb2RlbCwgbGFiZWwpIHtcclxuICAgICAgICAgIC8vY29uc29sZS5sb2coJ3RhZ1NlbGVjdGVkOiAnICsgaXRlbSArICcsICcgKyBtb2RlbCArICcsICcgKyBsYWJlbCk7XHJcbiAgICAgICAgICAkc2NvcGUuYWRkTmV3VGFnKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmVkaXRpbmdUYWdLZXlwcmVzcyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGROZXdUYWcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5kZWxldGVOZXdUYWcgPSBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICAgICAgdmFyIGkgPSBfLmluZGV4T2YoJHNjb3BlLm5ld1RhZ3MsIHRhZyk7XHJcbiAgICAgICAgICAgICRzY29wZS5uZXdUYWdzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgaWYgKCEkc2NvcGUubmV3VGFncy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGROZXdUYWcoKTsgLy8gYWx3YXlzIGxlYXZlIGF0IGxlYXN0IG9uZSB0YWcgZmllbGRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAvLyB0YWcgYXV0b2NvbXBsZXRlXHJcbiAgICAgICAgJHNjb3BlLmdldFVzZXJUYWdzID0gZnVuY3Rpb24odmlld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAnL3VzZXJfdGFncy9saXN0Lmpzb24/cT0nICsgdmlld1ZhbHVlOyBcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLnRhZ3M7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5vayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYnVpbGRVcGRhdGVkVGFncygpO1xyXG4gICAgICAgICAgICBzYXZlVGFncyhvblVwZGF0ZSk7XHJcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgdGFnc01vZGFsQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnLCAnbWFwSWRzJywgJ3Nob3dEZXNjcmlwdGlvbicsICdvblVwZGF0ZSddO1xyXG59O1xyXG4iLCIvLyBnb0pTIHRlbXBsYXRlcyB1c2VkIGluIHRoZSBlZGl0b3JcclxuXHJcblNhbmRiYW5rRWRpdG9yLlRlbXBsYXRlcyA9IGZ1bmN0aW9uKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIC8vIGNvbnN0YW50c1xyXG4gICAgdGhpcy5ncm91cEZpbGxDb2xvciA9IFwiI2Y5ZjlmOVwiO1xyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge307XHJcblxyXG4gICAgLy8gaW5pdGlhbGl6ZSB0ZW1wbGF0ZS1yZWxhdGVkIHN0dWZmIHRoYXQgZGVwZW5kcyBvbiB0aGUgZGlhZ3JhbSAoYW5kIHRoZXJlZm9yZSBjYW4ndCBnbyBpbiBpbml0KCkpXHJcbiAgICB0aGlzLmluaXRUZW1wbGF0ZXMgPSBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgZGlhZ3JhbS5ncm91cFRlbXBsYXRlID0gc2VsZi5ncm91cFRlbXBsYXRlO1xyXG4gICAgICAgIGRpYWdyYW0ubm9kZVRlbXBsYXRlID0gc2VsZi5zbGlkZVRlbXBsYXRlO1xyXG4gICAgICAgIGRpYWdyYW0ubGlua1RlbXBsYXRlID0gc2VsZi5saW5rVGVtcGxhdGU7XHJcbiAgICAgICAgZGlhZ3JhbS5saW5rVGVtcGxhdGVNYXAuYWRkKCdQJywgc2VsZi5wTGlua1RlbXBsYXRlKTtcclxuICAgICAgICBkaWFncmFtLmxpbmtUZW1wbGF0ZU1hcC5hZGQoJ0QnLCBzZWxmLmRMaW5rVGVtcGxhdGUpO1xyXG5cclxuICAgICAgICBzZWxmLnNldFRlbXBvcmFyeUxpbmtUZW1wbGF0ZXMoZGlhZ3JhbS50b29sTWFuYWdlci5saW5raW5nVG9vbCk7XHJcbiAgICAgICAgc2VsZi5zZXRUZW1wb3JhcnlMaW5rVGVtcGxhdGVzKGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbCk7XHJcblxyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIubGlua2luZ1Rvb2wucG9ydFRhcmdldGVkID0gZnVuY3Rpb24ocmVhbG5vZGUsIHJlYWxwb3J0LCB0ZW1wbm9kZSwgdGVtcHBvcnQsIHRvZW5kKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaGFuZGxlUG9ydFRhcmdldGVkKGRpYWdyYW0udG9vbE1hbmFnZXIubGlua2luZ1Rvb2wsIHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5yZWxpbmtpbmdUb29sLnBvcnRUYXJnZXRlZCA9IGZ1bmN0aW9uKHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCkge1xyXG4gICAgICAgICAgICBzZWxmLmhhbmRsZVBvcnRUYXJnZXRlZChkaWFncmFtLnRvb2xNYW5hZ2VyLnJlbGlua2luZ1Rvb2wsIHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5yZWxpbmtpbmdUb29sLnVwZGF0ZUFkb3JubWVudHMgPSBmdW5jdGlvbihwYXJ0KSB7XHJcbiAgICAgICAgICAgIGdvLlJlbGlua2luZ1Rvb2wucHJvdG90eXBlLnVwZGF0ZUFkb3JubWVudHMuY2FsbCh0aGlzLCBwYXJ0KTtcclxuICAgICAgICAgICAgdmFyIGZyb20gPSBwYXJ0LmZpbmRBZG9ybm1lbnQoJ1JlbGlua0Zyb20nKTtcclxuICAgICAgICAgICAgdmFyIHRvID0gcGFydC5maW5kQWRvcm5tZW50KCdSZWxpbmtUbycpO1xyXG4gICAgICAgICAgICAvLyBpZiAoZnJvbSlcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdyZWxpbmtmcm9tOiAnICsgZnJvbS5wYXJ0LndpZHRoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sLmxpbmtWYWxpZGF0aW9uID0gc2VsZi52YWxpZGF0ZUxpbms7XHJcbiAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5yZWxpbmtpbmdUb29sLmxpbmtWYWxpZGF0aW9uID0gc2VsZi52YWxpZGF0ZUxpbms7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNvbnZlbmllbnQgYWJicmV2aWF0aW9uIGZvciBjcmVhdGluZyB0ZW1wbGF0ZXNcclxuICAgIHZhciBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcblxyXG4gICAgLy8gRFNSUCBjb2xvcnMgKGZyb20gX3ZhcmlhYmxlcy5zY3NzKVxyXG4gICAgdmFyIGNvbG9yRCA9IFwiI2YyNjI0Y1wiO1xyXG4gICAgdmFyIGNvbG9yUyA9IFwiIzk2YzkzZFwiO1xyXG4gICAgdmFyIGNvbG9yUiA9IFwiIzRjYmZjMlwiO1xyXG4gICAgdmFyIGNvbG9yUCA9IFwiI2ZiYWEzNlwiO1xyXG4gICAgdmFyIGNvbG9yUExpZ2h0ID0gXCIjRkREREFGXCI7XHJcbiAgICB2YXIgY29sb3JQRGFyayA9IFwiI0M5ODgyQlwiO1xyXG5cclxuICAgIHZhciBleWVTdmdQYXRoID0gXCJNIDI1Ni4wMCw5Ni4wMEMgMTQ0LjM0MSw5Ni4wMCwgNDcuNTU5LDE2MS4wMjEsMC4wMCwyNTYuMDBjIDQ3LjU1OSw5NC45NzksIDE0NC4zNDEsMTYwLjAwLCAyNTYuMDAsMTYwLjAwYyAxMTEuNjU3LDAuMDAsIDIwOC40MzktNjUuMDIxLCAyNTYuMDAtMTYwLjAwIEMgNDY0LjQ0MiwxNjEuMDIxLCAzNjcuNjU3LDk2LjAwLCAyNTYuMDAsOTYuMDB6IE0gMzgyLjIyNSwxODAuODUyYyAzMC4wODEsMTkuMTg3LCA1NS41NzEsNDQuODg3LCA3NC43MTcsNzUuMTQ4IGMtMTkuMTQ2LDMwLjI2MS00NC42MzcsNTUuOTYxLTc0LjcxOCw3NS4xNDlDIDM0NC40MjcsMzU1LjI1NywgMzAwLjc3OSwzNjguMDAsIDI1Ni4wMCwzNjguMDBjLTQ0Ljc4LDAuMDAtODguNDI4LTEyLjc0My0xMjYuMjI1LTM2Ljg1MiBDIDk5LjY5NSwzMTEuOTYyLCA3NC4yMDUsMjg2LjI2MiwgNTUuMDU4LDI1Ni4wMGMgMTkuMTQ2LTMwLjI2MiwgNDQuNjM3LTU1Ljk2MiwgNzQuNzE3LTc1LjE0OGMgMS45NTktMS4yNSwgMy45MzgtMi40NjEsIDUuOTI5LTMuNjUgQyAxMzAuNzI1LDE5MC44NjYsIDEyOC4wMCwyMDUuNjEzLCAxMjguMDAsMjIxLjAwYzAuMDAsNzAuNjkyLCA1Ny4zMDgsMTI4LjAwLCAxMjguMDAsMTI4LjAwcyAxMjguMDAtNTcuMzA4LCAxMjguMDAtMTI4LjAwYzAuMDAtMTUuMzg3LTIuNzI1LTMwLjEzNC03LjcwNC00My43OTkgQyAzNzguMjg2LDE3OC4zOSwgMzgwLjI2NSwxNzkuNjAyLCAzODIuMjI1LDE4MC44NTJ6IE0gMjU2LjAwLDIwNS4wMGMwLjAwLDI2LjUxLTIxLjQ5LDQ4LjAwLTQ4LjAwLDQ4LjAwcy00OC4wMC0yMS40OS00OC4wMC00OC4wMHMgMjEuNDktNDguMDAsIDQ4LjAwLTQ4LjAwIFMgMjU2LjAwLDE3OC40OSwgMjU2LjAwLDIwNS4wMHpcIjtcclxuICAgIHZhciBleWVCbG9ja2VkU3ZnUGF0aCA9IFwiTSA0MTkuNjYxLDE0OC4yMDggQyA0NTguNDgzLDE3NS43MjMgNDkwLjM0NiwyMTIuNzU0IDUxMi4wMCwyNTYuMDAgQyA0NjQuNDM5LDM1MC45NzkgMzY3LjY1Nyw0MTYuMDAgMjU2LjAwLDQxNi4wMCBDIDIyNC43MTcsNDE2LjAwIDE5NC42MDQsNDEwLjg5NCAxNjYuNDExLDQwMS40NTggTCAyMDUuMzg5LDM2Mi40OCBDIDIyMS45MTgsMzY2LjEzIDIzOC44NzUsMzY4LjAwIDI1Ni4wMCwzNjguMDAgQyAzMDAuNzc5LDM2OC4wMCAzNDQuNDI3LDM1NS4yNTcgMzgyLjIyMywzMzEuMTQ4IEMgNDEyLjMwNCwzMTEuOTYgNDM3Ljc5NSwyODYuMjYgNDU2Ljk0MSwyNTUuOTk5IEMgNDM4LjQxNSwyMjYuNzE2IDQxMy45MzQsMjAxLjcyNCAzODUuMTE2LDE4Mi43NTIgTCA0MTkuNjYxLDE0OC4yMDggWk0gMjU2LjAwLDM0OS4wMCBDIDI0NC42MzgsMzQ5LjAwIDIzMy42MjQsMzQ3LjUxMiAyMjMuMTM2LDM0NC43MzMgTCAzNzkuNzI5LDE4OC4xNDEgQyAzODIuNTEsMTk4LjYyNyAzODQuMDAsMjA5LjYzOCAzODQuMDAsMjIxLjAwIEMgMzg0LjAwLDI5MS42OTIgMzI2LjY5MiwzNDkuMDAgMjU2LjAwLDM0OS4wMCBaTSA0ODAuMDAsMC4wMGwtMjYuODY5LDAuMDAgTCAzNDMuMzI1LDEwOS44MDZDIDMxNS43ODcsMTAwLjg0NCwgMjg2LjQ0OCw5Ni4wMCwgMjU2LjAwLDk2LjAwQyAxNDQuMzQxLDk2LjAwLCA0Ny41NTksMTYxLjAyMSwwLjAwLDI1Ni4wMCBjIDIxLjMyOSw0Mi41OTYsIDUyLjU2NCw3OS4xNTQsIDkwLjU5NywxMDYuNTM0TDAuMDAsNDUzLjEzMUwwLjAwLDQ4MC4wMCBsIDI2Ljg2OSwwLjAwIEwgNDgwLjAwLDI2Ljg2OUwgNDgwLjAwLDAuMDAgeiBNIDIwOC4wMCwxNTcuMDBjIDI0LjAyMiwwLjAwLCA0My45MjMsMTcuNjQ3LCA0Ny40NDYsNDAuNjg1IGwtNTQuNzYyLDU0Ljc2MkMgMTc3LjY0NywyNDguOTIzLCAxNjAuMDAsMjI5LjAyMiwgMTYwLjAwLDIwNS4wMEMgMTYwLjAwLDE3OC40OSwgMTgxLjQ5LDE1Ny4wMCwgMjA4LjAwLDE1Ny4wMHogTSA1NS4wNTgsMjU2LjAwIGMgMTkuMTQ2LTMwLjI2MiwgNDQuNjM3LTU1Ljk2MiwgNzQuNzE3LTc1LjE0OGMgMS45NTktMS4yNSwgMy45MzgtMi40NjEsIDUuOTI5LTMuNjVDIDEzMC43MjUsMTkwLjg2NiwgMTI4LjAwLDIwNS42MTMsIDEyOC4wMCwyMjEuMDAgYzAuMDAsMjkuMjYyLCA5LjgyNSw1Ni4yMjQsIDI2LjM0OSw3Ny43ODFsLTI5LjI3NSwyOS4yNzVDIDk3LjAzOCwzMDkuMjM1LCA3My4xOTcsMjg0LjY3LCA1NS4wNTgsMjU2LjAwelwiO1xyXG4gICAgdmFyIHBhcGVyY2xpcFN2Z1BhdGggPSBcIk0gMzQ4LjkxNiwxNjMuNTI0bC0zMi40NzYtMzIuNDYxTCAxNTQuMDM1LDI5My40MzRjLTI2LjkwNywyNi44OTYtMjYuOTA3LDcwLjUyNCwwLjAwLDk3LjQyMiBjIDI2LjkwMiwyNi44OTYsIDcwLjUzLDI2Ljg5NiwgOTcuNDM3LDAuMDBsIDE5NC44ODYtMTk0Ljg1NGMgNDQuODU3LTQ0LjgzMSwgNDQuODU3LTExNy41MzEsMC4wMC0xNjIuMzYzIGMtNDQuODMzLTQ0Ljg1Mi0xMTcuNTU2LTQ0Ljg1Mi0xNjIuMzkxLDAuMDBMIDc5LjMzNSwyMzguMjEybCAwLjAxNywwLjAxNmMtMC4xNDUsMC4xNTItMC4zMDYsMC4yODgtMC40MzgsMC40MjMgYy02Mi41NTEsNjIuNTQ4LTYyLjU1MSwxNjMuOTI4LDAuMDAsMjI2LjQ1M2MgNjIuNTI3LDYyLjUyOCwgMTYzLjkzNCw2Mi41MjgsIDIyNi40OTQsMC4wMGMgMC4xMzctMC4xMzcsIDAuMjU4LTAuMjg0LCAwLjQxLTAuNDM4bCAwLjAxNiwwLjAxNyBsIDEzOS42NjYtMTM5LjY0NmwtMzIuNDkzLTMyLjQ2TCAyNzMuMzUsNDMyLjIwOGwtMC4wMDgsMC4wMCBjLTAuMTQ4LDAuMTM0LTAuMjgyLDAuMjg1LTAuNDIzLDAuNDIyIGMtNDQuNTM3LDQ0LjUyOS0xMTYuOTksNDQuNTI5LTE2MS41MzgsMC4wMGMtNDQuNTMxLTQ0LjUyMS00NC41MzEtMTE2Ljk2MSwwLjAwLTE2MS40ODljIDAuMTUyLTAuMTUyLCAwLjMwMi0wLjI5MSwgMC40NDQtMC40MjNsLTAuMDIzLTAuMDMgbCAyMDQuNjQtMjA0LjU4M2MgMjYuODU2LTI2Ljg2OSwgNzAuNTcyLTI2Ljg2OSwgOTcuNDQzLDAuMDBjIDI2Ljg1NiwyNi44NjcsIDI2Ljg1Niw3MC41NzQsMC4wMCw5Ny40MkwgMjE4Ljk5OSwzNTguMzc1IGMtOC45NjgsOC45NjEtMjMuNTI3LDguOTYxLTMyLjQ4NiwwLjAwYy04Ljk0Ny04Ljk0My04Ljk0Ny0yMy41MTYsMC4wMC0zMi40NkwgMzQ4LjkxNiwxNjMuNTI0elwiO1xyXG5cclxuICAgIC8vIGZvb3RlciBmb3IgaW1hZ2UgZXhwb3J0XHJcbiAgICB2YXIgX2V4cG9ydEZvb3RlciA9IG51bGw7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSBkZWJ1ZyBpbmZvIGZvciBncm91cHMvbGlua3MgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBncm91cEluZm8ob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iai5kYXRhLnRleHQgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ29iamVjdDogJyArIG9iaiArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAna2V5OiAnICsgb2JqLmRhdGEua2V5ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdjb250YWluaW5nR3JvdXA6ICcgKyBvYmouY29udGFpbmluZ0dyb3VwICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdsYXlvdXQ6ICcgKyBvYmoubGF5b3V0ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdkYXRhLmxheW91dDogJyArIG9iai5kYXRhLmxheW91dCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAncG9zaXRpb246ICcgKyBwYXJzZUludChvYmoucG9zaXRpb24ueCwgMTApICsgJywgJyArIHBhcnNlSW50KG9iai5wb3NpdGlvbi55LCAxMCkgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2ZyZWVoYW5kIHBvc2l0aW9uIChkYXRhLmxvYyk6ICcgKyBnby5Qb2ludC5wYXJzZShvYmouZGF0YS5sb2MpICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICd3aWR0aC9oZWlnaHQ6ICcgKyBwYXJzZUludChvYmouYWN0dWFsQm91bmRzLndpZHRoLCAxMCkgKyAnLycgKyBwYXJzZUludChvYmouYWN0dWFsQm91bmRzLmhlaWdodCwgMTApICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdnZXRTY2FsZSgpOiAnICsgbWFwLmdldExheW91dHMoKS5nZXRTY2FsZShvYmopICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdpc0xpbmtMYWJlbDogJyArIG9iai5kYXRhLmlzTGlua0xhYmVsICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdsYWJlbGVkTGluazogJyArIG9iai5sYWJlbGVkTGluayArIFwiXFxuXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbm9kZUluZm8ob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuICdvYmplY3Q6ICcgKyBvYmogKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2tleTogJyArIG9iai5kYXRhLmtleSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAncG9zaXRpb246ICcgKyBwYXJzZUludChvYmoucG9zaXRpb24ueCwgMTApICsgJywgJyArIHBhcnNlSW50KG9iai5wb3NpdGlvbi55LCAxMCkgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3dpZHRoL2hlaWdodDogJyArIHBhcnNlSW50KG9iai5hY3R1YWxCb3VuZHMud2lkdGgsIDEwKSArICcvJyArIHBhcnNlSW50KG9iai5hY3R1YWxCb3VuZHMuaGVpZ2h0LCAxMCkgKyBcIlxcblwiO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGxpbmtJbmZvKG9iaikge1xyXG4gICAgICAgIHZhciBzbnBvcyA9IG1hcC5nZXRMYXlvdXRzKCkuZ2V0U2FtZU5vZGVzTGlua1Bvc2l0aW9uKG9iaik7XHJcbiAgICAgICAgcmV0dXJuICcnICtcclxuICAgICAgICAgICAgJ29iamVjdDogJyArIG9iaiArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZnJvbU5vZGU6ICcgKyBvYmouZnJvbU5vZGUgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3RvTm9kZTogJyArIG9iai50b05vZGUgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2xhYmVsTm9kZXM6ICcgKyBvYmoubGFiZWxOb2Rlcy5jb3VudCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnbGFiZWxOb2RlSXNWaXNpYmxlOiAnICsgbWFwLmdldExheW91dHMoKS5sYWJlbE5vZGVJc1Zpc2libGUob2JqKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZnJvbVBvcnRJZDogJyArIG9iai5mcm9tUG9ydElkICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICd0b1BvcnRJZDogJyArIG9iai50b1BvcnRJZCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnY2F0ZWdvcnk6ICcgKyAob2JqLmRhdGEgPyBvYmouZGF0YS5jYXRlZ29yeSA6ICcnKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnY29udGFpbmluZ0dyb3VwOiAnICsgb2JqLmNvbnRhaW5pbmdHcm91cCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZnJvbUFuZFRvTm9kZXNBcmVWaXNpYmxlOiAnICsgbWFwLmdldExheW91dHMoKS5mcm9tQW5kVG9Ob2Rlc0FyZVZpc2libGUob2JqKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnY3VydmU6ICcgKyBvYmouY3VydmUgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2N1cnZpbmVzczogJyArIG9iai5jdXJ2aW5lc3MgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2Zyb21FbmRTZWdtZW50TGVuZ3RoOiAnICsgTWF0aC5yb3VuZChvYmouZnJvbUVuZFNlZ21lbnRMZW5ndGgpICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICd0b0VuZFNlZ21lbnRMZW5ndGg6ICcgKyBNYXRoLnJvdW5kKG9iai50b0VuZFNlZ21lbnRMZW5ndGgpICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdzYW1lTm9kZXNMaW5rUG9zaXRpb246ICcgKyBzbnBvcy5pbmRleCArICcgb2YgJyArIHNucG9zLmNvdW50ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgIC8vKyAnZ2VvbWV0cnk6ICcgKyBvYmouZ2VvbWV0cnkgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2dldExpbmtTdHJva2VXaWR0aDogJyArIG1hcC5nZXRMYXlvdXRzKCkuZ2V0TGlua1N0cm9rZVdpZHRoKG9iaikgKyBcIlxcblwiO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gTkI6IHRoZXNlIGFyZSBoZXJlIGJlY2F1c2UgdGhleSBhcmUgYWJvdXQgY29sb3JzOyBcclxuICAgIC8vIHNpbWlsYXIgZnVuY3Rpb25zIHRoYXQgYXJlIHNjYWxlLXJlbGF0ZWQgYXJlIGluIGxheW91dHMuanMuLi5cclxuICAgIGZ1bmN0aW9uIGdldEdyb3VwU2VsZWN0aW9uU3Ryb2tlKG9iaikge1xyXG4gICAgICAgIGlmIChvYmouaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QRWRpdG9yTW9kZSgpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yUDtcclxuICAgICAgICAgICAgZWxzZSBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5ERWRpdG9yTW9kZSgpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yRDtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIzAwMFwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIiMwMDBcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT0ssIHRoaXMgaXNuJ3QgYWJvdXQgY29sb3JzLCBidXQgaXQgd2FudHMgdG8gYmUgbmVhciB0aGUgb25lIGFib3ZlLi4uXHJcbiAgICBmdW5jdGlvbiBnZXRHcm91cFNlbGVjdGlvblN0cm9rZVdpZHRoKG9iaikge1xyXG4gICAgICAgIHJldHVybiAob2JqLmlzU2VsZWN0ZWQgPyAzIDogMSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2Uob2JqKSB7XHJcbiAgICAgICAgaWYgKG9iai5pc1NlbGVjdGVkIHx8IG9iaiA9PSBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJMaW5rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvclI7IC8vIFRPRE86IGNhbiBQIGxpbmtzIGJlIHNlbGVjdGVkP1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIiMwMDBcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBjYWxsYmFja3MgdG8gZGV0ZXJtaW5lIHdoZW4gdGhlIGNvcm5lcnMgc2hvdWxkIGJlIHZpc2libGVcclxuXHJcbiAgICBmdW5jdGlvbiBzaG93RENvcm5lcihncm91cCkge1xyXG4gICAgICAgIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNERWRpdG9yVGhpbmcoZ3JvdXApKSB7IC8vIG1hcmsgZGlzdGluY3Rpb24gdGhpbmdcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNJblBPckRFZGl0b3JNb2RlKCkpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBpbiBQL0QgZWRpdG9yIG1vZGVcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFByZXNlbnRlcigpLmlzQ3JlYXRpbmdUaHVtYm5haWwpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBjYXB0dXJpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKGdyb3VwID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwKSB8fCAvLyBzaG93IGNvcm5lcnMgb24gbW91c2VvdmVyXHJcbiAgICAgICAgICAgICAgICAoJHNjb3BlLmlzVG91Y2hEZXZpY2UoKSAmJiBncm91cC5pc1NlbGVjdGVkKSB8fFxyXG4gICAgICAgICAgICAgICAgKGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZVNpc3RlcnNPZihncm91cCwgZmFsc2UpICYmIC8vIGRyYWcgdG8gRCAobWFrZSBpdCBzaXN0ZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgIChtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0UG9zaXRpb24gPT09IG51bGwgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2Fubm90RHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKGdyb3VwKSkpOyAvLyBub3Qgc2hvd2luZyBkcmFnIGFib3ZlL2JlbG93IGluZGljYXRvcnNcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd1NDb3JuZXIoZ3JvdXApIHtcclxuICAgICAgICBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgaW4gUC9EIGVkaXRvciBtb2RlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcC5nZXRQcmVzZW50ZXIoKS5pc0NyZWF0aW5nVGh1bWJuYWlsKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgY2FwdHVyaW5nIHRodW1ibmFpbFxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChncm91cCA9PSBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCkgfHwgLy8gc2hvdyBjb3JuZXJzIG9uIG1vdXNlb3ZlclxyXG4gICAgICAgICAgICAgICAgKCRzY29wZS5pc1RvdWNoRGV2aWNlKCkgJiYgZ3JvdXAuaXNTZWxlY3RlZCkgfHxcclxuICAgICAgICAgICAgICAgIChjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVDaGlsZHJlbk9mKGdyb3VwLCBmYWxzZSkgJiYgLy8gZHJhZyB0byBTIChtYWtlIGl0IGNoaWxkcmVuKVxyXG4gICAgICAgICAgICAgICAgICAgIChtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0UG9zaXRpb24gPT09IG51bGwgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2Fubm90RHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKGdyb3VwKSkpOyAvLyBub3Qgc2hvd2luZyBkcmFnIGFib3ZlL2JlbG93IGluZGljYXRvcnNcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd1JDb3JuZXIoZ3JvdXApIHtcclxuICAgICAgICBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgaW4gUC9EIGVkaXRvciBtb2RlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcC5nZXRQcmVzZW50ZXIoKS5pc0NyZWF0aW5nVGh1bWJuYWlsKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgY2FwdHVyaW5nIHRodW1ibmFpbFxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdyb3VwID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwIHx8XHJcbiAgICAgICAgICAgICAgICAoJHNjb3BlLmlzVG91Y2hEZXZpY2UoKSAmJiBncm91cC5pc1NlbGVjdGVkKTsgLy8gc2hvdyBjb3JuZXJzIG9uIG1vdXNlb3ZlclxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93UENvcm5lcihncm91cCkge1xyXG4gICAgICAgIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNQRWRpdG9yUG9pbnQoZ3JvdXApKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBtYXJrIHBlcnNwZWN0aXZlIHBvaW50XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNJblBPckRFZGl0b3JNb2RlKCkpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBpbiBQL0QgZWRpdG9yIG1vZGVcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFByZXNlbnRlcigpLmlzQ3JlYXRpbmdUaHVtYm5haWwpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBjYXB0dXJpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JvdXAgPT0gbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXAgfHxcclxuICAgICAgICAgICAgICAgICgkc2NvcGUuaXNUb3VjaERldmljZSgpICYmIGdyb3VwLmlzU2VsZWN0ZWQpOyAvLyBzaG93IGNvcm5lcnMgb24gbW91c2VvdmVyXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHdoZW4gYSBQIGxpbmsgc2hvdWxkIGJlIHZpc2libGVcclxuXHJcbiAgICB0aGlzLnNob3dQTGluayA9IGZ1bmN0aW9uKGxpbmspIHtcclxuICAgICAgICB2YXIgbW9kZSA9IG1hcC5nZXRVaSgpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5wZXJzcGVjdGl2ZU1vZGU7XHJcbiAgICAgICAgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc1BFZGl0b3JQb2ludChsaW5rLmZyb21Ob2RlKSkgeyAvLyBzaG93IFAncyB3aGVuIHRoaXMgbGluayBpcyBmcm9tIHRoZSBjdXJyZW50IFBvaW50XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgUCdzIGZvciBub24tUG9pbnQgdGhpbmdzLCBldmVuIG9uIG1vdXNlb3ZlclxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChtb2RlID09ICdsaW5lcycgfHwgbW9kZSA9PSAnYm90aCcpICYmIChsaW5rLmZyb21Ob2RlID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwIHx8IG1hcC5wSXNFeHBhbmRlZChsaW5rLmZyb21Ob2RlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNob3dQRG90ID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBtYXAuZ2V0VWkoKS5nZXRNYXBFZGl0b3JPcHRpb25zKCkucGVyc3BlY3RpdmVNb2RlICE9ICdib3RoJztcclxuICAgIH07XHJcblxyXG4gICAgLy8gdGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIGluIHR3byBtb2RlczpcclxuICAgIC8vIDEuIHdpdGggaXNEcm9wcGluZyA9PSBmYWxzZSwgdG8gaGlnaGxpZ2h0IGRyb3AgdGFyZ2V0cyBiYXNlZCBvbiBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgYW5kIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbixcclxuICAgIC8vICAgIHdoaWNoIGFyZSBzZXQgb24gbW91c2VEcmFnRW50ZXIvbW91c2VEcmFnbGVhdmVcclxuICAgIC8vIDIuIHdpdGggaXNEcm9wcGluZyA9PSB0cnVlLCBvbiBkcm9wLCB3aGVuIHRoZSBhYm92ZSBpbmRpY2F0b3JzIGhhdmUgZ29uZSBhd2F5LCBidXQgd2Uga25vdyB3aGF0IHRoZSBkcm9wcGVkXHJcbiAgICAvLyAgICBhbmQgdGFyZ2V0IGdyb3VwcyBhcmUsIGFuZCB3ZSB3YW50IHRvIGtub3cgd2hhdCB0aGUgZHJvcCBzaG91bGQgZG8uXHJcblxyXG4gICAgZnVuY3Rpb24gY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lU2lzdGVyc09mKGdyb3VwLCBpc0Ryb3BwaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIChncm91cCA9PSBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgbWFwLnRoaW5nc1NlbGVjdGVkQXJlRGVzY2VuZGFudHNPZihncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lQ2hpbGRyZW5PZihncm91cCwgaXNEcm9wcGluZykge1xyXG4gICAgICAgIHJldHVybiAoZ3JvdXAgPT0gbWFwLmdldFVpKCkuZHJhZ1RhcmdldEdyb3VwIHx8IGlzRHJvcHBpbmcpICYmXHJcbiAgICAgICAgICAgICFtYXAudGhpbmdzU2VsZWN0ZWRJbmNsdWRlU2xpZGUoKSAmJlxyXG4gICAgICAgICAgICAhbWFwLnRoaW5nc1NlbGVjdGVkQXJlRGVzY2VuZGFudHNPZihncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2lkZSBpcyBtYXAuTEVGVCBvciBtYXAuUklHSFRcclxuICAgIGZ1bmN0aW9uIGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZih0YXJnZXRHcm91cCwgc2lkZSwgaXNEcm9wcGluZykge1xyXG4gICAgICAgIC8vIG11c3QgYmUgZHJhZ2dpbmcgc2luZ2xlIGdyb3VwXHJcbiAgICAgICAgdmFyIGRyYWdnZWRHcm91cCA9IG1hcC5nZXRVbmlxdWVUaGluZ1NlbGVjdGVkKCk7XHJcbiAgICAgICAgaWYgKCFkcmFnZ2VkR3JvdXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZHJhZ2dlZCBhbmQgdGFyZ2V0IG11c3QgYmUgU2lzdGVycyBpbiBpbnZlbnRvcnkgbGF5b3V0XHJcbiAgICAgICAgcmV0dXJuICh0YXJnZXRHcm91cCA9PSBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgKG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbiA9PSBzaWRlIHx8IGlzRHJvcHBpbmcpICYmXHJcbiAgICAgICAgICAgIG1hcC5nZXRMYXlvdXRzKCkuYXJlU2lzdGVyc0luSW52ZW50b3J5TGF5b3V0KGRyYWdnZWRHcm91cCwgdGFyZ2V0R3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNhbm5vdERyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZih0YXJnZXRHcm91cCkge1xyXG4gICAgICAgIHJldHVybiAhY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKHRhcmdldEdyb3VwLCBtYXAuTEVGVCkgJiZcclxuICAgICAgICAgICAgIWNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZih0YXJnZXRHcm91cCwgbWFwLlJJR0hUKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBoYW5kbGUgZHJvcCBvbiBvbmUgb2YgdGhlIHRocmVlIHRhcmdldCByZWdpb25zICh0b3AsIG1pZGRsZSwgYm90dG9tKVxyXG4gICAgLy8gc2lkZSBpcyBtYXAuTEVGVCBvciBtYXAuUklHSFRcclxuICAgIGZ1bmN0aW9uIGhhbmRsZUdyb3VwTW91c2VEcm9wKGV2ZW50LCBkcm9wVGFyZ2V0LCBzaWRlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZHJhZ0Fib3ZlVGFyZ2V0Lm1vdXNlRHJvcCwgdGFyZ2V0OiAnICsgZHJvcFRhcmdldCArICcsIHBhcnQ6ICcgKyBkcm9wVGFyZ2V0IC5wYXJ0ICsgJywgc2hvdzogJyArIHNob3cpO1xyXG4gICAgICAgIGlmIChzaWRlICE9PSBudWxsICYmIGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihkcm9wVGFyZ2V0LnBhcnQsIHNpZGUsIHRydWUpKSB7XHJcbiAgICAgICAgICAgIG1hcC5hZGRTZWxlY3RlZFRoaW5nQXNPcmRlcmVkU2lzdGVyT2YoZHJvcFRhcmdldC5wYXJ0LCBzaWRlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZVNpc3RlcnNPZihkcm9wVGFyZ2V0LnBhcnQsIHRydWUpKSB7XHJcbiAgICAgICAgICAgIG1hcC5hZGRTZWxlY3RlZFRoaW5nc0FzU2lzdGVyc09mKGRyb3BUYXJnZXQucGFydCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVDaGlsZHJlbk9mKGRyb3BUYXJnZXQucGFydCwgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgbWFwLmFkZFNlbGVjdGVkVGhpbmdzQXNDaGlsZHJlbk9mKGRyb3BUYXJnZXQucGFydCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHdoZW4gdG8gc2hvdyB0aGUgUi10aGluZyBrbm9iIG9uIGEgbGlua1xyXG4gICAgZnVuY3Rpb24gc2hvd0tub2IobGluaykge1xyXG4gICAgICAgIHJldHVybiBsaW5rID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckxpbms7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLSBjb21wb25lbnRzIGZvciBtYWluIGdyb3VwIHRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIGRGbGFnTWFya2VyKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2ZpbGwnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmRhdGEuZGZsYWcgPyAnIzAwMCcgOiBudWxsO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImRmbGFnXCIsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDE4LCAxOCksXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGIE0wIDEgTDAgMTggTDE4IDAgTDEgMHpcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFwiRFwiIGNvcm5lciAodG9wIGxlZnQsIHJlZClcclxuICAgIGZ1bmN0aW9uIGNvcm5lckQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dEQ29ybmVyKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY29ybmVyRFwiLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1MCwgNTApLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1MCwgNTApLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRiBNMCAxIEwwIDUwIEw1MCAwIEwxIDB6XCIsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogY29sb3JELFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NsaWNrLCBjb250cm9sOicgKyBldmVudC5jb250cm9sICsgJywgYWx0OicgKyBldmVudC5hbHQgKyAnLCBtZXRhOicgKyBldmVudC5tZXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuYWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5COiBhIHNpZGUgZWZmZWN0IG9mIHRoaXMgd2lsbCBiZSB0byBzZWxlY3QganVzdCB0aGlzIGdyb3VwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCB3b3VsZCBub3QgaGFwcGVuIG90aGVyd2lzZSB2aWEgY29udHJvbC1jbGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuc2V0REVkaXRvclRoaW5nKHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5oYW5kbGVDb3JuZXJDbGljayhcIkRcIiwgdGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjb250ZXh0Q2xpY2s6JyArIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBtYXAudG9nZ2xlREZsYWcodGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIkRcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogXCJ3aGl0ZVwiLFxyXG4gICAgICAgICAgICAgICAgZm9udDogJzlweCBzYW5zLXNlcmlmJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMTIsIDE1KSxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXCJTXCIgY29ybmVyIChib3R0b20gbGVmdCwgZ3JlZW4pXHJcbiAgICBmdW5jdGlvbiBjb3JuZXJTKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChzaG93U0Nvcm5lcihvYmopID8gMSA6IDApO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvcm5lclNcIixcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgNTApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUwLCA1MCksXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUwLCA1MCksXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGIE0wIDAgTDAgNDkgTDEgNTAgTDUwIDUwelwiLCB0cnVlKSxcclxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLmhhbmRsZUNvcm5lckNsaWNrKFwiU1wiLCB0YXJnZXQucGFydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAvLyBleHBhbnNpb24gaW5kaWNhdG9yXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Bvc2l0aW9uJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAob2JqLmlzU3ViR3JhcGhFeHBhbmRlZCA/IG5ldyBnby5Qb2ludCg0LCA0MykgOiBuZXcgZ28uUG9pbnQoNSwgMzgpKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnYW5nbGUnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvYmouaXNTdWJHcmFwaEV4cGFuZGVkID8gOTAgOiAwKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNSwgMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBnby5HZW9tZXRyeS5wYXJzZShcIkYgTTAgMCBMNSA1IEwwIDEwelwiLCB0cnVlKSxcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBcIiMzMzNcIixcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJTXCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IFwid2hpdGVcIixcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICc5cHggc2Fucy1zZXJpZicsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDEyLCAyOCksXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNob3cgb25seSB3aGVuIHN5c3RlbSBpcyBjb2xsYXBzZWRcclxuICAgIGZ1bmN0aW9uIHNDb2xsYXBzZWRNYXJrZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhc2hvd1NDb3JuZXIob2JqKSAmJiBvYmoubWVtYmVyUGFydHMuY291bnQgPiAwICYmICFvYmouaXNTdWJHcmFwaEV4cGFuZGVkO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDUsIDg4KSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1LCAxMCksXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGIE0wIDAgTDUgNSBMMCAxMHpcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAnIzMzMycsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcIlJcIiBjb3JuZXIgKGJvdHRvbSByaWdodCwgYmx1ZSlcclxuICAgIGZ1bmN0aW9uIGNvcm5lclIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dSQ29ybmVyKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY29ybmVyUlwiLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvcm5lclJTaGFwZVwiLFxyXG4gICAgICAgICAgICAgICAgLy8gTkI6IHRoaXMgY29ybmVyIGlzIGRvbmUgZGlmZmVyZW50bHkgZnJvbSB0aGUgb3RoZXJzOlxyXG4gICAgICAgICAgICAgICAgLy8gMS4gdGhlIG92ZXJhbGwgc2hhcGUgaXMgdGhlIHNpemUgb2YgdGhlIHdob2xlIHNxdWFyZSwgc28gdGhlIHBvcnQgZmFsbHMgaW4gdGhlIG1pZGRsZSBpbnN0ZWFkIG9mIHRoZSBjb3JuZXI7XHJcbiAgICAgICAgICAgICAgICAvLyAyLiB0aGUgZ2VvbWV0cnkgdHJhY2VzIGFyb3VuZCB0aGUgZWRnZXMgb2YgdGhlIHdob2xlIHNxdWFyZSwgYmVjYXVzZSBvdGhlcndpc2UgdGhlIGxpbmsgbGluZSB3aWxsXHJcbiAgICAgICAgICAgICAgICAvLyAgICBzaG93IGluc2lkZSB0aGUgbWFpbiBzcXVhcmUgaWYgaXQncyBjcm9zc2luZyBvbmUgb2YgdGhlIG90aGVyIDMgcXVhZHJhbnRzIFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiTTAgMCBMMCAxMDAgXCIgKyAvLyB0b3AgbGVmdCB0byBib3R0b20gbGVmdFxyXG4gICAgICAgICAgICAgICAgICAgIFwiTDk5IDEwMCBMMTAwIDk5IEwgMTAwIDAgXCIgKyAvLyBib3R0b20vcmlnaHQgc2lkZXMgKHJvdW5kIGJvdHRvbSByaWdodCBjb3JuZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgXCJMIDAgMCBMIDEwMCAwIFwiICsgLy8gYmFjayB0byB0b3AgbGVmdCB0aGVuIHRvcCByaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIFwiTCAxMDAgNTAgTCA1MCAxMDAgXCIgKyAvLyB0byBtaWRwb2ludCBvZiByaWdodCBzaWRlLCBtaWRwb2ludCBvZiBib3R0b20gc2lkZVxyXG4gICAgICAgICAgICAgICAgICAgIFwiTDAgMTAwelwiLCAvLyBib3R0b20gbGVmdCwgcmV0dXJuIGhvbWVcclxuICAgICAgICAgICAgICAgICAgICB0cnVlKSxcclxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG5cclxuICAgICAgICAgICAgICAgIHBvcnRJZDogXCJSXCIsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlRHVwbGljYXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIHNpbmdsZSBvciBkb3VibGUgY2xpY2tcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5oYW5kbGVDb3JuZXJDbGljayhcIlJcIiwgdGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlJcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogXCJ3aGl0ZVwiLFxyXG4gICAgICAgICAgICAgICAgZm9udDogJzlweCBzYW5zLXNlcmlmJyxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoODIsIDc4KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYXR0YWNobWVudFBhcGVyQ2xpcCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5kYXRhLmF0dGFjaG1lbnRzICE9PSBudWxsICYmIG9iai5kYXRhLmF0dGFjaG1lbnRzICE9PSB1bmRlZmluZWQgJiYgb2JqLmRhdGEuYXR0YWNobWVudHMubGVuZ3RoID4gMDtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2dlb21ldHJ5JywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdvLkdlb21ldHJ5LnBhcnNlKHBhcGVyY2xpcFN2Z1BhdGgsIHRydWUpO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnZGVzaXJlZFNpemUnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGdvLlNpemUoNTEyLCA1MTIpOyAvLyBOQjogdGhlIHR3byBpY29ucyBkb24ndCBzY2FsZSB0byB0aGUgc2FtZSBwcm9wb3J0aW9ucyBmb3Igc29tZSByZWFzb24gLSA/P1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDQ2LCA4NSksXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogMC4wMixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogJyMwMDAnLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJyMwMDAnLFxyXG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpcCBjbGlja2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkudG9nZ2xlVGFiKG1hcC5nZXRVaSgpLlRBQl9JRF9BVFRBQ0hNRU5UUyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBFeWViYWxsKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFwLmdldFBlcnNwZWN0aXZlcygpLmlzUGVyc3BlY3RpdmVQb2ludChvYmopO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnZ2VvbWV0cnknLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ28uR2VvbWV0cnkucGFyc2UobWFwLnBJc0V4cGFuZGVkKG9iaikgPyBleWVTdmdQYXRoIDogZXllQmxvY2tlZFN2Z1BhdGgsIHRydWUpO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnZGVzaXJlZFNpemUnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGdvLlNpemUoNTEyLCBtYXAucElzRXhwYW5kZWQob2JqKSA/IDQ0MCA6IDUxMik7IC8vIE5COiB0aGUgdHdvIGljb25zIGRvbid0IHNjYWxlIHRvIHRoZSBzYW1lIHByb3BvcnRpb25zIGZvciBzb21lIHJlYXNvbiAtID8/XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoODcsIDQpLFxyXG4gICAgICAgICAgICAgICAgc2NhbGU6IDAuMDIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwJyxcclxuICAgICAgICAgICAgICAgIGZpbGw6ICcjMDAwJyxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQIGV4cGFuc2lvbiBpbmRpY2F0b3IgLSB0aGlzIHNob3dzIHdoZW4gdGhlIFAgY29ybmVyIGlzIG5vdCB2aXNpYmxlLCBhbmQgb25seSBpZiB0aGUgdGhpbmcgaXMgYSBwZXJzcGVjdGl2ZSBwb2ludFxyXG4gICAgZnVuY3Rpb24gcG9pbnRNYXJrZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHBFeWViYWxsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUCB2aWV3IGluZGljYXRvclxyXG4gICAgZnVuY3Rpb24gdmlld01hcmtlcigpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsIFwiQm9yZGVyXCIsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdmaWxsJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFZpZXdNYXJrZXJGaWxsKG9iaik7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRWaWV3TWFya2VyRmlsbChvYmopIHtcclxuICAgICAgICB2YXIgd2VpZ2h0ID0gbWFwLmdldFBlcnNwZWN0aXZlcygpLmdldFBlcnNwZWN0aXZlVmlld1dlaWdodChvYmopO1xyXG5cclxuICAgICAgICBpZiAod2VpZ2h0ID09IDMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG9yUERhcms7XHJcbiAgICAgICAgfSBlbHNlIGlmICh3ZWlnaHQgPT0gMikge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sb3JQO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2VpZ2h0ID09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG9yUExpZ2h0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcInRyYW5zcGFyZW50XCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFwiUFwiIGNvcm5lciAodG9wIHJpZ2h0LCBvcmFuZ2UpXHJcbiAgICBmdW5jdGlvbiBjb3JuZXJQKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChzaG93UENvcm5lcihvYmopID8gMSA6IDApO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvcm5lclBcIixcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMTAwLCAxMDApLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJjb3JuZXJQU2hhcGVcIixcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMTAwLCAxMDApLFxyXG4gICAgICAgICAgICAgICAgLy8gTkI6IHRoaXMgZ2VvbWV0cnkgY292ZXJzIHRoZSB3aG9sZSBzcXVhcmU7IHNlZSBub3RlIGFib3ZlIGZvciBjb3JuZXJSXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiTTAgMCBMMCAxMDAgTDEwMCAxMDBcIiArIC8vIHRvcCBsZWZ0IHRvIGJvdHRvbSBsZWZ0IHRvIGJvdHRvbSByaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIFwiTDEwMCAxIEw5OSAwIEwwIDBcIiArIC8vIHJpZ2h0L3RvcCBzaWRlcyAocm91bmQgdG9wIHJpZ2h0IGNvcm5lcilcclxuICAgICAgICAgICAgICAgICAgICBcIkwgNTAgMCBMIDEwMCA1MCBcIiArIC8vIHRvIG1pZHBvaW50IG9mIHRvcCBzaWRlLCBtaWRwb2ludCBvZiByaWdodCBzaWRlXHJcbiAgICAgICAgICAgICAgICAgICAgXCJMMTAwIDEwMCAwIDEwMHpcIiwgLy8gYm90dG9tIHJpZ2h0LCBib3R0b20gbGVmdCwgcmV0dXJuIGhvbWVcclxuICAgICAgICAgICAgICAgICAgICB0cnVlKSxcclxuXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBjb2xvclAsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuXHJcbiAgICAgICAgICAgICAgICBwb3J0SWQ6IFwiUFwiLFxyXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlU2VsZk5vZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlRHVwbGljYXRlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZVNlbGZOb2RlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVEdXBsaWNhdGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRvTWF4TGlua3M6IDEsXHJcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuaGFuZGxlQ29ybmVyQ2xpY2soXCJQXCIsIHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHBFeWViYWxsKCksIC8vIFAgZXhwYW5zaW9uIGluZGljYXRvclxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiUFwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBcIndoaXRlXCIsXHJcbiAgICAgICAgICAgICAgICBmb250OiAnOXB4IHNhbnMtc2VyaWYnLFxyXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg4MSwgMTUpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtYWluQm9yZGVyKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSwgXCJCb3JkZXJcIixcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3N0cm9rZScsICcnLCBnZXRHcm91cFNlbGVjdGlvblN0cm9rZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3N0cm9rZVdpZHRoJywgJycsIGdldEdyb3VwU2VsZWN0aW9uU3Ryb2tlV2lkdGgpLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwibWFpbmFyZWFcIixcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgLy9wb3J0SWQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlU2VsZk5vZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlRHVwbGljYXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlU2VsZk5vZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZUR1cGxpY2F0ZXM6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIGhhbmRsZXJzIGZvciBtb3VzZSBkcmFnL2Ryb3AgYWN0aW9ucyBvbiBncm91cHMsIHdoaWNoIG5lZWQgdG8gYmUgcmVwbGljYXRlZCBvbiBkaWZmZXJlbnQgdGFyZ2V0IHBhcnRzIC0tLS0tLS1cclxuXHJcbiAgICAvLyBwb3NpdGlvbiBpcyBtYXAuTEVGVCwgbnVsbCwgb3IgbWFwLlJJR0hUXHJcbiAgICBmdW5jdGlvbiBnZXRHcm91cE1vdXNlRHJhZ0VudGVySGFuZGxlcihwb3NpdGlvbikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihldmVudCwgdGFyZ2V0LCBvYmoyKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ21vdXNlRHJhZ0VudGVyLCBlLmRwOiAnICsgZXZlbnQuZG9jdW1lbnRQb2ludCArICcsIHRhcmdldC5wYXJ0OiAnICsgdGFyZ2V0LnBhcnQgKyAnLCB0YXJnZXQgYm91bmRzOiAnICsgdGFyZ2V0LmFjdHVhbEJvdW5kcyk7XHJcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRHcm91cCA9IHRhcmdldC5wYXJ0O1xyXG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0UG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQsIHRhcmdldCwgb2JqMikge1xyXG4gICAgICAgIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRHcm91cCA9IG51bGw7XHJcbiAgICAgICAgbWFwLmdldFVpKCkuZHJhZ1RhcmdldFBvc2l0aW9uID0gbnVsbDtcclxuICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldEdyb3VwTW91c2VEcm9wSGFuZGxlcihwb3NpdGlvbikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihldmVudCwgZHJvcFRhcmdldCkge1xyXG4gICAgICAgICAgICBoYW5kbGVHcm91cE1vdXNlRHJvcChldmVudCwgZHJvcFRhcmdldCwgcG9zaXRpb24pO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGdyb3VwQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgbWFwLmdldFVpKCkuaGFuZGxlQ29ybmVyQ2xpY2soXCJcIiwgdGFyZ2V0KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIHRhcmdldHMgZm9yIGRyYWdnaW5nIHRvIEQgb3IgUyAtLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIGRyYWdBYm92ZVRhcmdldCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyNSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIobWFwLkxFRlQpLFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6IGdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcm9wOiBnZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIobWFwLkxFRlQpLFxyXG4gICAgICAgICAgICAgICAgY2xpY2s6IGdyb3VwQ2xpY2tIYW5kbGVyXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGRyYWcgdGFyZ2V0IHJlZ2lvblxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJSZWN0YW5nbGVcIiwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMjUsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCdcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIC8vIGRyYWcgaW5kaWNhdG9yIGJhclxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJCb3JkZXJcIixcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2Yob2JqLnBhcnQsIG1hcC5MRUZULCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6ICcjMDAwJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkcmFnSW50b1RhcmdldCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDI1KSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNTAsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcmFnRW50ZXI6IGdldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKG51bGwpLFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6IGdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcm9wOiBnZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIobnVsbCksXHJcbiAgICAgICAgICAgICAgICBjbGljazogZ3JvdXBDbGlja0hhbmRsZXJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiUmVjdGFuZ2xlXCIsIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDUwLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkcmFnQmVsb3dUYXJnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbiwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCA3NSksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJhZ0VudGVyOiBnZXRHcm91cE1vdXNlRHJhZ0VudGVySGFuZGxlcihtYXAuUklHSFQpLFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6IGdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcm9wOiBnZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIobWFwLlJJR0hUKSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBncm91cENsaWNrSGFuZGxlclxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBkcmFnIHRhcmdldCByZWdpb25cclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiUmVjdGFuZ2xlXCIsIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAvLyBkcmFnIGluZGljYXRvciBiYXJcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiQm9yZGVyXCIsXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKG9iai5wYXJ0LCBtYXAuUklHSFQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDE1KSxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6ICcjMDAwJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIHRoZSBUZXh0QmxvY2sgZm9yIHRoZSBncm91cCB0aXRsZSwgZm9yIHVzZSBpbiB0aGUgbWFpbiBncm91cCB0ZW1wbGF0ZSwgaW5zaWRlIHRoZSBib3guXHJcbiAgICBmdW5jdGlvbiBncm91cEludGVybmFsVGV4dEJsb2NrKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuSG9yaXpvbnRhbCwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJ0ZXh0XCIsIFwidGV4dFwiKS5tYWtlVHdvV2F5KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInZpc2libGVcIiwgXCJcIiwgZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbHdheXMgc2hvdyB0ZXh0IGluc2lkZSBib3ggZm9yIFItdGhpbmdzLCBiZWNhdXNlIGV4dGVybmFsIHRleHQgd2lsbCB0aHJvdyBvZmYgbGF5b3V0XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcC5nZXRMYXlvdXRzKCkuaXNOb3RXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5nZXRMYXlvdXRzKCkuaXNSVGhpbmdXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApO1xyXG4gICAgICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiA4MCxcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5DZW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IFwibW92ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQ6ICcxMHB4IHNhbnMtc2VyaWYnLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzTXVsdGlsaW5lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHdyYXA6IGdvLlRleHRCbG9jay5XcmFwRGVzaXJlZFNpemUsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlRHJhZ0VudGVyOiBnZXRHcm91cE1vdXNlRHJhZ0VudGVySGFuZGxlcihudWxsKSxcclxuICAgICAgICAgICAgICAgICAgICBtb3VzZURyYWdMZWF2ZTogZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbW91c2VEcm9wOiBnZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIobnVsbCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGdyb3VwQ2xpY2tIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZ3JvdXBJbmZvKHRhcmdldC5wYXJ0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgYSBUZXh0QmxvY2sgZm9yIHRoZSBncm91cCB0aXRsZSwgZm9yIHVzZSBpbiB0aGUgbWFpbiBncm91cCB0ZW1wbGF0ZSwgb24gdGhlIGxlZnQgb3IgcmlnaHQuXHJcbiAgICAvLyB2aXNpYmxlRm4gaXMgYSBjYWxsYmFjayB0byBiZSBib3VuZCB0byB0aGUgdmlzaWJpbGl0eSBhdHRyaWJ1dGUgb2YgdGhlIFRleHRCbG9jay5cclxuICAgIC8vIHRleHRBbGlnbiBpcyAnbGVmdCcgb3IgJ3JpZ2h0Jy5cclxuICAgIGZ1bmN0aW9uIGdyb3VwRXh0ZXJuYWxUZXh0QmxvY2sodmlzaWJsZUZuLCB0ZXh0QWxpZ24pIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uVGV4dEJsb2NrLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInRleHRcIiwgXCJ0ZXh0XCIpLm1ha2VUd29XYXkoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJ2aXNpYmxlXCIsIFwiXCIsIHZpc2libGVGbikub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldEV4dGVybmFsVGV4dFNjYWxlKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnZXh0ZXJuYWx0ZXh0LScgKyB0ZXh0QWxpZ24sIC8vIE5COiB0aGlzIHNjcmV3cyB1cCBsYXlvdXRzIGZvciBzb21lIHJlYXNvbiAtID8/XHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IHRleHRBbGlnbixcclxuICAgICAgICAgICAgICAgIG1hcmdpbjogNSxcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICcxMHB4IHNhbnMtc2VyaWYnLFxyXG4gICAgICAgICAgICAgICAgaXNNdWx0aWxpbmU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjbGljazogZ3JvdXBDbGlja0hhbmRsZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gZ3JvdXAvVGhpbmcgdGVtcGxhdGUgLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmdyb3VwVGVtcGxhdGUgPVxyXG4gICAgICAgIG1rKGdvLkdyb3VwLCBnby5QYW5lbC5WZXJ0aWNhbCxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJsYXlvdXRcIiwgXCJsYXlvdXRcIiwgZnVuY3Rpb24obGF5b3V0TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcC5nZXRMYXlvdXRzKCkuZ2V0TGF5b3V0KGxheW91dE5hbWUpO1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJtb3ZhYmxlXCIsIFwiXCIsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICFvYmouaXNMaW5rTGFiZWw7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwiaXNTdWJHcmFwaEV4cGFuZGVkXCIsIFwic0V4cGFuZGVkXCIpLFxyXG4gICAgICAgICAgICAvLyBkaW0gdGhlIHRoaW5nIGlmIGl0J3MgYmVpbmcgZHJhZ2dlZCBvdmVyIGFub3RoZXIgdGhpbmcgKGRyb3AgdG8gc2lzdGVyL2NoaWxkKVxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAob2JqLmlzU2VsZWN0ZWQgJiYgbWFwLmdldFVpKCkuZHJhZ1RhcmdldEdyb3VwID8gMC4yNSA6IDEpO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbk9iamVjdE5hbWU6IFwibWFpbnBhbmVsXCIsXHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvblNwb3Q6IGdvLlNwb3QuVG9wTGVmdCxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbkFkb3JuZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaXNTdWJHcmFwaEV4cGFuZGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbGF5ZXJOYW1lOiAnRm9yZWdyb3VuZCcsXHJcbiAgICAgICAgICAgICAgICAvLyBoaWdobGlnaHQgY29ybmVyc1xyXG4gICAgICAgICAgICAgICAgbW91c2VFbnRlcjogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCwgb2JqMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyB1bmhpZ2hsaWdodCBjb3JuZXJzXHJcbiAgICAgICAgICAgICAgICBtb3VzZUxlYXZlOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0LCBvYmoyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXAgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGNvbnRhaW5pbmdHcm91cENoYW5nZWQ6IGZ1bmN0aW9uKHBhcnQsIG9sZGdyb3VwLCBuZXdncm91cCkgeyBcclxuICAgICAgICAgICAgICAgIC8vICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnNldERhdGFQcm9wZXJ0eShwYXJ0LmRhdGEsICdsZXZlbCcsIG1hcC5jb21wdXRlTGV2ZWwocGFydCkpOyBcclxuICAgICAgICAgICAgICAgIC8vICAgICAvL3BhcnQudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTsgICBcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uUGFuZWwsIGdvLlBhbmVsLkhvcml6b250YWwsXHJcbiAgICAgICAgICAgICAgICBncm91cEV4dGVybmFsVGV4dEJsb2NrKG1hcC5nZXRMYXlvdXRzKCkuc2hvd0xlZnRUZXh0QmxvY2ssICdyaWdodCcpLFxyXG4gICAgICAgICAgICAgICAgbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwibWFpbnBhbmVsXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic2NhbGVcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRTY2FsZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBkcmFnIGFyZWFcclxuICAgICAgICAgICAgICAgICAgICBtayhnby5TaGFwZSwgXCJSZWN0YW5nbGVcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcImRyYWdhcmVhXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBzZWxmLmdyb3VwRmlsbENvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNob3cgZGVidWcgaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZ3JvdXBJbmZvKHRhcmdldC5wYXJ0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNYXJrZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0Fib3ZlVGFyZ2V0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdJbnRvVGFyZ2V0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdCZWxvd1RhcmdldCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cEludGVybmFsVGV4dEJsb2NrKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcm5lckQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZEZsYWdNYXJrZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ybmVyUygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzQ29sbGFwc2VkTWFya2VyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcm5lclIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRNYXJrZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ybmVyUCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50UGFwZXJDbGlwKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5Cb3JkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBncm91cEV4dGVybmFsVGV4dEJsb2NrKG1hcC5nZXRMYXlvdXRzKCkuc2hvd1JpZ2h0VGV4dEJsb2NrLCAnbGVmdCcpXHJcbiAgICAgICAgICAgICksXHJcblxyXG4gICAgICAgICAgICAvLyB0aGUgcGxhY2Vob2xkZXIgbm9ybWFsbHkgaG9sZHMgdGhlIGNoaWxkIG5vZGVzLCBidXQgd2UganVzdCB1c2UgYSBkdW1teSBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJwbGFjZWhvbGRlclwiLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogXCJ0cmFuc3BhcmVudFwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDAsIDApXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gbGluayB0ZW1wbGF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmxpbmtUZW1wbGF0ZSA9XHJcbiAgICAgICAgbWsoZ28uTGluaywge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBsYXllck5hbWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgcm91dGluZzogZ28uTGluay5Ob3JtYWwsXHJcbiAgICAgICAgICAgICAgICByZWxpbmthYmxlRnJvbTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHJlbGlua2FibGVUbzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1vdXNlRW50ZXI6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJMaW5rID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtb3VzZUxlYXZlOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0LCBvYmoyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyTGluayA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJhZ0VudGVyOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0LCBkcmFnT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyTGluayA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6IGZ1bmN0aW9uKGV2ZW50LCBkcm9wVGFyZ2V0LCBkcmFnT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyTGluayA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJvcDogZnVuY3Rpb24oZXZlbnQsIGRyb3BUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSBtYXAuZ2V0RGlhZ3JhbSgpLnNlbGVjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMgJiYgcGFydHMuY291bnQgPT0gMSAmJiBwYXJ0cy5maXJzdCgpIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmFkZFRoaW5nQXNSVGhpbmcocGFydHMuZmlyc3QoKSwgZHJvcFRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRvdWJsZUNsaWNrOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmNyZWF0ZVJUaGluZyh0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxpbmtJbmZvKHRhcmdldCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc3Ryb2tlJywgJycsIGdldFJMaW5rU2VsZWN0aW9uU3Ryb2tlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzdHJva2VXaWR0aFwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldExpbmtTdHJva2VXaWR0aCkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTElOS1NIQVBFXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKSxcclxuXHJcbiAgICAgICAgICAgIC8vIHNob3cgdG8vZnJvbSBhcnJvd2hlYWRzIGJhc2VkIG9uIGxpbmsgXCJ0eXBlXCIgYXR0cmlidXRlXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbUFycm93OiBcIkJhY2t3YXJkXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc3Ryb2tlJywgJycsIGdldFJMaW5rU2VsZWN0aW9uU3Ryb2tlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldEFycm93aGVhZFNjYWxlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAndHlwZScsIGZ1bmN0aW9uKHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PSAnZnJvbScgfHwgdCA9PSAndG9Gcm9tJztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9BcnJvdzogXCJTdGFuZGFyZFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3N0cm9rZScsICcnLCBnZXRSTGlua1NlbGVjdGlvblN0cm9rZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic2NhbGVcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRBcnJvd2hlYWRTY2FsZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJ3R5cGUnLCBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT0gJ3RvJyB8fCB0ID09ICd0b0Zyb20nO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKSxcclxuXHJcbiAgICAgICAgICAgIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5BdXRvLCAvLyBsaW5rIGxhYmVsIFwia25vYlwiXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dLbm9iKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldEFycm93aGVhZFNjYWxlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWd1cmU6IFwiRWxsaXBzZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yRCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGNvbG9yRCxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMlxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLnBMaW5rVGVtcGxhdGUgPVxyXG4gICAgICAgIG1rKGdvLkxpbmssXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChzZWxmLnNob3dQTGluayhvYmopID8gMSA6IDApO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25BZG9ybmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGxheWVyTmFtZTogJ0JhY2tncm91bmQnLCAvLyBtYWtlIFAgbGlua3MgZmFsbCBiZWhpbmQgUiBsaW5rc1xyXG4gICAgICAgICAgICAgICAgcm91dGluZzogZ28uTGluay5Ob3JtYWwsXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhsaW5rSW5mbyh0YXJnZXQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzdHJva2VXaWR0aFwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldExpbmtTdHJva2VXaWR0aCkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTElOS1NIQVBFXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBjb2xvclBMaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBjb2xvclBMaWdodFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgICAgIC8vIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiAoc2VsZi5zaG93UERvdChvYmopID8gMSA6IDApO1xyXG4gICAgICAgICAgICAgICAgLy8gfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic2NhbGVcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRBcnJvd2hlYWRTY2FsZSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvQXJyb3c6IFwiQ2lyY2xlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBjb2xvclBMaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBjb2xvclBMaWdodFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuZExpbmtUZW1wbGF0ZSA9XHJcbiAgICAgICAgbWsoZ28uTGluaywge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0YWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiTElOS1NIQVBFXCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGxcclxuICAgICAgICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0gdGVtcG9yYXJ5IGxpbmsvbm9kZSB0ZW1wbGF0ZXMsIGZvciB1c2Ugd2hlbiBkcmFnZ2luZyB0byBjcmVhdGUgUi9QIGxpbmVzIC0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBkZWZpbmUgaW5pdGlhbCB0ZW1wb3JhcnkgbGluayB0ZW1wbGF0ZXMgLSB0aGVzZSB3aWxsIGJlIG1vZGlmaWVkIHdoZW4gaGFuZGxlUG9ydFRhcmdldGVkIGlzIGNhbGxlZFxyXG4gICAgdGhpcy5zZXRUZW1wb3JhcnlMaW5rVGVtcGxhdGVzID0gZnVuY3Rpb24odG9vbCkge1xyXG4gICAgICAgIHRvb2wudGVtcG9yYXJ5TGluayA9IG1ha2VUZW1wb3JhcnlMaW5rVGVtcGxhdGUoKTtcclxuICAgICAgICB0b29sLnRlbXBvcmFyeUZyb21Ob2RlID0gbWFrZVRlbXBvcmFyeU5vZGVUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRvb2wudGVtcG9yYXJ5VG9Ob2RlID0gbWFrZVRlbXBvcmFyeU5vZGVUZW1wbGF0ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBtYWtlVGVtcG9yYXJ5TGlua1RlbXBsYXRlKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5MaW5rLCB7XHJcbiAgICAgICAgICAgICAgICBsYXllck5hbWU6IFwiVG9vbFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnbGlua3NoYXBlJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAyXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtYWtlVGVtcG9yYXJ5Tm9kZVRlbXBsYXRlKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5Hcm91cCwge1xyXG4gICAgICAgICAgICAgICAgbGF5ZXJOYW1lOiBcIlRvb2xcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJCb3JkZXJcIiwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2JvcmRlcicsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMyxcclxuICAgICAgICAgICAgICAgIGZpbGw6IG51bGxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNoYW5nZSBjb2xvciBhbmQgcG9ydElkIG9mIHRlbXBvcmFyeSBsaW5rIHRlbXBsYXRlcyBiYXNlZCBvbiB0aGUgdHlwZSBvZiBsaW5rIGJlaW5nIGNyZWF0ZWQvcmVsaW5rZWRcclxuICAgIHRoaXMuaGFuZGxlUG9ydFRhcmdldGVkID0gZnVuY3Rpb24odG9vbCwgcmVhbG5vZGUsIHJlYWxwb3J0LCB0ZW1wbm9kZSwgdGVtcHBvcnQsIHRvZW5kKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3BvcnRUYXJnZXRlZCwgcmVhbHBvcnQ6ICcgKyAocmVhbHBvcnQgPyByZWFscG9ydC5uYW1lIDogJycpICsgJywgdGVtcHBvcnQ6ICcgKyAodGVtcHBvcnQgPyB0ZW1wcG9ydC5uYW1lIDogJycpIFxyXG4gICAgICAgIC8vICAgICArICcsIG9yaWdpbmFsRnJvbVBvcnQ6ICcgKyAobHRvb2wub3JpZ2luYWxGcm9tUG9ydCA/IGx0b29sLm9yaWdpbmFsRnJvbVBvcnQubmFtZSA6ICcnKSArICcsIG9yaWdpbmFsVG9Qb3J0OiAnICsgbHRvb2wub3JpZ2luYWxUb1BvcnQpO1xyXG5cclxuICAgICAgICB2YXIgbGlua1NoYXBlID0gdG9vbC50ZW1wb3JhcnlMaW5rLmZpbmRPYmplY3QoJ2xpbmtzaGFwZScpO1xyXG4gICAgICAgIHZhciBmcm9tQm9yZGVyID0gdG9vbC50ZW1wb3JhcnlGcm9tTm9kZS5maW5kT2JqZWN0KCdib3JkZXInKTtcclxuICAgICAgICB2YXIgdG9Cb3JkZXIgPSB0b29sLnRlbXBvcmFyeVRvTm9kZS5maW5kT2JqZWN0KCdib3JkZXInKTtcclxuXHJcbiAgICAgICAgaWYgKHRvb2wub3JpZ2luYWxGcm9tUG9ydCAmJiB0b29sLm9yaWdpbmFsRnJvbVBvcnQubmFtZSA9PSAnY29ybmVyUFNoYXBlJykge1xyXG4gICAgICAgICAgICBsaW5rU2hhcGUuc3Ryb2tlID0gY29sb3JQO1xyXG4gICAgICAgICAgICBmcm9tQm9yZGVyLnN0cm9rZSA9IGNvbG9yUDtcclxuICAgICAgICAgICAgdG9Cb3JkZXIuc3Ryb2tlID0gY29sb3JQO1xyXG4gICAgICAgICAgICBmcm9tQm9yZGVyLnBvcnRJZCA9ICdQJztcclxuICAgICAgICAgICAgdG9Cb3JkZXIucG9ydElkID0gJ1AnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodG9vbC5vcmlnaW5hbEZyb21Qb3J0ICYmIHRvb2wub3JpZ2luYWxGcm9tUG9ydC5uYW1lID09ICdjb3JuZXJSU2hhcGUnKSB7XHJcbiAgICAgICAgICAgIGxpbmtTaGFwZS5zdHJva2UgPSBjb2xvclI7XHJcbiAgICAgICAgICAgIGZyb21Cb3JkZXIuc3Ryb2tlID0gY29sb3JSO1xyXG4gICAgICAgICAgICB0b0JvcmRlci5zdHJva2UgPSBjb2xvclI7XHJcbiAgICAgICAgICAgIGZyb21Cb3JkZXIucG9ydElkID0gJ1InO1xyXG4gICAgICAgICAgICB0b0JvcmRlci5wb3J0SWQgPSAnUic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRlbXBub2RlLnNjYWxlID0gbWFwLmdldExheW91dHMoKS5nZXRTY2FsZShyZWFsbm9kZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHByZXZlbnQgZHVwbGljYXRlICdQJyBsaW5rcyBpbiB0aGUgc2FtZSBkaXJlY3Rpb24gYmV0d2VlbiB0aGUgc2FtZSB0d28gdGhpbmdzXHJcbiAgICB0aGlzLnZhbGlkYXRlTGluayA9IGZ1bmN0aW9uKGZyb21Ob2RlLCBmcm9tUG9ydCwgdG9Ob2RlLCB0b1BvcnQpIHtcclxuICAgICAgICAvLyB0aGUgUCBwb3J0IGlzIG9uIHRvcCBvZiB0aGUgUiBwb3J0LCBzbyBib3RoIFAgYW5kIFIgbGlua3MgZ2V0IHRoZSB0b1BvcnQgc2V0IHRvIFIgYnkgZGVmYXVsdC5cclxuICAgICAgICBpZiAoZnJvbVBvcnQucG9ydElkID09ICdQJykge1xyXG4gICAgICAgICAgICAvLyBOQjogZmluZExpbmtzVG8gd291bGQgYmUgc2ltcGxlciwgYnV0IGl0IGRvZXNuJ3Qgc2VlbSB0byB3b3JrLi4uICg/KVxyXG4gICAgICAgICAgICB2YXIgcExpbmtzID0gdG9Ob2RlLmZpbmRMaW5rc0JldHdlZW4oZnJvbU5vZGUsICdQJywgJ1AnKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndmFsaWRhdGVMaW5rLCBwTGlua3MgZnJvbSAnICsgZnJvbU5vZGUgKyAnOicgKyBmcm9tUG9ydCArICcgdG8gJyArIHRvTm9kZSArICc6JyArIHRvUG9ydCArICcgPSAnICsgcExpbmtzLmNvdW50KTtcclxuICAgICAgICAgICAgaWYgKHBMaW5rcy5jb3VudCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHBMaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcExpbmsgPSBwTGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBMaW5rLmZyb21Ob2RlID09IGZyb21Ob2RlICYmIHBMaW5rLnRvTm9kZSA9PSB0b05vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gc2xpZGUgbm9kZSB0ZW1wbGF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoYWxpZ25tZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcImRlc2lyZWRTaXplXCIsIFwiXCIsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlID0gb2JqLmFkb3JuZWRPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IE1hdGgubWluKHNsaWRlLndpZHRoLCBzbGlkZS5oZWlnaHQpICogLjA1O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBnby5TaXplKHNpemUsIHNpemUpO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGFsaWdubWVudCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJjb2wtcmVzaXplXCIsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAncmdiYSgyNTEsMTcwLDU0LDEpJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNsaWRlVGVtcGxhdGUgPVxyXG4gICAgICAgIG1rKGdvLk5vZGUsIGdvLlBhbmVsLkF1dG8sXHJcbiAgICAgICAgICAgIC8vIE5COiB1bmxpa2UgZ3JvdXBzLCBzbGlkZXMganVzdCB1c2UgYSBub3JtYWwgMi13YXkgbG9jYXRpb24gYmluZGluZ1xyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcImxvY2F0aW9uXCIsIFwibG9jXCIsIGdvLlBvaW50LnBhcnNlKS5tYWtlVHdvV2F5KGdvLlBvaW50LnN0cmluZ2lmeSksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwid2lkdGhcIiwgXCJ3aWR0aFwiKS5tYWtlVHdvV2F5KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwiaGVpZ2h0XCIsIFwiaGVpZ2h0XCIpLm1ha2VUd29XYXkoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJ2aXNpYmxlXCIsIFwiXCIsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5kYXRhLmhhc1JlZ2lvbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFtYXAuZ2V0UHJlc2VudGVyKCkuaXNQcmVzZW50aW5nICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIW1hcC5nZXRQcmVzZW50ZXIoKS5pc0NyZWF0aW5nVGh1bWJuYWlsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFByZXNlbnRlcigpLmN1cnJlbnRTbGlkZUluZGV4ID09IG9iai5kYXRhLmluZGV4O1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvblNwb3Q6IGdvLlNwb3QuVG9wTGVmdCxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbkFkb3JuZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVzaXplQWRvcm5tZW50VGVtcGxhdGU6IG1rKGdvLkFkb3JubWVudCwgXCJTcG90XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbWsoZ28uUGxhY2Vob2xkZXIpLCAvLyB0YWtlcyBzaXplIGFuZCBwb3NpdGlvbiBvZiBhZG9ybmVkIG9iamVjdCAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Ub3BMZWZ0KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlRvcCksXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Ub3BSaWdodCksXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5SaWdodCksXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Cb3R0b21SaWdodCksXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Cb3R0b20pLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuQm90dG9tTGVmdCksXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5MZWZ0KVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAsXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhub2RlSW5mbyh0YXJnZXQucGFydCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiUmVjdGFuZ2xlXCIsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwic2xpZGVib3JkZXJcIixcclxuICAgICAgICAgICAgICAgIGZpbGw6ICdyZ2JhKDI1MSwxNzAsNTQsLjEpJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tIGV4cG9ydCBmb290ZXIgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIE5COiB0aGlzIGlzIG5vdCBhIHRlbXBsYXRlIHBlciBzZSwgaW4gdGhhdCBpdCBpcyBhZGRlZCB0byB0aGUgZGlhZ3JhbSBcclxuICAgIC8vIHN0YXRpY2FsbHksIHJhdGhlciB0aGFuIGJlaW5nIGJvdW5kIHRvIHNvbWV0aGluZyBpbiB0aGUgbW9kZWwuXHJcbiAgICAvLyBCdXQgd2UgcHV0IGl0IGhlcmUgYmVjYXVzZSBpdCBpcyBhYm91dCBjcmVhdGluZyBwYXJ0cyBhbmQgc3R1ZmYuXHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlRXhwb3J0Rm9vdGVyKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5Ob2RlLCBnby5QYW5lbC5TcG90LCB7XHJcbiAgICAgICAgICAgICAgICBsYXllck5hbWU6ICdGb3JlZ3JvdW5kJyxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogMSxcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RhYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJSZWN0YW5nbGVcIiwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJyZWN0YW5nbGVcIixcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNjAsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtayhnby5QaWN0dXJlLCB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICcvYXNzZXRzL21ldGFtYXAtbG9nby01MC5wbmcnLFxyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50OiBnby5TcG90LlRvcExlZnQsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnRGb2N1czogZ28uU3BvdC5Ub3BMZWZ0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDE5NSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNTBcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJtZXRhbWFwLmNhYnJlcmFyZXNlYXJjaC5vcmdcIixcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Cb3R0b21MZWZ0LFxyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50Rm9jdXM6IGdvLlNwb3QuQm90dG9tTGVmdCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAyMDBcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJtYXBUaXRsZVwiLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJcIixcclxuICAgICAgICAgICAgICAgIHRleHRBbGlnbjogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50OiBnby5TcG90LlRvcFJpZ2h0LFxyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50Rm9jdXM6IGdvLlNwb3QuVG9wUmlnaHQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMzAwXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiYXV0aG9yTmFtZVwiLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJcIixcclxuICAgICAgICAgICAgICAgIHRleHRBbGlnbjogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50OiBnby5TcG90LkJvdHRvbVJpZ2h0LFxyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50Rm9jdXM6IGdvLlNwb3QuQm90dG9tUmlnaHQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMzAwXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjcmVhdGVzIG9yIHJlZnJlc2hlcyB0aGUgZm9vdGVyIGxvZ28vdGV4dCB0aGF0IGlzIGRpc3BsYXllZCBpbiB0aGUgaW1hZ2UgZXhwb3J0XHJcbiAgICB0aGlzLmFkZEV4cG9ydEZvb3RlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghX2V4cG9ydEZvb3Rlcikge1xyXG4gICAgICAgICAgICBfZXhwb3J0Rm9vdGVyID0gY3JlYXRlRXhwb3J0Rm9vdGVyKCk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkuYWRkKF9leHBvcnRGb290ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zaG93RXhwb3J0Rm9vdGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHJlY3QgPSBtYXAuY29tcHV0ZU1hcEJvdW5kcygpO1xyXG4gICAgICAgIC8vIHB1dCBmb290ZXIgYXQgbGVhc3QgMTAwIHB4IGJlbG93IGJvdHRvbSBvZiBtYXA7IG1ha2UgaXQgYXQgbGVhc3QgNTAwcHggd2lkZVxyXG4gICAgICAgIHZhciB4ID0gcmVjdC54O1xyXG4gICAgICAgIHZhciB5ID0gcmVjdC55ICsgcmVjdC5oZWlnaHQgKyBNYXRoLm1heCgxMDAsIHJlY3QuaGVpZ2h0IC8gNSk7XHJcbiAgICAgICAgdmFyIHcgPSBNYXRoLm1heCg1MDAsIHJlY3Qud2lkdGgpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3Nob3dFeHBvcnRGb290ZXIsIGJvdW5kcyByZWN0OiAnICsgcmVjdCArICcsIHc6ICcgKyB3KTtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLmxvY2F0aW9uID0gbmV3IGdvLlBvaW50KHgsIHkpO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIuZmluZE9iamVjdChcInJlY3RhbmdsZVwiKS53aWR0aCA9IHc7XHJcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5maW5kT2JqZWN0KFwibWFwVGl0bGVcIikudGV4dCA9IFwiTWFwIFRpdGxlOiBcIiArICRzY29wZS5tYXBUaXRsZTtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLmZpbmRPYmplY3QoXCJhdXRob3JOYW1lXCIpLnRleHQgPSBcIkF1dGhvcjogXCIgKyAkc2NvcGUudXNlck5hbWU7XHJcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5vcGFjaXR5ID0gMTtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLmludmFsaWRhdGVMYXlvdXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5oaWRlRXhwb3J0Rm9vdGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5vcGFjaXR5ID0gMDtcclxuICAgIH07XHJcblxyXG59OyIsIlxyXG5TYW5kYmFua0VkaXRvci5UZXN0cyA9IGZ1bmN0aW9uICgkc2NvcGUsIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICB0aGlzLlRFU1RfU1RBVFVTX05PVF9SVU4gPSAnbm90LXJ1bic7XHJcbiAgICB0aGlzLlRFU1RfU1RBVFVTX1BBU1NFRCA9ICdwYXNzZWQnO1xyXG4gICAgdGhpcy5URVNUX1NUQVRVU19FWEFNSU5FID0gJ2V4YW1pbmUnO1xyXG4gICAgdGhpcy5URVNUX1NUQVRVU19GQUlMRUQgPSAnZmFpbGVkJztcclxuXHJcbiAgICB0aGlzLmN1cnJlbnRUZXN0ID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucnVuVGVzdCA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgICAgIHZhciB0ZXN0ID0gXy5maW5kV2hlcmUoc2VsZi50ZXN0cywgeyBuYW1lOiBuYW1lIH0pO1xyXG4gICAgICAgICAgICB0ZXN0LnN0YXR1cyA9IHNlbGYuVEVTVF9TVEFUVVNfTk9UX1JVTjtcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50VGVzdCA9IHRlc3Q7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY2xlYXIoKTtcclxuICAgICAgICAgICAgdGVzdC5ydW4oZGlhZ3JhbSk7XHJcbiAgICAgICAgICAgIGlmICh0ZXN0LmNoZWNrID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRlc3Quc3RhdHVzID0gc2VsZi5URVNUX1NUQVRVU19FWEFNSU5FO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGVzdC5mYWlsUmVhc29uID0gdGVzdC5jaGVjayhkaWFncmFtKTtcclxuICAgICAgICAgICAgICAgIGlmIChfLmlzU3RyaW5nKHRlc3QuZmFpbFJlYXNvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXN0LnN0YXR1cyA9IHNlbGYuVEVTVF9TVEFUVVNfRkFJTEVEOyAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlc3Quc3RhdHVzID0gc2VsZi5URVNUX1NUQVRVU19QQVNTRUQ7ICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7ICAgICAgICBcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGVHZW5lcmF0b3JUZXN0ID0gZnVuY3Rpb24obmFtZSwgbWFwSXRGbikge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdUaGlua1E6ICcgKyBuYW1lLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHsgc2VsZi5ydW5HZW5lcmF0b3JUZXN0KG1hcEl0Rm4pOyB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5ydW5HZW5lcmF0b3JUZXN0ID0gZnVuY3Rpb24obWFwSXRGbikge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgZ2VuZXJhdG9yID0gbWFwLmdldEdlbmVyYXRvcigpO1xyXG4gICAgICAgIGdlbmVyYXRvci5jb25jZXB0MSA9ICdDT05DRVBUIDEnO1xyXG4gICAgICAgIGdlbmVyYXRvci5jb25jZXB0MiA9ICdDT05DRVBUIDInO1xyXG4gICAgICAgIGdlbmVyYXRvci5tYXBJdChtYXBJdEZuKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50ZXN0cyA9IFtcclxuICAgICAgICAvLyB7XHJcbiAgICAgICAgLy8gICAgIG5hbWU6ICdbRmFpbGVkIHRlc3RdJyxcclxuICAgICAgICAvLyAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgLy8gICAgIGNoZWNrOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gJ1RoaXMgdGVzdCBmYWlsZWQgLSB0aGlzIGlzIG9ubHkgYSB0ZXN0Lic7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ1Jlc2V0IG1hcCcsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5jbGlja0NyZWF0aW5nVG9vbC5pbnNlcnRQYXJ0KG5ldyBnby5Qb2ludCgwLDApKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5jb3VudCA9PSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgU2lzdGVyJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmluc2VydFBhcnQobmV3IGdvLlBvaW50KDAsMCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgbWFwLmNyZWF0ZVNpc3Rlcihncm91cCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5jb3VudCA9PSAyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgUiB0byBTaXN0ZXInLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuaW5zZXJ0UGFydChuZXcgZ28uUG9pbnQoMCwwKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBtYXAuY3JlYXRlUlRvU2lzdGVyKGdyb3VwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnQ3JlYXRlIENoaWxkJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmluc2VydFBhcnQobmV3IGdvLlBvaW50KDAsMCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGdyb3VwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnQ3JlYXRlIDMgY2hpbGRyZW4gYW5kIHN3aXRjaCB0byBmcmVlaGFuZCcsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5jbGlja0NyZWF0aW5nVG9vbC5pbnNlcnRQYXJ0KG5ldyBnby5Qb2ludCgwLDApKTtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChncm91cCk7XHJcbiAgICAgICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoZ3JvdXApO1xyXG4gICAgICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGdyb3VwKTtcclxuICAgICAgICAgICAgICAgIC8vIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsYXlvdXQnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIGdyb3VwLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuc2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQoJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5jb3VudCAhPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdUb3AgbGV2ZWwgZ3JvdXAgY291bnQgaXMgbm90IDEnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwLm1lbWJlclBhcnRzLmNvdW50ICE9IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1BhcmVudCBkYXRhIGNoaWxkcmVuIGlzIG5vdCAzJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFJUQkIgaW50byBvdXRsaW5lIFMnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIHRoZSBwcmVzZWxlY3RlZCBSVEJCIGludG8gV2hvbGUgKFMpLCB0aGVuIGRvIGFuIFVuZG8nLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZVRoaW5nKDI1MCwgMCwgJ1BhcnQgMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIgPSBtYXAuY3JlYXRlVGhpbmcoNTAwLCAwLCAnUGFydCAyJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MSwgcGFydDIsICdSdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhcnQyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFJUQkIgaW50byBmcmVlaGFuZCBTJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyB0aGUgcHJlc2VsZWN0ZWQgUlRCQiBpbnRvIFdob2xlIChTKSBhbmQgZXhhbWluZSBsYXlvdXQnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBvbGRQYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ09sZCBQYXJ0IDEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVUaGluZygyNTAsIDMwLCAnUGFydCAxJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVUaGluZyg1MDAsIDcwLCAnUGFydCAyJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MSwgcGFydDIsICdSdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhcnQyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgUlRCQiBpbiBvdXRsaW5lIGFuZCBzd2l0Y2ggdG8gZnJlZWhhbmQnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdDaGVjayBhdXRvLWdlbmVyYXRlZCBmcmVlaGFuZCBsYXlvdXQgb2YgcGFydHMnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAxJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEsIHBhcnQyLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICB3aG9sZS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLnNldFNlbGVjdGVkVGhpbmdzTGF5b3V0KCdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgLy9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh3aG9sZS5kYXRhLCAnbGF5b3V0JywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICAvL21hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyBjcmVhdGUgUlRCQiBpbiBmcmVlaGFuZCwgYWRkIHBhcnQgaW4gb3V0bGluZSwgc3dpdGNoIGJhY2sgdG8gZnJlZWhhbmRcclxuICAgICAgICAvLyBjcmVhdGUgUlRCQiBpbiBmcmVlaGFuZCwgZHJhZyBpbiBwYXJ0IGluIG91dGxpbmUsIHN3aXRjaCBiYWNrIHRvIGZyZWVoYW5kXHJcblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgUlRCQiBvdXQgb2YgUycsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgdGhlIHByZXNlbGVjdGVkIFJUQkIgb250byBXaG9sZSAoRCknLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAxJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEsIHBhcnQyLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgcGFydDEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0Mi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyBSVEJCIG91dCBvZiBmcmVlaGFuZCBTJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyB0aGUgcHJlc2VsZWN0ZWQgUlRCQiBvbnRvIFdob2xlIChEKScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAxJywgMTAsIDEyMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMicsIDExMCwgMTUwKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxLCBwYXJ0MiwgJ1J0aGluZycpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHBhcnQxLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcGFydDIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgUlRCQiBvdXQgb2YgMm5kIGxldmVsIFMnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIHRoZSBwcmVzZWxlY3RlZCBSVEJCIG9udG8gV2hvbGUgKEQpIG9mIFBhcnQgMScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMiA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4yJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhzdWJwYXJ0MTEsIHN1YnBhcnQxMiwgJ1J0aGluZycpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAyJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgc3VicGFydDExLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc3VicGFydDEyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFJUQkIgb3V0IG9mIDJuZCBsZXZlbCBmcmVlaGFuZCBTJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyB0aGUgcHJlc2VsZWN0ZWQgUlRCQiBvbnRvIFdob2xlIChEKSBvZiBQYXJ0IDEnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMScsIDAsIDEyMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnLCAxMCwgMTgwKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTIgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMicsIDIwLCAyMjApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoc3VicGFydDExLCBzdWJwYXJ0MTIsICdSdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMicsIDAsIDMwMCk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgc3VicGFydDExLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc3VicGFydDEyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdSY2hhbm5lbCcsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ05vdGUgdGhhdCBSLXRoaW5ncyBhcmUgaW4gcGFydC13aG9sZSByZWxhdGlvbicsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUgMScsICdyaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnUGFydCAxLjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAwLCAnV2hvbGUgMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMjEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAnUGFydCAyLjEnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzEgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAnUnRoaW5nIDEtMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzExID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDExLCBjaGlsZDIxLCAnUnRoaW5nIDEuMSAtIDIuMScpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JjaGFubmVsLCByVGhpbmcxMTogJyArIHJUaGluZzExKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICByVGhpbmcxMS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIG1hcC5hZGRTZWxlY3RlZFRoaW5nc0FzQ2hpbGRyZW5PZihyVGhpbmcxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRGlzYXBwZWFyaW5nIHBhcnRzIG9uIG5ldyBpZGVhIGNyZWF0aW9uJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnQ3JlYXRlIGEgbmV3IHRvcC1sZXZlbCBpZGVhIC0gUGFydCAxLjEgc2hvdWxkIG5vdCBkaXNhcHBlYXIgdGVtcG9yYXJpbHknLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlIDEnLCAncmlnaHQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ1BhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgdG9wLWxldmVsIHRoaW5nIGludG8gZnJlZWhhbmQgc3lzdGVtJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBOZXcgUGFydCBpbnRvIFdob2xlOyBleGFtaW5lIHJlc3VsdGluZyBwYXJ0IGxheW91dCcsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ1BhcnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdQYXJ0ID0gbWFwLmNyZWF0ZVRoaW5nKDI1MCwgMCwgJ05ldyBQYXJ0JywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyB0b3AtbGV2ZWwgUlRCQiBpbnRvIGZyZWVoYW5kIHN5c3RlbScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgcHJlc2VsZWN0ZWQgUlRCQiBpbnRvIFdob2xlOyBleGFtaW5lIHJlc3VsdGluZyBwYXJ0IGxheW91dCcsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ1BhcnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBiYXIgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAwLCAnQmFyJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBiZWxsID0gbWFwLmNyZWF0ZVRoaW5nKDUwMCwgMCwgJ0JlbGwnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoYmFyLCBiZWxsLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYmFyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYmVsbC5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyBSLXRoaW5nIHNxdWFyZSBpbnRvIGZyZWVoYW5kIHN5c3RlbScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgcHJlc2VsZWN0ZWQgc3F1YXJlIGludG8gV2hvbGU7IGV4YW1pbmUgcmVzdWx0aW5nIHBhcnQgbGF5b3V0JyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoLTEwMCwgNTAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDExID0gbWFwLmNyZWF0ZVRoaW5nKDI1MCwgMCwgJ1BhcnQxMScsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEyID0gbWFwLmNyZWF0ZVRoaW5nKDUwMCwgMCwgJ1BhcnQxMicsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIxID0gbWFwLmNyZWF0ZVRoaW5nKDI1MCwgMjUwLCAnUGFydDIxJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MjIgPSBtYXAuY3JlYXRlVGhpbmcoNTAwLCAyNTAsICdQYXJ0MjInLCAnbGVmdCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMV8xMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDExLCBwYXJ0MTIsICdSdGhpbmcgMTEtMTInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMV8yMSA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDExLCBwYXJ0MjEsICdSdGhpbmcgMTEtMjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMl8yMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEyLCBwYXJ0MjIsICdSdGhpbmcgMTItMjInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcyMV8yMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDIxLCBwYXJ0MjIsICdSdGhpbmcgMjEtMjInKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MTEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MTIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MjEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MjIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgUi10aGluZyBzcXVhcmUgb3V0IG9mIGZyZWVoYW5kIHN5c3RlbScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgcHJlc2VsZWN0ZWQgc3F1YXJlIG9udG8gRCBvZiBXaG9sZTsgZXhhbWluZSByZXN1bHRpbmcgbGF5b3V0JyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoLTEwMCwgNTAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydDExJywgMTAsIDE5MCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydDEyJywgMTIwLCAxOTApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyMSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQyMScsIDEwLCAzMDApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyMiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQyMicsIDEyMCwgMzAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nMTFfMTIgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxMSwgcGFydDEyLCAnUnRoaW5nIDExLTEyJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nMTFfMjEgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxMSwgcGFydDIxLCAnUnRoaW5nIDExLTIxJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nMTJfMjIgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxMiwgcGFydDIyLCAnUnRoaW5nIDEyLTIyJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nMjFfMjIgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQyMSwgcGFydDIyLCAnUnRoaW5nIDIxLTIyJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgcGFydDExLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcGFydDEyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcGFydDIxLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcGFydDIyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIDJuZCBsZXZlbCBwYXJ0IHRvIEQgb2YgcGFyZW50JyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBTdWJwYXJ0IDEuMSBvbnRvIEQgb2YgUGFydCAxOyBpdCBzaG91bGQgYXBwZWFyIGJlbG93IFBhcnQgMScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAyJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdJbnZpc2libGUgUi10aGluZyBpbiAybmQgbGV2ZWwgb2Ygb3V0bGluZScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ1ItdGhpbmcgYmV0d2VlbiBTdWJwYXJ0cyAxLjEgYW5kIDEuMiBzaG91bGQgYmUgdmlzaWJsZScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMiA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4yJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhzdWJwYXJ0MTEsIHN1YnBhcnQxMiwgJ1J0aGluZycpO1xyXG4gICAgICAgICAgICAgICAgclRoaW5nLmRlc2lyZWRTaXplID0gbmV3IGdvLlNpemUoMzAsMzApO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyVGhpbmcgYWN0dWFsQm91bmRzOiAnICsgclRoaW5nLmFjdHVhbEJvdW5kcyArICcsIHNjYWxlOiAnICsgclRoaW5nLnNjYWxlICsgJywgZGVzaXJlZFNpemU6ICcgKyByVGhpbmcuZGVzaXJlZFNpemUpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1dob2xlIGRlc2lyZWRTaXplOiAnICsgd2hvbGUuZGVzaXJlZFNpemUpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdSLXRoaW5nIGJldHdlZW4gaWRlYXMgaW4gc2FtZSBsb2NhdGlvbiAoZXJyb3IpJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnVGhpcyBzaG91bGQgdHJpZ2dlciBhbiBlcnJvcicsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgLy8gdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1BhcnQgMScsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdQYXJ0IDInLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxLCBwYXJ0MiwgJ1J0aGluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICAvLyB9IGNhdGNoKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBhbGVydChlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyB7XHJcbiAgICAgICAgLy8gICAgIG5hbWU6ICdGaXggYmFkIFItdGhpbmcgbGVhZGluZyB0byBpbmZpbml0ZSBsb29wJyxcclxuICAgICAgICAvLyAgICAgaW5zdHJ1Y3Rpb25zOiAnTWFwIHNob3VsZCBkaXNwbGF5IGFuZCBub3QgdHJpZ2dlciBpbmZpbml0ZSBsb29wOyBtb2RlbCBzaG91bGQgYmUgZml4ZWQgc28gdGhhdCByLXRoaW5nIGlzIG5vdCBQYXJ0IDEuMSBvciBQYXJ0IDEuMicsXHJcbiAgICAgICAgLy8gICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgIC8vICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCAwLCAnVGhpbmcxJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgLy8gICAgICAgICB2YXIgY2hpbGQxMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdQYXJ0IDEuMScpO1xyXG4gICAgICAgIC8vICAgICAgICAgdmFyIGNoaWxkMTIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnUGFydCAxLjInKTtcclxuICAgICAgICAvLyAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMTEsIGNoaWxkMTIsICdSdGhpbmcnKTtcclxuICAgICAgICAvLyAgICAgICAgIHZhciByTGluayA9IHJUaGluZy5sYWJlbGVkTGluaztcclxuICAgICAgICAvLyAgICAgICAgIHJMaW5rLmRhdGEubGFiZWxLZXlzID0gW2NoaWxkMTEuZGF0YS5rZXldO1xyXG4gICAgICAgIC8vICAgICAgICAgbWFwLmNoZWNrTW9kZWwoKTtcclxuICAgICAgICAvLyAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgdG8gY3JlYXRlIFItbGluZScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgZnJvbSB0aGUgUi1jb3JuZXIgb2YgVGhpbmcxIHRvIFRoaW5nMjsgdGVtcG9yYXJ5IGRyYWcgbGluZSBhbmQgc3F1YXJlIHNob3VsZCBiZSBSLWNvbG9yOyBjcmVhdGVkIGxpbmUgc2hvdWxkIGJlIGFuIFItbGluZScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCAwLCAnVGhpbmcxJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKDEwMCwgMCwgJ1RoaW5nMicsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIHRvIGNyZWF0ZSBQLWxpbmUnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIGZyb20gdGhlIFAtY29ybmVyIG9mIFRoaW5nMSB0byBUaGluZzI7IHRlbXBvcmFyeSBkcmFnIGxpbmUgYW5kIHNxdWFyZSBzaG91bGQgYmUgUC1jb2xvcjsgY3JlYXRlZCBsaW5lIHNob3VsZCBiZSBhIFAtbGluZScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCAwLCAnVGhpbmcxJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKDEwMCwgMCwgJ1RoaW5nMicsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdSZWxpbmsgZnJvbS1wb3J0IG9mIFItbGluZScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ01vdmUgdGhlIHN0YXJ0IG9mIHRoZSBSLWxpbmsgZnJvbSBUaGluZyAxIHRvIFRoaW5nIDM7IG1ha2Ugc3VyZSBpdCBkb2VzIG5vdCB0dXJuIGludG8gYSBQLWxpbmsnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoLTEwMCwgMCwgJ1RoaW5nMScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZygzMDAsIDAsICdUaGluZzInLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzMgPSBtYXAuY3JlYXRlVGhpbmcoMTAwLCAyMDAsICdUaGluZzMnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBybGluayA9IG1hcC5jcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ1JlbGluayB0by1wb3J0IG9mIFItbGluZScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ01vdmUgdGhlIGVuZCBvZiB0aGUgUi1saW5rIGZyb20gVGhpbmcgMiB0byBUaGluZyAzOyBtYWtlIHN1cmUgaXQgZG9lcyBub3QgdHVybiBpbnRvIGEgUC1saW5rJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKC0xMDAsIDAsICdUaGluZzEnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoMzAwLCAwLCAnVGhpbmcyJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmczID0gbWFwLmNyZWF0ZVRoaW5nKDEwMCwgMjAwLCAnVGhpbmczJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmxpbmsgPSBtYXAuY3JlYXRlUkxpbmsodGhpbmcxLCB0aGluZzIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdTaG93aW5nIHBhcnRzIG9mIHBhcnRzIG9mIGEgZnJlZWhhbmQgd2hvbGUnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdXaG9sZSwgUGFydCAxIGFuZCBTdWJwYXJ0IDEuMSBzaG91bGQgYWxsIGJlIHZpc2libGUnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdXSEFUX0lTJywgbWFwLmdldEdlbmVyYXRvcigpLldIQVRfSVMpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUEFSVFNfT0YnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUEFSVFNfT0YpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUEFSVF9PRicsIG1hcC5nZXRHZW5lcmF0b3IoKS5QQVJUX09GKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1BBUlRTX0hBVkVfUEFSVFMnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUEFSVFNfSEFWRV9QQVJUUyksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdQT0lOVF9GT1InLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUE9JTlRfRk9SKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ0hBU19NVUxUSVBMRV9QUycsIG1hcC5nZXRHZW5lcmF0b3IoKS5IQVNfTVVMVElQTEVfUFMpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUl9UTycsIG1hcC5nZXRHZW5lcmF0b3IoKS5SX1RPKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1JfRVhJU1RTJywgbWFwLmdldEdlbmVyYXRvcigpLlJfRVhJU1RTKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1dIQVRfSVNfUicsIG1hcC5nZXRHZW5lcmF0b3IoKS5XSEFUX0lTX1IpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnRElTVElOR1VJU0hfQkVUV0VFTicsIG1hcC5nZXRHZW5lcmF0b3IoKS5ESVNUSU5HVUlTSF9CRVRXRUVOKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ0lTX1JfQkVUV0VFTicsIG1hcC5nZXRHZW5lcmF0b3IoKS5JU19SX0JFVFdFRU4pLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnQ0FOX0JFX1AnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuQ0FOX0JFX1ApLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnTVVMVElQTEVfUFNfQVJFJywgbWFwLmdldEdlbmVyYXRvcigpLk1VTFRJUExFX1BTX0FSRSksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdQX1BBUlRTJywgbWFwLmdldEdlbmVyYXRvcigpLlBfUEFSVFMpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnQ09NUEFSRV9DT05UUkFTVCcsIG1hcC5nZXRHZW5lcmF0b3IoKS5DT01QQVJFX0NPTlRSQVNUKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1JfUEFSVFMnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUl9QQVJUUyksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdQQVJUU19IQVZFX1JTJywgbWFwLmdldEdlbmVyYXRvcigpLlBBUlRTX0hBVkVfUlMpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUEFSVF9SU19FWElTVCcsIG1hcC5nZXRHZW5lcmF0b3IoKS5QQVJUX1JTX0VYSVNUKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1BBUlRfUlNfQVJFJywgbWFwLmdldEdlbmVyYXRvcigpLlBBUlRfUlNfQVJFKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1dIQVRfQUJPVVQnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuV0hBVF9BQk9VVClcclxuXHJcblxyXG4vLyBjb21wdXRlUGFydHNCb3VuZHNcclxuXHJcbi8vIGNyZWF0ZVJUaGluZ1xyXG4vLyBhZGRTZWxlY3RlZFRoaW5nc0FzQ2hpbGRyZW5PZlxyXG4vLyBhZGRTZWxlY3RlZFRoaW5nQXNPcmRlcmVkU2lzdGVyT2ZcclxuLy8gYWRkU2VsZWN0ZWRUaGluZ3NBc1Npc3RlcnNPZlxyXG4vLyBhZGRUaGluZ0FzUlRoaW5nXHJcbi8vIHRvZ2dsZURGbGFnXHJcbi8vIHRvZ2dsZVNFeHBhbnNpb25cclxuLy8gdG9nZ2xlUEV4cGFuc2lvblxyXG5cclxuLy8gcHJlc2VudGVyOiBzZWxlY3QgZmlyc3Qgc2xpZGUgYW5kIGhpdCBwbGF5OyBtYWtlIHN1cmUgZmlyc3Qgc2xpZGUgbm90ZXMgYXBwZWFyXHJcblxyXG5cclxuXHJcbiAgICBdO1xyXG4gICAgXHJcbn07XHJcblxyXG5cclxuIiwiU2FuZGJhbmtFZGl0b3IuVUkgPSBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0LCAkaHR0cCwgJHJlc291cmNlLCAkbW9kYWwsICRsb2csIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSB0YWIgKFwic2xpZGVyXCIpIElEcyAtIHRhYnMgYXJlIHJlbmRlcmVkIGluIHZpZXdzL21hcHMvX2Zvcm0gLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vdGhpcy5UQUJfSURfSElTVE9SWSA9ICdoaXN0b3J5LXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9QUkVTRU5URVIgPSAncHJlc2VudGVyLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9BTkFMWVRJQ1NfTUFQID0gJ2FuYWx5dGljcy10YWItbWFwJztcclxuICAgIHRoaXMuVEFCX0lEX0FOQUxZVElDU19USElORyA9ICdhbmFseXRpY3MtdGFiLXRoaW5nJztcclxuICAgIHRoaXMuVEFCX0lEX1BFUlNQRUNUSVZFUyA9ICdwZXJzcGVjdGl2ZXMtdGFiJztcclxuICAgIHRoaXMuVEFCX0lEX0RJU1RJTkNUSU9OUyA9ICdkaXN0aW5jdGlvbnMtdGFiJztcclxuICAgIHRoaXMuVEFCX0lEX0FUVEFDSE1FTlRTID0gJ2F0dGFjaG1lbnRzLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9HRU5FUkFUT1IgPSAnZ2VuZXJhdG9yLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9TVEFOREFSRFMgPSAnc3RhbmRhcmRzLXRhYic7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7fTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZWRpdG9yIG9wdGlvbnMgZm9yIG1hcC91c2VyIC0tLS0tLS0tLS1cclxuXHJcbiAgICB2YXIgbWFwRWRpdG9yT3B0aW9ucyA9IHt9O1xyXG5cclxuICAgIHZhciBkZWZhdWx0RWRpdG9yT3B0aW9ucyA9IHtcclxuICAgICAgICAvLyBub0Fycm93cywgdG8sIGZyb20sIHRvRnJvbVxyXG4gICAgICAgIGRlZmF1bHRSZWxhdGlvbnNoaXBEaXJlY3Rpb246ICdub0Fycm93cycsXHJcbiAgICAgICAgLy8gbGVmdCwgcmlnaHQsIHN0YWNrZWQsIGZyZWVoYW5kXHJcbiAgICAgICAgZGVmYXVsdFRoaW5nTGF5b3V0OiAnbGVmdCcsXHJcbiAgICAgICAgLy8gbGluZXMsIHNwb3RsaWdodCwgYm90aFxyXG4gICAgICAgIHBlcnNwZWN0aXZlTW9kZTogJ2xpbmVzJ1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBtYXAgaXMgbG9hZGVkIHRvIHNldCBzdG9yZWQgb3B0aW9ucyBmb3IgbWFwXHJcbiAgICB0aGlzLnNldE1hcEVkaXRvck9wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgbWFwRWRpdG9yT3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgYXBwcm9wcmlhdGUgdmFsdWVzIGZyb20gdGhlIHVzZXIgcHJvZmlsZSBvciB0aGUgZGVmYXVsdCBvcHRpb25zIGlmIG9wdGlvbnMgYXJlIG5vdCBzZXQgZm9yIHRoZSBtYXBcclxuICAgIHRoaXMuZ2V0TWFwRWRpdG9yT3B0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBwcm9maWxlT3B0aW9ucyA9ICgkc2NvcGUudXNlclByb2ZpbGUgPyAkc2NvcGUudXNlclByb2ZpbGUuZWRpdG9yT3B0aW9ucyA6IG51bGwpO1xyXG4gICAgICAgIHZhciB2YWxzID0gW21hcEVkaXRvck9wdGlvbnMsIHByb2ZpbGVPcHRpb25zLCBkZWZhdWx0RWRpdG9yT3B0aW9uc107XHJcbiAgICAgICAgbWFwRWRpdG9yT3B0aW9ucyA9IF8uZmluZCh2YWxzLCBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuICFfLmlzRW1wdHkodmFsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbWFwRWRpdG9yT3B0aW9ucztcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2F2ZXMgZGVmYXVsdCBvcHRpb25zIGZvciB0aGUgdXNlciAobWFwIG9wdGlvbnMgYXJlIHNhdmVkIGluIGF1dG9zYXZlLmpzKVxyXG4gICAgZnVuY3Rpb24gc2F2ZVVzZXJFZGl0b3JPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yX29wdGlvbnM6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAkaHR0cC5wdXQoJy91c2Vycy8nICsgJHNjb3BlLnVzZXJJZCArICcuanNvbicsIGRhdGEpLnRoZW4oXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgZWRpdG9yIG9wdGlvbnMnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBvcHRpb25zIG1vZGFsXHJcblxyXG4gICAgJHNjb3BlLmVkaXRvck9wdGlvbnMgPSBuZXcgU2FuZGJhbmtFZGl0b3JPcHRpb25zKCRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgJG1vZGFsLCAkbG9nKTtcclxuXHJcbiAgICB0aGlzLmVkaXRPcHRpb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLmVkaXRvck9wdGlvbnMub3Blbk1vZGFsKFxyXG4gICAgICAgICAgICBtYXBFZGl0b3JPcHRpb25zLFxyXG4gICAgICAgICAgICBmdW5jdGlvbihvcHRpb25zKSB7IC8vIG9uU2F2ZURlZmF1bHRzXHJcbiAgICAgICAgICAgICAgICBzYXZlVXNlckVkaXRvck9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKG9wdGlvbnMpIHsgLy8gb25VcGRhdGVcclxuICAgICAgICAgICAgICAgIG1hcEVkaXRvck9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldEF1dG9zYXZlKCkuc2F2ZU5vdygnZWRpdF9vcHRpb25zJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHN0YXRlIG1vZGVsIC0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLnN0YXRlID0ge307XHJcblxyXG4gICAgdmFyIGRlZmF1bHRTdGF0ZSA9IHtcclxuICAgICAgICBzaG93TmF2aWdhdG9yOiBmYWxzZSxcclxuICAgICAgICBjdXJyZW50VGFiOiBudWxsLFxyXG4gICAgICAgIHBlcnNwZWN0aXZlUG9pbnRLZXk6IG51bGwsXHJcbiAgICAgICAgZGlzdGluY3Rpb25UaGluZ0tleTogbnVsbFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNldFN0YXRlRGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzZWxmLnN0YXRlID0gZGF0YSB8fCBkZWZhdWx0U3RhdGU7XHJcbiAgICAgICAgICAgIC8vJHNjb3BlLmN1cnJlbnRUYWIgPSBzZWxmLnN0YXRlLmN1cnJlbnRUYWI7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFRPRE86IFNhdmUgc3RhdGUgbW9yZSBmcmVxdWVudGx5Pz8gQ3VycmVudGx5IGl0IGlzIG9ubHkgc2F2ZWQgd2hlbiBhdXRvc2F2ZSBpcyB0cmlnZ2VyZWQgYnkgb3RoZXIgYWN0aW9ucy4uLlxyXG5cclxuICAgIHRoaXMuZ2V0U3RhdGVEYXRhID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuc3RhdGU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIHRlbXBvcmFyeSBzdGF0ZSBmbGFncyAtLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLnpvb21pbmdUb1JlZ2lvbiA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMubW91c2VPdmVyR3JvdXAgPSBudWxsO1xyXG4gICAgdGhpcy5tb3VzZU92ZXJMaW5rID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmRyYWdUYXJnZXRHcm91cCA9IG51bGw7XHJcbiAgICB0aGlzLmRyYWdUYXJnZXRQb3NpdGlvbiA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5oZWxwVGlwID0gbnVsbDtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSBoYW5kbGUgYm90dG9tIHRhYnMgKFwic2xpZGVyc1wiKSAtLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gaW4gdGhlIGZvbGxvd2luZyBmdW5jdGlvbnMsIElEIGlzIGUuZy4gJ2hpc3RvcnktdGFiJyAoSUQgb2Ygb25lIG9mIHRoZSAuYm90dG9tLXRhYidzKVxyXG5cclxuICAgIC8vIHRoaXMgaXMgY2FsbGVkIGJ5IG1hcC5jdXJyZW50VGFiQ2hhbmdlZCwgd2hpY2ggaXMgdHJpZ2dlcmVkIGJ5IGEgJHNjb3BlLiR3YXRjaFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3VpLCBjdXJyZW50VGFiQ2hhbmdlZDogJyArIG5ld1ZhbHVlKTtcclxuICAgICAgICBzZWxmLnN0YXRlLmN1cnJlbnRUYWIgPSBuZXdWYWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jdXJyZW50VGFiSXMgPSBmdW5jdGlvbih0YWJJRCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUuY3VycmVudFRhYiA9PSB0YWJJRDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5vcGVuVGFiID0gZnVuY3Rpb24odGFiSUQpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudFRhYiA9IHRhYklEO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNsb3NlVGFiID0gZnVuY3Rpb24odGFiSUQpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzZWxmLnN0YXRlLmN1cnJlbnRUYWIgPSBudWxsOyAvLyBUT0RPOiB0cmlnZ2VyIGF1dG9zYXZlXHJcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50VGFiID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kaXNhYmxlVGFiID0gZnVuY3Rpb24odGFiSUQpIHtcclxuICAgICAgICAvLyBwcmV2ZW50IG9wZW5pbmcgb3RoZXIgdGFicyB3aGVuIGluIFAgb3IgRCBlZGl0b3JcclxuICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRUYWIgPT0gc2VsZi5UQUJfSURfUEVSU1BFQ1RJVkVTIHx8ICRzY29wZS5jdXJyZW50VGFiID09IHNlbGYuVEFCX0lEX0RJU1RJTkNUSU9OUykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZVRhYiA9IGZ1bmN0aW9uKHRhYklEKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5jdXJyZW50VGFiID09IHRhYklEKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudFRhYiA9IG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXNlbGYuZGlzYWJsZVRhYih0YWJJRCkpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50VGFiID0gdGFiSUQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50b2dnbGVOYXZpZ2F0b3IgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzZWxmLnN0YXRlLnNob3dOYXZpZ2F0b3IgPSAhc2VsZi5zdGF0ZS5zaG93TmF2aWdhdG9yO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZVpvb21pbmdUb1JlZ2lvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNlbGYuem9vbWluZ1RvUmVnaW9uID0gIXNlbGYuem9vbWluZ1RvUmVnaW9uO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0gem9vbWluZyBmdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuY2FuWm9vbUluID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5nZXREaWFncmFtKCkuc2NhbGUgPCAzMjtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jYW5ab29tT3V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5nZXREaWFncmFtKCkuc2NhbGUgPiAwLjI1O1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnpvb21JbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoZGlhZ3JhbS5zY2FsZSA8IDMyKSB7XHJcbiAgICAgICAgICAgIHZhciB2YiA9IGRpYWdyYW0udmlld3BvcnRCb3VuZHMuY29weSgpO1xyXG4gICAgICAgICAgICBkaWFncmFtLnNjYWxlID0gZGlhZ3JhbS5zY2FsZSAqIDI7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY2VudGVyUmVjdCh2Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnpvb21PdXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgaWYgKGRpYWdyYW0uc2NhbGUgPiAwLjI1KSB7XHJcbiAgICAgICAgICAgIHZhciB2YiA9IGRpYWdyYW0udmlld3BvcnRCb3VuZHMuY29weSgpO1xyXG4gICAgICAgICAgICBkaWFncmFtLnNjYWxlID0gZGlhZ3JhbS5zY2FsZSAvIDI7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY2VudGVyUmVjdCh2Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm1heWJlWm9vbVRvUmVnaW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIC8vIHRoaXMgZmxhZyBpcyBzZXQgYnkgdGhlIHRvb2xiYXIgYnV0dG9uXHJcbiAgICAgICAgaWYgKHNlbGYuem9vbWluZ1RvUmVnaW9uKSB7XHJcbiAgICAgICAgICAgIHNlbGYuem9vbWluZ1RvUmVnaW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd6b29tVG9SZWdpb24sIHNlbGVjdGlvbiBjb3VudDogJyArIGRpYWdyYW0uc2VsZWN0aW9uLmNvdW50KTtcclxuICAgICAgICAgICAgdmFyIHJlY3QgPSBkaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhkaWFncmFtLnNlbGVjdGlvbik7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uem9vbVRvUmVjdChyZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJlc2V0Wm9vbSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAvL3ZhciByZWN0ID0gZGlhZ3JhbS5jb21wdXRlUGFydHNCb3VuZHMoZGlhZ3JhbS5ub2RlcykuY29weSgpO1xyXG4gICAgICAgIHZhciByZWN0ID0gbWFwLnNhZmVSZWN0KG1hcC5jb21wdXRlTWFwQm91bmRzKCkpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3Jlc2V0Wm9vbSwgYm91bmRzOiAnICsgcmVjdCk7XHJcbiAgICAgICAgaWYgKHJlY3Qud2lkdGgpIHtcclxuICAgICAgICAgICAgcmVjdC5pbmZsYXRlKHJlY3Qud2lkdGggLyA1LCByZWN0LmhlaWdodCAvIDUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkaWFncmFtLnpvb21Ub1JlY3QocmVjdCk7XHJcbiAgICAgICAgZGlhZ3JhbS5hbGlnbkRvY3VtZW50KGdvLlNwb3QuQ2VudGVyLCBnby5TcG90LkNlbnRlcik7XHJcbiAgICAgICAgaWYgKGRpYWdyYW0uc2NhbGUgPiAxKSB7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSAxO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHRoaW5nIG9wdGlvbnMgKGxheW91dCkgLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuZ2V0U2VsZWN0ZWRUaGluZ3NPckRlZmF1bHRMYXlvdXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc2wgPSBzZWxmLmdldFNlbGVjdGVkVGhpbmdzTGF5b3V0KCk7XHJcbiAgICAgICAgaWYgKHNsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFwRWRpdG9yT3B0aW9ucy5kZWZhdWx0VGhpbmdMYXlvdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIGEgbm9uLW51bGwgdmFsdWUgb25seSBpZiBhbGwgc2VsZWN0ZWQgaXRlbXMgYXJlIGdyb3VwcyB3aXRoIHRoZSBzYW1lIGxheW91dFxyXG4gICAgdGhpcy5nZXRTZWxlY3RlZFRoaW5nc0xheW91dCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoZGlhZ3JhbSA9PT0gbnVsbCB8fCBkaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICB2YXIgbGF5b3V0ID0gbnVsbDtcclxuICAgICAgICB2YXIgaXQgPSBkaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cClcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQsIGl0LnZhbHVlOiAnICsgZ3JvdXApO1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXBMYXlvdXQgPSAoZ3JvdXAuZGF0YSA/IGdyb3VwLmRhdGEubGF5b3V0IDogbnVsbCk7XHJcbiAgICAgICAgICAgIGlmIChsYXlvdXQgIT09IG51bGwgJiYgZ3JvdXBMYXlvdXQgIT0gbGF5b3V0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIGxheW91dCA9IGdyb3VwTGF5b3V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTZWxlY3RlZFRoaW5nc0xheW91dDogJyArIGxheW91dCk7XHJcblxyXG4gICAgICAgIHJldHVybiBsYXlvdXQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNldHMgdGhlIGxheW91dCBvZiBhbGwgc2VsZWN0ZWQgdGhpbmdzIHRvIHRoZSBnaXZlbiBsYXlvdXRcclxuICAgIHRoaXMuc2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQgPSBmdW5jdGlvbihsYXlvdXROYW1lKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHZhciBpdCA9IGRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ2xheW91dCcsIGxheW91dE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldExheW91dHMoKS5zZXREZXNjZW5kYW50TGF5b3V0cyhncm91cCwgZ3JvdXAuZGF0YS5sYXlvdXQpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHJlbGF0aW9uc2hpcCBvcHRpb25zIChkaXJlY3Rpb24pIC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmdldFNlbGVjdGVkUmVsYXRpb25zaGlwc09yRGVmYXVsdERpcmVjdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBzZCA9IHNlbGYuZ2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzRGlyZWN0aW9uKCk7XHJcbiAgICAgICAgaWYgKHNkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFwRWRpdG9yT3B0aW9ucy5kZWZhdWx0UmVsYXRpb25zaGlwRGlyZWN0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyBhIG5vbi1udWxsIHZhbHVlIG9ubHkgaWYgYWxsIHNlbGVjdGVkIGl0ZW1zIGFyZSByZWxhdGlvbnNoaXBzIHdpdGggdGhlIHNhbWUgZGlyZWN0aW9uXHJcbiAgICB0aGlzLmdldFNlbGVjdGVkUmVsYXRpb25zaGlwc0RpcmVjdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoZGlhZ3JhbSA9PT0gbnVsbCB8fCBkaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICB2YXIgdHlwZSA9IG51bGw7XHJcbiAgICAgICAgdmFyIGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIWl0LnZhbHVlIGluc3RhbmNlb2YgZ28uTGluaylcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgbGlua1R5cGUgPSAobGluay5kYXRhID8gbGluay5kYXRhLnR5cGUgOiBudWxsKTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgIT09IG51bGwgJiYgbGlua1R5cGUgIT0gdHlwZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB0eXBlID0gbGlua1R5cGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHlwZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0cyB0aGUgZGlyZWN0aW9uIG9mIGFsbCBzZWxlY3RlZCByZWxhdGlvbnNoaXBzIHRvIHRoZSBnaXZlbiBkaXJlY3Rpb25cclxuICAgIHRoaXMuc2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzRGlyZWN0aW9uID0gZnVuY3Rpb24oZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIC8vZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY2hhbmdlIHJlbGF0aW9uc2hpcCBkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgdmFyIGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5MaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAvL2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHR5cGVcIik7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShpdC52YWx1ZS5kYXRhLCAndHlwZScsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAvL2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayB0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSByZWxhdGlvbnNoaXAgZGlyZWN0aW9uXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tIGhhbmRsZSBjb3JuZXIgY2xpY2tzIGFuZCBkb3VibGUgY2xpY2tzIC0tLS0tLS0tXHJcblxyXG4gICAgdmFyIF9jb3JuZXJDbGlja2VkID0gbnVsbDtcclxuICAgIHZhciBfY29ybmVyRnVuY3Rpb24gPSBudWxsO1xyXG4gICAgdmFyIF9jb3JuZXJUaW1lb3V0ID0gMzAwO1xyXG5cclxuICAgIHRoaXMuaGFuZGxlQ29ybmVyQ2xpY2sgPSBmdW5jdGlvbihjb3JuZXIsIHRoaW5nKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaGFuZGxlQ29ybmVyQ2xpY2s6IGNvcm5lciA9ICcgKyBjb3JuZXIgKyAnLCBjb3JuZXJDbGlja2VkID0gJyArIF9jb3JuZXJDbGlja2VkKTtcclxuICAgICAgICAvLyBhc3N1bWUgaXQncyBhIHNpbmdsZSBjbGljaywgYW5kIHNldCBoYW5kbGVyXHJcbiAgICAgICAgX2Nvcm5lckZ1bmN0aW9uID0gZ2V0Q29ybmVyRnVuY3Rpb24oY29ybmVyLCAxKTtcclxuICAgICAgICAvLyBhbHJlYWR5IGNsaWNrZWQsIHNvIGl0J3MgYSBkb3VibGUgY2xpY2s7IGNoYW5nZSBoYW5kbGVyXHJcbiAgICAgICAgaWYgKF9jb3JuZXJDbGlja2VkID09IGNvcm5lcikge1xyXG4gICAgICAgICAgICBfY29ybmVyRnVuY3Rpb24gPSBnZXRDb3JuZXJGdW5jdGlvbihjb3JuZXIsIDIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaGFuZGxlQ29ybmVyQ2xpY2s6IGRvdWJsZSBjbGljayBvbiAnICsgY29ybmVyKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZW1lbWJlciB0aGF0IGF0IGxlYXN0IG9uZSBjbGljayBoYXMgaGFwcGVuZWQgZm9yIHRoZSBjdXJyZW50IGNvcm5lclxyXG4gICAgICAgIF9jb3JuZXJDbGlja2VkID0gY29ybmVyO1xyXG5cclxuICAgICAgICAvLyBzZXQgdGltZXIgdG8gaW52b2tlIHdoYXRldmVyIGhhbmRsZXIgd2UgaGF2ZSByZWFkeSB0byBnbyAodW5sZXNzIGFub3RoZXIgY2xpY2sgaGFwcGVucyB3aXRoaW4gdGhlIGludGVydmFsKVxyXG4gICAgICAgIHZhciB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIGRpbmchIGludm9rZSBpdFxyXG4gICAgICAgICAgICBpZiAoX2Nvcm5lckZ1bmN0aW9uID09IHNlbGYuc2hvd0Nvcm5lclRpcCkge1xyXG4gICAgICAgICAgICAgICAgX2Nvcm5lckZ1bmN0aW9uKHRoaW5nLCBjb3JuZXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2Nvcm5lckZ1bmN0aW9uKHRoaW5nKTsgLy8gZG9uJ3QgcGFzcyB0aGUgY29ybmVyIGFyZyB0byB0aGluZ3MgbGlrZSBjcmVhdGVDaGlsZCB0aGF0IGhhdmUgYSBkaWZmZXJlbnQgc2Vjb25kIGFyZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IGhhbmRsZXIgYW5kIGNsaWNrZWQgZmxhZ1xyXG4gICAgICAgICAgICBfY29ybmVyRnVuY3Rpb24gPSBnZXRDb3JuZXJGdW5jdGlvbihjb3JuZXIsIDEpO1xyXG4gICAgICAgICAgICBfY29ybmVyQ2xpY2tlZCA9IG51bGw7XHJcbiAgICAgICAgfSwgX2Nvcm5lclRpbWVvdXQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDb3JuZXJGdW5jdGlvbihjb3JuZXIsIGNsaWNrcykge1xyXG4gICAgICAgIGlmIChjb3JuZXIgPT0gXCJEXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IHNlbGYuc2hvd0Nvcm5lclRpcCA6IG1hcC5jcmVhdGVTaXN0ZXIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29ybmVyID09IFwiU1wiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09IDEgPyBtYXAudG9nZ2xlU0V4cGFuc2lvbiA6IG1hcC5jcmVhdGVDaGlsZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3JuZXIgPT0gXCJSXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IHNlbGYuc2hvd0Nvcm5lclRpcCA6IG1hcC5jcmVhdGVSVG9TaXN0ZXIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29ybmVyID09IFwiUFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09IDEgPyBtYXAudG9nZ2xlUEV4cGFuc2lvbiA6IG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5zZXRQRWRpdG9yUG9pbnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29ybmVyID09PSBcIlwiKSB7IC8vIGNsaWNrIG9uIHRleHRcclxuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IHNlbGYuc2hvd0Nvcm5lclRpcCA6IGVkaXRUZXh0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0Q29ybmVyRnVuY3Rpb246IG5vIGZ1bmN0aW9uIGZvdW5kIGZvciBjb3JuZXI6ICcgKyBjb3JuZXIgKyAnIScpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBOQjogaW4gdGhpcyBjYXNlIHRoZSB0aGluZyBpcyBhY3R1YWxseSB0aGUgVGV4dEJveCwgZXhjZXB0IGluIG91dGxpbmUgbGF5b3V0IGl0IGlzIGEgUGFuZWwgaWYgdGhlIGJveCBpcyBkb3VibGUtY2xpY2tlZC4uLlxyXG4gICAgZnVuY3Rpb24gZWRpdFRleHQodGhpbmcsIGNvcm5lcikge1xyXG4gICAgICAgIGlmICghJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnZWRpdFRleHQsIHRoaW5nOiAnICsgdGhpbmcpO1xyXG4gICAgICAgIGlmICh0aGluZyBpbnN0YW5jZW9mIGdvLlBhbmVsKSB7IC8vIG91dGxpbmUgbGF5b3V0XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gdGhpbmcucGFydDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2VkaXRUZXh0LCBwYXJ0OiAnICsgcGFydCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgcGFydC5kYXRhICYmIChwYXJ0LmRhdGEubGF5b3V0ID09ICdsZWZ0JyB8fCBwYXJ0LmRhdGEubGF5b3V0ID09ICdyaWdodCcpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dEJsb2NrTmFtZSA9ICdleHRlcm5hbHRleHQtJyArIHBhcnQuZGF0YS5sYXlvdXQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IHRoaW5nLnBhcnQuZmluZE9iamVjdCh0ZXh0QmxvY2tOYW1lKTtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpbmcgPSB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1hcC5nZXREaWFncmFtKCkuY29tbWFuZEhhbmRsZXIuZWRpdFRleHRCbG9jayh0aGluZyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0gaGVscCB0aXAgZnVuY3Rpb25zIC0gc2VlIGFsc28gdXNlci5qcywgdmlld3MvbWFwcy9oZWxwX3RhYiAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBzaG93cyB0aGluZ1RpcCBvciBvbmUgb2YgdGhlIGNvcm5lclhUaXBzXHJcbiAgICB0aGlzLnNob3dDb3JuZXJUaXAgPSBmdW5jdGlvbih0aGluZywgY29ybmVyKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0Nvcm5lclRpcCcpO1xyXG4gICAgICAgIGlmIChjb3JuZXIgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2hvd0hlbHBUaXAoJ3RoaW5nVGlwJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5zaG93SGVscFRpcCgnY29ybmVyJyArIGNvcm5lciArICdUaXAnKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2hvd0hlbHBUaXAgPSBmdW5jdGlvbih0aXApIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdzaG93SGVscFRpcDogJyArIHRpcCk7XHJcblxyXG4gICAgICAgIC8vIGRvbid0IHNob3cgaGVscCBpZiBpbiBwcmVzZW50ZXJcclxuICAgICAgICBpZiAoc2VsZi5jdXJyZW50VGFiSXMoc2VsZi5UQUJfSURfUFJFU0VOVEVSKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxmLmhlbHBUaXAgPSB0aXA7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgICAgICQoJyNoZWxwLXRpcCcpLnNob3coKTtcclxuXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJCgnI2hlbHAtdGlwJykuZmFkZU91dCg1MDAsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5oZWxwVGlwID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgNTAwMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBlZGl0IG1hcCBVc2VyVGFncyAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUudGFnZ2luZyA9IG5ldyBTYW5kYmFua1RhZ2dpbmcoJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkbW9kYWwsICRsb2cpO1xyXG5cclxuICAgIHRoaXMuZWRpdFVzZXJUYWdzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnRhZ2dpbmcub3Blbk1vZGFsKFxyXG4gICAgICAgICAgICBbJHNjb3BlLm1hcElkXSxcclxuICAgICAgICAgICAgdHJ1ZSwgLy8gc2hvdyBkZXNjcmlwdGlvbiBmaWVsZFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRBdXRvc2F2ZSgpLnNhdmVOb3coJ2VkaXRfdXNlcnRhZ3MnKTtcclxuICAgICAgICAgICAgfSAvLyBvbiB1cGRhdGVcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZWRpdCBtYXAgc2hhcmluZyAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuc2hhcmluZyA9IG5ldyBTYW5kYmFua1NoYXJpbmcoJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkbW9kYWwsICRsb2cpO1xyXG5cclxuICAgIHRoaXMuZWRpdE1hcFNoYXJlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zaGFyaW5nLm9wZW5Nb2RhbChcclxuICAgICAgICAgICAgWyRzY29wZS5tYXBJZF0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge30gLy8gb24gdXBkYXRlXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHByaW50L2V4cG9ydCB0byBpbWFnZSAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLnByaW50U2xpZGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgbWFwLmdldFByZXNlbnRlcigpLmNyZWF0ZVNsaWRlVGh1bWJuYWlscygpO1xyXG4gICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgd2luZG93LnByaW50KCk7XHJcbiAgICAgICAgfSwgNTAwKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIE1JTExJT04gPSAxMDAwICogMTAwMDtcclxuXHJcbiAgICB0aGlzLmV4cG9ydFRvSW1hZ2UgPSBmdW5jdGlvbihmb3JtYXQpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLmltYWdlRXhwb3J0TG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgJCgnI2V4cG9ydC1pbWFnZSBpbWcnKS5yZW1vdmUoKTtcclxuICAgICAgICBtYXAuZ2V0VGVtcGxhdGVzKCkuc2hvd0V4cG9ydEZvb3RlcigpO1xyXG5cclxuICAgICAgICB2YXIgcmVjdCA9IG1hcC5nZXREaWFncmFtKCkuY29tcHV0ZVBhcnRzQm91bmRzKG1hcC5nZXREaWFncmFtKCkubm9kZXMpLmNvcHkoKTtcclxuXHJcbiAgICAgICAgdmFyIGltYWdlTUIgPSByZWN0LndpZHRoICogcmVjdC5oZWlnaHQgKiA0IC8gTUlMTElPTjsgLy8gNCBieXRlcy9waXhlbFxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2ltYWdlTUI6ICcgKyBpbWFnZU1CKTtcclxuXHJcbiAgICAgICAgLy8gbWFrZSB0aGUgbWF4IHNpemUgb2YgdGhlIGltYWdlIDEwTUJcclxuICAgICAgICAvLyBwbmdTaXplID0gaW1hZ2VNQiAqIHNjYWxlICogc2NhbGVcclxuICAgICAgICAvLyBzbyBtYXggc2NhbGUgPSBzcXJ0KHBuZ1NpemUgLyBpbWFnZU1CKVxyXG4gICAgICAgIC8vIFRoZXNlIGNhbGN1bGF0aW9ucyBkb24ndCBzZWVtIHRvIGJlIHJpZ2h0LCBidXQgaW4gcHJhY3RpY2UgdXNpbmcgNTAwIGhlcmVcclxuICAgICAgICAvLyB3ZSBnZXQgYSBzY2FsZSBvZiAyLjQzIGZvciBhbiBpbWFnZSAxOTk4NCB4IDM0MjQgcGl4ZWxzXHJcbiAgICAgICAgLy8gd2hpY2ggcmVzdWx0cyBpbiBhIGZpbGUgc2l6ZSBvZiAxLjg4IE1CIGF0IDMyIGJpdHMvcGl4ZWwuLi5cclxuICAgICAgICAvLyBPUiAyODM4MCB4IDUxOTYgcGl4ZWxzLCBzY2FsZSA9IDMuNDEgPT4gZmlsZSBzaXplID0gMy40OSBNQlxyXG4gICAgICAgIHZhciBzY2FsZSA9IDQ7XHJcbiAgICAgICAgaWYgKGltYWdlTUIpIHtcclxuICAgICAgICAgICAgc2NhbGUgPSBNYXRoLm1pbig0LCBNYXRoLnNxcnQoNTAgLyBpbWFnZU1CKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdpbWFnZSBkaW1lbnNpb25zOiAnICsgcmVjdC53aWR0aCArICcgeCAnICsgcmVjdC5oZWlnaHQgKyAnLCBpbWFnZSBieXRlczogJyArIChyZWN0LndpZHRoICogcmVjdC5oZWlnaHQgKiA0KSArIFxyXG4gICAgICAgIC8vICAgICAgICAnLCBpbWFnZU1COiAnICsgaW1hZ2VNQiArICcsIHNjYWxlOiAnICsgc2NhbGUpO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2hvd0ltYWdlRXhwb3J0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdmFyIHBhcnRzVG9FeHBvcnQgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHBhcnRzVG9FeHBvcnQuYWRkQWxsKG1hcC5nZXREaWFncmFtKCkubm9kZXMpO1xyXG4gICAgICAgIHBhcnRzVG9FeHBvcnQuYWRkQWxsKG1hcC5nZXREaWFncmFtKCkubGlua3MpO1xyXG4gICAgICAgIHBhcnRzVG9FeHBvcnQucmVtb3ZlKG1hcC5nZXRQcmVzZW50ZXIoKS5zbGlkZUJsb2NrZXIpO1xyXG5cclxuICAgICAgICB2YXIgZG9JbWFnZSA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgaW1nID0gbWFwLmdldERpYWdyYW0oKS5tYWtlSW1hZ2Uoe1xyXG4gICAgICAgICAgICAgICAgcGFydHM6IHBhcnRzVG9FeHBvcnQsXHJcbiAgICAgICAgICAgICAgICBtYXhTaXplOiBuZXcgZ28uU2l6ZSgocmVjdC53aWR0aCArIDIwMCkgKiBzY2FsZSwgKHJlY3QuaGVpZ2h0ICsgMjAwKSAqIHNjYWxlKSxcclxuICAgICAgICAgICAgICAgIHNjYWxlOiBzY2FsZSxcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwMCAqIHNjYWxlLFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJyNmZmZmZmYnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJCgnI2V4cG9ydC1pbWFnZScpLmFwcGVuZChpbWcpO1xyXG4gICAgICAgICAgICAkc2NvcGUuaW1hZ2VFeHBvcnRMb2FkaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBtYXAuZ2V0VGVtcGxhdGVzKCkuaGlkZUV4cG9ydEZvb3RlcigpO1xyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLSB1dGlscyAtLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5zcGxpdExpbmVzID0gZnVuY3Rpb24odGV4dCkge1xyXG4gICAgICAgIHJldHVybiB0ZXh0LnNwbGl0KC9cXG4vKTtcclxuICAgIH07XHJcbn07Iiwid2luZG93LlNhbmRiYW5rID0ge307XHJcblxyXG4vLyB0aGUgdG9wbW9zdCBjb250cm9sbGVyIGZvciB0aGUgYXBwXHJcblxyXG53aW5kb3cuVXNlckN0cmwgPSBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRodHRwLCAkbW9kYWwsICR1cGxvYWQpIHtcclxuXHJcbiAgICAvLyBxdWVyeSBzdHJpbmcgcGFyYW1zXHJcbiAgICAkc2NvcGUucGFyYW1zID0gVVJJKHdpbmRvdy5sb2NhdGlvbikucXVlcnkodHJ1ZSk7XHJcblxyXG4gICAgLy8gYXV0by1vcGVuIHRoaW5rcXVlcnk/XHJcbiAgICAkc2NvcGUudGhpbmtxdWVyeSA9ICgkc2NvcGUucGFyYW1zLnRoaW5rcXVlcnkgPyB0cnVlIDogZmFsc2UpO1xyXG5cclxuICAgICRzY29wZS51c2VySWQgPSB3aW5kb3cudXNlcklkOyAvLyBzZXQgaW4gbGF5b3V0cy91c2VyXHJcbiAgICAkc2NvcGUudXNlcklzQWRtaW4gPSB3aW5kb3cudXNlcklzQWRtaW47XHJcbiAgICAkc2NvcGUudXNlck5hbWUgPSAnJztcclxuICAgICRzY29wZS51c2VyUHJvZmlsZSA9IG51bGw7XHJcbiAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnJztcclxuICAgICRzY29wZS5wYXNzd29yZCA9ICcnO1xyXG4gICAgJHNjb3BlLnBhc3N3b3JkQ29uZmlybSA9ICcnO1xyXG5cclxuICAgICRzY29wZS5nZXROZXdXaW5kb3dOYW1lID0gZnVuY3Rpb24oYWN0aW9uLCBtYXBJZCkge1xyXG4gICAgICAgIGlmIChhY3Rpb24gPT0gJ1ZJRVdfTUFQJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ1ZJRVdfTUFQXycgKyBtYXBJZDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNob3cvaGlkZSB0ZXN0cyBVSSBhbmQgbW9kZWwgZGVidWcgZm9ybVxyXG4gICAgJHNjb3BlLnNob3dUZXN0cyA9IGZhbHNlO1xyXG4gICAgJHNjb3BlLnNob3dNb2RlbCA9IGZhbHNlO1xyXG5cclxuICAgICRzY29wZS50b2dnbGVTaG93VGVzdHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2hvd1Rlc3RzID0gISRzY29wZS5zaG93VGVzdHM7XHJcbiAgICB9O1xyXG4gICAgJHNjb3BlLnRvZ2dsZVNob3dNb2RlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zaG93TW9kZWwgPSAhJHNjb3BlLnNob3dNb2RlbDtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFVzZXJJZCA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgJHNjb3BlLnVzZXJJZCA9IGlkO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmaXhSb3dIZWlnaHRzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBtYWtlIGFsbCBjZWxscyBpbiBhIHJvdyB0aGUgc2FtZSBoZWlnaHRcclxuICAgIGZ1bmN0aW9uIGZpeFJvd0hlaWdodHMoKSB7XHJcbiAgICAgICAgLy8gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gICAgICQoJy5yb3ctaGVpZ2h0JykuZWFjaChmdW5jdGlvbigpIHsgIFxyXG4gICAgICAgIC8vICAgICAgICAgdmFyIGhpZ2hlc3RCb3ggPSAwO1xyXG4gICAgICAgIC8vICAgICAgICAgJCgnPiBkaXYnLCB0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaWYgKCQodGhpcykuaGVpZ2h0KCkgPiBoaWdoZXN0Qm94KSBcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgaGlnaGVzdEJveCA9ICQodGhpcykuaGVpZ2h0KCk7XHJcbiAgICAgICAgLy8gICAgICAgICB9KTsgIFxyXG4gICAgICAgIC8vICAgICAgICAgJCgnPiBkaXYnLCB0aGlzKS5oZWlnaHQoaGlnaGVzdEJveCk7XHJcbiAgICAgICAgLy8gICAgIH0pOyAgICAgICAgXHJcbiAgICAgICAgLy8gfSwgMzAwKTtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoJHNjb3BlLnVzZXJJZCkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJy91c2Vycy8nICsgJHNjb3BlLnVzZXJJZCArICcvcHJvZmlsZS5qc29uJztcclxuICAgICAgICAgICAgd2luZG93LnN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQodXJsKS50aGVuKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsgLy8gc3VjY2Vzc1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyUHJvZmlsZSA9IHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdFNlbGVjdGVkQWRtaW5UYWdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdFNlbGVjdGVkRm9sbG93YWJsZU9yZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNjc1RhZ2dpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNjc1RhZ2dpbmcubG9hZENjc1RhZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZml4Um93SGVpZ2h0cygpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlYXNvbikgeyAvLyBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3QgbG9hZCB1c2VyIHByb2ZpbGUgZGF0YScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZSgpO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIGNvdXJzZXMvc3Vic2NyaXB0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBvcGVuIHRoZSBTdHJpcGUgQ2hlY2tvdXQgZGlhbG9nIGFuZCBnZXQgYSB0b2tlblxyXG4gICAgLy8gTkI6IGFtb3VudCBpcyBzdG9yZWQgaW4gdGhlIFN0cmlwZSBwbGFuIGRlZmluaXRpb25cclxuICAgICRzY29wZS5hZGRTdWJzY3JpcHRpb24gPSBmdW5jdGlvbihwbGFuKSB7XHJcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBTdHJpcGVDaGVja291dC5jb25maWd1cmUoe1xyXG4gICAgICAgICAgICBrZXk6ICRzY29wZS51c2VyUHJvZmlsZS5hY2NvdW50LnN0cmlwZUtleSxcclxuICAgICAgICAgICAgbmFtZTogXCJTdWJzY3JpYmUgdG8gTWV0YU1hcFwiLFxyXG4gICAgICAgICAgICBpbWFnZTogXCIvYXNzZXRzL2JhZGdlLWxvZ28tNjQucG5nXCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwbGFuLm5hbWUsXHJcbiAgICAgICAgICAgIHBhbmVsTGFiZWw6IFwiUGF5IHt7YW1vdW50fX0vXCIgKyBwbGFuLmludGVydmFsLFxyXG4gICAgICAgICAgICBhbW91bnQ6IHBsYW4ucHJpY2UsXHJcbiAgICAgICAgICAgIGFsbG93UmVtZW1iZXJNZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGVtYWlsOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5lbWFpbCxcclxuICAgICAgICAgICAgdG9rZW46IGZ1bmN0aW9uKHRva2VuLCBhcmdzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndG9rZW46ICcsIHRva2VuKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9jaGFyZ2VzL3N1YnNjcmliZScsIHtcclxuICAgICAgICAgICAgICAgICAgICBwbGFuX2lkOiBwbGFuLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5faWQ6IHRva2VuLmlkXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5zdWNjZXNzKCdTdWJzY3JpcHRpb24gY3JlYXRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuZXJyb3IoJ1N1YnNjcmlwdGlvbiBjb3VsZCBub3QgYmUgY3JlYXRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGhhbmRsZXIub3BlbigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBmb3IgYnV5LWNvdXJzZS1idXR0b24gZGlyZWN0aXZlXHJcbiAgICAkc2NvcGUuZ2V0QnV5QnV0dG9uTGFiZWwgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIHZhciBjb3Vyc2U7XHJcbiAgICAgICAgaWYgKGNvdXJzZSA9IGdldEZyZWVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnRnJlZSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxlZENvdXJzZShpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdFbnJvbGxlZCc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxhYmxlQ291cnNlKGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0Vucm9sbCAtICQnICsgKGNvdXJzZS5wcmljZSAvIDEwMCkudG9GaXhlZCgyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZ2V0Q291cnNlU3RhdHVzU3VtbWFyeSA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgdmFyIGNvdXJzZSA9ICRzY29wZS5nZXRDb3Vyc2UoaWQpO1xyXG4gICAgICAgIGlmIChjb3Vyc2UpIHtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBjb3Vyc2Uuc3RlcHNDb21wbGV0ZWQgKyAnIG9mICcgKyBjb3Vyc2Uuc3RlcHMgKyAnIHN0ZXBzIGNvbXBsZXRlZCc7XHJcbiAgICAgICAgICAgIGlmIChjb3Vyc2UuZW5yb2xtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0ID0gXCJFbnJvbGxlZCBcIiArIGNvdXJzZS5lbnJvbG1lbnQuZGF0ZSArXHJcbiAgICAgICAgICAgICAgICAgICAgKGNvdXJzZS5lbnJvbG1lbnQuc3RyaXBlRGF0YS5yZWZ1bmRlZCA/IFwiIChSZWZ1bmRlZClcIiA6IFwiXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAnIC0gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY291cnNlLmNvZGUgKyAnIC0gJyArIHRleHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZ2V0Q291cnNlQ29tcGxldGVkUGVyY2VudCA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgdmFyIGNvdXJzZSA9ICRzY29wZS5nZXRDb3Vyc2UoaWQpO1xyXG4gICAgICAgIGlmIChjb3Vyc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZS5zdGVwc0NvbXBsZXRlZFBlcmNlbnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUubWF5YmVCdXlDb3Vyc2UgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIHZhciBjb3Vyc2U7XHJcbiAgICAgICAgaWYgKGNvdXJzZSA9IGdldEZyZWVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9jb3Vyc2VzLycgKyBjb3Vyc2UuaWQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxlZENvdXJzZShpZCkpIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2NvdXJzZXMvJyArIGNvdXJzZS5pZDtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvdXJzZSA9IGdldEVucm9sbGFibGVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5idXlDb3Vyc2UoY291cnNlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5nZXRDb3Vyc2UgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIHZhciBjb3Vyc2U7XHJcbiAgICAgICAgaWYgKGNvdXJzZSA9IGdldEZyZWVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxlZENvdXJzZShpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvdXJzZSA9IGdldEVucm9sbGFibGVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRGcmVlQ291cnNlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZSAmJiBfLmZpbmQoJHNjb3BlLnVzZXJQcm9maWxlLmZyZWVBY2Nlc3NpYmxlQ291cnNlcywgZnVuY3Rpb24oY291cnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2UuaWQgPT0gaWQgJiYgY291cnNlLmVucm9sbWVudCA9PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RW5yb2xsZWRDb3Vyc2UoaWQpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlICYmIF8uZmluZCgkc2NvcGUudXNlclByb2ZpbGUuZnJlZUFjY2Vzc2libGVDb3Vyc2VzLCBmdW5jdGlvbihjb3Vyc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZS5pZCA9PSBpZCAmJiBjb3Vyc2UuZW5yb2xtZW50ICE9PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RW5yb2xsYWJsZUNvdXJzZShpZCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGUgJiYgXy5maW5kKCRzY29wZS51c2VyUHJvZmlsZS5ub25GcmVlQWNjZXNzaWJsZUNvdXJzZXMsIGZ1bmN0aW9uKGNvdXJzZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY291cnNlLmlkID09IGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG9wZW4gdGhlIFN0cmlwZSBDaGVja291dCBkaWFsb2cgYW5kIGdldCBhIHRva2VuXHJcbiAgICAvLyBOQjogYW1vdW50IGlzIHBhc3NlZCBmcm9tIG91ciBjb3Vyc2UgZGVmaW5pdGlvblxyXG4gICAgJHNjb3BlLmJ1eUNvdXJzZSA9IGZ1bmN0aW9uKGNvdXJzZSkge1xyXG4gICAgICAgIHZhciBoYW5kbGVyID0gU3RyaXBlQ2hlY2tvdXQuY29uZmlndXJlKHtcclxuICAgICAgICAgICAga2V5OiAkc2NvcGUudXNlclByb2ZpbGUuYWNjb3VudC5zdHJpcGVLZXksXHJcbiAgICAgICAgICAgIG5hbWU6IFwiRW5yb2xsIGluIENvdXJzZVwiLFxyXG4gICAgICAgICAgICBpbWFnZTogXCIvYXNzZXRzL2JhZGdlLWxvZ28tNjQucG5nXCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBjb3Vyc2UuY29kZSxcclxuICAgICAgICAgICAgYW1vdW50OiBjb3Vyc2UucHJpY2UsXHJcbiAgICAgICAgICAgIGFsbG93UmVtZW1iZXJNZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGVtYWlsOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5lbWFpbCxcclxuICAgICAgICAgICAgdG9rZW46IGZ1bmN0aW9uKHRva2VuLCBhcmdzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndG9rZW46ICcsIHRva2VuKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9jaGFyZ2VzL2J1eV9jb3Vyc2UnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291cnNlX2NvZGU6IGNvdXJzZS5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdXJzZV9wcmljZTogY291cnNlLnByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuX2lkOiB0b2tlbi5pZFxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnQ291cnNlIHB1cmNoYXNlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbG9hZCBwYWdlIHRvIGhhbmRsZSBzdHJpcGUgYnVnICg/KSAtIGxpbmtzIG5vdCBjbGlja2FibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LmVycm9yKCdDb3Vyc2UgcHVyY2hhc2UgY291bGQgbm90IGJlIGNvbXBsZXRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0cmlwZSBlcnJvcjogJywgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGhhbmRsZXIub3BlbigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY2FuY2VsU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24oc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgd2luZG93LnN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgICRodHRwLmRlbGV0ZSgnL2NoYXJnZXMvdW5zdWJzY3JpYmU/c3Vic2NyaXB0aW9uX2lkPScgKyBzdWJzY3JpcHRpb24uaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnU3Vic2NyaXB0aW9uIGNhbmNlbGxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5lcnJvcignU3Vic2NyaXB0aW9uIGNvdWxkIG5vdCBiZSBjYW5jZWxsZWQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gZGVidWcvdGVzdCBvbmx5XHJcbiAgICAkc2NvcGUuY2xlYXJDdXN0b21lciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAkaHR0cC5kZWxldGUoJy9jaGFyZ2VzL2NsZWFyX2N1c3RvbWVyJykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5zdWNjZXNzKCdDdXN0b21lciBjbGVhcmVkJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LmVycm9yKCdDdXN0b21lciBjb3VsZCBub3QgYmUgY2xlYXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBwb2ludHMgYW5kIGJhZGdlcyAtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLmhhc0N1cnJlbnRCYWRnZSA9IGZ1bmN0aW9uKGtleSwgbGV2ZWwpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlICYmICRzY29wZS51c2VyUHJvZmlsZS5iYWRnZXMuY3VycmVudFtrZXldID09IGxldmVsO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuaGFzTmV3QmFkZ2UgPSBmdW5jdGlvbihrZXksIGxldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZSAmJiAkc2NvcGUudXNlclByb2ZpbGUuYmFkZ2VzLm5ld1trZXldID09IGxldmVsO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuaGFzTmV3QmFkZ2VzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZSAmJiBfLmtleXMoJHNjb3BlLnVzZXJQcm9maWxlLmJhZGdlcy5uZXcpLmxlbmd0aCA+IDA7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5nZXRCYWRnZURlZmluaXRpb24gPSBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUoJHNjb3BlLnVzZXJQcm9maWxlLmJhZGdlcy5kZWZpbml0aW9ucywge1xyXG4gICAgICAgICAgICBrZXk6IGtleVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIHR1dG9yaWFsIC0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAkc2NvcGUudHV0b3JpYWxFbmFibGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cubWFwRGF0YSAhPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIHN0YXJ0IHR1dG9yaWFsOlxyXG4gICAgICAgIHZhciBfdHV0b3JpYWwgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVHV0b3JpYWwoKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnN0YXJ0VHV0b3JpYWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgX3R1dG9yaWFsLnN0YXJ0KCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHt9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gZmVlZGJhY2sgZm9ybSAtLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5mZWVkYmFjayA9ICcnO1xyXG5cclxuICAgICRzY29wZS50b2dnbGVGZWVkYmFjayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQoJyNmZWVkYmFjay1kcm9wZG93bicpLnNsaWRlVG9nZ2xlKCdmYXN0JykuZmluZCgndGV4dGFyZWEnKS5nZXQoMCkuZm9jdXMoKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnN1Ym1pdEZlZWRiYWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5mZWVkYmFjayA9PT0gJycpIHtcclxuICAgICAgICAgICAgcmV0dXJuOyAvLyBlbXB0eSBpbnB1dC4uLlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICB1cmw6ICcvdXNlcnMvZmVlZGJhY2snLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxyXG4gICAgICAgICAgICAgICAgZmVlZGJhY2s6ICRzY29wZS5mZWVkYmFja1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5mZWVkYmFjayA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1RoYW5rIHlvdSBmb3IgeW91ciBmZWVkYmFjayEnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignZXJyb3Igc2VuZGluZyBmZWVkYmFjazogJywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcjZmVlZGJhY2stZHJvcGRvd24nKS5zbGlkZVRvZ2dsZSgnZmFzdCcpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0gdXNlcidzIHVzZXIgdGFncyAtLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIE5COiB0aGlzIGlzIHNpbWlsYXIgdG8gbWFwcyB0YWdnaW5nIGluIHRhZ2dpbmcuanMgLSBidXQgc2ltcGxlciwgYXMgd2UgZG8gbm90IGhhdmUgdG8gZGVhbCB3aXRoIFxyXG4gICAgLy8gbXVsdGlwbGUgdGFnZ2FibGUgaXRlbXMsIHdoaWNoIG1lYW5zIHRyYWNraW5nIGV4aXN0aW5nIHZzLiBuZXcgdGFncywgZXRjLi4uXHJcblxyXG4gICAgJHNjb3BlLm5ld1RhZyA9IHtcclxuICAgICAgICBuYW1lOiAnJ1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyB0YWcgYXV0b2NvbXBsZXRlXHJcbiAgICAkc2NvcGUuZ2V0VXNlclRhZ3MgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICB2YXIgdXJsID0gJy91c2VyX3RhZ3MvbGlzdC5qc29uP3E9JyArIHZpZXdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS50YWdzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudXBkYXRlVXNlclVzZXJUYWdzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHRhZ0xpc3QgPSBfLnBsdWNrKCRzY29wZS51c2VyUHJvZmlsZS51c2VyVGFncywgJ25hbWUnKS5qb2luKCcsJyk7XHJcbiAgICAgICAgJGh0dHAucHV0KCcvdXNlcl90YWdzL3VwZGF0ZV91c2VyX3VzZXJfdGFncycsIFt0YWdMaXN0XSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1RhZ3Mgc2F2ZWQnO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdDb3VsZCBub3Qgc2F2ZSB0YWdzJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5kZWxldGVUYWcgPSBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZigkc2NvcGUudXNlclByb2ZpbGUudXNlclRhZ3MsIHRhZyk7XHJcbiAgICAgICAgJHNjb3BlLnVzZXJQcm9maWxlLnVzZXJUYWdzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAkc2NvcGUudXBkYXRlVXNlclVzZXJUYWdzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS50YWdTZWxlY3RlZCA9IGZ1bmN0aW9uKGl0ZW0sIG1vZGVsLCBsYWJlbCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3RhZ1NlbGVjdGVkOiAnLCBpdGVtLCBtb2RlbCwgbGFiZWwpO1xyXG4gICAgICAgICRzY29wZS5hZGRUYWcoaXRlbS5uYW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmVkaXRpbmdUYWdLZXlwcmVzcyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS53aGljaCA9PSAxMykge1xyXG4gICAgICAgICAgICAkc2NvcGUuYWRkVGFnKCRzY29wZS5uZXdUYWcubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuYWRkVGFnID0gZnVuY3Rpb24odGFnTmFtZSkge1xyXG4gICAgICAgICRzY29wZS51c2VyUHJvZmlsZS51c2VyVGFncy5wdXNoKHtcclxuICAgICAgICAgICAgbmFtZTogdGFnTmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS5uZXdUYWcubmFtZSA9ICcnO1xyXG4gICAgICAgICRzY29wZS51cGRhdGVVc2VyVXNlclRhZ3MoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIHVzZXIncy9tYXAncyBDQ1MgdGFncyAtLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHRoaXMgbWFuYWdlcyBDQ1MgdGFncyBmb3IgZWl0aGVyIHRoZSBjdXJyZW50IHVzZXIgb3IgdGhlIGN1cnJlbnQgbWFwLCBcclxuICAgIC8vIGRlcGVuZGluZyB3aGljaCBwYWdlIHdlJ3JlIG9uIC0gbWFwSWQgZ2V0cyBvdmVycmlkZGVuIGluIGVkaXRvci5qcyBpZiB3ZSdyZSBlZGl0aW5nIGEgbWFwXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAkc2NvcGUuY2NzVGFnZ2luZyA9IG5ldyBTYW5kYmFua0Njc1RhZ2dpbmcoJHNjb3BlLCAkaHR0cCwgJG1vZGFsKTtcclxuICAgICAgICAkc2NvcGUuY2NzVGFnZ2luZy5tYXBJZCA9IG51bGw7XHJcbiAgICB9IGNhdGNoIChlKSB7fVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLSB1c2VyJ3MgYWRtaW4gdGFncyAtLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGtleSAoaW5kZXgpOiBhZG1pbiB0YWcgSUQ7IHZhbHVlOiB0cnVlL2ZhbHNlIChpZiB1c2VyIGZvbGxvd3MgdGhlIGFkbWluIHRhZylcclxuICAgICRzY29wZS5zZWxlY3RlZFVzZXJBZG1pblRhZ3MgPSBbXTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0U2VsZWN0ZWRBZG1pblRhZ3MoKSB7XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkVXNlckFkbWluVGFncyA9IFtdO1xyXG4gICAgICAgIF8uZWFjaCgkc2NvcGUudXNlclByb2ZpbGUuYWRtaW5UYWdzLCBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICAgICAgaWYgKF8uZmluZFdoZXJlKCRzY29wZS51c2VyUHJvZmlsZS51c2VyQWRtaW5UYWdzLCB7XHJcbiAgICAgICAgICAgICAgICBpZDogdGFnLmlkXHJcbiAgICAgICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRVc2VyQWRtaW5UYWdzW3RhZy5pZF0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLnVwZGF0ZVVzZXJBZG1pblRhZ3MgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRUYWdOYW1lcyA9IF8ubWFwKCRzY29wZS51c2VyUHJvZmlsZS5hZG1pblRhZ3MsIGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLnNlbGVjdGVkVXNlckFkbWluVGFnc1t0YWcuaWRdID8gdGFnLm5hbWUgOiBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciB0YWdMaXN0ID0gXy53aXRob3V0KHNlbGVjdGVkVGFnTmFtZXMsIG51bGwpLmpvaW4oJywnKTtcclxuICAgICAgICAkaHR0cC5wdXQoJy9hZG1pbl90YWdzL3VwZGF0ZV91c2VyX2FkbWluX3RhZ3MnLCBbdGFnTGlzdF0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdJbnRlcmVzdHMgc2F2ZWQnO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdDb3VsZCBub3Qgc2F2ZSBpbnRlcmVzdHMnO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIHVzZXIncyBmb2xsb3dlZCBvcmdzIC0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8ga2V5IChpbmRleCk6IG9yZyBJRDsgdmFsdWU6IHRydWUvZmFsc2UgKGlmIHVzZXIgZm9sbG93cyB0aGUgb3JnKVxyXG4gICAgJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnMgPSBbXTtcclxuXHJcbiAgICAkc2NvcGUudXNlcklzRm9sbG93aW5nT3JnID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbaWRdO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudG9nZ2xlVXNlckZvbGxvd2luZ09yZyA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgaWYgKCEkc2NvcGUuc2VsZWN0ZWRGb2xsb3dhYmxlT3JnYW5pemF0aW9uc1tpZF0gfHwgY29uZmlybSgnU3RvcCBmb2xsb3dpbmcgdGhpcyBUaGlua05hdGlvbj8nKSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRGb2xsb3dhYmxlT3JnYW5pemF0aW9uc1tpZF0gPSAhJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbaWRdO1xyXG4gICAgICAgICAgICAkc2NvcGUudXBkYXRlRm9sbG93ZWRPcmdhbml6YXRpb25zKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0U2VsZWN0ZWRGb2xsb3dhYmxlT3JncygpIHtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRGb2xsb3dhYmxlT3JnYW5pemF0aW9ucyA9IFtdO1xyXG4gICAgICAgIF8uZWFjaCgkc2NvcGUudXNlclByb2ZpbGUuZm9sbG93ZWRPcmdhbml6YXRpb25zLCBmdW5jdGlvbihvcmcpIHtcclxuICAgICAgICAgICAgaWYgKF8uZmluZFdoZXJlKCRzY29wZS51c2VyUHJvZmlsZS5mb2xsb3dhYmxlT3JnYW5pemF0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgaWQ6IG9yZy5pZFxyXG4gICAgICAgICAgICB9KSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbb3JnLmlkXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUudXBkYXRlRm9sbG93ZWRPcmdhbml6YXRpb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkT3JnSWRzID0gXy5tYXAoJHNjb3BlLnVzZXJQcm9maWxlLmZvbGxvd2FibGVPcmdhbml6YXRpb25zLCBmdW5jdGlvbihvcmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zW29yZy5pZF0gPyBvcmcuaWQgOiBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBvcmdJZExpc3QgPSBfLndpdGhvdXQoc2VsZWN0ZWRPcmdJZHMsIG51bGwpLmpvaW4oJywnKTtcclxuICAgICAgICAkaHR0cC5wdXQoJy9vcmdhbml6YXRpb25fZm9sbG93cy91cGRhdGVfdXNlcl9vcmdhbml6YXRpb25fZm9sbG93cycsIFtvcmdJZExpc3RdKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnVGhpbmtOYXRpb25zIHNhdmVkJztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgVGhpbmtOYXRpb25zJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLSB1c2VyJ3Mgb3JnIG1lbWJlcnNoaXBzIC0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLmpvaW5OYXRpb24gPSBuZXcgU2FuZGJhbmtKb2luTmF0aW9uKCRzY29wZSwgJGh0dHAsICRtb2RhbCk7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0TWVtYmVyc2hpcEZvck9yZyhpZCkge1xyXG4gICAgICAgIHJldHVybiBfLmZpbmRXaGVyZSgkc2NvcGUudXNlclByb2ZpbGUubWVtYmVyc2hpcHMsIHtcclxuICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGlkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLnVzZXJJc01lbWJlck9mT3JnID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLnVzZXJQcm9maWxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoZ2V0TWVtYmVyc2hpcEZvck9yZyhpZCkgIT0gdW5kZWZpbmVkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudG9nZ2xlVXNlck1lbWJlck9mT3JnID0gZnVuY3Rpb24oaWQsIG5hbWUpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLnVzZXJJc01lbWJlck9mT3JnKGlkKSkge1xyXG4gICAgICAgICAgICBpZiAoY29uZmlybSgnUmVtb3ZlIHlvdXIgbWVtYmVyc2hpcCBpbiB0aGlzIFRoaW5rTmF0aW9uPycpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVtYmVyc2hpcCA9IGdldE1lbWJlcnNoaXBGb3JPcmcoaWQpO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZGVsZXRlKCcvbWVtYmVyc2hpcHMvJyArIG1lbWJlcnNoaXAuaWQgKyAnLmpzb24nKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRzY29wZS5qb2luTmF0aW9uLm9wZW5Nb2RhbChcclxuICAgICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICAgICAgbmFtZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBmb2xsb3dpbmcgb3RoZXIgdXNlcnMgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLmZvbGxvd1VzZXIgPSBmdW5jdGlvbih1c2VyKSB7XHJcbiAgICAgICAgJGh0dHAucG9zdCgnL3VzZXJfZm9sbG93cy5qc29uJywge1xyXG4gICAgICAgICAgICBmb2xsb3dlZV9pZDogdXNlci5pZFxyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHVzZXIuZm9sbG93SWQgPSByZXNwb25zZS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnWW91IGFyZSBub3cgZm9sbG93aW5nICcgKyB1c2VyLm5hbWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHt9KTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnVuZm9sbG93VXNlciA9IGZ1bmN0aW9uKHVzZXIpIHtcclxuICAgICAgICAkaHR0cC5kZWxldGUoJy91c2VyX2ZvbGxvd3MvJyArIHVzZXIuZm9sbG93SWQgKyAnLmpzb24nKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyLmZvbGxvd0lkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ1lvdSBhcmUgbm8gbG9uZ2VyIGZvbGxvd2luZyAnICsgdXNlci5uYW1lKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBmb2xsb3dpbmcgdGFncyAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBmb2xsb3dUYWcoY29udHJvbGxlciwgdGFnKSB7XHJcbiAgICAgICAgJGh0dHAucG9zdCgnLycgKyBjb250cm9sbGVyICsgJy8nICsgdGFnLmlkICsgJy9mb2xsb3cuanNvbicsIHtcclxuICAgICAgICAgICAgaWQ6IHRhZy5pZFxyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHRhZy5mb2xsb3dpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnWW91IGFyZSBub3cgZm9sbG93aW5nICcgKyB0YWcubmFtZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge30pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVuZm9sbG93VGFnKGNvbnRyb2xsZXIsIHRhZykge1xyXG4gICAgICAgICRodHRwLmRlbGV0ZSgnLycgKyBjb250cm9sbGVyICsgJy8nICsgdGFnLmlkICsgJy91bmZvbGxvdy5qc29uJykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgdGFnLmZvbGxvd2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnWW91IGFyZSBubyBsb25nZXIgZm9sbG93aW5nICcgKyB0YWcubmFtZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge30pO1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS5mb2xsb3dVc2VyVGFnID0gZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgZm9sbG93VGFnKCd1c2VyX3RhZ3MnLCB0YWcpO1xyXG4gICAgfTtcclxuICAgICRzY29wZS51bmZvbGxvd1VzZXJUYWcgPSBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICB1bmZvbGxvd1RhZygndXNlcl90YWdzJywgdGFnKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmZvbGxvd0FkbWluVGFnID0gZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgZm9sbG93VGFnKCdhZG1pbl90YWdzJywgdGFnKTtcclxuICAgIH07XHJcbiAgICAkc2NvcGUudW5mb2xsb3dBZG1pblRhZyA9IGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgIHVuZm9sbG93VGFnKCdhZG1pbl90YWdzJywgdGFnKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmZvbGxvd0Njc1RhZyA9IGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgIGZvbGxvd1RhZygnY29tbW9uX2NvcmVfc3RhbmRhcmRzJywgdGFnKTtcclxuICAgIH07XHJcbiAgICAkc2NvcGUudW5mb2xsb3dDY3NUYWcgPSBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICB1bmZvbGxvd1RhZygnY29tbW9uX2NvcmVfc3RhbmRhcmRzJywgdGFnKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIGF1dG8tc2F2ZSB1c2VyIHByb2ZpbGUgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gZG9uJ3QgbGV0IGF1dG9zYXZlIGJlIHRyaWdnZXJlZCBtb3JlIHRoYW4gZXZlcnkgTiBtaWxsaXNlY29uZHMuLi5cclxuICAgICRzY29wZS5hdXRvc2F2ZSA9IF8uZGVib3VuY2UoYXV0b3NhdmVOb3csIDIwMDApO1xyXG5cclxuICAgIGZ1bmN0aW9uIGF1dG9zYXZlTm93KCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2F1dG9zYXZpbmcgdXNlciBwcm9maWxlJyk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGVtYWlsOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5lbWFpbCxcclxuICAgICAgICAgICAgYWx0X2VtYWlsOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5hbHRFbWFpbCxcclxuICAgICAgICAgICAgZmlyc3RfbmFtZTogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICBsYXN0X25hbWU6ICRzY29wZS51c2VyUHJvZmlsZS51c2VyLmxhc3ROYW1lLFxyXG4gICAgICAgICAgICBhYm91dF9tZTogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuYWJvdXRNZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKCRzY29wZS5wYXNzd29yZHNNYXRjaCgpICYmICRzY29wZS5wYXNzd29yZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZGF0YS5wYXNzd29yZCA9ICRzY29wZS5wYXNzd29yZDtcclxuICAgICAgICAgICAgZGF0YS5wYXNzd29yZF9jb25maXJtYXRpb24gPSAkc2NvcGUucGFzc3dvcmQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnU2F2aW5nLi4uJztcclxuICAgICAgICAkaHR0cC5wdXQoJy91c2Vycy8nICsgJHNjb3BlLnVzZXJJZCwgZGF0YSkudGhlbihcclxuICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXMoZGF0YSwgJ3Bhc3N3b3JkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnUHJvZmlsZSBhbmQgcGFzc3dvcmQgc2F2ZWQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdQcm9maWxlIHNhdmVkJztcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgcHJvZmlsZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS5wYXNzd29yZHNNYXRjaCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAoISRzY29wZS5wYXNzd29yZC5sZW5ndGggJiYgISRzY29wZS5wYXNzd29yZENvbmZpcm0ubGVuZ3RoKSB8fFxyXG4gICAgICAgICAgICAkc2NvcGUucGFzc3dvcmQgPT0gJHNjb3BlLnBhc3N3b3JkQ29uZmlybTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHVwbG9hZCBhdmF0YXIgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gdXNpbmc6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYW5pYWxmYXJpZC9hbmd1bGFyLWZpbGUtdXBsb2FkXHJcbiAgICAkc2NvcGUub25BdmF0YXJGaWxlU2VsZWN0ID0gZnVuY3Rpb24oJGZpbGVzKSB7XHJcbiAgICAgICAgc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgLy8kZmlsZXM6IGFuIGFycmF5IG9mIGZpbGVzIHNlbGVjdGVkLCBlYWNoIGZpbGUgaGFzIG5hbWUsIHNpemUsIGFuZCB0eXBlLlxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJGZpbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWxlID0gJGZpbGVzW2ldO1xyXG4gICAgICAgICAgICAkc2NvcGUudXBsb2FkID0gJHVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiAndXNlcnMvJyArIHVzZXJJZCxcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmaWxlOiBmaWxlLCAvLyBvciBsaXN0IG9mIGZpbGVzOiAkZmlsZXMgZm9yIGh0bWw1IG9ubHlcclxuICAgICAgICAgICAgICAgIGZpbGVGb3JtRGF0YU5hbWU6ICd1c2VyW2F2YXRhcl0nXHJcbiAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdQaG90byB1cGRhdGVkJztcclxuICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnRXJyb3I6IENvdWxkIG5vdCB1cGxvYWQgcGhvdG8nO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy8udGhlbihzdWNjZXNzLCBlcnJvciwgcHJvZ3Jlc3MpOyBcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gdmlldyBoZWxwZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyByZXR1cm5zIGUuZy4gXCJhIGRheSBhZ29cIlxyXG4gICAgLy8gKE5COiBub3cgaXMgb2J0YWluZWQgZnJvbSB0aGUgREIgdG8gZW5zdXJlIHRoYXQgd2UgaGF2ZSBib3RoIGRhdGVzIGluIFVUQzsgXHJcbiAgICAvLyAgICBhbHNvLCBTUUwgdnMuIHJ1YnkgZGF0ZXMgbmVlZCB0byBiZSBjb2VyY2VkIGludG8gYSBzaW1pbGFyIGZvcm1hdCwgYm90aCBpbiBVVEMgLSBzZWUgZmVlZC5qc29uLmpidWlsZGVyKVxyXG4gICAgJHNjb3BlLmdldEV2ZW50VGltZSA9IGZ1bmN0aW9uKHQsIG5vdykge1xyXG4gICAgICAgIHZhciB0aW1lID0gbW9tZW50KHQsICdZWVlZLU1NLUREIEhIOm1tOnNzLlNTUycpO1xyXG4gICAgICAgIHZhciBub3d0aW1lID0gbW9tZW50KG5vdywgJ1lZWVktTU0tREQgSEg6bW06c3MuU1NTJyk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3Q6ICAgICAgICcgKyB0KTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnbm93OiAgICAgJyArIG5vdyk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RpbWU6ICAgICcgKyB0aW1lLmZvcm1hdCgpKTsgLy8gKyAnICcgKyB0aW1lLmlzVmFsaWQoKSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ25vd3RpbWU6ICcgKyBub3d0aW1lLmZvcm1hdCgpKTsgLy8gKyAnICcgKyBub3d0aW1lLmlzVmFsaWQoKSk7XHJcbiAgICAgICAgcmV0dXJuIHRpbWUuZnJvbShub3d0aW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIG5vdGlmaWNhdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5nZXROb3RpZmljYXRpb25GZWVkVXJsID0gZnVuY3Rpb24obm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgaWYgKG5vdGlmaWNhdGlvbi5hY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gbm90aWZpY2F0aW9uLmFjdGlvbnNbMF07XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24uYWN0aW9uID09ICdMSUtFJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcvc29jaWFsP2xpa2VfaWQ9JyArIGFjdGlvbi5saWtlSWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uLmFjdGlvbiA9PSAnQ09NTUVOVCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnL3NvY2lhbD9jb21tZW50X2lkPScgKyBhY3Rpb24uY29tbWVudElkO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbi5hY3Rpb24gPT0gJ1NIQVJFX0lORElWSURVQUwnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJy9tYXBzLycgKyBhY3Rpb24ubWFwSWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uLmFjdGlvbiA9PSAnU0hBUkVfUFVCTElDJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcvc29jaWFsP3NoYXJlX2lkPScgKyBhY3Rpb24uc2hhcmVJZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5kZWxldGVOb3RpZmljYXRpb24gPSBmdW5jdGlvbihub3RpZmljYXRpb24pIHtcclxuICAgICAgICAkaHR0cC5kZWxldGUoJy9ub3RpZmljYXRpb25zLycgKyBub3RpZmljYXRpb24uaWQgKyAnLmpzb24nKS50aGVuKFxyXG4gICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkgeyAvLyBzdWNjZXNzXHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uZGVsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKHJlYXNvbikgeyAvLyBlcnJvclxyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBkZWxldGUgbm90aWZpY2F0aW9uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUubm90aWZpY2F0aW9uVmVyYiA9IGZ1bmN0aW9uKGFjdGlvbikge1xyXG4gICAgICAgIHZhciB2ZXJicyA9IHtcclxuICAgICAgICAgICAgTElLRTogJ2xpa2VkIHRoaXM6JyxcclxuICAgICAgICAgICAgQ09NTUVOVDogJ2NvbW1lbnRlZCBvbiB0aGlzOicsXHJcbiAgICAgICAgICAgIFNIQVJFX0lORElWSURVQUw6ICdzaGFyZWQgYSBNZXRhTWFwIHdpdGggeW91JyxcclxuICAgICAgICAgICAgU0hBUkVfUFVCTElDOiAnc2hhcmVkIGEgTWV0YU1hcCB3aXRoIGV2ZXJ5b25lJyxcclxuICAgICAgICAgICAgTUFQX0ZPTExPVzogJ2ZvbGxvd2VkIGEgTWV0YU1hcDonLFxyXG4gICAgICAgICAgICBVU0VSX0ZPTExPVzogJ2ZvbGxvd2VkIHlvdSdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB2ZXJic1thY3Rpb25dO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gdXRpbGl0eSBmdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gaGFuZHkgZnVuY3Rpb24gZm9yIHVzZSB3aXRoIG5nLWNsYXNzIG9uIHJhZGlvIGJ1dHRvbnNcclxuICAgICRzY29wZS5jbGFzc0lmID0gZnVuY3Rpb24oa2xhc3MsIGIpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGFzc0lmOiAnICsga2xhc3MgKyAnLCAnICsgYik7XHJcbiAgICAgICAgcmV0dXJuIChiID8ga2xhc3MgOiAnJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGF2b2lkICckYXBwbHkgYWxyZWFkeSBpbiBwcm9ncmVzcycgZXJyb3IgKHNvdXJjZTogaHR0cHM6Ly9jb2RlcndhbGwuY29tL3Avbmdpc21hKVxyXG4gICAgJHNjb3BlLnNhZmVBcHBseSA9IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2FmZUFwcGx5IG9uIHNjb3BlOiAnICsgJHNjb3BlKTtcclxuICAgICAgICB2YXIgcGhhc2UgPSB0aGlzLiRyb290LiQkcGhhc2U7XHJcbiAgICAgICAgaWYgKHBoYXNlID09ICckYXBwbHknIHx8IHBoYXNlID09ICckZGlnZXN0Jykge1xyXG4gICAgICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZihmbikgPT09ICdmdW5jdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICBmbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy4kYXBwbHkoZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gc291cmNlOiBodHRwOi8vY3RybHEub3JnL2NvZGUvMTk2MTYtZGV0ZWN0LXRvdWNoLXNjcmVlbi1qYXZhc2NyaXB0XHJcbiAgICAkc2NvcGUuaXNUb3VjaERldmljZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAoKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgfHwgKG5hdmlnYXRvci5NYXhUb3VjaFBvaW50cyA+IDApIHx8IChuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDApKTtcclxuICAgIH07XHJcblxyXG4gICAgaW5pdCgpO1xyXG59O1xyXG5cclxud2luZG93LlVzZXJDdHJsLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRodHRwJywgJyRtb2RhbCcsICckdXBsb2FkJ107IiwibGV0IEF1dGgwTG9jayA9IHJlcXVpcmUoJ2F1dGgwLWxvY2snKTtcblxuY2xhc3MgQXV0aDAge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubG9jayA9IG5ldyBBdXRoMExvY2soJ3dzT25hcnQyM3lWaUlTaHFUNHdmSjE4dzJ2dDJjbDMyJywgJ21ldGFtYXAuYXV0aDAuY29tJyk7XG4gICAgICAgIHRoaXMubG9jay5vbignbG9hZGluZyByZWFkeScsICguLi5lKSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbG9naW4oKSB7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhhdC5nZXRTZXNzaW9uKCkudGhlbigocHJvZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwocHJvZmlsZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5sb2NrLnNob3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2FibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9naW5BZnRlclNpZ251cDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZTogJ29wZW5pZCBvZmZsaW5lX2FjY2VzcydcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgKGVyciwgcHJvZmlsZSwgaWRfdG9rZW4sIGN0b2tlbiwgb3B0LCByZWZyZXNoX3Rva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ2lkX3Rva2VuJywgaWRfdG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ3Byb2ZpbGUnLCBwcm9maWxlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuY3Rva2VuID0gY3Rva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuaWRfdG9rZW4gPSBpZF90b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnByb2ZpbGUgPSBwcm9maWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQucmVmcmVzaF90b2tlbiA9IHJlZnJlc2hfdG9rZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChwcm9maWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICBsaW5rQWNjb3VudCgpIHtcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICB0aGlzLmxvY2suc2hvdyh7XG4gICAgICAgICAgICBjYWxsYmFja1VSTDogJ2h0dHBzOi8vcG9wcGluZy1maXJlLTg5Ny5maXJlYmFzZWFwcC5jb20vJyxcbiAgICAgICAgICAgIGRpY3Q6IHtcbiAgICAgICAgICAgICAgICBzaWduaW46IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdMaW5rIHdpdGggYW5vdGhlciBhY2NvdW50J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdXRoUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgYWNjZXNzX3Rva2VuOiB0aGF0LmN0b2tlblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRTZXNzaW9uKCkge1xuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgIGxldCBnZXRQcm9maWxlID0gKGlkX3Rva2VuLCBmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGF0LmxvY2suZ2V0UHJvZmlsZShpZF90b2tlbiwgZnVuY3Rpb24oZXJyLCBwcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbGZvcmFnZS5zZXRJdGVtKCdpZF90b2tlbicsIGlkX3Rva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxmb3JhZ2Uuc2V0SXRlbSgncHJvZmlsZScsIHByb2ZpbGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmlkX3Rva2VuID0gaWRfdG9rZW47XG4gICAgICAgICAgICAgICAgICAgIHRoYXQucHJvZmlsZSA9IHByb2ZpbGU7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwocHJvZmlsZSwgaWRfdG9rZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IGZ1bGZpbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsb2NhbGZvcmFnZS5nZXRJdGVtKCdpZF90b2tlbicpLnRoZW4oKGlkX3Rva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlkX3Rva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldFByb2ZpbGUoaWRfdG9rZW4sIGZ1bGZpbGwsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIGxvZ291dCgpIHtcbiAgICAgICAgbG9jYWxmb3JhZ2UucmVtb3ZlSXRlbSgnaWRfdG9rZW4nKTtcbiAgICAgICAgbG9jYWxmb3JhZ2UucmVtb3ZlSXRlbSgncHJvZmlsZScpO1xuICAgICAgICB0aGlzLnByb2ZpbGUgPSBudWxsO1xuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBBdXRoMDtcblxuXG4iLCJcbnZhciBnb29nbGVBbmFseXRpY3MgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICB2YXIgYXBpS2V5LCBlLCByO1xuICAgIGlmIChjb25maWcgPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbmZpZyA9IHt9O1xyXG4gICAgfVxuICAgIGFwaUtleSA9IGNvbmZpZy5HT09HTEVfQU5BTFlUSUNTX1RSQUNLSU5HX0lEO1xuICAgIGlmIChhcGlLZXkgJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICE9PSAnbG9jYWxob3N0Jykge1xyXG4gICAgICAgIHdpbmRvdy5Hb29nbGVBbmFseXRpY3NPYmplY3QgPSAnZ2EnO1xuICAgICAgICB3aW5kb3cuZ2EgfHwgKHdpbmRvdy5nYSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgKHdpbmRvdy5nYS5xID0gd2luZG93LmdhLnEgfHwgW10pLnB1c2goYXJndW1lbnRzKTtcclxuICAgICAgICB9KTtcbiAgICAgICAgd2luZG93LmdhLmdhID0gKyhuZXcgRGF0ZSk7XG4gICAgICAgIGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTtcbiAgICAgICAgZS5zcmMgPSAnLy93d3cuZ29vZ2xlLWFuYWx5dGljcy5jb20vYW5hbHl0aWNzLmpzJztcbiAgICAgICAgci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLCByKTtcbiAgICAgICAgZ2EoJ2NyZWF0ZScsIGFwaUtleSk7XG4gICAgICAgIHJldHVybiBnYSgnc2VuZCcsICdwYWdldmlldycpO1xyXG4gICAgfVxyXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdvb2dsZUFuYWx5dGljcztcblxuXG4iLCJcbnZhciBuZXdSZWxpYyA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgIHZhciBhcHBJZCwgbGljZW5zZUtleTtcbiAgICBpZiAoY29uZmlnID09IG51bGwpIHtcclxuICAgICAgICBjb25maWcgPSB7fTtcclxuICAgIH1cbiAgICBsaWNlbnNlS2V5ID0gY29uZmlnLk5FV19SRUxJQ19MSUNFTlNFX0tFWTtcbiAgICBhcHBJZCA9IGNvbmZpZy5ORVdfUkVMSUNfQVBQTElDQVRJT05fSUQ7XG4gICAgaWYgKGxpY2Vuc2VLZXkgJiYgYXBwSWQgJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICE9PSAnbG9jYWxob3N0Jykge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cuTlJFVU0gfHwgKE5SRVVNID0ge30pLCBfX25yX3JlcXVpcmUgPSBmdW5jdGlvbiAodCwgZSwgbikgeyBmdW5jdGlvbiByKG4pIHsgaWYgKCFlW25dKSB7IHZhciBvID0gZVtuXSA9IHsgZXhwb3J0czoge30gfTsgdFtuXVswXS5jYWxsKG8uZXhwb3J0cywgZnVuY3Rpb24gKGUpIHsgdmFyIG8gPSB0W25dWzFdW2VdOyByZXR1cm4gcihvID8gbyA6IGUpIH0sIG8sIG8uZXhwb3J0cykgfSByZXR1cm4gZVtuXS5leHBvcnRzIH0gaWYgKFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgX19ucl9yZXF1aXJlKSByZXR1cm4gX19ucl9yZXF1aXJlOyBmb3IgKHZhciBvID0gMDsgbyA8IG4ubGVuZ3RoOyBvKyspIHIobltvXSk7IHJldHVybiByIH0oeyBRSmYzYXg6IFtmdW5jdGlvbiAodCwgZSkgeyBmdW5jdGlvbiBuKHQpIHsgZnVuY3Rpb24gZShlLCBuLCBhKSB7IHQgJiYgdChlLCBuLCBhKSwgYSB8fCAoYSA9IHt9KTsgZm9yICh2YXIgYyA9IHMoZSksIGYgPSBjLmxlbmd0aCwgdSA9IGkoYSwgbywgciksIGQgPSAwOyBmID4gZDsgZCsrKSBjW2RdLmFwcGx5KHUsIG4pOyByZXR1cm4gdSB9IGZ1bmN0aW9uIGEodCwgZSkgeyBmW3RdID0gcyh0KS5jb25jYXQoZSkgfSBmdW5jdGlvbiBzKHQpIHsgcmV0dXJuIGZbdF0gfHwgW10gfSBmdW5jdGlvbiBjKCkgeyByZXR1cm4gbihlKSB9IHZhciBmID0ge307IHJldHVybiB7IG9uOiBhLCBlbWl0OiBlLCBjcmVhdGU6IGMsIGxpc3RlbmVyczogcywgX2V2ZW50czogZiB9IH0gZnVuY3Rpb24gcigpIHsgcmV0dXJuIHt9IH0gdmFyIG8gPSBcIm5yQGNvbnRleHRcIiwgaSA9IHQoXCJnb3NcIik7IGUuZXhwb3J0cyA9IG4oKSB9LCB7IGdvczogXCI3ZVNERmhcIiB9XSwgZWU6IFtmdW5jdGlvbiAodCwgZSkgeyBlLmV4cG9ydHMgPSB0KFwiUUpmM2F4XCIpIH0sIHt9XSwgMzogW2Z1bmN0aW9uICh0KSB7IGZ1bmN0aW9uIGUodCwgZSwgbiwgaSwgcykgeyB0cnkgeyBjID8gYyAtPSAxIDogcihcImVyclwiLCBbcyB8fCBuZXcgVW5jYXVnaHRFeGNlcHRpb24odCwgZSwgbildKSB9IGNhdGNoIChmKSB7IHRyeSB7IHIoXCJpZXJyXCIsIFtmLCAobmV3IERhdGUpLmdldFRpbWUoKSwgITBdKSB9IGNhdGNoICh1KSB7IH0gfSByZXR1cm4gXCJmdW5jdGlvblwiID09IHR5cGVvZiBhID8gYS5hcHBseSh0aGlzLCBvKGFyZ3VtZW50cykpIDogITEgfSBmdW5jdGlvbiBVbmNhdWdodEV4Y2VwdGlvbih0LCBlLCBuKSB7IHRoaXMubWVzc2FnZSA9IHQgfHwgXCJVbmNhdWdodCBlcnJvciB3aXRoIG5vIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cIiwgdGhpcy5zb3VyY2VVUkwgPSBlLCB0aGlzLmxpbmUgPSBuIH0gZnVuY3Rpb24gbih0KSB7IHIoXCJlcnJcIiwgW3QsIChuZXcgRGF0ZSkuZ2V0VGltZSgpXSkgfSB2YXIgciA9IHQoXCJoYW5kbGVcIiksIG8gPSB0KDUpLCBpID0gdChcImVlXCIpLCBhID0gd2luZG93Lm9uZXJyb3IsIHMgPSAhMSwgYyA9IDA7IHQoXCJsb2FkZXJcIikuZmVhdHVyZXMuZXJyID0gITAsIHdpbmRvdy5vbmVycm9yID0gZSwgTlJFVU0ubm90aWNlRXJyb3IgPSBuOyB0cnkgeyB0aHJvdyBuZXcgRXJyb3IgfSBjYXRjaCAoZikgeyBcInN0YWNrXCIgaW4gZiAmJiAodCgxKSwgdCg0KSwgXCJhZGRFdmVudExpc3RlbmVyXCIgaW4gd2luZG93ICYmIHQoMiksIHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUgJiYgWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgJiYgdCgzKSwgcyA9ICEwKSB9IGkub24oXCJmbi1zdGFydFwiLCBmdW5jdGlvbiAoKSB7IHMgJiYgKGMgKz0gMSkgfSksIGkub24oXCJmbi1lcnJcIiwgZnVuY3Rpb24gKHQsIGUsIHIpIHsgcyAmJiAodGhpcy50aHJvd24gPSAhMCwgbihyKSkgfSksIGkub24oXCJmbi1lbmRcIiwgZnVuY3Rpb24gKCkgeyBzICYmICF0aGlzLnRocm93biAmJiBjID4gMCAmJiAoYyAtPSAxKSB9KSwgaS5vbihcImludGVybmFsLWVycm9yXCIsIGZ1bmN0aW9uICh0KSB7IHIoXCJpZXJyXCIsIFt0LCAobmV3IERhdGUpLmdldFRpbWUoKSwgITBdKSB9KSB9LCB7IDE6IDgsIDI6IDUsIDM6IDksIDQ6IDcsIDU6IDIxLCBlZTogXCJRSmYzYXhcIiwgaGFuZGxlOiBcIkQ1RHVMUFwiLCBsb2FkZXI6IFwiRzl6MEJsXCIgfV0sIDQ6IFtmdW5jdGlvbiAodCkgeyBmdW5jdGlvbiBlKCkgeyB9IGlmICh3aW5kb3cucGVyZm9ybWFuY2UgJiYgd2luZG93LnBlcmZvcm1hbmNlLnRpbWluZyAmJiB3aW5kb3cucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZSkgeyB2YXIgbiA9IHQoXCJlZVwiKSwgciA9IHQoXCJoYW5kbGVcIiksIG8gPSB0KDIpOyB0KFwibG9hZGVyXCIpLmZlYXR1cmVzLnN0biA9ICEwLCB0KDEpLCBuLm9uKFwiZm4tc3RhcnRcIiwgZnVuY3Rpb24gKHQpIHsgdmFyIGUgPSB0WzBdOyBlIGluc3RhbmNlb2YgRXZlbnQgJiYgKHRoaXMuYnN0U3RhcnQgPSBEYXRlLm5vdygpKSB9KSwgbi5vbihcImZuLWVuZFwiLCBmdW5jdGlvbiAodCwgZSkgeyB2YXIgbiA9IHRbMF07IG4gaW5zdGFuY2VvZiBFdmVudCAmJiByKFwiYnN0XCIsIFtuLCBlLCB0aGlzLmJzdFN0YXJ0LCBEYXRlLm5vdygpXSkgfSksIG8ub24oXCJmbi1zdGFydFwiLCBmdW5jdGlvbiAodCwgZSwgbikgeyB0aGlzLmJzdFN0YXJ0ID0gRGF0ZS5ub3coKSwgdGhpcy5ic3RUeXBlID0gbiB9KSwgby5vbihcImZuLWVuZFwiLCBmdW5jdGlvbiAodCwgZSkgeyByKFwiYnN0VGltZXJcIiwgW2UsIHRoaXMuYnN0U3RhcnQsIERhdGUubm93KCksIHRoaXMuYnN0VHlwZV0pIH0pLCBuLm9uKFwicHVzaFN0YXRlLXN0YXJ0XCIsIGZ1bmN0aW9uICgpIHsgdGhpcy50aW1lID0gRGF0ZS5ub3coKSwgdGhpcy5zdGFydFBhdGggPSBsb2NhdGlvbi5wYXRobmFtZSArIGxvY2F0aW9uLmhhc2ggfSksIG4ub24oXCJwdXNoU3RhdGUtZW5kXCIsIGZ1bmN0aW9uICgpIHsgcihcImJzdEhpc3RcIiwgW2xvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uaGFzaCwgdGhpcy5zdGFydFBhdGgsIHRoaXMudGltZV0pIH0pLCBcImFkZEV2ZW50TGlzdGVuZXJcIiBpbiB3aW5kb3cucGVyZm9ybWFuY2UgJiYgKHdpbmRvdy5wZXJmb3JtYW5jZS5hZGRFdmVudExpc3RlbmVyKFwid2Via2l0cmVzb3VyY2V0aW1pbmdidWZmZXJmdWxsXCIsIGZ1bmN0aW9uICgpIHsgcihcImJzdFJlc291cmNlXCIsIFt3aW5kb3cucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcInJlc291cmNlXCIpXSksIHdpbmRvdy5wZXJmb3JtYW5jZS53ZWJraXRDbGVhclJlc291cmNlVGltaW5ncygpIH0sICExKSwgd2luZG93LnBlcmZvcm1hbmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNvdXJjZXRpbWluZ2J1ZmZlcmZ1bGxcIiwgZnVuY3Rpb24gKCkgeyByKFwiYnN0UmVzb3VyY2VcIiwgW3dpbmRvdy5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwicmVzb3VyY2VcIildKSwgd2luZG93LnBlcmZvcm1hbmNlLmNsZWFyUmVzb3VyY2VUaW1pbmdzKCkgfSwgITEpKSwgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBlLCAhMSksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCBlLCAhMSksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlLCAhMSkgfSB9LCB7IDE6IDYsIDI6IDgsIGVlOiBcIlFKZjNheFwiLCBoYW5kbGU6IFwiRDVEdUxQXCIsIGxvYWRlcjogXCJHOXowQmxcIiB9XSwgNTogW2Z1bmN0aW9uICh0LCBlKSB7IGZ1bmN0aW9uIG4odCkgeyBpLmluUGxhY2UodCwgW1wiYWRkRXZlbnRMaXN0ZW5lclwiLCBcInJlbW92ZUV2ZW50TGlzdGVuZXJcIl0sIFwiLVwiLCByKSB9IGZ1bmN0aW9uIHIodCkgeyByZXR1cm4gdFsxXSB9IHZhciBvID0gKHQoMSksIHQoXCJlZVwiKS5jcmVhdGUoKSksIGkgPSB0KDIpKG8pLCBhID0gdChcImdvc1wiKTsgaWYgKGUuZXhwb3J0cyA9IG8sIG4od2luZG93KSwgXCJnZXRQcm90b3R5cGVPZlwiIGluIE9iamVjdCkgeyBmb3IgKHZhciBzID0gZG9jdW1lbnQ7IHMgJiYgIXMuaGFzT3duUHJvcGVydHkoXCJhZGRFdmVudExpc3RlbmVyXCIpIDspIHMgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yocyk7IHMgJiYgbihzKTsgZm9yICh2YXIgYyA9IFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZTsgYyAmJiAhYy5oYXNPd25Qcm9wZXJ0eShcImFkZEV2ZW50TGlzdGVuZXJcIikgOykgYyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihjKTsgYyAmJiBuKGMpIH0gZWxzZSBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoXCJhZGRFdmVudExpc3RlbmVyXCIpICYmIG4oWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlKTsgby5vbihcImFkZEV2ZW50TGlzdGVuZXItc3RhcnRcIiwgZnVuY3Rpb24gKHQpIHsgaWYgKHRbMV0pIHsgdmFyIGUgPSB0WzFdOyBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUgPyB0aGlzLndyYXBwZWQgPSB0WzFdID0gYShlLCBcIm5yQHdyYXBwZWRcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gaShlLCBcImZuLVwiLCBudWxsLCBlLm5hbWUgfHwgXCJhbm9ueW1vdXNcIikgfSkgOiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUuaGFuZGxlRXZlbnQgJiYgaS5pblBsYWNlKGUsIFtcImhhbmRsZUV2ZW50XCJdLCBcImZuLVwiKSB9IH0pLCBvLm9uKFwicmVtb3ZlRXZlbnRMaXN0ZW5lci1zdGFydFwiLCBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IHRoaXMud3JhcHBlZDsgZSAmJiAodFsxXSA9IGUpIH0pIH0sIHsgMTogMjEsIDI6IDIyLCBlZTogXCJRSmYzYXhcIiwgZ29zOiBcIjdlU0RGaFwiIH1dLCA2OiBbZnVuY3Rpb24gKHQsIGUpIHsgdmFyIG4gPSAodCgyKSwgdChcImVlXCIpLmNyZWF0ZSgpKSwgciA9IHQoMSkobik7IGUuZXhwb3J0cyA9IG4sIHIuaW5QbGFjZSh3aW5kb3cuaGlzdG9yeSwgW1wicHVzaFN0YXRlXCJdLCBcIi1cIikgfSwgeyAxOiAyMiwgMjogMjEsIGVlOiBcIlFKZjNheFwiIH1dLCA3OiBbZnVuY3Rpb24gKHQsIGUpIHsgdmFyIG4gPSAodCgyKSwgdChcImVlXCIpLmNyZWF0ZSgpKSwgciA9IHQoMSkobik7IGUuZXhwb3J0cyA9IG4sIHIuaW5QbGFjZSh3aW5kb3csIFtcInJlcXVlc3RBbmltYXRpb25GcmFtZVwiLCBcIm1velJlcXVlc3RBbmltYXRpb25GcmFtZVwiLCBcIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZVwiLCBcIm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdLCBcInJhZi1cIiksIG4ub24oXCJyYWYtc3RhcnRcIiwgZnVuY3Rpb24gKHQpIHsgdFswXSA9IHIodFswXSwgXCJmbi1cIikgfSkgfSwgeyAxOiAyMiwgMjogMjEsIGVlOiBcIlFKZjNheFwiIH1dLCA4OiBbZnVuY3Rpb24gKHQsIGUpIHsgZnVuY3Rpb24gbih0LCBlLCBuKSB7IHZhciByID0gdFswXTsgXCJzdHJpbmdcIiA9PSB0eXBlb2YgciAmJiAociA9IG5ldyBGdW5jdGlvbihyKSksIHRbMF0gPSBvKHIsIFwiZm4tXCIsIG51bGwsIG4pIH0gdmFyIHIgPSAodCgyKSwgdChcImVlXCIpLmNyZWF0ZSgpKSwgbyA9IHQoMSkocik7IGUuZXhwb3J0cyA9IHIsIG8uaW5QbGFjZSh3aW5kb3csIFtcInNldFRpbWVvdXRcIiwgXCJzZXRJbnRlcnZhbFwiLCBcInNldEltbWVkaWF0ZVwiXSwgXCJzZXRUaW1lci1cIiksIHIub24oXCJzZXRUaW1lci1zdGFydFwiLCBuKSB9LCB7IDE6IDIyLCAyOiAyMSwgZWU6IFwiUUpmM2F4XCIgfV0sIDk6IFtmdW5jdGlvbiAodCwgZSkgeyBmdW5jdGlvbiBuKCkgeyBjLmluUGxhY2UodGhpcywgZCwgXCJmbi1cIikgfSBmdW5jdGlvbiByKHQsIGUpIHsgYy5pblBsYWNlKGUsIFtcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiXSwgXCJmbi1cIikgfSBmdW5jdGlvbiBvKHQsIGUpIHsgcmV0dXJuIGUgfSB2YXIgaSA9IHQoXCJlZVwiKS5jcmVhdGUoKSwgYSA9IHQoMSksIHMgPSB0KDIpLCBjID0gcyhpKSwgZiA9IHMoYSksIHUgPSB3aW5kb3cuWE1MSHR0cFJlcXVlc3QsIGQgPSBbXCJvbmxvYWRcIiwgXCJvbmVycm9yXCIsIFwib25hYm9ydFwiLCBcIm9ubG9hZHN0YXJ0XCIsIFwib25sb2FkZW5kXCIsIFwib25wcm9ncmVzc1wiLCBcIm9udGltZW91dFwiXTsgZS5leHBvcnRzID0gaSwgd2luZG93LlhNTEh0dHBSZXF1ZXN0ID0gZnVuY3Rpb24gKHQpIHsgdmFyIGUgPSBuZXcgdSh0KTsgdHJ5IHsgaS5lbWl0KFwibmV3LXhoclwiLCBbXSwgZSksIGYuaW5QbGFjZShlLCBbXCJhZGRFdmVudExpc3RlbmVyXCIsIFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiXSwgXCItXCIsIGZ1bmN0aW9uICh0LCBlKSB7IHJldHVybiBlIH0pLCBlLmFkZEV2ZW50TGlzdGVuZXIoXCJyZWFkeXN0YXRlY2hhbmdlXCIsIG4sICExKSB9IGNhdGNoIChyKSB7IHRyeSB7IGkuZW1pdChcImludGVybmFsLWVycm9yXCIsIFtyXSkgfSBjYXRjaCAobykgeyB9IH0gcmV0dXJuIGUgfSwgd2luZG93LlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZSA9IHUucHJvdG90eXBlLCBjLmluUGxhY2UoWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLCBbXCJvcGVuXCIsIFwic2VuZFwiXSwgXCIteGhyLVwiLCBvKSwgaS5vbihcInNlbmQteGhyLXN0YXJ0XCIsIHIpLCBpLm9uKFwib3Blbi14aHItc3RhcnRcIiwgcikgfSwgeyAxOiA1LCAyOiAyMiwgZWU6IFwiUUpmM2F4XCIgfV0sIDEwOiBbZnVuY3Rpb24gKHQpIHsgZnVuY3Rpb24gZSh0KSB7IGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmIHQubGVuZ3RoKSByZXR1cm4gdC5sZW5ndGg7IGlmIChcIm9iamVjdFwiICE9IHR5cGVvZiB0KSByZXR1cm4gdm9pZCAwOyBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgQXJyYXlCdWZmZXIgJiYgdCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyICYmIHQuYnl0ZUxlbmd0aCkgcmV0dXJuIHQuYnl0ZUxlbmd0aDsgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIEJsb2IgJiYgdCBpbnN0YW5jZW9mIEJsb2IgJiYgdC5zaXplKSByZXR1cm4gdC5zaXplOyBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgRm9ybURhdGEgJiYgdCBpbnN0YW5jZW9mIEZvcm1EYXRhKSByZXR1cm4gdm9pZCAwOyB0cnkgeyByZXR1cm4gSlNPTi5zdHJpbmdpZnkodCkubGVuZ3RoIH0gY2F0Y2ggKGUpIHsgcmV0dXJuIHZvaWQgMCB9IH0gZnVuY3Rpb24gbih0KSB7IHZhciBuID0gdGhpcy5wYXJhbXMsIHIgPSB0aGlzLm1ldHJpY3M7IGlmICghdGhpcy5lbmRlZCkgeyB0aGlzLmVuZGVkID0gITA7IGZvciAodmFyIGkgPSAwOyBjID4gaTsgaSsrKSB0LnJlbW92ZUV2ZW50TGlzdGVuZXIoc1tpXSwgdGhpcy5saXN0ZW5lciwgITEpOyBpZiAoIW4uYWJvcnRlZCkgeyBpZiAoci5kdXJhdGlvbiA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpIC0gdGhpcy5zdGFydFRpbWUsIDQgPT09IHQucmVhZHlTdGF0ZSkgeyBuLnN0YXR1cyA9IHQuc3RhdHVzOyB2YXIgYSA9IHQucmVzcG9uc2VUeXBlLCBmID0gXCJhcnJheWJ1ZmZlclwiID09PSBhIHx8IFwiYmxvYlwiID09PSBhIHx8IFwianNvblwiID09PSBhID8gdC5yZXNwb25zZSA6IHQucmVzcG9uc2VUZXh0LCB1ID0gZShmKTsgaWYgKHUgJiYgKHIucnhTaXplID0gdSksIHRoaXMuc2FtZU9yaWdpbikgeyB2YXIgZCA9IHQuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLU5ld1JlbGljLUFwcC1EYXRhXCIpOyBkICYmIChuLmNhdCA9IGQuc3BsaXQoXCIsIFwiKS5wb3AoKSkgfSB9IGVsc2Ugbi5zdGF0dXMgPSAwOyByLmNiVGltZSA9IHRoaXMuY2JUaW1lLCBvKFwieGhyXCIsIFtuLCByLCB0aGlzLnN0YXJ0VGltZV0pIH0gfSB9IGZ1bmN0aW9uIHIodCwgZSkgeyB2YXIgbiA9IGkoZSksIHIgPSB0LnBhcmFtczsgci5ob3N0ID0gbi5ob3N0bmFtZSArIFwiOlwiICsgbi5wb3J0LCByLnBhdGhuYW1lID0gbi5wYXRobmFtZSwgdC5zYW1lT3JpZ2luID0gbi5zYW1lT3JpZ2luIH0gaWYgKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUgJiYgWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgJiYgIS9DcmlPUy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgeyB0KFwibG9hZGVyXCIpLmZlYXR1cmVzLnhociA9ICEwOyB2YXIgbyA9IHQoXCJoYW5kbGVcIiksIGkgPSB0KDIpLCBhID0gdChcImVlXCIpLCBzID0gW1wibG9hZFwiLCBcImVycm9yXCIsIFwiYWJvcnRcIiwgXCJ0aW1lb3V0XCJdLCBjID0gcy5sZW5ndGgsIGYgPSB0KDEpOyB0KDQpLCB0KDMpLCBhLm9uKFwibmV3LXhoclwiLCBmdW5jdGlvbiAoKSB7IHRoaXMudG90YWxDYnMgPSAwLCB0aGlzLmNhbGxlZCA9IDAsIHRoaXMuY2JUaW1lID0gMCwgdGhpcy5lbmQgPSBuLCB0aGlzLmVuZGVkID0gITEsIHRoaXMueGhyR3VpZHMgPSB7fSB9KSwgYS5vbihcIm9wZW4teGhyLXN0YXJ0XCIsIGZ1bmN0aW9uICh0KSB7IHRoaXMucGFyYW1zID0geyBtZXRob2Q6IHRbMF0gfSwgcih0aGlzLCB0WzFdKSwgdGhpcy5tZXRyaWNzID0ge30gfSksIGEub24oXCJvcGVuLXhoci1lbmRcIiwgZnVuY3Rpb24gKHQsIGUpIHsgXCJsb2FkZXJfY29uZmlnXCIgaW4gTlJFVU0gJiYgXCJ4cGlkXCIgaW4gTlJFVU0ubG9hZGVyX2NvbmZpZyAmJiB0aGlzLnNhbWVPcmlnaW4gJiYgZS5zZXRSZXF1ZXN0SGVhZGVyKFwiWC1OZXdSZWxpYy1JRFwiLCBOUkVVTS5sb2FkZXJfY29uZmlnLnhwaWQpIH0pLCBhLm9uKFwic2VuZC14aHItc3RhcnRcIiwgZnVuY3Rpb24gKHQsIG4pIHsgdmFyIHIgPSB0aGlzLm1ldHJpY3MsIG8gPSB0WzBdLCBpID0gdGhpczsgaWYgKHIgJiYgbykgeyB2YXIgZiA9IGUobyk7IGYgJiYgKHIudHhTaXplID0gZikgfSB0aGlzLnN0YXJ0VGltZSA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpLCB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKHQpIHsgdHJ5IHsgXCJhYm9ydFwiID09PSB0LnR5cGUgJiYgKGkucGFyYW1zLmFib3J0ZWQgPSAhMCksIChcImxvYWRcIiAhPT0gdC50eXBlIHx8IGkuY2FsbGVkID09PSBpLnRvdGFsQ2JzICYmIChpLm9ubG9hZENhbGxlZCB8fCBcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIG4ub25sb2FkKSkgJiYgaS5lbmQobikgfSBjYXRjaCAoZSkgeyB0cnkgeyBhLmVtaXQoXCJpbnRlcm5hbC1lcnJvclwiLCBbZV0pIH0gY2F0Y2ggKHIpIHsgfSB9IH07IGZvciAodmFyIHUgPSAwOyBjID4gdTsgdSsrKSBuLmFkZEV2ZW50TGlzdGVuZXIoc1t1XSwgdGhpcy5saXN0ZW5lciwgITEpIH0pLCBhLm9uKFwieGhyLWNiLXRpbWVcIiwgZnVuY3Rpb24gKHQsIGUsIG4pIHsgdGhpcy5jYlRpbWUgKz0gdCwgZSA/IHRoaXMub25sb2FkQ2FsbGVkID0gITAgOiB0aGlzLmNhbGxlZCArPSAxLCB0aGlzLmNhbGxlZCAhPT0gdGhpcy50b3RhbENicyB8fCAhdGhpcy5vbmxvYWRDYWxsZWQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBuLm9ubG9hZCB8fCB0aGlzLmVuZChuKSB9KSwgYS5vbihcInhoci1sb2FkLWFkZGVkXCIsIGZ1bmN0aW9uICh0LCBlKSB7IHZhciBuID0gXCJcIiArIGYodCkgKyAhIWU7IHRoaXMueGhyR3VpZHMgJiYgIXRoaXMueGhyR3VpZHNbbl0gJiYgKHRoaXMueGhyR3VpZHNbbl0gPSAhMCwgdGhpcy50b3RhbENicyArPSAxKSB9KSwgYS5vbihcInhoci1sb2FkLXJlbW92ZWRcIiwgZnVuY3Rpb24gKHQsIGUpIHsgdmFyIG4gPSBcIlwiICsgZih0KSArICEhZTsgdGhpcy54aHJHdWlkcyAmJiB0aGlzLnhockd1aWRzW25dICYmIChkZWxldGUgdGhpcy54aHJHdWlkc1tuXSwgdGhpcy50b3RhbENicyAtPSAxKSB9KSwgYS5vbihcImFkZEV2ZW50TGlzdGVuZXItZW5kXCIsIGZ1bmN0aW9uICh0LCBlKSB7IGUgaW5zdGFuY2VvZiBYTUxIdHRwUmVxdWVzdCAmJiBcImxvYWRcIiA9PT0gdFswXSAmJiBhLmVtaXQoXCJ4aHItbG9hZC1hZGRlZFwiLCBbdFsxXSwgdFsyXV0sIGUpIH0pLCBhLm9uKFwicmVtb3ZlRXZlbnRMaXN0ZW5lci1lbmRcIiwgZnVuY3Rpb24gKHQsIGUpIHsgZSBpbnN0YW5jZW9mIFhNTEh0dHBSZXF1ZXN0ICYmIFwibG9hZFwiID09PSB0WzBdICYmIGEuZW1pdChcInhoci1sb2FkLXJlbW92ZWRcIiwgW3RbMV0sIHRbMl1dLCBlKSB9KSwgYS5vbihcImZuLXN0YXJ0XCIsIGZ1bmN0aW9uICh0LCBlLCBuKSB7IGUgaW5zdGFuY2VvZiBYTUxIdHRwUmVxdWVzdCAmJiAoXCJvbmxvYWRcIiA9PT0gbiAmJiAodGhpcy5vbmxvYWQgPSAhMCksIChcImxvYWRcIiA9PT0gKHRbMF0gJiYgdFswXS50eXBlKSB8fCB0aGlzLm9ubG9hZCkgJiYgKHRoaXMueGhyQ2JTdGFydCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpKSkgfSksIGEub24oXCJmbi1lbmRcIiwgZnVuY3Rpb24gKHQsIGUpIHsgdGhpcy54aHJDYlN0YXJ0ICYmIGEuZW1pdChcInhoci1jYi10aW1lXCIsIFsobmV3IERhdGUpLmdldFRpbWUoKSAtIHRoaXMueGhyQ2JTdGFydCwgdGhpcy5vbmxvYWQsIGVdLCBlKSB9KSB9IH0sIHsgMTogXCJYTDdIQklcIiwgMjogMTEsIDM6IDksIDQ6IDUsIGVlOiBcIlFKZjNheFwiLCBoYW5kbGU6IFwiRDVEdUxQXCIsIGxvYWRlcjogXCJHOXowQmxcIiB9XSwgMTE6IFtmdW5jdGlvbiAodCwgZSkgeyBlLmV4cG9ydHMgPSBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLCBuID0gd2luZG93LmxvY2F0aW9uLCByID0ge307IGUuaHJlZiA9IHQsIHIucG9ydCA9IGUucG9ydDsgdmFyIG8gPSBlLmhyZWYuc3BsaXQoXCI6Ly9cIik7IHJldHVybiAhci5wb3J0ICYmIG9bMV0gJiYgKHIucG9ydCA9IG9bMV0uc3BsaXQoXCIvXCIpWzBdLnNwbGl0KFwiQFwiKS5wb3AoKS5zcGxpdChcIjpcIilbMV0pLCByLnBvcnQgJiYgXCIwXCIgIT09IHIucG9ydCB8fCAoci5wb3J0ID0gXCJodHRwc1wiID09PSBvWzBdID8gXCI0NDNcIiA6IFwiODBcIiksIHIuaG9zdG5hbWUgPSBlLmhvc3RuYW1lIHx8IG4uaG9zdG5hbWUsIHIucGF0aG5hbWUgPSBlLnBhdGhuYW1lLCByLnByb3RvY29sID0gb1swXSwgXCIvXCIgIT09IHIucGF0aG5hbWUuY2hhckF0KDApICYmIChyLnBhdGhuYW1lID0gXCIvXCIgKyByLnBhdGhuYW1lKSwgci5zYW1lT3JpZ2luID0gIWUuaG9zdG5hbWUgfHwgZS5ob3N0bmFtZSA9PT0gZG9jdW1lbnQuZG9tYWluICYmIGUucG9ydCA9PT0gbi5wb3J0ICYmIGUucHJvdG9jb2wgPT09IG4ucHJvdG9jb2wsIHIgfSB9LCB7fV0sIGdvczogW2Z1bmN0aW9uICh0LCBlKSB7IGUuZXhwb3J0cyA9IHQoXCI3ZVNERmhcIikgfSwge31dLCBcIjdlU0RGaFwiOiBbZnVuY3Rpb24gKHQsIGUpIHsgZnVuY3Rpb24gbih0LCBlLCBuKSB7IGlmIChyLmNhbGwodCwgZSkpIHJldHVybiB0W2VdOyB2YXIgbyA9IG4oKTsgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3Qua2V5cykgdHJ5IHsgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBlLCB7IHZhbHVlOiBvLCB3cml0YWJsZTogITAsIGVudW1lcmFibGU6ICExIH0pLCBvIH0gY2F0Y2ggKGkpIHsgfSByZXR1cm4gdFtlXSA9IG8sIG8gfSB2YXIgciA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7IGUuZXhwb3J0cyA9IG4gfSwge31dLCBENUR1TFA6IFtmdW5jdGlvbiAodCwgZSkgeyBmdW5jdGlvbiBuKHQsIGUsIG4pIHsgcmV0dXJuIHIubGlzdGVuZXJzKHQpLmxlbmd0aCA/IHIuZW1pdCh0LCBlLCBuKSA6IChvW3RdIHx8IChvW3RdID0gW10pLCB2b2lkIG9bdF0ucHVzaChlKSkgfSB2YXIgciA9IHQoXCJlZVwiKS5jcmVhdGUoKSwgbyA9IHt9OyBlLmV4cG9ydHMgPSBuLCBuLmVlID0gciwgci5xID0gbyB9LCB7IGVlOiBcIlFKZjNheFwiIH1dLCBoYW5kbGU6IFtmdW5jdGlvbiAodCwgZSkgeyBlLmV4cG9ydHMgPSB0KFwiRDVEdUxQXCIpIH0sIHt9XSwgWEw3SEJJOiBbZnVuY3Rpb24gKHQsIGUpIHsgZnVuY3Rpb24gbih0KSB7IHZhciBlID0gdHlwZW9mIHQ7IHJldHVybiAhdCB8fCBcIm9iamVjdFwiICE9PSBlICYmIFwiZnVuY3Rpb25cIiAhPT0gZSA/IC0xIDogdCA9PT0gd2luZG93ID8gMCA6IGkodCwgbywgZnVuY3Rpb24gKCkgeyByZXR1cm4gcisrIH0pIH0gdmFyIHIgPSAxLCBvID0gXCJuckBpZFwiLCBpID0gdChcImdvc1wiKTsgZS5leHBvcnRzID0gbiB9LCB7IGdvczogXCI3ZVNERmhcIiB9XSwgaWQ6IFtmdW5jdGlvbiAodCwgZSkgeyBlLmV4cG9ydHMgPSB0KFwiWEw3SEJJXCIpIH0sIHt9XSwgbG9hZGVyOiBbZnVuY3Rpb24gKHQsIGUpIHsgZS5leHBvcnRzID0gdChcIkc5ejBCbFwiKSB9LCB7fV0sIEc5ejBCbDogW2Z1bmN0aW9uICh0LCBlKSB7IGZ1bmN0aW9uIG4oKSB7IHZhciB0ID0gbC5pbmZvID0gTlJFVU0uaW5mbzsgaWYgKHQgJiYgdC5saWNlbnNlS2V5ICYmIHQuYXBwbGljYXRpb25JRCAmJiBmICYmIGYuYm9keSkgeyBzKGgsIGZ1bmN0aW9uIChlLCBuKSB7IGUgaW4gdCB8fCAodFtlXSA9IG4pIH0pLCBsLnByb3RvID0gXCJodHRwc1wiID09PSBwLnNwbGl0KFwiOlwiKVswXSB8fCB0LnNzbEZvckh0dHAgPyBcImh0dHBzOi8vXCIgOiBcImh0dHA6Ly9cIiwgYShcIm1hcmtcIiwgW1wib25sb2FkXCIsIGkoKV0pOyB2YXIgZSA9IGYuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTsgZS5zcmMgPSBsLnByb3RvICsgdC5hZ2VudCwgZi5ib2R5LmFwcGVuZENoaWxkKGUpIH0gfSBmdW5jdGlvbiByKCkgeyBcImNvbXBsZXRlXCIgPT09IGYucmVhZHlTdGF0ZSAmJiBvKCkgfSBmdW5jdGlvbiBvKCkgeyBhKFwibWFya1wiLCBbXCJkb21Db250ZW50XCIsIGkoKV0pIH0gZnVuY3Rpb24gaSgpIHsgcmV0dXJuIChuZXcgRGF0ZSkuZ2V0VGltZSgpIH0gdmFyIGEgPSB0KFwiaGFuZGxlXCIpLCBzID0gdCgxKSwgYyA9IHdpbmRvdywgZiA9IGMuZG9jdW1lbnQsIHUgPSBcImFkZEV2ZW50TGlzdGVuZXJcIiwgZCA9IFwiYXR0YWNoRXZlbnRcIiwgcCA9IChcIlwiICsgbG9jYXRpb24pLnNwbGl0KFwiP1wiKVswXSwgaCA9IHsgYmVhY29uOiBcImJhbS5uci1kYXRhLm5ldFwiLCBlcnJvckJlYWNvbjogXCJiYW0ubnItZGF0YS5uZXRcIiwgYWdlbnQ6IFwianMtYWdlbnQubmV3cmVsaWMuY29tL25yLTUxNS5taW4uanNcIiB9LCBsID0gZS5leHBvcnRzID0geyBvZmZzZXQ6IGkoKSwgb3JpZ2luOiBwLCBmZWF0dXJlczoge30gfTsgZlt1XSA/IChmW3VdKFwiRE9NQ29udGVudExvYWRlZFwiLCBvLCAhMSksIGNbdV0oXCJsb2FkXCIsIG4sICExKSkgOiAoZltkXShcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLCByKSwgY1tkXShcIm9ubG9hZFwiLCBuKSksIGEoXCJtYXJrXCIsIFtcImZpcnN0Ynl0ZVwiLCBpKCldKSB9LCB7IDE6IDIwLCBoYW5kbGU6IFwiRDVEdUxQXCIgfV0sIDIwOiBbZnVuY3Rpb24gKHQsIGUpIHsgZnVuY3Rpb24gbih0LCBlKSB7IHZhciBuID0gW10sIG8gPSBcIlwiLCBpID0gMDsgZm9yIChvIGluIHQpIHIuY2FsbCh0LCBvKSAmJiAobltpXSA9IGUobywgdFtvXSksIGkgKz0gMSk7IHJldHVybiBuIH0gdmFyIHIgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OyBlLmV4cG9ydHMgPSBuIH0sIHt9XSwgMjE6IFtmdW5jdGlvbiAodCwgZSkgeyBmdW5jdGlvbiBuKHQsIGUsIG4pIHsgZSB8fCAoZSA9IDApLCBcInVuZGVmaW5lZFwiID09IHR5cGVvZiBuICYmIChuID0gdCA/IHQubGVuZ3RoIDogMCk7IGZvciAodmFyIHIgPSAtMSwgbyA9IG4gLSBlIHx8IDAsIGkgPSBBcnJheSgwID4gbyA/IDAgOiBvKSA7ICsrciA8IG87KSBpW3JdID0gdFtlICsgcl07IHJldHVybiBpIH0gZS5leHBvcnRzID0gbiB9LCB7fV0sIDIyOiBbZnVuY3Rpb24gKHQsIGUpIHsgZnVuY3Rpb24gbih0KSB7IHJldHVybiAhKHQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0ICYmIHQuYXBwbHkgJiYgIXRbaV0pIH0gdmFyIHIgPSB0KFwiZWVcIiksIG8gPSB0KDEpLCBpID0gXCJuckB3cmFwcGVyXCIsIGEgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OyBlLmV4cG9ydHMgPSBmdW5jdGlvbiAodCkgeyBmdW5jdGlvbiBlKHQsIGUsIHIsIGEpIHsgZnVuY3Rpb24gbnJXcmFwcGVyKCkgeyB2YXIgbiwgaSwgcywgZjsgdHJ5IHsgaSA9IHRoaXMsIG4gPSBvKGFyZ3VtZW50cyksIHMgPSByICYmIHIobiwgaSkgfHwge30gfSBjYXRjaCAoZCkgeyB1KFtkLCBcIlwiLCBbbiwgaSwgYV0sIHNdKSB9IGMoZSArIFwic3RhcnRcIiwgW24sIGksIGFdLCBzKTsgdHJ5IHsgcmV0dXJuIGYgPSB0LmFwcGx5KGksIG4pIH0gY2F0Y2ggKHApIHsgdGhyb3cgYyhlICsgXCJlcnJcIiwgW24sIGksIHBdLCBzKSwgcCB9IGZpbmFsbHkgeyBjKGUgKyBcImVuZFwiLCBbbiwgaSwgZl0sIHMpIH0gfSByZXR1cm4gbih0KSA/IHQgOiAoZSB8fCAoZSA9IFwiXCIpLCBucldyYXBwZXJbaV0gPSAhMCwgZih0LCBucldyYXBwZXIpLCBucldyYXBwZXIpIH0gZnVuY3Rpb24gcyh0LCByLCBvLCBpKSB7IG8gfHwgKG8gPSBcIlwiKTsgdmFyIGEsIHMsIGMsIGYgPSBcIi1cIiA9PT0gby5jaGFyQXQoMCk7IGZvciAoYyA9IDA7IGMgPCByLmxlbmd0aDsgYysrKSBzID0gcltjXSwgYSA9IHRbc10sIG4oYSkgfHwgKHRbc10gPSBlKGEsIGYgPyBzICsgbyA6IG8sIGksIHMsIHQpKSB9IGZ1bmN0aW9uIGMoZSwgbiwgcikgeyB0cnkgeyB0LmVtaXQoZSwgbiwgcikgfSBjYXRjaCAobykgeyB1KFtvLCBlLCBuLCByXSkgfSB9IGZ1bmN0aW9uIGYodCwgZSkgeyBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5rZXlzKSB0cnkgeyB2YXIgbiA9IE9iamVjdC5rZXlzKHQpOyByZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBuLCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdFtuXSB9LCBzZXQ6IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0W25dID0gZSwgZSB9IH0pIH0pLCBlIH0gY2F0Y2ggKHIpIHsgdShbcl0pIH0gZm9yICh2YXIgbyBpbiB0KSBhLmNhbGwodCwgbykgJiYgKGVbb10gPSB0W29dKTsgcmV0dXJuIGUgfSBmdW5jdGlvbiB1KGUpIHsgdHJ5IHsgdC5lbWl0KFwiaW50ZXJuYWwtZXJyb3JcIiwgZSkgfSBjYXRjaCAobikgeyB9IH0gcmV0dXJuIHQgfHwgKHQgPSByKSwgZS5pblBsYWNlID0gcywgZS5mbGFnID0gaSwgZSB9IH0sIHsgMTogMjEsIGVlOiBcIlFKZjNheFwiIH1dIH0sIHt9LCBbXCJHOXowQmxcIiwgMywgMTAsIDRdKTtcbiAgICAgICAgOyBOUkVVTS5pbmZvID0geyBiZWFjb246IFwiYmFtLm5yLWRhdGEubmV0XCIsIGVycm9yQmVhY29uOiBcImJhbS5uci1kYXRhLm5ldFwiLCBsaWNlbnNlS2V5OiBsaWNlbnNlS2V5LCBhcHBsaWNhdGlvbklEOiBhcHBJZCwgc2E6IDEsIGFnZW50OiBcImpzLWFnZW50Lm5ld3JlbGljLmNvbS9uci01MTUubWluLmpzXCIgfVxuICAgICAgICA7XHJcbiAgICB9XHJcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3UmVsaWM7XG4iLCJcclxudmFyIHJheUd1biA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgIHZhciBhcGlLZXk7XHJcbiAgICBpZiAoY29uZmlnID09IG51bGwpIHtcclxuICAgICAgICBjb25maWcgPSB7fTtcclxuICAgIH1cclxuICAgIGFwaUtleSA9IGNvbmZpZy5SQVlHVU5fQVBJX0tFWTtcclxuICAgIGlmIChhcGlLZXkgJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICE9PSAnbG9jYWxob3N0Jykge1xyXG4gICAgICAgIGlmIChSYXlndW4gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBSYXlndW4uaW5pdChhcGlLZXksIHtcclxuICAgICAgICAgICAgICAgIGlnbm9yZTNyZFBhcnR5RXJyb3JzOiB0cnVlXHJcbiAgICAgICAgICAgIH0pLmF0dGFjaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUmF5Z3VuICE9IG51bGwgPyBSYXlndW4uZmlsdGVyU2Vuc2l0aXZlRGF0YShbJ3Bhc3N3b3JkJ10pIDogdm9pZCAwO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByYXlHdW47IiwiXG52YXIgdXNlclNuYXAgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICB2YXIgYXBpS2V5ID0gJzAzMmJhZjg3LTg1NDUtNGViYy1hNTU3LTkzNDg1OTM3MWZhNS5qcycsIHMsIHg7XG4gICAgaWYgKGNvbmZpZyA9PSBudWxsKSB7XHJcbiAgICAgICAgY29uZmlnID0ge307XHJcbiAgICB9XG4gICAgYXBpS2V5ID0gY29uZmlnLlVTRVJfU05BUF9BUElfS0VZO1xuICAgIGlmIChhcGlLZXkgJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICE9PSAnbG9jYWxob3N0Jykge1xyXG4gICAgICAgIHdpbmRvdy51c2Vyc25hcGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgbW9kZTogJ3JlcG9ydCcsXG4gICAgICAgICAgICBzaG9ydGN1dDogdHJ1ZSxcbiAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBVc2VyU25hcC5zZXRFbWFpbEJveChEb2MuYXBwLnVzZXIudXNlck5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcbiAgICAgICAgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICBzLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgICAgcy5hc3luYyA9IHRydWU7XG4gICAgICAgIHMuc3JjID0gJy8vYXBpLnVzZXJzbmFwLmNvbS9sb2FkLycgKyBhcGlLZXkgKyAnLmpzJztcbiAgICAgICAgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gICAgICAgIHJldHVybiB4LmFwcGVuZENoaWxkKHMpO1xyXG4gICAgfVxyXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVzZXJTbmFwO1xuXG5cbiIsInZhciByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygnbWV0YS1kaWFsb2cnLCAnPGRpdiBpZD1cImZ1bGwtd2lkdGhcIiBjbGFzcz1cIm1vZGFsIGNvbnRhaW5lciBmYWRlXCIgdGFiaW5kZXg9XCItMVwiPiA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+IDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvYnV0dG9uPiA8aDQgY2xhc3M9XCJtb2RhbC10aXRsZVwiPkZ1bGwgV2lkdGg8L2g0PiA8L2Rpdj4gPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj4gPG1ldGEtdGFibGU+PC9tZXRhLXRhYmxlPiA8L2Rpdj4gPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPiA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCI+Q2xvc2U8L2J1dHRvbj4gIDwvZGl2PiA8L2Rpdj4nLCBmdW5jdGlvbihvcHRzKSB7XG59KTsiLCJ2YXIgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ21ldGEtdGFibGUnLCAnPGRpdiBjbGFzcz1cInJvd1wiPiA8ZGl2IGNsYXNzPVwiY29sLW1kLTEyXCI+IDxkaXYgY2xhc3M9XCJwb3J0bGV0IGJveCBncmV5LWNhc2NhZGVcIj4gPGRpdiBjbGFzcz1cInBvcnRsZXQtdGl0bGVcIj4gPGRpdiBjbGFzcz1cImNhcHRpb25cIj4gPGkgY2xhc3M9XCJmYSBmYS1pY29uLXRoLWxhcmdlXCI+PC9pPk1hcHMgPC9kaXY+IDxkaXYgY2xhc3M9XCJhY3Rpb25zXCI+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc21cIj4gPGkgY2xhc3M9XCJmYSBmYS1wZW5jaWxcIj48L2k+IEFkZCA8L2E+IDxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIj4gPGEgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCIgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIj4gPGkgY2xhc3M9XCJmYSBmYS1jb2dzXCI+PC9pPiBUb29scyA8aSBjbGFzcz1cImZhIGZhLWFuZ2xlLWRvd25cIj48L2k+IDwvYT4gPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudSBwdWxsLXJpZ2h0XCI+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLXBlbmNpbFwiPjwvaT4gRWRpdCA8L2E+IDwvbGk+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLXRyYXNoLW9cIj48L2k+IERlbGV0ZSA8L2E+IDwvbGk+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLXNoYXJlXCI+PC9pPiBTaGFyZSA8L2E+IDwvbGk+IDxsaSBjbGFzcz1cImRpdmlkZXJcIj4gPC9saT4gPC91bD4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz1cInBvcnRsZXQtYm9keVwiPiA8ZGl2IGNsYXNzPVwidGFibGUtdG9vbGJhclwiPiA8L2Rpdj4gPHRhYmxlIGNsYXNzPVwidGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1ib3JkZXJlZCB0YWJsZS1ob3ZlclwiIGlkPVwic2FtcGxlXzFcIj4gPHRoZWFkPiA8dHI+IDx0aCBjbGFzcz1cInRhYmxlLWNoZWNrYm94XCI+IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cImdyb3VwLWNoZWNrYWJsZVwiIGRhdGEtc2V0PVwiI3NhbXBsZV8xIC5jaGVja2JveGVzXCI+IDwvdGg+IDx0aD4gVXNlciBJRCA8L3RoPiA8dGg+IE5hbWUgPC90aD4gPHRoPiBDcmVhdGVkIE9uIDwvdGg+IDx0aD4gU3RhdHVzIDwvdGg+IDwvdHI+IDwvdGhlYWQ+IDx0Ym9keT4gPHRyIGVhY2g9XCJ7IGRhdGEgfVwiIGNsYXNzPVwib2RkIGdyYWRlWFwiPiA8dGQ+IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cImNoZWNrYm94ZXNcIiB2YWx1ZT1cIjFcIj4gPC90ZD4gPHRkPnsgdXNlcl9pZCB9PC90ZD4gPHRkPnsgbmFtZSB9PC90ZD4gPHRkIGNsYXNzPVwiY2VudGVyXCI+IHsgY3JlYXRlZF9hdCB9IDwvdGQ+IDx0ZD4gPHNwYW4gY2xhc3M9XCJsYWJlbCBsYWJlbC1zbSBsYWJlbC1zdWNjZXNzXCI+IFByaXZhdGUgPC9zcGFuPiA8L3RkPiA8L3RyPiA8L3Rib2R5PiA8L3RhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4nLCBmdW5jdGlvbihvcHRzKSB7dmFyIF90aGlzID0gdGhpcztcblxudGhpcy5taXhpbignY29uZmlnJyk7XG50aGlzLnVybCA9IHRoaXMucGF0aEltZygpO1xuXG5Gcm9udEVuZC5NZXRhRmlyZS5nZXREYXRhKCdtYXBzL2xpc3QnKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cbiAgICB0cnkge1xuICAgICAgICBfdGhpcy5kYXRhID0gXy50b0FycmF5KGRhdGEpO1xuICAgICAgICBfdGhpcy51cGRhdGUoKTtcblxuICAgICAgICB2YXIgdGFibGUgPSAkKF90aGlzLnNhbXBsZV8xKTtcblxuICAgICAgICAvLyBiZWdpbiBmaXJzdCB0YWJsZVxuICAgICAgICB0YWJsZS5kYXRhVGFibGUoe1xuXG4gICAgICAgICAgICAvLyBVbmNvbW1lbnQgYmVsb3cgbGluZShcImRvbVwiIHBhcmFtZXRlcikgdG8gZml4IHRoZSBkcm9wZG93biBvdmVyZmxvdyBpc3N1ZSBpbiB0aGUgZGF0YXRhYmxlIGNlbGxzLiBUaGUgZGVmYXVsdCBkYXRhdGFibGUgbGF5b3V0XG4gICAgICAgICAgICAvLyBzZXR1cCB1c2VzIHNjcm9sbGFibGUgZGl2KHRhYmxlLXNjcm9sbGFibGUpIHdpdGggb3ZlcmZsb3c6YXV0byB0byBlbmFibGUgdmVydGljYWwgc2Nyb2xsKHNlZTogYXNzZXRzL2dsb2JhbC9wbHVnaW5zL2RhdGF0YWJsZXMvcGx1Z2lucy9ib290c3RyYXAvZGF0YVRhYmxlcy5ib290c3RyYXAuanMpLlxuICAgICAgICAgICAgLy8gU28gd2hlbiBkcm9wZG93bnMgdXNlZCB0aGUgc2Nyb2xsYWJsZSBkaXYgc2hvdWxkIGJlIHJlbW92ZWQuXG4gICAgICAgICAgICAvL1wiZG9tXCI6IFwiPCdyb3cnPCdjb2wtbWQtNiBjb2wtc20tMTInbD48J2NvbC1tZC02IGNvbC1zbS0xMidmPnI+dDwncm93JzwnY29sLW1kLTUgY29sLXNtLTEyJ2k+PCdjb2wtbWQtNyBjb2wtc20tMTIncD4+XCIsXG5cbiAgICAgICAgICAgIFwiYlN0YXRlU2F2ZVwiOiB0cnVlLCAvLyBzYXZlIGRhdGF0YWJsZSBzdGF0ZShwYWdpbmF0aW9uLCBzb3J0LCBldGMpIGluIGNvb2tpZS5cblxuICAgICAgICAgICAgXCJjb2x1bW5zXCI6IFt7XG4gICAgICAgICAgICAgICAgXCJvcmRlcmFibGVcIjogZmFsc2VcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBcIm9yZGVyYWJsZVwiOiB0cnVlXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgXCJvcmRlcmFibGVcIjogdHJ1ZVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIFwib3JkZXJhYmxlXCI6IHRydWVcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBcIm9yZGVyYWJsZVwiOiBmYWxzZVxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBcImxlbmd0aE1lbnVcIjogW1s1LCAxNSwgMjAsIC0xXSwgWzUsIDE1LCAyMCwgXCJBbGxcIl0gLy8gY2hhbmdlIHBlciBwYWdlIHZhbHVlcyBoZXJlXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciB0YWJsZVdyYXBwZXIgPSB0YWJsZS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCcjc2FtcGxlXzFfd3JhcHBlcicpO1xuXG4gICAgICAgIHRhYmxlLmZpbmQoJy5ncm91cC1jaGVja2FibGUnKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNldCA9IGpRdWVyeSh0aGlzKS5hdHRyKFwiZGF0YS1zZXRcIik7XG4gICAgICAgICAgICB2YXIgY2hlY2tlZCA9IGpRdWVyeSh0aGlzKS5pcyhcIjpjaGVja2VkXCIpO1xuICAgICAgICAgICAgalF1ZXJ5KHNldCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKFwiY2hlY2tlZFwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd0cicpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cihcImNoZWNrZWRcIiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3RyJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBqUXVlcnkudW5pZm9ybS51cGRhdGUoc2V0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGFibGUub24oJ2NoYW5nZScsICd0Ym9keSB0ciAuY2hlY2tib3hlcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygndHInKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGFibGVXcmFwcGVyLmZpbmQoJy5kYXRhVGFibGVzX2xlbmd0aCBzZWxlY3QnKS5hZGRDbGFzcyhcImZvcm0tY29udHJvbCBpbnB1dC14c21hbGwgaW5wdXQtaW5saW5lXCIpOyAvLyBtb2RpZnkgdGFibGUgcGVyIHBhZ2UgZHJvcGRvd25cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHdpbmRvdy5Gcm9udEVuZC5lcnJvcihlKTtcbiAgICB9XG59KTtcbn0pOyIsInZhciByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1hY3Rpb25zJywgJzxkaXYgY2xhc3M9XCJwYWdlLWFjdGlvbnNcIj4gPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiPiA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biByZWQtaGF6ZSBidG4tc20gZHJvcGRvd24tdG9nZ2xlXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIGRhdGEtaG92ZXI9XCJkcm9wZG93blwiIGRhdGEtY2xvc2Utb3RoZXJzPVwidHJ1ZVwiPiA8c3BhbiBjbGFzcz1cImhpZGRlbi1zbSBoaWRkZW4teHNcIj5BY3Rpb25zJm5ic3A7PC9zcGFuPjxpIGNsYXNzPVwiZmEgZmEtYW5nbGUtZG93blwiPjwvaT4gPC9idXR0b24+IDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIiByb2xlPVwibWVudVwiPiA8bGkgY2xhc3M9XCJzdGFydCBhY3RpdmUgXCI+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJmYSBmYS1wZW5jaWwtc3F1YXJlLW9cIj4gTmV3IE1hcCA8L2k+IDwvYT4gPC9saT4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtcHJpbnRcIj4gRXhwb3J0L1ByaW50IDwvaT4gPC9hPiA8L2xpPiA8bGk+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJmYSBmYS10YWdcIj4gVGFnIE1hcCA8L2k+IDwvYT4gPC9saT4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtY29weVwiPjwvaT4gRHVwbGljYXRlIE1hcCA8L2E+IDwvbGk+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLXVzZXJzXCI+PC9pPiBTaGFyZSBNYXAgPC9hPiA8L2xpPiA8bGkgY2xhc3M9XCJkaXZpZGVyXCI+IDwvbGk+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLWdlYXJcIj48L2k+IFNldHRpbmdzIDwvYT4gPC9saT4gPC91bD4gPC9kaXY+IDxzcGFuPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwO1BhZ2UgVGl0bGUgPC9zcGFuPiA8L2Rpdj4nLCBmdW5jdGlvbihvcHRzKSB7XG59KTsiLCJ2YXIgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtYm9keScsICc8ZGl2IGNsYXNzPVwicGFnZS1oZWFkZXItZml4ZWQgcGFnZS1zaWRlYmFyLWNsb3NlZC1oaWRlLWxvZ28gcGFnZS1zaWRlYmFyLWNsb3NlZC1oaWRlLWxvZ29cIj4gPHBhZ2UtaGVhZGVyPjwvcGFnZS1oZWFkZXI+IDxkaXYgY2xhc3M9XCJjbGVhcmZpeFwiPiA8L2Rpdj4gPHBhZ2UtY29udGFpbmVyPjwvcGFnZS1jb250YWluZXI+IDxwYWdlLWZvb3Rlcj48L3BhZ2UtZm9vdGVyPiA8L2Rpdj4gPG1ldGEtZGlhbG9nPjwvbWV0YS1kaWFsb2c+JywgZnVuY3Rpb24ob3B0cykge1xufSk7IiwidmFyIHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLWNvbnRhaW5lcicsICc8ZGl2IGNsYXNzPVwicGFnZS1jb250YWluZXJcIj4gPHBhZ2Utc2lkZWJhcj48L3BhZ2Utc2lkZWJhcj4gPHBhZ2UtY29udGVudD48L3BhZ2UtY29udGVudD4gPC9kaXY+JywgZnVuY3Rpb24ob3B0cykge1xufSk7IiwidmFyIHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLWNvbnRlbnQnLCAnPGRpdiBjbGFzcz1cInBhZ2UtY29udGVudC13cmFwcGVyXCI+IDxkaXYgY2xhc3M9XCJwYWdlLWNvbnRlbnRcIj4gPGRpdiBjbGFzcz1cInBhZ2UtaGVhZFwiPiA8ZGl2IGlkPVwiYXBwLWNvbnRhaW5lclwiPiA8ZGl2IGlkPVwiZGlhZ3JhbVwiIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7IGJhY2tncm91bmQtY29sb3I6IHdoaXRlOyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiA4MCU7IFwiPjwvZGl2PiA8ZGl2IGlkPVwib3ZlcnZpZXctZGlhZ3JhbVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+JywgZnVuY3Rpb24ob3B0cykge1xufSk7IiwidmFyIHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLWZvb3RlcicsICc8ZGl2IGNsYXNzPVwicGFnZS1mb290ZXJcIj4gPGRpdiBjbGFzcz1cInBhZ2UtZm9vdGVyLWlubmVyXCI+IDIwMTUgJmNvcHk7IENhYnJlcmEgUmVzZWFyY2ggTGFiIDwvZGl2PiA8ZGl2IGNsYXNzPVwic2Nyb2xsLXRvLXRvcFwiPiA8aSBjbGFzcz1cImljb24tYXJyb3ctdXBcIj48L2k+IDwvZGl2PiA8L2Rpdj4nLCBmdW5jdGlvbihvcHRzKSB7XG59KTsiLCJ2YXIgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtaGVhZGVyJywgJzxkaXYgaWQ9XCJoZWFkZXItdG9wXCIgY2xhc3M9XCJwYWdlLWhlYWRlciBuYXZiYXIgbmF2YmFyLWZpeGVkLXRvcFwiPiA8ZGl2IGlkPVwiaGVhZGVyLWNvbnRlbnRcIiBjbGFzcz1cInBhZ2UtaGVhZGVyLWlubmVyXCI+IDxwYWdlLWxvZ28+PC9wYWdlLWxvZ28+IDxwYWdlLWFjdGlvbnM+PC9wYWdlLWFjdGlvbnM+IDxkaXYgY2xhc3M9XCJwYWdlLXRvcFwiPiA8cGFnZS1zZWFyY2g+PC9wYWdlLXNlYXJjaD4gPHBhZ2UtdG9wbWVudT48L3BhZ2UtdG9wbWVudT4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4nLCBmdW5jdGlvbihvcHRzKSB7XG59KTsiLCJ2YXIgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtbG9nbycsICc8ZGl2IGNsYXNzPVwicGFnZS1sb2dvXCI+IDxhIGhyZWY9XCJpbmRleC5odG1sXCI+IDxpbWcgc3JjPVwibWV0YW1hcC9hc3NldHMvaW1nL21ldGFtYXBfY2xvdWQucG5nXCIgYWx0PVwibG9nb1wiIGNsYXNzPVwibG9nby1kZWZhdWx0XCI+IDwvYT4gPGRpdiBjbGFzcz1cIm1lbnUtdG9nZ2xlciBzaWRlYmFyLXRvZ2dsZXJcIj4gIDwvZGl2PiA8L2Rpdj4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwibWVudS10b2dnbGVyIHJlc3BvbnNpdmUtdG9nZ2xlclwiIGRhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIiBkYXRhLXRhcmdldD1cIi5uYXZiYXItY29sbGFwc2VcIj4gPC9hPicsIGZ1bmN0aW9uKG9wdHMpIHtcbn0pOyIsInZhciByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1zZWFyY2gnLCAnIDxmb3JtIGNsYXNzPVwic2VhcmNoLWZvcm1cIiBhY3Rpb249XCJleHRyYV9zZWFyY2guaHRtbFwiIG1ldGhvZD1cIkdFVFwiPiA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXBcIj4gPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2wgaW5wdXQtc21cIiBwbGFjZWhvbGRlcj1cIlNlYXJjaC4uLlwiIG5hbWU9XCJxdWVyeVwiPiA8c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLWJ0blwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJidG4gc3VibWl0XCI+PGkgY2xhc3M9XCJmYSBmYS1zZWFyY2hcIj48L2k+PC9hPiA8L3NwYW4+IDwvZGl2PiA8L2Zvcm0+JywgZnVuY3Rpb24ob3B0cykge1xufSk7IiwidmFyIHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLXNpZGViYXInLCAnPGRpdiBjbGFzcz1cInBhZ2Utc2lkZWJhci13cmFwcGVyXCI+IDxkaXYgY2xhc3M9XCJwYWdlLXNpZGViYXIgbmF2YmFyLWNvbGxhcHNlIGNvbGxhcHNlXCI+IDx1bCBjbGFzcz1cInBhZ2Utc2lkZWJhci1tZW51IFwiIGRhdGEta2VlcC1leHBhbmRlZD1cImZhbHNlXCIgZGF0YS1hdXRvLXNjcm9sbD1cInRydWVcIiBkYXRhLXNsaWRlLXNwZWVkPVwiMjAwXCI+IDxsaSBvbmNsaWNrPVwieyBwYXJlbnQuY2xpY2sgfVwiIGVhY2g9XCJ7IGRhdGEgfVwiPiA8YSBpZj1cInsgaWNvbiB9XCIgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cInsgaWNvbiB9XCIgcmlvdC1zdHlsZT1cImNvbG9yOiN7IGNvbG9yIH07XCI+PC9pPiA8c3BhbiBjbGFzcz1cInRpdGxlXCI+eyB0aXRsZSB9PC9zcGFuPiA8c3BhbiBjbGFzcz1cInsgYXJyb3c6IG1lbnUubGVuZ3RoIH1cIj48L3NwYW4+IDwvYT4gPHVsIGlmPVwieyBtZW51Lmxlbmd0aCB9XCIgY2xhc3M9XCJzdWItbWVudVwiPiA8bGkgZWFjaD1cInsgbWVudSB9XCI+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJ7IGljb24gfVwiPjwvaT4gPHNwYW4gY2xhc3M9XCJ0aXRsZVwiPnsgdGl0bGUgfTwvc3Bhbj4gPC9hPiA8L2xpPiA8L3VsPiA8L2xpPiA8L3VsPiA8L2Rpdj4gPC9kaXY+JywgZnVuY3Rpb24ob3B0cykge1xuXG50aGlzLmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKCdmb28nKTtcbn07XG5cbnZhciB0aGF0ID0gdGhpcztcbnRoYXQuZGF0YSA9IFtdO1xudGhhdC5NZXRhTWFwID0gTWV0YU1hcDtcbnRoYXQuTWV0YU1hcC5NZXRhRmlyZS5nZXREYXRhKCdtZXRhbWFwL3NpZGViYXInKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgdGhhdC5kYXRhID0gXy5maWx0ZXIoXy5zb3J0QnkoZGF0YSwgJ29yZGVyJyksIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIHZhciBpbmNsdWRlID0gZC5hcmNoaXZlICE9IHRydWU7XG4gICAgICAgIGlmIChpbmNsdWRlICYmIGQubWVudSAmJiBkLm1lbnUpIHtcbiAgICAgICAgICAgIGQubWVudSA9IF8uZmlsdGVyKF8uc29ydEJ5KGQubWVudSwgJ29yZGVyJyksIGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG0uYXJjaGl2ZSAhPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluY2x1ZGU7XG4gICAgfSk7XG4gICAgdGhhdC51cGRhdGUoKTtcbn0pO1xufSk7IiwidmFyIHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLXRvcG1lbnUnLCAnPGRpdiBjbGFzcz1cInRvcC1tZW51XCI+IDx1bCBjbGFzcz1cIm5hdiBuYXZiYXItbmF2IHB1bGwtcmlnaHRcIj4gPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPiAgPGxpIGNsYXNzPVwiZHJvcGRvd24gZHJvcGRvd24tZXh0ZW5kZWQgZHJvcGRvd24tbm90aWZpY2F0aW9uIGRyb3Bkb3duXCIgaWQ9XCJoZWFkZXJfbm90aWZpY2F0aW9uX2JhclwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgZGF0YS1ob3Zlcj1cImRyb3Bkb3duXCIgZGF0YS1jbG9zZS1vdGhlcnM9XCJ0cnVlXCI+IDxpIGNsYXNzPVwiZmEgZmEtYmVsbC1vXCI+PC9pPiA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLXN1Y2Nlc3NcIj4gMSA8L3NwYW4+IDwvYT4gPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPiA8bGkgY2xhc3M9XCJleHRlcm5hbFwiPiA8aDM+IDxzcGFuIGNsYXNzPVwiYm9sZFwiPjEgcGVuZGluZzwvc3Bhbj4gbm90aWZpY2F0aW9uIDwvaDM+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj52aWV3IGFsbDwvYT4gPC9saT4gPGxpPiA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51LWxpc3Qgc2Nyb2xsZXJcIiBzdHlsZT1cImhlaWdodDogMjUwcHg7XCIgZGF0YS1oYW5kbGUtY29sb3I9XCIjNjM3MjgzXCI+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8c3BhbiBjbGFzcz1cInRpbWVcIj5qdXN0IG5vdzwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJkZXRhaWxzXCI+IDxzcGFuIGNsYXNzPVwibGFiZWwgbGFiZWwtc20gbGFiZWwtaWNvbiBsYWJlbC1zdWNjZXNzXCI+IDxpIGNsYXNzPVwiZmEgZmEtcGx1c1wiPjwvaT4gPC9zcGFuPiBOZXcgdXNlciByZWdpc3RlcmVkLiA8L3NwYW4+IDwvYT4gPC9saT4gPC91bD4gPC9saT4gPC91bD4gPC9saT4gPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPiAgPGxpIGNsYXNzPVwiZHJvcGRvd24gZHJvcGRvd24tZXh0ZW5kZWQgZHJvcGRvd24tbm90aWZpY2F0aW9uIGRyb3Bkb3duXCIgaWQ9XCJoZWFkZXJfcG9pbnRzX2JhclwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgZGF0YS1ob3Zlcj1cImRyb3Bkb3duXCIgZGF0YS1jbG9zZS1vdGhlcnM9XCJ0cnVlXCI+IDxpIGNsYXNzPVwiZmEgZmEtdHJvcGh5XCI+PC9pPiA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLXN1Y2Nlc3NcIj4gMyA8L3NwYW4+IDwvYT4gPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPiA8bGkgY2xhc3M9XCJleHRlcm5hbFwiPiA8aDM+IDxzcGFuIGNsYXNzPVwiYm9sZFwiPjMgbmV3PC9zcGFuPiBhY2hpZXZlbWVudHMgPC9oMz4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPnZpZXcgYWxsPC9hPiA8L2xpPiA8bGk+IDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUtbGlzdCBzY3JvbGxlclwiIHN0eWxlPVwiaGVpZ2h0OiAyNTBweDtcIiBkYXRhLWhhbmRsZS1jb2xvcj1cIiM2MzcyODNcIj4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxzcGFuIGNsYXNzPVwidGltZVwiPmp1c3Qgbm93PC9zcGFuPiA8c3BhbiBjbGFzcz1cImRldGFpbHNcIj4gPHNwYW4gY2xhc3M9XCJsYWJlbCBsYWJlbC1zbSBsYWJlbC1pY29uIGxhYmVsLXN1Y2Nlc3NcIj4gPGkgY2xhc3M9XCJmYSBmYS1wbHVzXCI+PC9pPiA8L3NwYW4+IENyZWF0ZWQgYSBwZXJzcGVjdGl2ZSBjaXJjbGUhIDwvc3Bhbj4gPC9hPiA8L2xpPiA8L3VsPiA8L2xpPiA8L3VsPiA8L2xpPiAgPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPiAgPGxpIGNsYXNzPVwiZHJvcGRvd25cIiBpZD1cImhlYWRlcl9kYXNoYm9hcmRfYmFyXCI+IDxhIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlXCIgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLWhvbWVcIj48L2k+IDwvYT4gPC9saT4gPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPiAgPGxpIGNsYXNzPVwiZHJvcGRvd24gZHJvcGRvd24tZXh0ZW5kZWQgZHJvcGRvd24tbm90aWZpY2F0aW9uIGRyb3Bkb3duXCIgaWQ9XCJoZWFkZXJfaGVscF9iYXJcIj4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIGRhdGEtaG92ZXI9XCJkcm9wZG93blwiIGRhdGEtY2xvc2Utb3RoZXJzPVwidHJ1ZVwiPiA8aSBjbGFzcz1cImZhIGZhLWdyYWR1YXRpb24tY2FwXCI+PC9pPiA8L2E+IDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIj4gPGxpPiA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51LWxpc3Qgc2Nyb2xsZXJcIiBzdHlsZT1cImhlaWdodDogMjcwcHg7XCIgZGF0YS1oYW5kbGUtY29sb3I9XCIjNjM3MjgzXCI+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLWxpZ2h0YnVsYi1vXCI+PC9pPiA8c3BhbiBjbGFzcz1cInRpdGxlXCI+VHV0b3JpYWw8L3NwYW4+IDwvYT4gPC9saT4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtcXVlc3Rpb25cIj48L2k+IDxzcGFuIGNsYXNzPVwidGl0bGVcIj5GQVE8L3NwYW4+IDwvYT4gPC9saT4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtbGlmZS1yaW5nXCI+PC9pPiA8c3BhbiBjbGFzcz1cInRpdGxlXCI+U3VwcG9ydDwvc3Bhbj4gPC9hPiA8L2xpPiA8bGkgb25jbGljaz1cIlVzZXJTbmFwLm9wZW5SZXBvcnRXaW5kb3coKTtcIj4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiID4gPGkgY2xhc3M9XCJmYSBmYS1mcm93bi1vXCI+PC9pPiA8c3BhbiBjbGFzcz1cInRpdGxlXCI+RmVlZGJhY2s8L3NwYW4+IDwvYT4gPC9saT4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtYnVsbHNleWVcIj48L2k+IDxzcGFuIGNsYXNzPVwidGl0bGVcIj5JbmxpbmUgVHJhaW5pbmc8L3NwYW4+IDwvYT4gPC9saT4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtbGFwdG9wXCI+PC9pPiA8c3BhbiBjbGFzcz1cInRpdGxlXCI+T25saW5lIFRyYWluaW5nPC9zcGFuPiA8L2E+IDwvbGk+IDwvdWw+IDwvbGk+IDwvdWw+IDwvbGk+IDxsaSBjbGFzcz1cInNlcGFyYXRvciBoaWRlXCI+IDwvbGk+IDxsaSBjbGFzcz1cImRyb3Bkb3duIGRyb3Bkb3duLXVzZXIgZHJvcGRvd25cIj4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIGRhdGEtaG92ZXI9XCJkcm9wZG93blwiIGRhdGEtY2xvc2Utb3RoZXJzPVwidHJ1ZVwiPiA8c3BhbiBjbGFzcz1cInVzZXJuYW1lIHVzZXJuYW1lLWhpZGUtb24tbW9iaWxlXCI+IHsgdXNlcm5hbWUgfSA8L3NwYW4+IDxpbWcgYWx0PVwiXCIgaGVpZ2h0PVwiMzlcIiB3aWR0aD1cIjM5XCIgY2xhc3M9XCJpbWctY2lyY2xlXCIgcmlvdC1zcmM9XCJ7IHBpY3R1cmUgfVwiPiA8L2E+IDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUgZHJvcGRvd24tbWVudS1kZWZhdWx0XCI+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLXVzZXJcIj48L2k+IE15IFByb2ZpbGUgPC9hPiA8L2xpPiA8bGkgb25jbGljaz1cInsgbGlua0FjY291bnQgfVwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtY29tcHJlc3NcIj48L2k+IExpbmsgQWNjb3VudCA8L2E+IDwvbGk+IDxsaSBvbmNsaWNrPVwieyBsb2dvdXQgfVwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtc2lnbi1vdXRcIj48L2k+IExvZyBPdXQgPC9hPiA8L2xpPiA8L3VsPiA8L2xpPiA8L3VsPiA8L2Rpdj4nLCBmdW5jdGlvbihvcHRzKSB7XG50aGlzLnVzZXJuYW1lID0gJyc7XG50aGlzLnBpY3R1cmUgPSAnJztcblxudmFyIHRoYXQgPSB0aGlzO1xubG9jYWxmb3JhZ2UuZ2V0SXRlbSgncHJvZmlsZScpLnRoZW4oZnVuY3Rpb24gKHByb2ZpbGUpIHtcbiAgICB0aGF0LnVzZXJuYW1lID0gcHJvZmlsZS5uaWNrbmFtZTtcbiAgICB0aGF0LnBpY3R1cmUgPSBwcm9maWxlLnBpY3R1cmUgfHwgJ21ldGFtYXAvYXNzZXRzL2FkbWluL2xheW91dDQvaW1nL2F2YXRhci5qcGcnO1xuICAgIHRoYXQudXBkYXRlKCk7XG59KTtcblxudGhpcy5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgTWV0YU1hcC5BdXRoMC5sb2dvdXQoKTtcbn07XG5cbnRoaXMubGlua0FjY291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgTWV0YU1hcC5BdXRoMC5saW5rQWNjb3VudCgpO1xufTtcbn0pOyJdfQ==
