(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.MetaMap = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

require('babel/polyfill');
require('core-js');
window.$ = window.jQuery = require('jquery');
require('jquery-ui');
require('bootstrap');
window.riot = require('riot');
window._ = require('lodash');
window.Promise = require('bluebird');

var Auth0 = require('./js/app/auth0');
var User = require('./js/app/user.js');
var Router = require('./js/app/Router.js');
var Eventer = require('./js/app/Eventer.js');
var PageFactory = require('./js/pages/PageFactory.js');
var NProgress = window.NProgress;
var Config = require('./js/app//Config.js');
var ga = require('./js/integrations/google.js');
var shims = require('./js/tools/shims.js');
var AirbrakeClient = require('airbrake-js');
var Integrations = require('./js/app/Integrations');

var MetaMap = (function () {
    function MetaMap() {
        _classCallCheck(this, MetaMap);

        this.Config = new Config();
        this.config = this.Config.config;
        this.MetaFire = this.Config.MetaFire;
        this.Eventer = new Eventer(this);
        this.airbrake = new AirbrakeClient({ projectId: 114900, projectKey: 'dc9611db6f77120ccecd1a273745a5ae' });
        this.onReady();
        var that = this;
        Promise.onPossiblyUnhandledRejection(function (error) {
            that.error(error);
            return this;
        });
    }

    _createClass(MetaMap, [{
        key: 'onReady',
        value: function onReady() {
            var _this = this;

            if (!this._onReady) {
                this._onReady = new Promise(function (fulfill, reject) {
                    _this.Config.onReady().then(function (config) {
                        _this.Auth0 = new Auth0(config.auth0);
                        fulfill();
                    })['catch'](function (err) {
                        reject(err);
                    });
                });
            }
            return this._onReady;
        }
    }, {
        key: 'init',
        value: function init() {
            var _this2 = this;

            this.onReady().then(function () {
                _this2.Auth0.login().then(function (profile) {
                    _this2.MetaFire.login().then(function (auth) {
                        _this2.User = new User(profile, auth, _this2.Eventer, _this2.MetaFire);
                        _this2.Integrations = new Integrations(_this2, _this2.User);
                        _this2.User.onReady().then(function (user) {
                            _this2.PageFactory = new PageFactory(_this2.Eventer, _this2.MetaFire);
                            _this2.Router = new Router(_this2);
                            _this2.Router.init();
                            _this2.Integrations.init();
                        });
                    });
                });
            });
        }
    }, {
        key: 'log',
        value: function log(val) {
            this.Integrations.sendEvent(val, 'event', 'log', 'label');
            window.console.info(val);
        }
    }, {
        key: 'error',
        value: function error(val) {
            window.console.error(val);
            this.Integrations.sendEvent(val, 'exception');
            this.airbrake.notify(val);
        }
    }, {
        key: 'logout',
        value: function logout() {
            this.MetaFire.logout();
            this.Auth0.logout();
        }
    }]);

    return MetaMap;
})();

var mm = new MetaMap();
module.exports = mm;

},{"./js/app//Config.js":13,"./js/app/Eventer.js":14,"./js/app/Integrations":16,"./js/app/Router.js":17,"./js/app/auth0":18,"./js/app/user.js":19,"./js/integrations/google.js":66,"./js/pages/PageFactory.js":67,"./js/tools/shims.js":87,"airbrake-js":undefined,"babel/polyfill":"babel/polyfill","bluebird":undefined,"bootstrap":undefined,"core-js":undefined,"jquery":undefined,"jquery-ui":undefined,"lodash":undefined,"riot":"riot"}],2:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');
var CONSTANTS = require('../constants/constants');

var Action = (function (_ActionBase) {
    _inherits(Action, _ActionBase);

    function Action() {
        _classCallCheck(this, Action);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(Action.prototype), 'constructor', this).apply(this, params);
        this._actions = {};
    }

    _createClass(Action, [{
        key: '_getAction',
        value: function _getAction(action) {
            var ret = this._actions[action];
            if (!ret) {
                var Method = null;
                switch (action) {
                    case CONSTANTS.ACTIONS.MAP:
                        Method = require('./OpenMap.js');
                        break;
                    case CONSTANTS.ACTIONS.NEW_MAP:
                        Method = require('./NewMap.js');
                        break;
                    case CONSTANTS.ACTIONS.COPY_MAP:
                        Method = require('./CopyMap.js');
                        break;
                    case CONSTANTS.ACTIONS.DELETE_MAP:
                        Method = require('./DeleteMap.js');
                        break;
                    case CONSTANTS.ACTIONS.MY_MAPS:
                        Method = require('./MyMaps.js');
                        break;
                    case CONSTANTS.ACTIONS.LOGOUT:
                        Method = require('./Logout.js');
                        break;
                    case CONSTANTS.ACTIONS.TERMS_AND_CONDITIONS:
                        Method = require('./Terms.js');
                        break;
                        break;
                    case CONSTANTS.ACTIONS.FEEDBACK:
                        Method = require('./Feedback');
                        break;
                    default:
                        Method = require('./Home.js');
                        break;
                }
                if (Method) {
                    ret = new Method(this.metaFire, this.eventer, this.pageFactory);
                    this._actions[action] = ret;
                }
            }
            return ret;
        }
    }, {
        key: 'act',
        value: function act(action) {
            _get(Object.getPrototypeOf(Action.prototype), 'act', this).call(this);
            var method = this._getAction(action);
            if (method) {
                for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                    params[_key2 - 1] = arguments[_key2];
                }

                return method.act.apply(method, params);
            }
        }
    }]);

    return Action;
})(ActionBase);

module.exports = Action;

},{"../constants/constants":48,"./ActionBase.js":3,"./CopyMap.js":4,"./DeleteMap.js":5,"./Feedback":6,"./Home.js":7,"./Logout.js":8,"./MyMaps.js":9,"./NewMap.js":10,"./OpenMap.js":11,"./Terms.js":12}],3:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var CONSTANTS = require('../constants/constants');

var ActionBase = (function () {
    function ActionBase(metaFire, eventer, pageFactory) {
        _classCallCheck(this, ActionBase);

        this.metaFire = metaFire;
        this.eventer = eventer;
        this.pageFactory = pageFactory;
        this.metaMap = require('../../MetaMap.js');
    }

    _createClass(ActionBase, [{
        key: 'act',
        value: function act() {}
    }, {
        key: 'toggleSidebar',
        value: function toggleSidebar() {
            if (this.sidebarOpen) {
                this.openSidebar();
            } else {
                this.closeSidebar();
            }
        }
    }, {
        key: 'openSidebar',
        value: function openSidebar() {
            this.sidebarOpen = true;
            this.eventer['do'](CONSTANTS.EVENTS.SIDEBAR_OPEN);
        }
    }, {
        key: 'closeSidebar',
        value: function closeSidebar() {
            this.sidebarOpen = false;
            this.eventer['do'](CONSTANTS.EVENTS.SIDEBAR_CLOSE);
        }
    }]);

    return ActionBase;
})();

module.exports = ActionBase;

},{"../../MetaMap.js":1,"../constants/constants":48}],4:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');
var CONSTANTS = require('../constants/constants');

var CopyMap = (function (_ActionBase) {
    _inherits(CopyMap, _ActionBase);

    function CopyMap() {
        _classCallCheck(this, CopyMap);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(CopyMap.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(CopyMap, [{
        key: 'act',
        value: function act(id) {
            var _get2,
                _this = this;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(CopyMap.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            if (!id) {
                return new Error('Must have a map in order to copy.');
            }
            this.metaFire.getData('' + CONSTANTS.ROUTES.MAPS_LIST + id).then(function (oldMap) {
                var newMap = {
                    created_at: new Date(),
                    owner: _this.metaMap.User.userId,
                    name: _this.appendCopy(oldMap.name)
                };
                _this.metaFire.getData('' + CONSTANTS.ROUTES.MAPS_DATA + id).then(function (oldMapData) {
                    var pushState = _this.metaFire.pushData(newMap, '' + CONSTANTS.ROUTES.MAPS_LIST);
                    var mapId = pushState.key();
                    _this.metaFire.setData(oldMapData, '' + CONSTANTS.ROUTES.MAPS_DATA + mapId);
                    _this.metaMap.Router.to('map/' + mapId);
                });
            });
            return true;
        }
    }, {
        key: 'appendCopy',
        value: function appendCopy(str) {
            var ret = str;
            if (!_.contains(str, '(Copy')) {
                ret = ret + ' (Copy 1)';
            } else {
                var mess = str.split(' ');
                var cnt = 2;
                if (mess[mess.length - 2] == '(Copy') {
                    var grbg = mess[mess.length - 1];
                    if (grbg) {
                        grbg = grbg.replace(')', '');
                        cnt = +grbg + 1;
                        ret = mess.slice(0, mess.length - 2).join(' ');
                    }
                }
                ret += ' (Copy ' + cnt + ')';
            }
            return ret;
        }
    }]);

    return CopyMap;
})(ActionBase);

module.exports = CopyMap;

},{"../constants/constants":48,"./ActionBase.js":3}],5:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');
var CONSTANTS = require('../constants/constants');
var _ = require('lodash');

var DeleteMap = (function (_ActionBase) {
    _inherits(DeleteMap, _ActionBase);

    function DeleteMap() {
        _classCallCheck(this, DeleteMap);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(DeleteMap.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(DeleteMap, [{
        key: 'act',
        value: function act(id) {
            var _get2;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(DeleteMap.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            DeleteMap.deleteAll([id]);
            return true;
        }
    }], [{
        key: 'deleteAll',
        value: function deleteAll(ids) {
            var path = arguments.length <= 1 || arguments[1] === undefined ? CONSTANTS.PAGES.HOME : arguments[1];

            var metaMap = require('../../MetaMap.js');
            try {
                _.each(ids, function (id) {
                    metaMap.MetaFire.deleteData('' + CONSTANTS.ROUTES.MAPS_DATA + id);
                    metaMap.MetaFire.deleteData('' + CONSTANTS.ROUTES.MAPS_LIST + id);
                });
            } catch (e) {} finally {
                metaMap.Router.to(path);
            }
        }
    }]);

    return DeleteMap;
})(ActionBase);

module.exports = DeleteMap;

},{"../../MetaMap.js":1,"../constants/constants":48,"./ActionBase.js":3,"lodash":undefined}],6:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');

var Feedback = (function (_ActionBase) {
    _inherits(Feedback, _ActionBase);

    function Feedback() {
        _classCallCheck(this, Feedback);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(Feedback.prototype), 'constructor', this).apply(this, params);
        this.userSnap = window.UserSnap;
    }

    _createClass(Feedback, [{
        key: 'act',
        value: function act() {
            _get(Object.getPrototypeOf(Feedback.prototype), 'act', this).call(this);
            this.userSnap.openReportWindow();
            return true;
        }
    }]);

    return Feedback;
})(ActionBase);

module.exports = Feedback;

},{"./ActionBase.js":3}],7:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var riot = require('riot');
var ActionBase = require('./ActionBase.js');
var CONSTANTS = require('../constants/constants');
var home = require('../tags/pages/home');

var Home = (function (_ActionBase) {
    _inherits(Home, _ActionBase);

    function Home() {
        _classCallCheck(this, Home);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(Home.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(Home, [{
        key: 'act',
        value: function act(id) {
            var _get2, _eventer;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(Home.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            $('#' + CONSTANTS.ELEMENTS.APP_CONTAINER).empty();
            riot.mount(document.getElementById(CONSTANTS.ELEMENTS.APP_CONTAINER), CONSTANTS.TAGS.HOME);
            (_eventer = this.eventer)['do'].apply(_eventer, [CONSTANTS.EVENTS.PAGE_NAME, { name: 'Home' }].concat(params));
            this.closeSidebar();
            return true;
        }
    }]);

    return Home;
})(ActionBase);

module.exports = Home;

},{"../constants/constants":48,"../tags/pages/home":83,"./ActionBase.js":3,"riot":"riot"}],8:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');
var CONSTANTS = require('../constants/constants');
var _ = require('lodash');

var Logout = (function (_ActionBase) {
    _inherits(Logout, _ActionBase);

    function Logout() {
        _classCallCheck(this, Logout);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(Logout.prototype), 'constructor', this).apply(this, params);
        this.metaMap = require('../../MetaMap.js');
    }

    _createClass(Logout, [{
        key: 'act',
        value: function act(id) {
            var _get2;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(Logout.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            this.metaMap.logout();
            return true;
        }
    }]);

    return Logout;
})(ActionBase);

module.exports = Logout;

},{"../../MetaMap.js":1,"../constants/constants":48,"./ActionBase.js":3,"lodash":undefined}],9:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var riot = require('riot');
var ActionBase = require('./ActionBase.js');
var CONSTANTS = require('../constants/constants');
var home = require('../tags/pages/my-maps');

var MyMaps = (function (_ActionBase) {
    _inherits(MyMaps, _ActionBase);

    function MyMaps() {
        _classCallCheck(this, MyMaps);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(MyMaps.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(MyMaps, [{
        key: 'act',
        value: function act(id) {
            var _get2, _eventer, _eventer2;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(MyMaps.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            $('#' + CONSTANTS.ELEMENTS.APP_CONTAINER).empty();
            riot.mount(document.getElementById(CONSTANTS.ELEMENTS.APP_CONTAINER), CONSTANTS.TAGS.MY_MAPS);
            (_eventer = this.eventer)['do'].apply(_eventer, [CONSTANTS.PAGES.MY_MAPS, { id: id }].concat(params));
            (_eventer2 = this.eventer)['do'].apply(_eventer2, [CONSTANTS.EVENTS.PAGE_NAME, { name: 'My Maps' }].concat(params));
            this.closeSidebar();

            return true;
        }
    }]);

    return MyMaps;
})(ActionBase);

module.exports = MyMaps;

},{"../constants/constants":48,"../tags/pages/my-maps":84,"./ActionBase.js":3,"riot":"riot"}],10:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActionBase = require('./ActionBase.js');
var CONSTANTS = require('../constants/constants');

var NewMap = (function (_ActionBase) {
    _inherits(NewMap, _ActionBase);

    function NewMap() {
        _classCallCheck(this, NewMap);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(NewMap.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(NewMap, [{
        key: 'act',
        value: function act() {
            var _this = this;

            _get(Object.getPrototypeOf(NewMap.prototype), 'act', this).call(this);
            this.metaFire.getData('' + CONSTANTS.ROUTES.MAPS_NEW_MAP).then(function (blankMap) {
                var newMap = {
                    created_at: new Date(),
                    owner: _this.metaMap.User.userId,
                    name: 'Untitled Map'
                };
                var pushState = _this.metaFire.pushData(newMap, '' + CONSTANTS.ROUTES.MAPS_LIST);
                var mapId = pushState.key();
                _this.metaFire.setData(blankMap, '' + CONSTANTS.ROUTES.MAPS_DATA + mapId);
                _this.metaMap.Router.to('map/' + mapId);
            });
            return true;
        }
    }]);

    return NewMap;
})(ActionBase);

module.exports = NewMap;

},{"../constants/constants":48,"./ActionBase.js":3}],11:[function(require,module,exports){
/// <reference path="../../../../typings/riotjs/riotjs.d.ts" />

'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var riot = require('riot');
var ActionBase = require('./ActionBase.js');
var CONSTANTS = require('../constants/constants');
var metaCanvas = require('../tags/canvas/meta-canvas.js');

var OpenMap = (function (_ActionBase) {
    _inherits(OpenMap, _ActionBase);

    function OpenMap() {
        _classCallCheck(this, OpenMap);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(OpenMap.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(OpenMap, [{
        key: 'act',
        value: function act(id) {
            var _get2,
                _this = this;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(OpenMap.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            $('#' + CONSTANTS.ELEMENTS.APP_CONTAINER).empty();
            this.metaFire.getData('' + CONSTANTS.ROUTES.MAPS_LIST + id).then(function (map) {
                if (map) {
                    var _eventer, _eventer2, _eventer3;

                    riot.mount(document.getElementById(CONSTANTS.ELEMENTS.APP_CONTAINER), CONSTANTS.TAGS.META_CANVAS);
                    map.id = id;
                    (_eventer = _this.eventer)['do'].apply(_eventer, [CONSTANTS.EVENTS.NAV, 'map', map].concat(params));
                    (_eventer2 = _this.eventer)['do'].apply(_eventer2, [CONSTANTS.EVENTS.PAGE_NAME, map].concat(params));
                    (_eventer3 = _this.eventer)['do'].apply(_eventer3, [CONSTANTS.EVENTS.MAP, map].concat(params));
                    _this.openSidebar();
                }
            });
            return true;
        }
    }]);

    return OpenMap;
})(ActionBase);

module.exports = OpenMap;

},{"../constants/constants":48,"../tags/canvas/meta-canvas.js":68,"./ActionBase.js":3,"riot":"riot"}],12:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var riot = require('riot');
var ActionBase = require('./ActionBase.js');
var CONSTANTS = require('../constants/constants');
var terms = require('../tags/pages/terms');

var Terms = (function (_ActionBase) {
    _inherits(Terms, _ActionBase);

    function Terms() {
        _classCallCheck(this, Terms);

        for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
        }

        _get(Object.getPrototypeOf(Terms.prototype), 'constructor', this).apply(this, params);
    }

    _createClass(Terms, [{
        key: 'act',
        value: function act(id) {
            var _get2, _eventer;

            for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                params[_key2 - 1] = arguments[_key2];
            }

            (_get2 = _get(Object.getPrototypeOf(Terms.prototype), 'act', this)).call.apply(_get2, [this, id].concat(params));
            $('#' + CONSTANTS.ELEMENTS.APP_CONTAINER).empty();
            riot.mount(document.getElementById(CONSTANTS.ELEMENTS.APP_CONTAINER), CONSTANTS.TAGS.TERMS);
            (_eventer = this.eventer)['do'].apply(_eventer, [CONSTANTS.EVENTS.PAGE_NAME, { name: 'Terms and Conditions' }].concat(params));
            this.closeSidebar();
            return true;
        }
    }]);

    return Terms;
})(ActionBase);

module.exports = Terms;

},{"../constants/constants":48,"../tags/pages/terms":85,"./ActionBase.js":3,"riot":"riot"}],13:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var MetaFire = require('./Firebase');
var _ = require('lodash');

var config = function config() {
    var SITES = {
        CRL: {
            db: 'meta-map-production'
        },
        CRL_STAGING: {
            db: 'meta-map-staging'
        },
        THINK_WATER: {
            db: 'thinkwater-production'
        }
    };

    var ret = {
        host: window.location.host,
        site: {}
    };
    var segments = ret.host.split('.');
    var first = segments[0];
    if (first === 'www') {
        first = segments[1];
    }
    first = first.split(':')[0];

    switch (first.toLowerCase()) {
        case 'localhost':
        case 'meta-map-staging':
            ret.site = SITES.CRL_STAGING;
            break;

        case 'crlab':
        case 'frontend':
            ret.site = SITES.CRL;
            break;

        case 'thinkwater-production':
        case 'thinkwater-staging':
        case 'thinkwater':
            ret.site = SITES.THINK_WATER;
            break;
    }

    return ret;
};

var Config = (function () {
    function Config(tags) {
        _classCallCheck(this, Config);

        this.tags = tags;
        this.config = config();
        this.MetaFire = new MetaFire(this.config);
    }

    _createClass(Config, [{
        key: 'onReady',
        value: function onReady() {
            var _this = this;

            if (!this._onReady) {
                this._onReady = new Promise(function (fulfill, reject) {
                    _this.MetaFire.on('config', function (data) {
                        _this.MetaFire.on('metamap/canvas', function (canvas) {
                            try {
                                _.extend(_this.config.site, data);
                                _this.config.canvas = canvas;
                                document.title = _this.config.site.title;
                                var favico = document.getElementById('favico');
                                favico.setAttribute('href', _this.config.site.imageUrl + 'favicon.ico');
                                _this.init();
                                fulfill(_this.config.site);
                            } catch (e) {
                                reject(e);
                            }
                        });
                    });
                });
            }

            return this._onReady;
        }
    }, {
        key: 'init',
        value: function init() {
            return this.onReady();
        }
    }, {
        key: 'site',
        get: function get() {
            return 'frontend';
        }
    }]);

    return Config;
})();

module.exports = Config;

},{"./Firebase":15,"lodash":undefined}],14:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var riot = require('riot');
var _ = require('lodash');

var Eventer = (function () {
    function Eventer(metaMap) {
        _classCallCheck(this, Eventer);

        riot.observable(this);

        this.events = {};
    }

    _createClass(Eventer, [{
        key: 'every',
        value: function every(event, reaction) {
            var _this = this;

            //let callback = reaction;
            //if (this.events[event]) {
            //    let piggyback = this.events[event];
            //    callback = (...params) => {
            //        piggyback(...params);
            //        reaction(...params);
            //    }
            //}
            var events = event.split(' ');
            _.each(events, function () {
                _this.events[event] = reaction;
                _this.on(event, reaction);
            });
        }
    }, {
        key: 'forget',
        value: function forget(event, callback) {
            var _this2 = this;

            var events = event.split(' ');
            _.each(events, function () {
                if (!callback) {
                    delete _this2.events[event];
                    _this2.off(event);
                } else {
                    _this2.off(event, callback);
                }
            });
        }
    }, {
        key: 'do',
        value: function _do(event) {
            var _this3 = this;

            for (var _len = arguments.length, params = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                params[_key - 1] = arguments[_key];
            }

            var events = event.split(' ');
            _.each(events, function () {
                _this3.trigger.apply(_this3, [event].concat(params));
            });
        }
    }]);

    return Eventer;
})();

module.exports = Eventer;

},{"lodash":undefined,"riot":"riot"}],15:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Firebase = window.Firebase;
var Promise = require('bluebird');
var localforage = require('localforage');

var MetaFire = (function () {
    function MetaFire(config) {
        _classCallCheck(this, MetaFire);

        this.config = config;
        this.fb = new Firebase('https://' + this.config.site.db + '.firebaseio.com');
    }

    _createClass(MetaFire, [{
        key: 'login',
        value: function login() {
            var _this = this;

            if (!this._login) {
                this._login = new Promise(function (fulfill, reject) {
                    window.MetaMap.Auth0.getSession().then(function (profile) {

                        window.MetaMap.Auth0.lock.getClient().getDelegationToken({
                            target: _this.config.site.auth0.api,
                            id_token: profile.id_token,
                            api_type: 'firebase'
                        }, function (err, delegationResult) {
                            if (err) {
                                reject(err);
                            } else {
                                profile.firebase_token = delegationResult.id_token;
                                _this.firebase_token = delegationResult.id_token;
                                localforage.setItem('firebase_token', _this.firebase_token);
                                _this.fb.authWithCustomToken(_this.firebase_token, function (error, authData) {
                                    if (error) {
                                        _this.metaMap.error(error);
                                        reject(error);
                                    } else {
                                        fulfill(authData);
                                    }
                                });
                            }
                        });
                    })['catch'](function (err) {
                        console.log(err);
                        debugger;
                    });
                });
                this._onReady = this._login;
            }
            return this._login;
        }
    }, {
        key: 'onReady',
        value: function onReady() {
            if (!this._onReady) {
                this._onReady = new Promise(function (fulfill, reject) {
                    fulfill();
                });
            }
            return this._onReady;
        }
    }, {
        key: 'getChild',
        value: function getChild(path) {
            return this.fb.child(path);
        }
    }, {
        key: 'getData',
        value: function getData(path) {
            var _this2 = this;

            return this.onReady().then(function () {
                var child = _this2.fb;
                if (path) {
                    child = _this2.getChild(path);
                }
                return new Promise(function (resolve, reject) {

                    child.once('value', function (snapshot) {
                        var data = snapshot.val();
                        try {
                            resolve(data);
                        } catch (e) {
                            _this2.metaMap.error(e);
                        }
                    }, function (error) {
                        _this2.error(e, path);
                        reject(error);
                    });
                });
            });
        }
    }, {
        key: 'on',
        value: function on(path, callback) {
            var _this3 = this;

            var event = arguments.length <= 2 || arguments[2] === undefined ? 'value' : arguments[2];

            if (path) {
                this.onReady().then(function () {
                    var child = _this3.getChild(path);
                    var method = function method(snapshot) {
                        try {
                            if (!snapshot.exists()) {
                                child.off(event, method);
                                throw new Error('There is no data at ' + path);
                            }
                            var data = snapshot.val();
                            callback(data);
                        } catch (e) {
                            child.off(event, method);
                            _this3.error(e, path);
                        }
                    };
                    child.on(event, method);
                });
            }
        }
    }, {
        key: 'off',
        value: function off(path, method, callback) {
            var _this4 = this;

            if (method === undefined) method = 'value';

            if (path) {
                this.onReady().then(function () {
                    var child = _this4.getChild(path);
                    if (callback) {
                        child.off(method, callback);
                    } else {
                        child.off(method);
                    }
                });
            }
        }
    }, {
        key: 'setData',
        value: function setData(data, path) {
            var _this5 = this;

            var child = this.fb;
            if (path) {
                child = this.getChild(path);
            }
            try {
                return child.set(data, function (e) {
                    if (e) {
                        _this5.error(e, path);
                    }
                });
            } catch (e) {
                this.error(e, path);
            }
        }
    }, {
        key: 'deleteData',
        value: function deleteData(path) {
            return this.setData(null, path);
        }
    }, {
        key: 'pushData',
        value: function pushData(data, path) {
            var _this6 = this;

            var child = this.fb;
            if (path) {
                child = this.getChild(path);
            }
            try {
                return child.push(data, function (e) {
                    if (e) {
                        _this6.error(e, path);
                    }
                });
            } catch (e) {
                this.error(e, path);
            }
        }
    }, {
        key: 'setDataInTransaction',
        value: function setDataInTransaction(data, path, callback) {
            var _this7 = this;

            var child = this.fb;
            if (path) {
                child = this.getChild(path);
            }
            try {
                return child.transaction(function (currentValue) {
                    try {
                        return data;
                    } catch (e) {
                        _this7.error(e, path);
                    }
                });
            } catch (e) {
                this.error(e, path);
            }
        }
    }, {
        key: 'error',
        value: function error(e, path) {
            if (e) {
                this.metaMap.error(e);
            }
            if (path) {
                this.metaMap.error({ message: 'Permission denied to ' + path });
            }
        }
    }, {
        key: 'logout',
        value: function logout() {
            this._login = null;
            this._onReady = null;
            localforage.removeItem('firebase_token');
            this.fb.unauth();
        }
    }, {
        key: 'metaMap',
        get: function get() {
            if (!this._metaMap) {
                this._metaMap = require('../../MetaMap.js');
            }
            return this._metaMap;
        }
    }]);

    return MetaFire;
})();

module.exports = MetaFire;

},{"../../MetaMap.js":1,"bluebird":undefined,"localforage":undefined}],16:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var _ = require('lodash');

var Twiiter = require('../integrations/Twitter');
var Facebook = require('../integrations/Facebook');

var Integrations = (function () {
	function Integrations(metaMap, user) {
		_classCallCheck(this, Integrations);

		this.config = metaMap.config;
		this.metaMap = metaMap;
		this.user = user;
		this._features = {
			google: require('../integrations/Google'),
			usersnap: require('../integrations/UserSnap'),
			intercom: require('../integrations/Intercom'),
			zendesk: require('../integrations/Zendesk'),
			addthis: require('../integrations/AddThis'),
			newrelic: require('../integrations/NewRelic')
		};
	}

	_createClass(Integrations, [{
		key: 'init',
		value: function init() {
			var _this = this;

			_.each(this._features, function (Feature, name) {
				if (Feature) {
					try {
						var config = _this.config.site[name];
						_this[name] = new Feature(config, _this.user);
						_this[name].init();
						_this[name].setUser();
					} catch (e) {
						_this.metaMap.error(e);
					}
				}
			});
		}
	}, {
		key: 'setUser',
		value: function setUser() {
			var _this2 = this;

			_.each(this._features, function (Feature, name) {
				if (name) {
					_this2[name].setUser();
				}
			});
		}
	}, {
		key: 'sendEvent',
		value: function sendEvent(val) {
			var _this3 = this;

			for (var _len = arguments.length, params = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
				params[_key - 1] = arguments[_key];
			}

			_.each(this._features, function (Feature, name) {
				if (name) {
					var _name;

					(_name = _this3[name]).sendEvent.apply(_name, [val].concat(params));
				}
			});
		}
	}, {
		key: 'updatePath',
		value: function updatePath() {}
	}, {
		key: 'logout',
		value: function logout() {
			var _this4 = this;

			_.each(this._features, function (Feature, name) {
				if (name) {
					try {
						_this4[name].logout();
					} catch (e) {
						_this4.metaMap.error(e);
					}
				}
			});
		}
	}]);

	return Integrations;
})();

module.exports = Integrations;

},{"../integrations/AddThis":57,"../integrations/Facebook":58,"../integrations/Google":59,"../integrations/Intercom":60,"../integrations/NewRelic":61,"../integrations/Twitter":62,"../integrations/UserSnap":63,"../integrations/Zendesk":64,"lodash":undefined}],17:[function(require,module,exports){
/// <reference path="../../../../typings/riotjs/riotjs.d.ts" />
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var riot = require('riot');
var CONSTANTS = require('../constants/constants');

var Router = (function () {
    function Router(metaMap) {
        _classCallCheck(this, Router);

        this.integrations = metaMap.Integrations;
        this.user = metaMap.User;
        this.PageFactory = metaMap.PageFactory;
        this.eventer = metaMap.Eventer;
        this.isHidden = false;
    }

    _createClass(Router, [{
        key: 'init',
        value: function init() {
            var _this = this;

            riot.route.start();
            riot.route(function (target) {
                for (var _len = arguments.length, params = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {
                    params[_key - 3] = arguments[_key];
                }

                var _PageFactory;

                var id = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];
                var action = arguments.length <= 2 || arguments[2] === undefined ? '' : arguments[2];

                _this.path = _this.getPath(target);

                _this.toggleMain(true, _this.path);
                (_PageFactory = _this.PageFactory).navigate.apply(_PageFactory, [_this.path, id, action].concat(params));

                _this.eventer['do']('history', window.location.hash);
            });
            this.to(this.currentPage);
        }
    }, {
        key: 'getPreviousPage',
        value: function getPreviousPage() {
            var pageNo = arguments.length <= 0 || arguments[0] === undefined ? 2 : arguments[0];

            var page = 'home';
            var pageCnt = this.user.history.length;
            if (pageCnt > 0) {
                page = this.getPath(this.user.history[pageCnt - pageNo]);
            }
            return page;
        }
    }, {
        key: 'track',
        value: function track(path) {
            this.integrations.updatePath(path);
        }
    }, {
        key: 'toggleMain',
        value: function toggleMain(hide, path) {
            this.track(path);
            if (hide) {
                this.isHidden = true;
            } else {
                this.isHidden = false;
            }
        }
    }, {
        key: 'getPath',
        value: function getPath(path) {
            if (path) {
                while (path.startsWith('!') || path.startsWith('#')) {
                    path = path.substr(1);
                }
            }
            return path;
        }
    }, {
        key: 'to',
        value: function to(path) {
            path = this.getPath(path);
            if (path) {
                this.toggleMain(true, path);
                riot.route('' + path);
            }
        }
    }, {
        key: 'back',
        value: function back() {
            var path = 'home';
            var pageCnt = this.user.history.length;
            if (pageCnt > 1 && (this.currentPage != 'mymaps' || this.currentPage != this.previousPage)) {
                path = this.previousPage;
                var backNo = 2;
                while (!this.isTracked(path) && this.user.history[backNo]) {
                    backNo += 1;
                    path = this.getPreviousPage(backNo);
                }
            }
            return this.to(path);
        }
    }, {
        key: 'isTracked',
        value: function isTracked(path) {
            var pth = this.getPath(path);
            return _.any(this.doNotTrack, function (p) {
                return !pth.startsWith(p);
            });
        }
    }, {
        key: 'currentPage',
        get: function get() {
            var page = window.location.hash || 'home';
            if (!this.isTracked(page)) {
                var pageCnt = this.user.history.length;
                if (pageCnt > 0) {
                    page = this.getPath(this.user.history[pageCnt - 1]);
                }
            }
            return page;
        }
    }, {
        key: 'currentPath',
        get: function get() {
            return this.path;
        }
    }, {
        key: 'previousPage',
        get: function get() {
            return this.getPreviousPage(2);
        }
    }, {
        key: 'doNotTrack',
        get: function get() {
            if (!this._doNotTrack) {
                this._doNotTrack = [CONSTANTS.ACTIONS.DELETE_MAP, CONSTANTS.ACTIONS.COPY_MAP, CONSTANTS.ACTIONS.LOGOUT, CONSTANTS.ACTIONS.NEW_MAP, CONSTANTS.ACTIONS.FEEDBACK];
            }
            return this._doNotTrack;
        }
    }]);

    return Router;
})();

module.exports = Router;

},{"../constants/constants":48,"riot":"riot"}],18:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Auth0Lock = window.Auth0Lock; //require('auth0-lock');
var localforage = require('localforage');
var _ = require('lodash');
var Promise = require('bluebird');

var Auth0 = (function () {
    function Auth0(config, metaMap) {
        _classCallCheck(this, Auth0);

        this.config = config;
        this.metaMap = metaMap;
        this.lock = new Auth0Lock(config.api, config.app);
        this.lock.on('loading ready', function () {});
    }

    _createClass(Auth0, [{
        key: 'login',
        value: function login() {
            var _this = this;

            if (!this._login) {
                this._login = new Promise(function (fulfill, reject) {
                    var showLogin = function showLogin() {
                        _this.lock.show({
                            closable: false,
                            loginAfterSignup: true,
                            authParams: {
                                scope: 'openid offline_access'
                            }
                        }, function (err, profile, id_token, ctoken, opt, refresh_token) {
                            if (err) {
                                _this.onFail(err, reject);
                            } else {
                                localforage.setItem('id_token', id_token);
                                localforage.setItem('profile', profile);

                                _this.ctoken = profile.ctoken = ctoken;
                                _this.id_token = profile.id_token = id_token;
                                _this.profile = profile;
                                _this.refresh_token = profile.refresh_token = refresh_token;
                                _this._getSession = fulfill(profile);
                            }
                        });
                    };
                    _this.getSession().then(function (profile) {
                        if (profile) {
                            fulfill(profile);
                        } else {
                            showLogin();
                        }
                    })['catch'](function (err) {
                        showLogin();
                    });
                });
            }
            return this._login;
        }
    }, {
        key: 'linkAccount',
        value: function linkAccount() {
            this.lock.show({
                callbackURL: location.href.replace(location.hash, ''),
                dict: {
                    signin: {
                        title: 'Link with another account'
                    }
                },
                authParams: {
                    access_token: this.ctoken
                }
            });
        }
    }, {
        key: 'onFail',
        value: function onFail(err, reject) {
            this.metaMap.error(err);
            if (reject) {
                reject(err);
                this.logout();
            }
        }
    }, {
        key: 'getSession',
        value: function getSession() {
            var _this2 = this;

            if (this.profile) {
                this._getSession = new Promise(function (fulfill, reject) {
                    fulfill(_this2.profile);
                });
            } else if (!this._getSession) {
                this._getSession = new Promise(function (fulfill, reject) {
                    return localforage.getItem('id_token').then(function (id_token) {
                        if (id_token) {
                            return _this2.lock.getProfile(id_token, function (err, profile) {
                                if (err) {
                                    _this2.onFail(err, reject);
                                } else {
                                    localforage.setItem('id_token', id_token);
                                    localforage.setItem('profile', profile);
                                    _this2.id_token = profile.id_token = id_token;
                                    _this2.profile = profile;
                                    return fulfill(profile);
                                }
                            });
                        } else {
                            return reject(new Error('No session'));
                        }
                    });
                });
            }
            return this._getSession;
        }
    }, {
        key: 'logout',
        value: function logout() {
            var _this3 = this;

            localforage.removeItem('id_token').then(function () {
                return localforage.removeItem('profile');
            }).then(function () {
                _this3.profile = null;
                _this3.ctoken = null;
                _this3.id_token = null;
                _this3.refresh_token = null;
                _this3._login = null;
                _this3._getSession = null;
                window.location.reload();
            });
        }
    }]);

    return Auth0;
})();

module.exports = Auth0;

},{"bluebird":undefined,"localforage":undefined,"lodash":undefined}],19:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var uuid = require('../tools/uuid.js');
var Common = require('../tools/Common');

var User = (function () {
    function User(profile, auth, eventer, metaFire) {
        _classCallCheck(this, User);

        this.auth = auth;
        this.eventer = eventer;
        this.metaFire = metaFire;
        this.userKey = uuid();
        this.onReady();
        this.metaMap = require('../../MetaMap');
    }

    _createClass(User, [{
        key: 'onReady',
        value: function onReady() {
            var _this = this;

            if (!this._onReady) {
                (function () {
                    var trackHistory = _.once(function () {
                        _this.eventer.every('history', function (page) {
                            if (_this.history.length == 0 || page != _this.history[_this.history.length - 1]) {
                                _this.history.push(page);
                                _this.metaFire.setData(_this.history, 'users/' + _this.auth.uid + '/history');
                            }
                        });
                    });
                    _this._onReady = new Promise(function (fulfill, reject) {
                        _this.metaFire.on('users/' + _this.auth.uid, function (user) {
                            if (user) {
                                try {
                                    if (!user.history) {
                                        user.history = [];
                                    }
                                    _this.profile = user;
                                    trackHistory();
                                } catch (e) {
                                    _this.metaMap.error(e);
                                }
                                fulfill(user);
                            }
                        });
                    });
                })();
            }
            return this._onReady;
        }
    }, {
        key: 'saveUserEditorOptions',
        value: function saveUserEditorOptions(options) {
            var data = {
                user: {
                    editor_options: JSON.stringify(options)
                }
            };
        }
    }, {
        key: '_identity',
        get: function get() {
            var ret = {};
            if (this.profile && this.profile.identity) {
                ret = this.profile.identity;
            }
            return ret;
        }
    }, {
        key: 'createdOn',
        get: function get() {
            if (null == this._createdOn) {
                if (this._identity.created_at) {
                    var dt = new Date(this._identity.created_at);
                    this._createdOn = {
                        date: dt,
                        ticks: Common.getTicksFromDate(dt)
                    };
                }
            }
            return this._createdOn || { date: null, ticks: null };
        }
    }, {
        key: 'displayName',
        get: function get() {
            var ret = this.fullName;
            if (ret) {
                ret = ret.split(' ')[0];
            }
            if (!ret && this._identity.nickname) {
                ret = this._identity.nickname;
            }

            return ret;
        }
    }, {
        key: 'fullName',
        get: function get() {
            var ret = '';
            if (this._identity.name) {
                ret = this._identity.name;
            }
            return ret;
        }
    }, {
        key: 'email',
        get: function get() {
            var ret = '';
            if (this._identity.email) {
                ret = this._identity.email;
            }
            return ret;
        }
    }, {
        key: 'picture',
        get: function get() {
            var ret = '';
            if (this._identity.picture) {
                ret = this._identity.picture;
            }
            return ret;
        }
    }, {
        key: 'userId',
        get: function get() {
            return this.auth.uid;
        }
    }, {
        key: 'isAdmin',
        get: function get() {
            var ret = false;
            if (this._identity.roles) {
                ret = this._identity.roles.indexOf('admin') !== -1;
            }
            return ret;
        }
    }, {
        key: 'history',
        get: function get() {
            return this.profile.history || [];
        }
    }]);

    return User;
})();

module.exports = User;

},{"../../MetaMap":1,"../tools/Common":86,"../tools/uuid.js":88}],20:[function(require,module,exports){
'use strict';

var SandbankEditor = require('./sbEditor');
// functions handling analytics
// analytics display is in views/maps/_analytics_tab_map and _analytics_tab_thing
SandbankEditor.Analytics = function ($scope, $http, map) {

    var self = this;

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.ui.currentTabIs(map.ui.TAB_ID_ANALYTICS_THING)) {
                self.updateContextualAnalytics();
            }
        }
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.ui.TAB_ID_ANALYTICS_THING) {
            // opening thing analytics tab
            self.updateContextualAnalytics();
        }
    };

    // this gets populated by map.loadMapExtraData, on load and after every autosave
    this.mapAnalytics = null;

    // --------- contextual analytics --------------
    // - these are all calculated here, unlike map analytics which are calculated on the server and connected with badges and points

    // this gets calculated by updateContextualAnalytics
    this.contextualAnalytics = {
        thingName: '',

        // thing stuff
        distinctFrom: 0,
        intentionallyDistinctFrom: 0,
        partOf: 0,
        includesParts: 0,
        relatedTo: 0,
        isRelationship: 0,
        lookingAt: 0,
        lookedAtFrom: 0,

        // R stuff
        rFromThingName: '',
        rToThingName: '',
        isRThing: false,
        isRSystem: false,
        isRPoint: false,
        isRView: false
    };

    this.updateContextualAnalytics = function () {
        //console.log('updateContextualAnalytics');
        if (!map.ui.currentTabIs(map.ui.TAB_ID_ANALYTICS_THING)) {
            return;
        }

        var diagram = map.diagram;
        var part = diagram.selection.first();
        var a = self.contextualAnalytics;

        if (part && part instanceof go.Group) {
            var thing = part;

            // thing name
            a.thingName = thing.data.text;

            // distinct from
            a.distinctFrom = _.where(diagram.model.nodeDataArray, { isGroup: true }).length - 1;

            // part of
            var level = 0;
            var thing2 = thing;
            while (thing2 = getContainingGroup(thing2)) {
                level++;
            }
            a.partOf = level;

            // includes parts
            a.includesParts = countGroups(thing);

            // related to / looking at / looked at from / intentionally distinct from
            a.relatedTo = 0;
            a.lookingAt = 0;
            a.lookedAtFrom = 0;
            a.intentionallyDistinctFrom = 0;
            var links = thing.linksConnected;
            var rConnectedThingKeys = [];
            while (links.next()) {
                var link = links.value;
                // P link
                if (link.data.category == 'P') {
                    if (link.fromNode == thing) {
                        a.lookingAt++;
                    } else if (link.toNode == thing) {
                        a.lookedAtFrom++;
                    }
                }
                // D link
                else if (link.data.category == 'D') {
                        a.intentionallyDistinctFrom++;
                    }
                    // R link
                    else if (!link.data.category) {
                            // track keys of related things so we don't count them multiple times
                            if (link.fromNode == thing) {
                                rConnectedThingKeys.push(link.toNode.data.key);
                            } else if (link.toNode == thing) {
                                rConnectedThingKeys.push(link.fromNode.data.key);
                            }
                        }
            }
            a.relatedTo = _.uniq(rConnectedThingKeys).length;

            // isRelationship
            a.isRelationship = thing.isLinkLabel;
        } else if (part && part instanceof go.Link) {
            var rel = part;

            // thing names
            a.rFromThingName = rel.fromNode.data.text;
            a.rToThingName = rel.toNode.data.text;

            // is R thing
            a.isRThing = rel.isLabeledLink;

            // is R system
            a.isRSystem = rel.isLabeledLink && countGroups(rel.labelNodes.first()) > 0;

            // is R point
            a.isRPoint = rel.isLabeledLink && isPoint(rel.labelNodes.first());

            // is R view
            a.isRView = rel.isLabeledLink && isView(rel.labelNodes.first());
        }
    };

    // returns either the containingGroup or the rThingContainingGroup, whichever is non-null
    function getContainingGroup(group) {
        return group.containingGroup || getRThingContainingGroup(group);
    }

    // if group is an R-thing between two sibling parts of a whole, returns the whole; else returns null
    function getRThingContainingGroup(group) {
        if (group.isLinkLabel) {
            var fromParent = group.labeledLink.fromNode.containingGroup;
            var toParent = group.labeledLink.toNode.containingGroup;
            if (fromParent !== null && toParent !== null && fromParent == toParent) {
                return fromParent;
            }
        }
        return null;
    }

    // counts the member parts of the group that are groups, recursively (not including the group itself)
    function countGroups(group) {
        var count = 0;
        var it = getMemberGroups(group).iterator;
        while (it.next()) {
            var part = it.value;
            count += 1 + countGroups(part);
        }

        return count;
    }

    // returns the collection of groups that are either a memberPart of this group, or an R-thing between sibling memberParts
    function getMemberGroups(group) {
        var members = new go.List();
        var it = group.memberParts;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group) {
                members.add(part);
                var rthing = getRThingToSibling(part); // NB: should not get duplication here, as this checks for r-things in only one direction
                if (rthing) {
                    members.add(rthing);
                }
            }
        }
        return members;
    }

    // if the group is linked by an R-thing to a sibling (with the group as the fromNode), returns the R-thing; else returns null
    function getRThingToSibling(group) {
        var it = group.findLinksOutOf();
        while (it.next()) {
            var link = it.value;
            if (link.labelNodes.count > 0 && link.toNode.containingGroup == group.containingGroup) {
                return link.labelNodes.first();
            }
        }
        return null;
    }

    function isPoint(group) {
        var it = group.findLinksOutOf();
        while (it.next()) {
            var link = it.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    }

    function isView(group) {
        var it = group.findLinksInto();
        while (it.next()) {
            var link = it.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    }
};

},{"./sbEditor":38}],21:[function(require,module,exports){
'use strict';

var SandbankEditor = require('./sbEditor');

// functions handling attachments

SandbankEditor.Attachments = function ($scope, $http, $resource, map) {

    var self = this;

    this.selectedThing = null;
    this.attachments = null;

    this.attachmentTypes = [{ name: 'note', labelSingular: 'Note', labelPlural: 'Notes' }, { name: 'link', labelSingular: 'Web Link', labelPlural: 'Web Links' }, { name: 'task', labelSingular: 'Task', labelPlural: 'Tasks' }, { name: 'map', labelSingular: 'Linked MetaMap', labelPlural: 'Linked MetaMaps' }
    //        {name: 'doc', labelSingular: 'Document', labelPlural: 'Documents'}  // limit overall storage space OR simpler rules?
    // limit file types - pdf, jpg, gif, png, office?...  whitelist vs. blacklist
    ];

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.ui.currentTabIs(map.ui.TAB_ID_ATTACHMENTS)) {
                self.stopEditingAll();
                self.saveAttachments();
                self.loadSelectedThingAttachments();
            }
        }
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.ui.TAB_ID_ATTACHMENTS) {
            // opening tab
            self.loadSelectedThingAttachments();
        }
        if (oldValue == map.ui.TAB_ID_ATTACHMENTS) {
            // closing tab
            self.saveAttachments();
        }
    };

    this.loadSelectedThingAttachments = function () {
        $scope.safeApply(function () {
            if (map.thingSelected()) {
                self.selectedThing = map.getUniqueThingSelected();
                self.attachments = self.selectedThing.data.attachments;
                if (self.attachments === undefined) {
                    self.attachments = [];
                }
            }
        });
    };

    // set all attachments to editing = false
    this.stopEditingAll = function () {
        $scope.safeApply(function () {
            if (self.attachments) {
                _.each(self.attachments, function (att) {
                    att.editing = false;
                });
            }
        });
    };

    this.editingAnItem = function () {
        return self.attachments && _.findWhere(self.attachments, { editing: true }) !== undefined;
    };

    // set all other attachments to editing = false
    this.startEditing = function (attachment) {
        $scope.safeApply(function () {
            self.stopEditingAll();
            attachment.editing = true;
        });
    };

    this.saveItem = function (attachment) {
        $scope.safeApply(function () {
            attachment.editing = false;
            self.saveAttachments();
        });
    };

    this.saveAttachments = function () {
        $scope.safeApply(function () {
            //console.log('saveAttachments, selected: ' + self.selectedThing);
            if (self.selectedThing) {
                map.diagram.model.setDataProperty(self.selectedThing.data, 'attachments', self.attachments);
                self.selectedThing.updateTargetBindings();
            }
            map.autosave.saveNow('edit_attachments');
        });
    };

    this.listAttachments = function (type) {
        var atts = _.where(self.attachments, { type: type });
        return atts;
    };

    this.addAttachment = function (type) {
        var item = { type: type, editing: true };
        if (type == 'note') {
            self.attachments.push(_.extend(item, { text: '', url: '' }));
        } else if (type == 'link') {
            self.attachments.push(_.extend(item, { label: '', url: '' }));
        } else if (type == 'task') {
            self.attachments.push(_.extend(item, { text: '' }));
        } else if (type == 'doc') {
            self.attachments.push(_.extend(item, { name: '' }));
        } else if (type == 'map') {
            self.attachments.push(_.extend(item, { mapRef: { id: 0, name: '' } }));
        }
    };

    this.isValid = function (attachment) {
        if (attachment.type == 'link') {
            return attachment.label && attachment.url && attachment.label.trim() !== '' && attachment.url.trim() !== '';
        } else if (attachment.type == 'note') {
            return attachment.text && attachment.text.trim() !== '';
        } else if (attachment.type == 'task') {
            return attachment.text && attachment.text.trim() !== '';
        } else if (attachment.type == 'doc') {
            return attachment.name && attachment.name.trim() !== '';
        } else if (attachment.type == 'map') {
            return attachment.mapRef && attachment.mapRef.id !== null && attachment.mapRef.id !== undefined;
        }
    };

    this.deleteAttachment = function (att) {
        var typeLabel = _.findWhere(self.attachmentTypes, { name: att.type }).labelSingular;
        if (confirm('Delete ' + typeLabel + '?')) {
            var i = _.indexOf(self.attachments, att);
            self.attachments.splice(i, 1);
        }
    };

    // query server for maps containing the given text in the map name
    this.getOtherMaps = function (viewValue) {
        // NB: this URL is constructed to match the one generated by the search form on the maps page...
        var url = '/maps/visible_maps.json?utf8=%E2%9C%93&q%5Bname_cont%5D=' + viewValue;
        return $http.get(url).then(function (response) {
            return response.data.maps;
        });
    };

    this.otherMapSelected = function (viewValue, modelValue) {
        //console.log('otherMapSelected, viewValue: ' + viewValue.id + ', modelValue: ' + modelValue);
    };

    this.formatOtherMap = function (model) {
        return model ? model.name : '';
    };
};

},{"./sbEditor":38}],22:[function(require,module,exports){
'use strict';

var SandbankEditor = require('./sbEditor');
// functions handling editor autosave function

SandbankEditor.Autosave = function ($scope, $http, map) {

    var self = this;

    var MetaMap = require('../../MetaMap');

    var changeTypes = [];

    this.saveOnModelChanged = true;

    // do a save next time the set interval passes with no save requests
    this.save = function (changeType) {
        changeTypes.push(changeType);
        delayedAutosave();
    };

    // do a save right now
    this.saveNow = function (changeType) {
        changeTypes.push(changeType);
        autosave();
    };

    // don't let autosave be triggered more than every N milliseconds...
    var delayedAutosave = _.debounce(autosave, 2000);

    // compile the current list of change type descriptions, process them
    // to remove duplicates, and save the current data
    function autosave() {
        // stop right here if we're in the sandbox and/or we don't have edit permissions
        if ($scope.sandbox || !$scope.canEdit) {
            return;
        }

        if (!changeTypes.length) {
            //console.log('autosave: nothing to save!'); // shouldn't happen
            return;
        }

        // de-dupe the list of change types
        var changeList = _.uniq(changeTypes);
        //console.log('changeList: ' + changeList);
        // don't show move events unless that's all we have
        var changeListWithoutMoves = _.without(changeList, 'move');
        if (changeListWithoutMoves.length > 0) {
            changeList = changeListWithoutMoves;
        }
        //console.log('changeList without moves: ' + changeList);
        // get descriptions
        var descriptionList = _.map(changeList, function (ct) {
            return _.result(changeDescriptions, ct);
        });

        //console.log('autosave, changeList: ' + changeList + ', descriptionList: ' + descriptionList);
        var postData = {
            data: JSON.parse(map.diagram.model.toJson()),
            state_data: map.ui.getStateData(),
            editor_options: map.ui.getMapEditorOptions(),
            presenter_slides: map.presenter.getSlideCount(),
            activity_slides: map.presenter.getActivitySlideCount(),
            change_type: changeList.join(';'),
            change_description: descriptionList.join('; '),
            thumbnail_png: map.presenter.getMapThumbnail(),
            changed_by: MetaMap.User.userKey
        };
        var url = $scope.mapUrl + '.json';

        $scope.updateEditStatus($scope.SAVING);

        changeTypes = [];
        $scope.updateEditStatus($scope.SAVE_OK);
        // load returned data for analytics, points, badges, versions
        // $scope.map.loadMapExtraData(response.data.map);
        MetaMap.MetaFire.setDataInTransaction(postData, 'maps/data/' + $scope.mapId);
        MetaMap.Integrations.sendEvent($scope.mapId, 'event', 'autosave', 'autosave');
    }

    // -------------- handle model changes - trigger autosave ------------------

    var changeDescriptions = {
        move: 'Moved Objects',
        undo_redo: 'Performed Undo/Redo',
        edit_title: 'Edited MetaMap Title',
        edit_description: 'Edited MetaMap Description',
        edit_usertags: 'Edit MetaMap Tags',
        edit_d: 'Edited Distinctions',
        edit_s: 'Edited Systems',
        edit_r: 'Edited Relationships',
        edit_p: 'Edited Perspectives',
        add_thing: 'Added Ideas',
        rename_thing: 'Renamed Ideas',
        delete_thing: 'Deleted Ideas',
        edit_attachments: 'Edited Attachments',
        edit_presenter: 'Edited Presenter Slides',
        edit_generator: 'Inserted Ideas from ThinkQuery',
        edit_standards: 'Edited Links to Common Core Standards'
    };

    // e is a go.ChangedEvent
    this.modelChanged = function (e) {

        if (!self.saveOnModelChanged) {
            return;
        }

        var changeType = null;
        var changeDescription = null;

        if (e.propertyName == 'type') {
            // change R type
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,n,1,o,2,A,3,r,4,r,5,o,6,w,7,s] , newParam: null, newValue: [0,t,1,o] , propertyName: type
            changeType = 'edit_r';
            changeDescription = 'Changed Relationship Types';
        } else if (e.propertyName == 'layout') {
            // change system layout
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,l,1,e,2,f,3,t] , newParam: null, newValue: [0,r,1,i,2,g,3,h,4,t] , propertyName: layout
            changeType = 'edit_s';
        } else if (e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'fromPort', 'R')) {
            // add link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,P] , propertyName: linkDataArray
            // modelChange: linkToPortId, change: ChangedEvent.Property, oldParam: null, oldValue: [0,P] , newParam: null, newValue: [0,R] , propertyName: toPort
            changeType = 'edit_r';
        } else if (e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'fromPort', 'R')) {
            // delete link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,R] , newParam: null, newValue: [] , propertyName: linkDataArray
            changeType = 'edit_r';
        } else if (e.propertyName == 'linkDataArray') {
            // change P/D links
            // add P link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 2, newValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P] , propertyName: linkDataArray
            // modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
            // delete P link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 2, oldValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P,category,P] , newParam: null, newValue: [] , propertyName: linkDataArray
            // add D link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , propertyName: linkDataArray
            // remove D link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , newParam: null, newValue: [] , propertyName: linkDataArray

            if (e.newValue && e.newValue.category == 'P' || e.oldValue && e.oldValue.category == 'P') {
                changeType = 'edit_p';
            } else if (e.newValue && e.newValue.category == 'D' || e.oldValue && e.oldValue.category == 'D') {
                changeType = 'edit_d';
            }
        } else if (e.propertyName == 'category') {
            // add P link
            // modelChanged, modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
            changeType = 'edit_p';
        } else if (e.propertyName == 'group') {
            // drag into S
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
            // reorder part
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
            // drag to D
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group

            changeType = 'edit_s';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'isGroup', true)) {
            // add thing
            // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7] , propertyName: nodeDataArray
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,2,1,2,2,8,3,.,4,5,5,6,6,2,7,5,8, ,9,-,10,1,11,4,12,9,13,.,14,6,15,8,16,7,17,5] , propertyName: loc
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: children
            changeType = 'add_thing';
        } else if (e.propertyName == 'text') {
            // move thing
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,b,1,b,2,b,3,b,4,b] , newParam: null, newValue: [0,a,1,a,2,a,3,a,4,a] , propertyName: text
            changeType = 'rename_thing';
            changeDescription = 'Renamed Ideas';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'isGroup', true)) {
            // delete thing
            // modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7,loc,228.5625 -149.6875,children,0,attachments,] , newParam: null, newValue: [] , propertyName: nodeDataArray
            changeType = 'delete_thing';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'isGroup', false)) {
            // add slide
            // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877] , propertyName: nodeDataArray
            changeType = 'edit_presenter';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'isGroup', false)) {
            // delete slide
            //modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877,$$hashKey,0XN] , newParam: null, newValue: [] , propertyName: nodeDataArray
            changeType = 'edit_presenter';
        } else if (e.propertyName == 'loc' || e.propertyName == 'width' || e.propertyName == 'height') {
            // move thing or resize slide
            // move slide
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,8] , newParam: null, newValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,7] , propertyName: loc
            // resize slide
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: height
            // move thing
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,4,1,7,2,9,3,.,4,8,5,7,6,5,7, ,8,-,9,1,10,2,11,2,12,.,13,8,14,7,15,5] , newParam: null, newValue: [0,5,1,4,2,0,3,.,4,3,5,1,6,2,7,5,8, ,9,-,10,1,11,2,12,1,13,.,14,1,15,8,16,7,17,5] ,            
            changeType = 'move';
        } else if (e.propertyName == 'level' || e.propertyName == 'children') {
            // these attributes are updated as a result of other actions; ignore
            changeType = null;
        } else if (e.propertyName == 'attachments') {
            // edited attachments
            changeType = 'edit_attachments';
        } else if (e.propertyName == 'sExpanded' || e.propertyName == 'pExpanded') {
            // ignore expand/collapse
            changeType = 'move';
        } else if (e.propertyName == 'FinishedUndo' || e.propertyName == 'FinishedRedo') {
            changeType = 'undo_redo';
            map.refresh();
        } else if (e.change != go.ChangedEvent.Transaction) {
            //console.log('modelChanged, modelChange: ' + e.modelChange +
            //    ', change: ' + e.change +
            //    ', oldParam: ' + e.oldParam +
            //    ', oldValue: [' + _.pairs(e.oldValue) + '] ' +
            //    ', newParam: ' + e.newParam +
            //    ', newValue: [' + _.pairs(e.newValue) + '] ' +
            //    ', propertyName: ' + e.propertyName
            //);
        }

        if (changeType) {
            map.analytics.updateContextualAnalytics();
            //console.log('calling delayedAutosave, changeType: ' + changeType);
            self.save(changeType);
        }
    };

    // convenience function for checking properties
    function propertyEquals(obj, key, value) {
        return obj !== null && _.has(obj, key) && _.result(obj, key) == value;
    }
};

},{"../../MetaMap":1,"./sbEditor":38}],23:[function(require,module,exports){
"use strict";

var go = window.go;

go.GraphObject.defineBuilder("CornerButton", function (args) {
    // default brushes for "Button" shape
    var buttonFillNormal = go.GraphObject.make(go.Brush, "Linear", { 0: "white", 1: "white" });
    var buttonStrokeNormal = "white";

    var buttonFillOver = go.GraphObject.make(go.Brush, "Linear", { 0: "white", 1: "white" });
    var buttonStrokeOver = "white";

    // offset identical to that needed to match the original RoundedRectangle figure, to keep the same size
    var offset = 0.001; //2.761423749153968;

    var button = go.GraphObject.make(go.Panel, "Auto", {
        isActionable: false,
        fromLinkable: true,
        fromLinkableSelfNode: true,
        fromLinkableDuplicates: true,
        toLinkable: true,
        toLinkableSelfNode: true,
        toLinkableDuplicates: true,
        portId: 'default'
    }, // needed so that the ActionTool intercepts mouse events
    { // save these values for the mouseEnter and mouseLeave event handlers
        "_buttonFillNormal": buttonFillNormal,
        "_buttonStrokeNormal": buttonStrokeNormal,
        "_buttonFillOver": buttonFillOver,
        "_buttonStrokeOver": buttonStrokeOver
    }, go.GraphObject.make(go.Shape, // the border
    {
        name: "ButtonBorder",
        figure: "Circle",
        spot1: new go.Spot(0, 0, offset, offset),
        spot2: new go.Spot(1, 1, -offset, -offset),
        fill: buttonFillNormal,
        stroke: null,
        strokeWidth: 0
    }));

    // There"s no GraphObject inside the button shape -- it must be added as part of the button definition.
    // This way the object could be a TextBlock or a Shape or a Picture or arbitrarily complex Panel.

    // mouse-over behavior
    button.mouseEnter = function (e, button, prev) {
        var shape = button.findObject("ButtonBorder"); // the border Shape
        if (shape instanceof go.Shape) {
            var brush = button["_buttonFillOver"];
            button["_buttonFillNormal"] = shape.fill;
            shape.fill = brush;
            brush = button["_buttonStrokeOver"];
            button["_buttonStrokeNormal"] = shape.stroke;
            shape.stroke = brush;
        }
    };

    button.mouseLeave = function (e, button, prev) {
        var shape = button.findObject("ButtonBorder"); // the border Shape
        if (shape instanceof go.Shape) {
            shape.fill = button["_buttonFillNormal"];
            shape.stroke = button["_buttonStrokeNormal"];
        }
    };

    return button;
});

},{}],24:[function(require,module,exports){
"use strict";

var reactWatch = {};
var react = function react(map, part, target) {
        target.clicks = target.clicks || 0;
        target.clicks += 1;
        var method = reactWatch[target.toString()];
        if (!method) {
                method = _.delay(function () {
                        var count = 1;
                        if (target.clicks > 1) {
                                count = 2;
                        }
                        target.clicks = 0;
                        reactWatch[target.toString()] = null;
                        map.ui.handleCornerClick(part, target.part.adornedPart || target, count);
                }, 250);
                reactWatch[target.toString()] = method;
        }
};

module.exports = react;

},{}],25:[function(require,module,exports){
'use strict';

var go = window.go;
var CONSTANTS = require('../../constants/constants');
var react = require('./buttonClick');

function ButtonDraggingTool(map) {
    go.DraggingTool.call(this);
    this._dragData = null; // pass information from findDraggablePart to standardMouseSelect
    this.map = map;
}
go.Diagram.inherit(ButtonDraggingTool, go.DraggingTool);

// ButtonDraggingTool.prototype.canStart = function (...params) {
//     if (!this.isEnabled) return false;
//     var diagram = this.diagram;
//     if (diagram === null) return false;
//     if (!diagram.allowHorizontalScroll && !diagram.allowVerticalScroll) return false;
//     // require right button & that it has moved far enough away from the mouse down point, so it isn't a click
//     // CHANGED to check InputEvent.right INSTEAD OF InputEvent.left
//     if (!diagram.lastInput.left) return false;
//     // don't include the following check when this tool is running modally
//     if (!(this.diagram.lastInput.documentPoint) ||
//         !this.diagram.findObjectAt(this.diagram.lastInput.documentPoint) ||
//         !this.diagram.findObjectAt(this.diagram.lastInput.documentPoint).part.adornedPart) return false;
//     // if (diagram.currentTool !== this) {
//     //     // mouse needs to have moved from the mouse-down point
//     if (this.isBeyondDragSize()) {
//              alert('drag')
//          }
//     // }
//     return true;
// }
// A drag starting at a button with _dragData is allowed because this method returns a Part so that canStart() can return true.
// Remember the _dragData that was found, so that standardMouseSelect can create and select a new Part based on that data.
ButtonDraggingTool.prototype.findDraggablePart = function () {
    var part = go.DraggingTool.prototype.findDraggablePart.call(this);
    if (part !== null) return part;
    var element = this.diagram.findObjectAt(this.diagram.lastInput.documentPoint, function (x) {
        // go up the Panel chain, looking for the first GraphObject with _dragData set to an object
        var o = x;
        while (o !== null && typeof o._dragData !== "object") {
            o = o.panel;
        };
        return o; // will be either null or a GraphObject with ._dragData
    }, null);
    if (element !== null) {
        this._dragData = element._dragData;
        return element.part;
    } else {
        this._dragData = null;
        return null;
    }
};

// ButtonDraggingTool.prototype.standardMouseClick = function (event, obj) {
//     if (this._dragData !== null) {
//         let node = this.diagram.findObjectAt(this.diagram.lastInput.documentPoint).part.adornedPart;
//         let target = node.findObject('mainpanel');
//         switch (this._dragData.portId) {
//             case CONSTANTS.DSRP.D:
//                 if (event.alt) {
//                     // NB: a side effect of this will be to select just this group,
//                     // which would not happen otherwise via control-click
//                     this.map.perspectives.setDEditorThing(target.part.adornedPart);
//                 } else {
//                     react(this.map, CONSTANTS.DSRP.D, target);
//                 }
//                 break;
//             case CONSTANTS.DSRP.S:
//                 react(this.map, CONSTANTS.DSRP.S, target);
//                 break;
//             case CONSTANTS.DSRP.R:
//                 react(this.map, CONSTANTS.DSRP.R, target);
//                 break;
//             case CONSTANTS.DSRP.P:
//                 react(this.map, CONSTANTS.DSRP.P, target);
//                 break;
//         }
//     }
// }
//
// ButtonDraggingTool.prototype.doMouseDown = function (event, obj) {
//     //go.DraggingTool.prototype.doMouseDown.apply(this, arguments);
//     //this.standardMouseClick.apply(this, arguments);
//     if (this._dragData !== null) {
//
//     }
//     if (this.isBeyondDragSize()) {
//         alert('drag')
//     }
// };

// Instead of the standard behavior selecting the Part at the lastInput.documentPoint,
// create a new Part and select it, so that it is dragged by the DraggingTool.
ButtonDraggingTool.prototype.standardMouseSelect = function (event, obj) {
    if (this._dragData !== null) {
        if (this._dragData.portId == CONSTANTS.DSRP.P || this._dragData.portId == CONSTANTS.DSRP.R) {
            this.diagram.startTransaction("Drag");
            // this method must now set this.currentPart to a selected movable Part

            this.diagram.allowLink = true;
            var tool = this.diagram.toolManager.linkingTool;
            var node = this.diagram.findObjectAt(this.diagram.lastInput.documentPoint).part.adornedPart;
            tool.startObject = node.findObject('dragarea');
            tool.archetypeLinkData.text = this._dragData.portId;
            this.diagram.currentTool = tool;
            tool.doActivate();

            this.map.templates.groupMouseDragLeaveHandler();

            // var data = this.diagram.model.copyNodeData(this._dragData);
            // this.diagram.model.addNodeData(data);
            // var newpart = this.diagram.findNodeForData(data);
            // newpart.location = this.diagram.lastInput.documentPoint;
            // this.diagram.select(newpart);
            // this.currentPart = newpart;
        }
    } else {
            go.DraggingTool.prototype.standardMouseSelect.call(this);
        }
};

ButtonDraggingTool.prototype.doActivate = function (event, obj) {
    go.DraggingTool.prototype.doActivate.apply(this, arguments);
};

module.exports = ButtonDraggingTool;

},{"../../constants/constants":48,"./buttonClick":24}],26:[function(require,module,exports){
'use strict';

var go = window.go;
var mk = go.GraphObject.make;
var metaMap = require('../../../MetaMap');
var config = metaMap.config.canvas;
var CONSTANTS = require('../../constants/constants');

var react = require('./buttonClick');

var dButton = function dButton(map) {
    return mk(go.Panel, "Auto", {
        alignment: go.Spot.TopLeft
    }, mk("CornerButton", "Auto", {
        cursor: 'pointer',
        _dragData: { portId: CONSTANTS.DSRP.D },
        portId: CONSTANTS.DSRP.D,
        click: function click(event, target) {
            if (event.alt) {
                // NB: a side effect of this will be to select just this group,
                // which would not happen otherwise via control-click
                map.perspectives.setDEditorThing(target.part.adornedPart);
            } else {
                react(map, CONSTANTS.DSRP.D, target);
            }
        },
        contextClick: function contextClick(event, target) {
            //console.log('contextClick:' + event);
            map.toggleDFlag(target.part.adornedPart);
        }
    }, mk(go.Shape, {
        desiredSize: new go.Size(20, 20),
        geometryString: config.shapes.corners.D.path,
        fill: config.colors.DSRP.D,
        stroke: null,
        strokeWidth: 0
    })));
};

module.exports = dButton;

},{"../../../MetaMap":1,"../../constants/constants":48,"./buttonClick":24}],27:[function(require,module,exports){
'use strict';

var go = window.go;
var mk = go.GraphObject.make;
var metaMap = require('../../../MetaMap');
var config = metaMap.config.canvas;
var CONSTANTS = require('../../constants/constants');

var react = require('./buttonClick');

var pButton = function pButton(map) {
    return mk(go.Panel, "Auto", {
        alignment: go.Spot.TopRight
    }, mk("CornerButton", "Auto", {
        cursor: 'pointer',
        _dragData: { portId: CONSTANTS.DSRP.P },
        portId: CONSTANTS.DSRP.P,
        fromLinkable: true,
        fromLinkableSelfNode: true,
        fromLinkableDuplicates: true,
        toLinkable: true,
        toLinkableSelfNode: true,
        toLinkableDuplicates: true,
        toMaxLinks: 1,
        mouseDragEnter: function mouseDragEnter(event, target) {
            debugger;
            //getGroupMouseDragEnterHandler(map.LEFT)
        },
        mouseDragLeave: function mouseDragLeave(event, target) {
            debugger;
            //groupMouseDragLeaveHandler()
        },
        mouseDrop: function mouseDrop(event, target) {
            debugger;
            //getGroupMouseDropHandler(map.LEFT)
        }
    }, mk(go.Shape, {
        desiredSize: new go.Size(20, 20),
        geometryString: config.shapes.corners.P.path,
        fill: config.colors.DSRP.P,
        stroke: null,
        strokeWidth: 0
    })));
};

module.exports = pButton;

},{"../../../MetaMap":1,"../../constants/constants":48,"./buttonClick":24}],28:[function(require,module,exports){
'use strict';

var go = window.go;
var mk = go.GraphObject.make;
var metaMap = require('../../../MetaMap');
var config = metaMap.config.canvas;
var CONSTANTS = require('../../constants/constants');

var react = require('./buttonClick');

var rButton = function rButton(map) {
    return mk(go.Panel, "Auto", {
        alignment: go.Spot.BottomRight
    }, mk("CornerButton", "Auto", {
        cursor: 'pointer',
        _dragData: { portId: CONSTANTS.DSRP.R },
        portId: CONSTANTS.DSRP.R,
        fromLinkable: true,
        fromLinkableSelfNode: true,
        fromLinkableDuplicates: true,
        toLinkable: true,
        toLinkableSelfNode: true,
        toLinkableDuplicates: true,
        mouseDragEnter: function mouseDragEnter(event, target) {
            debugger;
            //getGroupMouseDragEnterHandler(map.LEFT)
        },
        mouseDragLeave: function mouseDragLeave(event, target) {
            debugger;
            //groupMouseDragLeaveHandler()
        },
        mouseDrop: function mouseDrop(event, target) {
            debugger;
            //getGroupMouseDropHandler(map.LEFT)
        }
    }, mk(go.Shape, {
        alignment: go.Spot.BottomRight,
        cursor: 'pointer',
        portId: CONSTANTS.DSRP.R,
        desiredSize: new go.Size(20, 20),
        geometryString: config.shapes.corners.R.path,
        fill: config.colors.DSRP.R,
        stroke: null,
        strokeWidth: 0
    })));
};

module.exports = rButton;

},{"../../../MetaMap":1,"../../constants/constants":48,"./buttonClick":24}],29:[function(require,module,exports){
'use strict';

var go = window.go;
var mk = go.GraphObject.make;
var metaMap = require('../../../MetaMap');
var config = metaMap.config.canvas;
var CONSTANTS = require('../../constants/constants');

var react = require('./buttonClick');

var sButton = function sButton(map) {
    return mk(go.Panel, "Auto", {
        alignment: go.Spot.BottomLeft
    }, mk("CornerButton", "Auto", {
        cursor: 'pointer',
        portId: CONSTANTS.DSRP.S,
        _dragData: { portId: CONSTANTS.DSRP.S }
    }, mk(go.Shape, {
        desiredSize: new go.Size(20, 20),
        geometryString: config.shapes.corners.S.path,
        fill: config.colors.DSRP.S,
        stroke: null,
        strokeWidth: 0
    })));
};

module.exports = sButton;

},{"../../../MetaMap":1,"../../constants/constants":48,"./buttonClick":24}],30:[function(require,module,exports){
'use strict';

require('./user.js');
require('./editor_options.js');
require('./analytics.js');
require('./attachments.js');
require('./autosave.js');
require('./generator.js');
require('./layouts.js');
require('./map.js');
require('./perspectives.js');
require('./presenter.js');
require('./sharing.js');
require('./standards.js');
require('./tagging.js');
require('./templates.js');
require('./tests.js');
require('./ui.js');

var SandbankEditor = require('./sbEditor');
var moment = require('moment');

window.MapEditorCtrl = function ($rootScope, $scope, $http, $resource, $timeout, $modal, $log) {

    $scope.map = new SandbankEditor.Map($scope, $http, $resource, $timeout, $modal, $log);

    // window.mapData is set in _form view
    var metadata = $scope.mapData.metadata;
    $scope.sandbox = metadata.sandbox;
    //$scope.mapData = window.mapData.map.data; // this gets overwritten by load() unless we are in the sandbox with no map ID
    //$scope.mapId = metadata.id;
    $scope.mapTitle = metadata.name;
    $scope.mapUserTags = metadata.userTags;
    $scope.mapUrl = metadata.url;
    $scope.canEdit = metadata.canEdit;
    $scope.updatedAt = metadata.updatedAt;
    $scope.updatedBy = metadata.updatedBy; // ID
    $scope.updatedByName = metadata.updatedByName;

    $scope.editingTitle = false;

    $scope.showImageExport = false;
    $scope.imageExportLoading = true;

    $scope.currentTab = null;

    // override parent scope (see user.js) since we're editing a map
    $scope.ccsTagging.mapId = $scope.mapId;

    $scope.maybeStartEditingTitle = function () {
        if ($scope.canEdit) {
            $scope.editingTitle = true;
        }
    };

    $scope.doneEditingTitle = function () {
        //console.log('doneEditingTitle');
        $scope.editingTitle = false;
        $scope.map.autosave.save('edit_title');
    };

    $scope.editingTitleKeypress = function (e) {
        if (e.which == 13) {
            $scope.doneEditingTitle();
        }
    };

    $scope.print = function () {
        window.print();
    };

    // ------------ save sandbox map (sign up/sign in) ---------------

    $scope.saveSandboxMap = function () {
        var modalInstance = $modal.open({
            templateUrl: 'template_sandbox_save_modal.html', // see views/users/_template_sandbox_save_modal
            backdrop: 'static',
            controller: sandboxSaveModalCtrl,
            windowClass: 'sandbox-save-modal',
            resolve: {
                outerScope: function outerScope() {
                    return $scope;
                },
                map: function map() {
                    return $scope.map;
                },
                userProfile: function userProfile() {
                    return $scope.userProfile;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    var sandboxSaveModalCtrl = function sandboxSaveModalCtrl($scope, $modalInstance, outerScope, map, userProfile) {

        $scope.map = map;
        $scope.userProfile = userProfile;

        $scope.mapData = map.diagram.model.toJson();
        $scope.thumbnailPng = map.presenter.getMapThumbnail();

        function getDefaultLoginData() {
            return {
                email: '',
                password: ''
            };
        }

        // this structure is used to store the form data, as well as the validation errors returned from the server...
        function getDefaultSignupData() {
            return {
                email: '',
                first_name: '',
                last_name: '',
                password: '',
                password_confirmation: ''
            };
        }

        $scope.loginData = getDefaultLoginData();
        $scope.loginError = '';

        $scope.signupData = getDefaultSignupData();
        $scope.signupErrors = getDefaultSignupData();

        $scope.doLogin = function () {
            $scope.loginErrors = getDefaultLoginData(); // reset errors
            $http.post('/sign_in.json', {
                user: $scope.loginData
            }).then(function (response) {
                // data is {id:XX, ...}
                outerScope.setUserId(response.data.id);
                outerScope.loadUserProfile(function () {
                    $scope.userProfile = outerScope.userProfile;
                });
            }, function (response) {
                // data is {"error": "Invalid email or password"}
                $scope.loginError = response.data.error;
            });
        };

        $scope.doSignup = function () {
            $scope.signupErrors = getDefaultSignupData(); // reset errors
            $http.post('/users.json', {
                user: $scope.signupData
            }).then(function (response) {
                // data is new user ID
                outerScope.setUserId(response.data);
                outerScope.loadUserProfile(function () {
                    $scope.userProfile = outerScope.userProfile;
                });
            }, function (response) {
                // data is e.g. {"first_name":["can't be blank"], ...}
                _.each(_.keys(response.data), function (key) {
                    $scope.signupErrors[key] = response.data[key].join('; ');
                });
            });
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    sandboxSaveModalCtrl.$inject = ['$scope', '$modalInstance', 'outerScope', 'map', 'userProfile'];

    // ------------- edit status message for header bar ------------------

    $scope.editStatus = '';

    $scope.LAST_UPDATED = '';
    $scope.READ_ONLY = 'View only';
    $scope.SAVING = 'Saving...';
    $scope.SAVE_OK = 'All changes saved';
    $scope.SAVE_FAILED = 'Changes could not be saved';

    $scope.updateEditStatus = function (s) {
        //console.log('updateEditStatus: ' + s);
        $scope.editStatus = s;
        if (s == $scope.SAVE_FAILED) {
            alert('Changes could not be saved - please check your network connection.');
        } else if (s == $scope.LAST_UPDATED) {
            var time = moment($scope.updatedAt).fromNow();
            var by = '';
            if ($scope.updatedBy == $scope.userId) {
                by = 'by me';
            } else if ($scope.updatedByName) {
                by = 'by ' + $scope.updatedByName;
            }
            // TODO: show 'by me' only for editable shared maps?

            $scope.editStatus = 'Last updated ' + time + ' ' + by;
        }

        // Last edit was XX ago by YY
    };

    // -------------------------------------------------------------

    function init() {
        $scope.safeApply(function () {
            $scope.map.init();

            if (!$scope.sandbox) {
                // overview diagram
                var overview = go.GraphObject.make(go.Overview, "overview-diagram", {
                    observed: $scope.map.diagram,
                    contentAlignment: go.Spot.Center
                });
                var outline = overview.box.elements.first();
                outline.stroke = "#333";
            }

            //if ($scope.mapUrl) {
            $scope.map.load();
            //} else {
            //    $scope.map.loadForSandbox();
            //}

            addBehaviors();
            handleNavigation();
            handleBackspace();
        });
    }

    // misc. UI behaviors for tooltips, popups etc.
    // TODO: figure out which of these need to be reapplied after dynamic data changes (e.g. LessonBook popovers)
    function addBehaviors() {

        // NOTE: we have to use regular bootstrap tooltips for toolbar buttons (instead of ng-bootstrap ones)
        // so we can turn them off for mobile. We also put the tooltips on wrappers rather than on the actual
        // buttons, so we can avoid the issue of stuck tooltips if a button gets disabled while the tooltip is showing.

        if (!$scope.isTouchDevice()) {
            // $('.tooltip-wrapper').tooltip({
            //     placement: 'top',
            //     container: 'body'
            // });

            // $('.dropdown-menu .btn').tooltip({
            //     placement: 'left',
            //     container: 'body'
            // }); // for layout options

            $('header, #map-title').hover(function () {
                $('body.presenter-playing').addClass('hide-header');
            }, function () {
                $('body.presenter-playing').removeClass('hide-header');
            });
        }
    }

    function handleNavigation() {
        // cross-browser tweaks:
        try {
            // http://www.opera.com/support/kb/view/827/
            opera.setOverrideHistoryNavigationMode('compatible');
            history.navigationMode = 'compatible';
        } catch (e) {}
        // no biggie.

        // install before-unload handler:

        function exitMessage() {
            return "Navigating away from your Map will cause any unsaved changes to be lost " + "(any changes you make are automatically saved, but it takes a couple of seconds).";
        }

        //        $(window).bind('beforeunload', exitMessage);

        // prevent exit prompt when the user deliberately navigates away:

        $('#header-right a').click(function () {
            $(window).unbind('beforeunload', exitMessage);
        });
    }

    function handleBackspace() {
        var BACKSPACE = 8;

        $(document).on('keydown', function (event) {
            if (event.keyCode === BACKSPACE) {
                if (!$('body :focus').is(':input')) {
                    // prevent accidental backspace when no input has focus:
                    event.preventDefault();
                    event.stopPropagation();
                }
            }
        });
    }

    init();

    return $scope;
};

window.MapEditorCtrl.$inject = ['$rootScope', '$scope', '$http', '$resource', '$timeout', '$modal', '$log'];

},{"./analytics.js":20,"./attachments.js":21,"./autosave.js":22,"./editor_options.js":31,"./generator.js":33,"./layouts.js":34,"./map.js":35,"./perspectives.js":36,"./presenter.js":37,"./sbEditor":38,"./sharing.js":39,"./standards.js":40,"./tagging.js":41,"./templates.js":42,"./tests.js":43,"./ui.js":44,"./user.js":45,"moment":undefined}],31:[function(require,module,exports){
'use strict';

var SandbankEditor = require('./sbEditor');

var SandbankEditorOptions = function SandbankEditorOptions($scope, $http, $resource, $modal, $log) {

    this.openModal = function (_options, _onSaveDefaults, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_editor_options_modal.html', // see views/maps/_template_editor_options_modal
            backdrop: 'static',
            controller: optionsModalCtrl,
            windowClass: 'options-modal',
            resolve: {
                options: function options() {
                    return _options;
                },
                onSaveDefaults: function onSaveDefaults() {
                    return _onSaveDefaults;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for options modal ---------------------

    var optionsModalCtrl = function optionsModalCtrl($scope, $modalInstance, options, onSaveDefaults, onUpdate) {

        $scope.options = options;

        $scope.setDefaults = {
            value: false
        };

        $scope.ok = function () {
            onUpdate($scope.options);
            if ($scope.setDefaults.value) {
                onSaveDefaults($scope.options);
            }
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    optionsModalCtrl.$inject = ['$scope', '$modalInstance', 'options', 'onSaveDefaults', 'onUpdate'];
};

module.exports = SandbankEditorOptions;

},{"./sbEditor":38}],32:[function(require,module,exports){
"use strict";
/*
*  Copyright (C) 1998-2015 by Northwoods Software Corporation. All Rights Reserved.
*/

// A custom Tool for moving a label on a Node

/**
* @constructor
* @extends Tool
* @class
* This tool only works when the Node has a label (any GraphObject) marked with
* { _isNodeLabel: true } that is positioned in a Spot Panel.
* It works by modifying that label's GraphObject.alignment property to have an
* offset from the center of the panel.
*/
function NodeLabelDraggingTool() {
  go.Tool.call(this);
  this.name = "NodeLabelDragging";

  /** @type {GraphObject} */
  this.label = null;
  /** @type {Point} */
  this._originalAlignment = null;
  /** @type {Point} */
  this._originalCenter = null;
}
go.Diagram.inherit(NodeLabelDraggingTool, go.Tool);

/**
* This tool can only start if the mouse has moved enough so that it is not a click,
* and if the mouse down point is on a GraphObject "label" in a Spot Panel,
* as determined by findLabel().
* @this {NodeLabelDraggingTool}
* @return {boolean}
*/
NodeLabelDraggingTool.prototype.canStart = function () {
  if (!go.Tool.prototype.canStart.call(this)) return false;
  var diagram = this.diagram;
  if (diagram === null) return false;
  // require left button & that it has moved far enough away from the mouse down point, so it isn't a click
  var e = diagram.lastInput;
  if (!e.left) return false;
  if (!this.isBeyondDragSize()) return false;

  return this.findLabel() !== null;
};

/**
* From the GraphObject at the mouse point, search up the visual tree until we get to
* an object that has the "_isNodeLabel" property set to true, that is in a Spot Panel,
* and that is not the first element of that Panel (i.e. not the main element of the panel).
* @this {NodeLabelDraggingTool}
* @return {GraphObject} This returns null if no such label is at the mouse down point.
*/
NodeLabelDraggingTool.prototype.findLabel = function () {
  var diagram = this.diagram;
  var e = diagram.firstInput;
  var elt = diagram.findObjectAt(e.documentPoint, null, null);

  //if (elt === null || !(elt.part instanceof go.Node)) return null;
  if (elt._isNodeLabel) return elt;
  while (elt.panel !== null && elt.panel.elt(0) !== elt) {
    if (elt._isNodeLabel) return elt;
    elt = elt.panel;
  }
  return null;
};

/**
* Start a transaction, call findLabel and remember it as the "label" property,
* and remember the original value for the label's alignment property.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doActivate = function () {
  this.startTransaction("Shifted Label");
  this.label = this.findLabel();
  if (this.label !== null) {
    this._originalAlignment = this.label.alignment.copy();
    var main = this.label.panel.findMainElement();
    this._originalCenter = main.getDocumentPoint(go.Spot.Center);
  }
  go.Tool.prototype.doActivate.call(this);
};

/**
* Stop any ongoing transaction.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doDeactivate = function () {
  go.Tool.prototype.doDeactivate.call(this);
  this.stopTransaction();
};

/**
* Clear any reference to a label element.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doStop = function () {
  this.label = null;
  go.Tool.prototype.doStop.call(this);
};

/**
* Restore the label's original value for GraphObject.alignment.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doCancel = function () {
  if (this.label !== null) {
    this.label.alignment = this._originalAlignment;
  }
  go.Tool.prototype.doCancel.call(this);
};

/**
* During the drag, call updateAlignment in order to set the GraphObject.alignment of the label.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doMouseMove = function () {
  if (!this.isActive) return;
  this.updateAlignment();
};

/**
* At the end of the drag, update the alignment of the label and finish the tool,
* completing a transaction.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doMouseUp = function () {
  if (!this.isActive) return;
  this.updateAlignment();
  this.transactionResult = "Shifted Label";
  this.stopTool();
};

/**
* Save the label's GraphObject.alignment as an absolute offset from the center of the Spot Panel
* that the label is in.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.updateAlignment = function () {
  if (this.label === null) return;
  var last = this.diagram.lastInput.documentPoint;
  var cntr = this._originalCenter;
  this.label.alignment = new go.Spot(0.5, 0.5, last.x - cntr.x, last.y - cntr.y);
};

module.exports = NodeLabelDraggingTool;

},{}],33:[function(require,module,exports){
'use strict';

var SandbankEditor = require('./sbEditor');
// functions for the generator (aka ThinkQuery)

var GeneratorCtrl = function GeneratorCtrl($scope) {

    var map = $scope.map;
    var diagram = $scope.map.diagram;

    $scope.concept1 = '';
    $scope.concept2 = '';

    $scope.echoConcept1 = function () {
        return $scope.concept1 || '...';
    };

    $scope.echoConcept2 = function () {
        return $scope.concept2 || '...';
    };

    $scope.swapConcepts = function () {
        var tmp = $scope.concept1;
        $scope.concept1 = $scope.concept2;
        $scope.concept2 = tmp;
        $scope.safeApply();
    };

    $scope.mapIt = function (question) {
        startSpinner();
        diagram = map.diagram;
        map.autosave.saveOnModelChanged = false;

        if ($scope.sandbox) {
            diagram.clear();
        }

        // figure out location for inserted stuff
        var db = map.computeMapBounds();
        var x = db.x + db.width + 200;
        var y = db.y;
        if (isNaN(x) || isNaN(y)) {
            x = y = 0;
        }
        //console.log('x, y: ' + x + ', ' + y);

        // insert the stuff and deselect it
        question(x, y);
        diagram.clearSelection();

        diagram.updateAllTargetBindings();
        diagram.layoutDiagram(true);

        map.ui.resetZoom();

        map.autosave.saveOnModelChanged = true;
        map.autosave.save('edit_generator');
        stopSpinner();
    };

    $scope.selectedQuestion = null;

    $scope.selectQuestion = function (question) {
        $scope.selectedQuestion = question;
        if ($scope.sandbox) {
            $scope.mapIt(question);
        }
    };

    $scope.surpriseMe = function () {
        var keys = _.keys($scope.queries);
        var i = _.random(0, keys.length - 1);
        var question = $scope.queries[keys[i]];
        $scope.selectedQuestion = question;
        $scope.mapIt(question);

        $('#questions').animate({ scrollTop: i * 30 }, 1000);
    };

    // ---------- functions for creating each of the structures - see views/maps/generator_tab -----------

    $scope.queries = {

        WHAT_IS: function WHAT_IS(x, y) {
            // 1
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
        },

        WHAT_IS_NOT: function WHAT_IS_NOT(x, y) {
            // 2
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is not?');
            map.createChild(thing1, 'is not?');
            map.createChild(thing1, 'is not?');
        },

        DISTINGUISH_BETWEEN: function DISTINGUISH_BETWEEN(x, y) {
            // 3
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');

            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            diagram.model.setDataProperty(thing2.data, 'dflag', true);
            map.createChild(thing2, 'is?');
            map.createChild(thing2, 'is?');
            map.createChild(thing2, 'is?');
        },

        COMPARE_CONTRAST: function COMPARE_CONTRAST(x, y) {
            // 4
            var thing1 = map.createThing(x - 150, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 150, y, $scope.echoConcept2());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            diagram.model.setDataProperty(thing2.data, 'dflag', true);
            var rthing1 = map.createRLinkWithRThing(thing1, thing2, 'contrast');
            var rthing2 = map.createRLinkWithRThing(thing1, thing2, 'compare');
            diagram.model.setDataProperty(rthing1.labeledLink.data, 'type', 'toFrom');
            diagram.model.setDataProperty(rthing2.labeledLink.data, 'type', 'toFrom');
        },

        PARTS_OF: function PARTS_OF(x, y) {
            // 5
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            map.createChild(thing1, 'part?');
            map.createChild(thing1, 'part?');
            map.createChild(thing1, 'part?');
        },

        PART_OF: function PART_OF(x, y) {
            // 6
            var thing1 = map.createThing(x, y, 'part of?');
            map.createChild(thing1, $scope.echoConcept1());
        },

        PARTS_HAVE_PARTS: function PARTS_HAVE_PARTS(x, y) {
            // 7
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part?');
            map.createChild(child1, 'part?');
            map.createChild(child1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            map.createChild(child2, 'part?');
            map.createChild(child2, 'part?');
        },

        R_PARTS: function R_PARTS(x, y) {
            // 8
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            var rthing = map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createChild(rthing, 'part?');
            map.createChild(rthing, 'part?');
        },

        P_PARTS: function P_PARTS(x, y) {
            // 9
            var thing1 = map.createThing(x + 300, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var child2 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var child3 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var thing2 = map.createThing(x, y, $scope.echoConcept2());
            map.createPLink(thing2, thing1);
            map.createPLink(thing2, child1);
            map.createPLink(thing2, child2);
            map.createPLink(thing2, child3);
        },

        RS_TO_AND_BY: function RS_TO_AND_BY(x, y) {
            // 10
            var related1 = map.createThing(x, y, 'related idea?');
            var related2 = map.createThing(x + 300, y + 50, 'related idea?');
            var related3 = map.createThing(x + 50, y + 300, 'related idea?');
            var thing = map.createThing(x + 130, y + 130, $scope.echoConcept1());
            map.createRLink(related1, thing);
            map.createRLink(related2, thing);
            map.createRLink(related3, thing);

            var thing1 = map.createThing(x + 500, y + 150, 'idea?');
            var thing2 = map.createThing(x + 750, y + 150, 'idea?');
            map.createRLinkWithRThing(thing1, thing2, $scope.echoConcept1());
        },

        WHAT_IS_R: function WHAT_IS_R(x, y) {
            // 11
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            map.createRLinkWithRThing(thing1, thing2, 'idea?');
        },

        PART_RS_ARE: function PART_RS_ARE(x, y) {
            // 12
            var thing1 = map.createThing(x + 30, y, $scope.echoConcept1(), 'freehand');
            var child1 = map.createChild(thing1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            var child3 = map.createChild(thing1, 'part?');
            diagram.model.setDataProperty(child1.data, 'loc', '-20 110');
            diagram.model.setDataProperty(child2.data, 'loc', '80 110');
            diagram.model.setDataProperty(child3.data, 'loc', '30 190');
            map.createRLinkWithRThing(child1, child2, 'relationship?');
            map.createRLinkWithRThing(child2, child3, 'relationship?');
            map.createRLinkWithRThing(child3, child1, 'relationship?');
        },

        PART_RS_EXIST: function PART_RS_EXIST(x, y) {
            // 13
            var thing1 = map.createThing(x, y, $scope.echoConcept1(), 'right');
            var child11 = map.createChild(thing1, 'part?');
            var child12 = map.createChild(thing1, 'part?');
            var child13 = map.createChild(thing1, 'part?');
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            var child21 = map.createChild(thing2, 'part?');
            var child22 = map.createChild(thing2, 'part?');
            var child23 = map.createChild(thing2, 'part?');
            map.createRLink(thing1, thing2);
            map.createRLinkWithRThing(child11, child21, 'relationship?');
            map.createRLinkWithRThing(child12, child22, 'relationship?');
            map.createRLinkWithRThing(child13, child23, 'relationship?');
        },

        RS_WITH_OTHERS: function RS_WITH_OTHERS(x, y) {
            // 14
            var thing1 = map.createThing(x - 200, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 200, y, $scope.echoConcept2());
            var thing3 = map.createThing(x - 200, y + 200, 'another thing');
            var thing4 = map.createThing(x + 200, y + 200, 'another thing');
            map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createRLinkWithRThing(thing1, thing3, 'relationship?');
            map.createRLinkWithRThing(thing1, thing4, 'relationship?');
            map.createRLinkWithRThing(thing2, thing4, 'relationship?');
            map.createRLinkWithRThing(thing3, thing4, 'relationship?');
        },

        PARTS_OF_P: function PARTS_OF_P(x, y) {
            // 15
            var thing1 = map.createThing(x - 100, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            var child3 = map.createChild(thing1, 'part?');
            var thing2 = map.createThing(x + 100, y, $scope.echoConcept2());
            map.createPLink(thing1, thing2);
        },

        POINT_FOR: function POINT_FOR(x, y) {
            // 16
            var thing = map.createThing(x, y, 'new perspective');
            var thing1 = map.createThing(x - 150, y + 150, $scope.echoConcept1());
            var thing2 = map.createThing(x + 150, y + 150, $scope.echoConcept2());
            var rthing = map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createPLink(thing, rthing);
        },

        HAS_MULTIPLE_PS: function HAS_MULTIPLE_PS(x, y) {
            // 17
            var point1 = map.createThing(x, y + 50, 'viewpoint?');
            var point2 = map.createThing(x + 250, y, 'viewpoint?');
            var point3 = map.createThing(x + 500, y + 50, 'viewpoint?');
            var view = map.createThing(x + 250, y + 250, $scope.echoConcept1());
            map.createPLink(point1, view);
            map.createPLink(point2, view);
            map.createPLink(point3, view);
        },

        PARTS_FROM_MULTIPLE_PS: function PARTS_FROM_MULTIPLE_PS(x, y) {
            // 18
            var point1 = map.createThing(x - 100, y, 'viewpoint?');
            var point2 = map.createThing(x - 100, y + 125, 'viewpoint?');
            var point3 = map.createThing(x - 100, y + 250, 'viewpoint?');
            var thing = map.createThing(x + 150, y + 25, $scope.echoConcept1());
            var child1 = map.createChild(thing, 'part seen from viewpoint?');
            var child2 = map.createChild(thing, 'part seen from viewpoint?');
            var child3 = map.createChild(thing, 'part seen from viewpoint?');
            map.createPLink(point1, child1);
            map.createPLink(point1, child2);
            map.createPLink(point2, child2);
            map.createPLink(point3, child3);
        },

        WHAT_ABOUT: function WHAT_ABOUT(x, y) {
            // 19
            $scope.queries.WHAT_IS(x, y);
            $scope.queries.PARTS_OF(x + 300, y);
            $scope.queries.PARTS_FROM_MULTIPLE_PS(x + 700, y);
            $scope.queries.RS_TO_AND_BY(x, y + 400);
        }
    }; // queries
};

GeneratorCtrl.$inject = ['$scope'];

SandbankEditor.Generator = function ($scope, map) {

    this.init = function () {
        // NB: generator is opened on load of empty map; see map.js:load()
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (oldValue == map.ui.TAB_ID_GENERATOR) {
            // closing tab
            map.setEditingBlocked(false);
        } else if (newValue == map.ui.TAB_ID_GENERATOR) {
            // opening tab
            map.setEditingBlocked(true);
        }
    };

    // these get filtered out in LessonBook
    this.getPlaceholderIdeaNames = function () {
        return ['is?', 'is not?', 'part?', 'viewpoint?', 'related idea?', 'idea?', 'part seen from viewpoint?', 'contrast?', 'comparison?', 'relationship?'];
    };
};

},{"./sbEditor":38}],34:[function(require,module,exports){
'use strict';

var SandbankEditor = require('./sbEditor');

// layouts used in the editor, for the diagram or individual Groups, plus layout-related functions

SandbankEditor.Layouts = function ($scope, map) {

    var self = this;

    var metaMap = require('../../MetaMap');
    var config = metaMap.config.canvas;
    var CONSTANTS = require('../constants/constants');

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        var diagram = map.diagram;
        if (eventName == 'InitialLayoutCompleted') {
            diagram.updateAllTargetBindings();
            diagram.layoutDiagram(true);
        } else if (eventName == 'SelectionMoved') {
            updateSelectedPartLocationData(e);
            map.diagram.layoutDiagram(true);
        } else if (eventName == 'SelectionDeleted') {
            diagram.updateAllTargetBindings();
        } else if (eventName == 'PartCreated') {
            //console.log('Layouts, PartCreated');
            // setNewPartLocationData(e);
        } else if (eventName == 'PartResized') {
                setResizedPartDimensionData(e);
            } else if (eventName == 'LinkDrawn') {
                adjustLinkLayout(e.subject);
            } else if (eventName == 'LinkRelinked') {
                adjustLinkLayout(e.subject);
            }
    };

    // ------------ handle location/size attributes for nodes ---------------

    // only update w/h for slides, as all other node types have fixed dimensions according to the templates
    function setResizedPartDimensionData(e) {
        var diagram = map.diagram;
        var node = e.subject;
        if (node && node.category == 'slide') {
            //console.log('PartResized: ' + node.part.actualBounds);
            diagram.model.setDataProperty(node.data, 'width', node.part.actualBounds.width);
            diagram.model.setDataProperty(node.data, 'height', node.part.actualBounds.height);
        }
    }

    // set the 'loc' attribute for a new top-level node (created by double-clicking), to support freehand layout
    this.setNewPartLocationData = function (e) {
        var node = e.subject;
        if (node && node.part) {
            if (node instanceof go.Group) {
                map.diagram.model.setDataProperty(node.data, 'loc', node.part.location.x + ' ' + node.part.location.y);
            }
        }
    };

    // updates the 'loc' attribute for each selected part, to support freehand layout (does not apply to slides)
    function updateSelectedPartLocationData(e) {
        var diagram = map.diagram;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Group) {
                // thing
                var part = it.value;
                var parentX = 0;
                var parentY = 0;
                if (part.containingGroup) {
                    parentX = part.containingGroup.location.x;
                    parentY = part.containingGroup.location.y;
                }
                //console.log('moving group, subject: ' + e.subject + ', part: ' + part + ', height: ' + part.part.desiredSize.height + ', location: ' + part.part.location);
                if (!isNaN(part.location.x)) {
                    diagram.model.setDataProperty(part.data, 'loc', part.location.x - parentX + ' ' + (part.location.y - parentY));
                }
            }
        }
    }

    // ----------- changing layouts of things and their descendants ----------------

    this.fromAndToNodesAreVisible = function (link) {
        return link.fromNode && link.toNode && !self.hasCollapsedAncestor(link.fromNode) && !self.hasCollapsedAncestor(link.toNode);
    };

    this.labelNodeIsVisible = function (link) {
        return link.labelNodes.count && link.labelNodes.first().visible;
    };

    this.hasCollapsedAncestor = function (group) {
        while (true) {
            if (!group.containingGroup) {
                return false;
            } else if (!group.containingGroup.isSubGraphExpanded) {
                return true;
            } else {
                group = group.containingGroup;
            }
        }
    };

    // this.hasLinkLabelAncestor = function(group) {
    //     while (true) {
    //         if (!group.containingGroup) {
    //             return false;
    //         }
    //         else if (group.containingGroup.isLinkLabel) {
    //             return true;
    //         }
    //         else {
    //             group = group.containingGroup;
    //         }
    //     }
    // };

    this.getHighestAncestorWithLayout = function (group, layoutNames) {
        while (true) {
            if (!group.containingGroup) {
                return false;
            } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                return group.containingGroup;
            } else {
                group = group.containingGroup;
            }
        }
    };

    this.areSistersInInventoryLayout = function (group1, group2) {
        return group1.containingGroup == group2.containingGroup && group1.containingGroup && _.contains(['left', 'right'], group1.containingGroup.data.layout);
    };

    this.isNotWithinInventoryLayout = function (group) {
        return !self.isWithinInventoryLayout(group);
    };

    this.isRThingWithinInventoryLayout = function (group) {
        return group.isLinkLabel && self.isWithinInventoryLayout(group);
    };

    this.isWithinInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['left', 'right']);
    };

    this.isWithinLeftInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['left']);
    };

    this.isWithinRightInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['right']);
    };

    this.isWithinFreehandLayout = function (group) {
        return self.isWithinLayout(group, ['freehand']);
    };

    this.isWithinStackedLayout = function (group) {
        return self.isWithinLayout(group, ['stacked']);
    };

    this.isWithinLayout = function (group, layoutNames) {
        while (true) {
            if (!group.containingGroup) {
                //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': false');
                return false;
            } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': true');
                return true;
            } else {
                group = group.containingGroup;
            }
        }
    };

    this.showLeftTextBlock = function (group) {
        return self.isWithinRightInventoryLayout(group) && !self.isWithinStackedLayout(group) && !group.isLinkLabel;
    };

    this.showRightTextBlock = function (group) {
        return self.isWithinLeftInventoryLayout(group) && !self.isWithinStackedLayout(group) && !group.isLinkLabel;
    };

    this.setDescendantLayouts = function (group, layoutName) {
        if (layoutName == 'left' || layoutName == 'right' || layoutName == 'stacked') {
            var it = group.memberParts.iterator;
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group && !part.isLinkLabel) {
                    part.data.layout = layoutName;
                    self.setDescendantLayouts(part, layoutName);
                }
            }
        } else if (layoutName == 'freehand') {
            // stacked?
        }
    };

    this.disableLayoutForSelectedThings = function (layoutName) {
        var it = map.diagram.selection.iterator;
        if (!it.count) {
            return true;
        }
        while (it.next()) {
            if (!(it.value instanceof go.Group)) {
                return true;
            } else {
                var group = it.value;
                if (self.isWithinLayout(group, ['left', 'right', 'stacked'])) {
                    return true;
                }
            }
        }
        return false;
    };

    // -------------- scaling functions, etc. ----------------------

    // Computes the level of this group
    this.computeLevel = function (group) {
        //console.log('computeLevel, part: ' + part + ', containingGroup: ' + part.containingGroup);
        if (!(group instanceof go.Group) || group.containingGroup === null) {
            return 0;
        } else {
            return self.computeLevel(group.containingGroup) + 1;
        }
    };

    // gets the basic scaling for thing squares, by level
    function getThingScale(level) {
        return Math.pow(0.7, level); // 1, .45, .2025, .091125, ...
    }

    // this is only used for groups
    this.getScale = function (group, visitedGroupKeys) {
        if (group) {
            // keep track of groups we've visited to avoid infinite recursion
            // TODO: track down exactly how infinite loops are occurring,
            // or IF they still are since map.checkModel was introduced...
            if (visitedGroupKeys && Array.isArray(visitedGroupKeys)) {
                //console.log('visitedGroupKeys: ' + visitedGroupKeys);
                if (_.contains(visitedGroupKeys, group.data.key)) {
                    //console.log('hit already visited key: ' + group.data.key);
                    return 1;
                } else {
                    visitedGroupKeys.push(group.data.key);
                }
            } else {
                visitedGroupKeys = [group.data.key];
            }

            if (group.labeledLink) {
                // R-thing
                var fromScale = self.getScale(group.labeledLink.fromNode, visitedGroupKeys);
                var toScale = self.getScale(group.labeledLink.toNode, visitedGroupKeys);
                //console.log('getScale, fromScale: ' + fromScale + ', toScale: ' + toScale + ', visitedGroupKeys: ' + visitedGroupKeys.join(','));
                return Math.min(fromScale, toScale) * 0.5;
            } else if (group.containingGroup) {
                return self.getScale(group.containingGroup, visitedGroupKeys) * 0.7;
            } else {
                return getThingScale(self.computeLevel(group));
            }
        }
        return 1; // can occur when dragging R to empty space
    };

    // gets the margin to be used in stack layout between this group's children
    function getStackMargin(group) {
        return 10 / 0.7 * self.getScale(group);
    }

    // gets the margin to be used in stack layout between this group's children
    function getInventoryMargin(group) {
        if (self.computeLevel(group) <= 2) {
            return 10 * self.getScale(group);
        } else {
            return 3 * self.getScale(group);
        }
    }

    this.getExternalTextScale = function (group) {
        return 1;
    };

    this.getLinkStrokeWidth = function (link) {
        var fromScale = self.getScale(link.fromNode);
        var toScale = self.getScale(link.toNode);
        return (link.isSelected ? config.shapes.line.borderHighlightWidth : config.shapes.line.borderWidth) * Math.min(fromScale, toScale); // 2, .9, ...
    };

    // scale arrowheads based on the smallest to/from node,
    // or just the To node for P links
    this.getArrowheadScale = function (link) {
        var fromScale = self.getScale(link.fromNode);
        var toScale = self.getScale(link.toNode);
        var minScale = Math.min(fromScale, toScale);
        //console.log("getArrowheadScale, fromScale: ", fromScale, ', toScale: ', toScale, ', minScale: ', minScale);
        if (link.data.category == CONSTANTS.DSRP.P) {
            minScale = toScale;
        }
        if (minScale >= 1) {
            return config.shapes.line.arrowSize * minScale;
        } else {
            return (config.shapes.line.arrowSize + 0.5) * minScale;
        }
    };

    // -------------- creating new things ----------------------

    // Returns a location for a new sister group (thing) to the given one,
    // which will not hide any existing things (overlap is allowed).
    // The returned coordinates are absolute for a top-level group,
    // or relative to the parent otherwise - suitable for use with FreehandDiagramLayout
    // or FreehandLayout, resp.
    this.getNewSisterLocation = function (group, withR) {
        var diagram = map.diagram;
        // if we are within another group, things are in absolute coordinates
        // and sisters are placed above the thing; otherwise relative and below...
        var inGroup = group.containingGroup !== null;
        // ... except if withR is true, we go to the right instead of above or below.

        // start below if in group, else above; or to the right if withR
        var x, y, w, h;
        if (withR) {
            x = group.location.x + group.actualBounds.width * 2.2;
            y = group.location.y;
        } else {
            x = group.location.x;
            y = group.location.y + group.actualBounds.height * 1.1 * (inGroup ? 1 : -1);
        }
        w = group.actualBounds.width;
        h = group.actualBounds.height;

        // check for overlapping parts; if found, increment x,y and continue

        while (true) {
            var rect = new go.Rect(x, y, w, h);
            rect.grow(h / 10, w / 10, h / 10, w / 10);
            var parts = diagram.findObjectsIn(rect, null, self.isGroup);
            if (parts.count) {
                //console.log('getNewSisterLocation: overlapping part found in ' + rect);
                if (withR) {
                    x += w / 10;
                    y += h / 10;
                } else {
                    x += w / 10;
                    y += h / 10 * (inGroup ? 1 : -1); // move down if in group, else up
                }
            } else {
                    //console.log('getNewSisterLocation: no overlapping part found in ' + rect);
                    break;
                }
        }
        if (inGroup) {
            // make coordinates relative
            x -= group.containingGroup.location.x;
            y -= group.containingGroup.location.y;
        }
        return new go.Point(x + Math.random(), y + Math.random());
    };

    // Returns a location for a new child group (thing) to the given one,
    // which will not hide any existing children (overlap is allowed).
    // The returned coordinates are relative to the parent group - suitable for use with FreehandLayout.
    this.getNewChildLocation = function (group) {
        var groupBounds = group.actualBounds;
        // NB: all x/y locations are relative to the group location
        var x = 0;
        var y = groupBounds.height * 1.1;
        var w, h;
        var members = group.memberParts;
        // keep testing new rectangles until we find one that doesn't overlap with any existing member of the group
        while (true) {
            members.reset();
            var overlaps = false;
            var member, newRect, memberRect;
            while (members.next()) {
                member = members.value;
                var memberBounds = member.actualBounds;
                w = memberBounds.width;
                h = memberBounds.height;
                // find the existing member's actual bounds (absolute coords)
                memberRect = new go.Rect(memberBounds.x - groupBounds.x, memberBounds.y - groupBounds.y, memberBounds.width, memberBounds.height);
                newRect = new go.Rect(x, y, w, h);
                newRect.grow(h / 5, w / 5, h / 5, w / 5);
                overlaps = newRect.containsRect(memberRect);
                //console.log('getNewChildLocation for ' + member + ': newRect = ' + newRect + ', memberRect = ' + memberRect + ', overlaps: ' + overlaps);
                if (overlaps) {
                    break;
                }
            }
            if (overlaps) {
                // increment x, y and try again
                x += w / 5;
                y += h / 5;
            } else {
                // found a good spot!
                break;
            }
        }
        return new go.Point(x, y);
    };

    // a simpler version of getNewChildLocation that places the child outside the bounds of the existing children
    this.getNewChildLocation2 = function (group) {
        var groupBounds = group.actualBounds;
        var childBounds = map.safeRect(map.diagram.computePartsBounds(group.memberParts));
        var x = 0;
        var y = 0;
        if (!group.memberParts.count) {
            y = groupBounds.height * 1.2;
        } else {
            y = groupBounds.height * 1.4 + childBounds.height;
        }
        //console.log('getNewChildLocation2, childBounds: ' + childBounds + ', groupBounds: ' + groupBounds + ', x: ' + x + ', y: ' + y);
        return new go.Point(x, y);
    };

    // move all the given new member groups so that their locations are relative to that of
    // the parent and its previously existing members, and scaled down appropriately
    this.layoutNewMembersRelativeTo = function (newMembers, parent, oldMemberBounds) {
        // how big was the parent system before the new groups were added?
        var systemBounds = parent.actualBounds.unionRect(oldMemberBounds);

        // figure out old/new origins - place new origin below existing system
        var oldBounds = map.diagram.computePartsBounds(newMembers);
        var oldOrigin = new go.Point(oldBounds.x, oldBounds.y);
        var newOrigin = new go.Point(0, systemBounds.height * 1.2);
        //console.log('layoutNewMembersRelativeTo, systemBounds: ' + systemBounds + ', oldBounds: ' + oldBounds +  ', oldOrigin: ' + oldOrigin + ', newOrigin: ' + newOrigin);

        // figure out new scaled locations
        // NB: we can assume newMembers are all one level down from parent (see map.addSelectedThingsAsChildrenOf),
        // so we just multiply by the standard scale factor
        var it = newMembers.iterator;
        while (it.next()) {
            var group = it.value;
            var groupBounds = group.actualBounds;
            var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) * 0.45;
            var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) * 0.45;
            var newLoc = go.Point.stringify(new go.Point(newX, newY));
            //console.log('layoutNewMembersRelativeTo, groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
            map.diagram.model.setDataProperty(group.data, 'loc', newLoc);
        }
    };

    // move all the given old member groups so that their locations are absolute and above
    // the parent, and scaled up appropriately
    this.layoutOldMembersOutsideOf = function (oldMembers, parent, oldMembersBounds, oldMembersLevel) {
        // figure out scale factor (members can be dragged up multiple levels, unlike dragging into S)
        var scaleFactor = Math.pow(0.45, oldMembersLevel - self.computeLevel(parent));
        //console.log('layoutOldMembersOutsideOf, scaleFactor: ' + scaleFactor);

        // figure out old/new origins - place new origin above parent, with vertical space for scaled-up oldMembers
        var parentBounds = parent.actualBounds;
        var oldOrigin = new go.Point(oldMembersBounds.x, oldMembersBounds.y);
        var newOrigin = new go.Point(parentBounds.x, parentBounds.y - oldMembersBounds.height * 1.2 / scaleFactor);

        // figure out new scaled locations
        var it = oldMembers.iterator;
        while (it.next()) {
            var group = it.value;
            var groupBounds = group.actualBounds;
            var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) / scaleFactor;
            var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) / scaleFactor;
            var newLoc = go.Point.stringify(new go.Point(newX, newY));
            //console.log('layoutOldMembersOutsideOf, parentBounds: ' + parentBounds + ', oldMembersBounds: ' + oldMembersBounds + ', newOrigin: ' + newOrigin + ', groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
            map.diagram.model.setDataProperty(group.data, 'loc', go.Point.stringify(newLoc));
        }
    };

    // ----------------- accessors -------------------

    // returns the appropriate layout class by abbreviated name
    this.getLayout = function (layoutName) {
        if (layoutName == 'freehand') return new FreehandLayout();else if (layoutName == 'right') return new RightInventoryLayout();else if (layoutName == 'stacked') return new StackedLayout();else return new LeftInventoryLayout();
    };

    this.getFreehandDiagramLayout = function () {
        return new FreehandDiagramLayout();
    };

    // --------------------------------------------------------------

    // returns true if the to and from nodes for the link have a common ancestor group with one of the given layout names.
    // TODO: verify logic - what if there are multiple such ancestors? - this should return the highest one...
    function getCommonAncestorWithLayout(group1, group2, layoutNames) {
        var ancestors1 = self.getAncestorGroups(group1);
        var ancestors2 = self.getAncestorGroups(group2);
        var commonAncestors = _.intersection(ancestors1, ancestors2);
        var layoutAncestors = _.filter(commonAncestors, function (group) {
            return _.indexOf(layoutNames, group.data.layout) != -1;
        });
        if (layoutAncestors.length) {
            return layoutAncestors[0];
        } else {
            return null;
        }
    }

    // returns the ancestors of this group, including itself
    this.getAncestorGroups = function (group) {
        var ancestors = [group];
        var g = group;
        while (g.containingGroup) {
            ancestors.push(g.containingGroup);
            g = g.containingGroup;
        }
        return ancestors;
    };

    // --------------------------------------------------------------

    function FreehandDiagramLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(FreehandDiagramLayout, go.Layout);

    FreehandDiagramLayout.prototype.toString = function () {
        return "FreehandDiagramLayout";
    };

    FreehandDiagramLayout.prototype.doLayout = function (coll) {
        //console.log('FreehandDiagramLayout.doLayout');
        var diagram = map.diagram;
        // diagram.startTransaction("Freehand Diagram Layout");

        //validateGroupLocations(diagram.findTopLevelGroups());
        var groups = diagram.findTopLevelGroups(); // get new iterator
        while (groups.next()) {
            var group = groups.value;
            if (!group.isLinkLabel) {
                var loc = go.Point.parse(group.data.loc);
                group.move(new go.Point(loc.x, loc.y));
                //console.log('FreehandDiagramLayout, group: ' + group + ' to location: ' + loc.x + ',' + loc.y);
            }
        }

        // all adjustment of links is done from here, not from the other layouts...
        getLinksByNodes(true);
        var links = diagram.links.iterator;
        while (links.next()) {
            var link = links.value;
            // if (isNaN(link.location.x)) {
            //     //console.log('link location isNaN');
            //     link.move(new go.Point(0,0));
            // }
            // //console.log('link location: ' + link.location);
            adjustLinkLayout(link);
        }

        // diagram.commitTransaction("Freehand Diagram Layout");
    };

    // if any group in the given Iterator does not have a location (data.loc), set one
    // that doesn't overlap with the other members
    function validateGroupLocations(groups) {}

    // --------------------------------------------------------------

    function FreehandLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(FreehandLayout, go.Layout);

    FreehandLayout.prototype.toString = function () {
        return "FreehandLayout";
    };

    FreehandLayout.prototype.doLayout = function (coll) {
        var diagram = map.diagram;
        diagram.startTransaction("Freehand Layout");

        var x = this.group.location.x;
        var y = this.group.location.y;

        var it = this.group.memberParts.iterator;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group && !part.isLinkLabel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('FreehandLayout, part: ' + part.data.text + ', loc: ' + loc + ', location: ' + part.location);
                part.move(new go.Point(x + loc.x, y + loc.y));
                part.layout.doLayout(part);
            }
        }

        diagram.commitTransaction("Freehand Layout");
    };

    // --------------------------------------------------------------

    function StackedLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(StackedLayout, go.Layout);

    StackedLayout.prototype.toString = function () {
        return "StackedLayout";
    };

    StackedLayout.prototype.doLayout = function (coll) {
        this.diagram.startTransaction("Stacked Layout");
        var margin = getStackMargin(this.group);
        var startX = this.group.location.x;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + margin / 2);
        layoutMembersForStacked(this.group, startX, startY);
        this.diagram.commitTransaction("Stacked Layout");
    };

    // returns the max y value after laying out the last part
    function layoutMembersForStacked(group, startX, startY) {
        var members = getOrderedMembers(group);
        var x = startX;
        var y = startY;
        var rowCount = 0;
        var maxStartY = startY;
        _.each(members, function (part) {
            if (part instanceof go.Group && !part.isLinkLabel) {
                var margin = getStackMargin(part);
                part.move(new go.Point(x, y));
                startY = y + part.actualBounds.height + margin / 2; // start Y position for part's children

                //console.log('layoutMembersForStacked: starting layout of children of ' + part + ' at ' + Math.round(x) + ',' + Math.round(startY));

                if (part.isSubGraphExpanded) {
                    // layout children of this part; check if we've already done a taller part+children in current row
                    maxStartY = Math.max(maxStartY, layoutMembersForStacked(part, x, startY));
                    //console.log('layoutMembersForStacked: laid out children of ' + part + ', maxStartY is now ' + Math.round(maxStartY));
                } else {
                        maxStartY = Math.max(maxStartY, startY);
                    }

                // decide whether to wrap
                rowCount++;
                if (rowCount < 2) {
                    // keep going on this line
                    x += part.actualBounds.width + margin;
                } else {
                    // wrap to next line
                    x = startX;
                    y = maxStartY + margin / 2;
                    rowCount = 0;
                }
            }
        });
        return maxStartY;
    }

    // --------------------------------------------------------------

    function RightInventoryLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(RightInventoryLayout, go.Layout);

    RightInventoryLayout.prototype.toString = function () {
        return "RightInventoryLayout";
    };

    RightInventoryLayout.prototype.doLayout = function (coll) {
        //this.diagram.startTransaction("Inventory Layout");
        var startX = this.group.location.x + this.group.actualBounds.width;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + getInventoryMargin(this.group));
        layoutMembersForInventory(this.group, startX, startY, CONSTANTS.DSRP.R);
        //this.diagram.commitTransaction("Inventory Layout");
    };

    // --------------------------------------------------------------

    function LeftInventoryLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(LeftInventoryLayout, go.Layout);

    LeftInventoryLayout.prototype.toString = function () {
        return "LeftInventoryLayout";
    };

    LeftInventoryLayout.prototype.doLayout = function (coll) {
        //console.log('LeftInventoryLayout.doLayout, group: ' + this.group + ', location: ' + this.group.location);
        // this.diagram.startTransaction("Inventory Layout");
        var startX = this.group.location.x;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + getInventoryMargin(this.group));
        layoutMembersForInventory(this.group, startX, startY, 'L');
        // this.diagram.commitTransaction("Inventory Layout");
    };

    // shared stuff for Left/Right Inventory layouts...

    // returns the max y value after laying out the last part
    // side is 'L' or CONSTANTS.DSRP.R
    function layoutMembersForInventory(group, startX, startY, side) {
        var members = getOrderedMembers(group);
        _.each(members, function (part) {
            var x = startX; // for left, just use x
            if (side == CONSTANTS.DSRP.R) x = startX - part.actualBounds.width; // for right, right-align parts to startX
            //console.log('layoutMembersForInventory, part: ' + part + ' to location: ' + x + ',' + startY);
            part.move(new go.Point(x, startY));
            startY += part.actualBounds.height + getInventoryMargin(part);
            if (part.isSubGraphExpanded) {
                //console.log('layoutMembersForInventory, y after moving: ' + part + ' = ' + startY);
                startY = layoutMembersForInventory(part, startX, startY, side);
            }
        });
        return startY + getInventoryMargin(group);
    }

    // returns an array of the group's (non-R-thing) members, sorted by the 'order' data property
    function getOrderedMembers(group) {
        var members = new go.List();
        var it = group.memberParts.iterator;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group && !part.isLinkLabel) {
                members.add(part);
            }
        }
        return _.sortBy(members.toArray(), function (member) {
            return member.data.order;
        });
    }

    // ------------------------ link routing and visibility ------------------------------

    // adjust the routing, visibility and other properties of a link according to various structural criteria
    function adjustLinkLayout(link) {
        if (!link || !link.fromNode || !link.toNode) {
            return;
        }

        // var loc = link.location;
        // if (isNaN(loc.x) || isNaN(loc.y)) {
        //     link.location = new go.Point(10, 10);
        //     //console.log('adjustLinkLayout, link.location: ' + link.location);
        // }
        // //console.log('adjustLinkLayout, link.location: ' + link.location);

        // see if link is within a stacked or inventory layout, or if it's a hidden P link
        var inventoryAncestor = getCommonAncestorWithLayout(link.fromNode, link.toNode, ['left', 'right']);
        var stackedAncestor = getCommonAncestorWithLayout(link.fromNode, link.toNode, ['stacked']);
        var hidePLink = link.data && link.data.category == CONSTANTS.DSRP.P && !map.templates.showPLink(link);
        //var crowdedRThing = hasCrowdedRThing(link);

        // see if this is one of multiple links between the same two nodes
        var snpos = self.getSameNodesLinkPosition(link);
        var isMultiLink = snpos.count > 1;
        //console.log('snpos for link ' + link + ': ' + snpos.index + ' of ' + snpos.count);

        if (inventoryAncestor) {
            applyInventoryCurveRouting(link, snpos, inventoryAncestor.data.layout);
        } else if (isMultiLink) {
            applyMultilinkCurveRouting(link, snpos);
        } else {
            applyStraightRouting(link);
        }

        // show link only if both connected things are visible (no collapsed ancestors);
        // hide if both are in stacked layout or if it's a P-link that we shouldn't be showing now
        if (self.fromAndToNodesAreVisible(link) && !stackedAncestor && !hidePLink) {
            link.opacity = 1;
            showLabelNodes(link, true);
        } else {
            link.opacity = 0;
            showLabelNodes(link, false);
        }
    }

    // TODO: detect when the R-thing overlaps both from and to nodes, so we can change the link routing
    function hasCrowdedRThing(link) {
        return false;
    }

    function showLabelNodes(link, show) {
        //console.log('showLabelNodes, link: ' + link + ', show: ' + show);
        var it = link.labelNodes;
        if (it) {
            while (it.next()) {
                var group = it.value;
                group.visible = show;
                if (show) {
                    group.layout.doLayout(group);
                }
            }
        }
    }

    // if link is between two things in the same inventory layout (single or multiple),
    // make the line more or less circular on the appropriate side
    function applyInventoryCurveRouting(link, snpos, ancestorLayout) {
        if (ancestorLayout == 'left') {
            link.fromSpot = go.Spot.Left;
            link.toSpot = go.Spot.Left;
        } else if (ancestorLayout == 'right') {
            link.fromSpot = go.Spot.Right;
            link.toSpot = go.Spot.Right;
        }

        // aspect ratio for the link curves - make this smaller to make them taller, larger to make them fatter
        var curveRatio = 0.6;

        var y1 = link.fromNode.actualBounds.y;
        var y2 = link.toNode.actualBounds.y;

        var yDiff = Math.abs(y2 - y1);
        var c = (yDiff === 0 ? 50 : Math.floor(yDiff * curveRatio)) + 100 * (snpos.index / snpos.count);
        //console.log("yDiff = " + yDiff + ', c = ' + c + ' (' + link.fromNode.data.text + ' - ' + p1 + ' - to ' + link.toNode.data.text + ' - ' + p2 + ')');

        link.curve = go.Link.Bezier;
        link.fromEndSegmentLength = c;
        link.toEndSegmentLength = c;
    }

    // if non-inventory link is one of multiple ones between same nodes, make it curved
    function applyMultilinkCurveRouting(link, snpos) {
        link.fromSpot = go.Spot.Default;
        link.toSpot = go.Spot.Default;
        link.curve = go.Link.Bezier;
        // curviness values based on number of links:
        // 2: -25 25
        // 3: -50 0 50
        // 4: -100 -50 0 50 100
        var rangeSize = 10 * (snpos.count - 1);
        var rangeIncrement = 10;
        if (snpos.hasRThing) {
            rangeSize = 100 * (snpos.count - 1);
            rangeIncrement = 100;
        }

        // adjust curviness for smaller scales
        var linkScaleFactor = self.getLinkStrokeWidth(link) / 2; // 2 is max stroke width
        rangeSize *= linkScaleFactor;
        rangeIncrement *= linkScaleFactor;

        var rangeStart = 0 - rangeSize / 2;

        link.curviness = (rangeStart + rangeIncrement * snpos.index) * snpos.orientation;
        // //console.log('applyMultilinkCurveRouting, link: ' + link + ', curviness: ' + link.curviness);
    }

    // do normal straight lines for freehand layout, or links between descendants of things with different layouts
    function applyStraightRouting(link) {
        link.fromSpot = go.Spot.Default;
        link.toSpot = go.Spot.Default;
        link.routing = go.Link.Normal;
        link.curve = go.Link.Bezier;
        link.curviness = 25;
    }

    // --------------- calculate how many links there are between a link's nodes ---------------

    // Returns an object of the format { index: 1, count: 2, orientation: -1, hasRThing: false },
    // indicating how many other links there are between the same pair of nodes,
    // where the given link falls within this list, and what its orientation is.
    this.getSameNodesLinkPosition = function (link) {
        var linksByNodes = getLinksByNodes(true);
        // get links with the same key as this one (connecting same nodes)
        var sameLinks = _.where(linksByNodes, {
            key: getSameNodesLinkKey(link)
        });

        // default return value
        var snpos = {
            index: 0,
            count: 1,
            orientation: 1,
            hasRThing: false
        };
        // set index, count, orientation
        for (var i = 0; i < sameLinks.length; i++) {
            if (sameLinks[i].link == link) {
                snpos = {
                    index: i,
                    count: sameLinks.length,
                    orientation: getLinkOrientation(link)
                };
            }
        }
        // check for Rthing
        for (i = 0; i < sameLinks.length; i++) {
            if (sameLinks[i].hasRThing) {
                snpos.hasRThing = true;
            }
        }
        return snpos;
    };

    var _linksByNodes = null;

    // refreshes the cached list of all links with keys, to facilitate grouping them according to connected nodes
    function getLinksByNodes(refresh) {
        //console.log('getLinksByNodes');
        if (!self._linksByNodes || refresh) {
            self._linksByNodes = [];
            var diagram = map.diagram;
            var links = diagram.links.iterator;
            while (links.next()) {
                var link = links.value;
                var key = getSameNodesLinkKey(link);
                if (key) {
                    self._linksByNodes.push({
                        key: key,
                        link: link,
                        hasRThing: link.labelNodes.count > 0
                    });
                }
            }
        }
        return self._linksByNodes;
    }

    // Returns a key used to group links according to which pair of nodes they connect.
    // The returned key is non-empty for regular links and P links that should be shown currently,
    // so that these will all be routed by the same rules. A null key is returned for any other
    // links, indicating that no grouping is required.
    function getSameNodesLinkKey(link) {
        //        if (self.isRLink(link) || (self.isPLink(link) && map.templates.showPLink(link))) {
        if (self.isRLink(link)) {
            var key = [link.fromNode.toString(), link.toNode.toString()].sort().join('|');
            //console.log('key: ' + key);
            return key;
        } else {
            return null;
        }
    }

    // We use this to distinguish an A-B link from a B-A link (based on fromNode and toNode, which
    // is independent of the arrowhead settings) when setting curviness, because setting curviness = 25
    // on an A-B link is the same as curviness = -25 on a B-A link.
    function getLinkOrientation(link) {
        if (link.fromNode && link.toNode && link.fromNode.toString() < link.toNode.toString()) {
            return 1;
        } else {
            return -1;
        }
    }

    // -------------- link tests ---------------

    this.isRLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category === undefined && link.fromNode && link.toNode;
    };

    this.isDLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category == CONSTANTS.DSRP.D;
    };

    this.isPLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category == CONSTANTS.DSRP.P;
    };

    this.isGroup = function (obj) {
        return obj instanceof go.Group;
    };
};

},{"../../MetaMap":1,"../constants/constants":48,"./sbEditor":38}],35:[function(require,module,exports){
'use strict';

var NodeLabelDraggingTool = require('./extensions/NodeLabelDraggingTool.js');
var SandbankEditor = require('./sbEditor');
var CONSTANTS = require('../constants/constants');
var ButtonDraggingTool = require('./buttons/buttonDragging');
var mk = go.GraphObject.make;
// functions for creating and manipulating the map (i.e. Diagram)

SandbankEditor.Map = function ($scope, $http, $resource, $timeout, $modal, $log) {

    var self = this;

    // ------------ component accessors ----------------

    function getComponents() {
        return [self.analytics, self.attachments, self.autosave, self.generator,
        // _history,
        self.layouts, self.perspectives, self.presenter, self.standards, self.templates, self.tests, self.ui];
    }

    this.diagram = null;
    this.analytics = null;
    this.attachments = null;
    this.autosave = null;
    this.generator = null;
    this.layouts = null;
    this.perspectives = null;
    this.presenter = null;
    this.standards = null;
    this.templates = null;
    this.tests = null;
    this.ui = null;

    // -------------- map init ------------------

    this.init = function () {

        // initialize components
        self.analytics = new SandbankEditor.Analytics($scope, $http, self);
        self.attachments = new SandbankEditor.Attachments($scope, $http, $resource, self);
        self.autosave = new SandbankEditor.Autosave($scope, $http, self);
        self.generator = new SandbankEditor.Generator($scope, self);
        // _history = new SandbankEditor.History($scope, $http, self);
        self.layouts = new SandbankEditor.Layouts($scope, self);
        self.perspectives = new SandbankEditor.Perspectives($scope, self);
        self.presenter = new SandbankEditor.Presenter($scope, self);
        self.standards = new SandbankEditor.Standards($scope, self);
        self.templates = new SandbankEditor.Templates($scope, self);
        self.tests = new SandbankEditor.Tests($scope, self);
        self.ui = new SandbankEditor.UI($scope, $timeout, $http, $resource, $modal, $log, self);

        // call init for each component, if defined
        _.each(getComponents(), function (component) {
            if (component && component.init) component.init();
        });

        // create diagram
        self.diagram = mk(go.Diagram, "diagram", {
            initialContentAlignment: go.Spot.Center,
            initialViewportSpot: go.Spot.Center,
            initialDocumentSpot: go.Spot.Center,
            hasHorizontalScrollbar: false,
            hasVerticalScrollbar: false,
            padding: 500,
            layout: self.layouts.getFreehandDiagramLayout(),
            "undoManager.isEnabled": true,
            draggingTool: new ButtonDraggingTool(self),
            hoverDelay: 200
        });
        self.diagram.toolManager.mouseMoveTools.insertAt(0, new NodeLabelDraggingTool());

        initTools();
        self.templates.initTemplates(self.diagram); // set up templates, customize temporary link behavior
        addDiagramListeners();

        self.templates.addExportFooter();

        // watch for tab changes
        $scope.$watch('currentTab', function (newValue, oldValue) {
            self.currentTabChanged(newValue, oldValue);
        });
    };

    // this is called by a $scope.$watch in init()
    this.currentTabChanged = function (newValue, oldValue) {
        // //console.log('currentTabChanged, newValue: ' + newValue + ', oldValue: ' + oldValue);
        // notify any interested components
        _.each(getComponents(), function (component) {
            if (component && component.currentTabChanged) {
                component.currentTabChanged(newValue, oldValue);
            }
        });

        //$scope.safeApply();
    };

    // misc. tool configuration
    function initTools() {
        // disable clicking on TextBlocks to edit - we will invoke editing in other ways
        self.diagram.allowTextEdit = false;

        // select text when activating editor;
        // use shift-enter to create new lines, enter to finish editing (NB: editor has multiline=true)
        var textTool = self.diagram.toolManager.textEditingTool;
        textTool.doActivate = function () {
            go.TextEditingTool.prototype.doActivate.call(textTool);
            if (textTool.defaultTextEditor !== null) {
                textTool.defaultTextEditor.select();

                textTool.defaultTextEditor.addEventListener("keydown", function (e) {
                    if (e.which == 13 && !e.shiftKey) {
                        go.TextEditingTool.prototype.acceptText.call(textTool, go.TextEditingTool.LostFocus);
                    }
                });
            }
        };

        // handle delete key on Mac (default behavior only uses fn-Delete to delete from canvas)
        self.diagram.commandHandler.doKeyDown = function () {
            var e = self.diagram.lastInput;
            var cmd = self.diagram.commandHandler;
            if (e.event.which === 8) {
                cmd.deleteSelection();
            } else {
                go.CommandHandler.prototype.doKeyDown.call(cmd); // call base method with no arguments
            }
        };

        // [disable keyboard shortcuts, as these do not do centering on zoom,
        // and can lead to confusion with browser zoom (which gets fired depends on focus)]
        // - turned back on to support pinch/zoom on iPad
        self.diagram.allowZoom = true;

        self.diagram.toolManager.mouseWheelBehavior = go.ToolManager.WheelZoom;

        // decide what kinds of Parts can be added to a Group or to top-level
        // self.diagram.commandHandler.memberValidation = function (grp, node) {
        //     //if (grp instanceof go.Group && node instanceof go.Group) return false;  // cannot add Groups to Groups
        //     return true;
        // };

        // default link attributes
        self.diagram.toolManager.linkingTool.archetypeLinkData = {
            type: 'noArrows'
        };
        // default link attributes
        self.diagram.toolManager.draggingTool.archetypeLinkData = {
            type: 'noArrows'
        };

        // allow double-click in background to create a new node
        self.diagram.toolManager.clickCreatingTool.archetypeNodeData = getNewThingData();

        // how long mouse must be held stationary before starting a drag-select (instead of a scroll) - default was 175ms
        self.diagram.toolManager.dragSelectingTool.delay = 400;
    }

    // ----------- handling of DiagramEvents --------------------

    function addDiagramListeners() {

        // DiagramEvents to be handled here or by a component
        var diagramEvents = ["InitialLayoutCompleted", "ChangedSelection", "BackgroundSingleClicked", "SelectionCopied", "SelectionMoved", "SelectionDeleting", "SelectionDeleted", "PartCreated", "PartResized", "ClipboardChanged", "ClipboardPasted", "LinkDrawn", "LinkRelinked", "ViewportBoundsChanged"];
        _.each(diagramEvents, function (eventName) {
            self.diagram.addDiagramListener(eventName, function (e) {
                broadcastDiagramEvent(eventName, e);
            });
        });

        self.diagram.addDiagramListener("BackgroundContextClicked", function (e) {
            // TODO: turn off in production
            //console.log('diagram model:' + self.diagram.model.toJson());
        });
    }

    // broadcasts the given DiagramEvent (see apidocs for go.DiagramEvent)
    // to any components that may be interested, including this one.
    function broadcastDiagramEvent(eventName, e) {
        self.handleDiagramEvent(eventName, e);
        _.each(getComponents(), function (component) {
            if (component && component.handleDiagramEvent) component.handleDiagramEvent(eventName, e);
        });
        $scope.safeApply();
    }

    this.handleDiagramEvent = function (eventName, e) {
        //console.log('handleDiagramEvent: ' + eventName);
        if (eventName == 'ChangedSelection') {
            changedSelection(e);
        } else if (eventName == 'SelectionCopied') {
            selectionCopied(e);
        } else if (eventName == 'PartCreated') {
            partCreated(e);
        } else if (eventName == 'BackgroundSingleClicked') {
            self.ui.showHelpTip('canvasTip');
        } else if (eventName == 'LinkDrawn') {
            linkDrawn(e);
            setNewLinkDirection(e);
        } else if (eventName == 'LinkRelinked') {
            linkRelinked(e);
        } else if (eventName == 'ClipboardChanged') {
            clipboardChanged(e);
        } else if (eventName == 'ClipboardPasted') {
            clipboardPasted(e);
        }
    };

    // handle zoom to region if applicable
    function changedSelection(e) {
        //console.log('map.changedSelection');
        self.diagram.updateAllTargetBindings();
        self.ui.maybeZoomToRegion();
        if (self.relationshipsSelected()) {
            self.ui.showHelpTip('relationshipTip');
        }
    }

    function partCreated(e) {
        //console.log('Map, PartCreated');
        var group = e.subject;
        if (!(group instanceof go.Group)) {
            return;
        }
        self.diagram.model.setDataProperty(group.data, 'layout', self.ui.getMapEditorOptions().defaultThingLayout || 'left');
        self.layouts.setNewPartLocationData(e);
    }

    // fix link ports when a link is created -
    // the P and R ports both cover the whole node, and the P port is on top of the R port,
    // so both P and R links get the toPort set to P by default.
    function linkDrawn(e) {
        var link = e.subject;
        //console.log('linkDrawn, link: ' + link + ', fromPort: ' + link.fromPortId + ', toPort: ' + link.toPortId);
        if (link.data.text == CONSTANTS.DSRP.P || link.fromPortId == CONSTANTS.DSRP.P) {
            link.fromPortId = CONSTANTS.DSRP.P;
            self.diagram.model.startTransaction("change link category");
            self.diagram.model.setDataProperty(link.data, 'toPort', CONSTANTS.DSRP.P);
            self.diagram.model.setDataProperty(link.data, 'category', CONSTANTS.DSRP.P);
            self.diagram.model.commitTransaction("change link category");
        }
        // prevent links from R to P
        else if (link.data.text == CONSTANTS.DSRP.R || link.fromPortId == CONSTANTS.DSRP.R) {
                link.fromPortId = CONSTANTS.DSRP.R;
                self.diagram.model.startTransaction("change link toPort");
                self.diagram.model.setDataProperty(link.data, 'toPort', CONSTANTS.DSRP.R);
                self.diagram.model.commitTransaction("change link toPort");
            }
    }

    // fix link ports when a link is relinked -
    // dragging either end of an R-link to another node will set the corresponding port to P,
    // since P port is on top of R port, so we reset both ports to R if the category is not P.
    function linkRelinked(e) {
        var link = e.subject;
        if (link.data.category === undefined || link.data.category !== CONSTANTS.DSRP.P) {
            self.diagram.model.setDataProperty(link.data, 'fromPort', CONSTANTS.DSRP.R);
            self.diagram.model.setDataProperty(link.data, 'toPort', CONSTANTS.DSRP.R);
        }
    }

    function setNewLinkDirection(e) {
        var link = e.subject;
        if (link.fromPortId == CONSTANTS.DSRP.R) {
            self.diagram.model.startTransaction("change link direction");
            self.diagram.model.setDataProperty(link.data, 'type', self.ui.getMapEditorOptions().defaultRelationshipDirection);
            self.diagram.commitTransaction("change link direction");
        }
    }

    function clipboardChanged(e) {
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group) {
                //console.log('clipboardChanged: part ' + part + ', mainpanel scale: ' + part.findObject('mainpanel').scale);
            }
        }
    }

    // NB: this is called when parts are copied by control-drag, NOT when the copy button is clicked
    function selectionCopied(e) {
        //console.log('selectionCopied');
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group && part.isTopLevel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('selectionCopied: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                self.diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                part.updateTargetBindings('loc');
            }
        }
    }

    function clipboardPasted(e) {
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group && part.isTopLevel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('clipboardPasted: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                self.diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                part.updateTargetBindings('loc');
            }
        }
    }

    // computes the bounds of all groups in the diagram - this includes all ideas/things,
    // and excludes nodes, including slides, the slide blocker, and the export footer
    this.computeMapBounds = function () {
        var groups = new go.List(go.Group);
        var nodes = self.diagram.nodes;
        while (nodes.next()) {
            if (nodes.value instanceof go.Group) {
                groups.add(nodes.value);
            }
        }
        return self.diagram.computePartsBounds(groups).copy(); // return a mutable rect
    };

    // ------------ what is currently selected? ----------------

    // returns true if all selected items are things (i.e. Groups), including r-things
    this.thingsSelected = function () {
        if (self.diagram == null || self.diagram.selection.count < 1) return false;

        var it = self.diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Group)) return false;
        }

        return true;
    };

    // returns true if exactly one thing (Group) is selected
    this.thingSelected = function () {
        return self.diagram !== null && self.diagram.selection.count == 1 && self.diagram.selection.first() instanceof go.Group;
    };

    // if a single group is selected, returns it, otherwise returns null
    this.getUniqueThingSelected = function () {
        if (self.diagram !== null && self.diagram.selection.count == 1 && self.diagram.selection.first() instanceof go.Group) {
            return self.diagram.selection.first();
        } else {
            return null;
        }
    };

    this.thingsSelectedAreMembersOf = function (group) {
        if (self.diagram === null || self.diagram.selection.count < 1) return false;

        var it = self.diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Group) || it.value.containingGroup != group) return false;
        }

        return true;
    };

    this.thingsSelectedAreDescendantsOf = function (group) {
        if (self.diagram === null || self.diagram.selection.count < 1) return false;

        var it = self.diagram.selection.iterator;
        while (it.next()) {
            var ancestors = self.layouts.getAncestorGroups(it.value);
            if (_.indexOf(ancestors, group) == -1) return false;
        }

        return true;
    };

    this.thingsSelectedIncludeSlide = function () {
        if (self.diagram === null || self.diagram.selection.count < 1) return false;

        var it = self.diagram.selection.iterator;
        while (it.next()) {
            if (it.value.data && it.value.data.category == 'slide') {
                return true;
            }
        }

        return false;
    };

    // returns true if all selected items are relationships (i.e. Links)
    this.relationshipsSelected = function () {
        if (self.diagram === null || self.diagram.selection.count < 1) return false;

        var it = self.diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Link) || !self.layouts.isRLink(it.value)) return false;
        }

        return true;
    };

    // returns true if exactly one relationship (Link) is selected
    this.relationshipSelected = function () {
        return self.diagram !== null && self.diagram.selection.count == 1 && self.diagram.selection.first() instanceof go.Link;
    };

    // ------------ load and initialize model -------------

    this.reload = function (data) {
        self.diagram.model = go.Model.fromJson(data);
        self.diagram.model.addChangedListener(self.autosave.modelChanged);
    };

    this.load = function (data) {

        data = data || $scope.mapData.data;
        self.diagram.model = go.Model.fromJson(data);
        self.ui.setStateData($scope.mapData.state_data);
        self.ui.setMapEditorOptions($scope.mapData.editor_options);

        self.checkModel();
        self.diagram.updateAllTargetBindings();
        self.diagram.undoManager.isEnabled = true;
        self.diagram.model.addChangedListener(self.autosave.modelChanged);
        self.autosave.saveOnModelChanged = true;
        self.diagram.isReadOnly = !$scope.canEdit;
        $scope.updateEditStatus($scope.canEdit ? $scope.LAST_UPDATED : $scope.READ_ONLY);
        //self.ui.resetZoom();
        self.loadMapExtraData($scope.mapData);

        // if no nodes OR in thinkquery mode, launch generator
        if ($scope.thinkquery || !self.diagram.model.nodeDataArray.length) {
            self.ui.openTab(self.ui.TAB_IDself.generator);
        }
        // if we have slides, play presentation
        else if (!$scope.canEdit && self.presenter.getSlideNodeDatas().length) {
                self.presenter.playSlide(1);
            }
    };

    this.loadForSandbox = function () {
        self.diagram.model = go.Model.fromJson($scope.mapData);
        self.ui.setStateData(''); // important! (otherwise corner highlighting breaks)
        self.diagram.updateAllTargetBindings();
        self.diagram.undoManager.isEnabled = true;
        self.ui.resetZoom();
        $scope.canEdit = true;

        // if no nodes OR in thinkquery mode, launch generator
        if ($scope.thinkquery) {
            self.ui.openTab(self.ui.TAB_IDself.generator);
        }
        // if we have slides, play presentation
        else if (self.presenter.getSlideNodeDatas().length) {
                self.presenter.playSlide(1);
            }
    };

    // fix any structural problems in the model before displaying it
    this.checkModel = function () {
        // change "isLinkLabel" property to category:"LinkLabel" (change as of goJS 1.3)
        _.each(self.diagram.model.nodeDataArray, function (nodeData, index, list) {
            if (nodeData.isLinkLabel) {
                delete nodeData.isLinkLabel;
                nodeData.category = "LinkLabel";
            }
        });

        // check for the link label (r-thing) for a link being the same as the from or to node
        // - this can cause infinite recursion in thinks like layout.getScale
        _.each(self.diagram.model.linkDataArray, function (linkData, index, list) {
            var badLabelKeys = [];
            _.each(linkData.labelKeys, function (key, index2, list2) {
                if (key == linkData.from || key == linkData.to) {
                    //console.log('labelKey same as from or to of link: ' + key);
                    badLabelKeys.push(key);
                }
            });
            linkData.labelKeys = _.difference(linkData.labelKeys, badLabelKeys);
        });
    };

    // loads other data besides the diagram model from the json object returned by maps/show.json
    // - this includes points, badges, versions, and map analytics
    // NB: points and badges are set at page load time in layouts/user and users/badges, but
    // we also need to be able to update them here after an autosave

    // TODO: is this still all needed with the newer userProfile stuff?
    this.loadMapExtraData = function (mapData) {
        $scope.safeApply(function () {
            //console.log('map.loadMapExtraData, mapData: ' + mapData);
            $scope.mapUserTags = mapData.metadata.userTags; // TODO: is this used anywhere?

            //$scope.map.getHistory().versionList = mapData.versions;
            $scope.map.analytics.mapAnalytics = mapData.analytics;
        });
    };

    // loads model data for an individual version and displays it
    // NB: this also disables autosave; load() must be called to re-enable it
    this.loadVersion = function (id) {
        $http.get('/map_versions/' + id).then(function (response) {
            if (response.status === 200) {
                try {
                    //console.log('loaded map version with ID: ' + id);
                    self.diagram.model = go.Model.fromJson(response.data);
                    self.diagram.updateAllTargetBindings();
                    self.diagram.undoManager.isEnabled = false;
                    self.autosave.saveOnModelChanged = false;
                    self.diagram.layoutDiagram(true);
                    self.diagram.isReadOnly = true;
                } catch (e) {
                    alert('Could not load MetaMap version');
                    //console.error(e.message);
                }
            }
        });
    };

    // set whether editing capability is temporarily suspended -
    // this is distinct from the global $scope.canEdit setting,
    // which if false prevents editing at all times
    this.setEditingBlocked = function (val) {
        if ($scope.canEdit) {
            self.diagram.isReadOnly = val;
        }
    };

    // ------------- creating things in the model -------------------

    // default properties for all new Things (groups) - note that these can be overridden if needed
    function getNewThingData() {
        return {
            text: 'Idea',
            isGroup: true,
            layout: self.ui.getMapEditorOptions().defaultThingLayout || 'left',
            sExpanded: true,
            pExpanded: true
        };
    }

    this.createSister = function (thing) {
        if (!$scope.canEdit) {
            return null;
        }

        var newLoc = self.layouts.getNewSisterLocation(thing);
        var data = _.extend(getNewThingData(), {
            group: thing.data.group,
            text: 'Idea',
            loc: go.Point.stringify(newLoc)
        });
        self.diagram.model.addNodeData(data);
        var newSister = self.diagram.findNodeForData(data);

        // put new sister right after thing (not as the last sibling)
        if (thing.containingGroup) {
            self.moveSiblingNextTo(newSister, thing, CONSTANTS.CANVAS.RIGHT);
        }
        return newSister;
    };

    this.createRToSister = function (thing) {
        if (!$scope.canEdit) {
            return null;
        }

        var thingKey = self.diagram.model.getKeyForNodeData(thing.data);
        //console.log('thingKey: ' + thingKey);
        var newLoc = self.layouts.getNewSisterLocation(thing, true); // withR = true
        var data = _.extend(getNewThingData(), {
            group: thing.data.group,
            text: 'Idea',
            loc: go.Point.stringify(newLoc)
        });
        self.diagram.model.addNodeData(data);
        var newSister = self.diagram.findNodeForData(data);
        var groupKey = self.diagram.model.getKeyForNodeData(data);

        // create link
        var linkData = {
            from: thingKey,
            to: groupKey,
            type: 'to',
            fromPort: CONSTANTS.DSRP.R,
            toPort: CONSTANTS.DSRP.R
        };
        self.diagram.model.addLinkData(linkData);

        // put new sister right after thing (not as the last sibling)
        if (thing.containingGroup) {
            self.moveSiblingNextTo(newSister, thing, CONSTANTS.CANVAS.RIGHT);
        }
        return newSister;
    };

    this.createChild = function (thing, name, x, y) {
        if (!$scope.canEdit) {
            return null;
        }

        var newLoc = self.layouts.getNewChildLocation2(thing);
        if (x || y) {
            newLoc = new go.Point(x, y);
        }
        var data = _.extend(getNewThingData(), {
            group: thing.data.key,
            text: name || 'Part',
            loc: go.Point.stringify(newLoc)
        });
        self.diagram.model.addNodeData(data);
        self.layouts.setDescendantLayouts(thing, thing.data.layout);
        var child = self.diagram.findNodeForData(data);
        child.updateTargetBindings();
        return child;
    };

    this.createRThing = function (link, name) {
        if (!$scope.canEdit) {
            return null;
        }

        // //console.log('createRThing, link: ' + link + ', name: ' + name);
        // don't allow multiple R-things
        if (link.isLabeledLink) {
            // //console.log('cannot create RThing, link is already labeled');
            return;
        }

        var data = _.extend(getNewThingData(), {
            text: name || 'Relationship Idea',
            //isLinkLabel: true,     // deprecated as of goJS 1.3
            category: "LinkLabel", // new as of goJS 1.3
            loc: '0 0'
        });
        self.diagram.model.startTransaction("create R Thing");
        self.diagram.model.addNodeData(data);
        var key = self.diagram.model.getKeyForNodeData(data);
        var node = self.diagram.findPartForKey(key);
        node.labeledLink = link;
        self.diagram.model.commitTransaction("create R Thing");
        self.diagram.updateAllTargetBindings();

        return self.diagram.findNodeForData(data);
    };

    // ---------- creating things with specified names/locations - for use by generator and tests ------------

    this.createThing = function (x, y, name, layout) {
        group = self.diagram.toolManager.clickCreatingTool.insertPart(new go.Point(x, y));
        self.diagram.model.setDataProperty(group.data, 'text', name);
        if (layout) {
            self.diagram.model.setDataProperty(group.data, 'layout', layout);
        }
        return group;
    };

    this.createRLinkWithRThing = function (thing1, thing2, name) {
        var link = self.createRLink(thing1, thing2);
        return self.createRThing(link, name);
    };

    // returns the linkData object for the new link
    this.createRLink = function (thing1, thing2) {
        self.diagram.model.startTransaction('add link');
        var data = {
            type: 'noArrows',
            from: thing1.data.key,
            to: thing2.data.key,
            fromPort: CONSTANTS.DSRP.R,
            toPort: CONSTANTS.DSRP.R
        };
        self.diagram.model.addLinkData(data);
        self.diagram.model.commitTransaction('add link');
        return self.diagram.findLinkForData(data);
    };

    // returns the linkData object for the new link
    this.createPLink = function (thing1, thing2) {
        self.diagram.model.startTransaction('add link');
        var data = {
            type: 'noArrows',
            from: thing1.data.key,
            to: thing2.data.key,
            fromPort: CONSTANTS.DSRP.P,
            toPort: CONSTANTS.DSRP.P,
            category: CONSTANTS.DSRP.P
        };
        self.diagram.model.addLinkData(data);
        self.diagram.model.commitTransaction('add link');
        self.diagram.model.setDataProperty(thing1.data, 'pExpanded', true);
        return self.diagram.findLinkForData(data);
    };

    // ------------- moving things in the model structure -------------------

    // returns a go.List of the items in the current selection that are Groups
    function getSelectedGroups() {
        var it = self.diagram.selection.iterator;
        var members = new go.List();
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group) {
                members.add(part);
            }
        }
        return members;
    }

    // drag to S
    this.addSelectedThingsAsChildrenOf = function (group) {
        var newMembers = getSelectedGroups();

        // check existing members so we can calculate layout
        var oldMemberBounds = self.safeRect(self.diagram.computePartsBounds(group.memberParts));

        // NB: this is subject to validation by CommandHandler.isValidMember,
        // so for example, members of members of newMembers will not be added as members
        group.addMembers(newMembers);

        self.layouts.layoutNewMembersRelativeTo(newMembers, group, oldMemberBounds);

        self.diagram.clearSelection();
    };

    // drag to D
    this.addSelectedThingsAsSistersOf = function (group) {
        var oldMembers = getSelectedGroups();

        // if dragging to top level, move dragged things so they don't overlap the former parent
        if (!group.containingGroup) {
            // check existing members so we can calculate layout
            var oldMembersBounds = self.diagram.computePartsBounds(oldMembers);
            // NB: oldMembers can be on multiple levels, so not clear which level to use for rescaling old members after drag
            var oldMembersLevel = self.layouts.computeLevel(oldMembers.first());

            var it = oldMembers.iterator;
            while (it.next()) {
                var member = it.value;
                member.containingGroup = null;
            }
            self.layouts.layoutOldMembersOutsideOf(oldMembers, group, oldMembersBounds, oldMembersLevel);
        }
        // if not dragging to top level, place dragged things after former parent in outline
        else {
                var it2 = oldMembers.iterator;
                while (it2.next()) {
                    var member2 = it2.value;
                    member2.containingGroup = group.containingGroup;
                    self.moveSiblingNextTo(member2, group, CONSTANTS.CANVAS.RIGHT);
                }
            }
        self.diagram.clearSelection();
    };

    // for dragging parts within a system - side is LEFT or RIGHT (i.e. above or below, resp. in inventory layout)
    this.addSelectedThingAsOrderedSisterOf = function (group, side) {
        //console.log('addSelectedThingAsOrderedSisterOf, side: ' + side);
        var thing = self.getUniqueThingSelected();
        if (!thing) {
            return;
        }
        self.moveSiblingNextTo(thing, group, side);
    };

    // moves the first thing (sibling) to be after the second thing (group)
    // in the part ordering - they are assumed to be siblings
    // side is LEFT or RIGHT
    this.moveSiblingNextTo = function (sibling, group, side) {
        var parent = group.containingGroup;
        //console.log('moveSiblingNextTo, sibling: ' + sibling + ', group: ' + group + ', parent: ' + parent + ', sibling.containingGroup: ' + sibling.containingGroup);

        if (!parent || sibling.containingGroup != parent) {}
        //console.error('Cannot do moveSiblingNextTo on non-siblings or top-level groups');

        // create new member order
        var memberOrder = new go.List();
        var it = parent.memberParts;
        var order = 0;
        while (it.next()) {
            var member = it.value;
            if (member instanceof go.Group) {
                // we're at the target group, so add the moved thing either before or after it
                if (member == group) {
                    if (side == CONSTANTS.CANVAS.LEFT) {
                        memberOrder.add(sibling);
                        self.diagram.model.setDataProperty(sibling.data, 'order', order++);
                        memberOrder.add(member);
                        self.diagram.model.setDataProperty(member.data, 'order', order++);
                    } else {
                        memberOrder.add(member);
                        self.diagram.model.setDataProperty(member.data, 'order', order++);
                        memberOrder.add(sibling);
                        self.diagram.model.setDataProperty(sibling.data, 'order', order++);
                    }
                }
                // don't re-add the moved thing, it was added above
                else if (member != sibling) {
                        memberOrder.add(member);
                        self.diagram.model.setDataProperty(member.data, 'order', order++);
                    }
            }
        }

        // clear existing members
        var newIt = memberOrder.iterator;
        while (newIt.next()) {
            var member2 = newIt.value;
            member2.containingGroup = null;
        }

        // add new members
        newIt.reset();
        while (newIt.next()) {
            var member3 = newIt.value;
            member3.containingGroup = parent;
        }
    };

    this.addThingAsRThing = function (thing, link) {
        thing.labeledLink = link;
        thing.updateTargetBindings();
    };

    // D corner handler (single click)
    this.toggleDFlag = function (thing) {
        self.diagram.model.setDataProperty(thing.data, 'dflag', !thing.data.dflag);
        thing.updateTargetBindings();
    };

    // S corner handler (single click)
    this.toggleSExpansion = function (thing) {
        var isExpanded = !(thing.data && !thing.data.sExpanded); // expand by default if property not present
        self.diagram.model.setDataProperty(thing.data, 'sExpanded', !isExpanded);
        thing.updateTargetBindings();
        self.ui.showCornerTip(thing, CONSTANTS.DSRP.S);
    };

    // P corner handler (single click)
    this.togglePExpansion = function (thing) {
        self.diagram.model.setDataProperty(thing.data, 'pExpanded', !self.pIsExpanded(thing));
        thing.updateTargetBindings();
        self.ui.showCornerTip(thing, CONSTANTS.DSRP.P);
    };

    this.pIsExpanded = function (group) {
        return group.data && group.data.pExpanded === true;
    };

    // ---------------------- undo/redo --------------------

    this.canUndo = function () {
        return self.diagram.commandHandler.canUndo();
    };

    this.undo = function () {
        self.diagram.commandHandler.undo();
        self.diagram.layoutDiagram(true);
    };

    this.canRedo = function () {
        return self.diagram.commandHandler.canRedo();
    };

    this.redo = function () {
        self.diagram.commandHandler.redo();
        self.diagram.layoutDiagram(true);
    };

    this.refresh = function () {
        self.diagram.updateAllTargetBindings();
        self.diagram.layoutDiagram(true);
    };

    // ------------------- utility ----------------------

    // check for a rect with NaN X/Y/W/H coords, so we can do stuff with it such as unionRect
    // (NaN,NaN,0,0) => (0,0,0,0)
    this.safeRect = function (rect) {
        if (isNaN(rect.x)) {
            rect.x = 0;
        }
        if (isNaN(rect.y)) {
            rect.y = 0;
        }
        if (isNaN(rect.width)) {
            rect.width = 0;
        }
        if (isNaN(rect.height)) {
            rect.height = 0;
        }
        return rect;
    };

    // ------------------- debug map model ----------------------

    this.loadModel = function () {
        $('#map-model-debug').val(self.diagram.model.toJson());
    };

    this.saveModel = function () {
        self.diagram.model = go.Model.fromJson($('#map-model-debug').val());
        self.diagram.updateAllTargetBindings();
        self.diagram.model.addChangedListener(self.autosave.modelChanged);
        self.autosave.saveOnModelChanged = true;
    };
};

},{"../constants/constants":48,"./buttons/buttonDragging":25,"./extensions/NodeLabelDraggingTool.js":32,"./sbEditor":38}],36:[function(require,module,exports){
'use strict';

var SandbankEditor = require('./sbEditor');
// functions for editing perspectives AND distinctions, which work similarly in the UI

SandbankEditor.Perspectives = function ($scope, map) {

    var self = this;

    // temporary state flag for adding/removing P/D selections programmatically
    var selectingLinkedThings = false;

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        //console.log('Perspectives, currentTabChanged');
        if (newValue == map.ui.TAB_ID_PERSPECTIVES) {
            // opening perspectives
            setPorDThing('P');
            map.setEditingBlocked(true);
        } else if (oldValue == map.ui.TAB_ID_PERSPECTIVES) {
            // closing perspectives
            saveLinks('P');
            map.setEditingBlocked(false);
        } else if (newValue == map.ui.TAB_ID_DISTINCTIONS) {
            // opening distinctions
            setPorDThing('D');
            map.setEditingBlocked(true);
        } else if (oldValue == map.ui.TAB_ID_DISTINCTIONS) {
            // closing distinctions
            saveLinks('D');
            map.setEditingBlocked(false);
        }
    };

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.ui.currentTabIs(map.ui.TAB_ID_PERSPECTIVES) || map.ui.currentTabIs(map.ui.TAB_ID_DISTINCTIONS)) {
                updateLinks();
            }
        }
    };

    // ---------- P/D Editor state

    this.isInPOrDEditorMode = function () {
        return map.ui.state.perspectivePointKey !== null || map.ui.state.distinctionThingKey !== null;
    };

    this.isInPEditorMode = function () {
        return map.ui.state.perspectivePointKey !== null;
    };

    this.isInDEditorMode = function () {
        return map.ui.state.distinctionThingKey !== null;
    };

    this.isPEditorPoint = function (group) {
        return map.ui.state.perspectivePointKey == group.data.key;
    };

    this.isDEditorThing = function (group) {
        return map.ui.state.distinctionThingKey == group.data.key;
    };

    // NB: this is called via map.getCornerFunction, so we get the extra corner arg, which we can ignore
    this.setPEditorPoint = function (thing, corner) {
        if ($scope.canEdit) {
            map.ui.openTab(map.ui.TAB_ID_PERSPECTIVES);
        }
    };

    this.setDEditorThing = function (thing) {
        if ($scope.canEdit) {
            // NB: need to select only this thing, since this is invoked
            // by a control-click, which will not automatically select just it
            map.diagram.clearSelection();
            thing.isSelected = true;
            map.ui.openTab(map.ui.TAB_ID_DISTINCTIONS);
        }
    };

    // -----------------------

    this.isPerspectivePoint = function (group) {
        var links = group.findLinksOutOf();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    };

    this.isSelectedPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && map.pIsExpanded(link.fromNode) && link.fromNode.isSelected) {
                return true;
            }
        }
        return false;
    };

    this.isToggledPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && map.pIsExpanded(link.fromNode)) {
                return true;
            }
        }
        return false;
    };

    this.isMouseOverPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && link.fromNode == map.ui.mouseOverGroup) {
                return true;
            }
        }
        return false;
    };

    this.getPerspectiveViewWeight = function (group) {
        var mode = map.ui.getMapEditorOptions().perspectiveMode;
        if (mode == 'spotlight' || mode == 'both') {
            return (self.isSelectedPerspectiveView(group) ? 1 : 0) + (self.isToggledPerspectiveView(group) ? 1 : 0) + (self.isMouseOverPerspectiveView(group) ? 1 : 0);
        } else {
            return 0;
        }
    };

    // -----------------------

    // category is "P" or "D" (perspectives or distinctions)
    function setPorDThing(category) {
        // if already set, must do save perspectives or save distinctions
        if (map.ui.state.perspectivePointKey || map.ui.state.distinctionThingKey) return;

        var thing = map.diagram.selection.first();
        //console.log('setPorDThing: ' + thing);
        if (thing instanceof go.Group) {
            var key = thing.data.key;
            if (category == "P") {
                map.ui.state.perspectivePointKey = key;
            } else if (category == "D") {
                map.ui.state.distinctionThingKey = key;
            }

            // select views/others
            selectLinkedThingsFor(thing, category);
        }
    }

    // this is called when the selection changes - if the thing is set,
    // adds/removes D/P links according to what is selected; otherwise
    // just shows/hides D/P links for the selected thing(s)
    function updateLinks() {
        if (selectingLinkedThings) // selection is being changed programmatically, so don't respond
            return;

        var pOrDThing = null;
        var category = null;
        if (map.ui.state.perspectivePointKey) {
            pOrDThing = map.diagram.findNodeForKey(map.ui.state.perspectivePointKey);
            category = "P";
        } else if (map.ui.state.distinctionThingKey) {
            pOrDThing = map.diagram.findNodeForKey(map.ui.state.distinctionThingKey);
            category = "D";
        }

        var addLinksTo = new go.List();
        var removeLinks = new go.List();

        // iterate through all things
        if (category) {
            var layers = map.diagram.layers;
            while (layers.next()) {
                var layer = layers.value;
                var parts = layer.parts;
                while (parts.next()) {
                    var part = parts.value;
                    if (part instanceof go.Group) {
                        // calculate links to add/remove based on selection
                        if (pOrDThing) {
                            var links = part.findLinksInto();
                            var existingLink = null;
                            while (links.next()) {
                                var link = links.value;
                                if (link.fromNode.data.key == pOrDThing.data.key && link.data.category == category) existingLink = link;
                            }

                            // decide whether to add or remove a link to the part, depending on whether
                            // it is selected and whether a link exists
                            if (!existingLink && part.isSelected) addLinksTo.add(part);else if (existingLink && !part.isSelected) removeLinks.add(existingLink);
                        }
                    }
                }
            }
        }

        // do the adding/removing of links
        var adds = addLinksTo.iterator;
        while (adds.next()) {
            map.diagram.model.startTransaction('add link');
            var to = adds.value;
            //console.log('updateLinks: adding link from ' + pOrDThing + ' to ' + to);
            if (category == "D" && pOrDThing.data.key == to.data.key) {
                pOrDThing.isSelected = false;
                alert("You can't distinguish a thing from itself!");
                continue;
            }
            map.diagram.model.addLinkData({
                from: pOrDThing.data.key,
                to: to.data.key,
                fromPort: category,
                toPort: category,
                category: category
            });
            map.diagram.model.commitTransaction('add link');
        }
        var removes = removeLinks.iterator;
        while (removes.next()) {
            var remove = removes.value;
            //console.log('updateLinks: removing link from ' + remove.fromNode + ' to ' + remove.toNode);
            map.diagram.model.startTransaction('remove link');
            map.diagram.remove(remove);
            map.diagram.model.removeLinkData(remove.data);
            map.diagram.model.commitTransaction('remove link');
        }

        // show links
        map.diagram.updateAllTargetBindings();
    }

    function saveLinks(category) {
        var pOrDThing = null;
        if (category == "P") {
            pOrDThing = map.diagram.findNodeForKey(map.ui.state.perspectivePointKey);
            map.ui.state.perspectivePointKey = null;
        } else if (category == "D") {
            pOrDThing = map.diagram.findNodeForKey(map.ui.state.distinctionThingKey);
            map.ui.state.distinctionThingKey = null;
        }

        map.diagram.clearSelection();
        map.diagram.updateAllTargetBindings();
    }

    function selectLinkedThingsFor(group, category) {
        selectingLinkedThings = true;
        map.diagram.clearSelection();

        var links = group.findLinksOutOf();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == category) link.toNode.isSelected = true;
        }

        selectingLinkedThings = false;
    }
};

},{"./sbEditor":38}],37:[function(require,module,exports){
'use strict';

var SandbankEditor = require('./sbEditor');
// functions for the presenter/slides

SandbankEditor.Presenter = function ($scope, map) {

    var self = this;

    // constants
    this.SLIDE_BLOCKER_WIDTH = 1000;
    this.SLIDE_BLOCKER_COLOR = "#fff";
    this.SLIDE_BLOCKER_OPACITY = 0.9;

    // state vars
    this.currentSlideIndex = null;
    this.isPresenting = false;
    this.showTOC = false;
    this.isCreatingThumbnail = false;

    // mask applied around slide region when presenting
    this.slideBlocker = null;

    this.diagramAspectRatio = null;

    this.init = function () {};

    this.autosave = function () {
        map.autosave.save('edit_presenter');
    };

    // ---------- editing functions for different slide types -------------

    // NB: hasLinks can have values false, 1, or true (1 means only a single link)
    this.slideTypes = [{
        name: 'TITLE_BODY', label: 'Title and Body',
        hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: false, hasMapSummary: false, hasLinks: false
    }, {
        name: 'TITLE_BODY_MAP', label: 'Title, Body and MetaMap',
        hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
    }, {
        name: 'ACTIVITY_MAP', label: 'Lesson Activity and MetaMap',
        hasTitle: true, hasNotes: true, hasChecks: true, hasMapRegion: true, hasMapSummary: false, hasLinks: true
    }, {
        name: 'MAP_ONLY', label: 'MetaMap only',
        hasTitle: true, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
    }, {
        name: 'MAP_SUMMARY', label: 'MetaMap Summary',
        hasTitle: false, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: true, hasLinks: false
    }];

    // ------------------ link/attachment types -----------------------

    this.linkTypes = [{ name: '', label: '-- Select attachment type --' }, { name: 'WEB', label: 'Web Page' }, { name: 'PDF', label: 'PDF' }, { name: 'DOC', label: 'Document' }, { name: 'SPREADSHEET', label: 'Spreadsheet' }, { name: 'PRESENTATION', label: 'Presentation' }, { name: 'METAMAP', label: 'MetaMap' }, { name: 'IMAGE', label: 'Image' }, { name: 'AUDIO', label: 'Audio' }, { name: 'VIDEO', label: 'Video' }, { name: 'SURVEY', label: 'Survey' }, { name: 'WORKSHEET', label: 'Worksheet' }];

    // ------------ list of all things in the map, for map summary slides ---------------------

    this.ideaList = '';

    // only call this occasionally, as they won't be editing the map while presenter is open
    function updateIdeaList() {
        var nodes = map.diagram.nodes;
        var list = [];
        while (nodes.next()) {
            if (nodes.value instanceof go.Group) {
                list.push(nodes.value.data.text);
            }
        }
        list.sort();

        // filter out placeholder names - see map.js:getNewThingData, createSister, etc.
        list = _.difference(_.uniq(list, true), map.generator.getPlaceholderIdeaNames(), ['New Idea', 'New Distinguished Idea', 'New Related Idea', 'New Relationship Idea', 'New Part Idea', 'Idea', 'Part', 'Relationship Idea'] // newer simplified names
        );

        self.ideaList = list.join(', ');
    }

    this.summaryAnalytics = [{ name: 'COUNT_THINGS', singularLabel: 'Distinction', pluralLabel: 'Distinctions' }, { name: 'COUNT_SYSTEMS', singularLabel: 'System', pluralLabel: 'Systems' }, { name: 'COUNT_RELATIONSHIPS', singularLabel: 'Relationship', pluralLabel: 'Relationships' }, { name: 'COUNT_PERSPECTIVES', singularLabel: 'Perspective', pluralLabel: 'Perspectives' }, { name: 'COUNT_RTHINGS', singularLabel: 'Relationship Idea', pluralLabel: 'Relationship Ideas' }, { name: 'COUNT_SYSTEM_RTHINGS', singularLabel: 'Relationship System', pluralLabel: 'Relationship Systems' }, { name: 'COUNT_SYSTEM_PERSPECTIVES', singularLabel: 'Perspective System', pluralLabel: 'Perspective Systems' }, { name: 'COUNT_DISTINCTIONS', singularLabel: 'Advanced Distinction', pluralLabel: 'Advanced Distinctions' }];

    this.addCheck = function (nodeData) {
        nodeData.checks.push({ text: '' });
        self.autosave();
    };

    this.deleteCheck = function (check, nodeData) {
        var i = _.indexOf(nodeData.checks, check);
        nodeData.checks.splice(i, 1);
        self.autosave();
    };

    this.addLink = function (nodeData) {
        nodeData.links.push({ title: '', url: '', type: '' });
        self.autosave();
    };

    this.deleteLink = function (link, nodeData) {
        var i = _.indexOf(nodeData.links, link);
        nodeData.links.splice(i, 1);
        self.autosave();
    };

    this.toggleTOC = function () {
        $scope.safeApply(function () {
            if (self.isPresenting) {
                self.showTOC = !self.showTOC;
            }
        });
    };

    // NB: can't create this in init as the diagram doesn't exist yet...
    function maybeInitSlideBlocker() {
        if (!self.slideBlocker) {
            var mk = go.GraphObject.make;
            self.slideBlocker = mk(go.Node, go.Panel.Auto, {
                layerName: 'Tool',
                opacity: self.SLIDE_BLOCKER_OPACITY
            }, mk(go.Shape, "Rectangle", {
                fill: null,
                stroke: self.SLIDE_BLOCKER_COLOR,
                strokeWidth: 1000
            }));
            map.diagram.add(self.slideBlocker);
        }
    }

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (oldValue == map.ui.TAB_ID_PRESENTER) {
            // closing tab
            self.stopPresenting();
        } else if (newValue == map.ui.TAB_ID_PRESENTER) {
            // opening tab
            // show slides (see layouts.slideTemplate, binding of visible attr)
            self.diagramAspectRatio = $('#diagram').width() / $('#diagram').height();
            //console.log('diagramAspectRatio: ' + self.diagramAspectRatio);

            $scope.map.diagram.updateAllTargetBindings();
            updateIdeaList();
            if (!self.currentSlideIndex && self.getSlideNodeDatas().length > 0) {
                self.currentSlideIndex = 1;
            }
            self.slideThumbnailSelected(1);
        }
    };

    this.handleDiagramEvent = function (eventName, e) {
        if (!map.ui.currentTabIs(map.ui.TAB_ID_PRESENTER)) {
            return;
        }

        if (eventName == 'SelectionDeleting') {
            var selection = e.subject;
            if (selection.count == 1) {
                var thing = selection.first();
                if (thing instanceof go.Node && thing.data.category == 'slide') {
                    if (!confirm("Delete this slide from the presentation?")) {
                        e.cancel = true;
                    }
                }
            }
        } else if (eventName == 'SelectionDeleted') {
            // if slide is deleted from canvas rather than by thumbnail x button, need to update indexes
            compactSlideIndexes();
        } else if (eventName == 'SelectionMoved' || eventName == 'PartResized') {
            // clear thumbnail cache
            thumbnailCache = [];
        } else if (eventName == 'ViewportBoundsChanged') {
            // adjust zooming of map region
            //self.windowResized();
        }
    };

    this.windowResized = _.debounce(function () {
        self.slideThumbnailSelected(self.currentSlideIndex);
    }, 1000);

    this.showSidebar = function () {
        return map.ui.currentTabIs(map.ui.TAB_ID_PRESENTER) && (!self.isPresenting || self.showTOC);
    };

    this.disableMapToolbarButtons = function () {
        return !map.ui.currentTabIs(map.ui.TAB_ID_PRESENTER) || self.isPresenting || !self.getCurrentSlideType().hasMapRegion;
    };

    // returns an array of node data objects (not the slide nodes themselves)
    this.getSlideNodeDatas = function () {
        var diagram = map.diagram;
        var nodes = diagram.model.nodeDataArray;
        var nodeDatas = _.filter(nodes, function (node) {
            return node.category == 'slide';
        });
        nodeDatas = _.sortBy(nodeDatas, function (nodeData) {
            return nodeData.index;
        });
        //console.log('getSlideNodeDatas, indexes: ' + _.pluck(slidesData, 'index'));
        return nodeDatas;
    };

    this.getSlideCount = function () {
        return self.getSlideNodeDatas().length;
    };

    this.getActivitySlideCount = function () {
        return _.where(self.getSlideNodeDatas(), { type: 'ACTIVITY_MAP' }).length;
    };

    this.getSlideType = function (typeName) {
        return _.findWhere(self.slideTypes, { name: typeName });
    };

    this.getCurrentSlideType = function () {
        var slide = findSlideByIndex(self.currentSlideIndex);
        if (slide) {
            return _.findWhere(self.slideTypes, { name: slide.data.type });
        } else {
            return {};
        }
    };

    function findSlideByIndex(index) {
        var diagram = map.diagram;
        var slideData = _.find(self.getSlideNodeDatas(), function (slideData) {
            return slideData.index == index;
        });
        if (slideData !== undefined) {
            return diagram.findNodeForKey(slideData.key);
        } else {
            return undefined;
        }
    }

    // increment is -1 or +1
    this.moveSlide = function (index, increment) {
        $scope.safeApply(function () {
            var diagram = map.diagram;
            var slide = findSlideByIndex(index);
            var neighbor = findSlideByIndex(index + increment);
            if (slide && neighbor) {
                //console.log('moveSlide: swapping ' + slide.data.key + ' with ' + neighbor.data.key);
                diagram.startTransaction("move slide");
                diagram.model.setDataProperty(slide.data, 'index', slide.data.index + increment);
                diagram.model.setDataProperty(neighbor.data, 'index', neighbor.data.index - increment);
                diagram.commitTransaction("move slide");
                thumbnailCache = [];
            }
        });
    };

    function compactSlideIndexes() {
        $scope.safeApply(function () {
            //console.log('compactSlideIndexes');
            var slidesData = self.getSlideNodeDatas();
            var diagram = map.diagram;
            var newIndex = 1;
            diagram.startTransaction("compact slide indexes");
            _.each(slidesData, function (slideData) {
                diagram.model.setDataProperty(slideData, 'index', newIndex);
                //console.log('compactSlideIndexes: set index for ' + slideData.key + ' to ' + newIndex);
                newIndex++;
            });
            diagram.commitTransaction("compact slide indexes");
        });
    }

    function getNewSlideKey() {
        var diagram = map.diagram;
        var i = 1;
        while (diagram.model.findNodeDataForKey('slide-' + i)) {
            i++;
        }
        return 'slide-' + i;
    }

    // NB: indexes (and keys?) must be 1-based, otherwise first slide gets screwed up
    // (somewhere the index shows up as '' instead of 0)
    function getNewSlideIndex() {
        var slides = self.getSlideNodeDatas();
        return slides.length + 1;
    }

    this.addSlide = function (typeName) {
        $scope.safeApply(function () {
            //console.log('addSlide: ' + typeName);
            var diagram = map.diagram;

            var db = map.computeMapBounds();
            db.inflate(db.width / 20, db.height / 10);
            var newLoc = db.x + ' ' + db.y;
            var newIndex = getNewSlideIndex();

            var slideType = _.findWhere(self.slideTypes, { name: typeName });

            diagram.startTransaction("add slide");
            diagram.model.addNodeData({
                key: getNewSlideKey(),
                category: 'slide',
                index: newIndex,
                isGroup: false,
                width: db.width,
                height: db.height,
                loc: newLoc,
                level: 0,
                children: 0,
                type: typeName,
                title: '',
                notes: '',
                checks: [],
                hasRegion: slideType.hasMapRegion,
                isSummary: slideType.hasMapSummary,
                links: []
            });
            diagram.commitTransaction("add slide");
            thumbnailCache = [];

            self.slideThumbnailSelected(newIndex); // trigger display of edit form, zoom to map region if applicable
        });
    };

    this.duplicateSlide = function (index) {
        $scope.safeApply(function () {
            var diagram = map.diagram;
            var newIndex = getNewSlideIndex();
            var slide = findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction("duplicate slide");

                // bump up indexes on subsequent slides to make room for new slide after current one
                _.each(self.getSlideNodeDatas(), function (slideData) {
                    if (slideData.index > index) {
                        diagram.model.setDataProperty(slideData, 'index', slideData.index + 1);
                    }
                });

                // NB: creating a new nodeData object here rather than copying and modifying, to avoid copying $$hashKey (??)
                diagram.model.addNodeData({
                    key: getNewSlideKey(),
                    category: 'slide',
                    index: index + 1,
                    isGroup: false,
                    width: slide.data.width,
                    height: slide.data.height,
                    loc: slide.data.loc,
                    level: 0,
                    children: 0,
                    type: slide.data.type,
                    title: slide.data.title + ' (Copy)',
                    notes: slide.data.notes,
                    checks: slide.data.checks, // clone?
                    hasRegion: slide.data.hasRegion,
                    isSummary: slide.data.isSummary,
                    links: slide.data.links // clone?
                });
                diagram.commitTransaction("duplicate slide");
                thumbnailCache = [];
            }
        });
    };

    this.removeSlide = function (index) {
        $scope.safeApply(function () {
            //console.log('removeSlide: ' + index);
            var diagram = map.diagram;
            var slide = findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction("remove slide");
                diagram.model.removeNodeData(slide.data);
                diagram.commitTransaction("remove slide");
            }
            self.currentSlideIndex = null;
            thumbnailCache = [];
            compactSlideIndexes();
        });
    };

    var thumbnailCache = [];

    this.getSlideThumbnail = function (index) {
        return thumbnailCache[index];
    };

    this.createSlideThumbnails = function () {
        _.each(self.getSlideNodeDatas(), function (nd) {
            self.createSlideThumbnail(nd.index);
        });
    };

    this.createSlideThumbnail = function (index) {
        //console.log('createSlideThumbnail');

        var thumbWidth = 1000;
        var thumbHeight = 600;
        var diagram = map.diagram;

        var slide = findSlideByIndex(index);
        if (!slide) {
            return '';
        } else if (!slide.data.hasRegion && !slide.data.isSummary) {
            return '';
        } else {
            var db = diagram.documentBounds;
            var sb;
            if (slide.data.isSummary) {
                // for a summary slide we shoot the whole map
                sb = map.safeRect(map.computeMapBounds());
            } else {
                // otherwise just shoot the slide region
                sb = slide.part.actualBounds;
            }

            var imagePosition = new go.Point(sb.x, sb.y);
            //console.log('getSlideThumbnail, slide bounds: ' + sb + ', document bounds: ' + db + ', imagePosition: ' + imagePosition);

            var wScale = thumbWidth / sb.width;
            var hScale = thumbHeight / sb.height;
            var thumbScale = Math.min(wScale, hScale);
            //console.log('scale: ' + wScale + ',' + hScale);

            var w = thumbScale * sb.width;
            var h = thumbScale * sb.height;
            //console.log('thumbnail w/h: ' + w + ',' + h);

            // hide slides temporarily while creating thumbnail
            self.isCreatingThumbnail = true;
            diagram.updateAllTargetBindings();

            diagram.scale = thumbScale;

            var imgData = diagram.makeImageData({
                size: new go.Size(w, h),
                position: imagePosition,
                scale: thumbScale
            });

            self.isCreatingThumbnail = false;
            diagram.updateAllTargetBindings();

            thumbnailCache[index] = imgData;

            return imgData;
        }
    };

    // gets a thumbnail of the whole map, for saving (see autosave.js)
    this.getMapThumbnail = function () {

        var diagram = map.diagram;
        var sb = map.safeRect(map.computeMapBounds());
        sb.grow(10, 10, 10, 10);
        var w = 150;
        var h = 100;

        // hide slides temporarily while creating thumbnail
        self.isCreatingThumbnail = true;
        diagram.updateAllTargetBindings();

        var imgData = diagram.makeImageData({
            scale: Math.min(h / sb.height, w / sb.width),
            position: new go.Point(sb.x, sb.y),
            size: new go.Size(w, h)
        });

        self.isCreatingThumbnail = false;
        diagram.updateAllTargetBindings();

        return imgData;
    };

    // called via ng-click on thumbnail
    this.slideThumbnailSelected = function (index) {
        //console.log('slideThumbnailSelected: ' + index);
        var diagram = map.diagram;
        var slide = findSlideByIndex(index);

        $scope.safeApply(function () {
            // NB: order of statements is important here, as selectSlide can trigger changedSelection with an empty selection sometimes... ??
            selectSlide(index);
            self.currentSlideIndex = index;
            diagram.updateAllTargetBindings(); // show/hide slide nodes - see templates.js: slideTemplate

            if (slide) {
                zoomToSlideInCenter(slide);

                if (self.isPresenting) {
                    self.showTOC = false;
                }
            }
        });
    };

    this.needsNarrowCanvas = function () {
        var slide = findSlideByIndex(self.currentSlideIndex);
        return map.ui.currentTabIs(map.ui.TAB_ID_PRESENTER) && slide != null && (slide.data.type == 'TITLE_BODY_MAP' || slide.data.type == 'ACTIVITY_MAP' || slide.data.type == 'MAP_SUMMARY');
    };

    // sets the slide node as selected in the diagram.
    function selectSlide(index) {
        $scope.safeApply(function () {
            //console.log('select slide: ' + index);
            var diagram = map.diagram;
            diagram.clearSelection();
            if (index) {
                var slide = findSlideByIndex(index);
                if (slide) {
                    slide.isSelected = true;
                }
            }
            // TODO: scroll to slide?
        });
    }

    this.playSlide = function (index) {
        var diagram = map.diagram;
        map.ui.openTab(map.ui.TAB_ID_PRESENTER);

        var slides = self.getSlideNodeDatas();
        if (slides.length) {
            self.showTOC = false;
            presentSlide(index);
        }
    };

    // increment is -1 or +1
    this.advanceSlide = function (increment) {
        //console.log('advanceSlide, currentSlideIndex: ' + self.currentSlideIndex);
        $scope.safeApply(function () {
            var slide = findSlideByIndex(self.currentSlideIndex);
            if (slide) {
                self.currentSlideIndex += increment;
                if (self.isPresenting) {
                    presentSlide(self.currentSlideIndex);
                }
            }
        });
    };

    function presentSlide(index) {
        //console.log('presentSlide');
        $scope.safeApply(function () {
            var diagram = map.diagram;
            var slide = findSlideByIndex(index);
            if (!slide) {
                return;
            }

            diagram.clearSelection();
            // NB: need to set this after clearSelection, as that will set it to null! (see changedSelection)
            self.currentSlideIndex = index;
            map.setEditingBlocked(true);
            //console.log('presentSlide, index: ' + index + ', slide: ' + slide + ', currentSlideIndex: ' + self.currentSlideIndex);

            maybeInitSlideBlocker();
            var blockerW = self.SLIDE_BLOCKER_WIDTH;

            if (slide.data.hasRegion) {
                zoomToSlideInCenter(slide);

                // show slide blocker
                self.slideBlocker.desiredSize = new go.Size(slide.actualBounds.width + 2 * blockerW, slide.actualBounds.height + 2 * blockerW);
                self.slideBlocker.location = new go.Point(slide.actualBounds.x - blockerW, slide.actualBounds.y - blockerW);
                self.slideBlocker.visible = true;
                //console.log('slideBlocker: ' + self.slideBlocker.actualBounds);
            } else if (slide.data.isSummary) {
                    zoomToSlideInCenter(slide);
                    self.slideBlocker.visible = false;
                } else {
                    map.ui.resetZoom();
                    self.slideBlocker.visible = false;
                }

            self.isPresenting = true;
            $('body').addClass('presenter-playing');

            map.diagram.updateAllTargetBindings(); // hide slide nodes - see templates.js: slideTemplate
        });
    }

    // zoom the diagram to show the given slide in the center of the canvas
    function zoomToSlideInCenter(slide) {
        var diagram = map.diagram;

        window.setTimeout(function () {

            var halfWidth = slide.data.type != 'MAP_ONLY';
            var zoomRect = self.getLetterboxedRect(slide.actualBounds, halfWidth);
            zoomRect.inflate(zoomRect.width / 10, zoomRect.height / 10);
            diagram.zoomToRect(zoomRect, go.Diagram.Uniform);
        }, 100);
    }

    // Returns a rectangle containing the given rect, but with appropriate width or height added
    // to give it same aspect ratio as the diagram.
    this.getLetterboxedRect = function (rect, halfWidth) {

        // NB: we calculate the aspect ratio when the tab is opened,
        // rather than each time as the diagram size might be changing...
        var dar = halfWidth ? self.diagramAspectRatio / 2 : self.diagramAspectRatio;
        //console.log('rect: ' + rect + ', dar: ' + dar);

        var rectAspectRatio = rect.width / rect.height;

        if (dar > rectAspectRatio) {
            // tall skinny rect, short wide target AR, so add side padding to the rect
            var lbw = rect.height * dar; // because lbw / lbh == dar == lbw / rect.height (lbh == rect.height)
            return rect.copy().inflate((lbw - rect.width) / 2, 0); // add half the width difference to each side of the rect
        } else {
                // short wide rect, tall skinny target AR, so add top/bottom padding to the rect
                var lbh = rect.width / dar; // because lbw / lbh == dar == lbh / rect.width (lbw == rect.width)
                return rect.copy().inflate(0, (lbh - rect.height) / 2); // add half the height difference to top/bottom of the rect
            }
    };

    this.stopPresenting = function () {
        $scope.safeApply(function () {
            //console.log('stopPresenting, currentSlideIndex: ' + self.currentSlideIndex);
            var diagram = map.diagram;

            if (self.slideBlocker) {
                self.slideBlocker.visible = false;
            }

            //self.currentSlideIndex = null;
            self.isPresenting = false;
            $('body').removeClass('presenter-playing');

            map.diagram.updateAllTargetBindings(); // show slide nodes

            diagram.clearSelection();
            map.setEditingBlocked(false);
            //map.ui.resetZoom();
        });
    };
};

},{"./sbEditor":38}],38:[function(require,module,exports){
"use strict";

var SandbankEditor = {};

module.exports = SandbankEditor;

},{}],39:[function(require,module,exports){
// functions for sharing maps, with a modal dialog

'use strict';

window.SandbankSharing = {};

SandbankSharing = function ($scope, $http, $resource, $modal, $log) {

    this.openModal = function (_mapIds, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_map_sharing_modal.html', // see views/shares/_template_map_sharing_modal
            backdrop: 'static',
            controller: sharingModalCtrl,
            windowClass: 'sharing-modal',
            resolve: {
                userId: function userId() {
                    return $scope.userId;
                },
                userProfile: function userProfile() {
                    return $scope.userProfile;
                },
                mapIds: function mapIds() {
                    return _mapIds;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for sharing modal ---------------------

    var sharingModalCtrl = function sharingModalCtrl($scope, $modalInstance, userId, userProfile, mapIds, onUpdate) {

        $scope.userId = userId;
        $scope.userProfile = userProfile;
        $scope.mapIds = mapIds;

        // all existing shares for selected maps
        // format: [{mapId:1, shareId:1, canEdit:true, userId:2, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.mapShares = [];

        // existing shares, grouped for display
        // format: [{name:'foo', userEmail:'foo@bar.com', userId: null, groupId: id, organizationId: null, isPublic:false, canEdit:true, mapIds:[1,2]}, ...]
        $scope.existingShares = [];

        // new shares added in the dialog
        // format: [{shareType:SHARE_TYPE_INDIVIDUAL, sharePermission:SHARE_PERMISSION_CANVIEW, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.newShares = [];

        // all updated shares, to be saved
        // format: [{mapId:1, canEdit:false, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.updatedShares = [];

        // indexes of users/groups/orgs - format: [{id:1, name:'foo'}, ...]
        $scope.users = [];
        $scope.groups = [];
        $scope.organizations = [];

        // constants
        $scope.SHARE_TYPE_INDIVIDUAL = 'One or more Individuals';
        $scope.SHARE_TYPE_GROUP = 'Group';
        $scope.SHARE_TYPE_ORGANIZATION = 'ThinkNation';
        $scope.SHARE_TYPE_PUBLIC = 'All MetaMap Users';

        $scope.shareTypes = [$scope.SHARE_TYPE_INDIVIDUAL,
        //$scope.SHARE_TYPE_GROUP,
        $scope.SHARE_TYPE_ORGANIZATION, $scope.SHARE_TYPE_PUBLIC];

        $scope.SHARE_PERMISSION_CANVIEW = 'Can view';
        $scope.SHARE_PERMISSION_CANEDIT = 'Can edit';

        $scope.sharePermissions = [$scope.SHARE_PERMISSION_CANVIEW, $scope.SHARE_PERMISSION_CANEDIT];

        $scope.canShareCultureMap = function (share) {
            return _.findWhere($scope.userProfile.memberships, {
                organizationId: share.organizationId,
                leader: true
            });
        };

        // get existing shares
        function loadShares(mapIds) {
            $http.get('/shares/map_shares.json?ids=' + mapIds.join(',')).then(function (response) {
                if (response.status === 200 || response.status === 204) {
                    $scope.mapShares = response.data.mapShares;
                    $scope.users = response.data.users;
                    $scope.groups = response.data.groups;
                    $scope.organizations = response.data.organizations;
                    initExistingShares();
                    if (!$scope.existingShares.length && $scope.canAddNewShare()) {
                        $scope.addNewShare();
                    }
                }
            }, function () {
                alert('Could not load sharing info');
            });
        }

        loadShares(mapIds);

        // group the existing shares by user, group, org and public
        function initExistingShares() {
            // find all emails that occur in a share
            var userEmails = _.without(_.uniq(_.pluck($scope.mapShares, 'userEmail')), null);
            // build an array of shares, one for each email, with the applicable map IDs
            var sharesByUserEmail = _.map(userEmails, function (email) {
                var user = _.findWhere($scope.users, {
                    email: email
                });
                return {
                    isDeleted: false,
                    userEmail: email,
                    userId: user ? user.id : null,
                    groupId: null,
                    organizationId: null,
                    isPublic: false,
                    isCultureMap: false,
                    name: email,
                    // NB: for this attribute we don't try to summarize the value for all the existing shares,
                    // because it would be too complicated to display...
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        userEmail: email
                    }), 'mapId')
                };
            });

            var groupIds = _.without(_.uniq(_.pluck($scope.mapShares, 'groupId')), null);
            var sharesByGroupId = _.map(groupIds, function (id) {
                var group = _.findWhere($scope.groups, {
                    id: id
                });
                return {
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: id,
                    organizationId: null,
                    isPublic: false,
                    isCultureMap: false,
                    name: 'Group: ' + (group ? group.name : ''),
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        groupId: id
                    }), 'mapId')
                };
            });

            var organizationIds = _.without(_.uniq(_.pluck($scope.mapShares, 'organizationId')), null);
            var sharesByOrganizationId = _.map(organizationIds, function (id) {
                var organization = _.findWhere($scope.organizations, {
                    id: id
                });
                return {
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: null,
                    organizationId: id,
                    isPublic: false,
                    isCultureMap: $scope.mapShares.length == 1 && $scope.mapShares[0].isCultureMap,
                    name: 'ThinkNation: ' + (organization ? organization.name : ''),
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        organizationId: id
                    }), 'mapId')
                };
            });

            // are any of the selected maps shared publicly?
            var publicShares = [];
            if (_.where($scope.mapShares, {
                isPublic: true
            }).length) {
                publicShares = [{
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: null,
                    organizationId: null,
                    isPublic: true,
                    isCultureMap: false,
                    name: 'Everyone',
                    canEdit: false,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        isPublic: true
                    }), 'mapId')
                }];
            }

            $scope.existingShares = _.union(sharesByUserEmail, sharesByGroupId, sharesByOrganizationId, publicShares);
        }

        function buildUpdatedShares() {
            $scope.updatedShares = [];

            // for each selected map, decompose the existingShares (grouped by user/group/org/public) into individual shares for saving
            _.each(mapIds, function (id) {
                // get existing shares for this map
                var existingSharesForMapId = _.filter($scope.existingShares, function (existingShare) {
                    // existingShares format: [{name:'foo', userEmail:'foo@bar.com', userId: null, groupId: id, organizationId: null, isPublic:false, isCultureMap:false, canEdit:true, mapIds:[1,2]}, ...]
                    return _.contains(existingShare.mapIds, id);
                });
                // decompose these into individual shares
                _.each(existingSharesForMapId, function (es) {
                    $scope.updatedShares.push({
                        isNew: false,
                        isDeleted: es.isDeleted,
                        mapId: id,
                        userEmail: es.userEmail,
                        userId: es.userId,
                        groupId: es.groupId,
                        organizationId: es.organizationId,
                        isPublic: es.isPublic,
                        isCultureMap: es.isCultureMap,
                        canEdit: es.canEdit
                    });
                });
            });

            // add in the newShares (for each selected map)
            _.each(mapIds, function (id) {
                _.each($scope.newShares, function (ns) {
                    $scope.updatedShares.push({
                        isNew: true,
                        mapId: id,
                        userEmail: ns.shareType == $scope.SHARE_TYPE_INDIVIDUAL ? ns.userEmail : null,
                        groupId: ns.shareType == $scope.SHARE_TYPE_GROUP ? ns.groupId : null,
                        organizationId: ns.shareType == $scope.SHARE_TYPE_ORGANIZATION ? ns.organizationId : null,
                        isPublic: ns.shareType == $scope.SHARE_TYPE_PUBLIC,
                        isCultureMap: ns.isCultureMap,
                        canEdit: ns.shareType == $scope.SHARE_TYPE_PUBLIC ? false : ns.sharePermission == $scope.SHARE_PERMISSION_CANEDIT,
                        message: ns.message
                    });
                });
            });
        }

        function saveShares(onUpdate) {
            $http.put('/shares/update_map_shares', $scope.updatedShares).then(function (response) {
                onUpdate();
            }, function () {
                alert('Could not save sharing info');
            });
        }

        $scope.canDeleteExistingShare = function () {
            return $scope.canAddNewShare();
        };

        $scope.deleteExistingShare = function (share) {
            share.isDeleted = true;
        };

        $scope.canAddNewShare = function () {
            // make sure all maps are owned by the current user
            var mapUserIds = _.uniq(_.pluck($scope.mapShares, 'mapUserId'));
            return mapUserIds.length == 0 || mapUserIds.length == 1 && mapUserIds[0] == $scope.userId;
        };

        $scope.addNewShare = function () {
            // NB: isPublic and canEdit are set in buildUpdateShares
            $scope.newShares.push({
                shareType: $scope.SHARE_TYPE_INDIVIDUAL,
                sharePermission: $scope.SHARE_PERMISSION_CANVIEW,
                userEmail: '',
                groupId: $scope.groups.length ? $scope.groups[0].id : null,
                organizationId: $scope.organizations.length ? $scope.organizations[0].id : null,
                isCultureMap: false,
                message: ''
            });
        };

        $scope.deleteNewShare = function (share) {
            var i = _.indexOf($scope.newShares, share);
            $scope.newShares.splice(i, 1);
        };

        $scope.ok = function () {
            buildUpdatedShares();
            saveShares(onUpdate);
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    sharingModalCtrl.$inject = ['$scope', '$modalInstance', 'userId', 'userProfile', 'mapIds', 'onUpdate'];
};

},{}],40:[function(require,module,exports){
'use strict';

var SandbankEditor = require('./sbEditor');
// common core standards tab -
// this is delegated to the SandbankCcsTagging module, which handles CCS
// for a map OR the user profile - see tagging_ccs.js

SandbankEditor.Standards = function ($scope, map) {

    var self = this;

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.ui().TAB_ID_STANDARDS) {
            // opening tab
            // if there are no links, show the modal
            if ($scope.canEdit && !$scope.ccsTagging.links.length) {
                $scope.ccsTagging.addLink();
            }
        }
        if (oldValue == map.ui().TAB_ID_STANDARDS) {// closing tab
        }
    };
};

},{"./sbEditor":38}],41:[function(require,module,exports){
// functions for user-tagging maps, with a modal dialog

// NB: the complexity here is due to the need to show existing tags that may apply
// to any number of the selected maps, vs. new tags that will be added to all selected maps -
// the tagging info needs to be grouped and ungrouped when loading and saving to handle this.

'use strict';

window.SandbankTagging = {};

SandbankTagging = function ($scope, $http, $resource, $modal, $log) {

    this.openModal = function (_mapIds, _showDescription, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_map_tagging_modal.html', // see views/user_tags/_template_map_tagging_modal
            backdrop: 'static',
            controller: tagsModalCtrl,
            windowClass: 'tags-modal',
            resolve: {
                mapIds: function mapIds() {
                    return _mapIds;
                },
                showDescription: function showDescription() {
                    return _showDescription;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for tags modal ---------------------

    var tagsModalCtrl = function tagsModalCtrl($scope, $modalInstance, mapIds, showDescription, onUpdate) {

        $scope.mapIds = mapIds;

        // all existing tags for selected maps - format: [{mapId: 1, tagId: 1, tagName:'foo'}, ...]
        $scope.mapUserTags = [];

        // existing tags, grouped for display - format: [{name:'foo', mapIds:[1,2]}, ...]
        $scope.existingTags = [];

        // new tags added in the dialog - format: [{name:'foo'}, ...]
        $scope.newTags = [];

        // all updated tags, to be saved - tags format: [{mapId: 1, userTags: "foo, bar, bam"}, ...]
        $scope.updatedTags = { description: '', tags: [] };

        $scope.showDescription = showDescription;

        function loadTags(mapIds) {
            $http.get('/user_tags/map_user_tags.json?ids=' + mapIds.join(',')).then(function (response) {
                $scope.mapUserTags = response.data.mapUserTags;
                // NB: the map description is always passed back if we only pass one map ID,
                // but we may not display it in the dialog - depends on the value of the showDescription flag.
                if (mapIds.length == 1) {
                    $scope.updatedTags.description = response.data.mapDescription;
                }
                initExistingTags();
                $scope.addNewTag();
            }, function () {
                alert('Could not load tags');
            });
        }

        loadTags(mapIds);

        function initExistingTags() {
            var tagNames = _.uniq(_.pluck($scope.mapUserTags, 'tagName')).sort();
            $scope.existingTags = _.map(tagNames, function (name) {
                var mapUserTagsForName = _.where($scope.mapUserTags, { tagName: name });
                var mapIds = _.pluck(mapUserTagsForName, 'mapId');
                return {
                    name: name,
                    mapIds: mapIds
                };
            });
        }

        function buildUpdatedTags() {
            $scope.updatedTags.tags = [];
            _.each(mapIds, function (id) {
                var existingTagsForId = _.filter($scope.existingTags, function (existingTag) {
                    // existingTag format: {name:'foo', mapIds:[1,2]}
                    return _.contains(existingTag.mapIds, id);
                });
                $scope.updatedTags.tags.push({
                    mapId: id,
                    userTags: _.union(_.pluck(existingTagsForId, 'name'), _.without(_.pluck($scope.newTags, 'name'), '') // remove empty tags
                    ).join(', ')
                });
            });
        }

        function saveTags(onUpdate) {
            $http.put('/user_tags/update_map_user_tags', [$scope.updatedTags]).then(function (response) {
                onUpdate();
            }, function () {
                alert('Could not save tags');
            });
        }

        $scope.deleteExistingTag = function (tag) {
            var i = _.indexOf($scope.existingTags, tag);
            $scope.existingTags.splice(i, 1);
        };

        $scope.addNewTag = function () {
            $scope.newTags.push({ name: '' });
        };

        $scope.tagSelected = function (item, model, label) {
            //console.log('tagSelected: ' + item + ', ' + model + ', ' + label);
            $scope.addNewTag();
        };

        $scope.editingTagKeypress = function (e) {
            if (e.which == 13) {
                $scope.addNewTag();
            }
        };

        $scope.deleteNewTag = function (tag) {
            var i = _.indexOf($scope.newTags, tag);
            $scope.newTags.splice(i, 1);
            if (!$scope.newTags.length) {
                $scope.addNewTag(); // always leave at least one tag field
            }
        };

        // tag autocomplete
        $scope.getUserTags = function (viewValue) {
            var url = '/user_tags/list.json?q=' + viewValue;
            return $http.get(url).then(function (response) {
                return response.data.tags;
            });
        };

        $scope.ok = function () {
            buildUpdatedTags();
            saveTags(onUpdate);
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    tagsModalCtrl.$inject = ['$scope', '$modalInstance', 'mapIds', 'showDescription', 'onUpdate'];
};

},{}],42:[function(require,module,exports){
'use strict';

var SandbankEditor = require('./sbEditor');
require('./buttons/button');
// goJS templates used in the editor

SandbankEditor.Templates = function ($scope, map) {

    var self = this;

    var metaMap = require('../../MetaMap');
    var config = metaMap.config.canvas;
    var CONSTANTS = require('../constants/constants');
    // constants
    //this.groupFillColor = "#f9f9f9";

    this.init = function () {};

    // initialize template-related stuff that depends on the diagram (and therefore can't go in init())
    this.initTemplates = function (diagram) {
        diagram.groupTemplate = self.groupTemplate;
        diagram.nodeTemplate = self.slideTemplate;
        diagram.linkTemplate = self.linkTemplate;
        diagram.linkTemplateMap.add(CONSTANTS.DSRP.P, self.pLinkTemplate);
        diagram.linkTemplateMap.add(CONSTANTS.DSRP.D, self.dLinkTemplate);

        self.setTemporaryLinkTemplates(diagram.toolManager.draggingTool);
        self.setTemporaryLinkTemplates(diagram.toolManager.linkingTool);
        self.setTemporaryLinkTemplates(diagram.toolManager.relinkingTool);

        diagram.toolManager.linkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
            self.handlePortTargeted(diagram, realnode, realport, tempnode, tempport, toend);
        };

        diagram.toolManager.draggingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
            self.handlePortTargeted(diagram, realnode, realport, tempnode, tempport, toend);
        };

        diagram.toolManager.relinkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
            self.handlePortTargeted(diagram.toolManager.relinkingTool, realnode, realport, tempnode, tempport, toend);
        };

        diagram.toolManager.relinkingTool.updateAdornments = function (part) {
            go.RelinkingTool.prototype.updateAdornments.call(this, part);
            var from = part.findAdornment('RelinkFrom');
            var to = part.findAdornment('RelinkTo');
            // if (from)
            //     //console.log('relinkfrom: ' + from.part.width);
        };

        diagram.toolManager.draggingTool.linkValidation = self.validateLink;
        diagram.toolManager.linkingTool.linkValidation = self.validateLink;
        diagram.toolManager.relinkingTool.linkValidation = self.validateLink;
    };

    // convenient abbreviation for creating templates
    var mk = go.GraphObject.make;

    // DSRP colors (from _variables.scss)
    //var colorD = "#f2624c";
    //var colorS = "#96c93d";
    //var colorR = "#4cbfc2";
    //var colorP = "#fbaa36";
    //var colorPLight = "#FDDDAF";
    //var colorPDark = "#C9882B";

    // var eyeSvgPath = "M 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00c 47.559,94.979, 144.341,160.00, 256.00,160.00c 111.657,0.00, 208.439-65.021, 256.00-160.00 C 464.442,161.021, 367.657,96.00, 256.00,96.00z M 382.225,180.852c 30.081,19.187, 55.571,44.887, 74.717,75.148 c-19.146,30.261-44.637,55.961-74.718,75.149C 344.427,355.257, 300.779,368.00, 256.00,368.00c-44.78,0.00-88.428-12.743-126.225-36.852 C 99.695,311.962, 74.205,286.262, 55.058,256.00c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65 C 130.725,190.866, 128.00,205.613, 128.00,221.00c0.00,70.692, 57.308,128.00, 128.00,128.00s 128.00-57.308, 128.00-128.00c0.00-15.387-2.725-30.134-7.704-43.799 C 378.286,178.39, 380.265,179.602, 382.225,180.852z M 256.00,205.00c0.00,26.51-21.49,48.00-48.00,48.00s-48.00-21.49-48.00-48.00s 21.49-48.00, 48.00-48.00 S 256.00,178.49, 256.00,205.00z";
    // var eyeBlockedSvgPath = "M 419.661,148.208 C 458.483,175.723 490.346,212.754 512.00,256.00 C 464.439,350.979 367.657,416.00 256.00,416.00 C 224.717,416.00 194.604,410.894 166.411,401.458 L 205.389,362.48 C 221.918,366.13 238.875,368.00 256.00,368.00 C 300.779,368.00 344.427,355.257 382.223,331.148 C 412.304,311.96 437.795,286.26 456.941,255.999 C 438.415,226.716 413.934,201.724 385.116,182.752 L 419.661,148.208 ZM 256.00,349.00 C 244.638,349.00 233.624,347.512 223.136,344.733 L 379.729,188.141 C 382.51,198.627 384.00,209.638 384.00,221.00 C 384.00,291.692 326.692,349.00 256.00,349.00 ZM 480.00,0.00l-26.869,0.00 L 343.325,109.806C 315.787,100.844, 286.448,96.00, 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00 c 21.329,42.596, 52.564,79.154, 90.597,106.534L0.00,453.131L0.00,480.00 l 26.869,0.00 L 480.00,26.869L 480.00,0.00 z M 208.00,157.00c 24.022,0.00, 43.923,17.647, 47.446,40.685 l-54.762,54.762C 177.647,248.923, 160.00,229.022, 160.00,205.00C 160.00,178.49, 181.49,157.00, 208.00,157.00z M 55.058,256.00 c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65C 130.725,190.866, 128.00,205.613, 128.00,221.00 c0.00,29.262, 9.825,56.224, 26.349,77.781l-29.275,29.275C 97.038,309.235, 73.197,284.67, 55.058,256.00z";
    // var paperclipSvgPath = "M 348.916,163.524l-32.476-32.461L 154.035,293.434c-26.907,26.896-26.907,70.524,0.00,97.422 c 26.902,26.896, 70.53,26.896, 97.437,0.00l 194.886-194.854c 44.857-44.831, 44.857-117.531,0.00-162.363 c-44.833-44.852-117.556-44.852-162.391,0.00L 79.335,238.212l 0.017,0.016c-0.145,0.152-0.306,0.288-0.438,0.423 c-62.551,62.548-62.551,163.928,0.00,226.453c 62.527,62.528, 163.934,62.528, 226.494,0.00c 0.137-0.137, 0.258-0.284, 0.41-0.438l 0.016,0.017 l 139.666-139.646l-32.493-32.46L 273.35,432.208l-0.008,0.00 c-0.148,0.134-0.282,0.285-0.423,0.422 c-44.537,44.529-116.99,44.529-161.538,0.00c-44.531-44.521-44.531-116.961,0.00-161.489c 0.152-0.152, 0.302-0.291, 0.444-0.423l-0.023-0.03 l 204.64-204.583c 26.856-26.869, 70.572-26.869, 97.443,0.00c 26.856,26.867, 26.856,70.574,0.00,97.42L 218.999,358.375 c-8.968,8.961-23.527,8.961-32.486,0.00c-8.947-8.943-8.947-23.516,0.00-32.46L 348.916,163.524z";

    // footer for image export
    var _exportFooter = null;

    // ------------------- debug info for groups/links --------------------------------

    function groupInfo(obj) {
        return obj.data.text + "\n" + 'object: ' + obj + "\n" + 'key: ' + obj.data.key + "\n" + 'containingGroup: ' + obj.containingGroup + "\n" + 'layout: ' + obj.layout + "\n" + 'data.layout: ' + obj.data.layout + "\n" + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + "\n" + 'freehand position (data.loc): ' + go.Point.parse(obj.data.loc) + "\n" + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + "\n" + 'getScale(): ' + map.layouts.getScale(obj) + "\n" + 'isLinkLabel: ' + obj.data.isLinkLabel + "\n" + 'labeledLink: ' + obj.labeledLink + "\n";
    }

    function nodeInfo(obj) {
        return 'object: ' + obj + "\n" + 'key: ' + obj.data.key + "\n" + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + "\n" + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + "\n";
    }

    function linkInfo(obj) {
        var snpos = map.layouts.getSameNodesLinkPosition(obj);
        return '' + 'object: ' + obj + "\n" + 'fromNode: ' + obj.fromNode + "\n" + 'toNode: ' + obj.toNode + "\n" + 'labelNodes: ' + obj.labelNodes.count + "\n" + 'labelNodeIsVisible: ' + map.layouts.labelNodeIsVisible(obj) + "\n" + 'fromPortId: ' + obj.fromPortId + "\n" + 'toPortId: ' + obj.toPortId + "\n" + 'category: ' + (obj.data ? obj.data.category : '') + "\n" + 'containingGroup: ' + obj.containingGroup + "\n" + 'fromAndToNodesAreVisible: ' + map.layouts.fromAndToNodesAreVisible(obj) + "\n" + 'curve: ' + obj.curve + "\n" + 'curviness: ' + obj.curviness + "\n" + 'fromEndSegmentLength: ' + Math.round(obj.fromEndSegmentLength) + "\n" + 'toEndSegmentLength: ' + Math.round(obj.toEndSegmentLength) + "\n" + 'sameNodesLinkPosition: ' + snpos.index + ' of ' + snpos.count + "\n" +
        //+ 'geometry: ' + obj.geometry + "\n" +
        'getLinkStrokeWidth: ' + map.layouts.getLinkStrokeWidth(obj) + "\n";
    }

    // -----------------------------------------------------------------------------

    // NB: these are here because they are about colors;
    // similar functions that are scale-related are in layouts.js...
    function getGroupSelectionStroke(obj) {
        if (obj.isSelected) {
            if (map.perspectives.isInPEditorMode()) return config.colors.DSRP.P;else if (map.perspectives.isInDEditorMode()) return config.colors.DSRP.D;else return config.shapes.box.borderColor;
        } else {
            return config.shapes.box.borderColor;
        }
    }

    // OK, this isn't about colors, but it wants to be near the one above...
    function getGroupSelectionStrokeWidth(obj) {
        return obj.isSelected ? config.shapes.box.borderHighlightWidth : config.shapes.box.borderWidth;
    }

    function getRLinkSelectionStroke(obj) {
        if (obj.isSelected || obj == map.ui.mouseOverLink) {
            return config.shapes.line.highlightColor; // TODO: can P links be selected?
        } else {
                return config.shapes.line.color;
            }
    }

    // -----------------------------------------------------------------------------

    // callbacks to determine when the corners should be visible

    function showDCorner(group) {
        if (map.perspectives.isDEditorThing(group)) {
            // mark distinction thing
            return true;
        } else if (map.perspectives.isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.presenter.isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.ui.mouseOverGroup || // show corners on mouseover
            $scope.isTouchDevice() && group.isSelected || canDragSelectionToBecomeSistersOf(group, false) && ( // drag to D (make it sisters)
            map.ui.dragTargetPosition === null || cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
        }
    }

    function showSCorner(group) {
        if (map.perspectives.isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.presenter.isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.ui.mouseOverGroup || // show corners on mouseover
            $scope.isTouchDevice() && group.isSelected || canDragSelectionToBecomeChildrenOf(group, false) && ( // drag to S (make it children)
            map.ui.dragTargetPosition === null || cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
        }
    }

    function showRCorner(group) {
        if (map.perspectives.isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.presenter.isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.ui.mouseOverGroup || $scope.isTouchDevice() && group.isSelected; // show corners on mouseover
        }
    }

    function showPCorner(group) {
        if (map.perspectives.isPEditorPoint(group)) {
            return true; // mark perspective point
        } else if (map.perspectives.isInPOrDEditorMode()) {
                // don't show any corners if in P/D editor mode
                return false;
            } else if (map.presenter.isCreatingThumbnail) {
                // don't show any corners if capturing thumbnail
                return false;
            } else {
                return group == map.ui.mouseOverGroup || $scope.isTouchDevice() && group.isSelected; // show corners on mouseover
            }
    }

    // when a P link should be visible

    this.showPLink = function (link) {
        var mode = map.ui.getMapEditorOptions().perspectiveMode;
        if (map.perspectives.isPEditorPoint(link.fromNode)) {
            // show P's when this link is from the current Point
            return true;
        } else if (map.perspectives.isInPOrDEditorMode()) {
            // don't show P's for non-Point things, even on mouseover
            return false;
        } else {
            return (mode == 'lines' || mode == 'both') && (link.fromNode == map.ui.mouseOverGroup || map.pIsExpanded(link.fromNode));
        }
    };

    this.showPDot = function (link) {
        return true; // map.ui.getMapEditorOptions().perspectiveMode != 'both';
    };

    // these functions are used in two modes:
    // 1. with isDropping == false, to highlight drop targets based on map.ui.dragTargetGroup and map.ui.dragTargetPosition,
    //    which are set on mouseDragEnter/mouseDragleave
    // 2. with isDropping == true, on drop, when the above indicators have gone away, but we know what the dropped
    //    and target groups are, and we want to know what the drop should do.

    function canDragSelectionToBecomeSistersOf(group, isDropping) {
        return (group == map.ui.dragTargetGroup || isDropping) && map.thingsSelectedAreDescendantsOf(group);
    }

    function canDragSelectionToBecomeChildrenOf(group, isDropping) {
        return (group == map.ui.dragTargetGroup || isDropping) && !map.thingsSelectedIncludeSlide() && !map.thingsSelectedAreDescendantsOf(group);
    }

    // side is map.LEFT or map.RIGHT
    function canDragSelectionToBecomeOrderedSisterOf(targetGroup, side, isDropping) {
        // must be dragging single group
        var draggedGroup = map.getUniqueThingSelected();
        if (!draggedGroup) {
            return false;
        }

        // dragged and target must be Sisters in inventory layout
        return (targetGroup == map.ui.dragTargetGroup || isDropping) && (map.ui.dragTargetPosition == side || isDropping) && map.layouts.areSistersInInventoryLayout(draggedGroup, targetGroup);
    }

    function cannotDragSelectionToBecomeOrderedSisterOf(targetGroup) {
        return !canDragSelectionToBecomeOrderedSisterOf(targetGroup, map.LEFT) && !canDragSelectionToBecomeOrderedSisterOf(targetGroup, map.RIGHT);
    }

    // handle drop on one of the three target regions (top, middle, bottom)
    // side is map.LEFT or map.RIGHT
    function handleGroupMouseDrop(event, dropTarget, side) {
        //console.log('dragAboveTarget.mouseDrop, target: ' + dropTarget + ', part: ' + dropTarget .part + ', show: ' + show);
        if (side !== null && canDragSelectionToBecomeOrderedSisterOf(dropTarget.part, side, true)) {
            map.addSelectedThingAsOrderedSisterOf(dropTarget.part, side);
        } else if (canDragSelectionToBecomeSistersOf(dropTarget.part, true)) {
            map.addSelectedThingsAsSistersOf(dropTarget.part);
        } else if (canDragSelectionToBecomeChildrenOf(dropTarget.part, true)) {
            map.addSelectedThingsAsChildrenOf(dropTarget.part);
        }
    }

    // when to show the R-thing knob on a link
    function showKnob(link) {
        return link == map.ui.mouseOverLink;
    }

    // ---------------- components for main group template ------------------

    // show only when system is collapsed
    function sCollapsedMarker() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return !showSCorner(obj) && obj.memberParts.count > 0 && !obj.isSubGraphExpanded;
        }).ofObject(), {
            position: new go.Point(5, 88),
            desiredSize: new go.Size(5, 10),
            geometry: go.Geometry.parse("F M0 0 L5 5 L0 10z", true),
            fill: config.colors.darkGrey,
            stroke: null,
            cursor: 'pointer',
            pickable: false
        });
    }

    function attachmentPaperClip() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return obj.data.attachments !== null && obj.data.attachments !== undefined && obj.data.attachments.length > 0;
        }).ofObject(), new go.Binding('geometry', '', function (obj) {
            return go.Geometry.parse(config.shapes.paperClip.svg, true);
        }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
            return new go.Size(512, 512); // NB: the two icons don't scale to the same proportions for some reason - ??
        }).ofObject(), {
            position: new go.Point(46, 85),
            scale: 0.02,
            stroke: config.colors.black,
            fill: config.colors.black,
            click: function click(event, target) {
                //console.log('clip clicked');
                map.ui.toggleTab(map.ui.TAB_ID_ATTACHMENTS);
            }
        });
    }

    function pEyeball() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return map.perspectives.isPerspectivePoint(obj);
        }).ofObject(), new go.Binding('geometry', '', function (obj) {
            return go.Geometry.parse(map.pIsExpanded(obj) ? config.shapes.eye.svg : config.shapes.eye.svgBlocked, true);
        }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
            return new go.Size(512, map.pIsExpanded(obj) ? 440 : 512); // NB: the two icons don't scale to the same proportions for some reason - ??
        }).ofObject(), {
            position: new go.Point(87, 4),
            scale: 0.02,
            stroke: config.colors.black,
            fill: config.colors.black,
            pickable: false
        });
    }

    // P expansion indicator - this shows when the P corner is not visible, and only if the thing is a perspective point
    function pointMarker() {
        return pEyeball();
    }

    // P view indicator
    function viewMarker() {
        return;
    }

    function getViewMarkerFill(obj) {
        var weight = map.perspectives.getPerspectiveViewWeight(obj);

        if (weight == 3) {
            return config.colors.P.dark;
        } else if (weight == 2) {
            return config.colors.DSRP.P;
        } else if (weight == 1) {
            return config.colors.P.light;
        } else {
            return "transparent";
        }
    }

    // --------- handlers for mouse drag/drop actions on groups, which need to be replicated on different target parts -------

    // position is map.LEFT, null, or map.RIGHT
    this.getGroupMouseDragEnterHandler = function (position) {
        return function (event, target, obj2) {
            //console.log('mouseDragEnter, e.dp: ' + event.documentPoint + ', target.part: ' + target.part + ', target bounds: ' + target.actualBounds);
            map.ui.dragTargetGroup = target.part;
            map.ui.dragTargetPosition = position;
            map.diagram.updateAllTargetBindings();
        };
    };

    this.groupMouseDragLeaveHandler = function (event, target, obj2) {
        map.ui.dragTargetGroup = null;
        map.ui.dragTargetPosition = null;
        map.diagram.updateAllTargetBindings();
    };

    this.getGroupMouseDropHandler = function (position) {
        return function (event, dropTarget) {
            handleGroupMouseDrop(event, dropTarget, position);
        };
    };

    var react = require('./buttons/buttonClick');
    var groupClickHandler = function groupClickHandler(event, target) {
        // handle single or double click
        react(map, '', target);
        return true;
    };
    // -------------- group/Thing template --------------------

    var nodeHoverAdornment = mk(go.Adornment, "Spot", {
        background: "transparent",
        mouseLeave: function mouseLeave(e, obj) {
            var ad = obj.part;
            ad.adornedPart.removeAdornment("mouseHover");
        }
    }, mk(go.Placeholder, {
        background: "transparent", // to allow this Placeholder to be "seen" by mouse events
        isActionable: true, // needed because this is in a temporary Layer
        click: function click(e, obj) {
            var node = obj.part.adornedPart;
            node.diagram.select(node);
        }
    }), require('./buttons/d')(map), require('./buttons/s')(map), require('./buttons/r')(map), require('./buttons/p')(map));

    var groupSelectionAdornmentTemplate = mk(go.Adornment, "Spot", mk(go.Panel, "Spot", mk(go.Shape, "Circle", {
        fill: null,
        stroke: "dodgerblue",
        strokeWidth: 4
    }), mk(go.Placeholder) // this represents the selected Node
    ));

    this.groupTemplate = mk(go.Group, go.Panel.Vertical, new go.Binding("layout", "layout", function (layoutName) {
        return map.layouts.getLayout(layoutName);
    }), new go.Binding("movable", "", function (obj) {
        return !obj.isLinkLabel;
    }).ofObject(), new go.Binding("isSubGraphExpanded", "sExpanded"),
    // dim the thing if it's being dragged over another thing (drop to sister/child)
    new go.Binding('opacity', '', function (obj) {
        return obj.isSelected && map.ui.dragTargetGroup ? 0.25 : 1;
    }).ofObject(), {
        locationObjectName: "mainpanel",
        locationSpot: go.Spot.TopLeft,
        selectionAdorned: true,
        isSubGraphExpanded: true,
        layerName: 'Foreground',
        // highlight corners
        mouseEnter: function mouseEnter(event, target, obj2) {
            map.ui.mouseOverGroup = target;
            map.diagram.updateAllTargetBindings();
        },
        // unhighlight corners
        mouseLeave: function mouseLeave(event, target, obj2) {
            map.ui.mouseOverGroup = null;
            map.diagram.updateAllTargetBindings();
        }
        // containingGroupChanged: function(part, oldgroup, newgroup) {
        //     map.diagram.model.setDataProperty(part.data, 'level', map.computeLevel(part));
        //     //part.updateTargetBindings();
        // }
    }, mk(go.Panel, go.Panel.Spot, {
        mouseHover: function mouseHover(e, obj) {
            var node = obj.part;
            nodeHoverAdornment.adornedObject = node.findObject('dragarea');
            node.addAdornment("mouseHover", nodeHoverAdornment);
        }
    }, new go.Binding("scale", "", map.layouts.getScale).ofObject(),
    // drag area
    mk(go.Shape, "Circle", {
        name: "dragarea",
        position: new go.Point(0, 0),
        width: 50,
        height: 50,
        fill: config.shapes.box.fillColor,
        stroke: null,
        cursor: "move",
        portId: "",
        fromLinkable: true,
        fromLinkableSelfNode: false,
        fromLinkableDuplicates: true,
        toLinkable: true,
        toLinkableSelfNode: false,
        toLinkableDuplicates: true,
        mouseDragEnter: self.getGroupMouseDragEnterHandler(map.LEFT),
        mouseDragLeave: self.groupMouseDragLeaveHandler,
        mouseDrop: self.getGroupMouseDropHandler(map.LEFT),

        // show debug info
        contextClick: function contextClick(event, target) {
            if (event.control) {
                //console.log(groupInfo(target.part));
            }
        }

    }, new go.Binding('stroke', '', getGroupSelectionStroke).ofObject(), new go.Binding('strokeWidth', '', getGroupSelectionStrokeWidth).ofObject()), mk(go.Shape, // provide interior area where the user can grab the node
    {
        //position: new go.Point(0, 0),
        fill: "transparent",
        stroke: null,
        desiredSize: new go.Size(50, 50),
        cursor: "move"
    }), mk(go.TextBlock, new go.Binding("text", "text").makeTwoWay(), new go.Binding("alignment", "alignment").makeTwoWay(), new go.Binding("visible", "", function (group) {
        // always show text inside box for R-things, because external text will throw off layout
        return true;
    }).ofObject(), {
        //position: new go.Point(0, 0),
        cursor: config.shapes.label.cursor,
        font: config.shapes.label.font,
        isMultiline: true,
        editable: true,
        _isNodeLabel: true,
        click: groupClickHandler,
        contextClick: function contextClick(event, target) {
            if (event.control) {
                //console.log(groupInfo(target.part));
            }
        }
    })),
    // the placeholder normally holds the child nodes, but we just use a dummy placeholder
    mk(go.Shape, {
        name: "placeholder",
        fill: "transparent",
        stroke: null,
        desiredSize: new go.Size(0, 0)
    }));

    this.groupTemplate.selectionAdornmentTemplate = mk(go.Adornment, "Spot", mk(go.Panel, "Auto", mk(go.Shape, "Circle", {
        fill: null,
        stroke: null,
        strokeWidth: 0
    }), mk(go.Placeholder) // this represents the selected Node
    ));

    //     //P
    //     require('./buttons/p')(map),
    //     //D
    //     require('./buttons/d')(map),
    //     //S
    //     require('./buttons/s')(map),
    //     //R
    //     require('./buttons/r')(map)
    //     ); // end Adornment

    // ------------------- link template ---------------------------

    this.shapes = ['to', 'from', 'toFrom', 'noArrows'];

    this.getNextRShape = function () {
        var current = self._currentRShape;
        var next = self.shapes[0];
        if (current) {
            var idx = self.shapes.indexOf(current) + 1;
            if (idx >= self.shapes.length) {
                idx = 0;
            }
            next = self.shapes[idx];
        }
        self._currentRShape = next;
        return next;
    };

    this._currentSelectedLink = null;

    this.linkTemplate = mk(go.Link, {
        selectionAdorned: false,
        layerName: '',
        //routing: go.Link.Orthogonal,
        relinkableFrom: true,
        relinkableTo: true,
        smoothness: 1.0,
        adjusting: go.Link.Stretch,
        reshapable: true,
        mouseEnter: function mouseEnter(event, target, obj2) {
            map.ui.mouseOverLink = target;
            map.diagram.updateAllTargetBindings();
        },
        mouseLeave: function mouseLeave(event, target, obj2) {
            map.ui.mouseOverLink = null;
            map.diagram.updateAllTargetBindings();
        },
        mouseDragEnter: function mouseDragEnter(event, target, dragObject) {
            map.ui.mouseOverLink = target;
            map.diagram.updateAllTargetBindings();
        },
        mouseDragLeave: function mouseDragLeave(event, dropTarget, dragObject) {
            map.ui.mouseOverLink = null;
            map.diagram.updateAllTargetBindings();
        },
        mouseDrop: function mouseDrop(event, dropTarget) {
            var parts = map.diagram.selection;
            if (parts && parts.count == 1 && parts.first() instanceof go.Group) {
                map.addThingAsRThing(parts.first(), dropTarget);
            }
        },
        click: function click(event, target) {
            if (self._currentSelectedLink == target.position) {
                var shape = self.getNextRShape();
                map.ui.setSelectedRelationshipsDirection(shape);
            } else {
                self._currentSelectedLink = target.position;
            }
        },
        doubleClick: function doubleClick(event, target) {
            map.createRThing(target);
        },
        contextClick: function contextClick(event, target) {
            if (event.control) {
                //console.log(linkInfo(target));
            }
        }
    }, new go.Binding("points").makeTwoWay(), new go.Binding("curviness", "curviness"), mk(go.Shape, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding("strokeWidth", "", map.layouts.getLinkStrokeWidth).ofObject(), {
        name: "LINKSHAPE"
    }),
    // show to/from arrowheads based on link "type" attribute
    mk(go.Shape, {
        fromArrow: "Backward"
    }, new go.Binding('fill', '', getRLinkSelectionStroke).ofObject(), new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding("scale", "", map.layouts.getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t == 'from' || t == 'toFrom';
    })), mk(go.Shape, {
        toArrow: "Standard"
    }, new go.Binding('fill', '', getRLinkSelectionStroke).ofObject(), new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding("scale", "", map.layouts.getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t == 'to' || t == 'toFrom';
    })), mk(go.Panel, go.Panel.Auto, // link label "knob"
    new go.Binding('opacity', '', function (obj) {
        return showKnob(obj) ? 1 : 0;
    }).ofObject(), new go.Binding("scale", "", map.layouts.getArrowheadScale).ofObject(), mk(go.Shape, {
        figure: "Ellipse",
        fill: config.colors.DSRP.D,
        stroke: config.colors.DSRP.D,
        width: 12,
        height: 12
    })));

    this.pLinkTemplate = mk(go.Link, {
        curve: go.Link.Bezier,
        adjusting: go.Link.Stretch,
        reshapable: true
    }, new go.Binding("points").makeTwoWay(), new go.Binding("curviness", "curviness"), new go.Binding('opacity', '', function (obj) {
        return self.showPLink(obj) ? 1 : 0;
    }).ofObject(), {
        selectionAdorned: false,
        layerName: 'Background', // make P links fall behind R links
        routing: go.Link.Normal,
        curve: go.Link.Bezier,
        adjusting: go.Link.Stretch,
        reshapable: true,
        contextClick: function contextClick(event, target) {
            if (event.control) {
                //console.log(linkInfo(target));
            }
        }
    }, mk(go.Shape, new go.Binding("strokeWidth", "", map.layouts.getLinkStrokeWidth).ofObject(), {
        name: "LINKSHAPE",
        stroke: config.colors.P.light,
        fill: config.colors.P.light
    }), mk(go.Shape,
    // new go.Binding('visible', '', function(obj) {
    //     return (self.showPDot(obj) ? 1 : 0);
    // }).ofObject(),
    new go.Binding("scale", "", map.layouts.getArrowheadScale).ofObject(), {
        toArrow: "Circle",
        stroke: config.colors.P.light,
        fill: config.colors.P.light
    }));

    this.dLinkTemplate = mk(go.Link, {
        selectable: false
    }, mk(go.Shape, {
        name: "LINKSHAPE",
        stroke: null
    }));

    // ----------- temporary link/node templates, for use when dragging to create R/P lines -------------

    // define initial temporary link templates - these will be modified when handlePortTargeted is called
    this.setTemporaryLinkTemplates = function (tool) {
        tool.temporaryLink = makeTemporaryLinkTemplate();
        tool.temporaryFromNode = makeTemporaryNodeTemplate();
        tool.temporaryToNode = makeTemporaryNodeTemplate();
    };

    function makeTemporaryLinkTemplate() {
        return mk(go.Link, {
            layerName: "Tool",
            curve: go.Link.Bezier
        }, mk(go.Shape, {
            name: 'LINKSHAPE',
            strokeWidth: 2
        }));
    }

    function makeTemporaryNodeTemplate() {
        return mk(go.Group, {
            layerName: "Tool"
        }, mk(go.Shape, "Circle", {
            name: 'border',
            strokeWidth: 3,
            fill: null
        }));
    }

    // change color and portId of temporary link templates based on the type of link being created/relinked
    this.handlePortTargeted = function (diagram, realnode, realport, tempnode, tempport, toend) {
        // //console.log('portTargeted, realport: ' + (realport ? realport.name : '') + ', tempport: ' + (tempport ? tempport.name : '')
        //     + ', originalFromPort: ' + (ltool.originalFromPort ? ltool.originalFromPort.name : '') + ', originalToPort: ' + ltool.originalToPort);

        var tool = diagram.toolManager.draggingTool;
        var linkShape = tool.temporaryLink.findObject('LINKSHAPE');
        var fromBorder = tool.temporaryFromNode.findObject('border');
        var toBorder = tool.temporaryToNode.findObject('border');

        if (tool._dragData) {
            if (tool._dragData.portId == CONSTANTS.DSRP.P) {
                linkShape.stroke = config.colors.DSRP.P;
                fromBorder.stroke = config.colors.DSRP.P;
                toBorder.stroke = config.colors.DSRP.P;
                fromBorder.portId = CONSTANTS.DSRP.P;
                toBorder.portId = CONSTANTS.DSRP.P;
            } else {
                linkShape.stroke = config.colors.DSRP.R;
                fromBorder.stroke = config.colors.DSRP.R;
                toBorder.stroke = config.colors.DSRP.R;
                fromBorder.portId = CONSTANTS.DSRP.R;
                toBorder.portId = CONSTANTS.DSRP.R;
            }
            tempnode.scale = map.layouts.getScale(realnode);

            tool._dragData = null;
            diagram.commitTransaction("Drag");
        }
    };

    // prevent duplicate CONSTANTS.DSRP.P links in the same direction between the same two things
    this.validateLink = function (fromNode, fromPort, toNode, toPort) {
        // the P port is on top of the R port, so both P and R links get the toPort set to R by default.
        if (fromPort.portId == CONSTANTS.DSRP.P) {
            // NB: findLinksTo would be simpler, but it doesn't seem to work... (?)
            var pLinks = toNode.findLinksBetween(fromNode, CONSTANTS.DSRP.P, CONSTANTS.DSRP.P);
            //console.log('validateLink, pLinks from ' + fromNode + ':' + fromPort + ' to ' + toNode + ':' + toPort + ' = ' + pLinks.count);
            if (pLinks.count) {
                while (pLinks.next()) {
                    var pLink = pLinks.value;
                    if (pLink.fromNode == fromNode && pLink.toNode == toNode) {
                        return false;
                    }
                }
            }
        }
        return true;
    };

    // ------------------- slide node template ----------------------

    function createSlideResizeHandle(alignment) {
        return mk(go.Shape, new go.Binding("desiredSize", "", function (obj) {
            var slide = obj.adornedObject;
            var size = Math.min(slide.width, slide.height) * .05;
            return new go.Size(size, size);
        }).ofObject(), {
            alignment: alignment,
            cursor: "col-resize",
            fill: 'rgba(251,170,54,1)',
            stroke: null
        });
    }

    this.slideTemplate = mk(go.Node, go.Panel.Auto,
    // NB: unlike groups, slides just use a normal 2-way location binding
    new go.Binding("location", "loc", go.Point.parse).makeTwoWay(go.Point.stringify), new go.Binding("width", "width").makeTwoWay(), new go.Binding("height", "height").makeTwoWay(), new go.Binding("visible", "", function (obj) {
        return obj.data.hasRegion && map.ui.currentTabIs(map.ui.TAB_ID_PRESENTER) && !map.presenter.isPresenting && !map.presenter.isCreatingThumbnail && map.presenter.currentSlideIndex == obj.data.index;
    }).ofObject(), {
        locationSpot: go.Spot.TopLeft,
        selectionAdorned: false,
        resizable: true,
        resizeAdornmentTemplate: mk(go.Adornment, "Spot", mk(go.Placeholder), // takes size and position of adorned object
        createSlideResizeHandle(go.Spot.TopLeft), createSlideResizeHandle(go.Spot.Top), createSlideResizeHandle(go.Spot.TopRight), createSlideResizeHandle(go.Spot.Right), createSlideResizeHandle(go.Spot.BottomRight), createSlideResizeHandle(go.Spot.Bottom), createSlideResizeHandle(go.Spot.BottomLeft), createSlideResizeHandle(go.Spot.Left)),
        padding: 0,
        contextClick: function contextClick(event, target) {
            //console.log(nodeInfo(target.part));
        }
    }, mk(go.Shape, "Rectangle", {
        name: "slideborder",
        fill: 'rgba(251,170,54,.1)',
        stroke: null
    }));

    // ------------------- export footer ----------------------

    // NB: this is not a template per se, in that it is added to the diagram
    // statically, rather than being bound to something in the model.
    // But we put it here because it is about creating parts and stuff.

    function createExportFooter() {
        return mk(go.Node, go.Panel.Spot, {
            layerName: 'Foreground',
            location: new go.Point(0, 0),
            scale: 1,
            opacity: 0,
            pickable: false,
            selectable: false
        }, mk(go.Shape, "Rectangle", {
            name: "rectangle",
            height: 60,
            fill: null,
            stroke: null
        }), mk(go.Picture, {
            source: 'metamap/assets/img/metamap-logo-50.png',
            alignment: go.Spot.TopLeft,
            alignmentFocus: go.Spot.TopLeft,
            width: 195,
            height: 50
        }), mk(go.TextBlock, {
            text: "metamap.cabreraresearch.org",
            alignment: go.Spot.BottomLeft,
            alignmentFocus: go.Spot.BottomLeft,
            width: 200
        }), mk(go.TextBlock, {
            name: "mapTitle",
            text: "",
            textAlign: "right",
            alignment: go.Spot.TopRight,
            alignmentFocus: go.Spot.TopRight,
            width: 300
        }), mk(go.TextBlock, {
            name: "authorName",
            text: "",
            textAlign: "right",
            alignment: go.Spot.BottomRight,
            alignmentFocus: go.Spot.BottomRight,
            width: 300
        }));
    }

    // creates or refreshes the footer logo/text that is displayed in the image export
    this.addExportFooter = function () {
        if (!_exportFooter) {
            _exportFooter = createExportFooter();
            map.diagram.add(_exportFooter);
        }
    };

    this.showExportFooter = function () {
        var rect = map.computeMapBounds();
        // put footer at least 100 px below bottom of map; make it at least 500px wide
        var x = rect.x;
        var y = rect.y + rect.height + Math.max(100, rect.height / 5);
        var w = Math.max(500, rect.width);
        //console.log('showExportFooter, bounds rect: ' + rect + ', w: ' + w);
        _exportFooter.location = new go.Point(x, y);
        _exportFooter.findObject("rectangle").width = w;
        _exportFooter.findObject("mapTitle").text = "Map Title: " + $scope.mapTitle;
        _exportFooter.findObject("authorName").text = "Author: " + $scope.userName;
        _exportFooter.opacity = 1;
        _exportFooter.invalidateLayout();
    };

    this.hideExportFooter = function () {
        _exportFooter.opacity = 0;
    };
};

},{"../../MetaMap":1,"../constants/constants":48,"./buttons/button":23,"./buttons/buttonClick":24,"./buttons/d":26,"./buttons/p":27,"./buttons/r":28,"./buttons/s":29,"./sbEditor":38}],43:[function(require,module,exports){
'use strict';

var SandbankEditor = require('./sbEditor');

SandbankEditor.Tests = function ($scope, map) {

    var self = this;

    this.TEST_STATUS_NOT_RUN = 'not-run';
    this.TEST_STATUS_PASSED = 'passed';
    this.TEST_STATUS_EXAMINE = 'examine';
    this.TEST_STATUS_FAILED = 'failed';

    this.currentTest = null;

    this.init = function () {};

    this.runTest = function (name) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var test = _.findWhere(self.tests, { name: name });
            test.status = self.TEST_STATUS_NOT_RUN;
            self.currentTest = test;
            diagram.clear();
            test.run(diagram);
            if (test.check === undefined) {
                test.status = self.TEST_STATUS_EXAMINE;
            } else {
                test.failReason = test.check(diagram);
                if (_.isString(test.failReason)) {
                    test.status = self.TEST_STATUS_FAILED;
                } else {
                    test.status = self.TEST_STATUS_PASSED;
                }
            }
        });
    };

    this.createGeneratorTest = function (name, mapItFn) {
        return {
            name: 'ThinkQ: ' + name,
            run: function run(diagram) {
                self.runGeneratorTest(mapItFn);
            }
        };
    };

    this.runGeneratorTest = function (mapItFn) {
        var diagram = map.getDiagram();
        var generator = map.getGenerator();
        generator.concept1 = 'CONCEPT 1';
        generator.concept2 = 'CONCEPT 2';
        generator.mapIt(mapItFn);
    };

    this.tests = [
    // {
    //     name: '[Failed test]',
    //     run: function(diagram) {
    //     },
    //     check: function(diagram) {
    //         return 'This test failed - this is only a test.';
    //     }
    // },
    {
        name: 'Reset map',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            map.refresh();
        },
        check: function check(diagram) {
            return diagram.findTopLevelGroups().count == 1;
        }
    }, {
        name: 'Create Sister',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createSister(group);
        },
        check: function check(diagram) {
            return diagram.findTopLevelGroups().count == 2;
        }
    }, {
        name: 'Create R to Sister',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createRToSister(group);
        }
    }, {
        name: 'Create Child',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createChild(group);
        }
    }, {
        name: 'Create 3 children and switch to freehand',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createChild(group);
            map.createChild(group);
            map.createChild(group);
            // diagram.model.setDataProperty(group.data, 'layout', 'freehand');
            group.isSelected = true;
            map.ui().setSelectedThingsLayout('freehand');
        },
        check: function check(diagram) {
            if (diagram.findTopLevelGroups().count != 1) {
                return 'Top level group count is not 1';
            }
            var group = diagram.findTopLevelGroups().first();
            if (group.memberParts.count != 3) {
                return 'Parent data children is not 3';
            }
            return true;
        }
    }, {
        name: 'Drag RTBB into outline S',
        instructions: 'Drag the preselected RTBB into Whole (S), then do an Undo',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createThing(250, 0, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createThing(500, 0, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB into freehand S',
        instructions: 'Drag the preselected RTBB into Whole (S) and examine layout',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var oldPart1 = map.createChild(whole, 'Old Part 1');
            var part1 = map.createThing(250, 30, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createThing(500, 70, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Create RTBB in outline and switch to freehand',
        instructions: 'Check auto-generated freehand layout of parts',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            whole.isSelected = true;
            map.ui().setSelectedThingsLayout('freehand');
            //diagram.model.setDataProperty(whole.data, 'layout', 'freehand');
            //map.refresh();
            diagram.clearSelection();
        }
    },

    // create RTBB in freehand, add part in outline, switch back to freehand
    // create RTBB in freehand, drag in part in outline, switch back to freehand

    {
        name: 'Drag RTBB out of S',
        instructions: 'Drag the preselected RTBB onto Whole (D)',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of freehand S',
        instructions: 'Drag the preselected RTBB onto Whole (D)',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1', 10, 120);
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2', 110, 150);
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of 2nd level S',
        instructions: 'Drag the preselected RTBB onto Whole (D) of Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var subpart12 = map.createChild(part1, 'Subpart 1.2');
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            var part2 = map.createChild(whole, 'Part 2');
            map.refresh();
            diagram.clearSelection();
            subpart11.isSelected = true;
            subpart12.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of 2nd level freehand S',
        instructions: 'Drag the preselected RTBB onto Whole (D) of Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1', 0, 120);
            var subpart11 = map.createChild(part1, 'Subpart 1.1', 10, 180);
            var subpart12 = map.createChild(part1, 'Subpart 1.2', 20, 220);
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            var part2 = map.createChild(whole, 'Part 2', 0, 300);
            map.refresh();
            diagram.clearSelection();
            subpart11.isSelected = true;
            subpart12.isSelected = true;
        }
    }, {
        name: 'Rchannel',
        instructions: 'Note that R-things are in part-whole relation',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole 1', 'right');
            var child11 = map.createChild(thing1, 'Part 1.1');
            var thing2 = map.createThing(250, 0, 'Whole 2');
            var child21 = map.createChild(thing2, 'Part 2.1');

            var rThing1 = map.createRLinkWithRThing(thing1, thing2, 'Rthing 1-2');
            var rThing11 = map.createRLinkWithRThing(child11, child21, 'Rthing 1.1 - 2.1');
            //console.log('Rchannel, rThing11: ' + rThing11);

            diagram.clearSelection();
            rThing11.isSelected = true;
            map.addSelectedThingsAsChildrenOf(rThing1);
        }
    }, {
        name: 'Disappearing parts on new idea creation',
        instructions: 'Create a new top-level idea - Part 1.1 should not disappear temporarily',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole 1', 'right');
            var child11 = map.createChild(thing1, 'Part 1.1');
        }
    }, {
        name: 'Drag top-level thing into freehand system',
        instructions: 'Drag New Part into Whole; examine resulting part layout',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole', 'freehand');
            var child11 = map.createChild(thing1, 'Part');
            var newPart = map.createThing(250, 0, 'New Part', 'left');
        }
    }, {
        name: 'Drag top-level RTBB into freehand system',
        instructions: 'Drag preselected RTBB into Whole; examine resulting part layout',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole', 'freehand');
            var child11 = map.createChild(thing1, 'Part');
            var bar = map.createThing(250, 0, 'Bar', 'left');
            var bell = map.createThing(500, 0, 'Bell', 'left');
            var rThing = map.createRLinkWithRThing(bar, bell, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            bar.isSelected = true;
            bell.isSelected = true;
        }
    }, {
        name: 'Drag R-thing square into freehand system',
        instructions: 'Drag preselected square into Whole; examine resulting part layout',
        run: function run(diagram) {
            var whole = map.createThing(-100, 50, 'Whole', 'freehand');
            var child11 = map.createChild(whole, 'Part');
            var part11 = map.createThing(250, 0, 'Part11', 'left');
            var part12 = map.createThing(500, 0, 'Part12', 'left');
            var part21 = map.createThing(250, 250, 'Part21', 'left');
            var part22 = map.createThing(500, 250, 'Part22', 'left');

            var rThing11_12 = map.createRLinkWithRThing(part11, part12, 'Rthing 11-12');
            var rThing11_21 = map.createRLinkWithRThing(part11, part21, 'Rthing 11-21');
            var rThing12_22 = map.createRLinkWithRThing(part12, part22, 'Rthing 12-22');
            var rThing21_22 = map.createRLinkWithRThing(part21, part22, 'Rthing 21-22');
            map.refresh();
            diagram.clearSelection();
            part11.isSelected = true;
            part12.isSelected = true;
            part21.isSelected = true;
            part22.isSelected = true;
        }
    }, {
        name: 'Drag R-thing square out of freehand system',
        instructions: 'Drag preselected square onto D of Whole; examine resulting layout',
        run: function run(diagram) {
            var whole = map.createThing(-100, 50, 'Whole', 'freehand');
            var child11 = map.createChild(whole, 'Part');
            var part11 = map.createChild(whole, 'Part11', 10, 190);
            var part12 = map.createChild(whole, 'Part12', 120, 190);
            var part21 = map.createChild(whole, 'Part21', 10, 300);
            var part22 = map.createChild(whole, 'Part22', 120, 300);

            var rThing11_12 = map.createRLinkWithRThing(part11, part12, 'Rthing 11-12');
            var rThing11_21 = map.createRLinkWithRThing(part11, part21, 'Rthing 11-21');
            var rThing12_22 = map.createRLinkWithRThing(part12, part22, 'Rthing 12-22');
            var rThing21_22 = map.createRLinkWithRThing(part21, part22, 'Rthing 21-22');
            map.refresh();
            diagram.clearSelection();
            part11.isSelected = true;
            part12.isSelected = true;
            part21.isSelected = true;
            part22.isSelected = true;
        }
    }, {
        name: 'Drag 2nd level part to D of parent',
        instructions: 'Drag Subpart 1.1 onto D of Part 1; it should appear below Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            map.refresh();
            diagram.clearSelection();
        }
    }, {
        name: 'Invisible R-thing in 2nd level of outline',
        instructions: 'R-thing between Subparts 1.1 and 1.2 should be visible',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var subpart12 = map.createChild(part1, 'Subpart 1.2');
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            rThing.desiredSize = new go.Size(30, 30);
            map.refresh();
            //console.log('rThing actualBounds: ' + rThing.actualBounds + ', scale: ' + rThing.scale + ', desiredSize: ' + rThing.desiredSize);
            //console.log('Whole desiredSize: ' + whole.desiredSize);
            diagram.clearSelection();
        }
    }, {
        name: 'R-thing between ideas in same location (error)',
        instructions: 'This should trigger an error',
        run: function run(diagram) {
            // try {
            var part1 = map.createThing(0, 0, 'Part 1', 'left');
            var part2 = map.createThing(0, 0, 'Part 2', 'left');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            // } catch(e) {
            //     alert(e.message);
            // }
        }
    },
    // {
    //     name: 'Fix bad R-thing leading to infinite loop',
    //     instructions: 'Map should display and not trigger infinite loop; model should be fixed so that r-thing is not Part 1.1 or Part 1.2',
    //     run: function(diagram) {
    //         var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
    //         var child11 = map.createChild(thing1, 'Part 1.1');
    //         var child12 = map.createChild(thing1, 'Part 1.2');
    //         var rThing = map.createRLinkWithRThing(child11, child12, 'Rthing');
    //         var rLink = rThing.labeledLink;
    //         rLink.data.labelKeys = [child11.data.key];
    //         map.checkModel();
    //         map.refresh();
    //     }
    // },
    {
        name: 'Drag to create R-line',
        instructions: 'Drag from the R-corner of Thing1 to Thing2; temporary drag line and square should be R-color; created line should be an R-line',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(100, 0, 'Thing2', 'freehand');
        }
    }, {
        name: 'Drag to create P-line',
        instructions: 'Drag from the P-corner of Thing1 to Thing2; temporary drag line and square should be P-color; created line should be a P-line',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(100, 0, 'Thing2', 'freehand');
        }
    }, {
        name: 'Relink from-port of R-line',
        instructions: 'Move the start of the R-link from Thing 1 to Thing 3; make sure it does not turn into a P-link',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(300, 0, 'Thing2', 'freehand');
            var thing3 = map.createThing(100, 200, 'Thing3', 'freehand');
            var rlink = map.createRLink(thing1, thing2);
        }
    }, {
        name: 'Relink to-port of R-line',
        instructions: 'Move the end of the R-link from Thing 2 to Thing 3; make sure it does not turn into a P-link',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(300, 0, 'Thing2', 'freehand');
            var thing3 = map.createThing(100, 200, 'Thing3', 'freehand');
            var rlink = map.createRLink(thing1, thing2);
        }
    }, {
        name: 'Showing parts of parts of a freehand whole',
        instructions: 'Whole, Part 1 and Subpart 1.1 should all be visible',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            map.refresh();
            diagram.clearSelection();
        }
    }

    // self.createGeneratorTest('WHAT_IS', map.getGenerator().WHAT_IS),
    // self.createGeneratorTest('PARTS_OF', map.getGenerator().PARTS_OF),
    // self.createGeneratorTest('PART_OF', map.getGenerator().PART_OF),
    // self.createGeneratorTest('PARTS_HAVE_PARTS', map.getGenerator().PARTS_HAVE_PARTS),
    // self.createGeneratorTest('POINT_FOR', map.getGenerator().POINT_FOR),
    // self.createGeneratorTest('HAS_MULTIPLE_PS', map.getGenerator().HAS_MULTIPLE_PS),
    // self.createGeneratorTest('R_TO', map.getGenerator().R_TO),
    // self.createGeneratorTest('R_EXISTS', map.getGenerator().R_EXISTS),
    // self.createGeneratorTest('WHAT_IS_R', map.getGenerator().WHAT_IS_R),
    // self.createGeneratorTest('DISTINGUISH_BETWEEN', map.getGenerator().DISTINGUISH_BETWEEN),
    // self.createGeneratorTest('IS_R_BETWEEN', map.getGenerator().IS_R_BETWEEN),
    // self.createGeneratorTest('CAN_BE_P', map.getGenerator().CAN_BE_P),
    // self.createGeneratorTest('MULTIPLE_PS_ARE', map.getGenerator().MULTIPLE_PS_ARE),
    // self.createGeneratorTest('P_PARTS', map.getGenerator().P_PARTS),
    // self.createGeneratorTest('COMPARE_CONTRAST', map.getGenerator().COMPARE_CONTRAST),
    // self.createGeneratorTest('R_PARTS', map.getGenerator().R_PARTS),
    // self.createGeneratorTest('PARTS_HAVE_RS', map.getGenerator().PARTS_HAVE_RS),
    // self.createGeneratorTest('PART_RS_EXIST', map.getGenerator().PART_RS_EXIST),
    // self.createGeneratorTest('PART_RS_ARE', map.getGenerator().PART_RS_ARE),
    // self.createGeneratorTest('WHAT_ABOUT', map.getGenerator().WHAT_ABOUT)

    // computePartsBounds

    // createRThing
    // addSelectedThingsAsChildrenOf
    // addSelectedThingAsOrderedSisterOf
    // addSelectedThingsAsSistersOf
    // addThingAsRThing
    // toggleDFlag
    // toggleSExpansion
    // togglePExpansion

    // presenter: select first slide and hit play; make sure first slide notes appear

    ];
};

},{"./sbEditor":38}],44:[function(require,module,exports){
'use strict';

var _ = require('lodash');

var SandbankEditor = require('./sbEditor');
var SandbankEditorOptions = require('./editor_options');

SandbankEditor.UI = function ($scope, $timeout, $http, $resource, $modal, $log, map) {

    var self = this;

    // ----------- tab ("slider") IDs - tabs are rendered in views/maps/_form --------------
    //this.TAB_ID_HISTORY = 'history-tab';
    this.TAB_ID_PRESENTER = 'presenter-tab';
    this.TAB_ID_ANALYTICS_MAP = 'analytics-tab-map';
    this.TAB_ID_ANALYTICS_THING = 'analytics-tab-thing';
    this.TAB_ID_PERSPECTIVES = 'perspectives-tab';
    this.TAB_ID_DISTINCTIONS = 'distinctions-tab';
    this.TAB_ID_ATTACHMENTS = 'attachments-tab';
    this.TAB_ID_GENERATOR = 'generator-tab';
    this.TAB_ID_STANDARDS = 'standards-tab';

    this.init = function () {};

    // ------------ editor options for map/user ----------

    var mapEditorOptions = {};

    var defaultEditorOptions = {
        // noArrows, to, from, toFrom
        defaultRelationshipDirection: 'noArrows',
        // left, right, stacked, freehand
        defaultThingLayout: 'left',
        // lines, spotlight, both
        perspectiveMode: 'lines'
    };

    // called when map is loaded to set stored options for map
    this.setMapEditorOptions = function (options) {
        mapEditorOptions = options;
    };

    // returns appropriate values from the user profile or the default options if options are not set for the map
    this.getMapEditorOptions = function () {
        var profileOptions = $scope.userProfile ? $scope.userProfile.editorOptions : null;
        var vals = [mapEditorOptions, profileOptions, defaultEditorOptions];
        mapEditorOptions = _.find(vals, function (val) {
            return !_.isEmpty(val);
        });
        return mapEditorOptions;
    };

    // saves default options for the user (map options are saved in autosave.js)
    function saveUserEditorOptions(options) {
        var data = {
            user: {
                editor_options: JSON.stringify(options)
            }
        };

        startSpinner();
        $http.put('/users/' + $scope.userId + '.json', data).then(function (response) {
            stopSpinner();
        }, function () {
            stopSpinner();
            $scope.profileEditStatus = 'Could not save editor options';
        });
    }

    // options modal

    $scope.editorOptions = new SandbankEditorOptions($scope, $http, $resource, $modal, $log);

    this.editOptions = function () {
        $scope.editorOptions.openModal(mapEditorOptions, function (options) {
            // onSaveDefaults
            saveUserEditorOptions(options);
        }, function (options) {
            // onUpdate
            mapEditorOptions = options;
            map.autosave.saveNow('edit_options');
        });
    };

    // ------------ state model ----------

    this.state = {};

    var defaultState = {
        showNavigator: false,
        currentTab: null,
        perspectivePointKey: null,
        distinctionThingKey: null
    };

    this.setStateData = function (data) {
        $scope.safeApply(function () {
            self.state = data || defaultState;
            //$scope.currentTab = self.state.currentTab;
        });
    };

    // TODO: Save state more frequently?? Currently it is only saved when autosave is triggered by other actions...

    this.getStateData = function () {
        return self.state;
    };

    // ----------- temporary state flags ------------

    this.zoomingToRegion = false;

    this.mouseOverGroup = null;
    this.mouseOverLink = null;

    this.dragTargetGroup = null;
    this.dragTargetPosition = null;

    this.helpTip = null;

    // ----------- handle bottom tabs ("sliders") -------------

    // in the following functions, ID is e.g. 'history-tab' (ID of one of the .bottom-tab's)

    // this is called by map.currentTabChanged, which is triggered by a $scope.$watch
    this.currentTabChanged = function (newValue, oldValue) {
        //console.log('ui, currentTabChanged: ' + newValue);
        self.state.currentTab = newValue;
    };

    this.currentTabIs = function (tabID) {
        return $scope.currentTab == tabID;
    };

    this.openTab = function (tabID) {
        $scope.safeApply(function () {
            $scope.currentTab = tabID;
        });
    };

    this.closeTab = function (tabID) {
        $scope.safeApply(function () {
            self.state.currentTab = null; // TODO: trigger autosave
            $scope.currentTab = null;
        });
    };

    this.disableTab = function (tabID) {
        // prevent opening other tabs when in P or D editor
        if ($scope.currentTab == self.TAB_ID_PERSPECTIVES || $scope.currentTab == self.TAB_ID_DISTINCTIONS) {
            return true;
        }
        return false;
    };

    this.toggleTab = function (tabID) {
        $scope.safeApply(function () {
            if ($scope.currentTab == tabID) {
                $scope.currentTab = null;
            } else if (!self.disableTab(tabID)) {
                $scope.currentTab = tabID;
            }
        });
    };

    this.toggleNavigator = function () {
        $scope.safeApply(function () {
            self.state.showNavigator = !self.state.showNavigator;
        });
    };

    this.toggleZoomingToRegion = function () {
        $scope.safeApply(function () {
            self.zoomingToRegion = !self.zoomingToRegion;
        });
    };

    // ----------------- zooming functions -------------------

    this.canZoomIn = function () {
        return map.diagram.scale < 32;
    };

    this.canZoomOut = function () {
        return map.diagram.scale > 0.25;
    };

    this.zoomIn = function () {
        var diagram = map.diagram;
        if (diagram.scale < 32) {
            var vb = diagram.viewportBounds.copy();
            diagram.scale = diagram.scale * 2;
            diagram.centerRect(vb);
        }
    };

    this.zoomOut = function () {
        var diagram = map.diagram;
        if (diagram.scale > 0.25) {
            var vb = diagram.viewportBounds.copy();
            diagram.scale = diagram.scale / 2;
            diagram.centerRect(vb);
        }
    };

    this.maybeZoomToRegion = function () {
        var diagram = map.diagram;
        // this flag is set by the toolbar button
        if (self.zoomingToRegion) {
            self.zoomingToRegion = false;
            //console.log('zoomToRegion, selection count: ' + diagram.selection.count);
            var rect = diagram.computePartsBounds(diagram.selection);
            diagram.zoomToRect(rect);
        }
        $scope.safeApply();
    };

    this.resetZoom = function () {
        var diagram = map.diagram;
        //var rect = diagram.computePartsBounds(diagram.nodes).copy();
        var rect = map.safeRect(map.computeMapBounds());
        //console.log('resetZoom, bounds: ' + rect);
        if (rect.width) {
            rect.inflate(rect.width / 5, rect.height / 5);
        }
        diagram.zoomToRect(rect);
        diagram.alignDocument(go.Spot.Center, go.Spot.Center);
        if (diagram.scale > 1) {
            diagram.scale = 1;
        }
    };

    // ------------ thing options (layout) ----------------

    this.getSelectedThingsOrDefaultLayout = function () {
        var sl = self.getSelectedThingsLayout();
        if (sl) {
            return sl;
        } else {
            return mapEditorOptions.defaultThingLayout;
        }
    };

    // returns a non-null value only if all selected items are groups with the same layout
    this.getSelectedThingsLayout = function () {
        var diagram = map.diagram;
        if (diagram === null || diagram.selection.count < 1) return null;

        var layout = null;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (!it.value instanceof go.Group) return null;
            var group = it.value;
            //console.log('getSelectedThingsLayout, it.value: ' + group);
            var groupLayout = group.data ? group.data.layout : null;
            if (layout !== null && groupLayout != layout) return null;
            layout = groupLayout;
        }
        //console.log('getSelectedThingsLayout: ' + layout);

        return layout;
    };

    // sets the layout of all selected things to the given layout
    this.setSelectedThingsLayout = function (layoutName) {
        var diagram = map.diagram;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Group) {
                var group = it.value;
                diagram.model.setDataProperty(group.data, 'layout', layoutName);
                map.layouts.setDescendantLayouts(group, group.data.layout);
                map.refresh();
            }
        }
    };

    // ------------ relationship options (direction) ----------------

    this.getSelectedRelationshipsOrDefaultDirection = function () {
        var sd = self.getSelectedRelationshipsDirection();
        if (sd) {
            return sd;
        } else {
            return mapEditorOptions.defaultRelationshipDirection;
        }
    };

    // returns a non-null value only if all selected items are relationships with the same direction
    this.getSelectedRelationshipsDirection = function () {
        var diagram = map.diagram;
        if (diagram === null || diagram.selection.count < 1) return null;

        var type = null;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (!it.value instanceof go.Link) return null;
            var link = it.value;
            var linkType = link.data ? link.data.type : null;
            if (type !== null && linkType != type) return null;
            type = linkType;
        }

        return type;
    };

    // sets the direction of all selected relationships to the given direction
    this.setSelectedRelationshipsDirection = function (direction) {
        var diagram = map.diagram;
        //diagram.model.startTransaction("change relationship direction");
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Link) {
                //diagram.model.startTransaction("change link type");
                diagram.model.setDataProperty(it.value.data, 'type', direction);
                //diagram.model.commitTransaction("change link type");
            }
        }
        //diagram.commitTransaction("change relationship direction");
    };

    // ------- handle corner clicks and double clicks --------

    var _cornerClicked = null;
    var _cornerFunction = null;
    var _cornerTimeout = 300;

    this.handleCornerClick = function (corner, thing) {
        var count = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];

        //console.log('handleCornerClick: corner = ' + corner + ', cornerClicked = ' + _cornerClicked);
        // assume it's a single click, and set handler
        _cornerFunction = getCornerFunction(corner, count);
        // already clicked, so it's a double click; change handler
        // if (_cornerClicked == corner) {
        //     _cornerFunction = getCornerFunction(corner, 2);
        //     //console.log('handleCornerClick: double click on ' + corner);
        //     return;
        // }
        // remember that at least one click has happened for the current corner
        _cornerClicked = corner;

        // set timer to invoke whatever handler we have ready to go (unless another click happens within the interval)
        // var timer = setTimeout(function() {
        //     // ding! invoke it
        if (_cornerFunction == self.showCornerTip) {
            _cornerFunction(thing, corner);
        } else {
            _cornerFunction(thing); // don't pass the corner arg to things like createChild that have a different second arg
        }
        // reset handler and clicked flag
        _cornerFunction = getCornerFunction(corner, 1);
        _cornerClicked = null;
        //}, _cornerTimeout);
    };

    function getCornerFunction(corner, clicks) {
        if (corner == "D") {
            return clicks == 1 ? self.showCornerTip : map.createSister;
        } else if (corner == "S") {
            return clicks == 1 ? map.toggleSExpansion : map.createChild;
        } else if (corner == "R") {
            return clicks == 1 ? self.showCornerTip : map.createRToSister;
        } else if (corner == "P") {
            return clicks == 1 ? map.togglePExpansion : map.perspectives.setPEditorPoint;
        } else if (corner === "") {
            // click on text
            return clicks == 1 ? self.showCornerTip : editText;
        } else {
            return function () {
                //console.log('getCornerFunction: no function found for corner: ' + corner + '!');
            };
        }
    }

    // NB: in this case the thing is actually the TextBox, except in outline layout it is a Panel if the box is double-clicked...
    function editText(thing, corner) {
        if (!$scope.canEdit) {
            return null;
        }

        //console.log('editText, thing: ' + thing);
        if (thing instanceof go.Panel) {
            // outline layout
            var part = thing.part;
            //console.log('editText, part: ' + part);
            if (part instanceof go.Group && part.data && (part.data.layout == 'left' || part.data.layout == 'right')) {
                var textBlockName = 'externaltext-' + part.data.layout;
                var text = thing.part.findObject(textBlockName);
                if (text) {
                    thing = text;
                }
            }
        }
        map.diagram.commandHandler.editTextBlock(thing);
    }

    // ---------------- help tip functions - see also user.js, views/maps/help_tab ---------------

    // shows thingTip or one of the cornerXTips
    this.showCornerTip = function (thing, corner) {
        //console.log('showCornerTip');
        if (corner === '') {
            self.showHelpTip('thingTip');
        } else {
            self.showHelpTip('corner' + corner + 'Tip');
        }
    };

    this.showHelpTip = function (tip) {
        //console.log('showHelpTip: ' + tip);

        // don't show help if in presenter
        if (self.currentTabIs(self.TAB_ID_PRESENTER)) {
            return;
        }

        self.helpTip = tip;
        $scope.safeApply();
        $('#help-tip').show();

        setTimeout(function () {
            $('#help-tip').fadeOut(500, function () {
                self.helpTip = null;
                $scope.safeApply();
            });
        }, 5000);
    };

    // ------------ edit map UserTags ---------------

    $scope.tagging = new SandbankTagging($scope, $http, $resource, $modal, $log);

    this.editUserTags = function () {
        $scope.tagging.openModal([$scope.mapId], true, // show description field
        function () {
            map.autosave.saveNow('edit_usertags');
        } // on update
        );
    };

    // ------------ edit map sharing ---------------

    $scope.sharing = new SandbankSharing($scope, $http, $resource, $modal, $log);

    this.editMapShares = function () {
        $scope.sharing.openModal([$scope.mapId], function () {} // on update
        );
    };

    // ------------ print/export to image ---------------

    this.printSlides = function () {
        startSpinner();
        map.presenter.createSlideThumbnails();
        stopSpinner();
        setTimeout(function () {
            window.print();
        }, 500);
    };

    var MILLION = 1000 * 1000;

    this.exportToImage = function (format) {

        $scope.imageExportLoading = true;
        $('#export-image img').remove();
        map.templates.showExportFooter();

        var rect = map.diagram.computePartsBounds(map.diagram.nodes).copy();

        var imageMB = rect.width * rect.height * 4 / MILLION; // 4 bytes/pixel
        //console.log('imageMB: ' + imageMB);

        // make the max size of the image 10MB
        // pngSize = imageMB * scale * scale
        // so max scale = sqrt(pngSize / imageMB)
        // These calculations don't seem to be right, but in practice using 500 here
        // we get a scale of 2.43 for an image 19984 x 3424 pixels
        // which results in a file size of 1.88 MB at 32 bits/pixel...
        // OR 28380 x 5196 pixels, scale = 3.41 => file size = 3.49 MB
        var scale = 4;
        if (imageMB) {
            scale = Math.min(4, Math.sqrt(50 / imageMB));
        }

        //console.log('image dimensions: ' + rect.width + ' x ' + rect.height + ', image bytes: ' + (rect.width * rect.height * 4) +
        //        ', imageMB: ' + imageMB + ', scale: ' + scale);

        $scope.showImageExport = true;

        var partsToExport = new go.List();
        partsToExport.addAll(map.diagram.nodes);
        partsToExport.addAll(map.diagram.links);
        partsToExport.remove(map.presenter.slideBlocker);

        var doImage = $timeout(function () {
            var img = map.diagram.makeImage({
                parts: partsToExport,
                maxSize: new go.Size((rect.width + 200) * scale, (rect.height + 200) * scale),
                scale: scale,
                padding: 100 * scale,
                background: '#ffffff'
            });

            $('#export-image').append(img);
            $scope.imageExportLoading = false;

            map.templates.hideExportFooter();
        }, 100);
    };

    // --------- utils -------------

    this.splitLines = function (text) {
        return text.split(/\n/);
    };
};

},{"./editor_options":31,"./sbEditor":38,"lodash":undefined}],45:[function(require,module,exports){
'use strict';

window.Sandbank = {};
var moment = require('moment');
// the topmost controller for the app

window.UserCtrl = function ($rootScope, $scope, $http, $modal, $upload) {

    // query string params
    $scope.params = URI(window.location).query(true);

    // auto-open thinkquery?
    $scope.thinkquery = $scope.params.thinkquery ? true : false;

    $scope.userId = window.userId; // set in layouts/user
    $scope.userIsAdmin = window.userIsAdmin;
    $scope.userName = '';
    $scope.userProfile = null;
    $scope.profileEditStatus = '';
    $scope.password = '';
    $scope.passwordConfirm = '';

    $scope.getNewWindowName = function (action, mapId) {
        if (action == 'VIEW_MAP') {
            return 'VIEW_MAP_' + mapId;
        }
    };

    // show/hide tests UI and model debug form
    $scope.showTests = false;
    $scope.showModel = false;

    $scope.toggleShowTests = function () {
        $scope.showTests = !$scope.showTests;
    };
    $scope.toggleShowModel = function () {
        $scope.showModel = !$scope.showModel;
    };

    $scope.setUserId = function (id) {
        $scope.userId = id;
    };

    function init() {
        window.addEventListener('resize', fixRowHeights);
    }

    // make all cells in a row the same height
    function fixRowHeights() {
        // window.setTimeout(function() {
        //     $('.row-height').each(function() { 
        //         var highestBox = 0;
        //         $('> div', this).each(function(){
        //             if ($(this).height() > highestBox)
        //                 highestBox = $(this).height();
        //         }); 
        //         $('> div', this).height(highestBox);
        //     });       
        // }, 300);
    }

    $scope.loadUserProfile = function (callback) {
        if ($scope.userId) {
            var url = '/users/' + $scope.userId + '/profile.json';
            window.startSpinner();
            $http.get(url).then(function (response) {
                // success
                $scope.userProfile = response.data;
                initSelectedAdminTags();
                initSelectedFollowableOrgs();
                if ($scope.ccsTagging) {
                    $scope.ccsTagging.loadCcsTags();
                }
                window.stopSpinner();
                if (callback) {
                    callback.call();
                }
                fixRowHeights();
            }, function (reason) {
                // error
                window.stopSpinner();
                alert('Could not load user profile data');
            });
        }
    };

    $scope.loadUserProfile();

    // -------------- courses/subscriptions ------------------

    // open the Stripe Checkout dialog and get a token
    // NB: amount is stored in the Stripe plan definition
    $scope.addSubscription = function (plan) {
        var handler = StripeCheckout.configure({
            key: $scope.userProfile.account.stripeKey,
            name: "Subscribe to MetaMap",
            image: "/assets/badge-logo-64.png",
            description: plan.name,
            panelLabel: "Pay {{amount}}/" + plan.interval,
            amount: plan.price,
            allowRememberMe: false,
            email: $scope.userProfile.user.email,
            token: function token(_token, args) {
                //console.log('token: ', token);
                window.startSpinner();
                $http.post('/charges/subscribe', {
                    plan_id: plan.code,
                    token_id: _token.id
                }).then(function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.success('Subscription created');
                    });
                }, function () {
                    $scope.loadUserProfile(function () {
                        alertify.error('Subscription could not be created');
                    });
                });
            }
        });
        handler.open();
    };

    // for buy-course-button directive
    $scope.getBuyButtonLabel = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            return 'Free';
        } else if (course = getEnrolledCourse(id)) {
            return 'Enrolled';
        } else if (course = getEnrollableCourse(id)) {
            return 'Enroll - $' + (course.price / 100).toFixed(2);
        } else {
            return '';
        }
    };

    $scope.getCourseStatusSummary = function (id) {
        var course = $scope.getCourse(id);
        if (course) {
            var text = course.stepsCompleted + ' of ' + course.steps + ' steps completed';
            if (course.enrolment) {
                text = "Enrolled " + course.enrolment.date + (course.enrolment.stripeData.refunded ? " (Refunded)" : "") + ' - ' + text;
            }
            return course.code + ' - ' + text;
        } else {
            return null;
        }
    };

    $scope.getCourseCompletedPercent = function (id) {
        var course = $scope.getCourse(id);
        if (course) {
            return course.stepsCompletedPercent;
        } else {
            return null;
        }
    };

    $scope.maybeBuyCourse = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            window.location.href = '/courses/' + course.id;
        } else if (course = getEnrolledCourse(id)) {
            window.location.href = '/courses/' + course.id;
        } else if (course = getEnrollableCourse(id)) {
            $scope.buyCourse(course);
        }
    };

    $scope.getCourse = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            return course;
        } else if (course = getEnrolledCourse(id)) {
            return course;
        } else if (course = getEnrollableCourse(id)) {
            return course;
        }
        return null;
    };

    function getFreeCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.freeAccessibleCourses, function (course) {
            return course.id == id && course.enrolment == undefined;
        });
    }

    function getEnrolledCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.freeAccessibleCourses, function (course) {
            return course.id == id && course.enrolment !== undefined;
        });
    }

    function getEnrollableCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.nonFreeAccessibleCourses, function (course) {
            return course.id == id;
        });
    }

    // open the Stripe Checkout dialog and get a token
    // NB: amount is passed from our course definition
    $scope.buyCourse = function (course) {
        var handler = StripeCheckout.configure({
            key: $scope.userProfile.account.stripeKey,
            name: "Enroll in Course",
            image: "/assets/badge-logo-64.png",
            description: course.code,
            amount: course.price,
            allowRememberMe: false,
            email: $scope.userProfile.user.email,
            token: function token(_token2, args) {
                //console.log('token: ', token);
                window.startSpinner();
                $http.post('/charges/buy_course', {
                    course_code: course.code,
                    course_price: course.price,
                    token_id: _token2.id
                }).then(function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.success('Course purchased');
                    });

                    // reload page to handle stripe bug (?) - links not clickable
                    window.setTimeout(function () {
                        window.location.reload();
                    }, 1000);
                }, function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.error('Course purchase could not be completed');
                        //console.log('stripe error: ', response);
                    });
                });
            }
        });
        handler.open();
    };

    $scope.cancelSubscription = function (subscription) {
        window.startSpinner();
        $http['delete']('/charges/unsubscribe?subscription_id=' + subscription.id).then(function (response) {
            $scope.loadUserProfile(function () {
                alertify.success('Subscription cancelled');
            });
        }, function () {
            $scope.loadUserProfile(function () {
                alertify.error('Subscription could not be cancelled');
            });
        });
    };

    // debug/test only
    $scope.clearCustomer = function () {
        window.startSpinner();
        $http['delete']('/charges/clear_customer').then(function (response) {
            $scope.loadUserProfile(function () {
                alertify.success('Customer cleared');
            });
        }, function () {
            $scope.loadUserProfile(function () {
                alertify.error('Customer could not be cleared');
            });
        });
    };

    // -------------- points and badges ----------------

    $scope.hasCurrentBadge = function (key, level) {
        return $scope.userProfile && $scope.userProfile.badges.current[key] == level;
    };

    $scope.hasNewBadge = function (key, level) {
        return $scope.userProfile && $scope.userProfile.badges['new'][key] == level;
    };

    $scope.hasNewBadges = function () {
        return $scope.userProfile && _.keys($scope.userProfile.badges['new']).length > 0;
    };

    $scope.getBadgeDefinition = function (key) {
        return _.findWhere($scope.userProfile.badges.definitions, {
            key: key
        });
    };

    // -------------- tutorial -----------------

    try {
        $scope.tutorialEnabled = function () {
            return window.mapData !== undefined;
        };

        // start tutorial:
        var _tutorial = new SandbankEditor.Tutorial();

        $scope.startTutorial = function () {
            _tutorial.start();
        };
    } catch (e) {}

    // -------------- feedback form -----------------

    $scope.feedback = '';

    $scope.toggleFeedback = function () {
        $('#feedback-dropdown').slideToggle('fast').find('textarea').get(0).focus();
    };

    $scope.submitFeedback = function () {
        if ($scope.feedback === '') {
            return; // empty input...
        }

        $.ajax({
            type: 'POST',
            url: '/users/feedback',
            data: {
                url: window.location.href,
                feedback: $scope.feedback
            },
            success: function success() {
                $scope.feedback = '';
                alert('Thank you for your feedback!');
            },
            error: function error() {
                //console.error('error sending feedback: ', arguments);
            }
        });

        $('#feedback-dropdown').slideToggle('fast');
    };

    // --------- user's user tags -----------

    // NB: this is similar to maps tagging in tagging.js - but simpler, as we do not have to deal with
    // multiple taggable items, which means tracking existing vs. new tags, etc...

    $scope.newTag = {
        name: ''
    };

    // tag autocomplete
    $scope.getUserTags = function (viewValue) {
        var url = '/user_tags/list.json?q=' + viewValue;
        return $http.get(url).then(function (response) {
            return response.data.tags;
        });
    };

    $scope.updateUserUserTags = function () {
        var tagList = _.pluck($scope.userProfile.userTags, 'name').join(',');
        $http.put('/user_tags/update_user_user_tags', [tagList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'Tags saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save tags';
        });
    };

    $scope.deleteTag = function (tag) {
        var i = _.indexOf($scope.userProfile.userTags, tag);
        $scope.userProfile.userTags.splice(i, 1);
        $scope.updateUserUserTags();
    };

    $scope.tagSelected = function (item, model, label) {
        //console.log('tagSelected: ', item, model, label);
        $scope.addTag(item.name);
    };

    $scope.editingTagKeypress = function (e) {
        if (e.which == 13) {
            $scope.addTag($scope.newTag.name);
        }
    };

    $scope.addTag = function (tagName) {
        $scope.userProfile.userTags.push({
            name: tagName
        });
        $scope.newTag.name = '';
        $scope.updateUserUserTags();
    };

    // --------- user's/map's CCS tags -----------

    // this manages CCS tags for either the current user or the current map,
    // depending which page we're on - mapId gets overridden in editor.js if we're editing a map

    try {
        $scope.ccsTagging = new SandbankCcsTagging($scope, $http, $modal);
        $scope.ccsTagging.mapId = null;
    } catch (e) {}

    // --------- user's admin tags -----------

    // key (index): admin tag ID; value: true/false (if user follows the admin tag)
    $scope.selectedUserAdminTags = [];

    function initSelectedAdminTags() {
        $scope.selectedUserAdminTags = [];
        _.each($scope.userProfile.adminTags, function (tag) {
            if (_.findWhere($scope.userProfile.userAdminTags, {
                id: tag.id
            })) {
                $scope.selectedUserAdminTags[tag.id] = true;
            }
        });
    }

    $scope.updateUserAdminTags = function () {
        var selectedTagNames = _.map($scope.userProfile.adminTags, function (tag) {
            return $scope.selectedUserAdminTags[tag.id] ? tag.name : null;
        });
        var tagList = _.without(selectedTagNames, null).join(',');
        $http.put('/admin_tags/update_user_admin_tags', [tagList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'Interests saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save interests';
        });
    };

    // --------- user's followed orgs -----------

    // key (index): org ID; value: true/false (if user follows the org)
    $scope.selectedFollowableOrganizations = [];

    $scope.userIsFollowingOrg = function (id) {
        return $scope.selectedFollowableOrganizations[id];
    };

    $scope.toggleUserFollowingOrg = function (id) {
        if (!$scope.selectedFollowableOrganizations[id] || confirm('Stop following this ThinkNation?')) {
            $scope.selectedFollowableOrganizations[id] = !$scope.selectedFollowableOrganizations[id];
            $scope.updateFollowedOrganizations();
        }
    };

    function initSelectedFollowableOrgs() {
        $scope.selectedFollowableOrganizations = [];
        _.each($scope.userProfile.followedOrganizations, function (org) {
            if (_.findWhere($scope.userProfile.followableOrganizations, {
                id: org.id
            })) {
                $scope.selectedFollowableOrganizations[org.id] = true;
            }
        });
    }

    $scope.updateFollowedOrganizations = function () {
        var selectedOrgIds = _.map($scope.userProfile.followableOrganizations, function (org) {
            return $scope.selectedFollowableOrganizations[org.id] ? org.id : null;
        });
        var orgIdList = _.without(selectedOrgIds, null).join(',');
        $http.put('/organization_follows/update_user_organization_follows', [orgIdList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'ThinkNations saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save ThinkNations';
        });
    };

    // --------- user's org memberships -----------

    $scope.joinNation = new SandbankJoinNation($scope, $http, $modal);

    function getMembershipForOrg(id) {
        return _.findWhere($scope.userProfile.memberships, {
            organizationId: id
        });
    }

    $scope.userIsMemberOfOrg = function (id) {
        if ($scope.userProfile) {
            return getMembershipForOrg(id) != undefined;
        } else {
            return false;
        }
    };

    $scope.toggleUserMemberOfOrg = function (id, name) {
        if ($scope.userIsMemberOfOrg(id)) {
            if (confirm('Remove your membership in this ThinkNation?')) {
                var membership = getMembershipForOrg(id);
                $http['delete']('/memberships/' + membership.id + '.json').then(function (response) {
                    $scope.loadUserProfile();
                });
            }
        } else {
            $scope.joinNation.openModal(id, name);
        }
    };

    // ------------ following other users ---------------

    $scope.followUser = function (user) {
        $http.post('/user_follows.json', {
            followee_id: user.id
        }).then(function (response) {
            user.followId = response.data;
            alertify.success('You are now following ' + user.name);
        }, function () {});
    };

    $scope.unfollowUser = function (user) {
        $http['delete']('/user_follows/' + user.followId + '.json').then(function (response) {
            user.followId = null;
            alertify.success('You are no longer following ' + user.name);
        }, function () {});
    };

    // ------------ following tags ---------------

    function followTag(controller, tag) {
        $http.post('/' + controller + '/' + tag.id + '/follow.json', {
            id: tag.id
        }).then(function (response) {
            tag.following = true;
            alertify.success('You are now following ' + tag.name);
        }, function () {});
    }

    function unfollowTag(controller, tag) {
        $http['delete']('/' + controller + '/' + tag.id + '/unfollow.json').then(function (response) {
            tag.following = false;
            alertify.success('You are no longer following ' + tag.name);
        }, function () {});
    }

    $scope.followUserTag = function (tag) {
        followTag('user_tags', tag);
    };
    $scope.unfollowUserTag = function (tag) {
        unfollowTag('user_tags', tag);
    };

    $scope.followAdminTag = function (tag) {
        followTag('admin_tags', tag);
    };
    $scope.unfollowAdminTag = function (tag) {
        unfollowTag('admin_tags', tag);
    };

    $scope.followCcsTag = function (tag) {
        followTag('common_core_standards', tag);
    };
    $scope.unfollowCcsTag = function (tag) {
        unfollowTag('common_core_standards', tag);
    };

    // ------------ auto-save user profile ---------------

    // don't let autosave be triggered more than every N milliseconds...
    $scope.autosave = _.debounce(autosaveNow, 2000);

    function autosaveNow() {
        //console.log('autosaving user profile');
        var data = {
            email: $scope.userProfile.user.email,
            alt_email: $scope.userProfile.user.altEmail,
            first_name: $scope.userProfile.user.firstName,
            last_name: $scope.userProfile.user.lastName,
            about_me: $scope.userProfile.user.aboutMe
        };
        if ($scope.passwordsMatch() && $scope.password.length) {
            data.password = $scope.password;
            data.password_confirmation = $scope.password;
        }

        startSpinner();
        $scope.profileEditStatus = 'Saving...';
        $http.put('/users/' + $scope.userId, data).then(function (response) {
            stopSpinner();
            if (_.has(data, 'password')) {
                $scope.profileEditStatus = 'Profile and password saved';
                //console.log($scope.profileEditStatus);
            } else {
                    $scope.profileEditStatus = 'Profile saved';
                    //console.log($scope.profileEditStatus);
                }
        }, function () {
            stopSpinner();
            $scope.profileEditStatus = 'Could not save profile';
        });
    }

    $scope.passwordsMatch = function () {
        return !$scope.password.length && !$scope.passwordConfirm.length || $scope.password == $scope.passwordConfirm;
    };

    // ------------ upload avatar ---------------

    // using: https://github.com/danialfarid/angular-file-upload
    $scope.onAvatarFileSelect = function ($files) {
        startSpinner();
        //$files: an array of files selected, each file has name, size, and type.
        for (var i = 0; i < $files.length; i++) {
            var file = $files[i];
            $scope.upload = $upload.upload({
                url: 'users/' + userId,
                method: 'PUT',
                withCredentials: true,
                file: file, // or list of files: $files for html5 only
                fileFormDataName: 'user[avatar]'
            }).success(function (data, status, headers, config) {
                $scope.loadUserProfile();
                $scope.profileEditStatus = 'Photo updated';
                stopSpinner();
            }).error(function () {
                stopSpinner();
                $scope.profileEditStatus = 'Error: Could not upload photo';
            });
            //.then(success, error, progress);
        }
    };

    // --------------- view helpers -------------------

    // returns e.g. "a day ago"
    // (NB: now is obtained from the DB to ensure that we have both dates in UTC;
    //    also, SQL vs. ruby dates need to be coerced into a similar format, both in UTC - see feed.json.jbuilder)
    $scope.getEventTime = function (t, now) {
        var time = moment(t, 'YYYY-MM-DD HH:mm:ss.SSS');
        var nowtime = moment(now, 'YYYY-MM-DD HH:mm:ss.SSS');
        // //console.log('t:       ' + t);
        // //console.log('now:     ' + now);
        // //console.log('time:    ' + time.format()); // + ' ' + time.isValid());
        // //console.log('nowtime: ' + nowtime.format()); // + ' ' + nowtime.isValid());
        return time.from(nowtime);
    };

    // --------------- notifications -------------------

    $scope.getNotificationFeedUrl = function (notification) {
        if (notification.actions.length) {
            var action = notification.actions[0];
            if (action.action == 'LIKE') {
                return '/social?like_id=' + action.likeId;
            } else if (action.action == 'COMMENT') {
                return '/social?comment_id=' + action.commentId;
            } else if (action.action == 'SHARE_INDIVIDUAL') {
                return '/maps/' + action.mapId;
            } else if (action.action == 'SHARE_PUBLIC') {
                return '/social?share_id=' + action.shareId;
            }
        }
        return '';
    };

    $scope.deleteNotification = function (notification) {
        $http['delete']('/notifications/' + notification.id + '.json').then(function (response) {
            // success
            notification.deleted = true;
        }, function (reason) {
            // error
            alert('Could not delete notification');
        });
    };

    $scope.notificationVerb = function (action) {
        var verbs = {
            LIKE: 'liked this:',
            COMMENT: 'commented on this:',
            SHARE_INDIVIDUAL: 'shared a MetaMap with you',
            SHARE_PUBLIC: 'shared a MetaMap with everyone',
            MAP_FOLLOW: 'followed a MetaMap:',
            USER_FOLLOW: 'followed you'
        };
        return verbs[action];
    };

    // ------------ utility functions ---------------

    // handy function for use with ng-class on radio buttons
    $scope.classIf = function (klass, b) {
        //console.log('classIf: ' + klass + ', ' + b);
        return b ? klass : '';
    };

    // avoid '$apply already in progress' error (source: https://coderwall.com/p/ngisma)
    $scope.safeApply = function (fn) {
        //console.log('safeApply on scope: ' + $scope);
        var phase = this.$root.$$phase;
        if (phase == '$apply' || phase == '$digest') {
            if (fn && typeof fn === 'function') {
                fn();
            }
        } else {
            this.$apply(fn);
        }
    };

    // source: http://ctrlq.org/code/19616-detect-touch-screen-javascript
    $scope.isTouchDevice = function () {
        return 'ontouchstart' in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
    };

    init();
};

window.UserCtrl.$inject = ['$rootScope', '$scope', '$http', '$modal', '$upload'];

},{"moment":undefined}],46:[function(require,module,exports){
'use strict';

var ACTIONS = {
    MAP: 'map',
    NEW_MAP: 'new_map',
    COPY_MAP: 'copy_map',
    DELETE_MAP: 'delete_map',
    HOME: 'home',
    MY_MAPS: 'mymaps',
    TERMS_AND_CONDITIONS: 'terms',
    LOGOUT: 'logout',
    FEEDBACK: 'feedback'
};

Object.freeze(ACTIONS);

module.exports = ACTIONS;

},{}],47:[function(require,module,exports){
'use strict';

var CANVAS = {
    LEFT: 'left',
    RIGHT: 'right'
};

Object.freeze(CANVAS);

module.exports = CANVAS;

},{}],48:[function(require,module,exports){
'use strict';

var CONSTANTS = {
	ACTIONS: require('./actions'),
	CANVAS: require('./canvas'),
	DSRP: require('./dsrp'),
	EDIT_STATUS: require('./editStatus'),
	ELEMENTS: require('./elements'),
	EVENTS: require('./events'),
	PAGES: require('./pages'),
	ROUTES: require('./routes'),
	TABS: require('./tabs'),
	TAGS: require('./tags')
};

Object.freeze(CONSTANTS);

module.exports = CONSTANTS;

},{"./actions":46,"./canvas":47,"./dsrp":49,"./editStatus":50,"./elements":51,"./events":52,"./pages":53,"./routes":54,"./tabs":55,"./tags":56}],49:[function(require,module,exports){
'use strict';

var DSRP = {
	D: 'D',
	S: 'S',
	R: 'R',
	P: 'P'
};

Object.freeze(DSRP);

module.exports = DSRP;

},{}],50:[function(require,module,exports){
'use strict';

var status = {
    LAST_UPDATED: '',
    READ_ONLY: 'View only',
    SAVING: 'Saving...',
    SAVE_OK: 'All changes saved',
    SAVE_FAILED: 'Changes could not be saved'
};

Object.freeze(status);

module.exports = status;

},{}],51:[function(require,module,exports){
'use strict';

var ELEMENTS = {
    APP_CONTAINER: 'app-container',
    META_PROGRESS: 'meta_progress',
    META_PROGRESS_NEXT: 'meta_progress_next'
};

Object.freeze(ELEMENTS);

module.exports = ELEMENTS;

},{}],52:[function(require,module,exports){
'use strict';

var EVENTS = {
	SIDEBAR_OPEN: 'sidebar-open',
	SIDEBAR_CLOSE: 'sidebar-close',
	PAGE_NAME: 'pageName',
	NAV: 'nav',
	MAP: 'map'
};

Object.freeze(EVENTS);

module.exports = EVENTS;

},{}],53:[function(require,module,exports){
'use strict';

var ACTIONS = require('./actions.js');
var _ = require('lodash');

var PAGES = {
    MAP: 'map',
    NEW_MAP: 'new_map',
    COPY_MAP: 'copy_map',
    DELETE_MAP: 'delete_map',
    MY_MAPS: 'mymaps',
    TERMS_AND_CONDITIONS: 'terms',
    HOME: 'home'
};

_.extend();

Object.freeze(PAGES);

module.exports = PAGES;

},{"./actions.js":46,"lodash":undefined}],54:[function(require,module,exports){
'use strict';

var ROUTES = {
    MAPS_LIST: 'maps/list/',
    MAPS_DATA: 'maps/data/',
    MAPS_NEW_MAP: 'maps/new-map/',
    TERMS_AND_CONDITIONS: 'metamap/terms-and-conditions/',
    HOME: 'metamap/home/'
};

Object.freeze(ROUTES);

module.exports = ROUTES;

},{}],55:[function(require,module,exports){
'use strict';

var TABS = {
    TAB_ID_PRESENTER: 'presenter-tab',
    TAB_ID_ANALYTICS_MAP: 'analytics-tab-map',
    TAB_ID_ANALYTICS_THING: 'analytics-tab-thing',
    TAB_ID_PERSPECTIVES: 'perspectives-tab',
    TAB_ID_DISTINCTIONS: 'distinctions-tab',
    TAB_ID_ATTACHMENTS: 'attachments-tab',
    TAB_ID_GENERATOR: 'generator-tab',
    TAB_ID_STANDARDS: 'standards-tab'
};
Object.freeze(TABS);

module.exports = TABS;

},{}],56:[function(require,module,exports){
'use strict';

var TAGS = {
    META_CANVAS: 'meta-canvas',
    HOME: 'home',
    TERMS: 'terms',
    MY_MAPS: 'my-maps'
};

Object.freeze(TAGS);

module.exports = TAGS;

},{}],57:[function(require,module,exports){
"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var IntegrationsBase = require('./_IntegrationsBase');

var AddThis = (function (_IntegrationsBase) {
    _inherits(AddThis, _IntegrationsBase);

    function AddThis(config, user) {
        _classCallCheck(this, AddThis);

        _get(Object.getPrototypeOf(AddThis.prototype), "constructor", this).call(this, config, user);
        (function (d, s, id) {
            var js,
                fjs = d.getElementsByTagName(s)[0],
                t = window.addthis || {};
            if (d.getElementById(id)) return t;
            js = d.createElement(s);
            js.id = id;
            js.src = "//s7.addthis.com/js/300/addthis_widget.js#pubid=" + config.pubid;
            fjs.parentNode.insertBefore(js, fjs);

            t._e = [];
            t.ready = function (f) {
                t._e.push(f);
            };

            return t;
        })(document, "script", "add-this-js");
        this.addthis = window.addthis;
    }

    _createClass(AddThis, [{
        key: "init",
        value: function init() {
            _get(Object.getPrototypeOf(AddThis.prototype), "init", this).call(this);
        }
    }, {
        key: "integration",
        get: function get() {
            this.addthis = this.addthis || window.addthis;
            return this.addthis;
        }
    }]);

    return AddThis;
})(IntegrationsBase);

module.exports = AddThis;

},{"./_IntegrationsBase":65}],58:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var IntegrationsBase = require('./_IntegrationsBase');
var Google = require('./google');

var Facebook = (function (_IntegrationsBase) {
    _inherits(Facebook, _IntegrationsBase);

    function Facebook(config, user) {
        _classCallCheck(this, Facebook);

        _get(Object.getPrototypeOf(Facebook.prototype), 'constructor', this).call(this, config, user);
        (function (d, s, id) {
            var js,
                fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        })(document, 'script', 'facebook-jssdk');
        this.FB = window.FB;
    }

    _createClass(Facebook, [{
        key: 'init',
        value: function init() {
            _get(Object.getPrototypeOf(Facebook.prototype), 'init', this).call(this);
            this.integration.init({
                appId: this.config.appid,
                xfbml: this.config.xfbml,
                version: this.config.version
            });

            this.integration.Event.subscribe('edge.create', function (targetUrl) {
                Google.sendSocial('facebook', targetUrl);
            });

            this.integration.Event.subscribe('edge.remove', function (targetUrl) {
                Google.sendSocial('facebook', targetUrl);
            });

            this.integration.Event.subscribe('message.send', function (targetUrl) {
                Google.sendSocial('facebook', targetUrl);
            });
        }
    }, {
        key: 'integration',
        get: function get() {
            this.FB = this.FB || window.FB;
            return this.FB;
        }
    }]);

    return Facebook;
})(IntegrationsBase);

module.exports = Facebook;

},{"./_IntegrationsBase":65,"./google":66}],59:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var IntegrationsBase = require('./_IntegrationsBase');

var Google = (function (_IntegrationsBase) {
  _inherits(Google, _IntegrationsBase);

  function Google(config, user) {
    _classCallCheck(this, Google);

    _get(Object.getPrototypeOf(Google.prototype), 'constructor', this).call(this, config, user);
    // Google Plus API
    (function () {
      var po = document.createElement('script');po.type = 'text/javascript';po.async = true;
      po.src = 'https://apis.google.com/js/platform.js';
      var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(po, s);
    })();

    //Google Tag Manager API
    (function (w, d, s, l, i) {
      w[l] = w[l] || [];w[l].push({
        'gtm.start': new Date().getTime(), event: 'gtm.js'
      });var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';j.async = true;j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', this.config.tagmanager);

    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments);
      }, i[r].l = 1 * new Date();a = s.createElement(o), m = s.getElementsByTagName(o)[0];a.async = 1;a.src = g;
      m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  }

  _createClass(Google, [{
    key: 'init',
    value: function init() {
      _get(Object.getPrototypeOf(Google.prototype), 'init', this).call(this);
      var mode = 'auto';
      var domain = window.location.host;
      if (domain.startsWith('localhost')) {
        mode = 'none';
      }
      this.integration('create', this.config.analytics, mode);
      this.integration('send', 'pageview');
    }
  }, {
    key: 'setUser',
    value: function setUser() {
      _get(Object.getPrototypeOf(Google.prototype), 'setUser', this).call(this);
      this.integration('set', 'userId', this.user.userId);
    }
  }, {
    key: 'sendEvent',
    value: function sendEvent(val, event, source, type) {
      _get(Object.getPrototypeOf(Google.prototype), 'sendEvent', this).call(this, val, event, source, type);
      if (this.integration) {
        if (source && type) {
          this.integration('send', event, source, type, val);
        } else {
          this.integration('send', event, val);
        }
      }
    }
  }, {
    key: 'updatePath',
    value: function updatePath(path) {
      _get(Object.getPrototypeOf(Google.prototype), 'updatePath', this).call(this, path);
      if (this.integration) {
        this.integration('set', {
          page: path
        });
        this.integration('send', 'pageview');
      }
    }
  }, {
    key: 'integration',
    get: function get() {
      this.ga = this.ga || window.ga;
      return this.ga;
    }
  }], [{
    key: 'sendSocial',
    value: function sendSocial(network, targetUrl) {
      var type = arguments.length <= 2 || arguments[2] === undefined ? 'send' : arguments[2];

      if (window.ga) {
        window.ga('send', 'social', network, type, targetUrl);
      }
    }
  }, {
    key: 'sendEvent',
    value: function sendEvent(event, source, type, url) {
      if (window.ga) {
        window.ga('send', event, source, type, url);
      }
    }
  }]);

  return Google;
})(IntegrationsBase);

module.exports = Google;

},{"./_IntegrationsBase":65}],60:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var IntegrationsBase = require('./_IntegrationsBase');

var Intercom = (function (_IntegrationsBase) {
    _inherits(Intercom, _IntegrationsBase);

    function Intercom(config, user) {
        _classCallCheck(this, Intercom);

        _get(Object.getPrototypeOf(Intercom.prototype), 'constructor', this).call(this, config, user);

        var i = function i() {
            i.c(arguments);
        };
        i.q = [];
        i.c = function (args) {
            i.q.push(args);
        };
        window.Intercom = i;
        try {
            var s = document.createElement('script');
            s.type = 'text/javascript';
            s.async = true;
            s.src = 'https://widget.intercom.io/widget/' + config.appid + '}';
            var x = document.getElementsByTagName('script')[0];
            x.parentNode.insertBefore(s, x);
        } catch (e) {}
        this.intercom = window.Intercom;
    }

    _createClass(Intercom, [{
        key: 'init',
        value: function init() {
            _get(Object.getPrototypeOf(Intercom.prototype), 'init', this).call(this);
        }
    }, {
        key: 'setUser',
        value: function setUser() {
            _get(Object.getPrototypeOf(Intercom.prototype), 'setUser', this).call(this);
            this.integration('boot', {
                app_id: this.config.appid,
                name: this.user.fullName,
                email: this.user.email,
                created_at: this.user.createdOn.ticks,
                user_id: this.user.userId
            });
            this.sendEvent('update');
        }
    }, {
        key: 'sendEvent',
        value: function sendEvent() {
            var event = arguments.length <= 0 || arguments[0] === undefined ? 'update' : arguments[0];

            _get(Object.getPrototypeOf(Intercom.prototype), 'sendEvent', this).call(this, event);
            this.integration('update');
        }
    }, {
        key: 'updatePath',
        value: function updatePath(path) {
            this.integration('update');
        }
    }, {
        key: 'logout',
        value: function logout() {
            _get(Object.getPrototypeOf(Intercom.prototype), 'logout', this).call(this);
            this.integration('shutdown');
        }
    }, {
        key: 'integration',
        get: function get() {
            this.intercom = this.intercom || window.Intercom;
            return this.intercom;
        }
    }]);

    return Intercom;
})(IntegrationsBase);

module.exports = Intercom;

},{"./_IntegrationsBase":65}],61:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var IntegrationsBase = require('./_IntegrationsBase');

var NewRelic = (function (_IntegrationsBase) {
    _inherits(NewRelic, _IntegrationsBase);

    function NewRelic(config, user) {
        _classCallCheck(this, NewRelic);

        _get(Object.getPrototypeOf(NewRelic.prototype), 'constructor', this).call(this, config, user);

        this.NewRelic = window.NREUM;
    }

    _createClass(NewRelic, [{
        key: 'init',
        value: function init() {
            _get(Object.getPrototypeOf(NewRelic.prototype), 'init', this).call(this);
        }
    }, {
        key: 'setUser',
        value: function setUser() {
            _get(Object.getPrototypeOf(NewRelic.prototype), 'setUser', this).call(this);
            this.integration.setCustomAttribute('username', this.user.email);
            this.integration.setCustomAttribute('acccountID', this.user.userId);
        }
    }, {
        key: 'sendEvent',
        value: function sendEvent(val, event, source, type) {
            _get(Object.getPrototypeOf(NewRelic.prototype), 'sendEvent', this).call(this, val, event, source, type);
            if (this.integration) {
                this.integration.addToTrace(val);
            }
        }
    }, {
        key: 'updatePath',
        value: function updatePath(path) {
            _get(Object.getPrototypeOf(NewRelic.prototype), 'updatePath', this).call(this, path);
            if (this.integration) {
                this.setPageViewName(path, window.location.hostname);
            }
        }
    }, {
        key: 'integration',
        get: function get() {
            this.NewRelic = this.NewRelic || window.NREUM;
            return this.NewRelic;
        }
    }]);

    return NewRelic;
})(IntegrationsBase);

module.exports = NewRelic;

},{"./_IntegrationsBase":65}],62:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var IntegrationsBase = require('./_IntegrationsBase');
var Google = require('./google');

var Twitter = (function (_IntegrationsBase) {
    _inherits(Twitter, _IntegrationsBase);

    function Twitter(config, user) {
        _classCallCheck(this, Twitter);

        _get(Object.getPrototypeOf(Twitter.prototype), 'constructor', this).call(this, config, user);
        (function (d, s, id) {
            var js = undefined,
                fjs = d.getElementsByTagName(s)[0],
                t = window.twttr || {};
            if (d.getElementById(id)) return t;
            js = d.createElement(s);
            js.id = id;
            js.src = "https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);

            t._e = [];
            t.ready = function (f) {
                t._e.push(f);
            };

            return t;
        })(document, "script", "twitter-wjs");
    }

    _createClass(Twitter, [{
        key: 'init',
        value: function init() {
            var _this = this;

            _get(Object.getPrototypeOf(Twitter.prototype), 'init', this).call(this);
            this.integration.ready(function (twitter) {
                twitter.widgets.load();
                twitter.events.bind('click', _this._clickEventToAnalytics);
                twitter.events.bind('tweet', _this._tweetIntentToAnalytics);
                twitter.events.bind('retweet', _this._retweetIntentToAnalytics);
                twitter.events.bind('favorite', _this._favIntentToAnalytics);
                twitter.events.bind('follow', _this._followIntentToAnalytics);
            });

            var tryCount = 0;
            var load = function load() {
                if (window.twttr && window.twttr.widgets) {
                    return window.twttr.widgets.load();
                } else if (tryCount < 5) {
                    tryCount += 1;
                    _.delay(load, 250);
                }
            };
        }
    }, {
        key: '_followIntentToAnalytics',
        value: function _followIntentToAnalytics(intentEvent) {
            if (!intentEvent) return;
            var label = intentEvent.data.user_id + " (" + intentEvent.data.screen_name + ")";
            Google.sendSocial('twitter', label, intentEvent.type);
        }
    }, {
        key: '_retweetIntentToAnalytics',
        value: function _retweetIntentToAnalytics(intentEvent) {
            if (!intentEvent) return;
            var label = intentEvent.data.source_tweet_id;
            Google.sendSocial('twitter', label, intentEvent.type);
        }
    }, {
        key: '_favIntentToAnalytics',
        value: function _favIntentToAnalytics(intentEvent) {
            this._tweetIntentToAnalytics(intentEvent);
        }
    }, {
        key: '_tweetIntentToAnalytics',
        value: function _tweetIntentToAnalytics(intentEvent) {
            if (!intentEvent) return;
            var label = "tweet";
            Google.sendSocial('twitter', label, intentEvent.type);
        }
    }, {
        key: '_clickEventToAnalytics',
        value: function _clickEventToAnalytics(intentEvent) {
            if (!intentEvent) return;
            var label = intentEvent.region;
            Google.sendSocial('twitter', label, intentEvent.type);
        }
    }, {
        key: 'integration',
        get: function get() {
            this.twttr = this.twttr || window.twttr;
            return this.twttr;
        }
    }]);

    return Twitter;
})(IntegrationsBase);

module.exports = Twitter;

},{"./_IntegrationsBase":65,"./google":66}],63:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var IntegrationsBase = require('./_IntegrationsBase');
var Google = require('./google');

var UserSnap = (function (_IntegrationsBase) {
    _inherits(UserSnap, _IntegrationsBase);

    function UserSnap(config, user) {
        _classCallCheck(this, UserSnap);

        _get(Object.getPrototypeOf(UserSnap.prototype), 'constructor', this).call(this, config, user);
        var apiKey = undefined,
            s = undefined,
            x = undefined;
        if (config == null) {
            config = {};
        }
        apiKey = config.api;
        if (apiKey) {
            var usConf = {
                emailBox: true,
                emailBoxValue: user.email,
                emailRequired: true,
                consoleRecorder: true,
                mode: 'report',
                shortcut: true,
                beforeOpen: function beforeOpen(obj) {
                    Google.sendEvent('feedback', 'usersnap', 'widget', window.location.href);
                }
            };
            window.usersnapconfig = window._usersnapconfig = usConf;

            s = document.createElement('script');
            s.type = 'text/javascript';
            s.async = true;
            s.src = '//api.usersnap.com/load/' + apiKey + '.js';
            x = document.getElementsByTagName('head')[0];
            x.appendChild(s);
        }
        this.userSnap = window.UserSnap;
    }

    _createClass(UserSnap, [{
        key: 'init',
        value: function init() {
            _get(Object.getPrototypeOf(UserSnap.prototype), 'init', this).call(this);
        }
    }, {
        key: 'setUser',
        value: function setUser() {
            _get(Object.getPrototypeOf(UserSnap.prototype), 'setUser', this).call(this);
        }
    }, {
        key: 'integration',
        get: function get() {
            this.userSnap = this.userSnap || window.UserSnap;
            return this.userSnap;
        }
    }]);

    return UserSnap;
})(IntegrationsBase);

module.exports = UserSnap;

},{"./_IntegrationsBase":65,"./google":66}],64:[function(require,module,exports){
"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var IntegrationsBase = require('./_IntegrationsBase');

var ZenDesk = (function (_IntegrationsBase) {
    _inherits(ZenDesk, _IntegrationsBase);

    function ZenDesk(config, user) {
        _classCallCheck(this, ZenDesk);

        _get(Object.getPrototypeOf(ZenDesk.prototype), "constructor", this).call(this, config, user);
        var zO = {};
        window.zEmbed || (function (e, t) {
            var n = undefined,
                o = undefined,
                d = undefined,
                i = undefined,
                s = undefined,
                a = [],
                r = document.createElement("iframe");window.zEmbed = function () {
                a.push(arguments);
            }, window.zE = window.zE || window.zEmbed, r.src = "javascript:false", r.title = "", r.role = "presentation", (r.frameElement || r).style.cssText = "display: none", d = document.getElementsByTagName("script"), d = d[d.length - 1], d.parentNode.insertBefore(r, d), i = r.contentWindow, s = i.document;
            try {
                o = s;
            } catch (c) {
                n = document.domain, r.src = 'javascript:let d=document.open();d.domain="' + n + '";void(0);', o = s;
            }o.open()._l = function () {
                var o = this.createElement("script");n && (this.domain = n), o.id = "js-iframe-async", o.src = e, this.t = +new Date(), this.zendeskHost = t, this.zEQueue = a, this.body.appendChild(o);
                zO.logic = window.zE;
            }, o.write('<body onload="document._l();">'), o.close();
        })("https://assets.zendesk.com/embeddable_framework/main.js", config.site);

        zO.widget = window.zEmbed;
        zO.logic = window.zE;
    }

    _createClass(ZenDesk, [{
        key: "init",
        value: function init() {
            _get(Object.getPrototypeOf(ZenDesk.prototype), "init", this).call(this);
        }
    }, {
        key: "setUser",
        value: function setUser() {
            var _this = this;

            _get(Object.getPrototypeOf(ZenDesk.prototype), "setUser", this).call(this);
            this.integration(function () {
                _this.integration.identify({ name: _this.user.fullName, email: _this.user.email });
            });
        }
    }, {
        key: "integration",
        get: function get() {
            return window.zE;
        }
    }]);

    return ZenDesk;
})(IntegrationsBase);

var zenDesk = function zenDesk(config) {

    return zO;
};

module.exports = ZenDesk;

},{"./_IntegrationsBase":65}],65:[function(require,module,exports){
"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var IntegrationsBase = (function () {
	function IntegrationsBase(config, user) {
		_classCallCheck(this, IntegrationsBase);

		this.config = config;
		this.user = user;
	}

	_createClass(IntegrationsBase, [{
		key: "init",
		value: function init() {}
	}, {
		key: "setUser",
		value: function setUser() {}
	}, {
		key: "sendEvent",
		value: function sendEvent() {}
	}, {
		key: "updatePath",
		value: function updatePath() {}
	}, {
		key: "logout",
		value: function logout() {}
	}, {
		key: "integration",
		get: function get() {
			return {};
		}
	}]);

	return IntegrationsBase;
})();

module.exports = IntegrationsBase;

},{}],66:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var IntegrationsBase = require('./_IntegrationsBase');

var Google = (function (_IntegrationsBase) {
  _inherits(Google, _IntegrationsBase);

  function Google(config, user) {
    _classCallCheck(this, Google);

    _get(Object.getPrototypeOf(Google.prototype), 'constructor', this).call(this, config, user);
    // Google Plus API
    (function () {
      var po = document.createElement('script');po.type = 'text/javascript';po.async = true;
      po.src = 'https://apis.google.com/js/platform.js';
      var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(po, s);
    })();

    //Google Tag Manager API
    (function (w, d, s, l, i) {
      w[l] = w[l] || [];w[l].push({
        'gtm.start': new Date().getTime(), event: 'gtm.js'
      });var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';j.async = true;j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', this.config.tagmanager);

    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments);
      }, i[r].l = 1 * new Date();a = s.createElement(o), m = s.getElementsByTagName(o)[0];a.async = 1;a.src = g;
      m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  }

  _createClass(Google, [{
    key: 'init',
    value: function init() {
      _get(Object.getPrototypeOf(Google.prototype), 'init', this).call(this);
      var mode = 'auto';
      var domain = window.location.host;
      if (domain.startsWith('localhost')) {
        mode = 'none';
      }
      this.integration('create', this.config.analytics, mode);
      this.integration('send', 'pageview');
    }
  }, {
    key: 'setUser',
    value: function setUser() {
      _get(Object.getPrototypeOf(Google.prototype), 'setUser', this).call(this);
      this.integration('set', 'userId', this.user.userId);
    }
  }, {
    key: 'sendEvent',
    value: function sendEvent(val, event, source, type) {
      _get(Object.getPrototypeOf(Google.prototype), 'sendEvent', this).call(this, val, event, source, type);
      if (this.integration) {
        if (source && type) {
          this.integration('send', event, source, type, val);
        } else {
          this.integration('send', event, val);
        }
      }
    }
  }, {
    key: 'updatePath',
    value: function updatePath(path) {
      _get(Object.getPrototypeOf(Google.prototype), 'updatePath', this).call(this, path);
      if (this.integration) {
        this.integration('set', {
          page: path
        });
        this.integration('send', 'pageview');
      }
    }
  }, {
    key: 'integration',
    get: function get() {
      this.ga = this.ga || window.ga;
      return this.ga;
    }
  }], [{
    key: 'sendSocial',
    value: function sendSocial(network, targetUrl) {
      var type = arguments.length <= 2 || arguments[2] === undefined ? 'send' : arguments[2];

      if (window.ga) {
        window.ga('send', 'social', network, type, targetUrl);
      }
    }
  }, {
    key: 'sendEvent',
    value: function sendEvent(event, source, type, url) {
      if (window.ga) {
        window.ga('send', event, source, type, url);
      }
    }
  }]);

  return Google;
})(IntegrationsBase);

module.exports = Google;

},{"./_IntegrationsBase":65}],67:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var riot = window.riot;
var NProgress = window.NProgress;
var pageBody = require('../tags/page-body.js');
var CONSTANTS = require('../constants/constants');
var Actions = require('../actions/Action.js');

var PageFactory = (function () {
    function PageFactory(eventer, metaFire) {
        _classCallCheck(this, PageFactory);

        this.metaFire = metaFire;
        this.eventer = eventer;
        this.actions = new Actions(metaFire, eventer, this);
        this.onReady();
    }

    _createClass(PageFactory, [{
        key: 'onReady',
        value: function onReady() {
            if (!this._onReady) {
                this._onReady = new Promise(function (fulfill, reject) {
                    $('#' + CONSTANTS.ELEMENTS.META_PROGRESS).remove();
                    riot.mount('*');
                    NProgress.configure({ parent: '#' + CONSTANTS.ELEMENTS.META_PROGRESS_NEXT });

                    _.delay(function () {
                        Metronic.init(); // init metronic core componets
                        Layout.init(); // init layout
                        Demo.init(); // init demo features
                        Index.init(); // init index page
                        Tasks.initDashboardWidget(); // init tash dashboard widget
                        fulfill();
                    }, 250);
                });
            }
            return this._onReady;
        }
    }, {
        key: 'navigate',
        value: function navigate(path, id, action) {
            var _actions;

            for (var _len = arguments.length, params = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {
                params[_key - 3] = arguments[_key];
            }

            var act = (_actions = this.actions).act.apply(_actions, [path, id, action].concat(params));
            if (!act) {
                var _eventer;

                (_eventer = this.eventer)['do'].apply(_eventer, [path, path, { id: id, action: action }].concat(params));
            }
        }
    }]);

    return PageFactory;
})();

module.exports = PageFactory;

},{"../actions/Action.js":2,"../constants/constants":48,"../tags/page-body.js":74}],68:[function(require,module,exports){
'use strict';

var riot = require('riot');
var NProgress = window.NProgress;
var editor = require('../../canvas/editor');
var html = '\n<div class="portlet light">\n    <div class="portlet-body" id="diagram"></div>\n</div>\n<div id="overview-diagram" style="display: none;"></div>\n';

module.exports = riot.tag('meta-canvas', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../../MetaMap.js');

    this.mapId = null;
    this.canvas = null;

    this.buildCanvas = function (map) {
        if (!_this.canvas) {
            $(_this.diagram).empty();
            $(_this['overview-diagram']).empty();

            var x = {
                mapId: _this.mapId,
                ccsTagging: {},
                safeApply: function safeApply(fn) {
                    if (fn) {
                        for (var _len = arguments.length, params = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                            params[_key - 1] = arguments[_key];
                        }

                        fn.apply(undefined, params);
                    }
                },
                $watch: function $watch() {},
                get: function get() {
                    return { then: function then() {} };
                },
                isTouchDevice: function isTouchDevice() {
                    return false;
                }
            };

            _this.update();

            x.mapData = map;
            map.metadata = {
                sandbox: null,
                canEdit: true
            };
            map.state_data = {
                "showNavigator": false,
                "currentTab": null,
                "perspectivePointKey": null,
                "distinctionThingKey": null
            };
            map.editor_options = {
                "defaultRelationshipDirection": "noArrows",
                "defaultThingLayout": "left",
                "perspectiveMode": "lines"
            };

            _this.canvas = MapEditorCtrl(x, x, x, x, x);
        } else {
            if (map.changed_by != MetaMap.User.userKey) {
                _this.canvas.map.load(map.data);
            }
        }
        NProgress.done();
    };

    this.build = function (opts) {
        if (opts.id != _this.mapId) {
            _this.canvas = null;
            if (_this.mapId) {
                MetaMap.MetaFire.off('maps/data/' + _this.mapId);
            }
            _this.mapId = opts.id;
            NProgress.start();

            MetaMap.MetaFire.on('maps/data/' + opts.id, _this.buildCanvas);
            MetaMap.Eventer.forget('map', _this.build);
        }
    };

    MetaMap.Eventer.every('map', this.build);

    this.correctHeight = function () {
        $(_this.diagram).css({
            height: window.innerHeight - 154 + 'px'
        });
    };

    this.on('update', function () {
        _this.correctHeight();
    });

    $(window).resize(function () {
        _this.correctHeight();
    });
});

},{"../../../MetaMap.js":1,"../../canvas/editor":30,"riot":"riot"}],69:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n            <i class="fa fa-graduation-cap"></i>\n        </a>\n        <ul class="dropdown-menu">\n            <li>\n                <ul class="dropdown-menu-list scroller" style="height: 270px;" data-handle-color="#637283">\n                    <li if="{ help }"\n                        each="{ help }"\n                        onclick="{ parent.onClick }">\n                        <a href="{ link }">\n                            <i class="{ icon }"></i>\n                            <span class="title">{ title }</span>\n                        </a>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n';

riot.tag('meta-help', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../../MetaMap');

    this.onClick = function (event, params) {
        console.log(event, params);
        return true;
    };

    this.help = null;
    this.on('mount', function () {
        MetaMap.MetaFire.on('metamap/help', function (data) {
            _this.help = _.filter(_.sortBy(data, 'order'), function (d) {
                var include = d.archive != true;
                return include;
            });
            _this.update();
        });
    });
});

},{"../../../MetaMap":1,"riot":"riot"}],70:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n                    <i class="fa fa-bell-o"></i>\n                    <span class="badge badge-success">\n                        { notifications.length }\n                    </span>\n                </a>\n                <ul class="dropdown-menu">\n                    <li class="external">\n                        <h3>\n                            <span class ="bold">{ notifications.length } pending</span> notification{ s: notifications.length == 0 || notifications.length > 1 }\n                        </h3>\n                        <a href="javascript:;">view all</a>\n                    </li>\n                    <li>\n                        <ul class="dropdown-menu-list scroller" style="height: 250px;" data-handle-color="#637283">\n                            <li if="{ notifications }"\n                                each="{ notifications }"\n                                onclick="{ parent.onClick }">\n                                <a href="javascript:;">\n                                    <span class="time">{ time }</span>\n                                    <span class="details">\n                                        <span class="label label-sm label-icon label-success">\n                                            <i class="fa fa-plus"></i>\n                                        </span>\n                                        { event }\n                                    </span>\n                                </a>\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n';

riot.tag('meta-notifications', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../../MetaMap.js');

    this.notifications = [];

    this.onClick = function (event, params) {
        console.log(event, params);
        return true;
    };

    this.on('mount', function () {
        MetaMap.MetaFire.on('metamap/notifications', function (data) {
            _this.notifications = _.filter(_.sortBy(data, 'order'), function (d) {
                var include = d.archive != true;
                return include;
            });
            _this.update();
        });
    });
});

},{"../../../MetaMap.js":1,"riot":"riot"}],71:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n                    <i class="fa fa-trophy"></i>\n                    <span class="badge badge-success">\n                        { points.length }\n                    </span>\n                </a>\n                <ul class="dropdown-menu">\n                    <li class="external">\n                        <h3>\n                            <span class ="bold">{ points.length } new </span> achievement{ s: points.length == 0 || points.length > 1 }\n                        </h3>\n                        <a href="javascript:;">view all</a>\n                    </li>\n                    <li>\n                        <ul class="dropdown-menu-list scroller" style="height: 250px;" data-handle-color="#637283">\n                            <li if="{ points }"\n                                each="{ points }"\n                                onclick="{ parent.onClick }">\n                                <a href="javascript:;">\n                                    <span class="time">{ time }</span>\n                                    <span class="details">\n                                        <span class="label label-sm label-icon label-success">\n                                            <i class="fa fa-plus"></i>\n                                        </span>\n                                        { event }\n                                    </span>\n                                </a>\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n';

riot.tag('meta-points', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../../MetaMap.js');
    this.points = [];

    this.onClick = function (event, params) {
        console.log(event, params);
        return true;
    };

    this.on('mount', function () {
        MetaMap.MetaFire.on('users/' + MetaMap.User.userId + '/points', function (data) {
            _this.points = _.filter(_.sortBy(data, 'order'), function (d) {
                var include = d.archive != true;
                return include;
            });
            _this.update();
        });
    });
});

},{"../../../MetaMap.js":1,"riot":"riot"}],72:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n                    <span class="username username-hide-on-mobile">\n                        { username }\n                    </span>\n                    <img alt="" height="39" width="39" class="img-circle" src="{ picture }" />\n                </a>\n                <ul class="dropdown-menu dropdown-menu-default">\n                    <li if="{ menu }"\n                        each="{ menu }"\n                        onclick="{ parent.onClick }">\n                        <a href="{ link }">\n                            <i class="{ icon }"></i> { title }\n                        </a>\n                    </li>\n                </ul>\n';

riot.tag('meta-user', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../../MetaMap.js');

    this.menu = [];
    this.username = '';
    this.picture = '';

    this.logout = function () {
        MetaMap.logout();
    };

    this.linkAccount = function () {
        MetaMap.Auth0.linkAccount();
    };

    this.onClick = function (event, params) {
        switch (event.item.link) {
            case '#link-social-accounts':
                _this.linkAccount();
                return false;
                break;

            default:
                console.log(event, params);
                return true;
                break;
        }
    };

    this.on('mount', function () {
        MetaMap.MetaFire.on('metamap/user', function (data) {
            _this.username = MetaMap.User.displayName;
            _this.picture = MetaMap.User.picture;
            _this.menu = _.filter(_.sortBy(data, 'order'), function (d) {
                var include = d.archive != true;
                return include;
            });
            _this.update();
        });
    });
});

},{"../../../MetaMap.js":1,"riot":"riot"}],73:[function(require,module,exports){
'use strict';

var riot = require('riot');
var CONSTANTS = require('../constants/constants');
require('../tools/shims');

var html = '\n<div class="page-actions">\n    <div class="btn-group">\n        <button type="button" class="btn red-haze btn-sm dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">\n            <span class="hidden-sm hidden-xs">Actions&nbsp;</span>\n            <i class="fa fa-angle-down"></i>\n        </button>\n        <ul class="dropdown-menu" role="menu">\n            <li each="{ val, i in data }" class="{ start: i == 0, active: i == 0 }">\n                <a if="{ parent.getLinkAllowed(val) }" href="{ parent.getActionLink(val) }">\n                    <i class="{ val.icon }"></i> { val.title }\n                </a>\n            </li>\n            <li class="divider"></li>\n            <li>\n                <a href="#settings">\n                    <i class="fa fa-gear"></i> Settings\n                </a>\n            </li>\n        </ul>\n    </div>\n\n    <span style="padding-left: 5px;">\n        <span if="{ pageName }"\n                id="map_name"\n                data-type="text"\n                data-title="Enter map name">\n            { pageName }\n        </span>\n    </span>\n</div>\n';

module.exports = riot.tag('page-actions', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../MetaMap');

    this.data = [];
    this.pageName = 'Home';
    this.url = MetaMap.config.site.db + '.firebaseio.com';
    this.loaded = false;

    this.getActionLink = function (obj) {
        var ret = obj.link;
        if (obj.url_params) {
            (function () {
                var args = [];
                _.each(obj.url_params, function (prm) {
                    args.push(_this[prm.name]);
                });
                ret = obj.link.format.call(obj.link, args);
            })();
        }
        return ret;
    };

    this.getLinkAllowed = function (obj) {
        var ret = true == obj['allowed-on']['*'];
        if (!ret) {
            var currentPage = MetaMap.Router.currentPath;
            ret = true == obj['allowed-on'][currentPage];
        }
        return ret;
    };

    this.bindTopageName = _.once(function () {
        if (_this.mapId) {
            MetaMap.MetaFire.on(CONSTANTS.ROUTES.MAPS_LIST + '/' + _this.mapId + '/name', function (name) {
                _this.pageName = name || '';
                _this.update();
            });
        }
        _this.loaded = true;
    });

    MetaMap.Eventer.every('pageName', function (opts) {
        if (_this.loaded) {
            $(_this.map_name).editable('destroy');
        }
        if (_this.mapId) {
            MetaMap.MetaFire.off(CONSTANTS.ROUTES.MAPS_LIST + '/' + _this.mapId + '/name');
            if (opts.id) {
                MetaMap.MetaFire.on(CONSTANTS.ROUTES.MAPS_LIST + '/' + opts.id + '/name', function (name) {
                    _this.pageName = name;
                    _this.update();
                });
            }
        }
        _this.pageName = opts.name || 'Home';
        _this.mapId = opts.id;
        _this.update();
        if (_this.mapId) {
            $(_this.map_name).editable({ unsavedclass: null }).on('save', function (event, params) {
                MetaMap.MetaFire.setData(params.newValue, CONSTANTS.ROUTES.MAPS_LIST + '/' + _this.mapId + '/name');
            });
            _this.bindTopageName();
        }
    });

    MetaMap.MetaFire.on('metamap/actions', function (data) {
        _this.data = _.filter(_.sortBy(data, 'order'), function (d) {
            var include = d.archive != true;
            return include;
        });
        _this.update();
    });
});

},{"../../MetaMap":1,"../constants/constants":48,"../tools/shims":87,"riot":"riot"}],74:[function(require,module,exports){
'use strict';

var riot = require('riot');
var pageHeader = require('./page-header');
var pageContainer = require('./page-container');
var pageFooter = require('./page-footer');
var CONSTANTS = require('../constants/constants');

var html = '\n<div id="page_body" class="page-header-fixed page-sidebar-closed-hide-logo page-sidebar-closed-hide-logo">\n\n    <div id="meta_page_header"></div>\n\n    <div class="clearfix">\n    </div>\n\n    <div id="meta_page_container"></div>\n\n</div>\n\n<div id="meta_page_footer"></div>';

module.exports = riot.tag('page-body', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../MetaMap');

    this.on('mount', function () {
        riot.mount(_this.meta_page_header, 'page-header');
        riot.mount(_this.meta_page_container, 'page-container');
        //        riot.mount(this.meta_page_dialog, 'meta-dialog');
        riot.mount(_this.meta_page_footer, 'page-footer');
    });

    MetaMap.Eventer.on(CONSTANTS.EVENTS.SIDEBAR_CLOSE, function () {
        $(_this.page_body).addClass('page-sidebar-reversed');
    });

    MetaMap.Eventer.on(CONSTANTS.EVENTS.SIDEBAR_OPEN, function () {
        $(_this.page_body).removeClass('page-sidebar-reversed');
    });
});

},{"../../MetaMap":1,"../constants/constants":48,"./page-container":75,"./page-footer":77,"./page-header":78,"riot":"riot"}],75:[function(require,module,exports){
'use strict';

var riot = require('riot');
var pageSidebar = require('./page-sidebar.js');
var pageContent = require('./page-content.js');

var html = '\n<div class="page-container">\n    <div id="meta_page_sidebar"></div>\n    <div id="meta_page_content"></div>\n</div>\n';

module.exports = riot.tag('page-container', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../MetaMap');

    this.on('mount', function () {
        riot.mount(_this.meta_page_sidebar, 'page-sidebar');
        riot.mount(_this.meta_page_content, 'page-content');
    });
});

},{"../../MetaMap":1,"./page-content.js":76,"./page-sidebar.js":81,"riot":"riot"}],76:[function(require,module,exports){
'use strict';

var riot = require('riot');
var CONSTANTS = require('../constants/constants');
var _ = require('lodash');

var html = '\n<div class="page-content-wrapper">\n    <div id="page-content" class="page-content">\n\n        <div class="page-head">\n\n        </div>\n\n\n        <div id="app-container">\n\n        </div>\n    </div>\n</div>\n';

module.exports = riot.tag('page-content', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../MetaMap');

    MetaMap.Eventer.on(CONSTANTS.EVENTS.SIDEBAR_CLOSE, function () {
        var width = window.innerWidth;
        $(_this['app-container']).css({ width: width - 46 + 'px' });
    });

    $(window).on('resize', function () {
        $(_this['app-container']).css({ width: '100%' });
    });

    MetaMap.Eventer.on(CONSTANTS.EVENTS.SIDEBAR_OPEN, function () {
        $(_this['app-container']).css({ width: '100%' });
    });
});

},{"../../MetaMap":1,"../constants/constants":48,"lodash":undefined,"riot":"riot"}],77:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '\n<div class="page-footer" style="position: fixed; bottom: 0;">\n    <div class="page-footer-inner">\n        <a href="#terms">&copy;2015</a>\n    </div>\n</div>\n';

module.exports = riot.tag('page-footer', html, function (opts) {

    var MetaMap = require('../../MetaMap');
});

},{"../../MetaMap":1,"riot":"riot"}],78:[function(require,module,exports){
'use strict';

var riot = require('riot');
var pageLogo = require('./page-logo.js');
var pageActions = require('./page-actions.js');
var pageSearch = require('./page-search.js');
var pageTopMenu = require('./page-topmenu');

var html = '\n<div id="header-top" class="page-header navbar navbar-fixed-top">\n    <div id="meta_progress_next" style="overflow: inherit;"></div>\n    <div id="header-content" class="page-header-inner">\n\n        <div id="meta_page_logo"></div>\n        \n        <div id="meta_page_actions"></div>\n        \n        <div id="meta_page_top" class="page-top">\n            <div id="meta_page_search"></div>\n            \n            <div id="meta_page_topmenu"></div>\n        </div>\n\n    </div>\n\n</div>\n';

module.exports = riot.tag('page-header', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../MetaMap');

    this.on('mount', function () {
        riot.mount(_this.meta_page_logo, 'page-logo');
        riot.mount(_this.meta_page_actions, 'page-actions');
        riot.mount(_this.meta_page_top, 'page-search');
        riot.mount(_this.meta_page_top, 'page-topmenu');
    });
});

},{"../../MetaMap":1,"./page-actions.js":73,"./page-logo.js":79,"./page-search.js":80,"./page-topmenu":82,"riot":"riot"}],79:[function(require,module,exports){
'use strict';

var riot = require('riot');
var CONSTANTS = require('../constants/constants');

var html = '\n<div class ="page-logo">\n    <a id="meta_logo" href="#home">\n        <img src="metamap/assets/img/metamap_cloud.png" alt="logo" class ="logo-default" />\n    </a>\n    <div id="meta_menu_toggle" class ="menu-toggler sidebar-toggler" style="{ getDisplay(\'menu\') }">\n        <!--DOC: Remove the above "hide" to enable the sidebar toggler button on header-->\n    </div>\n</div>\n<a href="javascript:;" class ="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse">\n</a>\n';

module.exports = riot.tag('page-logo', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../MetaMap');
    this.display = true;

    this.getDisplay = function (el) {

        if (!_this.display) {
            return 'display: none;';
        } else {
            return '';
        }
    };

    MetaMap.Eventer.on(CONSTANTS.EVENTS.SIDEBAR_CLOSE, function () {
        _this.display = false;
        _this.update();
    });

    MetaMap.Eventer.on(CONSTANTS.EVENTS.SIDEBAR_OPEN, function () {
        _this.display = true;
        _this.update();
    });
});

},{"../../MetaMap":1,"../constants/constants":48,"riot":"riot"}],80:[function(require,module,exports){
'use strict';

var riot = require('riot');

var html = '\n<!-- DOC: Apply "search-form-expanded" right after the "search-form" class to have half expanded search box -->\n<form class="search-form" action="extra_search.html" method="GET">\n    <div class="input-group">\n        <input type="text" class="form-control input-sm" placeholder="Search..." name="query">\n            <span class="input-group-btn">\n                <a href="javascript:;" class="btn submit">\n                    <i class="fa fa-search"></i>\n                </a>\n            </span>\n        </div>\n</form>\n';

module.exports = riot.tag('page-search', html, function (opts) {

    var MetaMap = require('../../MetaMap');
});

},{"../../MetaMap":1,"riot":"riot"}],81:[function(require,module,exports){
'use strict';

var riot = require('riot');
var CONSTANTS = require('../constants/constants');

var html = '\n<div class="page-sidebar-wrapper" style="{ getDisplay() }">\n    <div class="page-sidebar navbar-collapse collapse">\n        <ul class="page-sidebar-menu " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200">\n\n            <li if="{ data }" onclick="{ parent.click }" each="{ data }">\n                <a if="{ icon }" href="javascript:;">\n                    <i class="{ icon }" style="color:#{ color };"></i>\n                    <span class="title">{ title }</span>\n                    <span class="{ arrow: menu.length }"></span>\n                </a>\n                <ul if="{ menu && menu.length }" class="sub-menu">\n                    <li each="{ menu }">\n                        <a href="javascript:;">\n                            <i class="{ icon }"></i>\n                            <span class="title">{ title }</span>\n                        </a>\n                    </li>\n                </ul>\n            </li>\n\n        </ul>\n\n    </div>\n</div>\n';

module.exports = riot.tag('page-sidebar', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../MetaMap');

    this.click = function () {
        console.log('foo');
    };
    this.display = true;
    this.data = [];

    MetaMap.MetaFire.on('metamap/sidebar', function (data) {
        _this.data = _.filter(_.sortBy(data, 'order'), function (d) {
            var include = d.archive != true;
            if (include && d.menu && d.menu) {
                d.menu = _.filter(_.sortBy(d.menu, 'order'), function (m) {
                    return m.archive != true;
                });
            }
            return include;
        });
        _this.update();
    });

    this.getDisplay = function () {
        if (!_this.display) {
            return 'display: none;';
        } else {
            return '';
        }
    };

    MetaMap.Eventer.on(CONSTANTS.EVENTS.SIDEBAR_CLOSE, function () {
        _this.display = false;
        _this.update();
    });

    MetaMap.Eventer.on(CONSTANTS.EVENTS.SIDEBAR_OPEN, function () {
        _this.display = true;
        _this.update();
    });
});

},{"../../MetaMap":1,"../constants/constants":48,"riot":"riot"}],82:[function(require,module,exports){
'use strict';

var riot = require('riot');
var metaPoints = require('./menu/meta-points.js');
var metaHelp = require('./menu/meta-help.js');
var metaUser = require('./menu/meta-user.js');
var metaNot = require('./menu/meta-notifications.js');

var html = '\n<div class="top-menu">\n    <ul class="nav navbar-nav pull-right">\n        <li class="separator hide"></li>\n        <li class="dropdown" id="header_dashboard_bar" onclick="{ onClick }">\n            <a class="dropdown-toggle" href="#home">\n                <i class="fa fa-home"></i>\n            </a>\n        </li>\n        \n        <li class="separator hide"></li>\n        <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_notification_bar"></li>\n\n        <li class="separator hide"></li>\n        <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_points_bar"></li>\n                   \n        <li class="separator hide"></li>\n        <li id="header_help_bar" class="dropdown dropdown-extended dropdown-notification dropdown"></li>\n            \n        <li class="separator hide"></li>\n        <li id="header_user_menu" class="dropdown dropdown-user dropdown"></li>\n    </ul>\n</div>\n';

module.exports = riot.tag('page-topmenu', html, function (opts) {
    var _this = this;

    this.onClick = function (event, params) {
        console.log(event, params);
        return true;
    };

    this.on('mount', function () {
        riot.mount(_this.header_points_bar, 'meta-points');
        riot.mount(_this.header_notification_bar, 'meta-notifications');
        riot.mount(_this.header_help_bar, 'meta-help');
        riot.mount(_this.header_user_menu, 'meta-user');
    });
});

},{"./menu/meta-help.js":69,"./menu/meta-notifications.js":70,"./menu/meta-points.js":71,"./menu/meta-user.js":72,"riot":"riot"}],83:[function(require,module,exports){
'use strict';

var riot = require('riot');
var NProgress = window.NProgress;
var CONSTANTS = require('../../constants/constants');

var html = '\n<div class="portlet light">\n\t\t\t\t<div class="portlet-body">\n\t\t\t\t\t<div class="row margin-bottom-30">\n\t\t\t\t\t\t<div if="{ header }" class="col-md-6">\n                            <h1>{ header.title }</h1>\n                            <p>{ header.text }</p>\n\t\t\t\t\t\t\t<ul class="list-unstyled margin-top-10 margin-bottom-10">\n\t\t\t\t\t\t\t\t<li each="{ areas }">\n\t\t\t\t\t\t\t\t\t<i class="{ icon }"></i> <b>{ title }</b> { text }\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<!-- Blockquotes -->\n\t\t\t\t\t\t\t<blockquote class="hero">\n\t\t\t\t\t\t\t\t<p>{ quote.text }</p>\n\t\t\t\t\t\t\t\t<small>{ quote.by }</small>\n\t\t\t\t\t\t\t</blockquote>\n                            <div class="addthis_horizontal_follow_toolbox"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class ="col-md-6">\n                          <iframe if="{ header.youtubeid }"\n                                id="ytplayer"\n                                type="text/html"\n                                src="https://www.youtube.com/embed/{ header.youtubeid }"\n                                frameborder="0" allowfullscreen\n                                class ="fitvids"\n                                style="height: 327px; width: 100%; display: block; margin-left: auto; margin-right: auto; broder: 0;"\n                            />\n\t\t\t\t\t\t\t</iframe>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                    <div class="headline">\n\t\t\t\t\t\t<h3>{ userName }{ vision.title }</h3>\n\t\t\t\t\t</div>\n                    <div>\n                        <p>{ vision.text }</p>\n                    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n';

module.exports = riot.tag('home', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../../MetaMap');

    this.areas = [];
    this.header = {};

    MetaMap.MetaFire.on(CONSTANTS.ROUTES.HOME, function (data) {
        _this.areas = _.filter(_.sortBy(data.areas, 'order'), function (d) {
            var include = d.archive != true;
            return include;
        });
        _this.quote = data.quote;
        _this.header = data.header;
        _this.vision = data.vision;

        _this.userName = MetaMap.User.fullName;

        _this.update();

        NProgress.done();
    });
});

},{"../../../MetaMap":1,"../../constants/constants":48,"riot":"riot"}],84:[function(require,module,exports){
'use strict';

var riot = require('riot');
var moment = require('moment');
var NProgress = window.NProgress;
var _ = require('lodash');
var CONSTANTS = require('../../constants/constants');

var html = '\n<div class="portlet box grey-cascade">\n    <div class="portlet-title">\n        <div class="caption">\n            <i class="fa fa-icon-th-large"></i>MetaMaps\n        </div>\n        <div if="{ menu }" class="actions">\n            <a each="{ menu.buttons }" href="{ link }" onclick="{ parent.onActionClick }" class="btn btn-default btn-sm">\n                <i class="{ icon }"></i> { title }\n            </a>\n            <div class="btn-group">\n                <a class="btn btn-default btn-sm" href="javascript:;" data-toggle="dropdown">\n                    <i class="fa fa-cogs"></i> Tools <i class="fa fa-angle-down"></i>\n                </a>\n                <ul class="dropdown-menu pull-right">\n                    <li each="{ menu.menu }" onclick="{ parent.onMenuClick }">\n                        <a href="{ link }">\n                            <i class="{ icon }"></i> { title }\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    <div class="portlet-body">\n        <ul class="nav nav-tabs portlet-tabs">\n            <li onclick="{ parent.onTabSwitch }" each="{ val, i in tabs }" class="{ active: i == 0 }">\n                <a href="#mymaps_1_{ i }" data-toggle="tab" aria-expanded="{ true: i == 0 }">\n                { val.title }</a>\n            </li>\n        </ul>\n        <div class="table-toolbar">\n\n        </div>\n        <div class="tab-content">\n            <div each="{ val, i in tabs }" class="tab-pane fase in { active: i == 0 }" id="mymaps_1_{ i }">\n                <table class="table table-striped table-bordered table-hover" id="mymaps_table_{ i }">\n                    <thead>\n                        <tr>\n                            <th style="display: none;">\n                                MapId\n                            </th>\n                            <th class="table-checkbox">\n                                <input if="{ parent.currentTab == \'My Maps\' }" type="checkbox" class="group-checkable" data-set="#mymaps_table_{ i } .checkboxes"/>\n                            </th>\n                            <th style="display: none;">\n                                UserId\n                            </th>\n                            <th>\n                                Name\n                            </th>\n                            <th>\n                                Created On\n                            </th>\n                            <th>\n                                Status\n                            </th>\n                            <th>\n                                Action\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr if="{ parent.data && parent.data[i] }" each="{ parent.data[i] }" class="odd gradeX">\n                            <td style="display: none;" ><span data-selector="id" class ="mapid">{ id }</span></td>\n                            <td>\n                                <input if="{ parent.currentTab == \'My Maps\' }" type="checkbox" class="checkboxes" value="1"/>\n                            </td>\n                            <td style="display: none;">{ user_id }</td>\n                            <td if="{ val.editable }" class="meta_editable_{ i }" data-pk="{ id }" data-title="Edit Map Name">{ name }</td>\n                            <td if="{ !val.editable }">{ name }</td>\n                            <td class="center">{ created_at }</td>\n                            <td>\n                                <span class="label label-sm label-success">\n                                    Private\n                                </span>\n                            </td>\n                            <td>\n                                <button class="btn btn-sm blue filter-submit" onclick="{ parent.onOpen }">\n                                    <i class="fa fa-icon-eye-open"></i> Open\n                                </button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n';

module.exports = riot.tag('my-maps', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../../MetaMap.js');

    this.data = null;
    this.menu = null;
    this.tabs = _.sortBy([{ title: 'My Maps', order: 0, editable: true }, { title: 'Shared with Me', order: 1, editable: false }], 'order');
    this.currentTab = 'My Maps';

    this.onOpen = function (event) {
        MetaMap.Router.to('map/' + event.item.id);
    };

    this.onTabSwitch = function (event) {
        _this.currentTab = event.item.val.title;
        switch (_this.currentTab) {
            case 'My Maps':

                break;
        }
    };

    this.onActionClick = function (event, tag) {
        return true;
    };

    this.onMenuClick = function (event, tag) {
        if (_this.currentTab == 'My Maps') {
            switch (event.item.title.toLowerCase()) {
                case 'delete':
                    var deleteMaps = require('../../actions/DeleteMap.js');
                    var selected = _this['table0'].find('.active').find('.mapid');
                    var ids = [];
                    _.each(selected, function (cell) {
                        ids.push(cell.innerHTML);
                    });
                    deleteMaps.deleteAll(ids, PAGES.MY_MAPS);
                    var find = _this['table0'].find('tbody tr .checkboxes');
                    find.each(function () {
                        $(this).attr('checked', false);
                        $(this).parents('tr').removeClass('active');
                    });
                    jQuery.uniform.update(find);
                    break;
            }
        }
    };

    this.on('mount', function () {
        NProgress.start();
        MetaMap.MetaFire.on('metamap/mymaps', function (data) {
            if (data) {
                _this.menu = {
                    buttons: _.sortBy(data.buttons, 'order'),
                    menu: _.sortBy(data.menu, 'order')
                };
                _this.update();
            }
        });

        var buildTable = function buildTable(idx, list, editable) {
            try {
                _this.data = _this.data || {};
                _this.data[idx] = list;
                if (_this['table' + idx]) {
                    $('.meta_editable_' + idx).editable('destroy');
                    _this['dataTable' + idx].destroy();
                }

                _this.update();

                _this['table' + idx] = $(_this['mymaps_table_' + idx]);
                _this['dataTable' + idx] = _this['table' + idx].DataTable({

                    // Uncomment below line('dom' parameter) to fix the dropdown overflow issue in the datatable cells. The default datatable layout
                    // setup uses scrollable div(table-scrollable) with overflow:auto to enable vertical scroll(see: assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js).
                    // So when dropdowns used the scrollable div should be removed.
                    //'dom': '<'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r>t<'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>',

                    //'bStateSave': true, // save datatable state(pagination, sort, etc) in cookie.
                    'columns': [{
                        orderable: false
                    }, {
                        'orderable': false
                    }, {
                        'orderable': true
                    }, {
                        'orderable': true
                    }, {
                        'orderable': true
                    }, {
                        'orderable': false
                    }, {
                        'orderable': false
                    }]
                });
                //this[`table${idx}`]Tools = new $.fn.dataTable.TableTools(this[`dataTable${idx}`], {});

                var tableWrapper = _this['table' + idx].parent().parent().parent().find('#mymaps_' + idx + '_table_wrapper');

                _this['table' + idx].find('.group-checkable').change(function () {
                    var set = jQuery(this).attr('data-set');
                    var checked = jQuery(this).is(':checked');
                    jQuery(set).each(function () {
                        if (checked) {
                            $(this).attr('checked', true);
                            $(this).parents('tr').addClass('active');
                        } else {
                            $(this).attr('checked', false);
                            $(this).parents('tr').removeClass('active');
                        }
                    });
                    jQuery.uniform.update(set);
                });

                _this['table' + idx].on('change', 'tbody tr .checkboxes', function () {
                    $(this).parents('tr').toggleClass('active');
                });

                tableWrapper.find('.dataTables_length select').addClass('form-control input-xsmall input-inline'); // modify table per page dropdown

                if (editable) {
                    $('.meta_editable_' + idx).editable({ unsavedclass: null }).on('save', function (event, params) {
                        if (this.dataset && this.dataset.pk) {
                            var id = this.dataset.pk;
                            MetaMap.MetaFire.setData(params.newValue, CONSTANTS.ROUTES.MAPS_LIST + '/' + id + '/name');
                        }
                        return true;
                    });
                }
                NProgress.done();
            } catch (e) {
                NProgress.done();
                MetaMap.error(e);
            }
        };

        MetaMap.MetaFire.getChild(CONSTANTS.ROUTES.MAPS_LIST).orderByChild('owner').equalTo(MetaMap.User.userId).on('value', function (val) {
            var list = val.val();
            var maps = _.map(list, function (obj, key) {
                obj.id = key;
                obj.created_at = moment(obj.created_at).format('YYYY-MM-DD');
                return obj;
            });
            buildTable(0, maps);
        });

        MetaMap.MetaFire.getChild(CONSTANTS.ROUTES.MAPS_LIST).on('value', function (val) {
            var list = val.val();
            var maps = _.map(list, function (obj, key) {
                if (obj.owner == MetaMap.User.userId || !obj.shared_with || obj.shared_with[MetaMap.User.userId] != true) {
                    return;
                } else {
                    obj.id = key;
                    obj.created_at = moment(new Date(obj.created_at)).format('YYYY-MM-DD');
                    return obj;
                }
            });
            maps = _.filter(maps, function (map) {
                return map && map.id;
            });
            buildTable(1, maps);
        });
    });
});

},{"../../../MetaMap.js":1,"../../actions/DeleteMap.js":5,"../../constants/constants":48,"lodash":undefined,"moment":undefined,"riot":"riot"}],85:[function(require,module,exports){
'use strict';

var riot = require('riot');
var NProgress = window.NProgress;
var CONSTANTS = require('../../constants/constants');

var html = '\n<div class="portlet light">\n\t\t\t\t<div class="portlet-body">\n\t\t\t\t\t<div class="row margin-bottom-30">\n\t\t\t\t\t\t<div if="{ header }" class="col-md-12">\n                            <h1>{ header.title }</h1>\n                            <p>{ header.text }</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                    <div each="{ areas }">\n                        <div class="headline">\n    \t\t\t\t\t\t<h3>{ title }</h3>\n    \t\t\t\t\t</div>\n                        <div>\n                            <p>{ text }</p>\n                        </div>\n                        <ul class="list-unstyled margin-top-10 margin-bottom-10">\n\t\t\t\t\t\t\t<li each="{ items }">\n\t\t\t\t\t\t\t\t<i class="{ icon }"></i> <b>{ title }</b> { text }\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n                    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n';

module.exports = riot.tag('terms', html, function (opts) {
    var _this = this;

    var MetaMap = require('../../../MetaMap.js');

    this.areas = [];
    this.header = {};

    MetaMap.MetaFire.on(CONSTANTS.ROUTES.TERMS_AND_CONDITIONS, function (data) {
        _this.areas = _.filter(_.sortBy(data.sections, 'order'), function (d) {
            var include = d.archive != true;
            if (include) {
                d.items = _.filter(_.sortBy(d.items, 'order'), function (d) {
                    var include2 = d.archive != true;
                    return include2;
                });
            }
            return include;
        });

        _this.header = data.header;
        _this.userName = MetaMap.User.fullName;

        _this.update();

        NProgress.done();
    });
});

},{"../../../MetaMap.js":1,"../../constants/constants":48,"riot":"riot"}],86:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var moment = require('moment');

var Common = (function () {
    function Common() {
        _classCallCheck(this, Common);
    }

    _createClass(Common, null, [{
        key: 'splitLines',
        value: function splitLines(text) {
            return text.split(/\n/);
        }
    }, {
        key: 'getEventTime',
        value: function getEventTime(t, now) {
            var time = moment(t, 'YYYY-MM-DD HH:mm:ss.SSS');
            var nowtime = moment(now, 'YYYY-MM-DD HH:mm:ss.SSS');
            // console.log('t:       ' + t);
            // console.log('now:     ' + now);
            // console.log('time:    ' + time.format()); // + ' ' + time.isValid());
            // console.log('nowtime: ' + nowtime.format()); // + ' ' + nowtime.isValid());
            return time.from(nowtime);
        }
    }, {
        key: 'classIf',
        value: function classIf(klass, b) {
            //console.log('classIf: ' + klass + ', ' + b);
            return b ? klass : '';
        }

        // avoid '$apply already in progress' error (source: https://coderwall.com/p/ngisma)
    }, {
        key: 'safeApply',
        value: function safeApply(fn) {
            if (fn && typeof fn === 'function') {
                fn();
            }
        }

        // source: http://ctrlq.org/code/19616-detect-touch-screen-javascript
    }, {
        key: 'isTouchDevice',
        value: function isTouchDevice() {
            return 'ontouchstart' in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
        }
    }, {
        key: 'getTicksFromDate',
        value: function getTicksFromDate(date) {
            var ret = null;
            if (date && date.getTime) {
                ret = date.getTime() / 1000;
            }
            return ret;
        }
    }]);

    return Common;
})();

module.exports = Common;

},{"moment":undefined}],87:[function(require,module,exports){
'use strict';

if (!String.prototype.format) {
    String.prototype.format = function () {
        var args = arguments;
        return this.replace(/{(\d+)}/g, function (match, number) {
            return typeof args[number] != 'undefined' ? args[number] : match;
        });
    };
}

},{}],88:[function(require,module,exports){
'use strict';

var uuid = function uuid() {
    var hexDigits, i, s, uuid;
    s = [];
    s.length = 36;
    hexDigits = '0123456789abcdef';
    i = 0;
    while (i < 36) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
        i += 1;
    }
    s[14] = '4';
    s[19] = hexDigits.substr(s[19] & 0x3 | 0x8, 1);
    s[8] = s[13] = s[18] = s[23] = '-';
    uuid = s.join('');
    return uuid;
};

module.exports = uuid;

},{}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9NZXRhTWFwLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYWN0aW9ucy9BY3Rpb24uanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hY3Rpb25zL0FjdGlvbkJhc2UuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hY3Rpb25zL0NvcHlNYXAuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hY3Rpb25zL0RlbGV0ZU1hcC5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FjdGlvbnMvRmVlZGJhY2suanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hY3Rpb25zL0hvbWUuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hY3Rpb25zL0xvZ291dC5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FjdGlvbnMvTXlNYXBzLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYWN0aW9ucy9OZXdNYXAuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hY3Rpb25zL09wZW5NYXAuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hY3Rpb25zL1Rlcm1zLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYXBwL0NvbmZpZy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FwcC9FdmVudGVyLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYXBwL0ZpcmViYXNlLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvYXBwL0ludGVncmF0aW9ucy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2FwcC9Sb3V0ZXIuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hcHAvYXV0aDAuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9hcHAvdXNlci5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9hbmFseXRpY3MuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvYXR0YWNobWVudHMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvYXV0b3NhdmUuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvYnV0dG9ucy9idXR0b24uanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvYnV0dG9ucy9idXR0b25DbGljay5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9idXR0b25zL2J1dHRvbkRyYWdnaW5nLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL2J1dHRvbnMvZC5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9idXR0b25zL3AuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvYnV0dG9ucy9yLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL2J1dHRvbnMvcy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9lZGl0b3IuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvZWRpdG9yX29wdGlvbnMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvZXh0ZW5zaW9ucy9Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvZ2VuZXJhdG9yLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL2xheW91dHMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvbWFwLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY2FudmFzL3BlcnNwZWN0aXZlcy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9wcmVzZW50ZXIuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvc2JFZGl0b3IuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvc2hhcmluZy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy9zdGFuZGFyZHMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvdGFnZ2luZy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NhbnZhcy90ZW1wbGF0ZXMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvdGVzdHMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvdWkuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jYW52YXMvdXNlci5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NvbnN0YW50cy9hY3Rpb25zLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY29uc3RhbnRzL2NhbnZhcy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NvbnN0YW50cy9jb25zdGFudHMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jb25zdGFudHMvZHNycC5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NvbnN0YW50cy9lZGl0U3RhdHVzLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY29uc3RhbnRzL2VsZW1lbnRzLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvY29uc3RhbnRzL2V2ZW50cy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NvbnN0YW50cy9wYWdlcy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NvbnN0YW50cy9yb3V0ZXMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9jb25zdGFudHMvdGFicy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2NvbnN0YW50cy90YWdzLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvaW50ZWdyYXRpb25zL0FkZFRoaXMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvRmFjZWJvb2suanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvR29vZ2xlLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvaW50ZWdyYXRpb25zL0ludGVyY29tLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvaW50ZWdyYXRpb25zL05ld1JlbGljLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvaW50ZWdyYXRpb25zL1R3aXR0ZXIuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvVXNlclNuYXAuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvWmVuZGVzay5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2ludGVncmF0aW9ucy9fSW50ZWdyYXRpb25zQmFzZS5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL2ludGVncmF0aW9ucy9nb29nbGUuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy9wYWdlcy9QYWdlRmFjdG9yeS5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL3RhZ3MvY2FudmFzL21ldGEtY2FudmFzLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvdGFncy9tZW51L21ldGEtaGVscC5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL3RhZ3MvbWVudS9tZXRhLW5vdGlmaWNhdGlvbnMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy90YWdzL21lbnUvbWV0YS1wb2ludHMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy90YWdzL21lbnUvbWV0YS11c2VyLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvdGFncy9wYWdlLWFjdGlvbnMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy90YWdzL3BhZ2UtYm9keS5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL3RhZ3MvcGFnZS1jb250YWluZXIuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy90YWdzL3BhZ2UtY29udGVudC5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL3RhZ3MvcGFnZS1mb290ZXIuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy90YWdzL3BhZ2UtaGVhZGVyLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvdGFncy9wYWdlLWxvZ28uanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy90YWdzL3BhZ2Utc2VhcmNoLmpzIiwiRDovR2l0aHViL01ldGFNYXAvbWV0YW1hcC9zcmMvanMvdGFncy9wYWdlLXNpZGViYXIuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy90YWdzL3BhZ2UtdG9wbWVudS5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL3RhZ3MvcGFnZXMvaG9tZS5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL3RhZ3MvcGFnZXMvbXktbWFwcy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL3RhZ3MvcGFnZXMvdGVybXMuanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy90b29scy9Db21tb24uanMiLCJEOi9HaXRodWIvTWV0YU1hcC9tZXRhbWFwL3NyYy9qcy90b29scy9zaGltcy5qcyIsIkQ6L0dpdGh1Yi9NZXRhTWFwL21ldGFtYXAvc3JjL2pzL3Rvb2xzL3V1aWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUNBQSxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUMxQixPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDbkIsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUM3QyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDckIsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3JCLE1BQU0sQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzlCLE1BQU0sQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzdCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDOztBQUVyQyxJQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FB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SSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsZUFBZSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQzs7OztBQUk5RSxZQUFJLFlBQVksR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDO0FBQ3ZDLFlBQUksU0FBUyxHQUFHLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDckUsWUFBSSxTQUFTLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLFdBQVcsQ0FBQyxDQUFDOzs7QUFHM0csWUFBSSxFQUFFLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQztBQUM3QixlQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLGdCQUFJLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO0FBQ3JCLGdCQUFJLFdBQVcsR0FBRyxLQUFLLENBQUMsWUFBWSxDQUFDO0FBQ3JDLGdCQUFJLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFBLEdBQUksV0FBVyxDQUFDO0FBQ3JFLGdCQUFJLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFBLEdBQUksV0FBVyxDQUFDO0FBQ3JFLGdCQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7O0FBRTFELGVBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxF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QUFNLENBQUMsQUFBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxHQUFJLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNqRCxLQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ25DLFFBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ2xCLFdBQU8sSUFBSSxDQUFDO0NBQ2YsQ0FBQzs7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJyZXF1aXJlKCdiYWJlbC9wb2x5ZmlsbCcpO1xyXG5yZXF1aXJlKCdjb3JlLWpzJyk7XHJcbndpbmRvdy4kID0gd2luZG93LmpRdWVyeSA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG5yZXF1aXJlKCdqcXVlcnktdWknKTtcclxucmVxdWlyZSgnYm9vdHN0cmFwJyk7XHJcbndpbmRvdy5yaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG53aW5kb3cuXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG53aW5kb3cuUHJvbWlzZSA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XHJcblxyXG5jb25zdCBBdXRoMCA9IHJlcXVpcmUoJy4vanMvYXBwL2F1dGgwJyk7XHJcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuL2pzL2FwcC91c2VyLmpzJyk7XHJcbmNvbnN0IFJvdXRlciA9IHJlcXVpcmUoJy4vanMvYXBwL1JvdXRlci5qcycpO1xyXG5jb25zdCBFdmVudGVyID0gcmVxdWlyZSgnLi9qcy9hcHAvRXZlbnRlci5qcycpO1xyXG5jb25zdCBQYWdlRmFjdG9yeSA9IHJlcXVpcmUoJy4vanMvcGFnZXMvUGFnZUZhY3RvcnkuanMnKTtcclxuY29uc3QgTlByb2dyZXNzID0gd2luZG93Lk5Qcm9ncmVzcztcclxuY29uc3QgQ29uZmlnID0gcmVxdWlyZSgnLi9qcy9hcHAvL0NvbmZpZy5qcycpO1xyXG5jb25zdCBnYSA9IHJlcXVpcmUoJy4vanMvaW50ZWdyYXRpb25zL2dvb2dsZS5qcycpO1xyXG5jb25zdCBzaGltcyA9IHJlcXVpcmUoJy4vanMvdG9vbHMvc2hpbXMuanMnKTtcclxuY29uc3QgQWlyYnJha2VDbGllbnQgPSByZXF1aXJlKCdhaXJicmFrZS1qcycpXHJcbmNvbnN0IEludGVncmF0aW9ucyA9IHJlcXVpcmUoJy4vanMvYXBwL0ludGVncmF0aW9ucycpXHJcblxyXG5jbGFzcyBNZXRhTWFwIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLkNvbmZpZyA9IG5ldyBDb25maWcoKTtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IHRoaXMuQ29uZmlnLmNvbmZpZztcclxuICAgICAgICB0aGlzLk1ldGFGaXJlID0gdGhpcy5Db25maWcuTWV0YUZpcmU7XHJcbiAgICAgICAgdGhpcy5FdmVudGVyID0gbmV3IEV2ZW50ZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5haXJicmFrZSA9IG5ldyBBaXJicmFrZUNsaWVudCh7IHByb2plY3RJZDogMTE0OTAwLCBwcm9qZWN0S2V5OiAnZGM5NjExZGI2Zjc3MTIwY2NlY2QxYTI3Mzc0NWE1YWUnIH0pO1xyXG4gICAgICAgIHRoaXMub25SZWFkeSgpO1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIFByb21pc2Uub25Qb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbihmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhhdC5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVhZHkoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9vblJlYWR5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uUmVhZHkgPSBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkNvbmZpZy5vblJlYWR5KCkudGhlbigoY29uZmlnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5BdXRoMCA9IG5ldyBBdXRoMChjb25maWcuYXV0aDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoKTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uUmVhZHk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICB0aGlzLm9uUmVhZHkoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5BdXRoMC5sb2dpbigpLnRoZW4oKHByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuTWV0YUZpcmUubG9naW4oKS50aGVuKChhdXRoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Vc2VyID0gbmV3IFVzZXIocHJvZmlsZSwgYXV0aCwgdGhpcy5FdmVudGVyLCB0aGlzLk1ldGFGaXJlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkludGVncmF0aW9ucyA9IG5ldyBJbnRlZ3JhdGlvbnModGhpcywgdGhpcy5Vc2VyKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLlVzZXIub25SZWFkeSgpLnRoZW4oKHVzZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5QYWdlRmFjdG9yeSA9IG5ldyBQYWdlRmFjdG9yeSh0aGlzLkV2ZW50ZXIsIHRoaXMuTWV0YUZpcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlJvdXRlciA9IG5ldyBSb3V0ZXIodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuUm91dGVyLmluaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5JbnRlZ3JhdGlvbnMuaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxvZyh2YWwpIHtcclxuICAgICAgICB0aGlzLkludGVncmF0aW9ucy5zZW5kRXZlbnQodmFsLCAnZXZlbnQnLCAnbG9nJywgJ2xhYmVsJylcclxuICAgICAgICB3aW5kb3cuY29uc29sZS5pbmZvKHZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXJyb3IodmFsKSB7XHJcbiAgICAgICAgd2luZG93LmNvbnNvbGUuZXJyb3IodmFsKTtcclxuICAgICAgICB0aGlzLkludGVncmF0aW9ucy5zZW5kRXZlbnQodmFsLCAnZXhjZXB0aW9uJylcclxuICAgICAgICB0aGlzLmFpcmJyYWtlLm5vdGlmeSh2YWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvZ291dCgpIHtcclxuICAgICAgICB0aGlzLk1ldGFGaXJlLmxvZ291dCgpO1xyXG4gICAgICAgIHRoaXMuQXV0aDAubG9nb3V0KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IG1tID0gbmV3IE1ldGFNYXAoKTtcclxubW9kdWxlLmV4cG9ydHMgPSBtbTsiLCJjb25zdCBBY3Rpb25CYXNlID0gcmVxdWlyZSgnLi9BY3Rpb25CYXNlLmpzJyk7XHJcbmNvbnN0IENPTlNUQU5UUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9jb25zdGFudHMnKTtcclxuXHJcbmNsYXNzIEFjdGlvbiBleHRlbmRzIEFjdGlvbkJhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIoLi4ucGFyYW1zKTtcclxuICAgICAgICB0aGlzLl9hY3Rpb25zID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgX2dldEFjdGlvbihhY3Rpb24pIHtcclxuICAgICAgICBsZXQgcmV0ID0gdGhpcy5fYWN0aW9uc1thY3Rpb25dO1xyXG4gICAgICAgIGlmICghcmV0KSB7XHJcbiAgICAgICAgICAgIGxldCBNZXRob2QgPSBudWxsO1xyXG4gICAgICAgICAgICBzd2l0Y2goYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENPTlNUQU5UUy5BQ1RJT05TLk1BUDpcclxuICAgICAgICAgICAgICAgICAgICBNZXRob2QgPSByZXF1aXJlKCcuL09wZW5NYXAuanMnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQ09OU1RBTlRTLkFDVElPTlMuTkVXX01BUDpcclxuICAgICAgICAgICAgICAgICAgICBNZXRob2QgPSByZXF1aXJlKCcuL05ld01hcC5qcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDT05TVEFOVFMuQUNUSU9OUy5DT1BZX01BUDpcclxuICAgICAgICAgICAgICAgICAgICBNZXRob2QgPSByZXF1aXJlKCcuL0NvcHlNYXAuanMnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQ09OU1RBTlRTLkFDVElPTlMuREVMRVRFX01BUDpcclxuICAgICAgICAgICAgICAgICAgICBNZXRob2QgPSByZXF1aXJlKCcuL0RlbGV0ZU1hcC5qcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDT05TVEFOVFMuQUNUSU9OUy5NWV9NQVBTOlxyXG4gICAgICAgICAgICAgICAgICAgIE1ldGhvZCA9IHJlcXVpcmUoJy4vTXlNYXBzLmpzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENPTlNUQU5UUy5BQ1RJT05TLkxPR09VVDpcclxuICAgICAgICAgICAgICAgICAgICBNZXRob2QgPSByZXF1aXJlKCcuL0xvZ291dC5qcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDT05TVEFOVFMuQUNUSU9OUy5URVJNU19BTkRfQ09ORElUSU9OUzpcclxuICAgICAgICAgICAgICAgICAgICBNZXRob2QgPSByZXF1aXJlKCcuL1Rlcm1zLmpzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENPTlNUQU5UUy5BQ1RJT05TLkZFRURCQUNLOlxyXG4gICAgICAgICAgICAgICAgICAgIE1ldGhvZCA9IHJlcXVpcmUoJy4vRmVlZGJhY2snKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgTWV0aG9kID0gcmVxdWlyZSgnLi9Ib21lLmpzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKE1ldGhvZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0ID0gbmV3IE1ldGhvZCh0aGlzLm1ldGFGaXJlLCB0aGlzLmV2ZW50ZXIsIHRoaXMucGFnZUZhY3RvcnkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWN0aW9uc1thY3Rpb25dID0gcmV0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgYWN0KGFjdGlvbiwgLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIuYWN0KCk7XHJcbiAgICAgICAgbGV0IG1ldGhvZCA9IHRoaXMuX2dldEFjdGlvbihhY3Rpb24pO1xyXG4gICAgICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZC5hY3QoLi4ucGFyYW1zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEFjdGlvbjsiLCJjb25zdCBDT05TVEFOVFMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvY29uc3RhbnRzJyk7XHJcblxyXG5jbGFzcyBBY3Rpb25CYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKG1ldGFGaXJlLCBldmVudGVyLCBwYWdlRmFjdG9yeSkge1xyXG4gICAgICAgIHRoaXMubWV0YUZpcmUgPSBtZXRhRmlyZTtcclxuICAgICAgICB0aGlzLmV2ZW50ZXIgPSBldmVudGVyO1xyXG4gICAgICAgIHRoaXMucGFnZUZhY3RvcnkgPSBwYWdlRmFjdG9yeTtcclxuICAgICAgICB0aGlzLm1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9NZXRhTWFwLmpzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgYWN0KCkge1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0b2dnbGVTaWRlYmFyKCkge1xyXG4gICAgICAgIGlmKHRoaXMuc2lkZWJhck9wZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5vcGVuU2lkZWJhcigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VTaWRlYmFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBvcGVuU2lkZWJhcigpIHtcclxuICAgICAgICB0aGlzLnNpZGViYXJPcGVuID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmV2ZW50ZXIuZG8oQ09OU1RBTlRTLkVWRU5UUy5TSURFQkFSX09QRU4pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjbG9zZVNpZGViYXIoKSB7XHJcbiAgICAgICAgdGhpcy5zaWRlYmFyT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZXZlbnRlci5kbyhDT05TVEFOVFMuRVZFTlRTLlNJREVCQVJfQ0xPU0UpO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEFjdGlvbkJhc2U7IiwiY29uc3QgQWN0aW9uQmFzZSA9IHJlcXVpcmUoJy4vQWN0aW9uQmFzZS5qcycpO1xyXG5jb25zdCBDT05TVEFOVFMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvY29uc3RhbnRzJyk7XHJcblxyXG5jbGFzcyBDb3B5TWFwIGV4dGVuZHMgQWN0aW9uQmFzZSB7XHJcbiAgICBjb25zdHJ1Y3RvciguLi5wYXJhbXMpIHtcclxuICAgICAgICBzdXBlciguLi5wYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFjdChpZCwgLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIuYWN0KGlkLCAuLi5wYXJhbXMpO1xyXG4gICAgICAgIGlmICghaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignTXVzdCBoYXZlIGEgbWFwIGluIG9yZGVyIHRvIGNvcHkuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWV0YUZpcmUuZ2V0RGF0YShgJHtDT05TVEFOVFMuUk9VVEVTLk1BUFNfTElTVH0ke2lkfWApLnRoZW4oKG9sZE1hcCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbmV3TWFwID0ge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIG93bmVyOiB0aGlzLm1ldGFNYXAuVXNlci51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmFwcGVuZENvcHkob2xkTWFwLm5hbWUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tZXRhRmlyZS5nZXREYXRhKGAke0NPTlNUQU5UUy5ST1VURVMuTUFQU19EQVRBfSR7aWR9YCkudGhlbigob2xkTWFwRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHB1c2hTdGF0ZSA9IHRoaXMubWV0YUZpcmUucHVzaERhdGEobmV3TWFwLCBgJHtDT05TVEFOVFMuUk9VVEVTLk1BUFNfTElTVH1gKTtcclxuICAgICAgICAgICAgICAgIGxldCBtYXBJZCA9IHB1c2hTdGF0ZS5rZXkoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWV0YUZpcmUuc2V0RGF0YShvbGRNYXBEYXRhLCBgJHtDT05TVEFOVFMuUk9VVEVTLk1BUFNfREFUQX0ke21hcElkfWApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXRhTWFwLlJvdXRlci50byhgbWFwLyR7bWFwSWR9YCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZENvcHkoc3RyKSB7XHJcbiAgICAgICAgbGV0IHJldCA9IHN0cjtcclxuICAgICAgICBpZiAoIV8uY29udGFpbnMoc3RyLCAnKENvcHknKSkge1xyXG4gICAgICAgICAgICByZXQgPSByZXQgKyAnIChDb3B5IDEpJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgbWVzcyA9IHN0ci5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICBsZXQgY250ID0gMjtcclxuICAgICAgICAgICAgaWYgKG1lc3NbbWVzcy5sZW5ndGggLSAyXSA9PSAnKENvcHknKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZ3JiZyA9IG1lc3NbbWVzcy5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgIGlmIChncmJnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JiZyA9IGdyYmcucmVwbGFjZSgnKScsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICBjbnQgPSArZ3JiZyArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0gbWVzcy5zbGljZSgwLCBtZXNzLmxlbmd0aCAtIDIpLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXQgKz0gYCAoQ29weSAke2NudH0pYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDb3B5TWFwOyIsImNvbnN0IEFjdGlvbkJhc2UgPSByZXF1aXJlKCcuL0FjdGlvbkJhc2UuanMnKTtcclxuY29uc3QgQ09OU1RBTlRTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2NvbnN0YW50cycpO1xyXG5jb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcblxyXG5jbGFzcyBEZWxldGVNYXAgZXh0ZW5kcyBBY3Rpb25CYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKC4uLnBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKC4uLnBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgYWN0KGlkLCAuLi5wYXJhbXMpIHtcclxuICAgICAgICBzdXBlci5hY3QoaWQsIC4uLnBhcmFtcyk7XHJcbiAgICAgICAgRGVsZXRlTWFwLmRlbGV0ZUFsbChbaWRdKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGVsZXRlQWxsKGlkcywgcGF0aCA9IENPTlNUQU5UUy5QQUdFUy5IT01FKSB7XHJcbiAgICAgICAgY29uc3QgbWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uL01ldGFNYXAuanMnKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBfLmVhY2goaWRzLCAoaWQpID0+IHtcclxuICAgICAgICAgICAgICAgIG1ldGFNYXAuTWV0YUZpcmUuZGVsZXRlRGF0YShgJHtDT05TVEFOVFMuUk9VVEVTLk1BUFNfREFUQX0ke2lkfWApO1xyXG4gICAgICAgICAgICAgICAgbWV0YU1hcC5NZXRhRmlyZS5kZWxldGVEYXRhKGAke0NPTlNUQU5UUy5ST1VURVMuTUFQU19MSVNUfSR7aWR9YCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICBtZXRhTWFwLlJvdXRlci50byhwYXRoKTtcclxuICAgICAgICB9ICAgICAgICBcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBEZWxldGVNYXA7IiwiY29uc3QgQWN0aW9uQmFzZSA9IHJlcXVpcmUoJy4vQWN0aW9uQmFzZS5qcycpO1xyXG5cclxuY2xhc3MgRmVlZGJhY2sgZXh0ZW5kcyBBY3Rpb25CYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKC4uLnBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKC4uLnBhcmFtcyk7XHJcbiAgICAgICAgdGhpcy51c2VyU25hcCA9IHdpbmRvdy5Vc2VyU25hcDtcclxuICAgIH1cclxuXHJcbiAgICBhY3QoKSB7XHJcbiAgICAgICAgc3VwZXIuYWN0KCk7XHJcbiAgICAgICAgdGhpcy51c2VyU25hcC5vcGVuUmVwb3J0V2luZG93KCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRmVlZGJhY2s7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKVxyXG5jb25zdCBBY3Rpb25CYXNlID0gcmVxdWlyZSgnLi9BY3Rpb25CYXNlLmpzJyk7XHJcbmNvbnN0IENPTlNUQU5UUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9jb25zdGFudHMnKTtcclxuY29uc3QgaG9tZSA9IHJlcXVpcmUoJy4uL3RhZ3MvcGFnZXMvaG9tZScpO1xyXG5cclxuY2xhc3MgSG9tZSBleHRlbmRzIEFjdGlvbkJhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIoLi4ucGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBhY3QoaWQsIC4uLnBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyLmFjdChpZCwgLi4ucGFyYW1zKTtcclxuICAgICAgICAkKGAjJHtDT05TVEFOVFMuRUxFTUVOVFMuQVBQX0NPTlRBSU5FUn1gKS5lbXB0eSgpO1xyXG4gICAgICAgIHJpb3QubW91bnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQ09OU1RBTlRTLkVMRU1FTlRTLkFQUF9DT05UQUlORVIpLCBDT05TVEFOVFMuVEFHUy5IT01FKTtcclxuICAgICAgICB0aGlzLmV2ZW50ZXIuZG8oQ09OU1RBTlRTLkVWRU5UUy5QQUdFX05BTUUsIHsgbmFtZTogJ0hvbWUnIH0sIC4uLnBhcmFtcyk7XHJcbiAgICAgICAgdGhpcy5jbG9zZVNpZGViYXIoKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBIb21lOyIsImNvbnN0IEFjdGlvbkJhc2UgPSByZXF1aXJlKCcuL0FjdGlvbkJhc2UuanMnKTtcclxuY29uc3QgQ09OU1RBTlRTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2NvbnN0YW50cycpO1xyXG5jb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcblxyXG5jbGFzcyBMb2dvdXQgZXh0ZW5kcyBBY3Rpb25CYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKC4uLnBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKC4uLnBhcmFtcyk7XHJcbiAgICAgICAgdGhpcy5tZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vTWV0YU1hcC5qcycpO1xyXG4gICAgfVxyXG5cclxuICAgIGFjdChpZCwgLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIuYWN0KGlkLCAuLi5wYXJhbXMpO1xyXG4gICAgICAgIHRoaXMubWV0YU1hcC5sb2dvdXQoKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBMb2dvdXQ7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKVxyXG5jb25zdCBBY3Rpb25CYXNlID0gcmVxdWlyZSgnLi9BY3Rpb25CYXNlLmpzJyk7XHJcbmNvbnN0IENPTlNUQU5UUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9jb25zdGFudHMnKTtcclxuY29uc3QgaG9tZSA9IHJlcXVpcmUoJy4uL3RhZ3MvcGFnZXMvbXktbWFwcycpO1xyXG5cclxuY2xhc3MgTXlNYXBzIGV4dGVuZHMgQWN0aW9uQmFzZSB7XHJcbiAgICBjb25zdHJ1Y3RvciguLi5wYXJhbXMpIHtcclxuICAgICAgICBzdXBlciguLi5wYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFjdChpZCwgLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIuYWN0KGlkLCAuLi5wYXJhbXMpO1xyXG4gICAgICAgICQoYCMke0NPTlNUQU5UUy5FTEVNRU5UUy5BUFBfQ09OVEFJTkVSfWApLmVtcHR5KCk7XHJcbiAgICAgICAgcmlvdC5tb3VudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChDT05TVEFOVFMuRUxFTUVOVFMuQVBQX0NPTlRBSU5FUiksIENPTlNUQU5UUy5UQUdTLk1ZX01BUFMpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRlci5kbyhDT05TVEFOVFMuUEFHRVMuTVlfTUFQUywgeyBpZDogaWQgfSwgLi4ucGFyYW1zKTtcclxuICAgICAgICB0aGlzLmV2ZW50ZXIuZG8oQ09OU1RBTlRTLkVWRU5UUy5QQUdFX05BTUUsIHsgbmFtZTogJ015IE1hcHMnIH0sIC4uLnBhcmFtcyk7XHJcbiAgICAgICAgdGhpcy5jbG9zZVNpZGViYXIoKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNeU1hcHM7IiwiY29uc3QgQWN0aW9uQmFzZSA9IHJlcXVpcmUoJy4vQWN0aW9uQmFzZS5qcycpO1xyXG5jb25zdCBDT05TVEFOVFMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvY29uc3RhbnRzJyk7XHJcblxyXG5jbGFzcyBOZXdNYXAgZXh0ZW5kcyBBY3Rpb25CYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKC4uLnBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKC4uLnBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgYWN0KCkge1xyXG4gICAgICAgIHN1cGVyLmFjdCgpO1xyXG4gICAgICAgIHRoaXMubWV0YUZpcmUuZ2V0RGF0YShgJHtDT05TVEFOVFMuUk9VVEVTLk1BUFNfTkVXX01BUH1gKS50aGVuKChibGFua01hcCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbmV3TWFwID0ge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIG93bmVyOiB0aGlzLm1ldGFNYXAuVXNlci51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnVW50aXRsZWQgTWFwJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBwdXNoU3RhdGUgPSB0aGlzLm1ldGFGaXJlLnB1c2hEYXRhKG5ld01hcCwgYCR7Q09OU1RBTlRTLlJPVVRFUy5NQVBTX0xJU1R9YCk7XHJcbiAgICAgICAgICAgIGxldCBtYXBJZCA9IHB1c2hTdGF0ZS5rZXkoKTtcclxuICAgICAgICAgICAgdGhpcy5tZXRhRmlyZS5zZXREYXRhKGJsYW5rTWFwLCBgJHtDT05TVEFOVFMuUk9VVEVTLk1BUFNfREFUQX0ke21hcElkfWApO1xyXG4gICAgICAgICAgICB0aGlzLm1ldGFNYXAuUm91dGVyLnRvKGBtYXAvJHttYXBJZH1gKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBOZXdNYXA7IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL3R5cGluZ3MvcmlvdGpzL3Jpb3Rqcy5kLnRzXCIgLz5cclxuXHJcbmNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcbmNvbnN0IEFjdGlvbkJhc2UgPSByZXF1aXJlKCcuL0FjdGlvbkJhc2UuanMnKTtcclxuY29uc3QgQ09OU1RBTlRTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2NvbnN0YW50cycpO1xyXG5jb25zdCBtZXRhQ2FudmFzID0gcmVxdWlyZSgnLi4vdGFncy9jYW52YXMvbWV0YS1jYW52YXMuanMnKTtcclxuXHJcbmNsYXNzIE9wZW5NYXAgZXh0ZW5kcyBBY3Rpb25CYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKC4uLnBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKC4uLnBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgYWN0KGlkLCAuLi5wYXJhbXMpIHtcclxuICAgICAgICBzdXBlci5hY3QoaWQsIC4uLnBhcmFtcyk7XHJcbiAgICAgICAgJChgIyR7Q09OU1RBTlRTLkVMRU1FTlRTLkFQUF9DT05UQUlORVJ9YCkuZW1wdHkoKTtcclxuICAgICAgICB0aGlzLm1ldGFGaXJlLmdldERhdGEoYCR7Q09OU1RBTlRTLlJPVVRFUy5NQVBTX0xJU1R9JHtpZH1gKS50aGVuKChtYXApID0+IHtcclxuICAgICAgICAgICAgaWYgKG1hcCkge1xyXG4gICAgICAgICAgICAgICAgcmlvdC5tb3VudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChDT05TVEFOVFMuRUxFTUVOVFMuQVBQX0NPTlRBSU5FUiksIENPTlNUQU5UUy5UQUdTLk1FVEFfQ0FOVkFTKTtcclxuICAgICAgICAgICAgICAgIG1hcC5pZCA9IGlkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudGVyLmRvKENPTlNUQU5UUy5FVkVOVFMuTkFWLCAnbWFwJywgbWFwLCAuLi5wYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudGVyLmRvKENPTlNUQU5UUy5FVkVOVFMuUEFHRV9OQU1FLCBtYXAsIC4uLnBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50ZXIuZG8oQ09OU1RBTlRTLkVWRU5UUy5NQVAsIG1hcCwgLi4ucGFyYW1zKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3BlblNpZGViYXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE9wZW5NYXA7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKVxyXG5jb25zdCBBY3Rpb25CYXNlID0gcmVxdWlyZSgnLi9BY3Rpb25CYXNlLmpzJyk7XHJcbmNvbnN0IENPTlNUQU5UUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9jb25zdGFudHMnKTtcclxuY29uc3QgdGVybXMgPSByZXF1aXJlKCcuLi90YWdzL3BhZ2VzL3Rlcm1zJyk7XHJcblxyXG5jbGFzcyBUZXJtcyBleHRlbmRzIEFjdGlvbkJhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIoLi4ucGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBhY3QoaWQsIC4uLnBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyLmFjdChpZCwgLi4ucGFyYW1zKTtcclxuICAgICAgICAkKGAjJHtDT05TVEFOVFMuRUxFTUVOVFMuQVBQX0NPTlRBSU5FUn1gKS5lbXB0eSgpO1xyXG4gICAgICAgIHJpb3QubW91bnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQ09OU1RBTlRTLkVMRU1FTlRTLkFQUF9DT05UQUlORVIpLCBDT05TVEFOVFMuVEFHUy5URVJNUyk7XHJcbiAgICAgICAgdGhpcy5ldmVudGVyLmRvKENPTlNUQU5UUy5FVkVOVFMuUEFHRV9OQU1FLCB7IG5hbWU6ICdUZXJtcyBhbmQgQ29uZGl0aW9ucycgfSwgLi4ucGFyYW1zKTtcclxuICAgICAgICB0aGlzLmNsb3NlU2lkZWJhcigpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFRlcm1zOyIsImNvbnN0IE1ldGFGaXJlID0gcmVxdWlyZSgnLi9GaXJlYmFzZScpO1xyXG5jb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJylcclxuXHJcbmNvbnN0IGNvbmZpZyA9ICgpID0+IHtcclxuICAgIGNvbnN0IFNJVEVTID0ge1xyXG4gICAgICAgIENSTDoge1xyXG4gICAgICAgICAgICBkYjogJ21ldGEtbWFwLXByb2R1Y3Rpb24nXHJcbiAgICAgICAgfSxcclxuICAgICAgICBDUkxfU1RBR0lORzoge1xyXG4gICAgICAgICAgICBkYjogJ21ldGEtbWFwLXN0YWdpbmcnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBUSElOS19XQVRFUjoge1xyXG4gICAgICAgICAgICBkYjogJ3RoaW5rd2F0ZXItcHJvZHVjdGlvbidcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmV0ID0ge1xyXG4gICAgICAgIGhvc3Q6IHdpbmRvdy5sb2NhdGlvbi5ob3N0LFxyXG4gICAgICAgIHNpdGU6IHt9XHJcbiAgICB9XHJcbiAgICBsZXQgc2VnbWVudHMgPSByZXQuaG9zdC5zcGxpdCgnLicpO1xyXG4gICAgbGV0IGZpcnN0ID0gc2VnbWVudHNbMF07XHJcbiAgICBpZiAoZmlyc3QgPT09ICd3d3cnKSB7XHJcbiAgICAgICAgZmlyc3QgPSBzZWdtZW50c1sxXTtcclxuICAgIH1cclxuICAgIGZpcnN0ID0gZmlyc3Quc3BsaXQoJzonKVswXTtcclxuICAgIFxyXG4gICAgc3dpdGNoIChmaXJzdC50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgY2FzZSAnbG9jYWxob3N0JzpcclxuICAgICAgICBjYXNlICdtZXRhLW1hcC1zdGFnaW5nJzpcclxuICAgICAgICAgICAgcmV0LnNpdGUgPSBTSVRFUy5DUkxfU1RBR0lORztcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgJ2NybGFiJzpcclxuICAgICAgICBjYXNlICdmcm9udGVuZCc6XHJcbiAgICAgICAgICAgIHJldC5zaXRlID0gU0lURVMuQ1JMO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSAndGhpbmt3YXRlci1wcm9kdWN0aW9uJzpcclxuICAgICAgICBjYXNlICd0aGlua3dhdGVyLXN0YWdpbmcnOlxyXG4gICAgICAgIGNhc2UgJ3RoaW5rd2F0ZXInOlxyXG4gICAgICAgICAgICByZXQuc2l0ZSA9IFNJVEVTLlRISU5LX1dBVEVSO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmV0O1xyXG59O1xyXG5cclxuY2xhc3MgQ29uZmlnIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0YWdzKSB7XHJcbiAgICAgICAgdGhpcy50YWdzID0gdGFncztcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZygpO1xyXG4gICAgICAgIHRoaXMuTWV0YUZpcmUgPSBuZXcgTWV0YUZpcmUodGhpcy5jb25maWcpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzaXRlKCkge1xyXG4gICAgICAgIHJldHVybiAnZnJvbnRlbmQnO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVhZHkoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9vblJlYWR5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uUmVhZHkgPSBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLk1ldGFGaXJlLm9uKCdjb25maWcnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuTWV0YUZpcmUub24oJ21ldGFtYXAvY2FudmFzJywgKGNhbnZhcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5leHRlbmQodGhpcy5jb25maWcuc2l0ZSwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5jYW52YXMgPSBjYW52YXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRoaXMuY29uZmlnLnNpdGUudGl0bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmF2aWNvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZhdmljbycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmF2aWNvLnNldEF0dHJpYnV0ZSgnaHJlZicsIGAke3RoaXMuY29uZmlnLnNpdGUuaW1hZ2VVcmx9ZmF2aWNvbi5pY29gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbCh0aGlzLmNvbmZpZy5zaXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fb25SZWFkeTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uUmVhZHkoKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDb25maWc7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKVxyXG5jb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJylcclxuXHJcbmNsYXNzIEV2ZW50ZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1ldGFNYXApIHtcclxuICAgICAgICBcclxuICAgICAgICByaW90Lm9ic2VydmFibGUodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuZXZlbnRzID0ge31cclxuICAgIH1cclxuXHJcbiAgICBldmVyeShldmVudCwgcmVhY3Rpb24pIHtcclxuICAgICAgICAvL2xldCBjYWxsYmFjayA9IHJlYWN0aW9uO1xyXG4gICAgICAgIC8vaWYgKHRoaXMuZXZlbnRzW2V2ZW50XSkge1xyXG4gICAgICAgIC8vICAgIGxldCBwaWdneWJhY2sgPSB0aGlzLmV2ZW50c1tldmVudF07XHJcbiAgICAgICAgLy8gICAgY2FsbGJhY2sgPSAoLi4ucGFyYW1zKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgIHBpZ2d5YmFjayguLi5wYXJhbXMpO1xyXG4gICAgICAgIC8vICAgICAgICByZWFjdGlvbiguLi5wYXJhbXMpO1xyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvL31cclxuICAgICAgICBsZXQgZXZlbnRzID0gZXZlbnQuc3BsaXQoJyAnKTtcclxuICAgICAgICBfLmVhY2goZXZlbnRzLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IHJlYWN0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLm9uKGV2ZW50LCByZWFjdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yZ2V0KGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIGxldCBldmVudHMgPSBldmVudC5zcGxpdCgnICcpO1xyXG4gICAgICAgIF8uZWFjaChldmVudHMsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZXZlbnRzW2V2ZW50XTtcclxuICAgICAgICAgICAgICAgIHRoaXMub2ZmKGV2ZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub2ZmKGV2ZW50LCBjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGRvKGV2ZW50LCAuLi5wYXJhbXMpIHtcclxuICAgICAgICBsZXQgZXZlbnRzID0gZXZlbnQuc3BsaXQoJyAnKTtcclxuICAgICAgICBfLmVhY2goZXZlbnRzLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihldmVudCwgLi4ucGFyYW1zKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRXZlbnRlcjsiLCJsZXQgRmlyZWJhc2UgPSB3aW5kb3cuRmlyZWJhc2U7XHJcbmxldCBQcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKVxyXG5sZXQgbG9jYWxmb3JhZ2UgPSByZXF1aXJlKCdsb2NhbGZvcmFnZScpXHJcblxyXG5jbGFzcyBNZXRhRmlyZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5mYiA9IG5ldyBGaXJlYmFzZShgaHR0cHM6Ly8ke3RoaXMuY29uZmlnLnNpdGUuZGJ9LmZpcmViYXNlaW8uY29tYCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG1ldGFNYXAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9tZXRhTWFwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9NZXRhTWFwLmpzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9tZXRhTWFwO1xyXG4gICAgfVxyXG5cclxuICAgIGxvZ2luKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fbG9naW4pIHtcclxuICAgICAgICAgICAgdGhpcy5fbG9naW4gPSBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuTWV0YU1hcC5BdXRoMC5nZXRTZXNzaW9uKClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigocHJvZmlsZSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lk1ldGFNYXAuQXV0aDAubG9jay5nZXRDbGllbnQoKS5nZXREZWxlZ2F0aW9uVG9rZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLmNvbmZpZy5zaXRlLmF1dGgwLmFwaSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkX3Rva2VuOiBwcm9maWxlLmlkX3Rva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpX3R5cGU6ICdmaXJlYmFzZSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgKGVyciwgZGVsZWdhdGlvblJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlLmZpcmViYXNlX3Rva2VuID0gZGVsZWdhdGlvblJlc3VsdC5pZF90b2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcmViYXNlX3Rva2VuID0gZGVsZWdhdGlvblJlc3VsdC5pZF90b2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGZvcmFnZS5zZXRJdGVtKCdmaXJlYmFzZV90b2tlbicsIHRoaXMuZmlyZWJhc2VfdG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmIuYXV0aFdpdGhDdXN0b21Ub2tlbih0aGlzLmZpcmViYXNlX3Rva2VuLCAoZXJyb3IsIGF1dGhEYXRhLCAuLi5wYXJhbXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1ldGFNYXAuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoYXV0aERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLl9vblJlYWR5ID0gdGhpcy5fbG9naW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dpbjtcclxuICAgIH1cclxuXHJcbiAgICBvblJlYWR5KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fb25SZWFkeSkge1xyXG4gICAgICAgICAgICB0aGlzLl9vblJlYWR5ID0gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZnVsZmlsbCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uUmVhZHk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2hpbGQocGF0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZiLmNoaWxkKHBhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEocGF0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uUmVhZHkoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5mYjtcclxuICAgICAgICAgICAgaWYgKHBhdGgpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkID0gdGhpcy5nZXRDaGlsZChwYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGNoaWxkLm9uY2UoJ3ZhbHVlJyxcclxuICAgICAgICAgICAgICAgICAgICAoc25hcHNob3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSBzbmFwc2hvdC52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWV0YU1hcC5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IoZSwgcGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uKHBhdGgsIGNhbGxiYWNrLCBldmVudCA9ICd2YWx1ZScpIHtcclxuICAgICAgICBpZiAocGF0aCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uUmVhZHkoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuZ2V0Q2hpbGQocGF0aCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWV0aG9kID0gKHNuYXBzaG90KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzbmFwc2hvdC5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQub2ZmKGV2ZW50LCBtZXRob2QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGVyZSBpcyBubyBkYXRhIGF0ICR7cGF0aH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHNuYXBzaG90LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLm9mZihldmVudCwgbWV0aG9kKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcihlLCBwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY2hpbGQub24oZXZlbnQsIG1ldGhvZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvZmYocGF0aCwgbWV0aG9kID0gJ3ZhbHVlJywgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAocGF0aCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uUmVhZHkoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuZ2V0Q2hpbGQocGF0aCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5vZmYobWV0aG9kLCBjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLm9mZihtZXRob2QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGF0YShkYXRhLCBwYXRoKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5mYjtcclxuICAgICAgICBpZiAocGF0aCkge1xyXG4gICAgICAgICAgICBjaGlsZCA9IHRoaXMuZ2V0Q2hpbGQocGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjaGlsZC5zZXQoZGF0YSwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcihlLCBwYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yKGUsIHBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVEYXRhKHBhdGgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXREYXRhKG51bGwsIHBhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1c2hEYXRhKGRhdGEsIHBhdGgpIHtcclxuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmZiO1xyXG4gICAgICAgIGlmIChwYXRoKSB7XHJcbiAgICAgICAgICAgIGNoaWxkID0gdGhpcy5nZXRDaGlsZChwYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkLnB1c2goZGF0YSwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcihlLCBwYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yKGUsIHBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXREYXRhSW5UcmFuc2FjdGlvbihkYXRhLCBwYXRoLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBjaGlsZCA9IHRoaXMuZmI7XHJcbiAgICAgICAgaWYgKHBhdGgpIHtcclxuICAgICAgICAgICAgY2hpbGQgPSB0aGlzLmdldENoaWxkKHBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2hpbGQudHJhbnNhY3Rpb24oKGN1cnJlbnRWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yKGUsIHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZSwgcGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGVycm9yKGUsIHBhdGgpIHtcclxuICAgICAgICBpZiAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1ldGFNYXAuZXJyb3IoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwYXRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWV0YU1hcC5lcnJvcih7IG1lc3NhZ2U6IGBQZXJtaXNzaW9uIGRlbmllZCB0byAke3BhdGh9YCB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbG9nb3V0KCkge1xyXG4gICAgICAgIHRoaXMuX2xvZ2luID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vblJlYWR5ID0gbnVsbDtcclxuICAgICAgICBsb2NhbGZvcmFnZS5yZW1vdmVJdGVtKCdmaXJlYmFzZV90b2tlbicpO1xyXG4gICAgICAgIHRoaXMuZmIudW5hdXRoKCk7XHJcbiAgICB9XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBNZXRhRmlyZTsiLCJjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJylcclxuXHJcbmNvbnN0IFR3aWl0ZXIgPSByZXF1aXJlKCcuLi9pbnRlZ3JhdGlvbnMvVHdpdHRlcicpO1xyXG5jb25zdCBGYWNlYm9vayA9IHJlcXVpcmUoJy4uL2ludGVncmF0aW9ucy9GYWNlYm9vaycpO1xyXG5cclxuY2xhc3MgSW50ZWdyYXRpb25zIHtcclxuXHJcblx0Y29uc3RydWN0b3IobWV0YU1hcCwgdXNlcikge1xyXG5cdFx0dGhpcy5jb25maWcgPSBtZXRhTWFwLmNvbmZpZztcclxuXHRcdHRoaXMubWV0YU1hcCA9IG1ldGFNYXA7XHJcblx0XHR0aGlzLnVzZXIgPSB1c2VyO1xyXG5cdFx0dGhpcy5fZmVhdHVyZXMgPSB7XHJcblx0XHRcdGdvb2dsZTogcmVxdWlyZSgnLi4vaW50ZWdyYXRpb25zL0dvb2dsZScpLFxyXG5cdFx0XHR1c2Vyc25hcDogcmVxdWlyZSgnLi4vaW50ZWdyYXRpb25zL1VzZXJTbmFwJyksXHJcblx0XHRcdGludGVyY29tOiByZXF1aXJlKCcuLi9pbnRlZ3JhdGlvbnMvSW50ZXJjb20nKSxcclxuXHRcdFx0emVuZGVzazogcmVxdWlyZSgnLi4vaW50ZWdyYXRpb25zL1plbmRlc2snKSxcclxuXHRcdFx0YWRkdGhpczogcmVxdWlyZSgnLi4vaW50ZWdyYXRpb25zL0FkZFRoaXMnKSxcclxuXHRcdFx0bmV3cmVsaWM6IHJlcXVpcmUoJy4uL2ludGVncmF0aW9ucy9OZXdSZWxpYycpXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0aW5pdCgpIHtcclxuICAgICAgICBfLmVhY2godGhpcy5fZmVhdHVyZXMsIChGZWF0dXJlLCBuYW1lKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChGZWF0dXJlKSB7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGxldCBjb25maWcgPSB0aGlzLmNvbmZpZy5zaXRlW25hbWVdO1xyXG5cdFx0XHRcdFx0dGhpc1tuYW1lXSA9IG5ldyBGZWF0dXJlKGNvbmZpZywgdGhpcy51c2VyKTtcclxuXHRcdFx0XHRcdHRoaXNbbmFtZV0uaW5pdCgpO1xyXG5cdFx0XHRcdFx0dGhpc1tuYW1lXS5zZXRVc2VyKCk7XHJcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRcdFx0dGhpcy5tZXRhTWFwLmVycm9yKGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHRzZXRVc2VyKCkge1xyXG5cdFx0Xy5lYWNoKHRoaXMuX2ZlYXR1cmVzLCAoRmVhdHVyZSwgbmFtZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobmFtZSkge1xyXG5cdFx0XHRcdHRoaXNbbmFtZV0uc2V0VXNlcigpO1xyXG5cdFx0XHR9XHJcbiAgICAgICAgfSk7XHJcblx0fVxyXG5cdFxyXG5cdHNlbmRFdmVudCh2YWwsIC4uLnBhcmFtcykge1xyXG5cdFx0Xy5lYWNoKHRoaXMuX2ZlYXR1cmVzLCAoRmVhdHVyZSwgbmFtZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobmFtZSkge1xyXG5cdFx0XHRcdHRoaXNbbmFtZV0uc2VuZEV2ZW50KHZhbCwgLi4ucGFyYW1zKTtcclxuXHRcdFx0fVxyXG4gICAgICAgIH0pO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlUGF0aCgpIHtcclxuXHRcdFxyXG5cdH1cclxuXHRcclxuXHRsb2dvdXQoKSB7XHJcblx0XHRfLmVhY2godGhpcy5fZmVhdHVyZXMsIChGZWF0dXJlLCBuYW1lKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuYW1lKSB7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdHRoaXNbbmFtZV0ubG9nb3V0KCk7XHJcblx0XHRcdFx0fSBjYXRjaChlKSB7XHJcblx0XHRcdFx0XHR0aGlzLm1ldGFNYXAuZXJyb3IoZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcbiAgICAgICAgfSk7XHJcblx0fVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBJbnRlZ3JhdGlvbnM7IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL3R5cGluZ3MvcmlvdGpzL3Jpb3Rqcy5kLnRzXCIgLz5cclxuY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKVxyXG5jb25zdCBDT05TVEFOVFMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvY29uc3RhbnRzJyk7XHJcblxyXG5jbGFzcyBSb3V0ZXIge1xyXG4gICAgY29uc3RydWN0b3IobWV0YU1hcCkge1xyXG4gICAgICAgIHRoaXMuaW50ZWdyYXRpb25zID0gbWV0YU1hcC5JbnRlZ3JhdGlvbnM7XHJcbiAgICAgICAgdGhpcy51c2VyID0gbWV0YU1hcC5Vc2VyO1xyXG4gICAgICAgIHRoaXMuUGFnZUZhY3RvcnkgPSBtZXRhTWFwLlBhZ2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMuZXZlbnRlciA9IG1ldGFNYXAuRXZlbnRlcjtcclxuICAgICAgICB0aGlzLmlzSGlkZGVuID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICByaW90LnJvdXRlLnN0YXJ0KCk7XHJcbiAgICAgICAgcmlvdC5yb3V0ZSgodGFyZ2V0LCBpZCA9ICcnLCBhY3Rpb24gPSAnJywgLi4ucGFyYW1zKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGF0aCA9IHRoaXMuZ2V0UGF0aCh0YXJnZXQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50b2dnbGVNYWluKHRydWUsIHRoaXMucGF0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuUGFnZUZhY3RvcnkubmF2aWdhdGUodGhpcy5wYXRoLCBpZCwgYWN0aW9uLCAuLi5wYXJhbXMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudGVyLmRvKCdoaXN0b3J5Jywgd2luZG93LmxvY2F0aW9uLmhhc2gpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudG8odGhpcy5jdXJyZW50UGFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGN1cnJlbnRQYWdlKCkge1xyXG4gICAgICAgIGxldCBwYWdlID0gd2luZG93LmxvY2F0aW9uLmhhc2ggfHwgJ2hvbWUnO1xyXG4gICAgICAgIGlmICghdGhpcy5pc1RyYWNrZWQocGFnZSkpIHtcclxuICAgICAgICAgICAgbGV0IHBhZ2VDbnQgPSB0aGlzLnVzZXIuaGlzdG9yeS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGlmIChwYWdlQ250ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgcGFnZSA9IHRoaXMuZ2V0UGF0aCh0aGlzLnVzZXIuaGlzdG9yeVtwYWdlQ250IC0gMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjdXJyZW50UGF0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXRoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFByZXZpb3VzUGFnZShwYWdlTm8gPSAyKSB7XHJcbiAgICAgICAgbGV0IHBhZ2UgPSAnaG9tZSc7XHJcbiAgICAgICAgbGV0IHBhZ2VDbnQgPSB0aGlzLnVzZXIuaGlzdG9yeS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKHBhZ2VDbnQgPiAwKSB7XHJcbiAgICAgICAgICAgIHBhZ2UgPSB0aGlzLmdldFBhdGgodGhpcy51c2VyLmhpc3RvcnlbcGFnZUNudCAtIHBhZ2VOb10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFnZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcHJldmlvdXNQYWdlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFByZXZpb3VzUGFnZSgyKTtcclxuICAgIH1cclxuXHJcbiAgICB0cmFjayhwYXRoKSB7XHJcbiAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbnMudXBkYXRlUGF0aChwYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVNYWluKGhpZGUsIHBhdGgpIHtcclxuICAgICAgICB0aGlzLnRyYWNrKHBhdGgpO1xyXG4gICAgICAgIGlmIChoaWRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNIaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNIaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UGF0aChwYXRoKSB7XHJcbiAgICAgICAgaWYgKHBhdGgpIHtcclxuICAgICAgICAgICAgd2hpbGUgKHBhdGguc3RhcnRzV2l0aCgnIScpIHx8IHBhdGguc3RhcnRzV2l0aCgnIycpKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9XHJcblxyXG4gICAgdG8ocGF0aCkge1xyXG4gICAgICAgIHBhdGggPSB0aGlzLmdldFBhdGgocGF0aCk7XHJcbiAgICAgICAgaWYgKHBhdGgpIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVNYWluKHRydWUsIHBhdGgpO1xyXG4gICAgICAgICAgICByaW90LnJvdXRlKGAke3BhdGh9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGJhY2soKSB7XHJcbiAgICAgICAgbGV0IHBhdGggPSAnaG9tZSc7XHJcbiAgICAgICAgbGV0IHBhZ2VDbnQgPSB0aGlzLnVzZXIuaGlzdG9yeS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKHBhZ2VDbnQgPiAxICYmICh0aGlzLmN1cnJlbnRQYWdlICE9ICdteW1hcHMnIHx8IHRoaXMuY3VycmVudFBhZ2UgIT0gdGhpcy5wcmV2aW91c1BhZ2UpKSB7XHJcbiAgICAgICAgICAgIHBhdGggPSB0aGlzLnByZXZpb3VzUGFnZTtcclxuICAgICAgICAgICAgbGV0IGJhY2tObyA9IDI7XHJcbiAgICAgICAgICAgIHdoaWxlICghdGhpcy5pc1RyYWNrZWQocGF0aCkgJiYgdGhpcy51c2VyLmhpc3RvcnlbYmFja05vXSkge1xyXG4gICAgICAgICAgICAgICAgYmFja05vICs9IDE7XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gdGhpcy5nZXRQcmV2aW91c1BhZ2UoYmFja05vKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy50byhwYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZG9Ob3RUcmFjaygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2RvTm90VHJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5fZG9Ob3RUcmFjayA9IFtDT05TVEFOVFMuQUNUSU9OUy5ERUxFVEVfTUFQLCBDT05TVEFOVFMuQUNUSU9OUy5DT1BZX01BUCwgQ09OU1RBTlRTLkFDVElPTlMuTE9HT1VULCBDT05TVEFOVFMuQUNUSU9OUy5ORVdfTUFQLCBDT05TVEFOVFMuQUNUSU9OUy5GRUVEQkFDS107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9kb05vdFRyYWNrO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVHJhY2tlZChwYXRoKSB7XHJcbiAgICAgICAgbGV0IHB0aCA9IHRoaXMuZ2V0UGF0aChwYXRoKTtcclxuICAgICAgICByZXR1cm4gXy5hbnkodGhpcy5kb05vdFRyYWNrLCAocCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gIXB0aC5zdGFydHNXaXRoKHApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFJvdXRlcjsiLCJjb25zdCBBdXRoMExvY2sgPSB3aW5kb3cuQXV0aDBMb2NrOyAvL3JlcXVpcmUoJ2F1dGgwLWxvY2snKTtcbmNvbnN0IGxvY2FsZm9yYWdlID0gcmVxdWlyZSgnbG9jYWxmb3JhZ2UnKVxuY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpXG5jb25zdCBQcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKVxuXG5jbGFzcyBBdXRoMCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIG1ldGFNYXApIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMubWV0YU1hcCA9IG1ldGFNYXA7XG4gICAgICAgIHRoaXMubG9jayA9IG5ldyBBdXRoMExvY2soY29uZmlnLmFwaSwgY29uZmlnLmFwcCk7XG4gICAgICAgIHRoaXMubG9jay5vbignbG9hZGluZyByZWFkeScsICguLi5lKSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbG9naW4oKSB7XG4gICAgICAgIGlmICghdGhpcy5fbG9naW4pIHtcbiAgICAgICAgICAgIHRoaXMuX2xvZ2luID0gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzaG93TG9naW4gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9jay5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2luQWZ0ZXJTaWdudXA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGU6ICdvcGVuaWQgb2ZmbGluZV9hY2Nlc3MnXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIChlcnIsIHByb2ZpbGUsIGlkX3Rva2VuLCBjdG9rZW4sIG9wdCwgcmVmcmVzaF90b2tlbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25GYWlsKGVyciwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxmb3JhZ2Uuc2V0SXRlbSgnaWRfdG9rZW4nLCBpZF90b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxmb3JhZ2Uuc2V0SXRlbSgncHJvZmlsZScsIHByb2ZpbGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdG9rZW4gPSBwcm9maWxlLmN0b2tlbiA9IGN0b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlkX3Rva2VuID0gcHJvZmlsZS5pZF90b2tlbiA9IGlkX3Rva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZmlsZSA9IHByb2ZpbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoX3Rva2VuID0gcHJvZmlsZS5yZWZyZXNoX3Rva2VuID0gcmVmcmVzaF90b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9nZXRTZXNzaW9uID0gZnVsZmlsbChwcm9maWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2Vzc2lvbigpLnRoZW4oKHByb2ZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwocHJvZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93TG9naW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0xvZ2luKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbG9naW47XG4gICAgfVxuXG4gICAgbGlua0FjY291bnQoKSB7XG4gICAgICAgIHRoaXMubG9jay5zaG93KHtcbiAgICAgICAgICAgIGNhbGxiYWNrVVJMOiBsb2NhdGlvbi5ocmVmLnJlcGxhY2UobG9jYXRpb24uaGFzaCwgJycpLFxuICAgICAgICAgICAgZGljdDoge1xuICAgICAgICAgICAgICAgIHNpZ25pbjoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0xpbmsgd2l0aCBhbm90aGVyIGFjY291bnQnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1dGhQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NfdG9rZW46IHRoaXMuY3Rva2VuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uRmFpbChlcnIsIHJlamVjdCkge1xuICAgICAgICB0aGlzLm1ldGFNYXAuZXJyb3IoZXJyKTtcbiAgICAgICAgaWYgKHJlamVjdCkge1xuICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICB0aGlzLmxvZ291dCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0U2Vzc2lvbigpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvZmlsZSkge1xuICAgICAgICAgICAgdGhpcy5fZ2V0U2Vzc2lvbiA9IG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBmdWxmaWxsKHRoaXMucHJvZmlsZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGhpcy5fZ2V0U2Vzc2lvbikge1xuICAgICAgICAgICAgdGhpcy5fZ2V0U2Vzc2lvbiA9IG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxmb3JhZ2UuZ2V0SXRlbSgnaWRfdG9rZW4nKS50aGVuKChpZF90b2tlbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWRfdG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2suZ2V0UHJvZmlsZShpZF90b2tlbiwgKGVyciwgcHJvZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkZhaWwoZXJyLCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ2lkX3Rva2VuJywgaWRfdG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGZvcmFnZS5zZXRJdGVtKCdwcm9maWxlJywgcHJvZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaWRfdG9rZW4gPSBwcm9maWxlLmlkX3Rva2VuID0gaWRfdG9rZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZmlsZSA9IHByb2ZpbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdWxmaWxsKHByb2ZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoJ05vIHNlc3Npb24nKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRTZXNzaW9uO1xuICAgIH1cblxuICAgIGxvZ291dCgpIHtcbiAgICAgICAgbG9jYWxmb3JhZ2UucmVtb3ZlSXRlbSgnaWRfdG9rZW4nKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGZvcmFnZS5yZW1vdmVJdGVtKCdwcm9maWxlJyk7XG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcm9maWxlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY3Rva2VuID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaWRfdG9rZW4gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoX3Rva2VuID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX2xvZ2luID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX2dldFNlc3Npb24gPSBudWxsO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IEF1dGgwO1xuXG5cbiIsImNvbnN0IHV1aWQgPSByZXF1aXJlKCcuLi90b29scy91dWlkLmpzJyk7XHJcbmNvbnN0IENvbW1vbiA9IHJlcXVpcmUoJy4uL3Rvb2xzL0NvbW1vbicpO1xyXG5cclxuY2xhc3MgVXNlciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9maWxlLCBhdXRoLCBldmVudGVyLCBtZXRhRmlyZSkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5ldmVudGVyID0gZXZlbnRlcjtcclxuICAgICAgICB0aGlzLm1ldGFGaXJlID0gbWV0YUZpcmU7XHJcbiAgICAgICAgdGhpcy51c2VyS2V5ID0gdXVpZCgpO1xyXG4gICAgICAgIHRoaXMub25SZWFkeSgpO1xyXG4gICAgICAgIHRoaXMubWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uL01ldGFNYXAnKTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlYWR5KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fb25SZWFkeSkge1xyXG4gICAgICAgICAgICBsZXQgdHJhY2tIaXN0b3J5ID0gXy5vbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRlci5ldmVyeSgnaGlzdG9yeScsIChwYWdlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlzdG9yeS5sZW5ndGggPT0gMCB8fCBwYWdlICE9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gocGFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWV0YUZpcmUuc2V0RGF0YSh0aGlzLmhpc3RvcnksIGB1c2Vycy8ke3RoaXMuYXV0aC51aWR9L2hpc3RvcnlgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX29uUmVhZHkgPSBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1ldGFGaXJlLm9uKGB1c2Vycy8ke3RoaXMuYXV0aC51aWR9YCwgKHVzZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1c2VyLmhpc3RvcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyLmhpc3RvcnkgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZmlsZSA9IHVzZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja0hpc3RvcnkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhTWFwLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwodXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9vblJlYWR5O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBfaWRlbnRpdHkoKSB7XHJcbiAgICAgICAgbGV0IHJldCA9IHt9O1xyXG4gICAgICAgIGlmICh0aGlzLnByb2ZpbGUgJiYgdGhpcy5wcm9maWxlLmlkZW50aXR5KSB7XHJcbiAgICAgICAgICAgIHJldCA9IHRoaXMucHJvZmlsZS5pZGVudGl0eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY3JlYXRlZE9uKCkge1xyXG4gICAgICAgIGlmIChudWxsID09IHRoaXMuX2NyZWF0ZWRPbikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faWRlbnRpdHkuY3JlYXRlZF9hdCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGR0ID0gbmV3IERhdGUodGhpcy5faWRlbnRpdHkuY3JlYXRlZF9hdCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jcmVhdGVkT24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogZHQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGlja3M6IENvbW1vbi5nZXRUaWNrc0Zyb21EYXRlKGR0KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVkT24gfHwgeyBkYXRlOiBudWxsLCB0aWNrczogbnVsbCB9O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkaXNwbGF5TmFtZSgpIHtcclxuICAgICAgICBsZXQgcmV0ID0gdGhpcy5mdWxsTmFtZTtcclxuICAgICAgICBpZiAocmV0KSB7XHJcbiAgICAgICAgICAgIHJldCA9IHJldC5zcGxpdCgnICcpWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXJldCAmJiB0aGlzLl9pZGVudGl0eS5uaWNrbmFtZSkge1xyXG4gICAgICAgICAgICByZXQgPSB0aGlzLl9pZGVudGl0eS5uaWNrbmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZ1bGxOYW1lKCkge1xyXG4gICAgICAgIGxldCByZXQgPSAnJztcclxuICAgICAgICBpZiAodGhpcy5faWRlbnRpdHkubmFtZSkge1xyXG4gICAgICAgICAgICByZXQgPSB0aGlzLl9pZGVudGl0eS5uYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBlbWFpbCgpIHtcclxuICAgICAgICBsZXQgcmV0ID0gJyc7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lkZW50aXR5LmVtYWlsKSB7XHJcbiAgICAgICAgICAgIHJldCA9IHRoaXMuX2lkZW50aXR5LmVtYWlsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwaWN0dXJlKCkge1xyXG4gICAgICAgIGxldCByZXQgPSAnJztcclxuICAgICAgICBpZiAodGhpcy5faWRlbnRpdHkucGljdHVyZSkge1xyXG4gICAgICAgICAgICByZXQgPSB0aGlzLl9pZGVudGl0eS5waWN0dXJlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB1c2VySWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aC51aWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzQWRtaW4oKSB7XHJcbiAgICAgICAgbGV0IHJldCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLl9pZGVudGl0eS5yb2xlcykge1xyXG4gICAgICAgICAgICByZXQgPSB0aGlzLl9pZGVudGl0eS5yb2xlcy5pbmRleE9mKCdhZG1pbicpICE9PSAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaGlzdG9yeSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9maWxlLmhpc3RvcnkgfHwgW107XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVVzZXJFZGl0b3JPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yX29wdGlvbnM6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFVzZXI7IiwiY29uc3QgU2FuZGJhbmtFZGl0b3IgPSByZXF1aXJlKCcuL3NiRWRpdG9yJyk7XHJcbi8vIGZ1bmN0aW9ucyBoYW5kbGluZyBhbmFseXRpY3NcclxuLy8gYW5hbHl0aWNzIGRpc3BsYXkgaXMgaW4gdmlld3MvbWFwcy9fYW5hbHl0aWNzX3RhYl9tYXAgYW5kIF9hbmFseXRpY3NfdGFiX3RoaW5nXHJcblNhbmRiYW5rRWRpdG9yLkFuYWx5dGljcyA9IGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xyXG4gICAgICAgICAgICBpZiAobWFwLnVpLmN1cnJlbnRUYWJJcyhtYXAudWkuVEFCX0lEX0FOQUxZVElDU19USElORykpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlQ29udGV4dHVhbEFuYWx5dGljcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBhIHRhYiBpcyBvcGVuZWQgb3IgY2xvc2VkXHJcbiAgICB0aGlzLmN1cnJlbnRUYWJDaGFuZ2VkID0gZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKG5ld1ZhbHVlID09IG1hcC51aS5UQUJfSURfQU5BTFlUSUNTX1RISU5HKSB7IC8vIG9wZW5pbmcgdGhpbmcgYW5hbHl0aWNzIHRhYlxyXG4gICAgICAgICAgICBzZWxmLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoaXMgZ2V0cyBwb3B1bGF0ZWQgYnkgbWFwLmxvYWRNYXBFeHRyYURhdGEsIG9uIGxvYWQgYW5kIGFmdGVyIGV2ZXJ5IGF1dG9zYXZlXHJcbiAgICB0aGlzLm1hcEFuYWx5dGljcyA9IG51bGw7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIGNvbnRleHR1YWwgYW5hbHl0aWNzIC0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyAtIHRoZXNlIGFyZSBhbGwgY2FsY3VsYXRlZCBoZXJlLCB1bmxpa2UgbWFwIGFuYWx5dGljcyB3aGljaCBhcmUgY2FsY3VsYXRlZCBvbiB0aGUgc2VydmVyIGFuZCBjb25uZWN0ZWQgd2l0aCBiYWRnZXMgYW5kIHBvaW50c1xyXG5cclxuICAgIC8vIHRoaXMgZ2V0cyBjYWxjdWxhdGVkIGJ5IHVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3NcclxuICAgIHRoaXMuY29udGV4dHVhbEFuYWx5dGljcyA9IHtcclxuICAgICAgICB0aGluZ05hbWU6ICcnLFxyXG5cclxuICAgICAgICAvLyB0aGluZyBzdHVmZlxyXG4gICAgICAgIGRpc3RpbmN0RnJvbTogMCxcclxuICAgICAgICBpbnRlbnRpb25hbGx5RGlzdGluY3RGcm9tOiAwLFxyXG4gICAgICAgIHBhcnRPZjogMCxcclxuICAgICAgICBpbmNsdWRlc1BhcnRzOiAwLFxyXG4gICAgICAgIHJlbGF0ZWRUbzogMCxcclxuICAgICAgICBpc1JlbGF0aW9uc2hpcDogMCxcclxuICAgICAgICBsb29raW5nQXQ6IDAsXHJcbiAgICAgICAgbG9va2VkQXRGcm9tOiAwLFxyXG5cclxuICAgICAgICAvLyBSIHN0dWZmXHJcbiAgICAgICAgckZyb21UaGluZ05hbWU6ICcnLFxyXG4gICAgICAgIHJUb1RoaW5nTmFtZTogJycsXHJcbiAgICAgICAgaXNSVGhpbmc6IGZhbHNlLFxyXG4gICAgICAgIGlzUlN5c3RlbTogZmFsc2UsXHJcbiAgICAgICAgaXNSUG9pbnQ6IGZhbHNlLFxyXG4gICAgICAgIGlzUlZpZXc6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudXBkYXRlQ29udGV4dHVhbEFuYWx5dGljcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd1cGRhdGVDb250ZXh0dWFsQW5hbHl0aWNzJyk7XHJcbiAgICAgICAgaWYgKCFtYXAudWkuY3VycmVudFRhYklzKG1hcC51aS5UQUJfSURfQU5BTFlUSUNTX1RISU5HKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZGlhZ3JhbTtcclxuICAgICAgICB2YXIgcGFydCA9IGRpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCk7XHJcbiAgICAgICAgdmFyIGEgPSBzZWxmLmNvbnRleHR1YWxBbmFseXRpY3M7XHJcblxyXG4gICAgICAgIGlmIChwYXJ0ICYmIHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcgPSBwYXJ0O1xyXG5cclxuICAgICAgICAgICAgLy8gdGhpbmcgbmFtZVxyXG4gICAgICAgICAgICBhLnRoaW5nTmFtZSA9IHRoaW5nLmRhdGEudGV4dDtcclxuXHJcbiAgICAgICAgICAgIC8vIGRpc3RpbmN0IGZyb21cclxuICAgICAgICAgICAgYS5kaXN0aW5jdEZyb20gPSBfLndoZXJlKGRpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheSwge2lzR3JvdXA6IHRydWV9KS5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICAgICAgLy8gcGFydCBvZlxyXG4gICAgICAgICAgICB2YXIgbGV2ZWwgPSAwO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gdGhpbmc7XHJcbiAgICAgICAgICAgIHdoaWxlICh0aGluZzIgPSBnZXRDb250YWluaW5nR3JvdXAodGhpbmcyKSkge1xyXG4gICAgICAgICAgICAgICAgbGV2ZWwrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhLnBhcnRPZiA9IGxldmVsO1xyXG5cclxuICAgICAgICAgICAgLy8gaW5jbHVkZXMgcGFydHNcclxuICAgICAgICAgICAgYS5pbmNsdWRlc1BhcnRzID0gY291bnRHcm91cHModGhpbmcpO1xyXG5cclxuICAgICAgICAgICAgLy8gcmVsYXRlZCB0byAvIGxvb2tpbmcgYXQgLyBsb29rZWQgYXQgZnJvbSAvIGludGVudGlvbmFsbHkgZGlzdGluY3QgZnJvbVxyXG4gICAgICAgICAgICBhLnJlbGF0ZWRUbyA9IDA7XHJcbiAgICAgICAgICAgIGEubG9va2luZ0F0ID0gMDtcclxuICAgICAgICAgICAgYS5sb29rZWRBdEZyb20gPSAwO1xyXG4gICAgICAgICAgICBhLmludGVudGlvbmFsbHlEaXN0aW5jdEZyb20gPSAwO1xyXG4gICAgICAgICAgICB2YXIgbGlua3MgPSB0aGluZy5saW5rc0Nvbm5lY3RlZDtcclxuICAgICAgICAgICAgdmFyIHJDb25uZWN0ZWRUaGluZ0tleXMgPSBbXTtcclxuICAgICAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIC8vIFAgbGlua1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGluay5mcm9tTm9kZSA9PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhLmxvb2tpbmdBdCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsaW5rLnRvTm9kZSA9PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhLmxvb2tlZEF0RnJvbSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEQgbGlua1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdEJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGEuaW50ZW50aW9uYWxseURpc3RpbmN0RnJvbSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gUiBsaW5rXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghbGluay5kYXRhLmNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJhY2sga2V5cyBvZiByZWxhdGVkIHRoaW5ncyBzbyB3ZSBkb24ndCBjb3VudCB0aGVtIG11bHRpcGxlIHRpbWVzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmsuZnJvbU5vZGUgPT0gdGhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgckNvbm5lY3RlZFRoaW5nS2V5cy5wdXNoKGxpbmsudG9Ob2RlLmRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobGluay50b05vZGUgPT0gdGhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgckNvbm5lY3RlZFRoaW5nS2V5cy5wdXNoKGxpbmsuZnJvbU5vZGUuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhLnJlbGF0ZWRUbyA9IF8udW5pcShyQ29ubmVjdGVkVGhpbmdLZXlzKS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAvLyBpc1JlbGF0aW9uc2hpcFxyXG4gICAgICAgICAgICBhLmlzUmVsYXRpb25zaGlwID0gdGhpbmcuaXNMaW5rTGFiZWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBhcnQgJiYgcGFydCBpbnN0YW5jZW9mIGdvLkxpbmspIHtcclxuICAgICAgICAgICAgdmFyIHJlbCA9IHBhcnQ7XHJcblxyXG4gICAgICAgICAgICAvLyB0aGluZyBuYW1lc1xyXG4gICAgICAgICAgICBhLnJGcm9tVGhpbmdOYW1lID0gcmVsLmZyb21Ob2RlLmRhdGEudGV4dDtcclxuICAgICAgICAgICAgYS5yVG9UaGluZ05hbWUgPSByZWwudG9Ob2RlLmRhdGEudGV4dDtcclxuXHJcbiAgICAgICAgICAgIC8vIGlzIFIgdGhpbmdcclxuICAgICAgICAgICAgYS5pc1JUaGluZyA9IHJlbC5pc0xhYmVsZWRMaW5rO1xyXG5cclxuICAgICAgICAgICAgLy8gaXMgUiBzeXN0ZW1cclxuICAgICAgICAgICAgYS5pc1JTeXN0ZW0gPSByZWwuaXNMYWJlbGVkTGluayAmJiBjb3VudEdyb3VwcyhyZWwubGFiZWxOb2Rlcy5maXJzdCgpKSA+IDA7XHJcblxyXG4gICAgICAgICAgICAvLyBpcyBSIHBvaW50XHJcbiAgICAgICAgICAgIGEuaXNSUG9pbnQgPSByZWwuaXNMYWJlbGVkTGluayAmJiBpc1BvaW50KHJlbC5sYWJlbE5vZGVzLmZpcnN0KCkpO1xyXG5cclxuICAgICAgICAgICAgLy8gaXMgUiB2aWV3XHJcbiAgICAgICAgICAgIGEuaXNSVmlldyA9IHJlbC5pc0xhYmVsZWRMaW5rICYmIGlzVmlldyhyZWwubGFiZWxOb2Rlcy5maXJzdCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgZWl0aGVyIHRoZSBjb250YWluaW5nR3JvdXAgb3IgdGhlIHJUaGluZ0NvbnRhaW5pbmdHcm91cCwgd2hpY2hldmVyIGlzIG5vbi1udWxsXHJcbiAgICBmdW5jdGlvbiBnZXRDb250YWluaW5nR3JvdXAoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gZ3JvdXAuY29udGFpbmluZ0dyb3VwIHx8IGdldFJUaGluZ0NvbnRhaW5pbmdHcm91cChncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgZ3JvdXAgaXMgYW4gUi10aGluZyBiZXR3ZWVuIHR3byBzaWJsaW5nIHBhcnRzIG9mIGEgd2hvbGUsIHJldHVybnMgdGhlIHdob2xlOyBlbHNlIHJldHVybnMgbnVsbFxyXG4gICAgZnVuY3Rpb24gZ2V0UlRoaW5nQ29udGFpbmluZ0dyb3VwKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKGdyb3VwLmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgIHZhciBmcm9tUGFyZW50ID0gZ3JvdXAubGFiZWxlZExpbmsuZnJvbU5vZGUuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB2YXIgdG9QYXJlbnQgPSBncm91cC5sYWJlbGVkTGluay50b05vZGUuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICBpZiAoZnJvbVBhcmVudCAhPT0gbnVsbCAmJiB0b1BhcmVudCAhPT0gbnVsbCAmJiBmcm9tUGFyZW50ID09IHRvUGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbVBhcmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjb3VudHMgdGhlIG1lbWJlciBwYXJ0cyBvZiB0aGUgZ3JvdXAgdGhhdCBhcmUgZ3JvdXBzLCByZWN1cnNpdmVseSAobm90IGluY2x1ZGluZyB0aGUgZ3JvdXAgaXRzZWxmKVxyXG4gICAgZnVuY3Rpb24gY291bnRHcm91cHMoZ3JvdXApIHtcclxuICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgIHZhciBpdCA9IGdldE1lbWJlckdyb3Vwcyhncm91cCkuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBjb3VudCArPSAxICsgY291bnRHcm91cHMocGFydCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgY29sbGVjdGlvbiBvZiBncm91cHMgdGhhdCBhcmUgZWl0aGVyIGEgbWVtYmVyUGFydCBvZiB0aGlzIGdyb3VwLCBvciBhbiBSLXRoaW5nIGJldHdlZW4gc2libGluZyBtZW1iZXJQYXJ0c1xyXG4gICAgZnVuY3Rpb24gZ2V0TWVtYmVyR3JvdXBzKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLm1lbWJlclBhcnRzO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocGFydCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnRoaW5nID0gZ2V0UlRoaW5nVG9TaWJsaW5nKHBhcnQpOyAvLyBOQjogc2hvdWxkIG5vdCBnZXQgZHVwbGljYXRpb24gaGVyZSwgYXMgdGhpcyBjaGVja3MgZm9yIHItdGhpbmdzIGluIG9ubHkgb25lIGRpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKHJ0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcnMuYWRkKHJ0aGluZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lbWJlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgdGhlIGdyb3VwIGlzIGxpbmtlZCBieSBhbiBSLXRoaW5nIHRvIGEgc2libGluZyAod2l0aCB0aGUgZ3JvdXAgYXMgdGhlIGZyb21Ob2RlKSwgcmV0dXJucyB0aGUgUi10aGluZzsgZWxzZSByZXR1cm5zIG51bGxcclxuICAgIGZ1bmN0aW9uIGdldFJUaGluZ1RvU2libGluZyhncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5sYWJlbE5vZGVzLmNvdW50ID4gMCAmJiBsaW5rLnRvTm9kZS5jb250YWluaW5nR3JvdXAgPT0gZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGluay5sYWJlbE5vZGVzLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNQb2ludChncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzVmlldyhncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc0ludG8oKTtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn07IiwiY29uc3QgU2FuZGJhbmtFZGl0b3IgPSByZXF1aXJlKCcuL3NiRWRpdG9yJyk7XHJcblxyXG4vLyBmdW5jdGlvbnMgaGFuZGxpbmcgYXR0YWNobWVudHNcclxuXHJcblNhbmRiYW5rRWRpdG9yLkF0dGFjaG1lbnRzID0gZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMuc2VsZWN0ZWRUaGluZyA9IG51bGw7XHJcbiAgICB0aGlzLmF0dGFjaG1lbnRzID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmF0dGFjaG1lbnRUeXBlcyA9IFtcclxuICAgICAgICB7bmFtZTogJ25vdGUnLCBsYWJlbFNpbmd1bGFyOiAnTm90ZScsIGxhYmVsUGx1cmFsOiAnTm90ZXMnfSwgXHJcbiAgICAgICAge25hbWU6ICdsaW5rJywgbGFiZWxTaW5ndWxhcjogJ1dlYiBMaW5rJywgbGFiZWxQbHVyYWw6ICdXZWIgTGlua3MnfSwgXHJcbiAgICAgICAge25hbWU6ICd0YXNrJywgbGFiZWxTaW5ndWxhcjogJ1Rhc2snLCBsYWJlbFBsdXJhbDogJ1Rhc2tzJ30sIFxyXG4gICAgICAgIHtuYW1lOiAnbWFwJywgbGFiZWxTaW5ndWxhcjogJ0xpbmtlZCBNZXRhTWFwJywgbGFiZWxQbHVyYWw6ICdMaW5rZWQgTWV0YU1hcHMnfVxyXG4vLyAgICAgICAge25hbWU6ICdkb2MnLCBsYWJlbFNpbmd1bGFyOiAnRG9jdW1lbnQnLCBsYWJlbFBsdXJhbDogJ0RvY3VtZW50cyd9ICAvLyBsaW1pdCBvdmVyYWxsIHN0b3JhZ2Ugc3BhY2UgT1Igc2ltcGxlciBydWxlcz9cclxuICAgICAgICAvLyBsaW1pdCBmaWxlIHR5cGVzIC0gcGRmLCBqcGcsIGdpZiwgcG5nLCBvZmZpY2U/Li4uICB3aGl0ZWxpc3QgdnMuIGJsYWNrbGlzdFxyXG4gICAgXTtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaGFuZGxlRGlhZ3JhbUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIGlmIChldmVudE5hbWUgPT0gJ0NoYW5nZWRTZWxlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXAudWkuY3VycmVudFRhYklzKG1hcC51aS5UQUJfSURfQVRUQUNITUVOVFMpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnN0b3BFZGl0aW5nQWxsKCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNhdmVBdHRhY2htZW50cygpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5sb2FkU2VsZWN0ZWRUaGluZ0F0dGFjaG1lbnRzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICBpZiAobmV3VmFsdWUgPT0gbWFwLnVpLlRBQl9JRF9BVFRBQ0hNRU5UUykgeyAvLyBvcGVuaW5nIHRhYlxyXG4gICAgICAgICAgICBzZWxmLmxvYWRTZWxlY3RlZFRoaW5nQXR0YWNobWVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9sZFZhbHVlID09IG1hcC51aS5UQUJfSURfQVRUQUNITUVOVFMpIHsgLy8gY2xvc2luZyB0YWJcclxuICAgICAgICAgICAgc2VsZi5zYXZlQXR0YWNobWVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubG9hZFNlbGVjdGVkVGhpbmdBdHRhY2htZW50cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXAudGhpbmdTZWxlY3RlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGhpbmcgPSBtYXAuZ2V0VW5pcXVlVGhpbmdTZWxlY3RlZCgpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cyA9IHNlbGYuc2VsZWN0ZWRUaGluZy5kYXRhLmF0dGFjaG1lbnRzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuYXR0YWNobWVudHMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzZXQgYWxsIGF0dGFjaG1lbnRzIHRvIGVkaXRpbmcgPSBmYWxzZVxyXG4gICAgdGhpcy5zdG9wRWRpdGluZ0FsbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmF0dGFjaG1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBfLmVhY2goc2VsZi5hdHRhY2htZW50cywgZnVuY3Rpb24gKGF0dCkgeyBhdHQuZWRpdGluZyA9IGZhbHNlOyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmVkaXRpbmdBbkl0ZW0gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5hdHRhY2htZW50cyAmJiBfLmZpbmRXaGVyZShzZWxmLmF0dGFjaG1lbnRzLCB7ZWRpdGluZzogdHJ1ZX0pICE9PSB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNldCBhbGwgb3RoZXIgYXR0YWNobWVudHMgdG8gZWRpdGluZyA9IGZhbHNlXHJcbiAgICB0aGlzLnN0YXJ0RWRpdGluZyA9IGZ1bmN0aW9uKGF0dGFjaG1lbnQpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzZWxmLnN0b3BFZGl0aW5nQWxsKCk7XHJcbiAgICAgICAgICAgIGF0dGFjaG1lbnQuZWRpdGluZyA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2F2ZUl0ZW0gPSBmdW5jdGlvbihhdHRhY2htZW50KSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgYXR0YWNobWVudC5lZGl0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNlbGYuc2F2ZUF0dGFjaG1lbnRzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2F2ZUF0dGFjaG1lbnRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc2F2ZUF0dGFjaG1lbnRzLCBzZWxlY3RlZDogJyArIHNlbGYuc2VsZWN0ZWRUaGluZyk7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkVGhpbmcpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzZWxmLnNlbGVjdGVkVGhpbmcuZGF0YSwgJ2F0dGFjaG1lbnRzJywgc2VsZi5hdHRhY2htZW50cyk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtYXAuYXV0b3NhdmUuc2F2ZU5vdygnZWRpdF9hdHRhY2htZW50cycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxpc3RBdHRhY2htZW50cyA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgdmFyIGF0dHMgPSBfLndoZXJlKHNlbGYuYXR0YWNobWVudHMsIHt0eXBlOiB0eXBlfSk7XHJcbiAgICAgICAgcmV0dXJuIGF0dHM7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYWRkQXR0YWNobWVudCA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgdmFyIGl0ZW0gPSB7IHR5cGU6IHR5cGUsIGVkaXRpbmc6IHRydWUgfTtcclxuICAgICAgICBpZiAodHlwZSA9PSAnbm90ZScpIHtcclxuICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgdGV4dDogJycsIHVybDogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICdsaW5rJykge1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyBsYWJlbDogJycsIHVybDogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICd0YXNrJykge1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyB0ZXh0OiAnJyB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gJ2RvYycpIHtcclxuICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgbmFtZTogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICdtYXAnKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMucHVzaChfLmV4dGVuZChpdGVtLCB7IG1hcFJlZjogeyBpZDogMCwgbmFtZTogJycgIH0gfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1ZhbGlkID0gZnVuY3Rpb24oYXR0YWNobWVudCkge1xyXG4gICAgICAgIGlmIChhdHRhY2htZW50LnR5cGUgPT0gJ2xpbmsnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LmxhYmVsICYmIGF0dGFjaG1lbnQudXJsICYmIGF0dGFjaG1lbnQubGFiZWwudHJpbSgpICE9PSAnJyAmJiBhdHRhY2htZW50LnVybC50cmltKCkgIT09ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhdHRhY2htZW50LnR5cGUgPT0gJ25vdGUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LnRleHQgJiYgYXR0YWNobWVudC50ZXh0LnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PSAndGFzaycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0dGFjaG1lbnQudGV4dCAmJiBhdHRhY2htZW50LnRleHQudHJpbSgpICE9PSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYXR0YWNobWVudC50eXBlID09ICdkb2MnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50Lm5hbWUgJiYgYXR0YWNobWVudC5uYW1lLnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PSAnbWFwJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYXR0YWNobWVudC5tYXBSZWYgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IG51bGwgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGVsZXRlQXR0YWNobWVudCA9IGZ1bmN0aW9uIChhdHQpIHtcclxuICAgICAgICB2YXIgdHlwZUxhYmVsID0gXy5maW5kV2hlcmUoc2VsZi5hdHRhY2htZW50VHlwZXMsIHsgbmFtZTogYXR0LnR5cGUgfSkubGFiZWxTaW5ndWxhcjtcclxuICAgICAgICBpZiAoY29uZmlybSAoJ0RlbGV0ZSAnICsgdHlwZUxhYmVsICsgJz8nKSkge1xyXG4gICAgICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZihzZWxmLmF0dGFjaG1lbnRzLCBhdHQpO1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnNwbGljZShpLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHF1ZXJ5IHNlcnZlciBmb3IgbWFwcyBjb250YWluaW5nIHRoZSBnaXZlbiB0ZXh0IGluIHRoZSBtYXAgbmFtZVxyXG4gICAgdGhpcy5nZXRPdGhlck1hcHMgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICAvLyBOQjogdGhpcyBVUkwgaXMgY29uc3RydWN0ZWQgdG8gbWF0Y2ggdGhlIG9uZSBnZW5lcmF0ZWQgYnkgdGhlIHNlYXJjaCBmb3JtIG9uIHRoZSBtYXBzIHBhZ2UuLi5cclxuICAgICAgICB2YXIgdXJsID0gJy9tYXBzL3Zpc2libGVfbWFwcy5qc29uP3V0Zjg9JUUyJTlDJTkzJnElNUJuYW1lX2NvbnQlNUQ9JyArIHZpZXdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5tYXBzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm90aGVyTWFwU2VsZWN0ZWQgPSBmdW5jdGlvbih2aWV3VmFsdWUsIG1vZGVsVmFsdWUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdvdGhlck1hcFNlbGVjdGVkLCB2aWV3VmFsdWU6ICcgKyB2aWV3VmFsdWUuaWQgKyAnLCBtb2RlbFZhbHVlOiAnICsgbW9kZWxWYWx1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZm9ybWF0T3RoZXJNYXAgPSBmdW5jdGlvbiAobW9kZWwpIHtcclxuICAgICAgICByZXR1cm4gKG1vZGVsID8gbW9kZWwubmFtZSA6ICcnKTtcclxuICAgIH07XHJcblxyXG59OyIsImNvbnN0IFNhbmRiYW5rRWRpdG9yID0gcmVxdWlyZSgnLi9zYkVkaXRvcicpO1xyXG4vLyBmdW5jdGlvbnMgaGFuZGxpbmcgZWRpdG9yIGF1dG9zYXZlIGZ1bmN0aW9uXHJcblxyXG5TYW5kYmFua0VkaXRvci5BdXRvc2F2ZSA9IGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vTWV0YU1hcCcpO1xyXG5cclxuICAgIHZhciBjaGFuZ2VUeXBlcyA9IFtdO1xyXG5cclxuICAgIHRoaXMuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBkbyBhIHNhdmUgbmV4dCB0aW1lIHRoZSBzZXQgaW50ZXJ2YWwgcGFzc2VzIHdpdGggbm8gc2F2ZSByZXF1ZXN0c1xyXG4gICAgdGhpcy5zYXZlID0gZnVuY3Rpb24oY2hhbmdlVHlwZSkge1xyXG4gICAgICAgIGNoYW5nZVR5cGVzLnB1c2goY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgZGVsYXllZEF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRvIGEgc2F2ZSByaWdodCBub3dcclxuICAgIHRoaXMuc2F2ZU5vdyA9IGZ1bmN0aW9uKGNoYW5nZVR5cGUpIHtcclxuICAgICAgICBjaGFuZ2VUeXBlcy5wdXNoKGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIGF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRvbid0IGxldCBhdXRvc2F2ZSBiZSB0cmlnZ2VyZWQgbW9yZSB0aGFuIGV2ZXJ5IE4gbWlsbGlzZWNvbmRzLi4uXHJcbiAgICB2YXIgZGVsYXllZEF1dG9zYXZlID0gXy5kZWJvdW5jZShhdXRvc2F2ZSwgMjAwMCk7XHJcblxyXG4gICAgLy8gY29tcGlsZSB0aGUgY3VycmVudCBsaXN0IG9mIGNoYW5nZSB0eXBlIGRlc2NyaXB0aW9ucywgcHJvY2VzcyB0aGVtIFxyXG4gICAgLy8gdG8gcmVtb3ZlIGR1cGxpY2F0ZXMsIGFuZCBzYXZlIHRoZSBjdXJyZW50IGRhdGFcclxuICAgIGZ1bmN0aW9uIGF1dG9zYXZlKCkge1xyXG4gICAgICAgIC8vIHN0b3AgcmlnaHQgaGVyZSBpZiB3ZSdyZSBpbiB0aGUgc2FuZGJveCBhbmQvb3Igd2UgZG9uJ3QgaGF2ZSBlZGl0IHBlcm1pc3Npb25zXHJcbiAgICAgICAgaWYgKCRzY29wZS5zYW5kYm94IHx8ICEkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWNoYW5nZVR5cGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdhdXRvc2F2ZTogbm90aGluZyB0byBzYXZlIScpOyAvLyBzaG91bGRuJ3QgaGFwcGVuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRlLWR1cGUgdGhlIGxpc3Qgb2YgY2hhbmdlIHR5cGVzXHJcbiAgICAgICAgdmFyIGNoYW5nZUxpc3QgPSBfLnVuaXEoY2hhbmdlVHlwZXMpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NoYW5nZUxpc3Q6ICcgKyBjaGFuZ2VMaXN0KTtcclxuICAgICAgICAvLyBkb24ndCBzaG93IG1vdmUgZXZlbnRzIHVubGVzcyB0aGF0J3MgYWxsIHdlIGhhdmVcclxuICAgICAgICB2YXIgY2hhbmdlTGlzdFdpdGhvdXRNb3ZlcyA9IF8ud2l0aG91dChjaGFuZ2VMaXN0LCAnbW92ZScpO1xyXG4gICAgICAgIGlmIChjaGFuZ2VMaXN0V2l0aG91dE1vdmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY2hhbmdlTGlzdCA9IGNoYW5nZUxpc3RXaXRob3V0TW92ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NoYW5nZUxpc3Qgd2l0aG91dCBtb3ZlczogJyArIGNoYW5nZUxpc3QpO1xyXG4gICAgICAgIC8vIGdldCBkZXNjcmlwdGlvbnNcclxuICAgICAgICB2YXIgZGVzY3JpcHRpb25MaXN0ID0gXy5tYXAoY2hhbmdlTGlzdCwgZnVuY3Rpb24oY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF8ucmVzdWx0KGNoYW5nZURlc2NyaXB0aW9ucywgY3QpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdhdXRvc2F2ZSwgY2hhbmdlTGlzdDogJyArIGNoYW5nZUxpc3QgKyAnLCBkZXNjcmlwdGlvbkxpc3Q6ICcgKyBkZXNjcmlwdGlvbkxpc3QpO1xyXG4gICAgICAgIHZhciBwb3N0RGF0YSA9IHtcclxuICAgICAgICAgICAgZGF0YTogSlNPTi5wYXJzZShtYXAuZGlhZ3JhbS5tb2RlbC50b0pzb24oKSksXHJcbiAgICAgICAgICAgIHN0YXRlX2RhdGE6IG1hcC51aS5nZXRTdGF0ZURhdGEoKSxcclxuICAgICAgICAgICAgZWRpdG9yX29wdGlvbnM6IG1hcC51aS5nZXRNYXBFZGl0b3JPcHRpb25zKCksXHJcbiAgICAgICAgICAgIHByZXNlbnRlcl9zbGlkZXM6IG1hcC5wcmVzZW50ZXIuZ2V0U2xpZGVDb3VudCgpLFxyXG4gICAgICAgICAgICBhY3Rpdml0eV9zbGlkZXM6IG1hcC5wcmVzZW50ZXIuZ2V0QWN0aXZpdHlTbGlkZUNvdW50KCksXHJcbiAgICAgICAgICAgIGNoYW5nZV90eXBlOiBjaGFuZ2VMaXN0LmpvaW4oJzsnKSxcclxuICAgICAgICAgICAgY2hhbmdlX2Rlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbkxpc3Quam9pbignOyAnKSxcclxuICAgICAgICAgICAgdGh1bWJuYWlsX3BuZzogbWFwLnByZXNlbnRlci5nZXRNYXBUaHVtYm5haWwoKSxcclxuICAgICAgICAgICAgY2hhbmdlZF9ieTogTWV0YU1hcC5Vc2VyLnVzZXJLZXlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciB1cmwgPSAkc2NvcGUubWFwVXJsICsgJy5qc29uJztcclxuXHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZUVkaXRTdGF0dXMoJHNjb3BlLlNBVklORyk7XHJcblxyXG4gICAgICAgIGNoYW5nZVR5cGVzID0gW107XHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZUVkaXRTdGF0dXMoJHNjb3BlLlNBVkVfT0spO1xyXG4gICAgICAgIC8vIGxvYWQgcmV0dXJuZWQgZGF0YSBmb3IgYW5hbHl0aWNzLCBwb2ludHMsIGJhZGdlcywgdmVyc2lvbnNcclxuICAgICAgICAvLyAkc2NvcGUubWFwLmxvYWRNYXBFeHRyYURhdGEocmVzcG9uc2UuZGF0YS5tYXApO1xyXG4gICAgICAgIE1ldGFNYXAuTWV0YUZpcmUuc2V0RGF0YUluVHJhbnNhY3Rpb24ocG9zdERhdGEsIGBtYXBzL2RhdGEvJHskc2NvcGUubWFwSWR9YCk7XHJcbiAgICAgICAgTWV0YU1hcC5JbnRlZ3JhdGlvbnMuc2VuZEV2ZW50KCRzY29wZS5tYXBJZCwgJ2V2ZW50JywgJ2F1dG9zYXZlJywgJ2F1dG9zYXZlJylcclxuICAgIH1cclxuXHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLSBoYW5kbGUgbW9kZWwgY2hhbmdlcyAtIHRyaWdnZXIgYXV0b3NhdmUgLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdmFyIGNoYW5nZURlc2NyaXB0aW9ucyA9IHtcclxuICAgICAgICBtb3ZlOiAnTW92ZWQgT2JqZWN0cycsXHJcbiAgICAgICAgdW5kb19yZWRvOiAnUGVyZm9ybWVkIFVuZG8vUmVkbycsXHJcbiAgICAgICAgZWRpdF90aXRsZTogJ0VkaXRlZCBNZXRhTWFwIFRpdGxlJyxcclxuICAgICAgICBlZGl0X2Rlc2NyaXB0aW9uOiAnRWRpdGVkIE1ldGFNYXAgRGVzY3JpcHRpb24nLFxyXG4gICAgICAgIGVkaXRfdXNlcnRhZ3M6ICdFZGl0IE1ldGFNYXAgVGFncycsXHJcbiAgICAgICAgZWRpdF9kOiAnRWRpdGVkIERpc3RpbmN0aW9ucycsXHJcbiAgICAgICAgZWRpdF9zOiAnRWRpdGVkIFN5c3RlbXMnLFxyXG4gICAgICAgIGVkaXRfcjogJ0VkaXRlZCBSZWxhdGlvbnNoaXBzJyxcclxuICAgICAgICBlZGl0X3A6ICdFZGl0ZWQgUGVyc3BlY3RpdmVzJyxcclxuICAgICAgICBhZGRfdGhpbmc6ICdBZGRlZCBJZGVhcycsXHJcbiAgICAgICAgcmVuYW1lX3RoaW5nOiAnUmVuYW1lZCBJZGVhcycsXHJcbiAgICAgICAgZGVsZXRlX3RoaW5nOiAnRGVsZXRlZCBJZGVhcycsXHJcbiAgICAgICAgZWRpdF9hdHRhY2htZW50czogJ0VkaXRlZCBBdHRhY2htZW50cycsXHJcbiAgICAgICAgZWRpdF9wcmVzZW50ZXI6ICdFZGl0ZWQgUHJlc2VudGVyIFNsaWRlcycsXHJcbiAgICAgICAgZWRpdF9nZW5lcmF0b3I6ICdJbnNlcnRlZCBJZGVhcyBmcm9tIFRoaW5rUXVlcnknLFxyXG4gICAgICAgIGVkaXRfc3RhbmRhcmRzOiAnRWRpdGVkIExpbmtzIHRvIENvbW1vbiBDb3JlIFN0YW5kYXJkcydcclxuICAgIH07XHJcblxyXG4gICAgLy8gZSBpcyBhIGdvLkNoYW5nZWRFdmVudFxyXG4gICAgdGhpcy5tb2RlbENoYW5nZWQgPSBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgIGlmICghc2VsZi5zYXZlT25Nb2RlbENoYW5nZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGNoYW5nZVR5cGUgPSBudWxsO1xyXG4gICAgICAgIHZhciBjaGFuZ2VEZXNjcmlwdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChlLnByb3BlcnR5TmFtZSA9PSAndHlwZScpIHtcclxuICAgICAgICAgICAgLy8gY2hhbmdlIFIgdHlwZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCxuLDEsbywyLEEsMyxyLDQsciw1LG8sNix3LDcsc10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLHQsMSxvXSAsIHByb3BlcnR5TmFtZTogdHlwZVxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcic7XHJcbiAgICAgICAgICAgIGNoYW5nZURlc2NyaXB0aW9uID0gJ0NoYW5nZWQgUmVsYXRpb25zaGlwIFR5cGVzJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdsYXlvdXQnKSB7XHJcbiAgICAgICAgICAgIC8vIGNoYW5nZSBzeXN0ZW0gbGF5b3V0XHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLGwsMSxlLDIsZiwzLHRdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCxyLDEsaSwyLGcsMyxoLDQsdF0gLCBwcm9wZXJ0eU5hbWU6IGxheW91dCBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3MnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5jaGFuZ2UgPT0gZ28uQ2hhbmdlZEV2ZW50Lkluc2VydCAmJiBwcm9wZXJ0eUVxdWFscyhlLm5ld1ZhbHVlLCAnZnJvbVBvcnQnLCAnUicpKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogMSwgbmV3VmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsNjAwNSxmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUix0b1BvcnQsUF0gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXlcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtUb1BvcnRJZCwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsUF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLFJdICwgcHJvcGVydHlOYW1lOiB0b1BvcnQgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9yJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5SZW1vdmUgJiYgcHJvcGVydHlFcXVhbHMoZS5vbGRWYWx1ZSwgJ2Zyb21Qb3J0JywgJ1InKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogMSwgb2xkVmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsNjAwNSxmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUix0b1BvcnQsUl0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnbGlua0RhdGFBcnJheScpIHtcclxuICAgICAgICAgICAgLy8gY2hhbmdlIFAvRCBsaW5rc1xyXG4gICAgICAgICAgICAvLyBhZGQgUCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogMiwgbmV3VmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsMTkxMjIsZnJvbSwtMix0bywtNCxsYWJlbEtleXMsLGZyb21Qb3J0LFAsdG9Qb3J0LFBdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0NhdGVnb3J5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsUF0gLCBwcm9wZXJ0eU5hbWU6IGNhdGVnb3J5IFxyXG4gICAgICAgICAgICAvLyBkZWxldGUgUCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiAyLCBvbGRWYWx1ZTogW3R5cGUsbm9BcnJvd3MsX19nb2hhc2hpZCwxOTEyMixmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUCx0b1BvcnQsUCxjYXRlZ29yeSxQXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIC8vIGFkZCBEIGxpbmtcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiAxLCBuZXdWYWx1ZTogW2Zyb20sLTcsdG8sLTUsZnJvbVBvcnQsRCx0b1BvcnQsRCxjYXRlZ29yeSxELF9fZ29oYXNoaWQsMTk1MjJdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyByZW1vdmUgRCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiAxLCBvbGRWYWx1ZTogW2Zyb20sLTcsdG8sLTUsZnJvbVBvcnQsRCx0b1BvcnQsRCxjYXRlZ29yeSxELF9fZ29oYXNoaWQsMTk1MjJdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheSBcclxuXHJcbiAgICAgICAgICAgIGlmICgoZS5uZXdWYWx1ZSAmJiBlLm5ld1ZhbHVlLmNhdGVnb3J5ID09ICdQJykgfHxcclxuICAgICAgICAgICAgICAgIChlLm9sZFZhbHVlICYmIGUub2xkVmFsdWUuY2F0ZWdvcnkgPT0gJ1AnKSkge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3AnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKChlLm5ld1ZhbHVlICYmIGUubmV3VmFsdWUuY2F0ZWdvcnkgPT0gJ0QnKSB8fFxyXG4gICAgICAgICAgICAgICAgKGUub2xkVmFsdWUgJiYgZS5vbGRWYWx1ZS5jYXRlZ29yeSA9PSAnRCcpKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfZCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdjYXRlZ29yeScpIHtcclxuICAgICAgICAgICAgLy8gYWRkIFAgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZWQsIG1vZGVsQ2hhbmdlOiBsaW5rQ2F0ZWdvcnksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCxQXSAsIHByb3BlcnR5TmFtZTogY2F0ZWdvcnkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9wJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdncm91cCcpIHtcclxuICAgICAgICAgICAgLy8gZHJhZyBpbnRvIFNcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG4gICAgICAgICAgICAvLyByZW9yZGVyIHBhcnRcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG4gICAgICAgICAgICAvLyBkcmFnIHRvIERcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG5cclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3MnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ25vZGVEYXRhQXJyYXknICYmIGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5JbnNlcnQgJiYgcHJvcGVydHlFcXVhbHMoZS5uZXdWYWx1ZSwgJ2lzR3JvdXAnLCB0cnVlKSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiA1LCBuZXdWYWx1ZTogW3RleHQsTmV3IElkZWEsaXNHcm91cCx0cnVlLGxldmVsLDAsbGF5b3V0LGxlZnQsc0V4cGFuZGVkLHRydWUscEV4cGFuZGVkLGZhbHNlLGRFeHBhbmRlZCxmYWxzZSxfX2dvaGFzaGlkLDU0Njg4LGdyb3VwLCxrZXksLTddICwgcHJvcGVydHlOYW1lOiBub2RlRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsMiwxLDIsMiw4LDMsLiw0LDUsNSw2LDYsMiw3LDUsOCwgLDksLSwxMCwxLDExLDQsMTIsOSwxMywuLDE0LDYsMTUsOCwxNiw3LDE3LDVdICwgcHJvcGVydHlOYW1lOiBsb2MgXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogY2hpbGRyZW4gXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnYWRkX3RoaW5nJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICd0ZXh0Jykge1xyXG4gICAgICAgICAgICAvLyBtb3ZlIHRoaW5nXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLGIsMSxiLDIsYiwzLGIsNCxiXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsYSwxLGEsMixhLDMsYSw0LGFdICwgcHJvcGVydHlOYW1lOiB0ZXh0IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ3JlbmFtZV90aGluZyc7XHJcbiAgICAgICAgICAgIGNoYW5nZURlc2NyaXB0aW9uID0gJ1JlbmFtZWQgSWRlYXMnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ25vZGVEYXRhQXJyYXknICYmIGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5SZW1vdmUgJiYgcHJvcGVydHlFcXVhbHMoZS5vbGRWYWx1ZSwgJ2lzR3JvdXAnLCB0cnVlKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlJlbW92ZSwgb2xkUGFyYW06IDUsIG9sZFZhbHVlOiBbdGV4dCxOZXcgSWRlYSxpc0dyb3VwLHRydWUsbGV2ZWwsMCxsYXlvdXQsbGVmdCxzRXhwYW5kZWQsdHJ1ZSxwRXhwYW5kZWQsZmFsc2UsZEV4cGFuZGVkLGZhbHNlLF9fZ29oYXNoaWQsNTQ2ODgsZ3JvdXAsLGtleSwtNyxsb2MsMjI4LjU2MjUgLTE0OS42ODc1LGNoaWxkcmVuLDAsYXR0YWNobWVudHMsXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IG5vZGVEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZGVsZXRlX3RoaW5nJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdub2RlRGF0YUFycmF5JyAmJiBlLmNoYW5nZSA9PSBnby5DaGFuZ2VkRXZlbnQuSW5zZXJ0ICYmIHByb3BlcnR5RXF1YWxzKGUubmV3VmFsdWUsICdpc0dyb3VwJywgZmFsc2UpKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBzbGlkZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbm9kZURhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuSW5zZXJ0LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IDUsIG5ld1ZhbHVlOiBba2V5LHNsaWRlLTAsY2F0ZWdvcnksc2xpZGUsaW5kZXgsMCxpc0dyb3VwLGZhbHNlLHdpZHRoLDIwMCxoZWlnaHQsMjAwLGxvYywxNTYuNTYyNSAtOTcuNjg3NSxsZXZlbCwwLGNoaWxkcmVuLDAsdGl0bGUsLG5vdGVzLCxfX2dvaGFzaGlkLDYzODc3XSAsIHByb3BlcnR5TmFtZTogbm9kZURhdGFBcnJheSBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3ByZXNlbnRlcic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnbm9kZURhdGFBcnJheScgJiYgZS5jaGFuZ2UgPT0gZ28uQ2hhbmdlZEV2ZW50LlJlbW92ZSAmJiBwcm9wZXJ0eUVxdWFscyhlLm9sZFZhbHVlLCAnaXNHcm91cCcsIGZhbHNlKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgc2xpZGVcclxuICAgICAgICAgICAgLy9tb2RlbENoYW5nZTogbm9kZURhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogNSwgb2xkVmFsdWU6IFtrZXksc2xpZGUtMCxjYXRlZ29yeSxzbGlkZSxpbmRleCwwLGlzR3JvdXAsZmFsc2Usd2lkdGgsMjAwLGhlaWdodCwyMDAsbG9jLDE1Ni41NjI1IC05Ny42ODc1LGxldmVsLDAsY2hpbGRyZW4sMCx0aXRsZSwsbm90ZXMsLF9fZ29oYXNoaWQsNjM4NzcsJCRoYXNoS2V5LDBYTl0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBub2RlRGF0YUFycmF5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcHJlc2VudGVyJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdsb2MnIHx8IGUucHJvcGVydHlOYW1lID09ICd3aWR0aCcgfHwgZS5wcm9wZXJ0eU5hbWUgPT0gJ2hlaWdodCcpIHtcclxuICAgICAgICAgICAgLy8gbW92ZSB0aGluZyBvciByZXNpemUgc2xpZGVcclxuICAgICAgICAgICAgLy8gbW92ZSBzbGlkZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCwyLDEsNCwyLDMsMywgLDQsLSw1LDEsNiwyLDcsOF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDIsMSw0LDIsMywzLCAsNCwtLDUsMSw2LDIsNyw3XSAsIHByb3BlcnR5TmFtZTogbG9jIFxyXG4gICAgICAgICAgICAvLyByZXNpemUgc2xpZGVcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBoZWlnaHQgXHJcbiAgICAgICAgICAgIC8vIG1vdmUgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsNCwxLDcsMiw5LDMsLiw0LDgsNSw3LDYsNSw3LCAsOCwtLDksMSwxMCwyLDExLDIsMTIsLiwxMyw4LDE0LDcsMTUsNV0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDUsMSw0LDIsMCwzLC4sNCwzLDUsMSw2LDIsNyw1LDgsICw5LC0sMTAsMSwxMSwyLDEyLDEsMTMsLiwxNCwxLDE1LDgsMTYsNywxNyw1XSAsICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ21vdmUnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ2xldmVsJyB8fCBlLnByb3BlcnR5TmFtZSA9PSAnY2hpbGRyZW4nKSB7XHJcbiAgICAgICAgICAgIC8vIHRoZXNlIGF0dHJpYnV0ZXMgYXJlIHVwZGF0ZWQgYXMgYSByZXN1bHQgb2Ygb3RoZXIgYWN0aW9uczsgaWdub3JlXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ2F0dGFjaG1lbnRzJykge1xyXG4gICAgICAgICAgICAvLyBlZGl0ZWQgYXR0YWNobWVudHNcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X2F0dGFjaG1lbnRzJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdzRXhwYW5kZWQnIHx8IGUucHJvcGVydHlOYW1lID09ICdwRXhwYW5kZWQnKSB7XHJcbiAgICAgICAgICAgIC8vIGlnbm9yZSBleHBhbmQvY29sbGFwc2VcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdtb3ZlJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdGaW5pc2hlZFVuZG8nIHx8IGUucHJvcGVydHlOYW1lID09ICdGaW5pc2hlZFJlZG8nKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAndW5kb19yZWRvJztcclxuICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUuY2hhbmdlICE9IGdvLkNoYW5nZWRFdmVudC5UcmFuc2FjdGlvbikge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtb2RlbENoYW5nZWQsIG1vZGVsQ2hhbmdlOiAnICsgZS5tb2RlbENoYW5nZSArXHJcbiAgICAgICAgICAgIC8vICAgICcsIGNoYW5nZTogJyArIGUuY2hhbmdlICtcclxuICAgICAgICAgICAgLy8gICAgJywgb2xkUGFyYW06ICcgKyBlLm9sZFBhcmFtICtcclxuICAgICAgICAgICAgLy8gICAgJywgb2xkVmFsdWU6IFsnICsgXy5wYWlycyhlLm9sZFZhbHVlKSArICddICcgK1xyXG4gICAgICAgICAgICAvLyAgICAnLCBuZXdQYXJhbTogJyArIGUubmV3UGFyYW0gK1xyXG4gICAgICAgICAgICAvLyAgICAnLCBuZXdWYWx1ZTogWycgKyBfLnBhaXJzKGUubmV3VmFsdWUpICsgJ10gJyArXHJcbiAgICAgICAgICAgIC8vICAgICcsIHByb3BlcnR5TmFtZTogJyArIGUucHJvcGVydHlOYW1lXHJcbiAgICAgICAgICAgIC8vKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgIG1hcC5hbmFseXRpY3MudXBkYXRlQ29udGV4dHVhbEFuYWx5dGljcygpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjYWxsaW5nIGRlbGF5ZWRBdXRvc2F2ZSwgY2hhbmdlVHlwZTogJyArIGNoYW5nZVR5cGUpO1xyXG4gICAgICAgICAgICBzZWxmLnNhdmUoY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjb252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgcHJvcGVydGllc1xyXG4gICAgZnVuY3Rpb24gcHJvcGVydHlFcXVhbHMob2JqLCBrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiBfLmhhcyhvYmosIGtleSkgJiYgXy5yZXN1bHQob2JqLCBrZXkpID09IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuXHJcbn07IiwiY29uc3QgZ28gPSB3aW5kb3cuZ287XHJcblxyXG5nby5HcmFwaE9iamVjdC5kZWZpbmVCdWlsZGVyKFwiQ29ybmVyQnV0dG9uXCIsIGZ1bmN0aW9uIChhcmdzKSB7XHJcbiAgICAvLyBkZWZhdWx0IGJydXNoZXMgZm9yIFwiQnV0dG9uXCIgc2hhcGVcclxuICAgIHZhciBidXR0b25GaWxsTm9ybWFsID0gZ28uR3JhcGhPYmplY3QubWFrZShnby5CcnVzaCwgXCJMaW5lYXJcIiwgeyAwOiBcIndoaXRlXCIsIDE6IFwid2hpdGVcIiB9KTtcclxuICAgIHZhciBidXR0b25TdHJva2VOb3JtYWwgPSBcIndoaXRlXCI7XHJcblxyXG4gICAgdmFyIGJ1dHRvbkZpbGxPdmVyID0gZ28uR3JhcGhPYmplY3QubWFrZShnby5CcnVzaCwgXCJMaW5lYXJcIiwgeyAwOiBcIndoaXRlXCIsIDE6IFwid2hpdGVcIiB9KTtcclxuICAgIHZhciBidXR0b25TdHJva2VPdmVyID0gXCJ3aGl0ZVwiO1xyXG5cclxuICAgIC8vIG9mZnNldCBpZGVudGljYWwgdG8gdGhhdCBuZWVkZWQgdG8gbWF0Y2ggdGhlIG9yaWdpbmFsIFJvdW5kZWRSZWN0YW5nbGUgZmlndXJlLCB0byBrZWVwIHRoZSBzYW1lIHNpemVcclxuICAgIHZhciBvZmZzZXQgPSAwLjAwMS8vMi43NjE0MjM3NDkxNTM5Njg7XHJcblxyXG4gICAgdmFyIGJ1dHRvbiA9XHJcbiAgICAgIGdvLkdyYXBoT2JqZWN0Lm1ha2UoZ28uUGFuZWwsIFwiQXV0b1wiLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaXNBY3Rpb25hYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgZnJvbUxpbmthYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogdHJ1ZSxcclxuICAgICAgICAgICAgZnJvbUxpbmthYmxlRHVwbGljYXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgdG9MaW5rYWJsZVNlbGZOb2RlOiB0cnVlLFxyXG4gICAgICAgICAgICB0b0xpbmthYmxlRHVwbGljYXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgcG9ydElkOiAnZGVmYXVsdCdcclxuICAgICAgICB9LCAgLy8gbmVlZGVkIHNvIHRoYXQgdGhlIEFjdGlvblRvb2wgaW50ZXJjZXB0cyBtb3VzZSBldmVudHNcclxuICAgICAgICB7IC8vIHNhdmUgdGhlc2UgdmFsdWVzIGZvciB0aGUgbW91c2VFbnRlciBhbmQgbW91c2VMZWF2ZSBldmVudCBoYW5kbGVyc1xyXG4gICAgICAgICAgICBcIl9idXR0b25GaWxsTm9ybWFsXCI6IGJ1dHRvbkZpbGxOb3JtYWwsXHJcbiAgICAgICAgICAgIFwiX2J1dHRvblN0cm9rZU5vcm1hbFwiOiBidXR0b25TdHJva2VOb3JtYWwsXHJcbiAgICAgICAgICAgIFwiX2J1dHRvbkZpbGxPdmVyXCI6IGJ1dHRvbkZpbGxPdmVyLFxyXG4gICAgICAgICAgICBcIl9idXR0b25TdHJva2VPdmVyXCI6IGJ1dHRvblN0cm9rZU92ZXJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdvLkdyYXBoT2JqZWN0Lm1ha2UoZ28uU2hhcGUsICAvLyB0aGUgYm9yZGVyXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgbmFtZTogXCJCdXR0b25Cb3JkZXJcIixcclxuICAgICAgICAgICAgICBmaWd1cmU6IFwiQ2lyY2xlXCIsXHJcbiAgICAgICAgICAgICAgc3BvdDE6IG5ldyBnby5TcG90KDAsIDAsIG9mZnNldCwgb2Zmc2V0KSxcclxuICAgICAgICAgICAgICBzcG90MjogbmV3IGdvLlNwb3QoMSwgMSwgLW9mZnNldCwgLW9mZnNldCksXHJcbiAgICAgICAgICAgICAgZmlsbDogYnV0dG9uRmlsbE5vcm1hbCxcclxuICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDBcclxuICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAvLyBUaGVyZVwicyBubyBHcmFwaE9iamVjdCBpbnNpZGUgdGhlIGJ1dHRvbiBzaGFwZSAtLSBpdCBtdXN0IGJlIGFkZGVkIGFzIHBhcnQgb2YgdGhlIGJ1dHRvbiBkZWZpbml0aW9uLlxyXG4gICAgLy8gVGhpcyB3YXkgdGhlIG9iamVjdCBjb3VsZCBiZSBhIFRleHRCbG9jayBvciBhIFNoYXBlIG9yIGEgUGljdHVyZSBvciBhcmJpdHJhcmlseSBjb21wbGV4IFBhbmVsLlxyXG5cclxuICAgIC8vIG1vdXNlLW92ZXIgYmVoYXZpb3JcclxuICAgIGJ1dHRvbi5tb3VzZUVudGVyID0gZnVuY3Rpb24gKGUsIGJ1dHRvbiwgcHJldikge1xyXG4gICAgICAgIHZhciBzaGFwZSA9IGJ1dHRvbi5maW5kT2JqZWN0KFwiQnV0dG9uQm9yZGVyXCIpOyAgLy8gdGhlIGJvcmRlciBTaGFwZVxyXG4gICAgICAgIGlmIChzaGFwZSBpbnN0YW5jZW9mIGdvLlNoYXBlKSB7XHJcbiAgICAgICAgICAgIHZhciBicnVzaCA9IGJ1dHRvbltcIl9idXR0b25GaWxsT3ZlclwiXTtcclxuICAgICAgICAgICAgYnV0dG9uW1wiX2J1dHRvbkZpbGxOb3JtYWxcIl0gPSBzaGFwZS5maWxsO1xyXG4gICAgICAgICAgICBzaGFwZS5maWxsID0gYnJ1c2g7XHJcbiAgICAgICAgICAgIGJydXNoID0gYnV0dG9uW1wiX2J1dHRvblN0cm9rZU92ZXJcIl07XHJcbiAgICAgICAgICAgIGJ1dHRvbltcIl9idXR0b25TdHJva2VOb3JtYWxcIl0gPSBzaGFwZS5zdHJva2U7XHJcbiAgICAgICAgICAgIHNoYXBlLnN0cm9rZSA9IGJydXNoO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgYnV0dG9uLm1vdXNlTGVhdmUgPSBmdW5jdGlvbiAoZSwgYnV0dG9uLCBwcmV2KSB7XHJcbiAgICAgICAgdmFyIHNoYXBlID0gYnV0dG9uLmZpbmRPYmplY3QoXCJCdXR0b25Cb3JkZXJcIik7ICAvLyB0aGUgYm9yZGVyIFNoYXBlXHJcbiAgICAgICAgaWYgKHNoYXBlIGluc3RhbmNlb2YgZ28uU2hhcGUpIHtcclxuICAgICAgICAgICAgc2hhcGUuZmlsbCA9IGJ1dHRvbltcIl9idXR0b25GaWxsTm9ybWFsXCJdO1xyXG4gICAgICAgICAgICBzaGFwZS5zdHJva2UgPSBidXR0b25bXCJfYnV0dG9uU3Ryb2tlTm9ybWFsXCJdO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIGJ1dHRvbjtcclxufSk7IiwibGV0IHJlYWN0V2F0Y2ggPSB7fTtcclxubGV0IHJlYWN0ID0gKG1hcCwgcGFydCwgdGFyZ2V0KSA9PiB7XHJcbiAgICAgICAgdGFyZ2V0LmNsaWNrcyA9IHRhcmdldC5jbGlja3MgfHwgMDtcclxuICAgICAgICB0YXJnZXQuY2xpY2tzICs9IDE7XHJcbiAgICAgICAgbGV0IG1ldGhvZCA9IHJlYWN0V2F0Y2hbdGFyZ2V0LnRvU3RyaW5nKCldO1xyXG4gICAgICAgIGlmICghbWV0aG9kKSB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2QgPSBfLmRlbGF5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGlja3MgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGlja3MgPSAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0V2F0Y2hbdGFyZ2V0LnRvU3RyaW5nKCldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnVpLmhhbmRsZUNvcm5lckNsaWNrKHBhcnQsIHRhcmdldC5wYXJ0LmFkb3JuZWRQYXJ0IHx8IHRhcmdldCwgY291bnQpO1xyXG4gICAgICAgICAgICAgICAgfSwgMjUwKTtcclxuICAgICAgICAgICAgICAgIHJlYWN0V2F0Y2hbdGFyZ2V0LnRvU3RyaW5nKCldID0gbWV0aG9kO1xyXG4gICAgICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByZWFjdDsiLCJjb25zdCBnbyA9IHdpbmRvdy5nbztcclxuY29uc3QgQ09OU1RBTlRTID0gcmVxdWlyZSgnLi4vLi4vY29uc3RhbnRzL2NvbnN0YW50cycpO1xyXG5jb25zdCByZWFjdCA9IHJlcXVpcmUoJy4vYnV0dG9uQ2xpY2snKVxyXG5cclxuZnVuY3Rpb24gQnV0dG9uRHJhZ2dpbmdUb29sKG1hcCkge1xyXG4gICAgZ28uRHJhZ2dpbmdUb29sLmNhbGwodGhpcyk7XHJcbiAgICB0aGlzLl9kcmFnRGF0YSA9IG51bGw7ICAvLyBwYXNzIGluZm9ybWF0aW9uIGZyb20gZmluZERyYWdnYWJsZVBhcnQgdG8gc3RhbmRhcmRNb3VzZVNlbGVjdFxyXG4gICAgdGhpcy5tYXAgPSBtYXA7XHJcbn1cclxuZ28uRGlhZ3JhbS5pbmhlcml0KEJ1dHRvbkRyYWdnaW5nVG9vbCwgZ28uRHJhZ2dpbmdUb29sKTtcclxuXHJcbi8vIEJ1dHRvbkRyYWdnaW5nVG9vbC5wcm90b3R5cGUuY2FuU3RhcnQgPSBmdW5jdGlvbiAoLi4ucGFyYW1zKSB7XHJcbi8vICAgICBpZiAoIXRoaXMuaXNFbmFibGVkKSByZXR1cm4gZmFsc2U7XHJcbi8vICAgICB2YXIgZGlhZ3JhbSA9IHRoaXMuZGlhZ3JhbTtcclxuLy8gICAgIGlmIChkaWFncmFtID09PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcbi8vICAgICBpZiAoIWRpYWdyYW0uYWxsb3dIb3Jpem9udGFsU2Nyb2xsICYmICFkaWFncmFtLmFsbG93VmVydGljYWxTY3JvbGwpIHJldHVybiBmYWxzZTtcclxuLy8gICAgIC8vIHJlcXVpcmUgcmlnaHQgYnV0dG9uICYgdGhhdCBpdCBoYXMgbW92ZWQgZmFyIGVub3VnaCBhd2F5IGZyb20gdGhlIG1vdXNlIGRvd24gcG9pbnQsIHNvIGl0IGlzbid0IGEgY2xpY2tcclxuLy8gICAgIC8vIENIQU5HRUQgdG8gY2hlY2sgSW5wdXRFdmVudC5yaWdodCBJTlNURUFEIE9GIElucHV0RXZlbnQubGVmdFxyXG4vLyAgICAgaWYgKCFkaWFncmFtLmxhc3RJbnB1dC5sZWZ0KSByZXR1cm4gZmFsc2U7XHJcbi8vICAgICAvLyBkb24ndCBpbmNsdWRlIHRoZSBmb2xsb3dpbmcgY2hlY2sgd2hlbiB0aGlzIHRvb2wgaXMgcnVubmluZyBtb2RhbGx5XHJcbi8vICAgICBpZiAoISh0aGlzLmRpYWdyYW0ubGFzdElucHV0LmRvY3VtZW50UG9pbnQpIHx8XHJcbi8vICAgICAgICAgIXRoaXMuZGlhZ3JhbS5maW5kT2JqZWN0QXQodGhpcy5kaWFncmFtLmxhc3RJbnB1dC5kb2N1bWVudFBvaW50KSB8fFxyXG4vLyAgICAgICAgICF0aGlzLmRpYWdyYW0uZmluZE9iamVjdEF0KHRoaXMuZGlhZ3JhbS5sYXN0SW5wdXQuZG9jdW1lbnRQb2ludCkucGFydC5hZG9ybmVkUGFydCkgcmV0dXJuIGZhbHNlO1xyXG4vLyAgICAgLy8gaWYgKGRpYWdyYW0uY3VycmVudFRvb2wgIT09IHRoaXMpIHtcclxuLy8gICAgIC8vICAgICAvLyBtb3VzZSBuZWVkcyB0byBoYXZlIG1vdmVkIGZyb20gdGhlIG1vdXNlLWRvd24gcG9pbnRcclxuLy8gICAgIGlmICh0aGlzLmlzQmV5b25kRHJhZ1NpemUoKSkge1xyXG4vLyAgICAgICAgICAgICAgYWxlcnQoJ2RyYWcnKVxyXG4vLyAgICAgICAgICB9XHJcbi8vICAgICAvLyB9XHJcbi8vICAgICByZXR1cm4gdHJ1ZTtcclxuLy8gfVxyXG4vLyBBIGRyYWcgc3RhcnRpbmcgYXQgYSBidXR0b24gd2l0aCBfZHJhZ0RhdGEgaXMgYWxsb3dlZCBiZWNhdXNlIHRoaXMgbWV0aG9kIHJldHVybnMgYSBQYXJ0IHNvIHRoYXQgY2FuU3RhcnQoKSBjYW4gcmV0dXJuIHRydWUuXHJcbi8vIFJlbWVtYmVyIHRoZSBfZHJhZ0RhdGEgdGhhdCB3YXMgZm91bmQsIHNvIHRoYXQgc3RhbmRhcmRNb3VzZVNlbGVjdCBjYW4gY3JlYXRlIGFuZCBzZWxlY3QgYSBuZXcgUGFydCBiYXNlZCBvbiB0aGF0IGRhdGEuXHJcbkJ1dHRvbkRyYWdnaW5nVG9vbC5wcm90b3R5cGUuZmluZERyYWdnYWJsZVBhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgcGFydCA9IGdvLkRyYWdnaW5nVG9vbC5wcm90b3R5cGUuZmluZERyYWdnYWJsZVBhcnQuY2FsbCh0aGlzKTtcclxuICAgIGlmIChwYXJ0ICE9PSBudWxsKSByZXR1cm4gcGFydDtcclxuICAgIHZhciBlbGVtZW50ID0gdGhpcy5kaWFncmFtLmZpbmRPYmplY3RBdCh0aGlzLmRpYWdyYW0ubGFzdElucHV0LmRvY3VtZW50UG9pbnQsXHJcbiAgICAgICAgZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICAgICAgLy8gZ28gdXAgdGhlIFBhbmVsIGNoYWluLCBsb29raW5nIGZvciB0aGUgZmlyc3QgR3JhcGhPYmplY3Qgd2l0aCBfZHJhZ0RhdGEgc2V0IHRvIGFuIG9iamVjdFxyXG4gICAgICAgICAgICB2YXIgbyA9IHg7XHJcbiAgICAgICAgICAgIHdoaWxlIChvICE9PSBudWxsICYmICh0eXBlb2YgKG8uX2RyYWdEYXRhKSAhPT0gXCJvYmplY3RcIikpIHsgbyA9IG8ucGFuZWw7IH07XHJcbiAgICAgICAgICAgIHJldHVybiBvOyAgLy8gd2lsbCBiZSBlaXRoZXIgbnVsbCBvciBhIEdyYXBoT2JqZWN0IHdpdGggLl9kcmFnRGF0YVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbnVsbCk7XHJcbiAgICBpZiAoZWxlbWVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuX2RyYWdEYXRhID0gZWxlbWVudC5fZHJhZ0RhdGE7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQucGFydDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fZHJhZ0RhdGEgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLy8gQnV0dG9uRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5zdGFuZGFyZE1vdXNlQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQsIG9iaikge1xyXG4vLyAgICAgaWYgKHRoaXMuX2RyYWdEYXRhICE9PSBudWxsKSB7XHJcbi8vICAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmRpYWdyYW0uZmluZE9iamVjdEF0KHRoaXMuZGlhZ3JhbS5sYXN0SW5wdXQuZG9jdW1lbnRQb2ludCkucGFydC5hZG9ybmVkUGFydDtcclxuLy8gICAgICAgICBsZXQgdGFyZ2V0ID0gbm9kZS5maW5kT2JqZWN0KCdtYWlucGFuZWwnKTtcclxuLy8gICAgICAgICBzd2l0Y2ggKHRoaXMuX2RyYWdEYXRhLnBvcnRJZCkge1xyXG4vLyAgICAgICAgICAgICBjYXNlIENPTlNUQU5UUy5EU1JQLkQ6XHJcbi8vICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuYWx0KSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgLy8gTkI6IGEgc2lkZSBlZmZlY3Qgb2YgdGhpcyB3aWxsIGJlIHRvIHNlbGVjdCBqdXN0IHRoaXMgZ3JvdXAsXHJcbi8vICAgICAgICAgICAgICAgICAgICAgLy8gd2hpY2ggd291bGQgbm90IGhhcHBlbiBvdGhlcndpc2UgdmlhIGNvbnRyb2wtY2xpY2tcclxuLy8gICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcC5wZXJzcGVjdGl2ZXMuc2V0REVkaXRvclRoaW5nKHRhcmdldC5wYXJ0LmFkb3JuZWRQYXJ0KTtcclxuLy8gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgcmVhY3QodGhpcy5tYXAsIENPTlNUQU5UUy5EU1JQLkQsIHRhcmdldCk7XHJcbi8vICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgICAgICBicmVhaztcclxuLy8gICAgICAgICAgICAgY2FzZSBDT05TVEFOVFMuRFNSUC5TOlxyXG4vLyAgICAgICAgICAgICAgICAgcmVhY3QodGhpcy5tYXAsIENPTlNUQU5UUy5EU1JQLlMsIHRhcmdldCk7XHJcbi8vICAgICAgICAgICAgICAgICBicmVhaztcclxuLy8gICAgICAgICAgICAgY2FzZSBDT05TVEFOVFMuRFNSUC5SOlxyXG4vLyAgICAgICAgICAgICAgICAgcmVhY3QodGhpcy5tYXAsIENPTlNUQU5UUy5EU1JQLlIsIHRhcmdldCk7XHJcbi8vICAgICAgICAgICAgICAgICBicmVhaztcclxuLy8gICAgICAgICAgICAgY2FzZSBDT05TVEFOVFMuRFNSUC5QOlxyXG4vLyAgICAgICAgICAgICAgICAgcmVhY3QodGhpcy5tYXAsIENPTlNUQU5UUy5EU1JQLlAsIHRhcmdldCk7XHJcbi8vICAgICAgICAgICAgICAgICBicmVhaztcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9XHJcbi8vIH1cclxuLy9cclxuLy8gQnV0dG9uRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5kb01vdXNlRG93biA9IGZ1bmN0aW9uIChldmVudCwgb2JqKSB7XHJcbi8vICAgICAvL2dvLkRyYWdnaW5nVG9vbC5wcm90b3R5cGUuZG9Nb3VzZURvd24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuLy8gICAgIC8vdGhpcy5zdGFuZGFyZE1vdXNlQ2xpY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuLy8gICAgIGlmICh0aGlzLl9kcmFnRGF0YSAhPT0gbnVsbCkge1xyXG4vL1xyXG4vLyAgICAgfVxyXG4vLyAgICAgaWYgKHRoaXMuaXNCZXlvbmREcmFnU2l6ZSgpKSB7XHJcbi8vICAgICAgICAgYWxlcnQoJ2RyYWcnKVxyXG4vLyAgICAgfVxyXG4vLyB9O1xyXG5cclxuLy8gSW5zdGVhZCBvZiB0aGUgc3RhbmRhcmQgYmVoYXZpb3Igc2VsZWN0aW5nIHRoZSBQYXJ0IGF0IHRoZSBsYXN0SW5wdXQuZG9jdW1lbnRQb2ludCxcclxuLy8gY3JlYXRlIGEgbmV3IFBhcnQgYW5kIHNlbGVjdCBpdCwgc28gdGhhdCBpdCBpcyBkcmFnZ2VkIGJ5IHRoZSBEcmFnZ2luZ1Rvb2wuXHJcbkJ1dHRvbkRyYWdnaW5nVG9vbC5wcm90b3R5cGUuc3RhbmRhcmRNb3VzZVNlbGVjdCA9IGZ1bmN0aW9uIChldmVudCwgb2JqKSB7XHJcbiAgICBpZiAodGhpcy5fZHJhZ0RhdGEgIT09IG51bGwpIHtcclxuICAgICAgICBpZiAodGhpcy5fZHJhZ0RhdGEucG9ydElkID09IENPTlNUQU5UUy5EU1JQLlAgfHwgdGhpcy5fZHJhZ0RhdGEucG9ydElkID09IENPTlNUQU5UUy5EU1JQLlIpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJEcmFnXCIpO1xyXG4gICAgICAgICAgICAvLyB0aGlzIG1ldGhvZCBtdXN0IG5vdyBzZXQgdGhpcy5jdXJyZW50UGFydCB0byBhIHNlbGVjdGVkIG1vdmFibGUgUGFydFxyXG5cclxuICAgICAgICAgICAgdGhpcy5kaWFncmFtLmFsbG93TGluayA9IHRydWU7XHJcbiAgICAgICAgICAgIHZhciB0b29sID0gdGhpcy5kaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sO1xyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZGlhZ3JhbS5maW5kT2JqZWN0QXQodGhpcy5kaWFncmFtLmxhc3RJbnB1dC5kb2N1bWVudFBvaW50KS5wYXJ0LmFkb3JuZWRQYXJ0O1xyXG4gICAgICAgICAgICB0b29sLnN0YXJ0T2JqZWN0ID0gbm9kZS5maW5kT2JqZWN0KCdkcmFnYXJlYScpO1xyXG4gICAgICAgICAgICB0b29sLmFyY2hldHlwZUxpbmtEYXRhLnRleHQgPSB0aGlzLl9kcmFnRGF0YS5wb3J0SWQ7XHJcbiAgICAgICAgICAgIHRoaXMuZGlhZ3JhbS5jdXJyZW50VG9vbCA9IHRvb2w7XHJcbiAgICAgICAgICAgIHRvb2wuZG9BY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tYXAudGVtcGxhdGVzLmdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyKClcclxuXHJcbiAgICAgICAgICAgIC8vIHZhciBkYXRhID0gdGhpcy5kaWFncmFtLm1vZGVsLmNvcHlOb2RlRGF0YSh0aGlzLl9kcmFnRGF0YSk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICAgICAgLy8gdmFyIG5ld3BhcnQgPSB0aGlzLmRpYWdyYW0uZmluZE5vZGVGb3JEYXRhKGRhdGEpO1xyXG4gICAgICAgICAgICAvLyBuZXdwYXJ0LmxvY2F0aW9uID0gdGhpcy5kaWFncmFtLmxhc3RJbnB1dC5kb2N1bWVudFBvaW50O1xyXG4gICAgICAgICAgICAvLyB0aGlzLmRpYWdyYW0uc2VsZWN0KG5ld3BhcnQpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmN1cnJlbnRQYXJ0ID0gbmV3cGFydDtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGdvLkRyYWdnaW5nVG9vbC5wcm90b3R5cGUuc3RhbmRhcmRNb3VzZVNlbGVjdC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuQnV0dG9uRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5kb0FjdGl2YXRlID0gZnVuY3Rpb24gKGV2ZW50LCBvYmopIHtcclxuICAgIGdvLkRyYWdnaW5nVG9vbC5wcm90b3R5cGUuZG9BY3RpdmF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCdXR0b25EcmFnZ2luZ1Rvb2w7IiwiY29uc3QgZ28gPSB3aW5kb3cuZ287XHJcbmNvbnN0IG1rID0gZ28uR3JhcGhPYmplY3QubWFrZTtcclxuY29uc3QgbWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uLy4uL01ldGFNYXAnKTtcclxuY29uc3QgY29uZmlnID0gbWV0YU1hcC5jb25maWcuY2FudmFzO1xyXG5jb25zdCBDT05TVEFOVFMgPSByZXF1aXJlKCcuLi8uLi9jb25zdGFudHMvY29uc3RhbnRzJyk7XHJcblxyXG5sZXQgcmVhY3QgPSByZXF1aXJlKCcuL2J1dHRvbkNsaWNrJylcclxuXHJcbmNvbnN0IGRCdXR0b24gPSAobWFwKSA9PiB7XHJcbiAgICByZXR1cm4gbWsoZ28uUGFuZWwsIFwiQXV0b1wiLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYWxpZ25tZW50OiBnby5TcG90LlRvcExlZnRcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBtayhcIkNvcm5lckJ1dHRvblwiLCBcIkF1dG9cIiwge1xyXG4gICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgX2RyYWdEYXRhOiB7IHBvcnRJZDogQ09OU1RBTlRTLkRTUlAuRCB9LFxyXG4gICAgICAgICAgICBwb3J0SWQ6IENPTlNUQU5UUy5EU1JQLkQsXHJcbiAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmFsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5COiBhIHNpZGUgZWZmZWN0IG9mIHRoaXMgd2lsbCBiZSB0byBzZWxlY3QganVzdCB0aGlzIGdyb3VwLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoaWNoIHdvdWxkIG5vdCBoYXBwZW4gb3RoZXJ3aXNlIHZpYSBjb250cm9sLWNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLnBlcnNwZWN0aXZlcy5zZXRERWRpdG9yVGhpbmcodGFyZ2V0LnBhcnQuYWRvcm5lZFBhcnQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWFjdChtYXAsIENPTlNUQU5UUy5EU1JQLkQsIHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NvbnRleHRDbGljazonICsgZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnRvZ2dsZURGbGFnKHRhcmdldC5wYXJ0LmFkb3JuZWRQYXJ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMjAsIDIwKSxcclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5U3RyaW5nOiBjb25maWcuc2hhcGVzLmNvcm5lcnMuRC5wYXRoLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogY29uZmlnLmNvbG9ycy5EU1JQLkQsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApKVxyXG4gICAgICAgIClcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBkQnV0dG9uOyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcbmNvbnN0IG1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi8uLi9NZXRhTWFwJyk7XHJcbmNvbnN0IGNvbmZpZyA9IG1ldGFNYXAuY29uZmlnLmNhbnZhcztcclxuY29uc3QgQ09OU1RBTlRTID0gcmVxdWlyZSgnLi4vLi4vY29uc3RhbnRzL2NvbnN0YW50cycpO1xyXG5cclxubGV0IHJlYWN0ID0gcmVxdWlyZSgnLi9idXR0b25DbGljaycpXHJcblxyXG5jb25zdCBwQnV0dG9uID0gKG1hcCkgPT4ge1xyXG4gICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBcIkF1dG9cIixcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Ub3BSaWdodFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIG1rKFwiQ29ybmVyQnV0dG9uXCIsIFwiQXV0b1wiLCB7XHJcbiAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICAgICAgICBfZHJhZ0RhdGE6IHsgcG9ydElkOiBDT05TVEFOVFMuRFNSUC5QIH0sXHJcbiAgICAgICAgICAgIHBvcnRJZDogQ09OU1RBTlRTLkRTUlAuUCxcclxuICAgICAgICAgICAgZnJvbUxpbmthYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogdHJ1ZSxcclxuICAgICAgICAgICAgZnJvbUxpbmthYmxlRHVwbGljYXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgdG9MaW5rYWJsZVNlbGZOb2RlOiB0cnVlLFxyXG4gICAgICAgICAgICB0b0xpbmthYmxlRHVwbGljYXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgdG9NYXhMaW5rczogMSxcclxuICAgICAgICAgICAgbW91c2VEcmFnRW50ZXI6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcclxuICAgICAgICAgICAgICAgIC8vZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIobWFwLkxFRlQpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1vdXNlRHJhZ0xlYXZlOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgZGVidWdnZXI7XHJcbiAgICAgICAgICAgICAgICAvL2dyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyKClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW91c2VEcm9wOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgZGVidWdnZXI7XHJcbiAgICAgICAgICAgICAgICAvL2dldEdyb3VwTW91c2VEcm9wSGFuZGxlcihtYXAuTEVGVClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMjAsIDIwKSxcclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5U3RyaW5nOiBjb25maWcuc2hhcGVzLmNvcm5lcnMuUC5wYXRoLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogY29uZmlnLmNvbG9ycy5EU1JQLlAsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcEJ1dHRvbjsiLCJjb25zdCBnbyA9IHdpbmRvdy5nbztcclxuY29uc3QgbWsgPSBnby5HcmFwaE9iamVjdC5tYWtlO1xyXG5jb25zdCBtZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vLi4vTWV0YU1hcCcpO1xyXG5jb25zdCBjb25maWcgPSBtZXRhTWFwLmNvbmZpZy5jYW52YXM7XHJcbmNvbnN0IENPTlNUQU5UUyA9IHJlcXVpcmUoJy4uLy4uL2NvbnN0YW50cy9jb25zdGFudHMnKTtcclxuXHJcbmxldCByZWFjdCA9IHJlcXVpcmUoJy4vYnV0dG9uQ2xpY2snKVxyXG5cclxuY29uc3QgckJ1dHRvbiA9IChtYXApID0+IHtcclxuICAgIHJldHVybiBtayhnby5QYW5lbCwgXCJBdXRvXCIsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuQm90dG9tUmlnaHRcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBtayhcIkNvcm5lckJ1dHRvblwiLCBcIkF1dG9cIiwge1xyXG4gICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgX2RyYWdEYXRhOiB7IHBvcnRJZDogQ09OU1RBTlRTLkRTUlAuUiB9LFxyXG4gICAgICAgICAgICBwb3J0SWQ6IENPTlNUQU5UUy5EU1JQLlIsXHJcbiAgICAgICAgICAgIGZyb21MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgZnJvbUxpbmthYmxlU2VsZk5vZGU6IHRydWUsXHJcbiAgICAgICAgICAgIGZyb21MaW5rYWJsZUR1cGxpY2F0ZXM6IHRydWUsXHJcbiAgICAgICAgICAgIHRvTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvTGlua2FibGVTZWxmTm9kZTogdHJ1ZSxcclxuICAgICAgICAgICAgdG9MaW5rYWJsZUR1cGxpY2F0ZXM6IHRydWUsXHJcbiAgICAgICAgICAgIG1vdXNlRHJhZ0VudGVyOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgZGVidWdnZXI7XHJcbiAgICAgICAgICAgICAgICAvL2dldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKG1hcC5MRUZUKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtb3VzZURyYWdMZWF2ZTogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xyXG4gICAgICAgICAgICAgICAgLy9ncm91cE1vdXNlRHJhZ0xlYXZlSGFuZGxlcigpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1vdXNlRHJvcDogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xyXG4gICAgICAgICAgICAgICAgLy9nZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIobWFwLkxFRlQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50OiBnby5TcG90LkJvdHRvbVJpZ2h0LFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICBwb3J0SWQ6IENPTlNUQU5UUy5EU1JQLlIsXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMjAsIDIwKSxcclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5U3RyaW5nOiBjb25maWcuc2hhcGVzLmNvcm5lcnMuUi5wYXRoLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogY29uZmlnLmNvbG9ycy5EU1JQLlIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gckJ1dHRvbjsiLCJjb25zdCBnbyA9IHdpbmRvdy5nbztcclxuY29uc3QgbWsgPSBnby5HcmFwaE9iamVjdC5tYWtlO1xyXG5jb25zdCBtZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vLi4vTWV0YU1hcCcpO1xyXG5jb25zdCBjb25maWcgPSBtZXRhTWFwLmNvbmZpZy5jYW52YXM7XHJcbmNvbnN0IENPTlNUQU5UUyA9IHJlcXVpcmUoJy4uLy4uL2NvbnN0YW50cy9jb25zdGFudHMnKTtcclxuXHJcbmxldCByZWFjdCA9IHJlcXVpcmUoJy4vYnV0dG9uQ2xpY2snKVxyXG5cclxuY29uc3Qgc0J1dHRvbiA9IChtYXApID0+IHtcclxuICAgIHJldHVybiBtayhnby5QYW5lbCwgXCJBdXRvXCIsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuQm90dG9tTGVmdCxcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBtayhcIkNvcm5lckJ1dHRvblwiLCBcIkF1dG9cIiwge1xyXG4gICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgcG9ydElkOiBDT05TVEFOVFMuRFNSUC5TLFxyXG4gICAgICAgICAgICBfZHJhZ0RhdGE6IHsgcG9ydElkOiBDT05TVEFOVFMuRFNSUC5TIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgyMCwgMjApLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnlTdHJpbmc6IGNvbmZpZy5zaGFwZXMuY29ybmVycy5TLnBhdGgsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBjb25maWcuY29sb3JzLkRTUlAuUyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBzQnV0dG9uOyIsInJlcXVpcmUoJy4vdXNlci5qcycpO1xyXG5yZXF1aXJlKCcuL2VkaXRvcl9vcHRpb25zLmpzJyk7XHJcbnJlcXVpcmUoJy4vYW5hbHl0aWNzLmpzJyk7XHJcbnJlcXVpcmUoJy4vYXR0YWNobWVudHMuanMnKTtcclxucmVxdWlyZSgnLi9hdXRvc2F2ZS5qcycpO1xyXG5yZXF1aXJlKCcuL2dlbmVyYXRvci5qcycpO1xyXG5yZXF1aXJlKCcuL2xheW91dHMuanMnKTtcclxucmVxdWlyZSgnLi9tYXAuanMnKTtcclxucmVxdWlyZSgnLi9wZXJzcGVjdGl2ZXMuanMnKTtcclxucmVxdWlyZSgnLi9wcmVzZW50ZXIuanMnKTtcclxucmVxdWlyZSgnLi9zaGFyaW5nLmpzJyk7XHJcbnJlcXVpcmUoJy4vc3RhbmRhcmRzLmpzJyk7XHJcbnJlcXVpcmUoJy4vdGFnZ2luZy5qcycpO1xyXG5yZXF1aXJlKCcuL3RlbXBsYXRlcy5qcycpO1xyXG5yZXF1aXJlKCcuL3Rlc3RzLmpzJyk7XHJcbnJlcXVpcmUoJy4vdWkuanMnKTtcclxuXHJcbmNvbnN0IFNhbmRiYW5rRWRpdG9yID0gcmVxdWlyZSgnLi9zYkVkaXRvcicpO1xyXG5jb25zdCBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcclxuXHJcbndpbmRvdy5NYXBFZGl0b3JDdHJsID0gZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkdGltZW91dCwgJG1vZGFsLCAkbG9nKSB7XHJcblxyXG4gICAgJHNjb3BlLm1hcCA9IG5ldyBTYW5kYmFua0VkaXRvci5NYXAoJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkdGltZW91dCwgJG1vZGFsLCAkbG9nKTtcclxuXHJcbiAgICAvLyB3aW5kb3cubWFwRGF0YSBpcyBzZXQgaW4gX2Zvcm0gdmlld1xyXG4gICAgdmFyIG1ldGFkYXRhID0gJHNjb3BlLm1hcERhdGEubWV0YWRhdGE7XHJcbiAgICAkc2NvcGUuc2FuZGJveCA9IG1ldGFkYXRhLnNhbmRib3g7XHJcbiAgICAvLyRzY29wZS5tYXBEYXRhID0gd2luZG93Lm1hcERhdGEubWFwLmRhdGE7IC8vIHRoaXMgZ2V0cyBvdmVyd3JpdHRlbiBieSBsb2FkKCkgdW5sZXNzIHdlIGFyZSBpbiB0aGUgc2FuZGJveCB3aXRoIG5vIG1hcCBJRFxyXG4gICAgLy8kc2NvcGUubWFwSWQgPSBtZXRhZGF0YS5pZDtcclxuICAgICRzY29wZS5tYXBUaXRsZSA9IG1ldGFkYXRhLm5hbWU7XHJcbiAgICAkc2NvcGUubWFwVXNlclRhZ3MgPSBtZXRhZGF0YS51c2VyVGFncztcclxuICAgICRzY29wZS5tYXBVcmwgPSBtZXRhZGF0YS51cmw7XHJcbiAgICAkc2NvcGUuY2FuRWRpdCA9IG1ldGFkYXRhLmNhbkVkaXQ7XHJcbiAgICAkc2NvcGUudXBkYXRlZEF0ID0gbWV0YWRhdGEudXBkYXRlZEF0O1xyXG4gICAgJHNjb3BlLnVwZGF0ZWRCeSA9IG1ldGFkYXRhLnVwZGF0ZWRCeTsgLy8gSURcclxuICAgICRzY29wZS51cGRhdGVkQnlOYW1lID0gbWV0YWRhdGEudXBkYXRlZEJ5TmFtZTtcclxuXHJcbiAgICAkc2NvcGUuZWRpdGluZ1RpdGxlID0gZmFsc2U7XHJcblxyXG4gICAgJHNjb3BlLnNob3dJbWFnZUV4cG9ydCA9IGZhbHNlO1xyXG4gICAgJHNjb3BlLmltYWdlRXhwb3J0TG9hZGluZyA9IHRydWU7XHJcblxyXG4gICAgJHNjb3BlLmN1cnJlbnRUYWIgPSBudWxsO1xyXG5cclxuICAgIC8vIG92ZXJyaWRlIHBhcmVudCBzY29wZSAoc2VlIHVzZXIuanMpIHNpbmNlIHdlJ3JlIGVkaXRpbmcgYSBtYXBcclxuICAgICRzY29wZS5jY3NUYWdnaW5nLm1hcElkID0gJHNjb3BlLm1hcElkO1xyXG5cclxuICAgICRzY29wZS5tYXliZVN0YXJ0RWRpdGluZ1RpdGxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgICRzY29wZS5lZGl0aW5nVGl0bGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmRvbmVFZGl0aW5nVGl0bGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdkb25lRWRpdGluZ1RpdGxlJyk7XHJcbiAgICAgICAgJHNjb3BlLmVkaXRpbmdUaXRsZSA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5tYXAuYXV0b3NhdmUuc2F2ZSgnZWRpdF90aXRsZScpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZWRpdGluZ1RpdGxlS2V5cHJlc3MgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmRvbmVFZGl0aW5nVGl0bGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5wcmludCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHdpbmRvdy5wcmludCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gc2F2ZSBzYW5kYm94IG1hcCAoc2lnbiB1cC9zaWduIGluKSAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuc2F2ZVNhbmRib3hNYXAgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZV9zYW5kYm94X3NhdmVfbW9kYWwuaHRtbCcsIC8vIHNlZSB2aWV3cy91c2Vycy9fdGVtcGxhdGVfc2FuZGJveF9zYXZlX21vZGFsXHJcbiAgICAgICAgICAgIGJhY2tkcm9wOiAnc3RhdGljJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogc2FuZGJveFNhdmVNb2RhbEN0cmwsXHJcbiAgICAgICAgICAgIHdpbmRvd0NsYXNzOiAnc2FuZGJveC1zYXZlLW1vZGFsJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgb3V0ZXJTY29wZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtYXA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUubWFwO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVzZXJQcm9maWxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBzYW5kYm94U2F2ZU1vZGFsQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIG91dGVyU2NvcGUsIG1hcCwgdXNlclByb2ZpbGUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1hcCA9IG1hcDtcclxuICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUgPSB1c2VyUHJvZmlsZTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1hcERhdGEgPSBtYXAuZGlhZ3JhbS5tb2RlbC50b0pzb24oKTtcclxuICAgICAgICAkc2NvcGUudGh1bWJuYWlsUG5nID0gbWFwLnByZXNlbnRlci5nZXRNYXBUaHVtYm5haWwoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RGVmYXVsdExvZ2luRGF0YSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGVtYWlsOiAnJyxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAnJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdGhpcyBzdHJ1Y3R1cmUgaXMgdXNlZCB0byBzdG9yZSB0aGUgZm9ybSBkYXRhLCBhcyB3ZWxsIGFzIHRoZSB2YWxpZGF0aW9uIGVycm9ycyByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXIuLi5cclxuICAgICAgICBmdW5jdGlvbiBnZXREZWZhdWx0U2lnbnVwRGF0YSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGVtYWlsOiAnJyxcclxuICAgICAgICAgICAgICAgIGZpcnN0X25hbWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdF9uYW1lOiAnJyxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAnJyxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbjogJydcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRzY29wZS5sb2dpbkRhdGEgPSBnZXREZWZhdWx0TG9naW5EYXRhKCk7XHJcbiAgICAgICAgJHNjb3BlLmxvZ2luRXJyb3IgPSAnJztcclxuXHJcbiAgICAgICAgJHNjb3BlLnNpZ251cERhdGEgPSBnZXREZWZhdWx0U2lnbnVwRGF0YSgpO1xyXG4gICAgICAgICRzY29wZS5zaWdudXBFcnJvcnMgPSBnZXREZWZhdWx0U2lnbnVwRGF0YSgpO1xyXG5cclxuICAgICAgICAkc2NvcGUuZG9Mb2dpbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUubG9naW5FcnJvcnMgPSBnZXREZWZhdWx0TG9naW5EYXRhKCk7IC8vIHJlc2V0IGVycm9yc1xyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvc2lnbl9pbi5qc29uJywge1xyXG4gICAgICAgICAgICAgICAgdXNlcjogJHNjb3BlLmxvZ2luRGF0YVxyXG4gICAgICAgICAgICB9KS50aGVuKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIGlzIHtpZDpYWCwgLi4ufVxyXG4gICAgICAgICAgICAgICAgICAgIG91dGVyU2NvcGUuc2V0VXNlcklkKHJlc3BvbnNlLmRhdGEuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dGVyU2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUgPSBvdXRlclNjb3BlLnVzZXJQcm9maWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YSBpcyB7XCJlcnJvclwiOiBcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmRcIn1cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9naW5FcnJvciA9IHJlc3BvbnNlLmRhdGEuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZG9TaWdudXAgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNpZ251cEVycm9ycyA9IGdldERlZmF1bHRTaWdudXBEYXRhKCk7IC8vIHJlc2V0IGVycm9yc1xyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvdXNlcnMuanNvbicsIHtcclxuICAgICAgICAgICAgICAgIHVzZXI6ICRzY29wZS5zaWdudXBEYXRhXHJcbiAgICAgICAgICAgIH0pLnRoZW4oXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRhdGEgaXMgbmV3IHVzZXIgSURcclxuICAgICAgICAgICAgICAgICAgICBvdXRlclNjb3BlLnNldFVzZXJJZChyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRlclNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJQcm9maWxlID0gb3V0ZXJTY29wZS51c2VyUHJvZmlsZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRhdGEgaXMgZS5nLiB7XCJmaXJzdF9uYW1lXCI6W1wiY2FuJ3QgYmUgYmxhbmtcIl0sIC4uLn1cclxuICAgICAgICAgICAgICAgICAgICBfLmVhY2goXy5rZXlzKHJlc3BvbnNlLmRhdGEpLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNpZ251cEVycm9yc1trZXldID0gcmVzcG9uc2UuZGF0YVtrZXldLmpvaW4oJzsgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIHNhbmRib3hTYXZlTW9kYWxDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsICdvdXRlclNjb3BlJywgJ21hcCcsICd1c2VyUHJvZmlsZSddO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0gZWRpdCBzdGF0dXMgbWVzc2FnZSBmb3IgaGVhZGVyIGJhciAtLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuZWRpdFN0YXR1cyA9ICcnO1xyXG5cclxuICAgICRzY29wZS5MQVNUX1VQREFURUQgPSAnJztcclxuICAgICRzY29wZS5SRUFEX09OTFkgPSAnVmlldyBvbmx5JztcclxuICAgICRzY29wZS5TQVZJTkcgPSAnU2F2aW5nLi4uJztcclxuICAgICRzY29wZS5TQVZFX09LID0gJ0FsbCBjaGFuZ2VzIHNhdmVkJztcclxuICAgICRzY29wZS5TQVZFX0ZBSUxFRCA9ICdDaGFuZ2VzIGNvdWxkIG5vdCBiZSBzYXZlZCc7XHJcblxyXG4gICAgJHNjb3BlLnVwZGF0ZUVkaXRTdGF0dXMgPSBmdW5jdGlvbihzKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygndXBkYXRlRWRpdFN0YXR1czogJyArIHMpO1xyXG4gICAgICAgICRzY29wZS5lZGl0U3RhdHVzID0gcztcclxuICAgICAgICBpZiAocyA9PSAkc2NvcGUuU0FWRV9GQUlMRUQpIHtcclxuICAgICAgICAgICAgYWxlcnQoJ0NoYW5nZXMgY291bGQgbm90IGJlIHNhdmVkIC0gcGxlYXNlIGNoZWNrIHlvdXIgbmV0d29yayBjb25uZWN0aW9uLicpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocyA9PSAkc2NvcGUuTEFTVF9VUERBVEVEKSB7XHJcbiAgICAgICAgICAgIHZhciB0aW1lID0gbW9tZW50KCRzY29wZS51cGRhdGVkQXQpLmZyb21Ob3coKTtcclxuICAgICAgICAgICAgdmFyIGJ5ID0gJyc7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUudXBkYXRlZEJ5ID09ICRzY29wZS51c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIGJ5ID0gJ2J5IG1lJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUudXBkYXRlZEJ5TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgYnkgPSAnYnkgJyArICRzY29wZS51cGRhdGVkQnlOYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHNob3cgJ2J5IG1lJyBvbmx5IGZvciBlZGl0YWJsZSBzaGFyZWQgbWFwcz9cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5lZGl0U3RhdHVzID0gJ0xhc3QgdXBkYXRlZCAnICsgdGltZSArICcgJyArIGJ5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTGFzdCBlZGl0IHdhcyBYWCBhZ28gYnkgWVlcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5tYXAuaW5pdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCEkc2NvcGUuc2FuZGJveCkge1xyXG4gICAgICAgICAgICAgICAgLy8gb3ZlcnZpZXcgZGlhZ3JhbVxyXG4gICAgICAgICAgICAgICAgdmFyIG92ZXJ2aWV3ID0gZ28uR3JhcGhPYmplY3QubWFrZShnby5PdmVydmlldywgXCJvdmVydmlldy1kaWFncmFtXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlZDogJHNjb3BlLm1hcC5kaWFncmFtLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBbGlnbm1lbnQ6IGdvLlNwb3QuQ2VudGVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHZhciBvdXRsaW5lID0gb3ZlcnZpZXcuYm94LmVsZW1lbnRzLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lLnN0cm9rZSA9IFwiIzMzM1wiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL2lmICgkc2NvcGUubWFwVXJsKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubWFwLmxvYWQoKTtcclxuICAgICAgICAgICAgLy99IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAkc2NvcGUubWFwLmxvYWRGb3JTYW5kYm94KCk7XHJcbiAgICAgICAgICAgIC8vfVxyXG5cclxuICAgICAgICAgICAgYWRkQmVoYXZpb3JzKCk7XHJcbiAgICAgICAgICAgIGhhbmRsZU5hdmlnYXRpb24oKTtcclxuICAgICAgICAgICAgaGFuZGxlQmFja3NwYWNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbWlzYy4gVUkgYmVoYXZpb3JzIGZvciB0b29sdGlwcywgcG9wdXBzIGV0Yy5cclxuICAgIC8vIFRPRE86IGZpZ3VyZSBvdXQgd2hpY2ggb2YgdGhlc2UgbmVlZCB0byBiZSByZWFwcGxpZWQgYWZ0ZXIgZHluYW1pYyBkYXRhIGNoYW5nZXMgKGUuZy4gTGVzc29uQm9vayBwb3BvdmVycylcclxuICAgIGZ1bmN0aW9uIGFkZEJlaGF2aW9ycygpIHtcclxuXHJcbiAgICAgICAgLy8gTk9URTogd2UgaGF2ZSB0byB1c2UgcmVndWxhciBib290c3RyYXAgdG9vbHRpcHMgZm9yIHRvb2xiYXIgYnV0dG9ucyAoaW5zdGVhZCBvZiBuZy1ib290c3RyYXAgb25lcylcclxuICAgICAgICAvLyBzbyB3ZSBjYW4gdHVybiB0aGVtIG9mZiBmb3IgbW9iaWxlLiBXZSBhbHNvIHB1dCB0aGUgdG9vbHRpcHMgb24gd3JhcHBlcnMgcmF0aGVyIHRoYW4gb24gdGhlIGFjdHVhbCBcclxuICAgICAgICAvLyBidXR0b25zLCBzbyB3ZSBjYW4gYXZvaWQgdGhlIGlzc3VlIG9mIHN0dWNrIHRvb2x0aXBzIGlmIGEgYnV0dG9uIGdldHMgZGlzYWJsZWQgd2hpbGUgdGhlIHRvb2x0aXAgaXMgc2hvd2luZy5cclxuXHJcbiAgICAgICAgaWYgKCEkc2NvcGUuaXNUb3VjaERldmljZSgpKSB7XHJcbiAgICAgICAgICAgIC8vICQoJy50b29sdGlwLXdyYXBwZXInKS50b29sdGlwKHtcclxuICAgICAgICAgICAgLy8gICAgIHBsYWNlbWVudDogJ3RvcCcsXHJcbiAgICAgICAgICAgIC8vICAgICBjb250YWluZXI6ICdib2R5J1xyXG4gICAgICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vICQoJy5kcm9wZG93bi1tZW51IC5idG4nKS50b29sdGlwKHtcclxuICAgICAgICAgICAgLy8gICAgIHBsYWNlbWVudDogJ2xlZnQnLFxyXG4gICAgICAgICAgICAvLyAgICAgY29udGFpbmVyOiAnYm9keSdcclxuICAgICAgICAgICAgLy8gfSk7IC8vIGZvciBsYXlvdXQgb3B0aW9uc1xyXG5cclxuICAgICAgICAgICAgJCgnaGVhZGVyLCAjbWFwLXRpdGxlJykuaG92ZXIoXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCdib2R5LnByZXNlbnRlci1wbGF5aW5nJykuYWRkQ2xhc3MoJ2hpZGUtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keS5wcmVzZW50ZXItcGxheWluZycpLnJlbW92ZUNsYXNzKCdoaWRlLWhlYWRlcicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVOYXZpZ2F0aW9uKCkge1xyXG4gICAgICAgIC8vIGNyb3NzLWJyb3dzZXIgdHdlYWtzOlxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIGh0dHA6Ly93d3cub3BlcmEuY29tL3N1cHBvcnQva2Ivdmlldy84MjcvXHJcbiAgICAgICAgICAgIG9wZXJhLnNldE92ZXJyaWRlSGlzdG9yeU5hdmlnYXRpb25Nb2RlKCdjb21wYXRpYmxlJyk7XHJcbiAgICAgICAgICAgIGhpc3RvcnkubmF2aWdhdGlvbk1vZGUgPSAnY29tcGF0aWJsZSc7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBubyBiaWdnaWUuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpbnN0YWxsIGJlZm9yZS11bmxvYWQgaGFuZGxlcjpcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXhpdE1lc3NhZ2UoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIk5hdmlnYXRpbmcgYXdheSBmcm9tIHlvdXIgTWFwIHdpbGwgY2F1c2UgYW55IHVuc2F2ZWQgY2hhbmdlcyB0byBiZSBsb3N0IFwiICtcclxuICAgICAgICAgICAgICAgIFwiKGFueSBjaGFuZ2VzIHlvdSBtYWtlIGFyZSBhdXRvbWF0aWNhbGx5IHNhdmVkLCBidXQgaXQgdGFrZXMgYSBjb3VwbGUgb2Ygc2Vjb25kcykuXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgICAgICAgJCh3aW5kb3cpLmJpbmQoJ2JlZm9yZXVubG9hZCcsIGV4aXRNZXNzYWdlKTtcclxuXHJcbiAgICAgICAgLy8gcHJldmVudCBleGl0IHByb21wdCB3aGVuIHRoZSB1c2VyIGRlbGliZXJhdGVseSBuYXZpZ2F0ZXMgYXdheTpcclxuXHJcbiAgICAgICAgJCgnI2hlYWRlci1yaWdodCBhJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQod2luZG93KS51bmJpbmQoJ2JlZm9yZXVubG9hZCcsIGV4aXRNZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVCYWNrc3BhY2UoKSB7XHJcbiAgICAgICAgdmFyIEJBQ0tTUEFDRSA9IDg7XHJcblxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdrZXlkb3duJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEJBQ0tTUEFDRSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKCdib2R5IDpmb2N1cycpLmlzKCc6aW5wdXQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHByZXZlbnQgYWNjaWRlbnRhbCBiYWNrc3BhY2Ugd2hlbiBubyBpbnB1dCBoYXMgZm9jdXM6XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKTtcclxuXHJcbiAgICByZXR1cm4gJHNjb3BlO1xyXG59O1xyXG5cclxud2luZG93Lk1hcEVkaXRvckN0cmwuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJGh0dHAnLCAnJHJlc291cmNlJywgJyR0aW1lb3V0JywgJyRtb2RhbCcsICckbG9nJ107IiwiY29uc3QgU2FuZGJhbmtFZGl0b3IgPSByZXF1aXJlKCcuL3NiRWRpdG9yJyk7XHJcblxyXG5jb25zdCBTYW5kYmFua0VkaXRvck9wdGlvbnMgPSBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkcmVzb3VyY2UsICRtb2RhbCwgJGxvZykge1xyXG5cclxuICAgIHRoaXMub3Blbk1vZGFsID0gZnVuY3Rpb24ob3B0aW9ucywgb25TYXZlRGVmYXVsdHMsIG9uVXBkYXRlKSB7XHJcbiAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVfZWRpdG9yX29wdGlvbnNfbW9kYWwuaHRtbCcsIC8vIHNlZSB2aWV3cy9tYXBzL190ZW1wbGF0ZV9lZGl0b3Jfb3B0aW9uc19tb2RhbFxyXG4gICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IG9wdGlvbnNNb2RhbEN0cmwsXHJcbiAgICAgICAgICAgIHdpbmRvd0NsYXNzOiAnb3B0aW9ucy1tb2RhbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uU2F2ZURlZmF1bHRzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25TYXZlRGVmYXVsdHM7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25VcGRhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvblVwZGF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uKCkge30pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIGNvbnRyb2xsZXIgZm9yIG9wdGlvbnMgbW9kYWwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdmFyIG9wdGlvbnNNb2RhbEN0cmwgPSBmdW5jdGlvbigkc2NvcGUsICRtb2RhbEluc3RhbmNlLCBvcHRpb25zLCBvblNhdmVEZWZhdWx0cywgb25VcGRhdGUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLm9wdGlvbnMgPSBvcHRpb25zO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2V0RGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5vayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBvblVwZGF0ZSgkc2NvcGUub3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc2V0RGVmYXVsdHMudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG9uU2F2ZURlZmF1bHRzKCRzY29wZS5vcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgb3B0aW9uc01vZGFsQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnLCAnb3B0aW9ucycsICdvblNhdmVEZWZhdWx0cycsICdvblVwZGF0ZSddO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTYW5kYmFua0VkaXRvck9wdGlvbnM7IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qXHJcbiogIENvcHlyaWdodCAoQykgMTk5OC0yMDE1IGJ5IE5vcnRod29vZHMgU29mdHdhcmUgQ29ycG9yYXRpb24uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiovXHJcblxyXG4vLyBBIGN1c3RvbSBUb29sIGZvciBtb3ZpbmcgYSBsYWJlbCBvbiBhIE5vZGVcclxuXHJcbi8qKlxyXG4qIEBjb25zdHJ1Y3RvclxyXG4qIEBleHRlbmRzIFRvb2xcclxuKiBAY2xhc3NcclxuKiBUaGlzIHRvb2wgb25seSB3b3JrcyB3aGVuIHRoZSBOb2RlIGhhcyBhIGxhYmVsIChhbnkgR3JhcGhPYmplY3QpIG1hcmtlZCB3aXRoXHJcbiogeyBfaXNOb2RlTGFiZWw6IHRydWUgfSB0aGF0IGlzIHBvc2l0aW9uZWQgaW4gYSBTcG90IFBhbmVsLlxyXG4qIEl0IHdvcmtzIGJ5IG1vZGlmeWluZyB0aGF0IGxhYmVsJ3MgR3JhcGhPYmplY3QuYWxpZ25tZW50IHByb3BlcnR5IHRvIGhhdmUgYW5cclxuKiBvZmZzZXQgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBwYW5lbC5cclxuKi9cclxuZnVuY3Rpb24gTm9kZUxhYmVsRHJhZ2dpbmdUb29sKCkge1xyXG4gIGdvLlRvb2wuY2FsbCh0aGlzKTtcclxuICB0aGlzLm5hbWUgPSBcIk5vZGVMYWJlbERyYWdnaW5nXCI7XHJcblxyXG4gIC8qKiBAdHlwZSB7R3JhcGhPYmplY3R9ICovXHJcbiAgdGhpcy5sYWJlbCA9IG51bGw7XHJcbiAgLyoqIEB0eXBlIHtQb2ludH0gKi9cclxuICB0aGlzLl9vcmlnaW5hbEFsaWdubWVudCA9IG51bGw7XHJcbiAgLyoqIEB0eXBlIHtQb2ludH0gKi9cclxuICB0aGlzLl9vcmlnaW5hbENlbnRlciA9IG51bGw7XHJcbn1cclxuZ28uRGlhZ3JhbS5pbmhlcml0KE5vZGVMYWJlbERyYWdnaW5nVG9vbCwgZ28uVG9vbCk7XHJcblxyXG4vKipcclxuKiBUaGlzIHRvb2wgY2FuIG9ubHkgc3RhcnQgaWYgdGhlIG1vdXNlIGhhcyBtb3ZlZCBlbm91Z2ggc28gdGhhdCBpdCBpcyBub3QgYSBjbGljayxcclxuKiBhbmQgaWYgdGhlIG1vdXNlIGRvd24gcG9pbnQgaXMgb24gYSBHcmFwaE9iamVjdCBcImxhYmVsXCIgaW4gYSBTcG90IFBhbmVsLFxyXG4qIGFzIGRldGVybWluZWQgYnkgZmluZExhYmVsKCkuXHJcbiogQHRoaXMge05vZGVMYWJlbERyYWdnaW5nVG9vbH1cclxuKiBAcmV0dXJuIHtib29sZWFufVxyXG4qL1xyXG5Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wucHJvdG90eXBlLmNhblN0YXJ0ID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKCFnby5Ub29sLnByb3RvdHlwZS5jYW5TdGFydC5jYWxsKHRoaXMpKSByZXR1cm4gZmFsc2U7XHJcbiAgdmFyIGRpYWdyYW0gPSB0aGlzLmRpYWdyYW07XHJcbiAgaWYgKGRpYWdyYW0gPT09IG51bGwpIHJldHVybiBmYWxzZTtcclxuICAvLyByZXF1aXJlIGxlZnQgYnV0dG9uICYgdGhhdCBpdCBoYXMgbW92ZWQgZmFyIGVub3VnaCBhd2F5IGZyb20gdGhlIG1vdXNlIGRvd24gcG9pbnQsIHNvIGl0IGlzbid0IGEgY2xpY2tcclxuICB2YXIgZSA9IGRpYWdyYW0ubGFzdElucHV0O1xyXG4gIGlmICghZS5sZWZ0KSByZXR1cm4gZmFsc2U7XHJcbiAgaWYgKCF0aGlzLmlzQmV5b25kRHJhZ1NpemUoKSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICByZXR1cm4gdGhpcy5maW5kTGFiZWwoKSAhPT0gbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiogRnJvbSB0aGUgR3JhcGhPYmplY3QgYXQgdGhlIG1vdXNlIHBvaW50LCBzZWFyY2ggdXAgdGhlIHZpc3VhbCB0cmVlIHVudGlsIHdlIGdldCB0b1xyXG4qIGFuIG9iamVjdCB0aGF0IGhhcyB0aGUgXCJfaXNOb2RlTGFiZWxcIiBwcm9wZXJ0eSBzZXQgdG8gdHJ1ZSwgdGhhdCBpcyBpbiBhIFNwb3QgUGFuZWwsXHJcbiogYW5kIHRoYXQgaXMgbm90IHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoYXQgUGFuZWwgKGkuZS4gbm90IHRoZSBtYWluIGVsZW1lbnQgb2YgdGhlIHBhbmVsKS5cclxuKiBAdGhpcyB7Tm9kZUxhYmVsRHJhZ2dpbmdUb29sfVxyXG4qIEByZXR1cm4ge0dyYXBoT2JqZWN0fSBUaGlzIHJldHVybnMgbnVsbCBpZiBubyBzdWNoIGxhYmVsIGlzIGF0IHRoZSBtb3VzZSBkb3duIHBvaW50LlxyXG4qL1xyXG5Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wucHJvdG90eXBlLmZpbmRMYWJlbCA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBkaWFncmFtID0gdGhpcy5kaWFncmFtO1xyXG4gIHZhciBlID0gZGlhZ3JhbS5maXJzdElucHV0O1xyXG4gIHZhciBlbHQgPSBkaWFncmFtLmZpbmRPYmplY3RBdChlLmRvY3VtZW50UG9pbnQsIG51bGwsIG51bGwpO1xyXG5cclxuICAvL2lmIChlbHQgPT09IG51bGwgfHwgIShlbHQucGFydCBpbnN0YW5jZW9mIGdvLk5vZGUpKSByZXR1cm4gbnVsbDtcclxuICBpZiAoZWx0Ll9pc05vZGVMYWJlbCkgcmV0dXJuIGVsdDtcclxuICB3aGlsZSAoZWx0LnBhbmVsICE9PSBudWxsICYmIGVsdC5wYW5lbC5lbHQoMCkgIT09IGVsdCkge1xyXG4gICAgaWYgKGVsdC5faXNOb2RlTGFiZWwpIHJldHVybiBlbHQ7XHJcbiAgICBlbHQgPSBlbHQucGFuZWw7XHJcbiAgfVxyXG4gIHJldHVybiBudWxsO1xyXG59O1xyXG5cclxuLyoqXHJcbiogU3RhcnQgYSB0cmFuc2FjdGlvbiwgY2FsbCBmaW5kTGFiZWwgYW5kIHJlbWVtYmVyIGl0IGFzIHRoZSBcImxhYmVsXCIgcHJvcGVydHksXHJcbiogYW5kIHJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgdGhlIGxhYmVsJ3MgYWxpZ25tZW50IHByb3BlcnR5LlxyXG4qIEB0aGlzIHtOb2RlTGFiZWxEcmFnZ2luZ1Rvb2x9XHJcbiovXHJcbk5vZGVMYWJlbERyYWdnaW5nVG9vbC5wcm90b3R5cGUuZG9BY3RpdmF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMuc3RhcnRUcmFuc2FjdGlvbihcIlNoaWZ0ZWQgTGFiZWxcIik7XHJcbiAgdGhpcy5sYWJlbCA9IHRoaXMuZmluZExhYmVsKCk7XHJcbiAgaWYgKHRoaXMubGFiZWwgIT09IG51bGwpIHtcclxuICAgIHRoaXMuX29yaWdpbmFsQWxpZ25tZW50ID0gdGhpcy5sYWJlbC5hbGlnbm1lbnQuY29weSgpO1xyXG4gICAgdmFyIG1haW4gPSB0aGlzLmxhYmVsLnBhbmVsLmZpbmRNYWluRWxlbWVudCgpO1xyXG4gICAgdGhpcy5fb3JpZ2luYWxDZW50ZXIgPSBtYWluLmdldERvY3VtZW50UG9pbnQoZ28uU3BvdC5DZW50ZXIpO1xyXG4gIH1cclxuICBnby5Ub29sLnByb3RvdHlwZS5kb0FjdGl2YXRlLmNhbGwodGhpcyk7XHJcbn1cclxuXHJcbi8qKlxyXG4qIFN0b3AgYW55IG9uZ29pbmcgdHJhbnNhY3Rpb24uXHJcbiogQHRoaXMge05vZGVMYWJlbERyYWdnaW5nVG9vbH1cclxuKi9cclxuTm9kZUxhYmVsRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5kb0RlYWN0aXZhdGUgPSBmdW5jdGlvbigpIHtcclxuICBnby5Ub29sLnByb3RvdHlwZS5kb0RlYWN0aXZhdGUuY2FsbCh0aGlzKTtcclxuICB0aGlzLnN0b3BUcmFuc2FjdGlvbigpO1xyXG59XHJcblxyXG4vKipcclxuKiBDbGVhciBhbnkgcmVmZXJlbmNlIHRvIGEgbGFiZWwgZWxlbWVudC5cclxuKiBAdGhpcyB7Tm9kZUxhYmVsRHJhZ2dpbmdUb29sfVxyXG4qL1xyXG5Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wucHJvdG90eXBlLmRvU3RvcCA9IGZ1bmN0aW9uKCkge1xyXG4gIHRoaXMubGFiZWwgPSBudWxsO1xyXG4gIGdvLlRvb2wucHJvdG90eXBlLmRvU3RvcC5jYWxsKHRoaXMpO1xyXG59XHJcblxyXG4vKipcclxuKiBSZXN0b3JlIHRoZSBsYWJlbCdzIG9yaWdpbmFsIHZhbHVlIGZvciBHcmFwaE9iamVjdC5hbGlnbm1lbnQuXHJcbiogQHRoaXMge05vZGVMYWJlbERyYWdnaW5nVG9vbH1cclxuKi9cclxuTm9kZUxhYmVsRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5kb0NhbmNlbCA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICh0aGlzLmxhYmVsICE9PSBudWxsKSB7XHJcbiAgICB0aGlzLmxhYmVsLmFsaWdubWVudCA9IHRoaXMuX29yaWdpbmFsQWxpZ25tZW50O1xyXG4gIH1cclxuICBnby5Ub29sLnByb3RvdHlwZS5kb0NhbmNlbC5jYWxsKHRoaXMpO1xyXG59XHJcblxyXG4vKipcclxuKiBEdXJpbmcgdGhlIGRyYWcsIGNhbGwgdXBkYXRlQWxpZ25tZW50IGluIG9yZGVyIHRvIHNldCB0aGUgR3JhcGhPYmplY3QuYWxpZ25tZW50IG9mIHRoZSBsYWJlbC5cclxuKiBAdGhpcyB7Tm9kZUxhYmVsRHJhZ2dpbmdUb29sfVxyXG4qL1xyXG5Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wucHJvdG90eXBlLmRvTW91c2VNb3ZlID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKCF0aGlzLmlzQWN0aXZlKSByZXR1cm47XHJcbiAgdGhpcy51cGRhdGVBbGlnbm1lbnQoKTtcclxufVxyXG5cclxuLyoqXHJcbiogQXQgdGhlIGVuZCBvZiB0aGUgZHJhZywgdXBkYXRlIHRoZSBhbGlnbm1lbnQgb2YgdGhlIGxhYmVsIGFuZCBmaW5pc2ggdGhlIHRvb2wsXHJcbiogY29tcGxldGluZyBhIHRyYW5zYWN0aW9uLlxyXG4qIEB0aGlzIHtOb2RlTGFiZWxEcmFnZ2luZ1Rvb2x9XHJcbiovXHJcbk5vZGVMYWJlbERyYWdnaW5nVG9vbC5wcm90b3R5cGUuZG9Nb3VzZVVwID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKCF0aGlzLmlzQWN0aXZlKSByZXR1cm47XHJcbiAgdGhpcy51cGRhdGVBbGlnbm1lbnQoKTtcclxuICB0aGlzLnRyYW5zYWN0aW9uUmVzdWx0ID0gXCJTaGlmdGVkIExhYmVsXCI7XHJcbiAgdGhpcy5zdG9wVG9vbCgpO1xyXG59XHJcblxyXG4vKipcclxuKiBTYXZlIHRoZSBsYWJlbCdzIEdyYXBoT2JqZWN0LmFsaWdubWVudCBhcyBhbiBhYnNvbHV0ZSBvZmZzZXQgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBTcG90IFBhbmVsXHJcbiogdGhhdCB0aGUgbGFiZWwgaXMgaW4uXHJcbiogQHRoaXMge05vZGVMYWJlbERyYWdnaW5nVG9vbH1cclxuKi9cclxuTm9kZUxhYmVsRHJhZ2dpbmdUb29sLnByb3RvdHlwZS51cGRhdGVBbGlnbm1lbnQgPSBmdW5jdGlvbigpIHtcclxuICBpZiAodGhpcy5sYWJlbCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gIHZhciBsYXN0ID0gdGhpcy5kaWFncmFtLmxhc3RJbnB1dC5kb2N1bWVudFBvaW50O1xyXG4gIHZhciBjbnRyID0gdGhpcy5fb3JpZ2luYWxDZW50ZXI7XHJcbiAgdGhpcy5sYWJlbC5hbGlnbm1lbnQgPSBuZXcgZ28uU3BvdCgwLjUsIDAuNSwgbGFzdC54IC0gY250ci54LCBsYXN0LnkgLSBjbnRyLnkpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE5vZGVMYWJlbERyYWdnaW5nVG9vbDsiLCJjb25zdCBTYW5kYmFua0VkaXRvciA9IHJlcXVpcmUoJy4vc2JFZGl0b3InKTtcclxuLy8gZnVuY3Rpb25zIGZvciB0aGUgZ2VuZXJhdG9yIChha2EgVGhpbmtRdWVyeSlcclxuXHJcbnZhciBHZW5lcmF0b3JDdHJsID0gZnVuY3Rpb24gKCRzY29wZSkge1xyXG5cclxuICAgIHZhciBtYXAgPSAkc2NvcGUubWFwO1xyXG4gICAgdmFyIGRpYWdyYW0gPSAkc2NvcGUubWFwLmRpYWdyYW07XHJcblxyXG4gICAgJHNjb3BlLmNvbmNlcHQxID0gJyc7XHJcbiAgICAkc2NvcGUuY29uY2VwdDIgPSAnJztcclxuXHJcbiAgICAkc2NvcGUuZWNob0NvbmNlcHQxID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS5jb25jZXB0MSB8fCAnLi4uJztcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmVjaG9Db25jZXB0MiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUuY29uY2VwdDIgfHwgJy4uLic7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zd2FwQ29uY2VwdHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdG1wID0gJHNjb3BlLmNvbmNlcHQxO1xyXG4gICAgICAgICRzY29wZS5jb25jZXB0MSA9ICRzY29wZS5jb25jZXB0MjtcclxuICAgICAgICAkc2NvcGUuY29uY2VwdDIgPSB0bXA7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUubWFwSXQgPSBmdW5jdGlvbihxdWVzdGlvbikge1xyXG4gICAgICAgIHN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgIGRpYWdyYW0gPSBtYXAuZGlhZ3JhbTtcclxuICAgICAgICBtYXAuYXV0b3NhdmUuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICgkc2NvcGUuc2FuZGJveCkge1xyXG4gICAgICAgICAgICBkaWFncmFtLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmaWd1cmUgb3V0IGxvY2F0aW9uIGZvciBpbnNlcnRlZCBzdHVmZlxyXG4gICAgICAgIHZhciBkYiA9IG1hcC5jb21wdXRlTWFwQm91bmRzKCk7XHJcbiAgICAgICAgdmFyIHggPSBkYi54ICsgZGIud2lkdGggKyAyMDA7XHJcbiAgICAgICAgdmFyIHkgPSBkYi55O1xyXG4gICAgICAgIGlmIChpc05hTih4KSB8fCBpc05hTih5KSkge1xyXG4gICAgICAgICAgICB4ID0geSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3gsIHk6ICcgKyB4ICsgJywgJyArIHkpO1xyXG5cclxuICAgICAgICAvLyBpbnNlcnQgdGhlIHN0dWZmIGFuZCBkZXNlbGVjdCBpdFxyXG4gICAgICAgIHF1ZXN0aW9uKHgseSk7XHJcbiAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpOyBcclxuXHJcbiAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIGRpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgICAgICBcclxuICAgICAgICBtYXAudWkucmVzZXRab29tKCk7XHJcblxyXG4gICAgICAgIG1hcC5hdXRvc2F2ZS5zYXZlT25Nb2RlbENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIG1hcC5hdXRvc2F2ZS5zYXZlKCdlZGl0X2dlbmVyYXRvcicpO1xyXG4gICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZWxlY3RlZFF1ZXN0aW9uID0gbnVsbDtcclxuXHJcbiAgICAkc2NvcGUuc2VsZWN0UXVlc3Rpb24gPSBmdW5jdGlvbihxdWVzdGlvbikge1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZFF1ZXN0aW9uID0gcXVlc3Rpb247XHJcbiAgICAgICAgaWYgKCRzY29wZS5zYW5kYm94KSB7XHJcbiAgICAgICAgICAgICRzY29wZS5tYXBJdChxdWVzdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTsgICAgXHJcblxyXG4gICAgJHNjb3BlLnN1cnByaXNlTWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIga2V5cyA9IF8ua2V5cygkc2NvcGUucXVlcmllcyk7XHJcbiAgICAgICAgdmFyIGkgPSBfLnJhbmRvbSgwLCBrZXlzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIHZhciBxdWVzdGlvbiA9ICRzY29wZS5xdWVyaWVzW2tleXNbaV1dO1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZFF1ZXN0aW9uID0gcXVlc3Rpb247XHJcbiAgICAgICAgJHNjb3BlLm1hcEl0KHF1ZXN0aW9uKTtcclxuXHJcbiAgICAgICAgJCgnI3F1ZXN0aW9ucycpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IGkgKiAzMCB9LCAxMDAwKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLSBmdW5jdGlvbnMgZm9yIGNyZWF0aW5nIGVhY2ggb2YgdGhlIHN0cnVjdHVyZXMgLSBzZWUgdmlld3MvbWFwcy9nZW5lcmF0b3JfdGFiIC0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLnF1ZXJpZXMgPSB7XHJcblxyXG4gICAgICAgIFdIQVRfSVM6IGZ1bmN0aW9uKHgsIHkpIHsgIC8vIDFcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcz8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgV0hBVF9JU19OT1Q6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMlxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMS5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzIG5vdD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzIG5vdD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzIG5vdD8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBESVNUSU5HVUlTSF9CRVRXRUVOOiBmdW5jdGlvbih4LCB5KSB7IC8vIDNcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcz8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMi5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ2lzPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdpcz8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBDT01QQVJFX0NPTlRSQVNUOiBmdW5jdGlvbih4LCB5KSB7IC8vIDRcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMTUwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAxNTAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMS5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcyLmRhdGEsICdkZmxhZycsIHRydWUpO1xyXG4gICAgICAgICAgICB2YXIgcnRoaW5nMSA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdjb250cmFzdCcpO1xyXG4gICAgICAgICAgICB2YXIgcnRoaW5nMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdjb21wYXJlJyk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHJ0aGluZzEubGFiZWxlZExpbmsuZGF0YSwgJ3R5cGUnLCAndG9Gcm9tJyk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHJ0aGluZzIubGFiZWxlZExpbmsuZGF0YSwgJ3R5cGUnLCAndG9Gcm9tJyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUEFSVFNfT0Y6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gNVxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUEFSVF9PRjogZnVuY3Rpb24oeCwgeSkgeyAvLyA2XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJ3BhcnQgb2Y/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUEFSVFNfSEFWRV9QQVJUUzogZnVuY3Rpb24oeCwgeSkgeyAvLyA3XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoY2hpbGQxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGNoaWxkMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGNoaWxkMiwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChjaGlsZDIsICdwYXJ0PycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFJfUEFSVFM6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gOFxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgdmFyIHJ0aGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChydGhpbmcsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQocnRoaW5nLCAncGFydD8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBQX1BBUlRTOiBmdW5jdGlvbih4LCB5KSB7IC8vIDlcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMzAwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludCBvZiAnICsgJHNjb3BlLmVjaG9Db25jZXB0MigpICsgJz8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQgb2YgJyArICRzY29wZS5lY2hvQ29uY2VwdDIoKSArICc/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDMgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydCBzZWVuIGZyb20gdmlld3BvaW50IG9mICcgKyAkc2NvcGUuZWNob0NvbmNlcHQyKCkgKyAnPycpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayh0aGluZzIsIHRoaW5nMSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayh0aGluZzIsIGNoaWxkMSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayh0aGluZzIsIGNoaWxkMik7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayh0aGluZzIsIGNoaWxkMyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUlNfVE9fQU5EX0JZOiBmdW5jdGlvbih4LCB5KSB7IC8vIDEwXHJcbiAgICAgICAgICAgIHZhciByZWxhdGVkMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAncmVsYXRlZCBpZGVhPycpO1xyXG4gICAgICAgICAgICB2YXIgcmVsYXRlZDIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDMwMCwgeSArIDUwLCAncmVsYXRlZCBpZGVhPycpO1xyXG4gICAgICAgICAgICB2YXIgcmVsYXRlZDMgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDUwLCB5ICsgMzAwLCAncmVsYXRlZCBpZGVhPycpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDEzMCwgeSArIDEzMCwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rKHJlbGF0ZWQxLCB0aGluZyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGluayhyZWxhdGVkMiwgdGhpbmcpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmsocmVsYXRlZDMsIHRoaW5nKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDUwMCwgeSArIDE1MCwgJ2lkZWE/Jyk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDc1MCwgeSArIDE1MCwgJ2lkZWE/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgV0hBVF9JU19SOiBmdW5jdGlvbih4LCB5KSB7IC8vIDExXHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAnaWRlYT8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBQQVJUX1JTX0FSRTogZnVuY3Rpb24oeCwgeSkgeyAvLyAxMlxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAzMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQyID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDMgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoY2hpbGQxLmRhdGEsICdsb2MnLCAnLTIwIDExMCcpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShjaGlsZDIuZGF0YSwgJ2xvYycsICc4MCAxMTAnKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoY2hpbGQzLmRhdGEsICdsb2MnLCAnMzAgMTkwJyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQxLCBjaGlsZDIsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQyLCBjaGlsZDMsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQzLCBjaGlsZDEsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUEFSVF9SU19FWElTVDogZnVuY3Rpb24oeCwgeSkgeyAvLyAxM1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSwgJ3JpZ2h0Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDEyID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDEzID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMjEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMjIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMjMgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rKHRoaW5nMSwgdGhpbmcyKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDExLCBjaGlsZDIxLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMTIsIGNoaWxkMjIsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQxMywgY2hpbGQyMywgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBSU19XSVRIX09USEVSUzogZnVuY3Rpb24oeCwgeSkgeyAvLyAxNFxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAyMDAsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDIwMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMyA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMjAwLCB5ICsgMjAwLCAnYW5vdGhlciB0aGluZycpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmc0ID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyMDAsIHkgKyAyMDAsICdhbm90aGVyIHRoaW5nJyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzMsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzQsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcyLCB0aGluZzQsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmczLCB0aGluZzQsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUEFSVFNfT0ZfUDogZnVuY3Rpb24oeCwgeSkgeyAvLyAxNVxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQzID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDEwMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHRoaW5nMSwgdGhpbmcyKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBQT0lOVF9GT1I6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTZcclxuICAgICAgICAgICAgdmFyIHRoaW5nID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICduZXcgcGVyc3BlY3RpdmUnKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMTUwLCB5ICsgMTUwLCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAxNTAsIHkgKyAxNTAsICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIHZhciBydGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcsIHJ0aGluZyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgSEFTX01VTFRJUExFX1BTOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE3XHJcbiAgICAgICAgICAgIHZhciBwb2ludDEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSArIDUwLCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICB2YXIgcG9pbnQyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHksICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBwb2ludDMgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDUwMCwgeSArIDUwLCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5ICsgMjUwLCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsocG9pbnQxLCB2aWV3KTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50Miwgdmlldyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDMsIHZpZXcpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBBUlRTX0ZST01fTVVMVElQTEVfUFM6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMThcclxuICAgICAgICAgICAgdmFyIHBvaW50MSA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMTAwLCB5LCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICB2YXIgcG9pbnQyID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHkgKyAxMjUsICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBwb2ludDMgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDEwMCwgeSArIDI1MCwgJ3ZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAxNTAsIHkgKyAyNSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZywgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZywgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMyA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZywgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50MSwgY2hpbGQxKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50MSwgY2hpbGQyKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50MiwgY2hpbGQyKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50MywgY2hpbGQzKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBXSEFUX0FCT1VUOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE5XHJcbiAgICAgICAgICAgICRzY29wZS5xdWVyaWVzLldIQVRfSVMoeCwgeSk7XHJcbiAgICAgICAgICAgICRzY29wZS5xdWVyaWVzLlBBUlRTX09GKHggKyAzMDAsIHkpO1xyXG4gICAgICAgICAgICAkc2NvcGUucXVlcmllcy5QQVJUU19GUk9NX01VTFRJUExFX1BTKHggKyA3MDAsIHkpO1xyXG4gICAgICAgICAgICAkc2NvcGUucXVlcmllcy5SU19UT19BTkRfQlkoeCwgeSArIDQwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTsgLy8gcXVlcmllc1xyXG5cclxufTtcclxuXHJcbkdlbmVyYXRvckN0cmwuJGluamVjdCA9IFsnJHNjb3BlJ107XHJcblxyXG5cclxuU2FuZGJhbmtFZGl0b3IuR2VuZXJhdG9yID0gZnVuY3Rpb24gKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIE5COiBnZW5lcmF0b3IgaXMgb3BlbmVkIG9uIGxvYWQgb2YgZW1wdHkgbWFwOyBzZWUgbWFwLmpzOmxvYWQoKVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBhIHRhYiBpcyBvcGVuZWQgb3IgY2xvc2VkXHJcbiAgICB0aGlzLmN1cnJlbnRUYWJDaGFuZ2VkID0gZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKG9sZFZhbHVlID09IG1hcC51aS5UQUJfSURfR0VORVJBVE9SKSB7IC8vIGNsb3NpbmcgdGFiXHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG5ld1ZhbHVlID09IG1hcC51aS5UQUJfSURfR0VORVJBVE9SKSB7IC8vIG9wZW5pbmcgdGFiXHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZCh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoZXNlIGdldCBmaWx0ZXJlZCBvdXQgaW4gTGVzc29uQm9va1xyXG4gICAgdGhpcy5nZXRQbGFjZWhvbGRlcklkZWFOYW1lcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBbJ2lzPycsICdpcyBub3Q/JywgJ3BhcnQ/JywgJ3ZpZXdwb2ludD8nLCAncmVsYXRlZCBpZGVhPycsICdpZGVhPycsXHJcbiAgICAgICAgICAgICAgICAncGFydCBzZWVuIGZyb20gdmlld3BvaW50PycsICdjb250cmFzdD8nLCAnY29tcGFyaXNvbj8nLCAncmVsYXRpb25zaGlwPyddO1xyXG4gICAgfTtcclxufTtcclxuIiwiY29uc3QgU2FuZGJhbmtFZGl0b3IgPSByZXF1aXJlKCcuL3NiRWRpdG9yJyk7XHJcblxyXG4vLyBsYXlvdXRzIHVzZWQgaW4gdGhlIGVkaXRvciwgZm9yIHRoZSBkaWFncmFtIG9yIGluZGl2aWR1YWwgR3JvdXBzLCBwbHVzIGxheW91dC1yZWxhdGVkIGZ1bmN0aW9uc1xyXG5cclxuU2FuZGJhbmtFZGl0b3IuTGF5b3V0cyA9IGZ1bmN0aW9uKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIGNvbnN0IG1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9NZXRhTWFwJyk7XHJcbiAgICBjb25zdCBjb25maWcgPSBtZXRhTWFwLmNvbmZpZy5jYW52YXM7XHJcbiAgICBjb25zdCBDT05TVEFOVFMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvY29uc3RhbnRzJyk7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7fTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmRpYWdyYW07XHJcbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PSAnSW5pdGlhbExheW91dENvbXBsZXRlZCcpIHtcclxuICAgICAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICBkaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1NlbGVjdGlvbk1vdmVkJykge1xyXG4gICAgICAgICAgICB1cGRhdGVTZWxlY3RlZFBhcnRMb2NhdGlvbkRhdGEoZSk7XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1NlbGVjdGlvbkRlbGV0ZWQnKSB7XHJcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnUGFydENyZWF0ZWQnKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ0xheW91dHMsIFBhcnRDcmVhdGVkJyk7XHJcbiAgICAgICAgICAgIC8vIHNldE5ld1BhcnRMb2NhdGlvbkRhdGEoZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1BhcnRSZXNpemVkJykge1xyXG4gICAgICAgICAgICBzZXRSZXNpemVkUGFydERpbWVuc2lvbkRhdGEoZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ0xpbmtEcmF3bicpIHtcclxuICAgICAgICAgICAgYWRqdXN0TGlua0xheW91dChlLnN1YmplY3QpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdMaW5rUmVsaW5rZWQnKSB7XHJcbiAgICAgICAgICAgIGFkanVzdExpbmtMYXlvdXQoZS5zdWJqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBoYW5kbGUgbG9jYXRpb24vc2l6ZSBhdHRyaWJ1dGVzIGZvciBub2RlcyAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBvbmx5IHVwZGF0ZSB3L2ggZm9yIHNsaWRlcywgYXMgYWxsIG90aGVyIG5vZGUgdHlwZXMgaGF2ZSBmaXhlZCBkaW1lbnNpb25zIGFjY29yZGluZyB0byB0aGUgdGVtcGxhdGVzXHJcbiAgICBmdW5jdGlvbiBzZXRSZXNpemVkUGFydERpbWVuc2lvbkRhdGEoZSkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmRpYWdyYW07XHJcbiAgICAgICAgdmFyIG5vZGUgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5jYXRlZ29yeSA9PSAnc2xpZGUnKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ1BhcnRSZXNpemVkOiAnICsgbm9kZS5wYXJ0LmFjdHVhbEJvdW5kcyk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5vZGUuZGF0YSwgJ3dpZHRoJywgbm9kZS5wYXJ0LmFjdHVhbEJvdW5kcy53aWR0aCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5vZGUuZGF0YSwgJ2hlaWdodCcsIG5vZGUucGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0IHRoZSAnbG9jJyBhdHRyaWJ1dGUgZm9yIGEgbmV3IHRvcC1sZXZlbCBub2RlIChjcmVhdGVkIGJ5IGRvdWJsZS1jbGlja2luZyksIHRvIHN1cHBvcnQgZnJlZWhhbmQgbGF5b3V0XHJcbiAgICB0aGlzLnNldE5ld1BhcnRMb2NhdGlvbkRhdGEgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5wYXJ0KSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIG1hcC5kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShub2RlLmRhdGEsICdsb2MnLCBub2RlLnBhcnQubG9jYXRpb24ueCArICcgJyArIG5vZGUucGFydC5sb2NhdGlvbi55KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gdXBkYXRlcyB0aGUgJ2xvYycgYXR0cmlidXRlIGZvciBlYWNoIHNlbGVjdGVkIHBhcnQsIHRvIHN1cHBvcnQgZnJlZWhhbmQgbGF5b3V0IChkb2VzIG5vdCBhcHBseSB0byBzbGlkZXMpXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3RlZFBhcnRMb2NhdGlvbkRhdGEoZSkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmRpYWdyYW07XHJcbiAgICAgICAgdmFyIGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkgeyAvLyB0aGluZ1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRYID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRZID0gMDtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0LmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFggPSBwYXJ0LmNvbnRhaW5pbmdHcm91cC5sb2NhdGlvbi54O1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFkgPSBwYXJ0LmNvbnRhaW5pbmdHcm91cC5sb2NhdGlvbi55O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbW92aW5nIGdyb3VwLCBzdWJqZWN0OiAnICsgZS5zdWJqZWN0ICsgJywgcGFydDogJyArIHBhcnQgKyAnLCBoZWlnaHQ6ICcgKyBwYXJ0LnBhcnQuZGVzaXJlZFNpemUuaGVpZ2h0ICsgJywgbG9jYXRpb246ICcgKyBwYXJ0LnBhcnQubG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJ0LmxvY2F0aW9uLngpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbG9jJywgKHBhcnQubG9jYXRpb24ueCAtIHBhcmVudFgpICsgJyAnICsgKHBhcnQubG9jYXRpb24ueSAtIHBhcmVudFkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSBjaGFuZ2luZyBsYXlvdXRzIG9mIHRoaW5ncyBhbmQgdGhlaXIgZGVzY2VuZGFudHMgLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuZnJvbUFuZFRvTm9kZXNBcmVWaXNpYmxlID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHJldHVybiBsaW5rLmZyb21Ob2RlICYmXHJcbiAgICAgICAgICAgIGxpbmsudG9Ob2RlICYmXHJcbiAgICAgICAgICAgICFzZWxmLmhhc0NvbGxhcHNlZEFuY2VzdG9yKGxpbmsuZnJvbU5vZGUpICYmXHJcbiAgICAgICAgICAgICFzZWxmLmhhc0NvbGxhcHNlZEFuY2VzdG9yKGxpbmsudG9Ob2RlKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5sYWJlbE5vZGVJc1Zpc2libGUgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsubGFiZWxOb2Rlcy5jb3VudCAmJiBsaW5rLmxhYmVsTm9kZXMuZmlyc3QoKS52aXNpYmxlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhc0NvbGxhcHNlZEFuY2VzdG9yID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFncm91cC5jb250YWluaW5nR3JvdXAuaXNTdWJHcmFwaEV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyB0aGlzLmhhc0xpbmtMYWJlbEFuY2VzdG9yID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgIC8vICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgLy8gICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgLy8gICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIGVsc2UgaWYgKGdyb3VwLmNvbnRhaW5pbmdHcm91cC5pc0xpbmtMYWJlbCkge1xyXG4gICAgLy8gICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICAgICAgZWxzZSB7XHJcbiAgICAvLyAgICAgICAgICAgICBncm91cCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgIC8vICAgICAgICAgfVxyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH07XHJcblxyXG4gICAgdGhpcy5nZXRIaWdoZXN0QW5jZXN0b3JXaXRoTGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXAsIGxheW91dE5hbWVzKSB7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgaWYgKCFncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChfLmNvbnRhaW5zKGxheW91dE5hbWVzLCBncm91cC5jb250YWluaW5nR3JvdXAuZGF0YS5sYXlvdXQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAgPSBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYXJlU2lzdGVyc0luSW52ZW50b3J5TGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXAxLCBncm91cDIpIHtcclxuICAgICAgICByZXR1cm4gZ3JvdXAxLmNvbnRhaW5pbmdHcm91cCA9PSBncm91cDIuY29udGFpbmluZ0dyb3VwICYmXHJcbiAgICAgICAgICAgIGdyb3VwMS5jb250YWluaW5nR3JvdXAgJiZcclxuICAgICAgICAgICAgXy5jb250YWlucyhbJ2xlZnQnLCAncmlnaHQnXSwgZ3JvdXAxLmNvbnRhaW5pbmdHcm91cC5kYXRhLmxheW91dCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNOb3RXaXRoaW5JbnZlbnRvcnlMYXlvdXQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiAhc2VsZi5pc1dpdGhpbkludmVudG9yeUxheW91dChncm91cCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNSVGhpbmdXaXRoaW5JbnZlbnRvcnlMYXlvdXQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBncm91cC5pc0xpbmtMYWJlbCAmJiBzZWxmLmlzV2l0aGluSW52ZW50b3J5TGF5b3V0KGdyb3VwKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1dpdGhpbkludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuaXNXaXRoaW5MYXlvdXQoZ3JvdXAsIFsnbGVmdCcsICdyaWdodCddKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1dpdGhpbkxlZnRJbnZlbnRvcnlMYXlvdXQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmlzV2l0aGluTGF5b3V0KGdyb3VwLCBbJ2xlZnQnXSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNXaXRoaW5SaWdodEludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuaXNXaXRoaW5MYXlvdXQoZ3JvdXAsIFsncmlnaHQnXSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNXaXRoaW5GcmVlaGFuZExheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuaXNXaXRoaW5MYXlvdXQoZ3JvdXAsIFsnZnJlZWhhbmQnXSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNXaXRoaW5TdGFja2VkTGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydzdGFja2VkJ10pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzV2l0aGluTGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXAsIGxheW91dE5hbWVzKSB7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgaWYgKCFncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2lzV2l0aGluTGF5b3V0OiAnICsgZ3JvdXAgKyAnbGF5b3V0czogJyArIGxheW91dE5hbWVzLmpvaW4oKSArICc6IGZhbHNlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5jb250YWlucyhsYXlvdXROYW1lcywgZ3JvdXAuY29udGFpbmluZ0dyb3VwLmRhdGEubGF5b3V0KSkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnaXNXaXRoaW5MYXlvdXQ6ICcgKyBncm91cCArICdsYXlvdXRzOiAnICsgbGF5b3V0TmFtZXMuam9pbigpICsgJzogdHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBncm91cCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zaG93TGVmdFRleHRCbG9jayA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuaXNXaXRoaW5SaWdodEludmVudG9yeUxheW91dChncm91cCkgJiZcclxuICAgICAgICAgICAgIXNlbGYuaXNXaXRoaW5TdGFja2VkTGF5b3V0KGdyb3VwKSAmJlxyXG4gICAgICAgICAgICAhZ3JvdXAuaXNMaW5rTGFiZWw7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2hvd1JpZ2h0VGV4dEJsb2NrID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxlZnRJbnZlbnRvcnlMYXlvdXQoZ3JvdXApICYmXHJcbiAgICAgICAgICAgICFzZWxmLmlzV2l0aGluU3RhY2tlZExheW91dChncm91cCkgJiZcclxuICAgICAgICAgICAgIWdyb3VwLmlzTGlua0xhYmVsO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNldERlc2NlbmRhbnRMYXlvdXRzID0gZnVuY3Rpb24oZ3JvdXAsIGxheW91dE5hbWUpIHtcclxuICAgICAgICBpZiAobGF5b3V0TmFtZSA9PSAnbGVmdCcgfHwgbGF5b3V0TmFtZSA9PSAncmlnaHQnIHx8IGxheW91dE5hbWUgPT0gJ3N0YWNrZWQnKSB7XHJcbiAgICAgICAgICAgIHZhciBpdCA9IGdyb3VwLm1lbWJlclBhcnRzLml0ZXJhdG9yO1xyXG4gICAgICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiAhcGFydC5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnQuZGF0YS5sYXlvdXQgPSBsYXlvdXROYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0RGVzY2VuZGFudExheW91dHMocGFydCwgbGF5b3V0TmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGxheW91dE5hbWUgPT0gJ2ZyZWVoYW5kJykge1xyXG4gICAgICAgICAgICAvLyBzdGFja2VkP1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kaXNhYmxlTGF5b3V0Rm9yU2VsZWN0ZWRUaGluZ3MgPSBmdW5jdGlvbihsYXlvdXROYW1lKSB7XHJcbiAgICAgICAgdmFyIGl0ID0gbWFwLmRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIGlmICghaXQuY291bnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydsZWZ0JywgJ3JpZ2h0JywgJ3N0YWNrZWQnXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIHNjYWxpbmcgZnVuY3Rpb25zLCBldGMuIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBDb21wdXRlcyB0aGUgbGV2ZWwgb2YgdGhpcyBncm91cFxyXG4gICAgdGhpcy5jb21wdXRlTGV2ZWwgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NvbXB1dGVMZXZlbCwgcGFydDogJyArIHBhcnQgKyAnLCBjb250YWluaW5nR3JvdXA6ICcgKyBwYXJ0LmNvbnRhaW5pbmdHcm91cCk7XHJcbiAgICAgICAgaWYgKCEoZ3JvdXAgaW5zdGFuY2VvZiBnby5Hcm91cCkgfHwgZ3JvdXAuY29udGFpbmluZ0dyb3VwID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbXB1dGVMZXZlbChncm91cC5jb250YWluaW5nR3JvdXApICsgMTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGdldHMgdGhlIGJhc2ljIHNjYWxpbmcgZm9yIHRoaW5nIHNxdWFyZXMsIGJ5IGxldmVsXHJcbiAgICBmdW5jdGlvbiBnZXRUaGluZ1NjYWxlKGxldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KDAuNywgbGV2ZWwpOyAvLyAxLCAuNDUsIC4yMDI1LCAuMDkxMTI1LCAuLi5cclxuICAgIH1cclxuXHJcbiAgICAvLyB0aGlzIGlzIG9ubHkgdXNlZCBmb3IgZ3JvdXBzXHJcbiAgICB0aGlzLmdldFNjYWxlID0gZnVuY3Rpb24oZ3JvdXAsIHZpc2l0ZWRHcm91cEtleXMpIHtcclxuICAgICAgICBpZiAoZ3JvdXApIHtcclxuICAgICAgICAgICAgLy8ga2VlcCB0cmFjayBvZiBncm91cHMgd2UndmUgdmlzaXRlZCB0byBhdm9pZCBpbmZpbml0ZSByZWN1cnNpb25cclxuICAgICAgICAgICAgLy8gVE9ETzogdHJhY2sgZG93biBleGFjdGx5IGhvdyBpbmZpbml0ZSBsb29wcyBhcmUgb2NjdXJyaW5nLFxyXG4gICAgICAgICAgICAvLyBvciBJRiB0aGV5IHN0aWxsIGFyZSBzaW5jZSBtYXAuY2hlY2tNb2RlbCB3YXMgaW50cm9kdWNlZC4uLlxyXG4gICAgICAgICAgICBpZiAodmlzaXRlZEdyb3VwS2V5cyAmJiBBcnJheS5pc0FycmF5KHZpc2l0ZWRHcm91cEtleXMpKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd2aXNpdGVkR3JvdXBLZXlzOiAnICsgdmlzaXRlZEdyb3VwS2V5cyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5jb250YWlucyh2aXNpdGVkR3JvdXBLZXlzLCBncm91cC5kYXRhLmtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdoaXQgYWxyZWFkeSB2aXNpdGVkIGtleTogJyArIGdyb3VwLmRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlzaXRlZEdyb3VwS2V5cy5wdXNoKGdyb3VwLmRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZpc2l0ZWRHcm91cEtleXMgPSBbZ3JvdXAuZGF0YS5rZXldO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZ3JvdXAubGFiZWxlZExpbmspIHsgLy8gUi10aGluZ1xyXG4gICAgICAgICAgICAgICAgdmFyIGZyb21TY2FsZSA9IHNlbGYuZ2V0U2NhbGUoZ3JvdXAubGFiZWxlZExpbmsuZnJvbU5vZGUsIHZpc2l0ZWRHcm91cEtleXMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvU2NhbGUgPSBzZWxmLmdldFNjYWxlKGdyb3VwLmxhYmVsZWRMaW5rLnRvTm9kZSwgdmlzaXRlZEdyb3VwS2V5cyk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTY2FsZSwgZnJvbVNjYWxlOiAnICsgZnJvbVNjYWxlICsgJywgdG9TY2FsZTogJyArIHRvU2NhbGUgKyAnLCB2aXNpdGVkR3JvdXBLZXlzOiAnICsgdmlzaXRlZEdyb3VwS2V5cy5qb2luKCcsJykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKGZyb21TY2FsZSwgdG9TY2FsZSkgKiAwLjU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRTY2FsZShncm91cC5jb250YWluaW5nR3JvdXAsIHZpc2l0ZWRHcm91cEtleXMpICogMC43O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFRoaW5nU2NhbGUoc2VsZi5jb21wdXRlTGV2ZWwoZ3JvdXApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMTsgLy8gY2FuIG9jY3VyIHdoZW4gZHJhZ2dpbmcgUiB0byBlbXB0eSBzcGFjZVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBnZXRzIHRoZSBtYXJnaW4gdG8gYmUgdXNlZCBpbiBzdGFjayBsYXlvdXQgYmV0d2VlbiB0aGlzIGdyb3VwJ3MgY2hpbGRyZW5cclxuICAgIGZ1bmN0aW9uIGdldFN0YWNrTWFyZ2luKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuICgxMCAvIDAuNykgKiBzZWxmLmdldFNjYWxlKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBnZXRzIHRoZSBtYXJnaW4gdG8gYmUgdXNlZCBpbiBzdGFjayBsYXlvdXQgYmV0d2VlbiB0aGlzIGdyb3VwJ3MgY2hpbGRyZW5cclxuICAgIGZ1bmN0aW9uIGdldEludmVudG9yeU1hcmdpbihncm91cCkge1xyXG4gICAgICAgIGlmIChzZWxmLmNvbXB1dGVMZXZlbChncm91cCkgPD0gMikge1xyXG4gICAgICAgICAgICByZXR1cm4gMTAgKiBzZWxmLmdldFNjYWxlKGdyb3VwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMyAqIHNlbGYuZ2V0U2NhbGUoZ3JvdXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdldEV4dGVybmFsVGV4dFNjYWxlID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRMaW5rU3Ryb2tlV2lkdGggPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgdmFyIGZyb21TY2FsZSA9IHNlbGYuZ2V0U2NhbGUobGluay5mcm9tTm9kZSk7XHJcbiAgICAgICAgdmFyIHRvU2NhbGUgPSBzZWxmLmdldFNjYWxlKGxpbmsudG9Ob2RlKTtcclxuICAgICAgICByZXR1cm4gKGxpbmsuaXNTZWxlY3RlZCA/IGNvbmZpZy5zaGFwZXMubGluZS5ib3JkZXJIaWdobGlnaHRXaWR0aCA6IGNvbmZpZy5zaGFwZXMubGluZS5ib3JkZXJXaWR0aCkgKiBNYXRoLm1pbihmcm9tU2NhbGUsIHRvU2NhbGUpOyAvLyAyLCAuOSwgLi4uXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNjYWxlIGFycm93aGVhZHMgYmFzZWQgb24gdGhlIHNtYWxsZXN0IHRvL2Zyb20gbm9kZSxcclxuICAgIC8vIG9yIGp1c3QgdGhlIFRvIG5vZGUgZm9yIFAgbGlua3NcclxuICAgIHRoaXMuZ2V0QXJyb3doZWFkU2NhbGUgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgdmFyIGZyb21TY2FsZSA9IHNlbGYuZ2V0U2NhbGUobGluay5mcm9tTm9kZSk7XHJcbiAgICAgICAgdmFyIHRvU2NhbGUgPSBzZWxmLmdldFNjYWxlKGxpbmsudG9Ob2RlKTtcclxuICAgICAgICB2YXIgbWluU2NhbGUgPSBNYXRoLm1pbihmcm9tU2NhbGUsIHRvU2NhbGUpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJnZXRBcnJvd2hlYWRTY2FsZSwgZnJvbVNjYWxlOiBcIiwgZnJvbVNjYWxlLCAnLCB0b1NjYWxlOiAnLCB0b1NjYWxlLCAnLCBtaW5TY2FsZTogJywgbWluU2NhbGUpO1xyXG4gICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gQ09OU1RBTlRTLkRTUlAuUCkge1xyXG4gICAgICAgICAgICBtaW5TY2FsZSA9IHRvU2NhbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtaW5TY2FsZSA+PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb25maWcuc2hhcGVzLmxpbmUuYXJyb3dTaXplICogbWluU2NhbGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChjb25maWcuc2hhcGVzLmxpbmUuYXJyb3dTaXplKzAuNSkgKiBtaW5TY2FsZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIGNyZWF0aW5nIG5ldyB0aGluZ3MgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIFJldHVybnMgYSBsb2NhdGlvbiBmb3IgYSBuZXcgc2lzdGVyIGdyb3VwICh0aGluZykgdG8gdGhlIGdpdmVuIG9uZSxcclxuICAgIC8vIHdoaWNoIHdpbGwgbm90IGhpZGUgYW55IGV4aXN0aW5nIHRoaW5ncyAob3ZlcmxhcCBpcyBhbGxvd2VkKS5cclxuICAgIC8vIFRoZSByZXR1cm5lZCBjb29yZGluYXRlcyBhcmUgYWJzb2x1dGUgZm9yIGEgdG9wLWxldmVsIGdyb3VwLFxyXG4gICAgLy8gb3IgcmVsYXRpdmUgdG8gdGhlIHBhcmVudCBvdGhlcndpc2UgLSBzdWl0YWJsZSBmb3IgdXNlIHdpdGggRnJlZWhhbmREaWFncmFtTGF5b3V0XHJcbiAgICAvLyBvciBGcmVlaGFuZExheW91dCwgcmVzcC5cclxuICAgIHRoaXMuZ2V0TmV3U2lzdGVyTG9jYXRpb24gPSBmdW5jdGlvbihncm91cCwgd2l0aFIpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG4gICAgICAgIC8vIGlmIHdlIGFyZSB3aXRoaW4gYW5vdGhlciBncm91cCwgdGhpbmdzIGFyZSBpbiBhYnNvbHV0ZSBjb29yZGluYXRlc1xyXG4gICAgICAgIC8vIGFuZCBzaXN0ZXJzIGFyZSBwbGFjZWQgYWJvdmUgdGhlIHRoaW5nOyBvdGhlcndpc2UgcmVsYXRpdmUgYW5kIGJlbG93Li4uXHJcbiAgICAgICAgdmFyIGluR3JvdXAgPSAoZ3JvdXAuY29udGFpbmluZ0dyb3VwICE9PSBudWxsKTtcclxuICAgICAgICAvLyAuLi4gZXhjZXB0IGlmIHdpdGhSIGlzIHRydWUsIHdlIGdvIHRvIHRoZSByaWdodCBpbnN0ZWFkIG9mIGFib3ZlIG9yIGJlbG93LlxyXG5cclxuICAgICAgICAvLyBzdGFydCBiZWxvdyBpZiBpbiBncm91cCwgZWxzZSBhYm92ZTsgb3IgdG8gdGhlIHJpZ2h0IGlmIHdpdGhSXHJcbiAgICAgICAgdmFyIHgsIHksIHcsIGg7XHJcbiAgICAgICAgaWYgKHdpdGhSKSB7XHJcbiAgICAgICAgICAgIHggPSBncm91cC5sb2NhdGlvbi54ICsgZ3JvdXAuYWN0dWFsQm91bmRzLndpZHRoICogMi4yO1xyXG4gICAgICAgICAgICB5ID0gZ3JvdXAubG9jYXRpb24ueTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB4ID0gZ3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICAgICAgeSA9IGdyb3VwLmxvY2F0aW9uLnkgKyBncm91cC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICogMS4xICogKGluR3JvdXAgPyAxIDogLTEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3ID0gZ3JvdXAuYWN0dWFsQm91bmRzLndpZHRoO1xyXG4gICAgICAgIGggPSBncm91cC5hY3R1YWxCb3VuZHMuaGVpZ2h0O1xyXG5cclxuICAgICAgICAvLyBjaGVjayBmb3Igb3ZlcmxhcHBpbmcgcGFydHM7IGlmIGZvdW5kLCBpbmNyZW1lbnQgeCx5IGFuZCBjb250aW51ZVxyXG5cclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVjdCA9IG5ldyBnby5SZWN0KHgsIHksIHcsIGgpO1xyXG4gICAgICAgICAgICByZWN0Lmdyb3coaCAvIDEwLCB3IC8gMTAsIGggLyAxMCwgdyAvIDEwKTtcclxuICAgICAgICAgICAgdmFyIHBhcnRzID0gZGlhZ3JhbS5maW5kT2JqZWN0c0luKHJlY3QsIG51bGwsIHNlbGYuaXNHcm91cCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0cy5jb3VudCkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0TmV3U2lzdGVyTG9jYXRpb246IG92ZXJsYXBwaW5nIHBhcnQgZm91bmQgaW4gJyArIHJlY3QpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpdGhSKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeCArPSB3IC8gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgeSArPSBoIC8gMTA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHggKz0gdyAvIDEwO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgKz0gaCAvIDEwICogKGluR3JvdXAgPyAxIDogLTEpOyAvLyBtb3ZlIGRvd24gaWYgaW4gZ3JvdXAsIGVsc2UgdXBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2dldE5ld1Npc3RlckxvY2F0aW9uOiBubyBvdmVybGFwcGluZyBwYXJ0IGZvdW5kIGluICcgKyByZWN0KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbkdyb3VwKSB7IC8vIG1ha2UgY29vcmRpbmF0ZXMgcmVsYXRpdmVcclxuICAgICAgICAgICAgeCAtPSBncm91cC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICAgICAgeSAtPSBncm91cC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBnby5Qb2ludCh4ICsgTWF0aC5yYW5kb20oKSwgeSArIE1hdGgucmFuZG9tKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBSZXR1cm5zIGEgbG9jYXRpb24gZm9yIGEgbmV3IGNoaWxkIGdyb3VwICh0aGluZykgdG8gdGhlIGdpdmVuIG9uZSxcclxuICAgIC8vIHdoaWNoIHdpbGwgbm90IGhpZGUgYW55IGV4aXN0aW5nIGNoaWxkcmVuIChvdmVybGFwIGlzIGFsbG93ZWQpLlxyXG4gICAgLy8gVGhlIHJldHVybmVkIGNvb3JkaW5hdGVzIGFyZSByZWxhdGl2ZSB0byB0aGUgcGFyZW50IGdyb3VwIC0gc3VpdGFibGUgZm9yIHVzZSB3aXRoIEZyZWVoYW5kTGF5b3V0LlxyXG4gICAgdGhpcy5nZXROZXdDaGlsZExvY2F0aW9uID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgZ3JvdXBCb3VuZHMgPSBncm91cC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgLy8gTkI6IGFsbCB4L3kgbG9jYXRpb25zIGFyZSByZWxhdGl2ZSB0byB0aGUgZ3JvdXAgbG9jYXRpb25cclxuICAgICAgICB2YXIgeCA9IDA7XHJcbiAgICAgICAgdmFyIHkgPSBncm91cEJvdW5kcy5oZWlnaHQgKiAxLjE7XHJcbiAgICAgICAgdmFyIHcsIGg7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBncm91cC5tZW1iZXJQYXJ0cztcclxuICAgICAgICAvLyBrZWVwIHRlc3RpbmcgbmV3IHJlY3RhbmdsZXMgdW50aWwgd2UgZmluZCBvbmUgdGhhdCBkb2Vzbid0IG92ZXJsYXAgd2l0aCBhbnkgZXhpc3RpbmcgbWVtYmVyIG9mIHRoZSBncm91cFxyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIG1lbWJlcnMucmVzZXQoKTtcclxuICAgICAgICAgICAgdmFyIG92ZXJsYXBzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBtZW1iZXIsIG5ld1JlY3QsIG1lbWJlclJlY3Q7XHJcbiAgICAgICAgICAgIHdoaWxlIChtZW1iZXJzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVyID0gbWVtYmVycy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBtZW1iZXJCb3VuZHMgPSBtZW1iZXIuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgICAgICAgICAgdyA9IG1lbWJlckJvdW5kcy53aWR0aDtcclxuICAgICAgICAgICAgICAgIGggPSBtZW1iZXJCb3VuZHMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgLy8gZmluZCB0aGUgZXhpc3RpbmcgbWVtYmVyJ3MgYWN0dWFsIGJvdW5kcyAoYWJzb2x1dGUgY29vcmRzKVxyXG4gICAgICAgICAgICAgICAgbWVtYmVyUmVjdCA9IG5ldyBnby5SZWN0KG1lbWJlckJvdW5kcy54IC0gZ3JvdXBCb3VuZHMueCwgbWVtYmVyQm91bmRzLnkgLSBncm91cEJvdW5kcy55LCBtZW1iZXJCb3VuZHMud2lkdGgsIG1lbWJlckJvdW5kcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgbmV3UmVjdCA9IG5ldyBnby5SZWN0KHgsIHksIHcsIGgpO1xyXG4gICAgICAgICAgICAgICAgbmV3UmVjdC5ncm93KGggLyA1LCB3IC8gNSwgaCAvIDUsIHcgLyA1KTtcclxuICAgICAgICAgICAgICAgIG92ZXJsYXBzID0gbmV3UmVjdC5jb250YWluc1JlY3QobWVtYmVyUmVjdCk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXROZXdDaGlsZExvY2F0aW9uIGZvciAnICsgbWVtYmVyICsgJzogbmV3UmVjdCA9ICcgKyBuZXdSZWN0ICsgJywgbWVtYmVyUmVjdCA9ICcgKyBtZW1iZXJSZWN0ICsgJywgb3ZlcmxhcHM6ICcgKyBvdmVybGFwcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3ZlcmxhcHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3ZlcmxhcHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluY3JlbWVudCB4LCB5IGFuZCB0cnkgYWdhaW5cclxuICAgICAgICAgICAgICAgIHggKz0gdyAvIDU7XHJcbiAgICAgICAgICAgICAgICB5ICs9IGggLyA1O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gZm91bmQgYSBnb29kIHNwb3QhXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IGdvLlBvaW50KHgsIHkpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBhIHNpbXBsZXIgdmVyc2lvbiBvZiBnZXROZXdDaGlsZExvY2F0aW9uIHRoYXQgcGxhY2VzIHRoZSBjaGlsZCBvdXRzaWRlIHRoZSBib3VuZHMgb2YgdGhlIGV4aXN0aW5nIGNoaWxkcmVuXHJcbiAgICB0aGlzLmdldE5ld0NoaWxkTG9jYXRpb24yID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgZ3JvdXBCb3VuZHMgPSBncm91cC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgdmFyIGNoaWxkQm91bmRzID0gbWFwLnNhZmVSZWN0KG1hcC5kaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhncm91cC5tZW1iZXJQYXJ0cykpO1xyXG4gICAgICAgIHZhciB4ID0gMDtcclxuICAgICAgICB2YXIgeSA9IDA7XHJcbiAgICAgICAgaWYgKCFncm91cC5tZW1iZXJQYXJ0cy5jb3VudCkge1xyXG4gICAgICAgICAgICB5ID0gZ3JvdXBCb3VuZHMuaGVpZ2h0ICogMS4yO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHkgPSBncm91cEJvdW5kcy5oZWlnaHQgKiAxLjQgKyBjaGlsZEJvdW5kcy5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2dldE5ld0NoaWxkTG9jYXRpb24yLCBjaGlsZEJvdW5kczogJyArIGNoaWxkQm91bmRzICsgJywgZ3JvdXBCb3VuZHM6ICcgKyBncm91cEJvdW5kcyArICcsIHg6ICcgKyB4ICsgJywgeTogJyArIHkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgZ28uUG9pbnQoeCwgeSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIG1vdmUgYWxsIHRoZSBnaXZlbiBuZXcgbWVtYmVyIGdyb3VwcyBzbyB0aGF0IHRoZWlyIGxvY2F0aW9ucyBhcmUgcmVsYXRpdmUgdG8gdGhhdCBvZlxyXG4gICAgLy8gdGhlIHBhcmVudCBhbmQgaXRzIHByZXZpb3VzbHkgZXhpc3RpbmcgbWVtYmVycywgYW5kIHNjYWxlZCBkb3duIGFwcHJvcHJpYXRlbHlcclxuICAgIHRoaXMubGF5b3V0TmV3TWVtYmVyc1JlbGF0aXZlVG8gPSBmdW5jdGlvbihuZXdNZW1iZXJzLCBwYXJlbnQsIG9sZE1lbWJlckJvdW5kcykge1xyXG4gICAgICAgIC8vIGhvdyBiaWcgd2FzIHRoZSBwYXJlbnQgc3lzdGVtIGJlZm9yZSB0aGUgbmV3IGdyb3VwcyB3ZXJlIGFkZGVkP1xyXG4gICAgICAgIHZhciBzeXN0ZW1Cb3VuZHMgPSBwYXJlbnQuYWN0dWFsQm91bmRzLnVuaW9uUmVjdChvbGRNZW1iZXJCb3VuZHMpO1xyXG5cclxuICAgICAgICAvLyBmaWd1cmUgb3V0IG9sZC9uZXcgb3JpZ2lucyAtIHBsYWNlIG5ldyBvcmlnaW4gYmVsb3cgZXhpc3Rpbmcgc3lzdGVtXHJcbiAgICAgICAgdmFyIG9sZEJvdW5kcyA9IG1hcC5kaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhuZXdNZW1iZXJzKTtcclxuICAgICAgICB2YXIgb2xkT3JpZ2luID0gbmV3IGdvLlBvaW50KG9sZEJvdW5kcy54LCBvbGRCb3VuZHMueSk7XHJcbiAgICAgICAgdmFyIG5ld09yaWdpbiA9IG5ldyBnby5Qb2ludCgwLCBzeXN0ZW1Cb3VuZHMuaGVpZ2h0ICogMS4yKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXROZXdNZW1iZXJzUmVsYXRpdmVUbywgc3lzdGVtQm91bmRzOiAnICsgc3lzdGVtQm91bmRzICsgJywgb2xkQm91bmRzOiAnICsgb2xkQm91bmRzICsgICcsIG9sZE9yaWdpbjogJyArIG9sZE9yaWdpbiArICcsIG5ld09yaWdpbjogJyArIG5ld09yaWdpbik7XHJcblxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgbmV3IHNjYWxlZCBsb2NhdGlvbnNcclxuICAgICAgICAvLyBOQjogd2UgY2FuIGFzc3VtZSBuZXdNZW1iZXJzIGFyZSBhbGwgb25lIGxldmVsIGRvd24gZnJvbSBwYXJlbnQgKHNlZSBtYXAuYWRkU2VsZWN0ZWRUaGluZ3NBc0NoaWxkcmVuT2YpLFxyXG4gICAgICAgIC8vIHNvIHdlIGp1c3QgbXVsdGlwbHkgYnkgdGhlIHN0YW5kYXJkIHNjYWxlIGZhY3RvclxyXG4gICAgICAgIHZhciBpdCA9IG5ld01lbWJlcnMuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgdmFyIGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgICAgICB2YXIgbmV3WCA9IG5ld09yaWdpbi54ICsgKGdyb3VwQm91bmRzLnggLSBvbGRPcmlnaW4ueCkgKiAwLjQ1O1xyXG4gICAgICAgICAgICB2YXIgbmV3WSA9IG5ld09yaWdpbi55ICsgKGdyb3VwQm91bmRzLnkgLSBvbGRPcmlnaW4ueSkgKiAwLjQ1O1xyXG4gICAgICAgICAgICB2YXIgbmV3TG9jID0gZ28uUG9pbnQuc3RyaW5naWZ5KG5ldyBnby5Qb2ludChuZXdYLCBuZXdZKSk7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xheW91dE5ld01lbWJlcnNSZWxhdGl2ZVRvLCBncm91cEJvdW5kczogJyArIGdyb3VwQm91bmRzICsgJywgbmV3TG9jOiAnICsgbmV3TG9jKTtcclxuICAgICAgICAgICAgbWFwLmRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsb2MnLCBuZXdMb2MpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gbW92ZSBhbGwgdGhlIGdpdmVuIG9sZCBtZW1iZXIgZ3JvdXBzIHNvIHRoYXQgdGhlaXIgbG9jYXRpb25zIGFyZSBhYnNvbHV0ZSBhbmQgYWJvdmVcclxuICAgIC8vIHRoZSBwYXJlbnQsIGFuZCBzY2FsZWQgdXAgYXBwcm9wcmlhdGVseVxyXG4gICAgdGhpcy5sYXlvdXRPbGRNZW1iZXJzT3V0c2lkZU9mID0gZnVuY3Rpb24ob2xkTWVtYmVycywgcGFyZW50LCBvbGRNZW1iZXJzQm91bmRzLCBvbGRNZW1iZXJzTGV2ZWwpIHtcclxuICAgICAgICAvLyBmaWd1cmUgb3V0IHNjYWxlIGZhY3RvciAobWVtYmVycyBjYW4gYmUgZHJhZ2dlZCB1cCBtdWx0aXBsZSBsZXZlbHMsIHVubGlrZSBkcmFnZ2luZyBpbnRvIFMpXHJcbiAgICAgICAgdmFyIHNjYWxlRmFjdG9yID0gTWF0aC5wb3coMC40NSwgb2xkTWVtYmVyc0xldmVsIC0gc2VsZi5jb21wdXRlTGV2ZWwocGFyZW50KSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZiwgc2NhbGVGYWN0b3I6ICcgKyBzY2FsZUZhY3Rvcik7XHJcblxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgb2xkL25ldyBvcmlnaW5zIC0gcGxhY2UgbmV3IG9yaWdpbiBhYm92ZSBwYXJlbnQsIHdpdGggdmVydGljYWwgc3BhY2UgZm9yIHNjYWxlZC11cCBvbGRNZW1iZXJzXHJcbiAgICAgICAgdmFyIHBhcmVudEJvdW5kcyA9IHBhcmVudC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgdmFyIG9sZE9yaWdpbiA9IG5ldyBnby5Qb2ludChvbGRNZW1iZXJzQm91bmRzLngsIG9sZE1lbWJlcnNCb3VuZHMueSk7XHJcbiAgICAgICAgdmFyIG5ld09yaWdpbiA9IG5ldyBnby5Qb2ludChwYXJlbnRCb3VuZHMueCwgcGFyZW50Qm91bmRzLnkgLSBvbGRNZW1iZXJzQm91bmRzLmhlaWdodCAqIDEuMiAvIHNjYWxlRmFjdG9yKTtcclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBuZXcgc2NhbGVkIGxvY2F0aW9uc1xyXG4gICAgICAgIHZhciBpdCA9IG9sZE1lbWJlcnMuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgdmFyIGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgICAgICB2YXIgbmV3WCA9IG5ld09yaWdpbi54ICsgKGdyb3VwQm91bmRzLnggLSBvbGRPcmlnaW4ueCkgLyBzY2FsZUZhY3RvcjtcclxuICAgICAgICAgICAgdmFyIG5ld1kgPSBuZXdPcmlnaW4ueSArIChncm91cEJvdW5kcy55IC0gb2xkT3JpZ2luLnkpIC8gc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIHZhciBuZXdMb2MgPSBnby5Qb2ludC5zdHJpbmdpZnkobmV3IGdvLlBvaW50KG5ld1gsIG5ld1kpKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZiwgcGFyZW50Qm91bmRzOiAnICsgcGFyZW50Qm91bmRzICsgJywgb2xkTWVtYmVyc0JvdW5kczogJyArIG9sZE1lbWJlcnNCb3VuZHMgKyAnLCBuZXdPcmlnaW46ICcgKyBuZXdPcmlnaW4gKyAnLCBncm91cEJvdW5kczogJyArIGdyb3VwQm91bmRzICsgJywgbmV3TG9jOiAnICsgbmV3TG9jKTtcclxuICAgICAgICAgICAgbWFwLmRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsb2MnLCBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLSBhY2Nlc3NvcnMgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlIGxheW91dCBjbGFzcyBieSBhYmJyZXZpYXRlZCBuYW1lXHJcbiAgICB0aGlzLmdldExheW91dCA9IGZ1bmN0aW9uKGxheW91dE5hbWUpIHtcclxuICAgICAgICBpZiAobGF5b3V0TmFtZSA9PSAnZnJlZWhhbmQnKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZyZWVoYW5kTGF5b3V0KCk7XHJcbiAgICAgICAgZWxzZSBpZiAobGF5b3V0TmFtZSA9PSAncmlnaHQnKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJpZ2h0SW52ZW50b3J5TGF5b3V0KCk7XHJcbiAgICAgICAgZWxzZSBpZiAobGF5b3V0TmFtZSA9PSAnc3RhY2tlZCcpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RhY2tlZExheW91dCgpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBMZWZ0SW52ZW50b3J5TGF5b3V0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0RnJlZWhhbmREaWFncmFtTGF5b3V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGcmVlaGFuZERpYWdyYW1MYXlvdXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRydWUgaWYgdGhlIHRvIGFuZCBmcm9tIG5vZGVzIGZvciB0aGUgbGluayBoYXZlIGEgY29tbW9uIGFuY2VzdG9yIGdyb3VwIHdpdGggb25lIG9mIHRoZSBnaXZlbiBsYXlvdXQgbmFtZXMuXHJcbiAgICAvLyBUT0RPOiB2ZXJpZnkgbG9naWMgLSB3aGF0IGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBzdWNoIGFuY2VzdG9ycz8gLSB0aGlzIHNob3VsZCByZXR1cm4gdGhlIGhpZ2hlc3Qgb25lLi4uXHJcbiAgICBmdW5jdGlvbiBnZXRDb21tb25BbmNlc3RvcldpdGhMYXlvdXQoZ3JvdXAxLCBncm91cDIsIGxheW91dE5hbWVzKSB7XHJcbiAgICAgICAgdmFyIGFuY2VzdG9yczEgPSBzZWxmLmdldEFuY2VzdG9yR3JvdXBzKGdyb3VwMSk7XHJcbiAgICAgICAgdmFyIGFuY2VzdG9yczIgPSBzZWxmLmdldEFuY2VzdG9yR3JvdXBzKGdyb3VwMik7XHJcbiAgICAgICAgdmFyIGNvbW1vbkFuY2VzdG9ycyA9IF8uaW50ZXJzZWN0aW9uKGFuY2VzdG9yczEsIGFuY2VzdG9yczIpO1xyXG4gICAgICAgIHZhciBsYXlvdXRBbmNlc3RvcnMgPSBfLmZpbHRlcihjb21tb25BbmNlc3RvcnMsIGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmluZGV4T2YobGF5b3V0TmFtZXMsIGdyb3VwLmRhdGEubGF5b3V0KSAhPSAtMTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAobGF5b3V0QW5jZXN0b3JzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbGF5b3V0QW5jZXN0b3JzWzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBhbmNlc3RvcnMgb2YgdGhpcyBncm91cCwgaW5jbHVkaW5nIGl0c2VsZlxyXG4gICAgdGhpcy5nZXRBbmNlc3Rvckdyb3VwcyA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGFuY2VzdG9ycyA9IFtncm91cF07XHJcbiAgICAgICAgdmFyIGcgPSBncm91cDtcclxuICAgICAgICB3aGlsZSAoZy5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgYW5jZXN0b3JzLnB1c2goZy5jb250YWluaW5nR3JvdXApO1xyXG4gICAgICAgICAgICBnID0gZy5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhbmNlc3RvcnM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gRnJlZWhhbmREaWFncmFtTGF5b3V0KCkge1xyXG4gICAgICAgIGdvLkxheW91dC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdvLkRpYWdyYW0uaW5oZXJpdChGcmVlaGFuZERpYWdyYW1MYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG4gICAgRnJlZWhhbmREaWFncmFtTGF5b3V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBcIkZyZWVoYW5kRGlhZ3JhbUxheW91dFwiO1xyXG4gICAgfTtcclxuXHJcbiAgICBGcmVlaGFuZERpYWdyYW1MYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ0ZyZWVoYW5kRGlhZ3JhbUxheW91dC5kb0xheW91dCcpO1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmRpYWdyYW07XHJcbiAgICAgICAgLy8gZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiRnJlZWhhbmQgRGlhZ3JhbSBMYXlvdXRcIik7XHJcblxyXG4gICAgICAgIC8vdmFsaWRhdGVHcm91cExvY2F0aW9ucyhkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpKTtcclxuICAgICAgICB2YXIgZ3JvdXBzID0gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKTsgLy8gZ2V0IG5ldyBpdGVyYXRvclxyXG4gICAgICAgIHdoaWxlIChncm91cHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBncm91cCA9IGdyb3Vwcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKCFncm91cC5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvYyA9IGdvLlBvaW50LnBhcnNlKGdyb3VwLmRhdGEubG9jKTtcclxuICAgICAgICAgICAgICAgIGdyb3VwLm1vdmUobmV3IGdvLlBvaW50KGxvYy54LCBsb2MueSkpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnRnJlZWhhbmREaWFncmFtTGF5b3V0LCBncm91cDogJyArIGdyb3VwICsgJyB0byBsb2NhdGlvbjogJyArIGxvYy54ICsgJywnICsgbG9jLnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhbGwgYWRqdXN0bWVudCBvZiBsaW5rcyBpcyBkb25lIGZyb20gaGVyZSwgbm90IGZyb20gdGhlIG90aGVyIGxheW91dHMuLi5cclxuICAgICAgICBnZXRMaW5rc0J5Tm9kZXModHJ1ZSk7XHJcbiAgICAgICAgdmFyIGxpbmtzID0gZGlhZ3JhbS5saW5rcy5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgIC8vIGlmIChpc05hTihsaW5rLmxvY2F0aW9uLngpKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAvL2NvbnNvbGUubG9nKCdsaW5rIGxvY2F0aW9uIGlzTmFOJyk7XHJcbiAgICAgICAgICAgIC8vICAgICBsaW5rLm1vdmUobmV3IGdvLlBvaW50KDAsMCkpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8vIC8vY29uc29sZS5sb2coJ2xpbmsgbG9jYXRpb246ICcgKyBsaW5rLmxvY2F0aW9uKTtcclxuICAgICAgICAgICAgYWRqdXN0TGlua0xheW91dChsaW5rKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJGcmVlaGFuZCBEaWFncmFtIExheW91dFwiKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIGlmIGFueSBncm91cCBpbiB0aGUgZ2l2ZW4gSXRlcmF0b3IgZG9lcyBub3QgaGF2ZSBhIGxvY2F0aW9uIChkYXRhLmxvYyksIHNldCBvbmVcclxuICAgIC8vIHRoYXQgZG9lc24ndCBvdmVybGFwIHdpdGggdGhlIG90aGVyIG1lbWJlcnNcclxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlR3JvdXBMb2NhdGlvbnMoZ3JvdXBzKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gRnJlZWhhbmRMYXlvdXQoKSB7XHJcbiAgICAgICAgZ28uTGF5b3V0LmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ28uRGlhZ3JhbS5pbmhlcml0KEZyZWVoYW5kTGF5b3V0LCBnby5MYXlvdXQpO1xyXG5cclxuICAgIEZyZWVoYW5kTGF5b3V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBcIkZyZWVoYW5kTGF5b3V0XCI7XHJcbiAgICB9O1xyXG5cclxuICAgIEZyZWVoYW5kTGF5b3V0LnByb3RvdHlwZS5kb0xheW91dCA9IGZ1bmN0aW9uKGNvbGwpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG4gICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcIkZyZWVoYW5kIExheW91dFwiKTtcclxuXHJcbiAgICAgICAgdmFyIHggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgdmFyIHkgPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnk7XHJcblxyXG4gICAgICAgIHZhciBpdCA9IHRoaXMuZ3JvdXAubWVtYmVyUGFydHMuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmICFwYXJ0LmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jID0gZ28uUG9pbnQucGFyc2UocGFydC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdGcmVlaGFuZExheW91dCwgcGFydDogJyArIHBhcnQuZGF0YS50ZXh0ICsgJywgbG9jOiAnICsgbG9jICsgJywgbG9jYXRpb246ICcgKyBwYXJ0LmxvY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIHBhcnQubW92ZShuZXcgZ28uUG9pbnQoeCArIGxvYy54LCB5ICsgbG9jLnkpKTtcclxuICAgICAgICAgICAgICAgIHBhcnQubGF5b3V0LmRvTGF5b3V0KHBhcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiRnJlZWhhbmQgTGF5b3V0XCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIFN0YWNrZWRMYXlvdXQoKSB7XHJcbiAgICAgICAgZ28uTGF5b3V0LmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ28uRGlhZ3JhbS5pbmhlcml0KFN0YWNrZWRMYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG4gICAgU3RhY2tlZExheW91dC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gXCJTdGFja2VkTGF5b3V0XCI7XHJcbiAgICB9O1xyXG5cclxuICAgIFN0YWNrZWRMYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xyXG4gICAgICAgIHRoaXMuZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiU3RhY2tlZCBMYXlvdXRcIik7XHJcbiAgICAgICAgdmFyIG1hcmdpbiA9IGdldFN0YWNrTWFyZ2luKHRoaXMuZ3JvdXApO1xyXG4gICAgICAgIHZhciBzdGFydFggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgdmFyIHN0YXJ0WSA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueSArICh0aGlzLmdyb3VwLnBhcnQuYWN0dWFsQm91bmRzLmhlaWdodCArIG1hcmdpbiAvIDIpO1xyXG4gICAgICAgIGxheW91dE1lbWJlcnNGb3JTdGFja2VkKHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZKTtcclxuICAgICAgICB0aGlzLmRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJTdGFja2VkIExheW91dFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgbWF4IHkgdmFsdWUgYWZ0ZXIgbGF5aW5nIG91dCB0aGUgbGFzdCBwYXJ0XHJcbiAgICBmdW5jdGlvbiBsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZChncm91cCwgc3RhcnRYLCBzdGFydFkpIHtcclxuICAgICAgICB2YXIgbWVtYmVycyA9IGdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKTtcclxuICAgICAgICB2YXIgeCA9IHN0YXJ0WDtcclxuICAgICAgICB2YXIgeSA9IHN0YXJ0WTtcclxuICAgICAgICB2YXIgcm93Q291bnQgPSAwO1xyXG4gICAgICAgIHZhciBtYXhTdGFydFkgPSBzdGFydFk7XHJcbiAgICAgICAgXy5lYWNoKG1lbWJlcnMsIGZ1bmN0aW9uKHBhcnQpIHtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiAhcGFydC5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcmdpbiA9IGdldFN0YWNrTWFyZ2luKHBhcnQpO1xyXG4gICAgICAgICAgICAgICAgcGFydC5tb3ZlKG5ldyBnby5Qb2ludCh4LCB5KSk7XHJcbiAgICAgICAgICAgICAgICBzdGFydFkgPSB5ICsgcGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgbWFyZ2luIC8gMjsgLy8gc3RhcnQgWSBwb3NpdGlvbiBmb3IgcGFydCdzIGNoaWxkcmVuXHJcblxyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvclN0YWNrZWQ6IHN0YXJ0aW5nIGxheW91dCBvZiBjaGlsZHJlbiBvZiAnICsgcGFydCArICcgYXQgJyArIE1hdGgucm91bmQoeCkgKyAnLCcgKyBNYXRoLnJvdW5kKHN0YXJ0WSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0LmlzU3ViR3JhcGhFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxheW91dCBjaGlsZHJlbiBvZiB0aGlzIHBhcnQ7IGNoZWNrIGlmIHdlJ3ZlIGFscmVhZHkgZG9uZSBhIHRhbGxlciBwYXJ0K2NoaWxkcmVuIGluIGN1cnJlbnQgcm93XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4U3RhcnRZID0gTWF0aC5tYXgobWF4U3RhcnRZLCBsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZChwYXJ0LCB4LCBzdGFydFkpKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZDogbGFpZCBvdXQgY2hpbGRyZW4gb2YgJyArIHBhcnQgKyAnLCBtYXhTdGFydFkgaXMgbm93ICcgKyBNYXRoLnJvdW5kKG1heFN0YXJ0WSkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhTdGFydFkgPSBNYXRoLm1heChtYXhTdGFydFksIHN0YXJ0WSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZGVjaWRlIHdoZXRoZXIgdG8gd3JhcFxyXG4gICAgICAgICAgICAgICAgcm93Q291bnQrKztcclxuICAgICAgICAgICAgICAgIGlmIChyb3dDb3VudCA8IDIpIHsgLy8ga2VlcCBnb2luZyBvbiB0aGlzIGxpbmVcclxuICAgICAgICAgICAgICAgICAgICB4ICs9IHBhcnQuYWN0dWFsQm91bmRzLndpZHRoICsgbWFyZ2luO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gd3JhcCB0byBuZXh0IGxpbmVcclxuICAgICAgICAgICAgICAgICAgICB4ID0gc3RhcnRYO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgPSBtYXhTdGFydFkgKyBtYXJnaW4gLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd0NvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBtYXhTdGFydFk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBSaWdodEludmVudG9yeUxheW91dCgpIHtcclxuICAgICAgICBnby5MYXlvdXQuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnby5EaWFncmFtLmluaGVyaXQoUmlnaHRJbnZlbnRvcnlMYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG4gICAgUmlnaHRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiUmlnaHRJbnZlbnRvcnlMYXlvdXRcIjtcclxuICAgIH07XHJcblxyXG4gICAgUmlnaHRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xyXG4gICAgICAgIC8vdGhpcy5kaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJJbnZlbnRvcnkgTGF5b3V0XCIpO1xyXG4gICAgICAgIHZhciBzdGFydFggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnggKyB0aGlzLmdyb3VwLmFjdHVhbEJvdW5kcy53aWR0aDtcclxuICAgICAgICB2YXIgc3RhcnRZID0gdGhpcy5ncm91cC5sb2NhdGlvbi55ICsgKHRoaXMuZ3JvdXAucGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgZ2V0SW52ZW50b3J5TWFyZ2luKHRoaXMuZ3JvdXApKTtcclxuICAgICAgICBsYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5KHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZLCBDT05TVEFOVFMuRFNSUC5SKTtcclxuICAgICAgICAvL3RoaXMuZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcIkludmVudG9yeSBMYXlvdXRcIik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gTGVmdEludmVudG9yeUxheW91dCgpIHtcclxuICAgICAgICBnby5MYXlvdXQuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnby5EaWFncmFtLmluaGVyaXQoTGVmdEludmVudG9yeUxheW91dCwgZ28uTGF5b3V0KTtcclxuXHJcbiAgICBMZWZ0SW52ZW50b3J5TGF5b3V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBcIkxlZnRJbnZlbnRvcnlMYXlvdXRcIjtcclxuICAgIH07XHJcblxyXG4gICAgTGVmdEludmVudG9yeUxheW91dC5wcm90b3R5cGUuZG9MYXlvdXQgPSBmdW5jdGlvbihjb2xsKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnTGVmdEludmVudG9yeUxheW91dC5kb0xheW91dCwgZ3JvdXA6ICcgKyB0aGlzLmdyb3VwICsgJywgbG9jYXRpb246ICcgKyB0aGlzLmdyb3VwLmxvY2F0aW9uKTtcclxuICAgICAgICAvLyB0aGlzLmRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcIkludmVudG9yeSBMYXlvdXRcIik7XHJcbiAgICAgICAgdmFyIHN0YXJ0WCA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICB2YXIgc3RhcnRZID0gdGhpcy5ncm91cC5sb2NhdGlvbi55ICsgKHRoaXMuZ3JvdXAucGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgZ2V0SW52ZW50b3J5TWFyZ2luKHRoaXMuZ3JvdXApKTtcclxuICAgICAgICBsYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5KHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZLCAnTCcpO1xyXG4gICAgICAgIC8vIHRoaXMuZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcIkludmVudG9yeSBMYXlvdXRcIik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNoYXJlZCBzdHVmZiBmb3IgTGVmdC9SaWdodCBJbnZlbnRvcnkgbGF5b3V0cy4uLlxyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIG1heCB5IHZhbHVlIGFmdGVyIGxheWluZyBvdXQgdGhlIGxhc3QgcGFydFxyXG4gICAgLy8gc2lkZSBpcyAnTCcgb3IgQ09OU1RBTlRTLkRTUlAuUlxyXG4gICAgZnVuY3Rpb24gbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeShncm91cCwgc3RhcnRYLCBzdGFydFksIHNpZGUpIHtcclxuICAgICAgICB2YXIgbWVtYmVycyA9IGdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKTtcclxuICAgICAgICBfLmVhY2gobWVtYmVycywgZnVuY3Rpb24ocGFydCkge1xyXG4gICAgICAgICAgICB2YXIgeCA9IHN0YXJ0WDsgLy8gZm9yIGxlZnQsIGp1c3QgdXNlIHhcclxuICAgICAgICAgICAgaWYgKHNpZGUgPT0gQ09OU1RBTlRTLkRTUlAuUilcclxuICAgICAgICAgICAgICAgIHggPSBzdGFydFggLSBwYXJ0LmFjdHVhbEJvdW5kcy53aWR0aDsgLy8gZm9yIHJpZ2h0LCByaWdodC1hbGlnbiBwYXJ0cyB0byBzdGFydFhcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeSwgcGFydDogJyArIHBhcnQgKyAnIHRvIGxvY2F0aW9uOiAnICsgeCArICcsJyArIHN0YXJ0WSk7XHJcbiAgICAgICAgICAgIHBhcnQubW92ZShuZXcgZ28uUG9pbnQoeCwgc3RhcnRZKSk7XHJcbiAgICAgICAgICAgIHN0YXJ0WSArPSBwYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyBnZXRJbnZlbnRvcnlNYXJnaW4ocGFydCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0LmlzU3ViR3JhcGhFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeSwgeSBhZnRlciBtb3Zpbmc6ICcgKyBwYXJ0ICsgJyA9ICcgKyBzdGFydFkpO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRZID0gbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeShwYXJ0LCBzdGFydFgsIHN0YXJ0WSwgc2lkZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gc3RhcnRZICsgZ2V0SW52ZW50b3J5TWFyZ2luKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBncm91cCdzIChub24tUi10aGluZykgbWVtYmVycywgc29ydGVkIGJ5IHRoZSAnb3JkZXInIGRhdGEgcHJvcGVydHlcclxuICAgIGZ1bmN0aW9uIGdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLm1lbWJlclBhcnRzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiAhcGFydC5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocGFydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF8uc29ydEJ5KG1lbWJlcnMudG9BcnJheSgpLCBmdW5jdGlvbihtZW1iZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1lbWJlci5kYXRhLm9yZGVyO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBsaW5rIHJvdXRpbmcgYW5kIHZpc2liaWxpdHkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gYWRqdXN0IHRoZSByb3V0aW5nLCB2aXNpYmlsaXR5IGFuZCBvdGhlciBwcm9wZXJ0aWVzIG9mIGEgbGluayBhY2NvcmRpbmcgdG8gdmFyaW91cyBzdHJ1Y3R1cmFsIGNyaXRlcmlhXHJcbiAgICBmdW5jdGlvbiBhZGp1c3RMaW5rTGF5b3V0KGxpbmspIHtcclxuICAgICAgICBpZiAoIWxpbmsgfHwgIWxpbmsuZnJvbU5vZGUgfHwgIWxpbmsudG9Ob2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHZhciBsb2MgPSBsaW5rLmxvY2F0aW9uO1xyXG4gICAgICAgIC8vIGlmIChpc05hTihsb2MueCkgfHwgaXNOYU4obG9jLnkpKSB7XHJcbiAgICAgICAgLy8gICAgIGxpbmsubG9jYXRpb24gPSBuZXcgZ28uUG9pbnQoMTAsIDEwKTtcclxuICAgICAgICAvLyAgICAgLy9jb25zb2xlLmxvZygnYWRqdXN0TGlua0xheW91dCwgbGluay5sb2NhdGlvbjogJyArIGxpbmsubG9jYXRpb24pO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyAvL2NvbnNvbGUubG9nKCdhZGp1c3RMaW5rTGF5b3V0LCBsaW5rLmxvY2F0aW9uOiAnICsgbGluay5sb2NhdGlvbik7XHJcblxyXG4gICAgICAgIC8vIHNlZSBpZiBsaW5rIGlzIHdpdGhpbiBhIHN0YWNrZWQgb3IgaW52ZW50b3J5IGxheW91dCwgb3IgaWYgaXQncyBhIGhpZGRlbiBQIGxpbmtcclxuICAgICAgICB2YXIgaW52ZW50b3J5QW5jZXN0b3IgPSBnZXRDb21tb25BbmNlc3RvcldpdGhMYXlvdXQobGluay5mcm9tTm9kZSwgbGluay50b05vZGUsIFsnbGVmdCcsICdyaWdodCddKTtcclxuICAgICAgICB2YXIgc3RhY2tlZEFuY2VzdG9yID0gZ2V0Q29tbW9uQW5jZXN0b3JXaXRoTGF5b3V0KGxpbmsuZnJvbU5vZGUsIGxpbmsudG9Ob2RlLCBbJ3N0YWNrZWQnXSk7XHJcbiAgICAgICAgdmFyIGhpZGVQTGluayA9IChsaW5rLmRhdGEgJiYgbGluay5kYXRhLmNhdGVnb3J5ID09IENPTlNUQU5UUy5EU1JQLlAgJiYgIW1hcC50ZW1wbGF0ZXMuc2hvd1BMaW5rKGxpbmspKTtcclxuICAgICAgICAvL3ZhciBjcm93ZGVkUlRoaW5nID0gaGFzQ3Jvd2RlZFJUaGluZyhsaW5rKTtcclxuXHJcbiAgICAgICAgLy8gc2VlIGlmIHRoaXMgaXMgb25lIG9mIG11bHRpcGxlIGxpbmtzIGJldHdlZW4gdGhlIHNhbWUgdHdvIG5vZGVzXHJcbiAgICAgICAgdmFyIHNucG9zID0gc2VsZi5nZXRTYW1lTm9kZXNMaW5rUG9zaXRpb24obGluayk7XHJcbiAgICAgICAgdmFyIGlzTXVsdGlMaW5rID0gKHNucG9zLmNvdW50ID4gMSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc25wb3MgZm9yIGxpbmsgJyArIGxpbmsgKyAnOiAnICsgc25wb3MuaW5kZXggKyAnIG9mICcgKyBzbnBvcy5jb3VudCk7XHJcblxyXG4gICAgICAgIGlmIChpbnZlbnRvcnlBbmNlc3Rvcikge1xyXG4gICAgICAgICAgICBhcHBseUludmVudG9yeUN1cnZlUm91dGluZyhsaW5rLCBzbnBvcywgaW52ZW50b3J5QW5jZXN0b3IuZGF0YS5sYXlvdXQpO1xyXG4gICAgICAgIH0gZWxzZSBpZihpc011bHRpTGluaykge1xyXG4gICAgICAgICAgICBhcHBseU11bHRpbGlua0N1cnZlUm91dGluZyhsaW5rLCBzbnBvcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXBwbHlTdHJhaWdodFJvdXRpbmcobGluayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzaG93IGxpbmsgb25seSBpZiBib3RoIGNvbm5lY3RlZCB0aGluZ3MgYXJlIHZpc2libGUgKG5vIGNvbGxhcHNlZCBhbmNlc3RvcnMpO1xyXG4gICAgICAgIC8vIGhpZGUgaWYgYm90aCBhcmUgaW4gc3RhY2tlZCBsYXlvdXQgb3IgaWYgaXQncyBhIFAtbGluayB0aGF0IHdlIHNob3VsZG4ndCBiZSBzaG93aW5nIG5vd1xyXG4gICAgICAgIGlmIChzZWxmLmZyb21BbmRUb05vZGVzQXJlVmlzaWJsZShsaW5rKSAmJiAhc3RhY2tlZEFuY2VzdG9yICYmICFoaWRlUExpbmspIHtcclxuICAgICAgICAgICAgbGluay5vcGFjaXR5ID0gMTtcclxuICAgICAgICAgICAgc2hvd0xhYmVsTm9kZXMobGluaywgdHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGluay5vcGFjaXR5ID0gMDtcclxuICAgICAgICAgICAgc2hvd0xhYmVsTm9kZXMobGluaywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPOiBkZXRlY3Qgd2hlbiB0aGUgUi10aGluZyBvdmVybGFwcyBib3RoIGZyb20gYW5kIHRvIG5vZGVzLCBzbyB3ZSBjYW4gY2hhbmdlIHRoZSBsaW5rIHJvdXRpbmdcclxuICAgIGZ1bmN0aW9uIGhhc0Nyb3dkZWRSVGhpbmcobGluaykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93TGFiZWxOb2RlcyhsaW5rLCBzaG93KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0xhYmVsTm9kZXMsIGxpbms6ICcgKyBsaW5rICsgJywgc2hvdzogJyArIHNob3cpO1xyXG4gICAgICAgIHZhciBpdCA9IGxpbmsubGFiZWxOb2RlcztcclxuICAgICAgICBpZiAoaXQpIHtcclxuICAgICAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBncm91cC52aXNpYmxlID0gc2hvdztcclxuICAgICAgICAgICAgICAgIGlmIChzaG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAubGF5b3V0LmRvTGF5b3V0KGdyb3VwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBsaW5rIGlzIGJldHdlZW4gdHdvIHRoaW5ncyBpbiB0aGUgc2FtZSBpbnZlbnRvcnkgbGF5b3V0IChzaW5nbGUgb3IgbXVsdGlwbGUpLFxyXG4gICAgLy8gbWFrZSB0aGUgbGluZSBtb3JlIG9yIGxlc3MgY2lyY3VsYXIgb24gdGhlIGFwcHJvcHJpYXRlIHNpZGVcclxuICAgIGZ1bmN0aW9uIGFwcGx5SW52ZW50b3J5Q3VydmVSb3V0aW5nKGxpbmssIHNucG9zLCBhbmNlc3RvckxheW91dCkge1xyXG4gICAgICAgIGlmIChhbmNlc3RvckxheW91dCA9PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgbGluay5mcm9tU3BvdCA9IGdvLlNwb3QuTGVmdDtcclxuICAgICAgICAgICAgbGluay50b1Nwb3QgPSBnby5TcG90LkxlZnQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhbmNlc3RvckxheW91dCA9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgIGxpbmsuZnJvbVNwb3QgPSBnby5TcG90LlJpZ2h0O1xyXG4gICAgICAgICAgICBsaW5rLnRvU3BvdCA9IGdvLlNwb3QuUmlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhc3BlY3QgcmF0aW8gZm9yIHRoZSBsaW5rIGN1cnZlcyAtIG1ha2UgdGhpcyBzbWFsbGVyIHRvIG1ha2UgdGhlbSB0YWxsZXIsIGxhcmdlciB0byBtYWtlIHRoZW0gZmF0dGVyXHJcbiAgICAgICAgdmFyIGN1cnZlUmF0aW8gPSAwLjY7XHJcblxyXG4gICAgICAgIHZhciB5MSA9IGxpbmsuZnJvbU5vZGUuYWN0dWFsQm91bmRzLnk7XHJcbiAgICAgICAgdmFyIHkyID0gbGluay50b05vZGUuYWN0dWFsQm91bmRzLnk7XHJcblxyXG4gICAgICAgIHZhciB5RGlmZiA9IE1hdGguYWJzKHkyIC0geTEpO1xyXG4gICAgICAgIHZhciBjID0gKHlEaWZmID09PSAwID8gNTAgOiBNYXRoLmZsb29yKHlEaWZmICogY3VydmVSYXRpbykpICsgMTAwICogKHNucG9zLmluZGV4IC8gc25wb3MuY291bnQpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJ5RGlmZiA9IFwiICsgeURpZmYgKyAnLCBjID0gJyArIGMgKyAnICgnICsgbGluay5mcm9tTm9kZS5kYXRhLnRleHQgKyAnIC0gJyArIHAxICsgJyAtIHRvICcgKyBsaW5rLnRvTm9kZS5kYXRhLnRleHQgKyAnIC0gJyArIHAyICsgJyknKTtcclxuXHJcbiAgICAgICAgbGluay5jdXJ2ZSA9IGdvLkxpbmsuQmV6aWVyO1xyXG4gICAgICAgIGxpbmsuZnJvbUVuZFNlZ21lbnRMZW5ndGggPSBjO1xyXG4gICAgICAgIGxpbmsudG9FbmRTZWdtZW50TGVuZ3RoID0gYztcclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBub24taW52ZW50b3J5IGxpbmsgaXMgb25lIG9mIG11bHRpcGxlIG9uZXMgYmV0d2VlbiBzYW1lIG5vZGVzLCBtYWtlIGl0IGN1cnZlZFxyXG4gICAgZnVuY3Rpb24gYXBwbHlNdWx0aWxpbmtDdXJ2ZVJvdXRpbmcobGluaywgc25wb3MpIHtcclxuICAgICAgICBsaW5rLmZyb21TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsudG9TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsuY3VydmUgPSBnby5MaW5rLkJlemllcjtcclxuICAgICAgICAvLyBjdXJ2aW5lc3MgdmFsdWVzIGJhc2VkIG9uIG51bWJlciBvZiBsaW5rczpcclxuICAgICAgICAvLyAyOiAtMjUgMjVcclxuICAgICAgICAvLyAzOiAtNTAgMCA1MFxyXG4gICAgICAgIC8vIDQ6IC0xMDAgLTUwIDAgNTAgMTAwXHJcbiAgICAgICAgdmFyIHJhbmdlU2l6ZSA9IDEwICogKHNucG9zLmNvdW50IC0gMSk7XHJcbiAgICAgICAgdmFyIHJhbmdlSW5jcmVtZW50ID0gMTA7XHJcbiAgICAgICAgaWYgKHNucG9zLmhhc1JUaGluZykge1xyXG4gICAgICAgICAgICByYW5nZVNpemUgPSAxMDAgKiAoc25wb3MuY291bnQgLSAxKTtcclxuICAgICAgICAgICAgcmFuZ2VJbmNyZW1lbnQgPSAxMDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhZGp1c3QgY3VydmluZXNzIGZvciBzbWFsbGVyIHNjYWxlc1xyXG4gICAgICAgIHZhciBsaW5rU2NhbGVGYWN0b3IgPSBzZWxmLmdldExpbmtTdHJva2VXaWR0aChsaW5rKSAvIDI7IC8vIDIgaXMgbWF4IHN0cm9rZSB3aWR0aFxyXG4gICAgICAgIHJhbmdlU2l6ZSAqPSBsaW5rU2NhbGVGYWN0b3I7XHJcbiAgICAgICAgcmFuZ2VJbmNyZW1lbnQgKj0gbGlua1NjYWxlRmFjdG9yO1xyXG5cclxuICAgICAgICB2YXIgcmFuZ2VTdGFydCA9IDAgLSByYW5nZVNpemUgLyAyO1xyXG5cclxuICAgICAgICBsaW5rLmN1cnZpbmVzcyA9IChyYW5nZVN0YXJ0ICsgcmFuZ2VJbmNyZW1lbnQgKiBzbnBvcy5pbmRleCkgKiBzbnBvcy5vcmllbnRhdGlvbjtcclxuICAgICAgICAvLyAvL2NvbnNvbGUubG9nKCdhcHBseU11bHRpbGlua0N1cnZlUm91dGluZywgbGluazogJyArIGxpbmsgKyAnLCBjdXJ2aW5lc3M6ICcgKyBsaW5rLmN1cnZpbmVzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZG8gbm9ybWFsIHN0cmFpZ2h0IGxpbmVzIGZvciBmcmVlaGFuZCBsYXlvdXQsIG9yIGxpbmtzIGJldHdlZW4gZGVzY2VuZGFudHMgb2YgdGhpbmdzIHdpdGggZGlmZmVyZW50IGxheW91dHNcclxuICAgIGZ1bmN0aW9uIGFwcGx5U3RyYWlnaHRSb3V0aW5nKGxpbmspIHtcclxuICAgICAgICBsaW5rLmZyb21TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsudG9TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsucm91dGluZyA9IGdvLkxpbmsuTm9ybWFsO1xyXG4gICAgICAgIGxpbmsuY3VydmUgPSBnby5MaW5rLkJlemllcjtcclxuICAgICAgICBsaW5rLmN1cnZpbmVzcyA9IDI1O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBjYWxjdWxhdGUgaG93IG1hbnkgbGlua3MgdGhlcmUgYXJlIGJldHdlZW4gYSBsaW5rJ3Mgbm9kZXMgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgb2YgdGhlIGZvcm1hdCB7IGluZGV4OiAxLCBjb3VudDogMiwgb3JpZW50YXRpb246IC0xLCBoYXNSVGhpbmc6IGZhbHNlIH0sXHJcbiAgICAvLyBpbmRpY2F0aW5nIGhvdyBtYW55IG90aGVyIGxpbmtzIHRoZXJlIGFyZSBiZXR3ZWVuIHRoZSBzYW1lIHBhaXIgb2Ygbm9kZXMsXHJcbiAgICAvLyB3aGVyZSB0aGUgZ2l2ZW4gbGluayBmYWxscyB3aXRoaW4gdGhpcyBsaXN0LCBhbmQgd2hhdCBpdHMgb3JpZW50YXRpb24gaXMuXHJcbiAgICB0aGlzLmdldFNhbWVOb2Rlc0xpbmtQb3NpdGlvbiA9IGZ1bmN0aW9uKGxpbmspIHtcclxuICAgICAgICB2YXIgbGlua3NCeU5vZGVzID0gZ2V0TGlua3NCeU5vZGVzKHRydWUpO1xyXG4gICAgICAgIC8vIGdldCBsaW5rcyB3aXRoIHRoZSBzYW1lIGtleSBhcyB0aGlzIG9uZSAoY29ubmVjdGluZyBzYW1lIG5vZGVzKVxyXG4gICAgICAgIHZhciBzYW1lTGlua3MgPSBfLndoZXJlKGxpbmtzQnlOb2Rlcywge1xyXG4gICAgICAgICAgICBrZXk6IGdldFNhbWVOb2Rlc0xpbmtLZXkobGluaylcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gZGVmYXVsdCByZXR1cm4gdmFsdWVcclxuICAgICAgICB2YXIgc25wb3MgPSB7XHJcbiAgICAgICAgICAgIGluZGV4OiAwLFxyXG4gICAgICAgICAgICBjb3VudDogMSxcclxuICAgICAgICAgICAgb3JpZW50YXRpb246IDEsXHJcbiAgICAgICAgICAgIGhhc1JUaGluZzogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIHNldCBpbmRleCwgY291bnQsIG9yaWVudGF0aW9uXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzYW1lTGlua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHNhbWVMaW5rc1tpXS5saW5rID09IGxpbmspIHtcclxuICAgICAgICAgICAgICAgIHNucG9zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiBzYW1lTGlua3MubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiBnZXRMaW5rT3JpZW50YXRpb24obGluaylcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIFJ0aGluZ1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzYW1lTGlua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHNhbWVMaW5rc1tpXS5oYXNSVGhpbmcpIHtcclxuICAgICAgICAgICAgICAgIHNucG9zLmhhc1JUaGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNucG9zO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgX2xpbmtzQnlOb2RlcyA9IG51bGw7XHJcblxyXG4gICAgLy8gcmVmcmVzaGVzIHRoZSBjYWNoZWQgbGlzdCBvZiBhbGwgbGlua3Mgd2l0aCBrZXlzLCB0byBmYWNpbGl0YXRlIGdyb3VwaW5nIHRoZW0gYWNjb3JkaW5nIHRvIGNvbm5lY3RlZCBub2Rlc1xyXG4gICAgZnVuY3Rpb24gZ2V0TGlua3NCeU5vZGVzKHJlZnJlc2gpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRMaW5rc0J5Tm9kZXMnKTtcclxuICAgICAgICBpZiAoIXNlbGYuX2xpbmtzQnlOb2RlcyB8fCByZWZyZXNoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuX2xpbmtzQnlOb2RlcyA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG4gICAgICAgICAgICB2YXIgbGlua3MgPSBkaWFncmFtLmxpbmtzLml0ZXJhdG9yO1xyXG4gICAgICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGdldFNhbWVOb2Rlc0xpbmtLZXkobGluayk7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbGlua3NCeU5vZGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluazogbGluayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzUlRoaW5nOiAobGluay5sYWJlbE5vZGVzLmNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2VsZi5fbGlua3NCeU5vZGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgYSBrZXkgdXNlZCB0byBncm91cCBsaW5rcyBhY2NvcmRpbmcgdG8gd2hpY2ggcGFpciBvZiBub2RlcyB0aGV5IGNvbm5lY3QuXHJcbiAgICAvLyBUaGUgcmV0dXJuZWQga2V5IGlzIG5vbi1lbXB0eSBmb3IgcmVndWxhciBsaW5rcyBhbmQgUCBsaW5rcyB0aGF0IHNob3VsZCBiZSBzaG93biBjdXJyZW50bHksXHJcbiAgICAvLyBzbyB0aGF0IHRoZXNlIHdpbGwgYWxsIGJlIHJvdXRlZCBieSB0aGUgc2FtZSBydWxlcy4gQSBudWxsIGtleSBpcyByZXR1cm5lZCBmb3IgYW55IG90aGVyXHJcbiAgICAvLyBsaW5rcywgaW5kaWNhdGluZyB0aGF0IG5vIGdyb3VwaW5nIGlzIHJlcXVpcmVkLlxyXG4gICAgZnVuY3Rpb24gZ2V0U2FtZU5vZGVzTGlua0tleShsaW5rKSB7XHJcbiAgICAgICAgLy8gICAgICAgIGlmIChzZWxmLmlzUkxpbmsobGluaykgfHwgKHNlbGYuaXNQTGluayhsaW5rKSAmJiBtYXAudGVtcGxhdGVzLnNob3dQTGluayhsaW5rKSkpIHtcclxuICAgICAgICBpZiAoc2VsZi5pc1JMaW5rKGxpbmspKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBbbGluay5mcm9tTm9kZS50b1N0cmluZygpLCBsaW5rLnRvTm9kZS50b1N0cmluZygpXS5zb3J0KCkuam9pbignfCcpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdrZXk6ICcgKyBrZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBXZSB1c2UgdGhpcyB0byBkaXN0aW5ndWlzaCBhbiBBLUIgbGluayBmcm9tIGEgQi1BIGxpbmsgKGJhc2VkIG9uIGZyb21Ob2RlIGFuZCB0b05vZGUsIHdoaWNoXHJcbiAgICAvLyBpcyBpbmRlcGVuZGVudCBvZiB0aGUgYXJyb3doZWFkIHNldHRpbmdzKSB3aGVuIHNldHRpbmcgY3VydmluZXNzLCBiZWNhdXNlIHNldHRpbmcgY3VydmluZXNzID0gMjVcclxuICAgIC8vIG9uIGFuIEEtQiBsaW5rIGlzIHRoZSBzYW1lIGFzIGN1cnZpbmVzcyA9IC0yNSBvbiBhIEItQSBsaW5rLlxyXG4gICAgZnVuY3Rpb24gZ2V0TGlua09yaWVudGF0aW9uKGxpbmspIHtcclxuICAgICAgICBpZiAobGluay5mcm9tTm9kZSAmJiBsaW5rLnRvTm9kZSAmJiBsaW5rLmZyb21Ob2RlLnRvU3RyaW5nKCkgPCBsaW5rLnRvTm9kZS50b1N0cmluZygpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gbGluayB0ZXN0cyAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmlzUkxpbmsgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT09IHVuZGVmaW5lZCAmJiBsaW5rLmZyb21Ob2RlICYmIGxpbmsudG9Ob2RlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzRExpbmsgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gQ09OU1RBTlRTLkRTUlAuRDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1BMaW5rID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHJldHVybiBsaW5rIGluc3RhbmNlb2YgZ28uTGluayAmJiBsaW5rLmRhdGEgJiYgbGluay5kYXRhLmNhdGVnb3J5ID09IENPTlNUQU5UUy5EU1JQLlA7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNHcm91cCA9IGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBnby5Hcm91cDtcclxuICAgIH07XHJcbn07IiwiY29uc3QgTm9kZUxhYmVsRHJhZ2dpbmdUb29sID0gcmVxdWlyZSgnLi9leHRlbnNpb25zL05vZGVMYWJlbERyYWdnaW5nVG9vbC5qcycpO1xyXG5jb25zdCBTYW5kYmFua0VkaXRvciA9IHJlcXVpcmUoJy4vc2JFZGl0b3InKTtcclxuY29uc3QgQ09OU1RBTlRTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2NvbnN0YW50cycpO1xyXG5jb25zdCBCdXR0b25EcmFnZ2luZ1Rvb2wgPSByZXF1aXJlKCcuL2J1dHRvbnMvYnV0dG9uRHJhZ2dpbmcnKTtcclxuY29uc3QgbWsgPSBnby5HcmFwaE9iamVjdC5tYWtlO1xyXG4vLyBmdW5jdGlvbnMgZm9yIGNyZWF0aW5nIGFuZCBtYW5pcHVsYXRpbmcgdGhlIG1hcCAoaS5lLiBEaWFncmFtKVxyXG5cclxuU2FuZGJhbmtFZGl0b3IuTWFwID0gZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkdGltZW91dCwgJG1vZGFsLCAkbG9nKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBjb21wb25lbnQgYWNjZXNzb3JzIC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDb21wb25lbnRzKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHNlbGYuYW5hbHl0aWNzLFxyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLFxyXG4gICAgICAgICAgICBzZWxmLmF1dG9zYXZlLFxyXG4gICAgICAgICAgICBzZWxmLmdlbmVyYXRvcixcclxuICAgICAgICAgICAgLy8gX2hpc3RvcnksXHJcbiAgICAgICAgICAgIHNlbGYubGF5b3V0cyxcclxuICAgICAgICAgICAgc2VsZi5wZXJzcGVjdGl2ZXMsXHJcbiAgICAgICAgICAgIHNlbGYucHJlc2VudGVyLFxyXG4gICAgICAgICAgICBzZWxmLnN0YW5kYXJkcyxcclxuICAgICAgICAgICAgc2VsZi50ZW1wbGF0ZXMsXHJcbiAgICAgICAgICAgIHNlbGYudGVzdHMsXHJcbiAgICAgICAgICAgIHNlbGYudWlcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZGlhZ3JhbSA9IG51bGw7XHJcbiAgICB0aGlzLmFuYWx5dGljcyA9IG51bGw7XHJcbiAgICB0aGlzLmF0dGFjaG1lbnRzID0gbnVsbDtcclxuICAgIHRoaXMuYXV0b3NhdmUgPSBudWxsO1xyXG4gICAgdGhpcy5nZW5lcmF0b3IgPSBudWxsO1xyXG4gICAgdGhpcy5sYXlvdXRzID0gbnVsbDtcclxuICAgIHRoaXMucGVyc3BlY3RpdmVzID0gbnVsbDtcclxuICAgIHRoaXMucHJlc2VudGVyID0gbnVsbDtcclxuICAgIHRoaXMuc3RhbmRhcmRzID0gbnVsbDtcclxuICAgIHRoaXMudGVtcGxhdGVzID0gbnVsbDtcclxuICAgIHRoaXMudGVzdHMgPSBudWxsO1xyXG4gICAgdGhpcy51aSA9IG51bGw7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gbWFwIGluaXQgLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIC8vIGluaXRpYWxpemUgY29tcG9uZW50c1xyXG4gICAgICAgIHNlbGYuYW5hbHl0aWNzID0gbmV3IFNhbmRiYW5rRWRpdG9yLkFuYWx5dGljcygkc2NvcGUsICRodHRwLCBzZWxmKTtcclxuICAgICAgICBzZWxmLmF0dGFjaG1lbnRzID0gbmV3IFNhbmRiYW5rRWRpdG9yLkF0dGFjaG1lbnRzKCRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgc2VsZik7XHJcbiAgICAgICAgc2VsZi5hdXRvc2F2ZSA9IG5ldyBTYW5kYmFua0VkaXRvci5BdXRvc2F2ZSgkc2NvcGUsICRodHRwLCBzZWxmKTtcclxuICAgICAgICBzZWxmLmdlbmVyYXRvciA9IG5ldyBTYW5kYmFua0VkaXRvci5HZW5lcmF0b3IoJHNjb3BlLCBzZWxmKTtcclxuICAgICAgICAvLyBfaGlzdG9yeSA9IG5ldyBTYW5kYmFua0VkaXRvci5IaXN0b3J5KCRzY29wZSwgJGh0dHAsIHNlbGYpO1xyXG4gICAgICAgIHNlbGYubGF5b3V0cyA9IG5ldyBTYW5kYmFua0VkaXRvci5MYXlvdXRzKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgc2VsZi5wZXJzcGVjdGl2ZXMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuUGVyc3BlY3RpdmVzKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgc2VsZi5wcmVzZW50ZXIgPSBuZXcgU2FuZGJhbmtFZGl0b3IuUHJlc2VudGVyKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgc2VsZi5zdGFuZGFyZHMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuU3RhbmRhcmRzKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgc2VsZi50ZW1wbGF0ZXMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVGVtcGxhdGVzKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgc2VsZi50ZXN0cyA9IG5ldyBTYW5kYmFua0VkaXRvci5UZXN0cygkc2NvcGUsIHNlbGYpO1xyXG4gICAgICAgIHNlbGYudWkgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVUkoJHNjb3BlLCAkdGltZW91dCwgJGh0dHAsICRyZXNvdXJjZSwgJG1vZGFsLCAkbG9nLCBzZWxmKTtcclxuXHJcbiAgICAgICAgLy8gY2FsbCBpbml0IGZvciBlYWNoIGNvbXBvbmVudCwgaWYgZGVmaW5lZFxyXG4gICAgICAgIF8uZWFjaChnZXRDb21wb25lbnRzKCksIGZ1bmN0aW9uKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50ICYmIGNvbXBvbmVudC5pbml0KVxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50LmluaXQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIGRpYWdyYW1cclxuICAgICAgICBzZWxmLmRpYWdyYW0gPSBtayhnby5EaWFncmFtLCBcImRpYWdyYW1cIiwge1xyXG4gICAgICAgICAgICBpbml0aWFsQ29udGVudEFsaWdubWVudDogZ28uU3BvdC5DZW50ZXIsXHJcbiAgICAgICAgICAgIGluaXRpYWxWaWV3cG9ydFNwb3Q6IGdvLlNwb3QuQ2VudGVyLFxyXG4gICAgICAgICAgICBpbml0aWFsRG9jdW1lbnRTcG90OiBnby5TcG90LkNlbnRlcixcclxuICAgICAgICAgICAgaGFzSG9yaXpvbnRhbFNjcm9sbGJhcjogZmFsc2UsXHJcbiAgICAgICAgICAgIGhhc1ZlcnRpY2FsU2Nyb2xsYmFyOiBmYWxzZSxcclxuICAgICAgICAgICAgcGFkZGluZzogNTAwLFxyXG4gICAgICAgICAgICBsYXlvdXQ6IHNlbGYubGF5b3V0cy5nZXRGcmVlaGFuZERpYWdyYW1MYXlvdXQoKSxcclxuICAgICAgICAgICAgXCJ1bmRvTWFuYWdlci5pc0VuYWJsZWRcIjogdHJ1ZSxcclxuICAgICAgICAgICAgZHJhZ2dpbmdUb29sOiBuZXcgQnV0dG9uRHJhZ2dpbmdUb29sKHNlbGYpLFxyXG4gICAgICAgICAgICBob3ZlckRlbGF5OiAyMDBcclxuICAgICAgICB9KTtcclxuICAgICAgICBzZWxmLmRpYWdyYW0udG9vbE1hbmFnZXIubW91c2VNb3ZlVG9vbHMuaW5zZXJ0QXQoMCwgbmV3IE5vZGVMYWJlbERyYWdnaW5nVG9vbCgpKTtcclxuXHJcbiAgICAgICAgaW5pdFRvb2xzKCk7XHJcbiAgICAgICAgc2VsZi50ZW1wbGF0ZXMuaW5pdFRlbXBsYXRlcyhzZWxmLmRpYWdyYW0pOyAvLyBzZXQgdXAgdGVtcGxhdGVzLCBjdXN0b21pemUgdGVtcG9yYXJ5IGxpbmsgYmVoYXZpb3JcclxuICAgICAgICBhZGREaWFncmFtTGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHNlbGYudGVtcGxhdGVzLmFkZEV4cG9ydEZvb3RlcigpO1xyXG5cclxuICAgICAgICAvLyB3YXRjaCBmb3IgdGFiIGNoYW5nZXNcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdjdXJyZW50VGFiJywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gdGhpcyBpcyBjYWxsZWQgYnkgYSAkc2NvcGUuJHdhdGNoIGluIGluaXQoKVxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vIC8vY29uc29sZS5sb2coJ2N1cnJlbnRUYWJDaGFuZ2VkLCBuZXdWYWx1ZTogJyArIG5ld1ZhbHVlICsgJywgb2xkVmFsdWU6ICcgKyBvbGRWYWx1ZSk7XHJcbiAgICAgICAgLy8gbm90aWZ5IGFueSBpbnRlcmVzdGVkIGNvbXBvbmVudHNcclxuICAgICAgICBfLmVhY2goZ2V0Q29tcG9uZW50cygpLCBmdW5jdGlvbihjb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQuY3VycmVudFRhYkNoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5jdXJyZW50VGFiQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBtaXNjLiB0b29sIGNvbmZpZ3VyYXRpb25cclxuICAgIGZ1bmN0aW9uIGluaXRUb29scygpIHtcclxuICAgICAgICAvLyBkaXNhYmxlIGNsaWNraW5nIG9uIFRleHRCbG9ja3MgdG8gZWRpdCAtIHdlIHdpbGwgaW52b2tlIGVkaXRpbmcgaW4gb3RoZXIgd2F5c1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5hbGxvd1RleHRFZGl0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIHNlbGVjdCB0ZXh0IHdoZW4gYWN0aXZhdGluZyBlZGl0b3I7XHJcbiAgICAgICAgLy8gdXNlIHNoaWZ0LWVudGVyIHRvIGNyZWF0ZSBuZXcgbGluZXMsIGVudGVyIHRvIGZpbmlzaCBlZGl0aW5nIChOQjogZWRpdG9yIGhhcyBtdWx0aWxpbmU9dHJ1ZSlcclxuICAgICAgICB2YXIgdGV4dFRvb2wgPSBzZWxmLmRpYWdyYW0udG9vbE1hbmFnZXIudGV4dEVkaXRpbmdUb29sO1xyXG4gICAgICAgIHRleHRUb29sLmRvQWN0aXZhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZ28uVGV4dEVkaXRpbmdUb29sLnByb3RvdHlwZS5kb0FjdGl2YXRlLmNhbGwodGV4dFRvb2wpO1xyXG4gICAgICAgICAgICBpZiAodGV4dFRvb2wuZGVmYXVsdFRleHRFZGl0b3IgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRleHRUb29sLmRlZmF1bHRUZXh0RWRpdG9yLnNlbGVjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRleHRUb29sLmRlZmF1bHRUZXh0RWRpdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS53aGljaCA9PSAxMyAmJiAhZS5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnby5UZXh0RWRpdGluZ1Rvb2wucHJvdG90eXBlLmFjY2VwdFRleHQuY2FsbCh0ZXh0VG9vbCwgZ28uVGV4dEVkaXRpbmdUb29sLkxvc3RGb2N1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBoYW5kbGUgZGVsZXRlIGtleSBvbiBNYWMgKGRlZmF1bHQgYmVoYXZpb3Igb25seSB1c2VzIGZuLURlbGV0ZSB0byBkZWxldGUgZnJvbSBjYW52YXMpXHJcbiAgICAgICAgc2VsZi5kaWFncmFtLmNvbW1hbmRIYW5kbGVyLmRvS2V5RG93biA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgZSA9IHNlbGYuZGlhZ3JhbS5sYXN0SW5wdXQ7XHJcbiAgICAgICAgICAgIHZhciBjbWQgPSBzZWxmLmRpYWdyYW0uY29tbWFuZEhhbmRsZXI7XHJcbiAgICAgICAgICAgIGlmIChlLmV2ZW50LndoaWNoID09PSA4KSB7XHJcbiAgICAgICAgICAgICAgICBjbWQuZGVsZXRlU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBnby5Db21tYW5kSGFuZGxlci5wcm90b3R5cGUuZG9LZXlEb3duLmNhbGwoY21kKTsgLy8gY2FsbCBiYXNlIG1ldGhvZCB3aXRoIG5vIGFyZ3VtZW50c1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gW2Rpc2FibGUga2V5Ym9hcmQgc2hvcnRjdXRzLCBhcyB0aGVzZSBkbyBub3QgZG8gY2VudGVyaW5nIG9uIHpvb20sXHJcbiAgICAgICAgLy8gYW5kIGNhbiBsZWFkIHRvIGNvbmZ1c2lvbiB3aXRoIGJyb3dzZXIgem9vbSAod2hpY2ggZ2V0cyBmaXJlZCBkZXBlbmRzIG9uIGZvY3VzKV1cclxuICAgICAgICAvLyAtIHR1cm5lZCBiYWNrIG9uIHRvIHN1cHBvcnQgcGluY2gvem9vbSBvbiBpUGFkXHJcbiAgICAgICAgc2VsZi5kaWFncmFtLmFsbG93Wm9vbSA9IHRydWU7XHJcblxyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS50b29sTWFuYWdlci5tb3VzZVdoZWVsQmVoYXZpb3IgPSBnby5Ub29sTWFuYWdlci5XaGVlbFpvb207XHJcblxyXG4gICAgICAgIC8vIGRlY2lkZSB3aGF0IGtpbmRzIG9mIFBhcnRzIGNhbiBiZSBhZGRlZCB0byBhIEdyb3VwIG9yIHRvIHRvcC1sZXZlbFxyXG4gICAgICAgIC8vIHNlbGYuZGlhZ3JhbS5jb21tYW5kSGFuZGxlci5tZW1iZXJWYWxpZGF0aW9uID0gZnVuY3Rpb24gKGdycCwgbm9kZSkge1xyXG4gICAgICAgIC8vICAgICAvL2lmIChncnAgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiBub2RlIGluc3RhbmNlb2YgZ28uR3JvdXApIHJldHVybiBmYWxzZTsgIC8vIGNhbm5vdCBhZGQgR3JvdXBzIHRvIEdyb3Vwc1xyXG4gICAgICAgIC8vICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAvLyB9O1xyXG5cclxuICAgICAgICAvLyBkZWZhdWx0IGxpbmsgYXR0cmlidXRlc1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS50b29sTWFuYWdlci5saW5raW5nVG9vbC5hcmNoZXR5cGVMaW5rRGF0YSA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ25vQXJyb3dzJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gZGVmYXVsdCBsaW5rIGF0dHJpYnV0ZXNcclxuICAgICAgICBzZWxmLmRpYWdyYW0udG9vbE1hbmFnZXIuZHJhZ2dpbmdUb29sLmFyY2hldHlwZUxpbmtEYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnbm9BcnJvd3MnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gYWxsb3cgZG91YmxlLWNsaWNrIGluIGJhY2tncm91bmQgdG8gY3JlYXRlIGEgbmV3IG5vZGVcclxuICAgICAgICBzZWxmLmRpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuYXJjaGV0eXBlTm9kZURhdGEgPSBnZXROZXdUaGluZ0RhdGEoKTtcclxuXHJcbiAgICAgICAgLy8gaG93IGxvbmcgbW91c2UgbXVzdCBiZSBoZWxkIHN0YXRpb25hcnkgYmVmb3JlIHN0YXJ0aW5nIGEgZHJhZy1zZWxlY3QgKGluc3RlYWQgb2YgYSBzY3JvbGwpIC0gZGVmYXVsdCB3YXMgMTc1bXNcclxuICAgICAgICBzZWxmLmRpYWdyYW0udG9vbE1hbmFnZXIuZHJhZ1NlbGVjdGluZ1Rvb2wuZGVsYXkgPSA0MDA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0gaGFuZGxpbmcgb2YgRGlhZ3JhbUV2ZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZERpYWdyYW1MaXN0ZW5lcnMoKSB7XHJcblxyXG4gICAgICAgIC8vIERpYWdyYW1FdmVudHMgdG8gYmUgaGFuZGxlZCBoZXJlIG9yIGJ5IGEgY29tcG9uZW50XHJcbiAgICAgICAgdmFyIGRpYWdyYW1FdmVudHMgPSBbXHJcbiAgICAgICAgICAgIFwiSW5pdGlhbExheW91dENvbXBsZXRlZFwiLFxyXG4gICAgICAgICAgICBcIkNoYW5nZWRTZWxlY3Rpb25cIixcclxuICAgICAgICAgICAgXCJCYWNrZ3JvdW5kU2luZ2xlQ2xpY2tlZFwiLFxyXG4gICAgICAgICAgICBcIlNlbGVjdGlvbkNvcGllZFwiLFxyXG4gICAgICAgICAgICBcIlNlbGVjdGlvbk1vdmVkXCIsXHJcbiAgICAgICAgICAgIFwiU2VsZWN0aW9uRGVsZXRpbmdcIixcclxuICAgICAgICAgICAgXCJTZWxlY3Rpb25EZWxldGVkXCIsXHJcbiAgICAgICAgICAgIFwiUGFydENyZWF0ZWRcIixcclxuICAgICAgICAgICAgXCJQYXJ0UmVzaXplZFwiLFxyXG4gICAgICAgICAgICBcIkNsaXBib2FyZENoYW5nZWRcIixcclxuICAgICAgICAgICAgXCJDbGlwYm9hcmRQYXN0ZWRcIixcclxuICAgICAgICAgICAgXCJMaW5rRHJhd25cIixcclxuICAgICAgICAgICAgXCJMaW5rUmVsaW5rZWRcIixcclxuICAgICAgICAgICAgXCJWaWV3cG9ydEJvdW5kc0NoYW5nZWRcIlxyXG4gICAgICAgIF07XHJcbiAgICAgICAgXy5lYWNoKGRpYWdyYW1FdmVudHMsIGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xyXG4gICAgICAgICAgICBzZWxmLmRpYWdyYW0uYWRkRGlhZ3JhbUxpc3RlbmVyKGV2ZW50TmFtZSwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgYnJvYWRjYXN0RGlhZ3JhbUV2ZW50KGV2ZW50TmFtZSwgZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzZWxmLmRpYWdyYW0uYWRkRGlhZ3JhbUxpc3RlbmVyKFwiQmFja2dyb3VuZENvbnRleHRDbGlja2VkXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgLy8gVE9ETzogdHVybiBvZmYgaW4gcHJvZHVjdGlvblxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdkaWFncmFtIG1vZGVsOicgKyBzZWxmLmRpYWdyYW0ubW9kZWwudG9Kc29uKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGJyb2FkY2FzdHMgdGhlIGdpdmVuIERpYWdyYW1FdmVudCAoc2VlIGFwaWRvY3MgZm9yIGdvLkRpYWdyYW1FdmVudClcclxuICAgIC8vIHRvIGFueSBjb21wb25lbnRzIHRoYXQgbWF5IGJlIGludGVyZXN0ZWQsIGluY2x1ZGluZyB0aGlzIG9uZS5cclxuICAgIGZ1bmN0aW9uIGJyb2FkY2FzdERpYWdyYW1FdmVudChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBzZWxmLmhhbmRsZURpYWdyYW1FdmVudChldmVudE5hbWUsIGUpO1xyXG4gICAgICAgIF8uZWFjaChnZXRDb21wb25lbnRzKCksIGZ1bmN0aW9uKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50ICYmIGNvbXBvbmVudC5oYW5kbGVEaWFncmFtRXZlbnQpXHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuaGFuZGxlRGlhZ3JhbUV2ZW50KGV2ZW50TmFtZSwgZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaGFuZGxlRGlhZ3JhbUV2ZW50ID0gZnVuY3Rpb24oZXZlbnROYW1lLCBlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaGFuZGxlRGlhZ3JhbUV2ZW50OiAnICsgZXZlbnROYW1lKTtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xyXG4gICAgICAgICAgICBjaGFuZ2VkU2VsZWN0aW9uKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25Db3BpZWQnKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGlvbkNvcGllZChlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnUGFydENyZWF0ZWQnKSB7XHJcbiAgICAgICAgICAgIHBhcnRDcmVhdGVkKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdCYWNrZ3JvdW5kU2luZ2xlQ2xpY2tlZCcpIHtcclxuICAgICAgICAgICAgc2VsZi51aS5zaG93SGVscFRpcCgnY2FudmFzVGlwJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ0xpbmtEcmF3bicpIHtcclxuICAgICAgICAgICAgbGlua0RyYXduKGUpO1xyXG4gICAgICAgICAgICBzZXROZXdMaW5rRGlyZWN0aW9uKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdMaW5rUmVsaW5rZWQnKSB7XHJcbiAgICAgICAgICAgIGxpbmtSZWxpbmtlZChlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnQ2xpcGJvYXJkQ2hhbmdlZCcpIHtcclxuICAgICAgICAgICAgY2xpcGJvYXJkQ2hhbmdlZChlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnQ2xpcGJvYXJkUGFzdGVkJykge1xyXG4gICAgICAgICAgICBjbGlwYm9hcmRQYXN0ZWQoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBoYW5kbGUgem9vbSB0byByZWdpb24gaWYgYXBwbGljYWJsZVxyXG4gICAgZnVuY3Rpb24gY2hhbmdlZFNlbGVjdGlvbihlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnbWFwLmNoYW5nZWRTZWxlY3Rpb24nKTtcclxuICAgICAgICBzZWxmLmRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICBzZWxmLnVpLm1heWJlWm9vbVRvUmVnaW9uKCk7XHJcbiAgICAgICAgaWYgKHNlbGYucmVsYXRpb25zaGlwc1NlbGVjdGVkKCkpIHtcclxuICAgICAgICAgICAgc2VsZi51aS5zaG93SGVscFRpcCgncmVsYXRpb25zaGlwVGlwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBhcnRDcmVhdGVkKGUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdNYXAsIFBhcnRDcmVhdGVkJyk7XHJcbiAgICAgICAgdmFyIGdyb3VwID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGlmICghKGdyb3VwIGluc3RhbmNlb2YgZ28uR3JvdXApKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbGF5b3V0Jywgc2VsZi51aS5nZXRNYXBFZGl0b3JPcHRpb25zKCkuZGVmYXVsdFRoaW5nTGF5b3V0IHx8ICdsZWZ0Jyk7XHJcbiAgICAgICAgc2VsZi5sYXlvdXRzLnNldE5ld1BhcnRMb2NhdGlvbkRhdGEoZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZml4IGxpbmsgcG9ydHMgd2hlbiBhIGxpbmsgaXMgY3JlYXRlZCAtXHJcbiAgICAvLyB0aGUgUCBhbmQgUiBwb3J0cyBib3RoIGNvdmVyIHRoZSB3aG9sZSBub2RlLCBhbmQgdGhlIFAgcG9ydCBpcyBvbiB0b3Agb2YgdGhlIFIgcG9ydCxcclxuICAgIC8vIHNvIGJvdGggUCBhbmQgUiBsaW5rcyBnZXQgdGhlIHRvUG9ydCBzZXQgdG8gUCBieSBkZWZhdWx0LlxyXG4gICAgZnVuY3Rpb24gbGlua0RyYXduKGUpIHtcclxuICAgICAgICB2YXIgbGluayA9IGUuc3ViamVjdDtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdsaW5rRHJhd24sIGxpbms6ICcgKyBsaW5rICsgJywgZnJvbVBvcnQ6ICcgKyBsaW5rLmZyb21Qb3J0SWQgKyAnLCB0b1BvcnQ6ICcgKyBsaW5rLnRvUG9ydElkKTtcclxuICAgICAgICBpZiAobGluay5kYXRhLnRleHQgPT0gQ09OU1RBTlRTLkRTUlAuUCB8fCBsaW5rLmZyb21Qb3J0SWQgPT0gQ09OU1RBTlRTLkRTUlAuUCkge1xyXG4gICAgICAgICAgICBsaW5rLmZyb21Qb3J0SWQgPSBDT05TVEFOVFMuRFNSUC5QXHJcbiAgICAgICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgY2F0ZWdvcnlcIik7XHJcbiAgICAgICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndG9Qb3J0JywgQ09OU1RBTlRTLkRTUlAuUCk7XHJcbiAgICAgICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAnY2F0ZWdvcnknLCBDT05TVEFOVFMuRFNSUC5QKTtcclxuICAgICAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgY2F0ZWdvcnlcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHByZXZlbnQgbGlua3MgZnJvbSBSIHRvIFBcclxuICAgICAgICBlbHNlIGlmIChsaW5rLmRhdGEudGV4dCA9PSBDT05TVEFOVFMuRFNSUC5SIHx8IGxpbmsuZnJvbVBvcnRJZCA9PSBDT05TVEFOVFMuRFNSUC5SKSB7XHJcbiAgICAgICAgICAgIGxpbmsuZnJvbVBvcnRJZCA9IENPTlNUQU5UUy5EU1JQLlJcclxuICAgICAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayB0b1BvcnRcIik7XHJcbiAgICAgICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndG9Qb3J0JywgQ09OU1RBTlRTLkRTUlAuUik7XHJcbiAgICAgICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHRvUG9ydFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZml4IGxpbmsgcG9ydHMgd2hlbiBhIGxpbmsgaXMgcmVsaW5rZWQgLVxyXG4gICAgLy8gZHJhZ2dpbmcgZWl0aGVyIGVuZCBvZiBhbiBSLWxpbmsgdG8gYW5vdGhlciBub2RlIHdpbGwgc2V0IHRoZSBjb3JyZXNwb25kaW5nIHBvcnQgdG8gUCxcclxuICAgIC8vIHNpbmNlIFAgcG9ydCBpcyBvbiB0b3Agb2YgUiBwb3J0LCBzbyB3ZSByZXNldCBib3RoIHBvcnRzIHRvIFIgaWYgdGhlIGNhdGVnb3J5IGlzIG5vdCBQLlxyXG4gICAgZnVuY3Rpb24gbGlua1JlbGlua2VkKGUpIHtcclxuICAgICAgICB2YXIgbGluayA9IGUuc3ViamVjdDtcclxuICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09PSB1bmRlZmluZWQgfHwgbGluay5kYXRhLmNhdGVnb3J5ICE9PSBDT05TVEFOVFMuRFNSUC5QKSB7XHJcbiAgICAgICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAnZnJvbVBvcnQnLCBDT05TVEFOVFMuRFNSUC5SKTtcclxuICAgICAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShsaW5rLmRhdGEsICd0b1BvcnQnLCBDT05TVEFOVFMuRFNSUC5SKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0TmV3TGlua0RpcmVjdGlvbihlKSB7XHJcbiAgICAgICAgdmFyIGxpbmsgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKGxpbmsuZnJvbVBvcnRJZCA9PSBDT05TVEFOVFMuRFNSUC5SKSB7XHJcbiAgICAgICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgZGlyZWN0aW9uXCIpO1xyXG4gICAgICAgICAgICBzZWxmLmRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ3R5cGUnLCBzZWxmLnVpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5kZWZhdWx0UmVsYXRpb25zaGlwRGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgc2VsZi5kaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgZGlyZWN0aW9uXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjbGlwYm9hcmRDaGFuZ2VkKGUpIHtcclxuICAgICAgICB2YXIgcGFydHMgPSBlLnN1YmplY3QuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKHBhcnRzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGlwYm9hcmRDaGFuZ2VkOiBwYXJ0ICcgKyBwYXJ0ICsgJywgbWFpbnBhbmVsIHNjYWxlOiAnICsgcGFydC5maW5kT2JqZWN0KCdtYWlucGFuZWwnKS5zY2FsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTkI6IHRoaXMgaXMgY2FsbGVkIHdoZW4gcGFydHMgYXJlIGNvcGllZCBieSBjb250cm9sLWRyYWcsIE5PVCB3aGVuIHRoZSBjb3B5IGJ1dHRvbiBpcyBjbGlja2VkXHJcbiAgICBmdW5jdGlvbiBzZWxlY3Rpb25Db3BpZWQoZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NlbGVjdGlvbkNvcGllZCcpO1xyXG4gICAgICAgIHZhciBwYXJ0cyA9IGUuc3ViamVjdC5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgcGFydC5pc1RvcExldmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jID0gZ28uUG9pbnQucGFyc2UocGFydC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdzZWxlY3Rpb25Db3BpZWQ6IHVwZGF0aW5nIGxvYyBvZiBwYXJ0ICcgKyBwYXJ0ICsgJyA9ICcgKyBsb2MgKyAnLCBzY2FsZTogJyArIHBhcnQuc2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShwYXJ0LmRhdGEsICdsb2MnLCAobG9jLnggKyA1MCkgKyAnICcgKyAobG9jLnkgKyA1MCkpO1xyXG4gICAgICAgICAgICAgICAgcGFydC51cGRhdGVUYXJnZXRCaW5kaW5ncygnbG9jJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2xpcGJvYXJkUGFzdGVkKGUpIHtcclxuICAgICAgICB2YXIgcGFydHMgPSBlLnN1YmplY3QuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKHBhcnRzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmIHBhcnQuaXNUb3BMZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvYyA9IGdvLlBvaW50LnBhcnNlKHBhcnQuZGF0YS5sb2MpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY2xpcGJvYXJkUGFzdGVkOiB1cGRhdGluZyBsb2Mgb2YgcGFydCAnICsgcGFydCArICcgPSAnICsgbG9jICsgJywgc2NhbGU6ICcgKyBwYXJ0LnNjYWxlKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbG9jJywgKGxvYy54ICsgNTApICsgJyAnICsgKGxvYy55ICsgNTApKTtcclxuICAgICAgICAgICAgICAgIHBhcnQudXBkYXRlVGFyZ2V0QmluZGluZ3MoJ2xvYycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvbXB1dGVzIHRoZSBib3VuZHMgb2YgYWxsIGdyb3VwcyBpbiB0aGUgZGlhZ3JhbSAtIHRoaXMgaW5jbHVkZXMgYWxsIGlkZWFzL3RoaW5ncyxcclxuICAgIC8vIGFuZCBleGNsdWRlcyBub2RlcywgaW5jbHVkaW5nIHNsaWRlcywgdGhlIHNsaWRlIGJsb2NrZXIsIGFuZCB0aGUgZXhwb3J0IGZvb3RlclxyXG4gICAgdGhpcy5jb21wdXRlTWFwQm91bmRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGdyb3VwcyA9IG5ldyBnby5MaXN0KGdvLkdyb3VwKTtcclxuICAgICAgICB2YXIgbm9kZXMgPSBzZWxmLmRpYWdyYW0ubm9kZXM7XHJcbiAgICAgICAgd2hpbGUgKG5vZGVzLm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAobm9kZXMudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBzLmFkZChub2Rlcy52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuZGlhZ3JhbS5jb21wdXRlUGFydHNCb3VuZHMoZ3JvdXBzKS5jb3B5KCk7IC8vIHJldHVybiBhIG11dGFibGUgcmVjdFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gd2hhdCBpcyBjdXJyZW50bHkgc2VsZWN0ZWQ/IC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRydWUgaWYgYWxsIHNlbGVjdGVkIGl0ZW1zIGFyZSB0aGluZ3MgKGkuZS4gR3JvdXBzKSwgaW5jbHVkaW5nIHItdGhpbmdzXHJcbiAgICB0aGlzLnRoaW5nc1NlbGVjdGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuZGlhZ3JhbSA9PSBudWxsIHx8IHNlbGYuZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciBpdCA9IHNlbGYuZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIShpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIHRydWUgaWYgZXhhY3RseSBvbmUgdGhpbmcgKEdyb3VwKSBpcyBzZWxlY3RlZFxyXG4gICAgdGhpcy50aGluZ1NlbGVjdGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuZGlhZ3JhbSAhPT0gbnVsbCAmJiBzZWxmLmRpYWdyYW0uc2VsZWN0aW9uLmNvdW50ID09IDEgJiYgc2VsZi5kaWFncmFtLnNlbGVjdGlvbi5maXJzdCgpIGluc3RhbmNlb2YgZ28uR3JvdXA7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGlmIGEgc2luZ2xlIGdyb3VwIGlzIHNlbGVjdGVkLCByZXR1cm5zIGl0LCBvdGhlcndpc2UgcmV0dXJucyBudWxsXHJcbiAgICB0aGlzLmdldFVuaXF1ZVRoaW5nU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoc2VsZi5kaWFncmFtICE9PSBudWxsICYmIHNlbGYuZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPT0gMSAmJiBzZWxmLmRpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCkgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5kaWFncmFtLnNlbGVjdGlvbi5maXJzdCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50aGluZ3NTZWxlY3RlZEFyZU1lbWJlcnNPZiA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuZGlhZ3JhbSA9PT0gbnVsbCB8fCBzZWxmLmRpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgaXQgPSBzZWxmLmRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkgfHwgaXQudmFsdWUuY29udGFpbmluZ0dyb3VwICE9IGdyb3VwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudGhpbmdzU2VsZWN0ZWRBcmVEZXNjZW5kYW50c09mID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICBpZiAoc2VsZi5kaWFncmFtID09PSBudWxsIHx8IHNlbGYuZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciBpdCA9IHNlbGYuZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgYW5jZXN0b3JzID0gc2VsZi5sYXlvdXRzLmdldEFuY2VzdG9yR3JvdXBzKGl0LnZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKF8uaW5kZXhPZihhbmNlc3RvcnMsIGdyb3VwKSA9PSAtMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRoaW5nc1NlbGVjdGVkSW5jbHVkZVNsaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuZGlhZ3JhbSA9PT0gbnVsbCB8fCBzZWxmLmRpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgaXQgPSBzZWxmLmRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKGl0LnZhbHVlLmRhdGEgJiYgaXQudmFsdWUuZGF0YS5jYXRlZ29yeSA9PSAnc2xpZGUnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIHRydWUgaWYgYWxsIHNlbGVjdGVkIGl0ZW1zIGFyZSByZWxhdGlvbnNoaXBzIChpLmUuIExpbmtzKVxyXG4gICAgdGhpcy5yZWxhdGlvbnNoaXBzU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoc2VsZi5kaWFncmFtID09PSBudWxsIHx8IHNlbGYuZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciBpdCA9IHNlbGYuZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIShpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkxpbmspIHx8ICFzZWxmLmxheW91dHMuaXNSTGluayhpdC52YWx1ZSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIGV4YWN0bHkgb25lIHJlbGF0aW9uc2hpcCAoTGluaykgaXMgc2VsZWN0ZWRcclxuICAgIHRoaXMucmVsYXRpb25zaGlwU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5kaWFncmFtICE9PSBudWxsICYmIHNlbGYuZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPT0gMSAmJiBzZWxmLmRpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCkgaW5zdGFuY2VvZiBnby5MaW5rO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gbG9hZCBhbmQgaW5pdGlhbGl6ZSBtb2RlbCAtLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5yZWxvYWQgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24oZGF0YSk7XHJcbiAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsLmFkZENoYW5nZWRMaXN0ZW5lcihzZWxmLmF1dG9zYXZlLm1vZGVsQ2hhbmdlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sb2FkID0gZnVuY3Rpb24oZGF0YSkge1xyXG5cclxuICAgICAgICBkYXRhID0gZGF0YSB8fCAkc2NvcGUubWFwRGF0YS5kYXRhO1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbCA9IGdvLk1vZGVsLmZyb21Kc29uKGRhdGEpO1xyXG4gICAgICAgIHNlbGYudWkuc2V0U3RhdGVEYXRhKCRzY29wZS5tYXBEYXRhLnN0YXRlX2RhdGEpO1xyXG4gICAgICAgIHNlbGYudWkuc2V0TWFwRWRpdG9yT3B0aW9ucygkc2NvcGUubWFwRGF0YS5lZGl0b3Jfb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHNlbGYuY2hlY2tNb2RlbCgpO1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS51bmRvTWFuYWdlci5pc0VuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5hZGRDaGFuZ2VkTGlzdGVuZXIoc2VsZi5hdXRvc2F2ZS5tb2RlbENoYW5nZWQpO1xyXG4gICAgICAgIHNlbGYuYXV0b3NhdmUuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICBzZWxmLmRpYWdyYW0uaXNSZWFkT25seSA9ICEkc2NvcGUuY2FuRWRpdDtcclxuICAgICAgICAkc2NvcGUudXBkYXRlRWRpdFN0YXR1cygkc2NvcGUuY2FuRWRpdCA/ICRzY29wZS5MQVNUX1VQREFURUQgOiAkc2NvcGUuUkVBRF9PTkxZKTtcclxuICAgICAgICAvL3NlbGYudWkucmVzZXRab29tKCk7XHJcbiAgICAgICAgc2VsZi5sb2FkTWFwRXh0cmFEYXRhKCRzY29wZS5tYXBEYXRhKTtcclxuXHJcbiAgICAgICAgLy8gaWYgbm8gbm9kZXMgT1IgaW4gdGhpbmtxdWVyeSBtb2RlLCBsYXVuY2ggZ2VuZXJhdG9yXHJcbiAgICAgICAgaWYgKCRzY29wZS50aGlua3F1ZXJ5IHx8ICFzZWxmLmRpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc2VsZi51aS5vcGVuVGFiKHNlbGYudWkuVEFCX0lEc2VsZi5nZW5lcmF0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiB3ZSBoYXZlIHNsaWRlcywgcGxheSBwcmVzZW50YXRpb25cclxuICAgICAgICBlbHNlIGlmICghJHNjb3BlLmNhbkVkaXQgJiYgc2VsZi5wcmVzZW50ZXIuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc2VsZi5wcmVzZW50ZXIucGxheVNsaWRlKDEpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxvYWRGb3JTYW5kYm94ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24oJHNjb3BlLm1hcERhdGEpO1xyXG4gICAgICAgIHNlbGYudWkuc2V0U3RhdGVEYXRhKCcnKTsgLy8gaW1wb3J0YW50ISAob3RoZXJ3aXNlIGNvcm5lciBoaWdobGlnaHRpbmcgYnJlYWtzKVxyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS51bmRvTWFuYWdlci5pc0VuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHNlbGYudWkucmVzZXRab29tKCk7XHJcbiAgICAgICAgJHNjb3BlLmNhbkVkaXQgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBpZiBubyBub2RlcyBPUiBpbiB0aGlua3F1ZXJ5IG1vZGUsIGxhdW5jaCBnZW5lcmF0b3JcclxuICAgICAgICBpZiAoJHNjb3BlLnRoaW5rcXVlcnkpIHtcclxuICAgICAgICAgICAgc2VsZi51aS5vcGVuVGFiKHNlbGYudWkuVEFCX0lEc2VsZi5nZW5lcmF0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiB3ZSBoYXZlIHNsaWRlcywgcGxheSBwcmVzZW50YXRpb25cclxuICAgICAgICBlbHNlIGlmIChzZWxmLnByZXNlbnRlci5nZXRTbGlkZU5vZGVEYXRhcygpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzZWxmLnByZXNlbnRlci5wbGF5U2xpZGUoMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgLy8gZml4IGFueSBzdHJ1Y3R1cmFsIHByb2JsZW1zIGluIHRoZSBtb2RlbCBiZWZvcmUgZGlzcGxheWluZyBpdFxyXG4gICAgdGhpcy5jaGVja01vZGVsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gY2hhbmdlIFwiaXNMaW5rTGFiZWxcIiBwcm9wZXJ0eSB0byBjYXRlZ29yeTpcIkxpbmtMYWJlbFwiIChjaGFuZ2UgYXMgb2YgZ29KUyAxLjMpXHJcbiAgICAgICAgXy5lYWNoKHNlbGYuZGlhZ3JhbS5tb2RlbC5ub2RlRGF0YUFycmF5LCBmdW5jdGlvbihub2RlRGF0YSwgaW5kZXgsIGxpc3QpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGVEYXRhLmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgbm9kZURhdGEuaXNMaW5rTGFiZWw7XHJcbiAgICAgICAgICAgICAgICBub2RlRGF0YS5jYXRlZ29yeSA9IFwiTGlua0xhYmVsXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIHRoZSBsaW5rIGxhYmVsIChyLXRoaW5nKSBmb3IgYSBsaW5rIGJlaW5nIHRoZSBzYW1lIGFzIHRoZSBmcm9tIG9yIHRvIG5vZGVcclxuICAgICAgICAvLyAtIHRoaXMgY2FuIGNhdXNlIGluZmluaXRlIHJlY3Vyc2lvbiBpbiB0aGlua3MgbGlrZSBsYXlvdXQuZ2V0U2NhbGVcclxuICAgICAgICBfLmVhY2goc2VsZi5kaWFncmFtLm1vZGVsLmxpbmtEYXRhQXJyYXksIGZ1bmN0aW9uKGxpbmtEYXRhLCBpbmRleCwgbGlzdCkge1xyXG4gICAgICAgICAgICB2YXIgYmFkTGFiZWxLZXlzID0gW107XHJcbiAgICAgICAgICAgIF8uZWFjaChsaW5rRGF0YS5sYWJlbEtleXMsIGZ1bmN0aW9uKGtleSwgaW5kZXgyLCBsaXN0Mikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PSBsaW5rRGF0YS5mcm9tIHx8IGtleSA9PSBsaW5rRGF0YS50bykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xhYmVsS2V5IHNhbWUgYXMgZnJvbSBvciB0byBvZiBsaW5rOiAnICsga2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBiYWRMYWJlbEtleXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGlua0RhdGEubGFiZWxLZXlzID0gXy5kaWZmZXJlbmNlKGxpbmtEYXRhLmxhYmVsS2V5cywgYmFkTGFiZWxLZXlzKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbG9hZHMgb3RoZXIgZGF0YSBiZXNpZGVzIHRoZSBkaWFncmFtIG1vZGVsIGZyb20gdGhlIGpzb24gb2JqZWN0IHJldHVybmVkIGJ5IG1hcHMvc2hvdy5qc29uXHJcbiAgICAvLyAtIHRoaXMgaW5jbHVkZXMgcG9pbnRzLCBiYWRnZXMsIHZlcnNpb25zLCBhbmQgbWFwIGFuYWx5dGljc1xyXG4gICAgLy8gTkI6IHBvaW50cyBhbmQgYmFkZ2VzIGFyZSBzZXQgYXQgcGFnZSBsb2FkIHRpbWUgaW4gbGF5b3V0cy91c2VyIGFuZCB1c2Vycy9iYWRnZXMsIGJ1dFxyXG4gICAgLy8gd2UgYWxzbyBuZWVkIHRvIGJlIGFibGUgdG8gdXBkYXRlIHRoZW0gaGVyZSBhZnRlciBhbiBhdXRvc2F2ZVxyXG5cclxuICAgIC8vIFRPRE86IGlzIHRoaXMgc3RpbGwgYWxsIG5lZWRlZCB3aXRoIHRoZSBuZXdlciB1c2VyUHJvZmlsZSBzdHVmZj9cclxuICAgIHRoaXMubG9hZE1hcEV4dHJhRGF0YSA9IGZ1bmN0aW9uKG1hcERhdGEpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtYXAubG9hZE1hcEV4dHJhRGF0YSwgbWFwRGF0YTogJyArIG1hcERhdGEpO1xyXG4gICAgICAgICAgICAkc2NvcGUubWFwVXNlclRhZ3MgPSBtYXBEYXRhLm1ldGFkYXRhLnVzZXJUYWdzOyAvLyBUT0RPOiBpcyB0aGlzIHVzZWQgYW55d2hlcmU/XHJcblxyXG4gICAgICAgICAgICAvLyRzY29wZS5tYXAuZ2V0SGlzdG9yeSgpLnZlcnNpb25MaXN0ID0gbWFwRGF0YS52ZXJzaW9ucztcclxuICAgICAgICAgICAgJHNjb3BlLm1hcC5hbmFseXRpY3MubWFwQW5hbHl0aWNzID0gbWFwRGF0YS5hbmFseXRpY3M7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGxvYWRzIG1vZGVsIGRhdGEgZm9yIGFuIGluZGl2aWR1YWwgdmVyc2lvbiBhbmQgZGlzcGxheXMgaXRcclxuICAgIC8vIE5COiB0aGlzIGFsc28gZGlzYWJsZXMgYXV0b3NhdmU7IGxvYWQoKSBtdXN0IGJlIGNhbGxlZCB0byByZS1lbmFibGUgaXRcclxuICAgIHRoaXMubG9hZFZlcnNpb24gPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICRodHRwLmdldCgnL21hcF92ZXJzaW9ucy8nICsgaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xvYWRlZCBtYXAgdmVyc2lvbiB3aXRoIElEOiAnICsgaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbCA9IGdvLk1vZGVsLmZyb21Kc29uKHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGlhZ3JhbS51bmRvTWFuYWdlci5pc0VuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmF1dG9zYXZlLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGlhZ3JhbS5pc1JlYWRPbmx5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgnQ291bGQgbm90IGxvYWQgTWV0YU1hcCB2ZXJzaW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmVycm9yKGUubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0IHdoZXRoZXIgZWRpdGluZyBjYXBhYmlsaXR5IGlzIHRlbXBvcmFyaWx5IHN1c3BlbmRlZCAtXHJcbiAgICAvLyB0aGlzIGlzIGRpc3RpbmN0IGZyb20gdGhlIGdsb2JhbCAkc2NvcGUuY2FuRWRpdCBzZXR0aW5nLFxyXG4gICAgLy8gd2hpY2ggaWYgZmFsc2UgcHJldmVudHMgZWRpdGluZyBhdCBhbGwgdGltZXNcclxuICAgIHRoaXMuc2V0RWRpdGluZ0Jsb2NrZWQgPSBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgc2VsZi5kaWFncmFtLmlzUmVhZE9ubHkgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tIGNyZWF0aW5nIHRoaW5ncyBpbiB0aGUgbW9kZWwgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGRlZmF1bHQgcHJvcGVydGllcyBmb3IgYWxsIG5ldyBUaGluZ3MgKGdyb3VwcykgLSBub3RlIHRoYXQgdGhlc2UgY2FuIGJlIG92ZXJyaWRkZW4gaWYgbmVlZGVkXHJcbiAgICBmdW5jdGlvbiBnZXROZXdUaGluZ0RhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdGV4dDogJ0lkZWEnLFxyXG4gICAgICAgICAgICBpc0dyb3VwOiB0cnVlLFxyXG4gICAgICAgICAgICBsYXlvdXQ6IHNlbGYudWkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLmRlZmF1bHRUaGluZ0xheW91dCB8fCAnbGVmdCcsXHJcbiAgICAgICAgICAgIHNFeHBhbmRlZDogdHJ1ZSxcclxuICAgICAgICAgICAgcEV4cGFuZGVkOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNyZWF0ZVNpc3RlciA9IGZ1bmN0aW9uKHRoaW5nKSB7XHJcbiAgICAgICAgaWYgKCEkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBuZXdMb2MgPSBzZWxmLmxheW91dHMuZ2V0TmV3U2lzdGVyTG9jYXRpb24odGhpbmcpO1xyXG4gICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQoZ2V0TmV3VGhpbmdEYXRhKCksIHtcclxuICAgICAgICAgICAgZ3JvdXA6IHRoaW5nLmRhdGEuZ3JvdXAsXHJcbiAgICAgICAgICAgIHRleHQ6ICdJZGVhJyxcclxuICAgICAgICAgICAgbG9jOiBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICB2YXIgbmV3U2lzdGVyID0gc2VsZi5kaWFncmFtLmZpbmROb2RlRm9yRGF0YShkYXRhKTtcclxuXHJcbiAgICAgICAgLy8gcHV0IG5ldyBzaXN0ZXIgcmlnaHQgYWZ0ZXIgdGhpbmcgKG5vdCBhcyB0aGUgbGFzdCBzaWJsaW5nKVxyXG4gICAgICAgIGlmICh0aGluZy5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgc2VsZi5tb3ZlU2libGluZ05leHRUbyhuZXdTaXN0ZXIsIHRoaW5nLCBDT05TVEFOVFMuQ0FOVkFTLlJJR0hUKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld1Npc3RlcjtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGVSVG9TaXN0ZXIgPSBmdW5jdGlvbih0aGluZykge1xyXG4gICAgICAgIGlmICghJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGhpbmdLZXkgPSBzZWxmLmRpYWdyYW0ubW9kZWwuZ2V0S2V5Rm9yTm9kZURhdGEodGhpbmcuZGF0YSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygndGhpbmdLZXk6ICcgKyB0aGluZ0tleSk7XHJcbiAgICAgICAgdmFyIG5ld0xvYyA9IHNlbGYubGF5b3V0cy5nZXROZXdTaXN0ZXJMb2NhdGlvbih0aGluZywgdHJ1ZSk7IC8vIHdpdGhSID0gdHJ1ZVxyXG4gICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQoZ2V0TmV3VGhpbmdEYXRhKCksIHtcclxuICAgICAgICAgICAgZ3JvdXA6IHRoaW5nLmRhdGEuZ3JvdXAsXHJcbiAgICAgICAgICAgIHRleHQ6ICdJZGVhJyxcclxuICAgICAgICAgICAgbG9jOiBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICB2YXIgbmV3U2lzdGVyID0gc2VsZi5kaWFncmFtLmZpbmROb2RlRm9yRGF0YShkYXRhKTtcclxuICAgICAgICB2YXIgZ3JvdXBLZXkgPSBzZWxmLmRpYWdyYW0ubW9kZWwuZ2V0S2V5Rm9yTm9kZURhdGEoZGF0YSk7XHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSBsaW5rXHJcbiAgICAgICAgdmFyIGxpbmtEYXRhID0ge1xyXG4gICAgICAgICAgICBmcm9tOiB0aGluZ0tleSxcclxuICAgICAgICAgICAgdG86IGdyb3VwS2V5LFxyXG4gICAgICAgICAgICB0eXBlOiAndG8nLFxyXG4gICAgICAgICAgICBmcm9tUG9ydDogQ09OU1RBTlRTLkRTUlAuUixcclxuICAgICAgICAgICAgdG9Qb3J0OiBDT05TVEFOVFMuRFNSUC5SXHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZWxmLmRpYWdyYW0ubW9kZWwuYWRkTGlua0RhdGEobGlua0RhdGEpO1xyXG5cclxuICAgICAgICAvLyBwdXQgbmV3IHNpc3RlciByaWdodCBhZnRlciB0aGluZyAobm90IGFzIHRoZSBsYXN0IHNpYmxpbmcpXHJcbiAgICAgICAgaWYgKHRoaW5nLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICBzZWxmLm1vdmVTaWJsaW5nTmV4dFRvKG5ld1Npc3RlciwgdGhpbmcsIENPTlNUQU5UUy5DQU5WQVMuUklHSFQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3U2lzdGVyO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUNoaWxkID0gZnVuY3Rpb24odGhpbmcsIG5hbWUsIHgsIHkpIHtcclxuICAgICAgICBpZiAoISRzY29wZS5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG5ld0xvYyA9IHNlbGYubGF5b3V0cy5nZXROZXdDaGlsZExvY2F0aW9uMih0aGluZyk7XHJcbiAgICAgICAgaWYgKHggfHwgeSkge1xyXG4gICAgICAgICAgICBuZXdMb2MgPSBuZXcgZ28uUG9pbnQoeCwgeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQoZ2V0TmV3VGhpbmdEYXRhKCksIHtcclxuICAgICAgICAgICAgZ3JvdXA6IHRoaW5nLmRhdGEua2V5LFxyXG4gICAgICAgICAgICB0ZXh0OiBuYW1lIHx8ICdQYXJ0JyxcclxuICAgICAgICAgICAgbG9jOiBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICBzZWxmLmxheW91dHMuc2V0RGVzY2VuZGFudExheW91dHModGhpbmcsIHRoaW5nLmRhdGEubGF5b3V0KTtcclxuICAgICAgICB2YXIgY2hpbGQgPSBzZWxmLmRpYWdyYW0uZmluZE5vZGVGb3JEYXRhKGRhdGEpO1xyXG4gICAgICAgIGNoaWxkLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNyZWF0ZVJUaGluZyA9IGZ1bmN0aW9uKGxpbmssIG5hbWUpIHtcclxuICAgICAgICBpZiAoISRzY29wZS5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gLy9jb25zb2xlLmxvZygnY3JlYXRlUlRoaW5nLCBsaW5rOiAnICsgbGluayArICcsIG5hbWU6ICcgKyBuYW1lKTtcclxuICAgICAgICAvLyBkb24ndCBhbGxvdyBtdWx0aXBsZSBSLXRoaW5nc1xyXG4gICAgICAgIGlmIChsaW5rLmlzTGFiZWxlZExpbmspIHtcclxuICAgICAgICAgICAgLy8gLy9jb25zb2xlLmxvZygnY2Fubm90IGNyZWF0ZSBSVGhpbmcsIGxpbmsgaXMgYWxyZWFkeSBsYWJlbGVkJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQoZ2V0TmV3VGhpbmdEYXRhKCksIHtcclxuICAgICAgICAgICAgdGV4dDogbmFtZSB8fCAnUmVsYXRpb25zaGlwIElkZWEnLFxyXG4gICAgICAgICAgICAvL2lzTGlua0xhYmVsOiB0cnVlLCAgICAgLy8gZGVwcmVjYXRlZCBhcyBvZiBnb0pTIDEuM1xyXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJMaW5rTGFiZWxcIiwgLy8gbmV3IGFzIG9mIGdvSlMgMS4zXHJcbiAgICAgICAgICAgIGxvYzogJzAgMCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBzZWxmLmRpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNyZWF0ZSBSIFRoaW5nXCIpO1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICB2YXIga2V5ID0gc2VsZi5kaWFncmFtLm1vZGVsLmdldEtleUZvck5vZGVEYXRhKGRhdGEpO1xyXG4gICAgICAgIHZhciBub2RlID0gc2VsZi5kaWFncmFtLmZpbmRQYXJ0Rm9yS2V5KGtleSk7XHJcbiAgICAgICAgbm9kZS5sYWJlbGVkTGluayA9IGxpbms7XHJcbiAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKFwiY3JlYXRlIFIgVGhpbmdcIik7XHJcbiAgICAgICAgc2VsZi5kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLmRpYWdyYW0uZmluZE5vZGVGb3JEYXRhKGRhdGEpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tIGNyZWF0aW5nIHRoaW5ncyB3aXRoIHNwZWNpZmllZCBuYW1lcy9sb2NhdGlvbnMgLSBmb3IgdXNlIGJ5IGdlbmVyYXRvciBhbmQgdGVzdHMgLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5jcmVhdGVUaGluZyA9IGZ1bmN0aW9uKHgsIHksIG5hbWUsIGxheW91dCkge1xyXG4gICAgICAgIGdyb3VwID0gc2VsZi5kaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmluc2VydFBhcnQobmV3IGdvLlBvaW50KHgsIHkpKTtcclxuICAgICAgICBzZWxmLmRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICd0ZXh0JywgbmFtZSk7XHJcbiAgICAgICAgaWYgKGxheW91dCkge1xyXG4gICAgICAgICAgICBzZWxmLmRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsYXlvdXQnLCBsYXlvdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZ3JvdXA7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlUkxpbmtXaXRoUlRoaW5nID0gZnVuY3Rpb24odGhpbmcxLCB0aGluZzIsIG5hbWUpIHtcclxuICAgICAgICB2YXIgbGluayA9IHNlbGYuY3JlYXRlUkxpbmsodGhpbmcxLCB0aGluZzIpO1xyXG4gICAgICAgIHJldHVybiBzZWxmLmNyZWF0ZVJUaGluZyhsaW5rLCBuYW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgbGlua0RhdGEgb2JqZWN0IGZvciB0aGUgbmV3IGxpbmtcclxuICAgIHRoaXMuY3JlYXRlUkxpbmsgPSBmdW5jdGlvbih0aGluZzEsIHRoaW5nMikge1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnbm9BcnJvd3MnLFxyXG4gICAgICAgICAgICBmcm9tOiB0aGluZzEuZGF0YS5rZXksXHJcbiAgICAgICAgICAgIHRvOiB0aGluZzIuZGF0YS5rZXksXHJcbiAgICAgICAgICAgIGZyb21Qb3J0OiBDT05TVEFOVFMuRFNSUC5SLFxyXG4gICAgICAgICAgICB0b1BvcnQ6IENPTlNUQU5UUy5EU1JQLlJcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5hZGRMaW5rRGF0YShkYXRhKTtcclxuICAgICAgICBzZWxmLmRpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuZGlhZ3JhbS5maW5kTGlua0ZvckRhdGEoZGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIGxpbmtEYXRhIG9iamVjdCBmb3IgdGhlIG5ldyBsaW5rXHJcbiAgICB0aGlzLmNyZWF0ZVBMaW5rID0gZnVuY3Rpb24odGhpbmcxLCB0aGluZzIpIHtcclxuICAgICAgICBzZWxmLmRpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbignYWRkIGxpbmsnKTtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ25vQXJyb3dzJyxcclxuICAgICAgICAgICAgZnJvbTogdGhpbmcxLmRhdGEua2V5LFxyXG4gICAgICAgICAgICB0bzogdGhpbmcyLmRhdGEua2V5LFxyXG4gICAgICAgICAgICBmcm9tUG9ydDogQ09OU1RBTlRTLkRTUlAuUCxcclxuICAgICAgICAgICAgdG9Qb3J0OiBDT05TVEFOVFMuRFNSUC5QLFxyXG4gICAgICAgICAgICBjYXRlZ29yeTogQ09OU1RBTlRTLkRTUlAuUFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsLmFkZExpbmtEYXRhKGRhdGEpO1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbignYWRkIGxpbmsnKTtcclxuICAgICAgICBzZWxmLmRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMS5kYXRhLCAncEV4cGFuZGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuZGlhZ3JhbS5maW5kTGlua0ZvckRhdGEoZGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0gbW92aW5nIHRoaW5ncyBpbiB0aGUgbW9kZWwgc3RydWN0dXJlIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyByZXR1cm5zIGEgZ28uTGlzdCBvZiB0aGUgaXRlbXMgaW4gdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHRoYXQgYXJlIEdyb3Vwc1xyXG4gICAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRHcm91cHMoKSB7XHJcbiAgICAgICAgdmFyIGl0ID0gc2VsZi5kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB2YXIgbWVtYmVycyA9IG5ldyBnby5MaXN0KCk7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXJzLmFkZChwYXJ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVtYmVycztcclxuICAgIH1cclxuXHJcbiAgICAvLyBkcmFnIHRvIFNcclxuICAgIHRoaXMuYWRkU2VsZWN0ZWRUaGluZ3NBc0NoaWxkcmVuT2YgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHZhciBuZXdNZW1iZXJzID0gZ2V0U2VsZWN0ZWRHcm91cHMoKTtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZXhpc3RpbmcgbWVtYmVycyBzbyB3ZSBjYW4gY2FsY3VsYXRlIGxheW91dFxyXG4gICAgICAgIHZhciBvbGRNZW1iZXJCb3VuZHMgPSBzZWxmLnNhZmVSZWN0KHNlbGYuZGlhZ3JhbS5jb21wdXRlUGFydHNCb3VuZHMoZ3JvdXAubWVtYmVyUGFydHMpKTtcclxuXHJcbiAgICAgICAgLy8gTkI6IHRoaXMgaXMgc3ViamVjdCB0byB2YWxpZGF0aW9uIGJ5IENvbW1hbmRIYW5kbGVyLmlzVmFsaWRNZW1iZXIsXHJcbiAgICAgICAgLy8gc28gZm9yIGV4YW1wbGUsIG1lbWJlcnMgb2YgbWVtYmVycyBvZiBuZXdNZW1iZXJzIHdpbGwgbm90IGJlIGFkZGVkIGFzIG1lbWJlcnNcclxuICAgICAgICBncm91cC5hZGRNZW1iZXJzKG5ld01lbWJlcnMpO1xyXG5cclxuICAgICAgICBzZWxmLmxheW91dHMubGF5b3V0TmV3TWVtYmVyc1JlbGF0aXZlVG8obmV3TWVtYmVycywgZ3JvdXAsIG9sZE1lbWJlckJvdW5kcyk7XHJcblxyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBkcmFnIHRvIERcclxuICAgIHRoaXMuYWRkU2VsZWN0ZWRUaGluZ3NBc1Npc3RlcnNPZiA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG9sZE1lbWJlcnMgPSBnZXRTZWxlY3RlZEdyb3VwcygpO1xyXG5cclxuICAgICAgICAvLyBpZiBkcmFnZ2luZyB0byB0b3AgbGV2ZWwsIG1vdmUgZHJhZ2dlZCB0aGluZ3Mgc28gdGhleSBkb24ndCBvdmVybGFwIHRoZSBmb3JtZXIgcGFyZW50XHJcbiAgICAgICAgaWYgKCFncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgLy8gY2hlY2sgZXhpc3RpbmcgbWVtYmVycyBzbyB3ZSBjYW4gY2FsY3VsYXRlIGxheW91dFxyXG4gICAgICAgICAgICB2YXIgb2xkTWVtYmVyc0JvdW5kcyA9IHNlbGYuZGlhZ3JhbS5jb21wdXRlUGFydHNCb3VuZHMob2xkTWVtYmVycyk7XHJcbiAgICAgICAgICAgIC8vIE5COiBvbGRNZW1iZXJzIGNhbiBiZSBvbiBtdWx0aXBsZSBsZXZlbHMsIHNvIG5vdCBjbGVhciB3aGljaCBsZXZlbCB0byB1c2UgZm9yIHJlc2NhbGluZyBvbGQgbWVtYmVycyBhZnRlciBkcmFnXHJcbiAgICAgICAgICAgIHZhciBvbGRNZW1iZXJzTGV2ZWwgPSBzZWxmLmxheW91dHMuY29tcHV0ZUxldmVsKG9sZE1lbWJlcnMuZmlyc3QoKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaXQgPSBvbGRNZW1iZXJzLml0ZXJhdG9yO1xyXG4gICAgICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVtYmVyID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXIuY29udGFpbmluZ0dyb3VwID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLmxheW91dHMubGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZihvbGRNZW1iZXJzLCBncm91cCwgb2xkTWVtYmVyc0JvdW5kcywgb2xkTWVtYmVyc0xldmVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgbm90IGRyYWdnaW5nIHRvIHRvcCBsZXZlbCwgcGxhY2UgZHJhZ2dlZCB0aGluZ3MgYWZ0ZXIgZm9ybWVyIHBhcmVudCBpbiBvdXRsaW5lXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBpdDIgPSBvbGRNZW1iZXJzLml0ZXJhdG9yO1xyXG4gICAgICAgICAgICB3aGlsZSAoaXQyLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lbWJlcjIgPSBpdDIudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXIyLmNvbnRhaW5pbmdHcm91cCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICAgICAgICAgIHNlbGYubW92ZVNpYmxpbmdOZXh0VG8obWVtYmVyMiwgZ3JvdXAsIENPTlNUQU5UUy5DQU5WQVMuUklHSFQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gZm9yIGRyYWdnaW5nIHBhcnRzIHdpdGhpbiBhIHN5c3RlbSAtIHNpZGUgaXMgTEVGVCBvciBSSUdIVCAoaS5lLiBhYm92ZSBvciBiZWxvdywgcmVzcC4gaW4gaW52ZW50b3J5IGxheW91dClcclxuICAgIHRoaXMuYWRkU2VsZWN0ZWRUaGluZ0FzT3JkZXJlZFNpc3Rlck9mID0gZnVuY3Rpb24oZ3JvdXAsIHNpZGUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdhZGRTZWxlY3RlZFRoaW5nQXNPcmRlcmVkU2lzdGVyT2YsIHNpZGU6ICcgKyBzaWRlKTtcclxuICAgICAgICB2YXIgdGhpbmcgPSBzZWxmLmdldFVuaXF1ZVRoaW5nU2VsZWN0ZWQoKTtcclxuICAgICAgICBpZiAoIXRoaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5tb3ZlU2libGluZ05leHRUbyh0aGluZywgZ3JvdXAsIHNpZGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBtb3ZlcyB0aGUgZmlyc3QgdGhpbmcgKHNpYmxpbmcpIHRvIGJlIGFmdGVyIHRoZSBzZWNvbmQgdGhpbmcgKGdyb3VwKVxyXG4gICAgLy8gaW4gdGhlIHBhcnQgb3JkZXJpbmcgLSB0aGV5IGFyZSBhc3N1bWVkIHRvIGJlIHNpYmxpbmdzXHJcbiAgICAvLyBzaWRlIGlzIExFRlQgb3IgUklHSFRcclxuICAgIHRoaXMubW92ZVNpYmxpbmdOZXh0VG8gPSBmdW5jdGlvbihzaWJsaW5nLCBncm91cCwgc2lkZSkge1xyXG4gICAgICAgIHZhciBwYXJlbnQgPSBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnbW92ZVNpYmxpbmdOZXh0VG8sIHNpYmxpbmc6ICcgKyBzaWJsaW5nICsgJywgZ3JvdXA6ICcgKyBncm91cCArICcsIHBhcmVudDogJyArIHBhcmVudCArICcsIHNpYmxpbmcuY29udGFpbmluZ0dyb3VwOiAnICsgc2libGluZy5jb250YWluaW5nR3JvdXApO1xyXG5cclxuICAgICAgICBpZiAoIXBhcmVudCB8fCBzaWJsaW5nLmNvbnRhaW5pbmdHcm91cCAhPSBwYXJlbnQpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmVycm9yKCdDYW5ub3QgZG8gbW92ZVNpYmxpbmdOZXh0VG8gb24gbm9uLXNpYmxpbmdzIG9yIHRvcC1sZXZlbCBncm91cHMnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSBuZXcgbWVtYmVyIG9yZGVyXHJcbiAgICAgICAgdmFyIG1lbWJlck9yZGVyID0gbmV3IGdvLkxpc3QoKTtcclxuICAgICAgICB2YXIgaXQgPSBwYXJlbnQubWVtYmVyUGFydHM7XHJcbiAgICAgICAgdmFyIG9yZGVyID0gMDtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBtZW1iZXIgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKG1lbWJlciBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3ZSdyZSBhdCB0aGUgdGFyZ2V0IGdyb3VwLCBzbyBhZGQgdGhlIG1vdmVkIHRoaW5nIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgaXRcclxuICAgICAgICAgICAgICAgIGlmIChtZW1iZXIgPT0gZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA9PSBDT05TVEFOVFMuQ0FOVkFTLkxFRlQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKHNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHNpYmxpbmcuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChtZW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG1lbWJlci5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJPcmRlci5hZGQobWVtYmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShtZW1iZXIuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChzaWJsaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzaWJsaW5nLmRhdGEsICdvcmRlcicsIG9yZGVyKyspO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGRvbid0IHJlLWFkZCB0aGUgbW92ZWQgdGhpbmcsIGl0IHdhcyBhZGRlZCBhYm92ZVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobWVtYmVyICE9IHNpYmxpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJPcmRlci5hZGQobWVtYmVyKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG1lbWJlci5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2xlYXIgZXhpc3RpbmcgbWVtYmVyc1xyXG4gICAgICAgIHZhciBuZXdJdCA9IG1lbWJlck9yZGVyLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChuZXdJdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIG1lbWJlcjIgPSBuZXdJdC52YWx1ZTtcclxuICAgICAgICAgICAgbWVtYmVyMi5jb250YWluaW5nR3JvdXAgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWRkIG5ldyBtZW1iZXJzXHJcbiAgICAgICAgbmV3SXQucmVzZXQoKTtcclxuICAgICAgICB3aGlsZSAobmV3SXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBtZW1iZXIzID0gbmV3SXQudmFsdWU7XHJcbiAgICAgICAgICAgIG1lbWJlcjMuY29udGFpbmluZ0dyb3VwID0gcGFyZW50O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hZGRUaGluZ0FzUlRoaW5nID0gZnVuY3Rpb24odGhpbmcsIGxpbmspIHtcclxuICAgICAgICB0aGluZy5sYWJlbGVkTGluayA9IGxpbms7XHJcbiAgICAgICAgdGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gRCBjb3JuZXIgaGFuZGxlciAoc2luZ2xlIGNsaWNrKVxyXG4gICAgdGhpcy50b2dnbGVERmxhZyA9IGZ1bmN0aW9uKHRoaW5nKSB7XHJcbiAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAnZGZsYWcnLCAhdGhpbmcuZGF0YS5kZmxhZyk7XHJcbiAgICAgICAgdGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gUyBjb3JuZXIgaGFuZGxlciAoc2luZ2xlIGNsaWNrKVxyXG4gICAgdGhpcy50b2dnbGVTRXhwYW5zaW9uID0gZnVuY3Rpb24odGhpbmcpIHtcclxuICAgICAgICB2YXIgaXNFeHBhbmRlZCA9ICEodGhpbmcuZGF0YSAmJiAhdGhpbmcuZGF0YS5zRXhwYW5kZWQpOyAvLyBleHBhbmQgYnkgZGVmYXVsdCBpZiBwcm9wZXJ0eSBub3QgcHJlc2VudFxyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcuZGF0YSwgJ3NFeHBhbmRlZCcsICFpc0V4cGFuZGVkKTtcclxuICAgICAgICB0aGluZy51cGRhdGVUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIHNlbGYudWkuc2hvd0Nvcm5lclRpcCh0aGluZywgQ09OU1RBTlRTLkRTUlAuUyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFAgY29ybmVyIGhhbmRsZXIgKHNpbmdsZSBjbGljaylcclxuICAgIHRoaXMudG9nZ2xlUEV4cGFuc2lvbiA9IGZ1bmN0aW9uKHRoaW5nKSB7XHJcbiAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAncEV4cGFuZGVkJywgIXNlbGYucElzRXhwYW5kZWQodGhpbmcpKTtcclxuICAgICAgICB0aGluZy51cGRhdGVUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIHNlbGYudWkuc2hvd0Nvcm5lclRpcCh0aGluZywgQ09OU1RBTlRTLkRTUlAuUCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucElzRXhwYW5kZWQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBncm91cC5kYXRhICYmIGdyb3VwLmRhdGEucEV4cGFuZGVkID09PSB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHVuZG8vcmVkbyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuY2FuVW5kbyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmRpYWdyYW0uY29tbWFuZEhhbmRsZXIuY2FuVW5kbygpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnVuZG8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBzZWxmLmRpYWdyYW0uY29tbWFuZEhhbmRsZXIudW5kbygpO1xyXG4gICAgICAgIHNlbGYuZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNhblJlZG8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5kaWFncmFtLmNvbW1hbmRIYW5kbGVyLmNhblJlZG8oKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5yZWRvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2VsZi5kaWFncmFtLmNvbW1hbmRIYW5kbGVyLnJlZG8oKTtcclxuICAgICAgICBzZWxmLmRpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5yZWZyZXNoID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2VsZi5kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgc2VsZi5kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gdXRpbGl0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gY2hlY2sgZm9yIGEgcmVjdCB3aXRoIE5hTiBYL1kvVy9IIGNvb3Jkcywgc28gd2UgY2FuIGRvIHN0dWZmIHdpdGggaXQgc3VjaCBhcyB1bmlvblJlY3RcclxuICAgIC8vIChOYU4sTmFOLDAsMCkgPT4gKDAsMCwwLDApXHJcbiAgICB0aGlzLnNhZmVSZWN0ID0gZnVuY3Rpb24ocmVjdCkge1xyXG4gICAgICAgIGlmIChpc05hTihyZWN0LngpKSB7XHJcbiAgICAgICAgICAgIHJlY3QueCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05hTihyZWN0LnkpKSB7XHJcbiAgICAgICAgICAgIHJlY3QueSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05hTihyZWN0LndpZHRoKSkge1xyXG4gICAgICAgICAgICByZWN0LndpZHRoID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzTmFOKHJlY3QuaGVpZ2h0KSkge1xyXG4gICAgICAgICAgICByZWN0LmhlaWdodCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tIGRlYnVnIG1hcCBtb2RlbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5sb2FkTW9kZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKCcjbWFwLW1vZGVsLWRlYnVnJykudmFsKHNlbGYuZGlhZ3JhbS5tb2RlbC50b0pzb24oKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2F2ZU1vZGVsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2VsZi5kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24oJCgnI21hcC1tb2RlbC1kZWJ1ZycpLnZhbCgpKTtcclxuICAgICAgICBzZWxmLmRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICBzZWxmLmRpYWdyYW0ubW9kZWwuYWRkQ2hhbmdlZExpc3RlbmVyKHNlbGYuYXV0b3NhdmUubW9kZWxDaGFuZ2VkKTtcclxuICAgICAgICBzZWxmLmF1dG9zYXZlLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IHRydWU7XHJcbiAgICB9O1xyXG59O1xyXG4iLCJjb25zdCBTYW5kYmFua0VkaXRvciA9IHJlcXVpcmUoJy4vc2JFZGl0b3InKTtcclxuLy8gZnVuY3Rpb25zIGZvciBlZGl0aW5nIHBlcnNwZWN0aXZlcyBBTkQgZGlzdGluY3Rpb25zLCB3aGljaCB3b3JrIHNpbWlsYXJseSBpbiB0aGUgVUlcclxuXHJcblNhbmRiYW5rRWRpdG9yLlBlcnNwZWN0aXZlcyA9IGZ1bmN0aW9uKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIC8vIHRlbXBvcmFyeSBzdGF0ZSBmbGFnIGZvciBhZGRpbmcvcmVtb3ZpbmcgUC9EIHNlbGVjdGlvbnMgcHJvZ3JhbW1hdGljYWxseVxyXG4gICAgdmFyIHNlbGVjdGluZ0xpbmtlZFRoaW5ncyA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge307XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ1BlcnNwZWN0aXZlcywgY3VycmVudFRhYkNoYW5nZWQnKTtcclxuICAgICAgICBpZiAobmV3VmFsdWUgPT0gbWFwLnVpLlRBQl9JRF9QRVJTUEVDVElWRVMpIHsgLy8gb3BlbmluZyBwZXJzcGVjdGl2ZXNcclxuICAgICAgICAgICAgc2V0UG9yRFRoaW5nKCdQJyk7XHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZCh0cnVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9sZFZhbHVlID09IG1hcC51aS5UQUJfSURfUEVSU1BFQ1RJVkVTKSB7IC8vIGNsb3NpbmcgcGVyc3BlY3RpdmVzXHJcbiAgICAgICAgICAgIHNhdmVMaW5rcygnUCcpO1xyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQoZmFsc2UpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobmV3VmFsdWUgPT0gbWFwLnVpLlRBQl9JRF9ESVNUSU5DVElPTlMpIHsgLy8gb3BlbmluZyBkaXN0aW5jdGlvbnNcclxuICAgICAgICAgICAgc2V0UG9yRFRoaW5nKCdEJyk7XHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZCh0cnVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9sZFZhbHVlID09IG1hcC51aS5UQUJfSURfRElTVElOQ1RJT05TKSB7IC8vIGNsb3NpbmcgZGlzdGluY3Rpb25zXHJcbiAgICAgICAgICAgIHNhdmVMaW5rcygnRCcpO1xyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5oYW5kbGVEaWFncmFtRXZlbnQgPSBmdW5jdGlvbihldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xyXG4gICAgICAgICAgICBpZiAobWFwLnVpLmN1cnJlbnRUYWJJcyhtYXAudWkuVEFCX0lEX1BFUlNQRUNUSVZFUykgfHwgbWFwLnVpLmN1cnJlbnRUYWJJcyhtYXAudWkuVEFCX0lEX0RJU1RJTkNUSU9OUykpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUxpbmtzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0gUC9EIEVkaXRvciBzdGF0ZVxyXG5cclxuICAgIHRoaXMuaXNJblBPckRFZGl0b3JNb2RlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC51aS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5ICE9PSBudWxsIHx8IG1hcC51aS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5ICE9PSBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzSW5QRWRpdG9yTW9kZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtYXAudWkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSAhPT0gbnVsbDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc0luREVkaXRvck1vZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gbWFwLnVpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgIT09IG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNQRWRpdG9yUG9pbnQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBtYXAudWkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSA9PSBncm91cC5kYXRhLmtleTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc0RFZGl0b3JUaGluZyA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC51aS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5ID09IGdyb3VwLmRhdGEua2V5O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBOQjogdGhpcyBpcyBjYWxsZWQgdmlhIG1hcC5nZXRDb3JuZXJGdW5jdGlvbiwgc28gd2UgZ2V0IHRoZSBleHRyYSBjb3JuZXIgYXJnLCB3aGljaCB3ZSBjYW4gaWdub3JlXHJcbiAgICB0aGlzLnNldFBFZGl0b3JQb2ludCA9IGZ1bmN0aW9uKHRoaW5nLCBjb3JuZXIpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgbWFwLnVpLm9wZW5UYWIobWFwLnVpLlRBQl9JRF9QRVJTUEVDVElWRVMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zZXRERWRpdG9yVGhpbmcgPSBmdW5jdGlvbih0aGluZykge1xyXG4gICAgICAgIGlmICgkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICAvLyBOQjogbmVlZCB0byBzZWxlY3Qgb25seSB0aGlzIHRoaW5nLCBzaW5jZSB0aGlzIGlzIGludm9rZWRcclxuICAgICAgICAgICAgLy8gYnkgYSBjb250cm9sLWNsaWNrLCB3aGljaCB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHNlbGVjdCBqdXN0IGl0XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaW5nLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBtYXAudWkub3BlblRhYihtYXAudWkuVEFCX0lEX0RJU1RJTkNUSU9OUyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuaXNQZXJzcGVjdGl2ZVBvaW50ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NPdXRPZigpO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1NlbGVjdGVkUGVyc3BlY3RpdmVWaWV3ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NJbnRvKCk7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJyAmJiBtYXAucElzRXhwYW5kZWQobGluay5mcm9tTm9kZSkgJiYgbGluay5mcm9tTm9kZS5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNUb2dnbGVkUGVyc3BlY3RpdmVWaWV3ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NJbnRvKCk7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJyAmJiBtYXAucElzRXhwYW5kZWQobGluay5mcm9tTm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc01vdXNlT3ZlclBlcnNwZWN0aXZlVmlldyA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGxpbmtzID0gZ3JvdXAuZmluZExpbmtzSW50bygpO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcgJiYgbGluay5mcm9tTm9kZSA9PSBtYXAudWkubW91c2VPdmVyR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRQZXJzcGVjdGl2ZVZpZXdXZWlnaHQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHZhciBtb2RlID0gbWFwLnVpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5wZXJzcGVjdGl2ZU1vZGU7XHJcbiAgICAgICAgaWYgKG1vZGUgPT0gJ3Nwb3RsaWdodCcgfHwgbW9kZSA9PSAnYm90aCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChzZWxmLmlzU2VsZWN0ZWRQZXJzcGVjdGl2ZVZpZXcoZ3JvdXApID8gMSA6IDApICtcclxuICAgICAgICAgICAgICAgIChzZWxmLmlzVG9nZ2xlZFBlcnNwZWN0aXZlVmlldyhncm91cCkgPyAxIDogMCkgK1xyXG4gICAgICAgICAgICAgICAgKHNlbGYuaXNNb3VzZU92ZXJQZXJzcGVjdGl2ZVZpZXcoZ3JvdXApID8gMSA6IDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBjYXRlZ29yeSBpcyBcIlBcIiBvciBcIkRcIiAocGVyc3BlY3RpdmVzIG9yIGRpc3RpbmN0aW9ucylcclxuICAgIGZ1bmN0aW9uIHNldFBvckRUaGluZyhjYXRlZ29yeSkge1xyXG4gICAgICAgIC8vIGlmIGFscmVhZHkgc2V0LCBtdXN0IGRvIHNhdmUgcGVyc3BlY3RpdmVzIG9yIHNhdmUgZGlzdGluY3Rpb25zXHJcbiAgICAgICAgaWYgKG1hcC51aS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5IHx8IG1hcC51aS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5KVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciB0aGluZyA9IG1hcC5kaWFncmFtLnNlbGVjdGlvbi5maXJzdCgpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NldFBvckRUaGluZzogJyArIHRoaW5nKTtcclxuICAgICAgICBpZiAodGhpbmcgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpbmcuZGF0YS5rZXk7XHJcbiAgICAgICAgICAgIGlmIChjYXRlZ29yeSA9PSBcIlBcIikge1xyXG4gICAgICAgICAgICAgICAgbWFwLnVpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgPSBrZXk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2F0ZWdvcnkgPT0gXCJEXCIpIHtcclxuICAgICAgICAgICAgICAgIG1hcC51aS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5ID0ga2V5O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzZWxlY3Qgdmlld3Mvb3RoZXJzXHJcbiAgICAgICAgICAgIHNlbGVjdExpbmtlZFRoaW5nc0Zvcih0aGluZywgY2F0ZWdvcnkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyB0aGlzIGlzIGNhbGxlZCB3aGVuIHRoZSBzZWxlY3Rpb24gY2hhbmdlcyAtIGlmIHRoZSB0aGluZyBpcyBzZXQsXHJcbiAgICAvLyBhZGRzL3JlbW92ZXMgRC9QIGxpbmtzIGFjY29yZGluZyB0byB3aGF0IGlzIHNlbGVjdGVkOyBvdGhlcndpc2VcclxuICAgIC8vIGp1c3Qgc2hvd3MvaGlkZXMgRC9QIGxpbmtzIGZvciB0aGUgc2VsZWN0ZWQgdGhpbmcocylcclxuICAgIGZ1bmN0aW9uIHVwZGF0ZUxpbmtzKCkge1xyXG4gICAgICAgIGlmIChzZWxlY3RpbmdMaW5rZWRUaGluZ3MpIC8vIHNlbGVjdGlvbiBpcyBiZWluZyBjaGFuZ2VkIHByb2dyYW1tYXRpY2FsbHksIHNvIGRvbid0IHJlc3BvbmRcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgcE9yRFRoaW5nID0gbnVsbDtcclxuICAgICAgICB2YXIgY2F0ZWdvcnkgPSBudWxsO1xyXG4gICAgICAgIGlmIChtYXAudWkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSkge1xyXG4gICAgICAgICAgICBwT3JEVGhpbmcgPSBtYXAuZGlhZ3JhbS5maW5kTm9kZUZvcktleShtYXAudWkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSk7XHJcbiAgICAgICAgICAgIGNhdGVnb3J5ID0gXCJQXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAudWkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSkge1xyXG4gICAgICAgICAgICBwT3JEVGhpbmcgPSBtYXAuZGlhZ3JhbS5maW5kTm9kZUZvcktleShtYXAudWkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSk7XHJcbiAgICAgICAgICAgIGNhdGVnb3J5ID0gXCJEXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgYWRkTGlua3NUbyA9IG5ldyBnby5MaXN0KCk7XHJcbiAgICAgICAgdmFyIHJlbW92ZUxpbmtzID0gbmV3IGdvLkxpc3QoKTtcclxuXHJcbiAgICAgICAgLy8gaXRlcmF0ZSB0aHJvdWdoIGFsbCB0aGluZ3NcclxuICAgICAgICBpZiAoY2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgdmFyIGxheWVycyA9IG1hcC5kaWFncmFtLmxheWVycztcclxuICAgICAgICAgICAgd2hpbGUgKGxheWVycy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVycy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGxheWVyLnBhcnRzO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHBhcnRzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgbGlua3MgdG8gYWRkL3JlbW92ZSBiYXNlZCBvbiBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBPckRUaGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmtzID0gcGFydC5maW5kTGlua3NJbnRvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdMaW5rID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rLmZyb21Ob2RlLmRhdGEua2V5ID09IHBPckRUaGluZy5kYXRhLmtleSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gY2F0ZWdvcnkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nTGluayA9IGxpbms7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVjaWRlIHdoZXRoZXIgdG8gYWRkIG9yIHJlbW92ZSBhIGxpbmsgdG8gdGhlIHBhcnQsIGRlcGVuZGluZyBvbiB3aGV0aGVyIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQgaXMgc2VsZWN0ZWQgYW5kIHdoZXRoZXIgYSBsaW5rIGV4aXN0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZ0xpbmsgJiYgcGFydC5pc1NlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZExpbmtzVG8uYWRkKHBhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXhpc3RpbmdMaW5rICYmICFwYXJ0LmlzU2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTGlua3MuYWRkKGV4aXN0aW5nTGluayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRvIHRoZSBhZGRpbmcvcmVtb3Zpbmcgb2YgbGlua3NcclxuICAgICAgICB2YXIgYWRkcyA9IGFkZExpbmtzVG8uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGFkZHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgICAgIHZhciB0byA9IGFkZHMudmFsdWU7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3VwZGF0ZUxpbmtzOiBhZGRpbmcgbGluayBmcm9tICcgKyBwT3JEVGhpbmcgKyAnIHRvICcgKyB0byk7XHJcbiAgICAgICAgICAgIGlmIChjYXRlZ29yeSA9PSBcIkRcIiAmJiBwT3JEVGhpbmcuZGF0YS5rZXkgPT0gdG8uZGF0YS5rZXkpIHtcclxuICAgICAgICAgICAgICAgIHBPckRUaGluZy5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIllvdSBjYW4ndCBkaXN0aW5ndWlzaCBhIHRoaW5nIGZyb20gaXRzZWxmIVwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLm1vZGVsLmFkZExpbmtEYXRhKHtcclxuICAgICAgICAgICAgICAgIGZyb206IHBPckRUaGluZy5kYXRhLmtleSxcclxuICAgICAgICAgICAgICAgIHRvOiB0by5kYXRhLmtleSxcclxuICAgICAgICAgICAgICAgIGZyb21Qb3J0OiBjYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgIHRvUG9ydDogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmVtb3ZlcyA9IHJlbW92ZUxpbmtzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChyZW1vdmVzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcmVtb3ZlID0gcmVtb3Zlcy52YWx1ZTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndXBkYXRlTGlua3M6IHJlbW92aW5nIGxpbmsgZnJvbSAnICsgcmVtb3ZlLmZyb21Ob2RlICsgJyB0byAnICsgcmVtb3ZlLnRvTm9kZSk7XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ3JlbW92ZSBsaW5rJyk7XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLnJlbW92ZShyZW1vdmUpO1xyXG4gICAgICAgICAgICBtYXAuZGlhZ3JhbS5tb2RlbC5yZW1vdmVMaW5rRGF0YShyZW1vdmUuZGF0YSk7XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdyZW1vdmUgbGluaycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc2hvdyBsaW5rc1xyXG4gICAgICAgIG1hcC5kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZUxpbmtzKGNhdGVnb3J5KSB7XHJcbiAgICAgICAgdmFyIHBPckRUaGluZyA9IG51bGw7XHJcbiAgICAgICAgaWYgKGNhdGVnb3J5ID09IFwiUFwiKSB7XHJcbiAgICAgICAgICAgIHBPckRUaGluZyA9IG1hcC5kaWFncmFtLmZpbmROb2RlRm9yS2V5KG1hcC51aS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5KTtcclxuICAgICAgICAgICAgbWFwLnVpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2F0ZWdvcnkgPT0gXCJEXCIpIHtcclxuICAgICAgICAgICAgcE9yRFRoaW5nID0gbWFwLmRpYWdyYW0uZmluZE5vZGVGb3JLZXkobWFwLnVpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkpO1xyXG4gICAgICAgICAgICBtYXAudWkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtYXAuZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgIG1hcC5kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VsZWN0TGlua2VkVGhpbmdzRm9yKGdyb3VwLCBjYXRlZ29yeSkge1xyXG4gICAgICAgIHNlbGVjdGluZ0xpbmtlZFRoaW5ncyA9IHRydWU7XHJcbiAgICAgICAgbWFwLmRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuXHJcbiAgICAgICAgdmFyIGxpbmtzID0gZ3JvdXAuZmluZExpbmtzT3V0T2YoKTtcclxuICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gY2F0ZWdvcnkpXHJcbiAgICAgICAgICAgICAgICBsaW5rLnRvTm9kZS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGVjdGluZ0xpbmtlZFRoaW5ncyA9IGZhbHNlO1xyXG4gICAgfVxyXG59OyIsImNvbnN0IFNhbmRiYW5rRWRpdG9yID0gcmVxdWlyZSgnLi9zYkVkaXRvcicpO1xyXG4vLyBmdW5jdGlvbnMgZm9yIHRoZSBwcmVzZW50ZXIvc2xpZGVzXHJcblxyXG5TYW5kYmFua0VkaXRvci5QcmVzZW50ZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgLy8gY29uc3RhbnRzXHJcbiAgICB0aGlzLlNMSURFX0JMT0NLRVJfV0lEVEggPSAxMDAwO1xyXG4gICAgdGhpcy5TTElERV9CTE9DS0VSX0NPTE9SID0gXCIjZmZmXCI7XHJcbiAgICB0aGlzLlNMSURFX0JMT0NLRVJfT1BBQ0lUWSA9IDAuOTtcclxuXHJcbiAgICAvLyBzdGF0ZSB2YXJzXHJcbiAgICB0aGlzLmN1cnJlbnRTbGlkZUluZGV4ID0gbnVsbDtcclxuICAgIHRoaXMuaXNQcmVzZW50aW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLnNob3dUT0MgPSBmYWxzZTtcclxuICAgIHRoaXMuaXNDcmVhdGluZ1RodW1ibmFpbCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIG1hc2sgYXBwbGllZCBhcm91bmQgc2xpZGUgcmVnaW9uIHdoZW4gcHJlc2VudGluZ1xyXG4gICAgdGhpcy5zbGlkZUJsb2NrZXIgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuZGlhZ3JhbUFzcGVjdFJhdGlvID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYXV0b3NhdmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBtYXAuYXV0b3NhdmUuc2F2ZSgnZWRpdF9wcmVzZW50ZXInKTsgXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0gZWRpdGluZyBmdW5jdGlvbnMgZm9yIGRpZmZlcmVudCBzbGlkZSB0eXBlcyAtLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gTkI6IGhhc0xpbmtzIGNhbiBoYXZlIHZhbHVlcyBmYWxzZSwgMSwgb3IgdHJ1ZSAoMSBtZWFucyBvbmx5IGEgc2luZ2xlIGxpbmspXHJcbiAgICB0aGlzLnNsaWRlVHlwZXMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnVElUTEVfQk9EWScsIGxhYmVsOiAnVGl0bGUgYW5kIEJvZHknLFxyXG4gICAgICAgICAgICBoYXNUaXRsZTogdHJ1ZSwgIGhhc05vdGVzOiB0cnVlLCAgaGFzQ2hlY2tzOiBmYWxzZSwgaGFzTWFwUmVnaW9uOiBmYWxzZSwgaGFzTWFwU3VtbWFyeTogZmFsc2UsIGhhc0xpbmtzOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgICAgbmFtZTogJ1RJVExFX0JPRFlfTUFQJywgbGFiZWw6ICdUaXRsZSwgQm9keSBhbmQgTWV0YU1hcCcsXHJcbiAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCAgaGFzTm90ZXM6IHRydWUsICBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IHRydWUsICBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgICBuYW1lOiAnQUNUSVZJVFlfTUFQJywgbGFiZWw6ICdMZXNzb24gQWN0aXZpdHkgYW5kIE1ldGFNYXAnLFxyXG4gICAgICAgICAgICBoYXNUaXRsZTogdHJ1ZSwgIGhhc05vdGVzOiB0cnVlLCAgaGFzQ2hlY2tzOiB0cnVlLCAgaGFzTWFwUmVnaW9uOiB0cnVlLCAgaGFzTWFwU3VtbWFyeTogZmFsc2UsIGhhc0xpbmtzOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgICBuYW1lOiAnTUFQX09OTFknLCBsYWJlbDogJ01ldGFNYXAgb25seScsXHJcbiAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCAgaGFzTm90ZXM6IGZhbHNlLCBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IHRydWUsICBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgICBuYW1lOiAnTUFQX1NVTU1BUlknLCBsYWJlbDogJ01ldGFNYXAgU3VtbWFyeScsXHJcbiAgICAgICAgICAgIGhhc1RpdGxlOiBmYWxzZSwgaGFzTm90ZXM6IGZhbHNlLCBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IHRydWUsIGhhc01hcFN1bW1hcnk6IHRydWUsIGhhc0xpbmtzOiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgIF07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tIGxpbmsvYXR0YWNobWVudCB0eXBlcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMubGlua1R5cGVzID0gW1xyXG4gICAgICAgIHsgbmFtZTogJycsIGxhYmVsOiAnLS0gU2VsZWN0IGF0dGFjaG1lbnQgdHlwZSAtLScgfSxcclxuICAgICAgICB7IG5hbWU6ICdXRUInLCBsYWJlbDogJ1dlYiBQYWdlJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ1BERicsIGxhYmVsOiAnUERGJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0RPQycsIGxhYmVsOiAnRG9jdW1lbnQnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnU1BSRUFEU0hFRVQnLCBsYWJlbDogJ1NwcmVhZHNoZWV0JyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ1BSRVNFTlRBVElPTicsIGxhYmVsOiAnUHJlc2VudGF0aW9uJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ01FVEFNQVAnLCBsYWJlbDogJ01ldGFNYXAnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnSU1BR0UnLCBsYWJlbDogJ0ltYWdlJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0FVRElPJywgbGFiZWw6ICdBdWRpbycgfSxcclxuICAgICAgICB7IG5hbWU6ICdWSURFTycsIGxhYmVsOiAnVmlkZW8nIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnU1VSVkVZJywgbGFiZWw6ICdTdXJ2ZXknIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnV09SS1NIRUVUJywgbGFiZWw6ICdXb3Jrc2hlZXQnIH1cclxuICAgIF07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIGxpc3Qgb2YgYWxsIHRoaW5ncyBpbiB0aGUgbWFwLCBmb3IgbWFwIHN1bW1hcnkgc2xpZGVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuaWRlYUxpc3QgPSAnJztcclxuXHJcbiAgICAvLyBvbmx5IGNhbGwgdGhpcyBvY2Nhc2lvbmFsbHksIGFzIHRoZXkgd29uJ3QgYmUgZWRpdGluZyB0aGUgbWFwIHdoaWxlIHByZXNlbnRlciBpcyBvcGVuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVJZGVhTGlzdCgpIHtcclxuICAgICAgICB2YXIgbm9kZXMgPSBtYXAuZGlhZ3JhbS5ub2RlcztcclxuICAgICAgICB2YXIgbGlzdCA9IFtdO1xyXG4gICAgICAgIHdoaWxlIChub2Rlcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKChub2Rlcy52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdC5wdXNoKG5vZGVzLnZhbHVlLmRhdGEudGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGlzdC5zb3J0KCk7XHJcblxyXG4gICAgICAgIC8vIGZpbHRlciBvdXQgcGxhY2Vob2xkZXIgbmFtZXMgLSBzZWUgbWFwLmpzOmdldE5ld1RoaW5nRGF0YSwgY3JlYXRlU2lzdGVyLCBldGMuXHJcbiAgICAgICAgbGlzdCA9IF8uZGlmZmVyZW5jZShfLnVuaXEobGlzdCwgdHJ1ZSksIFxyXG4gICAgICAgICAgICBtYXAuZ2VuZXJhdG9yLmdldFBsYWNlaG9sZGVySWRlYU5hbWVzKCksIFxyXG4gICAgICAgICAgICBbJ05ldyBJZGVhJywgJ05ldyBEaXN0aW5ndWlzaGVkIElkZWEnLCAnTmV3IFJlbGF0ZWQgSWRlYScsICdOZXcgUmVsYXRpb25zaGlwIElkZWEnLCAnTmV3IFBhcnQgSWRlYScsXHJcbiAgICAgICAgICAgICAnSWRlYScsICdQYXJ0JywgJ1JlbGF0aW9uc2hpcCBJZGVhJ10gLy8gbmV3ZXIgc2ltcGxpZmllZCBuYW1lc1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHNlbGYuaWRlYUxpc3QgPSBsaXN0LmpvaW4oJywgJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zdW1tYXJ5QW5hbHl0aWNzID0gW1xyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1RISU5HUycsIHNpbmd1bGFyTGFiZWw6ICdEaXN0aW5jdGlvbicsIHBsdXJhbExhYmVsOiAnRGlzdGluY3Rpb25zJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1NZU1RFTVMnLCBzaW5ndWxhckxhYmVsOiAnU3lzdGVtJywgcGx1cmFsTGFiZWw6ICdTeXN0ZW1zJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1JFTEFUSU9OU0hJUFMnLCBzaW5ndWxhckxhYmVsOiAnUmVsYXRpb25zaGlwJywgcGx1cmFsTGFiZWw6ICdSZWxhdGlvbnNoaXBzJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1BFUlNQRUNUSVZFUycsIHNpbmd1bGFyTGFiZWw6ICdQZXJzcGVjdGl2ZScsIHBsdXJhbExhYmVsOiAnUGVyc3BlY3RpdmVzJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1JUSElOR1MnLCBzaW5ndWxhckxhYmVsOiAnUmVsYXRpb25zaGlwIElkZWEnLCBwbHVyYWxMYWJlbDogJ1JlbGF0aW9uc2hpcCBJZGVhcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9TWVNURU1fUlRISU5HUycsIHNpbmd1bGFyTGFiZWw6ICdSZWxhdGlvbnNoaXAgU3lzdGVtJywgcGx1cmFsTGFiZWw6ICdSZWxhdGlvbnNoaXAgU3lzdGVtcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9TWVNURU1fUEVSU1BFQ1RJVkVTJywgc2luZ3VsYXJMYWJlbDogJ1BlcnNwZWN0aXZlIFN5c3RlbScsIHBsdXJhbExhYmVsOiAnUGVyc3BlY3RpdmUgU3lzdGVtcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9ESVNUSU5DVElPTlMnLCBzaW5ndWxhckxhYmVsOiAnQWR2YW5jZWQgRGlzdGluY3Rpb24nLCBwbHVyYWxMYWJlbDogJ0FkdmFuY2VkIERpc3RpbmN0aW9ucycgfSxcclxuICAgIF07XHJcblxyXG4gICAgdGhpcy5hZGRDaGVjayA9IGZ1bmN0aW9uKG5vZGVEYXRhKSB7XHJcbiAgICAgICAgIG5vZGVEYXRhLmNoZWNrcy5wdXNoKHsgdGV4dDogJycgfSk7XHJcbiAgICAgICAgIHNlbGYuYXV0b3NhdmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kZWxldGVDaGVjayA9IGZ1bmN0aW9uIChjaGVjaywgbm9kZURhdGEpIHtcclxuICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZihub2RlRGF0YS5jaGVja3MsIGNoZWNrKTtcclxuICAgICAgICBub2RlRGF0YS5jaGVja3Muc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIHNlbGYuYXV0b3NhdmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hZGRMaW5rID0gZnVuY3Rpb24obm9kZURhdGEpIHtcclxuICAgICAgICBub2RlRGF0YS5saW5rcy5wdXNoKHsgdGl0bGU6ICcnLCB1cmw6ICcnLCB0eXBlOiAnJyB9KTtcclxuICAgICAgICBzZWxmLmF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGVsZXRlTGluayA9IGZ1bmN0aW9uIChsaW5rLCBub2RlRGF0YSkge1xyXG4gICAgICAgIHZhciBpID0gXy5pbmRleE9mKG5vZGVEYXRhLmxpbmtzLCBsaW5rKTtcclxuICAgICAgICBub2RlRGF0YS5saW5rcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgc2VsZi5hdXRvc2F2ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZVRPQyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmlzUHJlc2VudGluZykge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zaG93VE9DID0gIXNlbGYuc2hvd1RPQztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBOQjogY2FuJ3QgY3JlYXRlIHRoaXMgaW4gaW5pdCBhcyB0aGUgZGlhZ3JhbSBkb2Vzbid0IGV4aXN0IHlldC4uLlxyXG4gICAgZnVuY3Rpb24gbWF5YmVJbml0U2xpZGVCbG9ja2VyKCkge1xyXG4gICAgICAgIGlmICghc2VsZi5zbGlkZUJsb2NrZXIpIHtcclxuICAgICAgICAgICAgdmFyIG1rID0gZ28uR3JhcGhPYmplY3QubWFrZTtcclxuICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIgPSBtayhnby5Ob2RlLCBnby5QYW5lbC5BdXRvLFxyXG4gICAgICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgICAgICBsYXllck5hbWU6ICdUb29sJyxcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBzZWxmLlNMSURFX0JMT0NLRVJfT1BBQ0lUWVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBzZWxmLlNMSURFX0JMT0NLRVJfQ09MT1IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOjEwMDBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLmFkZChzZWxmLnNsaWRlQmxvY2tlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICBpZiAob2xkVmFsdWUgPT0gbWFwLnVpLlRBQl9JRF9QUkVTRU5URVIpIHsgLy8gY2xvc2luZyB0YWJcclxuICAgICAgICAgICAgc2VsZi5zdG9wUHJlc2VudGluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChuZXdWYWx1ZSA9PSBtYXAudWkuVEFCX0lEX1BSRVNFTlRFUikgeyAvLyBvcGVuaW5nIHRhYlxyXG4gICAgICAgICAgICAvLyBzaG93IHNsaWRlcyAoc2VlIGxheW91dHMuc2xpZGVUZW1wbGF0ZSwgYmluZGluZyBvZiB2aXNpYmxlIGF0dHIpXHJcbiAgICAgICAgICAgIHNlbGYuZGlhZ3JhbUFzcGVjdFJhdGlvID0gJCgnI2RpYWdyYW0nKS53aWR0aCgpIC8gJCgnI2RpYWdyYW0nKS5oZWlnaHQoKTsgICAgICAgIFxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdkaWFncmFtQXNwZWN0UmF0aW86ICcgKyBzZWxmLmRpYWdyYW1Bc3BlY3RSYXRpbyk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUubWFwLmRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgdXBkYXRlSWRlYUxpc3QoKTtcclxuICAgICAgICAgICAgaWYgKCFzZWxmLmN1cnJlbnRTbGlkZUluZGV4ICYmIHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRTbGlkZUluZGV4ID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLnNsaWRlVGh1bWJuYWlsU2VsZWN0ZWQoMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoIW1hcC51aS5jdXJyZW50VGFiSXMobWFwLnVpLlRBQl9JRF9QUkVTRU5URVIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChldmVudE5hbWUgPT0gJ1NlbGVjdGlvbkRlbGV0aW5nJykge1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gZS5zdWJqZWN0O1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0aW9uLmNvdW50ID09IDEpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZyA9IHNlbGVjdGlvbi5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaW5nIGluc3RhbmNlb2YgZ28uTm9kZSAmJiB0aGluZy5kYXRhLmNhdGVnb3J5ID09ICdzbGlkZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm0oXCJEZWxldGUgdGhpcyBzbGlkZSBmcm9tIHRoZSBwcmVzZW50YXRpb24/XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25EZWxldGVkJykge1xyXG4gICAgICAgICAgICAvLyBpZiBzbGlkZSBpcyBkZWxldGVkIGZyb20gY2FudmFzIHJhdGhlciB0aGFuIGJ5IHRodW1ibmFpbCB4IGJ1dHRvbiwgbmVlZCB0byB1cGRhdGUgaW5kZXhlc1xyXG4gICAgICAgICAgICBjb21wYWN0U2xpZGVJbmRleGVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnU2VsZWN0aW9uTW92ZWQnIHx8IGV2ZW50TmFtZSA9PSAnUGFydFJlc2l6ZWQnKSB7XHJcbiAgICAgICAgICAgIC8vIGNsZWFyIHRodW1ibmFpbCBjYWNoZVxyXG4gICAgICAgICAgICB0aHVtYm5haWxDYWNoZSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1ZpZXdwb3J0Qm91bmRzQ2hhbmdlZCcpIHtcclxuICAgICAgICAgICAgLy8gYWRqdXN0IHpvb21pbmcgb2YgbWFwIHJlZ2lvblxyXG4gICAgICAgICAgICAvL3NlbGYud2luZG93UmVzaXplZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy53aW5kb3dSZXNpemVkID0gXy5kZWJvdW5jZShmdW5jdGlvbigpIHtcclxuICAgICAgICBzZWxmLnNsaWRlVGh1bWJuYWlsU2VsZWN0ZWQoc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICB9LCAxMDAwKTtcclxuXHJcbiAgICB0aGlzLnNob3dTaWRlYmFyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC51aS5jdXJyZW50VGFiSXMobWFwLnVpLlRBQl9JRF9QUkVTRU5URVIpICYmICghc2VsZi5pc1ByZXNlbnRpbmcgfHwgc2VsZi5zaG93VE9DKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kaXNhYmxlTWFwVG9vbGJhckJ1dHRvbnMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gIW1hcC51aS5jdXJyZW50VGFiSXMobWFwLnVpLlRBQl9JRF9QUkVTRU5URVIpIFxyXG4gICAgICAgICAgICB8fCBzZWxmLmlzUHJlc2VudGluZyBcclxuICAgICAgICAgICAgfHwgIXNlbGYuZ2V0Q3VycmVudFNsaWRlVHlwZSgpLmhhc01hcFJlZ2lvbjtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIGFuIGFycmF5IG9mIG5vZGUgZGF0YSBvYmplY3RzIChub3QgdGhlIHNsaWRlIG5vZGVzIHRoZW1zZWx2ZXMpXHJcbiAgICB0aGlzLmdldFNsaWRlTm9kZURhdGFzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmRpYWdyYW07XHJcbiAgICAgICAgdmFyIG5vZGVzID0gZGlhZ3JhbS5tb2RlbC5ub2RlRGF0YUFycmF5O1xyXG4gICAgICAgIHZhciBub2RlRGF0YXMgPSBfLmZpbHRlcihub2RlcywgZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuY2F0ZWdvcnkgPT0gJ3NsaWRlJztcclxuICAgICAgICB9KTtcclxuICAgICAgICBub2RlRGF0YXMgPSBfLnNvcnRCeShub2RlRGF0YXMsIGZ1bmN0aW9uIChub2RlRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZURhdGEuaW5kZXg7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2xpZGVOb2RlRGF0YXMsIGluZGV4ZXM6ICcgKyBfLnBsdWNrKHNsaWRlc0RhdGEsICdpbmRleCcpKTtcclxuICAgICAgICByZXR1cm4gbm9kZURhdGFzO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldFNsaWRlQ291bnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLmxlbmd0aDtcclxuICAgIH07ICBcclxuXHJcbiAgICB0aGlzLmdldEFjdGl2aXR5U2xpZGVDb3VudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfLndoZXJlKHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKSwgeyB0eXBlOiAnQUNUSVZJVFlfTUFQJyB9KS5sZW5ndGg7XHJcbiAgICB9OyAgXHJcblxyXG4gICAgdGhpcy5nZXRTbGlkZVR5cGUgPSBmdW5jdGlvbih0eXBlTmFtZSkge1xyXG4gICAgICAgIHJldHVybiBfLmZpbmRXaGVyZShzZWxmLnNsaWRlVHlwZXMsIHsgbmFtZTogdHlwZU5hbWUgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0Q3VycmVudFNsaWRlVHlwZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmZpbmRXaGVyZShzZWxmLnNsaWRlVHlwZXMsIHsgbmFtZTogc2xpZGUuZGF0YS50eXBlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZmluZFNsaWRlQnlJbmRleChpbmRleCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmRpYWdyYW07XHJcbiAgICAgICAgdmFyIHNsaWRlRGF0YSA9IF8uZmluZChzZWxmLmdldFNsaWRlTm9kZURhdGFzKCksIGZ1bmN0aW9uIChzbGlkZURhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNsaWRlRGF0YS5pbmRleCA9PSBpbmRleDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoc2xpZGVEYXRhICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRpYWdyYW0uZmluZE5vZGVGb3JLZXkoc2xpZGVEYXRhLmtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBpbmNyZW1lbnQgaXMgLTEgb3IgKzFcclxuICAgIHRoaXMubW92ZVNsaWRlID0gZnVuY3Rpb24gKGluZGV4LCBpbmNyZW1lbnQpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTtcclxuICAgICAgICAgICAgdmFyIG5laWdoYm9yID0gZmluZFNsaWRlQnlJbmRleChpbmRleCArIGluY3JlbWVudCk7XHJcbiAgICAgICAgICAgIGlmIChzbGlkZSAmJiBuZWlnaGJvcikge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbW92ZVNsaWRlOiBzd2FwcGluZyAnICsgc2xpZGUuZGF0YS5rZXkgKyAnIHdpdGggJyArIG5laWdoYm9yLmRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcIm1vdmUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzbGlkZS5kYXRhLCAnaW5kZXgnLCBzbGlkZS5kYXRhLmluZGV4ICsgaW5jcmVtZW50KTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5laWdoYm9yLmRhdGEsICdpbmRleCcsIG5laWdoYm9yLmRhdGEuaW5kZXggLSBpbmNyZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcIm1vdmUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgICAgICB0aHVtYm5haWxDYWNoZSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbXBhY3RTbGlkZUluZGV4ZXMoKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY29tcGFjdFNsaWRlSW5kZXhlcycpO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGVzRGF0YSA9IHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKTtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZGlhZ3JhbTtcclxuICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gMTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiY29tcGFjdCBzbGlkZSBpbmRleGVzXCIpO1xyXG4gICAgICAgICAgICBfLmVhY2goc2xpZGVzRGF0YSwgZnVuY3Rpb24gKHNsaWRlRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2xpZGVEYXRhLCAnaW5kZXgnLCBuZXdJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjb21wYWN0U2xpZGVJbmRleGVzOiBzZXQgaW5kZXggZm9yICcgKyBzbGlkZURhdGEua2V5ICsgJyB0byAnICsgbmV3SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgbmV3SW5kZXgrKztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJjb21wYWN0IHNsaWRlIGluZGV4ZXNcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0TmV3U2xpZGVLZXkoKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZGlhZ3JhbTtcclxuICAgICAgICB2YXIgaSA9IDE7XHJcbiAgICAgICAgd2hpbGUgKGRpYWdyYW0ubW9kZWwuZmluZE5vZGVEYXRhRm9yS2V5KCdzbGlkZS0nICsgaSkpIHtcclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJ3NsaWRlLScgKyBpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE5COiBpbmRleGVzIChhbmQga2V5cz8pIG11c3QgYmUgMS1iYXNlZCwgb3RoZXJ3aXNlIGZpcnN0IHNsaWRlIGdldHMgc2NyZXdlZCB1cFxyXG4gICAgLy8gKHNvbWV3aGVyZSB0aGUgaW5kZXggc2hvd3MgdXAgYXMgJycgaW5zdGVhZCBvZiAwKVxyXG4gICAgZnVuY3Rpb24gZ2V0TmV3U2xpZGVJbmRleCgpIHtcclxuICAgICAgICB2YXIgc2xpZGVzID0gc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpO1xyXG4gICAgICAgIHJldHVybiBzbGlkZXMubGVuZ3RoICsgMTsgXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5hZGRTbGlkZSA9IGZ1bmN0aW9uICh0eXBlTmFtZSkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2FkZFNsaWRlOiAnICsgdHlwZU5hbWUpO1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRiID0gbWFwLmNvbXB1dGVNYXBCb3VuZHMoKTtcclxuICAgICAgICAgICAgZGIuaW5mbGF0ZShkYi53aWR0aCAvIDIwLCBkYi5oZWlnaHQgLyAxMCk7XHJcbiAgICAgICAgICAgIHZhciBuZXdMb2MgPSBkYi54ICsgJyAnICsgZGIueTtcclxuICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gZ2V0TmV3U2xpZGVJbmRleCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNsaWRlVHlwZSA9IF8uZmluZFdoZXJlKHNlbGYuc2xpZGVUeXBlcywgeyBuYW1lOiB0eXBlTmFtZSB9KTtcclxuXHJcbiAgICAgICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcImFkZCBzbGlkZVwiKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YSh7XHJcbiAgICAgICAgICAgICAgICBrZXk6IGdldE5ld1NsaWRlS2V5KCksXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJ3NsaWRlJyxcclxuICAgICAgICAgICAgICAgIGluZGV4OiBuZXdJbmRleCxcclxuICAgICAgICAgICAgICAgIGlzR3JvdXA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IGRiLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBkYi5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBsb2M6IG5ld0xvYyxcclxuICAgICAgICAgICAgICAgIGxldmVsOiAwLFxyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IDAsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlTmFtZSxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICAgICAgICAgIG5vdGVzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoZWNrczogW10sXHJcbiAgICAgICAgICAgICAgICBoYXNSZWdpb246IHNsaWRlVHlwZS5oYXNNYXBSZWdpb24sXHJcbiAgICAgICAgICAgICAgICBpc1N1bW1hcnk6IHNsaWRlVHlwZS5oYXNNYXBTdW1tYXJ5LFxyXG4gICAgICAgICAgICAgICAgbGlua3M6IFtdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiYWRkIHNsaWRlXCIpO1xyXG4gICAgICAgICAgICB0aHVtYm5haWxDYWNoZSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgc2VsZi5zbGlkZVRodW1ibmFpbFNlbGVjdGVkKG5ld0luZGV4KTsgLy8gdHJpZ2dlciBkaXNwbGF5IG9mIGVkaXQgZm9ybSwgem9vbSB0byBtYXAgcmVnaW9uIGlmIGFwcGxpY2FibGVcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kdXBsaWNhdGVTbGlkZSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBkaWFncmFtID0gbWFwLmRpYWdyYW07XHJcbiAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IGdldE5ld1NsaWRlSW5kZXgoKTtcclxuICAgICAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7IFxyXG4gICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcImR1cGxpY2F0ZSBzbGlkZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBidW1wIHVwIGluZGV4ZXMgb24gc3Vic2VxdWVudCBzbGlkZXMgdG8gbWFrZSByb29tIGZvciBuZXcgc2xpZGUgYWZ0ZXIgY3VycmVudCBvbmVcclxuICAgICAgICAgICAgICAgIF8uZWFjaChzZWxmLmdldFNsaWRlTm9kZURhdGFzKCksIGZ1bmN0aW9uIChzbGlkZURhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2xpZGVEYXRhLmluZGV4ID4gaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2xpZGVEYXRhLCAnaW5kZXgnLCBzbGlkZURhdGEuaW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBOQjogY3JlYXRpbmcgYSBuZXcgbm9kZURhdGEgb2JqZWN0IGhlcmUgcmF0aGVyIHRoYW4gY29weWluZyBhbmQgbW9kaWZ5aW5nLCB0byBhdm9pZCBjb3B5aW5nICQkaGFzaEtleSAoPz8pXHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLmFkZE5vZGVEYXRhKHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6IGdldE5ld1NsaWRlS2V5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdzbGlkZScsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4ICsgMSxcclxuICAgICAgICAgICAgICAgICAgICBpc0dyb3VwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogc2xpZGUuZGF0YS53aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHNsaWRlLmRhdGEuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxvYzogc2xpZGUuZGF0YS5sb2MsXHJcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogc2xpZGUuZGF0YS50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBzbGlkZS5kYXRhLnRpdGxlICsgJyAoQ29weSknLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vdGVzOiBzbGlkZS5kYXRhLm5vdGVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrczogc2xpZGUuZGF0YS5jaGVja3MsIC8vIGNsb25lP1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc1JlZ2lvbjogc2xpZGUuZGF0YS5oYXNSZWdpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgaXNTdW1tYXJ5OiBzbGlkZS5kYXRhLmlzU3VtbWFyeSxcclxuICAgICAgICAgICAgICAgICAgICBsaW5rczogc2xpZGUuZGF0YS5saW5rcyAvLyBjbG9uZT9cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImR1cGxpY2F0ZSBzbGlkZVwiKTtcclxuICAgICAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5yZW1vdmVTbGlkZSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3JlbW92ZVNsaWRlOiAnICsgaW5kZXgpO1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTsgXHJcbiAgICAgICAgICAgIGlmIChzbGlkZSkge1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwicmVtb3ZlIHNsaWRlXCIpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5yZW1vdmVOb2RlRGF0YShzbGlkZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJyZW1vdmUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50U2xpZGVJbmRleCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XHJcbiAgICAgICAgICAgIGNvbXBhY3RTbGlkZUluZGV4ZXMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHRodW1ibmFpbENhY2hlID0gW107XHJcblxyXG4gICAgdGhpcy5nZXRTbGlkZVRodW1ibmFpbCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aHVtYm5haWxDYWNoZVtpbmRleF07XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlU2xpZGVUaHVtYm5haWxzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgXy5lYWNoKHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKSwgZnVuY3Rpb24obmQpIHsgXHJcbiAgICAgICAgICAgIHNlbGYuY3JlYXRlU2xpZGVUaHVtYm5haWwobmQuaW5kZXgpOyBcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGVTbGlkZVRodW1ibmFpbCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NyZWF0ZVNsaWRlVGh1bWJuYWlsJyk7XHJcblxyXG4gICAgICAgIHZhciB0aHVtYldpZHRoID0gMTAwMDtcclxuICAgICAgICB2YXIgdGh1bWJIZWlnaHQgPSA2MDA7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZGlhZ3JhbTtcclxuXHJcbiAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcbiAgICAgICAgaWYgKCFzbGlkZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCFzbGlkZS5kYXRhLmhhc1JlZ2lvbiAmJiAhc2xpZGUuZGF0YS5pc1N1bW1hcnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGRiID0gZGlhZ3JhbS5kb2N1bWVudEJvdW5kcztcclxuICAgICAgICAgICAgdmFyIHNiO1xyXG4gICAgICAgICAgICBpZiAoc2xpZGUuZGF0YS5pc1N1bW1hcnkpIHsgLy8gZm9yIGEgc3VtbWFyeSBzbGlkZSB3ZSBzaG9vdCB0aGUgd2hvbGUgbWFwXHJcbiAgICAgICAgICAgICAgICBzYiA9IG1hcC5zYWZlUmVjdChtYXAuY29tcHV0ZU1hcEJvdW5kcygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHsgLy8gb3RoZXJ3aXNlIGp1c3Qgc2hvb3QgdGhlIHNsaWRlIHJlZ2lvblxyXG4gICAgICAgICAgICAgICAgc2IgPSBzbGlkZS5wYXJ0LmFjdHVhbEJvdW5kcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGltYWdlUG9zaXRpb24gPSBuZXcgZ28uUG9pbnQoc2IueCwgc2IueSk7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2dldFNsaWRlVGh1bWJuYWlsLCBzbGlkZSBib3VuZHM6ICcgKyBzYiArICcsIGRvY3VtZW50IGJvdW5kczogJyArIGRiICsgJywgaW1hZ2VQb3NpdGlvbjogJyArIGltYWdlUG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgdmFyIHdTY2FsZSA9IHRodW1iV2lkdGggLyBzYi53aWR0aDtcclxuICAgICAgICAgICAgdmFyIGhTY2FsZSA9IHRodW1iSGVpZ2h0IC8gc2IuaGVpZ2h0O1xyXG4gICAgICAgICAgICB2YXIgdGh1bWJTY2FsZSA9IE1hdGgubWluKHdTY2FsZSwgaFNjYWxlKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc2NhbGU6ICcgKyB3U2NhbGUgKyAnLCcgKyBoU2NhbGUpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHcgPSB0aHVtYlNjYWxlICogc2Iud2lkdGg7XHJcbiAgICAgICAgICAgIHZhciBoID0gdGh1bWJTY2FsZSAqIHNiLmhlaWdodDtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndGh1bWJuYWlsIHcvaDogJyArIHcgKyAnLCcgKyBoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGhpZGUgc2xpZGVzIHRlbXBvcmFyaWx5IHdoaWxlIGNyZWF0aW5nIHRodW1ibmFpbFxyXG4gICAgICAgICAgICBzZWxmLmlzQ3JlYXRpbmdUaHVtYm5haWwgPSB0cnVlO1xyXG4gICAgICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcblxyXG4gICAgICAgICAgICBkaWFncmFtLnNjYWxlID0gdGh1bWJTY2FsZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbWdEYXRhID0gZGlhZ3JhbS5tYWtlSW1hZ2VEYXRhKHtcclxuICAgICAgICAgICAgICAgIHNpemU6IG5ldyBnby5TaXplKHcsIGgpLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGltYWdlUG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogdGh1bWJTY2FsZVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcblxyXG4gICAgICAgICAgICB0aHVtYm5haWxDYWNoZVtpbmRleF0gPSBpbWdEYXRhO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGltZ0RhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBnZXRzIGEgdGh1bWJuYWlsIG9mIHRoZSB3aG9sZSBtYXAsIGZvciBzYXZpbmcgKHNlZSBhdXRvc2F2ZS5qcylcclxuICAgIHRoaXMuZ2V0TWFwVGh1bWJuYWlsID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG4gICAgICAgIHZhciBzYiA9IG1hcC5zYWZlUmVjdChtYXAuY29tcHV0ZU1hcEJvdW5kcygpKTtcclxuICAgICAgICBzYi5ncm93KDEwLDEwLDEwLDEwKTtcclxuICAgICAgICB2YXIgdyA9IDE1MDtcclxuICAgICAgICB2YXIgaCA9IDEwMDtcclxuXHJcbiAgICAgICAgLy8gaGlkZSBzbGlkZXMgdGVtcG9yYXJpbHkgd2hpbGUgY3JlYXRpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgc2VsZi5pc0NyZWF0aW5nVGh1bWJuYWlsID0gdHJ1ZTtcclxuICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcblxyXG4gICAgICAgIHZhciBpbWdEYXRhID0gZGlhZ3JhbS5tYWtlSW1hZ2VEYXRhKHtcclxuICAgICAgICAgICAgc2NhbGU6IE1hdGgubWluKGggLyBzYi5oZWlnaHQsIHcgLyBzYi53aWR0aCksXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoc2IueCwgc2IueSksXHJcbiAgICAgICAgICAgIHNpemU6bmV3IGdvLlNpemUodywgaClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2VsZi5pc0NyZWF0aW5nVGh1bWJuYWlsID0gZmFsc2U7XHJcbiAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG5cclxuICAgICAgICByZXR1cm4gaW1nRGF0YTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIGNhbGxlZCB2aWEgbmctY2xpY2sgb24gdGh1bWJuYWlsXHJcbiAgICB0aGlzLnNsaWRlVGh1bWJuYWlsU2VsZWN0ZWQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdzbGlkZVRodW1ibmFpbFNlbGVjdGVkOiAnICsgaW5kZXgpO1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmRpYWdyYW07XHJcbiAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcblxyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIE5COiBvcmRlciBvZiBzdGF0ZW1lbnRzIGlzIGltcG9ydGFudCBoZXJlLCBhcyBzZWxlY3RTbGlkZSBjYW4gdHJpZ2dlciBjaGFuZ2VkU2VsZWN0aW9uIHdpdGggYW4gZW1wdHkgc2VsZWN0aW9uIHNvbWV0aW1lcy4uLiA/P1xyXG4gICAgICAgICAgICBzZWxlY3RTbGlkZShpbmRleCk7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpOyAvLyBzaG93L2hpZGUgc2xpZGUgbm9kZXMgLSBzZWUgdGVtcGxhdGVzLmpzOiBzbGlkZVRlbXBsYXRlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIHpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc1ByZXNlbnRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dUT0MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm5lZWRzTmFycm93Q2FudmFzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICByZXR1cm4gbWFwLnVpLmN1cnJlbnRUYWJJcyhtYXAudWkuVEFCX0lEX1BSRVNFTlRFUikgJiYgXHJcbiAgICAgICAgICAgc2xpZGUgIT0gbnVsbCAmJiBcclxuICAgICAgICAgICAoc2xpZGUuZGF0YS50eXBlID09ICdUSVRMRV9CT0RZX01BUCcgfHwgc2xpZGUuZGF0YS50eXBlID09ICdBQ1RJVklUWV9NQVAnIHx8IHNsaWRlLmRhdGEudHlwZSA9PSAnTUFQX1NVTU1BUlknKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0cyB0aGUgc2xpZGUgbm9kZSBhcyBzZWxlY3RlZCBpbiB0aGUgZGlhZ3JhbS5cclxuICAgIGZ1bmN0aW9uIHNlbGVjdFNsaWRlKGluZGV4KSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc2VsZWN0IHNsaWRlOiAnICsgaW5kZXgpO1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG4gICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiBzY3JvbGwgdG8gc2xpZGU/XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wbGF5U2xpZGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG4gICAgICAgIG1hcC51aS5vcGVuVGFiKG1hcC51aS5UQUJfSURfUFJFU0VOVEVSKTsgXHJcblxyXG4gICAgICAgIHZhciBzbGlkZXMgPSBzZWxmLmdldFNsaWRlTm9kZURhdGFzKCk7XHJcbiAgICAgICAgaWYgKHNsaWRlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc2VsZi5zaG93VE9DID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHByZXNlbnRTbGlkZShpbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBpbmNyZW1lbnQgaXMgLTEgb3IgKzFcclxuICAgIHRoaXMuYWR2YW5jZVNsaWRlID0gZnVuY3Rpb24gKGluY3JlbWVudCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2FkdmFuY2VTbGlkZSwgY3VycmVudFNsaWRlSW5kZXg6ICcgKyBzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggKz0gKGluY3JlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc1ByZXNlbnRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVzZW50U2xpZGUoc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gcHJlc2VudFNsaWRlKGluZGV4KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygncHJlc2VudFNsaWRlJyk7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZGlhZ3JhbTtcclxuICAgICAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcbiAgICAgICAgICAgIGlmICghc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAvLyBOQjogbmVlZCB0byBzZXQgdGhpcyBhZnRlciBjbGVhclNlbGVjdGlvbiwgYXMgdGhhdCB3aWxsIHNldCBpdCB0byBudWxsISAoc2VlIGNoYW5nZWRTZWxlY3Rpb24pXHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKHRydWUpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdwcmVzZW50U2xpZGUsIGluZGV4OiAnICsgaW5kZXggKyAnLCBzbGlkZTogJyArIHNsaWRlICsgJywgY3VycmVudFNsaWRlSW5kZXg6ICcgKyBzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIG1heWJlSW5pdFNsaWRlQmxvY2tlcigpO1xyXG4gICAgICAgICAgICB2YXIgYmxvY2tlclcgPSBzZWxmLlNMSURFX0JMT0NLRVJfV0lEVEg7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2xpZGUuZGF0YS5oYXNSZWdpb24pIHtcclxuICAgICAgICAgICAgICAgIHpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHNob3cgc2xpZGUgYmxvY2tlclxyXG4gICAgICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIuZGVzaXJlZFNpemUgPSBuZXcgZ28uU2l6ZShcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMud2lkdGggKyAyICogYmxvY2tlclcsIFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlLmFjdHVhbEJvdW5kcy5oZWlnaHQgKyAyICogYmxvY2tlclcpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIubG9jYXRpb24gPSBuZXcgZ28uUG9pbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuYWN0dWFsQm91bmRzLnggLSBibG9ja2VyVywgXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuYWN0dWFsQm91bmRzLnkgLSBibG9ja2VyVyk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3NsaWRlQmxvY2tlcjogJyArIHNlbGYuc2xpZGVCbG9ja2VyLmFjdHVhbEJvdW5kcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2xpZGUuZGF0YS5pc1N1bW1hcnkpIHtcclxuICAgICAgICAgICAgICAgIHpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWFwLnVpLnJlc2V0Wm9vbSgpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZWxmLmlzUHJlc2VudGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygncHJlc2VudGVyLXBsYXlpbmcnKTtcclxuXHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7IC8vIGhpZGUgc2xpZGUgbm9kZXMgLSBzZWUgdGVtcGxhdGVzLmpzOiBzbGlkZVRlbXBsYXRlXHJcbiAgICAgICAgfSk7ICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICAvLyB6b29tIHRoZSBkaWFncmFtIHRvIHNob3cgdGhlIGdpdmVuIHNsaWRlIGluIHRoZSBjZW50ZXIgb2YgdGhlIGNhbnZhc1xyXG4gICAgZnVuY3Rpb24gem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSlcclxuICAgIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG5cclxuICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBoYWxmV2lkdGggPSAoc2xpZGUuZGF0YS50eXBlICE9ICdNQVBfT05MWScpO1xyXG4gICAgICAgIHZhciB6b29tUmVjdCA9IHNlbGYuZ2V0TGV0dGVyYm94ZWRSZWN0KHNsaWRlLmFjdHVhbEJvdW5kcywgaGFsZldpZHRoKTtcclxuICAgICAgICB6b29tUmVjdC5pbmZsYXRlKHpvb21SZWN0LndpZHRoIC8gMTAsIHpvb21SZWN0LmhlaWdodCAvIDEwKTtcclxuICAgICAgICBkaWFncmFtLnpvb21Ub1JlY3Qoem9vbVJlY3QsIGdvLkRpYWdyYW0uVW5pZm9ybSk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIGEgcmVjdGFuZ2xlIGNvbnRhaW5pbmcgdGhlIGdpdmVuIHJlY3QsIGJ1dCB3aXRoIGFwcHJvcHJpYXRlIHdpZHRoIG9yIGhlaWdodCBhZGRlZFxyXG4gICAgLy8gdG8gZ2l2ZSBpdCBzYW1lIGFzcGVjdCByYXRpbyBhcyB0aGUgZGlhZ3JhbS5cclxuICAgIHRoaXMuZ2V0TGV0dGVyYm94ZWRSZWN0ID0gZnVuY3Rpb24gKHJlY3QsIGhhbGZXaWR0aCkge1xyXG5cclxuICAgICAgICAvLyBOQjogd2UgY2FsY3VsYXRlIHRoZSBhc3BlY3QgcmF0aW8gd2hlbiB0aGUgdGFiIGlzIG9wZW5lZCwgXHJcbiAgICAgICAgLy8gcmF0aGVyIHRoYW4gZWFjaCB0aW1lIGFzIHRoZSBkaWFncmFtIHNpemUgbWlnaHQgYmUgY2hhbmdpbmcuLi5cclxuICAgICAgICB2YXIgZGFyID0gKGhhbGZXaWR0aCA/IHNlbGYuZGlhZ3JhbUFzcGVjdFJhdGlvIC8gMiA6IHNlbGYuZGlhZ3JhbUFzcGVjdFJhdGlvKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdyZWN0OiAnICsgcmVjdCArICcsIGRhcjogJyArIGRhcik7XHJcblxyXG4gICAgICAgIHZhciByZWN0QXNwZWN0UmF0aW8gPSByZWN0LndpZHRoIC8gcmVjdC5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmIChkYXIgPiByZWN0QXNwZWN0UmF0aW8pIHtcclxuICAgICAgICAgICAgLy8gdGFsbCBza2lubnkgcmVjdCwgc2hvcnQgd2lkZSB0YXJnZXQgQVIsIHNvIGFkZCBzaWRlIHBhZGRpbmcgdG8gdGhlIHJlY3RcclxuICAgICAgICAgICAgdmFyIGxidyA9IHJlY3QuaGVpZ2h0ICogZGFyOyAvLyBiZWNhdXNlIGxidyAvIGxiaCA9PSBkYXIgPT0gbGJ3IC8gcmVjdC5oZWlnaHQgKGxiaCA9PSByZWN0LmhlaWdodClcclxuICAgICAgICAgICAgcmV0dXJuIHJlY3QuY29weSgpLmluZmxhdGUoKGxidyAtIHJlY3Qud2lkdGgpIC8gMiwgMCk7IC8vIGFkZCBoYWxmIHRoZSB3aWR0aCBkaWZmZXJlbmNlIHRvIGVhY2ggc2lkZSBvZiB0aGUgcmVjdFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gc2hvcnQgd2lkZSByZWN0LCB0YWxsIHNraW5ueSB0YXJnZXQgQVIsIHNvIGFkZCB0b3AvYm90dG9tIHBhZGRpbmcgdG8gdGhlIHJlY3RcclxuICAgICAgICAgICAgdmFyIGxiaCA9IHJlY3Qud2lkdGggLyBkYXI7IC8vIGJlY2F1c2UgbGJ3IC8gbGJoID09IGRhciA9PSBsYmggLyByZWN0LndpZHRoIChsYncgPT0gcmVjdC53aWR0aClcclxuICAgICAgICAgICAgcmV0dXJuIHJlY3QuY29weSgpLmluZmxhdGUoMCwgKGxiaCAtIHJlY3QuaGVpZ2h0KSAvIDIpOyAgLy8gYWRkIGhhbGYgdGhlIGhlaWdodCBkaWZmZXJlbmNlIHRvIHRvcC9ib3R0b20gb2YgdGhlIHJlY3RcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc3RvcFByZXNlbnRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc3RvcFByZXNlbnRpbmcsIGN1cnJlbnRTbGlkZUluZGV4OiAnICsgc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgICAgIHZhciBkaWFncmFtID0gbWFwLmRpYWdyYW07XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VsZi5zbGlkZUJsb2NrZXIpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2xpZGVCbG9ja2VyLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9zZWxmLmN1cnJlbnRTbGlkZUluZGV4ID0gbnVsbDtcclxuICAgICAgICAgICAgc2VsZi5pc1ByZXNlbnRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdwcmVzZW50ZXItcGxheWluZycpO1xyXG5cclxuICAgICAgICAgICAgbWFwLmRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTsgLy8gc2hvdyBzbGlkZSBub2Rlc1xyXG5cclxuICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAvL21hcC51aS5yZXNldFpvb20oKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG59O1xyXG4iLCJjb25zdCBTYW5kYmFua0VkaXRvciA9IHt9O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTYW5kYmFua0VkaXRvcjsiLCIvLyBmdW5jdGlvbnMgZm9yIHNoYXJpbmcgbWFwcywgd2l0aCBhIG1vZGFsIGRpYWxvZ1xyXG5cclxud2luZG93LlNhbmRiYW5rU2hhcmluZyA9IHt9O1xyXG5cclxuU2FuZGJhbmtTaGFyaW5nID0gZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJHJlc291cmNlLCAkbW9kYWwsICRsb2cpIHtcclxuXHJcbiAgICB0aGlzLm9wZW5Nb2RhbCA9IGZ1bmN0aW9uKG1hcElkcywgb25VcGRhdGUpIHtcclxuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZV9tYXBfc2hhcmluZ19tb2RhbC5odG1sJywgLy8gc2VlIHZpZXdzL3NoYXJlcy9fdGVtcGxhdGVfbWFwX3NoYXJpbmdfbW9kYWxcclxuICAgICAgICAgICAgYmFja2Ryb3A6ICdzdGF0aWMnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBzaGFyaW5nTW9kYWxDdHJsLFxyXG4gICAgICAgICAgICB3aW5kb3dDbGFzczogJ3NoYXJpbmctbW9kYWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICB1c2VySWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUudXNlcklkO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVzZXJQcm9maWxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1hcElkczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcElkcztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uVXBkYXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gY29udHJvbGxlciBmb3Igc2hhcmluZyBtb2RhbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB2YXIgc2hhcmluZ01vZGFsQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIHVzZXJJZCwgdXNlclByb2ZpbGUsIG1hcElkcywgb25VcGRhdGUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLnVzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUgPSB1c2VyUHJvZmlsZTtcclxuICAgICAgICAkc2NvcGUubWFwSWRzID0gbWFwSWRzO1xyXG5cclxuICAgICAgICAvLyBhbGwgZXhpc3Rpbmcgc2hhcmVzIGZvciBzZWxlY3RlZCBtYXBzXHJcbiAgICAgICAgLy8gZm9ybWF0OiBbe21hcElkOjEsIHNoYXJlSWQ6MSwgY2FuRWRpdDp0cnVlLCB1c2VySWQ6MiwgdXNlckVtYWlsOidmb29AYmFyLmNvbScsIGdyb3VwSWQ6bnVsbCwgb3JnYW5pemF0aW9uSWQ6bnVsbCwgaXNQdWJsaWM6ZmFsc2UgfSwgLi4uXVxyXG4gICAgICAgICRzY29wZS5tYXBTaGFyZXMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gZXhpc3Rpbmcgc2hhcmVzLCBncm91cGVkIGZvciBkaXNwbGF5XHJcbiAgICAgICAgLy8gZm9ybWF0OiBbe25hbWU6J2ZvbycsIHVzZXJFbWFpbDonZm9vQGJhci5jb20nLCB1c2VySWQ6IG51bGwsIGdyb3VwSWQ6IGlkLCBvcmdhbml6YXRpb25JZDogbnVsbCwgaXNQdWJsaWM6ZmFsc2UsIGNhbkVkaXQ6dHJ1ZSwgbWFwSWRzOlsxLDJdfSwgLi4uXVxyXG4gICAgICAgICRzY29wZS5leGlzdGluZ1NoYXJlcyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBuZXcgc2hhcmVzIGFkZGVkIGluIHRoZSBkaWFsb2cgXHJcbiAgICAgICAgLy8gZm9ybWF0OiBbe3NoYXJlVHlwZTpTSEFSRV9UWVBFX0lORElWSURVQUwsIHNoYXJlUGVybWlzc2lvbjpTSEFSRV9QRVJNSVNTSU9OX0NBTlZJRVcsIHVzZXJFbWFpbDonZm9vQGJhci5jb20nLCBncm91cElkOm51bGwsIG9yZ2FuaXphdGlvbklkOm51bGwsIGlzUHVibGljOmZhbHNlIH0sIC4uLl1cclxuICAgICAgICAkc2NvcGUubmV3U2hhcmVzID0gW107XHJcblxyXG4gICAgICAgIC8vIGFsbCB1cGRhdGVkIHNoYXJlcywgdG8gYmUgc2F2ZWRcclxuICAgICAgICAvLyBmb3JtYXQ6IFt7bWFwSWQ6MSwgY2FuRWRpdDpmYWxzZSwgdXNlckVtYWlsOidmb29AYmFyLmNvbScsIGdyb3VwSWQ6bnVsbCwgb3JnYW5pemF0aW9uSWQ6bnVsbCwgaXNQdWJsaWM6ZmFsc2UgfSwgLi4uXVxyXG4gICAgICAgICRzY29wZS51cGRhdGVkU2hhcmVzID0gW107XHJcblxyXG4gICAgICAgIC8vIGluZGV4ZXMgb2YgdXNlcnMvZ3JvdXBzL29yZ3MgLSBmb3JtYXQ6IFt7aWQ6MSwgbmFtZTonZm9vJ30sIC4uLl1cclxuICAgICAgICAkc2NvcGUudXNlcnMgPSBbXTtcclxuICAgICAgICAkc2NvcGUuZ3JvdXBzID0gW107XHJcbiAgICAgICAgJHNjb3BlLm9yZ2FuaXphdGlvbnMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gY29uc3RhbnRzXHJcbiAgICAgICAgJHNjb3BlLlNIQVJFX1RZUEVfSU5ESVZJRFVBTCA9ICdPbmUgb3IgbW9yZSBJbmRpdmlkdWFscyc7XHJcbiAgICAgICAgJHNjb3BlLlNIQVJFX1RZUEVfR1JPVVAgPSAnR3JvdXAnO1xyXG4gICAgICAgICRzY29wZS5TSEFSRV9UWVBFX09SR0FOSVpBVElPTiA9ICdUaGlua05hdGlvbic7XHJcbiAgICAgICAgJHNjb3BlLlNIQVJFX1RZUEVfUFVCTElDID0gJ0FsbCBNZXRhTWFwIFVzZXJzJztcclxuXHJcbiAgICAgICAgJHNjb3BlLnNoYXJlVHlwZXMgPSBbXHJcbiAgICAgICAgICAgICRzY29wZS5TSEFSRV9UWVBFX0lORElWSURVQUwsXHJcbiAgICAgICAgICAgIC8vJHNjb3BlLlNIQVJFX1RZUEVfR1JPVVAsIFxyXG4gICAgICAgICAgICAkc2NvcGUuU0hBUkVfVFlQRV9PUkdBTklaQVRJT04sXHJcbiAgICAgICAgICAgICRzY29wZS5TSEFSRV9UWVBFX1BVQkxJQ1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgICRzY29wZS5TSEFSRV9QRVJNSVNTSU9OX0NBTlZJRVcgPSAnQ2FuIHZpZXcnO1xyXG4gICAgICAgICRzY29wZS5TSEFSRV9QRVJNSVNTSU9OX0NBTkVESVQgPSAnQ2FuIGVkaXQnO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2hhcmVQZXJtaXNzaW9ucyA9IFtcclxuICAgICAgICAgICAgJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FOVklFVyxcclxuICAgICAgICAgICAgJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FORURJVFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5TaGFyZUN1bHR1cmVNYXAgPSBmdW5jdGlvbihzaGFyZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUoJHNjb3BlLnVzZXJQcm9maWxlLm1lbWJlcnNoaXBzLCB7XHJcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogc2hhcmUub3JnYW5pemF0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICBsZWFkZXI6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IGV4aXN0aW5nIHNoYXJlc1xyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRTaGFyZXMobWFwSWRzKSB7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnL3NoYXJlcy9tYXBfc2hhcmVzLmpzb24/aWRzPScgKyBtYXBJZHMuam9pbignLCcpKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tYXBTaGFyZXMgPSByZXNwb25zZS5kYXRhLm1hcFNoYXJlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gcmVzcG9uc2UuZGF0YS51c2VycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdyb3VwcyA9IHJlc3BvbnNlLmRhdGEuZ3JvdXBzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JnYW5pemF0aW9ucyA9IHJlc3BvbnNlLmRhdGEub3JnYW5pemF0aW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdEV4aXN0aW5nU2hhcmVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmV4aXN0aW5nU2hhcmVzLmxlbmd0aCAmJiAkc2NvcGUuY2FuQWRkTmV3U2hhcmUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZE5ld1NoYXJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBsb2FkIHNoYXJpbmcgaW5mbycpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2FkU2hhcmVzKG1hcElkcyk7XHJcblxyXG4gICAgICAgIC8vIGdyb3VwIHRoZSBleGlzdGluZyBzaGFyZXMgYnkgdXNlciwgZ3JvdXAsIG9yZyBhbmQgcHVibGljXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdEV4aXN0aW5nU2hhcmVzKCkge1xyXG4gICAgICAgICAgICAvLyBmaW5kIGFsbCBlbWFpbHMgdGhhdCBvY2N1ciBpbiBhIHNoYXJlXHJcbiAgICAgICAgICAgIHZhciB1c2VyRW1haWxzID0gXy53aXRob3V0KF8udW5pcShfLnBsdWNrKCRzY29wZS5tYXBTaGFyZXMsICd1c2VyRW1haWwnKSksIG51bGwpO1xyXG4gICAgICAgICAgICAvLyBidWlsZCBhbiBhcnJheSBvZiBzaGFyZXMsIG9uZSBmb3IgZWFjaCBlbWFpbCwgd2l0aCB0aGUgYXBwbGljYWJsZSBtYXAgSURzXHJcbiAgICAgICAgICAgIHZhciBzaGFyZXNCeVVzZXJFbWFpbCA9IF8ubWFwKHVzZXJFbWFpbHMsIGZ1bmN0aW9uKGVtYWlsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXNlciA9IF8uZmluZFdoZXJlKCRzY29wZS51c2Vycywge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRGVsZXRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBlbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6ICh1c2VyID8gdXNlci5pZCA6IG51bGwpLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNQdWJsaWM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQ3VsdHVyZU1hcDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTkI6IGZvciB0aGlzIGF0dHJpYnV0ZSB3ZSBkb24ndCB0cnkgdG8gc3VtbWFyaXplIHRoZSB2YWx1ZSBmb3IgYWxsIHRoZSBleGlzdGluZyBzaGFyZXMsIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgaXQgd291bGQgYmUgdG9vIGNvbXBsaWNhdGVkIHRvIGRpc3BsYXkuLi5cclxuICAgICAgICAgICAgICAgICAgICBjYW5FZGl0OiAkc2NvcGUubWFwU2hhcmVzLmxlbmd0aCA9PSAxICYmICRzY29wZS5tYXBTaGFyZXNbMF0uY2FuRWRpdCxcclxuICAgICAgICAgICAgICAgICAgICBtYXBJZHM6IF8ucGx1Y2soXy53aGVyZSgkc2NvcGUubWFwU2hhcmVzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogZW1haWxcclxuICAgICAgICAgICAgICAgICAgICB9KSwgJ21hcElkJylcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIGdyb3VwSWRzID0gXy53aXRob3V0KF8udW5pcShfLnBsdWNrKCRzY29wZS5tYXBTaGFyZXMsICdncm91cElkJykpLCBudWxsKTtcclxuICAgICAgICAgICAgdmFyIHNoYXJlc0J5R3JvdXBJZCA9IF8ubWFwKGdyb3VwSWRzLCBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gXy5maW5kV2hlcmUoJHNjb3BlLmdyb3Vwcywge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRGVsZXRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNDdWx0dXJlTWFwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnR3JvdXA6ICcgKyAoZ3JvdXAgPyBncm91cC5uYW1lIDogJycpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbkVkaXQ6ICRzY29wZS5tYXBTaGFyZXMubGVuZ3RoID09IDEgJiYgJHNjb3BlLm1hcFNoYXJlc1swXS5jYW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcElkczogXy5wbHVjayhfLndoZXJlKCRzY29wZS5tYXBTaGFyZXMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogaWRcclxuICAgICAgICAgICAgICAgICAgICB9KSwgJ21hcElkJylcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIG9yZ2FuaXphdGlvbklkcyA9IF8ud2l0aG91dChfLnVuaXEoXy5wbHVjaygkc2NvcGUubWFwU2hhcmVzLCAnb3JnYW5pemF0aW9uSWQnKSksIG51bGwpO1xyXG4gICAgICAgICAgICB2YXIgc2hhcmVzQnlPcmdhbml6YXRpb25JZCA9IF8ubWFwKG9yZ2FuaXphdGlvbklkcywgZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmdhbml6YXRpb24gPSBfLmZpbmRXaGVyZSgkc2NvcGUub3JnYW5pemF0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRGVsZXRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNDdWx0dXJlTWFwOiAkc2NvcGUubWFwU2hhcmVzLmxlbmd0aCA9PSAxICYmICRzY29wZS5tYXBTaGFyZXNbMF0uaXNDdWx0dXJlTWFwLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdUaGlua05hdGlvbjogJyArIChvcmdhbml6YXRpb24gPyBvcmdhbml6YXRpb24ubmFtZSA6ICcnKSxcclxuICAgICAgICAgICAgICAgICAgICBjYW5FZGl0OiAkc2NvcGUubWFwU2hhcmVzLmxlbmd0aCA9PSAxICYmICRzY29wZS5tYXBTaGFyZXNbMF0uY2FuRWRpdCxcclxuICAgICAgICAgICAgICAgICAgICBtYXBJZHM6IF8ucGx1Y2soXy53aGVyZSgkc2NvcGUubWFwU2hhcmVzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBpZFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLCAnbWFwSWQnKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBhcmUgYW55IG9mIHRoZSBzZWxlY3RlZCBtYXBzIHNoYXJlZCBwdWJsaWNseT9cclxuICAgICAgICAgICAgdmFyIHB1YmxpY1NoYXJlcyA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoXy53aGVyZSgkc2NvcGUubWFwU2hhcmVzLCB7XHJcbiAgICAgICAgICAgICAgICBpc1B1YmxpYzogdHJ1ZVxyXG4gICAgICAgICAgICB9KS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHB1YmxpY1NoYXJlcyA9IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNEZWxldGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNQdWJsaWM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNDdWx0dXJlTWFwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnRXZlcnlvbmUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbkVkaXQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcElkczogXy5wbHVjayhfLndoZXJlKCRzY29wZS5tYXBTaGFyZXMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQdWJsaWM6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KSwgJ21hcElkJylcclxuICAgICAgICAgICAgICAgIH1dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuZXhpc3RpbmdTaGFyZXMgPSBfLnVuaW9uKHNoYXJlc0J5VXNlckVtYWlsLCBzaGFyZXNCeUdyb3VwSWQsIHNoYXJlc0J5T3JnYW5pemF0aW9uSWQsIHB1YmxpY1NoYXJlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBidWlsZFVwZGF0ZWRTaGFyZXMoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS51cGRhdGVkU2hhcmVzID0gW107XHJcblxyXG4gICAgICAgICAgICAvLyBmb3IgZWFjaCBzZWxlY3RlZCBtYXAsIGRlY29tcG9zZSB0aGUgZXhpc3RpbmdTaGFyZXMgKGdyb3VwZWQgYnkgdXNlci9ncm91cC9vcmcvcHVibGljKSBpbnRvIGluZGl2aWR1YWwgc2hhcmVzIGZvciBzYXZpbmdcclxuICAgICAgICAgICAgXy5lYWNoKG1hcElkcywgZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGdldCBleGlzdGluZyBzaGFyZXMgZm9yIHRoaXMgbWFwXHJcbiAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdTaGFyZXNGb3JNYXBJZCA9IF8uZmlsdGVyKCRzY29wZS5leGlzdGluZ1NoYXJlcywgZnVuY3Rpb24oZXhpc3RpbmdTaGFyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nU2hhcmVzIGZvcm1hdDogW3tuYW1lOidmb28nLCB1c2VyRW1haWw6J2Zvb0BiYXIuY29tJywgdXNlcklkOiBudWxsLCBncm91cElkOiBpZCwgb3JnYW5pemF0aW9uSWQ6IG51bGwsIGlzUHVibGljOmZhbHNlLCBpc0N1bHR1cmVNYXA6ZmFsc2UsIGNhbkVkaXQ6dHJ1ZSwgbWFwSWRzOlsxLDJdfSwgLi4uXVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLmNvbnRhaW5zKGV4aXN0aW5nU2hhcmUubWFwSWRzLCBpZCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIGRlY29tcG9zZSB0aGVzZSBpbnRvIGluZGl2aWR1YWwgc2hhcmVzXHJcbiAgICAgICAgICAgICAgICBfLmVhY2goZXhpc3RpbmdTaGFyZXNGb3JNYXBJZCwgZnVuY3Rpb24oZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlZFNoYXJlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RlbGV0ZWQ6IGVzLmlzRGVsZXRlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwSWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGVzLnVzZXJFbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBlcy51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGVzLmdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBlcy5vcmdhbml6YXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQdWJsaWM6IGVzLmlzUHVibGljLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0N1bHR1cmVNYXA6IGVzLmlzQ3VsdHVyZU1hcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRWRpdDogZXMuY2FuRWRpdFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gYWRkIGluIHRoZSBuZXdTaGFyZXMgKGZvciBlYWNoIHNlbGVjdGVkIG1hcClcclxuICAgICAgICAgICAgXy5lYWNoKG1hcElkcywgZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAgICAgICAgIF8uZWFjaCgkc2NvcGUubmV3U2hhcmVzLCBmdW5jdGlvbihucykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVkU2hhcmVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05ldzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwSWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IChucy5zaGFyZVR5cGUgPT0gJHNjb3BlLlNIQVJFX1RZUEVfSU5ESVZJRFVBTCA/IG5zLnVzZXJFbWFpbCA6IG51bGwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiAobnMuc2hhcmVUeXBlID09ICRzY29wZS5TSEFSRV9UWVBFX0dST1VQID8gbnMuZ3JvdXBJZCA6IG51bGwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogKG5zLnNoYXJlVHlwZSA9PSAkc2NvcGUuU0hBUkVfVFlQRV9PUkdBTklaQVRJT04gPyBucy5vcmdhbml6YXRpb25JZCA6IG51bGwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogbnMuc2hhcmVUeXBlID09ICRzY29wZS5TSEFSRV9UWVBFX1BVQkxJQyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDdWx0dXJlTWFwOiBucy5pc0N1bHR1cmVNYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkVkaXQ6IChucy5zaGFyZVR5cGUgPT0gJHNjb3BlLlNIQVJFX1RZUEVfUFVCTElDID8gZmFsc2UgOiBucy5zaGFyZVBlcm1pc3Npb24gPT0gJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FORURJVCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG5zLm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNhdmVTaGFyZXMob25VcGRhdGUpIHtcclxuICAgICAgICAgICAgJGh0dHAucHV0KCcvc2hhcmVzL3VwZGF0ZV9tYXBfc2hhcmVzJywgJHNjb3BlLnVwZGF0ZWRTaGFyZXMpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3Qgc2F2ZSBzaGFyaW5nIGluZm8nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbkRlbGV0ZUV4aXN0aW5nU2hhcmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRzY29wZS5jYW5BZGROZXdTaGFyZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5kZWxldGVFeGlzdGluZ1NoYXJlID0gZnVuY3Rpb24oc2hhcmUpIHtcclxuICAgICAgICAgICAgc2hhcmUuaXNEZWxldGVkID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FuQWRkTmV3U2hhcmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIGFsbCBtYXBzIGFyZSBvd25lZCBieSB0aGUgY3VycmVudCB1c2VyXHJcbiAgICAgICAgICAgIHZhciBtYXBVc2VySWRzID0gXy51bmlxKF8ucGx1Y2soJHNjb3BlLm1hcFNoYXJlcywgJ21hcFVzZXJJZCcpKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1hcFVzZXJJZHMubGVuZ3RoID09IDAgfHwgKG1hcFVzZXJJZHMubGVuZ3RoID09IDEgJiYgbWFwVXNlcklkc1swXSA9PSAkc2NvcGUudXNlcklkKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkTmV3U2hhcmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gTkI6IGlzUHVibGljIGFuZCBjYW5FZGl0IGFyZSBzZXQgaW4gYnVpbGRVcGRhdGVTaGFyZXNcclxuICAgICAgICAgICAgJHNjb3BlLm5ld1NoYXJlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHNoYXJlVHlwZTogJHNjb3BlLlNIQVJFX1RZUEVfSU5ESVZJRFVBTCxcclxuICAgICAgICAgICAgICAgIHNoYXJlUGVybWlzc2lvbjogJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FOVklFVyxcclxuICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogJycsXHJcbiAgICAgICAgICAgICAgICBncm91cElkOiAoJHNjb3BlLmdyb3Vwcy5sZW5ndGggPyAkc2NvcGUuZ3JvdXBzWzBdLmlkIDogbnVsbCksXHJcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogKCRzY29wZS5vcmdhbml6YXRpb25zLmxlbmd0aCA/ICRzY29wZS5vcmdhbml6YXRpb25zWzBdLmlkIDogbnVsbCksXHJcbiAgICAgICAgICAgICAgICBpc0N1bHR1cmVNYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJydcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmRlbGV0ZU5ld1NoYXJlID0gZnVuY3Rpb24oc2hhcmUpIHtcclxuICAgICAgICAgICAgdmFyIGkgPSBfLmluZGV4T2YoJHNjb3BlLm5ld1NoYXJlcywgc2hhcmUpO1xyXG4gICAgICAgICAgICAkc2NvcGUubmV3U2hhcmVzLnNwbGljZShpLCAxKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUub2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgYnVpbGRVcGRhdGVkU2hhcmVzKCk7XHJcbiAgICAgICAgICAgIHNhdmVTaGFyZXMob25VcGRhdGUpO1xyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgc2hhcmluZ01vZGFsQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnLCAndXNlcklkJywgJ3VzZXJQcm9maWxlJywgJ21hcElkcycsICdvblVwZGF0ZSddO1xyXG59OyIsImNvbnN0IFNhbmRiYW5rRWRpdG9yID0gcmVxdWlyZSgnLi9zYkVkaXRvcicpO1xyXG4vLyBjb21tb24gY29yZSBzdGFuZGFyZHMgdGFiIC1cclxuLy8gdGhpcyBpcyBkZWxlZ2F0ZWQgdG8gdGhlIFNhbmRiYW5rQ2NzVGFnZ2luZyBtb2R1bGUsIHdoaWNoIGhhbmRsZXMgQ0NTIFxyXG4vLyBmb3IgYSBtYXAgT1IgdGhlIHVzZXIgcHJvZmlsZSAtIHNlZSB0YWdnaW5nX2Njcy5qc1xyXG5cclxuU2FuZGJhbmtFZGl0b3IuU3RhbmRhcmRzID0gZnVuY3Rpb24gKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIH07XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PSBtYXAudWkoKS5UQUJfSURfU1RBTkRBUkRTKSB7IC8vIG9wZW5pbmcgdGFiXHJcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBubyBsaW5rcywgc2hvdyB0aGUgbW9kYWxcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5jYW5FZGl0ICYmICEkc2NvcGUuY2NzVGFnZ2luZy5saW5rcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jY3NUYWdnaW5nLmFkZExpbmsoKTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9sZFZhbHVlID09IG1hcC51aSgpLlRBQl9JRF9TVEFOREFSRFMpIHsgLy8gY2xvc2luZyB0YWJcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59OyIsIi8vIGZ1bmN0aW9ucyBmb3IgdXNlci10YWdnaW5nIG1hcHMsIHdpdGggYSBtb2RhbCBkaWFsb2dcclxuXHJcbi8vIE5COiB0aGUgY29tcGxleGl0eSBoZXJlIGlzIGR1ZSB0byB0aGUgbmVlZCB0byBzaG93IGV4aXN0aW5nIHRhZ3MgdGhhdCBtYXkgYXBwbHkgXHJcbi8vIHRvIGFueSBudW1iZXIgb2YgdGhlIHNlbGVjdGVkIG1hcHMsIHZzLiBuZXcgdGFncyB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gYWxsIHNlbGVjdGVkIG1hcHMgLVxyXG4vLyB0aGUgdGFnZ2luZyBpbmZvIG5lZWRzIHRvIGJlIGdyb3VwZWQgYW5kIHVuZ3JvdXBlZCB3aGVuIGxvYWRpbmcgYW5kIHNhdmluZyB0byBoYW5kbGUgdGhpcy5cclxuXHJcbndpbmRvdy5TYW5kYmFua1RhZ2dpbmcgPSB7fTtcclxuXHJcblNhbmRiYW5rVGFnZ2luZyA9IGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgJG1vZGFsLCAkbG9nKSB7XHJcblxyXG4gICAgdGhpcy5vcGVuTW9kYWwgPSBmdW5jdGlvbiAobWFwSWRzLCBzaG93RGVzY3JpcHRpb24sIG9uVXBkYXRlKSB7XHJcbiAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVfbWFwX3RhZ2dpbmdfbW9kYWwuaHRtbCcsIC8vIHNlZSB2aWV3cy91c2VyX3RhZ3MvX3RlbXBsYXRlX21hcF90YWdnaW5nX21vZGFsXHJcbiAgICAgICAgICAgIGJhY2tkcm9wOiAnc3RhdGljJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogdGFnc01vZGFsQ3RybCxcclxuICAgICAgICAgICAgd2luZG93Q2xhc3M6ICd0YWdzLW1vZGFsJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgbWFwSWRzOiBmdW5jdGlvbigpIHsgcmV0dXJuIG1hcElkczsgfSxcclxuICAgICAgICAgICAgICAgIHNob3dEZXNjcmlwdGlvbjogZnVuY3Rpb24oKSB7IHJldHVybiBzaG93RGVzY3JpcHRpb247IH0sXHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24oKSB7IHJldHVybiBvblVwZGF0ZTsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gY29udHJvbGxlciBmb3IgdGFncyBtb2RhbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB2YXIgdGFnc01vZGFsQ3RybCA9IGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbEluc3RhbmNlLCBtYXBJZHMsIHNob3dEZXNjcmlwdGlvbiwgb25VcGRhdGUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1hcElkcyA9IG1hcElkcztcclxuXHJcbiAgICAgICAgLy8gYWxsIGV4aXN0aW5nIHRhZ3MgZm9yIHNlbGVjdGVkIG1hcHMgLSBmb3JtYXQ6IFt7bWFwSWQ6IDEsIHRhZ0lkOiAxLCB0YWdOYW1lOidmb28nfSwgLi4uXVxyXG4gICAgICAgICRzY29wZS5tYXBVc2VyVGFncyA9IFtdOyAgICBcclxuICAgICAgICBcclxuICAgICAgICAvLyBleGlzdGluZyB0YWdzLCBncm91cGVkIGZvciBkaXNwbGF5IC0gZm9ybWF0OiBbe25hbWU6J2ZvbycsIG1hcElkczpbMSwyXX0sIC4uLl1cclxuICAgICAgICAkc2NvcGUuZXhpc3RpbmdUYWdzID0gW107ICAgXHJcblxyXG4gICAgICAgIC8vIG5ldyB0YWdzIGFkZGVkIGluIHRoZSBkaWFsb2cgLSBmb3JtYXQ6IFt7bmFtZTonZm9vJ30sIC4uLl1cclxuICAgICAgICAkc2NvcGUubmV3VGFncyA9IFtdOyAgICAgICAgXHJcblxyXG4gICAgICAgIC8vIGFsbCB1cGRhdGVkIHRhZ3MsIHRvIGJlIHNhdmVkIC0gdGFncyBmb3JtYXQ6IFt7bWFwSWQ6IDEsIHVzZXJUYWdzOiBcImZvbywgYmFyLCBiYW1cIn0sIC4uLl1cclxuICAgICAgICAkc2NvcGUudXBkYXRlZFRhZ3MgPSB7IGRlc2NyaXB0aW9uOiAnJywgdGFnczogW10gfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNob3dEZXNjcmlwdGlvbiA9IHNob3dEZXNjcmlwdGlvbjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZFRhZ3MobWFwSWRzKSB7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnL3VzZXJfdGFncy9tYXBfdXNlcl90YWdzLmpzb24/aWRzPScgKyBtYXBJZHMuam9pbignLCcpKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubWFwVXNlclRhZ3MgPSByZXNwb25zZS5kYXRhLm1hcFVzZXJUYWdzO1xyXG4gICAgICAgICAgICAgICAgLy8gTkI6IHRoZSBtYXAgZGVzY3JpcHRpb24gaXMgYWx3YXlzIHBhc3NlZCBiYWNrIGlmIHdlIG9ubHkgcGFzcyBvbmUgbWFwIElELCBcclxuICAgICAgICAgICAgICAgIC8vIGJ1dCB3ZSBtYXkgbm90IGRpc3BsYXkgaXQgaW4gdGhlIGRpYWxvZyAtIGRlcGVuZHMgb24gdGhlIHZhbHVlIG9mIHRoZSBzaG93RGVzY3JpcHRpb24gZmxhZy5cclxuICAgICAgICAgICAgICAgIGlmIChtYXBJZHMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlZFRhZ3MuZGVzY3JpcHRpb24gPSByZXNwb25zZS5kYXRhLm1hcERlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaW5pdEV4aXN0aW5nVGFncygpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZE5ld1RhZygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3QgbG9hZCB0YWdzJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9hZFRhZ3MobWFwSWRzKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdEV4aXN0aW5nVGFncygpIHtcclxuICAgICAgICAgICAgdmFyIHRhZ05hbWVzID0gXy51bmlxKF8ucGx1Y2soJHNjb3BlLm1hcFVzZXJUYWdzLCAndGFnTmFtZScpKS5zb3J0KCk7XHJcbiAgICAgICAgICAgICRzY29wZS5leGlzdGluZ1RhZ3MgPSBfLm1hcCh0YWdOYW1lcywgZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcFVzZXJUYWdzRm9yTmFtZSA9IF8ud2hlcmUoJHNjb3BlLm1hcFVzZXJUYWdzLCB7dGFnTmFtZTogbmFtZX0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcElkcyA9IF8ucGx1Y2sobWFwVXNlclRhZ3NGb3JOYW1lLCAnbWFwSWQnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6bmFtZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwSWRzOm1hcElkc1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBidWlsZFVwZGF0ZWRUYWdzKCkge1xyXG4gICAgICAgICAgJHNjb3BlLnVwZGF0ZWRUYWdzLnRhZ3MgPSBbXTtcclxuICAgICAgICAgIF8uZWFjaChtYXBJZHMsIGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nVGFnc0ZvcklkID0gXy5maWx0ZXIoJHNjb3BlLmV4aXN0aW5nVGFncywgZnVuY3Rpb24oZXhpc3RpbmdUYWcpIHsgXHJcbiAgICAgICAgICAgICAgICAvLyBleGlzdGluZ1RhZyBmb3JtYXQ6IHtuYW1lOidmb28nLCBtYXBJZHM6WzEsMl19XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5jb250YWlucyhleGlzdGluZ1RhZy5tYXBJZHMsIGlkKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlZFRhZ3MudGFncy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgbWFwSWQ6IGlkLCBcclxuICAgICAgICAgICAgICAgICAgdXNlclRhZ3M6IF8udW5pb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKGV4aXN0aW5nVGFnc0ZvcklkLCAnbmFtZScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXy53aXRob3V0KF8ucGx1Y2soJHNjb3BlLm5ld1RhZ3MsICduYW1lJyksICcnKSAvLyByZW1vdmUgZW1wdHkgdGFnc1xyXG4gICAgICAgICAgICAgICAgICApLmpvaW4oJywgJylcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2F2ZVRhZ3Mob25VcGRhdGUpIHtcclxuICAgICAgICAgICAgJGh0dHAucHV0KCcvdXNlcl90YWdzL3VwZGF0ZV9tYXBfdXNlcl90YWdzJywgWyRzY29wZS51cGRhdGVkVGFnc10pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBzYXZlIHRhZ3MnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuZGVsZXRlRXhpc3RpbmdUYWcgPSBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICAgICAgdmFyIGkgPSBfLmluZGV4T2YoJHNjb3BlLmV4aXN0aW5nVGFncywgdGFnKTtcclxuICAgICAgICAgICAgJHNjb3BlLmV4aXN0aW5nVGFncy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgfTsgIFxyXG5cclxuICAgICAgICAkc2NvcGUuYWRkTmV3VGFnID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5uZXdUYWdzLnB1c2goe25hbWU6ICcnfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRhZ1NlbGVjdGVkID0gZnVuY3Rpb24oaXRlbSwgbW9kZWwsIGxhYmVsKSB7XHJcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKCd0YWdTZWxlY3RlZDogJyArIGl0ZW0gKyAnLCAnICsgbW9kZWwgKyAnLCAnICsgbGFiZWwpO1xyXG4gICAgICAgICAgJHNjb3BlLmFkZE5ld1RhZygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5lZGl0aW5nVGFnS2V5cHJlc3MgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLndoaWNoID09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmV3VGFnKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZGVsZXRlTmV3VGFnID0gZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgICAgIHZhciBpID0gXy5pbmRleE9mKCRzY29wZS5uZXdUYWdzLCB0YWcpO1xyXG4gICAgICAgICAgICAkc2NvcGUubmV3VGFncy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgIGlmICghJHNjb3BlLm5ld1RhZ3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmV3VGFnKCk7IC8vIGFsd2F5cyBsZWF2ZSBhdCBsZWFzdCBvbmUgdGFnIGZpZWxkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgLy8gdGFnIGF1dG9jb21wbGV0ZVxyXG4gICAgICAgICRzY29wZS5nZXRVc2VyVGFncyA9IGZ1bmN0aW9uKHZpZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJy91c2VyX3RhZ3MvbGlzdC5qc29uP3E9JyArIHZpZXdWYWx1ZTsgXHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS50YWdzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUub2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGJ1aWxkVXBkYXRlZFRhZ3MoKTtcclxuICAgICAgICAgICAgc2F2ZVRhZ3Mob25VcGRhdGUpO1xyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIHRhZ3NNb2RhbEN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJyRtb2RhbEluc3RhbmNlJywgJ21hcElkcycsICdzaG93RGVzY3JpcHRpb24nLCAnb25VcGRhdGUnXTtcclxufTtcclxuIiwiY29uc3QgU2FuZGJhbmtFZGl0b3IgPSByZXF1aXJlKCcuL3NiRWRpdG9yJyk7XHJcbnJlcXVpcmUoJy4vYnV0dG9ucy9idXR0b24nKVxyXG4vLyBnb0pTIHRlbXBsYXRlcyB1c2VkIGluIHRoZSBlZGl0b3JcclxuXHJcblNhbmRiYW5rRWRpdG9yLlRlbXBsYXRlcyA9IGZ1bmN0aW9uICgkc2NvcGUsIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICBjb25zdCBtZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vTWV0YU1hcCcpO1xyXG4gICAgY29uc3QgY29uZmlnID0gbWV0YU1hcC5jb25maWcuY2FudmFzO1xyXG4gICAgY29uc3QgQ09OU1RBTlRTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2NvbnN0YW50cycpO1xyXG4gICAgLy8gY29uc3RhbnRzXHJcbiAgICAvL3RoaXMuZ3JvdXBGaWxsQ29sb3IgPSBcIiNmOWY5ZjlcIjtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7IH07XHJcblxyXG4gICAgLy8gaW5pdGlhbGl6ZSB0ZW1wbGF0ZS1yZWxhdGVkIHN0dWZmIHRoYXQgZGVwZW5kcyBvbiB0aGUgZGlhZ3JhbSAoYW5kIHRoZXJlZm9yZSBjYW4ndCBnbyBpbiBpbml0KCkpXHJcbiAgICB0aGlzLmluaXRUZW1wbGF0ZXMgPSBmdW5jdGlvbiAoZGlhZ3JhbSkge1xyXG4gICAgICAgIGRpYWdyYW0uZ3JvdXBUZW1wbGF0ZSA9IHNlbGYuZ3JvdXBUZW1wbGF0ZTtcclxuICAgICAgICBkaWFncmFtLm5vZGVUZW1wbGF0ZSA9IHNlbGYuc2xpZGVUZW1wbGF0ZTtcclxuICAgICAgICBkaWFncmFtLmxpbmtUZW1wbGF0ZSA9IHNlbGYubGlua1RlbXBsYXRlO1xyXG4gICAgICAgIGRpYWdyYW0ubGlua1RlbXBsYXRlTWFwLmFkZChDT05TVEFOVFMuRFNSUC5QLCBzZWxmLnBMaW5rVGVtcGxhdGUpO1xyXG4gICAgICAgIGRpYWdyYW0ubGlua1RlbXBsYXRlTWFwLmFkZChDT05TVEFOVFMuRFNSUC5ELCBzZWxmLmRMaW5rVGVtcGxhdGUpO1xyXG5cclxuICAgICAgICBzZWxmLnNldFRlbXBvcmFyeUxpbmtUZW1wbGF0ZXMoZGlhZ3JhbS50b29sTWFuYWdlci5kcmFnZ2luZ1Rvb2wpO1xyXG4gICAgICAgIHNlbGYuc2V0VGVtcG9yYXJ5TGlua1RlbXBsYXRlcyhkaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sKTtcclxuICAgICAgICBzZWxmLnNldFRlbXBvcmFyeUxpbmtUZW1wbGF0ZXMoZGlhZ3JhbS50b29sTWFuYWdlci5yZWxpbmtpbmdUb29sKTtcclxuXHJcbiAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5saW5raW5nVG9vbC5wb3J0VGFyZ2V0ZWQgPSBmdW5jdGlvbiAocmVhbG5vZGUsIHJlYWxwb3J0LCB0ZW1wbm9kZSwgdGVtcHBvcnQsIHRvZW5kKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaGFuZGxlUG9ydFRhcmdldGVkKGRpYWdyYW0sIHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5kcmFnZ2luZ1Rvb2wucG9ydFRhcmdldGVkID0gZnVuY3Rpb24gKHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCkge1xyXG4gICAgICAgICAgICBzZWxmLmhhbmRsZVBvcnRUYXJnZXRlZChkaWFncmFtLCByZWFsbm9kZSwgcmVhbHBvcnQsIHRlbXBub2RlLCB0ZW1wcG9ydCwgdG9lbmQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbC5wb3J0VGFyZ2V0ZWQgPSBmdW5jdGlvbiAocmVhbG5vZGUsIHJlYWxwb3J0LCB0ZW1wbm9kZSwgdGVtcHBvcnQsIHRvZW5kKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaGFuZGxlUG9ydFRhcmdldGVkKGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbCwgcmVhbG5vZGUsIHJlYWxwb3J0LCB0ZW1wbm9kZSwgdGVtcHBvcnQsIHRvZW5kKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLnJlbGlua2luZ1Rvb2wudXBkYXRlQWRvcm5tZW50cyA9IGZ1bmN0aW9uIChwYXJ0KSB7XHJcbiAgICAgICAgICAgIGdvLlJlbGlua2luZ1Rvb2wucHJvdG90eXBlLnVwZGF0ZUFkb3JubWVudHMuY2FsbCh0aGlzLCBwYXJ0KTtcclxuICAgICAgICAgICAgdmFyIGZyb20gPSBwYXJ0LmZpbmRBZG9ybm1lbnQoJ1JlbGlua0Zyb20nKTtcclxuICAgICAgICAgICAgdmFyIHRvID0gcGFydC5maW5kQWRvcm5tZW50KCdSZWxpbmtUbycpO1xyXG4gICAgICAgICAgICAvLyBpZiAoZnJvbSlcclxuICAgICAgICAgICAgLy8gICAgIC8vY29uc29sZS5sb2coJ3JlbGlua2Zyb206ICcgKyBmcm9tLnBhcnQud2lkdGgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIuZHJhZ2dpbmdUb29sLmxpbmtWYWxpZGF0aW9uID0gc2VsZi52YWxpZGF0ZUxpbms7XHJcbiAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5saW5raW5nVG9vbC5saW5rVmFsaWRhdGlvbiA9IHNlbGYudmFsaWRhdGVMaW5rO1xyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbC5saW5rVmFsaWRhdGlvbiA9IHNlbGYudmFsaWRhdGVMaW5rO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjb252ZW5pZW50IGFiYnJldmlhdGlvbiBmb3IgY3JlYXRpbmcgdGVtcGxhdGVzXHJcbiAgICB2YXIgbWsgPSBnby5HcmFwaE9iamVjdC5tYWtlO1xyXG5cclxuICAgIC8vIERTUlAgY29sb3JzIChmcm9tIF92YXJpYWJsZXMuc2NzcylcclxuICAgIC8vdmFyIGNvbG9yRCA9IFwiI2YyNjI0Y1wiO1xyXG4gICAgLy92YXIgY29sb3JTID0gXCIjOTZjOTNkXCI7XHJcbiAgICAvL3ZhciBjb2xvclIgPSBcIiM0Y2JmYzJcIjtcclxuICAgIC8vdmFyIGNvbG9yUCA9IFwiI2ZiYWEzNlwiO1xyXG4gICAgLy92YXIgY29sb3JQTGlnaHQgPSBcIiNGREREQUZcIjtcclxuICAgIC8vdmFyIGNvbG9yUERhcmsgPSBcIiNDOTg4MkJcIjtcclxuXHJcbiAgICAvLyB2YXIgZXllU3ZnUGF0aCA9IFwiTSAyNTYuMDAsOTYuMDBDIDE0NC4zNDEsOTYuMDAsIDQ3LjU1OSwxNjEuMDIxLDAuMDAsMjU2LjAwYyA0Ny41NTksOTQuOTc5LCAxNDQuMzQxLDE2MC4wMCwgMjU2LjAwLDE2MC4wMGMgMTExLjY1NywwLjAwLCAyMDguNDM5LTY1LjAyMSwgMjU2LjAwLTE2MC4wMCBDIDQ2NC40NDIsMTYxLjAyMSwgMzY3LjY1Nyw5Ni4wMCwgMjU2LjAwLDk2LjAweiBNIDM4Mi4yMjUsMTgwLjg1MmMgMzAuMDgxLDE5LjE4NywgNTUuNTcxLDQ0Ljg4NywgNzQuNzE3LDc1LjE0OCBjLTE5LjE0NiwzMC4yNjEtNDQuNjM3LDU1Ljk2MS03NC43MTgsNzUuMTQ5QyAzNDQuNDI3LDM1NS4yNTcsIDMwMC43NzksMzY4LjAwLCAyNTYuMDAsMzY4LjAwYy00NC43OCwwLjAwLTg4LjQyOC0xMi43NDMtMTI2LjIyNS0zNi44NTIgQyA5OS42OTUsMzExLjk2MiwgNzQuMjA1LDI4Ni4yNjIsIDU1LjA1OCwyNTYuMDBjIDE5LjE0Ni0zMC4yNjIsIDQ0LjYzNy01NS45NjIsIDc0LjcxNy03NS4xNDhjIDEuOTU5LTEuMjUsIDMuOTM4LTIuNDYxLCA1LjkyOS0zLjY1IEMgMTMwLjcyNSwxOTAuODY2LCAxMjguMDAsMjA1LjYxMywgMTI4LjAwLDIyMS4wMGMwLjAwLDcwLjY5MiwgNTcuMzA4LDEyOC4wMCwgMTI4LjAwLDEyOC4wMHMgMTI4LjAwLTU3LjMwOCwgMTI4LjAwLTEyOC4wMGMwLjAwLTE1LjM4Ny0yLjcyNS0zMC4xMzQtNy43MDQtNDMuNzk5IEMgMzc4LjI4NiwxNzguMzksIDM4MC4yNjUsMTc5LjYwMiwgMzgyLjIyNSwxODAuODUyeiBNIDI1Ni4wMCwyMDUuMDBjMC4wMCwyNi41MS0yMS40OSw0OC4wMC00OC4wMCw0OC4wMHMtNDguMDAtMjEuNDktNDguMDAtNDguMDBzIDIxLjQ5LTQ4LjAwLCA0OC4wMC00OC4wMCBTIDI1Ni4wMCwxNzguNDksIDI1Ni4wMCwyMDUuMDB6XCI7XHJcbiAgICAvLyB2YXIgZXllQmxvY2tlZFN2Z1BhdGggPSBcIk0gNDE5LjY2MSwxNDguMjA4IEMgNDU4LjQ4MywxNzUuNzIzIDQ5MC4zNDYsMjEyLjc1NCA1MTIuMDAsMjU2LjAwIEMgNDY0LjQzOSwzNTAuOTc5IDM2Ny42NTcsNDE2LjAwIDI1Ni4wMCw0MTYuMDAgQyAyMjQuNzE3LDQxNi4wMCAxOTQuNjA0LDQxMC44OTQgMTY2LjQxMSw0MDEuNDU4IEwgMjA1LjM4OSwzNjIuNDggQyAyMjEuOTE4LDM2Ni4xMyAyMzguODc1LDM2OC4wMCAyNTYuMDAsMzY4LjAwIEMgMzAwLjc3OSwzNjguMDAgMzQ0LjQyNywzNTUuMjU3IDM4Mi4yMjMsMzMxLjE0OCBDIDQxMi4zMDQsMzExLjk2IDQzNy43OTUsMjg2LjI2IDQ1Ni45NDEsMjU1Ljk5OSBDIDQzOC40MTUsMjI2LjcxNiA0MTMuOTM0LDIwMS43MjQgMzg1LjExNiwxODIuNzUyIEwgNDE5LjY2MSwxNDguMjA4IFpNIDI1Ni4wMCwzNDkuMDAgQyAyNDQuNjM4LDM0OS4wMCAyMzMuNjI0LDM0Ny41MTIgMjIzLjEzNiwzNDQuNzMzIEwgMzc5LjcyOSwxODguMTQxIEMgMzgyLjUxLDE5OC42MjcgMzg0LjAwLDIwOS42MzggMzg0LjAwLDIyMS4wMCBDIDM4NC4wMCwyOTEuNjkyIDMyNi42OTIsMzQ5LjAwIDI1Ni4wMCwzNDkuMDAgWk0gNDgwLjAwLDAuMDBsLTI2Ljg2OSwwLjAwIEwgMzQzLjMyNSwxMDkuODA2QyAzMTUuNzg3LDEwMC44NDQsIDI4Ni40NDgsOTYuMDAsIDI1Ni4wMCw5Ni4wMEMgMTQ0LjM0MSw5Ni4wMCwgNDcuNTU5LDE2MS4wMjEsMC4wMCwyNTYuMDAgYyAyMS4zMjksNDIuNTk2LCA1Mi41NjQsNzkuMTU0LCA5MC41OTcsMTA2LjUzNEwwLjAwLDQ1My4xMzFMMC4wMCw0ODAuMDAgbCAyNi44NjksMC4wMCBMIDQ4MC4wMCwyNi44NjlMIDQ4MC4wMCwwLjAwIHogTSAyMDguMDAsMTU3LjAwYyAyNC4wMjIsMC4wMCwgNDMuOTIzLDE3LjY0NywgNDcuNDQ2LDQwLjY4NSBsLTU0Ljc2Miw1NC43NjJDIDE3Ny42NDcsMjQ4LjkyMywgMTYwLjAwLDIyOS4wMjIsIDE2MC4wMCwyMDUuMDBDIDE2MC4wMCwxNzguNDksIDE4MS40OSwxNTcuMDAsIDIwOC4wMCwxNTcuMDB6IE0gNTUuMDU4LDI1Ni4wMCBjIDE5LjE0Ni0zMC4yNjIsIDQ0LjYzNy01NS45NjIsIDc0LjcxNy03NS4xNDhjIDEuOTU5LTEuMjUsIDMuOTM4LTIuNDYxLCA1LjkyOS0zLjY1QyAxMzAuNzI1LDE5MC44NjYsIDEyOC4wMCwyMDUuNjEzLCAxMjguMDAsMjIxLjAwIGMwLjAwLDI5LjI2MiwgOS44MjUsNTYuMjI0LCAyNi4zNDksNzcuNzgxbC0yOS4yNzUsMjkuMjc1QyA5Ny4wMzgsMzA5LjIzNSwgNzMuMTk3LDI4NC42NywgNTUuMDU4LDI1Ni4wMHpcIjtcclxuICAgIC8vIHZhciBwYXBlcmNsaXBTdmdQYXRoID0gXCJNIDM0OC45MTYsMTYzLjUyNGwtMzIuNDc2LTMyLjQ2MUwgMTU0LjAzNSwyOTMuNDM0Yy0yNi45MDcsMjYuODk2LTI2LjkwNyw3MC41MjQsMC4wMCw5Ny40MjIgYyAyNi45MDIsMjYuODk2LCA3MC41MywyNi44OTYsIDk3LjQzNywwLjAwbCAxOTQuODg2LTE5NC44NTRjIDQ0Ljg1Ny00NC44MzEsIDQ0Ljg1Ny0xMTcuNTMxLDAuMDAtMTYyLjM2MyBjLTQ0LjgzMy00NC44NTItMTE3LjU1Ni00NC44NTItMTYyLjM5MSwwLjAwTCA3OS4zMzUsMjM4LjIxMmwgMC4wMTcsMC4wMTZjLTAuMTQ1LDAuMTUyLTAuMzA2LDAuMjg4LTAuNDM4LDAuNDIzIGMtNjIuNTUxLDYyLjU0OC02Mi41NTEsMTYzLjkyOCwwLjAwLDIyNi40NTNjIDYyLjUyNyw2Mi41MjgsIDE2My45MzQsNjIuNTI4LCAyMjYuNDk0LDAuMDBjIDAuMTM3LTAuMTM3LCAwLjI1OC0wLjI4NCwgMC40MS0wLjQzOGwgMC4wMTYsMC4wMTcgbCAxMzkuNjY2LTEzOS42NDZsLTMyLjQ5My0zMi40NkwgMjczLjM1LDQzMi4yMDhsLTAuMDA4LDAuMDAgYy0wLjE0OCwwLjEzNC0wLjI4MiwwLjI4NS0wLjQyMywwLjQyMiBjLTQ0LjUzNyw0NC41MjktMTE2Ljk5LDQ0LjUyOS0xNjEuNTM4LDAuMDBjLTQ0LjUzMS00NC41MjEtNDQuNTMxLTExNi45NjEsMC4wMC0xNjEuNDg5YyAwLjE1Mi0wLjE1MiwgMC4zMDItMC4yOTEsIDAuNDQ0LTAuNDIzbC0wLjAyMy0wLjAzIGwgMjA0LjY0LTIwNC41ODNjIDI2Ljg1Ni0yNi44NjksIDcwLjU3Mi0yNi44NjksIDk3LjQ0MywwLjAwYyAyNi44NTYsMjYuODY3LCAyNi44NTYsNzAuNTc0LDAuMDAsOTcuNDJMIDIxOC45OTksMzU4LjM3NSBjLTguOTY4LDguOTYxLTIzLjUyNyw4Ljk2MS0zMi40ODYsMC4wMGMtOC45NDctOC45NDMtOC45NDctMjMuNTE2LDAuMDAtMzIuNDZMIDM0OC45MTYsMTYzLjUyNHpcIjtcclxuXHJcbiAgICAvLyBmb290ZXIgZm9yIGltYWdlIGV4cG9ydFxyXG4gICAgdmFyIF9leHBvcnRGb290ZXIgPSBudWxsO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gZGVidWcgaW5mbyBmb3IgZ3JvdXBzL2xpbmtzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gZ3JvdXBJbmZvKG9iaikge1xyXG4gICAgICAgIHJldHVybiBvYmouZGF0YS50ZXh0ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdvYmplY3Q6ICcgKyBvYmogKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2tleTogJyArIG9iai5kYXRhLmtleSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnY29udGFpbmluZ0dyb3VwOiAnICsgb2JqLmNvbnRhaW5pbmdHcm91cCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnbGF5b3V0OiAnICsgb2JqLmxheW91dCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZGF0YS5sYXlvdXQ6ICcgKyBvYmouZGF0YS5sYXlvdXQgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3Bvc2l0aW9uOiAnICsgcGFyc2VJbnQob2JqLnBvc2l0aW9uLngsIDEwKSArICcsICcgKyBwYXJzZUludChvYmoucG9zaXRpb24ueSwgMTApICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdmcmVlaGFuZCBwb3NpdGlvbiAoZGF0YS5sb2MpOiAnICsgZ28uUG9pbnQucGFyc2Uob2JqLmRhdGEubG9jKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnd2lkdGgvaGVpZ2h0OiAnICsgcGFyc2VJbnQob2JqLmFjdHVhbEJvdW5kcy53aWR0aCwgMTApICsgJy8nICsgcGFyc2VJbnQob2JqLmFjdHVhbEJvdW5kcy5oZWlnaHQsIDEwKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZ2V0U2NhbGUoKTogJyArIG1hcC5sYXlvdXRzLmdldFNjYWxlKG9iaikgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2lzTGlua0xhYmVsOiAnICsgb2JqLmRhdGEuaXNMaW5rTGFiZWwgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2xhYmVsZWRMaW5rOiAnICsgb2JqLmxhYmVsZWRMaW5rICsgXCJcXG5cIjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBub2RlSW5mbyhvYmopIHtcclxuICAgICAgICByZXR1cm4gJ29iamVjdDogJyArIG9iaiArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAna2V5OiAnICsgb2JqLmRhdGEua2V5ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdwb3NpdGlvbjogJyArIHBhcnNlSW50KG9iai5wb3NpdGlvbi54LCAxMCkgKyAnLCAnICsgcGFyc2VJbnQob2JqLnBvc2l0aW9uLnksIDEwKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnd2lkdGgvaGVpZ2h0OiAnICsgcGFyc2VJbnQob2JqLmFjdHVhbEJvdW5kcy53aWR0aCwgMTApICsgJy8nICsgcGFyc2VJbnQob2JqLmFjdHVhbEJvdW5kcy5oZWlnaHQsIDEwKSArIFwiXFxuXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbGlua0luZm8ob2JqKSB7XHJcbiAgICAgICAgdmFyIHNucG9zID0gbWFwLmxheW91dHMuZ2V0U2FtZU5vZGVzTGlua1Bvc2l0aW9uKG9iaik7XHJcbiAgICAgICAgcmV0dXJuICcnICtcclxuICAgICAgICAgICAgJ29iamVjdDogJyArIG9iaiArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZnJvbU5vZGU6ICcgKyBvYmouZnJvbU5vZGUgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3RvTm9kZTogJyArIG9iai50b05vZGUgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2xhYmVsTm9kZXM6ICcgKyBvYmoubGFiZWxOb2Rlcy5jb3VudCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnbGFiZWxOb2RlSXNWaXNpYmxlOiAnICsgbWFwLmxheW91dHMubGFiZWxOb2RlSXNWaXNpYmxlKG9iaikgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2Zyb21Qb3J0SWQ6ICcgKyBvYmouZnJvbVBvcnRJZCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAndG9Qb3J0SWQ6ICcgKyBvYmoudG9Qb3J0SWQgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2NhdGVnb3J5OiAnICsgKG9iai5kYXRhID8gb2JqLmRhdGEuY2F0ZWdvcnkgOiAnJykgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2NvbnRhaW5pbmdHcm91cDogJyArIG9iai5jb250YWluaW5nR3JvdXAgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2Zyb21BbmRUb05vZGVzQXJlVmlzaWJsZTogJyArIG1hcC5sYXlvdXRzLmZyb21BbmRUb05vZGVzQXJlVmlzaWJsZShvYmopICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdjdXJ2ZTogJyArIG9iai5jdXJ2ZSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnY3VydmluZXNzOiAnICsgb2JqLmN1cnZpbmVzcyArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZnJvbUVuZFNlZ21lbnRMZW5ndGg6ICcgKyBNYXRoLnJvdW5kKG9iai5mcm9tRW5kU2VnbWVudExlbmd0aCkgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3RvRW5kU2VnbWVudExlbmd0aDogJyArIE1hdGgucm91bmQob2JqLnRvRW5kU2VnbWVudExlbmd0aCkgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3NhbWVOb2Rlc0xpbmtQb3NpdGlvbjogJyArIHNucG9zLmluZGV4ICsgJyBvZiAnICsgc25wb3MuY291bnQgKyBcIlxcblwiICtcclxuICAgICAgICAvLysgJ2dlb21ldHJ5OiAnICsgb2JqLmdlb21ldHJ5ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdnZXRMaW5rU3Ryb2tlV2lkdGg6ICcgKyBtYXAubGF5b3V0cy5nZXRMaW5rU3Ryb2tlV2lkdGgob2JqKSArIFwiXFxuXCI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBOQjogdGhlc2UgYXJlIGhlcmUgYmVjYXVzZSB0aGV5IGFyZSBhYm91dCBjb2xvcnM7XHJcbiAgICAvLyBzaW1pbGFyIGZ1bmN0aW9ucyB0aGF0IGFyZSBzY2FsZS1yZWxhdGVkIGFyZSBpbiBsYXlvdXRzLmpzLi4uXHJcbiAgICBmdW5jdGlvbiBnZXRHcm91cFNlbGVjdGlvblN0cm9rZShvYmopIHtcclxuICAgICAgICBpZiAob2JqLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgaWYgKG1hcC5wZXJzcGVjdGl2ZXMuaXNJblBFZGl0b3JNb2RlKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnLmNvbG9ycy5EU1JQLlA7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG1hcC5wZXJzcGVjdGl2ZXMuaXNJbkRFZGl0b3JNb2RlKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnLmNvbG9ycy5EU1JQLkQ7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb25maWcuc2hhcGVzLmJveC5ib3JkZXJDb2xvcjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gY29uZmlnLnNoYXBlcy5ib3guYm9yZGVyQ29sb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE9LLCB0aGlzIGlzbid0IGFib3V0IGNvbG9ycywgYnV0IGl0IHdhbnRzIHRvIGJlIG5lYXIgdGhlIG9uZSBhYm92ZS4uLlxyXG4gICAgZnVuY3Rpb24gZ2V0R3JvdXBTZWxlY3Rpb25TdHJva2VXaWR0aChvYmopIHtcclxuICAgICAgICByZXR1cm4gKG9iai5pc1NlbGVjdGVkID8gY29uZmlnLnNoYXBlcy5ib3guYm9yZGVySGlnaGxpZ2h0V2lkdGggOiBjb25maWcuc2hhcGVzLmJveC5ib3JkZXJXaWR0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2Uob2JqKSB7XHJcbiAgICAgICAgaWYgKG9iai5pc1NlbGVjdGVkIHx8IG9iaiA9PSBtYXAudWkubW91c2VPdmVyTGluaykge1xyXG4gICAgICAgICAgICByZXR1cm4gY29uZmlnLnNoYXBlcy5saW5lLmhpZ2hsaWdodENvbG9yOyAvLyBUT0RPOiBjYW4gUCBsaW5rcyBiZSBzZWxlY3RlZD9cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gY29uZmlnLnNoYXBlcy5saW5lLmNvbG9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGNhbGxiYWNrcyB0byBkZXRlcm1pbmUgd2hlbiB0aGUgY29ybmVycyBzaG91bGQgYmUgdmlzaWJsZVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dEQ29ybmVyKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKG1hcC5wZXJzcGVjdGl2ZXMuaXNERWRpdG9yVGhpbmcoZ3JvdXApKSB7IC8vIG1hcmsgZGlzdGluY3Rpb24gdGhpbmdcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAucGVyc3BlY3RpdmVzLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgaW4gUC9EIGVkaXRvciBtb2RlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcC5wcmVzZW50ZXIuaXNDcmVhdGluZ1RodW1ibmFpbCkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGNhcHR1cmluZyB0aHVtYm5haWxcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoZ3JvdXAgPT0gbWFwLnVpLm1vdXNlT3Zlckdyb3VwKSB8fCAvLyBzaG93IGNvcm5lcnMgb24gbW91c2VvdmVyXHJcbiAgICAgICAgICAgICAgICAoJHNjb3BlLmlzVG91Y2hEZXZpY2UoKSAmJiBncm91cC5pc1NlbGVjdGVkKSB8fFxyXG4gICAgICAgICAgICAgICAgKGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZVNpc3RlcnNPZihncm91cCwgZmFsc2UpICYmIC8vIGRyYWcgdG8gRCAobWFrZSBpdCBzaXN0ZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgIChtYXAudWkuZHJhZ1RhcmdldFBvc2l0aW9uID09PSBudWxsIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbm5vdERyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihncm91cCkpKTsgLy8gbm90IHNob3dpbmcgZHJhZyBhYm92ZS9iZWxvdyBpbmRpY2F0b3JzXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dTQ29ybmVyKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKG1hcC5wZXJzcGVjdGl2ZXMuaXNJblBPckRFZGl0b3JNb2RlKCkpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBpbiBQL0QgZWRpdG9yIG1vZGVcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLnByZXNlbnRlci5pc0NyZWF0aW5nVGh1bWJuYWlsKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgY2FwdHVyaW5nIHRodW1ibmFpbFxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChncm91cCA9PSBtYXAudWkubW91c2VPdmVyR3JvdXApIHx8IC8vIHNob3cgY29ybmVycyBvbiBtb3VzZW92ZXJcclxuICAgICAgICAgICAgICAgICgkc2NvcGUuaXNUb3VjaERldmljZSgpICYmIGdyb3VwLmlzU2VsZWN0ZWQpIHx8XHJcbiAgICAgICAgICAgICAgICAoY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lQ2hpbGRyZW5PZihncm91cCwgZmFsc2UpICYmIC8vIGRyYWcgdG8gUyAobWFrZSBpdCBjaGlsZHJlbilcclxuICAgICAgICAgICAgICAgICAgICAobWFwLnVpLmRyYWdUYXJnZXRQb3NpdGlvbiA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5ub3REcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YoZ3JvdXApKSk7IC8vIG5vdCBzaG93aW5nIGRyYWcgYWJvdmUvYmVsb3cgaW5kaWNhdG9yc1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93UkNvcm5lcihncm91cCkge1xyXG4gICAgICAgIGlmIChtYXAucGVyc3BlY3RpdmVzLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgaW4gUC9EIGVkaXRvciBtb2RlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcC5wcmVzZW50ZXIuaXNDcmVhdGluZ1RodW1ibmFpbCkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGNhcHR1cmluZyB0aHVtYm5haWxcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBncm91cCA9PSBtYXAudWkubW91c2VPdmVyR3JvdXAgfHxcclxuICAgICAgICAgICAgICAgICgkc2NvcGUuaXNUb3VjaERldmljZSgpICYmIGdyb3VwLmlzU2VsZWN0ZWQpOyAvLyBzaG93IGNvcm5lcnMgb24gbW91c2VvdmVyXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dQQ29ybmVyKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKG1hcC5wZXJzcGVjdGl2ZXMuaXNQRWRpdG9yUG9pbnQoZ3JvdXApKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBtYXJrIHBlcnNwZWN0aXZlIHBvaW50XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAucGVyc3BlY3RpdmVzLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgaW4gUC9EIGVkaXRvciBtb2RlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcC5wcmVzZW50ZXIuaXNDcmVhdGluZ1RodW1ibmFpbCkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGNhcHR1cmluZyB0aHVtYm5haWxcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBncm91cCA9PSBtYXAudWkubW91c2VPdmVyR3JvdXAgfHxcclxuICAgICAgICAgICAgICAgICgkc2NvcGUuaXNUb3VjaERldmljZSgpICYmIGdyb3VwLmlzU2VsZWN0ZWQpOyAvLyBzaG93IGNvcm5lcnMgb24gbW91c2VvdmVyXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHdoZW4gYSBQIGxpbmsgc2hvdWxkIGJlIHZpc2libGVcclxuXHJcbiAgICB0aGlzLnNob3dQTGluayA9IGZ1bmN0aW9uIChsaW5rKSB7XHJcbiAgICAgICAgdmFyIG1vZGUgPSBtYXAudWkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLnBlcnNwZWN0aXZlTW9kZTtcclxuICAgICAgICBpZiAobWFwLnBlcnNwZWN0aXZlcy5pc1BFZGl0b3JQb2ludChsaW5rLmZyb21Ob2RlKSkgeyAvLyBzaG93IFAncyB3aGVuIHRoaXMgbGluayBpcyBmcm9tIHRoZSBjdXJyZW50IFBvaW50XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLnBlcnNwZWN0aXZlcy5pc0luUE9yREVkaXRvck1vZGUoKSkgeyAvLyBkb24ndCBzaG93IFAncyBmb3Igbm9uLVBvaW50IHRoaW5ncywgZXZlbiBvbiBtb3VzZW92ZXJcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAobW9kZSA9PSAnbGluZXMnIHx8IG1vZGUgPT0gJ2JvdGgnKSAmJiAobGluay5mcm9tTm9kZSA9PSBtYXAudWkubW91c2VPdmVyR3JvdXAgfHwgbWFwLnBJc0V4cGFuZGVkKGxpbmsuZnJvbU5vZGUpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2hvd1BEb3QgPSBmdW5jdGlvbiAobGluaykge1xyXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBtYXAudWkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLnBlcnNwZWN0aXZlTW9kZSAhPSAnYm90aCc7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoZXNlIGZ1bmN0aW9ucyBhcmUgdXNlZCBpbiB0d28gbW9kZXM6XHJcbiAgICAvLyAxLiB3aXRoIGlzRHJvcHBpbmcgPT0gZmFsc2UsIHRvIGhpZ2hsaWdodCBkcm9wIHRhcmdldHMgYmFzZWQgb24gbWFwLnVpLmRyYWdUYXJnZXRHcm91cCBhbmQgbWFwLnVpLmRyYWdUYXJnZXRQb3NpdGlvbixcclxuICAgIC8vICAgIHdoaWNoIGFyZSBzZXQgb24gbW91c2VEcmFnRW50ZXIvbW91c2VEcmFnbGVhdmVcclxuICAgIC8vIDIuIHdpdGggaXNEcm9wcGluZyA9PSB0cnVlLCBvbiBkcm9wLCB3aGVuIHRoZSBhYm92ZSBpbmRpY2F0b3JzIGhhdmUgZ29uZSBhd2F5LCBidXQgd2Uga25vdyB3aGF0IHRoZSBkcm9wcGVkXHJcbiAgICAvLyAgICBhbmQgdGFyZ2V0IGdyb3VwcyBhcmUsIGFuZCB3ZSB3YW50IHRvIGtub3cgd2hhdCB0aGUgZHJvcCBzaG91bGQgZG8uXHJcblxyXG4gICAgZnVuY3Rpb24gY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lU2lzdGVyc09mKGdyb3VwLCBpc0Ryb3BwaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIChncm91cCA9PSBtYXAudWkuZHJhZ1RhcmdldEdyb3VwIHx8IGlzRHJvcHBpbmcpICYmXHJcbiAgICAgICAgICAgIG1hcC50aGluZ3NTZWxlY3RlZEFyZURlc2NlbmRhbnRzT2YoZ3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZUNoaWxkcmVuT2YoZ3JvdXAsIGlzRHJvcHBpbmcpIHtcclxuICAgICAgICByZXR1cm4gKGdyb3VwID09IG1hcC51aS5kcmFnVGFyZ2V0R3JvdXAgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgIW1hcC50aGluZ3NTZWxlY3RlZEluY2x1ZGVTbGlkZSgpICYmXHJcbiAgICAgICAgICAgICFtYXAudGhpbmdzU2VsZWN0ZWRBcmVEZXNjZW5kYW50c09mKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzaWRlIGlzIG1hcC5MRUZUIG9yIG1hcC5SSUdIVFxyXG4gICAgZnVuY3Rpb24gY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKHRhcmdldEdyb3VwLCBzaWRlLCBpc0Ryb3BwaW5nKSB7XHJcbiAgICAgICAgLy8gbXVzdCBiZSBkcmFnZ2luZyBzaW5nbGUgZ3JvdXBcclxuICAgICAgICB2YXIgZHJhZ2dlZEdyb3VwID0gbWFwLmdldFVuaXF1ZVRoaW5nU2VsZWN0ZWQoKTtcclxuICAgICAgICBpZiAoIWRyYWdnZWRHcm91cCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkcmFnZ2VkIGFuZCB0YXJnZXQgbXVzdCBiZSBTaXN0ZXJzIGluIGludmVudG9yeSBsYXlvdXRcclxuICAgICAgICByZXR1cm4gKHRhcmdldEdyb3VwID09IG1hcC51aS5kcmFnVGFyZ2V0R3JvdXAgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgKG1hcC51aS5kcmFnVGFyZ2V0UG9zaXRpb24gPT0gc2lkZSB8fCBpc0Ryb3BwaW5nKSAmJlxyXG4gICAgICAgICAgICBtYXAubGF5b3V0cy5hcmVTaXN0ZXJzSW5JbnZlbnRvcnlMYXlvdXQoZHJhZ2dlZEdyb3VwLCB0YXJnZXRHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2Fubm90RHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKHRhcmdldEdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuICFjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YodGFyZ2V0R3JvdXAsIG1hcC5MRUZUKSAmJlxyXG4gICAgICAgICAgICAhY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKHRhcmdldEdyb3VwLCBtYXAuUklHSFQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGhhbmRsZSBkcm9wIG9uIG9uZSBvZiB0aGUgdGhyZWUgdGFyZ2V0IHJlZ2lvbnMgKHRvcCwgbWlkZGxlLCBib3R0b20pXHJcbiAgICAvLyBzaWRlIGlzIG1hcC5MRUZUIG9yIG1hcC5SSUdIVFxyXG4gICAgZnVuY3Rpb24gaGFuZGxlR3JvdXBNb3VzZURyb3AoZXZlbnQsIGRyb3BUYXJnZXQsIHNpZGUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdkcmFnQWJvdmVUYXJnZXQubW91c2VEcm9wLCB0YXJnZXQ6ICcgKyBkcm9wVGFyZ2V0ICsgJywgcGFydDogJyArIGRyb3BUYXJnZXQgLnBhcnQgKyAnLCBzaG93OiAnICsgc2hvdyk7XHJcbiAgICAgICAgaWYgKHNpZGUgIT09IG51bGwgJiYgY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKGRyb3BUYXJnZXQucGFydCwgc2lkZSwgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgbWFwLmFkZFNlbGVjdGVkVGhpbmdBc09yZGVyZWRTaXN0ZXJPZihkcm9wVGFyZ2V0LnBhcnQsIHNpZGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lU2lzdGVyc09mKGRyb3BUYXJnZXQucGFydCwgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgbWFwLmFkZFNlbGVjdGVkVGhpbmdzQXNTaXN0ZXJzT2YoZHJvcFRhcmdldC5wYXJ0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZUNoaWxkcmVuT2YoZHJvcFRhcmdldC5wYXJ0LCB0cnVlKSkge1xyXG4gICAgICAgICAgICBtYXAuYWRkU2VsZWN0ZWRUaGluZ3NBc0NoaWxkcmVuT2YoZHJvcFRhcmdldC5wYXJ0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gd2hlbiB0byBzaG93IHRoZSBSLXRoaW5nIGtub2Igb24gYSBsaW5rXHJcbiAgICBmdW5jdGlvbiBzaG93S25vYihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgPT0gbWFwLnVpLm1vdXNlT3Zlckxpbms7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLSBjb21wb25lbnRzIGZvciBtYWluIGdyb3VwIHRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHNob3cgb25seSB3aGVuIHN5c3RlbSBpcyBjb2xsYXBzZWRcclxuICAgIGZ1bmN0aW9uIHNDb2xsYXBzZWRNYXJrZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIXNob3dTQ29ybmVyKG9iaikgJiYgb2JqLm1lbWJlclBhcnRzLmNvdW50ID4gMCAmJiAhb2JqLmlzU3ViR3JhcGhFeHBhbmRlZDtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg1LCA4OCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNSwgMTApLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRiBNMCAwIEw1IDUgTDAgMTB6XCIsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogY29uZmlnLmNvbG9ycy5kYXJrR3JleSxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGF0dGFjaG1lbnRQYXBlckNsaXAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmRhdGEuYXR0YWNobWVudHMgIT09IG51bGwgJiYgb2JqLmRhdGEuYXR0YWNobWVudHMgIT09IHVuZGVmaW5lZCAmJiBvYmouZGF0YS5hdHRhY2htZW50cy5sZW5ndGggPiAwO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnZ2VvbWV0cnknLCAnJywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdvLkdlb21ldHJ5LnBhcnNlKGNvbmZpZy5zaGFwZXMucGFwZXJDbGlwLnN2ZywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdkZXNpcmVkU2l6ZScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGdvLlNpemUoNTEyLCA1MTIpOyAvLyBOQjogdGhlIHR3byBpY29ucyBkb24ndCBzY2FsZSB0byB0aGUgc2FtZSBwcm9wb3J0aW9ucyBmb3Igc29tZSByZWFzb24gLSA/P1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDQ2LCA4NSksXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogMC4wMixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogY29uZmlnLmNvbG9ycy5ibGFjayxcclxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbmZpZy5jb2xvcnMuYmxhY2ssXHJcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGlwIGNsaWNrZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXAudWkudG9nZ2xlVGFiKG1hcC51aS5UQUJfSURfQVRUQUNITUVOVFMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcEV5ZWJhbGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFwLnBlcnNwZWN0aXZlcy5pc1BlcnNwZWN0aXZlUG9pbnQob2JqKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2dlb21ldHJ5JywgJycsIGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnby5HZW9tZXRyeS5wYXJzZShtYXAucElzRXhwYW5kZWQob2JqKSA/IGNvbmZpZy5zaGFwZXMuZXllLnN2ZyA6IGNvbmZpZy5zaGFwZXMuZXllLnN2Z0Jsb2NrZWQsIHRydWUpO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnZGVzaXJlZFNpemUnLCAnJywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBnby5TaXplKDUxMiwgbWFwLnBJc0V4cGFuZGVkKG9iaikgPyA0NDAgOiA1MTIpOyAvLyBOQjogdGhlIHR3byBpY29ucyBkb24ndCBzY2FsZSB0byB0aGUgc2FtZSBwcm9wb3J0aW9ucyBmb3Igc29tZSByZWFzb24gLSA/P1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDg3LCA0KSxcclxuICAgICAgICAgICAgICAgIHNjYWxlOiAwLjAyLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBjb25maWcuY29sb3JzLmJsYWNrLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogY29uZmlnLmNvbG9ycy5ibGFjayxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUCBleHBhbnNpb24gaW5kaWNhdG9yIC0gdGhpcyBzaG93cyB3aGVuIHRoZSBQIGNvcm5lciBpcyBub3QgdmlzaWJsZSwgYW5kIG9ubHkgaWYgdGhlIHRoaW5nIGlzIGEgcGVyc3BlY3RpdmUgcG9pbnRcclxuICAgIGZ1bmN0aW9uIHBvaW50TWFya2VyKCkge1xyXG4gICAgICAgIHJldHVybiBwRXllYmFsbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFAgdmlldyBpbmRpY2F0b3JcclxuICAgIGZ1bmN0aW9uIHZpZXdNYXJrZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFZpZXdNYXJrZXJGaWxsKG9iaikge1xyXG4gICAgICAgIHZhciB3ZWlnaHQgPSBtYXAucGVyc3BlY3RpdmVzLmdldFBlcnNwZWN0aXZlVmlld1dlaWdodChvYmopO1xyXG5cclxuICAgICAgICBpZiAod2VpZ2h0ID09IDMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5jb2xvcnMuUC5kYXJrO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2VpZ2h0ID09IDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5jb2xvcnMuRFNSUC5QO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2VpZ2h0ID09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5jb2xvcnMuUC5saWdodDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJ0cmFuc3BhcmVudFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0gaGFuZGxlcnMgZm9yIG1vdXNlIGRyYWcvZHJvcCBhY3Rpb25zIG9uIGdyb3Vwcywgd2hpY2ggbmVlZCB0byBiZSByZXBsaWNhdGVkIG9uIGRpZmZlcmVudCB0YXJnZXQgcGFydHMgLS0tLS0tLVxyXG5cclxuICAgIC8vIHBvc2l0aW9uIGlzIG1hcC5MRUZULCBudWxsLCBvciBtYXAuUklHSFRcclxuICAgIHRoaXMuZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIgPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbW91c2VEcmFnRW50ZXIsIGUuZHA6ICcgKyBldmVudC5kb2N1bWVudFBvaW50ICsgJywgdGFyZ2V0LnBhcnQ6ICcgKyB0YXJnZXQucGFydCArICcsIHRhcmdldCBib3VuZHM6ICcgKyB0YXJnZXQuYWN0dWFsQm91bmRzKTtcclxuICAgICAgICAgICAgbWFwLnVpLmRyYWdUYXJnZXRHcm91cCA9IHRhcmdldC5wYXJ0O1xyXG4gICAgICAgICAgICBtYXAudWkuZHJhZ1RhcmdldFBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICBtYXAudWkuZHJhZ1RhcmdldEdyb3VwID0gbnVsbDtcclxuICAgICAgICBtYXAudWkuZHJhZ1RhcmdldFBvc2l0aW9uID0gbnVsbDtcclxuICAgICAgICBtYXAuZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldEdyb3VwTW91c2VEcm9wSGFuZGxlciA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQsIGRyb3BUYXJnZXQpIHtcclxuICAgICAgICAgICAgaGFuZGxlR3JvdXBNb3VzZURyb3AoZXZlbnQsIGRyb3BUYXJnZXQsIHBvc2l0aW9uKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlYWN0ID0gcmVxdWlyZSgnLi9idXR0b25zL2J1dHRvbkNsaWNrJylcclxuICAgIHZhciBncm91cENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgLy8gaGFuZGxlIHNpbmdsZSBvciBkb3VibGUgY2xpY2tcclxuICAgICAgICByZWFjdChtYXAsICcnLCB0YXJnZXQpXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gZ3JvdXAvVGhpbmcgdGVtcGxhdGUgLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB2YXIgbm9kZUhvdmVyQWRvcm5tZW50ID1cclxuICAgICAgICBtayhnby5BZG9ybm1lbnQsIFwiU3BvdFwiLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcInRyYW5zcGFyZW50XCIsXHJcbiAgICAgICAgICAgICAgICBtb3VzZUxlYXZlOiBmdW5jdGlvbiAoZSwgb2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFkID0gb2JqLnBhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYWQuYWRvcm5lZFBhcnQucmVtb3ZlQWRvcm5tZW50KFwibW91c2VIb3ZlclwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uUGxhY2Vob2xkZXIsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCJ0cmFuc3BhcmVudFwiLCAgLy8gdG8gYWxsb3cgdGhpcyBQbGFjZWhvbGRlciB0byBiZSBcInNlZW5cIiBieSBtb3VzZSBldmVudHNcclxuICAgICAgICAgICAgICAgICAgICBpc0FjdGlvbmFibGU6IHRydWUsICAvLyBuZWVkZWQgYmVjYXVzZSB0aGlzIGlzIGluIGEgdGVtcG9yYXJ5IExheWVyXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIChlLCBvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBvYmoucGFydC5hZG9ybmVkUGFydDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5kaWFncmFtLnNlbGVjdChub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSxcclxuXHJcbiAgICAgICAgICAgIHJlcXVpcmUoJy4vYnV0dG9ucy9kJykobWFwKSxcclxuICAgICAgICAgICAgcmVxdWlyZSgnLi9idXR0b25zL3MnKShtYXApLFxyXG4gICAgICAgICAgICByZXF1aXJlKCcuL2J1dHRvbnMvcicpKG1hcCksXHJcbiAgICAgICAgICAgIHJlcXVpcmUoJy4vYnV0dG9ucy9wJykobWFwKVxyXG5cclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGNvbnN0IGdyb3VwU2VsZWN0aW9uQWRvcm5tZW50VGVtcGxhdGUgPSBtayhnby5BZG9ybm1lbnQsIFwiU3BvdFwiLFxyXG4gICAgICAgIG1rKGdvLlBhbmVsLCBcIlNwb3RcIixcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiQ2lyY2xlXCIsIHtcclxuICAgICAgICAgICAgICAgIGZpbGw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IFwiZG9kZ2VyYmx1ZVwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDRcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG1rKGdvLlBsYWNlaG9sZGVyKSAgLy8gdGhpcyByZXByZXNlbnRzIHRoZSBzZWxlY3RlZCBOb2RlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG5cclxuICAgIHRoaXMuZ3JvdXBUZW1wbGF0ZSA9XHJcbiAgICBtayhnby5Hcm91cCwgZ28uUGFuZWwuVmVydGljYWwsXHJcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJsYXlvdXRcIiwgXCJsYXlvdXRcIiwgZnVuY3Rpb24gKGxheW91dE5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hcC5sYXlvdXRzLmdldExheW91dChsYXlvdXROYW1lKTtcclxuICAgICAgICB9KSxcclxuICAgICAgICBuZXcgZ28uQmluZGluZyhcIm1vdmFibGVcIiwgXCJcIiwgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gIW9iai5pc0xpbmtMYWJlbDtcclxuICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwiaXNTdWJHcmFwaEV4cGFuZGVkXCIsIFwic0V4cGFuZGVkXCIpLFxyXG4gICAgICAgIC8vIGRpbSB0aGUgdGhpbmcgaWYgaXQncyBiZWluZyBkcmFnZ2VkIG92ZXIgYW5vdGhlciB0aGluZyAoZHJvcCB0byBzaXN0ZXIvY2hpbGQpXHJcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gKG9iai5pc1NlbGVjdGVkICYmIG1hcC51aS5kcmFnVGFyZ2V0R3JvdXAgPyAwLjI1IDogMSk7XHJcbiAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICBsb2NhdGlvbk9iamVjdE5hbWU6IFwibWFpbnBhbmVsXCIsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uU3BvdDogZ28uU3BvdC5Ub3BMZWZ0LFxyXG4gICAgICAgICAgICBzZWxlY3Rpb25BZG9ybmVkOiB0cnVlLFxyXG4gICAgICAgICAgICBpc1N1YkdyYXBoRXhwYW5kZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGxheWVyTmFtZTogJ0ZvcmVncm91bmQnLFxyXG4gICAgICAgICAgICAvLyBoaWdobGlnaHQgY29ybmVyc1xyXG4gICAgICAgICAgICBtb3VzZUVudGVyOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgb2JqMikge1xyXG4gICAgICAgICAgICAgICAgbWFwLnVpLm1vdXNlT3Zlckdyb3VwID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgbWFwLmRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gdW5oaWdobGlnaHQgY29ybmVyc1xyXG4gICAgICAgICAgICBtb3VzZUxlYXZlOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgb2JqMikge1xyXG4gICAgICAgICAgICAgICAgbWFwLnVpLm1vdXNlT3Zlckdyb3VwID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIG1hcC5kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29udGFpbmluZ0dyb3VwQ2hhbmdlZDogZnVuY3Rpb24ocGFydCwgb2xkZ3JvdXAsIG5ld2dyb3VwKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBtYXAuZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbGV2ZWwnLCBtYXAuY29tcHV0ZUxldmVsKHBhcnQpKTtcclxuICAgICAgICAgICAgLy8gICAgIC8vcGFydC51cGRhdGVUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG5cclxuICAgICAgICBtayhnby5QYW5lbCwgZ28uUGFuZWwuU3BvdCwge1xyXG4gICAgICAgICAgICBtb3VzZUhvdmVyOiBmdW5jdGlvbiAoZSwgb2JqKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IG9iai5wYXJ0O1xyXG4gICAgICAgICAgICAgICAgbm9kZUhvdmVyQWRvcm5tZW50LmFkb3JuZWRPYmplY3QgPSBub2RlLmZpbmRPYmplY3QoJ2RyYWdhcmVhJylcclxuICAgICAgICAgICAgICAgIG5vZGUuYWRkQWRvcm5tZW50KFwibW91c2VIb3ZlclwiLCBub2RlSG92ZXJBZG9ybm1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAubGF5b3V0cy5nZXRTY2FsZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgLy8gZHJhZyBhcmVhXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIkNpcmNsZVwiLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImRyYWdhcmVhXCIsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDUwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA1MCxcclxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbmZpZy5zaGFwZXMuYm94LmZpbGxDb2xvcixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgICBwb3J0SWQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlRHVwbGljYXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJhZ0VudGVyOiBzZWxmLmdldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKG1hcC5MRUZUKSxcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJhZ0xlYXZlOiBzZWxmLmdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcm9wOiBzZWxmLmdldEdyb3VwTW91c2VEcm9wSGFuZGxlcihtYXAuTEVGVCksXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2hvdyBkZWJ1ZyBpbmZvXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhncm91cEluZm8odGFyZ2V0LnBhcnQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3N0cm9rZScsICcnLCBnZXRHcm91cFNlbGVjdGlvblN0cm9rZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2VXaWR0aCcsICcnLCBnZXRHcm91cFNlbGVjdGlvblN0cm9rZVdpZHRoKS5vZk9iamVjdCgpXHJcblxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsICAvLyBwcm92aWRlIGludGVyaW9yIGFyZWEgd2hlcmUgdGhlIHVzZXIgY2FuIGdyYWIgdGhlIG5vZGVcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3Bvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogXCJ0cmFuc3BhcmVudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNTAsIDUwKSxcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IFwibW92ZVwiXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJ0ZXh0XCIsIFwidGV4dFwiKS5tYWtlVHdvV2F5KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcImFsaWdubWVudFwiLCBcImFsaWdubWVudFwiKS5tYWtlVHdvV2F5KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInZpc2libGVcIiwgXCJcIiwgZnVuY3Rpb24gKGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWx3YXlzIHNob3cgdGV4dCBpbnNpZGUgYm94IGZvciBSLXRoaW5ncywgYmVjYXVzZSBleHRlcm5hbCB0ZXh0IHdpbGwgdGhyb3cgb2ZmIGxheW91dFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IGNvbmZpZy5zaGFwZXMubGFiZWwuY3Vyc29yLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQ6IGNvbmZpZy5zaGFwZXMubGFiZWwuZm9udCxcclxuICAgICAgICAgICAgICAgICAgICBpc011bHRpbGluZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBfaXNOb2RlTGFiZWw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGdyb3VwQ2xpY2tIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZ3JvdXBJbmZvKHRhcmdldC5wYXJ0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgLy8gdGhlIHBsYWNlaG9sZGVyIG5vcm1hbGx5IGhvbGRzIHRoZSBjaGlsZCBub2RlcywgYnV0IHdlIGp1c3QgdXNlIGEgZHVtbXkgcGxhY2Vob2xkZXJcclxuICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICBuYW1lOiBcInBsYWNlaG9sZGVyXCIsXHJcbiAgICAgICAgICAgIGZpbGw6IFwidHJhbnNwYXJlbnRcIixcclxuICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMCwgMClcclxuICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG5cclxuICAgIHRoaXMuZ3JvdXBUZW1wbGF0ZS5zZWxlY3Rpb25BZG9ybm1lbnRUZW1wbGF0ZSA9IG1rKGdvLkFkb3JubWVudCwgXCJTcG90XCIsXHJcbiAgICAgICAgbWsoZ28uUGFuZWwsIFwiQXV0b1wiLFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJDaXJjbGVcIiwge1xyXG4gICAgICAgICAgICAgICAgZmlsbDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAwXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtayhnby5QbGFjZWhvbGRlcikgIC8vIHRoaXMgcmVwcmVzZW50cyB0aGUgc2VsZWN0ZWQgTm9kZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAvLyAgICAgLy9QXHJcbiAgICAvLyAgICAgcmVxdWlyZSgnLi9idXR0b25zL3AnKShtYXApLFxyXG4gICAgLy8gICAgIC8vRFxyXG4gICAgLy8gICAgIHJlcXVpcmUoJy4vYnV0dG9ucy9kJykobWFwKSxcclxuICAgIC8vICAgICAvL1NcclxuICAgIC8vICAgICByZXF1aXJlKCcuL2J1dHRvbnMvcycpKG1hcCksXHJcbiAgICAvLyAgICAgLy9SXHJcbiAgICAvLyAgICAgcmVxdWlyZSgnLi9idXR0b25zL3InKShtYXApXHJcbiAgICAvLyAgICAgKTsgLy8gZW5kIEFkb3JubWVudFxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gbGluayB0ZW1wbGF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLnNoYXBlcyA9IFsndG8nLCAnZnJvbScsICd0b0Zyb20nLCAnbm9BcnJvd3MnXVxyXG5cclxuICAgIHRoaXMuZ2V0TmV4dFJTaGFwZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgY3VycmVudCA9IHNlbGYuX2N1cnJlbnRSU2hhcGU7XHJcbiAgICAgICAgbGV0IG5leHQgPSBzZWxmLnNoYXBlc1swXTtcclxuICAgICAgICBpZiAoY3VycmVudCkge1xyXG4gICAgICAgICAgICBsZXQgaWR4ID0gc2VsZi5zaGFwZXMuaW5kZXhPZihjdXJyZW50KSArIDE7XHJcbiAgICAgICAgICAgIGlmIChpZHggPj0gc2VsZi5zaGFwZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZHggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5leHQgPSBzZWxmLnNoYXBlc1tpZHhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLl9jdXJyZW50UlNoYXBlID0gbmV4dDtcclxuICAgICAgICByZXR1cm4gbmV4dDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jdXJyZW50U2VsZWN0ZWRMaW5rID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmxpbmtUZW1wbGF0ZSA9XHJcbiAgICBtayhnby5MaW5rLCB7XHJcbiAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXHJcbiAgICAgICAgbGF5ZXJOYW1lOiAnJyxcclxuICAgICAgICAvL3JvdXRpbmc6IGdvLkxpbmsuT3J0aG9nb25hbCxcclxuICAgICAgICByZWxpbmthYmxlRnJvbTogdHJ1ZSxcclxuICAgICAgICByZWxpbmthYmxlVG86IHRydWUsXHJcbiAgICAgICAgc21vb3RobmVzczogMS4wLFxyXG4gICAgICAgIGFkanVzdGluZzogZ28uTGluay5TdHJldGNoLFxyXG4gICAgICAgIHJlc2hhcGFibGU6IHRydWUsXHJcbiAgICAgICAgbW91c2VFbnRlcjogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICAgICAgbWFwLnVpLm1vdXNlT3ZlckxpbmsgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtb3VzZUxlYXZlOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgb2JqMikge1xyXG4gICAgICAgICAgICBtYXAudWkubW91c2VPdmVyTGluayA9IG51bGw7XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtb3VzZURyYWdFbnRlcjogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQsIGRyYWdPYmplY3QpIHtcclxuICAgICAgICAgICAgbWFwLnVpLm1vdXNlT3ZlckxpbmsgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtb3VzZURyYWdMZWF2ZTogZnVuY3Rpb24gKGV2ZW50LCBkcm9wVGFyZ2V0LCBkcmFnT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIG1hcC51aS5tb3VzZU92ZXJMaW5rID0gbnVsbDtcclxuICAgICAgICAgICAgbWFwLmRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1vdXNlRHJvcDogZnVuY3Rpb24gKGV2ZW50LCBkcm9wVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0cyA9IG1hcC5kaWFncmFtLnNlbGVjdGlvbjtcclxuICAgICAgICAgICAgaWYgKHBhcnRzICYmIHBhcnRzLmNvdW50ID09IDEgJiYgcGFydHMuZmlyc3QoKSBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuYWRkVGhpbmdBc1JUaGluZyhwYXJ0cy5maXJzdCgpLCBkcm9wVGFyZ2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLl9jdXJyZW50U2VsZWN0ZWRMaW5rID09IHRhcmdldC5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNoYXBlID0gc2VsZi5nZXROZXh0UlNoYXBlKCk7XHJcbiAgICAgICAgICAgICAgICBtYXAudWkuc2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzRGlyZWN0aW9uKHNoYXBlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuX2N1cnJlbnRTZWxlY3RlZExpbmsgPSB0YXJnZXQucG9zaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRvdWJsZUNsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUlRoaW5nKHRhcmdldCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGxpbmtJbmZvKHRhcmdldCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgICAgICBuZXcgZ28uQmluZGluZyhcInBvaW50c1wiKS5tYWtlVHdvV2F5KCksXHJcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJjdXJ2aW5lc3NcIiwgXCJjdXJ2aW5lc3NcIiksXHJcbiAgICAgICAgbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2UpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic3Ryb2tlV2lkdGhcIiwgXCJcIiwgbWFwLmxheW91dHMuZ2V0TGlua1N0cm9rZVdpZHRoKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIkxJTktTSEFQRVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAvLyBzaG93IHRvL2Zyb20gYXJyb3doZWFkcyBiYXNlZCBvbiBsaW5rIFwidHlwZVwiIGF0dHJpYnV0ZVxyXG4gICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgIGZyb21BcnJvdzogXCJCYWNrd2FyZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2ZpbGwnLCAnJywgZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2UpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2UpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic2NhbGVcIiwgXCJcIiwgbWFwLmxheW91dHMuZ2V0QXJyb3doZWFkU2NhbGUpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJ3R5cGUnLCBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgPT0gJ2Zyb20nIHx8IHQgPT0gJ3RvRnJvbSc7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgdG9BcnJvdzogXCJTdGFuZGFyZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2ZpbGwnLCAnJywgZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2UpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2UpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic2NhbGVcIiwgXCJcIiwgbWFwLmxheW91dHMuZ2V0QXJyb3doZWFkU2NhbGUpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJ3R5cGUnLCBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgPT0gJ3RvJyB8fCB0ID09ICd0b0Zyb20nO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApLFxyXG5cclxuICAgICAgICBtayhnby5QYW5lbCwgZ28uUGFuZWwuQXV0bywgLy8gbGluayBsYWJlbCBcImtub2JcIlxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dLbm9iKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic2NhbGVcIiwgXCJcIiwgbWFwLmxheW91dHMuZ2V0QXJyb3doZWFkU2NhbGUpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBmaWd1cmU6IFwiRWxsaXBzZVwiLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogY29uZmlnLmNvbG9ycy5EU1JQLkQsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IGNvbmZpZy5jb2xvcnMuRFNSUC5ELFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEyLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICB0aGlzLnBMaW5rVGVtcGxhdGUgPVxyXG4gICAgbWsoZ28uTGluayxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGN1cnZlOiBnby5MaW5rLkJlemllcixcclxuICAgICAgICAgICAgYWRqdXN0aW5nOiBnby5MaW5rLlN0cmV0Y2gsXHJcbiAgICAgICAgICAgIHJlc2hhcGFibGU6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwicG9pbnRzXCIpLm1ha2VUd29XYXkoKSxcclxuICAgICAgICBuZXcgZ28uQmluZGluZyhcImN1cnZpbmVzc1wiLCBcImN1cnZpbmVzc1wiKSxcclxuICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoc2VsZi5zaG93UExpbmsob2JqKSA/IDEgOiAwKTtcclxuICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgIHNlbGVjdGlvbkFkb3JuZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBsYXllck5hbWU6ICdCYWNrZ3JvdW5kJywgLy8gbWFrZSBQIGxpbmtzIGZhbGwgYmVoaW5kIFIgbGlua3NcclxuICAgICAgICAgICAgcm91dGluZzogZ28uTGluay5Ob3JtYWwsXHJcbiAgICAgICAgICAgIGN1cnZlOiBnby5MaW5rLkJlemllcixcclxuICAgICAgICAgICAgYWRqdXN0aW5nOiBnby5MaW5rLlN0cmV0Y2gsXHJcbiAgICAgICAgICAgIHJlc2hhcGFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhsaW5rSW5mbyh0YXJnZXQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic3Ryb2tlV2lkdGhcIiwgXCJcIiwgbWFwLmxheW91dHMuZ2V0TGlua1N0cm9rZVdpZHRoKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIkxJTktTSEFQRVwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBjb25maWcuY29sb3JzLlAubGlnaHQsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBjb25maWcuY29sb3JzLlAubGlnaHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICAvLyBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiAoc2VsZi5zaG93UERvdChvYmopID8gMSA6IDApO1xyXG4gICAgICAgICAgICAvLyB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInNjYWxlXCIsIFwiXCIsIG1hcC5sYXlvdXRzLmdldEFycm93aGVhZFNjYWxlKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICB0b0Fycm93OiBcIkNpcmNsZVwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBjb25maWcuY29sb3JzLlAubGlnaHQsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBjb25maWcuY29sb3JzLlAubGlnaHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICB0aGlzLmRMaW5rVGVtcGxhdGUgPVxyXG4gICAgbWsoZ28uTGluaywge1xyXG4gICAgICAgIHNlbGVjdGFibGU6IGZhbHNlXHJcbiAgICB9LFxyXG4gICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiTElOS1NIQVBFXCIsXHJcbiAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSB0ZW1wb3JhcnkgbGluay9ub2RlIHRlbXBsYXRlcywgZm9yIHVzZSB3aGVuIGRyYWdnaW5nIHRvIGNyZWF0ZSBSL1AgbGluZXMgLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGRlZmluZSBpbml0aWFsIHRlbXBvcmFyeSBsaW5rIHRlbXBsYXRlcyAtIHRoZXNlIHdpbGwgYmUgbW9kaWZpZWQgd2hlbiBoYW5kbGVQb3J0VGFyZ2V0ZWQgaXMgY2FsbGVkXHJcbiAgICB0aGlzLnNldFRlbXBvcmFyeUxpbmtUZW1wbGF0ZXMgPSBmdW5jdGlvbiAodG9vbCkge1xyXG4gICAgICAgIHRvb2wudGVtcG9yYXJ5TGluayA9IG1ha2VUZW1wb3JhcnlMaW5rVGVtcGxhdGUoKTtcclxuICAgICAgICB0b29sLnRlbXBvcmFyeUZyb21Ob2RlID0gbWFrZVRlbXBvcmFyeU5vZGVUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRvb2wudGVtcG9yYXJ5VG9Ob2RlID0gbWFrZVRlbXBvcmFyeU5vZGVUZW1wbGF0ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBtYWtlVGVtcG9yYXJ5TGlua1RlbXBsYXRlKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5MaW5rLCB7XHJcbiAgICAgICAgICAgIGxheWVyTmFtZTogXCJUb29sXCIsXHJcbiAgICAgICAgICAgIGN1cnZlOiBnby5MaW5rLkJlemllclxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnTElOS1NIQVBFJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAyXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWFrZVRlbXBvcmFyeU5vZGVUZW1wbGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uR3JvdXAsIHtcclxuICAgICAgICAgICAgbGF5ZXJOYW1lOiBcIlRvb2xcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIkNpcmNsZVwiLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnYm9yZGVyJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAzLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogbnVsbFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNoYW5nZSBjb2xvciBhbmQgcG9ydElkIG9mIHRlbXBvcmFyeSBsaW5rIHRlbXBsYXRlcyBiYXNlZCBvbiB0aGUgdHlwZSBvZiBsaW5rIGJlaW5nIGNyZWF0ZWQvcmVsaW5rZWRcclxuICAgIHRoaXMuaGFuZGxlUG9ydFRhcmdldGVkID0gZnVuY3Rpb24gKGRpYWdyYW0sIHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCkge1xyXG4gICAgICAgIC8vIC8vY29uc29sZS5sb2coJ3BvcnRUYXJnZXRlZCwgcmVhbHBvcnQ6ICcgKyAocmVhbHBvcnQgPyByZWFscG9ydC5uYW1lIDogJycpICsgJywgdGVtcHBvcnQ6ICcgKyAodGVtcHBvcnQgPyB0ZW1wcG9ydC5uYW1lIDogJycpXHJcbiAgICAgICAgLy8gICAgICsgJywgb3JpZ2luYWxGcm9tUG9ydDogJyArIChsdG9vbC5vcmlnaW5hbEZyb21Qb3J0ID8gbHRvb2wub3JpZ2luYWxGcm9tUG9ydC5uYW1lIDogJycpICsgJywgb3JpZ2luYWxUb1BvcnQ6ICcgKyBsdG9vbC5vcmlnaW5hbFRvUG9ydCk7XHJcblxyXG4gICAgICAgIGxldCB0b29sID0gZGlhZ3JhbS50b29sTWFuYWdlci5kcmFnZ2luZ1Rvb2w7XHJcbiAgICAgICAgdmFyIGxpbmtTaGFwZSA9IHRvb2wudGVtcG9yYXJ5TGluay5maW5kT2JqZWN0KCdMSU5LU0hBUEUnKTtcclxuICAgICAgICB2YXIgZnJvbUJvcmRlciA9IHRvb2wudGVtcG9yYXJ5RnJvbU5vZGUuZmluZE9iamVjdCgnYm9yZGVyJyk7XHJcbiAgICAgICAgdmFyIHRvQm9yZGVyID0gdG9vbC50ZW1wb3JhcnlUb05vZGUuZmluZE9iamVjdCgnYm9yZGVyJyk7XHJcblxyXG4gICAgICAgIGlmICh0b29sLl9kcmFnRGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodG9vbC5fZHJhZ0RhdGEucG9ydElkID09IENPTlNUQU5UUy5EU1JQLlApIHtcclxuICAgICAgICAgICAgICAgIGxpbmtTaGFwZS5zdHJva2UgPSBjb25maWcuY29sb3JzLkRTUlAuUDtcclxuICAgICAgICAgICAgICAgIGZyb21Cb3JkZXIuc3Ryb2tlID0gY29uZmlnLmNvbG9ycy5EU1JQLlA7XHJcbiAgICAgICAgICAgICAgICB0b0JvcmRlci5zdHJva2UgPSBjb25maWcuY29sb3JzLkRTUlAuUDtcclxuICAgICAgICAgICAgICAgIGZyb21Cb3JkZXIucG9ydElkID0gQ09OU1RBTlRTLkRTUlAuUDtcclxuICAgICAgICAgICAgICAgIHRvQm9yZGVyLnBvcnRJZCA9IENPTlNUQU5UUy5EU1JQLlA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsaW5rU2hhcGUuc3Ryb2tlID0gY29uZmlnLmNvbG9ycy5EU1JQLlI7XHJcbiAgICAgICAgICAgICAgICBmcm9tQm9yZGVyLnN0cm9rZSA9IGNvbmZpZy5jb2xvcnMuRFNSUC5SO1xyXG4gICAgICAgICAgICAgICAgdG9Cb3JkZXIuc3Ryb2tlID0gY29uZmlnLmNvbG9ycy5EU1JQLlI7XHJcbiAgICAgICAgICAgICAgICBmcm9tQm9yZGVyLnBvcnRJZCA9IENPTlNUQU5UUy5EU1JQLlI7XHJcbiAgICAgICAgICAgICAgICB0b0JvcmRlci5wb3J0SWQgPSBDT05TVEFOVFMuRFNSUC5SO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRlbXBub2RlLnNjYWxlID0gbWFwLmxheW91dHMuZ2V0U2NhbGUocmVhbG5vZGUpO1xyXG5cclxuICAgICAgICAgICAgdG9vbC5fZHJhZ0RhdGEgPSBudWxsO1xyXG4gICAgICAgICAgICBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiRHJhZ1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHByZXZlbnQgZHVwbGljYXRlIENPTlNUQU5UUy5EU1JQLlAgbGlua3MgaW4gdGhlIHNhbWUgZGlyZWN0aW9uIGJldHdlZW4gdGhlIHNhbWUgdHdvIHRoaW5nc1xyXG4gICAgdGhpcy52YWxpZGF0ZUxpbmsgPSBmdW5jdGlvbiAoZnJvbU5vZGUsIGZyb21Qb3J0LCB0b05vZGUsIHRvUG9ydCkge1xyXG4gICAgICAgIC8vIHRoZSBQIHBvcnQgaXMgb24gdG9wIG9mIHRoZSBSIHBvcnQsIHNvIGJvdGggUCBhbmQgUiBsaW5rcyBnZXQgdGhlIHRvUG9ydCBzZXQgdG8gUiBieSBkZWZhdWx0LlxyXG4gICAgICAgIGlmIChmcm9tUG9ydC5wb3J0SWQgPT0gQ09OU1RBTlRTLkRTUlAuUCkge1xyXG4gICAgICAgICAgICAvLyBOQjogZmluZExpbmtzVG8gd291bGQgYmUgc2ltcGxlciwgYnV0IGl0IGRvZXNuJ3Qgc2VlbSB0byB3b3JrLi4uICg/KVxyXG4gICAgICAgICAgICB2YXIgcExpbmtzID0gdG9Ob2RlLmZpbmRMaW5rc0JldHdlZW4oZnJvbU5vZGUsIENPTlNUQU5UUy5EU1JQLlAsIENPTlNUQU5UUy5EU1JQLlApO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd2YWxpZGF0ZUxpbmssIHBMaW5rcyBmcm9tICcgKyBmcm9tTm9kZSArICc6JyArIGZyb21Qb3J0ICsgJyB0byAnICsgdG9Ob2RlICsgJzonICsgdG9Qb3J0ICsgJyA9ICcgKyBwTGlua3MuY291bnQpO1xyXG4gICAgICAgICAgICBpZiAocExpbmtzLmNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocExpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwTGluayA9IHBMaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocExpbmsuZnJvbU5vZGUgPT0gZnJvbU5vZGUgJiYgcExpbmsudG9Ob2RlID09IHRvTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSBzbGlkZSBub2RlIHRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShhbGlnbm1lbnQpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwiZGVzaXJlZFNpemVcIiwgXCJcIiwgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlID0gb2JqLmFkb3JuZWRPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IE1hdGgubWluKHNsaWRlLndpZHRoLCBzbGlkZS5oZWlnaHQpICogLjA1O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBnby5TaXplKHNpemUsIHNpemUpO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGFsaWdubWVudCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJjb2wtcmVzaXplXCIsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAncmdiYSgyNTEsMTcwLDU0LDEpJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zbGlkZVRlbXBsYXRlID1cclxuICAgIG1rKGdvLk5vZGUsIGdvLlBhbmVsLkF1dG8sXHJcbiAgICAgICAgLy8gTkI6IHVubGlrZSBncm91cHMsIHNsaWRlcyBqdXN0IHVzZSBhIG5vcm1hbCAyLXdheSBsb2NhdGlvbiBiaW5kaW5nXHJcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJsb2NhdGlvblwiLCBcImxvY1wiLCBnby5Qb2ludC5wYXJzZSkubWFrZVR3b1dheShnby5Qb2ludC5zdHJpbmdpZnkpLFxyXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwid2lkdGhcIiwgXCJ3aWR0aFwiKS5tYWtlVHdvV2F5KCksXHJcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJoZWlnaHRcIiwgXCJoZWlnaHRcIikubWFrZVR3b1dheSgpLFxyXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwidmlzaWJsZVwiLCBcIlwiLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmouZGF0YS5oYXNSZWdpb24gJiZcclxuICAgICAgICAgICAgICAgIG1hcC51aS5jdXJyZW50VGFiSXMobWFwLnVpLlRBQl9JRF9QUkVTRU5URVIpICYmXHJcbiAgICAgICAgICAgICAgICAhbWFwLnByZXNlbnRlci5pc1ByZXNlbnRpbmcgJiZcclxuICAgICAgICAgICAgICAgICFtYXAucHJlc2VudGVyLmlzQ3JlYXRpbmdUaHVtYm5haWwgJiZcclxuICAgICAgICAgICAgICAgIG1hcC5wcmVzZW50ZXIuY3VycmVudFNsaWRlSW5kZXggPT0gb2JqLmRhdGEuaW5kZXg7XHJcbiAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICBsb2NhdGlvblNwb3Q6IGdvLlNwb3QuVG9wTGVmdCxcclxuICAgICAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgcmVzaXplQWRvcm5tZW50VGVtcGxhdGU6IG1rKGdvLkFkb3JubWVudCwgXCJTcG90XCIsXHJcbiAgICAgICAgICAgICAgICBtayhnby5QbGFjZWhvbGRlciksIC8vIHRha2VzIHNpemUgYW5kIHBvc2l0aW9uIG9mIGFkb3JuZWQgb2JqZWN0XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlRvcExlZnQpLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Ub3ApLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Ub3BSaWdodCksXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlJpZ2h0KSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuQm90dG9tUmlnaHQpLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Cb3R0b20pLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Cb3R0b21MZWZ0KSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuTGVmdClcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDAsXHJcbiAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobm9kZUluZm8odGFyZ2V0LnBhcnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLCB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwic2xpZGVib3JkZXJcIixcclxuICAgICAgICAgICAgZmlsbDogJ3JnYmEoMjUxLDE3MCw1NCwuMSknLFxyXG4gICAgICAgICAgICBzdHJva2U6IG51bGxcclxuICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSBleHBvcnQgZm9vdGVyIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBOQjogdGhpcyBpcyBub3QgYSB0ZW1wbGF0ZSBwZXIgc2UsIGluIHRoYXQgaXQgaXMgYWRkZWQgdG8gdGhlIGRpYWdyYW1cclxuICAgIC8vIHN0YXRpY2FsbHksIHJhdGhlciB0aGFuIGJlaW5nIGJvdW5kIHRvIHNvbWV0aGluZyBpbiB0aGUgbW9kZWwuXHJcbiAgICAvLyBCdXQgd2UgcHV0IGl0IGhlcmUgYmVjYXVzZSBpdCBpcyBhYm91dCBjcmVhdGluZyBwYXJ0cyBhbmQgc3R1ZmYuXHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlRXhwb3J0Rm9vdGVyKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5Ob2RlLCBnby5QYW5lbC5TcG90LCB7XHJcbiAgICAgICAgICAgIGxheWVyTmFtZTogJ0ZvcmVncm91bmQnLFxyXG4gICAgICAgICAgICBsb2NhdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICBzY2FsZTogMSxcclxuICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBzZWxlY3RhYmxlOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcInJlY3RhbmdsZVwiLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA2MCxcclxuICAgICAgICAgICAgICAgIGZpbGw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG1rKGdvLlBpY3R1cmUsIHtcclxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ21ldGFtYXAvYXNzZXRzL2ltZy9tZXRhbWFwLWxvZ28tNTAucG5nJyxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Ub3BMZWZ0LFxyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50Rm9jdXM6IGdvLlNwb3QuVG9wTGVmdCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxOTUsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDUwXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwibWV0YW1hcC5jYWJyZXJhcmVzZWFyY2gub3JnXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuQm90dG9tTGVmdCxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LkJvdHRvbUxlZnQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMjAwXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwibWFwVGl0bGVcIixcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Ub3BSaWdodCxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LlRvcFJpZ2h0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDMwMFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImF1dGhvck5hbWVcIixcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Cb3R0b21SaWdodCxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LkJvdHRvbVJpZ2h0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDMwMFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNyZWF0ZXMgb3IgcmVmcmVzaGVzIHRoZSBmb290ZXIgbG9nby90ZXh0IHRoYXQgaXMgZGlzcGxheWVkIGluIHRoZSBpbWFnZSBleHBvcnRcclxuICAgIHRoaXMuYWRkRXhwb3J0Rm9vdGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghX2V4cG9ydEZvb3Rlcikge1xyXG4gICAgICAgICAgICBfZXhwb3J0Rm9vdGVyID0gY3JlYXRlRXhwb3J0Rm9vdGVyKCk7XHJcbiAgICAgICAgICAgIG1hcC5kaWFncmFtLmFkZChfZXhwb3J0Rm9vdGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2hvd0V4cG9ydEZvb3RlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVjdCA9IG1hcC5jb21wdXRlTWFwQm91bmRzKCk7XHJcbiAgICAgICAgLy8gcHV0IGZvb3RlciBhdCBsZWFzdCAxMDAgcHggYmVsb3cgYm90dG9tIG9mIG1hcDsgbWFrZSBpdCBhdCBsZWFzdCA1MDBweCB3aWRlXHJcbiAgICAgICAgdmFyIHggPSByZWN0Lng7XHJcbiAgICAgICAgdmFyIHkgPSByZWN0LnkgKyByZWN0LmhlaWdodCArIE1hdGgubWF4KDEwMCwgcmVjdC5oZWlnaHQgLyA1KTtcclxuICAgICAgICB2YXIgdyA9IE1hdGgubWF4KDUwMCwgcmVjdC53aWR0aCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0V4cG9ydEZvb3RlciwgYm91bmRzIHJlY3Q6ICcgKyByZWN0ICsgJywgdzogJyArIHcpO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIubG9jYXRpb24gPSBuZXcgZ28uUG9pbnQoeCwgeSk7XHJcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5maW5kT2JqZWN0KFwicmVjdGFuZ2xlXCIpLndpZHRoID0gdztcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLmZpbmRPYmplY3QoXCJtYXBUaXRsZVwiKS50ZXh0ID0gXCJNYXAgVGl0bGU6IFwiICsgJHNjb3BlLm1hcFRpdGxlO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIuZmluZE9iamVjdChcImF1dGhvck5hbWVcIikudGV4dCA9IFwiQXV0aG9yOiBcIiArICRzY29wZS51c2VyTmFtZTtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLm9wYWNpdHkgPSAxO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIuaW52YWxpZGF0ZUxheW91dCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhpZGVFeHBvcnRGb290ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5vcGFjaXR5ID0gMDtcclxuICAgIH07XHJcblxyXG59OyIsImNvbnN0IFNhbmRiYW5rRWRpdG9yID0gcmVxdWlyZSgnLi9zYkVkaXRvcicpO1xyXG5cclxuU2FuZGJhbmtFZGl0b3IuVGVzdHMgPSBmdW5jdGlvbiAoJHNjb3BlLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5URVNUX1NUQVRVU19OT1RfUlVOID0gJ25vdC1ydW4nO1xyXG4gICAgdGhpcy5URVNUX1NUQVRVU19QQVNTRUQgPSAncGFzc2VkJztcclxuICAgIHRoaXMuVEVTVF9TVEFUVVNfRVhBTUlORSA9ICdleGFtaW5lJztcclxuICAgIHRoaXMuVEVTVF9TVEFUVVNfRkFJTEVEID0gJ2ZhaWxlZCc7XHJcblxyXG4gICAgdGhpcy5jdXJyZW50VGVzdCA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJ1blRlc3QgPSBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgdGVzdCA9IF8uZmluZFdoZXJlKHNlbGYudGVzdHMsIHsgbmFtZTogbmFtZSB9KTtcclxuICAgICAgICAgICAgdGVzdC5zdGF0dXMgPSBzZWxmLlRFU1RfU1RBVFVTX05PVF9SVU47XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFRlc3QgPSB0ZXN0O1xyXG4gICAgICAgICAgICBkaWFncmFtLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIHRlc3QucnVuKGRpYWdyYW0pO1xyXG4gICAgICAgICAgICBpZiAodGVzdC5jaGVjayA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXN0LnN0YXR1cyA9IHNlbGYuVEVTVF9TVEFUVVNfRVhBTUlORTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRlc3QuZmFpbFJlYXNvbiA9IHRlc3QuY2hlY2soZGlhZ3JhbSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5pc1N0cmluZyh0ZXN0LmZhaWxSZWFzb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVzdC5zdGF0dXMgPSBzZWxmLlRFU1RfU1RBVFVTX0ZBSUxFRDsgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXN0LnN0YXR1cyA9IHNlbGYuVEVTVF9TVEFUVVNfUEFTU0VEOyAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pOyAgICAgICAgXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlR2VuZXJhdG9yVGVzdCA9IGZ1bmN0aW9uKG5hbWUsIG1hcEl0Rm4pIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiAnVGhpbmtROiAnICsgbmFtZSxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7IHNlbGYucnVuR2VuZXJhdG9yVGVzdChtYXBJdEZuKTsgfVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucnVuR2VuZXJhdG9yVGVzdCA9IGZ1bmN0aW9uKG1hcEl0Rm4pIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIGdlbmVyYXRvciA9IG1hcC5nZXRHZW5lcmF0b3IoKTtcclxuICAgICAgICBnZW5lcmF0b3IuY29uY2VwdDEgPSAnQ09OQ0VQVCAxJztcclxuICAgICAgICBnZW5lcmF0b3IuY29uY2VwdDIgPSAnQ09OQ0VQVCAyJztcclxuICAgICAgICBnZW5lcmF0b3IubWFwSXQobWFwSXRGbik7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudGVzdHMgPSBbXHJcbiAgICAgICAgLy8ge1xyXG4gICAgICAgIC8vICAgICBuYW1lOiAnW0ZhaWxlZCB0ZXN0XScsXHJcbiAgICAgICAgLy8gICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgIC8vICAgICB9LFxyXG4gICAgICAgIC8vICAgICBjaGVjazogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuICdUaGlzIHRlc3QgZmFpbGVkIC0gdGhpcyBpcyBvbmx5IGEgdGVzdC4nO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdSZXNldCBtYXAnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuaW5zZXJ0UGFydChuZXcgZ28uUG9pbnQoMCwwKSk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjaGVjazogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkuY291bnQgPT0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnQ3JlYXRlIFNpc3RlcicsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5jbGlja0NyZWF0aW5nVG9vbC5pbnNlcnRQYXJ0KG5ldyBnby5Qb2ludCgwLDApKTtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIG1hcC5jcmVhdGVTaXN0ZXIoZ3JvdXApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjaGVjazogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkuY291bnQgPT0gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnQ3JlYXRlIFIgdG8gU2lzdGVyJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmluc2VydFBhcnQobmV3IGdvLlBvaW50KDAsMCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgbWFwLmNyZWF0ZVJUb1Npc3Rlcihncm91cCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0NyZWF0ZSBDaGlsZCcsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5jbGlja0NyZWF0aW5nVG9vbC5pbnNlcnRQYXJ0KG5ldyBnby5Qb2ludCgwLDApKTtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChncm91cCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0NyZWF0ZSAzIGNoaWxkcmVuIGFuZCBzd2l0Y2ggdG8gZnJlZWhhbmQnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuaW5zZXJ0UGFydChuZXcgZ28uUG9pbnQoMCwwKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoZ3JvdXApO1xyXG4gICAgICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGdyb3VwKTtcclxuICAgICAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChncm91cCk7XHJcbiAgICAgICAgICAgICAgICAvLyBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbGF5b3V0JywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICBncm91cC5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIG1hcC51aSgpLnNldFNlbGVjdGVkVGhpbmdzTGF5b3V0KCdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjaGVjazogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkuY291bnQgIT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnVG9wIGxldmVsIGdyb3VwIGNvdW50IGlzIG5vdCAxJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIGlmIChncm91cC5tZW1iZXJQYXJ0cy5jb3VudCAhPSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdQYXJlbnQgZGF0YSBjaGlsZHJlbiBpcyBub3QgMyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyBSVEJCIGludG8gb3V0bGluZSBTJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyB0aGUgcHJlc2VsZWN0ZWQgUlRCQiBpbnRvIFdob2xlIChTKSwgdGhlbiBkbyBhbiBVbmRvJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVUaGluZygyNTAsIDAsICdQYXJ0IDEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZVRoaW5nKDUwMCwgMCwgJ1BhcnQgMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEsIHBhcnQyLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgcGFydDEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0Mi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyBSVEJCIGludG8gZnJlZWhhbmQgUycsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgdGhlIHByZXNlbGVjdGVkIFJUQkIgaW50byBXaG9sZSAoUykgYW5kIGV4YW1pbmUgbGF5b3V0JyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2xkUGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdPbGQgUGFydCAxJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAzMCwgJ1BhcnQgMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIgPSBtYXAuY3JlYXRlVGhpbmcoNTAwLCA3MCwgJ1BhcnQgMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEsIHBhcnQyLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgcGFydDEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0Mi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnQ3JlYXRlIFJUQkIgaW4gb3V0bGluZSBhbmQgc3dpdGNoIHRvIGZyZWVoYW5kJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnQ2hlY2sgYXV0by1nZW5lcmF0ZWQgZnJlZWhhbmQgbGF5b3V0IG9mIHBhcnRzJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxLCBwYXJ0MiwgJ1J0aGluZycpO1xyXG4gICAgICAgICAgICAgICAgd2hvbGUuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBtYXAudWkoKS5zZXRTZWxlY3RlZFRoaW5nc0xheW91dCgnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIC8vZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkod2hvbGUuZGF0YSwgJ2xheW91dCcsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgLy9tYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIFJUQkIgaW4gZnJlZWhhbmQsIGFkZCBwYXJ0IGluIG91dGxpbmUsIHN3aXRjaCBiYWNrIHRvIGZyZWVoYW5kXHJcbiAgICAgICAgLy8gY3JlYXRlIFJUQkIgaW4gZnJlZWhhbmQsIGRyYWcgaW4gcGFydCBpbiBvdXRsaW5lLCBzd2l0Y2ggYmFjayB0byBmcmVlaGFuZFxyXG5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFJUQkIgb3V0IG9mIFMnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIHRoZSBwcmVzZWxlY3RlZCBSVEJCIG9udG8gV2hvbGUgKEQpJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxLCBwYXJ0MiwgJ1J0aGluZycpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHBhcnQxLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcGFydDIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgUlRCQiBvdXQgb2YgZnJlZWhhbmQgUycsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgdGhlIHByZXNlbGVjdGVkIFJUQkIgb250byBXaG9sZSAoRCknLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMScsIDEwLCAxMjApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDInLCAxMTAsIDE1MCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MSwgcGFydDIsICdSdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhcnQyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFJUQkIgb3V0IG9mIDJuZCBsZXZlbCBTJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyB0aGUgcHJlc2VsZWN0ZWQgUlRCQiBvbnRvIFdob2xlIChEKSBvZiBQYXJ0IDEnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAxJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTIgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoc3VicGFydDExLCBzdWJwYXJ0MTIsICdSdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMicpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHN1YnBhcnQxMS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHN1YnBhcnQxMi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyBSVEJCIG91dCBvZiAybmQgbGV2ZWwgZnJlZWhhbmQgUycsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgdGhlIHByZXNlbGVjdGVkIFJUQkIgb250byBXaG9sZSAoRCkgb2YgUGFydCAxJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnLCAwLCAxMjApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJywgMTAsIDE4MCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDEyID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjInLCAyMCwgMjIwKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHN1YnBhcnQxMSwgc3VicGFydDEyLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDInLCAwLCAzMDApO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHN1YnBhcnQxMS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHN1YnBhcnQxMi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnUmNoYW5uZWwnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdOb3RlIHRoYXQgUi10aGluZ3MgYXJlIGluIHBhcnQtd2hvbGUgcmVsYXRpb24nLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlIDEnLCAncmlnaHQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ1BhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKDI1MCwgMCwgJ1dob2xlIDInKTtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZDIxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ1BhcnQgMi4xJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ1J0aGluZyAxLTInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMSA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQxMSwgY2hpbGQyMSwgJ1J0aGluZyAxLjEgLSAyLjEnKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ1JjaGFubmVsLCByVGhpbmcxMTogJyArIHJUaGluZzExKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICByVGhpbmcxMS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIG1hcC5hZGRTZWxlY3RlZFRoaW5nc0FzQ2hpbGRyZW5PZihyVGhpbmcxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRGlzYXBwZWFyaW5nIHBhcnRzIG9uIG5ldyBpZGVhIGNyZWF0aW9uJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnQ3JlYXRlIGEgbmV3IHRvcC1sZXZlbCBpZGVhIC0gUGFydCAxLjEgc2hvdWxkIG5vdCBkaXNhcHBlYXIgdGVtcG9yYXJpbHknLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlIDEnLCAncmlnaHQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ1BhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgdG9wLWxldmVsIHRoaW5nIGludG8gZnJlZWhhbmQgc3lzdGVtJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBOZXcgUGFydCBpbnRvIFdob2xlOyBleGFtaW5lIHJlc3VsdGluZyBwYXJ0IGxheW91dCcsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ1BhcnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdQYXJ0ID0gbWFwLmNyZWF0ZVRoaW5nKDI1MCwgMCwgJ05ldyBQYXJ0JywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyB0b3AtbGV2ZWwgUlRCQiBpbnRvIGZyZWVoYW5kIHN5c3RlbScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgcHJlc2VsZWN0ZWQgUlRCQiBpbnRvIFdob2xlOyBleGFtaW5lIHJlc3VsdGluZyBwYXJ0IGxheW91dCcsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ1BhcnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBiYXIgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAwLCAnQmFyJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBiZWxsID0gbWFwLmNyZWF0ZVRoaW5nKDUwMCwgMCwgJ0JlbGwnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoYmFyLCBiZWxsLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYmFyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYmVsbC5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyBSLXRoaW5nIHNxdWFyZSBpbnRvIGZyZWVoYW5kIHN5c3RlbScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgcHJlc2VsZWN0ZWQgc3F1YXJlIGludG8gV2hvbGU7IGV4YW1pbmUgcmVzdWx0aW5nIHBhcnQgbGF5b3V0JyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoLTEwMCwgNTAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDExID0gbWFwLmNyZWF0ZVRoaW5nKDI1MCwgMCwgJ1BhcnQxMScsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEyID0gbWFwLmNyZWF0ZVRoaW5nKDUwMCwgMCwgJ1BhcnQxMicsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIxID0gbWFwLmNyZWF0ZVRoaW5nKDI1MCwgMjUwLCAnUGFydDIxJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MjIgPSBtYXAuY3JlYXRlVGhpbmcoNTAwLCAyNTAsICdQYXJ0MjInLCAnbGVmdCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMV8xMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDExLCBwYXJ0MTIsICdSdGhpbmcgMTEtMTInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMV8yMSA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDExLCBwYXJ0MjEsICdSdGhpbmcgMTEtMjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMl8yMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEyLCBwYXJ0MjIsICdSdGhpbmcgMTItMjInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcyMV8yMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDIxLCBwYXJ0MjIsICdSdGhpbmcgMjEtMjInKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MTEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MTIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MjEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MjIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgUi10aGluZyBzcXVhcmUgb3V0IG9mIGZyZWVoYW5kIHN5c3RlbScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgcHJlc2VsZWN0ZWQgc3F1YXJlIG9udG8gRCBvZiBXaG9sZTsgZXhhbWluZSByZXN1bHRpbmcgbGF5b3V0JyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoLTEwMCwgNTAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydDExJywgMTAsIDE5MCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydDEyJywgMTIwLCAxOTApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyMSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQyMScsIDEwLCAzMDApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyMiA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQyMicsIDEyMCwgMzAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nMTFfMTIgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxMSwgcGFydDEyLCAnUnRoaW5nIDExLTEyJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nMTFfMjEgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxMSwgcGFydDIxLCAnUnRoaW5nIDExLTIxJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nMTJfMjIgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxMiwgcGFydDIyLCAnUnRoaW5nIDEyLTIyJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nMjFfMjIgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQyMSwgcGFydDIyLCAnUnRoaW5nIDIxLTIyJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgcGFydDExLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcGFydDEyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcGFydDIxLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcGFydDIyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIDJuZCBsZXZlbCBwYXJ0IHRvIEQgb2YgcGFyZW50JyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBTdWJwYXJ0IDEuMSBvbnRvIEQgb2YgUGFydCAxOyBpdCBzaG91bGQgYXBwZWFyIGJlbG93IFBhcnQgMScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAyJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdJbnZpc2libGUgUi10aGluZyBpbiAybmQgbGV2ZWwgb2Ygb3V0bGluZScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ1ItdGhpbmcgYmV0d2VlbiBTdWJwYXJ0cyAxLjEgYW5kIDEuMiBzaG91bGQgYmUgdmlzaWJsZScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMiA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4yJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhzdWJwYXJ0MTEsIHN1YnBhcnQxMiwgJ1J0aGluZycpO1xyXG4gICAgICAgICAgICAgICAgclRoaW5nLmRlc2lyZWRTaXplID0gbmV3IGdvLlNpemUoMzAsMzApO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3JUaGluZyBhY3R1YWxCb3VuZHM6ICcgKyByVGhpbmcuYWN0dWFsQm91bmRzICsgJywgc2NhbGU6ICcgKyByVGhpbmcuc2NhbGUgKyAnLCBkZXNpcmVkU2l6ZTogJyArIHJUaGluZy5kZXNpcmVkU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdXaG9sZSBkZXNpcmVkU2l6ZTogJyArIHdob2xlLmRlc2lyZWRTaXplKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnUi10aGluZyBiZXR3ZWVuIGlkZWFzIGluIHNhbWUgbG9jYXRpb24gKGVycm9yKScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ1RoaXMgc2hvdWxkIHRyaWdnZXIgYW4gZXJyb3InLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIC8vIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdQYXJ0IDEnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnUGFydCAyJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MSwgcGFydDIsICdSdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgLy8gfSBjYXRjaChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgYWxlcnQoZS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy8ge1xyXG4gICAgICAgIC8vICAgICBuYW1lOiAnRml4IGJhZCBSLXRoaW5nIGxlYWRpbmcgdG8gaW5maW5pdGUgbG9vcCcsXHJcbiAgICAgICAgLy8gICAgIGluc3RydWN0aW9uczogJ01hcCBzaG91bGQgZGlzcGxheSBhbmQgbm90IHRyaWdnZXIgaW5maW5pdGUgbG9vcDsgbW9kZWwgc2hvdWxkIGJlIGZpeGVkIHNvIHRoYXQgci10aGluZyBpcyBub3QgUGFydCAxLjEgb3IgUGFydCAxLjInLFxyXG4gICAgICAgIC8vICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAvLyAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoLTEwMCwgMCwgJ1RoaW5nMScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgIC8vICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnUGFydCAxLjEnKTtcclxuICAgICAgICAvLyAgICAgICAgIHZhciBjaGlsZDEyID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ1BhcnQgMS4yJyk7XHJcbiAgICAgICAgLy8gICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDExLCBjaGlsZDEyLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgLy8gICAgICAgICB2YXIgckxpbmsgPSByVGhpbmcubGFiZWxlZExpbms7XHJcbiAgICAgICAgLy8gICAgICAgICByTGluay5kYXRhLmxhYmVsS2V5cyA9IFtjaGlsZDExLmRhdGEua2V5XTtcclxuICAgICAgICAvLyAgICAgICAgIG1hcC5jaGVja01vZGVsKCk7XHJcbiAgICAgICAgLy8gICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIHRvIGNyZWF0ZSBSLWxpbmUnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIGZyb20gdGhlIFItY29ybmVyIG9mIFRoaW5nMSB0byBUaGluZzI7IHRlbXBvcmFyeSBkcmFnIGxpbmUgYW5kIHNxdWFyZSBzaG91bGQgYmUgUi1jb2xvcjsgY3JlYXRlZCBsaW5lIHNob3VsZCBiZSBhbiBSLWxpbmUnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoLTEwMCwgMCwgJ1RoaW5nMScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZygxMDAsIDAsICdUaGluZzInLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyB0byBjcmVhdGUgUC1saW5lJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBmcm9tIHRoZSBQLWNvcm5lciBvZiBUaGluZzEgdG8gVGhpbmcyOyB0ZW1wb3JhcnkgZHJhZyBsaW5lIGFuZCBzcXVhcmUgc2hvdWxkIGJlIFAtY29sb3I7IGNyZWF0ZWQgbGluZSBzaG91bGQgYmUgYSBQLWxpbmUnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoLTEwMCwgMCwgJ1RoaW5nMScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZygxMDAsIDAsICdUaGluZzInLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnUmVsaW5rIGZyb20tcG9ydCBvZiBSLWxpbmUnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdNb3ZlIHRoZSBzdGFydCBvZiB0aGUgUi1saW5rIGZyb20gVGhpbmcgMSB0byBUaGluZyAzOyBtYWtlIHN1cmUgaXQgZG9lcyBub3QgdHVybiBpbnRvIGEgUC1saW5rJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKC0xMDAsIDAsICdUaGluZzEnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoMzAwLCAwLCAnVGhpbmcyJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmczID0gbWFwLmNyZWF0ZVRoaW5nKDEwMCwgMjAwLCAnVGhpbmczJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmxpbmsgPSBtYXAuY3JlYXRlUkxpbmsodGhpbmcxLCB0aGluZzIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdSZWxpbmsgdG8tcG9ydCBvZiBSLWxpbmUnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdNb3ZlIHRoZSBlbmQgb2YgdGhlIFItbGluayBmcm9tIFRoaW5nIDIgdG8gVGhpbmcgMzsgbWFrZSBzdXJlIGl0IGRvZXMgbm90IHR1cm4gaW50byBhIFAtbGluaycsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCAwLCAnVGhpbmcxJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKDMwMCwgMCwgJ1RoaW5nMicsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMyA9IG1hcC5jcmVhdGVUaGluZygxMDAsIDIwMCwgJ1RoaW5nMycsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJsaW5rID0gbWFwLmNyZWF0ZVJMaW5rKHRoaW5nMSwgdGhpbmcyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnU2hvd2luZyBwYXJ0cyBvZiBwYXJ0cyBvZiBhIGZyZWVoYW5kIHdob2xlJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnV2hvbGUsIFBhcnQgMSBhbmQgU3VicGFydCAxLjEgc2hvdWxkIGFsbCBiZSB2aXNpYmxlJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnV0hBVF9JUycsIG1hcC5nZXRHZW5lcmF0b3IoKS5XSEFUX0lTKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1BBUlRTX09GJywgbWFwLmdldEdlbmVyYXRvcigpLlBBUlRTX09GKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1BBUlRfT0YnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUEFSVF9PRiksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdQQVJUU19IQVZFX1BBUlRTJywgbWFwLmdldEdlbmVyYXRvcigpLlBBUlRTX0hBVkVfUEFSVFMpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUE9JTlRfRk9SJywgbWFwLmdldEdlbmVyYXRvcigpLlBPSU5UX0ZPUiksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdIQVNfTVVMVElQTEVfUFMnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuSEFTX01VTFRJUExFX1BTKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1JfVE8nLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUl9UTyksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdSX0VYSVNUUycsIG1hcC5nZXRHZW5lcmF0b3IoKS5SX0VYSVNUUyksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdXSEFUX0lTX1InLCBtYXAuZ2V0R2VuZXJhdG9yKCkuV0hBVF9JU19SKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ0RJU1RJTkdVSVNIX0JFVFdFRU4nLCBtYXAuZ2V0R2VuZXJhdG9yKCkuRElTVElOR1VJU0hfQkVUV0VFTiksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdJU19SX0JFVFdFRU4nLCBtYXAuZ2V0R2VuZXJhdG9yKCkuSVNfUl9CRVRXRUVOKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ0NBTl9CRV9QJywgbWFwLmdldEdlbmVyYXRvcigpLkNBTl9CRV9QKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ01VTFRJUExFX1BTX0FSRScsIG1hcC5nZXRHZW5lcmF0b3IoKS5NVUxUSVBMRV9QU19BUkUpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUF9QQVJUUycsIG1hcC5nZXRHZW5lcmF0b3IoKS5QX1BBUlRTKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ0NPTVBBUkVfQ09OVFJBU1QnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuQ09NUEFSRV9DT05UUkFTVCksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdSX1BBUlRTJywgbWFwLmdldEdlbmVyYXRvcigpLlJfUEFSVFMpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUEFSVFNfSEFWRV9SUycsIG1hcC5nZXRHZW5lcmF0b3IoKS5QQVJUU19IQVZFX1JTKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1BBUlRfUlNfRVhJU1QnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUEFSVF9SU19FWElTVCksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdQQVJUX1JTX0FSRScsIG1hcC5nZXRHZW5lcmF0b3IoKS5QQVJUX1JTX0FSRSksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdXSEFUX0FCT1VUJywgbWFwLmdldEdlbmVyYXRvcigpLldIQVRfQUJPVVQpXHJcblxyXG5cclxuLy8gY29tcHV0ZVBhcnRzQm91bmRzXHJcblxyXG4vLyBjcmVhdGVSVGhpbmdcclxuLy8gYWRkU2VsZWN0ZWRUaGluZ3NBc0NoaWxkcmVuT2ZcclxuLy8gYWRkU2VsZWN0ZWRUaGluZ0FzT3JkZXJlZFNpc3Rlck9mXHJcbi8vIGFkZFNlbGVjdGVkVGhpbmdzQXNTaXN0ZXJzT2ZcclxuLy8gYWRkVGhpbmdBc1JUaGluZ1xyXG4vLyB0b2dnbGVERmxhZ1xyXG4vLyB0b2dnbGVTRXhwYW5zaW9uXHJcbi8vIHRvZ2dsZVBFeHBhbnNpb25cclxuXHJcbi8vIHByZXNlbnRlcjogc2VsZWN0IGZpcnN0IHNsaWRlIGFuZCBoaXQgcGxheTsgbWFrZSBzdXJlIGZpcnN0IHNsaWRlIG5vdGVzIGFwcGVhclxyXG5cclxuXHJcblxyXG4gICAgXTtcclxuICAgIFxyXG59O1xyXG5cclxuXHJcbiIsImNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKVxyXG5cclxuY29uc3QgU2FuZGJhbmtFZGl0b3IgPSByZXF1aXJlKCcuL3NiRWRpdG9yJyk7XHJcbmNvbnN0IFNhbmRiYW5rRWRpdG9yT3B0aW9ucyA9IHJlcXVpcmUoJy4vZWRpdG9yX29wdGlvbnMnKTtcclxuXHJcblNhbmRiYW5rRWRpdG9yLlVJID0gZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCwgJGh0dHAsICRyZXNvdXJjZSwgJG1vZGFsLCAkbG9nLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0gdGFiIChcInNsaWRlclwiKSBJRHMgLSB0YWJzIGFyZSByZW5kZXJlZCBpbiB2aWV3cy9tYXBzL19mb3JtIC0tLS0tLS0tLS0tLS0tXHJcbiAgICAvL3RoaXMuVEFCX0lEX0hJU1RPUlkgPSAnaGlzdG9yeS10YWInO1xyXG4gICAgdGhpcy5UQUJfSURfUFJFU0VOVEVSID0gJ3ByZXNlbnRlci10YWInO1xyXG4gICAgdGhpcy5UQUJfSURfQU5BTFlUSUNTX01BUCA9ICdhbmFseXRpY3MtdGFiLW1hcCc7XHJcbiAgICB0aGlzLlRBQl9JRF9BTkFMWVRJQ1NfVEhJTkcgPSAnYW5hbHl0aWNzLXRhYi10aGluZyc7XHJcbiAgICB0aGlzLlRBQl9JRF9QRVJTUEVDVElWRVMgPSAncGVyc3BlY3RpdmVzLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9ESVNUSU5DVElPTlMgPSAnZGlzdGluY3Rpb25zLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9BVFRBQ0hNRU5UUyA9ICdhdHRhY2htZW50cy10YWInO1xyXG4gICAgdGhpcy5UQUJfSURfR0VORVJBVE9SID0gJ2dlbmVyYXRvci10YWInO1xyXG4gICAgdGhpcy5UQUJfSURfU1RBTkRBUkRTID0gJ3N0YW5kYXJkcy10YWInO1xyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge307XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIGVkaXRvciBvcHRpb25zIGZvciBtYXAvdXNlciAtLS0tLS0tLS0tXHJcblxyXG4gICAgdmFyIG1hcEVkaXRvck9wdGlvbnMgPSB7fTtcclxuXHJcbiAgICB2YXIgZGVmYXVsdEVkaXRvck9wdGlvbnMgPSB7XHJcbiAgICAgICAgLy8gbm9BcnJvd3MsIHRvLCBmcm9tLCB0b0Zyb21cclxuICAgICAgICBkZWZhdWx0UmVsYXRpb25zaGlwRGlyZWN0aW9uOiAnbm9BcnJvd3MnLFxyXG4gICAgICAgIC8vIGxlZnQsIHJpZ2h0LCBzdGFja2VkLCBmcmVlaGFuZFxyXG4gICAgICAgIGRlZmF1bHRUaGluZ0xheW91dDogJ2xlZnQnLFxyXG4gICAgICAgIC8vIGxpbmVzLCBzcG90bGlnaHQsIGJvdGhcclxuICAgICAgICBwZXJzcGVjdGl2ZU1vZGU6ICdsaW5lcydcclxuICAgIH07XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gbWFwIGlzIGxvYWRlZCB0byBzZXQgc3RvcmVkIG9wdGlvbnMgZm9yIG1hcFxyXG4gICAgdGhpcy5zZXRNYXBFZGl0b3JPcHRpb25zID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICAgIG1hcEVkaXRvck9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIGFwcHJvcHJpYXRlIHZhbHVlcyBmcm9tIHRoZSB1c2VyIHByb2ZpbGUgb3IgdGhlIGRlZmF1bHQgb3B0aW9ucyBpZiBvcHRpb25zIGFyZSBub3Qgc2V0IGZvciB0aGUgbWFwXHJcbiAgICB0aGlzLmdldE1hcEVkaXRvck9wdGlvbnMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgcHJvZmlsZU9wdGlvbnMgPSAoJHNjb3BlLnVzZXJQcm9maWxlID8gJHNjb3BlLnVzZXJQcm9maWxlLmVkaXRvck9wdGlvbnMgOiBudWxsKTtcclxuICAgICAgICB2YXIgdmFscyA9IFttYXBFZGl0b3JPcHRpb25zLCBwcm9maWxlT3B0aW9ucywgZGVmYXVsdEVkaXRvck9wdGlvbnNdO1xyXG4gICAgICAgIG1hcEVkaXRvck9wdGlvbnMgPSBfLmZpbmQodmFscywgZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhXy5pc0VtcHR5KHZhbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG1hcEVkaXRvck9wdGlvbnM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNhdmVzIGRlZmF1bHQgb3B0aW9ucyBmb3IgdGhlIHVzZXIgKG1hcCBvcHRpb25zIGFyZSBzYXZlZCBpbiBhdXRvc2F2ZS5qcylcclxuICAgIGZ1bmN0aW9uIHNhdmVVc2VyRWRpdG9yT3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHVzZXI6IHtcclxuICAgICAgICAgICAgICAgIGVkaXRvcl9vcHRpb25zOiBKU09OLnN0cmluZ2lmeShvcHRpb25zKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgJGh0dHAucHV0KCcvdXNlcnMvJyArICRzY29wZS51c2VySWQgKyAnLmpzb24nLCBkYXRhKS50aGVuKFxyXG4gICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgc3RvcFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ0NvdWxkIG5vdCBzYXZlIGVkaXRvciBvcHRpb25zJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gb3B0aW9ucyBtb2RhbFxyXG5cclxuICAgICRzY29wZS5lZGl0b3JPcHRpb25zID0gbmV3IFNhbmRiYW5rRWRpdG9yT3B0aW9ucygkc2NvcGUsICRodHRwLCAkcmVzb3VyY2UsICRtb2RhbCwgJGxvZyk7XHJcblxyXG4gICAgdGhpcy5lZGl0T3B0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5lZGl0b3JPcHRpb25zLm9wZW5Nb2RhbChcclxuICAgICAgICAgICAgbWFwRWRpdG9yT3B0aW9ucyxcclxuICAgICAgICAgICAgZnVuY3Rpb24ob3B0aW9ucykgeyAvLyBvblNhdmVEZWZhdWx0c1xyXG4gICAgICAgICAgICAgICAgc2F2ZVVzZXJFZGl0b3JPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbihvcHRpb25zKSB7IC8vIG9uVXBkYXRlXHJcbiAgICAgICAgICAgICAgICBtYXBFZGl0b3JPcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICAgICAgICAgIG1hcC5hdXRvc2F2ZS5zYXZlTm93KCdlZGl0X29wdGlvbnMnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gc3RhdGUgbW9kZWwgLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuc3RhdGUgPSB7fTtcclxuXHJcbiAgICB2YXIgZGVmYXVsdFN0YXRlID0ge1xyXG4gICAgICAgIHNob3dOYXZpZ2F0b3I6IGZhbHNlLFxyXG4gICAgICAgIGN1cnJlbnRUYWI6IG51bGwsXHJcbiAgICAgICAgcGVyc3BlY3RpdmVQb2ludEtleTogbnVsbCxcclxuICAgICAgICBkaXN0aW5jdGlvblRoaW5nS2V5OiBudWxsXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2V0U3RhdGVEYXRhID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc3RhdGUgPSBkYXRhIHx8IGRlZmF1bHRTdGF0ZTtcclxuICAgICAgICAgICAgLy8kc2NvcGUuY3VycmVudFRhYiA9IHNlbGYuc3RhdGUuY3VycmVudFRhYjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gVE9ETzogU2F2ZSBzdGF0ZSBtb3JlIGZyZXF1ZW50bHk/PyBDdXJyZW50bHkgaXQgaXMgb25seSBzYXZlZCB3aGVuIGF1dG9zYXZlIGlzIHRyaWdnZXJlZCBieSBvdGhlciBhY3Rpb25zLi4uXHJcblxyXG4gICAgdGhpcy5nZXRTdGF0ZURhdGEgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5zdGF0ZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0gdGVtcG9yYXJ5IHN0YXRlIGZsYWdzIC0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuem9vbWluZ1RvUmVnaW9uID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5tb3VzZU92ZXJHcm91cCA9IG51bGw7XHJcbiAgICB0aGlzLm1vdXNlT3ZlckxpbmsgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuZHJhZ1RhcmdldEdyb3VwID0gbnVsbDtcclxuICAgIHRoaXMuZHJhZ1RhcmdldFBvc2l0aW9uID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmhlbHBUaXAgPSBudWxsO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIGhhbmRsZSBib3R0b20gdGFicyAoXCJzbGlkZXJzXCIpIC0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBpbiB0aGUgZm9sbG93aW5nIGZ1bmN0aW9ucywgSUQgaXMgZS5nLiAnaGlzdG9yeS10YWInIChJRCBvZiBvbmUgb2YgdGhlIC5ib3R0b20tdGFiJ3MpXHJcblxyXG4gICAgLy8gdGhpcyBpcyBjYWxsZWQgYnkgbWFwLmN1cnJlbnRUYWJDaGFuZ2VkLCB3aGljaCBpcyB0cmlnZ2VyZWQgYnkgYSAkc2NvcGUuJHdhdGNoXHJcbiAgICB0aGlzLmN1cnJlbnRUYWJDaGFuZ2VkID0gZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygndWksIGN1cnJlbnRUYWJDaGFuZ2VkOiAnICsgbmV3VmFsdWUpO1xyXG4gICAgICAgIHNlbGYuc3RhdGUuY3VycmVudFRhYiA9IG5ld1ZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmN1cnJlbnRUYWJJcyA9IGZ1bmN0aW9uKHRhYklEKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS5jdXJyZW50VGFiID09IHRhYklEO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm9wZW5UYWIgPSBmdW5jdGlvbih0YWJJRCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50VGFiID0gdGFiSUQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY2xvc2VUYWIgPSBmdW5jdGlvbih0YWJJRCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc3RhdGUuY3VycmVudFRhYiA9IG51bGw7IC8vIFRPRE86IHRyaWdnZXIgYXV0b3NhdmVcclxuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRUYWIgPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmRpc2FibGVUYWIgPSBmdW5jdGlvbih0YWJJRCkge1xyXG4gICAgICAgIC8vIHByZXZlbnQgb3BlbmluZyBvdGhlciB0YWJzIHdoZW4gaW4gUCBvciBEIGVkaXRvclxyXG4gICAgICAgIGlmICgkc2NvcGUuY3VycmVudFRhYiA9PSBzZWxmLlRBQl9JRF9QRVJTUEVDVElWRVMgfHwgJHNjb3BlLmN1cnJlbnRUYWIgPT0gc2VsZi5UQUJfSURfRElTVElOQ1RJT05TKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudG9nZ2xlVGFiID0gZnVuY3Rpb24odGFiSUQpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRUYWIgPT0gdGFiSUQpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50VGFiID0gbnVsbDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghc2VsZi5kaXNhYmxlVGFiKHRhYklEKSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRUYWIgPSB0YWJJRDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZU5hdmlnYXRvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc3RhdGUuc2hvd05hdmlnYXRvciA9ICFzZWxmLnN0YXRlLnNob3dOYXZpZ2F0b3I7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudG9nZ2xlWm9vbWluZ1RvUmVnaW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2VsZi56b29taW5nVG9SZWdpb24gPSAhc2VsZi56b29taW5nVG9SZWdpb247XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLSB6b29taW5nIGZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5jYW5ab29tSW4gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gbWFwLmRpYWdyYW0uc2NhbGUgPCAzMjtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jYW5ab29tT3V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5kaWFncmFtLnNjYWxlID4gMC4yNTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy56b29tSW4gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG4gICAgICAgIGlmIChkaWFncmFtLnNjYWxlIDwgMzIpIHtcclxuICAgICAgICAgICAgdmFyIHZiID0gZGlhZ3JhbS52aWV3cG9ydEJvdW5kcy5jb3B5KCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSBkaWFncmFtLnNjYWxlICogMjtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jZW50ZXJSZWN0KHZiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuem9vbU91dCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmRpYWdyYW07XHJcbiAgICAgICAgaWYgKGRpYWdyYW0uc2NhbGUgPiAwLjI1KSB7XHJcbiAgICAgICAgICAgIHZhciB2YiA9IGRpYWdyYW0udmlld3BvcnRCb3VuZHMuY29weSgpO1xyXG4gICAgICAgICAgICBkaWFncmFtLnNjYWxlID0gZGlhZ3JhbS5zY2FsZSAvIDI7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY2VudGVyUmVjdCh2Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm1heWJlWm9vbVRvUmVnaW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZGlhZ3JhbTtcclxuICAgICAgICAvLyB0aGlzIGZsYWcgaXMgc2V0IGJ5IHRoZSB0b29sYmFyIGJ1dHRvblxyXG4gICAgICAgIGlmIChzZWxmLnpvb21pbmdUb1JlZ2lvbikge1xyXG4gICAgICAgICAgICBzZWxmLnpvb21pbmdUb1JlZ2lvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd6b29tVG9SZWdpb24sIHNlbGVjdGlvbiBjb3VudDogJyArIGRpYWdyYW0uc2VsZWN0aW9uLmNvdW50KTtcclxuICAgICAgICAgICAgdmFyIHJlY3QgPSBkaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhkaWFncmFtLnNlbGVjdGlvbik7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uem9vbVRvUmVjdChyZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJlc2V0Wm9vbSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmRpYWdyYW07XHJcbiAgICAgICAgLy92YXIgcmVjdCA9IGRpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKGRpYWdyYW0ubm9kZXMpLmNvcHkoKTtcclxuICAgICAgICB2YXIgcmVjdCA9IG1hcC5zYWZlUmVjdChtYXAuY29tcHV0ZU1hcEJvdW5kcygpKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdyZXNldFpvb20sIGJvdW5kczogJyArIHJlY3QpO1xyXG4gICAgICAgIGlmIChyZWN0LndpZHRoKSB7XHJcbiAgICAgICAgICAgIHJlY3QuaW5mbGF0ZShyZWN0LndpZHRoIC8gNSwgcmVjdC5oZWlnaHQgLyA1KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGlhZ3JhbS56b29tVG9SZWN0KHJlY3QpO1xyXG4gICAgICAgIGRpYWdyYW0uYWxpZ25Eb2N1bWVudChnby5TcG90LkNlbnRlciwgZ28uU3BvdC5DZW50ZXIpO1xyXG4gICAgICAgIGlmIChkaWFncmFtLnNjYWxlID4gMSkge1xyXG4gICAgICAgICAgICBkaWFncmFtLnNjYWxlID0gMTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSB0aGluZyBvcHRpb25zIChsYXlvdXQpIC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmdldFNlbGVjdGVkVGhpbmdzT3JEZWZhdWx0TGF5b3V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNsID0gc2VsZi5nZXRTZWxlY3RlZFRoaW5nc0xheW91dCgpO1xyXG4gICAgICAgIGlmIChzbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2w7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hcEVkaXRvck9wdGlvbnMuZGVmYXVsdFRoaW5nTGF5b3V0O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyBhIG5vbi1udWxsIHZhbHVlIG9ubHkgaWYgYWxsIHNlbGVjdGVkIGl0ZW1zIGFyZSBncm91cHMgd2l0aCB0aGUgc2FtZSBsYXlvdXRcclxuICAgIHRoaXMuZ2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG4gICAgICAgIGlmIChkaWFncmFtID09PSBudWxsIHx8IGRpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIHZhciBsYXlvdXQgPSBudWxsO1xyXG4gICAgICAgIHZhciBpdCA9IGRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCFpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTZWxlY3RlZFRoaW5nc0xheW91dCwgaXQudmFsdWU6ICcgKyBncm91cCk7XHJcbiAgICAgICAgICAgIHZhciBncm91cExheW91dCA9IChncm91cC5kYXRhID8gZ3JvdXAuZGF0YS5sYXlvdXQgOiBudWxsKTtcclxuICAgICAgICAgICAgaWYgKGxheW91dCAhPT0gbnVsbCAmJiBncm91cExheW91dCAhPSBsYXlvdXQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgbGF5b3V0ID0gZ3JvdXBMYXlvdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2dldFNlbGVjdGVkVGhpbmdzTGF5b3V0OiAnICsgbGF5b3V0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGxheW91dDtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0cyB0aGUgbGF5b3V0IG9mIGFsbCBzZWxlY3RlZCB0aGluZ3MgdG8gdGhlIGdpdmVuIGxheW91dFxyXG4gICAgdGhpcy5zZXRTZWxlY3RlZFRoaW5nc0xheW91dCA9IGZ1bmN0aW9uKGxheW91dE5hbWUpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG4gICAgICAgIHZhciBpdCA9IGRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ2xheW91dCcsIGxheW91dE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgbWFwLmxheW91dHMuc2V0RGVzY2VuZGFudExheW91dHMoZ3JvdXAsIGdyb3VwLmRhdGEubGF5b3V0KTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSByZWxhdGlvbnNoaXAgb3B0aW9ucyAoZGlyZWN0aW9uKSAtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5nZXRTZWxlY3RlZFJlbGF0aW9uc2hpcHNPckRlZmF1bHREaXJlY3Rpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc2QgPSBzZWxmLmdldFNlbGVjdGVkUmVsYXRpb25zaGlwc0RpcmVjdGlvbigpO1xyXG4gICAgICAgIGlmIChzZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2Q7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hcEVkaXRvck9wdGlvbnMuZGVmYXVsdFJlbGF0aW9uc2hpcERpcmVjdGlvbjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgYSBub24tbnVsbCB2YWx1ZSBvbmx5IGlmIGFsbCBzZWxlY3RlZCBpdGVtcyBhcmUgcmVsYXRpb25zaGlwcyB3aXRoIHRoZSBzYW1lIGRpcmVjdGlvblxyXG4gICAgdGhpcy5nZXRTZWxlY3RlZFJlbGF0aW9uc2hpcHNEaXJlY3Rpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG4gICAgICAgIGlmIChkaWFncmFtID09PSBudWxsIHx8IGRpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIHZhciB0eXBlID0gbnVsbDtcclxuICAgICAgICB2YXIgaXQgPSBkaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghaXQudmFsdWUgaW5zdGFuY2VvZiBnby5MaW5rKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBsaW5rVHlwZSA9IChsaW5rLmRhdGEgPyBsaW5rLmRhdGEudHlwZSA6IG51bGwpO1xyXG4gICAgICAgICAgICBpZiAodHlwZSAhPT0gbnVsbCAmJiBsaW5rVHlwZSAhPSB0eXBlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHR5cGUgPSBsaW5rVHlwZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0eXBlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzZXRzIHRoZSBkaXJlY3Rpb24gb2YgYWxsIHNlbGVjdGVkIHJlbGF0aW9uc2hpcHMgdG8gdGhlIGdpdmVuIGRpcmVjdGlvblxyXG4gICAgdGhpcy5zZXRTZWxlY3RlZFJlbGF0aW9uc2hpcHNEaXJlY3Rpb24gPSBmdW5jdGlvbihkaXJlY3Rpb24pIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5kaWFncmFtO1xyXG4gICAgICAgIC8vZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY2hhbmdlIHJlbGF0aW9uc2hpcCBkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgdmFyIGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5MaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAvL2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHR5cGVcIik7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShpdC52YWx1ZS5kYXRhLCAndHlwZScsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAvL2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayB0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSByZWxhdGlvbnNoaXAgZGlyZWN0aW9uXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tIGhhbmRsZSBjb3JuZXIgY2xpY2tzIGFuZCBkb3VibGUgY2xpY2tzIC0tLS0tLS0tXHJcblxyXG4gICAgdmFyIF9jb3JuZXJDbGlja2VkID0gbnVsbDtcclxuICAgIHZhciBfY29ybmVyRnVuY3Rpb24gPSBudWxsO1xyXG4gICAgdmFyIF9jb3JuZXJUaW1lb3V0ID0gMzAwO1xyXG5cclxuICAgIHRoaXMuaGFuZGxlQ29ybmVyQ2xpY2sgPSBmdW5jdGlvbihjb3JuZXIsIHRoaW5nLCBjb3VudD0xKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaGFuZGxlQ29ybmVyQ2xpY2s6IGNvcm5lciA9ICcgKyBjb3JuZXIgKyAnLCBjb3JuZXJDbGlja2VkID0gJyArIF9jb3JuZXJDbGlja2VkKTtcclxuICAgICAgICAvLyBhc3N1bWUgaXQncyBhIHNpbmdsZSBjbGljaywgYW5kIHNldCBoYW5kbGVyXHJcbiAgICAgICAgX2Nvcm5lckZ1bmN0aW9uID0gZ2V0Q29ybmVyRnVuY3Rpb24oY29ybmVyLCBjb3VudCk7XHJcbiAgICAgICAgLy8gYWxyZWFkeSBjbGlja2VkLCBzbyBpdCdzIGEgZG91YmxlIGNsaWNrOyBjaGFuZ2UgaGFuZGxlclxyXG4gICAgICAgIC8vIGlmIChfY29ybmVyQ2xpY2tlZCA9PSBjb3JuZXIpIHtcclxuICAgICAgICAvLyAgICAgX2Nvcm5lckZ1bmN0aW9uID0gZ2V0Q29ybmVyRnVuY3Rpb24oY29ybmVyLCAyKTtcclxuICAgICAgICAvLyAgICAgLy9jb25zb2xlLmxvZygnaGFuZGxlQ29ybmVyQ2xpY2s6IGRvdWJsZSBjbGljayBvbiAnICsgY29ybmVyKTtcclxuICAgICAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyByZW1lbWJlciB0aGF0IGF0IGxlYXN0IG9uZSBjbGljayBoYXMgaGFwcGVuZWQgZm9yIHRoZSBjdXJyZW50IGNvcm5lclxyXG4gICAgICAgIF9jb3JuZXJDbGlja2VkID0gY29ybmVyO1xyXG5cclxuICAgICAgICAvLyBzZXQgdGltZXIgdG8gaW52b2tlIHdoYXRldmVyIGhhbmRsZXIgd2UgaGF2ZSByZWFkeSB0byBnbyAodW5sZXNzIGFub3RoZXIgY2xpY2sgaGFwcGVucyB3aXRoaW4gdGhlIGludGVydmFsKVxyXG4gICAgICAgIC8vIHZhciB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIGRpbmchIGludm9rZSBpdFxyXG4gICAgICAgICAgICBpZiAoX2Nvcm5lckZ1bmN0aW9uID09IHNlbGYuc2hvd0Nvcm5lclRpcCkge1xyXG4gICAgICAgICAgICAgICAgX2Nvcm5lckZ1bmN0aW9uKHRoaW5nLCBjb3JuZXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2Nvcm5lckZ1bmN0aW9uKHRoaW5nKTsgLy8gZG9uJ3QgcGFzcyB0aGUgY29ybmVyIGFyZyB0byB0aGluZ3MgbGlrZSBjcmVhdGVDaGlsZCB0aGF0IGhhdmUgYSBkaWZmZXJlbnQgc2Vjb25kIGFyZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IGhhbmRsZXIgYW5kIGNsaWNrZWQgZmxhZ1xyXG4gICAgICAgICAgICBfY29ybmVyRnVuY3Rpb24gPSBnZXRDb3JuZXJGdW5jdGlvbihjb3JuZXIsIDEpO1xyXG4gICAgICAgICAgICBfY29ybmVyQ2xpY2tlZCA9IG51bGw7XHJcbiAgICAgICAgLy99LCBfY29ybmVyVGltZW91dCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldENvcm5lckZ1bmN0aW9uKGNvcm5lciwgY2xpY2tzKSB7XHJcbiAgICAgICAgaWYgKGNvcm5lciA9PSBcIkRcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gKGNsaWNrcyA9PSAxID8gc2VsZi5zaG93Q29ybmVyVGlwIDogbWFwLmNyZWF0ZVNpc3Rlcik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3JuZXIgPT0gXCJTXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IG1hcC50b2dnbGVTRXhwYW5zaW9uIDogbWFwLmNyZWF0ZUNoaWxkKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PSBcIlJcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gKGNsaWNrcyA9PSAxID8gc2VsZi5zaG93Q29ybmVyVGlwIDogbWFwLmNyZWF0ZVJUb1Npc3Rlcik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3JuZXIgPT0gXCJQXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IG1hcC50b2dnbGVQRXhwYW5zaW9uIDogbWFwLnBlcnNwZWN0aXZlcy5zZXRQRWRpdG9yUG9pbnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29ybmVyID09PSBcIlwiKSB7IC8vIGNsaWNrIG9uIHRleHRcclxuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IHNlbGYuc2hvd0Nvcm5lclRpcCA6IGVkaXRUZXh0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRDb3JuZXJGdW5jdGlvbjogbm8gZnVuY3Rpb24gZm91bmQgZm9yIGNvcm5lcjogJyArIGNvcm5lciArICchJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE5COiBpbiB0aGlzIGNhc2UgdGhlIHRoaW5nIGlzIGFjdHVhbGx5IHRoZSBUZXh0Qm94LCBleGNlcHQgaW4gb3V0bGluZSBsYXlvdXQgaXQgaXMgYSBQYW5lbCBpZiB0aGUgYm94IGlzIGRvdWJsZS1jbGlja2VkLi4uXHJcbiAgICBmdW5jdGlvbiBlZGl0VGV4dCh0aGluZywgY29ybmVyKSB7XHJcbiAgICAgICAgaWYgKCEkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2VkaXRUZXh0LCB0aGluZzogJyArIHRoaW5nKTtcclxuICAgICAgICBpZiAodGhpbmcgaW5zdGFuY2VvZiBnby5QYW5lbCkgeyAvLyBvdXRsaW5lIGxheW91dFxyXG4gICAgICAgICAgICB2YXIgcGFydCA9IHRoaW5nLnBhcnQ7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2VkaXRUZXh0LCBwYXJ0OiAnICsgcGFydCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgcGFydC5kYXRhICYmIChwYXJ0LmRhdGEubGF5b3V0ID09ICdsZWZ0JyB8fCBwYXJ0LmRhdGEubGF5b3V0ID09ICdyaWdodCcpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dEJsb2NrTmFtZSA9ICdleHRlcm5hbHRleHQtJyArIHBhcnQuZGF0YS5sYXlvdXQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IHRoaW5nLnBhcnQuZmluZE9iamVjdCh0ZXh0QmxvY2tOYW1lKTtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpbmcgPSB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1hcC5kaWFncmFtLmNvbW1hbmRIYW5kbGVyLmVkaXRUZXh0QmxvY2sodGhpbmcpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tIGhlbHAgdGlwIGZ1bmN0aW9ucyAtIHNlZSBhbHNvIHVzZXIuanMsIHZpZXdzL21hcHMvaGVscF90YWIgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gc2hvd3MgdGhpbmdUaXAgb3Igb25lIG9mIHRoZSBjb3JuZXJYVGlwc1xyXG4gICAgdGhpcy5zaG93Q29ybmVyVGlwID0gZnVuY3Rpb24odGhpbmcsIGNvcm5lcikge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3Nob3dDb3JuZXJUaXAnKTtcclxuICAgICAgICBpZiAoY29ybmVyID09PSAnJykge1xyXG4gICAgICAgICAgICBzZWxmLnNob3dIZWxwVGlwKCd0aGluZ1RpcCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2hvd0hlbHBUaXAoJ2Nvcm5lcicgKyBjb3JuZXIgKyAnVGlwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNob3dIZWxwVGlwID0gZnVuY3Rpb24odGlwKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0hlbHBUaXA6ICcgKyB0aXApO1xyXG5cclxuICAgICAgICAvLyBkb24ndCBzaG93IGhlbHAgaWYgaW4gcHJlc2VudGVyXHJcbiAgICAgICAgaWYgKHNlbGYuY3VycmVudFRhYklzKHNlbGYuVEFCX0lEX1BSRVNFTlRFUikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZi5oZWxwVGlwID0gdGlwO1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcclxuICAgICAgICAkKCcjaGVscC10aXAnKS5zaG93KCk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQoJyNoZWxwLXRpcCcpLmZhZGVPdXQoNTAwLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaGVscFRpcCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIDUwMDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZWRpdCBtYXAgVXNlclRhZ3MgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLnRhZ2dpbmcgPSBuZXcgU2FuZGJhbmtUYWdnaW5nKCRzY29wZSwgJGh0dHAsICRyZXNvdXJjZSwgJG1vZGFsLCAkbG9nKTtcclxuXHJcbiAgICB0aGlzLmVkaXRVc2VyVGFncyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS50YWdnaW5nLm9wZW5Nb2RhbChcclxuICAgICAgICAgICAgWyRzY29wZS5tYXBJZF0sXHJcbiAgICAgICAgICAgIHRydWUsIC8vIHNob3cgZGVzY3JpcHRpb24gZmllbGRcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuYXV0b3NhdmUuc2F2ZU5vdygnZWRpdF91c2VydGFncycpO1xyXG4gICAgICAgICAgICB9IC8vIG9uIHVwZGF0ZVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBlZGl0IG1hcCBzaGFyaW5nIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5zaGFyaW5nID0gbmV3IFNhbmRiYW5rU2hhcmluZygkc2NvcGUsICRodHRwLCAkcmVzb3VyY2UsICRtb2RhbCwgJGxvZyk7XHJcblxyXG4gICAgdGhpcy5lZGl0TWFwU2hhcmVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnNoYXJpbmcub3Blbk1vZGFsKFxyXG4gICAgICAgICAgICBbJHNjb3BlLm1hcElkXSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7fSAvLyBvbiB1cGRhdGVcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gcHJpbnQvZXhwb3J0IHRvIGltYWdlIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMucHJpbnRTbGlkZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBzdGFydFNwaW5uZXIoKTtcclxuICAgICAgICBtYXAucHJlc2VudGVyLmNyZWF0ZVNsaWRlVGh1bWJuYWlscygpO1xyXG4gICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgd2luZG93LnByaW50KCk7XHJcbiAgICAgICAgfSwgNTAwKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIE1JTExJT04gPSAxMDAwICogMTAwMDtcclxuXHJcbiAgICB0aGlzLmV4cG9ydFRvSW1hZ2UgPSBmdW5jdGlvbihmb3JtYXQpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLmltYWdlRXhwb3J0TG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgJCgnI2V4cG9ydC1pbWFnZSBpbWcnKS5yZW1vdmUoKTtcclxuICAgICAgICBtYXAudGVtcGxhdGVzLnNob3dFeHBvcnRGb290ZXIoKTtcclxuXHJcbiAgICAgICAgdmFyIHJlY3QgPSBtYXAuZGlhZ3JhbS5jb21wdXRlUGFydHNCb3VuZHMobWFwLmRpYWdyYW0ubm9kZXMpLmNvcHkoKTtcclxuXHJcbiAgICAgICAgdmFyIGltYWdlTUIgPSByZWN0LndpZHRoICogcmVjdC5oZWlnaHQgKiA0IC8gTUlMTElPTjsgLy8gNCBieXRlcy9waXhlbFxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2ltYWdlTUI6ICcgKyBpbWFnZU1CKTtcclxuXHJcbiAgICAgICAgLy8gbWFrZSB0aGUgbWF4IHNpemUgb2YgdGhlIGltYWdlIDEwTUJcclxuICAgICAgICAvLyBwbmdTaXplID0gaW1hZ2VNQiAqIHNjYWxlICogc2NhbGVcclxuICAgICAgICAvLyBzbyBtYXggc2NhbGUgPSBzcXJ0KHBuZ1NpemUgLyBpbWFnZU1CKVxyXG4gICAgICAgIC8vIFRoZXNlIGNhbGN1bGF0aW9ucyBkb24ndCBzZWVtIHRvIGJlIHJpZ2h0LCBidXQgaW4gcHJhY3RpY2UgdXNpbmcgNTAwIGhlcmVcclxuICAgICAgICAvLyB3ZSBnZXQgYSBzY2FsZSBvZiAyLjQzIGZvciBhbiBpbWFnZSAxOTk4NCB4IDM0MjQgcGl4ZWxzXHJcbiAgICAgICAgLy8gd2hpY2ggcmVzdWx0cyBpbiBhIGZpbGUgc2l6ZSBvZiAxLjg4IE1CIGF0IDMyIGJpdHMvcGl4ZWwuLi5cclxuICAgICAgICAvLyBPUiAyODM4MCB4IDUxOTYgcGl4ZWxzLCBzY2FsZSA9IDMuNDEgPT4gZmlsZSBzaXplID0gMy40OSBNQlxyXG4gICAgICAgIHZhciBzY2FsZSA9IDQ7XHJcbiAgICAgICAgaWYgKGltYWdlTUIpIHtcclxuICAgICAgICAgICAgc2NhbGUgPSBNYXRoLm1pbig0LCBNYXRoLnNxcnQoNTAgLyBpbWFnZU1CKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdpbWFnZSBkaW1lbnNpb25zOiAnICsgcmVjdC53aWR0aCArICcgeCAnICsgcmVjdC5oZWlnaHQgKyAnLCBpbWFnZSBieXRlczogJyArIChyZWN0LndpZHRoICogcmVjdC5oZWlnaHQgKiA0KSArIFxyXG4gICAgICAgIC8vICAgICAgICAnLCBpbWFnZU1COiAnICsgaW1hZ2VNQiArICcsIHNjYWxlOiAnICsgc2NhbGUpO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2hvd0ltYWdlRXhwb3J0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdmFyIHBhcnRzVG9FeHBvcnQgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHBhcnRzVG9FeHBvcnQuYWRkQWxsKG1hcC5kaWFncmFtLm5vZGVzKTtcclxuICAgICAgICBwYXJ0c1RvRXhwb3J0LmFkZEFsbChtYXAuZGlhZ3JhbS5saW5rcyk7XHJcbiAgICAgICAgcGFydHNUb0V4cG9ydC5yZW1vdmUobWFwLnByZXNlbnRlci5zbGlkZUJsb2NrZXIpO1xyXG5cclxuICAgICAgICB2YXIgZG9JbWFnZSA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgaW1nID0gbWFwLmRpYWdyYW0ubWFrZUltYWdlKHtcclxuICAgICAgICAgICAgICAgIHBhcnRzOiBwYXJ0c1RvRXhwb3J0LFxyXG4gICAgICAgICAgICAgICAgbWF4U2l6ZTogbmV3IGdvLlNpemUoKHJlY3Qud2lkdGggKyAyMDApICogc2NhbGUsIChyZWN0LmhlaWdodCArIDIwMCkgKiBzY2FsZSksXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogc2NhbGUsXHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMDAgKiBzY2FsZSxcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICcjZmZmZmZmJ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQoJyNleHBvcnQtaW1hZ2UnKS5hcHBlbmQoaW1nKTtcclxuICAgICAgICAgICAgJHNjb3BlLmltYWdlRXhwb3J0TG9hZGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgbWFwLnRlbXBsYXRlcy5oaWRlRXhwb3J0Rm9vdGVyKCk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIHV0aWxzIC0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLnNwbGl0TGluZXMgPSBmdW5jdGlvbih0ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRleHQuc3BsaXQoL1xcbi8pO1xyXG4gICAgfTtcclxufTsiLCJ3aW5kb3cuU2FuZGJhbmsgPSB7fTtcclxuY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XHJcbi8vIHRoZSB0b3Btb3N0IGNvbnRyb2xsZXIgZm9yIHRoZSBhcHBcclxuXHJcbndpbmRvdy5Vc2VyQ3RybCA9IGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJGh0dHAsICRtb2RhbCwgJHVwbG9hZCkge1xyXG5cclxuICAgIC8vIHF1ZXJ5IHN0cmluZyBwYXJhbXNcclxuICAgICRzY29wZS5wYXJhbXMgPSBVUkkod2luZG93LmxvY2F0aW9uKS5xdWVyeSh0cnVlKTtcclxuXHJcbiAgICAvLyBhdXRvLW9wZW4gdGhpbmtxdWVyeT9cclxuICAgICRzY29wZS50aGlua3F1ZXJ5ID0gKCRzY29wZS5wYXJhbXMudGhpbmtxdWVyeSA/IHRydWUgOiBmYWxzZSk7XHJcblxyXG4gICAgJHNjb3BlLnVzZXJJZCA9IHdpbmRvdy51c2VySWQ7IC8vIHNldCBpbiBsYXlvdXRzL3VzZXJcclxuICAgICRzY29wZS51c2VySXNBZG1pbiA9IHdpbmRvdy51c2VySXNBZG1pbjtcclxuICAgICRzY29wZS51c2VyTmFtZSA9ICcnO1xyXG4gICAgJHNjb3BlLnVzZXJQcm9maWxlID0gbnVsbDtcclxuICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICcnO1xyXG4gICAgJHNjb3BlLnBhc3N3b3JkID0gJyc7XHJcbiAgICAkc2NvcGUucGFzc3dvcmRDb25maXJtID0gJyc7XHJcblxyXG4gICAgJHNjb3BlLmdldE5ld1dpbmRvd05hbWUgPSBmdW5jdGlvbihhY3Rpb24sIG1hcElkKSB7XHJcbiAgICAgICAgaWYgKGFjdGlvbiA9PSAnVklFV19NQVAnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnVklFV19NQVBfJyArIG1hcElkO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gc2hvdy9oaWRlIHRlc3RzIFVJIGFuZCBtb2RlbCBkZWJ1ZyBmb3JtXHJcbiAgICAkc2NvcGUuc2hvd1Rlc3RzID0gZmFsc2U7XHJcbiAgICAkc2NvcGUuc2hvd01vZGVsID0gZmFsc2U7XHJcblxyXG4gICAgJHNjb3BlLnRvZ2dsZVNob3dUZXN0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zaG93VGVzdHMgPSAhJHNjb3BlLnNob3dUZXN0cztcclxuICAgIH07XHJcbiAgICAkc2NvcGUudG9nZ2xlU2hvd01vZGVsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnNob3dNb2RlbCA9ICEkc2NvcGUuc2hvd01vZGVsO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc2V0VXNlcklkID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAkc2NvcGUudXNlcklkID0gaWQ7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZpeFJvd0hlaWdodHMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG1ha2UgYWxsIGNlbGxzIGluIGEgcm93IHRoZSBzYW1lIGhlaWdodFxyXG4gICAgZnVuY3Rpb24gZml4Um93SGVpZ2h0cygpIHtcclxuICAgICAgICAvLyB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyAgICAgJCgnLnJvdy1oZWlnaHQnKS5lYWNoKGZ1bmN0aW9uKCkgeyAgXHJcbiAgICAgICAgLy8gICAgICAgICB2YXIgaGlnaGVzdEJveCA9IDA7XHJcbiAgICAgICAgLy8gICAgICAgICAkKCc+IGRpdicsIHRoaXMpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAvLyAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oZWlnaHQoKSA+IGhpZ2hlc3RCb3gpIFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBoaWdoZXN0Qm94ID0gJCh0aGlzKS5oZWlnaHQoKTtcclxuICAgICAgICAvLyAgICAgICAgIH0pOyAgXHJcbiAgICAgICAgLy8gICAgICAgICAkKCc+IGRpdicsIHRoaXMpLmhlaWdodChoaWdoZXN0Qm94KTtcclxuICAgICAgICAvLyAgICAgfSk7ICAgICAgICBcclxuICAgICAgICAvLyB9LCAzMDApO1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICgkc2NvcGUudXNlcklkKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAnL3VzZXJzLycgKyAkc2NvcGUudXNlcklkICsgJy9wcm9maWxlLmpzb24nO1xyXG4gICAgICAgICAgICB3aW5kb3cuc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICRodHRwLmdldCh1cmwpLnRoZW4oXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkgeyAvLyBzdWNjZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJQcm9maWxlID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBpbml0U2VsZWN0ZWRBZG1pblRhZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBpbml0U2VsZWN0ZWRGb2xsb3dhYmxlT3JncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2NzVGFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2NzVGFnZ2luZy5sb2FkQ2NzVGFncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc3RvcFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmaXhSb3dIZWlnaHRzKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVhc29uKSB7IC8vIGVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBsb2FkIHVzZXIgcHJvZmlsZSBkYXRhJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gY291cnNlcy9zdWJzY3JpcHRpb25zIC0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIG9wZW4gdGhlIFN0cmlwZSBDaGVja291dCBkaWFsb2cgYW5kIGdldCBhIHRva2VuXHJcbiAgICAvLyBOQjogYW1vdW50IGlzIHN0b3JlZCBpbiB0aGUgU3RyaXBlIHBsYW4gZGVmaW5pdGlvblxyXG4gICAgJHNjb3BlLmFkZFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uKHBsYW4pIHtcclxuICAgICAgICB2YXIgaGFuZGxlciA9IFN0cmlwZUNoZWNrb3V0LmNvbmZpZ3VyZSh7XHJcbiAgICAgICAgICAgIGtleTogJHNjb3BlLnVzZXJQcm9maWxlLmFjY291bnQuc3RyaXBlS2V5LFxyXG4gICAgICAgICAgICBuYW1lOiBcIlN1YnNjcmliZSB0byBNZXRhTWFwXCIsXHJcbiAgICAgICAgICAgIGltYWdlOiBcIi9hc3NldHMvYmFkZ2UtbG9nby02NC5wbmdcIixcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHBsYW4ubmFtZSxcclxuICAgICAgICAgICAgcGFuZWxMYWJlbDogXCJQYXkge3thbW91bnR9fS9cIiArIHBsYW4uaW50ZXJ2YWwsXHJcbiAgICAgICAgICAgIGFtb3VudDogcGxhbi5wcmljZSxcclxuICAgICAgICAgICAgYWxsb3dSZW1lbWJlck1lOiBmYWxzZSxcclxuICAgICAgICAgICAgZW1haWw6ICRzY29wZS51c2VyUHJvZmlsZS51c2VyLmVtYWlsLFxyXG4gICAgICAgICAgICB0b2tlbjogZnVuY3Rpb24odG9rZW4sIGFyZ3MpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Rva2VuOiAnLCB0b2tlbik7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvY2hhcmdlcy9zdWJzY3JpYmUnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhbl9pZDogcGxhbi5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuX2lkOiB0b2tlbi5pZFxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnU3Vic2NyaXB0aW9uIGNyZWF0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LmVycm9yKCdTdWJzY3JpcHRpb24gY291bGQgbm90IGJlIGNyZWF0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBoYW5kbGVyLm9wZW4oKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gZm9yIGJ1eS1jb3Vyc2UtYnV0dG9uIGRpcmVjdGl2ZVxyXG4gICAgJHNjb3BlLmdldEJ1eUJ1dHRvbkxhYmVsID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICB2YXIgY291cnNlO1xyXG4gICAgICAgIGlmIChjb3Vyc2UgPSBnZXRGcmVlQ291cnNlKGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0ZyZWUnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY291cnNlID0gZ2V0RW5yb2xsZWRDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnRW5yb2xsZWQnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY291cnNlID0gZ2V0RW5yb2xsYWJsZUNvdXJzZShpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdFbnJvbGwgLSAkJyArIChjb3Vyc2UucHJpY2UgLyAxMDApLnRvRml4ZWQoMik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmdldENvdXJzZVN0YXR1c1N1bW1hcnkgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIHZhciBjb3Vyc2UgPSAkc2NvcGUuZ2V0Q291cnNlKGlkKTtcclxuICAgICAgICBpZiAoY291cnNlKSB7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gY291cnNlLnN0ZXBzQ29tcGxldGVkICsgJyBvZiAnICsgY291cnNlLnN0ZXBzICsgJyBzdGVwcyBjb21wbGV0ZWQnO1xyXG4gICAgICAgICAgICBpZiAoY291cnNlLmVucm9sbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGV4dCA9IFwiRW5yb2xsZWQgXCIgKyBjb3Vyc2UuZW5yb2xtZW50LmRhdGUgK1xyXG4gICAgICAgICAgICAgICAgICAgIChjb3Vyc2UuZW5yb2xtZW50LnN0cmlwZURhdGEucmVmdW5kZWQgPyBcIiAoUmVmdW5kZWQpXCIgOiBcIlwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAtICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZS5jb2RlICsgJyAtICcgKyB0ZXh0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmdldENvdXJzZUNvbXBsZXRlZFBlcmNlbnQgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIHZhciBjb3Vyc2UgPSAkc2NvcGUuZ2V0Q291cnNlKGlkKTtcclxuICAgICAgICBpZiAoY291cnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2Uuc3RlcHNDb21wbGV0ZWRQZXJjZW50O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLm1heWJlQnV5Q291cnNlID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICB2YXIgY291cnNlO1xyXG4gICAgICAgIGlmIChjb3Vyc2UgPSBnZXRGcmVlQ291cnNlKGlkKSkge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvY291cnNlcy8nICsgY291cnNlLmlkO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY291cnNlID0gZ2V0RW5yb2xsZWRDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9jb3Vyc2VzLycgKyBjb3Vyc2UuaWQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxhYmxlQ291cnNlKGlkKSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuYnV5Q291cnNlKGNvdXJzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZ2V0Q291cnNlID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICB2YXIgY291cnNlO1xyXG4gICAgICAgIGlmIChjb3Vyc2UgPSBnZXRGcmVlQ291cnNlKGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY291cnNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY291cnNlID0gZ2V0RW5yb2xsZWRDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxhYmxlQ291cnNlKGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY291cnNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RnJlZUNvdXJzZShpZCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGUgJiYgXy5maW5kKCRzY29wZS51c2VyUHJvZmlsZS5mcmVlQWNjZXNzaWJsZUNvdXJzZXMsIGZ1bmN0aW9uKGNvdXJzZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY291cnNlLmlkID09IGlkICYmIGNvdXJzZS5lbnJvbG1lbnQgPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEVucm9sbGVkQ291cnNlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZSAmJiBfLmZpbmQoJHNjb3BlLnVzZXJQcm9maWxlLmZyZWVBY2Nlc3NpYmxlQ291cnNlcywgZnVuY3Rpb24oY291cnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2UuaWQgPT0gaWQgJiYgY291cnNlLmVucm9sbWVudCAhPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEVucm9sbGFibGVDb3Vyc2UoaWQpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlICYmIF8uZmluZCgkc2NvcGUudXNlclByb2ZpbGUubm9uRnJlZUFjY2Vzc2libGVDb3Vyc2VzLCBmdW5jdGlvbihjb3Vyc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZS5pZCA9PSBpZDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBvcGVuIHRoZSBTdHJpcGUgQ2hlY2tvdXQgZGlhbG9nIGFuZCBnZXQgYSB0b2tlblxyXG4gICAgLy8gTkI6IGFtb3VudCBpcyBwYXNzZWQgZnJvbSBvdXIgY291cnNlIGRlZmluaXRpb25cclxuICAgICRzY29wZS5idXlDb3Vyc2UgPSBmdW5jdGlvbihjb3Vyc2UpIHtcclxuICAgICAgICB2YXIgaGFuZGxlciA9IFN0cmlwZUNoZWNrb3V0LmNvbmZpZ3VyZSh7XHJcbiAgICAgICAgICAgIGtleTogJHNjb3BlLnVzZXJQcm9maWxlLmFjY291bnQuc3RyaXBlS2V5LFxyXG4gICAgICAgICAgICBuYW1lOiBcIkVucm9sbCBpbiBDb3Vyc2VcIixcclxuICAgICAgICAgICAgaW1hZ2U6IFwiL2Fzc2V0cy9iYWRnZS1sb2dvLTY0LnBuZ1wiLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogY291cnNlLmNvZGUsXHJcbiAgICAgICAgICAgIGFtb3VudDogY291cnNlLnByaWNlLFxyXG4gICAgICAgICAgICBhbGxvd1JlbWVtYmVyTWU6IGZhbHNlLFxyXG4gICAgICAgICAgICBlbWFpbDogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgIHRva2VuOiBmdW5jdGlvbih0b2tlbiwgYXJncykge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndG9rZW46ICcsIHRva2VuKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9jaGFyZ2VzL2J1eV9jb3Vyc2UnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291cnNlX2NvZGU6IGNvdXJzZS5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdXJzZV9wcmljZTogY291cnNlLnByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuX2lkOiB0b2tlbi5pZFxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnQ291cnNlIHB1cmNoYXNlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbG9hZCBwYWdlIHRvIGhhbmRsZSBzdHJpcGUgYnVnICg/KSAtIGxpbmtzIG5vdCBjbGlja2FibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LmVycm9yKCdDb3Vyc2UgcHVyY2hhc2UgY291bGQgbm90IGJlIGNvbXBsZXRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc3RyaXBlIGVycm9yOiAnLCByZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaGFuZGxlci5vcGVuKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jYW5jZWxTdWJzY3JpcHRpb24gPSBmdW5jdGlvbihzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICB3aW5kb3cuc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvY2hhcmdlcy91bnN1YnNjcmliZT9zdWJzY3JpcHRpb25faWQ9JyArIHN1YnNjcmlwdGlvbi5pZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5zdWNjZXNzKCdTdWJzY3JpcHRpb24gY2FuY2VsbGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LmVycm9yKCdTdWJzY3JpcHRpb24gY291bGQgbm90IGJlIGNhbmNlbGxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBkZWJ1Zy90ZXN0IG9ubHlcclxuICAgICRzY29wZS5jbGVhckN1c3RvbWVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgd2luZG93LnN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgICRodHRwLmRlbGV0ZSgnL2NoYXJnZXMvY2xlYXJfY3VzdG9tZXInKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ0N1c3RvbWVyIGNsZWFyZWQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuZXJyb3IoJ0N1c3RvbWVyIGNvdWxkIG5vdCBiZSBjbGVhcmVkJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIHBvaW50cyBhbmQgYmFkZ2VzIC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuaGFzQ3VycmVudEJhZGdlID0gZnVuY3Rpb24oa2V5LCBsZXZlbCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGUgJiYgJHNjb3BlLnVzZXJQcm9maWxlLmJhZGdlcy5jdXJyZW50W2tleV0gPT0gbGV2ZWw7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5oYXNOZXdCYWRnZSA9IGZ1bmN0aW9uKGtleSwgbGV2ZWwpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlICYmICRzY29wZS51c2VyUHJvZmlsZS5iYWRnZXMubmV3W2tleV0gPT0gbGV2ZWw7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5oYXNOZXdCYWRnZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlICYmIF8ua2V5cygkc2NvcGUudXNlclByb2ZpbGUuYmFkZ2VzLm5ldykubGVuZ3RoID4gMDtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmdldEJhZGdlRGVmaW5pdGlvbiA9IGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgIHJldHVybiBfLmZpbmRXaGVyZSgkc2NvcGUudXNlclByb2ZpbGUuYmFkZ2VzLmRlZmluaXRpb25zLCB7XHJcbiAgICAgICAgICAgIGtleToga2V5XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gdHV0b3JpYWwgLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgICRzY29wZS50dXRvcmlhbEVuYWJsZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5tYXBEYXRhICE9PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gc3RhcnQgdHV0b3JpYWw6XHJcbiAgICAgICAgdmFyIF90dXRvcmlhbCA9IG5ldyBTYW5kYmFua0VkaXRvci5UdXRvcmlhbCgpO1xyXG5cclxuICAgICAgICAkc2NvcGUuc3RhcnRUdXRvcmlhbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBfdHV0b3JpYWwuc3RhcnQoKTtcclxuICAgICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZSkge31cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBmZWVkYmFjayBmb3JtIC0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLmZlZWRiYWNrID0gJyc7XHJcblxyXG4gICAgJHNjb3BlLnRvZ2dsZUZlZWRiYWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCgnI2ZlZWRiYWNrLWRyb3Bkb3duJykuc2xpZGVUb2dnbGUoJ2Zhc3QnKS5maW5kKCd0ZXh0YXJlYScpLmdldCgwKS5mb2N1cygpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc3VibWl0RmVlZGJhY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLmZlZWRiYWNrID09PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm47IC8vIGVtcHR5IGlucHV0Li4uXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIHVybDogJy91c2Vycy9mZWVkYmFjaycsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLmhyZWYsXHJcbiAgICAgICAgICAgICAgICBmZWVkYmFjazogJHNjb3BlLmZlZWRiYWNrXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZlZWRiYWNrID0gJyc7XHJcbiAgICAgICAgICAgICAgICBhbGVydCgnVGhhbmsgeW91IGZvciB5b3VyIGZlZWRiYWNrIScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZXJyb3IoJ2Vycm9yIHNlbmRpbmcgZmVlZGJhY2s6ICcsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnI2ZlZWRiYWNrLWRyb3Bkb3duJykuc2xpZGVUb2dnbGUoJ2Zhc3QnKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIHVzZXIncyB1c2VyIHRhZ3MgLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBOQjogdGhpcyBpcyBzaW1pbGFyIHRvIG1hcHMgdGFnZ2luZyBpbiB0YWdnaW5nLmpzIC0gYnV0IHNpbXBsZXIsIGFzIHdlIGRvIG5vdCBoYXZlIHRvIGRlYWwgd2l0aCBcclxuICAgIC8vIG11bHRpcGxlIHRhZ2dhYmxlIGl0ZW1zLCB3aGljaCBtZWFucyB0cmFja2luZyBleGlzdGluZyB2cy4gbmV3IHRhZ3MsIGV0Yy4uLlxyXG5cclxuICAgICRzY29wZS5uZXdUYWcgPSB7XHJcbiAgICAgICAgbmFtZTogJydcclxuICAgIH07XHJcblxyXG4gICAgLy8gdGFnIGF1dG9jb21wbGV0ZVxyXG4gICAgJHNjb3BlLmdldFVzZXJUYWdzID0gZnVuY3Rpb24odmlld1ZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHVybCA9ICcvdXNlcl90YWdzL2xpc3QuanNvbj9xPScgKyB2aWV3VmFsdWU7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEudGFncztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnVwZGF0ZVVzZXJVc2VyVGFncyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB0YWdMaXN0ID0gXy5wbHVjaygkc2NvcGUudXNlclByb2ZpbGUudXNlclRhZ3MsICduYW1lJykuam9pbignLCcpO1xyXG4gICAgICAgICRodHRwLnB1dCgnL3VzZXJfdGFncy91cGRhdGVfdXNlcl91c2VyX3RhZ3MnLCBbdGFnTGlzdF0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdUYWdzIHNhdmVkJztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgdGFncyc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZGVsZXRlVGFnID0gZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgdmFyIGkgPSBfLmluZGV4T2YoJHNjb3BlLnVzZXJQcm9maWxlLnVzZXJUYWdzLCB0YWcpO1xyXG4gICAgICAgICRzY29wZS51c2VyUHJvZmlsZS51c2VyVGFncy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZVVzZXJVc2VyVGFncygpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudGFnU2VsZWN0ZWQgPSBmdW5jdGlvbihpdGVtLCBtb2RlbCwgbGFiZWwpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd0YWdTZWxlY3RlZDogJywgaXRlbSwgbW9kZWwsIGxhYmVsKTtcclxuICAgICAgICAkc2NvcGUuYWRkVGFnKGl0ZW0ubmFtZSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5lZGl0aW5nVGFnS2V5cHJlc3MgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmFkZFRhZygkc2NvcGUubmV3VGFnLm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmFkZFRhZyA9IGZ1bmN0aW9uKHRhZ05hbWUpIHtcclxuICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUudXNlclRhZ3MucHVzaCh7XHJcbiAgICAgICAgICAgIG5hbWU6IHRhZ05hbWVcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUubmV3VGFnLm5hbWUgPSAnJztcclxuICAgICAgICAkc2NvcGUudXBkYXRlVXNlclVzZXJUYWdzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLSB1c2VyJ3MvbWFwJ3MgQ0NTIHRhZ3MgLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyB0aGlzIG1hbmFnZXMgQ0NTIHRhZ3MgZm9yIGVpdGhlciB0aGUgY3VycmVudCB1c2VyIG9yIHRoZSBjdXJyZW50IG1hcCwgXHJcbiAgICAvLyBkZXBlbmRpbmcgd2hpY2ggcGFnZSB3ZSdyZSBvbiAtIG1hcElkIGdldHMgb3ZlcnJpZGRlbiBpbiBlZGl0b3IuanMgaWYgd2UncmUgZWRpdGluZyBhIG1hcFxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgJHNjb3BlLmNjc1RhZ2dpbmcgPSBuZXcgU2FuZGJhbmtDY3NUYWdnaW5nKCRzY29wZSwgJGh0dHAsICRtb2RhbCk7XHJcbiAgICAgICAgJHNjb3BlLmNjc1RhZ2dpbmcubWFwSWQgPSBudWxsO1xyXG4gICAgfSBjYXRjaCAoZSkge31cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0gdXNlcidzIGFkbWluIHRhZ3MgLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBrZXkgKGluZGV4KTogYWRtaW4gdGFnIElEOyB2YWx1ZTogdHJ1ZS9mYWxzZSAoaWYgdXNlciBmb2xsb3dzIHRoZSBhZG1pbiB0YWcpXHJcbiAgICAkc2NvcGUuc2VsZWN0ZWRVc2VyQWRtaW5UYWdzID0gW107XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdFNlbGVjdGVkQWRtaW5UYWdzKCkge1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZFVzZXJBZG1pblRhZ3MgPSBbXTtcclxuICAgICAgICBfLmVhY2goJHNjb3BlLnVzZXJQcm9maWxlLmFkbWluVGFncywgZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgICAgIGlmIChfLmZpbmRXaGVyZSgkc2NvcGUudXNlclByb2ZpbGUudXNlckFkbWluVGFncywge1xyXG4gICAgICAgICAgICAgICAgaWQ6IHRhZy5pZFxyXG4gICAgICAgICAgICB9KSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVXNlckFkbWluVGFnc1t0YWcuaWRdID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS51cGRhdGVVc2VyQWRtaW5UYWdzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkVGFnTmFtZXMgPSBfLm1hcCgkc2NvcGUudXNlclByb2ZpbGUuYWRtaW5UYWdzLCBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRzY29wZS5zZWxlY3RlZFVzZXJBZG1pblRhZ3NbdGFnLmlkXSA/IHRhZy5uYW1lIDogbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgdGFnTGlzdCA9IF8ud2l0aG91dChzZWxlY3RlZFRhZ05hbWVzLCBudWxsKS5qb2luKCcsJyk7XHJcbiAgICAgICAgJGh0dHAucHV0KCcvYWRtaW5fdGFncy91cGRhdGVfdXNlcl9hZG1pbl90YWdzJywgW3RhZ0xpc3RdKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnSW50ZXJlc3RzIHNhdmVkJztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgaW50ZXJlc3RzJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLSB1c2VyJ3MgZm9sbG93ZWQgb3JncyAtLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGtleSAoaW5kZXgpOiBvcmcgSUQ7IHZhbHVlOiB0cnVlL2ZhbHNlIChpZiB1c2VyIGZvbGxvd3MgdGhlIG9yZylcclxuICAgICRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zID0gW107XHJcblxyXG4gICAgJHNjb3BlLnVzZXJJc0ZvbGxvd2luZ09yZyA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zW2lkXTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnRvZ2dsZVVzZXJGb2xsb3dpbmdPcmcgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIGlmICghJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbaWRdIHx8IGNvbmZpcm0oJ1N0b3AgZm9sbG93aW5nIHRoaXMgVGhpbmtOYXRpb24/JykpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbaWRdID0gISRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zW2lkXTtcclxuICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUZvbGxvd2VkT3JnYW5pemF0aW9ucygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdFNlbGVjdGVkRm9sbG93YWJsZU9yZ3MoKSB7XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnMgPSBbXTtcclxuICAgICAgICBfLmVhY2goJHNjb3BlLnVzZXJQcm9maWxlLmZvbGxvd2VkT3JnYW5pemF0aW9ucywgZnVuY3Rpb24ob3JnKSB7XHJcbiAgICAgICAgICAgIGlmIChfLmZpbmRXaGVyZSgkc2NvcGUudXNlclByb2ZpbGUuZm9sbG93YWJsZU9yZ2FuaXphdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgIGlkOiBvcmcuaWRcclxuICAgICAgICAgICAgfSkpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zW29yZy5pZF0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLnVwZGF0ZUZvbGxvd2VkT3JnYW5pemF0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBzZWxlY3RlZE9yZ0lkcyA9IF8ubWFwKCRzY29wZS51c2VyUHJvZmlsZS5mb2xsb3dhYmxlT3JnYW5pemF0aW9ucywgZnVuY3Rpb24ob3JnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkc2NvcGUuc2VsZWN0ZWRGb2xsb3dhYmxlT3JnYW5pemF0aW9uc1tvcmcuaWRdID8gb3JnLmlkIDogbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgb3JnSWRMaXN0ID0gXy53aXRob3V0KHNlbGVjdGVkT3JnSWRzLCBudWxsKS5qb2luKCcsJyk7XHJcbiAgICAgICAgJGh0dHAucHV0KCcvb3JnYW5pemF0aW9uX2ZvbGxvd3MvdXBkYXRlX3VzZXJfb3JnYW5pemF0aW9uX2ZvbGxvd3MnLCBbb3JnSWRMaXN0XSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1RoaW5rTmF0aW9ucyBzYXZlZCc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ0NvdWxkIG5vdCBzYXZlIFRoaW5rTmF0aW9ucyc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0gdXNlcidzIG9yZyBtZW1iZXJzaGlwcyAtLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5qb2luTmF0aW9uID0gbmV3IFNhbmRiYW5rSm9pbk5hdGlvbigkc2NvcGUsICRodHRwLCAkbW9kYWwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldE1lbWJlcnNoaXBGb3JPcmcoaWQpIHtcclxuICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUoJHNjb3BlLnVzZXJQcm9maWxlLm1lbWJlcnNoaXBzLCB7XHJcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBpZFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS51c2VySXNNZW1iZXJPZk9yZyA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS51c2VyUHJvZmlsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKGdldE1lbWJlcnNoaXBGb3JPcmcoaWQpICE9IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnRvZ2dsZVVzZXJNZW1iZXJPZk9yZyA9IGZ1bmN0aW9uKGlkLCBuYW1lKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS51c2VySXNNZW1iZXJPZk9yZyhpZCkpIHtcclxuICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1JlbW92ZSB5b3VyIG1lbWJlcnNoaXAgaW4gdGhpcyBUaGlua05hdGlvbj8nKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lbWJlcnNoaXAgPSBnZXRNZW1iZXJzaGlwRm9yT3JnKGlkKTtcclxuICAgICAgICAgICAgICAgICRodHRwLmRlbGV0ZSgnL21lbWJlcnNoaXBzLycgKyBtZW1iZXJzaGlwLmlkICsgJy5qc29uJylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkc2NvcGUuam9pbk5hdGlvbi5vcGVuTW9kYWwoXHJcbiAgICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgICAgIG5hbWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZm9sbG93aW5nIG90aGVyIHVzZXJzIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5mb2xsb3dVc2VyID0gZnVuY3Rpb24odXNlcikge1xyXG4gICAgICAgICRodHRwLnBvc3QoJy91c2VyX2ZvbGxvd3MuanNvbicsIHtcclxuICAgICAgICAgICAgZm9sbG93ZWVfaWQ6IHVzZXIuaWRcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyLmZvbGxvd0lkID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ1lvdSBhcmUgbm93IGZvbGxvd2luZyAnICsgdXNlci5uYW1lKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS51bmZvbGxvd1VzZXIgPSBmdW5jdGlvbih1c2VyKSB7XHJcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvdXNlcl9mb2xsb3dzLycgKyB1c2VyLmZvbGxvd0lkICsgJy5qc29uJykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgdXNlci5mb2xsb3dJZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBhbGVydGlmeS5zdWNjZXNzKCdZb3UgYXJlIG5vIGxvbmdlciBmb2xsb3dpbmcgJyArIHVzZXIubmFtZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge30pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZm9sbG93aW5nIHRhZ3MgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gZm9sbG93VGFnKGNvbnRyb2xsZXIsIHRhZykge1xyXG4gICAgICAgICRodHRwLnBvc3QoJy8nICsgY29udHJvbGxlciArICcvJyArIHRhZy5pZCArICcvZm9sbG93Lmpzb24nLCB7XHJcbiAgICAgICAgICAgIGlkOiB0YWcuaWRcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICB0YWcuZm9sbG93aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ1lvdSBhcmUgbm93IGZvbGxvd2luZyAnICsgdGFnLm5hbWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHt9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1bmZvbGxvd1RhZyhjb250cm9sbGVyLCB0YWcpIHtcclxuICAgICAgICAkaHR0cC5kZWxldGUoJy8nICsgY29udHJvbGxlciArICcvJyArIHRhZy5pZCArICcvdW5mb2xsb3cuanNvbicpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHRhZy5mb2xsb3dpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ1lvdSBhcmUgbm8gbG9uZ2VyIGZvbGxvd2luZyAnICsgdGFnLm5hbWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHt9KTtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUuZm9sbG93VXNlclRhZyA9IGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgIGZvbGxvd1RhZygndXNlcl90YWdzJywgdGFnKTtcclxuICAgIH07XHJcbiAgICAkc2NvcGUudW5mb2xsb3dVc2VyVGFnID0gZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgdW5mb2xsb3dUYWcoJ3VzZXJfdGFncycsIHRhZyk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5mb2xsb3dBZG1pblRhZyA9IGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgIGZvbGxvd1RhZygnYWRtaW5fdGFncycsIHRhZyk7XHJcbiAgICB9O1xyXG4gICAgJHNjb3BlLnVuZm9sbG93QWRtaW5UYWcgPSBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICB1bmZvbGxvd1RhZygnYWRtaW5fdGFncycsIHRhZyk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5mb2xsb3dDY3NUYWcgPSBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICBmb2xsb3dUYWcoJ2NvbW1vbl9jb3JlX3N0YW5kYXJkcycsIHRhZyk7XHJcbiAgICB9O1xyXG4gICAgJHNjb3BlLnVuZm9sbG93Q2NzVGFnID0gZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgdW5mb2xsb3dUYWcoJ2NvbW1vbl9jb3JlX3N0YW5kYXJkcycsIHRhZyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBhdXRvLXNhdmUgdXNlciBwcm9maWxlIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGRvbid0IGxldCBhdXRvc2F2ZSBiZSB0cmlnZ2VyZWQgbW9yZSB0aGFuIGV2ZXJ5IE4gbWlsbGlzZWNvbmRzLi4uXHJcbiAgICAkc2NvcGUuYXV0b3NhdmUgPSBfLmRlYm91bmNlKGF1dG9zYXZlTm93LCAyMDAwKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhdXRvc2F2ZU5vdygpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdhdXRvc2F2aW5nIHVzZXIgcHJvZmlsZScpO1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBlbWFpbDogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgIGFsdF9lbWFpbDogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuYWx0RW1haWwsXHJcbiAgICAgICAgICAgIGZpcnN0X25hbWU6ICRzY29wZS51c2VyUHJvZmlsZS51c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgbGFzdF9uYW1lOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5sYXN0TmFtZSxcclxuICAgICAgICAgICAgYWJvdXRfbWU6ICRzY29wZS51c2VyUHJvZmlsZS51c2VyLmFib3V0TWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICgkc2NvcGUucGFzc3dvcmRzTWF0Y2goKSAmJiAkc2NvcGUucGFzc3dvcmQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGRhdGEucGFzc3dvcmQgPSAkc2NvcGUucGFzc3dvcmQ7XHJcbiAgICAgICAgICAgIGRhdGEucGFzc3dvcmRfY29uZmlybWF0aW9uID0gJHNjb3BlLnBhc3N3b3JkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1NhdmluZy4uLic7XHJcbiAgICAgICAgJGh0dHAucHV0KCcvdXNlcnMvJyArICRzY29wZS51c2VySWQsIGRhdGEpLnRoZW4oXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF8uaGFzKGRhdGEsICdwYXNzd29yZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1Byb2ZpbGUgYW5kIHBhc3N3b3JkIHNhdmVkJztcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdQcm9maWxlIHNhdmVkJztcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgc3RvcFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdDb3VsZCBub3Qgc2F2ZSBwcm9maWxlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLnBhc3N3b3Jkc01hdGNoID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuICghJHNjb3BlLnBhc3N3b3JkLmxlbmd0aCAmJiAhJHNjb3BlLnBhc3N3b3JkQ29uZmlybS5sZW5ndGgpIHx8XHJcbiAgICAgICAgICAgICRzY29wZS5wYXNzd29yZCA9PSAkc2NvcGUucGFzc3dvcmRDb25maXJtO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gdXBsb2FkIGF2YXRhciAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyB1c2luZzogaHR0cHM6Ly9naXRodWIuY29tL2RhbmlhbGZhcmlkL2FuZ3VsYXItZmlsZS11cGxvYWRcclxuICAgICRzY29wZS5vbkF2YXRhckZpbGVTZWxlY3QgPSBmdW5jdGlvbigkZmlsZXMpIHtcclxuICAgICAgICBzdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAvLyRmaWxlczogYW4gYXJyYXkgb2YgZmlsZXMgc2VsZWN0ZWQsIGVhY2ggZmlsZSBoYXMgbmFtZSwgc2l6ZSwgYW5kIHR5cGUuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkZmlsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGZpbGUgPSAkZmlsZXNbaV07XHJcbiAgICAgICAgICAgICRzY29wZS51cGxvYWQgPSAkdXBsb2FkLnVwbG9hZCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICd1c2Vycy8nICsgdXNlcklkLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUsIC8vIG9yIGxpc3Qgb2YgZmlsZXM6ICRmaWxlcyBmb3IgaHRtbDUgb25seVxyXG4gICAgICAgICAgICAgICAgZmlsZUZvcm1EYXRhTmFtZTogJ3VzZXJbYXZhdGFyXSdcclxuICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1Bob3RvIHVwZGF0ZWQnO1xyXG4gICAgICAgICAgICAgICAgc3RvcFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdFcnJvcjogQ291bGQgbm90IHVwbG9hZCBwaG90byc7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvLy50aGVuKHN1Y2Nlc3MsIGVycm9yLCBwcm9ncmVzcyk7IFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSB2aWV3IGhlbHBlcnMgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHJldHVybnMgZS5nLiBcImEgZGF5IGFnb1wiXHJcbiAgICAvLyAoTkI6IG5vdyBpcyBvYnRhaW5lZCBmcm9tIHRoZSBEQiB0byBlbnN1cmUgdGhhdCB3ZSBoYXZlIGJvdGggZGF0ZXMgaW4gVVRDOyBcclxuICAgIC8vICAgIGFsc28sIFNRTCB2cy4gcnVieSBkYXRlcyBuZWVkIHRvIGJlIGNvZXJjZWQgaW50byBhIHNpbWlsYXIgZm9ybWF0LCBib3RoIGluIFVUQyAtIHNlZSBmZWVkLmpzb24uamJ1aWxkZXIpXHJcbiAgICAkc2NvcGUuZ2V0RXZlbnRUaW1lID0gZnVuY3Rpb24odCwgbm93KSB7XHJcbiAgICAgICAgdmFyIHRpbWUgPSBtb21lbnQodCwgJ1lZWVktTU0tREQgSEg6bW06c3MuU1NTJyk7XHJcbiAgICAgICAgdmFyIG5vd3RpbWUgPSBtb21lbnQobm93LCAnWVlZWS1NTS1ERCBISDptbTpzcy5TU1MnKTtcclxuICAgICAgICAvLyAvL2NvbnNvbGUubG9nKCd0OiAgICAgICAnICsgdCk7XHJcbiAgICAgICAgLy8gLy9jb25zb2xlLmxvZygnbm93OiAgICAgJyArIG5vdyk7XHJcbiAgICAgICAgLy8gLy9jb25zb2xlLmxvZygndGltZTogICAgJyArIHRpbWUuZm9ybWF0KCkpOyAvLyArICcgJyArIHRpbWUuaXNWYWxpZCgpKTtcclxuICAgICAgICAvLyAvL2NvbnNvbGUubG9nKCdub3d0aW1lOiAnICsgbm93dGltZS5mb3JtYXQoKSk7IC8vICsgJyAnICsgbm93dGltZS5pc1ZhbGlkKCkpO1xyXG4gICAgICAgIHJldHVybiB0aW1lLmZyb20obm93dGltZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBub3RpZmljYXRpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuZ2V0Tm90aWZpY2F0aW9uRmVlZFVybCA9IGZ1bmN0aW9uKG5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgIGlmIChub3RpZmljYXRpb24uYWN0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IG5vdGlmaWNhdGlvbi5hY3Rpb25zWzBdO1xyXG4gICAgICAgICAgICBpZiAoYWN0aW9uLmFjdGlvbiA9PSAnTElLRScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnL3NvY2lhbD9saWtlX2lkPScgKyBhY3Rpb24ubGlrZUlkO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbi5hY3Rpb24gPT0gJ0NPTU1FTlQnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJy9zb2NpYWw/Y29tbWVudF9pZD0nICsgYWN0aW9uLmNvbW1lbnRJZDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24uYWN0aW9uID09ICdTSEFSRV9JTkRJVklEVUFMJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcvbWFwcy8nICsgYWN0aW9uLm1hcElkO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbi5hY3Rpb24gPT0gJ1NIQVJFX1BVQkxJQycpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnL3NvY2lhbD9zaGFyZV9pZD0nICsgYWN0aW9uLnNoYXJlSWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZGVsZXRlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24obm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvbm90aWZpY2F0aW9ucy8nICsgbm90aWZpY2F0aW9uLmlkICsgJy5qc29uJykudGhlbihcclxuICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsgLy8gc3VjY2Vzc1xyXG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLmRlbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbihyZWFzb24pIHsgLy8gZXJyb3JcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3QgZGVsZXRlIG5vdGlmaWNhdGlvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLm5vdGlmaWNhdGlvblZlcmIgPSBmdW5jdGlvbihhY3Rpb24pIHtcclxuICAgICAgICB2YXIgdmVyYnMgPSB7XHJcbiAgICAgICAgICAgIExJS0U6ICdsaWtlZCB0aGlzOicsXHJcbiAgICAgICAgICAgIENPTU1FTlQ6ICdjb21tZW50ZWQgb24gdGhpczonLFxyXG4gICAgICAgICAgICBTSEFSRV9JTkRJVklEVUFMOiAnc2hhcmVkIGEgTWV0YU1hcCB3aXRoIHlvdScsXHJcbiAgICAgICAgICAgIFNIQVJFX1BVQkxJQzogJ3NoYXJlZCBhIE1ldGFNYXAgd2l0aCBldmVyeW9uZScsXHJcbiAgICAgICAgICAgIE1BUF9GT0xMT1c6ICdmb2xsb3dlZCBhIE1ldGFNYXA6JyxcclxuICAgICAgICAgICAgVVNFUl9GT0xMT1c6ICdmb2xsb3dlZCB5b3UnXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdmVyYnNbYWN0aW9uXTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHV0aWxpdHkgZnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGhhbmR5IGZ1bmN0aW9uIGZvciB1c2Ugd2l0aCBuZy1jbGFzcyBvbiByYWRpbyBidXR0b25zXHJcbiAgICAkc2NvcGUuY2xhc3NJZiA9IGZ1bmN0aW9uKGtsYXNzLCBiKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnY2xhc3NJZjogJyArIGtsYXNzICsgJywgJyArIGIpO1xyXG4gICAgICAgIHJldHVybiAoYiA/IGtsYXNzIDogJycpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBhdm9pZCAnJGFwcGx5IGFscmVhZHkgaW4gcHJvZ3Jlc3MnIGVycm9yIChzb3VyY2U6IGh0dHBzOi8vY29kZXJ3YWxsLmNvbS9wL25naXNtYSlcclxuICAgICRzY29wZS5zYWZlQXBwbHkgPSBmdW5jdGlvbihmbikge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NhZmVBcHBseSBvbiBzY29wZTogJyArICRzY29wZSk7XHJcbiAgICAgICAgdmFyIHBoYXNlID0gdGhpcy4kcm9vdC4kJHBoYXNlO1xyXG4gICAgICAgIGlmIChwaGFzZSA9PSAnJGFwcGx5JyB8fCBwaGFzZSA9PSAnJGRpZ2VzdCcpIHtcclxuICAgICAgICAgICAgaWYgKGZuICYmICh0eXBlb2YoZm4pID09PSAnZnVuY3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgZm4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuJGFwcGx5KGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNvdXJjZTogaHR0cDovL2N0cmxxLm9yZy9jb2RlLzE5NjE2LWRldGVjdC10b3VjaC1zY3JlZW4tamF2YXNjcmlwdFxyXG4gICAgJHNjb3BlLmlzVG91Y2hEZXZpY2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gKCgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHx8IChuYXZpZ2F0b3IuTWF4VG91Y2hQb2ludHMgPiAwKSB8fCAobmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAwKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGluaXQoKTtcclxufTtcclxuXHJcbndpbmRvdy5Vc2VyQ3RybC4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckaHR0cCcsICckbW9kYWwnLCAnJHVwbG9hZCddOyIsImNvbnN0IEFDVElPTlMgPSB7XHJcbiAgICBNQVA6ICdtYXAnLFxyXG4gICAgTkVXX01BUDogJ25ld19tYXAnLFxyXG4gICAgQ09QWV9NQVA6ICdjb3B5X21hcCcsXHJcbiAgICBERUxFVEVfTUFQOiAnZGVsZXRlX21hcCcsXHJcbiAgICBIT01FOiAnaG9tZScsXHJcbiAgICBNWV9NQVBTOiAnbXltYXBzJyxcclxuICAgIFRFUk1TX0FORF9DT05ESVRJT05TOiAndGVybXMnLFxyXG4gICAgTE9HT1VUOiAnbG9nb3V0JyxcclxuICAgIEZFRURCQUNLOiAnZmVlZGJhY2snXHJcbn07XHJcblxyXG5PYmplY3QuZnJlZXplKEFDVElPTlMpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBQ1RJT05TOyIsImNvbnN0IENBTlZBUyA9IHtcclxuICAgIExFRlQ6ICdsZWZ0JyxcclxuICAgIFJJR0hUOiAncmlnaHQnXHJcbn07XHJcblxyXG5PYmplY3QuZnJlZXplKENBTlZBUyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENBTlZBUzsiLCJjb25zdCBDT05TVEFOVFMgPSB7XHJcblx0QUNUSU9OUzogcmVxdWlyZSgnLi9hY3Rpb25zJyksXHJcblx0Q0FOVkFTOiByZXF1aXJlKCcuL2NhbnZhcycpLFxyXG5cdERTUlA6IHJlcXVpcmUoJy4vZHNycCcpLFxyXG5cdEVESVRfU1RBVFVTOiByZXF1aXJlKCcuL2VkaXRTdGF0dXMnKSxcclxuXHRFTEVNRU5UUzogcmVxdWlyZSgnLi9lbGVtZW50cycpLFxyXG5cdEVWRU5UUzogcmVxdWlyZSgnLi9ldmVudHMnKSxcclxuXHRQQUdFUzogcmVxdWlyZSgnLi9wYWdlcycpLFxyXG5cdFJPVVRFUzogcmVxdWlyZSgnLi9yb3V0ZXMnKSxcclxuXHRUQUJTOiByZXF1aXJlKCcuL3RhYnMnKSxcclxuXHRUQUdTOiByZXF1aXJlKCcuL3RhZ3MnKVxyXG59O1xyXG5cclxuT2JqZWN0LmZyZWV6ZShDT05TVEFOVFMpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDT05TVEFOVFM7IiwiY29uc3QgRFNSUCA9IHtcclxuXHREOiAnRCcsXHJcblx0UzogJ1MnLFxyXG5cdFI6ICdSJyxcclxuXHRQOiAnUCdcclxufVxyXG5cclxuT2JqZWN0LmZyZWV6ZShEU1JQKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRFNSUDsiLCJjb25zdCBzdGF0dXMgPSB7XHJcbiAgICBMQVNUX1VQREFURUQ6ICcnLFxyXG4gICAgUkVBRF9PTkxZOiAnVmlldyBvbmx5JyxcclxuICAgIFNBVklORzogJ1NhdmluZy4uLicsXHJcbiAgICBTQVZFX09LOiAnQWxsIGNoYW5nZXMgc2F2ZWQnLFxyXG4gICAgU0FWRV9GQUlMRUQ6ICdDaGFuZ2VzIGNvdWxkIG5vdCBiZSBzYXZlZCdcclxufTtcclxuXHJcbk9iamVjdC5mcmVlemUoc3RhdHVzKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc3RhdHVzOyIsImNvbnN0IEVMRU1FTlRTID0ge1xyXG4gICAgQVBQX0NPTlRBSU5FUjogJ2FwcC1jb250YWluZXInLFxyXG4gICAgTUVUQV9QUk9HUkVTUzogJ21ldGFfcHJvZ3Jlc3MnLFxyXG4gICAgTUVUQV9QUk9HUkVTU19ORVhUOiAnbWV0YV9wcm9ncmVzc19uZXh0J1xyXG59O1xyXG5cclxuT2JqZWN0LmZyZWV6ZShFTEVNRU5UUyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEVMRU1FTlRTOyIsImNvbnN0IEVWRU5UUyA9IHtcclxuXHRTSURFQkFSX09QRU46ICdzaWRlYmFyLW9wZW4nLFxyXG5cdFNJREVCQVJfQ0xPU0U6ICdzaWRlYmFyLWNsb3NlJyxcclxuXHRQQUdFX05BTUU6ICdwYWdlTmFtZScsXHJcblx0TkFWOiAnbmF2JyxcclxuXHRNQVA6ICdtYXAnXHJcbn1cclxuXHJcbk9iamVjdC5mcmVlemUoRVZFTlRTKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRVZFTlRTOyIsImNvbnN0IEFDVElPTlMgPSByZXF1aXJlKCcuL2FjdGlvbnMuanMnKTtcclxuY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5cclxuY29uc3QgUEFHRVMgPSB7XHJcbiAgICBNQVA6ICdtYXAnLFxyXG4gICAgTkVXX01BUDogJ25ld19tYXAnLFxyXG4gICAgQ09QWV9NQVA6ICdjb3B5X21hcCcsXHJcbiAgICBERUxFVEVfTUFQOiAnZGVsZXRlX21hcCcsXHJcbiAgICBNWV9NQVBTOiAnbXltYXBzJyxcclxuICAgIFRFUk1TX0FORF9DT05ESVRJT05TOiAndGVybXMnLFxyXG4gICAgSE9NRTogJ2hvbWUnXHJcbn07XHJcblxyXG5fLmV4dGVuZCgpXHJcblxyXG5PYmplY3QuZnJlZXplKFBBR0VTKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUEFHRVM7IiwiY29uc3QgUk9VVEVTID0ge1xyXG4gICAgTUFQU19MSVNUOiAnbWFwcy9saXN0LycsXHJcbiAgICBNQVBTX0RBVEE6ICdtYXBzL2RhdGEvJyxcclxuICAgIE1BUFNfTkVXX01BUDogJ21hcHMvbmV3LW1hcC8nLFxyXG4gICAgVEVSTVNfQU5EX0NPTkRJVElPTlM6ICdtZXRhbWFwL3Rlcm1zLWFuZC1jb25kaXRpb25zLycsXHJcbiAgICBIT01FOiAnbWV0YW1hcC9ob21lLydcclxufTtcclxuXHJcbk9iamVjdC5mcmVlemUoUk9VVEVTKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUk9VVEVTOyIsImNvbnN0IFRBQlMgPSB7XHJcbiAgICBUQUJfSURfUFJFU0VOVEVSIDogJ3ByZXNlbnRlci10YWInLFxyXG4gICAgVEFCX0lEX0FOQUxZVElDU19NQVAgOiAnYW5hbHl0aWNzLXRhYi1tYXAnLFxyXG4gICAgVEFCX0lEX0FOQUxZVElDU19USElORyA6ICdhbmFseXRpY3MtdGFiLXRoaW5nJyxcclxuICAgIFRBQl9JRF9QRVJTUEVDVElWRVMgOiAncGVyc3BlY3RpdmVzLXRhYicsXHJcbiAgICBUQUJfSURfRElTVElOQ1RJT05TIDogJ2Rpc3RpbmN0aW9ucy10YWInLFxyXG4gICAgVEFCX0lEX0FUVEFDSE1FTlRTIDogJ2F0dGFjaG1lbnRzLXRhYicsXHJcbiAgICBUQUJfSURfR0VORVJBVE9SIDogJ2dlbmVyYXRvci10YWInLFxyXG4gICAgVEFCX0lEX1NUQU5EQVJEUyA6ICdzdGFuZGFyZHMtdGFiJ1xyXG59O1xyXG5PYmplY3QuZnJlZXplKFRBQlMpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBUQUJTOyIsImNvbnN0IFRBR1MgPSB7XHJcbiAgICBNRVRBX0NBTlZBUzogJ21ldGEtY2FudmFzJyxcclxuICAgIEhPTUU6ICdob21lJyxcclxuICAgIFRFUk1TOiAndGVybXMnLFxyXG4gICAgTVlfTUFQUzogJ215LW1hcHMnXHJcbn07XHJcblxyXG5PYmplY3QuZnJlZXplKFRBR1MpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBUQUdTOyIsImNvbnN0IEludGVncmF0aW9uc0Jhc2UgPSByZXF1aXJlKCcuL19JbnRlZ3JhdGlvbnNCYXNlJylcclxuXHJcbmNsYXNzIEFkZFRoaXMgZXh0ZW5kcyBJbnRlZ3JhdGlvbnNCYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgdXNlcikge1xyXG4gICAgICAgIHN1cGVyKGNvbmZpZywgdXNlcik7XHJcbiAgICAgICAgKGZ1bmN0aW9uIChkLCBzLCBpZCkge1xyXG4gICAgICAgICAgICB2YXIganMsIGZqcyA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUocylbMF0sXHJcbiAgICAgICAgICAgICAgICB0ID0gd2luZG93LmFkZHRoaXMgfHwge307XHJcbiAgICAgICAgICAgIGlmIChkLmdldEVsZW1lbnRCeUlkKGlkKSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGpzID0gZC5jcmVhdGVFbGVtZW50KHMpO1xyXG4gICAgICAgICAgICBqcy5pZCA9IGlkO1xyXG4gICAgICAgICAgICBqcy5zcmMgPSBgLy9zNy5hZGR0aGlzLmNvbS9qcy8zMDAvYWRkdGhpc193aWRnZXQuanMjcHViaWQ9JHtjb25maWcucHViaWR9YDtcclxuICAgICAgICAgICAgZmpzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGpzLCBmanMpO1xyXG5cclxuICAgICAgICAgICAgdC5fZSA9IFtdO1xyXG4gICAgICAgICAgICB0LnJlYWR5ID0gZnVuY3Rpb24gKGYpIHtcclxuICAgICAgICAgICAgICAgIHQuX2UucHVzaChmKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0O1xyXG4gICAgICAgIH0gKGRvY3VtZW50LCBcInNjcmlwdFwiLCBcImFkZC10aGlzLWpzXCIpKTtcclxuICAgICAgICB0aGlzLmFkZHRoaXMgPSB3aW5kb3cuYWRkdGhpcztcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0IGludGVncmF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuYWRkdGhpcyA9IHRoaXMuYWRkdGhpcyB8fCB3aW5kb3cuYWRkdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGR0aGlzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHN1cGVyLmluaXQoKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBZGRUaGlzO1xyXG5cclxuXHJcbiIsImNvbnN0IEludGVncmF0aW9uc0Jhc2UgPSByZXF1aXJlKCcuL19JbnRlZ3JhdGlvbnNCYXNlJylcclxuY29uc3QgR29vZ2xlID0gcmVxdWlyZSgnLi9nb29nbGUnKTtcclxuXHJcbmNsYXNzIEZhY2Vib29rIGV4dGVuZHMgSW50ZWdyYXRpb25zQmFzZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIHVzZXIpIHtcclxuICAgICAgICBzdXBlcihjb25maWcsIHVzZXIpO1xyXG4gICAgICAgIChmdW5jdGlvbiAoZCwgcywgaWQpIHtcclxuICAgICAgICAgICAgdmFyIGpzLCBmanMgPSBkLmdldEVsZW1lbnRzQnlUYWdOYW1lKHMpWzBdO1xyXG4gICAgICAgICAgICBpZiAoZC5nZXRFbGVtZW50QnlJZChpZCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBqcyA9IGQuY3JlYXRlRWxlbWVudChzKTtcclxuICAgICAgICAgICAganMuaWQgPSBpZDtcclxuICAgICAgICAgICAganMuc3JjID0gXCIvL2Nvbm5lY3QuZmFjZWJvb2submV0L2VuX1VTL3Nkay5qc1wiO1xyXG4gICAgICAgICAgICBmanMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoanMsIGZqcyk7XHJcbiAgICAgICAgfSAoZG9jdW1lbnQsICdzY3JpcHQnLCAnZmFjZWJvb2stanNzZGsnKSk7XHJcbiAgICAgICAgdGhpcy5GQiA9IHdpbmRvdy5GQjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBzdXBlci5pbml0KCk7XHJcbiAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbi5pbml0KHtcclxuICAgICAgICAgICAgYXBwSWQ6IHRoaXMuY29uZmlnLmFwcGlkLFxyXG4gICAgICAgICAgICB4ZmJtbDogdGhpcy5jb25maWcueGZibWwsXHJcbiAgICAgICAgICAgIHZlcnNpb246IHRoaXMuY29uZmlnLnZlcnNpb25cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbi5FdmVudC5zdWJzY3JpYmUoJ2VkZ2UuY3JlYXRlJywgZnVuY3Rpb24gKHRhcmdldFVybCkge1xyXG4gICAgICAgICAgICBHb29nbGUuc2VuZFNvY2lhbCgnZmFjZWJvb2snLCB0YXJnZXRVcmwpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmludGVncmF0aW9uLkV2ZW50LnN1YnNjcmliZSgnZWRnZS5yZW1vdmUnLCBmdW5jdGlvbiAodGFyZ2V0VXJsKSB7XHJcbiAgICAgICAgICAgIEdvb2dsZS5zZW5kU29jaWFsKCdmYWNlYm9vaycsIHRhcmdldFVybCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuaW50ZWdyYXRpb24uRXZlbnQuc3Vic2NyaWJlKCdtZXNzYWdlLnNlbmQnLCBmdW5jdGlvbiAodGFyZ2V0VXJsKSB7XHJcbiAgICAgICAgICAgIEdvb2dsZS5zZW5kU29jaWFsKCdmYWNlYm9vaycsIHRhcmdldFVybCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGdldCBpbnRlZ3JhdGlvbigpIHtcclxuICAgICAgICB0aGlzLkZCID0gdGhpcy5GQiB8fCB3aW5kb3cuRkI7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRkI7XHJcbiAgICB9XHJcbiAgICBcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBGYWNlYm9vaztcclxuXHJcblxyXG4iLCJjb25zdCBJbnRlZ3JhdGlvbnNCYXNlID0gcmVxdWlyZSgnLi9fSW50ZWdyYXRpb25zQmFzZScpXHJcblxyXG5jbGFzcyBHb29nbGUgZXh0ZW5kcyBJbnRlZ3JhdGlvbnNCYXNlIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIHVzZXIpIHtcclxuICAgIHN1cGVyKGNvbmZpZywgdXNlcik7XHJcbiAgICAvLyBHb29nbGUgUGx1cyBBUElcclxuICAgIChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGxldCBwbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOyBwby50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7IHBvLmFzeW5jID0gdHJ1ZTtcclxuICAgICAgcG8uc3JjID0gJ2h0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL3BsYXRmb3JtLmpzJztcclxuICAgICAgbGV0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07IHMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocG8sIHMpO1xyXG4gICAgfSkoKTtcclxuICAgICAgXHJcbiAgICAvL0dvb2dsZSBUYWcgTWFuYWdlciBBUElcclxuICAgIChmdW5jdGlvbiAodywgZCwgcywgbCwgaSkge1xyXG4gICAgICB3W2xdID0gd1tsXSB8fCBbXTsgd1tsXS5wdXNoKHtcclxuICAgICAgICAnZ3RtLnN0YXJ0JzpcclxuICAgICAgICBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgZXZlbnQ6ICdndG0uanMnXHJcbiAgICAgIH0pOyBsZXQgZiA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUocylbMF0sXHJcbiAgICAgICAgaiA9IGQuY3JlYXRlRWxlbWVudChzKSwgZGwgPSBsICE9ICdkYXRhTGF5ZXInID8gJyZsPScgKyBsIDogJyc7IGouYXN5bmMgPSB0cnVlOyBqLnNyYyA9XHJcbiAgICAgICAgJy8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0bS5qcz9pZD0nICsgaSArIGRsOyBmLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGosIGYpO1xyXG4gICAgfSkod2luZG93LCBkb2N1bWVudCwgJ3NjcmlwdCcsICdkYXRhTGF5ZXInLCB0aGlzLmNvbmZpZy50YWdtYW5hZ2VyKTtcclxuXHJcbiAgICAoZnVuY3Rpb24gKGksIHMsIG8sIGcsIHIsIGEsIG0pIHtcclxuICAgICAgaVsnR29vZ2xlQW5hbHl0aWNzT2JqZWN0J10gPSByOyBpW3JdID0gaVtyXSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgKGlbcl0ucSA9IGlbcl0ucSB8fCBbXSkucHVzaChhcmd1bWVudHMpO1xyXG4gICAgICB9LCBpW3JdLmwgPSAxICogbmV3IERhdGUoKTsgYSA9IHMuY3JlYXRlRWxlbWVudChvKSxcclxuICAgICAgbSA9IHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUobylbMF07IGEuYXN5bmMgPSAxOyBhLnNyYyA9IGc7XHJcbiAgICAgIG0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSwgbSk7XHJcbiAgICB9KSh3aW5kb3csIGRvY3VtZW50LCAnc2NyaXB0JywgJy8vd3d3Lmdvb2dsZS1hbmFseXRpY3MuY29tL2FuYWx5dGljcy5qcycsICdnYScpO1xyXG5cclxuICB9XHJcblxyXG4gIGdldCBpbnRlZ3JhdGlvbigpIHtcclxuICAgIHRoaXMuZ2EgPSB0aGlzLmdhIHx8IHdpbmRvdy5nYTtcclxuICAgIHJldHVybiB0aGlzLmdhO1xyXG4gIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHN1cGVyLmluaXQoKTtcclxuICAgIGxldCBtb2RlID0gJ2F1dG8nO1xyXG4gICAgbGV0IGRvbWFpbiA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xyXG4gICAgaWYoZG9tYWluLnN0YXJ0c1dpdGgoJ2xvY2FsaG9zdCcpKSB7XHJcbiAgICAgIG1vZGUgPSAnbm9uZSc7XHJcbiAgICB9XHJcbiAgICB0aGlzLmludGVncmF0aW9uKCdjcmVhdGUnLCB0aGlzLmNvbmZpZy5hbmFseXRpY3MsIG1vZGUpO1xyXG4gICAgdGhpcy5pbnRlZ3JhdGlvbignc2VuZCcsICdwYWdldmlldycpO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlcigpIHtcclxuICAgIHN1cGVyLnNldFVzZXIoKTtcclxuICAgIHRoaXMuaW50ZWdyYXRpb24oJ3NldCcsICd1c2VySWQnLCB0aGlzLnVzZXIudXNlcklkKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZW5kU29jaWFsKG5ldHdvcmssIHRhcmdldFVybCwgdHlwZSA9ICdzZW5kJykge1xyXG4gICAgaWYgKHdpbmRvdy5nYSkge1xyXG4gICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnc29jaWFsJywgbmV0d29yaywgdHlwZSwgdGFyZ2V0VXJsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNlbmRFdmVudCh2YWwsIGV2ZW50LCBzb3VyY2UsIHR5cGUpIHtcclxuICAgIHN1cGVyLnNlbmRFdmVudCh2YWwsIGV2ZW50LCBzb3VyY2UsIHR5cGUpO1xyXG4gICAgaWYgKHRoaXMuaW50ZWdyYXRpb24pIHtcclxuICAgICAgaWYgKHNvdXJjZSAmJiB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbignc2VuZCcsIGV2ZW50LCBzb3VyY2UsIHR5cGUsIHZhbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbignc2VuZCcsIGV2ZW50LCB2YWwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHVwZGF0ZVBhdGgocGF0aCkge1xyXG4gICAgc3VwZXIudXBkYXRlUGF0aChwYXRoKTtcclxuICAgIGlmICh0aGlzLmludGVncmF0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbignc2V0Jywge1xyXG4gICAgICAgICAgICBwYWdlOiBwYXRoXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbignc2VuZCcsICdwYWdldmlldycpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNlbmRFdmVudChldmVudCwgc291cmNlLCB0eXBlLCB1cmwpIHtcclxuICAgIGlmICh3aW5kb3cuZ2EpIHtcclxuICAgICAgd2luZG93LmdhKCdzZW5kJywgZXZlbnQsIHNvdXJjZSwgdHlwZSwgdXJsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdvb2dsZTtcclxuXHJcblxyXG4iLCJjb25zdCBJbnRlZ3JhdGlvbnNCYXNlID0gcmVxdWlyZSgnLi9fSW50ZWdyYXRpb25zQmFzZScpXHJcblxyXG5jbGFzcyBJbnRlcmNvbSBleHRlbmRzIEludGVncmF0aW9uc0Jhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnLCB1c2VyKSB7XHJcbiAgICAgICAgc3VwZXIoY29uZmlnLCB1c2VyKTtcclxuXHJcbiAgICAgICAgbGV0IGkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGkuYyhhcmd1bWVudHMpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpLnEgPSBbXTtcclxuICAgICAgICBpLmMgPSBmdW5jdGlvbiAoYXJncykge1xyXG4gICAgICAgICAgICBpLnEucHVzaChhcmdzKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgd2luZG93LkludGVyY29tID0gaTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICAgICAgICBzLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcclxuICAgICAgICAgICAgcy5hc3luYyA9IHRydWU7XHJcbiAgICAgICAgICAgIHMuc3JjID0gYGh0dHBzOi8vd2lkZ2V0LmludGVyY29tLmlvL3dpZGdldC8ke2NvbmZpZy5hcHBpZH19YDtcclxuICAgICAgICAgICAgbGV0IHggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XHJcbiAgICAgICAgICAgIHgucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocywgeCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbnRlcmNvbSA9IHdpbmRvdy5JbnRlcmNvbTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW50ZWdyYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5pbnRlcmNvbSA9IHRoaXMuaW50ZXJjb20gfHwgd2luZG93LkludGVyY29tO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVyY29tO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgc3VwZXIuaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXIoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0VXNlcigpO1xyXG4gICAgICAgIHRoaXMuaW50ZWdyYXRpb24oJ2Jvb3QnLCB7XHJcbiAgICAgICAgICAgIGFwcF9pZDogdGhpcy5jb25maWcuYXBwaWQsXHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMudXNlci5mdWxsTmFtZSxcclxuICAgICAgICAgICAgZW1haWw6IHRoaXMudXNlci5lbWFpbCxcclxuICAgICAgICAgICAgY3JlYXRlZF9hdDogdGhpcy51c2VyLmNyZWF0ZWRPbi50aWNrcyxcclxuICAgICAgICAgICAgdXNlcl9pZDogdGhpcy51c2VyLnVzZXJJZFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KCd1cGRhdGUnKTtcclxuICAgIH1cclxuXHJcbiAgICBzZW5kRXZlbnQoZXZlbnQgPSAndXBkYXRlJykge1xyXG4gICAgICAgIHN1cGVyLnNlbmRFdmVudChldmVudCk7XHJcbiAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbigndXBkYXRlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlUGF0aChwYXRoKSB7XHJcbiAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbigndXBkYXRlJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGxvZ291dCgpIHtcclxuICAgICAgICBzdXBlci5sb2dvdXQoKTtcclxuICAgICAgICB0aGlzLmludGVncmF0aW9uKCdzaHV0ZG93bicpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBJbnRlcmNvbTsiLCJjb25zdCBJbnRlZ3JhdGlvbnNCYXNlID0gcmVxdWlyZSgnLi9fSW50ZWdyYXRpb25zQmFzZScpXHJcblxyXG5jbGFzcyBOZXdSZWxpYyBleHRlbmRzIEludGVncmF0aW9uc0Jhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnLCB1c2VyKSB7XHJcbiAgICAgICAgc3VwZXIoY29uZmlnLCB1c2VyKTtcclxuXHJcbiAgICAgICAgdGhpcy5OZXdSZWxpYyA9IHdpbmRvdy5OUkVVTTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW50ZWdyYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5OZXdSZWxpYyA9IHRoaXMuTmV3UmVsaWMgfHwgd2luZG93Lk5SRVVNO1xyXG4gICAgICAgIHJldHVybiB0aGlzLk5ld1JlbGljO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgc3VwZXIuaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXIoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0VXNlcigpO1xyXG4gICAgICAgIHRoaXMuaW50ZWdyYXRpb24uc2V0Q3VzdG9tQXR0cmlidXRlKCd1c2VybmFtZScsIHRoaXMudXNlci5lbWFpbCk7XHJcbiAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbi5zZXRDdXN0b21BdHRyaWJ1dGUoJ2FjY2NvdW50SUQnLCB0aGlzLnVzZXIudXNlcklkKTtcclxuICAgIH1cclxuXHJcbiAgICBzZW5kRXZlbnQodmFsLCBldmVudCwgc291cmNlLCB0eXBlKSB7XHJcbiAgICAgICAgc3VwZXIuc2VuZEV2ZW50KHZhbCwgZXZlbnQsIHNvdXJjZSwgdHlwZSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZWdyYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbi5hZGRUb1RyYWNlKHZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVBhdGgocGF0aCkge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZVBhdGgocGF0aCk7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZWdyYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRQYWdlVmlld05hbWUocGF0aCwgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBOZXdSZWxpYztcclxuXHJcblxyXG4iLCJjb25zdCBJbnRlZ3JhdGlvbnNCYXNlID0gcmVxdWlyZSgnLi9fSW50ZWdyYXRpb25zQmFzZScpXHJcbmNvbnN0IEdvb2dsZSA9IHJlcXVpcmUoJy4vZ29vZ2xlJyk7XHJcblxyXG5jbGFzcyBUd2l0dGVyIGV4dGVuZHMgSW50ZWdyYXRpb25zQmFzZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIHVzZXIpIHtcclxuICAgICAgICBzdXBlcihjb25maWcsIHVzZXIpO1xyXG4gICAgICAgIChmdW5jdGlvbiAoZCwgcywgaWQpIHtcclxuICAgICAgICAgICAgbGV0IGpzLCBmanMgPSBkLmdldEVsZW1lbnRzQnlUYWdOYW1lKHMpWzBdLFxyXG4gICAgICAgICAgICAgICAgdCA9IHdpbmRvdy50d3R0ciB8fCB7fTtcclxuICAgICAgICAgICAgaWYgKGQuZ2V0RWxlbWVudEJ5SWQoaWQpKSByZXR1cm4gdDtcclxuICAgICAgICAgICAganMgPSBkLmNyZWF0ZUVsZW1lbnQocyk7XHJcbiAgICAgICAgICAgIGpzLmlkID0gaWQ7XHJcbiAgICAgICAgICAgIGpzLnNyYyA9IFwiaHR0cHM6Ly9wbGF0Zm9ybS50d2l0dGVyLmNvbS93aWRnZXRzLmpzXCI7XHJcbiAgICAgICAgICAgIGZqcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqcywgZmpzKTtcclxuXHJcbiAgICAgICAgICAgIHQuX2UgPSBbXTtcclxuICAgICAgICAgICAgdC5yZWFkeSA9IGZ1bmN0aW9uIChmKSB7XHJcbiAgICAgICAgICAgICAgICB0Ll9lLnB1c2goZik7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdDtcclxuICAgICAgICB9IChkb2N1bWVudCwgXCJzY3JpcHRcIiwgXCJ0d2l0dGVyLXdqc1wiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBzdXBlci5pbml0KCk7XHJcbiAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbi5yZWFkeSgodHdpdHRlcikgPT4ge1xyXG4gICAgICAgICAgICB0d2l0dGVyLndpZGdldHMubG9hZCgpO1xyXG4gICAgICAgICAgICB0d2l0dGVyLmV2ZW50cy5iaW5kKCdjbGljaycsIHRoaXMuX2NsaWNrRXZlbnRUb0FuYWx5dGljcyk7XHJcbiAgICAgICAgICAgIHR3aXR0ZXIuZXZlbnRzLmJpbmQoJ3R3ZWV0JywgdGhpcy5fdHdlZXRJbnRlbnRUb0FuYWx5dGljcyk7XHJcbiAgICAgICAgICAgIHR3aXR0ZXIuZXZlbnRzLmJpbmQoJ3JldHdlZXQnLCB0aGlzLl9yZXR3ZWV0SW50ZW50VG9BbmFseXRpY3MpO1xyXG4gICAgICAgICAgICB0d2l0dGVyLmV2ZW50cy5iaW5kKCdmYXZvcml0ZScsIHRoaXMuX2ZhdkludGVudFRvQW5hbHl0aWNzKTtcclxuICAgICAgICAgICAgdHdpdHRlci5ldmVudHMuYmluZCgnZm9sbG93JywgdGhpcy5fZm9sbG93SW50ZW50VG9BbmFseXRpY3MpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgdHJ5Q291bnQgPSAwO1xyXG4gICAgICAgIGxldCBsb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAod2luZG93LnR3dHRyICYmIHdpbmRvdy50d3R0ci53aWRnZXRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LnR3dHRyLndpZGdldHMubG9hZCgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyeUNvdW50IDwgNSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5Q291bnQgKz0gMTtcclxuICAgICAgICAgICAgICAgIF8uZGVsYXkobG9hZCwgMjUwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW50ZWdyYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy50d3R0ciA9IHRoaXMudHd0dHIgfHwgd2luZG93LnR3dHRyO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR3dHRyO1xyXG4gICAgfVxyXG5cclxuICAgIF9mb2xsb3dJbnRlbnRUb0FuYWx5dGljcyhpbnRlbnRFdmVudCkge1xyXG4gICAgICAgIGlmICghaW50ZW50RXZlbnQpIHJldHVybjtcclxuICAgICAgICBsZXQgbGFiZWwgPSBpbnRlbnRFdmVudC5kYXRhLnVzZXJfaWQgKyBcIiAoXCIgKyBpbnRlbnRFdmVudC5kYXRhLnNjcmVlbl9uYW1lICsgXCIpXCI7XHJcbiAgICAgICAgR29vZ2xlLnNlbmRTb2NpYWwoJ3R3aXR0ZXInLCBsYWJlbCwgaW50ZW50RXZlbnQudHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3JldHdlZXRJbnRlbnRUb0FuYWx5dGljcyhpbnRlbnRFdmVudCkge1xyXG4gICAgICAgIGlmICghaW50ZW50RXZlbnQpIHJldHVybjtcclxuICAgICAgICBsZXQgbGFiZWwgPSBpbnRlbnRFdmVudC5kYXRhLnNvdXJjZV90d2VldF9pZDtcclxuICAgICAgICBHb29nbGUuc2VuZFNvY2lhbCgndHdpdHRlcicsIGxhYmVsLCBpbnRlbnRFdmVudC50eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBfZmF2SW50ZW50VG9BbmFseXRpY3MoaW50ZW50RXZlbnQpIHtcclxuICAgICAgICB0aGlzLl90d2VldEludGVudFRvQW5hbHl0aWNzKGludGVudEV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBfdHdlZXRJbnRlbnRUb0FuYWx5dGljcyhpbnRlbnRFdmVudCkge1xyXG4gICAgICAgIGlmICghaW50ZW50RXZlbnQpIHJldHVybjtcclxuICAgICAgICBsZXQgbGFiZWwgPSBcInR3ZWV0XCI7XHJcbiAgICAgICAgR29vZ2xlLnNlbmRTb2NpYWwoJ3R3aXR0ZXInLCBsYWJlbCwgaW50ZW50RXZlbnQudHlwZSk7XHJcbiAgICB9XHJcbiAgICBfY2xpY2tFdmVudFRvQW5hbHl0aWNzKGludGVudEV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCFpbnRlbnRFdmVudCkgcmV0dXJuO1xyXG4gICAgICAgIGxldCBsYWJlbCA9IGludGVudEV2ZW50LnJlZ2lvbjtcclxuICAgICAgICBHb29nbGUuc2VuZFNvY2lhbCgndHdpdHRlcicsIGxhYmVsLCBpbnRlbnRFdmVudC50eXBlKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBUd2l0dGVyO1xyXG5cclxuXHJcbiIsIlxyXG5jb25zdCBJbnRlZ3JhdGlvbnNCYXNlID0gcmVxdWlyZSgnLi9fSW50ZWdyYXRpb25zQmFzZScpXHJcbmNvbnN0IEdvb2dsZSA9IHJlcXVpcmUoJy4vZ29vZ2xlJyk7XHJcblxyXG5jbGFzcyBVc2VyU25hcCBleHRlbmRzIEludGVncmF0aW9uc0Jhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnLCB1c2VyKSB7XHJcbiAgICAgICAgc3VwZXIoY29uZmlnLCB1c2VyKTtcclxuICAgICAgICBsZXQgYXBpS2V5LCBzLCB4O1xyXG4gICAgICAgIGlmIChjb25maWcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25maWcgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXBpS2V5ID0gY29uZmlnLmFwaTtcclxuICAgICAgICBpZiAoYXBpS2V5KSB7XHJcbiAgICAgICAgICAgIGxldCB1c0NvbmYgPSB7XHJcbiAgICAgICAgICAgICAgICBlbWFpbEJveDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGVtYWlsQm94VmFsdWU6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgICAgICBlbWFpbFJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29uc29sZVJlY29yZGVyOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbW9kZTogJ3JlcG9ydCcsXHJcbiAgICAgICAgICAgICAgICBzaG9ydGN1dDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICBHb29nbGUuc2VuZEV2ZW50KCdmZWVkYmFjaycsICd1c2Vyc25hcCcsICd3aWRnZXQnLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdpbmRvdy51c2Vyc25hcGNvbmZpZyA9IHdpbmRvdy5fdXNlcnNuYXBjb25maWcgPSB1c0NvbmY7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgICAgIHMudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xyXG4gICAgICAgICAgICBzLmFzeW5jID0gdHJ1ZTtcclxuICAgICAgICAgICAgcy5zcmMgPSAnLy9hcGkudXNlcnNuYXAuY29tL2xvYWQvJyArIGFwaUtleSArICcuanMnO1xyXG4gICAgICAgICAgICB4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcclxuICAgICAgICAgICAgeC5hcHBlbmRDaGlsZChzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51c2VyU25hcCA9IHdpbmRvdy5Vc2VyU25hcDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0IGludGVncmF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMudXNlclNuYXAgPSB0aGlzLnVzZXJTbmFwIHx8IHdpbmRvdy5Vc2VyU25hcDtcclxuICAgICAgICByZXR1cm4gdGhpcy51c2VyU25hcDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBzdXBlci5pbml0KCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNldFVzZXIoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0VXNlcigpO1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFVzZXJTbmFwOyIsImNvbnN0IEludGVncmF0aW9uc0Jhc2UgPSByZXF1aXJlKCcuL19JbnRlZ3JhdGlvbnNCYXNlJylcclxuXHJcbmNsYXNzIFplbkRlc2sgZXh0ZW5kcyBJbnRlZ3JhdGlvbnNCYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgdXNlcikge1xyXG4gICAgICAgIHN1cGVyKGNvbmZpZywgdXNlcik7XHJcbiAgICAgICAgbGV0IHpPID0ge307XHJcbiAgICAgICAgd2luZG93LnpFbWJlZCB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChlLCB0KSB7XHJcbiAgICAgICAgICAgIGxldCBuLCBvLCBkLCBpLCBzLCBhID0gW10sIHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpOyB3aW5kb3cuekVtYmVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgYS5wdXNoKGFyZ3VtZW50cylcclxuICAgICAgICAgICAgfSwgd2luZG93LnpFID0gd2luZG93LnpFIHx8IHdpbmRvdy56RW1iZWQsIHIuc3JjID0gXCJqYXZhc2NyaXB0OmZhbHNlXCIsIHIudGl0bGUgPSBcIlwiLCByLnJvbGUgPSBcInByZXNlbnRhdGlvblwiLCAoci5mcmFtZUVsZW1lbnQgfHwgcikuc3R5bGUuY3NzVGV4dCA9IFwiZGlzcGxheTogbm9uZVwiLCBkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIiksIGQgPSBkW2QubGVuZ3RoIC0gMV0sIGQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUociwgZCksIGkgPSByLmNvbnRlbnRXaW5kb3csIHMgPSBpLmRvY3VtZW50O1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbyA9IHNcclxuICAgICAgICAgICAgfSBjYXRjaCAoYykge1xyXG4gICAgICAgICAgICAgICAgbiA9IGRvY3VtZW50LmRvbWFpbiwgci5zcmMgPSAnamF2YXNjcmlwdDpsZXQgZD1kb2N1bWVudC5vcGVuKCk7ZC5kb21haW49XCInICsgbiArICdcIjt2b2lkKDApOycsIG8gPSBzXHJcbiAgICAgICAgICAgIH0gby5vcGVuKCkuX2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbyA9IHRoaXMuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTsgbiAmJiAodGhpcy5kb21haW4gPSBuKSwgby5pZCA9IFwianMtaWZyYW1lLWFzeW5jXCIsIG8uc3JjID0gZSwgdGhpcy50ID0gK25ldyBEYXRlLCB0aGlzLnplbmRlc2tIb3N0ID0gdCwgdGhpcy56RVF1ZXVlID0gYSwgdGhpcy5ib2R5LmFwcGVuZENoaWxkKG8pXHJcbiAgICAgICAgICAgICAgICB6Ty5sb2dpYyA9IHdpbmRvdy56RTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgby53cml0ZSgnPGJvZHkgb25sb2FkPVwiZG9jdW1lbnQuX2woKTtcIj4nKSxcclxuICAgICAgICAgICAgby5jbG9zZSgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICAoXCJodHRwczovL2Fzc2V0cy56ZW5kZXNrLmNvbS9lbWJlZGRhYmxlX2ZyYW1ld29yay9tYWluLmpzXCIsIGNvbmZpZy5zaXRlKTtcclxuXHJcbiAgICAgICAgek8ud2lkZ2V0ID0gd2luZG93LnpFbWJlZDtcclxuICAgICAgICB6Ty5sb2dpYyA9IHdpbmRvdy56RTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHN1cGVyLmluaXQoKVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBpbnRlZ3JhdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LnpFO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXIoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0VXNlcigpO1xyXG4gICAgICAgIHRoaXMuaW50ZWdyYXRpb24oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmludGVncmF0aW9uLmlkZW50aWZ5KHsgbmFtZTogdGhpcy51c2VyLmZ1bGxOYW1lLCBlbWFpbDogdGhpcy51c2VyLmVtYWlsIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuY29uc3QgemVuRGVzayA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuXHJcbiAgICByZXR1cm4gek87XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFplbkRlc2s7IiwiY2xhc3MgSW50ZWdyYXRpb25zQmFzZSB7XHJcblx0Y29uc3RydWN0b3IoY29uZmlnLCB1c2VyKSB7XHJcblx0XHR0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuXHRcdHRoaXMudXNlciA9IHVzZXI7XHJcblx0fVxyXG5cdFxyXG5cdGluaXQoKSB7XHJcblx0XHRcclxuXHR9XHJcblx0XHJcblx0Z2V0IGludGVncmF0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHt9O1xyXG5cdH1cclxuXHRcclxuXHRzZXRVc2VyKCkge1xyXG5cdFx0XHJcblx0fVxyXG5cdFxyXG5cdHNlbmRFdmVudCgpIHtcclxuXHRcdFxyXG5cdH1cclxuXHRcclxuXHR1cGRhdGVQYXRoKCkge1xyXG5cdFx0XHJcblx0fVxyXG5cdFxyXG5cdGxvZ291dCgpIHtcclxuXHRcdFxyXG5cdH1cclxuXHRcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBJbnRlZ3JhdGlvbnNCYXNlOyIsImNvbnN0IEludGVncmF0aW9uc0Jhc2UgPSByZXF1aXJlKCcuL19JbnRlZ3JhdGlvbnNCYXNlJylcclxuXHJcbmNsYXNzIEdvb2dsZSBleHRlbmRzIEludGVncmF0aW9uc0Jhc2Uge1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgdXNlcikge1xyXG4gICAgc3VwZXIoY29uZmlnLCB1c2VyKTtcclxuICAgIC8vIEdvb2dsZSBQbHVzIEFQSVxyXG4gICAgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgbGV0IHBvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IHBvLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgcG8uYXN5bmMgPSB0cnVlO1xyXG4gICAgICBwby5zcmMgPSAnaHR0cHM6Ly9hcGlzLmdvb2dsZS5jb20vanMvcGxhdGZvcm0uanMnO1xyXG4gICAgICBsZXQgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShwbywgcyk7XHJcbiAgICB9KSgpO1xyXG4gICAgICBcclxuICAgIC8vR29vZ2xlIFRhZyBNYW5hZ2VyIEFQSVxyXG4gICAgKGZ1bmN0aW9uICh3LCBkLCBzLCBsLCBpKSB7XHJcbiAgICAgIHdbbF0gPSB3W2xdIHx8IFtdOyB3W2xdLnB1c2goe1xyXG4gICAgICAgICdndG0uc3RhcnQnOlxyXG4gICAgICAgIG5ldyBEYXRlKCkuZ2V0VGltZSgpLCBldmVudDogJ2d0bS5qcydcclxuICAgICAgfSk7IGxldCBmID0gZC5nZXRFbGVtZW50c0J5VGFnTmFtZShzKVswXSxcclxuICAgICAgICBqID0gZC5jcmVhdGVFbGVtZW50KHMpLCBkbCA9IGwgIT0gJ2RhdGFMYXllcicgPyAnJmw9JyArIGwgOiAnJzsgai5hc3luYyA9IHRydWU7IGouc3JjID1cclxuICAgICAgICAnLy93d3cuZ29vZ2xldGFnbWFuYWdlci5jb20vZ3RtLmpzP2lkPScgKyBpICsgZGw7IGYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaiwgZik7XHJcbiAgICB9KSh3aW5kb3csIGRvY3VtZW50LCAnc2NyaXB0JywgJ2RhdGFMYXllcicsIHRoaXMuY29uZmlnLnRhZ21hbmFnZXIpO1xyXG5cclxuICAgIChmdW5jdGlvbiAoaSwgcywgbywgZywgciwgYSwgbSkge1xyXG4gICAgICBpWydHb29nbGVBbmFseXRpY3NPYmplY3QnXSA9IHI7IGlbcl0gPSBpW3JdIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAoaVtyXS5xID0gaVtyXS5xIHx8IFtdKS5wdXNoKGFyZ3VtZW50cyk7XHJcbiAgICAgIH0sIGlbcl0ubCA9IDEgKiBuZXcgRGF0ZSgpOyBhID0gcy5jcmVhdGVFbGVtZW50KG8pLFxyXG4gICAgICBtID0gcy5nZXRFbGVtZW50c0J5VGFnTmFtZShvKVswXTsgYS5hc3luYyA9IDE7IGEuc3JjID0gZztcclxuICAgICAgbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLCBtKTtcclxuICAgIH0pKHdpbmRvdywgZG9jdW1lbnQsICdzY3JpcHQnLCAnLy93d3cuZ29vZ2xlLWFuYWx5dGljcy5jb20vYW5hbHl0aWNzLmpzJywgJ2dhJyk7XHJcblxyXG4gIH1cclxuXHJcbiAgZ2V0IGludGVncmF0aW9uKCkge1xyXG4gICAgdGhpcy5nYSA9IHRoaXMuZ2EgfHwgd2luZG93LmdhO1xyXG4gICAgcmV0dXJuIHRoaXMuZ2E7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgc3VwZXIuaW5pdCgpO1xyXG4gICAgbGV0IG1vZGUgPSAnYXV0byc7XHJcbiAgICBsZXQgZG9tYWluID0gd2luZG93LmxvY2F0aW9uLmhvc3Q7XHJcbiAgICBpZihkb21haW4uc3RhcnRzV2l0aCgnbG9jYWxob3N0JykpIHtcclxuICAgICAgbW9kZSA9ICdub25lJztcclxuICAgIH1cclxuICAgIHRoaXMuaW50ZWdyYXRpb24oJ2NyZWF0ZScsIHRoaXMuY29uZmlnLmFuYWx5dGljcywgbW9kZSk7XHJcbiAgICB0aGlzLmludGVncmF0aW9uKCdzZW5kJywgJ3BhZ2V2aWV3Jyk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyKCkge1xyXG4gICAgc3VwZXIuc2V0VXNlcigpO1xyXG4gICAgdGhpcy5pbnRlZ3JhdGlvbignc2V0JywgJ3VzZXJJZCcsIHRoaXMudXNlci51c2VySWQpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNlbmRTb2NpYWwobmV0d29yaywgdGFyZ2V0VXJsLCB0eXBlID0gJ3NlbmQnKSB7XHJcbiAgICBpZiAod2luZG93LmdhKSB7XHJcbiAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdzb2NpYWwnLCBuZXR3b3JrLCB0eXBlLCB0YXJnZXRVcmwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2VuZEV2ZW50KHZhbCwgZXZlbnQsIHNvdXJjZSwgdHlwZSkge1xyXG4gICAgc3VwZXIuc2VuZEV2ZW50KHZhbCwgZXZlbnQsIHNvdXJjZSwgdHlwZSk7XHJcbiAgICBpZiAodGhpcy5pbnRlZ3JhdGlvbikge1xyXG4gICAgICBpZiAoc291cmNlICYmIHR5cGUpIHtcclxuICAgICAgICB0aGlzLmludGVncmF0aW9uKCdzZW5kJywgZXZlbnQsIHNvdXJjZSwgdHlwZSwgdmFsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmludGVncmF0aW9uKCdzZW5kJywgZXZlbnQsIHZhbCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgdXBkYXRlUGF0aChwYXRoKSB7XHJcbiAgICBzdXBlci51cGRhdGVQYXRoKHBhdGgpO1xyXG4gICAgaWYgKHRoaXMuaW50ZWdyYXRpb24pIHtcclxuICAgICAgICB0aGlzLmludGVncmF0aW9uKCdzZXQnLCB7XHJcbiAgICAgICAgICAgIHBhZ2U6IHBhdGhcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmludGVncmF0aW9uKCdzZW5kJywgJ3BhZ2V2aWV3Jyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2VuZEV2ZW50KGV2ZW50LCBzb3VyY2UsIHR5cGUsIHVybCkge1xyXG4gICAgaWYgKHdpbmRvdy5nYSkge1xyXG4gICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCBldmVudCwgc291cmNlLCB0eXBlLCB1cmwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR29vZ2xlO1xyXG5cclxuXHJcbiIsImNvbnN0IHJpb3QgPSB3aW5kb3cucmlvdDtcclxuY29uc3QgTlByb2dyZXNzID0gd2luZG93Lk5Qcm9ncmVzcztcclxuY29uc3QgcGFnZUJvZHkgPSByZXF1aXJlKCcuLi90YWdzL3BhZ2UtYm9keS5qcycpO1xyXG5jb25zdCBDT05TVEFOVFMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvY29uc3RhbnRzJyk7XHJcbmNvbnN0IEFjdGlvbnMgPSByZXF1aXJlKCcuLi9hY3Rpb25zL0FjdGlvbi5qcycpO1xyXG5cclxuY2xhc3MgUGFnZUZhY3Rvcnkge1xyXG4gICAgY29uc3RydWN0b3IoZXZlbnRlciwgbWV0YUZpcmUpIHtcclxuICAgICAgICB0aGlzLm1ldGFGaXJlID0gbWV0YUZpcmU7XHJcbiAgICAgICAgdGhpcy5ldmVudGVyID0gZXZlbnRlcjtcclxuICAgICAgICB0aGlzLmFjdGlvbnMgPSBuZXcgQWN0aW9ucyhtZXRhRmlyZSwgZXZlbnRlciwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5vblJlYWR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZWFkeSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX29uUmVhZHkpIHtcclxuICAgICAgICAgICAgdGhpcy5fb25SZWFkeSA9IG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICQoYCMke0NPTlNUQU5UUy5FTEVNRU5UUy5NRVRBX1BST0dSRVNTfWApLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmlvdC5tb3VudCgnKicpO1xyXG4gICAgICAgICAgICAgICAgTlByb2dyZXNzLmNvbmZpZ3VyZSh7IHBhcmVudDogYCMke0NPTlNUQU5UUy5FTEVNRU5UUy5NRVRBX1BST0dSRVNTX05FWFR9YCB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfLmRlbGF5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBNZXRyb25pYy5pbml0KCk7IC8vIGluaXQgbWV0cm9uaWMgY29yZSBjb21wb25ldHNcclxuICAgICAgICAgICAgICAgICAgICBMYXlvdXQuaW5pdCgpOyAvLyBpbml0IGxheW91dFxyXG4gICAgICAgICAgICAgICAgICAgIERlbW8uaW5pdCgpOyAvLyBpbml0IGRlbW8gZmVhdHVyZXNcclxuICAgICAgICAgICAgICAgICAgICBJbmRleC5pbml0KCk7IC8vIGluaXQgaW5kZXggcGFnZVxyXG4gICAgICAgICAgICAgICAgICAgIFRhc2tzLmluaXREYXNoYm9hcmRXaWRnZXQoKTsgLy8gaW5pdCB0YXNoIGRhc2hib2FyZCB3aWRnZXRcclxuICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAyNTApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uUmVhZHk7XHJcbiAgICB9XHJcblxyXG4gICAgbmF2aWdhdGUocGF0aCwgaWQsIGFjdGlvbiwgLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgbGV0IGFjdCA9IHRoaXMuYWN0aW9ucy5hY3QocGF0aCwgaWQsIGFjdGlvbiwgLi4ucGFyYW1zKTtcclxuICAgICAgICBpZiAoIWFjdCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50ZXIuZG8ocGF0aCwgcGF0aCwgeyBpZDogaWQsIGFjdGlvbjogYWN0aW9uIH0sIC4uLnBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBhZ2VGYWN0b3J5OyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcbmNvbnN0IE5Qcm9ncmVzcyA9IHdpbmRvdy5OUHJvZ3Jlc3M7XHJcbmNvbnN0IGVkaXRvciA9IHJlcXVpcmUoJy4uLy4uL2NhbnZhcy9lZGl0b3InKTtcclxuY29uc3QgaHRtbCA9IGBcclxuPGRpdiBjbGFzcz1cInBvcnRsZXQgbGlnaHRcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJwb3J0bGV0LWJvZHlcIiBpZD1cImRpYWdyYW1cIj48L2Rpdj5cclxuPC9kaXY+XHJcbjxkaXYgaWQ9XCJvdmVydmlldy1kaWFncmFtXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjwvZGl2PlxyXG5gO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygnbWV0YS1jYW52YXMnLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uLy4uL01ldGFNYXAuanMnKTtcclxuXHJcbiAgICB0aGlzLm1hcElkID0gbnVsbDtcclxuICAgIHRoaXMuY2FudmFzID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmJ1aWxkQ2FudmFzID0gKG1hcCkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5jYW52YXMpIHtcclxuICAgICAgICAgICAgJCh0aGlzLmRpYWdyYW0pLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICQodGhpc1snb3ZlcnZpZXctZGlhZ3JhbSddKS5lbXB0eSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHggPSB7XHJcbiAgICAgICAgICAgICAgICBtYXBJZDogdGhpcy5tYXBJZCxcclxuICAgICAgICAgICAgICAgIGNjc1RhZ2dpbmc6IHt9LFxyXG4gICAgICAgICAgICAgICAgc2FmZUFwcGx5OiBmdW5jdGlvbihmbiwgLi4ucGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuKC4uLnBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICR3YXRjaDogZnVuY3Rpb24oKSB7fSxcclxuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB7IHRoZW46IGZ1bmN0aW9uKCkge30gfSB9LFxyXG4gICAgICAgICAgICAgICAgaXNUb3VjaERldmljZTogZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgeC5tYXBEYXRhID0gbWFwO1xyXG4gICAgICAgICAgICBtYXAubWV0YWRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBzYW5kYm94OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgY2FuRWRpdDogdHJ1ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBtYXAuc3RhdGVfZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFwic2hvd05hdmlnYXRvclwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFwiY3VycmVudFRhYlwiOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgXCJwZXJzcGVjdGl2ZVBvaW50S2V5XCI6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBcImRpc3RpbmN0aW9uVGhpbmdLZXlcIjogbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1hcC5lZGl0b3Jfb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIFwiZGVmYXVsdFJlbGF0aW9uc2hpcERpcmVjdGlvblwiOiBcIm5vQXJyb3dzXCIsXHJcbiAgICAgICAgICAgICAgICBcImRlZmF1bHRUaGluZ0xheW91dFwiOiBcImxlZnRcIixcclxuICAgICAgICAgICAgICAgIFwicGVyc3BlY3RpdmVNb2RlXCI6IFwibGluZXNcIlxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcyA9IE1hcEVkaXRvckN0cmwoeCwgeCwgeCwgeCwgeCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG1hcC5jaGFuZ2VkX2J5ICE9IE1ldGFNYXAuVXNlci51c2VyS2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5tYXAubG9hZChtYXAuZGF0YSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYnVpbGQgPSAob3B0cykgPT4ge1xyXG4gICAgICAgIGlmIChvcHRzLmlkICE9IHRoaXMubWFwSWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMgPSBudWxsXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcElkKSB7XHJcbiAgICAgICAgICAgICAgICBNZXRhTWFwLk1ldGFGaXJlLm9mZihgbWFwcy9kYXRhLyR7dGhpcy5tYXBJZH1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm1hcElkID0gb3B0cy5pZDtcclxuICAgICAgICAgICAgTlByb2dyZXNzLnN0YXJ0KCk7XHJcblxyXG4gICAgICAgICAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKGBtYXBzL2RhdGEvJHtvcHRzLmlkfWAsIHRoaXMuYnVpbGRDYW52YXMpO1xyXG4gICAgICAgICAgICBNZXRhTWFwLkV2ZW50ZXIuZm9yZ2V0KCdtYXAnLCB0aGlzLmJ1aWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgTWV0YU1hcC5FdmVudGVyLmV2ZXJ5KCdtYXAnLCB0aGlzLmJ1aWxkKTtcclxuXHJcbiAgICB0aGlzLmNvcnJlY3RIZWlnaHQgPSAoKSA9PiB7XHJcbiAgICAgICAgJCh0aGlzLmRpYWdyYW0pLmNzcyh7XHJcbiAgICAgICAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0IC0gMTU0ICsgJ3B4J1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub24oJ3VwZGF0ZScsICgpID0+IHtcclxuICAgICAgICB0aGlzLmNvcnJlY3RIZWlnaHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQod2luZG93KS5yZXNpemUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY29ycmVjdEhlaWdodCgpO1xyXG4gICAgfSk7XHJcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcblxyXG5jb25zdCBodG1sID0gYDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjbGFzcz1cImRyb3Bkb3duLXRvZ2dsZVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBkYXRhLWhvdmVyPVwiZHJvcGRvd25cIiBkYXRhLWNsb3NlLW90aGVycz1cInRydWVcIj5cclxuICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1ncmFkdWF0aW9uLWNhcFwiPjwvaT5cclxuICAgICAgICA8L2E+XHJcbiAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPlxyXG4gICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51LWxpc3Qgc2Nyb2xsZXJcIiBzdHlsZT1cImhlaWdodDogMjcwcHg7XCIgZGF0YS1oYW5kbGUtY29sb3I9XCIjNjM3MjgzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpIGlmPVwieyBoZWxwIH1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlYWNoPVwieyBoZWxwIH1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPVwieyBwYXJlbnQub25DbGljayB9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJ7IGxpbmsgfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ7IGljb24gfVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGl0bGVcIj57IHRpdGxlIH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgPC9saT5cclxuICAgICAgICA8L3VsPlxyXG5gO1xyXG5cclxucmlvdC50YWcoJ21ldGEtaGVscCcsIGh0bWwsIGZ1bmN0aW9uIChvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uLy4uL01ldGFNYXAnKTtcclxuXHJcbiAgICB0aGlzLm9uQ2xpY2sgPSAoZXZlbnQsIHBhcmFtcykgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LCBwYXJhbXMpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgICAgIFxyXG4gICAgdGhpcy5oZWxwID0gbnVsbDtcclxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xyXG4gICAgICAgIE1ldGFNYXAuTWV0YUZpcmUub24oJ21ldGFtYXAvaGVscCcsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVscCA9IF8uZmlsdGVyKF8uc29ydEJ5KGRhdGEsICdvcmRlcicpLCAoZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluY2x1ZGUgPSBkLmFyY2hpdmUgIT0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbmNsdWRlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG5cclxuY29uc3QgaHRtbCA9IGA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgZGF0YS1ob3Zlcj1cImRyb3Bkb3duXCIgZGF0YS1jbG9zZS1vdGhlcnM9XCJ0cnVlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1iZWxsLW9cIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJiYWRnZSBiYWRnZS1zdWNjZXNzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbm90aWZpY2F0aW9ucy5sZW5ndGggfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJleHRlcm5hbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcyA9XCJib2xkXCI+eyBub3RpZmljYXRpb25zLmxlbmd0aCB9IHBlbmRpbmc8L3NwYW4+IG5vdGlmaWNhdGlvbnsgczogbm90aWZpY2F0aW9ucy5sZW5ndGggPT0gMCB8fCBub3RpZmljYXRpb25zLmxlbmd0aCA+IDEgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+dmlldyBhbGw8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUtbGlzdCBzY3JvbGxlclwiIHN0eWxlPVwiaGVpZ2h0OiAyNTBweDtcIiBkYXRhLWhhbmRsZS1jb2xvcj1cIiM2MzcyODNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBpZj1cInsgbm90aWZpY2F0aW9ucyB9XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYWNoPVwieyBub3RpZmljYXRpb25zIH1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9XCJ7IHBhcmVudC5vbkNsaWNrIH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGltZVwiPnsgdGltZSB9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRldGFpbHNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGFiZWwgbGFiZWwtc20gbGFiZWwtaWNvbiBsYWJlbC1zdWNjZXNzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1wbHVzXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBldmVudCB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICA8L3VsPlxyXG5gO1xyXG5cclxucmlvdC50YWcoJ21ldGEtbm90aWZpY2F0aW9ucycsIGh0bWwsIGZ1bmN0aW9uIChvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uLy4uL01ldGFNYXAuanMnKTtcclxuXHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnMgPSBbXTtcclxuXHJcbiAgICB0aGlzLm9uQ2xpY2sgPSAoZXZlbnQsIHBhcmFtcykgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LCBwYXJhbXMpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgICAgIFxyXG4gICAgdGhpcy5vbignbW91bnQnLCAoKSA9PiB7XHJcbiAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5vbignbWV0YW1hcC9ub3RpZmljYXRpb25zJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zID0gXy5maWx0ZXIoXy5zb3J0QnkoZGF0YSwgJ29yZGVyJyksIChkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5jbHVkZSA9IGQuYXJjaGl2ZSAhPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluY2x1ZGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcblxyXG5jb25zdCBodG1sID0gYDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjbGFzcz1cImRyb3Bkb3duLXRvZ2dsZVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBkYXRhLWhvdmVyPVwiZHJvcGRvd25cIiBkYXRhLWNsb3NlLW90aGVycz1cInRydWVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXRyb3BoeVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLXN1Y2Nlc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBwb2ludHMubGVuZ3RoIH1cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwiZXh0ZXJuYWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3MgPVwiYm9sZFwiPnsgcG9pbnRzLmxlbmd0aCB9IG5ldyA8L3NwYW4+IGFjaGlldmVtZW50eyBzOiBwb2ludHMubGVuZ3RoID09IDAgfHwgcG9pbnRzLmxlbmd0aCA+IDEgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+dmlldyBhbGw8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUtbGlzdCBzY3JvbGxlclwiIHN0eWxlPVwiaGVpZ2h0OiAyNTBweDtcIiBkYXRhLWhhbmRsZS1jb2xvcj1cIiM2MzcyODNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBpZj1cInsgcG9pbnRzIH1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhY2g9XCJ7IHBvaW50cyB9XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPVwieyBwYXJlbnQub25DbGljayB9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRpbWVcIj57IHRpbWUgfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWxzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxhYmVsIGxhYmVsLXNtIGxhYmVsLWljb24gbGFiZWwtc3VjY2Vzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtcGx1c1wiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgZXZlbnQgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgPC91bD5cclxuYDtcclxuXHJcbnJpb3QudGFnKCdtZXRhLXBvaW50cycsIGh0bWwsIGZ1bmN0aW9uIChvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uLy4uL01ldGFNYXAuanMnKTtcclxuICAgIHRoaXMucG9pbnRzID0gW107XHJcblxyXG4gICAgdGhpcy5vbkNsaWNrID0gKGV2ZW50LCBwYXJhbXMpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhldmVudCwgcGFyYW1zKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9uKCdtb3VudCcsICgpID0+IHtcclxuICAgICAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKGB1c2Vycy8ke01ldGFNYXAuVXNlci51c2VySWR9L3BvaW50c2AsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRzID0gXy5maWx0ZXIoXy5zb3J0QnkoZGF0YSwgJ29yZGVyJyksIChkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5jbHVkZSA9IGQuYXJjaGl2ZSAhPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluY2x1ZGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcblxyXG5jb25zdCBodG1sID0gYDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjbGFzcz1cImRyb3Bkb3duLXRvZ2dsZVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBkYXRhLWhvdmVyPVwiZHJvcGRvd25cIiBkYXRhLWNsb3NlLW90aGVycz1cInRydWVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInVzZXJuYW1lIHVzZXJuYW1lLWhpZGUtb24tbW9iaWxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgdXNlcm5hbWUgfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8aW1nIGFsdD1cIlwiIGhlaWdodD1cIjM5XCIgd2lkdGg9XCIzOVwiIGNsYXNzPVwiaW1nLWNpcmNsZVwiIHNyYz1cInsgcGljdHVyZSB9XCIgLz5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUgZHJvcGRvd24tbWVudS1kZWZhdWx0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpIGlmPVwieyBtZW51IH1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlYWNoPVwieyBtZW51IH1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPVwieyBwYXJlbnQub25DbGljayB9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJ7IGxpbmsgfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ7IGljb24gfVwiPjwvaT4geyB0aXRsZSB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgPC91bD5cclxuYDtcclxuXHJcbnJpb3QudGFnKCdtZXRhLXVzZXInLCBodG1sLCBmdW5jdGlvbiAob3B0cykge1xyXG5cclxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi8uLi9NZXRhTWFwLmpzJyk7XHJcblxyXG4gICAgdGhpcy5tZW51ID0gW107XHJcbiAgICB0aGlzLnVzZXJuYW1lID0gJyc7XHJcbiAgICB0aGlzLnBpY3R1cmUgPSAnJztcclxuXHJcbiAgICB0aGlzLmxvZ291dCA9ICgpID0+IHtcclxuICAgICAgICBNZXRhTWFwLmxvZ291dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubGlua0FjY291bnQgPSAoKSA9PiB7XHJcbiAgICAgICAgTWV0YU1hcC5BdXRoMC5saW5rQWNjb3VudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub25DbGljayA9IChldmVudCwgcGFyYW1zKSA9PiB7XHJcbiAgICAgICAgc3dpdGNoKGV2ZW50Lml0ZW0ubGluaykge1xyXG4gICAgICAgICAgICBjYXNlICcjbGluay1zb2NpYWwtYWNjb3VudHMnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5rQWNjb3VudCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQsIHBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9uKCdtb3VudCcsICgpID0+IHtcclxuICAgICAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKGBtZXRhbWFwL3VzZXJgLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVzZXJuYW1lID0gTWV0YU1hcC5Vc2VyLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgICAgICB0aGlzLnBpY3R1cmUgPSBNZXRhTWFwLlVzZXIucGljdHVyZTtcclxuICAgICAgICAgICAgdGhpcy5tZW51ID0gXy5maWx0ZXIoXy5zb3J0QnkoZGF0YSwgJ29yZGVyJyksIChkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5jbHVkZSA9IGQuYXJjaGl2ZSAhPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluY2x1ZGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcbmNvbnN0IENPTlNUQU5UUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9jb25zdGFudHMnKVxyXG5yZXF1aXJlKCcuLi90b29scy9zaGltcycpO1xyXG5cclxuY29uc3QgaHRtbCA9IGBcclxuPGRpdiBjbGFzcz1cInBhZ2UtYWN0aW9uc1wiPlxyXG4gICAgPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiPlxyXG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIHJlZC1oYXplIGJ0bi1zbSBkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgZGF0YS1ob3Zlcj1cImRyb3Bkb3duXCIgZGF0YS1jbG9zZS1vdGhlcnM9XCJ0cnVlXCI+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaGlkZGVuLXNtIGhpZGRlbi14c1wiPkFjdGlvbnMmbmJzcDs8L3NwYW4+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtYW5nbGUtZG93blwiPjwvaT5cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCIgcm9sZT1cIm1lbnVcIj5cclxuICAgICAgICAgICAgPGxpIGVhY2g9XCJ7IHZhbCwgaSBpbiBkYXRhIH1cIiBjbGFzcz1cInsgc3RhcnQ6IGkgPT0gMCwgYWN0aXZlOiBpID09IDAgfVwiPlxyXG4gICAgICAgICAgICAgICAgPGEgaWY9XCJ7IHBhcmVudC5nZXRMaW5rQWxsb3dlZCh2YWwpIH1cIiBocmVmPVwieyBwYXJlbnQuZ2V0QWN0aW9uTGluayh2YWwpIH1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInsgdmFsLmljb24gfVwiPjwvaT4geyB2YWwudGl0bGUgfVxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJkaXZpZGVyXCI+PC9saT5cclxuICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNzZXR0aW5nc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtZ2VhclwiPjwvaT4gU2V0dGluZ3NcclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgPC9saT5cclxuICAgICAgICA8L3VsPlxyXG4gICAgPC9kaXY+XHJcblxyXG4gICAgPHNwYW4gc3R5bGU9XCJwYWRkaW5nLWxlZnQ6IDVweDtcIj5cclxuICAgICAgICA8c3BhbiBpZj1cInsgcGFnZU5hbWUgfVwiXHJcbiAgICAgICAgICAgICAgICBpZD1cIm1hcF9uYW1lXCJcclxuICAgICAgICAgICAgICAgIGRhdGEtdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgZGF0YS10aXRsZT1cIkVudGVyIG1hcCBuYW1lXCI+XHJcbiAgICAgICAgICAgIHsgcGFnZU5hbWUgfVxyXG4gICAgICAgIDwvc3Bhbj5cclxuICAgIDwvc3Bhbj5cclxuPC9kaXY+XHJcbmA7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLWFjdGlvbnMnLCBodG1sLCBmdW5jdGlvbiAob3B0cykge1xyXG5cclxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9NZXRhTWFwJyk7XHJcblxyXG4gICAgdGhpcy5kYXRhID0gW107XHJcbiAgICB0aGlzLnBhZ2VOYW1lID0gJ0hvbWUnO1xyXG4gICAgdGhpcy51cmwgPSBNZXRhTWFwLmNvbmZpZy5zaXRlLmRiICsgJy5maXJlYmFzZWlvLmNvbSc7XHJcbiAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuZ2V0QWN0aW9uTGluayA9IChvYmopID0+IHtcclxuICAgICAgICBsZXQgcmV0ID0gb2JqLmxpbms7XHJcbiAgICAgICAgaWYgKG9iai51cmxfcGFyYW1zKSB7XHJcbiAgICAgICAgICAgIGxldCBhcmdzID0gW107XHJcbiAgICAgICAgICAgIF8uZWFjaChvYmoudXJsX3BhcmFtcywgKHBybSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXJncy5wdXNoKHRoaXNbcHJtLm5hbWVdKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldCA9IG9iai5saW5rLmZvcm1hdC5jYWxsKG9iai5saW5rLCBhcmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdldExpbmtBbGxvd2VkID0gKG9iaikgPT4ge1xyXG4gICAgICAgIGxldCByZXQgPSB0cnVlID09IG9ialsnYWxsb3dlZC1vbiddWycqJ107XHJcbiAgICAgICAgaWYgKCFyZXQpIHtcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRQYWdlID0gTWV0YU1hcC5Sb3V0ZXIuY3VycmVudFBhdGg7XHJcbiAgICAgICAgICAgIHJldCA9IHRydWUgPT0gb2JqWydhbGxvd2VkLW9uJ11bY3VycmVudFBhZ2VdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYmluZFRvcGFnZU5hbWUgPSBfLm9uY2UoKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLm1hcElkKSB7XHJcbiAgICAgICAgICAgIE1ldGFNYXAuTWV0YUZpcmUub24oYCR7Q09OU1RBTlRTLlJPVVRFUy5NQVBTX0xJU1R9LyR7dGhpcy5tYXBJZH0vbmFtZWAsIChuYW1lKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VOYW1lID0gbmFtZSB8fCAnJztcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICBNZXRhTWFwLkV2ZW50ZXIuZXZlcnkoJ3BhZ2VOYW1lJywgKG9wdHMpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5sb2FkZWQpIHtcclxuICAgICAgICAgICAgJCh0aGlzLm1hcF9uYW1lKS5lZGl0YWJsZSgnZGVzdHJveScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5tYXBJZCkge1xyXG4gICAgICAgICAgICBNZXRhTWFwLk1ldGFGaXJlLm9mZihgJHtDT05TVEFOVFMuUk9VVEVTLk1BUFNfTElTVH0vJHt0aGlzLm1hcElkfS9uYW1lYCk7XHJcbiAgICAgICAgICAgIGlmIChvcHRzLmlkKSB7XHJcbiAgICAgICAgICAgICAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKGAke0NPTlNUQU5UUy5ST1VURVMuTUFQU19MSVNUfS8ke29wdHMuaWR9L25hbWVgLCAobmFtZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZU5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhZ2VOYW1lID0gb3B0cy5uYW1lIHx8ICdIb21lJztcclxuICAgICAgICB0aGlzLm1hcElkID0gb3B0cy5pZDtcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLm1hcElkKSB7XHJcbiAgICAgICAgICAgICQodGhpcy5tYXBfbmFtZSkuZWRpdGFibGUoeyB1bnNhdmVkY2xhc3M6IG51bGwgfSkub24oJ3NhdmUnLCAoZXZlbnQsIHBhcmFtcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5zZXREYXRhKHBhcmFtcy5uZXdWYWx1ZSwgYCR7Q09OU1RBTlRTLlJPVVRFUy5NQVBTX0xJU1R9LyR7dGhpcy5tYXBJZH0vbmFtZWApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5iaW5kVG9wYWdlTmFtZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIE1ldGFNYXAuTWV0YUZpcmUub24oJ21ldGFtYXAvYWN0aW9ucycsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gXy5maWx0ZXIoXy5zb3J0QnkoZGF0YSwgJ29yZGVyJyksIChkKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBpbmNsdWRlID0gZC5hcmNoaXZlICE9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBpbmNsdWRlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICB9KTtcclxuXHJcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcbmNvbnN0IHBhZ2VIZWFkZXIgPSByZXF1aXJlKCcuL3BhZ2UtaGVhZGVyJyk7XHJcbmNvbnN0IHBhZ2VDb250YWluZXIgPSByZXF1aXJlKCcuL3BhZ2UtY29udGFpbmVyJyk7XHJcbmNvbnN0IHBhZ2VGb290ZXIgPSByZXF1aXJlKCcuL3BhZ2UtZm9vdGVyJyk7XHJcbmNvbnN0IENPTlNUQU5UUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9jb25zdGFudHMnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjxkaXYgaWQ9XCJwYWdlX2JvZHlcIiBjbGFzcz1cInBhZ2UtaGVhZGVyLWZpeGVkIHBhZ2Utc2lkZWJhci1jbG9zZWQtaGlkZS1sb2dvIHBhZ2Utc2lkZWJhci1jbG9zZWQtaGlkZS1sb2dvXCI+XHJcblxyXG4gICAgPGRpdiBpZD1cIm1ldGFfcGFnZV9oZWFkZXJcIj48L2Rpdj5cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwiY2xlYXJmaXhcIj5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIDxkaXYgaWQ9XCJtZXRhX3BhZ2VfY29udGFpbmVyXCI+PC9kaXY+XHJcblxyXG48L2Rpdj5cclxuXHJcbjxkaXYgaWQ9XCJtZXRhX3BhZ2VfZm9vdGVyXCI+PC9kaXY+YDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtYm9keScsIGh0bWwsIGZ1bmN0aW9uKG9wdHMpIHtcclxuXHJcbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vTWV0YU1hcCcpO1xyXG5cclxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xyXG4gICAgICAgIHJpb3QubW91bnQodGhpcy5tZXRhX3BhZ2VfaGVhZGVyLCAncGFnZS1oZWFkZXInKTtcclxuICAgICAgICByaW90Lm1vdW50KHRoaXMubWV0YV9wYWdlX2NvbnRhaW5lciwgJ3BhZ2UtY29udGFpbmVyJyk7XHJcbi8vICAgICAgICByaW90Lm1vdW50KHRoaXMubWV0YV9wYWdlX2RpYWxvZywgJ21ldGEtZGlhbG9nJyk7XHJcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV9mb290ZXIsICdwYWdlLWZvb3RlcicpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIE1ldGFNYXAuRXZlbnRlci5vbihDT05TVEFOVFMuRVZFTlRTLlNJREVCQVJfQ0xPU0UsICgpID0+IHtcclxuICAgICAgICAkKHRoaXMucGFnZV9ib2R5KS5hZGRDbGFzcygncGFnZS1zaWRlYmFyLXJldmVyc2VkJyk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBNZXRhTWFwLkV2ZW50ZXIub24oQ09OU1RBTlRTLkVWRU5UUy5TSURFQkFSX09QRU4sICgpID0+IHtcclxuICAgICAgICAkKHRoaXMucGFnZV9ib2R5KS5yZW1vdmVDbGFzcygncGFnZS1zaWRlYmFyLXJldmVyc2VkJyk7XHJcbiAgICB9KTtcclxuXHJcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcbmNvbnN0IHBhZ2VTaWRlYmFyID0gcmVxdWlyZSgnLi9wYWdlLXNpZGViYXIuanMnKTtcclxuY29uc3QgcGFnZUNvbnRlbnQgPSByZXF1aXJlKCcuL3BhZ2UtY29udGVudC5qcycpO1xyXG5cclxuY29uc3QgaHRtbCA9IGBcclxuPGRpdiBjbGFzcz1cInBhZ2UtY29udGFpbmVyXCI+XHJcbiAgICA8ZGl2IGlkPVwibWV0YV9wYWdlX3NpZGViYXJcIj48L2Rpdj5cclxuICAgIDxkaXYgaWQ9XCJtZXRhX3BhZ2VfY29udGVudFwiPjwvZGl2PlxyXG48L2Rpdj5cclxuYDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtY29udGFpbmVyJywgaHRtbCwgZnVuY3Rpb24ob3B0cykge1xyXG5cclxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9NZXRhTWFwJyk7XHJcblxyXG4gICAgdGhpcy5vbignbW91bnQnLCAoKSA9PiB7XHJcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV9zaWRlYmFyLCAncGFnZS1zaWRlYmFyJyk7XHJcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV9jb250ZW50LCAncGFnZS1jb250ZW50Jyk7XHJcbiAgICB9KTtcclxufSk7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcclxuY29uc3QgQ09OU1RBTlRTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL2NvbnN0YW50cycpO1xyXG5jb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcblxyXG5jb25zdCBodG1sID0gYFxyXG48ZGl2IGNsYXNzPVwicGFnZS1jb250ZW50LXdyYXBwZXJcIj5cclxuICAgIDxkaXYgaWQ9XCJwYWdlLWNvbnRlbnRcIiBjbGFzcz1cInBhZ2UtY29udGVudFwiPlxyXG5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicGFnZS1oZWFkXCI+XHJcblxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuXHJcbiAgICAgICAgPGRpdiBpZD1cImFwcC1jb250YWluZXJcIj5cclxuXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+XHJcbmA7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLWNvbnRlbnQnLCBodG1sLCBmdW5jdGlvbiAob3B0cykge1xyXG5cclxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9NZXRhTWFwJyk7XHJcblxyXG4gICAgTWV0YU1hcC5FdmVudGVyLm9uKENPTlNUQU5UUy5FVkVOVFMuU0lERUJBUl9DTE9TRSwgKCkgPT4ge1xyXG4gICAgICAgIGxldCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgICQodGhpc1snYXBwLWNvbnRhaW5lciddKS5jc3MoeyB3aWR0aDogYCR7d2lkdGggLSA0Nn1weGAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgICAgICAkKHRoaXNbJ2FwcC1jb250YWluZXInXSkuY3NzKHsgd2lkdGg6IGAxMDAlYCB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIE1ldGFNYXAuRXZlbnRlci5vbihDT05TVEFOVFMuRVZFTlRTLlNJREVCQVJfT1BFTiwgKCkgPT4ge1xyXG4gICAgICAgICQodGhpc1snYXBwLWNvbnRhaW5lciddKS5jc3MoeyB3aWR0aDogYDEwMCVgIH0pO1xyXG4gICAgfSk7XHJcblxyXG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG5cclxuY29uc3QgaHRtbCA9IGBcclxuPGRpdiBjbGFzcz1cInBhZ2UtZm9vdGVyXCIgc3R5bGU9XCJwb3NpdGlvbjogZml4ZWQ7IGJvdHRvbTogMDtcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJwYWdlLWZvb3Rlci1pbm5lclwiPlxyXG4gICAgICAgIDxhIGhyZWY9XCIjdGVybXNcIj4mY29weTsyMDE1PC9hPlxyXG4gICAgPC9kaXY+XHJcbjwvZGl2PlxyXG5gO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1mb290ZXInLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uL01ldGFNYXAnKTtcclxufSk7IiwiY29uc3QgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcclxuY29uc3QgcGFnZUxvZ28gPSByZXF1aXJlKCcuL3BhZ2UtbG9nby5qcycpO1xyXG5jb25zdCBwYWdlQWN0aW9ucyA9IHJlcXVpcmUoJy4vcGFnZS1hY3Rpb25zLmpzJyk7XHJcbmNvbnN0IHBhZ2VTZWFyY2ggPSByZXF1aXJlKCcuL3BhZ2Utc2VhcmNoLmpzJyk7XHJcbmNvbnN0IHBhZ2VUb3BNZW51ID0gcmVxdWlyZSgnLi9wYWdlLXRvcG1lbnUnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjxkaXYgaWQ9XCJoZWFkZXItdG9wXCIgY2xhc3M9XCJwYWdlLWhlYWRlciBuYXZiYXIgbmF2YmFyLWZpeGVkLXRvcFwiPlxyXG4gICAgPGRpdiBpZD1cIm1ldGFfcHJvZ3Jlc3NfbmV4dFwiIHN0eWxlPVwib3ZlcmZsb3c6IGluaGVyaXQ7XCI+PC9kaXY+XHJcbiAgICA8ZGl2IGlkPVwiaGVhZGVyLWNvbnRlbnRcIiBjbGFzcz1cInBhZ2UtaGVhZGVyLWlubmVyXCI+XHJcblxyXG4gICAgICAgIDxkaXYgaWQ9XCJtZXRhX3BhZ2VfbG9nb1wiPjwvZGl2PlxyXG4gICAgICAgIFxyXG4gICAgICAgIDxkaXYgaWQ9XCJtZXRhX3BhZ2VfYWN0aW9uc1wiPjwvZGl2PlxyXG4gICAgICAgIFxyXG4gICAgICAgIDxkaXYgaWQ9XCJtZXRhX3BhZ2VfdG9wXCIgY2xhc3M9XCJwYWdlLXRvcFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGlkPVwibWV0YV9wYWdlX3NlYXJjaFwiPjwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGRpdiBpZD1cIm1ldGFfcGFnZV90b3BtZW51XCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgPC9kaXY+XHJcblxyXG48L2Rpdj5cclxuYDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtaGVhZGVyJywgaHRtbCwgZnVuY3Rpb24ob3B0cykge1xyXG5cclxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9NZXRhTWFwJyk7XHJcblxyXG4gICAgdGhpcy5vbignbW91bnQnLCAoKSA9PiB7XHJcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV9sb2dvLCAncGFnZS1sb2dvJyk7XHJcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV9hY3Rpb25zLCAncGFnZS1hY3Rpb25zJyk7XHJcbiAgICAgICAgcmlvdC5tb3VudCh0aGlzLm1ldGFfcGFnZV90b3AsICdwYWdlLXNlYXJjaCcpO1xyXG4gICAgICAgIHJpb3QubW91bnQodGhpcy5tZXRhX3BhZ2VfdG9wLCAncGFnZS10b3BtZW51Jyk7XHJcbiAgICB9KTtcclxuXHJcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcbmNvbnN0IENPTlNUQU5UUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9jb25zdGFudHMnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjxkaXYgY2xhc3MgPVwicGFnZS1sb2dvXCI+XHJcbiAgICA8YSBpZD1cIm1ldGFfbG9nb1wiIGhyZWY9XCIjaG9tZVwiPlxyXG4gICAgICAgIDxpbWcgc3JjPVwibWV0YW1hcC9hc3NldHMvaW1nL21ldGFtYXBfY2xvdWQucG5nXCIgYWx0PVwibG9nb1wiIGNsYXNzID1cImxvZ28tZGVmYXVsdFwiIC8+XHJcbiAgICA8L2E+XHJcbiAgICA8ZGl2IGlkPVwibWV0YV9tZW51X3RvZ2dsZVwiIGNsYXNzID1cIm1lbnUtdG9nZ2xlciBzaWRlYmFyLXRvZ2dsZXJcIiBzdHlsZT1cInsgZ2V0RGlzcGxheSgnbWVudScpIH1cIj5cclxuICAgICAgICA8IS0tRE9DOiBSZW1vdmUgdGhlIGFib3ZlIFwiaGlkZVwiIHRvIGVuYWJsZSB0aGUgc2lkZWJhciB0b2dnbGVyIGJ1dHRvbiBvbiBoZWFkZXItLT5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzID1cIm1lbnUtdG9nZ2xlciByZXNwb25zaXZlLXRvZ2dsZXJcIiBkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCIgZGF0YS10YXJnZXQ9XCIubmF2YmFyLWNvbGxhcHNlXCI+XHJcbjwvYT5cclxuYDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtbG9nbycsIGh0bWwsIGZ1bmN0aW9uKG9wdHMpIHtcclxuXHJcbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vTWV0YU1hcCcpO1xyXG4gICAgdGhpcy5kaXNwbGF5ID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgdGhpcy5nZXREaXNwbGF5ID0gKGVsKSA9PiB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYoIXRoaXMuZGlzcGxheSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2Rpc3BsYXk6IG5vbmU7JztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBNZXRhTWFwLkV2ZW50ZXIub24oQ09OU1RBTlRTLkVWRU5UUy5TSURFQkFSX0NMT1NFLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBcclxuICAgIE1ldGFNYXAuRXZlbnRlci5vbihDT05TVEFOVFMuRVZFTlRTLlNJREVCQVJfT1BFTiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGlzcGxheSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcblxyXG5jb25zdCBodG1sID0gYFxyXG48IS0tIERPQzogQXBwbHkgXCJzZWFyY2gtZm9ybS1leHBhbmRlZFwiIHJpZ2h0IGFmdGVyIHRoZSBcInNlYXJjaC1mb3JtXCIgY2xhc3MgdG8gaGF2ZSBoYWxmIGV4cGFuZGVkIHNlYXJjaCBib3ggLS0+XHJcbjxmb3JtIGNsYXNzPVwic2VhcmNoLWZvcm1cIiBhY3Rpb249XCJleHRyYV9zZWFyY2guaHRtbFwiIG1ldGhvZD1cIkdFVFwiPlxyXG4gICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2wgaW5wdXQtc21cIiBwbGFjZWhvbGRlcj1cIlNlYXJjaC4uLlwiIG5hbWU9XCJxdWVyeVwiPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLWJ0blwiPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiYnRuIHN1Ym1pdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtc2VhcmNoXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+XHJcbjwvZm9ybT5cclxuYDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2Utc2VhcmNoJywgaHRtbCwgZnVuY3Rpb24ob3B0cykge1xyXG5cclxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi9NZXRhTWFwJyk7XHJcblxyXG4gICAgXHJcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcbmNvbnN0IENPTlNUQU5UUyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9jb25zdGFudHMnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjxkaXYgY2xhc3M9XCJwYWdlLXNpZGViYXItd3JhcHBlclwiIHN0eWxlPVwieyBnZXREaXNwbGF5KCkgfVwiPlxyXG4gICAgPGRpdiBjbGFzcz1cInBhZ2Utc2lkZWJhciBuYXZiYXItY29sbGFwc2UgY29sbGFwc2VcIj5cclxuICAgICAgICA8dWwgY2xhc3M9XCJwYWdlLXNpZGViYXItbWVudSBcIiBkYXRhLWtlZXAtZXhwYW5kZWQ9XCJmYWxzZVwiIGRhdGEtYXV0by1zY3JvbGw9XCJ0cnVlXCIgZGF0YS1zbGlkZS1zcGVlZD1cIjIwMFwiPlxyXG5cclxuICAgICAgICAgICAgPGxpIGlmPVwieyBkYXRhIH1cIiBvbmNsaWNrPVwieyBwYXJlbnQuY2xpY2sgfVwiIGVhY2g9XCJ7IGRhdGEgfVwiPlxyXG4gICAgICAgICAgICAgICAgPGEgaWY9XCJ7IGljb24gfVwiIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cInsgaWNvbiB9XCIgc3R5bGU9XCJjb2xvcjojeyBjb2xvciB9O1wiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRpdGxlXCI+eyB0aXRsZSB9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwieyBhcnJvdzogbWVudS5sZW5ndGggfVwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgIDx1bCBpZj1cInsgbWVudSAmJiBtZW51Lmxlbmd0aCB9XCIgY2xhc3M9XCJzdWItbWVudVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaSBlYWNoPVwieyBtZW51IH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ7IGljb24gfVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGl0bGVcIj57IHRpdGxlIH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgPC9saT5cclxuXHJcbiAgICAgICAgPC91bD5cclxuXHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+XHJcbmA7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLXNpZGViYXInLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uL01ldGFNYXAnKTtcclxuXHJcbiAgICB0aGlzLmNsaWNrID0gZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdmb28nKSB9XHJcbiAgICB0aGlzLmRpc3BsYXkgPSB0cnVlO1xyXG4gICAgdGhpcy5kYXRhID0gW107XHJcblxyXG4gICAgTWV0YU1hcC5NZXRhRmlyZS5vbignbWV0YW1hcC9zaWRlYmFyJywgKGRhdGEpID0+IHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBfLmZpbHRlcihfLnNvcnRCeShkYXRhLCAnb3JkZXInKSwgKGQpID0+IHtcclxuICAgICAgICAgICAgdmFyIGluY2x1ZGUgPSBkLmFyY2hpdmUgIT0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKGluY2x1ZGUgJiYgZC5tZW51ICYmIGQubWVudSkge1xyXG4gICAgICAgICAgICAgICAgZC5tZW51ID0gXy5maWx0ZXIoXy5zb3J0QnkoZC5tZW51LCAnb3JkZXInKSwgKG0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbS5hcmNoaXZlICE9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaW5jbHVkZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRoaXMuZ2V0RGlzcGxheSA9ICgpID0+IHtcclxuICAgICAgICBpZighdGhpcy5kaXNwbGF5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnZGlzcGxheTogbm9uZTsnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIE1ldGFNYXAuRXZlbnRlci5vbihDT05TVEFOVFMuRVZFTlRTLlNJREVCQVJfQ0xPU0UsICgpID0+IHtcclxuICAgICAgICB0aGlzLmRpc3BsYXkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgTWV0YU1hcC5FdmVudGVyLm9uKENPTlNUQU5UUy5FVkVOVFMuU0lERUJBUl9PUEVOLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgfSk7XHJcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcbmNvbnN0IG1ldGFQb2ludHMgPSByZXF1aXJlKCcuL21lbnUvbWV0YS1wb2ludHMuanMnKTtcclxuY29uc3QgbWV0YUhlbHAgPSByZXF1aXJlKCcuL21lbnUvbWV0YS1oZWxwLmpzJyk7XHJcbmNvbnN0IG1ldGFVc2VyID0gcmVxdWlyZSgnLi9tZW51L21ldGEtdXNlci5qcycpO1xyXG5jb25zdCBtZXRhTm90ID0gcmVxdWlyZSgnLi9tZW51L21ldGEtbm90aWZpY2F0aW9ucy5qcycpO1xyXG5cclxuY29uc3QgaHRtbCA9IGBcclxuPGRpdiBjbGFzcz1cInRvcC1tZW51XCI+XHJcbiAgICA8dWwgY2xhc3M9XCJuYXYgbmF2YmFyLW5hdiBwdWxsLXJpZ2h0XCI+XHJcbiAgICAgICAgPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPlxyXG4gICAgICAgIDxsaSBjbGFzcz1cImRyb3Bkb3duXCIgaWQ9XCJoZWFkZXJfZGFzaGJvYXJkX2JhclwiIG9uY2xpY2s9XCJ7IG9uQ2xpY2sgfVwiPlxyXG4gICAgICAgICAgICA8YSBjbGFzcz1cImRyb3Bkb3duLXRvZ2dsZVwiIGhyZWY9XCIjaG9tZVwiPlxyXG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1ob21lXCI+PC9pPlxyXG4gICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgPC9saT5cclxuICAgICAgICBcclxuICAgICAgICA8bGkgY2xhc3M9XCJzZXBhcmF0b3IgaGlkZVwiPjwvbGk+XHJcbiAgICAgICAgPGxpIGNsYXNzPVwiZHJvcGRvd24gZHJvcGRvd24tZXh0ZW5kZWQgZHJvcGRvd24tbm90aWZpY2F0aW9uIGRyb3Bkb3duXCIgaWQ9XCJoZWFkZXJfbm90aWZpY2F0aW9uX2JhclwiPjwvbGk+XHJcblxyXG4gICAgICAgIDxsaSBjbGFzcz1cInNlcGFyYXRvciBoaWRlXCI+PC9saT5cclxuICAgICAgICA8bGkgY2xhc3M9XCJkcm9wZG93biBkcm9wZG93bi1leHRlbmRlZCBkcm9wZG93bi1ub3RpZmljYXRpb24gZHJvcGRvd25cIiBpZD1cImhlYWRlcl9wb2ludHNfYmFyXCI+PC9saT5cclxuICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIDxsaSBjbGFzcz1cInNlcGFyYXRvciBoaWRlXCI+PC9saT5cclxuICAgICAgICA8bGkgaWQ9XCJoZWFkZXJfaGVscF9iYXJcIiBjbGFzcz1cImRyb3Bkb3duIGRyb3Bkb3duLWV4dGVuZGVkIGRyb3Bkb3duLW5vdGlmaWNhdGlvbiBkcm9wZG93blwiPjwvbGk+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIDxsaSBjbGFzcz1cInNlcGFyYXRvciBoaWRlXCI+PC9saT5cclxuICAgICAgICA8bGkgaWQ9XCJoZWFkZXJfdXNlcl9tZW51XCIgY2xhc3M9XCJkcm9wZG93biBkcm9wZG93bi11c2VyIGRyb3Bkb3duXCI+PC9saT5cclxuICAgIDwvdWw+XHJcbjwvZGl2PlxyXG5gO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS10b3BtZW51JywgaHRtbCwgZnVuY3Rpb24ob3B0cykge1xyXG4gICAgdGhpcy5vbkNsaWNrID0gKGV2ZW50LCBwYXJhbXMpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhldmVudCwgcGFyYW1zKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9uKCdtb3VudCcsICgpID0+IHtcclxuICAgICAgICByaW90Lm1vdW50KHRoaXMuaGVhZGVyX3BvaW50c19iYXIsICdtZXRhLXBvaW50cycpO1xyXG4gICAgICAgIHJpb3QubW91bnQodGhpcy5oZWFkZXJfbm90aWZpY2F0aW9uX2JhciwgJ21ldGEtbm90aWZpY2F0aW9ucycpO1xyXG4gICAgICAgIHJpb3QubW91bnQodGhpcy5oZWFkZXJfaGVscF9iYXIsICdtZXRhLWhlbHAnKTtcclxuICAgICAgICByaW90Lm1vdW50KHRoaXMuaGVhZGVyX3VzZXJfbWVudSwgJ21ldGEtdXNlcicpO1xyXG4gICAgfSk7XHJcblxyXG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG5jb25zdCBOUHJvZ3Jlc3MgPSB3aW5kb3cuTlByb2dyZXNzO1xyXG5jb25zdCBDT05TVEFOVFMgPSByZXF1aXJlKCcuLi8uLi9jb25zdGFudHMvY29uc3RhbnRzJyk7XHJcblxyXG5jb25zdCBodG1sID0gYFxyXG48ZGl2IGNsYXNzPVwicG9ydGxldCBsaWdodFwiPlxyXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJwb3J0bGV0LWJvZHlcIj5cclxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJyb3cgbWFyZ2luLWJvdHRvbS0zMFwiPlxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGlmPVwieyBoZWFkZXIgfVwiIGNsYXNzPVwiY29sLW1kLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT57IGhlYWRlci50aXRsZSB9PC9oMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPnsgaGVhZGVyLnRleHQgfTwvcD5cclxuXHRcdFx0XHRcdFx0XHQ8dWwgY2xhc3M9XCJsaXN0LXVuc3R5bGVkIG1hcmdpbi10b3AtMTAgbWFyZ2luLWJvdHRvbS0xMFwiPlxyXG5cdFx0XHRcdFx0XHRcdFx0PGxpIGVhY2g9XCJ7IGFyZWFzIH1cIj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PGkgY2xhc3M9XCJ7IGljb24gfVwiPjwvaT4gPGI+eyB0aXRsZSB9PC9iPiB7IHRleHQgfVxyXG5cdFx0XHRcdFx0XHRcdFx0PC9saT5cclxuXHRcdFx0XHRcdFx0XHQ8L3VsPlxyXG5cdFx0XHRcdFx0XHRcdDwhLS0gQmxvY2txdW90ZXMgLS0+XHJcblx0XHRcdFx0XHRcdFx0PGJsb2NrcXVvdGUgY2xhc3M9XCJoZXJvXCI+XHJcblx0XHRcdFx0XHRcdFx0XHQ8cD57IHF1b3RlLnRleHQgfTwvcD5cclxuXHRcdFx0XHRcdFx0XHRcdDxzbWFsbD57IHF1b3RlLmJ5IH08L3NtYWxsPlxyXG5cdFx0XHRcdFx0XHRcdDwvYmxvY2txdW90ZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhZGR0aGlzX2hvcml6b250YWxfZm9sbG93X3Rvb2xib3hcIj48L2Rpdj5cclxuXHRcdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3MgPVwiY29sLW1kLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aWZyYW1lIGlmPVwieyBoZWFkZXIueW91dHViZWlkIH1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwieXRwbGF5ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0L2h0bWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz1cImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL3sgaGVhZGVyLnlvdXR1YmVpZCB9XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcyA9XCJmaXR2aWRzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cImhlaWdodDogMzI3cHg7IHdpZHRoOiAxMDAlOyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWxlZnQ6IGF1dG87IG1hcmdpbi1yaWdodDogYXV0bzsgYnJvZGVyOiAwO1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG5cdFx0XHRcdFx0XHRcdDwvaWZyYW1lPlxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkbGluZVwiPlxyXG5cdFx0XHRcdFx0XHQ8aDM+eyB1c2VyTmFtZSB9eyB2aXNpb24udGl0bGUgfTwvaDM+XHJcblx0XHRcdFx0XHQ8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD57IHZpc2lvbi50ZXh0IH08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdDwvZGl2PlxyXG5gO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygnaG9tZScsIGh0bWwsIGZ1bmN0aW9uKG9wdHMpIHtcclxuXHJcbiAgICBjb25zdCBNZXRhTWFwID0gcmVxdWlyZSgnLi4vLi4vLi4vTWV0YU1hcCcpO1xyXG4gICAgXHJcbiAgICB0aGlzLmFyZWFzID0gW11cclxuICAgIHRoaXMuaGVhZGVyID0ge31cclxuXHJcbiAgICBNZXRhTWFwLk1ldGFGaXJlLm9uKENPTlNUQU5UUy5ST1VURVMuSE9NRSwgKGRhdGEpID0+IHtcclxuICAgICAgICB0aGlzLmFyZWFzID0gXy5maWx0ZXIoXy5zb3J0QnkoZGF0YS5hcmVhcywgJ29yZGVyJyksIChkKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBpbmNsdWRlID0gZC5hcmNoaXZlICE9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBpbmNsdWRlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucXVvdGUgPSBkYXRhLnF1b3RlO1xyXG4gICAgICAgIHRoaXMuaGVhZGVyID0gZGF0YS5oZWFkZXI7XHJcbiAgICAgICAgdGhpcy52aXNpb24gPSBkYXRhLnZpc2lvbjtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnVzZXJOYW1lID0gTWV0YU1hcC5Vc2VyLmZ1bGxOYW1lO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgTlByb2dyZXNzLmRvbmUoKTtcclxuICAgIH0pO1xyXG59KTsiLCJjb25zdCByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG5jb25zdCBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcclxuY29uc3QgTlByb2dyZXNzID0gd2luZG93Lk5Qcm9ncmVzcztcclxuY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5jb25zdCBDT05TVEFOVFMgPSByZXF1aXJlKCcuLi8uLi9jb25zdGFudHMvY29uc3RhbnRzJyk7XHJcblxyXG5jb25zdCBodG1sID0gYFxyXG48ZGl2IGNsYXNzPVwicG9ydGxldCBib3ggZ3JleS1jYXNjYWRlXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwicG9ydGxldC10aXRsZVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjYXB0aW9uXCI+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtaWNvbi10aC1sYXJnZVwiPjwvaT5NZXRhTWFwc1xyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgaWY9XCJ7IG1lbnUgfVwiIGNsYXNzPVwiYWN0aW9uc1wiPlxyXG4gICAgICAgICAgICA8YSBlYWNoPVwieyBtZW51LmJ1dHRvbnMgfVwiIGhyZWY9XCJ7IGxpbmsgfVwiIG9uY2xpY2s9XCJ7IHBhcmVudC5vbkFjdGlvbkNsaWNrIH1cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc21cIj5cclxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwieyBpY29uIH1cIj48L2k+IHsgdGl0bGUgfVxyXG4gICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbVwiIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1jb2dzXCI+PC9pPiBUb29scyA8aSBjbGFzcz1cImZhIGZhLWFuZ2xlLWRvd25cIj48L2k+XHJcbiAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51IHB1bGwtcmlnaHRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGkgZWFjaD1cInsgbWVudS5tZW51IH1cIiBvbmNsaWNrPVwieyBwYXJlbnQub25NZW51Q2xpY2sgfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwieyBsaW5rIH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwieyBpY29uIH1cIj48L2k+IHsgdGl0bGUgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzPVwicG9ydGxldC1ib2R5XCI+XHJcbiAgICAgICAgPHVsIGNsYXNzPVwibmF2IG5hdi10YWJzIHBvcnRsZXQtdGFic1wiPlxyXG4gICAgICAgICAgICA8bGkgb25jbGljaz1cInsgcGFyZW50Lm9uVGFiU3dpdGNoIH1cIiBlYWNoPVwieyB2YWwsIGkgaW4gdGFicyB9XCIgY2xhc3M9XCJ7IGFjdGl2ZTogaSA9PSAwIH1cIj5cclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjbXltYXBzXzFfeyBpIH1cIiBkYXRhLXRvZ2dsZT1cInRhYlwiIGFyaWEtZXhwYW5kZWQ9XCJ7IHRydWU6IGkgPT0gMCB9XCI+XHJcbiAgICAgICAgICAgICAgICB7IHZhbC50aXRsZSB9PC9hPlxyXG4gICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgIDwvdWw+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRhYmxlLXRvb2xiYXJcIj5cclxuXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRhYi1jb250ZW50XCI+XHJcbiAgICAgICAgICAgIDxkaXYgZWFjaD1cInsgdmFsLCBpIGluIHRhYnMgfVwiIGNsYXNzPVwidGFiLXBhbmUgZmFzZSBpbiB7IGFjdGl2ZTogaSA9PSAwIH1cIiBpZD1cIm15bWFwc18xX3sgaSB9XCI+XHJcbiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJ0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWJvcmRlcmVkIHRhYmxlLWhvdmVyXCIgaWQ9XCJteW1hcHNfdGFibGVfeyBpIH1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFwSWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3M9XCJ0YWJsZS1jaGVja2JveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZj1cInsgcGFyZW50LmN1cnJlbnRUYWIgPT0gJ015IE1hcHMnIH1cIiB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cImdyb3VwLWNoZWNrYWJsZVwiIGRhdGEtc2V0PVwiI215bWFwc190YWJsZV97IGkgfSAuY2hlY2tib3hlc1wiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZXJJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWF0ZWQgT25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhdHVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGlmPVwieyBwYXJlbnQuZGF0YSAmJiBwYXJlbnQuZGF0YVtpXSB9XCIgZWFjaD1cInsgcGFyZW50LmRhdGFbaV0gfVwiIGNsYXNzPVwib2RkIGdyYWRlWFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIiA+PHNwYW4gZGF0YS1zZWxlY3Rvcj1cImlkXCIgY2xhc3MgPVwibWFwaWRcIj57IGlkIH08L3NwYW4+PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWY9XCJ7IHBhcmVudC5jdXJyZW50VGFiID09ICdNeSBNYXBzJyB9XCIgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJjaGVja2JveGVzXCIgdmFsdWU9XCIxXCIvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+eyB1c2VyX2lkIH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGlmPVwieyB2YWwuZWRpdGFibGUgfVwiIGNsYXNzPVwibWV0YV9lZGl0YWJsZV97IGkgfVwiIGRhdGEtcGs9XCJ7IGlkIH1cIiBkYXRhLXRpdGxlPVwiRWRpdCBNYXAgTmFtZVwiPnsgbmFtZSB9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBpZj1cInsgIXZhbC5lZGl0YWJsZSB9XCI+eyBuYW1lIH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwiY2VudGVyXCI+eyBjcmVhdGVkX2F0IH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGFiZWwgbGFiZWwtc20gbGFiZWwtc3VjY2Vzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcml2YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1zbSBibHVlIGZpbHRlci1zdWJtaXRcIiBvbmNsaWNrPVwieyBwYXJlbnQub25PcGVuIH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1pY29uLWV5ZS1vcGVuXCI+PC9pPiBPcGVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuYDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ215LW1hcHMnLCBodG1sLCBmdW5jdGlvbiAob3B0cykge1xyXG5cclxuICAgIGNvbnN0IE1ldGFNYXAgPSByZXF1aXJlKCcuLi8uLi8uLi9NZXRhTWFwLmpzJyk7XHJcblxyXG4gICAgdGhpcy5kYXRhID0gbnVsbDtcclxuICAgIHRoaXMubWVudSA9IG51bGw7XHJcbiAgICB0aGlzLnRhYnMgPSBfLnNvcnRCeShbeyB0aXRsZTogJ015IE1hcHMnLCBvcmRlcjogMCwgZWRpdGFibGU6IHRydWUgfSwgeyB0aXRsZTogJ1NoYXJlZCB3aXRoIE1lJywgb3JkZXI6IDEsIGVkaXRhYmxlOiBmYWxzZSB9XSwgJ29yZGVyJyk7XHJcbiAgICB0aGlzLmN1cnJlbnRUYWIgPSAnTXkgTWFwcyc7XHJcblxyXG4gICAgdGhpcy5vbk9wZW4gPSAoZXZlbnQsIC4uLm8pID0+IHtcclxuICAgICAgICBNZXRhTWFwLlJvdXRlci50byhgbWFwLyR7ZXZlbnQuaXRlbS5pZH1gKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9uVGFiU3dpdGNoID0gKGV2ZW50LCAuLi5vKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGFiID0gZXZlbnQuaXRlbS52YWwudGl0bGU7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmN1cnJlbnRUYWIpIHtcclxuICAgICAgICAgICAgY2FzZSAnTXkgTWFwcyc6XHJcblxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub25BY3Rpb25DbGljayA9IChldmVudCwgdGFnKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vbk1lbnVDbGljayA9IChldmVudCwgdGFnKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFRhYiA9PSAnTXkgTWFwcycpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChldmVudC5pdGVtLnRpdGxlLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlTWFwcyA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvRGVsZXRlTWFwLmpzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gdGhpc1tgdGFibGUwYF0uZmluZCgnLmFjdGl2ZScpLmZpbmQoJy5tYXBpZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBfLmVhY2goc2VsZWN0ZWQsIChjZWxsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkcy5wdXNoKGNlbGwuaW5uZXJIVE1MKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGVNYXBzLmRlbGV0ZUFsbChpZHMsIFBBR0VTLk1ZX01BUFMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmaW5kID0gdGhpc1tgdGFibGUwYF0uZmluZCgndGJvZHkgdHIgLmNoZWNrYm94ZXMnKTtcclxuICAgICAgICAgICAgICAgICAgICBmaW5kLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50cygndHInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LnVuaWZvcm0udXBkYXRlKGZpbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub24oJ21vdW50JywgKCkgPT4ge1xyXG4gICAgICAgIE5Qcm9ncmVzcy5zdGFydCgpO1xyXG4gICAgICAgIE1ldGFNYXAuTWV0YUZpcmUub24oJ21ldGFtYXAvbXltYXBzJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVudSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b25zOiBfLnNvcnRCeShkYXRhLmJ1dHRvbnMsICdvcmRlcicpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lbnU6IF8uc29ydEJ5KGRhdGEubWVudSwgJ29yZGVyJylcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1aWxkVGFibGUgPSAoaWR4LCBsaXN0LCBlZGl0YWJsZSkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5kYXRhIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW2lkeF0gPSBsaXN0O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXNbYHRhYmxlJHtpZHh9YF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGAubWV0YV9lZGl0YWJsZV8ke2lkeH1gKS5lZGl0YWJsZSgnZGVzdHJveScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNbYGRhdGFUYWJsZSR7aWR4fWBdLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXNbYHRhYmxlJHtpZHh9YF0gPSAkKHRoaXNbYG15bWFwc190YWJsZV8ke2lkeH1gXSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzW2BkYXRhVGFibGUke2lkeH1gXSA9IHRoaXNbYHRhYmxlJHtpZHh9YF0uRGF0YVRhYmxlKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVW5jb21tZW50IGJlbG93IGxpbmUoJ2RvbScgcGFyYW1ldGVyKSB0byBmaXggdGhlIGRyb3Bkb3duIG92ZXJmbG93IGlzc3VlIGluIHRoZSBkYXRhdGFibGUgY2VsbHMuIFRoZSBkZWZhdWx0IGRhdGF0YWJsZSBsYXlvdXRcclxuICAgICAgICAgICAgICAgICAgICAvLyBzZXR1cCB1c2VzIHNjcm9sbGFibGUgZGl2KHRhYmxlLXNjcm9sbGFibGUpIHdpdGggb3ZlcmZsb3c6YXV0byB0byBlbmFibGUgdmVydGljYWwgc2Nyb2xsKHNlZTogYXNzZXRzL2dsb2JhbC9wbHVnaW5zL2RhdGF0YWJsZXMvcGx1Z2lucy9ib290c3RyYXAvZGF0YVRhYmxlcy5ib290c3RyYXAuanMpLiBcclxuICAgICAgICAgICAgICAgICAgICAvLyBTbyB3aGVuIGRyb3Bkb3ducyB1c2VkIHRoZSBzY3JvbGxhYmxlIGRpdiBzaG91bGQgYmUgcmVtb3ZlZC4gXHJcbiAgICAgICAgICAgICAgICAgICAgLy8nZG9tJzogJzwncm93JzwnY29sLW1kLTYgY29sLXNtLTEyJ2w+PCdjb2wtbWQtNiBjb2wtc20tMTInZj5yPnQ8J3Jvdyc8J2NvbC1tZC01IGNvbC1zbS0xMidpPjwnY29sLW1kLTcgY29sLXNtLTEyJ3A+PicsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vJ2JTdGF0ZVNhdmUnOiB0cnVlLCAvLyBzYXZlIGRhdGF0YWJsZSBzdGF0ZShwYWdpbmF0aW9uLCBzb3J0LCBldGMpIGluIGNvb2tpZS5cclxuICAgICAgICAgICAgICAgICAgICAnY29sdW1ucyc6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJhYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3JkZXJhYmxlJzogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29yZGVyYWJsZSc6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29yZGVyYWJsZSc6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29yZGVyYWJsZSc6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29yZGVyYWJsZSc6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcmRlcmFibGUnOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvL3RoaXNbYHRhYmxlJHtpZHh9YF1Ub29scyA9IG5ldyAkLmZuLmRhdGFUYWJsZS5UYWJsZVRvb2xzKHRoaXNbYGRhdGFUYWJsZSR7aWR4fWBdLCB7fSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRhYmxlV3JhcHBlciA9IHRoaXNbYHRhYmxlJHtpZHh9YF0ucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkuZmluZChgI215bWFwc18ke2lkeH1fdGFibGVfd3JhcHBlcmApO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXNbYHRhYmxlJHtpZHh9YF0uZmluZCgnLmdyb3VwLWNoZWNrYWJsZScpLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNldCA9IGpRdWVyeSh0aGlzKS5hdHRyKCdkYXRhLXNldCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGVja2VkID0galF1ZXJ5KHRoaXMpLmlzKCc6Y2hlY2tlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeShzZXQpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3RyJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd0cicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS51bmlmb3JtLnVwZGF0ZShzZXQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpc1tgdGFibGUke2lkeH1gXS5vbignY2hhbmdlJywgJ3Rib2R5IHRyIC5jaGVja2JveGVzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50cygndHInKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0YWJsZVdyYXBwZXIuZmluZCgnLmRhdGFUYWJsZXNfbGVuZ3RoIHNlbGVjdCcpLmFkZENsYXNzKCdmb3JtLWNvbnRyb2wgaW5wdXQteHNtYWxsIGlucHV0LWlubGluZScpOyAvLyBtb2RpZnkgdGFibGUgcGVyIHBhZ2UgZHJvcGRvd25cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZWRpdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGAubWV0YV9lZGl0YWJsZV8ke2lkeH1gKS5lZGl0YWJsZSh7IHVuc2F2ZWRjbGFzczogbnVsbCB9KS5vbignc2F2ZScsIGZ1bmN0aW9uIChldmVudCwgcGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFzZXQgJiYgdGhpcy5kYXRhc2V0LnBrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSB0aGlzLmRhdGFzZXQucGs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXRhTWFwLk1ldGFGaXJlLnNldERhdGEocGFyYW1zLm5ld1ZhbHVlLCBgJHtDT05TVEFOVFMuUk9VVEVTLk1BUFNfTElTVH0vJHtpZH0vbmFtZWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTtcclxuXHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICBNZXRhTWFwLmVycm9yKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5nZXRDaGlsZChDT05TVEFOVFMuUk9VVEVTLk1BUFNfTElTVCkub3JkZXJCeUNoaWxkKCdvd25lcicpLmVxdWFsVG8oTWV0YU1hcC5Vc2VyLnVzZXJJZCkub24oJ3ZhbHVlJywgKHZhbCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gdmFsLnZhbCgpO1xyXG4gICAgICAgICAgICBjb25zdCBtYXBzID0gXy5tYXAobGlzdCwgKG9iaiwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBvYmouaWQgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICBvYmouY3JlYXRlZF9hdCA9IG1vbWVudChvYmouY3JlYXRlZF9hdCkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnVpbGRUYWJsZSgwLCBtYXBzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgTWV0YU1hcC5NZXRhRmlyZS5nZXRDaGlsZChDT05TVEFOVFMuUk9VVEVTLk1BUFNfTElTVCkub24oJ3ZhbHVlJywgKHZhbCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gdmFsLnZhbCgpO1xyXG4gICAgICAgICAgICBsZXQgbWFwcyA9IF8ubWFwKGxpc3QsIChvYmosIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5vd25lciA9PSBNZXRhTWFwLlVzZXIudXNlcklkIHx8ICFvYmouc2hhcmVkX3dpdGggfHwgb2JqLnNoYXJlZF93aXRoW01ldGFNYXAuVXNlci51c2VySWRdICE9IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5pZCA9IGtleTtcclxuICAgICAgICAgICAgICAgICAgICBvYmouY3JlYXRlZF9hdCA9IG1vbWVudChuZXcgRGF0ZShvYmouY3JlYXRlZF9hdCkpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYXBzID0gXy5maWx0ZXIobWFwcywgKG1hcCkgPT4geyByZXR1cm4gbWFwICYmIG1hcC5pZCB9KVxyXG4gICAgICAgICAgICBidWlsZFRhYmxlKDEsIG1hcHMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pOyIsImNvbnN0IHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcbmNvbnN0IE5Qcm9ncmVzcyA9IHdpbmRvdy5OUHJvZ3Jlc3M7XHJcbmNvbnN0IENPTlNUQU5UUyA9IHJlcXVpcmUoJy4uLy4uL2NvbnN0YW50cy9jb25zdGFudHMnKTtcclxuXHJcbmNvbnN0IGh0bWwgPSBgXHJcbjxkaXYgY2xhc3M9XCJwb3J0bGV0IGxpZ2h0XCI+XHJcblx0XHRcdFx0PGRpdiBjbGFzcz1cInBvcnRsZXQtYm9keVwiPlxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInJvdyBtYXJnaW4tYm90dG9tLTMwXCI+XHJcblx0XHRcdFx0XHRcdDxkaXYgaWY9XCJ7IGhlYWRlciB9XCIgY2xhc3M9XCJjb2wtbWQtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT57IGhlYWRlci50aXRsZSB9PC9oMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPnsgaGVhZGVyLnRleHQgfTwvcD5cclxuXHRcdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0XHQ8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGVhY2g9XCJ7IGFyZWFzIH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRsaW5lXCI+XHJcbiAgICBcdFx0XHRcdFx0XHQ8aDM+eyB0aXRsZSB9PC9oMz5cclxuICAgIFx0XHRcdFx0XHQ8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPnsgdGV4dCB9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwibGlzdC11bnN0eWxlZCBtYXJnaW4tdG9wLTEwIG1hcmdpbi1ib3R0b20tMTBcIj5cclxuXHRcdFx0XHRcdFx0XHQ8bGkgZWFjaD1cInsgaXRlbXMgfVwiPlxyXG5cdFx0XHRcdFx0XHRcdFx0PGkgY2xhc3M9XCJ7IGljb24gfVwiPjwvaT4gPGI+eyB0aXRsZSB9PC9iPiB7IHRleHQgfVxyXG5cdFx0XHRcdFx0XHRcdDwvbGk+XHJcblx0XHRcdFx0XHRcdDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdDwvZGl2PlxyXG5gO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygndGVybXMnLCBodG1sLCBmdW5jdGlvbihvcHRzKSB7XHJcblxyXG4gICAgY29uc3QgTWV0YU1hcCA9IHJlcXVpcmUoJy4uLy4uLy4uL01ldGFNYXAuanMnKTtcclxuICAgIFxyXG4gICAgdGhpcy5hcmVhcyA9IFtdXHJcbiAgICB0aGlzLmhlYWRlciA9IHt9XHJcblxyXG4gICAgTWV0YU1hcC5NZXRhRmlyZS5vbihDT05TVEFOVFMuUk9VVEVTLlRFUk1TX0FORF9DT05ESVRJT05TLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgIHRoaXMuYXJlYXMgPSBfLmZpbHRlcihfLnNvcnRCeShkYXRhLnNlY3Rpb25zLCAnb3JkZXInKSwgKGQpID0+IHtcclxuICAgICAgICAgICAgbGV0IGluY2x1ZGUgPSBkLmFyY2hpdmUgIT0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYoaW5jbHVkZSkge1xyXG4gICAgICAgICAgICAgICAgZC5pdGVtcyA9IF8uZmlsdGVyKF8uc29ydEJ5KGQuaXRlbXMsICdvcmRlcicpLCAoZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmNsdWRlMiA9IGQuYXJjaGl2ZSAhPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmNsdWRlMjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBpbmNsdWRlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuaGVhZGVyID0gZGF0YS5oZWFkZXI7XHJcbiAgICAgICAgdGhpcy51c2VyTmFtZSA9IE1ldGFNYXAuVXNlci5mdWxsTmFtZTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7XHJcbiAgICB9KTtcclxufSk7IiwiY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XHJcblxyXG5jbGFzcyBDb21tb24ge1xyXG5cclxuICAgIHN0YXRpYyBzcGxpdExpbmVzKHRleHQpIHtcclxuICAgICAgICByZXR1cm4gdGV4dC5zcGxpdCgvXFxuLyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEV2ZW50VGltZSh0LCBub3cpIHtcclxuICAgICAgICBsZXQgdGltZSA9IG1vbWVudCh0LCAnWVlZWS1NTS1ERCBISDptbTpzcy5TU1MnKTtcclxuICAgICAgICBsZXQgbm93dGltZSA9IG1vbWVudChub3csICdZWVlZLU1NLUREIEhIOm1tOnNzLlNTUycpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0OiAgICAgICAnICsgdCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ25vdzogICAgICcgKyBub3cpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0aW1lOiAgICAnICsgdGltZS5mb3JtYXQoKSk7IC8vICsgJyAnICsgdGltZS5pc1ZhbGlkKCkpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdub3d0aW1lOiAnICsgbm93dGltZS5mb3JtYXQoKSk7IC8vICsgJyAnICsgbm93dGltZS5pc1ZhbGlkKCkpO1xyXG4gICAgICAgIHJldHVybiB0aW1lLmZyb20obm93dGltZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNsYXNzSWYoa2xhc3MsIGIpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGFzc0lmOiAnICsga2xhc3MgKyAnLCAnICsgYik7XHJcbiAgICAgICAgcmV0dXJuIChiID8ga2xhc3MgOiAnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYXZvaWQgJyRhcHBseSBhbHJlYWR5IGluIHByb2dyZXNzJyBlcnJvciAoc291cmNlOiBodHRwczovL2NvZGVyd2FsbC5jb20vcC9uZ2lzbWEpXHJcbiAgICBzdGF0aWMgc2FmZUFwcGx5KGZuKSB7XHJcbiAgICAgICAgaWYgKGZuICYmICh0eXBlb2YgKGZuKSA9PT0gJ2Z1bmN0aW9uJykpIHtcclxuICAgICAgICAgICAgZm4oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc291cmNlOiBodHRwOi8vY3RybHEub3JnL2NvZGUvMTk2MTYtZGV0ZWN0LXRvdWNoLXNjcmVlbi1qYXZhc2NyaXB0XHJcbiAgICBzdGF0aWMgaXNUb3VjaERldmljZSgpIHtcclxuICAgICAgICByZXR1cm4gKCgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHx8IChuYXZpZ2F0b3IuTWF4VG91Y2hQb2ludHMgPiAwKSB8fCAobmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAwKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFRpY2tzRnJvbURhdGUoZGF0ZSkge1xyXG4gICAgICAgIGxldCByZXQgPSBudWxsO1xyXG4gICAgICAgIGlmKGRhdGUgJiYgZGF0ZS5nZXRUaW1lKSB7XHJcbiAgICAgICAgICAgIHJldCA9IGRhdGUuZ2V0VGltZSgpLzEwMDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENvbW1vbjsiLCJpZiAoIVN0cmluZy5wcm90b3R5cGUuZm9ybWF0KSB7XHJcbiAgICBTdHJpbmcucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZSgveyhcXGQrKX0vZywgZnVuY3Rpb24gKG1hdGNoLCBudW1iZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBhcmdzW251bWJlcl0gIT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgPyBhcmdzW251bWJlcl1cbiAgICAgICAgICAgICAgOiBtYXRjaFxuICAgICAgICAgICAgO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufSIsImNvbnN0IHV1aWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgaGV4RGlnaXRzLCBpLCBzLCB1dWlkO1xyXG4gICAgcyA9IFtdO1xyXG4gICAgcy5sZW5ndGggPSAzNjtcclxuICAgIGhleERpZ2l0cyA9ICcwMTIzNDU2Nzg5YWJjZGVmJztcclxuICAgIGkgPSAwO1xyXG4gICAgd2hpbGUgKGkgPCAzNikge1xyXG4gICAgICAgIHNbaV0gPSBoZXhEaWdpdHMuc3Vic3RyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDB4MTApLCAxKTtcclxuICAgICAgICBpICs9IDE7XHJcbiAgICB9XHJcbiAgICBzWzE0XSA9ICc0JztcclxuICAgIHNbMTldID0gaGV4RGlnaXRzLnN1YnN0cigoc1sxOV0gJiAweDMpIHwgMHg4LCAxKTtcclxuICAgIHNbOF0gPSBzWzEzXSA9IHNbMThdID0gc1syM10gPSAnLSc7XHJcbiAgICB1dWlkID0gcy5qb2luKCcnKTtcclxuICAgIHJldHVybiB1dWlkO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB1dWlkOyJdfQ==
