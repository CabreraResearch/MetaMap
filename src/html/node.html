<!--
	The template for an idea node. this is strict xhtml (eg <input ../> not <input ..>), and you must
	namespace svg elements.

	The template will expand/shrink based on the input values of w and h.

	The label has to be done as a DOM element, not svg:text, or you wouldn't be able to drag it outside
	of the parent (SVG elements do not allow that to happen). There are placement issues with this setup
	that the prototype does not attempt to address (at render time in order to center the label you'd want to
	measure it and then adjust its position in the parent).

-->
<script type="jtk" id="tmplNode">
	<div class="ideaNode ${cssClass}">
		<div style="position:relative; width: ${w}px; height: ${h}px;">
			<svg:svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 273.34 272.98" enable-background="new 0 0 273.34 272.98" xml:space="preserve">
				<svg:g class="donotdrag blue_button ${cssClass}">
					<svg:path class="donotdrag blue segment edge-relationship" id="relationship_${id}" d="M96.616,97.74L15.548,16.538c-0.691,0.873-1.382,2.079-1.382,3.78v233c0,0,0.158,1.974,1.292,3.658 l81.048-80.949c-0.388-0.428-0.757-0.869-1.131-1.306C75.501,152.887,75.921,119.079,96.616,97.74z" />
				</svg:g>
				<svg:g class="donotdrag green_button ${cssClass}">
					<svg:path class="donotdrag green segment" d="M97.665,177.035l-80.888,80.889c0.874,0.696,2.084,0.987,3.792,0.987h233c0,0,1.987,0.156,3.627-0.969 l-6.457-6.432l-74.602-74.461c-10.551,10.24-24.411,15.983-39.146,15.983C122.173,193.032,108.237,187.381,97.665,177.035z" />
				</svg:g>
				<svg:g class="donotdrag orange_button ${cssClass}">
					<svg:g>
						<svg:path class="donotdrag orange segment edge-perspective" d="M176.074,96.45l81.145-81.256c-0.863-0.637-2.033-1.283-3.65-1.283h-233c0,0-2.029,0.161-3.728,1.344 l80.976,81.281c10.554-10.254,24.426-15.902,39.174-15.902C151.696,80.634,165.531,86.251,176.074,96.45z" />
					</svg:g>
				</svg:g>
				<svg:g class="white_circle ${cssClass}">
					<svg:path class="white_circle ${cssClass}" fill="#fff" fill-opacity="1" d="M136.991,82.134c-14.625-0.001-28.374,5.694-38.715,16.035c-21.347,21.348-21.347,56.082,0,77.429 c10.341,10.341,24.09,16.036,38.715,16.036c14.624,0,28.373-5.695,38.714-16.036c21.347-21.347,21.347-56.081,0-77.429 C165.364,87.828,151.615,82.134,136.991,82.134z" />
                </svg:g>
                <svg:g class="donotdrag red_button ${cssClass}">
                    <svg:path class="donotdrag red segment" d="M177.181,176.221l80.974,80.916c0.708-0.876,1.009-2.093,1.009-3.82v-233c0,0,0.141-2.136-1.137-3.86 l-80.894,81.039C198.545,119.315,198.561,154.383,177.181,176.221z" />
                </svg:g>
				<svg:g class="donotdrag D ${cssClass}">
					<svg:path class="donotdrag letter D" d="M224.577,130.928c5.086,0,8.517,3.512,8.517,8.518v0.08c0,5.006-3.431,8.437-8.517,8.437h-4.804v-17.035 L224.577,130.928L224.577,130.928z M213.557,153.574h11.02c8.881,0,15.016-6.176,15.016-14.128v-0.081 c0-7.952-6.135-14.047-15.016-14.047h-11.02V153.574z" />
				</svg:g>
				<svg:g class="donotdrag P ${cssClass}">
					<svg:path class="donotdrag letter P edge-perspective" id="perspective_${id}" d="M132.773,49.567v-8.639h4.804c3.108,0,5.046,1.494,5.046,4.279v0.081c0,2.422-1.817,4.279-4.925,4.279 H132.773z M126.557,63.574h6.216v-8.477h4.723c6.338,0,11.424-3.391,11.424-9.93v-0.081c0-5.772-4.077-9.768-10.818-9.768h-11.545 L126.557,63.574L126.557,63.574z" />
				</svg:g>
				<svg:g class="donotdrag R ${cssClass}">
					<svg:path class="donotdrag letter R edge-relationship" d="M42.773,139.042v-8.114h6.176c3.028,0,4.885,1.373,4.885,4.037v0.081c0,2.381-1.736,3.996-4.763,3.996 L42.773,139.042L42.773,139.042z M36.557,153.574h6.216v-9.042h4.885l6.055,9.042h7.266l-6.903-10.092 c3.593-1.332,6.055-4.198,6.055-8.759v-0.081c0-2.664-0.848-4.884-2.422-6.458c-1.857-1.857-4.642-2.866-8.235-2.866H36.557 V153.574z" />
				</svg:g>
				<svg:g class="donotdrag S ${cssClass}">
					<svg:path class="donotdrag letter S" d="M137.546,239.381c6.095,0,10.374-3.149,10.374-8.76v-0.08c0-4.925-3.229-6.984-8.961-8.477 c-4.885-1.252-6.095-1.857-6.095-3.714v-0.081c0-1.372,1.251-2.462,3.632-2.462c2.382,0,4.844,1.05,7.347,2.785l3.229-4.682 c-2.866-2.301-6.377-3.593-10.495-3.593c-5.772,0-9.89,3.391-9.89,8.518v0.08c0,5.611,3.674,7.185,9.365,8.639 c4.723,1.211,5.692,2.018,5.692,3.592v0.081c0,1.655-1.534,2.664-4.077,2.664c-3.229,0-5.893-1.332-8.436-3.431l-3.674,4.4 C128.948,237.887,133.267,239.381,137.546,239.381" />
				</svg:g>
				<svg:g class="Leaded_square_frame__x26__cross ${cssClass}">
					<svg:rect class="node-rect ${cssClass}" x="-5.835" y="-3.09" fill="#fff" fill-opacity="1" width="273.003" height="273.001" />
					<svg:polygon fill="#B3C2C7" points="238.165,36.458 238.104,36.454 238.165,36.496 	" />
					<svg:g>
						<svg:path class="node_internal ${cssClass}" fill="#B3C2C7" d="M136.991,193.134c14.783,0,28.689-5.676,39.253-15.978l80.947,80.795 c-0.003,0.002-0.006,0.003-0.009,0.005l1.515,1.513l0.803-1.05l-1.321-1.318c-0.009,0.011-0.014,0.026-0.024,0.037l-40.717-40.688 l-0.022-0.022l0,0l-40.235-40.206c21.379-21.838,21.364-56.906-0.047-78.725l60.94-61.048l0.031,0.007l13.423-13.433l6.527-6.564 c0.005,0.006-0.005,0.013-0.001,0.019l4.588-4.58l-1.166-0.937l-17.689,17.688l-67.711,67.803 c-10.543-10.199-24.378-15.816-39.083-15.816c-14.747,0-28.62,5.648-39.174,15.902L44.623,43.142l-0.001,0.007L19.957,18.383 l-3.114-3.126c0,0,0,0,0.001,0l-3.882-3.898l-0.514,2.121l3.08,3.09c0.007-0.009,0.015-0.02,0.022-0.029l81.068,81.202 c-21.095,21.753-21.113,56.456-0.054,78.23l-81.105,81.006c-0.008-0.011-0.013-0.023-0.02-0.034l-1.955,1.952l1.247,1.045 l23.757-23.724l59.153-59.154C108.214,187.424,122.161,193.134,136.991,193.134z M97.675,98.801 c0.203-0.209,0.394-0.425,0.601-0.632c3.998-3.998,8.509-7.292,13.379-9.84c0.021-0.011,0.043-0.021,0.064-0.032 c0.748-0.39,1.503-0.764,2.268-1.119c0.05-0.023,0.1-0.044,0.15-0.066c0.738-0.339,1.481-0.665,2.233-0.97 c0.086-0.035,0.174-0.066,0.261-0.101c0.719-0.288,1.442-0.565,2.173-0.822c0.128-0.045,0.258-0.083,0.386-0.127 c0.693-0.238,1.389-0.468,2.092-0.677c0.182-0.054,0.367-0.099,0.549-0.152c0.655-0.188,1.311-0.372,1.974-0.535 c0.242-0.06,0.487-0.107,0.729-0.163c0.61-0.141,1.22-0.283,1.837-0.404c0.31-0.061,0.625-0.106,0.936-0.162 c0.555-0.098,1.108-0.202,1.667-0.283c0.397-0.058,0.797-0.097,1.196-0.147c0.481-0.059,0.961-0.127,1.445-0.174 c0.511-0.05,1.026-0.077,1.54-0.113c0.378-0.026,0.755-0.063,1.134-0.082c0.897-0.043,1.798-0.066,2.702-0.066 c0.903,0,1.803,0.022,2.699,0.066c0.364,0.018,0.725,0.054,1.088,0.078c0.527,0.036,1.056,0.065,1.581,0.116 c0.476,0.046,0.947,0.113,1.42,0.171c0.405,0.05,0.813,0.09,1.216,0.149c0.548,0.08,1.091,0.181,1.635,0.277 c0.321,0.057,0.644,0.104,0.963,0.167c0.604,0.118,1.201,0.257,1.799,0.394c0.253,0.058,0.509,0.108,0.761,0.17 c0.647,0.159,1.287,0.339,1.926,0.521c0.197,0.056,0.396,0.105,0.592,0.164c0.684,0.203,1.36,0.427,2.034,0.657 c0.145,0.05,0.293,0.094,0.438,0.145c0.714,0.25,1.419,0.52,2.121,0.8c0.101,0.04,0.203,0.076,0.304,0.117 c0.736,0.298,1.463,0.616,2.185,0.946c0.063,0.029,0.128,0.055,0.191,0.085c0.749,0.346,1.488,0.711,2.221,1.092 c0.035,0.018,0.07,0.035,0.104,0.053c0.755,0.394,1.501,0.807,2.238,1.237c0.011,0.006,0.022,0.012,0.032,0.018 c3.758,2.195,7.271,4.858,10.476,7.955l0.001,0.001c0.229,0.221,0.465,0.432,0.691,0.658c0.127,0.127,0.244,0.261,0.369,0.389 l0.001,0.001c20.824,21.234,20.839,55.348,0.046,76.6l-0.001,0.001c-0.141,0.144-0.273,0.294-0.415,0.437 c-0.171,0.171-0.35,0.33-0.523,0.498l0,0c-3.854,3.756-8.162,6.88-12.804,9.316c-0.011,0.006-0.023,0.011-0.034,0.017 c-0.76,0.398-1.528,0.779-2.305,1.14c-0.035,0.016-0.071,0.031-0.107,0.047c-0.754,0.348-1.513,0.681-2.282,0.994 c-0.072,0.029-0.145,0.055-0.217,0.084c-0.735,0.295-1.474,0.579-2.221,0.842c-0.115,0.04-0.232,0.075-0.347,0.114 c-0.708,0.244-1.419,0.479-2.137,0.694c-0.171,0.051-0.345,0.093-0.516,0.143c-0.668,0.192-1.337,0.381-2.013,0.547 c-0.231,0.057-0.465,0.102-0.696,0.156c-0.623,0.145-1.246,0.29-1.875,0.413c-0.301,0.059-0.605,0.103-0.907,0.157 c-0.566,0.101-1.131,0.206-1.701,0.29c-0.387,0.057-0.779,0.095-1.168,0.143c-0.492,0.061-0.982,0.131-1.477,0.179 c-0.505,0.049-1.014,0.076-1.521,0.112c-0.386,0.027-0.769,0.065-1.156,0.083c-0.898,0.044-1.8,0.066-2.705,0.066 c-0.907,0-1.811-0.022-2.711-0.066c-0.389-0.019-0.775-0.057-1.163-0.084c-0.507-0.035-1.015-0.062-1.519-0.111 c-0.505-0.049-1.006-0.12-1.508-0.183c-0.381-0.048-0.764-0.085-1.143-0.14c-0.585-0.086-1.164-0.194-1.745-0.298 c-0.29-0.052-0.582-0.094-0.871-0.151c-0.645-0.127-1.284-0.276-1.922-0.425c-0.218-0.051-0.439-0.093-0.656-0.147 c-0.695-0.172-1.384-0.366-2.07-0.565c-0.155-0.045-0.312-0.083-0.466-0.129c-0.737-0.221-1.467-0.463-2.193-0.714 c-0.099-0.034-0.2-0.064-0.299-0.099c-0.764-0.27-1.521-0.56-2.272-0.864c-0.058-0.023-0.118-0.044-0.176-0.068 c-0.784-0.32-1.559-0.66-2.327-1.017c-0.023-0.011-0.048-0.021-0.071-0.031c-5.554-2.589-10.679-6.133-15.18-10.541l0,0 c-0.139-0.136-0.285-0.265-0.423-0.403C77.136,154.458,76.945,120.196,97.675,98.801z" />
					</svg:g>
				</svg:g>
				<svg:g class="Leaded_square_frame_1_ ${cssClass}">
					<svg:path class="node-border ${cssClass}" fill="#B3C2C7" d="M259.366,20.854l-0.041,229.685l-0.038,1.335c0,0,0,7-7,7h-2.233l-226.356,0.014l-0.016-0.014h-2.335 c-7,0-7-7-7-7v-1.351l-0.022-0.02l0.041-229.931c0.104-1.336,0.891-6.141,6.091-6.656c0.39-0.074,231.909-0.062,231.909-0.062 S259.366,13.854,259.366,20.854 M258.903-0.112h-243c0,0-15.578,0.406-15.578,15.406v243c0,0,0.578,14.594,15.578,14.594h243 c0,0,14.422,0.406,14.422-14.594v-243C273.325,15.294,273.903-0.112,258.903-0.112" />

					</svg:g>
				<svg:g class="${cssClass}">
					<svg:path data-show="${perspective.class}" class="perspective_closed eye_closed ${cssClass}" fill="#B3C2C7" d="M208.107,57.483l2.34-4.23c-1.74-1.26-3.1-2.85-4.08-4.77s-1.47-3.95-1.47-6.09c0-2.42,0.61-4.67,1.83-6.75 c-4.58,2.34-8.39,5.87-11.43,10.59C198.637,51.393,202.907,55.143,208.107,57.483z M219.777,34.713c0-0.4-0.14-0.74-0.42-1.02 c-0.28-0.28-0.62-0.42-1.02-0.42c-2.5,0-4.645,0.895-6.435,2.685s-2.685,3.935-2.685,6.435c0,0.4,0.14,0.74,0.42,1.02 c0.28,0.28,0.62,0.42,1.02,0.42s0.74-0.14,1.02-0.42c0.28-0.28,0.42-0.62,0.42-1.02c0-1.72,0.61-3.19,1.83-4.41 c1.22-1.22,2.69-1.83,4.41-1.83c0.4,0,0.74-0.14,1.02-0.42C219.637,35.453,219.777,35.113,219.777,34.713z M230.667,28.983 c0,0.14-0.01,0.23-0.03,0.27c-2.1,3.76-5.25,9.42-9.45,16.98s-7.36,13.23-9.48,17.01l-1.47,2.67c-0.2,0.32-0.48,0.48-0.84,0.48 c-0.24,0-1.58-0.7-4.02-2.1c-0.32-0.2-0.48-0.48-0.48-0.84c0-0.24,0.44-1.11,1.32-2.61c-2.86-1.3-5.495-3.03-7.905-5.19 c-2.41-2.16-4.495-4.61-6.255-7.35c-0.4-0.62-0.6-1.31-0.6-2.07s0.2-1.45,0.6-2.07c3.06-4.7,6.86-8.41,11.4-11.13 c4.54-2.72,9.5-4.08,14.88-4.08c1.78,0,3.58,0.17,5.4,0.51l1.62-2.91c0.2-0.32,0.48-0.48,0.84-0.48c0.1,0,0.28,0.06,0.54,0.18 c0.26,0.12,0.57,0.275,0.93,0.465s0.69,0.375,0.99,0.555s0.615,0.365,0.945,0.555s0.525,0.305,0.585,0.345 C230.507,28.373,230.667,28.643,230.667,28.983z M231.777,42.393c0,2.78-0.79,5.315-2.37,7.605s-3.67,3.935-6.27,4.935l8.4-15.06 C231.697,40.773,231.777,41.613,231.777,42.393z M245.217,46.233c0,0.7-0.2,1.39-0.6,2.07c-0.78,1.28-1.87,2.73-3.27,4.35 c-3,3.44-6.475,6.11-10.425,8.01s-8.145,2.85-12.585,2.85l2.22-3.96c4.24-0.36,8.165-1.73,11.775-4.11 c3.61-2.38,6.625-5.45,9.045-9.21c-2.3-3.58-5.12-6.52-8.46-8.82l1.89-3.36c1.9,1.28,3.725,2.81,5.475,4.59s3.195,3.62,4.335,5.52  C245.017,44.843,245.217,45.533,245.217,46.233z" />
				</svg:g>
				<svg:g class="${cssClass}">
					<svg:path data-show="${perspective.class}" class="perspective_open eye_open ${cssClass}" fill="#B3C2C7" d="M241.377,46.233c-3.04-4.72-6.85-8.25-11.43-10.59c1.22,2.08,1.83,4.33,1.83,6.75 c0,3.7-1.315,6.865-3.945,9.495s-5.795,3.945-9.495,3.945s-6.865-1.315-9.495-3.945s-3.945-5.795-3.945-9.495 c0-2.42,0.61-4.67,1.83-6.75c-4.58,2.34-8.39,5.87-11.43,10.59c2.66,4.1,5.995,7.365,10.005,9.795s8.355,3.645,13.035,3.645 s9.025-1.215,13.035-3.645S238.717,50.333,241.377,46.233z M219.777,34.713c0-0.4-0.14-0.74-0.42-1.02 c-0.28-0.28-0.62-0.42-1.02-0.42c-2.5,0-4.645,0.895-6.435,2.685s-2.685,3.935-2.685,6.435c0,0.4,0.14,0.74,0.42,1.02 c0.28,0.28,0.62,0.42,1.02,0.42s0.74-0.14,1.02-0.42c0.28-0.28,0.42-0.62,0.42-1.02c0-1.72,0.61-3.19,1.83-4.41 c1.22-1.22,2.69-1.83,4.41-1.83c0.4,0,0.74-0.14,1.02-0.42C219.637,35.453,219.777,35.113,219.777,34.713z M245.217,46.233 c0,0.68-0.2,1.37-0.6,2.07c-2.8,4.6-6.565,8.285-11.295,11.055s-9.725,4.155-14.985,4.155s-10.255-1.39-14.985-4.17 c-4.73-2.78-8.495-6.46-11.295-11.04c-0.4-0.7-0.6-1.39-0.6-2.07s0.2-1.37,0.6-2.07c2.8-4.58,6.565-8.26,11.295-11.04 c4.73-2.78,9.725-4.17,14.985-4.17s10.255,1.39,14.985,4.17c4.73,2.78,8.495,6.46,11.295,11.04 C245.017,44.863,245.217,45.553,245.217,46.233z" />
				</svg:g>
			</svg:svg>
			<div class="name" style="left: ${labelPosition[0]}px; top: ${labelPosition[1]}px;">
				${label}
			</div>

		</div>
		<jtk-source id="${id}" edge-type="relationship" filter=".edge-relationship" />
		<jtk-source edge-type="perspective" filter=".edge-perspective" data-show="${perspective.class}"/>
		<jtk-target />
	</div>
</script>