(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.MetaMap = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

require('babel/polyfill');
window.riot = require('riot');
window._ = require('lodash');
window.Promise = require('bluebird');
require('core-js');
window.$ = window.jQuery = require('jquery');
require('jquery-ui');
require('bootstrap');
window.Firebase = require('firebase');
window.Humanize = require('humanize-plus');
window.moment = require('moment');
window.URI = require('URIjs');
window.localforage = require('localforage');

require('./js/integrations/auth0');
require('./js/integrations/googleanalytics');
require('./js/integrations/newrelic');
require('./js/integrations/raygun');
require('./js/integrations/usersnap');

require('./tags/page-actions.tag');
require('./tags/page-container.tag');
require('./tags/page-content.tag');
require('./tags/page-footer.tag');
require('./tags/page-header.tag');
require('./tags/page-logo.tag');
require('./tags/page-search.tag');
require('./tags/page-sidebar.tag');
require('./tags/page-topmenu.tag');
require('./tags/page-body.tag');

require('./js/canvas/editor.js');
require('./js/canvas/user.js');
require('./js/canvas/editor_options.js');
require('./js/canvas/analytics.js');
require('./js/canvas/attachments.js');
require('./js/canvas/autosave.js');
require('./js/canvas/generator.js');
require('./js/canvas/layouts.js');
require('./js/canvas/map.js');
require('./js/canvas/perspectives.js');
require('./js/canvas/presenter.js');
require('./js/canvas/templates.js');
require('./js/canvas/ui.js');

var mm = require('./MetaMap');

module.exports = new mm();

},{"./MetaMap":3,"./js/canvas/analytics.js":5,"./js/canvas/attachments.js":6,"./js/canvas/autosave.js":7,"./js/canvas/editor.js":8,"./js/canvas/editor_options.js":9,"./js/canvas/generator.js":10,"./js/canvas/layouts.js":11,"./js/canvas/map.js":12,"./js/canvas/perspectives.js":13,"./js/canvas/presenter.js":14,"./js/canvas/templates.js":15,"./js/canvas/ui.js":16,"./js/canvas/user.js":17,"./js/integrations/auth0":21,"./js/integrations/googleanalytics":23,"./js/integrations/newrelic":24,"./js/integrations/raygun":25,"./js/integrations/usersnap":26,"./tags/page-actions.tag":52,"./tags/page-body.tag":53,"./tags/page-container.tag":54,"./tags/page-content.tag":55,"./tags/page-footer.tag":56,"./tags/page-header.tag":57,"./tags/page-logo.tag":58,"./tags/page-search.tag":59,"./tags/page-sidebar.tag":60,"./tags/page-topmenu.tag":61,"URIjs":undefined,"babel/polyfill":"babel/polyfill","bluebird":undefined,"bootstrap":undefined,"core-js":undefined,"firebase":undefined,"humanize-plus":undefined,"jquery":undefined,"jquery-ui":undefined,"localforage":undefined,"lodash":undefined,"moment":undefined,"riot":"riot"}],2:[function(require,module,exports){
"use strict";
/*
*  Copyright (C) 1998-2015 by Northwoods Software Corporation. All Rights Reserved.
*/

// A custom Tool for moving a label on a Node

/**
* @constructor
* @extends Tool
* @class
* This tool only works when the Node has a label (any GraphObject) marked with
* { _isNodeLabel: true } that is positioned in a Spot Panel.
* It works by modifying that label's GraphObject.alignment property to have an
* offset from the center of the panel.
*/
function NodeLabelDraggingTool() {
  go.Tool.call(this);
  this.name = "NodeLabelDragging";

  /** @type {GraphObject} */
  this.label = null;
  /** @type {Point} */
  this._originalAlignment = null;
  /** @type {Point} */
  this._originalCenter = null;
}
go.Diagram.inherit(NodeLabelDraggingTool, go.Tool);

/**
* This tool can only start if the mouse has moved enough so that it is not a click,
* and if the mouse down point is on a GraphObject "label" in a Spot Panel,
* as determined by findLabel().
* @this {NodeLabelDraggingTool}
* @return {boolean}
*/
NodeLabelDraggingTool.prototype.canStart = function () {
  if (!go.Tool.prototype.canStart.call(this)) return false;
  var diagram = this.diagram;
  if (diagram === null) return false;
  // require left button & that it has moved far enough away from the mouse down point, so it isn't a click
  var e = diagram.lastInput;
  if (!e.left) return false;
  if (!this.isBeyondDragSize()) return false;

  return this.findLabel() !== null;
};

/**
* From the GraphObject at the mouse point, search up the visual tree until we get to
* an object that has the "_isNodeLabel" property set to true, that is in a Spot Panel,
* and that is not the first element of that Panel (i.e. not the main element of the panel).
* @this {NodeLabelDraggingTool}
* @return {GraphObject} This returns null if no such label is at the mouse down point.
*/
NodeLabelDraggingTool.prototype.findLabel = function () {
  var diagram = this.diagram;
  var e = diagram.firstInput;
  var elt = diagram.findObjectAt(e.documentPoint, null, null);

  if (elt === null || !(elt.part instanceof go.Node)) return null;
  while (elt.panel !== null && elt.panel.type === go.Panel.Spot && elt.panel.elt(0) !== elt) {
    if (elt._isNodeLabel) return elt;
    elt = elt.panel;
  }
  return null;
};

/**
* Start a transaction, call findLabel and remember it as the "label" property,
* and remember the original value for the label's alignment property.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doActivate = function () {
  this.startTransaction("Shifted Label");
  this.label = this.findLabel();
  if (this.label !== null) {
    this._originalAlignment = this.label.alignment.copy();
    var main = this.label.panel.findMainElement();
    this._originalCenter = main.getDocumentPoint(go.Spot.Center);
  }
  go.Tool.prototype.doActivate.call(this);
};

/**
* Stop any ongoing transaction.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doDeactivate = function () {
  go.Tool.prototype.doDeactivate.call(this);
  this.stopTransaction();
};

/**
* Clear any reference to a label element.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doStop = function () {
  this.label = null;
  go.Tool.prototype.doStop.call(this);
};

/**
* Restore the label's original value for GraphObject.alignment.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doCancel = function () {
  if (this.label !== null) {
    this.label.alignment = this._originalAlignment;
  }
  go.Tool.prototype.doCancel.call(this);
};

/**
* During the drag, call updateAlignment in order to set the GraphObject.alignment of the label.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doMouseMove = function () {
  if (!this.isActive) return;
  this.updateAlignment();
};

/**
* At the end of the drag, update the alignment of the label and finish the tool,
* completing a transaction.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.doMouseUp = function () {
  if (!this.isActive) return;
  this.updateAlignment();
  this.transactionResult = "Shifted Label";
  this.stopTool();
};

/**
* Save the label's GraphObject.alignment as an absolute offset from the center of the Spot Panel
* that the label is in.
* @this {NodeLabelDraggingTool}
*/
NodeLabelDraggingTool.prototype.updateAlignment = function () {
  if (this.label === null) return;
  var last = this.diagram.lastInput.documentPoint;
  var cntr = this._originalCenter;
  this.label.alignment = new go.Spot(0.5, 0.5, last.x - cntr.x, last.y - cntr.y);
};

module.exports = NodeLabelDraggingTool;

},{}],3:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var MetaFire = require('./js/integrations/firebase');
var Auth0 = require('./js/integrations/auth0');
var usersnap = require('./js/integrations/usersnap');
var User = require('./js/app/user.js');
var Editor = require('./js/map/editor.js');
var nuMap = require('./js/newmap/map.js');

var MetaMap = (function () {
    function MetaMap() {
        _classCallCheck(this, MetaMap);

        this.MetaFire = new MetaFire();
        this.Auth0 = new Auth0();
        usersnap();
    }

    _createClass(MetaMap, [{
        key: 'init',
        value: function init() {
            var _this = this;

            var self = this;
            this.Auth0.login().then(function (profile) {
                self.User = new User(profile);

                riot.mount('*');
                _.delay(function () {
                    Metronic.init(); // init metronic core componets
                    Layout.init(); // init layout
                    Demo.init(); // init demo features
                    Index.init(); // init index page
                    Tasks.initDashboardWidget(); // init tash dashboard widget
                    //var x = { cssTagging: {} }

                    //window.mapData = { "map": { "metadata": { "sandbox": false, "id": 5547, "name": "Untitled Map", "url": "/maps/5547", "canEdit": true, "updatedAt": "2015-05-15T12:29:40.721-04:00", "updatedBy": null, "updatedByName": null, "userTags": [] }, "data": { "class": "go.GraphLinksModel", "nodeIsLinkLabelProperty": "isLinkLabel", "linkLabelKeysProperty": "labelKeys", "linkFromPortIdProperty": "fromPort", "linkToPortIdProperty": "toPort", "nodeDataArray": [{ "key": 1, "text": "New Idea", "isGroup": true, "loc": "0 0", "layout": "left", "sExpanded": true, "pExpanded": true }], "linkDataArray": [] }, "stateData": null, "editorOptions": null, "analytics": {}, "versions": [] }};
                    //window._mapEditorCtrl = MapEditorCtrl(x, x, '', '');
                    //window.CrlMap = new Editor(window.mapData);

                    nuMap();
                }, 250);
                _this.MetaFire.init();
            });
        }
    }, {
        key: 'logout',
        value: function logout() {
            this.MetaFire.logout();
            this.Auth0.logout();
        }
    }]);

    return MetaMap;
})();

module.exports = MetaMap;

},{"./js/app/user.js":4,"./js/integrations/auth0":21,"./js/integrations/firebase":22,"./js/integrations/usersnap":26,"./js/map/editor.js":38,"./js/newmap/map.js":50}],4:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var User = (function () {
    function User(profile) {
        _classCallCheck(this, User);

        this.profile = profile;
        this.params = URI(window.location).query(true);
        this.thinkquery = this.params.thinkquery ? true : false;
    }

    _createClass(User, [{
        key: 'userId',
        get: function () {
            return this.profile.user_id;
        }
    }, {
        key: 'isAdmin',
        get: function () {
            return this.profile.roles.indexOf('admin') !== -1;
        }
    }, {
        key: 'name',
        get: function () {
            return this.profile.name;
        }
    }, {
        key: 'saveUserEditorOptions',
        value: function saveUserEditorOptions(options) {
            var data = {
                user: {
                    editor_options: JSON.stringify(options)
                }
            };

            //startSpinner();
            //$http.put('/users/' + $scope.userId + '.json', data).then(
            //    function (response) {
            //        stopSpinner();
            //    },
            //    function () {
            //        stopSpinner();
            //        $scope.profileEditStatus = 'Could not save editor options';
            //    }
            //);
        }
    }]);

    return User;
})();

module.exports = User;

},{}],5:[function(require,module,exports){
// functions handling analytics
// analytics display is in views/maps/_analytics_tab_map and _analytics_tab_thing
'use strict';

SandbankEditor.Analytics = function (editor, map) {

    var self = this;

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.getUi().currentTabIs(map.getUi().TAB_ID_ANALYTICS_THING)) {
                self.updateContextualAnalytics();
            }
        }
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.getUi().TAB_ID_ANALYTICS_THING) {
            // opening thing analytics tab
            self.updateContextualAnalytics();
        }
    };

    // this gets populated by map.loadMapExtraData, on load and after every autosave
    this.mapAnalytics = null;

    // --------- contextual analytics --------------
    // - these are all calculated here, unlike map analytics which are calculated on the server and connected with badges and points

    // this gets calculated by updateContextualAnalytics
    this.contextualAnalytics = {
        thingName: '',

        // thing stuff
        distinctFrom: 0,
        intentionallyDistinctFrom: 0,
        partOf: 0,
        includesParts: 0,
        relatedTo: 0,
        isRelationship: 0,
        lookingAt: 0,
        lookedAtFrom: 0,

        // R stuff
        rFromThingName: '',
        rToThingName: '',
        isRThing: false,
        isRSystem: false,
        isRPoint: false,
        isRView: false
    };

    this.updateContextualAnalytics = function () {
        //console.log('updateContextualAnalytics');
        if (!map.getUi().currentTabIs(map.getUi().TAB_ID_ANALYTICS_THING)) {
            return;
        }

        var diagram = map.getDiagram();
        var part = diagram.selection.first();
        var a = self.contextualAnalytics;

        if (part && part instanceof go.Group) {
            var thing = part;

            // thing name
            a.thingName = thing.data.text;

            // distinct from
            a.distinctFrom = _.where(diagram.model.nodeDataArray, { isGroup: true }).length - 1;

            // part of
            var level = 0;
            var thing2 = thing;
            while (thing2 = getContainingGroup(thing2)) {
                level++;
            }
            a.partOf = level;

            // includes parts
            a.includesParts = countGroups(thing);

            // related to / looking at / looked at from / intentionally distinct from
            a.relatedTo = 0;
            a.lookingAt = 0;
            a.lookedAtFrom = 0;
            a.intentionallyDistinctFrom = 0;
            var links = thing.linksConnected;
            var rConnectedThingKeys = [];
            while (links.next()) {
                var link = links.value;
                // P link
                if (link.data.category == 'P') {
                    if (link.fromNode == thing) {
                        a.lookingAt++;
                    } else if (link.toNode == thing) {
                        a.lookedAtFrom++;
                    }
                }
                // D link
                else if (link.data.category == 'D') {
                    a.intentionallyDistinctFrom++;
                }
                // R link
                else if (!link.data.category) {
                    // track keys of related things so we don't count them multiple times
                    if (link.fromNode == thing) {
                        rConnectedThingKeys.push(link.toNode.data.key);
                    } else if (link.toNode == thing) {
                        rConnectedThingKeys.push(link.fromNode.data.key);
                    }
                }
            }
            a.relatedTo = _.uniq(rConnectedThingKeys).length;

            // isRelationship
            a.isRelationship = thing.isLinkLabel;
        } else if (part && part instanceof go.Link) {
            var rel = part;

            // thing names
            a.rFromThingName = rel.fromNode.data.text;
            a.rToThingName = rel.toNode.data.text;

            // is R thing
            a.isRThing = rel.isLabeledLink;

            // is R system
            a.isRSystem = rel.isLabeledLink && countGroups(rel.labelNodes.first()) > 0;

            // is R point
            a.isRPoint = rel.isLabeledLink && isPoint(rel.labelNodes.first());

            // is R view
            a.isRView = rel.isLabeledLink && isView(rel.labelNodes.first());
        }
    };

    // returns either the containingGroup or the rThingContainingGroup, whichever is non-null
    function getContainingGroup(group) {
        return group.containingGroup || getRThingContainingGroup(group);
    }

    // if group is an R-thing between two sibling parts of a whole, returns the whole; else returns null
    function getRThingContainingGroup(group) {
        if (group.isLinkLabel) {
            var fromParent = group.labeledLink.fromNode.containingGroup;
            var toParent = group.labeledLink.toNode.containingGroup;
            if (fromParent !== null && toParent !== null && fromParent == toParent) {
                return fromParent;
            }
        }
        return null;
    }

    // counts the member parts of the group that are groups, recursively (not including the group itself)
    function countGroups(group) {
        var count = 0;
        var it = getMemberGroups(group).iterator;
        while (it.next()) {
            var part = it.value;
            count += 1 + countGroups(part);
        }

        return count;
    }

    // returns the collection of groups that are either a memberPart of this group, or an R-thing between sibling memberParts
    function getMemberGroups(group) {
        var members = new go.List();
        var it = group.memberParts;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group) {
                members.add(part);
                var rthing = getRThingToSibling(part); // NB: should not get duplication here, as this checks for r-things in only one direction
                if (rthing) {
                    members.add(rthing);
                }
            }
        }
        return members;
    }

    // if the group is linked by an R-thing to a sibling (with the group as the fromNode), returns the R-thing; else returns null
    function getRThingToSibling(group) {
        var it = group.findLinksOutOf();
        while (it.next()) {
            var link = it.value;
            if (link.labelNodes.count > 0 && link.toNode.containingGroup == group.containingGroup) {
                return link.labelNodes.first();
            }
        }
        return null;
    }

    function isPoint(group) {
        var it = group.findLinksOutOf();
        while (it.next()) {
            var link = it.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    }

    function isView(group) {
        var it = group.findLinksInto();
        while (it.next()) {
            var link = it.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    }
};

},{}],6:[function(require,module,exports){
// functions handling attachments

'use strict';

window.SandbankEditor.Attachments = function ($scope, map) {

    var self = this;

    this.selectedThing = null;
    this.attachments = null;

    this.attachmentTypes = [{ name: 'note', labelSingular: 'Note', labelPlural: 'Notes' }, { name: 'link', labelSingular: 'Web Link', labelPlural: 'Web Links' }, { name: 'task', labelSingular: 'Task', labelPlural: 'Tasks' }, { name: 'map', labelSingular: 'Linked MetaMap', labelPlural: 'Linked MetaMaps' }
    //        {name: 'doc', labelSingular: 'Document', labelPlural: 'Documents'}  // limit overall storage space OR simpler rules?
    // limit file types - pdf, jpg, gif, png, office?...  whitelist vs. blacklist
    ];

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.getUi().currentTabIs(map.getUi().TAB_ID_ATTACHMENTS)) {
                self.stopEditingAll();
                self.saveAttachments();
                self.loadSelectedThingAttachments();
            }
        }
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.getUi().TAB_ID_ATTACHMENTS) {
            // opening tab
            self.loadSelectedThingAttachments();
        }
        if (oldValue == map.getUi().TAB_ID_ATTACHMENTS) {
            // closing tab
            self.saveAttachments();
        }
    };

    this.loadSelectedThingAttachments = function () {
        $scope.safeApply(function () {
            if (map.thingSelected()) {
                self.selectedThing = map.getUniqueThingSelected();
                self.attachments = self.selectedThing.data.attachments;
                if (self.attachments === undefined) {
                    self.attachments = [];
                }
            }
        });
    };

    // set all attachments to editing = false
    this.stopEditingAll = function () {
        $scope.safeApply(function () {
            if (self.attachments) {
                _.each(self.attachments, function (att) {
                    att.editing = false;
                });
            }
        });
    };

    this.editingAnItem = function () {
        return self.attachments && _.findWhere(self.attachments, { editing: true }) !== undefined;
    };

    // set all other attachments to editing = false
    this.startEditing = function (attachment) {
        $scope.safeApply(function () {
            self.stopEditingAll();
            attachment.editing = true;
        });
    };

    this.saveItem = function (attachment) {
        $scope.safeApply(function () {
            attachment.editing = false;
            self.saveAttachments();
        });
    };

    this.saveAttachments = function () {
        $scope.safeApply(function () {
            console.log('saveAttachments, selected: ' + self.selectedThing);
            if (self.selectedThing) {
                map.getDiagram().model.setDataProperty(self.selectedThing.data, 'attachments', self.attachments);
                self.selectedThing.updateTargetBindings();
            }
            map.getAutosave().saveNow('edit_attachments');
        });
    };

    this.listAttachments = function (type) {
        var atts = _.where(self.attachments, { type: type });
        return atts;
    };

    this.addAttachment = function (type) {
        var item = { type: type, editing: true };
        if (type == 'note') {
            self.attachments.push(_.extend(item, { text: '', url: '' }));
        } else if (type == 'link') {
            self.attachments.push(_.extend(item, { label: '', url: '' }));
        } else if (type == 'task') {
            self.attachments.push(_.extend(item, { text: '' }));
        } else if (type == 'doc') {
            self.attachments.push(_.extend(item, { name: '' }));
        } else if (type == 'map') {
            self.attachments.push(_.extend(item, { mapRef: { id: 0, name: '' } }));
        }
    };

    this.isValid = function (attachment) {
        if (attachment.type == 'link') {
            return attachment.label && attachment.url && attachment.label.trim() !== '' && attachment.url.trim() !== '';
        } else if (attachment.type == 'note') {
            return attachment.text && attachment.text.trim() !== '';
        } else if (attachment.type == 'task') {
            return attachment.text && attachment.text.trim() !== '';
        } else if (attachment.type == 'doc') {
            return attachment.name && attachment.name.trim() !== '';
        } else if (attachment.type == 'map') {
            return attachment.mapRef && attachment.mapRef.id !== null && attachment.mapRef.id !== undefined;
        }
    };

    this.deleteAttachment = function (att) {
        var typeLabel = _.findWhere(self.attachmentTypes, { name: att.type }).labelSingular;
        if (confirm('Delete ' + typeLabel + '?')) {
            var i = _.indexOf(self.attachments, att);
            self.attachments.splice(i, 1);
        }
    };

    // query server for maps containing the given text in the map name
    this.getOtherMaps = function (viewValue) {
        // NB: this URL is constructed to match the one generated by the search form on the maps page...
        var url = '/maps/visible_maps.json?utf8=%E2%9C%93&q%5Bname_cont%5D=' + viewValue;
        return $http.get(url).then(function (response) {
            return response.data.maps;
        });
    };

    this.otherMapSelected = function (viewValue, modelValue) {
        console.log('otherMapSelected, viewValue: ' + viewValue.id + ', modelValue: ' + modelValue);
    };

    this.formatOtherMap = function (model) {
        return model ? model.name : '';
    };
};

},{}],7:[function(require,module,exports){
// functions handling editor autosave function

'use strict';

SandbankEditor.Autosave = function (editor, map) {

    var self = this;

    var $http = {
        put: function put() {
            return new Promise(function (fulfill, reject) {});
        }
    };

    var changeTypes = [];

    this.saveOnModelChanged = true;

    // do a save next time the set interval passes with no save requests
    this.save = function (changeType) {
        changeTypes.push(changeType);
        delayedAutosave();
    };

    // do a save right now
    this.saveNow = function (changeType) {
        changeTypes.push(changeType);
        autosave();
    };

    // don't let autosave be triggered more than every N milliseconds...
    var delayedAutosave = _.debounce(autosave, 2000);

    // compile the current list of change type descriptions, process them
    // to remove duplicates, and save the current data
    function autosave() {
        // stop right here if we're in the sandbox and/or we don't have edit permissions
        if (editor.sandbox || !editor.canEdit) {
            return;
        }

        if (!changeTypes.length) {
            console.log('autosave: nothing to save!'); // shouldn't happen
            return;
        }

        // de-dupe the list of change types
        var changeList = _.uniq(changeTypes);
        //console.log('changeList: ' + changeList);
        // don't show move events unless that's all we have
        var changeListWithoutMoves = _.without(changeList, 'move');
        if (changeListWithoutMoves.length > 0) {
            changeList = changeListWithoutMoves;
        }
        //console.log('changeList without moves: ' + changeList);
        // get descriptions
        var descriptionList = _.map(changeList, function (ct) {
            return _.result(changeDescriptions, ct);
        });

        //console.log('autosave, changeList: ' + changeList + ', descriptionList: ' + descriptionList);
        var postData = {
            'name': editor.mapTitle,
            'data': map.getDiagram().model.toJson(),
            'state_data': JSON.stringify(map.getUi().getStateData()),
            'editor_options': JSON.stringify(map.getUi().getMapEditorOptions()),
            'presenter_slides': map.getPresenter().getSlideCount(),
            'activity_slides': map.getPresenter().getActivitySlideCount(),
            'change_type': changeList.join(';'),
            'change_description': descriptionList.join('; '),
            'thumbnail_png': map.getPresenter().getMapThumbnail()
        };
        var url = editor.mapUrl + '.json';

        editor.updateEditStatus(editor.SAVING);
        $http.put(url, postData).then(function (response) {
            changeTypes = [];
            editor.updateEditStatus(editor.SAVE_OK);
            // load returned data for analytics, points, badges, versions
            editor.map.loadMapExtraData(response.data.map);
        }, function () {
            editor.updateEditStatus(editor.SAVE_FAILED);
        });
    }

    // -------------- handle model changes - trigger autosave ------------------

    var changeDescriptions = {
        move: 'Moved Objects',
        undo_redo: 'Performed Undo/Redo',
        edit_title: 'Edited MetaMap Title',
        edit_description: 'Edited MetaMap Description',
        edit_usertags: 'Edit MetaMap Tags',
        edit_d: 'Edited Distinctions',
        edit_s: 'Edited Systems',
        edit_r: 'Edited Relationships',
        edit_p: 'Edited Perspectives',
        add_thing: 'Added Ideas',
        rename_thing: 'Renamed Ideas',
        delete_thing: 'Deleted Ideas',
        edit_attachments: 'Edited Attachments',
        edit_presenter: 'Edited Presenter Slides',
        edit_generator: 'Inserted Ideas from ThinkQuery',
        edit_standards: 'Edited Links to Common Core Standards'
    };

    // e is a go.ChangedEvent
    this.modelChanged = function (e) {

        if (!self.saveOnModelChanged) {
            return;
        }

        var changeType = null;
        var changeDescription = null;

        if (e.propertyName == 'type') {
            // change R type
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,n,1,o,2,A,3,r,4,r,5,o,6,w,7,s] , newParam: null, newValue: [0,t,1,o] , propertyName: type
            changeType = 'edit_r';
            changeDescription = 'Changed Relationship Types';
        } else if (e.propertyName == 'layout') {
            // change system layout
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,l,1,e,2,f,3,t] , newParam: null, newValue: [0,r,1,i,2,g,3,h,4,t] , propertyName: layout
            changeType = 'edit_s';
        } else if (e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'fromPort', 'R')) {
            // add link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,P] , propertyName: linkDataArray
            // modelChange: linkToPortId, change: ChangedEvent.Property, oldParam: null, oldValue: [0,P] , newParam: null, newValue: [0,R] , propertyName: toPort
            changeType = 'edit_r';
        } else if (e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'fromPort', 'R')) {
            // delete link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,R] , newParam: null, newValue: [] , propertyName: linkDataArray
            changeType = 'edit_r';
        } else if (e.propertyName == 'linkDataArray') {
            // change P/D links
            // add P link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 2, newValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P] , propertyName: linkDataArray
            // modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
            // delete P link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 2, oldValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P,category,P] , newParam: null, newValue: [] , propertyName: linkDataArray
            // add D link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , propertyName: linkDataArray
            // remove D link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , newParam: null, newValue: [] , propertyName: linkDataArray

            if (e.newValue && e.newValue.category == 'P' || e.oldValue && e.oldValue.category == 'P') {
                changeType = 'edit_p';
            } else if (e.newValue && e.newValue.category == 'D' || e.oldValue && e.oldValue.category == 'D') {
                changeType = 'edit_d';
            }
        } else if (e.propertyName == 'category') {
            // add P link
            // modelChanged, modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
            changeType = 'edit_p';
        } else if (e.propertyName == 'group') {
            // drag into S
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
            // reorder part
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
            // drag to D
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group

            changeType = 'edit_s';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'isGroup', true)) {
            // add thing
            // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7] , propertyName: nodeDataArray
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,2,1,2,2,8,3,.,4,5,5,6,6,2,7,5,8, ,9,-,10,1,11,4,12,9,13,.,14,6,15,8,16,7,17,5] , propertyName: loc
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: children
            changeType = 'add_thing';
        } else if (e.propertyName == 'text') {
            // move thing
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,b,1,b,2,b,3,b,4,b] , newParam: null, newValue: [0,a,1,a,2,a,3,a,4,a] , propertyName: text
            changeType = 'rename_thing';
            changeDescription = 'Renamed Ideas';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'isGroup', true)) {
            // delete thing
            // modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7,loc,228.5625 -149.6875,children,0,attachments,] , newParam: null, newValue: [] , propertyName: nodeDataArray
            changeType = 'delete_thing';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'isGroup', false)) {
            // add slide
            // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877] , propertyName: nodeDataArray
            changeType = 'edit_presenter';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'isGroup', false)) {
            // delete slide
            //modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877,$$hashKey,0XN] , newParam: null, newValue: [] , propertyName: nodeDataArray
            changeType = 'edit_presenter';
        } else if (e.propertyName == 'loc' || e.propertyName == 'width' || e.propertyName == 'height') {
            // move thing or resize slide
            // move slide
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,8] , newParam: null, newValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,7] , propertyName: loc
            // resize slide
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: height
            // move thing
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,4,1,7,2,9,3,.,4,8,5,7,6,5,7, ,8,-,9,1,10,2,11,2,12,.,13,8,14,7,15,5] , newParam: null, newValue: [0,5,1,4,2,0,3,.,4,3,5,1,6,2,7,5,8, ,9,-,10,1,11,2,12,1,13,.,14,1,15,8,16,7,17,5] ,            
            changeType = 'move';
        } else if (e.propertyName == 'level' || e.propertyName == 'children') {
            // these attributes are updated as a result of other actions; ignore
            changeType = null;
        } else if (e.propertyName == 'attachments') {
            // edited attachments
            changeType = 'edit_attachments';
        } else if (e.propertyName == 'sExpanded' || e.propertyName == 'pExpanded') {
            // ignore expand/collapse
            changeType = 'move';
        } else if (e.propertyName == 'FinishedUndo' || e.propertyName == 'FinishedRedo') {
            changeType = 'undo_redo';
            map.refresh();
        } else if (e.change != go.ChangedEvent.Transaction) {
            console.log('modelChanged, modelChange: ' + e.modelChange + ', change: ' + e.change + ', oldParam: ' + e.oldParam + ', oldValue: [' + _.pairs(e.oldValue) + '] ' + ', newParam: ' + e.newParam + ', newValue: [' + _.pairs(e.newValue) + '] ' + ', propertyName: ' + e.propertyName);
        }

        if (changeType) {
            map.getAnalytics().updateContextualAnalytics();
            //console.log('calling delayedAutosave, changeType: ' + changeType);
            self.save(changeType);
        }
    };

    // convenience function for checking properties
    function propertyEquals(obj, key, value) {
        return obj !== null && _.has(obj, key) && _.result(obj, key) == value;
    }
};

},{}],8:[function(require,module,exports){
// main controller class

'use strict';

window.SandbankEditor = {};

window.MapEditorCtrl = function () {

    var ret = {};

    ret.map = new SandbankEditor.Map(ret);

    // window.mapData is set in _form view
    var metadata = window.mapData.map.metadata;
    ret.sandbox = metadata.sandbox;
    ret.mapData = window.mapData.map.data; // this gets overwritten by load() unless we are in the sandbox with no map ID
    ret.mapId = metadata.id;
    ret.mapTitle = metadata.name;
    ret.mapUserTags = metadata.userTags;
    ret.mapUrl = metadata.url;
    ret.canEdit = metadata.canEdit;
    ret.updatedAt = metadata.updatedAt;
    ret.updatedBy = metadata.updatedBy; // ID
    ret.updatedByName = metadata.updatedByName;

    ret.editingTitle = false;

    ret.showImageExport = false;
    ret.imageExportLoading = true;

    ret.currentTab = null;

    // override parent scope (see user.js) since we're editing a map
    //$scope.ccsTagging.mapId = $scope.mapId;

    ret.maybeStartEditingTitle = function () {
        if (ret.canEdit) {
            ret.editingTitle = true;
        }
    };

    ret.doneEditingTitle = function () {
        //console.log('doneEditingTitle');
        ret.editingTitle = false;
        ret.map.getAutosave().save('edit_title');
    };

    ret.editingTitleKeypress = function (e) {
        if (e.which == 13) {
            ret.doneEditingTitle();
        }
    };

    ret.print = function () {
        window.print();
    };

    // ------------- edit status message for header bar ------------------

    ret.editStatus = '';

    ret.LAST_UPDATED = '';
    ret.READ_ONLY = 'View only';
    ret.SAVING = 'Saving...';
    ret.SAVE_OK = 'All changes saved';
    ret.SAVE_FAILED = 'Changes could not be saved';

    ret.updateEditStatus = function (s) {
        //console.log('updateEditStatus: ' + s);
        ret.editStatus = s;
        if (s == ret.SAVE_FAILED) {
            alert('Changes could not be saved - please check your network connection.');
        } else if (s == ret.LAST_UPDATED) {
            var time = moment(ret.updatedAt).fromNow();
            var by = '';
            if (ret.updatedBy == ret.userId) {
                by = 'by me';
            } else if (ret.updatedByName) {
                by = 'by ' + ret.updatedByName;
            }
            // TODO: show 'by me' only for editable shared maps?

            ret.editStatus = 'Last updated ' + time + ' ' + by;
        }

        // Last edit was XX ago by YY
    };

    // -------------------------------------------------------------

    function init() {
        ret.map.init();

        if (!ret.sandbox) {}

        if (ret.mapUrl) {
            ret.map.load();
        } else {
            ret.map.loadForSandbox();
        }

        ret.addBehaviors();
        ret.handleNavigation();
        ret.handleBackspace();
    }

    // misc. UI behaviors for tooltips, popups etc.
    // TODO: figure out which of these need to be reapplied after dynamic data changes (e.g. LessonBook popovers)
    ret.addBehaviors = function () {};

    ret.handleNavigation = function () {
        // cross-browser tweaks:
        try {
            // http://www.opera.com/support/kb/view/827/
            opera.setOverrideHistoryNavigationMode('compatible');
            history.navigationMode = 'compatible';
        } catch (e) {}

        // install before-unload handler:

        function exitMessage() {
            return 'Navigating away from your Map will cause any unsaved changes to be lost ' + '(any changes you make are automatically saved, but it takes a couple of seconds).';
        }

        //        $(window).bind('beforeunload', exitMessage);

        // prevent exit prompt when the user deliberately navigates away:

        $('#header-right a').click(function () {
            $(window).unbind('beforeunload', exitMessage);
        });
    };

    ret.handleBackspace = function () {
        var BACKSPACE = 8;

        $(document).on('keydown', function (event) {
            if (event.keyCode === BACKSPACE) {
                if (!$('body :focus').is(':input')) {
                    // prevent accidental backspace when no input has focus:
                    event.preventDefault();
                    event.stopPropagation();
                }
            }
        });
    };

    ret.safeApply = function (fn) {
        if (fn && typeof fn === 'function') {
            fn();
        }
    };

    ret.isTouchDevice = function () {
        return false;
    };

    init();

    return ret;
};

// overview diagram
//var overview = go.GraphObject.make(go.Overview, "overview-diagram", {
//    observed: $scope.map.getDiagram(),
//    contentAlignment: go.Spot.Center
//});
//var outline = overview.box.elements.first();
//outline.stroke = "#333";

// NOTE: we have to use regular bootstrap tooltips for toolbar buttons (instead of ng-bootstrap ones)
// so we can turn them off for mobile. We also put the tooltips on wrappers rather than on the actual
// buttons, so we can avoid the issue of stuck tooltips if a button gets disabled while the tooltip is showing.

//if (!ret.isTouchDevice()) {
//    // $('.tooltip-wrapper').tooltip({
//    //     placement: 'top',
//    //     container: 'body'
//    // });

//    // $('.dropdown-menu .btn').tooltip({
//    //     placement: 'left',
//    //     container: 'body'
//    // }); // for layout options

//    $('header, #map-title').hover(
//        function() {
//            $('body.presenter-playing').addClass('hide-header');
//        },
//        function() {
//            $('body.presenter-playing').removeClass('hide-header');
//        }
//    );
//}

// no biggie.

},{}],9:[function(require,module,exports){
'use strict';

window.SandbankEditorOptions = {};

SandbankEditorOptions = function ($scope) {

    this.openModal = function (_options, _onSaveDefaults, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_editor_options_modal.html', // see views/maps/_template_editor_options_modal
            backdrop: 'static',
            controller: optionsModalCtrl,
            windowClass: 'options-modal',
            resolve: {
                options: function options() {
                    return _options;
                },
                onSaveDefaults: function onSaveDefaults() {
                    return _onSaveDefaults;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for options modal ---------------------

    var optionsModalCtrl = function optionsModalCtrl($scope, $modalInstance, options, onSaveDefaults, onUpdate) {

        $scope.options = options;

        $scope.setDefaults = {
            value: false
        };

        $scope.ok = function () {
            onUpdate($scope.options);
            if ($scope.setDefaults.value) {
                onSaveDefaults($scope.options);
            }
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };
};

},{}],10:[function(require,module,exports){
// functions for the generator (aka ThinkQuery)

'use strict';

var GeneratorCtrl = function GeneratorCtrl($scope) {

    var map = $scope.map;
    var diagram = $scope.map.getDiagram();

    $scope.concept1 = '';
    $scope.concept2 = '';

    $scope.echoConcept1 = function () {
        return $scope.concept1 || '...';
    };

    $scope.echoConcept2 = function () {
        return $scope.concept2 || '...';
    };

    $scope.swapConcepts = function () {
        var tmp = $scope.concept1;
        $scope.concept1 = $scope.concept2;
        $scope.concept2 = tmp;
        $scope.safeApply();
    };

    $scope.mapIt = function (question) {
        startSpinner();
        diagram = map.getDiagram();
        map.getAutosave().saveOnModelChanged = false;

        if ($scope.sandbox) {
            diagram.clear();
        }

        // figure out location for inserted stuff
        var db = map.computeMapBounds();
        var x = db.x + db.width + 200;
        var y = db.y;
        if (isNaN(x) || isNaN(y)) {
            x = y = 0;
        }
        //console.log('x, y: ' + x + ', ' + y);

        // insert the stuff and deselect it
        question(x, y);
        diagram.clearSelection();

        diagram.updateAllTargetBindings();
        diagram.layoutDiagram(true);

        map.getUi().resetZoom();

        map.getAutosave().saveOnModelChanged = true;
        map.getAutosave().save('edit_generator');
        stopSpinner();
    };

    $scope.selectedQuestion = null;

    $scope.selectQuestion = function (question) {
        $scope.selectedQuestion = question;
        if ($scope.sandbox) {
            $scope.mapIt(question);
        }
    };

    $scope.surpriseMe = function () {
        var keys = _.keys($scope.queries);
        var i = _.random(0, keys.length - 1);
        var question = $scope.queries[keys[i]];
        $scope.selectedQuestion = question;
        $scope.mapIt(question);

        $('#questions').animate({ scrollTop: i * 30 }, 1000);
    };

    // ---------- functions for creating each of the structures - see views/maps/generator_tab -----------

    $scope.queries = {

        WHAT_IS: function WHAT_IS(x, y) {
            // 1
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
        },

        WHAT_IS_NOT: function WHAT_IS_NOT(x, y) {
            // 2
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is not?');
            map.createChild(thing1, 'is not?');
            map.createChild(thing1, 'is not?');
        },

        DISTINGUISH_BETWEEN: function DISTINGUISH_BETWEEN(x, y) {
            // 3
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');

            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            diagram.model.setDataProperty(thing2.data, 'dflag', true);
            map.createChild(thing2, 'is?');
            map.createChild(thing2, 'is?');
            map.createChild(thing2, 'is?');
        },

        COMPARE_CONTRAST: function COMPARE_CONTRAST(x, y) {
            // 4
            var thing1 = map.createThing(x - 150, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 150, y, $scope.echoConcept2());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            diagram.model.setDataProperty(thing2.data, 'dflag', true);
            var rthing1 = map.createRLinkWithRThing(thing1, thing2, 'contrast');
            var rthing2 = map.createRLinkWithRThing(thing1, thing2, 'compare');
            diagram.model.setDataProperty(rthing1.labeledLink.data, 'type', 'toFrom');
            diagram.model.setDataProperty(rthing2.labeledLink.data, 'type', 'toFrom');
        },

        PARTS_OF: function PARTS_OF(x, y) {
            // 5
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            map.createChild(thing1, 'part?');
            map.createChild(thing1, 'part?');
            map.createChild(thing1, 'part?');
        },

        PART_OF: function PART_OF(x, y) {
            // 6
            var thing1 = map.createThing(x, y, 'part of?');
            map.createChild(thing1, $scope.echoConcept1());
        },

        PARTS_HAVE_PARTS: function PARTS_HAVE_PARTS(x, y) {
            // 7
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part?');
            map.createChild(child1, 'part?');
            map.createChild(child1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            map.createChild(child2, 'part?');
            map.createChild(child2, 'part?');
        },

        R_PARTS: function R_PARTS(x, y) {
            // 8
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            var rthing = map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createChild(rthing, 'part?');
            map.createChild(rthing, 'part?');
        },

        P_PARTS: function P_PARTS(x, y) {
            // 9
            var thing1 = map.createThing(x + 300, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var child2 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var child3 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var thing2 = map.createThing(x, y, $scope.echoConcept2());
            map.createPLink(thing2, thing1);
            map.createPLink(thing2, child1);
            map.createPLink(thing2, child2);
            map.createPLink(thing2, child3);
        },

        RS_TO_AND_BY: function RS_TO_AND_BY(x, y) {
            // 10
            var related1 = map.createThing(x, y, 'related idea?');
            var related2 = map.createThing(x + 300, y + 50, 'related idea?');
            var related3 = map.createThing(x + 50, y + 300, 'related idea?');
            var thing = map.createThing(x + 130, y + 130, $scope.echoConcept1());
            map.createRLink(related1, thing);
            map.createRLink(related2, thing);
            map.createRLink(related3, thing);

            var thing1 = map.createThing(x + 500, y + 150, 'idea?');
            var thing2 = map.createThing(x + 750, y + 150, 'idea?');
            map.createRLinkWithRThing(thing1, thing2, $scope.echoConcept1());
        },

        WHAT_IS_R: function WHAT_IS_R(x, y) {
            // 11
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            map.createRLinkWithRThing(thing1, thing2, 'idea?');
        },

        PART_RS_ARE: function PART_RS_ARE(x, y) {
            // 12
            var thing1 = map.createThing(x + 30, y, $scope.echoConcept1(), 'freehand');
            var child1 = map.createChild(thing1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            var child3 = map.createChild(thing1, 'part?');
            diagram.model.setDataProperty(child1.data, 'loc', '-20 110');
            diagram.model.setDataProperty(child2.data, 'loc', '80 110');
            diagram.model.setDataProperty(child3.data, 'loc', '30 190');
            map.createRLinkWithRThing(child1, child2, 'relationship?');
            map.createRLinkWithRThing(child2, child3, 'relationship?');
            map.createRLinkWithRThing(child3, child1, 'relationship?');
        },

        PART_RS_EXIST: function PART_RS_EXIST(x, y) {
            // 13
            var thing1 = map.createThing(x, y, $scope.echoConcept1(), 'right');
            var child11 = map.createChild(thing1, 'part?');
            var child12 = map.createChild(thing1, 'part?');
            var child13 = map.createChild(thing1, 'part?');
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            var child21 = map.createChild(thing2, 'part?');
            var child22 = map.createChild(thing2, 'part?');
            var child23 = map.createChild(thing2, 'part?');
            map.createRLink(thing1, thing2);
            map.createRLinkWithRThing(child11, child21, 'relationship?');
            map.createRLinkWithRThing(child12, child22, 'relationship?');
            map.createRLinkWithRThing(child13, child23, 'relationship?');
        },

        RS_WITH_OTHERS: function RS_WITH_OTHERS(x, y) {
            // 14
            var thing1 = map.createThing(x - 200, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 200, y, $scope.echoConcept2());
            var thing3 = map.createThing(x - 200, y + 200, 'another thing');
            var thing4 = map.createThing(x + 200, y + 200, 'another thing');
            map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createRLinkWithRThing(thing1, thing3, 'relationship?');
            map.createRLinkWithRThing(thing1, thing4, 'relationship?');
            map.createRLinkWithRThing(thing2, thing4, 'relationship?');
            map.createRLinkWithRThing(thing3, thing4, 'relationship?');
        },

        PARTS_OF_P: function PARTS_OF_P(x, y) {
            // 15
            var thing1 = map.createThing(x - 100, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            var child3 = map.createChild(thing1, 'part?');
            var thing2 = map.createThing(x + 100, y, $scope.echoConcept2());
            map.createPLink(thing1, thing2);
        },

        POINT_FOR: function POINT_FOR(x, y) {
            // 16
            var thing = map.createThing(x, y, 'new perspective');
            var thing1 = map.createThing(x - 150, y + 150, $scope.echoConcept1());
            var thing2 = map.createThing(x + 150, y + 150, $scope.echoConcept2());
            var rthing = map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createPLink(thing, rthing);
        },

        HAS_MULTIPLE_PS: function HAS_MULTIPLE_PS(x, y) {
            // 17
            var point1 = map.createThing(x, y + 50, 'viewpoint?');
            var point2 = map.createThing(x + 250, y, 'viewpoint?');
            var point3 = map.createThing(x + 500, y + 50, 'viewpoint?');
            var view = map.createThing(x + 250, y + 250, $scope.echoConcept1());
            map.createPLink(point1, view);
            map.createPLink(point2, view);
            map.createPLink(point3, view);
        },

        PARTS_FROM_MULTIPLE_PS: function PARTS_FROM_MULTIPLE_PS(x, y) {
            // 18
            var point1 = map.createThing(x - 100, y, 'viewpoint?');
            var point2 = map.createThing(x - 100, y + 125, 'viewpoint?');
            var point3 = map.createThing(x - 100, y + 250, 'viewpoint?');
            var thing = map.createThing(x + 150, y + 25, $scope.echoConcept1());
            var child1 = map.createChild(thing, 'part seen from viewpoint?');
            var child2 = map.createChild(thing, 'part seen from viewpoint?');
            var child3 = map.createChild(thing, 'part seen from viewpoint?');
            map.createPLink(point1, child1);
            map.createPLink(point1, child2);
            map.createPLink(point2, child2);
            map.createPLink(point3, child3);
        },

        WHAT_ABOUT: function WHAT_ABOUT(x, y) {
            // 19
            $scope.queries.WHAT_IS(x, y);
            $scope.queries.PARTS_OF(x + 300, y);
            $scope.queries.PARTS_FROM_MULTIPLE_PS(x + 700, y);
            $scope.queries.RS_TO_AND_BY(x, y + 400);
        }
    }; // queries
};

SandbankEditor.Generator = function ($scope, map) {

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (oldValue == map.getUi().TAB_ID_GENERATOR) {
            // closing tab
            map.setEditingBlocked(false);
        } else if (newValue == map.getUi().TAB_ID_GENERATOR) {
            // opening tab
            map.setEditingBlocked(true);
        }
    };

    // these get filtered out in LessonBook
    this.getPlaceholderIdeaNames = function () {
        return ['is?', 'is not?', 'part?', 'viewpoint?', 'related idea?', 'idea?', 'part seen from viewpoint?', 'contrast?', 'comparison?', 'relationship?'];
    };
};

// NB: generator is opened on load of empty map; see map.js:load()

},{}],11:[function(require,module,exports){
// layouts used in the editor, for the diagram or individual Groups, plus layout-related functions

'use strict';

SandbankEditor.Layouts = function (editor, map) {

    var self = this;

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        var diagram = map.getDiagram();
        if (eventName == 'InitialLayoutCompleted') {
            diagram.updateAllTargetBindings();
            diagram.layoutDiagram(true);
        } else if (eventName == 'SelectionMoved') {
            updateSelectedPartLocationData(e);
            map.getDiagram().layoutDiagram(true);
        } else if (eventName == 'SelectionDeleted') {
            diagram.updateAllTargetBindings();
        } else if (eventName == 'PartCreated') {} else if (eventName == 'PartResized') {
            setResizedPartDimensionData(e);
        } else if (eventName == 'LinkDrawn') {
            adjustLinkLayout(e.subject);
        } else if (eventName == 'LinkRelinked') {
            adjustLinkLayout(e.subject);
        }
    };

    // ------------ handle location/size attributes for nodes ---------------

    // only update w/h for slides, as all other node types have fixed dimensions according to the templates
    function setResizedPartDimensionData(e) {
        var diagram = map.getDiagram();
        var node = e.subject;
        if (node && node.category == 'slide') {
            //console.log('PartResized: ' + node.part.actualBounds);
            diagram.model.setDataProperty(node.data, 'width', node.part.actualBounds.width);
            diagram.model.setDataProperty(node.data, 'height', node.part.actualBounds.height);
        }
    }

    // set the 'loc' attribute for a new top-level node (created by double-clicking), to support freehand layout
    this.setNewPartLocationData = function (e) {
        var node = e.subject;
        if (node && node.part) {
            if (node instanceof go.Group) {
                map.getDiagram().model.setDataProperty(node.data, 'loc', node.part.location.x + ' ' + node.part.location.y);
            }
        }
    };

    // updates the 'loc' attribute for each selected part, to support freehand layout (does not apply to slides)
    function updateSelectedPartLocationData(e) {
        var diagram = map.getDiagram();
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Group) {
                // thing
                var part = it.value;
                var parentX = 0;
                var parentY = 0;
                if (part.containingGroup) {
                    parentX = part.containingGroup.location.x;
                    parentY = part.containingGroup.location.y;
                }
                console.log('moving group, subject: ' + e.subject + ', part: ' + part + ', height: ' + part.part.desiredSize.height + ', location: ' + part.part.location);
                if (!isNaN(part.location.x)) {
                    diagram.model.setDataProperty(part.data, 'loc', part.location.x - parentX + ' ' + (part.location.y - parentY));
                }
            }
        }
    }

    // ----------- changing layouts of things and their descendants ----------------

    this.fromAndToNodesAreVisible = function (link) {
        return link.fromNode && link.toNode && !self.hasCollapsedAncestor(link.fromNode) && !self.hasCollapsedAncestor(link.toNode);
    };

    this.labelNodeIsVisible = function (link) {
        return link.labelNodes.count && link.labelNodes.first().visible;
    };

    this.hasCollapsedAncestor = function (group) {
        while (true) {
            if (!group.containingGroup) {
                return false;
            } else if (!group.containingGroup.isSubGraphExpanded) {
                return true;
            } else {
                group = group.containingGroup;
            }
        }
    };

    // this.hasLinkLabelAncestor = function(group) {
    //     while (true) {
    //         if (!group.containingGroup) {
    //             return false;
    //         }
    //         else if (group.containingGroup.isLinkLabel) {
    //             return true;
    //         }
    //         else {
    //             group = group.containingGroup;
    //         }
    //     }
    // };

    this.getHighestAncestorWithLayout = function (group, layoutNames) {
        while (true) {
            if (!group.containingGroup) {
                return false;
            } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                return group.containingGroup;
            } else {
                group = group.containingGroup;
            }
        }
    };

    this.areSistersInInventoryLayout = function (group1, group2) {
        return group1.containingGroup == group2.containingGroup && group1.containingGroup && _.contains(['left', 'right'], group1.containingGroup.data.layout);
    };

    this.isNotWithinInventoryLayout = function (group) {
        return !self.isWithinInventoryLayout(group);
    };

    this.isRThingWithinInventoryLayout = function (group) {
        return group.isLinkLabel && self.isWithinInventoryLayout(group);
    };

    this.isWithinInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['left', 'right']);
    };

    this.isWithinLeftInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['left']);
    };

    this.isWithinRightInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['right']);
    };

    this.isWithinFreehandLayout = function (group) {
        return self.isWithinLayout(group, ['freehand']);
    };

    this.isWithinStackedLayout = function (group) {
        return self.isWithinLayout(group, ['stacked']);
    };

    this.isWithinLayout = function (group, layoutNames) {
        while (true) {
            if (!group.containingGroup) {
                //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': false');
                return false;
            } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': true');
                return true;
            } else {
                group = group.containingGroup;
            }
        }
    };

    this.showLeftTextBlock = function (group) {
        return self.isWithinRightInventoryLayout(group) && !self.isWithinStackedLayout(group) && !group.isLinkLabel;
    };

    this.showRightTextBlock = function (group) {
        return self.isWithinLeftInventoryLayout(group) && !self.isWithinStackedLayout(group) && !group.isLinkLabel;
    };

    this.setDescendantLayouts = function (group, layoutName) {
        if (layoutName == 'left' || layoutName == 'right' || layoutName == 'stacked') {
            var it = group.memberParts.iterator;
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group && !part.isLinkLabel) {
                    part.data.layout = layoutName;
                    self.setDescendantLayouts(part, layoutName);
                }
            }
        } else if (layoutName == 'freehand') {}
    };

    this.disableLayoutForSelectedThings = function (layoutName) {
        var it = map.getDiagram().selection.iterator;
        if (!it.count) {
            return true;
        }
        while (it.next()) {
            if (!(it.value instanceof go.Group)) {
                return true;
            } else {
                var group = it.value;
                if (self.isWithinLayout(group, ['left', 'right', 'stacked'])) {
                    return true;
                }
            }
        }
        return false;
    };

    // -------------- scaling functions, etc. ----------------------

    // Computes the level of this group
    this.computeLevel = function (group) {
        //console.log('computeLevel, part: ' + part + ', containingGroup: ' + part.containingGroup);
        if (!(group instanceof go.Group) || group.containingGroup === null) {
            return 0;
        } else {
            return self.computeLevel(group.containingGroup) + 1;
        }
    };

    // gets the basic scaling for thing squares, by level
    function getThingScale(level) {
        return Math.pow(0.45, level); // 1, .45, .2025, .091125, ...
    }

    // this is only used for groups
    this.getScale = function (group, visitedGroupKeys) {
        if (group) {
            // keep track of groups we've visited to avoid infinite recursion
            // TODO: track down exactly how infinite loops are occurring,
            // or IF they still are since map.checkModel was introduced...
            if (visitedGroupKeys && Array.isArray(visitedGroupKeys)) {
                //console.log('visitedGroupKeys: ' + visitedGroupKeys);
                if (_.contains(visitedGroupKeys, group.data.key)) {
                    //console.log('hit already visited key: ' + group.data.key);
                    return 1;
                } else {
                    visitedGroupKeys.push(group.data.key);
                }
            } else {
                visitedGroupKeys = [group.data.key];
            }

            if (group.labeledLink) {
                // R-thing
                var fromScale = self.getScale(group.labeledLink.fromNode, visitedGroupKeys);
                var toScale = self.getScale(group.labeledLink.toNode, visitedGroupKeys);
                //console.log('getScale, fromScale: ' + fromScale + ', toScale: ' + toScale + ', visitedGroupKeys: ' + visitedGroupKeys.join(','));
                return Math.min(fromScale, toScale) * 0.5;
            } else if (group.containingGroup) {
                return self.getScale(group.containingGroup, visitedGroupKeys) * 0.45;
            } else {
                return getThingScale(self.computeLevel(group));
            }
        }
        return 1; // can occur when dragging R to empty space
    };

    // gets the margin to be used in stack layout between this group's children
    function getStackMargin(group) {
        return 10 / 0.45 * self.getScale(group);
    }

    // gets the margin to be used in stack layout between this group's children
    function getInventoryMargin(group) {
        if (self.computeLevel(group) <= 2) {
            return 10 * self.getScale(group);
        } else {
            return 3 * self.getScale(group);
        }
    }

    this.getExternalTextScale = function (group) {
        return 1 - 0.1 * self.computeLevel(group);
    };

    this.getLinkStrokeWidth = function (link) {
        var fromScale = self.getScale(link.fromNode);
        var toScale = self.getScale(link.toNode);
        return (link.isSelected ? 4 : 2) * Math.min(fromScale, toScale); // 2, .9, ...
    };

    // scale arrowheads based on the smallest to/from node,
    // or just the To node for P links
    this.getArrowheadScale = function (link) {
        var fromScale = self.getScale(link.fromNode);
        var toScale = self.getScale(link.toNode);
        var minScale = Math.min(fromScale, toScale);
        //console.log("getArrowheadScale, fromScale: ", fromScale, ', toScale: ', toScale, ', minScale: ', minScale);
        if (link.data.category == 'P') {
            minScale = toScale;
        }
        if (minScale >= 1) {
            return 1 * minScale;
        } else {
            return 1.5 * minScale;
        }
    };

    // -------------- creating new things ----------------------

    // Returns a location for a new sister group (thing) to the given one,
    // which will not hide any existing things (overlap is allowed).
    // The returned coordinates are absolute for a top-level group,
    // or relative to the parent otherwise - suitable for use with FreehandDiagramLayout
    // or FreehandLayout, resp.
    this.getNewSisterLocation = function (group, withR) {
        var diagram = map.getDiagram();
        // if we are within another group, things are in absolute coordinates
        // and sisters are placed above the thing; otherwise relative and below...
        var inGroup = group.containingGroup !== null;
        // ... except if withR is true, we go to the right instead of above or below.

        // start below if in group, else above; or to the right if withR
        var x, y, w, h;
        if (withR) {
            x = group.location.x + group.actualBounds.width * 2.2;
            y = group.location.y;
        } else {
            x = group.location.x;
            y = group.location.y + group.actualBounds.height * 1.1 * (inGroup ? 1 : -1);
        }
        w = group.actualBounds.width;
        h = group.actualBounds.height;

        // check for overlapping parts; if found, increment x,y and continue

        while (true) {
            var rect = new go.Rect(x, y, w, h);
            rect.grow(h / 10, w / 10, h / 10, w / 10);
            var parts = diagram.findObjectsIn(rect, null, self.isGroup);
            if (parts.count) {
                console.log('getNewSisterLocation: overlapping part found in ' + rect);
                if (withR) {
                    x += w / 10;
                    y += h / 10;
                } else {
                    x += w / 10;
                    y += h / 10 * (inGroup ? 1 : -1); // move down if in group, else up
                }
            } else {
                console.log('getNewSisterLocation: no overlapping part found in ' + rect);
                break;
            }
        }
        if (inGroup) {
            // make coordinates relative
            x -= group.containingGroup.location.x;
            y -= group.containingGroup.location.y;
        }
        return new go.Point(x + Math.random(), y + Math.random());
    };

    // Returns a location for a new child group (thing) to the given one,
    // which will not hide any existing children (overlap is allowed).
    // The returned coordinates are relative to the parent group - suitable for use with FreehandLayout.
    this.getNewChildLocation = function (group) {
        var groupBounds = group.actualBounds;
        // NB: all x/y locations are relative to the group location
        var x = 0;
        var y = groupBounds.height * 1.1;
        var w, h;
        var members = group.memberParts;
        // keep testing new rectangles until we find one that doesn't overlap with any existing member of the group
        while (true) {
            members.reset();
            var overlaps = false;
            var member, newRect, memberRect;
            while (members.next()) {
                member = members.value;
                var memberBounds = member.actualBounds;
                w = memberBounds.width;
                h = memberBounds.height;
                // find the existing member's actual bounds (absolute coords)
                memberRect = new go.Rect(memberBounds.x - groupBounds.x, memberBounds.y - groupBounds.y, memberBounds.width, memberBounds.height);
                newRect = new go.Rect(x, y, w, h);
                newRect.grow(h / 5, w / 5, h / 5, w / 5);
                overlaps = newRect.containsRect(memberRect);
                console.log('getNewChildLocation for ' + member + ': newRect = ' + newRect + ', memberRect = ' + memberRect + ', overlaps: ' + overlaps);
                if (overlaps) {
                    break;
                }
            }
            if (overlaps) {
                // increment x, y and try again
                x += w / 5;
                y += h / 5;
            } else {
                // found a good spot!
                break;
            }
        }
        return new go.Point(x, y);
    };

    // a simpler version of getNewChildLocation that places the child outside the bounds of the existing children
    this.getNewChildLocation2 = function (group) {
        var groupBounds = group.actualBounds;
        var childBounds = map.safeRect(map.getDiagram().computePartsBounds(group.memberParts));
        var x = 0;
        var y = 0;
        if (!group.memberParts.count) {
            y = groupBounds.height * 1.2;
        } else {
            y = groupBounds.height * 1.4 + childBounds.height;
        }
        //console.log('getNewChildLocation2, childBounds: ' + childBounds + ', groupBounds: ' + groupBounds + ', x: ' + x + ', y: ' + y);
        return new go.Point(x, y);
    };

    // move all the given new member groups so that their locations are relative to that of
    // the parent and its previously existing members, and scaled down appropriately
    this.layoutNewMembersRelativeTo = function (newMembers, parent, oldMemberBounds) {
        // how big was the parent system before the new groups were added?
        var systemBounds = parent.actualBounds.unionRect(oldMemberBounds);

        // figure out old/new origins - place new origin below existing system
        var oldBounds = map.getDiagram().computePartsBounds(newMembers);
        var oldOrigin = new go.Point(oldBounds.x, oldBounds.y);
        var newOrigin = new go.Point(0, systemBounds.height * 1.2);
        console.log('layoutNewMembersRelativeTo, systemBounds: ' + systemBounds + ', oldBounds: ' + oldBounds + ', oldOrigin: ' + oldOrigin + ', newOrigin: ' + newOrigin);

        // figure out new scaled locations
        // NB: we can assume newMembers are all one level down from parent (see map.addSelectedThingsAsChildrenOf),
        // so we just multiply by the standard scale factor
        var it = newMembers.iterator;
        while (it.next()) {
            var group = it.value;
            var groupBounds = group.actualBounds;
            var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) * 0.45;
            var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) * 0.45;
            var newLoc = go.Point.stringify(new go.Point(newX, newY));
            console.log('layoutNewMembersRelativeTo, groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
            map.getDiagram().model.setDataProperty(group.data, 'loc', newLoc);
        }
    };

    // move all the given old member groups so that their locations are absolute and above
    // the parent, and scaled up appropriately
    this.layoutOldMembersOutsideOf = function (oldMembers, parent, oldMembersBounds, oldMembersLevel) {
        // figure out scale factor (members can be dragged up multiple levels, unlike dragging into S)
        var scaleFactor = Math.pow(0.45, oldMembersLevel - self.computeLevel(parent));
        console.log('layoutOldMembersOutsideOf, scaleFactor: ' + scaleFactor);

        // figure out old/new origins - place new origin above parent, with vertical space for scaled-up oldMembers
        var parentBounds = parent.actualBounds;
        var oldOrigin = new go.Point(oldMembersBounds.x, oldMembersBounds.y);
        var newOrigin = new go.Point(parentBounds.x, parentBounds.y - oldMembersBounds.height * 1.2 / scaleFactor);

        // figure out new scaled locations
        var it = oldMembers.iterator;
        while (it.next()) {
            var group = it.value;
            var groupBounds = group.actualBounds;
            var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) / scaleFactor;
            var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) / scaleFactor;
            var newLoc = go.Point.stringify(new go.Point(newX, newY));
            console.log('layoutOldMembersOutsideOf, parentBounds: ' + parentBounds + ', oldMembersBounds: ' + oldMembersBounds + ', newOrigin: ' + newOrigin + ', groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
            map.getDiagram().model.setDataProperty(group.data, 'loc', go.Point.stringify(newLoc));
        }
    };

    // ----------------- accessors -------------------

    // returns the appropriate layout class by abbreviated name
    this.getLayout = function (layoutName) {
        if (layoutName == 'freehand') return new FreehandLayout();else if (layoutName == 'right') return new RightInventoryLayout();else if (layoutName == 'stacked') return new StackedLayout();else return new LeftInventoryLayout();
    };

    this.getFreehandDiagramLayout = function () {
        return new FreehandDiagramLayout();
    };

    // --------------------------------------------------------------

    // returns true if the to and from nodes for the link have a common ancestor group with one of the given layout names.
    // TODO: verify logic - what if there are multiple such ancestors? - this should return the highest one...
    function getCommonAncestorWithLayout(group1, group2, layoutNames) {
        var ancestors1 = self.getAncestorGroups(group1);
        var ancestors2 = self.getAncestorGroups(group2);
        var commonAncestors = _.intersection(ancestors1, ancestors2);
        var layoutAncestors = _.filter(commonAncestors, function (group) {
            return _.indexOf(layoutNames, group.data.layout) != -1;
        });
        if (layoutAncestors.length) {
            return layoutAncestors[0];
        } else {
            return null;
        }
    }

    // returns the ancestors of this group, including itself
    this.getAncestorGroups = function (group) {
        var ancestors = [group];
        var g = group;
        while (g.containingGroup) {
            ancestors.push(g.containingGroup);
            g = g.containingGroup;
        }
        return ancestors;
    };

    // --------------------------------------------------------------

    function FreehandDiagramLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(FreehandDiagramLayout, go.Layout);

    FreehandDiagramLayout.prototype.toString = function () {
        return 'FreehandDiagramLayout';
    };

    FreehandDiagramLayout.prototype.doLayout = function (coll) {
        //console.log('FreehandDiagramLayout.doLayout');
        var diagram = map.getDiagram();
        // diagram.startTransaction("Freehand Diagram Layout");

        //validateGroupLocations(diagram.findTopLevelGroups());
        var groups = diagram.findTopLevelGroups(); // get new iterator
        while (groups.next()) {
            var group = groups.value;
            if (!group.isLinkLabel) {
                var loc = go.Point.parse(group.data.loc);
                group.move(new go.Point(loc.x, loc.y));
                //console.log('FreehandDiagramLayout, group: ' + group + ' to location: ' + loc.x + ',' + loc.y);
            }
        }

        // all adjustment of links is done from here, not from the other layouts...
        getLinksByNodes(true);
        var links = diagram.links.iterator;
        while (links.next()) {
            var link = links.value;
            // if (isNaN(link.location.x)) {
            //     console.log('link location isNaN');
            //     link.move(new go.Point(0,0));
            // }
            // console.log('link location: ' + link.location);
            adjustLinkLayout(link);
        }

        // diagram.commitTransaction("Freehand Diagram Layout");
    };

    // if any group in the given Iterator does not have a location (data.loc), set one
    // that doesn't overlap with the other members
    function validateGroupLocations(groups) {}

    // --------------------------------------------------------------

    function FreehandLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(FreehandLayout, go.Layout);

    FreehandLayout.prototype.toString = function () {
        return 'FreehandLayout';
    };

    FreehandLayout.prototype.doLayout = function (coll) {
        var diagram = map.getDiagram();
        diagram.startTransaction('Freehand Layout');

        var x = this.group.location.x;
        var y = this.group.location.y;

        var it = this.group.memberParts.iterator;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group && !part.isLinkLabel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('FreehandLayout, part: ' + part.data.text + ', loc: ' + loc + ', location: ' + part.location);
                part.move(new go.Point(x + loc.x, y + loc.y));
                part.layout.doLayout(part);
            }
        }

        diagram.commitTransaction('Freehand Layout');
    };

    // --------------------------------------------------------------

    function StackedLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(StackedLayout, go.Layout);

    StackedLayout.prototype.toString = function () {
        return 'StackedLayout';
    };

    StackedLayout.prototype.doLayout = function (coll) {
        this.diagram.startTransaction('Stacked Layout');
        var margin = getStackMargin(this.group);
        var startX = this.group.location.x;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + margin / 2);
        layoutMembersForStacked(this.group, startX, startY);
        this.diagram.commitTransaction('Stacked Layout');
    };

    // returns the max y value after laying out the last part
    function layoutMembersForStacked(group, startX, startY) {
        var members = getOrderedMembers(group);
        var x = startX;
        var y = startY;
        var rowCount = 0;
        var maxStartY = startY;
        _.each(members, function (part) {
            if (part instanceof go.Group && !part.isLinkLabel) {
                var margin = getStackMargin(part);
                part.move(new go.Point(x, y));
                startY = y + part.actualBounds.height + margin / 2; // start Y position for part's children

                //console.log('layoutMembersForStacked: starting layout of children of ' + part + ' at ' + Math.round(x) + ',' + Math.round(startY));

                if (part.isSubGraphExpanded) {
                    // layout children of this part; check if we've already done a taller part+children in current row
                    maxStartY = Math.max(maxStartY, layoutMembersForStacked(part, x, startY));
                    //console.log('layoutMembersForStacked: laid out children of ' + part + ', maxStartY is now ' + Math.round(maxStartY));
                } else {
                    maxStartY = Math.max(maxStartY, startY);
                }

                // decide whether to wrap
                rowCount++;
                if (rowCount < 2) {
                    // keep going on this line
                    x += part.actualBounds.width + margin;
                } else {
                    // wrap to next line
                    x = startX;
                    y = maxStartY + margin / 2;
                    rowCount = 0;
                }
            }
        });
        return maxStartY;
    }

    // --------------------------------------------------------------

    function RightInventoryLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(RightInventoryLayout, go.Layout);

    RightInventoryLayout.prototype.toString = function () {
        return 'RightInventoryLayout';
    };

    RightInventoryLayout.prototype.doLayout = function (coll) {
        //this.diagram.startTransaction("Inventory Layout");
        var startX = this.group.location.x + this.group.actualBounds.width;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + getInventoryMargin(this.group));
        layoutMembersForInventory(this.group, startX, startY, 'R');
        //this.diagram.commitTransaction("Inventory Layout");
    };

    // --------------------------------------------------------------

    function LeftInventoryLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(LeftInventoryLayout, go.Layout);

    LeftInventoryLayout.prototype.toString = function () {
        return 'LeftInventoryLayout';
    };

    LeftInventoryLayout.prototype.doLayout = function (coll) {
        //console.log('LeftInventoryLayout.doLayout, group: ' + this.group + ', location: ' + this.group.location);
        // this.diagram.startTransaction("Inventory Layout");
        var startX = this.group.location.x;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + getInventoryMargin(this.group));
        layoutMembersForInventory(this.group, startX, startY, 'L');
        // this.diagram.commitTransaction("Inventory Layout");
    };

    // shared stuff for Left/Right Inventory layouts...

    // returns the max y value after laying out the last part
    // side is 'L' or 'R'
    function layoutMembersForInventory(group, startX, startY, side) {
        var members = getOrderedMembers(group);
        _.each(members, function (part) {
            var x = startX; // for left, just use x
            if (side == 'R') x = startX - part.actualBounds.width; // for right, right-align parts to startX
            //console.log('layoutMembersForInventory, part: ' + part + ' to location: ' + x + ',' + startY);
            part.move(new go.Point(x, startY));
            startY += part.actualBounds.height + getInventoryMargin(part);
            if (part.isSubGraphExpanded) {
                //console.log('layoutMembersForInventory, y after moving: ' + part + ' = ' + startY);
                startY = layoutMembersForInventory(part, startX, startY, side);
            }
        });
        return startY + getInventoryMargin(group);
    }

    // returns an array of the group's (non-R-thing) members, sorted by the 'order' data property
    function getOrderedMembers(group) {
        var members = new go.List();
        var it = group.memberParts.iterator;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group && !part.isLinkLabel) {
                members.add(part);
            }
        }
        return _.sortBy(members.toArray(), function (member) {
            return member.data.order;
        });
    }

    // ------------------------ link routing and visibility ------------------------------

    // adjust the routing, visibility and other properties of a link according to various structural criteria
    function adjustLinkLayout(link) {
        if (!link || !link.fromNode || !link.toNode) {
            return;
        }

        // var loc = link.location;
        // if (isNaN(loc.x) || isNaN(loc.y)) {
        //     link.location = new go.Point(10, 10);
        //     console.log('adjustLinkLayout, link.location: ' + link.location);
        // }
        // console.log('adjustLinkLayout, link.location: ' + link.location);

        // see if link is within a stacked or inventory layout, or if it's a hidden P link
        var inventoryAncestor = getCommonAncestorWithLayout(link.fromNode, link.toNode, ['left', 'right']);
        var stackedAncestor = getCommonAncestorWithLayout(link.fromNode, link.toNode, ['stacked']);
        var hidePLink = link.data && link.data.category == 'P' && !map.getTemplates().showPLink(link);
        var crowdedRThing = hasCrowdedRThing(link);

        // see if this is one of multiple links between the same two nodes
        var snpos = self.getSameNodesLinkPosition(link);
        var isMultiLink = snpos.count > 1;
        //console.log('snpos for link ' + link + ': ' + snpos.index + ' of ' + snpos.count);

        if (inventoryAncestor) {
            applyInventoryCurveRouting(link, snpos, inventoryAncestor.data.layout);
        } else if (isMultiLink) {
            applyMultilinkCurveRouting(link, snpos);
        } else if (crowdedRThing) {
            applyInventoryCurveRouting(link, snpos, 'left');
        } else {
            applyStraightRouting(link);
        }

        // show link only if both connected things are visible (no collapsed ancestors);
        // hide if both are in stacked layout or if it's a P-link that we shouldn't be showing now
        if (self.fromAndToNodesAreVisible(link) && !stackedAncestor && !hidePLink) {
            link.opacity = 1;
            showLabelNodes(link, true);
        } else {
            link.opacity = 0;
            showLabelNodes(link, false);
        }
    }

    // TODO: detect when the R-thing overlaps both from and to nodes, so we can change the link routing
    function hasCrowdedRThing(link) {
        return false;
    }

    function showLabelNodes(link, show) {
        //console.log('showLabelNodes, link: ' + link + ', show: ' + show);
        var it = link.labelNodes;
        if (it) {
            while (it.next()) {
                var group = it.value;
                group.visible = show;
                if (show) {
                    group.layout.doLayout(group);
                }
            }
        }
    }

    // if link is between two things in the same inventory layout (single or multiple),
    // make the line more or less circular on the appropriate side
    function applyInventoryCurveRouting(link, snpos, ancestorLayout) {
        if (ancestorLayout == 'left') {
            link.fromSpot = go.Spot.Left;
            link.toSpot = go.Spot.Left;
        } else if (ancestorLayout == 'right') {
            link.fromSpot = go.Spot.Right;
            link.toSpot = go.Spot.Right;
        }

        // aspect ratio for the link curves - make this smaller to make them taller, larger to make them fatter
        var curveRatio = 0.6;

        var y1 = link.fromNode.actualBounds.y;
        var y2 = link.toNode.actualBounds.y;

        var yDiff = Math.abs(y2 - y1);
        var c = (yDiff === 0 ? 50 : Math.floor(yDiff * curveRatio)) + 100 * (snpos.index / snpos.count);
        //console.log("yDiff = " + yDiff + ', c = ' + c + ' (' + link.fromNode.data.text + ' - ' + p1 + ' - to ' + link.toNode.data.text + ' - ' + p2 + ')');

        link.curve = go.Link.Bezier;
        link.fromEndSegmentLength = c;
        link.toEndSegmentLength = c;
    }

    // if non-inventory link is one of multiple ones between same nodes, make it curved
    function applyMultilinkCurveRouting(link, snpos) {
        link.fromSpot = go.Spot.Default;
        link.toSpot = go.Spot.Default;
        link.curve = go.Link.Bezier;
        // curviness values based on number of links:
        // 2: -25 25
        // 3: -50 0 50
        // 4: -100 -50 0 50 100
        var rangeSize = 10 * (snpos.count - 1);
        var rangeIncrement = 10;
        if (snpos.hasRThing) {
            rangeSize = 100 * (snpos.count - 1);
            rangeIncrement = 100;
        }

        // adjust curviness for smaller scales
        var linkScaleFactor = self.getLinkStrokeWidth(link) / 2; // 2 is max stroke width
        rangeSize *= linkScaleFactor;
        rangeIncrement *= linkScaleFactor;

        var rangeStart = 0 - rangeSize / 2;

        link.curviness = (rangeStart + rangeIncrement * snpos.index) * snpos.orientation;
        // console.log('applyMultilinkCurveRouting, link: ' + link + ', curviness: ' + link.curviness);
    }

    // do normal straight lines for freehand layout, or links between descendants of things with different layouts
    function applyStraightRouting(link) {
        link.fromSpot = go.Spot.Default;
        link.toSpot = go.Spot.Default;
        link.routing = go.Link.Normal;
        link.curve = go.Link.None;
        link.curviness = 0;
    }

    // --------------- calculate how many links there are between a link's nodes ---------------

    // Returns an object of the format { index: 1, count: 2, orientation: -1, hasRThing: false },
    // indicating how many other links there are between the same pair of nodes,
    // where the given link falls within this list, and what its orientation is.
    this.getSameNodesLinkPosition = function (link) {
        var linksByNodes = getLinksByNodes(true);
        // get links with the same key as this one (connecting same nodes)
        var sameLinks = _.where(linksByNodes, {
            key: getSameNodesLinkKey(link)
        });

        // default return value
        var snpos = {
            index: 0,
            count: 1,
            orientation: 1,
            hasRThing: false
        };
        // set index, count, orientation
        for (var i = 0; i < sameLinks.length; i++) {
            if (sameLinks[i].link == link) {
                snpos = {
                    index: i,
                    count: sameLinks.length,
                    orientation: getLinkOrientation(link)
                };
            }
        }
        // check for Rthing
        for (i = 0; i < sameLinks.length; i++) {
            if (sameLinks[i].hasRThing) {
                snpos.hasRThing = true;
            }
        }
        return snpos;
    };

    var _linksByNodes = null;

    // refreshes the cached list of all links with keys, to facilitate grouping them according to connected nodes
    function getLinksByNodes(refresh) {
        //console.log('getLinksByNodes');
        if (!self._linksByNodes || refresh) {
            self._linksByNodes = [];
            var diagram = map.getDiagram();
            var links = diagram.links.iterator;
            while (links.next()) {
                var link = links.value;
                var key = getSameNodesLinkKey(link);
                if (key) {
                    self._linksByNodes.push({
                        key: key,
                        link: link,
                        hasRThing: link.labelNodes.count > 0
                    });
                }
            }
        }
        return self._linksByNodes;
    }

    // Returns a key used to group links according to which pair of nodes they connect.
    // The returned key is non-empty for regular links and P links that should be shown currently,
    // so that these will all be routed by the same rules. A null key is returned for any other
    // links, indicating that no grouping is required.
    function getSameNodesLinkKey(link) {
        //        if (self.isRLink(link) || (self.isPLink(link) && map.getTemplates().showPLink(link))) {
        if (self.isRLink(link)) {
            var key = [link.fromNode.toString(), link.toNode.toString()].sort().join('|');
            //console.log('key: ' + key);
            return key;
        } else {
            return null;
        }
    }

    // We use this to distinguish an A-B link from a B-A link (based on fromNode and toNode, which
    // is independent of the arrowhead settings) when setting curviness, because setting curviness = 25
    // on an A-B link is the same as curviness = -25 on a B-A link.
    function getLinkOrientation(link) {
        if (link.fromNode && link.toNode && link.fromNode.toString() < link.toNode.toString()) {
            return 1;
        } else {
            return -1;
        }
    }

    // -------------- link tests ---------------

    this.isRLink = function (link) {
        return link instanceof go.Link && link.data && !link.data.category && link.fromNode && link.toNode;
    };

    this.isDLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category == 'D';
    };

    this.isPLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category == 'P';
    };

    this.isGroup = function (obj) {
        return obj instanceof go.Group;
    };
};

//console.log('Layouts, PartCreated');
// setNewPartLocationData(e);

// stacked?

},{}],12:[function(require,module,exports){
'use strict';

var go = window.go;

// functions for creating and manipulating the map (i.e. Diagram)

SandbankEditor.Map = function (editor) {

    var ret = {};

    // ----------- constants ---------------
    ret.LEFT = 'left';
    ret.RIGHT = 'right';

    // ------------ instance vars ----------

    ret._diagram = null;

    // components
    ret._analytics = null;
    ret._attachments = null;
    ret._autosave = null;
    ret._generator = null;
    //var _history = null;
    ret._layouts = null;
    ret._perspectives = null;
    ret._presenter = null;
    ret._standards = null;
    ret._templates = null;
    ret._tests = null;
    ret._ui = null;

    // ------------ component accessors ----------------

    ret.getComponents = function () {
        return [ret._analytics, ret._attachments, ret._autosave, ret._generator,
        // _history,
        ret._layouts, ret._perspectives, ret._presenter, ret._standards, ret._templates, ret._tests, ret._ui];
    };

    ret.getAnalytics = function () {
        return ret._analytics;
    };
    ret.getAttachments = function () {
        return ret._attachments;
    };
    ret.getAutosave = function () {
        return ret._autosave;
    };
    ret.getGenerator = function () {
        return ret._generator;
    };
    // ret.getHistory = function () { return _history; };
    ret.getLayouts = function () {
        return ret._layouts;
    };
    ret.getPerspectives = function () {
        return ret._perspectives;
    };
    ret.getPresenter = function () {
        return ret._presenter;
    };
    ret.getStandards = function () {
        return ret._standards;
    };
    ret.getTemplates = function () {
        return ret._templates;
    };
    ret.getTests = function () {
        return ret._tests;
    };
    ret.getUi = function () {
        return ret._ui;
    };

    // -------------- map init ------------------

    ret.init = function () {

        // initialize components
        ret._analytics = new SandbankEditor.Analytics(editor, ret);
        ret._attachments = new SandbankEditor.Attachments(editor, ret);
        ret._autosave = new SandbankEditor.Autosave(editor, ret);
        ret._generator = new SandbankEditor.Generator(editor, ret);
        // _history = new SandbankEditor.History($scope, ret);
        ret._layouts = new SandbankEditor.Layouts(editor, ret);
        ret._perspectives = new SandbankEditor.Perspectives(editor, ret);
        ret._presenter = new SandbankEditor.Presenter(editor, ret);
        //_standards = new SandbankEditor.Standards($scope, ret);
        ret._templates = new SandbankEditor.Templates(editor, ret);
        //_tests = new SandbankEditor.Tests($scope, ret);
        ret._ui = new SandbankEditor.UI(editor, ret);

        // call init for each component, if defined
        _.each(ret.getComponents(), function (component) {
            if (component && component.init) component.init();
        });

        // create diagram
        ret._diagram = new go.Diagram('diagram');
        ret._diagram.initialContentAlignment = go.Spot.Center;
        ret._diagram.initialViewportSpot = go.Spot.Center;
        ret._diagram.initialDocumentSpot = go.Spot.Center;
        ret._diagram.hasHorizontalScrollbar = false;
        ret._diagram.hasVerticalScrollbar = false;
        ret._diagram.padding = 500;
        ret._diagram.layout = ret._layouts.getFreehandDiagramLayout();

        ret.initTools();
        ret._templates.initTemplates(ret._diagram); // set up templates, customize temporary link behavior
        ret.addDiagramListeners();

        ret._templates.addExportFooter();

        // watch for tab changes
        // TODO: restore non-Angular version of ret
        //$scope.$watch('currentTab', function(newValue, oldValue) {
        //    ret.currentTabChanged(newValue, oldValue);
        //});
    };

    // ret is called by a $scope.$watch in init()
    ret.currentTabChanged = function (newValue, oldValue) {
        // console.log('currentTabChanged, newValue: ' + newValue + ', oldValue: ' + oldValue);
        // notify any interested components
        _.each(ret.getComponents(), function (component) {
            if (component && component.currentTabChanged) {
                component.currentTabChanged(newValue, oldValue);
            }
        });
    };

    ret.getDiagram = function () {
        return ret._diagram;
    };

    // misc. tool configuration
    ret.initTools = function () {
        // disable clicking on TextBlocks to edit - we will invoke editing in other ways
        ret._diagram.allowTextEdit = false;

        // select text when activating editor;
        // use shift-enter to create new lines, enter to finish editing (NB: editor has multiline=true)
        var textTool = ret._diagram.toolManager.textEditingTool;
        textTool.doActivate = function () {
            go.TextEditingTool.prototype.doActivate.call(textTool);
            if (textTool.defaultTextEditor) {
                textTool.defaultTextEditor.select();

                textTool.defaultTextEditor.addEventListener('keydown', function (e) {
                    if (e.which == 13 && !e.shiftKey) {
                        go.TextEditingTool.prototype.acceptText.call(textTool, go.TextEditingTool.LostFocus);
                    }
                });
            }
        };

        // handle delete key on Mac (default behavior only uses fn-Delete to delete from canvas)
        ret._diagram.commandHandler.doKeyDown = function () {
            var e = ret._diagram.lastInput;
            var cmd = ret._diagram.commandHandler;
            if (e.event.which === 8) {
                cmd.deleteSelection();
            } else {
                go.CommandHandler.prototype.doKeyDown.call(cmd); // call base method with no arguments
            }
        };

        // [disable keyboard shortcuts, as these do not do centering on zoom,
        // and can lead to confusion with browser zoom (which gets fired depends on focus)]
        // - turned back on to support pinch/zoom on iPad
        ret._diagram.allowZoom = true;

        ret._diagram.toolManager.mouseWheelBehavior = go.ToolManager.WheelZoom;

        // decide what kinds of Parts can be added to a Group or to top-level
        // _diagram.commandHandler.memberValidation = function (grp, node) {
        //     //if (grp instanceof go.Group && node instanceof go.Group) return false;  // cannot add Groups to Groups
        //     return true;
        // };

        // default link attributes
        ret._diagram.toolManager.linkingTool.archetypeLinkData = {
            type: 'noArrows'
        };

        // allow double-click in background to create a new node
        ret._diagram.toolManager.clickCreatingTool.archetypeNodeData = ret.getNewThingData();

        // how long mouse must be held stationary before starting a drag-select (instead of a scroll) - default was 175ms
        ret._diagram.toolManager.dragSelectingTool.delay = 400;
    };

    // ----------- handling of DiagramEvents --------------------

    ret.addDiagramListeners = function () {

        // DiagramEvents to be handled here or by a component
        var diagramEvents = ['InitialLayoutCompleted', 'ChangedSelection', 'BackgroundSingleClicked', 'SelectionCopied', 'SelectionMoved', 'SelectionDeleting', 'SelectionDeleted', 'PartCreated', 'PartResized', 'ClipboardChanged', 'ClipboardPasted', 'LinkDrawn', 'LinkRelinked', 'ViewportBoundsChanged'];
        _.each(diagramEvents, function (eventName) {
            ret._diagram.addDiagramListener(eventName, function (e) {
                ret.broadcastDiagramEvent(eventName, e);
            });
        });

        ret._diagram.addDiagramListener('BackgroundContextClicked', function (e) {});
    };

    // broadcasts the given DiagramEvent (see apidocs for go.DiagramEvent)
    // to any components that may be interested, including ret one.
    ret.broadcastDiagramEvent = function (eventName, e) {
        ret.handleDiagramEvent(eventName, e);
        _.each(ret.getComponents(), function (component) {
            if (component && component.handleDiagramEvent) component.handleDiagramEvent(eventName, e);
        });
    };

    ret.handleDiagramEvent = function (eventName, e) {
        //console.log('handleDiagramEvent: ' + eventName);
        if (eventName == 'ChangedSelection') {
            ret.changedSelection(e);
        } else if (eventName == 'SelectionCopied') {
            ret.selectionCopied(e);
        } else if (eventName == 'PartCreated') {
            ret.partCreated(e);
        } else if (eventName == 'BackgroundSingleClicked') {
            ret._ui.showHelpTip('canvasTip');
        } else if (eventName == 'LinkDrawn') {
            ret.linkDrawn(e);
            ret.setNewLinkDirection(e);
        } else if (eventName == 'LinkRelinked') {
            ret.linkRelinked(e);
        } else if (eventName == 'ClipboardChanged') {
            ret.clipboardChanged(e);
        } else if (eventName == 'ClipboardPasted') {
            ret.clipboardPasted(e);
        }
    };

    // handle zoom to region if applicable
    ret.changedSelection = function (e) {
        //console.log('map.changedSelection');
        ret._diagram.updateAllTargetBindings();
        ret._ui.maybeZoomToRegion();
        if (ret.relationshipsSelected()) {
            ret._ui.showHelpTip('relationshipTip');
        }
    };

    ret.partCreated = function (e) {
        //console.log('Map, PartCreated');
        var group = e.subject;
        if (!(group instanceof go.Group)) {
            return;
        }
        ret._diagram.model.setDataProperty(group.data, 'layout', ret._ui.getMapEditorOptions().defaultThingLayout || 'left');
        ret._layouts.setNewPartLocationData(e);
    };

    // fix link ports when a link is created -
    // the P and R ports both cover the whole node, and the P port is on top of the R port,
    // so both P and R links get the toPort set to P by default.
    ret.linkDrawn = function (e) {
        var link = e.subject;
        console.log('linkDrawn, link: ' + link + ', fromPort: ' + link.fromPortId + ', toPort: ' + link.toPortId);
        if (link.fromPortId == 'P') {
            ret._diagram.model.startTransaction('change link category');
            ret._diagram.model.setDataProperty(link.data, 'toPort', 'P');
            ret._diagram.model.setDataProperty(link.data, 'category', 'P');
            ret._diagram.model.commitTransaction('change link category');
        }
        // prevent links from R to P
        else if (link.fromPortId == 'R') {
            ret._diagram.model.startTransaction('change link toPort');
            ret._diagram.model.setDataProperty(link.data, 'toPort', 'R');
            ret._diagram.model.commitTransaction('change link toPort');
        }
    };

    // fix link ports when a link is relinked -
    // dragging either end of an R-link to another node will set the corresponding port to P,
    // since P port is on top of R port, so we reset both ports to R if the category is not P.
    ret.linkRelinked = function (e) {
        var link = e.subject;
        if (!link.data.category || link.data.category !== 'P') {
            ret._diagram.model.setDataProperty(link.data, 'fromPort', 'R');
            ret._diagram.model.setDataProperty(link.data, 'toPort', 'R');
        }
    };

    ret.setNewLinkDirection = function (e) {
        var link = e.subject;
        if (link.fromPortId == 'R') {
            ret._diagram.model.startTransaction('change link direction');
            ret._diagram.model.setDataProperty(link.data, 'type', ret._ui.getMapEditorOptions().defaultRelationshipDirection);
            ret._diagram.commitTransaction('change link direction');
        }
    };

    ret.clipboardChanged = function (e) {
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group) {
                console.log('clipboardChanged: part ' + part + ', mainpanel scale: ' + part.findObject('mainpanel').scale);
            }
        }
    };

    // NB: ret is called when parts are copied by control-drag, NOT when the copy button is clicked
    ret.selectionCopied = function (e) {
        console.log('selectionCopied');
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group && part.isTopLevel) {
                var loc = go.Point.parse(part.data.loc);
                console.log('selectionCopied: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                ret._diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                part.updateTargetBindings('loc');
            }
        }
    };

    ret.clipboardPasted = function (e) {
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group && part.isTopLevel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('clipboardPasted: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                ret._diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                part.updateTargetBindings('loc');
            }
        }
    };

    // computes the bounds of all groups in the diagram - ret includes all ideas/things,
    // and excludes nodes, including slides, the slide blocker, and the export footer
    ret.computeMapBounds = function () {
        var groups = new go.List(go.Group);
        var nodes = ret._diagram.nodes;
        while (nodes.next()) {
            if (nodes.value instanceof go.Group) {
                groups.add(nodes.value);
            }
        }
        return ret._diagram.computePartsBounds(groups).copy(); // return a mutable rect
    };

    // ------------ what is currently selected? ----------------

    // returns true if all selected items are things (i.e. Groups), including r-things
    ret.thingsSelected = function () {
        if (!ret._diagram || ret._diagram.selection.count < 1) return false;

        var it = ret._diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Group)) return false;
        }

        return true;
    };

    // returns true if exactly one thing (Group) is selected
    ret.thingSelected = function () {
        return ret._diagram && ret._diagram.selection.count == 1 && ret._diagram.selection.first() instanceof go.Group;
    };

    // if a single group is selected, returns it, otherwise returns null
    ret.getUniqueThingSelected = function () {
        if (ret._diagram && ret._diagram.selection.count == 1 && ret._diagram.selection.first() instanceof go.Group) {
            return ret._diagram.selection.first();
        } else {
            return null;
        }
    };

    ret.thingsSelectedAreMembersOf = function (group) {
        if (!ret._diagram || ret._diagram.selection.count < 1) return false;

        var it = ret._diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Group) || it.value.containingGroup != group) return false;
        }

        return true;
    };

    ret.thingsSelectedAreDescendantsOf = function (group) {
        if (!ret._diagram || ret._diagram.selection.count < 1) return false;

        var it = ret._diagram.selection.iterator;
        while (it.next()) {
            var ancestors = ret._layouts.getAncestorGroups(it.value);
            if (_.indexOf(ancestors, group) == -1) return false;
        }

        return true;
    };

    ret.thingsSelectedIncludeSlide = function () {
        if (!ret._diagram || ret._diagram.selection.count < 1) return false;

        var it = ret._diagram.selection.iterator;
        while (it.next()) {
            if (it.value.data && it.value.data.category == 'slide') {
                return true;
            }
        }

        return false;
    };

    // returns true if all selected items are relationships (i.e. Links)
    ret.relationshipsSelected = function () {
        if (!ret._diagram || ret._diagram.selection.count < 1) return false;

        var it = ret._diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Link) || !ret._layouts.isRLink(it.value)) return false;
        }

        return true;
    };

    // returns true if exactly one relationship (Link) is selected
    ret.relationshipSelected = function () {
        return ret._diagram && ret._diagram.selection.count == 1 && ret._diagram.selection.first() instanceof go.Link;
    };

    // ------------ load and initialize model -------------

    ret.load = function () {
        var url = editor.mapUrl + '.json';
        if (editor.sandbox) {
            url = editor.mapUrl + '.json?sandbox=1';
        }
        //TODO: restore non-Angular http-get for map data
        var data = { 'map': { 'metadata': { 'sandbox': false, 'id': 5547, 'name': 'Untitled Map', 'url': '/maps/5547', 'canEdit': true, 'updatedAt': '2015-05-15T12:29:40.721-04:00', 'updatedBy': null, 'updatedByName': null, 'userTags': [] }, 'data': { 'class': 'go.GraphLinksModel', 'nodeIsLinkLabelProperty': 'isLinkLabel', 'linkLabelKeysProperty': 'labelKeys', 'linkFromPortIdProperty': 'fromPort', 'linkToPortIdProperty': 'toPort', 'nodeDataArray': [{ 'key': 1, 'text': 'New Idea', 'isGroup': true, 'loc': '0 0', 'layout': 'left', 'sExpanded': true, 'pExpanded': true }], 'linkDataArray': [] }, 'stateData': null, 'editorOptions': null, 'analytics': {}, 'versions': [] } };
        ret._diagram.model = go.Model.fromJson(data);
        ret._ui.setStateData(data.map.stateData);
        ret._ui.setMapEditorOptions(data.map.editorOptions);

        ret.checkModel();
        ret._diagram.updateAllTargetBindings();
        ret._diagram.undoManager.isEnabled = true;
        ret._diagram.model.addChangedListener(ret._autosave.modelChanged);
        ret._autosave.saveOnModelChanged = true;
        ret._diagram.isReadOnly = !editor.canEdit;
        editor.updateEditStatus(editor.canEdit ? editor.LAST_UPDATED : editor.READ_ONLY);
        ret._ui.resetZoom();
        ret.loadMapExtraData(data.map);

        // if no nodes OR in thinkquery mode, launch generator
        if (editor.thinkquery || !ret._diagram.model.nodeDataArray.length) {
            ret._ui.openTab(ret._ui.TAB_ID_GENERATOR);
        }
        // if we have slides, play presentation
        else if (!editor.canEdit && ret._presenter.getSlideNodeDatas().length) {
            ret._presenter.playSlide(1);
        }
    };

    ret.loadForSandbox = function () {
        ret._diagram.model = go.Model.fromJson(editor.mapData);
        ret._ui.setStateData(''); // important! (otherwise corner highlighting breaks)
        ret._diagram.updateAllTargetBindings();
        ret._diagram.undoManager.isEnabled = true;
        ret._ui.resetZoom();
        editor.canEdit = true;

        // if no nodes OR in thinkquery mode, launch generator
        if (editor.thinkquery) {
            ret._ui.openTab(ret._ui.TAB_ID_GENERATOR);
        }
        // if we have slides, play presentation
        else if (ret._presenter.getSlideNodeDatas().length) {
            ret._presenter.playSlide(1);
        }
    };

    // fix any structural problems in the model before displaying it
    ret.checkModel = function () {
        // change "isLinkLabel" property to category:"LinkLabel" (change as of goJS 1.3)
        _.each(ret._diagram.model.nodeDataArray, function (nodeData, index, list) {
            if (nodeData.isLinkLabel) {
                delete nodeData.isLinkLabel;
                nodeData.category = 'LinkLabel';
            }
        });

        // check for the link label (r-thing) for a link being the same as the from or to node
        // - ret can cause infinite recursion in thinks like layout.getScale
        _.each(ret._diagram.model.linkDataArray, function (linkData, index, list) {
            var badLabelKeys = [];
            _.each(linkData.labelKeys, function (key, index2, list2) {
                if (key == linkData.from || key == linkData.to) {
                    console.log('labelKey same as from or to of link: ' + key);
                    badLabelKeys.push(key);
                }
            });
            linkData.labelKeys = _.difference(linkData.labelKeys, badLabelKeys);
        });
    };

    // loads other data besides the diagram model from the json object returned by maps/show.json
    // - ret includes points, badges, versions, and map analytics
    // NB: points and badges are set at page load time in layouts/user and users/badges, but
    // we also need to be able to update them here after an autosave

    // TODO: is ret still all needed with the newer userProfile stuff?
    ret.loadMapExtraData = function (mapData) {
        //console.log('map.loadMapExtraData, mapData: ' + mapData);
        editor.mapUserTags = mapData.metadata.userTags; // TODO: is ret used anywhere?

        //$scope.map.getHistory().versionList = mapData.versions;
        editor.map.getAnalytics().mapAnalytics = mapData.analytics;
    };

    // loads model data for an individual version and displays it
    // NB: ret also disables autosave; load() must be called to re-enable it
    ret.loadVersion = function (id) {
        $http.get('/map_versions/' + id).then(function (response) {
            if (response.status === 200) {
                try {
                    //console.log('loaded map version with ID: ' + id);
                    ret._diagram.model = go.Model.fromJson(response.data);
                    ret._diagram.updateAllTargetBindings();
                    ret._diagram.undoManager.isEnabled = false;
                    ret._autosave.saveOnModelChanged = false;
                    ret._diagram.layoutDiagram(true);
                    ret._diagram.isReadOnly = true;
                } catch (e) {
                    alert('Could not load MetaMap version');
                    console.error(e.message);
                }
            }
        });
    };

    // set whether editing capability is temporarily suspended -
    // ret is distinct from the global $scope.canEdit setting,
    // which if false prevents editing at all times
    ret.setEditingBlocked = function (val) {
        if (editor.canEdit) {
            ret._diagram.isReadOnly = val;
        }
    };

    // ------------- creating things in the model -------------------

    // default properties for all new Things (groups) - note that these can be overridden if needed
    ret.getNewThingData = function () {
        return {
            text: 'Idea',
            isGroup: true,
            layout: ret._ui.getMapEditorOptions().defaultThingLayout || 'left',
            sExpanded: true,
            pExpanded: true
        };
    };

    ret.createSister = function (thing) {
        if (!editor.canEdit) {
            return null;
        }

        var newLoc = ret._layouts.getNewSisterLocation(thing);
        var data = _.extend(ret.getNewThingData(), {
            group: thing.data.group,
            text: 'Idea',
            loc: go.Point.stringify(newLoc)
        });
        ret._diagram.model.addNodeData(data);
        var newSister = ret._diagram.findNodeForData(data);

        // put new sister right after thing (not as the last sibling)
        if (thing.containingGroup) {
            ret.moveSiblingNextTo(newSister, thing, ret.RIGHT);
        }
        return newSister;
    };

    ret.createRToSister = function (thing) {
        if (!editor.canEdit) {
            return null;
        }

        var thingKey = ret._diagram.model.getKeyForNodeData(thing.data);
        //console.log('thingKey: ' + thingKey);
        var newLoc = ret._layouts.getNewSisterLocation(thing, true); // withR = true
        var data = _.extend(ret.getNewThingData(), {
            group: thing.data.group,
            text: 'Idea',
            loc: go.Point.stringify(newLoc)
        });
        ret._diagram.model.addNodeData(data);
        var newSister = ret._diagram.findNodeForData(data);
        var groupKey = ret._diagram.model.getKeyForNodeData(data);

        // create link
        var linkData = {
            from: thingKey,
            to: groupKey,
            type: 'to',
            fromPort: 'R',
            toPort: 'R'
        };
        ret._diagram.model.addLinkData(linkData);

        // put new sister right after thing (not as the last sibling)
        if (thing.containingGroup) {
            ret.moveSiblingNextTo(newSister, thing, ret.RIGHT);
        }
        return newSister;
    };

    ret.createChild = function (thing, name, x, y) {
        if (!editor.canEdit) {
            return null;
        }

        var newLoc = ret._layouts.getNewChildLocation2(thing);
        if (x || y) {
            newLoc = new go.Point(x, y);
        }
        var data = _.extend(ret.getNewThingData(), {
            group: thing.data.key,
            text: name || 'Part',
            loc: go.Point.stringify(newLoc)
        });
        ret._diagram.model.addNodeData(data);
        ret._layouts.setDescendantLayouts(thing, thing.data.layout);
        var child = ret._diagram.findNodeForData(data);
        child.updateTargetBindings();
        return child;
    };

    ret.createRThing = function (link, name) {
        if (!editor.canEdit) {
            return null;
        }

        // console.log('createRThing, link: ' + link + ', name: ' + name);
        // don't allow multiple R-things
        if (link.isLabeledLink) {
            // console.log('cannot create RThing, link is already labeled');
            return;
        }

        var data = _.extend(ret.getNewThingData(), {
            text: name || 'Relationship Idea',
            //isLinkLabel: true,     // deprecated as of goJS 1.3
            category: 'LinkLabel', // new as of goJS 1.3
            loc: '0 0'
        });
        ret._diagram.model.startTransaction('create R Thing');
        ret._diagram.model.addNodeData(data);
        var key = ret._diagram.model.getKeyForNodeData(data);
        var node = ret._diagram.findPartForKey(key);
        node.labeledLink = link;
        ret._diagram.model.commitTransaction('create R Thing');
        ret._diagram.updateAllTargetBindings();

        return ret._diagram.findNodeForData(data);
    };

    // ---------- creating things with specified names/locations - for use by generator and tests ------------

    ret.createThing = function (x, y, name, layout) {
        group = ret._diagram.toolManager.clickCreatingTool.insertPart(new go.Point(x, y));
        ret._diagram.model.setDataProperty(group.data, 'text', name);
        if (layout) {
            ret._diagram.model.setDataProperty(group.data, 'layout', layout);
        }
        return group;
    };

    ret.createRLinkWithRThing = function (thing1, thing2, name) {
        var link = ret.createRLink(thing1, thing2);
        return ret.createRThing(link, name);
    };

    // returns the linkData object for the new link
    ret.createRLink = function (thing1, thing2) {
        ret._diagram.model.startTransaction('add link');
        var data = {
            type: 'noArrows',
            from: thing1.data.key,
            to: thing2.data.key,
            fromPort: 'R',
            toPort: 'R'
        };
        ret._diagram.model.addLinkData(data);
        ret._diagram.model.commitTransaction('add link');
        return ret._diagram.findLinkForData(data);
    };

    // returns the linkData object for the new link
    ret.createPLink = function (thing1, thing2) {
        ret._diagram.model.startTransaction('add link');
        var data = {
            type: 'noArrows',
            from: thing1.data.key,
            to: thing2.data.key,
            fromPort: 'P',
            toPort: 'P',
            category: 'P'
        };
        ret._diagram.model.addLinkData(data);
        ret._diagram.model.commitTransaction('add link');
        ret._diagram.model.setDataProperty(thing1.data, 'pExpanded', true);
        return ret._diagram.findLinkForData(data);
    };

    // ------------- moving things in the model structure -------------------

    // returns a go.List of the items in the current selection that are Groups
    ret.getSelectedGroups = function () {
        var it = ret._diagram.selection.iterator;
        var members = new go.List();
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group) {
                members.add(part);
            }
        }
        return members;
    };

    // drag to S
    ret.addSelectedThingsAsChildrenOf = function (group) {
        var newMembers = ret.getSelectedGroups();

        // check existing members so we can calculate layout
        var oldMemberBounds = ret.safeRect(ret._diagram.computePartsBounds(group.memberParts));

        // NB: ret is subject to validation by CommandHandler.isValidMember,
        // so for example, members of members of newMembers will not be added as members
        group.addMembers(newMembers);

        ret._layouts.layoutNewMembersRelativeTo(newMembers, group, oldMemberBounds);

        ret._diagram.clearSelection();
    };

    // drag to D
    ret.addSelectedThingsAsSistersOf = function (group) {
        var oldMembers = ret.getSelectedGroups();

        // if dragging to top level, move dragged things so they don't overlap the former parent
        if (!group.containingGroup) {
            // check existing members so we can calculate layout
            var oldMembersBounds = ret._diagram.computePartsBounds(oldMembers);
            // NB: oldMembers can be on multiple levels, so not clear which level to use for rescaling old members after drag
            var oldMembersLevel = ret._layouts.computeLevel(oldMembers.first());

            var it = oldMembers.iterator;
            while (it.next()) {
                var member = it.value;
                member.containingGroup = null;
            }
            ret._layouts.layoutOldMembersOutsideOf(oldMembers, group, oldMembersBounds, oldMembersLevel);
        }
        // if not dragging to top level, place dragged things after former parent in outline
        else {
            var it2 = oldMembers.iterator;
            while (it2.next()) {
                var member2 = it2.value;
                member2.containingGroup = group.containingGroup;
                ret.moveSiblingNextTo(member2, group, ret.RIGHT);
            }
        }
        ret._diagram.clearSelection();
    };

    // for dragging parts within a system - side is LEFT or RIGHT (i.e. above or below, resp. in inventory layout)
    ret.addSelectedThingAsOrderedSisterOf = function (group, side) {
        //console.log('addSelectedThingAsOrderedSisterOf, side: ' + side);
        var thing = ret.getUniqueThingSelected();
        if (!thing) {
            return;
        }
        ret.moveSiblingNextTo(thing, group, side);
    };

    // moves the first thing (sibling) to be after the second thing (group)
    // in the part ordering - they are assumed to be siblings
    // side is LEFT or RIGHT
    ret.moveSiblingNextTo = function (sibling, group, side) {
        var parent = group.containingGroup;
        console.log('moveSiblingNextTo, sibling: ' + sibling + ', group: ' + group + ', parent: ' + parent + ', sibling.containingGroup: ' + sibling.containingGroup);

        if (!parent || sibling.containingGroup != parent) {
            console.error('Cannot do moveSiblingNextTo on non-siblings or top-level groups');
        }

        // create new member order
        var memberOrder = new go.List();
        var it = parent.memberParts;
        var order = 0;
        while (it.next()) {
            var member = it.value;
            if (member instanceof go.Group) {
                // we're at the target group, so add the moved thing either before or after it
                if (member == group) {
                    if (side == ret.LEFT) {
                        memberOrder.add(sibling);
                        ret._diagram.model.setDataProperty(sibling.data, 'order', order++);
                        memberOrder.add(member);
                        ret._diagram.model.setDataProperty(member.data, 'order', order++);
                    } else {
                        memberOrder.add(member);
                        ret._diagram.model.setDataProperty(member.data, 'order', order++);
                        memberOrder.add(sibling);
                        ret._diagram.model.setDataProperty(sibling.data, 'order', order++);
                    }
                }
                // don't re-add the moved thing, it was added above
                else if (member != sibling) {
                    memberOrder.add(member);
                    ret._diagram.model.setDataProperty(member.data, 'order', order++);
                }
            }
        }

        // clear existing members
        var newIt = memberOrder.iterator;
        while (newIt.next()) {
            var member2 = newIt.value;
            member2.containingGroup = null;
        }

        // add new members
        newIt.reset();
        while (newIt.next()) {
            var member3 = newIt.value;
            member3.containingGroup = parent;
        }
    };

    ret.addThingAsRThing = function (thing, link) {
        thing.labeledLink = link;
        thing.updateTargetBindings();
    };

    // D corner handler (single click)
    ret.toggleDFlag = function (thing) {
        ret._diagram.model.setDataProperty(thing.data, 'dflag', !thing.data.dflag);
        thing.updateTargetBindings();
    };

    // S corner handler (single click)
    ret.toggleSExpansion = function (thing) {
        var isExpanded = !(thing.data && !thing.data.sExpanded); // expand by default if property not present
        ret._diagram.model.setDataProperty(thing.data, 'sExpanded', !isExpanded);
        thing.updateTargetBindings();
        ret._ui.showCornerTip(thing, 'S');
    };

    // P corner handler (single click)
    ret.togglePExpansion = function (thing) {
        ret._diagram.model.setDataProperty(thing.data, 'pExpanded', !ret.pIsExpanded(thing));
        thing.updateTargetBindings();
        ret._ui.showCornerTip(thing, 'P');
    };

    ret.pIsExpanded = function (group) {
        return group.data && group.data.pExpanded === true;
    };

    // ---------------------- undo/redo --------------------

    ret.canUndo = function () {
        return ret._diagram.commandHandler.canUndo();
    };

    ret.undo = function () {
        ret._diagram.commandHandler.undo();
        ret._diagram.layoutDiagram(true);
    };

    ret.canRedo = function () {
        return ret._diagram.commandHandler.canRedo();
    };

    ret.redo = function () {
        ret._diagram.commandHandler.redo();
        ret._diagram.layoutDiagram(true);
    };

    ret.refresh = function () {
        ret._diagram.updateAllTargetBindings();
        ret._diagram.layoutDiagram(true);
    };

    // ------------------- utility ----------------------

    // check for a rect with NaN X/Y/W/H coords, so we can do stuff with it such as unionRect
    // (NaN,NaN,0,0) => (0,0,0,0)
    ret.safeRect = function (rect) {
        if (isNaN(rect.x)) {
            rect.x = 0;
        }
        if (isNaN(rect.y)) {
            rect.y = 0;
        }
        if (isNaN(rect.width)) {
            rect.width = 0;
        }
        if (isNaN(rect.height)) {
            rect.height = 0;
        }
        return rect;
    };

    // ------------------- debug map model ----------------------

    ret.loadModel = function () {
        $('#map-model-debug').val(ret._diagram.model.toJson());
    };

    ret.saveModel = function () {
        ret._diagram.model = go.Model.fromJson($('#map-model-debug').val());
        ret._diagram.updateAllTargetBindings();
        ret._diagram.model.addChangedListener(ret._autosave.modelChanged);
        ret._autosave.saveOnModelChanged = true;
    };

    return ret;
};

// TODO: turn off in production
//console.log('diagram model:' + _diagram.model.toJson());

},{}],13:[function(require,module,exports){
// functions for editing perspectives AND distinctions, which work similarly in the UI

'use strict';

SandbankEditor.Perspectives = function ($scope, map) {

    var self = this;

    // temporary state flag for adding/removing P/D selections programmatically
    var selectingLinkedThings = false;

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        //console.log('Perspectives, currentTabChanged');
        if (newValue == map.getUi().TAB_ID_PERSPECTIVES) {
            // opening perspectives
            setPorDThing('P');
            map.setEditingBlocked(true);
        } else if (oldValue == map.getUi().TAB_ID_PERSPECTIVES) {
            // closing perspectives
            saveLinks('P');
            map.setEditingBlocked(false);
        } else if (newValue == map.getUi().TAB_ID_DISTINCTIONS) {
            // opening distinctions
            setPorDThing('D');
            map.setEditingBlocked(true);
        } else if (oldValue == map.getUi().TAB_ID_DISTINCTIONS) {
            // closing distinctions
            saveLinks('D');
            map.setEditingBlocked(false);
        }
    };

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.getUi().currentTabIs(map.getUi().TAB_ID_PERSPECTIVES) || map.getUi().currentTabIs(map.getUi().TAB_ID_DISTINCTIONS)) {
                updateLinks();
            }
        }
    };

    // ---------- P/D Editor state

    this.isInPOrDEditorMode = function () {
        return map.getUi().state.perspectivePointKey || map.getUi().state.distinctionThingKey;
    };

    this.isInPEditorMode = function () {
        return map.getUi().state.perspectivePointKey;
    };

    this.isInDEditorMode = function () {
        return map.getUi().state.distinctionThingKey;
    };

    this.isPEditorPoint = function (group) {
        return map.getUi().state.perspectivePointKey == group.data.key;
    };

    this.isDEditorThing = function (group) {
        return map.getUi().state.distinctionThingKey == group.data.key;
    };

    // NB: this is called via map.getCornerFunction, so we get the extra corner arg, which we can ignore
    this.setPEditorPoint = function (thing, corner) {
        if ($scope.canEdit) {
            map.getUi().openTab(map.getUi().TAB_ID_PERSPECTIVES);
        }
    };

    this.setDEditorThing = function (thing) {
        if ($scope.canEdit) {
            // NB: need to select only this thing, since this is invoked
            // by a control-click, which will not automatically select just it
            map.getDiagram().clearSelection();
            thing.isSelected = true;
            map.getUi().openTab(map.getUi().TAB_ID_DISTINCTIONS);
        }
    };

    // -----------------------

    this.isPerspectivePoint = function (group) {
        var links = group.findLinksOutOf();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    };

    this.isSelectedPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && map.pIsExpanded(link.fromNode) && link.fromNode.isSelected) {
                return true;
            }
        }
        return false;
    };

    this.isToggledPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && map.pIsExpanded(link.fromNode)) {
                return true;
            }
        }
        return false;
    };

    this.isMouseOverPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && link.fromNode == map.getUi().mouseOverGroup) {
                return true;
            }
        }
        return false;
    };

    this.getPerspectiveViewWeight = function (group) {
        var mode = map.getUi().getMapEditorOptions().perspectiveMode;
        if (mode == 'spotlight' || mode == 'both') {
            return (self.isSelectedPerspectiveView(group) ? 1 : 0) + (self.isToggledPerspectiveView(group) ? 1 : 0) + (self.isMouseOverPerspectiveView(group) ? 1 : 0);
        } else {
            return 0;
        }
    };

    // -----------------------

    // category is "P" or "D" (perspectives or distinctions)
    function setPorDThing(category) {
        // if already set, must do save perspectives or save distinctions
        if (map.getUi().state.perspectivePointKey || map.getUi().state.distinctionThingKey) return;

        var thing = map.getDiagram().selection.first();
        //console.log('setPorDThing: ' + thing);
        if (thing instanceof go.Group) {
            var key = thing.data.key;
            if (category == 'P') {
                map.getUi().state.perspectivePointKey = key;
            } else if (category == 'D') {
                map.getUi().state.distinctionThingKey = key;
            }

            // select views/others
            selectLinkedThingsFor(thing, category);
        }
    }

    // this is called when the selection changes - if the thing is set,
    // adds/removes D/P links according to what is selected; otherwise
    // just shows/hides D/P links for the selected thing(s)
    function updateLinks() {
        if (selectingLinkedThings) // selection is being changed programmatically, so don't respond
            return;

        var pOrDThing = null;
        var category = null;
        if (map.getUi().state.perspectivePointKey) {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.perspectivePointKey);
            category = 'P';
        } else if (map.getUi().state.distinctionThingKey) {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.distinctionThingKey);
            category = 'D';
        }

        var addLinksTo = new go.List();
        var removeLinks = new go.List();

        // iterate through all things
        if (category) {
            var layers = map.getDiagram().layers;
            while (layers.next()) {
                var layer = layers.value;
                var parts = layer.parts;
                while (parts.next()) {
                    var part = parts.value;
                    if (part instanceof go.Group) {
                        // calculate links to add/remove based on selection
                        if (pOrDThing) {
                            var links = part.findLinksInto();
                            var existingLink = null;
                            while (links.next()) {
                                var link = links.value;
                                if (link.fromNode.data.key == pOrDThing.data.key && link.data.category == category) existingLink = link;
                            }

                            // decide whether to add or remove a link to the part, depending on whether
                            // it is selected and whether a link exists
                            if (!existingLink && part.isSelected) addLinksTo.add(part);else if (existingLink && !part.isSelected) removeLinks.add(existingLink);
                        }
                    }
                }
            }
        }

        // do the adding/removing of links
        var adds = addLinksTo.iterator;
        while (adds.next()) {
            map.getDiagram().model.startTransaction('add link');
            var to = adds.value;
            console.log('updateLinks: adding link from ' + pOrDThing + ' to ' + to);
            if (category == 'D' && pOrDThing.data.key == to.data.key) {
                pOrDThing.isSelected = false;
                alert('You can\'t distinguish a thing from itself!');
                continue;
            }
            map.getDiagram().model.addLinkData({
                from: pOrDThing.data.key,
                to: to.data.key,
                fromPort: category,
                toPort: category,
                category: category
            });
            map.getDiagram().model.commitTransaction('add link');
        }
        var removes = removeLinks.iterator;
        while (removes.next()) {
            var remove = removes.value;
            console.log('updateLinks: removing link from ' + remove.fromNode + ' to ' + remove.toNode);
            map.getDiagram().model.startTransaction('remove link');
            map.getDiagram().remove(remove);
            map.getDiagram().model.removeLinkData(remove.data);
            map.getDiagram().model.commitTransaction('remove link');
        }

        // show links
        map.getDiagram().updateAllTargetBindings();
    }

    function saveLinks(category) {
        var pOrDThing = null;
        if (category == 'P') {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.perspectivePointKey);
            map.getUi().state.perspectivePointKey = null;
        } else if (category == 'D') {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.distinctionThingKey);
            map.getUi().state.distinctionThingKey = null;
        }

        map.getDiagram().clearSelection();
        map.getDiagram().updateAllTargetBindings();
    }

    function selectLinkedThingsFor(group, category) {
        selectingLinkedThings = true;
        map.getDiagram().clearSelection();

        var links = group.findLinksOutOf();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == category) link.toNode.isSelected = true;
        }

        selectingLinkedThings = false;
    }
};

},{}],14:[function(require,module,exports){
// functions for the presenter/slides

'use strict';

SandbankEditor.Presenter = function ($scope, map) {

    var self = this;

    // constants
    this.SLIDE_BLOCKER_WIDTH = 1000;
    this.SLIDE_BLOCKER_COLOR = '#fff';
    this.SLIDE_BLOCKER_OPACITY = 0.9;

    // state vars
    this.currentSlideIndex = null;
    this.isPresenting = false;
    this.showTOC = false;
    this.isCreatingThumbnail = false;

    // mask applied around slide region when presenting
    this.slideBlocker = null;

    this.diagramAspectRatio = null;

    this.init = function () {};

    this.autosave = function () {
        map.getAutosave().save('edit_presenter');
    };

    // ---------- editing functions for different slide types -------------

    // NB: hasLinks can have values false, 1, or true (1 means only a single link)
    this.slideTypes = [{
        name: 'TITLE_BODY', label: 'Title and Body',
        hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: false, hasMapSummary: false, hasLinks: false
    }, {
        name: 'TITLE_BODY_MAP', label: 'Title, Body and MetaMap',
        hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
    }, {
        name: 'ACTIVITY_MAP', label: 'Lesson Activity and MetaMap',
        hasTitle: true, hasNotes: true, hasChecks: true, hasMapRegion: true, hasMapSummary: false, hasLinks: true
    }, {
        name: 'MAP_ONLY', label: 'MetaMap only',
        hasTitle: true, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
    }, {
        name: 'MAP_SUMMARY', label: 'MetaMap Summary',
        hasTitle: false, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: true, hasLinks: false
    }];

    // ------------------ link/attachment types -----------------------

    this.linkTypes = [{ name: '', label: '-- Select attachment type --' }, { name: 'WEB', label: 'Web Page' }, { name: 'PDF', label: 'PDF' }, { name: 'DOC', label: 'Document' }, { name: 'SPREADSHEET', label: 'Spreadsheet' }, { name: 'PRESENTATION', label: 'Presentation' }, { name: 'METAMAP', label: 'MetaMap' }, { name: 'IMAGE', label: 'Image' }, { name: 'AUDIO', label: 'Audio' }, { name: 'VIDEO', label: 'Video' }, { name: 'SURVEY', label: 'Survey' }, { name: 'WORKSHEET', label: 'Worksheet' }];

    // ------------ list of all things in the map, for map summary slides ---------------------

    this.ideaList = '';

    // only call this occasionally, as they won't be editing the map while presenter is open
    function updateIdeaList() {
        var nodes = map.getDiagram().nodes;
        var list = [];
        while (nodes.next()) {
            if (nodes.value instanceof go.Group) {
                list.push(nodes.value.data.text);
            }
        }
        list.sort();

        // filter out placeholder names - see map.js:getNewThingData, createSister, etc.
        list = _.difference(_.uniq(list, true), map.getGenerator().getPlaceholderIdeaNames(), ['New Idea', 'New Distinguished Idea', 'New Related Idea', 'New Relationship Idea', 'New Part Idea', 'Idea', 'Part', 'Relationship Idea'] // newer simplified names
        );

        self.ideaList = list.join(', ');
    }

    this.summaryAnalytics = [{ name: 'COUNT_THINGS', singularLabel: 'Distinction', pluralLabel: 'Distinctions' }, { name: 'COUNT_SYSTEMS', singularLabel: 'System', pluralLabel: 'Systems' }, { name: 'COUNT_RELATIONSHIPS', singularLabel: 'Relationship', pluralLabel: 'Relationships' }, { name: 'COUNT_PERSPECTIVES', singularLabel: 'Perspective', pluralLabel: 'Perspectives' }, { name: 'COUNT_RTHINGS', singularLabel: 'Relationship Idea', pluralLabel: 'Relationship Ideas' }, { name: 'COUNT_SYSTEM_RTHINGS', singularLabel: 'Relationship System', pluralLabel: 'Relationship Systems' }, { name: 'COUNT_SYSTEM_PERSPECTIVES', singularLabel: 'Perspective System', pluralLabel: 'Perspective Systems' }, { name: 'COUNT_DISTINCTIONS', singularLabel: 'Advanced Distinction', pluralLabel: 'Advanced Distinctions' }];

    this.addCheck = function (nodeData) {
        nodeData.checks.push({ text: '' });
        self.autosave();
    };

    this.deleteCheck = function (check, nodeData) {
        var i = _.indexOf(nodeData.checks, check);
        nodeData.checks.splice(i, 1);
        self.autosave();
    };

    this.addLink = function (nodeData) {
        nodeData.links.push({ title: '', url: '', type: '' });
        self.autosave();
    };

    this.deleteLink = function (link, nodeData) {
        var i = _.indexOf(nodeData.links, link);
        nodeData.links.splice(i, 1);
        self.autosave();
    };

    this.toggleTOC = function () {
        $scope.safeApply(function () {
            if (self.isPresenting) {
                self.showTOC = !self.showTOC;
            }
        });
    };

    // NB: can't create this in init as the diagram doesn't exist yet...
    function maybeInitSlideBlocker() {
        if (!self.slideBlocker) {
            var mk = go.GraphObject.make;
            self.slideBlocker = mk(go.Node, go.Panel.Auto, {
                layerName: 'Tool',
                opacity: self.SLIDE_BLOCKER_OPACITY
            }, mk(go.Shape, 'Rectangle', {
                fill: null,
                stroke: self.SLIDE_BLOCKER_COLOR,
                strokeWidth: 1000
            }));
            map.getDiagram().add(self.slideBlocker);
        }
    }

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (oldValue == map.getUi().TAB_ID_PRESENTER) {
            // closing tab
            self.stopPresenting();
        } else if (newValue == map.getUi().TAB_ID_PRESENTER) {
            // opening tab
            // show slides (see layouts.slideTemplate, binding of visible attr)
            self.diagramAspectRatio = $('#diagram').width() / $('#diagram').height();
            console.log('diagramAspectRatio: ' + self.diagramAspectRatio);

            $scope.map.getDiagram().updateAllTargetBindings();
            updateIdeaList();
            if (!self.currentSlideIndex && self.getSlideNodeDatas().length > 0) {
                self.currentSlideIndex = 1;
            }
            self.slideThumbnailSelected(1);
        }
    };

    this.handleDiagramEvent = function (eventName, e) {
        if (!map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER)) {
            return;
        }

        if (eventName == 'SelectionDeleting') {
            var selection = e.subject;
            if (selection.count == 1) {
                var thing = selection.first();
                if (thing instanceof go.Node && thing.data.category == 'slide') {
                    if (!confirm('Delete this slide from the presentation?')) {
                        e.cancel = true;
                    }
                }
            }
        } else if (eventName == 'SelectionDeleted') {
            // if slide is deleted from canvas rather than by thumbnail x button, need to update indexes
            compactSlideIndexes();
        } else if (eventName == 'SelectionMoved' || eventName == 'PartResized') {
            // clear thumbnail cache
            thumbnailCache = [];
        } else if (eventName == 'ViewportBoundsChanged') {}
    };

    this.windowResized = _.debounce(function () {
        self.slideThumbnailSelected(self.currentSlideIndex);
    }, 1000);

    this.showSidebar = function () {
        return map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) && (!self.isPresenting || self.showTOC);
    };

    this.disableMapToolbarButtons = function () {
        return !map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) || self.isPresenting || !self.getCurrentSlideType().hasMapRegion;
    };

    // returns an array of node data objects (not the slide nodes themselves)
    this.getSlideNodeDatas = function () {
        var diagram = map.getDiagram();
        var nodes = diagram.model.nodeDataArray;
        var nodeDatas = _.filter(nodes, function (node) {
            return node.category == 'slide';
        });
        nodeDatas = _.sortBy(nodeDatas, function (nodeData) {
            return nodeData.index;
        });
        //console.log('getSlideNodeDatas, indexes: ' + _.pluck(slidesData, 'index'));
        return nodeDatas;
    };

    this.getSlideCount = function () {
        return self.getSlideNodeDatas().length;
    };

    this.getActivitySlideCount = function () {
        return _.where(self.getSlideNodeDatas(), { type: 'ACTIVITY_MAP' }).length;
    };

    this.getSlideType = function (typeName) {
        return _.findWhere(self.slideTypes, { name: typeName });
    };

    this.getCurrentSlideType = function () {
        var slide = findSlideByIndex(self.currentSlideIndex);
        if (slide) {
            return _.findWhere(self.slideTypes, { name: slide.data.type });
        } else {
            return {};
        }
    };

    function findSlideByIndex(index) {
        var diagram = map.getDiagram();
        var slideData = _.find(self.getSlideNodeDatas(), function (slideData) {
            return slideData.index == index;
        });
        if (slideData !== undefined) {
            return diagram.findNodeForKey(slideData.key);
        } else {
            return undefined;
        }
    }

    // increment is -1 or +1
    this.moveSlide = function (index, increment) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            var neighbor = findSlideByIndex(index + increment);
            if (slide && neighbor) {
                //console.log('moveSlide: swapping ' + slide.data.key + ' with ' + neighbor.data.key);
                diagram.startTransaction('move slide');
                diagram.model.setDataProperty(slide.data, 'index', slide.data.index + increment);
                diagram.model.setDataProperty(neighbor.data, 'index', neighbor.data.index - increment);
                diagram.commitTransaction('move slide');
                thumbnailCache = [];
            }
        });
    };

    function compactSlideIndexes() {
        $scope.safeApply(function () {
            //console.log('compactSlideIndexes');
            var slidesData = self.getSlideNodeDatas();
            var diagram = map.getDiagram();
            var newIndex = 1;
            diagram.startTransaction('compact slide indexes');
            _.each(slidesData, function (slideData) {
                diagram.model.setDataProperty(slideData, 'index', newIndex);
                //console.log('compactSlideIndexes: set index for ' + slideData.key + ' to ' + newIndex);
                newIndex++;
            });
            diagram.commitTransaction('compact slide indexes');
        });
    }

    function getNewSlideKey() {
        var diagram = map.getDiagram();
        var i = 1;
        while (diagram.model.findNodeDataForKey('slide-' + i)) {
            i++;
        }
        return 'slide-' + i;
    }

    // NB: indexes (and keys?) must be 1-based, otherwise first slide gets screwed up
    // (somewhere the index shows up as '' instead of 0)
    function getNewSlideIndex() {
        var slides = self.getSlideNodeDatas();
        return slides.length + 1;
    }

    this.addSlide = function (typeName) {
        $scope.safeApply(function () {
            console.log('addSlide: ' + typeName);
            var diagram = map.getDiagram();

            var db = map.computeMapBounds();
            db.inflate(db.width / 20, db.height / 10);
            var newLoc = db.x + ' ' + db.y;
            var newIndex = getNewSlideIndex();

            var slideType = _.findWhere(self.slideTypes, { name: typeName });

            diagram.startTransaction('add slide');
            diagram.model.addNodeData({
                key: getNewSlideKey(),
                category: 'slide',
                index: newIndex,
                isGroup: false,
                width: db.width,
                height: db.height,
                loc: newLoc,
                level: 0,
                children: 0,
                type: typeName,
                title: '',
                notes: '',
                checks: [],
                hasRegion: slideType.hasMapRegion,
                isSummary: slideType.hasMapSummary,
                links: []
            });
            diagram.commitTransaction('add slide');
            thumbnailCache = [];

            self.slideThumbnailSelected(newIndex); // trigger display of edit form, zoom to map region if applicable
        });
    };

    this.duplicateSlide = function (index) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var newIndex = getNewSlideIndex();
            var slide = findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction('duplicate slide');

                // bump up indexes on subsequent slides to make room for new slide after current one
                _.each(self.getSlideNodeDatas(), function (slideData) {
                    if (slideData.index > index) {
                        diagram.model.setDataProperty(slideData, 'index', slideData.index + 1);
                    }
                });

                // NB: creating a new nodeData object here rather than copying and modifying, to avoid copying $$hashKey (??)
                diagram.model.addNodeData({
                    key: getNewSlideKey(),
                    category: 'slide',
                    index: index + 1,
                    isGroup: false,
                    width: slide.data.width,
                    height: slide.data.height,
                    loc: slide.data.loc,
                    level: 0,
                    children: 0,
                    type: slide.data.type,
                    title: slide.data.title + ' (Copy)',
                    notes: slide.data.notes,
                    checks: slide.data.checks, // clone?
                    hasRegion: slide.data.hasRegion,
                    isSummary: slide.data.isSummary,
                    links: slide.data.links // clone?
                });
                diagram.commitTransaction('duplicate slide');
                thumbnailCache = [];
            }
        });
    };

    this.removeSlide = function (index) {
        $scope.safeApply(function () {
            //console.log('removeSlide: ' + index);
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction('remove slide');
                diagram.model.removeNodeData(slide.data);
                diagram.commitTransaction('remove slide');
            }
            self.currentSlideIndex = null;
            thumbnailCache = [];
            compactSlideIndexes();
        });
    };

    var thumbnailCache = [];

    this.getSlideThumbnail = function (index) {
        return thumbnailCache[index];
    };

    this.createSlideThumbnails = function () {
        _.each(self.getSlideNodeDatas(), function (nd) {
            self.createSlideThumbnail(nd.index);
        });
    };

    this.createSlideThumbnail = function (index) {
        //console.log('createSlideThumbnail');

        var thumbWidth = 1000;
        var thumbHeight = 600;
        var diagram = map.getDiagram();

        var slide = findSlideByIndex(index);
        if (!slide) {
            return '';
        } else if (!slide.data.hasRegion && !slide.data.isSummary) {
            return '';
        } else {
            var db = diagram.documentBounds;
            var sb;
            if (slide.data.isSummary) {
                // for a summary slide we shoot the whole map
                sb = map.safeRect(map.computeMapBounds());
            } else {
                // otherwise just shoot the slide region
                sb = slide.part.actualBounds;
            }

            var imagePosition = new go.Point(sb.x, sb.y);
            //console.log('getSlideThumbnail, slide bounds: ' + sb + ', document bounds: ' + db + ', imagePosition: ' + imagePosition);

            var wScale = thumbWidth / sb.width;
            var hScale = thumbHeight / sb.height;
            var thumbScale = Math.min(wScale, hScale);
            console.log('scale: ' + wScale + ',' + hScale);

            var w = thumbScale * sb.width;
            var h = thumbScale * sb.height;
            //console.log('thumbnail w/h: ' + w + ',' + h);

            // hide slides temporarily while creating thumbnail
            self.isCreatingThumbnail = true;
            diagram.updateAllTargetBindings();

            diagram.scale = thumbScale;

            var imgData = diagram.makeImageData({
                size: new go.Size(w, h),
                position: imagePosition,
                scale: thumbScale
            });

            self.isCreatingThumbnail = false;
            diagram.updateAllTargetBindings();

            thumbnailCache[index] = imgData;

            return imgData;
        }
    };

    // gets a thumbnail of the whole map, for saving (see autosave.js)
    this.getMapThumbnail = function () {

        var diagram = map.getDiagram();
        var sb = map.safeRect(map.computeMapBounds());
        sb.grow(10, 10, 10, 10);
        var w = 150;
        var h = 100;

        // hide slides temporarily while creating thumbnail
        self.isCreatingThumbnail = true;
        diagram.updateAllTargetBindings();

        var imgData = diagram.makeImageData({
            scale: Math.min(h / sb.height, w / sb.width),
            position: new go.Point(sb.x, sb.y),
            size: new go.Size(w, h)
        });

        self.isCreatingThumbnail = false;
        diagram.updateAllTargetBindings();

        return imgData;
    };

    // called via ng-click on thumbnail
    this.slideThumbnailSelected = function (index) {
        //console.log('slideThumbnailSelected: ' + index);
        var diagram = map.getDiagram();
        var slide = findSlideByIndex(index);

        $scope.safeApply(function () {
            // NB: order of statements is important here, as selectSlide can trigger changedSelection with an empty selection sometimes... ??
            selectSlide(index);
            self.currentSlideIndex = index;
            diagram.updateAllTargetBindings(); // show/hide slide nodes - see templates.js: slideTemplate

            if (slide) {
                zoomToSlideInCenter(slide);

                if (self.isPresenting) {
                    self.showTOC = false;
                }
            }
        });
    };

    this.needsNarrowCanvas = function () {
        var slide = findSlideByIndex(self.currentSlideIndex);
        return map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) && slide != null && (slide.data.type == 'TITLE_BODY_MAP' || slide.data.type == 'ACTIVITY_MAP' || slide.data.type == 'MAP_SUMMARY');
    };

    // sets the slide node as selected in the diagram.
    function selectSlide(index) {
        $scope.safeApply(function () {
            //console.log('select slide: ' + index);
            var diagram = map.getDiagram();
            diagram.clearSelection();
            if (index) {
                var slide = findSlideByIndex(index);
                if (slide) {
                    slide.isSelected = true;
                }
            }
            // TODO: scroll to slide?
        });
    }

    this.playSlide = function (index) {
        var diagram = map.getDiagram();
        map.getUi().openTab(map.getUi().TAB_ID_PRESENTER);

        var slides = self.getSlideNodeDatas();
        if (slides.length) {
            self.showTOC = false;
            presentSlide(index);
        }
    };

    // increment is -1 or +1
    this.advanceSlide = function (increment) {
        //console.log('advanceSlide, currentSlideIndex: ' + self.currentSlideIndex);
        $scope.safeApply(function () {
            var slide = findSlideByIndex(self.currentSlideIndex);
            if (slide) {
                self.currentSlideIndex += increment;
                if (self.isPresenting) {
                    presentSlide(self.currentSlideIndex);
                }
            }
        });
    };

    function presentSlide(index) {
        //console.log('presentSlide');
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            if (!slide) {
                return;
            }

            diagram.clearSelection();
            // NB: need to set this after clearSelection, as that will set it to null! (see changedSelection)
            self.currentSlideIndex = index;
            map.setEditingBlocked(true);
            //console.log('presentSlide, index: ' + index + ', slide: ' + slide + ', currentSlideIndex: ' + self.currentSlideIndex);

            maybeInitSlideBlocker();
            var blockerW = self.SLIDE_BLOCKER_WIDTH;

            if (slide.data.hasRegion) {
                zoomToSlideInCenter(slide);

                // show slide blocker
                self.slideBlocker.desiredSize = new go.Size(slide.actualBounds.width + 2 * blockerW, slide.actualBounds.height + 2 * blockerW);
                self.slideBlocker.location = new go.Point(slide.actualBounds.x - blockerW, slide.actualBounds.y - blockerW);
                self.slideBlocker.visible = true;
                //console.log('slideBlocker: ' + self.slideBlocker.actualBounds);
            } else if (slide.data.isSummary) {
                zoomToSlideInCenter(slide);
                self.slideBlocker.visible = false;
            } else {
                map.getUi().resetZoom();
                self.slideBlocker.visible = false;
            }

            self.isPresenting = true;
            $('body').addClass('presenter-playing');

            map.getDiagram().updateAllTargetBindings(); // hide slide nodes - see templates.js: slideTemplate
        });
    }

    // zoom the diagram to show the given slide in the center of the canvas
    function zoomToSlideInCenter(slide) {
        var diagram = map.getDiagram();

        window.setTimeout(function () {

            var halfWidth = slide.data.type != 'MAP_ONLY';
            var zoomRect = self.getLetterboxedRect(slide.actualBounds, halfWidth);
            zoomRect.inflate(zoomRect.width / 10, zoomRect.height / 10);
            diagram.zoomToRect(zoomRect, go.Diagram.Uniform);
        }, 100);
    }

    // Returns a rectangle containing the given rect, but with appropriate width or height added
    // to give it same aspect ratio as the diagram.
    this.getLetterboxedRect = function (rect, halfWidth) {

        // NB: we calculate the aspect ratio when the tab is opened,
        // rather than each time as the diagram size might be changing...
        var dar = halfWidth ? self.diagramAspectRatio / 2 : self.diagramAspectRatio;
        console.log('rect: ' + rect + ', dar: ' + dar);

        var rectAspectRatio = rect.width / rect.height;

        if (dar > rectAspectRatio) {
            // tall skinny rect, short wide target AR, so add side padding to the rect
            var lbw = rect.height * dar; // because lbw / lbh == dar == lbw / rect.height (lbh == rect.height)
            return rect.copy().inflate((lbw - rect.width) / 2, 0); // add half the width difference to each side of the rect
        } else {
            // short wide rect, tall skinny target AR, so add top/bottom padding to the rect
            var lbh = rect.width / dar; // because lbw / lbh == dar == lbh / rect.width (lbw == rect.width)
            return rect.copy().inflate(0, (lbh - rect.height) / 2); // add half the height difference to top/bottom of the rect
        }
    };

    this.stopPresenting = function () {
        $scope.safeApply(function () {
            //console.log('stopPresenting, currentSlideIndex: ' + self.currentSlideIndex);
            var diagram = map.getDiagram();

            if (self.slideBlocker) {
                self.slideBlocker.visible = false;
            }

            //self.currentSlideIndex = null;
            self.isPresenting = false;
            $('body').removeClass('presenter-playing');

            map.getDiagram().updateAllTargetBindings(); // show slide nodes

            diagram.clearSelection();
            map.setEditingBlocked(false);
            //map.getUi().resetZoom();
        });
    };
};

// adjust zooming of map region
//self.windowResized();

},{}],15:[function(require,module,exports){
// goJS templates used in the editor

'use strict';

SandbankEditor.Templates = function (editor, map) {

    var ret = this;

    // constants
    this.groupFillColor = '#f9f9f9';

    this.init = function () {};

    // initialize template-related stuff that depends on the diagram (and therefore can't go in init())
    this.initTemplates = function (diagram) {
        diagram.groupTemplate = ret.groupTemplate;
        diagram.nodeTemplate = ret.slideTemplate;
        diagram.linkTemplate = ret.linkTemplate;
        diagram.linkTemplateMap.add('P', ret.pLinkTemplate);
        diagram.linkTemplateMap.add('D', ret.dLinkTemplate);

        ret.setTemporaryLinkTemplates(diagram.toolManager.linkingTool);
        ret.setTemporaryLinkTemplates(diagram.toolManager.relinkingTool);

        diagram.toolManager.linkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
            ret.handlePortTargeted(diagram.toolManager.linkingTool, realnode, realport, tempnode, tempport, toend);
        };

        diagram.toolManager.relinkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
            ret.handlePortTargeted(diagram.toolManager.relinkingTool, realnode, realport, tempnode, tempport, toend);
        };

        diagram.toolManager.relinkingTool.updateAdornments = function (part) {
            go.RelinkingTool.prototype.updateAdornments.call(this, part);
            var from = part.findAdornment('RelinkFrom');
            var to = part.findAdornment('RelinkTo');
            // if (from)
            //     console.log('relinkfrom: ' + from.part.width);
        };

        diagram.toolManager.linkingTool.linkValidation = ret.validateLink;
        diagram.toolManager.relinkingTool.linkValidation = ret.validateLink;
    };

    // convenient abbreviation for creating templates
    var mk = go.GraphObject.make;

    // DSRP colors (from _variables.scss)
    var colorD = '#f2624c';
    var colorS = '#96c93d';
    var colorR = '#4cbfc2';
    var colorP = '#fbaa36';
    var colorPLight = '#FDDDAF';
    var colorPDark = '#C9882B';

    var eyeSvgPath = 'M 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00c 47.559,94.979, 144.341,160.00, 256.00,160.00c 111.657,0.00, 208.439-65.021, 256.00-160.00 C 464.442,161.021, 367.657,96.00, 256.00,96.00z M 382.225,180.852c 30.081,19.187, 55.571,44.887, 74.717,75.148 c-19.146,30.261-44.637,55.961-74.718,75.149C 344.427,355.257, 300.779,368.00, 256.00,368.00c-44.78,0.00-88.428-12.743-126.225-36.852 C 99.695,311.962, 74.205,286.262, 55.058,256.00c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65 C 130.725,190.866, 128.00,205.613, 128.00,221.00c0.00,70.692, 57.308,128.00, 128.00,128.00s 128.00-57.308, 128.00-128.00c0.00-15.387-2.725-30.134-7.704-43.799 C 378.286,178.39, 380.265,179.602, 382.225,180.852z M 256.00,205.00c0.00,26.51-21.49,48.00-48.00,48.00s-48.00-21.49-48.00-48.00s 21.49-48.00, 48.00-48.00 S 256.00,178.49, 256.00,205.00z';
    var eyeBlockedSvgPath = 'M 419.661,148.208 C 458.483,175.723 490.346,212.754 512.00,256.00 C 464.439,350.979 367.657,416.00 256.00,416.00 C 224.717,416.00 194.604,410.894 166.411,401.458 L 205.389,362.48 C 221.918,366.13 238.875,368.00 256.00,368.00 C 300.779,368.00 344.427,355.257 382.223,331.148 C 412.304,311.96 437.795,286.26 456.941,255.999 C 438.415,226.716 413.934,201.724 385.116,182.752 L 419.661,148.208 ZM 256.00,349.00 C 244.638,349.00 233.624,347.512 223.136,344.733 L 379.729,188.141 C 382.51,198.627 384.00,209.638 384.00,221.00 C 384.00,291.692 326.692,349.00 256.00,349.00 ZM 480.00,0.00l-26.869,0.00 L 343.325,109.806C 315.787,100.844, 286.448,96.00, 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00 c 21.329,42.596, 52.564,79.154, 90.597,106.534L0.00,453.131L0.00,480.00 l 26.869,0.00 L 480.00,26.869L 480.00,0.00 z M 208.00,157.00c 24.022,0.00, 43.923,17.647, 47.446,40.685 l-54.762,54.762C 177.647,248.923, 160.00,229.022, 160.00,205.00C 160.00,178.49, 181.49,157.00, 208.00,157.00z M 55.058,256.00 c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65C 130.725,190.866, 128.00,205.613, 128.00,221.00 c0.00,29.262, 9.825,56.224, 26.349,77.781l-29.275,29.275C 97.038,309.235, 73.197,284.67, 55.058,256.00z';
    var paperclipSvgPath = 'M 348.916,163.524l-32.476-32.461L 154.035,293.434c-26.907,26.896-26.907,70.524,0.00,97.422 c 26.902,26.896, 70.53,26.896, 97.437,0.00l 194.886-194.854c 44.857-44.831, 44.857-117.531,0.00-162.363 c-44.833-44.852-117.556-44.852-162.391,0.00L 79.335,238.212l 0.017,0.016c-0.145,0.152-0.306,0.288-0.438,0.423 c-62.551,62.548-62.551,163.928,0.00,226.453c 62.527,62.528, 163.934,62.528, 226.494,0.00c 0.137-0.137, 0.258-0.284, 0.41-0.438l 0.016,0.017 l 139.666-139.646l-32.493-32.46L 273.35,432.208l-0.008,0.00 c-0.148,0.134-0.282,0.285-0.423,0.422 c-44.537,44.529-116.99,44.529-161.538,0.00c-44.531-44.521-44.531-116.961,0.00-161.489c 0.152-0.152, 0.302-0.291, 0.444-0.423l-0.023-0.03 l 204.64-204.583c 26.856-26.869, 70.572-26.869, 97.443,0.00c 26.856,26.867, 26.856,70.574,0.00,97.42L 218.999,358.375 c-8.968,8.961-23.527,8.961-32.486,0.00c-8.947-8.943-8.947-23.516,0.00-32.46L 348.916,163.524z';

    // footer for image export
    var _exportFooter = null;

    // ------------------- debug info for groups/links --------------------------------

    function groupInfo(obj) {
        return obj.data.text + '\n' + 'object: ' + obj + '\n' + 'key: ' + obj.data.key + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'layout: ' + obj.layout + '\n' + 'data.layout: ' + obj.data.layout + '\n' + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + '\n' + 'freehand position (data.loc): ' + go.Point.parse(obj.data.loc) + '\n' + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + '\n' + 'getScale(): ' + map.getLayouts().getScale(obj) + '\n' + 'isLinkLabel: ' + obj.data.isLinkLabel + '\n' + 'labeledLink: ' + obj.labeledLink + '\n';
    }

    function nodeInfo(obj) {
        return 'object: ' + obj + '\n' + 'key: ' + obj.data.key + '\n' + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + '\n' + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + '\n';
    }

    function linkInfo(obj) {
        var snpos = map.getLayouts().getSameNodesLinkPosition(obj);
        return '' + 'object: ' + obj + '\n' + 'fromNode: ' + obj.fromNode + '\n' + 'toNode: ' + obj.toNode + '\n' + 'labelNodes: ' + obj.labelNodes.count + '\n' + 'labelNodeIsVisible: ' + map.getLayouts().labelNodeIsVisible(obj) + '\n' + 'fromPortId: ' + obj.fromPortId + '\n' + 'toPortId: ' + obj.toPortId + '\n' + 'category: ' + (obj.data ? obj.data.category : '') + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'fromAndToNodesAreVisible: ' + map.getLayouts().fromAndToNodesAreVisible(obj) + '\n' + 'curve: ' + obj.curve + '\n' + 'curviness: ' + obj.curviness + '\n' + 'fromEndSegmentLength: ' + Math.round(obj.fromEndSegmentLength) + '\n' + 'toEndSegmentLength: ' + Math.round(obj.toEndSegmentLength) + '\n' + 'sameNodesLinkPosition: ' + snpos.index + ' of ' + snpos.count + '\n' +
        //+ 'geometry: ' + obj.geometry + "\n" +
        'getLinkStrokeWidth: ' + map.getLayouts().getLinkStrokeWidth(obj) + '\n';
    }

    // -----------------------------------------------------------------------------

    // NB: these are here because they are about colors;
    // similar functions that are scale-related are in layouts.js...
    function getGroupSelectionStroke(obj) {
        if (obj.isSelected) {
            if (map.getPerspectives().isInPEditorMode()) return colorP;else if (map.getPerspectives().isInDEditorMode()) return colorD;else return '#000';
        } else {
            return '#000';
        }
    }

    // OK, this isn't about colors, but it wants to be near the one above...
    function getGroupSelectionStrokeWidth(obj) {
        return obj.isSelected ? 3 : 1;
    }

    function getRLinkSelectionStroke(obj) {
        if (obj.isSelected || obj == map.getUi().mouseOverLink) {
            return colorR; // TODO: can P links be selected?
        } else {
            return '#000';
        }
    }

    // -----------------------------------------------------------------------------

    // callbacks to determine when the corners should be visible

    function showDCorner(group) {
        if (map.getPerspectives().isDEditorThing(group)) {
            // mark distinction thing
            return true;
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || editor.isTouchDevice() && group.isSelected || canDragSelectionToBecomeSistersOf(group, false) && (!map.getUi().dragTargetPosition || cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
        }
    }

    function showSCorner(group) {
        if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || editor.isTouchDevice() && group.isSelected || canDragSelectionToBecomeChildrenOf(group, false) && (!map.getUi().dragTargetPosition || cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
        }
    }

    function showRCorner(group) {
        if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || editor.isTouchDevice() && group.isSelected; // show corners on mouseover
        }
    }

    function showPCorner(group) {
        if (map.getPerspectives().isPEditorPoint(group)) {
            return true; // mark perspective point
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || editor.isTouchDevice() && group.isSelected; // show corners on mouseover
        }
    }

    // when a P link should be visible

    this.showPLink = function (link) {
        var mode = map.getUi().getMapEditorOptions().perspectiveMode;
        if (map.getPerspectives().isPEditorPoint(link.fromNode)) {
            // show P's when this link is from the current Point
            return true;
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show P's for non-Point things, even on mouseover
            return false;
        } else {
            return (mode == 'lines' || mode == 'both') && (link.fromNode == map.getUi().mouseOverGroup || map.pIsExpanded(link.fromNode));
        }
    };

    this.showPDot = function (link) {
        return true; // map.getUi().getMapEditorOptions().perspectiveMode != 'both';
    };

    // these functions are used in two modes:
    // 1. with isDropping == false, to highlight drop targets based on map.getUi().dragTargetGroup and map.getUi().dragTargetPosition,
    //    which are set on mouseDragEnter/mouseDragleave
    // 2. with isDropping == true, on drop, when the above indicators have gone away, but we know what the dropped
    //    and target groups are, and we want to know what the drop should do.

    function canDragSelectionToBecomeSistersOf(group, isDropping) {
        return (group == map.getUi().dragTargetGroup || isDropping) && map.thingsSelectedAreDescendantsOf(group);
    }

    function canDragSelectionToBecomeChildrenOf(group, isDropping) {
        return (group == map.getUi().dragTargetGroup || isDropping) && !map.thingsSelectedIncludeSlide() && !map.thingsSelectedAreDescendantsOf(group);
    }

    // side is map.LEFT or map.RIGHT
    function canDragSelectionToBecomeOrderedSisterOf(targetGroup, side, isDropping) {
        // must be dragging single group
        var draggedGroup = map.getUniqueThingSelected();
        if (!draggedGroup) {
            return false;
        }

        // dragged and target must be Sisters in inventory layout
        return (targetGroup == map.getUi().dragTargetGroup || isDropping) && (map.getUi().dragTargetPosition == side || isDropping) && map.getLayouts().areSistersInInventoryLayout(draggedGroup, targetGroup);
    }

    function cannotDragSelectionToBecomeOrderedSisterOf(targetGroup) {
        return !canDragSelectionToBecomeOrderedSisterOf(targetGroup, map.LEFT) && !canDragSelectionToBecomeOrderedSisterOf(targetGroup, map.RIGHT);
    }

    // handle drop on one of the three target regions (top, middle, bottom)
    // side is map.LEFT or map.RIGHT
    function handleGroupMouseDrop(event, dropTarget, side) {
        //console.log('dragAboveTarget.mouseDrop, target: ' + dropTarget + ', part: ' + dropTarget .part + ', show: ' + show);
        if (side && canDragSelectionToBecomeOrderedSisterOf(dropTarget.part, side, true)) {
            map.addSelectedThingAsOrderedSisterOf(dropTarget.part, side);
        } else if (canDragSelectionToBecomeSistersOf(dropTarget.part, true)) {
            map.addSelectedThingsAsSistersOf(dropTarget.part);
        } else if (canDragSelectionToBecomeChildrenOf(dropTarget.part, true)) {
            map.addSelectedThingsAsChildrenOf(dropTarget.part);
        }
    }

    // when to show the R-thing knob on a link
    function showKnob(link) {
        return link == map.getUi().mouseOverLink;
    }

    // ---------------- components for main group template ------------------

    function dFlagMarker() {
        return mk(go.Shape, new go.Binding('fill', '', function (obj) {
            return obj.data.dflag ? '#000' : null;
        }).ofObject(), {
            name: 'dflag',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(18, 18),
            geometry: go.Geometry.parse('F M0 1 L0 18 L18 0 L1 0z', true),
            cursor: 'pointer',
            pickable: false,
            stroke: null
        });
    }

    // "D" corner (top left, red)
    function cornerD() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showDCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerD',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            opacity: 0
        }, mk(go.Shape, {
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            geometry: go.Geometry.parse('F M0 1 L0 50 L50 0 L1 0z', true),
            fill: colorD,
            stroke: null,
            cursor: 'pointer',
            click: function click(event, target) {
                //console.log('click, control:' + event.control + ', alt:' + event.alt + ', meta:' + event.meta);
                if (event.alt) {
                    // NB: a side effect of this will be to select just this group,
                    // which would not happen otherwise via control-click
                    map.getPerspectives().setDEditorThing(target.part);
                } else {
                    // handle single or double click
                    map.getUi().handleCornerClick('D', target.part);
                }
            },
            contextClick: function contextClick(event, target) {
                //console.log('contextClick:' + event);
                map.toggleDFlag(target.part);
            }
        }), mk(go.TextBlock, {
            text: 'D',
            stroke: 'white',
            font: '9px sans-serif',
            position: new go.Point(12, 15),
            pickable: false
        }));
    }

    // "S" corner (bottom left, green)
    function cornerS() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showSCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerS',
            position: new go.Point(0, 50),
            desiredSize: new go.Size(50, 50),
            opacity: 0
        }, mk(go.Shape, {
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            geometry: go.Geometry.parse('F M0 0 L0 49 L1 50 L50 50z', true),
            fill: colorS,
            stroke: null,
            cursor: 'pointer',
            click: function click(event, target) {
                // handle single or double click
                map.getUi().handleCornerClick('S', target.part);
            }
        }),
        // expansion indicator
        mk(go.Shape, new go.Binding('position', '', function (obj) {
            return obj.isSubGraphExpanded ? new go.Point(4, 43) : new go.Point(5, 38);
        }).ofObject(), new go.Binding('angle', '', function (obj) {
            return obj.isSubGraphExpanded ? 90 : 0;
        }).ofObject(), {
            desiredSize: new go.Size(5, 10),
            geometry: go.Geometry.parse('F M0 0 L5 5 L0 10z', true),
            fill: '#333',
            stroke: null,
            cursor: 'pointer',
            pickable: false
        }), mk(go.TextBlock, {
            text: 'S',
            stroke: 'white',
            font: '9px sans-serif',
            position: new go.Point(12, 28),
            pickable: false
        }));
    }

    // show only when system is collapsed
    function sCollapsedMarker() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return !showSCorner(obj) && obj.memberParts.count > 0 && !obj.isSubGraphExpanded;
        }).ofObject(), {
            position: new go.Point(5, 88),
            desiredSize: new go.Size(5, 10),
            geometry: go.Geometry.parse('F M0 0 L5 5 L0 10z', true),
            fill: '#333',
            stroke: null,
            cursor: 'pointer',
            pickable: false
        });
    }

    // "R" corner (bottom right, blue)
    function cornerR() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showRCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerR',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            opacity: 0
        }, mk(go.Shape, {
            name: 'cornerRShape',
            // NB: this corner is done differently from the others:
            // 1. the overall shape is the size of the whole square, so the port falls in the middle instead of the corner;
            // 2. the geometry traces around the edges of the whole square, because otherwise the link line will
            //    show inside the main square if it's crossing one of the other 3 quadrants
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            geometry: go.Geometry.parse('F' + 'M0 0 L0 100 ' + // top left to bottom left
            'L99 100 L100 99 L 100 0 ' + // bottom/right sides (round bottom right corner)
            'L 0 0 L 100 0 ' + // back to top left then top right
            'L 100 50 L 50 100 ' + // to midpoint of right side, midpoint of bottom side
            'L0 100z', // bottom left, return home
            true),
            fill: colorR,
            stroke: null,
            cursor: 'pointer',

            portId: 'R',
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: true,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: true,
            click: function click(event, target) {
                // handle single or double click
                map.getUi().handleCornerClick('R', target.part);
            }
        }), mk(go.TextBlock, {
            text: 'R',
            stroke: 'white',
            font: '9px sans-serif',
            pickable: false,
            position: new go.Point(82, 78)
        }));
    }

    function attachmentPaperClip() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return obj.data.attachments && obj.data.attachments !== undefined && obj.data.attachments.length > 0;
        }).ofObject(), new go.Binding('geometry', '', function (obj) {
            return go.Geometry.parse(paperclipSvgPath, true);
        }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
            return new go.Size(512, 512); // NB: the two icons don't scale to the same proportions for some reason - ??
        }).ofObject(), {
            position: new go.Point(46, 85),
            scale: 0.02,
            stroke: '#000',
            fill: '#000',
            click: function click(event, target) {
                console.log('clip clicked');
                map.getUi().toggleTab(map.getUi().TAB_ID_ATTACHMENTS);
            }
        });
    }

    function pEyeball() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return map.getPerspectives().isPerspectivePoint(obj);
        }).ofObject(), new go.Binding('geometry', '', function (obj) {
            return go.Geometry.parse(map.pIsExpanded(obj) ? eyeSvgPath : eyeBlockedSvgPath, true);
        }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
            return new go.Size(512, map.pIsExpanded(obj) ? 440 : 512); // NB: the two icons don't scale to the same proportions for some reason - ??
        }).ofObject(), {
            position: new go.Point(87, 4),
            scale: 0.02,
            stroke: '#000',
            fill: '#000',
            pickable: false
        });
    }

    // P expansion indicator - this shows when the P corner is not visible, and only if the thing is a perspective point
    function pointMarker() {
        return pEyeball();
    }

    // P view indicator
    function viewMarker() {
        return mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
            return true;
        }).ofObject(), new go.Binding('fill', '', function (obj) {
            return getViewMarkerFill(obj);
        }).ofObject(), {
            position: new go.Point(0, 0),
            height: 18,
            width: 100,
            stroke: null
        });
    }

    function getViewMarkerFill(obj) {
        var weight = map.getPerspectives().getPerspectiveViewWeight(obj);

        if (weight == 3) {
            return colorPDark;
        } else if (weight == 2) {
            return colorP;
        } else if (weight == 1) {
            return colorPLight;
        } else {
            return 'transparent';
        }
    }

    // "P" corner (top right, orange)
    function cornerP() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showPCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerP',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            opacity: 0
        }, mk(go.Shape, {
            name: 'cornerPShape',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            // NB: this geometry covers the whole square; see note above for cornerR
            geometry: go.Geometry.parse('F' + 'M0 0 L0 100 L100 100' + // top left to bottom left to bottom right
            'L100 1 L99 0 L0 0' + // right/top sides (round top right corner)
            'L 50 0 L 100 50 ' + // to midpoint of top side, midpoint of right side
            'L100 100 0 100z', // bottom right, bottom left, return home
            true),

            fill: colorP,
            stroke: null,
            cursor: 'pointer',

            portId: 'P',
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: false,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: false,
            toMaxLinks: 1,
            click: function click(event, target) {
                // handle single or double click
                map.getUi().handleCornerClick('P', target.part);
            }
        }), pEyeball(), // P expansion indicator
        mk(go.TextBlock, {
            text: 'P',
            stroke: 'white',
            font: '9px sans-serif',
            pickable: false,
            position: new go.Point(81, 15)
        }));
    }

    function mainBorder() {
        return mk(go.Shape, 'Border', new go.Binding('stroke', '', getGroupSelectionStroke).ofObject(), new go.Binding('strokeWidth', '', getGroupSelectionStrokeWidth).ofObject(), {
            name: 'mainarea',
            position: new go.Point(0, 0),
            height: 100,
            width: 100,
            fill: null,
            //portId: "",
            cursor: 'pointer',
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: true,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: true
        });
    }

    // --------- handlers for mouse drag/drop actions on groups, which need to be replicated on different target parts -------

    // position is map.LEFT, null, or map.RIGHT
    function getGroupMouseDragEnterHandler(position) {
        return function (event, target, obj2) {
            //console.log('mouseDragEnter, e.dp: ' + event.documentPoint + ', target.part: ' + target.part + ', target bounds: ' + target.actualBounds);
            map.getUi().dragTargetGroup = target.part;
            map.getUi().dragTargetPosition = position;
            map.getDiagram().updateAllTargetBindings();
        };
    }

    var groupMouseDragLeaveHandler = function groupMouseDragLeaveHandler(event, target, obj2) {
        map.getUi().dragTargetGroup = null;
        map.getUi().dragTargetPosition = null;
        map.getDiagram().updateAllTargetBindings();
    };

    function getGroupMouseDropHandler(position) {
        return function (event, dropTarget) {
            handleGroupMouseDrop(event, dropTarget, position);
        };
    }

    var groupClickHandler = function groupClickHandler(event, target) {
        // handle single or double click
        map.getUi().handleCornerClick('', target);
    };

    // --------------- targets for dragging to D or S -----------------

    function dragAboveTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(map.LEFT),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(map.LEFT),
            click: groupClickHandler
        },
        // drag target region
        mk(go.Shape, 'Rectangle', {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            cursor: 'pointer',
            stroke: null,
            fill: 'transparent'
        }),
        // drag indicator bar
        mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
            return canDragSelectionToBecomeOrderedSisterOf(obj.part, map.LEFT, false);
        }).ofObject(), {
            position: new go.Point(0, 0),
            height: 10,
            width: 100,
            stroke: null,
            fill: '#000'
        }));
    }

    function dragIntoTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 25),
            height: 50,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(null),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(null),
            click: groupClickHandler
        }, mk(go.Shape, 'Rectangle', {
            position: new go.Point(0, 0),
            height: 50,
            width: 100,
            cursor: 'pointer',
            stroke: null,
            fill: 'transparent'
        }));
    }

    function dragBelowTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 75),
            height: 25,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(map.RIGHT),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(map.RIGHT),
            click: groupClickHandler
        },
        // drag target region
        mk(go.Shape, 'Rectangle', {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            cursor: 'pointer',
            stroke: null,
            fill: 'transparent'
        }),
        // drag indicator bar
        mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
            return canDragSelectionToBecomeOrderedSisterOf(obj.part, map.RIGHT, false);
        }).ofObject(), {
            position: new go.Point(0, 15),
            height: 10,
            width: 100,
            stroke: null,
            fill: '#000'
        }));
    }

    // Returns the TextBlock for the group title, for use in the main group template, inside the box.
    function groupInternalTextBlock() {
        return mk(go.Panel, go.Panel.Horizontal, {
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100)
        }, mk(go.TextBlock, new go.Binding('text', 'text').makeTwoWay(), new go.Binding('visible', '', function (group) {
            // always show text inside box for R-things, because external text will throw off layout
            return map.getLayouts().isNotWithinInventoryLayout(group) || map.getLayouts().isRThingWithinInventoryLayout(group);
        }).ofObject(), {
            width: 80,
            margin: 10,
            alignment: go.Spot.Center,
            textAlign: 'center',
            cursor: 'move',
            font: '10px sans-serif',
            isMultiline: true,
            wrap: go.TextBlock.WrapDesiredSize,

            mouseDragEnter: getGroupMouseDragEnterHandler(null),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(null),
            click: groupClickHandler,
            contextClick: function contextClick(event, target) {
                if (event.control) {
                    console.log(groupInfo(target.part));
                }
            }
        }));
    }

    // Returns a TextBlock for the group title, for use in the main group template, on the left or right.
    // visibleFn is a callback to be bound to the visibility attribute of the TextBlock.
    // textAlign is 'left' or 'right'.
    function groupExternalTextBlock(visibleFn, textAlign) {
        return mk(go.TextBlock, new go.Binding('text', 'text').makeTwoWay(), new go.Binding('visible', '', visibleFn).ofObject(), new go.Binding('scale', '', map.getLayouts().getExternalTextScale).ofObject(), {
            name: 'externaltext-' + textAlign, // NB: this screws up layouts for some reason - ??
            textAlign: textAlign,
            margin: 5,
            font: '10px sans-serif',
            isMultiline: true,
            click: groupClickHandler
        });
    }

    // -------------- group/Thing template --------------------

    this.groupTemplate = mk(go.Group, go.Panel.Vertical, new go.Binding('layout', 'layout', function (layoutName) {
        return map.getLayouts().getLayout(layoutName);
    }), new go.Binding('movable', '', function (obj) {
        return !obj.isLinkLabel;
    }).ofObject(), new go.Binding('isSubGraphExpanded', 'sExpanded'),
    // dim the thing if it's being dragged over another thing (drop to sister/child)
    new go.Binding('opacity', '', function (obj) {
        return obj.isSelected && map.getUi().dragTargetGroup ? 0.25 : 1;
    }).ofObject(), {
        locationObjectName: 'mainpanel',
        locationSpot: go.Spot.TopLeft,
        selectionAdorned: false,
        isSubGraphExpanded: true,
        layerName: 'Foreground',
        // highlight corners
        mouseEnter: function mouseEnter(event, target, obj2) {
            map.getUi().mouseOverGroup = target;
            map.getDiagram().updateAllTargetBindings();
        },
        // unhighlight corners
        mouseLeave: function mouseLeave(event, target, obj2) {
            map.getUi().mouseOverGroup = null;
            map.getDiagram().updateAllTargetBindings();
        }
        // containingGroupChanged: function(part, oldgroup, newgroup) {
        //     map.getDiagram().model.setDataProperty(part.data, 'level', map.computeLevel(part));
        //     //part.updateTargetBindings();  
        // }
    }, mk(go.Panel, go.Panel.Horizontal, groupExternalTextBlock(map.getLayouts().showLeftTextBlock, 'right'), mk(go.Panel, go.Panel.Position, {
        name: 'mainpanel'
    }, new go.Binding('scale', '', map.getLayouts().getScale).ofObject(),
    // drag area
    mk(go.Shape, 'Rectangle', {
        name: 'dragarea',
        position: new go.Point(0, 0),
        width: 100,
        height: 100,
        fill: ret.groupFillColor,
        stroke: null,
        cursor: 'move',
        // show debug info
        contextClick: function contextClick(event, target) {
            if (event.control) {
                console.log(groupInfo(target.part));
            }
        }
    }), mk(go.Panel, go.Panel.Position, viewMarker(), dragAboveTarget(), dragIntoTarget(), dragBelowTarget(), groupInternalTextBlock(), cornerD(), dFlagMarker(), cornerS(), sCollapsedMarker(), cornerR(), pointMarker(), cornerP(), attachmentPaperClip(), mainBorder())), groupExternalTextBlock(map.getLayouts().showRightTextBlock, 'left')),

    // the placeholder normally holds the child nodes, but we just use a dummy placeholder
    mk(go.Shape, {
        name: 'placeholder',
        fill: 'transparent',
        stroke: null,
        desiredSize: new go.Size(0, 0)
    }));

    // ------------------- link template ---------------------------

    this.linkTemplate = mk(go.Link, {
        selectionAdorned: false,
        layerName: '',
        routing: go.Link.Normal,
        relinkableFrom: true,
        relinkableTo: true,
        mouseEnter: function mouseEnter(event, target, obj2) {
            map.getUi().mouseOverLink = target;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseLeave: function mouseLeave(event, target, obj2) {
            map.getUi().mouseOverLink = null;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDragEnter: function mouseDragEnter(event, target, dragObject) {
            map.getUi().mouseOverLink = target;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDragLeave: function mouseDragLeave(event, dropTarget, dragObject) {
            map.getUi().mouseOverLink = null;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDrop: function mouseDrop(event, dropTarget) {
            var parts = map.getDiagram().selection;
            if (parts && parts.count == 1 && parts.first() instanceof go.Group) {
                map.addThingAsRThing(parts.first(), dropTarget);
            }
        },
        doubleClick: function doubleClick(event, target) {
            map.createRThing(target);
        },
        contextClick: function contextClick(event, target) {
            if (event.control) {
                console.log(linkInfo(target));
            }
        }
    }, mk(go.Shape, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding('strokeWidth', '', map.getLayouts().getLinkStrokeWidth).ofObject(), {
        name: 'LINKSHAPE'
    }),

    // show to/from arrowheads based on link "type" attribute
    mk(go.Shape, {
        fromArrow: 'Backward'
    }, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t == 'from' || t == 'toFrom';
    })), mk(go.Shape, {
        toArrow: 'Standard'
    }, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t == 'to' || t == 'toFrom';
    })), mk(go.Panel, go.Panel.Auto, // link label "knob"
    new go.Binding('opacity', '', function (obj) {
        return showKnob(obj) ? 1 : 0;
    }).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), mk(go.Shape, {
        figure: 'Ellipse',
        fill: colorD,
        stroke: colorD,
        width: 12,
        height: 12
    })));

    this.pLinkTemplate = mk(go.Link, new go.Binding('opacity', '', function (obj) {
        return ret.showPLink(obj) ? 1 : 0;
    }).ofObject(), {
        selectionAdorned: false,
        layerName: 'Background', // make P links fall behind R links
        routing: go.Link.Normal,
        contextClick: function contextClick(event, target) {
            if (event.control) {
                console.log(linkInfo(target));
            }
        }
    }, mk(go.Shape, new go.Binding('strokeWidth', '', map.getLayouts().getLinkStrokeWidth).ofObject(), {
        name: 'LINKSHAPE',
        stroke: colorPLight,
        fill: colorPLight
    }), mk(go.Shape,
    // new go.Binding('visible', '', function(obj) {
    //     return (self.showPDot(obj) ? 1 : 0);
    // }).ofObject(),
    new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), {
        toArrow: 'Circle',
        stroke: colorPLight,
        fill: colorPLight
    }));

    this.dLinkTemplate = mk(go.Link, {
        selectable: false
    }, mk(go.Shape, {
        name: 'LINKSHAPE',
        stroke: null
    }));

    // ----------- temporary link/node templates, for use when dragging to create R/P lines -------------

    // define initial temporary link templates - these will be modified when handlePortTargeted is called
    this.setTemporaryLinkTemplates = function (tool) {
        tool.temporaryLink = makeTemporaryLinkTemplate();
        tool.temporaryFromNode = makeTemporaryNodeTemplate();
        tool.temporaryToNode = makeTemporaryNodeTemplate();
    };

    function makeTemporaryLinkTemplate() {
        return mk(go.Link, {
            layerName: 'Tool'
        }, mk(go.Shape, {
            name: 'linkshape',
            strokeWidth: 2
        }));
    }

    function makeTemporaryNodeTemplate() {
        return mk(go.Group, {
            layerName: 'Tool'
        }, mk(go.Shape, 'Border', {
            name: 'border',
            strokeWidth: 3,
            fill: null
        }));
    }

    // change color and portId of temporary link templates based on the type of link being created/relinked
    this.handlePortTargeted = function (tool, realnode, realport, tempnode, tempport, toend) {
        // console.log('portTargeted, realport: ' + (realport ? realport.name : '') + ', tempport: ' + (tempport ? tempport.name : '')
        //     + ', originalFromPort: ' + (ltool.originalFromPort ? ltool.originalFromPort.name : '') + ', originalToPort: ' + ltool.originalToPort);

        var linkShape = tool.temporaryLink.findObject('linkshape');
        var fromBorder = tool.temporaryFromNode.findObject('border');
        var toBorder = tool.temporaryToNode.findObject('border');

        if (tool.originalFromPort && tool.originalFromPort.name == 'cornerPShape') {
            linkShape.stroke = colorP;
            fromBorder.stroke = colorP;
            toBorder.stroke = colorP;
            fromBorder.portId = 'P';
            toBorder.portId = 'P';
        } else if (tool.originalFromPort && tool.originalFromPort.name == 'cornerRShape') {
            linkShape.stroke = colorR;
            fromBorder.stroke = colorR;
            toBorder.stroke = colorR;
            fromBorder.portId = 'R';
            toBorder.portId = 'R';
        }
        tempnode.scale = map.getLayouts().getScale(realnode);
    };

    // prevent duplicate 'P' links in the same direction between the same two things
    this.validateLink = function (fromNode, fromPort, toNode, toPort) {
        // the P port is on top of the R port, so both P and R links get the toPort set to R by default.
        if (fromPort.portId == 'P') {
            // NB: findLinksTo would be simpler, but it doesn't seem to work... (?)
            var pLinks = toNode.findLinksBetween(fromNode, 'P', 'P');
            //console.log('validateLink, pLinks from ' + fromNode + ':' + fromPort + ' to ' + toNode + ':' + toPort + ' = ' + pLinks.count);
            if (pLinks.count) {
                while (pLinks.next()) {
                    var pLink = pLinks.value;
                    if (pLink.fromNode == fromNode && pLink.toNode == toNode) {
                        return false;
                    }
                }
            }
        }
        return true;
    };

    // ------------------- slide node template ----------------------

    function createSlideResizeHandle(alignment) {
        return mk(go.Shape, new go.Binding('desiredSize', '', function (obj) {
            var slide = obj.adornedObject;
            var size = Math.min(slide.width, slide.height) * 0.05;
            return new go.Size(size, size);
        }).ofObject(), {
            alignment: alignment,
            cursor: 'col-resize',
            fill: 'rgba(251,170,54,1)',
            stroke: null
        });
    }

    this.slideTemplate = mk(go.Node, go.Panel.Auto,
    // NB: unlike groups, slides just use a normal 2-way location binding
    new go.Binding('location', 'loc', go.Point.parse).makeTwoWay(go.Point.stringify), new go.Binding('width', 'width').makeTwoWay(), new go.Binding('height', 'height').makeTwoWay(), new go.Binding('visible', '', function (obj) {
        return obj.data.hasRegion && map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) && !map.getPresenter().isPresenting && !map.getPresenter().isCreatingThumbnail && map.getPresenter().currentSlideIndex == obj.data.index;
    }).ofObject(), {
        locationSpot: go.Spot.TopLeft,
        selectionAdorned: false,
        resizable: true,
        resizeAdornmentTemplate: mk(go.Adornment, 'Spot', mk(go.Placeholder), // takes size and position of adorned object                   
        createSlideResizeHandle(go.Spot.TopLeft), createSlideResizeHandle(go.Spot.Top), createSlideResizeHandle(go.Spot.TopRight), createSlideResizeHandle(go.Spot.Right), createSlideResizeHandle(go.Spot.BottomRight), createSlideResizeHandle(go.Spot.Bottom), createSlideResizeHandle(go.Spot.BottomLeft), createSlideResizeHandle(go.Spot.Left)),
        padding: 0,
        contextClick: function contextClick(event, target) {
            console.log(nodeInfo(target.part));
        }
    }, mk(go.Shape, 'Rectangle', {
        name: 'slideborder',
        fill: 'rgba(251,170,54,.1)',
        stroke: null
    }));

    // ------------------- export footer ----------------------

    // NB: this is not a template per se, in that it is added to the diagram
    // statically, rather than being bound to something in the model.
    // But we put it here because it is about creating parts and stuff.

    function createExportFooter() {
        return mk(go.Node, go.Panel.Spot, {
            layerName: 'Foreground',
            location: new go.Point(0, 0),
            scale: 1,
            opacity: 0,
            pickable: false,
            selectable: false
        }, mk(go.Shape, 'Rectangle', {
            name: 'rectangle',
            height: 60,
            fill: null,
            stroke: null
        }), mk(go.Picture, {
            source: 'assets/img/metamap-logo-50.png',
            alignment: go.Spot.TopLeft,
            alignmentFocus: go.Spot.TopLeft,
            width: 195,
            height: 50
        }), mk(go.TextBlock, {
            text: 'metamap.cabreraresearch.org',
            alignment: go.Spot.BottomLeft,
            alignmentFocus: go.Spot.BottomLeft,
            width: 200
        }), mk(go.TextBlock, {
            name: 'mapTitle',
            text: '',
            textAlign: 'right',
            alignment: go.Spot.TopRight,
            alignmentFocus: go.Spot.TopRight,
            width: 300
        }), mk(go.TextBlock, {
            name: 'authorName',
            text: '',
            textAlign: 'right',
            alignment: go.Spot.BottomRight,
            alignmentFocus: go.Spot.BottomRight,
            width: 300
        }));
    }

    // creates or refreshes the footer logo/text that is displayed in the image export
    this.addExportFooter = function () {
        if (!_exportFooter) {
            _exportFooter = createExportFooter();
            map.getDiagram().add(_exportFooter);
        }
    };

    this.showExportFooter = function () {
        var rect = map.computeMapBounds();
        // put footer at least 100 px below bottom of map; make it at least 500px wide
        var x = rect.x;
        var y = rect.y + rect.height + Math.max(100, rect.height / 5);
        var w = Math.max(500, rect.width);
        //console.log('showExportFooter, bounds rect: ' + rect + ', w: ' + w);
        _exportFooter.location = new go.Point(x, y);
        _exportFooter.findObject('rectangle').width = w;
        _exportFooter.findObject('mapTitle').text = 'Map Title: ' + editor.mapTitle;
        _exportFooter.findObject('authorName').text = 'Author: ' + editor.userName;
        _exportFooter.opacity = 1;
        _exportFooter.invalidateLayout();
    };

    this.hideExportFooter = function () {
        _exportFooter.opacity = 0;
    };
};
// show corners on mouseover
// drag to D (make it sisters)
// show corners on mouseover
// drag to S (make it children)

},{}],16:[function(require,module,exports){
'use strict';

SandbankEditor.UI = function ($scope, map) {

    var self = this;

    // ----------- tab ("slider") IDs - tabs are rendered in views/maps/_form --------------
    //this.TAB_ID_HISTORY = 'history-tab';
    this.TAB_ID_PRESENTER = 'presenter-tab';
    this.TAB_ID_ANALYTICS_MAP = 'analytics-tab-map';
    this.TAB_ID_ANALYTICS_THING = 'analytics-tab-thing';
    this.TAB_ID_PERSPECTIVES = 'perspectives-tab';
    this.TAB_ID_DISTINCTIONS = 'distinctions-tab';
    this.TAB_ID_ATTACHMENTS = 'attachments-tab';
    this.TAB_ID_GENERATOR = 'generator-tab';
    this.TAB_ID_STANDARDS = 'standards-tab';

    this.init = function () {};

    // ------------ editor options for map/user ----------

    var mapEditorOptions = {};

    var defaultEditorOptions = {
        // noArrows, to, from, toFrom
        defaultRelationshipDirection: 'noArrows',
        // left, right, stacked, freehand
        defaultThingLayout: 'left',
        // lines, spotlight, both
        perspectiveMode: 'lines'
    };

    // called when map is loaded to set stored options for map
    this.setMapEditorOptions = function (options) {
        mapEditorOptions = options;
    };

    // returns appropriate values from the user profile or the default options if options are not set for the map
    this.getMapEditorOptions = function () {
        var profileOptions = $scope.userProfile ? $scope.userProfile.editorOptions : null;
        var vals = [mapEditorOptions, profileOptions, defaultEditorOptions];
        mapEditorOptions = _.find(vals, function (val) {
            return !_.isEmpty(val);
        });
        return mapEditorOptions;
    };

    // saves default options for the user (map options are saved in autosave.js)
    function saveUserEditorOptions(options) {
        var data = {
            user: {
                editor_options: JSON.stringify(options)
            }
        };

        startSpinner();
        $http.put('/users/' + $scope.userId + '.json', data).then(function (response) {
            stopSpinner();
        }, function () {
            stopSpinner();
            $scope.profileEditStatus = 'Could not save editor options';
        });
    }

    // options modal

    $scope.editorOptions = new SandbankEditorOptions($scope);

    this.editOptions = function () {
        $scope.editorOptions.openModal(mapEditorOptions, function (options) {
            // onSaveDefaults
            saveUserEditorOptions(options);
        }, function (options) {
            // onUpdate
            mapEditorOptions = options;
            map.getAutosave().saveNow('edit_options');
        });
    };

    // ------------ state model ----------

    this.state = {};

    var defaultState = {
        showNavigator: false,
        currentTab: null,
        perspectivePointKey: null,
        distinctionThingKey: null
    };

    this.setStateData = function (data) {};

    // TODO: Save state more frequently?? Currently it is only saved when autosave is triggered by other actions...

    this.getStateData = function () {
        return self.state;
    };

    // ----------- temporary state flags ------------

    this.zoomingToRegion = false;

    this.mouseOverGroup = null;
    this.mouseOverLink = null;

    this.dragTargetGroup = null;
    this.dragTargetPosition = null;

    this.helpTip = null;

    // ----------- handle bottom tabs ("sliders") -------------

    // in the following functions, ID is e.g. 'history-tab' (ID of one of the .bottom-tab's)

    // this is called by map.currentTabChanged, which is triggered by a $scope.$watch
    this.currentTabChanged = function (newValue, oldValue) {
        //console.log('ui, currentTabChanged: ' + newValue);
        self.state.currentTab = newValue;
    };

    this.currentTabIs = function (tabID) {
        return $scope.currentTab == tabID;
    };

    this.openTab = function (tabID) {};

    this.closeTab = function (tabID) {};

    this.disableTab = function (tabID) {
        // prevent opening other tabs when in P or D editor
        if ($scope.currentTab == self.TAB_ID_PERSPECTIVES || $scope.currentTab == self.TAB_ID_DISTINCTIONS) {
            return true;
        }
        return false;
    };

    this.toggleTab = function (tabID) {};

    this.toggleNavigator = function () {};

    this.toggleZoomingToRegion = function () {};

    // ----------------- zooming functions -------------------

    this.canZoomIn = function () {
        return map.getDiagram().scale < 32;
    };

    this.canZoomOut = function () {
        return map.getDiagram().scale > 0.25;
    };

    this.zoomIn = function () {
        var diagram = map.getDiagram();
        if (diagram.scale < 32) {
            var vb = diagram.viewportBounds.copy();
            diagram.scale = diagram.scale * 2;
            diagram.centerRect(vb);
        }
    };

    this.zoomOut = function () {
        var diagram = map.getDiagram();
        if (diagram.scale > 0.25) {
            var vb = diagram.viewportBounds.copy();
            diagram.scale = diagram.scale / 2;
            diagram.centerRect(vb);
        }
    };

    this.maybeZoomToRegion = function () {
        var diagram = map.getDiagram();
        // this flag is set by the toolbar button
        if (self.zoomingToRegion) {
            self.zoomingToRegion = false;
            console.log('zoomToRegion, selection count: ' + diagram.selection.count);
            var rect = diagram.computePartsBounds(diagram.selection);
            diagram.zoomToRect(rect);
        }
        //$scope.safeApply();
    };

    this.resetZoom = function () {
        var diagram = map.getDiagram();
        //var rect = diagram.computePartsBounds(diagram.nodes).copy();
        var rect = map.safeRect(map.computeMapBounds());
        //console.log('resetZoom, bounds: ' + rect);
        if (rect.width) {
            rect.inflate(rect.width / 5, rect.height / 5);
        }
        diagram.zoomToRect(rect);
        diagram.alignDocument(go.Spot.Center, go.Spot.Center);
        if (diagram.scale > 1) {
            diagram.scale = 1;
        }
    };

    // ------------ thing options (layout) ----------------

    this.getSelectedThingsOrDefaultLayout = function () {
        var sl = self.getSelectedThingsLayout();
        if (sl) {
            return sl;
        } else {
            return mapEditorOptions.defaultThingLayout;
        }
    };

    // returns a non-null value only if all selected items are groups with the same layout
    this.getSelectedThingsLayout = function () {
        var diagram = map.getDiagram();
        if (diagram === null || diagram.selection.count < 1) return null;

        var layout = null;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (!it.value instanceof go.Group) return null;
            var group = it.value;
            //console.log('getSelectedThingsLayout, it.value: ' + group);
            var groupLayout = group.data ? group.data.layout : null;
            if (layout !== null && groupLayout != layout) return null;
            layout = groupLayout;
        }
        //console.log('getSelectedThingsLayout: ' + layout);

        return layout;
    };

    // sets the layout of all selected things to the given layout
    this.setSelectedThingsLayout = function (layoutName) {
        var diagram = map.getDiagram();
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Group) {
                var group = it.value;
                diagram.model.setDataProperty(group.data, 'layout', layoutName);
                map.getLayouts().setDescendantLayouts(group, group.data.layout);
                map.refresh();
            }
        }
    };

    // ------------ relationship options (direction) ----------------

    this.getSelectedRelationshipsOrDefaultDirection = function () {
        var sd = self.getSelectedRelationshipsDirection();
        if (sd) {
            return sd;
        } else {
            return mapEditorOptions.defaultRelationshipDirection;
        }
    };

    // returns a non-null value only if all selected items are relationships with the same direction
    this.getSelectedRelationshipsDirection = function () {
        var diagram = map.getDiagram();
        if (diagram === null || diagram.selection.count < 1) return null;

        var type = null;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (!it.value instanceof go.Link) return null;
            var link = it.value;
            var linkType = link.data ? link.data.type : null;
            if (type !== null && linkType != type) return null;
            type = linkType;
        }

        return type;
    };

    // sets the direction of all selected relationships to the given direction
    this.setSelectedRelationshipsDirection = function (direction) {
        var diagram = map.getDiagram();
        //diagram.model.startTransaction("change relationship direction");
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Link) {
                //diagram.model.startTransaction("change link type");
                diagram.model.setDataProperty(it.value.data, 'type', direction);
                //diagram.model.commitTransaction("change link type");
            }
        }
        //diagram.commitTransaction("change relationship direction");
    };

    // ------- handle corner clicks and double clicks --------

    var _cornerClicked = null;
    var _cornerFunction = null;
    var _cornerTimeout = 300;

    this.handleCornerClick = function (corner, thing) {
        //console.log('handleCornerClick: corner = ' + corner + ', cornerClicked = ' + _cornerClicked);
        // assume it's a single click, and set handler
        _cornerFunction = getCornerFunction(corner, 1);
        // already clicked, so it's a double click; change handler
        if (_cornerClicked == corner) {
            _cornerFunction = getCornerFunction(corner, 2);
            console.log('handleCornerClick: double click on ' + corner);
            return;
        }
        // remember that at least one click has happened for the current corner
        _cornerClicked = corner;

        // set timer to invoke whatever handler we have ready to go (unless another click happens within the interval)
        var timer = setTimeout(function () {
            // ding! invoke it
            if (_cornerFunction == self.showCornerTip) {
                _cornerFunction(thing, corner);
            } else {
                _cornerFunction(thing); // don't pass the corner arg to things like createChild that have a different second arg
            }
            // reset handler and clicked flag
            _cornerFunction = getCornerFunction(corner, 1);
            _cornerClicked = null;
        }, _cornerTimeout);
    };

    function getCornerFunction(corner, clicks) {
        if (corner == 'D') {
            return clicks == 1 ? self.showCornerTip : map.createSister;
        } else if (corner == 'S') {
            return clicks == 1 ? map.toggleSExpansion : map.createChild;
        } else if (corner == 'R') {
            return clicks == 1 ? self.showCornerTip : map.createRToSister;
        } else if (corner == 'P') {
            return clicks == 1 ? map.togglePExpansion : map.getPerspectives().setPEditorPoint;
        } else if (corner === '') {
            // click on text
            return clicks == 1 ? self.showCornerTip : editText;
        } else {
            return function () {
                console.log('getCornerFunction: no function found for corner: ' + corner + '!');
            };
        }
    }

    // NB: in this case the thing is actually the TextBox, except in outline layout it is a Panel if the box is double-clicked...
    function editText(thing, corner) {
        if (!$scope.canEdit) {
            return null;
        }

        console.log('editText, thing: ' + thing);
        if (thing instanceof go.Panel) {
            // outline layout
            var part = thing.part;
            console.log('editText, part: ' + part);
            if (part instanceof go.Group && part.data && (part.data.layout == 'left' || part.data.layout == 'right')) {
                var textBlockName = 'externaltext-' + part.data.layout;
                var text = thing.part.findObject(textBlockName);
                if (text) {
                    thing = text;
                }
            }
        }
        map.getDiagram().commandHandler.editTextBlock(thing);
    }

    // ---------------- help tip functions - see also user.js, views/maps/help_tab ---------------

    // shows thingTip or one of the cornerXTips
    this.showCornerTip = function (thing, corner) {
        //console.log('showCornerTip');
        if (corner === '') {
            self.showHelpTip('thingTip');
        } else {
            self.showHelpTip('corner' + corner + 'Tip');
        }
    };

    this.showHelpTip = function (tip) {
        //console.log('showHelpTip: ' + tip);

        // don't show help if in presenter
        if (self.currentTabIs(self.TAB_ID_PRESENTER)) {
            return;
        }

        self.helpTip = tip;
        //$scope.safeApply();
        $('#help-tip').show();

        setTimeout(function () {
            $('#help-tip').fadeOut(500, function () {
                self.helpTip = null;
                //$scope.safeApply();
            });
        }, 5000);
    };

    // ------------ edit map UserTags ---------------

    $scope.tagging = {};

    this.editUserTags = function () {
        $scope.tagging.openModal([$scope.mapId], true, // show description field
        function () {
            map.getAutosave().saveNow('edit_usertags');
        } // on update
        );
    };

    // ------------ edit map sharing ---------------

    $scope.sharing = {};

    this.editMapShares = function () {
        $scope.sharing.openModal([$scope.mapId], function () {} // on update
        );
    };

    // ------------ print/export to image ---------------

    this.printSlides = function () {
        startSpinner();
        map.getPresenter().createSlideThumbnails();
        stopSpinner();
        setTimeout(function () {
            window.print();
        }, 500);
    };

    var MILLION = 1000 * 1000;

    this.exportToImage = function (format) {

        $scope.imageExportLoading = true;
        $('#export-image img').remove();
        map.getTemplates().showExportFooter();

        var rect = map.getDiagram().computePartsBounds(map.getDiagram().nodes).copy();

        var imageMB = rect.width * rect.height * 4 / MILLION; // 4 bytes/pixel
        //console.log('imageMB: ' + imageMB);

        // make the max size of the image 10MB
        // pngSize = imageMB * scale * scale
        // so max scale = sqrt(pngSize / imageMB)
        // These calculations don't seem to be right, but in practice using 500 here
        // we get a scale of 2.43 for an image 19984 x 3424 pixels
        // which results in a file size of 1.88 MB at 32 bits/pixel...
        // OR 28380 x 5196 pixels, scale = 3.41 => file size = 3.49 MB
        var scale = 4;
        if (imageMB) {
            scale = Math.min(4, Math.sqrt(50 / imageMB));
        }

        //console.log('image dimensions: ' + rect.width + ' x ' + rect.height + ', image bytes: ' + (rect.width * rect.height * 4) +
        //        ', imageMB: ' + imageMB + ', scale: ' + scale);

        $scope.showImageExport = true;

        var partsToExport = new go.List();
        partsToExport.addAll(map.getDiagram().nodes);
        partsToExport.addAll(map.getDiagram().links);
        partsToExport.remove(map.getPresenter().slideBlocker);

        var doImage = $timeout(function () {
            var img = map.getDiagram().makeImage({
                parts: partsToExport,
                maxSize: new go.Size((rect.width + 200) * scale, (rect.height + 200) * scale),
                scale: scale,
                padding: 100 * scale,
                background: '#ffffff'
            });

            $('#export-image').append(img);
            $scope.imageExportLoading = false;

            map.getTemplates().hideExportFooter();
        }, 100);
    };

    // --------- utils -------------

    this.splitLines = function (text) {
        return text.split(/\n/);
    };
};

//$scope.safeApply(function() {
//    self.state = data || defaultState;
//    //$scope.currentTab = self.state.currentTab;
//});

//$scope.safeApply(function() {
//    $scope.currentTab = tabID;
//});

//$scope.safeApply(function() {
//    self.state.currentTab = null; // TODO: trigger autosave
//    $scope.currentTab = null;
//});

//$scope.safeApply(function() {
//    if ($scope.currentTab == tabID) {
//        $scope.currentTab = null;
//    } else if (!self.disableTab(tabID)) {
//        $scope.currentTab = tabID;
//    }
//});

//$scope.safeApply(function() {
//    self.state.showNavigator = !self.state.showNavigator;
//});

//$scope.safeApply(function() {
//    self.zoomingToRegion = !self.zoomingToRegion;
//});

},{}],17:[function(require,module,exports){
'use strict';

window.UserCtrl = function ($scope) {

    // query string params
    $scope.params = URI(window.location).query(true);

    // auto-open thinkquery?
    $scope.thinkquery = $scope.params.thinkquery ? true : false;

    $scope.userId = window.userId; // set in layouts/user
    $scope.userIsAdmin = window.userIsAdmin;
    $scope.userName = '';
    $scope.userProfile = null;
    $scope.profileEditStatus = '';
    $scope.password = '';
    $scope.passwordConfirm = '';

    $scope.getNewWindowName = function (action, mapId) {
        if (action == 'VIEW_MAP') {
            return 'VIEW_MAP_' + mapId;
        }
    };

    // show/hide tests UI and model debug form
    $scope.showTests = false;
    $scope.showModel = false;

    $scope.toggleShowTests = function () {
        $scope.showTests = !$scope.showTests;
    };
    $scope.toggleShowModel = function () {
        $scope.showModel = !$scope.showModel;
    };

    $scope.setUserId = function (id) {
        $scope.userId = id;
    };

    function init() {
        window.addEventListener('resize', fixRowHeights);
    }

    // make all cells in a row the same height
    function fixRowHeights() {}

    $scope.loadUserProfile = function (callback) {
        if ($scope.userId) {
            var url = '/users/' + $scope.userId + '/profile.json';
            window.startSpinner();
            $http.get(url).then(function (response) {
                // success
                $scope.userProfile = response.data;
                initSelectedAdminTags();
                initSelectedFollowableOrgs();
                if ($scope.ccsTagging) {
                    $scope.ccsTagging.loadCcsTags();
                }
                window.stopSpinner();
                if (callback) {
                    callback.call();
                }
                fixRowHeights();
            }, function (reason) {
                // error
                window.stopSpinner();
                alert('Could not load user profile data');
            });
        }
    };

    $scope.loadUserProfile();

    // -------------- courses/subscriptions ------------------

    // open the Stripe Checkout dialog and get a token
    // NB: amount is stored in the Stripe plan definition
    $scope.addSubscription = function (plan) {
        var handler = StripeCheckout.configure({
            key: $scope.userProfile.account.stripeKey,
            name: 'Subscribe to MetaMap',
            image: '/assets/badge-logo-64.png',
            description: plan.name,
            panelLabel: 'Pay {{amount}}/' + plan.interval,
            amount: plan.price,
            allowRememberMe: false,
            email: $scope.userProfile.user.email,
            token: function token(_token, args) {
                console.log('token: ', _token);
                window.startSpinner();
                $http.post('/charges/subscribe', {
                    plan_id: plan.code,
                    token_id: _token.id
                }).then(function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.success('Subscription created');
                    });
                }, function () {
                    $scope.loadUserProfile(function () {
                        alertify.error('Subscription could not be created');
                    });
                });
            }
        });
        handler.open();
    };

    // for buy-course-button directive
    $scope.getBuyButtonLabel = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            return 'Free';
        } else if (course = getEnrolledCourse(id)) {
            return 'Enrolled';
        } else if (course = getEnrollableCourse(id)) {
            return 'Enroll - $' + (course.price / 100).toFixed(2);
        } else {
            return '';
        }
    };

    $scope.getCourseStatusSummary = function (id) {
        var course = $scope.getCourse(id);
        if (course) {
            var text = course.stepsCompleted + ' of ' + course.steps + ' steps completed';
            if (course.enrolment) {
                text = 'Enrolled ' + course.enrolment.date + (course.enrolment.stripeData.refunded ? ' (Refunded)' : '') + ' - ' + text;
            }
            return course.code + ' - ' + text;
        } else {
            return null;
        }
    };

    $scope.getCourseCompletedPercent = function (id) {
        var course = $scope.getCourse(id);
        if (course) {
            return course.stepsCompletedPercent;
        } else {
            return null;
        }
    };

    $scope.maybeBuyCourse = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            window.location.href = '/courses/' + course.id;
        } else if (course = getEnrolledCourse(id)) {
            window.location.href = '/courses/' + course.id;
        } else if (course = getEnrollableCourse(id)) {
            $scope.buyCourse(course);
        }
    };

    $scope.getCourse = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            return course;
        } else if (course = getEnrolledCourse(id)) {
            return course;
        } else if (course = getEnrollableCourse(id)) {
            return course;
        }
        return null;
    };

    function getFreeCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.freeAccessibleCourses, function (course) {
            return course.id == id && course.enrolment == undefined;
        });
    }

    function getEnrolledCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.freeAccessibleCourses, function (course) {
            return course.id == id && course.enrolment !== undefined;
        });
    }

    function getEnrollableCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.nonFreeAccessibleCourses, function (course) {
            return course.id == id;
        });
    }

    // open the Stripe Checkout dialog and get a token
    // NB: amount is passed from our course definition
    $scope.buyCourse = function (course) {
        var handler = StripeCheckout.configure({
            key: $scope.userProfile.account.stripeKey,
            name: 'Enroll in Course',
            image: '/assets/badge-logo-64.png',
            description: course.code,
            amount: course.price,
            allowRememberMe: false,
            email: $scope.userProfile.user.email,
            token: function token(_token2, args) {
                console.log('token: ', _token2);
                window.startSpinner();
                $http.post('/charges/buy_course', {
                    course_code: course.code,
                    course_price: course.price,
                    token_id: _token2.id
                }).then(function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.success('Course purchased');
                    });

                    // reload page to handle stripe bug (?) - links not clickable
                    window.setTimeout(function () {
                        window.location.reload();
                    }, 1000);
                }, function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.error('Course purchase could not be completed');
                        console.log('stripe error: ', response);
                    });
                });
            }
        });
        handler.open();
    };

    $scope.cancelSubscription = function (subscription) {
        window.startSpinner();
        $http['delete']('/charges/unsubscribe?subscription_id=' + subscription.id).then(function (response) {
            $scope.loadUserProfile(function () {
                alertify.success('Subscription cancelled');
            });
        }, function () {
            $scope.loadUserProfile(function () {
                alertify.error('Subscription could not be cancelled');
            });
        });
    };

    // debug/test only
    $scope.clearCustomer = function () {
        window.startSpinner();
        $http['delete']('/charges/clear_customer').then(function (response) {
            $scope.loadUserProfile(function () {
                alertify.success('Customer cleared');
            });
        }, function () {
            $scope.loadUserProfile(function () {
                alertify.error('Customer could not be cleared');
            });
        });
    };

    // -------------- points and badges ----------------

    $scope.hasCurrentBadge = function (key, level) {
        return $scope.userProfile && $scope.userProfile.badges.current[key] == level;
    };

    $scope.hasNewBadge = function (key, level) {
        return $scope.userProfile && $scope.userProfile.badges['new'][key] == level;
    };

    $scope.hasNewBadges = function () {
        return $scope.userProfile && _.keys($scope.userProfile.badges['new']).length > 0;
    };

    $scope.getBadgeDefinition = function (key) {
        return _.findWhere($scope.userProfile.badges.definitions, {
            key: key
        });
    };

    // -------------- tutorial -----------------

    try {
        $scope.tutorialEnabled = function () {
            return window.mapData !== undefined;
        };

        // start tutorial:
        var _tutorial = new SandbankEditor.Tutorial();

        $scope.startTutorial = function () {
            _tutorial.start();
        };
    } catch (e) {}

    // -------------- feedback form -----------------

    $scope.feedback = '';

    $scope.toggleFeedback = function () {
        $('#feedback-dropdown').slideToggle('fast').find('textarea').get(0).focus();
    };

    $scope.submitFeedback = function () {
        if ($scope.feedback === '') {
            return; // empty input...
        }

        $.ajax({
            type: 'POST',
            url: '/users/feedback',
            data: {
                url: window.location.href,
                feedback: $scope.feedback
            },
            success: function success() {
                $scope.feedback = '';
                alert('Thank you for your feedback!');
            },
            error: function error() {
                console.error('error sending feedback: ', arguments);
            }
        });

        $('#feedback-dropdown').slideToggle('fast');
    };

    // --------- user's user tags -----------

    // NB: this is similar to maps tagging in tagging.js - but simpler, as we do not have to deal with
    // multiple taggable items, which means tracking existing vs. new tags, etc...

    $scope.newTag = {
        name: ''
    };

    // tag autocomplete
    $scope.getUserTags = function (viewValue) {
        var url = '/user_tags/list.json?q=' + viewValue;
        return $http.get(url).then(function (response) {
            return response.data.tags;
        });
    };

    $scope.updateUserUserTags = function () {
        var tagList = _.pluck($scope.userProfile.userTags, 'name').join(',');
        $http.put('/user_tags/update_user_user_tags', [tagList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'Tags saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save tags';
        });
    };

    $scope.deleteTag = function (tag) {
        var i = _.indexOf($scope.userProfile.userTags, tag);
        $scope.userProfile.userTags.splice(i, 1);
        $scope.updateUserUserTags();
    };

    $scope.tagSelected = function (item, model, label) {
        //console.log('tagSelected: ', item, model, label);
        $scope.addTag(item.name);
    };

    $scope.editingTagKeypress = function (e) {
        if (e.which == 13) {
            $scope.addTag($scope.newTag.name);
        }
    };

    $scope.addTag = function (tagName) {
        $scope.userProfile.userTags.push({
            name: tagName
        });
        $scope.newTag.name = '';
        $scope.updateUserUserTags();
    };

    // --------- user's/map's CCS tags -----------

    // this manages CCS tags for either the current user or the current map,
    // depending which page we're on - mapId gets overridden in editor.js if we're editing a map

    try {
        $scope.ccsTagging = new SandbankCcsTagging($scope);
        $scope.ccsTagging.mapId = null;
    } catch (e) {}

    // --------- user's admin tags -----------

    // key (index): admin tag ID; value: true/false (if user follows the admin tag)
    $scope.selectedUserAdminTags = [];

    function initSelectedAdminTags() {
        $scope.selectedUserAdminTags = [];
        _.each($scope.userProfile.adminTags, function (tag) {
            if (_.findWhere($scope.userProfile.userAdminTags, {
                id: tag.id
            })) {
                $scope.selectedUserAdminTags[tag.id] = true;
            }
        });
    }

    $scope.updateUserAdminTags = function () {
        var selectedTagNames = _.map($scope.userProfile.adminTags, function (tag) {
            return $scope.selectedUserAdminTags[tag.id] ? tag.name : null;
        });
        var tagList = _.without(selectedTagNames, null).join(',');
        $http.put('/admin_tags/update_user_admin_tags', [tagList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'Interests saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save interests';
        });
    };

    // --------- user's followed orgs -----------

    // key (index): org ID; value: true/false (if user follows the org)
    $scope.selectedFollowableOrganizations = [];

    $scope.userIsFollowingOrg = function (id) {
        return $scope.selectedFollowableOrganizations[id];
    };

    $scope.toggleUserFollowingOrg = function (id) {
        if (!$scope.selectedFollowableOrganizations[id] || confirm('Stop following this ThinkNation?')) {
            $scope.selectedFollowableOrganizations[id] = !$scope.selectedFollowableOrganizations[id];
            $scope.updateFollowedOrganizations();
        }
    };

    function initSelectedFollowableOrgs() {
        $scope.selectedFollowableOrganizations = [];
        _.each($scope.userProfile.followedOrganizations, function (org) {
            if (_.findWhere($scope.userProfile.followableOrganizations, {
                id: org.id
            })) {
                $scope.selectedFollowableOrganizations[org.id] = true;
            }
        });
    }

    $scope.updateFollowedOrganizations = function () {
        var selectedOrgIds = _.map($scope.userProfile.followableOrganizations, function (org) {
            return $scope.selectedFollowableOrganizations[org.id] ? org.id : null;
        });
        var orgIdList = _.without(selectedOrgIds, null).join(',');
        $http.put('/organization_follows/update_user_organization_follows', [orgIdList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'ThinkNations saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save ThinkNations';
        });
    };

    // ------------ auto-save user profile ---------------

    // don't let autosave be triggered more than every N milliseconds...
    $scope.autosave = _.debounce(autosaveNow, 2000);

    function autosaveNow() {
        //console.log('autosaving user profile');
        var data = {
            email: $scope.userProfile.user.email,
            alt_email: $scope.userProfile.user.altEmail,
            first_name: $scope.userProfile.user.firstName,
            last_name: $scope.userProfile.user.lastName,
            about_me: $scope.userProfile.user.aboutMe
        };
        if ($scope.passwordsMatch() && $scope.password.length) {
            data.password = $scope.password;
            data.password_confirmation = $scope.password;
        }

        startSpinner();
        $scope.profileEditStatus = 'Saving...';
        $http.put('/users/' + $scope.userId, data).then(function (response) {
            stopSpinner();
            if (_.has(data, 'password')) {
                $scope.profileEditStatus = 'Profile and password saved';
                console.log($scope.profileEditStatus);
            } else {
                $scope.profileEditStatus = 'Profile saved';
                console.log($scope.profileEditStatus);
            }
        }, function () {
            stopSpinner();
            $scope.profileEditStatus = 'Could not save profile';
        });
    }

    $scope.passwordsMatch = function () {
        return !$scope.password.length && !$scope.passwordConfirm.length || $scope.password == $scope.passwordConfirm;
    };

    // ------------ upload avatar ---------------

    // using: https://github.com/danialfarid/angular-file-upload
    $scope.onAvatarFileSelect = function ($files) {
        startSpinner();
        //$files: an array of files selected, each file has name, size, and type.
        for (var i = 0; i < $files.length; i++) {
            var file = $files[i];
            $scope.upload = $upload.upload({
                url: 'users/' + userId,
                method: 'PUT',
                withCredentials: true,
                file: file, // or list of files: $files for html5 only
                fileFormDataName: 'user[avatar]'
            }).success(function (data, status, headers, config) {
                $scope.loadUserProfile();
                $scope.profileEditStatus = 'Photo updated';
                stopSpinner();
            }).error(function () {
                stopSpinner();
                $scope.profileEditStatus = 'Error: Could not upload photo';
            })
            //.then(success, error, progress);
            ;
        }
    };

    // --------------- view helpers -------------------

    // returns e.g. "a day ago"
    // (NB: now is obtained from the DB to ensure that we have both dates in UTC;
    //    also, SQL vs. ruby dates need to be coerced into a similar format, both in UTC - see feed.json.jbuilder)
    $scope.getEventTime = function (t, now) {
        var time = moment(t, 'YYYY-MM-DD HH:mm:ss.SSS');
        var nowtime = moment(now, 'YYYY-MM-DD HH:mm:ss.SSS');
        // console.log('t:       ' + t);
        // console.log('now:     ' + now);
        // console.log('time:    ' + time.format()); // + ' ' + time.isValid());
        // console.log('nowtime: ' + nowtime.format()); // + ' ' + nowtime.isValid());
        return time.from(nowtime);
    };

    // --------------- notifications -------------------

    $scope.getNotificationFeedUrl = function (notification) {
        if (notification.actions.length) {
            var action = notification.actions[0];
            if (action.action == 'LIKE') {
                return '/social?like_id=' + action.likeId;
            } else if (action.action == 'COMMENT') {
                return '/social?comment_id=' + action.commentId;
            } else if (action.action == 'SHARE_INDIVIDUAL') {
                return '/maps/' + action.mapId;
            } else if (action.action == 'SHARE_PUBLIC') {
                return '/social?share_id=' + action.shareId;
            }
        }
        return '';
    };

    $scope.deleteNotification = function (notification) {
        $http['delete']('/notifications/' + notification.id + '.json').then(function (response) {
            // success
            notification.deleted = true;
        }, function (reason) {
            // error
            alert('Could not delete notification');
        });
    };

    $scope.notificationVerb = function (action) {
        var verbs = {
            LIKE: 'liked this:',
            COMMENT: 'commented on this:',
            SHARE_INDIVIDUAL: 'shared a MetaMap with you',
            SHARE_PUBLIC: 'shared a MetaMap with everyone',
            MAP_FOLLOW: 'followed a MetaMap:',
            USER_FOLLOW: 'followed you'
        };
        return verbs[action];
    };

    // ------------ utility functions ---------------

    // handy function for use with ng-class on radio buttons
    $scope.classIf = function (klass, b) {
        //console.log('classIf: ' + klass + ', ' + b);
        return b ? klass : '';
    };

    // avoid '$apply already in progress' error (source: https://coderwall.com/p/ngisma)
    $scope.safeApply = function (fn) {
        //console.log('safeApply on scope: ' + $scope);

        // TODO? restore non-Angular version of this method
        //var phase = this.$root.$$phase;
        //if (phase == '$apply' || phase == '$digest') {
        if (fn && typeof fn === 'function') {
            fn();
        }
        //} else {
        //    this.$apply(fn);
        //}
    };

    // source: http://ctrlq.org/code/19616-detect-touch-screen-javascript
    $scope.isTouchDevice = function () {
        return 'ontouchstart' in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
    };

    init();
};

// window.setTimeout(function() {
//     $('.row-height').each(function() { 
//         var highestBox = 0;
//         $('> div', this).each(function(){
//             if ($(this).height() > highestBox)
//                 highestBox = $(this).height();
//         }); 
//         $('> div', this).height(highestBox);
//     });       
// }, 300);

},{}],18:[function(require,module,exports){
'use strict';

var COLORS = {
    groupFillColor: '#f9f9f9',
    colorPLight: '#FDDDAF',
    colorPDark: '#C9882B',

    // DSRP colors (from _variables.scss)
    colorD: '#f2624c',
    colorR: '#4cbfc2',
    colorS: '#96c93d',
    colorP: '#fbaa36',

    white: '#000'
};

Object.freeze(COLORS);

module.exports = COLORS;

},{}],19:[function(require,module,exports){
'use strict';

var status = {
    LAST_UPDATED: '',
    READ_ONLY: 'View only',
    SAVING: 'Saving...',
    SAVE_OK: 'All changes saved',
    SAVE_FAILED: 'Changes could not be saved'
};

Object.freeze(status);

module.exports = status;

},{}],20:[function(require,module,exports){
'use strict';

var TABS = {
    TAB_ID_PRESENTER: 'presenter-tab',
    TAB_ID_ANALYTICS_MAP: 'analytics-tab-map',
    TAB_ID_ANALYTICS_THING: 'analytics-tab-thing',
    TAB_ID_PERSPECTIVES: 'perspectives-tab',
    TAB_ID_DISTINCTIONS: 'distinctions-tab',
    TAB_ID_ATTACHMENTS: 'attachments-tab',
    TAB_ID_GENERATOR: 'generator-tab',
    TAB_ID_STANDARDS: 'standards-tab'
};
Object.freeze(TABS);

module.exports = TABS;

},{}],21:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Auth0Lock = require('auth0-lock');

var Auth0 = (function () {
    function Auth0() {
        _classCallCheck(this, Auth0);

        this.lock = new Auth0Lock('wsOnart23yViIShqT4wfJ18w2vt2cl32', 'metamap.auth0.com');
        this.lock.on('loading ready', function () {
            for (var _len = arguments.length, e = Array(_len), _key = 0; _key < _len; _key++) {
                e[_key] = arguments[_key];
            }
        });
    }

    _createClass(Auth0, [{
        key: 'login',
        value: function login() {
            var that = this;

            var promise = new Promise(function (fulfill, reject) {
                that.getSession().then(function (profile) {
                    if (profile) {
                        fulfill(profile);
                    } else {
                        that.lock.show({
                            closable: false,
                            loginAfterSignup: true,
                            authParams: {
                                scope: 'openid offline_access'
                            }
                        }, function (err, profile, id_token, ctoken, opt, refresh_token) {
                            if (err) {
                                reject(err);
                            } else {
                                localforage.setItem('id_token', id_token);
                                localforage.setItem('profile', profile);
                                localforage.setItem('refresh_token', refresh_token);
                                that.id_token = id_token;
                                that.profile = profile;
                                that.refresh_token = refresh_token;
                                fulfill(profile);
                            }
                        });
                    }
                });
            });
            return promise;
        }
    }, {
        key: 'linkAccount',
        value: function linkAccount() {
            var that = this;
            this.lock.show({
                callbackURL: 'https://popping-fire-897.firebaseapp.com/',
                dict: {
                    signin: {
                        title: 'Link with another account'
                    }
                },
                authParams: {
                    access_token: that.id_token || that.profile.identities[0].access_token
                }
            });
        }
    }, {
        key: 'getSession',
        value: function getSession() {
            var that = this;
            var getProfile = function getProfile(id_token, fulfill, reject) {
                return that.lock.getProfile(id_token, function (err, profile) {
                    if (err) {
                        reject(err);
                    } else {
                        localforage.setItem('id_token', id_token);
                        localforage.setItem('profile', profile);
                        that.id_token = id_token;
                        that.profile = profile;
                        fulfill(profile, id_token);
                    }
                });
            };
            var promise = new Promise(function (fulfill, reject) {
                var fulfilled = false;
                localforage.getItem('refresh_token').then(function (token) {
                    if (token) {
                        that.refresh_token = token;
                        that.lock.getClient().refreshToken(token, function (a, tokObj) {
                            getProfile(tokObj.id_token, fulfill, reject);
                        }, function (error) {
                            reject(error);
                        });
                    } else {
                        localforage.getItem('id_token').then(function (id_token) {
                            if (token) {
                                getProfile(id_token, fulfill, reject);
                            } else {
                                fulfill(null);
                            }
                        });
                    }
                });
            });
            return promise;
        }
    }, {
        key: 'logout',
        value: function logout() {
            localforage.removeItem('id_token');
            localforage.removeItem('refresh_token');
            localforage.removeItem('profile');
            this.profile = null;
            window.location.reload();
        }
    }]);

    return Auth0;
})();

module.exports = Auth0;

},{"auth0-lock":undefined}],22:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Firebase = require('firebase');

var MetaFire = (function () {
    function MetaFire() {
        _classCallCheck(this, MetaFire);

        this.fb = new Firebase('https://popping-fire-897.firebaseio.com');
    }

    _createClass(MetaFire, [{
        key: 'init',
        value: function init() {
            var _this = this;

            var that = this;
            var ret = new Promise(function (fulfill, reject) {
                localforage.getItem('id_token').then(function (id_token) {
                    MetaMap.Auth0.getSession().then(function (profile) {

                        MetaMap.Auth0.lock.getClient().getDelegationToken({
                            target: profile.clientID,
                            id_token: id_token,
                            api_type: 'firebase'
                        }, function (err, delegationResult) {
                            that.firebase_token = delegationResult.id_token;
                            localforage.setItem('firebase_token', that.firebase_token);
                            _this.fb.authWithCustomToken(that.firebase_token, function (error, authData) {
                                if (error) {
                                    reject(error);
                                } else {
                                    fulfill(authData);
                                }
                            });
                        });
                    });
                });
            });
            return ret;
        }
    }, {
        key: 'getChild',
        value: function getChild(path) {
            return this.fb.child(path);
        }
    }, {
        key: 'getData',
        value: function getData(path) {
            var child = this.fb;
            if (path) {
                child = this.getChild(path);
            }
            var promise = new Promise(function (resolve, reject) {
                child.on('value', function (snapshot) {
                    resolve(snapshot.val());
                }, function (error) {
                    reject(error);
                });
            });

            return promise;
        }
    }, {
        key: 'setData',
        value: function setData(data, path) {
            var child = this.fb;
            if (path) {
                child = this.getChild(path);
            }
            return child.set(data);
        }
    }, {
        key: 'logout',
        value: function logout() {
            this.fb.unauth();
        }
    }]);

    return MetaFire;
})();

module.exports = MetaFire;

},{"firebase":undefined}],23:[function(require,module,exports){
'use strict';

var googleAnalytics = function googleAnalytics(config) {
    var apiKey, e, r;
    if (config == null) {
        config = {};
    }
    apiKey = config.GOOGLE_ANALYTICS_TRACKING_ID;
    if (apiKey && window.location.hostname !== 'localhost') {
        window.GoogleAnalyticsObject = 'ga';
        window.ga || (window.ga = function () {
            (window.ga.q = window.ga.q || []).push(arguments);
        });
        window.ga.ga = +new Date();
        e = document.createElement('script');
        r = document.getElementsByTagName('script')[0];
        e.src = '//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e, r);
        ga('create', apiKey);
        return ga('send', 'pageview');
    }
};

module.exports = googleAnalytics;

},{}],24:[function(require,module,exports){
"use strict";

var newRelic = function newRelic(config) {
    var appId, licenseKey;
    if (config == null) {
        config = {};
    }
    licenseKey = config.NEW_RELIC_LICENSE_KEY;
    appId = config.NEW_RELIC_APPLICATION_ID;
    if (licenseKey && appId && window.location.hostname !== "localhost") {
        return (window.NREUM || (NREUM = {}), __nr_require = (function (t, e, n) {
            function r(n) {
                if (!e[n]) {
                    var o = e[n] = { exports: {} };t[n][0].call(o.exports, function (e) {
                        var o = t[n][1][e];return r(o ? o : e);
                    }, o, o.exports);
                }return e[n].exports;
            }if ("function" == typeof __nr_require) return __nr_require;for (var o = 0; o < n.length; o++) r(n[o]);return r;
        })({ QJf3ax: [function (t, e) {
                function n(t) {
                    function e(e, n, a) {
                        t && t(e, n, a), a || (a = {});for (var c = s(e), f = c.length, u = i(a, o, r), d = 0; f > d; d++) c[d].apply(u, n);return u;
                    }function a(t, e) {
                        f[t] = s(t).concat(e);
                    }function s(t) {
                        return f[t] || [];
                    }function c() {
                        return n(e);
                    }var f = {};return { on: a, emit: e, create: c, listeners: s, _events: f };
                }function r() {
                    return {};
                }var o = "nr@context",
                    i = t("gos");e.exports = n();
            }, { gos: "7eSDFh" }], ee: [function (t, e) {
                e.exports = t("QJf3ax");
            }, {}], 3: [function (t) {
                function e(t, e, n, i, s) {
                    try {
                        c ? c -= 1 : r("err", [s || new UncaughtException(t, e, n)]);
                    } catch (f) {
                        try {
                            r("ierr", [f, new Date().getTime(), !0]);
                        } catch (u) {}
                    }return "function" == typeof a ? a.apply(this, o(arguments)) : !1;
                }function UncaughtException(t, e, n) {
                    this.message = t || "Uncaught error with no additional information", this.sourceURL = e, this.line = n;
                }function n(t) {
                    r("err", [t, new Date().getTime()]);
                }var r = t("handle"),
                    o = t(5),
                    i = t("ee"),
                    a = window.onerror,
                    s = !1,
                    c = 0;t("loader").features.err = !0, window.onerror = e, NREUM.noticeError = n;try {
                    throw new Error();
                } catch (f) {
                    "stack" in f && (t(1), t(4), "addEventListener" in window && t(2), window.XMLHttpRequest && XMLHttpRequest.prototype && XMLHttpRequest.prototype.addEventListener && t(3), s = !0);
                }i.on("fn-start", function () {
                    s && (c += 1);
                }), i.on("fn-err", function (t, e, r) {
                    s && (this.thrown = !0, n(r));
                }), i.on("fn-end", function () {
                    s && !this.thrown && c > 0 && (c -= 1);
                }), i.on("internal-error", function (t) {
                    r("ierr", [t, new Date().getTime(), !0]);
                });
            }, { 1: 8, 2: 5, 3: 9, 4: 7, 5: 21, ee: "QJf3ax", handle: "D5DuLP", loader: "G9z0Bl" }], 4: [function (t) {
                function e() {}if (window.performance && window.performance.timing && window.performance.getEntriesByType) {
                    var n = t("ee"),
                        r = t("handle"),
                        o = t(2);t("loader").features.stn = !0, t(1), n.on("fn-start", function (t) {
                        var e = t[0];e instanceof Event && (this.bstStart = Date.now());
                    }), n.on("fn-end", function (t, e) {
                        var n = t[0];n instanceof Event && r("bst", [n, e, this.bstStart, Date.now()]);
                    }), o.on("fn-start", function (t, e, n) {
                        this.bstStart = Date.now(), this.bstType = n;
                    }), o.on("fn-end", function (t, e) {
                        r("bstTimer", [e, this.bstStart, Date.now(), this.bstType]);
                    }), n.on("pushState-start", function () {
                        this.time = Date.now(), this.startPath = location.pathname + location.hash;
                    }), n.on("pushState-end", function () {
                        r("bstHist", [location.pathname + location.hash, this.startPath, this.time]);
                    }), "addEventListener" in window.performance && (window.performance.addEventListener("webkitresourcetimingbufferfull", function () {
                        r("bstResource", [window.performance.getEntriesByType("resource")]), window.performance.webkitClearResourceTimings();
                    }, !1), window.performance.addEventListener("resourcetimingbufferfull", function () {
                        r("bstResource", [window.performance.getEntriesByType("resource")]), window.performance.clearResourceTimings();
                    }, !1)), document.addEventListener("scroll", e, !1), document.addEventListener("keypress", e, !1), document.addEventListener("click", e, !1);
                }
            }, { 1: 6, 2: 8, ee: "QJf3ax", handle: "D5DuLP", loader: "G9z0Bl" }], 5: [function (t, e) {
                function n(t) {
                    i.inPlace(t, ["addEventListener", "removeEventListener"], "-", r);
                }function r(t) {
                    return t[1];
                }var o = (t(1), t("ee").create()),
                    i = t(2)(o),
                    a = t("gos");if ((e.exports = o, n(window), "getPrototypeOf" in Object)) {
                    for (var s = document; s && !s.hasOwnProperty("addEventListener");) s = Object.getPrototypeOf(s);s && n(s);for (var c = XMLHttpRequest.prototype; c && !c.hasOwnProperty("addEventListener");) c = Object.getPrototypeOf(c);c && n(c);
                } else XMLHttpRequest.prototype.hasOwnProperty("addEventListener") && n(XMLHttpRequest.prototype);o.on("addEventListener-start", function (t) {
                    if (t[1]) {
                        var e = t[1];"function" == typeof e ? this.wrapped = t[1] = a(e, "nr@wrapped", function () {
                            return i(e, "fn-", null, e.name || "anonymous");
                        }) : "function" == typeof e.handleEvent && i.inPlace(e, ["handleEvent"], "fn-");
                    }
                }), o.on("removeEventListener-start", function (t) {
                    var e = this.wrapped;e && (t[1] = e);
                });
            }, { 1: 21, 2: 22, ee: "QJf3ax", gos: "7eSDFh" }], 6: [function (t, e) {
                var n = (t(2), t("ee").create()),
                    r = t(1)(n);e.exports = n, r.inPlace(window.history, ["pushState"], "-");
            }, { 1: 22, 2: 21, ee: "QJf3ax" }], 7: [function (t, e) {
                var n = (t(2), t("ee").create()),
                    r = t(1)(n);e.exports = n, r.inPlace(window, ["requestAnimationFrame", "mozRequestAnimationFrame", "webkitRequestAnimationFrame", "msRequestAnimationFrame"], "raf-"), n.on("raf-start", function (t) {
                    t[0] = r(t[0], "fn-");
                });
            }, { 1: 22, 2: 21, ee: "QJf3ax" }], 8: [function (t, e) {
                function n(t, e, n) {
                    var r = t[0];"string" == typeof r && (r = new Function(r)), t[0] = o(r, "fn-", null, n);
                }var r = (t(2), t("ee").create()),
                    o = t(1)(r);e.exports = r, o.inPlace(window, ["setTimeout", "setInterval", "setImmediate"], "setTimer-"), r.on("setTimer-start", n);
            }, { 1: 22, 2: 21, ee: "QJf3ax" }], 9: [function (t, e) {
                function n() {
                    c.inPlace(this, d, "fn-");
                }function r(t, e) {
                    c.inPlace(e, ["onreadystatechange"], "fn-");
                }function o(t, e) {
                    return e;
                }var i = t("ee").create(),
                    a = t(1),
                    s = t(2),
                    c = s(i),
                    f = s(a),
                    u = window.XMLHttpRequest,
                    d = ["onload", "onerror", "onabort", "onloadstart", "onloadend", "onprogress", "ontimeout"];e.exports = i, window.XMLHttpRequest = function (t) {
                    var e = new u(t);try {
                        i.emit("new-xhr", [], e), f.inPlace(e, ["addEventListener", "removeEventListener"], "-", function (t, e) {
                            return e;
                        }), e.addEventListener("readystatechange", n, !1);
                    } catch (r) {
                        try {
                            i.emit("internal-error", [r]);
                        } catch (o) {}
                    }return e;
                }, window.XMLHttpRequest.prototype = u.prototype, c.inPlace(XMLHttpRequest.prototype, ["open", "send"], "-xhr-", o), i.on("send-xhr-start", r), i.on("open-xhr-start", r);
            }, { 1: 5, 2: 22, ee: "QJf3ax" }], 10: [function (t) {
                function e(t) {
                    if ("string" == typeof t && t.length) return t.length;if ("object" != typeof t) return void 0;if ("undefined" != typeof ArrayBuffer && t instanceof ArrayBuffer && t.byteLength) return t.byteLength;if ("undefined" != typeof Blob && t instanceof Blob && t.size) return t.size;if ("undefined" != typeof FormData && t instanceof FormData) return void 0;try {
                        return JSON.stringify(t).length;
                    } catch (e) {
                        return void 0;
                    }
                }function n(t) {
                    var n = this.params,
                        r = this.metrics;if (!this.ended) {
                        this.ended = !0;for (var i = 0; c > i; i++) t.removeEventListener(s[i], this.listener, !1);if (!n.aborted) {
                            if ((r.duration = new Date().getTime() - this.startTime, 4 === t.readyState)) {
                                n.status = t.status;var a = t.responseType,
                                    f = "arraybuffer" === a || "blob" === a || "json" === a ? t.response : t.responseText,
                                    u = e(f);if ((u && (r.rxSize = u), this.sameOrigin)) {
                                    var d = t.getResponseHeader("X-NewRelic-App-Data");d && (n.cat = d.split(", ").pop());
                                }
                            } else n.status = 0;r.cbTime = this.cbTime, o("xhr", [n, r, this.startTime]);
                        }
                    }
                }function r(t, e) {
                    var n = i(e),
                        r = t.params;r.host = n.hostname + ":" + n.port, r.pathname = n.pathname, t.sameOrigin = n.sameOrigin;
                }if (window.XMLHttpRequest && XMLHttpRequest.prototype && XMLHttpRequest.prototype.addEventListener && !/CriOS/.test(navigator.userAgent)) {
                    t("loader").features.xhr = !0;var o = t("handle"),
                        i = t(2),
                        a = t("ee"),
                        s = ["load", "error", "abort", "timeout"],
                        c = s.length,
                        f = t(1);t(4), t(3), a.on("new-xhr", function () {
                        this.totalCbs = 0, this.called = 0, this.cbTime = 0, this.end = n, this.ended = !1, this.xhrGuids = {};
                    }), a.on("open-xhr-start", function (t) {
                        this.params = { method: t[0] }, r(this, t[1]), this.metrics = {};
                    }), a.on("open-xhr-end", function (t, e) {
                        "loader_config" in NREUM && "xpid" in NREUM.loader_config && this.sameOrigin && e.setRequestHeader("X-NewRelic-ID", NREUM.loader_config.xpid);
                    }), a.on("send-xhr-start", function (t, n) {
                        var r = this.metrics,
                            o = t[0],
                            i = this;if (r && o) {
                            var f = e(o);f && (r.txSize = f);
                        }this.startTime = new Date().getTime(), this.listener = function (t) {
                            try {
                                "abort" === t.type && (i.params.aborted = !0), ("load" !== t.type || i.called === i.totalCbs && (i.onloadCalled || "function" != typeof n.onload)) && i.end(n);
                            } catch (e) {
                                try {
                                    a.emit("internal-error", [e]);
                                } catch (r) {}
                            }
                        };for (var u = 0; c > u; u++) n.addEventListener(s[u], this.listener, !1);
                    }), a.on("xhr-cb-time", function (t, e, n) {
                        this.cbTime += t, e ? this.onloadCalled = !0 : this.called += 1, this.called !== this.totalCbs || !this.onloadCalled && "function" == typeof n.onload || this.end(n);
                    }), a.on("xhr-load-added", function (t, e) {
                        var n = "" + f(t) + !!e;this.xhrGuids && !this.xhrGuids[n] && (this.xhrGuids[n] = !0, this.totalCbs += 1);
                    }), a.on("xhr-load-removed", function (t, e) {
                        var n = "" + f(t) + !!e;this.xhrGuids && this.xhrGuids[n] && (delete this.xhrGuids[n], this.totalCbs -= 1);
                    }), a.on("addEventListener-end", function (t, e) {
                        e instanceof XMLHttpRequest && "load" === t[0] && a.emit("xhr-load-added", [t[1], t[2]], e);
                    }), a.on("removeEventListener-end", function (t, e) {
                        e instanceof XMLHttpRequest && "load" === t[0] && a.emit("xhr-load-removed", [t[1], t[2]], e);
                    }), a.on("fn-start", function (t, e, n) {
                        e instanceof XMLHttpRequest && ("onload" === n && (this.onload = !0), ("load" === (t[0] && t[0].type) || this.onload) && (this.xhrCbStart = new Date().getTime()));
                    }), a.on("fn-end", function (t, e) {
                        this.xhrCbStart && a.emit("xhr-cb-time", [new Date().getTime() - this.xhrCbStart, this.onload, e], e);
                    });
                }
            }, { 1: "XL7HBI", 2: 11, 3: 9, 4: 5, ee: "QJf3ax", handle: "D5DuLP", loader: "G9z0Bl" }], 11: [function (t, e) {
                e.exports = function (t) {
                    var e = document.createElement("a"),
                        n = window.location,
                        r = {};e.href = t, r.port = e.port;var o = e.href.split("://");return (!r.port && o[1] && (r.port = o[1].split("/")[0].split("@").pop().split(":")[1]), r.port && "0" !== r.port || (r.port = "https" === o[0] ? "443" : "80"), r.hostname = e.hostname || n.hostname, r.pathname = e.pathname, r.protocol = o[0], "/" !== r.pathname.charAt(0) && (r.pathname = "/" + r.pathname), r.sameOrigin = !e.hostname || e.hostname === document.domain && e.port === n.port && e.protocol === n.protocol, r);
                };
            }, {}], gos: [function (t, e) {
                e.exports = t("7eSDFh");
            }, {}], "7eSDFh": [function (t, e) {
                function n(t, e, n) {
                    if (r.call(t, e)) return t[e];var o = n();if (Object.defineProperty && Object.keys) try {
                        return (Object.defineProperty(t, e, { value: o, writable: !0, enumerable: !1 }), o);
                    } catch (i) {}return (t[e] = o, o);
                }var r = Object.prototype.hasOwnProperty;e.exports = n;
            }, {}], D5DuLP: [function (t, e) {
                function n(t, e, n) {
                    return r.listeners(t).length ? r.emit(t, e, n) : (o[t] || (o[t] = []), void o[t].push(e));
                }var r = t("ee").create(),
                    o = {};e.exports = n, n.ee = r, r.q = o;
            }, { ee: "QJf3ax" }], handle: [function (t, e) {
                e.exports = t("D5DuLP");
            }, {}], XL7HBI: [function (t, e) {
                function n(t) {
                    var e = typeof t;return !t || "object" !== e && "function" !== e ? -1 : t === window ? 0 : i(t, o, function () {
                        return r++;
                    });
                }var r = 1,
                    o = "nr@id",
                    i = t("gos");e.exports = n;
            }, { gos: "7eSDFh" }], id: [function (t, e) {
                e.exports = t("XL7HBI");
            }, {}], loader: [function (t, e) {
                e.exports = t("G9z0Bl");
            }, {}], G9z0Bl: [function (t, e) {
                function n() {
                    var t = l.info = NREUM.info;if (t && t.licenseKey && t.applicationID && f && f.body) {
                        s(h, function (e, n) {
                            e in t || (t[e] = n);
                        }), l.proto = "https" === p.split(":")[0] || t.sslForHttp ? "https://" : "http://", a("mark", ["onload", i()]);var e = f.createElement("script");e.src = l.proto + t.agent, f.body.appendChild(e);
                    }
                }function r() {
                    "complete" === f.readyState && o();
                }function o() {
                    a("mark", ["domContent", i()]);
                }function i() {
                    return new Date().getTime();
                }var a = t("handle"),
                    s = t(1),
                    c = window,
                    f = c.document,
                    u = "addEventListener",
                    d = "attachEvent",
                    p = ("" + location).split("?")[0],
                    h = { beacon: "bam.nr-data.net", errorBeacon: "bam.nr-data.net", agent: "js-agent.newrelic.com/nr-515.min.js" },
                    l = e.exports = { offset: i(), origin: p, features: {} };f[u] ? (f[u]("DOMContentLoaded", o, !1), c[u]("load", n, !1)) : (f[d]("onreadystatechange", r), c[d]("onload", n)), a("mark", ["firstbyte", i()]);
            }, { 1: 20, handle: "D5DuLP" }], 20: [function (t, e) {
                function n(t, e) {
                    var n = [],
                        o = "",
                        i = 0;for (o in t) r.call(t, o) && (n[i] = e(o, t[o]), i += 1);return n;
                }var r = Object.prototype.hasOwnProperty;e.exports = n;
            }, {}], 21: [function (t, e) {
                function n(t, e, n) {
                    e || (e = 0), "undefined" == typeof n && (n = t ? t.length : 0);for (var r = -1, o = n - e || 0, i = Array(0 > o ? 0 : o); ++r < o;) i[r] = t[e + r];return i;
                }e.exports = n;
            }, {}], 22: [function (t, e) {
                function n(t) {
                    return !(t && "function" == typeof t && t.apply && !t[i]);
                }var r = t("ee"),
                    o = t(1),
                    i = "nr@wrapper",
                    a = Object.prototype.hasOwnProperty;e.exports = function (t) {
                    function e(t, e, r, a) {
                        function nrWrapper() {
                            var n, i, s, f;try {
                                i = this, n = o(arguments), s = r && r(n, i) || {};
                            } catch (d) {
                                u([d, "", [n, i, a], s]);
                            }c(e + "start", [n, i, a], s);try {
                                return f = t.apply(i, n);
                            } catch (p) {
                                throw (c(e + "err", [n, i, p], s), p);
                            } finally {
                                c(e + "end", [n, i, f], s);
                            }
                        }return n(t) ? t : (e || (e = ""), nrWrapper[i] = !0, f(t, nrWrapper), nrWrapper);
                    }function s(t, r, o, i) {
                        o || (o = "");var a,
                            s,
                            c,
                            f = "-" === o.charAt(0);for (c = 0; c < r.length; c++) s = r[c], a = t[s], n(a) || (t[s] = e(a, f ? s + o : o, i, s, t));
                    }function c(e, n, r) {
                        try {
                            t.emit(e, n, r);
                        } catch (o) {
                            u([o, e, n, r]);
                        }
                    }function f(t, e) {
                        if (Object.defineProperty && Object.keys) try {
                            var n = Object.keys(t);return (n.forEach(function (n) {
                                Object.defineProperty(e, n, { get: function get() {
                                        return t[n];
                                    }, set: function set(e) {
                                        return (t[n] = e, e);
                                    } });
                            }), e);
                        } catch (r) {
                            u([r]);
                        }for (var o in t) a.call(t, o) && (e[o] = t[o]);return e;
                    }function u(e) {
                        try {
                            t.emit("internal-error", e);
                        } catch (n) {}
                    }return (t || (t = r), e.inPlace = s, e.flag = i, e);
                };
            }, { 1: 21, ee: "QJf3ax" }] }, {}, ["G9z0Bl", 3, 10, 4]));
        ;NREUM.info = { beacon: "bam.nr-data.net", errorBeacon: "bam.nr-data.net", licenseKey: licenseKey, applicationID: appId, sa: 1, agent: "js-agent.newrelic.com/nr-515.min.js" };
    }
};

module.exports = newRelic;

},{}],25:[function(require,module,exports){
'use strict';

var rayGun = function rayGun(config) {
    var apiKey;
    if (config == null) {
        config = {};
    }
    apiKey = config.RAYGUN_API_KEY;
    if (apiKey && window.location.hostname !== 'localhost') {
        if (Raygun != null) {
            Raygun.init(apiKey, {
                ignore3rdPartyErrors: true
            }).attach();
        }
        return Raygun != null ? Raygun.filterSensitiveData(['password']) : void 0;
    }
};

module.exports = rayGun;

},{}],26:[function(require,module,exports){
'use strict';

var userSnap = function userSnap(config) {
    var apiKey = '032baf87-8545-4ebc-a557-934859371fa5.js',
        s,
        x;
    if (config == null) {
        config = {};
    }
    apiKey = config.USER_SNAP_API_KEY;
    if (apiKey && window.location.hostname !== 'localhost') {
        window.usersnapconfig = {
            mode: 'report',
            shortcut: true,
            beforeOpen: function beforeOpen(obj) {
                return UserSnap.setEmailBox(Doc.app.user.userName);
            }
        };
        s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//api.usersnap.com/load/' + apiKey + '.js';
        x = document.getElementsByTagName('head')[0];
        return x.appendChild(s);
    }
};

module.exports = userSnap;

},{}],27:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;

var Analytics = (function () {
    function Analytics(editor, map) {
        _classCallCheck(this, Analytics);

        this._editor = editor;
        this._map = map;

        // this gets populated by this._map.loadMapExtraData, on load and after every autosave
        this.mapAnalytics = null;

        // --------- contextual analytics --------------
        // - these are all calculated here, unlike map analytics which are calculated on the server and connected with badges and points

        // this gets calculated by updateContextualAnalytics
        this.contextualAnalytics = {
            thingName: '',

            // thing stuff
            distinctFrom: 0,
            intentionallyDistinctFrom: 0,
            partOf: 0,
            includesParts: 0,
            relatedTo: 0,
            isRelationship: 0,
            lookingAt: 0,
            lookedAtFrom: 0,

            // R stuff
            rFromThingName: '',
            rToThingName: '',
            isRThing: false,
            isRSystem: false,
            isRPoint: false,
            isRView: false
        };
    }

    _createClass(Analytics, [{
        key: 'handleDiagramEvent',
        value: function handleDiagramEvent(eventName, e) {
            if (eventName === 'ChangedSelection') {
                if (this._map.ui.currentTabIs(this._map.ui.TAB_ID_ANALYTICS_THING)) {
                    this.updateContextualAnalytics();
                }
            }
        }
    }, {
        key: 'currentTabChanged',

        // called when a tab is opened or closed
        value: function currentTabChanged(newValue, oldValue) {
            if (newValue === this._map.ui.TAB_ID_ANALYTICS_THING) {
                // opening thing analytics tab
                this.updateContextualAnalytics();
            }
        }
    }, {
        key: 'updateContextualAnalytics',
        value: function updateContextualAnalytics() {
            //console.log('updateContextualAnalytics');
            if (!this._map.ui.currentTabIs(this._map.ui.TAB_ID_ANALYTICS_THING)) {
                return;
            }

            var diagram = this._map.getDiagram();
            var part = diagram.selection.first();
            var a = this.contextualAnalytics;

            if (part && part instanceof go.Group) {
                var thing = part;

                // thing name
                a.thingName = thing.data.text;

                // distinct from
                a.distinctFrom = _.where(diagram.model.nodeDataArray, { isGroup: true }).length - 1;

                // part of
                var level = 0;
                var thing2 = thing;
                while (thing2 = this.getContainingGroup(thing2)) {
                    level++;
                }
                a.partOf = level;

                // includes parts
                a.includesParts = this.countGroups(thing);

                // related to / looking at / looked at from / intentionally distinct from
                a.relatedTo = 0;
                a.lookingAt = 0;
                a.lookedAtFrom = 0;
                a.intentionallyDistinctFrom = 0;
                var links = thing.linksConnected;
                var rConnectedThingKeys = [];
                while (links.next()) {
                    var link = links.value;
                    // P link
                    if (link.data.category === 'P') {
                        if (link.fromNode === thing) {
                            a.lookingAt++;
                        } else if (link.toNode === thing) {
                            a.lookedAtFrom++;
                        }
                    }
                    // D link
                    else if (link.data.category === 'D') {
                        a.intentionallyDistinctFrom++;
                    }
                    // R link
                    else if (!link.data.category) {
                        // track keys of related things so we don't count them multiple times
                        if (link.fromNode === thing) {
                            rConnectedThingKeys.push(link.toNode.data.key);
                        } else if (link.toNode === thing) {
                            rConnectedThingKeys.push(link.fromNode.data.key);
                        }
                    }
                }
                a.relatedTo = _.uniq(rConnectedThingKeys).length;

                // isRelationship
                a.isRelationship = thing.isLinkLabel;
            } else if (part && part instanceof go.Link) {
                var rel = part;

                // thing names
                a.rFromThingName = rel.fromNode.data.text;
                a.rToThingName = rel.toNode.data.text;

                // is R thing
                a.isRThing = rel.isLabeledLink;

                // is R system
                a.isRSystem = rel.isLabeledLink && this.countGroups(rel.labelNodes.first()) > 0;

                // is R point
                a.isRPoint = rel.isLabeledLink && this.isPoint(rel.labelNodes.first());

                // is R view
                a.isRView = rel.isLabeledLink && this.isView(rel.labelNodes.first());
            }
        }
    }, {
        key: 'getContainingGroup',

        // returns either the containingGroup or the rThingContainingGroup, whichever is non-null
        value: function getContainingGroup(group) {
            return group.containingGroup || this.getRThingContainingGroup(group);
        }
    }, {
        key: 'getRThingContainingGroup',

        // if group is an R-thing between two sibling parts of a whole, returns the whole; else returns null
        value: function getRThingContainingGroup(group) {
            if (group.isLinkLabel) {
                var fromParent = group.labeledLink.fromNode.containingGroup;
                var toParent = group.labeledLink.toNode.containingGroup;
                if (fromParent !== null && toParent !== null && fromParent === toParent) {
                    return fromParent;
                }
            }
            return null;
        }
    }, {
        key: 'countGroups',

        // counts the member parts of the group that are groups, recursively (not including the group itself)
        value: function countGroups(group) {
            var count = 0;
            var it = this.getMemberGroups(group).iterator;
            while (it.next()) {
                var part = it.value;
                count += 1 + this.countGroups(part);
            }

            return count;
        }
    }, {
        key: 'getMemberGroups',

        // returns the collection of groups that are either a memberPart of this group, or an R-thing between sibling memberParts
        value: function getMemberGroups(group) {
            var members = new go.List();
            var it = group.memberParts;
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group) {
                    members.add(part);
                    var rthing = this.getRThingToSibling(part); // NB: should not get duplication here, as this checks for r-things in only one direction
                    if (rthing) {
                        members.add(rthing);
                    }
                }
            }
            return members;
        }
    }, {
        key: 'getRThingToSibling',

        // if the group is linked by an R-thing to a sibling (with the group as the fromNode), returns the R-thing; else returns null
        value: function getRThingToSibling(group) {
            var it = group.findLinksOutOf();
            while (it.next()) {
                var link = it.value;
                if (link.labelNodes.count > 0 && link.toNode.containingGroup === group.containingGroup) {
                    return link.labelNodes.first();
                }
            }
            return null;
        }
    }, {
        key: 'isPoint',
        value: function isPoint(group) {
            var it = group.findLinksOutOf();
            while (it.next()) {
                var link = it.value;
                if (link.data.category === 'P') {
                    return true;
                }
            }
            return false;
        }
    }, {
        key: 'isView',
        value: function isView(group) {
            var it = group.findLinksInto();
            while (it.next()) {
                var link = it.value;
                if (link.data.category === 'P') {
                    return true;
                }
            }
            return false;
        }
    }]);

    return Analytics;
})();

module.exports = Analytics;

},{}],28:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Attachments = (function () {
    function Attachments(editor, map) {
        _classCallCheck(this, Attachments);

        this._editor = editor;
        this._map = map;

        this.selectedThing = null;
        this.attachments = null;

        this.attachmentTypes = [{ name: 'note', labelSingular: 'Note', labelPlural: 'Notes' }, { name: 'link', labelSingular: 'Web Link', labelPlural: 'Web Links' }, { name: 'task', labelSingular: 'Task', labelPlural: 'Tasks' }, { name: 'map', labelSingular: 'Linked MetaMap', labelPlural: 'Linked MetaMaps' }
        //{name: 'doc', labelSingular: 'Document', labelPlural: 'Documents'}  // limit overall storage space OR simpler rules?
        // limit file types - pdf, jpg, gif, png, office?...  whitelist vs. blacklist
        ];
    }

    _createClass(Attachments, [{
        key: 'handleDiagramEvent',
        value: function handleDiagramEvent(eventName, e) {
            if (eventName === 'ChangedSelection') {
                if (this._map.ui.currentTabIs(this._map.ui.TAB_ID_ATTACHMENTS)) {
                    this.stopEditingAll();
                    this.saveAttachments();
                    this.loadSelectedThingAttachments();
                }
            }
        }
    }, {
        key: 'currentTabChanged',

        // called when a tab is opened or closed
        value: function currentTabChanged(newValue, oldValue) {
            if (newValue === this._map.ui.TAB_ID_ATTACHMENTS) {
                // opening tab
                this.loadSelectedThingAttachments();
            }
            if (oldValue === this._map.ui.TAB_ID_ATTACHMENTS) {
                // closing tab
                this.saveAttachments();
            }
        }
    }, {
        key: 'loadSelectedThingAttachments',
        value: function loadSelectedThingAttachments() {
            if (this._map.thingSelected()) {
                this.selectedThing = this._map.getUniqueThingSelected();
                this.attachments = this.selectedThing.data.attachments;
                if (this.attachments === undefined) {
                    this.attachments = [];
                }
            }
        }
    }, {
        key: 'stopEditingAll',

        // set all attachments to editing = false
        value: function stopEditingAll() {
            if (this.attachments) {
                _.each(this.attachments, function (att) {
                    att.editing = false;
                });
            }
        }
    }, {
        key: 'editingAnItem',
        value: function editingAnItem() {
            return this.attachments && _.findWhere(this.attachments, { editing: true }) !== undefined;
        }
    }, {
        key: 'startEditing',

        // set all other attachments to editing = false
        value: function startEditing(attachment) {
            this.stopEditingAll();
            attachment.editing = true;
        }
    }, {
        key: 'saveItem',
        value: function saveItem(attachment) {
            attachment.editing = false;
            this.saveAttachments();
        }
    }, {
        key: 'saveAttachments',
        value: function saveAttachments() {
            console.log('saveAttachments, selected: ' + this.selectedThing);
            if (this.selectedThing) {
                this._map.getDiagram().model.setDataProperty(this.selectedThing.data, 'attachments', this.attachments);
                this.selectedThing.updateTargetBindings();
            }
            this._map.autosave.saveNow('edit_attachments');
        }
    }, {
        key: 'listAttachments',
        value: function listAttachments(type) {
            var atts = _.where(this.attachments, { type: type });
            return atts;
        }
    }, {
        key: 'addAttachment',
        value: function addAttachment(type) {
            var item = { type: type, editing: true };
            if (type === 'note') {
                this.attachments.push(_.extend(item, { text: '', url: '' }));
            } else if (type === 'link') {
                this.attachments.push(_.extend(item, { label: '', url: '' }));
            } else if (type === 'task') {
                this.attachments.push(_.extend(item, { text: '' }));
            } else if (type === 'doc') {
                this.attachments.push(_.extend(item, { name: '' }));
            } else if (type === 'map') {
                this.attachments.push(_.extend(item, { mapRef: { id: 0, name: '' } }));
            }
        }
    }, {
        key: 'isValid',
        value: function isValid(attachment) {
            if (attachment.type === 'link') {
                return attachment.label && attachment.url && attachment.label.trim() !== '' && attachment.url.trim() !== '';
            } else if (attachment.type === 'note') {
                return attachment.text && attachment.text.trim() !== '';
            } else if (attachment.type === 'task') {
                return attachment.text && attachment.text.trim() !== '';
            } else if (attachment.type === 'doc') {
                return attachment.name && attachment.name.trim() !== '';
            } else if (attachment.type === 'map') {
                return attachment.mapRef && attachment.mapRef.id !== null && attachment.mapRef.id !== undefined;
            }
        }
    }, {
        key: 'deleteAttachment',
        value: function deleteAttachment(att) {
            var typeLabel = _.findWhere(this.attachmentTypes, { name: att.type }).labelSingular;
            if (confirm('Delete ' + typeLabel + '?')) {
                var i = _.indexOf(this.attachments, att);
                this.attachments.splice(i, 1);
            }
        }
    }, {
        key: 'getOtherMaps',

        // query server for maps containing the given text in the map name
        value: function getOtherMaps(viewValue) {
            // NB: this URL is constructed to match the one generated by the search form on the maps page...
            var url = '/maps/visible_maps.json?utf8=%E2%9C%93&q%5Bname_cont%5D=' + viewValue;
            return $http.get(url).then(function (response) {
                return response.data.maps;
            });
        }
    }, {
        key: 'otherMapSelected',
        value: function otherMapSelected(viewValue, modelValue) {
            console.log('otherMapSelected, viewValue: ' + viewValue.id + ', modelValue: ' + modelValue);
        }
    }, {
        key: 'formatOtherMap',
        value: function formatOtherMap(model) {
            return model ? model.name : '';
        }
    }]);

    return Attachments;
})();

module.exports = Attachments;

},{}],29:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Analytics = require('./Analytics.js');
var Attachments = require('./Attachments.js');
var Autosave = require('./autosave.js');
var EditorOptions = require('./EditorOptions.js');
var Generator = require('./generator.js');
var Layouts = require('./Layouts.js');
var Perspectives = require('./Perspectives.js');
var Presenter = require('./Presenter.js');
var Templates = require('./Templates.js');
var UI = require('./UI.js');

var EditorConfig = function EditorConfig(editor, map) {
    _classCallCheck(this, EditorConfig);

    this.editor = editor;
    this.map = map;
    this.analytics = new Analytics(editor, map);
    this.attachments = new Attachments(editor, map);
    this.autosave = new Autosave(editor, map);
    this.editorOptions = new EditorOptions({}, map);
    this.generator = new Generator(editor, map);
    this.layouts = new Layouts(editor, map);
    this.perspectives = new Perspectives(editor, map);
    this.presenter = new Presenter(editor, map);
    //this.standards = new SandbankEditor.Standards(editor, map);
    this.templates = new Templates(editor, map);
    //this.tests = new SandbankEditor.Tests(editor, map);
    this.ui = new UI(editor, map);
};

module.exports = EditorConfig;

},{"./Analytics.js":27,"./Attachments.js":28,"./EditorOptions.js":30,"./Layouts.js":31,"./Perspectives.js":33,"./Presenter.js":34,"./Templates.js":35,"./UI.js":36,"./autosave.js":37,"./generator.js":39}],30:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EditorOptions = (function () {
    function EditorOptions(user, map) {
        _classCallCheck(this, EditorOptions);

        this.user = user;
        this.map = map;
        this.defaultEditorOptions = {
            // noArrows, to, from, toFrom
            defaultRelationshipDirection: 'noArrows',
            // left, right, stacked, freehand
            defaultThingLayout: 'left',
            // lines, spotlight, both
            perspectiveMode: 'lines'
        };
    }

    _createClass(EditorOptions, [{
        key: 'setMapEditorOptions',

        // called when map is loaded to set stored options for map
        value: function setMapEditorOptions(options) {
            this.mapEditorOptions = options;
        }
    }, {
        key: 'getMapEditorOptions',

        // returns appropriate values from the user profile or the default options if options are not set for the map
        value: function getMapEditorOptions() {
            var profileOptions = this.user.profile ? this.user.profile.editorOptions : null;
            var vals = [this.mapEditorOptions, profileOptions, this.defaultEditorOptions];
            this.mapEditorOptions = _.find(vals, function (val) {
                return !_.isEmpty(val);
            });
            return this.mapEditorOptions;
        }
    }, {
        key: 'editOptions',
        value: function editOptions() {
            var _this = this;

            this.openModal(this.mapEditorOptions, function (options) {
                // onSaveDefaults
                _this.user.saveUserEditorOptions(options);
            }, function (options) {
                // onUpdate
                _this.mapEditorOptions = options;
                _this.map.autosave.saveNow('edit_options');
            });
        }
    }, {
        key: 'openModal',
        value: function openModal(_options, _onSaveDefaults, _onUpdate) {
            var that = this;
            var modalInstance = $modal.open({
                templateUrl: 'template_editor_options_modal.html', // see views/maps/_template_editor_options_modal
                backdrop: 'static',
                controller: that.optionsModalCtrl,
                windowClass: 'options-modal',
                resolve: {
                    options: function options() {
                        return _options;
                    },
                    onSaveDefaults: function onSaveDefaults() {
                        return _onSaveDefaults;
                    },
                    onUpdate: function onUpdate() {
                        return _onUpdate;
                    }
                }
            });

            modalInstance.result.then(function () {});
        }
    }, {
        key: 'optionsModalCtrl',

        // --------------- controller for options modal ---------------------
        value: function optionsModalCtrl($scope, $modalInstance, options, onSaveDefaults, onUpdate) {

            $scope.options = options;

            $scope.setDefaults = {
                value: false
            };

            $scope.ok = function () {
                onUpdate($scope.options);
                if ($scope.setDefaults.value) {
                    onSaveDefaults($scope.options);
                }
                $modalInstance.close();
            };

            $scope.cancel = function () {
                $modalInstance.dismiss('cancel');
            };
        }
    }]);

    return EditorOptions;
})();

module.exports = EditorOptions;

},{}],31:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;

// layouts used in the editor, for the diagram or individual Groups, plus layout-related functions

var Layouts = (function () {
    function Layouts(editor, map) {
        _classCallCheck(this, Layouts);

        this._editor = editor;
        this._map = map;
        go.Layout.call(this);
    }

    _createClass(Layouts, [{
        key: 'handleDiagramEvent',
        value: function handleDiagramEvent(eventName, e) {
            var diagram = this._map.getDiagram();
            if (eventName === 'InitialLayoutCompleted') {
                diagram.updateAllTargetBindings();
                diagram.layoutDiagram(true);
            } else if (eventName === 'SelectionMoved') {
                this.updateSelectedPartLocationData(e);
                this._map.getDiagram().layoutDiagram(true);
            } else if (eventName === 'SelectionDeleted') {
                diagram.updateAllTargetBindings();
            } else if (eventName === 'PartCreated') {} else if (eventName === 'PartResized') {
                this.setResizedPartDimensionData(e);
            } else if (eventName === 'LinkDrawn') {
                this.adjustLinkLayout(e.subject);
            } else if (eventName === 'LinkRelinked') {
                this.adjustLinkLayout(e.subject);
            }
        }
    }, {
        key: 'setResizedPartDimensionData',

        // ------------ handle location/size attributes for nodes ---------------

        // only update w/h for slides, as all other node types have fixed dimensions according to the templates
        value: function setResizedPartDimensionData(e) {
            var diagram = this._map.getDiagram();
            var node = e.subject;
            if (node && node.category === 'slide') {
                //console.log('PartResized: ' + node.part.actualBounds);
                diagram.model.setDataProperty(node.data, 'width', node.part.actualBounds.width);
                diagram.model.setDataProperty(node.data, 'height', node.part.actualBounds.height);
            }
        }
    }, {
        key: 'setNewPartLocationData',

        // set the 'loc' attribute for a new top-level node (created by double-clicking), to support freehand layout
        value: function setNewPartLocationData(e) {
            var node = e.subject;
            if (node && node.part) {
                if (node instanceof go.Group) {
                    this._map.getDiagram().model.setDataProperty(node.data, 'loc', node.part.location.x + ' ' + node.part.location.y);
                }
            }
        }
    }, {
        key: 'updateSelectedPartLocationData',

        // updates the 'loc' attribute for each selected part, to support freehand layout (does not apply to slides)
        value: function updateSelectedPartLocationData(e) {
            var diagram = this._map.getDiagram();
            var it = diagram.selection.iterator;
            while (it.next()) {
                if (it.value instanceof go.Group) {
                    // thing
                    var part = it.value;
                    var parentX = 0;
                    var parentY = 0;
                    if (part.containingGroup) {
                        parentX = part.containingGroup.location.x;
                        parentY = part.containingGroup.location.y;
                    }
                    console.log('moving group, subject: ' + e.subject + ', part: ' + part + ', height: ' + part.part.desiredSize.height + ', location: ' + part.part.location);
                    if (!isNaN(part.location.x)) {
                        diagram.model.setDataProperty(part.data, 'loc', part.location.x - parentX + ' ' + (part.location.y - parentY));
                    }
                }
            }
        }
    }, {
        key: 'fromAndToNodesAreVisible',

        // ----------- changing layouts of things and their descendants ----------------

        value: function fromAndToNodesAreVisible(link) {
            return link.fromNode && link.toNode && !this.hasCollapsedAncestor(link.fromNode) && !this.hasCollapsedAncestor(link.toNode);
        }
    }, {
        key: 'labelNodeIsVisible',
        value: function labelNodeIsVisible(link) {
            return link.labelNodes.count && link.labelNodes.first().visible;
        }
    }, {
        key: 'hasCollapsedAncestor',
        value: function hasCollapsedAncestor(group) {
            while (true) {
                if (!group.containingGroup) {
                    return false;
                } else if (!group.containingGroup.isSubGraphExpanded) {
                    return true;
                } else {
                    group = group.containingGroup;
                }
            }
        }
    }, {
        key: 'getHighestAncestorWithLayout',
        value: function getHighestAncestorWithLayout(group, layoutNames) {
            while (true) {
                if (!group.containingGroup) {
                    return false;
                } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                    return group.containingGroup;
                } else {
                    group = group.containingGroup;
                }
            }
        }
    }, {
        key: 'areSistersInInventoryLayout',
        value: function areSistersInInventoryLayout(group1, group2) {
            return group1.containingGroup === group2.containingGroup && group1.containingGroup && _.contains(['left', 'right'], group1.containingGroup.data.layout);
        }
    }, {
        key: 'isNotWithinInventoryLayout',
        value: function isNotWithinInventoryLayout(group) {
            return !this.isWithinInventoryLayout(group);
        }
    }, {
        key: 'isRThingWithinInventoryLayout',
        value: function isRThingWithinInventoryLayout(group) {
            return group.isLinkLabel && this.isWithinInventoryLayout(group);
        }
    }, {
        key: 'isWithinInventoryLayout',
        value: function isWithinInventoryLayout(group) {
            return this.isWithinLayout(group, ['left', 'right']);
        }
    }, {
        key: 'isWithinLeftInventoryLayout',
        value: function isWithinLeftInventoryLayout(group) {
            return this.isWithinLayout(group, ['left']);
        }
    }, {
        key: 'isWithinRightInventoryLayout',
        value: function isWithinRightInventoryLayout(group) {
            return this.isWithinLayout(group, ['right']);
        }
    }, {
        key: 'isWithinFreehandLayout',
        value: function isWithinFreehandLayout(group) {
            return this.isWithinLayout(group, ['freehand']);
        }
    }, {
        key: 'isWithinStackedLayout',
        value: function isWithinStackedLayout(group) {
            return this.isWithinLayout(group, ['stacked']);
        }
    }, {
        key: 'isWithinLayout',
        value: function isWithinLayout(group, layoutNames) {
            while (true) {
                if (!group.containingGroup) {
                    //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': false');
                    return false;
                } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                    //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': true');
                    return true;
                } else {
                    group = group.containingGroup;
                }
            }
        }
    }, {
        key: 'showLeftTextBlock',
        value: function showLeftTextBlock(group) {
            return this.isWithinRightInventoryLayout(group) && !this.isWithinStackedLayout(group) && !group.isLinkLabel;
        }
    }, {
        key: 'showRightTextBlock',
        value: function showRightTextBlock(group) {
            return this.isWithinLeftInventoryLayout(group) && !this.isWithinStackedLayout(group) && !group.isLinkLabel;
        }
    }, {
        key: 'setDescendantLayouts',
        value: function setDescendantLayouts(group, layoutName) {
            if (layoutName === 'left' || layoutName === 'right' || layoutName === 'stacked') {
                var it = group.memberParts.iterator;
                while (it.next()) {
                    var part = it.value;
                    if (part instanceof go.Group && !part.isLinkLabel) {
                        part.data.layout = layoutName;
                        this.setDescendantLayouts(part, layoutName);
                    }
                }
            } else if (layoutName === 'freehand') {}
        }
    }, {
        key: 'disableLayoutForSelectedThings',
        value: function disableLayoutForSelectedThings(layoutName) {
            var it = this._map.getDiagram().selection.iterator;
            if (!it.count) {
                return true;
            }
            while (it.next()) {
                if (!(it.value instanceof go.Group)) {
                    return true;
                } else {
                    var group = it.value;
                    if (this.isWithinLayout(group, ['left', 'right', 'stacked'])) {
                        return true;
                    }
                }
            }
            return false;
        }
    }, {
        key: 'computeLevel',

        // -------------- scaling functions, etc. ----------------------

        // Computes the level of this group
        value: function computeLevel(group) {
            //console.log('computeLevel, part: ' + part + ', containingGroup: ' + part.containingGroup);
            if (!(group instanceof go.Group) || group.containingGroup === null) {
                return 0;
            } else {
                return this.computeLevel(group.containingGroup) + 1;
            }
        }
    }, {
        key: 'getThingScale',

        // gets the basic scaling for thing squares, by level
        value: function getThingScale(level) {
            return Math.pow(0.45, level); // 1, .45, .2025, .091125, ...
        }
    }, {
        key: 'getScale',

        // this is only used for groups
        value: function getScale(group, visitedGroupKeys) {
            if (group) {
                // keep track of groups we've visited to avoid infinite recursion
                // TODO: track down exactly how infinite loops are occurring,
                // or IF they still are since this._map.checkModel was introduced...
                if (visitedGroupKeys && Array.isArray(visitedGroupKeys)) {
                    //console.log('visitedGroupKeys: ' + visitedGroupKeys);
                    if (_.contains(visitedGroupKeys, group.data.key)) {
                        //console.log('hit already visited key: ' + group.data.key);
                        return 1;
                    } else {
                        visitedGroupKeys.push(group.data.key);
                    }
                } else {
                    visitedGroupKeys = [group.data.key];
                }

                if (group.labeledLink) {
                    // R-thing
                    var fromScale = this.getScale(group.labeledLink.fromNode, visitedGroupKeys);
                    var toScale = this.getScale(group.labeledLink.toNode, visitedGroupKeys);
                    //console.log('getScale, fromScale: ' + fromScale + ', toScale: ' + toScale + ', visitedGroupKeys: ' + visitedGroupKeys.join(','));
                    return Math.min(fromScale, toScale) * 0.5;
                } else if (group.containingGroup) {
                    return this.getScale(group.containingGroup, visitedGroupKeys) * 0.45;
                } else {
                    return this.getThingScale(this.computeLevel(group));
                }
            }
            return 1; // can occur when dragging R to empty space
        }
    }, {
        key: 'getExternalTextScale',
        value: function getExternalTextScale(group) {
            return 1 - 0.1 * this.computeLevel(group);
        }
    }, {
        key: 'getLinkStrokeWidth',
        value: function getLinkStrokeWidth(link) {
            var fromScale = this.getScale(link.fromNode);
            var toScale = this.getScale(link.toNode);
            return (link.isSelected ? 4 : 2) * Math.min(fromScale, toScale); // 2, .9, ...
        }
    }, {
        key: 'getArrowheadScale',

        // scale arrowheads based on the smallest to/from node,
        // or just the To node for P links
        value: function getArrowheadScale(link) {
            var fromScale = this.getScale(link.fromNode);
            var toScale = this.getScale(link.toNode);
            var minScale = Math.min(fromScale, toScale);
            //console.log("getArrowheadScale, fromScale: ", fromScale, ', toScale: ', toScale, ', minScale: ', minScale);
            if (link.data.category === 'P') {
                minScale = toScale;
            }
            if (minScale >= 1) {
                return 1 * minScale;
            } else {
                return 1.5 * minScale;
            }
        }
    }, {
        key: 'getNewSisterLocation',

        // -------------- creating new things ----------------------

        // Returns a location for a new sister group (thing) to the given one,
        // which will not hide any existing things (overlap is allowed).
        // The returned coordinates are absolute for a top-level group,
        // or relative to the parent otherwise - suitable for use with FreehandDiagramLayout
        // or FreehandLayout, resp.
        value: function getNewSisterLocation(group, withR) {
            var diagram = this._map.getDiagram();
            // if we are within another group, things are in absolute coordinates
            // and sisters are placed above the thing; otherwise relative and below...
            var inGroup = group.containingGroup !== null;
            // ... except if withR is true, we go to the right instead of above or below.

            // start below if in group, else above; or to the right if withR
            var x = undefined,
                y = undefined,
                w = undefined,
                h = undefined;
            if (withR) {
                x = group.location.x + group.actualBounds.width * 2.2;
                y = group.location.y;
            } else {
                x = group.location.x;
                y = group.location.y + group.actualBounds.height * 1.1 * (inGroup ? 1 : -1);
            }
            w = group.actualBounds.width;
            h = group.actualBounds.height;

            // check for overlapping parts; if found, increment x,y and continue

            while (true) {
                var rect = new go.Rect(x, y, w, h);
                rect.grow(h / 10, w / 10, h / 10, w / 10);
                var parts = diagram.findObjectsIn(rect, null, this.isGroup);
                if (parts.count) {
                    console.log('getNewSisterLocation: overlapping part found in ' + rect);
                    if (withR) {
                        x += w / 10;
                        y += h / 10;
                    } else {
                        x += w / 10;
                        y += h / 10 * (inGroup ? 1 : -1); // move down if in group, else up
                    }
                } else {
                    console.log('getNewSisterLocation: no overlapping part found in ' + rect);
                    break;
                }
            }
            if (inGroup) {
                // make coordinates relative
                x -= group.containingGroup.location.x;
                y -= group.containingGroup.location.y;
            }
            return new go.Point(x + Math.random(), y + Math.random());
        }
    }, {
        key: 'getNewChildLocation',

        // Returns a location for a new child group (thing) to the given one,
        // which will not hide any existing children (overlap is allowed).
        // The returned coordinates are relative to the parent group - suitable for use with FreehandLayout.
        value: function getNewChildLocation(group) {
            var groupBounds = group.actualBounds;
            // NB: all x/y locations are relative to the group location
            var x = 0;
            var y = groupBounds.height * 1.1;
            var w = undefined,
                h = undefined;
            var members = group.memberParts;
            // keep testing new rectangles until we find one that doesn't overlap with any existing member of the group
            while (true) {
                members.reset();
                var overlaps = false;
                var member = undefined,
                    newRect = undefined,
                    memberRect = undefined;
                while (members.next()) {
                    member = members.value;
                    var memberBounds = member.actualBounds;
                    w = memberBounds.width;
                    h = memberBounds.height;
                    // find the existing member's actual bounds (absolute coords)
                    memberRect = new go.Rect(memberBounds.x - groupBounds.x, memberBounds.y - groupBounds.y, memberBounds.width, memberBounds.height);
                    newRect = new go.Rect(x, y, w, h);
                    newRect.grow(h / 5, w / 5, h / 5, w / 5);
                    overlaps = newRect.containsRect(memberRect);
                    console.log('getNewChildLocation for ' + member + ': newRect = ' + newRect + ', memberRect = ' + memberRect + ', overlaps: ' + overlaps);
                    if (overlaps) {
                        break;
                    }
                }
                if (overlaps) {
                    // increment x, y and try again
                    x += w / 5;
                    y += h / 5;
                } else {
                    // found a good spot!
                    break;
                }
            }
            return new go.Point(x, y);
        }
    }, {
        key: 'getNewChildLocation2',

        // a simpler version of getNewChildLocation that places the child outside the bounds of the existing children
        value: function getNewChildLocation2(group) {
            var groupBounds = group.actualBounds;
            var childBounds = this._map.safeRect(this._map.getDiagram().computePartsBounds(group.memberParts));
            var x = 0;
            var y = 0;
            if (!group.memberParts.count) {
                y = groupBounds.height * 1.2;
            } else {
                y = groupBounds.height * 1.4 + childBounds.height;
            }
            //console.log('getNewChildLocation2, childBounds: ' + childBounds + ', groupBounds: ' + groupBounds + ', x: ' + x + ', y: ' + y);
            return new go.Point(x, y);
        }
    }, {
        key: 'layoutNewMembersRelativeTo',

        // move all the given new member groups so that their locations are relative to that of
        // the parent and its previously existing members, and scaled down appropriately
        value: function layoutNewMembersRelativeTo(newMembers, parent, oldMemberBounds) {
            // how big was the parent system before the new groups were added?
            var systemBounds = parent.actualBounds.unionRect(oldMemberBounds);

            // figure out old/new origins - place new origin below existing system
            var oldBounds = this._map.getDiagram().computePartsBounds(newMembers);
            var oldOrigin = new go.Point(oldBounds.x, oldBounds.y);
            var newOrigin = new go.Point(0, systemBounds.height * 1.2);
            console.log('layoutNewMembersRelativeTo, systemBounds: ' + systemBounds + ', oldBounds: ' + oldBounds + ', oldOrigin: ' + oldOrigin + ', newOrigin: ' + newOrigin);

            // figure out new scaled locations
            // NB: we can assume newMembers are all one level down from parent (see this._map.addSelectedThingsAsChildrenOf),
            // so we just multiply by the standard scale factor
            var it = newMembers.iterator;
            while (it.next()) {
                var group = it.value;
                var groupBounds = group.actualBounds;
                var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) * 0.45;
                var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) * 0.45;
                var newLoc = go.Point.stringify(new go.Point(newX, newY));
                console.log('layoutNewMembersRelativeTo, groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
                this._map.getDiagram().model.setDataProperty(group.data, 'loc', newLoc);
            }
        }
    }, {
        key: 'layoutOldMembersOutsideOf',

        // move all the given old member groups so that their locations are absolute and above
        // the parent, and scaled up appropriately
        value: function layoutOldMembersOutsideOf(oldMembers, parent, oldMembersBounds, oldMembersLevel) {
            // figure out scale factor (members can be dragged up multiple levels, unlike dragging into S)
            var scaleFactor = Math.pow(0.45, oldMembersLevel - this.computeLevel(parent));
            console.log('layoutOldMembersOutsideOf, scaleFactor: ' + scaleFactor);

            // figure out old/new origins - place new origin above parent, with vertical space for scaled-up oldMembers
            var parentBounds = parent.actualBounds;
            var oldOrigin = new go.Point(oldMembersBounds.x, oldMembersBounds.y);
            var newOrigin = new go.Point(parentBounds.x, parentBounds.y - oldMembersBounds.height * 1.2 / scaleFactor);

            // figure out new scaled locations
            var it = oldMembers.iterator;
            while (it.next()) {
                var group = it.value;
                var groupBounds = group.actualBounds;
                var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) / scaleFactor;
                var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) / scaleFactor;
                var newLoc = go.Point.stringify(new go.Point(newX, newY));
                console.log('layoutOldMembersOutsideOf, parentBounds: ' + parentBounds + ', oldMembersBounds: ' + oldMembersBounds + ', newOrigin: ' + newOrigin + ', groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
                this._map.getDiagram().model.setDataProperty(group.data, 'loc', go.Point.stringify(newLoc));
            }
        }
    }, {
        key: 'getLayout',

        // ----------------- accessors -------------------

        // returns the appropriate layout class by abbreviated name
        value: function getLayout(layoutName) {
            var LeftInventoryLayout = require('./layouts/LeftInventoryLayout.js');
            var RightInventoryLayout = require('./layouts/RightInventoryLayout.js');
            var StackedLayout = require('./layouts/StackedLayout.js');
            var FreehandLayout = require('./layouts/FreehandLayout.js');
            if (layoutName === 'freehand') return new FreehandLayout();else if (layoutName === 'right') return new RightInventoryLayout();else if (layoutName === 'stacked') return new StackedLayout();else return new LeftInventoryLayout();
        }
    }, {
        key: 'getFreehandDiagramLayout',
        value: function getFreehandDiagramLayout() {
            var FreehandDiagramLayout = require('./layouts/FreehandDiagramLayout.js');
            return new FreehandDiagramLayout();
        }
    }, {
        key: 'getCommonAncestorWithLayout',

        // --------------------------------------------------------------

        // returns true if the to and from nodes for the link have a common ancestor group with one of the given layout names.
        // TODO: verify logic - what if there are multiple such ancestors? - this should return the highest one...
        value: function getCommonAncestorWithLayout(group1, group2, layoutNames) {
            var ancestors1 = this.getAncestorGroups(group1);
            var ancestors2 = this.getAncestorGroups(group2);
            var commonAncestors = _.intersection(ancestors1, ancestors2);
            var layoutAncestors = _.filter(commonAncestors, function (group) {
                return _.indexOf(layoutNames, group.data.layout) !== -1;
            });
            if (layoutAncestors.length) {
                return layoutAncestors[0];
            } else {
                return null;
            }
        }
    }, {
        key: 'getAncestorGroups',

        // returns the ancestors of this group, including itself
        value: function getAncestorGroups(group) {
            var ancestors = [group];
            var g = group;
            while (g.containingGroup) {
                ancestors.push(g.containingGroup);
                g = g.containingGroup;
            }
            return ancestors;
        }
    }, {
        key: 'validateGroupLocations',

        // --------------------------------------------------------------

        // if any group in the given Iterator does not have a location (data.loc), set one
        // that doesn't overlap with the other members
        value: function validateGroupLocations(groups) {}
    }, {
        key: 'adjustLinkLayout',

        // --------------------------------------------------------------

        // ------------------------ link routing and visibility ------------------------------

        // adjust the routing, visibility and other properties of a link according to various structural criteria
        value: function adjustLinkLayout(link) {
            if (!link || !link.fromNode || !link.toNode) {
                return;
            }

            // let loc = link.location;
            // if (isNaN(loc.x) || isNaN(loc.y)) {
            //     link.location = new go.Point(10, 10);
            //     console.log('adjustLinkLayout, link.location: ' + link.location);
            // }
            // console.log('adjustLinkLayout, link.location: ' + link.location);

            // see if link is within a stacked or inventory layout, or if it's a hidden P link
            var inventoryAncestor = this.getCommonAncestorWithLayout(link.fromNode, link.toNode, ['left', 'right']);
            var stackedAncestor = this.getCommonAncestorWithLayout(link.fromNode, link.toNode, ['stacked']);
            var hidePLink = link.data && link.data.category === 'P' && !this._map.templates.showPLink(link);
            var crowdedRThing = this.hasCrowdedRThing(link);

            // see if this is one of multiple links between the same two nodes
            var snpos = this.getSameNodesLinkPosition(link);
            var isMultiLink = snpos.count > 1;
            //console.log('snpos for link ' + link + ': ' + snpos.index + ' of ' + snpos.count);

            if (inventoryAncestor) {
                this.applyInventoryCurveRouting(link, snpos, inventoryAncestor.data.layout);
            } else if (isMultiLink) {
                this.applyMultilinkCurveRouting(link, snpos);
            } else if (crowdedRThing) {
                this.applyInventoryCurveRouting(link, snpos, 'left');
            } else {
                this.applyStraightRouting(link);
            }

            // show link only if both connected things are visible (no collapsed ancestors);
            // hide if both are in stacked layout or if it's a P-link that we shouldn't be showing now
            if (this.fromAndToNodesAreVisible(link) && !stackedAncestor && !hidePLink) {
                link.opacity = 1;
                this.showLabelNodes(link, true);
            } else {
                link.opacity = 0;
                this.showLabelNodes(link, false);
            }
        }
    }, {
        key: 'hasCrowdedRThing',

        // TODO: detect when the R-thing overlaps both from and to nodes, so we can change the link routing
        value: function hasCrowdedRThing(link) {
            return false;
        }
    }, {
        key: 'showLabelNodes',
        value: function showLabelNodes(link, show) {
            //console.log('showLabelNodes, link: ' + link + ', show: ' + show);
            var it = link.labelNodes;
            if (it) {
                while (it.next()) {
                    var group = it.value;
                    group.visible = show;
                    if (show) {
                        group.layout.doLayout(group);
                    }
                }
            }
        }
    }, {
        key: 'applyInventoryCurveRouting',

        // if link is between two things in the same inventory layout (single or multiple),
        // make the line more or less circular on the appropriate side
        value: function applyInventoryCurveRouting(link, snpos, ancestorLayout) {
            if (ancestorLayout === 'left') {
                link.fromSpot = go.Spot.Left;
                link.toSpot = go.Spot.Left;
            } else if (ancestorLayout === 'right') {
                link.fromSpot = go.Spot.Right;
                link.toSpot = go.Spot.Right;
            }

            // aspect ratio for the link curves - make this smaller to make them taller, larger to make them fatter
            var curveRatio = 0.6;

            var y1 = link.fromNode.actualBounds.y;
            var y2 = link.toNode.actualBounds.y;

            var yDiff = Math.abs(y2 - y1);
            var c = (yDiff === 0 ? 50 : Math.floor(yDiff * curveRatio)) + 100 * (snpos.index / snpos.count);
            //console.log("yDiff = " + yDiff + ', c = ' + c + ' (' + link.fromNode.data.text + ' - ' + p1 + ' - to ' + link.toNode.data.text + ' - ' + p2 + ')');

            link.curve = go.Link.Bezier;
            link.fromEndSegmentLength = c;
            link.toEndSegmentLength = c;
        }
    }, {
        key: 'applyMultilinkCurveRouting',

        // if non-inventory link is one of multiple ones between same nodes, make it curved
        value: function applyMultilinkCurveRouting(link, snpos) {
            link.fromSpot = go.Spot.Default;
            link.toSpot = go.Spot.Default;
            link.curve = go.Link.Bezier;
            // curviness values based on number of links:
            // 2: -25 25
            // 3: -50 0 50
            // 4: -100 -50 0 50 100
            var rangeSize = 10 * (snpos.count - 1);
            var rangeIncrement = 10;
            if (snpos.hasRThing) {
                rangeSize = 100 * (snpos.count - 1);
                rangeIncrement = 100;
            }

            // adjust curviness for smaller scales
            var linkScaleFactor = this.getLinkStrokeWidth(link) / 2; // 2 is max stroke width
            rangeSize *= linkScaleFactor;
            rangeIncrement *= linkScaleFactor;

            var rangeStart = 0 - rangeSize / 2;

            link.curviness = (rangeStart + rangeIncrement * snpos.index) * snpos.orientation;
            // console.log('applyMultilinkCurveRouting, link: ' + link + ', curviness: ' + link.curviness);
        }
    }, {
        key: 'applyStraightRouting',

        // do normal straight lines for freehand layout, or links between descendants of things with different layouts
        value: function applyStraightRouting(link) {
            link.fromSpot = go.Spot.Default;
            link.toSpot = go.Spot.Default;
            link.routing = go.Link.Normal;
            link.curve = go.Link.None;
            link.curviness = 0;
        }
    }, {
        key: 'getSameNodesLinkPosition',

        // --------------- calculate how many links there are between a link's nodes ---------------

        // Returns an object of the format { index: 1, count: 2, orientation: -1, hasRThing: false },
        // indicating how many other links there are between the same pair of nodes,
        // where the given link falls within this list, and what its orientation is.
        value: function getSameNodesLinkPosition(link) {
            var linksByNodes = this.getLinksByNodes(true);
            // get links with the same key as this one (connecting same nodes)
            var sameLinks = _.where(linksByNodes, {
                key: this.getSameNodesLinkKey(link)
            });

            // default return value
            var snpos = {
                index: 0,
                count: 1,
                orientation: 1,
                hasRThing: false
            };
            // set index, count, orientation
            for (var i = 0; i < sameLinks.length; i++) {
                if (sameLinks[i].link === link) {
                    snpos = {
                        index: i,
                        count: sameLinks.length,
                        orientation: this.getLinkOrientation(link)
                    };
                }
            }
            // check for Rthing
            for (var i = 0; i < sameLinks.length; i++) {
                if (sameLinks[i].hasRThing) {
                    snpos.hasRThing = true;
                }
            }
            return snpos;
        }
    }, {
        key: 'getStackMargin',

        // gets the margin to be used in stack layout between this group's children
        value: function getStackMargin(group) {
            return 10 / 0.45 * this.getScale(group);
        }
    }, {
        key: 'layoutMembersForStacked',

        // returns the max y value after laying out the last part
        value: function layoutMembersForStacked(group, startX, startY) {
            var _this = this;

            var members = this.getOrderedMembers(group);
            var x = startX;
            var y = startY;
            var rowCount = 0;
            var maxStartY = startY;
            _.each(members, function (part) {
                if (part instanceof go.Group && !part.isLinkLabel) {
                    var margin = _this.getStackMargin(part);
                    part.move(new go.Point(x, y));
                    startY = y + part.actualBounds.height + margin / 2; // start Y position for part's children

                    //console.log('layoutMembersForStacked: starting layout of children of ' + part + ' at ' + Math.round(x) + ',' + Math.round(startY));

                    if (part.isSubGraphExpanded) {
                        // layout children of this part; check if we've already done a taller part+children in current row
                        maxStartY = Math.max(maxStartY, _this.layoutMembersForStacked(part, x, startY));
                        //console.log('layoutMembersForStacked: laid out children of ' + part + ', maxStartY is now ' + Math.round(maxStartY));
                    } else {
                        maxStartY = Math.max(maxStartY, startY);
                    }

                    // decide whether to wrap
                    rowCount++;
                    if (rowCount < 2) {
                        // keep going on this line
                        x += part.actualBounds.width + margin;
                    } else {
                        // wrap to next line
                        x = startX;
                        y = maxStartY + margin / 2;
                        rowCount = 0;
                    }
                }
            });
            return maxStartY;
        }
    }, {
        key: 'getInventoryMargin',

        // shared stuff for Left/Right Inventory layouts...

        // gets the margin to be used in stack layout between this group's children
        value: function getInventoryMargin(group) {
            if (this.computeLevel(group) <= 2) {
                return 10 * this.getScale(group);
            } else {
                return 3 * this.getScale(group);
            }
        }
    }, {
        key: 'layoutMembersForInventory',

        // returns the max y value after laying out the last part
        // side is 'L' or 'R'
        value: function layoutMembersForInventory(group, startX, startY, side) {
            var _this2 = this;

            var members = this.getOrderedMembers(group);
            _.each(members, function (part) {
                var x = startX; // for left, just use x
                if (side === 'R') x = startX - part.actualBounds.width; // for right, right-align parts to startX
                //console.log('layoutMembersForInventory, part: ' + part + ' to location: ' + x + ',' + startY);
                part.move(new go.Point(x, startY));
                startY += part.actualBounds.height + _this2.getInventoryMargin(part);
                if (part.isSubGraphExpanded) {
                    //console.log('layoutMembersForInventory, y after moving: ' + part + ' = ' + startY);
                    startY = _this2.layoutMembersForInventory(part, startX, startY, side);
                }
            });
            return startY + this.getInventoryMargin(group);
        }
    }, {
        key: 'getOrderedMembers',

        // returns an array of the group's (non-R-thing) members, sorted by the 'order' data property
        value: function getOrderedMembers(group) {
            var members = new go.List();
            var it = group.memberParts.iterator;
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group && !part.isLinkLabel) {
                    members.add(part);
                }
            }
            return _.sortBy(members.toArray(), function (member) {
                return member.data.order;
            });
        }
    }, {
        key: 'getLinksByNodes',

        // refreshes the cached list of all links with keys, to facilitate grouping them according to connected nodes
        value: function getLinksByNodes(refresh) {
            //console.log('getLinksByNodes');
            if (!this._linksByNodes || refresh) {
                this._linksByNodes = [];
                var diagram = this._map.getDiagram();
                var links = diagram.links.iterator;
                while (links.next()) {
                    var link = links.value;
                    var key = this.getSameNodesLinkKey(link);
                    if (key) {
                        this._linksByNodes.push({
                            key: key,
                            link: link,
                            hasRThing: link.labelNodes.count > 0
                        });
                    }
                }
            }
            return this._linksByNodes;
        }
    }, {
        key: 'getSameNodesLinkKey',

        // Returns a key used to group links according to which pair of nodes they connect.
        // The returned key is non-empty for regular links and P links that should be shown currently,
        // so that these will all be routed by the same rules. A null key is returned for any other
        // links, indicating that no grouping is required.
        value: function getSameNodesLinkKey(link) {
            //        if (this.isRLink(link) || (this.isPLink(link) && this._map.templates.showPLink(link))) {
            if (this.isRLink(link)) {
                var key = [link.fromNode.toString(), link.toNode.toString()].sort().join('|');
                //console.log('key: ' + key);
                return key;
            } else {
                return null;
            }
        }
    }, {
        key: 'getLinkOrientation',

        // We use this to distinguish an A-B link from a B-A link (based on fromNode and toNode, which
        // is independent of the arrowhead settings) when setting curviness, because setting curviness = 25
        // on an A-B link is the same as curviness = -25 on a B-A link.
        value: function getLinkOrientation(link) {
            if (link.fromNode && link.toNode && link.fromNode.toString() < link.toNode.toString()) {
                return 1;
            } else {
                return -1;
            }
        }
    }, {
        key: 'isRLink',

        // -------------- link tests ---------------

        value: function isRLink(link) {
            return link instanceof go.Link && link.data && !link.data.category && link.fromNode && link.toNode;
        }
    }, {
        key: 'isDLink',
        value: function isDLink(link) {
            return link instanceof go.Link && link.data && link.data.category === 'D';
        }
    }, {
        key: 'isPLink',
        value: function isPLink(link) {
            return link instanceof go.Link && link.data && link.data.category === 'P';
        }
    }, {
        key: 'isGroup',
        value: function isGroup(obj) {
            return obj instanceof go.Group;
        }
    }]);

    return Layouts;
})();

module.exports = Layouts;

//console.log('Layouts, PartCreated');
// setNewPartLocationData(e);

// stacked?

},{"./layouts/FreehandDiagramLayout.js":40,"./layouts/FreehandLayout.js":41,"./layouts/LeftInventoryLayout.js":42,"./layouts/RightInventoryLayout.js":43,"./layouts/StackedLayout.js":44}],32:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EditorConfig = require('./EditorConfig.js');

var MILLION = 1000 * 1000;
var LEFT = 'left';
var RIGHT = 'right';
var go = window.go;

var Map = (function () {
    function Map() {
        var config = arguments[0] === undefined ? {} : arguments[0];

        _classCallCheck(this, Map);

        this._editor = config.Editor;

        this._config = new EditorConfig(this._editor, this);
        this.analytics = this._config.analytics;
        this.attachments = this._config.attachments;
        this.autosave = this._config.autosave;
        this.editorOptions = this._config.editorOptions;
        this.generator = this._config.generator;
        this.layouts = this._config.layouts;
        this.perspectives = this._config.perspectives;
        this.presenter = this._config.presenter;
        this.standards = this._config.standards;
        this.templates = this._config.templates;
        this.tests = this._config.tests;
        this.ui = this._config.ui;

        //this._analytics = new SandbankEditor.Analytics(this._editor, this);
        //this._attachments = new SandbankEditor.Attachments(this._editor, this);
        //this._autosave = new SandbankEditor.Autosave(this._editor, this);
        //this._generator = new SandbankEditor.Generator(this._editor, this);
        //this._layouts = new SandbankEditor.Layouts(this._editor, this);
        //this._perspectives = new SandbankEditor.Perspectives(this._editor, this);
        //this._presenter = new SandbankEditor.Presenter(this._editor, this);
        //this._standards = new SandbankEditor.Standards(this._editor, this);
        //this._templates = new SandbankEditor.Templates(this._editor, this);
        //this._tests = new SandbankEditor.Tests(this._editor, this);
        //this._ui = new SandbankEditor.UI(this._editor, this);

        // call init for each component, if defined
        _.each(this.getComponents(), function (component) {
            if (component && component.init) component.init();
        });

        // create diagram
        this._diagram = new go.Diagram('diagram');
        this._diagram.initialContentAlignment = go.Spot.Center;
        this._diagram.initialViewportSpot = go.Spot.Center;
        this._diagram.initialDocumentSpot = go.Spot.Center;
        this._diagram.hasHorizontalScrollbar = false;
        this._diagram.hasVerticalScrollbar = false;
        this._diagram.padding = 500;
        this._diagram.layout = this.layouts.getFreehandDiagramLayout();

        this.initTools();
        this.templates.initTemplates(this._diagram); // set up templates, customize temporary link behavior
        this.addDiagramListeners();

        this.templates.addExportFooter();
    }

    _createClass(Map, [{
        key: 'printSlides',
        value: function printSlides() {
            this.presenter.createSlideThumbnails();

            setTimeout(function () {
                window.print();
            }, 500);
        }
    }, {
        key: 'exportToImage',
        value: function exportToImage(format) {
            var _this = this;

            this.imageExportLoading = true;
            $('#export-image img').remove();
            this.templates.showExportFooter();

            var rect = this.getDiagram().computePartsBounds(this.getDiagram().nodes).copy();

            var imageMB = rect.width * rect.height * 4 / MILLION; // 4 bytes/pixel
            //console.log('imageMB: ' + imageMB);

            // make the max size of the image 10MB
            // pngSize = imageMB * scale * scale
            // so max scale = sqrt(pngSize / imageMB)
            // These calculations don't seem to be right, but in practice using 500 here
            // we get a scale of 2.43 for an image 19984 x 3424 pixels
            // which results in a file size of 1.88 MB at 32 bits/pixel...
            // OR 28380 x 5196 pixels, scale = 3.41 => file size = 3.49 MB
            var scale = 4;
            if (imageMB) {
                scale = Math.min(4, Math.sqrt(50 / imageMB));
            }

            //console.log('image dimensions: ' + rect.width + ' x ' + rect.height + ', image bytes: ' + (rect.width * rect.height * 4) +
            //        ', imageMB: ' + imageMB + ', scale: ' + scale);

            this.showImageExport = true;

            var partsToExport = new go.List();
            partsToExport.addAll(this.getDiagram().nodes);
            partsToExport.addAll(this.getDiagram().links);
            partsToExport.remove(this.presenter.slideBlocker);

            var doImage = $timeout(function () {
                var img = _this.getDiagram().makeImage({
                    parts: partsToExport,
                    maxSize: new go.Size((rect.width + 200) * scale, (rect.height + 200) * scale),
                    scale: scale,
                    padding: 100 * scale,
                    background: '#ffffff'
                });

                $('#export-image').append(img);
                _this.imageExportLoading = false;

                _this.templates.hideExportFooter();
            }, 100);
        }
    }, {
        key: 'getComponents',

        // ------------ component accessors ----------------

        value: function getComponents() {
            return [this.analytics, this.attachments, this.autosave, this.generator,
            // this._history,
            this.layouts, this.perspectives, this.presenter, this.standards, this.templates, this.tests, this.ui];
        }
    }, {
        key: 'currentTab',
        get: function () {
            return this._currentTab;
        },
        set: function (val) {
            // watch for tab changes
            // TODO: restore non-Angular version of this
            //this._editor.$watch('currentTab', function(newValue, oldValue) {
            //    this.currentTabChanged(newValue, oldValue);
            //});
            this.currentTabChanged(this._currentTab, val);
            this._currentTab = val;
        }
    }, {
        key: 'currentTabChanged',

        // this is called by a this._editor.$watch in init()
        value: function currentTabChanged(newValue, oldValue) {
            // console.log('currentTabChanged, newValue: ' + newValue + ', oldValue: ' + oldValue);
            // notify any interested components
            _.each(this.getComponents(), function (component) {
                if (component && component.currentTabChanged) {
                    component.currentTabChanged(newValue, oldValue);
                }
            });

            //this._editor.safeApply();
        }
    }, {
        key: 'getDiagram',
        value: function getDiagram() {
            return this._diagram;
        }
    }, {
        key: 'initTools',

        // misc. tool configuration
        value: function initTools() {
            var _this2 = this;

            // disable clicking on TextBlocks to edit - we will invoke editing in other ways
            this._diagram.allowTextEdit = false;

            // select text when activating editor;
            // use shift-enter to create new lines, enter to finish editing (NB: editor has multiline=true)
            var textTool = this._diagram.toolManager.textEditingTool;
            textTool.doActivate = function () {
                go.TextEditingTool.prototype.doActivate.call(textTool);
                if (textTool.defaultTextEditor) {
                    textTool.defaultTextEditor.select();

                    textTool.defaultTextEditor.addEventListener('keydown', function (e) {
                        if (e.which === 13 && !e.shiftKey) {
                            go.TextEditingTool.prototype.acceptText.call(textTool, go.TextEditingTool.LostFocus);
                        }
                    });
                }
            };

            // handle delete key on Mac (default behavior only uses fn-Delete to delete from canvas)
            this._diagram.commandHandler.doKeyDown = function () {
                var e = _this2._diagram.lastInput;
                var cmd = _this2._diagram.commandHandler;
                if (e.event.which === 8) {
                    cmd.deleteSelection();
                } else {
                    go.CommandHandler.prototype.doKeyDown.call(cmd); // call base method with no arguments
                }
            };

            // [disable keyboard shortcuts, as these do not do centering on zoom,
            // and can lead to confusion with browser zoom (which gets fired depends on focus)]
            // - turned back on to support pinch/zoom on iPad
            this._diagram.allowZoom = true;

            this._diagram.toolManager.mouseWheelBehavior = go.ToolManager.WheelZoom;

            // decide what kinds of Parts can be added to a Group or to top-level
            // this._diagram.commandHandler.memberValidation (grp, node) {
            //     //if (grp instanceof go.Group && node instanceof go.Group) return false;  // cannot add Groups to Groups
            //     return true;
            // };

            // default link attributes
            this._diagram.toolManager.linkingTool.archetypeLinkData = {
                type: 'noArrows'
            };

            // allow double-click in background to create a new node
            this._diagram.toolManager.clickCreatingTool.archetypeNodeData = this.getNewThingData();

            // how long mouse must be held stationary before starting a drag-select (instead of a scroll) - default was 175ms
            this._diagram.toolManager.dragSelectingTool.delay = 400;
        }
    }, {
        key: 'addDiagramListeners',

        // ----------- handling of DiagramEvents --------------------

        value: function addDiagramListeners() {
            var _this3 = this;

            // DiagramEvents to be handled here or by a component
            var diagramEvents = ['InitialLayoutCompleted', 'ChangedSelection', 'BackgroundSingleClicked', 'SelectionCopied', 'SelectionMoved', 'SelectionDeleting', 'SelectionDeleted', 'PartCreated', 'PartResized', 'ClipboardChanged', 'ClipboardPasted', 'LinkDrawn', 'LinkRelinked', 'ViewportBoundsChanged'];
            _.each(diagramEvents, function (eventName) {
                _this3._diagram.addDiagramListener(eventName, function (e) {
                    _this3.broadcastDiagramEvent(eventName, e);
                });
            });

            this._diagram.addDiagramListener('BackgroundContextClicked', function (e) {});
        }
    }, {
        key: 'broadcastDiagramEvent',

        // broadcasts the given DiagramEvent (see apidocs for go.DiagramEvent)
        // to any components that may be interested, including this one.
        value: function broadcastDiagramEvent(eventName, e) {
            this.handleDiagramEvent(eventName, e);
            _.each(this.getComponents(), function (component) {
                if (component && component.handleDiagramEvent) component.handleDiagramEvent(eventName, e);
            });
        }
    }, {
        key: 'handleDiagramEvent',
        value: function handleDiagramEvent(eventName, e) {
            //console.log('handleDiagramEvent: ' + eventName);
            if (eventName === 'ChangedSelection') {
                this.changedSelection(e);
            } else if (eventName === 'SelectionCopied') {
                this.selectionCopied(e);
            } else if (eventName === 'PartCreated') {
                this.partCreated(e);
            } else if (eventName === 'BackgroundSingleClicked') {
                this.ui.showHelpTip('canvasTip');
            } else if (eventName === 'LinkDrawn') {
                this.linkDrawn(e);
                this.setNewLinkDirection(e);
            } else if (eventName === 'LinkRelinked') {
                this.linkRelinked(e);
            } else if (eventName === 'ClipboardChanged') {
                this.clipboardChanged(e);
            } else if (eventName === 'ClipboardPasted') {
                this.clipboardPasted(e);
            }
        }
    }, {
        key: 'changedSelection',

        // handle zoom to region if applicable
        value: function changedSelection(e) {
            //console.log('this.changedSelection');
            this._diagram.updateAllTargetBindings();
            this.ui.maybeZoomToRegion();
            if (this.relationshipsSelected()) {
                this.ui.showHelpTip('relationshipTip');
            }
        }
    }, {
        key: 'partCreated',
        value: function partCreated(e) {
            //console.log('Map, PartCreated');
            var group = e.subject;
            if (!(group instanceof go.Group)) {
                return;
            }
            this._diagram.model.setDataProperty(group.data, 'layout', this.editorOptions.defaultThingLayout || 'left');
            this.layouts.setNewPartLocationData(e);
        }
    }, {
        key: 'linkDrawn',

        // fix link ports when a link is created -
        // the P and R ports both cover the whole node, and the P port is on top of the R port,
        // so both P and R links get the toPort set to P by default.
        value: function linkDrawn(e) {
            var link = e.subject;
            console.log('linkDrawn, link: ' + link + ', fromPort: ' + link.fromPortId + ', toPort: ' + link.toPortId);
            if (link.fromPortId === 'P') {
                this._diagram.model.startTransaction('change link category');
                this._diagram.model.setDataProperty(link.data, 'toPort', 'P');
                this._diagram.model.setDataProperty(link.data, 'category', 'P');
                this._diagram.model.commitTransaction('change link category');
            }
            // prevent links from R to P
            else if (link.fromPortId === 'R') {
                this._diagram.model.startTransaction('change link toPort');
                this._diagram.model.setDataProperty(link.data, 'toPort', 'R');
                this._diagram.model.commitTransaction('change link toPort');
            }
        }
    }, {
        key: 'linkRelinked',

        // fix link ports when a link is relinked -
        // dragging either end of an R-link to another node will set the corresponding port to P,
        // since P port is on top of R port, so we reset both ports to R if the category is not P.
        value: function linkRelinked(e) {
            var link = e.subject;
            if (!link.data.category || link.data.category !== 'P') {
                this._diagram.model.setDataProperty(link.data, 'fromPort', 'R');
                this._diagram.model.setDataProperty(link.data, 'toPort', 'R');
            }
        }
    }, {
        key: 'setNewLinkDirection',
        value: function setNewLinkDirection(e) {
            var link = e.subject;
            if (link.fromPortId === 'R') {
                this._diagram.model.startTransaction('change link direction');
                this._diagram.model.setDataProperty(link.data, 'type', this.editorOptions.defaultRelationshipDirection);
                this._diagram.commitTransaction('change link direction');
            }
        }
    }, {
        key: 'clipboardChanged',
        value: function clipboardChanged(e) {
            var parts = e.subject.iterator;
            while (parts.next()) {
                var part = parts.value;
                if (part instanceof go.Group) {
                    console.log('clipboardChanged: part ' + part + ', mainpanel scale: ' + part.findObject('mainpanel').scale);
                }
            }
        }
    }, {
        key: 'selectionCopied',

        // NB: this is called when parts are copied by control-drag, NOT when the copy button is clicked
        value: function selectionCopied(e) {
            console.log('selectionCopied');
            var parts = e.subject.iterator;
            while (parts.next()) {
                var part = parts.value;
                if (part instanceof go.Group && part.isTopLevel) {
                    var loc = go.Point.parse(part.data.loc);
                    console.log('selectionCopied: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                    this._diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                    part.updateTargetBindings('loc');
                }
            }
        }
    }, {
        key: 'clipboardPasted',
        value: function clipboardPasted(e) {
            var parts = e.subject.iterator;
            while (parts.next()) {
                var part = parts.value;
                if (part instanceof go.Group && part.isTopLevel) {
                    var loc = go.Point.parse(part.data.loc);
                    //console.log('clipboardPasted: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                    this._diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                    part.updateTargetBindings('loc');
                }
            }
        }
    }, {
        key: 'computeMapBounds',

        // computes the bounds of all groups in the diagram - this includes all ideas/things,
        // and excludes nodes, including slides, the slide blocker, and the export footer
        value: function computeMapBounds() {
            var groups = new go.List(go.Group);
            var nodes = this._diagram.nodes;
            while (nodes.next()) {
                if (nodes.value instanceof go.Group) {
                    groups.add(nodes.value);
                }
            }
            return this._diagram.computePartsBounds(groups).copy(); // return a mutable rect
        }
    }, {
        key: 'thingsSelected',

        // ------------ what is currently selected? ----------------

        // returns true if all selected items are things (i.e. Groups), including r-things
        value: function thingsSelected() {
            if (!this._diagram || this._diagram.selection.count < 1) return false;

            var it = this._diagram.selection.iterator;
            while (it.next()) {
                if (!(it.value instanceof go.Group)) return false;
            }

            return true;
        }
    }, {
        key: 'thingSelected',

        // returns true if exactly one thing (Group) is selected
        value: function thingSelected() {
            return this._diagram && this._diagram.selection.count === 1 && this._diagram.selection.first() instanceof go.Group;
        }
    }, {
        key: 'getUniqueThingSelected',

        // if a single group is selected, returns it, otherwise returns null
        value: function getUniqueThingSelected() {
            if (this._diagram && this._diagram.selection.count === 1 && this._diagram.selection.first() instanceof go.Group) {
                return this._diagram.selection.first();
            } else {
                return null;
            }
        }
    }, {
        key: 'thingsSelectedAreMembersOf',
        value: function thingsSelectedAreMembersOf(group) {
            if (!this._diagram || this._diagram.selection.count < 1) return false;

            var it = this._diagram.selection.iterator;
            while (it.next()) {
                if (!(it.value instanceof go.Group) || it.value.containingGroup !== group) return false;
            }

            return true;
        }
    }, {
        key: 'thingsSelectedAreDescendantsOf',
        value: function thingsSelectedAreDescendantsOf(group) {
            if (!this._diagram || this._diagram.selection.count < 1) return false;

            var it = this._diagram.selection.iterator;
            while (it.next()) {
                var ancestors = this.layouts.getAncestorGroups(it.value);
                if (_.indexOf(ancestors, group) === -1) return false;
            }

            return true;
        }
    }, {
        key: 'thingsSelectedIncludeSlide',
        value: function thingsSelectedIncludeSlide() {
            if (!this._diagram || this._diagram.selection.count < 1) return false;

            var it = this._diagram.selection.iterator;
            while (it.next()) {
                if (it.value.data && it.value.data.category === 'slide') {
                    return true;
                }
            }

            return false;
        }
    }, {
        key: 'relationshipsSelected',

        // returns true if all selected items are relationships (i.e. Links)
        value: function relationshipsSelected() {
            if (!this._diagram || this._diagram.selection.count < 1) return false;

            var it = this._diagram.selection.iterator;
            while (it.next()) {
                if (!(it.value instanceof go.Link) || !this.layouts.isRLink(it.value)) return false;
            }

            return true;
        }
    }, {
        key: 'relationshipSelected',

        // returns true if exactly one relationship (Link) is selected
        value: function relationshipSelected() {
            return this._diagram && this._diagram.selection.count === 1 && this._diagram.selection.first() instanceof go.Link;
        }
    }, {
        key: 'load',

        // ------------ load and initialize model -------------

        value: function load() {
            var url = this._editor.mapUrl + '.json';
            if (this._editor.sandbox) {
                url = this._editor.mapUrl + '.json?sandbox=1';
            }
            //TODO: restore non-Angular http-get for map data
            var data = { 'map': { 'metadata': { 'sandbox': false, 'id': 5547, 'name': 'Untitled Map', 'url': '/maps/5547', 'canEdit': true, 'updatedAt': '2015-05-15T12:29:40.721-04:00', 'updatedBy': null, 'updatedByName': null, 'userTags': [] }, 'data': { 'class': 'go.GraphLinksModel', 'nodeIsLinkLabelProperty': 'isLinkLabel', 'linkLabelKeysProperty': 'labelKeys', 'linkFromPortIdProperty': 'fromPort', 'linkToPortIdProperty': 'toPort', 'nodeDataArray': [{ 'key': 1, 'text': 'New Idea', 'isGroup': true, 'loc': '0 0', 'layout': 'left', 'sExpanded': true, 'pExpanded': true }], 'linkDataArray': [] }, 'stateData': null, editorOptions: null, 'analytics': {}, 'versions': [] } };
            this._diagram.model = go.Model.fromJson(data);
            //this._ui.setStateData(data.map.stateData);
            //this._ui.setMapEditorOptions(data.map._editorOptions);

            this.checkModel();
            this._diagram.updateAllTargetBindings();
            this._diagram.undoManager.isEnabled = true;
            this._diagram.model.addChangedListener(this.autosave.modelChanged);
            this.autosave.saveOnModelChanged = true;
            this._diagram.isReadOnly = !this._editor.canEdit;
            this._editor.updateEditStatus(this._editor.canEdit ? this._editor.LAST_UPDATED : this._editor.READ_ONLY);
            this.ui.resetZoom();
            this.loadMapExtraData(data.map);

            // if no nodes OR in thinkquery mode, launch generator
            if (this._editor.thinkquery || !this._diagram.model.nodeDataArray.length) {
                this.ui.openTab(this.ui.TAB_ID_GENERATOR);
            }
            // if we have slides, play presentation
            else if (!this._editor.canEdit && this.presenter.getSlideNodeDatas().length) {
                this.presenter.playSlide(1);
            }
        }
    }, {
        key: 'loadForSandbox',
        value: function loadForSandbox() {
            this._diagram.model = go.Model.fromJson(this._editor.mapData);
            this.ui.setStateData(''); // important! (otherwise corner highlighting breaks)
            this._diagram.updateAllTargetBindings();
            this._diagram.undoManager.isEnabled = true;
            this.ui.resetZoom();
            this._editor.canEdit = true;

            // if no nodes OR in thinkquery mode, launch generator
            if (this._editor.thinkquery) {
                this.ui.openTab(this.ui.TAB_ID_GENERATOR);
            }
            // if we have slides, play presentation
            else if (this.presenter.getSlideNodeDatas().length) {
                this.presenter.playSlide(1);
            }
        }
    }, {
        key: 'checkModel',

        // fix any structural problems in the model before displaying it
        value: function checkModel() {
            // change "isLinkLabel" property to category:"LinkLabel" (change as of goJS 1.3)
            _.each(this._diagram.model.nodeDataArray, function (nodeData, index, list) {
                if (nodeData.isLinkLabel) {
                    delete nodeData.isLinkLabel;
                    nodeData.category = 'LinkLabel';
                }
            });

            // check for the link label (r-thing) for a link being the same as the from or to node
            // - this can cause infinite recursion in thinks like layout.getScale
            _.each(this._diagram.model.linkDataArray, function (linkData, index, list) {
                var badLabelKeys = [];
                _.each(linkData.labelKeys, function (key, index2, list2) {
                    if (key === linkData.from || key === linkData.to) {
                        console.log('labelKey same as from or to of link: ' + key);
                        badLabelKeys.push(key);
                    }
                });
                linkData.labelKeys = _.difference(linkData.labelKeys, badLabelKeys);
            });
        }
    }, {
        key: 'loadMapExtraData',

        // loads other data besides the diagram model from the json object returned by maps/show.json
        // - this includes points, badges, versions, and map analytics
        // NB: points and badges are set at page load time in layouts/user and users/badges, but
        // we also need to be able to update them here after an autosave

        // TODO: is this still all needed with the newer userProfile stuff?
        value: function loadMapExtraData(mapData) {
            //console.log('map.loadMapExtraData, mapData: ' + mapData);
            this._editor.mapUserTags = mapData.metadata.userTags; // TODO: is this used anywhere?

            //this._editor.map.getHistory().versionList = mapData.versions;
            this.analytics.mapAnalytics = mapData.analytics;
        }
    }, {
        key: 'loadVersion',

        // loads model data for an individual version and displays it
        // NB: this also disables autosave; load() must be called to re-enable it
        value: function loadVersion(id) {
            var _this4 = this;

            $http.get('/mapthis._versions/' + id).then(function (response) {
                if (response.status === 200) {
                    try {
                        //console.log('loaded map version with ID: ' + id);
                        _this4._diagram.model = go.Model.fromJson(response.data);
                        _this4._diagram.updateAllTargetBindings();
                        _this4._diagram.undoManager.isEnabled = false;
                        _this4.autosave.saveOnModelChanged = false;
                        _this4._diagram.layoutDiagram(true);
                        _this4._diagram.isReadOnly = true;
                    } catch (e) {
                        alert('Could not load MetaMap version');
                        console.error(e.message);
                    }
                }
            });
        }
    }, {
        key: 'setEditingBlocked',

        // set whether editing capability is temporarily suspended -
        // this is distinct from the global this._editor.canEdit setting,
        // which if false prevents editing at all times
        value: function setEditingBlocked(val) {
            if (this._editor.canEdit) {
                this._diagram.isReadOnly = val;
            }
        }
    }, {
        key: 'getNewThingData',

        // ------------- creating things in the model -------------------

        // default properties for all new Things (groups) - note that these can be overridden if needed
        value: function getNewThingData() {
            return {
                text: 'Idea',
                isGroup: true,
                layout: this.editorOptions.defaultThingLayout || 'left',
                sExpanded: true,
                pExpanded: true
            };
        }
    }, {
        key: 'createSister',
        value: function createSister(thing) {
            if (!this._editor.canEdit) {
                return null;
            }

            var newLoc = this.layouts.getNewSisterLocation(thing);
            var data = _.extend(this.getNewThingData(), {
                group: thing.data.group,
                text: 'Idea',
                loc: go.Point.stringify(newLoc)
            });
            this._diagram.model.addNodeData(data);
            var newSister = this._diagram.findNodeForData(data);

            // put new sister right after thing (not as the last sibling)
            if (thing.containingGroup) {
                this.moveSiblingNextTo(newSister, thing, RIGHT);
            }
            return newSister;
        }
    }, {
        key: 'createRToSister',
        value: function createRToSister(thing) {
            if (!this._editor.canEdit) {
                return null;
            }

            var thingKey = this._diagram.model.getKeyForNodeData(thing.data);
            //console.log('thingKey: ' + thingKey);
            var newLoc = this.layouts.getNewSisterLocation(thing, true); // withR = true
            var data = _.extend(this.getNewThingData(), {
                group: thing.data.group,
                text: 'Idea',
                loc: go.Point.stringify(newLoc)
            });
            this._diagram.model.addNodeData(data);
            var newSister = this._diagram.findNodeForData(data);
            var groupKey = this._diagram.model.getKeyForNodeData(data);

            // create link
            var linkData = {
                from: thingKey,
                to: groupKey,
                type: 'to',
                fromPort: 'R',
                toPort: 'R'
            };
            this._diagram.model.addLinkData(linkData);

            // put new sister right after thing (not as the last sibling)
            if (thing.containingGroup) {
                this.moveSiblingNextTo(newSister, thing, RIGHT);
            }
            return newSister;
        }
    }, {
        key: 'createChild',
        value: function createChild(thing, name, x, y) {
            if (!this._editor.canEdit) {
                return null;
            }

            var newLoc = this.layouts.getNewChildLocation2(thing);
            if (x || y) {
                newLoc = new go.Point(x, y);
            }
            var data = _.extend(this.getNewThingData(), {
                group: thing.data.key,
                text: name || 'Part',
                loc: go.Point.stringify(newLoc)
            });
            this._diagram.model.addNodeData(data);
            this.layouts.setDescendantLayouts(thing, thing.data.layout);
            var child = this._diagram.findNodeForData(data);
            child.updateTargetBindings();
            return child;
        }
    }, {
        key: 'createRThing',
        value: function createRThing(link, name) {
            if (!this._editor.canEdit) {
                return null;
            }

            // console.log('createRThing, link: ' + link + ', name: ' + name);
            // don't allow multiple R-things
            if (link.isLabeledLink) {
                // console.log('cannot create RThing, link is already labeled');
                return;
            }

            var data = _.extend(this.getNewThingData(), {
                text: name || 'Relationship Idea',
                //isLinkLabel: true,     // deprecated as of goJS 1.3
                category: 'LinkLabel', // new as of goJS 1.3
                loc: '0 0'
            });
            this._diagram.model.startTransaction('create R Thing');
            this._diagram.model.addNodeData(data);
            var key = this._diagram.model.getKeyForNodeData(data);
            var node = this._diagram.findPartForKey(key);
            node.labeledLink = link;
            this._diagram.model.commitTransaction('create R Thing');
            this._diagram.updateAllTargetBindings();

            return this._diagram.findNodeForData(data);
        }
    }, {
        key: 'createThing',

        // ---------- creating things with specified names/locations - for use by generator and tests ------------

        value: function createThing(x, y, name, layout) {
            var group = this._diagram.toolManager.clickCreatingTool.insertPart(new go.Point(x, y));
            this._diagram.model.setDataProperty(group.data, 'text', name);
            if (layout) {
                this._diagram.model.setDataProperty(group.data, 'layout', layout);
            }
            return group;
        }
    }, {
        key: 'createRLinkWithRThing',
        value: function createRLinkWithRThing(thing1, thing2, name) {
            var link = this.createRLink(thing1, thing2);
            return this.createRThing(link, name);
        }
    }, {
        key: 'createRLink',

        // returns the linkData object for the new link
        value: function createRLink(thing1, thing2) {
            this._diagram.model.startTransaction('add link');
            var data = {
                type: 'noArrows',
                from: thing1.data.key,
                to: thing2.data.key,
                fromPort: 'R',
                toPort: 'R'
            };
            this._diagram.model.addLinkData(data);
            this._diagram.model.commitTransaction('add link');
            return this._diagram.findLinkForData(data);
        }
    }, {
        key: 'createPLink',

        // returns the linkData object for the new link
        value: function createPLink(thing1, thing2) {
            this._diagram.model.startTransaction('add link');
            var data = {
                type: 'noArrows',
                from: thing1.data.key,
                to: thing2.data.key,
                fromPort: 'P',
                toPort: 'P',
                category: 'P'
            };
            this._diagram.model.addLinkData(data);
            this._diagram.model.commitTransaction('add link');
            this._diagram.model.setDataProperty(thing1.data, 'pExpanded', true);
            return this._diagram.findLinkForData(data);
        }
    }, {
        key: 'getSelectedGroups',

        // ------------- moving things in the model structure -------------------

        // returns a go.List of the items in the current selection that are Groups
        value: function getSelectedGroups() {
            var it = this._diagram.selection.iterator;
            var members = new go.List();
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group) {
                    members.add(part);
                }
            }
            return members;
        }
    }, {
        key: 'addSelectedThingsAsChildrenOf',

        // drag to S
        value: function addSelectedThingsAsChildrenOf(group) {
            var newMembers = this.getSelectedGroups();

            // check existing members so we can calculate layout
            var oldMemberBounds = this.safeRect(this._diagram.computePartsBounds(group.memberParts));

            // NB: this is subject to validation by CommandHandler.isValidMember,
            // so for example, members of members of newMembers will not be added as members
            group.addMembers(newMembers);

            this.layouts.layoutNewMembersRelativeTo(newMembers, group, oldMemberBounds);

            this._diagram.clearSelection();
        }
    }, {
        key: 'addSelectedThingsAsSistersOf',

        // drag to D
        value: function addSelectedThingsAsSistersOf(group) {
            var oldMembers = this.getSelectedGroups();

            // if dragging to top level, move dragged things so they don't overlap the former parent
            if (!group.containingGroup) {
                // check existing members so we can calculate layout
                var oldMembersBounds = this._diagram.computePartsBounds(oldMembers);
                // NB: oldMembers can be on multiple levels, so not clear which level to use for rescaling old members after drag
                var oldMembersLevel = this.layouts.computeLevel(oldMembers.first());

                var it = oldMembers.iterator;
                while (it.next()) {
                    var member = it.value;
                    member.containingGroup = null;
                }
                this.layouts.layoutOldMembersOutsideOf(oldMembers, group, oldMembersBounds, oldMembersLevel);
            }
            // if not dragging to top level, place dragged things after former parent in outline
            else {
                var it2 = oldMembers.iterator;
                while (it2.next()) {
                    var member2 = it2.value;
                    member2.containingGroup = group.containingGroup;
                    this.moveSiblingNextTo(member2, group, RIGHT);
                }
            }
            this._diagram.clearSelection();
        }
    }, {
        key: 'addSelectedThingAsOrderedSisterOf',

        // for dragging parts within a system - side is LEFT or RIGHT (i.e. above or below, resp. in inventory layout)
        value: function addSelectedThingAsOrderedSisterOf(group, side) {
            //console.log('addSelectedThingAsOrderedSisterOf, side: ' + side);
            var thing = this.getUniqueThingSelected();
            if (!thing) {
                return;
            }
            this.moveSiblingNextTo(thing, group, side);
        }
    }, {
        key: 'moveSiblingNextTo',

        // moves the first thing (sibling) to be after the second thing (group)
        // in the part ordering - they are assumed to be siblings
        // side is LEFT or RIGHT
        value: function moveSiblingNextTo(sibling, group, side) {
            var parent = group.containingGroup;
            console.log('moveSiblingNextTo, sibling: ' + sibling + ', group: ' + group + ', parent: ' + parent + ', sibling.containingGroup: ' + sibling.containingGroup);

            if (!parent || sibling.containingGroup !== parent) {
                console.error('Cannot do moveSiblingNextTo on non-siblings or top-level groups');
            }

            // create new member order
            var memberOrder = new go.List();
            var it = parent.memberParts;
            var order = 0;
            while (it.next()) {
                var member = it.value;
                if (member instanceof go.Group) {
                    // we're at the target group, so add the moved thing either before or after it
                    if (member === group) {
                        if (side === LEFT) {
                            memberOrder.add(sibling);
                            this._diagram.model.setDataProperty(sibling.data, 'order', order++);
                            memberOrder.add(member);
                            this._diagram.model.setDataProperty(member.data, 'order', order++);
                        } else {
                            memberOrder.add(member);
                            this._diagram.model.setDataProperty(member.data, 'order', order++);
                            memberOrder.add(sibling);
                            this._diagram.model.setDataProperty(sibling.data, 'order', order++);
                        }
                    }
                    // don't re-add the moved thing, it was added above
                    else if (member !== sibling) {
                        memberOrder.add(member);
                        this._diagram.model.setDataProperty(member.data, 'order', order++);
                    }
                }
            }

            // clear existing members
            var newIt = memberOrder.iterator;
            while (newIt.next()) {
                var member2 = newIt.value;
                member2.containingGroup = null;
            }

            // add new members
            newIt.reset();
            while (newIt.next()) {
                var member3 = newIt.value;
                member3.containingGroup = parent;
            }
        }
    }, {
        key: 'addThingAsRThing',
        value: function addThingAsRThing(thing, link) {
            thing.labeledLink = link;
            thing.updateTargetBindings();
        }
    }, {
        key: 'toggleDFlag',

        // D corner handler (single click)
        value: function toggleDFlag(thing) {
            this._diagram.model.setDataProperty(thing.data, 'dflag', !thing.data.dflag);
            thing.updateTargetBindings();
        }
    }, {
        key: 'toggleSExpansion',

        // S corner handler (single click)
        value: function toggleSExpansion(thing) {
            var isExpanded = !(thing.data && !thing.data.sExpanded); // expand by default if property not present
            this._diagram.model.setDataProperty(thing.data, 'sExpanded', !isExpanded);
            thing.updateTargetBindings();
            this.ui.showCornerTip(thing, 'S');
        }
    }, {
        key: 'togglePExpansion',

        // P corner handler (single click)
        value: function togglePExpansion(thing) {
            this._diagram.model.setDataProperty(thing.data, 'pExpanded', !this.pIsExpanded(thing));
            thing.updateTargetBindings();
            this.ui.showCornerTip(thing, 'P');
        }
    }, {
        key: 'pIsExpanded',
        value: function pIsExpanded(group) {
            return group.data && group.data.pExpanded === true;
        }
    }, {
        key: 'canUndo',

        // ---------------------- undo/redo --------------------

        value: function canUndo() {
            return this._diagram.commandHandler.canUndo();
        }
    }, {
        key: 'undo',
        value: function undo() {
            this._diagram.commandHandler.undo();
            this._diagram.layoutDiagram(true);
        }
    }, {
        key: 'canRedo',
        value: function canRedo() {
            return this._diagram.commandHandler.canRedo();
        }
    }, {
        key: 'redo',
        value: function redo() {
            this._diagram.commandHandler.redo();
            this._diagram.layoutDiagram(true);
        }
    }, {
        key: 'refresh',
        value: function refresh() {
            this._diagram.updateAllTargetBindings();
            this._diagram.layoutDiagram(true);
        }
    }, {
        key: 'safeRect',

        // ------------------- utility ----------------------

        // check for a rect with NaN X/Y/W/H coords, so we can do stuff with it such as unionRect
        // (NaN,NaN,0,0) => (0,0,0,0)
        value: function safeRect(rect) {
            if (isNaN(rect.x)) {
                rect.x = 0;
            }
            if (isNaN(rect.y)) {
                rect.y = 0;
            }
            if (isNaN(rect.width)) {
                rect.width = 0;
            }
            if (isNaN(rect.height)) {
                rect.height = 0;
            }
            return rect;
        }
    }, {
        key: 'loadModel',

        // ------------------- debug map model ----------------------
        value: function loadModel() {
            $('#map-model-debug').val(this._diagram.model.toJson());
        }
    }, {
        key: 'saveModel',
        value: function saveModel() {
            this._diagram.model = go.Model.fromJson($('#map-model-debug').val());
            this._diagram.updateAllTargetBindings();
            this._diagram.model.addChangedListener(this.autosave.modelChanged);
            this.autosave.saveOnModelChanged = true;
        }
    }]);

    return Map;
})();

module.exports = Map;

// TODO: turn off in production
//console.log('diagram model:' + this._diagram.model.toJson());

},{"./EditorConfig.js":29}],33:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;

// functions for editing perspectives AND distinctions, which work similarly in the UI

var Perspectives = (function () {
    function Perspectives(editor, map) {
        _classCallCheck(this, Perspectives);

        // temporary state flag for adding/removing P/D selections programmatically
        this.selectingLinkedThings = false;

        this._editor = editor;
        this._map = map;
    }

    _createClass(Perspectives, [{
        key: 'currentTabChanged',
        value: function currentTabChanged(newValue, oldValue) {
            //console.log('Perspectives, currentTabChanged');
            if (newValue === this._map.ui.TAB_ID_PERSPECTIVES) {
                // opening perspectives
                this.setPorDThing('P');
                this._map.setEditingBlocked(true);
            } else if (oldValue === this._map.ui.TAB_ID_PERSPECTIVES) {
                // closing perspectives
                this.saveLinks('P');
                this._map.setEditingBlocked(false);
            } else if (newValue === this._map.ui.TAB_ID_DISTINCTIONS) {
                // opening distinctions
                this.setPorDThing('D');
                this._map.setEditingBlocked(true);
            } else if (oldValue === this._map.ui.TAB_ID_DISTINCTIONS) {
                // closing distinctions
                this.saveLinks('D');
                this._map.setEditingBlocked(false);
            }
        }
    }, {
        key: 'handleDiagramEvent',
        value: function handleDiagramEvent(eventName, e) {
            if (eventName === 'ChangedSelection') {
                if (this._map.ui.currentTabIs(this._map.ui.TAB_ID_PERSPECTIVES) || this._map.ui.currentTabIs(this._map.ui.TAB_ID_DISTINCTIONS)) {
                    this.updateLinks();
                }
            }
        }
    }, {
        key: 'isInPOrDEditorMode',

        // ---------- P/D Editor state

        value: function isInPOrDEditorMode() {
            return this._map.ui.state.perspectivePointKey || this._map.ui.state.distinctionThingKey;
        }
    }, {
        key: 'isInPEditorMode',
        value: function isInPEditorMode() {
            return this._map.ui.state.perspectivePointKey;
        }
    }, {
        key: 'isInDEditorMode',
        value: function isInDEditorMode() {
            return this._map.ui.state.distinctionThingKey;
        }
    }, {
        key: 'isPEditorPoint',
        value: function isPEditorPoint(group) {
            return this._map.ui.state.perspectivePointKey === group.data.key;
        }
    }, {
        key: 'isDEditorThing',
        value: function isDEditorThing(group) {
            return this._map.ui.state.distinctionThingKey === group.data.key;
        }
    }, {
        key: 'setPEditorPoint',

        // NB: this is called via this._map.getCornerFunction, so we get the extra corner arg, which we can ignore
        value: function setPEditorPoint(thing, corner) {
            if (this._editor.canEdit) {
                this._map.ui.openTab(this._map.ui.TAB_ID_PERSPECTIVES);
            }
        }
    }, {
        key: 'setDEditorThing',
        value: function setDEditorThing(thing) {
            if (this._editor.canEdit) {
                // NB: need to select only this thing, since this is invoked
                // by a control-click, which will not automatically select just it
                this._map.getDiagram().clearSelection();
                thing.isSelected = true;
                this._map.ui.openTab(this._map.ui.TAB_ID_DISTINCTIONS);
            }
        }
    }, {
        key: 'isPerspectivePoint',

        // -----------------------

        value: function isPerspectivePoint(group) {
            var links = group.findLinksOutOf();
            while (links.next()) {
                var link = links.value;
                if (link.data.category === 'P') {
                    return true;
                }
            }
            return false;
        }
    }, {
        key: 'isSelectedPerspectiveView',
        value: function isSelectedPerspectiveView(group) {
            var links = group.findLinksInto();
            while (links.next()) {
                var link = links.value;
                if (link.data.category === 'P' && this._map.pIsExpanded(link.fromNode) && link.fromNode.isSelected) {
                    return true;
                }
            }
            return false;
        }
    }, {
        key: 'isToggledPerspectiveView',
        value: function isToggledPerspectiveView(group) {
            var links = group.findLinksInto();
            while (links.next()) {
                var link = links.value;
                if (link.data.category === 'P' && this._map.pIsExpanded(link.fromNode)) {
                    return true;
                }
            }
            return false;
        }
    }, {
        key: 'isMouseOverPerspectiveView',
        value: function isMouseOverPerspectiveView(group) {
            var links = group.findLinksInto();
            while (links.next()) {
                var link = links.value;
                if (link.data.category === 'P' && link.fromNode === this._map.ui.mouseOverGroup) {
                    return true;
                }
            }
            return false;
        }
    }, {
        key: 'getPerspectiveViewWeight',
        value: function getPerspectiveViewWeight(group) {
            var mode = this._map.ui.getMapEditorOptions().perspectiveMode;
            if (mode === 'spotlight' || mode === 'both') {
                return (this.isSelectedPerspectiveView(group) ? 1 : 0) + (this.isToggledPerspectiveView(group) ? 1 : 0) + (this.isMouseOverPerspectiveView(group) ? 1 : 0);
            } else {
                return 0;
            }
        }
    }, {
        key: 'setPorDThing',

        // -----------------------

        // category is "P" or "D" (perspectives or distinctions)
        value: function setPorDThing(category) {
            // if already set, must do save perspectives or save distinctions
            if (this._map.ui.state.perspectivePointKey || this._map.ui.state.distinctionThingKey) return;

            var thing = this._map.getDiagram().selection.first();
            //console.log('setPorDThing: ' + thing);
            if (thing instanceof go.Group) {
                var key = thing.data.key;
                if (category === 'P') {
                    this._map.ui.state.perspectivePointKey = key;
                } else if (category === 'D') {
                    this._map.ui.state.distinctionThingKey = key;
                }

                // select views/others
                this.selectLinkedThingsFor(thing, category);
            }
        }
    }, {
        key: 'updateLinks',

        // this is called when the selection changes - if the thing is set,
        // adds/removes D/P links according to what is selected; otherwise
        // just shows/hides D/P links for the selected thing(s)
        value: function updateLinks() {
            if (this.selectingLinkedThings) // selection is being changed programmatically, so don't respond
                return;

            var pOrDThing = null;
            var category = null;
            if (this._map.ui.state.perspectivePointKey) {
                pOrDThing = this._map.getDiagram().findNodeForKey(this._map.ui.state.perspectivePointKey);
                category = 'P';
            } else if (this._map.ui.state.distinctionThingKey) {
                pOrDThing = this._map.getDiagram().findNodeForKey(this._map.ui.state.distinctionThingKey);
                category = 'D';
            }

            var addLinksTo = new go.List();
            var removeLinks = new go.List();

            // iterate through all things
            if (category) {
                var layers = this._map.getDiagram().layers;
                while (layers.next()) {
                    var layer = layers.value;
                    var parts = layer.parts;
                    while (parts.next()) {
                        var part = parts.value;
                        if (part instanceof go.Group) {
                            // calculate links to add/remove based on selection
                            if (pOrDThing) {
                                var links = part.findLinksInto();
                                var existingLink = null;
                                while (links.next()) {
                                    var link = links.value;
                                    if (link.fromNode.data.key === pOrDThing.data.key && link.data.category === category) existingLink = link;
                                }

                                // decide whether to add or remove a link to the part, depending on whether
                                // it is selected and whether a link exists
                                if (!existingLink && part.isSelected) addLinksTo.add(part);else if (existingLink && !part.isSelected) removeLinks.add(existingLink);
                            }
                        }
                    }
                }
            }

            // do the adding/removing of links
            var adds = addLinksTo.iterator;
            while (adds.next()) {
                this._map.getDiagram().model.startTransaction('add link');
                var to = adds.value;
                console.log('updateLinks: adding link from ' + pOrDThing + ' to ' + to);
                if (category === 'D' && pOrDThing.data.key === to.data.key) {
                    pOrDThing.isSelected = false;
                    alert('You can\'t distinguish a thing from itself!');
                    continue;
                }
                this._map.getDiagram().model.addLinkData({
                    from: pOrDThing.data.key,
                    to: to.data.key,
                    fromPort: category,
                    toPort: category,
                    category: category
                });
                this._map.getDiagram().model.commitTransaction('add link');
            }
            var removes = removeLinks.iterator;
            while (removes.next()) {
                var remove = removes.value;
                console.log('updateLinks: removing link from ' + remove.fromNode + ' to ' + remove.toNode);
                this._map.getDiagram().model.startTransaction('remove link');
                this._map.getDiagram().remove(remove);
                this._map.getDiagram().model.removeLinkData(remove.data);
                this._map.getDiagram().model.commitTransaction('remove link');
            }

            // show links
            this._map.getDiagram().updateAllTargetBindings();
        }
    }, {
        key: 'saveLinks',
        value: function saveLinks(category) {
            var pOrDThing = null;
            if (category === 'P') {
                pOrDThing = this._map.getDiagram().findNodeForKey(this._map.ui.state.perspectivePointKey);
                this._map.ui.state.perspectivePointKey = null;
            } else if (category === 'D') {
                pOrDThing = this._map.getDiagram().findNodeForKey(this._map.ui.state.distinctionThingKey);
                this._map.ui.state.distinctionThingKey = null;
            }

            this._map.getDiagram().clearSelection();
            this._map.getDiagram().updateAllTargetBindings();
        }
    }, {
        key: 'selectLinkedThingsFor',
        value: function selectLinkedThingsFor(group, category) {
            this.selectingLinkedThings = true;
            this._map.getDiagram().clearSelection();

            var links = group.findLinksOutOf();
            while (links.next()) {
                var link = links.value;
                if (link.data.category === category) link.toNode.isSelected = true;
            }

            this.selectingLinkedThings = false;
        }
    }]);

    return Perspectives;
})();

module.exports = Perspectives;

},{}],34:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;
var SLIDE_BLOCKER_WIDTH = 1000;
var SLIDE_BLOCKER_COLOR = '#fff';
var SLIDE_BLOCKER_OPACITY = 0.9;

// functions for the presenter/slides

var Presenter = (function () {
    function Presenter(editor, map) {
        _classCallCheck(this, Presenter);

        this._editor = editor;
        this._map = map;

        this.currentSlideIndex = null;
        this.isPresenting = false;
        this.showTOC = false;
        this.isCreatingThumbnail = false;

        // mask applied around slide region when presenting
        this.slideBlocker = null;

        this.diagramAspectRatio = null;

        // NB: hasLinks can have values false, 1, or true (1 means only a single link)
        this.slideTypes = [{
            name: 'TITLE_BODY', label: 'Title and Body',
            hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: false, hasMapSummary: false, hasLinks: false
        }, {
            name: 'TITLE_BODY_MAP', label: 'Title, Body and MetaMap',
            hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
        }, {
            name: 'ACTIVITY_MAP', label: 'Lesson Activity and MetaMap',
            hasTitle: true, hasNotes: true, hasChecks: true, hasMapRegion: true, hasMapSummary: false, hasLinks: true
        }, {
            name: 'MAP_ONLY', label: 'MetaMap only',
            hasTitle: true, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
        }, {
            name: 'MAP_SUMMARY', label: 'MetaMap Summary',
            hasTitle: false, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: true, hasLinks: false
        }];

        // ------------------ link/attachment types -----------------------
        this.linkTypes = [{ name: '', label: '-- Select attachment type --' }, { name: 'WEB', label: 'Web Page' }, { name: 'PDF', label: 'PDF' }, { name: 'DOC', label: 'Document' }, { name: 'SPREADSHEET', label: 'Spreadsheet' }, { name: 'PRESENTATION', label: 'Presentation' }, { name: 'METAMAP', label: 'MetaMap' }, { name: 'IMAGE', label: 'Image' }, { name: 'AUDIO', label: 'Audio' }, { name: 'VIDEO', label: 'Video' }, { name: 'SURVEY', label: 'Survey' }, { name: 'WORKSHEET', label: 'Worksheet' }];

        // ------------ list of all things in the map, for map summary slides ---------------------
        this.ideaList = '';

        this.summaryAnalytics = [{ name: 'COUNT_THINGS', singularLabel: 'Distinction', pluralLabel: 'Distinctions' }, { name: 'COUNT_SYSTEMS', singularLabel: 'System', pluralLabel: 'Systems' }, { name: 'COUNT_RELATIONSHIPS', singularLabel: 'Relationship', pluralLabel: 'Relationships' }, { name: 'COUNT_PERSPECTIVES', singularLabel: 'Perspective', pluralLabel: 'Perspectives' }, { name: 'COUNT_RTHINGS', singularLabel: 'Relationship Idea', pluralLabel: 'Relationship Ideas' }, { name: 'COUNT_SYSTEM_RTHINGS', singularLabel: 'Relationship System', pluralLabel: 'Relationship Systems' }, { name: 'COUNT_SYSTEM_PERSPECTIVES', singularLabel: 'Perspective System', pluralLabel: 'Perspective Systems' }, { name: 'COUNT_DISTINCTIONS', singularLabel: 'Advanced Distinction', pluralLabel: 'Advanced Distinctions' }];

        this.thumbnailCache = [];
    }

    _createClass(Presenter, [{
        key: 'autosave',
        value: function autosave() {
            this._map.autosave.save('edit_presenter');
        }
    }, {
        key: 'updateIdeaList',

        // ---------- editing functions for different slide types -------------

        // only call this occasionally, as they won't be editing the map while presenter is open
        value: function updateIdeaList() {
            var nodes = this._map.getDiagram().nodes;
            var list = [];
            while (nodes.next()) {
                if (nodes.value instanceof go.Group) {
                    list.push(nodes.value.data.text);
                }
            }
            list.sort();

            // filter out placeholder names - see this._map.js:getNewThingData, createSister, etc.
            list = _.difference(_.uniq(list, true), this._map.generator.getPlaceholderIdeaNames(), ['New Idea', 'New Distinguished Idea', 'New Related Idea', 'New Relationship Idea', 'New Part Idea', 'Idea', 'Part', 'Relationship Idea'] // newer simplified names
            );

            this.ideaList = list.join(', ');
        }
    }, {
        key: 'addCheck',
        value: function addCheck(nodeData) {
            nodeData.checks.push({ text: '' });
            this.autosave();
        }
    }, {
        key: 'deleteCheck',
        value: function deleteCheck(check, nodeData) {
            var i = _.indexOf(nodeData.checks, check);
            nodeData.checks.splice(i, 1);
            this.autosave();
        }
    }, {
        key: 'addLink',
        value: function addLink(nodeData) {
            nodeData.links.push({ title: '', url: '', type: '' });
            this.autosave();
        }
    }, {
        key: 'deleteLink',
        value: function deleteLink(link, nodeData) {
            var i = _.indexOf(nodeData.links, link);
            nodeData.links.splice(i, 1);
            this.autosave();
        }
    }, {
        key: 'toggleTOC',
        value: function toggleTOC() {
            if (this.isPresenting) {
                this.showTOC = !this.showTOC;
            }
        }
    }, {
        key: 'maybeInitSlideBlocker',

        // NB: can't create this in init as the diagram doesn't exist yet...
        value: function maybeInitSlideBlocker() {
            if (!this.slideBlocker) {
                var mk = go.GraphObject.make;
                this.slideBlocker = mk(go.Node, go.Panel.Auto, {
                    layerName: 'Tool',
                    opacity: SLIDE_BLOCKER_OPACITY
                }, mk(go.Shape, 'Rectangle', {
                    fill: null,
                    stroke: SLIDE_BLOCKER_COLOR,
                    strokeWidth: 1000
                }));
                this._map.getDiagram().add(this.slideBlocker);
            }
        }
    }, {
        key: 'currentTabChanged',

        // called when a tab is opened or closed
        value: function currentTabChanged(newValue, oldValue) {
            if (oldValue === this._map.ui.TAB_ID_PRESENTER) {
                // closing tab
                this.stopPresenting();
            } else if (newValue === this._map.ui.TAB_ID_PRESENTER) {
                // opening tab
                // show slides (see layouts.slideTemplate, binding of visible attr)
                this.diagramAspectRatio = $('#diagram').width() / $('#diagram').height();
                console.log('diagramAspectRatio: ' + this.diagramAspectRatio);

                this._map.getDiagram().updateAllTargetBindings();
                this.updateIdeaList();
                if (!this.currentSlideIndex && this.getSlideNodeDatas().length > 0) {
                    this.currentSlideIndex = 1;
                }
                this.slideThumbnailSelected(1);
            }
        }
    }, {
        key: 'handleDiagramEvent',
        value: function handleDiagramEvent(eventName, e) {
            if (!this._map.ui.currentTabIs(this._map.ui.TAB_ID_PRESENTER)) {
                return;
            }

            if (eventName === 'SelectionDeleting') {
                var selection = e.subject;
                if (selection.count === 1) {
                    var thing = selection.first();
                    if (thing instanceof go.Node && thing.data.category === 'slide') {
                        if (!confirm('Delete this slide from the presentation?')) {
                            e.cancel = true;
                        }
                    }
                }
            } else if (eventName === 'SelectionDeleted') {
                // if slide is deleted from canvas rather than by thumbnail x button, need to update indexes
                this.compactSlideIndexes();
            } else if (eventName === 'SelectionMoved' || eventName === 'PartResized') {
                // clear thumbnail cache
                this.thumbnailCache = [];
            } else if (eventName === 'ViewportBoundsChanged') {}
        }
    }, {
        key: 'windowResized',
        get: function () {
            var _this = this;

            if (!this._windowResized) {
                this._windowResized = _.debounce(function () {
                    _this.slideThumbnailSelected(_this.currentSlideIndex);
                }, 1000);
            }
            return this._windowResized;
        }
    }, {
        key: 'showSidebar',
        value: function showSidebar() {
            return this._map.ui.currentTabIs(this._map.ui.TAB_ID_PRESENTER) && (!this.isPresenting || this.showTOC);
        }
    }, {
        key: 'disableMapToolbarButtons',
        value: function disableMapToolbarButtons() {
            return !this._map.ui.currentTabIs(this._map.ui.TAB_ID_PRESENTER) || this.isPresenting || !this.getCurrentSlideType().hasMapRegion;
        }
    }, {
        key: 'getSlideNodeDatas',

        // returns an array of node data objects (not the slide nodes themselves)
        value: function getSlideNodeDatas() {
            var diagram = this._map.getDiagram();
            var nodes = diagram.model.nodeDataArray;
            var nodeDatas = _.filter(nodes, function (node) {
                return node.category === 'slide';
            });
            nodeDatas = _.sortBy(nodeDatas, function (nodeData) {
                return nodeData.index;
            });
            //console.log('getSlideNodeDatas, indexes: ' + _.pluck(slidesData, 'index'));
            return nodeDatas;
        }
    }, {
        key: 'getSlideCount',
        value: function getSlideCount() {
            return this.getSlideNodeDatas().length;
        }
    }, {
        key: 'getActivitySlideCount',
        value: function getActivitySlideCount() {
            return _.where(this.getSlideNodeDatas(), { type: 'ACTIVITY_MAP' }).length;
        }
    }, {
        key: 'getSlideType',
        value: function getSlideType(typeName) {
            return _.findWhere(this.slideTypes, { name: typeName });
        }
    }, {
        key: 'getCurrentSlideType',
        value: function getCurrentSlideType() {
            var slide = this.findSlideByIndex(this.currentSlideIndex);
            if (slide) {
                return _.findWhere(this.slideTypes, { name: slide.data.type });
            } else {
                return {};
            }
        }
    }, {
        key: 'findSlideByIndex',
        value: function findSlideByIndex(index) {
            var diagram = this._map.getDiagram();
            var slideData = _.find(this.getSlideNodeDatas(), function (slideData) {
                return slideData.index === index;
            });
            if (slideData) {
                return diagram.findNodeForKey(slideData.key);
            } else {
                return undefined;
            }
        }
    }, {
        key: 'moveSlide',

        // increment is -1 or +1
        value: function moveSlide(index, increment) {

            var diagram = this._map.getDiagram();
            var slide = this.findSlideByIndex(index);
            var neighbor = this.findSlideByIndex(index + increment);
            if (slide && neighbor) {
                //console.log('moveSlide: swapping ' + slide.data.key + ' with ' + neighbor.data.key);
                diagram.startTransaction('move slide');
                diagram.model.setDataProperty(slide.data, 'index', slide.data.index + increment);
                diagram.model.setDataProperty(neighbor.data, 'index', neighbor.data.index - increment);
                diagram.commitTransaction('move slide');
                this.thumbnailCache = [];
            }
        }
    }, {
        key: 'compactSlideIndexes',
        value: function compactSlideIndexes() {

            //console.log('compactSlideIndexes');
            var slidesData = this.getSlideNodeDatas();
            var diagram = this._map.getDiagram();
            var newIndex = 1;
            diagram.startTransaction('compact slide indexes');
            _.each(slidesData, function (slideData) {
                diagram.model.setDataProperty(slideData, 'index', newIndex);
                //console.log('compactSlideIndexes: set index for ' + slideData.key + ' to ' + newIndex);
                newIndex++;
            });
            diagram.commitTransaction('compact slide indexes');
        }
    }, {
        key: 'getNewSlideKey',
        value: function getNewSlideKey() {
            var diagram = this._map.getDiagram();
            var i = 1;
            while (diagram.model.findNodeDataForKey('slide-' + i)) {
                i++;
            }
            return 'slide-' + i;
        }
    }, {
        key: 'getNewSlideIndex',

        // NB: indexes (and keys?) must be 1-based, otherwise first slide gets screwed up
        // (somewhere the index shows up as '' instead of 0)
        value: function getNewSlideIndex() {
            var slides = this.getSlideNodeDatas();
            return slides.length + 1;
        }
    }, {
        key: 'addSlide',
        value: function addSlide(typeName) {

            console.log('addSlide: ' + typeName);
            var diagram = this._map.getDiagram();

            var db = this._map.computeMapBounds();
            db.inflate(db.width / 20, db.height / 10);
            var newLoc = db.x + ' ' + db.y;
            var newIndex = this.getNewSlideIndex();

            var slideType = _.findWhere(this.slideTypes, { name: typeName });

            diagram.startTransaction('add slide');
            diagram.model.addNodeData({
                key: this.getNewSlideKey(),
                category: 'slide',
                index: newIndex,
                isGroup: false,
                width: db.width,
                height: db.height,
                loc: newLoc,
                level: 0,
                children: 0,
                type: typeName,
                title: '',
                notes: '',
                checks: [],
                hasRegion: slideType.hasMapRegion,
                isSummary: slideType.hasMapSummary,
                links: []
            });
            diagram.commitTransaction('add slide');
            this.thumbnailCache = [];

            this.slideThumbnailSelected(newIndex); // trigger display of edit form, zoom to map region if applicable
        }
    }, {
        key: 'duplicateSlide',
        value: function duplicateSlide(index) {

            var diagram = this._map.getDiagram();
            var newIndex = this.getNewSlideIndex();
            var slide = this.findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction('duplicate slide');

                // bump up indexes on subsequent slides to make room for new slide after current one
                _.each(this.getSlideNodeDatas(), function (slideData) {
                    if (slideData.index > index) {
                        diagram.model.setDataProperty(slideData, 'index', slideData.index + 1);
                    }
                });

                // NB: creating a new nodeData object here rather than copying and modifying, to avoid copying $$hashKey (??)
                diagram.model.addNodeData({
                    key: this.getNewSlideKey(),
                    category: 'slide',
                    index: index + 1,
                    isGroup: false,
                    width: slide.data.width,
                    height: slide.data.height,
                    loc: slide.data.loc,
                    level: 0,
                    children: 0,
                    type: slide.data.type,
                    title: slide.data.title + ' (Copy)',
                    notes: slide.data.notes,
                    checks: slide.data.checks, // clone?
                    hasRegion: slide.data.hasRegion,
                    isSummary: slide.data.isSummary,
                    links: slide.data.links // clone?
                });
                diagram.commitTransaction('duplicate slide');
                this.thumbnailCache = [];
            }
        }
    }, {
        key: 'removeSlide',
        value: function removeSlide(index) {

            //console.log('removeSlide: ' + index);
            var diagram = this._map.getDiagram();
            var slide = this.findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction('remove slide');
                diagram.model.removeNodeData(slide.data);
                diagram.commitTransaction('remove slide');
            }
            this.currentSlideIndex = null;
            this.thumbnailCache = [];
            this.compactSlideIndexes();
        }
    }, {
        key: 'getSlideThumbnail',
        value: function getSlideThumbnail(index) {
            return this.thumbnailCache[index];
        }
    }, {
        key: 'createSlideThumbnails',
        value: function createSlideThumbnails() {
            var _this2 = this;

            _.each(this.getSlideNodeDatas(), function (nd) {
                _this2.createSlideThumbnail(nd.index);
            });
        }
    }, {
        key: 'createSlideThumbnail',
        value: function createSlideThumbnail(index) {
            //console.log('createSlideThumbnail');

            var thumbWidth = 1000;
            var thumbHeight = 600;
            var diagram = this._map.getDiagram();

            var slide = this.findSlideByIndex(index);
            if (!slide) {
                return '';
            } else if (!slide.data.hasRegion && !slide.data.isSummary) {
                return '';
            } else {
                var db = diagram.documentBounds;
                var sb = undefined;
                if (slide.data.isSummary) {
                    // for a summary slide we shoot the whole map
                    sb = this._map.safeRect(this._map.computeMapBounds());
                } else {
                    // otherwise just shoot the slide region
                    sb = slide.part.actualBounds;
                }

                var imagePosition = new go.Point(sb.x, sb.y);
                //console.log('getSlideThumbnail, slide bounds: ' + sb + ', document bounds: ' + db + ', imagePosition: ' + imagePosition);

                var wScale = thumbWidth / sb.width;
                var hScale = thumbHeight / sb.height;
                var thumbScale = Math.min(wScale, hScale);
                console.log('scale: ' + wScale + ',' + hScale);

                var w = thumbScale * sb.width;
                var h = thumbScale * sb.height;
                //console.log('thumbnail w/h: ' + w + ',' + h);

                // hide slides temporarily while creating thumbnail
                this.isCreatingThumbnail = true;
                diagram.updateAllTargetBindings();

                diagram.scale = thumbScale;

                var imgData = diagram.makeImageData({
                    size: new go.Size(w, h),
                    position: imagePosition,
                    scale: thumbScale
                });

                this.isCreatingThumbnail = false;
                diagram.updateAllTargetBindings();

                this.thumbnailCache[index] = imgData;

                return imgData;
            }
        }
    }, {
        key: 'getMapThumbnail',

        // gets a thumbnail of the whole map, for saving (see autosave.js)
        value: function getMapThumbnail() {

            var diagram = this._map.getDiagram();
            var sb = this._map.safeRect(this._map.computeMapBounds());
            sb.grow(10, 10, 10, 10);
            var w = 150;
            var h = 100;

            // hide slides temporarily while creating thumbnail
            this.isCreatingThumbnail = true;
            diagram.updateAllTargetBindings();

            var imgData = diagram.makeImageData({
                scale: Math.min(h / sb.height, w / sb.width),
                position: new go.Point(sb.x, sb.y),
                size: new go.Size(w, h)
            });

            this.isCreatingThumbnail = false;
            diagram.updateAllTargetBindings();

            return imgData;
        }
    }, {
        key: 'slideThumbnailSelected',

        // called via ng-click on thumbnail
        value: function slideThumbnailSelected(index) {
            //console.log('slideThumbnailSelected: ' + index);
            var diagram = this._map.getDiagram();
            var slide = this.findSlideByIndex(index);

            // NB: order of statements is important here, as selectSlide can trigger changedSelection with an empty selection sometimes... ??
            this.selectSlide(index);
            this.currentSlideIndex = index;
            diagram.updateAllTargetBindings(); // show/hide slide nodes - see templates.js: slideTemplate

            if (slide) {
                this.zoomToSlideInCenter(slide);

                if (this.isPresenting) {
                    this.showTOC = false;
                }
            }
        }
    }, {
        key: 'needsNarrowCanvas',
        value: function needsNarrowCanvas() {
            var slide = this.findSlideByIndex(this.currentSlideIndex);
            return this._map.ui.currentTabIs(this._map.ui.TAB_ID_PRESENTER) && slide != null && (slide.data.type === 'TITLE_BODY_MAP' || slide.data.type === 'ACTIVITY_MAP' || slide.data.type === 'MAP_SUMMARY');
        }
    }, {
        key: 'selectSlide',

        // sets the slide node as selected in the diagram.
        value: function selectSlide(index) {

            //console.log('select slide: ' + index);
            var diagram = this._map.getDiagram();
            diagram.clearSelection();
            if (index) {
                var slide = this.findSlideByIndex(index);
                if (slide) {
                    slide.isSelected = true;
                }
            }
            // TODO: scroll to slide?
        }
    }, {
        key: 'playSlide',
        value: function playSlide(index) {
            var diagram = this._map.getDiagram();
            this._map.ui.openTab(this._map.ui.TAB_ID_PRESENTER);

            var slides = this.getSlideNodeDatas();
            if (slides.length) {
                this.showTOC = false;
                this.presentSlide(index);
            }
        }
    }, {
        key: 'advanceSlide',

        // increment is -1 or +1
        value: function advanceSlide(increment) {
            //console.log('advanceSlide, currentSlideIndex: ' + this.currentSlideIndex);

            var slide = this.findSlideByIndex(this.currentSlideIndex);
            if (slide) {
                this.currentSlideIndex += increment;
                if (this.isPresenting) {
                    this.presentSlide(this.currentSlideIndex);
                }
            }
        }
    }, {
        key: 'presentSlide',
        value: function presentSlide(index) {
            //console.log('presentSlide');

            var diagram = this._map.getDiagram();
            var slide = this.findSlideByIndex(index);
            if (!slide) {
                return;
            }

            diagram.clearSelection();
            // NB: need to set this after clearSelection, as that will set it to null! (see changedSelection)
            this.currentSlideIndex = index;
            this._map.setEditingBlocked(true);
            //console.log('presentSlide, index: ' + index + ', slide: ' + slide + ', currentSlideIndex: ' + this.currentSlideIndex);

            this.maybeInitSlideBlocker();
            var blockerW = SLIDE_BLOCKER_WIDTH;

            if (slide.data.hasRegion) {
                this.zoomToSlideInCenter(slide);

                // show slide blocker
                this.slideBlocker.desiredSize = new go.Size(slide.actualBounds.width + 2 * blockerW, slide.actualBounds.height + 2 * blockerW);
                this.slideBlocker.location = new go.Point(slide.actualBounds.x - blockerW, slide.actualBounds.y - blockerW);
                this.slideBlocker.visible = true;
                //console.log('slideBlocker: ' + this.slideBlocker.actualBounds);
            } else if (slide.data.isSummary) {
                this.zoomToSlideInCenter(slide);
                this.slideBlocker.visible = false;
            } else {
                this._map.ui.resetZoom();
                this.slideBlocker.visible = false;
            }

            this.isPresenting = true;
            $('body').addClass('presenter-playing');

            this._map.getDiagram().updateAllTargetBindings(); // hide slide nodes - see templates.js: slideTemplate
        }
    }, {
        key: 'zoomToSlideInCenter',

        // zoom the diagram to show the given slide in the center of the canvas
        value: function zoomToSlideInCenter(slide) {
            var _this3 = this;

            var diagram = this._map.getDiagram();

            window.setTimeout(function () {

                var halfWidth = slide.data.type !== 'MAP_ONLY';
                var zoomRect = _this3.getLetterboxedRect(slide.actualBounds, halfWidth);
                zoomRect.inflate(zoomRect.width / 10, zoomRect.height / 10);
                diagram.zoomToRect(zoomRect, go.Diagram.Uniform);
            }, 100);
        }
    }, {
        key: 'getLetterboxedRect',

        // Returns a rectangle containing the given rect, but with appropriate width or height added
        // to give it same aspect ratio as the diagram.
        value: function getLetterboxedRect(rect, halfWidth) {

            // NB: we calculate the aspect ratio when the tab is opened,
            // rather than each time as the diagram size might be changing...
            var dar = halfWidth ? this.diagramAspectRatio / 2 : this.diagramAspectRatio;
            console.log('rect: ' + rect + ', dar: ' + dar);

            var rectAspectRatio = rect.width / rect.height;

            if (dar > rectAspectRatio) {
                // tall skinny rect, short wide target AR, so add side padding to the rect
                var lbw = rect.height * dar; // because lbw / lbh == dar == lbw / rect.height (lbh == rect.height)
                return rect.copy().inflate((lbw - rect.width) / 2, 0); // add half the width difference to each side of the rect
            } else {
                // short wide rect, tall skinny target AR, so add top/bottom padding to the rect
                var lbh = rect.width / dar; // because lbw / lbh == dar == lbh / rect.width (lbw == rect.width)
                return rect.copy().inflate(0, (lbh - rect.height) / 2); // add half the height difference to top/bottom of the rect
            }
        }
    }, {
        key: 'stopPresenting',
        value: function stopPresenting() {

            //console.log('stopPresenting, currentSlideIndex: ' + this.currentSlideIndex);
            var diagram = this._map.getDiagram();

            if (this.slideBlocker) {
                this.slideBlocker.visible = false;
            }

            //this.currentSlideIndex = null;
            this.isPresenting = false;
            $('body').removeClass('presenter-playing');

            this._map.getDiagram().updateAllTargetBindings(); // show slide nodes

            diagram.clearSelection();
            this._map.setEditingBlocked(false);
            //this._map.ui.resetZoom();
        }
    }]);

    return Presenter;
})();

module.exports = Presenter;

// adjust zooming of map region
//this.windowResized();

},{}],35:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;
var SlideTemplate = require('./templates/SlideTemplate.js');
var GroupTemplate = require('./templates/GroupTemplate.js');
var LinkTemplate = require('./templates/LinkTemplate.js');
var PLinkTemplate = require('./templates/PLinkTemplate.js');
var dLinkTemplate = require('./templates/dLinkTemplate.js');

// convenient abbreviation for creating templates
var mk = go.GraphObject.make;

var colorR = '#4cbfc2';
var colorP = '#fbaa36';

// footer for image export
var _exportFooter = null;

// goJS templates used in the editor

var Templates = (function () {
    function Templates(editor, map) {
        _classCallCheck(this, Templates);

        this._editor = editor;
        this._map = map;

        this.slideTemplate = new SlideTemplate(map);
        this.groupTemplate = new GroupTemplate(map);
        this.linkTemplate = new LinkTemplate(map);
        this.pLinkTemplate = new PLinkTemplate(map);
        this.dLinkTemplate = dLinkTemplate(map);
    }

    _createClass(Templates, [{
        key: 'initTemplates',
        value: function initTemplates(diagram) {
            var _this = this;

            diagram.groupTemplate = this.groupTemplate.init();
            diagram.nodeTemplate = this.slideTemplate.init();
            diagram.linkTemplate = this.linkTemplate.init();
            diagram.linkTemplateMap.add('P', this.pLinkTemplate);
            diagram.linkTemplateMap.add('D', this.dLinkTemplate);

            this.setTemporaryLinkTemplates(diagram.toolManager.linkingTool);
            this.setTemporaryLinkTemplates(diagram.toolManager.relinkingTool);

            diagram.toolManager.linkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
                _this.handlePortTargeted(diagram.toolManager.linkingTool, realnode, realport, tempnode, tempport, toend);
            };

            diagram.toolManager.relinkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
                _this.handlePortTargeted(diagram.toolManager.relinkingTool, realnode, realport, tempnode, tempport, toend);
            };

            diagram.toolManager.relinkingTool.updateAdornments = function (part) {
                go.RelinkingTool.prototype.updateAdornments.call(_this, part);
                var from = part.findAdornment('RelinkFrom');
                var to = part.findAdornment('RelinkTo');
                // if (from)
                //     console.log('relinkfrom: ' + from.part.width);
            };

            diagram.toolManager.linkingTool.linkValidation = this.validateLink;
            diagram.toolManager.relinkingTool.linkValidation = this.validateLink;
        }
    }, {
        key: 'setTemporaryLinkTemplates',

        // ----------- temporary link/node templates, for use when dragging to create R/P lines -------------

        // define initial temporary link templates - these will be modified when handlePortTargeted is called
        value: function setTemporaryLinkTemplates(tool) {
            tool.temporaryLink = this.makeTemporaryLinkTemplate();
            tool.temporaryFromNode = this.makeTemporaryNodeTemplate();
            tool.temporaryToNode = this.makeTemporaryNodeTemplate();
        }
    }, {
        key: 'makeTemporaryLinkTemplate',
        value: function makeTemporaryLinkTemplate() {
            return mk(go.Link, {
                layerName: 'Tool'
            }, mk(go.Shape, {
                name: 'linkshape',
                strokeWidth: 2
            }));
        }
    }, {
        key: 'makeTemporaryNodeTemplate',
        value: function makeTemporaryNodeTemplate() {
            return mk(go.Group, {
                layerName: 'Tool'
            }, mk(go.Shape, 'Border', {
                name: 'border',
                strokeWidth: 3,
                fill: null
            }));
        }
    }, {
        key: 'handlePortTargeted',

        // change color and portId of temporary link templates based on the type of link being created/relinked
        value: function handlePortTargeted(tool, realnode, realport, tempnode, tempport, toend) {
            // console.log('portTargeted, realport: ' + (realport ? realport.name : '') + ', tempport: ' + (tempport ? tempport.name : '')
            //     + ', originalFromPort: ' + (ltool.originalFromPort ? ltool.originalFromPort.name : '') + ', originalToPort: ' + ltool.originalToPort);

            var linkShape = tool.temporaryLink.findObject('linkshape');
            var fromBorder = tool.temporaryFromNode.findObject('border');
            var toBorder = tool.temporaryToNode.findObject('border');

            if (tool.originalFromPort && tool.originalFromPort.name === 'cornerPShape') {
                linkShape.stroke = colorP;
                fromBorder.stroke = colorP;
                toBorder.stroke = colorP;
                fromBorder.portId = 'P';
                toBorder.portId = 'P';
            } else if (tool.originalFromPort && tool.originalFromPort.name === 'cornerRShape') {
                linkShape.stroke = colorR;
                fromBorder.stroke = colorR;
                toBorder.stroke = colorR;
                fromBorder.portId = 'R';
                toBorder.portId = 'R';
            }
            tempnode.scale = this._map.layouts.getScale(realnode);
        }
    }, {
        key: 'validateLink',

        // prevent duplicate 'P' links in the same direction between the same two things
        value: function validateLink(fromNode, fromPort, toNode, toPort) {
            // the P port is on top of the R port, so both P and R links get the toPort set to R by default.
            if (fromPort.portId === 'P') {
                // NB: findLinksTo would be simpler, but it doesn't seem to work... (?)
                var pLinks = toNode.findLinksBetween(fromNode, 'P', 'P');
                //console.log('validateLink, pLinks from ' + fromNode + ':' + fromPort + ' to ' + toNode + ':' + toPort + ' = ' + pLinks.count);
                if (pLinks.count) {
                    while (pLinks.next()) {
                        var pLink = pLinks.value;
                        if (pLink.fromNode === fromNode && pLink.toNode === toNode) {
                            return false;
                        }
                    }
                }
            }
            return true;
        }
    }, {
        key: 'createExportFooter',

        // ------------------- export footer ----------------------

        // NB: this is not a template per se, in that it is added to the diagram
        // statically, rather than being bound to something in the model.
        // But we put it here because it is about creating parts and stuff.

        value: function createExportFooter() {
            return mk(go.Node, go.Panel.Spot, {
                layerName: 'Foreground',
                location: new go.Point(0, 0),
                scale: 1,
                opacity: 0,
                pickable: false,
                selectable: false
            }, mk(go.Shape, 'Rectangle', {
                name: 'rectangle',
                height: 60,
                fill: null,
                stroke: null
            }), mk(go.Picture, {
                source: 'assets/img/metamap-logo-50.png',
                alignment: go.Spot.TopLeft,
                alignmentFocus: go.Spot.TopLeft,
                width: 195,
                height: 50
            }), mk(go.TextBlock, {
                text: 'metamap.cabreraresearch.org',
                alignment: go.Spot.BottomLeft,
                alignmentFocus: go.Spot.BottomLeft,
                width: 200
            }), mk(go.TextBlock, {
                name: 'mapTitle',
                text: '',
                textAlign: 'right',
                alignment: go.Spot.TopRight,
                alignmentFocus: go.Spot.TopRight,
                width: 300
            }), mk(go.TextBlock, {
                name: 'authorName',
                text: '',
                textAlign: 'right',
                alignment: go.Spot.BottomRight,
                alignmentFocus: go.Spot.BottomRight,
                width: 300
            }));
        }
    }, {
        key: 'addExportFooter',

        // creates or refreshes the footer logo/text that is displayed in the image export
        value: function addExportFooter() {
            if (!_exportFooter) {
                _exportFooter = this.createExportFooter();
                this._map.getDiagram().add(_exportFooter);
            }
        }
    }, {
        key: 'showExportFooter',
        value: function showExportFooter() {
            var rect = this._map.computeMapBounds();
            // put footer at least 100 px below bottom of map; make it at least 500px wide
            var x = rect.x;
            var y = rect.y + rect.height + Math.max(100, rect.height / 5);
            var w = Math.max(500, rect.width);
            //console.log('showExportFooter, bounds rect: ' + rect + ', w: ' + w);
            _exportFooter.location = new go.Point(x, y);
            _exportFooter.findObject('rectangle').width = w;
            _exportFooter.findObject('mapTitle').text = 'Map Title: ' + this._editor.mapTitle;
            _exportFooter.findObject('authorName').text = 'Author: ' + this._editor.userName;
            _exportFooter.opacity = 1;
            _exportFooter.invalidateLayout();
        }
    }, {
        key: 'hideExportFooter',
        value: function hideExportFooter() {
            _exportFooter.opacity = 0;
        }
    }]);

    return Templates;
})();

module.exports = Templates;

},{"./templates/GroupTemplate.js":45,"./templates/LinkTemplate.js":46,"./templates/PLinkTemplate.js":47,"./templates/SlideTemplate.js":48,"./templates/dLinkTemplate.js":49}],36:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var TABS = require('../constants/tabs.js');
var go = window.go;

var UI = (function () {
    function UI(editor, map) {
        _classCallCheck(this, UI);

        this.map = map;
        this.editor = editor;

        this.zoomingToRegion = false;

        this.mouseOverGroup = null;
        this.mouseOverLink = null;

        this.dragTargetGroup = null;
        this.dragTargetPosition = null;

        this.helpTip = null;
        this.state = {};

        this._cornerClicked = null;
        this._cornerFunction = null;
        this._cornerTimeout = 300;
    }

    _createClass(UI, [{
        key: 'currentTabChanged',

        // ----------- handle bottom tabs ('sliders') -------------

        // in the following functions, ID is e.g. 'history-tab' (ID of one of the .bottom-tab's)

        // this is called by map.currentTabChanged, which is triggered by a this.$watch
        value: function currentTabChanged(newValue, oldValue) {
            //console.log('ui, currentTabChanged: ' + newValue);
            this.state.currentTab = newValue;
        }
    }, {
        key: 'currentTabIs',
        value: function currentTabIs(tabID) {
            return this.currentTab === tabID;
        }
    }, {
        key: 'openTab',
        value: function openTab(tabID) {
            this.currentTab = tabID;
        }
    }, {
        key: 'closeTab',
        value: function closeTab(tabID) {
            this.state.currentTab = null; // TODO: trigger autosave
            this.currentTab = null;
        }
    }, {
        key: 'disableTab',
        value: function disableTab(tabID) {
            // prevent opening other tabs when in P or D editor
            if (this.currentTab === TABS.TAB_ID_PERSPECTIVES || this.currentTab === TABS.TAB_ID_DISTINCTIONS) {
                return true;
            }
            return false;
        }
    }, {
        key: 'toggleTab',
        value: function toggleTab(tabID) {
            if (this.currentTab === tabID) {
                this.currentTab = null;
            } else if (!this.disableTab(tabID)) {
                this.currentTab = tabID;
            }
        }
    }, {
        key: 'toggleNavigator',
        value: function toggleNavigator() {
            this.state.showNavigator = !this.state.showNavigator;
        }
    }, {
        key: 'toggleZoomingToRegion',
        value: function toggleZoomingToRegion() {
            this.zoomingToRegion = !this.zoomingToRegion;
        }
    }, {
        key: 'getStateData',
        value: function getStateData() {}
    }, {
        key: 'setStateData',
        value: function setStateData() {}
    }, {
        key: 'canZoomIn',

        // ----------------- zooming functions -------------------
        value: function canZoomIn() {
            return this.map.getDiagram().scale < 32;
        }
    }, {
        key: 'canZoomOut',
        value: function canZoomOut() {
            return this.map.getDiagram().scale > 0.25;
        }
    }, {
        key: 'zoomIn',
        value: function zoomIn() {
            var diagram = this.map.getDiagram();
            if (diagram.scale < 32) {
                var vb = diagram.viewportBounds.copy();
                diagram.scale = diagram.scale * 2;
                diagram.centerRect(vb);
            }
        }
    }, {
        key: 'zoomOut',
        value: function zoomOut() {
            var diagram = this.map.getDiagram();
            if (diagram.scale > 0.25) {
                var vb = diagram.viewportBounds.copy();
                diagram.scale = diagram.scale / 2;
                diagram.centerRect(vb);
            }
        }
    }, {
        key: 'maybeZoomToRegion',
        value: function maybeZoomToRegion() {
            var diagram = this.map.getDiagram();
            // this flag is set by the toolbar button
            if (this.zoomingToRegion) {
                this.zoomingToRegion = false;
                console.log('zoomToRegion, selection count: ' + diagram.selection.count);
                var rect = diagram.computePartsBounds(diagram.selection);
                diagram.zoomToRect(rect);
            }
        }
    }, {
        key: 'resetZoom',
        value: function resetZoom() {
            var diagram = this.map.getDiagram();
            //let rect = diagram.computePartsBounds(diagram.nodes).copy();
            var rect = this.map.safeRect(this.map.computeMapBounds());
            //console.log('resetZoom, bounds: ' + rect);
            if (rect.width) {
                rect.inflate(rect.width / 5, rect.height / 5);
            }
            diagram.zoomToRect(rect);
            diagram.alignDocument(go.Spot.Center, go.Spot.Center);
            if (diagram.scale > 1) {
                diagram.scale = 1;
            }
        }
    }, {
        key: 'getSelectedThingsOrDefaultLayout',

        // ------------ thing options (layout) ----------------

        value: function getSelectedThingsOrDefaultLayout() {
            var sl = this.getSelectedThingsLayout();
            if (sl) {
                return sl;
            } else {
                return mapEditorOptions.defaultThingLayout;
            }
        }
    }, {
        key: 'getSelectedThingsLayout',

        // returns a non-null value only if all selected items are groups with the same layout
        value: function getSelectedThingsLayout() {
            var diagram = this.map.getDiagram();
            if (!diagram || diagram.selection.count < 1) return null;

            var layout = null;
            var it = diagram.selection.iterator;
            while (it.next()) {
                if (!it.value instanceof go.Group) return null;
                var group = it.value;
                //console.log('getSelectedThingsLayout, it.value: ' + group);
                var groupLayout = group.data ? group.data.layout : null;
                if (layout !== null && groupLayout !== layout) return null;
                layout = groupLayout;
            }
            //console.log('getSelectedThingsLayout: ' + layout);

            return layout;
        }
    }, {
        key: 'setSelectedThingsLayout',

        // sets the layout of all selected things to the given layout
        value: function setSelectedThingsLayout(layoutName) {
            var diagram = this.map.getDiagram();
            var it = diagram.selection.iterator;
            while (it.next()) {
                if (it.value instanceof go.Group) {
                    var group = it.value;
                    diagram.model.setDataProperty(group.data, 'layout', layoutName);
                    this.map.layouts.setDescendantLayouts(group, group.data.layout);
                    this.map.refresh();
                }
            }
        }
    }, {
        key: 'getSelectedRelationshipsOrDefaultDirection',

        // ------------ relationship options (direction) ----------------

        value: function getSelectedRelationshipsOrDefaultDirection() {
            var sd = this.getSelectedRelationshipsDirection();
            if (sd) {
                return sd;
            } else {
                return mapEditorOptions.defaultRelationshipDirection;
            }
        }
    }, {
        key: 'getSelectedRelationshipsDirection',

        // returns a non-null value only if all selected items are relationships with the same direction
        value: function getSelectedRelationshipsDirection() {
            var diagram = this.map.getDiagram();
            if (!diagram || diagram.selection.count < 1) return null;

            var type = null;
            var it = diagram.selection.iterator;
            while (it.next()) {
                if (!it.value instanceof go.Link) return null;
                var link = it.value;
                var linkType = link.data ? link.data.type : null;
                if (type !== null && linkType !== type) return null;
                type = linkType;
            }

            return type;
        }
    }, {
        key: 'setSelectedRelationshipsDirection',

        // sets the direction of all selected relationships to the given direction
        value: function setSelectedRelationshipsDirection(direction) {
            var diagram = this.map.getDiagram();
            //diagram.model.startTransaction('change relationship direction');
            var it = diagram.selection.iterator;
            while (it.next()) {
                if (it.value instanceof go.Link) {
                    //diagram.model.startTransaction('change link type');
                    diagram.model.setDataProperty(it.value.data, 'type', direction);
                    //diagram.model.commitTransaction('change link type');
                }
            }
            //diagram.commitTransaction('change relationship direction');
        }
    }, {
        key: 'handleCornerClick',

        // ------- handle corner clicks and double clicks --------
        value: function handleCornerClick(corner, thing) {
            var _this = this;

            //console.log('handleCornerClick: corner = ' + corner + ', cornerClicked = ' + _cornerClicked);
            // assume it's a single click, and set handler
            this._cornerClickedCnt = 1;
            var _cornerFunction = this.getCornerFunction(corner, this._cornerClickedCnt);
            // already clicked, so it's a double click; change handler
            if (this._cornerClicked === corner) {
                this._cornerClickedCnt += 1;
                _cornerFunction = this.getCornerFunction(corner, this._cornerClickedCnt);
                console.log('handleCornerClick: double click on ' + corner);
                return;
            }
            // remember that at least one click has happened for the current corner
            this._cornerClicked = corner;

            // set timer to invoke whatever handler we have ready to go (unless another click happens within the interval)
            var timer = setTimeout(function () {
                // ding! invoke it
                if (_cornerFunction === _this.showCornerTip) {
                    _this.showCornerTip(thing, corner);
                } else {
                    _this.execCornerFunction(corner, _this._cornerClickedCnt, thing); // don't pass the corner arg to things like createChild that have a different second arg
                }
                _this._cornerClickedCnt = 0;
                _this._cornerClicked = null;
            }, this._cornerTimeout);
        }
    }, {
        key: 'execCornerFunction',
        value: function execCornerFunction(corner, clicks) {
            for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
                args[_key - 2] = arguments[_key];
            }

            if (corner === 'D') {
                var _map;

                return clicks === 1 ? this.showCornerTip.apply(this, args) : (_map = this.map).createSister.apply(_map, args);
            } else if (corner === 'S') {
                var _map2, _map3;

                return clicks === 1 ? (_map2 = this.map).toggleSExpansion.apply(_map2, args) : (_map3 = this.map).createChild.apply(_map3, args);
            } else if (corner === 'R') {
                var _map4;

                return clicks === 1 ? this.showCornerTip.apply(this, args) : (_map4 = this.map).createRToSister.apply(_map4, args);
            } else if (corner === 'P') {
                var _map5, _map$perspectives;

                return clicks === 1 ? (_map5 = this.map).togglePExpansion.apply(_map5, args) : (_map$perspectives = this.map.perspectives).setPEditorPoint.apply(_map$perspectives, args);
            } else if (corner === '') {
                // click on text
                return clicks === 1 ? this.showCornerTip.apply(this, args) : this.editText.apply(this, args);
            } else {
                return function () {
                    console.log('getCornerFunction: no function found for corner: ' + corner + '!');
                };
            }
        }
    }, {
        key: 'getCornerFunction',
        value: function getCornerFunction(corner, clicks) {
            if (corner === 'D') {
                return clicks === 1 ? this.showCornerTip : this.map.createSister;
            } else if (corner === 'S') {
                return clicks === 1 ? this.map.toggleSExpansion : this.map.createChild;
            } else if (corner === 'R') {
                return clicks === 1 ? this.showCornerTip : this.map.createRToSister;
            } else if (corner === 'P') {
                return clicks === 1 ? this.map.togglePExpansion : this.map.perspectives.setPEditorPoint;
            } else if (corner === '') {
                // click on text
                return clicks === 1 ? this.showCornerTip : this.editText;
            } else {
                return function () {
                    console.log('getCornerFunction: no function found for corner: ' + corner + '!');
                };
            }
        }
    }, {
        key: 'editText',

        // NB: in this case the thing is actually the TextBox, except in outline layout it is a Panel if the box is double-clicked...
        value: function editText(thing, corner) {
            if (!this.canEdit) {
                return null;
            }

            console.log('editText, thing: ' + thing);
            if (thing instanceof go.Panel) {
                // outline layout
                var part = thing.part;
                console.log('editText, part: ' + part);
                if (part instanceof go.Group && part.data && (part.data.layout === 'left' || part.data.layout === 'right')) {
                    var textBlockName = 'externaltext-' + part.data.layout;
                    var text = thing.part.findObject(textBlockName);
                    if (text) {
                        thing = text;
                    }
                }
            }
            this.map.getDiagram().commandHandler.editTextBlock(thing);
        }
    }, {
        key: 'showCornerTip',

        // ---------------- help tip functions - see also user.js, views/maps/help_tab ---------------

        // shows thingTip or one of the cornerXTips
        value: function showCornerTip(thing, corner) {
            //console.log('showCornerTip');
            if (corner === '') {
                this.showHelpTip('thingTip');
            } else {
                this.showHelpTip('corner' + corner + 'Tip');
            }
        }
    }, {
        key: 'showHelpTip',
        value: function showHelpTip(tip) {
            var _this2 = this;

            //console.log('showHelpTip: ' + tip);

            // don't show help if in presenter
            if (this.currentTabIs(TABS.TAB_ID_PRESENTER)) {
                return;
            }

            this.helpTip = tip;
            //this.safeApply();
            $('#help-tip').show();

            setTimeout(function () {
                $('#help-tip').fadeOut(500, function () {
                    _this2.helpTip = null;
                    //this.safeApply();
                });
            }, 5000);
        }
    }]);

    return UI;
})();

module.exports = UI;

},{"../constants/tabs.js":20}],37:[function(require,module,exports){
// functions handling editor autosave function
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var $http = {
    put: function put() {
        return new Promise(function (fulfill, reject) {});
    }
};

var changeDescriptions = {
    move: 'Moved Objects',
    undo_redo: 'Performed Undo/Redo',
    edit_title: 'Edited MetaMap Title',
    edit_description: 'Edited MetaMap Description',
    edit_usertags: 'Edit MetaMap Tags',
    edit_d: 'Edited Distinctions',
    edit_s: 'Edited Systems',
    edit_r: 'Edited Relationships',
    edit_p: 'Edited Perspectives',
    add_thing: 'Added Ideas',
    rename_thing: 'Renamed Ideas',
    delete_thing: 'Deleted Ideas',
    edit_attachments: 'Edited Attachments',
    edit_presenter: 'Edited Presenter Slides',
    edit_generator: 'Inserted Ideas from ThinkQuery',
    edit_standards: 'Edited Links to Common Core Standards'
};

var go = window.go;

var Autosave = (function () {
    function Autosave(editor, map) {
        _classCallCheck(this, Autosave);

        this._editor = editor;
        this._map = map;
        this.changeTypes = [];
        this.saveOnModelChanged = true;
    }

    _createClass(Autosave, [{
        key: 'save',
        value: function save(changeType) {
            this.changeTypes.push(changeType);
            this.delayedAutosave();
        }
    }, {
        key: 'saveNow',

        // do a save right now
        value: function saveNow(changeType) {
            this.changeTypes.push(changeType);
            this.autosave();
        }
    }, {
        key: 'delayedAutosave',

        // don't let autosave be triggered more than every N milliseconds...
        get: function () {
            if (!this._delayedAutoSave) {
                this._delayedAutoSave = _.debounce(this.autosave, 2000);
            }
            return this._delayedAutoSave;
        }
    }, {
        key: 'autosave',

        // compile the current list of change type descriptions, process them
        // to remove duplicates, and save the current data
        value: function autosave() {}
    }, {
        key: 'modelChanged',

        // -------------- handle model changes - trigger autosave ------------------

        // e is a go.ChangedEvent
        value: function modelChanged(e) {

            if (!self.saveOnModelChanged) {
                return;
            }

            var changeType = null;
            var changeDescription = null;

            if (e.propertyName === 'type') {
                // change R type
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,n,1,o,2,A,3,r,4,r,5,o,6,w,7,s] , newParam: null, newValue: [0,t,1,o] , propertyName: type
                changeType = 'edit_r';
                changeDescription = 'Changed Relationship Types';
            } else if (e.propertyName === 'layout') {
                // change system layout
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,l,1,e,2,f,3,t] , newParam: null, newValue: [0,r,1,i,2,g,3,h,4,t] , propertyName: layout
                changeType = 'edit_s';
            } else if (e.change === go.ChangedEvent.Insert && this.propertyEquals(e.newValue, 'fromPort', 'R')) {
                // add link
                // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,P] , propertyName: linkDataArray
                // modelChange: linkToPortId, change: ChangedEvent.Property, oldParam: null, oldValue: [0,P] , newParam: null, newValue: [0,R] , propertyName: toPort
                changeType = 'edit_r';
            } else if (e.change === go.ChangedEvent.Remove && this.propertyEquals(e.oldValue, 'fromPort', 'R')) {
                // delete link
                // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,R] , newParam: null, newValue: [] , propertyName: linkDataArray
                changeType = 'edit_r';
            } else if (e.propertyName === 'linkDataArray') {
                // change P/D links
                // add P link
                // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 2, newValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P] , propertyName: linkDataArray
                // modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
                // delete P link
                // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 2, oldValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P,category,P] , newParam: null, newValue: [] , propertyName: linkDataArray
                // add D link
                // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , propertyName: linkDataArray
                // remove D link
                // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , newParam: null, newValue: [] , propertyName: linkDataArray

                if (e.newValue && e.newValue.category === 'P' || e.oldValue && e.oldValue.category === 'P') {
                    changeType = 'edit_p';
                } else if (e.newValue && e.newValue.category === 'D' || e.oldValue && e.oldValue.category === 'D') {
                    changeType = 'edit_d';
                }
            } else if (e.propertyName === 'category') {
                // add P link
                // modelChanged, modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
                changeType = 'edit_p';
            } else if (e.propertyName === 'group') {
                // drag into S
                // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
                // reorder part
                // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
                // drag to D
                // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group

                changeType = 'edit_s';
            } else if (e.propertyName === 'nodeDataArray' && e.change === go.ChangedEvent.Insert && this.propertyEquals(e.newValue, 'isGroup', true)) {
                // add thing
                // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7] , propertyName: nodeDataArray
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,2,1,2,2,8,3,.,4,5,5,6,6,2,7,5,8, ,9,-,10,1,11,4,12,9,13,.,14,6,15,8,16,7,17,5] , propertyName: loc
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: children
                changeType = 'add_thing';
            } else if (e.propertyName === 'text') {
                // move thing
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,b,1,b,2,b,3,b,4,b] , newParam: null, newValue: [0,a,1,a,2,a,3,a,4,a] , propertyName: text
                changeType = 'rename_thing';
                changeDescription = 'Renamed Ideas';
            } else if (e.propertyName === 'nodeDataArray' && e.change === go.ChangedEvent.Remove && this.propertyEquals(e.oldValue, 'isGroup', true)) {
                // delete thing
                // modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7,loc,228.5625 -149.6875,children,0,attachments,] , newParam: null, newValue: [] , propertyName: nodeDataArray
                changeType = 'delete_thing';
            } else if (e.propertyName === 'nodeDataArray' && e.change === go.ChangedEvent.Insert && this.propertyEquals(e.newValue, 'isGroup', false)) {
                // add slide
                // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877] , propertyName: nodeDataArray
                changeType = 'edit_presenter';
            } else if (e.propertyName === 'nodeDataArray' && e.change === go.ChangedEvent.Remove && this.propertyEquals(e.oldValue, 'isGroup', false)) {
                // delete slide
                //modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877,$$hashKey,0XN] , newParam: null, newValue: [] , propertyName: nodeDataArray
                changeType = 'edit_presenter';
            } else if (e.propertyName === 'loc' || e.propertyName === 'width' || e.propertyName === 'height') {
                // move thing or resize slide
                // move slide
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,8] , newParam: null, newValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,7] , propertyName: loc
                // resize slide
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: height
                // move thing
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,4,1,7,2,9,3,.,4,8,5,7,6,5,7, ,8,-,9,1,10,2,11,2,12,.,13,8,14,7,15,5] , newParam: null, newValue: [0,5,1,4,2,0,3,.,4,3,5,1,6,2,7,5,8, ,9,-,10,1,11,2,12,1,13,.,14,1,15,8,16,7,17,5] ,            
                changeType = 'move';
            } else if (e.propertyName === 'level' || e.propertyName === 'children') {
                // these attributes are updated as a result of other actions; ignore
                changeType = null;
            } else if (e.propertyName === 'attachments') {
                // edited attachments
                changeType = 'edit_attachments';
            } else if (e.propertyName === 'sExpanded' || e.propertyName === 'pExpanded') {
                // ignore expand/collapse
                changeType = 'move';
            } else if (e.propertyName === 'FinishedUndo' || e.propertyName === 'FinishedRedo') {
                changeType = 'undo_redo';
                this._map.refresh();
            } else if (e.change !== go.ChangedEvent.Transaction) {
                console.log('modelChanged, modelChange: ' + e.modelChange + ', change: ' + e.change + ', oldParam: ' + e.oldParam + ', oldValue: [' + _.pairs(e.oldValue) + '] ' + ', newParam: ' + e.newParam + ', newValue: [' + _.pairs(e.newValue) + '] ' + ', propertyName: ' + e.propertyName);
            }

            if (changeType) {
                this._map.analytics.updateContextualAnalytics();
                //console.log('calling delayedAutosave, changeType: ' + changeType);
                self.save(changeType);
            }
        }
    }, {
        key: 'propertyEquals',

        // convenience function for checking properties
        value: function propertyEquals(obj, key, value) {
            return obj !== null && _.has(obj, key) && _.result(obj, key) === value;
        }
    }]);

    return Autosave;
})();

module.exports = Autosave;

// stop right here if we're in the sandbox and/or we don't have edit permissions
//if (this._editor.sandbox || !this._editor.canEdit) {
//    return;
//}

//if (!this.changeTypes.length) {
//    console.log('autosave: nothing to save!'); // shouldn't happen
//    return;
//}

//// de-dupe the list of change types
//let changeList = _.uniq(this.changeTypes);
////console.log('changeList: ' + changeList);
//// don't show move events unless that's all we have
//let changeListWithoutMoves = _.without(changeList, 'move');
//if (changeListWithoutMoves.length > 0) {
//    changeList = changeListWithoutMoves;
//}
////console.log('changeList without moves: ' + changeList);
//// get descriptions
//let descriptionList = _.map(changeList, (ct) => {
//    return _.result(changeDescriptions, ct);
//});

////console.log('autosave, changeList: ' + changeList + ', descriptionList: ' + descriptionList);
//let postData = {
//    "name": this._editor.mapTitle,
//    "data": this._map.getDiagram().model.toJson(),
//    "state_data": JSON.stringify(this._map.ui.getStateData()),
//    "editor_options": JSON.stringify(this._map._editorOptions),
//    "presenter_slides": this._map.presenter.getSlideCount(),
//    "activity_slides": this._map.presenter.getActivitySlideCount(),
//    "change_type": changeList.join(';'),
//    "change_description": descriptionList.join('; '),
//    "thumbnail_png": this._map.presenter.getMapThumbnail()
//};
//let url = this._editor.mapUrl + '.json';

//this._editor.updateEditStatus(this._editor.SAVING);
//$http.put(url, postData).then(
//    (response) => {
//        this.changeTypes = [];
//        this._editor.updateEditStatus(this._editor.SAVE_OK);
//        // load returned data for analytics, points, badges, versions
//        this._editor.this._map.loadMapExtraData(response.data.map);
//    },
//    () => {
//        this._editor.updateEditStatus(this._editor.SAVE_FAILED);
//    });

},{}],38:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var editStatus = require('../constants/editStatus.js');
var common = require('../tools/Common.js');
var BACKSPACE = 8;
var Map = require('./Map.js');

var Editor = (function () {
    function Editor(mapData) {
        _classCallCheck(this, Editor);

        this.mapData = mapData;
        var metadata = mapData.map.metadata;
        this.sandbox = metadata.sandbox;
        this.mapData = window.mapData.map.data; // this gets overwritten by load() unless we are in the sandbox with no map ID
        this.mapId = metadata.id;
        this.mapTitle = metadata.name;
        this.mapUserTags = metadata.userTags;
        this.mapUrl = metadata.url;
        this.canEdit = metadata.canEdit;
        this.updatedAt = metadata.updatedAt;
        this.updatedBy = metadata.updatedBy; // ID
        this.updatedByName = metadata.updatedByName;
        this.editingTitle = false;
        this.editStatus = '';

        this.showImageExport = false;
        this.imageExportLoading = true;

        this.currentTab = null;

        // override parent scope (see user.js) since we're editing a map
        //this.ccsTagging.mapId = this.mapId;

        this.map = new Map({ Editor: this });

        if (!this.sandbox) {}

        if (this.mapUrl) {
            this.map.load();
        } else {
            this.map.loadForSandbox();
        }

        this.addBehaviors();
        this.handleNavigation();
        this.handleBackspace();
    }

    _createClass(Editor, [{
        key: 'maybeStartEditingTitle',
        value: function maybeStartEditingTitle() {
            if (this.canEdit) {
                this.editingTitle = true;
            }
        }
    }, {
        key: 'doneEditingTitle',
        value: function doneEditingTitle() {
            //console.log('doneEditingTitle');
            this.editingTitle = false;
            this.map.autosave.save('edit_title');
        }
    }, {
        key: 'editingTitleKeypress',
        value: function editingTitleKeypress(e) {
            if (e.which === 13) {
                this.doneEditingTitle();
            }
        }
    }, {
        key: 'print',
        value: function print() {
            window.print();
        }
    }, {
        key: 'saveSandboxMap',

        // ------------ save sandbox map (sign up/sign in) ---------------

        value: function saveSandboxMap() {
            var _this = this;

            var modalInstance = $modal.open({
                templateUrl: 'template_sandbox_save_modal.html', // see views/users/_template_sandbox_save_modal
                backdrop: 'static',
                controller: this.sandboxSaveModalCtrl,
                windowClass: 'sandbox-save-modal',
                resolve: {
                    outerScope: function outerScope() {
                        return _this;
                    },
                    map: function map() {
                        return _this.map;
                    },
                    userProfile: function userProfile() {
                        return _this.userProfile;
                    }
                }
            });

            modalInstance.result.then(function () {});
        }
    }, {
        key: 'updateEditStatus',
        value: function updateEditStatus(s) {
            //console.log('updateEditStatus: ' + s);
            this.editStatus = s;
            if (s === editStatus.SAVE_FAILED) {
                alert('Changes could not be saved - please check your network connection.');
            } else if (s === editStatus.LAST_UPDATED) {
                var time = moment(this.updatedAt).fromNow();
                var by = '';
                if (this.updatedBy === this.userId) {
                    by = 'by me';
                } else if (this.updatedByName) {
                    by = 'by ' + this.updatedByName;
                }
                // TODO: show 'by me' only for editable shared maps?

                this.editStatus = 'Last updated ' + time + ' ' + by;
            }

            // Last edit was XX ago by YY
        }
    }, {
        key: 'addBehaviors',

        // misc. UI behaviors for tooltips, popups etc.
        // TODO: figure out which of these need to be reapplied after dynamic data changes (e.g. LessonBook popovers)
        value: function addBehaviors() {

            // NOTE: we have to use regular bootstrap tooltips for toolbar buttons (instead of ng-bootstrap ones)
            // so we can turn them off for mobile. We also put the tooltips on wrappers rather than on the actual
            // buttons, so we can avoid the issue of stuck tooltips if a button gets disabled while the tooltip is showing.

            if (!common.isTouchDevice()) {
                // $('.tooltip-wrapper').tooltip({
                //     placement: 'top',
                //     container: 'body'
                // });

                // $('.dropdown-menu .btn').tooltip({
                //     placement: 'left',
                //     container: 'body'
                // }); // for layout options

                $('header, #map-title').hover(function () {
                    $('body.presenter-playing').addClass('hide-header');
                }, function () {
                    $('body.presenter-playing').removeClass('hide-header');
                });
            }
        }
    }, {
        key: 'handleNavigation',
        value: function handleNavigation() {
            // cross-browser tweaks:
            try {
                // http://www.opera.com/support/kb/view/827/
                opera.setOverrideHistoryNavigationMode('compatible');
                history.navigationMode = 'compatible';
            } catch (e) {}

            // install before-unload handler:

            var exitMessage = function exitMessage() {
                return 'Navigating away from your Map will cause any unsaved changes to be lost ' + '(any changes you make are automatically saved, but it takes a couple of seconds).';
            };

            //        $(window).bind('beforeunload', exitMessage);

            // prevent exit prompt when the user deliberately navigates away:

            $('#header-right a').click(function () {
                $(window).unbind('beforeunload', exitMessage);
            });
        }
    }, {
        key: 'handleBackspace',
        value: function handleBackspace() {
            $(document).on('keydown', function (event) {
                if (event.keyCode === BACKSPACE) {
                    if (!$('body :focus').is(':input')) {
                        // prevent accidental backspace when no input has focus:
                        event.preventDefault();
                        event.stopPropagation();
                    }
                }
            });
        }
    }]);

    return Editor;
})();

module.exports = Editor;

// overview diagram
//let overview = go.GraphObject.make(go.Overview, "overview-diagram", {
//    observed: this.map.getDiagram(),
//    contentAlignment: go.Spot.Center
//});
//let outline = overview.box.elements.first();
//outline.stroke = "#333";

// no biggie.

},{"../constants/editStatus.js":19,"../tools/Common.js":51,"./Map.js":32}],39:[function(require,module,exports){
// functions for the generator (aka ThinkQuery)
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Generator = (function () {
    function Generator(editor, map) {
        var _this = this;

        _classCallCheck(this, Generator);

        this._map = map;
        this._diagram = map.getDiagram();
        this.concept1 = '';
        this.concept2 = '';
        this.selectedQuestion = null;

        // ---------- functions for creating each of the structures - see views/maps/generator_tab -----------
        this.queries = {

            WHAT_IS: function WHAT_IS(x, y) {
                // 1
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                _this._diagram.model.setDataProperty(thing1.data, 'dflag', true);
                _this._map.createChild(thing1, 'is?');
                _this._map.createChild(thing1, 'is?');
                _this._map.createChild(thing1, 'is?');
            },

            WHAT_IS_NOT: function WHAT_IS_NOT(x, y) {
                // 2
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                _this._diagram.model.setDataProperty(thing1.data, 'dflag', true);
                _this._map.createChild(thing1, 'is not?');
                _this._map.createChild(thing1, 'is not?');
                _this._map.createChild(thing1, 'is not?');
            },

            DISTINGUISH_BETWEEN: function DISTINGUISH_BETWEEN(x, y) {
                // 3
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                _this._diagram.model.setDataProperty(thing1.data, 'dflag', true);
                _this._map.createChild(thing1, 'is?');
                _this._map.createChild(thing1, 'is?');
                _this._map.createChild(thing1, 'is?');

                var thing2 = _this._map.createThing(x + 250, y, _this.echoConcept2());
                _this._diagram.model.setDataProperty(thing2.data, 'dflag', true);
                _this._map.createChild(thing2, 'is?');
                _this._map.createChild(thing2, 'is?');
                _this._map.createChild(thing2, 'is?');
            },

            COMPARE_CONTRAST: function COMPARE_CONTRAST(x, y) {
                // 4
                var thing1 = _this._map.createThing(x - 150, y, _this.echoConcept1());
                var thing2 = _this._map.createThing(x + 150, y, _this.echoConcept2());
                _this._diagram.model.setDataProperty(thing1.data, 'dflag', true);
                _this._diagram.model.setDataProperty(thing2.data, 'dflag', true);
                var rthing1 = _this._map.createRLinkWithRThing(thing1, thing2, 'contrast');
                var rthing2 = _this._map.createRLinkWithRThing(thing1, thing2, 'compare');
                _this._diagram.model.setDataProperty(rthing1.labeledLink.data, 'type', 'toFrom');
                _this._diagram.model.setDataProperty(rthing2.labeledLink.data, 'type', 'toFrom');
            },

            PARTS_OF: function PARTS_OF(x, y) {
                // 5
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                _this._map.createChild(thing1, 'part?');
                _this._map.createChild(thing1, 'part?');
                _this._map.createChild(thing1, 'part?');
            },

            PART_OF: function PART_OF(x, y) {
                // 6
                var thing1 = _this._map.createThing(x, y, 'part of?');
                _this._map.createChild(thing1, _this.echoConcept1());
            },

            PARTS_HAVE_PARTS: function PARTS_HAVE_PARTS(x, y) {
                // 7
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                var child1 = _this._map.createChild(thing1, 'part?');
                _this._map.createChild(child1, 'part?');
                _this._map.createChild(child1, 'part?');
                var child2 = _this._map.createChild(thing1, 'part?');
                _this._map.createChild(child2, 'part?');
                _this._map.createChild(child2, 'part?');
            },

            R_PARTS: function R_PARTS(x, y) {
                // 8
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                var thing2 = _this._map.createThing(x + 250, y, _this.echoConcept2());
                var rthing = _this._map.createRLinkWithRThing(thing1, thing2, 'relationship?');
                _this._map.createChild(rthing, 'part?');
                _this._map.createChild(rthing, 'part?');
            },

            P_PARTS: function P_PARTS(x, y) {
                // 9
                var thing1 = _this._map.createThing(x + 300, y, _this.echoConcept1());
                var child1 = _this._map.createChild(thing1, 'part seen from viewpoint of ' + _this.echoConcept2() + '?');
                var child2 = _this._map.createChild(thing1, 'part seen from viewpoint of ' + _this.echoConcept2() + '?');
                var child3 = _this._map.createChild(thing1, 'part seen from viewpoint of ' + _this.echoConcept2() + '?');
                var thing2 = _this._map.createThing(x, y, _this.echoConcept2());
                _this._map.createPLink(thing2, thing1);
                _this._map.createPLink(thing2, child1);
                _this._map.createPLink(thing2, child2);
                _this._map.createPLink(thing2, child3);
            },

            RS_TO_AND_BY: function RS_TO_AND_BY(x, y) {
                // 10
                var related1 = _this._map.createThing(x, y, 'related idea?');
                var related2 = _this._map.createThing(x + 300, y + 50, 'related idea?');
                var related3 = _this._map.createThing(x + 50, y + 300, 'related idea?');
                var thing = _this._map.createThing(x + 130, y + 130, _this.echoConcept1());
                _this._map.createRLink(related1, thing);
                _this._map.createRLink(related2, thing);
                _this._map.createRLink(related3, thing);

                var thing1 = _this._map.createThing(x + 500, y + 150, 'idea?');
                var thing2 = _this._map.createThing(x + 750, y + 150, 'idea?');
                _this._map.createRLinkWithRThing(thing1, thing2, _this.echoConcept1());
            },

            WHAT_IS_R: function WHAT_IS_R(x, y) {
                // 11
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                var thing2 = _this._map.createThing(x + 250, y, _this.echoConcept2());
                _this._map.createRLinkWithRThing(thing1, thing2, 'idea?');
            },

            PART_RS_ARE: function PART_RS_ARE(x, y) {
                // 12
                var thing1 = _this._map.createThing(x + 30, y, _this.echoConcept1(), 'freehand');
                var child1 = _this._map.createChild(thing1, 'part?');
                var child2 = _this._map.createChild(thing1, 'part?');
                var child3 = _this._map.createChild(thing1, 'part?');
                _this._diagram.model.setDataProperty(child1.data, 'loc', '-20 110');
                _this._diagram.model.setDataProperty(child2.data, 'loc', '80 110');
                _this._diagram.model.setDataProperty(child3.data, 'loc', '30 190');
                _this._map.createRLinkWithRThing(child1, child2, 'relationship?');
                _this._map.createRLinkWithRThing(child2, child3, 'relationship?');
                _this._map.createRLinkWithRThing(child3, child1, 'relationship?');
            },

            PART_RS_EXIST: function PART_RS_EXIST(x, y) {
                // 13
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1(), 'right');
                var child11 = _this._map.createChild(thing1, 'part?');
                var child12 = _this._map.createChild(thing1, 'part?');
                var child13 = _this._map.createChild(thing1, 'part?');
                var thing2 = _this._map.createThing(x + 250, y, _this.echoConcept2());
                var child21 = _this._map.createChild(thing2, 'part?');
                var child22 = _this._map.createChild(thing2, 'part?');
                var child23 = _this._map.createChild(thing2, 'part?');
                _this._map.createRLink(thing1, thing2);
                _this._map.createRLinkWithRThing(child11, child21, 'relationship?');
                _this._map.createRLinkWithRThing(child12, child22, 'relationship?');
                _this._map.createRLinkWithRThing(child13, child23, 'relationship?');
            },

            RS_WITH_OTHERS: function RS_WITH_OTHERS(x, y) {
                // 14
                var thing1 = _this._map.createThing(x - 200, y, _this.echoConcept1());
                var thing2 = _this._map.createThing(x + 200, y, _this.echoConcept2());
                var thing3 = _this._map.createThing(x - 200, y + 200, 'another thing');
                var thing4 = _this._map.createThing(x + 200, y + 200, 'another thing');
                _this._map.createRLinkWithRThing(thing1, thing2, 'relationship?');
                _this._map.createRLinkWithRThing(thing1, thing3, 'relationship?');
                _this._map.createRLinkWithRThing(thing1, thing4, 'relationship?');
                _this._map.createRLinkWithRThing(thing2, thing4, 'relationship?');
                _this._map.createRLinkWithRThing(thing3, thing4, 'relationship?');
            },

            PARTS_OF_P: function PARTS_OF_P(x, y) {
                // 15
                var thing1 = _this._map.createThing(x - 100, y, _this.echoConcept1());
                var child1 = _this._map.createChild(thing1, 'part?');
                var child2 = _this._map.createChild(thing1, 'part?');
                var child3 = _this._map.createChild(thing1, 'part?');
                var thing2 = _this._map.createThing(x + 100, y, _this.echoConcept2());
                _this._map.createPLink(thing1, thing2);
            },

            POINT_FOR: function POINT_FOR(x, y) {
                // 16
                var thing = _this._map.createThing(x, y, 'new perspective');
                var thing1 = _this._map.createThing(x - 150, y + 150, _this.echoConcept1());
                var thing2 = _this._map.createThing(x + 150, y + 150, _this.echoConcept2());
                var rthing = _this._map.createRLinkWithRThing(thing1, thing2, 'relationship?');
                _this._map.createPLink(thing, rthing);
            },

            HAS_MULTIPLE_PS: function HAS_MULTIPLE_PS(x, y) {
                // 17
                var point1 = _this._map.createThing(x, y + 50, 'viewpoint?');
                var point2 = _this._map.createThing(x + 250, y, 'viewpoint?');
                var point3 = _this._map.createThing(x + 500, y + 50, 'viewpoint?');
                var view = _this._map.createThing(x + 250, y + 250, _this.echoConcept1());
                _this._map.createPLink(point1, view);
                _this._map.createPLink(point2, view);
                _this._map.createPLink(point3, view);
            },

            PARTS_FROM_MULTIPLE_PS: function PARTS_FROM_MULTIPLE_PS(x, y) {
                // 18
                var point1 = _this._map.createThing(x - 100, y, 'viewpoint?');
                var point2 = _this._map.createThing(x - 100, y + 125, 'viewpoint?');
                var point3 = _this._map.createThing(x - 100, y + 250, 'viewpoint?');
                var thing = _this._map.createThing(x + 150, y + 25, _this.echoConcept1());
                var child1 = _this._map.createChild(thing, 'part seen from viewpoint?');
                var child2 = _this._map.createChild(thing, 'part seen from viewpoint?');
                var child3 = _this._map.createChild(thing, 'part seen from viewpoint?');
                _this._map.createPLink(point1, child1);
                _this._map.createPLink(point1, child2);
                _this._map.createPLink(point2, child2);
                _this._map.createPLink(point3, child3);
            },

            WHAT_ABOUT: function WHAT_ABOUT(x, y) {
                // 19
                _this.queries.WHAT_IS(x, y);
                _this.queries.PARTS_OF(x + 300, y);
                _this.queries.PARTS_FROM_MULTIPLE_PS(x + 700, y);
                _this.queries.RS_TO_AND_BY(x, y + 400);
            }
        }; // queries
    }

    _createClass(Generator, [{
        key: 'echoConcept1',
        value: function echoConcept1() {
            return this.concept1 || '...';
        }
    }, {
        key: 'echoConcept2',
        value: function echoConcept2() {
            return this.concept2 || '...';
        }
    }, {
        key: 'swapConcepts',
        value: function swapConcepts() {
            var tmp = this.concept1;
            this.concept1 = this.concept2;
            this.concept2 = tmp;
        }
    }, {
        key: 'mapIt',
        value: function mapIt(question) {

            this._map.autosave.saveOnModelChanged = false;

            if ($scope.sandbox) {
                this._diagram.clear();
            }

            // figure out location for inserted stuff
            var db = this._map.computeMapBounds();
            var x = db.x + db.width + 200;
            var y = db.y;
            if (isNaN(x) || isNaN(y)) {
                x = y = 0;
            }
            //console.log('x, y: ' + x + ', ' + y);

            // insert the stuff and deselect it
            question(x, y);
            this._diagram.clearSelection();

            this._diagram.updateAllTargetBindings();
            this._diagram.layoutDiagram(true);

            this._map.ui.resetZoom();

            this._map.autosave.saveOnModelChanged = true;
            this._map.autosave.save('edit_generator');
        }
    }, {
        key: 'selectQuestion',
        value: function selectQuestion(question) {
            this.selectedQuestion = question;
            if ($scope.sandbox) {
                this.mapIt(question);
            }
        }
    }, {
        key: 'surpriseMe',
        value: function surpriseMe() {
            var keys = _.keys(this.queries);
            var i = _.random(0, keys.length - 1);
            var question = this.queries[keys[i]];
            this.selectedQuestion = question;
            this.mapIt(question);

            $('#questions').animate({ scrollTop: i * 30 }, 1000);
        }
    }, {
        key: 'currentTabChanged',

        // called when a tab is opened or closed
        value: function currentTabChanged(newValue, oldValue) {
            if (oldValue === this._map.ui.TAB_ID_GENERATOR) {
                // closing tab
                this._map.setEditingBlocked(false);
            } else if (newValue === this._map.ui.TAB_ID_GENERATOR) {
                // opening tab
                this._map.setEditingBlocked(true);
            }
        }
    }, {
        key: 'getPlaceholderIdeaNames',

        // these get filtered out in LessonBook
        value: function getPlaceholderIdeaNames() {
            return ['is?', 'is not?', 'part?', 'viewpoint?', 'related idea?', 'idea?', 'part seen from viewpoint?', 'contrast?', 'comparison?', 'relationship?'];
        }
    }]);

    return Generator;
})();

module.exports = Generator;

},{}],40:[function(require,module,exports){
"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var go = window.go;
var Layouts = require("../Layouts.js");

var FreehandDiagramLayout = (function (_Layouts) {
    function FreehandDiagramLayout() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _classCallCheck(this, FreehandDiagramLayout);

        _get(Object.getPrototypeOf(FreehandDiagramLayout.prototype), "constructor", this).apply(this, args);
    }

    _inherits(FreehandDiagramLayout, _Layouts);

    _createClass(FreehandDiagramLayout, [{
        key: "toString",
        value: function toString() {
            return "FreehandDiagramLayout";
        }
    }, {
        key: "doLayout",
        value: function doLayout(coll) {
            //console.log('FreehandDiagramLayout.doLayout');
            var diagram = this._map.getDiagram();
            // diagram.startTransaction("Freehand Diagram Layout");

            //validateGroupLocations(diagram.findTopLevelGroups());
            var groups = diagram.findTopLevelGroups(); // get new iterator
            while (groups.next()) {
                var group = groups.value;
                if (!group.isLinkLabel) {
                    var loc = go.Point.parse(group.data.loc);
                    group.move(new go.Point(loc.x, loc.y));
                    //console.log('FreehandDiagramLayout, group: ' + group + ' to location: ' + loc.x + ',' + loc.y);
                }
            }

            // all adjustment of links is done from here, not from the other layouts...
            this.getLinksByNodes(true);
            var links = diagram.links.iterator;
            while (links.next()) {
                var link = links.value;
                // if (isNaN(link.location.x)) {
                //     console.log('link location isNaN');
                //     link.move(new go.Point(0,0));
                // }
                // console.log('link location: ' + link.location);
                this.adjustLinkLayout(link);
            }

            // diagram.commitTransaction("Freehand Diagram Layout");
        }
    }]);

    return FreehandDiagramLayout;
})(Layouts);

go.Diagram.inherit(FreehandDiagramLayout, go.Layout);

module.exports = FreehandDiagramLayout;

},{"../Layouts.js":31}],41:[function(require,module,exports){
"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var go = window.go;
var Layouts = require("../Layouts");

var FreehandLayout = (function (_Layouts) {
    function FreehandLayout() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _classCallCheck(this, FreehandLayout);

        _get(Object.getPrototypeOf(FreehandLayout.prototype), "constructor", this).apply(this, args);
    }

    _inherits(FreehandLayout, _Layouts);

    _createClass(FreehandLayout, [{
        key: "toString",
        value: function toString() {
            return "FreehandLayout";
        }
    }, {
        key: "doLayout",
        value: function doLayout(coll) {
            var diagram = this._map.getDiagram();
            diagram.startTransaction("Freehand Layout");

            var x = this.group.location.x;
            var y = this.group.location.y;

            var it = this.group.memberParts.iterator;
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group && !part.isLinkLabel) {
                    var loc = go.Point.parse(part.data.loc);
                    //console.log('FreehandLayout, part: ' + part.data.text + ', loc: ' + loc + ', location: ' + part.location);
                    part.move(new go.Point(x + loc.x, y + loc.y));
                    part.layout.doLayout(part);
                }
            }

            diagram.commitTransaction("Freehand Layout");
        }
    }]);

    return FreehandLayout;
})(Layouts);

go.Diagram.inherit(FreehandLayout, go.Layout);

module.exports = FreehandLayout;

},{"../Layouts":31}],42:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var go = window.go;
var Layouts = require('../Layouts.js');

var LeftInventoryLayout = (function (_Layouts) {
    function LeftInventoryLayout() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _classCallCheck(this, LeftInventoryLayout);

        _get(Object.getPrototypeOf(LeftInventoryLayout.prototype), 'constructor', this).apply(this, args);
    }

    _inherits(LeftInventoryLayout, _Layouts);

    _createClass(LeftInventoryLayout, [{
        key: 'toString',
        value: function toString() {
            return 'LeftInventoryLayout';
        }
    }, {
        key: 'doLayout',
        value: function doLayout(coll) {
            //console.log('LeftInventoryLayout.doLayout, group: ' + this.group + ', location: ' + this.group.location);
            // this.diagram.startTransaction("Inventory Layout");
            var startX = this.group.location.x;
            var startY = this.group.location.y + (this.group.part.actualBounds.height + this.getInventoryMargin(this.group));
            this.layoutMembersForInventory(this.group, startX, startY, 'L');
            // this.diagram.commitTransaction("Inventory Layout");
        }
    }]);

    return LeftInventoryLayout;
})(Layouts);

go.Diagram.inherit(LeftInventoryLayout, go.Layout);

module.exports = LeftInventoryLayout;

},{"../Layouts.js":31}],43:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var go = window.go;
var Layouts = require('../Layouts.js');

var RightInventoryLayout = (function (_Layouts) {
    function RightInventoryLayout() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _classCallCheck(this, RightInventoryLayout);

        _get(Object.getPrototypeOf(RightInventoryLayout.prototype), 'constructor', this).apply(this, args);
    }

    _inherits(RightInventoryLayout, _Layouts);

    _createClass(RightInventoryLayout, [{
        key: 'toString',
        value: function toString() {
            return 'RightInventoryLayout';
        }
    }, {
        key: 'doLayout',
        value: function doLayout(coll) {
            //this.diagram.startTransaction("Inventory Layout");
            var startX = this.group.location.x + this.group.actualBounds.width;
            var startY = this.group.location.y + (this.group.part.actualBounds.height + this.getInventoryMargin(this.group));
            this.layoutMembersForInventory(this.group, startX, startY, 'R');
            //this.diagram.commitTransaction("Inventory Layout");
        }
    }]);

    return RightInventoryLayout;
})(Layouts);

go.Diagram.inherit(RightInventoryLayout, go.Layout);

module.exports = RightInventoryLayout;

},{"../Layouts.js":31}],44:[function(require,module,exports){
"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var go = window.go;
var Layouts = require("../Layouts.js");

var StackedLayout = (function (_Layouts) {
    function StackedLayout() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _classCallCheck(this, StackedLayout);

        _get(Object.getPrototypeOf(StackedLayout.prototype), "constructor", this).apply(this, args);
    }

    _inherits(StackedLayout, _Layouts);

    _createClass(StackedLayout, [{
        key: "toString",
        value: function toString() {
            return "StackedLayout";
        }
    }, {
        key: "doLayout",
        value: function doLayout(coll) {
            this.diagram.startTransaction("Stacked Layout");
            var margin = this.getStackMargin(this.group);
            var startX = this.group.location.x;
            var startY = this.group.location.y + (this.group.part.actualBounds.height + margin / 2);
            this.layoutMembersForStacked(this.group, startX, startY);
            this.diagram.commitTransaction("Stacked Layout");
        }
    }]);

    return StackedLayout;
})(Layouts);

go.Diagram.inherit(StackedLayout, go.Layout);

module.exports = StackedLayout;

},{"../Layouts.js":31}],45:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;
var mk = go.GraphObject.make;

var COLORS = require('../../constants/colors.js');

var eyeSvgPath = 'M 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00c 47.559,94.979, 144.341,160.00, 256.00,160.00c 111.657,0.00, 208.439-65.021, 256.00-160.00 C 464.442,161.021, 367.657,96.00, 256.00,96.00z M 382.225,180.852c 30.081,19.187, 55.571,44.887, 74.717,75.148 c-19.146,30.261-44.637,55.961-74.718,75.149C 344.427,355.257, 300.779,368.00, 256.00,368.00c-44.78,0.00-88.428-12.743-126.225-36.852 C 99.695,311.962, 74.205,286.262, 55.058,256.00c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65 C 130.725,190.866, 128.00,205.613, 128.00,221.00c0.00,70.692, 57.308,128.00, 128.00,128.00s 128.00-57.308, 128.00-128.00c0.00-15.387-2.725-30.134-7.704-43.799 C 378.286,178.39, 380.265,179.602, 382.225,180.852z M 256.00,205.00c0.00,26.51-21.49,48.00-48.00,48.00s-48.00-21.49-48.00-48.00s 21.49-48.00, 48.00-48.00 S 256.00,178.49, 256.00,205.00z';
var eyeBlockedSvgPath = 'M 419.661,148.208 C 458.483,175.723 490.346,212.754 512.00,256.00 C 464.439,350.979 367.657,416.00 256.00,416.00 C 224.717,416.00 194.604,410.894 166.411,401.458 L 205.389,362.48 C 221.918,366.13 238.875,368.00 256.00,368.00 C 300.779,368.00 344.427,355.257 382.223,331.148 C 412.304,311.96 437.795,286.26 456.941,255.999 C 438.415,226.716 413.934,201.724 385.116,182.752 L 419.661,148.208 ZM 256.00,349.00 C 244.638,349.00 233.624,347.512 223.136,344.733 L 379.729,188.141 C 382.51,198.627 384.00,209.638 384.00,221.00 C 384.00,291.692 326.692,349.00 256.00,349.00 ZM 480.00,0.00l-26.869,0.00 L 343.325,109.806C 315.787,100.844, 286.448,96.00, 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00 c 21.329,42.596, 52.564,79.154, 90.597,106.534L0.00,453.131L0.00,480.00 l 26.869,0.00 L 480.00,26.869L 480.00,0.00 z M 208.00,157.00c 24.022,0.00, 43.923,17.647, 47.446,40.685 l-54.762,54.762C 177.647,248.923, 160.00,229.022, 160.00,205.00C 160.00,178.49, 181.49,157.00, 208.00,157.00z M 55.058,256.00 c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65C 130.725,190.866, 128.00,205.613, 128.00,221.00 c0.00,29.262, 9.825,56.224, 26.349,77.781l-29.275,29.275C 97.038,309.235, 73.197,284.67, 55.058,256.00z';
var paperclipSvgPath = 'M 348.916,163.524l-32.476-32.461L 154.035,293.434c-26.907,26.896-26.907,70.524,0.00,97.422 c 26.902,26.896, 70.53,26.896, 97.437,0.00l 194.886-194.854c 44.857-44.831, 44.857-117.531,0.00-162.363 c-44.833-44.852-117.556-44.852-162.391,0.00L 79.335,238.212l 0.017,0.016c-0.145,0.152-0.306,0.288-0.438,0.423 c-62.551,62.548-62.551,163.928,0.00,226.453c 62.527,62.528, 163.934,62.528, 226.494,0.00c 0.137-0.137, 0.258-0.284, 0.41-0.438l 0.016,0.017 l 139.666-139.646l-32.493-32.46L 273.35,432.208l-0.008,0.00 c-0.148,0.134-0.282,0.285-0.423,0.422 c-44.537,44.529-116.99,44.529-161.538,0.00c-44.531-44.521-44.531-116.961,0.00-161.489c 0.152-0.152, 0.302-0.291, 0.444-0.423l-0.023-0.03 l 204.64-204.583c 26.856-26.869, 70.572-26.869, 97.443,0.00c 26.856,26.867, 26.856,70.574,0.00,97.42L 218.999,358.375 c-8.968,8.961-23.527,8.961-32.486,0.00c-8.947-8.943-8.947-23.516,0.00-32.46L 348.916,163.524z';

var GroupTemplate = (function () {
    function GroupTemplate(map) {
        _classCallCheck(this, GroupTemplate);

        this._map = map;
    }

    _createClass(GroupTemplate, [{
        key: 'init',
        value: function init() {
            var _this = this;

            return mk(go.Group, go.Panel.Vertical, new go.Binding('layout', 'layout', function (layoutName) {
                return _this._map.layouts.getLayout(layoutName);
            }), new go.Binding('movable', '', function (obj) {
                return !obj.isLinkLabel;
            }).ofObject(), new go.Binding('isSubGraphExpanded', 'sExpanded'),
            // dim the thing if it's being dragged over another thing (drop to sister/child)
            new go.Binding('opacity', '', function (obj) {
                return obj.isSelected && _this._map.ui.dragTargetGroup ? 0.25 : 1;
            }).ofObject(), {
                locationObjectName: 'mainpanel',
                locationSpot: go.Spot.TopLeft,
                selectionAdorned: false,
                isSubGraphExpanded: true,
                layerName: 'Foreground',
                // highlight corners
                mouseEnter: function mouseEnter(event, target, obj2) {
                    _this._map.ui.mouseOverGroup = target;
                    _this._map.getDiagram().updateAllTargetBindings();
                },
                // unhighlight corners
                mouseLeave: function mouseLeave(event, target, obj2) {
                    _this._map.ui.mouseOverGroup = null;
                    _this._map.getDiagram().updateAllTargetBindings();
                }
                // containingGroupChanged: function(part, oldgroup, newgroup) {
                //     this._map.getDiagram().model.setDataProperty(part.data, 'level', this._map.computeLevel(part));
                //     //part.updateTargetBindings();  
                // }
            }, mk(go.Panel, go.Panel.Horizontal, this.groupExternalTextBlock(this._map.layouts.showLeftTextBlock, 'right'), mk(go.Panel, go.Panel.Position, {
                name: 'mainpanel'
            }, new go.Binding('scale', '', this._map.layouts.getScale).ofObject(),
            // drag area
            mk(go.Shape, 'Rectangle', {
                name: 'dragarea',
                position: new go.Point(0, 0),
                width: 100,
                height: 100,
                fill: COLORS.groupFillColor,
                stroke: null,
                cursor: 'move',
                // show debug info
                contextClick: function contextClick(event, target) {
                    if (event.control) {
                        console.log(_this.groupInfo(target.part));
                    }
                }
            }), mk(go.Panel, go.Panel.Position, this.viewMarker(), this.dragAboveTarget(), this.dragIntoTarget(), this.dragBelowTarget(), this.groupInternalTextBlock(), this.cornerD(), this.dFlagMarker(), this.cornerS(), this.sCollapsedMarker(), this.cornerR(), this.pointMarker(), this.cornerP(), this.attachmentPaperClip(), this.mainBorder())), this.groupExternalTextBlock(this._map.layouts.showRightTextBlock, 'left')),

            // the placeholder normally holds the child nodes, but we just use a dummy placeholder
            mk(go.Shape, {
                name: 'placeholder',
                fill: 'transparent',
                stroke: null,
                desiredSize: new go.Size(0, 0)
            }));
        }
    }, {
        key: 'groupInfo',
        value: function groupInfo(obj) {
            return obj.data.text + '\n' + 'object: ' + obj + '\n' + 'key: ' + obj.data.key + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'layout: ' + obj.layout + '\n' + 'data.layout: ' + obj.data.layout + '\n' + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + '\n' + 'freehand position (data.loc): ' + go.Point.parse(obj.data.loc) + '\n' + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + '\n' + 'getScale(): ' + this._map.layouts.getScale(obj) + '\n' + 'isLinkLabel: ' + obj.data.isLinkLabel + '\n' + 'labeledLink: ' + obj.labeledLink + '\n';
        }
    }, {
        key: 'viewMarker',

        // P view indicator
        value: function viewMarker() {
            var _this2 = this;

            return mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
                return true;
            }).ofObject(), new go.Binding('fill', '', function (obj) {
                return _this2.getViewMarkerFill(obj);
            }).ofObject(), {
                position: new go.Point(0, 0),
                height: 18,
                width: 100,
                stroke: null
            });
        }
    }, {
        key: 'getViewMarkerFill',
        value: function getViewMarkerFill(obj) {
            var weight = this._map.perspectives.getPerspectiveViewWeight(obj);

            if (weight === 3) {
                return COLORS.colorPDark;
            } else if (weight === 2) {
                return COLORS.colorP;
            } else if (weight === 1) {
                return COLORS.colorPLight;
            } else {
                return 'transparent';
            }
        }
    }, {
        key: 'dragAboveTarget',

        // --------------- targets for dragging to D or S -----------------
        value: function dragAboveTarget() {
            var _this3 = this;

            return mk(go.Panel, go.Panel.Position, {
                position: new go.Point(0, 0),
                height: 25,
                width: 100,
                mouseDragEnter: this.getGroupMouseDragEnterHandler(this._map.LEFT),
                mouseDragLeave: function mouseDragLeave() {
                    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
                        args[_key] = arguments[_key];
                    }

                    _this3.groupMouseDragLeaveHandler.apply(_this3, args);
                },
                mouseDrop: this.getGroupMouseDropHandler(this._map.LEFT),
                click: function click() {
                    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
                        args[_key2] = arguments[_key2];
                    }

                    _this3.groupClickHandler.apply(_this3, args);
                }
            },
            // drag target region
            mk(go.Shape, 'Rectangle', {
                position: new go.Point(0, 0),
                height: 25,
                width: 100,
                cursor: 'pointer',
                stroke: null,
                fill: 'transparent'
            }),
            // drag indicator bar
            mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
                return _this3.canDragSelectionToBecomeOrderedSisterOf(obj.part, _this3._map.LEFT, false);
            }).ofObject(), {
                position: new go.Point(0, 0),
                height: 10,
                width: 100,
                stroke: null,
                fill: '#000'
            }));
        }
    }, {
        key: 'dragIntoTarget',
        value: function dragIntoTarget() {
            var _this4 = this;

            return mk(go.Panel, go.Panel.Position, {
                position: new go.Point(0, 25),
                height: 50,
                width: 100,
                mouseDragEnter: this.getGroupMouseDragEnterHandler(null),
                mouseDragLeave: function mouseDragLeave() {
                    for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
                        args[_key3] = arguments[_key3];
                    }

                    _this4.groupMouseDragLeaveHandler.apply(_this4, args);
                },
                mouseDrop: this.getGroupMouseDropHandler(null),
                click: function click() {
                    for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
                        args[_key4] = arguments[_key4];
                    }

                    _this4.groupClickHandler.apply(_this4, args);
                }
            }, mk(go.Shape, 'Rectangle', {
                position: new go.Point(0, 0),
                height: 50,
                width: 100,
                cursor: 'pointer',
                stroke: null,
                fill: 'transparent'
            }));
        }
    }, {
        key: 'dragBelowTarget',
        value: function dragBelowTarget() {
            var _this5 = this;

            return mk(go.Panel, go.Panel.Position, {
                position: new go.Point(0, 75),
                height: 25,
                width: 100,
                mouseDragEnter: this.getGroupMouseDragEnterHandler(this._map.RIGHT),
                mouseDragLeave: function mouseDragLeave() {
                    for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
                        args[_key5] = arguments[_key5];
                    }

                    _this5.groupMouseDragLeaveHandler.apply(_this5, args);
                },
                mouseDrop: this.getGroupMouseDropHandler(this._map.RIGHT),
                click: function click() {
                    for (var _len6 = arguments.length, args = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
                        args[_key6] = arguments[_key6];
                    }

                    _this5.groupClickHandler.apply(_this5, args);
                }
            },
            // drag target region
            mk(go.Shape, 'Rectangle', {
                position: new go.Point(0, 0),
                height: 25,
                width: 100,
                cursor: 'pointer',
                stroke: null,
                fill: 'transparent'
            }),
            // drag indicator bar
            mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
                return _this5.canDragSelectionToBecomeOrderedSisterOf(obj.part, _this5._map.RIGHT, false);
            }).ofObject(), {
                position: new go.Point(0, 15),
                height: 10,
                width: 100,
                stroke: null,
                fill: '#000'
            }));
        }
    }, {
        key: 'groupInternalTextBlock',

        // Returns the TextBlock for the group title, for use in the main group template, inside the box.
        value: function groupInternalTextBlock() {
            var _this6 = this;

            return mk(go.Panel, go.Panel.Horizontal, {
                position: new go.Point(0, 0),
                desiredSize: new go.Size(100, 100)
            }, mk(go.TextBlock, new go.Binding('text', 'text').makeTwoWay(), new go.Binding('visible', '', function (group) {
                // always show text inside box for R-things, because external text will throw off layout
                return _this6._map.layouts.isNotWithinInventoryLayout(group) || _this6._map.layouts.isRThingWithinInventoryLayout(group);
            }).ofObject(), {
                width: 80,
                margin: 10,
                alignment: go.Spot.Center,
                textAlign: 'center',
                cursor: 'move',
                font: '10px sans-serif',
                isMultiline: true,
                wrap: go.TextBlock.WrapDesiredSize,

                mouseDragEnter: this.getGroupMouseDragEnterHandler(null),
                mouseDragLeave: function mouseDragLeave() {
                    for (var _len7 = arguments.length, args = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
                        args[_key7] = arguments[_key7];
                    }

                    _this6.groupMouseDragLeaveHandler.apply(_this6, args);
                },
                mouseDrop: this.getGroupMouseDropHandler(null),
                click: function click() {
                    for (var _len8 = arguments.length, args = Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
                        args[_key8] = arguments[_key8];
                    }

                    _this6.groupClickHandler.apply(_this6, args);
                },
                contextClick: function contextClick(event, target) {
                    if (event.control) {
                        console.log(_this6.groupInfo(target.part));
                    }
                }
            }));
        }
    }, {
        key: 'groupExternalTextBlock',

        // Returns a TextBlock for the group title, for use in the main group template, on the left or right.
        // visibleFn is a callback to be bound to the visibility attribute of the TextBlock.
        // textAlign is 'left' or 'right'.
        value: function groupExternalTextBlock(visibleFn, textAlign) {
            var _this7 = this;

            return mk(go.TextBlock, new go.Binding('text', 'text').makeTwoWay(), new go.Binding('visible', '', visibleFn).ofObject(), new go.Binding('scale', '', this._map.layouts.getExternalTextScale).ofObject(), {
                name: 'externaltext-' + textAlign, // NB: this screws up layouts for some reason - ??
                textAlign: textAlign,
                margin: 5,
                font: '10px sans-serif',
                isMultiline: true,
                click: function click() {
                    for (var _len9 = arguments.length, args = Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
                        args[_key9] = arguments[_key9];
                    }

                    _this7.groupClickHandler.apply(_this7, args);
                }
            });
        }
    }, {
        key: 'getGroupMouseDragEnterHandler',

        // --------- handlers for mouse drag/drop actions on groups, which need to be replicated on different target parts -------

        // position is this._map.LEFT, null, or this._map.RIGHT
        value: function getGroupMouseDragEnterHandler(position) {
            var _this8 = this;

            return function (event, target, obj2) {
                //console.log('mouseDragEnter, e.dp: ' + event.documentPoint + ', target.part: ' + target.part + ', target bounds: ' + target.actualBounds);
                _this8._map.ui.dragTargetGroup = target.part;
                _this8._map.ui.dragTargetPosition = position;
                _this8._map.getDiagram().updateAllTargetBindings();
            };
        }
    }, {
        key: 'groupMouseDragLeaveHandler',
        value: function groupMouseDragLeaveHandler(event, target, obj2) {
            this._map.ui.dragTargetGroup = null;
            this._map.ui.dragTargetPosition = null;
            this._map.getDiagram().updateAllTargetBindings();
        }
    }, {
        key: 'getGroupMouseDropHandler',
        value: function getGroupMouseDropHandler(position) {
            var _this9 = this;

            return function (event, dropTarget) {
                _this9.handleGroupMouseDrop(event, dropTarget, position);
            };
        }
    }, {
        key: 'groupClickHandler',
        value: function groupClickHandler(event, target) {
            // handle single or double click
            this._map.ui.handleCornerClick('', target);
        }
    }, {
        key: 'handleGroupMouseDrop',

        // handle drop on one of the three target regions (top, middle, bottom)
        // side is this._map.LEFT or this._map.RIGHT
        value: function handleGroupMouseDrop(event, dropTarget, side) {
            //console.log('dragAboveTarget.mouseDrop, target: ' + dropTarget + ', part: ' + dropTarget .part + ', show: ' + show);
            if (side && this.canDragSelectionToBecomeOrderedSisterOf(dropTarget.part, side, true)) {
                this._map.addSelectedThingAsOrderedSisterOf(dropTarget.part, side);
            } else if (this.canDragSelectionToBecomeSistersOf(dropTarget.part, true)) {
                this._map.addSelectedThingsAsSistersOf(dropTarget.part);
            } else if (this.canDragSelectionToBecomeChildrenOf(dropTarget.part, true)) {
                this._map.addSelectedThingsAsChildrenOf(dropTarget.part);
            }
        }
    }, {
        key: 'getGroupSelectionStroke',

        // -----------------------------------------------------------------------------

        // NB: these are here because they are about colors;
        // similar functions that are scale-related are in layouts.js...
        value: function getGroupSelectionStroke(obj) {
            if (obj.isSelected) {
                if (this._map.perspectives.isInPEditorMode()) return COLORS.colorP;else if (this._map.perspectives.isInDEditorMode()) return COLORS.colorD;else return COLORS.white;
            } else {
                return COLORS.white;
            }
        }
    }, {
        key: 'getGroupSelectionStrokeWidth',

        // OK, this isn't about colors, but it wants to be near the one above...
        value: function getGroupSelectionStrokeWidth(obj) {
            return obj.isSelected ? 3 : 1;
        }
    }, {
        key: 'showDCorner',

        // -----------------------------------------------------------------------------

        // callbacks to determine when the corners should be visible

        value: function showDCorner(group) {
            if (this._map.perspectives.isDEditorThing(group)) {
                // mark distinction thing
                return true;
            } else if (this._map.perspectives.isInPOrDEditorMode()) {
                // don't show any corners if in P/D editor mode
                return false;
            } else if (this._map.presenter.isCreatingThumbnail) {
                // don't show any corners if capturing thumbnail
                return false;
            } else {
                return group === this._map.ui.mouseOverGroup || /*this.isTouchDevice() &&*/group.isSelected || this.canDragSelectionToBecomeSistersOf(group, false) && (!this._map.ui.dragTargetPosition || this.cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
            }
        }
    }, {
        key: 'showSCorner',
        value: function showSCorner(group) {
            if (this._map.perspectives.isInPOrDEditorMode()) {
                // don't show any corners if in P/D editor mode
                return false;
            } else if (this._map.presenter.isCreatingThumbnail) {
                // don't show any corners if capturing thumbnail
                return false;
            } else {
                return group === this._map.ui.mouseOverGroup || /*$scope.isTouchDevice() &&*/group.isSelected || this.canDragSelectionToBecomeChildrenOf(group, false) && (!this._map.ui.dragTargetPosition || this.cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
            }
        }
    }, {
        key: 'showRCorner',
        value: function showRCorner(group) {
            if (this._map.perspectives.isInPOrDEditorMode()) {
                // don't show any corners if in P/D editor mode
                return false;
            } else if (this._map.presenter.isCreatingThumbnail) {
                // don't show any corners if capturing thumbnail
                return false;
            } else {
                return group === this._map.ui.mouseOverGroup || /*$scope.isTouchDevice() &&*/group.isSelected; // show corners on mouseover
            }
        }
    }, {
        key: 'showPCorner',
        value: function showPCorner(group) {
            if (this._map.perspectives.isPEditorPoint(group)) {
                return true; // mark perspective point
            } else if (this._map.perspectives.isInPOrDEditorMode()) {
                // don't show any corners if in P/D editor mode
                return false;
            } else if (this._map.presenter.isCreatingThumbnail) {
                // don't show any corners if capturing thumbnail
                return false;
            } else {
                return group === this._map.ui.mouseOverGroup || /*$scope.isTouchDevice() &&*/group.isSelected; // show corners on mouseover
            }
        }
    }, {
        key: 'showPDot',
        value: function showPDot(link) {
            return true; // this._map.ui.getMapEditorOptions().perspectiveMode != 'both';
        }
    }, {
        key: 'canDragSelectionToBecomeSistersOf',

        // these functions are used in two modes:
        // 1. with isDropping == false, to highlight drop targets based on this._map.ui.dragTargetGroup and this._map.ui.dragTargetPosition,
        //    which are set on mouseDragEnter/mouseDragleave
        // 2. with isDropping == true, on drop, when the above indicators have gone away, but we know what the dropped
        //    and target groups are, and we want to know what the drop should do.

        value: function canDragSelectionToBecomeSistersOf(group, isDropping) {
            return (group === this._map.ui.dragTargetGroup || isDropping) && this._map.thingsSelectedAreDescendantsOf(group);
        }
    }, {
        key: 'canDragSelectionToBecomeChildrenOf',
        value: function canDragSelectionToBecomeChildrenOf(group, isDropping) {
            return (group === this._map.ui.dragTargetGroup || isDropping) && !this._map.thingsSelectedIncludeSlide() && !this._map.thingsSelectedAreDescendantsOf(group);
        }
    }, {
        key: 'canDragSelectionToBecomeOrderedSisterOf',

        // side is this._map.LEFT or this._map.RIGHT
        value: function canDragSelectionToBecomeOrderedSisterOf(targetGroup, side, isDropping) {
            // must be dragging single group
            var draggedGroup = this._map.getUniqueThingSelected();
            if (!draggedGroup) {
                return false;
            }

            // dragged and target must be Sisters in inventory layout
            return (targetGroup === this._map.ui.dragTargetGroup || isDropping) && (this._map.ui.dragTargetPosition === side || isDropping) && this._map.layouts.areSistersInInventoryLayout(draggedGroup, targetGroup);
        }
    }, {
        key: 'cannotDragSelectionToBecomeOrderedSisterOf',
        value: function cannotDragSelectionToBecomeOrderedSisterOf(targetGroup) {
            return !this.canDragSelectionToBecomeOrderedSisterOf(targetGroup, this._map.LEFT) && !this.canDragSelectionToBecomeOrderedSisterOf(targetGroup, this._map.RIGHT);
        }
    }, {
        key: 'dFlagMarker',

        // ---------------- components for main group template ------------------

        value: function dFlagMarker() {
            return mk(go.Shape, new go.Binding('fill', '', function (obj) {
                return obj.data.dflag ? '#000' : null;
            }).ofObject(), {
                name: 'dflag',
                position: new go.Point(0, 0),
                desiredSize: new go.Size(18, 18),
                geometry: go.Geometry.parse('F M0 1 L0 18 L18 0 L1 0z', true),
                cursor: 'pointer',
                pickable: false,
                stroke: null
            });
        }
    }, {
        key: 'cornerD',

        // 'D' corner (top left, red)
        value: function cornerD() {
            var _this10 = this;

            return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
                return _this10.showDCorner(obj) ? 1 : 0;
            }).ofObject(), {
                name: 'cornerD',
                position: new go.Point(0, 0),
                desiredSize: new go.Size(50, 50),
                opacity: 0
            }, mk(go.Shape, {
                position: new go.Point(0, 0),
                desiredSize: new go.Size(50, 50),
                geometry: go.Geometry.parse('F M0 1 L0 50 L50 0 L1 0z', true),
                fill: COLORS.colorD,
                stroke: null,
                cursor: 'pointer',
                click: function click(event, target) {
                    //console.log('click, control:' + event.control + ', alt:' + event.alt + ', meta:' + event.meta);
                    if (event.alt) {
                        // NB: a side effect of this will be to select just this group,
                        // which would not happen otherwise via control-click
                        _this10._map.perspectives.setDEditorThing(target.part);
                    } else {
                        // handle single or double click
                        _this10._map.ui.handleCornerClick('D', target.part);
                    }
                },
                contextClick: function contextClick(event, target) {
                    //console.log('contextClick:' + event);
                    _this10._map.toggleDFlag(target.part);
                }
            }), mk(go.TextBlock, {
                text: 'D',
                stroke: 'white',
                font: '9px sans-serif',
                position: new go.Point(12, 15),
                pickable: false
            }));
        }
    }, {
        key: 'cornerS',

        // 'S' corner (bottom left, green)
        value: function cornerS() {
            var _this11 = this;

            var that = this;
            return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
                return _this11.showSCorner(obj) ? 1 : 0;
            }).ofObject(), {
                name: 'cornerS',
                position: new go.Point(0, 50),
                desiredSize: new go.Size(50, 50),
                opacity: 0
            }, mk(go.Shape, {
                position: new go.Point(0, 0),
                desiredSize: new go.Size(50, 50),
                geometry: go.Geometry.parse('F M0 0 L0 49 L1 50 L50 50z', true),
                fill: COLORS.colorS,
                stroke: null,
                cursor: 'pointer',
                click: function click(event, target) {
                    // handle single or double click
                    that._map.ui.handleCornerClick('S', target.part);
                }
            }),
            // expansion indicator
            mk(go.Shape, new go.Binding('position', '', function (obj) {
                return obj.isSubGraphExpanded ? new go.Point(4, 43) : new go.Point(5, 38);
            }).ofObject(), new go.Binding('angle', '', function (obj) {
                return obj.isSubGraphExpanded ? 90 : 0;
            }).ofObject(), {
                desiredSize: new go.Size(5, 10),
                geometry: go.Geometry.parse('F M0 0 L5 5 L0 10z', true),
                fill: '#333',
                stroke: null,
                cursor: 'pointer',
                pickable: false
            }), mk(go.TextBlock, {
                text: 'S',
                stroke: 'white',
                font: '9px sans-serif',
                position: new go.Point(12, 28),
                pickable: false
            }));
        }
    }, {
        key: 'sCollapsedMarker',

        // show only when system is collapsed
        value: function sCollapsedMarker() {
            var _this12 = this;

            return mk(go.Shape, new go.Binding('visible', '', function (obj) {
                return !_this12.showSCorner(obj) && obj.memberParts.count > 0 && !obj.isSubGraphExpanded;
            }).ofObject(), {
                position: new go.Point(5, 88),
                desiredSize: new go.Size(5, 10),
                geometry: go.Geometry.parse('F M0 0 L5 5 L0 10z', true),
                fill: '#333',
                stroke: null,
                cursor: 'pointer',
                pickable: false
            });
        }
    }, {
        key: 'cornerR',

        // 'R' corner (bottom right, blue)
        value: function cornerR() {
            var _this13 = this;

            return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
                return _this13.showRCorner(obj) ? 1 : 0;
            }).ofObject(), {
                name: 'cornerR',
                position: new go.Point(0, 0),
                desiredSize: new go.Size(100, 100),
                opacity: 0
            }, mk(go.Shape, {
                name: 'cornerRShape',
                // NB: this corner is done differently from the others:
                // 1. the overall shape is the size of the whole square, so the port falls in the middle instead of the corner;
                // 2. the geometry traces around the edges of the whole square, because otherwise the link line will
                //    show inside the main square if it's crossing one of the other 3 quadrants
                position: new go.Point(0, 0),
                desiredSize: new go.Size(100, 100),
                geometry: go.Geometry.parse('F' + 'M0 0 L0 100 ' + // top left to bottom left
                'L99 100 L100 99 L 100 0 ' + // bottom/right sides (round bottom right corner)
                'L 0 0 L 100 0 ' + // back to top left then top right
                'L 100 50 L 50 100 ' + // to midpoint of right side, midpoint of bottom side
                'L0 100z', // bottom left, return home
                true),
                fill: COLORS.colorR,
                stroke: null,
                cursor: 'pointer',

                portId: 'R',
                fromLinkable: true,
                fromLinkableSelfNode: false,
                fromLinkableDuplicates: true,
                toLinkable: true,
                toLinkableSelfNode: false,
                toLinkableDuplicates: true,
                click: function click(event, target) {
                    // handle single or double click
                    _this13._map.ui.handleCornerClick('R', target.part);
                }
            }), mk(go.TextBlock, {
                text: 'R',
                stroke: 'white',
                font: '9px sans-serif',
                pickable: false,
                position: new go.Point(82, 78)
            }));
        }
    }, {
        key: 'attachmentPaperClip',
        value: function attachmentPaperClip() {
            var _this14 = this;

            return mk(go.Shape, new go.Binding('visible', '', function (obj) {
                return obj.data.attachments && obj.data.attachments !== undefined && obj.data.attachments.length > 0;
            }).ofObject(), new go.Binding('geometry', '', function (obj) {
                return go.Geometry.parse(paperclipSvgPath, true);
            }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
                return new go.Size(512, 512); // NB: the two icons don't scale to the same proportions for some reason - ??
            }).ofObject(), {
                position: new go.Point(46, 85),
                scale: 0.02,
                stroke: '#000',
                fill: '#000',
                click: function click(event, target) {
                    console.log('clip clicked');
                    _this14._map.ui.toggleTab(_this14._map.ui.TAB_ID_ATTACHMENTS);
                }
            });
        }
    }, {
        key: 'pEyeball',
        value: function pEyeball() {
            var _this15 = this;

            return mk(go.Shape, new go.Binding('visible', '', function (obj) {
                return _this15._map.perspectives.isPerspectivePoint(obj);
            }).ofObject(), new go.Binding('geometry', '', function (obj) {
                return go.Geometry.parse(_this15._map.pIsExpanded(obj) ? eyeSvgPath : eyeBlockedSvgPath, true);
            }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
                return new go.Size(512, _this15._map.pIsExpanded(obj) ? 440 : 512); // NB: the two icons don't scale to the same proportions for some reason - ??
            }).ofObject(), {
                position: new go.Point(87, 4),
                scale: 0.02,
                stroke: '#000',
                fill: '#000',
                pickable: false
            });
        }
    }, {
        key: 'pointMarker',

        // P expansion indicator - this shows when the P corner is not visible, and only if the thing is a perspective point
        value: function pointMarker() {
            return this.pEyeball();
        }
    }, {
        key: 'cornerP',

        // 'P' corner (top right, orange)
        value: function cornerP() {
            var _this16 = this;

            return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
                return _this16.showPCorner(obj) ? 1 : 0;
            }).ofObject(), {
                name: 'cornerP',
                position: new go.Point(0, 0),
                desiredSize: new go.Size(100, 100),
                opacity: 0
            }, mk(go.Shape, {
                name: 'cornerPShape',
                position: new go.Point(0, 0),
                desiredSize: new go.Size(100, 100),
                // NB: this geometry covers the whole square; see note above for cornerR
                geometry: go.Geometry.parse('F' + 'M0 0 L0 100 L100 100' + // top left to bottom left to bottom right
                'L100 1 L99 0 L0 0' + // right/top sides (round top right corner)
                'L 50 0 L 100 50 ' + // to midpoint of top side, midpoint of right side
                'L100 100 0 100z', // bottom right, bottom left, return home
                true),

                fill: COLORS.colorP,
                stroke: null,
                cursor: 'pointer',

                portId: 'P',
                fromLinkable: true,
                fromLinkableSelfNode: false,
                fromLinkableDuplicates: false,
                toLinkable: true,
                toLinkableSelfNode: false,
                toLinkableDuplicates: false,
                toMaxLinks: 1,
                click: function click(event, target) {
                    // handle single or double click
                    _this16._map.ui.handleCornerClick('P', target.part);
                }
            }), this.pEyeball(), // P expansion indicator
            mk(go.TextBlock, {
                text: 'P',
                stroke: 'white',
                font: '9px sans-serif',
                pickable: false,
                position: new go.Point(81, 15)
            }));
        }
    }, {
        key: 'mainBorder',
        value: function mainBorder() {
            return mk(go.Shape, 'Border', new go.Binding('stroke', '', this.getGroupSelectionStroke).ofObject(), new go.Binding('strokeWidth', '', this.getGroupSelectionStrokeWidth).ofObject(), {
                name: 'mainarea',
                position: new go.Point(0, 0),
                height: 100,
                width: 100,
                fill: null,
                //portId: '',
                cursor: 'pointer',
                fromLinkable: true,
                fromLinkableSelfNode: false,
                fromLinkableDuplicates: true,
                toLinkable: true,
                toLinkableSelfNode: false,
                toLinkableDuplicates: true
            });
        }
    }]);

    return GroupTemplate;
})();

module.exports = GroupTemplate;
// show corners on mouseover
// drag to D (make it sisters)
// show corners on mouseover
// drag to S (make it children)

},{"../../constants/colors.js":18}],46:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;
var mk = go.GraphObject.make;

var COLORS = require('../../constants/colors.js');

var LinkTemplate = (function () {
    function LinkTemplate(map) {
        _classCallCheck(this, LinkTemplate);

        this._map = map;
    }

    _createClass(LinkTemplate, [{
        key: 'init',
        value: function init() {
            var _this = this;

            return mk(go.Link, {
                selectionAdorned: false,
                layerName: '',
                routing: go.Link.Normal,
                relinkableFrom: true,
                relinkableTo: true,
                mouseEnter: function mouseEnter(event, target, obj2) {
                    _this._map.ui.mouseOverLink = target;
                    _this._map.getDiagram().updateAllTargetBindings();
                },
                mouseLeave: function mouseLeave(event, target, obj2) {
                    _this._map.ui.mouseOverLink = null;
                    _this._map.getDiagram().updateAllTargetBindings();
                },
                mouseDragEnter: function mouseDragEnter(event, target, dragObject) {
                    _this._map.ui.mouseOverLink = target;
                    _this._map.getDiagram().updateAllTargetBindings();
                },
                mouseDragLeave: function mouseDragLeave(event, dropTarget, dragObject) {
                    _this._map.ui.mouseOverLink = null;
                    _this._map.getDiagram().updateAllTargetBindings();
                },
                mouseDrop: function mouseDrop(event, dropTarget) {
                    var parts = _this._map.getDiagram().selection;
                    if (parts && parts.count === 1 && parts.first() instanceof go.Group) {
                        _this._map.addThingAsRThing(parts.first(), dropTarget);
                    }
                },
                doubleClick: function doubleClick(event, target) {
                    _this._map.createRThing(target);
                },
                contextClick: function contextClick(event, target) {
                    if (event.control) {
                        console.log(_this.linkInfo(target));
                    }
                }
            }, mk(go.Shape, new go.Binding('stroke', '', this.getRLinkSelectionStroke).ofObject(), new go.Binding('strokeWidth', '', this._map.layouts.getLinkStrokeWidth).ofObject(), {
                name: 'LINKSHAPE'
            }),

            // show to/from arrowheads based on link 'type' attribute
            mk(go.Shape, {
                fromArrow: 'Backward'
            }, new go.Binding('stroke', '', this.getRLinkSelectionStroke).ofObject(), new go.Binding('scale', '', this._map.layouts.getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
                return t === 'from' || t === 'toFrom';
            })), mk(go.Shape, {
                toArrow: 'Standard'
            }, new go.Binding('stroke', '', this.getRLinkSelectionStroke).ofObject(), new go.Binding('scale', '', this._map.layouts.getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
                return t === 'to' || t === 'toFrom';
            })), mk(go.Panel, go.Panel.Auto, // link label 'knob'
            new go.Binding('opacity', '', function (obj) {
                return _this.showKnob(obj) ? 1 : 0;
            }).ofObject(), new go.Binding('scale', '', this._map.layouts.getArrowheadScale).ofObject(), mk(go.Shape, {
                figure: 'Ellipse',
                fill: COLORS.colorD,
                stroke: COLORS.colorD,
                width: 12,
                height: 12
            })));
        }
    }, {
        key: 'linkInfo',
        value: function linkInfo(obj) {
            var snpos = this._map.layouts.getSameNodesLinkPosition(obj);
            return '' + 'object: ' + obj + '\n' + 'fromNode: ' + obj.fromNode + '\n' + 'toNode: ' + obj.toNode + '\n' + 'labelNodes: ' + obj.labelNodes.count + '\n' + 'labelNodeIsVisible: ' + this._map.layouts.labelNodeIsVisible(obj) + '\n' + 'fromPortId: ' + obj.fromPortId + '\n' + 'toPortId: ' + obj.toPortId + '\n' + 'category: ' + (obj.data ? obj.data.category : '') + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'fromAndToNodesAreVisible: ' + this._map.layouts.fromAndToNodesAreVisible(obj) + '\n' + 'curve: ' + obj.curve + '\n' + 'curviness: ' + obj.curviness + '\n' + 'fromEndSegmentLength: ' + Math.round(obj.fromEndSegmentLength) + '\n' + 'toEndSegmentLength: ' + Math.round(obj.toEndSegmentLength) + '\n' + 'sameNodesLinkPosition: ' + snpos.index + ' of ' + snpos.count + '\n' +
            //+ 'geometry: ' + obj.geometry + '\n' +
            'getLinkStrokeWidth: ' + this._map.layouts.getLinkStrokeWidth(obj) + '\n';
        }
    }, {
        key: 'showKnob',

        // when to show the R-thing knob on a link
        value: function showKnob(link) {
            return link === this._map.ui.mouseOverLink;
        }
    }, {
        key: 'getRLinkSelectionStroke',
        value: function getRLinkSelectionStroke(obj) {
            if (obj.isSelected || obj === this._map.ui.mouseOverLink) {
                return COLORS.colorR; // TODO: can P links be selected?
            } else {
                return '#000';
            }
        }
    }]);

    return LinkTemplate;
})();

module.exports = LinkTemplate;

},{"../../constants/colors.js":18}],47:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;
var mk = go.GraphObject.make;

var COLORS = require('../../constants/colors.js');

var PLinkTemplate = (function () {
    function PLinkTemplate(map) {
        _classCallCheck(this, PLinkTemplate);

        this._map = map;
    }

    _createClass(PLinkTemplate, [{
        key: 'init',
        value: function init() {
            var _this = this;

            return mk(go.Link, new go.Binding('opacity', '', function (obj) {
                return _this.showPLink(obj) ? 1 : 0;
            }).ofObject(), {
                selectionAdorned: false,
                layerName: 'Background', // make P links fall behind R links
                routing: go.Link.Normal,
                contextClick: function contextClick(event, target) {
                    if (event.control) {
                        console.log(_this.linkInfo(target));
                    }
                }
            }, mk(go.Shape, new go.Binding('strokeWidth', '', this._map.layouts.getLinkStrokeWidth).ofObject(), {
                name: 'LINKSHAPE',
                stroke: COLORS.colorPLight,
                fill: COLORS.colorPLight
            }), mk(go.Shape,
            // new go.Binding('visible', '', function(obj) {
            //     return (self.showPDot(obj) ? 1 : 0);
            // }).ofObject(),
            new go.Binding('scale', '', this._map.layouts.getArrowheadScale).ofObject(), {
                toArrow: 'Circle',
                stroke: COLORS.colorPLight,
                fill: COLORS.colorPLight
            }));
        }
    }, {
        key: 'linkInfo',
        value: function linkInfo(obj) {
            var snpos = this._map.layouts.getSameNodesLinkPosition(obj);
            return '' + 'object: ' + obj + '\n' + 'fromNode: ' + obj.fromNode + '\n' + 'toNode: ' + obj.toNode + '\n' + 'labelNodes: ' + obj.labelNodes.count + '\n' + 'labelNodeIsVisible: ' + this._map.layouts.labelNodeIsVisible(obj) + '\n' + 'fromPortId: ' + obj.fromPortId + '\n' + 'toPortId: ' + obj.toPortId + '\n' + 'category: ' + (obj.data ? obj.data.category : '') + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'fromAndToNodesAreVisible: ' + this._map.layouts.fromAndToNodesAreVisible(obj) + '\n' + 'curve: ' + obj.curve + '\n' + 'curviness: ' + obj.curviness + '\n' + 'fromEndSegmentLength: ' + Math.round(obj.fromEndSegmentLength) + '\n' + 'toEndSegmentLength: ' + Math.round(obj.toEndSegmentLength) + '\n' + 'sameNodesLinkPosition: ' + snpos.index + ' of ' + snpos.count + '\n' +
            //+ 'geometry: ' + obj.geometry + '\n' +
            'getLinkStrokeWidth: ' + this._map.layouts.getLinkStrokeWidth(obj) + '\n';
        }
    }, {
        key: 'showPLink',

        // when a P link should be visible
        value: function showPLink(link) {
            var mode = this._map.ui.getMapEditorOptions().perspectiveMode;
            if (this._map.perspectives.isPEditorPoint(link.fromNode)) {
                // show P's when this link is from the current Point
                return true;
            } else if (this._map.perspectives.isInPOrDEditorMode()) {
                // don't show P's for non-Point things, even on mouseover
                return false;
            } else {
                return (mode === 'lines' || mode === 'both') && (link.fromNode === this._map.ui.mouseOverGroup || this._map.pIsExpanded(link.fromNode));
            }
        }
    }]);

    return PLinkTemplate;
})();

module.exports = PLinkTemplate;

},{"../../constants/colors.js":18}],48:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;
var mk = go.GraphObject.make;
var COLORS = require('../../constants/colors.js');

var SlideTemplate = (function () {
    function SlideTemplate(map) {
        _classCallCheck(this, SlideTemplate);

        this._map = map;
    }

    _createClass(SlideTemplate, [{
        key: 'init',
        value: function init() {
            var _this = this;

            return mk(go.Node, go.Panel.Auto,
            // NB: unlike groups, slides just use a normal 2-way location binding
            new go.Binding('location', 'loc', go.Point.parse).makeTwoWay(go.Point.stringify), new go.Binding('width', 'width').makeTwoWay(), new go.Binding('height', 'height').makeTwoWay(), new go.Binding('visible', '', function (obj) {
                return obj.data.hasRegion && _this._map.ui.currentTabIs(_this._map.ui.TAB_ID_PRESENTER) && !_this._map.presenter.isPresenting && !_this._map.presenter.isCreatingThumbnail && _this._map.presenter.currentSlideIndex === obj.data.index;
            }).ofObject(), {
                locationSpot: go.Spot.TopLeft,
                selectionAdorned: false,
                resizable: true,
                resizeAdornmentTemplate: mk(go.Adornment, 'Spot', mk(go.Placeholder), // takes size and position of adorned object                   
                this.createSlideResizeHandle(go.Spot.TopLeft), this.createSlideResizeHandle(go.Spot.Top), this.createSlideResizeHandle(go.Spot.TopRight), this.createSlideResizeHandle(go.Spot.Right), this.createSlideResizeHandle(go.Spot.BottomRight), this.createSlideResizeHandle(go.Spot.Bottom), this.createSlideResizeHandle(go.Spot.BottomLeft), this.createSlideResizeHandle(go.Spot.Left)),
                padding: 0,
                contextClick: function contextClick(event, target) {
                    console.log(_this.nodeInfo(target.part));
                }
            }, mk(go.Shape, 'Rectangle', {
                name: 'slideborder',
                fill: 'rgba(251,170,54,.1)',
                stroke: null
            }));
        }
    }, {
        key: 'nodeInfo',
        value: function nodeInfo(obj) {
            return 'object: ' + obj + '\n' + 'key: ' + obj.data.key + '\n' + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + '\n' + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + '\n';
        }
    }, {
        key: 'createSlideResizeHandle',
        value: function createSlideResizeHandle(alignment) {
            return mk(go.Shape, new go.Binding('desiredSize', '', function (obj) {
                var slide = obj.adornedObject;
                var size = Math.min(slide.width, slide.height) * 0.05;
                return new go.Size(size, size);
            }).ofObject(), {
                alignment: alignment,
                cursor: 'col-resize',
                fill: 'rgba(251,170,54,1)',
                stroke: null
            });
        }
    }]);

    return SlideTemplate;
})();

module.exports = SlideTemplate;

},{"../../constants/colors.js":18}],49:[function(require,module,exports){
"use strict";

var go = window.go;
var mk = go.GraphObject.make;

var dLinkTemplate = function dLinkTemplate(map) {
    return mk(go.Link, {
        selectable: false
    }, mk(go.Shape, {
        name: "LINKSHAPE",
        stroke: null
    }));
};

module.exports = dLinkTemplate;

},{}],50:[function(require,module,exports){
"use strict";

var go = window.go;
var NodeLabelDraggingTool = require("../../../dist/go/NodeLabelDraggingTool.js");
function init() {
    var $ = go.GraphObject.make; // for conciseness in defining templates

    var myDiagram = $(go.Diagram, "diagram", // must name or refer to the DIV HTML element
    {
        // start everything in the middle of the viewport
        initialContentAlignment: go.Spot.Center,
        // have mouse wheel events zoom in and out instead of scroll up and down
        "toolManager.mouseWheelBehavior": go.ToolManager.WheelZoom,
        // support double-click in background creating a new node
        "clickCreatingTool.archetypeNodeData": { text: "new node" },
        // enable undo & redo
        "undoManager.isEnabled": true
    });

    // install the NodeLabelDraggingTool as a "mouse move" tool
    myDiagram.toolManager.mouseMoveTools.insertAt(0, new NodeLabelDraggingTool());

    // when the document is modified, add a "*" to the title and enable the "Save" button
    myDiagram.addDiagramListener("Modified", function (e) {
        var button = document.getElementById("SaveButton");
        if (button) button.disabled = !myDiagram.isModified;
        var idx = document.title.indexOf("*");
        if (myDiagram.isModified) {
            if (idx < 0) document.title += "*";
        } else {
            if (idx >= 0) document.title = document.title.substr(0, idx);
        }
    });

    // define the Node template
    myDiagram.nodeTemplate = $(go.Node, "Spot", { locationObjectName: "ICON", locationSpot: go.Spot.Left }, new go.Binding("location", "loc", go.Point.parse).makeTwoWay(go.Point.stringify), { selectionObjectName: "ICON" },
    // define the node primary shape
    $(go.Shape, "RoundedRectangle", {
        name: "ICON",
        parameter1: 10, // the corner has a medium radius
        desiredSize: new go.Size(40, 40),
        fill: $(go.Brush, go.Brush.Linear, { 0: "rgb(254, 201, 0)", 1: "rgb(254, 162, 0)" }),
        stroke: "black",
        portId: "",
        fromLinkable: true,
        fromLinkableSelfNode: true,
        fromLinkableDuplicates: true,
        toLinkable: true,
        toLinkableSelfNode: true,
        toLinkableDuplicates: true,
        cursor: "pointer"
    }), $(go.Shape, // provide interior area where the user can grab the node
    { fill: "transparent", stroke: null, desiredSize: new go.Size(30, 30) }), $(go.TextBlock, {
        font: "bold 11pt helvetica, bold arial, sans-serif",
        editable: true, // editing the text automatically updates the model data
        _isNodeLabel: true,
        alignment: go.Spot.LeftSide,
        margin: 2,
        cursor: "move" // visual hint that the user can do something with this node label
    }, new go.Binding("text", "text").makeTwoWay(),
    // The GraphObject.alignment property is what the NodeLabelDraggingTool modifies.
    // This TwoWay binding saves any changes to the same named property on the node data.
    new go.Binding("alignment", "alignment", go.Spot.parse).makeTwoWay(go.Spot.stringify)));

    // unlike the normal selection Adornment, this one includes a Button
    myDiagram.nodeTemplate.selectionAdornmentTemplate = $(go.Adornment, "Spot", $(go.Panel, "Auto", $(go.Shape, { fill: null, stroke: "blue", strokeWidth: 2 }), $(go.Placeholder) // this represents the selected Node
    ),
    // the button to create a "next" node, at the top-right corner
    $("Button", {
        alignment: go.Spot.BottomLeft,
        click: addNodeAndLink // this function is defined below
    }, $(go.Shape, "PlusLine", { desiredSize: new go.Size(6, 6) })) // end button
    ); // end Adornment

    /*
    
    var clicked = obj.part;
      if (clicked !== null) {
        var thisemp = clicked.data;
        myDiagram.startTransaction("add employee");
        var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();
        var newemp = { key: nextkey, name: "(new person)", title: "", parent: thisemp.key };
        myDiagram.model.addNodeData(newemp);
        myDiagram.commitTransaction("add employee");
      }
       */

    // clicking the button inserts a new node to the right of the selected node,
    // and adds a link to that new node
    function addNodeAndLink(e, obj) {
        var adorn = obj.part;
        e.handled = true;
        var diagram = adorn.diagram;
        diagram.startTransaction("Add State");

        // get the node data for which the user clicked the button
        var fromNode = adorn.adornedPart;
        var fromData = fromNode.data;
        // create a new "State" data object, positioned off to the right of the adorned Node
        var toData = { text: "new", parent: adorn.data.key };
        var p = fromNode.location.copy();
        p.y += 75;
        toData.loc = go.Point.stringify(p); // the "loc" property is a string, not a Point object
        // add the new node data to the model
        var model = diagram.model;
        model.addNodeData(toData);

        // create a link data from the old node data to the new node data
        var linkdata = {
            from: model.getKeyForNodeData(fromData), // or just: fromData.id
            to: model.getKeyForNodeData(toData),
            text: "transition"
        };
        // and add the link data to the model
        model.addLinkData(linkdata);

        // select the new Node
        var newnode = diagram.findNodeForData(toData);
        diagram.select(newnode);

        diagram.commitTransaction("Add State");

        // if the new node is off-screen, scroll the diagram to show the new node
        diagram.scrollToRect(newnode.actualBounds);
    }

    // replace the default Link template in the linkTemplateMap
    myDiagram.linkTemplate = $(go.Link, // the whole link panel
    { curve: go.Link.Bezier, adjusting: go.Link.Stretch, reshapable: true }, new go.Binding("points").makeTwoWay(), new go.Binding("curviness", "curviness"), $(go.Shape, // the link shape
    { isPanelMain: true, stroke: "black", strokeWidth: 1.5 }), $(go.Shape, // the arrowhead
    { toArrow: "standard", stroke: null }), $(go.Panel, "Auto", $(go.Shape, // the link shape
    {
        fill: $(go.Brush, go.Brush.Radial, { 0: "rgb(240, 240, 240)", 0.3: "rgb(240, 240, 240)", 1: "rgba(240, 240, 240, 0)" }),
        stroke: null
    }), $(go.TextBlock, "transition", // the label
    {
        textAlign: "center",
        font: "10pt helvetica, arial, sans-serif",
        stroke: "black",
        margin: 4,
        editable: true // editing the text automatically updates the model data
    }, new go.Binding("text", "text").makeTwoWay())));

    function save() {
        document.getElementById("mySavedModel").value = myDiagram.model.toJson();
        myDiagram.isModified = false;
    }
    var load = function load() {
        myDiagram.model = go.Model.fromJson(document.getElementById("mySavedModel").value);
    };

    // read in the JSON-format data from the "mySavedModel" element
    load();
}

// Show the diagram's model in JSON format

module.exports = init;

},{"../../../dist/go/NodeLabelDraggingTool.js":2}],51:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Common = (function () {
    function Common() {
        _classCallCheck(this, Common);
    }

    _createClass(Common, null, [{
        key: 'splitLines',
        value: function splitLines(text) {
            return text.split(/\n/);
        }
    }, {
        key: 'getEventTime',
        value: function getEventTime(t, now) {
            var time = moment(t, 'YYYY-MM-DD HH:mm:ss.SSS');
            var nowtime = moment(now, 'YYYY-MM-DD HH:mm:ss.SSS');
            // console.log('t:       ' + t);
            // console.log('now:     ' + now);
            // console.log('time:    ' + time.format()); // + ' ' + time.isValid());
            // console.log('nowtime: ' + nowtime.format()); // + ' ' + nowtime.isValid());
            return time.from(nowtime);
        }
    }, {
        key: 'classIf',
        value: function classIf(klass, b) {
            //console.log('classIf: ' + klass + ', ' + b);
            return b ? klass : '';
        }
    }, {
        key: 'safeApply',

        // avoid '$apply already in progress' error (source: https://coderwall.com/p/ngisma)
        value: function safeApply(fn) {
            if (fn && typeof fn === 'function') {
                fn();
            }
        }
    }, {
        key: 'isTouchDevice',

        // source: http://ctrlq.org/code/19616-detect-touch-screen-javascript
        value: function isTouchDevice() {
            return 'ontouchstart' in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
        }
    }]);

    return Common;
})();

module.exports = Common;

},{}],52:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-actions', '<div class="page-actions"> <div class="btn-group"> <button type="button" class="btn red-haze btn-sm dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <span class="hidden-sm hidden-xs">Actions&nbsp;</span><i class="fa fa-angle-down"></i> </button> <ul class="dropdown-menu" role="menu"> <li class="start active "> <a href="javascript:;"> <i class="fa fa-pencil-square-o"> New Map </i> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-print"> Export/Print </i> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-tag"> Tag Map </i> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-copy"></i> Duplicate Map </a> </li> <li> <a href="javascript:;"> <i class="fa fa-users"></i> Share Map </a> </li> <li class="divider"> </li> <li> <a href="javascript:;"> <i class="fa fa-gear"></i> Settings </a> </li> </ul> </div> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Page Title </span> </div>', function(opts) {
});
},{"riot":"riot"}],53:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-body', '<div class="page-header-fixed page-sidebar-closed-hide-logo page-sidebar-closed-hide-logo"> <page-header></page-header> <div class="clearfix"> </div> <page-container></page-container> <page-footer></page-footer> </div>', function(opts) {
});
},{"riot":"riot"}],54:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-container', '<div class="page-container"> <page-sidebar></page-sidebar> <page-content></page-content> </div>', function(opts) {
});
},{"riot":"riot"}],55:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-content', '<div class="page-content-wrapper"> <div class="page-content"> <div class="page-head"> <div id="app-container"> <div id="diagram" style="position:absolute; background-color: white; height: 100%; width: 80%; "></div> </div> </div> </div> </div>', function(opts) {
});
},{"riot":"riot"}],56:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-footer', '<div class="page-footer"> <div class="page-footer-inner"> 2015 &copy; Cabrera Research Lab </div> <div class="scroll-to-top"> <i class="icon-arrow-up"></i> </div> </div>', function(opts) {
});
},{"riot":"riot"}],57:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-header', '<div id="header-top" class="page-header navbar navbar-fixed-top"> <div id="header-content" class="page-header-inner"> <page-logo></page-logo> <page-actions></page-actions> <div class="page-top"> <page-search></page-search> <page-topmenu></page-topmenu> </div> </div> </div>', function(opts) {
});
},{"riot":"riot"}],58:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-logo', '<div class="page-logo"> <a href="index.html"> <img src="assets/img/metamap_cloud.png" alt="logo" class="logo-default"> </a> <div class="menu-toggler sidebar-toggler">  </div> </div> <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse"> </a>', function(opts) {
});
},{"riot":"riot"}],59:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-search', ' <form class="search-form" action="extra_search.html" method="GET"> <div class="input-group"> <input type="text" class="form-control input-sm" placeholder="Search..." name="query"> <span class="input-group-btn"> <a href="javascript:;" class="btn submit"><i class="fa fa-search"></i></a> </span> </div> </form>', function(opts) {
});
},{"riot":"riot"}],60:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-sidebar', '<div class="page-sidebar-wrapper">   <div class="page-sidebar navbar-collapse collapse">        <ul class="page-sidebar-menu " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200"> <li onclick="{ parent.click }" each="{ data }"> <a if="{ icon }" href="javascript:;"> <i class="{ icon }" riot-style="color:#{ color };"></i> <span class="title">{ title }</span> <span class="{ arrow: menu.length }"></span> </a> <ul if="{ menu.length }" class="sub-menu"> <li each="{ menu }"> <a href="javascript:;"> <i class="{ icon }"></i> <span class="title">{ title }</span> </a> </li> </ul> </li> </ul> </div> </div>', function(opts) {

this.click = function () {
    console.log('foo');
};

var that = this;
that.data = [];
that.MetaMap = MetaMap;
that.MetaMap.MetaFire.getData('menu/sidebar').then(function (data) {
    that.data = data;
    that.update();
});
});
},{"riot":"riot"}],61:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-topmenu', '<div class="top-menu"> <ul class="nav navbar-nav pull-right"> <li class="separator hide"></li>  <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_notification_bar"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <i class="fa fa-bell-o"></i> <span class="badge badge-success"> 1 </span> </a> <ul class="dropdown-menu"> <li class="external"> <h3> <span class="bold">1 pending</span> notification </h3> <a href="javascript:;">view all</a> </li> <li> <ul class="dropdown-menu-list scroller" style="height: 250px;" data-handle-color="#637283"> <li> <a href="javascript:;"> <span class="time">just now</span> <span class="details"> <span class="label label-sm label-icon label-success"> <i class="fa fa-plus"></i> </span> New user registered. </span> </a> </li> </ul> </li> </ul> </li> <li class="separator hide"></li>  <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_points_bar"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <i class="fa fa-trophy"></i> <span class="badge badge-success"> 3 </span> </a> <ul class="dropdown-menu"> <li class="external"> <h3> <span class="bold">3 new</span> achievements </h3> <a href="javascript:;">view all</a> </li> <li> <ul class="dropdown-menu-list scroller" style="height: 250px;" data-handle-color="#637283"> <li> <a href="javascript:;"> <span class="time">just now</span> <span class="details"> <span class="label label-sm label-icon label-success"> <i class="fa fa-plus"></i> </span> Created a perspective circle! </span> </a> </li> </ul> </li> </ul> </li>  <li class="separator hide"></li>  <li class="dropdown" id="header_dashboard_bar"> <a class="dropdown-toggle" href="javascript:;"> <i class="fa fa-home"></i> </a> </li> <li class="separator hide"></li>  <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_help_bar"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <i class="fa fa-graduation-cap"></i> </a> <ul class="dropdown-menu"> <li> <ul class="dropdown-menu-list scroller" style="height: 270px;" data-handle-color="#637283"> <li> <a href="javascript:;"> <i class="fa fa-lightbulb-o"></i> <span class="title">Tutorial</span> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-question"></i> <span class="title">FAQ</span> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-life-ring"></i> <span class="title">Support</span> </a> </li> <li onclick="UserSnap.openReportWindow();"> <a href="javascript:;" > <i class="fa fa-frown-o"></i> <span class="title">Feedback</span> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-bullseye"></i> <span class="title">Inline Training</span> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-laptop"></i> <span class="title">Online Training</span> </a> </li> </ul> </li> </ul> </li> <li class="separator hide"> </li> <li class="dropdown dropdown-user dropdown"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <span class="username username-hide-on-mobile"> { username } </span> <img alt="" height="39" width="39" class="img-circle" riot-src="{ picture }"> </a> <ul class="dropdown-menu dropdown-menu-default"> <li> <a href="javascript:;"> <i class="fa fa-user"></i> My Profile </a> </li> <li onclick="{ linkAccount }"> <a href="javascript:;"> <i class="fa fa-compress"></i> Link Account </a> </li> <li onclick="{ logout }"> <a href="javascript:;"> <i class="fa fa-sign-out"></i> Log Out </a> </li> </ul> </li> </ul> </div>', function(opts) {
this.username = '';
this.picture = '';

var that = this;
localforage.getItem('profile').then(function (profile) {
    that.username = profile.nickname;
    that.picture = profile.picture || 'assets/admin/layout4/img/avatar.jpg';
    that.update();
});

this.logout = function () {
    MetaMap.Auth0.logout();
};

this.linkAccount = function () {
    MetaMap.Auth0.linkAccount();
};
});
},{"riot":"riot"}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvZW50cnkuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9kaXN0L2dvL05vZGVMYWJlbERyYWdnaW5nVG9vbC5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9NZXRhTWFwLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2FwcC91c2VyLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy9hbmFseXRpY3MuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL2F0dGFjaG1lbnRzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy9hdXRvc2F2ZS5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9jYW52YXMvZWRpdG9yLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy9lZGl0b3Jfb3B0aW9ucy5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9jYW52YXMvZ2VuZXJhdG9yLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy9sYXlvdXRzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy9tYXAuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL3BlcnNwZWN0aXZlcy5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9jYW52YXMvcHJlc2VudGVyLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy90ZW1wbGF0ZXMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL3VpLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy91c2VyLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NvbnN0YW50cy9jb2xvcnMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY29uc3RhbnRzL2VkaXRTdGF0dXMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY29uc3RhbnRzL3RhYnMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvaW50ZWdyYXRpb25zL2F1dGgwLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2ludGVncmF0aW9ucy9maXJlYmFzZS5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvZ29vZ2xlYW5hbHl0aWNzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2ludGVncmF0aW9ucy9uZXdyZWxpYy5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvcmF5Z3VuLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2ludGVncmF0aW9ucy91c2Vyc25hcC5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvQW5hbHl0aWNzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9BdHRhY2htZW50cy5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvRWRpdG9yQ29uZmlnLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9FZGl0b3JPcHRpb25zLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9MYXlvdXRzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9NYXAuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbWFwL1BlcnNwZWN0aXZlcy5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvUHJlc2VudGVyLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9UZW1wbGF0ZXMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbWFwL1VJLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9hdXRvc2F2ZS5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvZWRpdG9yLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9nZW5lcmF0b3IuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbWFwL2xheW91dHMvRnJlZWhhbmREaWFncmFtTGF5b3V0LmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9sYXlvdXRzL0ZyZWVoYW5kTGF5b3V0LmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9sYXlvdXRzL0xlZnRJbnZlbnRvcnlMYXlvdXQuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbWFwL2xheW91dHMvUmlnaHRJbnZlbnRvcnlMYXlvdXQuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbWFwL2xheW91dHMvU3RhY2tlZExheW91dC5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvdGVtcGxhdGVzL0dyb3VwVGVtcGxhdGUuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbWFwL3RlbXBsYXRlcy9MaW5rVGVtcGxhdGUuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbWFwL3RlbXBsYXRlcy9QTGlua1RlbXBsYXRlLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC90ZW1wbGF0ZXMvU2xpZGVUZW1wbGF0ZS5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvdGVtcGxhdGVzL2RMaW5rVGVtcGxhdGUuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbmV3bWFwL21hcC5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy90b29scy9Db21tb24uanMiLCJzcmMvdGFncy9wYWdlLWFjdGlvbnMudGFnIiwic3JjL3RhZ3MvcGFnZS1ib2R5LnRhZyIsInNyYy90YWdzL3BhZ2UtY29udGFpbmVyLnRhZyIsInNyYy90YWdzL3BhZ2UtY29udGVudC50YWciLCJzcmMvdGFncy9wYWdlLWZvb3Rlci50YWciLCJzcmMvdGFncy9wYWdlLWhlYWRlci50YWciLCJzcmMvdGFncy9wYWdlLWxvZ28udGFnIiwic3JjL3RhZ3MvcGFnZS1zZWFyY2gudGFnIiwic3JjL3RhZ3MvcGFnZS1zaWRlYmFyLnRhZyIsInNyYy90YWdzL3BhZ2UtdG9wbWVudS50YWciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQzFCLE1BQU0sQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzlCLE1BQU0sQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzdCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3JDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNuQixNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzdDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNyQixPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDckIsTUFBTSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDdEMsTUFBTSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDM0MsTUFBTSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDbEMsTUFBTSxDQUFDLEdBQUcsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDOUIsTUFBTSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7O0FBRTVDLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0FBQ25DLE9BQU8sQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO0FBQzdDLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0FBQ3RDLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ3BDLE9BQU8sQ0FBQyw0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LE1BQU0sR0FBRyxHQUFHLENBQUMscUJBQXFCLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxlQUFlLENBQUMsQ0FBQztBQUN4RSxlQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztTQUNsQzs7QUFFRCx1QkFBZSxFQUFFLHlCQUFTLENBQUMsRUFBRSxDQUFDLEVBQUU7O0FBQzVCLGdCQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQ3RELGdCQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQ3ZELGdCQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxZQUFZLENBQUMsQ0FBQztBQUM1RCxnQkFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDcEUsZUFBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDOUIsZUFBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDOUIsZUFBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDakM7O0FBRUQsOEJBQXNCLEVBQUUsZ0NBQVMsQ0FBQyxFQUFFLENBQUMsRUFBRTs7QUFDbkMsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDdkQsZ0JBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEdBQUcs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QUFHLFdBQVcsQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQUM7U0FDckQ7O0FBRUQsZUFBTyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQzdCLENBQUM7Ozs7QUFJRixRQUFJLENBQUMsMEJBQTBCLEdBQUcsVUFBUyxVQUFVLEVBQUUsTUFBTSxFQUFFLGVBQWUsRUFBRTs7QUFFNUUsWUFBSSxZQUFZLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLENBQUM7OztBQUdsRSxZQUFJLFNBQVMsR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsa0JBQWtCLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDaEUsWUFBSSxTQUFTLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZELFlBQUksU0FBUyxHQUFHLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQztBQUMzRCxlQUFPLENBQUMsR0FBRyxDQUFDLDRDQUE0QyxHQUFHLFlBQVksR0FBRyxlQUFlLEdBQUcsU0FBUyxHQUNqRyxlQUFlLEdBQUcsU0FBUyxHQUFHLGVBQWUsR0FBRyxTQUFTLENBQUMsQ0FBQzs7Ozs7QUFLL0QsWUFBSSxFQUFFLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQztBQUM3QixlQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLGdCQUFJLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO0FBQ3JCLGdCQUFJLFdBQVcsR0FBRyxLQUFLLENBQUMsWUFBWSxDQUFDO0FBQ3JDLGdCQUFJLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFBLEdBQUksSUFBSSxDQUFD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RyxDQUFBLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxxQkFBUyxDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQUUsb0JBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFBRSx3QkFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxDQUFDLEFBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxFQUFFO0FBQUUsNEJBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7cUJBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFBO2lCQUFFLEFBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFBO2FBQUUsQUFBQyxJQUFJLFVBQVUsSUFBSSxPQUFPLFlBQVksRUFBRSxPQUFPLFlBQVksQ0FBQyxBQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLE9BQU8sQ0FBQyxDQUFBO1NBQUUsQ0FBQSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUFFLDZCQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUEsQUFBQyxDQUFDLEFBQUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxBQUFDLE9BQU8sQ0FBQyxDQUFBO3FCQUFFLEFBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQTtxQkFBRSxBQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUFFLCtCQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUE7cUJBQUUsQUFBQyxTQUFTLENBQUMsR0FBRztBQUFFLCtCQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtxQkFBRSxBQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxBQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQTtpQkFBRSxBQUFDLFNBQVMsQ0FBQyxHQUFHO0FBQUUsMkJBQU8sRUFBRSxDQUFBO2lCQUFFLEFBQUMsSUFBSSxDQUFDLEdBQUcsWUFBWTtvQkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEFBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLEVBQUUsQ0FBQTthQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxpQkFBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUE7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFO0FBQUUseUJBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx3QkFBSTtBQUFFLHlCQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksaUJBQWlCLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7cUJBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUFFLDRCQUFJO0FBQUUsNkJBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQUFBQyxJQUFJLElBQUksRUFBQSxDQUFFLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTt5QkFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUc7cUJBQUUsQUFBQyxPQUFPLFVBQVUsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtpQkFBRSxBQUFDLFNBQVMsaUJBQWlCLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx3QkFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLElBQUksK0NBQStDLEVBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUE7aUJBQUUsQUFBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFBRSxxQkFBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxBQUFDLElBQUksSUFBSSxFQUFBLENBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFBO2lCQUFFLEFBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQztvQkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQztvQkFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE9BQU87b0JBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEFBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLE9BQU8sR0FBRyxDQUFDLEVBQUUsS0FBSyxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsQUFBQyxJQUFJO0FBQUUsMEJBQU0sSUFBSSxLQUFLLEVBQUEsQ0FBQTtpQkFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQUUsMkJBQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxrQkFBa0IsSUFBSSxNQUFNLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxjQUFjLElBQUksY0FBYyxDQUFDLFNBQVMsSUFBSSxjQUFjLENBQUMsU0FBUyxDQUFDLGdCQUFnQixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUEsQUFBQyxDQUFBO2lCQUFFLEFBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsWUFBWTtBQUFFLHFCQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQSxBQUFDLENBQUE7aUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxxQkFBQyxLQUFLLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLEFBQUMsQ0FBQTtpQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsWUFBWTtBQUFFLHFCQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQSxBQUFDLENBQUE7aUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsVUFBVSxDQUFDLEVBQUU7QUFBRSxxQkFBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxBQUFDLElBQUksSUFBSSxFQUFBLENBQUUsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO2lCQUFFLENBQUMsQ0FBQTthQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFO0FBQUUseUJBQVMsQ0FBQyxHQUFHLEVBQUcsQUFBQyxJQUFJLE1BQU0sQ0FBQyxXQUFXLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRTtBQUFFLHdCQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO3dCQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDO3dCQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsVUFBVSxDQUFDLEVBQUU7QUFBRSw0QkFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsQ0FBQyxZQUFZLEtBQUssS0FBSyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxDQUFDLFlBQVksS0FBSyxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsWUFBWTtBQUFFLDRCQUFJLENBQUMsSUFB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O2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx5QkFBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx3QkFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsUUFBUSxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQTtpQkFBRSxBQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUEsQUFBQztvQkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxZQUFZLEVBQUUsYUFBYSxFQUFFLGNBQWMsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLENBQUE7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFTLENBQUMsR0FBRztBQUFFLHFCQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxD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QUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEFBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQzt3QkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQzt3QkFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxTQUFTLENBQUM7d0JBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNO3dCQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLFlBQVk7QUFBRSw0QkFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxVQUFVLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsY0FBYyxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHVDQUFlLElBQUksS0FBSyxJQUFJLE1BQU0sSUFBSSxLQUFLLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxDQUFDLGdCQUFnQixDQUFDLGVBQWUsRUFBRSxLQUFLLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFBO3FCQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLGdCQUFnQixFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTzs0QkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzs0QkFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEFBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQUUsZ0NBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQSxBQUFDLENBQUE7eUJBQUUsQUFBQyxJQUFJLENBQUMsU0FBUyxHQUFHLEFBQUMsSUFBSSxJQUFJLEVBQUEsQ0FBRSxPQUFPLEVBQUUsRUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLFVBQVUsQ0FBQyxFQUFFO0FBQUUsZ0NBQUk7QUFBRSx1Q0FBTyxLQUFLLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUEsQUFBQyxFQUFFLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsUUFBUSxLQUFLLENBQUMsQ0FBQyxZQUFZLElBQUksVUFBVSxJQUFJLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQSxBQUFDLENBQUEsSUFBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBOzZCQUFFLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFBRSxvQ0FBSTtBQUFFLHFDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtpQ0FBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUc7NkJBQUU7eUJBQUUsQ0FBQyxBQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSw0QkFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksSUFBSSxVQUFVLElBQUksT0FBTyxDQUFDLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsNEJBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUEsQUFBQyxDQUFBO3FCQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLGtCQUFrQixFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFBLEFBQUMsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxzQkFBc0IsRUFBRSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx5QkFBQyxZQUFZLGNBQWMsSUFBSSxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMseUJBQXlCLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQUMsWUFBWSxjQUFjLElBQUksTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO3FCQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQUMsWUFBWSxjQUFjLEtBQUssUUFBUSxLQUFLLENBQUMsS0FBSyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFBLEFBQUMsRUFBRSxDQUFDLE1BQU0sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQSxBQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQSxLQUFNLElBQUksQ0FBQyxVQUFVLEdBQUcsQUFBQyxJQUFJLElBQUksRUFBQSxDQUFFLE9BQU8sRUFBRSxDQUFBLEFBQUMsQ0FBQSxBQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsVUFBVSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQUFBQyxJQUFJLElBQUksRUFBQSxDQUFFLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtxQkFBRSxDQUFDLENBQUE7aUJBQUU7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsaUJBQUMsQ0FBQyxPQUFPLEdBQUcsVUFBVSxDQUFDLEVBQUU7QUFBRSx3QkFBSSxDQUFDLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUM7d0JBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxRQUFRO3dCQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQUFBQyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQUFBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxBQUFDLFFBQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsSUFBSSxHQUFHLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQSxBQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsUUFBUSxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsUUFBUSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFBLEFBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUMsUUFBUSxLQUFLLFFBQVEsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxRQUFRLEtBQUssQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUEsQ0FBQTtpQkFBRSxDQUFBO2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7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QUE7YUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsaUJBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFBO2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxpQkFBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUE7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFTLENBQUMsR0FBRztBQUFFLHdCQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQUFBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsVUFBVSxJQUFJLENBQUMsQ0FBQyxhQUFhLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUU7QUFBRSx5QkFBQyxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSw2QkFBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBLEFBQUMsQ0FBQTt5QkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssR0FBRyxPQUFPLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsVUFBVSxHQUFHLFVBQVUsR0FBRyxTQUFTLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQUFBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEFBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUE7cUJBQUU7aUJBQUUsQUFBQyxTQUFTLENBQUMsR0FBRztBQUFFLDhCQUFVLEtBQUssQ0FBQyxDQUFDLFVBQVUsSUFBSSxDQUFDLEVBQUUsQ0FBQTtpQkFBRSxBQUFDLFNBQVMsQ0FBQyxHQUFHO0FBQUUscUJBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO2lCQUFFLEFBQUMsU0FBUyxDQUFDLEdBQUc7QUFBRSwyQkFBTyxBQUFDLElBQUksSUFBSSxFQUFBLENBQUUsT0FBTyxFQUFFLENBQUE7aUJBQUUsQUFBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDO29CQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUFFLENBQUMsR0FBRyxNQUFNO29CQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUTtvQkFBRSxDQUFDLEdBQUcsa0JBQWtCO29CQUFFLENBQUMsR0FBRyxhQUFhO29CQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxRQUFRLENBQUEsQ0FBRSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUFFLENBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxXQUFXLEVBQUUsaUJBQWlCLEVBQUUsS0FBSyxFQUFFLHFDQUFxQyxFQUFFO29CQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxHQUFHLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDLEFBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBLElBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLG9CQUFvQixFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUEsQUFBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx3QkFBSSxDQUFDLEdBQUcsRUFBRTt3QkFBRSxDQUFDLEdBQUcsRUFBRTt3QkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEFBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUEsQUFBQyxDQUFDLEFBQUMsT0FBTyxDQUFDLENBQUE7aUJBQUUsQUFBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxBQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFBO2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx5QkFBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxxQkFBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUEsQUFBQyxFQUFFLFdBQVcsSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFBLEFBQUMsQ0FBQyxBQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEFBQUMsT0FBTyxDQUFDLENBQUE7aUJBQUUsQUFBQyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQTthQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUFFLDJCQUFPLEVBQUUsQ0FBQyxJQUFJLFVBQVUsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLEFBQUMsQ0FBQTtpQkFBRSxBQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7b0JBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQUUsQ0FBQyxHQUFHLFlBQVk7b0JBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLEFBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxVQUFVLENBQUMsRUFBRTtBQUFFLDZCQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxpQ0FBUyxTQUFTLEdBQUc7QUFBRSxnQ0FBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQUFBQyxJQUFJO0FBQUUsaUNBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBOzZCQUFFLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFBRSxpQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTs2QkFBRSxBQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxBQUFDLElBQUk7QUFBRSx1Q0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7NkJBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUFFLHVDQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUEsQ0FBQTs2QkFBRSxTQUFTO0FBQUUsaUNBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTs2QkFBRTt5QkFBRSxBQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLEVBQUUsU0FBUyxDQUFBLEFBQUMsQ0FBQTtxQkFBRSxBQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUMsQUFBQyxJQUFJLENBQUM7NEJBQUUsQ0FBQzs0QkFBRSxDQUFDOzRCQUFFLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBLEFBQUMsQ0FBQTtxQkFBRSxBQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsNEJBQUk7QUFBRSw2QkFBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO3lCQUFFLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFBRSw2QkFBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTt5QkFBRTtxQkFBRSxBQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSw0QkFBSSxNQUFNLENBQUMsY0FBYyxJQUFJLE1BQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSTtBQUFFLGdDQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsUUFBTyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUs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N0UsZ0JBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLGVBQWUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDOUUsbUJBQU8sQ0FBQyxHQUFHLENBQUMsMENBQTBDLEdBQUcsV0FBVyxDQUFDLENBQUM7OztBQUd0RSxnQkFBSSxZQUFZLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQztBQUN2QyxnQkFBSSxTQUFTLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUMsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyRSxnQkFBSSxTQUFTLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLFdBQVcsQ0FBQyxDQUFDOzs7QUFHM0csZ0JBQUksRUFBRSxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUM7QUFDN0IsbUJBQU8sRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2Qsb0JBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFDckIsb0JBQUksV0FBVyxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUM7QUFDckMsb0JBQUksSUFBSSxHQUFHLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUEsR0FBSSxXQUFXLENBQUM7QUFDckUsb0JBQUksSUFBSSxHQUFHLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUEsR0FBSSxXQUFXLENBQUM7QUFDckUsb0JBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUMxRCx1QkFBTyxDQUFDLEdBQUcsQ0FBQywyQ0FBMkMsR0FBRyxZQUFZLEdBQUcsc0JBQXNCLEdBQUcsZ0JBQWdCLEdBQzlHLGVBQWUsR0FBRyxTQUFTLEdBQUcsaUJBQWlCLEdBQUcsV0FBVyxHQUFHLFlBQVksR0FBRyxNQUFNLENBQUMsQ0FBQztBQUMzRixvQkFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7YUFDL0Y7U0FDSjs7Ozs7OztlQUtRLG1CQUFDLFVBQVUsRUFBRTtBQUNsQixnQkFBTSxtQkFBbUIsR0FBRyxPQUFPLENBQUMsa0NBQWtDLENBQUMsQ0FBQztBQUN4RSxnQkFBTSxvQkFBb0IsR0FBRyxPQUFPLENBQUMsbUNBQW1DLENBQUMsQ0FBQztBQUMxRSxnQkFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLDRCQUE0QixDQUFDLENBQUM7QUFDNUQsZ0JBQU0sY0FBYyxHQUFHLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0FBQzlELGdCQUFJLFVBQVUsS0FBSyxVQUFVLEVBQ3pCLE9BQU8sSUFBSSxjQUFjLEVBQUUsQ0FBQyxLQUMzQixJQUFJLFVBQVUsS0FBSyxPQUFPLEVBQzNCLE9BQU8sSUFBSSxvQkFBb0IsRUFBRSxDQUFDLEtBQ2pDLElBQUksVUFBVSxLQUFLLFNBQVMsRUFDN0IsT0FBTyxJQUFJLGFBQWEsRUFBRSxDQUFDLEtBRTNCLE9BQU8sSUFBSSxtQkFBbUIsRUFBRSxDQUFDO1NBQ3hDOzs7ZUFFdUIsb0NBQUc7QUFDdkIsZ0JBQU0scUJBQXFCLEdBQUcsT0FBTyxDQUFDLG9DQUFvQyxDQUFDLENBQUM7QUFDNUUsbUJBQU8sSUFBSSxxQkFBcUIsRUFBRSxDQUFDO1NBQ3RDOzs7Ozs7OztlQU0wQixxQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRTtBQUNyRCxnQkFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2hELGdCQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDaEQsZ0JBQUksZUFBZSxHQUFHLENBQUMsQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQzdELGdCQUFJLGVBQWUsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLGVBQWUsRUFBRSxVQUFVLEtBQUssRUFBRTtBQUM3RCx1QkFBTyxDQUFDLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2FBQzNELENBQUMsQ0FBQztBQUNILGdCQUFJLGVBQWUsQ0FBQyxNQUFNLEVBQUU7QUFDeEIsdUJBQU8sZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQzdCLE1BQU07QUFDSCx1QkFBTyxJQUFJLENBQUM7YUFDZjtTQUNKOzs7OztlQUdnQiwyQkFBQyxLQUFLLEVBQUU7QUFDckIsZ0JBQUksU0FBUyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDeEIsZ0JBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQztBQUNkLG1CQUFPLENBQUMsQ0FBQyxlQUFlLEVBQUU7QUFDdEIseUJBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ2xDLGlCQUFDLEdBQUcsQ0FBQyxDQUFDLGVBQWUsQ0FBQzthQUN6QjtBQUNELG1CQUFPLFNBQVMsQ0FBQztTQUNwQjs7Ozs7Ozs7ZUFTcUIsZ0NBQUMsTUFBTSxFQUFFLEVBRTlCOzs7Ozs7Ozs7ZUFTZSwwQkFBQyxJQUFJLEVBQUU7QUFDbkIsZ0JBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTtBQUN6Qyx1QkFBTzthQUNWOzs7Ozs7Ozs7O0FBVUQsZ0JBQUksaUJBQWlCLEdBQUcsSUFBSSxDQUFDLDJCQUEyQixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQ3hHLGdCQUFJLGVBQWUsR0FBRyxJQUFJLENBQUMsMkJBQTJCLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztBQUNoRyxnQkFBSSxTQUFTLEdBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEFBQUMsQ0FBQztBQUNsRyxnQkFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDOzs7QUFHaEQsZ0JBQUksS0FBSyxHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNoRCxnQkFBSSxXQUFXLEdBQUksS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLEFBQUMsQ0FBQzs7O0FBR3BDLGdCQUFJLGlCQUFpQixFQUFFO0FBQ25CLG9CQUFJLENBQUMsMEJBQTBCLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDL0UsTUFBTSxJQUFJLFdBQVcsRUFBRTtBQUNwQixvQkFBSSxDQUFDLDBCQUEwQixDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQzthQUNoRCxNQUFNLElBQUksYUFBYSxFQUFFO0FBQ3RCLG9CQUFJLENBQUMsMEJBQTBCLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQzthQUN4RCxNQUFNO0FBQ0gsb0JBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNuQzs7OztBQUlELGdCQUFJLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUN2RSxvQkFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUM7QUFDakIsb0JBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO2FBQ25DLE1BQU07QUFDSCxvQkFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUM7QUFDakIsb0JBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO2FBQ3BDO1NBQ0o7Ozs7O2VBR2UsMEJBQUMsSUFBSSxFQUFFO0FBQ25CLG1CQUFPLEtBQUssQ0FBQztTQUNoQjs7O2VBRWEsd0JBQUMsSUFBSSxFQUFFLElBQUksRUFBRTs7QUFFdkIsZ0JBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7QUFDekIsZ0JBQUksRUFBRSxFQUFFO0FBQ0osdUJBQU8sRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2Qsd0JBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFDckIseUJBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO0FBQ3JCLHdCQUFJLElBQUksRUFBRTtBQUNOLDZCQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztxQkFDaEM7aUJBQ0o7YUFDSjtTQUNKOzs7Ozs7ZUFJeUIsb0NBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUU7QUFDcEQsZ0JBQUksY0FBYyxLQUFLLE1BQU0sRUFBRTtBQUMzQixvQkFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztBQUM3QixvQkFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQzthQUM5QixNQUFNLElBQUksY0FBYyxLQUFLLE9BQU8sRUFBRTtBQUNuQyxvQkFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztBQUM5QixvQkFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQzthQUMvQjs7O0FBR0QsZ0JBQUksVUFBVSxHQUFHLEdBQUcsQ0FBQzs7QUFFckIsZ0JBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztBQUN0QyxnQkFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDOztBQUVwQyxnQkFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFDOUIsZ0JBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLENBQUEsR0FBSSxHQUFHLElBQUksS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFBLEFBQUMsQ0FBQzs7O0FBR2hHLGdCQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQzVCLGdCQUFJLENBQUMsb0JBQW9CLEdBQUcsQ0FBQyxDQUFDO0FBQzlCLGdCQUFJLENBQUMsa0JBQWtCLEdBQUcsQ0FBQyxDQUFDO1NBQy9COzs7OztlQUd5QixvQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFO0FBQ3BDLGdCQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0FBQ2hDLGdCQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0FBQzlCLGdCQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDOzs7OztBQUs1QixnQkFBSSxTQUFTLEdBQUcsRUFBRSxJQUFJLEtBQUssQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFBLEFBQUMsQ0FBQztBQUN2QyxnQkFBSSxjQUFjLEdBQUcsRUFBRSxDQUFDO0FBQ3hCLGdCQUFJLEtBQUssQ0FBQyxTQUFTLEVBQUU7QUFDakIseUJBQVMsR0FBRyxHQUFHLElBQUksS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUEsQUFBQyxDQUFDO0FBQ3BDLDhCQUFjLEdBQUcsR0FBRyxDQUFDO2FBQ3hCOzs7QUFHRCxnQkFBSSxlQUFlLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN4RCxxQkFBUyxJQUFJLGVBQWUsQ0FBQztBQUM3QiwwQkFBYyxJQUFJLGVBQWUsQ0FBQzs7QUFFbEMsZ0JBQUksVUFBVSxHQUFHLENBQUMsR0FBRyxTQUFTLEdBQUcsQ0FBQyxDQUFDOztBQUVuQyxnQkFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLFVBQVUsR0FBRyxjQUFjLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQSxHQUFJLEtBQUssQ0FBQyxXQUFXLENBQUM7O1NBRXBGOzs7OztlQUdtQiw4QkFBQyxJQUFJLEVBQUU7QUFDdkIsZ0JBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7QUFDaEMsZ0JBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7QUFDOUIsZ0JBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7QUFDOUIsZ0JBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDMUIsZ0JBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDO1NBQ3RCOzs7Ozs7Ozs7ZUFPdUIsa0NBQUMsSUFBSSxFQUFFO0FBQzNCLGdCQUFJLFlBQVksR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDOztBQUU5QyxnQkFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUU7QUFDbEMsbUJBQUcsRUFBRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDO2FBQ3RDLENBQUMsQ0FBQzs7O0FBR0gsZ0JBQUksS0FBSyxHQUFHO0FBQ1IscUJBQUssRUFBRSxDQUFDO0FBQ1IscUJBQUssRUFBRSxDQUFDO0FBQ1IsMkJBQVcsRUFBRSxDQUFDO0FBQ2QseUJBQVMsRUFBRSxLQUFLO2FBQ25CLENBQUM7O0FBRUYsaUJBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3ZDLG9CQUFJLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssSUFBSSxFQUFFO0FBQzVCLHlCQUFLLEdBQUc7QUFDSiw2QkFBSyxFQUFFLENBQUM7QUFDUiw2QkFBSyxFQUFFLFNBQVMsQ0FBQyxNQUFNO0FBQ3ZCLG1DQUFXLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQztxQkFDN0MsQ0FBQztpQkFDTDthQUNKOztBQUVELGlCQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN2QyxvQkFBSSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFO0FBQ3hCLHlCQUFLLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztpQkFDMUI7YUFDSjtBQUNELG1CQUFPLEtBQUssQ0FBQztTQUNoQjs7Ozs7ZUFHYSx3QkFBQyxLQUFLLEVBQUU7QUFDbEIsbUJBQU8sQUFBQyxFQUFFLEdBQUcsSUFBSSxHQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDN0M7Ozs7O2VBR3NCLGlDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFOzs7QUFDM0MsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUM1QyxnQkFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDO0FBQ2YsZ0JBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQztBQUNmLGdCQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDakIsZ0JBQUksU0FBUyxHQUFHLE1BQU0sQ0FBQztBQUN2QixhQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxVQUFDLElBQUksRUFBSztBQUN0QixvQkFBSSxJQUFJLFlBQVksRUFBRSxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUU7QUFDL0Msd0JBQUksTUFBTSxHQUFHLE1BQUssY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3ZDLHdCQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM5QiwwQkFBTSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxNQUFNLEdBQUcsQ0FBQyxDQUFDOzs7O0FBSW5ELHdCQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRTs7QUFFekIsaUNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxNQUFLLHVCQUF1QixDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQzs7cUJBRWxGLE1BQU07QUFDSCxpQ0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDO3FCQUMzQzs7O0FBR0QsNEJBQVEsRUFBRSxDQUFDO0FBQ1gsd0JBQUksUUFBUSxHQUFHLENBQUMsRUFBRTs7QUFDZCx5QkFBQyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztxQkFDekMsTUFBTTs7QUFDSCx5QkFBQyxHQUFHLE1BQU0sQ0FBQztBQUNYLHlCQUFDLEdBQUcsU0FBUyxHQUFHLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDM0IsZ0NBQVEsR0FBRyxDQUFDLENBQUM7cUJBQ2hCO2lCQUNKO2FBQ0osQ0FBQyxDQUFDO0FBQ0gsbUJBQU8sU0FBUyxDQUFDO1NBQ3BCOzs7Ozs7O2VBS2lCLDRCQUFDLEtBQUssRUFBRTtBQUN0QixnQkFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUMvQix1QkFBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUNwQyxNQUFNO0FBQ0gsdUJBQU8sQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDbkM7U0FDSjs7Ozs7O2VBSXdCLG1DQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTs7O0FBQ25ELGdCQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDNUMsYUFBQyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsVUFBQyxJQUFJLEVBQUs7QUFDdEIsb0JBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQztBQUNmLG9CQUFJLElBQUksS0FBSyxHQUFHLEVBQ1osQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQzs7QUFFekMsb0JBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ25DLHNCQUFNLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEdBQUcsT0FBSyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNuRSxvQkFBSSxJQUFJLENBQUMsa0JBQWtCLEVBQUU7O0FBRXpCLDBCQUFNLEdBQUcsT0FBSyx5QkFBeUIsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztpQkFDdkU7YUFDSixDQUFDLENBQUM7QUFDSCxtQkFBTyxNQUFNLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ2xEOzs7OztlQUdnQiwyQkFBQyxLQUFLLEVBQUU7QUFDckIsZ0JBQUksT0FBTyxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQzVCLGdCQUFJLEVBQUUsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQztBQUNwQyxtQkFBTyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDZCxvQkFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUNwQixvQkFBSSxJQUFJLFlBQVksRUFBRSxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUU7QUFDL0MsMkJBQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQ3JCO2FBQ0o7QUFDRCxtQkFBTyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsRUFBRSxVQUFVLE1BQU0sRUFBRTtBQUNqRCx1QkFBTyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQzthQUM1QixDQUFDLENBQUM7U0FDTjs7Ozs7ZUFHYyx5QkFBQyxPQUFPLEVBQUU7O0FBRXJCLGdCQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsSUFBSSxPQUFPLEVBQUU7QUFDaEMsb0JBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDO0FBQ3hCLG9CQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQ3JDLG9CQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQztBQUNuQyx1QkFBTyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDakIsd0JBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDdkIsd0JBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6Qyx3QkFBSSxHQUFHLEVBQUU7QUFDTCw0QkFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUM7QUFDcEIsK0JBQUcsRUFBRSxHQUFHO0FBQ1IsZ0NBQUksRUFBRSxJQUFJO0FBQ1YscUNBQVMsRUFBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssR0FBRyxDQUFDLEFBQUM7eUJBQ3pDLENBQUMsQ0FBQztxQkFDTjtpQkFDSjthQUNKO0FBQ0QsbUJBQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztTQUM3Qjs7Ozs7Ozs7ZUFNa0IsNkJBQUMsSUFBSSxFQUFFOztBQUV0QixnQkFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQ3BCLG9CQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFOUUsdUJBQU8sR0FBRyxDQUFDO2FBQ2QsTUFBTTtBQUNILHVCQUFPLElBQUksQ0FBQzthQUNmO1NBQ0o7Ozs7Ozs7ZUFLaUIsNEJBQUMsSUFBSSxFQUFFO0FBQ3JCLGdCQUFJLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLEVBQUU7QUFDbkYsdUJBQU8sQ0FBQyxDQUFDO2FBQ1osTUFBTTtBQUNILHVCQUFPLENBQUMsQ0FBQyxDQUFDO2FBQ2I7U0FDSjs7Ozs7O2VBSU0saUJBQUMsSUFBSSxFQUFFO0FBQ1YsbUJBQU8sSUFBSSxZQUFZLEVBQUUsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQztTQUN0Rzs7O2VBRU0saUJBQUMsSUFBSSxFQUFFO0FBQ1YsbUJBQU8sSUFBSSxZQUFZLEVBQUUsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxHQUFHLENBQUM7U0FDN0U7OztlQUVNLGlCQUFDLElBQUksRUFBRTtBQUNWLG1CQUFPLElBQUksWUFBWSxFQUFFLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEtBQUssR0FBRyxDQUFDO1NBQzdFOzs7ZUFFTSxpQkFBQyxHQUFHLEVBQUU7QUFDVCxtQkFBTyxHQUFHLFlBQVksRUFBRSxDQUFDLEtBQUssQ0FBQztTQUNsQzs7O1dBL3pCQyxPQUFPOzs7QUFtMEJiLE1BQU0sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDOzs7Ozs7Ozs7Ozs7OztBQ3QwQnpCLElBQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDOztBQUVsRCxJQUFNLE9BQU8sR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQzVCLElBQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQztBQUNwQixJQUFNLEtBQUssR0FBRyxPQUFPLENBQUM7QUFDdEIsSUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQzs7SUFHZixHQUFHO0FBQ00sYUFEVCxHQUFHLEdBQ29CO1lBQWIsTUFBTSxnQ0FBRyxFQUFFOzs4QkFEckIsR0FBRzs7QUFFRCxZQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7O0FBRTdCLFlBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxZQUFZLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNwRCxZQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ3hDLFlBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDNUMsWUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUN0QyxZQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDO0FBQ2hELFlBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDeEMsWUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUNwQyxZQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDO0FBQzlDLFlBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDeEMsWUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUN4QyxZQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ3hDLFlBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7QUFDaEMsWUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7O0FBZTFCLFNBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxFQUFFLFVBQUMsU0FBUyxFQUFLO0FBQ3hDLGdCQUFJLFNBQVMsSUFBSSxTQUFTLENBQUMsSUFBSSxFQUMzQixTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDeEIsQ0FBQyxDQUFDOzs7QUFHSCxZQUFJLENBQUMsUUFBUSxHQUFHLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUMxQyxZQUFJLENBQUMsUUFBUSxDQUFDLHVCQUF1QixHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQ3ZELFlBQUksQ0FBQyxRQUFRLENBQUMsbUJBQW1CLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7QUFDbkQsWUFBSSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUNuRCxZQUFJLENBQUMsUUFBUSxDQUFDLHNCQUFzQixHQUFHLEtBQUssQ0FBQztBQUM3QyxZQUFJLENBQUMsUUFBUSxDQUFDLG9CQUFvQixHQUFHLEtBQUssQ0FBQztBQUMzQyxZQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUM7QUFDNUIsWUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyx3QkFBd0IsRUFBRSxDQUFDOztBQUUvRCxZQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDakIsWUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzVDLFlBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDOztBQUUzQixZQUFJLENBQUMsU0FBUyxDQUFDLGVBQWUsRUFBRSxDQUFDO0tBQ3BDOztpQkFuREMsR0FBRzs7ZUFxRE0sdUJBQUc7QUFDVixnQkFBSSxDQUFDLFNBQVMsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDOztBQUV2QyxzQkFBVSxDQUFDLFlBQU07QUFDYixzQkFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO2FBQ2xCLEVBQUUsR0FBRyxDQUFDLENBQUM7U0FDWDs7O2VBRVksdUJBQUMsTUFBTSxFQUFFOzs7QUFFbEIsZ0JBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7QUFDL0IsYUFBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDaEMsZ0JBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQzs7QUFFbEMsZ0JBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7O0FBRWhGLGdCQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLE9BQU8sQ0FBQzs7Ozs7Ozs7OztBQVVyRCxnQkFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO0FBQ2QsZ0JBQUksT0FBTyxFQUFFO0FBQ1QscUJBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO2FBQ2hEOzs7OztBQUtELGdCQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQzs7QUFFNUIsZ0JBQUksYUFBYSxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2xDLHlCQUFhLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUM5Qyx5QkFBYSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDOUMseUJBQWEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQzs7QUFFbEQsZ0JBQUksT0FBTyxHQUFHLFFBQVEsQ0FBQyxZQUFNO0FBQ3pCLG9CQUFJLEdBQUcsR0FBRyxNQUFLLFVBQVUsRUFBRSxDQUFDLFNBQVMsQ0FBQztBQUNsQyx5QkFBSyxFQUFFLGFBQWE7QUFDcEIsMkJBQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQSxHQUFJLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFBLEdBQUksS0FBSyxDQUFDO0FBQzdFLHlCQUFLLEVBQUUsS0FBSztBQUNaLDJCQUFPLEVBQUUsR0FBRyxHQUFHLEtBQUs7QUFDcEIsOEJBQVUsRUFBRSxTQUFTO2lCQUN4QixDQUFDLENBQUM7O0FBRUgsaUJBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDL0Isc0JBQUssa0JBQWtCLEdBQUcsS0FBSyxDQUFDOztBQUVoQyxzQkFBSyxTQUFTLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQzthQUNyQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ1g7Ozs7OztlQUlZLHlCQUFHO0FBQ1osbUJBQU8sQ0FDSCxJQUFJLENBQUMsU0FBUyxFQUNkLElBQUksQ0FBQyxXQUFXLEVBQ2hCLElBQUksQ0FBQyxRQUFRLEVBQ2IsSUFBSSxDQUFDLFNBQVM7O0FBRWQsZ0JBQUksQ0FBQyxPQUFPLEVBQ1osSUFBSSxDQUFDLFlBQVksRUFDakIsSUFBSSxDQUFDLFNBQVMsRUFDZCxJQUFJLENBQUMsU0FBUyxFQUNkLElBQUksQ0FBQyxTQUFTLEVBQ2QsSUFBSSxDQUFDLEtBQUssRUFDVixJQUFJLENBQUMsRUFBRSxDQUNWLENBQUM7U0FDTDs7O2FBRWEsWUFBRztBQUNiLG1CQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7U0FDM0I7YUFFYSxVQUFDLEdBQUcsRUFBRTs7Ozs7O0FBTWhCLGdCQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUM5QyxnQkFBSSxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUM7U0FDMUI7Ozs7O2VBR2dCLDJCQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUU7OztBQUdsQyxhQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBRSxVQUFDLFNBQVMsRUFBSztBQUN4QyxvQkFBSSxTQUFTLElBQUksU0FBUyxDQUFDLGlCQUFpQixFQUFFO0FBQzFDLDZCQUFTLENBQUMsaUJBQWlCLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO2lCQUNuRDthQUNKLENBQUMsQ0FBQzs7O1NBR047OztlQUVTLHNCQUFHO0FBQ1QsbUJBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztTQUN4Qjs7Ozs7ZUFHUSxxQkFBRzs7OztBQUVSLGdCQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7Ozs7QUFJcEMsZ0JBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLGVBQWUsQ0FBQztBQUN6RCxvQkFBUSxDQUFDLFVBQVUsR0FBRyxZQUFNO0FBQ3hCLGtCQUFFLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3ZELG9CQUFJLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRTtBQUM1Qiw0QkFBUSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxDQUFDOztBQUVwQyw0QkFBUSxDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxVQUFDLENBQUMsRUFBSztBQUMxRCw0QkFBSSxDQUFDLENBQUMsS0FBSyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUU7QUFDL0IsOEJBQUUsQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7eUJBQ3hGO3FCQUNKLENBQUMsQ0FBQztpQkFDTjthQUNKLENBQUM7OztBQUdGLGdCQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxTQUFTLEdBQUcsWUFBTTtBQUMzQyxvQkFBSSxDQUFDLEdBQUcsT0FBSyxRQUFRLENBQUMsU0FBUyxDQUFDO0FBQ2hDLG9CQUFJLEdBQUcsR0FBRyxPQUFLLFFBQVEsQ0FBQyxjQUFjLENBQUM7QUFDdkMsb0JBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLEtBQUssQ0FBQyxFQUFFO0FBQ3JCLHVCQUFHLENBQUMsZUFBZSxFQUFFLENBQUM7aUJBQ3pCLE1BQU07QUFDSCxzQkFBRSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztpQkFDbkQ7YUFDSixDQUFDOzs7OztBQUtGLGdCQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7O0FBRS9CLGdCQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQzs7Ozs7Ozs7O0FBU3hFLGdCQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsaUJBQWlCLEdBQUc7QUFDdEQsb0JBQUksRUFBRSxVQUFVO2FBQ25CLENBQUM7OztBQUdGLGdCQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7OztBQUd2RixnQkFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQztTQUMzRDs7Ozs7O2VBSWtCLCtCQUFHOzs7O0FBR2xCLGdCQUFJLGFBQWEsR0FBRyxDQUNoQix3QkFBd0IsRUFDeEIsa0JBQWtCLEVBQ2xCLHlCQUF5QixFQUN6QixpQkFBaUIsRUFDakIsZ0JBQWdCLEVBQ2hCLG1CQUFtQixFQUNuQixrQkFBa0IsRUFDbEIsYUFBYSxFQUNiLGFBQWEsRUFDYixrQkFBa0IsRUFDbEIsaUJBQWlCLEVBQ2pCLFdBQVcsRUFDWCxjQUFjLEVBQ2QsdUJBQXVCLENBQzFCLENBQUM7QUFDRixhQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxVQUFDLFNBQVMsRUFBSztBQUNqQyx1QkFBSyxRQUFRLENBQUMsa0JBQWtCLENBQUMsU0FBUyxFQUFFLFVBQUMsQ0FBQyxFQUFLO0FBQy9DLDJCQUFLLHFCQUFxQixDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztpQkFDNUMsQ0FBQyxDQUFDO2FBQ04sQ0FBQyxDQUFDOztBQUVILGdCQUFJLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLDBCQUEwQixFQUFFLFVBQUMsQ0FBQyxFQUFLLEVBR25FLENBQUMsQ0FBQztTQUNOOzs7Ozs7ZUFJb0IsK0JBQUMsU0FBUyxFQUFFLENBQUMsRUFBRTtBQUNoQyxnQkFBSSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN0QyxhQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBRSxVQUFDLFNBQVMsRUFBSztBQUN4QyxvQkFBSSxTQUFTLElBQUksU0FBUyxDQUFDLGtCQUFrQixFQUN6QyxTQUFTLENBQUMsa0JBQWtCLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQ2xELENBQUMsQ0FBQztTQUVOOzs7ZUFFaUIsNEJBQUMsU0FBUyxFQUFFLENBQUMsRUFBRTs7QUFFN0IsZ0JBQUksU0FBUyxLQUFLLGtCQUFrQixFQUFFO0FBQ2xDLG9CQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDNUIsTUFBTSxJQUFJLFNBQVMsS0FBSyxpQkFBaUIsRUFBRTtBQUN4QyxvQkFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUMzQixNQUFNLElBQUksU0FBUyxLQUFLLGFBQWEsRUFBRTtBQUNwQyxvQkFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUN2QixNQUFNLElBQUksU0FBUyxLQUFLLHlCQUF5QixFQUFFO0FBQ2hELG9CQUFJLENBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQzthQUNwQyxNQUFNLElBQUksU0FBUyxLQUFLLFdBQVcsRUFBRTtBQUNsQyxvQkFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQixvQkFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQy9CLE1BQU0sSUFBSSxTQUFTLEtBQUssY0FBYyxFQUFFO0FBQ3JDLG9CQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3hCLE1BQU0sSUFBSSxTQUFTLEtBQUssa0JBQWtCLEVBQUU7QUFDekMsb0JBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUM1QixNQUFNLElBQUksU0FBUyxLQUFLLGlCQUFpQixFQUFFO0FBQ3hDLG9CQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQzNCO1NBQ0o7Ozs7O2VBR2UsMEJBQUMsQ0FBQyxFQUFFOztBQUVoQixnQkFBSSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO0FBQ3hDLGdCQUFJLENBQUMsRUFBRSxDQUFDLGlCQUFpQixFQUFFLENBQUM7QUFDNUIsZ0JBQUksSUFBSSxDQUFDLHFCQUFxQixFQUFFLEVBQUU7QUFDOUIsb0JBQUksQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLGlCQUFpQixDQUFDLENBQUM7YUFDMUM7U0FDSjs7O2VBRVUscUJBQUMsQ0FBQyxFQUFFOztBQUVYLGdCQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ3RCLGdCQUFJLEVBQUUsS0FBSyxZQUFZLEVBQUUsQ0FBQyxLQUFLLENBQUEsQUFBQyxFQUFFO0FBQzlCLHVCQUFPO2FBQ1Y7QUFDRCxnQkFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsa0JBQWtCLElBQUksTUFBTSxDQUFDLENBQUM7QUFDM0csZ0JBQUksQ0FBQyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDMUM7Ozs7Ozs7ZUFLUSxtQkFBQyxDQUFDLEVBQUU7QUFDVCxnQkFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUNyQixtQkFBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLEdBQUcsY0FBYyxHQUFHLElBQUksQ0FBQyxVQUFVLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxRyxnQkFBSSxJQUFJLENBQUMsVUFBVSxLQUFLLEdBQUcsRUFBRTtBQUN6QixvQkFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsc0JBQXNCLENBQUMsQ0FBQztBQUM3RCxvQkFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzlELG9CQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDaEUsb0JBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLHNCQUFzQixDQUFDLENBQUM7YUFDakU7O2lCQUVJLElBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxHQUFHLEVBQUU7QUFDOUIsb0JBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDM0Qsb0JBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUM5RCxvQkFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsb0JBQW9CLENBQUMsQ0FBQzthQUMvRDtTQUNKOzs7Ozs7O2VBS1csc0JBQUMsQ0FBQyxFQUFFO0FBQ1osZ0JBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUM7QUFDckIsZ0JBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxHQUFHLEVBQUU7QUFDbkQsb0JBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNoRSxvQkFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO2FBQ2pFO1NBQ0o7OztlQUVrQiw2QkFBQyxDQUFDLEVBQUU7QUFDbkIsZ0JBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUM7QUFDckIsZ0JBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxHQUFHLEVBQUU7QUFDekIsb0JBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLHVCQUF1QixDQUFDLENBQUM7QUFDOUQsb0JBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLDRCQUE0QixDQUFDLENBQUM7QUFDeEcsb0JBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsdUJBQXVCLENBQUMsQ0FBQzthQUM1RDtTQUNKOzs7ZUFFZSwwQkFBQyxDQUFDLEVBQUU7QUFDaEIsZ0JBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO0FBQy9CLG1CQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNqQixvQkFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztBQUN2QixvQkFBSSxJQUFJLFlBQVksRUFBRSxDQUFDLEtBQUssRUFBRTtBQUMxQiwyQkFBTyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsR0FBRyxJQUFJLEdBQUcscUJBQXFCLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztpQkFDOUc7YUFDSjtTQUNKOzs7OztlQUdjLHlCQUFDLENBQUMsRUFBRTtBQUNmLG1CQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDL0IsZ0JBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO0FBQy9CLG1CQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNqQixvQkFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztBQUN2QixvQkFBSSxJQUFJLFlBQVksRUFBRSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO0FBQzdDLHdCQUFJLEdBQUcsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3hDLDJCQUFPLENBQUMsR0FBRyxDQUFDLHdDQUF3QyxHQUFHLElBQUksR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdEcsd0JBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxBQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFJLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUMsQ0FBQztBQUN6Rix3QkFBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO2lCQUNwQzthQUNKO1NBQ0o7OztlQUVjLHlCQUFDLENBQUMsRUFBRTtBQUNmLGdCQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUMvQixtQkFBTyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDakIsb0JBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDdkIsb0JBQUksSUFBSSxZQUFZLEVBQUUsQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtBQUM3Qyx3QkFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFeEMsd0JBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxBQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFJLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUMsQ0FBQztBQUN6Rix3QkFBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO2lCQUNwQzthQUNKO1NBQ0o7Ozs7OztlQUllLDRCQUFHO0FBQ2YsZ0JBQUksTUFBTSxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbkMsZ0JBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO0FBQ2hDLG1CQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNqQixvQkFBSSxLQUFLLENBQUMsS0FBSyxZQUFZLEVBQUUsQ0FBQyxLQUFLLEVBQUU7QUFDakMsMEJBQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO2lCQUMzQjthQUNKO0FBQ0QsbUJBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUMxRDs7Ozs7OztlQUthLDBCQUFHO0FBQ2IsZ0JBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQ25ELE9BQU8sS0FBSyxDQUFDOztBQUVqQixnQkFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO0FBQzFDLG1CQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLG9CQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssWUFBWSxFQUFFLENBQUMsS0FBSyxDQUFBLEFBQUMsRUFDL0IsT0FBTyxLQUFLLENBQUM7YUFDcEI7O0FBRUQsbUJBQU8sSUFBSSxDQUFDO1NBQ2Y7Ozs7O2VBR1kseUJBQUc7QUFDWixtQkFBTyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLFlBQVksRUFBRSxDQUFDLEtBQUssQ0FBQztTQUN0SDs7Ozs7ZUFHcUIsa0NBQUc7QUFDckIsZ0JBQUksSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxZQUFZLEVBQUUsQ0FBQyxLQUFLLEVBQUU7QUFDN0csdUJBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7YUFDMUMsTUFBTTtBQUNILHVCQUFPLElBQUksQ0FBQzthQUNmO1NBQ0o7OztlQUV5QixvQ0FBQyxLQUFLLEVBQUU7QUFDOUIsZ0JBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQ25ELE9BQU8sS0FBSyxDQUFDOztBQUVqQixnQkFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO0FBQzFDLG1CQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLG9CQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssWUFBWSxFQUFFLENBQUMsS0FBSyxDQUFBLEFBQUMsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLGVBQWUsS0FBSyxLQUFLLEVBQ3JFLE9BQU8sS0FBSyxDQUFDO2FBQ3BCOztBQUVELG1CQUFPLElBQUksQ0FBQztTQUNmOzs7ZUFFNkIsd0NBQUMsS0FBSyxFQUFFO0FBQ2xDLGdCQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUNuRCxPQUFPLEtBQUssQ0FBQzs7QUFFakIsZ0JBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQztBQUMxQyxtQkFBTyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDZCxvQkFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDekQsb0JBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQ2xDLE9BQU8sS0FBSyxDQUFDO2FBQ3BCOztBQUVELG1CQUFPLElBQUksQ0FBQztTQUNmOzs7ZUFFeUIsc0NBQUc7QUFDekIsZ0JBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQ25ELE9BQU8sS0FBSyxDQUFDOztBQUVqQixnQkFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO0FBQzFDLG1CQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLG9CQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxPQUFPLEVBQUU7QUFDckQsMkJBQU8sSUFBSSxDQUFDO2lCQUNmO2FBQ0o7O0FBRUQsbUJBQU8sS0FBSyxDQUFDO1NBQ2hCOzs7OztlQUdvQixpQ0FBRztBQUNwQixnQkFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsRUFDbkQsT0FBTyxLQUFLLENBQUM7O0FBRWpCLGdCQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUM7QUFDMUMsbUJBQU8sRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2Qsb0JBQUksRUFBRSxFQUFFLENBQUMsS0FBSyxZQUFZLEVBQUUsQ0FBQyxJQUFJLENBQUEsQUFBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUNqRSxPQUFPLEtBQUssQ0FBQzthQUNwQjs7QUFFRCxtQkFBTyxJQUFJLENBQUM7U0FDZjs7Ozs7ZUFHbUIsZ0NBQUc7QUFDbkIsbUJBQU8sSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxZQUFZLEVBQUUsQ0FBQyxJQUFJLENBQUM7U0FDckg7Ozs7OztlQUlHLGdCQUFHO0FBQ0gsZ0JBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQztBQUN4QyxnQkFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRTtBQUN0QixtQkFBRyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLGlCQUFpQixDQUFDO2FBQ2pEOztBQUVELGdCQUFJLElBQUksR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLFVBQVUsRUFBRSxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsY0FBYyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsK0JBQStCLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUseUJBQXlCLEVBQUUsYUFBYSxFQUFFLHVCQUF1QixFQUFFLFdBQVcsRUFBRSx3QkFBd0IsRUFBRSxVQUFVLEVBQUUsc0JBQXNCLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsZUFBZSxFQUFFLEVBQUUsRUFBRSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDO0FBQzFwQixnQkFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7Ozs7QUFJOUMsZ0JBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUNsQixnQkFBSSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO0FBQ3hDLGdCQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO0FBQzNDLGdCQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ25FLGdCQUFJLENBQUMsUUFBUSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztBQUN4QyxnQkFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUNqRCxnQkFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3pHLGdCQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBQ3BCLGdCQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDOzs7QUFHaEMsZ0JBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFO0FBQ3RFLG9CQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLENBQUM7YUFDN0M7O2lCQUVJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLGlCQUFpQixFQUFFLENBQUMsTUFBTSxFQUFFO0FBQ3pFLG9CQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUMvQjtTQUNKOzs7ZUFFYSwwQkFBRztBQUNiLGdCQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzlELGdCQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUN6QixnQkFBSSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO0FBQ3hDLGdCQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO0FBQzNDLGdCQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBQ3BCLGdCQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7OztBQUc1QixnQkFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRTtBQUN6QixvQkFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO2FBQzdDOztpQkFFSSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxNQUFNLEVBQUU7QUFDaEQsb0JBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQy9CO1NBRUo7Ozs7O2VBR1Msc0JBQUc7O0FBRVQsYUFBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQUUsVUFBQyxRQUFRLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBSztBQUNqRSxvQkFBSSxRQUFRLENBQUMsV0FBVyxFQUFFO0FBQ3RCLDJCQUFPLFFBQVEsQ0FBQyxXQUFXLENBQUM7QUFDNUIsNEJBQVEsQ0FBQyxRQUFRLEdBQUcsV0FBVyxDQUFDO2lCQUNuQzthQUNKLENBQUMsQ0FBQzs7OztBQUlILGFBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLFVBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUs7QUFDakUsb0JBQUksWUFBWSxHQUFHLEVBQUUsQ0FBQztBQUN0QixpQkFBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLFVBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUs7QUFDL0Msd0JBQUksR0FBRyxLQUFLLFFBQVEsQ0FBQyxJQUFJLElBQUksR0FBRyxLQUFLLFFBQVEsQ0FBQyxFQUFFLEVBQUU7QUFDOUMsK0JBQU8sQ0FBQyxHQUFHLENBQUMsdUNBQXVDLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDM0Qsb0NBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7cUJBQzFCO2lCQUNKLENBQUMsQ0FBQztBQUNILHdCQUFRLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsQ0FBQzthQUN2RSxDQUFDLENBQUM7U0FDTjs7Ozs7Ozs7OztlQVFlLDBCQUFDLE9BQU8sRUFBRTs7QUFFdEIsZ0JBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDOzs7QUFHckQsZ0JBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUM7U0FDbkQ7Ozs7OztlQUlVLHFCQUFDLEVBQUUsRUFBRTs7O0FBQ1osaUJBQUssQ0FBQyxHQUFHLENBQUMscUJBQXFCLEdBQUcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQUMsUUFBUSxFQUFLO0FBQ3JELG9CQUFJLFFBQVEsQ0FBQyxNQUFNLEtBQUssR0FBRyxFQUFFO0FBQ3pCLHdCQUFJOztBQUVBLCtCQUFLLFFBQVEsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3ZELCtCQUFLLFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO0FBQ3hDLCtCQUFLLFFBQVEsQ0FBQyxXQUFXLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztBQUM1QywrQkFBSyxRQUFRLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxDQUFDO0FBQ3pDLCtCQUFLLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbEMsK0JBQUssUUFBUSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7cUJBQ25DLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDUiw2QkFBSyxDQUFDLGdDQUFnQyxDQUFDLENBQUM7QUFDeEMsK0JBQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO3FCQUM1QjtpQkFDSjthQUNKLENBQUMsQ0FBQztTQUNOOzs7Ozs7O2VBS2dCLDJCQUFDLEdBQUcsRUFBRTtBQUNuQixnQkFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRTtBQUN0QixvQkFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDO2FBQ2xDO1NBQ0o7Ozs7Ozs7ZUFLYywyQkFBRztBQUNkLG1CQUFPO0FBQ0gsb0JBQUksRUFBRSxNQUFNO0FBQ1osdUJBQU8sRUFBRSxJQUFJO0FBQ2Isc0JBQU0sRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLGtCQUFrQixJQUFJLE1BQU07QUFDdkQseUJBQVMsRUFBRSxJQUFJO0FBQ2YseUJBQVMsRUFBRSxJQUFJO2FBQ2xCLENBQUM7U0FDTDs7O2VBRVcsc0JBQUMsS0FBSyxFQUFFO0FBQ2hCLGdCQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUU7QUFDdkIsdUJBQU8sSUFBSSxDQUFDO2FBQ2Y7O0FBRUQsZ0JBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdEQsZ0JBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxFQUFFO0FBQ3hDLHFCQUFLLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLO0FBQ3ZCLG9CQUFJLEVBQUUsTUFBTTtBQUNaLG1CQUFHLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDO2FBQ2xDLENBQUMsQ0FBQztBQUNILGdCQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDdEMsZ0JBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDOzs7QUFHcEQsZ0JBQUksS0FBSyxDQUFDLGVBQWUsRUFBRTtBQUN2QixvQkFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7YUFDbkQ7QUFDRCxtQkFBTyxTQUFTLENBQUM7U0FDcEI7OztlQUVjLHlCQUFDLEtBQUssRUFBRTtBQUNuQixnQkFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFO0FBQ3ZCLHVCQUFPLElBQUksQ0FBQzthQUNmOztBQUVELGdCQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRWpFLGdCQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLG9CQUFvQixDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM1RCxnQkFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLEVBQUU7QUFDeEMscUJBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUs7QUFDdkIsb0JBQUksRUFBRSxNQUFNO0FBQ1osbUJBQUcsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUM7YUFDbEMsQ0FBQyxDQUFDO0FBQ0gsZ0JBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN0QyxnQkFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDcEQsZ0JBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDOzs7QUFHM0QsZ0JBQUksUUFBUSxHQUFHO0FBQ1gsb0JBQUksRUFBRSxRQUFRO0FBQ2Qsa0JBQUUsRUFBRSxRQUFRO0FBQ1osb0JBQUksRUFBRSxJQUFJO0FBQ1Ysd0JBQVEsRUFBRSxHQUFHO0FBQ2Isc0JBQU0sRUFBRSxHQUFHO2FBQ2QsQ0FBQztBQUNGLGdCQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7OztBQUcxQyxnQkFBSSxLQUFLLENBQUMsZUFBZSxFQUFFO0FBQ3ZCLG9CQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQzthQUNuRDtBQUNELG1CQUFPLFNBQVMsQ0FBQztTQUNwQjs7O2VBRVUscUJBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQzNCLGdCQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUU7QUFDdkIsdUJBQU8sSUFBSSxDQUFDO2FBQ2Y7O0FBRUQsZ0JBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdEQsZ0JBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUNSLHNCQUFNLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzthQUMvQjtBQUNELGdCQUFJLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsRUFBRTtBQUN4QyxxQkFBSyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRztBQUNyQixvQkFBSSxFQUFFLElBQUksSUFBSSxNQUFNO0FBQ3BCLG1CQUFHLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDO2FBQ2xDLENBQUMsQ0FBQztBQUNILGdCQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDdEMsZ0JBQUksQ0FBQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDNUQsZ0JBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2hELGlCQUFLLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztBQUM3QixtQkFBTyxLQUFLLENBQUM7U0FDaEI7OztlQUVXLHNCQUFDLElBQUksRUFBRSxJQUFJLEVBQUU7QUFDckIsZ0JBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRTtBQUN2Qix1QkFBTyxJQUFJLENBQUM7YUFDZjs7OztBQUlELGdCQUFJLElBQUksQ0FBQyxhQUFhLEVBQUU7O0FBRXBCLHVCQUFPO2FBQ1Y7O0FBRUQsZ0JBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxFQUFFO0FBQ3hDLG9CQUFJLEVBQUUsSUFBSSxJQUFJLG1CQUFtQjs7QUFFakMsd0JBQVEsRUFBRSxXQUFXO0FBQ3JCLG1CQUFHLEVBQUUsS0FBSzthQUNiLENBQUMsQ0FBQztBQUNILGdCQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3ZELGdCQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDdEMsZ0JBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3RELGdCQUFJLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM3QyxnQkFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7QUFDeEIsZ0JBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDeEQsZ0JBQUksQ0FBQyxRQUFRLENBQUMsdUJBQXVCLEVBQUUsQ0FBQzs7QUFFeEMsbUJBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDOUM7Ozs7OztlQUlVLHFCQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRTtBQUM1QixnQkFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN2RixnQkFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzlELGdCQUFJLE1BQU0sRUFBRTtBQUNSLG9CQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7YUFDckU7QUFDRCxtQkFBTyxLQUFLLENBQUM7U0FDaEI7OztlQUVvQiwrQkFBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtBQUN4QyxnQkFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDNUMsbUJBQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDeEM7Ozs7O2VBR1UscUJBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUN4QixnQkFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDakQsZ0JBQUksSUFBSSxHQUFHO0FBQ1Asb0JBQUksRUFBRSxVQUFVO0FBQ2hCLG9CQUFJLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHO0FBQ3JCLGtCQUFFLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHO0FBQ25CLHdCQUFRLEVBQUUsR0FBRztBQUNiLHNCQUFNLEVBQUUsR0FBRzthQUNkLENBQUM7QUFDRixnQkFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3RDLGdCQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNsRCxtQkFBTyxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUM5Qzs7Ozs7ZUFHVSxxQkFBQyxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3hCLGdCQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNqRCxnQkFBSSxJQUFJLEdBQUc7QUFDUCxvQkFBSSxFQUFFLFVBQVU7QUFDaEIsb0JBQUksRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUc7QUFDckIsa0JBQUUsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUc7QUFDbkIsd0JBQVEsRUFBRSxHQUFHO0FBQ2Isc0JBQU0sRUFBRSxHQUFHO0FBQ1gsd0JBQVEsRUFBRSxHQUFHO2FBQ2hCLENBQUM7QUFDRixnQkFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3RDLGdCQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNsRCxnQkFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3BFLG1CQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzlDOzs7Ozs7O2VBS2dCLDZCQUFHO0FBQ2hCLGdCQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUM7QUFDMUMsZ0JBQUksT0FBTyxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQzVCLG1CQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLG9CQUFJLElBQUksR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO0FBQ3BCLG9CQUFJLElBQUksWUFBWSxFQUFFLENBQUMsS0FBSyxFQUFFO0FBQzFCLDJCQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO2lCQUNyQjthQUNKO0FBQ0QsbUJBQU8sT0FBTyxDQUFDO1NBQ2xCOzs7OztlQUc0Qix1Q0FBQyxLQUFLLEVBQUU7QUFDakMsZ0JBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDOzs7QUFHMUMsZ0JBQUksZUFBZSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQzs7OztBQUl6RixpQkFBSyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQzs7QUFFN0IsZ0JBQUksQ0FBQyxPQUFPLENBQUMsMEJBQTBCLENBQUMsVUFBVSxFQUFFLEtBQUssRUFBRSxlQUFlLENBQUMsQ0FBQzs7QUFFNUUsZ0JBQUksQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUM7U0FDbEM7Ozs7O2VBRzJCLHNDQUFDLEtBQUssRUFBRTtBQUNoQyxnQkFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7OztBQUcxQyxnQkFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUU7O0FBRXhCLG9CQUFJLGdCQUFnQixHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsa0JBQWtCLENBQUMsVUFBVSxDQUFDLENBQUM7O0FBRXBFLG9CQUFJLGVBQWUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQzs7QUFFcEUsb0JBQUksRUFBRSxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUM7QUFDN0IsdUJBQU8sRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2Qsd0JBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFDdEIsMEJBQU0sQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO2lCQUNqQztBQUNELG9CQUFJLENBQUMsT0FBTyxDQUFDLHlCQUF5QixDQUFDLFVBQVUsRUFBRSxLQUFLLEVBQUUsZ0JBQWdCLEVBQUUsZUFBZSxDQUFDLENBQUM7YUFDaEc7O2lCQUVJO0FBQ0Qsb0JBQUksR0FBRyxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUM7QUFDOUIsdUJBQU8sR0FBRyxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2Ysd0JBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUM7QUFDeEIsMkJBQU8sQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDLGVBQWUsQ0FBQztBQUNoRCx3QkFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7aUJBQ2pEO2FBQ0o7QUFDRCxnQkFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLEVBQUUsQ0FBQztTQUNsQzs7Ozs7ZUFJZ0MsMkNBQUMsS0FBSyxFQUFFLElBQUksRUFBRTs7QUFFM0MsZ0JBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0FBQzFDLGdCQUFJLENBQUMsS0FBSyxFQUFFO0FBQ1IsdUJBQU87YUFDVjtBQUNELGdCQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztTQUM5Qzs7Ozs7OztlQUtnQiwyQkFBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRTtBQUNwQyxnQkFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLGVBQWUsQ0FBQztBQUNuQyxtQkFBTyxDQUFDLEdBQUcsQ0FBQyw4QkFBOEIsR0FBRyxPQUFPLEdBQUcsV0FBVyxHQUFHLEtBQUssR0FBRyxZQUFZLEdBQUcsTUFBTSxHQUFHLDZCQUE2QixHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQzs7QUFFOUosZ0JBQUksQ0FBQyxNQUFNLElBQUksT0FBTyxDQUFDLGVBQWUsS0FBSyxNQUFNLEVBQUU7QUFDL0MsdUJBQU8sQ0FBQyxLQUFLLENBQUMsaUVBQWlFLENBQUMsQ0FBQzthQUNwRjs7O0FBR0QsZ0JBQUksV0FBVyxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2hDLGdCQUFJLEVBQUUsR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDO0FBQzVCLGdCQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7QUFDZCxtQkFBTyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDZCxvQkFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUN0QixvQkFBSSxNQUFNLFlBQVksRUFBRSxDQUFDLEtBQUssRUFBRTs7QUFFNUIsd0JBQUksTUFBTSxLQUFLLEtBQUssRUFBRTtBQUNsQiw0QkFBSSxJQUFJLEtBQUssSUFBSSxFQUFFO0FBQ2YsdUNBQVcsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDekIsZ0NBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0FBQ3BFLHVDQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3hCLGdDQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQzt5QkFDdEUsTUFBTTtBQUNILHVDQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3hCLGdDQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztBQUNuRSx1Q0FBVyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN6QixnQ0FBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7eUJBQ3ZFO3FCQUNKOzt5QkFFSSxJQUFJLE1BQU0sS0FBSyxPQUFPLEVBQUU7QUFDekIsbUNBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDeEIsNEJBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO3FCQUN0RTtpQkFDSjthQUNKOzs7QUFHRCxnQkFBSSxLQUFLLEdBQUcsV0FBVyxDQUFDLFFBQVEsQ0FBQztBQUNqQyxtQkFBTyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDakIsb0JBQUksT0FBTyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDMUIsdUJBQU8sQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO2FBQ2xDOzs7QUFHRCxpQkFBSyxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2QsbUJBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2pCLG9CQUFJLE9BQU8sR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQzFCLHVCQUFPLENBQUMsZUFBZSxHQUFHLE1BQU0sQ0FBQzthQUNwQztTQUNKOzs7ZUFFZSwwQkFBQyxLQUFLLEVBQUUsSUFBSSxFQUFFO0FBQzFCLGlCQUFLLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztBQUN6QixpQkFBSyxDQUFDLG9CQUFvQixFQUFFLENBQUM7U0FDaEM7Ozs7O2VBR1UscUJBQUMsS0FBSyxFQUFFO0FBQ2YsZ0JBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDNUUsaUJBQUssQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO1NBQ2hDOzs7OztlQUdlLDBCQUFDLEtBQUssRUFBRTtBQUNwQixnQkFBSSxVQUFVLEdBQUcsRUFBRSxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUEsQUFBQyxDQUFDO0FBQ3hELGdCQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxXQUFXLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUMxRSxpQkFBSyxDQUFDLG9CQUFvQixFQUFFLENBQUM7QUFDN0IsZ0JBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztTQUNyQzs7Ozs7ZUFHZSwwQkFBQyxLQUFLLEVBQUU7QUFDcEIsZ0JBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUN2RixpQkFBSyxDQUFDLG9CQUFvQixFQUFFLENBQUM7QUFDN0IsZ0JBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztTQUNyQzs7O2VBRVUscUJBQUMsS0FBSyxFQUFFO0FBQ2YsbUJBQU8sS0FBSyxDQUFDLElBQUksSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsS0FBSyxJQUFJLENBQUM7U0FDdEQ7Ozs7OztlQUlNLG1CQUFHO0FBQ04sbUJBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDakQ7OztlQUVHLGdCQUFHO0FBQ0gsZ0JBQUksQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3BDLGdCQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNyQzs7O2VBRU0sbUJBQUc7QUFDTixtQkFBTyxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztTQUNqRDs7O2VBRUcsZ0JBQUc7QUFDSCxnQkFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDcEMsZ0JBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ3JDOzs7ZUFFTSxtQkFBRztBQUNOLGdCQUFJLENBQUMsUUFBUSxDQUFDLHVCQUF1QixFQUFFLENBQUM7QUFDeEMsZ0JBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ3JDOzs7Ozs7OztlQU1PLGtCQUFDLElBQUksRUFBRTtBQUNYLGdCQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDZixvQkFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDZDtBQUNELGdCQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDZixvQkFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDZDtBQUNELGdCQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDbkIsb0JBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO2FBQ2xCO0FBQ0QsZ0JBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtBQUNwQixvQkFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7YUFDbkI7QUFDRCxtQkFBTyxJQUFJLENBQUM7U0FDZjs7Ozs7ZUFHUSxxQkFBRztBQUNSLGFBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO1NBQzNEOzs7ZUFFUSxxQkFBRztBQUNSLGdCQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQ3JFLGdCQUFJLENBQUMsUUFBUSxDQUFDLHVCQUF1QixFQUFFLENBQUM7QUFDeEMsZ0JBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDbkUsZ0JBQUksQ0FBQyxRQUFRLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDO1NBQzNDOzs7V0F0OUJDLEdBQUc7OztBQXk5QlQsTUFBTSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUM7Ozs7Ozs7Ozs7OztBQ2orQnJCLElBQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUM7Ozs7SUFHZixZQUFZO0FBQ0gsYUFEVCxZQUFZLENBQ0YsTUFBTSxFQUFFLEdBQUcsRUFBRTs4QkFEdkIsWUFBWTs7O0FBR1YsWUFBSSxDQUFDLHFCQUFxQixHQUFHLEtBQUssQ0FBQzs7QUFFbkMsWUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7QUFDdEIsWUFBSSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7S0FDbkI7O2lCQVBDLFlBQVk7O2VBU0csMkJBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRTs7QUFFbEMsZ0JBQUksUUFBUSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLG1CQUFtQixFQUFFOztBQUMvQyxvQkFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN2QixvQkFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNyQyxNQUFNLElBQUksUUFBUSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLG1CQUFtQixFQUFFOztBQUN0RCxvQkFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNwQixvQkFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUN0QyxNQUFNLElBQUksUUFBUSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLG1CQUFtQixFQUFFOztBQUN0RCxvQkFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN2QixvQkFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNyQyxNQUFNLElBQUksUUFBUSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLG1CQUFtQixFQUFFOztBQUN0RCxvQkFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNwQixvQkFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUN0QztTQUNKOzs7ZUFFaUIsNEJBQUMsU0FBUyxFQUFFLENBQUMsRUFBRTtBQUM3QixnQkFBSSxTQUFTLEtBQUssa0JBQWtCLEVBQUU7QUFDbEMsb0JBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLG1CQUFtQixDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7QUFDNUgsd0JBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztpQkFDdEI7YUFDSjtTQUNKOzs7Ozs7ZUFJaUIsOEJBQUc7QUFDakIsbUJBQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQztTQUMzRjs7O2VBRWMsMkJBQUc7QUFDZCxtQkFBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUM7U0FDakQ7OztlQUVjLDJCQUFHO0FBQ2QsbUJBQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDO1NBQ2pEOzs7ZUFFYSx3QkFBQyxLQUFLLEVBQUU7QUFDbEIsbUJBQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixLQUFLLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO1NBQ3BFOzs7ZUFFYSx3QkFBQyxLQUFLLEVBQUU7QUFDbEIsbUJBQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixLQUFLLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO1NBQ3BFOzs7OztlQUdjLHlCQUFDLEtBQUssRUFBRSxNQUFNLEVBQUU7QUFDM0IsZ0JBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUU7QUFDdEIsb0JBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO2FBQzFEO1NBQ0o7OztlQUVjLHlCQUFDLEtBQUssRUFBRTtBQUNuQixnQkFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRTs7O0FBR3RCLG9CQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3hDLHFCQUFLLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUN4QixvQkFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLG1CQUFtQixDQUFDLENBQUM7YUFDMUQ7U0FDSjs7Ozs7O2VBSWlCLDRCQUFDLEtBQUssRUFBRTtBQUN0QixnQkFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ25DLG1CQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNqQixvQkFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztBQUN2QixvQkFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxHQUFHLEVBQUU7QUFDNUIsMkJBQU8sSUFBSSxDQUFDO2lCQUNmO2FBQ0o7QUFDRCxtQkFBTyxLQUFLLENBQUM7U0FDaEI7OztlQUV3QixtQ0FBQyxLQUFLLEVBQUU7QUFDN0IsZ0JBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxhQUFhLEVBQUUsQ0FBQztBQUNsQyxtQkFBTyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDakIsb0JBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDdkIsb0JBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRTtBQUNoRywyQkFBTyxJQUFJLENBQUM7aUJBQ2Y7YUFDSjtBQUNELG1CQUFPLEtBQUssQ0FBQztTQUNoQjs7O2VBRXVCLGtDQUFDLEtBQUssRUFBRTtBQUM1QixnQkFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLGFBQWEsRUFBRSxDQUFDO0FBQ2xDLG1CQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNqQixvQkFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztBQUN2QixvQkFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFO0FBQ3BFLDJCQUFPLElBQUksQ0FBQztpQkFDZjthQUNKO0FBQ0QsbUJBQU8sS0FBSyxDQUFDO1NBQ2hCOzs7ZUFFeUIsb0NBQUMsS0FBSyxFQUFFO0FBQzlCLGdCQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7QUFDbEMsbUJBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2pCLG9CQUFJLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQ3ZCLG9CQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGNBQWMsRUFBRTtBQUM3RSwyQkFBTyxJQUFJLENBQUM7aUJBQ2Y7YUFDSjtBQUNELG1CQUFPLEtBQUssQ0FBQztTQUNoQjs7O2VBRXVCLGtDQUFDLEtBQUssRUFBRTtBQUM1QixnQkFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxlQUFlLENBQUM7QUFDOUQsZ0JBQUksSUFBSSxLQUFLLFdBQVcsSUFBSSxJQUFJLEtBQUssTUFBTSxFQUFFO0FBQ3pDLHVCQUFPLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUEsSUFDaEQsSUFBSSxDQUFDLHdCQUF3QixDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUEsQUFBQyxJQUM3QyxJQUFJLENBQUMsMEJBQTBCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQSxBQUFDLENBQUM7YUFDeEQsTUFBTTtBQUNILHVCQUFPLENBQUMsQ0FBQzthQUNaO1NBQ0o7Ozs7Ozs7ZUFLVyxzQkFBQyxRQUFRLEVBQUU7O0FBRW5CLGdCQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEVBQ2hGLE9BQU87O0FBRVgsZ0JBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDOztBQUVyRCxnQkFBSSxLQUFLLFlBQVksRUFBRSxDQUFDLEtBQUssRUFBRTtBQUMzQixvQkFBSSxHQUFHLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7QUFDekIsb0JBQUksUUFBUSxLQUFLLEdBQUcsRUFBRTtBQUNsQix3QkFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixHQUFHLEdBQUcsQ0FBQztpQkFDaEQsTUFBTSxJQUFJLFFBQVEsS0FBSyxHQUFHLEVBQUU7QUFDekIsd0JBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsR0FBRyxHQUFHLENBQUM7aUJBQ2hEOzs7QUFHRCxvQkFBSSxDQUFDLHFCQUFxQixDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQzthQUMvQztTQUNKOzs7Ozs7O2VBS1UsdUJBQUc7QUFDVixnQkFBSSxJQUFJLENBQUMscUJBQXFCO0FBQzFCLHVCQUFPOztBQUVYLGdCQUFJLFNBQVMsR0FBRyxJQUFJLENBQUM7QUFDckIsZ0JBQUksUUFBUSxHQUFHLElBQUksQ0FBQztBQUNwQixnQkFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEVBQUU7QUFDeEMseUJBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUMxRix3QkFBUSxHQUFHLEdBQUcsQ0FBQzthQUNsQixNQUFNLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixFQUFFO0FBQy9DLHlCQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDMUYsd0JBQVEsR0FBRyxHQUFHLENBQUM7YUFDbEI7O0FBRUQsZ0JBQUksVUFBVSxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQy9CLGdCQUFJLFdBQVcsR0FBRyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7O0FBR2hDLGdCQUFJLFFBQVEsRUFBRTtBQUNWLG9CQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLE1BQU0sQ0FBQztBQUMzQyx1QkFBTyxNQUFNLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDbEIsd0JBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7QUFDekIsd0JBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDeEIsMkJBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2pCLDRCQUFJLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQ3ZCLDRCQUFJLElBQUksWUFBWSxFQUFFLENBQUMsS0FBSyxFQUFFOztBQUUxQixnQ0FBSSxTQUFTLEVBQUU7QUFDWCxvQ0FBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0FBQ2pDLG9DQUFJLFlBQVksR0FBRyxJQUFJLENBQUM7QUFDeEIsdUNBQU8sS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2pCLHdDQUFJLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBQ3ZCLHdDQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxRQUFRLEVBQ2hGLFlBQVksR0FBRyxJQUFJLENBQUM7aUNBQzNCOzs7O0FBSUQsb0NBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLFVBQVUsRUFDaEMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUNwQixJQUFJLFlBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQ3JDLFdBQVcsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7NkJBQ3JDO3lCQUNKO3FCQUNKO2lCQUNKO2FBQ0o7OztBQUdELGdCQUFJLElBQUksR0FBRyxVQUFVLENBQUMsUUFBUSxDQUFDO0FBQy9CLG1CQUFPLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNoQixvQkFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDMUQsb0JBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDcEIsdUJBQU8sQ0FBQyxHQUFHLENBQUMsZ0NBQWdDLEdBQUcsU0FBUyxHQUFHLE1BQU0sR0FBRyxFQUFFLENBQUMsQ0FBQztBQUN4RSxvQkFBSSxRQUFRLEtBQUssR0FBRyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFO0FBQ3hELDZCQUFTLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztBQUM3Qix5QkFBSyxDQUFDLDZDQUE0QyxDQUFDLENBQUM7QUFDcEQsNkJBQVM7aUJBQ1o7QUFDRCxvQkFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDO0FBQ3JDLHdCQUFJLEVBQUUsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHO0FBQ3hCLHNCQUFFLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHO0FBQ2YsNEJBQVEsRUFBRSxRQUFRO0FBQ2xCLDBCQUFNLEVBQUUsUUFBUTtBQUNoQiw0QkFBUSxFQUFFLFFBQVE7aUJBQ3JCLENBQUMsQ0FBQztBQUNILG9CQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQzthQUM5RDtBQUNELGdCQUFJLE9BQU8sR0FBRyxXQUFXLENBQUMsUUFBUSxDQUFDO0FBQ25DLG1CQUFPLE9BQU8sQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNuQixvQkFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQztBQUMzQix1QkFBTyxDQUFDLEdBQUcsQ0FBQyxrQ0FBa0MsR0FBRyxNQUFNLENBQUMsUUFBUSxHQUFHLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0Ysb0JBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQzdELG9CQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN0QyxvQkFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6RCxvQkFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsYUFBYSxDQUFDLENBQUM7YUFDakU7OztBQUdELGdCQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLHVCQUF1QixFQUFFLENBQUM7U0FDcEQ7OztlQUVRLG1CQUFDLFFBQVEsRUFBRTtBQUNoQixnQkFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDO0FBQ3JCLGdCQUFJLFFBQVEsS0FBSyxHQUFHLEVBQUU7QUFDbEIseUJBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUMxRixvQkFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQzthQUNqRCxNQUFNLElBQUksUUFBUSxLQUFLLEdBQUcsRUFBRTtBQUN6Qix5QkFBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQzFGLG9CQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDO2FBQ2pEOztBQUVELGdCQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3hDLGdCQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLHVCQUF1QixFQUFFLENBQUM7U0FDcEQ7OztlQUVvQiwrQkFBQyxLQUFLLEVBQUUsUUFBUSxFQUFFO0FBQ25DLGdCQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDO0FBQ2xDLGdCQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDOztBQUV4QyxnQkFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ25DLG1CQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNqQixvQkFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztBQUN2QixvQkFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxRQUFRLEVBQy9CLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQzthQUNyQzs7QUFFRCxnQkFBSSxDQUFDLHFCQUFxQixHQUFHLEtBQUssQ0FBQztTQUN0Qzs7O1dBeFFDLFlBQVk7OztBQTJRbEIsTUFBTSxDQUFDLE9BQU8sR0FBRyxZQUFZLENBQUM7Ozs7Ozs7OztBQzlROUIsSUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztBQUNyQixJQUFNLG1CQUFtQixHQUFHLElBQUksQ0FBQztBQUNqQyxJQUFNLG1CQUFtQixHQUFHLE1BQU0sQ0FBQztBQUNuQyxJQUFNLHFCQUFxQixHQUFHLEdBQUcsQ0FBQzs7OztJQUc1QixTQUFTO0FBQ0EsYUFEVCxTQUFTLENBQ0MsTUFBTSxFQUFFLEdBQUcsRUFBRTs4QkFEdkIsU0FBUzs7QUFFUCxZQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztBQUN0QixZQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQzs7QUFFaEIsWUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQztBQUM5QixZQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztBQUMxQixZQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztBQUNyQixZQUFJLENBQUMsbUJBQW1CLEdBQUcsS0FBSyxDQUFDOzs7QUFHakMsWUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7O0FBRXpCLFlBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7OztBQUcvQixZQUFJLENBQUMsVUFBVSxHQUFHLENBQ2Q7QUFDSSxnQkFBSSxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsZ0JBQWdCO0FBQzNDLG9CQUFRLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEtBQUs7U0FDL0csRUFDRDtBQUNJLGdCQUFJLEVBQUUsZ0JBQWdCLEVBQUUsS0FBSyxFQUFFLHlCQUF5QjtBQUN4RCxvQkFBUSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSxhQUFhLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLO1NBQzlHLEVBQ0Q7QUFDSSxnQkFBSSxFQUFFLGNBQWMsRUFBRSxLQUFLLEVBQUUsNkJBQTZCO0FBQzFELG9CQUFRLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUk7U0FDNUcsRUFDRDtBQUNJLGdCQUFJLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxjQUFjO0FBQ3ZDLG9CQUFRLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEtBQUs7U0FDL0csRUFDRDtBQUNJLGdCQUFJLEVBQUUsYUFBYSxFQUFFLEtBQUssRUFBRSxpQkFBaUI7QUFDN0Msb0JBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsS0FBSztTQUMvRyxDQUNKLENBQUM7OztBQUdGLFlBQUksQ0FBQyxTQUFTLEdBQUcsQ0FDYixFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLDhCQUE4QixFQUFFLEVBQ25ELEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLEVBQ2xDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQzdCLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLEVBQ2xDLEVBQUUsSUFBSSxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFFLEVBQzdDLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFLEVBQy9DLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEVBQ3JDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEVBQ2pDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEVBQ2pDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEVBQ2pDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQ25DLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLENBQzVDLENBQUM7OztBQUdGLFlBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDOztBQUVuQixZQUFJLENBQUMsZ0JBQWdCLEdBQUcsQ0FDeEIsRUFBRSxJQUFJLEVBQUUsY0FBYyxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxFQUNuRixFQUFFLElBQUksRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLEVBQzFFLEVBQUUsSUFBSSxFQUFFLHFCQUFxQixFQUFFLGFBQWEsRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLGVBQWUsRUFBRSxFQUM1RixFQUFFLElBQUksRUFBRSxvQkFBb0IsRUFBRSxhQUFhLEVBQUUsYUFBYSxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsRUFDekYsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLGFBQWEsRUFBRSxtQkFBbUIsRUFBRSxXQUFXLEVBQUUsb0JBQW9CLEVBQUUsRUFDaEcsRUFBRSxJQUFJLEVBQUUsc0JBQXNCLEVBQUUsYUFBYSxFQUFFLHFCQUFxQixFQUFFLFdBQVcsRUFBRSxzQkFBc0IsRUFBRSxFQUMzRyxFQUFFLElBQUksRUFBRSwyQkFBMkIsRUFBRSxhQUFhLEVBQUUsb0JBQW9CLEVBQUUsV0FBVyxFQUFFLHFCQUFxQixFQUFFLEVBQzlHLEVBQUUsSUFBSSxFQUFFLG9CQUFvQixFQUFFLGFBQWEsRUFBRSxzQkFBc0IsRUFBRSxXQUFXLEVBQUUsdUJBQXVCLEVBQUUsQ0FDMUcsQ0FBQzs7QUFFRixZQUFJLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQztLQUM1Qjs7aUJBdEVDLFNBQVM7O2VBd0VILG9CQUFHO0FBQ1AsZ0JBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1NBQzdDOzs7Ozs7O2VBT2EsMEJBQUc7QUFDYixnQkFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFDekMsZ0JBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQztBQUNkLG1CQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNqQixvQkFBSyxLQUFLLENBQUMsS0FBSyxZQUFZLEVBQUUsQ0FBQyxLQUFLLEVBQUc7QUFDbkMsd0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQ3BDO2FBQ0o7QUFDRCxnQkFBSSxDQUFDLElBQUksRUFBRSxDQUFDOzs7QUFHWixnQkFBSSxHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQ2xDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLHVCQUF1QixFQUFFLEVBQzdDLENBQUMsVUFBVSxFQUFFLHdCQUF3QixFQUFFLGtCQUFrQixFQUFFLHVCQUF1QixFQUFFLGVBQWUsRUFDbEcsTUFBTSxFQUFFLE1BQU0sRUFBRSxtQkFBbUIsQ0FBQzthQUN4QyxDQUFDOztBQUVGLGdCQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDbkM7OztlQUlPLGtCQUFDLFFBQVEsRUFBRTtBQUNmLG9CQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ25DLGdCQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7U0FDbkI7OztlQUVVLHFCQUFDLEtBQUssRUFBRSxRQUFRLEVBQUU7QUFDekIsZ0JBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMxQyxvQkFBUSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzdCLGdCQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7U0FDbkI7OztlQUVNLGlCQUFDLFFBQVEsRUFBRTtBQUNkLG9CQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUN0RCxnQkFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1NBQ25COzs7ZUFFUyxvQkFBQyxJQUFJLEVBQUUsUUFBUSxFQUFFO0FBQ3ZCLGdCQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDeEMsb0JBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUM1QixnQkFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1NBQ25COzs7ZUFFUSxxQkFBRztBQUNSLGdCQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7QUFDbkIsb0JBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO2FBQ2hDO1NBQ0o7Ozs7O2VBR29CLGlDQUFHO0FBQ3BCLGdCQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRTtBQUNwQixvQkFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUM7QUFDN0Isb0JBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQ3pDO0FBQ0ksNkJBQVMsRUFBRSxNQUFNO0FBQ2pCLDJCQUFPLEVBQUUscUJBQXFCO2lCQUNqQyxFQUNELEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFDcEI7QUFDSSx3QkFBSSxFQUFFLElBQUk7QUFDViwwQkFBTSxFQUFFLG1CQUFtQjtBQUMzQiwrQkFBVyxFQUFFLElBQUk7aUJBQ3BCLENBQ0osQ0FDSixDQUFDO0FBQ0Ysb0JBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQzthQUNqRDtTQUNKOzs7OztlQUdnQiwyQkFBQyxRQUFRLEVBQUUsUUFBUSxFQUFFO0FBQ2xDLGdCQUFJLFFBQVEsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRTs7QUFDNUMsb0JBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQzthQUN6QixNQUNJLElBQUksUUFBUSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGdCQUFnQixFQUFFOzs7QUFFakQsb0JBQUksQ0FBQyxrQkFBa0IsR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ3pFLHVCQUFPLENBQUMsR0FBRyxDQUFDLHNCQUFzQixHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDOztBQUU5RCxvQkFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO0FBQ2pELG9CQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDdEIsb0JBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLElBQUksSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtBQUNoRSx3QkFBSSxDQUFDLGlCQUFpQixHQUFHLENBQUMsQ0FBQztpQkFDOUI7QUFDRCxvQkFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ2xDO1NBQ0o7OztlQUVpQiw0QkFBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFO0FBQzdCLGdCQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLEVBQUU7QUFDM0QsdUJBQU87YUFDVjs7QUFFRCxnQkFBSSxTQUFTLEtBQUssbUJBQW1CLEVBQUU7QUFDbkMsb0JBQUksU0FBUyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUM7QUFDMUIsb0JBQUksU0FBUyxDQUFDLEtBQUssS0FBSyxDQUFDLEVBQUU7QUFDdkIsd0JBQUksS0FBSyxHQUFHLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUM5Qix3QkFBSSxLQUFLLFlBQVksRUFBRSxDQUFDLElBQUksSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxPQUFPLEVBQUU7QUFDN0QsNEJBQUksQ0FBQyxPQUFPLENBQUMsMENBQTBDLENBQUMsRUFBRTtBQUN0RCw2QkFBQyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7eUJBQ25CO3FCQUNKO2lCQUNKO2FBQ0osTUFDSSxJQUFJLFNBQVMsS0FBSyxrQkFBa0IsRUFBRTs7QUFFdkMsb0JBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO2FBQzlCLE1BQ0ksSUFBSSxTQUFTLEtBQUssZ0JBQWdCLElBQUksU0FBUyxLQUFLLGFBQWEsRUFBRTs7QUFFcEUsb0JBQUksQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDO2FBQzVCLE1BQ0ksSUFBSSxTQUFTLEtBQUssdUJBQXVCLEVBQUUsRUFHL0M7U0FDSjs7O2FBQ2dCLFlBQUc7OztBQUNoQixnQkFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUU7QUFDdEIsb0JBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxZQUFNO0FBQ25DLDBCQUFLLHNCQUFzQixDQUFDLE1BQUssaUJBQWlCLENBQUMsQ0FBQztpQkFDdkQsRUFBRSxJQUFJLENBQUMsQ0FBQzthQUNaO0FBQ0QsbUJBQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQztTQUM5Qjs7O2VBQ1UsdUJBQUc7QUFDVixtQkFBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQSxBQUFDLENBQUM7U0FDM0c7OztlQUV1QixvQ0FBRztBQUN2QixtQkFBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUN6RCxJQUFJLENBQUMsWUFBWSxJQUNqQixDQUFDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLFlBQVksQ0FBQztTQUNuRDs7Ozs7ZUFHZ0IsNkJBQUc7QUFDaEIsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDckMsZ0JBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDO0FBQ3hDLGdCQUFJLFNBQVMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxVQUFDLElBQUksRUFBSztBQUN0Qyx1QkFBTyxJQUFJLENBQUMsUUFBUSxLQUFLLE9BQU8sQ0FBQzthQUNwQyxDQUFDLENBQUM7QUFDSCxxQkFBUyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLFVBQUMsUUFBUSxFQUFLO0FBQzFDLHVCQUFPLFFBQVEsQ0FBQyxLQUFLLENBQUM7YUFDekIsQ0FBQyxDQUFDOztBQUVILG1CQUFPLFNBQVMsQ0FBQztTQUNwQjs7O2VBRVkseUJBQUc7QUFDWixtQkFBTyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxNQUFNLENBQUM7U0FDMUM7OztlQUVvQixpQ0FBRztBQUNwQixtQkFBTyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDO1NBQzdFOzs7ZUFFVyxzQkFBQyxRQUFRLEVBQUU7QUFDbkIsbUJBQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7U0FDM0Q7OztlQUVrQiwrQkFBRztBQUNsQixnQkFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQzFELGdCQUFJLEtBQUssRUFBRTtBQUNQLHVCQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7YUFDbEUsTUFDSTtBQUNELHVCQUFPLEVBQUUsQ0FBQzthQUNiO1NBQ0o7OztlQUVlLDBCQUFDLEtBQUssRUFBRTtBQUNwQixnQkFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUNyQyxnQkFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsRUFBRSxVQUFDLFNBQVMsRUFBSztBQUM1RCx1QkFBTyxTQUFTLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQzthQUNwQyxDQUFDLENBQUM7QUFDSCxnQkFBSSxTQUFTLEVBQUU7QUFDWCx1QkFBTyxPQUFPLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUNoRCxNQUNJO0FBQ0QsdUJBQU8sU0FBUyxDQUFDO2FBQ3BCO1NBQ0o7Ozs7O2VBR1EsbUJBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRTs7QUFFeEIsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDckMsZ0JBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN6QyxnQkFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssR0FBRyxTQUFTLENBQUMsQ0FBQztBQUN4RCxnQkFBSSxLQUFLLElBQUksUUFBUSxFQUFFOztBQUVuQix1QkFBTyxDQUFDLGdCQUFnQixDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ3ZDLHVCQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUMsQ0FBQztBQUNqRix1QkFBTyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLENBQUM7QUFDdkYsdUJBQU8sQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUN4QyxvQkFBSSxDQUFDLGNBQWMsR0FBRyxFQUFFLENBQUM7YUFDNUI7U0FFSjs7O2VBRWtCLCtCQUFHOzs7QUFHbEIsZ0JBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0FBQzFDLGdCQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQ3JDLGdCQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDakIsbUJBQU8sQ0FBQyxnQkFBZ0IsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBQ2xELGFBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLFVBQUMsU0FBUyxFQUFLO0FBQzlCLHVCQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDOztBQUU1RCx3QkFBUSxFQUFFLENBQUM7YUFDZCxDQUFDLENBQUM7QUFDSCxtQkFBTyxDQUFDLGlCQUFpQixDQUFDLHVCQUF1QixDQUFDLENBQUM7U0FFdEQ7OztlQUVhLDBCQUFHO0FBQ2IsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDckMsZ0JBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNWLG1CQUFPLE9BQU8sQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxFQUFFO0FBQ25ELGlCQUFDLEVBQUUsQ0FBQzthQUNQO0FBQ0QsbUJBQU8sUUFBUSxHQUFHLENBQUMsQ0FBQztTQUN2Qjs7Ozs7O2VBSWUsNEJBQUc7QUFDZixnQkFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7QUFDdEMsbUJBQU8sTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7U0FDNUI7OztlQUVPLGtCQUFDLFFBQVEsRUFBRTs7QUFFZixtQkFBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEdBQUcsUUFBUSxDQUFDLENBQUM7QUFDckMsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7O0FBRXJDLGdCQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7QUFDdEMsY0FBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsS0FBSyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQzFDLGdCQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQy9CLGdCQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQzs7QUFFdkMsZ0JBQUksU0FBUyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDOztBQUVqRSxtQkFBTyxDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3RDLG1CQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQztBQUN0QixtQkFBRyxFQUFFLElBQUksQ0FBQyxjQUFjLEVBQUU7QUFDMUIsd0JBQVEsRUFBRSxPQUFPO0FBQ2pCLHFCQUFLLEVBQUUsUUFBUTtBQUNmLHVCQUFPLEVBQUUsS0FBSztBQUNkLHFCQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUs7QUFDZixzQkFBTSxFQUFFLEVBQUUsQ0FBQyxNQUFNO0FBQ2pCLG1CQUFHLEVBQUUsTUFBTTtBQUNYLHFCQUFLLEVBQUUsQ0FBQztBQUNSLHdCQUFRLEVBQUUsQ0FBQztBQUNYLG9CQUFJLEVBQUUsUUFBUTtBQUNkLHFCQUFLLEVBQUUsRUFBRTtBQUNULHFCQUFLLEVBQUUsRUFBRTtBQUNULHNCQUFNLEVBQUUsRUFBRTtBQUNWLHlCQUFTLEVBQUUsU0FBUyxDQUFDLFlBQVk7QUFDakMseUJBQVMsRUFBRSxTQUFTLENBQUMsYUFBYTtBQUNsQyxxQkFBSyxFQUFFLEVBQUU7YUFDWixDQUFDLENBQUM7QUFDSCxtQkFBTyxDQUFDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3ZDLGdCQUFJLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQzs7QUFFekIsZ0JBQUksQ0FBQyxzQkFBc0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUV6Qzs7O2VBRWEsd0JBQUMsS0FBSyxFQUFFOztBQUVsQixnQkFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUNyQyxnQkFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7QUFDdkMsZ0JBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN6QyxnQkFBSSxLQUFLLEVBQUU7QUFDUCx1QkFBTyxDQUFDLGdCQUFnQixDQUFDLGlCQUFpQixDQUFDLENBQUM7OztBQUc1QyxpQkFBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsRUFBRSxVQUFDLFNBQVMsRUFBSztBQUM1Qyx3QkFBSSxTQUFTLENBQUMsS0FBSyxHQUFHLEtBQUssRUFBRTtBQUN6QiwrQkFBTyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDO3FCQUMxRTtpQkFDSixDQUFDLENBQUM7OztBQUdILHVCQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQztBQUN0Qix1QkFBRyxFQUFFLElBQUksQ0FBQyxjQUFjLEVBQUU7QUFDMUIsNEJBQVEsRUFBRSxPQUFPO0FBQ2pCLHlCQUFLLEVBQUUsS0FBSyxHQUFHLENBQUM7QUFDaEIsMkJBQU8sRUFBRSxLQUFLO0FBQ2QseUJBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUs7QUFDdkIsMEJBQU0sRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU07QUFDekIsdUJBQUcsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUc7QUFDbkIseUJBQUssRUFBRSxDQUFDO0FBQ1IsNEJBQVEsRUFBRSxDQUFDO0FBQ1gsd0JBQUksRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUk7QUFDckIseUJBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTO0FBQ25DLHlCQUFLLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLO0FBQ3ZCLDBCQUFNLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQ3pCLDZCQUFTLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQy9CLDZCQUFTLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQy9CLHlCQUFLLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLO0FBQUEsaUJBQzFCLENBQUMsQ0FBQztBQUNILHVCQUFPLENBQUMsaUJBQWlCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUM3QyxvQkFBSSxDQUFDLGNBQWMsR0FBRyxFQUFFLENBQUM7YUFDNUI7U0FFSjs7O2VBRVUscUJBQUMsS0FBSyxFQUFFOzs7QUFHZixnQkFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUNyQyxnQkFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3pDLGdCQUFJLEtBQUssRUFBRTtBQUNQLHVCQUFPLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDekMsdUJBQU8sQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6Qyx1QkFBTyxDQUFDLGlCQUFpQixDQUFDLGNBQWMsQ0FBQyxDQUFDO2FBQzdDO0FBQ0QsZ0JBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7QUFDOUIsZ0JBQUksQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDO0FBQ3pCLGdCQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztTQUU5Qjs7O2VBRWdCLDJCQUFDLEtBQUssRUFBRTtBQUNyQixtQkFBTyxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ3JDOzs7ZUFFb0IsaUNBQUc7OztBQUNwQixhQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxFQUFFLFVBQUMsRUFBRSxFQUFLO0FBQ3JDLHVCQUFLLG9CQUFvQixDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUN2QyxDQUFDLENBQUM7U0FDTjs7O2VBRW1CLDhCQUFDLEtBQUssRUFBRTs7O0FBR3hCLGdCQUFJLFVBQVUsR0FBRyxJQUFJLENBQUM7QUFDdEIsZ0JBQUksV0FBVyxHQUFHLEdBQUcsQ0FBQztBQUN0QixnQkFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQzs7QUFFckMsZ0JBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN6QyxnQkFBSSxDQUFDLEtBQUssRUFBRTtBQUNSLHVCQUFPLEVBQUUsQ0FBQzthQUNiLE1BQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUU7QUFDckQsdUJBQU8sRUFBRSxDQUFDO2FBQ2IsTUFDSTtBQUNELG9CQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDO0FBQ2hDLG9CQUFJLEVBQUUsWUFBQSxDQUFDO0FBQ1Asb0JBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUU7O0FBQ3RCLHNCQUFFLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLENBQUM7aUJBQ3pELE1BQ0k7O0FBQ0Qsc0JBQUUsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQztpQkFDaEM7O0FBRUQsb0JBQUksYUFBYSxHQUFHLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7O0FBRzdDLG9CQUFJLE1BQU0sR0FBRyxVQUFVLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUNuQyxvQkFBSSxNQUFNLEdBQUcsV0FBVyxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUM7QUFDckMsb0JBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQzFDLHVCQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxDQUFDOztBQUUvQyxvQkFBSSxDQUFDLEdBQUcsVUFBVSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFDOUIsb0JBQUksQ0FBQyxHQUFHLFVBQVUsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDOzs7O0FBSS9CLG9CQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDO0FBQ2hDLHVCQUFPLENBQUMsdUJBQXVCLEVBQUUsQ0FBQzs7QUFFbEMsdUJBQU8sQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDOztBQUUzQixvQkFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUNoQyx3QkFBSSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3ZCLDRCQUFRLEVBQUUsYUFBYTtBQUN2Qix5QkFBSyxFQUFFLFVBQVU7aUJBQ3BCLENBQUMsQ0FBQzs7QUFFSCxvQkFBSSxDQUFDLG1CQUFtQixHQUFHLEtBQUssQ0FBQztBQUNqQyx1QkFBTyxDQUFDLHVCQUF1QixFQUFFLENBQUM7O0FBRWxDLG9CQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxHQUFHLE9BQU8sQ0FBQzs7QUFFckMsdUJBQU8sT0FBTyxDQUFDO2FBQ2xCO1NBQ0o7Ozs7O2VBR2MsMkJBQUc7O0FBRWQsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDckMsZ0JBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDO0FBQzFELGNBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDeEIsZ0JBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUNaLGdCQUFJLENBQUMsR0FBRyxHQUFHLENBQUM7OztBQUdaLGdCQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDO0FBQ2hDLG1CQUFPLENBQUMsdUJBQXVCLEVBQUUsQ0FBQzs7QUFFbEMsZ0JBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDaEMscUJBQUssRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO0FBQzVDLHdCQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNsQyxvQkFBSSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2FBQzFCLENBQUMsQ0FBQzs7QUFFSCxnQkFBSSxDQUFDLG1CQUFtQixHQUFHLEtBQUssQ0FBQztBQUNqQyxtQkFBTyxDQUFDLHVCQUF1QixFQUFFLENBQUM7O0FBRWxDLG1CQUFPLE9BQU8sQ0FBQztTQUNsQjs7Ozs7ZUFJcUIsZ0NBQUMsS0FBSyxFQUFFOztBQUUxQixnQkFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUNyQyxnQkFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDOzs7QUFJekMsZ0JBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDeEIsZ0JBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUM7QUFDL0IsbUJBQU8sQ0FBQyx1QkFBdUIsRUFBRSxDQUFDOztBQUVsQyxnQkFBSSxLQUFLLEVBQUU7QUFDUCxvQkFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDOztBQUVoQyxvQkFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO0FBQ25CLHdCQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztpQkFDeEI7YUFDSjtTQUVKOzs7ZUFFZ0IsNkJBQUc7QUFDaEIsZ0JBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUMxRCxtQkFBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsSUFDNUQsS0FBSyxJQUFJLElBQUksS0FDWixLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxnQkFBZ0IsSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssYUFBYSxDQUFBLEFBQUMsQ0FBQztTQUN4SDs7Ozs7ZUFHVSxxQkFBQyxLQUFLLEVBQUU7OztBQUdmLGdCQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQ3JDLG1CQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDekIsZ0JBQUksS0FBSyxFQUFFO0FBQ1Asb0JBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN6QyxvQkFBSSxLQUFLLEVBQUU7QUFDUCx5QkFBSyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7aUJBQzNCO2FBQ0o7O1NBR0o7QUFISTs7ZUFLSSxtQkFBQyxLQUFLLEVBQUU7QUFDYixnQkFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUNyQyxnQkFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLENBQUM7O0FBRXBELGdCQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztBQUN0QyxnQkFBSSxNQUFNLENBQUMsTUFBTSxFQUFFO0FBQ2Ysb0JBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO0FBQ3JCLG9CQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQzVCO1NBQ0o7Ozs7O2VBR1csc0JBQUMsU0FBUyxFQUFFOzs7QUFHcEIsZ0JBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUMxRCxnQkFBSSxLQUFLLEVBQUU7QUFDUCxvQkFBSSxDQUFDLGlCQUFpQixJQUFLLFNBQVMsQUFBQyxDQUFDO0FBQ3RDLG9CQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7QUFDbkIsd0JBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7aUJBQzdDO2FBQ0o7U0FFSjs7O2VBRVcsc0JBQUMsS0FBSyxFQUFFOzs7QUFHaEIsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDckMsZ0JBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN6QyxnQkFBSSxDQUFDLEtBQUssRUFBRTtBQUNSLHVCQUFPO2FBQ1Y7O0FBRUQsbUJBQU8sQ0FBQyxjQUFjLEVBQUUsQ0FBQzs7QUFFekIsZ0JBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUM7QUFDL0IsZ0JBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUM7OztBQUdsQyxnQkFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7QUFDN0IsZ0JBQUksUUFBUSxHQUFHLG1CQUFtQixDQUFDOztBQUVuQyxnQkFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUN0QixvQkFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDOzs7QUFHaEMsb0JBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksQ0FDdkMsS0FBSyxDQUFDLFlBQVksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxHQUFHLFFBQVEsRUFDdkMsS0FBSyxDQUFDLFlBQVksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDO0FBQzlDLG9CQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsR0FBRyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQ3JDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxHQUFHLFFBQVEsRUFDL0IsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUM7QUFDckMsb0JBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQzs7YUFFcEMsTUFDSSxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFO0FBQzNCLG9CQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDaEMsb0JBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQzthQUNyQyxNQUNJO0FBQ0Qsb0JBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBQ3pCLG9CQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7YUFDckM7O0FBRUQsZ0JBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO0FBQ3pCLGFBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRLENBQUMsbUJBQW1CLENBQUMsQ0FBQzs7QUFFeEMsZ0JBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztTQUVwRDs7Ozs7ZUFHa0IsNkJBQUMsS0FBSyxFQUFFOzs7QUFDdkIsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7O0FBRXJDLGtCQUFNLENBQUMsVUFBVSxDQUFDLFlBQU07O0FBRXBCLG9CQUFJLFNBQVMsR0FBSSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxVQUFVLEFBQUMsQ0FBQztBQUNqRCxvQkFBSSxRQUFRLEdBQUcsT0FBSyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQ3RFLHdCQUFRLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsRUFBRSxFQUFFLFFBQVEsQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFDNUQsdUJBQU8sQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDcEQsRUFBRSxHQUFHLENBQUMsQ0FBQztTQUNYOzs7Ozs7ZUFJaUIsNEJBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRTs7OztBQUloQyxnQkFBSSxHQUFHLEdBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixBQUFDLENBQUM7QUFDOUUsbUJBQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxHQUFHLElBQUksR0FBRyxTQUFTLEdBQUcsR0FBRyxDQUFDLENBQUM7O0FBRS9DLGdCQUFJLGVBQWUsR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7O0FBRS9DLGdCQUFJLEdBQUcsR0FBRyxlQUFlLEVBQUU7O0FBRXZCLG9CQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztBQUM1Qix1QkFBTyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUEsR0FBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDekQsTUFDSTs7QUFFRCxvQkFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUM7QUFDM0IsdUJBQU8sSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQSxHQUFJLENBQUMsQ0FBQyxDQUFDO2FBQzFEO1NBQ0o7OztlQUVhLDBCQUFHOzs7QUFHYixnQkFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQzs7QUFFckMsZ0JBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtBQUNuQixvQkFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO2FBQ3JDOzs7QUFHRCxnQkFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7QUFDMUIsYUFBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDOztBQUUzQyxnQkFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDOztBQUVqRCxtQkFBTyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3pCLGdCQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDOztTQUd0Qzs7O1dBbnFCQyxTQUFTOzs7QUF1cUJmLE1BQU0sQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDOzs7Ozs7Ozs7Ozs7QUM3cUIzQixJQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsRUFBRSxDQUFDO0FBQ3JCLElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0FBQzlELElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0FBQzlELElBQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0FBQzVELElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0FBQzlELElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDOzs7QUFHOUQsSUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUM7O0FBRy9CLElBQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQztBQUN6QixJQUFNLE1BQU0sR0FBRyxTQUFTLENBQUM7OztBQUd6QixJQUFJLGFBQWEsR0FBRyxJQUFJLENBQUM7Ozs7SUFHbkIsU0FBUztBQUNBLGFBRFQsU0FBUyxDQUNDLE1BQU0sRUFBRSxHQUFHLEVBQUU7OEJBRHZCLFNBQVM7O0FBRVAsWUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7QUFDdEIsWUFBSSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7O0FBRWhCLFlBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDNUMsWUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM1QyxZQUFJLENBQUMsWUFBWSxHQUFHLElBQUksWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzFDLFlBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDNUMsWUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDM0M7O2lCQVZDLFNBQVM7O2VBWUUsdUJBQUMsT0FBTyxFQUFFOzs7QUFDbkIsbUJBQU8sQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNsRCxtQkFBTyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2pELG1CQUFPLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDaEQsbUJBQU8sQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDckQsbUJBQU8sQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7O0FBRXJELGdCQUFJLENBQUMseUJBQXlCLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNoRSxnQkFBSSxDQUFDLHlCQUF5QixDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7O0FBRWxFLG1CQUFPLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxZQUFZLEdBQUcsVUFBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFLO0FBQzlGLHNCQUFLLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsV0FBVyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQzthQUMzRyxDQUFDOztBQUVGLG1CQUFPLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxZQUFZLEdBQUcsVUFBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFLO0FBQ2hHLHNCQUFLLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsYUFBYSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQzthQUM3RyxDQUFDOztBQUVGLG1CQUFPLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsR0FBRyxVQUFDLElBQUksRUFBSztBQUMzRCxrQkFBRSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxRQUFPLElBQUksQ0FBQyxDQUFDO0FBQzdELG9CQUFJLElBQUksR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQzVDLG9CQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDOzs7YUFHM0MsQ0FBQzs7QUFFRixtQkFBTyxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7QUFDbkUsbUJBQU8sQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1NBQ3hFOzs7Ozs7O2VBS3dCLG1DQUFDLElBQUksRUFBRTtBQUM1QixnQkFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMseUJBQXlCLEVBQUUsQ0FBQztBQUN0RCxnQkFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxDQUFDO0FBQzFELGdCQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxDQUFDO1NBQzNEOzs7ZUFFd0IscUNBQUc7QUFDeEIsbUJBQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUU7QUFDZix5QkFBUyxFQUFFLE1BQU07YUFDcEIsRUFDRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRTtBQUNULG9CQUFJLEVBQUUsV0FBVztBQUNqQiwyQkFBVyxFQUFFLENBQUM7YUFDakIsQ0FBQyxDQUNMLENBQUM7U0FDTDs7O2VBRXdCLHFDQUFHO0FBQ3hCLG1CQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFO0FBQ2hCLHlCQUFTLEVBQUUsTUFBTTthQUNwQixFQUNHLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRTtBQUNuQixvQkFBSSxFQUFFLFFBQVE7QUFDZCwyQkFBVyxFQUFFLENBQUM7QUFDZCxvQkFBSSxFQUFFLElBQUk7YUFDYixDQUFDLENBQ0wsQ0FBQztTQUNMOzs7OztlQUdpQiw0QkFBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRTs7OztBQUlwRSxnQkFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDM0QsZ0JBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDN0QsZ0JBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUV6RCxnQkFBSSxJQUFJLENBQUMsZ0JBQWdCLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksS0FBSyxjQUFjLEVBQUU7QUFDeEUseUJBQVMsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQzFCLDBCQUFVLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztBQUMzQix3QkFBUSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDekIsMEJBQVUsQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO0FBQ3hCLHdCQUFRLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQzthQUN6QixNQUFNLElBQUksSUFBSSxDQUFDLGdCQUFnQixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLEtBQUssY0FBYyxFQUFFO0FBQy9FLHlCQUFTLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztBQUMxQiwwQkFBVSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDM0Isd0JBQVEsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQ3pCLDBCQUFVLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztBQUN4Qix3QkFBUSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7YUFDekI7QUFDRCxvQkFBUSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDekQ7Ozs7O2VBR1csc0JBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFOztBQUU3QyxnQkFBSSxRQUFRLENBQUMsTUFBTSxLQUFLLEdBQUcsRUFBRTs7QUFFekIsb0JBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDOztBQUV6RCxvQkFBSSxNQUFNLENBQUMsS0FBSyxFQUFFO0FBQ2QsMkJBQU8sTUFBTSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2xCLDRCQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQ3pCLDRCQUFJLEtBQUssQ0FBQyxRQUFRLEtBQUssUUFBUSxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssTUFBTSxFQUFFO0FBQ3hELG1DQUFPLEtBQUssQ0FBQzt5QkFDaEI7cUJBQ0o7aUJBQ0o7YUFDSjtBQUNELG1CQUFPLElBQUksQ0FBQztTQUNmOzs7Ozs7Ozs7O2VBUWlCLDhCQUFHO0FBQ2pCLG1CQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFO0FBQzlCLHlCQUFTLEVBQUUsWUFBWTtBQUN2Qix3QkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLHFCQUFLLEVBQUUsQ0FBQztBQUNSLHVCQUFPLEVBQUUsQ0FBQztBQUNWLHdCQUFRLEVBQUUsS0FBSztBQUNmLDBCQUFVLEVBQUUsS0FBSzthQUNwQixFQUNHLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRTtBQUN0QixvQkFBSSxFQUFFLFdBQVc7QUFDakIsc0JBQU0sRUFBRSxFQUFFO0FBQ1Ysb0JBQUksRUFBRSxJQUFJO0FBQ1Ysc0JBQU0sRUFBRSxJQUFJO2FBQ2YsQ0FBQyxFQUNGLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFO0FBQ1gsc0JBQU0sRUFBRSxnQ0FBZ0M7QUFDeEMseUJBQVMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU87QUFDMUIsOEJBQWMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU87QUFDL0IscUJBQUssRUFBRSxHQUFHO0FBQ1Ysc0JBQU0sRUFBRSxFQUFFO2FBQ2IsQ0FBQyxFQUNGLEVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFO0FBQ2Isb0JBQUksRUFBRSw2QkFBNkI7QUFDbkMseUJBQVMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVU7QUFDN0IsOEJBQWMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVU7QUFDbEMscUJBQUssRUFBRSxHQUFHO2FBQ2IsQ0FBQyxFQUNGLEVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFO0FBQ2Isb0JBQUksRUFBRSxVQUFVO0FBQ2hCLG9CQUFJLEVBQUUsRUFBRTtBQUNSLHlCQUFTLEVBQUUsT0FBTztBQUNsQix5QkFBUyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUTtBQUMzQiw4QkFBYyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUTtBQUNoQyxxQkFBSyxFQUFFLEdBQUc7YUFDYixDQUFDLEVBQ0YsRUFBRSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUU7QUFDYixvQkFBSSxFQUFFLFlBQVk7QUFDbEIsb0JBQUksRUFBRSxFQUFFO0FBQ1IseUJBQVMsRUFBRSxPQUFPO0FBQ2xCLHlCQUFTLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxXQUFXO0FBQzlCLDhCQUFjLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxXQUFXO0FBQ25DLHFCQUFLLEVBQUUsR0FBRzthQUNiLENBQUMsQ0FDTCxDQUFDO1NBQ0w7Ozs7O2VBR2MsMkJBQUc7QUFDZCxnQkFBSSxDQUFDLGFBQWEsRUFBRTtBQUNoQiw2QkFBYSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO0FBQzFDLG9CQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQzthQUM3QztTQUNKOzs7ZUFFZSw0QkFBRztBQUNmLGdCQUFJLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7O0FBRXhDLGdCQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ2YsZ0JBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzlELGdCQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7O0FBRWxDLHlCQUFhLENBQUMsUUFBUSxHQUFHLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDNUMseUJBQWEsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztBQUNoRCx5QkFBYSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLEdBQUcsYUFBYSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO0FBQ2xGLHlCQUFhLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksR0FBRyxVQUFVLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDakYseUJBQWEsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO0FBQzFCLHlCQUFhLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztTQUNwQzs7O2VBRWUsNEJBQUc7QUFDZix5QkFBYSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUM7U0FDN0I7OztXQXBNQyxTQUFTOzs7QUF1TWYsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUM7Ozs7Ozs7OztBQ3pOM0IsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7QUFDM0MsSUFBSSxFQUFFLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQzs7SUFFYixFQUFFO0FBQ08sYUFEVCxFQUFFLENBQ1EsTUFBTSxFQUFFLEdBQUcsRUFBRTs4QkFEdkIsRUFBRTs7QUFFQSxZQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUNmLFlBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDOztBQUVyQixZQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQzs7QUFFN0IsWUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7QUFDM0IsWUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7O0FBRTFCLFlBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO0FBQzVCLFlBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7O0FBRS9CLFlBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO0FBQ3BCLFlBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDOztBQUVoQixZQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztBQUMzQixZQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztBQUM1QixZQUFJLENBQUMsY0FBYyxHQUFHLEdBQUcsQ0FBQztLQUM3Qjs7aUJBbkJDLEVBQUU7Ozs7Ozs7O2VBMEJhLDJCQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUU7O0FBRWxDLGdCQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxRQUFRLENBQUM7U0FDcEM7OztlQUVXLHNCQUFDLEtBQUssRUFBRTtBQUNoQixtQkFBTyxJQUFJLENBQUMsVUFBVSxLQUFLLEtBQUssQ0FBQztTQUNwQzs7O2VBRU0saUJBQUMsS0FBSyxFQUFFO0FBQ1gsZ0JBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1NBQzNCOzs7ZUFFTyxrQkFBQyxLQUFLLEVBQUU7QUFDWixnQkFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQzdCLGdCQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztTQUMxQjs7O2VBRVMsb0JBQUMsS0FBSyxFQUFFOztBQUVkLGdCQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssSUFBSSxDQUFDLG1CQUFtQixJQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssSUFBSSxDQUFDLG1CQUFtQixFQUFFO0FBQzlGLHVCQUFPLElBQUksQ0FBQzthQUNmO0FBQ0QsbUJBQU8sS0FBSyxDQUFDO1NBQ2hCOzs7ZUFFUSxtQkFBQyxLQUFLLEVBQUU7QUFDYixnQkFBSSxJQUFJLENBQUMsVUFBVSxLQUFLLEtBQUssRUFBRTtBQUMzQixvQkFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7YUFDMUIsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUNoQyxvQkFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7YUFDM0I7U0FDSjs7O2VBRWMsMkJBQUc7QUFDZCxnQkFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQztTQUN4RDs7O2VBRW9CLGlDQUFHO0FBQ3BCLGdCQUFJLENBQUMsZUFBZSxHQUFHLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQztTQUNoRDs7O2VBRVcsd0JBQUcsRUFFZDs7O2VBRVcsd0JBQUcsRUFFZDs7Ozs7ZUFHUSxxQkFBRztBQUNSLG1CQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztTQUMzQzs7O2VBRVMsc0JBQUc7QUFDVCxtQkFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7U0FDN0M7OztlQUVLLGtCQUFHO0FBQ0wsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDcEMsZ0JBQUksT0FBTyxDQUFDLEtBQUssR0FBRyxFQUFFLEVBQUU7QUFDcEIsb0JBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDdkMsdUJBQU8sQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7QUFDbEMsdUJBQU8sQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUM7YUFDMUI7U0FDSjs7O2VBRU0sbUJBQUc7QUFDTixnQkFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUNwQyxnQkFBSSxPQUFPLENBQUMsS0FBSyxHQUFHLElBQUksRUFBRTtBQUN0QixvQkFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUN2Qyx1QkFBTyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztBQUNsQyx1QkFBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQzthQUMxQjtTQUNKOzs7ZUFFZ0IsNkJBQUc7QUFDaEIsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7O0FBRXBDLGdCQUFJLElBQUksQ0FBQyxlQUFlLEVBQUU7QUFDdEIsb0JBQUksQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDO0FBQzdCLHVCQUFPLENBQUMsR0FBRyxDQUFDLGlDQUFpQyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDekUsb0JBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDekQsdUJBQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDNUI7U0FDSjs7O2VBRVEscUJBQUc7QUFDUixnQkFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQzs7QUFFcEMsZ0JBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDOztBQUUxRCxnQkFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO0FBQ1osb0JBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQzthQUNqRDtBQUNELG1CQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3pCLG1CQUFPLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDdEQsZ0JBQUksT0FBTyxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUU7QUFDbkIsdUJBQU8sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO2FBQ3JCO1NBQ0o7Ozs7OztlQUlnQyw0Q0FBRztBQUNoQyxnQkFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7QUFDeEMsZ0JBQUksRUFBRSxFQUFFO0FBQ0osdUJBQU8sRUFBRSxDQUFDO2FBQ2IsTUFBTTtBQUNILHVCQUFPLGdCQUFnQixDQUFDLGtCQUFrQixDQUFDO2FBQzlDO1NBQ0o7Ozs7O2VBR3VCLG1DQUFHO0FBQ3ZCLGdCQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQ3BDLGdCQUFJLENBQUMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsRUFDdkMsT0FBTyxJQUFJLENBQUM7O0FBRWhCLGdCQUFJLE1BQU0sR0FBRyxJQUFJLENBQUM7QUFDbEIsZ0JBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO0FBQ3BDLG1CQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLG9CQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssWUFBWSxFQUFFLENBQUMsS0FBSyxFQUM3QixPQUFPLElBQUksQ0FBQztBQUNoQixvQkFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQzs7QUFFckIsb0JBQUksV0FBVyxHQUFJLEtBQUssQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxBQUFDLENBQUM7QUFDMUQsb0JBQUksTUFBTSxLQUFLLElBQUksSUFBSSxXQUFXLEtBQUssTUFBTSxFQUN6QyxPQUFPLElBQUksQ0FBQztBQUNoQixzQkFBTSxHQUFHLFdBQVcsQ0FBQzthQUN4Qjs7O0FBR0QsbUJBQU8sTUFBTSxDQUFDO1NBQ2pCOzs7OztlQUd1QixpQ0FBQyxVQUFVLEVBQUU7QUFDakMsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDcEMsZ0JBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO0FBQ3BDLG1CQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLG9CQUFJLEVBQUUsQ0FBQyxLQUFLLFlBQVksRUFBRSxDQUFDLEtBQUssRUFBRTtBQUM5Qix3QkFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUNyQiwyQkFBTyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDaEUsd0JBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLG9CQUFvQixDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2hFLHdCQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO2lCQUN0QjthQUNKO1NBQ0o7Ozs7OztlQUkwQyxzREFBRztBQUMxQyxnQkFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLGlDQUFpQyxFQUFFLENBQUM7QUFDbEQsZ0JBQUksRUFBRSxFQUFFO0FBQ0osdUJBQU8sRUFBRSxDQUFDO2FBQ2IsTUFBTTtBQUNILHVCQUFPLGdCQUFnQixDQUFDLDRCQUE0QixDQUFDO2FBQ3hEO1NBQ0o7Ozs7O2VBR2dDLDZDQUFHO0FBQ2hDLGdCQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQ3BDLGdCQUFJLENBQUMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsRUFDdkMsT0FBTyxJQUFJLENBQUM7O0FBRWhCLGdCQUFJLElBQUksR0FBRyxJQUFJLENBQUM7QUFDaEIsZ0JBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO0FBQ3BDLG1CQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLG9CQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssWUFBWSxFQUFFLENBQUMsSUFBSSxFQUM1QixPQUFPLElBQUksQ0FBQztBQUNoQixvQkFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUNwQixvQkFBSSxRQUFRLEdBQUksSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLEFBQUMsQ0FBQztBQUNuRCxvQkFBSSxJQUFJLEtBQUssSUFBSSxJQUFJLFFBQVEsS0FBSyxJQUFJLEVBQ2xDLE9BQU8sSUFBSSxDQUFDO0FBQ2hCLG9CQUFJLEdBQUcsUUFBUSxDQUFDO2FBQ25COztBQUVELG1CQUFPLElBQUksQ0FBQztTQUNmOzs7OztlQUdpQywyQ0FBQyxTQUFTLEVBQUU7QUFDMUMsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7O0FBRXBDLGdCQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQztBQUNwQyxtQkFBTyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDZCxvQkFBSSxFQUFFLENBQUMsS0FBSyxZQUFZLEVBQUUsQ0FBQyxJQUFJLEVBQUU7O0FBRTdCLDJCQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7O2lCQUVuRTthQUNKOztBQUFBLFNBRUo7Ozs7O2VBR2lCLDJCQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUU7Ozs7O0FBRzlCLGdCQUFJLENBQUMsaUJBQWlCLEdBQUcsQ0FBQyxDQUFDO0FBQzNCLGdCQUFJLGVBQWUsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDOztBQUU3RSxnQkFBSSxJQUFJLENBQUMsY0FBYyxLQUFLLE1BQU0sRUFBRTtBQUNoQyxvQkFBSSxDQUFDLGlCQUFpQixJQUFJLENBQUMsQ0FBQztBQUM1QiwrQkFBZSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDekUsdUJBQU8sQ0FBQyxHQUFHLENBQUMscUNBQXFDLEdBQUcsTUFBTSxDQUFDLENBQUM7QUFDNUQsdUJBQU87YUFDVjs7QUFFRCxnQkFBSSxDQUFDLGNBQWMsR0FBRyxNQUFNLENBQUM7OztBQUc3QixnQkFBSSxLQUFLLEdBQUcsVUFBVSxDQUFDLFlBQU07O0FBRXpCLG9CQUFJLGVBQWUsS0FBSyxNQUFLLGFBQWEsRUFBRTtBQUN4QywwQkFBSyxhQUFhLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2lCQUNyQyxNQUFNO0FBQ0gsMEJBQUssa0JBQWtCLENBQUMsTUFBTSxFQUFFLE1BQUssaUJBQWlCLEVBQUUsS0FBSyxDQUFDLENBQUM7aUJBQ2xFO0FBQ0Qsc0JBQUssaUJBQWlCLEdBQUcsQ0FBQyxDQUFDO0FBQzNCLHNCQUFLLGNBQWMsR0FBRyxJQUFJLENBQUM7YUFDOUIsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7U0FDM0I7OztlQUVpQiw0QkFBQyxNQUFNLEVBQUUsTUFBTSxFQUFXOzhDQUFOLElBQUk7QUFBSixvQkFBSTs7O0FBQ3RDLGdCQUFJLE1BQU0sS0FBSyxHQUFHLEVBQUU7OztBQUNoQix1QkFBUSxNQUFNLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLE1BQUEsQ0FBbEIsSUFBSSxFQUFrQixJQUFJLENBQUMsR0FBRyxRQUFBLElBQUksQ0FBQyxHQUFHLEVBQUMsWUFBWSxNQUFBLE9BQUksSUFBSSxDQUFDLENBQUU7YUFDeEYsTUFBTSxJQUFJLE1BQU0sS0FBSyxHQUFHLEVBQUU7OztBQUN2Qix1QkFBUSxNQUFNLEtBQUssQ0FBQyxHQUFHLFNBQUEsSUFBSSxDQUFDLEdBQUcsRUFBQyxnQkFBZ0IsTUFBQSxRQUFJLElBQUksQ0FBQyxHQUFHLFNBQUEsSUFBSSxDQUFDLEdBQUcsRUFBQyxXQUFXLE1BQUEsUUFBSSxJQUFJLENBQUMsQ0FBRTthQUM5RixNQUFNLElBQUksTUFBTSxLQUFLLEdBQUcsRUFBRTs7O0FBQ3ZCLHVCQUFRLE1BQU0sS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDLGFBQWEsTUFBQSxDQUFsQixJQUFJLEVBQWtCLElBQUksQ0FBQyxHQUFHLFNBQUEsSUFBSSxDQUFDLEdBQUcsRUFBQyxlQUFlLE1BQUEsUUFBSSxJQUFJLENBQUMsQ0FBRTthQUMzRixNQUFNLElBQUksTUFBTSxLQUFLLEdBQUcsRUFBRTs7O0FBQ3ZCLHVCQUFRLE1BQU0sS0FBSyxDQUFDLEdBQUcsU0FBQSxJQUFJLENBQUMsR0FBRyxFQUFDLGdCQUFnQixNQUFBLFFBQUksSUFBSSxDQUFDLEdBQUcscUJBQUEsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUMsZUFBZSxNQUFBLG9CQUFJLElBQUksQ0FBQyxDQUFFO2FBQy9HLE1BQU0sSUFBSSxNQUFNLEtBQUssRUFBRSxFQUFFOztBQUN0Qix1QkFBUSxNQUFNLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLE1BQUEsQ0FBbEIsSUFBSSxFQUFrQixJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxNQUFBLENBQWIsSUFBSSxFQUFhLElBQUksQ0FBQyxDQUFFO2FBQ2hGLE1BQU07QUFDSCx1QkFBTyxZQUFNO0FBQ1QsMkJBQU8sQ0FBQyxHQUFHLENBQUMsbURBQW1ELEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDO2lCQUNuRixDQUFDO2FBQ0w7U0FDSjs7O2VBRWdCLDJCQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDOUIsZ0JBQUksTUFBTSxLQUFLLEdBQUcsRUFBRTtBQUNoQix1QkFBUSxNQUFNLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUU7YUFDdEUsTUFBTSxJQUFJLE1BQU0sS0FBSyxHQUFHLEVBQUU7QUFDdkIsdUJBQVEsTUFBTSxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFFO2FBQzVFLE1BQU0sSUFBSSxNQUFNLEtBQUssR0FBRyxFQUFFO0FBQ3ZCLHVCQUFRLE1BQU0sS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBRTthQUN6RSxNQUFNLElBQUksTUFBTSxLQUFLLEdBQUcsRUFBRTtBQUN2Qix1QkFBUSxNQUFNLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFFO2FBQzdGLE1BQU0sSUFBSSxNQUFNLEtBQUssRUFBRSxFQUFFOztBQUN0Qix1QkFBUSxNQUFNLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBRTthQUM5RCxNQUFNO0FBQ0gsdUJBQU8sWUFBTTtBQUNULDJCQUFPLENBQUMsR0FBRyxDQUFDLG1EQUFtRCxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQztpQkFDbkYsQ0FBQzthQUNMO1NBQ0o7Ozs7O2VBR08sa0JBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRTtBQUNwQixnQkFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7QUFDZix1QkFBTyxJQUFJLENBQUM7YUFDZjs7QUFFRCxtQkFBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLENBQUMsQ0FBQztBQUN6QyxnQkFBSSxLQUFLLFlBQVksRUFBRSxDQUFDLEtBQUssRUFBRTs7QUFDM0Isb0JBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUM7QUFDdEIsdUJBQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLENBQUM7QUFDdkMsb0JBQUksSUFBSSxZQUFZLEVBQUUsQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxNQUFNLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssT0FBTyxDQUFBLEFBQUMsRUFBRTtBQUN4Ryx3QkFBSSxhQUFhLEdBQUcsZUFBZSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQ3ZELHdCQUFJLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUNoRCx3QkFBSSxJQUFJLEVBQUU7QUFDTiw2QkFBSyxHQUFHLElBQUksQ0FBQztxQkFDaEI7aUJBQ0o7YUFDSjtBQUNELGdCQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDN0Q7Ozs7Ozs7ZUFNWSx1QkFBQyxLQUFLLEVBQUUsTUFBTSxFQUFFOztBQUV6QixnQkFBSSxNQUFNLEtBQUssRUFBRSxFQUFFO0FBQ2Ysb0JBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUM7YUFDaEMsTUFBTTtBQUNILG9CQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsR0FBRyxNQUFNLEdBQUcsS0FBSyxDQUFDLENBQUM7YUFDL0M7U0FDSjs7O2VBRVUscUJBQUMsR0FBRyxFQUFFOzs7Ozs7QUFJYixnQkFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO0FBQzFDLHVCQUFPO2FBQ1Y7O0FBRUQsZ0JBQUksQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDOztBQUVuQixhQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7O0FBRXRCLHNCQUFVLENBQUUsWUFBTTtBQUNkLGlCQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxZQUFNO0FBQzlCLDJCQUFLLE9BQU8sR0FBRyxJQUFJLENBQUM7O2lCQUV2QixDQUFDLENBQUM7YUFDTixFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ1o7OztXQXJWQyxFQUFFOzs7QUF5VlIsTUFBTSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7Ozs7Ozs7Ozs7QUMzVnBCLElBQU0sS0FBSyxHQUFHO0FBQ1YsT0FBRyxFQUFFLGVBQU07QUFDUCxlQUFPLElBQUksT0FBTyxDQUFDLFVBQUMsT0FBTyxFQUFFLE1BQU0sRUFBSyxFQUFHLENBQUMsQ0FBQztLQUNoRDtDQUNKLENBQUM7O0FBRUYsSUFBTSxrQkFBa0IsR0FBRztBQUN2QixRQUFJLEVBQUUsZUFBZTtBQUNyQixhQUFTLEVBQUUscUJBQXFCO0FBQ2hDLGNBQVUsRUFBRSxzQkFBc0I7QUFDbEMsb0JBQWdCLEVBQUUsNEJBQTRCO0FBQzlDLGlCQUFhLEVBQUUsbUJBQW1CO0FBQ2xDLFVBQU0sRUFBRSxxQkFBcUI7QUFDN0IsVUFBTSxFQUFFLGdCQUFnQjtBQUN4QixVQUFNLEVBQUUsc0JBQXNCO0FBQzlCLFVBQU0sRUFBRSxxQkFBcUI7QUFDN0IsYUFBUyxFQUFFLGFBQWE7QUFDeEIsZ0JBQVksRUFBRSxlQUFlO0FBQzdCLGdCQUFZLEVBQUUsZUFBZTtBQUM3QixvQkFBZ0IsRUFBRSxvQkFBb0I7QUFDdEMsa0JBQWMsRUFBRSx5QkFBeUI7QUFDekMsa0JBQWMsRUFBRSxnQ0FBZ0M7QUFDaEQsa0JBQWMsRUFBRSx1Q0FBdUM7Q0FDMUQsQ0FBQzs7QUFFRixJQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsRUFBRSxDQUFDOztJQUVmLFFBQVE7QUFDQyxhQURULFFBQVEsQ0FDRSxNQUFNLEVBQUUsR0FBRyxFQUFFOzhCQUR2QixRQUFROztBQUVOLFlBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO0FBQ3RCLFlBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDO0FBQ2hCLFlBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO0FBQ3RCLFlBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7S0FDbEM7O2lCQU5DLFFBQVE7O2VBUU4sY0FBQyxVQUFVLEVBQUU7QUFDYixnQkFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDbEMsZ0JBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztTQUMxQjs7Ozs7ZUFHTSxpQkFBQyxVQUFVLEVBQUU7QUFDaEIsZ0JBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ2xDLGdCQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7U0FDbkI7Ozs7O2FBR2tCLFlBQUc7QUFDbEIsZ0JBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7QUFDeEIsb0JBQUksQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDM0Q7QUFDRCxtQkFBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7U0FDaEM7Ozs7OztlQUlPLG9CQUFHLEVBa0RWOzs7Ozs7O2VBU1csc0JBQUMsQ0FBQyxFQUFFOztBQUVaLGdCQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFO0FBQzFCLHVCQUFPO2FBQ1Y7O0FBRUQsZ0JBQUksVUFBVSxHQUFHLElBQUksQ0FBQztBQUN0QixnQkFBSSxpQkFBaUIsR0FBRyxJQUFJLENBQUM7O0FBRTdCLGdCQUFJLENBQUMsQ0FBQyxZQUFZLEtBQUssTUFBTSxFQUFFOzs7QUFHM0IsMEJBQVUsR0FBRyxRQUFRLENBQUM7QUFDdEIsaUNBQWlCLEdBQUcsNEJBQTRCLENBQUM7YUFDcEQsTUFBTSxJQUFJLENBQUMsQ0FBQyxZQUFZLEtBQUssUUFBUSxFQUFFOzs7QUFHcEMsMEJBQVUsR0FBRyxRQUFRLENBQUM7YUFDekIsTUFBTSxJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQUssRUFBRSxDQUFDLFlBQVksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLFVBQVUsRUFBRSxHQUFHLENBQUMsRUFBRTs7OztBQUloRywwQkFBVSxHQUFHLFFBQVEsQ0FBQzthQUN6QixNQUFNLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxFQUFFLENBQUMsWUFBWSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsVUFBVSxFQUFFLEdBQUcsQ0FBQyxFQUFFOzs7QUFHaEcsMEJBQVUsR0FBRyxRQUFRLENBQUM7YUFDekIsTUFBTSxJQUFJLENBQUMsQ0FBQyxZQUFZLEtBQUssZUFBZSxFQUFFOzs7Ozs7Ozs7Ozs7QUFZM0Msb0JBQUksQUFBQyxDQUFDLENBQUMsUUFBUSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxLQUFLLEdBQUcsSUFDekMsQ0FBQyxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsS0FBSyxHQUFHLEFBQUMsRUFBRTtBQUM3Qyw4QkFBVSxHQUFHLFFBQVEsQ0FBQztpQkFDekIsTUFBTSxJQUFJLEFBQUMsQ0FBQyxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsS0FBSyxHQUFHLElBQ2hELENBQUMsQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxRQUFRLEtBQUssR0FBRyxBQUFDLEVBQUU7QUFDN0MsOEJBQVUsR0FBRyxRQUFRLENBQUM7aUJBQ3pCO2FBQ0osTUFBTSxJQUFJLENBQUMsQ0FBQyxZQUFZLEtBQUssVUFBVSxFQUFFOzs7QUFHdEMsMEJBQVUsR0FBRyxRQUFRLENBQUM7YUFDekIsTUFBTSxJQUFJLENBQUMsQ0FBQyxZQUFZLEtBQUssT0FBTyxFQUFFOzs7Ozs7OztBQVFuQywwQkFBVSxHQUFHLFFBQVEsQ0FBQzthQUN6QixNQUFNLElBQUksQ0FBQyxDQUFDLFlBQVksS0FBSyxlQUFlLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxFQUFFLENBQUMsWUFBWSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFOzs7OztBQUt0SSwwQkFBVSxHQUFHLFdBQVcsQ0FBQzthQUM1QixNQUFNLElBQUksQ0FBQyxDQUFDLFlBQVksS0FBSyxNQUFNLEVBQUU7OztBQUdsQywwQkFBVSxHQUFHLGNBQWMsQ0FBQztBQUM1QixpQ0FBaUIsR0FBRyxlQUFlLENBQUM7YUFDdkMsTUFBTSxJQUFJLENBQUMsQ0FBQyxZQUFZLEtBQUssZUFBZSxJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQUssRUFBRSxDQUFDLFlBQVksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRTs7O0FBR3RJLDBCQUFVLEdBQUcsY0FBYyxDQUFDO2FBQy9CLE1BQU0sSUFBSSxDQUFDLENBQUMsWUFBWSxLQUFLLGVBQWUsSUFBSSxDQUFDLENBQUMsTUFBTSxLQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsS0FBSyxDQUFDLEVBQUU7OztBQUd2SSwwQkFBVSxHQUFHLGdCQUFnQixDQUFDO2FBQ2pDLE1BQU0sSUFBSSxDQUFDLENBQUMsWUFBWSxLQUFLLGVBQWUsSUFBSSxDQUFDLENBQUMsTUFBTSxLQUFLLEVBQUUsQ0FBQyxZQUFZLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsS0FBSyxDQUFDLEVBQUU7OztBQUd2SSwwQkFBVSxHQUFHLGdCQUFnQixDQUFDO2FBQ2pDLE1BQU0sSUFBSSxDQUFDLENBQUMsWUFBWSxLQUFLLEtBQUssSUFBSSxDQUFDLENBQUMsWUFBWSxLQUFLLE9BQU8sSUFBSSxDQUFDLENBQUMsWUFBWSxLQUFLLFFBQVEsRUFBRTs7Ozs7Ozs7QUFROUYsMEJBQVUsR0FBRyxNQUFNLENBQUM7YUFDdkIsTUFBTSxJQUFJLENBQUMsQ0FBQyxZQUFZLEtBQUssT0FBTyxJQUFJLENBQUMsQ0FBQyxZQUFZLEtBQUssVUFBVSxFQUFFOztBQUVwRSwwQkFBVSxHQUFHLElBQUksQ0FBQzthQUNyQixNQUFNLElBQUksQ0FBQyxDQUFDLFlBQVksS0FBSyxhQUFhLEVBQUU7O0FBRXpDLDBCQUFVLEdBQUcsa0JBQWtCLENBQUM7YUFDbkMsTUFBTSxJQUFJLENBQUMsQ0FBQyxZQUFZLEtBQUssV0FBVyxJQUFJLENBQUMsQ0FBQyxZQUFZLEtBQUssV0FBVyxFQUFFOztBQUV6RSwwQkFBVSxHQUFHLE1BQU0sQ0FBQzthQUN2QixNQUFNLElBQUksQ0FBQyxDQUFDLFlBQVksS0FBSyxjQUFjLElBQUksQ0FBQyxDQUFDLFlBQVksS0FBSyxjQUFjLEVBQUU7QUFDL0UsMEJBQVUsR0FBRyxXQUFXLENBQUM7QUFDekIsb0JBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7YUFDdkIsTUFBTSxJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQUssRUFBRSxDQUFDLFlBQVksQ0FBQyxXQUFXLEVBQUU7QUFDakQsdUJBQU8sQ0FBQyxHQUFHLENBQUMsNkJBQTZCLEdBQUcsQ0FBQyxDQUFDLFdBQVcsR0FDckQsWUFBWSxHQUFHLENBQUMsQ0FBQyxNQUFNLEdBQ3ZCLGNBQWMsR0FBRyxDQUFDLENBQUMsUUFBUSxHQUMzQixlQUFlLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsSUFBSSxHQUM1QyxjQUFjLEdBQUcsQ0FBQyxDQUFDLFFBQVEsR0FDM0IsZUFBZSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLElBQUksR0FDNUMsa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLFlBQVksQ0FDdEMsQ0FBQzthQUNMOztBQUVELGdCQUFJLFVBQVUsRUFBRTtBQUNaLG9CQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyx5QkFBeUIsRUFBRSxDQUFDOztBQUVoRCxvQkFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQzthQUN6QjtTQUNKOzs7OztlQUdhLHdCQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFO0FBQzVCLG1CQUFPLEdBQUcsS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEtBQUssS0FBSyxDQUFDO1NBQzFFOzs7V0FwTkMsUUFBUTs7O0FBd05kLE1BQU0sQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BQMUIsSUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLDRCQUE0QixDQUFDLENBQUM7QUFDekQsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDN0MsSUFBTSxTQUFTLEdBQUcsQ0FBQyxDQUFDO0FBQ3BCLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQzs7SUFFMUIsTUFBTTtBQUVHLGFBRlQsTUFBTSxDQUVJLE9BQU8sRUFBRTs4QkFGbkIsTUFBTTs7QUFHSixZQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUN2QixZQUFJLFFBQVEsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQztBQUNwQyxZQUFJLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUM7QUFDaEMsWUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUM7QUFDdkMsWUFBSSxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsRUFBRSxDQUFDO0FBQ3pCLFlBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQztBQUM5QixZQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUM7QUFDckMsWUFBSSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDO0FBQzNCLFlBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQztBQUNoQyxZQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUM7QUFDcEMsWUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDO0FBQ3BDLFlBQUksQ0FBQyxhQUFhLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQztBQUM1QyxZQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztBQUMxQixZQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQzs7QUFFckIsWUFBSSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUM7QUFDN0IsWUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQzs7QUFFL0IsWUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7Ozs7O0FBS3ZCLFlBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQzs7QUFFckMsWUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsRUFRbEI7O0FBRUQsWUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ2IsZ0JBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDbkIsTUFBTTtBQUNILGdCQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQzdCOztBQUVELFlBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztBQUNwQixZQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztBQUN4QixZQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7S0FFMUI7O2lCQWhEQyxNQUFNOztlQWtEYyxrQ0FBRztBQUNyQixnQkFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO0FBQ2Qsb0JBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO2FBQzVCO1NBQ0o7OztlQUVlLDRCQUFHOztBQUVmLGdCQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztBQUMxQixnQkFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1NBQ3hDOzs7ZUFFbUIsOEJBQUMsQ0FBQyxFQUFFO0FBQ3BCLGdCQUFJLENBQUMsQ0FBQyxLQUFLLEtBQUssRUFBRSxFQUFFO0FBQ2hCLG9CQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQzthQUMzQjtTQUNKOzs7ZUFFSSxpQkFBRztBQUNKLGtCQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDbEI7Ozs7OztlQUlhLDBCQUFHOzs7QUFDYixnQkFBSSxhQUFhLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztBQUM1QiwyQkFBVyxFQUFFLGtDQUFrQztBQUMvQyx3QkFBUSxFQUFFLFFBQVE7QUFDbEIsMEJBQVUsRUFBRSxJQUFJLENBQUMsb0JBQW9CO0FBQ3JDLDJCQUFXLEVBQUUsb0JBQW9CO0FBQ2pDLHVCQUFPLEVBQUU7QUFDTCw4QkFBVSxFQUFFLHNCQUFNO0FBQ2QscUNBQVk7cUJBQ2Y7QUFDRCx1QkFBRyxFQUFFLGVBQU07QUFDUCwrQkFBTyxNQUFLLEdBQUcsQ0FBQztxQkFDbkI7QUFDRCwrQkFBVyxFQUFFLHVCQUFNO0FBQ2YsK0JBQU8sTUFBSyxXQUFXLENBQUM7cUJBQzNCO2lCQUNKO2FBQ0osQ0FBQyxDQUFDOztBQUVILHlCQUFhLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFNLEVBQUcsQ0FBQyxDQUFDO1NBQ3hDOzs7ZUFFZSwwQkFBQyxDQUFDLEVBQUU7O0FBRWhCLGdCQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztBQUNwQixnQkFBSSxDQUFDLEtBQUssVUFBVSxDQUFDLFdBQVcsRUFBRTtBQUM5QixxQkFBSyxDQUFDLG9FQUFvRSxDQUFDLENBQUM7YUFDL0UsTUFBTSxJQUFJLENBQUMsS0FBSyxVQUFVLENBQUMsWUFBWSxFQUFFO0FBQ3RDLG9CQUFJLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQzVDLG9CQUFJLEVBQUUsR0FBRyxFQUFFLENBQUM7QUFDWixvQkFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFDaEMsc0JBQUUsR0FBRyxPQUFPLENBQUM7aUJBQ2hCLE1BQU0sSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQzNCLHNCQUFFLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7aUJBQ25DOzs7QUFHRCxvQkFBSSxDQUFDLFVBQVUsR0FBRyxlQUFlLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUM7YUFDdkQ7OztBQUFBLFNBR0o7Ozs7OztlQUlXLHdCQUFHOzs7Ozs7QUFNWCxnQkFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUUsRUFBRTs7Ozs7Ozs7Ozs7QUFXekIsaUJBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEtBQUssQ0FDekIsWUFBTTtBQUNGLHFCQUFDLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUM7aUJBQ3ZELEVBQ0QsWUFBTTtBQUNGLHFCQUFDLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7aUJBQzFELENBQ0osQ0FBQzthQUNMO1NBQ0o7OztlQUVlLDRCQUFHOztBQUVmLGdCQUFJOztBQUVBLHFCQUFLLENBQUMsZ0NBQWdDLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDckQsdUJBQU8sQ0FBQyxjQUFjLEdBQUcsWUFBWSxDQUFDO2FBQ3pDLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFFWDs7OztBQUlELGdCQUFJLFdBQVcsR0FBRyxTQUFkLFdBQVcsR0FBUztBQUNwQix1QkFBTywwRUFBMEUsR0FDN0UsbUZBQW1GLENBQUM7YUFDM0YsQ0FBQTs7Ozs7O0FBTUQsYUFBQyxDQUFDLGlCQUFpQixDQUFDLENBQUMsS0FBSyxDQUFFLFlBQU07QUFDOUIsaUJBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsY0FBYyxFQUFFLFdBQVcsQ0FBQyxDQUFDO2FBQ2pELENBQUMsQ0FBQztTQUNOOzs7ZUFFYywyQkFBRztBQUNkLGFBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLFVBQUMsS0FBSyxFQUFLO0FBQ2pDLG9CQUFJLEtBQUssQ0FBQyxPQUFPLEtBQUssU0FBUyxFQUFFO0FBQzdCLHdCQUFJLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRTs7QUFFaEMsNkJBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUN2Qiw2QkFBSyxDQUFDLGVBQWUsRUFBRSxDQUFDO3FCQUMzQjtpQkFDSjthQUNKLENBQUMsQ0FBQztTQUNOOzs7V0F2TEMsTUFBTTs7O0FBMkxaLE1BQU0sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQy9MbEIsU0FBUztBQUNBLGFBRFQsU0FBUyxDQUNDLE1BQU0sRUFBRSxHQUFHLEVBQUU7Ozs4QkFEdkIsU0FBUzs7QUFFUCxZQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQztBQUNoQixZQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUNqQyxZQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztBQUNuQixZQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztBQUNuQixZQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDOzs7QUFHN0IsWUFBSSxDQUFDLE9BQU8sR0FBRzs7QUFFWCxtQkFBTyxFQUFFLGlCQUFDLENBQUMsRUFBRSxDQUFDLEVBQUs7O0FBQ2Ysb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQUssWUFBWSxFQUFFLENBQUMsQ0FBQztBQUM5RCxzQkFBSyxRQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNoRSxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztBQUNyQyxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztBQUNyQyxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQzthQUN4Qzs7QUFFRCx1QkFBVyxFQUFFLHFCQUFDLENBQUMsRUFBRSxDQUFDLEVBQUs7O0FBQ25CLG9CQUFJLE1BQU0sR0FBRyxNQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDOUQsc0JBQUssUUFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDaEUsc0JBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDekMsc0JBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDekMsc0JBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7YUFDNUM7O0FBRUQsK0JBQW1CLEVBQUUsNkJBQUMsQ0FBQyxFQUFFLENBQUMsRUFBSzs7QUFDM0Isb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQUssWUFBWSxFQUFFLENBQUMsQ0FBQztBQUM5RCxzQkFBSyxRQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNoRSxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztBQUNyQyxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztBQUNyQyxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQzs7QUFFckMsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxNQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDcEUsc0JBQUssUUFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDaEUsc0JBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDckMsc0JBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDckMsc0JBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7YUFDeEM7O0FBRUQsNEJBQWdCLEVBQUUsMEJBQUMsQ0FBQyxFQUFFLENBQUMsRUFBSzs7QUFDeEIsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxNQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDcEUsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxNQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDcEUsc0JBQUssUUFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDaEUsc0JBQUssUUFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDaEUsb0JBQUksT0FBTyxHQUFHLE1BQUssSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDMUUsb0JBQUksT0FBTyxHQUFHLE1BQUssSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDekUsc0JBQUssUUFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQ2hGLHNCQUFLLFFBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQzthQUNuRjs7QUFFRCxvQkFBUSxFQUFFLGtCQUFDLENBQUMsRUFBRSxDQUFDLEVBQUs7O0FBQ2hCLG9CQUFJLE1BQU0sR0FBRyxNQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDOUQsc0JBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDdkMsc0JBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDdkMsc0JBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7YUFDMUM7O0FBRUQsbUJBQU8sRUFBRSxpQkFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFLOztBQUNmLG9CQUFJLE1BQU0sR0FBRyxNQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUNyRCxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxNQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7YUFDdEQ7O0FBRUQsNEJBQWdCLEVBQUUsMEJBQUMsQ0FBQyxFQUFFLENBQUMsRUFBSzs7QUFDeEIsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQUssWUFBWSxFQUFFLENBQUMsQ0FBQztBQUM5RCxvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNwRCxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN2QyxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN2QyxvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNwRCxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN2QyxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQzthQUMxQzs7QUFFRCxtQkFBTyxFQUFFLGlCQUFDLENBQUMsRUFBRSxDQUFDLEVBQUs7O0FBQ2Ysb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQUssWUFBWSxFQUFFLENBQUMsQ0FBQztBQUM5RCxvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLE1BQUssWUFBWSxFQUFFLENBQUMsQ0FBQztBQUNwRSxvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMscUJBQXFCLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxlQUFlLENBQUMsQ0FBQztBQUM5RSxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN2QyxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQzthQUMxQzs7QUFFRCxtQkFBTyxFQUFFLGlCQUFDLENBQUMsRUFBRSxDQUFDLEVBQUs7O0FBQ2Ysb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxNQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDcEUsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsOEJBQThCLEdBQUcsTUFBSyxZQUFZLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUN2RyxvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSw4QkFBOEIsR0FBRyxNQUFLLFlBQVksRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZHLG9CQUFJLE1BQU0sR0FBRyxNQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLDhCQUE4QixHQUFHLE1BQUssWUFBWSxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDdkcsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQUssWUFBWSxFQUFFLENBQUMsQ0FBQztBQUM5RCxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztBQUN0QyxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztBQUN0QyxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztBQUN0QyxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQzthQUN6Qzs7QUFFRCx3QkFBWSxFQUFFLHNCQUFDLENBQUMsRUFBRSxDQUFDLEVBQUs7O0FBQ3BCLG9CQUFJLFFBQVEsR0FBRyxNQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxlQUFlLENBQUMsQ0FBQztBQUM1RCxvQkFBSSxRQUFRLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxlQUFlLENBQUMsQ0FBQztBQUN2RSxvQkFBSSxRQUFRLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxlQUFlLENBQUMsQ0FBQztBQUN2RSxvQkFBSSxLQUFLLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxNQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDekUsc0JBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDdkMsc0JBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDdkMsc0JBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7O0FBRXZDLG9CQUFJLE1BQU0sR0FBRyxNQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQzlELG9CQUFJLE1BQU0sR0FBRyxNQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQzlELHNCQUFLLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQUssWUFBWSxFQUFFLENBQUMsQ0FBQzthQUN4RTs7QUFFRCxxQkFBUyxFQUFFLG1CQUFDLENBQUMsRUFBRSxDQUFDLEVBQUs7O0FBQ2pCLG9CQUFJLE1BQU0sR0FBRyxNQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDOUQsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxNQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDcEUsc0JBQUssSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7YUFDNUQ7O0FBRUQsdUJBQVcsRUFBRSxxQkFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFLOztBQUNuQixvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLE1BQUssWUFBWSxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDL0Usb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDcEQsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDcEQsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDcEQsc0JBQUssUUFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDbkUsc0JBQUssUUFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDbEUsc0JBQUssUUFBUSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDbEUsc0JBQUssSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDakUsc0JBQUssSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDakUsc0JBQUssSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsZUFBZSxDQUFDLENBQUM7YUFDcEU7O0FBRUQseUJBQWEsRUFBRSx1QkFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFLOztBQUNyQixvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBSyxZQUFZLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN2RSxvQkFBSSxPQUFPLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNyRCxvQkFBSSxPQUFPLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNyRCxvQkFBSSxPQUFPLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNyRCxvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLE1BQUssWUFBWSxFQUFFLENBQUMsQ0FBQztBQUNwRSxvQkFBSSxPQUFPLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNyRCxvQkFBSSxPQUFPLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNyRCxvQkFBSSxPQUFPLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNyRCxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztBQUN0QyxzQkFBSyxJQUFJLENBQUMscUJBQXFCLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxlQUFlLENBQUMsQ0FBQztBQUNuRSxzQkFBSyxJQUFJLENBQUMscUJBQXFCLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxlQUFlLENBQUMsQ0FBQztBQUNuRSxzQkFBSyxJQUFJLENBQUMscUJBQXFCLENBQUMsT0FB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QixtQkFBUSxDQUFDLEdBQUcsS0FBSyxHQUFHLEVBQUUsQ0FBRTtTQUMzQjs7Ozs7ZUFHZSxtQkFBQyxFQUFFLEVBQUU7QUFDakIsZ0JBQUksRUFBRSxJQUFLLE9BQVEsRUFBRSxBQUFDLEtBQUssVUFBVSxBQUFDLEVBQUU7QUFDcEMsa0JBQUUsRUFBRSxDQUFDO2FBQ1I7U0FDSjs7Ozs7ZUFHbUIseUJBQUc7QUFDbkIsbUJBQVEsQUFBQyxjQUFjLElBQUksTUFBTSxJQUFNLFNBQVMsQ0FBQyxjQUFjLEdBQUcsQ0FBQyxBQUFDLElBQUssU0FBUyxDQUFDLGdCQUFnQixHQUFHLENBQUMsQUFBQyxDQUFFO1NBQzdHOzs7V0EvQkMsTUFBTTs7O0FBbUNaLE1BQU0sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDOzs7QUNuQ3hCO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwicmVxdWlyZSgnYmFiZWwvcG9seWZpbGwnKTtcclxud2luZG93LnJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XHJcbndpbmRvdy5fID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbndpbmRvdy5Qcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcclxucmVxdWlyZSgnY29yZS1qcycpO1xyXG53aW5kb3cuJCA9IHdpbmRvdy5qUXVlcnkgPSByZXF1aXJlKCdqcXVlcnknKTtcclxucmVxdWlyZSgnanF1ZXJ5LXVpJyk7XHJcbnJlcXVpcmUoJ2Jvb3RzdHJhcCcpO1xyXG53aW5kb3cuRmlyZWJhc2UgPSByZXF1aXJlKCdmaXJlYmFzZScpO1xyXG53aW5kb3cuSHVtYW5pemUgPSByZXF1aXJlKCdodW1hbml6ZS1wbHVzJyk7XHJcbndpbmRvdy5tb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcclxud2luZG93LlVSSSA9IHJlcXVpcmUoJ1VSSWpzJyk7XHJcbndpbmRvdy5sb2NhbGZvcmFnZSA9IHJlcXVpcmUoJ2xvY2FsZm9yYWdlJyk7XHJcblxyXG5yZXF1aXJlKCcuL2pzL2ludGVncmF0aW9ucy9hdXRoMCcpO1xyXG5yZXF1aXJlKCcuL2pzL2ludGVncmF0aW9ucy9nb29nbGVhbmFseXRpY3MnKTtcclxucmVxdWlyZSgnLi9qcy9pbnRlZ3JhdGlvbnMvbmV3cmVsaWMnKTtcclxucmVxdWlyZSgnLi9qcy9pbnRlZ3JhdGlvbnMvcmF5Z3VuJyk7XHJcbnJlcXVpcmUoJy4vanMvaW50ZWdyYXRpb25zL3VzZXJzbmFwJyk7XHJcblxyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS1hY3Rpb25zLnRhZycpO1xyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS1jb250YWluZXIudGFnJyk7XHJcbnJlcXVpcmUoJy4vdGFncy9wYWdlLWNvbnRlbnQudGFnJyk7XHJcbnJlcXVpcmUoJy4vdGFncy9wYWdlLWZvb3Rlci50YWcnKTtcclxucmVxdWlyZSgnLi90YWdzL3BhZ2UtaGVhZGVyLnRhZycpO1xyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS1sb2dvLnRhZycpO1xyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS1zZWFyY2gudGFnJyk7XHJcbnJlcXVpcmUoJy4vdGFncy9wYWdlLXNpZGViYXIudGFnJyk7XHJcbnJlcXVpcmUoJy4vdGFncy9wYWdlLXRvcG1lbnUudGFnJyk7XHJcbnJlcXVpcmUoJy4vdGFncy9wYWdlLWJvZHkudGFnJyk7XHJcblxyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9lZGl0b3IuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvdXNlci5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9lZGl0b3Jfb3B0aW9ucy5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9hbmFseXRpY3MuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvYXR0YWNobWVudHMuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvYXV0b3NhdmUuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvZ2VuZXJhdG9yLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL2xheW91dHMuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvbWFwLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL3BlcnNwZWN0aXZlcy5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9wcmVzZW50ZXIuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvdGVtcGxhdGVzLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL3VpLmpzJyk7XHJcblxyXG52YXIgbW0gPSByZXF1aXJlKCcuL01ldGFNYXAnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbmV3IG1tKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qXHJcbiogIENvcHlyaWdodCAoQykgMTk5OC0yMDE1IGJ5IE5vcnRod29vZHMgU29mdHdhcmUgQ29ycG9yYXRpb24uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiovXHJcblxyXG4vLyBBIGN1c3RvbSBUb29sIGZvciBtb3ZpbmcgYSBsYWJlbCBvbiBhIE5vZGVcclxuXHJcbi8qKlxyXG4qIEBjb25zdHJ1Y3RvclxyXG4qIEBleHRlbmRzIFRvb2xcclxuKiBAY2xhc3NcclxuKiBUaGlzIHRvb2wgb25seSB3b3JrcyB3aGVuIHRoZSBOb2RlIGhhcyBhIGxhYmVsIChhbnkgR3JhcGhPYmplY3QpIG1hcmtlZCB3aXRoXHJcbiogeyBfaXNOb2RlTGFiZWw6IHRydWUgfSB0aGF0IGlzIHBvc2l0aW9uZWQgaW4gYSBTcG90IFBhbmVsLlxyXG4qIEl0IHdvcmtzIGJ5IG1vZGlmeWluZyB0aGF0IGxhYmVsJ3MgR3JhcGhPYmplY3QuYWxpZ25tZW50IHByb3BlcnR5IHRvIGhhdmUgYW5cclxuKiBvZmZzZXQgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBwYW5lbC5cclxuKi9cclxuZnVuY3Rpb24gTm9kZUxhYmVsRHJhZ2dpbmdUb29sKCkge1xyXG4gIGdvLlRvb2wuY2FsbCh0aGlzKTtcclxuICB0aGlzLm5hbWUgPSBcIk5vZGVMYWJlbERyYWdnaW5nXCI7XHJcblxyXG4gIC8qKiBAdHlwZSB7R3JhcGhPYmplY3R9ICovXHJcbiAgdGhpcy5sYWJlbCA9IG51bGw7XHJcbiAgLyoqIEB0eXBlIHtQb2ludH0gKi9cclxuICB0aGlzLl9vcmlnaW5hbEFsaWdubWVudCA9IG51bGw7XHJcbiAgLyoqIEB0eXBlIHtQb2ludH0gKi9cclxuICB0aGlzLl9vcmlnaW5hbENlbnRlciA9IG51bGw7XHJcbn1cclxuZ28uRGlhZ3JhbS5pbmhlcml0KE5vZGVMYWJlbERyYWdnaW5nVG9vbCwgZ28uVG9vbCk7XHJcblxyXG4vKipcclxuKiBUaGlzIHRvb2wgY2FuIG9ubHkgc3RhcnQgaWYgdGhlIG1vdXNlIGhhcyBtb3ZlZCBlbm91Z2ggc28gdGhhdCBpdCBpcyBub3QgYSBjbGljayxcclxuKiBhbmQgaWYgdGhlIG1vdXNlIGRvd24gcG9pbnQgaXMgb24gYSBHcmFwaE9iamVjdCBcImxhYmVsXCIgaW4gYSBTcG90IFBhbmVsLFxyXG4qIGFzIGRldGVybWluZWQgYnkgZmluZExhYmVsKCkuXHJcbiogQHRoaXMge05vZGVMYWJlbERyYWdnaW5nVG9vbH1cclxuKiBAcmV0dXJuIHtib29sZWFufVxyXG4qL1xyXG5Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wucHJvdG90eXBlLmNhblN0YXJ0ID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKCFnby5Ub29sLnByb3RvdHlwZS5jYW5TdGFydC5jYWxsKHRoaXMpKSByZXR1cm4gZmFsc2U7XHJcbiAgdmFyIGRpYWdyYW0gPSB0aGlzLmRpYWdyYW07XHJcbiAgaWYgKGRpYWdyYW0gPT09IG51bGwpIHJldHVybiBmYWxzZTtcclxuICAvLyByZXF1aXJlIGxlZnQgYnV0dG9uICYgdGhhdCBpdCBoYXMgbW92ZWQgZmFyIGVub3VnaCBhd2F5IGZyb20gdGhlIG1vdXNlIGRvd24gcG9pbnQsIHNvIGl0IGlzbid0IGEgY2xpY2tcclxuICB2YXIgZSA9IGRpYWdyYW0ubGFzdElucHV0O1xyXG4gIGlmICghZS5sZWZ0KSByZXR1cm4gZmFsc2U7XHJcbiAgaWYgKCF0aGlzLmlzQmV5b25kRHJhZ1NpemUoKSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICByZXR1cm4gdGhpcy5maW5kTGFiZWwoKSAhPT0gbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiogRnJvbSB0aGUgR3JhcGhPYmplY3QgYXQgdGhlIG1vdXNlIHBvaW50LCBzZWFyY2ggdXAgdGhlIHZpc3VhbCB0cmVlIHVudGlsIHdlIGdldCB0b1xyXG4qIGFuIG9iamVjdCB0aGF0IGhhcyB0aGUgXCJfaXNOb2RlTGFiZWxcIiBwcm9wZXJ0eSBzZXQgdG8gdHJ1ZSwgdGhhdCBpcyBpbiBhIFNwb3QgUGFuZWwsXHJcbiogYW5kIHRoYXQgaXMgbm90IHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoYXQgUGFuZWwgKGkuZS4gbm90IHRoZSBtYWluIGVsZW1lbnQgb2YgdGhlIHBhbmVsKS5cclxuKiBAdGhpcyB7Tm9kZUxhYmVsRHJhZ2dpbmdUb29sfVxyXG4qIEByZXR1cm4ge0dyYXBoT2JqZWN0fSBUaGlzIHJldHVybnMgbnVsbCBpZiBubyBzdWNoIGxhYmVsIGlzIGF0IHRoZSBtb3VzZSBkb3duIHBvaW50LlxyXG4qL1xyXG5Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wucHJvdG90eXBlLmZpbmRMYWJlbCA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBkaWFncmFtID0gdGhpcy5kaWFncmFtO1xyXG4gIHZhciBlID0gZGlhZ3JhbS5maXJzdElucHV0O1xyXG4gIHZhciBlbHQgPSBkaWFncmFtLmZpbmRPYmplY3RBdChlLmRvY3VtZW50UG9pbnQsIG51bGwsIG51bGwpO1xyXG5cclxuICBpZiAoZWx0ID09PSBudWxsIHx8ICEoZWx0LnBhcnQgaW5zdGFuY2VvZiBnby5Ob2RlKSkgcmV0dXJuIG51bGw7XHJcbiAgd2hpbGUgKGVsdC5wYW5lbCAhPT0gbnVsbCAmJiBlbHQucGFuZWwudHlwZSA9PT0gZ28uUGFuZWwuU3BvdCAmJiBlbHQucGFuZWwuZWx0KDApICE9PSBlbHQpIHtcclxuICAgIGlmIChlbHQuX2lzTm9kZUxhYmVsKSByZXR1cm4gZWx0O1xyXG4gICAgZWx0ID0gZWx0LnBhbmVsO1xyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbi8qKlxyXG4qIFN0YXJ0IGEgdHJhbnNhY3Rpb24sIGNhbGwgZmluZExhYmVsIGFuZCByZW1lbWJlciBpdCBhcyB0aGUgXCJsYWJlbFwiIHByb3BlcnR5LFxyXG4qIGFuZCByZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWUgZm9yIHRoZSBsYWJlbCdzIGFsaWdubWVudCBwcm9wZXJ0eS5cclxuKiBAdGhpcyB7Tm9kZUxhYmVsRHJhZ2dpbmdUb29sfVxyXG4qL1xyXG5Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wucHJvdG90eXBlLmRvQWN0aXZhdGUgPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLnN0YXJ0VHJhbnNhY3Rpb24oXCJTaGlmdGVkIExhYmVsXCIpO1xyXG4gIHRoaXMubGFiZWwgPSB0aGlzLmZpbmRMYWJlbCgpO1xyXG4gIGlmICh0aGlzLmxhYmVsICE9PSBudWxsKSB7XHJcbiAgICB0aGlzLl9vcmlnaW5hbEFsaWdubWVudCA9IHRoaXMubGFiZWwuYWxpZ25tZW50LmNvcHkoKTtcclxuICAgIHZhciBtYWluID0gdGhpcy5sYWJlbC5wYW5lbC5maW5kTWFpbkVsZW1lbnQoKTtcclxuICAgIHRoaXMuX29yaWdpbmFsQ2VudGVyID0gbWFpbi5nZXREb2N1bWVudFBvaW50KGdvLlNwb3QuQ2VudGVyKTtcclxuICB9XHJcbiAgZ28uVG9vbC5wcm90b3R5cGUuZG9BY3RpdmF0ZS5jYWxsKHRoaXMpO1xyXG59XHJcblxyXG4vKipcclxuKiBTdG9wIGFueSBvbmdvaW5nIHRyYW5zYWN0aW9uLlxyXG4qIEB0aGlzIHtOb2RlTGFiZWxEcmFnZ2luZ1Rvb2x9XHJcbiovXHJcbk5vZGVMYWJlbERyYWdnaW5nVG9vbC5wcm90b3R5cGUuZG9EZWFjdGl2YXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgZ28uVG9vbC5wcm90b3R5cGUuZG9EZWFjdGl2YXRlLmNhbGwodGhpcyk7XHJcbiAgdGhpcy5zdG9wVHJhbnNhY3Rpb24oKTtcclxufVxyXG5cclxuLyoqXHJcbiogQ2xlYXIgYW55IHJlZmVyZW5jZSB0byBhIGxhYmVsIGVsZW1lbnQuXHJcbiogQHRoaXMge05vZGVMYWJlbERyYWdnaW5nVG9vbH1cclxuKi9cclxuTm9kZUxhYmVsRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5kb1N0b3AgPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLmxhYmVsID0gbnVsbDtcclxuICBnby5Ub29sLnByb3RvdHlwZS5kb1N0b3AuY2FsbCh0aGlzKTtcclxufVxyXG5cclxuLyoqXHJcbiogUmVzdG9yZSB0aGUgbGFiZWwncyBvcmlnaW5hbCB2YWx1ZSBmb3IgR3JhcGhPYmplY3QuYWxpZ25tZW50LlxyXG4qIEB0aGlzIHtOb2RlTGFiZWxEcmFnZ2luZ1Rvb2x9XHJcbiovXHJcbk5vZGVMYWJlbERyYWdnaW5nVG9vbC5wcm90b3R5cGUuZG9DYW5jZWwgPSBmdW5jdGlvbigpIHtcclxuICBpZiAodGhpcy5sYWJlbCAhPT0gbnVsbCkge1xyXG4gICAgdGhpcy5sYWJlbC5hbGlnbm1lbnQgPSB0aGlzLl9vcmlnaW5hbEFsaWdubWVudDtcclxuICB9XHJcbiAgZ28uVG9vbC5wcm90b3R5cGUuZG9DYW5jZWwuY2FsbCh0aGlzKTtcclxufVxyXG5cclxuLyoqXHJcbiogRHVyaW5nIHRoZSBkcmFnLCBjYWxsIHVwZGF0ZUFsaWdubWVudCBpbiBvcmRlciB0byBzZXQgdGhlIEdyYXBoT2JqZWN0LmFsaWdubWVudCBvZiB0aGUgbGFiZWwuXHJcbiogQHRoaXMge05vZGVMYWJlbERyYWdnaW5nVG9vbH1cclxuKi9cclxuTm9kZUxhYmVsRHJhZ2dpbmdUb29sLnByb3RvdHlwZS5kb01vdXNlTW92ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICghdGhpcy5pc0FjdGl2ZSkgcmV0dXJuO1xyXG4gIHRoaXMudXBkYXRlQWxpZ25tZW50KCk7XHJcbn1cclxuXHJcbi8qKlxyXG4qIEF0IHRoZSBlbmQgb2YgdGhlIGRyYWcsIHVwZGF0ZSB0aGUgYWxpZ25tZW50IG9mIHRoZSBsYWJlbCBhbmQgZmluaXNoIHRoZSB0b29sLFxyXG4qIGNvbXBsZXRpbmcgYSB0cmFuc2FjdGlvbi5cclxuKiBAdGhpcyB7Tm9kZUxhYmVsRHJhZ2dpbmdUb29sfVxyXG4qL1xyXG5Ob2RlTGFiZWxEcmFnZ2luZ1Rvb2wucHJvdG90eXBlLmRvTW91c2VVcCA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmICghdGhpcy5pc0FjdGl2ZSkgcmV0dXJuO1xyXG4gIHRoaXMudXBkYXRlQWxpZ25tZW50KCk7XHJcbiAgdGhpcy50cmFuc2FjdGlvblJlc3VsdCA9IFwiU2hpZnRlZCBMYWJlbFwiO1xyXG4gIHRoaXMuc3RvcFRvb2woKTtcclxufVxyXG5cclxuLyoqXHJcbiogU2F2ZSB0aGUgbGFiZWwncyBHcmFwaE9iamVjdC5hbGlnbm1lbnQgYXMgYW4gYWJzb2x1dGUgb2Zmc2V0IGZyb20gdGhlIGNlbnRlciBvZiB0aGUgU3BvdCBQYW5lbFxyXG4qIHRoYXQgdGhlIGxhYmVsIGlzIGluLlxyXG4qIEB0aGlzIHtOb2RlTGFiZWxEcmFnZ2luZ1Rvb2x9XHJcbiovXHJcbk5vZGVMYWJlbERyYWdnaW5nVG9vbC5wcm90b3R5cGUudXBkYXRlQWxpZ25tZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYgKHRoaXMubGFiZWwgPT09IG51bGwpIHJldHVybjtcclxuICB2YXIgbGFzdCA9IHRoaXMuZGlhZ3JhbS5sYXN0SW5wdXQuZG9jdW1lbnRQb2ludDtcclxuICB2YXIgY250ciA9IHRoaXMuX29yaWdpbmFsQ2VudGVyO1xyXG4gIHRoaXMubGFiZWwuYWxpZ25tZW50ID0gbmV3IGdvLlNwb3QoMC41LCAwLjUsIGxhc3QueCAtIGNudHIueCwgbGFzdC55IC0gY250ci55KTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBOb2RlTGFiZWxEcmFnZ2luZ1Rvb2w7IiwidmFyIE1ldGFGaXJlID0gcmVxdWlyZSgnLi9qcy9pbnRlZ3JhdGlvbnMvZmlyZWJhc2UnKTtcclxudmFyIEF1dGgwID0gcmVxdWlyZSgnLi9qcy9pbnRlZ3JhdGlvbnMvYXV0aDAnKTtcclxudmFyIHVzZXJzbmFwID0gcmVxdWlyZSgnLi9qcy9pbnRlZ3JhdGlvbnMvdXNlcnNuYXAnKTtcclxudmFyIFVzZXIgPSByZXF1aXJlKCcuL2pzL2FwcC91c2VyLmpzJyk7XHJcbnZhciBFZGl0b3IgPSByZXF1aXJlKCcuL2pzL21hcC9lZGl0b3IuanMnKTtcclxudmFyIG51TWFwID0gcmVxdWlyZSgnLi9qcy9uZXdtYXAvbWFwLmpzJyk7XHJcblxyXG5jbGFzcyBNZXRhTWFwIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5NZXRhRmlyZSA9IG5ldyBNZXRhRmlyZSgpO1xyXG4gICAgICAgIHRoaXMuQXV0aDAgPSBuZXcgQXV0aDAoKTtcclxuICAgICAgICB1c2Vyc25hcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuQXV0aDAubG9naW4oKS50aGVuKChwcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGYuVXNlciA9IG5ldyBVc2VyKHByb2ZpbGUpO1xyXG5cclxuICAgICAgICAgICAgcmlvdC5tb3VudCgnKicpO1xyXG4gICAgICAgICAgICBfLmRlbGF5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIE1ldHJvbmljLmluaXQoKTsgLy8gaW5pdCBtZXRyb25pYyBjb3JlIGNvbXBvbmV0c1xyXG4gICAgICAgICAgICAgICAgTGF5b3V0LmluaXQoKTsgLy8gaW5pdCBsYXlvdXRcclxuICAgICAgICAgICAgICAgIERlbW8uaW5pdCgpOyAvLyBpbml0IGRlbW8gZmVhdHVyZXNcclxuICAgICAgICAgICAgICAgIEluZGV4LmluaXQoKTsgLy8gaW5pdCBpbmRleCBwYWdlXHJcbiAgICAgICAgICAgICAgICBUYXNrcy5pbml0RGFzaGJvYXJkV2lkZ2V0KCk7IC8vIGluaXQgdGFzaCBkYXNoYm9hcmQgd2lkZ2V0XHJcbiAgICAgICAgICAgICAgICAvL3ZhciB4ID0geyBjc3NUYWdnaW5nOiB7fSB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy93aW5kb3cubWFwRGF0YSA9IHsgXCJtYXBcIjogeyBcIm1ldGFkYXRhXCI6IHsgXCJzYW5kYm94XCI6IGZhbHNlLCBcImlkXCI6IDU1NDcsIFwibmFtZVwiOiBcIlVudGl0bGVkIE1hcFwiLCBcInVybFwiOiBcIi9tYXBzLzU1NDdcIiwgXCJjYW5FZGl0XCI6IHRydWUsIFwidXBkYXRlZEF0XCI6IFwiMjAxNS0wNS0xNVQxMjoyOTo0MC43MjEtMDQ6MDBcIiwgXCJ1cGRhdGVkQnlcIjogbnVsbCwgXCJ1cGRhdGVkQnlOYW1lXCI6IG51bGwsIFwidXNlclRhZ3NcIjogW10gfSwgXCJkYXRhXCI6IHsgXCJjbGFzc1wiOiBcImdvLkdyYXBoTGlua3NNb2RlbFwiLCBcIm5vZGVJc0xpbmtMYWJlbFByb3BlcnR5XCI6IFwiaXNMaW5rTGFiZWxcIiwgXCJsaW5rTGFiZWxLZXlzUHJvcGVydHlcIjogXCJsYWJlbEtleXNcIiwgXCJsaW5rRnJvbVBvcnRJZFByb3BlcnR5XCI6IFwiZnJvbVBvcnRcIiwgXCJsaW5rVG9Qb3J0SWRQcm9wZXJ0eVwiOiBcInRvUG9ydFwiLCBcIm5vZGVEYXRhQXJyYXlcIjogW3sgXCJrZXlcIjogMSwgXCJ0ZXh0XCI6IFwiTmV3IElkZWFcIiwgXCJpc0dyb3VwXCI6IHRydWUsIFwibG9jXCI6IFwiMCAwXCIsIFwibGF5b3V0XCI6IFwibGVmdFwiLCBcInNFeHBhbmRlZFwiOiB0cnVlLCBcInBFeHBhbmRlZFwiOiB0cnVlIH1dLCBcImxpbmtEYXRhQXJyYXlcIjogW10gfSwgXCJzdGF0ZURhdGFcIjogbnVsbCwgXCJlZGl0b3JPcHRpb25zXCI6IG51bGwsIFwiYW5hbHl0aWNzXCI6IHt9LCBcInZlcnNpb25zXCI6IFtdIH19O1xyXG4gICAgICAgICAgICAgICAgLy93aW5kb3cuX21hcEVkaXRvckN0cmwgPSBNYXBFZGl0b3JDdHJsKHgsIHgsICcnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAvL3dpbmRvdy5DcmxNYXAgPSBuZXcgRWRpdG9yKHdpbmRvdy5tYXBEYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICBudU1hcCgpO1xyXG5cclxuICAgICAgICAgICAgfSwgMjUwKTtcclxuICAgICAgICAgICAgdGhpcy5NZXRhRmlyZS5pbml0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9nb3V0KCkge1xyXG4gICAgICAgIHRoaXMuTWV0YUZpcmUubG9nb3V0KCk7XHJcbiAgICAgICAgdGhpcy5BdXRoMC5sb2dvdXQoKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNZXRhTWFwOyIsImNsYXNzIFVzZXIge1xyXG4gICAgY29uc3RydWN0b3IocHJvZmlsZSkge1xyXG4gICAgICAgIHRoaXMucHJvZmlsZSA9IHByb2ZpbGU7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBVUkkod2luZG93LmxvY2F0aW9uKS5xdWVyeSh0cnVlKTtcclxuICAgICAgICB0aGlzLnRoaW5rcXVlcnkgPSAodGhpcy5wYXJhbXMudGhpbmtxdWVyeSA/IHRydWUgOiBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVzZXJJZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9maWxlLnVzZXJfaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzQWRtaW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZmlsZS5yb2xlcy5pbmRleE9mKCdhZG1pbicpICE9PSAtMTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9maWxlLm5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVVzZXJFZGl0b3JPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yX29wdGlvbnM6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3N0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgIC8vJGh0dHAucHV0KCcvdXNlcnMvJyArICRzY29wZS51c2VySWQgKyAnLmpzb24nLCBkYXRhKS50aGVuKFxyXG4gICAgICAgIC8vICAgIGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgIC8vICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgIC8vICAgIH0sXHJcbiAgICAgICAgLy8gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgIC8vICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgZWRpdG9yIG9wdGlvbnMnO1xyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvLyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVXNlcjsiLCIvLyBmdW5jdGlvbnMgaGFuZGxpbmcgYW5hbHl0aWNzXHJcbi8vIGFuYWx5dGljcyBkaXNwbGF5IGlzIGluIHZpZXdzL21hcHMvX2FuYWx5dGljc190YWJfbWFwIGFuZCBfYW5hbHl0aWNzX3RhYl90aGluZ1xyXG5TYW5kYmFua0VkaXRvci5BbmFseXRpY3MgPSBmdW5jdGlvbiAoZWRpdG9yLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xyXG4gICAgICAgICAgICBpZiAobWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9BTkFMWVRJQ1NfVEhJTkcpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfQU5BTFlUSUNTX1RISU5HKSB7IC8vIG9wZW5pbmcgdGhpbmcgYW5hbHl0aWNzIHRhYlxyXG4gICAgICAgICAgICBzZWxmLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoaXMgZ2V0cyBwb3B1bGF0ZWQgYnkgbWFwLmxvYWRNYXBFeHRyYURhdGEsIG9uIGxvYWQgYW5kIGFmdGVyIGV2ZXJ5IGF1dG9zYXZlXHJcbiAgICB0aGlzLm1hcEFuYWx5dGljcyA9IG51bGw7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIGNvbnRleHR1YWwgYW5hbHl0aWNzIC0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyAtIHRoZXNlIGFyZSBhbGwgY2FsY3VsYXRlZCBoZXJlLCB1bmxpa2UgbWFwIGFuYWx5dGljcyB3aGljaCBhcmUgY2FsY3VsYXRlZCBvbiB0aGUgc2VydmVyIGFuZCBjb25uZWN0ZWQgd2l0aCBiYWRnZXMgYW5kIHBvaW50c1xyXG5cclxuICAgIC8vIHRoaXMgZ2V0cyBjYWxjdWxhdGVkIGJ5IHVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3NcclxuICAgIHRoaXMuY29udGV4dHVhbEFuYWx5dGljcyA9IHtcclxuICAgICAgICB0aGluZ05hbWU6ICcnLFxyXG5cclxuICAgICAgICAvLyB0aGluZyBzdHVmZlxyXG4gICAgICAgIGRpc3RpbmN0RnJvbTogMCxcclxuICAgICAgICBpbnRlbnRpb25hbGx5RGlzdGluY3RGcm9tOiAwLFxyXG4gICAgICAgIHBhcnRPZjogMCxcclxuICAgICAgICBpbmNsdWRlc1BhcnRzOiAwLFxyXG4gICAgICAgIHJlbGF0ZWRUbzogMCxcclxuICAgICAgICBpc1JlbGF0aW9uc2hpcDogMCxcclxuICAgICAgICBsb29raW5nQXQ6IDAsXHJcbiAgICAgICAgbG9va2VkQXRGcm9tOiAwLFxyXG5cclxuICAgICAgICAvLyBSIHN0dWZmXHJcbiAgICAgICAgckZyb21UaGluZ05hbWU6ICcnLFxyXG4gICAgICAgIHJUb1RoaW5nTmFtZTogJycsXHJcbiAgICAgICAgaXNSVGhpbmc6IGZhbHNlLFxyXG4gICAgICAgIGlzUlN5c3RlbTogZmFsc2UsXHJcbiAgICAgICAgaXNSUG9pbnQ6IGZhbHNlLFxyXG4gICAgICAgIGlzUlZpZXc6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudXBkYXRlQ29udGV4dHVhbEFuYWx5dGljcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd1cGRhdGVDb250ZXh0dWFsQW5hbHl0aWNzJyk7XHJcbiAgICAgICAgaWYgKCFtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX0FOQUxZVElDU19USElORykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgcGFydCA9IGRpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCk7XHJcbiAgICAgICAgdmFyIGEgPSBzZWxmLmNvbnRleHR1YWxBbmFseXRpY3M7XHJcblxyXG4gICAgICAgIGlmIChwYXJ0ICYmIHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcgPSBwYXJ0O1xyXG5cclxuICAgICAgICAgICAgLy8gdGhpbmcgbmFtZVxyXG4gICAgICAgICAgICBhLnRoaW5nTmFtZSA9IHRoaW5nLmRhdGEudGV4dDtcclxuXHJcbiAgICAgICAgICAgIC8vIGRpc3RpbmN0IGZyb21cclxuICAgICAgICAgICAgYS5kaXN0aW5jdEZyb20gPSBfLndoZXJlKGRpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheSwge2lzR3JvdXA6IHRydWV9KS5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICAgICAgLy8gcGFydCBvZlxyXG4gICAgICAgICAgICB2YXIgbGV2ZWwgPSAwO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gdGhpbmc7XHJcbiAgICAgICAgICAgIHdoaWxlICh0aGluZzIgPSBnZXRDb250YWluaW5nR3JvdXAodGhpbmcyKSkge1xyXG4gICAgICAgICAgICAgICAgbGV2ZWwrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhLnBhcnRPZiA9IGxldmVsO1xyXG5cclxuICAgICAgICAgICAgLy8gaW5jbHVkZXMgcGFydHNcclxuICAgICAgICAgICAgYS5pbmNsdWRlc1BhcnRzID0gY291bnRHcm91cHModGhpbmcpO1xyXG5cclxuICAgICAgICAgICAgLy8gcmVsYXRlZCB0byAvIGxvb2tpbmcgYXQgLyBsb29rZWQgYXQgZnJvbSAvIGludGVudGlvbmFsbHkgZGlzdGluY3QgZnJvbVxyXG4gICAgICAgICAgICBhLnJlbGF0ZWRUbyA9IDA7XHJcbiAgICAgICAgICAgIGEubG9va2luZ0F0ID0gMDtcclxuICAgICAgICAgICAgYS5sb29rZWRBdEZyb20gPSAwO1xyXG4gICAgICAgICAgICBhLmludGVudGlvbmFsbHlEaXN0aW5jdEZyb20gPSAwO1xyXG4gICAgICAgICAgICB2YXIgbGlua3MgPSB0aGluZy5saW5rc0Nvbm5lY3RlZDtcclxuICAgICAgICAgICAgdmFyIHJDb25uZWN0ZWRUaGluZ0tleXMgPSBbXTtcclxuICAgICAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIC8vIFAgbGlua1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGluay5mcm9tTm9kZSA9PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhLmxvb2tpbmdBdCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsaW5rLnRvTm9kZSA9PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhLmxvb2tlZEF0RnJvbSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEQgbGlua1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdEJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGEuaW50ZW50aW9uYWxseURpc3RpbmN0RnJvbSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gUiBsaW5rXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghbGluay5kYXRhLmNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJhY2sga2V5cyBvZiByZWxhdGVkIHRoaW5ncyBzbyB3ZSBkb24ndCBjb3VudCB0aGVtIG11bHRpcGxlIHRpbWVzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmsuZnJvbU5vZGUgPT0gdGhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgckNvbm5lY3RlZFRoaW5nS2V5cy5wdXNoKGxpbmsudG9Ob2RlLmRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobGluay50b05vZGUgPT0gdGhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgckNvbm5lY3RlZFRoaW5nS2V5cy5wdXNoKGxpbmsuZnJvbU5vZGUuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhLnJlbGF0ZWRUbyA9IF8udW5pcShyQ29ubmVjdGVkVGhpbmdLZXlzKS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAvLyBpc1JlbGF0aW9uc2hpcFxyXG4gICAgICAgICAgICBhLmlzUmVsYXRpb25zaGlwID0gdGhpbmcuaXNMaW5rTGFiZWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBhcnQgJiYgcGFydCBpbnN0YW5jZW9mIGdvLkxpbmspIHtcclxuICAgICAgICAgICAgdmFyIHJlbCA9IHBhcnQ7XHJcblxyXG4gICAgICAgICAgICAvLyB0aGluZyBuYW1lc1xyXG4gICAgICAgICAgICBhLnJGcm9tVGhpbmdOYW1lID0gcmVsLmZyb21Ob2RlLmRhdGEudGV4dDtcclxuICAgICAgICAgICAgYS5yVG9UaGluZ05hbWUgPSByZWwudG9Ob2RlLmRhdGEudGV4dDtcclxuXHJcbiAgICAgICAgICAgIC8vIGlzIFIgdGhpbmdcclxuICAgICAgICAgICAgYS5pc1JUaGluZyA9IHJlbC5pc0xhYmVsZWRMaW5rO1xyXG5cclxuICAgICAgICAgICAgLy8gaXMgUiBzeXN0ZW1cclxuICAgICAgICAgICAgYS5pc1JTeXN0ZW0gPSByZWwuaXNMYWJlbGVkTGluayAmJiBjb3VudEdyb3VwcyhyZWwubGFiZWxOb2Rlcy5maXJzdCgpKSA+IDA7XHJcblxyXG4gICAgICAgICAgICAvLyBpcyBSIHBvaW50XHJcbiAgICAgICAgICAgIGEuaXNSUG9pbnQgPSByZWwuaXNMYWJlbGVkTGluayAmJiBpc1BvaW50KHJlbC5sYWJlbE5vZGVzLmZpcnN0KCkpO1xyXG5cclxuICAgICAgICAgICAgLy8gaXMgUiB2aWV3XHJcbiAgICAgICAgICAgIGEuaXNSVmlldyA9IHJlbC5pc0xhYmVsZWRMaW5rICYmIGlzVmlldyhyZWwubGFiZWxOb2Rlcy5maXJzdCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgZWl0aGVyIHRoZSBjb250YWluaW5nR3JvdXAgb3IgdGhlIHJUaGluZ0NvbnRhaW5pbmdHcm91cCwgd2hpY2hldmVyIGlzIG5vbi1udWxsXHJcbiAgICBmdW5jdGlvbiBnZXRDb250YWluaW5nR3JvdXAoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gZ3JvdXAuY29udGFpbmluZ0dyb3VwIHx8IGdldFJUaGluZ0NvbnRhaW5pbmdHcm91cChncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgZ3JvdXAgaXMgYW4gUi10aGluZyBiZXR3ZWVuIHR3byBzaWJsaW5nIHBhcnRzIG9mIGEgd2hvbGUsIHJldHVybnMgdGhlIHdob2xlOyBlbHNlIHJldHVybnMgbnVsbFxyXG4gICAgZnVuY3Rpb24gZ2V0UlRoaW5nQ29udGFpbmluZ0dyb3VwKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKGdyb3VwLmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgIHZhciBmcm9tUGFyZW50ID0gZ3JvdXAubGFiZWxlZExpbmsuZnJvbU5vZGUuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB2YXIgdG9QYXJlbnQgPSBncm91cC5sYWJlbGVkTGluay50b05vZGUuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICBpZiAoZnJvbVBhcmVudCAhPT0gbnVsbCAmJiB0b1BhcmVudCAhPT0gbnVsbCAmJiBmcm9tUGFyZW50ID09IHRvUGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbVBhcmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjb3VudHMgdGhlIG1lbWJlciBwYXJ0cyBvZiB0aGUgZ3JvdXAgdGhhdCBhcmUgZ3JvdXBzLCByZWN1cnNpdmVseSAobm90IGluY2x1ZGluZyB0aGUgZ3JvdXAgaXRzZWxmKVxyXG4gICAgZnVuY3Rpb24gY291bnRHcm91cHMoZ3JvdXApIHtcclxuICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgIHZhciBpdCA9IGdldE1lbWJlckdyb3Vwcyhncm91cCkuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBjb3VudCArPSAxICsgY291bnRHcm91cHMocGFydCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgY29sbGVjdGlvbiBvZiBncm91cHMgdGhhdCBhcmUgZWl0aGVyIGEgbWVtYmVyUGFydCBvZiB0aGlzIGdyb3VwLCBvciBhbiBSLXRoaW5nIGJldHdlZW4gc2libGluZyBtZW1iZXJQYXJ0c1xyXG4gICAgZnVuY3Rpb24gZ2V0TWVtYmVyR3JvdXBzKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLm1lbWJlclBhcnRzO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocGFydCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnRoaW5nID0gZ2V0UlRoaW5nVG9TaWJsaW5nKHBhcnQpOyAvLyBOQjogc2hvdWxkIG5vdCBnZXQgZHVwbGljYXRpb24gaGVyZSwgYXMgdGhpcyBjaGVja3MgZm9yIHItdGhpbmdzIGluIG9ubHkgb25lIGRpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKHJ0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcnMuYWRkKHJ0aGluZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lbWJlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgdGhlIGdyb3VwIGlzIGxpbmtlZCBieSBhbiBSLXRoaW5nIHRvIGEgc2libGluZyAod2l0aCB0aGUgZ3JvdXAgYXMgdGhlIGZyb21Ob2RlKSwgcmV0dXJucyB0aGUgUi10aGluZzsgZWxzZSByZXR1cm5zIG51bGxcclxuICAgIGZ1bmN0aW9uIGdldFJUaGluZ1RvU2libGluZyhncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5sYWJlbE5vZGVzLmNvdW50ID4gMCAmJiBsaW5rLnRvTm9kZS5jb250YWluaW5nR3JvdXAgPT0gZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGluay5sYWJlbE5vZGVzLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNQb2ludChncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzVmlldyhncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc0ludG8oKTtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn07IiwiLy8gZnVuY3Rpb25zIGhhbmRsaW5nIGF0dGFjaG1lbnRzXHJcblxyXG53aW5kb3cuU2FuZGJhbmtFZGl0b3IuQXR0YWNobWVudHMgPSBmdW5jdGlvbiAoJHNjb3BlLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5zZWxlY3RlZFRoaW5nID0gbnVsbDtcclxuICAgIHRoaXMuYXR0YWNobWVudHMgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuYXR0YWNobWVudFR5cGVzID0gW1xyXG4gICAgICAgIHtuYW1lOiAnbm90ZScsIGxhYmVsU2luZ3VsYXI6ICdOb3RlJywgbGFiZWxQbHVyYWw6ICdOb3Rlcyd9LCBcclxuICAgICAgICB7bmFtZTogJ2xpbmsnLCBsYWJlbFNpbmd1bGFyOiAnV2ViIExpbmsnLCBsYWJlbFBsdXJhbDogJ1dlYiBMaW5rcyd9LCBcclxuICAgICAgICB7bmFtZTogJ3Rhc2snLCBsYWJlbFNpbmd1bGFyOiAnVGFzaycsIGxhYmVsUGx1cmFsOiAnVGFza3MnfSwgXHJcbiAgICAgICAge25hbWU6ICdtYXAnLCBsYWJlbFNpbmd1bGFyOiAnTGlua2VkIE1ldGFNYXAnLCBsYWJlbFBsdXJhbDogJ0xpbmtlZCBNZXRhTWFwcyd9XHJcbi8vICAgICAgICB7bmFtZTogJ2RvYycsIGxhYmVsU2luZ3VsYXI6ICdEb2N1bWVudCcsIGxhYmVsUGx1cmFsOiAnRG9jdW1lbnRzJ30gIC8vIGxpbWl0IG92ZXJhbGwgc3RvcmFnZSBzcGFjZSBPUiBzaW1wbGVyIHJ1bGVzP1xyXG4gICAgICAgIC8vIGxpbWl0IGZpbGUgdHlwZXMgLSBwZGYsIGpwZywgZ2lmLCBwbmcsIG9mZmljZT8uLi4gIHdoaXRlbGlzdCB2cy4gYmxhY2tsaXN0XHJcbiAgICBdO1xyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5oYW5kbGVEaWFncmFtRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBlKSB7XHJcbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PSAnQ2hhbmdlZFNlbGVjdGlvbicpIHtcclxuICAgICAgICAgICAgaWYgKG1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfQVRUQUNITUVOVFMpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnN0b3BFZGl0aW5nQWxsKCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNhdmVBdHRhY2htZW50cygpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5sb2FkU2VsZWN0ZWRUaGluZ0F0dGFjaG1lbnRzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX0FUVEFDSE1FTlRTKSB7IC8vIG9wZW5pbmcgdGFiXHJcbiAgICAgICAgICAgIHNlbGYubG9hZFNlbGVjdGVkVGhpbmdBdHRhY2htZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2xkVmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX0FUVEFDSE1FTlRTKSB7IC8vIGNsb3NpbmcgdGFiXHJcbiAgICAgICAgICAgIHNlbGYuc2F2ZUF0dGFjaG1lbnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxvYWRTZWxlY3RlZFRoaW5nQXR0YWNobWVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAobWFwLnRoaW5nU2VsZWN0ZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFRoaW5nID0gbWFwLmdldFVuaXF1ZVRoaW5nU2VsZWN0ZWQoKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMgPSBzZWxmLnNlbGVjdGVkVGhpbmcuZGF0YS5hdHRhY2htZW50cztcclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmF0dGFjaG1lbnRzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0IGFsbCBhdHRhY2htZW50cyB0byBlZGl0aW5nID0gZmFsc2VcclxuICAgIHRoaXMuc3RvcEVkaXRpbmdBbGwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5hdHRhY2htZW50cykge1xyXG4gICAgICAgICAgICAgICAgXy5lYWNoKHNlbGYuYXR0YWNobWVudHMsIGZ1bmN0aW9uIChhdHQpIHsgYXR0LmVkaXRpbmcgPSBmYWxzZTsgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5lZGl0aW5nQW5JdGVtID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuYXR0YWNobWVudHMgJiYgXy5maW5kV2hlcmUoc2VsZi5hdHRhY2htZW50cywge2VkaXRpbmc6IHRydWV9KSAhPT0gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzZXQgYWxsIG90aGVyIGF0dGFjaG1lbnRzIHRvIGVkaXRpbmcgPSBmYWxzZVxyXG4gICAgdGhpcy5zdGFydEVkaXRpbmcgPSBmdW5jdGlvbihhdHRhY2htZW50KSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2VsZi5zdG9wRWRpdGluZ0FsbCgpO1xyXG4gICAgICAgICAgICBhdHRhY2htZW50LmVkaXRpbmcgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNhdmVJdGVtID0gZnVuY3Rpb24oYXR0YWNobWVudCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGF0dGFjaG1lbnQuZWRpdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzZWxmLnNhdmVBdHRhY2htZW50cygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNhdmVBdHRhY2htZW50cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzYXZlQXR0YWNobWVudHMsIHNlbGVjdGVkOiAnICsgc2VsZi5zZWxlY3RlZFRoaW5nKTtcclxuICAgICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWRUaGluZykge1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2VsZi5zZWxlY3RlZFRoaW5nLmRhdGEsICdhdHRhY2htZW50cycsIHNlbGYuYXR0YWNobWVudHMpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWFwLmdldEF1dG9zYXZlKCkuc2F2ZU5vdygnZWRpdF9hdHRhY2htZW50cycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxpc3RBdHRhY2htZW50cyA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgdmFyIGF0dHMgPSBfLndoZXJlKHNlbGYuYXR0YWNobWVudHMsIHt0eXBlOiB0eXBlfSk7XHJcbiAgICAgICAgcmV0dXJuIGF0dHM7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYWRkQXR0YWNobWVudCA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgdmFyIGl0ZW0gPSB7IHR5cGU6IHR5cGUsIGVkaXRpbmc6IHRydWUgfTtcclxuICAgICAgICBpZiAodHlwZSA9PSAnbm90ZScpIHtcclxuICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgdGV4dDogJycsIHVybDogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICdsaW5rJykge1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyBsYWJlbDogJycsIHVybDogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICd0YXNrJykge1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyB0ZXh0OiAnJyB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gJ2RvYycpIHtcclxuICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgbmFtZTogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICdtYXAnKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMucHVzaChfLmV4dGVuZChpdGVtLCB7IG1hcFJlZjogeyBpZDogMCwgbmFtZTogJycgIH0gfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1ZhbGlkID0gZnVuY3Rpb24oYXR0YWNobWVudCkge1xyXG4gICAgICAgIGlmIChhdHRhY2htZW50LnR5cGUgPT0gJ2xpbmsnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LmxhYmVsICYmIGF0dGFjaG1lbnQudXJsICYmIGF0dGFjaG1lbnQubGFiZWwudHJpbSgpICE9PSAnJyAmJiBhdHRhY2htZW50LnVybC50cmltKCkgIT09ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhdHRhY2htZW50LnR5cGUgPT0gJ25vdGUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LnRleHQgJiYgYXR0YWNobWVudC50ZXh0LnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PSAndGFzaycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0dGFjaG1lbnQudGV4dCAmJiBhdHRhY2htZW50LnRleHQudHJpbSgpICE9PSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYXR0YWNobWVudC50eXBlID09ICdkb2MnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50Lm5hbWUgJiYgYXR0YWNobWVudC5uYW1lLnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PSAnbWFwJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYXR0YWNobWVudC5tYXBSZWYgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IG51bGwgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGVsZXRlQXR0YWNobWVudCA9IGZ1bmN0aW9uIChhdHQpIHtcclxuICAgICAgICB2YXIgdHlwZUxhYmVsID0gXy5maW5kV2hlcmUoc2VsZi5hdHRhY2htZW50VHlwZXMsIHsgbmFtZTogYXR0LnR5cGUgfSkubGFiZWxTaW5ndWxhcjtcclxuICAgICAgICBpZiAoY29uZmlybSAoJ0RlbGV0ZSAnICsgdHlwZUxhYmVsICsgJz8nKSkge1xyXG4gICAgICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZihzZWxmLmF0dGFjaG1lbnRzLCBhdHQpO1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnNwbGljZShpLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHF1ZXJ5IHNlcnZlciBmb3IgbWFwcyBjb250YWluaW5nIHRoZSBnaXZlbiB0ZXh0IGluIHRoZSBtYXAgbmFtZVxyXG4gICAgdGhpcy5nZXRPdGhlck1hcHMgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICAvLyBOQjogdGhpcyBVUkwgaXMgY29uc3RydWN0ZWQgdG8gbWF0Y2ggdGhlIG9uZSBnZW5lcmF0ZWQgYnkgdGhlIHNlYXJjaCBmb3JtIG9uIHRoZSBtYXBzIHBhZ2UuLi5cclxuICAgICAgICB2YXIgdXJsID0gJy9tYXBzL3Zpc2libGVfbWFwcy5qc29uP3V0Zjg9JUUyJTlDJTkzJnElNUJuYW1lX2NvbnQlNUQ9JyArIHZpZXdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5tYXBzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm90aGVyTWFwU2VsZWN0ZWQgPSBmdW5jdGlvbih2aWV3VmFsdWUsIG1vZGVsVmFsdWUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnb3RoZXJNYXBTZWxlY3RlZCwgdmlld1ZhbHVlOiAnICsgdmlld1ZhbHVlLmlkICsgJywgbW9kZWxWYWx1ZTogJyArIG1vZGVsVmFsdWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmZvcm1hdE90aGVyTWFwID0gZnVuY3Rpb24gKG1vZGVsKSB7XHJcbiAgICAgICAgcmV0dXJuIChtb2RlbCA/IG1vZGVsLm5hbWUgOiAnJyk7XHJcbiAgICB9O1xyXG5cclxufTsiLCIvLyBmdW5jdGlvbnMgaGFuZGxpbmcgZWRpdG9yIGF1dG9zYXZlIGZ1bmN0aW9uXHJcblxyXG5TYW5kYmFua0VkaXRvci5BdXRvc2F2ZSA9IGZ1bmN0aW9uKGVkaXRvciwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHZhciAkaHR0cCA9IHtcclxuICAgICAgICBwdXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHt9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBjaGFuZ2VUeXBlcyA9IFtdO1xyXG5cclxuICAgIHRoaXMuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBkbyBhIHNhdmUgbmV4dCB0aW1lIHRoZSBzZXQgaW50ZXJ2YWwgcGFzc2VzIHdpdGggbm8gc2F2ZSByZXF1ZXN0c1xyXG4gICAgdGhpcy5zYXZlID0gZnVuY3Rpb24oY2hhbmdlVHlwZSkge1xyXG4gICAgICAgIGNoYW5nZVR5cGVzLnB1c2goY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgZGVsYXllZEF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRvIGEgc2F2ZSByaWdodCBub3dcclxuICAgIHRoaXMuc2F2ZU5vdyA9IGZ1bmN0aW9uKGNoYW5nZVR5cGUpIHtcclxuICAgICAgICBjaGFuZ2VUeXBlcy5wdXNoKGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIGF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRvbid0IGxldCBhdXRvc2F2ZSBiZSB0cmlnZ2VyZWQgbW9yZSB0aGFuIGV2ZXJ5IE4gbWlsbGlzZWNvbmRzLi4uXHJcbiAgICB2YXIgZGVsYXllZEF1dG9zYXZlID0gXy5kZWJvdW5jZShhdXRvc2F2ZSwgMjAwMCk7XHJcblxyXG4gICAgLy8gY29tcGlsZSB0aGUgY3VycmVudCBsaXN0IG9mIGNoYW5nZSB0eXBlIGRlc2NyaXB0aW9ucywgcHJvY2VzcyB0aGVtIFxyXG4gICAgLy8gdG8gcmVtb3ZlIGR1cGxpY2F0ZXMsIGFuZCBzYXZlIHRoZSBjdXJyZW50IGRhdGFcclxuICAgIGZ1bmN0aW9uIGF1dG9zYXZlKCkge1xyXG4gICAgICAgIC8vIHN0b3AgcmlnaHQgaGVyZSBpZiB3ZSdyZSBpbiB0aGUgc2FuZGJveCBhbmQvb3Igd2UgZG9uJ3QgaGF2ZSBlZGl0IHBlcm1pc3Npb25zXHJcbiAgICAgICAgaWYgKGVkaXRvci5zYW5kYm94IHx8ICFlZGl0b3IuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWNoYW5nZVR5cGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYXV0b3NhdmU6IG5vdGhpbmcgdG8gc2F2ZSEnKTsgLy8gc2hvdWxkbid0IGhhcHBlblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkZS1kdXBlIHRoZSBsaXN0IG9mIGNoYW5nZSB0eXBlc1xyXG4gICAgICAgIHZhciBjaGFuZ2VMaXN0ID0gXy51bmlxKGNoYW5nZVR5cGVzKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjaGFuZ2VMaXN0OiAnICsgY2hhbmdlTGlzdCk7XHJcbiAgICAgICAgLy8gZG9uJ3Qgc2hvdyBtb3ZlIGV2ZW50cyB1bmxlc3MgdGhhdCdzIGFsbCB3ZSBoYXZlXHJcbiAgICAgICAgdmFyIGNoYW5nZUxpc3RXaXRob3V0TW92ZXMgPSBfLndpdGhvdXQoY2hhbmdlTGlzdCwgJ21vdmUnKTtcclxuICAgICAgICBpZiAoY2hhbmdlTGlzdFdpdGhvdXRNb3Zlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZUxpc3QgPSBjaGFuZ2VMaXN0V2l0aG91dE1vdmVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjaGFuZ2VMaXN0IHdpdGhvdXQgbW92ZXM6ICcgKyBjaGFuZ2VMaXN0KTtcclxuICAgICAgICAvLyBnZXQgZGVzY3JpcHRpb25zXHJcbiAgICAgICAgdmFyIGRlc2NyaXB0aW9uTGlzdCA9IF8ubWFwKGNoYW5nZUxpc3QsIGZ1bmN0aW9uKGN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfLnJlc3VsdChjaGFuZ2VEZXNjcmlwdGlvbnMsIGN0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnYXV0b3NhdmUsIGNoYW5nZUxpc3Q6ICcgKyBjaGFuZ2VMaXN0ICsgJywgZGVzY3JpcHRpb25MaXN0OiAnICsgZGVzY3JpcHRpb25MaXN0KTtcclxuICAgICAgICB2YXIgcG9zdERhdGEgPSB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBlZGl0b3IubWFwVGl0bGUsXHJcbiAgICAgICAgICAgIFwiZGF0YVwiOiBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnRvSnNvbigpLFxyXG4gICAgICAgICAgICBcInN0YXRlX2RhdGFcIjogSlNPTi5zdHJpbmdpZnkobWFwLmdldFVpKCkuZ2V0U3RhdGVEYXRhKCkpLFxyXG4gICAgICAgICAgICBcImVkaXRvcl9vcHRpb25zXCI6IEpTT04uc3RyaW5naWZ5KG1hcC5nZXRVaSgpLmdldE1hcEVkaXRvck9wdGlvbnMoKSksXHJcbiAgICAgICAgICAgIFwicHJlc2VudGVyX3NsaWRlc1wiOiBtYXAuZ2V0UHJlc2VudGVyKCkuZ2V0U2xpZGVDb3VudCgpLFxyXG4gICAgICAgICAgICBcImFjdGl2aXR5X3NsaWRlc1wiOiBtYXAuZ2V0UHJlc2VudGVyKCkuZ2V0QWN0aXZpdHlTbGlkZUNvdW50KCksXHJcbiAgICAgICAgICAgIFwiY2hhbmdlX3R5cGVcIjogY2hhbmdlTGlzdC5qb2luKCc7JyksXHJcbiAgICAgICAgICAgIFwiY2hhbmdlX2Rlc2NyaXB0aW9uXCI6IGRlc2NyaXB0aW9uTGlzdC5qb2luKCc7ICcpLFxyXG4gICAgICAgICAgICBcInRodW1ibmFpbF9wbmdcIjogbWFwLmdldFByZXNlbnRlcigpLmdldE1hcFRodW1ibmFpbCgpXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdXJsID0gZWRpdG9yLm1hcFVybCArICcuanNvbic7XHJcblxyXG4gICAgICAgIGVkaXRvci51cGRhdGVFZGl0U3RhdHVzKGVkaXRvci5TQVZJTkcpO1xyXG4gICAgICAgICRodHRwLnB1dCh1cmwsIHBvc3REYXRhKS50aGVuKFxyXG4gICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGVkaXRvci51cGRhdGVFZGl0U3RhdHVzKGVkaXRvci5TQVZFX09LKTtcclxuICAgICAgICAgICAgICAgIC8vIGxvYWQgcmV0dXJuZWQgZGF0YSBmb3IgYW5hbHl0aWNzLCBwb2ludHMsIGJhZGdlcywgdmVyc2lvbnNcclxuICAgICAgICAgICAgICAgIGVkaXRvci5tYXAubG9hZE1hcEV4dHJhRGF0YShyZXNwb25zZS5kYXRhLm1hcCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yLnVwZGF0ZUVkaXRTdGF0dXMoZWRpdG9yLlNBVkVfRkFJTEVEKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBoYW5kbGUgbW9kZWwgY2hhbmdlcyAtIHRyaWdnZXIgYXV0b3NhdmUgLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdmFyIGNoYW5nZURlc2NyaXB0aW9ucyA9IHtcclxuICAgICAgICBtb3ZlOiAnTW92ZWQgT2JqZWN0cycsXHJcbiAgICAgICAgdW5kb19yZWRvOiAnUGVyZm9ybWVkIFVuZG8vUmVkbycsXHJcbiAgICAgICAgZWRpdF90aXRsZTogJ0VkaXRlZCBNZXRhTWFwIFRpdGxlJyxcclxuICAgICAgICBlZGl0X2Rlc2NyaXB0aW9uOiAnRWRpdGVkIE1ldGFNYXAgRGVzY3JpcHRpb24nLFxyXG4gICAgICAgIGVkaXRfdXNlcnRhZ3M6ICdFZGl0IE1ldGFNYXAgVGFncycsXHJcbiAgICAgICAgZWRpdF9kOiAnRWRpdGVkIERpc3RpbmN0aW9ucycsXHJcbiAgICAgICAgZWRpdF9zOiAnRWRpdGVkIFN5c3RlbXMnLFxyXG4gICAgICAgIGVkaXRfcjogJ0VkaXRlZCBSZWxhdGlvbnNoaXBzJyxcclxuICAgICAgICBlZGl0X3A6ICdFZGl0ZWQgUGVyc3BlY3RpdmVzJyxcclxuICAgICAgICBhZGRfdGhpbmc6ICdBZGRlZCBJZGVhcycsXHJcbiAgICAgICAgcmVuYW1lX3RoaW5nOiAnUmVuYW1lZCBJZGVhcycsXHJcbiAgICAgICAgZGVsZXRlX3RoaW5nOiAnRGVsZXRlZCBJZGVhcycsXHJcbiAgICAgICAgZWRpdF9hdHRhY2htZW50czogJ0VkaXRlZCBBdHRhY2htZW50cycsXHJcbiAgICAgICAgZWRpdF9wcmVzZW50ZXI6ICdFZGl0ZWQgUHJlc2VudGVyIFNsaWRlcycsXHJcbiAgICAgICAgZWRpdF9nZW5lcmF0b3I6ICdJbnNlcnRlZCBJZGVhcyBmcm9tIFRoaW5rUXVlcnknLFxyXG4gICAgICAgIGVkaXRfc3RhbmRhcmRzOiAnRWRpdGVkIExpbmtzIHRvIENvbW1vbiBDb3JlIFN0YW5kYXJkcydcclxuICAgIH07XHJcblxyXG4gICAgLy8gZSBpcyBhIGdvLkNoYW5nZWRFdmVudFxyXG4gICAgdGhpcy5tb2RlbENoYW5nZWQgPSBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgIGlmICghc2VsZi5zYXZlT25Nb2RlbENoYW5nZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGNoYW5nZVR5cGUgPSBudWxsO1xyXG4gICAgICAgIHZhciBjaGFuZ2VEZXNjcmlwdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChlLnByb3BlcnR5TmFtZSA9PSAndHlwZScpIHtcclxuICAgICAgICAgICAgLy8gY2hhbmdlIFIgdHlwZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCxuLDEsbywyLEEsMyxyLDQsciw1LG8sNix3LDcsc10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLHQsMSxvXSAsIHByb3BlcnR5TmFtZTogdHlwZVxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcic7XHJcbiAgICAgICAgICAgIGNoYW5nZURlc2NyaXB0aW9uID0gJ0NoYW5nZWQgUmVsYXRpb25zaGlwIFR5cGVzJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdsYXlvdXQnKSB7XHJcbiAgICAgICAgICAgIC8vIGNoYW5nZSBzeXN0ZW0gbGF5b3V0XHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLGwsMSxlLDIsZiwzLHRdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCxyLDEsaSwyLGcsMyxoLDQsdF0gLCBwcm9wZXJ0eU5hbWU6IGxheW91dCBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3MnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5jaGFuZ2UgPT0gZ28uQ2hhbmdlZEV2ZW50Lkluc2VydCAmJiBwcm9wZXJ0eUVxdWFscyhlLm5ld1ZhbHVlLCAnZnJvbVBvcnQnLCAnUicpKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogMSwgbmV3VmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsNjAwNSxmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUix0b1BvcnQsUF0gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXlcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtUb1BvcnRJZCwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsUF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLFJdICwgcHJvcGVydHlOYW1lOiB0b1BvcnQgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9yJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5SZW1vdmUgJiYgcHJvcGVydHlFcXVhbHMoZS5vbGRWYWx1ZSwgJ2Zyb21Qb3J0JywgJ1InKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogMSwgb2xkVmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsNjAwNSxmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUix0b1BvcnQsUl0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnbGlua0RhdGFBcnJheScpIHtcclxuICAgICAgICAgICAgLy8gY2hhbmdlIFAvRCBsaW5rc1xyXG4gICAgICAgICAgICAvLyBhZGQgUCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogMiwgbmV3VmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsMTkxMjIsZnJvbSwtMix0bywtNCxsYWJlbEtleXMsLGZyb21Qb3J0LFAsdG9Qb3J0LFBdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0NhdGVnb3J5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsUF0gLCBwcm9wZXJ0eU5hbWU6IGNhdGVnb3J5IFxyXG4gICAgICAgICAgICAvLyBkZWxldGUgUCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiAyLCBvbGRWYWx1ZTogW3R5cGUsbm9BcnJvd3MsX19nb2hhc2hpZCwxOTEyMixmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUCx0b1BvcnQsUCxjYXRlZ29yeSxQXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIC8vIGFkZCBEIGxpbmtcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiAxLCBuZXdWYWx1ZTogW2Zyb20sLTcsdG8sLTUsZnJvbVBvcnQsRCx0b1BvcnQsRCxjYXRlZ29yeSxELF9fZ29oYXNoaWQsMTk1MjJdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyByZW1vdmUgRCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiAxLCBvbGRWYWx1ZTogW2Zyb20sLTcsdG8sLTUsZnJvbVBvcnQsRCx0b1BvcnQsRCxjYXRlZ29yeSxELF9fZ29oYXNoaWQsMTk1MjJdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheSBcclxuXHJcbiAgICAgICAgICAgIGlmICgoZS5uZXdWYWx1ZSAmJiBlLm5ld1ZhbHVlLmNhdGVnb3J5ID09ICdQJykgfHxcclxuICAgICAgICAgICAgICAgIChlLm9sZFZhbHVlICYmIGUub2xkVmFsdWUuY2F0ZWdvcnkgPT0gJ1AnKSkge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3AnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKChlLm5ld1ZhbHVlICYmIGUubmV3VmFsdWUuY2F0ZWdvcnkgPT0gJ0QnKSB8fFxyXG4gICAgICAgICAgICAgICAgKGUub2xkVmFsdWUgJiYgZS5vbGRWYWx1ZS5jYXRlZ29yeSA9PSAnRCcpKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfZCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdjYXRlZ29yeScpIHtcclxuICAgICAgICAgICAgLy8gYWRkIFAgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZWQsIG1vZGVsQ2hhbmdlOiBsaW5rQ2F0ZWdvcnksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCxQXSAsIHByb3BlcnR5TmFtZTogY2F0ZWdvcnkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9wJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdncm91cCcpIHtcclxuICAgICAgICAgICAgLy8gZHJhZyBpbnRvIFNcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG4gICAgICAgICAgICAvLyByZW9yZGVyIHBhcnRcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG4gICAgICAgICAgICAvLyBkcmFnIHRvIERcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG5cclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3MnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ25vZGVEYXRhQXJyYXknICYmIGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5JbnNlcnQgJiYgcHJvcGVydHlFcXVhbHMoZS5uZXdWYWx1ZSwgJ2lzR3JvdXAnLCB0cnVlKSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiA1LCBuZXdWYWx1ZTogW3RleHQsTmV3IElkZWEsaXNHcm91cCx0cnVlLGxldmVsLDAsbGF5b3V0LGxlZnQsc0V4cGFuZGVkLHRydWUscEV4cGFuZGVkLGZhbHNlLGRFeHBhbmRlZCxmYWxzZSxfX2dvaGFzaGlkLDU0Njg4LGdyb3VwLCxrZXksLTddICwgcHJvcGVydHlOYW1lOiBub2RlRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsMiwxLDIsMiw4LDMsLiw0LDUsNSw2LDYsMiw3LDUsOCwgLDksLSwxMCwxLDExLDQsMTIsOSwxMywuLDE0LDYsMTUsOCwxNiw3LDE3LDVdICwgcHJvcGVydHlOYW1lOiBsb2MgXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogY2hpbGRyZW4gXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnYWRkX3RoaW5nJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICd0ZXh0Jykge1xyXG4gICAgICAgICAgICAvLyBtb3ZlIHRoaW5nXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLGIsMSxiLDIsYiwzLGIsNCxiXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsYSwxLGEsMixhLDMsYSw0LGFdICwgcHJvcGVydHlOYW1lOiB0ZXh0IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ3JlbmFtZV90aGluZyc7XHJcbiAgICAgICAgICAgIGNoYW5nZURlc2NyaXB0aW9uID0gJ1JlbmFtZWQgSWRlYXMnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ25vZGVEYXRhQXJyYXknICYmIGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5SZW1vdmUgJiYgcHJvcGVydHlFcXVhbHMoZS5vbGRWYWx1ZSwgJ2lzR3JvdXAnLCB0cnVlKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlJlbW92ZSwgb2xkUGFyYW06IDUsIG9sZFZhbHVlOiBbdGV4dCxOZXcgSWRlYSxpc0dyb3VwLHRydWUsbGV2ZWwsMCxsYXlvdXQsbGVmdCxzRXhwYW5kZWQsdHJ1ZSxwRXhwYW5kZWQsZmFsc2UsZEV4cGFuZGVkLGZhbHNlLF9fZ29oYXNoaWQsNTQ2ODgsZ3JvdXAsLGtleSwtNyxsb2MsMjI4LjU2MjUgLTE0OS42ODc1LGNoaWxkcmVuLDAsYXR0YWNobWVudHMsXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IG5vZGVEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZGVsZXRlX3RoaW5nJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdub2RlRGF0YUFycmF5JyAmJiBlLmNoYW5nZSA9PSBnby5DaGFuZ2VkRXZlbnQuSW5zZXJ0ICYmIHByb3BlcnR5RXF1YWxzKGUubmV3VmFsdWUsICdpc0dyb3VwJywgZmFsc2UpKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBzbGlkZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbm9kZURhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuSW5zZXJ0LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IDUsIG5ld1ZhbHVlOiBba2V5LHNsaWRlLTAsY2F0ZWdvcnksc2xpZGUsaW5kZXgsMCxpc0dyb3VwLGZhbHNlLHdpZHRoLDIwMCxoZWlnaHQsMjAwLGxvYywxNTYuNTYyNSAtOTcuNjg3NSxsZXZlbCwwLGNoaWxkcmVuLDAsdGl0bGUsLG5vdGVzLCxfX2dvaGFzaGlkLDYzODc3XSAsIHByb3BlcnR5TmFtZTogbm9kZURhdGFBcnJheSBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3ByZXNlbnRlcic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnbm9kZURhdGFBcnJheScgJiYgZS5jaGFuZ2UgPT0gZ28uQ2hhbmdlZEV2ZW50LlJlbW92ZSAmJiBwcm9wZXJ0eUVxdWFscyhlLm9sZFZhbHVlLCAnaXNHcm91cCcsIGZhbHNlKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgc2xpZGVcclxuICAgICAgICAgICAgLy9tb2RlbENoYW5nZTogbm9kZURhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogNSwgb2xkVmFsdWU6IFtrZXksc2xpZGUtMCxjYXRlZ29yeSxzbGlkZSxpbmRleCwwLGlzR3JvdXAsZmFsc2Usd2lkdGgsMjAwLGhlaWdodCwyMDAsbG9jLDE1Ni41NjI1IC05Ny42ODc1LGxldmVsLDAsY2hpbGRyZW4sMCx0aXRsZSwsbm90ZXMsLF9fZ29oYXNoaWQsNjM4NzcsJCRoYXNoS2V5LDBYTl0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBub2RlRGF0YUFycmF5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcHJlc2VudGVyJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdsb2MnIHx8IGUucHJvcGVydHlOYW1lID09ICd3aWR0aCcgfHwgZS5wcm9wZXJ0eU5hbWUgPT0gJ2hlaWdodCcpIHtcclxuICAgICAgICAgICAgLy8gbW92ZSB0aGluZyBvciByZXNpemUgc2xpZGVcclxuICAgICAgICAgICAgLy8gbW92ZSBzbGlkZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCwyLDEsNCwyLDMsMywgLDQsLSw1LDEsNiwyLDcsOF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDIsMSw0LDIsMywzLCAsNCwtLDUsMSw2LDIsNyw3XSAsIHByb3BlcnR5TmFtZTogbG9jIFxyXG4gICAgICAgICAgICAvLyByZXNpemUgc2xpZGVcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBoZWlnaHQgXHJcbiAgICAgICAgICAgIC8vIG1vdmUgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsNCwxLDcsMiw5LDMsLiw0LDgsNSw3LDYsNSw3LCAsOCwtLDksMSwxMCwyLDExLDIsMTIsLiwxMyw4LDE0LDcsMTUsNV0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDUsMSw0LDIsMCwzLC4sNCwzLDUsMSw2LDIsNyw1LDgsICw5LC0sMTAsMSwxMSwyLDEyLDEsMTMsLiwxNCwxLDE1LDgsMTYsNywxNyw1XSAsICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ21vdmUnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ2xldmVsJyB8fCBlLnByb3BlcnR5TmFtZSA9PSAnY2hpbGRyZW4nKSB7XHJcbiAgICAgICAgICAgIC8vIHRoZXNlIGF0dHJpYnV0ZXMgYXJlIHVwZGF0ZWQgYXMgYSByZXN1bHQgb2Ygb3RoZXIgYWN0aW9uczsgaWdub3JlXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ2F0dGFjaG1lbnRzJykge1xyXG4gICAgICAgICAgICAvLyBlZGl0ZWQgYXR0YWNobWVudHNcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X2F0dGFjaG1lbnRzJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdzRXhwYW5kZWQnIHx8IGUucHJvcGVydHlOYW1lID09ICdwRXhwYW5kZWQnKSB7XHJcbiAgICAgICAgICAgIC8vIGlnbm9yZSBleHBhbmQvY29sbGFwc2VcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdtb3ZlJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdGaW5pc2hlZFVuZG8nIHx8IGUucHJvcGVydHlOYW1lID09ICdGaW5pc2hlZFJlZG8nKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAndW5kb19yZWRvJztcclxuICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUuY2hhbmdlICE9IGdvLkNoYW5nZWRFdmVudC5UcmFuc2FjdGlvbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogJyArIGUubW9kZWxDaGFuZ2UgK1xyXG4gICAgICAgICAgICAgICAgJywgY2hhbmdlOiAnICsgZS5jaGFuZ2UgK1xyXG4gICAgICAgICAgICAgICAgJywgb2xkUGFyYW06ICcgKyBlLm9sZFBhcmFtICtcclxuICAgICAgICAgICAgICAgICcsIG9sZFZhbHVlOiBbJyArIF8ucGFpcnMoZS5vbGRWYWx1ZSkgKyAnXSAnICtcclxuICAgICAgICAgICAgICAgICcsIG5ld1BhcmFtOiAnICsgZS5uZXdQYXJhbSArXHJcbiAgICAgICAgICAgICAgICAnLCBuZXdWYWx1ZTogWycgKyBfLnBhaXJzKGUubmV3VmFsdWUpICsgJ10gJyArXHJcbiAgICAgICAgICAgICAgICAnLCBwcm9wZXJ0eU5hbWU6ICcgKyBlLnByb3BlcnR5TmFtZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZVR5cGUpIHtcclxuICAgICAgICAgICAgbWFwLmdldEFuYWx5dGljcygpLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY2FsbGluZyBkZWxheWVkQXV0b3NhdmUsIGNoYW5nZVR5cGU6ICcgKyBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgc2VsZi5zYXZlKGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gY29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIGNoZWNraW5nIHByb3BlcnRpZXNcclxuICAgIGZ1bmN0aW9uIHByb3BlcnR5RXF1YWxzKG9iaiwga2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBvYmogIT09IG51bGwgJiYgXy5oYXMob2JqLCBrZXkpICYmIF8ucmVzdWx0KG9iaiwga2V5KSA9PSB2YWx1ZTtcclxuICAgIH1cclxuXHJcblxyXG59OyIsIi8vIG1haW4gY29udHJvbGxlciBjbGFzc1xyXG5cclxud2luZG93LlNhbmRiYW5rRWRpdG9yID0ge307XHJcblxyXG53aW5kb3cuTWFwRWRpdG9yQ3RybCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIGxldCByZXQgPSB7fTtcclxuXHJcbiAgICByZXQubWFwID0gbmV3IFNhbmRiYW5rRWRpdG9yLk1hcChyZXQpO1xyXG5cclxuICAgIC8vIHdpbmRvdy5tYXBEYXRhIGlzIHNldCBpbiBfZm9ybSB2aWV3XHJcbiAgICB2YXIgbWV0YWRhdGEgPSB3aW5kb3cubWFwRGF0YS5tYXAubWV0YWRhdGE7XHJcbiAgICByZXQuc2FuZGJveCA9IG1ldGFkYXRhLnNhbmRib3g7XHJcbiAgICByZXQubWFwRGF0YSA9IHdpbmRvdy5tYXBEYXRhLm1hcC5kYXRhOyAvLyB0aGlzIGdldHMgb3ZlcndyaXR0ZW4gYnkgbG9hZCgpIHVubGVzcyB3ZSBhcmUgaW4gdGhlIHNhbmRib3ggd2l0aCBubyBtYXAgSURcclxuICAgIHJldC5tYXBJZCA9IG1ldGFkYXRhLmlkO1xyXG4gICAgcmV0Lm1hcFRpdGxlID0gbWV0YWRhdGEubmFtZTtcclxuICAgIHJldC5tYXBVc2VyVGFncyA9IG1ldGFkYXRhLnVzZXJUYWdzO1xyXG4gICAgcmV0Lm1hcFVybCA9IG1ldGFkYXRhLnVybDtcclxuICAgIHJldC5jYW5FZGl0ID0gbWV0YWRhdGEuY2FuRWRpdDtcclxuICAgIHJldC51cGRhdGVkQXQgPSBtZXRhZGF0YS51cGRhdGVkQXQ7XHJcbiAgICByZXQudXBkYXRlZEJ5ID0gbWV0YWRhdGEudXBkYXRlZEJ5OyAvLyBJRFxyXG4gICAgcmV0LnVwZGF0ZWRCeU5hbWUgPSBtZXRhZGF0YS51cGRhdGVkQnlOYW1lO1xyXG5cclxuICAgIHJldC5lZGl0aW5nVGl0bGUgPSBmYWxzZTtcclxuXHJcbiAgICByZXQuc2hvd0ltYWdlRXhwb3J0ID0gZmFsc2U7XHJcbiAgICByZXQuaW1hZ2VFeHBvcnRMb2FkaW5nID0gdHJ1ZTtcclxuXHJcbiAgICByZXQuY3VycmVudFRhYiA9IG51bGw7XHJcblxyXG4gICAgLy8gb3ZlcnJpZGUgcGFyZW50IHNjb3BlIChzZWUgdXNlci5qcykgc2luY2Ugd2UncmUgZWRpdGluZyBhIG1hcFxyXG4gICAgLy8kc2NvcGUuY2NzVGFnZ2luZy5tYXBJZCA9ICRzY29wZS5tYXBJZDtcclxuXHJcbiAgICByZXQubWF5YmVTdGFydEVkaXRpbmdUaXRsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChyZXQuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXQuZWRpdGluZ1RpdGxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldC5kb25lRWRpdGluZ1RpdGxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZG9uZUVkaXRpbmdUaXRsZScpO1xyXG4gICAgICAgIHJldC5lZGl0aW5nVGl0bGUgPSBmYWxzZTtcclxuICAgICAgICByZXQubWFwLmdldEF1dG9zYXZlKCkuc2F2ZSgnZWRpdF90aXRsZScpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXQuZWRpdGluZ1RpdGxlS2V5cHJlc3MgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMpIHtcclxuICAgICAgICAgICAgcmV0LmRvbmVFZGl0aW5nVGl0bGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldC5wcmludCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHdpbmRvdy5wcmludCgpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLSBlZGl0IHN0YXR1cyBtZXNzYWdlIGZvciBoZWFkZXIgYmFyIC0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHJldC5lZGl0U3RhdHVzID0gJyc7XHJcblxyXG4gICAgcmV0LkxBU1RfVVBEQVRFRCA9ICcnO1xyXG4gICAgcmV0LlJFQURfT05MWSA9ICdWaWV3IG9ubHknO1xyXG4gICAgcmV0LlNBVklORyA9ICdTYXZpbmcuLi4nO1xyXG4gICAgcmV0LlNBVkVfT0sgPSAnQWxsIGNoYW5nZXMgc2F2ZWQnO1xyXG4gICAgcmV0LlNBVkVfRkFJTEVEID0gJ0NoYW5nZXMgY291bGQgbm90IGJlIHNhdmVkJztcclxuXHJcbiAgICByZXQudXBkYXRlRWRpdFN0YXR1cyA9IGZ1bmN0aW9uKHMpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd1cGRhdGVFZGl0U3RhdHVzOiAnICsgcyk7XHJcbiAgICAgICAgcmV0LmVkaXRTdGF0dXMgPSBzO1xyXG4gICAgICAgIGlmIChzID09IHJldC5TQVZFX0ZBSUxFRCkge1xyXG4gICAgICAgICAgICBhbGVydCgnQ2hhbmdlcyBjb3VsZCBub3QgYmUgc2F2ZWQgLSBwbGVhc2UgY2hlY2sgeW91ciBuZXR3b3JrIGNvbm5lY3Rpb24uJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzID09IHJldC5MQVNUX1VQREFURUQpIHtcclxuICAgICAgICAgICAgdmFyIHRpbWUgPSBtb21lbnQocmV0LnVwZGF0ZWRBdCkuZnJvbU5vdygpO1xyXG4gICAgICAgICAgICB2YXIgYnkgPSAnJztcclxuICAgICAgICAgICAgaWYgKHJldC51cGRhdGVkQnkgPT0gcmV0LnVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgYnkgPSAnYnkgbWUnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJldC51cGRhdGVkQnlOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBieSA9ICdieSAnICsgcmV0LnVwZGF0ZWRCeU5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVE9ETzogc2hvdyAnYnkgbWUnIG9ubHkgZm9yIGVkaXRhYmxlIHNoYXJlZCBtYXBzP1xyXG5cclxuICAgICAgICAgICAgcmV0LmVkaXRTdGF0dXMgPSAnTGFzdCB1cGRhdGVkICcgKyB0aW1lICsgJyAnICsgYnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBMYXN0IGVkaXQgd2FzIFhYIGFnbyBieSBZWVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgcmV0Lm1hcC5pbml0KCk7XHJcblxyXG4gICAgICAgIGlmICghcmV0LnNhbmRib3gpIHtcclxuICAgICAgICAgICAgLy8gb3ZlcnZpZXcgZGlhZ3JhbVxyXG4gICAgICAgICAgICAvL3ZhciBvdmVydmlldyA9IGdvLkdyYXBoT2JqZWN0Lm1ha2UoZ28uT3ZlcnZpZXcsIFwib3ZlcnZpZXctZGlhZ3JhbVwiLCB7XHJcbiAgICAgICAgICAgIC8vICAgIG9ic2VydmVkOiAkc2NvcGUubWFwLmdldERpYWdyYW0oKSxcclxuICAgICAgICAgICAgLy8gICAgY29udGVudEFsaWdubWVudDogZ28uU3BvdC5DZW50ZXJcclxuICAgICAgICAgICAgLy99KTtcclxuICAgICAgICAgICAgLy92YXIgb3V0bGluZSA9IG92ZXJ2aWV3LmJveC5lbGVtZW50cy5maXJzdCgpO1xyXG4gICAgICAgICAgICAvL291dGxpbmUuc3Ryb2tlID0gXCIjMzMzXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmV0Lm1hcFVybCkge1xyXG4gICAgICAgICAgICByZXQubWFwLmxvYWQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXQubWFwLmxvYWRGb3JTYW5kYm94KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXQuYWRkQmVoYXZpb3JzKCk7XHJcbiAgICAgICAgcmV0LmhhbmRsZU5hdmlnYXRpb24oKTtcclxuICAgICAgICByZXQuaGFuZGxlQmFja3NwYWNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbWlzYy4gVUkgYmVoYXZpb3JzIGZvciB0b29sdGlwcywgcG9wdXBzIGV0Yy5cclxuICAgIC8vIFRPRE86IGZpZ3VyZSBvdXQgd2hpY2ggb2YgdGhlc2UgbmVlZCB0byBiZSByZWFwcGxpZWQgYWZ0ZXIgZHluYW1pYyBkYXRhIGNoYW5nZXMgKGUuZy4gTGVzc29uQm9vayBwb3BvdmVycylcclxuICAgIHJldC5hZGRCZWhhdmlvcnMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgLy8gTk9URTogd2UgaGF2ZSB0byB1c2UgcmVndWxhciBib290c3RyYXAgdG9vbHRpcHMgZm9yIHRvb2xiYXIgYnV0dG9ucyAoaW5zdGVhZCBvZiBuZy1ib290c3RyYXAgb25lcylcclxuICAgICAgICAvLyBzbyB3ZSBjYW4gdHVybiB0aGVtIG9mZiBmb3IgbW9iaWxlLiBXZSBhbHNvIHB1dCB0aGUgdG9vbHRpcHMgb24gd3JhcHBlcnMgcmF0aGVyIHRoYW4gb24gdGhlIGFjdHVhbCBcclxuICAgICAgICAvLyBidXR0b25zLCBzbyB3ZSBjYW4gYXZvaWQgdGhlIGlzc3VlIG9mIHN0dWNrIHRvb2x0aXBzIGlmIGEgYnV0dG9uIGdldHMgZGlzYWJsZWQgd2hpbGUgdGhlIHRvb2x0aXAgaXMgc2hvd2luZy5cclxuXHJcbiAgICAgICAgLy9pZiAoIXJldC5pc1RvdWNoRGV2aWNlKCkpIHtcclxuICAgICAgICAvLyAgICAvLyAkKCcudG9vbHRpcC13cmFwcGVyJykudG9vbHRpcCh7XHJcbiAgICAgICAgLy8gICAgLy8gICAgIHBsYWNlbWVudDogJ3RvcCcsXHJcbiAgICAgICAgLy8gICAgLy8gICAgIGNvbnRhaW5lcjogJ2JvZHknXHJcbiAgICAgICAgLy8gICAgLy8gfSk7XHJcblxyXG4gICAgICAgIC8vICAgIC8vICQoJy5kcm9wZG93bi1tZW51IC5idG4nKS50b29sdGlwKHtcclxuICAgICAgICAvLyAgICAvLyAgICAgcGxhY2VtZW50OiAnbGVmdCcsXHJcbiAgICAgICAgLy8gICAgLy8gICAgIGNvbnRhaW5lcjogJ2JvZHknXHJcbiAgICAgICAgLy8gICAgLy8gfSk7IC8vIGZvciBsYXlvdXQgb3B0aW9uc1xyXG5cclxuICAgICAgICAvLyAgICAkKCdoZWFkZXIsICNtYXAtdGl0bGUnKS5ob3ZlcihcclxuICAgICAgICAvLyAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAkKCdib2R5LnByZXNlbnRlci1wbGF5aW5nJykuYWRkQ2xhc3MoJ2hpZGUtaGVhZGVyJyk7XHJcbiAgICAgICAgLy8gICAgICAgIH0sXHJcbiAgICAgICAgLy8gICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgJCgnYm9keS5wcmVzZW50ZXItcGxheWluZycpLnJlbW92ZUNsYXNzKCdoaWRlLWhlYWRlcicpO1xyXG4gICAgICAgIC8vICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgKTtcclxuICAgICAgICAvL31cclxuICAgIH1cclxuXHJcbiAgICByZXQuaGFuZGxlTmF2aWdhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIGNyb3NzLWJyb3dzZXIgdHdlYWtzOlxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIGh0dHA6Ly93d3cub3BlcmEuY29tL3N1cHBvcnQva2Ivdmlldy84MjcvXHJcbiAgICAgICAgICAgIG9wZXJhLnNldE92ZXJyaWRlSGlzdG9yeU5hdmlnYXRpb25Nb2RlKCdjb21wYXRpYmxlJyk7XHJcbiAgICAgICAgICAgIGhpc3RvcnkubmF2aWdhdGlvbk1vZGUgPSAnY29tcGF0aWJsZSc7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBubyBiaWdnaWUuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpbnN0YWxsIGJlZm9yZS11bmxvYWQgaGFuZGxlcjpcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXhpdE1lc3NhZ2UoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIk5hdmlnYXRpbmcgYXdheSBmcm9tIHlvdXIgTWFwIHdpbGwgY2F1c2UgYW55IHVuc2F2ZWQgY2hhbmdlcyB0byBiZSBsb3N0IFwiICtcclxuICAgICAgICAgICAgICAgIFwiKGFueSBjaGFuZ2VzIHlvdSBtYWtlIGFyZSBhdXRvbWF0aWNhbGx5IHNhdmVkLCBidXQgaXQgdGFrZXMgYSBjb3VwbGUgb2Ygc2Vjb25kcykuXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgICAgICAgJCh3aW5kb3cpLmJpbmQoJ2JlZm9yZXVubG9hZCcsIGV4aXRNZXNzYWdlKTtcclxuXHJcbiAgICAgICAgLy8gcHJldmVudCBleGl0IHByb21wdCB3aGVuIHRoZSB1c2VyIGRlbGliZXJhdGVseSBuYXZpZ2F0ZXMgYXdheTpcclxuXHJcbiAgICAgICAgJCgnI2hlYWRlci1yaWdodCBhJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQod2luZG93KS51bmJpbmQoJ2JlZm9yZXVubG9hZCcsIGV4aXRNZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXQuaGFuZGxlQmFja3NwYWNlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIEJBQ0tTUEFDRSA9IDg7XHJcblxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdrZXlkb3duJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEJBQ0tTUEFDRSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKCdib2R5IDpmb2N1cycpLmlzKCc6aW5wdXQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHByZXZlbnQgYWNjaWRlbnRhbCBiYWNrc3BhY2Ugd2hlbiBubyBpbnB1dCBoYXMgZm9jdXM6XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldC5zYWZlQXBwbHkgPSBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZiAoZm4pID09PSAnZnVuY3Rpb24nKSkge1xyXG4gICAgICAgICAgICBmbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0LmlzVG91Y2hEZXZpY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICBpbml0KCk7XHJcblxyXG4gICAgcmV0dXJuIHJldDtcclxufTsiLCJ3aW5kb3cuU2FuZGJhbmtFZGl0b3JPcHRpb25zID0ge307XHJcblxyXG5TYW5kYmFua0VkaXRvck9wdGlvbnMgPSBmdW5jdGlvbigkc2NvcGUpIHtcclxuXHJcbiAgICB0aGlzLm9wZW5Nb2RhbCA9IGZ1bmN0aW9uKG9wdGlvbnMsIG9uU2F2ZURlZmF1bHRzLCBvblVwZGF0ZSkge1xyXG4gICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlX2VkaXRvcl9vcHRpb25zX21vZGFsLmh0bWwnLCAvLyBzZWUgdmlld3MvbWFwcy9fdGVtcGxhdGVfZWRpdG9yX29wdGlvbnNfbW9kYWxcclxuICAgICAgICAgICAgYmFja2Ryb3A6ICdzdGF0aWMnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBvcHRpb25zTW9kYWxDdHJsLFxyXG4gICAgICAgICAgICB3aW5kb3dDbGFzczogJ29wdGlvbnMtbW9kYWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvblNhdmVEZWZhdWx0czogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uU2F2ZURlZmF1bHRzO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25VcGRhdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbigpIHt9KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBjb250cm9sbGVyIGZvciBvcHRpb25zIG1vZGFsIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHZhciBvcHRpb25zTW9kYWxDdHJsID0gZnVuY3Rpb24oJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSwgb3B0aW9ucywgb25TYXZlRGVmYXVsdHMsIG9uVXBkYXRlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5vcHRpb25zID0gb3B0aW9ucztcclxuXHJcbiAgICAgICAgJHNjb3BlLnNldERlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUub2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgb25VcGRhdGUoJHNjb3BlLm9wdGlvbnMpO1xyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnNldERlZmF1bHRzLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBvblNhdmVEZWZhdWx0cygkc2NvcGUub3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG59OyIsIi8vIGZ1bmN0aW9ucyBmb3IgdGhlIGdlbmVyYXRvciAoYWthIFRoaW5rUXVlcnkpXHJcblxyXG52YXIgR2VuZXJhdG9yQ3RybCA9IGZ1bmN0aW9uICgkc2NvcGUpIHtcclxuXHJcbiAgICB2YXIgbWFwID0gJHNjb3BlLm1hcDtcclxuICAgIHZhciBkaWFncmFtID0gJHNjb3BlLm1hcC5nZXREaWFncmFtKCk7XHJcblxyXG4gICAgJHNjb3BlLmNvbmNlcHQxID0gJyc7XHJcbiAgICAkc2NvcGUuY29uY2VwdDIgPSAnJztcclxuXHJcbiAgICAkc2NvcGUuZWNob0NvbmNlcHQxID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS5jb25jZXB0MSB8fCAnLi4uJztcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmVjaG9Db25jZXB0MiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUuY29uY2VwdDIgfHwgJy4uLic7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zd2FwQ29uY2VwdHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdG1wID0gJHNjb3BlLmNvbmNlcHQxO1xyXG4gICAgICAgICRzY29wZS5jb25jZXB0MSA9ICRzY29wZS5jb25jZXB0MjtcclxuICAgICAgICAkc2NvcGUuY29uY2VwdDIgPSB0bXA7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUubWFwSXQgPSBmdW5jdGlvbihxdWVzdGlvbikge1xyXG4gICAgICAgIHN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIG1hcC5nZXRBdXRvc2F2ZSgpLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoJHNjb3BlLnNhbmRib3gpIHtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jbGVhcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBsb2NhdGlvbiBmb3IgaW5zZXJ0ZWQgc3R1ZmZcclxuICAgICAgICB2YXIgZGIgPSBtYXAuY29tcHV0ZU1hcEJvdW5kcygpO1xyXG4gICAgICAgIHZhciB4ID0gZGIueCArIGRiLndpZHRoICsgMjAwO1xyXG4gICAgICAgIHZhciB5ID0gZGIueTtcclxuICAgICAgICBpZiAoaXNOYU4oeCkgfHwgaXNOYU4oeSkpIHtcclxuICAgICAgICAgICAgeCA9IHkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd4LCB5OiAnICsgeCArICcsICcgKyB5KTtcclxuXHJcbiAgICAgICAgLy8gaW5zZXJ0IHRoZSBzdHVmZiBhbmQgZGVzZWxlY3QgaXRcclxuICAgICAgICBxdWVzdGlvbih4LHkpO1xyXG4gICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTsgXHJcblxyXG4gICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICBkaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWFwLmdldFVpKCkucmVzZXRab29tKCk7XHJcblxyXG4gICAgICAgIG1hcC5nZXRBdXRvc2F2ZSgpLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgbWFwLmdldEF1dG9zYXZlKCkuc2F2ZSgnZWRpdF9nZW5lcmF0b3InKTtcclxuICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc2VsZWN0ZWRRdWVzdGlvbiA9IG51bGw7XHJcblxyXG4gICAgJHNjb3BlLnNlbGVjdFF1ZXN0aW9uID0gZnVuY3Rpb24ocXVlc3Rpb24pIHtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRRdWVzdGlvbiA9IHF1ZXN0aW9uO1xyXG4gICAgICAgIGlmICgkc2NvcGUuc2FuZGJveCkge1xyXG4gICAgICAgICAgICAkc2NvcGUubWFwSXQocXVlc3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH07ICAgIFxyXG5cclxuICAgICRzY29wZS5zdXJwcmlzZU1lID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGtleXMgPSBfLmtleXMoJHNjb3BlLnF1ZXJpZXMpO1xyXG4gICAgICAgIHZhciBpID0gXy5yYW5kb20oMCwga2V5cy5sZW5ndGggLSAxKTtcclxuICAgICAgICB2YXIgcXVlc3Rpb24gPSAkc2NvcGUucXVlcmllc1trZXlzW2ldXTtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRRdWVzdGlvbiA9IHF1ZXN0aW9uO1xyXG4gICAgICAgICRzY29wZS5tYXBJdChxdWVzdGlvbik7XHJcblxyXG4gICAgICAgICQoJyNxdWVzdGlvbnMnKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiBpICogMzAgfSwgMTAwMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0gZnVuY3Rpb25zIGZvciBjcmVhdGluZyBlYWNoIG9mIHRoZSBzdHJ1Y3R1cmVzIC0gc2VlIHZpZXdzL21hcHMvZ2VuZXJhdG9yX3RhYiAtLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5xdWVyaWVzID0ge1xyXG5cclxuICAgICAgICBXSEFUX0lTOiBmdW5jdGlvbih4LCB5KSB7ICAvLyAxXHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcxLmRhdGEsICdkZmxhZycsIHRydWUpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcz8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzPycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFdIQVRfSVNfTk9UOiBmdW5jdGlvbih4LCB5KSB7IC8vIDJcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcyBub3Q/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcyBub3Q/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcyBub3Q/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgRElTVElOR1VJU0hfQkVUV0VFTjogZnVuY3Rpb24oeCwgeSkgeyAvLyAzXHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcxLmRhdGEsICdkZmxhZycsIHRydWUpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcz8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzPycpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzIuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdpcz8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ2lzPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAnaXM/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgQ09NUEFSRV9DT05UUkFTVDogZnVuY3Rpb24oeCwgeSkgeyAvLyA0XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDE1MCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMTUwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMi5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgdmFyIHJ0aGluZzEgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAnY29udHJhc3QnKTtcclxuICAgICAgICAgICAgdmFyIHJ0aGluZzIgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAnY29tcGFyZScpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShydGhpbmcxLmxhYmVsZWRMaW5rLmRhdGEsICd0eXBlJywgJ3RvRnJvbScpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShydGhpbmcyLmxhYmVsZWRMaW5rLmRhdGEsICd0eXBlJywgJ3RvRnJvbScpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBBUlRTX09GOiBmdW5jdGlvbih4LCB5KSB7IC8vIDVcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBBUlRfT0Y6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gNlxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICdwYXJ0IG9mPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBBUlRTX0hBVkVfUEFSVFM6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gN1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGNoaWxkMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChjaGlsZDEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQyID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChjaGlsZDIsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoY2hpbGQyLCAncGFydD8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBSX1BBUlRTOiBmdW5jdGlvbih4LCB5KSB7IC8vIDhcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIHZhciBydGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQocnRoaW5nLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHJ0aGluZywgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUF9QQVJUUzogZnVuY3Rpb24oeCwgeSkgeyAvLyA5XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDMwMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQgb2YgJyArICRzY29wZS5lY2hvQ29uY2VwdDIoKSArICc/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydCBzZWVuIGZyb20gdmlld3BvaW50IG9mICcgKyAkc2NvcGUuZWNob0NvbmNlcHQyKCkgKyAnPycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQzID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludCBvZiAnICsgJHNjb3BlLmVjaG9Db25jZXB0MigpICsgJz8nKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcyLCB0aGluZzEpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcyLCBjaGlsZDEpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcyLCBjaGlsZDIpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcyLCBjaGlsZDMpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFJTX1RPX0FORF9CWTogZnVuY3Rpb24oeCwgeSkgeyAvLyAxMFxyXG4gICAgICAgICAgICB2YXIgcmVsYXRlZDEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJ3JlbGF0ZWQgaWRlYT8nKTtcclxuICAgICAgICAgICAgdmFyIHJlbGF0ZWQyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAzMDAsIHkgKyA1MCwgJ3JlbGF0ZWQgaWRlYT8nKTtcclxuICAgICAgICAgICAgdmFyIHJlbGF0ZWQzID0gbWFwLmNyZWF0ZVRoaW5nKHggKyA1MCwgeSArIDMwMCwgJ3JlbGF0ZWQgaWRlYT8nKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAxMzAsIHkgKyAxMzAsICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGluayhyZWxhdGVkMSwgdGhpbmcpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmsocmVsYXRlZDIsIHRoaW5nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rKHJlbGF0ZWQzLCB0aGluZyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHggKyA1MDAsIHkgKyAxNTAsICdpZGVhPycpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyA3NTAsIHkgKyAxNTAsICdpZGVhPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFdIQVRfSVNfUjogZnVuY3Rpb24oeCwgeSkgeyAvLyAxMVxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ2lkZWE/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUEFSVF9SU19BUkU6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTJcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMzAsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSwgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQzID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGNoaWxkMS5kYXRhLCAnbG9jJywgJy0yMCAxMTAnKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoY2hpbGQyLmRhdGEsICdsb2MnLCAnODAgMTEwJyk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGNoaWxkMy5kYXRhLCAnbG9jJywgJzMwIDE5MCcpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMSwgY2hpbGQyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMiwgY2hpbGQzLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMywgY2hpbGQxLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBBUlRfUlNfRVhJU1Q6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTNcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCksICdyaWdodCcpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQxMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQxMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQxMyA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIyID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIzID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMik7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQxMSwgY2hpbGQyMSwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDEyLCBjaGlsZDIyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMTMsIGNoaWxkMjMsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUlNfV0lUSF9PVEhFUlM6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTRcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMjAwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyMDAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzMgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDIwMCwgeSArIDIwMCwgJ2Fub3RoZXIgdGhpbmcnKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nNCA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjAwLCB5ICsgMjAwLCAnYW5vdGhlciB0aGluZycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmczLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmc0LCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMiwgdGhpbmc0LCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMywgdGhpbmc0LCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBBUlRTX09GX1A6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTVcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMTAwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMyA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAxMDAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayh0aGluZzEsIHRoaW5nMik7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUE9JTlRfRk9SOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE2XHJcbiAgICAgICAgICAgIHZhciB0aGluZyA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAnbmV3IHBlcnNwZWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDE1MCwgeSArIDE1MCwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMTUwLCB5ICsgMTUwLCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICB2YXIgcnRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHRoaW5nLCBydGhpbmcpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIEhBU19NVUxUSVBMRV9QUzogZnVuY3Rpb24oeCwgeSkgeyAvLyAxN1xyXG4gICAgICAgICAgICB2YXIgcG9pbnQxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHkgKyA1MCwgJ3ZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIHBvaW50MiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICB2YXIgcG9pbnQzID0gbWFwLmNyZWF0ZVRoaW5nKHggKyA1MDAsIHkgKyA1MCwgJ3ZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSArIDI1MCwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50MSwgdmlldyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDIsIHZpZXcpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsocG9pbnQzLCB2aWV3KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBQQVJUU19GUk9NX01VTFRJUExFX1BTOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE4XHJcbiAgICAgICAgICAgIHZhciBwb2ludDEgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDEwMCwgeSwgJ3ZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIHBvaW50MiA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMTAwLCB5ICsgMTI1LCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICB2YXIgcG9pbnQzID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHkgKyAyNTAsICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZyA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMTUwLCB5ICsgMjUsICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDMgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDEsIGNoaWxkMSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDEsIGNoaWxkMik7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDIsIGNoaWxkMik7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDMsIGNoaWxkMyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgV0hBVF9BQk9VVDogZnVuY3Rpb24oeCwgeSkgeyAvLyAxOVxyXG4gICAgICAgICAgICAkc2NvcGUucXVlcmllcy5XSEFUX0lTKHgsIHkpO1xyXG4gICAgICAgICAgICAkc2NvcGUucXVlcmllcy5QQVJUU19PRih4ICsgMzAwLCB5KTtcclxuICAgICAgICAgICAgJHNjb3BlLnF1ZXJpZXMuUEFSVFNfRlJPTV9NVUxUSVBMRV9QUyh4ICsgNzAwLCB5KTtcclxuICAgICAgICAgICAgJHNjb3BlLnF1ZXJpZXMuUlNfVE9fQU5EX0JZKHgsIHkgKyA0MDApO1xyXG4gICAgICAgIH1cclxuICAgIH07IC8vIHF1ZXJpZXNcclxuXHJcbn07XHJcblxyXG5TYW5kYmFua0VkaXRvci5HZW5lcmF0b3IgPSBmdW5jdGlvbiAoJHNjb3BlLCBtYXApIHtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gTkI6IGdlbmVyYXRvciBpcyBvcGVuZWQgb24gbG9hZCBvZiBlbXB0eSBtYXA7IHNlZSBtYXAuanM6bG9hZCgpXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICBpZiAob2xkVmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX0dFTkVSQVRPUikgeyAvLyBjbG9zaW5nIHRhYlxyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChuZXdWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfR0VORVJBVE9SKSB7IC8vIG9wZW5pbmcgdGFiXHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZCh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoZXNlIGdldCBmaWx0ZXJlZCBvdXQgaW4gTGVzc29uQm9va1xyXG4gICAgdGhpcy5nZXRQbGFjZWhvbGRlcklkZWFOYW1lcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBbJ2lzPycsICdpcyBub3Q/JywgJ3BhcnQ/JywgJ3ZpZXdwb2ludD8nLCAncmVsYXRlZCBpZGVhPycsICdpZGVhPycsXHJcbiAgICAgICAgICAgICAgICAncGFydCBzZWVuIGZyb20gdmlld3BvaW50PycsICdjb250cmFzdD8nLCAnY29tcGFyaXNvbj8nLCAncmVsYXRpb25zaGlwPyddO1xyXG4gICAgfTtcclxufTtcclxuIiwiLy8gbGF5b3V0cyB1c2VkIGluIHRoZSBlZGl0b3IsIGZvciB0aGUgZGlhZ3JhbSBvciBpbmRpdmlkdWFsIEdyb3VwcywgcGx1cyBsYXlvdXQtcmVsYXRlZCBmdW5jdGlvbnNcclxuXHJcblNhbmRiYW5rRWRpdG9yLkxheW91dHMgPSBmdW5jdGlvbihlZGl0b3IsIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHt9O1xyXG5cclxuICAgIHRoaXMuaGFuZGxlRGlhZ3JhbUV2ZW50ID0gZnVuY3Rpb24oZXZlbnROYW1lLCBlKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGlmIChldmVudE5hbWUgPT0gJ0luaXRpYWxMYXlvdXRDb21wbGV0ZWQnKSB7XHJcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25Nb3ZlZCcpIHtcclxuICAgICAgICAgICAgdXBkYXRlU2VsZWN0ZWRQYXJ0TG9jYXRpb25EYXRhKGUpO1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1NlbGVjdGlvbkRlbGV0ZWQnKSB7XHJcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnUGFydENyZWF0ZWQnKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ0xheW91dHMsIFBhcnRDcmVhdGVkJyk7XHJcbiAgICAgICAgICAgIC8vIHNldE5ld1BhcnRMb2NhdGlvbkRhdGEoZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1BhcnRSZXNpemVkJykge1xyXG4gICAgICAgICAgICBzZXRSZXNpemVkUGFydERpbWVuc2lvbkRhdGEoZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ0xpbmtEcmF3bicpIHtcclxuICAgICAgICAgICAgYWRqdXN0TGlua0xheW91dChlLnN1YmplY3QpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdMaW5rUmVsaW5rZWQnKSB7XHJcbiAgICAgICAgICAgIGFkanVzdExpbmtMYXlvdXQoZS5zdWJqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBoYW5kbGUgbG9jYXRpb24vc2l6ZSBhdHRyaWJ1dGVzIGZvciBub2RlcyAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBvbmx5IHVwZGF0ZSB3L2ggZm9yIHNsaWRlcywgYXMgYWxsIG90aGVyIG5vZGUgdHlwZXMgaGF2ZSBmaXhlZCBkaW1lbnNpb25zIGFjY29yZGluZyB0byB0aGUgdGVtcGxhdGVzXHJcbiAgICBmdW5jdGlvbiBzZXRSZXNpemVkUGFydERpbWVuc2lvbkRhdGEoZSkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgbm9kZSA9IGUuc3ViamVjdDtcclxuICAgICAgICBpZiAobm9kZSAmJiBub2RlLmNhdGVnb3J5ID09ICdzbGlkZScpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnUGFydFJlc2l6ZWQ6ICcgKyBub2RlLnBhcnQuYWN0dWFsQm91bmRzKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobm9kZS5kYXRhLCAnd2lkdGgnLCBub2RlLnBhcnQuYWN0dWFsQm91bmRzLndpZHRoKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobm9kZS5kYXRhLCAnaGVpZ2h0Jywgbm9kZS5wYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBzZXQgdGhlICdsb2MnIGF0dHJpYnV0ZSBmb3IgYSBuZXcgdG9wLWxldmVsIG5vZGUgKGNyZWF0ZWQgYnkgZG91YmxlLWNsaWNraW5nKSwgdG8gc3VwcG9ydCBmcmVlaGFuZCBsYXlvdXRcclxuICAgIHRoaXMuc2V0TmV3UGFydExvY2F0aW9uRGF0YSA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IGUuc3ViamVjdDtcclxuICAgICAgICBpZiAobm9kZSAmJiBub2RlLnBhcnQpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkobm9kZS5kYXRhLCAnbG9jJywgbm9kZS5wYXJ0LmxvY2F0aW9uLnggKyAnICcgKyBub2RlLnBhcnQubG9jYXRpb24ueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHVwZGF0ZXMgdGhlICdsb2MnIGF0dHJpYnV0ZSBmb3IgZWFjaCBzZWxlY3RlZCBwYXJ0LCB0byBzdXBwb3J0IGZyZWVoYW5kIGxheW91dCAoZG9lcyBub3QgYXBwbHkgdG8gc2xpZGVzKVxyXG4gICAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0ZWRQYXJ0TG9jYXRpb25EYXRhKGUpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkgeyAvLyB0aGluZ1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRYID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRZID0gMDtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0LmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFggPSBwYXJ0LmNvbnRhaW5pbmdHcm91cC5sb2NhdGlvbi54O1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFkgPSBwYXJ0LmNvbnRhaW5pbmdHcm91cC5sb2NhdGlvbi55O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21vdmluZyBncm91cCwgc3ViamVjdDogJyArIGUuc3ViamVjdCArICcsIHBhcnQ6ICcgKyBwYXJ0ICsgJywgaGVpZ2h0OiAnICsgcGFydC5wYXJ0LmRlc2lyZWRTaXplLmhlaWdodCArICcsIGxvY2F0aW9uOiAnICsgcGFydC5wYXJ0LmxvY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFydC5sb2NhdGlvbi54KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHBhcnQuZGF0YSwgJ2xvYycsIChwYXJ0LmxvY2F0aW9uLnggLSBwYXJlbnRYKSArICcgJyArIChwYXJ0LmxvY2F0aW9uLnkgLSBwYXJlbnRZKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0gY2hhbmdpbmcgbGF5b3V0cyBvZiB0aGluZ3MgYW5kIHRoZWlyIGRlc2NlbmRhbnRzIC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmZyb21BbmRUb05vZGVzQXJlVmlzaWJsZSA9IGZ1bmN0aW9uKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gbGluay5mcm9tTm9kZSAmJlxyXG4gICAgICAgICAgICBsaW5rLnRvTm9kZSAmJlxyXG4gICAgICAgICAgICAhc2VsZi5oYXNDb2xsYXBzZWRBbmNlc3RvcihsaW5rLmZyb21Ob2RlKSAmJlxyXG4gICAgICAgICAgICAhc2VsZi5oYXNDb2xsYXBzZWRBbmNlc3RvcihsaW5rLnRvTm9kZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubGFiZWxOb2RlSXNWaXNpYmxlID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHJldHVybiBsaW5rLmxhYmVsTm9kZXMuY291bnQgJiYgbGluay5sYWJlbE5vZGVzLmZpcnN0KCkudmlzaWJsZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5oYXNDb2xsYXBzZWRBbmNlc3RvciA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgaWYgKCFncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwLmlzU3ViR3JhcGhFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBncm91cCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gdGhpcy5oYXNMaW5rTGFiZWxBbmNlc3RvciA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAvLyAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgIC8vICAgICAgICAgaWYgKCFncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgIC8vICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIC8vICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICBlbHNlIGlmIChncm91cC5jb250YWluaW5nR3JvdXAuaXNMaW5rTGFiZWwpIHtcclxuICAgIC8vICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIGVsc2Uge1xyXG4gICAgLy8gICAgICAgICAgICAgZ3JvdXAgPSBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9O1xyXG5cclxuICAgIHRoaXMuZ2V0SGlnaGVzdEFuY2VzdG9yV2l0aExheW91dCA9IGZ1bmN0aW9uKGdyb3VwLCBsYXlvdXROYW1lcykge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5jb250YWlucyhsYXlvdXROYW1lcywgZ3JvdXAuY29udGFpbmluZ0dyb3VwLmRhdGEubGF5b3V0KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmFyZVNpc3RlcnNJbkludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwMSwgZ3JvdXAyKSB7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwMS5jb250YWluaW5nR3JvdXAgPT0gZ3JvdXAyLmNvbnRhaW5pbmdHcm91cCAmJlxyXG4gICAgICAgICAgICBncm91cDEuY29udGFpbmluZ0dyb3VwICYmXHJcbiAgICAgICAgICAgIF8uY29udGFpbnMoWydsZWZ0JywgJ3JpZ2h0J10sIGdyb3VwMS5jb250YWluaW5nR3JvdXAuZGF0YS5sYXlvdXQpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzTm90V2l0aGluSW52ZW50b3J5TGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gIXNlbGYuaXNXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzUlRoaW5nV2l0aGluSW52ZW50b3J5TGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gZ3JvdXAuaXNMaW5rTGFiZWwgJiYgc2VsZi5pc1dpdGhpbkludmVudG9yeUxheW91dChncm91cCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNXaXRoaW5JbnZlbnRvcnlMYXlvdXQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmlzV2l0aGluTGF5b3V0KGdyb3VwLCBbJ2xlZnQnLCAncmlnaHQnXSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNXaXRoaW5MZWZ0SW52ZW50b3J5TGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydsZWZ0J10pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzV2l0aGluUmlnaHRJbnZlbnRvcnlMYXlvdXQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmlzV2l0aGluTGF5b3V0KGdyb3VwLCBbJ3JpZ2h0J10pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzV2l0aGluRnJlZWhhbmRMYXlvdXQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmlzV2l0aGluTGF5b3V0KGdyb3VwLCBbJ2ZyZWVoYW5kJ10pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzV2l0aGluU3RhY2tlZExheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuaXNXaXRoaW5MYXlvdXQoZ3JvdXAsIFsnc3RhY2tlZCddKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1dpdGhpbkxheW91dCA9IGZ1bmN0aW9uKGdyb3VwLCBsYXlvdXROYW1lcykge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdpc1dpdGhpbkxheW91dDogJyArIGdyb3VwICsgJ2xheW91dHM6ICcgKyBsYXlvdXROYW1lcy5qb2luKCkgKyAnOiBmYWxzZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKF8uY29udGFpbnMobGF5b3V0TmFtZXMsIGdyb3VwLmNvbnRhaW5pbmdHcm91cC5kYXRhLmxheW91dCkpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2lzV2l0aGluTGF5b3V0OiAnICsgZ3JvdXAgKyAnbGF5b3V0czogJyArIGxheW91dE5hbWVzLmpvaW4oKSArICc6IHRydWUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAgPSBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2hvd0xlZnRUZXh0QmxvY2sgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmlzV2l0aGluUmlnaHRJbnZlbnRvcnlMYXlvdXQoZ3JvdXApICYmXHJcbiAgICAgICAgICAgICFzZWxmLmlzV2l0aGluU3RhY2tlZExheW91dChncm91cCkgJiZcclxuICAgICAgICAgICAgIWdyb3VwLmlzTGlua0xhYmVsO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNob3dSaWdodFRleHRCbG9jayA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuaXNXaXRoaW5MZWZ0SW52ZW50b3J5TGF5b3V0KGdyb3VwKSAmJlxyXG4gICAgICAgICAgICAhc2VsZi5pc1dpdGhpblN0YWNrZWRMYXlvdXQoZ3JvdXApICYmXHJcbiAgICAgICAgICAgICFncm91cC5pc0xpbmtMYWJlbDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zZXREZXNjZW5kYW50TGF5b3V0cyA9IGZ1bmN0aW9uKGdyb3VwLCBsYXlvdXROYW1lKSB7XHJcbiAgICAgICAgaWYgKGxheW91dE5hbWUgPT0gJ2xlZnQnIHx8IGxheW91dE5hbWUgPT0gJ3JpZ2h0JyB8fCBsYXlvdXROYW1lID09ICdzdGFja2VkJykge1xyXG4gICAgICAgICAgICB2YXIgaXQgPSBncm91cC5tZW1iZXJQYXJ0cy5pdGVyYXRvcjtcclxuICAgICAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgIXBhcnQuaXNMaW5rTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0LmRhdGEubGF5b3V0ID0gbGF5b3V0TmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNldERlc2NlbmRhbnRMYXlvdXRzKHBhcnQsIGxheW91dE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChsYXlvdXROYW1lID09ICdmcmVlaGFuZCcpIHtcclxuICAgICAgICAgICAgLy8gc3RhY2tlZD9cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGlzYWJsZUxheW91dEZvclNlbGVjdGVkVGhpbmdzID0gZnVuY3Rpb24obGF5b3V0TmFtZSkge1xyXG4gICAgICAgIHZhciBpdCA9IG1hcC5nZXREaWFncmFtKCkuc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIGlmICghaXQuY291bnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydsZWZ0JywgJ3JpZ2h0JywgJ3N0YWNrZWQnXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIHNjYWxpbmcgZnVuY3Rpb25zLCBldGMuIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBDb21wdXRlcyB0aGUgbGV2ZWwgb2YgdGhpcyBncm91cFxyXG4gICAgdGhpcy5jb21wdXRlTGV2ZWwgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NvbXB1dGVMZXZlbCwgcGFydDogJyArIHBhcnQgKyAnLCBjb250YWluaW5nR3JvdXA6ICcgKyBwYXJ0LmNvbnRhaW5pbmdHcm91cCk7XHJcbiAgICAgICAgaWYgKCEoZ3JvdXAgaW5zdGFuY2VvZiBnby5Hcm91cCkgfHwgZ3JvdXAuY29udGFpbmluZ0dyb3VwID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbXB1dGVMZXZlbChncm91cC5jb250YWluaW5nR3JvdXApICsgMTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGdldHMgdGhlIGJhc2ljIHNjYWxpbmcgZm9yIHRoaW5nIHNxdWFyZXMsIGJ5IGxldmVsXHJcbiAgICBmdW5jdGlvbiBnZXRUaGluZ1NjYWxlKGxldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KDAuNDUsIGxldmVsKTsgLy8gMSwgLjQ1LCAuMjAyNSwgLjA5MTEyNSwgLi4uXHJcbiAgICB9XHJcblxyXG4gICAgLy8gdGhpcyBpcyBvbmx5IHVzZWQgZm9yIGdyb3Vwc1xyXG4gICAgdGhpcy5nZXRTY2FsZSA9IGZ1bmN0aW9uKGdyb3VwLCB2aXNpdGVkR3JvdXBLZXlzKSB7XHJcbiAgICAgICAgaWYgKGdyb3VwKSB7XHJcbiAgICAgICAgICAgIC8vIGtlZXAgdHJhY2sgb2YgZ3JvdXBzIHdlJ3ZlIHZpc2l0ZWQgdG8gYXZvaWQgaW5maW5pdGUgcmVjdXJzaW9uXHJcbiAgICAgICAgICAgIC8vIFRPRE86IHRyYWNrIGRvd24gZXhhY3RseSBob3cgaW5maW5pdGUgbG9vcHMgYXJlIG9jY3VycmluZyxcclxuICAgICAgICAgICAgLy8gb3IgSUYgdGhleSBzdGlsbCBhcmUgc2luY2UgbWFwLmNoZWNrTW9kZWwgd2FzIGludHJvZHVjZWQuLi5cclxuICAgICAgICAgICAgaWYgKHZpc2l0ZWRHcm91cEtleXMgJiYgQXJyYXkuaXNBcnJheSh2aXNpdGVkR3JvdXBLZXlzKSkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndmlzaXRlZEdyb3VwS2V5czogJyArIHZpc2l0ZWRHcm91cEtleXMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF8uY29udGFpbnModmlzaXRlZEdyb3VwS2V5cywgZ3JvdXAuZGF0YS5rZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnaGl0IGFscmVhZHkgdmlzaXRlZCBrZXk6ICcgKyBncm91cC5kYXRhLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRHcm91cEtleXMucHVzaChncm91cC5kYXRhLmtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2aXNpdGVkR3JvdXBLZXlzID0gW2dyb3VwLmRhdGEua2V5XTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGdyb3VwLmxhYmVsZWRMaW5rKSB7IC8vIFItdGhpbmdcclxuICAgICAgICAgICAgICAgIHZhciBmcm9tU2NhbGUgPSBzZWxmLmdldFNjYWxlKGdyb3VwLmxhYmVsZWRMaW5rLmZyb21Ob2RlLCB2aXNpdGVkR3JvdXBLZXlzKTtcclxuICAgICAgICAgICAgICAgIHZhciB0b1NjYWxlID0gc2VsZi5nZXRTY2FsZShncm91cC5sYWJlbGVkTGluay50b05vZGUsIHZpc2l0ZWRHcm91cEtleXMpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2NhbGUsIGZyb21TY2FsZTogJyArIGZyb21TY2FsZSArICcsIHRvU2NhbGU6ICcgKyB0b1NjYWxlICsgJywgdmlzaXRlZEdyb3VwS2V5czogJyArIHZpc2l0ZWRHcm91cEtleXMuam9pbignLCcpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbihmcm9tU2NhbGUsIHRvU2NhbGUpICogMC41O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0U2NhbGUoZ3JvdXAuY29udGFpbmluZ0dyb3VwLCB2aXNpdGVkR3JvdXBLZXlzKSAqIDAuNDU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VGhpbmdTY2FsZShzZWxmLmNvbXB1dGVMZXZlbChncm91cCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAxOyAvLyBjYW4gb2NjdXIgd2hlbiBkcmFnZ2luZyBSIHRvIGVtcHR5IHNwYWNlXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGdldHMgdGhlIG1hcmdpbiB0byBiZSB1c2VkIGluIHN0YWNrIGxheW91dCBiZXR3ZWVuIHRoaXMgZ3JvdXAncyBjaGlsZHJlblxyXG4gICAgZnVuY3Rpb24gZ2V0U3RhY2tNYXJnaW4oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gKDEwIC8gMC40NSkgKiBzZWxmLmdldFNjYWxlKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBnZXRzIHRoZSBtYXJnaW4gdG8gYmUgdXNlZCBpbiBzdGFjayBsYXlvdXQgYmV0d2VlbiB0aGlzIGdyb3VwJ3MgY2hpbGRyZW5cclxuICAgIGZ1bmN0aW9uIGdldEludmVudG9yeU1hcmdpbihncm91cCkge1xyXG4gICAgICAgIGlmIChzZWxmLmNvbXB1dGVMZXZlbChncm91cCkgPD0gMikge1xyXG4gICAgICAgICAgICByZXR1cm4gMTAgKiBzZWxmLmdldFNjYWxlKGdyb3VwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMyAqIHNlbGYuZ2V0U2NhbGUoZ3JvdXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdldEV4dGVybmFsVGV4dFNjYWxlID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gMSAtIDAuMSAqIHNlbGYuY29tcHV0ZUxldmVsKGdyb3VwKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRMaW5rU3Ryb2tlV2lkdGggPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgdmFyIGZyb21TY2FsZSA9IHNlbGYuZ2V0U2NhbGUobGluay5mcm9tTm9kZSk7XHJcbiAgICAgICAgdmFyIHRvU2NhbGUgPSBzZWxmLmdldFNjYWxlKGxpbmsudG9Ob2RlKTtcclxuICAgICAgICByZXR1cm4gKGxpbmsuaXNTZWxlY3RlZCA/IDQgOiAyKSAqIE1hdGgubWluKGZyb21TY2FsZSwgdG9TY2FsZSk7IC8vIDIsIC45LCAuLi5cclxuICAgIH07XHJcblxyXG4gICAgLy8gc2NhbGUgYXJyb3doZWFkcyBiYXNlZCBvbiB0aGUgc21hbGxlc3QgdG8vZnJvbSBub2RlLCBcclxuICAgIC8vIG9yIGp1c3QgdGhlIFRvIG5vZGUgZm9yIFAgbGlua3NcclxuICAgIHRoaXMuZ2V0QXJyb3doZWFkU2NhbGUgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgdmFyIGZyb21TY2FsZSA9IHNlbGYuZ2V0U2NhbGUobGluay5mcm9tTm9kZSk7XHJcbiAgICAgICAgdmFyIHRvU2NhbGUgPSBzZWxmLmdldFNjYWxlKGxpbmsudG9Ob2RlKTtcclxuICAgICAgICB2YXIgbWluU2NhbGUgPSBNYXRoLm1pbihmcm9tU2NhbGUsIHRvU2NhbGUpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJnZXRBcnJvd2hlYWRTY2FsZSwgZnJvbVNjYWxlOiBcIiwgZnJvbVNjYWxlLCAnLCB0b1NjYWxlOiAnLCB0b1NjYWxlLCAnLCBtaW5TY2FsZTogJywgbWluU2NhbGUpO1xyXG4gICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnKSB7XHJcbiAgICAgICAgICAgIG1pblNjYWxlID0gdG9TY2FsZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1pblNjYWxlID49IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEgKiBtaW5TY2FsZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMS41ICogbWluU2NhbGU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBjcmVhdGluZyBuZXcgdGhpbmdzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBSZXR1cm5zIGEgbG9jYXRpb24gZm9yIGEgbmV3IHNpc3RlciBncm91cCAodGhpbmcpIHRvIHRoZSBnaXZlbiBvbmUsIFxyXG4gICAgLy8gd2hpY2ggd2lsbCBub3QgaGlkZSBhbnkgZXhpc3RpbmcgdGhpbmdzIChvdmVybGFwIGlzIGFsbG93ZWQpLiBcclxuICAgIC8vIFRoZSByZXR1cm5lZCBjb29yZGluYXRlcyBhcmUgYWJzb2x1dGUgZm9yIGEgdG9wLWxldmVsIGdyb3VwLCBcclxuICAgIC8vIG9yIHJlbGF0aXZlIHRvIHRoZSBwYXJlbnQgb3RoZXJ3aXNlIC0gc3VpdGFibGUgZm9yIHVzZSB3aXRoIEZyZWVoYW5kRGlhZ3JhbUxheW91dFxyXG4gICAgLy8gb3IgRnJlZWhhbmRMYXlvdXQsIHJlc3AuXHJcbiAgICB0aGlzLmdldE5ld1Npc3RlckxvY2F0aW9uID0gZnVuY3Rpb24oZ3JvdXAsIHdpdGhSKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIC8vIGlmIHdlIGFyZSB3aXRoaW4gYW5vdGhlciBncm91cCwgdGhpbmdzIGFyZSBpbiBhYnNvbHV0ZSBjb29yZGluYXRlc1xyXG4gICAgICAgIC8vIGFuZCBzaXN0ZXJzIGFyZSBwbGFjZWQgYWJvdmUgdGhlIHRoaW5nOyBvdGhlcndpc2UgcmVsYXRpdmUgYW5kIGJlbG93Li4uXHJcbiAgICAgICAgdmFyIGluR3JvdXAgPSAoZ3JvdXAuY29udGFpbmluZ0dyb3VwICE9PSBudWxsKTtcclxuICAgICAgICAvLyAuLi4gZXhjZXB0IGlmIHdpdGhSIGlzIHRydWUsIHdlIGdvIHRvIHRoZSByaWdodCBpbnN0ZWFkIG9mIGFib3ZlIG9yIGJlbG93LlxyXG5cclxuICAgICAgICAvLyBzdGFydCBiZWxvdyBpZiBpbiBncm91cCwgZWxzZSBhYm92ZTsgb3IgdG8gdGhlIHJpZ2h0IGlmIHdpdGhSXHJcbiAgICAgICAgdmFyIHgsIHksIHcsIGg7XHJcbiAgICAgICAgaWYgKHdpdGhSKSB7XHJcbiAgICAgICAgICAgIHggPSBncm91cC5sb2NhdGlvbi54ICsgZ3JvdXAuYWN0dWFsQm91bmRzLndpZHRoICogMi4yO1xyXG4gICAgICAgICAgICB5ID0gZ3JvdXAubG9jYXRpb24ueTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB4ID0gZ3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICAgICAgeSA9IGdyb3VwLmxvY2F0aW9uLnkgKyBncm91cC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICogMS4xICogKGluR3JvdXAgPyAxIDogLTEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3ID0gZ3JvdXAuYWN0dWFsQm91bmRzLndpZHRoO1xyXG4gICAgICAgIGggPSBncm91cC5hY3R1YWxCb3VuZHMuaGVpZ2h0O1xyXG5cclxuICAgICAgICAvLyBjaGVjayBmb3Igb3ZlcmxhcHBpbmcgcGFydHM7IGlmIGZvdW5kLCBpbmNyZW1lbnQgeCx5IGFuZCBjb250aW51ZVxyXG5cclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVjdCA9IG5ldyBnby5SZWN0KHgsIHksIHcsIGgpO1xyXG4gICAgICAgICAgICByZWN0Lmdyb3coaCAvIDEwLCB3IC8gMTAsIGggLyAxMCwgdyAvIDEwKTtcclxuICAgICAgICAgICAgdmFyIHBhcnRzID0gZGlhZ3JhbS5maW5kT2JqZWN0c0luKHJlY3QsIG51bGwsIHNlbGYuaXNHcm91cCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0cy5jb3VudCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldE5ld1Npc3RlckxvY2F0aW9uOiBvdmVybGFwcGluZyBwYXJ0IGZvdW5kIGluICcgKyByZWN0KTtcclxuICAgICAgICAgICAgICAgIGlmICh3aXRoUikge1xyXG4gICAgICAgICAgICAgICAgICAgIHggKz0gdyAvIDEwO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgKz0gaCAvIDEwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB4ICs9IHcgLyAxMDtcclxuICAgICAgICAgICAgICAgICAgICB5ICs9IGggLyAxMCAqIChpbkdyb3VwID8gMSA6IC0xKTsgLy8gbW92ZSBkb3duIGlmIGluIGdyb3VwLCBlbHNlIHVwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0TmV3U2lzdGVyTG9jYXRpb246IG5vIG92ZXJsYXBwaW5nIHBhcnQgZm91bmQgaW4gJyArIHJlY3QpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGluR3JvdXApIHsgLy8gbWFrZSBjb29yZGluYXRlcyByZWxhdGl2ZVxyXG4gICAgICAgICAgICB4IC09IGdyb3VwLmNvbnRhaW5pbmdHcm91cC5sb2NhdGlvbi54O1xyXG4gICAgICAgICAgICB5IC09IGdyb3VwLmNvbnRhaW5pbmdHcm91cC5sb2NhdGlvbi55O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IGdvLlBvaW50KHggKyBNYXRoLnJhbmRvbSgpLCB5ICsgTWF0aC5yYW5kb20oKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFJldHVybnMgYSBsb2NhdGlvbiBmb3IgYSBuZXcgY2hpbGQgZ3JvdXAgKHRoaW5nKSB0byB0aGUgZ2l2ZW4gb25lLFxyXG4gICAgLy8gd2hpY2ggd2lsbCBub3QgaGlkZSBhbnkgZXhpc3RpbmcgY2hpbGRyZW4gKG92ZXJsYXAgaXMgYWxsb3dlZCkuXHJcbiAgICAvLyBUaGUgcmV0dXJuZWQgY29vcmRpbmF0ZXMgYXJlIHJlbGF0aXZlIHRvIHRoZSBwYXJlbnQgZ3JvdXAgLSBzdWl0YWJsZSBmb3IgdXNlIHdpdGggRnJlZWhhbmRMYXlvdXQuXHJcbiAgICB0aGlzLmdldE5ld0NoaWxkTG9jYXRpb24gPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHZhciBncm91cEJvdW5kcyA9IGdyb3VwLmFjdHVhbEJvdW5kcztcclxuICAgICAgICAvLyBOQjogYWxsIHgveSBsb2NhdGlvbnMgYXJlIHJlbGF0aXZlIHRvIHRoZSBncm91cCBsb2NhdGlvblxyXG4gICAgICAgIHZhciB4ID0gMDtcclxuICAgICAgICB2YXIgeSA9IGdyb3VwQm91bmRzLmhlaWdodCAqIDEuMTtcclxuICAgICAgICB2YXIgdywgaDtcclxuICAgICAgICB2YXIgbWVtYmVycyA9IGdyb3VwLm1lbWJlclBhcnRzO1xyXG4gICAgICAgIC8vIGtlZXAgdGVzdGluZyBuZXcgcmVjdGFuZ2xlcyB1bnRpbCB3ZSBmaW5kIG9uZSB0aGF0IGRvZXNuJ3Qgb3ZlcmxhcCB3aXRoIGFueSBleGlzdGluZyBtZW1iZXIgb2YgdGhlIGdyb3VwXHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgbWVtYmVycy5yZXNldCgpO1xyXG4gICAgICAgICAgICB2YXIgb3ZlcmxhcHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIG1lbWJlciwgbmV3UmVjdCwgbWVtYmVyUmVjdDtcclxuICAgICAgICAgICAgd2hpbGUgKG1lbWJlcnMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXIgPSBtZW1iZXJzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lbWJlckJvdW5kcyA9IG1lbWJlci5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgICAgICAgICB3ID0gbWVtYmVyQm91bmRzLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgaCA9IG1lbWJlckJvdW5kcy5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAvLyBmaW5kIHRoZSBleGlzdGluZyBtZW1iZXIncyBhY3R1YWwgYm91bmRzIChhYnNvbHV0ZSBjb29yZHMpXHJcbiAgICAgICAgICAgICAgICBtZW1iZXJSZWN0ID0gbmV3IGdvLlJlY3QobWVtYmVyQm91bmRzLnggLSBncm91cEJvdW5kcy54LCBtZW1iZXJCb3VuZHMueSAtIGdyb3VwQm91bmRzLnksIG1lbWJlckJvdW5kcy53aWR0aCwgbWVtYmVyQm91bmRzLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBuZXdSZWN0ID0gbmV3IGdvLlJlY3QoeCwgeSwgdywgaCk7XHJcbiAgICAgICAgICAgICAgICBuZXdSZWN0Lmdyb3coaCAvIDUsIHcgLyA1LCBoIC8gNSwgdyAvIDUpO1xyXG4gICAgICAgICAgICAgICAgb3ZlcmxhcHMgPSBuZXdSZWN0LmNvbnRhaW5zUmVjdChtZW1iZXJSZWN0KTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXROZXdDaGlsZExvY2F0aW9uIGZvciAnICsgbWVtYmVyICsgJzogbmV3UmVjdCA9ICcgKyBuZXdSZWN0ICsgJywgbWVtYmVyUmVjdCA9ICcgKyBtZW1iZXJSZWN0ICsgJywgb3ZlcmxhcHM6ICcgKyBvdmVybGFwcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3ZlcmxhcHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3ZlcmxhcHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluY3JlbWVudCB4LCB5IGFuZCB0cnkgYWdhaW5cclxuICAgICAgICAgICAgICAgIHggKz0gdyAvIDU7XHJcbiAgICAgICAgICAgICAgICB5ICs9IGggLyA1O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gZm91bmQgYSBnb29kIHNwb3QhXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IGdvLlBvaW50KHgsIHkpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBhIHNpbXBsZXIgdmVyc2lvbiBvZiBnZXROZXdDaGlsZExvY2F0aW9uIHRoYXQgcGxhY2VzIHRoZSBjaGlsZCBvdXRzaWRlIHRoZSBib3VuZHMgb2YgdGhlIGV4aXN0aW5nIGNoaWxkcmVuXHJcbiAgICB0aGlzLmdldE5ld0NoaWxkTG9jYXRpb24yID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgZ3JvdXBCb3VuZHMgPSBncm91cC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgdmFyIGNoaWxkQm91bmRzID0gbWFwLnNhZmVSZWN0KG1hcC5nZXREaWFncmFtKCkuY29tcHV0ZVBhcnRzQm91bmRzKGdyb3VwLm1lbWJlclBhcnRzKSk7XHJcbiAgICAgICAgdmFyIHggPSAwO1xyXG4gICAgICAgIHZhciB5ID0gMDtcclxuICAgICAgICBpZiAoIWdyb3VwLm1lbWJlclBhcnRzLmNvdW50KSB7XHJcbiAgICAgICAgICAgIHkgPSBncm91cEJvdW5kcy5oZWlnaHQgKiAxLjI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgeSA9IGdyb3VwQm91bmRzLmhlaWdodCAqIDEuNCArIGNoaWxkQm91bmRzLmhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0TmV3Q2hpbGRMb2NhdGlvbjIsIGNoaWxkQm91bmRzOiAnICsgY2hpbGRCb3VuZHMgKyAnLCBncm91cEJvdW5kczogJyArIGdyb3VwQm91bmRzICsgJywgeDogJyArIHggKyAnLCB5OiAnICsgeSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBnby5Qb2ludCh4LCB5KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbW92ZSBhbGwgdGhlIGdpdmVuIG5ldyBtZW1iZXIgZ3JvdXBzIHNvIHRoYXQgdGhlaXIgbG9jYXRpb25zIGFyZSByZWxhdGl2ZSB0byB0aGF0IG9mIFxyXG4gICAgLy8gdGhlIHBhcmVudCBhbmQgaXRzIHByZXZpb3VzbHkgZXhpc3RpbmcgbWVtYmVycywgYW5kIHNjYWxlZCBkb3duIGFwcHJvcHJpYXRlbHlcclxuICAgIHRoaXMubGF5b3V0TmV3TWVtYmVyc1JlbGF0aXZlVG8gPSBmdW5jdGlvbihuZXdNZW1iZXJzLCBwYXJlbnQsIG9sZE1lbWJlckJvdW5kcykge1xyXG4gICAgICAgIC8vIGhvdyBiaWcgd2FzIHRoZSBwYXJlbnQgc3lzdGVtIGJlZm9yZSB0aGUgbmV3IGdyb3VwcyB3ZXJlIGFkZGVkP1xyXG4gICAgICAgIHZhciBzeXN0ZW1Cb3VuZHMgPSBwYXJlbnQuYWN0dWFsQm91bmRzLnVuaW9uUmVjdChvbGRNZW1iZXJCb3VuZHMpO1xyXG5cclxuICAgICAgICAvLyBmaWd1cmUgb3V0IG9sZC9uZXcgb3JpZ2lucyAtIHBsYWNlIG5ldyBvcmlnaW4gYmVsb3cgZXhpc3Rpbmcgc3lzdGVtXHJcbiAgICAgICAgdmFyIG9sZEJvdW5kcyA9IG1hcC5nZXREaWFncmFtKCkuY29tcHV0ZVBhcnRzQm91bmRzKG5ld01lbWJlcnMpO1xyXG4gICAgICAgIHZhciBvbGRPcmlnaW4gPSBuZXcgZ28uUG9pbnQob2xkQm91bmRzLngsIG9sZEJvdW5kcy55KTtcclxuICAgICAgICB2YXIgbmV3T3JpZ2luID0gbmV3IGdvLlBvaW50KDAsIHN5c3RlbUJvdW5kcy5oZWlnaHQgKiAxLjIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdsYXlvdXROZXdNZW1iZXJzUmVsYXRpdmVUbywgc3lzdGVtQm91bmRzOiAnICsgc3lzdGVtQm91bmRzICsgJywgb2xkQm91bmRzOiAnICsgb2xkQm91bmRzICtcclxuICAgICAgICAgICAgJywgb2xkT3JpZ2luOiAnICsgb2xkT3JpZ2luICsgJywgbmV3T3JpZ2luOiAnICsgbmV3T3JpZ2luKTtcclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBuZXcgc2NhbGVkIGxvY2F0aW9uc1xyXG4gICAgICAgIC8vIE5COiB3ZSBjYW4gYXNzdW1lIG5ld01lbWJlcnMgYXJlIGFsbCBvbmUgbGV2ZWwgZG93biBmcm9tIHBhcmVudCAoc2VlIG1hcC5hZGRTZWxlY3RlZFRoaW5nc0FzQ2hpbGRyZW5PZiksIFxyXG4gICAgICAgIC8vIHNvIHdlIGp1c3QgbXVsdGlwbHkgYnkgdGhlIHN0YW5kYXJkIHNjYWxlIGZhY3RvclxyXG4gICAgICAgIHZhciBpdCA9IG5ld01lbWJlcnMuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgdmFyIGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgICAgICB2YXIgbmV3WCA9IG5ld09yaWdpbi54ICsgKGdyb3VwQm91bmRzLnggLSBvbGRPcmlnaW4ueCkgKiAwLjQ1O1xyXG4gICAgICAgICAgICB2YXIgbmV3WSA9IG5ld09yaWdpbi55ICsgKGdyb3VwQm91bmRzLnkgLSBvbGRPcmlnaW4ueSkgKiAwLjQ1O1xyXG4gICAgICAgICAgICB2YXIgbmV3TG9jID0gZ28uUG9pbnQuc3RyaW5naWZ5KG5ldyBnby5Qb2ludChuZXdYLCBuZXdZKSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsYXlvdXROZXdNZW1iZXJzUmVsYXRpdmVUbywgZ3JvdXBCb3VuZHM6ICcgKyBncm91cEJvdW5kcyArICcsIG5ld0xvYzogJyArIG5ld0xvYyk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsb2MnLCBuZXdMb2MpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gbW92ZSBhbGwgdGhlIGdpdmVuIG9sZCBtZW1iZXIgZ3JvdXBzIHNvIHRoYXQgdGhlaXIgbG9jYXRpb25zIGFyZSBhYnNvbHV0ZSBhbmQgYWJvdmVcclxuICAgIC8vIHRoZSBwYXJlbnQsIGFuZCBzY2FsZWQgdXAgYXBwcm9wcmlhdGVseVxyXG4gICAgdGhpcy5sYXlvdXRPbGRNZW1iZXJzT3V0c2lkZU9mID0gZnVuY3Rpb24ob2xkTWVtYmVycywgcGFyZW50LCBvbGRNZW1iZXJzQm91bmRzLCBvbGRNZW1iZXJzTGV2ZWwpIHtcclxuICAgICAgICAvLyBmaWd1cmUgb3V0IHNjYWxlIGZhY3RvciAobWVtYmVycyBjYW4gYmUgZHJhZ2dlZCB1cCBtdWx0aXBsZSBsZXZlbHMsIHVubGlrZSBkcmFnZ2luZyBpbnRvIFMpXHJcbiAgICAgICAgdmFyIHNjYWxlRmFjdG9yID0gTWF0aC5wb3coMC40NSwgb2xkTWVtYmVyc0xldmVsIC0gc2VsZi5jb21wdXRlTGV2ZWwocGFyZW50KSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2xheW91dE9sZE1lbWJlcnNPdXRzaWRlT2YsIHNjYWxlRmFjdG9yOiAnICsgc2NhbGVGYWN0b3IpO1xyXG5cclxuICAgICAgICAvLyBmaWd1cmUgb3V0IG9sZC9uZXcgb3JpZ2lucyAtIHBsYWNlIG5ldyBvcmlnaW4gYWJvdmUgcGFyZW50LCB3aXRoIHZlcnRpY2FsIHNwYWNlIGZvciBzY2FsZWQtdXAgb2xkTWVtYmVyc1xyXG4gICAgICAgIHZhciBwYXJlbnRCb3VuZHMgPSBwYXJlbnQuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgIHZhciBvbGRPcmlnaW4gPSBuZXcgZ28uUG9pbnQob2xkTWVtYmVyc0JvdW5kcy54LCBvbGRNZW1iZXJzQm91bmRzLnkpO1xyXG4gICAgICAgIHZhciBuZXdPcmlnaW4gPSBuZXcgZ28uUG9pbnQocGFyZW50Qm91bmRzLngsIHBhcmVudEJvdW5kcy55IC0gb2xkTWVtYmVyc0JvdW5kcy5oZWlnaHQgKiAxLjIgLyBzY2FsZUZhY3Rvcik7XHJcblxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgbmV3IHNjYWxlZCBsb2NhdGlvbnNcclxuICAgICAgICB2YXIgaXQgPSBvbGRNZW1iZXJzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBncm91cEJvdW5kcyA9IGdyb3VwLmFjdHVhbEJvdW5kcztcclxuICAgICAgICAgICAgdmFyIG5ld1ggPSBuZXdPcmlnaW4ueCArIChncm91cEJvdW5kcy54IC0gb2xkT3JpZ2luLngpIC8gc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIHZhciBuZXdZID0gbmV3T3JpZ2luLnkgKyAoZ3JvdXBCb3VuZHMueSAtIG9sZE9yaWdpbi55KSAvIHNjYWxlRmFjdG9yO1xyXG4gICAgICAgICAgICB2YXIgbmV3TG9jID0gZ28uUG9pbnQuc3RyaW5naWZ5KG5ldyBnby5Qb2ludChuZXdYLCBuZXdZKSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsYXlvdXRPbGRNZW1iZXJzT3V0c2lkZU9mLCBwYXJlbnRCb3VuZHM6ICcgKyBwYXJlbnRCb3VuZHMgKyAnLCBvbGRNZW1iZXJzQm91bmRzOiAnICsgb2xkTWVtYmVyc0JvdW5kcyArXHJcbiAgICAgICAgICAgICAgICAnLCBuZXdPcmlnaW46ICcgKyBuZXdPcmlnaW4gKyAnLCBncm91cEJvdW5kczogJyArIGdyb3VwQm91bmRzICsgJywgbmV3TG9jOiAnICsgbmV3TG9jKTtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ2xvYycsIGdvLlBvaW50LnN0cmluZ2lmeShuZXdMb2MpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tIGFjY2Vzc29ycyAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgYXBwcm9wcmlhdGUgbGF5b3V0IGNsYXNzIGJ5IGFiYnJldmlhdGVkIG5hbWVcclxuICAgIHRoaXMuZ2V0TGF5b3V0ID0gZnVuY3Rpb24obGF5b3V0TmFtZSkge1xyXG4gICAgICAgIGlmIChsYXlvdXROYW1lID09ICdmcmVlaGFuZCcpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnJlZWhhbmRMYXlvdXQoKTtcclxuICAgICAgICBlbHNlIGlmIChsYXlvdXROYW1lID09ICdyaWdodCcpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmlnaHRJbnZlbnRvcnlMYXlvdXQoKTtcclxuICAgICAgICBlbHNlIGlmIChsYXlvdXROYW1lID09ICdzdGFja2VkJylcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdGFja2VkTGF5b3V0KCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IExlZnRJbnZlbnRvcnlMYXlvdXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRGcmVlaGFuZERpYWdyYW1MYXlvdXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEZyZWVoYW5kRGlhZ3JhbUxheW91dCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHJldHVybnMgdHJ1ZSBpZiB0aGUgdG8gYW5kIGZyb20gbm9kZXMgZm9yIHRoZSBsaW5rIGhhdmUgYSBjb21tb24gYW5jZXN0b3IgZ3JvdXAgd2l0aCBvbmUgb2YgdGhlIGdpdmVuIGxheW91dCBuYW1lcy5cclxuICAgIC8vIFRPRE86IHZlcmlmeSBsb2dpYyAtIHdoYXQgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHN1Y2ggYW5jZXN0b3JzPyAtIHRoaXMgc2hvdWxkIHJldHVybiB0aGUgaGlnaGVzdCBvbmUuLi5cclxuICAgIGZ1bmN0aW9uIGdldENvbW1vbkFuY2VzdG9yV2l0aExheW91dChncm91cDEsIGdyb3VwMiwgbGF5b3V0TmFtZXMpIHtcclxuICAgICAgICB2YXIgYW5jZXN0b3JzMSA9IHNlbGYuZ2V0QW5jZXN0b3JHcm91cHMoZ3JvdXAxKTtcclxuICAgICAgICB2YXIgYW5jZXN0b3JzMiA9IHNlbGYuZ2V0QW5jZXN0b3JHcm91cHMoZ3JvdXAyKTtcclxuICAgICAgICB2YXIgY29tbW9uQW5jZXN0b3JzID0gXy5pbnRlcnNlY3Rpb24oYW5jZXN0b3JzMSwgYW5jZXN0b3JzMik7XHJcbiAgICAgICAgdmFyIGxheW91dEFuY2VzdG9ycyA9IF8uZmlsdGVyKGNvbW1vbkFuY2VzdG9ycywgZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIF8uaW5kZXhPZihsYXlvdXROYW1lcywgZ3JvdXAuZGF0YS5sYXlvdXQpICE9IC0xO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChsYXlvdXRBbmNlc3RvcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXlvdXRBbmNlc3RvcnNbMF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIGFuY2VzdG9ycyBvZiB0aGlzIGdyb3VwLCBpbmNsdWRpbmcgaXRzZWxmXHJcbiAgICB0aGlzLmdldEFuY2VzdG9yR3JvdXBzID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgYW5jZXN0b3JzID0gW2dyb3VwXTtcclxuICAgICAgICB2YXIgZyA9IGdyb3VwO1xyXG4gICAgICAgIHdoaWxlIChnLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICBhbmNlc3RvcnMucHVzaChnLmNvbnRhaW5pbmdHcm91cCk7XHJcbiAgICAgICAgICAgIGcgPSBnLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ycztcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBGcmVlaGFuZERpYWdyYW1MYXlvdXQoKSB7XHJcbiAgICAgICAgZ28uTGF5b3V0LmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ28uRGlhZ3JhbS5pbmhlcml0KEZyZWVoYW5kRGlhZ3JhbUxheW91dCwgZ28uTGF5b3V0KTtcclxuXHJcbiAgICBGcmVlaGFuZERpYWdyYW1MYXlvdXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiRnJlZWhhbmREaWFncmFtTGF5b3V0XCI7XHJcbiAgICB9O1xyXG5cclxuICAgIEZyZWVoYW5kRGlhZ3JhbUxheW91dC5wcm90b3R5cGUuZG9MYXlvdXQgPSBmdW5jdGlvbihjb2xsKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnRnJlZWhhbmREaWFncmFtTGF5b3V0LmRvTGF5b3V0Jyk7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIC8vIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcIkZyZWVoYW5kIERpYWdyYW0gTGF5b3V0XCIpO1xyXG5cclxuICAgICAgICAvL3ZhbGlkYXRlR3JvdXBMb2NhdGlvbnMoZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKSk7XHJcbiAgICAgICAgdmFyIGdyb3VwcyA9IGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCk7IC8vIGdldCBuZXcgaXRlcmF0b3JcclxuICAgICAgICB3aGlsZSAoZ3JvdXBzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBncm91cHMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmICghZ3JvdXAuaXNMaW5rTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsb2MgPSBnby5Qb2ludC5wYXJzZShncm91cC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICBncm91cC5tb3ZlKG5ldyBnby5Qb2ludChsb2MueCwgbG9jLnkpKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ0ZyZWVoYW5kRGlhZ3JhbUxheW91dCwgZ3JvdXA6ICcgKyBncm91cCArICcgdG8gbG9jYXRpb246ICcgKyBsb2MueCArICcsJyArIGxvYy55KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWxsIGFkanVzdG1lbnQgb2YgbGlua3MgaXMgZG9uZSBmcm9tIGhlcmUsIG5vdCBmcm9tIHRoZSBvdGhlciBsYXlvdXRzLi4uXHJcbiAgICAgICAgZ2V0TGlua3NCeU5vZGVzKHRydWUpO1xyXG4gICAgICAgIHZhciBsaW5rcyA9IGRpYWdyYW0ubGlua3MuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICAvLyBpZiAoaXNOYU4obGluay5sb2NhdGlvbi54KSkge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ2xpbmsgbG9jYXRpb24gaXNOYU4nKTtcclxuICAgICAgICAgICAgLy8gICAgIGxpbmsubW92ZShuZXcgZ28uUG9pbnQoMCwwKSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2xpbmsgbG9jYXRpb246ICcgKyBsaW5rLmxvY2F0aW9uKTtcclxuICAgICAgICAgICAgYWRqdXN0TGlua0xheW91dChsaW5rKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJGcmVlaGFuZCBEaWFncmFtIExheW91dFwiKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIGlmIGFueSBncm91cCBpbiB0aGUgZ2l2ZW4gSXRlcmF0b3IgZG9lcyBub3QgaGF2ZSBhIGxvY2F0aW9uIChkYXRhLmxvYyksIHNldCBvbmVcclxuICAgIC8vIHRoYXQgZG9lc24ndCBvdmVybGFwIHdpdGggdGhlIG90aGVyIG1lbWJlcnNcclxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlR3JvdXBMb2NhdGlvbnMoZ3JvdXBzKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gRnJlZWhhbmRMYXlvdXQoKSB7XHJcbiAgICAgICAgZ28uTGF5b3V0LmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ28uRGlhZ3JhbS5pbmhlcml0KEZyZWVoYW5kTGF5b3V0LCBnby5MYXlvdXQpO1xyXG5cclxuICAgIEZyZWVoYW5kTGF5b3V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBcIkZyZWVoYW5kTGF5b3V0XCI7XHJcbiAgICB9O1xyXG5cclxuICAgIEZyZWVoYW5kTGF5b3V0LnByb3RvdHlwZS5kb0xheW91dCA9IGZ1bmN0aW9uKGNvbGwpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiRnJlZWhhbmQgTGF5b3V0XCIpO1xyXG5cclxuICAgICAgICB2YXIgeCA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICB2YXIgeSA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueTtcclxuXHJcbiAgICAgICAgdmFyIGl0ID0gdGhpcy5ncm91cC5tZW1iZXJQYXJ0cy5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgIXBhcnQuaXNMaW5rTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsb2MgPSBnby5Qb2ludC5wYXJzZShwYXJ0LmRhdGEubG9jKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ0ZyZWVoYW5kTGF5b3V0LCBwYXJ0OiAnICsgcGFydC5kYXRhLnRleHQgKyAnLCBsb2M6ICcgKyBsb2MgKyAnLCBsb2NhdGlvbjogJyArIHBhcnQubG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgcGFydC5tb3ZlKG5ldyBnby5Qb2ludCh4ICsgbG9jLngsIHkgKyBsb2MueSkpO1xyXG4gICAgICAgICAgICAgICAgcGFydC5sYXlvdXQuZG9MYXlvdXQocGFydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJGcmVlaGFuZCBMYXlvdXRcIik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gU3RhY2tlZExheW91dCgpIHtcclxuICAgICAgICBnby5MYXlvdXQuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnby5EaWFncmFtLmluaGVyaXQoU3RhY2tlZExheW91dCwgZ28uTGF5b3V0KTtcclxuXHJcbiAgICBTdGFja2VkTGF5b3V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBcIlN0YWNrZWRMYXlvdXRcIjtcclxuICAgIH07XHJcblxyXG4gICAgU3RhY2tlZExheW91dC5wcm90b3R5cGUuZG9MYXlvdXQgPSBmdW5jdGlvbihjb2xsKSB7XHJcbiAgICAgICAgdGhpcy5kaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJTdGFja2VkIExheW91dFwiKTtcclxuICAgICAgICB2YXIgbWFyZ2luID0gZ2V0U3RhY2tNYXJnaW4odGhpcy5ncm91cCk7XHJcbiAgICAgICAgdmFyIHN0YXJ0WCA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICB2YXIgc3RhcnRZID0gdGhpcy5ncm91cC5sb2NhdGlvbi55ICsgKHRoaXMuZ3JvdXAucGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgbWFyZ2luIC8gMik7XHJcbiAgICAgICAgbGF5b3V0TWVtYmVyc0ZvclN0YWNrZWQodGhpcy5ncm91cCwgc3RhcnRYLCBzdGFydFkpO1xyXG4gICAgICAgIHRoaXMuZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcIlN0YWNrZWQgTGF5b3V0XCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBtYXggeSB2YWx1ZSBhZnRlciBsYXlpbmcgb3V0IHRoZSBsYXN0IHBhcnRcclxuICAgIGZ1bmN0aW9uIGxheW91dE1lbWJlcnNGb3JTdGFja2VkKGdyb3VwLCBzdGFydFgsIHN0YXJ0WSkge1xyXG4gICAgICAgIHZhciBtZW1iZXJzID0gZ2V0T3JkZXJlZE1lbWJlcnMoZ3JvdXApO1xyXG4gICAgICAgIHZhciB4ID0gc3RhcnRYO1xyXG4gICAgICAgIHZhciB5ID0gc3RhcnRZO1xyXG4gICAgICAgIHZhciByb3dDb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIG1heFN0YXJ0WSA9IHN0YXJ0WTtcclxuICAgICAgICBfLmVhY2gobWVtYmVycywgZnVuY3Rpb24ocGFydCkge1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmICFwYXJ0LmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFyZ2luID0gZ2V0U3RhY2tNYXJnaW4ocGFydCk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0Lm1vdmUobmV3IGdvLlBvaW50KHgsIHkpKTtcclxuICAgICAgICAgICAgICAgIHN0YXJ0WSA9IHkgKyBwYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyBtYXJnaW4gLyAyOyAvLyBzdGFydCBZIHBvc2l0aW9uIGZvciBwYXJ0J3MgY2hpbGRyZW5cclxuXHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZDogc3RhcnRpbmcgbGF5b3V0IG9mIGNoaWxkcmVuIG9mICcgKyBwYXJ0ICsgJyBhdCAnICsgTWF0aC5yb3VuZCh4KSArICcsJyArIE1hdGgucm91bmQoc3RhcnRZKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnQuaXNTdWJHcmFwaEV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGF5b3V0IGNoaWxkcmVuIG9mIHRoaXMgcGFydDsgY2hlY2sgaWYgd2UndmUgYWxyZWFkeSBkb25lIGEgdGFsbGVyIHBhcnQrY2hpbGRyZW4gaW4gY3VycmVudCByb3dcclxuICAgICAgICAgICAgICAgICAgICBtYXhTdGFydFkgPSBNYXRoLm1heChtYXhTdGFydFksIGxheW91dE1lbWJlcnNGb3JTdGFja2VkKHBhcnQsIHgsIHN0YXJ0WSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xheW91dE1lbWJlcnNGb3JTdGFja2VkOiBsYWlkIG91dCBjaGlsZHJlbiBvZiAnICsgcGFydCArICcsIG1heFN0YXJ0WSBpcyBub3cgJyArIE1hdGgucm91bmQobWF4U3RhcnRZKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heFN0YXJ0WSA9IE1hdGgubWF4KG1heFN0YXJ0WSwgc3RhcnRZKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBkZWNpZGUgd2hldGhlciB0byB3cmFwXHJcbiAgICAgICAgICAgICAgICByb3dDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvd0NvdW50IDwgMikgeyAvLyBrZWVwIGdvaW5nIG9uIHRoaXMgbGluZVxyXG4gICAgICAgICAgICAgICAgICAgIHggKz0gcGFydC5hY3R1YWxCb3VuZHMud2lkdGggKyBtYXJnaW47XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyB3cmFwIHRvIG5leHQgbGluZVxyXG4gICAgICAgICAgICAgICAgICAgIHggPSBzdGFydFg7XHJcbiAgICAgICAgICAgICAgICAgICAgeSA9IG1heFN0YXJ0WSArIG1hcmdpbiAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93Q291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG1heFN0YXJ0WTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIFJpZ2h0SW52ZW50b3J5TGF5b3V0KCkge1xyXG4gICAgICAgIGdvLkxheW91dC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdvLkRpYWdyYW0uaW5oZXJpdChSaWdodEludmVudG9yeUxheW91dCwgZ28uTGF5b3V0KTtcclxuXHJcbiAgICBSaWdodEludmVudG9yeUxheW91dC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gXCJSaWdodEludmVudG9yeUxheW91dFwiO1xyXG4gICAgfTtcclxuXHJcbiAgICBSaWdodEludmVudG9yeUxheW91dC5wcm90b3R5cGUuZG9MYXlvdXQgPSBmdW5jdGlvbihjb2xsKSB7XHJcbiAgICAgICAgLy90aGlzLmRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcIkludmVudG9yeSBMYXlvdXRcIik7XHJcbiAgICAgICAgdmFyIHN0YXJ0WCA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueCArIHRoaXMuZ3JvdXAuYWN0dWFsQm91bmRzLndpZHRoO1xyXG4gICAgICAgIHZhciBzdGFydFkgPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnkgKyAodGhpcy5ncm91cC5wYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyBnZXRJbnZlbnRvcnlNYXJnaW4odGhpcy5ncm91cCkpO1xyXG4gICAgICAgIGxheW91dE1lbWJlcnNGb3JJbnZlbnRvcnkodGhpcy5ncm91cCwgc3RhcnRYLCBzdGFydFksICdSJyk7XHJcbiAgICAgICAgLy90aGlzLmRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJJbnZlbnRvcnkgTGF5b3V0XCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIExlZnRJbnZlbnRvcnlMYXlvdXQoKSB7XHJcbiAgICAgICAgZ28uTGF5b3V0LmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ28uRGlhZ3JhbS5pbmhlcml0KExlZnRJbnZlbnRvcnlMYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG4gICAgTGVmdEludmVudG9yeUxheW91dC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gXCJMZWZ0SW52ZW50b3J5TGF5b3V0XCI7XHJcbiAgICB9O1xyXG5cclxuICAgIExlZnRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ0xlZnRJbnZlbnRvcnlMYXlvdXQuZG9MYXlvdXQsIGdyb3VwOiAnICsgdGhpcy5ncm91cCArICcsIGxvY2F0aW9uOiAnICsgdGhpcy5ncm91cC5sb2NhdGlvbik7XHJcbiAgICAgICAgLy8gdGhpcy5kaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJJbnZlbnRvcnkgTGF5b3V0XCIpO1xyXG4gICAgICAgIHZhciBzdGFydFggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgdmFyIHN0YXJ0WSA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueSArICh0aGlzLmdyb3VwLnBhcnQuYWN0dWFsQm91bmRzLmhlaWdodCArIGdldEludmVudG9yeU1hcmdpbih0aGlzLmdyb3VwKSk7XHJcbiAgICAgICAgbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeSh0aGlzLmdyb3VwLCBzdGFydFgsIHN0YXJ0WSwgJ0wnKTtcclxuICAgICAgICAvLyB0aGlzLmRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJJbnZlbnRvcnkgTGF5b3V0XCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzaGFyZWQgc3R1ZmYgZm9yIExlZnQvUmlnaHQgSW52ZW50b3J5IGxheW91dHMuLi5cclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBtYXggeSB2YWx1ZSBhZnRlciBsYXlpbmcgb3V0IHRoZSBsYXN0IHBhcnRcclxuICAgIC8vIHNpZGUgaXMgJ0wnIG9yICdSJ1xyXG4gICAgZnVuY3Rpb24gbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeShncm91cCwgc3RhcnRYLCBzdGFydFksIHNpZGUpIHtcclxuICAgICAgICB2YXIgbWVtYmVycyA9IGdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKTtcclxuICAgICAgICBfLmVhY2gobWVtYmVycywgZnVuY3Rpb24ocGFydCkge1xyXG4gICAgICAgICAgICB2YXIgeCA9IHN0YXJ0WDsgLy8gZm9yIGxlZnQsIGp1c3QgdXNlIHhcclxuICAgICAgICAgICAgaWYgKHNpZGUgPT0gJ1InKVxyXG4gICAgICAgICAgICAgICAgeCA9IHN0YXJ0WCAtIHBhcnQuYWN0dWFsQm91bmRzLndpZHRoOyAvLyBmb3IgcmlnaHQsIHJpZ2h0LWFsaWduIHBhcnRzIHRvIHN0YXJ0WFxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5LCBwYXJ0OiAnICsgcGFydCArICcgdG8gbG9jYXRpb246ICcgKyB4ICsgJywnICsgc3RhcnRZKTtcclxuICAgICAgICAgICAgcGFydC5tb3ZlKG5ldyBnby5Qb2ludCh4LCBzdGFydFkpKTtcclxuICAgICAgICAgICAgc3RhcnRZICs9IHBhcnQuYWN0dWFsQm91bmRzLmhlaWdodCArIGdldEludmVudG9yeU1hcmdpbihwYXJ0KTtcclxuICAgICAgICAgICAgaWYgKHBhcnQuaXNTdWJHcmFwaEV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5LCB5IGFmdGVyIG1vdmluZzogJyArIHBhcnQgKyAnID0gJyArIHN0YXJ0WSk7XHJcbiAgICAgICAgICAgICAgICBzdGFydFkgPSBsYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5KHBhcnQsIHN0YXJ0WCwgc3RhcnRZLCBzaWRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBzdGFydFkgKyBnZXRJbnZlbnRvcnlNYXJnaW4oZ3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJldHVybnMgYW4gYXJyYXkgb2YgdGhlIGdyb3VwJ3MgKG5vbi1SLXRoaW5nKSBtZW1iZXJzLCBzb3J0ZWQgYnkgdGhlICdvcmRlcicgZGF0YSBwcm9wZXJ0eVxyXG4gICAgZnVuY3Rpb24gZ2V0T3JkZXJlZE1lbWJlcnMoZ3JvdXApIHtcclxuICAgICAgICB2YXIgbWVtYmVycyA9IG5ldyBnby5MaXN0KCk7XHJcbiAgICAgICAgdmFyIGl0ID0gZ3JvdXAubWVtYmVyUGFydHMuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmICFwYXJ0LmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXJzLmFkZChwYXJ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gXy5zb3J0QnkobWVtYmVycy50b0FycmF5KCksIGZ1bmN0aW9uKG1lbWJlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbWVtYmVyLmRhdGEub3JkZXI7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGxpbmsgcm91dGluZyBhbmQgdmlzaWJpbGl0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBhZGp1c3QgdGhlIHJvdXRpbmcsIHZpc2liaWxpdHkgYW5kIG90aGVyIHByb3BlcnRpZXMgb2YgYSBsaW5rIGFjY29yZGluZyB0byB2YXJpb3VzIHN0cnVjdHVyYWwgY3JpdGVyaWFcclxuICAgIGZ1bmN0aW9uIGFkanVzdExpbmtMYXlvdXQobGluaykge1xyXG4gICAgICAgIGlmICghbGluayB8fCAhbGluay5mcm9tTm9kZSB8fCAhbGluay50b05vZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdmFyIGxvYyA9IGxpbmsubG9jYXRpb247XHJcbiAgICAgICAgLy8gaWYgKGlzTmFOKGxvYy54KSB8fCBpc05hTihsb2MueSkpIHtcclxuICAgICAgICAvLyAgICAgbGluay5sb2NhdGlvbiA9IG5ldyBnby5Qb2ludCgxMCwgMTApO1xyXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnYWRqdXN0TGlua0xheW91dCwgbGluay5sb2NhdGlvbjogJyArIGxpbmsubG9jYXRpb24pO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnYWRqdXN0TGlua0xheW91dCwgbGluay5sb2NhdGlvbjogJyArIGxpbmsubG9jYXRpb24pO1xyXG5cclxuICAgICAgICAvLyBzZWUgaWYgbGluayBpcyB3aXRoaW4gYSBzdGFja2VkIG9yIGludmVudG9yeSBsYXlvdXQsIG9yIGlmIGl0J3MgYSBoaWRkZW4gUCBsaW5rXHJcbiAgICAgICAgdmFyIGludmVudG9yeUFuY2VzdG9yID0gZ2V0Q29tbW9uQW5jZXN0b3JXaXRoTGF5b3V0KGxpbmsuZnJvbU5vZGUsIGxpbmsudG9Ob2RlLCBbJ2xlZnQnLCAncmlnaHQnXSk7XHJcbiAgICAgICAgdmFyIHN0YWNrZWRBbmNlc3RvciA9IGdldENvbW1vbkFuY2VzdG9yV2l0aExheW91dChsaW5rLmZyb21Ob2RlLCBsaW5rLnRvTm9kZSwgWydzdGFja2VkJ10pO1xyXG4gICAgICAgIHZhciBoaWRlUExpbmsgPSAobGluay5kYXRhICYmIGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcgJiYgIW1hcC5nZXRUZW1wbGF0ZXMoKS5zaG93UExpbmsobGluaykpO1xyXG4gICAgICAgIHZhciBjcm93ZGVkUlRoaW5nID0gaGFzQ3Jvd2RlZFJUaGluZyhsaW5rKTtcclxuXHJcbiAgICAgICAgLy8gc2VlIGlmIHRoaXMgaXMgb25lIG9mIG11bHRpcGxlIGxpbmtzIGJldHdlZW4gdGhlIHNhbWUgdHdvIG5vZGVzXHJcbiAgICAgICAgdmFyIHNucG9zID0gc2VsZi5nZXRTYW1lTm9kZXNMaW5rUG9zaXRpb24obGluayk7XHJcbiAgICAgICAgdmFyIGlzTXVsdGlMaW5rID0gKHNucG9zLmNvdW50ID4gMSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc25wb3MgZm9yIGxpbmsgJyArIGxpbmsgKyAnOiAnICsgc25wb3MuaW5kZXggKyAnIG9mICcgKyBzbnBvcy5jb3VudCk7XHJcblxyXG4gICAgICAgIGlmIChpbnZlbnRvcnlBbmNlc3Rvcikge1xyXG4gICAgICAgICAgICBhcHBseUludmVudG9yeUN1cnZlUm91dGluZyhsaW5rLCBzbnBvcywgaW52ZW50b3J5QW5jZXN0b3IuZGF0YS5sYXlvdXQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNNdWx0aUxpbmspIHtcclxuICAgICAgICAgICAgYXBwbHlNdWx0aWxpbmtDdXJ2ZVJvdXRpbmcobGluaywgc25wb3MpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY3Jvd2RlZFJUaGluZykge1xyXG4gICAgICAgICAgICBhcHBseUludmVudG9yeUN1cnZlUm91dGluZyhsaW5rLCBzbnBvcywgJ2xlZnQnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhcHBseVN0cmFpZ2h0Um91dGluZyhsaW5rKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNob3cgbGluayBvbmx5IGlmIGJvdGggY29ubmVjdGVkIHRoaW5ncyBhcmUgdmlzaWJsZSAobm8gY29sbGFwc2VkIGFuY2VzdG9ycyk7IFxyXG4gICAgICAgIC8vIGhpZGUgaWYgYm90aCBhcmUgaW4gc3RhY2tlZCBsYXlvdXQgb3IgaWYgaXQncyBhIFAtbGluayB0aGF0IHdlIHNob3VsZG4ndCBiZSBzaG93aW5nIG5vd1xyXG4gICAgICAgIGlmIChzZWxmLmZyb21BbmRUb05vZGVzQXJlVmlzaWJsZShsaW5rKSAmJiAhc3RhY2tlZEFuY2VzdG9yICYmICFoaWRlUExpbmspIHtcclxuICAgICAgICAgICAgbGluay5vcGFjaXR5ID0gMTtcclxuICAgICAgICAgICAgc2hvd0xhYmVsTm9kZXMobGluaywgdHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGluay5vcGFjaXR5ID0gMDtcclxuICAgICAgICAgICAgc2hvd0xhYmVsTm9kZXMobGluaywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPOiBkZXRlY3Qgd2hlbiB0aGUgUi10aGluZyBvdmVybGFwcyBib3RoIGZyb20gYW5kIHRvIG5vZGVzLCBzbyB3ZSBjYW4gY2hhbmdlIHRoZSBsaW5rIHJvdXRpbmdcclxuICAgIGZ1bmN0aW9uIGhhc0Nyb3dkZWRSVGhpbmcobGluaykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93TGFiZWxOb2RlcyhsaW5rLCBzaG93KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0xhYmVsTm9kZXMsIGxpbms6ICcgKyBsaW5rICsgJywgc2hvdzogJyArIHNob3cpO1xyXG4gICAgICAgIHZhciBpdCA9IGxpbmsubGFiZWxOb2RlcztcclxuICAgICAgICBpZiAoaXQpIHtcclxuICAgICAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBncm91cC52aXNpYmxlID0gc2hvdztcclxuICAgICAgICAgICAgICAgIGlmIChzaG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAubGF5b3V0LmRvTGF5b3V0KGdyb3VwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBsaW5rIGlzIGJldHdlZW4gdHdvIHRoaW5ncyBpbiB0aGUgc2FtZSBpbnZlbnRvcnkgbGF5b3V0IChzaW5nbGUgb3IgbXVsdGlwbGUpLFxyXG4gICAgLy8gbWFrZSB0aGUgbGluZSBtb3JlIG9yIGxlc3MgY2lyY3VsYXIgb24gdGhlIGFwcHJvcHJpYXRlIHNpZGVcclxuICAgIGZ1bmN0aW9uIGFwcGx5SW52ZW50b3J5Q3VydmVSb3V0aW5nKGxpbmssIHNucG9zLCBhbmNlc3RvckxheW91dCkge1xyXG4gICAgICAgIGlmIChhbmNlc3RvckxheW91dCA9PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgbGluay5mcm9tU3BvdCA9IGdvLlNwb3QuTGVmdDtcclxuICAgICAgICAgICAgbGluay50b1Nwb3QgPSBnby5TcG90LkxlZnQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhbmNlc3RvckxheW91dCA9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgIGxpbmsuZnJvbVNwb3QgPSBnby5TcG90LlJpZ2h0O1xyXG4gICAgICAgICAgICBsaW5rLnRvU3BvdCA9IGdvLlNwb3QuUmlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhc3BlY3QgcmF0aW8gZm9yIHRoZSBsaW5rIGN1cnZlcyAtIG1ha2UgdGhpcyBzbWFsbGVyIHRvIG1ha2UgdGhlbSB0YWxsZXIsIGxhcmdlciB0byBtYWtlIHRoZW0gZmF0dGVyXHJcbiAgICAgICAgdmFyIGN1cnZlUmF0aW8gPSAwLjY7XHJcblxyXG4gICAgICAgIHZhciB5MSA9IGxpbmsuZnJvbU5vZGUuYWN0dWFsQm91bmRzLnk7XHJcbiAgICAgICAgdmFyIHkyID0gbGluay50b05vZGUuYWN0dWFsQm91bmRzLnk7XHJcblxyXG4gICAgICAgIHZhciB5RGlmZiA9IE1hdGguYWJzKHkyIC0geTEpO1xyXG4gICAgICAgIHZhciBjID0gKHlEaWZmID09PSAwID8gNTAgOiBNYXRoLmZsb29yKHlEaWZmICogY3VydmVSYXRpbykpICsgMTAwICogKHNucG9zLmluZGV4IC8gc25wb3MuY291bnQpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJ5RGlmZiA9IFwiICsgeURpZmYgKyAnLCBjID0gJyArIGMgKyAnICgnICsgbGluay5mcm9tTm9kZS5kYXRhLnRleHQgKyAnIC0gJyArIHAxICsgJyAtIHRvICcgKyBsaW5rLnRvTm9kZS5kYXRhLnRleHQgKyAnIC0gJyArIHAyICsgJyknKTtcclxuXHJcbiAgICAgICAgbGluay5jdXJ2ZSA9IGdvLkxpbmsuQmV6aWVyO1xyXG4gICAgICAgIGxpbmsuZnJvbUVuZFNlZ21lbnRMZW5ndGggPSBjO1xyXG4gICAgICAgIGxpbmsudG9FbmRTZWdtZW50TGVuZ3RoID0gYztcclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBub24taW52ZW50b3J5IGxpbmsgaXMgb25lIG9mIG11bHRpcGxlIG9uZXMgYmV0d2VlbiBzYW1lIG5vZGVzLCBtYWtlIGl0IGN1cnZlZFxyXG4gICAgZnVuY3Rpb24gYXBwbHlNdWx0aWxpbmtDdXJ2ZVJvdXRpbmcobGluaywgc25wb3MpIHtcclxuICAgICAgICBsaW5rLmZyb21TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsudG9TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsuY3VydmUgPSBnby5MaW5rLkJlemllcjtcclxuICAgICAgICAvLyBjdXJ2aW5lc3MgdmFsdWVzIGJhc2VkIG9uIG51bWJlciBvZiBsaW5rczpcclxuICAgICAgICAvLyAyOiAtMjUgMjVcclxuICAgICAgICAvLyAzOiAtNTAgMCA1MFxyXG4gICAgICAgIC8vIDQ6IC0xMDAgLTUwIDAgNTAgMTAwXHJcbiAgICAgICAgdmFyIHJhbmdlU2l6ZSA9IDEwICogKHNucG9zLmNvdW50IC0gMSk7XHJcbiAgICAgICAgdmFyIHJhbmdlSW5jcmVtZW50ID0gMTA7XHJcbiAgICAgICAgaWYgKHNucG9zLmhhc1JUaGluZykge1xyXG4gICAgICAgICAgICByYW5nZVNpemUgPSAxMDAgKiAoc25wb3MuY291bnQgLSAxKTtcclxuICAgICAgICAgICAgcmFuZ2VJbmNyZW1lbnQgPSAxMDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhZGp1c3QgY3VydmluZXNzIGZvciBzbWFsbGVyIHNjYWxlc1xyXG4gICAgICAgIHZhciBsaW5rU2NhbGVGYWN0b3IgPSBzZWxmLmdldExpbmtTdHJva2VXaWR0aChsaW5rKSAvIDI7IC8vIDIgaXMgbWF4IHN0cm9rZSB3aWR0aFxyXG4gICAgICAgIHJhbmdlU2l6ZSAqPSBsaW5rU2NhbGVGYWN0b3I7XHJcbiAgICAgICAgcmFuZ2VJbmNyZW1lbnQgKj0gbGlua1NjYWxlRmFjdG9yO1xyXG5cclxuICAgICAgICB2YXIgcmFuZ2VTdGFydCA9IDAgLSByYW5nZVNpemUgLyAyO1xyXG5cclxuICAgICAgICBsaW5rLmN1cnZpbmVzcyA9IChyYW5nZVN0YXJ0ICsgcmFuZ2VJbmNyZW1lbnQgKiBzbnBvcy5pbmRleCkgKiBzbnBvcy5vcmllbnRhdGlvbjtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnYXBwbHlNdWx0aWxpbmtDdXJ2ZVJvdXRpbmcsIGxpbms6ICcgKyBsaW5rICsgJywgY3VydmluZXNzOiAnICsgbGluay5jdXJ2aW5lc3MpOyBcclxuICAgIH1cclxuXHJcbiAgICAvLyBkbyBub3JtYWwgc3RyYWlnaHQgbGluZXMgZm9yIGZyZWVoYW5kIGxheW91dCwgb3IgbGlua3MgYmV0d2VlbiBkZXNjZW5kYW50cyBvZiB0aGluZ3Mgd2l0aCBkaWZmZXJlbnQgbGF5b3V0c1xyXG4gICAgZnVuY3Rpb24gYXBwbHlTdHJhaWdodFJvdXRpbmcobGluaykge1xyXG4gICAgICAgIGxpbmsuZnJvbVNwb3QgPSBnby5TcG90LkRlZmF1bHQ7XHJcbiAgICAgICAgbGluay50b1Nwb3QgPSBnby5TcG90LkRlZmF1bHQ7XHJcbiAgICAgICAgbGluay5yb3V0aW5nID0gZ28uTGluay5Ob3JtYWw7XHJcbiAgICAgICAgbGluay5jdXJ2ZSA9IGdvLkxpbmsuTm9uZTtcclxuICAgICAgICBsaW5rLmN1cnZpbmVzcyA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIGNhbGN1bGF0ZSBob3cgbWFueSBsaW5rcyB0aGVyZSBhcmUgYmV0d2VlbiBhIGxpbmsncyBub2RlcyAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBSZXR1cm5zIGFuIG9iamVjdCBvZiB0aGUgZm9ybWF0IHsgaW5kZXg6IDEsIGNvdW50OiAyLCBvcmllbnRhdGlvbjogLTEsIGhhc1JUaGluZzogZmFsc2UgfSwgXHJcbiAgICAvLyBpbmRpY2F0aW5nIGhvdyBtYW55IG90aGVyIGxpbmtzIHRoZXJlIGFyZSBiZXR3ZWVuIHRoZSBzYW1lIHBhaXIgb2Ygbm9kZXMsXHJcbiAgICAvLyB3aGVyZSB0aGUgZ2l2ZW4gbGluayBmYWxscyB3aXRoaW4gdGhpcyBsaXN0LCBhbmQgd2hhdCBpdHMgb3JpZW50YXRpb24gaXMuXHJcbiAgICB0aGlzLmdldFNhbWVOb2Rlc0xpbmtQb3NpdGlvbiA9IGZ1bmN0aW9uKGxpbmspIHtcclxuICAgICAgICB2YXIgbGlua3NCeU5vZGVzID0gZ2V0TGlua3NCeU5vZGVzKHRydWUpO1xyXG4gICAgICAgIC8vIGdldCBsaW5rcyB3aXRoIHRoZSBzYW1lIGtleSBhcyB0aGlzIG9uZSAoY29ubmVjdGluZyBzYW1lIG5vZGVzKVxyXG4gICAgICAgIHZhciBzYW1lTGlua3MgPSBfLndoZXJlKGxpbmtzQnlOb2Rlcywge1xyXG4gICAgICAgICAgICBrZXk6IGdldFNhbWVOb2Rlc0xpbmtLZXkobGluaylcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gZGVmYXVsdCByZXR1cm4gdmFsdWVcclxuICAgICAgICB2YXIgc25wb3MgPSB7XHJcbiAgICAgICAgICAgIGluZGV4OiAwLFxyXG4gICAgICAgICAgICBjb3VudDogMSxcclxuICAgICAgICAgICAgb3JpZW50YXRpb246IDEsXHJcbiAgICAgICAgICAgIGhhc1JUaGluZzogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIHNldCBpbmRleCwgY291bnQsIG9yaWVudGF0aW9uXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzYW1lTGlua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHNhbWVMaW5rc1tpXS5saW5rID09IGxpbmspIHtcclxuICAgICAgICAgICAgICAgIHNucG9zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiBzYW1lTGlua3MubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiBnZXRMaW5rT3JpZW50YXRpb24obGluaylcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIFJ0aGluZ1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzYW1lTGlua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHNhbWVMaW5rc1tpXS5oYXNSVGhpbmcpIHtcclxuICAgICAgICAgICAgICAgIHNucG9zLmhhc1JUaGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNucG9zO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgX2xpbmtzQnlOb2RlcyA9IG51bGw7XHJcblxyXG4gICAgLy8gcmVmcmVzaGVzIHRoZSBjYWNoZWQgbGlzdCBvZiBhbGwgbGlua3Mgd2l0aCBrZXlzLCB0byBmYWNpbGl0YXRlIGdyb3VwaW5nIHRoZW0gYWNjb3JkaW5nIHRvIGNvbm5lY3RlZCBub2Rlc1xyXG4gICAgZnVuY3Rpb24gZ2V0TGlua3NCeU5vZGVzKHJlZnJlc2gpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRMaW5rc0J5Tm9kZXMnKTtcclxuICAgICAgICBpZiAoIXNlbGYuX2xpbmtzQnlOb2RlcyB8fCByZWZyZXNoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuX2xpbmtzQnlOb2RlcyA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgICAgIHZhciBsaW5rcyA9IGRpYWdyYW0ubGlua3MuaXRlcmF0b3I7XHJcbiAgICAgICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gZ2V0U2FtZU5vZGVzTGlua0tleShsaW5rKTtcclxuICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9saW5rc0J5Tm9kZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleToga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNSVGhpbmc6IChsaW5rLmxhYmVsTm9kZXMuY291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9saW5rc0J5Tm9kZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJucyBhIGtleSB1c2VkIHRvIGdyb3VwIGxpbmtzIGFjY29yZGluZyB0byB3aGljaCBwYWlyIG9mIG5vZGVzIHRoZXkgY29ubmVjdC5cclxuICAgIC8vIFRoZSByZXR1cm5lZCBrZXkgaXMgbm9uLWVtcHR5IGZvciByZWd1bGFyIGxpbmtzIGFuZCBQIGxpbmtzIHRoYXQgc2hvdWxkIGJlIHNob3duIGN1cnJlbnRseSxcclxuICAgIC8vIHNvIHRoYXQgdGhlc2Ugd2lsbCBhbGwgYmUgcm91dGVkIGJ5IHRoZSBzYW1lIHJ1bGVzLiBBIG51bGwga2V5IGlzIHJldHVybmVkIGZvciBhbnkgb3RoZXIgXHJcbiAgICAvLyBsaW5rcywgaW5kaWNhdGluZyB0aGF0IG5vIGdyb3VwaW5nIGlzIHJlcXVpcmVkLlxyXG4gICAgZnVuY3Rpb24gZ2V0U2FtZU5vZGVzTGlua0tleShsaW5rKSB7XHJcbiAgICAgICAgLy8gICAgICAgIGlmIChzZWxmLmlzUkxpbmsobGluaykgfHwgKHNlbGYuaXNQTGluayhsaW5rKSAmJiBtYXAuZ2V0VGVtcGxhdGVzKCkuc2hvd1BMaW5rKGxpbmspKSkge1xyXG4gICAgICAgIGlmIChzZWxmLmlzUkxpbmsobGluaykpIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IFtsaW5rLmZyb21Ob2RlLnRvU3RyaW5nKCksIGxpbmsudG9Ob2RlLnRvU3RyaW5nKCldLnNvcnQoKS5qb2luKCd8Jyk7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2tleTogJyArIGtleSk7XHJcbiAgICAgICAgICAgIHJldHVybiBrZXk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFdlIHVzZSB0aGlzIHRvIGRpc3Rpbmd1aXNoIGFuIEEtQiBsaW5rIGZyb20gYSBCLUEgbGluayAoYmFzZWQgb24gZnJvbU5vZGUgYW5kIHRvTm9kZSwgd2hpY2hcclxuICAgIC8vIGlzIGluZGVwZW5kZW50IG9mIHRoZSBhcnJvd2hlYWQgc2V0dGluZ3MpIHdoZW4gc2V0dGluZyBjdXJ2aW5lc3MsIGJlY2F1c2Ugc2V0dGluZyBjdXJ2aW5lc3MgPSAyNVxyXG4gICAgLy8gb24gYW4gQS1CIGxpbmsgaXMgdGhlIHNhbWUgYXMgY3VydmluZXNzID0gLTI1IG9uIGEgQi1BIGxpbmsuXHJcbiAgICBmdW5jdGlvbiBnZXRMaW5rT3JpZW50YXRpb24obGluaykge1xyXG4gICAgICAgIGlmIChsaW5rLmZyb21Ob2RlICYmIGxpbmsudG9Ob2RlICYmIGxpbmsuZnJvbU5vZGUudG9TdHJpbmcoKSA8IGxpbmsudG9Ob2RlLnRvU3RyaW5nKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBsaW5rIHRlc3RzIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuaXNSTGluayA9IGZ1bmN0aW9uKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gbGluayBpbnN0YW5jZW9mIGdvLkxpbmsgJiYgbGluay5kYXRhICYmICFsaW5rLmRhdGEuY2F0ZWdvcnkgJiYgbGluay5mcm9tTm9kZSAmJiBsaW5rLnRvTm9kZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc0RMaW5rID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHJldHVybiBsaW5rIGluc3RhbmNlb2YgZ28uTGluayAmJiBsaW5rLmRhdGEgJiYgbGluay5kYXRhLmNhdGVnb3J5ID09ICdEJztcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1BMaW5rID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHJldHVybiBsaW5rIGluc3RhbmNlb2YgZ28uTGluayAmJiBsaW5rLmRhdGEgJiYgbGluay5kYXRhLmNhdGVnb3J5ID09ICdQJztcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc0dyb3VwID0gZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIGdvLkdyb3VwO1xyXG4gICAgfTtcclxufTsiLCJjb25zdCBnbyA9IHdpbmRvdy5nbztcclxuXHJcbi8vIGZ1bmN0aW9ucyBmb3IgY3JlYXRpbmcgYW5kIG1hbmlwdWxhdGluZyB0aGUgbWFwIChpLmUuIERpYWdyYW0pXHJcblxyXG5TYW5kYmFua0VkaXRvci5NYXAgPSBmdW5jdGlvbihlZGl0b3IpIHtcclxuXHJcbiAgICB2YXIgcmV0ID0ge307XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0gY29uc3RhbnRzIC0tLS0tLS0tLS0tLS0tLVxyXG4gICAgcmV0LkxFRlQgPSAnbGVmdCc7XHJcbiAgICByZXQuUklHSFQgPSAncmlnaHQnO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBpbnN0YW5jZSB2YXJzIC0tLS0tLS0tLS1cclxuXHJcbiAgICByZXQuX2RpYWdyYW0gPSBudWxsO1xyXG5cclxuICAgIC8vIGNvbXBvbmVudHNcclxuICAgIHJldC5fYW5hbHl0aWNzID0gbnVsbDtcclxuICAgIHJldC5fYXR0YWNobWVudHMgPSBudWxsO1xyXG4gICAgcmV0Ll9hdXRvc2F2ZSA9IG51bGw7XHJcbiAgICByZXQuX2dlbmVyYXRvciA9IG51bGw7XHJcbiAgICAvL3ZhciBfaGlzdG9yeSA9IG51bGw7XHJcbiAgICByZXQuX2xheW91dHMgPSBudWxsO1xyXG4gICAgcmV0Ll9wZXJzcGVjdGl2ZXMgPSBudWxsO1xyXG4gICAgcmV0Ll9wcmVzZW50ZXIgPSBudWxsO1xyXG4gICAgcmV0Ll9zdGFuZGFyZHMgPSBudWxsO1xyXG4gICAgcmV0Ll90ZW1wbGF0ZXMgPSBudWxsO1xyXG4gICAgcmV0Ll90ZXN0cyA9IG51bGw7XHJcbiAgICByZXQuX3VpID0gbnVsbDtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gY29tcG9uZW50IGFjY2Vzc29ycyAtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgcmV0LmdldENvbXBvbmVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICByZXQuX2FuYWx5dGljcyxcclxuICAgICAgICAgICAgcmV0Ll9hdHRhY2htZW50cyxcclxuICAgICAgICAgICAgcmV0Ll9hdXRvc2F2ZSxcclxuICAgICAgICAgICAgcmV0Ll9nZW5lcmF0b3IsXHJcbiAgICAgICAgICAgIC8vIF9oaXN0b3J5LCBcclxuICAgICAgICAgICAgcmV0Ll9sYXlvdXRzLFxyXG4gICAgICAgICAgICByZXQuX3BlcnNwZWN0aXZlcyxcclxuICAgICAgICAgICAgcmV0Ll9wcmVzZW50ZXIsXHJcbiAgICAgICAgICAgIHJldC5fc3RhbmRhcmRzLFxyXG4gICAgICAgICAgICByZXQuX3RlbXBsYXRlcyxcclxuICAgICAgICAgICAgcmV0Ll90ZXN0cyxcclxuICAgICAgICAgICAgcmV0Ll91aVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0LmdldEFuYWx5dGljcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiByZXQuX2FuYWx5dGljcztcclxuICAgIH07XHJcbiAgICByZXQuZ2V0QXR0YWNobWVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gcmV0Ll9hdHRhY2htZW50cztcclxuICAgIH07XHJcbiAgICByZXQuZ2V0QXV0b3NhdmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gcmV0Ll9hdXRvc2F2ZTtcclxuICAgIH07XHJcbiAgICByZXQuZ2V0R2VuZXJhdG9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHJldC5fZ2VuZXJhdG9yO1xyXG4gICAgfTtcclxuICAgIC8vIHJldC5nZXRIaXN0b3J5ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX2hpc3Rvcnk7IH07XHJcbiAgICByZXQuZ2V0TGF5b3V0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiByZXQuX2xheW91dHM7XHJcbiAgICB9O1xyXG4gICAgcmV0LmdldFBlcnNwZWN0aXZlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiByZXQuX3BlcnNwZWN0aXZlcztcclxuICAgIH07XHJcbiAgICByZXQuZ2V0UHJlc2VudGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHJldC5fcHJlc2VudGVyO1xyXG4gICAgfTtcclxuICAgIHJldC5nZXRTdGFuZGFyZHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gcmV0Ll9zdGFuZGFyZHM7XHJcbiAgICB9O1xyXG4gICAgcmV0LmdldFRlbXBsYXRlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiByZXQuX3RlbXBsYXRlcztcclxuICAgIH07XHJcbiAgICByZXQuZ2V0VGVzdHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gcmV0Ll90ZXN0cztcclxuICAgIH07XHJcbiAgICByZXQuZ2V0VWkgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gcmV0Ll91aTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gbWFwIGluaXQgLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgcmV0LmluaXQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBjb21wb25lbnRzXHJcbiAgICAgICAgcmV0Ll9hbmFseXRpY3MgPSBuZXcgU2FuZGJhbmtFZGl0b3IuQW5hbHl0aWNzKGVkaXRvciwgcmV0KTtcclxuICAgICAgICByZXQuX2F0dGFjaG1lbnRzID0gbmV3IFNhbmRiYW5rRWRpdG9yLkF0dGFjaG1lbnRzKGVkaXRvciwgcmV0KTtcclxuICAgICAgICByZXQuX2F1dG9zYXZlID0gbmV3IFNhbmRiYW5rRWRpdG9yLkF1dG9zYXZlKGVkaXRvciwgcmV0KTtcclxuICAgICAgICByZXQuX2dlbmVyYXRvciA9IG5ldyBTYW5kYmFua0VkaXRvci5HZW5lcmF0b3IoZWRpdG9yLCByZXQpO1xyXG4gICAgICAgIC8vIF9oaXN0b3J5ID0gbmV3IFNhbmRiYW5rRWRpdG9yLkhpc3RvcnkoJHNjb3BlLCByZXQpO1xyXG4gICAgICAgIHJldC5fbGF5b3V0cyA9IG5ldyBTYW5kYmFua0VkaXRvci5MYXlvdXRzKGVkaXRvciwgcmV0KTtcclxuICAgICAgICByZXQuX3BlcnNwZWN0aXZlcyA9IG5ldyBTYW5kYmFua0VkaXRvci5QZXJzcGVjdGl2ZXMoZWRpdG9yLCByZXQpO1xyXG4gICAgICAgIHJldC5fcHJlc2VudGVyID0gbmV3IFNhbmRiYW5rRWRpdG9yLlByZXNlbnRlcihlZGl0b3IsIHJldCk7XHJcbiAgICAgICAgLy9fc3RhbmRhcmRzID0gbmV3IFNhbmRiYW5rRWRpdG9yLlN0YW5kYXJkcygkc2NvcGUsIHJldCk7XHJcbiAgICAgICAgcmV0Ll90ZW1wbGF0ZXMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVGVtcGxhdGVzKGVkaXRvciwgcmV0KTtcclxuICAgICAgICAvL190ZXN0cyA9IG5ldyBTYW5kYmFua0VkaXRvci5UZXN0cygkc2NvcGUsIHJldCk7XHJcbiAgICAgICAgcmV0Ll91aSA9IG5ldyBTYW5kYmFua0VkaXRvci5VSShlZGl0b3IsIHJldCk7XHJcblxyXG4gICAgICAgIC8vIGNhbGwgaW5pdCBmb3IgZWFjaCBjb21wb25lbnQsIGlmIGRlZmluZWRcclxuICAgICAgICBfLmVhY2gocmV0LmdldENvbXBvbmVudHMoKSwgZnVuY3Rpb24oY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50LmluaXQpXHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuaW5pdCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBjcmVhdGUgZGlhZ3JhbVxyXG4gICAgICAgIHJldC5fZGlhZ3JhbSA9IG5ldyBnby5EaWFncmFtKFwiZGlhZ3JhbVwiKTtcclxuICAgICAgICByZXQuX2RpYWdyYW0uaW5pdGlhbENvbnRlbnRBbGlnbm1lbnQgPSBnby5TcG90LkNlbnRlcjtcclxuICAgICAgICByZXQuX2RpYWdyYW0uaW5pdGlhbFZpZXdwb3J0U3BvdCA9IGdvLlNwb3QuQ2VudGVyO1xyXG4gICAgICAgIHJldC5fZGlhZ3JhbS5pbml0aWFsRG9jdW1lbnRTcG90ID0gZ28uU3BvdC5DZW50ZXI7XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLmhhc0hvcml6b250YWxTY3JvbGxiYXIgPSBmYWxzZTtcclxuICAgICAgICByZXQuX2RpYWdyYW0uaGFzVmVydGljYWxTY3JvbGxiYXIgPSBmYWxzZTtcclxuICAgICAgICByZXQuX2RpYWdyYW0ucGFkZGluZyA9IDUwMDtcclxuICAgICAgICByZXQuX2RpYWdyYW0ubGF5b3V0ID0gcmV0Ll9sYXlvdXRzLmdldEZyZWVoYW5kRGlhZ3JhbUxheW91dCgpO1xyXG5cclxuICAgICAgICByZXQuaW5pdFRvb2xzKCk7XHJcbiAgICAgICAgcmV0Ll90ZW1wbGF0ZXMuaW5pdFRlbXBsYXRlcyhyZXQuX2RpYWdyYW0pOyAvLyBzZXQgdXAgdGVtcGxhdGVzLCBjdXN0b21pemUgdGVtcG9yYXJ5IGxpbmsgYmVoYXZpb3IgXHJcbiAgICAgICAgcmV0LmFkZERpYWdyYW1MaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgcmV0Ll90ZW1wbGF0ZXMuYWRkRXhwb3J0Rm9vdGVyKCk7XHJcblxyXG4gICAgICAgIC8vIHdhdGNoIGZvciB0YWIgY2hhbmdlc1xyXG4gICAgICAgIC8vIFRPRE86IHJlc3RvcmUgbm9uLUFuZ3VsYXIgdmVyc2lvbiBvZiByZXRcclxuICAgICAgICAvLyRzY29wZS4kd2F0Y2goJ2N1cnJlbnRUYWInLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAvLyAgICByZXQuY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICAvL30pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXQgaXMgY2FsbGVkIGJ5IGEgJHNjb3BlLiR3YXRjaCBpbiBpbml0KClcclxuICAgIHJldC5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjdXJyZW50VGFiQ2hhbmdlZCwgbmV3VmFsdWU6ICcgKyBuZXdWYWx1ZSArICcsIG9sZFZhbHVlOiAnICsgb2xkVmFsdWUpO1xyXG4gICAgICAgIC8vIG5vdGlmeSBhbnkgaW50ZXJlc3RlZCBjb21wb25lbnRzXHJcbiAgICAgICAgXy5lYWNoKHJldC5nZXRDb21wb25lbnRzKCksIGZ1bmN0aW9uKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50ICYmIGNvbXBvbmVudC5jdXJyZW50VGFiQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50LmN1cnJlbnRUYWJDaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHJldC5nZXREaWFncmFtID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHJldC5fZGlhZ3JhbTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbWlzYy4gdG9vbCBjb25maWd1cmF0aW9uXHJcbiAgICByZXQuaW5pdFRvb2xzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gZGlzYWJsZSBjbGlja2luZyBvbiBUZXh0QmxvY2tzIHRvIGVkaXQgLSB3ZSB3aWxsIGludm9rZSBlZGl0aW5nIGluIG90aGVyIHdheXNcclxuICAgICAgICByZXQuX2RpYWdyYW0uYWxsb3dUZXh0RWRpdCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBzZWxlY3QgdGV4dCB3aGVuIGFjdGl2YXRpbmcgZWRpdG9yOyBcclxuICAgICAgICAvLyB1c2Ugc2hpZnQtZW50ZXIgdG8gY3JlYXRlIG5ldyBsaW5lcywgZW50ZXIgdG8gZmluaXNoIGVkaXRpbmcgKE5COiBlZGl0b3IgaGFzIG11bHRpbGluZT10cnVlKVxyXG4gICAgICAgIHZhciB0ZXh0VG9vbCA9IHJldC5fZGlhZ3JhbS50b29sTWFuYWdlci50ZXh0RWRpdGluZ1Rvb2w7XHJcbiAgICAgICAgdGV4dFRvb2wuZG9BY3RpdmF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBnby5UZXh0RWRpdGluZ1Rvb2wucHJvdG90eXBlLmRvQWN0aXZhdGUuY2FsbCh0ZXh0VG9vbCk7XHJcbiAgICAgICAgICAgIGlmICh0ZXh0VG9vbC5kZWZhdWx0VGV4dEVkaXRvcikge1xyXG4gICAgICAgICAgICAgICAgdGV4dFRvb2wuZGVmYXVsdFRleHRFZGl0b3Iuc2VsZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGV4dFRvb2wuZGVmYXVsdFRleHRFZGl0b3IuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLndoaWNoID09IDEzICYmICFlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvLlRleHRFZGl0aW5nVG9vbC5wcm90b3R5cGUuYWNjZXB0VGV4dC5jYWxsKHRleHRUb29sLCBnby5UZXh0RWRpdGluZ1Rvb2wuTG9zdEZvY3VzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGhhbmRsZSBkZWxldGUga2V5IG9uIE1hYyAoZGVmYXVsdCBiZWhhdmlvciBvbmx5IHVzZXMgZm4tRGVsZXRlIHRvIGRlbGV0ZSBmcm9tIGNhbnZhcylcclxuICAgICAgICByZXQuX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIuZG9LZXlEb3duID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBlID0gcmV0Ll9kaWFncmFtLmxhc3RJbnB1dDtcclxuICAgICAgICAgICAgdmFyIGNtZCA9IHJldC5fZGlhZ3JhbS5jb21tYW5kSGFuZGxlcjtcclxuICAgICAgICAgICAgaWYgKGUuZXZlbnQud2hpY2ggPT09IDgpIHtcclxuICAgICAgICAgICAgICAgIGNtZC5kZWxldGVTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdvLkNvbW1hbmRIYW5kbGVyLnByb3RvdHlwZS5kb0tleURvd24uY2FsbChjbWQpOyAvLyBjYWxsIGJhc2UgbWV0aG9kIHdpdGggbm8gYXJndW1lbnRzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBbZGlzYWJsZSBrZXlib2FyZCBzaG9ydGN1dHMsIGFzIHRoZXNlIGRvIG5vdCBkbyBjZW50ZXJpbmcgb24gem9vbSwgXHJcbiAgICAgICAgLy8gYW5kIGNhbiBsZWFkIHRvIGNvbmZ1c2lvbiB3aXRoIGJyb3dzZXIgem9vbSAod2hpY2ggZ2V0cyBmaXJlZCBkZXBlbmRzIG9uIGZvY3VzKV1cclxuICAgICAgICAvLyAtIHR1cm5lZCBiYWNrIG9uIHRvIHN1cHBvcnQgcGluY2gvem9vbSBvbiBpUGFkXHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLmFsbG93Wm9vbSA9IHRydWU7XHJcblxyXG4gICAgICAgIHJldC5fZGlhZ3JhbS50b29sTWFuYWdlci5tb3VzZVdoZWVsQmVoYXZpb3IgPSBnby5Ub29sTWFuYWdlci5XaGVlbFpvb207XHJcblxyXG4gICAgICAgIC8vIGRlY2lkZSB3aGF0IGtpbmRzIG9mIFBhcnRzIGNhbiBiZSBhZGRlZCB0byBhIEdyb3VwIG9yIHRvIHRvcC1sZXZlbFxyXG4gICAgICAgIC8vIF9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLm1lbWJlclZhbGlkYXRpb24gPSBmdW5jdGlvbiAoZ3JwLCBub2RlKSB7XHJcbiAgICAgICAgLy8gICAgIC8vaWYgKGdycCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmIG5vZGUgaW5zdGFuY2VvZiBnby5Hcm91cCkgcmV0dXJuIGZhbHNlOyAgLy8gY2Fubm90IGFkZCBHcm91cHMgdG8gR3JvdXBzXHJcbiAgICAgICAgLy8gICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIC8vIH07XHJcblxyXG4gICAgICAgIC8vIGRlZmF1bHQgbGluayBhdHRyaWJ1dGVzXHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sLmFyY2hldHlwZUxpbmtEYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnbm9BcnJvd3MnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gYWxsb3cgZG91YmxlLWNsaWNrIGluIGJhY2tncm91bmQgdG8gY3JlYXRlIGEgbmV3IG5vZGVcclxuICAgICAgICByZXQuX2RpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuYXJjaGV0eXBlTm9kZURhdGEgPSByZXQuZ2V0TmV3VGhpbmdEYXRhKCk7XHJcblxyXG4gICAgICAgIC8vIGhvdyBsb25nIG1vdXNlIG11c3QgYmUgaGVsZCBzdGF0aW9uYXJ5IGJlZm9yZSBzdGFydGluZyBhIGRyYWctc2VsZWN0IChpbnN0ZWFkIG9mIGEgc2Nyb2xsKSAtIGRlZmF1bHQgd2FzIDE3NW1zXHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLnRvb2xNYW5hZ2VyLmRyYWdTZWxlY3RpbmdUb29sLmRlbGF5ID0gNDAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIGhhbmRsaW5nIG9mIERpYWdyYW1FdmVudHMgLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICByZXQuYWRkRGlhZ3JhbUxpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAvLyBEaWFncmFtRXZlbnRzIHRvIGJlIGhhbmRsZWQgaGVyZSBvciBieSBhIGNvbXBvbmVudFxyXG4gICAgICAgIHZhciBkaWFncmFtRXZlbnRzID0gW1xyXG4gICAgICAgICAgICBcIkluaXRpYWxMYXlvdXRDb21wbGV0ZWRcIixcclxuICAgICAgICAgICAgXCJDaGFuZ2VkU2VsZWN0aW9uXCIsXHJcbiAgICAgICAgICAgIFwiQmFja2dyb3VuZFNpbmdsZUNsaWNrZWRcIixcclxuICAgICAgICAgICAgXCJTZWxlY3Rpb25Db3BpZWRcIixcclxuICAgICAgICAgICAgXCJTZWxlY3Rpb25Nb3ZlZFwiLFxyXG4gICAgICAgICAgICBcIlNlbGVjdGlvbkRlbGV0aW5nXCIsXHJcbiAgICAgICAgICAgIFwiU2VsZWN0aW9uRGVsZXRlZFwiLFxyXG4gICAgICAgICAgICBcIlBhcnRDcmVhdGVkXCIsXHJcbiAgICAgICAgICAgIFwiUGFydFJlc2l6ZWRcIixcclxuICAgICAgICAgICAgXCJDbGlwYm9hcmRDaGFuZ2VkXCIsXHJcbiAgICAgICAgICAgIFwiQ2xpcGJvYXJkUGFzdGVkXCIsXHJcbiAgICAgICAgICAgIFwiTGlua0RyYXduXCIsXHJcbiAgICAgICAgICAgIFwiTGlua1JlbGlua2VkXCIsXHJcbiAgICAgICAgICAgIFwiVmlld3BvcnRCb3VuZHNDaGFuZ2VkXCJcclxuICAgICAgICBdO1xyXG4gICAgICAgIF8uZWFjaChkaWFncmFtRXZlbnRzLCBmdW5jdGlvbihldmVudE5hbWUpIHtcclxuICAgICAgICAgICAgcmV0Ll9kaWFncmFtLmFkZERpYWdyYW1MaXN0ZW5lcihldmVudE5hbWUsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIHJldC5icm9hZGNhc3REaWFncmFtRXZlbnQoZXZlbnROYW1lLCBlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldC5fZGlhZ3JhbS5hZGREaWFncmFtTGlzdGVuZXIoXCJCYWNrZ3JvdW5kQ29udGV4dENsaWNrZWRcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiB0dXJuIG9mZiBpbiBwcm9kdWN0aW9uXHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2RpYWdyYW0gbW9kZWw6JyArIF9kaWFncmFtLm1vZGVsLnRvSnNvbigpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBicm9hZGNhc3RzIHRoZSBnaXZlbiBEaWFncmFtRXZlbnQgKHNlZSBhcGlkb2NzIGZvciBnby5EaWFncmFtRXZlbnQpXHJcbiAgICAvLyB0byBhbnkgY29tcG9uZW50cyB0aGF0IG1heSBiZSBpbnRlcmVzdGVkLCBpbmNsdWRpbmcgcmV0IG9uZS5cclxuICAgIHJldC5icm9hZGNhc3REaWFncmFtRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBlKSB7XHJcbiAgICAgICAgcmV0LmhhbmRsZURpYWdyYW1FdmVudChldmVudE5hbWUsIGUpO1xyXG4gICAgICAgIF8uZWFjaChyZXQuZ2V0Q29tcG9uZW50cygpLCBmdW5jdGlvbihjb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQuaGFuZGxlRGlhZ3JhbUV2ZW50KVxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50LmhhbmRsZURpYWdyYW1FdmVudChldmVudE5hbWUsIGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldC5oYW5kbGVEaWFncmFtRXZlbnQgPSBmdW5jdGlvbihldmVudE5hbWUsIGUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdoYW5kbGVEaWFncmFtRXZlbnQ6ICcgKyBldmVudE5hbWUpO1xyXG4gICAgICAgIGlmIChldmVudE5hbWUgPT0gJ0NoYW5nZWRTZWxlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldC5jaGFuZ2VkU2VsZWN0aW9uKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25Db3BpZWQnKSB7XHJcbiAgICAgICAgICAgIHJldC5zZWxlY3Rpb25Db3BpZWQoZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1BhcnRDcmVhdGVkJykge1xyXG4gICAgICAgICAgICByZXQucGFydENyZWF0ZWQoZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ0JhY2tncm91bmRTaW5nbGVDbGlja2VkJykge1xyXG4gICAgICAgICAgICByZXQuX3VpLnNob3dIZWxwVGlwKCdjYW52YXNUaXAnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnTGlua0RyYXduJykge1xyXG4gICAgICAgICAgICByZXQubGlua0RyYXduKGUpO1xyXG4gICAgICAgICAgICByZXQuc2V0TmV3TGlua0RpcmVjdGlvbihlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnTGlua1JlbGlua2VkJykge1xyXG4gICAgICAgICAgICByZXQubGlua1JlbGlua2VkKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdDbGlwYm9hcmRDaGFuZ2VkJykge1xyXG4gICAgICAgICAgICByZXQuY2xpcGJvYXJkQ2hhbmdlZChlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnQ2xpcGJvYXJkUGFzdGVkJykge1xyXG4gICAgICAgICAgICByZXQuY2xpcGJvYXJkUGFzdGVkKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gaGFuZGxlIHpvb20gdG8gcmVnaW9uIGlmIGFwcGxpY2FibGVcclxuICAgIHJldC5jaGFuZ2VkU2VsZWN0aW9uID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdtYXAuY2hhbmdlZFNlbGVjdGlvbicpO1xyXG4gICAgICAgIHJldC5fZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIHJldC5fdWkubWF5YmVab29tVG9SZWdpb24oKTtcclxuICAgICAgICBpZiAocmV0LnJlbGF0aW9uc2hpcHNTZWxlY3RlZCgpKSB7XHJcbiAgICAgICAgICAgIHJldC5fdWkuc2hvd0hlbHBUaXAoJ3JlbGF0aW9uc2hpcFRpcCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXQucGFydENyZWF0ZWQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ01hcCwgUGFydENyZWF0ZWQnKTtcclxuICAgICAgICB2YXIgZ3JvdXAgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKCEoZ3JvdXAgaW5zdGFuY2VvZiBnby5Hcm91cCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsYXlvdXQnLCByZXQuX3VpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5kZWZhdWx0VGhpbmdMYXlvdXQgfHwgJ2xlZnQnKTtcclxuICAgICAgICByZXQuX2xheW91dHMuc2V0TmV3UGFydExvY2F0aW9uRGF0YShlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmaXggbGluayBwb3J0cyB3aGVuIGEgbGluayBpcyBjcmVhdGVkIC0gXHJcbiAgICAvLyB0aGUgUCBhbmQgUiBwb3J0cyBib3RoIGNvdmVyIHRoZSB3aG9sZSBub2RlLCBhbmQgdGhlIFAgcG9ydCBpcyBvbiB0b3Agb2YgdGhlIFIgcG9ydCwgXHJcbiAgICAvLyBzbyBib3RoIFAgYW5kIFIgbGlua3MgZ2V0IHRoZSB0b1BvcnQgc2V0IHRvIFAgYnkgZGVmYXVsdC5cclxuICAgIHJldC5saW5rRHJhd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciBsaW5rID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdsaW5rRHJhd24sIGxpbms6ICcgKyBsaW5rICsgJywgZnJvbVBvcnQ6ICcgKyBsaW5rLmZyb21Qb3J0SWQgKyAnLCB0b1BvcnQ6ICcgKyBsaW5rLnRvUG9ydElkKTtcclxuICAgICAgICBpZiAobGluay5mcm9tUG9ydElkID09ICdQJykge1xyXG4gICAgICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIGNhdGVnb3J5XCIpO1xyXG4gICAgICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ3RvUG9ydCcsICdQJyk7XHJcbiAgICAgICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAnY2F0ZWdvcnknLCAnUCcpO1xyXG4gICAgICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayBjYXRlZ29yeVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcHJldmVudCBsaW5rcyBmcm9tIFIgdG8gUFxyXG4gICAgICAgIGVsc2UgaWYgKGxpbmsuZnJvbVBvcnRJZCA9PSAnUicpIHtcclxuICAgICAgICAgICAgcmV0Ll9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayB0b1BvcnRcIik7XHJcbiAgICAgICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndG9Qb3J0JywgJ1InKTtcclxuICAgICAgICAgICAgcmV0Ll9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgdG9Qb3J0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBmaXggbGluayBwb3J0cyB3aGVuIGEgbGluayBpcyByZWxpbmtlZCAtIFxyXG4gICAgLy8gZHJhZ2dpbmcgZWl0aGVyIGVuZCBvZiBhbiBSLWxpbmsgdG8gYW5vdGhlciBub2RlIHdpbGwgc2V0IHRoZSBjb3JyZXNwb25kaW5nIHBvcnQgdG8gUCwgXHJcbiAgICAvLyBzaW5jZSBQIHBvcnQgaXMgb24gdG9wIG9mIFIgcG9ydCwgc28gd2UgcmVzZXQgYm90aCBwb3J0cyB0byBSIGlmIHRoZSBjYXRlZ29yeSBpcyBub3QgUC5cclxuICAgIHJldC5saW5rUmVsaW5rZWQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgdmFyIGxpbmsgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKCFsaW5rLmRhdGEuY2F0ZWdvcnkgfHwgbGluay5kYXRhLmNhdGVnb3J5ICE9PSAnUCcpIHtcclxuICAgICAgICAgICAgcmV0Ll9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShsaW5rLmRhdGEsICdmcm9tUG9ydCcsICdSJyk7XHJcbiAgICAgICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndG9Qb3J0JywgJ1InKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0LnNldE5ld0xpbmtEaXJlY3Rpb24gPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgdmFyIGxpbmsgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKGxpbmsuZnJvbVBvcnRJZCA9PSAnUicpIHtcclxuICAgICAgICAgICAgcmV0Ll9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayBkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndHlwZScsIHJldC5fdWkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLmRlZmF1bHRSZWxhdGlvbnNoaXBEaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICByZXQuX2RpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayBkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldC5jbGlwYm9hcmRDaGFuZ2VkID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHZhciBwYXJ0cyA9IGUuc3ViamVjdC5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGlwYm9hcmRDaGFuZ2VkOiBwYXJ0ICcgKyBwYXJ0ICsgJywgbWFpbnBhbmVsIHNjYWxlOiAnICsgcGFydC5maW5kT2JqZWN0KCdtYWlucGFuZWwnKS5zY2FsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTkI6IHJldCBpcyBjYWxsZWQgd2hlbiBwYXJ0cyBhcmUgY29waWVkIGJ5IGNvbnRyb2wtZHJhZywgTk9UIHdoZW4gdGhlIGNvcHkgYnV0dG9uIGlzIGNsaWNrZWRcclxuICAgIHJldC5zZWxlY3Rpb25Db3BpZWQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGlvbkNvcGllZCcpO1xyXG4gICAgICAgIHZhciBwYXJ0cyA9IGUuc3ViamVjdC5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgcGFydC5pc1RvcExldmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jID0gZ28uUG9pbnQucGFyc2UocGFydC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0aW9uQ29waWVkOiB1cGRhdGluZyBsb2Mgb2YgcGFydCAnICsgcGFydCArICcgPSAnICsgbG9jICsgJywgc2NhbGU6ICcgKyBwYXJ0LnNjYWxlKTtcclxuICAgICAgICAgICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbG9jJywgKGxvYy54ICsgNTApICsgJyAnICsgKGxvYy55ICsgNTApKTtcclxuICAgICAgICAgICAgICAgIHBhcnQudXBkYXRlVGFyZ2V0QmluZGluZ3MoJ2xvYycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldC5jbGlwYm9hcmRQYXN0ZWQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgdmFyIHBhcnRzID0gZS5zdWJqZWN0Lml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChwYXJ0cy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSBwYXJ0cy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiBwYXJ0LmlzVG9wTGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsb2MgPSBnby5Qb2ludC5wYXJzZShwYXJ0LmRhdGEubG9jKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NsaXBib2FyZFBhc3RlZDogdXBkYXRpbmcgbG9jIG9mIHBhcnQgJyArIHBhcnQgKyAnID0gJyArIGxvYyArICcsIHNjYWxlOiAnICsgcGFydC5zY2FsZSk7XHJcbiAgICAgICAgICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHBhcnQuZGF0YSwgJ2xvYycsIChsb2MueCArIDUwKSArICcgJyArIChsb2MueSArIDUwKSk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0LnVwZGF0ZVRhcmdldEJpbmRpbmdzKCdsb2MnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBjb21wdXRlcyB0aGUgYm91bmRzIG9mIGFsbCBncm91cHMgaW4gdGhlIGRpYWdyYW0gLSByZXQgaW5jbHVkZXMgYWxsIGlkZWFzL3RoaW5ncywgXHJcbiAgICAvLyBhbmQgZXhjbHVkZXMgbm9kZXMsIGluY2x1ZGluZyBzbGlkZXMsIHRoZSBzbGlkZSBibG9ja2VyLCBhbmQgdGhlIGV4cG9ydCBmb290ZXJcclxuICAgIHJldC5jb21wdXRlTWFwQm91bmRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGdyb3VwcyA9IG5ldyBnby5MaXN0KGdvLkdyb3VwKTtcclxuICAgICAgICB2YXIgbm9kZXMgPSByZXQuX2RpYWdyYW0ubm9kZXM7XHJcbiAgICAgICAgd2hpbGUgKG5vZGVzLm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAobm9kZXMudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBzLmFkZChub2Rlcy52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldC5fZGlhZ3JhbS5jb21wdXRlUGFydHNCb3VuZHMoZ3JvdXBzKS5jb3B5KCk7IC8vIHJldHVybiBhIG11dGFibGUgcmVjdFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gd2hhdCBpcyBjdXJyZW50bHkgc2VsZWN0ZWQ/IC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRydWUgaWYgYWxsIHNlbGVjdGVkIGl0ZW1zIGFyZSB0aGluZ3MgKGkuZS4gR3JvdXBzKSwgaW5jbHVkaW5nIHItdGhpbmdzXHJcbiAgICByZXQudGhpbmdzU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoIXJldC5fZGlhZ3JhbSB8fCByZXQuX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgaXQgPSByZXQuX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIGV4YWN0bHkgb25lIHRoaW5nIChHcm91cCkgaXMgc2VsZWN0ZWRcclxuICAgIHJldC50aGluZ1NlbGVjdGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHJldC5fZGlhZ3JhbSAgJiYgcmV0Ll9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA9PSAxICYmIHJldC5fZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKSBpbnN0YW5jZW9mIGdvLkdyb3VwO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBpZiBhIHNpbmdsZSBncm91cCBpcyBzZWxlY3RlZCwgcmV0dXJucyBpdCwgb3RoZXJ3aXNlIHJldHVybnMgbnVsbFxyXG4gICAgcmV0LmdldFVuaXF1ZVRoaW5nU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAocmV0Ll9kaWFncmFtICAmJiByZXQuX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50ID09IDEgJiYgcmV0Ll9kaWFncmFtLnNlbGVjdGlvbi5maXJzdCgpIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldC5fZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldC50aGluZ3NTZWxlY3RlZEFyZU1lbWJlcnNPZiA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKCFyZXQuX2RpYWdyYW0gfHwgcmV0Ll9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGl0ID0gcmV0Ll9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHx8IGl0LnZhbHVlLmNvbnRhaW5pbmdHcm91cCAhPSBncm91cClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXQudGhpbmdzU2VsZWN0ZWRBcmVEZXNjZW5kYW50c09mID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICBpZiAoIXJldC5fZGlhZ3JhbSB8fCByZXQuX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgaXQgPSByZXQuX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGFuY2VzdG9ycyA9IHJldC5fbGF5b3V0cy5nZXRBbmNlc3Rvckdyb3VwcyhpdC52YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmIChfLmluZGV4T2YoYW5jZXN0b3JzLCBncm91cCkgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0LnRoaW5nc1NlbGVjdGVkSW5jbHVkZVNsaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCFyZXQuX2RpYWdyYW0gfHwgcmV0Ll9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGl0ID0gcmV0Ll9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChpdC52YWx1ZS5kYXRhICYmIGl0LnZhbHVlLmRhdGEuY2F0ZWdvcnkgPT0gJ3NsaWRlJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIGFsbCBzZWxlY3RlZCBpdGVtcyBhcmUgcmVsYXRpb25zaGlwcyAoaS5lLiBMaW5rcylcclxuICAgIHJldC5yZWxhdGlvbnNoaXBzU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoIXJldC5fZGlhZ3JhbSB8fCByZXQuX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgaXQgPSByZXQuX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5MaW5rKSB8fCAhcmV0Ll9sYXlvdXRzLmlzUkxpbmsoaXQudmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgdHJ1ZSBpZiBleGFjdGx5IG9uZSByZWxhdGlvbnNoaXAgKExpbmspIGlzIHNlbGVjdGVkXHJcbiAgICByZXQucmVsYXRpb25zaGlwU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gcmV0Ll9kaWFncmFtICAmJiByZXQuX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50ID09IDEgJiYgcmV0Ll9kaWFncmFtLnNlbGVjdGlvbi5maXJzdCgpIGluc3RhbmNlb2YgZ28uTGluaztcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIGxvYWQgYW5kIGluaXRpYWxpemUgbW9kZWwgLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHJldC5sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHVybCA9IGVkaXRvci5tYXBVcmwgKyAnLmpzb24nO1xyXG4gICAgICAgIGlmIChlZGl0b3Iuc2FuZGJveCkge1xyXG4gICAgICAgICAgICB1cmwgPSBlZGl0b3IubWFwVXJsICsgJy5qc29uP3NhbmRib3g9MSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vVE9ETzogcmVzdG9yZSBub24tQW5ndWxhciBodHRwLWdldCBmb3IgbWFwIGRhdGFcclxuICAgICAgICB2YXIgZGF0YSA9IHsgXCJtYXBcIjogeyBcIm1ldGFkYXRhXCI6IHsgXCJzYW5kYm94XCI6IGZhbHNlLCBcImlkXCI6IDU1NDcsIFwibmFtZVwiOiBcIlVudGl0bGVkIE1hcFwiLCBcInVybFwiOiBcIi9tYXBzLzU1NDdcIiwgXCJjYW5FZGl0XCI6IHRydWUsIFwidXBkYXRlZEF0XCI6IFwiMjAxNS0wNS0xNVQxMjoyOTo0MC43MjEtMDQ6MDBcIiwgXCJ1cGRhdGVkQnlcIjogbnVsbCwgXCJ1cGRhdGVkQnlOYW1lXCI6IG51bGwsIFwidXNlclRhZ3NcIjogW10gfSwgXCJkYXRhXCI6IHsgXCJjbGFzc1wiOiBcImdvLkdyYXBoTGlua3NNb2RlbFwiLCBcIm5vZGVJc0xpbmtMYWJlbFByb3BlcnR5XCI6IFwiaXNMaW5rTGFiZWxcIiwgXCJsaW5rTGFiZWxLZXlzUHJvcGVydHlcIjogXCJsYWJlbEtleXNcIiwgXCJsaW5rRnJvbVBvcnRJZFByb3BlcnR5XCI6IFwiZnJvbVBvcnRcIiwgXCJsaW5rVG9Qb3J0SWRQcm9wZXJ0eVwiOiBcInRvUG9ydFwiLCBcIm5vZGVEYXRhQXJyYXlcIjogW3sgXCJrZXlcIjogMSwgXCJ0ZXh0XCI6IFwiTmV3IElkZWFcIiwgXCJpc0dyb3VwXCI6IHRydWUsIFwibG9jXCI6IFwiMCAwXCIsIFwibGF5b3V0XCI6IFwibGVmdFwiLCBcInNFeHBhbmRlZFwiOiB0cnVlLCBcInBFeHBhbmRlZFwiOiB0cnVlIH1dLCBcImxpbmtEYXRhQXJyYXlcIjogW10gfSwgXCJzdGF0ZURhdGFcIjogbnVsbCwgXCJlZGl0b3JPcHRpb25zXCI6IG51bGwsIFwiYW5hbHl0aWNzXCI6IHt9LCBcInZlcnNpb25zXCI6IFtdIH0gfTtcclxuICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbihkYXRhKTtcclxuICAgICAgICByZXQuX3VpLnNldFN0YXRlRGF0YShkYXRhLm1hcC5zdGF0ZURhdGEpO1xyXG4gICAgICAgIHJldC5fdWkuc2V0TWFwRWRpdG9yT3B0aW9ucyhkYXRhLm1hcC5lZGl0b3JPcHRpb25zKTtcclxuXHJcbiAgICAgICAgcmV0LmNoZWNrTW9kZWwoKTtcclxuICAgICAgICByZXQuX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICByZXQuX2RpYWdyYW0udW5kb01hbmFnZXIuaXNFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuYWRkQ2hhbmdlZExpc3RlbmVyKHJldC5fYXV0b3NhdmUubW9kZWxDaGFuZ2VkKTtcclxuICAgICAgICByZXQuX2F1dG9zYXZlLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLmlzUmVhZE9ubHkgPSAhZWRpdG9yLmNhbkVkaXQ7XHJcbiAgICAgICAgZWRpdG9yLnVwZGF0ZUVkaXRTdGF0dXMoZWRpdG9yLmNhbkVkaXQgPyBlZGl0b3IuTEFTVF9VUERBVEVEIDogZWRpdG9yLlJFQURfT05MWSk7XHJcbiAgICAgICAgcmV0Ll91aS5yZXNldFpvb20oKTtcclxuICAgICAgICByZXQubG9hZE1hcEV4dHJhRGF0YShkYXRhLm1hcCk7XHJcblxyXG4gICAgICAgIC8vIGlmIG5vIG5vZGVzIE9SIGluIHRoaW5rcXVlcnkgbW9kZSwgbGF1bmNoIGdlbmVyYXRvclxyXG4gICAgICAgIGlmIChlZGl0b3IudGhpbmtxdWVyeSB8fCAhcmV0Ll9kaWFncmFtLm1vZGVsLm5vZGVEYXRhQXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldC5fdWkub3BlblRhYihyZXQuX3VpLlRBQl9JRF9HRU5FUkFUT1IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiB3ZSBoYXZlIHNsaWRlcywgcGxheSBwcmVzZW50YXRpb25cclxuICAgICAgICBlbHNlIGlmICghZWRpdG9yLmNhbkVkaXQgJiYgcmV0Ll9wcmVzZW50ZXIuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0Ll9wcmVzZW50ZXIucGxheVNsaWRlKDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXQubG9hZEZvclNhbmRib3ggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbihlZGl0b3IubWFwRGF0YSk7XHJcbiAgICAgICAgcmV0Ll91aS5zZXRTdGF0ZURhdGEoJycpOyAvLyBpbXBvcnRhbnQhIChvdGhlcndpc2UgY29ybmVyIGhpZ2hsaWdodGluZyBicmVha3MpXHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLnVuZG9NYW5hZ2VyLmlzRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgcmV0Ll91aS5yZXNldFpvb20oKTtcclxuICAgICAgICBlZGl0b3IuY2FuRWRpdCA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIGlmIG5vIG5vZGVzIE9SIGluIHRoaW5rcXVlcnkgbW9kZSwgbGF1bmNoIGdlbmVyYXRvclxyXG4gICAgICAgIGlmIChlZGl0b3IudGhpbmtxdWVyeSkge1xyXG4gICAgICAgICAgICByZXQuX3VpLm9wZW5UYWIocmV0Ll91aS5UQUJfSURfR0VORVJBVE9SKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBzbGlkZXMsIHBsYXkgcHJlc2VudGF0aW9uXHJcbiAgICAgICAgZWxzZSBpZiAocmV0Ll9wcmVzZW50ZXIuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0Ll9wcmVzZW50ZXIucGxheVNsaWRlKDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGZpeCBhbnkgc3RydWN0dXJhbCBwcm9ibGVtcyBpbiB0aGUgbW9kZWwgYmVmb3JlIGRpc3BsYXlpbmcgaXRcclxuICAgIHJldC5jaGVja01vZGVsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gY2hhbmdlIFwiaXNMaW5rTGFiZWxcIiBwcm9wZXJ0eSB0byBjYXRlZ29yeTpcIkxpbmtMYWJlbFwiIChjaGFuZ2UgYXMgb2YgZ29KUyAxLjMpXHJcbiAgICAgICAgXy5lYWNoKHJldC5fZGlhZ3JhbS5tb2RlbC5ub2RlRGF0YUFycmF5LCBmdW5jdGlvbihub2RlRGF0YSwgaW5kZXgsIGxpc3QpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGVEYXRhLmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgbm9kZURhdGEuaXNMaW5rTGFiZWw7XHJcbiAgICAgICAgICAgICAgICBub2RlRGF0YS5jYXRlZ29yeSA9IFwiTGlua0xhYmVsXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIHRoZSBsaW5rIGxhYmVsIChyLXRoaW5nKSBmb3IgYSBsaW5rIGJlaW5nIHRoZSBzYW1lIGFzIHRoZSBmcm9tIG9yIHRvIG5vZGUgXHJcbiAgICAgICAgLy8gLSByZXQgY2FuIGNhdXNlIGluZmluaXRlIHJlY3Vyc2lvbiBpbiB0aGlua3MgbGlrZSBsYXlvdXQuZ2V0U2NhbGVcclxuICAgICAgICBfLmVhY2gocmV0Ll9kaWFncmFtLm1vZGVsLmxpbmtEYXRhQXJyYXksIGZ1bmN0aW9uKGxpbmtEYXRhLCBpbmRleCwgbGlzdCkge1xyXG4gICAgICAgICAgICB2YXIgYmFkTGFiZWxLZXlzID0gW107XHJcbiAgICAgICAgICAgIF8uZWFjaChsaW5rRGF0YS5sYWJlbEtleXMsIGZ1bmN0aW9uKGtleSwgaW5kZXgyLCBsaXN0Mikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PSBsaW5rRGF0YS5mcm9tIHx8IGtleSA9PSBsaW5rRGF0YS50bykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsYWJlbEtleSBzYW1lIGFzIGZyb20gb3IgdG8gb2YgbGluazogJyArIGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFkTGFiZWxLZXlzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxpbmtEYXRhLmxhYmVsS2V5cyA9IF8uZGlmZmVyZW5jZShsaW5rRGF0YS5sYWJlbEtleXMsIGJhZExhYmVsS2V5cyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGxvYWRzIG90aGVyIGRhdGEgYmVzaWRlcyB0aGUgZGlhZ3JhbSBtb2RlbCBmcm9tIHRoZSBqc29uIG9iamVjdCByZXR1cm5lZCBieSBtYXBzL3Nob3cuanNvblxyXG4gICAgLy8gLSByZXQgaW5jbHVkZXMgcG9pbnRzLCBiYWRnZXMsIHZlcnNpb25zLCBhbmQgbWFwIGFuYWx5dGljc1xyXG4gICAgLy8gTkI6IHBvaW50cyBhbmQgYmFkZ2VzIGFyZSBzZXQgYXQgcGFnZSBsb2FkIHRpbWUgaW4gbGF5b3V0cy91c2VyIGFuZCB1c2Vycy9iYWRnZXMsIGJ1dFxyXG4gICAgLy8gd2UgYWxzbyBuZWVkIHRvIGJlIGFibGUgdG8gdXBkYXRlIHRoZW0gaGVyZSBhZnRlciBhbiBhdXRvc2F2ZVxyXG5cclxuICAgIC8vIFRPRE86IGlzIHJldCBzdGlsbCBhbGwgbmVlZGVkIHdpdGggdGhlIG5ld2VyIHVzZXJQcm9maWxlIHN0dWZmP1xyXG4gICAgcmV0LmxvYWRNYXBFeHRyYURhdGEgPSBmdW5jdGlvbihtYXBEYXRhKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ21hcC5sb2FkTWFwRXh0cmFEYXRhLCBtYXBEYXRhOiAnICsgbWFwRGF0YSk7XHJcbiAgICAgICAgICAgIGVkaXRvci5tYXBVc2VyVGFncyA9IG1hcERhdGEubWV0YWRhdGEudXNlclRhZ3M7IC8vIFRPRE86IGlzIHJldCB1c2VkIGFueXdoZXJlP1xyXG5cclxuICAgICAgICAgICAgLy8kc2NvcGUubWFwLmdldEhpc3RvcnkoKS52ZXJzaW9uTGlzdCA9IG1hcERhdGEudmVyc2lvbnM7XHJcbiAgICAgICAgICAgIGVkaXRvci5tYXAuZ2V0QW5hbHl0aWNzKCkubWFwQW5hbHl0aWNzID0gbWFwRGF0YS5hbmFseXRpY3M7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGxvYWRzIG1vZGVsIGRhdGEgZm9yIGFuIGluZGl2aWR1YWwgdmVyc2lvbiBhbmQgZGlzcGxheXMgaXRcclxuICAgIC8vIE5COiByZXQgYWxzbyBkaXNhYmxlcyBhdXRvc2F2ZTsgbG9hZCgpIG11c3QgYmUgY2FsbGVkIHRvIHJlLWVuYWJsZSBpdFxyXG4gICAgcmV0LmxvYWRWZXJzaW9uID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAkaHR0cC5nZXQoJy9tYXBfdmVyc2lvbnMvJyArIGlkKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdsb2FkZWQgbWFwIHZlcnNpb24gd2l0aCBJRDogJyArIGlkKTtcclxuICAgICAgICAgICAgICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbihyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICByZXQuX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXQuX2RpYWdyYW0udW5kb01hbmFnZXIuaXNFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0Ll9hdXRvc2F2ZS5zYXZlT25Nb2RlbENoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXQuX2RpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXQuX2RpYWdyYW0uaXNSZWFkT25seSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBsb2FkIE1ldGFNYXAgdmVyc2lvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzZXQgd2hldGhlciBlZGl0aW5nIGNhcGFiaWxpdHkgaXMgdGVtcG9yYXJpbHkgc3VzcGVuZGVkIC1cclxuICAgIC8vIHJldCBpcyBkaXN0aW5jdCBmcm9tIHRoZSBnbG9iYWwgJHNjb3BlLmNhbkVkaXQgc2V0dGluZyxcclxuICAgIC8vIHdoaWNoIGlmIGZhbHNlIHByZXZlbnRzIGVkaXRpbmcgYXQgYWxsIHRpbWVzXHJcbiAgICByZXQuc2V0RWRpdGluZ0Jsb2NrZWQgPSBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICBpZiAoZWRpdG9yLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0Ll9kaWFncmFtLmlzUmVhZE9ubHkgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tIGNyZWF0aW5nIHRoaW5ncyBpbiB0aGUgbW9kZWwgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGRlZmF1bHQgcHJvcGVydGllcyBmb3IgYWxsIG5ldyBUaGluZ3MgKGdyb3VwcykgLSBub3RlIHRoYXQgdGhlc2UgY2FuIGJlIG92ZXJyaWRkZW4gaWYgbmVlZGVkXHJcbiAgICByZXQuZ2V0TmV3VGhpbmdEYXRhID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdGV4dDogJ0lkZWEnLFxyXG4gICAgICAgICAgICBpc0dyb3VwOiB0cnVlLFxyXG4gICAgICAgICAgICBsYXlvdXQ6IHJldC5fdWkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLmRlZmF1bHRUaGluZ0xheW91dCB8fCAnbGVmdCcsXHJcbiAgICAgICAgICAgIHNFeHBhbmRlZDogdHJ1ZSxcclxuICAgICAgICAgICAgcEV4cGFuZGVkOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXQuY3JlYXRlU2lzdGVyID0gZnVuY3Rpb24odGhpbmcpIHtcclxuICAgICAgICBpZiAoIWVkaXRvci5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG5ld0xvYyA9IHJldC5fbGF5b3V0cy5nZXROZXdTaXN0ZXJMb2NhdGlvbih0aGluZyk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBfLmV4dGVuZChyZXQuZ2V0TmV3VGhpbmdEYXRhKCksIHtcclxuICAgICAgICAgICAgZ3JvdXA6IHRoaW5nLmRhdGEuZ3JvdXAsXHJcbiAgICAgICAgICAgIHRleHQ6ICdJZGVhJyxcclxuICAgICAgICAgICAgbG9jOiBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICB2YXIgbmV3U2lzdGVyID0gcmV0Ll9kaWFncmFtLmZpbmROb2RlRm9yRGF0YShkYXRhKTtcclxuXHJcbiAgICAgICAgLy8gcHV0IG5ldyBzaXN0ZXIgcmlnaHQgYWZ0ZXIgdGhpbmcgKG5vdCBhcyB0aGUgbGFzdCBzaWJsaW5nKVxyXG4gICAgICAgIGlmICh0aGluZy5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgcmV0Lm1vdmVTaWJsaW5nTmV4dFRvKG5ld1Npc3RlciwgdGhpbmcsIHJldC5SSUdIVCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdTaXN0ZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldC5jcmVhdGVSVG9TaXN0ZXIgPSBmdW5jdGlvbih0aGluZykge1xyXG4gICAgICAgIGlmICghZWRpdG9yLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGhpbmdLZXkgPSByZXQuX2RpYWdyYW0ubW9kZWwuZ2V0S2V5Rm9yTm9kZURhdGEodGhpbmcuZGF0YSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygndGhpbmdLZXk6ICcgKyB0aGluZ0tleSk7XHJcbiAgICAgICAgdmFyIG5ld0xvYyA9IHJldC5fbGF5b3V0cy5nZXROZXdTaXN0ZXJMb2NhdGlvbih0aGluZywgdHJ1ZSk7IC8vIHdpdGhSID0gdHJ1ZVxyXG4gICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQocmV0LmdldE5ld1RoaW5nRGF0YSgpLCB7XHJcbiAgICAgICAgICAgIGdyb3VwOiB0aGluZy5kYXRhLmdyb3VwLFxyXG4gICAgICAgICAgICB0ZXh0OiAnSWRlYScsXHJcbiAgICAgICAgICAgIGxvYzogZ28uUG9pbnQuc3RyaW5naWZ5KG5ld0xvYylcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoZGF0YSk7XHJcbiAgICAgICAgdmFyIG5ld1Npc3RlciA9IHJldC5fZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XHJcbiAgICAgICAgdmFyIGdyb3VwS2V5ID0gcmV0Ll9kaWFncmFtLm1vZGVsLmdldEtleUZvck5vZGVEYXRhKGRhdGEpO1xyXG5cclxuICAgICAgICAvLyBjcmVhdGUgbGlua1xyXG4gICAgICAgIHZhciBsaW5rRGF0YSA9IHtcclxuICAgICAgICAgICAgZnJvbTogdGhpbmdLZXksXHJcbiAgICAgICAgICAgIHRvOiBncm91cEtleSxcclxuICAgICAgICAgICAgdHlwZTogJ3RvJyxcclxuICAgICAgICAgICAgZnJvbVBvcnQ6ICdSJyxcclxuICAgICAgICAgICAgdG9Qb3J0OiAnUidcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5hZGRMaW5rRGF0YShsaW5rRGF0YSk7XHJcblxyXG4gICAgICAgIC8vIHB1dCBuZXcgc2lzdGVyIHJpZ2h0IGFmdGVyIHRoaW5nIChub3QgYXMgdGhlIGxhc3Qgc2libGluZylcclxuICAgICAgICBpZiAodGhpbmcuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgIHJldC5tb3ZlU2libGluZ05leHRUbyhuZXdTaXN0ZXIsIHRoaW5nLCByZXQuUklHSFQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3U2lzdGVyO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXQuY3JlYXRlQ2hpbGQgPSBmdW5jdGlvbih0aGluZywgbmFtZSwgeCwgeSkge1xyXG4gICAgICAgIGlmICghZWRpdG9yLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbmV3TG9jID0gcmV0Ll9sYXlvdXRzLmdldE5ld0NoaWxkTG9jYXRpb24yKHRoaW5nKTtcclxuICAgICAgICBpZiAoeCB8fCB5KSB7XHJcbiAgICAgICAgICAgIG5ld0xvYyA9IG5ldyBnby5Qb2ludCh4LCB5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGRhdGEgPSBfLmV4dGVuZChyZXQuZ2V0TmV3VGhpbmdEYXRhKCksIHtcclxuICAgICAgICAgICAgZ3JvdXA6IHRoaW5nLmRhdGEua2V5LFxyXG4gICAgICAgICAgICB0ZXh0OiBuYW1lIHx8ICdQYXJ0JyxcclxuICAgICAgICAgICAgbG9jOiBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICByZXQuX2xheW91dHMuc2V0RGVzY2VuZGFudExheW91dHModGhpbmcsIHRoaW5nLmRhdGEubGF5b3V0KTtcclxuICAgICAgICB2YXIgY2hpbGQgPSByZXQuX2RpYWdyYW0uZmluZE5vZGVGb3JEYXRhKGRhdGEpO1xyXG4gICAgICAgIGNoaWxkLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXQuY3JlYXRlUlRoaW5nID0gZnVuY3Rpb24obGluaywgbmFtZSkge1xyXG4gICAgICAgIGlmICghZWRpdG9yLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnY3JlYXRlUlRoaW5nLCBsaW5rOiAnICsgbGluayArICcsIG5hbWU6ICcgKyBuYW1lKTtcclxuICAgICAgICAvLyBkb24ndCBhbGxvdyBtdWx0aXBsZSBSLXRoaW5nc1xyXG4gICAgICAgIGlmIChsaW5rLmlzTGFiZWxlZExpbmspIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Nhbm5vdCBjcmVhdGUgUlRoaW5nLCBsaW5rIGlzIGFscmVhZHkgbGFiZWxlZCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZGF0YSA9IF8uZXh0ZW5kKHJldC5nZXROZXdUaGluZ0RhdGEoKSwge1xyXG4gICAgICAgICAgICB0ZXh0OiBuYW1lIHx8ICdSZWxhdGlvbnNoaXAgSWRlYScsXHJcbiAgICAgICAgICAgIC8vaXNMaW5rTGFiZWw6IHRydWUsICAgICAvLyBkZXByZWNhdGVkIGFzIG9mIGdvSlMgMS4zXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiBcIkxpbmtMYWJlbFwiLCAvLyBuZXcgYXMgb2YgZ29KUyAxLjNcclxuICAgICAgICAgICAgbG9jOiAnMCAwJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY3JlYXRlIFIgVGhpbmdcIik7XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLm1vZGVsLmFkZE5vZGVEYXRhKGRhdGEpO1xyXG4gICAgICAgIHZhciBrZXkgPSByZXQuX2RpYWdyYW0ubW9kZWwuZ2V0S2V5Rm9yTm9kZURhdGEoZGF0YSk7XHJcbiAgICAgICAgdmFyIG5vZGUgPSByZXQuX2RpYWdyYW0uZmluZFBhcnRGb3JLZXkoa2V5KTtcclxuICAgICAgICBub2RlLmxhYmVsZWRMaW5rID0gbGluaztcclxuICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oXCJjcmVhdGUgUiBUaGluZ1wiKTtcclxuICAgICAgICByZXQuX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJldC5fZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0gY3JlYXRpbmcgdGhpbmdzIHdpdGggc3BlY2lmaWVkIG5hbWVzL2xvY2F0aW9ucyAtIGZvciB1c2UgYnkgZ2VuZXJhdG9yIGFuZCB0ZXN0cyAtLS0tLS0tLS0tLS1cclxuXHJcbiAgICByZXQuY3JlYXRlVGhpbmcgPSBmdW5jdGlvbih4LCB5LCBuYW1lLCBsYXlvdXQpIHtcclxuICAgICAgICBncm91cCA9IHJldC5fZGlhZ3JhbS50b29sTWFuYWdlci5jbGlja0NyZWF0aW5nVG9vbC5pbnNlcnRQYXJ0KG5ldyBnby5Qb2ludCh4LCB5KSk7XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAndGV4dCcsIG5hbWUpO1xyXG4gICAgICAgIGlmIChsYXlvdXQpIHtcclxuICAgICAgICAgICAgcmV0Ll9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbGF5b3V0JywgbGF5b3V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXQuY3JlYXRlUkxpbmtXaXRoUlRoaW5nID0gZnVuY3Rpb24odGhpbmcxLCB0aGluZzIsIG5hbWUpIHtcclxuICAgICAgICB2YXIgbGluayA9IHJldC5jcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMik7XHJcbiAgICAgICAgcmV0dXJuIHJldC5jcmVhdGVSVGhpbmcobGluaywgbmFtZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIGxpbmtEYXRhIG9iamVjdCBmb3IgdGhlIG5ldyBsaW5rXHJcbiAgICByZXQuY3JlYXRlUkxpbmsgPSBmdW5jdGlvbih0aGluZzEsIHRoaW5nMikge1xyXG4gICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnbm9BcnJvd3MnLFxyXG4gICAgICAgICAgICBmcm9tOiB0aGluZzEuZGF0YS5rZXksXHJcbiAgICAgICAgICAgIHRvOiB0aGluZzIuZGF0YS5rZXksXHJcbiAgICAgICAgICAgIGZyb21Qb3J0OiAnUicsXHJcbiAgICAgICAgICAgIHRvUG9ydDogJ1InXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuYWRkTGlua0RhdGEoZGF0YSk7XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgIHJldHVybiByZXQuX2RpYWdyYW0uZmluZExpbmtGb3JEYXRhKGRhdGEpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBsaW5rRGF0YSBvYmplY3QgZm9yIHRoZSBuZXcgbGlua1xyXG4gICAgcmV0LmNyZWF0ZVBMaW5rID0gZnVuY3Rpb24odGhpbmcxLCB0aGluZzIpIHtcclxuICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbignYWRkIGxpbmsnKTtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ25vQXJyb3dzJyxcclxuICAgICAgICAgICAgZnJvbTogdGhpbmcxLmRhdGEua2V5LFxyXG4gICAgICAgICAgICB0bzogdGhpbmcyLmRhdGEua2V5LFxyXG4gICAgICAgICAgICBmcm9tUG9ydDogJ1AnLFxyXG4gICAgICAgICAgICB0b1BvcnQ6ICdQJyxcclxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdQJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLm1vZGVsLmFkZExpbmtEYXRhKGRhdGEpO1xyXG4gICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbignYWRkIGxpbmsnKTtcclxuICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMS5kYXRhLCAncEV4cGFuZGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHJldC5fZGlhZ3JhbS5maW5kTGlua0ZvckRhdGEoZGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0gbW92aW5nIHRoaW5ncyBpbiB0aGUgbW9kZWwgc3RydWN0dXJlIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyByZXR1cm5zIGEgZ28uTGlzdCBvZiB0aGUgaXRlbXMgaW4gdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHRoYXQgYXJlIEdyb3Vwc1xyXG4gICAgcmV0LmdldFNlbGVjdGVkR3JvdXBzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGl0ID0gcmV0Ll9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB2YXIgbWVtYmVycyA9IG5ldyBnby5MaXN0KCk7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXJzLmFkZChwYXJ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVtYmVycztcclxuICAgIH1cclxuXHJcbiAgICAvLyBkcmFnIHRvIFNcclxuICAgIHJldC5hZGRTZWxlY3RlZFRoaW5nc0FzQ2hpbGRyZW5PZiA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG5ld01lbWJlcnMgPSByZXQuZ2V0U2VsZWN0ZWRHcm91cHMoKTtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZXhpc3RpbmcgbWVtYmVycyBzbyB3ZSBjYW4gY2FsY3VsYXRlIGxheW91dFxyXG4gICAgICAgIHZhciBvbGRNZW1iZXJCb3VuZHMgPSByZXQuc2FmZVJlY3QocmV0Ll9kaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhncm91cC5tZW1iZXJQYXJ0cykpO1xyXG5cclxuICAgICAgICAvLyBOQjogcmV0IGlzIHN1YmplY3QgdG8gdmFsaWRhdGlvbiBieSBDb21tYW5kSGFuZGxlci5pc1ZhbGlkTWVtYmVyLFxyXG4gICAgICAgIC8vIHNvIGZvciBleGFtcGxlLCBtZW1iZXJzIG9mIG1lbWJlcnMgb2YgbmV3TWVtYmVycyB3aWxsIG5vdCBiZSBhZGRlZCBhcyBtZW1iZXJzXHJcbiAgICAgICAgZ3JvdXAuYWRkTWVtYmVycyhuZXdNZW1iZXJzKTtcclxuXHJcbiAgICAgICAgcmV0Ll9sYXlvdXRzLmxheW91dE5ld01lbWJlcnNSZWxhdGl2ZVRvKG5ld01lbWJlcnMsIGdyb3VwLCBvbGRNZW1iZXJCb3VuZHMpO1xyXG5cclxuICAgICAgICByZXQuX2RpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gZHJhZyB0byBEXHJcbiAgICByZXQuYWRkU2VsZWN0ZWRUaGluZ3NBc1Npc3RlcnNPZiA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG9sZE1lbWJlcnMgPSByZXQuZ2V0U2VsZWN0ZWRHcm91cHMoKTtcclxuXHJcbiAgICAgICAgLy8gaWYgZHJhZ2dpbmcgdG8gdG9wIGxldmVsLCBtb3ZlIGRyYWdnZWQgdGhpbmdzIHNvIHRoZXkgZG9uJ3Qgb3ZlcmxhcCB0aGUgZm9ybWVyIHBhcmVudFxyXG4gICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGV4aXN0aW5nIG1lbWJlcnMgc28gd2UgY2FuIGNhbGN1bGF0ZSBsYXlvdXRcclxuICAgICAgICAgICAgdmFyIG9sZE1lbWJlcnNCb3VuZHMgPSByZXQuX2RpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKG9sZE1lbWJlcnMpO1xyXG4gICAgICAgICAgICAvLyBOQjogb2xkTWVtYmVycyBjYW4gYmUgb24gbXVsdGlwbGUgbGV2ZWxzLCBzbyBub3QgY2xlYXIgd2hpY2ggbGV2ZWwgdG8gdXNlIGZvciByZXNjYWxpbmcgb2xkIG1lbWJlcnMgYWZ0ZXIgZHJhZ1xyXG4gICAgICAgICAgICB2YXIgb2xkTWVtYmVyc0xldmVsID0gcmV0Ll9sYXlvdXRzLmNvbXB1dGVMZXZlbChvbGRNZW1iZXJzLmZpcnN0KCkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGl0ID0gb2xkTWVtYmVycy5pdGVyYXRvcjtcclxuICAgICAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lbWJlciA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbWVtYmVyLmNvbnRhaW5pbmdHcm91cCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0Ll9sYXlvdXRzLmxheW91dE9sZE1lbWJlcnNPdXRzaWRlT2Yob2xkTWVtYmVycywgZ3JvdXAsIG9sZE1lbWJlcnNCb3VuZHMsIG9sZE1lbWJlcnNMZXZlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIG5vdCBkcmFnZ2luZyB0byB0b3AgbGV2ZWwsIHBsYWNlIGRyYWdnZWQgdGhpbmdzIGFmdGVyIGZvcm1lciBwYXJlbnQgaW4gb3V0bGluZVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgaXQyID0gb2xkTWVtYmVycy5pdGVyYXRvcjtcclxuICAgICAgICAgICAgd2hpbGUgKGl0Mi5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZW1iZXIyID0gaXQyLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbWVtYmVyMi5jb250YWluaW5nR3JvdXAgPSBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgICAgICByZXQubW92ZVNpYmxpbmdOZXh0VG8obWVtYmVyMiwgZ3JvdXAsIHJldC5SSUdIVCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyBmb3IgZHJhZ2dpbmcgcGFydHMgd2l0aGluIGEgc3lzdGVtIC0gc2lkZSBpcyBMRUZUIG9yIFJJR0hUIChpLmUuIGFib3ZlIG9yIGJlbG93LCByZXNwLiBpbiBpbnZlbnRvcnkgbGF5b3V0KVxyXG4gICAgcmV0LmFkZFNlbGVjdGVkVGhpbmdBc09yZGVyZWRTaXN0ZXJPZiA9IGZ1bmN0aW9uKGdyb3VwLCBzaWRlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnYWRkU2VsZWN0ZWRUaGluZ0FzT3JkZXJlZFNpc3Rlck9mLCBzaWRlOiAnICsgc2lkZSk7XHJcbiAgICAgICAgdmFyIHRoaW5nID0gcmV0LmdldFVuaXF1ZVRoaW5nU2VsZWN0ZWQoKTtcclxuICAgICAgICBpZiAoIXRoaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0Lm1vdmVTaWJsaW5nTmV4dFRvKHRoaW5nLCBncm91cCwgc2lkZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIG1vdmVzIHRoZSBmaXJzdCB0aGluZyAoc2libGluZykgdG8gYmUgYWZ0ZXIgdGhlIHNlY29uZCB0aGluZyAoZ3JvdXApXHJcbiAgICAvLyBpbiB0aGUgcGFydCBvcmRlcmluZyAtIHRoZXkgYXJlIGFzc3VtZWQgdG8gYmUgc2libGluZ3NcclxuICAgIC8vIHNpZGUgaXMgTEVGVCBvciBSSUdIVFxyXG4gICAgcmV0Lm1vdmVTaWJsaW5nTmV4dFRvID0gZnVuY3Rpb24oc2libGluZywgZ3JvdXAsIHNpZGUpIHtcclxuICAgICAgICB2YXIgcGFyZW50ID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdtb3ZlU2libGluZ05leHRUbywgc2libGluZzogJyArIHNpYmxpbmcgKyAnLCBncm91cDogJyArIGdyb3VwICsgJywgcGFyZW50OiAnICsgcGFyZW50ICsgJywgc2libGluZy5jb250YWluaW5nR3JvdXA6ICcgKyBzaWJsaW5nLmNvbnRhaW5pbmdHcm91cCk7XHJcblxyXG4gICAgICAgIGlmICghcGFyZW50IHx8IHNpYmxpbmcuY29udGFpbmluZ0dyb3VwICE9IHBhcmVudCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDYW5ub3QgZG8gbW92ZVNpYmxpbmdOZXh0VG8gb24gbm9uLXNpYmxpbmdzIG9yIHRvcC1sZXZlbCBncm91cHMnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSBuZXcgbWVtYmVyIG9yZGVyXHJcbiAgICAgICAgdmFyIG1lbWJlck9yZGVyID0gbmV3IGdvLkxpc3QoKTtcclxuICAgICAgICB2YXIgaXQgPSBwYXJlbnQubWVtYmVyUGFydHM7XHJcbiAgICAgICAgdmFyIG9yZGVyID0gMDtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBtZW1iZXIgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKG1lbWJlciBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3ZSdyZSBhdCB0aGUgdGFyZ2V0IGdyb3VwLCBzbyBhZGQgdGhlIG1vdmVkIHRoaW5nIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgaXRcclxuICAgICAgICAgICAgICAgIGlmIChtZW1iZXIgPT0gZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA9PSByZXQuTEVGVCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJPcmRlci5hZGQoc2libGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2libGluZy5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKG1lbWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobWVtYmVyLmRhdGEsICdvcmRlcicsIG9yZGVyKyspO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChtZW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG1lbWJlci5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKHNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHNpYmxpbmcuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZG9uJ3QgcmUtYWRkIHRoZSBtb3ZlZCB0aGluZywgaXQgd2FzIGFkZGVkIGFib3ZlXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtZW1iZXIgIT0gc2libGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChtZW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldC5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobWVtYmVyLmRhdGEsICdvcmRlcicsIG9yZGVyKyspO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjbGVhciBleGlzdGluZyBtZW1iZXJzXHJcbiAgICAgICAgdmFyIG5ld0l0ID0gbWVtYmVyT3JkZXIuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKG5ld0l0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbWVtYmVyMiA9IG5ld0l0LnZhbHVlO1xyXG4gICAgICAgICAgICBtZW1iZXIyLmNvbnRhaW5pbmdHcm91cCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhZGQgbmV3IG1lbWJlcnNcclxuICAgICAgICBuZXdJdC5yZXNldCgpO1xyXG4gICAgICAgIHdoaWxlIChuZXdJdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIG1lbWJlcjMgPSBuZXdJdC52YWx1ZTtcclxuICAgICAgICAgICAgbWVtYmVyMy5jb250YWluaW5nR3JvdXAgPSBwYXJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXQuYWRkVGhpbmdBc1JUaGluZyA9IGZ1bmN0aW9uKHRoaW5nLCBsaW5rKSB7XHJcbiAgICAgICAgdGhpbmcubGFiZWxlZExpbmsgPSBsaW5rO1xyXG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEQgY29ybmVyIGhhbmRsZXIgKHNpbmdsZSBjbGljaylcclxuICAgIHJldC50b2dnbGVERmxhZyA9IGZ1bmN0aW9uKHRoaW5nKSB7XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAnZGZsYWcnLCAhdGhpbmcuZGF0YS5kZmxhZyk7XHJcbiAgICAgICAgdGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gUyBjb3JuZXIgaGFuZGxlciAoc2luZ2xlIGNsaWNrKVxyXG4gICAgcmV0LnRvZ2dsZVNFeHBhbnNpb24gPSBmdW5jdGlvbih0aGluZykge1xyXG4gICAgICAgIHZhciBpc0V4cGFuZGVkID0gISh0aGluZy5kYXRhICYmICF0aGluZy5kYXRhLnNFeHBhbmRlZCk7IC8vIGV4cGFuZCBieSBkZWZhdWx0IGlmIHByb3BlcnR5IG5vdCBwcmVzZW50XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAnc0V4cGFuZGVkJywgIWlzRXhwYW5kZWQpO1xyXG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgcmV0Ll91aS5zaG93Q29ybmVyVGlwKHRoaW5nLCAnUycpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBQIGNvcm5lciBoYW5kbGVyIChzaW5nbGUgY2xpY2spXHJcbiAgICByZXQudG9nZ2xlUEV4cGFuc2lvbiA9IGZ1bmN0aW9uKHRoaW5nKSB7XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAncEV4cGFuZGVkJywgIXJldC5wSXNFeHBhbmRlZCh0aGluZykpO1xyXG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgcmV0Ll91aS5zaG93Q29ybmVyVGlwKHRoaW5nLCBcIlBcIik7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldC5wSXNFeHBhbmRlZCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwLmRhdGEgJiYgZ3JvdXAuZGF0YS5wRXhwYW5kZWQgPT09IHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gdW5kby9yZWRvIC0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgcmV0LmNhblVuZG8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gcmV0Ll9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLmNhblVuZG8oKTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0LnVuZG8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXQuX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIudW5kbygpO1xyXG4gICAgICAgIHJldC5fZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXQuY2FuUmVkbyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiByZXQuX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIuY2FuUmVkbygpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXQucmVkbyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldC5fZGlhZ3JhbS5jb21tYW5kSGFuZGxlci5yZWRvKCk7XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldC5yZWZyZXNoID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gdXRpbGl0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gY2hlY2sgZm9yIGEgcmVjdCB3aXRoIE5hTiBYL1kvVy9IIGNvb3Jkcywgc28gd2UgY2FuIGRvIHN0dWZmIHdpdGggaXQgc3VjaCBhcyB1bmlvblJlY3RcclxuICAgIC8vIChOYU4sTmFOLDAsMCkgPT4gKDAsMCwwLDApXHJcbiAgICByZXQuc2FmZVJlY3QgPSBmdW5jdGlvbihyZWN0KSB7XHJcbiAgICAgICAgaWYgKGlzTmFOKHJlY3QueCkpIHtcclxuICAgICAgICAgICAgcmVjdC54ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzTmFOKHJlY3QueSkpIHtcclxuICAgICAgICAgICAgcmVjdC55ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzTmFOKHJlY3Qud2lkdGgpKSB7XHJcbiAgICAgICAgICAgIHJlY3Qud2lkdGggPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNOYU4ocmVjdC5oZWlnaHQpKSB7XHJcbiAgICAgICAgICAgIHJlY3QuaGVpZ2h0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlY3Q7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gZGVidWcgbWFwIG1vZGVsIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICByZXQubG9hZE1vZGVsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCgnI21hcC1tb2RlbC1kZWJ1ZycpLnZhbChyZXQuX2RpYWdyYW0ubW9kZWwudG9Kc29uKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXQuc2F2ZU1vZGVsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0Ll9kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24oJCgnI21hcC1tb2RlbC1kZWJ1ZycpLnZhbCgpKTtcclxuICAgICAgICByZXQuX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICByZXQuX2RpYWdyYW0ubW9kZWwuYWRkQ2hhbmdlZExpc3RlbmVyKHJldC5fYXV0b3NhdmUubW9kZWxDaGFuZ2VkKTtcclxuICAgICAgICByZXQuX2F1dG9zYXZlLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiByZXQ7XHJcbn07IiwiLy8gZnVuY3Rpb25zIGZvciBlZGl0aW5nIHBlcnNwZWN0aXZlcyBBTkQgZGlzdGluY3Rpb25zLCB3aGljaCB3b3JrIHNpbWlsYXJseSBpbiB0aGUgVUlcclxuXHJcblNhbmRiYW5rRWRpdG9yLlBlcnNwZWN0aXZlcyA9IGZ1bmN0aW9uKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIC8vIHRlbXBvcmFyeSBzdGF0ZSBmbGFnIGZvciBhZGRpbmcvcmVtb3ZpbmcgUC9EIHNlbGVjdGlvbnMgcHJvZ3JhbW1hdGljYWxseVxyXG4gICAgdmFyIHNlbGVjdGluZ0xpbmtlZFRoaW5ncyA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge307XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ1BlcnNwZWN0aXZlcywgY3VycmVudFRhYkNoYW5nZWQnKTtcclxuICAgICAgICBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX1BFUlNQRUNUSVZFUykgeyAvLyBvcGVuaW5nIHBlcnNwZWN0aXZlc1xyXG4gICAgICAgICAgICBzZXRQb3JEVGhpbmcoJ1AnKTtcclxuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAob2xkVmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX1BFUlNQRUNUSVZFUykgeyAvLyBjbG9zaW5nIHBlcnNwZWN0aXZlc1xyXG4gICAgICAgICAgICBzYXZlTGlua3MoJ1AnKTtcclxuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKGZhbHNlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9ESVNUSU5DVElPTlMpIHsgLy8gb3BlbmluZyBkaXN0aW5jdGlvbnNcclxuICAgICAgICAgICAgc2V0UG9yRFRoaW5nKCdEJyk7XHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZCh0cnVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9sZFZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9ESVNUSU5DVElPTlMpIHsgLy8gY2xvc2luZyBkaXN0aW5jdGlvbnNcclxuICAgICAgICAgICAgc2F2ZUxpbmtzKCdEJyk7XHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIGlmIChldmVudE5hbWUgPT0gJ0NoYW5nZWRTZWxlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX1BFUlNQRUNUSVZFUykgfHwgbWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9ESVNUSU5DVElPTlMpKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVMaW5rcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tIFAvRCBFZGl0b3Igc3RhdGVcclxuXHJcbiAgICB0aGlzLmlzSW5QT3JERWRpdG9yTW9kZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5IHx8IG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNJblBFZGl0b3JNb2RlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNJbkRFZGl0b3JNb2RlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzUEVkaXRvclBvaW50ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gbWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSA9PSBncm91cC5kYXRhLmtleTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc0RFZGl0b3JUaGluZyA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgPT0gZ3JvdXAuZGF0YS5rZXk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIE5COiB0aGlzIGlzIGNhbGxlZCB2aWEgbWFwLmdldENvcm5lckZ1bmN0aW9uLCBzbyB3ZSBnZXQgdGhlIGV4dHJhIGNvcm5lciBhcmcsIHdoaWNoIHdlIGNhbiBpZ25vcmVcclxuICAgIHRoaXMuc2V0UEVkaXRvclBvaW50ID0gZnVuY3Rpb24odGhpbmcsIGNvcm5lcikge1xyXG4gICAgICAgIGlmICgkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5vcGVuVGFiKG1hcC5nZXRVaSgpLlRBQl9JRF9QRVJTUEVDVElWRVMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zZXRERWRpdG9yVGhpbmcgPSBmdW5jdGlvbih0aGluZykge1xyXG4gICAgICAgIGlmICgkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICAvLyBOQjogbmVlZCB0byBzZWxlY3Qgb25seSB0aGlzIHRoaW5nLCBzaW5jZSB0aGlzIGlzIGludm9rZWRcclxuICAgICAgICAgICAgLy8gYnkgYSBjb250cm9sLWNsaWNrLCB3aGljaCB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHNlbGVjdCBqdXN0IGl0XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkuY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgdGhpbmcuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLm9wZW5UYWIobWFwLmdldFVpKCkuVEFCX0lEX0RJU1RJTkNUSU9OUyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuaXNQZXJzcGVjdGl2ZVBvaW50ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NPdXRPZigpO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1NlbGVjdGVkUGVyc3BlY3RpdmVWaWV3ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NJbnRvKCk7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJyAmJiBtYXAucElzRXhwYW5kZWQobGluay5mcm9tTm9kZSkgJiYgbGluay5mcm9tTm9kZS5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNUb2dnbGVkUGVyc3BlY3RpdmVWaWV3ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NJbnRvKCk7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJyAmJiBtYXAucElzRXhwYW5kZWQobGluay5mcm9tTm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc01vdXNlT3ZlclBlcnNwZWN0aXZlVmlldyA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGxpbmtzID0gZ3JvdXAuZmluZExpbmtzSW50bygpO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcgJiYgbGluay5mcm9tTm9kZSA9PSBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldFBlcnNwZWN0aXZlVmlld1dlaWdodCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG1vZGUgPSBtYXAuZ2V0VWkoKS5nZXRNYXBFZGl0b3JPcHRpb25zKCkucGVyc3BlY3RpdmVNb2RlO1xyXG4gICAgICAgIGlmIChtb2RlID09ICdzcG90bGlnaHQnIHx8IG1vZGUgPT0gJ2JvdGgnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoc2VsZi5pc1NlbGVjdGVkUGVyc3BlY3RpdmVWaWV3KGdyb3VwKSA/IDEgOiAwKSArXHJcbiAgICAgICAgICAgICAgICAoc2VsZi5pc1RvZ2dsZWRQZXJzcGVjdGl2ZVZpZXcoZ3JvdXApID8gMSA6IDApICtcclxuICAgICAgICAgICAgICAgIChzZWxmLmlzTW91c2VPdmVyUGVyc3BlY3RpdmVWaWV3KGdyb3VwKSA/IDEgOiAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gY2F0ZWdvcnkgaXMgXCJQXCIgb3IgXCJEXCIgKHBlcnNwZWN0aXZlcyBvciBkaXN0aW5jdGlvbnMpXHJcbiAgICBmdW5jdGlvbiBzZXRQb3JEVGhpbmcoY2F0ZWdvcnkpIHtcclxuICAgICAgICAvLyBpZiBhbHJlYWR5IHNldCwgbXVzdCBkbyBzYXZlIHBlcnNwZWN0aXZlcyBvciBzYXZlIGRpc3RpbmN0aW9uc1xyXG4gICAgICAgIGlmIChtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5IHx8IG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdmFyIHRoaW5nID0gbWFwLmdldERpYWdyYW0oKS5zZWxlY3Rpb24uZmlyc3QoKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdzZXRQb3JEVGhpbmc6ICcgKyB0aGluZyk7XHJcbiAgICAgICAgaWYgKHRoaW5nIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaW5nLmRhdGEua2V5O1xyXG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkgPT0gXCJQXCIpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgPSBrZXk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2F0ZWdvcnkgPT0gXCJEXCIpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgPSBrZXk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHNlbGVjdCB2aWV3cy9vdGhlcnNcclxuICAgICAgICAgICAgc2VsZWN0TGlua2VkVGhpbmdzRm9yKHRoaW5nLCBjYXRlZ29yeSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIHNlbGVjdGlvbiBjaGFuZ2VzIC0gaWYgdGhlIHRoaW5nIGlzIHNldCxcclxuICAgIC8vIGFkZHMvcmVtb3ZlcyBEL1AgbGlua3MgYWNjb3JkaW5nIHRvIHdoYXQgaXMgc2VsZWN0ZWQ7IG90aGVyd2lzZVxyXG4gICAgLy8ganVzdCBzaG93cy9oaWRlcyBEL1AgbGlua3MgZm9yIHRoZSBzZWxlY3RlZCB0aGluZyhzKVxyXG4gICAgZnVuY3Rpb24gdXBkYXRlTGlua3MoKSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGluZ0xpbmtlZFRoaW5ncykgLy8gc2VsZWN0aW9uIGlzIGJlaW5nIGNoYW5nZWQgcHJvZ3JhbW1hdGljYWxseSwgc28gZG9uJ3QgcmVzcG9uZFxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciBwT3JEVGhpbmcgPSBudWxsO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeSA9IG51bGw7XHJcbiAgICAgICAgaWYgKG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkpIHtcclxuICAgICAgICAgICAgcE9yRFRoaW5nID0gbWFwLmdldERpYWdyYW0oKS5maW5kTm9kZUZvcktleShtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5KTtcclxuICAgICAgICAgICAgY2F0ZWdvcnkgPSBcIlBcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkpIHtcclxuICAgICAgICAgICAgcE9yRFRoaW5nID0gbWFwLmdldERpYWdyYW0oKS5maW5kTm9kZUZvcktleShtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5KTtcclxuICAgICAgICAgICAgY2F0ZWdvcnkgPSBcIkRcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBhZGRMaW5rc1RvID0gbmV3IGdvLkxpc3QoKTtcclxuICAgICAgICB2YXIgcmVtb3ZlTGlua3MgPSBuZXcgZ28uTGlzdCgpO1xyXG5cclxuICAgICAgICAvLyBpdGVyYXRlIHRocm91Z2ggYWxsIHRoaW5nc1xyXG4gICAgICAgIGlmIChjYXRlZ29yeSkge1xyXG4gICAgICAgICAgICB2YXIgbGF5ZXJzID0gbWFwLmdldERpYWdyYW0oKS5sYXllcnM7XHJcbiAgICAgICAgICAgIHdoaWxlIChsYXllcnMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllcnMudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSBsYXllci5wYXJ0cztcclxuICAgICAgICAgICAgICAgIHdoaWxlIChwYXJ0cy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGxpbmtzIHRvIGFkZC9yZW1vdmUgYmFzZWQgb24gc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwT3JEVGhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaW5rcyA9IHBhcnQuZmluZExpbmtzSW50bygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nTGluayA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGluay5mcm9tTm9kZS5kYXRhLmtleSA9PSBwT3JEVGhpbmcuZGF0YS5rZXkgJiYgbGluay5kYXRhLmNhdGVnb3J5ID09IGNhdGVnb3J5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0xpbmsgPSBsaW5rO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlY2lkZSB3aGV0aGVyIHRvIGFkZCBvciByZW1vdmUgYSBsaW5rIHRvIHRoZSBwYXJ0LCBkZXBlbmRpbmcgb24gd2hldGhlciBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0IGlzIHNlbGVjdGVkIGFuZCB3aGV0aGVyIGEgbGluayBleGlzdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdMaW5rICYmIHBhcnQuaXNTZWxlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRMaW5rc1RvLmFkZChwYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV4aXN0aW5nTGluayAmJiAhcGFydC5pc1NlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUxpbmtzLmFkZChleGlzdGluZ0xpbmspO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkbyB0aGUgYWRkaW5nL3JlbW92aW5nIG9mIGxpbmtzXHJcbiAgICAgICAgdmFyIGFkZHMgPSBhZGRMaW5rc1RvLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChhZGRzLm5leHQoKSkge1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgICAgIHZhciB0byA9IGFkZHMudmFsdWU7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1cGRhdGVMaW5rczogYWRkaW5nIGxpbmsgZnJvbSAnICsgcE9yRFRoaW5nICsgJyB0byAnICsgdG8pO1xyXG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkgPT0gXCJEXCIgJiYgcE9yRFRoaW5nLmRhdGEua2V5ID09IHRvLmRhdGEua2V5KSB7XHJcbiAgICAgICAgICAgICAgICBwT3JEVGhpbmcuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJZb3UgY2FuJ3QgZGlzdGluZ3Vpc2ggYSB0aGluZyBmcm9tIGl0c2VsZiFcIik7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLmFkZExpbmtEYXRhKHtcclxuICAgICAgICAgICAgICAgIGZyb206IHBPckRUaGluZy5kYXRhLmtleSxcclxuICAgICAgICAgICAgICAgIHRvOiB0by5kYXRhLmtleSxcclxuICAgICAgICAgICAgICAgIGZyb21Qb3J0OiBjYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgIHRvUG9ydDogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZW1vdmVzID0gcmVtb3ZlTGlua3MuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKHJlbW92ZXMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciByZW1vdmUgPSByZW1vdmVzLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndXBkYXRlTGlua3M6IHJlbW92aW5nIGxpbmsgZnJvbSAnICsgcmVtb3ZlLmZyb21Ob2RlICsgJyB0byAnICsgcmVtb3ZlLnRvTm9kZSk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuc3RhcnRUcmFuc2FjdGlvbigncmVtb3ZlIGxpbmsnKTtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5yZW1vdmUocmVtb3ZlKTtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5yZW1vdmVMaW5rRGF0YShyZW1vdmUuZGF0YSk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oJ3JlbW92ZSBsaW5rJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzaG93IGxpbmtzXHJcbiAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVMaW5rcyhjYXRlZ29yeSkge1xyXG4gICAgICAgIHZhciBwT3JEVGhpbmcgPSBudWxsO1xyXG4gICAgICAgIGlmIChjYXRlZ29yeSA9PSBcIlBcIikge1xyXG4gICAgICAgICAgICBwT3JEVGhpbmcgPSBtYXAuZ2V0RGlhZ3JhbSgpLmZpbmROb2RlRm9yS2V5KG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkpO1xyXG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5ID0gbnVsbDtcclxuICAgICAgICB9IGVsc2UgaWYgKGNhdGVnb3J5ID09IFwiRFwiKSB7XHJcbiAgICAgICAgICAgIHBPckRUaGluZyA9IG1hcC5nZXREaWFncmFtKCkuZmluZE5vZGVGb3JLZXkobWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSk7XHJcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWFwLmdldERpYWdyYW0oKS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZWxlY3RMaW5rZWRUaGluZ3NGb3IoZ3JvdXAsIGNhdGVnb3J5KSB7XHJcbiAgICAgICAgc2VsZWN0aW5nTGlua2VkVGhpbmdzID0gdHJ1ZTtcclxuICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmNsZWFyU2VsZWN0aW9uKCk7XHJcblxyXG4gICAgICAgIHZhciBsaW5rcyA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09IGNhdGVnb3J5KVxyXG4gICAgICAgICAgICAgICAgbGluay50b05vZGUuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxlY3RpbmdMaW5rZWRUaGluZ3MgPSBmYWxzZTtcclxuICAgIH1cclxufTsiLCIvLyBmdW5jdGlvbnMgZm9yIHRoZSBwcmVzZW50ZXIvc2xpZGVzXHJcblxyXG5TYW5kYmFua0VkaXRvci5QcmVzZW50ZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgLy8gY29uc3RhbnRzXHJcbiAgICB0aGlzLlNMSURFX0JMT0NLRVJfV0lEVEggPSAxMDAwO1xyXG4gICAgdGhpcy5TTElERV9CTE9DS0VSX0NPTE9SID0gXCIjZmZmXCI7XHJcbiAgICB0aGlzLlNMSURFX0JMT0NLRVJfT1BBQ0lUWSA9IDAuOTtcclxuXHJcbiAgICAvLyBzdGF0ZSB2YXJzXHJcbiAgICB0aGlzLmN1cnJlbnRTbGlkZUluZGV4ID0gbnVsbDtcclxuICAgIHRoaXMuaXNQcmVzZW50aW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLnNob3dUT0MgPSBmYWxzZTtcclxuICAgIHRoaXMuaXNDcmVhdGluZ1RodW1ibmFpbCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIG1hc2sgYXBwbGllZCBhcm91bmQgc2xpZGUgcmVnaW9uIHdoZW4gcHJlc2VudGluZ1xyXG4gICAgdGhpcy5zbGlkZUJsb2NrZXIgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuZGlhZ3JhbUFzcGVjdFJhdGlvID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYXV0b3NhdmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBtYXAuZ2V0QXV0b3NhdmUoKS5zYXZlKCdlZGl0X3ByZXNlbnRlcicpOyBcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLSBlZGl0aW5nIGZ1bmN0aW9ucyBmb3IgZGlmZmVyZW50IHNsaWRlIHR5cGVzIC0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBOQjogaGFzTGlua3MgY2FuIGhhdmUgdmFsdWVzIGZhbHNlLCAxLCBvciB0cnVlICgxIG1lYW5zIG9ubHkgYSBzaW5nbGUgbGluaylcclxuICAgIHRoaXMuc2xpZGVUeXBlcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdUSVRMRV9CT0RZJywgbGFiZWw6ICdUaXRsZSBhbmQgQm9keScsXHJcbiAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCAgaGFzTm90ZXM6IHRydWUsICBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IGZhbHNlLCBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgICBuYW1lOiAnVElUTEVfQk9EWV9NQVAnLCBsYWJlbDogJ1RpdGxlLCBCb2R5IGFuZCBNZXRhTWFwJyxcclxuICAgICAgICAgICAgaGFzVGl0bGU6IHRydWUsICBoYXNOb3RlczogdHJ1ZSwgIGhhc0NoZWNrczogZmFsc2UsIGhhc01hcFJlZ2lvbjogdHJ1ZSwgIGhhc01hcFN1bW1hcnk6IGZhbHNlLCBoYXNMaW5rczogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIG5hbWU6ICdBQ1RJVklUWV9NQVAnLCBsYWJlbDogJ0xlc3NvbiBBY3Rpdml0eSBhbmQgTWV0YU1hcCcsXHJcbiAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCAgaGFzTm90ZXM6IHRydWUsICBoYXNDaGVja3M6IHRydWUsICBoYXNNYXBSZWdpb246IHRydWUsICBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIG5hbWU6ICdNQVBfT05MWScsIGxhYmVsOiAnTWV0YU1hcCBvbmx5JyxcclxuICAgICAgICAgICAgaGFzVGl0bGU6IHRydWUsICBoYXNOb3RlczogZmFsc2UsIGhhc0NoZWNrczogZmFsc2UsIGhhc01hcFJlZ2lvbjogdHJ1ZSwgIGhhc01hcFN1bW1hcnk6IGZhbHNlLCBoYXNMaW5rczogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIG5hbWU6ICdNQVBfU1VNTUFSWScsIGxhYmVsOiAnTWV0YU1hcCBTdW1tYXJ5JyxcclxuICAgICAgICAgICAgaGFzVGl0bGU6IGZhbHNlLCBoYXNOb3RlczogZmFsc2UsIGhhc0NoZWNrczogZmFsc2UsIGhhc01hcFJlZ2lvbjogdHJ1ZSwgaGFzTWFwU3VtbWFyeTogdHJ1ZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgXTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0gbGluay9hdHRhY2htZW50IHR5cGVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5saW5rVHlwZXMgPSBbXHJcbiAgICAgICAgeyBuYW1lOiAnJywgbGFiZWw6ICctLSBTZWxlY3QgYXR0YWNobWVudCB0eXBlIC0tJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ1dFQicsIGxhYmVsOiAnV2ViIFBhZ2UnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnUERGJywgbGFiZWw6ICdQREYnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnRE9DJywgbGFiZWw6ICdEb2N1bWVudCcgfSxcclxuICAgICAgICB7IG5hbWU6ICdTUFJFQURTSEVFVCcsIGxhYmVsOiAnU3ByZWFkc2hlZXQnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnUFJFU0VOVEFUSU9OJywgbGFiZWw6ICdQcmVzZW50YXRpb24nIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnTUVUQU1BUCcsIGxhYmVsOiAnTWV0YU1hcCcgfSxcclxuICAgICAgICB7IG5hbWU6ICdJTUFHRScsIGxhYmVsOiAnSW1hZ2UnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnQVVESU8nLCBsYWJlbDogJ0F1ZGlvJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ1ZJREVPJywgbGFiZWw6ICdWaWRlbycgfSxcclxuICAgICAgICB7IG5hbWU6ICdTVVJWRVknLCBsYWJlbDogJ1N1cnZleScgfSxcclxuICAgICAgICB7IG5hbWU6ICdXT1JLU0hFRVQnLCBsYWJlbDogJ1dvcmtzaGVldCcgfVxyXG4gICAgXTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gbGlzdCBvZiBhbGwgdGhpbmdzIGluIHRoZSBtYXAsIGZvciBtYXAgc3VtbWFyeSBzbGlkZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5pZGVhTGlzdCA9ICcnO1xyXG5cclxuICAgIC8vIG9ubHkgY2FsbCB0aGlzIG9jY2FzaW9uYWxseSwgYXMgdGhleSB3b24ndCBiZSBlZGl0aW5nIHRoZSBtYXAgd2hpbGUgcHJlc2VudGVyIGlzIG9wZW5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZUlkZWFMaXN0KCkge1xyXG4gICAgICAgIHZhciBub2RlcyA9IG1hcC5nZXREaWFncmFtKCkubm9kZXM7XHJcbiAgICAgICAgdmFyIGxpc3QgPSBbXTtcclxuICAgICAgICB3aGlsZSAobm9kZXMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICgobm9kZXMudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkpIHtcclxuICAgICAgICAgICAgICAgIGxpc3QucHVzaChub2Rlcy52YWx1ZS5kYXRhLnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpc3Quc29ydCgpO1xyXG5cclxuICAgICAgICAvLyBmaWx0ZXIgb3V0IHBsYWNlaG9sZGVyIG5hbWVzIC0gc2VlIG1hcC5qczpnZXROZXdUaGluZ0RhdGEsIGNyZWF0ZVNpc3RlciwgZXRjLlxyXG4gICAgICAgIGxpc3QgPSBfLmRpZmZlcmVuY2UoXy51bmlxKGxpc3QsIHRydWUpLCBcclxuICAgICAgICAgICAgbWFwLmdldEdlbmVyYXRvcigpLmdldFBsYWNlaG9sZGVySWRlYU5hbWVzKCksIFxyXG4gICAgICAgICAgICBbJ05ldyBJZGVhJywgJ05ldyBEaXN0aW5ndWlzaGVkIElkZWEnLCAnTmV3IFJlbGF0ZWQgSWRlYScsICdOZXcgUmVsYXRpb25zaGlwIElkZWEnLCAnTmV3IFBhcnQgSWRlYScsXHJcbiAgICAgICAgICAgICAnSWRlYScsICdQYXJ0JywgJ1JlbGF0aW9uc2hpcCBJZGVhJ10gLy8gbmV3ZXIgc2ltcGxpZmllZCBuYW1lc1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHNlbGYuaWRlYUxpc3QgPSBsaXN0LmpvaW4oJywgJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zdW1tYXJ5QW5hbHl0aWNzID0gW1xyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1RISU5HUycsIHNpbmd1bGFyTGFiZWw6ICdEaXN0aW5jdGlvbicsIHBsdXJhbExhYmVsOiAnRGlzdGluY3Rpb25zJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1NZU1RFTVMnLCBzaW5ndWxhckxhYmVsOiAnU3lzdGVtJywgcGx1cmFsTGFiZWw6ICdTeXN0ZW1zJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1JFTEFUSU9OU0hJUFMnLCBzaW5ndWxhckxhYmVsOiAnUmVsYXRpb25zaGlwJywgcGx1cmFsTGFiZWw6ICdSZWxhdGlvbnNoaXBzJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1BFUlNQRUNUSVZFUycsIHNpbmd1bGFyTGFiZWw6ICdQZXJzcGVjdGl2ZScsIHBsdXJhbExhYmVsOiAnUGVyc3BlY3RpdmVzJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1JUSElOR1MnLCBzaW5ndWxhckxhYmVsOiAnUmVsYXRpb25zaGlwIElkZWEnLCBwbHVyYWxMYWJlbDogJ1JlbGF0aW9uc2hpcCBJZGVhcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9TWVNURU1fUlRISU5HUycsIHNpbmd1bGFyTGFiZWw6ICdSZWxhdGlvbnNoaXAgU3lzdGVtJywgcGx1cmFsTGFiZWw6ICdSZWxhdGlvbnNoaXAgU3lzdGVtcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9TWVNURU1fUEVSU1BFQ1RJVkVTJywgc2luZ3VsYXJMYWJlbDogJ1BlcnNwZWN0aXZlIFN5c3RlbScsIHBsdXJhbExhYmVsOiAnUGVyc3BlY3RpdmUgU3lzdGVtcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9ESVNUSU5DVElPTlMnLCBzaW5ndWxhckxhYmVsOiAnQWR2YW5jZWQgRGlzdGluY3Rpb24nLCBwbHVyYWxMYWJlbDogJ0FkdmFuY2VkIERpc3RpbmN0aW9ucycgfSxcclxuICAgIF07XHJcblxyXG4gICAgdGhpcy5hZGRDaGVjayA9IGZ1bmN0aW9uKG5vZGVEYXRhKSB7XHJcbiAgICAgICAgIG5vZGVEYXRhLmNoZWNrcy5wdXNoKHsgdGV4dDogJycgfSk7XHJcbiAgICAgICAgIHNlbGYuYXV0b3NhdmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kZWxldGVDaGVjayA9IGZ1bmN0aW9uIChjaGVjaywgbm9kZURhdGEpIHtcclxuICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZihub2RlRGF0YS5jaGVja3MsIGNoZWNrKTtcclxuICAgICAgICBub2RlRGF0YS5jaGVja3Muc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIHNlbGYuYXV0b3NhdmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hZGRMaW5rID0gZnVuY3Rpb24obm9kZURhdGEpIHtcclxuICAgICAgICBub2RlRGF0YS5saW5rcy5wdXNoKHsgdGl0bGU6ICcnLCB1cmw6ICcnLCB0eXBlOiAnJyB9KTtcclxuICAgICAgICBzZWxmLmF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGVsZXRlTGluayA9IGZ1bmN0aW9uIChsaW5rLCBub2RlRGF0YSkge1xyXG4gICAgICAgIHZhciBpID0gXy5pbmRleE9mKG5vZGVEYXRhLmxpbmtzLCBsaW5rKTtcclxuICAgICAgICBub2RlRGF0YS5saW5rcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgc2VsZi5hdXRvc2F2ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZVRPQyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmlzUHJlc2VudGluZykge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zaG93VE9DID0gIXNlbGYuc2hvd1RPQztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBOQjogY2FuJ3QgY3JlYXRlIHRoaXMgaW4gaW5pdCBhcyB0aGUgZGlhZ3JhbSBkb2Vzbid0IGV4aXN0IHlldC4uLlxyXG4gICAgZnVuY3Rpb24gbWF5YmVJbml0U2xpZGVCbG9ja2VyKCkge1xyXG4gICAgICAgIGlmICghc2VsZi5zbGlkZUJsb2NrZXIpIHtcclxuICAgICAgICAgICAgdmFyIG1rID0gZ28uR3JhcGhPYmplY3QubWFrZTtcclxuICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIgPSBtayhnby5Ob2RlLCBnby5QYW5lbC5BdXRvLFxyXG4gICAgICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgICAgICBsYXllck5hbWU6ICdUb29sJyxcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBzZWxmLlNMSURFX0JMT0NLRVJfT1BBQ0lUWVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBzZWxmLlNMSURFX0JMT0NLRVJfQ09MT1IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOjEwMDBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkuYWRkKHNlbGYuc2xpZGVCbG9ja2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChvbGRWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSB7IC8vIGNsb3NpbmcgdGFiXHJcbiAgICAgICAgICAgIHNlbGYuc3RvcFByZXNlbnRpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUikgeyAvLyBvcGVuaW5nIHRhYlxyXG4gICAgICAgICAgICAvLyBzaG93IHNsaWRlcyAoc2VlIGxheW91dHMuc2xpZGVUZW1wbGF0ZSwgYmluZGluZyBvZiB2aXNpYmxlIGF0dHIpXHJcbiAgICAgICAgICAgIHNlbGYuZGlhZ3JhbUFzcGVjdFJhdGlvID0gJCgnI2RpYWdyYW0nKS53aWR0aCgpIC8gJCgnI2RpYWdyYW0nKS5oZWlnaHQoKTsgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGlhZ3JhbUFzcGVjdFJhdGlvOiAnICsgc2VsZi5kaWFncmFtQXNwZWN0UmF0aW8pO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLm1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgdXBkYXRlSWRlYUxpc3QoKTtcclxuICAgICAgICAgICAgaWYgKCFzZWxmLmN1cnJlbnRTbGlkZUluZGV4ICYmIHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRTbGlkZUluZGV4ID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLnNsaWRlVGh1bWJuYWlsU2VsZWN0ZWQoMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoIW1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25EZWxldGluZycpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGUuc3ViamVjdDtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGlvbi5jb3VudCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcgPSBzZWxlY3Rpb24uZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGluZyBpbnN0YW5jZW9mIGdvLk5vZGUgJiYgdGhpbmcuZGF0YS5jYXRlZ29yeSA9PSAnc2xpZGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maXJtKFwiRGVsZXRlIHRoaXMgc2xpZGUgZnJvbSB0aGUgcHJlc2VudGF0aW9uP1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLmNhbmNlbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnU2VsZWN0aW9uRGVsZXRlZCcpIHtcclxuICAgICAgICAgICAgLy8gaWYgc2xpZGUgaXMgZGVsZXRlZCBmcm9tIGNhbnZhcyByYXRoZXIgdGhhbiBieSB0aHVtYm5haWwgeCBidXR0b24sIG5lZWQgdG8gdXBkYXRlIGluZGV4ZXNcclxuICAgICAgICAgICAgY29tcGFjdFNsaWRlSW5kZXhlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1NlbGVjdGlvbk1vdmVkJyB8fCBldmVudE5hbWUgPT0gJ1BhcnRSZXNpemVkJykge1xyXG4gICAgICAgICAgICAvLyBjbGVhciB0aHVtYm5haWwgY2FjaGVcclxuICAgICAgICAgICAgdGh1bWJuYWlsQ2FjaGUgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXZlbnROYW1lID09ICdWaWV3cG9ydEJvdW5kc0NoYW5nZWQnKSB7XHJcbiAgICAgICAgICAgIC8vIGFkanVzdCB6b29taW5nIG9mIG1hcCByZWdpb25cclxuICAgICAgICAgICAgLy9zZWxmLndpbmRvd1Jlc2l6ZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMud2luZG93UmVzaXplZCA9IF8uZGVib3VuY2UoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2VsZi5zbGlkZVRodW1ibmFpbFNlbGVjdGVkKHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xyXG4gICAgfSwgMTAwMCk7XHJcblxyXG4gICAgdGhpcy5zaG93U2lkZWJhciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUikgJiYgKCFzZWxmLmlzUHJlc2VudGluZyB8fCBzZWxmLnNob3dUT0MpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmRpc2FibGVNYXBUb29sYmFyQnV0dG9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAhbWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9QUkVTRU5URVIpIFxyXG4gICAgICAgICAgICB8fCBzZWxmLmlzUHJlc2VudGluZyBcclxuICAgICAgICAgICAgfHwgIXNlbGYuZ2V0Q3VycmVudFNsaWRlVHlwZSgpLmhhc01hcFJlZ2lvbjtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIGFuIGFycmF5IG9mIG5vZGUgZGF0YSBvYmplY3RzIChub3QgdGhlIHNsaWRlIG5vZGVzIHRoZW1zZWx2ZXMpXHJcbiAgICB0aGlzLmdldFNsaWRlTm9kZURhdGFzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgbm9kZXMgPSBkaWFncmFtLm1vZGVsLm5vZGVEYXRhQXJyYXk7XHJcbiAgICAgICAgdmFyIG5vZGVEYXRhcyA9IF8uZmlsdGVyKG5vZGVzLCBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZS5jYXRlZ29yeSA9PSAnc2xpZGUnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG5vZGVEYXRhcyA9IF8uc29ydEJ5KG5vZGVEYXRhcywgZnVuY3Rpb24gKG5vZGVEYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlRGF0YS5pbmRleDtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTbGlkZU5vZGVEYXRhcywgaW5kZXhlczogJyArIF8ucGx1Y2soc2xpZGVzRGF0YSwgJ2luZGV4JykpO1xyXG4gICAgICAgIHJldHVybiBub2RlRGF0YXM7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0U2xpZGVDb3VudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmdldFNsaWRlTm9kZURhdGFzKCkubGVuZ3RoO1xyXG4gICAgfTsgIFxyXG5cclxuICAgIHRoaXMuZ2V0QWN0aXZpdHlTbGlkZUNvdW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF8ud2hlcmUoc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLCB7IHR5cGU6ICdBQ1RJVklUWV9NQVAnIH0pLmxlbmd0aDtcclxuICAgIH07ICBcclxuXHJcbiAgICB0aGlzLmdldFNsaWRlVHlwZSA9IGZ1bmN0aW9uKHR5cGVOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIF8uZmluZFdoZXJlKHNlbGYuc2xpZGVUeXBlcywgeyBuYW1lOiB0eXBlTmFtZSB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRDdXJyZW50U2xpZGVUeXBlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF8uZmluZFdoZXJlKHNlbGYuc2xpZGVUeXBlcywgeyBuYW1lOiBzbGlkZS5kYXRhLnR5cGUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBmaW5kU2xpZGVCeUluZGV4KGluZGV4KSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHZhciBzbGlkZURhdGEgPSBfLmZpbmQoc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLCBmdW5jdGlvbiAoc2xpZGVEYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzbGlkZURhdGEuaW5kZXggPT0gaW5kZXg7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHNsaWRlRGF0YSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkaWFncmFtLmZpbmROb2RlRm9yS2V5KHNsaWRlRGF0YS5rZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaW5jcmVtZW50IGlzIC0xIG9yICsxXHJcbiAgICB0aGlzLm1vdmVTbGlkZSA9IGZ1bmN0aW9uIChpbmRleCwgaW5jcmVtZW50KSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTtcclxuICAgICAgICAgICAgdmFyIG5laWdoYm9yID0gZmluZFNsaWRlQnlJbmRleChpbmRleCArIGluY3JlbWVudCk7XHJcbiAgICAgICAgICAgIGlmIChzbGlkZSAmJiBuZWlnaGJvcikge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbW92ZVNsaWRlOiBzd2FwcGluZyAnICsgc2xpZGUuZGF0YS5rZXkgKyAnIHdpdGggJyArIG5laWdoYm9yLmRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcIm1vdmUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzbGlkZS5kYXRhLCAnaW5kZXgnLCBzbGlkZS5kYXRhLmluZGV4ICsgaW5jcmVtZW50KTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5laWdoYm9yLmRhdGEsICdpbmRleCcsIG5laWdoYm9yLmRhdGEuaW5kZXggLSBpbmNyZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcIm1vdmUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgICAgICB0aHVtYm5haWxDYWNoZSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbXBhY3RTbGlkZUluZGV4ZXMoKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY29tcGFjdFNsaWRlSW5kZXhlcycpO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGVzRGF0YSA9IHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKTtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgbmV3SW5kZXggPSAxO1xyXG4gICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJjb21wYWN0IHNsaWRlIGluZGV4ZXNcIik7XHJcbiAgICAgICAgICAgIF8uZWFjaChzbGlkZXNEYXRhLCBmdW5jdGlvbiAoc2xpZGVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzbGlkZURhdGEsICdpbmRleCcsIG5ld0luZGV4KTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NvbXBhY3RTbGlkZUluZGV4ZXM6IHNldCBpbmRleCBmb3IgJyArIHNsaWRlRGF0YS5rZXkgKyAnIHRvICcgKyBuZXdJbmRleCk7XHJcbiAgICAgICAgICAgICAgICBuZXdJbmRleCsrO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImNvbXBhY3Qgc2xpZGUgaW5kZXhlc1wiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXROZXdTbGlkZUtleSgpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIGkgPSAxO1xyXG4gICAgICAgIHdoaWxlIChkaWFncmFtLm1vZGVsLmZpbmROb2RlRGF0YUZvcktleSgnc2xpZGUtJyArIGkpKSB7XHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICdzbGlkZS0nICsgaTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBOQjogaW5kZXhlcyAoYW5kIGtleXM/KSBtdXN0IGJlIDEtYmFzZWQsIG90aGVyd2lzZSBmaXJzdCBzbGlkZSBnZXRzIHNjcmV3ZWQgdXBcclxuICAgIC8vIChzb21ld2hlcmUgdGhlIGluZGV4IHNob3dzIHVwIGFzICcnIGluc3RlYWQgb2YgMClcclxuICAgIGZ1bmN0aW9uIGdldE5ld1NsaWRlSW5kZXgoKSB7XHJcbiAgICAgICAgdmFyIHNsaWRlcyA9IHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKTtcclxuICAgICAgICByZXR1cm4gc2xpZGVzLmxlbmd0aCArIDE7IFxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYWRkU2xpZGUgPSBmdW5jdGlvbiAodHlwZU5hbWUpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYWRkU2xpZGU6ICcgKyB0eXBlTmFtZSk7XHJcbiAgICAgICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYiA9IG1hcC5jb21wdXRlTWFwQm91bmRzKCk7XHJcbiAgICAgICAgICAgIGRiLmluZmxhdGUoZGIud2lkdGggLyAyMCwgZGIuaGVpZ2h0IC8gMTApO1xyXG4gICAgICAgICAgICB2YXIgbmV3TG9jID0gZGIueCArICcgJyArIGRiLnk7XHJcbiAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IGdldE5ld1NsaWRlSW5kZXgoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzbGlkZVR5cGUgPSBfLmZpbmRXaGVyZShzZWxmLnNsaWRlVHlwZXMsIHsgbmFtZTogdHlwZU5hbWUgfSk7XHJcblxyXG4gICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJhZGQgc2xpZGVcIik7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoe1xyXG4gICAgICAgICAgICAgICAga2V5OiBnZXROZXdTbGlkZUtleSgpLFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdzbGlkZScsXHJcbiAgICAgICAgICAgICAgICBpbmRleDogbmV3SW5kZXgsXHJcbiAgICAgICAgICAgICAgICBpc0dyb3VwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBkYi53aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogZGIuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgbG9jOiBuZXdMb2MsXHJcbiAgICAgICAgICAgICAgICBsZXZlbDogMCxcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAwLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZU5hbWUsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgICAgICAgICBub3RlczogJycsXHJcbiAgICAgICAgICAgICAgICBjaGVja3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgaGFzUmVnaW9uOiBzbGlkZVR5cGUuaGFzTWFwUmVnaW9uLFxyXG4gICAgICAgICAgICAgICAgaXNTdW1tYXJ5OiBzbGlkZVR5cGUuaGFzTWFwU3VtbWFyeSxcclxuICAgICAgICAgICAgICAgIGxpbmtzOiBbXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImFkZCBzbGlkZVwiKTtcclxuICAgICAgICAgICAgdGh1bWJuYWlsQ2FjaGUgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHNlbGYuc2xpZGVUaHVtYm5haWxTZWxlY3RlZChuZXdJbmRleCk7IC8vIHRyaWdnZXIgZGlzcGxheSBvZiBlZGl0IGZvcm0sIHpvb20gdG8gbWFwIHJlZ2lvbiBpZiBhcHBsaWNhYmxlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZHVwbGljYXRlU2xpZGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IGdldE5ld1NsaWRlSW5kZXgoKTtcclxuICAgICAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7IFxyXG4gICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcImR1cGxpY2F0ZSBzbGlkZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBidW1wIHVwIGluZGV4ZXMgb24gc3Vic2VxdWVudCBzbGlkZXMgdG8gbWFrZSByb29tIGZvciBuZXcgc2xpZGUgYWZ0ZXIgY3VycmVudCBvbmVcclxuICAgICAgICAgICAgICAgIF8uZWFjaChzZWxmLmdldFNsaWRlTm9kZURhdGFzKCksIGZ1bmN0aW9uIChzbGlkZURhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2xpZGVEYXRhLmluZGV4ID4gaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2xpZGVEYXRhLCAnaW5kZXgnLCBzbGlkZURhdGEuaW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBOQjogY3JlYXRpbmcgYSBuZXcgbm9kZURhdGEgb2JqZWN0IGhlcmUgcmF0aGVyIHRoYW4gY29weWluZyBhbmQgbW9kaWZ5aW5nLCB0byBhdm9pZCBjb3B5aW5nICQkaGFzaEtleSAoPz8pXHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLmFkZE5vZGVEYXRhKHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6IGdldE5ld1NsaWRlS2V5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdzbGlkZScsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4ICsgMSxcclxuICAgICAgICAgICAgICAgICAgICBpc0dyb3VwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogc2xpZGUuZGF0YS53aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHNsaWRlLmRhdGEuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxvYzogc2xpZGUuZGF0YS5sb2MsXHJcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogc2xpZGUuZGF0YS50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBzbGlkZS5kYXRhLnRpdGxlICsgJyAoQ29weSknLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vdGVzOiBzbGlkZS5kYXRhLm5vdGVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrczogc2xpZGUuZGF0YS5jaGVja3MsIC8vIGNsb25lP1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc1JlZ2lvbjogc2xpZGUuZGF0YS5oYXNSZWdpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgaXNTdW1tYXJ5OiBzbGlkZS5kYXRhLmlzU3VtbWFyeSxcclxuICAgICAgICAgICAgICAgICAgICBsaW5rczogc2xpZGUuZGF0YS5saW5rcyAvLyBjbG9uZT9cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImR1cGxpY2F0ZSBzbGlkZVwiKTtcclxuICAgICAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5yZW1vdmVTbGlkZSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3JlbW92ZVNsaWRlOiAnICsgaW5kZXgpO1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpOyBcclxuICAgICAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJyZW1vdmUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnJlbW92ZU5vZGVEYXRhKHNsaWRlLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcInJlbW92ZSBzbGlkZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRTbGlkZUluZGV4ID0gbnVsbDtcclxuICAgICAgICAgICAgdGh1bWJuYWlsQ2FjaGUgPSBbXTtcclxuICAgICAgICAgICAgY29tcGFjdFNsaWRlSW5kZXhlcygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgdGh1bWJuYWlsQ2FjaGUgPSBbXTtcclxuXHJcbiAgICB0aGlzLmdldFNsaWRlVGh1bWJuYWlsID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRodW1ibmFpbENhY2hlW2luZGV4XTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGVTbGlkZVRodW1ibmFpbHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBfLmVhY2goc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLCBmdW5jdGlvbihuZCkgeyBcclxuICAgICAgICAgICAgc2VsZi5jcmVhdGVTbGlkZVRodW1ibmFpbChuZC5pbmRleCk7IFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNyZWF0ZVNsaWRlVGh1bWJuYWlsID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnY3JlYXRlU2xpZGVUaHVtYm5haWwnKTtcclxuXHJcbiAgICAgICAgdmFyIHRodW1iV2lkdGggPSAxMDAwO1xyXG4gICAgICAgIHZhciB0aHVtYkhlaWdodCA9IDYwMDtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcblxyXG4gICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpO1xyXG4gICAgICAgIGlmICghc2xpZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghc2xpZGUuZGF0YS5oYXNSZWdpb24gJiYgIXNsaWRlLmRhdGEuaXNTdW1tYXJ5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBkYiA9IGRpYWdyYW0uZG9jdW1lbnRCb3VuZHM7XHJcbiAgICAgICAgICAgIHZhciBzYjtcclxuICAgICAgICAgICAgaWYgKHNsaWRlLmRhdGEuaXNTdW1tYXJ5KSB7IC8vIGZvciBhIHN1bW1hcnkgc2xpZGUgd2Ugc2hvb3QgdGhlIHdob2xlIG1hcFxyXG4gICAgICAgICAgICAgICAgc2IgPSBtYXAuc2FmZVJlY3QobWFwLmNvbXB1dGVNYXBCb3VuZHMoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7IC8vIG90aGVyd2lzZSBqdXN0IHNob290IHRoZSBzbGlkZSByZWdpb25cclxuICAgICAgICAgICAgICAgIHNiID0gc2xpZGUucGFydC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBpbWFnZVBvc2l0aW9uID0gbmV3IGdvLlBvaW50KHNiLngsIHNiLnkpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTbGlkZVRodW1ibmFpbCwgc2xpZGUgYm91bmRzOiAnICsgc2IgKyAnLCBkb2N1bWVudCBib3VuZHM6ICcgKyBkYiArICcsIGltYWdlUG9zaXRpb246ICcgKyBpbWFnZVBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB3U2NhbGUgPSB0aHVtYldpZHRoIC8gc2Iud2lkdGg7XHJcbiAgICAgICAgICAgIHZhciBoU2NhbGUgPSB0aHVtYkhlaWdodCAvIHNiLmhlaWdodDtcclxuICAgICAgICAgICAgdmFyIHRodW1iU2NhbGUgPSBNYXRoLm1pbih3U2NhbGUsIGhTY2FsZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY2FsZTogJyArIHdTY2FsZSArICcsJyArIGhTY2FsZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdyA9IHRodW1iU2NhbGUgKiBzYi53aWR0aDtcclxuICAgICAgICAgICAgdmFyIGggPSB0aHVtYlNjYWxlICogc2IuaGVpZ2h0O1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd0aHVtYm5haWwgdy9oOiAnICsgdyArICcsJyArIGgpO1xyXG5cclxuICAgICAgICAgICAgLy8gaGlkZSBzbGlkZXMgdGVtcG9yYXJpbHkgd2hpbGUgY3JlYXRpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IHRydWU7XHJcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSB0aHVtYlNjYWxlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGltZ0RhdGEgPSBkaWFncmFtLm1ha2VJbWFnZURhdGEoe1xyXG4gICAgICAgICAgICAgICAgc2l6ZTogbmV3IGdvLlNpemUodywgaCksXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogaW1hZ2VQb3NpdGlvbixcclxuICAgICAgICAgICAgICAgIHNjYWxlOiB0aHVtYlNjYWxlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc2VsZi5pc0NyZWF0aW5nVGh1bWJuYWlsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgICAgIHRodW1ibmFpbENhY2hlW2luZGV4XSA9IGltZ0RhdGE7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaW1nRGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGdldHMgYSB0aHVtYm5haWwgb2YgdGhlIHdob2xlIG1hcCwgZm9yIHNhdmluZyAoc2VlIGF1dG9zYXZlLmpzKVxyXG4gICAgdGhpcy5nZXRNYXBUaHVtYm5haWwgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgc2IgPSBtYXAuc2FmZVJlY3QobWFwLmNvbXB1dGVNYXBCb3VuZHMoKSk7XHJcbiAgICAgICAgc2IuZ3JvdygxMCwxMCwxMCwxMCk7XHJcbiAgICAgICAgdmFyIHcgPSAxNTA7XHJcbiAgICAgICAgdmFyIGggPSAxMDA7XHJcblxyXG4gICAgICAgIC8vIGhpZGUgc2xpZGVzIHRlbXBvcmFyaWx5IHdoaWxlIGNyZWF0aW5nIHRodW1ibmFpbFxyXG4gICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IHRydWU7XHJcbiAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG5cclxuICAgICAgICB2YXIgaW1nRGF0YSA9IGRpYWdyYW0ubWFrZUltYWdlRGF0YSh7XHJcbiAgICAgICAgICAgIHNjYWxlOiBNYXRoLm1pbihoIC8gc2IuaGVpZ2h0LCB3IC8gc2Iud2lkdGgpLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KHNiLngsIHNiLnkpLFxyXG4gICAgICAgICAgICBzaXplOm5ldyBnby5TaXplKHcsIGgpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IGZhbHNlO1xyXG4gICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGltZ0RhdGE7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyBjYWxsZWQgdmlhIG5nLWNsaWNrIG9uIHRodW1ibmFpbFxyXG4gICAgdGhpcy5zbGlkZVRodW1ibmFpbFNlbGVjdGVkID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2xpZGVUaHVtYm5haWxTZWxlY3RlZDogJyArIGluZGV4KTtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcblxyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIE5COiBvcmRlciBvZiBzdGF0ZW1lbnRzIGlzIGltcG9ydGFudCBoZXJlLCBhcyBzZWxlY3RTbGlkZSBjYW4gdHJpZ2dlciBjaGFuZ2VkU2VsZWN0aW9uIHdpdGggYW4gZW1wdHkgc2VsZWN0aW9uIHNvbWV0aW1lcy4uLiA/P1xyXG4gICAgICAgICAgICBzZWxlY3RTbGlkZShpbmRleCk7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpOyAvLyBzaG93L2hpZGUgc2xpZGUgbm9kZXMgLSBzZWUgdGVtcGxhdGVzLmpzOiBzbGlkZVRlbXBsYXRlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIHpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc1ByZXNlbnRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dUT0MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm5lZWRzTmFycm93Q2FudmFzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICByZXR1cm4gbWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9QUkVTRU5URVIpICYmIFxyXG4gICAgICAgICAgIHNsaWRlICE9IG51bGwgJiYgXHJcbiAgICAgICAgICAgKHNsaWRlLmRhdGEudHlwZSA9PSAnVElUTEVfQk9EWV9NQVAnIHx8IHNsaWRlLmRhdGEudHlwZSA9PSAnQUNUSVZJVFlfTUFQJyB8fCBzbGlkZS5kYXRhLnR5cGUgPT0gJ01BUF9TVU1NQVJZJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNldHMgdGhlIHNsaWRlIG5vZGUgYXMgc2VsZWN0ZWQgaW4gdGhlIGRpYWdyYW0uXHJcbiAgICBmdW5jdGlvbiBzZWxlY3RTbGlkZShpbmRleCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3NlbGVjdCBzbGlkZTogJyArIGluZGV4KTtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiBzY3JvbGwgdG8gc2xpZGU/XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wbGF5U2xpZGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgbWFwLmdldFVpKCkub3BlblRhYihtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKTsgXHJcblxyXG4gICAgICAgIHZhciBzbGlkZXMgPSBzZWxmLmdldFNsaWRlTm9kZURhdGFzKCk7XHJcbiAgICAgICAgaWYgKHNsaWRlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc2VsZi5zaG93VE9DID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHByZXNlbnRTbGlkZShpbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBpbmNyZW1lbnQgaXMgLTEgb3IgKzFcclxuICAgIHRoaXMuYWR2YW5jZVNsaWRlID0gZnVuY3Rpb24gKGluY3JlbWVudCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2FkdmFuY2VTbGlkZSwgY3VycmVudFNsaWRlSW5kZXg6ICcgKyBzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggKz0gKGluY3JlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc1ByZXNlbnRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVzZW50U2xpZGUoc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gcHJlc2VudFNsaWRlKGluZGV4KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygncHJlc2VudFNsaWRlJyk7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTtcclxuICAgICAgICAgICAgaWYgKCFzbGlkZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIC8vIE5COiBuZWVkIHRvIHNldCB0aGlzIGFmdGVyIGNsZWFyU2VsZWN0aW9uLCBhcyB0aGF0IHdpbGwgc2V0IGl0IHRvIG51bGwhIChzZWUgY2hhbmdlZFNlbGVjdGlvbilcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50U2xpZGVJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3ByZXNlbnRTbGlkZSwgaW5kZXg6ICcgKyBpbmRleCArICcsIHNsaWRlOiAnICsgc2xpZGUgKyAnLCBjdXJyZW50U2xpZGVJbmRleDogJyArIHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xyXG5cclxuICAgICAgICAgICAgbWF5YmVJbml0U2xpZGVCbG9ja2VyKCk7XHJcbiAgICAgICAgICAgIHZhciBibG9ja2VyVyA9IHNlbGYuU0xJREVfQkxPQ0tFUl9XSURUSDtcclxuXHJcbiAgICAgICAgICAgIGlmIChzbGlkZS5kYXRhLmhhc1JlZ2lvbikge1xyXG4gICAgICAgICAgICAgICAgem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2hvdyBzbGlkZSBibG9ja2VyXHJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci5kZXNpcmVkU2l6ZSA9IG5ldyBnby5TaXplKFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlLmFjdHVhbEJvdW5kcy53aWR0aCArIDIgKiBibG9ja2VyVywgXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuYWN0dWFsQm91bmRzLmhlaWdodCArIDIgKiBibG9ja2VyVyk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci5sb2NhdGlvbiA9IG5ldyBnby5Qb2ludChcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMueCAtIGJsb2NrZXJXLCBcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMueSAtIGJsb2NrZXJXKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2xpZGVCbG9ja2VyLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc2xpZGVCbG9ja2VyOiAnICsgc2VsZi5zbGlkZUJsb2NrZXIuYWN0dWFsQm91bmRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzbGlkZS5kYXRhLmlzU3VtbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5yZXNldFpvb20oKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2xpZGVCbG9ja2VyLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2VsZi5pc1ByZXNlbnRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3ByZXNlbnRlci1wbGF5aW5nJyk7XHJcblxyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7IC8vIGhpZGUgc2xpZGUgbm9kZXMgLSBzZWUgdGVtcGxhdGVzLmpzOiBzbGlkZVRlbXBsYXRlXHJcbiAgICAgICAgfSk7ICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICAvLyB6b29tIHRoZSBkaWFncmFtIHRvIHNob3cgdGhlIGdpdmVuIHNsaWRlIGluIHRoZSBjZW50ZXIgb2YgdGhlIGNhbnZhc1xyXG4gICAgZnVuY3Rpb24gem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSlcclxuICAgIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyIGhhbGZXaWR0aCA9IChzbGlkZS5kYXRhLnR5cGUgIT0gJ01BUF9PTkxZJyk7XHJcbiAgICAgICAgdmFyIHpvb21SZWN0ID0gc2VsZi5nZXRMZXR0ZXJib3hlZFJlY3Qoc2xpZGUuYWN0dWFsQm91bmRzLCBoYWxmV2lkdGgpO1xyXG4gICAgICAgIHpvb21SZWN0LmluZmxhdGUoem9vbVJlY3Qud2lkdGggLyAxMCwgem9vbVJlY3QuaGVpZ2h0IC8gMTApO1xyXG4gICAgICAgIGRpYWdyYW0uem9vbVRvUmVjdCh6b29tUmVjdCwgZ28uRGlhZ3JhbS5Vbmlmb3JtKTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgYSByZWN0YW5nbGUgY29udGFpbmluZyB0aGUgZ2l2ZW4gcmVjdCwgYnV0IHdpdGggYXBwcm9wcmlhdGUgd2lkdGggb3IgaGVpZ2h0IGFkZGVkXHJcbiAgICAvLyB0byBnaXZlIGl0IHNhbWUgYXNwZWN0IHJhdGlvIGFzIHRoZSBkaWFncmFtLlxyXG4gICAgdGhpcy5nZXRMZXR0ZXJib3hlZFJlY3QgPSBmdW5jdGlvbiAocmVjdCwgaGFsZldpZHRoKSB7XHJcblxyXG4gICAgICAgIC8vIE5COiB3ZSBjYWxjdWxhdGUgdGhlIGFzcGVjdCByYXRpbyB3aGVuIHRoZSB0YWIgaXMgb3BlbmVkLCBcclxuICAgICAgICAvLyByYXRoZXIgdGhhbiBlYWNoIHRpbWUgYXMgdGhlIGRpYWdyYW0gc2l6ZSBtaWdodCBiZSBjaGFuZ2luZy4uLlxyXG4gICAgICAgIHZhciBkYXIgPSAoaGFsZldpZHRoID8gc2VsZi5kaWFncmFtQXNwZWN0UmF0aW8gLyAyIDogc2VsZi5kaWFncmFtQXNwZWN0UmF0aW8pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdyZWN0OiAnICsgcmVjdCArICcsIGRhcjogJyArIGRhcik7XHJcblxyXG4gICAgICAgIHZhciByZWN0QXNwZWN0UmF0aW8gPSByZWN0LndpZHRoIC8gcmVjdC5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmIChkYXIgPiByZWN0QXNwZWN0UmF0aW8pIHtcclxuICAgICAgICAgICAgLy8gdGFsbCBza2lubnkgcmVjdCwgc2hvcnQgd2lkZSB0YXJnZXQgQVIsIHNvIGFkZCBzaWRlIHBhZGRpbmcgdG8gdGhlIHJlY3RcclxuICAgICAgICAgICAgdmFyIGxidyA9IHJlY3QuaGVpZ2h0ICogZGFyOyAvLyBiZWNhdXNlIGxidyAvIGxiaCA9PSBkYXIgPT0gbGJ3IC8gcmVjdC5oZWlnaHQgKGxiaCA9PSByZWN0LmhlaWdodClcclxuICAgICAgICAgICAgcmV0dXJuIHJlY3QuY29weSgpLmluZmxhdGUoKGxidyAtIHJlY3Qud2lkdGgpIC8gMiwgMCk7IC8vIGFkZCBoYWxmIHRoZSB3aWR0aCBkaWZmZXJlbmNlIHRvIGVhY2ggc2lkZSBvZiB0aGUgcmVjdFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gc2hvcnQgd2lkZSByZWN0LCB0YWxsIHNraW5ueSB0YXJnZXQgQVIsIHNvIGFkZCB0b3AvYm90dG9tIHBhZGRpbmcgdG8gdGhlIHJlY3RcclxuICAgICAgICAgICAgdmFyIGxiaCA9IHJlY3Qud2lkdGggLyBkYXI7IC8vIGJlY2F1c2UgbGJ3IC8gbGJoID09IGRhciA9PSBsYmggLyByZWN0LndpZHRoIChsYncgPT0gcmVjdC53aWR0aClcclxuICAgICAgICAgICAgcmV0dXJuIHJlY3QuY29weSgpLmluZmxhdGUoMCwgKGxiaCAtIHJlY3QuaGVpZ2h0KSAvIDIpOyAgLy8gYWRkIGhhbGYgdGhlIGhlaWdodCBkaWZmZXJlbmNlIHRvIHRvcC9ib3R0b20gb2YgdGhlIHJlY3RcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc3RvcFByZXNlbnRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc3RvcFByZXNlbnRpbmcsIGN1cnJlbnRTbGlkZUluZGV4OiAnICsgc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzZWxmLnNsaWRlQmxvY2tlcikge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL3NlbGYuY3VycmVudFNsaWRlSW5kZXggPSBudWxsO1xyXG4gICAgICAgICAgICBzZWxmLmlzUHJlc2VudGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3ByZXNlbnRlci1wbGF5aW5nJyk7XHJcblxyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7IC8vIHNob3cgc2xpZGUgbm9kZXNcclxuXHJcbiAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKGZhbHNlKTtcclxuICAgICAgICAgICAgLy9tYXAuZ2V0VWkoKS5yZXNldFpvb20oKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG59O1xyXG4iLCIvLyBnb0pTIHRlbXBsYXRlcyB1c2VkIGluIHRoZSBlZGl0b3JcclxuXHJcblNhbmRiYW5rRWRpdG9yLlRlbXBsYXRlcyA9IGZ1bmN0aW9uKGVkaXRvciwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHJldCA9IHRoaXM7XHJcblxyXG4gICAgLy8gY29uc3RhbnRzXHJcbiAgICB0aGlzLmdyb3VwRmlsbENvbG9yID0gXCIjZjlmOWY5XCI7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7fTtcclxuXHJcbiAgICAvLyBpbml0aWFsaXplIHRlbXBsYXRlLXJlbGF0ZWQgc3R1ZmYgdGhhdCBkZXBlbmRzIG9uIHRoZSBkaWFncmFtIChhbmQgdGhlcmVmb3JlIGNhbid0IGdvIGluIGluaXQoKSlcclxuICAgIHRoaXMuaW5pdFRlbXBsYXRlcyA9IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICBkaWFncmFtLmdyb3VwVGVtcGxhdGUgPSByZXQuZ3JvdXBUZW1wbGF0ZTtcclxuICAgICAgICBkaWFncmFtLm5vZGVUZW1wbGF0ZSA9IHJldC5zbGlkZVRlbXBsYXRlO1xyXG4gICAgICAgIGRpYWdyYW0ubGlua1RlbXBsYXRlID0gcmV0LmxpbmtUZW1wbGF0ZTtcclxuICAgICAgICBkaWFncmFtLmxpbmtUZW1wbGF0ZU1hcC5hZGQoJ1AnLCByZXQucExpbmtUZW1wbGF0ZSk7XHJcbiAgICAgICAgZGlhZ3JhbS5saW5rVGVtcGxhdGVNYXAuYWRkKCdEJywgcmV0LmRMaW5rVGVtcGxhdGUpO1xyXG5cclxuICAgICAgICByZXQuc2V0VGVtcG9yYXJ5TGlua1RlbXBsYXRlcyhkaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sKTtcclxuICAgICAgICByZXQuc2V0VGVtcG9yYXJ5TGlua1RlbXBsYXRlcyhkaWFncmFtLnRvb2xNYW5hZ2VyLnJlbGlua2luZ1Rvb2wpO1xyXG5cclxuICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sLnBvcnRUYXJnZXRlZCA9IGZ1bmN0aW9uKHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCkge1xyXG4gICAgICAgICAgICByZXQuaGFuZGxlUG9ydFRhcmdldGVkKGRpYWdyYW0udG9vbE1hbmFnZXIubGlua2luZ1Rvb2wsIHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5yZWxpbmtpbmdUb29sLnBvcnRUYXJnZXRlZCA9IGZ1bmN0aW9uKHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCkge1xyXG4gICAgICAgICAgICByZXQuaGFuZGxlUG9ydFRhcmdldGVkKGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbCwgcmVhbG5vZGUsIHJlYWxwb3J0LCB0ZW1wbm9kZSwgdGVtcHBvcnQsIHRvZW5kKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLnJlbGlua2luZ1Rvb2wudXBkYXRlQWRvcm5tZW50cyA9IGZ1bmN0aW9uKHBhcnQpIHtcclxuICAgICAgICAgICAgZ28uUmVsaW5raW5nVG9vbC5wcm90b3R5cGUudXBkYXRlQWRvcm5tZW50cy5jYWxsKHRoaXMsIHBhcnQpO1xyXG4gICAgICAgICAgICB2YXIgZnJvbSA9IHBhcnQuZmluZEFkb3JubWVudCgnUmVsaW5rRnJvbScpO1xyXG4gICAgICAgICAgICB2YXIgdG8gPSBwYXJ0LmZpbmRBZG9ybm1lbnQoJ1JlbGlua1RvJyk7XHJcbiAgICAgICAgICAgIC8vIGlmIChmcm9tKVxyXG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ3JlbGlua2Zyb206ICcgKyBmcm9tLnBhcnQud2lkdGgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIubGlua2luZ1Rvb2wubGlua1ZhbGlkYXRpb24gPSByZXQudmFsaWRhdGVMaW5rO1xyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbC5saW5rVmFsaWRhdGlvbiA9IHJldC52YWxpZGF0ZUxpbms7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNvbnZlbmllbnQgYWJicmV2aWF0aW9uIGZvciBjcmVhdGluZyB0ZW1wbGF0ZXNcclxuICAgIHZhciBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcblxyXG4gICAgLy8gRFNSUCBjb2xvcnMgKGZyb20gX3ZhcmlhYmxlcy5zY3NzKVxyXG4gICAgdmFyIGNvbG9yRCA9IFwiI2YyNjI0Y1wiO1xyXG4gICAgdmFyIGNvbG9yUyA9IFwiIzk2YzkzZFwiO1xyXG4gICAgdmFyIGNvbG9yUiA9IFwiIzRjYmZjMlwiO1xyXG4gICAgdmFyIGNvbG9yUCA9IFwiI2ZiYWEzNlwiO1xyXG4gICAgdmFyIGNvbG9yUExpZ2h0ID0gXCIjRkREREFGXCI7XHJcbiAgICB2YXIgY29sb3JQRGFyayA9IFwiI0M5ODgyQlwiO1xyXG5cclxuICAgIHZhciBleWVTdmdQYXRoID0gXCJNIDI1Ni4wMCw5Ni4wMEMgMTQ0LjM0MSw5Ni4wMCwgNDcuNTU5LDE2MS4wMjEsMC4wMCwyNTYuMDBjIDQ3LjU1OSw5NC45NzksIDE0NC4zNDEsMTYwLjAwLCAyNTYuMDAsMTYwLjAwYyAxMTEuNjU3LDAuMDAsIDIwOC40MzktNjUuMDIxLCAyNTYuMDAtMTYwLjAwIEMgNDY0LjQ0MiwxNjEuMDIxLCAzNjcuNjU3LDk2LjAwLCAyNTYuMDAsOTYuMDB6IE0gMzgyLjIyNSwxODAuODUyYyAzMC4wODEsMTkuMTg3LCA1NS41NzEsNDQuODg3LCA3NC43MTcsNzUuMTQ4IGMtMTkuMTQ2LDMwLjI2MS00NC42MzcsNTUuOTYxLTc0LjcxOCw3NS4xNDlDIDM0NC40MjcsMzU1LjI1NywgMzAwLjc3OSwzNjguMDAsIDI1Ni4wMCwzNjguMDBjLTQ0Ljc4LDAuMDAtODguNDI4LTEyLjc0My0xMjYuMjI1LTM2Ljg1MiBDIDk5LjY5NSwzMTEuOTYyLCA3NC4yMDUsMjg2LjI2MiwgNTUuMDU4LDI1Ni4wMGMgMTkuMTQ2LTMwLjI2MiwgNDQuNjM3LTU1Ljk2MiwgNzQuNzE3LTc1LjE0OGMgMS45NTktMS4yNSwgMy45MzgtMi40NjEsIDUuOTI5LTMuNjUgQyAxMzAuNzI1LDE5MC44NjYsIDEyOC4wMCwyMDUuNjEzLCAxMjguMDAsMjIxLjAwYzAuMDAsNzAuNjkyLCA1Ny4zMDgsMTI4LjAwLCAxMjguMDAsMTI4LjAwcyAxMjguMDAtNTcuMzA4LCAxMjguMDAtMTI4LjAwYzAuMDAtMTUuMzg3LTIuNzI1LTMwLjEzNC03LjcwNC00My43OTkgQyAzNzguMjg2LDE3OC4zOSwgMzgwLjI2NSwxNzkuNjAyLCAzODIuMjI1LDE4MC44NTJ6IE0gMjU2LjAwLDIwNS4wMGMwLjAwLDI2LjUxLTIxLjQ5LDQ4LjAwLTQ4LjAwLDQ4LjAwcy00OC4wMC0yMS40OS00OC4wMC00OC4wMHMgMjEuNDktNDguMDAsIDQ4LjAwLTQ4LjAwIFMgMjU2LjAwLDE3OC40OSwgMjU2LjAwLDIwNS4wMHpcIjtcclxuICAgIHZhciBleWVCbG9ja2VkU3ZnUGF0aCA9IFwiTSA0MTkuNjYxLDE0OC4yMDggQyA0NTguNDgzLDE3NS43MjMgNDkwLjM0NiwyMTIuNzU0IDUxMi4wMCwyNTYuMDAgQyA0NjQuNDM5LDM1MC45NzkgMzY3LjY1Nyw0MTYuMDAgMjU2LjAwLDQxNi4wMCBDIDIyNC43MTcsNDE2LjAwIDE5NC42MDQsNDEwLjg5NCAxNjYuNDExLDQwMS40NTggTCAyMDUuMzg5LDM2Mi40OCBDIDIyMS45MTgsMzY2LjEzIDIzOC44NzUsMzY4LjAwIDI1Ni4wMCwzNjguMDAgQyAzMDAuNzc5LDM2OC4wMCAzNDQuNDI3LDM1NS4yNTcgMzgyLjIyMywzMzEuMTQ4IEMgNDEyLjMwNCwzMTEuOTYgNDM3Ljc5NSwyODYuMjYgNDU2Ljk0MSwyNTUuOTk5IEMgNDM4LjQxNSwyMjYuNzE2IDQxMy45MzQsMjAxLjcyNCAzODUuMTE2LDE4Mi43NTIgTCA0MTkuNjYxLDE0OC4yMDggWk0gMjU2LjAwLDM0OS4wMCBDIDI0NC42MzgsMzQ5LjAwIDIzMy42MjQsMzQ3LjUxMiAyMjMuMTM2LDM0NC43MzMgTCAzNzkuNzI5LDE4OC4xNDEgQyAzODIuNTEsMTk4LjYyNyAzODQuMDAsMjA5LjYzOCAzODQuMDAsMjIxLjAwIEMgMzg0LjAwLDI5MS42OTIgMzI2LjY5MiwzNDkuMDAgMjU2LjAwLDM0OS4wMCBaTSA0ODAuMDAsMC4wMGwtMjYuODY5LDAuMDAgTCAzNDMuMzI1LDEwOS44MDZDIDMxNS43ODcsMTAwLjg0NCwgMjg2LjQ0OCw5Ni4wMCwgMjU2LjAwLDk2LjAwQyAxNDQuMzQxLDk2LjAwLCA0Ny41NTksMTYxLjAyMSwwLjAwLDI1Ni4wMCBjIDIxLjMyOSw0Mi41OTYsIDUyLjU2NCw3OS4xNTQsIDkwLjU5NywxMDYuNTM0TDAuMDAsNDUzLjEzMUwwLjAwLDQ4MC4wMCBsIDI2Ljg2OSwwLjAwIEwgNDgwLjAwLDI2Ljg2OUwgNDgwLjAwLDAuMDAgeiBNIDIwOC4wMCwxNTcuMDBjIDI0LjAyMiwwLjAwLCA0My45MjMsMTcuNjQ3LCA0Ny40NDYsNDAuNjg1IGwtNTQuNzYyLDU0Ljc2MkMgMTc3LjY0NywyNDguOTIzLCAxNjAuMDAsMjI5LjAyMiwgMTYwLjAwLDIwNS4wMEMgMTYwLjAwLDE3OC40OSwgMTgxLjQ5LDE1Ny4wMCwgMjA4LjAwLDE1Ny4wMHogTSA1NS4wNTgsMjU2LjAwIGMgMTkuMTQ2LTMwLjI2MiwgNDQuNjM3LTU1Ljk2MiwgNzQuNzE3LTc1LjE0OGMgMS45NTktMS4yNSwgMy45MzgtMi40NjEsIDUuOTI5LTMuNjVDIDEzMC43MjUsMTkwLjg2NiwgMTI4LjAwLDIwNS42MTMsIDEyOC4wMCwyMjEuMDAgYzAuMDAsMjkuMjYyLCA5LjgyNSw1Ni4yMjQsIDI2LjM0OSw3Ny43ODFsLTI5LjI3NSwyOS4yNzVDIDk3LjAzOCwzMDkuMjM1LCA3My4xOTcsMjg0LjY3LCA1NS4wNTgsMjU2LjAwelwiO1xyXG4gICAgdmFyIHBhcGVyY2xpcFN2Z1BhdGggPSBcIk0gMzQ4LjkxNiwxNjMuNTI0bC0zMi40NzYtMzIuNDYxTCAxNTQuMDM1LDI5My40MzRjLTI2LjkwNywyNi44OTYtMjYuOTA3LDcwLjUyNCwwLjAwLDk3LjQyMiBjIDI2LjkwMiwyNi44OTYsIDcwLjUzLDI2Ljg5NiwgOTcuNDM3LDAuMDBsIDE5NC44ODYtMTk0Ljg1NGMgNDQuODU3LTQ0LjgzMSwgNDQuODU3LTExNy41MzEsMC4wMC0xNjIuMzYzIGMtNDQuODMzLTQ0Ljg1Mi0xMTcuNTU2LTQ0Ljg1Mi0xNjIuMzkxLDAuMDBMIDc5LjMzNSwyMzguMjEybCAwLjAxNywwLjAxNmMtMC4xNDUsMC4xNTItMC4zMDYsMC4yODgtMC40MzgsMC40MjMgYy02Mi41NTEsNjIuNTQ4LTYyLjU1MSwxNjMuOTI4LDAuMDAsMjI2LjQ1M2MgNjIuNTI3LDYyLjUyOCwgMTYzLjkzNCw2Mi41MjgsIDIyNi40OTQsMC4wMGMgMC4xMzctMC4xMzcsIDAuMjU4LTAuMjg0LCAwLjQxLTAuNDM4bCAwLjAxNiwwLjAxNyBsIDEzOS42NjYtMTM5LjY0NmwtMzIuNDkzLTMyLjQ2TCAyNzMuMzUsNDMyLjIwOGwtMC4wMDgsMC4wMCBjLTAuMTQ4LDAuMTM0LTAuMjgyLDAuMjg1LTAuNDIzLDAuNDIyIGMtNDQuNTM3LDQ0LjUyOS0xMTYuOTksNDQuNTI5LTE2MS41MzgsMC4wMGMtNDQuNTMxLTQ0LjUyMS00NC41MzEtMTE2Ljk2MSwwLjAwLTE2MS40ODljIDAuMTUyLTAuMTUyLCAwLjMwMi0wLjI5MSwgMC40NDQtMC40MjNsLTAuMDIzLTAuMDMgbCAyMDQuNjQtMjA0LjU4M2MgMjYuODU2LTI2Ljg2OSwgNzAuNTcyLTI2Ljg2OSwgOTcuNDQzLDAuMDBjIDI2Ljg1NiwyNi44NjcsIDI2Ljg1Niw3MC41NzQsMC4wMCw5Ny40MkwgMjE4Ljk5OSwzNTguMzc1IGMtOC45NjgsOC45NjEtMjMuNTI3LDguOTYxLTMyLjQ4NiwwLjAwYy04Ljk0Ny04Ljk0My04Ljk0Ny0yMy41MTYsMC4wMC0zMi40NkwgMzQ4LjkxNiwxNjMuNTI0elwiO1xyXG5cclxuICAgIC8vIGZvb3RlciBmb3IgaW1hZ2UgZXhwb3J0XHJcbiAgICB2YXIgX2V4cG9ydEZvb3RlciA9IG51bGw7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSBkZWJ1ZyBpbmZvIGZvciBncm91cHMvbGlua3MgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBncm91cEluZm8ob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iai5kYXRhLnRleHQgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ29iamVjdDogJyArIG9iaiArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAna2V5OiAnICsgb2JqLmRhdGEua2V5ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdjb250YWluaW5nR3JvdXA6ICcgKyBvYmouY29udGFpbmluZ0dyb3VwICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdsYXlvdXQ6ICcgKyBvYmoubGF5b3V0ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdkYXRhLmxheW91dDogJyArIG9iai5kYXRhLmxheW91dCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAncG9zaXRpb246ICcgKyBwYXJzZUludChvYmoucG9zaXRpb24ueCwgMTApICsgJywgJyArIHBhcnNlSW50KG9iai5wb3NpdGlvbi55LCAxMCkgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2ZyZWVoYW5kIHBvc2l0aW9uIChkYXRhLmxvYyk6ICcgKyBnby5Qb2ludC5wYXJzZShvYmouZGF0YS5sb2MpICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICd3aWR0aC9oZWlnaHQ6ICcgKyBwYXJzZUludChvYmouYWN0dWFsQm91bmRzLndpZHRoLCAxMCkgKyAnLycgKyBwYXJzZUludChvYmouYWN0dWFsQm91bmRzLmhlaWdodCwgMTApICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdnZXRTY2FsZSgpOiAnICsgbWFwLmdldExheW91dHMoKS5nZXRTY2FsZShvYmopICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdpc0xpbmtMYWJlbDogJyArIG9iai5kYXRhLmlzTGlua0xhYmVsICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdsYWJlbGVkTGluazogJyArIG9iai5sYWJlbGVkTGluayArIFwiXFxuXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbm9kZUluZm8ob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuICdvYmplY3Q6ICcgKyBvYmogKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2tleTogJyArIG9iai5kYXRhLmtleSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAncG9zaXRpb246ICcgKyBwYXJzZUludChvYmoucG9zaXRpb24ueCwgMTApICsgJywgJyArIHBhcnNlSW50KG9iai5wb3NpdGlvbi55LCAxMCkgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3dpZHRoL2hlaWdodDogJyArIHBhcnNlSW50KG9iai5hY3R1YWxCb3VuZHMud2lkdGgsIDEwKSArICcvJyArIHBhcnNlSW50KG9iai5hY3R1YWxCb3VuZHMuaGVpZ2h0LCAxMCkgKyBcIlxcblwiO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGxpbmtJbmZvKG9iaikge1xyXG4gICAgICAgIHZhciBzbnBvcyA9IG1hcC5nZXRMYXlvdXRzKCkuZ2V0U2FtZU5vZGVzTGlua1Bvc2l0aW9uKG9iaik7XHJcbiAgICAgICAgcmV0dXJuICcnICtcclxuICAgICAgICAgICAgJ29iamVjdDogJyArIG9iaiArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZnJvbU5vZGU6ICcgKyBvYmouZnJvbU5vZGUgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3RvTm9kZTogJyArIG9iai50b05vZGUgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2xhYmVsTm9kZXM6ICcgKyBvYmoubGFiZWxOb2Rlcy5jb3VudCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnbGFiZWxOb2RlSXNWaXNpYmxlOiAnICsgbWFwLmdldExheW91dHMoKS5sYWJlbE5vZGVJc1Zpc2libGUob2JqKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZnJvbVBvcnRJZDogJyArIG9iai5mcm9tUG9ydElkICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICd0b1BvcnRJZDogJyArIG9iai50b1BvcnRJZCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnY2F0ZWdvcnk6ICcgKyAob2JqLmRhdGEgPyBvYmouZGF0YS5jYXRlZ29yeSA6ICcnKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnY29udGFpbmluZ0dyb3VwOiAnICsgb2JqLmNvbnRhaW5pbmdHcm91cCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZnJvbUFuZFRvTm9kZXNBcmVWaXNpYmxlOiAnICsgbWFwLmdldExheW91dHMoKS5mcm9tQW5kVG9Ob2Rlc0FyZVZpc2libGUob2JqKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnY3VydmU6ICcgKyBvYmouY3VydmUgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2N1cnZpbmVzczogJyArIG9iai5jdXJ2aW5lc3MgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2Zyb21FbmRTZWdtZW50TGVuZ3RoOiAnICsgTWF0aC5yb3VuZChvYmouZnJvbUVuZFNlZ21lbnRMZW5ndGgpICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICd0b0VuZFNlZ21lbnRMZW5ndGg6ICcgKyBNYXRoLnJvdW5kKG9iai50b0VuZFNlZ21lbnRMZW5ndGgpICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdzYW1lTm9kZXNMaW5rUG9zaXRpb246ICcgKyBzbnBvcy5pbmRleCArICcgb2YgJyArIHNucG9zLmNvdW50ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgIC8vKyAnZ2VvbWV0cnk6ICcgKyBvYmouZ2VvbWV0cnkgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2dldExpbmtTdHJva2VXaWR0aDogJyArIG1hcC5nZXRMYXlvdXRzKCkuZ2V0TGlua1N0cm9rZVdpZHRoKG9iaikgKyBcIlxcblwiO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gTkI6IHRoZXNlIGFyZSBoZXJlIGJlY2F1c2UgdGhleSBhcmUgYWJvdXQgY29sb3JzOyBcclxuICAgIC8vIHNpbWlsYXIgZnVuY3Rpb25zIHRoYXQgYXJlIHNjYWxlLXJlbGF0ZWQgYXJlIGluIGxheW91dHMuanMuLi5cclxuICAgIGZ1bmN0aW9uIGdldEdyb3VwU2VsZWN0aW9uU3Ryb2tlKG9iaikge1xyXG4gICAgICAgIGlmIChvYmouaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QRWRpdG9yTW9kZSgpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yUDtcclxuICAgICAgICAgICAgZWxzZSBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5ERWRpdG9yTW9kZSgpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yRDtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIzAwMFwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIiMwMDBcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT0ssIHRoaXMgaXNuJ3QgYWJvdXQgY29sb3JzLCBidXQgaXQgd2FudHMgdG8gYmUgbmVhciB0aGUgb25lIGFib3ZlLi4uXHJcbiAgICBmdW5jdGlvbiBnZXRHcm91cFNlbGVjdGlvblN0cm9rZVdpZHRoKG9iaikge1xyXG4gICAgICAgIHJldHVybiAob2JqLmlzU2VsZWN0ZWQgPyAzIDogMSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2Uob2JqKSB7XHJcbiAgICAgICAgaWYgKG9iai5pc1NlbGVjdGVkIHx8IG9iaiA9PSBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJMaW5rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvclI7IC8vIFRPRE86IGNhbiBQIGxpbmtzIGJlIHNlbGVjdGVkP1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIiMwMDBcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBjYWxsYmFja3MgdG8gZGV0ZXJtaW5lIHdoZW4gdGhlIGNvcm5lcnMgc2hvdWxkIGJlIHZpc2libGVcclxuXHJcbiAgICBmdW5jdGlvbiBzaG93RENvcm5lcihncm91cCkge1xyXG4gICAgICAgIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNERWRpdG9yVGhpbmcoZ3JvdXApKSB7IC8vIG1hcmsgZGlzdGluY3Rpb24gdGhpbmdcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNJblBPckRFZGl0b3JNb2RlKCkpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBpbiBQL0QgZWRpdG9yIG1vZGVcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFByZXNlbnRlcigpLmlzQ3JlYXRpbmdUaHVtYm5haWwpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBjYXB0dXJpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKGdyb3VwID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwKSB8fCAvLyBzaG93IGNvcm5lcnMgb24gbW91c2VvdmVyXHJcbiAgICAgICAgICAgICAgICAoZWRpdG9yLmlzVG91Y2hEZXZpY2UoKSAmJiBncm91cC5pc1NlbGVjdGVkKSB8fFxyXG4gICAgICAgICAgICAgICAgKGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZVNpc3RlcnNPZihncm91cCwgZmFsc2UpICYmIC8vIGRyYWcgdG8gRCAobWFrZSBpdCBzaXN0ZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgICghbWFwLmdldFVpKCkuZHJhZ1RhcmdldFBvc2l0aW9uIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbm5vdERyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihncm91cCkpKTsgLy8gbm90IHNob3dpbmcgZHJhZyBhYm92ZS9iZWxvdyBpbmRpY2F0b3JzXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dTQ29ybmVyKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luUE9yREVkaXRvck1vZGUoKSkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGluIFAvRCBlZGl0b3IgbW9kZVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAuZ2V0UHJlc2VudGVyKCkuaXNDcmVhdGluZ1RodW1ibmFpbCkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGNhcHR1cmluZyB0aHVtYm5haWxcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoZ3JvdXAgPT0gbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXApIHx8IC8vIHNob3cgY29ybmVycyBvbiBtb3VzZW92ZXJcclxuICAgICAgICAgICAgICAgIChlZGl0b3IuaXNUb3VjaERldmljZSgpICYmIGdyb3VwLmlzU2VsZWN0ZWQpIHx8XHJcbiAgICAgICAgICAgICAgICAoY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lQ2hpbGRyZW5PZihncm91cCwgZmFsc2UpICYmIC8vIGRyYWcgdG8gUyAobWFrZSBpdCBjaGlsZHJlbilcclxuICAgICAgICAgICAgICAgICAgICAoIW1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5ub3REcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YoZ3JvdXApKSk7IC8vIG5vdCBzaG93aW5nIGRyYWcgYWJvdmUvYmVsb3cgaW5kaWNhdG9yc1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93UkNvcm5lcihncm91cCkge1xyXG4gICAgICAgIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNJblBPckRFZGl0b3JNb2RlKCkpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBpbiBQL0QgZWRpdG9yIG1vZGVcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFByZXNlbnRlcigpLmlzQ3JlYXRpbmdUaHVtYm5haWwpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBjYXB0dXJpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JvdXAgPT0gbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXAgfHxcclxuICAgICAgICAgICAgICAgIChlZGl0b3IuaXNUb3VjaERldmljZSgpICYmIGdyb3VwLmlzU2VsZWN0ZWQpOyAvLyBzaG93IGNvcm5lcnMgb24gbW91c2VvdmVyXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dQQ29ybmVyKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc1BFZGl0b3JQb2ludChncm91cCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIG1hcmsgcGVyc3BlY3RpdmUgcG9pbnRcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luUE9yREVkaXRvck1vZGUoKSkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGluIFAvRCBlZGl0b3IgbW9kZVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAuZ2V0UHJlc2VudGVyKCkuaXNDcmVhdGluZ1RodW1ibmFpbCkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGNhcHR1cmluZyB0aHVtYm5haWxcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBncm91cCA9PSBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCB8fFxyXG4gICAgICAgICAgICAgICAgKGVkaXRvci5pc1RvdWNoRGV2aWNlKCkgJiYgZ3JvdXAuaXNTZWxlY3RlZCk7IC8vIHNob3cgY29ybmVycyBvbiBtb3VzZW92ZXJcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gd2hlbiBhIFAgbGluayBzaG91bGQgYmUgdmlzaWJsZVxyXG5cclxuICAgIHRoaXMuc2hvd1BMaW5rID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHZhciBtb2RlID0gbWFwLmdldFVpKCkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLnBlcnNwZWN0aXZlTW9kZTtcclxuICAgICAgICBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzUEVkaXRvclBvaW50KGxpbmsuZnJvbU5vZGUpKSB7IC8vIHNob3cgUCdzIHdoZW4gdGhpcyBsaW5rIGlzIGZyb20gdGhlIGN1cnJlbnQgUG9pbnRcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNJblBPckRFZGl0b3JNb2RlKCkpIHsgLy8gZG9uJ3Qgc2hvdyBQJ3MgZm9yIG5vbi1Qb2ludCB0aGluZ3MsIGV2ZW4gb24gbW91c2VvdmVyXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKG1vZGUgPT0gJ2xpbmVzJyB8fCBtb2RlID09ICdib3RoJykgJiYgKGxpbmsuZnJvbU5vZGUgPT0gbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXAgfHwgbWFwLnBJc0V4cGFuZGVkKGxpbmsuZnJvbU5vZGUpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2hvd1BEb3QgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIG1hcC5nZXRVaSgpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5wZXJzcGVjdGl2ZU1vZGUgIT0gJ2JvdGgnO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyB0aGVzZSBmdW5jdGlvbnMgYXJlIHVzZWQgaW4gdHdvIG1vZGVzOlxyXG4gICAgLy8gMS4gd2l0aCBpc0Ryb3BwaW5nID09IGZhbHNlLCB0byBoaWdobGlnaHQgZHJvcCB0YXJnZXRzIGJhc2VkIG9uIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRHcm91cCBhbmQgbWFwLmdldFVpKCkuZHJhZ1RhcmdldFBvc2l0aW9uLFxyXG4gICAgLy8gICAgd2hpY2ggYXJlIHNldCBvbiBtb3VzZURyYWdFbnRlci9tb3VzZURyYWdsZWF2ZVxyXG4gICAgLy8gMi4gd2l0aCBpc0Ryb3BwaW5nID09IHRydWUsIG9uIGRyb3AsIHdoZW4gdGhlIGFib3ZlIGluZGljYXRvcnMgaGF2ZSBnb25lIGF3YXksIGJ1dCB3ZSBrbm93IHdoYXQgdGhlIGRyb3BwZWRcclxuICAgIC8vICAgIGFuZCB0YXJnZXQgZ3JvdXBzIGFyZSwgYW5kIHdlIHdhbnQgdG8ga25vdyB3aGF0IHRoZSBkcm9wIHNob3VsZCBkby5cclxuXHJcbiAgICBmdW5jdGlvbiBjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVTaXN0ZXJzT2YoZ3JvdXAsIGlzRHJvcHBpbmcpIHtcclxuICAgICAgICByZXR1cm4gKGdyb3VwID09IG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRHcm91cCB8fCBpc0Ryb3BwaW5nKSAmJlxyXG4gICAgICAgICAgICBtYXAudGhpbmdzU2VsZWN0ZWRBcmVEZXNjZW5kYW50c09mKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVDaGlsZHJlbk9mKGdyb3VwLCBpc0Ryb3BwaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIChncm91cCA9PSBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgIW1hcC50aGluZ3NTZWxlY3RlZEluY2x1ZGVTbGlkZSgpICYmXHJcbiAgICAgICAgICAgICFtYXAudGhpbmdzU2VsZWN0ZWRBcmVEZXNjZW5kYW50c09mKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzaWRlIGlzIG1hcC5MRUZUIG9yIG1hcC5SSUdIVFxyXG4gICAgZnVuY3Rpb24gY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKHRhcmdldEdyb3VwLCBzaWRlLCBpc0Ryb3BwaW5nKSB7XHJcbiAgICAgICAgLy8gbXVzdCBiZSBkcmFnZ2luZyBzaW5nbGUgZ3JvdXBcclxuICAgICAgICB2YXIgZHJhZ2dlZEdyb3VwID0gbWFwLmdldFVuaXF1ZVRoaW5nU2VsZWN0ZWQoKTtcclxuICAgICAgICBpZiAoIWRyYWdnZWRHcm91cCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkcmFnZ2VkIGFuZCB0YXJnZXQgbXVzdCBiZSBTaXN0ZXJzIGluIGludmVudG9yeSBsYXlvdXRcclxuICAgICAgICByZXR1cm4gKHRhcmdldEdyb3VwID09IG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRHcm91cCB8fCBpc0Ryb3BwaW5nKSAmJlxyXG4gICAgICAgICAgICAobWFwLmdldFVpKCkuZHJhZ1RhcmdldFBvc2l0aW9uID09IHNpZGUgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgbWFwLmdldExheW91dHMoKS5hcmVTaXN0ZXJzSW5JbnZlbnRvcnlMYXlvdXQoZHJhZ2dlZEdyb3VwLCB0YXJnZXRHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2Fubm90RHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKHRhcmdldEdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuICFjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YodGFyZ2V0R3JvdXAsIG1hcC5MRUZUKSAmJlxyXG4gICAgICAgICAgICAhY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKHRhcmdldEdyb3VwLCBtYXAuUklHSFQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGhhbmRsZSBkcm9wIG9uIG9uZSBvZiB0aGUgdGhyZWUgdGFyZ2V0IHJlZ2lvbnMgKHRvcCwgbWlkZGxlLCBib3R0b20pXHJcbiAgICAvLyBzaWRlIGlzIG1hcC5MRUZUIG9yIG1hcC5SSUdIVFxyXG4gICAgZnVuY3Rpb24gaGFuZGxlR3JvdXBNb3VzZURyb3AoZXZlbnQsIGRyb3BUYXJnZXQsIHNpZGUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdkcmFnQWJvdmVUYXJnZXQubW91c2VEcm9wLCB0YXJnZXQ6ICcgKyBkcm9wVGFyZ2V0ICsgJywgcGFydDogJyArIGRyb3BUYXJnZXQgLnBhcnQgKyAnLCBzaG93OiAnICsgc2hvdyk7XHJcbiAgICAgICAgaWYgKHNpZGUgICYmIGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihkcm9wVGFyZ2V0LnBhcnQsIHNpZGUsIHRydWUpKSB7XHJcbiAgICAgICAgICAgIG1hcC5hZGRTZWxlY3RlZFRoaW5nQXNPcmRlcmVkU2lzdGVyT2YoZHJvcFRhcmdldC5wYXJ0LCBzaWRlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZVNpc3RlcnNPZihkcm9wVGFyZ2V0LnBhcnQsIHRydWUpKSB7XHJcbiAgICAgICAgICAgIG1hcC5hZGRTZWxlY3RlZFRoaW5nc0FzU2lzdGVyc09mKGRyb3BUYXJnZXQucGFydCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVDaGlsZHJlbk9mKGRyb3BUYXJnZXQucGFydCwgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgbWFwLmFkZFNlbGVjdGVkVGhpbmdzQXNDaGlsZHJlbk9mKGRyb3BUYXJnZXQucGFydCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHdoZW4gdG8gc2hvdyB0aGUgUi10aGluZyBrbm9iIG9uIGEgbGlua1xyXG4gICAgZnVuY3Rpb24gc2hvd0tub2IobGluaykge1xyXG4gICAgICAgIHJldHVybiBsaW5rID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckxpbms7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLSBjb21wb25lbnRzIGZvciBtYWluIGdyb3VwIHRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIGRGbGFnTWFya2VyKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2ZpbGwnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmRhdGEuZGZsYWcgPyAnIzAwMCcgOiBudWxsO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImRmbGFnXCIsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDE4LCAxOCksXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGIE0wIDEgTDAgMTggTDE4IDAgTDEgMHpcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFwiRFwiIGNvcm5lciAodG9wIGxlZnQsIHJlZClcclxuICAgIGZ1bmN0aW9uIGNvcm5lckQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dEQ29ybmVyKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY29ybmVyRFwiLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1MCwgNTApLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1MCwgNTApLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRiBNMCAxIEwwIDUwIEw1MCAwIEwxIDB6XCIsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogY29sb3JELFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NsaWNrLCBjb250cm9sOicgKyBldmVudC5jb250cm9sICsgJywgYWx0OicgKyBldmVudC5hbHQgKyAnLCBtZXRhOicgKyBldmVudC5tZXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuYWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5COiBhIHNpZGUgZWZmZWN0IG9mIHRoaXMgd2lsbCBiZSB0byBzZWxlY3QganVzdCB0aGlzIGdyb3VwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCB3b3VsZCBub3QgaGFwcGVuIG90aGVyd2lzZSB2aWEgY29udHJvbC1jbGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuc2V0REVkaXRvclRoaW5nKHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5oYW5kbGVDb3JuZXJDbGljayhcIkRcIiwgdGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjb250ZXh0Q2xpY2s6JyArIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBtYXAudG9nZ2xlREZsYWcodGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIkRcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogXCJ3aGl0ZVwiLFxyXG4gICAgICAgICAgICAgICAgZm9udDogJzlweCBzYW5zLXNlcmlmJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMTIsIDE1KSxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXCJTXCIgY29ybmVyIChib3R0b20gbGVmdCwgZ3JlZW4pXHJcbiAgICBmdW5jdGlvbiBjb3JuZXJTKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChzaG93U0Nvcm5lcihvYmopID8gMSA6IDApO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvcm5lclNcIixcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgNTApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUwLCA1MCksXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUwLCA1MCksXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGIE0wIDAgTDAgNDkgTDEgNTAgTDUwIDUwelwiLCB0cnVlKSxcclxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLmhhbmRsZUNvcm5lckNsaWNrKFwiU1wiLCB0YXJnZXQucGFydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAvLyBleHBhbnNpb24gaW5kaWNhdG9yXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Bvc2l0aW9uJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAob2JqLmlzU3ViR3JhcGhFeHBhbmRlZCA/IG5ldyBnby5Qb2ludCg0LCA0MykgOiBuZXcgZ28uUG9pbnQoNSwgMzgpKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnYW5nbGUnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvYmouaXNTdWJHcmFwaEV4cGFuZGVkID8gOTAgOiAwKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNSwgMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBnby5HZW9tZXRyeS5wYXJzZShcIkYgTTAgMCBMNSA1IEwwIDEwelwiLCB0cnVlKSxcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBcIiMzMzNcIixcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJTXCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IFwid2hpdGVcIixcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICc5cHggc2Fucy1zZXJpZicsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDEyLCAyOCksXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNob3cgb25seSB3aGVuIHN5c3RlbSBpcyBjb2xsYXBzZWRcclxuICAgIGZ1bmN0aW9uIHNDb2xsYXBzZWRNYXJrZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhc2hvd1NDb3JuZXIob2JqKSAmJiBvYmoubWVtYmVyUGFydHMuY291bnQgPiAwICYmICFvYmouaXNTdWJHcmFwaEV4cGFuZGVkO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDUsIDg4KSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1LCAxMCksXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGIE0wIDAgTDUgNSBMMCAxMHpcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAnIzMzMycsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcIlJcIiBjb3JuZXIgKGJvdHRvbSByaWdodCwgYmx1ZSlcclxuICAgIGZ1bmN0aW9uIGNvcm5lclIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dSQ29ybmVyKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY29ybmVyUlwiLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvcm5lclJTaGFwZVwiLFxyXG4gICAgICAgICAgICAgICAgLy8gTkI6IHRoaXMgY29ybmVyIGlzIGRvbmUgZGlmZmVyZW50bHkgZnJvbSB0aGUgb3RoZXJzOlxyXG4gICAgICAgICAgICAgICAgLy8gMS4gdGhlIG92ZXJhbGwgc2hhcGUgaXMgdGhlIHNpemUgb2YgdGhlIHdob2xlIHNxdWFyZSwgc28gdGhlIHBvcnQgZmFsbHMgaW4gdGhlIG1pZGRsZSBpbnN0ZWFkIG9mIHRoZSBjb3JuZXI7XHJcbiAgICAgICAgICAgICAgICAvLyAyLiB0aGUgZ2VvbWV0cnkgdHJhY2VzIGFyb3VuZCB0aGUgZWRnZXMgb2YgdGhlIHdob2xlIHNxdWFyZSwgYmVjYXVzZSBvdGhlcndpc2UgdGhlIGxpbmsgbGluZSB3aWxsXHJcbiAgICAgICAgICAgICAgICAvLyAgICBzaG93IGluc2lkZSB0aGUgbWFpbiBzcXVhcmUgaWYgaXQncyBjcm9zc2luZyBvbmUgb2YgdGhlIG90aGVyIDMgcXVhZHJhbnRzIFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiTTAgMCBMMCAxMDAgXCIgKyAvLyB0b3AgbGVmdCB0byBib3R0b20gbGVmdFxyXG4gICAgICAgICAgICAgICAgICAgIFwiTDk5IDEwMCBMMTAwIDk5IEwgMTAwIDAgXCIgKyAvLyBib3R0b20vcmlnaHQgc2lkZXMgKHJvdW5kIGJvdHRvbSByaWdodCBjb3JuZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgXCJMIDAgMCBMIDEwMCAwIFwiICsgLy8gYmFjayB0byB0b3AgbGVmdCB0aGVuIHRvcCByaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIFwiTCAxMDAgNTAgTCA1MCAxMDAgXCIgKyAvLyB0byBtaWRwb2ludCBvZiByaWdodCBzaWRlLCBtaWRwb2ludCBvZiBib3R0b20gc2lkZVxyXG4gICAgICAgICAgICAgICAgICAgIFwiTDAgMTAwelwiLCAvLyBib3R0b20gbGVmdCwgcmV0dXJuIGhvbWVcclxuICAgICAgICAgICAgICAgICAgICB0cnVlKSxcclxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG5cclxuICAgICAgICAgICAgICAgIHBvcnRJZDogXCJSXCIsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlRHVwbGljYXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIHNpbmdsZSBvciBkb3VibGUgY2xpY2tcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5oYW5kbGVDb3JuZXJDbGljayhcIlJcIiwgdGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlJcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogXCJ3aGl0ZVwiLFxyXG4gICAgICAgICAgICAgICAgZm9udDogJzlweCBzYW5zLXNlcmlmJyxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoODIsIDc4KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYXR0YWNobWVudFBhcGVyQ2xpcCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5kYXRhLmF0dGFjaG1lbnRzICAmJiBvYmouZGF0YS5hdHRhY2htZW50cyAhPT0gdW5kZWZpbmVkICYmIG9iai5kYXRhLmF0dGFjaG1lbnRzLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdnZW9tZXRyeScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnby5HZW9tZXRyeS5wYXJzZShwYXBlcmNsaXBTdmdQYXRoLCB0cnVlKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2Rlc2lyZWRTaXplJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBnby5TaXplKDUxMiwgNTEyKTsgLy8gTkI6IHRoZSB0d28gaWNvbnMgZG9uJ3Qgc2NhbGUgdG8gdGhlIHNhbWUgcHJvcG9ydGlvbnMgZm9yIHNvbWUgcmVhc29uIC0gPz9cclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg0NiwgODUpLFxyXG4gICAgICAgICAgICAgICAgc2NhbGU6IDAuMDIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwJyxcclxuICAgICAgICAgICAgICAgIGZpbGw6ICcjMDAwJyxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaXAgY2xpY2tlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLnRvZ2dsZVRhYihtYXAuZ2V0VWkoKS5UQUJfSURfQVRUQUNITUVOVFMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwRXllYmFsbCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc1BlcnNwZWN0aXZlUG9pbnQob2JqKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2dlb21ldHJ5JywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdvLkdlb21ldHJ5LnBhcnNlKG1hcC5wSXNFeHBhbmRlZChvYmopID8gZXllU3ZnUGF0aCA6IGV5ZUJsb2NrZWRTdmdQYXRoLCB0cnVlKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2Rlc2lyZWRTaXplJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBnby5TaXplKDUxMiwgbWFwLnBJc0V4cGFuZGVkKG9iaikgPyA0NDAgOiA1MTIpOyAvLyBOQjogdGhlIHR3byBpY29ucyBkb24ndCBzY2FsZSB0byB0aGUgc2FtZSBwcm9wb3J0aW9ucyBmb3Igc29tZSByZWFzb24gLSA/P1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDg3LCA0KSxcclxuICAgICAgICAgICAgICAgIHNjYWxlOiAwLjAyLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMCcsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAnIzAwMCcsXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUCBleHBhbnNpb24gaW5kaWNhdG9yIC0gdGhpcyBzaG93cyB3aGVuIHRoZSBQIGNvcm5lciBpcyBub3QgdmlzaWJsZSwgYW5kIG9ubHkgaWYgdGhlIHRoaW5nIGlzIGEgcGVyc3BlY3RpdmUgcG9pbnRcclxuICAgIGZ1bmN0aW9uIHBvaW50TWFya2VyKCkge1xyXG4gICAgICAgIHJldHVybiBwRXllYmFsbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFAgdmlldyBpbmRpY2F0b3JcclxuICAgIGZ1bmN0aW9uIHZpZXdNYXJrZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLCBcIkJvcmRlclwiLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnZmlsbCcsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRWaWV3TWFya2VyRmlsbChvYmopO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxOCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Vmlld01hcmtlckZpbGwob2JqKSB7XHJcbiAgICAgICAgdmFyIHdlaWdodCA9IG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5nZXRQZXJzcGVjdGl2ZVZpZXdXZWlnaHQob2JqKTtcclxuXHJcbiAgICAgICAgaWYgKHdlaWdodCA9PSAzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvclBEYXJrO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2VpZ2h0ID09IDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG9yUDtcclxuICAgICAgICB9IGVsc2UgaWYgKHdlaWdodCA9PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvclBMaWdodDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJ0cmFuc3BhcmVudFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcIlBcIiBjb3JuZXIgKHRvcCByaWdodCwgb3JhbmdlKVxyXG4gICAgZnVuY3Rpb24gY29ybmVyUCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoc2hvd1BDb3JuZXIob2JqKSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJjb3JuZXJQXCIsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDEwMCwgMTAwKSxcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY29ybmVyUFNoYXBlXCIsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDEwMCwgMTAwKSxcclxuICAgICAgICAgICAgICAgIC8vIE5COiB0aGlzIGdlb21ldHJ5IGNvdmVycyB0aGUgd2hvbGUgc3F1YXJlOyBzZWUgbm90ZSBhYm92ZSBmb3IgY29ybmVyUlxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIk0wIDAgTDAgMTAwIEwxMDAgMTAwXCIgKyAvLyB0b3AgbGVmdCB0byBib3R0b20gbGVmdCB0byBib3R0b20gcmlnaHRcclxuICAgICAgICAgICAgICAgICAgICBcIkwxMDAgMSBMOTkgMCBMMCAwXCIgKyAvLyByaWdodC90b3Agc2lkZXMgKHJvdW5kIHRvcCByaWdodCBjb3JuZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgXCJMIDUwIDAgTCAxMDAgNTAgXCIgKyAvLyB0byBtaWRwb2ludCBvZiB0b3Agc2lkZSwgbWlkcG9pbnQgb2YgcmlnaHQgc2lkZVxyXG4gICAgICAgICAgICAgICAgICAgIFwiTDEwMCAxMDAgMCAxMDB6XCIsIC8vIGJvdHRvbSByaWdodCwgYm90dG9tIGxlZnQsIHJldHVybiBob21lXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSksXHJcblxyXG4gICAgICAgICAgICAgICAgZmlsbDogY29sb3JQLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcblxyXG4gICAgICAgICAgICAgICAgcG9ydElkOiBcIlBcIixcclxuICAgICAgICAgICAgICAgIGZyb21MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGZyb21MaW5rYWJsZVNlbGZOb2RlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGZyb21MaW5rYWJsZUR1cGxpY2F0ZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlRHVwbGljYXRlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b01heExpbmtzOiAxLFxyXG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLmhhbmRsZUNvcm5lckNsaWNrKFwiUFwiLCB0YXJnZXQucGFydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBwRXllYmFsbCgpLCAvLyBQIGV4cGFuc2lvbiBpbmRpY2F0b3JcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlBcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogXCJ3aGl0ZVwiLFxyXG4gICAgICAgICAgICAgICAgZm9udDogJzlweCBzYW5zLXNlcmlmJyxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoODEsIDE1KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWFpbkJvcmRlcigpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsIFwiQm9yZGVyXCIsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgZ2V0R3JvdXBTZWxlY3Rpb25TdHJva2UpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2VXaWR0aCcsICcnLCBnZXRHcm91cFNlbGVjdGlvblN0cm9rZVdpZHRoKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIm1haW5hcmVhXCIsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogbnVsbCxcclxuICAgICAgICAgICAgICAgIC8vcG9ydElkOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcclxuICAgICAgICAgICAgICAgIGZyb21MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGZyb21MaW5rYWJsZVNlbGZOb2RlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGZyb21MaW5rYWJsZUR1cGxpY2F0ZXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZVNlbGZOb2RlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLSBoYW5kbGVycyBmb3IgbW91c2UgZHJhZy9kcm9wIGFjdGlvbnMgb24gZ3JvdXBzLCB3aGljaCBuZWVkIHRvIGJlIHJlcGxpY2F0ZWQgb24gZGlmZmVyZW50IHRhcmdldCBwYXJ0cyAtLS0tLS0tXHJcblxyXG4gICAgLy8gcG9zaXRpb24gaXMgbWFwLkxFRlQsIG51bGwsIG9yIG1hcC5SSUdIVFxyXG4gICAgZnVuY3Rpb24gZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIocG9zaXRpb24pIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZXZlbnQsIHRhcmdldCwgb2JqMikge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtb3VzZURyYWdFbnRlciwgZS5kcDogJyArIGV2ZW50LmRvY3VtZW50UG9pbnQgKyAnLCB0YXJnZXQucGFydDogJyArIHRhcmdldC5wYXJ0ICsgJywgdGFyZ2V0IGJvdW5kczogJyArIHRhcmdldC5hY3R1YWxCb3VuZHMpO1xyXG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgPSB0YXJnZXQucGFydDtcclxuICAgICAgICAgICAgbWFwLmdldFVpKCkuZHJhZ1RhcmdldFBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBncm91cE1vdXNlRHJhZ0xlYXZlSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgPSBudWxsO1xyXG4gICAgICAgIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbiA9IG51bGw7XHJcbiAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIocG9zaXRpb24pIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZXZlbnQsIGRyb3BUYXJnZXQpIHtcclxuICAgICAgICAgICAgaGFuZGxlR3JvdXBNb3VzZURyb3AoZXZlbnQsIGRyb3BUYXJnZXQsIHBvc2l0aW9uKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBncm91cENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAvLyBoYW5kbGUgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xyXG4gICAgICAgIG1hcC5nZXRVaSgpLmhhbmRsZUNvcm5lckNsaWNrKFwiXCIsIHRhcmdldCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSB0YXJnZXRzIGZvciBkcmFnZ2luZyB0byBEIG9yIFMgLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBkcmFnQWJvdmVUYXJnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbiwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMjUsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcmFnRW50ZXI6IGdldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKG1hcC5MRUZUKSxcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJhZ0xlYXZlOiBncm91cE1vdXNlRHJhZ0xlYXZlSGFuZGxlcixcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJvcDogZ2V0R3JvdXBNb3VzZURyb3BIYW5kbGVyKG1hcC5MRUZUKSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBncm91cENsaWNrSGFuZGxlclxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBkcmFnIHRhcmdldCByZWdpb25cclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiUmVjdGFuZ2xlXCIsIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAvLyBkcmFnIGluZGljYXRvciBiYXJcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiQm9yZGVyXCIsXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKG9iai5wYXJ0LCBtYXAuTEVGVCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMCxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiAnIzAwMCdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZHJhZ0ludG9UYXJnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbiwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAyNSksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDUwLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJhZ0VudGVyOiBnZXRHcm91cE1vdXNlRHJhZ0VudGVySGFuZGxlcihudWxsKSxcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJhZ0xlYXZlOiBncm91cE1vdXNlRHJhZ0xlYXZlSGFuZGxlcixcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJvcDogZ2V0R3JvdXBNb3VzZURyb3BIYW5kbGVyKG51bGwpLFxyXG4gICAgICAgICAgICAgICAgY2xpY2s6IGdyb3VwQ2xpY2tIYW5kbGVyXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA1MCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZHJhZ0JlbG93VGFyZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgNzUpLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyNSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIobWFwLlJJR0hUKSxcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJhZ0xlYXZlOiBncm91cE1vdXNlRHJhZ0xlYXZlSGFuZGxlcixcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJvcDogZ2V0R3JvdXBNb3VzZURyb3BIYW5kbGVyKG1hcC5SSUdIVCksXHJcbiAgICAgICAgICAgICAgICBjbGljazogZ3JvdXBDbGlja0hhbmRsZXJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gZHJhZyB0YXJnZXQgcmVnaW9uXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyNSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50J1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgLy8gZHJhZyBpbmRpY2F0b3IgYmFyXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIkJvcmRlclwiLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihvYmoucGFydCwgbWFwLlJJR0hULCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAxNSksXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMCxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiAnIzAwMCdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJucyB0aGUgVGV4dEJsb2NrIGZvciB0aGUgZ3JvdXAgdGl0bGUsIGZvciB1c2UgaW4gdGhlIG1haW4gZ3JvdXAgdGVtcGxhdGUsIGluc2lkZSB0aGUgYm94LlxyXG4gICAgZnVuY3Rpb24gZ3JvdXBJbnRlcm5hbFRleHRCbG9jaygpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLkhvcml6b250YWwsIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMTAwLCAxMDApXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jayxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwidGV4dFwiLCBcInRleHRcIikubWFrZVR3b1dheSgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJ2aXNpYmxlXCIsIFwiXCIsIGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWx3YXlzIHNob3cgdGV4dCBpbnNpZGUgYm94IGZvciBSLXRoaW5ncywgYmVjYXVzZSBleHRlcm5hbCB0ZXh0IHdpbGwgdGhyb3cgb2ZmIGxheW91dFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXAuZ2V0TGF5b3V0cygpLmlzTm90V2l0aGluSW52ZW50b3J5TGF5b3V0KGdyb3VwKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0TGF5b3V0cygpLmlzUlRoaW5nV2l0aGluSW52ZW50b3J5TGF5b3V0KGdyb3VwKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogODAsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuQ2VudGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcIm1vdmVcIixcclxuICAgICAgICAgICAgICAgICAgICBmb250OiAnMTBweCBzYW5zLXNlcmlmJyxcclxuICAgICAgICAgICAgICAgICAgICBpc011bHRpbGluZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB3cmFwOiBnby5UZXh0QmxvY2suV3JhcERlc2lyZWRTaXplLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIobnVsbCksXHJcbiAgICAgICAgICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6IGdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlRHJvcDogZ2V0R3JvdXBNb3VzZURyb3BIYW5kbGVyKG51bGwpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBncm91cENsaWNrSGFuZGxlcixcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGdyb3VwSW5mbyh0YXJnZXQucGFydCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIGEgVGV4dEJsb2NrIGZvciB0aGUgZ3JvdXAgdGl0bGUsIGZvciB1c2UgaW4gdGhlIG1haW4gZ3JvdXAgdGVtcGxhdGUsIG9uIHRoZSBsZWZ0IG9yIHJpZ2h0LlxyXG4gICAgLy8gdmlzaWJsZUZuIGlzIGEgY2FsbGJhY2sgdG8gYmUgYm91bmQgdG8gdGhlIHZpc2liaWxpdHkgYXR0cmlidXRlIG9mIHRoZSBUZXh0QmxvY2suXHJcbiAgICAvLyB0ZXh0QWxpZ24gaXMgJ2xlZnQnIG9yICdyaWdodCcuXHJcbiAgICBmdW5jdGlvbiBncm91cEV4dGVybmFsVGV4dEJsb2NrKHZpc2libGVGbiwgdGV4dEFsaWduKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlRleHRCbG9jayxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJ0ZXh0XCIsIFwidGV4dFwiKS5tYWtlVHdvV2F5KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwidmlzaWJsZVwiLCBcIlwiLCB2aXNpYmxlRm4pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic2NhbGVcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRFeHRlcm5hbFRleHRTY2FsZSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2V4dGVybmFsdGV4dC0nICsgdGV4dEFsaWduLCAvLyBOQjogdGhpcyBzY3Jld3MgdXAgbGF5b3V0cyBmb3Igc29tZSByZWFzb24gLSA/P1xyXG4gICAgICAgICAgICAgICAgdGV4dEFsaWduOiB0ZXh0QWxpZ24sXHJcbiAgICAgICAgICAgICAgICBtYXJnaW46IDUsXHJcbiAgICAgICAgICAgICAgICBmb250OiAnMTBweCBzYW5zLXNlcmlmJyxcclxuICAgICAgICAgICAgICAgIGlzTXVsdGlsaW5lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2xpY2s6IGdyb3VwQ2xpY2tIYW5kbGVyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIGdyb3VwL1RoaW5nIHRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5ncm91cFRlbXBsYXRlID1cclxuICAgICAgICBtayhnby5Hcm91cCwgZ28uUGFuZWwuVmVydGljYWwsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwibGF5b3V0XCIsIFwibGF5b3V0XCIsIGZ1bmN0aW9uKGxheW91dE5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXAuZ2V0TGF5b3V0cygpLmdldExheW91dChsYXlvdXROYW1lKTtcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwibW92YWJsZVwiLCBcIlwiLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhb2JqLmlzTGlua0xhYmVsO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcImlzU3ViR3JhcGhFeHBhbmRlZFwiLCBcInNFeHBhbmRlZFwiKSxcclxuICAgICAgICAgICAgLy8gZGltIHRoZSB0aGluZyBpZiBpdCdzIGJlaW5nIGRyYWdnZWQgb3ZlciBhbm90aGVyIHRoaW5nIChkcm9wIHRvIHNpc3Rlci9jaGlsZClcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKG9iai5pc1NlbGVjdGVkICYmIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRHcm91cCA/IDAuMjUgOiAxKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25PYmplY3ROYW1lOiBcIm1haW5wYW5lbFwiLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25TcG90OiBnby5TcG90LlRvcExlZnQsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25BZG9ybmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGlzU3ViR3JhcGhFeHBhbmRlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGxheWVyTmFtZTogJ0ZvcmVncm91bmQnLFxyXG4gICAgICAgICAgICAgICAgLy8gaGlnaGxpZ2h0IGNvcm5lcnNcclxuICAgICAgICAgICAgICAgIG1vdXNlRW50ZXI6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgLy8gdW5oaWdobGlnaHQgY29ybmVyc1xyXG4gICAgICAgICAgICAgICAgbW91c2VMZWF2ZTogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCwgb2JqMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBjb250YWluaW5nR3JvdXBDaGFuZ2VkOiBmdW5jdGlvbihwYXJ0LCBvbGRncm91cCwgbmV3Z3JvdXApIHsgXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbGV2ZWwnLCBtYXAuY29tcHV0ZUxldmVsKHBhcnQpKTsgXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgLy9wYXJ0LnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7ICAgXHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Ib3Jpem9udGFsLFxyXG4gICAgICAgICAgICAgICAgZ3JvdXBFeHRlcm5hbFRleHRCbG9jayhtYXAuZ2V0TGF5b3V0cygpLnNob3dMZWZ0VGV4dEJsb2NrLCAncmlnaHQnKSxcclxuICAgICAgICAgICAgICAgIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIm1haW5wYW5lbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInNjYWxlXCIsIFwiXCIsIG1hcC5nZXRMYXlvdXRzKCkuZ2V0U2NhbGUpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZHJhZyBhcmVhXHJcbiAgICAgICAgICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiUmVjdGFuZ2xlXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJkcmFnYXJlYVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogcmV0Lmdyb3VwRmlsbENvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNob3cgZGVidWcgaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZ3JvdXBJbmZvKHRhcmdldC5wYXJ0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNYXJrZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0Fib3ZlVGFyZ2V0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdJbnRvVGFyZ2V0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdCZWxvd1RhcmdldCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cEludGVybmFsVGV4dEJsb2NrKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcm5lckQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZEZsYWdNYXJrZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ybmVyUygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzQ29sbGFwc2VkTWFya2VyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcm5lclIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRNYXJrZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ybmVyUCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50UGFwZXJDbGlwKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5Cb3JkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBncm91cEV4dGVybmFsVGV4dEJsb2NrKG1hcC5nZXRMYXlvdXRzKCkuc2hvd1JpZ2h0VGV4dEJsb2NrLCAnbGVmdCcpXHJcbiAgICAgICAgICAgICksXHJcblxyXG4gICAgICAgICAgICAvLyB0aGUgcGxhY2Vob2xkZXIgbm9ybWFsbHkgaG9sZHMgdGhlIGNoaWxkIG5vZGVzLCBidXQgd2UganVzdCB1c2UgYSBkdW1teSBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJwbGFjZWhvbGRlclwiLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogXCJ0cmFuc3BhcmVudFwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDAsIDApXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gbGluayB0ZW1wbGF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmxpbmtUZW1wbGF0ZSA9XHJcbiAgICAgICAgbWsoZ28uTGluaywge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBsYXllck5hbWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgcm91dGluZzogZ28uTGluay5Ob3JtYWwsXHJcbiAgICAgICAgICAgICAgICByZWxpbmthYmxlRnJvbTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHJlbGlua2FibGVUbzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1vdXNlRW50ZXI6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJMaW5rID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtb3VzZUxlYXZlOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0LCBvYmoyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyTGluayA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJhZ0VudGVyOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0LCBkcmFnT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyTGluayA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6IGZ1bmN0aW9uKGV2ZW50LCBkcm9wVGFyZ2V0LCBkcmFnT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyTGluayA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJvcDogZnVuY3Rpb24oZXZlbnQsIGRyb3BUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSBtYXAuZ2V0RGlhZ3JhbSgpLnNlbGVjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMgJiYgcGFydHMuY291bnQgPT0gMSAmJiBwYXJ0cy5maXJzdCgpIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmFkZFRoaW5nQXNSVGhpbmcocGFydHMuZmlyc3QoKSwgZHJvcFRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRvdWJsZUNsaWNrOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmNyZWF0ZVJUaGluZyh0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxpbmtJbmZvKHRhcmdldCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc3Ryb2tlJywgJycsIGdldFJMaW5rU2VsZWN0aW9uU3Ryb2tlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzdHJva2VXaWR0aFwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldExpbmtTdHJva2VXaWR0aCkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTElOS1NIQVBFXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKSxcclxuXHJcbiAgICAgICAgICAgIC8vIHNob3cgdG8vZnJvbSBhcnJvd2hlYWRzIGJhc2VkIG9uIGxpbmsgXCJ0eXBlXCIgYXR0cmlidXRlXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbUFycm93OiBcIkJhY2t3YXJkXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc3Ryb2tlJywgJycsIGdldFJMaW5rU2VsZWN0aW9uU3Ryb2tlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldEFycm93aGVhZFNjYWxlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAndHlwZScsIGZ1bmN0aW9uKHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PSAnZnJvbScgfHwgdCA9PSAndG9Gcm9tJztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9BcnJvdzogXCJTdGFuZGFyZFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3N0cm9rZScsICcnLCBnZXRSTGlua1NlbGVjdGlvblN0cm9rZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic2NhbGVcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRBcnJvd2hlYWRTY2FsZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJ3R5cGUnLCBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT0gJ3RvJyB8fCB0ID09ICd0b0Zyb20nO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKSxcclxuXHJcbiAgICAgICAgICAgIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5BdXRvLCAvLyBsaW5rIGxhYmVsIFwia25vYlwiXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dLbm9iKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldEFycm93aGVhZFNjYWxlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWd1cmU6IFwiRWxsaXBzZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yRCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGNvbG9yRCxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMlxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLnBMaW5rVGVtcGxhdGUgPVxyXG4gICAgICAgIG1rKGdvLkxpbmssXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChyZXQuc2hvd1BMaW5rKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbkFkb3JuZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbGF5ZXJOYW1lOiAnQmFja2dyb3VuZCcsIC8vIG1ha2UgUCBsaW5rcyBmYWxsIGJlaGluZCBSIGxpbmtzXHJcbiAgICAgICAgICAgICAgICByb3V0aW5nOiBnby5MaW5rLk5vcm1hbCxcclxuICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxpbmtJbmZvKHRhcmdldCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInN0cm9rZVdpZHRoXCIsIFwiXCIsIG1hcC5nZXRMYXlvdXRzKCkuZ2V0TGlua1N0cm9rZVdpZHRoKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJMSU5LU0hBUEVcIixcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGNvbG9yUExpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUExpZ2h0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICAgICAgLy8gbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIChzZWxmLnNob3dQRG90KG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgICAgICAvLyB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldEFycm93aGVhZFNjYWxlKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9BcnJvdzogXCJDaXJjbGVcIixcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGNvbG9yUExpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUExpZ2h0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5kTGlua1RlbXBsYXRlID1cclxuICAgICAgICBtayhnby5MaW5rLCB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RhYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJMSU5LU0hBUEVcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSB0ZW1wb3JhcnkgbGluay9ub2RlIHRlbXBsYXRlcywgZm9yIHVzZSB3aGVuIGRyYWdnaW5nIHRvIGNyZWF0ZSBSL1AgbGluZXMgLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGRlZmluZSBpbml0aWFsIHRlbXBvcmFyeSBsaW5rIHRlbXBsYXRlcyAtIHRoZXNlIHdpbGwgYmUgbW9kaWZpZWQgd2hlbiBoYW5kbGVQb3J0VGFyZ2V0ZWQgaXMgY2FsbGVkXHJcbiAgICB0aGlzLnNldFRlbXBvcmFyeUxpbmtUZW1wbGF0ZXMgPSBmdW5jdGlvbih0b29sKSB7XHJcbiAgICAgICAgdG9vbC50ZW1wb3JhcnlMaW5rID0gbWFrZVRlbXBvcmFyeUxpbmtUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRvb2wudGVtcG9yYXJ5RnJvbU5vZGUgPSBtYWtlVGVtcG9yYXJ5Tm9kZVRlbXBsYXRlKCk7XHJcbiAgICAgICAgdG9vbC50ZW1wb3JhcnlUb05vZGUgPSBtYWtlVGVtcG9yYXJ5Tm9kZVRlbXBsYXRlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIG1ha2VUZW1wb3JhcnlMaW5rVGVtcGxhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLkxpbmssIHtcclxuICAgICAgICAgICAgICAgIGxheWVyTmFtZTogXCJUb29sXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdsaW5rc2hhcGUnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1ha2VUZW1wb3JhcnlOb2RlVGVtcGxhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLkdyb3VwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXllck5hbWU6IFwiVG9vbFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIkJvcmRlclwiLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnYm9yZGVyJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAzLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogbnVsbFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2hhbmdlIGNvbG9yIGFuZCBwb3J0SWQgb2YgdGVtcG9yYXJ5IGxpbmsgdGVtcGxhdGVzIGJhc2VkIG9uIHRoZSB0eXBlIG9mIGxpbmsgYmVpbmcgY3JlYXRlZC9yZWxpbmtlZFxyXG4gICAgdGhpcy5oYW5kbGVQb3J0VGFyZ2V0ZWQgPSBmdW5jdGlvbih0b29sLCByZWFsbm9kZSwgcmVhbHBvcnQsIHRlbXBub2RlLCB0ZW1wcG9ydCwgdG9lbmQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygncG9ydFRhcmdldGVkLCByZWFscG9ydDogJyArIChyZWFscG9ydCA/IHJlYWxwb3J0Lm5hbWUgOiAnJykgKyAnLCB0ZW1wcG9ydDogJyArICh0ZW1wcG9ydCA/IHRlbXBwb3J0Lm5hbWUgOiAnJykgXHJcbiAgICAgICAgLy8gICAgICsgJywgb3JpZ2luYWxGcm9tUG9ydDogJyArIChsdG9vbC5vcmlnaW5hbEZyb21Qb3J0ID8gbHRvb2wub3JpZ2luYWxGcm9tUG9ydC5uYW1lIDogJycpICsgJywgb3JpZ2luYWxUb1BvcnQ6ICcgKyBsdG9vbC5vcmlnaW5hbFRvUG9ydCk7XHJcblxyXG4gICAgICAgIHZhciBsaW5rU2hhcGUgPSB0b29sLnRlbXBvcmFyeUxpbmsuZmluZE9iamVjdCgnbGlua3NoYXBlJyk7XHJcbiAgICAgICAgdmFyIGZyb21Cb3JkZXIgPSB0b29sLnRlbXBvcmFyeUZyb21Ob2RlLmZpbmRPYmplY3QoJ2JvcmRlcicpO1xyXG4gICAgICAgIHZhciB0b0JvcmRlciA9IHRvb2wudGVtcG9yYXJ5VG9Ob2RlLmZpbmRPYmplY3QoJ2JvcmRlcicpO1xyXG5cclxuICAgICAgICBpZiAodG9vbC5vcmlnaW5hbEZyb21Qb3J0ICYmIHRvb2wub3JpZ2luYWxGcm9tUG9ydC5uYW1lID09ICdjb3JuZXJQU2hhcGUnKSB7XHJcbiAgICAgICAgICAgIGxpbmtTaGFwZS5zdHJva2UgPSBjb2xvclA7XHJcbiAgICAgICAgICAgIGZyb21Cb3JkZXIuc3Ryb2tlID0gY29sb3JQO1xyXG4gICAgICAgICAgICB0b0JvcmRlci5zdHJva2UgPSBjb2xvclA7XHJcbiAgICAgICAgICAgIGZyb21Cb3JkZXIucG9ydElkID0gJ1AnO1xyXG4gICAgICAgICAgICB0b0JvcmRlci5wb3J0SWQgPSAnUCc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0b29sLm9yaWdpbmFsRnJvbVBvcnQgJiYgdG9vbC5vcmlnaW5hbEZyb21Qb3J0Lm5hbWUgPT0gJ2Nvcm5lclJTaGFwZScpIHtcclxuICAgICAgICAgICAgbGlua1NoYXBlLnN0cm9rZSA9IGNvbG9yUjtcclxuICAgICAgICAgICAgZnJvbUJvcmRlci5zdHJva2UgPSBjb2xvclI7XHJcbiAgICAgICAgICAgIHRvQm9yZGVyLnN0cm9rZSA9IGNvbG9yUjtcclxuICAgICAgICAgICAgZnJvbUJvcmRlci5wb3J0SWQgPSAnUic7XHJcbiAgICAgICAgICAgIHRvQm9yZGVyLnBvcnRJZCA9ICdSJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGVtcG5vZGUuc2NhbGUgPSBtYXAuZ2V0TGF5b3V0cygpLmdldFNjYWxlKHJlYWxub2RlKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcHJldmVudCBkdXBsaWNhdGUgJ1AnIGxpbmtzIGluIHRoZSBzYW1lIGRpcmVjdGlvbiBiZXR3ZWVuIHRoZSBzYW1lIHR3byB0aGluZ3NcclxuICAgIHRoaXMudmFsaWRhdGVMaW5rID0gZnVuY3Rpb24oZnJvbU5vZGUsIGZyb21Qb3J0LCB0b05vZGUsIHRvUG9ydCkge1xyXG4gICAgICAgIC8vIHRoZSBQIHBvcnQgaXMgb24gdG9wIG9mIHRoZSBSIHBvcnQsIHNvIGJvdGggUCBhbmQgUiBsaW5rcyBnZXQgdGhlIHRvUG9ydCBzZXQgdG8gUiBieSBkZWZhdWx0LlxyXG4gICAgICAgIGlmIChmcm9tUG9ydC5wb3J0SWQgPT0gJ1AnKSB7XHJcbiAgICAgICAgICAgIC8vIE5COiBmaW5kTGlua3NUbyB3b3VsZCBiZSBzaW1wbGVyLCBidXQgaXQgZG9lc24ndCBzZWVtIHRvIHdvcmsuLi4gKD8pXHJcbiAgICAgICAgICAgIHZhciBwTGlua3MgPSB0b05vZGUuZmluZExpbmtzQmV0d2Vlbihmcm9tTm9kZSwgJ1AnLCAnUCcpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd2YWxpZGF0ZUxpbmssIHBMaW5rcyBmcm9tICcgKyBmcm9tTm9kZSArICc6JyArIGZyb21Qb3J0ICsgJyB0byAnICsgdG9Ob2RlICsgJzonICsgdG9Qb3J0ICsgJyA9ICcgKyBwTGlua3MuY291bnQpO1xyXG4gICAgICAgICAgICBpZiAocExpbmtzLmNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocExpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwTGluayA9IHBMaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocExpbmsuZnJvbU5vZGUgPT0gZnJvbU5vZGUgJiYgcExpbmsudG9Ob2RlID09IHRvTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSBzbGlkZSBub2RlIHRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShhbGlnbm1lbnQpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwiZGVzaXJlZFNpemVcIiwgXCJcIiwgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2xpZGUgPSBvYmouYWRvcm5lZE9iamVjdDtcclxuICAgICAgICAgICAgICAgIHZhciBzaXplID0gTWF0aC5taW4oc2xpZGUud2lkdGgsIHNsaWRlLmhlaWdodCkgKiAuMDU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGdvLlNpemUoc2l6ZSwgc2l6ZSk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogYWxpZ25tZW50LFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcImNvbC1yZXNpemVcIixcclxuICAgICAgICAgICAgICAgIGZpbGw6ICdyZ2JhKDI1MSwxNzAsNTQsMSknLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2xpZGVUZW1wbGF0ZSA9XHJcbiAgICAgICAgbWsoZ28uTm9kZSwgZ28uUGFuZWwuQXV0byxcclxuICAgICAgICAgICAgLy8gTkI6IHVubGlrZSBncm91cHMsIHNsaWRlcyBqdXN0IHVzZSBhIG5vcm1hbCAyLXdheSBsb2NhdGlvbiBiaW5kaW5nXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwibG9jYXRpb25cIiwgXCJsb2NcIiwgZ28uUG9pbnQucGFyc2UpLm1ha2VUd29XYXkoZ28uUG9pbnQuc3RyaW5naWZ5KSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJ3aWR0aFwiLCBcIndpZHRoXCIpLm1ha2VUd29XYXkoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJoZWlnaHRcIiwgXCJoZWlnaHRcIikubWFrZVR3b1dheSgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInZpc2libGVcIiwgXCJcIiwgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmRhdGEuaGFzUmVnaW9uICYmXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9QUkVTRU5URVIpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIW1hcC5nZXRQcmVzZW50ZXIoKS5pc1ByZXNlbnRpbmcgJiZcclxuICAgICAgICAgICAgICAgICAgICAhbWFwLmdldFByZXNlbnRlcigpLmlzQ3JlYXRpbmdUaHVtYm5haWwgJiZcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0UHJlc2VudGVyKCkuY3VycmVudFNsaWRlSW5kZXggPT0gb2JqLmRhdGEuaW5kZXg7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uU3BvdDogZ28uU3BvdC5Ub3BMZWZ0LFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICByZXNpemVBZG9ybm1lbnRUZW1wbGF0ZTogbWsoZ28uQWRvcm5tZW50LCBcIlNwb3RcIixcclxuICAgICAgICAgICAgICAgICAgICBtayhnby5QbGFjZWhvbGRlciksIC8vIHRha2VzIHNpemUgYW5kIHBvc2l0aW9uIG9mIGFkb3JuZWQgb2JqZWN0ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlRvcExlZnQpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuVG9wKSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlRvcFJpZ2h0KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlJpZ2h0KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LkJvdHRvbVJpZ2h0KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LkJvdHRvbSksXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Cb3R0b21MZWZ0KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LkxlZnQpXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMCxcclxuICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vZGVJbmZvKHRhcmdldC5wYXJ0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJSZWN0YW5nbGVcIiwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJzbGlkZWJvcmRlclwiLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJ3JnYmEoMjUxLDE3MCw1NCwuMSknLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gZXhwb3J0IGZvb3RlciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gTkI6IHRoaXMgaXMgbm90IGEgdGVtcGxhdGUgcGVyIHNlLCBpbiB0aGF0IGl0IGlzIGFkZGVkIHRvIHRoZSBkaWFncmFtIFxyXG4gICAgLy8gc3RhdGljYWxseSwgcmF0aGVyIHRoYW4gYmVpbmcgYm91bmQgdG8gc29tZXRoaW5nIGluIHRoZSBtb2RlbC5cclxuICAgIC8vIEJ1dCB3ZSBwdXQgaXQgaGVyZSBiZWNhdXNlIGl0IGlzIGFib3V0IGNyZWF0aW5nIHBhcnRzIGFuZCBzdHVmZi5cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVFeHBvcnRGb290ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLk5vZGUsIGdvLlBhbmVsLlNwb3QsIHtcclxuICAgICAgICAgICAgICAgIGxheWVyTmFtZTogJ0ZvcmVncm91bmQnLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIHNjYWxlOiAxLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGFibGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcInJlY3RhbmdsZVwiLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA2MCxcclxuICAgICAgICAgICAgICAgIGZpbGw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG1rKGdvLlBpY3R1cmUsIHtcclxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ2Fzc2V0cy9pbWcvbWV0YW1hcC1sb2dvLTUwLnBuZycsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuVG9wTGVmdCxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LlRvcExlZnQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTk1LFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA1MFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIm1ldGFtYXAuY2FicmVyYXJlc2VhcmNoLm9yZ1wiLFxyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50OiBnby5TcG90LkJvdHRvbUxlZnQsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnRGb2N1czogZ28uU3BvdC5Cb3R0b21MZWZ0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDIwMFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIm1hcFRpdGxlXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuVG9wUmlnaHQsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnRGb2N1czogZ28uU3BvdC5Ub3BSaWdodCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAzMDBcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJhdXRob3JOYW1lXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuQm90dG9tUmlnaHQsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnRGb2N1czogZ28uU3BvdC5Cb3R0b21SaWdodCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAzMDBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNyZWF0ZXMgb3IgcmVmcmVzaGVzIHRoZSBmb290ZXIgbG9nby90ZXh0IHRoYXQgaXMgZGlzcGxheWVkIGluIHRoZSBpbWFnZSBleHBvcnRcclxuICAgIHRoaXMuYWRkRXhwb3J0Rm9vdGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCFfZXhwb3J0Rm9vdGVyKSB7XHJcbiAgICAgICAgICAgIF9leHBvcnRGb290ZXIgPSBjcmVhdGVFeHBvcnRGb290ZXIoKTtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5hZGQoX2V4cG9ydEZvb3Rlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNob3dFeHBvcnRGb290ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgcmVjdCA9IG1hcC5jb21wdXRlTWFwQm91bmRzKCk7XHJcbiAgICAgICAgLy8gcHV0IGZvb3RlciBhdCBsZWFzdCAxMDAgcHggYmVsb3cgYm90dG9tIG9mIG1hcDsgbWFrZSBpdCBhdCBsZWFzdCA1MDBweCB3aWRlXHJcbiAgICAgICAgdmFyIHggPSByZWN0Lng7XHJcbiAgICAgICAgdmFyIHkgPSByZWN0LnkgKyByZWN0LmhlaWdodCArIE1hdGgubWF4KDEwMCwgcmVjdC5oZWlnaHQgLyA1KTtcclxuICAgICAgICB2YXIgdyA9IE1hdGgubWF4KDUwMCwgcmVjdC53aWR0aCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0V4cG9ydEZvb3RlciwgYm91bmRzIHJlY3Q6ICcgKyByZWN0ICsgJywgdzogJyArIHcpO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIubG9jYXRpb24gPSBuZXcgZ28uUG9pbnQoeCwgeSk7XHJcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5maW5kT2JqZWN0KFwicmVjdGFuZ2xlXCIpLndpZHRoID0gdztcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLmZpbmRPYmplY3QoXCJtYXBUaXRsZVwiKS50ZXh0ID0gXCJNYXAgVGl0bGU6IFwiICsgZWRpdG9yLm1hcFRpdGxlO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIuZmluZE9iamVjdChcImF1dGhvck5hbWVcIikudGV4dCA9IFwiQXV0aG9yOiBcIiArIGVkaXRvci51c2VyTmFtZTtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLm9wYWNpdHkgPSAxO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIuaW52YWxpZGF0ZUxheW91dCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhpZGVFeHBvcnRGb290ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLm9wYWNpdHkgPSAwO1xyXG4gICAgfTtcclxuXHJcbn07IiwiU2FuZGJhbmtFZGl0b3IuVUkgPSBmdW5jdGlvbigkc2NvcGUsIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSB0YWIgKFwic2xpZGVyXCIpIElEcyAtIHRhYnMgYXJlIHJlbmRlcmVkIGluIHZpZXdzL21hcHMvX2Zvcm0gLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vdGhpcy5UQUJfSURfSElTVE9SWSA9ICdoaXN0b3J5LXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9QUkVTRU5URVIgPSAncHJlc2VudGVyLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9BTkFMWVRJQ1NfTUFQID0gJ2FuYWx5dGljcy10YWItbWFwJztcclxuICAgIHRoaXMuVEFCX0lEX0FOQUxZVElDU19USElORyA9ICdhbmFseXRpY3MtdGFiLXRoaW5nJztcclxuICAgIHRoaXMuVEFCX0lEX1BFUlNQRUNUSVZFUyA9ICdwZXJzcGVjdGl2ZXMtdGFiJztcclxuICAgIHRoaXMuVEFCX0lEX0RJU1RJTkNUSU9OUyA9ICdkaXN0aW5jdGlvbnMtdGFiJztcclxuICAgIHRoaXMuVEFCX0lEX0FUVEFDSE1FTlRTID0gJ2F0dGFjaG1lbnRzLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9HRU5FUkFUT1IgPSAnZ2VuZXJhdG9yLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9TVEFOREFSRFMgPSAnc3RhbmRhcmRzLXRhYic7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7fTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZWRpdG9yIG9wdGlvbnMgZm9yIG1hcC91c2VyIC0tLS0tLS0tLS1cclxuXHJcbiAgICB2YXIgbWFwRWRpdG9yT3B0aW9ucyA9IHt9O1xyXG5cclxuICAgIHZhciBkZWZhdWx0RWRpdG9yT3B0aW9ucyA9IHtcclxuICAgICAgICAvLyBub0Fycm93cywgdG8sIGZyb20sIHRvRnJvbVxyXG4gICAgICAgIGRlZmF1bHRSZWxhdGlvbnNoaXBEaXJlY3Rpb246ICdub0Fycm93cycsXHJcbiAgICAgICAgLy8gbGVmdCwgcmlnaHQsIHN0YWNrZWQsIGZyZWVoYW5kXHJcbiAgICAgICAgZGVmYXVsdFRoaW5nTGF5b3V0OiAnbGVmdCcsXHJcbiAgICAgICAgLy8gbGluZXMsIHNwb3RsaWdodCwgYm90aFxyXG4gICAgICAgIHBlcnNwZWN0aXZlTW9kZTogJ2xpbmVzJ1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBtYXAgaXMgbG9hZGVkIHRvIHNldCBzdG9yZWQgb3B0aW9ucyBmb3IgbWFwXHJcbiAgICB0aGlzLnNldE1hcEVkaXRvck9wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgbWFwRWRpdG9yT3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgYXBwcm9wcmlhdGUgdmFsdWVzIGZyb20gdGhlIHVzZXIgcHJvZmlsZSBvciB0aGUgZGVmYXVsdCBvcHRpb25zIGlmIG9wdGlvbnMgYXJlIG5vdCBzZXQgZm9yIHRoZSBtYXBcclxuICAgIHRoaXMuZ2V0TWFwRWRpdG9yT3B0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBwcm9maWxlT3B0aW9ucyA9ICgkc2NvcGUudXNlclByb2ZpbGUgPyAkc2NvcGUudXNlclByb2ZpbGUuZWRpdG9yT3B0aW9ucyA6IG51bGwpO1xyXG4gICAgICAgIHZhciB2YWxzID0gW21hcEVkaXRvck9wdGlvbnMsIHByb2ZpbGVPcHRpb25zLCBkZWZhdWx0RWRpdG9yT3B0aW9uc107XHJcbiAgICAgICAgbWFwRWRpdG9yT3B0aW9ucyA9IF8uZmluZCh2YWxzLCBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuICFfLmlzRW1wdHkodmFsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbWFwRWRpdG9yT3B0aW9ucztcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2F2ZXMgZGVmYXVsdCBvcHRpb25zIGZvciB0aGUgdXNlciAobWFwIG9wdGlvbnMgYXJlIHNhdmVkIGluIGF1dG9zYXZlLmpzKVxyXG4gICAgZnVuY3Rpb24gc2F2ZVVzZXJFZGl0b3JPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yX29wdGlvbnM6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAkaHR0cC5wdXQoJy91c2Vycy8nICsgJHNjb3BlLnVzZXJJZCArICcuanNvbicsIGRhdGEpLnRoZW4oXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgZWRpdG9yIG9wdGlvbnMnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBvcHRpb25zIG1vZGFsXHJcblxyXG4gICAgJHNjb3BlLmVkaXRvck9wdGlvbnMgPSBuZXcgU2FuZGJhbmtFZGl0b3JPcHRpb25zKCRzY29wZSk7XHJcblxyXG4gICAgdGhpcy5lZGl0T3B0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5lZGl0b3JPcHRpb25zLm9wZW5Nb2RhbChcclxuICAgICAgICAgICAgbWFwRWRpdG9yT3B0aW9ucyxcclxuICAgICAgICAgICAgZnVuY3Rpb24ob3B0aW9ucykgeyAvLyBvblNhdmVEZWZhdWx0c1xyXG4gICAgICAgICAgICAgICAgc2F2ZVVzZXJFZGl0b3JPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbihvcHRpb25zKSB7IC8vIG9uVXBkYXRlXHJcbiAgICAgICAgICAgICAgICBtYXBFZGl0b3JPcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRBdXRvc2F2ZSgpLnNhdmVOb3coJ2VkaXRfb3B0aW9ucycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBzdGF0ZSBtb2RlbCAtLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xyXG5cclxuICAgIHZhciBkZWZhdWx0U3RhdGUgPSB7XHJcbiAgICAgICAgc2hvd05hdmlnYXRvcjogZmFsc2UsXHJcbiAgICAgICAgY3VycmVudFRhYjogbnVsbCxcclxuICAgICAgICBwZXJzcGVjdGl2ZVBvaW50S2V5OiBudWxsLFxyXG4gICAgICAgIGRpc3RpbmN0aW9uVGhpbmdLZXk6IG51bGxcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zZXRTdGF0ZURhdGEgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgLy8kc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vICAgIHNlbGYuc3RhdGUgPSBkYXRhIHx8IGRlZmF1bHRTdGF0ZTtcclxuICAgICAgICAvLyAgICAvLyRzY29wZS5jdXJyZW50VGFiID0gc2VsZi5zdGF0ZS5jdXJyZW50VGFiO1xyXG4gICAgICAgIC8vfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFRPRE86IFNhdmUgc3RhdGUgbW9yZSBmcmVxdWVudGx5Pz8gQ3VycmVudGx5IGl0IGlzIG9ubHkgc2F2ZWQgd2hlbiBhdXRvc2F2ZSBpcyB0cmlnZ2VyZWQgYnkgb3RoZXIgYWN0aW9ucy4uLlxyXG5cclxuICAgIHRoaXMuZ2V0U3RhdGVEYXRhID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuc3RhdGU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIHRlbXBvcmFyeSBzdGF0ZSBmbGFncyAtLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLnpvb21pbmdUb1JlZ2lvbiA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMubW91c2VPdmVyR3JvdXAgPSBudWxsO1xyXG4gICAgdGhpcy5tb3VzZU92ZXJMaW5rID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmRyYWdUYXJnZXRHcm91cCA9IG51bGw7XHJcbiAgICB0aGlzLmRyYWdUYXJnZXRQb3NpdGlvbiA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5oZWxwVGlwID0gbnVsbDtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSBoYW5kbGUgYm90dG9tIHRhYnMgKFwic2xpZGVyc1wiKSAtLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gaW4gdGhlIGZvbGxvd2luZyBmdW5jdGlvbnMsIElEIGlzIGUuZy4gJ2hpc3RvcnktdGFiJyAoSUQgb2Ygb25lIG9mIHRoZSAuYm90dG9tLXRhYidzKVxyXG5cclxuICAgIC8vIHRoaXMgaXMgY2FsbGVkIGJ5IG1hcC5jdXJyZW50VGFiQ2hhbmdlZCwgd2hpY2ggaXMgdHJpZ2dlcmVkIGJ5IGEgJHNjb3BlLiR3YXRjaFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3VpLCBjdXJyZW50VGFiQ2hhbmdlZDogJyArIG5ld1ZhbHVlKTtcclxuICAgICAgICBzZWxmLnN0YXRlLmN1cnJlbnRUYWIgPSBuZXdWYWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jdXJyZW50VGFiSXMgPSBmdW5jdGlvbih0YWJJRCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUuY3VycmVudFRhYiA9PSB0YWJJRDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5vcGVuVGFiID0gZnVuY3Rpb24odGFiSUQpIHtcclxuICAgICAgICAvLyRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gICAgJHNjb3BlLmN1cnJlbnRUYWIgPSB0YWJJRDtcclxuICAgICAgICAvL30pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNsb3NlVGFiID0gZnVuY3Rpb24odGFiSUQpIHtcclxuICAgICAgICAvLyRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gICAgc2VsZi5zdGF0ZS5jdXJyZW50VGFiID0gbnVsbDsgLy8gVE9ETzogdHJpZ2dlciBhdXRvc2F2ZVxyXG4gICAgICAgIC8vICAgICRzY29wZS5jdXJyZW50VGFiID0gbnVsbDtcclxuICAgICAgICAvL30pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmRpc2FibGVUYWIgPSBmdW5jdGlvbih0YWJJRCkge1xyXG4gICAgICAgIC8vIHByZXZlbnQgb3BlbmluZyBvdGhlciB0YWJzIHdoZW4gaW4gUCBvciBEIGVkaXRvclxyXG4gICAgICAgIGlmICgkc2NvcGUuY3VycmVudFRhYiA9PSBzZWxmLlRBQl9JRF9QRVJTUEVDVElWRVMgfHwgJHNjb3BlLmN1cnJlbnRUYWIgPT0gc2VsZi5UQUJfSURfRElTVElOQ1RJT05TKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudG9nZ2xlVGFiID0gZnVuY3Rpb24odGFiSUQpIHtcclxuICAgICAgICAvLyRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gICAgaWYgKCRzY29wZS5jdXJyZW50VGFiID09IHRhYklEKSB7XHJcbiAgICAgICAgLy8gICAgICAgICRzY29wZS5jdXJyZW50VGFiID0gbnVsbDtcclxuICAgICAgICAvLyAgICB9IGVsc2UgaWYgKCFzZWxmLmRpc2FibGVUYWIodGFiSUQpKSB7XHJcbiAgICAgICAgLy8gICAgICAgICRzY29wZS5jdXJyZW50VGFiID0gdGFiSUQ7XHJcbiAgICAgICAgLy8gICAgfVxyXG4gICAgICAgIC8vfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudG9nZ2xlTmF2aWdhdG9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8kc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vICAgIHNlbGYuc3RhdGUuc2hvd05hdmlnYXRvciA9ICFzZWxmLnN0YXRlLnNob3dOYXZpZ2F0b3I7XHJcbiAgICAgICAgLy99KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50b2dnbGVab29taW5nVG9SZWdpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gICAgc2VsZi56b29taW5nVG9SZWdpb24gPSAhc2VsZi56b29taW5nVG9SZWdpb247XHJcbiAgICAgICAgLy99KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tIHpvb21pbmcgZnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmNhblpvb21JbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0RGlhZ3JhbSgpLnNjYWxlIDwgMzI7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY2FuWm9vbU91dCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0RGlhZ3JhbSgpLnNjYWxlID4gMC4yNTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy56b29tSW4gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgaWYgKGRpYWdyYW0uc2NhbGUgPCAzMikge1xyXG4gICAgICAgICAgICB2YXIgdmIgPSBkaWFncmFtLnZpZXdwb3J0Qm91bmRzLmNvcHkoKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5zY2FsZSA9IGRpYWdyYW0uc2NhbGUgKiAyO1xyXG4gICAgICAgICAgICBkaWFncmFtLmNlbnRlclJlY3QodmIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy56b29tT3V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGlmIChkaWFncmFtLnNjYWxlID4gMC4yNSkge1xyXG4gICAgICAgICAgICB2YXIgdmIgPSBkaWFncmFtLnZpZXdwb3J0Qm91bmRzLmNvcHkoKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5zY2FsZSA9IGRpYWdyYW0uc2NhbGUgLyAyO1xyXG4gICAgICAgICAgICBkaWFncmFtLmNlbnRlclJlY3QodmIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5tYXliZVpvb21Ub1JlZ2lvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAvLyB0aGlzIGZsYWcgaXMgc2V0IGJ5IHRoZSB0b29sYmFyIGJ1dHRvblxyXG4gICAgICAgIGlmIChzZWxmLnpvb21pbmdUb1JlZ2lvbikge1xyXG4gICAgICAgICAgICBzZWxmLnpvb21pbmdUb1JlZ2lvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnem9vbVRvUmVnaW9uLCBzZWxlY3Rpb24gY291bnQ6ICcgKyBkaWFncmFtLnNlbGVjdGlvbi5jb3VudCk7XHJcbiAgICAgICAgICAgIHZhciByZWN0ID0gZGlhZ3JhbS5jb21wdXRlUGFydHNCb3VuZHMoZGlhZ3JhbS5zZWxlY3Rpb24pO1xyXG4gICAgICAgICAgICBkaWFncmFtLnpvb21Ub1JlY3QocmVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJlc2V0Wm9vbSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAvL3ZhciByZWN0ID0gZGlhZ3JhbS5jb21wdXRlUGFydHNCb3VuZHMoZGlhZ3JhbS5ub2RlcykuY29weSgpO1xyXG4gICAgICAgIHZhciByZWN0ID0gbWFwLnNhZmVSZWN0KG1hcC5jb21wdXRlTWFwQm91bmRzKCkpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3Jlc2V0Wm9vbSwgYm91bmRzOiAnICsgcmVjdCk7XHJcbiAgICAgICAgaWYgKHJlY3Qud2lkdGgpIHtcclxuICAgICAgICAgICAgcmVjdC5pbmZsYXRlKHJlY3Qud2lkdGggLyA1LCByZWN0LmhlaWdodCAvIDUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkaWFncmFtLnpvb21Ub1JlY3QocmVjdCk7XHJcbiAgICAgICAgZGlhZ3JhbS5hbGlnbkRvY3VtZW50KGdvLlNwb3QuQ2VudGVyLCBnby5TcG90LkNlbnRlcik7XHJcbiAgICAgICAgaWYgKGRpYWdyYW0uc2NhbGUgPiAxKSB7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSAxO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHRoaW5nIG9wdGlvbnMgKGxheW91dCkgLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuZ2V0U2VsZWN0ZWRUaGluZ3NPckRlZmF1bHRMYXlvdXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc2wgPSBzZWxmLmdldFNlbGVjdGVkVGhpbmdzTGF5b3V0KCk7XHJcbiAgICAgICAgaWYgKHNsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFwRWRpdG9yT3B0aW9ucy5kZWZhdWx0VGhpbmdMYXlvdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIGEgbm9uLW51bGwgdmFsdWUgb25seSBpZiBhbGwgc2VsZWN0ZWQgaXRlbXMgYXJlIGdyb3VwcyB3aXRoIHRoZSBzYW1lIGxheW91dFxyXG4gICAgdGhpcy5nZXRTZWxlY3RlZFRoaW5nc0xheW91dCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoZGlhZ3JhbSA9PT0gbnVsbCB8fCBkaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICB2YXIgbGF5b3V0ID0gbnVsbDtcclxuICAgICAgICB2YXIgaXQgPSBkaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cClcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQsIGl0LnZhbHVlOiAnICsgZ3JvdXApO1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXBMYXlvdXQgPSAoZ3JvdXAuZGF0YSA/IGdyb3VwLmRhdGEubGF5b3V0IDogbnVsbCk7XHJcbiAgICAgICAgICAgIGlmIChsYXlvdXQgIT09IG51bGwgJiYgZ3JvdXBMYXlvdXQgIT0gbGF5b3V0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIGxheW91dCA9IGdyb3VwTGF5b3V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTZWxlY3RlZFRoaW5nc0xheW91dDogJyArIGxheW91dCk7XHJcblxyXG4gICAgICAgIHJldHVybiBsYXlvdXQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNldHMgdGhlIGxheW91dCBvZiBhbGwgc2VsZWN0ZWQgdGhpbmdzIHRvIHRoZSBnaXZlbiBsYXlvdXRcclxuICAgIHRoaXMuc2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQgPSBmdW5jdGlvbihsYXlvdXROYW1lKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHZhciBpdCA9IGRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ2xheW91dCcsIGxheW91dE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldExheW91dHMoKS5zZXREZXNjZW5kYW50TGF5b3V0cyhncm91cCwgZ3JvdXAuZGF0YS5sYXlvdXQpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHJlbGF0aW9uc2hpcCBvcHRpb25zIChkaXJlY3Rpb24pIC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmdldFNlbGVjdGVkUmVsYXRpb25zaGlwc09yRGVmYXVsdERpcmVjdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBzZCA9IHNlbGYuZ2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzRGlyZWN0aW9uKCk7XHJcbiAgICAgICAgaWYgKHNkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFwRWRpdG9yT3B0aW9ucy5kZWZhdWx0UmVsYXRpb25zaGlwRGlyZWN0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyBhIG5vbi1udWxsIHZhbHVlIG9ubHkgaWYgYWxsIHNlbGVjdGVkIGl0ZW1zIGFyZSByZWxhdGlvbnNoaXBzIHdpdGggdGhlIHNhbWUgZGlyZWN0aW9uXHJcbiAgICB0aGlzLmdldFNlbGVjdGVkUmVsYXRpb25zaGlwc0RpcmVjdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoZGlhZ3JhbSA9PT0gbnVsbCB8fCBkaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICB2YXIgdHlwZSA9IG51bGw7XHJcbiAgICAgICAgdmFyIGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIWl0LnZhbHVlIGluc3RhbmNlb2YgZ28uTGluaylcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgbGlua1R5cGUgPSAobGluay5kYXRhID8gbGluay5kYXRhLnR5cGUgOiBudWxsKTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgIT09IG51bGwgJiYgbGlua1R5cGUgIT0gdHlwZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB0eXBlID0gbGlua1R5cGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHlwZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0cyB0aGUgZGlyZWN0aW9uIG9mIGFsbCBzZWxlY3RlZCByZWxhdGlvbnNoaXBzIHRvIHRoZSBnaXZlbiBkaXJlY3Rpb25cclxuICAgIHRoaXMuc2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzRGlyZWN0aW9uID0gZnVuY3Rpb24oZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIC8vZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY2hhbmdlIHJlbGF0aW9uc2hpcCBkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgdmFyIGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5MaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAvL2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHR5cGVcIik7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShpdC52YWx1ZS5kYXRhLCAndHlwZScsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAvL2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayB0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSByZWxhdGlvbnNoaXAgZGlyZWN0aW9uXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tIGhhbmRsZSBjb3JuZXIgY2xpY2tzIGFuZCBkb3VibGUgY2xpY2tzIC0tLS0tLS0tXHJcblxyXG4gICAgdmFyIF9jb3JuZXJDbGlja2VkID0gbnVsbDtcclxuICAgIHZhciBfY29ybmVyRnVuY3Rpb24gPSBudWxsO1xyXG4gICAgdmFyIF9jb3JuZXJUaW1lb3V0ID0gMzAwO1xyXG5cclxuICAgIHRoaXMuaGFuZGxlQ29ybmVyQ2xpY2sgPSBmdW5jdGlvbihjb3JuZXIsIHRoaW5nKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaGFuZGxlQ29ybmVyQ2xpY2s6IGNvcm5lciA9ICcgKyBjb3JuZXIgKyAnLCBjb3JuZXJDbGlja2VkID0gJyArIF9jb3JuZXJDbGlja2VkKTtcclxuICAgICAgICAvLyBhc3N1bWUgaXQncyBhIHNpbmdsZSBjbGljaywgYW5kIHNldCBoYW5kbGVyXHJcbiAgICAgICAgX2Nvcm5lckZ1bmN0aW9uID0gZ2V0Q29ybmVyRnVuY3Rpb24oY29ybmVyLCAxKTtcclxuICAgICAgICAvLyBhbHJlYWR5IGNsaWNrZWQsIHNvIGl0J3MgYSBkb3VibGUgY2xpY2s7IGNoYW5nZSBoYW5kbGVyXHJcbiAgICAgICAgaWYgKF9jb3JuZXJDbGlja2VkID09IGNvcm5lcikge1xyXG4gICAgICAgICAgICBfY29ybmVyRnVuY3Rpb24gPSBnZXRDb3JuZXJGdW5jdGlvbihjb3JuZXIsIDIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaGFuZGxlQ29ybmVyQ2xpY2s6IGRvdWJsZSBjbGljayBvbiAnICsgY29ybmVyKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZW1lbWJlciB0aGF0IGF0IGxlYXN0IG9uZSBjbGljayBoYXMgaGFwcGVuZWQgZm9yIHRoZSBjdXJyZW50IGNvcm5lclxyXG4gICAgICAgIF9jb3JuZXJDbGlja2VkID0gY29ybmVyO1xyXG5cclxuICAgICAgICAvLyBzZXQgdGltZXIgdG8gaW52b2tlIHdoYXRldmVyIGhhbmRsZXIgd2UgaGF2ZSByZWFkeSB0byBnbyAodW5sZXNzIGFub3RoZXIgY2xpY2sgaGFwcGVucyB3aXRoaW4gdGhlIGludGVydmFsKVxyXG4gICAgICAgIHZhciB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIGRpbmchIGludm9rZSBpdFxyXG4gICAgICAgICAgICBpZiAoX2Nvcm5lckZ1bmN0aW9uID09IHNlbGYuc2hvd0Nvcm5lclRpcCkge1xyXG4gICAgICAgICAgICAgICAgX2Nvcm5lckZ1bmN0aW9uKHRoaW5nLCBjb3JuZXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2Nvcm5lckZ1bmN0aW9uKHRoaW5nKTsgLy8gZG9uJ3QgcGFzcyB0aGUgY29ybmVyIGFyZyB0byB0aGluZ3MgbGlrZSBjcmVhdGVDaGlsZCB0aGF0IGhhdmUgYSBkaWZmZXJlbnQgc2Vjb25kIGFyZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IGhhbmRsZXIgYW5kIGNsaWNrZWQgZmxhZ1xyXG4gICAgICAgICAgICBfY29ybmVyRnVuY3Rpb24gPSBnZXRDb3JuZXJGdW5jdGlvbihjb3JuZXIsIDEpO1xyXG4gICAgICAgICAgICBfY29ybmVyQ2xpY2tlZCA9IG51bGw7XHJcbiAgICAgICAgfSwgX2Nvcm5lclRpbWVvdXQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDb3JuZXJGdW5jdGlvbihjb3JuZXIsIGNsaWNrcykge1xyXG4gICAgICAgIGlmIChjb3JuZXIgPT0gXCJEXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IHNlbGYuc2hvd0Nvcm5lclRpcCA6IG1hcC5jcmVhdGVTaXN0ZXIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29ybmVyID09IFwiU1wiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09IDEgPyBtYXAudG9nZ2xlU0V4cGFuc2lvbiA6IG1hcC5jcmVhdGVDaGlsZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3JuZXIgPT0gXCJSXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IHNlbGYuc2hvd0Nvcm5lclRpcCA6IG1hcC5jcmVhdGVSVG9TaXN0ZXIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29ybmVyID09IFwiUFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09IDEgPyBtYXAudG9nZ2xlUEV4cGFuc2lvbiA6IG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5zZXRQRWRpdG9yUG9pbnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29ybmVyID09PSBcIlwiKSB7IC8vIGNsaWNrIG9uIHRleHRcclxuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IHNlbGYuc2hvd0Nvcm5lclRpcCA6IGVkaXRUZXh0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0Q29ybmVyRnVuY3Rpb246IG5vIGZ1bmN0aW9uIGZvdW5kIGZvciBjb3JuZXI6ICcgKyBjb3JuZXIgKyAnIScpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBOQjogaW4gdGhpcyBjYXNlIHRoZSB0aGluZyBpcyBhY3R1YWxseSB0aGUgVGV4dEJveCwgZXhjZXB0IGluIG91dGxpbmUgbGF5b3V0IGl0IGlzIGEgUGFuZWwgaWYgdGhlIGJveCBpcyBkb3VibGUtY2xpY2tlZC4uLlxyXG4gICAgZnVuY3Rpb24gZWRpdFRleHQodGhpbmcsIGNvcm5lcikge1xyXG4gICAgICAgIGlmICghJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnZWRpdFRleHQsIHRoaW5nOiAnICsgdGhpbmcpO1xyXG4gICAgICAgIGlmICh0aGluZyBpbnN0YW5jZW9mIGdvLlBhbmVsKSB7IC8vIG91dGxpbmUgbGF5b3V0XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gdGhpbmcucGFydDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2VkaXRUZXh0LCBwYXJ0OiAnICsgcGFydCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgcGFydC5kYXRhICYmIChwYXJ0LmRhdGEubGF5b3V0ID09ICdsZWZ0JyB8fCBwYXJ0LmRhdGEubGF5b3V0ID09ICdyaWdodCcpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dEJsb2NrTmFtZSA9ICdleHRlcm5hbHRleHQtJyArIHBhcnQuZGF0YS5sYXlvdXQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IHRoaW5nLnBhcnQuZmluZE9iamVjdCh0ZXh0QmxvY2tOYW1lKTtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpbmcgPSB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1hcC5nZXREaWFncmFtKCkuY29tbWFuZEhhbmRsZXIuZWRpdFRleHRCbG9jayh0aGluZyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0gaGVscCB0aXAgZnVuY3Rpb25zIC0gc2VlIGFsc28gdXNlci5qcywgdmlld3MvbWFwcy9oZWxwX3RhYiAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBzaG93cyB0aGluZ1RpcCBvciBvbmUgb2YgdGhlIGNvcm5lclhUaXBzXHJcbiAgICB0aGlzLnNob3dDb3JuZXJUaXAgPSBmdW5jdGlvbih0aGluZywgY29ybmVyKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0Nvcm5lclRpcCcpO1xyXG4gICAgICAgIGlmIChjb3JuZXIgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2hvd0hlbHBUaXAoJ3RoaW5nVGlwJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5zaG93SGVscFRpcCgnY29ybmVyJyArIGNvcm5lciArICdUaXAnKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2hvd0hlbHBUaXAgPSBmdW5jdGlvbih0aXApIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdzaG93SGVscFRpcDogJyArIHRpcCk7XHJcblxyXG4gICAgICAgIC8vIGRvbid0IHNob3cgaGVscCBpZiBpbiBwcmVzZW50ZXJcclxuICAgICAgICBpZiAoc2VsZi5jdXJyZW50VGFiSXMoc2VsZi5UQUJfSURfUFJFU0VOVEVSKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxmLmhlbHBUaXAgPSB0aXA7XHJcbiAgICAgICAgLy8kc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICAgICAgJCgnI2hlbHAtdGlwJykuc2hvdygpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkKCcjaGVscC10aXAnKS5mYWRlT3V0KDUwMCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmhlbHBUaXAgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgLy8kc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIDUwMDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZWRpdCBtYXAgVXNlclRhZ3MgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLnRhZ2dpbmcgPSB7fVxyXG5cclxuICAgIHRoaXMuZWRpdFVzZXJUYWdzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnRhZ2dpbmcub3Blbk1vZGFsKFxyXG4gICAgICAgICAgICBbJHNjb3BlLm1hcElkXSxcclxuICAgICAgICAgICAgdHJ1ZSwgLy8gc2hvdyBkZXNjcmlwdGlvbiBmaWVsZFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRBdXRvc2F2ZSgpLnNhdmVOb3coJ2VkaXRfdXNlcnRhZ3MnKTtcclxuICAgICAgICAgICAgfSAvLyBvbiB1cGRhdGVcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZWRpdCBtYXAgc2hhcmluZyAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuc2hhcmluZyA9IHt9XHJcblxyXG4gICAgdGhpcy5lZGl0TWFwU2hhcmVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnNoYXJpbmcub3Blbk1vZGFsKFxyXG4gICAgICAgICAgICBbJHNjb3BlLm1hcElkXSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7fSAvLyBvbiB1cGRhdGVcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gcHJpbnQvZXhwb3J0IHRvIGltYWdlIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMucHJpbnRTbGlkZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBzdGFydFNwaW5uZXIoKTtcclxuICAgICAgICBtYXAuZ2V0UHJlc2VudGVyKCkuY3JlYXRlU2xpZGVUaHVtYm5haWxzKCk7XHJcbiAgICAgICAgc3RvcFNwaW5uZXIoKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB3aW5kb3cucHJpbnQoKTtcclxuICAgICAgICB9LCA1MDApO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgTUlMTElPTiA9IDEwMDAgKiAxMDAwO1xyXG5cclxuICAgIHRoaXMuZXhwb3J0VG9JbWFnZSA9IGZ1bmN0aW9uKGZvcm1hdCkge1xyXG5cclxuICAgICAgICAkc2NvcGUuaW1hZ2VFeHBvcnRMb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAkKCcjZXhwb3J0LWltYWdlIGltZycpLnJlbW92ZSgpO1xyXG4gICAgICAgIG1hcC5nZXRUZW1wbGF0ZXMoKS5zaG93RXhwb3J0Rm9vdGVyKCk7XHJcblxyXG4gICAgICAgIHZhciByZWN0ID0gbWFwLmdldERpYWdyYW0oKS5jb21wdXRlUGFydHNCb3VuZHMobWFwLmdldERpYWdyYW0oKS5ub2RlcykuY29weSgpO1xyXG5cclxuICAgICAgICB2YXIgaW1hZ2VNQiA9IHJlY3Qud2lkdGggKiByZWN0LmhlaWdodCAqIDQgLyBNSUxMSU9OOyAvLyA0IGJ5dGVzL3BpeGVsXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaW1hZ2VNQjogJyArIGltYWdlTUIpO1xyXG5cclxuICAgICAgICAvLyBtYWtlIHRoZSBtYXggc2l6ZSBvZiB0aGUgaW1hZ2UgMTBNQlxyXG4gICAgICAgIC8vIHBuZ1NpemUgPSBpbWFnZU1CICogc2NhbGUgKiBzY2FsZVxyXG4gICAgICAgIC8vIHNvIG1heCBzY2FsZSA9IHNxcnQocG5nU2l6ZSAvIGltYWdlTUIpXHJcbiAgICAgICAgLy8gVGhlc2UgY2FsY3VsYXRpb25zIGRvbid0IHNlZW0gdG8gYmUgcmlnaHQsIGJ1dCBpbiBwcmFjdGljZSB1c2luZyA1MDAgaGVyZVxyXG4gICAgICAgIC8vIHdlIGdldCBhIHNjYWxlIG9mIDIuNDMgZm9yIGFuIGltYWdlIDE5OTg0IHggMzQyNCBwaXhlbHNcclxuICAgICAgICAvLyB3aGljaCByZXN1bHRzIGluIGEgZmlsZSBzaXplIG9mIDEuODggTUIgYXQgMzIgYml0cy9waXhlbC4uLlxyXG4gICAgICAgIC8vIE9SIDI4MzgwIHggNTE5NiBwaXhlbHMsIHNjYWxlID0gMy40MSA9PiBmaWxlIHNpemUgPSAzLjQ5IE1CXHJcbiAgICAgICAgdmFyIHNjYWxlID0gNDtcclxuICAgICAgICBpZiAoaW1hZ2VNQikge1xyXG4gICAgICAgICAgICBzY2FsZSA9IE1hdGgubWluKDQsIE1hdGguc3FydCg1MCAvIGltYWdlTUIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2ltYWdlIGRpbWVuc2lvbnM6ICcgKyByZWN0LndpZHRoICsgJyB4ICcgKyByZWN0LmhlaWdodCArICcsIGltYWdlIGJ5dGVzOiAnICsgKHJlY3Qud2lkdGggKiByZWN0LmhlaWdodCAqIDQpICsgXHJcbiAgICAgICAgLy8gICAgICAgICcsIGltYWdlTUI6ICcgKyBpbWFnZU1CICsgJywgc2NhbGU6ICcgKyBzY2FsZSk7XHJcblxyXG4gICAgICAgICRzY29wZS5zaG93SW1hZ2VFeHBvcnQgPSB0cnVlO1xyXG5cclxuICAgICAgICB2YXIgcGFydHNUb0V4cG9ydCA9IG5ldyBnby5MaXN0KCk7XHJcbiAgICAgICAgcGFydHNUb0V4cG9ydC5hZGRBbGwobWFwLmdldERpYWdyYW0oKS5ub2Rlcyk7XHJcbiAgICAgICAgcGFydHNUb0V4cG9ydC5hZGRBbGwobWFwLmdldERpYWdyYW0oKS5saW5rcyk7XHJcbiAgICAgICAgcGFydHNUb0V4cG9ydC5yZW1vdmUobWFwLmdldFByZXNlbnRlcigpLnNsaWRlQmxvY2tlcik7XHJcblxyXG4gICAgICAgIHZhciBkb0ltYWdlID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBpbWcgPSBtYXAuZ2V0RGlhZ3JhbSgpLm1ha2VJbWFnZSh7XHJcbiAgICAgICAgICAgICAgICBwYXJ0czogcGFydHNUb0V4cG9ydCxcclxuICAgICAgICAgICAgICAgIG1heFNpemU6IG5ldyBnby5TaXplKChyZWN0LndpZHRoICsgMjAwKSAqIHNjYWxlLCAocmVjdC5oZWlnaHQgKyAyMDApICogc2NhbGUpLFxyXG4gICAgICAgICAgICAgICAgc2NhbGU6IHNjYWxlLFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTAwICogc2NhbGUsXHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnI2ZmZmZmZidcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKCcjZXhwb3J0LWltYWdlJykuYXBwZW5kKGltZyk7XHJcbiAgICAgICAgICAgICRzY29wZS5pbWFnZUV4cG9ydExvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIG1hcC5nZXRUZW1wbGF0ZXMoKS5oaWRlRXhwb3J0Rm9vdGVyKCk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIHV0aWxzIC0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLnNwbGl0TGluZXMgPSBmdW5jdGlvbih0ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRleHQuc3BsaXQoL1xcbi8pO1xyXG4gICAgfTtcclxufTsiLCJ3aW5kb3cuVXNlckN0cmwgPSBmdW5jdGlvbigkc2NvcGUpIHtcclxuXHJcbiAgICAvLyBxdWVyeSBzdHJpbmcgcGFyYW1zXHJcbiAgICAkc2NvcGUucGFyYW1zID0gVVJJKHdpbmRvdy5sb2NhdGlvbikucXVlcnkodHJ1ZSk7XHJcblxyXG4gICAgLy8gYXV0by1vcGVuIHRoaW5rcXVlcnk/XHJcbiAgICAkc2NvcGUudGhpbmtxdWVyeSA9ICgkc2NvcGUucGFyYW1zLnRoaW5rcXVlcnkgPyB0cnVlIDogZmFsc2UpO1xyXG5cclxuICAgICRzY29wZS51c2VySWQgPSB3aW5kb3cudXNlcklkOyAvLyBzZXQgaW4gbGF5b3V0cy91c2VyXHJcbiAgICAkc2NvcGUudXNlcklzQWRtaW4gPSB3aW5kb3cudXNlcklzQWRtaW47XHJcbiAgICAkc2NvcGUudXNlck5hbWUgPSAnJztcclxuICAgICRzY29wZS51c2VyUHJvZmlsZSA9IG51bGw7XHJcbiAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnJztcclxuICAgICRzY29wZS5wYXNzd29yZCA9ICcnO1xyXG4gICAgJHNjb3BlLnBhc3N3b3JkQ29uZmlybSA9ICcnO1xyXG5cclxuICAgICRzY29wZS5nZXROZXdXaW5kb3dOYW1lID0gZnVuY3Rpb24oYWN0aW9uLCBtYXBJZCkge1xyXG4gICAgICAgIGlmIChhY3Rpb24gPT0gJ1ZJRVdfTUFQJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ1ZJRVdfTUFQXycgKyBtYXBJZDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNob3cvaGlkZSB0ZXN0cyBVSSBhbmQgbW9kZWwgZGVidWcgZm9ybVxyXG4gICAgJHNjb3BlLnNob3dUZXN0cyA9IGZhbHNlO1xyXG4gICAgJHNjb3BlLnNob3dNb2RlbCA9IGZhbHNlO1xyXG5cclxuICAgICRzY29wZS50b2dnbGVTaG93VGVzdHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2hvd1Rlc3RzID0gISRzY29wZS5zaG93VGVzdHM7XHJcbiAgICB9O1xyXG4gICAgJHNjb3BlLnRvZ2dsZVNob3dNb2RlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zaG93TW9kZWwgPSAhJHNjb3BlLnNob3dNb2RlbDtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFVzZXJJZCA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgJHNjb3BlLnVzZXJJZCA9IGlkO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmaXhSb3dIZWlnaHRzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBtYWtlIGFsbCBjZWxscyBpbiBhIHJvdyB0aGUgc2FtZSBoZWlnaHRcclxuICAgIGZ1bmN0aW9uIGZpeFJvd0hlaWdodHMoKSB7XHJcbiAgICAgICAgLy8gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gICAgICQoJy5yb3ctaGVpZ2h0JykuZWFjaChmdW5jdGlvbigpIHsgIFxyXG4gICAgICAgIC8vICAgICAgICAgdmFyIGhpZ2hlc3RCb3ggPSAwO1xyXG4gICAgICAgIC8vICAgICAgICAgJCgnPiBkaXYnLCB0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaWYgKCQodGhpcykuaGVpZ2h0KCkgPiBoaWdoZXN0Qm94KSBcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgaGlnaGVzdEJveCA9ICQodGhpcykuaGVpZ2h0KCk7XHJcbiAgICAgICAgLy8gICAgICAgICB9KTsgIFxyXG4gICAgICAgIC8vICAgICAgICAgJCgnPiBkaXYnLCB0aGlzKS5oZWlnaHQoaGlnaGVzdEJveCk7XHJcbiAgICAgICAgLy8gICAgIH0pOyAgICAgICAgXHJcbiAgICAgICAgLy8gfSwgMzAwKTtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoJHNjb3BlLnVzZXJJZCkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJy91c2Vycy8nICsgJHNjb3BlLnVzZXJJZCArICcvcHJvZmlsZS5qc29uJztcclxuICAgICAgICAgICAgd2luZG93LnN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQodXJsKS50aGVuKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsgLy8gc3VjY2Vzc1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyUHJvZmlsZSA9IHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdFNlbGVjdGVkQWRtaW5UYWdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdFNlbGVjdGVkRm9sbG93YWJsZU9yZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNjc1RhZ2dpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNjc1RhZ2dpbmcubG9hZENjc1RhZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZml4Um93SGVpZ2h0cygpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlYXNvbikgeyAvLyBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3QgbG9hZCB1c2VyIHByb2ZpbGUgZGF0YScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZSgpO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIGNvdXJzZXMvc3Vic2NyaXB0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBvcGVuIHRoZSBTdHJpcGUgQ2hlY2tvdXQgZGlhbG9nIGFuZCBnZXQgYSB0b2tlblxyXG4gICAgLy8gTkI6IGFtb3VudCBpcyBzdG9yZWQgaW4gdGhlIFN0cmlwZSBwbGFuIGRlZmluaXRpb25cclxuICAgICRzY29wZS5hZGRTdWJzY3JpcHRpb24gPSBmdW5jdGlvbihwbGFuKSB7XHJcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBTdHJpcGVDaGVja291dC5jb25maWd1cmUoe1xyXG4gICAgICAgICAgICBrZXk6ICRzY29wZS51c2VyUHJvZmlsZS5hY2NvdW50LnN0cmlwZUtleSxcclxuICAgICAgICAgICAgbmFtZTogXCJTdWJzY3JpYmUgdG8gTWV0YU1hcFwiLFxyXG4gICAgICAgICAgICBpbWFnZTogXCIvYXNzZXRzL2JhZGdlLWxvZ28tNjQucG5nXCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwbGFuLm5hbWUsXHJcbiAgICAgICAgICAgIHBhbmVsTGFiZWw6IFwiUGF5IHt7YW1vdW50fX0vXCIgKyBwbGFuLmludGVydmFsLFxyXG4gICAgICAgICAgICBhbW91bnQ6IHBsYW4ucHJpY2UsXHJcbiAgICAgICAgICAgIGFsbG93UmVtZW1iZXJNZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGVtYWlsOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5lbWFpbCxcclxuICAgICAgICAgICAgdG9rZW46IGZ1bmN0aW9uKHRva2VuLCBhcmdzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndG9rZW46ICcsIHRva2VuKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9jaGFyZ2VzL3N1YnNjcmliZScsIHtcclxuICAgICAgICAgICAgICAgICAgICBwbGFuX2lkOiBwbGFuLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5faWQ6IHRva2VuLmlkXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5zdWNjZXNzKCdTdWJzY3JpcHRpb24gY3JlYXRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuZXJyb3IoJ1N1YnNjcmlwdGlvbiBjb3VsZCBub3QgYmUgY3JlYXRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGhhbmRsZXIub3BlbigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBmb3IgYnV5LWNvdXJzZS1idXR0b24gZGlyZWN0aXZlXHJcbiAgICAkc2NvcGUuZ2V0QnV5QnV0dG9uTGFiZWwgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIHZhciBjb3Vyc2U7XHJcbiAgICAgICAgaWYgKGNvdXJzZSA9IGdldEZyZWVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnRnJlZSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxlZENvdXJzZShpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdFbnJvbGxlZCc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxhYmxlQ291cnNlKGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0Vucm9sbCAtICQnICsgKGNvdXJzZS5wcmljZSAvIDEwMCkudG9GaXhlZCgyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZ2V0Q291cnNlU3RhdHVzU3VtbWFyeSA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgdmFyIGNvdXJzZSA9ICRzY29wZS5nZXRDb3Vyc2UoaWQpO1xyXG4gICAgICAgIGlmIChjb3Vyc2UpIHtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBjb3Vyc2Uuc3RlcHNDb21wbGV0ZWQgKyAnIG9mICcgKyBjb3Vyc2Uuc3RlcHMgKyAnIHN0ZXBzIGNvbXBsZXRlZCc7XHJcbiAgICAgICAgICAgIGlmIChjb3Vyc2UuZW5yb2xtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0ID0gXCJFbnJvbGxlZCBcIiArIGNvdXJzZS5lbnJvbG1lbnQuZGF0ZSArXHJcbiAgICAgICAgICAgICAgICAgICAgKGNvdXJzZS5lbnJvbG1lbnQuc3RyaXBlRGF0YS5yZWZ1bmRlZCA/IFwiIChSZWZ1bmRlZClcIiA6IFwiXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAnIC0gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY291cnNlLmNvZGUgKyAnIC0gJyArIHRleHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZ2V0Q291cnNlQ29tcGxldGVkUGVyY2VudCA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgdmFyIGNvdXJzZSA9ICRzY29wZS5nZXRDb3Vyc2UoaWQpO1xyXG4gICAgICAgIGlmIChjb3Vyc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZS5zdGVwc0NvbXBsZXRlZFBlcmNlbnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUubWF5YmVCdXlDb3Vyc2UgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIHZhciBjb3Vyc2U7XHJcbiAgICAgICAgaWYgKGNvdXJzZSA9IGdldEZyZWVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9jb3Vyc2VzLycgKyBjb3Vyc2UuaWQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxlZENvdXJzZShpZCkpIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2NvdXJzZXMvJyArIGNvdXJzZS5pZDtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvdXJzZSA9IGdldEVucm9sbGFibGVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5idXlDb3Vyc2UoY291cnNlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5nZXRDb3Vyc2UgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIHZhciBjb3Vyc2U7XHJcbiAgICAgICAgaWYgKGNvdXJzZSA9IGdldEZyZWVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxlZENvdXJzZShpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvdXJzZSA9IGdldEVucm9sbGFibGVDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRGcmVlQ291cnNlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZSAmJiBfLmZpbmQoJHNjb3BlLnVzZXJQcm9maWxlLmZyZWVBY2Nlc3NpYmxlQ291cnNlcywgZnVuY3Rpb24oY291cnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2UuaWQgPT0gaWQgJiYgY291cnNlLmVucm9sbWVudCA9PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RW5yb2xsZWRDb3Vyc2UoaWQpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlICYmIF8uZmluZCgkc2NvcGUudXNlclByb2ZpbGUuZnJlZUFjY2Vzc2libGVDb3Vyc2VzLCBmdW5jdGlvbihjb3Vyc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZS5pZCA9PSBpZCAmJiBjb3Vyc2UuZW5yb2xtZW50ICE9PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RW5yb2xsYWJsZUNvdXJzZShpZCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGUgJiYgXy5maW5kKCRzY29wZS51c2VyUHJvZmlsZS5ub25GcmVlQWNjZXNzaWJsZUNvdXJzZXMsIGZ1bmN0aW9uKGNvdXJzZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY291cnNlLmlkID09IGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG9wZW4gdGhlIFN0cmlwZSBDaGVja291dCBkaWFsb2cgYW5kIGdldCBhIHRva2VuXHJcbiAgICAvLyBOQjogYW1vdW50IGlzIHBhc3NlZCBmcm9tIG91ciBjb3Vyc2UgZGVmaW5pdGlvblxyXG4gICAgJHNjb3BlLmJ1eUNvdXJzZSA9IGZ1bmN0aW9uKGNvdXJzZSkge1xyXG4gICAgICAgIHZhciBoYW5kbGVyID0gU3RyaXBlQ2hlY2tvdXQuY29uZmlndXJlKHtcclxuICAgICAgICAgICAga2V5OiAkc2NvcGUudXNlclByb2ZpbGUuYWNjb3VudC5zdHJpcGVLZXksXHJcbiAgICAgICAgICAgIG5hbWU6IFwiRW5yb2xsIGluIENvdXJzZVwiLFxyXG4gICAgICAgICAgICBpbWFnZTogXCIvYXNzZXRzL2JhZGdlLWxvZ28tNjQucG5nXCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBjb3Vyc2UuY29kZSxcclxuICAgICAgICAgICAgYW1vdW50OiBjb3Vyc2UucHJpY2UsXHJcbiAgICAgICAgICAgIGFsbG93UmVtZW1iZXJNZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGVtYWlsOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5lbWFpbCxcclxuICAgICAgICAgICAgdG9rZW46IGZ1bmN0aW9uKHRva2VuLCBhcmdzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndG9rZW46ICcsIHRva2VuKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9jaGFyZ2VzL2J1eV9jb3Vyc2UnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291cnNlX2NvZGU6IGNvdXJzZS5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdXJzZV9wcmljZTogY291cnNlLnByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuX2lkOiB0b2tlbi5pZFxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnQ291cnNlIHB1cmNoYXNlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbG9hZCBwYWdlIHRvIGhhbmRsZSBzdHJpcGUgYnVnICg/KSAtIGxpbmtzIG5vdCBjbGlja2FibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LmVycm9yKCdDb3Vyc2UgcHVyY2hhc2UgY291bGQgbm90IGJlIGNvbXBsZXRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0cmlwZSBlcnJvcjogJywgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGhhbmRsZXIub3BlbigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY2FuY2VsU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24oc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgd2luZG93LnN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgICRodHRwLmRlbGV0ZSgnL2NoYXJnZXMvdW5zdWJzY3JpYmU/c3Vic2NyaXB0aW9uX2lkPScgKyBzdWJzY3JpcHRpb24uaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnU3Vic2NyaXB0aW9uIGNhbmNlbGxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5lcnJvcignU3Vic2NyaXB0aW9uIGNvdWxkIG5vdCBiZSBjYW5jZWxsZWQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gZGVidWcvdGVzdCBvbmx5XHJcbiAgICAkc2NvcGUuY2xlYXJDdXN0b21lciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAkaHR0cC5kZWxldGUoJy9jaGFyZ2VzL2NsZWFyX2N1c3RvbWVyJykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5zdWNjZXNzKCdDdXN0b21lciBjbGVhcmVkJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LmVycm9yKCdDdXN0b21lciBjb3VsZCBub3QgYmUgY2xlYXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBwb2ludHMgYW5kIGJhZGdlcyAtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLmhhc0N1cnJlbnRCYWRnZSA9IGZ1bmN0aW9uKGtleSwgbGV2ZWwpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlICYmICRzY29wZS51c2VyUHJvZmlsZS5iYWRnZXMuY3VycmVudFtrZXldID09IGxldmVsO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuaGFzTmV3QmFkZ2UgPSBmdW5jdGlvbihrZXksIGxldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZSAmJiAkc2NvcGUudXNlclByb2ZpbGUuYmFkZ2VzLm5ld1trZXldID09IGxldmVsO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuaGFzTmV3QmFkZ2VzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZSAmJiBfLmtleXMoJHNjb3BlLnVzZXJQcm9maWxlLmJhZGdlcy5uZXcpLmxlbmd0aCA+IDA7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5nZXRCYWRnZURlZmluaXRpb24gPSBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUoJHNjb3BlLnVzZXJQcm9maWxlLmJhZGdlcy5kZWZpbml0aW9ucywge1xyXG4gICAgICAgICAgICBrZXk6IGtleVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIHR1dG9yaWFsIC0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAkc2NvcGUudHV0b3JpYWxFbmFibGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cubWFwRGF0YSAhPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIHN0YXJ0IHR1dG9yaWFsOlxyXG4gICAgICAgIHZhciBfdHV0b3JpYWwgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVHV0b3JpYWwoKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnN0YXJ0VHV0b3JpYWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgX3R1dG9yaWFsLnN0YXJ0KCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHt9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gZmVlZGJhY2sgZm9ybSAtLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5mZWVkYmFjayA9ICcnO1xyXG5cclxuICAgICRzY29wZS50b2dnbGVGZWVkYmFjayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQoJyNmZWVkYmFjay1kcm9wZG93bicpLnNsaWRlVG9nZ2xlKCdmYXN0JykuZmluZCgndGV4dGFyZWEnKS5nZXQoMCkuZm9jdXMoKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnN1Ym1pdEZlZWRiYWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5mZWVkYmFjayA9PT0gJycpIHtcclxuICAgICAgICAgICAgcmV0dXJuOyAvLyBlbXB0eSBpbnB1dC4uLlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICB1cmw6ICcvdXNlcnMvZmVlZGJhY2snLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxyXG4gICAgICAgICAgICAgICAgZmVlZGJhY2s6ICRzY29wZS5mZWVkYmFja1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5mZWVkYmFjayA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1RoYW5rIHlvdSBmb3IgeW91ciBmZWVkYmFjayEnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignZXJyb3Igc2VuZGluZyBmZWVkYmFjazogJywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcjZmVlZGJhY2stZHJvcGRvd24nKS5zbGlkZVRvZ2dsZSgnZmFzdCcpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0gdXNlcidzIHVzZXIgdGFncyAtLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIE5COiB0aGlzIGlzIHNpbWlsYXIgdG8gbWFwcyB0YWdnaW5nIGluIHRhZ2dpbmcuanMgLSBidXQgc2ltcGxlciwgYXMgd2UgZG8gbm90IGhhdmUgdG8gZGVhbCB3aXRoIFxyXG4gICAgLy8gbXVsdGlwbGUgdGFnZ2FibGUgaXRlbXMsIHdoaWNoIG1lYW5zIHRyYWNraW5nIGV4aXN0aW5nIHZzLiBuZXcgdGFncywgZXRjLi4uXHJcblxyXG4gICAgJHNjb3BlLm5ld1RhZyA9IHtcclxuICAgICAgICBuYW1lOiAnJ1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyB0YWcgYXV0b2NvbXBsZXRlXHJcbiAgICAkc2NvcGUuZ2V0VXNlclRhZ3MgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICB2YXIgdXJsID0gJy91c2VyX3RhZ3MvbGlzdC5qc29uP3E9JyArIHZpZXdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS50YWdzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudXBkYXRlVXNlclVzZXJUYWdzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHRhZ0xpc3QgPSBfLnBsdWNrKCRzY29wZS51c2VyUHJvZmlsZS51c2VyVGFncywgJ25hbWUnKS5qb2luKCcsJyk7XHJcbiAgICAgICAgJGh0dHAucHV0KCcvdXNlcl90YWdzL3VwZGF0ZV91c2VyX3VzZXJfdGFncycsIFt0YWdMaXN0XSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1RhZ3Mgc2F2ZWQnO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdDb3VsZCBub3Qgc2F2ZSB0YWdzJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5kZWxldGVUYWcgPSBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZigkc2NvcGUudXNlclByb2ZpbGUudXNlclRhZ3MsIHRhZyk7XHJcbiAgICAgICAgJHNjb3BlLnVzZXJQcm9maWxlLnVzZXJUYWdzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAkc2NvcGUudXBkYXRlVXNlclVzZXJUYWdzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS50YWdTZWxlY3RlZCA9IGZ1bmN0aW9uKGl0ZW0sIG1vZGVsLCBsYWJlbCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3RhZ1NlbGVjdGVkOiAnLCBpdGVtLCBtb2RlbCwgbGFiZWwpO1xyXG4gICAgICAgICRzY29wZS5hZGRUYWcoaXRlbS5uYW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmVkaXRpbmdUYWdLZXlwcmVzcyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS53aGljaCA9PSAxMykge1xyXG4gICAgICAgICAgICAkc2NvcGUuYWRkVGFnKCRzY29wZS5uZXdUYWcubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuYWRkVGFnID0gZnVuY3Rpb24odGFnTmFtZSkge1xyXG4gICAgICAgICRzY29wZS51c2VyUHJvZmlsZS51c2VyVGFncy5wdXNoKHtcclxuICAgICAgICAgICAgbmFtZTogdGFnTmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS5uZXdUYWcubmFtZSA9ICcnO1xyXG4gICAgICAgICRzY29wZS51cGRhdGVVc2VyVXNlclRhZ3MoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIHVzZXIncy9tYXAncyBDQ1MgdGFncyAtLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHRoaXMgbWFuYWdlcyBDQ1MgdGFncyBmb3IgZWl0aGVyIHRoZSBjdXJyZW50IHVzZXIgb3IgdGhlIGN1cnJlbnQgbWFwLCBcclxuICAgIC8vIGRlcGVuZGluZyB3aGljaCBwYWdlIHdlJ3JlIG9uIC0gbWFwSWQgZ2V0cyBvdmVycmlkZGVuIGluIGVkaXRvci5qcyBpZiB3ZSdyZSBlZGl0aW5nIGEgbWFwXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAkc2NvcGUuY2NzVGFnZ2luZyA9IG5ldyBTYW5kYmFua0Njc1RhZ2dpbmcoJHNjb3BlKTtcclxuICAgICAgICAkc2NvcGUuY2NzVGFnZ2luZy5tYXBJZCA9IG51bGw7XHJcbiAgICB9IGNhdGNoIChlKSB7fVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLSB1c2VyJ3MgYWRtaW4gdGFncyAtLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGtleSAoaW5kZXgpOiBhZG1pbiB0YWcgSUQ7IHZhbHVlOiB0cnVlL2ZhbHNlIChpZiB1c2VyIGZvbGxvd3MgdGhlIGFkbWluIHRhZylcclxuICAgICRzY29wZS5zZWxlY3RlZFVzZXJBZG1pblRhZ3MgPSBbXTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0U2VsZWN0ZWRBZG1pblRhZ3MoKSB7XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkVXNlckFkbWluVGFncyA9IFtdO1xyXG4gICAgICAgIF8uZWFjaCgkc2NvcGUudXNlclByb2ZpbGUuYWRtaW5UYWdzLCBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICAgICAgaWYgKF8uZmluZFdoZXJlKCRzY29wZS51c2VyUHJvZmlsZS51c2VyQWRtaW5UYWdzLCB7XHJcbiAgICAgICAgICAgICAgICBpZDogdGFnLmlkXHJcbiAgICAgICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRVc2VyQWRtaW5UYWdzW3RhZy5pZF0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLnVwZGF0ZVVzZXJBZG1pblRhZ3MgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRUYWdOYW1lcyA9IF8ubWFwKCRzY29wZS51c2VyUHJvZmlsZS5hZG1pblRhZ3MsIGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLnNlbGVjdGVkVXNlckFkbWluVGFnc1t0YWcuaWRdID8gdGFnLm5hbWUgOiBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciB0YWdMaXN0ID0gXy53aXRob3V0KHNlbGVjdGVkVGFnTmFtZXMsIG51bGwpLmpvaW4oJywnKTtcclxuICAgICAgICAkaHR0cC5wdXQoJy9hZG1pbl90YWdzL3VwZGF0ZV91c2VyX2FkbWluX3RhZ3MnLCBbdGFnTGlzdF0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdJbnRlcmVzdHMgc2F2ZWQnO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdDb3VsZCBub3Qgc2F2ZSBpbnRlcmVzdHMnO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIHVzZXIncyBmb2xsb3dlZCBvcmdzIC0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8ga2V5IChpbmRleCk6IG9yZyBJRDsgdmFsdWU6IHRydWUvZmFsc2UgKGlmIHVzZXIgZm9sbG93cyB0aGUgb3JnKVxyXG4gICAgJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnMgPSBbXTtcclxuXHJcbiAgICAkc2NvcGUudXNlcklzRm9sbG93aW5nT3JnID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbaWRdO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudG9nZ2xlVXNlckZvbGxvd2luZ09yZyA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgaWYgKCEkc2NvcGUuc2VsZWN0ZWRGb2xsb3dhYmxlT3JnYW5pemF0aW9uc1tpZF0gfHwgY29uZmlybSgnU3RvcCBmb2xsb3dpbmcgdGhpcyBUaGlua05hdGlvbj8nKSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRGb2xsb3dhYmxlT3JnYW5pemF0aW9uc1tpZF0gPSAhJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbaWRdO1xyXG4gICAgICAgICAgICAkc2NvcGUudXBkYXRlRm9sbG93ZWRPcmdhbml6YXRpb25zKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0U2VsZWN0ZWRGb2xsb3dhYmxlT3JncygpIHtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRGb2xsb3dhYmxlT3JnYW5pemF0aW9ucyA9IFtdO1xyXG4gICAgICAgIF8uZWFjaCgkc2NvcGUudXNlclByb2ZpbGUuZm9sbG93ZWRPcmdhbml6YXRpb25zLCBmdW5jdGlvbihvcmcpIHtcclxuICAgICAgICAgICAgaWYgKF8uZmluZFdoZXJlKCRzY29wZS51c2VyUHJvZmlsZS5mb2xsb3dhYmxlT3JnYW5pemF0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgaWQ6IG9yZy5pZFxyXG4gICAgICAgICAgICB9KSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbb3JnLmlkXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUudXBkYXRlRm9sbG93ZWRPcmdhbml6YXRpb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkT3JnSWRzID0gXy5tYXAoJHNjb3BlLnVzZXJQcm9maWxlLmZvbGxvd2FibGVPcmdhbml6YXRpb25zLCBmdW5jdGlvbihvcmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zW29yZy5pZF0gPyBvcmcuaWQgOiBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBvcmdJZExpc3QgPSBfLndpdGhvdXQoc2VsZWN0ZWRPcmdJZHMsIG51bGwpLmpvaW4oJywnKTtcclxuICAgICAgICAkaHR0cC5wdXQoJy9vcmdhbml6YXRpb25fZm9sbG93cy91cGRhdGVfdXNlcl9vcmdhbml6YXRpb25fZm9sbG93cycsIFtvcmdJZExpc3RdKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnVGhpbmtOYXRpb25zIHNhdmVkJztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgVGhpbmtOYXRpb25zJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBhdXRvLXNhdmUgdXNlciBwcm9maWxlIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGRvbid0IGxldCBhdXRvc2F2ZSBiZSB0cmlnZ2VyZWQgbW9yZSB0aGFuIGV2ZXJ5IE4gbWlsbGlzZWNvbmRzLi4uXHJcbiAgICAkc2NvcGUuYXV0b3NhdmUgPSBfLmRlYm91bmNlKGF1dG9zYXZlTm93LCAyMDAwKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhdXRvc2F2ZU5vdygpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdhdXRvc2F2aW5nIHVzZXIgcHJvZmlsZScpO1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBlbWFpbDogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgIGFsdF9lbWFpbDogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuYWx0RW1haWwsXHJcbiAgICAgICAgICAgIGZpcnN0X25hbWU6ICRzY29wZS51c2VyUHJvZmlsZS51c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgbGFzdF9uYW1lOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5sYXN0TmFtZSxcclxuICAgICAgICAgICAgYWJvdXRfbWU6ICRzY29wZS51c2VyUHJvZmlsZS51c2VyLmFib3V0TWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICgkc2NvcGUucGFzc3dvcmRzTWF0Y2goKSAmJiAkc2NvcGUucGFzc3dvcmQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGRhdGEucGFzc3dvcmQgPSAkc2NvcGUucGFzc3dvcmQ7XHJcbiAgICAgICAgICAgIGRhdGEucGFzc3dvcmRfY29uZmlybWF0aW9uID0gJHNjb3BlLnBhc3N3b3JkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1NhdmluZy4uLic7XHJcbiAgICAgICAgJGh0dHAucHV0KCcvdXNlcnMvJyArICRzY29wZS51c2VySWQsIGRhdGEpLnRoZW4oXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF8uaGFzKGRhdGEsICdwYXNzd29yZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1Byb2ZpbGUgYW5kIHBhc3N3b3JkIHNhdmVkJztcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnUHJvZmlsZSBzYXZlZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ0NvdWxkIG5vdCBzYXZlIHByb2ZpbGUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUucGFzc3dvcmRzTWF0Y2ggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gKCEkc2NvcGUucGFzc3dvcmQubGVuZ3RoICYmICEkc2NvcGUucGFzc3dvcmRDb25maXJtLmxlbmd0aCkgfHxcclxuICAgICAgICAgICAgJHNjb3BlLnBhc3N3b3JkID09ICRzY29wZS5wYXNzd29yZENvbmZpcm07XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSB1cGxvYWQgYXZhdGFyIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHVzaW5nOiBodHRwczovL2dpdGh1Yi5jb20vZGFuaWFsZmFyaWQvYW5ndWxhci1maWxlLXVwbG9hZFxyXG4gICAgJHNjb3BlLm9uQXZhdGFyRmlsZVNlbGVjdCA9IGZ1bmN0aW9uKCRmaWxlcykge1xyXG4gICAgICAgIHN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgIC8vJGZpbGVzOiBhbiBhcnJheSBvZiBmaWxlcyBzZWxlY3RlZCwgZWFjaCBmaWxlIGhhcyBuYW1lLCBzaXplLCBhbmQgdHlwZS5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRmaWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgZmlsZSA9ICRmaWxlc1tpXTtcclxuICAgICAgICAgICAgJHNjb3BlLnVwbG9hZCA9ICR1cGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgICAgIHVybDogJ3VzZXJzLycgKyB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZmlsZTogZmlsZSwgLy8gb3IgbGlzdCBvZiBmaWxlczogJGZpbGVzIGZvciBodG1sNSBvbmx5XHJcbiAgICAgICAgICAgICAgICBmaWxlRm9ybURhdGFOYW1lOiAndXNlclthdmF0YXJdJ1xyXG4gICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnUGhvdG8gdXBkYXRlZCc7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ0Vycm9yOiBDb3VsZCBub3QgdXBsb2FkIHBob3RvJztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vLnRoZW4oc3VjY2VzcywgZXJyb3IsIHByb2dyZXNzKTsgXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIHZpZXcgaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gcmV0dXJucyBlLmcuIFwiYSBkYXkgYWdvXCJcclxuICAgIC8vIChOQjogbm93IGlzIG9idGFpbmVkIGZyb20gdGhlIERCIHRvIGVuc3VyZSB0aGF0IHdlIGhhdmUgYm90aCBkYXRlcyBpbiBVVEM7IFxyXG4gICAgLy8gICAgYWxzbywgU1FMIHZzLiBydWJ5IGRhdGVzIG5lZWQgdG8gYmUgY29lcmNlZCBpbnRvIGEgc2ltaWxhciBmb3JtYXQsIGJvdGggaW4gVVRDIC0gc2VlIGZlZWQuanNvbi5qYnVpbGRlcilcclxuICAgICRzY29wZS5nZXRFdmVudFRpbWUgPSBmdW5jdGlvbih0LCBub3cpIHtcclxuICAgICAgICB2YXIgdGltZSA9IG1vbWVudCh0LCAnWVlZWS1NTS1ERCBISDptbTpzcy5TU1MnKTtcclxuICAgICAgICB2YXIgbm93dGltZSA9IG1vbWVudChub3csICdZWVlZLU1NLUREIEhIOm1tOnNzLlNTUycpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0OiAgICAgICAnICsgdCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ25vdzogICAgICcgKyBub3cpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0aW1lOiAgICAnICsgdGltZS5mb3JtYXQoKSk7IC8vICsgJyAnICsgdGltZS5pc1ZhbGlkKCkpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdub3d0aW1lOiAnICsgbm93dGltZS5mb3JtYXQoKSk7IC8vICsgJyAnICsgbm93dGltZS5pc1ZhbGlkKCkpO1xyXG4gICAgICAgIHJldHVybiB0aW1lLmZyb20obm93dGltZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBub3RpZmljYXRpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuZ2V0Tm90aWZpY2F0aW9uRmVlZFVybCA9IGZ1bmN0aW9uKG5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgIGlmIChub3RpZmljYXRpb24uYWN0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IG5vdGlmaWNhdGlvbi5hY3Rpb25zWzBdO1xyXG4gICAgICAgICAgICBpZiAoYWN0aW9uLmFjdGlvbiA9PSAnTElLRScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnL3NvY2lhbD9saWtlX2lkPScgKyBhY3Rpb24ubGlrZUlkO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbi5hY3Rpb24gPT0gJ0NPTU1FTlQnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJy9zb2NpYWw/Y29tbWVudF9pZD0nICsgYWN0aW9uLmNvbW1lbnRJZDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24uYWN0aW9uID09ICdTSEFSRV9JTkRJVklEVUFMJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcvbWFwcy8nICsgYWN0aW9uLm1hcElkO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbi5hY3Rpb24gPT0gJ1NIQVJFX1BVQkxJQycpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnL3NvY2lhbD9zaGFyZV9pZD0nICsgYWN0aW9uLnNoYXJlSWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZGVsZXRlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24obm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvbm90aWZpY2F0aW9ucy8nICsgbm90aWZpY2F0aW9uLmlkICsgJy5qc29uJykudGhlbihcclxuICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsgLy8gc3VjY2Vzc1xyXG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLmRlbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbihyZWFzb24pIHsgLy8gZXJyb3JcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3QgZGVsZXRlIG5vdGlmaWNhdGlvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLm5vdGlmaWNhdGlvblZlcmIgPSBmdW5jdGlvbihhY3Rpb24pIHtcclxuICAgICAgICB2YXIgdmVyYnMgPSB7XHJcbiAgICAgICAgICAgIExJS0U6ICdsaWtlZCB0aGlzOicsXHJcbiAgICAgICAgICAgIENPTU1FTlQ6ICdjb21tZW50ZWQgb24gdGhpczonLFxyXG4gICAgICAgICAgICBTSEFSRV9JTkRJVklEVUFMOiAnc2hhcmVkIGEgTWV0YU1hcCB3aXRoIHlvdScsXHJcbiAgICAgICAgICAgIFNIQVJFX1BVQkxJQzogJ3NoYXJlZCBhIE1ldGFNYXAgd2l0aCBldmVyeW9uZScsXHJcbiAgICAgICAgICAgIE1BUF9GT0xMT1c6ICdmb2xsb3dlZCBhIE1ldGFNYXA6JyxcclxuICAgICAgICAgICAgVVNFUl9GT0xMT1c6ICdmb2xsb3dlZCB5b3UnXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdmVyYnNbYWN0aW9uXTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHV0aWxpdHkgZnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGhhbmR5IGZ1bmN0aW9uIGZvciB1c2Ugd2l0aCBuZy1jbGFzcyBvbiByYWRpbyBidXR0b25zXHJcbiAgICAkc2NvcGUuY2xhc3NJZiA9IGZ1bmN0aW9uKGtsYXNzLCBiKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnY2xhc3NJZjogJyArIGtsYXNzICsgJywgJyArIGIpO1xyXG4gICAgICAgIHJldHVybiAoYiA/IGtsYXNzIDogJycpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBhdm9pZCAnJGFwcGx5IGFscmVhZHkgaW4gcHJvZ3Jlc3MnIGVycm9yIChzb3VyY2U6IGh0dHBzOi8vY29kZXJ3YWxsLmNvbS9wL25naXNtYSlcclxuICAgICRzY29wZS5zYWZlQXBwbHkgPSBmdW5jdGlvbihmbikge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NhZmVBcHBseSBvbiBzY29wZTogJyArICRzY29wZSk7XHJcblxyXG4gICAgICAgIC8vIFRPRE8/IHJlc3RvcmUgbm9uLUFuZ3VsYXIgdmVyc2lvbiBvZiB0aGlzIG1ldGhvZFxyXG4gICAgICAgIC8vdmFyIHBoYXNlID0gdGhpcy4kcm9vdC4kJHBoYXNlO1xyXG4gICAgICAgIC8vaWYgKHBoYXNlID09ICckYXBwbHknIHx8IHBoYXNlID09ICckZGlnZXN0Jykge1xyXG4gICAgICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZihmbikgPT09ICdmdW5jdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICBmbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgLy99IGVsc2Uge1xyXG4gICAgICAgIC8vICAgIHRoaXMuJGFwcGx5KGZuKTtcclxuICAgICAgICAvL31cclxuICAgIH07XHJcblxyXG4gICAgLy8gc291cmNlOiBodHRwOi8vY3RybHEub3JnL2NvZGUvMTk2MTYtZGV0ZWN0LXRvdWNoLXNjcmVlbi1qYXZhc2NyaXB0XHJcbiAgICAkc2NvcGUuaXNUb3VjaERldmljZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAoKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgfHwgKG5hdmlnYXRvci5NYXhUb3VjaFBvaW50cyA+IDApIHx8IChuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDApKTtcclxuICAgIH07XHJcblxyXG4gICAgaW5pdCgpO1xyXG59OyIsImNvbnN0IENPTE9SUyA9IHtcclxuICAgIGdyb3VwRmlsbENvbG9yOiAnI2Y5ZjlmOScsXHJcbiAgICBjb2xvclBMaWdodDogJyNGREREQUYnLFxyXG4gICAgY29sb3JQRGFyazogJyNDOTg4MkInLFxyXG5cclxuICAgIC8vIERTUlAgY29sb3JzIChmcm9tIF92YXJpYWJsZXMuc2NzcylcclxuICAgIGNvbG9yRDogJyNmMjYyNGMnLFxyXG4gICAgY29sb3JSOiAnIzRjYmZjMicsXHJcbiAgICBjb2xvclM6ICcjOTZjOTNkJyxcclxuICAgIGNvbG9yUDogJyNmYmFhMzYnLFxyXG5cclxuICAgIHdoaXRlOiAnIzAwMCdcclxufVxyXG5cclxuT2JqZWN0LmZyZWV6ZShDT0xPUlMpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDT0xPUlM7IiwiY29uc3Qgc3RhdHVzID0ge1xyXG4gICAgTEFTVF9VUERBVEVEOiAnJyxcclxuICAgIFJFQURfT05MWTogJ1ZpZXcgb25seScsXHJcbiAgICBTQVZJTkc6ICdTYXZpbmcuLi4nLFxyXG4gICAgU0FWRV9PSzogJ0FsbCBjaGFuZ2VzIHNhdmVkJyxcclxuICAgIFNBVkVfRkFJTEVEOiAnQ2hhbmdlcyBjb3VsZCBub3QgYmUgc2F2ZWQnXHJcbn07XHJcblxyXG5PYmplY3QuZnJlZXplKHN0YXR1cyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHN0YXR1czsiLCJjb25zdCBUQUJTID0ge1xyXG4gICAgVEFCX0lEX1BSRVNFTlRFUiA6ICdwcmVzZW50ZXItdGFiJyxcclxuICAgIFRBQl9JRF9BTkFMWVRJQ1NfTUFQIDogJ2FuYWx5dGljcy10YWItbWFwJyxcclxuICAgIFRBQl9JRF9BTkFMWVRJQ1NfVEhJTkcgOiAnYW5hbHl0aWNzLXRhYi10aGluZycsXHJcbiAgICBUQUJfSURfUEVSU1BFQ1RJVkVTIDogJ3BlcnNwZWN0aXZlcy10YWInLFxyXG4gICAgVEFCX0lEX0RJU1RJTkNUSU9OUyA6ICdkaXN0aW5jdGlvbnMtdGFiJyxcclxuICAgIFRBQl9JRF9BVFRBQ0hNRU5UUyA6ICdhdHRhY2htZW50cy10YWInLFxyXG4gICAgVEFCX0lEX0dFTkVSQVRPUiA6ICdnZW5lcmF0b3ItdGFiJyxcclxuICAgIFRBQl9JRF9TVEFOREFSRFMgOiAnc3RhbmRhcmRzLXRhYidcclxufTtcclxuT2JqZWN0LmZyZWV6ZShUQUJTKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVEFCUzsiLCJsZXQgQXV0aDBMb2NrID0gcmVxdWlyZSgnYXV0aDAtbG9jaycpO1xuXG5jbGFzcyBBdXRoMCB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5sb2NrID0gbmV3IEF1dGgwTG9jaygnd3NPbmFydDIzeVZpSVNocVQ0d2ZKMTh3MnZ0MmNsMzInLCAnbWV0YW1hcC5hdXRoMC5jb20nKTtcbiAgICAgICAgdGhpcy5sb2NrLm9uKCdsb2FkaW5nIHJlYWR5JywgKC4uLmUpID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBsb2dpbigpIHtcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGF0LmdldFNlc3Npb24oKS50aGVuKChwcm9maWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHByb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChwcm9maWxlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmxvY2suc2hvdyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dpbkFmdGVyU2lnbnVwOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aFBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlOiAnb3BlbmlkIG9mZmxpbmVfYWNjZXNzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCAoZXJyLCBwcm9maWxlLCBpZF90b2tlbiwgY3Rva2VuLCBvcHQsIHJlZnJlc2hfdG9rZW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxmb3JhZ2Uuc2V0SXRlbSgnaWRfdG9rZW4nLCBpZF90b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxmb3JhZ2Uuc2V0SXRlbSgncHJvZmlsZScsIHByb2ZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ3JlZnJlc2hfdG9rZW4nLCByZWZyZXNoX3Rva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmlkX3Rva2VuID0gaWRfdG9rZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5wcm9maWxlID0gcHJvZmlsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnJlZnJlc2hfdG9rZW4gPSByZWZyZXNoX3Rva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwocHJvZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgbGlua0FjY291bnQoKSB7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgdGhpcy5sb2NrLnNob3coe1xuICAgICAgICAgICAgY2FsbGJhY2tVUkw6ICdodHRwczovL3BvcHBpbmctZmlyZS04OTcuZmlyZWJhc2VhcHAuY29tLycsXG4gICAgICAgICAgICBkaWN0OiB7XG4gICAgICAgICAgICAgICAgc2lnbmluOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTGluayB3aXRoIGFub3RoZXIgYWNjb3VudCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXV0aFBhcmFtczoge1xuICAgICAgICAgICAgICAgIGFjY2Vzc190b2tlbjogdGhhdC5pZF90b2tlbiB8fCB0aGF0LnByb2ZpbGUuaWRlbnRpdGllc1swXS5hY2Nlc3NfdG9rZW5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0U2Vzc2lvbigpIHtcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICBsZXQgZ2V0UHJvZmlsZSA9IChpZF90b2tlbiwgZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhhdC5sb2NrLmdldFByb2ZpbGUoaWRfdG9rZW4sIGZ1bmN0aW9uKGVyciwgcHJvZmlsZSkge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxmb3JhZ2Uuc2V0SXRlbSgnaWRfdG9rZW4nLCBpZF90b2tlbik7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ3Byb2ZpbGUnLCBwcm9maWxlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5pZF90b2tlbiA9IGlkX3Rva2VuO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnByb2ZpbGUgPSBwcm9maWxlO1xuICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKHByb2ZpbGUsIGlkX3Rva2VuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGxldCBmdWxmaWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGxvY2FsZm9yYWdlLmdldEl0ZW0oJ3JlZnJlc2hfdG9rZW4nKS50aGVuKCh0b2tlbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnJlZnJlc2hfdG9rZW4gPSB0b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5sb2NrLmdldENsaWVudCgpLnJlZnJlc2hUb2tlbih0b2tlbiwgKGEsIHRva09iaikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UHJvZmlsZSh0b2tPYmouaWRfdG9rZW4sIGZ1bGZpbGwsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxmb3JhZ2UuZ2V0SXRlbSgnaWRfdG9rZW4nKS50aGVuKChpZF90b2tlbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UHJvZmlsZShpZF90b2tlbiwgZnVsZmlsbCwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgbG9nb3V0KCkge1xuICAgICAgICBsb2NhbGZvcmFnZS5yZW1vdmVJdGVtKCdpZF90b2tlbicpO1xuICAgICAgICBsb2NhbGZvcmFnZS5yZW1vdmVJdGVtKCdyZWZyZXNoX3Rva2VuJyk7XG4gICAgICAgIGxvY2FsZm9yYWdlLnJlbW92ZUl0ZW0oJ3Byb2ZpbGUnKTtcbiAgICAgICAgdGhpcy5wcm9maWxlID0gbnVsbDtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gQXV0aDA7XG5cblxuIiwibGV0IEZpcmViYXNlID0gcmVxdWlyZSgnZmlyZWJhc2UnKTtcblxuY2xhc3MgTWV0YUZpcmUge1xuXG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgICB0aGlzLmZiID0gbmV3IEZpcmViYXNlKFwiaHR0cHM6Ly9wb3BwaW5nLWZpcmUtODk3LmZpcmViYXNlaW8uY29tXCIpO1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgbGV0IHJldCA9IG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGxvY2FsZm9yYWdlLmdldEl0ZW0oJ2lkX3Rva2VuJykudGhlbigoaWRfdG9rZW4pID0+IHtcbiAgICAgICAgICAgICAgICBNZXRhTWFwLkF1dGgwLmdldFNlc3Npb24oKS50aGVuKChwcm9maWxlKSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgTWV0YU1hcC5BdXRoMC5sb2NrLmdldENsaWVudCgpLmdldERlbGVnYXRpb25Ub2tlbih7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHByb2ZpbGUuY2xpZW50SUQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZF90b2tlbjogaWRfdG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlfdHlwZTogJ2ZpcmViYXNlJ1xuICAgICAgICAgICAgICAgICAgICB9LCAoZXJyLCBkZWxlZ2F0aW9uUmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmZpcmViYXNlX3Rva2VuID0gZGVsZWdhdGlvblJlc3VsdC5pZF90b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ2ZpcmViYXNlX3Rva2VuJywgdGhhdC5maXJlYmFzZV90b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZiLmF1dGhXaXRoQ3VzdG9tVG9rZW4odGhhdC5maXJlYmFzZV90b2tlbiwgKGVycm9yLCBhdXRoRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoYXV0aERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgZ2V0Q2hpbGQocGF0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mYi5jaGlsZChwYXRoKTtcbiAgICB9XG5cbiAgICBnZXREYXRhIChwYXRoKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IHRoaXMuZmI7XG4gICAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgICAgICBjaGlsZCA9IHRoaXMuZ2V0Q2hpbGQocGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY2hpbGQub24oJ3ZhbHVlJyxcbiAgICAgICAgICAgICAgICAoc25hcHNob3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShzbmFwc2hvdC52YWwoKSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgc2V0RGF0YSAoZGF0YSwgcGF0aCkge1xuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmZiO1xuICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgY2hpbGQgPSB0aGlzLmdldENoaWxkKHBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGlsZC5zZXQoZGF0YSk7XG4gICAgfVxuXG4gICAgbG9nb3V0ICgpIHtcbiAgICAgICAgdGhpcy5mYi51bmF1dGgoKTtcbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IE1ldGFGaXJlO1xuXG5cbiIsIlxudmFyIGdvb2dsZUFuYWx5dGljcyA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgIHZhciBhcGlLZXksIGUsIHI7XG4gICAgaWYgKGNvbmZpZyA9PSBudWxsKSB7XHJcbiAgICAgICAgY29uZmlnID0ge307XHJcbiAgICB9XG4gICAgYXBpS2V5ID0gY29uZmlnLkdPT0dMRV9BTkFMWVRJQ1NfVFJBQ0tJTkdfSUQ7XG4gICAgaWYgKGFwaUtleSAmJiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgIT09ICdsb2NhbGhvc3QnKSB7XHJcbiAgICAgICAgd2luZG93Lkdvb2dsZUFuYWx5dGljc09iamVjdCA9ICdnYSc7XG4gICAgICAgIHdpbmRvdy5nYSB8fCAod2luZG93LmdhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAod2luZG93LmdhLnEgPSB3aW5kb3cuZ2EucSB8fCBbXSkucHVzaChhcmd1bWVudHMpO1xyXG4gICAgICAgIH0pO1xuICAgICAgICB3aW5kb3cuZ2EuZ2EgPSArKG5ldyBEYXRlKTtcbiAgICAgICAgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICByID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuICAgICAgICBlLnNyYyA9ICcvL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS9hbmFseXRpY3MuanMnO1xuICAgICAgICByLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsIHIpO1xuICAgICAgICBnYSgnY3JlYXRlJywgYXBpS2V5KTtcbiAgICAgICAgcmV0dXJuIGdhKCdzZW5kJywgJ3BhZ2V2aWV3Jyk7XHJcbiAgICB9XHJcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZ29vZ2xlQW5hbHl0aWNzO1xuXG5cbiIsIlxudmFyIG5ld1JlbGljID0gZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgdmFyIGFwcElkLCBsaWNlbnNlS2V5O1xuICAgIGlmIChjb25maWcgPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbmZpZyA9IHt9O1xyXG4gICAgfVxuICAgIGxpY2Vuc2VLZXkgPSBjb25maWcuTkVXX1JFTElDX0xJQ0VOU0VfS0VZO1xuICAgIGFwcElkID0gY29uZmlnLk5FV19SRUxJQ19BUFBMSUNBVElPTl9JRDtcbiAgICBpZiAobGljZW5zZUtleSAmJiBhcHBJZCAmJiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgIT09ICdsb2NhbGhvc3QnKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5OUkVVTSB8fCAoTlJFVU0gPSB7fSksIF9fbnJfcmVxdWlyZSA9IGZ1bmN0aW9uICh0LCBlLCBuKSB7IGZ1bmN0aW9uIHIobikgeyBpZiAoIWVbbl0pIHsgdmFyIG8gPSBlW25dID0geyBleHBvcnRzOiB7fSB9OyB0W25dWzBdLmNhbGwoby5leHBvcnRzLCBmdW5jdGlvbiAoZSkgeyB2YXIgbyA9IHRbbl1bMV1bZV07IHJldHVybiByKG8gPyBvIDogZSkgfSwgbywgby5leHBvcnRzKSB9IHJldHVybiBlW25dLmV4cG9ydHMgfSBpZiAoXCJmdW5jdGlvblwiID09IHR5cGVvZiBfX25yX3JlcXVpcmUpIHJldHVybiBfX25yX3JlcXVpcmU7IGZvciAodmFyIG8gPSAwOyBvIDwgbi5sZW5ndGg7IG8rKykgcihuW29dKTsgcmV0dXJuIHIgfSh7IFFKZjNheDogW2Z1bmN0aW9uICh0LCBlKSB7IGZ1bmN0aW9uIG4odCkgeyBmdW5jdGlvbiBlKGUsIG4sIGEpIHsgdCAmJiB0KGUsIG4sIGEpLCBhIHx8IChhID0ge30pOyBmb3IgKHZhciBjID0gcyhlKSwgZiA9IGMubGVuZ3RoLCB1ID0gaShhLCBvLCByKSwgZCA9IDA7IGYgPiBkOyBkKyspIGNbZF0uYXBwbHkodSwgbik7IHJldHVybiB1IH0gZnVuY3Rpb24gYSh0LCBlKSB7IGZbdF0gPSBzKHQpLmNvbmNhdChlKSB9IGZ1bmN0aW9uIHModCkgeyByZXR1cm4gZlt0XSB8fCBbXSB9IGZ1bmN0aW9uIGMoKSB7IHJldHVybiBuKGUpIH0gdmFyIGYgPSB7fTsgcmV0dXJuIHsgb246IGEsIGVtaXQ6IGUsIGNyZWF0ZTogYywgbGlzdGVuZXJzOiBzLCBfZXZlbnRzOiBmIH0gfSBmdW5jdGlvbiByKCkgeyByZXR1cm4ge30gfSB2YXIgbyA9IFwibnJAY29udGV4dFwiLCBpID0gdChcImdvc1wiKTsgZS5leHBvcnRzID0gbigpIH0sIHsgZ29zOiBcIjdlU0RGaFwiIH1dLCBlZTogW2Z1bmN0aW9uICh0LCBlKSB7IGUuZXhwb3J0cyA9IHQoXCJRSmYzYXhcIikgfSwge31dLCAzOiBbZnVuY3Rpb24gKHQpIHsgZnVuY3Rpb24gZSh0LCBlLCBuLCBpLCBzKSB7IHRyeSB7IGMgPyBjIC09IDEgOiByKFwiZXJyXCIsIFtzIHx8IG5ldyBVbmNhdWdodEV4Y2VwdGlvbih0LCBlLCBuKV0pIH0gY2F0Y2ggKGYpIHsgdHJ5IHsgcihcImllcnJcIiwgW2YsIChuZXcgRGF0ZSkuZ2V0VGltZSgpLCAhMF0pIH0gY2F0Y2ggKHUpIHsgfSB9IHJldHVybiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGEgPyBhLmFwcGx5KHRoaXMsIG8oYXJndW1lbnRzKSkgOiAhMSB9IGZ1bmN0aW9uIFVuY2F1Z2h0RXhjZXB0aW9uKHQsIGUsIG4pIHsgdGhpcy5tZXNzYWdlID0gdCB8fCBcIlVuY2F1Z2h0IGVycm9yIHdpdGggbm8gYWRkaXRpb25hbCBpbmZvcm1hdGlvblwiLCB0aGlzLnNvdXJjZVVSTCA9IGUsIHRoaXMubGluZSA9IG4gfSBmdW5jdGlvbiBuKHQpIHsgcihcImVyclwiLCBbdCwgKG5ldyBEYXRlKS5nZXRUaW1lKCldKSB9IHZhciByID0gdChcImhhbmRsZVwiKSwgbyA9IHQoNSksIGkgPSB0KFwiZWVcIiksIGEgPSB3aW5kb3cub25lcnJvciwgcyA9ICExLCBjID0gMDsgdChcImxvYWRlclwiKS5mZWF0dXJlcy5lcnIgPSAhMCwgd2luZG93Lm9uZXJyb3IgPSBlLCBOUkVVTS5ub3RpY2VFcnJvciA9IG47IHRyeSB7IHRocm93IG5ldyBFcnJvciB9IGNhdGNoIChmKSB7IFwic3RhY2tcIiBpbiBmICYmICh0KDEpLCB0KDQpLCBcImFkZEV2ZW50TGlzdGVuZXJcIiBpbiB3aW5kb3cgJiYgdCgyKSwgd2luZG93LlhNTEh0dHBSZXF1ZXN0ICYmIFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZSAmJiBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciAmJiB0KDMpLCBzID0gITApIH0gaS5vbihcImZuLXN0YXJ0XCIsIGZ1bmN0aW9uICgpIHsgcyAmJiAoYyArPSAxKSB9KSwgaS5vbihcImZuLWVyclwiLCBmdW5jdGlvbiAodCwgZSwgcikgeyBzICYmICh0aGlzLnRocm93biA9ICEwLCBuKHIpKSB9KSwgaS5vbihcImZuLWVuZFwiLCBmdW5jdGlvbiAoKSB7IHMgJiYgIXRoaXMudGhyb3duICYmIGMgPiAwICYmIChjIC09IDEpIH0pLCBpLm9uKFwiaW50ZXJuYWwtZXJyb3JcIiwgZnVuY3Rpb24gKHQpIHsgcihcImllcnJcIiwgW3QsIChuZXcgRGF0ZSkuZ2V0VGltZSgpLCAhMF0pIH0pIH0sIHsgMTogOCwgMjogNSwgMzogOSwgNDogNywgNTogMjEsIGVlOiBcIlFKZjNheFwiLCBoYW5kbGU6IFwiRDVEdUxQXCIsIGxvYWRlcjogXCJHOXowQmxcIiB9XSwgNDogW2Z1bmN0aW9uICh0KSB7IGZ1bmN0aW9uIGUoKSB7IH0gaWYgKHdpbmRvdy5wZXJmb3JtYW5jZSAmJiB3aW5kb3cucGVyZm9ybWFuY2UudGltaW5nICYmIHdpbmRvdy5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKSB7IHZhciBuID0gdChcImVlXCIpLCByID0gdChcImhhbmRsZVwiKSwgbyA9IHQoMik7IHQoXCJsb2FkZXJcIikuZmVhdHVyZXMuc3RuID0gITAsIHQoMSksIG4ub24oXCJmbi1zdGFydFwiLCBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IHRbMF07IGUgaW5zdGFuY2VvZiBFdmVudCAmJiAodGhpcy5ic3RTdGFydCA9IERhdGUubm93KCkpIH0pLCBuLm9uKFwiZm4tZW5kXCIsIGZ1bmN0aW9uICh0LCBlKSB7IHZhciBuID0gdFswXTsgbiBpbnN0YW5jZW9mIEV2ZW50ICYmIHIoXCJic3RcIiwgW24sIGUsIHRoaXMuYnN0U3RhcnQsIERhdGUubm93KCldKSB9KSwgby5vbihcImZuLXN0YXJ0XCIsIGZ1bmN0aW9uICh0LCBlLCBuKSB7IHRoaXMuYnN0U3RhcnQgPSBEYXRlLm5vdygpLCB0aGlzLmJzdFR5cGUgPSBuIH0pLCBvLm9uKFwiZm4tZW5kXCIsIGZ1bmN0aW9uICh0LCBlKSB7IHIoXCJic3RUaW1lclwiLCBbZSwgdGhpcy5ic3RTdGFydCwgRGF0ZS5ub3coKSwgdGhpcy5ic3RUeXBlXSkgfSksIG4ub24oXCJwdXNoU3RhdGUtc3RhcnRcIiwgZnVuY3Rpb24gKCkgeyB0aGlzLnRpbWUgPSBEYXRlLm5vdygpLCB0aGlzLnN0YXJ0UGF0aCA9IGxvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uaGFzaCB9KSwgbi5vbihcInB1c2hTdGF0ZS1lbmRcIiwgZnVuY3Rpb24gKCkgeyByKFwiYnN0SGlzdFwiLCBbbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5oYXNoLCB0aGlzLnN0YXJ0UGF0aCwgdGhpcy50aW1lXSkgfSksIFwiYWRkRXZlbnRMaXN0ZW5lclwiIGluIHdpbmRvdy5wZXJmb3JtYW5jZSAmJiAod2luZG93LnBlcmZvcm1hbmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRyZXNvdXJjZXRpbWluZ2J1ZmZlcmZ1bGxcIiwgZnVuY3Rpb24gKCkgeyByKFwiYnN0UmVzb3VyY2VcIiwgW3dpbmRvdy5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwicmVzb3VyY2VcIildKSwgd2luZG93LnBlcmZvcm1hbmNlLndlYmtpdENsZWFyUmVzb3VyY2VUaW1pbmdzKCkgfSwgITEpLCB3aW5kb3cucGVyZm9ybWFuY2UuYWRkRXZlbnRMaXN0ZW5lcihcInJlc291cmNldGltaW5nYnVmZmVyZnVsbFwiLCBmdW5jdGlvbiAoKSB7IHIoXCJic3RSZXNvdXJjZVwiLCBbd2luZG93LnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJyZXNvdXJjZVwiKV0pLCB3aW5kb3cucGVyZm9ybWFuY2UuY2xlYXJSZXNvdXJjZVRpbWluZ3MoKSB9LCAhMSkpLCBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGUsICExKSwgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIsIGUsICExKSwgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUsICExKSB9IH0sIHsgMTogNiwgMjogOCwgZWU6IFwiUUpmM2F4XCIsIGhhbmRsZTogXCJENUR1TFBcIiwgbG9hZGVyOiBcIkc5ejBCbFwiIH1dLCA1OiBbZnVuY3Rpb24gKHQsIGUpIHsgZnVuY3Rpb24gbih0KSB7IGkuaW5QbGFjZSh0LCBbXCJhZGRFdmVudExpc3RlbmVyXCIsIFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiXSwgXCItXCIsIHIpIH0gZnVuY3Rpb24gcih0KSB7IHJldHVybiB0WzFdIH0gdmFyIG8gPSAodCgxKSwgdChcImVlXCIpLmNyZWF0ZSgpKSwgaSA9IHQoMikobyksIGEgPSB0KFwiZ29zXCIpOyBpZiAoZS5leHBvcnRzID0gbywgbih3aW5kb3cpLCBcImdldFByb3RvdHlwZU9mXCIgaW4gT2JqZWN0KSB7IGZvciAodmFyIHMgPSBkb2N1bWVudDsgcyAmJiAhcy5oYXNPd25Qcm9wZXJ0eShcImFkZEV2ZW50TGlzdGVuZXJcIikgOykgcyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihzKTsgcyAmJiBuKHMpOyBmb3IgKHZhciBjID0gWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlOyBjICYmICFjLmhhc093blByb3BlcnR5KFwiYWRkRXZlbnRMaXN0ZW5lclwiKSA7KSBjID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGMpOyBjICYmIG4oYykgfSBlbHNlIFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShcImFkZEV2ZW50TGlzdGVuZXJcIikgJiYgbihYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUpOyBvLm9uKFwiYWRkRXZlbnRMaXN0ZW5lci1zdGFydFwiLCBmdW5jdGlvbiAodCkgeyBpZiAodFsxXSkgeyB2YXIgZSA9IHRbMV07IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZSA/IHRoaXMud3JhcHBlZCA9IHRbMV0gPSBhKGUsIFwibnJAd3JhcHBlZFwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBpKGUsIFwiZm4tXCIsIG51bGwsIGUubmFtZSB8fCBcImFub255bW91c1wiKSB9KSA6IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZS5oYW5kbGVFdmVudCAmJiBpLmluUGxhY2UoZSwgW1wiaGFuZGxlRXZlbnRcIl0sIFwiZm4tXCIpIH0gfSksIG8ub24oXCJyZW1vdmVFdmVudExpc3RlbmVyLXN0YXJ0XCIsIGZ1bmN0aW9uICh0KSB7IHZhciBlID0gdGhpcy53cmFwcGVkOyBlICYmICh0WzFdID0gZSkgfSkgfSwgeyAxOiAyMSwgMjogMjIsIGVlOiBcIlFKZjNheFwiLCBnb3M6IFwiN2VTREZoXCIgfV0sIDY6IFtmdW5jdGlvbiAodCwgZSkgeyB2YXIgbiA9ICh0KDIpLCB0KFwiZWVcIikuY3JlYXRlKCkpLCByID0gdCgxKShuKTsgZS5leHBvcnRzID0gbiwgci5pblBsYWNlKHdpbmRvdy5oaXN0b3J5LCBbXCJwdXNoU3RhdGVcIl0sIFwiLVwiKSB9LCB7IDE6IDIyLCAyOiAyMSwgZWU6IFwiUUpmM2F4XCIgfV0sIDc6IFtmdW5jdGlvbiAodCwgZSkgeyB2YXIgbiA9ICh0KDIpLCB0KFwiZWVcIikuY3JlYXRlKCkpLCByID0gdCgxKShuKTsgZS5leHBvcnRzID0gbiwgci5pblBsYWNlKHdpbmRvdywgW1wicmVxdWVzdEFuaW1hdGlvbkZyYW1lXCIsIFwibW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lXCIsIFwid2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lXCIsIFwibXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl0sIFwicmFmLVwiKSwgbi5vbihcInJhZi1zdGFydFwiLCBmdW5jdGlvbiAodCkgeyB0WzBdID0gcih0WzBdLCBcImZuLVwiKSB9KSB9LCB7IDE6IDIyLCAyOiAyMSwgZWU6IFwiUUpmM2F4XCIgfV0sIDg6IFtmdW5jdGlvbiAodCwgZSkgeyBmdW5jdGlvbiBuKHQsIGUsIG4pIHsgdmFyIHIgPSB0WzBdOyBcInN0cmluZ1wiID09IHR5cGVvZiByICYmIChyID0gbmV3IEZ1bmN0aW9uKHIpKSwgdFswXSA9IG8ociwgXCJmbi1cIiwgbnVsbCwgbikgfSB2YXIgciA9ICh0KDIpLCB0KFwiZWVcIikuY3JlYXRlKCkpLCBvID0gdCgxKShyKTsgZS5leHBvcnRzID0gciwgby5pblBsYWNlKHdpbmRvdywgW1wic2V0VGltZW91dFwiLCBcInNldEludGVydmFsXCIsIFwic2V0SW1tZWRpYXRlXCJdLCBcInNldFRpbWVyLVwiKSwgci5vbihcInNldFRpbWVyLXN0YXJ0XCIsIG4pIH0sIHsgMTogMjIsIDI6IDIxLCBlZTogXCJRSmYzYXhcIiB9XSwgOTogW2Z1bmN0aW9uICh0LCBlKSB7IGZ1bmN0aW9uIG4oKSB7IGMuaW5QbGFjZSh0aGlzLCBkLCBcImZuLVwiKSB9IGZ1bmN0aW9uIHIodCwgZSkgeyBjLmluUGxhY2UoZSwgW1wib25yZWFkeXN0YXRlY2hhbmdlXCJdLCBcImZuLVwiKSB9IGZ1bmN0aW9uIG8odCwgZSkgeyByZXR1cm4gZSB9IHZhciBpID0gdChcImVlXCIpLmNyZWF0ZSgpLCBhID0gdCgxKSwgcyA9IHQoMiksIGMgPSBzKGkpLCBmID0gcyhhKSwgdSA9IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCwgZCA9IFtcIm9ubG9hZFwiLCBcIm9uZXJyb3JcIiwgXCJvbmFib3J0XCIsIFwib25sb2Fkc3RhcnRcIiwgXCJvbmxvYWRlbmRcIiwgXCJvbnByb2dyZXNzXCIsIFwib250aW1lb3V0XCJdOyBlLmV4cG9ydHMgPSBpLCB3aW5kb3cuWE1MSHR0cFJlcXVlc3QgPSBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IG5ldyB1KHQpOyB0cnkgeyBpLmVtaXQoXCJuZXcteGhyXCIsIFtdLCBlKSwgZi5pblBsYWNlKGUsIFtcImFkZEV2ZW50TGlzdGVuZXJcIiwgXCJyZW1vdmVFdmVudExpc3RlbmVyXCJdLCBcIi1cIiwgZnVuY3Rpb24gKHQsIGUpIHsgcmV0dXJuIGUgfSksIGUuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIiwgbiwgITEpIH0gY2F0Y2ggKHIpIHsgdHJ5IHsgaS5lbWl0KFwiaW50ZXJuYWwtZXJyb3JcIiwgW3JdKSB9IGNhdGNoIChvKSB7IH0gfSByZXR1cm4gZSB9LCB3aW5kb3cuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlID0gdS5wcm90b3R5cGUsIGMuaW5QbGFjZShYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUsIFtcIm9wZW5cIiwgXCJzZW5kXCJdLCBcIi14aHItXCIsIG8pLCBpLm9uKFwic2VuZC14aHItc3RhcnRcIiwgciksIGkub24oXCJvcGVuLXhoci1zdGFydFwiLCByKSB9LCB7IDE6IDUsIDI6IDIyLCBlZTogXCJRSmYzYXhcIiB9XSwgMTA6IFtmdW5jdGlvbiAodCkgeyBmdW5jdGlvbiBlKHQpIHsgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgJiYgdC5sZW5ndGgpIHJldHVybiB0Lmxlbmd0aDsgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQpIHJldHVybiB2b2lkIDA7IGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBBcnJheUJ1ZmZlciAmJiB0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgJiYgdC5ieXRlTGVuZ3RoKSByZXR1cm4gdC5ieXRlTGVuZ3RoOyBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgQmxvYiAmJiB0IGluc3RhbmNlb2YgQmxvYiAmJiB0LnNpemUpIHJldHVybiB0LnNpemU7IGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBGb3JtRGF0YSAmJiB0IGluc3RhbmNlb2YgRm9ybURhdGEpIHJldHVybiB2b2lkIDA7IHRyeSB7IHJldHVybiBKU09OLnN0cmluZ2lmeSh0KS5sZW5ndGggfSBjYXRjaCAoZSkgeyByZXR1cm4gdm9pZCAwIH0gfSBmdW5jdGlvbiBuKHQpIHsgdmFyIG4gPSB0aGlzLnBhcmFtcywgciA9IHRoaXMubWV0cmljczsgaWYgKCF0aGlzLmVuZGVkKSB7IHRoaXMuZW5kZWQgPSAhMDsgZm9yICh2YXIgaSA9IDA7IGMgPiBpOyBpKyspIHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihzW2ldLCB0aGlzLmxpc3RlbmVyLCAhMSk7IGlmICghbi5hYm9ydGVkKSB7IGlmIChyLmR1cmF0aW9uID0gKG5ldyBEYXRlKS5nZXRUaW1lKCkgLSB0aGlzLnN0YXJ0VGltZSwgNCA9PT0gdC5yZWFkeVN0YXRlKSB7IG4uc3RhdHVzID0gdC5zdGF0dXM7IHZhciBhID0gdC5yZXNwb25zZVR5cGUsIGYgPSBcImFycmF5YnVmZmVyXCIgPT09IGEgfHwgXCJibG9iXCIgPT09IGEgfHwgXCJqc29uXCIgPT09IGEgPyB0LnJlc3BvbnNlIDogdC5yZXNwb25zZVRleHQsIHUgPSBlKGYpOyBpZiAodSAmJiAoci5yeFNpemUgPSB1KSwgdGhpcy5zYW1lT3JpZ2luKSB7IHZhciBkID0gdC5nZXRSZXNwb25zZUhlYWRlcihcIlgtTmV3UmVsaWMtQXBwLURhdGFcIik7IGQgJiYgKG4uY2F0ID0gZC5zcGxpdChcIiwgXCIpLnBvcCgpKSB9IH0gZWxzZSBuLnN0YXR1cyA9IDA7IHIuY2JUaW1lID0gdGhpcy5jYlRpbWUsIG8oXCJ4aHJcIiwgW24sIHIsIHRoaXMuc3RhcnRUaW1lXSkgfSB9IH0gZnVuY3Rpb24gcih0LCBlKSB7IHZhciBuID0gaShlKSwgciA9IHQucGFyYW1zOyByLmhvc3QgPSBuLmhvc3RuYW1lICsgXCI6XCIgKyBuLnBvcnQsIHIucGF0aG5hbWUgPSBuLnBhdGhuYW1lLCB0LnNhbWVPcmlnaW4gPSBuLnNhbWVPcmlnaW4gfSBpZiAod2luZG93LlhNTEh0dHBSZXF1ZXN0ICYmIFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZSAmJiBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciAmJiAhL0NyaU9TLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7IHQoXCJsb2FkZXJcIikuZmVhdHVyZXMueGhyID0gITA7IHZhciBvID0gdChcImhhbmRsZVwiKSwgaSA9IHQoMiksIGEgPSB0KFwiZWVcIiksIHMgPSBbXCJsb2FkXCIsIFwiZXJyb3JcIiwgXCJhYm9ydFwiLCBcInRpbWVvdXRcIl0sIGMgPSBzLmxlbmd0aCwgZiA9IHQoMSk7IHQoNCksIHQoMyksIGEub24oXCJuZXcteGhyXCIsIGZ1bmN0aW9uICgpIHsgdGhpcy50b3RhbENicyA9IDAsIHRoaXMuY2FsbGVkID0gMCwgdGhpcy5jYlRpbWUgPSAwLCB0aGlzLmVuZCA9IG4sIHRoaXMuZW5kZWQgPSAhMSwgdGhpcy54aHJHdWlkcyA9IHt9IH0pLCBhLm9uKFwib3Blbi14aHItc3RhcnRcIiwgZnVuY3Rpb24gKHQpIHsgdGhpcy5wYXJhbXMgPSB7IG1ldGhvZDogdFswXSB9LCByKHRoaXMsIHRbMV0pLCB0aGlzLm1ldHJpY3MgPSB7fSB9KSwgYS5vbihcIm9wZW4teGhyLWVuZFwiLCBmdW5jdGlvbiAodCwgZSkgeyBcImxvYWRlcl9jb25maWdcIiBpbiBOUkVVTSAmJiBcInhwaWRcIiBpbiBOUkVVTS5sb2FkZXJfY29uZmlnICYmIHRoaXMuc2FtZU9yaWdpbiAmJiBlLnNldFJlcXVlc3RIZWFkZXIoXCJYLU5ld1JlbGljLUlEXCIsIE5SRVVNLmxvYWRlcl9jb25maWcueHBpZCkgfSksIGEub24oXCJzZW5kLXhoci1zdGFydFwiLCBmdW5jdGlvbiAodCwgbikgeyB2YXIgciA9IHRoaXMubWV0cmljcywgbyA9IHRbMF0sIGkgPSB0aGlzOyBpZiAociAmJiBvKSB7IHZhciBmID0gZShvKTsgZiAmJiAoci50eFNpemUgPSBmKSB9IHRoaXMuc3RhcnRUaW1lID0gKG5ldyBEYXRlKS5nZXRUaW1lKCksIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAodCkgeyB0cnkgeyBcImFib3J0XCIgPT09IHQudHlwZSAmJiAoaS5wYXJhbXMuYWJvcnRlZCA9ICEwKSwgKFwibG9hZFwiICE9PSB0LnR5cGUgfHwgaS5jYWxsZWQgPT09IGkudG90YWxDYnMgJiYgKGkub25sb2FkQ2FsbGVkIHx8IFwiZnVuY3Rpb25cIiAhPSB0eXBlb2Ygbi5vbmxvYWQpKSAmJiBpLmVuZChuKSB9IGNhdGNoIChlKSB7IHRyeSB7IGEuZW1pdChcImludGVybmFsLWVycm9yXCIsIFtlXSkgfSBjYXRjaCAocikgeyB9IH0gfTsgZm9yICh2YXIgdSA9IDA7IGMgPiB1OyB1KyspIG4uYWRkRXZlbnRMaXN0ZW5lcihzW3VdLCB0aGlzLmxpc3RlbmVyLCAhMSkgfSksIGEub24oXCJ4aHItY2ItdGltZVwiLCBmdW5jdGlvbiAodCwgZSwgbikgeyB0aGlzLmNiVGltZSArPSB0LCBlID8gdGhpcy5vbmxvYWRDYWxsZWQgPSAhMCA6IHRoaXMuY2FsbGVkICs9IDEsIHRoaXMuY2FsbGVkICE9PSB0aGlzLnRvdGFsQ2JzIHx8ICF0aGlzLm9ubG9hZENhbGxlZCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG4ub25sb2FkIHx8IHRoaXMuZW5kKG4pIH0pLCBhLm9uKFwieGhyLWxvYWQtYWRkZWRcIiwgZnVuY3Rpb24gKHQsIGUpIHsgdmFyIG4gPSBcIlwiICsgZih0KSArICEhZTsgdGhpcy54aHJHdWlkcyAmJiAhdGhpcy54aHJHdWlkc1tuXSAmJiAodGhpcy54aHJHdWlkc1tuXSA9ICEwLCB0aGlzLnRvdGFsQ2JzICs9IDEpIH0pLCBhLm9uKFwieGhyLWxvYWQtcmVtb3ZlZFwiLCBmdW5jdGlvbiAodCwgZSkgeyB2YXIgbiA9IFwiXCIgKyBmKHQpICsgISFlOyB0aGlzLnhockd1aWRzICYmIHRoaXMueGhyR3VpZHNbbl0gJiYgKGRlbGV0ZSB0aGlzLnhockd1aWRzW25dLCB0aGlzLnRvdGFsQ2JzIC09IDEpIH0pLCBhLm9uKFwiYWRkRXZlbnRMaXN0ZW5lci1lbmRcIiwgZnVuY3Rpb24gKHQsIGUpIHsgZSBpbnN0YW5jZW9mIFhNTEh0dHBSZXF1ZXN0ICYmIFwibG9hZFwiID09PSB0WzBdICYmIGEuZW1pdChcInhoci1sb2FkLWFkZGVkXCIsIFt0WzFdLCB0WzJdXSwgZSkgfSksIGEub24oXCJyZW1vdmVFdmVudExpc3RlbmVyLWVuZFwiLCBmdW5jdGlvbiAodCwgZSkgeyBlIGluc3RhbmNlb2YgWE1MSHR0cFJlcXVlc3QgJiYgXCJsb2FkXCIgPT09IHRbMF0gJiYgYS5lbWl0KFwieGhyLWxvYWQtcmVtb3ZlZFwiLCBbdFsxXSwgdFsyXV0sIGUpIH0pLCBhLm9uKFwiZm4tc3RhcnRcIiwgZnVuY3Rpb24gKHQsIGUsIG4pIHsgZSBpbnN0YW5jZW9mIFhNTEh0dHBSZXF1ZXN0ICYmIChcIm9ubG9hZFwiID09PSBuICYmICh0aGlzLm9ubG9hZCA9ICEwKSwgKFwibG9hZFwiID09PSAodFswXSAmJiB0WzBdLnR5cGUpIHx8IHRoaXMub25sb2FkKSAmJiAodGhpcy54aHJDYlN0YXJ0ID0gKG5ldyBEYXRlKS5nZXRUaW1lKCkpKSB9KSwgYS5vbihcImZuLWVuZFwiLCBmdW5jdGlvbiAodCwgZSkgeyB0aGlzLnhockNiU3RhcnQgJiYgYS5lbWl0KFwieGhyLWNiLXRpbWVcIiwgWyhuZXcgRGF0ZSkuZ2V0VGltZSgpIC0gdGhpcy54aHJDYlN0YXJ0LCB0aGlzLm9ubG9hZCwgZV0sIGUpIH0pIH0gfSwgeyAxOiBcIlhMN0hCSVwiLCAyOiAxMSwgMzogOSwgNDogNSwgZWU6IFwiUUpmM2F4XCIsIGhhbmRsZTogXCJENUR1TFBcIiwgbG9hZGVyOiBcIkc5ejBCbFwiIH1dLCAxMTogW2Z1bmN0aW9uICh0LCBlKSB7IGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIiksIG4gPSB3aW5kb3cubG9jYXRpb24sIHIgPSB7fTsgZS5ocmVmID0gdCwgci5wb3J0ID0gZS5wb3J0OyB2YXIgbyA9IGUuaHJlZi5zcGxpdChcIjovL1wiKTsgcmV0dXJuICFyLnBvcnQgJiYgb1sxXSAmJiAoci5wb3J0ID0gb1sxXS5zcGxpdChcIi9cIilbMF0uc3BsaXQoXCJAXCIpLnBvcCgpLnNwbGl0KFwiOlwiKVsxXSksIHIucG9ydCAmJiBcIjBcIiAhPT0gci5wb3J0IHx8IChyLnBvcnQgPSBcImh0dHBzXCIgPT09IG9bMF0gPyBcIjQ0M1wiIDogXCI4MFwiKSwgci5ob3N0bmFtZSA9IGUuaG9zdG5hbWUgfHwgbi5ob3N0bmFtZSwgci5wYXRobmFtZSA9IGUucGF0aG5hbWUsIHIucHJvdG9jb2wgPSBvWzBdLCBcIi9cIiAhPT0gci5wYXRobmFtZS5jaGFyQXQoMCkgJiYgKHIucGF0aG5hbWUgPSBcIi9cIiArIHIucGF0aG5hbWUpLCByLnNhbWVPcmlnaW4gPSAhZS5ob3N0bmFtZSB8fCBlLmhvc3RuYW1lID09PSBkb2N1bWVudC5kb21haW4gJiYgZS5wb3J0ID09PSBuLnBvcnQgJiYgZS5wcm90b2NvbCA9PT0gbi5wcm90b2NvbCwgciB9IH0sIHt9XSwgZ29zOiBbZnVuY3Rpb24gKHQsIGUpIHsgZS5leHBvcnRzID0gdChcIjdlU0RGaFwiKSB9LCB7fV0sIFwiN2VTREZoXCI6IFtmdW5jdGlvbiAodCwgZSkgeyBmdW5jdGlvbiBuKHQsIGUsIG4pIHsgaWYgKHIuY2FsbCh0LCBlKSkgcmV0dXJuIHRbZV07IHZhciBvID0gbigpOyBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5rZXlzKSB0cnkgeyByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIGUsIHsgdmFsdWU6IG8sIHdyaXRhYmxlOiAhMCwgZW51bWVyYWJsZTogITEgfSksIG8gfSBjYXRjaCAoaSkgeyB9IHJldHVybiB0W2VdID0gbywgbyB9IHZhciByID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTsgZS5leHBvcnRzID0gbiB9LCB7fV0sIEQ1RHVMUDogW2Z1bmN0aW9uICh0LCBlKSB7IGZ1bmN0aW9uIG4odCwgZSwgbikgeyByZXR1cm4gci5saXN0ZW5lcnModCkubGVuZ3RoID8gci5lbWl0KHQsIGUsIG4pIDogKG9bdF0gfHwgKG9bdF0gPSBbXSksIHZvaWQgb1t0XS5wdXNoKGUpKSB9IHZhciByID0gdChcImVlXCIpLmNyZWF0ZSgpLCBvID0ge307IGUuZXhwb3J0cyA9IG4sIG4uZWUgPSByLCByLnEgPSBvIH0sIHsgZWU6IFwiUUpmM2F4XCIgfV0sIGhhbmRsZTogW2Z1bmN0aW9uICh0LCBlKSB7IGUuZXhwb3J0cyA9IHQoXCJENUR1TFBcIikgfSwge31dLCBYTDdIQkk6IFtmdW5jdGlvbiAodCwgZSkgeyBmdW5jdGlvbiBuKHQpIHsgdmFyIGUgPSB0eXBlb2YgdDsgcmV0dXJuICF0IHx8IFwib2JqZWN0XCIgIT09IGUgJiYgXCJmdW5jdGlvblwiICE9PSBlID8gLTEgOiB0ID09PSB3aW5kb3cgPyAwIDogaSh0LCBvLCBmdW5jdGlvbiAoKSB7IHJldHVybiByKysgfSkgfSB2YXIgciA9IDEsIG8gPSBcIm5yQGlkXCIsIGkgPSB0KFwiZ29zXCIpOyBlLmV4cG9ydHMgPSBuIH0sIHsgZ29zOiBcIjdlU0RGaFwiIH1dLCBpZDogW2Z1bmN0aW9uICh0LCBlKSB7IGUuZXhwb3J0cyA9IHQoXCJYTDdIQklcIikgfSwge31dLCBsb2FkZXI6IFtmdW5jdGlvbiAodCwgZSkgeyBlLmV4cG9ydHMgPSB0KFwiRzl6MEJsXCIpIH0sIHt9XSwgRzl6MEJsOiBbZnVuY3Rpb24gKHQsIGUpIHsgZnVuY3Rpb24gbigpIHsgdmFyIHQgPSBsLmluZm8gPSBOUkVVTS5pbmZvOyBpZiAodCAmJiB0LmxpY2Vuc2VLZXkgJiYgdC5hcHBsaWNhdGlvbklEICYmIGYgJiYgZi5ib2R5KSB7IHMoaCwgZnVuY3Rpb24gKGUsIG4pIHsgZSBpbiB0IHx8ICh0W2VdID0gbikgfSksIGwucHJvdG8gPSBcImh0dHBzXCIgPT09IHAuc3BsaXQoXCI6XCIpWzBdIHx8IHQuc3NsRm9ySHR0cCA/IFwiaHR0cHM6Ly9cIiA6IFwiaHR0cDovL1wiLCBhKFwibWFya1wiLCBbXCJvbmxvYWRcIiwgaSgpXSk7IHZhciBlID0gZi5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpOyBlLnNyYyA9IGwucHJvdG8gKyB0LmFnZW50LCBmLmJvZHkuYXBwZW5kQ2hpbGQoZSkgfSB9IGZ1bmN0aW9uIHIoKSB7IFwiY29tcGxldGVcIiA9PT0gZi5yZWFkeVN0YXRlICYmIG8oKSB9IGZ1bmN0aW9uIG8oKSB7IGEoXCJtYXJrXCIsIFtcImRvbUNvbnRlbnRcIiwgaSgpXSkgfSBmdW5jdGlvbiBpKCkgeyByZXR1cm4gKG5ldyBEYXRlKS5nZXRUaW1lKCkgfSB2YXIgYSA9IHQoXCJoYW5kbGVcIiksIHMgPSB0KDEpLCBjID0gd2luZG93LCBmID0gYy5kb2N1bWVudCwgdSA9IFwiYWRkRXZlbnRMaXN0ZW5lclwiLCBkID0gXCJhdHRhY2hFdmVudFwiLCBwID0gKFwiXCIgKyBsb2NhdGlvbikuc3BsaXQoXCI/XCIpWzBdLCBoID0geyBiZWFjb246IFwiYmFtLm5yLWRhdGEubmV0XCIsIGVycm9yQmVhY29uOiBcImJhbS5uci1kYXRhLm5ldFwiLCBhZ2VudDogXCJqcy1hZ2VudC5uZXdyZWxpYy5jb20vbnItNTE1Lm1pbi5qc1wiIH0sIGwgPSBlLmV4cG9ydHMgPSB7IG9mZnNldDogaSgpLCBvcmlnaW46IHAsIGZlYXR1cmVzOiB7fSB9OyBmW3VdID8gKGZbdV0oXCJET01Db250ZW50TG9hZGVkXCIsIG8sICExKSwgY1t1XShcImxvYWRcIiwgbiwgITEpKSA6IChmW2RdKFwib25yZWFkeXN0YXRlY2hhbmdlXCIsIHIpLCBjW2RdKFwib25sb2FkXCIsIG4pKSwgYShcIm1hcmtcIiwgW1wiZmlyc3RieXRlXCIsIGkoKV0pIH0sIHsgMTogMjAsIGhhbmRsZTogXCJENUR1TFBcIiB9XSwgMjA6IFtmdW5jdGlvbiAodCwgZSkgeyBmdW5jdGlvbiBuKHQsIGUpIHsgdmFyIG4gPSBbXSwgbyA9IFwiXCIsIGkgPSAwOyBmb3IgKG8gaW4gdCkgci5jYWxsKHQsIG8pICYmIChuW2ldID0gZShvLCB0W29dKSwgaSArPSAxKTsgcmV0dXJuIG4gfSB2YXIgciA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7IGUuZXhwb3J0cyA9IG4gfSwge31dLCAyMTogW2Z1bmN0aW9uICh0LCBlKSB7IGZ1bmN0aW9uIG4odCwgZSwgbikgeyBlIHx8IChlID0gMCksIFwidW5kZWZpbmVkXCIgPT0gdHlwZW9mIG4gJiYgKG4gPSB0ID8gdC5sZW5ndGggOiAwKTsgZm9yICh2YXIgciA9IC0xLCBvID0gbiAtIGUgfHwgMCwgaSA9IEFycmF5KDAgPiBvID8gMCA6IG8pIDsgKytyIDwgbzspIGlbcl0gPSB0W2UgKyByXTsgcmV0dXJuIGkgfSBlLmV4cG9ydHMgPSBuIH0sIHt9XSwgMjI6IFtmdW5jdGlvbiAodCwgZSkgeyBmdW5jdGlvbiBuKHQpIHsgcmV0dXJuICEodCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQgJiYgdC5hcHBseSAmJiAhdFtpXSkgfSB2YXIgciA9IHQoXCJlZVwiKSwgbyA9IHQoMSksIGkgPSBcIm5yQHdyYXBwZXJcIiwgYSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7IGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IGZ1bmN0aW9uIGUodCwgZSwgciwgYSkgeyBmdW5jdGlvbiBucldyYXBwZXIoKSB7IHZhciBuLCBpLCBzLCBmOyB0cnkgeyBpID0gdGhpcywgbiA9IG8oYXJndW1lbnRzKSwgcyA9IHIgJiYgcihuLCBpKSB8fCB7fSB9IGNhdGNoIChkKSB7IHUoW2QsIFwiXCIsIFtuLCBpLCBhXSwgc10pIH0gYyhlICsgXCJzdGFydFwiLCBbbiwgaSwgYV0sIHMpOyB0cnkgeyByZXR1cm4gZiA9IHQuYXBwbHkoaSwgbikgfSBjYXRjaCAocCkgeyB0aHJvdyBjKGUgKyBcImVyclwiLCBbbiwgaSwgcF0sIHMpLCBwIH0gZmluYWxseSB7IGMoZSArIFwiZW5kXCIsIFtuLCBpLCBmXSwgcykgfSB9IHJldHVybiBuKHQpID8gdCA6IChlIHx8IChlID0gXCJcIiksIG5yV3JhcHBlcltpXSA9ICEwLCBmKHQsIG5yV3JhcHBlciksIG5yV3JhcHBlcikgfSBmdW5jdGlvbiBzKHQsIHIsIG8sIGkpIHsgbyB8fCAobyA9IFwiXCIpOyB2YXIgYSwgcywgYywgZiA9IFwiLVwiID09PSBvLmNoYXJBdCgwKTsgZm9yIChjID0gMDsgYyA8IHIubGVuZ3RoOyBjKyspIHMgPSByW2NdLCBhID0gdFtzXSwgbihhKSB8fCAodFtzXSA9IGUoYSwgZiA/IHMgKyBvIDogbywgaSwgcywgdCkpIH0gZnVuY3Rpb24gYyhlLCBuLCByKSB7IHRyeSB7IHQuZW1pdChlLCBuLCByKSB9IGNhdGNoIChvKSB7IHUoW28sIGUsIG4sIHJdKSB9IH0gZnVuY3Rpb24gZih0LCBlKSB7IGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmtleXMpIHRyeSB7IHZhciBuID0gT2JqZWN0LmtleXModCk7IHJldHVybiBuLmZvckVhY2goZnVuY3Rpb24gKG4pIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIG4sIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0W25dIH0sIHNldDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHRbbl0gPSBlLCBlIH0gfSkgfSksIGUgfSBjYXRjaCAocikgeyB1KFtyXSkgfSBmb3IgKHZhciBvIGluIHQpIGEuY2FsbCh0LCBvKSAmJiAoZVtvXSA9IHRbb10pOyByZXR1cm4gZSB9IGZ1bmN0aW9uIHUoZSkgeyB0cnkgeyB0LmVtaXQoXCJpbnRlcm5hbC1lcnJvclwiLCBlKSB9IGNhdGNoIChuKSB7IH0gfSByZXR1cm4gdCB8fCAodCA9IHIpLCBlLmluUGxhY2UgPSBzLCBlLmZsYWcgPSBpLCBlIH0gfSwgeyAxOiAyMSwgZWU6IFwiUUpmM2F4XCIgfV0gfSwge30sIFtcIkc5ejBCbFwiLCAzLCAxMCwgNF0pO1xuICAgICAgICA7IE5SRVVNLmluZm8gPSB7IGJlYWNvbjogXCJiYW0ubnItZGF0YS5uZXRcIiwgZXJyb3JCZWFjb246IFwiYmFtLm5yLWRhdGEubmV0XCIsIGxpY2Vuc2VLZXk6IGxpY2Vuc2VLZXksIGFwcGxpY2F0aW9uSUQ6IGFwcElkLCBzYTogMSwgYWdlbnQ6IFwianMtYWdlbnQubmV3cmVsaWMuY29tL25yLTUxNS5taW4uanNcIiB9XG4gICAgICAgIDtcclxuICAgIH1cclxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXdSZWxpYztcbiIsIlxyXG52YXIgcmF5R3VuID0gZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgdmFyIGFwaUtleTtcclxuICAgIGlmIChjb25maWcgPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbmZpZyA9IHt9O1xyXG4gICAgfVxyXG4gICAgYXBpS2V5ID0gY29uZmlnLlJBWUdVTl9BUElfS0VZO1xyXG4gICAgaWYgKGFwaUtleSAmJiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgIT09ICdsb2NhbGhvc3QnKSB7XHJcbiAgICAgICAgaWYgKFJheWd1biAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIFJheWd1bi5pbml0KGFwaUtleSwge1xyXG4gICAgICAgICAgICAgICAgaWdub3JlM3JkUGFydHlFcnJvcnM6IHRydWVcclxuICAgICAgICAgICAgfSkuYXR0YWNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBSYXlndW4gIT0gbnVsbCA/IFJheWd1bi5maWx0ZXJTZW5zaXRpdmVEYXRhKFsncGFzc3dvcmQnXSkgOiB2b2lkIDA7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJheUd1bjsiLCJcbnZhciB1c2VyU25hcCA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgIHZhciBhcGlLZXkgPSAnMDMyYmFmODctODU0NS00ZWJjLWE1NTctOTM0ODU5MzcxZmE1LmpzJywgcywgeDtcbiAgICBpZiAoY29uZmlnID09IG51bGwpIHtcclxuICAgICAgICBjb25maWcgPSB7fTtcclxuICAgIH1cbiAgICBhcGlLZXkgPSBjb25maWcuVVNFUl9TTkFQX0FQSV9LRVk7XG4gICAgaWYgKGFwaUtleSAmJiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgIT09ICdsb2NhbGhvc3QnKSB7XHJcbiAgICAgICAgd2luZG93LnVzZXJzbmFwY29uZmlnID0ge1xyXG4gICAgICAgICAgICBtb2RlOiAncmVwb3J0JyxcbiAgICAgICAgICAgIHNob3J0Y3V0OiB0cnVlLFxuICAgICAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJTbmFwLnNldEVtYWlsQm94KERvYy5hcHAudXNlci51c2VyTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xuICAgICAgICBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIHMudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICAgICAgICBzLmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgcy5zcmMgPSAnLy9hcGkudXNlcnNuYXAuY29tL2xvYWQvJyArIGFwaUtleSArICcuanMnO1xuICAgICAgICB4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgICAgICAgcmV0dXJuIHguYXBwZW5kQ2hpbGQocyk7XHJcbiAgICB9XHJcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdXNlclNuYXA7XG5cblxuIiwiY29uc3QgZ28gPSB3aW5kb3cuZ287XHJcblxyXG5jbGFzcyBBbmFseXRpY3Mge1xyXG4gICAgY29uc3RydWN0b3IoZWRpdG9yLCBtYXApIHtcclxuICAgICAgICB0aGlzLl9lZGl0b3IgPSBlZGl0b3I7XHJcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xyXG5cclxuICAgICAgICAvLyB0aGlzIGdldHMgcG9wdWxhdGVkIGJ5IHRoaXMuX21hcC5sb2FkTWFwRXh0cmFEYXRhLCBvbiBsb2FkIGFuZCBhZnRlciBldmVyeSBhdXRvc2F2ZVxyXG4gICAgICAgIHRoaXMubWFwQW5hbHl0aWNzID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gLS0tLS0tLS0tIGNvbnRleHR1YWwgYW5hbHl0aWNzIC0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gLSB0aGVzZSBhcmUgYWxsIGNhbGN1bGF0ZWQgaGVyZSwgdW5saWtlIG1hcCBhbmFseXRpY3Mgd2hpY2ggYXJlIGNhbGN1bGF0ZWQgb24gdGhlIHNlcnZlciBhbmQgY29ubmVjdGVkIHdpdGggYmFkZ2VzIGFuZCBwb2ludHNcclxuXHJcbiAgICAgICAgLy8gdGhpcyBnZXRzIGNhbGN1bGF0ZWQgYnkgdXBkYXRlQ29udGV4dHVhbEFuYWx5dGljc1xyXG4gICAgICAgIHRoaXMuY29udGV4dHVhbEFuYWx5dGljcyA9IHtcclxuICAgICAgICAgICAgdGhpbmdOYW1lOiAnJyxcclxuXHJcbiAgICAgICAgICAgIC8vIHRoaW5nIHN0dWZmXHJcbiAgICAgICAgICAgIGRpc3RpbmN0RnJvbTogMCxcclxuICAgICAgICAgICAgaW50ZW50aW9uYWxseURpc3RpbmN0RnJvbTogMCxcclxuICAgICAgICAgICAgcGFydE9mOiAwLFxyXG4gICAgICAgICAgICBpbmNsdWRlc1BhcnRzOiAwLFxyXG4gICAgICAgICAgICByZWxhdGVkVG86IDAsXHJcbiAgICAgICAgICAgIGlzUmVsYXRpb25zaGlwOiAwLFxyXG4gICAgICAgICAgICBsb29raW5nQXQ6IDAsXHJcbiAgICAgICAgICAgIGxvb2tlZEF0RnJvbTogMCxcclxuXHJcbiAgICAgICAgICAgIC8vIFIgc3R1ZmZcclxuICAgICAgICAgICAgckZyb21UaGluZ05hbWU6ICcnLFxyXG4gICAgICAgICAgICByVG9UaGluZ05hbWU6ICcnLFxyXG4gICAgICAgICAgICBpc1JUaGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgIGlzUlN5c3RlbTogZmFsc2UsXHJcbiAgICAgICAgICAgIGlzUlBvaW50OiBmYWxzZSxcclxuICAgICAgICAgICAgaXNSVmlldzogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZURpYWdyYW1FdmVudChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09PSAnQ2hhbmdlZFNlbGVjdGlvbicpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX21hcC51aS5jdXJyZW50VGFiSXModGhpcy5fbWFwLnVpLlRBQl9JRF9BTkFMWVRJQ1NfVEhJTkcpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBhIHRhYiBpcyBvcGVuZWQgb3IgY2xvc2VkXHJcbiAgICBjdXJyZW50VGFiQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICBpZiAobmV3VmFsdWUgPT09IHRoaXMuX21hcC51aS5UQUJfSURfQU5BTFlUSUNTX1RISU5HKSB7IC8vIG9wZW5pbmcgdGhpbmcgYW5hbHl0aWNzIHRhYlxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ29udGV4dHVhbEFuYWx5dGljcygpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd1cGRhdGVDb250ZXh0dWFsQW5hbHl0aWNzJyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9tYXAudWkuY3VycmVudFRhYklzKHRoaXMuX21hcC51aS5UQUJfSURfQU5BTFlUSUNTX1RISU5HKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIHBhcnQgPSBkaWFncmFtLnNlbGVjdGlvbi5maXJzdCgpO1xyXG4gICAgICAgIHZhciBhID0gdGhpcy5jb250ZXh0dWFsQW5hbHl0aWNzO1xyXG5cclxuICAgICAgICBpZiAocGFydCAmJiBwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgdmFyIHRoaW5nID0gcGFydDtcclxuXHJcbiAgICAgICAgICAgIC8vIHRoaW5nIG5hbWVcclxuICAgICAgICAgICAgYS50aGluZ05hbWUgPSB0aGluZy5kYXRhLnRleHQ7XHJcblxyXG4gICAgICAgICAgICAvLyBkaXN0aW5jdCBmcm9tXHJcbiAgICAgICAgICAgIGEuZGlzdGluY3RGcm9tID0gXy53aGVyZShkaWFncmFtLm1vZGVsLm5vZGVEYXRhQXJyYXksIHsgaXNHcm91cDogdHJ1ZSB9KS5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICAgICAgLy8gcGFydCBvZlxyXG4gICAgICAgICAgICB2YXIgbGV2ZWwgPSAwO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gdGhpbmc7XHJcbiAgICAgICAgICAgIHdoaWxlICh0aGluZzIgPSB0aGlzLmdldENvbnRhaW5pbmdHcm91cCh0aGluZzIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXZlbCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGEucGFydE9mID0gbGV2ZWw7XHJcblxyXG4gICAgICAgICAgICAvLyBpbmNsdWRlcyBwYXJ0c1xyXG4gICAgICAgICAgICBhLmluY2x1ZGVzUGFydHMgPSB0aGlzLmNvdW50R3JvdXBzKHRoaW5nKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHJlbGF0ZWQgdG8gLyBsb29raW5nIGF0IC8gbG9va2VkIGF0IGZyb20gLyBpbnRlbnRpb25hbGx5IGRpc3RpbmN0IGZyb21cclxuICAgICAgICAgICAgYS5yZWxhdGVkVG8gPSAwO1xyXG4gICAgICAgICAgICBhLmxvb2tpbmdBdCA9IDA7XHJcbiAgICAgICAgICAgIGEubG9va2VkQXRGcm9tID0gMDtcclxuICAgICAgICAgICAgYS5pbnRlbnRpb25hbGx5RGlzdGluY3RGcm9tID0gMDtcclxuICAgICAgICAgICAgdmFyIGxpbmtzID0gdGhpbmcubGlua3NDb25uZWN0ZWQ7XHJcbiAgICAgICAgICAgIHZhciByQ29ubmVjdGVkVGhpbmdLZXlzID0gW107XHJcbiAgICAgICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAvLyBQIGxpbmtcclxuICAgICAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT09ICdQJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5rLmZyb21Ob2RlID09PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhLmxvb2tpbmdBdCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsaW5rLnRvTm9kZSA9PT0gdGhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYS5sb29rZWRBdEZyb20rKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRCBsaW5rXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT09ICdEJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGEuaW50ZW50aW9uYWxseURpc3RpbmN0RnJvbSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFIgbGlua1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIWxpbmsuZGF0YS5jYXRlZ29yeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyYWNrIGtleXMgb2YgcmVsYXRlZCB0aGluZ3Mgc28gd2UgZG9uJ3QgY291bnQgdGhlbSBtdWx0aXBsZSB0aW1lc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5rLmZyb21Ob2RlID09PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByQ29ubmVjdGVkVGhpbmdLZXlzLnB1c2gobGluay50b05vZGUuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsaW5rLnRvTm9kZSA9PT0gdGhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgckNvbm5lY3RlZFRoaW5nS2V5cy5wdXNoKGxpbmsuZnJvbU5vZGUuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhLnJlbGF0ZWRUbyA9IF8udW5pcShyQ29ubmVjdGVkVGhpbmdLZXlzKS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAvLyBpc1JlbGF0aW9uc2hpcFxyXG4gICAgICAgICAgICBhLmlzUmVsYXRpb25zaGlwID0gdGhpbmcuaXNMaW5rTGFiZWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBhcnQgJiYgcGFydCBpbnN0YW5jZW9mIGdvLkxpbmspIHtcclxuICAgICAgICAgICAgdmFyIHJlbCA9IHBhcnQ7XHJcblxyXG4gICAgICAgICAgICAvLyB0aGluZyBuYW1lc1xyXG4gICAgICAgICAgICBhLnJGcm9tVGhpbmdOYW1lID0gcmVsLmZyb21Ob2RlLmRhdGEudGV4dDtcclxuICAgICAgICAgICAgYS5yVG9UaGluZ05hbWUgPSByZWwudG9Ob2RlLmRhdGEudGV4dDtcclxuXHJcbiAgICAgICAgICAgIC8vIGlzIFIgdGhpbmdcclxuICAgICAgICAgICAgYS5pc1JUaGluZyA9IHJlbC5pc0xhYmVsZWRMaW5rO1xyXG5cclxuICAgICAgICAgICAgLy8gaXMgUiBzeXN0ZW1cclxuICAgICAgICAgICAgYS5pc1JTeXN0ZW0gPSByZWwuaXNMYWJlbGVkTGluayAmJiB0aGlzLmNvdW50R3JvdXBzKHJlbC5sYWJlbE5vZGVzLmZpcnN0KCkpID4gMDtcclxuXHJcbiAgICAgICAgICAgIC8vIGlzIFIgcG9pbnRcclxuICAgICAgICAgICAgYS5pc1JQb2ludCA9IHJlbC5pc0xhYmVsZWRMaW5rICYmIHRoaXMuaXNQb2ludChyZWwubGFiZWxOb2Rlcy5maXJzdCgpKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGlzIFIgdmlld1xyXG4gICAgICAgICAgICBhLmlzUlZpZXcgPSByZWwuaXNMYWJlbGVkTGluayAmJiB0aGlzLmlzVmlldyhyZWwubGFiZWxOb2Rlcy5maXJzdCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyBlaXRoZXIgdGhlIGNvbnRhaW5pbmdHcm91cCBvciB0aGUgclRoaW5nQ29udGFpbmluZ0dyb3VwLCB3aGljaGV2ZXIgaXMgbm9uLW51bGxcclxuICAgIGdldENvbnRhaW5pbmdHcm91cChncm91cCkge1xyXG4gICAgICAgIHJldHVybiBncm91cC5jb250YWluaW5nR3JvdXAgfHwgdGhpcy5nZXRSVGhpbmdDb250YWluaW5nR3JvdXAoZ3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGdyb3VwIGlzIGFuIFItdGhpbmcgYmV0d2VlbiB0d28gc2libGluZyBwYXJ0cyBvZiBhIHdob2xlLCByZXR1cm5zIHRoZSB3aG9sZTsgZWxzZSByZXR1cm5zIG51bGxcclxuICAgIGdldFJUaGluZ0NvbnRhaW5pbmdHcm91cChncm91cCkge1xyXG4gICAgICAgIGlmIChncm91cC5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICB2YXIgZnJvbVBhcmVudCA9IGdyb3VwLmxhYmVsZWRMaW5rLmZyb21Ob2RlLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICAgICAgdmFyIHRvUGFyZW50ID0gZ3JvdXAubGFiZWxlZExpbmsudG9Ob2RlLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICAgICAgaWYgKGZyb21QYXJlbnQgIT09IG51bGwgJiYgdG9QYXJlbnQgIT09IG51bGwgJiYgZnJvbVBhcmVudCA9PT0gdG9QYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tUGFyZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvdW50cyB0aGUgbWVtYmVyIHBhcnRzIG9mIHRoZSBncm91cCB0aGF0IGFyZSBncm91cHMsIHJlY3Vyc2l2ZWx5IChub3QgaW5jbHVkaW5nIHRoZSBncm91cCBpdHNlbGYpXHJcbiAgICBjb3VudEdyb3Vwcyhncm91cCkge1xyXG4gICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIGl0ID0gdGhpcy5nZXRNZW1iZXJHcm91cHMoZ3JvdXApLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgY291bnQgKz0gMSArIHRoaXMuY291bnRHcm91cHMocGFydCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgY29sbGVjdGlvbiBvZiBncm91cHMgdGhhdCBhcmUgZWl0aGVyIGEgbWVtYmVyUGFydCBvZiB0aGlzIGdyb3VwLCBvciBhbiBSLXRoaW5nIGJldHdlZW4gc2libGluZyBtZW1iZXJQYXJ0c1xyXG4gICAgZ2V0TWVtYmVyR3JvdXBzKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLm1lbWJlclBhcnRzO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocGFydCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnRoaW5nID0gdGhpcy5nZXRSVGhpbmdUb1NpYmxpbmcocGFydCk7IC8vIE5COiBzaG91bGQgbm90IGdldCBkdXBsaWNhdGlvbiBoZXJlLCBhcyB0aGlzIGNoZWNrcyBmb3Igci10aGluZ3MgaW4gb25seSBvbmUgZGlyZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBpZiAocnRoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocnRoaW5nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVtYmVycztcclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiB0aGUgZ3JvdXAgaXMgbGlua2VkIGJ5IGFuIFItdGhpbmcgdG8gYSBzaWJsaW5nICh3aXRoIHRoZSBncm91cCBhcyB0aGUgZnJvbU5vZGUpLCByZXR1cm5zIHRoZSBSLXRoaW5nOyBlbHNlIHJldHVybnMgbnVsbFxyXG4gICAgZ2V0UlRoaW5nVG9TaWJsaW5nKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGl0ID0gZ3JvdXAuZmluZExpbmtzT3V0T2YoKTtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmxhYmVsTm9kZXMuY291bnQgPiAwICYmIGxpbmsudG9Ob2RlLmNvbnRhaW5pbmdHcm91cCA9PT0gZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGluay5sYWJlbE5vZGVzLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaXNQb2ludChncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09PSAnUCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpc1ZpZXcoZ3JvdXApIHtcclxuICAgICAgICB2YXIgaXQgPSBncm91cC5maW5kTGlua3NJbnRvKCk7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09PSAnUCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQW5hbHl0aWNzOyIsImNsYXNzIEF0dGFjaG1lbnRzIHtcclxuICAgIGNvbnN0cnVjdG9yKGVkaXRvciwgbWFwKSB7XHJcbiAgICAgICAgdGhpcy5fZWRpdG9yID0gZWRpdG9yO1xyXG4gICAgICAgIHRoaXMuX21hcCA9IG1hcDtcclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFRoaW5nID0gbnVsbDtcclxuICAgICAgICB0aGlzLmF0dGFjaG1lbnRzID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5hdHRhY2htZW50VHlwZXMgPSBbXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ25vdGUnLCBsYWJlbFNpbmd1bGFyOiAnTm90ZScsIGxhYmVsUGx1cmFsOiAnTm90ZXMnIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ2xpbmsnLCBsYWJlbFNpbmd1bGFyOiAnV2ViIExpbmsnLCBsYWJlbFBsdXJhbDogJ1dlYiBMaW5rcycgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAndGFzaycsIGxhYmVsU2luZ3VsYXI6ICdUYXNrJywgbGFiZWxQbHVyYWw6ICdUYXNrcycgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnbWFwJywgbGFiZWxTaW5ndWxhcjogJ0xpbmtlZCBNZXRhTWFwJywgbGFiZWxQbHVyYWw6ICdMaW5rZWQgTWV0YU1hcHMnIH1cclxuICAgICAgICAgICAgLy97bmFtZTogJ2RvYycsIGxhYmVsU2luZ3VsYXI6ICdEb2N1bWVudCcsIGxhYmVsUGx1cmFsOiAnRG9jdW1lbnRzJ30gIC8vIGxpbWl0IG92ZXJhbGwgc3RvcmFnZSBzcGFjZSBPUiBzaW1wbGVyIHJ1bGVzP1xyXG4gICAgICAgICAgICAvLyBsaW1pdCBmaWxlIHR5cGVzIC0gcGRmLCBqcGcsIGdpZiwgcG5nLCBvZmZpY2U/Li4uICB3aGl0ZWxpc3QgdnMuIGJsYWNrbGlzdFxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlRGlhZ3JhbUV2ZW50KGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIGlmIChldmVudE5hbWUgPT09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWFwLnVpLmN1cnJlbnRUYWJJcyh0aGlzLl9tYXAudWkuVEFCX0lEX0FUVEFDSE1FTlRTKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wRWRpdGluZ0FsbCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQXR0YWNobWVudHMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZFNlbGVjdGVkVGhpbmdBdHRhY2htZW50cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIGN1cnJlbnRUYWJDaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gdGhpcy5fbWFwLnVpLlRBQl9JRF9BVFRBQ0hNRU5UUykgeyAvLyBvcGVuaW5nIHRhYlxyXG4gICAgICAgICAgICB0aGlzLmxvYWRTZWxlY3RlZFRoaW5nQXR0YWNobWVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9sZFZhbHVlID09PSB0aGlzLl9tYXAudWkuVEFCX0lEX0FUVEFDSE1FTlRTKSB7IC8vIGNsb3NpbmcgdGFiXHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZUF0dGFjaG1lbnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvYWRTZWxlY3RlZFRoaW5nQXR0YWNobWVudHMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX21hcC50aGluZ1NlbGVjdGVkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRoaW5nID0gdGhpcy5fbWFwLmdldFVuaXF1ZVRoaW5nU2VsZWN0ZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50cyA9IHRoaXMuc2VsZWN0ZWRUaGluZy5kYXRhLmF0dGFjaG1lbnRzO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hdHRhY2htZW50cyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaG1lbnRzID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0IGFsbCBhdHRhY2htZW50cyB0byBlZGl0aW5nID0gZmFsc2VcclxuICAgIHN0b3BFZGl0aW5nQWxsKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmF0dGFjaG1lbnRzKSB7XHJcbiAgICAgICAgICAgIF8uZWFjaCh0aGlzLmF0dGFjaG1lbnRzLCAoYXR0KSA9PiB7IGF0dC5lZGl0aW5nID0gZmFsc2U7IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBlZGl0aW5nQW5JdGVtKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF0dGFjaG1lbnRzICYmIF8uZmluZFdoZXJlKHRoaXMuYXR0YWNobWVudHMsIHsgZWRpdGluZzogdHJ1ZSB9KSAhPT0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldCBhbGwgb3RoZXIgYXR0YWNobWVudHMgdG8gZWRpdGluZyA9IGZhbHNlXHJcbiAgICBzdGFydEVkaXRpbmcoYXR0YWNobWVudCkge1xyXG4gICAgICAgIHRoaXMuc3RvcEVkaXRpbmdBbGwoKTtcclxuICAgICAgICBhdHRhY2htZW50LmVkaXRpbmcgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVJdGVtKGF0dGFjaG1lbnQpIHtcclxuICAgICAgICBhdHRhY2htZW50LmVkaXRpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNhdmVBdHRhY2htZW50cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVBdHRhY2htZW50cygpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnc2F2ZUF0dGFjaG1lbnRzLCBzZWxlY3RlZDogJyArIHRoaXMuc2VsZWN0ZWRUaGluZyk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRUaGluZykge1xyXG4gICAgICAgICAgICB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGlzLnNlbGVjdGVkVGhpbmcuZGF0YSwgJ2F0dGFjaG1lbnRzJywgdGhpcy5hdHRhY2htZW50cyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUaGluZy51cGRhdGVUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9tYXAuYXV0b3NhdmUuc2F2ZU5vdygnZWRpdF9hdHRhY2htZW50cycpO1xyXG4gICAgfVxyXG5cclxuICAgIGxpc3RBdHRhY2htZW50cyh0eXBlKSB7XHJcbiAgICAgICAgbGV0IGF0dHMgPSBfLndoZXJlKHRoaXMuYXR0YWNobWVudHMsIHsgdHlwZTogdHlwZSB9KTtcclxuICAgICAgICByZXR1cm4gYXR0cztcclxuICAgIH1cclxuXHJcbiAgICBhZGRBdHRhY2htZW50KHR5cGUpIHtcclxuICAgICAgICBsZXQgaXRlbSA9IHsgdHlwZTogdHlwZSwgZWRpdGluZzogdHJ1ZSB9O1xyXG4gICAgICAgIGlmICh0eXBlID09PSAnbm90ZScpIHtcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgdGV4dDogJycsIHVybDogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnbGluaycpIHtcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgbGFiZWw6ICcnLCB1cmw6ICcnIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ3Rhc2snKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0YWNobWVudHMucHVzaChfLmV4dGVuZChpdGVtLCB7IHRleHQ6ICcnIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ2RvYycpIHtcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgbmFtZTogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnbWFwJykge1xyXG4gICAgICAgICAgICB0aGlzLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyBtYXBSZWY6IHsgaWQ6IDAsIG5hbWU6ICcnIH0gfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc1ZhbGlkKGF0dGFjaG1lbnQpIHtcclxuICAgICAgICBpZiAoYXR0YWNobWVudC50eXBlID09PSAnbGluaycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0dGFjaG1lbnQubGFiZWwgJiYgYXR0YWNobWVudC51cmwgJiYgYXR0YWNobWVudC5sYWJlbC50cmltKCkgIT09ICcnICYmIGF0dGFjaG1lbnQudXJsLnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PT0gJ25vdGUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LnRleHQgJiYgYXR0YWNobWVudC50ZXh0LnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PT0gJ3Rhc2snKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LnRleHQgJiYgYXR0YWNobWVudC50ZXh0LnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PT0gJ2RvYycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0dGFjaG1lbnQubmFtZSAmJiBhdHRhY2htZW50Lm5hbWUudHJpbSgpICE9PSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYXR0YWNobWVudC50eXBlID09PSAnbWFwJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYXR0YWNobWVudC5tYXBSZWYgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IG51bGwgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQXR0YWNobWVudChhdHQpIHtcclxuICAgICAgICBsZXQgdHlwZUxhYmVsID0gXy5maW5kV2hlcmUodGhpcy5hdHRhY2htZW50VHlwZXMsIHsgbmFtZTogYXR0LnR5cGUgfSkubGFiZWxTaW5ndWxhcjtcclxuICAgICAgICBpZiAoY29uZmlybSgnRGVsZXRlICcgKyB0eXBlTGFiZWwgKyAnPycpKSB7XHJcbiAgICAgICAgICAgIGxldCBpID0gXy5pbmRleE9mKHRoaXMuYXR0YWNobWVudHMsIGF0dCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0YWNobWVudHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBxdWVyeSBzZXJ2ZXIgZm9yIG1hcHMgY29udGFpbmluZyB0aGUgZ2l2ZW4gdGV4dCBpbiB0aGUgbWFwIG5hbWVcclxuICAgIGdldE90aGVyTWFwcyh2aWV3VmFsdWUpIHtcclxuICAgICAgICAvLyBOQjogdGhpcyBVUkwgaXMgY29uc3RydWN0ZWQgdG8gbWF0Y2ggdGhlIG9uZSBnZW5lcmF0ZWQgYnkgdGhlIHNlYXJjaCBmb3JtIG9uIHRoZSBtYXBzIHBhZ2UuLi5cclxuICAgICAgICBsZXQgdXJsID0gJy9tYXBzL3Zpc2libGVfbWFwcy5qc29uP3V0Zjg9JUUyJTlDJTkzJnElNUJuYW1lX2NvbnQlNUQ9JyArIHZpZXdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEubWFwcztcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvdGhlck1hcFNlbGVjdGVkKHZpZXdWYWx1ZSwgbW9kZWxWYWx1ZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdvdGhlck1hcFNlbGVjdGVkLCB2aWV3VmFsdWU6ICcgKyB2aWV3VmFsdWUuaWQgKyAnLCBtb2RlbFZhbHVlOiAnICsgbW9kZWxWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9ybWF0T3RoZXJNYXAobW9kZWwpIHtcclxuICAgICAgICByZXR1cm4gKG1vZGVsID8gbW9kZWwubmFtZSA6ICcnKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBdHRhY2htZW50czsiLCJjb25zdCBBbmFseXRpY3MgPSByZXF1aXJlKCcuL0FuYWx5dGljcy5qcycpO1xyXG5jb25zdCBBdHRhY2htZW50cyA9IHJlcXVpcmUoJy4vQXR0YWNobWVudHMuanMnKTtcclxuY29uc3QgQXV0b3NhdmUgPSByZXF1aXJlKCcuL2F1dG9zYXZlLmpzJyk7XHJcbmNvbnN0IEVkaXRvck9wdGlvbnMgPSByZXF1aXJlKCcuL0VkaXRvck9wdGlvbnMuanMnKTtcclxuY29uc3QgR2VuZXJhdG9yID0gcmVxdWlyZSgnLi9nZW5lcmF0b3IuanMnKTtcclxuY29uc3QgTGF5b3V0cyA9IHJlcXVpcmUoJy4vTGF5b3V0cy5qcycpO1xyXG5jb25zdCBQZXJzcGVjdGl2ZXMgPSByZXF1aXJlKCcuL1BlcnNwZWN0aXZlcy5qcycpO1xyXG5jb25zdCBQcmVzZW50ZXIgPSByZXF1aXJlKCcuL1ByZXNlbnRlci5qcycpO1xyXG5jb25zdCBUZW1wbGF0ZXMgPSByZXF1aXJlKCcuL1RlbXBsYXRlcy5qcycpO1xyXG5jb25zdCBVSSA9IHJlcXVpcmUoJy4vVUkuanMnKTtcclxuXHJcbmNsYXNzIEVkaXRvckNvbmZpZyB7XHJcbiAgICBjb25zdHJ1Y3RvcihlZGl0b3IsIG1hcCkge1xyXG4gICAgICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xyXG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xyXG4gICAgICAgIHRoaXMuYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcyhlZGl0b3IsIG1hcCk7XHJcbiAgICAgICAgdGhpcy5hdHRhY2htZW50cyA9IG5ldyBBdHRhY2htZW50cyhlZGl0b3IsIG1hcCk7XHJcbiAgICAgICAgdGhpcy5hdXRvc2F2ZSA9IG5ldyBBdXRvc2F2ZShlZGl0b3IsIG1hcCk7XHJcbiAgICAgICAgdGhpcy5lZGl0b3JPcHRpb25zID0gbmV3IEVkaXRvck9wdGlvbnMoe30sIG1hcCk7XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0b3IgPSBuZXcgR2VuZXJhdG9yKGVkaXRvciwgbWFwKTtcclxuICAgICAgICB0aGlzLmxheW91dHMgPSBuZXcgTGF5b3V0cyhlZGl0b3IsIG1hcCk7XHJcbiAgICAgICAgdGhpcy5wZXJzcGVjdGl2ZXMgPSBuZXcgUGVyc3BlY3RpdmVzKGVkaXRvciwgbWFwKTtcclxuICAgICAgICB0aGlzLnByZXNlbnRlciA9IG5ldyBQcmVzZW50ZXIoZWRpdG9yLCBtYXApO1xyXG4gICAgICAgIC8vdGhpcy5zdGFuZGFyZHMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuU3RhbmRhcmRzKGVkaXRvciwgbWFwKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcyA9IG5ldyBUZW1wbGF0ZXMoZWRpdG9yLCBtYXApO1xyXG4gICAgICAgIC8vdGhpcy50ZXN0cyA9IG5ldyBTYW5kYmFua0VkaXRvci5UZXN0cyhlZGl0b3IsIG1hcCk7XHJcbiAgICAgICAgdGhpcy51aSA9IG5ldyBVSShlZGl0b3IsIG1hcCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEVkaXRvckNvbmZpZzsiLCJjbGFzcyBFZGl0b3JPcHRpb25zIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VyLCBtYXApIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdEVkaXRvck9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIC8vIG5vQXJyb3dzLCB0bywgZnJvbSwgdG9Gcm9tXHJcbiAgICAgICAgICAgIGRlZmF1bHRSZWxhdGlvbnNoaXBEaXJlY3Rpb246ICdub0Fycm93cycsXHJcbiAgICAgICAgICAgIC8vIGxlZnQsIHJpZ2h0LCBzdGFja2VkLCBmcmVlaGFuZFxyXG4gICAgICAgICAgICBkZWZhdWx0VGhpbmdMYXlvdXQ6ICdsZWZ0JyxcclxuICAgICAgICAgICAgLy8gbGluZXMsIHNwb3RsaWdodCwgYm90aFxyXG4gICAgICAgICAgICBwZXJzcGVjdGl2ZU1vZGU6ICdsaW5lcydcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBtYXAgaXMgbG9hZGVkIHRvIHNldCBzdG9yZWQgb3B0aW9ucyBmb3IgbWFwXHJcbiAgICBzZXRNYXBFZGl0b3JPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLm1hcEVkaXRvck9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgICAgICAvLyByZXR1cm5zIGFwcHJvcHJpYXRlIHZhbHVlcyBmcm9tIHRoZSB1c2VyIHByb2ZpbGUgb3IgdGhlIGRlZmF1bHQgb3B0aW9ucyBpZiBvcHRpb25zIGFyZSBub3Qgc2V0IGZvciB0aGUgbWFwXHJcbiAgICBnZXRNYXBFZGl0b3JPcHRpb25zKCkge1xyXG4gICAgICAgIGxldCBwcm9maWxlT3B0aW9ucyA9ICh0aGlzLnVzZXIucHJvZmlsZSA/IHRoaXMudXNlci5wcm9maWxlLmVkaXRvck9wdGlvbnMgOiBudWxsKTtcclxuICAgICAgICBsZXQgdmFscyA9IFt0aGlzLm1hcEVkaXRvck9wdGlvbnMsIHByb2ZpbGVPcHRpb25zLCB0aGlzLmRlZmF1bHRFZGl0b3JPcHRpb25zXTtcclxuICAgICAgICB0aGlzLm1hcEVkaXRvck9wdGlvbnMgPSBfLmZpbmQodmFscywgZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhXy5pc0VtcHR5KHZhbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwRWRpdG9yT3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBlZGl0T3B0aW9ucyAoKSB7XHJcbiAgICAgICAgdGhpcy5vcGVuTW9kYWwoXHJcbiAgICAgICAgICAgIHRoaXMubWFwRWRpdG9yT3B0aW9ucyxcclxuICAgICAgICAgICAgKG9wdGlvbnMpID0+IHsgLy8gb25TYXZlRGVmYXVsdHNcclxuICAgICAgICAgICAgICAgIHRoaXMudXNlci5zYXZlVXNlckVkaXRvck9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIChvcHRpb25zKSA9PiB7IC8vIG9uVXBkYXRlXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcEVkaXRvck9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXAuYXV0b3NhdmUuc2F2ZU5vdygnZWRpdF9vcHRpb25zJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW5Nb2RhbChvcHRpb25zLCBvblNhdmVEZWZhdWx0cywgb25VcGRhdGUpIHtcclxuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgbGV0IG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVfZWRpdG9yX29wdGlvbnNfbW9kYWwuaHRtbCcsIC8vIHNlZSB2aWV3cy9tYXBzL190ZW1wbGF0ZV9lZGl0b3Jfb3B0aW9uc19tb2RhbFxyXG4gICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IHRoYXQub3B0aW9uc01vZGFsQ3RybCxcclxuICAgICAgICAgICAgd2luZG93Q2xhc3M6ICdvcHRpb25zLW1vZGFsJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25TYXZlRGVmYXVsdHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvblNhdmVEZWZhdWx0cztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uVXBkYXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBjb250cm9sbGVyIGZvciBvcHRpb25zIG1vZGFsIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgb3B0aW9uc01vZGFsQ3RybCgkc2NvcGUsICRtb2RhbEluc3RhbmNlLCBvcHRpb25zLCBvblNhdmVEZWZhdWx0cywgb25VcGRhdGUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLm9wdGlvbnMgPSBvcHRpb25zO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2V0RGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5vayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBvblVwZGF0ZSgkc2NvcGUub3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc2V0RGVmYXVsdHMudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG9uU2F2ZURlZmF1bHRzKCRzY29wZS5vcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBFZGl0b3JPcHRpb25zOyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5cclxuLy8gbGF5b3V0cyB1c2VkIGluIHRoZSBlZGl0b3IsIGZvciB0aGUgZGlhZ3JhbSBvciBpbmRpdmlkdWFsIEdyb3VwcywgcGx1cyBsYXlvdXQtcmVsYXRlZCBmdW5jdGlvbnNcclxuY2xhc3MgTGF5b3V0cyB7XHJcbiAgICBjb25zdHJ1Y3RvcihlZGl0b3IsIG1hcCkge1xyXG4gICAgICAgIHRoaXMuX2VkaXRvciA9IGVkaXRvcjtcclxuICAgICAgICB0aGlzLl9tYXAgPSBtYXA7XHJcbiAgICAgICAgZ28uTGF5b3V0LmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlRGlhZ3JhbUV2ZW50KGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09PSAnSW5pdGlhbExheW91dENvbXBsZXRlZCcpIHtcclxuICAgICAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICBkaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT09ICdTZWxlY3Rpb25Nb3ZlZCcpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZFBhcnRMb2NhdGlvbkRhdGEoZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PT0gJ1NlbGVjdGlvbkRlbGV0ZWQnKSB7XHJcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PT0gJ1BhcnRDcmVhdGVkJykge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdMYXlvdXRzLCBQYXJ0Q3JlYXRlZCcpO1xyXG4gICAgICAgICAgICAvLyBzZXROZXdQYXJ0TG9jYXRpb25EYXRhKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09PSAnUGFydFJlc2l6ZWQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UmVzaXplZFBhcnREaW1lbnNpb25EYXRhKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09PSAnTGlua0RyYXduJykge1xyXG4gICAgICAgICAgICB0aGlzLmFkanVzdExpbmtMYXlvdXQoZS5zdWJqZWN0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PT0gJ0xpbmtSZWxpbmtlZCcpIHtcclxuICAgICAgICAgICAgdGhpcy5hZGp1c3RMaW5rTGF5b3V0KGUuc3ViamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBoYW5kbGUgbG9jYXRpb24vc2l6ZSBhdHRyaWJ1dGVzIGZvciBub2RlcyAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBvbmx5IHVwZGF0ZSB3L2ggZm9yIHNsaWRlcywgYXMgYWxsIG90aGVyIG5vZGUgdHlwZXMgaGF2ZSBmaXhlZCBkaW1lbnNpb25zIGFjY29yZGluZyB0byB0aGUgdGVtcGxhdGVzXHJcbiAgICBzZXRSZXNpemVkUGFydERpbWVuc2lvbkRhdGEoZSkge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBsZXQgbm9kZSA9IGUuc3ViamVjdDtcclxuICAgICAgICBpZiAobm9kZSAmJiBub2RlLmNhdGVnb3J5ID09PSAnc2xpZGUnKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ1BhcnRSZXNpemVkOiAnICsgbm9kZS5wYXJ0LmFjdHVhbEJvdW5kcyk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5vZGUuZGF0YSwgJ3dpZHRoJywgbm9kZS5wYXJ0LmFjdHVhbEJvdW5kcy53aWR0aCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5vZGUuZGF0YSwgJ2hlaWdodCcsIG5vZGUucGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0IHRoZSAnbG9jJyBhdHRyaWJ1dGUgZm9yIGEgbmV3IHRvcC1sZXZlbCBub2RlIChjcmVhdGVkIGJ5IGRvdWJsZS1jbGlja2luZyksIHRvIHN1cHBvcnQgZnJlZWhhbmQgbGF5b3V0XHJcbiAgICBzZXROZXdQYXJ0TG9jYXRpb25EYXRhKGUpIHtcclxuICAgICAgICBsZXQgbm9kZSA9IGUuc3ViamVjdDtcclxuICAgICAgICBpZiAobm9kZSAmJiBub2RlLnBhcnQpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkobm9kZS5kYXRhLCAnbG9jJywgbm9kZS5wYXJ0LmxvY2F0aW9uLnggKyAnICcgKyBub2RlLnBhcnQubG9jYXRpb24ueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdXBkYXRlcyB0aGUgJ2xvYycgYXR0cmlidXRlIGZvciBlYWNoIHNlbGVjdGVkIHBhcnQsIHRvIHN1cHBvcnQgZnJlZWhhbmQgbGF5b3V0IChkb2VzIG5vdCBhcHBseSB0byBzbGlkZXMpXHJcbiAgICB1cGRhdGVTZWxlY3RlZFBhcnRMb2NhdGlvbkRhdGEoZSkge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBsZXQgaXQgPSBkaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7IC8vIHRoaW5nXHJcbiAgICAgICAgICAgICAgICBsZXQgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudFggPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudFkgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnQuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50WCA9IHBhcnQuY29udGFpbmluZ0dyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50WSA9IHBhcnQuY29udGFpbmluZ0dyb3VwLmxvY2F0aW9uLnk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbW92aW5nIGdyb3VwLCBzdWJqZWN0OiAnICsgZS5zdWJqZWN0ICsgJywgcGFydDogJyArIHBhcnQgKyAnLCBoZWlnaHQ6ICcgKyBwYXJ0LnBhcnQuZGVzaXJlZFNpemUuaGVpZ2h0ICsgJywgbG9jYXRpb246ICcgKyBwYXJ0LnBhcnQubG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJ0LmxvY2F0aW9uLngpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbG9jJywgKHBhcnQubG9jYXRpb24ueCAtIHBhcmVudFgpICsgJyAnICsgKHBhcnQubG9jYXRpb24ueSAtIHBhcmVudFkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSBjaGFuZ2luZyBsYXlvdXRzIG9mIHRoaW5ncyBhbmQgdGhlaXIgZGVzY2VuZGFudHMgLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZyb21BbmRUb05vZGVzQXJlVmlzaWJsZShsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsuZnJvbU5vZGUgJiZcclxuICAgICAgICAgICAgbGluay50b05vZGUgJiZcclxuICAgICAgICAgICAgIXRoaXMuaGFzQ29sbGFwc2VkQW5jZXN0b3IobGluay5mcm9tTm9kZSkgJiZcclxuICAgICAgICAgICAgIXRoaXMuaGFzQ29sbGFwc2VkQW5jZXN0b3IobGluay50b05vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGxhYmVsTm9kZUlzVmlzaWJsZShsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsubGFiZWxOb2Rlcy5jb3VudCAmJiBsaW5rLmxhYmVsTm9kZXMuZmlyc3QoKS52aXNpYmxlO1xyXG4gICAgfVxyXG5cclxuICAgIGhhc0NvbGxhcHNlZEFuY2VzdG9yKGdyb3VwKSB7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgaWYgKCFncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwLmlzU3ViR3JhcGhFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBncm91cCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRIaWdoZXN0QW5jZXN0b3JXaXRoTGF5b3V0KGdyb3VwLCBsYXlvdXROYW1lcykge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5jb250YWlucyhsYXlvdXROYW1lcywgZ3JvdXAuY29udGFpbmluZ0dyb3VwLmRhdGEubGF5b3V0KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFyZVNpc3RlcnNJbkludmVudG9yeUxheW91dChncm91cDEsIGdyb3VwMikge1xyXG4gICAgICAgIHJldHVybiBncm91cDEuY29udGFpbmluZ0dyb3VwID09PSBncm91cDIuY29udGFpbmluZ0dyb3VwICYmXHJcbiAgICAgICAgICAgIGdyb3VwMS5jb250YWluaW5nR3JvdXAgJiZcclxuICAgICAgICAgICAgXy5jb250YWlucyhbJ2xlZnQnLCAncmlnaHQnXSwgZ3JvdXAxLmNvbnRhaW5pbmdHcm91cC5kYXRhLmxheW91dCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNOb3RXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuaXNXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIGlzUlRoaW5nV2l0aGluSW52ZW50b3J5TGF5b3V0KGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwLmlzTGlua0xhYmVsICYmIHRoaXMuaXNXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIGlzV2l0aGluSW52ZW50b3J5TGF5b3V0KGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNXaXRoaW5MYXlvdXQoZ3JvdXAsIFsnbGVmdCcsICdyaWdodCddKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1dpdGhpbkxlZnRJbnZlbnRvcnlMYXlvdXQoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc1dpdGhpbkxheW91dChncm91cCwgWydsZWZ0J10pO1xyXG4gICAgfVxyXG5cclxuICAgIGlzV2l0aGluUmlnaHRJbnZlbnRvcnlMYXlvdXQoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc1dpdGhpbkxheW91dChncm91cCwgWydyaWdodCddKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1dpdGhpbkZyZWVoYW5kTGF5b3V0KGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNXaXRoaW5MYXlvdXQoZ3JvdXAsIFsnZnJlZWhhbmQnXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNXaXRoaW5TdGFja2VkTGF5b3V0KGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNXaXRoaW5MYXlvdXQoZ3JvdXAsIFsnc3RhY2tlZCddKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1dpdGhpbkxheW91dChncm91cCwgbGF5b3V0TmFtZXMpIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnaXNXaXRoaW5MYXlvdXQ6ICcgKyBncm91cCArICdsYXlvdXRzOiAnICsgbGF5b3V0TmFtZXMuam9pbigpICsgJzogZmFsc2UnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChfLmNvbnRhaW5zKGxheW91dE5hbWVzLCBncm91cC5jb250YWluaW5nR3JvdXAuZGF0YS5sYXlvdXQpKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdpc1dpdGhpbkxheW91dDogJyArIGdyb3VwICsgJ2xheW91dHM6ICcgKyBsYXlvdXROYW1lcy5qb2luKCkgKyAnOiB0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3dMZWZ0VGV4dEJsb2NrKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNXaXRoaW5SaWdodEludmVudG9yeUxheW91dChncm91cCkgJiZcclxuICAgICAgICAgICAgIXRoaXMuaXNXaXRoaW5TdGFja2VkTGF5b3V0KGdyb3VwKSAmJlxyXG4gICAgICAgICAgICAhZ3JvdXAuaXNMaW5rTGFiZWw7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1JpZ2h0VGV4dEJsb2NrKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNXaXRoaW5MZWZ0SW52ZW50b3J5TGF5b3V0KGdyb3VwKSAmJlxyXG4gICAgICAgICAgICAhdGhpcy5pc1dpdGhpblN0YWNrZWRMYXlvdXQoZ3JvdXApICYmXHJcbiAgICAgICAgICAgICFncm91cC5pc0xpbmtMYWJlbDtcclxuICAgIH1cclxuXHJcbiAgICBzZXREZXNjZW5kYW50TGF5b3V0cyhncm91cCwgbGF5b3V0TmFtZSkge1xyXG4gICAgICAgIGlmIChsYXlvdXROYW1lID09PSAnbGVmdCcgfHwgbGF5b3V0TmFtZSA9PT0gJ3JpZ2h0JyB8fCBsYXlvdXROYW1lID09PSAnc3RhY2tlZCcpIHtcclxuICAgICAgICAgICAgbGV0IGl0ID0gZ3JvdXAubWVtYmVyUGFydHMuaXRlcmF0b3I7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmICFwYXJ0LmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydC5kYXRhLmxheW91dCA9IGxheW91dE5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREZXNjZW5kYW50TGF5b3V0cyhwYXJ0LCBsYXlvdXROYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAobGF5b3V0TmFtZSA9PT0gJ2ZyZWVoYW5kJykge1xyXG4gICAgICAgICAgICAvLyBzdGFja2VkP1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNhYmxlTGF5b3V0Rm9yU2VsZWN0ZWRUaGluZ3MobGF5b3V0TmFtZSkge1xyXG4gICAgICAgIGxldCBpdCA9IHRoaXMuX21hcC5nZXREaWFncmFtKCkuc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIGlmICghaXQuY291bnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1dpdGhpbkxheW91dChncm91cCwgWydsZWZ0JywgJ3JpZ2h0JywgJ3N0YWNrZWQnXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gc2NhbGluZyBmdW5jdGlvbnMsIGV0Yy4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIENvbXB1dGVzIHRoZSBsZXZlbCBvZiB0aGlzIGdyb3VwXHJcbiAgICBjb21wdXRlTGV2ZWwoZ3JvdXApIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjb21wdXRlTGV2ZWwsIHBhcnQ6ICcgKyBwYXJ0ICsgJywgY29udGFpbmluZ0dyb3VwOiAnICsgcGFydC5jb250YWluaW5nR3JvdXApO1xyXG4gICAgICAgIGlmICghKGdyb3VwIGluc3RhbmNlb2YgZ28uR3JvdXApIHx8IGdyb3VwLmNvbnRhaW5pbmdHcm91cCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wdXRlTGV2ZWwoZ3JvdXAuY29udGFpbmluZ0dyb3VwKSArIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGdldHMgdGhlIGJhc2ljIHNjYWxpbmcgZm9yIHRoaW5nIHNxdWFyZXMsIGJ5IGxldmVsXHJcbiAgICBnZXRUaGluZ1NjYWxlKGxldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KDAuNDUsIGxldmVsKTsgLy8gMSwgLjQ1LCAuMjAyNSwgLjA5MTEyNSwgLi4uXHJcbiAgICB9XHJcblxyXG4gICAgLy8gdGhpcyBpcyBvbmx5IHVzZWQgZm9yIGdyb3Vwc1xyXG4gICAgZ2V0U2NhbGUoZ3JvdXAsIHZpc2l0ZWRHcm91cEtleXMpIHtcclxuICAgICAgICBpZiAoZ3JvdXApIHtcclxuICAgICAgICAgICAgLy8ga2VlcCB0cmFjayBvZiBncm91cHMgd2UndmUgdmlzaXRlZCB0byBhdm9pZCBpbmZpbml0ZSByZWN1cnNpb25cclxuICAgICAgICAgICAgLy8gVE9ETzogdHJhY2sgZG93biBleGFjdGx5IGhvdyBpbmZpbml0ZSBsb29wcyBhcmUgb2NjdXJyaW5nLFxyXG4gICAgICAgICAgICAvLyBvciBJRiB0aGV5IHN0aWxsIGFyZSBzaW5jZSB0aGlzLl9tYXAuY2hlY2tNb2RlbCB3YXMgaW50cm9kdWNlZC4uLlxyXG4gICAgICAgICAgICBpZiAodmlzaXRlZEdyb3VwS2V5cyAmJiBBcnJheS5pc0FycmF5KHZpc2l0ZWRHcm91cEtleXMpKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd2aXNpdGVkR3JvdXBLZXlzOiAnICsgdmlzaXRlZEdyb3VwS2V5cyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5jb250YWlucyh2aXNpdGVkR3JvdXBLZXlzLCBncm91cC5kYXRhLmtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdoaXQgYWxyZWFkeSB2aXNpdGVkIGtleTogJyArIGdyb3VwLmRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlzaXRlZEdyb3VwS2V5cy5wdXNoKGdyb3VwLmRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZpc2l0ZWRHcm91cEtleXMgPSBbZ3JvdXAuZGF0YS5rZXldO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZ3JvdXAubGFiZWxlZExpbmspIHsgLy8gUi10aGluZ1xyXG4gICAgICAgICAgICAgICAgbGV0IGZyb21TY2FsZSA9IHRoaXMuZ2V0U2NhbGUoZ3JvdXAubGFiZWxlZExpbmsuZnJvbU5vZGUsIHZpc2l0ZWRHcm91cEtleXMpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRvU2NhbGUgPSB0aGlzLmdldFNjYWxlKGdyb3VwLmxhYmVsZWRMaW5rLnRvTm9kZSwgdmlzaXRlZEdyb3VwS2V5cyk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTY2FsZSwgZnJvbVNjYWxlOiAnICsgZnJvbVNjYWxlICsgJywgdG9TY2FsZTogJyArIHRvU2NhbGUgKyAnLCB2aXNpdGVkR3JvdXBLZXlzOiAnICsgdmlzaXRlZEdyb3VwS2V5cy5qb2luKCcsJykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKGZyb21TY2FsZSwgdG9TY2FsZSkgKiAwLjU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTY2FsZShncm91cC5jb250YWluaW5nR3JvdXAsIHZpc2l0ZWRHcm91cEtleXMpICogMC40NTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRoaW5nU2NhbGUodGhpcy5jb21wdXRlTGV2ZWwoZ3JvdXApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMTsgLy8gY2FuIG9jY3VyIHdoZW4gZHJhZ2dpbmcgUiB0byBlbXB0eSBzcGFjZVxyXG4gICAgfVxyXG5cclxuICAgIFxyXG5cclxuICAgIFxyXG5cclxuICAgIGdldEV4dGVybmFsVGV4dFNjYWxlKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSAwLjEgKiB0aGlzLmNvbXB1dGVMZXZlbChncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TGlua1N0cm9rZVdpZHRoKGxpbmspIHtcclxuICAgICAgICBsZXQgZnJvbVNjYWxlID0gdGhpcy5nZXRTY2FsZShsaW5rLmZyb21Ob2RlKTtcclxuICAgICAgICBsZXQgdG9TY2FsZSA9IHRoaXMuZ2V0U2NhbGUobGluay50b05vZGUpO1xyXG4gICAgICAgIHJldHVybiAobGluay5pc1NlbGVjdGVkID8gNCA6IDIpICogTWF0aC5taW4oZnJvbVNjYWxlLCB0b1NjYWxlKTsgLy8gMiwgLjksIC4uLlxyXG4gICAgfVxyXG5cclxuICAgIC8vIHNjYWxlIGFycm93aGVhZHMgYmFzZWQgb24gdGhlIHNtYWxsZXN0IHRvL2Zyb20gbm9kZSwgXHJcbiAgICAvLyBvciBqdXN0IHRoZSBUbyBub2RlIGZvciBQIGxpbmtzXHJcbiAgICBnZXRBcnJvd2hlYWRTY2FsZShsaW5rKSB7XHJcbiAgICAgICAgbGV0IGZyb21TY2FsZSA9IHRoaXMuZ2V0U2NhbGUobGluay5mcm9tTm9kZSk7XHJcbiAgICAgICAgbGV0IHRvU2NhbGUgPSB0aGlzLmdldFNjYWxlKGxpbmsudG9Ob2RlKTtcclxuICAgICAgICBsZXQgbWluU2NhbGUgPSBNYXRoLm1pbihmcm9tU2NhbGUsIHRvU2NhbGUpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJnZXRBcnJvd2hlYWRTY2FsZSwgZnJvbVNjYWxlOiBcIiwgZnJvbVNjYWxlLCAnLCB0b1NjYWxlOiAnLCB0b1NjYWxlLCAnLCBtaW5TY2FsZTogJywgbWluU2NhbGUpO1xyXG4gICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT09ICdQJykge1xyXG4gICAgICAgICAgICBtaW5TY2FsZSA9IHRvU2NhbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtaW5TY2FsZSA+PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxICogbWluU2NhbGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEuNSAqIG1pblNjYWxlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBjcmVhdGluZyBuZXcgdGhpbmdzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBSZXR1cm5zIGEgbG9jYXRpb24gZm9yIGEgbmV3IHNpc3RlciBncm91cCAodGhpbmcpIHRvIHRoZSBnaXZlbiBvbmUsIFxyXG4gICAgLy8gd2hpY2ggd2lsbCBub3QgaGlkZSBhbnkgZXhpc3RpbmcgdGhpbmdzIChvdmVybGFwIGlzIGFsbG93ZWQpLiBcclxuICAgIC8vIFRoZSByZXR1cm5lZCBjb29yZGluYXRlcyBhcmUgYWJzb2x1dGUgZm9yIGEgdG9wLWxldmVsIGdyb3VwLCBcclxuICAgIC8vIG9yIHJlbGF0aXZlIHRvIHRoZSBwYXJlbnQgb3RoZXJ3aXNlIC0gc3VpdGFibGUgZm9yIHVzZSB3aXRoIEZyZWVoYW5kRGlhZ3JhbUxheW91dFxyXG4gICAgLy8gb3IgRnJlZWhhbmRMYXlvdXQsIHJlc3AuXHJcbiAgICBnZXROZXdTaXN0ZXJMb2NhdGlvbihncm91cCwgd2l0aFIpIHtcclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgLy8gaWYgd2UgYXJlIHdpdGhpbiBhbm90aGVyIGdyb3VwLCB0aGluZ3MgYXJlIGluIGFic29sdXRlIGNvb3JkaW5hdGVzXHJcbiAgICAgICAgLy8gYW5kIHNpc3RlcnMgYXJlIHBsYWNlZCBhYm92ZSB0aGUgdGhpbmc7IG90aGVyd2lzZSByZWxhdGl2ZSBhbmQgYmVsb3cuLi5cclxuICAgICAgICBsZXQgaW5Hcm91cCA9IChncm91cC5jb250YWluaW5nR3JvdXAgIT09IG51bGwpO1xyXG4gICAgICAgIC8vIC4uLiBleGNlcHQgaWYgd2l0aFIgaXMgdHJ1ZSwgd2UgZ28gdG8gdGhlIHJpZ2h0IGluc3RlYWQgb2YgYWJvdmUgb3IgYmVsb3cuXHJcblxyXG4gICAgICAgIC8vIHN0YXJ0IGJlbG93IGlmIGluIGdyb3VwLCBlbHNlIGFib3ZlOyBvciB0byB0aGUgcmlnaHQgaWYgd2l0aFJcclxuICAgICAgICBsZXQgeCwgeSwgdywgaDtcclxuICAgICAgICBpZiAod2l0aFIpIHtcclxuICAgICAgICAgICAgeCA9IGdyb3VwLmxvY2F0aW9uLnggKyBncm91cC5hY3R1YWxCb3VuZHMud2lkdGggKiAyLjI7XHJcbiAgICAgICAgICAgIHkgPSBncm91cC5sb2NhdGlvbi55O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHggPSBncm91cC5sb2NhdGlvbi54O1xyXG4gICAgICAgICAgICB5ID0gZ3JvdXAubG9jYXRpb24ueSArIGdyb3VwLmFjdHVhbEJvdW5kcy5oZWlnaHQgKiAxLjEgKiAoaW5Hcm91cCA/IDEgOiAtMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHcgPSBncm91cC5hY3R1YWxCb3VuZHMud2lkdGg7XHJcbiAgICAgICAgaCA9IGdyb3VwLmFjdHVhbEJvdW5kcy5oZWlnaHQ7XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGZvciBvdmVybGFwcGluZyBwYXJ0czsgaWYgZm91bmQsIGluY3JlbWVudCB4LHkgYW5kIGNvbnRpbnVlXHJcblxyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGxldCByZWN0ID0gbmV3IGdvLlJlY3QoeCwgeSwgdywgaCk7XHJcbiAgICAgICAgICAgIHJlY3QuZ3JvdyhoIC8gMTAsIHcgLyAxMCwgaCAvIDEwLCB3IC8gMTApO1xyXG4gICAgICAgICAgICBsZXQgcGFydHMgPSBkaWFncmFtLmZpbmRPYmplY3RzSW4ocmVjdCwgbnVsbCwgdGhpcy5pc0dyb3VwKTtcclxuICAgICAgICAgICAgaWYgKHBhcnRzLmNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0TmV3U2lzdGVyTG9jYXRpb246IG92ZXJsYXBwaW5nIHBhcnQgZm91bmQgaW4gJyArIHJlY3QpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpdGhSKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeCArPSB3IC8gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgeSArPSBoIC8gMTA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHggKz0gdyAvIDEwO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgKz0gaCAvIDEwICogKGluR3JvdXAgPyAxIDogLTEpOyAvLyBtb3ZlIGRvd24gaWYgaW4gZ3JvdXAsIGVsc2UgdXBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXROZXdTaXN0ZXJMb2NhdGlvbjogbm8gb3ZlcmxhcHBpbmcgcGFydCBmb3VuZCBpbiAnICsgcmVjdCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW5Hcm91cCkgeyAvLyBtYWtlIGNvb3JkaW5hdGVzIHJlbGF0aXZlXHJcbiAgICAgICAgICAgIHggLT0gZ3JvdXAuY29udGFpbmluZ0dyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgICAgIHkgLT0gZ3JvdXAuY29udGFpbmluZ0dyb3VwLmxvY2F0aW9uLnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgZ28uUG9pbnQoeCArIE1hdGgucmFuZG9tKCksIHkgKyBNYXRoLnJhbmRvbSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIGEgbG9jYXRpb24gZm9yIGEgbmV3IGNoaWxkIGdyb3VwICh0aGluZykgdG8gdGhlIGdpdmVuIG9uZSxcclxuICAgIC8vIHdoaWNoIHdpbGwgbm90IGhpZGUgYW55IGV4aXN0aW5nIGNoaWxkcmVuIChvdmVybGFwIGlzIGFsbG93ZWQpLlxyXG4gICAgLy8gVGhlIHJldHVybmVkIGNvb3JkaW5hdGVzIGFyZSByZWxhdGl2ZSB0byB0aGUgcGFyZW50IGdyb3VwIC0gc3VpdGFibGUgZm9yIHVzZSB3aXRoIEZyZWVoYW5kTGF5b3V0LlxyXG4gICAgZ2V0TmV3Q2hpbGRMb2NhdGlvbihncm91cCkge1xyXG4gICAgICAgIGxldCBncm91cEJvdW5kcyA9IGdyb3VwLmFjdHVhbEJvdW5kcztcclxuICAgICAgICAvLyBOQjogYWxsIHgveSBsb2NhdGlvbnMgYXJlIHJlbGF0aXZlIHRvIHRoZSBncm91cCBsb2NhdGlvblxyXG4gICAgICAgIGxldCB4ID0gMDtcclxuICAgICAgICBsZXQgeSA9IGdyb3VwQm91bmRzLmhlaWdodCAqIDEuMTtcclxuICAgICAgICBsZXQgdywgaDtcclxuICAgICAgICBsZXQgbWVtYmVycyA9IGdyb3VwLm1lbWJlclBhcnRzO1xyXG4gICAgICAgIC8vIGtlZXAgdGVzdGluZyBuZXcgcmVjdGFuZ2xlcyB1bnRpbCB3ZSBmaW5kIG9uZSB0aGF0IGRvZXNuJ3Qgb3ZlcmxhcCB3aXRoIGFueSBleGlzdGluZyBtZW1iZXIgb2YgdGhlIGdyb3VwXHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgbWVtYmVycy5yZXNldCgpO1xyXG4gICAgICAgICAgICBsZXQgb3ZlcmxhcHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IG1lbWJlciwgbmV3UmVjdCwgbWVtYmVyUmVjdDtcclxuICAgICAgICAgICAgd2hpbGUgKG1lbWJlcnMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXIgPSBtZW1iZXJzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1lbWJlckJvdW5kcyA9IG1lbWJlci5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgICAgICAgICB3ID0gbWVtYmVyQm91bmRzLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgaCA9IG1lbWJlckJvdW5kcy5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAvLyBmaW5kIHRoZSBleGlzdGluZyBtZW1iZXIncyBhY3R1YWwgYm91bmRzIChhYnNvbHV0ZSBjb29yZHMpXHJcbiAgICAgICAgICAgICAgICBtZW1iZXJSZWN0ID0gbmV3IGdvLlJlY3QobWVtYmVyQm91bmRzLnggLSBncm91cEJvdW5kcy54LCBtZW1iZXJCb3VuZHMueSAtIGdyb3VwQm91bmRzLnksIG1lbWJlckJvdW5kcy53aWR0aCwgbWVtYmVyQm91bmRzLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBuZXdSZWN0ID0gbmV3IGdvLlJlY3QoeCwgeSwgdywgaCk7XHJcbiAgICAgICAgICAgICAgICBuZXdSZWN0Lmdyb3coaCAvIDUsIHcgLyA1LCBoIC8gNSwgdyAvIDUpO1xyXG4gICAgICAgICAgICAgICAgb3ZlcmxhcHMgPSBuZXdSZWN0LmNvbnRhaW5zUmVjdChtZW1iZXJSZWN0KTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXROZXdDaGlsZExvY2F0aW9uIGZvciAnICsgbWVtYmVyICsgJzogbmV3UmVjdCA9ICcgKyBuZXdSZWN0ICsgJywgbWVtYmVyUmVjdCA9ICcgKyBtZW1iZXJSZWN0ICsgJywgb3ZlcmxhcHM6ICcgKyBvdmVybGFwcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3ZlcmxhcHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3ZlcmxhcHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluY3JlbWVudCB4LCB5IGFuZCB0cnkgYWdhaW5cclxuICAgICAgICAgICAgICAgIHggKz0gdyAvIDU7XHJcbiAgICAgICAgICAgICAgICB5ICs9IGggLyA1O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gZm91bmQgYSBnb29kIHNwb3QhXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IGdvLlBvaW50KHgsIHkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGEgc2ltcGxlciB2ZXJzaW9uIG9mIGdldE5ld0NoaWxkTG9jYXRpb24gdGhhdCBwbGFjZXMgdGhlIGNoaWxkIG91dHNpZGUgdGhlIGJvdW5kcyBvZiB0aGUgZXhpc3RpbmcgY2hpbGRyZW5cclxuICAgIGdldE5ld0NoaWxkTG9jYXRpb24yKGdyb3VwKSB7XHJcbiAgICAgICAgbGV0IGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgIGxldCBjaGlsZEJvdW5kcyA9IHRoaXMuX21hcC5zYWZlUmVjdCh0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLmNvbXB1dGVQYXJ0c0JvdW5kcyhncm91cC5tZW1iZXJQYXJ0cykpO1xyXG4gICAgICAgIGxldCB4ID0gMDtcclxuICAgICAgICBsZXQgeSA9IDA7XHJcbiAgICAgICAgaWYgKCFncm91cC5tZW1iZXJQYXJ0cy5jb3VudCkge1xyXG4gICAgICAgICAgICB5ID0gZ3JvdXBCb3VuZHMuaGVpZ2h0ICogMS4yO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHkgPSBncm91cEJvdW5kcy5oZWlnaHQgKiAxLjQgKyBjaGlsZEJvdW5kcy5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2dldE5ld0NoaWxkTG9jYXRpb24yLCBjaGlsZEJvdW5kczogJyArIGNoaWxkQm91bmRzICsgJywgZ3JvdXBCb3VuZHM6ICcgKyBncm91cEJvdW5kcyArICcsIHg6ICcgKyB4ICsgJywgeTogJyArIHkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgZ28uUG9pbnQoeCwgeSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbW92ZSBhbGwgdGhlIGdpdmVuIG5ldyBtZW1iZXIgZ3JvdXBzIHNvIHRoYXQgdGhlaXIgbG9jYXRpb25zIGFyZSByZWxhdGl2ZSB0byB0aGF0IG9mIFxyXG4gICAgLy8gdGhlIHBhcmVudCBhbmQgaXRzIHByZXZpb3VzbHkgZXhpc3RpbmcgbWVtYmVycywgYW5kIHNjYWxlZCBkb3duIGFwcHJvcHJpYXRlbHlcclxuICAgIGxheW91dE5ld01lbWJlcnNSZWxhdGl2ZVRvKG5ld01lbWJlcnMsIHBhcmVudCwgb2xkTWVtYmVyQm91bmRzKSB7XHJcbiAgICAgICAgLy8gaG93IGJpZyB3YXMgdGhlIHBhcmVudCBzeXN0ZW0gYmVmb3JlIHRoZSBuZXcgZ3JvdXBzIHdlcmUgYWRkZWQ/XHJcbiAgICAgICAgbGV0IHN5c3RlbUJvdW5kcyA9IHBhcmVudC5hY3R1YWxCb3VuZHMudW5pb25SZWN0KG9sZE1lbWJlckJvdW5kcyk7XHJcblxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgb2xkL25ldyBvcmlnaW5zIC0gcGxhY2UgbmV3IG9yaWdpbiBiZWxvdyBleGlzdGluZyBzeXN0ZW1cclxuICAgICAgICBsZXQgb2xkQm91bmRzID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKS5jb21wdXRlUGFydHNCb3VuZHMobmV3TWVtYmVycyk7XHJcbiAgICAgICAgbGV0IG9sZE9yaWdpbiA9IG5ldyBnby5Qb2ludChvbGRCb3VuZHMueCwgb2xkQm91bmRzLnkpO1xyXG4gICAgICAgIGxldCBuZXdPcmlnaW4gPSBuZXcgZ28uUG9pbnQoMCwgc3lzdGVtQm91bmRzLmhlaWdodCAqIDEuMik7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2xheW91dE5ld01lbWJlcnNSZWxhdGl2ZVRvLCBzeXN0ZW1Cb3VuZHM6ICcgKyBzeXN0ZW1Cb3VuZHMgKyAnLCBvbGRCb3VuZHM6ICcgKyBvbGRCb3VuZHMgK1xyXG4gICAgICAgICAgICAnLCBvbGRPcmlnaW46ICcgKyBvbGRPcmlnaW4gKyAnLCBuZXdPcmlnaW46ICcgKyBuZXdPcmlnaW4pO1xyXG5cclxuICAgICAgICAvLyBmaWd1cmUgb3V0IG5ldyBzY2FsZWQgbG9jYXRpb25zXHJcbiAgICAgICAgLy8gTkI6IHdlIGNhbiBhc3N1bWUgbmV3TWVtYmVycyBhcmUgYWxsIG9uZSBsZXZlbCBkb3duIGZyb20gcGFyZW50IChzZWUgdGhpcy5fbWFwLmFkZFNlbGVjdGVkVGhpbmdzQXNDaGlsZHJlbk9mKSwgXHJcbiAgICAgICAgLy8gc28gd2UganVzdCBtdWx0aXBseSBieSB0aGUgc3RhbmRhcmQgc2NhbGUgZmFjdG9yXHJcbiAgICAgICAgbGV0IGl0ID0gbmV3TWVtYmVycy5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBsZXQgZ3JvdXBCb3VuZHMgPSBncm91cC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgICAgIGxldCBuZXdYID0gbmV3T3JpZ2luLnggKyAoZ3JvdXBCb3VuZHMueCAtIG9sZE9yaWdpbi54KSAqIDAuNDU7XHJcbiAgICAgICAgICAgIGxldCBuZXdZID0gbmV3T3JpZ2luLnkgKyAoZ3JvdXBCb3VuZHMueSAtIG9sZE9yaWdpbi55KSAqIDAuNDU7XHJcbiAgICAgICAgICAgIGxldCBuZXdMb2MgPSBnby5Qb2ludC5zdHJpbmdpZnkobmV3IGdvLlBvaW50KG5ld1gsIG5ld1kpKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xheW91dE5ld01lbWJlcnNSZWxhdGl2ZVRvLCBncm91cEJvdW5kczogJyArIGdyb3VwQm91bmRzICsgJywgbmV3TG9jOiAnICsgbmV3TG9jKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ2xvYycsIG5ld0xvYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIG1vdmUgYWxsIHRoZSBnaXZlbiBvbGQgbWVtYmVyIGdyb3VwcyBzbyB0aGF0IHRoZWlyIGxvY2F0aW9ucyBhcmUgYWJzb2x1dGUgYW5kIGFib3ZlXHJcbiAgICAvLyB0aGUgcGFyZW50LCBhbmQgc2NhbGVkIHVwIGFwcHJvcHJpYXRlbHlcclxuICAgIGxheW91dE9sZE1lbWJlcnNPdXRzaWRlT2Yob2xkTWVtYmVycywgcGFyZW50LCBvbGRNZW1iZXJzQm91bmRzLCBvbGRNZW1iZXJzTGV2ZWwpIHtcclxuICAgICAgICAvLyBmaWd1cmUgb3V0IHNjYWxlIGZhY3RvciAobWVtYmVycyBjYW4gYmUgZHJhZ2dlZCB1cCBtdWx0aXBsZSBsZXZlbHMsIHVubGlrZSBkcmFnZ2luZyBpbnRvIFMpXHJcbiAgICAgICAgbGV0IHNjYWxlRmFjdG9yID0gTWF0aC5wb3coMC40NSwgb2xkTWVtYmVyc0xldmVsIC0gdGhpcy5jb21wdXRlTGV2ZWwocGFyZW50KSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2xheW91dE9sZE1lbWJlcnNPdXRzaWRlT2YsIHNjYWxlRmFjdG9yOiAnICsgc2NhbGVGYWN0b3IpO1xyXG5cclxuICAgICAgICAvLyBmaWd1cmUgb3V0IG9sZC9uZXcgb3JpZ2lucyAtIHBsYWNlIG5ldyBvcmlnaW4gYWJvdmUgcGFyZW50LCB3aXRoIHZlcnRpY2FsIHNwYWNlIGZvciBzY2FsZWQtdXAgb2xkTWVtYmVyc1xyXG4gICAgICAgIGxldCBwYXJlbnRCb3VuZHMgPSBwYXJlbnQuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgIGxldCBvbGRPcmlnaW4gPSBuZXcgZ28uUG9pbnQob2xkTWVtYmVyc0JvdW5kcy54LCBvbGRNZW1iZXJzQm91bmRzLnkpO1xyXG4gICAgICAgIGxldCBuZXdPcmlnaW4gPSBuZXcgZ28uUG9pbnQocGFyZW50Qm91bmRzLngsIHBhcmVudEJvdW5kcy55IC0gb2xkTWVtYmVyc0JvdW5kcy5oZWlnaHQgKiAxLjIgLyBzY2FsZUZhY3Rvcik7XHJcblxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgbmV3IHNjYWxlZCBsb2NhdGlvbnNcclxuICAgICAgICBsZXQgaXQgPSBvbGRNZW1iZXJzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgbGV0IGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGxldCBncm91cEJvdW5kcyA9IGdyb3VwLmFjdHVhbEJvdW5kcztcclxuICAgICAgICAgICAgbGV0IG5ld1ggPSBuZXdPcmlnaW4ueCArIChncm91cEJvdW5kcy54IC0gb2xkT3JpZ2luLngpIC8gc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIGxldCBuZXdZID0gbmV3T3JpZ2luLnkgKyAoZ3JvdXBCb3VuZHMueSAtIG9sZE9yaWdpbi55KSAvIHNjYWxlRmFjdG9yO1xyXG4gICAgICAgICAgICBsZXQgbmV3TG9jID0gZ28uUG9pbnQuc3RyaW5naWZ5KG5ldyBnby5Qb2ludChuZXdYLCBuZXdZKSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsYXlvdXRPbGRNZW1iZXJzT3V0c2lkZU9mLCBwYXJlbnRCb3VuZHM6ICcgKyBwYXJlbnRCb3VuZHMgKyAnLCBvbGRNZW1iZXJzQm91bmRzOiAnICsgb2xkTWVtYmVyc0JvdW5kcyArXHJcbiAgICAgICAgICAgICAgICAnLCBuZXdPcmlnaW46ICcgKyBuZXdPcmlnaW4gKyAnLCBncm91cEJvdW5kczogJyArIGdyb3VwQm91bmRzICsgJywgbmV3TG9jOiAnICsgbmV3TG9jKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ2xvYycsIGdvLlBvaW50LnN0cmluZ2lmeShuZXdMb2MpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0gYWNjZXNzb3JzIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBhcHByb3ByaWF0ZSBsYXlvdXQgY2xhc3MgYnkgYWJicmV2aWF0ZWQgbmFtZVxyXG4gICAgZ2V0TGF5b3V0KGxheW91dE5hbWUpIHtcclxuICAgICAgICBjb25zdCBMZWZ0SW52ZW50b3J5TGF5b3V0ID0gcmVxdWlyZSgnLi9sYXlvdXRzL0xlZnRJbnZlbnRvcnlMYXlvdXQuanMnKTtcclxuICAgICAgICBjb25zdCBSaWdodEludmVudG9yeUxheW91dCA9IHJlcXVpcmUoJy4vbGF5b3V0cy9SaWdodEludmVudG9yeUxheW91dC5qcycpO1xyXG4gICAgICAgIGNvbnN0IFN0YWNrZWRMYXlvdXQgPSByZXF1aXJlKCcuL2xheW91dHMvU3RhY2tlZExheW91dC5qcycpO1xyXG4gICAgICAgIGNvbnN0IEZyZWVoYW5kTGF5b3V0ID0gcmVxdWlyZSgnLi9sYXlvdXRzL0ZyZWVoYW5kTGF5b3V0LmpzJyk7XHJcbiAgICAgICAgaWYgKGxheW91dE5hbWUgPT09ICdmcmVlaGFuZCcpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnJlZWhhbmRMYXlvdXQoKTtcclxuICAgICAgICBlbHNlIGlmIChsYXlvdXROYW1lID09PSAncmlnaHQnKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJpZ2h0SW52ZW50b3J5TGF5b3V0KCk7XHJcbiAgICAgICAgZWxzZSBpZiAobGF5b3V0TmFtZSA9PT0gJ3N0YWNrZWQnKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFN0YWNrZWRMYXlvdXQoKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTGVmdEludmVudG9yeUxheW91dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZyZWVoYW5kRGlhZ3JhbUxheW91dCgpIHtcclxuICAgICAgICBjb25zdCBGcmVlaGFuZERpYWdyYW1MYXlvdXQgPSByZXF1aXJlKCcuL2xheW91dHMvRnJlZWhhbmREaWFncmFtTGF5b3V0LmpzJyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGcmVlaGFuZERpYWdyYW1MYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHJldHVybnMgdHJ1ZSBpZiB0aGUgdG8gYW5kIGZyb20gbm9kZXMgZm9yIHRoZSBsaW5rIGhhdmUgYSBjb21tb24gYW5jZXN0b3IgZ3JvdXAgd2l0aCBvbmUgb2YgdGhlIGdpdmVuIGxheW91dCBuYW1lcy5cclxuICAgIC8vIFRPRE86IHZlcmlmeSBsb2dpYyAtIHdoYXQgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHN1Y2ggYW5jZXN0b3JzPyAtIHRoaXMgc2hvdWxkIHJldHVybiB0aGUgaGlnaGVzdCBvbmUuLi5cclxuICAgIGdldENvbW1vbkFuY2VzdG9yV2l0aExheW91dChncm91cDEsIGdyb3VwMiwgbGF5b3V0TmFtZXMpIHtcclxuICAgICAgICBsZXQgYW5jZXN0b3JzMSA9IHRoaXMuZ2V0QW5jZXN0b3JHcm91cHMoZ3JvdXAxKTtcclxuICAgICAgICBsZXQgYW5jZXN0b3JzMiA9IHRoaXMuZ2V0QW5jZXN0b3JHcm91cHMoZ3JvdXAyKTtcclxuICAgICAgICBsZXQgY29tbW9uQW5jZXN0b3JzID0gXy5pbnRlcnNlY3Rpb24oYW5jZXN0b3JzMSwgYW5jZXN0b3JzMik7XHJcbiAgICAgICAgbGV0IGxheW91dEFuY2VzdG9ycyA9IF8uZmlsdGVyKGNvbW1vbkFuY2VzdG9ycywgZnVuY3Rpb24gKGdyb3VwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmluZGV4T2YobGF5b3V0TmFtZXMsIGdyb3VwLmRhdGEubGF5b3V0KSAhPT0gLTE7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGxheW91dEFuY2VzdG9ycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxheW91dEFuY2VzdG9yc1swXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgYW5jZXN0b3JzIG9mIHRoaXMgZ3JvdXAsIGluY2x1ZGluZyBpdHNlbGZcclxuICAgIGdldEFuY2VzdG9yR3JvdXBzKGdyb3VwKSB7XHJcbiAgICAgICAgbGV0IGFuY2VzdG9ycyA9IFtncm91cF07XHJcbiAgICAgICAgbGV0IGcgPSBncm91cDtcclxuICAgICAgICB3aGlsZSAoZy5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgYW5jZXN0b3JzLnB1c2goZy5jb250YWluaW5nR3JvdXApO1xyXG4gICAgICAgICAgICBnID0gZy5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhbmNlc3RvcnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblxyXG5cclxuXHJcbiAgICAvLyBpZiBhbnkgZ3JvdXAgaW4gdGhlIGdpdmVuIEl0ZXJhdG9yIGRvZXMgbm90IGhhdmUgYSBsb2NhdGlvbiAoZGF0YS5sb2MpLCBzZXQgb25lXHJcbiAgICAvLyB0aGF0IGRvZXNuJ3Qgb3ZlcmxhcCB3aXRoIHRoZSBvdGhlciBtZW1iZXJzXHJcbiAgICB2YWxpZGF0ZUdyb3VwTG9jYXRpb25zKGdyb3Vwcykge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGxpbmsgcm91dGluZyBhbmQgdmlzaWJpbGl0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBhZGp1c3QgdGhlIHJvdXRpbmcsIHZpc2liaWxpdHkgYW5kIG90aGVyIHByb3BlcnRpZXMgb2YgYSBsaW5rIGFjY29yZGluZyB0byB2YXJpb3VzIHN0cnVjdHVyYWwgY3JpdGVyaWFcclxuICAgIGFkanVzdExpbmtMYXlvdXQobGluaykge1xyXG4gICAgICAgIGlmICghbGluayB8fCAhbGluay5mcm9tTm9kZSB8fCAhbGluay50b05vZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbGV0IGxvYyA9IGxpbmsubG9jYXRpb247XHJcbiAgICAgICAgLy8gaWYgKGlzTmFOKGxvYy54KSB8fCBpc05hTihsb2MueSkpIHtcclxuICAgICAgICAvLyAgICAgbGluay5sb2NhdGlvbiA9IG5ldyBnby5Qb2ludCgxMCwgMTApO1xyXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnYWRqdXN0TGlua0xheW91dCwgbGluay5sb2NhdGlvbjogJyArIGxpbmsubG9jYXRpb24pO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnYWRqdXN0TGlua0xheW91dCwgbGluay5sb2NhdGlvbjogJyArIGxpbmsubG9jYXRpb24pO1xyXG5cclxuICAgICAgICAvLyBzZWUgaWYgbGluayBpcyB3aXRoaW4gYSBzdGFja2VkIG9yIGludmVudG9yeSBsYXlvdXQsIG9yIGlmIGl0J3MgYSBoaWRkZW4gUCBsaW5rXHJcbiAgICAgICAgbGV0IGludmVudG9yeUFuY2VzdG9yID0gdGhpcy5nZXRDb21tb25BbmNlc3RvcldpdGhMYXlvdXQobGluay5mcm9tTm9kZSwgbGluay50b05vZGUsIFsnbGVmdCcsICdyaWdodCddKTtcclxuICAgICAgICBsZXQgc3RhY2tlZEFuY2VzdG9yID0gdGhpcy5nZXRDb21tb25BbmNlc3RvcldpdGhMYXlvdXQobGluay5mcm9tTm9kZSwgbGluay50b05vZGUsIFsnc3RhY2tlZCddKTtcclxuICAgICAgICBsZXQgaGlkZVBMaW5rID0gKGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT09ICdQJyAmJiAhdGhpcy5fbWFwLnRlbXBsYXRlcy5zaG93UExpbmsobGluaykpO1xyXG4gICAgICAgIGxldCBjcm93ZGVkUlRoaW5nID0gdGhpcy5oYXNDcm93ZGVkUlRoaW5nKGxpbmspO1xyXG5cclxuICAgICAgICAvLyBzZWUgaWYgdGhpcyBpcyBvbmUgb2YgbXVsdGlwbGUgbGlua3MgYmV0d2VlbiB0aGUgc2FtZSB0d28gbm9kZXNcclxuICAgICAgICBsZXQgc25wb3MgPSB0aGlzLmdldFNhbWVOb2Rlc0xpbmtQb3NpdGlvbihsaW5rKTtcclxuICAgICAgICBsZXQgaXNNdWx0aUxpbmsgPSAoc25wb3MuY291bnQgPiAxKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdzbnBvcyBmb3IgbGluayAnICsgbGluayArICc6ICcgKyBzbnBvcy5pbmRleCArICcgb2YgJyArIHNucG9zLmNvdW50KTtcclxuXHJcbiAgICAgICAgaWYgKGludmVudG9yeUFuY2VzdG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlJbnZlbnRvcnlDdXJ2ZVJvdXRpbmcobGluaywgc25wb3MsIGludmVudG9yeUFuY2VzdG9yLmRhdGEubGF5b3V0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlzTXVsdGlMaW5rKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlNdWx0aWxpbmtDdXJ2ZVJvdXRpbmcobGluaywgc25wb3MpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY3Jvd2RlZFJUaGluZykge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5SW52ZW50b3J5Q3VydmVSb3V0aW5nKGxpbmssIHNucG9zLCAnbGVmdCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTdHJhaWdodFJvdXRpbmcobGluayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzaG93IGxpbmsgb25seSBpZiBib3RoIGNvbm5lY3RlZCB0aGluZ3MgYXJlIHZpc2libGUgKG5vIGNvbGxhcHNlZCBhbmNlc3RvcnMpOyBcclxuICAgICAgICAvLyBoaWRlIGlmIGJvdGggYXJlIGluIHN0YWNrZWQgbGF5b3V0IG9yIGlmIGl0J3MgYSBQLWxpbmsgdGhhdCB3ZSBzaG91bGRuJ3QgYmUgc2hvd2luZyBub3dcclxuICAgICAgICBpZiAodGhpcy5mcm9tQW5kVG9Ob2Rlc0FyZVZpc2libGUobGluaykgJiYgIXN0YWNrZWRBbmNlc3RvciAmJiAhaGlkZVBMaW5rKSB7XHJcbiAgICAgICAgICAgIGxpbmsub3BhY2l0eSA9IDE7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0xhYmVsTm9kZXMobGluaywgdHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGluay5vcGFjaXR5ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5zaG93TGFiZWxOb2RlcyhsaW5rLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFRPRE86IGRldGVjdCB3aGVuIHRoZSBSLXRoaW5nIG92ZXJsYXBzIGJvdGggZnJvbSBhbmQgdG8gbm9kZXMsIHNvIHdlIGNhbiBjaGFuZ2UgdGhlIGxpbmsgcm91dGluZ1xyXG4gICAgaGFzQ3Jvd2RlZFJUaGluZyhsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dMYWJlbE5vZGVzKGxpbmssIHNob3cpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdzaG93TGFiZWxOb2RlcywgbGluazogJyArIGxpbmsgKyAnLCBzaG93OiAnICsgc2hvdyk7XHJcbiAgICAgICAgbGV0IGl0ID0gbGluay5sYWJlbE5vZGVzO1xyXG4gICAgICAgIGlmIChpdCkge1xyXG4gICAgICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZ3JvdXAgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGdyb3VwLnZpc2libGUgPSBzaG93O1xyXG4gICAgICAgICAgICAgICAgaWYgKHNob3cpIHtcclxuICAgICAgICAgICAgICAgICAgICBncm91cC5sYXlvdXQuZG9MYXlvdXQoZ3JvdXApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGxpbmsgaXMgYmV0d2VlbiB0d28gdGhpbmdzIGluIHRoZSBzYW1lIGludmVudG9yeSBsYXlvdXQgKHNpbmdsZSBvciBtdWx0aXBsZSksXHJcbiAgICAvLyBtYWtlIHRoZSBsaW5lIG1vcmUgb3IgbGVzcyBjaXJjdWxhciBvbiB0aGUgYXBwcm9wcmlhdGUgc2lkZVxyXG4gICAgYXBwbHlJbnZlbnRvcnlDdXJ2ZVJvdXRpbmcobGluaywgc25wb3MsIGFuY2VzdG9yTGF5b3V0KSB7XHJcbiAgICAgICAgaWYgKGFuY2VzdG9yTGF5b3V0ID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgbGluay5mcm9tU3BvdCA9IGdvLlNwb3QuTGVmdDtcclxuICAgICAgICAgICAgbGluay50b1Nwb3QgPSBnby5TcG90LkxlZnQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhbmNlc3RvckxheW91dCA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICBsaW5rLmZyb21TcG90ID0gZ28uU3BvdC5SaWdodDtcclxuICAgICAgICAgICAgbGluay50b1Nwb3QgPSBnby5TcG90LlJpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYXNwZWN0IHJhdGlvIGZvciB0aGUgbGluayBjdXJ2ZXMgLSBtYWtlIHRoaXMgc21hbGxlciB0byBtYWtlIHRoZW0gdGFsbGVyLCBsYXJnZXIgdG8gbWFrZSB0aGVtIGZhdHRlclxyXG4gICAgICAgIGxldCBjdXJ2ZVJhdGlvID0gMC42O1xyXG5cclxuICAgICAgICBsZXQgeTEgPSBsaW5rLmZyb21Ob2RlLmFjdHVhbEJvdW5kcy55O1xyXG4gICAgICAgIGxldCB5MiA9IGxpbmsudG9Ob2RlLmFjdHVhbEJvdW5kcy55O1xyXG5cclxuICAgICAgICBsZXQgeURpZmYgPSBNYXRoLmFicyh5MiAtIHkxKTtcclxuICAgICAgICBsZXQgYyA9ICh5RGlmZiA9PT0gMCA/IDUwIDogTWF0aC5mbG9vcih5RGlmZiAqIGN1cnZlUmF0aW8pKSArIDEwMCAqIChzbnBvcy5pbmRleCAvIHNucG9zLmNvdW50KTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwieURpZmYgPSBcIiArIHlEaWZmICsgJywgYyA9ICcgKyBjICsgJyAoJyArIGxpbmsuZnJvbU5vZGUuZGF0YS50ZXh0ICsgJyAtICcgKyBwMSArICcgLSB0byAnICsgbGluay50b05vZGUuZGF0YS50ZXh0ICsgJyAtICcgKyBwMiArICcpJyk7XHJcblxyXG4gICAgICAgIGxpbmsuY3VydmUgPSBnby5MaW5rLkJlemllcjtcclxuICAgICAgICBsaW5rLmZyb21FbmRTZWdtZW50TGVuZ3RoID0gYztcclxuICAgICAgICBsaW5rLnRvRW5kU2VnbWVudExlbmd0aCA9IGM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgbm9uLWludmVudG9yeSBsaW5rIGlzIG9uZSBvZiBtdWx0aXBsZSBvbmVzIGJldHdlZW4gc2FtZSBub2RlcywgbWFrZSBpdCBjdXJ2ZWRcclxuICAgIGFwcGx5TXVsdGlsaW5rQ3VydmVSb3V0aW5nKGxpbmssIHNucG9zKSB7XHJcbiAgICAgICAgbGluay5mcm9tU3BvdCA9IGdvLlNwb3QuRGVmYXVsdDtcclxuICAgICAgICBsaW5rLnRvU3BvdCA9IGdvLlNwb3QuRGVmYXVsdDtcclxuICAgICAgICBsaW5rLmN1cnZlID0gZ28uTGluay5CZXppZXI7XHJcbiAgICAgICAgLy8gY3VydmluZXNzIHZhbHVlcyBiYXNlZCBvbiBudW1iZXIgb2YgbGlua3M6XHJcbiAgICAgICAgLy8gMjogLTI1IDI1XHJcbiAgICAgICAgLy8gMzogLTUwIDAgNTBcclxuICAgICAgICAvLyA0OiAtMTAwIC01MCAwIDUwIDEwMFxyXG4gICAgICAgIGxldCByYW5nZVNpemUgPSAxMCAqIChzbnBvcy5jb3VudCAtIDEpO1xyXG4gICAgICAgIGxldCByYW5nZUluY3JlbWVudCA9IDEwO1xyXG4gICAgICAgIGlmIChzbnBvcy5oYXNSVGhpbmcpIHtcclxuICAgICAgICAgICAgcmFuZ2VTaXplID0gMTAwICogKHNucG9zLmNvdW50IC0gMSk7XHJcbiAgICAgICAgICAgIHJhbmdlSW5jcmVtZW50ID0gMTAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWRqdXN0IGN1cnZpbmVzcyBmb3Igc21hbGxlciBzY2FsZXNcclxuICAgICAgICBsZXQgbGlua1NjYWxlRmFjdG9yID0gdGhpcy5nZXRMaW5rU3Ryb2tlV2lkdGgobGluaykgLyAyOyAvLyAyIGlzIG1heCBzdHJva2Ugd2lkdGhcclxuICAgICAgICByYW5nZVNpemUgKj0gbGlua1NjYWxlRmFjdG9yO1xyXG4gICAgICAgIHJhbmdlSW5jcmVtZW50ICo9IGxpbmtTY2FsZUZhY3RvcjtcclxuXHJcbiAgICAgICAgbGV0IHJhbmdlU3RhcnQgPSAwIC0gcmFuZ2VTaXplIC8gMjtcclxuXHJcbiAgICAgICAgbGluay5jdXJ2aW5lc3MgPSAocmFuZ2VTdGFydCArIHJhbmdlSW5jcmVtZW50ICogc25wb3MuaW5kZXgpICogc25wb3Mub3JpZW50YXRpb247XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2FwcGx5TXVsdGlsaW5rQ3VydmVSb3V0aW5nLCBsaW5rOiAnICsgbGluayArICcsIGN1cnZpbmVzczogJyArIGxpbmsuY3VydmluZXNzKTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gZG8gbm9ybWFsIHN0cmFpZ2h0IGxpbmVzIGZvciBmcmVlaGFuZCBsYXlvdXQsIG9yIGxpbmtzIGJldHdlZW4gZGVzY2VuZGFudHMgb2YgdGhpbmdzIHdpdGggZGlmZmVyZW50IGxheW91dHNcclxuICAgIGFwcGx5U3RyYWlnaHRSb3V0aW5nKGxpbmspIHtcclxuICAgICAgICBsaW5rLmZyb21TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsudG9TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsucm91dGluZyA9IGdvLkxpbmsuTm9ybWFsO1xyXG4gICAgICAgIGxpbmsuY3VydmUgPSBnby5MaW5rLk5vbmU7XHJcbiAgICAgICAgbGluay5jdXJ2aW5lc3MgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBjYWxjdWxhdGUgaG93IG1hbnkgbGlua3MgdGhlcmUgYXJlIGJldHdlZW4gYSBsaW5rJ3Mgbm9kZXMgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgb2YgdGhlIGZvcm1hdCB7IGluZGV4OiAxLCBjb3VudDogMiwgb3JpZW50YXRpb246IC0xLCBoYXNSVGhpbmc6IGZhbHNlIH0sIFxyXG4gICAgLy8gaW5kaWNhdGluZyBob3cgbWFueSBvdGhlciBsaW5rcyB0aGVyZSBhcmUgYmV0d2VlbiB0aGUgc2FtZSBwYWlyIG9mIG5vZGVzLFxyXG4gICAgLy8gd2hlcmUgdGhlIGdpdmVuIGxpbmsgZmFsbHMgd2l0aGluIHRoaXMgbGlzdCwgYW5kIHdoYXQgaXRzIG9yaWVudGF0aW9uIGlzLlxyXG4gICAgZ2V0U2FtZU5vZGVzTGlua1Bvc2l0aW9uKGxpbmspIHtcclxuICAgICAgICBsZXQgbGlua3NCeU5vZGVzID0gdGhpcy5nZXRMaW5rc0J5Tm9kZXModHJ1ZSk7XHJcbiAgICAgICAgLy8gZ2V0IGxpbmtzIHdpdGggdGhlIHNhbWUga2V5IGFzIHRoaXMgb25lIChjb25uZWN0aW5nIHNhbWUgbm9kZXMpXHJcbiAgICAgICAgbGV0IHNhbWVMaW5rcyA9IF8ud2hlcmUobGlua3NCeU5vZGVzLCB7XHJcbiAgICAgICAgICAgIGtleTogdGhpcy5nZXRTYW1lTm9kZXNMaW5rS2V5KGxpbmspXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGRlZmF1bHQgcmV0dXJuIHZhbHVlXHJcbiAgICAgICAgbGV0IHNucG9zID0ge1xyXG4gICAgICAgICAgICBpbmRleDogMCxcclxuICAgICAgICAgICAgY291bnQ6IDEsXHJcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAxLFxyXG4gICAgICAgICAgICBoYXNSVGhpbmc6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBzZXQgaW5kZXgsIGNvdW50LCBvcmllbnRhdGlvblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2FtZUxpbmtzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChzYW1lTGlua3NbaV0ubGluayA9PT0gbGluaykge1xyXG4gICAgICAgICAgICAgICAgc25wb3MgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGksXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IHNhbWVMaW5rcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb246IHRoaXMuZ2V0TGlua09yaWVudGF0aW9uKGxpbmspXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNoZWNrIGZvciBSdGhpbmdcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhbWVMaW5rcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoc2FtZUxpbmtzW2ldLmhhc1JUaGluZykge1xyXG4gICAgICAgICAgICAgICAgc25wb3MuaGFzUlRoaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc25wb3M7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0cyB0aGUgbWFyZ2luIHRvIGJlIHVzZWQgaW4gc3RhY2sgbGF5b3V0IGJldHdlZW4gdGhpcyBncm91cCdzIGNoaWxkcmVuXHJcbiAgICBnZXRTdGFja01hcmdpbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiAoMTAgLyAwLjQ1KSAqIHRoaXMuZ2V0U2NhbGUoZ3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIG1heCB5IHZhbHVlIGFmdGVyIGxheWluZyBvdXQgdGhlIGxhc3QgcGFydFxyXG4gICAgbGF5b3V0TWVtYmVyc0ZvclN0YWNrZWQoZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZKSB7XHJcbiAgICAgICAgbGV0IG1lbWJlcnMgPSB0aGlzLmdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKTtcclxuICAgICAgICBsZXQgeCA9IHN0YXJ0WDtcclxuICAgICAgICBsZXQgeSA9IHN0YXJ0WTtcclxuICAgICAgICBsZXQgcm93Q291bnQgPSAwO1xyXG4gICAgICAgIGxldCBtYXhTdGFydFkgPSBzdGFydFk7XHJcbiAgICAgICAgXy5lYWNoKG1lbWJlcnMsIChwYXJ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgIXBhcnQuaXNMaW5rTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGxldCBtYXJnaW4gPSB0aGlzLmdldFN0YWNrTWFyZ2luKHBhcnQpO1xyXG4gICAgICAgICAgICAgICAgcGFydC5tb3ZlKG5ldyBnby5Qb2ludCh4LCB5KSk7XHJcbiAgICAgICAgICAgICAgICBzdGFydFkgPSB5ICsgcGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgbWFyZ2luIC8gMjsgLy8gc3RhcnQgWSBwb3NpdGlvbiBmb3IgcGFydCdzIGNoaWxkcmVuXHJcblxyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvclN0YWNrZWQ6IHN0YXJ0aW5nIGxheW91dCBvZiBjaGlsZHJlbiBvZiAnICsgcGFydCArICcgYXQgJyArIE1hdGgucm91bmQoeCkgKyAnLCcgKyBNYXRoLnJvdW5kKHN0YXJ0WSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0LmlzU3ViR3JhcGhFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxheW91dCBjaGlsZHJlbiBvZiB0aGlzIHBhcnQ7IGNoZWNrIGlmIHdlJ3ZlIGFscmVhZHkgZG9uZSBhIHRhbGxlciBwYXJ0K2NoaWxkcmVuIGluIGN1cnJlbnQgcm93XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4U3RhcnRZID0gTWF0aC5tYXgobWF4U3RhcnRZLCB0aGlzLmxheW91dE1lbWJlcnNGb3JTdGFja2VkKHBhcnQsIHgsIHN0YXJ0WSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xheW91dE1lbWJlcnNGb3JTdGFja2VkOiBsYWlkIG91dCBjaGlsZHJlbiBvZiAnICsgcGFydCArICcsIG1heFN0YXJ0WSBpcyBub3cgJyArIE1hdGgucm91bmQobWF4U3RhcnRZKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heFN0YXJ0WSA9IE1hdGgubWF4KG1heFN0YXJ0WSwgc3RhcnRZKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBkZWNpZGUgd2hldGhlciB0byB3cmFwXHJcbiAgICAgICAgICAgICAgICByb3dDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvd0NvdW50IDwgMikgeyAvLyBrZWVwIGdvaW5nIG9uIHRoaXMgbGluZVxyXG4gICAgICAgICAgICAgICAgICAgIHggKz0gcGFydC5hY3R1YWxCb3VuZHMud2lkdGggKyBtYXJnaW47XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyB3cmFwIHRvIG5leHQgbGluZVxyXG4gICAgICAgICAgICAgICAgICAgIHggPSBzdGFydFg7XHJcbiAgICAgICAgICAgICAgICAgICAgeSA9IG1heFN0YXJ0WSArIG1hcmdpbiAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93Q291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG1heFN0YXJ0WTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzaGFyZWQgc3R1ZmYgZm9yIExlZnQvUmlnaHQgSW52ZW50b3J5IGxheW91dHMuLi5cclxuXHJcbiAgICAvLyBnZXRzIHRoZSBtYXJnaW4gdG8gYmUgdXNlZCBpbiBzdGFjayBsYXlvdXQgYmV0d2VlbiB0aGlzIGdyb3VwJ3MgY2hpbGRyZW5cclxuICAgIGdldEludmVudG9yeU1hcmdpbihncm91cCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXB1dGVMZXZlbChncm91cCkgPD0gMikge1xyXG4gICAgICAgICAgICByZXR1cm4gMTAgKiB0aGlzLmdldFNjYWxlKGdyb3VwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMyAqIHRoaXMuZ2V0U2NhbGUoZ3JvdXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBtYXggeSB2YWx1ZSBhZnRlciBsYXlpbmcgb3V0IHRoZSBsYXN0IHBhcnRcclxuICAgIC8vIHNpZGUgaXMgJ0wnIG9yICdSJ1xyXG4gICAgbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeShncm91cCwgc3RhcnRYLCBzdGFydFksIHNpZGUpIHtcclxuICAgICAgICBsZXQgbWVtYmVycyA9IHRoaXMuZ2V0T3JkZXJlZE1lbWJlcnMoZ3JvdXApO1xyXG4gICAgICAgIF8uZWFjaChtZW1iZXJzLCAocGFydCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgeCA9IHN0YXJ0WDsgLy8gZm9yIGxlZnQsIGp1c3QgdXNlIHhcclxuICAgICAgICAgICAgaWYgKHNpZGUgPT09ICdSJylcclxuICAgICAgICAgICAgICAgIHggPSBzdGFydFggLSBwYXJ0LmFjdHVhbEJvdW5kcy53aWR0aDsgLy8gZm9yIHJpZ2h0LCByaWdodC1hbGlnbiBwYXJ0cyB0byBzdGFydFhcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeSwgcGFydDogJyArIHBhcnQgKyAnIHRvIGxvY2F0aW9uOiAnICsgeCArICcsJyArIHN0YXJ0WSk7XHJcbiAgICAgICAgICAgIHBhcnQubW92ZShuZXcgZ28uUG9pbnQoeCwgc3RhcnRZKSk7XHJcbiAgICAgICAgICAgIHN0YXJ0WSArPSBwYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyB0aGlzLmdldEludmVudG9yeU1hcmdpbihwYXJ0KTtcclxuICAgICAgICAgICAgaWYgKHBhcnQuaXNTdWJHcmFwaEV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5LCB5IGFmdGVyIG1vdmluZzogJyArIHBhcnQgKyAnID0gJyArIHN0YXJ0WSk7XHJcbiAgICAgICAgICAgICAgICBzdGFydFkgPSB0aGlzLmxheW91dE1lbWJlcnNGb3JJbnZlbnRvcnkocGFydCwgc3RhcnRYLCBzdGFydFksIHNpZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHN0YXJ0WSArIHRoaXMuZ2V0SW52ZW50b3J5TWFyZ2luKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBncm91cCdzIChub24tUi10aGluZykgbWVtYmVycywgc29ydGVkIGJ5IHRoZSAnb3JkZXInIGRhdGEgcHJvcGVydHlcclxuICAgIGdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKSB7XHJcbiAgICAgICAgbGV0IG1lbWJlcnMgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIGxldCBpdCA9IGdyb3VwLm1lbWJlclBhcnRzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgbGV0IHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiAhcGFydC5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocGFydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF8uc29ydEJ5KG1lbWJlcnMudG9BcnJheSgpLCBmdW5jdGlvbiAobWVtYmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtZW1iZXIuZGF0YS5vcmRlcjtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZWZyZXNoZXMgdGhlIGNhY2hlZCBsaXN0IG9mIGFsbCBsaW5rcyB3aXRoIGtleXMsIHRvIGZhY2lsaXRhdGUgZ3JvdXBpbmcgdGhlbSBhY2NvcmRpbmcgdG8gY29ubmVjdGVkIG5vZGVzXHJcbiAgICBnZXRMaW5rc0J5Tm9kZXMocmVmcmVzaCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2dldExpbmtzQnlOb2RlcycpO1xyXG4gICAgICAgIGlmICghdGhpcy5fbGlua3NCeU5vZGVzIHx8IHJlZnJlc2gpIHtcclxuICAgICAgICAgICAgdGhpcy5fbGlua3NCeU5vZGVzID0gW107XHJcbiAgICAgICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAgICAgbGV0IGxpbmtzID0gZGlhZ3JhbS5saW5rcy5pdGVyYXRvcjtcclxuICAgICAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCBrZXkgPSB0aGlzLmdldFNhbWVOb2Rlc0xpbmtLZXkobGluayk7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGlua3NCeU5vZGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluazogbGluayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzUlRoaW5nOiAobGluay5sYWJlbE5vZGVzLmNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fbGlua3NCeU5vZGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgYSBrZXkgdXNlZCB0byBncm91cCBsaW5rcyBhY2NvcmRpbmcgdG8gd2hpY2ggcGFpciBvZiBub2RlcyB0aGV5IGNvbm5lY3QuXHJcbiAgICAvLyBUaGUgcmV0dXJuZWQga2V5IGlzIG5vbi1lbXB0eSBmb3IgcmVndWxhciBsaW5rcyBhbmQgUCBsaW5rcyB0aGF0IHNob3VsZCBiZSBzaG93biBjdXJyZW50bHksXHJcbiAgICAvLyBzbyB0aGF0IHRoZXNlIHdpbGwgYWxsIGJlIHJvdXRlZCBieSB0aGUgc2FtZSBydWxlcy4gQSBudWxsIGtleSBpcyByZXR1cm5lZCBmb3IgYW55IG90aGVyIFxyXG4gICAgLy8gbGlua3MsIGluZGljYXRpbmcgdGhhdCBubyBncm91cGluZyBpcyByZXF1aXJlZC5cclxuICAgIGdldFNhbWVOb2Rlc0xpbmtLZXkobGluaykge1xyXG4gICAgICAgIC8vICAgICAgICBpZiAodGhpcy5pc1JMaW5rKGxpbmspIHx8ICh0aGlzLmlzUExpbmsobGluaykgJiYgdGhpcy5fbWFwLnRlbXBsYXRlcy5zaG93UExpbmsobGluaykpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSTGluayhsaW5rKSkge1xyXG4gICAgICAgICAgICBsZXQga2V5ID0gW2xpbmsuZnJvbU5vZGUudG9TdHJpbmcoKSwgbGluay50b05vZGUudG9TdHJpbmcoKV0uc29ydCgpLmpvaW4oJ3wnKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygna2V5OiAnICsga2V5KTtcclxuICAgICAgICAgICAgcmV0dXJuIGtleTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gV2UgdXNlIHRoaXMgdG8gZGlzdGluZ3Vpc2ggYW4gQS1CIGxpbmsgZnJvbSBhIEItQSBsaW5rIChiYXNlZCBvbiBmcm9tTm9kZSBhbmQgdG9Ob2RlLCB3aGljaFxyXG4gICAgLy8gaXMgaW5kZXBlbmRlbnQgb2YgdGhlIGFycm93aGVhZCBzZXR0aW5ncykgd2hlbiBzZXR0aW5nIGN1cnZpbmVzcywgYmVjYXVzZSBzZXR0aW5nIGN1cnZpbmVzcyA9IDI1XHJcbiAgICAvLyBvbiBhbiBBLUIgbGluayBpcyB0aGUgc2FtZSBhcyBjdXJ2aW5lc3MgPSAtMjUgb24gYSBCLUEgbGluay5cclxuICAgIGdldExpbmtPcmllbnRhdGlvbihsaW5rKSB7XHJcbiAgICAgICAgaWYgKGxpbmsuZnJvbU5vZGUgJiYgbGluay50b05vZGUgJiYgbGluay5mcm9tTm9kZS50b1N0cmluZygpIDwgbGluay50b05vZGUudG9TdHJpbmcoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIGxpbmsgdGVzdHMgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgaXNSTGluayhsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiAhbGluay5kYXRhLmNhdGVnb3J5ICYmIGxpbmsuZnJvbU5vZGUgJiYgbGluay50b05vZGU7XHJcbiAgICB9XHJcblxyXG4gICAgaXNETGluayhsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT09ICdEJztcclxuICAgIH1cclxuXHJcbiAgICBpc1BMaW5rKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gbGluayBpbnN0YW5jZW9mIGdvLkxpbmsgJiYgbGluay5kYXRhICYmIGxpbmsuZGF0YS5jYXRlZ29yeSA9PT0gJ1AnO1xyXG4gICAgfVxyXG5cclxuICAgIGlzR3JvdXAob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIGdvLkdyb3VwO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBMYXlvdXRzO1xyXG4iLCJjb25zdCBFZGl0b3JDb25maWcgPSByZXF1aXJlKCcuL0VkaXRvckNvbmZpZy5qcycpO1xyXG5cclxuY29uc3QgTUlMTElPTiA9IDEwMDAgKiAxMDAwO1xyXG5jb25zdCBMRUZUID0gJ2xlZnQnO1xyXG5jb25zdCBSSUdIVCA9ICdyaWdodCc7XHJcbmNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5cclxuXHJcbmNsYXNzIE1hcCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xyXG4gICAgICAgIHRoaXMuX2VkaXRvciA9IGNvbmZpZy5FZGl0b3I7XHJcblxyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IG5ldyBFZGl0b3JDb25maWcodGhpcy5fZWRpdG9yLCB0aGlzKTtcclxuICAgICAgICB0aGlzLmFuYWx5dGljcyA9IHRoaXMuX2NvbmZpZy5hbmFseXRpY3M7XHJcbiAgICAgICAgdGhpcy5hdHRhY2htZW50cyA9IHRoaXMuX2NvbmZpZy5hdHRhY2htZW50cztcclxuICAgICAgICB0aGlzLmF1dG9zYXZlID0gdGhpcy5fY29uZmlnLmF1dG9zYXZlO1xyXG4gICAgICAgIHRoaXMuZWRpdG9yT3B0aW9ucyA9IHRoaXMuX2NvbmZpZy5lZGl0b3JPcHRpb25zO1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gdGhpcy5fY29uZmlnLmdlbmVyYXRvcjtcclxuICAgICAgICB0aGlzLmxheW91dHMgPSB0aGlzLl9jb25maWcubGF5b3V0cztcclxuICAgICAgICB0aGlzLnBlcnNwZWN0aXZlcyA9IHRoaXMuX2NvbmZpZy5wZXJzcGVjdGl2ZXM7XHJcbiAgICAgICAgdGhpcy5wcmVzZW50ZXIgPSB0aGlzLl9jb25maWcucHJlc2VudGVyO1xyXG4gICAgICAgIHRoaXMuc3RhbmRhcmRzID0gdGhpcy5fY29uZmlnLnN0YW5kYXJkcztcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcyA9IHRoaXMuX2NvbmZpZy50ZW1wbGF0ZXM7XHJcbiAgICAgICAgdGhpcy50ZXN0cyA9IHRoaXMuX2NvbmZpZy50ZXN0cztcclxuICAgICAgICB0aGlzLnVpID0gdGhpcy5fY29uZmlnLnVpO1xyXG5cclxuICAgICAgICAvL3RoaXMuX2FuYWx5dGljcyA9IG5ldyBTYW5kYmFua0VkaXRvci5BbmFseXRpY3ModGhpcy5fZWRpdG9yLCB0aGlzKTtcclxuICAgICAgICAvL3RoaXMuX2F0dGFjaG1lbnRzID0gbmV3IFNhbmRiYW5rRWRpdG9yLkF0dGFjaG1lbnRzKHRoaXMuX2VkaXRvciwgdGhpcyk7XHJcbiAgICAgICAgLy90aGlzLl9hdXRvc2F2ZSA9IG5ldyBTYW5kYmFua0VkaXRvci5BdXRvc2F2ZSh0aGlzLl9lZGl0b3IsIHRoaXMpO1xyXG4gICAgICAgIC8vdGhpcy5fZ2VuZXJhdG9yID0gbmV3IFNhbmRiYW5rRWRpdG9yLkdlbmVyYXRvcih0aGlzLl9lZGl0b3IsIHRoaXMpO1xyXG4gICAgICAgIC8vdGhpcy5fbGF5b3V0cyA9IG5ldyBTYW5kYmFua0VkaXRvci5MYXlvdXRzKHRoaXMuX2VkaXRvciwgdGhpcyk7XHJcbiAgICAgICAgLy90aGlzLl9wZXJzcGVjdGl2ZXMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuUGVyc3BlY3RpdmVzKHRoaXMuX2VkaXRvciwgdGhpcyk7XHJcbiAgICAgICAgLy90aGlzLl9wcmVzZW50ZXIgPSBuZXcgU2FuZGJhbmtFZGl0b3IuUHJlc2VudGVyKHRoaXMuX2VkaXRvciwgdGhpcyk7XHJcbiAgICAgICAgLy90aGlzLl9zdGFuZGFyZHMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuU3RhbmRhcmRzKHRoaXMuX2VkaXRvciwgdGhpcyk7XHJcbiAgICAgICAgLy90aGlzLl90ZW1wbGF0ZXMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVGVtcGxhdGVzKHRoaXMuX2VkaXRvciwgdGhpcyk7XHJcbiAgICAgICAgLy90aGlzLl90ZXN0cyA9IG5ldyBTYW5kYmFua0VkaXRvci5UZXN0cyh0aGlzLl9lZGl0b3IsIHRoaXMpO1xyXG4gICAgICAgIC8vdGhpcy5fdWkgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVUkodGhpcy5fZWRpdG9yLCB0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gY2FsbCBpbml0IGZvciBlYWNoIGNvbXBvbmVudCwgaWYgZGVmaW5lZFxyXG4gICAgICAgIF8uZWFjaCh0aGlzLmdldENvbXBvbmVudHMoKSwgKGNvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50ICYmIGNvbXBvbmVudC5pbml0KVxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50LmluaXQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIGRpYWdyYW1cclxuICAgICAgICB0aGlzLl9kaWFncmFtID0gbmV3IGdvLkRpYWdyYW0oJ2RpYWdyYW0nKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLmluaXRpYWxDb250ZW50QWxpZ25tZW50ID0gZ28uU3BvdC5DZW50ZXI7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5pbml0aWFsVmlld3BvcnRTcG90ID0gZ28uU3BvdC5DZW50ZXI7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5pbml0aWFsRG9jdW1lbnRTcG90ID0gZ28uU3BvdC5DZW50ZXI7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5oYXNIb3Jpem9udGFsU2Nyb2xsYmFyID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5oYXNWZXJ0aWNhbFNjcm9sbGJhciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ucGFkZGluZyA9IDUwMDtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLmxheW91dCA9IHRoaXMubGF5b3V0cy5nZXRGcmVlaGFuZERpYWdyYW1MYXlvdXQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0VG9vbHMoKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcy5pbml0VGVtcGxhdGVzKHRoaXMuX2RpYWdyYW0pOyAvLyBzZXQgdXAgdGVtcGxhdGVzLCBjdXN0b21pemUgdGVtcG9yYXJ5IGxpbmsgYmVoYXZpb3IgXHJcbiAgICAgICAgdGhpcy5hZGREaWFncmFtTGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHRoaXMudGVtcGxhdGVzLmFkZEV4cG9ydEZvb3RlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaW50U2xpZGVzKCkge1xyXG4gICAgICAgIHRoaXMucHJlc2VudGVyLmNyZWF0ZVNsaWRlVGh1bWJuYWlscygpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgd2luZG93LnByaW50KCk7XHJcbiAgICAgICAgfSwgNTAwKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnRUb0ltYWdlKGZvcm1hdCkge1xyXG5cclxuICAgICAgICB0aGlzLmltYWdlRXhwb3J0TG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgJCgnI2V4cG9ydC1pbWFnZSBpbWcnKS5yZW1vdmUoKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcy5zaG93RXhwb3J0Rm9vdGVyKCk7XHJcblxyXG4gICAgICAgIGxldCByZWN0ID0gdGhpcy5nZXREaWFncmFtKCkuY29tcHV0ZVBhcnRzQm91bmRzKHRoaXMuZ2V0RGlhZ3JhbSgpLm5vZGVzKS5jb3B5KCk7XHJcblxyXG4gICAgICAgIGxldCBpbWFnZU1CID0gcmVjdC53aWR0aCAqIHJlY3QuaGVpZ2h0ICogNCAvIE1JTExJT047IC8vIDQgYnl0ZXMvcGl4ZWxcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdpbWFnZU1COiAnICsgaW1hZ2VNQik7XHJcblxyXG4gICAgICAgIC8vIG1ha2UgdGhlIG1heCBzaXplIG9mIHRoZSBpbWFnZSAxME1CXHJcbiAgICAgICAgLy8gcG5nU2l6ZSA9IGltYWdlTUIgKiBzY2FsZSAqIHNjYWxlXHJcbiAgICAgICAgLy8gc28gbWF4IHNjYWxlID0gc3FydChwbmdTaXplIC8gaW1hZ2VNQilcclxuICAgICAgICAvLyBUaGVzZSBjYWxjdWxhdGlvbnMgZG9uJ3Qgc2VlbSB0byBiZSByaWdodCwgYnV0IGluIHByYWN0aWNlIHVzaW5nIDUwMCBoZXJlXHJcbiAgICAgICAgLy8gd2UgZ2V0IGEgc2NhbGUgb2YgMi40MyBmb3IgYW4gaW1hZ2UgMTk5ODQgeCAzNDI0IHBpeGVsc1xyXG4gICAgICAgIC8vIHdoaWNoIHJlc3VsdHMgaW4gYSBmaWxlIHNpemUgb2YgMS44OCBNQiBhdCAzMiBiaXRzL3BpeGVsLi4uXHJcbiAgICAgICAgLy8gT1IgMjgzODAgeCA1MTk2IHBpeGVscywgc2NhbGUgPSAzLjQxID0+IGZpbGUgc2l6ZSA9IDMuNDkgTUJcclxuICAgICAgICBsZXQgc2NhbGUgPSA0O1xyXG4gICAgICAgIGlmIChpbWFnZU1CKSB7XHJcbiAgICAgICAgICAgIHNjYWxlID0gTWF0aC5taW4oNCwgTWF0aC5zcXJ0KDUwIC8gaW1hZ2VNQikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaW1hZ2UgZGltZW5zaW9uczogJyArIHJlY3Qud2lkdGggKyAnIHggJyArIHJlY3QuaGVpZ2h0ICsgJywgaW1hZ2UgYnl0ZXM6ICcgKyAocmVjdC53aWR0aCAqIHJlY3QuaGVpZ2h0ICogNCkgKyBcclxuICAgICAgICAvLyAgICAgICAgJywgaW1hZ2VNQjogJyArIGltYWdlTUIgKyAnLCBzY2FsZTogJyArIHNjYWxlKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaG93SW1hZ2VFeHBvcnQgPSB0cnVlO1xyXG5cclxuICAgICAgICBsZXQgcGFydHNUb0V4cG9ydCA9IG5ldyBnby5MaXN0KCk7XHJcbiAgICAgICAgcGFydHNUb0V4cG9ydC5hZGRBbGwodGhpcy5nZXREaWFncmFtKCkubm9kZXMpO1xyXG4gICAgICAgIHBhcnRzVG9FeHBvcnQuYWRkQWxsKHRoaXMuZ2V0RGlhZ3JhbSgpLmxpbmtzKTtcclxuICAgICAgICBwYXJ0c1RvRXhwb3J0LnJlbW92ZSh0aGlzLnByZXNlbnRlci5zbGlkZUJsb2NrZXIpO1xyXG5cclxuICAgICAgICBsZXQgZG9JbWFnZSA9ICR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGltZyA9IHRoaXMuZ2V0RGlhZ3JhbSgpLm1ha2VJbWFnZSh7XHJcbiAgICAgICAgICAgICAgICBwYXJ0czogcGFydHNUb0V4cG9ydCxcclxuICAgICAgICAgICAgICAgIG1heFNpemU6IG5ldyBnby5TaXplKChyZWN0LndpZHRoICsgMjAwKSAqIHNjYWxlLCAocmVjdC5oZWlnaHQgKyAyMDApICogc2NhbGUpLFxyXG4gICAgICAgICAgICAgICAgc2NhbGU6IHNjYWxlLFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTAwICogc2NhbGUsXHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnI2ZmZmZmZidcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKCcjZXhwb3J0LWltYWdlJykuYXBwZW5kKGltZyk7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VFeHBvcnRMb2FkaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlcy5oaWRlRXhwb3J0Rm9vdGVyKCk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gY29tcG9uZW50IGFjY2Vzc29ycyAtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZ2V0Q29tcG9uZW50cygpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICB0aGlzLmFuYWx5dGljcyxcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50cyxcclxuICAgICAgICAgICAgdGhpcy5hdXRvc2F2ZSxcclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0b3IsXHJcbiAgICAgICAgICAgIC8vIHRoaXMuX2hpc3RvcnksIFxyXG4gICAgICAgICAgICB0aGlzLmxheW91dHMsXHJcbiAgICAgICAgICAgIHRoaXMucGVyc3BlY3RpdmVzLFxyXG4gICAgICAgICAgICB0aGlzLnByZXNlbnRlcixcclxuICAgICAgICAgICAgdGhpcy5zdGFuZGFyZHMsXHJcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVzLFxyXG4gICAgICAgICAgICB0aGlzLnRlc3RzLFxyXG4gICAgICAgICAgICB0aGlzLnVpXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY3VycmVudFRhYigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFRhYjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgY3VycmVudFRhYih2YWwpIHtcclxuICAgICAgICAvLyB3YXRjaCBmb3IgdGFiIGNoYW5nZXNcclxuICAgICAgICAvLyBUT0RPOiByZXN0b3JlIG5vbi1Bbmd1bGFyIHZlcnNpb24gb2YgdGhpc1xyXG4gICAgICAgIC8vdGhpcy5fZWRpdG9yLiR3YXRjaCgnY3VycmVudFRhYicsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICAvL30pO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQodGhpcy5fY3VycmVudFRhYiwgdmFsKTtcclxuICAgICAgICB0aGlzLl9jdXJyZW50VGFiID0gdmFsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoaXMgaXMgY2FsbGVkIGJ5IGEgdGhpcy5fZWRpdG9yLiR3YXRjaCBpbiBpbml0KClcclxuICAgIGN1cnJlbnRUYWJDaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjdXJyZW50VGFiQ2hhbmdlZCwgbmV3VmFsdWU6ICcgKyBuZXdWYWx1ZSArICcsIG9sZFZhbHVlOiAnICsgb2xkVmFsdWUpO1xyXG4gICAgICAgIC8vIG5vdGlmeSBhbnkgaW50ZXJlc3RlZCBjb21wb25lbnRzXHJcbiAgICAgICAgXy5lYWNoKHRoaXMuZ2V0Q29tcG9uZW50cygpLCAoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50LmN1cnJlbnRUYWJDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL3RoaXMuX2VkaXRvci5zYWZlQXBwbHkoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREaWFncmFtKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWFncmFtO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG1pc2MuIHRvb2wgY29uZmlndXJhdGlvblxyXG4gICAgaW5pdFRvb2xzKCkge1xyXG4gICAgICAgIC8vIGRpc2FibGUgY2xpY2tpbmcgb24gVGV4dEJsb2NrcyB0byBlZGl0IC0gd2Ugd2lsbCBpbnZva2UgZWRpdGluZyBpbiBvdGhlciB3YXlzXHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5hbGxvd1RleHRFZGl0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIHNlbGVjdCB0ZXh0IHdoZW4gYWN0aXZhdGluZyBlZGl0b3I7IFxyXG4gICAgICAgIC8vIHVzZSBzaGlmdC1lbnRlciB0byBjcmVhdGUgbmV3IGxpbmVzLCBlbnRlciB0byBmaW5pc2ggZWRpdGluZyAoTkI6IGVkaXRvciBoYXMgbXVsdGlsaW5lPXRydWUpXHJcbiAgICAgICAgbGV0IHRleHRUb29sID0gdGhpcy5fZGlhZ3JhbS50b29sTWFuYWdlci50ZXh0RWRpdGluZ1Rvb2w7XHJcbiAgICAgICAgdGV4dFRvb2wuZG9BY3RpdmF0ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgZ28uVGV4dEVkaXRpbmdUb29sLnByb3RvdHlwZS5kb0FjdGl2YXRlLmNhbGwodGV4dFRvb2wpO1xyXG4gICAgICAgICAgICBpZiAodGV4dFRvb2wuZGVmYXVsdFRleHRFZGl0b3IpIHtcclxuICAgICAgICAgICAgICAgIHRleHRUb29sLmRlZmF1bHRUZXh0RWRpdG9yLnNlbGVjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRleHRUb29sLmRlZmF1bHRUZXh0RWRpdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUud2hpY2ggPT09IDEzICYmICFlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvLlRleHRFZGl0aW5nVG9vbC5wcm90b3R5cGUuYWNjZXB0VGV4dC5jYWxsKHRleHRUb29sLCBnby5UZXh0RWRpdGluZ1Rvb2wuTG9zdEZvY3VzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGhhbmRsZSBkZWxldGUga2V5IG9uIE1hYyAoZGVmYXVsdCBiZWhhdmlvciBvbmx5IHVzZXMgZm4tRGVsZXRlIHRvIGRlbGV0ZSBmcm9tIGNhbnZhcylcclxuICAgICAgICB0aGlzLl9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLmRvS2V5RG93biA9ICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGUgPSB0aGlzLl9kaWFncmFtLmxhc3RJbnB1dDtcclxuICAgICAgICAgICAgbGV0IGNtZCA9IHRoaXMuX2RpYWdyYW0uY29tbWFuZEhhbmRsZXI7XHJcbiAgICAgICAgICAgIGlmIChlLmV2ZW50LndoaWNoID09PSA4KSB7XHJcbiAgICAgICAgICAgICAgICBjbWQuZGVsZXRlU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBnby5Db21tYW5kSGFuZGxlci5wcm90b3R5cGUuZG9LZXlEb3duLmNhbGwoY21kKTsgLy8gY2FsbCBiYXNlIG1ldGhvZCB3aXRoIG5vIGFyZ3VtZW50c1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gW2Rpc2FibGUga2V5Ym9hcmQgc2hvcnRjdXRzLCBhcyB0aGVzZSBkbyBub3QgZG8gY2VudGVyaW5nIG9uIHpvb20sIFxyXG4gICAgICAgIC8vIGFuZCBjYW4gbGVhZCB0byBjb25mdXNpb24gd2l0aCBicm93c2VyIHpvb20gKHdoaWNoIGdldHMgZmlyZWQgZGVwZW5kcyBvbiBmb2N1cyldXHJcbiAgICAgICAgLy8gLSB0dXJuZWQgYmFjayBvbiB0byBzdXBwb3J0IHBpbmNoL3pvb20gb24gaVBhZFxyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0uYWxsb3dab29tID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS50b29sTWFuYWdlci5tb3VzZVdoZWVsQmVoYXZpb3IgPSBnby5Ub29sTWFuYWdlci5XaGVlbFpvb207XHJcblxyXG4gICAgICAgIC8vIGRlY2lkZSB3aGF0IGtpbmRzIG9mIFBhcnRzIGNhbiBiZSBhZGRlZCB0byBhIEdyb3VwIG9yIHRvIHRvcC1sZXZlbFxyXG4gICAgICAgIC8vIHRoaXMuX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIubWVtYmVyVmFsaWRhdGlvbiAoZ3JwLCBub2RlKSB7XHJcbiAgICAgICAgLy8gICAgIC8vaWYgKGdycCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmIG5vZGUgaW5zdGFuY2VvZiBnby5Hcm91cCkgcmV0dXJuIGZhbHNlOyAgLy8gY2Fubm90IGFkZCBHcm91cHMgdG8gR3JvdXBzXHJcbiAgICAgICAgLy8gICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIC8vIH07XHJcblxyXG4gICAgICAgIC8vIGRlZmF1bHQgbGluayBhdHRyaWJ1dGVzXHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS50b29sTWFuYWdlci5saW5raW5nVG9vbC5hcmNoZXR5cGVMaW5rRGF0YSA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ25vQXJyb3dzJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGFsbG93IGRvdWJsZS1jbGljayBpbiBiYWNrZ3JvdW5kIHRvIGNyZWF0ZSBhIG5ldyBub2RlXHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS50b29sTWFuYWdlci5jbGlja0NyZWF0aW5nVG9vbC5hcmNoZXR5cGVOb2RlRGF0YSA9IHRoaXMuZ2V0TmV3VGhpbmdEYXRhKCk7XHJcblxyXG4gICAgICAgIC8vIGhvdyBsb25nIG1vdXNlIG11c3QgYmUgaGVsZCBzdGF0aW9uYXJ5IGJlZm9yZSBzdGFydGluZyBhIGRyYWctc2VsZWN0IChpbnN0ZWFkIG9mIGEgc2Nyb2xsKSAtIGRlZmF1bHQgd2FzIDE3NW1zXHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS50b29sTWFuYWdlci5kcmFnU2VsZWN0aW5nVG9vbC5kZWxheSA9IDQwMDtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSBoYW5kbGluZyBvZiBEaWFncmFtRXZlbnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgYWRkRGlhZ3JhbUxpc3RlbmVycygpIHtcclxuXHJcbiAgICAgICAgLy8gRGlhZ3JhbUV2ZW50cyB0byBiZSBoYW5kbGVkIGhlcmUgb3IgYnkgYSBjb21wb25lbnRcclxuICAgICAgICBsZXQgZGlhZ3JhbUV2ZW50cyA9IFtcclxuICAgICAgICAgICAgXCJJbml0aWFsTGF5b3V0Q29tcGxldGVkXCIsXHJcbiAgICAgICAgICAgIFwiQ2hhbmdlZFNlbGVjdGlvblwiLFxyXG4gICAgICAgICAgICBcIkJhY2tncm91bmRTaW5nbGVDbGlja2VkXCIsXHJcbiAgICAgICAgICAgIFwiU2VsZWN0aW9uQ29waWVkXCIsXHJcbiAgICAgICAgICAgIFwiU2VsZWN0aW9uTW92ZWRcIixcclxuICAgICAgICAgICAgXCJTZWxlY3Rpb25EZWxldGluZ1wiLFxyXG4gICAgICAgICAgICBcIlNlbGVjdGlvbkRlbGV0ZWRcIixcclxuICAgICAgICAgICAgXCJQYXJ0Q3JlYXRlZFwiLFxyXG4gICAgICAgICAgICBcIlBhcnRSZXNpemVkXCIsXHJcbiAgICAgICAgICAgIFwiQ2xpcGJvYXJkQ2hhbmdlZFwiLFxyXG4gICAgICAgICAgICBcIkNsaXBib2FyZFBhc3RlZFwiLFxyXG4gICAgICAgICAgICBcIkxpbmtEcmF3blwiLFxyXG4gICAgICAgICAgICBcIkxpbmtSZWxpbmtlZFwiLFxyXG4gICAgICAgICAgICBcIlZpZXdwb3J0Qm91bmRzQ2hhbmdlZFwiXHJcbiAgICAgICAgXTtcclxuICAgICAgICBfLmVhY2goZGlhZ3JhbUV2ZW50cywgKGV2ZW50TmFtZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9kaWFncmFtLmFkZERpYWdyYW1MaXN0ZW5lcihldmVudE5hbWUsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJyb2FkY2FzdERpYWdyYW1FdmVudChldmVudE5hbWUsIGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5hZGREaWFncmFtTGlzdGVuZXIoXCJCYWNrZ3JvdW5kQ29udGV4dENsaWNrZWRcIiwgKGUpID0+IHtcclxuICAgICAgICAgICAgLy8gVE9ETzogdHVybiBvZmYgaW4gcHJvZHVjdGlvblxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdkaWFncmFtIG1vZGVsOicgKyB0aGlzLl9kaWFncmFtLm1vZGVsLnRvSnNvbigpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBicm9hZGNhc3RzIHRoZSBnaXZlbiBEaWFncmFtRXZlbnQgKHNlZSBhcGlkb2NzIGZvciBnby5EaWFncmFtRXZlbnQpXHJcbiAgICAvLyB0byBhbnkgY29tcG9uZW50cyB0aGF0IG1heSBiZSBpbnRlcmVzdGVkLCBpbmNsdWRpbmcgdGhpcyBvbmUuXHJcbiAgICBicm9hZGNhc3REaWFncmFtRXZlbnQoZXZlbnROYW1lLCBlKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVEaWFncmFtRXZlbnQoZXZlbnROYW1lLCBlKTtcclxuICAgICAgICBfLmVhY2godGhpcy5nZXRDb21wb25lbnRzKCksIChjb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQuaGFuZGxlRGlhZ3JhbUV2ZW50KVxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50LmhhbmRsZURpYWdyYW1FdmVudChldmVudE5hbWUsIGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVEaWFncmFtRXZlbnQoZXZlbnROYW1lLCBlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaGFuZGxlRGlhZ3JhbUV2ZW50OiAnICsgZXZlbnROYW1lKTtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09PSAnQ2hhbmdlZFNlbGVjdGlvbicpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkU2VsZWN0aW9uKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09PSAnU2VsZWN0aW9uQ29waWVkJykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkNvcGllZChlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PT0gJ1BhcnRDcmVhdGVkJykge1xyXG4gICAgICAgICAgICB0aGlzLnBhcnRDcmVhdGVkKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09PSAnQmFja2dyb3VuZFNpbmdsZUNsaWNrZWQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMudWkuc2hvd0hlbHBUaXAoJ2NhbnZhc1RpcCcpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09PSAnTGlua0RyYXduJykge1xyXG4gICAgICAgICAgICB0aGlzLmxpbmtEcmF3bihlKTtcclxuICAgICAgICAgICAgdGhpcy5zZXROZXdMaW5rRGlyZWN0aW9uKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09PSAnTGlua1JlbGlua2VkJykge1xyXG4gICAgICAgICAgICB0aGlzLmxpbmtSZWxpbmtlZChlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PT0gJ0NsaXBib2FyZENoYW5nZWQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpcGJvYXJkQ2hhbmdlZChlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PT0gJ0NsaXBib2FyZFBhc3RlZCcpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGlwYm9hcmRQYXN0ZWQoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGhhbmRsZSB6b29tIHRvIHJlZ2lvbiBpZiBhcHBsaWNhYmxlXHJcbiAgICBjaGFuZ2VkU2VsZWN0aW9uKGUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd0aGlzLmNoYW5nZWRTZWxlY3Rpb24nKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy51aS5tYXliZVpvb21Ub1JlZ2lvbigpO1xyXG4gICAgICAgIGlmICh0aGlzLnJlbGF0aW9uc2hpcHNTZWxlY3RlZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudWkuc2hvd0hlbHBUaXAoJ3JlbGF0aW9uc2hpcFRpcCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwYXJ0Q3JlYXRlZChlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnTWFwLCBQYXJ0Q3JlYXRlZCcpO1xyXG4gICAgICAgIGxldCBncm91cCA9IGUuc3ViamVjdDtcclxuICAgICAgICBpZiAoIShncm91cCBpbnN0YW5jZW9mIGdvLkdyb3VwKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsYXlvdXQnLCB0aGlzLmVkaXRvck9wdGlvbnMuZGVmYXVsdFRoaW5nTGF5b3V0IHx8ICdsZWZ0Jyk7XHJcbiAgICAgICAgdGhpcy5sYXlvdXRzLnNldE5ld1BhcnRMb2NhdGlvbkRhdGEoZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZml4IGxpbmsgcG9ydHMgd2hlbiBhIGxpbmsgaXMgY3JlYXRlZCAtIFxyXG4gICAgLy8gdGhlIFAgYW5kIFIgcG9ydHMgYm90aCBjb3ZlciB0aGUgd2hvbGUgbm9kZSwgYW5kIHRoZSBQIHBvcnQgaXMgb24gdG9wIG9mIHRoZSBSIHBvcnQsIFxyXG4gICAgLy8gc28gYm90aCBQIGFuZCBSIGxpbmtzIGdldCB0aGUgdG9Qb3J0IHNldCB0byBQIGJ5IGRlZmF1bHQuXHJcbiAgICBsaW5rRHJhd24oZSkge1xyXG4gICAgICAgIGxldCBsaW5rID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdsaW5rRHJhd24sIGxpbms6ICcgKyBsaW5rICsgJywgZnJvbVBvcnQ6ICcgKyBsaW5rLmZyb21Qb3J0SWQgKyAnLCB0b1BvcnQ6ICcgKyBsaW5rLnRvUG9ydElkKTtcclxuICAgICAgICBpZiAobGluay5mcm9tUG9ydElkID09PSAnUCcpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgY2F0ZWdvcnlcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ3RvUG9ydCcsICdQJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ2NhdGVnb3J5JywgJ1AnKTtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIGNhdGVnb3J5XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgLy8gcHJldmVudCBsaW5rcyBmcm9tIFIgdG8gUFxyXG4gICAgICAgIGVsc2UgaWYgKGxpbmsuZnJvbVBvcnRJZCA9PT0gJ1InKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHRvUG9ydFwiKTtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndG9Qb3J0JywgJ1InKTtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHRvUG9ydFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZml4IGxpbmsgcG9ydHMgd2hlbiBhIGxpbmsgaXMgcmVsaW5rZWQgLSBcclxuICAgIC8vIGRyYWdnaW5nIGVpdGhlciBlbmQgb2YgYW4gUi1saW5rIHRvIGFub3RoZXIgbm9kZSB3aWxsIHNldCB0aGUgY29ycmVzcG9uZGluZyBwb3J0IHRvIFAsIFxyXG4gICAgLy8gc2luY2UgUCBwb3J0IGlzIG9uIHRvcCBvZiBSIHBvcnQsIHNvIHdlIHJlc2V0IGJvdGggcG9ydHMgdG8gUiBpZiB0aGUgY2F0ZWdvcnkgaXMgbm90IFAuXHJcbiAgICBsaW5rUmVsaW5rZWQoZSkge1xyXG4gICAgICAgIGxldCBsaW5rID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGlmICghbGluay5kYXRhLmNhdGVnb3J5IHx8IGxpbmsuZGF0YS5jYXRlZ29yeSAhPT0gJ1AnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ2Zyb21Qb3J0JywgJ1InKTtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndG9Qb3J0JywgJ1InKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TmV3TGlua0RpcmVjdGlvbihlKSB7XHJcbiAgICAgICAgbGV0IGxpbmsgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKGxpbmsuZnJvbVBvcnRJZCA9PT0gJ1InKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIGRpcmVjdGlvblwiKTtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndHlwZScsIHRoaXMuZWRpdG9yT3B0aW9ucy5kZWZhdWx0UmVsYXRpb25zaGlwRGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIGRpcmVjdGlvblwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xpcGJvYXJkQ2hhbmdlZChlKSB7XHJcbiAgICAgICAgbGV0IHBhcnRzID0gZS5zdWJqZWN0Lml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChwYXJ0cy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgbGV0IHBhcnQgPSBwYXJ0cy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaXBib2FyZENoYW5nZWQ6IHBhcnQgJyArIHBhcnQgKyAnLCBtYWlucGFuZWwgc2NhbGU6ICcgKyBwYXJ0LmZpbmRPYmplY3QoJ21haW5wYW5lbCcpLnNjYWxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBOQjogdGhpcyBpcyBjYWxsZWQgd2hlbiBwYXJ0cyBhcmUgY29waWVkIGJ5IGNvbnRyb2wtZHJhZywgTk9UIHdoZW4gdGhlIGNvcHkgYnV0dG9uIGlzIGNsaWNrZWRcclxuICAgIHNlbGVjdGlvbkNvcGllZChlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGlvbkNvcGllZCcpO1xyXG4gICAgICAgIGxldCBwYXJ0cyA9IGUuc3ViamVjdC5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgcGFydC5pc1RvcExldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbG9jID0gZ28uUG9pbnQucGFyc2UocGFydC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0aW9uQ29waWVkOiB1cGRhdGluZyBsb2Mgb2YgcGFydCAnICsgcGFydCArICcgPSAnICsgbG9jICsgJywgc2NhbGU6ICcgKyBwYXJ0LnNjYWxlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHBhcnQuZGF0YSwgJ2xvYycsIChsb2MueCArIDUwKSArICcgJyArIChsb2MueSArIDUwKSk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0LnVwZGF0ZVRhcmdldEJpbmRpbmdzKCdsb2MnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGlwYm9hcmRQYXN0ZWQoZSkge1xyXG4gICAgICAgIGxldCBwYXJ0cyA9IGUuc3ViamVjdC5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgcGFydC5pc1RvcExldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbG9jID0gZ28uUG9pbnQucGFyc2UocGFydC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGlwYm9hcmRQYXN0ZWQ6IHVwZGF0aW5nIGxvYyBvZiBwYXJ0ICcgKyBwYXJ0ICsgJyA9ICcgKyBsb2MgKyAnLCBzY2FsZTogJyArIHBhcnQuc2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbG9jJywgKGxvYy54ICsgNTApICsgJyAnICsgKGxvYy55ICsgNTApKTtcclxuICAgICAgICAgICAgICAgIHBhcnQudXBkYXRlVGFyZ2V0QmluZGluZ3MoJ2xvYycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvbXB1dGVzIHRoZSBib3VuZHMgb2YgYWxsIGdyb3VwcyBpbiB0aGUgZGlhZ3JhbSAtIHRoaXMgaW5jbHVkZXMgYWxsIGlkZWFzL3RoaW5ncywgXHJcbiAgICAvLyBhbmQgZXhjbHVkZXMgbm9kZXMsIGluY2x1ZGluZyBzbGlkZXMsIHRoZSBzbGlkZSBibG9ja2VyLCBhbmQgdGhlIGV4cG9ydCBmb290ZXJcclxuICAgIGNvbXB1dGVNYXBCb3VuZHMoKSB7XHJcbiAgICAgICAgbGV0IGdyb3VwcyA9IG5ldyBnby5MaXN0KGdvLkdyb3VwKTtcclxuICAgICAgICBsZXQgbm9kZXMgPSB0aGlzLl9kaWFncmFtLm5vZGVzO1xyXG4gICAgICAgIHdoaWxlIChub2Rlcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGVzLnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIGdyb3Vwcy5hZGQobm9kZXMudmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhncm91cHMpLmNvcHkoKTsgLy8gcmV0dXJuIGEgbXV0YWJsZSByZWN0XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHdoYXQgaXMgY3VycmVudGx5IHNlbGVjdGVkPyAtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIGFsbCBzZWxlY3RlZCBpdGVtcyBhcmUgdGhpbmdzIChpLmUuIEdyb3VwcyksIGluY2x1ZGluZyByLXRoaW5nc1xyXG4gICAgdGhpbmdzU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9kaWFncmFtIHx8IHRoaXMuX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBsZXQgaXQgPSB0aGlzLl9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIGV4YWN0bHkgb25lIHRoaW5nIChHcm91cCkgaXMgc2VsZWN0ZWRcclxuICAgIHRoaW5nU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpYWdyYW0gJiYgdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPT09IDEgJiYgdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKSBpbnN0YW5jZW9mIGdvLkdyb3VwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGEgc2luZ2xlIGdyb3VwIGlzIHNlbGVjdGVkLCByZXR1cm5zIGl0LCBvdGhlcndpc2UgcmV0dXJucyBudWxsXHJcbiAgICBnZXRVbmlxdWVUaGluZ1NlbGVjdGVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kaWFncmFtICYmIHRoaXMuX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50ID09PSAxICYmIHRoaXMuX2RpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCkgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpbmdzU2VsZWN0ZWRBcmVNZW1iZXJzT2YoZ3JvdXApIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2RpYWdyYW0gfHwgdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGxldCBpdCA9IHRoaXMuX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkgfHwgaXQudmFsdWUuY29udGFpbmluZ0dyb3VwICE9PSBncm91cClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaW5nc1NlbGVjdGVkQXJlRGVzY2VuZGFudHNPZihncm91cCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZGlhZ3JhbSB8fCB0aGlzLl9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IGl0ID0gdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBsZXQgYW5jZXN0b3JzID0gdGhpcy5sYXlvdXRzLmdldEFuY2VzdG9yR3JvdXBzKGl0LnZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKF8uaW5kZXhPZihhbmNlc3RvcnMsIGdyb3VwKSA9PT0gLTEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGluZ3NTZWxlY3RlZEluY2x1ZGVTbGlkZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2RpYWdyYW0gfHwgdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGxldCBpdCA9IHRoaXMuX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKGl0LnZhbHVlLmRhdGEgJiYgaXQudmFsdWUuZGF0YS5jYXRlZ29yeSA9PT0gJ3NsaWRlJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRydWUgaWYgYWxsIHNlbGVjdGVkIGl0ZW1zIGFyZSByZWxhdGlvbnNoaXBzIChpLmUuIExpbmtzKVxyXG4gICAgcmVsYXRpb25zaGlwc1NlbGVjdGVkKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZGlhZ3JhbSB8fCB0aGlzLl9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IGl0ID0gdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIShpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkxpbmspIHx8ICF0aGlzLmxheW91dHMuaXNSTGluayhpdC52YWx1ZSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRydWUgaWYgZXhhY3RseSBvbmUgcmVsYXRpb25zaGlwIChMaW5rKSBpcyBzZWxlY3RlZFxyXG4gICAgcmVsYXRpb25zaGlwU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpYWdyYW0gJiYgdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPT09IDEgJiYgdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKSBpbnN0YW5jZW9mIGdvLkxpbms7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIGxvYWQgYW5kIGluaXRpYWxpemUgbW9kZWwgLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGxvYWQoKSB7XHJcbiAgICAgICAgbGV0IHVybCA9IHRoaXMuX2VkaXRvci5tYXBVcmwgKyAnLmpzb24nO1xyXG4gICAgICAgIGlmICh0aGlzLl9lZGl0b3Iuc2FuZGJveCkge1xyXG4gICAgICAgICAgICB1cmwgPSB0aGlzLl9lZGl0b3IubWFwVXJsICsgJy5qc29uP3NhbmRib3g9MSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vVE9ETzogcmVzdG9yZSBub24tQW5ndWxhciBodHRwLWdldCBmb3IgbWFwIGRhdGFcclxuICAgICAgICBsZXQgZGF0YSA9IHsgXCJtYXBcIjogeyBcIm1ldGFkYXRhXCI6IHsgXCJzYW5kYm94XCI6IGZhbHNlLCBcImlkXCI6IDU1NDcsIFwibmFtZVwiOiBcIlVudGl0bGVkIE1hcFwiLCBcInVybFwiOiBcIi9tYXBzLzU1NDdcIiwgXCJjYW5FZGl0XCI6IHRydWUsIFwidXBkYXRlZEF0XCI6IFwiMjAxNS0wNS0xNVQxMjoyOTo0MC43MjEtMDQ6MDBcIiwgXCJ1cGRhdGVkQnlcIjogbnVsbCwgXCJ1cGRhdGVkQnlOYW1lXCI6IG51bGwsIFwidXNlclRhZ3NcIjogW10gfSwgXCJkYXRhXCI6IHsgXCJjbGFzc1wiOiBcImdvLkdyYXBoTGlua3NNb2RlbFwiLCBcIm5vZGVJc0xpbmtMYWJlbFByb3BlcnR5XCI6IFwiaXNMaW5rTGFiZWxcIiwgXCJsaW5rTGFiZWxLZXlzUHJvcGVydHlcIjogXCJsYWJlbEtleXNcIiwgXCJsaW5rRnJvbVBvcnRJZFByb3BlcnR5XCI6IFwiZnJvbVBvcnRcIiwgXCJsaW5rVG9Qb3J0SWRQcm9wZXJ0eVwiOiBcInRvUG9ydFwiLCBcIm5vZGVEYXRhQXJyYXlcIjogW3sgXCJrZXlcIjogMSwgXCJ0ZXh0XCI6IFwiTmV3IElkZWFcIiwgXCJpc0dyb3VwXCI6IHRydWUsIFwibG9jXCI6IFwiMCAwXCIsIFwibGF5b3V0XCI6IFwibGVmdFwiLCBcInNFeHBhbmRlZFwiOiB0cnVlLCBcInBFeHBhbmRlZFwiOiB0cnVlIH1dLCBcImxpbmtEYXRhQXJyYXlcIjogW10gfSwgXCJzdGF0ZURhdGFcIjogbnVsbCwgZWRpdG9yT3B0aW9uczogbnVsbCwgXCJhbmFseXRpY3NcIjoge30sIFwidmVyc2lvbnNcIjogW10gfSB9O1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbihkYXRhKTtcclxuICAgICAgICAvL3RoaXMuX3VpLnNldFN0YXRlRGF0YShkYXRhLm1hcC5zdGF0ZURhdGEpO1xyXG4gICAgICAgIC8vdGhpcy5fdWkuc2V0TWFwRWRpdG9yT3B0aW9ucyhkYXRhLm1hcC5fZWRpdG9yT3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tNb2RlbCgpO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLnVuZG9NYW5hZ2VyLmlzRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5hZGRDaGFuZ2VkTGlzdGVuZXIodGhpcy5hdXRvc2F2ZS5tb2RlbENoYW5nZWQpO1xyXG4gICAgICAgIHRoaXMuYXV0b3NhdmUuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLmlzUmVhZE9ubHkgPSAhdGhpcy5fZWRpdG9yLmNhbkVkaXQ7XHJcbiAgICAgICAgdGhpcy5fZWRpdG9yLnVwZGF0ZUVkaXRTdGF0dXModGhpcy5fZWRpdG9yLmNhbkVkaXQgPyB0aGlzLl9lZGl0b3IuTEFTVF9VUERBVEVEIDogdGhpcy5fZWRpdG9yLlJFQURfT05MWSk7XHJcbiAgICAgICAgdGhpcy51aS5yZXNldFpvb20oKTtcclxuICAgICAgICB0aGlzLmxvYWRNYXBFeHRyYURhdGEoZGF0YS5tYXApO1xyXG5cclxuICAgICAgICAvLyBpZiBubyBub2RlcyBPUiBpbiB0aGlua3F1ZXJ5IG1vZGUsIGxhdW5jaCBnZW5lcmF0b3JcclxuICAgICAgICBpZiAodGhpcy5fZWRpdG9yLnRoaW5rcXVlcnkgfHwgIXRoaXMuX2RpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy51aS5vcGVuVGFiKHRoaXMudWkuVEFCX0lEX0dFTkVSQVRPUik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIHNsaWRlcywgcGxheSBwcmVzZW50YXRpb25cclxuICAgICAgICBlbHNlIGlmICghdGhpcy5fZWRpdG9yLmNhbkVkaXQgJiYgdGhpcy5wcmVzZW50ZXIuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmVzZW50ZXIucGxheVNsaWRlKDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsb2FkRm9yU2FuZGJveCgpIHtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24odGhpcy5fZWRpdG9yLm1hcERhdGEpO1xyXG4gICAgICAgIHRoaXMudWkuc2V0U3RhdGVEYXRhKCcnKTsgLy8gaW1wb3J0YW50ISAob3RoZXJ3aXNlIGNvcm5lciBoaWdobGlnaHRpbmcgYnJlYWtzKVxyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLnVuZG9NYW5hZ2VyLmlzRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy51aS5yZXNldFpvb20oKTtcclxuICAgICAgICB0aGlzLl9lZGl0b3IuY2FuRWRpdCA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIGlmIG5vIG5vZGVzIE9SIGluIHRoaW5rcXVlcnkgbW9kZSwgbGF1bmNoIGdlbmVyYXRvclxyXG4gICAgICAgIGlmICh0aGlzLl9lZGl0b3IudGhpbmtxdWVyeSkge1xyXG4gICAgICAgICAgICB0aGlzLnVpLm9wZW5UYWIodGhpcy51aS5UQUJfSURfR0VORVJBVE9SKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgc2xpZGVzLCBwbGF5IHByZXNlbnRhdGlvblxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMucHJlc2VudGVyLmdldFNsaWRlTm9kZURhdGFzKCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJlc2VudGVyLnBsYXlTbGlkZSgxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vIGZpeCBhbnkgc3RydWN0dXJhbCBwcm9ibGVtcyBpbiB0aGUgbW9kZWwgYmVmb3JlIGRpc3BsYXlpbmcgaXRcclxuICAgIGNoZWNrTW9kZWwoKSB7XHJcbiAgICAgICAgLy8gY2hhbmdlIFwiaXNMaW5rTGFiZWxcIiBwcm9wZXJ0eSB0byBjYXRlZ29yeTpcIkxpbmtMYWJlbFwiIChjaGFuZ2UgYXMgb2YgZ29KUyAxLjMpXHJcbiAgICAgICAgXy5lYWNoKHRoaXMuX2RpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheSwgKG5vZGVEYXRhLCBpbmRleCwgbGlzdCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobm9kZURhdGEuaXNMaW5rTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBub2RlRGF0YS5pc0xpbmtMYWJlbDtcclxuICAgICAgICAgICAgICAgIG5vZGVEYXRhLmNhdGVnb3J5ID0gXCJMaW5rTGFiZWxcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBjaGVjayBmb3IgdGhlIGxpbmsgbGFiZWwgKHItdGhpbmcpIGZvciBhIGxpbmsgYmVpbmcgdGhlIHNhbWUgYXMgdGhlIGZyb20gb3IgdG8gbm9kZSBcclxuICAgICAgICAvLyAtIHRoaXMgY2FuIGNhdXNlIGluZmluaXRlIHJlY3Vyc2lvbiBpbiB0aGlua3MgbGlrZSBsYXlvdXQuZ2V0U2NhbGVcclxuICAgICAgICBfLmVhY2godGhpcy5fZGlhZ3JhbS5tb2RlbC5saW5rRGF0YUFycmF5LCAobGlua0RhdGEsIGluZGV4LCBsaXN0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBiYWRMYWJlbEtleXMgPSBbXTtcclxuICAgICAgICAgICAgXy5lYWNoKGxpbmtEYXRhLmxhYmVsS2V5cywgKGtleSwgaW5kZXgyLCBsaXN0MikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gbGlua0RhdGEuZnJvbSB8fCBrZXkgPT09IGxpbmtEYXRhLnRvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xhYmVsS2V5IHNhbWUgYXMgZnJvbSBvciB0byBvZiBsaW5rOiAnICsga2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBiYWRMYWJlbEtleXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGlua0RhdGEubGFiZWxLZXlzID0gXy5kaWZmZXJlbmNlKGxpbmtEYXRhLmxhYmVsS2V5cywgYmFkTGFiZWxLZXlzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBsb2FkcyBvdGhlciBkYXRhIGJlc2lkZXMgdGhlIGRpYWdyYW0gbW9kZWwgZnJvbSB0aGUganNvbiBvYmplY3QgcmV0dXJuZWQgYnkgbWFwcy9zaG93Lmpzb25cclxuICAgIC8vIC0gdGhpcyBpbmNsdWRlcyBwb2ludHMsIGJhZGdlcywgdmVyc2lvbnMsIGFuZCBtYXAgYW5hbHl0aWNzXHJcbiAgICAvLyBOQjogcG9pbnRzIGFuZCBiYWRnZXMgYXJlIHNldCBhdCBwYWdlIGxvYWQgdGltZSBpbiBsYXlvdXRzL3VzZXIgYW5kIHVzZXJzL2JhZGdlcywgYnV0XHJcbiAgICAvLyB3ZSBhbHNvIG5lZWQgdG8gYmUgYWJsZSB0byB1cGRhdGUgdGhlbSBoZXJlIGFmdGVyIGFuIGF1dG9zYXZlXHJcblxyXG4gICAgLy8gVE9ETzogaXMgdGhpcyBzdGlsbCBhbGwgbmVlZGVkIHdpdGggdGhlIG5ld2VyIHVzZXJQcm9maWxlIHN0dWZmP1xyXG4gICAgbG9hZE1hcEV4dHJhRGF0YShtYXBEYXRhKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnbWFwLmxvYWRNYXBFeHRyYURhdGEsIG1hcERhdGE6ICcgKyBtYXBEYXRhKTtcclxuICAgICAgICB0aGlzLl9lZGl0b3IubWFwVXNlclRhZ3MgPSBtYXBEYXRhLm1ldGFkYXRhLnVzZXJUYWdzOyAvLyBUT0RPOiBpcyB0aGlzIHVzZWQgYW55d2hlcmU/XHJcblxyXG4gICAgICAgIC8vdGhpcy5fZWRpdG9yLm1hcC5nZXRIaXN0b3J5KCkudmVyc2lvbkxpc3QgPSBtYXBEYXRhLnZlcnNpb25zO1xyXG4gICAgICAgIHRoaXMuYW5hbHl0aWNzLm1hcEFuYWx5dGljcyA9IG1hcERhdGEuYW5hbHl0aWNzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGxvYWRzIG1vZGVsIGRhdGEgZm9yIGFuIGluZGl2aWR1YWwgdmVyc2lvbiBhbmQgZGlzcGxheXMgaXRcclxuICAgIC8vIE5COiB0aGlzIGFsc28gZGlzYWJsZXMgYXV0b3NhdmU7IGxvYWQoKSBtdXN0IGJlIGNhbGxlZCB0byByZS1lbmFibGUgaXRcclxuICAgIGxvYWRWZXJzaW9uKGlkKSB7XHJcbiAgICAgICAgJGh0dHAuZ2V0KCcvbWFwdGhpcy5fdmVyc2lvbnMvJyArIGlkKS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbG9hZGVkIG1hcCB2ZXJzaW9uIHdpdGggSUQ6ICcgKyBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbCA9IGdvLk1vZGVsLmZyb21Kc29uKHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWFncmFtLnVuZG9NYW5hZ2VyLmlzRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0b3NhdmUuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0uaXNSZWFkT25seSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBsb2FkIE1ldGFNYXAgdmVyc2lvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldCB3aGV0aGVyIGVkaXRpbmcgY2FwYWJpbGl0eSBpcyB0ZW1wb3JhcmlseSBzdXNwZW5kZWQgLVxyXG4gICAgLy8gdGhpcyBpcyBkaXN0aW5jdCBmcm9tIHRoZSBnbG9iYWwgdGhpcy5fZWRpdG9yLmNhbkVkaXQgc2V0dGluZyxcclxuICAgIC8vIHdoaWNoIGlmIGZhbHNlIHByZXZlbnRzIGVkaXRpbmcgYXQgYWxsIHRpbWVzXHJcbiAgICBzZXRFZGl0aW5nQmxvY2tlZCh2YWwpIHtcclxuICAgICAgICBpZiAodGhpcy5fZWRpdG9yLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5pc1JlYWRPbmx5ID0gdmFsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tIGNyZWF0aW5nIHRoaW5ncyBpbiB0aGUgbW9kZWwgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGRlZmF1bHQgcHJvcGVydGllcyBmb3IgYWxsIG5ldyBUaGluZ3MgKGdyb3VwcykgLSBub3RlIHRoYXQgdGhlc2UgY2FuIGJlIG92ZXJyaWRkZW4gaWYgbmVlZGVkXHJcbiAgICBnZXROZXdUaGluZ0RhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdGV4dDogJ0lkZWEnLFxyXG4gICAgICAgICAgICBpc0dyb3VwOiB0cnVlLFxyXG4gICAgICAgICAgICBsYXlvdXQ6IHRoaXMuZWRpdG9yT3B0aW9ucy5kZWZhdWx0VGhpbmdMYXlvdXQgfHwgJ2xlZnQnLFxyXG4gICAgICAgICAgICBzRXhwYW5kZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIHBFeHBhbmRlZDogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlU2lzdGVyKHRoaW5nKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9lZGl0b3IuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBuZXdMb2MgPSB0aGlzLmxheW91dHMuZ2V0TmV3U2lzdGVyTG9jYXRpb24odGhpbmcpO1xyXG4gICAgICAgIGxldCBkYXRhID0gXy5leHRlbmQodGhpcy5nZXROZXdUaGluZ0RhdGEoKSwge1xyXG4gICAgICAgICAgICBncm91cDogdGhpbmcuZGF0YS5ncm91cCxcclxuICAgICAgICAgICAgdGV4dDogJ0lkZWEnLFxyXG4gICAgICAgICAgICBsb2M6IGdvLlBvaW50LnN0cmluZ2lmeShuZXdMb2MpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICBsZXQgbmV3U2lzdGVyID0gdGhpcy5fZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XHJcblxyXG4gICAgICAgIC8vIHB1dCBuZXcgc2lzdGVyIHJpZ2h0IGFmdGVyIHRoaW5nIChub3QgYXMgdGhlIGxhc3Qgc2libGluZylcclxuICAgICAgICBpZiAodGhpbmcuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW92ZVNpYmxpbmdOZXh0VG8obmV3U2lzdGVyLCB0aGluZywgUklHSFQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3U2lzdGVyO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVJUb1Npc3Rlcih0aGluZykge1xyXG4gICAgICAgIGlmICghdGhpcy5fZWRpdG9yLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGhpbmdLZXkgPSB0aGlzLl9kaWFncmFtLm1vZGVsLmdldEtleUZvck5vZGVEYXRhKHRoaW5nLmRhdGEpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3RoaW5nS2V5OiAnICsgdGhpbmdLZXkpO1xyXG4gICAgICAgIGxldCBuZXdMb2MgPSB0aGlzLmxheW91dHMuZ2V0TmV3U2lzdGVyTG9jYXRpb24odGhpbmcsIHRydWUpOyAvLyB3aXRoUiA9IHRydWVcclxuICAgICAgICBsZXQgZGF0YSA9IF8uZXh0ZW5kKHRoaXMuZ2V0TmV3VGhpbmdEYXRhKCksIHtcclxuICAgICAgICAgICAgZ3JvdXA6IHRoaW5nLmRhdGEuZ3JvdXAsXHJcbiAgICAgICAgICAgIHRleHQ6ICdJZGVhJyxcclxuICAgICAgICAgICAgbG9jOiBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoZGF0YSk7XHJcbiAgICAgICAgbGV0IG5ld1Npc3RlciA9IHRoaXMuX2RpYWdyYW0uZmluZE5vZGVGb3JEYXRhKGRhdGEpO1xyXG4gICAgICAgIGxldCBncm91cEtleSA9IHRoaXMuX2RpYWdyYW0ubW9kZWwuZ2V0S2V5Rm9yTm9kZURhdGEoZGF0YSk7XHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSBsaW5rXHJcbiAgICAgICAgbGV0IGxpbmtEYXRhID0ge1xyXG4gICAgICAgICAgICBmcm9tOiB0aGluZ0tleSxcclxuICAgICAgICAgICAgdG86IGdyb3VwS2V5LFxyXG4gICAgICAgICAgICB0eXBlOiAndG8nLFxyXG4gICAgICAgICAgICBmcm9tUG9ydDogJ1InLFxyXG4gICAgICAgICAgICB0b1BvcnQ6ICdSJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5hZGRMaW5rRGF0YShsaW5rRGF0YSk7XHJcblxyXG4gICAgICAgIC8vIHB1dCBuZXcgc2lzdGVyIHJpZ2h0IGFmdGVyIHRoaW5nIChub3QgYXMgdGhlIGxhc3Qgc2libGluZylcclxuICAgICAgICBpZiAodGhpbmcuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW92ZVNpYmxpbmdOZXh0VG8obmV3U2lzdGVyLCB0aGluZywgUklHSFQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3U2lzdGVyO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUNoaWxkKHRoaW5nLCBuYW1lLCB4LCB5KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9lZGl0b3IuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBuZXdMb2MgPSB0aGlzLmxheW91dHMuZ2V0TmV3Q2hpbGRMb2NhdGlvbjIodGhpbmcpO1xyXG4gICAgICAgIGlmICh4IHx8IHkpIHtcclxuICAgICAgICAgICAgbmV3TG9jID0gbmV3IGdvLlBvaW50KHgsIHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZGF0YSA9IF8uZXh0ZW5kKHRoaXMuZ2V0TmV3VGhpbmdEYXRhKCksIHtcclxuICAgICAgICAgICAgZ3JvdXA6IHRoaW5nLmRhdGEua2V5LFxyXG4gICAgICAgICAgICB0ZXh0OiBuYW1lIHx8ICdQYXJ0JyxcclxuICAgICAgICAgICAgbG9jOiBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5sYXlvdXRzLnNldERlc2NlbmRhbnRMYXlvdXRzKHRoaW5nLCB0aGluZy5kYXRhLmxheW91dCk7XHJcbiAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5fZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XHJcbiAgICAgICAgY2hpbGQudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlUlRoaW5nKGxpbmssIG5hbWUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2VkaXRvci5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NyZWF0ZVJUaGluZywgbGluazogJyArIGxpbmsgKyAnLCBuYW1lOiAnICsgbmFtZSk7XHJcbiAgICAgICAgLy8gZG9uJ3QgYWxsb3cgbXVsdGlwbGUgUi10aGluZ3NcclxuICAgICAgICBpZiAobGluay5pc0xhYmVsZWRMaW5rKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjYW5ub3QgY3JlYXRlIFJUaGluZywgbGluayBpcyBhbHJlYWR5IGxhYmVsZWQnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGRhdGEgPSBfLmV4dGVuZCh0aGlzLmdldE5ld1RoaW5nRGF0YSgpLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IG5hbWUgfHwgJ1JlbGF0aW9uc2hpcCBJZGVhJyxcclxuICAgICAgICAgICAgLy9pc0xpbmtMYWJlbDogdHJ1ZSwgICAgIC8vIGRlcHJlY2F0ZWQgYXMgb2YgZ29KUyAxLjNcclxuICAgICAgICAgICAgY2F0ZWdvcnk6IFwiTGlua0xhYmVsXCIsIC8vIG5ldyBhcyBvZiBnb0pTIDEuM1xyXG4gICAgICAgICAgICBsb2M6ICcwIDAnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY3JlYXRlIFIgVGhpbmdcIik7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICBsZXQga2V5ID0gdGhpcy5fZGlhZ3JhbS5tb2RlbC5nZXRLZXlGb3JOb2RlRGF0YShkYXRhKTtcclxuICAgICAgICBsZXQgbm9kZSA9IHRoaXMuX2RpYWdyYW0uZmluZFBhcnRGb3JLZXkoa2V5KTtcclxuICAgICAgICBub2RlLmxhYmVsZWRMaW5rID0gbGluaztcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKFwiY3JlYXRlIFIgVGhpbmdcIik7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLSBjcmVhdGluZyB0aGluZ3Mgd2l0aCBzcGVjaWZpZWQgbmFtZXMvbG9jYXRpb25zIC0gZm9yIHVzZSBieSBnZW5lcmF0b3IgYW5kIHRlc3RzIC0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGNyZWF0ZVRoaW5nKHgsIHksIG5hbWUsIGxheW91dCkge1xyXG4gICAgICAgIGxldCBncm91cCA9IHRoaXMuX2RpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuaW5zZXJ0UGFydChuZXcgZ28uUG9pbnQoeCwgeSkpO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICd0ZXh0JywgbmFtZSk7XHJcbiAgICAgICAgaWYgKGxheW91dCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbGF5b3V0JywgbGF5b3V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgbmFtZSkge1xyXG4gICAgICAgIGxldCBsaW5rID0gdGhpcy5jcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUlRoaW5nKGxpbmssIG5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIGxpbmtEYXRhIG9iamVjdCBmb3IgdGhlIG5ldyBsaW5rXHJcbiAgICBjcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMikge1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbignYWRkIGxpbmsnKTtcclxuICAgICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ25vQXJyb3dzJyxcclxuICAgICAgICAgICAgZnJvbTogdGhpbmcxLmRhdGEua2V5LFxyXG4gICAgICAgICAgICB0bzogdGhpbmcyLmRhdGEua2V5LFxyXG4gICAgICAgICAgICBmcm9tUG9ydDogJ1InLFxyXG4gICAgICAgICAgICB0b1BvcnQ6ICdSJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5hZGRMaW5rRGF0YShkYXRhKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWFncmFtLmZpbmRMaW5rRm9yRGF0YShkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBsaW5rRGF0YSBvYmplY3QgZm9yIHRoZSBuZXcgbGlua1xyXG4gICAgY3JlYXRlUExpbmsodGhpbmcxLCB0aGluZzIpIHtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdub0Fycm93cycsXHJcbiAgICAgICAgICAgIGZyb206IHRoaW5nMS5kYXRhLmtleSxcclxuICAgICAgICAgICAgdG86IHRoaW5nMi5kYXRhLmtleSxcclxuICAgICAgICAgICAgZnJvbVBvcnQ6ICdQJyxcclxuICAgICAgICAgICAgdG9Qb3J0OiAnUCcsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnUCdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuYWRkTGlua0RhdGEoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbignYWRkIGxpbmsnKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ3BFeHBhbmRlZCcsIHRydWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWFncmFtLmZpbmRMaW5rRm9yRGF0YShkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tIG1vdmluZyB0aGluZ3MgaW4gdGhlIG1vZGVsIHN0cnVjdHVyZSAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gcmV0dXJucyBhIGdvLkxpc3Qgb2YgdGhlIGl0ZW1zIGluIHRoZSBjdXJyZW50IHNlbGVjdGlvbiB0aGF0IGFyZSBHcm91cHNcclxuICAgIGdldFNlbGVjdGVkR3JvdXBzKCkge1xyXG4gICAgICAgIGxldCBpdCA9IHRoaXMuX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIGxldCBtZW1iZXJzID0gbmV3IGdvLkxpc3QoKTtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIG1lbWJlcnMuYWRkKHBhcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZW1iZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRyYWcgdG8gU1xyXG4gICAgYWRkU2VsZWN0ZWRUaGluZ3NBc0NoaWxkcmVuT2YoZ3JvdXApIHtcclxuICAgICAgICBsZXQgbmV3TWVtYmVycyA9IHRoaXMuZ2V0U2VsZWN0ZWRHcm91cHMoKTtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZXhpc3RpbmcgbWVtYmVycyBzbyB3ZSBjYW4gY2FsY3VsYXRlIGxheW91dFxyXG4gICAgICAgIGxldCBvbGRNZW1iZXJCb3VuZHMgPSB0aGlzLnNhZmVSZWN0KHRoaXMuX2RpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKGdyb3VwLm1lbWJlclBhcnRzKSk7XHJcblxyXG4gICAgICAgIC8vIE5COiB0aGlzIGlzIHN1YmplY3QgdG8gdmFsaWRhdGlvbiBieSBDb21tYW5kSGFuZGxlci5pc1ZhbGlkTWVtYmVyLFxyXG4gICAgICAgIC8vIHNvIGZvciBleGFtcGxlLCBtZW1iZXJzIG9mIG1lbWJlcnMgb2YgbmV3TWVtYmVycyB3aWxsIG5vdCBiZSBhZGRlZCBhcyBtZW1iZXJzXHJcbiAgICAgICAgZ3JvdXAuYWRkTWVtYmVycyhuZXdNZW1iZXJzKTtcclxuXHJcbiAgICAgICAgdGhpcy5sYXlvdXRzLmxheW91dE5ld01lbWJlcnNSZWxhdGl2ZVRvKG5ld01lbWJlcnMsIGdyb3VwLCBvbGRNZW1iZXJCb3VuZHMpO1xyXG5cclxuICAgICAgICB0aGlzLl9kaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZHJhZyB0byBEXHJcbiAgICBhZGRTZWxlY3RlZFRoaW5nc0FzU2lzdGVyc09mKGdyb3VwKSB7XHJcbiAgICAgICAgbGV0IG9sZE1lbWJlcnMgPSB0aGlzLmdldFNlbGVjdGVkR3JvdXBzKCk7XHJcblxyXG4gICAgICAgIC8vIGlmIGRyYWdnaW5nIHRvIHRvcCBsZXZlbCwgbW92ZSBkcmFnZ2VkIHRoaW5ncyBzbyB0aGV5IGRvbid0IG92ZXJsYXAgdGhlIGZvcm1lciBwYXJlbnRcclxuICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAvLyBjaGVjayBleGlzdGluZyBtZW1iZXJzIHNvIHdlIGNhbiBjYWxjdWxhdGUgbGF5b3V0XHJcbiAgICAgICAgICAgIGxldCBvbGRNZW1iZXJzQm91bmRzID0gdGhpcy5fZGlhZ3JhbS5jb21wdXRlUGFydHNCb3VuZHMob2xkTWVtYmVycyk7XHJcbiAgICAgICAgICAgIC8vIE5COiBvbGRNZW1iZXJzIGNhbiBiZSBvbiBtdWx0aXBsZSBsZXZlbHMsIHNvIG5vdCBjbGVhciB3aGljaCBsZXZlbCB0byB1c2UgZm9yIHJlc2NhbGluZyBvbGQgbWVtYmVycyBhZnRlciBkcmFnXHJcbiAgICAgICAgICAgIGxldCBvbGRNZW1iZXJzTGV2ZWwgPSB0aGlzLmxheW91dHMuY29tcHV0ZUxldmVsKG9sZE1lbWJlcnMuZmlyc3QoKSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgaXQgPSBvbGRNZW1iZXJzLml0ZXJhdG9yO1xyXG4gICAgICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWVtYmVyID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXIuY29udGFpbmluZ0dyb3VwID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxheW91dHMubGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZihvbGRNZW1iZXJzLCBncm91cCwgb2xkTWVtYmVyc0JvdW5kcywgb2xkTWVtYmVyc0xldmVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIG5vdCBkcmFnZ2luZyB0byB0b3AgbGV2ZWwsIHBsYWNlIGRyYWdnZWQgdGhpbmdzIGFmdGVyIGZvcm1lciBwYXJlbnQgaW4gb3V0bGluZVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgaXQyID0gb2xkTWVtYmVycy5pdGVyYXRvcjtcclxuICAgICAgICAgICAgd2hpbGUgKGl0Mi5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBtZW1iZXIyID0gaXQyLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbWVtYmVyMi5jb250YWluaW5nR3JvdXAgPSBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVTaWJsaW5nTmV4dFRvKG1lbWJlcjIsIGdyb3VwLCBSSUdIVCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBmb3IgZHJhZ2dpbmcgcGFydHMgd2l0aGluIGEgc3lzdGVtIC0gc2lkZSBpcyBMRUZUIG9yIFJJR0hUIChpLmUuIGFib3ZlIG9yIGJlbG93LCByZXNwLiBpbiBpbnZlbnRvcnkgbGF5b3V0KVxyXG4gICAgYWRkU2VsZWN0ZWRUaGluZ0FzT3JkZXJlZFNpc3Rlck9mKGdyb3VwLCBzaWRlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnYWRkU2VsZWN0ZWRUaGluZ0FzT3JkZXJlZFNpc3Rlck9mLCBzaWRlOiAnICsgc2lkZSk7XHJcbiAgICAgICAgbGV0IHRoaW5nID0gdGhpcy5nZXRVbmlxdWVUaGluZ1NlbGVjdGVkKCk7XHJcbiAgICAgICAgaWYgKCF0aGluZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubW92ZVNpYmxpbmdOZXh0VG8odGhpbmcsIGdyb3VwLCBzaWRlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBtb3ZlcyB0aGUgZmlyc3QgdGhpbmcgKHNpYmxpbmcpIHRvIGJlIGFmdGVyIHRoZSBzZWNvbmQgdGhpbmcgKGdyb3VwKVxyXG4gICAgLy8gaW4gdGhlIHBhcnQgb3JkZXJpbmcgLSB0aGV5IGFyZSBhc3N1bWVkIHRvIGJlIHNpYmxpbmdzXHJcbiAgICAvLyBzaWRlIGlzIExFRlQgb3IgUklHSFRcclxuICAgIG1vdmVTaWJsaW5nTmV4dFRvKHNpYmxpbmcsIGdyb3VwLCBzaWRlKSB7XHJcbiAgICAgICAgbGV0IHBhcmVudCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICBjb25zb2xlLmxvZygnbW92ZVNpYmxpbmdOZXh0VG8sIHNpYmxpbmc6ICcgKyBzaWJsaW5nICsgJywgZ3JvdXA6ICcgKyBncm91cCArICcsIHBhcmVudDogJyArIHBhcmVudCArICcsIHNpYmxpbmcuY29udGFpbmluZ0dyb3VwOiAnICsgc2libGluZy5jb250YWluaW5nR3JvdXApO1xyXG5cclxuICAgICAgICBpZiAoIXBhcmVudCB8fCBzaWJsaW5nLmNvbnRhaW5pbmdHcm91cCAhPT0gcGFyZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBkbyBtb3ZlU2libGluZ05leHRUbyBvbiBub24tc2libGluZ3Mgb3IgdG9wLWxldmVsIGdyb3VwcycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIG5ldyBtZW1iZXIgb3JkZXJcclxuICAgICAgICBsZXQgbWVtYmVyT3JkZXIgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIGxldCBpdCA9IHBhcmVudC5tZW1iZXJQYXJ0cztcclxuICAgICAgICBsZXQgb3JkZXIgPSAwO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgbGV0IG1lbWJlciA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobWVtYmVyIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIGF0IHRoZSB0YXJnZXQgZ3JvdXAsIHNvIGFkZCB0aGUgbW92ZWQgdGhpbmcgZWl0aGVyIGJlZm9yZSBvciBhZnRlciBpdFxyXG4gICAgICAgICAgICAgICAgaWYgKG1lbWJlciA9PT0gZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA9PT0gTEVGVCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJPcmRlci5hZGQoc2libGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHNpYmxpbmcuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChtZW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShtZW1iZXIuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKG1lbWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG1lbWJlci5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKHNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzaWJsaW5nLmRhdGEsICdvcmRlcicsIG9yZGVyKyspO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCByZS1hZGQgdGhlIG1vdmVkIHRoaW5nLCBpdCB3YXMgYWRkZWQgYWJvdmVcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1lbWJlciAhPT0gc2libGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChtZW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG1lbWJlci5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2xlYXIgZXhpc3RpbmcgbWVtYmVyc1xyXG4gICAgICAgIGxldCBuZXdJdCA9IG1lbWJlck9yZGVyLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChuZXdJdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgbGV0IG1lbWJlcjIgPSBuZXdJdC52YWx1ZTtcclxuICAgICAgICAgICAgbWVtYmVyMi5jb250YWluaW5nR3JvdXAgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWRkIG5ldyBtZW1iZXJzXHJcbiAgICAgICAgbmV3SXQucmVzZXQoKTtcclxuICAgICAgICB3aGlsZSAobmV3SXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBtZW1iZXIzID0gbmV3SXQudmFsdWU7XHJcbiAgICAgICAgICAgIG1lbWJlcjMuY29udGFpbmluZ0dyb3VwID0gcGFyZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRUaGluZ0FzUlRoaW5nKHRoaW5nLCBsaW5rKSB7XHJcbiAgICAgICAgdGhpbmcubGFiZWxlZExpbmsgPSBsaW5rO1xyXG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRCBjb3JuZXIgaGFuZGxlciAoc2luZ2xlIGNsaWNrKVxyXG4gICAgdG9nZ2xlREZsYWcodGhpbmcpIHtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAnZGZsYWcnLCAhdGhpbmcuZGF0YS5kZmxhZyk7XHJcbiAgICAgICAgdGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTIGNvcm5lciBoYW5kbGVyIChzaW5nbGUgY2xpY2spXHJcbiAgICB0b2dnbGVTRXhwYW5zaW9uKHRoaW5nKSB7XHJcbiAgICAgICAgbGV0IGlzRXhwYW5kZWQgPSAhKHRoaW5nLmRhdGEgJiYgIXRoaW5nLmRhdGEuc0V4cGFuZGVkKTsgLy8gZXhwYW5kIGJ5IGRlZmF1bHQgaWYgcHJvcGVydHkgbm90IHByZXNlbnRcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAnc0V4cGFuZGVkJywgIWlzRXhwYW5kZWQpO1xyXG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy51aS5zaG93Q29ybmVyVGlwKHRoaW5nLCAnUycpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFAgY29ybmVyIGhhbmRsZXIgKHNpbmdsZSBjbGljaylcclxuICAgIHRvZ2dsZVBFeHBhbnNpb24odGhpbmcpIHtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAncEV4cGFuZGVkJywgIXRoaXMucElzRXhwYW5kZWQodGhpbmcpKTtcclxuICAgICAgICB0aGluZy51cGRhdGVUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIHRoaXMudWkuc2hvd0Nvcm5lclRpcCh0aGluZywgXCJQXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHBJc0V4cGFuZGVkKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwLmRhdGEgJiYgZ3JvdXAuZGF0YS5wRXhwYW5kZWQgPT09IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB1bmRvL3JlZG8gLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBjYW5VbmRvKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLmNhblVuZG8oKTtcclxuICAgIH1cclxuXHJcbiAgICB1bmRvKCkge1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIudW5kbygpO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5SZWRvKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLmNhblJlZG8oKTtcclxuICAgIH1cclxuXHJcbiAgICByZWRvKCkge1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIucmVkbygpO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICByZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSB1dGlsaXR5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBjaGVjayBmb3IgYSByZWN0IHdpdGggTmFOIFgvWS9XL0ggY29vcmRzLCBzbyB3ZSBjYW4gZG8gc3R1ZmYgd2l0aCBpdCBzdWNoIGFzIHVuaW9uUmVjdFxyXG4gICAgLy8gKE5hTixOYU4sMCwwKSA9PiAoMCwwLDAsMClcclxuICAgIHNhZmVSZWN0KHJlY3QpIHtcclxuICAgICAgICBpZiAoaXNOYU4ocmVjdC54KSkge1xyXG4gICAgICAgICAgICByZWN0LnggPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNOYU4ocmVjdC55KSkge1xyXG4gICAgICAgICAgICByZWN0LnkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNOYU4ocmVjdC53aWR0aCkpIHtcclxuICAgICAgICAgICAgcmVjdC53aWR0aCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05hTihyZWN0LmhlaWdodCkpIHtcclxuICAgICAgICAgICAgcmVjdC5oZWlnaHQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVjdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tIGRlYnVnIG1hcCBtb2RlbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBsb2FkTW9kZWwoKSB7XHJcbiAgICAgICAgJCgnI21hcC1tb2RlbC1kZWJ1ZycpLnZhbCh0aGlzLl9kaWFncmFtLm1vZGVsLnRvSnNvbigpKTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlTW9kZWwoKSB7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbCA9IGdvLk1vZGVsLmZyb21Kc29uKCQoJyNtYXAtbW9kZWwtZGVidWcnKS52YWwoKSk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuYWRkQ2hhbmdlZExpc3RlbmVyKHRoaXMuYXV0b3NhdmUubW9kZWxDaGFuZ2VkKTtcclxuICAgICAgICB0aGlzLmF1dG9zYXZlLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWFwO1xyXG4iLCJjb25zdCBnbyA9IHdpbmRvdy5nbztcclxuXHJcbi8vIGZ1bmN0aW9ucyBmb3IgZWRpdGluZyBwZXJzcGVjdGl2ZXMgQU5EIGRpc3RpbmN0aW9ucywgd2hpY2ggd29yayBzaW1pbGFybHkgaW4gdGhlIFVJXHJcbmNsYXNzIFBlcnNwZWN0aXZlcyB7XHJcbiAgICBjb25zdHJ1Y3RvcihlZGl0b3IsIG1hcCkge1xyXG4gICAgICAgIC8vIHRlbXBvcmFyeSBzdGF0ZSBmbGFnIGZvciBhZGRpbmcvcmVtb3ZpbmcgUC9EIHNlbGVjdGlvbnMgcHJvZ3JhbW1hdGljYWxseVxyXG4gICAgICAgIHRoaXMuc2VsZWN0aW5nTGlua2VkVGhpbmdzID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuX2VkaXRvciA9IGVkaXRvcjtcclxuICAgICAgICB0aGlzLl9tYXAgPSBtYXA7XHJcbiAgICB9XHJcblxyXG4gICAgY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnUGVyc3BlY3RpdmVzLCBjdXJyZW50VGFiQ2hhbmdlZCcpO1xyXG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gdGhpcy5fbWFwLnVpLlRBQl9JRF9QRVJTUEVDVElWRVMpIHsgLy8gb3BlbmluZyBwZXJzcGVjdGl2ZXNcclxuICAgICAgICAgICAgdGhpcy5zZXRQb3JEVGhpbmcoJ1AnKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLnNldEVkaXRpbmdCbG9ja2VkKHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAob2xkVmFsdWUgPT09IHRoaXMuX21hcC51aS5UQUJfSURfUEVSU1BFQ1RJVkVTKSB7IC8vIGNsb3NpbmcgcGVyc3BlY3RpdmVzXHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZUxpbmtzKCdQJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5zZXRFZGl0aW5nQmxvY2tlZChmYWxzZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChuZXdWYWx1ZSA9PT0gdGhpcy5fbWFwLnVpLlRBQl9JRF9ESVNUSU5DVElPTlMpIHsgLy8gb3BlbmluZyBkaXN0aW5jdGlvbnNcclxuICAgICAgICAgICAgdGhpcy5zZXRQb3JEVGhpbmcoJ0QnKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLnNldEVkaXRpbmdCbG9ja2VkKHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAob2xkVmFsdWUgPT09IHRoaXMuX21hcC51aS5UQUJfSURfRElTVElOQ1RJT05TKSB7IC8vIGNsb3NpbmcgZGlzdGluY3Rpb25zXHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZUxpbmtzKCdEJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5zZXRFZGl0aW5nQmxvY2tlZChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZURpYWdyYW1FdmVudChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09PSAnQ2hhbmdlZFNlbGVjdGlvbicpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX21hcC51aS5jdXJyZW50VGFiSXModGhpcy5fbWFwLnVpLlRBQl9JRF9QRVJTUEVDVElWRVMpIHx8IHRoaXMuX21hcC51aS5jdXJyZW50VGFiSXModGhpcy5fbWFwLnVpLlRBQl9JRF9ESVNUSU5DVElPTlMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxpbmtzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLSBQL0QgRWRpdG9yIHN0YXRlXHJcblxyXG4gICAgaXNJblBPckRFZGl0b3JNb2RlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAudWkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSB8fCB0aGlzLl9tYXAudWkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleTtcclxuICAgIH1cclxuXHJcbiAgICBpc0luUEVkaXRvck1vZGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC51aS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5O1xyXG4gICAgfVxyXG5cclxuICAgIGlzSW5ERWRpdG9yTW9kZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLnVpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNQRWRpdG9yUG9pbnQoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLnVpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgPT09IGdyb3VwLmRhdGEua2V5O1xyXG4gICAgfVxyXG5cclxuICAgIGlzREVkaXRvclRoaW5nKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC51aS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5ID09PSBncm91cC5kYXRhLmtleTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBOQjogdGhpcyBpcyBjYWxsZWQgdmlhIHRoaXMuX21hcC5nZXRDb3JuZXJGdW5jdGlvbiwgc28gd2UgZ2V0IHRoZSBleHRyYSBjb3JuZXIgYXJnLCB3aGljaCB3ZSBjYW4gaWdub3JlXHJcbiAgICBzZXRQRWRpdG9yUG9pbnQodGhpbmcsIGNvcm5lcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9lZGl0b3IuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICB0aGlzLl9tYXAudWkub3BlblRhYih0aGlzLl9tYXAudWkuVEFCX0lEX1BFUlNQRUNUSVZFUyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldERFZGl0b3JUaGluZyh0aGluZykge1xyXG4gICAgICAgIGlmICh0aGlzLl9lZGl0b3IuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICAvLyBOQjogbmVlZCB0byBzZWxlY3Qgb25seSB0aGlzIHRoaW5nLCBzaW5jZSB0aGlzIGlzIGludm9rZWRcclxuICAgICAgICAgICAgLy8gYnkgYSBjb250cm9sLWNsaWNrLCB3aGljaCB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHNlbGVjdCBqdXN0IGl0XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkuY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgdGhpbmcuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC51aS5vcGVuVGFiKHRoaXMuX21hcC51aS5UQUJfSURfRElTVElOQ1RJT05TKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBpc1BlcnNwZWN0aXZlUG9pbnQoZ3JvdXApIHtcclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NPdXRPZigpO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PT0gJ1AnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaXNTZWxlY3RlZFBlcnNwZWN0aXZlVmlldyhncm91cCkge1xyXG4gICAgICAgIHZhciBsaW5rcyA9IGdyb3VwLmZpbmRMaW5rc0ludG8oKTtcclxuICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT09ICdQJyAmJiB0aGlzLl9tYXAucElzRXhwYW5kZWQobGluay5mcm9tTm9kZSkgJiYgbGluay5mcm9tTm9kZS5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaXNUb2dnbGVkUGVyc3BlY3RpdmVWaWV3KGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGxpbmtzID0gZ3JvdXAuZmluZExpbmtzSW50bygpO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PT0gJ1AnICYmIHRoaXMuX21hcC5wSXNFeHBhbmRlZChsaW5rLmZyb21Ob2RlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTW91c2VPdmVyUGVyc3BlY3RpdmVWaWV3KGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGxpbmtzID0gZ3JvdXAuZmluZExpbmtzSW50bygpO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PT0gJ1AnICYmIGxpbmsuZnJvbU5vZGUgPT09IHRoaXMuX21hcC51aS5tb3VzZU92ZXJHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFBlcnNwZWN0aXZlVmlld1dlaWdodChncm91cCkge1xyXG4gICAgICAgIHZhciBtb2RlID0gdGhpcy5fbWFwLnVpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5wZXJzcGVjdGl2ZU1vZGU7XHJcbiAgICAgICAgaWYgKG1vZGUgPT09ICdzcG90bGlnaHQnIHx8IG1vZGUgPT09ICdib3RoJykge1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuaXNTZWxlY3RlZFBlcnNwZWN0aXZlVmlldyhncm91cCkgPyAxIDogMCkgK1xyXG4gICAgICAgICAgICAgICAgKHRoaXMuaXNUb2dnbGVkUGVyc3BlY3RpdmVWaWV3KGdyb3VwKSA/IDEgOiAwKSArXHJcbiAgICAgICAgICAgICAgICAodGhpcy5pc01vdXNlT3ZlclBlcnNwZWN0aXZlVmlldyhncm91cCkgPyAxIDogMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gY2F0ZWdvcnkgaXMgXCJQXCIgb3IgXCJEXCIgKHBlcnNwZWN0aXZlcyBvciBkaXN0aW5jdGlvbnMpXHJcbiAgICBzZXRQb3JEVGhpbmcoY2F0ZWdvcnkpIHtcclxuICAgICAgICAvLyBpZiBhbHJlYWR5IHNldCwgbXVzdCBkbyBzYXZlIHBlcnNwZWN0aXZlcyBvciBzYXZlIGRpc3RpbmN0aW9uc1xyXG4gICAgICAgIGlmICh0aGlzLl9tYXAudWkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSB8fCB0aGlzLl9tYXAudWkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgdGhpbmcgPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLnNlbGVjdGlvbi5maXJzdCgpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NldFBvckRUaGluZzogJyArIHRoaW5nKTtcclxuICAgICAgICBpZiAodGhpbmcgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpbmcuZGF0YS5rZXk7XHJcbiAgICAgICAgICAgIGlmIChjYXRlZ29yeSA9PT0gXCJQXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC51aS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5ID0ga2V5O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNhdGVnb3J5ID09PSBcIkRcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLnVpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgPSBrZXk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHNlbGVjdCB2aWV3cy9vdGhlcnNcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RMaW5rZWRUaGluZ3NGb3IodGhpbmcsIGNhdGVnb3J5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgc2VsZWN0aW9uIGNoYW5nZXMgLSBpZiB0aGUgdGhpbmcgaXMgc2V0LFxyXG4gICAgLy8gYWRkcy9yZW1vdmVzIEQvUCBsaW5rcyBhY2NvcmRpbmcgdG8gd2hhdCBpcyBzZWxlY3RlZDsgb3RoZXJ3aXNlXHJcbiAgICAvLyBqdXN0IHNob3dzL2hpZGVzIEQvUCBsaW5rcyBmb3IgdGhlIHNlbGVjdGVkIHRoaW5nKHMpXHJcbiAgICB1cGRhdGVMaW5rcygpIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RpbmdMaW5rZWRUaGluZ3MpIC8vIHNlbGVjdGlvbiBpcyBiZWluZyBjaGFuZ2VkIHByb2dyYW1tYXRpY2FsbHksIHNvIGRvbid0IHJlc3BvbmRcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgcE9yRFRoaW5nID0gbnVsbDtcclxuICAgICAgICB2YXIgY2F0ZWdvcnkgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLl9tYXAudWkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSkge1xyXG4gICAgICAgICAgICBwT3JEVGhpbmcgPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLmZpbmROb2RlRm9yS2V5KHRoaXMuX21hcC51aS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5KTtcclxuICAgICAgICAgICAgY2F0ZWdvcnkgPSBcIlBcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX21hcC51aS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5KSB7XHJcbiAgICAgICAgICAgIHBPckRUaGluZyA9IHRoaXMuX21hcC5nZXREaWFncmFtKCkuZmluZE5vZGVGb3JLZXkodGhpcy5fbWFwLnVpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkpO1xyXG4gICAgICAgICAgICBjYXRlZ29yeSA9IFwiRFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFkZExpbmtzVG8gPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHZhciByZW1vdmVMaW5rcyA9IG5ldyBnby5MaXN0KCk7XHJcblxyXG4gICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBhbGwgdGhpbmdzXHJcbiAgICAgICAgaWYgKGNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgIHZhciBsYXllcnMgPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLmxheWVycztcclxuICAgICAgICAgICAgd2hpbGUgKGxheWVycy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVycy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGxheWVyLnBhcnRzO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHBhcnRzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgbGlua3MgdG8gYWRkL3JlbW92ZSBiYXNlZCBvbiBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBPckRUaGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmtzID0gcGFydC5maW5kTGlua3NJbnRvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdMaW5rID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rLmZyb21Ob2RlLmRhdGEua2V5ID09PSBwT3JEVGhpbmcuZGF0YS5rZXkgJiYgbGluay5kYXRhLmNhdGVnb3J5ID09PSBjYXRlZ29yeSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdMaW5rID0gbGluaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWNpZGUgd2hldGhlciB0byBhZGQgb3IgcmVtb3ZlIGEgbGluayB0byB0aGUgcGFydCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCBpcyBzZWxlY3RlZCBhbmQgd2hldGhlciBhIGxpbmsgZXhpc3RzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nTGluayAmJiBwYXJ0LmlzU2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTGlua3NUby5hZGQocGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChleGlzdGluZ0xpbmsgJiYgIXBhcnQuaXNTZWxlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVMaW5rcy5hZGQoZXhpc3RpbmdMaW5rKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZG8gdGhlIGFkZGluZy9yZW1vdmluZyBvZiBsaW5rc1xyXG4gICAgICAgIHZhciBhZGRzID0gYWRkTGlua3NUby5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoYWRkcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgICAgICB2YXIgdG8gPSBhZGRzLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndXBkYXRlTGlua3M6IGFkZGluZyBsaW5rIGZyb20gJyArIHBPckRUaGluZyArICcgdG8gJyArIHRvKTtcclxuICAgICAgICAgICAgaWYgKGNhdGVnb3J5ID09PSBcIkRcIiAmJiBwT3JEVGhpbmcuZGF0YS5rZXkgPT09IHRvLmRhdGEua2V5KSB7XHJcbiAgICAgICAgICAgICAgICBwT3JEVGhpbmcuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJZb3UgY2FuJ3QgZGlzdGluZ3Vpc2ggYSB0aGluZyBmcm9tIGl0c2VsZiFcIik7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLmFkZExpbmtEYXRhKHtcclxuICAgICAgICAgICAgICAgIGZyb206IHBPckRUaGluZy5kYXRhLmtleSxcclxuICAgICAgICAgICAgICAgIHRvOiB0by5kYXRhLmtleSxcclxuICAgICAgICAgICAgICAgIGZyb21Qb3J0OiBjYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgIHRvUG9ydDogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZW1vdmVzID0gcmVtb3ZlTGlua3MuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKHJlbW92ZXMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciByZW1vdmUgPSByZW1vdmVzLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndXBkYXRlTGlua3M6IHJlbW92aW5nIGxpbmsgZnJvbSAnICsgcmVtb3ZlLmZyb21Ob2RlICsgJyB0byAnICsgcmVtb3ZlLnRvTm9kZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkubW9kZWwuc3RhcnRUcmFuc2FjdGlvbigncmVtb3ZlIGxpbmsnKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5yZW1vdmUocmVtb3ZlKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5tb2RlbC5yZW1vdmVMaW5rRGF0YShyZW1vdmUuZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oJ3JlbW92ZSBsaW5rJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzaG93IGxpbmtzXHJcbiAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVMaW5rcyhjYXRlZ29yeSkge1xyXG4gICAgICAgIHZhciBwT3JEVGhpbmcgPSBudWxsO1xyXG4gICAgICAgIGlmIChjYXRlZ29yeSA9PT0gXCJQXCIpIHtcclxuICAgICAgICAgICAgcE9yRFRoaW5nID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKS5maW5kTm9kZUZvcktleSh0aGlzLl9tYXAudWkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC51aS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5ID0gbnVsbDtcclxuICAgICAgICB9IGVsc2UgaWYgKGNhdGVnb3J5ID09PSBcIkRcIikge1xyXG4gICAgICAgICAgICBwT3JEVGhpbmcgPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLmZpbmROb2RlRm9yS2V5KHRoaXMuX21hcC51aS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5KTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLnVpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3RMaW5rZWRUaGluZ3NGb3IoZ3JvdXAsIGNhdGVnb3J5KSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RpbmdMaW5rZWRUaGluZ3MgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkuY2xlYXJTZWxlY3Rpb24oKTtcclxuXHJcbiAgICAgICAgdmFyIGxpbmtzID0gZ3JvdXAuZmluZExpbmtzT3V0T2YoKTtcclxuICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT09IGNhdGVnb3J5KVxyXG4gICAgICAgICAgICAgICAgbGluay50b05vZGUuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGluZ0xpbmtlZFRoaW5ncyA9IGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBlcnNwZWN0aXZlcztcclxuIiwiY29uc3QgZ28gPSB3aW5kb3cuZ287XHJcbmNvbnN0IFNMSURFX0JMT0NLRVJfV0lEVEggPSAxMDAwO1xyXG5jb25zdCBTTElERV9CTE9DS0VSX0NPTE9SID0gXCIjZmZmXCI7XHJcbmNvbnN0IFNMSURFX0JMT0NLRVJfT1BBQ0lUWSA9IDAuOTtcclxuXHJcbi8vIGZ1bmN0aW9ucyBmb3IgdGhlIHByZXNlbnRlci9zbGlkZXNcclxuY2xhc3MgUHJlc2VudGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGVkaXRvciwgbWFwKSB7XHJcbiAgICAgICAgdGhpcy5fZWRpdG9yID0gZWRpdG9yO1xyXG4gICAgICAgIHRoaXMuX21hcCA9IG1hcDtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2xpZGVJbmRleCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc1ByZXNlbnRpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNob3dUT0MgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzQ3JlYXRpbmdUaHVtYm5haWwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gbWFzayBhcHBsaWVkIGFyb3VuZCBzbGlkZSByZWdpb24gd2hlbiBwcmVzZW50aW5nXHJcbiAgICAgICAgdGhpcy5zbGlkZUJsb2NrZXIgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmRpYWdyYW1Bc3BlY3RSYXRpbyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIE5COiBoYXNMaW5rcyBjYW4gaGF2ZSB2YWx1ZXMgZmFsc2UsIDEsIG9yIHRydWUgKDEgbWVhbnMgb25seSBhIHNpbmdsZSBsaW5rKVxyXG4gICAgICAgIHRoaXMuc2xpZGVUeXBlcyA9IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1RJVExFX0JPRFknLCBsYWJlbDogJ1RpdGxlIGFuZCBCb2R5JyxcclxuICAgICAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCBoYXNOb3RlczogdHJ1ZSwgaGFzQ2hlY2tzOiBmYWxzZSwgaGFzTWFwUmVnaW9uOiBmYWxzZSwgaGFzTWFwU3VtbWFyeTogZmFsc2UsIGhhc0xpbmtzOiBmYWxzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnVElUTEVfQk9EWV9NQVAnLCBsYWJlbDogJ1RpdGxlLCBCb2R5IGFuZCBNZXRhTWFwJyxcclxuICAgICAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCBoYXNOb3RlczogdHJ1ZSwgaGFzQ2hlY2tzOiBmYWxzZSwgaGFzTWFwUmVnaW9uOiB0cnVlLCBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdBQ1RJVklUWV9NQVAnLCBsYWJlbDogJ0xlc3NvbiBBY3Rpdml0eSBhbmQgTWV0YU1hcCcsXHJcbiAgICAgICAgICAgICAgICBoYXNUaXRsZTogdHJ1ZSwgaGFzTm90ZXM6IHRydWUsIGhhc0NoZWNrczogdHJ1ZSwgaGFzTWFwUmVnaW9uOiB0cnVlLCBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ01BUF9PTkxZJywgbGFiZWw6ICdNZXRhTWFwIG9ubHknLFxyXG4gICAgICAgICAgICAgICAgaGFzVGl0bGU6IHRydWUsIGhhc05vdGVzOiBmYWxzZSwgaGFzQ2hlY2tzOiBmYWxzZSwgaGFzTWFwUmVnaW9uOiB0cnVlLCBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdNQVBfU1VNTUFSWScsIGxhYmVsOiAnTWV0YU1hcCBTdW1tYXJ5JyxcclxuICAgICAgICAgICAgICAgIGhhc1RpdGxlOiBmYWxzZSwgaGFzTm90ZXM6IGZhbHNlLCBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IHRydWUsIGhhc01hcFN1bW1hcnk6IHRydWUsIGhhc0xpbmtzOiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tIGxpbmsvYXR0YWNobWVudCB0eXBlcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIHRoaXMubGlua1R5cGVzID0gW1xyXG4gICAgICAgICAgICB7IG5hbWU6ICcnLCBsYWJlbDogJy0tIFNlbGVjdCBhdHRhY2htZW50IHR5cGUgLS0nIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ1dFQicsIGxhYmVsOiAnV2ViIFBhZ2UnIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ1BERicsIGxhYmVsOiAnUERGJyB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdET0MnLCBsYWJlbDogJ0RvY3VtZW50JyB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdTUFJFQURTSEVFVCcsIGxhYmVsOiAnU3ByZWFkc2hlZXQnIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ1BSRVNFTlRBVElPTicsIGxhYmVsOiAnUHJlc2VudGF0aW9uJyB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdNRVRBTUFQJywgbGFiZWw6ICdNZXRhTWFwJyB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdJTUFHRScsIGxhYmVsOiAnSW1hZ2UnIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ0FVRElPJywgbGFiZWw6ICdBdWRpbycgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnVklERU8nLCBsYWJlbDogJ1ZpZGVvJyB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdTVVJWRVknLCBsYWJlbDogJ1N1cnZleScgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnV09SS1NIRUVUJywgbGFiZWw6ICdXb3Jrc2hlZXQnIH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0gbGlzdCBvZiBhbGwgdGhpbmdzIGluIHRoZSBtYXAsIGZvciBtYXAgc3VtbWFyeSBzbGlkZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgdGhpcy5pZGVhTGlzdCA9ICcnO1xyXG5cclxuICAgICAgICB0aGlzLnN1bW1hcnlBbmFseXRpY3MgPSBbXHJcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfVEhJTkdTJywgc2luZ3VsYXJMYWJlbDogJ0Rpc3RpbmN0aW9uJywgcGx1cmFsTGFiZWw6ICdEaXN0aW5jdGlvbnMnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfU1lTVEVNUycsIHNpbmd1bGFyTGFiZWw6ICdTeXN0ZW0nLCBwbHVyYWxMYWJlbDogJ1N5c3RlbXMnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfUkVMQVRJT05TSElQUycsIHNpbmd1bGFyTGFiZWw6ICdSZWxhdGlvbnNoaXAnLCBwbHVyYWxMYWJlbDogJ1JlbGF0aW9uc2hpcHMnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfUEVSU1BFQ1RJVkVTJywgc2luZ3VsYXJMYWJlbDogJ1BlcnNwZWN0aXZlJywgcGx1cmFsTGFiZWw6ICdQZXJzcGVjdGl2ZXMnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfUlRISU5HUycsIHNpbmd1bGFyTGFiZWw6ICdSZWxhdGlvbnNoaXAgSWRlYScsIHBsdXJhbExhYmVsOiAnUmVsYXRpb25zaGlwIElkZWFzJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1NZU1RFTV9SVEhJTkdTJywgc2luZ3VsYXJMYWJlbDogJ1JlbGF0aW9uc2hpcCBTeXN0ZW0nLCBwbHVyYWxMYWJlbDogJ1JlbGF0aW9uc2hpcCBTeXN0ZW1zJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX1NZU1RFTV9QRVJTUEVDVElWRVMnLCBzaW5ndWxhckxhYmVsOiAnUGVyc3BlY3RpdmUgU3lzdGVtJywgcGx1cmFsTGFiZWw6ICdQZXJzcGVjdGl2ZSBTeXN0ZW1zJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0NPVU5UX0RJU1RJTkNUSU9OUycsIHNpbmd1bGFyTGFiZWw6ICdBZHZhbmNlZCBEaXN0aW5jdGlvbicsIHBsdXJhbExhYmVsOiAnQWR2YW5jZWQgRGlzdGluY3Rpb25zJyB9XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgdGhpcy50aHVtYm5haWxDYWNoZSA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGF1dG9zYXZlKCkge1xyXG4gICAgICAgIHRoaXMuX21hcC5hdXRvc2F2ZS5zYXZlKCdlZGl0X3ByZXNlbnRlcicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0gZWRpdGluZyBmdW5jdGlvbnMgZm9yIGRpZmZlcmVudCBzbGlkZSB0eXBlcyAtLS0tLS0tLS0tLS0tXHJcblxyXG5cclxuXHJcbiAgICAvLyBvbmx5IGNhbGwgdGhpcyBvY2Nhc2lvbmFsbHksIGFzIHRoZXkgd29uJ3QgYmUgZWRpdGluZyB0aGUgbWFwIHdoaWxlIHByZXNlbnRlciBpcyBvcGVuXHJcbiAgICB1cGRhdGVJZGVhTGlzdCgpIHtcclxuICAgICAgICBsZXQgbm9kZXMgPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLm5vZGVzO1xyXG4gICAgICAgIGxldCBsaXN0ID0gW107XHJcbiAgICAgICAgd2hpbGUgKG5vZGVzLm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoKG5vZGVzLnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0LnB1c2gobm9kZXMudmFsdWUuZGF0YS50ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsaXN0LnNvcnQoKTtcclxuXHJcbiAgICAgICAgLy8gZmlsdGVyIG91dCBwbGFjZWhvbGRlciBuYW1lcyAtIHNlZSB0aGlzLl9tYXAuanM6Z2V0TmV3VGhpbmdEYXRhLCBjcmVhdGVTaXN0ZXIsIGV0Yy5cclxuICAgICAgICBsaXN0ID0gXy5kaWZmZXJlbmNlKF8udW5pcShsaXN0LCB0cnVlKSxcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdlbmVyYXRvci5nZXRQbGFjZWhvbGRlcklkZWFOYW1lcygpLFxyXG4gICAgICAgICAgICBbJ05ldyBJZGVhJywgJ05ldyBEaXN0aW5ndWlzaGVkIElkZWEnLCAnTmV3IFJlbGF0ZWQgSWRlYScsICdOZXcgUmVsYXRpb25zaGlwIElkZWEnLCAnTmV3IFBhcnQgSWRlYScsXHJcbiAgICAgICAgICAgICAnSWRlYScsICdQYXJ0JywgJ1JlbGF0aW9uc2hpcCBJZGVhJ10gLy8gbmV3ZXIgc2ltcGxpZmllZCBuYW1lc1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuaWRlYUxpc3QgPSBsaXN0LmpvaW4oJywgJyk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBhZGRDaGVjayhub2RlRGF0YSkge1xyXG4gICAgICAgIG5vZGVEYXRhLmNoZWNrcy5wdXNoKHsgdGV4dDogJycgfSk7XHJcbiAgICAgICAgdGhpcy5hdXRvc2F2ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNoZWNrKGNoZWNrLCBub2RlRGF0YSkge1xyXG4gICAgICAgIGxldCBpID0gXy5pbmRleE9mKG5vZGVEYXRhLmNoZWNrcywgY2hlY2spO1xyXG4gICAgICAgIG5vZGVEYXRhLmNoZWNrcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgdGhpcy5hdXRvc2F2ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZExpbmsobm9kZURhdGEpIHtcclxuICAgICAgICBub2RlRGF0YS5saW5rcy5wdXNoKHsgdGl0bGU6ICcnLCB1cmw6ICcnLCB0eXBlOiAnJyB9KTtcclxuICAgICAgICB0aGlzLmF1dG9zYXZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlTGluayhsaW5rLCBub2RlRGF0YSkge1xyXG4gICAgICAgIGxldCBpID0gXy5pbmRleE9mKG5vZGVEYXRhLmxpbmtzLCBsaW5rKTtcclxuICAgICAgICBub2RlRGF0YS5saW5rcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgdGhpcy5hdXRvc2F2ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZVRPQygpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1ByZXNlbnRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93VE9DID0gIXRoaXMuc2hvd1RPQztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTkI6IGNhbid0IGNyZWF0ZSB0aGlzIGluIGluaXQgYXMgdGhlIGRpYWdyYW0gZG9lc24ndCBleGlzdCB5ZXQuLi5cclxuICAgIG1heWJlSW5pdFNsaWRlQmxvY2tlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2xpZGVCbG9ja2VyKSB7XHJcbiAgICAgICAgICAgIGxldCBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVCbG9ja2VyID0gbWsoZ28uTm9kZSwgZ28uUGFuZWwuQXV0byxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllck5hbWU6ICdUb29sJyxcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBTTElERV9CTE9DS0VSX09QQUNJVFlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtayhnby5TaGFwZSwgXCJSZWN0YW5nbGVcIixcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogU0xJREVfQkxPQ0tFUl9DT0xPUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDEwMDBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkuYWRkKHRoaXMuc2xpZGVCbG9ja2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKG9sZFZhbHVlID09PSB0aGlzLl9tYXAudWkuVEFCX0lEX1BSRVNFTlRFUikgeyAvLyBjbG9zaW5nIHRhYlxyXG4gICAgICAgICAgICB0aGlzLnN0b3BQcmVzZW50aW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG5ld1ZhbHVlID09PSB0aGlzLl9tYXAudWkuVEFCX0lEX1BSRVNFTlRFUikgeyAvLyBvcGVuaW5nIHRhYlxyXG4gICAgICAgICAgICAvLyBzaG93IHNsaWRlcyAoc2VlIGxheW91dHMuc2xpZGVUZW1wbGF0ZSwgYmluZGluZyBvZiB2aXNpYmxlIGF0dHIpXHJcbiAgICAgICAgICAgIHRoaXMuZGlhZ3JhbUFzcGVjdFJhdGlvID0gJCgnI2RpYWdyYW0nKS53aWR0aCgpIC8gJCgnI2RpYWdyYW0nKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RpYWdyYW1Bc3BlY3RSYXRpbzogJyArIHRoaXMuZGlhZ3JhbUFzcGVjdFJhdGlvKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVJZGVhTGlzdCgpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudFNsaWRlSW5kZXggJiYgdGhpcy5nZXRTbGlkZU5vZGVEYXRhcygpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNsaWRlSW5kZXggPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVUaHVtYm5haWxTZWxlY3RlZCgxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlRGlhZ3JhbUV2ZW50KGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5fbWFwLnVpLmN1cnJlbnRUYWJJcyh0aGlzLl9tYXAudWkuVEFCX0lEX1BSRVNFTlRFUikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gJ1NlbGVjdGlvbkRlbGV0aW5nJykge1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0aW9uID0gZS5zdWJqZWN0O1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0aW9uLmNvdW50ID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcgPSBzZWxlY3Rpb24uZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGluZyBpbnN0YW5jZW9mIGdvLk5vZGUgJiYgdGhpbmcuZGF0YS5jYXRlZ29yeSA9PT0gJ3NsaWRlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybShcIkRlbGV0ZSB0aGlzIHNsaWRlIGZyb20gdGhlIHByZXNlbnRhdGlvbj9cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldmVudE5hbWUgPT09ICdTZWxlY3Rpb25EZWxldGVkJykge1xyXG4gICAgICAgICAgICAvLyBpZiBzbGlkZSBpcyBkZWxldGVkIGZyb20gY2FudmFzIHJhdGhlciB0aGFuIGJ5IHRodW1ibmFpbCB4IGJ1dHRvbiwgbmVlZCB0byB1cGRhdGUgaW5kZXhlc1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBhY3RTbGlkZUluZGV4ZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXZlbnROYW1lID09PSAnU2VsZWN0aW9uTW92ZWQnIHx8IGV2ZW50TmFtZSA9PT0gJ1BhcnRSZXNpemVkJykge1xyXG4gICAgICAgICAgICAvLyBjbGVhciB0aHVtYm5haWwgY2FjaGVcclxuICAgICAgICAgICAgdGhpcy50aHVtYm5haWxDYWNoZSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldmVudE5hbWUgPT09ICdWaWV3cG9ydEJvdW5kc0NoYW5nZWQnKSB7XHJcbiAgICAgICAgICAgIC8vIGFkanVzdCB6b29taW5nIG9mIG1hcCByZWdpb25cclxuICAgICAgICAgICAgLy90aGlzLndpbmRvd1Jlc2l6ZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgd2luZG93UmVzaXplZCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3dpbmRvd1Jlc2l6ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fd2luZG93UmVzaXplZCA9IF8uZGVib3VuY2UoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZVRodW1ibmFpbFNlbGVjdGVkKHRoaXMuY3VycmVudFNsaWRlSW5kZXgpO1xyXG4gICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpbmRvd1Jlc2l6ZWQ7XHJcbiAgICB9XHJcbiAgICBzaG93U2lkZWJhcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLnVpLmN1cnJlbnRUYWJJcyh0aGlzLl9tYXAudWkuVEFCX0lEX1BSRVNFTlRFUikgJiYgKCF0aGlzLmlzUHJlc2VudGluZyB8fCB0aGlzLnNob3dUT0MpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc2FibGVNYXBUb29sYmFyQnV0dG9ucygpIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuX21hcC51aS5jdXJyZW50VGFiSXModGhpcy5fbWFwLnVpLlRBQl9JRF9QUkVTRU5URVIpXHJcbiAgICAgICAgICAgIHx8IHRoaXMuaXNQcmVzZW50aW5nXHJcbiAgICAgICAgICAgIHx8ICF0aGlzLmdldEN1cnJlbnRTbGlkZVR5cGUoKS5oYXNNYXBSZWdpb247XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyBhbiBhcnJheSBvZiBub2RlIGRhdGEgb2JqZWN0cyAobm90IHRoZSBzbGlkZSBub2RlcyB0aGVtc2VsdmVzKVxyXG4gICAgZ2V0U2xpZGVOb2RlRGF0YXMoKSB7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGxldCBub2RlcyA9IGRpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheTtcclxuICAgICAgICBsZXQgbm9kZURhdGFzID0gXy5maWx0ZXIobm9kZXMsIChub2RlKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlLmNhdGVnb3J5ID09PSAnc2xpZGUnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG5vZGVEYXRhcyA9IF8uc29ydEJ5KG5vZGVEYXRhcywgKG5vZGVEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlRGF0YS5pbmRleDtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTbGlkZU5vZGVEYXRhcywgaW5kZXhlczogJyArIF8ucGx1Y2soc2xpZGVzRGF0YSwgJ2luZGV4JykpO1xyXG4gICAgICAgIHJldHVybiBub2RlRGF0YXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2xpZGVDb3VudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRTbGlkZU5vZGVEYXRhcygpLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBY3Rpdml0eVNsaWRlQ291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIF8ud2hlcmUodGhpcy5nZXRTbGlkZU5vZGVEYXRhcygpLCB7IHR5cGU6ICdBQ1RJVklUWV9NQVAnIH0pLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTbGlkZVR5cGUodHlwZU5hbWUpIHtcclxuICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUodGhpcy5zbGlkZVR5cGVzLCB7IG5hbWU6IHR5cGVOYW1lIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEN1cnJlbnRTbGlkZVR5cGUoKSB7XHJcbiAgICAgICAgbGV0IHNsaWRlID0gdGhpcy5maW5kU2xpZGVCeUluZGV4KHRoaXMuY3VycmVudFNsaWRlSW5kZXgpO1xyXG4gICAgICAgIGlmIChzbGlkZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUodGhpcy5zbGlkZVR5cGVzLCB7IG5hbWU6IHNsaWRlLmRhdGEudHlwZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmluZFNsaWRlQnlJbmRleChpbmRleCkge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBsZXQgc2xpZGVEYXRhID0gXy5maW5kKHRoaXMuZ2V0U2xpZGVOb2RlRGF0YXMoKSwgKHNsaWRlRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc2xpZGVEYXRhLmluZGV4ID09PSBpbmRleDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoc2xpZGVEYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkaWFncmFtLmZpbmROb2RlRm9yS2V5KHNsaWRlRGF0YS5rZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaW5jcmVtZW50IGlzIC0xIG9yICsxXHJcbiAgICBtb3ZlU2xpZGUoaW5kZXgsIGluY3JlbWVudCkge1xyXG5cclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgbGV0IHNsaWRlID0gdGhpcy5maW5kU2xpZGVCeUluZGV4KGluZGV4KTtcclxuICAgICAgICBsZXQgbmVpZ2hib3IgPSB0aGlzLmZpbmRTbGlkZUJ5SW5kZXgoaW5kZXggKyBpbmNyZW1lbnQpO1xyXG4gICAgICAgIGlmIChzbGlkZSAmJiBuZWlnaGJvcikge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtb3ZlU2xpZGU6IHN3YXBwaW5nICcgKyBzbGlkZS5kYXRhLmtleSArICcgd2l0aCAnICsgbmVpZ2hib3IuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJtb3ZlIHNsaWRlXCIpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzbGlkZS5kYXRhLCAnaW5kZXgnLCBzbGlkZS5kYXRhLmluZGV4ICsgaW5jcmVtZW50KTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobmVpZ2hib3IuZGF0YSwgJ2luZGV4JywgbmVpZ2hib3IuZGF0YS5pbmRleCAtIGluY3JlbWVudCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJtb3ZlIHNsaWRlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnRodW1ibmFpbENhY2hlID0gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBjb21wYWN0U2xpZGVJbmRleGVzKCkge1xyXG5cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjb21wYWN0U2xpZGVJbmRleGVzJyk7XHJcbiAgICAgICAgbGV0IHNsaWRlc0RhdGEgPSB0aGlzLmdldFNsaWRlTm9kZURhdGFzKCk7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGxldCBuZXdJbmRleCA9IDE7XHJcbiAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiY29tcGFjdCBzbGlkZSBpbmRleGVzXCIpO1xyXG4gICAgICAgIF8uZWFjaChzbGlkZXNEYXRhLCAoc2xpZGVEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHNsaWRlRGF0YSwgJ2luZGV4JywgbmV3SW5kZXgpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjb21wYWN0U2xpZGVJbmRleGVzOiBzZXQgaW5kZXggZm9yICcgKyBzbGlkZURhdGEua2V5ICsgJyB0byAnICsgbmV3SW5kZXgpO1xyXG4gICAgICAgICAgICBuZXdJbmRleCsrO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJjb21wYWN0IHNsaWRlIGluZGV4ZXNcIik7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldE5ld1NsaWRlS2V5KCkge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBsZXQgaSA9IDE7XHJcbiAgICAgICAgd2hpbGUgKGRpYWdyYW0ubW9kZWwuZmluZE5vZGVEYXRhRm9yS2V5KCdzbGlkZS0nICsgaSkpIHtcclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJ3NsaWRlLScgKyBpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE5COiBpbmRleGVzIChhbmQga2V5cz8pIG11c3QgYmUgMS1iYXNlZCwgb3RoZXJ3aXNlIGZpcnN0IHNsaWRlIGdldHMgc2NyZXdlZCB1cFxyXG4gICAgLy8gKHNvbWV3aGVyZSB0aGUgaW5kZXggc2hvd3MgdXAgYXMgJycgaW5zdGVhZCBvZiAwKVxyXG4gICAgZ2V0TmV3U2xpZGVJbmRleCgpIHtcclxuICAgICAgICBsZXQgc2xpZGVzID0gdGhpcy5nZXRTbGlkZU5vZGVEYXRhcygpO1xyXG4gICAgICAgIHJldHVybiBzbGlkZXMubGVuZ3RoICsgMTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRTbGlkZSh0eXBlTmFtZSkge1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnYWRkU2xpZGU6ICcgKyB0eXBlTmFtZSk7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpO1xyXG5cclxuICAgICAgICBsZXQgZGIgPSB0aGlzLl9tYXAuY29tcHV0ZU1hcEJvdW5kcygpO1xyXG4gICAgICAgIGRiLmluZmxhdGUoZGIud2lkdGggLyAyMCwgZGIuaGVpZ2h0IC8gMTApO1xyXG4gICAgICAgIGxldCBuZXdMb2MgPSBkYi54ICsgJyAnICsgZGIueTtcclxuICAgICAgICBsZXQgbmV3SW5kZXggPSB0aGlzLmdldE5ld1NsaWRlSW5kZXgoKTtcclxuXHJcbiAgICAgICAgbGV0IHNsaWRlVHlwZSA9IF8uZmluZFdoZXJlKHRoaXMuc2xpZGVUeXBlcywgeyBuYW1lOiB0eXBlTmFtZSB9KTtcclxuXHJcbiAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiYWRkIHNsaWRlXCIpO1xyXG4gICAgICAgIGRpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoe1xyXG4gICAgICAgICAgICBrZXk6IHRoaXMuZ2V0TmV3U2xpZGVLZXkoKSxcclxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdzbGlkZScsXHJcbiAgICAgICAgICAgIGluZGV4OiBuZXdJbmRleCxcclxuICAgICAgICAgICAgaXNHcm91cDogZmFsc2UsXHJcbiAgICAgICAgICAgIHdpZHRoOiBkYi53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBkYi5oZWlnaHQsXHJcbiAgICAgICAgICAgIGxvYzogbmV3TG9jLFxyXG4gICAgICAgICAgICBsZXZlbDogMCxcclxuICAgICAgICAgICAgY2hpbGRyZW46IDAsXHJcbiAgICAgICAgICAgIHR5cGU6IHR5cGVOYW1lLFxyXG4gICAgICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgICAgIG5vdGVzOiAnJyxcclxuICAgICAgICAgICAgY2hlY2tzOiBbXSxcclxuICAgICAgICAgICAgaGFzUmVnaW9uOiBzbGlkZVR5cGUuaGFzTWFwUmVnaW9uLFxyXG4gICAgICAgICAgICBpc1N1bW1hcnk6IHNsaWRlVHlwZS5oYXNNYXBTdW1tYXJ5LFxyXG4gICAgICAgICAgICBsaW5rczogW11cclxuICAgICAgICB9KTtcclxuICAgICAgICBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiYWRkIHNsaWRlXCIpO1xyXG4gICAgICAgIHRoaXMudGh1bWJuYWlsQ2FjaGUgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5zbGlkZVRodW1ibmFpbFNlbGVjdGVkKG5ld0luZGV4KTsgLy8gdHJpZ2dlciBkaXNwbGF5IG9mIGVkaXQgZm9ybSwgem9vbSB0byBtYXAgcmVnaW9uIGlmIGFwcGxpY2FibGVcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZHVwbGljYXRlU2xpZGUoaW5kZXgpIHtcclxuXHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGxldCBuZXdJbmRleCA9IHRoaXMuZ2V0TmV3U2xpZGVJbmRleCgpO1xyXG4gICAgICAgIGxldCBzbGlkZSA9IHRoaXMuZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcbiAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcImR1cGxpY2F0ZSBzbGlkZVwiKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGJ1bXAgdXAgaW5kZXhlcyBvbiBzdWJzZXF1ZW50IHNsaWRlcyB0byBtYWtlIHJvb20gZm9yIG5ldyBzbGlkZSBhZnRlciBjdXJyZW50IG9uZVxyXG4gICAgICAgICAgICBfLmVhY2godGhpcy5nZXRTbGlkZU5vZGVEYXRhcygpLCAoc2xpZGVEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2xpZGVEYXRhLmluZGV4ID4gaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzbGlkZURhdGEsICdpbmRleCcsIHNsaWRlRGF0YS5pbmRleCArIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIE5COiBjcmVhdGluZyBhIG5ldyBub2RlRGF0YSBvYmplY3QgaGVyZSByYXRoZXIgdGhhbiBjb3B5aW5nIGFuZCBtb2RpZnlpbmcsIHRvIGF2b2lkIGNvcHlpbmcgJCRoYXNoS2V5ICg/PylcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YSh7XHJcbiAgICAgICAgICAgICAgICBrZXk6IHRoaXMuZ2V0TmV3U2xpZGVLZXkoKSxcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnc2xpZGUnLFxyXG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4ICsgMSxcclxuICAgICAgICAgICAgICAgIGlzR3JvdXA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHNsaWRlLmRhdGEud2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHNsaWRlLmRhdGEuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgbG9jOiBzbGlkZS5kYXRhLmxvYyxcclxuICAgICAgICAgICAgICAgIGxldmVsOiAwLFxyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IDAsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBzbGlkZS5kYXRhLnR5cGUsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogc2xpZGUuZGF0YS50aXRsZSArICcgKENvcHkpJyxcclxuICAgICAgICAgICAgICAgIG5vdGVzOiBzbGlkZS5kYXRhLm5vdGVzLFxyXG4gICAgICAgICAgICAgICAgY2hlY2tzOiBzbGlkZS5kYXRhLmNoZWNrcywgLy8gY2xvbmU/XHJcbiAgICAgICAgICAgICAgICBoYXNSZWdpb246IHNsaWRlLmRhdGEuaGFzUmVnaW9uLFxyXG4gICAgICAgICAgICAgICAgaXNTdW1tYXJ5OiBzbGlkZS5kYXRhLmlzU3VtbWFyeSxcclxuICAgICAgICAgICAgICAgIGxpbmtzOiBzbGlkZS5kYXRhLmxpbmtzIC8vIGNsb25lP1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImR1cGxpY2F0ZSBzbGlkZVwiKTtcclxuICAgICAgICAgICAgdGhpcy50aHVtYm5haWxDYWNoZSA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlU2xpZGUoaW5kZXgpIHtcclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygncmVtb3ZlU2xpZGU6ICcgKyBpbmRleCk7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGxldCBzbGlkZSA9IHRoaXMuZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcbiAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcInJlbW92ZSBzbGlkZVwiKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5yZW1vdmVOb2RlRGF0YShzbGlkZS5kYXRhKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcInJlbW92ZSBzbGlkZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2xpZGVJbmRleCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50aHVtYm5haWxDYWNoZSA9IFtdO1xyXG4gICAgICAgIHRoaXMuY29tcGFjdFNsaWRlSW5kZXhlcygpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXRTbGlkZVRodW1ibmFpbChpbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRodW1ibmFpbENhY2hlW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVTbGlkZVRodW1ibmFpbHMoKSB7XHJcbiAgICAgICAgXy5lYWNoKHRoaXMuZ2V0U2xpZGVOb2RlRGF0YXMoKSwgKG5kKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU2xpZGVUaHVtYm5haWwobmQuaW5kZXgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVNsaWRlVGh1bWJuYWlsKGluZGV4KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnY3JlYXRlU2xpZGVUaHVtYm5haWwnKTtcclxuXHJcbiAgICAgICAgbGV0IHRodW1iV2lkdGggPSAxMDAwO1xyXG4gICAgICAgIGxldCB0aHVtYkhlaWdodCA9IDYwMDtcclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcblxyXG4gICAgICAgIGxldCBzbGlkZSA9IHRoaXMuZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcbiAgICAgICAgaWYgKCFzbGlkZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCFzbGlkZS5kYXRhLmhhc1JlZ2lvbiAmJiAhc2xpZGUuZGF0YS5pc1N1bW1hcnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGRiID0gZGlhZ3JhbS5kb2N1bWVudEJvdW5kcztcclxuICAgICAgICAgICAgbGV0IHNiO1xyXG4gICAgICAgICAgICBpZiAoc2xpZGUuZGF0YS5pc1N1bW1hcnkpIHsgLy8gZm9yIGEgc3VtbWFyeSBzbGlkZSB3ZSBzaG9vdCB0aGUgd2hvbGUgbWFwXHJcbiAgICAgICAgICAgICAgICBzYiA9IHRoaXMuX21hcC5zYWZlUmVjdCh0aGlzLl9tYXAuY29tcHV0ZU1hcEJvdW5kcygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHsgLy8gb3RoZXJ3aXNlIGp1c3Qgc2hvb3QgdGhlIHNsaWRlIHJlZ2lvblxyXG4gICAgICAgICAgICAgICAgc2IgPSBzbGlkZS5wYXJ0LmFjdHVhbEJvdW5kcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGltYWdlUG9zaXRpb24gPSBuZXcgZ28uUG9pbnQoc2IueCwgc2IueSk7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2dldFNsaWRlVGh1bWJuYWlsLCBzbGlkZSBib3VuZHM6ICcgKyBzYiArICcsIGRvY3VtZW50IGJvdW5kczogJyArIGRiICsgJywgaW1hZ2VQb3NpdGlvbjogJyArIGltYWdlUG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgbGV0IHdTY2FsZSA9IHRodW1iV2lkdGggLyBzYi53aWR0aDtcclxuICAgICAgICAgICAgbGV0IGhTY2FsZSA9IHRodW1iSGVpZ2h0IC8gc2IuaGVpZ2h0O1xyXG4gICAgICAgICAgICBsZXQgdGh1bWJTY2FsZSA9IE1hdGgubWluKHdTY2FsZSwgaFNjYWxlKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NjYWxlOiAnICsgd1NjYWxlICsgJywnICsgaFNjYWxlKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB3ID0gdGh1bWJTY2FsZSAqIHNiLndpZHRoO1xyXG4gICAgICAgICAgICBsZXQgaCA9IHRodW1iU2NhbGUgKiBzYi5oZWlnaHQ7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3RodW1ibmFpbCB3L2g6ICcgKyB3ICsgJywnICsgaCk7XHJcblxyXG4gICAgICAgICAgICAvLyBoaWRlIHNsaWRlcyB0ZW1wb3JhcmlseSB3aGlsZSBjcmVhdGluZyB0aHVtYm5haWxcclxuICAgICAgICAgICAgdGhpcy5pc0NyZWF0aW5nVGh1bWJuYWlsID0gdHJ1ZTtcclxuICAgICAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG5cclxuICAgICAgICAgICAgZGlhZ3JhbS5zY2FsZSA9IHRodW1iU2NhbGU7XHJcblxyXG4gICAgICAgICAgICBsZXQgaW1nRGF0YSA9IGRpYWdyYW0ubWFrZUltYWdlRGF0YSh7XHJcbiAgICAgICAgICAgICAgICBzaXplOiBuZXcgZ28uU2l6ZSh3LCBoKSxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBpbWFnZVBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgc2NhbGU6IHRodW1iU2NhbGVcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmlzQ3JlYXRpbmdUaHVtYm5haWwgPSBmYWxzZTtcclxuICAgICAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50aHVtYm5haWxDYWNoZVtpbmRleF0gPSBpbWdEYXRhO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGltZ0RhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGdldHMgYSB0aHVtYm5haWwgb2YgdGhlIHdob2xlIG1hcCwgZm9yIHNhdmluZyAoc2VlIGF1dG9zYXZlLmpzKVxyXG4gICAgZ2V0TWFwVGh1bWJuYWlsKCkge1xyXG5cclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgbGV0IHNiID0gdGhpcy5fbWFwLnNhZmVSZWN0KHRoaXMuX21hcC5jb21wdXRlTWFwQm91bmRzKCkpO1xyXG4gICAgICAgIHNiLmdyb3coMTAsIDEwLCAxMCwgMTApO1xyXG4gICAgICAgIGxldCB3ID0gMTUwO1xyXG4gICAgICAgIGxldCBoID0gMTAwO1xyXG5cclxuICAgICAgICAvLyBoaWRlIHNsaWRlcyB0ZW1wb3JhcmlseSB3aGlsZSBjcmVhdGluZyB0aHVtYm5haWxcclxuICAgICAgICB0aGlzLmlzQ3JlYXRpbmdUaHVtYm5haWwgPSB0cnVlO1xyXG4gICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgbGV0IGltZ0RhdGEgPSBkaWFncmFtLm1ha2VJbWFnZURhdGEoe1xyXG4gICAgICAgICAgICBzY2FsZTogTWF0aC5taW4oaCAvIHNiLmhlaWdodCwgdyAvIHNiLndpZHRoKSxcclxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludChzYi54LCBzYi55KSxcclxuICAgICAgICAgICAgc2l6ZTogbmV3IGdvLlNpemUodywgaClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5pc0NyZWF0aW5nVGh1bWJuYWlsID0gZmFsc2U7XHJcbiAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG5cclxuICAgICAgICByZXR1cm4gaW1nRGF0YTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gY2FsbGVkIHZpYSBuZy1jbGljayBvbiB0aHVtYm5haWxcclxuICAgIHNsaWRlVGh1bWJuYWlsU2VsZWN0ZWQoaW5kZXgpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdzbGlkZVRodW1ibmFpbFNlbGVjdGVkOiAnICsgaW5kZXgpO1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBsZXQgc2xpZGUgPSB0aGlzLmZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpO1xyXG5cclxuXHJcbiAgICAgICAgLy8gTkI6IG9yZGVyIG9mIHN0YXRlbWVudHMgaXMgaW1wb3J0YW50IGhlcmUsIGFzIHNlbGVjdFNsaWRlIGNhbiB0cmlnZ2VyIGNoYW5nZWRTZWxlY3Rpb24gd2l0aCBhbiBlbXB0eSBzZWxlY3Rpb24gc29tZXRpbWVzLi4uID8/XHJcbiAgICAgICAgdGhpcy5zZWxlY3RTbGlkZShpbmRleCk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2xpZGVJbmRleCA9IGluZGV4O1xyXG4gICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTsgLy8gc2hvdy9oaWRlIHNsaWRlIG5vZGVzIC0gc2VlIHRlbXBsYXRlcy5qczogc2xpZGVUZW1wbGF0ZVxyXG5cclxuICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgdGhpcy56b29tVG9TbGlkZUluQ2VudGVyKHNsaWRlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJlc2VudGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93VE9DID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5lZWRzTmFycm93Q2FudmFzKCkge1xyXG4gICAgICAgIGxldCBzbGlkZSA9IHRoaXMuZmluZFNsaWRlQnlJbmRleCh0aGlzLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLnVpLmN1cnJlbnRUYWJJcyh0aGlzLl9tYXAudWkuVEFCX0lEX1BSRVNFTlRFUikgJiZcclxuICAgICAgICAgICBzbGlkZSAhPSBudWxsICYmXHJcbiAgICAgICAgICAgKHNsaWRlLmRhdGEudHlwZSA9PT0gJ1RJVExFX0JPRFlfTUFQJyB8fCBzbGlkZS5kYXRhLnR5cGUgPT09ICdBQ1RJVklUWV9NQVAnIHx8IHNsaWRlLmRhdGEudHlwZSA9PT0gJ01BUF9TVU1NQVJZJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0cyB0aGUgc2xpZGUgbm9kZSBhcyBzZWxlY3RlZCBpbiB0aGUgZGlhZ3JhbS5cclxuICAgIHNlbGVjdFNsaWRlKGluZGV4KSB7XHJcblxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NlbGVjdCBzbGlkZTogJyArIGluZGV4KTtcclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgIGlmIChpbmRleCkge1xyXG4gICAgICAgICAgICBsZXQgc2xpZGUgPSB0aGlzLmZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIHNsaWRlLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRPRE86IHNjcm9sbCB0byBzbGlkZT9cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcGxheVNsaWRlKGluZGV4KSB7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHRoaXMuX21hcC51aS5vcGVuVGFiKHRoaXMuX21hcC51aS5UQUJfSURfUFJFU0VOVEVSKTtcclxuXHJcbiAgICAgICAgbGV0IHNsaWRlcyA9IHRoaXMuZ2V0U2xpZGVOb2RlRGF0YXMoKTtcclxuICAgICAgICBpZiAoc2xpZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dUT0MgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5wcmVzZW50U2xpZGUoaW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBpbmNyZW1lbnQgaXMgLTEgb3IgKzFcclxuICAgIGFkdmFuY2VTbGlkZShpbmNyZW1lbnQpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdhZHZhbmNlU2xpZGUsIGN1cnJlbnRTbGlkZUluZGV4OiAnICsgdGhpcy5jdXJyZW50U2xpZGVJbmRleCk7XHJcblxyXG4gICAgICAgIGxldCBzbGlkZSA9IHRoaXMuZmluZFNsaWRlQnlJbmRleCh0aGlzLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2xpZGVJbmRleCArPSAoaW5jcmVtZW50KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmVzZW50aW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZXNlbnRTbGlkZSh0aGlzLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJlc2VudFNsaWRlKGluZGV4KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygncHJlc2VudFNsaWRlJyk7XHJcblxyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBsZXQgc2xpZGUgPSB0aGlzLmZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpO1xyXG4gICAgICAgIGlmICghc2xpZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgIC8vIE5COiBuZWVkIHRvIHNldCB0aGlzIGFmdGVyIGNsZWFyU2VsZWN0aW9uLCBhcyB0aGF0IHdpbGwgc2V0IGl0IHRvIG51bGwhIChzZWUgY2hhbmdlZFNlbGVjdGlvbilcclxuICAgICAgICB0aGlzLmN1cnJlbnRTbGlkZUluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgdGhpcy5fbWFwLnNldEVkaXRpbmdCbG9ja2VkKHRydWUpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3ByZXNlbnRTbGlkZSwgaW5kZXg6ICcgKyBpbmRleCArICcsIHNsaWRlOiAnICsgc2xpZGUgKyAnLCBjdXJyZW50U2xpZGVJbmRleDogJyArIHRoaXMuY3VycmVudFNsaWRlSW5kZXgpO1xyXG5cclxuICAgICAgICB0aGlzLm1heWJlSW5pdFNsaWRlQmxvY2tlcigpO1xyXG4gICAgICAgIGxldCBibG9ja2VyVyA9IFNMSURFX0JMT0NLRVJfV0lEVEg7XHJcblxyXG4gICAgICAgIGlmIChzbGlkZS5kYXRhLmhhc1JlZ2lvbikge1xyXG4gICAgICAgICAgICB0aGlzLnpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gc2hvdyBzbGlkZSBibG9ja2VyXHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVCbG9ja2VyLmRlc2lyZWRTaXplID0gbmV3IGdvLlNpemUoXHJcbiAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMud2lkdGggKyAyICogYmxvY2tlclcsXHJcbiAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgMiAqIGJsb2NrZXJXKTtcclxuICAgICAgICAgICAgdGhpcy5zbGlkZUJsb2NrZXIubG9jYXRpb24gPSBuZXcgZ28uUG9pbnQoXHJcbiAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMueCAtIGJsb2NrZXJXLFxyXG4gICAgICAgICAgICAgICAgc2xpZGUuYWN0dWFsQm91bmRzLnkgLSBibG9ja2VyVyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVCbG9ja2VyLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdzbGlkZUJsb2NrZXI6ICcgKyB0aGlzLnNsaWRlQmxvY2tlci5hY3R1YWxCb3VuZHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzbGlkZS5kYXRhLmlzU3VtbWFyeSkge1xyXG4gICAgICAgICAgICB0aGlzLnpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpO1xyXG4gICAgICAgICAgICB0aGlzLnNsaWRlQmxvY2tlci52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9tYXAudWkucmVzZXRab29tKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVCbG9ja2VyLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaXNQcmVzZW50aW5nID0gdHJ1ZTtcclxuICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3ByZXNlbnRlci1wbGF5aW5nJyk7XHJcblxyXG4gICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTsgLy8gaGlkZSBzbGlkZSBub2RlcyAtIHNlZSB0ZW1wbGF0ZXMuanM6IHNsaWRlVGVtcGxhdGVcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gem9vbSB0aGUgZGlhZ3JhbSB0byBzaG93IHRoZSBnaXZlbiBzbGlkZSBpbiB0aGUgY2VudGVyIG9mIHRoZSBjYW52YXNcclxuICAgIHpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpIHtcclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBoYWxmV2lkdGggPSAoc2xpZGUuZGF0YS50eXBlICE9PSAnTUFQX09OTFknKTtcclxuICAgICAgICAgICAgbGV0IHpvb21SZWN0ID0gdGhpcy5nZXRMZXR0ZXJib3hlZFJlY3Qoc2xpZGUuYWN0dWFsQm91bmRzLCBoYWxmV2lkdGgpO1xyXG4gICAgICAgICAgICB6b29tUmVjdC5pbmZsYXRlKHpvb21SZWN0LndpZHRoIC8gMTAsIHpvb21SZWN0LmhlaWdodCAvIDEwKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS56b29tVG9SZWN0KHpvb21SZWN0LCBnby5EaWFncmFtLlVuaWZvcm0pO1xyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJucyBhIHJlY3RhbmdsZSBjb250YWluaW5nIHRoZSBnaXZlbiByZWN0LCBidXQgd2l0aCBhcHByb3ByaWF0ZSB3aWR0aCBvciBoZWlnaHQgYWRkZWRcclxuICAgIC8vIHRvIGdpdmUgaXQgc2FtZSBhc3BlY3QgcmF0aW8gYXMgdGhlIGRpYWdyYW0uXHJcbiAgICBnZXRMZXR0ZXJib3hlZFJlY3QocmVjdCwgaGFsZldpZHRoKSB7XHJcblxyXG4gICAgICAgIC8vIE5COiB3ZSBjYWxjdWxhdGUgdGhlIGFzcGVjdCByYXRpbyB3aGVuIHRoZSB0YWIgaXMgb3BlbmVkLCBcclxuICAgICAgICAvLyByYXRoZXIgdGhhbiBlYWNoIHRpbWUgYXMgdGhlIGRpYWdyYW0gc2l6ZSBtaWdodCBiZSBjaGFuZ2luZy4uLlxyXG4gICAgICAgIGxldCBkYXIgPSAoaGFsZldpZHRoID8gdGhpcy5kaWFncmFtQXNwZWN0UmF0aW8gLyAyIDogdGhpcy5kaWFncmFtQXNwZWN0UmF0aW8pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdyZWN0OiAnICsgcmVjdCArICcsIGRhcjogJyArIGRhcik7XHJcblxyXG4gICAgICAgIGxldCByZWN0QXNwZWN0UmF0aW8gPSByZWN0LndpZHRoIC8gcmVjdC5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmIChkYXIgPiByZWN0QXNwZWN0UmF0aW8pIHtcclxuICAgICAgICAgICAgLy8gdGFsbCBza2lubnkgcmVjdCwgc2hvcnQgd2lkZSB0YXJnZXQgQVIsIHNvIGFkZCBzaWRlIHBhZGRpbmcgdG8gdGhlIHJlY3RcclxuICAgICAgICAgICAgbGV0IGxidyA9IHJlY3QuaGVpZ2h0ICogZGFyOyAvLyBiZWNhdXNlIGxidyAvIGxiaCA9PSBkYXIgPT0gbGJ3IC8gcmVjdC5oZWlnaHQgKGxiaCA9PSByZWN0LmhlaWdodClcclxuICAgICAgICAgICAgcmV0dXJuIHJlY3QuY29weSgpLmluZmxhdGUoKGxidyAtIHJlY3Qud2lkdGgpIC8gMiwgMCk7IC8vIGFkZCBoYWxmIHRoZSB3aWR0aCBkaWZmZXJlbmNlIHRvIGVhY2ggc2lkZSBvZiB0aGUgcmVjdFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gc2hvcnQgd2lkZSByZWN0LCB0YWxsIHNraW5ueSB0YXJnZXQgQVIsIHNvIGFkZCB0b3AvYm90dG9tIHBhZGRpbmcgdG8gdGhlIHJlY3RcclxuICAgICAgICAgICAgbGV0IGxiaCA9IHJlY3Qud2lkdGggLyBkYXI7IC8vIGJlY2F1c2UgbGJ3IC8gbGJoID09IGRhciA9PSBsYmggLyByZWN0LndpZHRoIChsYncgPT0gcmVjdC53aWR0aClcclxuICAgICAgICAgICAgcmV0dXJuIHJlY3QuY29weSgpLmluZmxhdGUoMCwgKGxiaCAtIHJlY3QuaGVpZ2h0KSAvIDIpOyAgLy8gYWRkIGhhbGYgdGhlIGhlaWdodCBkaWZmZXJlbmNlIHRvIHRvcC9ib3R0b20gb2YgdGhlIHJlY3RcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RvcFByZXNlbnRpbmcoKSB7XHJcblxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3N0b3BQcmVzZW50aW5nLCBjdXJyZW50U2xpZGVJbmRleDogJyArIHRoaXMuY3VycmVudFNsaWRlSW5kZXgpO1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2xpZGVCbG9ja2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVCbG9ja2VyLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vdGhpcy5jdXJyZW50U2xpZGVJbmRleCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc1ByZXNlbnRpbmcgPSBmYWxzZTtcclxuICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3ByZXNlbnRlci1wbGF5aW5nJyk7XHJcblxyXG4gICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTsgLy8gc2hvdyBzbGlkZSBub2Rlc1xyXG5cclxuICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5fbWFwLnNldEVkaXRpbmdCbG9ja2VkKGZhbHNlKTtcclxuICAgICAgICAvL3RoaXMuX21hcC51aS5yZXNldFpvb20oKTtcclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFByZXNlbnRlcjtcclxuIiwiY29uc3QgZ28gPSB3aW5kb3cuZ287XHJcbmNvbnN0IFNsaWRlVGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9TbGlkZVRlbXBsYXRlLmpzJyk7XHJcbmNvbnN0IEdyb3VwVGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9Hcm91cFRlbXBsYXRlLmpzJyk7XHJcbmNvbnN0IExpbmtUZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL0xpbmtUZW1wbGF0ZS5qcycpO1xyXG5jb25zdCBQTGlua1RlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvUExpbmtUZW1wbGF0ZS5qcycpO1xyXG5jb25zdCBkTGlua1RlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvZExpbmtUZW1wbGF0ZS5qcycpO1xyXG5cclxuLy8gY29udmVuaWVudCBhYmJyZXZpYXRpb24gZm9yIGNyZWF0aW5nIHRlbXBsYXRlc1xyXG5jb25zdCBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcblxyXG5cclxuY29uc3QgY29sb3JSID0gXCIjNGNiZmMyXCI7XHJcbmNvbnN0IGNvbG9yUCA9IFwiI2ZiYWEzNlwiO1xyXG5cclxuLy8gZm9vdGVyIGZvciBpbWFnZSBleHBvcnRcclxubGV0IF9leHBvcnRGb290ZXIgPSBudWxsO1xyXG5cclxuLy8gZ29KUyB0ZW1wbGF0ZXMgdXNlZCBpbiB0aGUgZWRpdG9yXHJcbmNsYXNzIFRlbXBsYXRlcyB7XHJcbiAgICBjb25zdHJ1Y3RvcihlZGl0b3IsIG1hcCkge1xyXG4gICAgICAgIHRoaXMuX2VkaXRvciA9IGVkaXRvcjtcclxuICAgICAgICB0aGlzLl9tYXAgPSBtYXA7XHJcblxyXG4gICAgICAgIHRoaXMuc2xpZGVUZW1wbGF0ZSA9IG5ldyBTbGlkZVRlbXBsYXRlKG1hcCk7XHJcbiAgICAgICAgdGhpcy5ncm91cFRlbXBsYXRlID0gbmV3IEdyb3VwVGVtcGxhdGUobWFwKTtcclxuICAgICAgICB0aGlzLmxpbmtUZW1wbGF0ZSA9IG5ldyBMaW5rVGVtcGxhdGUobWFwKTtcclxuICAgICAgICB0aGlzLnBMaW5rVGVtcGxhdGUgPSBuZXcgUExpbmtUZW1wbGF0ZShtYXApO1xyXG4gICAgICAgIHRoaXMuZExpbmtUZW1wbGF0ZSA9IGRMaW5rVGVtcGxhdGUobWFwKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0VGVtcGxhdGVzKGRpYWdyYW0pIHtcclxuICAgICAgICBkaWFncmFtLmdyb3VwVGVtcGxhdGUgPSB0aGlzLmdyb3VwVGVtcGxhdGUuaW5pdCgpO1xyXG4gICAgICAgIGRpYWdyYW0ubm9kZVRlbXBsYXRlID0gdGhpcy5zbGlkZVRlbXBsYXRlLmluaXQoKTtcclxuICAgICAgICBkaWFncmFtLmxpbmtUZW1wbGF0ZSA9IHRoaXMubGlua1RlbXBsYXRlLmluaXQoKTtcclxuICAgICAgICBkaWFncmFtLmxpbmtUZW1wbGF0ZU1hcC5hZGQoJ1AnLCB0aGlzLnBMaW5rVGVtcGxhdGUpO1xyXG4gICAgICAgIGRpYWdyYW0ubGlua1RlbXBsYXRlTWFwLmFkZCgnRCcsIHRoaXMuZExpbmtUZW1wbGF0ZSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VGVtcG9yYXJ5TGlua1RlbXBsYXRlcyhkaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sKTtcclxuICAgICAgICB0aGlzLnNldFRlbXBvcmFyeUxpbmtUZW1wbGF0ZXMoZGlhZ3JhbS50b29sTWFuYWdlci5yZWxpbmtpbmdUb29sKTtcclxuXHJcbiAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5saW5raW5nVG9vbC5wb3J0VGFyZ2V0ZWQgPSAocmVhbG5vZGUsIHJlYWxwb3J0LCB0ZW1wbm9kZSwgdGVtcHBvcnQsIHRvZW5kKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUG9ydFRhcmdldGVkKGRpYWdyYW0udG9vbE1hbmFnZXIubGlua2luZ1Rvb2wsIHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5yZWxpbmtpbmdUb29sLnBvcnRUYXJnZXRlZCA9IChyZWFsbm9kZSwgcmVhbHBvcnQsIHRlbXBub2RlLCB0ZW1wcG9ydCwgdG9lbmQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVQb3J0VGFyZ2V0ZWQoZGlhZ3JhbS50b29sTWFuYWdlci5yZWxpbmtpbmdUb29sLCByZWFsbm9kZSwgcmVhbHBvcnQsIHRlbXBub2RlLCB0ZW1wcG9ydCwgdG9lbmQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbC51cGRhdGVBZG9ybm1lbnRzID0gKHBhcnQpID0+IHtcclxuICAgICAgICAgICAgZ28uUmVsaW5raW5nVG9vbC5wcm90b3R5cGUudXBkYXRlQWRvcm5tZW50cy5jYWxsKHRoaXMsIHBhcnQpO1xyXG4gICAgICAgICAgICBsZXQgZnJvbSA9IHBhcnQuZmluZEFkb3JubWVudCgnUmVsaW5rRnJvbScpO1xyXG4gICAgICAgICAgICBsZXQgdG8gPSBwYXJ0LmZpbmRBZG9ybm1lbnQoJ1JlbGlua1RvJyk7XHJcbiAgICAgICAgICAgIC8vIGlmIChmcm9tKVxyXG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ3JlbGlua2Zyb206ICcgKyBmcm9tLnBhcnQud2lkdGgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIubGlua2luZ1Rvb2wubGlua1ZhbGlkYXRpb24gPSB0aGlzLnZhbGlkYXRlTGluaztcclxuICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLnJlbGlua2luZ1Rvb2wubGlua1ZhbGlkYXRpb24gPSB0aGlzLnZhbGlkYXRlTGluaztcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSB0ZW1wb3JhcnkgbGluay9ub2RlIHRlbXBsYXRlcywgZm9yIHVzZSB3aGVuIGRyYWdnaW5nIHRvIGNyZWF0ZSBSL1AgbGluZXMgLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGRlZmluZSBpbml0aWFsIHRlbXBvcmFyeSBsaW5rIHRlbXBsYXRlcyAtIHRoZXNlIHdpbGwgYmUgbW9kaWZpZWQgd2hlbiBoYW5kbGVQb3J0VGFyZ2V0ZWQgaXMgY2FsbGVkXHJcbiAgICBzZXRUZW1wb3JhcnlMaW5rVGVtcGxhdGVzKHRvb2wpIHtcclxuICAgICAgICB0b29sLnRlbXBvcmFyeUxpbmsgPSB0aGlzLm1ha2VUZW1wb3JhcnlMaW5rVGVtcGxhdGUoKTtcclxuICAgICAgICB0b29sLnRlbXBvcmFyeUZyb21Ob2RlID0gdGhpcy5tYWtlVGVtcG9yYXJ5Tm9kZVRlbXBsYXRlKCk7XHJcbiAgICAgICAgdG9vbC50ZW1wb3JhcnlUb05vZGUgPSB0aGlzLm1ha2VUZW1wb3JhcnlOb2RlVGVtcGxhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBtYWtlVGVtcG9yYXJ5TGlua1RlbXBsYXRlKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5MaW5rLCB7XHJcbiAgICAgICAgICAgIGxheWVyTmFtZTogXCJUb29sXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2xpbmtzaGFwZScsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZVRlbXBvcmFyeU5vZGVUZW1wbGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uR3JvdXAsIHtcclxuICAgICAgICAgICAgbGF5ZXJOYW1lOiBcIlRvb2xcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIkJvcmRlclwiLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnYm9yZGVyJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAzLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogbnVsbFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2hhbmdlIGNvbG9yIGFuZCBwb3J0SWQgb2YgdGVtcG9yYXJ5IGxpbmsgdGVtcGxhdGVzIGJhc2VkIG9uIHRoZSB0eXBlIG9mIGxpbmsgYmVpbmcgY3JlYXRlZC9yZWxpbmtlZFxyXG4gICAgaGFuZGxlUG9ydFRhcmdldGVkKHRvb2wsIHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdwb3J0VGFyZ2V0ZWQsIHJlYWxwb3J0OiAnICsgKHJlYWxwb3J0ID8gcmVhbHBvcnQubmFtZSA6ICcnKSArICcsIHRlbXBwb3J0OiAnICsgKHRlbXBwb3J0ID8gdGVtcHBvcnQubmFtZSA6ICcnKSBcclxuICAgICAgICAvLyAgICAgKyAnLCBvcmlnaW5hbEZyb21Qb3J0OiAnICsgKGx0b29sLm9yaWdpbmFsRnJvbVBvcnQgPyBsdG9vbC5vcmlnaW5hbEZyb21Qb3J0Lm5hbWUgOiAnJykgKyAnLCBvcmlnaW5hbFRvUG9ydDogJyArIGx0b29sLm9yaWdpbmFsVG9Qb3J0KTtcclxuXHJcbiAgICAgICAgbGV0IGxpbmtTaGFwZSA9IHRvb2wudGVtcG9yYXJ5TGluay5maW5kT2JqZWN0KCdsaW5rc2hhcGUnKTtcclxuICAgICAgICBsZXQgZnJvbUJvcmRlciA9IHRvb2wudGVtcG9yYXJ5RnJvbU5vZGUuZmluZE9iamVjdCgnYm9yZGVyJyk7XHJcbiAgICAgICAgbGV0IHRvQm9yZGVyID0gdG9vbC50ZW1wb3JhcnlUb05vZGUuZmluZE9iamVjdCgnYm9yZGVyJyk7XHJcblxyXG4gICAgICAgIGlmICh0b29sLm9yaWdpbmFsRnJvbVBvcnQgJiYgdG9vbC5vcmlnaW5hbEZyb21Qb3J0Lm5hbWUgPT09ICdjb3JuZXJQU2hhcGUnKSB7XHJcbiAgICAgICAgICAgIGxpbmtTaGFwZS5zdHJva2UgPSBjb2xvclA7XHJcbiAgICAgICAgICAgIGZyb21Cb3JkZXIuc3Ryb2tlID0gY29sb3JQO1xyXG4gICAgICAgICAgICB0b0JvcmRlci5zdHJva2UgPSBjb2xvclA7XHJcbiAgICAgICAgICAgIGZyb21Cb3JkZXIucG9ydElkID0gJ1AnO1xyXG4gICAgICAgICAgICB0b0JvcmRlci5wb3J0SWQgPSAnUCc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0b29sLm9yaWdpbmFsRnJvbVBvcnQgJiYgdG9vbC5vcmlnaW5hbEZyb21Qb3J0Lm5hbWUgPT09ICdjb3JuZXJSU2hhcGUnKSB7XHJcbiAgICAgICAgICAgIGxpbmtTaGFwZS5zdHJva2UgPSBjb2xvclI7XHJcbiAgICAgICAgICAgIGZyb21Cb3JkZXIuc3Ryb2tlID0gY29sb3JSO1xyXG4gICAgICAgICAgICB0b0JvcmRlci5zdHJva2UgPSBjb2xvclI7XHJcbiAgICAgICAgICAgIGZyb21Cb3JkZXIucG9ydElkID0gJ1InO1xyXG4gICAgICAgICAgICB0b0JvcmRlci5wb3J0SWQgPSAnUic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRlbXBub2RlLnNjYWxlID0gdGhpcy5fbWFwLmxheW91dHMuZ2V0U2NhbGUocmVhbG5vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHByZXZlbnQgZHVwbGljYXRlICdQJyBsaW5rcyBpbiB0aGUgc2FtZSBkaXJlY3Rpb24gYmV0d2VlbiB0aGUgc2FtZSB0d28gdGhpbmdzXHJcbiAgICB2YWxpZGF0ZUxpbmsoZnJvbU5vZGUsIGZyb21Qb3J0LCB0b05vZGUsIHRvUG9ydCkge1xyXG4gICAgICAgIC8vIHRoZSBQIHBvcnQgaXMgb24gdG9wIG9mIHRoZSBSIHBvcnQsIHNvIGJvdGggUCBhbmQgUiBsaW5rcyBnZXQgdGhlIHRvUG9ydCBzZXQgdG8gUiBieSBkZWZhdWx0LlxyXG4gICAgICAgIGlmIChmcm9tUG9ydC5wb3J0SWQgPT09ICdQJykge1xyXG4gICAgICAgICAgICAvLyBOQjogZmluZExpbmtzVG8gd291bGQgYmUgc2ltcGxlciwgYnV0IGl0IGRvZXNuJ3Qgc2VlbSB0byB3b3JrLi4uICg/KVxyXG4gICAgICAgICAgICBsZXQgcExpbmtzID0gdG9Ob2RlLmZpbmRMaW5rc0JldHdlZW4oZnJvbU5vZGUsICdQJywgJ1AnKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndmFsaWRhdGVMaW5rLCBwTGlua3MgZnJvbSAnICsgZnJvbU5vZGUgKyAnOicgKyBmcm9tUG9ydCArICcgdG8gJyArIHRvTm9kZSArICc6JyArIHRvUG9ydCArICcgPSAnICsgcExpbmtzLmNvdW50KTtcclxuICAgICAgICAgICAgaWYgKHBMaW5rcy5jb3VudCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHBMaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcExpbmsgPSBwTGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBMaW5rLmZyb21Ob2RlID09PSBmcm9tTm9kZSAmJiBwTGluay50b05vZGUgPT09IHRvTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gZXhwb3J0IGZvb3RlciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gTkI6IHRoaXMgaXMgbm90IGEgdGVtcGxhdGUgcGVyIHNlLCBpbiB0aGF0IGl0IGlzIGFkZGVkIHRvIHRoZSBkaWFncmFtIFxyXG4gICAgLy8gc3RhdGljYWxseSwgcmF0aGVyIHRoYW4gYmVpbmcgYm91bmQgdG8gc29tZXRoaW5nIGluIHRoZSBtb2RlbC5cclxuICAgIC8vIEJ1dCB3ZSBwdXQgaXQgaGVyZSBiZWNhdXNlIGl0IGlzIGFib3V0IGNyZWF0aW5nIHBhcnRzIGFuZCBzdHVmZi5cclxuXHJcbiAgICBjcmVhdGVFeHBvcnRGb290ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLk5vZGUsIGdvLlBhbmVsLlNwb3QsIHtcclxuICAgICAgICAgICAgbGF5ZXJOYW1lOiAnRm9yZWdyb3VuZCcsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgIHNjYWxlOiAxLFxyXG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICAgICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHNlbGVjdGFibGU6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiUmVjdGFuZ2xlXCIsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwicmVjdGFuZ2xlXCIsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDYwLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uUGljdHVyZSwge1xyXG4gICAgICAgICAgICAgICAgc291cmNlOiAnYXNzZXRzL2ltZy9tZXRhbWFwLWxvZ28tNTAucG5nJyxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Ub3BMZWZ0LFxyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50Rm9jdXM6IGdvLlNwb3QuVG9wTGVmdCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxOTUsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDUwXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwibWV0YW1hcC5jYWJyZXJhcmVzZWFyY2gub3JnXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuQm90dG9tTGVmdCxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LkJvdHRvbUxlZnQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMjAwXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwibWFwVGl0bGVcIixcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Ub3BSaWdodCxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LlRvcFJpZ2h0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDMwMFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImF1dGhvck5hbWVcIixcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Cb3R0b21SaWdodCxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LkJvdHRvbVJpZ2h0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDMwMFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY3JlYXRlcyBvciByZWZyZXNoZXMgdGhlIGZvb3RlciBsb2dvL3RleHQgdGhhdCBpcyBkaXNwbGF5ZWQgaW4gdGhlIGltYWdlIGV4cG9ydFxyXG4gICAgYWRkRXhwb3J0Rm9vdGVyKCkge1xyXG4gICAgICAgIGlmICghX2V4cG9ydEZvb3Rlcikge1xyXG4gICAgICAgICAgICBfZXhwb3J0Rm9vdGVyID0gdGhpcy5jcmVhdGVFeHBvcnRGb290ZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5hZGQoX2V4cG9ydEZvb3Rlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3dFeHBvcnRGb290ZXIoKSB7XHJcbiAgICAgICAgbGV0IHJlY3QgPSB0aGlzLl9tYXAuY29tcHV0ZU1hcEJvdW5kcygpO1xyXG4gICAgICAgIC8vIHB1dCBmb290ZXIgYXQgbGVhc3QgMTAwIHB4IGJlbG93IGJvdHRvbSBvZiBtYXA7IG1ha2UgaXQgYXQgbGVhc3QgNTAwcHggd2lkZVxyXG4gICAgICAgIGxldCB4ID0gcmVjdC54O1xyXG4gICAgICAgIGxldCB5ID0gcmVjdC55ICsgcmVjdC5oZWlnaHQgKyBNYXRoLm1heCgxMDAsIHJlY3QuaGVpZ2h0IC8gNSk7XHJcbiAgICAgICAgbGV0IHcgPSBNYXRoLm1heCg1MDAsIHJlY3Qud2lkdGgpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3Nob3dFeHBvcnRGb290ZXIsIGJvdW5kcyByZWN0OiAnICsgcmVjdCArICcsIHc6ICcgKyB3KTtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLmxvY2F0aW9uID0gbmV3IGdvLlBvaW50KHgsIHkpO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIuZmluZE9iamVjdChcInJlY3RhbmdsZVwiKS53aWR0aCA9IHc7XHJcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5maW5kT2JqZWN0KFwibWFwVGl0bGVcIikudGV4dCA9IFwiTWFwIFRpdGxlOiBcIiArIHRoaXMuX2VkaXRvci5tYXBUaXRsZTtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLmZpbmRPYmplY3QoXCJhdXRob3JOYW1lXCIpLnRleHQgPSBcIkF1dGhvcjogXCIgKyB0aGlzLl9lZGl0b3IudXNlck5hbWU7XHJcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5vcGFjaXR5ID0gMTtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLmludmFsaWRhdGVMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlRXhwb3J0Rm9vdGVyKCkge1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIub3BhY2l0eSA9IDA7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVGVtcGxhdGVzOyIsImxldCBUQUJTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL3RhYnMuanMnKTtcclxubGV0IGdvID0gd2luZG93LmdvO1xyXG5cclxuY2xhc3MgVUkge1xyXG4gICAgY29uc3RydWN0b3IoZWRpdG9yLCBtYXApIHtcclxuICAgICAgICB0aGlzLm1hcCA9IG1hcDtcclxuICAgICAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcclxuXHJcbiAgICAgICAgdGhpcy56b29taW5nVG9SZWdpb24gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5tb3VzZU92ZXJHcm91cCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tb3VzZU92ZXJMaW5rID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5kcmFnVGFyZ2V0R3JvdXAgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZHJhZ1RhcmdldFBvc2l0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5oZWxwVGlwID0gbnVsbDtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge307XHJcblxyXG4gICAgICAgIHRoaXMuX2Nvcm5lckNsaWNrZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2Nvcm5lckZ1bmN0aW9uID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9jb3JuZXJUaW1lb3V0ID0gMzAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIGhhbmRsZSBib3R0b20gdGFicyAoJ3NsaWRlcnMnKSAtLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gaW4gdGhlIGZvbGxvd2luZyBmdW5jdGlvbnMsIElEIGlzIGUuZy4gJ2hpc3RvcnktdGFiJyAoSUQgb2Ygb25lIG9mIHRoZSAuYm90dG9tLXRhYidzKVxyXG5cclxuICAgIC8vIHRoaXMgaXMgY2FsbGVkIGJ5IG1hcC5jdXJyZW50VGFiQ2hhbmdlZCwgd2hpY2ggaXMgdHJpZ2dlcmVkIGJ5IGEgdGhpcy4kd2F0Y2hcclxuICAgIGN1cnJlbnRUYWJDaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3VpLCBjdXJyZW50VGFiQ2hhbmdlZDogJyArIG5ld1ZhbHVlKTtcclxuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRUYWIgPSBuZXdWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBjdXJyZW50VGFiSXModGFiSUQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VGFiID09PSB0YWJJRDtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuVGFiKHRhYklEKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGFiID0gdGFiSUQ7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VUYWIodGFiSUQpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRUYWIgPSBudWxsOyAvLyBUT0RPOiB0cmlnZ2VyIGF1dG9zYXZlXHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGFiID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBkaXNhYmxlVGFiKHRhYklEKSB7XHJcbiAgICAgICAgLy8gcHJldmVudCBvcGVuaW5nIG90aGVyIHRhYnMgd2hlbiBpbiBQIG9yIEQgZWRpdG9yXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFRhYiA9PT0gVEFCUy5UQUJfSURfUEVSU1BFQ1RJVkVTIHx8IHRoaXMuY3VycmVudFRhYiA9PT0gVEFCUy5UQUJfSURfRElTVElOQ1RJT05TKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlVGFiKHRhYklEKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFRhYiA9PT0gdGFiSUQpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VGFiID0gbnVsbDtcclxuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmRpc2FibGVUYWIodGFiSUQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRhYiA9IHRhYklEO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVOYXZpZ2F0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5zaG93TmF2aWdhdG9yID0gIXRoaXMuc3RhdGUuc2hvd05hdmlnYXRvcjtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVab29taW5nVG9SZWdpb24oKSB7XHJcbiAgICAgICAgdGhpcy56b29taW5nVG9SZWdpb24gPSAhdGhpcy56b29taW5nVG9SZWdpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3RhdGVEYXRhKCkge1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHNldFN0YXRlRGF0YSgpIHtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLSB6b29taW5nIGZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBjYW5ab29tSW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmdldERpYWdyYW0oKS5zY2FsZSA8IDMyO1xyXG4gICAgfVxyXG5cclxuICAgIGNhblpvb21PdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmdldERpYWdyYW0oKS5zY2FsZSA+IDAuMjU7XHJcbiAgICB9XHJcblxyXG4gICAgem9vbUluKCkge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGlmIChkaWFncmFtLnNjYWxlIDwgMzIpIHtcclxuICAgICAgICAgICAgbGV0IHZiID0gZGlhZ3JhbS52aWV3cG9ydEJvdW5kcy5jb3B5KCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSBkaWFncmFtLnNjYWxlICogMjtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jZW50ZXJSZWN0KHZiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgem9vbU91dCgpIHtcclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMubWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoZGlhZ3JhbS5zY2FsZSA+IDAuMjUpIHtcclxuICAgICAgICAgICAgbGV0IHZiID0gZGlhZ3JhbS52aWV3cG9ydEJvdW5kcy5jb3B5KCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSBkaWFncmFtLnNjYWxlIC8gMjtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jZW50ZXJSZWN0KHZiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbWF5YmVab29tVG9SZWdpb24oKSB7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLm1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgLy8gdGhpcyBmbGFnIGlzIHNldCBieSB0aGUgdG9vbGJhciBidXR0b25cclxuICAgICAgICBpZiAodGhpcy56b29taW5nVG9SZWdpb24pIHtcclxuICAgICAgICAgICAgdGhpcy56b29taW5nVG9SZWdpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3pvb21Ub1JlZ2lvbiwgc2VsZWN0aW9uIGNvdW50OiAnICsgZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQpO1xyXG4gICAgICAgICAgICBsZXQgcmVjdCA9IGRpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKGRpYWdyYW0uc2VsZWN0aW9uKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS56b29tVG9SZWN0KHJlY3QpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXNldFpvb20oKSB7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLm1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgLy9sZXQgcmVjdCA9IGRpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKGRpYWdyYW0ubm9kZXMpLmNvcHkoKTtcclxuICAgICAgICBsZXQgcmVjdCA9IHRoaXMubWFwLnNhZmVSZWN0KHRoaXMubWFwLmNvbXB1dGVNYXBCb3VuZHMoKSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygncmVzZXRab29tLCBib3VuZHM6ICcgKyByZWN0KTtcclxuICAgICAgICBpZiAocmVjdC53aWR0aCkge1xyXG4gICAgICAgICAgICByZWN0LmluZmxhdGUocmVjdC53aWR0aCAvIDUsIHJlY3QuaGVpZ2h0IC8gNSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpYWdyYW0uem9vbVRvUmVjdChyZWN0KTtcclxuICAgICAgICBkaWFncmFtLmFsaWduRG9jdW1lbnQoZ28uU3BvdC5DZW50ZXIsIGdvLlNwb3QuQ2VudGVyKTtcclxuICAgICAgICBpZiAoZGlhZ3JhbS5zY2FsZSA+IDEpIHtcclxuICAgICAgICAgICAgZGlhZ3JhbS5zY2FsZSA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSB0aGluZyBvcHRpb25zIChsYXlvdXQpIC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBnZXRTZWxlY3RlZFRoaW5nc09yRGVmYXVsdExheW91dCAoKSB7XHJcbiAgICAgICAgbGV0IHNsID0gdGhpcy5nZXRTZWxlY3RlZFRoaW5nc0xheW91dCgpO1xyXG4gICAgICAgIGlmIChzbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2w7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hcEVkaXRvck9wdGlvbnMuZGVmYXVsdFRoaW5nTGF5b3V0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIGEgbm9uLW51bGwgdmFsdWUgb25seSBpZiBhbGwgc2VsZWN0ZWQgaXRlbXMgYXJlIGdyb3VwcyB3aXRoIHRoZSBzYW1lIGxheW91dFxyXG4gICAgZ2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQgKCkge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGlmICghZGlhZ3JhbSB8fCBkaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICBsZXQgbGF5b3V0ID0gbnVsbDtcclxuICAgICAgICBsZXQgaXQgPSBkaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cClcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBsZXQgZ3JvdXAgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQsIGl0LnZhbHVlOiAnICsgZ3JvdXApO1xyXG4gICAgICAgICAgICBsZXQgZ3JvdXBMYXlvdXQgPSAoZ3JvdXAuZGF0YSA/IGdyb3VwLmRhdGEubGF5b3V0IDogbnVsbCk7XHJcbiAgICAgICAgICAgIGlmIChsYXlvdXQgIT09IG51bGwgJiYgZ3JvdXBMYXlvdXQgIT09IGxheW91dClcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBsYXlvdXQgPSBncm91cExheW91dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQ6ICcgKyBsYXlvdXQpO1xyXG5cclxuICAgICAgICByZXR1cm4gbGF5b3V0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldHMgdGhlIGxheW91dCBvZiBhbGwgc2VsZWN0ZWQgdGhpbmdzIHRvIHRoZSBnaXZlbiBsYXlvdXRcclxuICAgIHNldFNlbGVjdGVkVGhpbmdzTGF5b3V0IChsYXlvdXROYW1lKSB7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLm1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgbGV0IGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbGF5b3V0JywgbGF5b3V0TmFtZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcC5sYXlvdXRzLnNldERlc2NlbmRhbnRMYXlvdXRzKGdyb3VwLCBncm91cC5kYXRhLmxheW91dCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHJlbGF0aW9uc2hpcCBvcHRpb25zIChkaXJlY3Rpb24pIC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBnZXRTZWxlY3RlZFJlbGF0aW9uc2hpcHNPckRlZmF1bHREaXJlY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCBzZCA9IHRoaXMuZ2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzRGlyZWN0aW9uKCk7XHJcbiAgICAgICAgaWYgKHNkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFwRWRpdG9yT3B0aW9ucy5kZWZhdWx0UmVsYXRpb25zaGlwRGlyZWN0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIGEgbm9uLW51bGwgdmFsdWUgb25seSBpZiBhbGwgc2VsZWN0ZWQgaXRlbXMgYXJlIHJlbGF0aW9uc2hpcHMgd2l0aCB0aGUgc2FtZSBkaXJlY3Rpb25cclxuICAgIGdldFNlbGVjdGVkUmVsYXRpb25zaGlwc0RpcmVjdGlvbigpIHtcclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMubWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoIWRpYWdyYW0gfHwgZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgbGV0IHR5cGUgPSBudWxsO1xyXG4gICAgICAgIGxldCBpdCA9IGRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCFpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkxpbmspXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgbGV0IGxpbmsgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgbGV0IGxpbmtUeXBlID0gKGxpbmsuZGF0YSA/IGxpbmsuZGF0YS50eXBlIDogbnVsbCk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlICE9PSBudWxsICYmIGxpbmtUeXBlICE9PSB0eXBlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHR5cGUgPSBsaW5rVHlwZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0eXBlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldHMgdGhlIGRpcmVjdGlvbiBvZiBhbGwgc2VsZWN0ZWQgcmVsYXRpb25zaGlwcyB0byB0aGUgZ2l2ZW4gZGlyZWN0aW9uXHJcbiAgICBzZXRTZWxlY3RlZFJlbGF0aW9uc2hpcHNEaXJlY3Rpb24gKGRpcmVjdGlvbikge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIC8vZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKCdjaGFuZ2UgcmVsYXRpb25zaGlwIGRpcmVjdGlvbicpO1xyXG4gICAgICAgIGxldCBpdCA9IGRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uTGluaykge1xyXG4gICAgICAgICAgICAgICAgLy9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ2NoYW5nZSBsaW5rIHR5cGUnKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGl0LnZhbHVlLmRhdGEsICd0eXBlJywgZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIC8vZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbignY2hhbmdlIGxpbmsgdHlwZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbignY2hhbmdlIHJlbGF0aW9uc2hpcCBkaXJlY3Rpb24nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tIGhhbmRsZSBjb3JuZXIgY2xpY2tzIGFuZCBkb3VibGUgY2xpY2tzIC0tLS0tLS0tXHJcbiAgICBoYW5kbGVDb3JuZXJDbGljayAoY29ybmVyLCB0aGluZykge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2hhbmRsZUNvcm5lckNsaWNrOiBjb3JuZXIgPSAnICsgY29ybmVyICsgJywgY29ybmVyQ2xpY2tlZCA9ICcgKyBfY29ybmVyQ2xpY2tlZCk7XHJcbiAgICAgICAgLy8gYXNzdW1lIGl0J3MgYSBzaW5nbGUgY2xpY2ssIGFuZCBzZXQgaGFuZGxlclxyXG4gICAgICAgIHRoaXMuX2Nvcm5lckNsaWNrZWRDbnQgPSAxO1xyXG4gICAgICAgIGxldCBfY29ybmVyRnVuY3Rpb24gPSB0aGlzLmdldENvcm5lckZ1bmN0aW9uKGNvcm5lciwgdGhpcy5fY29ybmVyQ2xpY2tlZENudCk7XHJcbiAgICAgICAgLy8gYWxyZWFkeSBjbGlja2VkLCBzbyBpdCdzIGEgZG91YmxlIGNsaWNrOyBjaGFuZ2UgaGFuZGxlclxyXG4gICAgICAgIGlmICh0aGlzLl9jb3JuZXJDbGlja2VkID09PSBjb3JuZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29ybmVyQ2xpY2tlZENudCArPSAxO1xyXG4gICAgICAgICAgICBfY29ybmVyRnVuY3Rpb24gPSB0aGlzLmdldENvcm5lckZ1bmN0aW9uKGNvcm5lciwgdGhpcy5fY29ybmVyQ2xpY2tlZENudCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoYW5kbGVDb3JuZXJDbGljazogZG91YmxlIGNsaWNrIG9uICcgKyBjb3JuZXIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJlbWVtYmVyIHRoYXQgYXQgbGVhc3Qgb25lIGNsaWNrIGhhcyBoYXBwZW5lZCBmb3IgdGhlIGN1cnJlbnQgY29ybmVyXHJcbiAgICAgICAgdGhpcy5fY29ybmVyQ2xpY2tlZCA9IGNvcm5lcjtcclxuXHJcbiAgICAgICAgLy8gc2V0IHRpbWVyIHRvIGludm9rZSB3aGF0ZXZlciBoYW5kbGVyIHdlIGhhdmUgcmVhZHkgdG8gZ28gKHVubGVzcyBhbm90aGVyIGNsaWNrIGhhcHBlbnMgd2l0aGluIHRoZSBpbnRlcnZhbClcclxuICAgICAgICBsZXQgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgLy8gZGluZyEgaW52b2tlIGl0XHJcbiAgICAgICAgICAgIGlmIChfY29ybmVyRnVuY3Rpb24gPT09IHRoaXMuc2hvd0Nvcm5lclRpcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Q29ybmVyVGlwKHRoaW5nLCBjb3JuZXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leGVjQ29ybmVyRnVuY3Rpb24oY29ybmVyLCB0aGlzLl9jb3JuZXJDbGlja2VkQ250LCB0aGluZyk7IC8vIGRvbid0IHBhc3MgdGhlIGNvcm5lciBhcmcgdG8gdGhpbmdzIGxpa2UgY3JlYXRlQ2hpbGQgdGhhdCBoYXZlIGEgZGlmZmVyZW50IHNlY29uZCBhcmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9jb3JuZXJDbGlja2VkQ250ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5fY29ybmVyQ2xpY2tlZCA9IG51bGw7XHJcbiAgICAgICAgfSwgdGhpcy5fY29ybmVyVGltZW91dCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhlY0Nvcm5lckZ1bmN0aW9uKGNvcm5lciwgY2xpY2tzLCAuLi5hcmdzKSB7XHJcbiAgICAgICAgaWYgKGNvcm5lciA9PT0gJ0QnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5zaG93Q29ybmVyVGlwKC4uLmFyZ3MpIDogdGhpcy5tYXAuY3JlYXRlU2lzdGVyKC4uLmFyZ3MpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gJ1MnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5tYXAudG9nZ2xlU0V4cGFuc2lvbiguLi5hcmdzKSA6IHRoaXMubWFwLmNyZWF0ZUNoaWxkKC4uLmFyZ3MpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gJ1InKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5zaG93Q29ybmVyVGlwKC4uLmFyZ3MpIDogdGhpcy5tYXAuY3JlYXRlUlRvU2lzdGVyKC4uLmFyZ3MpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gJ1AnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5tYXAudG9nZ2xlUEV4cGFuc2lvbiguLi5hcmdzKSA6IHRoaXMubWFwLnBlcnNwZWN0aXZlcy5zZXRQRWRpdG9yUG9pbnQoLi4uYXJncykpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29ybmVyID09PSAnJykgeyAvLyBjbGljayBvbiB0ZXh0XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5zaG93Q29ybmVyVGlwKC4uLmFyZ3MpIDogdGhpcy5lZGl0VGV4dCguLi5hcmdzKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRDb3JuZXJGdW5jdGlvbjogbm8gZnVuY3Rpb24gZm91bmQgZm9yIGNvcm5lcjogJyArIGNvcm5lciArICchJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldENvcm5lckZ1bmN0aW9uKGNvcm5lciwgY2xpY2tzKSB7XHJcbiAgICAgICAgaWYgKGNvcm5lciA9PT0gJ0QnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5zaG93Q29ybmVyVGlwIDogdGhpcy5tYXAuY3JlYXRlU2lzdGVyKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gJ1MnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5tYXAudG9nZ2xlU0V4cGFuc2lvbiA6IHRoaXMubWFwLmNyZWF0ZUNoaWxkKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gJ1InKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5zaG93Q29ybmVyVGlwIDogdGhpcy5tYXAuY3JlYXRlUlRvU2lzdGVyKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gJ1AnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5tYXAudG9nZ2xlUEV4cGFuc2lvbiA6IHRoaXMubWFwLnBlcnNwZWN0aXZlcy5zZXRQRWRpdG9yUG9pbnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29ybmVyID09PSAnJykgeyAvLyBjbGljayBvbiB0ZXh0XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5zaG93Q29ybmVyVGlwIDogdGhpcy5lZGl0VGV4dCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRDb3JuZXJGdW5jdGlvbjogbm8gZnVuY3Rpb24gZm91bmQgZm9yIGNvcm5lcjogJyArIGNvcm5lciArICchJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE5COiBpbiB0aGlzIGNhc2UgdGhlIHRoaW5nIGlzIGFjdHVhbGx5IHRoZSBUZXh0Qm94LCBleGNlcHQgaW4gb3V0bGluZSBsYXlvdXQgaXQgaXMgYSBQYW5lbCBpZiB0aGUgYm94IGlzIGRvdWJsZS1jbGlja2VkLi4uXHJcbiAgICBlZGl0VGV4dCh0aGluZywgY29ybmVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnZWRpdFRleHQsIHRoaW5nOiAnICsgdGhpbmcpO1xyXG4gICAgICAgIGlmICh0aGluZyBpbnN0YW5jZW9mIGdvLlBhbmVsKSB7IC8vIG91dGxpbmUgbGF5b3V0XHJcbiAgICAgICAgICAgIGxldCBwYXJ0ID0gdGhpbmcucGFydDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2VkaXRUZXh0LCBwYXJ0OiAnICsgcGFydCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgcGFydC5kYXRhICYmIChwYXJ0LmRhdGEubGF5b3V0ID09PSAnbGVmdCcgfHwgcGFydC5kYXRhLmxheW91dCA9PT0gJ3JpZ2h0JykpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0QmxvY2tOYW1lID0gJ2V4dGVybmFsdGV4dC0nICsgcGFydC5kYXRhLmxheW91dDtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0ID0gdGhpbmcucGFydC5maW5kT2JqZWN0KHRleHRCbG9ja05hbWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGluZyA9IHRleHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tYXAuZ2V0RGlhZ3JhbSgpLmNvbW1hbmRIYW5kbGVyLmVkaXRUZXh0QmxvY2sodGhpbmcpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tIGhlbHAgdGlwIGZ1bmN0aW9ucyAtIHNlZSBhbHNvIHVzZXIuanMsIHZpZXdzL21hcHMvaGVscF90YWIgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gc2hvd3MgdGhpbmdUaXAgb3Igb25lIG9mIHRoZSBjb3JuZXJYVGlwc1xyXG4gICAgc2hvd0Nvcm5lclRpcCh0aGluZywgY29ybmVyKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0Nvcm5lclRpcCcpO1xyXG4gICAgICAgIGlmIChjb3JuZXIgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0hlbHBUaXAoJ3RoaW5nVGlwJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93SGVscFRpcCgnY29ybmVyJyArIGNvcm5lciArICdUaXAnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0hlbHBUaXAodGlwKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0hlbHBUaXA6ICcgKyB0aXApO1xyXG5cclxuICAgICAgICAvLyBkb24ndCBzaG93IGhlbHAgaWYgaW4gcHJlc2VudGVyXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFRhYklzKFRBQlMuVEFCX0lEX1BSRVNFTlRFUikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5oZWxwVGlwID0gdGlwO1xyXG4gICAgICAgIC8vdGhpcy5zYWZlQXBwbHkoKTtcclxuICAgICAgICAkKCcjaGVscC10aXAnKS5zaG93KCk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoICgpID0+IHtcclxuICAgICAgICAgICAgJCgnI2hlbHAtdGlwJykuZmFkZU91dCg1MDAsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGVscFRpcCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAvL3RoaXMuc2FmZUFwcGx5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIDUwMDApO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBVSTsiLCIvLyBmdW5jdGlvbnMgaGFuZGxpbmcgZWRpdG9yIGF1dG9zYXZlIGZ1bmN0aW9uXHJcbmNvbnN0ICRodHRwID0ge1xyXG4gICAgcHV0OiAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHsgfSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5jb25zdCBjaGFuZ2VEZXNjcmlwdGlvbnMgPSB7XHJcbiAgICBtb3ZlOiAnTW92ZWQgT2JqZWN0cycsXHJcbiAgICB1bmRvX3JlZG86ICdQZXJmb3JtZWQgVW5kby9SZWRvJyxcclxuICAgIGVkaXRfdGl0bGU6ICdFZGl0ZWQgTWV0YU1hcCBUaXRsZScsXHJcbiAgICBlZGl0X2Rlc2NyaXB0aW9uOiAnRWRpdGVkIE1ldGFNYXAgRGVzY3JpcHRpb24nLFxyXG4gICAgZWRpdF91c2VydGFnczogJ0VkaXQgTWV0YU1hcCBUYWdzJyxcclxuICAgIGVkaXRfZDogJ0VkaXRlZCBEaXN0aW5jdGlvbnMnLFxyXG4gICAgZWRpdF9zOiAnRWRpdGVkIFN5c3RlbXMnLFxyXG4gICAgZWRpdF9yOiAnRWRpdGVkIFJlbGF0aW9uc2hpcHMnLFxyXG4gICAgZWRpdF9wOiAnRWRpdGVkIFBlcnNwZWN0aXZlcycsXHJcbiAgICBhZGRfdGhpbmc6ICdBZGRlZCBJZGVhcycsXHJcbiAgICByZW5hbWVfdGhpbmc6ICdSZW5hbWVkIElkZWFzJyxcclxuICAgIGRlbGV0ZV90aGluZzogJ0RlbGV0ZWQgSWRlYXMnLFxyXG4gICAgZWRpdF9hdHRhY2htZW50czogJ0VkaXRlZCBBdHRhY2htZW50cycsXHJcbiAgICBlZGl0X3ByZXNlbnRlcjogJ0VkaXRlZCBQcmVzZW50ZXIgU2xpZGVzJyxcclxuICAgIGVkaXRfZ2VuZXJhdG9yOiAnSW5zZXJ0ZWQgSWRlYXMgZnJvbSBUaGlua1F1ZXJ5JyxcclxuICAgIGVkaXRfc3RhbmRhcmRzOiAnRWRpdGVkIExpbmtzIHRvIENvbW1vbiBDb3JlIFN0YW5kYXJkcydcclxufTtcclxuXHJcbmNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5cclxuY2xhc3MgQXV0b3NhdmUge1xyXG4gICAgY29uc3RydWN0b3IoZWRpdG9yLCBtYXApIHtcclxuICAgICAgICB0aGlzLl9lZGl0b3IgPSBlZGl0b3I7XHJcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlVHlwZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZShjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VUeXBlcy5wdXNoKGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIHRoaXMuZGVsYXllZEF1dG9zYXZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZG8gYSBzYXZlIHJpZ2h0IG5vd1xyXG4gICAgc2F2ZU5vdyhjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VUeXBlcy5wdXNoKGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIHRoaXMuYXV0b3NhdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBkb24ndCBsZXQgYXV0b3NhdmUgYmUgdHJpZ2dlcmVkIG1vcmUgdGhhbiBldmVyeSBOIG1pbGxpc2Vjb25kcy4uLlxyXG4gICAgZ2V0IGRlbGF5ZWRBdXRvc2F2ZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2RlbGF5ZWRBdXRvU2F2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxheWVkQXV0b1NhdmUgPSBfLmRlYm91bmNlKHRoaXMuYXV0b3NhdmUsIDIwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsYXllZEF1dG9TYXZlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvbXBpbGUgdGhlIGN1cnJlbnQgbGlzdCBvZiBjaGFuZ2UgdHlwZSBkZXNjcmlwdGlvbnMsIHByb2Nlc3MgdGhlbSBcclxuICAgIC8vIHRvIHJlbW92ZSBkdXBsaWNhdGVzLCBhbmQgc2F2ZSB0aGUgY3VycmVudCBkYXRhXHJcbiAgICBhdXRvc2F2ZSgpIHtcclxuICAgICAgICAvLyBzdG9wIHJpZ2h0IGhlcmUgaWYgd2UncmUgaW4gdGhlIHNhbmRib3ggYW5kL29yIHdlIGRvbid0IGhhdmUgZWRpdCBwZXJtaXNzaW9uc1xyXG4gICAgICAgIC8vaWYgKHRoaXMuX2VkaXRvci5zYW5kYm94IHx8ICF0aGlzLl9lZGl0b3IuY2FuRWRpdCkge1xyXG4gICAgICAgIC8vICAgIHJldHVybjtcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgLy9pZiAoIXRoaXMuY2hhbmdlVHlwZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gICAgY29uc29sZS5sb2coJ2F1dG9zYXZlOiBub3RoaW5nIHRvIHNhdmUhJyk7IC8vIHNob3VsZG4ndCBoYXBwZW5cclxuICAgICAgICAvLyAgICByZXR1cm47XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIC8vLy8gZGUtZHVwZSB0aGUgbGlzdCBvZiBjaGFuZ2UgdHlwZXNcclxuICAgICAgICAvL2xldCBjaGFuZ2VMaXN0ID0gXy51bmlxKHRoaXMuY2hhbmdlVHlwZXMpO1xyXG4gICAgICAgIC8vLy9jb25zb2xlLmxvZygnY2hhbmdlTGlzdDogJyArIGNoYW5nZUxpc3QpO1xyXG4gICAgICAgIC8vLy8gZG9uJ3Qgc2hvdyBtb3ZlIGV2ZW50cyB1bmxlc3MgdGhhdCdzIGFsbCB3ZSBoYXZlXHJcbiAgICAgICAgLy9sZXQgY2hhbmdlTGlzdFdpdGhvdXRNb3ZlcyA9IF8ud2l0aG91dChjaGFuZ2VMaXN0LCAnbW92ZScpO1xyXG4gICAgICAgIC8vaWYgKGNoYW5nZUxpc3RXaXRob3V0TW92ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIC8vICAgIGNoYW5nZUxpc3QgPSBjaGFuZ2VMaXN0V2l0aG91dE1vdmVzO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8vLy9jb25zb2xlLmxvZygnY2hhbmdlTGlzdCB3aXRob3V0IG1vdmVzOiAnICsgY2hhbmdlTGlzdCk7XHJcbiAgICAgICAgLy8vLyBnZXQgZGVzY3JpcHRpb25zXHJcbiAgICAgICAgLy9sZXQgZGVzY3JpcHRpb25MaXN0ID0gXy5tYXAoY2hhbmdlTGlzdCwgKGN0KSA9PiB7XHJcbiAgICAgICAgLy8gICAgcmV0dXJuIF8ucmVzdWx0KGNoYW5nZURlc2NyaXB0aW9ucywgY3QpO1xyXG4gICAgICAgIC8vfSk7XHJcblxyXG4gICAgICAgIC8vLy9jb25zb2xlLmxvZygnYXV0b3NhdmUsIGNoYW5nZUxpc3Q6ICcgKyBjaGFuZ2VMaXN0ICsgJywgZGVzY3JpcHRpb25MaXN0OiAnICsgZGVzY3JpcHRpb25MaXN0KTtcclxuICAgICAgICAvL2xldCBwb3N0RGF0YSA9IHtcclxuICAgICAgICAvLyAgICBcIm5hbWVcIjogdGhpcy5fZWRpdG9yLm1hcFRpdGxlLFxyXG4gICAgICAgIC8vICAgIFwiZGF0YVwiOiB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnRvSnNvbigpLFxyXG4gICAgICAgIC8vICAgIFwic3RhdGVfZGF0YVwiOiBKU09OLnN0cmluZ2lmeSh0aGlzLl9tYXAudWkuZ2V0U3RhdGVEYXRhKCkpLFxyXG4gICAgICAgIC8vICAgIFwiZWRpdG9yX29wdGlvbnNcIjogSlNPTi5zdHJpbmdpZnkodGhpcy5fbWFwLl9lZGl0b3JPcHRpb25zKSxcclxuICAgICAgICAvLyAgICBcInByZXNlbnRlcl9zbGlkZXNcIjogdGhpcy5fbWFwLnByZXNlbnRlci5nZXRTbGlkZUNvdW50KCksXHJcbiAgICAgICAgLy8gICAgXCJhY3Rpdml0eV9zbGlkZXNcIjogdGhpcy5fbWFwLnByZXNlbnRlci5nZXRBY3Rpdml0eVNsaWRlQ291bnQoKSxcclxuICAgICAgICAvLyAgICBcImNoYW5nZV90eXBlXCI6IGNoYW5nZUxpc3Quam9pbignOycpLFxyXG4gICAgICAgIC8vICAgIFwiY2hhbmdlX2Rlc2NyaXB0aW9uXCI6IGRlc2NyaXB0aW9uTGlzdC5qb2luKCc7ICcpLFxyXG4gICAgICAgIC8vICAgIFwidGh1bWJuYWlsX3BuZ1wiOiB0aGlzLl9tYXAucHJlc2VudGVyLmdldE1hcFRodW1ibmFpbCgpXHJcbiAgICAgICAgLy99O1xyXG4gICAgICAgIC8vbGV0IHVybCA9IHRoaXMuX2VkaXRvci5tYXBVcmwgKyAnLmpzb24nO1xyXG5cclxuICAgICAgICAvL3RoaXMuX2VkaXRvci51cGRhdGVFZGl0U3RhdHVzKHRoaXMuX2VkaXRvci5TQVZJTkcpO1xyXG4gICAgICAgIC8vJGh0dHAucHV0KHVybCwgcG9zdERhdGEpLnRoZW4oXHJcbiAgICAgICAgLy8gICAgKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgIHRoaXMuY2hhbmdlVHlwZXMgPSBbXTtcclxuICAgICAgICAvLyAgICAgICAgdGhpcy5fZWRpdG9yLnVwZGF0ZUVkaXRTdGF0dXModGhpcy5fZWRpdG9yLlNBVkVfT0spO1xyXG4gICAgICAgIC8vICAgICAgICAvLyBsb2FkIHJldHVybmVkIGRhdGEgZm9yIGFuYWx5dGljcywgcG9pbnRzLCBiYWRnZXMsIHZlcnNpb25zXHJcbiAgICAgICAgLy8gICAgICAgIHRoaXMuX2VkaXRvci50aGlzLl9tYXAubG9hZE1hcEV4dHJhRGF0YShyZXNwb25zZS5kYXRhLm1hcCk7XHJcbiAgICAgICAgLy8gICAgfSxcclxuICAgICAgICAvLyAgICAoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgIHRoaXMuX2VkaXRvci51cGRhdGVFZGl0U3RhdHVzKHRoaXMuX2VkaXRvci5TQVZFX0ZBSUxFRCk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBoYW5kbGUgbW9kZWwgY2hhbmdlcyAtIHRyaWdnZXIgYXV0b3NhdmUgLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cclxuXHJcbiAgICAvLyBlIGlzIGEgZ28uQ2hhbmdlZEV2ZW50XHJcbiAgICBtb2RlbENoYW5nZWQoZSkge1xyXG5cclxuICAgICAgICBpZiAoIXNlbGYuc2F2ZU9uTW9kZWxDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBjaGFuZ2VUeXBlID0gbnVsbDtcclxuICAgICAgICBsZXQgY2hhbmdlRGVzY3JpcHRpb24gPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAoZS5wcm9wZXJ0eU5hbWUgPT09ICd0eXBlJykge1xyXG4gICAgICAgICAgICAvLyBjaGFuZ2UgUiB0eXBlXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLG4sMSxvLDIsQSwzLHIsNCxyLDUsbyw2LHcsNyxzXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsdCwxLG9dICwgcHJvcGVydHlOYW1lOiB0eXBlXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9yJztcclxuICAgICAgICAgICAgY2hhbmdlRGVzY3JpcHRpb24gPSAnQ2hhbmdlZCBSZWxhdGlvbnNoaXAgVHlwZXMnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT09ICdsYXlvdXQnKSB7XHJcbiAgICAgICAgICAgIC8vIGNoYW5nZSBzeXN0ZW0gbGF5b3V0XHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLGwsMSxlLDIsZiwzLHRdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCxyLDEsaSwyLGcsMyxoLDQsdF0gLCBwcm9wZXJ0eU5hbWU6IGxheW91dCBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3MnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5jaGFuZ2UgPT09IGdvLkNoYW5nZWRFdmVudC5JbnNlcnQgJiYgdGhpcy5wcm9wZXJ0eUVxdWFscyhlLm5ld1ZhbHVlLCAnZnJvbVBvcnQnLCAnUicpKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogMSwgbmV3VmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsNjAwNSxmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUix0b1BvcnQsUF0gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXlcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtUb1BvcnRJZCwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsUF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLFJdICwgcHJvcGVydHlOYW1lOiB0b1BvcnQgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9yJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUuY2hhbmdlID09PSBnby5DaGFuZ2VkRXZlbnQuUmVtb3ZlICYmIHRoaXMucHJvcGVydHlFcXVhbHMoZS5vbGRWYWx1ZSwgJ2Zyb21Qb3J0JywgJ1InKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogMSwgb2xkVmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsNjAwNSxmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUix0b1BvcnQsUl0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PT0gJ2xpbmtEYXRhQXJyYXknKSB7XHJcbiAgICAgICAgICAgIC8vIGNoYW5nZSBQL0QgbGlua3NcclxuICAgICAgICAgICAgLy8gYWRkIFAgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuSW5zZXJ0LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IDIsIG5ld1ZhbHVlOiBbdHlwZSxub0Fycm93cyxfX2dvaGFzaGlkLDE5MTIyLGZyb20sLTIsdG8sLTQsbGFiZWxLZXlzLCxmcm9tUG9ydCxQLHRvUG9ydCxQXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheSBcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtDYXRlZ29yeSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLFBdICwgcHJvcGVydHlOYW1lOiBjYXRlZ29yeSBcclxuICAgICAgICAgICAgLy8gZGVsZXRlIFAgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogMiwgb2xkVmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsMTkxMjIsZnJvbSwtMix0bywtNCxsYWJlbEtleXMsLGZyb21Qb3J0LFAsdG9Qb3J0LFAsY2F0ZWdvcnksUF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyBhZGQgRCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogMSwgbmV3VmFsdWU6IFtmcm9tLC03LHRvLC01LGZyb21Qb3J0LEQsdG9Qb3J0LEQsY2F0ZWdvcnksRCxfX2dvaGFzaGlkLDE5NTIyXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheSBcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIEQgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogMSwgb2xkVmFsdWU6IFtmcm9tLC03LHRvLC01LGZyb21Qb3J0LEQsdG9Qb3J0LEQsY2F0ZWdvcnksRCxfX2dvaGFzaGlkLDE5NTIyXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXkgXHJcblxyXG4gICAgICAgICAgICBpZiAoKGUubmV3VmFsdWUgJiYgZS5uZXdWYWx1ZS5jYXRlZ29yeSA9PT0gJ1AnKSB8fFxyXG4gICAgICAgICAgICAgICAgKGUub2xkVmFsdWUgJiYgZS5vbGRWYWx1ZS5jYXRlZ29yeSA9PT0gJ1AnKSkge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3AnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKChlLm5ld1ZhbHVlICYmIGUubmV3VmFsdWUuY2F0ZWdvcnkgPT09ICdEJykgfHxcclxuICAgICAgICAgICAgICAgIChlLm9sZFZhbHVlICYmIGUub2xkVmFsdWUuY2F0ZWdvcnkgPT09ICdEJykpIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9kJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT09ICdjYXRlZ29yeScpIHtcclxuICAgICAgICAgICAgLy8gYWRkIFAgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZWQsIG1vZGVsQ2hhbmdlOiBsaW5rQ2F0ZWdvcnksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCxQXSAsIHByb3BlcnR5TmFtZTogY2F0ZWdvcnkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9wJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09PSAnZ3JvdXAnKSB7XHJcbiAgICAgICAgICAgIC8vIGRyYWcgaW50byBTXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlZCwgbW9kZWxDaGFuZ2U6IG5vZGVHcm91cEtleSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBncm91cCBcclxuICAgICAgICAgICAgLy8gcmVvcmRlciBwYXJ0XHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlZCwgbW9kZWxDaGFuZ2U6IG5vZGVHcm91cEtleSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBncm91cCBcclxuICAgICAgICAgICAgLy8gZHJhZyB0byBEXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlZCwgbW9kZWxDaGFuZ2U6IG5vZGVHcm91cEtleSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBncm91cCBcclxuXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9zJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09PSAnbm9kZURhdGFBcnJheScgJiYgZS5jaGFuZ2UgPT09IGdvLkNoYW5nZWRFdmVudC5JbnNlcnQgJiYgdGhpcy5wcm9wZXJ0eUVxdWFscyhlLm5ld1ZhbHVlLCAnaXNHcm91cCcsIHRydWUpKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCB0aGluZ1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbm9kZURhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuSW5zZXJ0LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IDUsIG5ld1ZhbHVlOiBbdGV4dCxOZXcgSWRlYSxpc0dyb3VwLHRydWUsbGV2ZWwsMCxsYXlvdXQsbGVmdCxzRXhwYW5kZWQsdHJ1ZSxwRXhwYW5kZWQsZmFsc2UsZEV4cGFuZGVkLGZhbHNlLF9fZ29oYXNoaWQsNTQ2ODgsZ3JvdXAsLGtleSwtN10gLCBwcm9wZXJ0eU5hbWU6IG5vZGVEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCwyLDEsMiwyLDgsMywuLDQsNSw1LDYsNiwyLDcsNSw4LCAsOSwtLDEwLDEsMTEsNCwxMiw5LDEzLC4sMTQsNiwxNSw4LDE2LDcsMTcsNV0gLCBwcm9wZXJ0eU5hbWU6IGxvYyBcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBjaGlsZHJlbiBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdhZGRfdGhpbmcnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT09ICd0ZXh0Jykge1xyXG4gICAgICAgICAgICAvLyBtb3ZlIHRoaW5nXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLGIsMSxiLDIsYiwzLGIsNCxiXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsYSwxLGEsMixhLDMsYSw0LGFdICwgcHJvcGVydHlOYW1lOiB0ZXh0IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ3JlbmFtZV90aGluZyc7XHJcbiAgICAgICAgICAgIGNoYW5nZURlc2NyaXB0aW9uID0gJ1JlbmFtZWQgSWRlYXMnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT09ICdub2RlRGF0YUFycmF5JyAmJiBlLmNoYW5nZSA9PT0gZ28uQ2hhbmdlZEV2ZW50LlJlbW92ZSAmJiB0aGlzLnByb3BlcnR5RXF1YWxzKGUub2xkVmFsdWUsICdpc0dyb3VwJywgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoaW5nXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBub2RlRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiA1LCBvbGRWYWx1ZTogW3RleHQsTmV3IElkZWEsaXNHcm91cCx0cnVlLGxldmVsLDAsbGF5b3V0LGxlZnQsc0V4cGFuZGVkLHRydWUscEV4cGFuZGVkLGZhbHNlLGRFeHBhbmRlZCxmYWxzZSxfX2dvaGFzaGlkLDU0Njg4LGdyb3VwLCxrZXksLTcsbG9jLDIyOC41NjI1IC0xNDkuNjg3NSxjaGlsZHJlbiwwLGF0dGFjaG1lbnRzLF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBub2RlRGF0YUFycmF5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2RlbGV0ZV90aGluZyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PT0gJ25vZGVEYXRhQXJyYXknICYmIGUuY2hhbmdlID09PSBnby5DaGFuZ2VkRXZlbnQuSW5zZXJ0ICYmIHRoaXMucHJvcGVydHlFcXVhbHMoZS5uZXdWYWx1ZSwgJ2lzR3JvdXAnLCBmYWxzZSkpIHtcclxuICAgICAgICAgICAgLy8gYWRkIHNsaWRlXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBub2RlRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogNSwgbmV3VmFsdWU6IFtrZXksc2xpZGUtMCxjYXRlZ29yeSxzbGlkZSxpbmRleCwwLGlzR3JvdXAsZmFsc2Usd2lkdGgsMjAwLGhlaWdodCwyMDAsbG9jLDE1Ni41NjI1IC05Ny42ODc1LGxldmVsLDAsY2hpbGRyZW4sMCx0aXRsZSwsbm90ZXMsLF9fZ29oYXNoaWQsNjM4NzddICwgcHJvcGVydHlOYW1lOiBub2RlRGF0YUFycmF5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcHJlc2VudGVyJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09PSAnbm9kZURhdGFBcnJheScgJiYgZS5jaGFuZ2UgPT09IGdvLkNoYW5nZWRFdmVudC5SZW1vdmUgJiYgdGhpcy5wcm9wZXJ0eUVxdWFscyhlLm9sZFZhbHVlLCAnaXNHcm91cCcsIGZhbHNlKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgc2xpZGVcclxuICAgICAgICAgICAgLy9tb2RlbENoYW5nZTogbm9kZURhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogNSwgb2xkVmFsdWU6IFtrZXksc2xpZGUtMCxjYXRlZ29yeSxzbGlkZSxpbmRleCwwLGlzR3JvdXAsZmFsc2Usd2lkdGgsMjAwLGhlaWdodCwyMDAsbG9jLDE1Ni41NjI1IC05Ny42ODc1LGxldmVsLDAsY2hpbGRyZW4sMCx0aXRsZSwsbm90ZXMsLF9fZ29oYXNoaWQsNjM4NzcsJCRoYXNoS2V5LDBYTl0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBub2RlRGF0YUFycmF5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcHJlc2VudGVyJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09PSAnbG9jJyB8fCBlLnByb3BlcnR5TmFtZSA9PT0gJ3dpZHRoJyB8fCBlLnByb3BlcnR5TmFtZSA9PT0gJ2hlaWdodCcpIHtcclxuICAgICAgICAgICAgLy8gbW92ZSB0aGluZyBvciByZXNpemUgc2xpZGVcclxuICAgICAgICAgICAgLy8gbW92ZSBzbGlkZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCwyLDEsNCwyLDMsMywgLDQsLSw1LDEsNiwyLDcsOF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDIsMSw0LDIsMywzLCAsNCwtLDUsMSw2LDIsNyw3XSAsIHByb3BlcnR5TmFtZTogbG9jIFxyXG4gICAgICAgICAgICAvLyByZXNpemUgc2xpZGVcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBoZWlnaHQgXHJcbiAgICAgICAgICAgIC8vIG1vdmUgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsNCwxLDcsMiw5LDMsLiw0LDgsNSw3LDYsNSw3LCAsOCwtLDksMSwxMCwyLDExLDIsMTIsLiwxMyw4LDE0LDcsMTUsNV0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDUsMSw0LDIsMCwzLC4sNCwzLDUsMSw2LDIsNyw1LDgsICw5LC0sMTAsMSwxMSwyLDEyLDEsMTMsLiwxNCwxLDE1LDgsMTYsNywxNyw1XSAsICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ21vdmUnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT09ICdsZXZlbCcgfHwgZS5wcm9wZXJ0eU5hbWUgPT09ICdjaGlsZHJlbicpIHtcclxuICAgICAgICAgICAgLy8gdGhlc2UgYXR0cmlidXRlcyBhcmUgdXBkYXRlZCBhcyBhIHJlc3VsdCBvZiBvdGhlciBhY3Rpb25zOyBpZ25vcmVcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PT0gJ2F0dGFjaG1lbnRzJykge1xyXG4gICAgICAgICAgICAvLyBlZGl0ZWQgYXR0YWNobWVudHNcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X2F0dGFjaG1lbnRzJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09PSAnc0V4cGFuZGVkJyB8fCBlLnByb3BlcnR5TmFtZSA9PT0gJ3BFeHBhbmRlZCcpIHtcclxuICAgICAgICAgICAgLy8gaWdub3JlIGV4cGFuZC9jb2xsYXBzZVxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ21vdmUnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT09ICdGaW5pc2hlZFVuZG8nIHx8IGUucHJvcGVydHlOYW1lID09PSAnRmluaXNoZWRSZWRvJykge1xyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ3VuZG9fcmVkbyc7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLmNoYW5nZSAhPT0gZ28uQ2hhbmdlZEV2ZW50LlRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtb2RlbENoYW5nZWQsIG1vZGVsQ2hhbmdlOiAnICsgZS5tb2RlbENoYW5nZSArXHJcbiAgICAgICAgICAgICAgICAnLCBjaGFuZ2U6ICcgKyBlLmNoYW5nZSArXHJcbiAgICAgICAgICAgICAgICAnLCBvbGRQYXJhbTogJyArIGUub2xkUGFyYW0gK1xyXG4gICAgICAgICAgICAgICAgJywgb2xkVmFsdWU6IFsnICsgXy5wYWlycyhlLm9sZFZhbHVlKSArICddICcgK1xyXG4gICAgICAgICAgICAgICAgJywgbmV3UGFyYW06ICcgKyBlLm5ld1BhcmFtICtcclxuICAgICAgICAgICAgICAgICcsIG5ld1ZhbHVlOiBbJyArIF8ucGFpcnMoZS5uZXdWYWx1ZSkgKyAnXSAnICtcclxuICAgICAgICAgICAgICAgICcsIHByb3BlcnR5TmFtZTogJyArIGUucHJvcGVydHlOYW1lXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlVHlwZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9tYXAuYW5hbHl0aWNzLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY2FsbGluZyBkZWxheWVkQXV0b3NhdmUsIGNoYW5nZVR5cGU6ICcgKyBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgc2VsZi5zYXZlKGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBjb252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgcHJvcGVydGllc1xyXG4gICAgcHJvcGVydHlFcXVhbHMob2JqLCBrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiBfLmhhcyhvYmosIGtleSkgJiYgXy5yZXN1bHQob2JqLCBrZXkpID09PSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQXV0b3NhdmU7IiwiY29uc3QgZWRpdFN0YXR1cyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cy9lZGl0U3RhdHVzLmpzJyk7XHJcbmNvbnN0IGNvbW1vbiA9IHJlcXVpcmUoJy4uL3Rvb2xzL0NvbW1vbi5qcycpO1xyXG5jb25zdCBCQUNLU1BBQ0UgPSA4O1xyXG5jb25zdCBNYXAgPSByZXF1aXJlKCcuL01hcC5qcycpO1xyXG5cclxuY2xhc3MgRWRpdG9yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihtYXBEYXRhKSB7XHJcbiAgICAgICAgdGhpcy5tYXBEYXRhID0gbWFwRGF0YTtcclxuICAgICAgICBsZXQgbWV0YWRhdGEgPSBtYXBEYXRhLm1hcC5tZXRhZGF0YTtcclxuICAgICAgICB0aGlzLnNhbmRib3ggPSBtZXRhZGF0YS5zYW5kYm94O1xyXG4gICAgICAgIHRoaXMubWFwRGF0YSA9IHdpbmRvdy5tYXBEYXRhLm1hcC5kYXRhOyAvLyB0aGlzIGdldHMgb3ZlcndyaXR0ZW4gYnkgbG9hZCgpIHVubGVzcyB3ZSBhcmUgaW4gdGhlIHNhbmRib3ggd2l0aCBubyBtYXAgSURcclxuICAgICAgICB0aGlzLm1hcElkID0gbWV0YWRhdGEuaWQ7XHJcbiAgICAgICAgdGhpcy5tYXBUaXRsZSA9IG1ldGFkYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5tYXBVc2VyVGFncyA9IG1ldGFkYXRhLnVzZXJUYWdzO1xyXG4gICAgICAgIHRoaXMubWFwVXJsID0gbWV0YWRhdGEudXJsO1xyXG4gICAgICAgIHRoaXMuY2FuRWRpdCA9IG1ldGFkYXRhLmNhbkVkaXQ7XHJcbiAgICAgICAgdGhpcy51cGRhdGVkQXQgPSBtZXRhZGF0YS51cGRhdGVkQXQ7XHJcbiAgICAgICAgdGhpcy51cGRhdGVkQnkgPSBtZXRhZGF0YS51cGRhdGVkQnk7IC8vIElEXHJcbiAgICAgICAgdGhpcy51cGRhdGVkQnlOYW1lID0gbWV0YWRhdGEudXBkYXRlZEJ5TmFtZTtcclxuICAgICAgICB0aGlzLmVkaXRpbmdUaXRsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZWRpdFN0YXR1cyA9ICcnO1xyXG5cclxuICAgICAgICB0aGlzLnNob3dJbWFnZUV4cG9ydCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VFeHBvcnRMb2FkaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGFiID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gb3ZlcnJpZGUgcGFyZW50IHNjb3BlIChzZWUgdXNlci5qcykgc2luY2Ugd2UncmUgZWRpdGluZyBhIG1hcFxyXG4gICAgICAgIC8vdGhpcy5jY3NUYWdnaW5nLm1hcElkID0gdGhpcy5tYXBJZDtcclxuXHJcbiAgICAgICAgdGhpcy5tYXAgPSBuZXcgTWFwKHsgRWRpdG9yOiB0aGlzIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghdGhpcy5zYW5kYm94KSB7XHJcbiAgICAgICAgICAgIC8vIG92ZXJ2aWV3IGRpYWdyYW1cclxuICAgICAgICAgICAgLy9sZXQgb3ZlcnZpZXcgPSBnby5HcmFwaE9iamVjdC5tYWtlKGdvLk92ZXJ2aWV3LCBcIm92ZXJ2aWV3LWRpYWdyYW1cIiwge1xyXG4gICAgICAgICAgICAvLyAgICBvYnNlcnZlZDogdGhpcy5tYXAuZ2V0RGlhZ3JhbSgpLFxyXG4gICAgICAgICAgICAvLyAgICBjb250ZW50QWxpZ25tZW50OiBnby5TcG90LkNlbnRlclxyXG4gICAgICAgICAgICAvL30pO1xyXG4gICAgICAgICAgICAvL2xldCBvdXRsaW5lID0gb3ZlcnZpZXcuYm94LmVsZW1lbnRzLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIC8vb3V0bGluZS5zdHJva2UgPSBcIiMzMzNcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1hcFVybCkge1xyXG4gICAgICAgICAgICB0aGlzLm1hcC5sb2FkKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tYXAubG9hZEZvclNhbmRib3goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQmVoYXZpb3JzKCk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVOYXZpZ2F0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVCYWNrc3BhY2UoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbWF5YmVTdGFydEVkaXRpbmdUaXRsZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdGluZ1RpdGxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZG9uZUVkaXRpbmdUaXRsZSgpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdkb25lRWRpdGluZ1RpdGxlJyk7XHJcbiAgICAgICAgdGhpcy5lZGl0aW5nVGl0bGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm1hcC5hdXRvc2F2ZS5zYXZlKCdlZGl0X3RpdGxlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZWRpdGluZ1RpdGxlS2V5cHJlc3MoZSkge1xyXG4gICAgICAgIGlmIChlLndoaWNoID09PSAxMykge1xyXG4gICAgICAgICAgICB0aGlzLmRvbmVFZGl0aW5nVGl0bGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpbnQoKSB7XHJcbiAgICAgICAgd2luZG93LnByaW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHNhdmUgc2FuZGJveCBtYXAgKHNpZ24gdXAvc2lnbiBpbikgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgc2F2ZVNhbmRib3hNYXAoKSB7XHJcbiAgICAgICAgbGV0IG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVfc2FuZGJveF9zYXZlX21vZGFsLmh0bWwnLCAvLyBzZWUgdmlld3MvdXNlcnMvX3RlbXBsYXRlX3NhbmRib3hfc2F2ZV9tb2RhbFxyXG4gICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IHRoaXMuc2FuZGJveFNhdmVNb2RhbEN0cmwsXHJcbiAgICAgICAgICAgIHdpbmRvd0NsYXNzOiAnc2FuZGJveC1zYXZlLW1vZGFsJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgb3V0ZXJTY29wZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1hcDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcDtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1c2VyUHJvZmlsZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXJQcm9maWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oKCkgPT4geyB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVFZGl0U3RhdHVzKHMpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd1cGRhdGVFZGl0U3RhdHVzOiAnICsgcyk7XHJcbiAgICAgICAgdGhpcy5lZGl0U3RhdHVzID0gcztcclxuICAgICAgICBpZiAocyA9PT0gZWRpdFN0YXR1cy5TQVZFX0ZBSUxFRCkge1xyXG4gICAgICAgICAgICBhbGVydCgnQ2hhbmdlcyBjb3VsZCBub3QgYmUgc2F2ZWQgLSBwbGVhc2UgY2hlY2sgeW91ciBuZXR3b3JrIGNvbm5lY3Rpb24uJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzID09PSBlZGl0U3RhdHVzLkxBU1RfVVBEQVRFRCkge1xyXG4gICAgICAgICAgICBsZXQgdGltZSA9IG1vbWVudCh0aGlzLnVwZGF0ZWRBdCkuZnJvbU5vdygpO1xyXG4gICAgICAgICAgICBsZXQgYnkgPSAnJztcclxuICAgICAgICAgICAgaWYgKHRoaXMudXBkYXRlZEJ5ID09PSB0aGlzLnVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgYnkgPSAnYnkgbWUnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudXBkYXRlZEJ5TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgYnkgPSAnYnkgJyArIHRoaXMudXBkYXRlZEJ5TmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiBzaG93ICdieSBtZScgb25seSBmb3IgZWRpdGFibGUgc2hhcmVkIG1hcHM/XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVkaXRTdGF0dXMgPSAnTGFzdCB1cGRhdGVkICcgKyB0aW1lICsgJyAnICsgYnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBMYXN0IGVkaXQgd2FzIFhYIGFnbyBieSBZWVxyXG4gICAgfVxyXG5cclxuICAgIC8vIG1pc2MuIFVJIGJlaGF2aW9ycyBmb3IgdG9vbHRpcHMsIHBvcHVwcyBldGMuXHJcbiAgICAvLyBUT0RPOiBmaWd1cmUgb3V0IHdoaWNoIG9mIHRoZXNlIG5lZWQgdG8gYmUgcmVhcHBsaWVkIGFmdGVyIGR5bmFtaWMgZGF0YSBjaGFuZ2VzIChlLmcuIExlc3NvbkJvb2sgcG9wb3ZlcnMpXHJcbiAgICBhZGRCZWhhdmlvcnMoKSB7XHJcblxyXG4gICAgICAgIC8vIE5PVEU6IHdlIGhhdmUgdG8gdXNlIHJlZ3VsYXIgYm9vdHN0cmFwIHRvb2x0aXBzIGZvciB0b29sYmFyIGJ1dHRvbnMgKGluc3RlYWQgb2YgbmctYm9vdHN0cmFwIG9uZXMpXHJcbiAgICAgICAgLy8gc28gd2UgY2FuIHR1cm4gdGhlbSBvZmYgZm9yIG1vYmlsZS4gV2UgYWxzbyBwdXQgdGhlIHRvb2x0aXBzIG9uIHdyYXBwZXJzIHJhdGhlciB0aGFuIG9uIHRoZSBhY3R1YWwgXHJcbiAgICAgICAgLy8gYnV0dG9ucywgc28gd2UgY2FuIGF2b2lkIHRoZSBpc3N1ZSBvZiBzdHVjayB0b29sdGlwcyBpZiBhIGJ1dHRvbiBnZXRzIGRpc2FibGVkIHdoaWxlIHRoZSB0b29sdGlwIGlzIHNob3dpbmcuXHJcblxyXG4gICAgICAgIGlmICghY29tbW9uLmlzVG91Y2hEZXZpY2UoKSkge1xyXG4gICAgICAgICAgICAvLyAkKCcudG9vbHRpcC13cmFwcGVyJykudG9vbHRpcCh7XHJcbiAgICAgICAgICAgIC8vICAgICBwbGFjZW1lbnQ6ICd0b3AnLFxyXG4gICAgICAgICAgICAvLyAgICAgY29udGFpbmVyOiAnYm9keSdcclxuICAgICAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAkKCcuZHJvcGRvd24tbWVudSAuYnRuJykudG9vbHRpcCh7XHJcbiAgICAgICAgICAgIC8vICAgICBwbGFjZW1lbnQ6ICdsZWZ0JyxcclxuICAgICAgICAgICAgLy8gICAgIGNvbnRhaW5lcjogJ2JvZHknXHJcbiAgICAgICAgICAgIC8vIH0pOyAvLyBmb3IgbGF5b3V0IG9wdGlvbnNcclxuXHJcbiAgICAgICAgICAgICQoJ2hlYWRlciwgI21hcC10aXRsZScpLmhvdmVyKFxyXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHkucHJlc2VudGVyLXBsYXlpbmcnKS5hZGRDbGFzcygnaGlkZS1oZWFkZXInKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keS5wcmVzZW50ZXItcGxheWluZycpLnJlbW92ZUNsYXNzKCdoaWRlLWhlYWRlcicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVOYXZpZ2F0aW9uKCkge1xyXG4gICAgICAgIC8vIGNyb3NzLWJyb3dzZXIgdHdlYWtzOlxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIGh0dHA6Ly93d3cub3BlcmEuY29tL3N1cHBvcnQva2Ivdmlldy84MjcvXHJcbiAgICAgICAgICAgIG9wZXJhLnNldE92ZXJyaWRlSGlzdG9yeU5hdmlnYXRpb25Nb2RlKCdjb21wYXRpYmxlJyk7XHJcbiAgICAgICAgICAgIGhpc3RvcnkubmF2aWdhdGlvbk1vZGUgPSAnY29tcGF0aWJsZSc7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBubyBiaWdnaWUuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpbnN0YWxsIGJlZm9yZS11bmxvYWQgaGFuZGxlcjpcclxuXHJcbiAgICAgICAgbGV0IGV4aXRNZXNzYWdlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJOYXZpZ2F0aW5nIGF3YXkgZnJvbSB5b3VyIE1hcCB3aWxsIGNhdXNlIGFueSB1bnNhdmVkIGNoYW5nZXMgdG8gYmUgbG9zdCBcIiArXHJcbiAgICAgICAgICAgICAgICBcIihhbnkgY2hhbmdlcyB5b3UgbWFrZSBhcmUgYXV0b21hdGljYWxseSBzYXZlZCwgYnV0IGl0IHRha2VzIGEgY291cGxlIG9mIHNlY29uZHMpLlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgICAgICQod2luZG93KS5iaW5kKCdiZWZvcmV1bmxvYWQnLCBleGl0TWVzc2FnZSk7XHJcblxyXG4gICAgICAgIC8vIHByZXZlbnQgZXhpdCBwcm9tcHQgd2hlbiB0aGUgdXNlciBkZWxpYmVyYXRlbHkgbmF2aWdhdGVzIGF3YXk6XHJcblxyXG4gICAgICAgICQoJyNoZWFkZXItcmlnaHQgYScpLmNsaWNrKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICQod2luZG93KS51bmJpbmQoJ2JlZm9yZXVubG9hZCcsIGV4aXRNZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVCYWNrc3BhY2UoKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEJBQ0tTUEFDRSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKCdib2R5IDpmb2N1cycpLmlzKCc6aW5wdXQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHByZXZlbnQgYWNjaWRlbnRhbCBiYWNrc3BhY2Ugd2hlbiBubyBpbnB1dCBoYXMgZm9jdXM6XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBFZGl0b3I7IiwiLy8gZnVuY3Rpb25zIGZvciB0aGUgZ2VuZXJhdG9yIChha2EgVGhpbmtRdWVyeSlcclxuY2xhc3MgR2VuZXJhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGVkaXRvciwgbWFwKSB7XHJcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHRoaXMuY29uY2VwdDEgPSAnJztcclxuICAgICAgICB0aGlzLmNvbmNlcHQyID0gJyc7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFF1ZXN0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gLS0tLS0tLS0tLSBmdW5jdGlvbnMgZm9yIGNyZWF0aW5nIGVhY2ggb2YgdGhlIHN0cnVjdHVyZXMgLSBzZWUgdmlld3MvbWFwcy9nZW5lcmF0b3JfdGFiIC0tLS0tLS0tLS0tXHJcbiAgICAgICAgdGhpcy5xdWVyaWVzID0ge1xyXG5cclxuICAgICAgICAgICAgV0hBVF9JUzogKHgsIHkpID0+IHsgIC8vIDFcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBXSEFUX0lTX05PVDogKHgsIHkpID0+IHsgLy8gMlxyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMSA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4LCB5LCB0aGlzLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMS5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcyBub3Q/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXMgbm90PycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzIG5vdD8nKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIERJU1RJTkdVSVNIX0JFVFdFRU46ICh4LCB5KSA9PiB7IC8vIDNcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMiA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCB0aGlzLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMi5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdpcz8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdpcz8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdpcz8nKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIENPTVBBUkVfQ09OVFJBU1Q6ICh4LCB5KSA9PiB7IC8vIDRcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCAtIDE1MCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcyID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggKyAxNTAsIHksIHRoaXMuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcxLmRhdGEsICdkZmxhZycsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcyLmRhdGEsICdkZmxhZycsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJ0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAnY29udHJhc3QnKTtcclxuICAgICAgICAgICAgICAgIGxldCBydGhpbmcyID0gdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ2NvbXBhcmUnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHJ0aGluZzEubGFiZWxlZExpbmsuZGF0YSwgJ3R5cGUnLCAndG9Gcm9tJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShydGhpbmcyLmxhYmVsZWRMaW5rLmRhdGEsICd0eXBlJywgJ3RvRnJvbScpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgUEFSVFNfT0Y6ICh4LCB5KSA9PiB7IC8vIDVcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBQQVJUX09GOiAoeCwgeSkgPT4geyAvLyA2XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcxID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHgsIHksICdwYXJ0IG9mPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBQQVJUU19IQVZFX1BBUlRTOiAoeCwgeSkgPT4geyAvLyA3XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcxID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHgsIHksIHRoaXMuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkMSA9IHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKGNoaWxkMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQoY2hpbGQxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDIgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVDaGlsZChjaGlsZDIsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKGNoaWxkMiwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBSX1BBUlRTOiAoeCwgeSkgPT4geyAvLyA4XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcxID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHgsIHksIHRoaXMuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMiA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCB0aGlzLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgICAgIGxldCBydGhpbmcgPSB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHJ0aGluZywgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQocnRoaW5nLCAncGFydD8nKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIFBfUEFSVFM6ICh4LCB5KSA9PiB7IC8vIDlcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDMwMCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQxID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludCBvZiAnICsgdGhpcy5lY2hvQ29uY2VwdDIoKSArICc/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQyID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludCBvZiAnICsgdGhpcy5lY2hvQ29uY2VwdDIoKSArICc/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQzID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludCBvZiAnICsgdGhpcy5lY2hvQ29uY2VwdDIoKSArICc/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcyID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHgsIHksIHRoaXMuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVBMaW5rKHRoaW5nMiwgdGhpbmcxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVQTGluayh0aGluZzIsIGNoaWxkMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUExpbmsodGhpbmcyLCBjaGlsZDIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVBMaW5rKHRoaW5nMiwgY2hpbGQzKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIFJTX1RPX0FORF9CWTogKHgsIHkpID0+IHsgLy8gMTBcclxuICAgICAgICAgICAgICAgIGxldCByZWxhdGVkMSA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4LCB5LCAncmVsYXRlZCBpZGVhPycpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlbGF0ZWQyID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggKyAzMDAsIHkgKyA1MCwgJ3JlbGF0ZWQgaWRlYT8nKTtcclxuICAgICAgICAgICAgICAgIGxldCByZWxhdGVkMyA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgNTAsIHkgKyAzMDAsICdyZWxhdGVkIGlkZWE/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDEzMCwgeSArIDEzMCwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUkxpbmsocmVsYXRlZDEsIHRoaW5nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVSTGluayhyZWxhdGVkMiwgdGhpbmcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rKHJlbGF0ZWQzLCB0aGluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMSA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgNTAwLCB5ICsgMTUwLCAnaWRlYT8nKTtcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzIgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDc1MCwgeSArIDE1MCwgJ2lkZWE/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCB0aGlzLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIFdIQVRfSVNfUjogKHgsIHkpID0+IHsgLy8gMTFcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcyID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHksIHRoaXMuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ2lkZWE/Jyk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBQQVJUX1JTX0FSRTogKHgsIHkpID0+IHsgLy8gMTJcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDMwLCB5LCB0aGlzLmVjaG9Db25jZXB0MSgpLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDEgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDIgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDMgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGNoaWxkMS5kYXRhLCAnbG9jJywgJy0yMCAxMTAnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGNoaWxkMi5kYXRhLCAnbG9jJywgJzgwIDExMCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoY2hpbGQzLmRhdGEsICdsb2MnLCAnMzAgMTkwJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMSwgY2hpbGQyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDIsIGNoaWxkMywgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQzLCBjaGlsZDEsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBQQVJUX1JTX0VYSVNUOiAoeCwgeSkgPT4geyAvLyAxM1xyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMSA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4LCB5LCB0aGlzLmVjaG9Db25jZXB0MSgpLCAncmlnaHQnKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDExID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQxMiA9IHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkMTMgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzIgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSwgdGhpcy5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQyMSA9IHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkMjIgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDIzID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUkxpbmsodGhpbmcxLCB0aGluZzIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDExLCBjaGlsZDIxLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDEyLCBjaGlsZDIyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDEzLCBjaGlsZDIzLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgUlNfV0lUSF9PVEhFUlM6ICh4LCB5KSA9PiB7IC8vIDE0XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcxID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggLSAyMDAsIHksIHRoaXMuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMiA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgMjAwLCB5LCB0aGlzLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzMgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCAtIDIwMCwgeSArIDIwMCwgJ2Fub3RoZXIgdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzQgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDIwMCwgeSArIDIwMCwgJ2Fub3RoZXIgdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmczLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nNCwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcyLCB0aGluZzQsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMywgdGhpbmc0LCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgUEFSVFNfT0ZfUDogKHgsIHkpID0+IHsgLy8gMTVcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCAtIDEwMCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQxID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQyID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQzID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcyID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggKyAxMDAsIHksIHRoaXMuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVBMaW5rKHRoaW5nMSwgdGhpbmcyKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIFBPSU5UX0ZPUjogKHgsIHkpID0+IHsgLy8gMTZcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZyA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4LCB5LCAnbmV3IHBlcnNwZWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcxID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggLSAxNTAsIHkgKyAxNTAsIHRoaXMuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMiA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgMTUwLCB5ICsgMTUwLCB0aGlzLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgICAgIGxldCBydGhpbmcgPSB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVBMaW5rKHRoaW5nLCBydGhpbmcpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgSEFTX01VTFRJUExFX1BTOiAgKHgsIHkpID0+IHsgLy8gMTdcclxuICAgICAgICAgICAgICAgIGxldCBwb2ludDEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCwgeSArIDUwLCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBvaW50MiA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBvaW50MyA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgNTAwLCB5ICsgNTAsICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmlldyA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5ICsgMjUwLCB0aGlzLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVQTGluayhwb2ludDEsIHZpZXcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVBMaW5rKHBvaW50Miwgdmlldyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUExpbmsocG9pbnQzLCB2aWV3KTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIFBBUlRTX0ZST01fTVVMVElQTEVfUFM6ICh4LCB5KSA9PiB7IC8vIDE4XHJcbiAgICAgICAgICAgICAgICBsZXQgcG9pbnQxID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHksICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcG9pbnQyID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHkgKyAxMjUsICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcG9pbnQzID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHkgKyAyNTAsICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDE1MCwgeSArIDI1LCB0aGlzLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDEgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQyID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nLCAncGFydCBzZWVuIGZyb20gdmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkMyA9IHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZywgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVQTGluayhwb2ludDEsIGNoaWxkMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUExpbmsocG9pbnQxLCBjaGlsZDIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVBMaW5rKHBvaW50MiwgY2hpbGQyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVQTGluayhwb2ludDMsIGNoaWxkMyk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBXSEFUX0FCT1VUOiAoeCwgeSkgPT4geyAvLyAxOVxyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWVyaWVzLldIQVRfSVMoeCwgeSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJpZXMuUEFSVFNfT0YoeCArIDMwMCwgeSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJpZXMuUEFSVFNfRlJPTV9NVUxUSVBMRV9QUyh4ICsgNzAwLCB5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVlcmllcy5SU19UT19BTkRfQlkoeCwgeSArIDQwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9OyAvLyBxdWVyaWVzXHJcbiAgICB9XHJcblxyXG4gICAgZWNob0NvbmNlcHQxKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmNlcHQxIHx8ICcuLi4nO1xyXG4gICAgfVxyXG5cclxuICAgIGVjaG9Db25jZXB0MigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25jZXB0MiB8fCAnLi4uJztcclxuICAgIH1cclxuXHJcbiAgICBzd2FwQ29uY2VwdHMoKSB7XHJcbiAgICAgICAgbGV0IHRtcCA9IHRoaXMuY29uY2VwdDE7XHJcbiAgICAgICAgdGhpcy5jb25jZXB0MSA9IHRoaXMuY29uY2VwdDI7XHJcbiAgICAgICAgdGhpcy5jb25jZXB0MiA9IHRtcDtcclxuICAgIH1cclxuXHJcbiAgICBtYXBJdChxdWVzdGlvbikge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX21hcC5hdXRvc2F2ZS5zYXZlT25Nb2RlbENoYW5nZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKCRzY29wZS5zYW5kYm94KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0uY2xlYXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgbG9jYXRpb24gZm9yIGluc2VydGVkIHN0dWZmXHJcbiAgICAgICAgbGV0IGRiID0gdGhpcy5fbWFwLmNvbXB1dGVNYXBCb3VuZHMoKTtcclxuICAgICAgICBsZXQgeCA9IGRiLnggKyBkYi53aWR0aCArIDIwMDtcclxuICAgICAgICBsZXQgeSA9IGRiLnk7XHJcbiAgICAgICAgaWYgKGlzTmFOKHgpIHx8IGlzTmFOKHkpKSB7XHJcbiAgICAgICAgICAgIHggPSB5ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygneCwgeTogJyArIHggKyAnLCAnICsgeSk7XHJcblxyXG4gICAgICAgIC8vIGluc2VydCB0aGUgc3R1ZmYgYW5kIGRlc2VsZWN0IGl0XHJcbiAgICAgICAgcXVlc3Rpb24oeCwgeSk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG5cclxuICAgICAgICB0aGlzLl9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG5cclxuICAgICAgICB0aGlzLl9tYXAudWkucmVzZXRab29tKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX21hcC5hdXRvc2F2ZS5zYXZlT25Nb2RlbENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX21hcC5hdXRvc2F2ZS5zYXZlKCdlZGl0X2dlbmVyYXRvcicpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdFF1ZXN0aW9uKHF1ZXN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFF1ZXN0aW9uID0gcXVlc3Rpb247XHJcbiAgICAgICAgaWYgKCRzY29wZS5zYW5kYm94KSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwSXQocXVlc3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdXJwcmlzZU1lKCkge1xyXG4gICAgICAgIGxldCBrZXlzID0gXy5rZXlzKHRoaXMucXVlcmllcyk7XHJcbiAgICAgICAgbGV0IGkgPSBfLnJhbmRvbSgwLCBrZXlzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIGxldCBxdWVzdGlvbiA9IHRoaXMucXVlcmllc1trZXlzW2ldXTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkUXVlc3Rpb24gPSBxdWVzdGlvbjtcclxuICAgICAgICB0aGlzLm1hcEl0KHF1ZXN0aW9uKTtcclxuXHJcbiAgICAgICAgJCgnI3F1ZXN0aW9ucycpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IGkgKiAzMCB9LCAxMDAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBhIHRhYiBpcyBvcGVuZWQgb3IgY2xvc2VkXHJcbiAgICBjdXJyZW50VGFiQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICBpZiAob2xkVmFsdWUgPT09IHRoaXMuX21hcC51aS5UQUJfSURfR0VORVJBVE9SKSB7IC8vIGNsb3NpbmcgdGFiXHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5zZXRFZGl0aW5nQmxvY2tlZChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG5ld1ZhbHVlID09PSB0aGlzLl9tYXAudWkuVEFCX0lEX0dFTkVSQVRPUikgeyAvLyBvcGVuaW5nIHRhYlxyXG4gICAgICAgICAgICB0aGlzLl9tYXAuc2V0RWRpdGluZ0Jsb2NrZWQodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoZXNlIGdldCBmaWx0ZXJlZCBvdXQgaW4gTGVzc29uQm9va1xyXG4gICAgZ2V0UGxhY2Vob2xkZXJJZGVhTmFtZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFsnaXM/JywgJ2lzIG5vdD8nLCAncGFydD8nLCAndmlld3BvaW50PycsICdyZWxhdGVkIGlkZWE/JywgJ2lkZWE/JyxcclxuICAgICAgICAgICAgICAgICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQ/JywgJ2NvbnRyYXN0PycsICdjb21wYXJpc29uPycsICdyZWxhdGlvbnNoaXA/J107XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR2VuZXJhdG9yOyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBMYXlvdXRzID0gcmVxdWlyZSgnLi4vTGF5b3V0cy5qcycpO1xyXG5cclxuY2xhc3MgRnJlZWhhbmREaWFncmFtTGF5b3V0IGV4dGVuZHMgTGF5b3V0cyB7XHJcbiAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiRnJlZWhhbmREaWFncmFtTGF5b3V0XCI7XHJcbiAgICB9XHJcblxyXG4gICAgZG9MYXlvdXQoY29sbCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ0ZyZWVoYW5kRGlhZ3JhbUxheW91dC5kb0xheW91dCcpO1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAvLyBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJGcmVlaGFuZCBEaWFncmFtIExheW91dFwiKTtcclxuXHJcbiAgICAgICAgLy92YWxpZGF0ZUdyb3VwTG9jYXRpb25zKGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkpO1xyXG4gICAgICAgIGxldCBncm91cHMgPSBkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpOyAvLyBnZXQgbmV3IGl0ZXJhdG9yXHJcbiAgICAgICAgd2hpbGUgKGdyb3Vwcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgbGV0IGdyb3VwID0gZ3JvdXBzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoIWdyb3VwLmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbG9jID0gZ28uUG9pbnQucGFyc2UoZ3JvdXAuZGF0YS5sb2MpO1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAubW92ZShuZXcgZ28uUG9pbnQobG9jLngsIGxvYy55KSk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdGcmVlaGFuZERpYWdyYW1MYXlvdXQsIGdyb3VwOiAnICsgZ3JvdXAgKyAnIHRvIGxvY2F0aW9uOiAnICsgbG9jLnggKyAnLCcgKyBsb2MueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFsbCBhZGp1c3RtZW50IG9mIGxpbmtzIGlzIGRvbmUgZnJvbSBoZXJlLCBub3QgZnJvbSB0aGUgb3RoZXIgbGF5b3V0cy4uLlxyXG4gICAgICAgIHRoaXMuZ2V0TGlua3NCeU5vZGVzKHRydWUpO1xyXG4gICAgICAgIGxldCBsaW5rcyA9IGRpYWdyYW0ubGlua3MuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICBsZXQgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICAvLyBpZiAoaXNOYU4obGluay5sb2NhdGlvbi54KSkge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ2xpbmsgbG9jYXRpb24gaXNOYU4nKTtcclxuICAgICAgICAgICAgLy8gICAgIGxpbmsubW92ZShuZXcgZ28uUG9pbnQoMCwwKSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2xpbmsgbG9jYXRpb246ICcgKyBsaW5rLmxvY2F0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5hZGp1c3RMaW5rTGF5b3V0KGxpbmspO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcIkZyZWVoYW5kIERpYWdyYW0gTGF5b3V0XCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5nby5EaWFncmFtLmluaGVyaXQoRnJlZWhhbmREaWFncmFtTGF5b3V0LCBnby5MYXlvdXQpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBGcmVlaGFuZERpYWdyYW1MYXlvdXQ7IiwiY29uc3QgZ28gPSB3aW5kb3cuZ287XHJcbmxldCBMYXlvdXRzID0gcmVxdWlyZSgnLi4vTGF5b3V0cycpO1xyXG5cclxuY2xhc3MgRnJlZWhhbmRMYXlvdXQgZXh0ZW5kcyBMYXlvdXRzIHtcclxuICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcclxuICAgICAgICBzdXBlciguLi5hcmdzKTtcclxuICAgIH1cclxuXHJcbiAgICB0b1N0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gXCJGcmVlaGFuZExheW91dFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGRvTGF5b3V0KGNvbGwpIHtcclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiRnJlZWhhbmQgTGF5b3V0XCIpO1xyXG5cclxuICAgICAgICBsZXQgeCA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICBsZXQgeSA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueTtcclxuXHJcbiAgICAgICAgbGV0IGl0ID0gdGhpcy5ncm91cC5tZW1iZXJQYXJ0cy5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgIXBhcnQuaXNMaW5rTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGxldCBsb2MgPSBnby5Qb2ludC5wYXJzZShwYXJ0LmRhdGEubG9jKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ0ZyZWVoYW5kTGF5b3V0LCBwYXJ0OiAnICsgcGFydC5kYXRhLnRleHQgKyAnLCBsb2M6ICcgKyBsb2MgKyAnLCBsb2NhdGlvbjogJyArIHBhcnQubG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgcGFydC5tb3ZlKG5ldyBnby5Qb2ludCh4ICsgbG9jLngsIHkgKyBsb2MueSkpO1xyXG4gICAgICAgICAgICAgICAgcGFydC5sYXlvdXQuZG9MYXlvdXQocGFydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJGcmVlaGFuZCBMYXlvdXRcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmdvLkRpYWdyYW0uaW5oZXJpdChGcmVlaGFuZExheW91dCwgZ28uTGF5b3V0KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRnJlZWhhbmRMYXlvdXQ7IiwiY29uc3QgZ28gPSB3aW5kb3cuZ287XHJcbmNvbnN0IExheW91dHMgPSByZXF1aXJlKCcuLi9MYXlvdXRzLmpzJyk7XHJcblxyXG5jbGFzcyBMZWZ0SW52ZW50b3J5TGF5b3V0IGV4dGVuZHMgTGF5b3V0cyB7XHJcbiAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiTGVmdEludmVudG9yeUxheW91dFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGRvTGF5b3V0KGNvbGwpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdMZWZ0SW52ZW50b3J5TGF5b3V0LmRvTGF5b3V0LCBncm91cDogJyArIHRoaXMuZ3JvdXAgKyAnLCBsb2NhdGlvbjogJyArIHRoaXMuZ3JvdXAubG9jYXRpb24pO1xyXG4gICAgICAgIC8vIHRoaXMuZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcclxuICAgICAgICBsZXQgc3RhcnRYID0gdGhpcy5ncm91cC5sb2NhdGlvbi54O1xyXG4gICAgICAgIGxldCBzdGFydFkgPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnkgKyAodGhpcy5ncm91cC5wYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyB0aGlzLmdldEludmVudG9yeU1hcmdpbih0aGlzLmdyb3VwKSk7XHJcbiAgICAgICAgdGhpcy5sYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5KHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZLCAnTCcpO1xyXG4gICAgICAgIC8vIHRoaXMuZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcIkludmVudG9yeSBMYXlvdXRcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmdvLkRpYWdyYW0uaW5oZXJpdChMZWZ0SW52ZW50b3J5TGF5b3V0LCBnby5MYXlvdXQpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBMZWZ0SW52ZW50b3J5TGF5b3V0OyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBMYXlvdXRzID0gcmVxdWlyZSgnLi4vTGF5b3V0cy5qcycpO1xyXG5cclxuY2xhc3MgUmlnaHRJbnZlbnRvcnlMYXlvdXQgZXh0ZW5kcyBMYXlvdXRzIHtcclxuICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcclxuICAgICAgICBzdXBlciguLi5hcmdzKTtcclxuICAgIH1cclxuXHJcbiAgICB0b1N0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gXCJSaWdodEludmVudG9yeUxheW91dFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGRvTGF5b3V0KGNvbGwpIHtcclxuICAgICAgICAvL3RoaXMuZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcclxuICAgICAgICBsZXQgc3RhcnRYID0gdGhpcy5ncm91cC5sb2NhdGlvbi54ICsgdGhpcy5ncm91cC5hY3R1YWxCb3VuZHMud2lkdGg7XHJcbiAgICAgICAgbGV0IHN0YXJ0WSA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueSArICh0aGlzLmdyb3VwLnBhcnQuYWN0dWFsQm91bmRzLmhlaWdodCArIHRoaXMuZ2V0SW52ZW50b3J5TWFyZ2luKHRoaXMuZ3JvdXApKTtcclxuICAgICAgICB0aGlzLmxheW91dE1lbWJlcnNGb3JJbnZlbnRvcnkodGhpcy5ncm91cCwgc3RhcnRYLCBzdGFydFksICdSJyk7XHJcbiAgICAgICAgLy90aGlzLmRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJJbnZlbnRvcnkgTGF5b3V0XCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5nby5EaWFncmFtLmluaGVyaXQoUmlnaHRJbnZlbnRvcnlMYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFJpZ2h0SW52ZW50b3J5TGF5b3V0OyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBMYXlvdXRzID0gcmVxdWlyZSgnLi4vTGF5b3V0cy5qcycpO1xyXG5cclxuY2xhc3MgU3RhY2tlZExheW91dCBleHRlbmRzIExheW91dHMge1xyXG4gICAgY29uc3RydWN0b3IoLi4uYXJncykge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHRvU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBcIlN0YWNrZWRMYXlvdXRcIjtcclxuICAgIH1cclxuXHJcbiAgICBkb0xheW91dChjb2xsKSB7XHJcbiAgICAgICAgdGhpcy5kaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJTdGFja2VkIExheW91dFwiKTtcclxuICAgICAgICBsZXQgbWFyZ2luID0gdGhpcy5nZXRTdGFja01hcmdpbih0aGlzLmdyb3VwKTtcclxuICAgICAgICBsZXQgc3RhcnRYID0gdGhpcy5ncm91cC5sb2NhdGlvbi54O1xyXG4gICAgICAgIGxldCBzdGFydFkgPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnkgKyAodGhpcy5ncm91cC5wYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyBtYXJnaW4gLyAyKTtcclxuICAgICAgICB0aGlzLmxheW91dE1lbWJlcnNGb3JTdGFja2VkKHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZKTtcclxuICAgICAgICB0aGlzLmRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJTdGFja2VkIExheW91dFwiKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmdvLkRpYWdyYW0uaW5oZXJpdChTdGFja2VkTGF5b3V0LCBnby5MYXlvdXQpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTdGFja2VkTGF5b3V0OyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcblxyXG5jb25zdCBDT0xPUlMgPSByZXF1aXJlKCcuLi8uLi9jb25zdGFudHMvY29sb3JzLmpzJyk7XHJcblxyXG5jb25zdCBleWVTdmdQYXRoID0gJ00gMjU2LjAwLDk2LjAwQyAxNDQuMzQxLDk2LjAwLCA0Ny41NTksMTYxLjAyMSwwLjAwLDI1Ni4wMGMgNDcuNTU5LDk0Ljk3OSwgMTQ0LjM0MSwxNjAuMDAsIDI1Ni4wMCwxNjAuMDBjIDExMS42NTcsMC4wMCwgMjA4LjQzOS02NS4wMjEsIDI1Ni4wMC0xNjAuMDAgQyA0NjQuNDQyLDE2MS4wMjEsIDM2Ny42NTcsOTYuMDAsIDI1Ni4wMCw5Ni4wMHogTSAzODIuMjI1LDE4MC44NTJjIDMwLjA4MSwxOS4xODcsIDU1LjU3MSw0NC44ODcsIDc0LjcxNyw3NS4xNDggYy0xOS4xNDYsMzAuMjYxLTQ0LjYzNyw1NS45NjEtNzQuNzE4LDc1LjE0OUMgMzQ0LjQyNywzNTUuMjU3LCAzMDAuNzc5LDM2OC4wMCwgMjU2LjAwLDM2OC4wMGMtNDQuNzgsMC4wMC04OC40MjgtMTIuNzQzLTEyNi4yMjUtMzYuODUyIEMgOTkuNjk1LDMxMS45NjIsIDc0LjIwNSwyODYuMjYyLCA1NS4wNTgsMjU2LjAwYyAxOS4xNDYtMzAuMjYyLCA0NC42MzctNTUuOTYyLCA3NC43MTctNzUuMTQ4YyAxLjk1OS0xLjI1LCAzLjkzOC0yLjQ2MSwgNS45MjktMy42NSBDIDEzMC43MjUsMTkwLjg2NiwgMTI4LjAwLDIwNS42MTMsIDEyOC4wMCwyMjEuMDBjMC4wMCw3MC42OTIsIDU3LjMwOCwxMjguMDAsIDEyOC4wMCwxMjguMDBzIDEyOC4wMC01Ny4zMDgsIDEyOC4wMC0xMjguMDBjMC4wMC0xNS4zODctMi43MjUtMzAuMTM0LTcuNzA0LTQzLjc5OSBDIDM3OC4yODYsMTc4LjM5LCAzODAuMjY1LDE3OS42MDIsIDM4Mi4yMjUsMTgwLjg1MnogTSAyNTYuMDAsMjA1LjAwYzAuMDAsMjYuNTEtMjEuNDksNDguMDAtNDguMDAsNDguMDBzLTQ4LjAwLTIxLjQ5LTQ4LjAwLTQ4LjAwcyAyMS40OS00OC4wMCwgNDguMDAtNDguMDAgUyAyNTYuMDAsMTc4LjQ5LCAyNTYuMDAsMjA1LjAweic7XHJcbmNvbnN0IGV5ZUJsb2NrZWRTdmdQYXRoID0gJ00gNDE5LjY2MSwxNDguMjA4IEMgNDU4LjQ4MywxNzUuNzIzIDQ5MC4zNDYsMjEyLjc1NCA1MTIuMDAsMjU2LjAwIEMgNDY0LjQzOSwzNTAuOTc5IDM2Ny42NTcsNDE2LjAwIDI1Ni4wMCw0MTYuMDAgQyAyMjQuNzE3LDQxNi4wMCAxOTQuNjA0LDQxMC44OTQgMTY2LjQxMSw0MDEuNDU4IEwgMjA1LjM4OSwzNjIuNDggQyAyMjEuOTE4LDM2Ni4xMyAyMzguODc1LDM2OC4wMCAyNTYuMDAsMzY4LjAwIEMgMzAwLjc3OSwzNjguMDAgMzQ0LjQyNywzNTUuMjU3IDM4Mi4yMjMsMzMxLjE0OCBDIDQxMi4zMDQsMzExLjk2IDQzNy43OTUsMjg2LjI2IDQ1Ni45NDEsMjU1Ljk5OSBDIDQzOC40MTUsMjI2LjcxNiA0MTMuOTM0LDIwMS43MjQgMzg1LjExNiwxODIuNzUyIEwgNDE5LjY2MSwxNDguMjA4IFpNIDI1Ni4wMCwzNDkuMDAgQyAyNDQuNjM4LDM0OS4wMCAyMzMuNjI0LDM0Ny41MTIgMjIzLjEzNiwzNDQuNzMzIEwgMzc5LjcyOSwxODguMTQxIEMgMzgyLjUxLDE5OC42MjcgMzg0LjAwLDIwOS42MzggMzg0LjAwLDIyMS4wMCBDIDM4NC4wMCwyOTEuNjkyIDMyNi42OTIsMzQ5LjAwIDI1Ni4wMCwzNDkuMDAgWk0gNDgwLjAwLDAuMDBsLTI2Ljg2OSwwLjAwIEwgMzQzLjMyNSwxMDkuODA2QyAzMTUuNzg3LDEwMC44NDQsIDI4Ni40NDgsOTYuMDAsIDI1Ni4wMCw5Ni4wMEMgMTQ0LjM0MSw5Ni4wMCwgNDcuNTU5LDE2MS4wMjEsMC4wMCwyNTYuMDAgYyAyMS4zMjksNDIuNTk2LCA1Mi41NjQsNzkuMTU0LCA5MC41OTcsMTA2LjUzNEwwLjAwLDQ1My4xMzFMMC4wMCw0ODAuMDAgbCAyNi44NjksMC4wMCBMIDQ4MC4wMCwyNi44NjlMIDQ4MC4wMCwwLjAwIHogTSAyMDguMDAsMTU3LjAwYyAyNC4wMjIsMC4wMCwgNDMuOTIzLDE3LjY0NywgNDcuNDQ2LDQwLjY4NSBsLTU0Ljc2Miw1NC43NjJDIDE3Ny42NDcsMjQ4LjkyMywgMTYwLjAwLDIyOS4wMjIsIDE2MC4wMCwyMDUuMDBDIDE2MC4wMCwxNzguNDksIDE4MS40OSwxNTcuMDAsIDIwOC4wMCwxNTcuMDB6IE0gNTUuMDU4LDI1Ni4wMCBjIDE5LjE0Ni0zMC4yNjIsIDQ0LjYzNy01NS45NjIsIDc0LjcxNy03NS4xNDhjIDEuOTU5LTEuMjUsIDMuOTM4LTIuNDYxLCA1LjkyOS0zLjY1QyAxMzAuNzI1LDE5MC44NjYsIDEyOC4wMCwyMDUuNjEzLCAxMjguMDAsMjIxLjAwIGMwLjAwLDI5LjI2MiwgOS44MjUsNTYuMjI0LCAyNi4zNDksNzcuNzgxbC0yOS4yNzUsMjkuMjc1QyA5Ny4wMzgsMzA5LjIzNSwgNzMuMTk3LDI4NC42NywgNTUuMDU4LDI1Ni4wMHonO1xyXG5jb25zdCBwYXBlcmNsaXBTdmdQYXRoID0gJ00gMzQ4LjkxNiwxNjMuNTI0bC0zMi40NzYtMzIuNDYxTCAxNTQuMDM1LDI5My40MzRjLTI2LjkwNywyNi44OTYtMjYuOTA3LDcwLjUyNCwwLjAwLDk3LjQyMiBjIDI2LjkwMiwyNi44OTYsIDcwLjUzLDI2Ljg5NiwgOTcuNDM3LDAuMDBsIDE5NC44ODYtMTk0Ljg1NGMgNDQuODU3LTQ0LjgzMSwgNDQuODU3LTExNy41MzEsMC4wMC0xNjIuMzYzIGMtNDQuODMzLTQ0Ljg1Mi0xMTcuNTU2LTQ0Ljg1Mi0xNjIuMzkxLDAuMDBMIDc5LjMzNSwyMzguMjEybCAwLjAxNywwLjAxNmMtMC4xNDUsMC4xNTItMC4zMDYsMC4yODgtMC40MzgsMC40MjMgYy02Mi41NTEsNjIuNTQ4LTYyLjU1MSwxNjMuOTI4LDAuMDAsMjI2LjQ1M2MgNjIuNTI3LDYyLjUyOCwgMTYzLjkzNCw2Mi41MjgsIDIyNi40OTQsMC4wMGMgMC4xMzctMC4xMzcsIDAuMjU4LTAuMjg0LCAwLjQxLTAuNDM4bCAwLjAxNiwwLjAxNyBsIDEzOS42NjYtMTM5LjY0NmwtMzIuNDkzLTMyLjQ2TCAyNzMuMzUsNDMyLjIwOGwtMC4wMDgsMC4wMCBjLTAuMTQ4LDAuMTM0LTAuMjgyLDAuMjg1LTAuNDIzLDAuNDIyIGMtNDQuNTM3LDQ0LjUyOS0xMTYuOTksNDQuNTI5LTE2MS41MzgsMC4wMGMtNDQuNTMxLTQ0LjUyMS00NC41MzEtMTE2Ljk2MSwwLjAwLTE2MS40ODljIDAuMTUyLTAuMTUyLCAwLjMwMi0wLjI5MSwgMC40NDQtMC40MjNsLTAuMDIzLTAuMDMgbCAyMDQuNjQtMjA0LjU4M2MgMjYuODU2LTI2Ljg2OSwgNzAuNTcyLTI2Ljg2OSwgOTcuNDQzLDAuMDBjIDI2Ljg1NiwyNi44NjcsIDI2Ljg1Niw3MC41NzQsMC4wMCw5Ny40MkwgMjE4Ljk5OSwzNTguMzc1IGMtOC45NjgsOC45NjEtMjMuNTI3LDguOTYxLTMyLjQ4NiwwLjAwYy04Ljk0Ny04Ljk0My04Ljk0Ny0yMy41MTYsMC4wMC0zMi40NkwgMzQ4LjkxNiwxNjMuNTI0eic7XHJcblxyXG5jbGFzcyBHcm91cFRlbXBsYXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKG1hcCkge1xyXG4gICAgICAgIHRoaXMuX21hcCA9IG1hcDtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5Hcm91cCwgZ28uUGFuZWwuVmVydGljYWwsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdsYXlvdXQnLCAnbGF5b3V0JywgKGxheW91dE5hbWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXAubGF5b3V0cy5nZXRMYXlvdXQobGF5b3V0TmFtZSk7XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnbW92YWJsZScsICcnLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIW9iai5pc0xpbmtMYWJlbDtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2lzU3ViR3JhcGhFeHBhbmRlZCcsICdzRXhwYW5kZWQnKSxcclxuICAgICAgICAgICAgLy8gZGltIHRoZSB0aGluZyBpZiBpdCdzIGJlaW5nIGRyYWdnZWQgb3ZlciBhbm90aGVyIHRoaW5nIChkcm9wIHRvIHNpc3Rlci9jaGlsZClcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChvYmouaXNTZWxlY3RlZCAmJiB0aGlzLl9tYXAudWkuZHJhZ1RhcmdldEdyb3VwID8gMC4yNSA6IDEpO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbk9iamVjdE5hbWU6ICdtYWlucGFuZWwnLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25TcG90OiBnby5TcG90LlRvcExlZnQsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25BZG9ybmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGlzU3ViR3JhcGhFeHBhbmRlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGxheWVyTmFtZTogJ0ZvcmVncm91bmQnLFxyXG4gICAgICAgICAgICAgICAgLy8gaGlnaGxpZ2h0IGNvcm5lcnNcclxuICAgICAgICAgICAgICAgIG1vdXNlRW50ZXI6IChldmVudCwgdGFyZ2V0LCBvYmoyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLnVpLm1vdXNlT3Zlckdyb3VwID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyB1bmhpZ2hsaWdodCBjb3JuZXJzXHJcbiAgICAgICAgICAgICAgICBtb3VzZUxlYXZlOiAoZXZlbnQsIHRhcmdldCwgb2JqMikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcC51aS5tb3VzZU92ZXJHcm91cCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gY29udGFpbmluZ0dyb3VwQ2hhbmdlZDogZnVuY3Rpb24ocGFydCwgb2xkZ3JvdXAsIG5ld2dyb3VwKSB7IFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkubW9kZWwuc2V0RGF0YVByb3BlcnR5KHBhcnQuZGF0YSwgJ2xldmVsJywgdGhpcy5fbWFwLmNvbXB1dGVMZXZlbChwYXJ0KSk7IFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIC8vcGFydC51cGRhdGVUYXJnZXRCaW5kaW5ncygpOyAgIFxyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5QYW5lbCwgZ28uUGFuZWwuSG9yaXpvbnRhbCxcclxuICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBFeHRlcm5hbFRleHRCbG9jayh0aGlzLl9tYXAubGF5b3V0cy5zaG93TGVmdFRleHRCbG9jaywgJ3JpZ2h0JyksXHJcbiAgICAgICAgICAgICAgICBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21haW5wYW5lbCdcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzY2FsZScsICcnLCB0aGlzLl9tYXAubGF5b3V0cy5nZXRTY2FsZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBkcmFnIGFyZWFcclxuICAgICAgICAgICAgICAgICAgICBtayhnby5TaGFwZSwgJ1JlY3RhbmdsZScsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2RyYWdhcmVhJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IENPTE9SUy5ncm91cEZpbGxDb2xvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ICdtb3ZlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hvdyBkZWJ1ZyBpbmZvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogKGV2ZW50LCB0YXJnZXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5ncm91cEluZm8odGFyZ2V0LnBhcnQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3TWFya2VyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0Fib3ZlVGFyZ2V0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0ludG9UYXJnZXQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnQmVsb3dUYXJnZXQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cEludGVybmFsVGV4dEJsb2NrKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ybmVyRCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRGbGFnTWFya2VyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ybmVyUygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNDb2xsYXBzZWRNYXJrZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3JuZXJSKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9pbnRNYXJrZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3JuZXJQKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNobWVudFBhcGVyQ2xpcCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1haW5Cb3JkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyb3VwRXh0ZXJuYWxUZXh0QmxvY2sodGhpcy5fbWFwLmxheW91dHMuc2hvd1JpZ2h0VGV4dEJsb2NrLCAnbGVmdCcpXHJcbiAgICAgICAgICAgICksXHJcblxyXG4gICAgICAgICAgICAvLyB0aGUgcGxhY2Vob2xkZXIgbm9ybWFsbHkgaG9sZHMgdGhlIGNoaWxkIG5vZGVzLCBidXQgd2UganVzdCB1c2UgYSBkdW1teSBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ3BsYWNlaG9sZGVyJyxcclxuICAgICAgICAgICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCcsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMCwgMClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdyb3VwSW5mbyhvYmopIHtcclxuICAgICAgICByZXR1cm4gb2JqLmRhdGEudGV4dCArICdcXG4nICtcclxuICAgICAgICAgICAgJ29iamVjdDogJyArIG9iaiArICdcXG4nICtcclxuICAgICAgICAgICAgJ2tleTogJyArIG9iai5kYXRhLmtleSArICdcXG4nICtcclxuICAgICAgICAgICAgJ2NvbnRhaW5pbmdHcm91cDogJyArIG9iai5jb250YWluaW5nR3JvdXAgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdsYXlvdXQ6ICcgKyBvYmoubGF5b3V0ICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnZGF0YS5sYXlvdXQ6ICcgKyBvYmouZGF0YS5sYXlvdXQgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdwb3NpdGlvbjogJyArIHBhcnNlSW50KG9iai5wb3NpdGlvbi54LCAxMCkgKyAnLCAnICsgcGFyc2VJbnQob2JqLnBvc2l0aW9uLnksIDEwKSArICdcXG4nICtcclxuICAgICAgICAgICAgJ2ZyZWVoYW5kIHBvc2l0aW9uIChkYXRhLmxvYyk6ICcgKyBnby5Qb2ludC5wYXJzZShvYmouZGF0YS5sb2MpICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnd2lkdGgvaGVpZ2h0OiAnICsgcGFyc2VJbnQob2JqLmFjdHVhbEJvdW5kcy53aWR0aCwgMTApICsgJy8nICsgcGFyc2VJbnQob2JqLmFjdHVhbEJvdW5kcy5oZWlnaHQsIDEwKSArICdcXG4nICtcclxuICAgICAgICAgICAgJ2dldFNjYWxlKCk6ICcgKyB0aGlzLl9tYXAubGF5b3V0cy5nZXRTY2FsZShvYmopICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnaXNMaW5rTGFiZWw6ICcgKyBvYmouZGF0YS5pc0xpbmtMYWJlbCArICdcXG4nICtcclxuICAgICAgICAgICAgJ2xhYmVsZWRMaW5rOiAnICsgb2JqLmxhYmVsZWRMaW5rICsgJ1xcbic7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUCB2aWV3IGluZGljYXRvclxyXG4gICAgdmlld01hcmtlcigpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsICdCb3JkZXInLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2ZpbGwnLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Vmlld01hcmtlckZpbGwob2JqKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMTgsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXdNYXJrZXJGaWxsKG9iaikge1xyXG4gICAgICAgIGxldCB3ZWlnaHQgPSB0aGlzLl9tYXAucGVyc3BlY3RpdmVzLmdldFBlcnNwZWN0aXZlVmlld1dlaWdodChvYmopO1xyXG5cclxuICAgICAgICBpZiAod2VpZ2h0ID09PSAzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDT0xPUlMuY29sb3JQRGFyaztcclxuICAgICAgICB9IGVsc2UgaWYgKHdlaWdodCA9PT0gMikge1xyXG4gICAgICAgICAgICByZXR1cm4gQ09MT1JTLmNvbG9yUDtcclxuICAgICAgICB9IGVsc2UgaWYgKHdlaWdodCA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gQ09MT1JTLmNvbG9yUExpZ2h0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAndHJhbnNwYXJlbnQnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gdGFyZ2V0cyBmb3IgZHJhZ2dpbmcgdG8gRCBvciBTIC0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBkcmFnQWJvdmVUYXJnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbiwge1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IDI1LFxyXG4gICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogdGhpcy5nZXRHcm91cE1vdXNlRHJhZ0VudGVySGFuZGxlcih0aGlzLl9tYXAuTEVGVCksXHJcbiAgICAgICAgICAgIG1vdXNlRHJhZ0xlYXZlOiAoLi4uYXJncykgPT4geyB0aGlzLmdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyKC4uLmFyZ3MpOyB9LFxyXG4gICAgICAgICAgICBtb3VzZURyb3A6IHRoaXMuZ2V0R3JvdXBNb3VzZURyb3BIYW5kbGVyKHRoaXMuX21hcC5MRUZUKSxcclxuICAgICAgICAgICAgY2xpY2s6ICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cENsaWNrSGFuZGxlciguLi5hcmdzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gZHJhZyB0YXJnZXQgcmVnaW9uXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCAnUmVjdGFuZ2xlJywge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMjUsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAvLyBkcmFnIGluZGljYXRvciBiYXJcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsICdCb3JkZXInLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihvYmoucGFydCwgdGhpcy5fbWFwLkxFRlQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJyMwMDAnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYWdJbnRvVGFyZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sIHtcclxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAyNSksXHJcbiAgICAgICAgICAgIGhlaWdodDogNTAsXHJcbiAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgIG1vdXNlRHJhZ0VudGVyOiB0aGlzLmdldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKG51bGwpLFxyXG4gICAgICAgICAgICBtb3VzZURyYWdMZWF2ZTogKC4uLmFyZ3MpID0+IHsgdGhpcy5ncm91cE1vdXNlRHJhZ0xlYXZlSGFuZGxlciguLi5hcmdzKTsgfSxcclxuICAgICAgICAgICAgbW91c2VEcm9wOiB0aGlzLmdldEdyb3VwTW91c2VEcm9wSGFuZGxlcihudWxsKSxcclxuICAgICAgICAgICAgY2xpY2s6ICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyb3VwQ2xpY2tIYW5kbGVyKC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCAnUmVjdGFuZ2xlJywge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNTAsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmFnQmVsb3dUYXJnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbiwge1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDc1KSxcclxuICAgICAgICAgICAgaGVpZ2h0OiAyNSxcclxuICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgbW91c2VEcmFnRW50ZXI6IHRoaXMuZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIodGhpcy5fbWFwLlJJR0hUKSxcclxuICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6ICguLi5hcmdzKSA9PiB7IHRoaXMuZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIoLi4uYXJncyk7IH0sXHJcbiAgICAgICAgICAgIG1vdXNlRHJvcDogdGhpcy5nZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIodGhpcy5fbWFwLlJJR0hUKSxcclxuICAgICAgICAgICAgY2xpY2s6ICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyb3VwQ2xpY2tIYW5kbGVyKC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGRyYWcgdGFyZ2V0IHJlZ2lvblxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgJ1JlY3RhbmdsZScsIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50J1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgLy8gZHJhZyBpbmRpY2F0b3IgYmFyXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCAnQm9yZGVyJyxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2Yob2JqLnBhcnQsIHRoaXMuX21hcC5SSUdIVCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMTUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJyMwMDAnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgdGhlIFRleHRCbG9jayBmb3IgdGhlIGdyb3VwIHRpdGxlLCBmb3IgdXNlIGluIHRoZSBtYWluIGdyb3VwIHRlbXBsYXRlLCBpbnNpZGUgdGhlIGJveC5cclxuICAgIGdyb3VwSW50ZXJuYWxUZXh0QmxvY2soKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Ib3Jpem9udGFsLCB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMClcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygndGV4dCcsICd0ZXh0JykubWFrZVR3b1dheSgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgKGdyb3VwKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWx3YXlzIHNob3cgdGV4dCBpbnNpZGUgYm94IGZvciBSLXRoaW5ncywgYmVjYXVzZSBleHRlcm5hbCB0ZXh0IHdpbGwgdGhyb3cgb2ZmIGxheW91dFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXAubGF5b3V0cy5pc05vdFdpdGhpbkludmVudG9yeUxheW91dChncm91cCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLmxheW91dHMuaXNSVGhpbmdXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApO1xyXG4gICAgICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiA4MCxcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5DZW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ICdtb3ZlJyxcclxuICAgICAgICAgICAgICAgICAgICBmb250OiAnMTBweCBzYW5zLXNlcmlmJyxcclxuICAgICAgICAgICAgICAgICAgICBpc011bHRpbGluZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB3cmFwOiBnby5UZXh0QmxvY2suV3JhcERlc2lyZWRTaXplLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogdGhpcy5nZXRHcm91cE1vdXNlRHJhZ0VudGVySGFuZGxlcihudWxsKSxcclxuICAgICAgICAgICAgICAgICAgICBtb3VzZURyYWdMZWF2ZTogKC4uLmFyZ3MpID0+IHsgdGhpcy5ncm91cE1vdXNlRHJhZ0xlYXZlSGFuZGxlciguLi5hcmdzKTsgfSxcclxuICAgICAgICAgICAgICAgICAgICBtb3VzZURyb3A6IHRoaXMuZ2V0R3JvdXBNb3VzZURyb3BIYW5kbGVyKG51bGwpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiAoLi4uYXJncykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwQ2xpY2tIYW5kbGVyKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dENsaWNrOiAoZXZlbnQsIHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5ncm91cEluZm8odGFyZ2V0LnBhcnQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJucyBhIFRleHRCbG9jayBmb3IgdGhlIGdyb3VwIHRpdGxlLCBmb3IgdXNlIGluIHRoZSBtYWluIGdyb3VwIHRlbXBsYXRlLCBvbiB0aGUgbGVmdCBvciByaWdodC5cclxuICAgIC8vIHZpc2libGVGbiBpcyBhIGNhbGxiYWNrIHRvIGJlIGJvdW5kIHRvIHRoZSB2aXNpYmlsaXR5IGF0dHJpYnV0ZSBvZiB0aGUgVGV4dEJsb2NrLlxyXG4gICAgLy8gdGV4dEFsaWduIGlzICdsZWZ0JyBvciAncmlnaHQnLlxyXG4gICAgZ3JvdXBFeHRlcm5hbFRleHRCbG9jayh2aXNpYmxlRm4sIHRleHRBbGlnbikge1xyXG4gICAgICAgIHJldHVybiBtayhnby5UZXh0QmxvY2ssXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd0ZXh0JywgJ3RleHQnKS5tYWtlVHdvV2F5KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIHZpc2libGVGbikub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3NjYWxlJywgJycsIHRoaXMuX21hcC5sYXlvdXRzLmdldEV4dGVybmFsVGV4dFNjYWxlKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnZXh0ZXJuYWx0ZXh0LScgKyB0ZXh0QWxpZ24sIC8vIE5COiB0aGlzIHNjcmV3cyB1cCBsYXlvdXRzIGZvciBzb21lIHJlYXNvbiAtID8/XHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IHRleHRBbGlnbixcclxuICAgICAgICAgICAgICAgIG1hcmdpbjogNSxcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICcxMHB4IHNhbnMtc2VyaWYnLFxyXG4gICAgICAgICAgICAgICAgaXNNdWx0aWxpbmU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjbGljazogKC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwQ2xpY2tIYW5kbGVyKC4uLmFyZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIGhhbmRsZXJzIGZvciBtb3VzZSBkcmFnL2Ryb3AgYWN0aW9ucyBvbiBncm91cHMsIHdoaWNoIG5lZWQgdG8gYmUgcmVwbGljYXRlZCBvbiBkaWZmZXJlbnQgdGFyZ2V0IHBhcnRzIC0tLS0tLS1cclxuXHJcbiAgICAvLyBwb3NpdGlvbiBpcyB0aGlzLl9tYXAuTEVGVCwgbnVsbCwgb3IgdGhpcy5fbWFwLlJJR0hUXHJcbiAgICBnZXRHcm91cE1vdXNlRHJhZ0VudGVySGFuZGxlcihwb3NpdGlvbikge1xyXG4gICAgICAgIHJldHVybiAoZXZlbnQsIHRhcmdldCwgb2JqMikgPT4ge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtb3VzZURyYWdFbnRlciwgZS5kcDogJyArIGV2ZW50LmRvY3VtZW50UG9pbnQgKyAnLCB0YXJnZXQucGFydDogJyArIHRhcmdldC5wYXJ0ICsgJywgdGFyZ2V0IGJvdW5kczogJyArIHRhcmdldC5hY3R1YWxCb3VuZHMpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXAudWkuZHJhZ1RhcmdldEdyb3VwID0gdGFyZ2V0LnBhcnQ7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC51aS5kcmFnVGFyZ2V0UG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIoZXZlbnQsIHRhcmdldCwgb2JqMikge1xyXG4gICAgICAgIHRoaXMuX21hcC51aS5kcmFnVGFyZ2V0R3JvdXAgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX21hcC51aS5kcmFnVGFyZ2V0UG9zaXRpb24gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIocG9zaXRpb24pIHtcclxuICAgICAgICByZXR1cm4gKGV2ZW50LCBkcm9wVGFyZ2V0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlR3JvdXBNb3VzZURyb3AoZXZlbnQsIGRyb3BUYXJnZXQsIHBvc2l0aW9uKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGdyb3VwQ2xpY2tIYW5kbGVyKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAvLyBoYW5kbGUgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xyXG4gICAgICAgIHRoaXMuX21hcC51aS5oYW5kbGVDb3JuZXJDbGljaygnJywgdGFyZ2V0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBoYW5kbGUgZHJvcCBvbiBvbmUgb2YgdGhlIHRocmVlIHRhcmdldCByZWdpb25zICh0b3AsIG1pZGRsZSwgYm90dG9tKVxyXG4gICAgLy8gc2lkZSBpcyB0aGlzLl9tYXAuTEVGVCBvciB0aGlzLl9tYXAuUklHSFRcclxuICAgIGhhbmRsZUdyb3VwTW91c2VEcm9wKGV2ZW50LCBkcm9wVGFyZ2V0LCBzaWRlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZHJhZ0Fib3ZlVGFyZ2V0Lm1vdXNlRHJvcCwgdGFyZ2V0OiAnICsgZHJvcFRhcmdldCArICcsIHBhcnQ6ICcgKyBkcm9wVGFyZ2V0IC5wYXJ0ICsgJywgc2hvdzogJyArIHNob3cpO1xyXG4gICAgICAgIGlmIChzaWRlICYmIHRoaXMuY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKGRyb3BUYXJnZXQucGFydCwgc2lkZSwgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmFkZFNlbGVjdGVkVGhpbmdBc09yZGVyZWRTaXN0ZXJPZihkcm9wVGFyZ2V0LnBhcnQsIHNpZGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVTaXN0ZXJzT2YoZHJvcFRhcmdldC5wYXJ0LCB0cnVlKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9tYXAuYWRkU2VsZWN0ZWRUaGluZ3NBc1Npc3RlcnNPZihkcm9wVGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVDaGlsZHJlbk9mKGRyb3BUYXJnZXQucGFydCwgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmFkZFNlbGVjdGVkVGhpbmdzQXNDaGlsZHJlbk9mKGRyb3BUYXJnZXQucGFydCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gTkI6IHRoZXNlIGFyZSBoZXJlIGJlY2F1c2UgdGhleSBhcmUgYWJvdXQgY29sb3JzOyBcclxuICAgIC8vIHNpbWlsYXIgZnVuY3Rpb25zIHRoYXQgYXJlIHNjYWxlLXJlbGF0ZWQgYXJlIGluIGxheW91dHMuanMuLi5cclxuICAgIGdldEdyb3VwU2VsZWN0aW9uU3Ryb2tlKG9iaikge1xyXG4gICAgICAgIGlmIChvYmouaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWFwLnBlcnNwZWN0aXZlcy5pc0luUEVkaXRvck1vZGUoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBDT0xPUlMuY29sb3JQO1xyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9tYXAucGVyc3BlY3RpdmVzLmlzSW5ERWRpdG9yTW9kZSgpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENPTE9SUy5jb2xvckQ7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJldHVybiBDT0xPUlMud2hpdGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIENPTE9SUy53aGl0ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT0ssIHRoaXMgaXNuJ3QgYWJvdXQgY29sb3JzLCBidXQgaXQgd2FudHMgdG8gYmUgbmVhciB0aGUgb25lIGFib3ZlLi4uXHJcbiAgICBnZXRHcm91cFNlbGVjdGlvblN0cm9rZVdpZHRoKG9iaikge1xyXG4gICAgICAgIHJldHVybiAob2JqLmlzU2VsZWN0ZWQgPyAzIDogMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBjYWxsYmFja3MgdG8gZGV0ZXJtaW5lIHdoZW4gdGhlIGNvcm5lcnMgc2hvdWxkIGJlIHZpc2libGVcclxuXHJcbiAgICBzaG93RENvcm5lcihncm91cCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9tYXAucGVyc3BlY3RpdmVzLmlzREVkaXRvclRoaW5nKGdyb3VwKSkgeyAvLyBtYXJrIGRpc3RpbmN0aW9uIHRoaW5nXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fbWFwLnBlcnNwZWN0aXZlcy5pc0luUE9yREVkaXRvck1vZGUoKSkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGluIFAvRCBlZGl0b3IgbW9kZVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9tYXAucHJlc2VudGVyLmlzQ3JlYXRpbmdUaHVtYm5haWwpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBjYXB0dXJpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKGdyb3VwID09PSB0aGlzLl9tYXAudWkubW91c2VPdmVyR3JvdXApIHx8IC8vIHNob3cgY29ybmVycyBvbiBtb3VzZW92ZXJcclxuICAgICAgICAgICAgICAgICgvKnRoaXMuaXNUb3VjaERldmljZSgpICYmKi8gZ3JvdXAuaXNTZWxlY3RlZCkgfHxcclxuICAgICAgICAgICAgICAgICh0aGlzLmNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZVNpc3RlcnNPZihncm91cCwgZmFsc2UpICYmIC8vIGRyYWcgdG8gRCAobWFrZSBpdCBzaXN0ZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgICghdGhpcy5fbWFwLnVpLmRyYWdUYXJnZXRQb3NpdGlvbiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbm5vdERyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihncm91cCkpKTsgLy8gbm90IHNob3dpbmcgZHJhZyBhYm92ZS9iZWxvdyBpbmRpY2F0b3JzXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3dTQ29ybmVyKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX21hcC5wZXJzcGVjdGl2ZXMuaXNJblBPckRFZGl0b3JNb2RlKCkpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBpbiBQL0QgZWRpdG9yIG1vZGVcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fbWFwLnByZXNlbnRlci5pc0NyZWF0aW5nVGh1bWJuYWlsKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgY2FwdHVyaW5nIHRodW1ibmFpbFxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChncm91cCA9PT0gdGhpcy5fbWFwLnVpLm1vdXNlT3Zlckdyb3VwKSB8fCAvLyBzaG93IGNvcm5lcnMgb24gbW91c2VvdmVyXHJcbiAgICAgICAgICAgICAgICAoLyokc2NvcGUuaXNUb3VjaERldmljZSgpICYmKi8gZ3JvdXAuaXNTZWxlY3RlZCkgfHxcclxuICAgICAgICAgICAgICAgICh0aGlzLmNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZUNoaWxkcmVuT2YoZ3JvdXAsIGZhbHNlKSAmJiAvLyBkcmFnIHRvIFMgKG1ha2UgaXQgY2hpbGRyZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgKCF0aGlzLl9tYXAudWkuZHJhZ1RhcmdldFBvc2l0aW9uIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2Fubm90RHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKGdyb3VwKSkpOyAvLyBub3Qgc2hvd2luZyBkcmFnIGFib3ZlL2JlbG93IGluZGljYXRvcnNcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1JDb3JuZXIoZ3JvdXApIHtcclxuICAgICAgICBpZiAodGhpcy5fbWFwLnBlcnNwZWN0aXZlcy5pc0luUE9yREVkaXRvck1vZGUoKSkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGluIFAvRCBlZGl0b3IgbW9kZVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9tYXAucHJlc2VudGVyLmlzQ3JlYXRpbmdUaHVtYm5haWwpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBjYXB0dXJpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JvdXAgPT09IHRoaXMuX21hcC51aS5tb3VzZU92ZXJHcm91cCB8fFxyXG4gICAgICAgICAgICAgICAgKC8qJHNjb3BlLmlzVG91Y2hEZXZpY2UoKSAmJiovIGdyb3VwLmlzU2VsZWN0ZWQpOyAvLyBzaG93IGNvcm5lcnMgb24gbW91c2VvdmVyXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3dQQ29ybmVyKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX21hcC5wZXJzcGVjdGl2ZXMuaXNQRWRpdG9yUG9pbnQoZ3JvdXApKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBtYXJrIHBlcnNwZWN0aXZlIHBvaW50XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9tYXAucGVyc3BlY3RpdmVzLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgaW4gUC9EIGVkaXRvciBtb2RlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX21hcC5wcmVzZW50ZXIuaXNDcmVhdGluZ1RodW1ibmFpbCkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGNhcHR1cmluZyB0aHVtYm5haWxcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBncm91cCA9PT0gdGhpcy5fbWFwLnVpLm1vdXNlT3Zlckdyb3VwIHx8XHJcbiAgICAgICAgICAgICAgICAoLyokc2NvcGUuaXNUb3VjaERldmljZSgpICYmKi8gZ3JvdXAuaXNTZWxlY3RlZCk7IC8vIHNob3cgY29ybmVycyBvbiBtb3VzZW92ZXJcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1BEb3QgKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gdGhpcy5fbWFwLnVpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5wZXJzcGVjdGl2ZU1vZGUgIT0gJ2JvdGgnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoZXNlIGZ1bmN0aW9ucyBhcmUgdXNlZCBpbiB0d28gbW9kZXM6XHJcbiAgICAvLyAxLiB3aXRoIGlzRHJvcHBpbmcgPT0gZmFsc2UsIHRvIGhpZ2hsaWdodCBkcm9wIHRhcmdldHMgYmFzZWQgb24gdGhpcy5fbWFwLnVpLmRyYWdUYXJnZXRHcm91cCBhbmQgdGhpcy5fbWFwLnVpLmRyYWdUYXJnZXRQb3NpdGlvbixcclxuICAgIC8vICAgIHdoaWNoIGFyZSBzZXQgb24gbW91c2VEcmFnRW50ZXIvbW91c2VEcmFnbGVhdmVcclxuICAgIC8vIDIuIHdpdGggaXNEcm9wcGluZyA9PSB0cnVlLCBvbiBkcm9wLCB3aGVuIHRoZSBhYm92ZSBpbmRpY2F0b3JzIGhhdmUgZ29uZSBhd2F5LCBidXQgd2Uga25vdyB3aGF0IHRoZSBkcm9wcGVkXHJcbiAgICAvLyAgICBhbmQgdGFyZ2V0IGdyb3VwcyBhcmUsIGFuZCB3ZSB3YW50IHRvIGtub3cgd2hhdCB0aGUgZHJvcCBzaG91bGQgZG8uXHJcblxyXG4gICAgY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lU2lzdGVyc09mKGdyb3VwLCBpc0Ryb3BwaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIChncm91cCA9PT0gdGhpcy5fbWFwLnVpLmRyYWdUYXJnZXRHcm91cCB8fCBpc0Ryb3BwaW5nKSAmJlxyXG4gICAgICAgICAgICB0aGlzLl9tYXAudGhpbmdzU2VsZWN0ZWRBcmVEZXNjZW5kYW50c09mKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVDaGlsZHJlbk9mKGdyb3VwLCBpc0Ryb3BwaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIChncm91cCA9PT0gdGhpcy5fbWFwLnVpLmRyYWdUYXJnZXRHcm91cCB8fCBpc0Ryb3BwaW5nKSAmJlxyXG4gICAgICAgICAgICAhdGhpcy5fbWFwLnRoaW5nc1NlbGVjdGVkSW5jbHVkZVNsaWRlKCkgJiZcclxuICAgICAgICAgICAgIXRoaXMuX21hcC50aGluZ3NTZWxlY3RlZEFyZURlc2NlbmRhbnRzT2YoZ3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNpZGUgaXMgdGhpcy5fbWFwLkxFRlQgb3IgdGhpcy5fbWFwLlJJR0hUXHJcbiAgICBjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YodGFyZ2V0R3JvdXAsIHNpZGUsIGlzRHJvcHBpbmcpIHtcclxuICAgICAgICAvLyBtdXN0IGJlIGRyYWdnaW5nIHNpbmdsZSBncm91cFxyXG4gICAgICAgIGxldCBkcmFnZ2VkR3JvdXAgPSB0aGlzLl9tYXAuZ2V0VW5pcXVlVGhpbmdTZWxlY3RlZCgpO1xyXG4gICAgICAgIGlmICghZHJhZ2dlZEdyb3VwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRyYWdnZWQgYW5kIHRhcmdldCBtdXN0IGJlIFNpc3RlcnMgaW4gaW52ZW50b3J5IGxheW91dFxyXG4gICAgICAgIHJldHVybiAodGFyZ2V0R3JvdXAgPT09IHRoaXMuX21hcC51aS5kcmFnVGFyZ2V0R3JvdXAgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgKHRoaXMuX21hcC51aS5kcmFnVGFyZ2V0UG9zaXRpb24gPT09IHNpZGUgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmxheW91dHMuYXJlU2lzdGVyc0luSW52ZW50b3J5TGF5b3V0KGRyYWdnZWRHcm91cCwgdGFyZ2V0R3JvdXApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjYW5ub3REcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YodGFyZ2V0R3JvdXApIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKHRhcmdldEdyb3VwLCB0aGlzLl9tYXAuTEVGVCkgJiZcclxuICAgICAgICAgICAgIXRoaXMuY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKHRhcmdldEdyb3VwLCB0aGlzLl9tYXAuUklHSFQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0gY29tcG9uZW50cyBmb3IgbWFpbiBncm91cCB0ZW1wbGF0ZSAtLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBkRmxhZ01hcmtlcigpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdmaWxsJywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmouZGF0YS5kZmxhZyA/ICcjMDAwJyA6IG51bGw7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdkZmxhZycsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDE4LCAxOCksXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoJ0YgTTAgMSBMMCAxOCBMMTggMCBMMSAweicsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vICdEJyBjb3JuZXIgKHRvcCBsZWZ0LCByZWQpXHJcbiAgICBjb3JuZXJEKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAodGhpcy5zaG93RENvcm5lcihvYmopID8gMSA6IDApO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnY29ybmVyRCcsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUwLCA1MCksXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUwLCA1MCksXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoJ0YgTTAgMSBMMCA1MCBMNTAgMCBMMSAweicsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogQ09MT1JTLmNvbG9yRCxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICAgICAgICAgICAgY2xpY2s6IChldmVudCwgdGFyZ2V0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY2xpY2ssIGNvbnRyb2w6JyArIGV2ZW50LmNvbnRyb2wgKyAnLCBhbHQ6JyArIGV2ZW50LmFsdCArICcsIG1ldGE6JyArIGV2ZW50Lm1ldGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5hbHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTkI6IGEgc2lkZSBlZmZlY3Qgb2YgdGhpcyB3aWxsIGJlIHRvIHNlbGVjdCBqdXN0IHRoaXMgZ3JvdXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoaWNoIHdvdWxkIG5vdCBoYXBwZW4gb3RoZXJ3aXNlIHZpYSBjb250cm9sLWNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcC5wZXJzcGVjdGl2ZXMuc2V0REVkaXRvclRoaW5nKHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXAudWkuaGFuZGxlQ29ybmVyQ2xpY2soJ0QnLCB0YXJnZXQucGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogKGV2ZW50LCB0YXJnZXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjb250ZXh0Q2xpY2s6JyArIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXAudG9nZ2xlREZsYWcodGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnRCcsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICd3aGl0ZScsXHJcbiAgICAgICAgICAgICAgICBmb250OiAnOXB4IHNhbnMtc2VyaWYnLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgxMiwgMTUpLFxyXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAnUycgY29ybmVyIChib3R0b20gbGVmdCwgZ3JlZW4pXHJcbiAgICBjb3JuZXJTKCkge1xyXG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuc2hvd1NDb3JuZXIob2JqKSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2Nvcm5lclMnLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCA1MCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNTAsIDUwKSxcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNTAsIDUwKSxcclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBnby5HZW9tZXRyeS5wYXJzZSgnRiBNMCAwIEwwIDQ5IEwxIDUwIEw1MCA1MHonLCB0cnVlKSxcclxuICAgICAgICAgICAgICAgIGZpbGw6IENPTE9SUy5jb2xvclMsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkgeyBcclxuICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX21hcC51aS5oYW5kbGVDb3JuZXJDbGljaygnUycsIHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIC8vIGV4cGFuc2lvbiBpbmRpY2F0b3JcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygncG9zaXRpb24nLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAob2JqLmlzU3ViR3JhcGhFeHBhbmRlZCA/IG5ldyBnby5Qb2ludCg0LCA0MykgOiBuZXcgZ28uUG9pbnQoNSwgMzgpKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnYW5nbGUnLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAob2JqLmlzU3ViR3JhcGhFeHBhbmRlZCA/IDkwIDogMCk7XHJcbiAgICAgICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUsIDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoJ0YgTTAgMCBMNSA1IEwwIDEweicsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6ICcjMzMzJyxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogJ1MnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiAnd2hpdGUnLFxyXG4gICAgICAgICAgICAgICAgZm9udDogJzlweCBzYW5zLXNlcmlmJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMTIsIDI4KSxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2hvdyBvbmx5IHdoZW4gc3lzdGVtIGlzIGNvbGxhcHNlZFxyXG4gICAgc0NvbGxhcHNlZE1hcmtlcigpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhdGhpcy5zaG93U0Nvcm5lcihvYmopICYmIG9iai5tZW1iZXJQYXJ0cy5jb3VudCA+IDAgJiYgIW9iai5pc1N1YkdyYXBoRXhwYW5kZWQ7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoNSwgODgpLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUsIDEwKSxcclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBnby5HZW9tZXRyeS5wYXJzZSgnRiBNMCAwIEw1IDUgTDAgMTB6JywgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAnIzMzMycsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gJ1InIGNvcm5lciAoYm90dG9tIHJpZ2h0LCBibHVlKVxyXG4gICAgY29ybmVyUigpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuc2hvd1JDb3JuZXIob2JqKSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2Nvcm5lclInLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnY29ybmVyUlNoYXBlJyxcclxuICAgICAgICAgICAgICAgIC8vIE5COiB0aGlzIGNvcm5lciBpcyBkb25lIGRpZmZlcmVudGx5IGZyb20gdGhlIG90aGVyczpcclxuICAgICAgICAgICAgICAgIC8vIDEuIHRoZSBvdmVyYWxsIHNoYXBlIGlzIHRoZSBzaXplIG9mIHRoZSB3aG9sZSBzcXVhcmUsIHNvIHRoZSBwb3J0IGZhbGxzIGluIHRoZSBtaWRkbGUgaW5zdGVhZCBvZiB0aGUgY29ybmVyO1xyXG4gICAgICAgICAgICAgICAgLy8gMi4gdGhlIGdlb21ldHJ5IHRyYWNlcyBhcm91bmQgdGhlIGVkZ2VzIG9mIHRoZSB3aG9sZSBzcXVhcmUsIGJlY2F1c2Ugb3RoZXJ3aXNlIHRoZSBsaW5rIGxpbmUgd2lsbFxyXG4gICAgICAgICAgICAgICAgLy8gICAgc2hvdyBpbnNpZGUgdGhlIG1haW4gc3F1YXJlIGlmIGl0J3MgY3Jvc3Npbmcgb25lIG9mIHRoZSBvdGhlciAzIHF1YWRyYW50cyBcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMTAwLCAxMDApLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKCdGJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ00wIDAgTDAgMTAwICcgKyAvLyB0b3AgbGVmdCB0byBib3R0b20gbGVmdFxyXG4gICAgICAgICAgICAgICAgICAgICdMOTkgMTAwIEwxMDAgOTkgTCAxMDAgMCAnICsgLy8gYm90dG9tL3JpZ2h0IHNpZGVzIChyb3VuZCBib3R0b20gcmlnaHQgY29ybmVyKVxyXG4gICAgICAgICAgICAgICAgICAgICdMIDAgMCBMIDEwMCAwICcgKyAvLyBiYWNrIHRvIHRvcCBsZWZ0IHRoZW4gdG9wIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgJ0wgMTAwIDUwIEwgNTAgMTAwICcgKyAvLyB0byBtaWRwb2ludCBvZiByaWdodCBzaWRlLCBtaWRwb2ludCBvZiBib3R0b20gc2lkZVxyXG4gICAgICAgICAgICAgICAgICAgICdMMCAxMDB6JywgLy8gYm90dG9tIGxlZnQsIHJldHVybiBob21lXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBDT0xPUlMuY29sb3JSLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcblxyXG4gICAgICAgICAgICAgICAgcG9ydElkOiAnUicsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlRHVwbGljYXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiAoZXZlbnQsIHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLnVpLmhhbmRsZUNvcm5lckNsaWNrKCdSJywgdGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnUicsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICd3aGl0ZScsXHJcbiAgICAgICAgICAgICAgICBmb250OiAnOXB4IHNhbnMtc2VyaWYnLFxyXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg4MiwgNzgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBhdHRhY2htZW50UGFwZXJDbGlwKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5kYXRhLmF0dGFjaG1lbnRzICYmIG9iai5kYXRhLmF0dGFjaG1lbnRzICE9PSB1bmRlZmluZWQgJiYgb2JqLmRhdGEuYXR0YWNobWVudHMubGVuZ3RoID4gMDtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2dlb21ldHJ5JywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnby5HZW9tZXRyeS5wYXJzZShwYXBlcmNsaXBTdmdQYXRoLCB0cnVlKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2Rlc2lyZWRTaXplJywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZ28uU2l6ZSg1MTIsIDUxMik7IC8vIE5COiB0aGUgdHdvIGljb25zIGRvbid0IHNjYWxlIHRvIHRoZSBzYW1lIHByb3BvcnRpb25zIGZvciBzb21lIHJlYXNvbiAtID8/XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoNDYsIDg1KSxcclxuICAgICAgICAgICAgICAgIHNjYWxlOiAwLjAyLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMCcsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAnIzAwMCcsXHJcbiAgICAgICAgICAgICAgICBjbGljazogKGV2ZW50LCB0YXJnZXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpcCBjbGlja2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLnVpLnRvZ2dsZVRhYih0aGlzLl9tYXAudWkuVEFCX0lEX0FUVEFDSE1FTlRTKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcEV5ZWJhbGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwLnBlcnNwZWN0aXZlcy5pc1BlcnNwZWN0aXZlUG9pbnQob2JqKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2dlb21ldHJ5JywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnby5HZW9tZXRyeS5wYXJzZSh0aGlzLl9tYXAucElzRXhwYW5kZWQob2JqKSA/IGV5ZVN2Z1BhdGggOiBleWVCbG9ja2VkU3ZnUGF0aCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdkZXNpcmVkU2l6ZScsICcnLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGdvLlNpemUoNTEyLCB0aGlzLl9tYXAucElzRXhwYW5kZWQob2JqKSA/IDQ0MCA6IDUxMik7IC8vIE5COiB0aGUgdHdvIGljb25zIGRvbid0IHNjYWxlIHRvIHRoZSBzYW1lIHByb3BvcnRpb25zIGZvciBzb21lIHJlYXNvbiAtID8/XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoODcsIDQpLFxyXG4gICAgICAgICAgICAgICAgc2NhbGU6IDAuMDIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwJyxcclxuICAgICAgICAgICAgICAgIGZpbGw6ICcjMDAwJyxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQIGV4cGFuc2lvbiBpbmRpY2F0b3IgLSB0aGlzIHNob3dzIHdoZW4gdGhlIFAgY29ybmVyIGlzIG5vdCB2aXNpYmxlLCBhbmQgb25seSBpZiB0aGUgdGhpbmcgaXMgYSBwZXJzcGVjdGl2ZSBwb2ludFxyXG4gICAgcG9pbnRNYXJrZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucEV5ZWJhbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAnUCcgY29ybmVyICh0b3AgcmlnaHQsIG9yYW5nZSlcclxuICAgIGNvcm5lclAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLnNob3dQQ29ybmVyKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdjb3JuZXJQJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMTAwLCAxMDApLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2Nvcm5lclBTaGFwZScsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDEwMCwgMTAwKSxcclxuICAgICAgICAgICAgICAgIC8vIE5COiB0aGlzIGdlb21ldHJ5IGNvdmVycyB0aGUgd2hvbGUgc3F1YXJlOyBzZWUgbm90ZSBhYm92ZSBmb3IgY29ybmVyUlxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKCdGJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ00wIDAgTDAgMTAwIEwxMDAgMTAwJyArIC8vIHRvcCBsZWZ0IHRvIGJvdHRvbSBsZWZ0IHRvIGJvdHRvbSByaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICdMMTAwIDEgTDk5IDAgTDAgMCcgKyAvLyByaWdodC90b3Agc2lkZXMgKHJvdW5kIHRvcCByaWdodCBjb3JuZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgJ0wgNTAgMCBMIDEwMCA1MCAnICsgLy8gdG8gbWlkcG9pbnQgb2YgdG9wIHNpZGUsIG1pZHBvaW50IG9mIHJpZ2h0IHNpZGVcclxuICAgICAgICAgICAgICAgICAgICAnTDEwMCAxMDAgMCAxMDB6JywgLy8gYm90dG9tIHJpZ2h0LCBib3R0b20gbGVmdCwgcmV0dXJuIGhvbWVcclxuICAgICAgICAgICAgICAgICAgICB0cnVlKSxcclxuXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBDT0xPUlMuY29sb3JQLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcblxyXG4gICAgICAgICAgICAgICAgcG9ydElkOiAnUCcsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVEdXBsaWNhdGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlU2VsZk5vZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZUR1cGxpY2F0ZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdG9NYXhMaW5rczogMSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiAoZXZlbnQsIHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLnVpLmhhbmRsZUNvcm5lckNsaWNrKCdQJywgdGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgdGhpcy5wRXllYmFsbCgpLCAvLyBQIGV4cGFuc2lvbiBpbmRpY2F0b3JcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnUCcsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICd3aGl0ZScsXHJcbiAgICAgICAgICAgICAgICBmb250OiAnOXB4IHNhbnMtc2VyaWYnLFxyXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg4MSwgMTUpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBtYWluQm9yZGVyKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSwgJ0JvcmRlcicsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgdGhpcy5nZXRHcm91cFNlbGVjdGlvblN0cm9rZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3N0cm9rZVdpZHRoJywgJycsIHRoaXMuZ2V0R3JvdXBTZWxlY3Rpb25TdHJva2VXaWR0aCkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ21haW5hcmVhJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgLy9wb3J0SWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlRHVwbGljYXRlczogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHcm91cFRlbXBsYXRlOyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcblxyXG5jb25zdCBDT0xPUlMgPSByZXF1aXJlKCcuLi8uLi9jb25zdGFudHMvY29sb3JzLmpzJyk7XHJcblxyXG5jbGFzcyBMaW5rVGVtcGxhdGUge1xyXG4gICAgY29uc3RydWN0b3IobWFwKSB7XHJcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xyXG4gICAgfVxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uTGluaywge1xyXG4gICAgICAgICAgICBzZWxlY3Rpb25BZG9ybmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgbGF5ZXJOYW1lOiAnJyxcclxuICAgICAgICAgICAgcm91dGluZzogZ28uTGluay5Ob3JtYWwsXHJcbiAgICAgICAgICAgIHJlbGlua2FibGVGcm9tOiB0cnVlLFxyXG4gICAgICAgICAgICByZWxpbmthYmxlVG86IHRydWUsXHJcbiAgICAgICAgICAgIG1vdXNlRW50ZXI6IChldmVudCwgdGFyZ2V0LCBvYmoyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAudWkubW91c2VPdmVyTGluayA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW91c2VMZWF2ZTogKGV2ZW50LCB0YXJnZXQsIG9iajIpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC51aS5tb3VzZU92ZXJMaW5rID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW91c2VEcmFnRW50ZXI6IChldmVudCwgdGFyZ2V0LCBkcmFnT2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAudWkubW91c2VPdmVyTGluayA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6IChldmVudCwgZHJvcFRhcmdldCwgZHJhZ09iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLnVpLm1vdXNlT3ZlckxpbmsgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtb3VzZURyb3A6IChldmVudCwgZHJvcFRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKS5zZWxlY3Rpb247XHJcbiAgICAgICAgICAgICAgICBpZiAocGFydHMgJiYgcGFydHMuY291bnQgPT09IDEgJiYgcGFydHMuZmlyc3QoKSBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLmFkZFRoaW5nQXNSVGhpbmcocGFydHMuZmlyc3QoKSwgZHJvcFRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRvdWJsZUNsaWNrOiAoZXZlbnQsIHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJUaGluZyh0YXJnZXQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb250ZXh0Q2xpY2s6IChldmVudCwgdGFyZ2V0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubGlua0luZm8odGFyZ2V0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgdGhpcy5nZXRSTGlua1NlbGVjdGlvblN0cm9rZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2VXaWR0aCcsICcnLCB0aGlzLl9tYXAubGF5b3V0cy5nZXRMaW5rU3Ryb2tlV2lkdGgpLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnTElOS1NIQVBFJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApLFxyXG5cclxuICAgICAgICAgICAgLy8gc2hvdyB0by9mcm9tIGFycm93aGVhZHMgYmFzZWQgb24gbGluayAndHlwZScgYXR0cmlidXRlXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBmcm9tQXJyb3c6ICdCYWNrd2FyZCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgdGhpcy5nZXRSTGlua1NlbGVjdGlvblN0cm9rZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzY2FsZScsICcnLCB0aGlzLl9tYXAubGF5b3V0cy5nZXRBcnJvd2hlYWRTY2FsZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJ3R5cGUnLCAodCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSAnZnJvbScgfHwgdCA9PT0gJ3RvRnJvbSc7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgdG9BcnJvdzogJ1N0YW5kYXJkJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3N0cm9rZScsICcnLCB0aGlzLmdldFJMaW5rU2VsZWN0aW9uU3Ryb2tlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3NjYWxlJywgJycsIHRoaXMuX21hcC5sYXlvdXRzLmdldEFycm93aGVhZFNjYWxlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAndHlwZScsICh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09ICd0bycgfHwgdCA9PT0gJ3RvRnJvbSc7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBtayhnby5QYW5lbCwgZ28uUGFuZWwuQXV0bywgLy8gbGluayBsYWJlbCAna25vYidcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuc2hvd0tub2Iob2JqKSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc2NhbGUnLCAnJywgdGhpcy5fbWFwLmxheW91dHMuZ2V0QXJyb3doZWFkU2NhbGUpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZ3VyZTogJ0VsbGlwc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IENPTE9SUy5jb2xvckQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBDT0xPUlMuY29sb3JELFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMixcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEyXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBsaW5rSW5mbyhvYmopIHtcclxuICAgICAgICB2YXIgc25wb3MgPSB0aGlzLl9tYXAubGF5b3V0cy5nZXRTYW1lTm9kZXNMaW5rUG9zaXRpb24ob2JqKTtcclxuICAgICAgICByZXR1cm4gJycgK1xyXG4gICAgICAgICAgICAnb2JqZWN0OiAnICsgb2JqICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnZnJvbU5vZGU6ICcgKyBvYmouZnJvbU5vZGUgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICd0b05vZGU6ICcgKyBvYmoudG9Ob2RlICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnbGFiZWxOb2RlczogJyArIG9iai5sYWJlbE5vZGVzLmNvdW50ICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnbGFiZWxOb2RlSXNWaXNpYmxlOiAnICsgdGhpcy5fbWFwLmxheW91dHMubGFiZWxOb2RlSXNWaXNpYmxlKG9iaikgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdmcm9tUG9ydElkOiAnICsgb2JqLmZyb21Qb3J0SWQgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICd0b1BvcnRJZDogJyArIG9iai50b1BvcnRJZCArICdcXG4nICtcclxuICAgICAgICAgICAgJ2NhdGVnb3J5OiAnICsgKG9iai5kYXRhID8gb2JqLmRhdGEuY2F0ZWdvcnkgOiAnJykgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdjb250YWluaW5nR3JvdXA6ICcgKyBvYmouY29udGFpbmluZ0dyb3VwICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnZnJvbUFuZFRvTm9kZXNBcmVWaXNpYmxlOiAnICsgdGhpcy5fbWFwLmxheW91dHMuZnJvbUFuZFRvTm9kZXNBcmVWaXNpYmxlKG9iaikgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdjdXJ2ZTogJyArIG9iai5jdXJ2ZSArICdcXG4nICtcclxuICAgICAgICAgICAgJ2N1cnZpbmVzczogJyArIG9iai5jdXJ2aW5lc3MgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdmcm9tRW5kU2VnbWVudExlbmd0aDogJyArIE1hdGgucm91bmQob2JqLmZyb21FbmRTZWdtZW50TGVuZ3RoKSArICdcXG4nICtcclxuICAgICAgICAgICAgJ3RvRW5kU2VnbWVudExlbmd0aDogJyArIE1hdGgucm91bmQob2JqLnRvRW5kU2VnbWVudExlbmd0aCkgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdzYW1lTm9kZXNMaW5rUG9zaXRpb246ICcgKyBzbnBvcy5pbmRleCArICcgb2YgJyArIHNucG9zLmNvdW50ICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAvLysgJ2dlb21ldHJ5OiAnICsgb2JqLmdlb21ldHJ5ICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnZ2V0TGlua1N0cm9rZVdpZHRoOiAnICsgdGhpcy5fbWFwLmxheW91dHMuZ2V0TGlua1N0cm9rZVdpZHRoKG9iaikgKyAnXFxuJztcclxuICAgIH1cclxuXHJcbiAgICAvLyB3aGVuIHRvIHNob3cgdGhlIFItdGhpbmcga25vYiBvbiBhIGxpbmtcclxuICAgIHNob3dLbm9iKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gbGluayA9PT0gdGhpcy5fbWFwLnVpLm1vdXNlT3Zlckxpbms7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2Uob2JqKSB7XHJcbiAgICAgICAgaWYgKG9iai5pc1NlbGVjdGVkIHx8IG9iaiA9PT0gdGhpcy5fbWFwLnVpLm1vdXNlT3ZlckxpbmspIHtcclxuICAgICAgICAgICAgcmV0dXJuIENPTE9SUy5jb2xvclI7IC8vIFRPRE86IGNhbiBQIGxpbmtzIGJlIHNlbGVjdGVkP1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnIzAwMCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbm1vZHVsZS5leHBvcnRzID0gTGlua1RlbXBsYXRlOyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcblxyXG5jb25zdCBDT0xPUlMgPSByZXF1aXJlKCcuLi8uLi9jb25zdGFudHMvY29sb3JzLmpzJyk7XHJcblxyXG5jbGFzcyBQTGlua1RlbXBsYXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKG1hcCkge1xyXG4gICAgICAgIHRoaXMuX21hcCA9IG1hcDtcclxuICAgIH1cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLkxpbmssXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAodGhpcy5zaG93UExpbmsob2JqKSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBsYXllck5hbWU6ICdCYWNrZ3JvdW5kJywgLy8gbWFrZSBQIGxpbmtzIGZhbGwgYmVoaW5kIFIgbGlua3NcclxuICAgICAgICAgICAgICAgIHJvdXRpbmc6IGdvLkxpbmsuTm9ybWFsLFxyXG4gICAgICAgICAgICAgICAgY29udGV4dENsaWNrOiAoZXZlbnQsIHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubGlua0luZm8odGFyZ2V0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2VXaWR0aCcsICcnLCB0aGlzLl9tYXAubGF5b3V0cy5nZXRMaW5rU3Ryb2tlV2lkdGgpLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnTElOS1NIQVBFJyxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IENPTE9SUy5jb2xvclBMaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBDT0xPUlMuY29sb3JQTGlnaHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgICAgICAvLyBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm4gKHNlbGYuc2hvd1BEb3Qob2JqKSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgICAgIC8vIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc2NhbGUnLCAnJywgdGhpcy5fbWFwLmxheW91dHMuZ2V0QXJyb3doZWFkU2NhbGUpLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgICAgICB0b0Fycm93OiAnQ2lyY2xlJyxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IENPTE9SUy5jb2xvclBMaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBDT0xPUlMuY29sb3JQTGlnaHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgbGlua0luZm8ob2JqKSB7XHJcbiAgICAgICAgdmFyIHNucG9zID0gdGhpcy5fbWFwLmxheW91dHMuZ2V0U2FtZU5vZGVzTGlua1Bvc2l0aW9uKG9iaik7XHJcbiAgICAgICAgcmV0dXJuICcnICtcclxuICAgICAgICAgICAgJ29iamVjdDogJyArIG9iaiArICdcXG4nICtcclxuICAgICAgICAgICAgJ2Zyb21Ob2RlOiAnICsgb2JqLmZyb21Ob2RlICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAndG9Ob2RlOiAnICsgb2JqLnRvTm9kZSArICdcXG4nICtcclxuICAgICAgICAgICAgJ2xhYmVsTm9kZXM6ICcgKyBvYmoubGFiZWxOb2Rlcy5jb3VudCArICdcXG4nICtcclxuICAgICAgICAgICAgJ2xhYmVsTm9kZUlzVmlzaWJsZTogJyArIHRoaXMuX21hcC5sYXlvdXRzLmxhYmVsTm9kZUlzVmlzaWJsZShvYmopICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnZnJvbVBvcnRJZDogJyArIG9iai5mcm9tUG9ydElkICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAndG9Qb3J0SWQ6ICcgKyBvYmoudG9Qb3J0SWQgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdjYXRlZ29yeTogJyArIChvYmouZGF0YSA/IG9iai5kYXRhLmNhdGVnb3J5IDogJycpICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnY29udGFpbmluZ0dyb3VwOiAnICsgb2JqLmNvbnRhaW5pbmdHcm91cCArICdcXG4nICtcclxuICAgICAgICAgICAgJ2Zyb21BbmRUb05vZGVzQXJlVmlzaWJsZTogJyArIHRoaXMuX21hcC5sYXlvdXRzLmZyb21BbmRUb05vZGVzQXJlVmlzaWJsZShvYmopICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnY3VydmU6ICcgKyBvYmouY3VydmUgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdjdXJ2aW5lc3M6ICcgKyBvYmouY3VydmluZXNzICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnZnJvbUVuZFNlZ21lbnRMZW5ndGg6ICcgKyBNYXRoLnJvdW5kKG9iai5mcm9tRW5kU2VnbWVudExlbmd0aCkgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICd0b0VuZFNlZ21lbnRMZW5ndGg6ICcgKyBNYXRoLnJvdW5kKG9iai50b0VuZFNlZ21lbnRMZW5ndGgpICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnc2FtZU5vZGVzTGlua1Bvc2l0aW9uOiAnICsgc25wb3MuaW5kZXggKyAnIG9mICcgKyBzbnBvcy5jb3VudCArICdcXG4nICtcclxuICAgICAgICAgICAgLy8rICdnZW9tZXRyeTogJyArIG9iai5nZW9tZXRyeSArICdcXG4nICtcclxuICAgICAgICAgICAgJ2dldExpbmtTdHJva2VXaWR0aDogJyArIHRoaXMuX21hcC5sYXlvdXRzLmdldExpbmtTdHJva2VXaWR0aChvYmopICsgJ1xcbic7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gd2hlbiBhIFAgbGluayBzaG91bGQgYmUgdmlzaWJsZVxyXG4gICAgc2hvd1BMaW5rKGxpbmspIHtcclxuICAgICAgICB2YXIgbW9kZSA9IHRoaXMuX21hcC51aS5nZXRNYXBFZGl0b3JPcHRpb25zKCkucGVyc3BlY3RpdmVNb2RlO1xyXG4gICAgICAgIGlmICh0aGlzLl9tYXAucGVyc3BlY3RpdmVzLmlzUEVkaXRvclBvaW50KGxpbmsuZnJvbU5vZGUpKSB7IC8vIHNob3cgUCdzIHdoZW4gdGhpcyBsaW5rIGlzIGZyb20gdGhlIGN1cnJlbnQgUG9pbnRcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9tYXAucGVyc3BlY3RpdmVzLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgUCdzIGZvciBub24tUG9pbnQgdGhpbmdzLCBldmVuIG9uIG1vdXNlb3ZlclxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChtb2RlID09PSAnbGluZXMnIHx8IG1vZGUgPT09ICdib3RoJykgJiYgKGxpbmsuZnJvbU5vZGUgPT09IHRoaXMuX21hcC51aS5tb3VzZU92ZXJHcm91cCB8fCB0aGlzLl9tYXAucElzRXhwYW5kZWQobGluay5mcm9tTm9kZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQTGlua1RlbXBsYXRlOyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcbmNvbnN0IENPTE9SUyA9IHJlcXVpcmUoJy4uLy4uL2NvbnN0YW50cy9jb2xvcnMuanMnKTtcclxuXHJcbmNsYXNzIFNsaWRlVGVtcGxhdGUge1xyXG4gICAgY29uc3RydWN0b3IobWFwKSB7XHJcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xyXG4gICAgfVxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uTm9kZSwgZ28uUGFuZWwuQXV0byxcclxuICAgICAgICAgICAgLy8gTkI6IHVubGlrZSBncm91cHMsIHNsaWRlcyBqdXN0IHVzZSBhIG5vcm1hbCAyLXdheSBsb2NhdGlvbiBiaW5kaW5nXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdsb2NhdGlvbicsICdsb2MnLCBnby5Qb2ludC5wYXJzZSkubWFrZVR3b1dheShnby5Qb2ludC5zdHJpbmdpZnkpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnd2lkdGgnLCAnd2lkdGgnKS5tYWtlVHdvV2F5KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdoZWlnaHQnLCAnaGVpZ2h0JykubWFrZVR3b1dheSgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmRhdGEuaGFzUmVnaW9uICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLnVpLmN1cnJlbnRUYWJJcyh0aGlzLl9tYXAudWkuVEFCX0lEX1BSRVNFTlRFUikgJiZcclxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5fbWFwLnByZXNlbnRlci5pc1ByZXNlbnRpbmcgJiZcclxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5fbWFwLnByZXNlbnRlci5pc0NyZWF0aW5nVGh1bWJuYWlsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLnByZXNlbnRlci5jdXJyZW50U2xpZGVJbmRleCA9PT0gb2JqLmRhdGEuaW5kZXg7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uU3BvdDogZ28uU3BvdC5Ub3BMZWZ0LFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICByZXNpemVBZG9ybm1lbnRUZW1wbGF0ZTogbWsoZ28uQWRvcm5tZW50LCAnU3BvdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbWsoZ28uUGxhY2Vob2xkZXIpLCAvLyB0YWtlcyBzaXplIGFuZCBwb3NpdGlvbiBvZiBhZG9ybmVkIG9iamVjdCAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlRvcExlZnQpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Ub3ApLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Ub3BSaWdodCksXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlJpZ2h0KSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuQm90dG9tUmlnaHQpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Cb3R0b20pLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Cb3R0b21MZWZ0KSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuTGVmdClcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLFxyXG4gICAgICAgICAgICAgICAgY29udGV4dENsaWNrOiAoZXZlbnQsIHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubm9kZUluZm8odGFyZ2V0LnBhcnQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsICdSZWN0YW5nbGUnLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnc2xpZGVib3JkZXInLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJ3JnYmEoMjUxLDE3MCw1NCwuMSknLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBub2RlSW5mbyhvYmopIHtcclxuICAgICAgICByZXR1cm4gJ29iamVjdDogJyArIG9iaiArICdcXG4nICtcclxuICAgICAgICAgICAgJ2tleTogJyArIG9iai5kYXRhLmtleSArICdcXG4nICtcclxuICAgICAgICAgICAgJ3Bvc2l0aW9uOiAnICsgcGFyc2VJbnQob2JqLnBvc2l0aW9uLngsIDEwKSArICcsICcgKyBwYXJzZUludChvYmoucG9zaXRpb24ueSwgMTApICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnd2lkdGgvaGVpZ2h0OiAnICsgcGFyc2VJbnQob2JqLmFjdHVhbEJvdW5kcy53aWR0aCwgMTApICsgJy8nICsgcGFyc2VJbnQob2JqLmFjdHVhbEJvdW5kcy5oZWlnaHQsIDEwKSArICdcXG4nO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGFsaWdubWVudCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2Rlc2lyZWRTaXplJywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBzbGlkZSA9IG9iai5hZG9ybmVkT2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSBNYXRoLm1pbihzbGlkZS53aWR0aCwgc2xpZGUuaGVpZ2h0KSAqIC4wNTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZ28uU2l6ZShzaXplLCBzaXplKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50OiBhbGlnbm1lbnQsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdjb2wtcmVzaXplJyxcclxuICAgICAgICAgICAgICAgIGZpbGw6ICdyZ2JhKDI1MSwxNzAsNTQsMSknLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbm1vZHVsZS5leHBvcnRzID0gU2xpZGVUZW1wbGF0ZTsiLCJjb25zdCBnbyA9IHdpbmRvdy5nbztcclxuY29uc3QgbWsgPSBnby5HcmFwaE9iamVjdC5tYWtlO1xyXG5cclxuY29uc3QgZExpbmtUZW1wbGF0ZSA9IChtYXApID0+XHJcbiAgICBtayhnby5MaW5rLCB7XHJcbiAgICAgICAgc2VsZWN0YWJsZTogZmFsc2VcclxuICAgIH0sXHJcbiAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICBuYW1lOiBcIkxJTktTSEFQRVwiLFxyXG4gICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgIH0pXHJcbiAgICApO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBkTGlua1RlbXBsYXRlOyIsIu+7v2NvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBOb2RlTGFiZWxEcmFnZ2luZ1Rvb2wgPSByZXF1aXJlKCcuLi8uLi8uLi9kaXN0L2dvL05vZGVMYWJlbERyYWdnaW5nVG9vbC5qcycpO1xyXG5mdW5jdGlvbiBpbml0KCkge1xyXG4gICAgdmFyICQgPSBnby5HcmFwaE9iamVjdC5tYWtlOyAgLy8gZm9yIGNvbmNpc2VuZXNzIGluIGRlZmluaW5nIHRlbXBsYXRlc1xyXG5cclxuICAgIGxldCBteURpYWdyYW0gPVxyXG4gICAgICAkKGdvLkRpYWdyYW0sIFwiZGlhZ3JhbVwiLCAgLy8gbXVzdCBuYW1lIG9yIHJlZmVyIHRvIHRoZSBESVYgSFRNTCBlbGVtZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBzdGFydCBldmVyeXRoaW5nIGluIHRoZSBtaWRkbGUgb2YgdGhlIHZpZXdwb3J0XHJcbiAgICAgICAgICAgIGluaXRpYWxDb250ZW50QWxpZ25tZW50OiBnby5TcG90LkNlbnRlcixcclxuICAgICAgICAgICAgLy8gaGF2ZSBtb3VzZSB3aGVlbCBldmVudHMgem9vbSBpbiBhbmQgb3V0IGluc3RlYWQgb2Ygc2Nyb2xsIHVwIGFuZCBkb3duXHJcbiAgICAgICAgICAgIFwidG9vbE1hbmFnZXIubW91c2VXaGVlbEJlaGF2aW9yXCI6IGdvLlRvb2xNYW5hZ2VyLldoZWVsWm9vbSxcclxuICAgICAgICAgICAgLy8gc3VwcG9ydCBkb3VibGUtY2xpY2sgaW4gYmFja2dyb3VuZCBjcmVhdGluZyBhIG5ldyBub2RlXHJcbiAgICAgICAgICAgIFwiY2xpY2tDcmVhdGluZ1Rvb2wuYXJjaGV0eXBlTm9kZURhdGFcIjogeyB0ZXh0OiBcIm5ldyBub2RlXCIgfSxcclxuICAgICAgICAgICAgLy8gZW5hYmxlIHVuZG8gJiByZWRvXHJcbiAgICAgICAgICAgIFwidW5kb01hbmFnZXIuaXNFbmFibGVkXCI6IHRydWVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBpbnN0YWxsIHRoZSBOb2RlTGFiZWxEcmFnZ2luZ1Rvb2wgYXMgYSBcIm1vdXNlIG1vdmVcIiB0b29sXHJcbiAgICBteURpYWdyYW0udG9vbE1hbmFnZXIubW91c2VNb3ZlVG9vbHMuaW5zZXJ0QXQoMCwgbmV3IE5vZGVMYWJlbERyYWdnaW5nVG9vbCgpKTtcclxuXHJcbiAgICAvLyB3aGVuIHRoZSBkb2N1bWVudCBpcyBtb2RpZmllZCwgYWRkIGEgXCIqXCIgdG8gdGhlIHRpdGxlIGFuZCBlbmFibGUgdGhlIFwiU2F2ZVwiIGJ1dHRvblxyXG4gICAgbXlEaWFncmFtLmFkZERpYWdyYW1MaXN0ZW5lcihcIk1vZGlmaWVkXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiU2F2ZUJ1dHRvblwiKTtcclxuICAgICAgICBpZiAoYnV0dG9uKSBidXR0b24uZGlzYWJsZWQgPSAhbXlEaWFncmFtLmlzTW9kaWZpZWQ7XHJcbiAgICAgICAgdmFyIGlkeCA9IGRvY3VtZW50LnRpdGxlLmluZGV4T2YoXCIqXCIpO1xyXG4gICAgICAgIGlmIChteURpYWdyYW0uaXNNb2RpZmllZCkge1xyXG4gICAgICAgICAgICBpZiAoaWR4IDwgMCkgZG9jdW1lbnQudGl0bGUgKz0gXCIqXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGlkeCA+PSAwKSBkb2N1bWVudC50aXRsZSA9IGRvY3VtZW50LnRpdGxlLnN1YnN0cigwLCBpZHgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGRlZmluZSB0aGUgTm9kZSB0ZW1wbGF0ZVxyXG4gICAgbXlEaWFncmFtLm5vZGVUZW1wbGF0ZSA9XHJcbiAgICAgICQoZ28uTm9kZSwgXCJTcG90XCIsXHJcbiAgICAgICAgeyBsb2NhdGlvbk9iamVjdE5hbWU6IFwiSUNPTlwiLCBsb2NhdGlvblNwb3Q6IGdvLlNwb3QuTGVmdCB9LFxyXG4gICAgICAgIG5ldyBnby5CaW5kaW5nKFwibG9jYXRpb25cIiwgXCJsb2NcIiwgZ28uUG9pbnQucGFyc2UpLm1ha2VUd29XYXkoZ28uUG9pbnQuc3RyaW5naWZ5KSxcclxuICAgICAgICB7IHNlbGVjdGlvbk9iamVjdE5hbWU6IFwiSUNPTlwiIH0sXHJcbiAgICAgICAgLy8gZGVmaW5lIHRoZSBub2RlIHByaW1hcnkgc2hhcGVcclxuICAgICAgICAkKGdvLlNoYXBlLCBcIlJvdW5kZWRSZWN0YW5nbGVcIixcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBuYW1lOiBcIklDT05cIixcclxuICAgICAgICAgICAgICBwYXJhbWV0ZXIxOiAxMCwgIC8vIHRoZSBjb3JuZXIgaGFzIGEgbWVkaXVtIHJhZGl1c1xyXG4gICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg0MCwgNDApLFxyXG4gICAgICAgICAgICAgIGZpbGw6ICQoZ28uQnJ1c2gsIGdvLkJydXNoLkxpbmVhciwgeyAwOiBcInJnYigyNTQsIDIwMSwgMClcIiwgMTogXCJyZ2IoMjU0LCAxNjIsIDApXCIgfSksXHJcbiAgICAgICAgICAgICAgc3Ryb2tlOiBcImJsYWNrXCIsXHJcbiAgICAgICAgICAgICAgcG9ydElkOiBcIlwiLFxyXG4gICAgICAgICAgICAgIGZyb21MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogdHJ1ZSxcclxuICAgICAgICAgICAgICBmcm9tTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlLFxyXG4gICAgICAgICAgICAgIHRvTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgdG9MaW5rYWJsZVNlbGZOb2RlOiB0cnVlLFxyXG4gICAgICAgICAgICAgIHRvTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlLFxyXG4gICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCJcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICQoZ28uU2hhcGUsICAvLyBwcm92aWRlIGludGVyaW9yIGFyZWEgd2hlcmUgdGhlIHVzZXIgY2FuIGdyYWIgdGhlIG5vZGVcclxuICAgICAgICAgIHsgZmlsbDogXCJ0cmFuc3BhcmVudFwiLCBzdHJva2U6IG51bGwsIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgzMCwgMzApIH0pLFxyXG4gICAgICAgICQoZ28uVGV4dEJsb2NrLFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGZvbnQ6IFwiYm9sZCAxMXB0IGhlbHZldGljYSwgYm9sZCBhcmlhbCwgc2Fucy1zZXJpZlwiLFxyXG4gICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLCAgLy8gZWRpdGluZyB0aGUgdGV4dCBhdXRvbWF0aWNhbGx5IHVwZGF0ZXMgdGhlIG1vZGVsIGRhdGFcclxuICAgICAgICAgICAgICBfaXNOb2RlTGFiZWw6IHRydWUsXHJcbiAgICAgICAgICAgICAgYWxpZ25tZW50OiBnby5TcG90LkxlZnRTaWRlLFxyXG4gICAgICAgICAgICAgIG1hcmdpbjogMixcclxuICAgICAgICAgICAgICBjdXJzb3I6IFwibW92ZVwiICAvLyB2aXN1YWwgaGludCB0aGF0IHRoZSB1c2VyIGNhbiBkbyBzb21ldGhpbmcgd2l0aCB0aGlzIG5vZGUgbGFiZWxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInRleHRcIiwgXCJ0ZXh0XCIpLm1ha2VUd29XYXkoKSxcclxuICAgICAgICAgIC8vIFRoZSBHcmFwaE9iamVjdC5hbGlnbm1lbnQgcHJvcGVydHkgaXMgd2hhdCB0aGUgTm9kZUxhYmVsRHJhZ2dpbmdUb29sIG1vZGlmaWVzLlxyXG4gICAgICAgICAgLy8gVGhpcyBUd29XYXkgYmluZGluZyBzYXZlcyBhbnkgY2hhbmdlcyB0byB0aGUgc2FtZSBuYW1lZCBwcm9wZXJ0eSBvbiB0aGUgbm9kZSBkYXRhLlxyXG4gICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJhbGlnbm1lbnRcIiwgXCJhbGlnbm1lbnRcIiwgZ28uU3BvdC5wYXJzZSkubWFrZVR3b1dheShnby5TcG90LnN0cmluZ2lmeSlcclxuICAgICAgICAgIClcclxuICAgICAgKTtcclxuXHJcbiAgICAvLyB1bmxpa2UgdGhlIG5vcm1hbCBzZWxlY3Rpb24gQWRvcm5tZW50LCB0aGlzIG9uZSBpbmNsdWRlcyBhIEJ1dHRvblxyXG4gICAgbXlEaWFncmFtLm5vZGVUZW1wbGF0ZS5zZWxlY3Rpb25BZG9ybm1lbnRUZW1wbGF0ZSA9XHJcbiAgICAgICQoZ28uQWRvcm5tZW50LCBcIlNwb3RcIixcclxuICAgICAgICAkKGdvLlBhbmVsLCBcIkF1dG9cIixcclxuICAgICAgICAgICQoZ28uU2hhcGUsIHsgZmlsbDogbnVsbCwgc3Ryb2tlOiBcImJsdWVcIiwgc3Ryb2tlV2lkdGg6IDIgfSksXHJcbiAgICAgICAgICAkKGdvLlBsYWNlaG9sZGVyKSAgLy8gdGhpcyByZXByZXNlbnRzIHRoZSBzZWxlY3RlZCBOb2RlXHJcbiAgICAgICAgKSxcclxuICAgICAgICAvLyB0aGUgYnV0dG9uIHRvIGNyZWF0ZSBhIFwibmV4dFwiIG5vZGUsIGF0IHRoZSB0b3AtcmlnaHQgY29ybmVyXHJcbiAgICAgICAgJChcIkJ1dHRvblwiLFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Cb3R0b21MZWZ0LFxyXG4gICAgICAgICAgICAgIGNsaWNrOiBhZGROb2RlQW5kTGluayAgLy8gdGhpcyBmdW5jdGlvbiBpcyBkZWZpbmVkIGJlbG93XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgJChnby5TaGFwZSwgXCJQbHVzTGluZVwiLCB7IGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg2LCA2KSB9KVxyXG4gICAgICAgICkgLy8gZW5kIGJ1dHRvblxyXG4gICAgICApOyAvLyBlbmQgQWRvcm5tZW50XHJcblxyXG4gICAgLypcclxuICAgIFxyXG4gICAgdmFyIGNsaWNrZWQgPSBvYmoucGFydDtcclxuICAgICAgaWYgKGNsaWNrZWQgIT09IG51bGwpIHtcclxuICAgICAgICB2YXIgdGhpc2VtcCA9IGNsaWNrZWQuZGF0YTtcclxuICAgICAgICBteURpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcImFkZCBlbXBsb3llZVwiKTtcclxuICAgICAgICB2YXIgbmV4dGtleSA9IChteURpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheS5sZW5ndGggKyAxKS50b1N0cmluZygpO1xyXG4gICAgICAgIHZhciBuZXdlbXAgPSB7IGtleTogbmV4dGtleSwgbmFtZTogXCIobmV3IHBlcnNvbilcIiwgdGl0bGU6IFwiXCIsIHBhcmVudDogdGhpc2VtcC5rZXkgfTtcclxuICAgICAgICBteURpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEobmV3ZW1wKTtcclxuICAgICAgICBteURpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJhZGQgZW1wbG95ZWVcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgKi9cclxuXHJcbiAgICAvLyBjbGlja2luZyB0aGUgYnV0dG9uIGluc2VydHMgYSBuZXcgbm9kZSB0byB0aGUgcmlnaHQgb2YgdGhlIHNlbGVjdGVkIG5vZGUsXHJcbiAgICAvLyBhbmQgYWRkcyBhIGxpbmsgdG8gdGhhdCBuZXcgbm9kZVxyXG4gICAgZnVuY3Rpb24gYWRkTm9kZUFuZExpbmsoZSwgb2JqKSB7XHJcbiAgICAgICAgdmFyIGFkb3JuID0gb2JqLnBhcnQ7XHJcbiAgICAgICAgZS5oYW5kbGVkID0gdHJ1ZTtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IGFkb3JuLmRpYWdyYW07XHJcbiAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiQWRkIFN0YXRlXCIpO1xyXG5cclxuICAgICAgICAvLyBnZXQgdGhlIG5vZGUgZGF0YSBmb3Igd2hpY2ggdGhlIHVzZXIgY2xpY2tlZCB0aGUgYnV0dG9uXHJcbiAgICAgICAgdmFyIGZyb21Ob2RlID0gYWRvcm4uYWRvcm5lZFBhcnQ7XHJcbiAgICAgICAgdmFyIGZyb21EYXRhID0gZnJvbU5vZGUuZGF0YTtcclxuICAgICAgICAvLyBjcmVhdGUgYSBuZXcgXCJTdGF0ZVwiIGRhdGEgb2JqZWN0LCBwb3NpdGlvbmVkIG9mZiB0byB0aGUgcmlnaHQgb2YgdGhlIGFkb3JuZWQgTm9kZVxyXG4gICAgICAgIHZhciB0b0RhdGEgPSB7IHRleHQ6IFwibmV3XCIsIHBhcmVudDogYWRvcm4uZGF0YS5rZXkgfTtcclxuICAgICAgICB2YXIgcCA9IGZyb21Ob2RlLmxvY2F0aW9uLmNvcHkoKTtcclxuICAgICAgICBwLnkgKz0gNzU7XHJcbiAgICAgICAgdG9EYXRhLmxvYyA9IGdvLlBvaW50LnN0cmluZ2lmeShwKTsgIC8vIHRoZSBcImxvY1wiIHByb3BlcnR5IGlzIGEgc3RyaW5nLCBub3QgYSBQb2ludCBvYmplY3RcclxuICAgICAgICAvLyBhZGQgdGhlIG5ldyBub2RlIGRhdGEgdG8gdGhlIG1vZGVsXHJcbiAgICAgICAgdmFyIG1vZGVsID0gZGlhZ3JhbS5tb2RlbDtcclxuICAgICAgICBtb2RlbC5hZGROb2RlRGF0YSh0b0RhdGEpO1xyXG5cclxuICAgICAgICAvLyBjcmVhdGUgYSBsaW5rIGRhdGEgZnJvbSB0aGUgb2xkIG5vZGUgZGF0YSB0byB0aGUgbmV3IG5vZGUgZGF0YVxyXG4gICAgICAgIHZhciBsaW5rZGF0YSA9IHtcclxuICAgICAgICAgICAgZnJvbTogbW9kZWwuZ2V0S2V5Rm9yTm9kZURhdGEoZnJvbURhdGEpLCAgLy8gb3IganVzdDogZnJvbURhdGEuaWRcclxuICAgICAgICAgICAgdG86IG1vZGVsLmdldEtleUZvck5vZGVEYXRhKHRvRGF0YSksXHJcbiAgICAgICAgICAgIHRleHQ6IFwidHJhbnNpdGlvblwiXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBhbmQgYWRkIHRoZSBsaW5rIGRhdGEgdG8gdGhlIG1vZGVsXHJcbiAgICAgICAgbW9kZWwuYWRkTGlua0RhdGEobGlua2RhdGEpO1xyXG5cclxuICAgICAgICAvLyBzZWxlY3QgdGhlIG5ldyBOb2RlXHJcbiAgICAgICAgdmFyIG5ld25vZGUgPSBkaWFncmFtLmZpbmROb2RlRm9yRGF0YSh0b0RhdGEpO1xyXG4gICAgICAgIGRpYWdyYW0uc2VsZWN0KG5ld25vZGUpO1xyXG5cclxuICAgICAgICBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiQWRkIFN0YXRlXCIpO1xyXG5cclxuICAgICAgICAvLyBpZiB0aGUgbmV3IG5vZGUgaXMgb2ZmLXNjcmVlbiwgc2Nyb2xsIHRoZSBkaWFncmFtIHRvIHNob3cgdGhlIG5ldyBub2RlXHJcbiAgICAgICAgZGlhZ3JhbS5zY3JvbGxUb1JlY3QobmV3bm9kZS5hY3R1YWxCb3VuZHMpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlcGxhY2UgdGhlIGRlZmF1bHQgTGluayB0ZW1wbGF0ZSBpbiB0aGUgbGlua1RlbXBsYXRlTWFwXHJcbiAgICBteURpYWdyYW0ubGlua1RlbXBsYXRlID1cclxuICAgICAgJChnby5MaW5rLCAgLy8gdGhlIHdob2xlIGxpbmsgcGFuZWxcclxuICAgICAgICB7IGN1cnZlOiBnby5MaW5rLkJlemllciwgYWRqdXN0aW5nOiBnby5MaW5rLlN0cmV0Y2gsIHJlc2hhcGFibGU6IHRydWUgfSxcclxuICAgICAgICBuZXcgZ28uQmluZGluZyhcInBvaW50c1wiKS5tYWtlVHdvV2F5KCksXHJcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJjdXJ2aW5lc3NcIiwgXCJjdXJ2aW5lc3NcIiksXHJcbiAgICAgICAgJChnby5TaGFwZSwgIC8vIHRoZSBsaW5rIHNoYXBlXHJcbiAgICAgICAgICB7IGlzUGFuZWxNYWluOiB0cnVlLCBzdHJva2U6IFwiYmxhY2tcIiwgc3Ryb2tlV2lkdGg6IDEuNSB9KSxcclxuICAgICAgICAkKGdvLlNoYXBlLCAgLy8gdGhlIGFycm93aGVhZFxyXG4gICAgICAgICAgeyB0b0Fycm93OiBcInN0YW5kYXJkXCIsIHN0cm9rZTogbnVsbCB9KSxcclxuICAgICAgICAkKGdvLlBhbmVsLCBcIkF1dG9cIixcclxuICAgICAgICAgICQoZ28uU2hhcGUsICAvLyB0aGUgbGluayBzaGFwZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmaWxsOiAkKGdvLkJydXNoLCBnby5CcnVzaC5SYWRpYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgMDogXCJyZ2IoMjQwLCAyNDAsIDI0MClcIiwgMC4zOiBcInJnYigyNDAsIDI0MCwgMjQwKVwiLCAxOiBcInJnYmEoMjQwLCAyNDAsIDI0MCwgMClcIiB9KSxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICQoZ28uVGV4dEJsb2NrLCBcInRyYW5zaXRpb25cIiwgIC8vIHRoZSBsYWJlbFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwiY2VudGVyXCIsXHJcbiAgICAgICAgICAgICAgICBmb250OiBcIjEwcHQgaGVsdmV0aWNhLCBhcmlhbCwgc2Fucy1zZXJpZlwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBcImJsYWNrXCIsXHJcbiAgICAgICAgICAgICAgICBtYXJnaW46IDQsXHJcbiAgICAgICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSAgLy8gZWRpdGluZyB0aGUgdGV4dCBhdXRvbWF0aWNhbGx5IHVwZGF0ZXMgdGhlIG1vZGVsIGRhdGFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJ0ZXh0XCIsIFwidGV4dFwiKS5tYWtlVHdvV2F5KCkpXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBzYXZlKCkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlTYXZlZE1vZGVsXCIpLnZhbHVlID0gbXlEaWFncmFtLm1vZGVsLnRvSnNvbigpO1xyXG4gICAgICAgIG15RGlhZ3JhbS5pc01vZGlmaWVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB2YXIgbG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG15RGlhZ3JhbS5tb2RlbCA9IGdvLk1vZGVsLmZyb21Kc29uKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlTYXZlZE1vZGVsXCIpLnZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZWFkIGluIHRoZSBKU09OLWZvcm1hdCBkYXRhIGZyb20gdGhlIFwibXlTYXZlZE1vZGVsXCIgZWxlbWVudFxyXG4gICAgbG9hZCgpO1xyXG59XHJcblxyXG4vLyBTaG93IHRoZSBkaWFncmFtJ3MgbW9kZWwgaW4gSlNPTiBmb3JtYXRcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGluaXQ7IiwiY2xhc3MgQ29tbW9uIHtcclxuXHJcbiAgICBzdGF0aWMgc3BsaXRMaW5lcyh0ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRleHQuc3BsaXQoL1xcbi8pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRFdmVudFRpbWUodCwgbm93KSB7XHJcbiAgICAgICAgbGV0IHRpbWUgPSBtb21lbnQodCwgJ1lZWVktTU0tREQgSEg6bW06c3MuU1NTJyk7XHJcbiAgICAgICAgbGV0IG5vd3RpbWUgPSBtb21lbnQobm93LCAnWVlZWS1NTS1ERCBISDptbTpzcy5TU1MnKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygndDogICAgICAgJyArIHQpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdub3c6ICAgICAnICsgbm93KTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygndGltZTogICAgJyArIHRpbWUuZm9ybWF0KCkpOyAvLyArICcgJyArIHRpbWUuaXNWYWxpZCgpKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnbm93dGltZTogJyArIG5vd3RpbWUuZm9ybWF0KCkpOyAvLyArICcgJyArIG5vd3RpbWUuaXNWYWxpZCgpKTtcclxuICAgICAgICByZXR1cm4gdGltZS5mcm9tKG5vd3RpbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjbGFzc0lmKGtsYXNzLCBiKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnY2xhc3NJZjogJyArIGtsYXNzICsgJywgJyArIGIpO1xyXG4gICAgICAgIHJldHVybiAoYiA/IGtsYXNzIDogJycpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGF2b2lkICckYXBwbHkgYWxyZWFkeSBpbiBwcm9ncmVzcycgZXJyb3IgKHNvdXJjZTogaHR0cHM6Ly9jb2RlcndhbGwuY29tL3Avbmdpc21hKVxyXG4gICAgc3RhdGljIHNhZmVBcHBseShmbikge1xyXG4gICAgICAgIGlmIChmbiAmJiAodHlwZW9mIChmbikgPT09ICdmdW5jdGlvbicpKSB7XHJcbiAgICAgICAgICAgIGZuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHNvdXJjZTogaHR0cDovL2N0cmxxLm9yZy9jb2RlLzE5NjE2LWRldGVjdC10b3VjaC1zY3JlZW4tamF2YXNjcmlwdFxyXG4gICAgc3RhdGljIGlzVG91Y2hEZXZpY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuICgoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB8fCAobmF2aWdhdG9yLk1heFRvdWNoUG9pbnRzID4gMCkgfHwgKG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzID4gMCkpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDb21tb247IiwidmFyIHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLWFjdGlvbnMnLCAnPGRpdiBjbGFzcz1cInBhZ2UtYWN0aW9uc1wiPiA8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwXCI+IDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIHJlZC1oYXplIGJ0bi1zbSBkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgZGF0YS1ob3Zlcj1cImRyb3Bkb3duXCIgZGF0YS1jbG9zZS1vdGhlcnM9XCJ0cnVlXCI+IDxzcGFuIGNsYXNzPVwiaGlkZGVuLXNtIGhpZGRlbi14c1wiPkFjdGlvbnMmbmJzcDs8L3NwYW4+PGkgY2xhc3M9XCJmYSBmYS1hbmdsZS1kb3duXCI+PC9pPiA8L2J1dHRvbj4gPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiIHJvbGU9XCJtZW51XCI+IDxsaSBjbGFzcz1cInN0YXJ0IGFjdGl2ZSBcIj4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLXBlbmNpbC1zcXVhcmUtb1wiPiBOZXcgTWFwIDwvaT4gPC9hPiA8L2xpPiA8bGk+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJmYSBmYS1wcmludFwiPiBFeHBvcnQvUHJpbnQgPC9pPiA8L2E+IDwvbGk+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLXRhZ1wiPiBUYWcgTWFwIDwvaT4gPC9hPiA8L2xpPiA8bGk+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJmYSBmYS1jb3B5XCI+PC9pPiBEdXBsaWNhdGUgTWFwIDwvYT4gPC9saT4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtdXNlcnNcIj48L2k+IFNoYXJlIE1hcCA8L2E+IDwvbGk+IDxsaSBjbGFzcz1cImRpdmlkZXJcIj4gPC9saT4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtZ2VhclwiPjwvaT4gU2V0dGluZ3MgPC9hPiA8L2xpPiA8L3VsPiA8L2Rpdj4gPHNwYW4+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7UGFnZSBUaXRsZSA8L3NwYW4+IDwvZGl2PicsIGZ1bmN0aW9uKG9wdHMpIHtcbn0pOyIsInZhciByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1ib2R5JywgJzxkaXYgY2xhc3M9XCJwYWdlLWhlYWRlci1maXhlZCBwYWdlLXNpZGViYXItY2xvc2VkLWhpZGUtbG9nbyBwYWdlLXNpZGViYXItY2xvc2VkLWhpZGUtbG9nb1wiPiA8cGFnZS1oZWFkZXI+PC9wYWdlLWhlYWRlcj4gPGRpdiBjbGFzcz1cImNsZWFyZml4XCI+IDwvZGl2PiA8cGFnZS1jb250YWluZXI+PC9wYWdlLWNvbnRhaW5lcj4gPHBhZ2UtZm9vdGVyPjwvcGFnZS1mb290ZXI+IDwvZGl2PicsIGZ1bmN0aW9uKG9wdHMpIHtcbn0pOyIsInZhciByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1jb250YWluZXInLCAnPGRpdiBjbGFzcz1cInBhZ2UtY29udGFpbmVyXCI+IDxwYWdlLXNpZGViYXI+PC9wYWdlLXNpZGViYXI+IDxwYWdlLWNvbnRlbnQ+PC9wYWdlLWNvbnRlbnQ+IDwvZGl2PicsIGZ1bmN0aW9uKG9wdHMpIHtcbn0pOyIsInZhciByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1jb250ZW50JywgJzxkaXYgY2xhc3M9XCJwYWdlLWNvbnRlbnQtd3JhcHBlclwiPiA8ZGl2IGNsYXNzPVwicGFnZS1jb250ZW50XCI+IDxkaXYgY2xhc3M9XCJwYWdlLWhlYWRcIj4gPGRpdiBpZD1cImFwcC1jb250YWluZXJcIj4gPGRpdiBpZD1cImRpYWdyYW1cIiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlOyBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsgaGVpZ2h0OiAxMDAlOyB3aWR0aDogODAlOyBcIj48L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+JywgZnVuY3Rpb24ob3B0cykge1xufSk7IiwidmFyIHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLWZvb3RlcicsICc8ZGl2IGNsYXNzPVwicGFnZS1mb290ZXJcIj4gPGRpdiBjbGFzcz1cInBhZ2UtZm9vdGVyLWlubmVyXCI+IDIwMTUgJmNvcHk7IENhYnJlcmEgUmVzZWFyY2ggTGFiIDwvZGl2PiA8ZGl2IGNsYXNzPVwic2Nyb2xsLXRvLXRvcFwiPiA8aSBjbGFzcz1cImljb24tYXJyb3ctdXBcIj48L2k+IDwvZGl2PiA8L2Rpdj4nLCBmdW5jdGlvbihvcHRzKSB7XG59KTsiLCJ2YXIgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtaGVhZGVyJywgJzxkaXYgaWQ9XCJoZWFkZXItdG9wXCIgY2xhc3M9XCJwYWdlLWhlYWRlciBuYXZiYXIgbmF2YmFyLWZpeGVkLXRvcFwiPiA8ZGl2IGlkPVwiaGVhZGVyLWNvbnRlbnRcIiBjbGFzcz1cInBhZ2UtaGVhZGVyLWlubmVyXCI+IDxwYWdlLWxvZ28+PC9wYWdlLWxvZ28+IDxwYWdlLWFjdGlvbnM+PC9wYWdlLWFjdGlvbnM+IDxkaXYgY2xhc3M9XCJwYWdlLXRvcFwiPiA8cGFnZS1zZWFyY2g+PC9wYWdlLXNlYXJjaD4gPHBhZ2UtdG9wbWVudT48L3BhZ2UtdG9wbWVudT4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4nLCBmdW5jdGlvbihvcHRzKSB7XG59KTsiLCJ2YXIgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtbG9nbycsICc8ZGl2IGNsYXNzPVwicGFnZS1sb2dvXCI+IDxhIGhyZWY9XCJpbmRleC5odG1sXCI+IDxpbWcgc3JjPVwiYXNzZXRzL2ltZy9tZXRhbWFwX2Nsb3VkLnBuZ1wiIGFsdD1cImxvZ29cIiBjbGFzcz1cImxvZ28tZGVmYXVsdFwiPiA8L2E+IDxkaXYgY2xhc3M9XCJtZW51LXRvZ2dsZXIgc2lkZWJhci10b2dnbGVyXCI+ICA8L2Rpdj4gPC9kaXY+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjbGFzcz1cIm1lbnUtdG9nZ2xlciByZXNwb25zaXZlLXRvZ2dsZXJcIiBkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCIgZGF0YS10YXJnZXQ9XCIubmF2YmFyLWNvbGxhcHNlXCI+IDwvYT4nLCBmdW5jdGlvbihvcHRzKSB7XG59KTsiLCJ2YXIgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2Utc2VhcmNoJywgJyA8Zm9ybSBjbGFzcz1cInNlYXJjaC1mb3JtXCIgYWN0aW9uPVwiZXh0cmFfc2VhcmNoLmh0bWxcIiBtZXRob2Q9XCJHRVRcIj4gPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+IDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sIGlucHV0LXNtXCIgcGxhY2Vob2xkZXI9XCJTZWFyY2guLi5cIiBuYW1lPVwicXVlcnlcIj4gPHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC1idG5cIj4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiYnRuIHN1Ym1pdFwiPjxpIGNsYXNzPVwiZmEgZmEtc2VhcmNoXCI+PC9pPjwvYT4gPC9zcGFuPiA8L2Rpdj4gPC9mb3JtPicsIGZ1bmN0aW9uKG9wdHMpIHtcbn0pOyIsInZhciByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1zaWRlYmFyJywgJzxkaXYgY2xhc3M9XCJwYWdlLXNpZGViYXItd3JhcHBlclwiPiAgIDxkaXYgY2xhc3M9XCJwYWdlLXNpZGViYXIgbmF2YmFyLWNvbGxhcHNlIGNvbGxhcHNlXCI+ICAgICAgICA8dWwgY2xhc3M9XCJwYWdlLXNpZGViYXItbWVudSBcIiBkYXRhLWtlZXAtZXhwYW5kZWQ9XCJmYWxzZVwiIGRhdGEtYXV0by1zY3JvbGw9XCJ0cnVlXCIgZGF0YS1zbGlkZS1zcGVlZD1cIjIwMFwiPiA8bGkgb25jbGljaz1cInsgcGFyZW50LmNsaWNrIH1cIiBlYWNoPVwieyBkYXRhIH1cIj4gPGEgaWY9XCJ7IGljb24gfVwiIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJ7IGljb24gfVwiIHJpb3Qtc3R5bGU9XCJjb2xvcjojeyBjb2xvciB9O1wiPjwvaT4gPHNwYW4gY2xhc3M9XCJ0aXRsZVwiPnsgdGl0bGUgfTwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJ7IGFycm93OiBtZW51Lmxlbmd0aCB9XCI+PC9zcGFuPiA8L2E+IDx1bCBpZj1cInsgbWVudS5sZW5ndGggfVwiIGNsYXNzPVwic3ViLW1lbnVcIj4gPGxpIGVhY2g9XCJ7IG1lbnUgfVwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwieyBpY29uIH1cIj48L2k+IDxzcGFuIGNsYXNzPVwidGl0bGVcIj57IHRpdGxlIH08L3NwYW4+IDwvYT4gPC9saT4gPC91bD4gPC9saT4gPC91bD4gPC9kaXY+IDwvZGl2PicsIGZ1bmN0aW9uKG9wdHMpIHtcblxudGhpcy5jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmxvZygnZm9vJyk7XG59O1xuXG52YXIgdGhhdCA9IHRoaXM7XG50aGF0LmRhdGEgPSBbXTtcbnRoYXQuTWV0YU1hcCA9IE1ldGFNYXA7XG50aGF0Lk1ldGFNYXAuTWV0YUZpcmUuZ2V0RGF0YSgnbWVudS9zaWRlYmFyJykudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgIHRoYXQuZGF0YSA9IGRhdGE7XG4gICAgdGhhdC51cGRhdGUoKTtcbn0pO1xufSk7IiwidmFyIHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLXRvcG1lbnUnLCAnPGRpdiBjbGFzcz1cInRvcC1tZW51XCI+IDx1bCBjbGFzcz1cIm5hdiBuYXZiYXItbmF2IHB1bGwtcmlnaHRcIj4gPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPiAgPGxpIGNsYXNzPVwiZHJvcGRvd24gZHJvcGRvd24tZXh0ZW5kZWQgZHJvcGRvd24tbm90aWZpY2F0aW9uIGRyb3Bkb3duXCIgaWQ9XCJoZWFkZXJfbm90aWZpY2F0aW9uX2JhclwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgZGF0YS1ob3Zlcj1cImRyb3Bkb3duXCIgZGF0YS1jbG9zZS1vdGhlcnM9XCJ0cnVlXCI+IDxpIGNsYXNzPVwiZmEgZmEtYmVsbC1vXCI+PC9pPiA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLXN1Y2Nlc3NcIj4gMSA8L3NwYW4+IDwvYT4gPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPiA8bGkgY2xhc3M9XCJleHRlcm5hbFwiPiA8aDM+IDxzcGFuIGNsYXNzPVwiYm9sZFwiPjEgcGVuZGluZzwvc3Bhbj4gbm90aWZpY2F0aW9uIDwvaDM+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj52aWV3IGFsbDwvYT4gPC9saT4gPGxpPiA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51LWxpc3Qgc2Nyb2xsZXJcIiBzdHlsZT1cImhlaWdodDogMjUwcHg7XCIgZGF0YS1oYW5kbGUtY29sb3I9XCIjNjM3MjgzXCI+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8c3BhbiBjbGFzcz1cInRpbWVcIj5qdXN0IG5vdzwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJkZXRhaWxzXCI+IDxzcGFuIGNsYXNzPVwibGFiZWwgbGFiZWwtc20gbGFiZWwtaWNvbiBsYWJlbC1zdWNjZXNzXCI+IDxpIGNsYXNzPVwiZmEgZmEtcGx1c1wiPjwvaT4gPC9zcGFuPiBOZXcgdXNlciByZWdpc3RlcmVkLiA8L3NwYW4+IDwvYT4gPC9saT4gPC91bD4gPC9saT4gPC91bD4gPC9saT4gPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPiAgPGxpIGNsYXNzPVwiZHJvcGRvd24gZHJvcGRvd24tZXh0ZW5kZWQgZHJvcGRvd24tbm90aWZpY2F0aW9uIGRyb3Bkb3duXCIgaWQ9XCJoZWFkZXJfcG9pbnRzX2JhclwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgZGF0YS1ob3Zlcj1cImRyb3Bkb3duXCIgZGF0YS1jbG9zZS1vdGhlcnM9XCJ0cnVlXCI+IDxpIGNsYXNzPVwiZmEgZmEtdHJvcGh5XCI+PC9pPiA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLXN1Y2Nlc3NcIj4gMyA8L3NwYW4+IDwvYT4gPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPiA8bGkgY2xhc3M9XCJleHRlcm5hbFwiPiA8aDM+IDxzcGFuIGNsYXNzPVwiYm9sZFwiPjMgbmV3PC9zcGFuPiBhY2hpZXZlbWVudHMgPC9oMz4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPnZpZXcgYWxsPC9hPiA8L2xpPiA8bGk+IDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUtbGlzdCBzY3JvbGxlclwiIHN0eWxlPVwiaGVpZ2h0OiAyNTBweDtcIiBkYXRhLWhhbmRsZS1jb2xvcj1cIiM2MzcyODNcIj4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxzcGFuIGNsYXNzPVwidGltZVwiPmp1c3Qgbm93PC9zcGFuPiA8c3BhbiBjbGFzcz1cImRldGFpbHNcIj4gPHNwYW4gY2xhc3M9XCJsYWJlbCBsYWJlbC1zbSBsYWJlbC1pY29uIGxhYmVsLXN1Y2Nlc3NcIj4gPGkgY2xhc3M9XCJmYSBmYS1wbHVzXCI+PC9pPiA8L3NwYW4+IENyZWF0ZWQgYSBwZXJzcGVjdGl2ZSBjaXJjbGUhIDwvc3Bhbj4gPC9hPiA8L2xpPiA8L3VsPiA8L2xpPiA8L3VsPiA8L2xpPiAgPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPiAgPGxpIGNsYXNzPVwiZHJvcGRvd25cIiBpZD1cImhlYWRlcl9kYXNoYm9hcmRfYmFyXCI+IDxhIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlXCIgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLWhvbWVcIj48L2k+IDwvYT4gPC9saT4gPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj48L2xpPiAgPGxpIGNsYXNzPVwiZHJvcGRvd24gZHJvcGRvd24tZXh0ZW5kZWQgZHJvcGRvd24tbm90aWZpY2F0aW9uIGRyb3Bkb3duXCIgaWQ9XCJoZWFkZXJfaGVscF9iYXJcIj4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIGRhdGEtaG92ZXI9XCJkcm9wZG93blwiIGRhdGEtY2xvc2Utb3RoZXJzPVwidHJ1ZVwiPiA8aSBjbGFzcz1cImZhIGZhLWdyYWR1YXRpb24tY2FwXCI+PC9pPiA8L2E+IDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIj4gPGxpPiA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51LWxpc3Qgc2Nyb2xsZXJcIiBzdHlsZT1cImhlaWdodDogMjcwcHg7XCIgZGF0YS1oYW5kbGUtY29sb3I9XCIjNjM3MjgzXCI+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLWxpZ2h0YnVsYi1vXCI+PC9pPiA8c3BhbiBjbGFzcz1cInRpdGxlXCI+VHV0b3JpYWw8L3NwYW4+IDwvYT4gPC9saT4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtcXVlc3Rpb25cIj48L2k+IDxzcGFuIGNsYXNzPVwidGl0bGVcIj5GQVE8L3NwYW4+IDwvYT4gPC9saT4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtbGlmZS1yaW5nXCI+PC9pPiA8c3BhbiBjbGFzcz1cInRpdGxlXCI+U3VwcG9ydDwvc3Bhbj4gPC9hPiA8L2xpPiA8bGkgb25jbGljaz1cIlVzZXJTbmFwLm9wZW5SZXBvcnRXaW5kb3coKTtcIj4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiID4gPGkgY2xhc3M9XCJmYSBmYS1mcm93bi1vXCI+PC9pPiA8c3BhbiBjbGFzcz1cInRpdGxlXCI+RmVlZGJhY2s8L3NwYW4+IDwvYT4gPC9saT4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtYnVsbHNleWVcIj48L2k+IDxzcGFuIGNsYXNzPVwidGl0bGVcIj5JbmxpbmUgVHJhaW5pbmc8L3NwYW4+IDwvYT4gPC9saT4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtbGFwdG9wXCI+PC9pPiA8c3BhbiBjbGFzcz1cInRpdGxlXCI+T25saW5lIFRyYWluaW5nPC9zcGFuPiA8L2E+IDwvbGk+IDwvdWw+IDwvbGk+IDwvdWw+IDwvbGk+IDxsaSBjbGFzcz1cInNlcGFyYXRvciBoaWRlXCI+IDwvbGk+IDxsaSBjbGFzcz1cImRyb3Bkb3duIGRyb3Bkb3duLXVzZXIgZHJvcGRvd25cIj4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIGRhdGEtaG92ZXI9XCJkcm9wZG93blwiIGRhdGEtY2xvc2Utb3RoZXJzPVwidHJ1ZVwiPiA8c3BhbiBjbGFzcz1cInVzZXJuYW1lIHVzZXJuYW1lLWhpZGUtb24tbW9iaWxlXCI+IHsgdXNlcm5hbWUgfSA8L3NwYW4+IDxpbWcgYWx0PVwiXCIgaGVpZ2h0PVwiMzlcIiB3aWR0aD1cIjM5XCIgY2xhc3M9XCJpbWctY2lyY2xlXCIgcmlvdC1zcmM9XCJ7IHBpY3R1cmUgfVwiPiA8L2E+IDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUgZHJvcGRvd24tbWVudS1kZWZhdWx0XCI+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLXVzZXJcIj48L2k+IE15IFByb2ZpbGUgPC9hPiA8L2xpPiA8bGkgb25jbGljaz1cInsgbGlua0FjY291bnQgfVwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtY29tcHJlc3NcIj48L2k+IExpbmsgQWNjb3VudCA8L2E+IDwvbGk+IDxsaSBvbmNsaWNrPVwieyBsb2dvdXQgfVwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtc2lnbi1vdXRcIj48L2k+IExvZyBPdXQgPC9hPiA8L2xpPiA8L3VsPiA8L2xpPiA8L3VsPiA8L2Rpdj4nLCBmdW5jdGlvbihvcHRzKSB7XG50aGlzLnVzZXJuYW1lID0gJyc7XG50aGlzLnBpY3R1cmUgPSAnJztcblxudmFyIHRoYXQgPSB0aGlzO1xubG9jYWxmb3JhZ2UuZ2V0SXRlbSgncHJvZmlsZScpLnRoZW4oZnVuY3Rpb24gKHByb2ZpbGUpIHtcbiAgICB0aGF0LnVzZXJuYW1lID0gcHJvZmlsZS5uaWNrbmFtZTtcbiAgICB0aGF0LnBpY3R1cmUgPSBwcm9maWxlLnBpY3R1cmUgfHwgJ2Fzc2V0cy9hZG1pbi9sYXlvdXQ0L2ltZy9hdmF0YXIuanBnJztcbiAgICB0aGF0LnVwZGF0ZSgpO1xufSk7XG5cbnRoaXMubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgIE1ldGFNYXAuQXV0aDAubG9nb3V0KCk7XG59O1xuXG50aGlzLmxpbmtBY2NvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgIE1ldGFNYXAuQXV0aDAubGlua0FjY291bnQoKTtcbn07XG59KTsiXX0=
