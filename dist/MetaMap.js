(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.MetaMap = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

require('babel/polyfill');
window.riot = require('riot');
window._ = require('lodash');
window.Promise = require('bluebird');
require('core-js');
window.$ = window.jQuery = require('jquery');
require('jquery-ui');
require('bootstrap');
window.Firebase = require('firebase');
window.Humanize = require('humanize-plus');
window.moment = require('moment');
window.URI = require('URIjs');
window.localforage = require('localforage');

require('./js/integrations/auth0');
require('./js/integrations/googleanalytics');
require('./js/integrations/newrelic');
require('./js/integrations/raygun');
require('./js/integrations/usersnap');

require('./tags/page-actions.tag');
require('./tags/page-container.tag');
require('./tags/page-content.tag');
require('./tags/page-footer.tag');
require('./tags/page-header.tag');
require('./tags/page-logo.tag');
require('./tags/page-search.tag');
require('./tags/page-sidebar.tag');
require('./tags/page-topmenu.tag');
require('./tags/page-body.tag');

require('./js/canvas/editor.js');
require('./js/canvas/user.js');
require('./js/canvas/join_nation.js');
require('./js/canvas/editor_options.js');
require('./js/canvas/tutorial.js');
require('./js/canvas/analytics.js');
require('./js/canvas/attachments.js');
require('./js/canvas/autosave.js');
require('./js/canvas/generator.js');
require('./js/canvas/history.js');
require('./js/canvas/layouts.js');
require('./js/canvas/gorges_grid.js');
require('./js/canvas/map.js');
require('./js/canvas/maps.js');
require('./js/canvas/feed.js');
require('./js/canvas/top_maps.js');
require('./js/canvas/perspectives.js');
require('./js/canvas/presenter.js');
require('./js/canvas/sharing.js');
require('./js/canvas/standards.js');
require('./js/canvas/tagging.js');
require('./js/canvas/tagging_admin.js');
require('./js/canvas/tagging_ccs.js');
require('./js/canvas/templates.js');
require('./js/canvas/tests.js');
require('./js/canvas/ui.js');

var mm = require('./MetaMap');

module.exports = new mm();

},{"./MetaMap":2,"./js/canvas/analytics.js":4,"./js/canvas/attachments.js":5,"./js/canvas/autosave.js":6,"./js/canvas/editor.js":7,"./js/canvas/editor_options.js":8,"./js/canvas/feed.js":9,"./js/canvas/generator.js":10,"./js/canvas/gorges_grid.js":11,"./js/canvas/history.js":12,"./js/canvas/join_nation.js":13,"./js/canvas/layouts.js":14,"./js/canvas/map.js":15,"./js/canvas/maps.js":16,"./js/canvas/perspectives.js":17,"./js/canvas/presenter.js":18,"./js/canvas/sharing.js":19,"./js/canvas/standards.js":20,"./js/canvas/tagging.js":21,"./js/canvas/tagging_admin.js":22,"./js/canvas/tagging_ccs.js":23,"./js/canvas/templates.js":24,"./js/canvas/tests.js":25,"./js/canvas/top_maps.js":26,"./js/canvas/tutorial.js":27,"./js/canvas/ui.js":28,"./js/canvas/user.js":29,"./js/integrations/auth0":32,"./js/integrations/googleanalytics":34,"./js/integrations/newrelic":35,"./js/integrations/raygun":36,"./js/integrations/usersnap":37,"./tags/page-actions.tag":61,"./tags/page-body.tag":62,"./tags/page-container.tag":63,"./tags/page-content.tag":64,"./tags/page-footer.tag":65,"./tags/page-header.tag":66,"./tags/page-logo.tag":67,"./tags/page-search.tag":68,"./tags/page-sidebar.tag":69,"./tags/page-topmenu.tag":70,"URIjs":undefined,"babel/polyfill":"babel/polyfill","bluebird":undefined,"bootstrap":undefined,"core-js":undefined,"firebase":undefined,"humanize-plus":undefined,"jquery":undefined,"jquery-ui":undefined,"localforage":undefined,"lodash":undefined,"moment":undefined,"riot":"riot"}],2:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var MetaFire = require('./js/integrations/firebase');
var Auth0 = require('./js/integrations/auth0');
var usersnap = require('./js/integrations/usersnap');
var User = require('./js/app/user.js');
var Editor = require('./js/map/editor.js');

var MetaMap = (function () {
    function MetaMap() {
        _classCallCheck(this, MetaMap);

        this.MetaFire = new MetaFire();
        this.Auth0 = new Auth0();
        usersnap();
    }

    _createClass(MetaMap, [{
        key: 'init',
        value: function init() {
            var _this = this;

            var self = this;
            this.Auth0.login().then(function (profile) {
                self.User = new User(profile);

                riot.mount('*');
                _.delay(function () {
                    Metronic.init(); // init metronic core componets
                    Layout.init(); // init layout
                    Demo.init(); // init demo features
                    Index.init(); // init index page
                    Tasks.initDashboardWidget(); // init tash dashboard widget
                    var x = { cssTagging: {} };

                    window.mapData = { 'map': { 'metadata': { 'sandbox': false, 'id': 5547, 'name': 'Untitled Map', 'url': '/maps/5547', 'canEdit': true, 'updatedAt': '2015-05-15T12:29:40.721-04:00', 'updatedBy': null, 'updatedByName': null, 'userTags': [] }, 'data': { 'class': 'go.GraphLinksModel', 'nodeIsLinkLabelProperty': 'isLinkLabel', 'linkLabelKeysProperty': 'labelKeys', 'linkFromPortIdProperty': 'fromPort', 'linkToPortIdProperty': 'toPort', 'nodeDataArray': [{ 'key': 1, 'text': 'New Idea', 'isGroup': true, 'loc': '0 0', 'layout': 'left', 'sExpanded': true, 'pExpanded': true }], 'linkDataArray': [] }, 'stateData': null, 'editorOptions': null, 'analytics': {}, 'versions': [] } };

                    //window._userCtrl = UserCtrl(x, x, '', '')
                    //window._mapEditorCtrl = MapEditorCtrl(x, x, '', '');
                    window.CrlMap = new Editor(window.mapData);
                }, 250);
                _this.MetaFire.init();
            });
        }
    }, {
        key: 'logout',
        value: function logout() {
            this.MetaFire.logout();
            this.Auth0.logout();
        }
    }]);

    return MetaMap;
})();

module.exports = MetaMap;

},{"./js/app/user.js":3,"./js/integrations/auth0":32,"./js/integrations/firebase":33,"./js/integrations/usersnap":37,"./js/map/editor.js":48}],3:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var User = (function () {
    function User(profile) {
        _classCallCheck(this, User);

        this.profile = profile;
        this.params = URI(window.location).query(true);
        this.thinkquery = this.params.thinkquery ? true : false;
    }

    _createClass(User, [{
        key: 'userId',
        get: function () {
            return this.profile.user_id;
        }
    }, {
        key: 'isAdmin',
        get: function () {
            return this.profile.roles.indexOf('admin') !== -1;
        }
    }, {
        key: 'name',
        get: function () {
            return this.profile.name;
        }
    }, {
        key: 'saveUserEditorOptions',
        value: function saveUserEditorOptions(options) {
            var data = {
                user: {
                    editor_options: JSON.stringify(options)
                }
            };

            //startSpinner();
            //$http.put('/users/' + $scope.userId + '.json', data).then(
            //    function (response) {
            //        stopSpinner();
            //    },
            //    function () {
            //        stopSpinner();
            //        $scope.profileEditStatus = 'Could not save editor options';
            //    }
            //);
        }
    }]);

    return User;
})();

module.exports = User;

},{}],4:[function(require,module,exports){
// functions handling analytics
// analytics display is in views/maps/_analytics_tab_map and _analytics_tab_thing
'use strict';

SandbankEditor.Analytics = function ($scope, map) {

    var self = this;

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.getUi().currentTabIs(map.getUi().TAB_ID_ANALYTICS_THING)) {
                self.updateContextualAnalytics();
            }
        }
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.getUi().TAB_ID_ANALYTICS_THING) {
            // opening thing analytics tab
            self.updateContextualAnalytics();
        }
    };

    // this gets populated by map.loadMapExtraData, on load and after every autosave
    this.mapAnalytics = null;

    // --------- contextual analytics --------------
    // - these are all calculated here, unlike map analytics which are calculated on the server and connected with badges and points

    // this gets calculated by updateContextualAnalytics
    this.contextualAnalytics = {
        thingName: '',

        // thing stuff
        distinctFrom: 0,
        intentionallyDistinctFrom: 0,
        partOf: 0,
        includesParts: 0,
        relatedTo: 0,
        isRelationship: 0,
        lookingAt: 0,
        lookedAtFrom: 0,

        // R stuff
        rFromThingName: '',
        rToThingName: '',
        isRThing: false,
        isRSystem: false,
        isRPoint: false,
        isRView: false
    };

    this.updateContextualAnalytics = function () {
        //console.log('updateContextualAnalytics');
        if (!map.getUi().currentTabIs(map.getUi().TAB_ID_ANALYTICS_THING)) {
            return;
        }

        var diagram = map.getDiagram();
        var part = diagram.selection.first();
        var a = self.contextualAnalytics;

        if (part && part instanceof go.Group) {
            var thing = part;

            // thing name
            a.thingName = thing.data.text;

            // distinct from
            a.distinctFrom = _.where(diagram.model.nodeDataArray, { isGroup: true }).length - 1;

            // part of
            var level = 0;
            var thing2 = thing;
            while (thing2 = getContainingGroup(thing2)) {
                level++;
            }
            a.partOf = level;

            // includes parts
            a.includesParts = countGroups(thing);

            // related to / looking at / looked at from / intentionally distinct from
            a.relatedTo = 0;
            a.lookingAt = 0;
            a.lookedAtFrom = 0;
            a.intentionallyDistinctFrom = 0;
            var links = thing.linksConnected;
            var rConnectedThingKeys = [];
            while (links.next()) {
                var link = links.value;
                // P link
                if (link.data.category == 'P') {
                    if (link.fromNode == thing) {
                        a.lookingAt++;
                    } else if (link.toNode == thing) {
                        a.lookedAtFrom++;
                    }
                }
                // D link
                else if (link.data.category == 'D') {
                    a.intentionallyDistinctFrom++;
                }
                // R link
                else if (!link.data.category) {
                    // track keys of related things so we don't count them multiple times
                    if (link.fromNode == thing) {
                        rConnectedThingKeys.push(link.toNode.data.key);
                    } else if (link.toNode == thing) {
                        rConnectedThingKeys.push(link.fromNode.data.key);
                    }
                }
            }
            a.relatedTo = _.uniq(rConnectedThingKeys).length;

            // isRelationship
            a.isRelationship = thing.isLinkLabel;
        } else if (part && part instanceof go.Link) {
            var rel = part;

            // thing names
            a.rFromThingName = rel.fromNode.data.text;
            a.rToThingName = rel.toNode.data.text;

            // is R thing
            a.isRThing = rel.isLabeledLink;

            // is R system
            a.isRSystem = rel.isLabeledLink && countGroups(rel.labelNodes.first()) > 0;

            // is R point
            a.isRPoint = rel.isLabeledLink && isPoint(rel.labelNodes.first());

            // is R view
            a.isRView = rel.isLabeledLink && isView(rel.labelNodes.first());
        }
    };

    // returns either the containingGroup or the rThingContainingGroup, whichever is non-null
    function getContainingGroup(group) {
        return group.containingGroup || getRThingContainingGroup(group);
    }

    // if group is an R-thing between two sibling parts of a whole, returns the whole; else returns null
    function getRThingContainingGroup(group) {
        if (group.isLinkLabel) {
            var fromParent = group.labeledLink.fromNode.containingGroup;
            var toParent = group.labeledLink.toNode.containingGroup;
            if (fromParent !== null && toParent !== null && fromParent == toParent) {
                return fromParent;
            }
        }
        return null;
    }

    // counts the member parts of the group that are groups, recursively (not including the group itself)
    function countGroups(group) {
        var count = 0;
        var it = getMemberGroups(group).iterator;
        while (it.next()) {
            var part = it.value;
            count += 1 + countGroups(part);
        }

        return count;
    }

    // returns the collection of groups that are either a memberPart of this group, or an R-thing between sibling memberParts
    function getMemberGroups(group) {
        var members = new go.List();
        var it = group.memberParts;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group) {
                members.add(part);
                var rthing = getRThingToSibling(part); // NB: should not get duplication here, as this checks for r-things in only one direction
                if (rthing) {
                    members.add(rthing);
                }
            }
        }
        return members;
    }

    // if the group is linked by an R-thing to a sibling (with the group as the fromNode), returns the R-thing; else returns null
    function getRThingToSibling(group) {
        var it = group.findLinksOutOf();
        while (it.next()) {
            var link = it.value;
            if (link.labelNodes.count > 0 && link.toNode.containingGroup == group.containingGroup) {
                return link.labelNodes.first();
            }
        }
        return null;
    }

    function isPoint(group) {
        var it = group.findLinksOutOf();
        while (it.next()) {
            var link = it.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    }

    function isView(group) {
        var it = group.findLinksInto();
        while (it.next()) {
            var link = it.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    }
};

},{}],5:[function(require,module,exports){
// functions handling attachments

'use strict';

window.SandbankEditor.Attachments = function ($scope, map) {

    var self = this;

    this.selectedThing = null;
    this.attachments = null;

    this.attachmentTypes = [{ name: 'note', labelSingular: 'Note', labelPlural: 'Notes' }, { name: 'link', labelSingular: 'Web Link', labelPlural: 'Web Links' }, { name: 'task', labelSingular: 'Task', labelPlural: 'Tasks' }, { name: 'map', labelSingular: 'Linked MetaMap', labelPlural: 'Linked MetaMaps' }
    //        {name: 'doc', labelSingular: 'Document', labelPlural: 'Documents'}  // limit overall storage space OR simpler rules?
    // limit file types - pdf, jpg, gif, png, office?...  whitelist vs. blacklist
    ];

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.getUi().currentTabIs(map.getUi().TAB_ID_ATTACHMENTS)) {
                self.stopEditingAll();
                self.saveAttachments();
                self.loadSelectedThingAttachments();
            }
        }
    };

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.getUi().TAB_ID_ATTACHMENTS) {
            // opening tab
            self.loadSelectedThingAttachments();
        }
        if (oldValue == map.getUi().TAB_ID_ATTACHMENTS) {
            // closing tab
            self.saveAttachments();
        }
    };

    this.loadSelectedThingAttachments = function () {
        $scope.safeApply(function () {
            if (map.thingSelected()) {
                self.selectedThing = map.getUniqueThingSelected();
                self.attachments = self.selectedThing.data.attachments;
                if (self.attachments === undefined) {
                    self.attachments = [];
                }
            }
        });
    };

    // set all attachments to editing = false
    this.stopEditingAll = function () {
        $scope.safeApply(function () {
            if (self.attachments) {
                _.each(self.attachments, function (att) {
                    att.editing = false;
                });
            }
        });
    };

    this.editingAnItem = function () {
        return self.attachments && _.findWhere(self.attachments, { editing: true }) !== undefined;
    };

    // set all other attachments to editing = false
    this.startEditing = function (attachment) {
        $scope.safeApply(function () {
            self.stopEditingAll();
            attachment.editing = true;
        });
    };

    this.saveItem = function (attachment) {
        $scope.safeApply(function () {
            attachment.editing = false;
            self.saveAttachments();
        });
    };

    this.saveAttachments = function () {
        $scope.safeApply(function () {
            console.log('saveAttachments, selected: ' + self.selectedThing);
            if (self.selectedThing) {
                map.getDiagram().model.setDataProperty(self.selectedThing.data, 'attachments', self.attachments);
                self.selectedThing.updateTargetBindings();
            }
            map.getAutosave().saveNow('edit_attachments');
        });
    };

    this.listAttachments = function (type) {
        var atts = _.where(self.attachments, { type: type });
        return atts;
    };

    this.addAttachment = function (type) {
        var item = { type: type, editing: true };
        if (type == 'note') {
            self.attachments.push(_.extend(item, { text: '', url: '' }));
        } else if (type == 'link') {
            self.attachments.push(_.extend(item, { label: '', url: '' }));
        } else if (type == 'task') {
            self.attachments.push(_.extend(item, { text: '' }));
        } else if (type == 'doc') {
            self.attachments.push(_.extend(item, { name: '' }));
        } else if (type == 'map') {
            self.attachments.push(_.extend(item, { mapRef: { id: 0, name: '' } }));
        }
    };

    this.isValid = function (attachment) {
        if (attachment.type == 'link') {
            return attachment.label && attachment.url && attachment.label.trim() !== '' && attachment.url.trim() !== '';
        } else if (attachment.type == 'note') {
            return attachment.text && attachment.text.trim() !== '';
        } else if (attachment.type == 'task') {
            return attachment.text && attachment.text.trim() !== '';
        } else if (attachment.type == 'doc') {
            return attachment.name && attachment.name.trim() !== '';
        } else if (attachment.type == 'map') {
            return attachment.mapRef && attachment.mapRef.id !== null && attachment.mapRef.id !== undefined;
        }
    };

    this.deleteAttachment = function (att) {
        var typeLabel = _.findWhere(self.attachmentTypes, { name: att.type }).labelSingular;
        if (confirm('Delete ' + typeLabel + '?')) {
            var i = _.indexOf(self.attachments, att);
            self.attachments.splice(i, 1);
        }
    };

    // query server for maps containing the given text in the map name
    this.getOtherMaps = function (viewValue) {
        // NB: this URL is constructed to match the one generated by the search form on the maps page...
        var url = '/maps/visible_maps.json?utf8=%E2%9C%93&q%5Bname_cont%5D=' + viewValue;
        return $http.get(url).then(function (response) {
            return response.data.maps;
        });
    };

    this.otherMapSelected = function (viewValue, modelValue) {
        console.log('otherMapSelected, viewValue: ' + viewValue.id + ', modelValue: ' + modelValue);
    };

    this.formatOtherMap = function (model) {
        return model ? model.name : '';
    };
};

},{}],6:[function(require,module,exports){
// functions handling editor autosave function

'use strict';

SandbankEditor.Autosave = function ($scope, map) {

    var self = this;

    var $http = {
        put: function put() {
            return new Promise(function (fulfill, reject) {});
        }
    };

    var changeTypes = [];

    this.saveOnModelChanged = true;

    // do a save next time the set interval passes with no save requests
    this.save = function (changeType) {
        changeTypes.push(changeType);
        delayedAutosave();
    };

    // do a save right now
    this.saveNow = function (changeType) {
        changeTypes.push(changeType);
        autosave();
    };

    // don't let autosave be triggered more than every N milliseconds...
    var delayedAutosave = _.debounce(autosave, 2000);

    // compile the current list of change type descriptions, process them
    // to remove duplicates, and save the current data
    function autosave() {
        // stop right here if we're in the sandbox and/or we don't have edit permissions
        if ($scope.sandbox || !$scope.canEdit) {
            return;
        }

        if (!changeTypes.length) {
            console.log('autosave: nothing to save!'); // shouldn't happen
            return;
        }

        // de-dupe the list of change types
        var changeList = _.uniq(changeTypes);
        //console.log('changeList: ' + changeList);
        // don't show move events unless that's all we have
        var changeListWithoutMoves = _.without(changeList, 'move');
        if (changeListWithoutMoves.length > 0) {
            changeList = changeListWithoutMoves;
        }
        //console.log('changeList without moves: ' + changeList);
        // get descriptions
        var descriptionList = _.map(changeList, function (ct) {
            return _.result(changeDescriptions, ct);
        });

        //console.log('autosave, changeList: ' + changeList + ', descriptionList: ' + descriptionList);
        var postData = {
            'name': $scope.mapTitle,
            'data': map.getDiagram().model.toJson(),
            'state_data': JSON.stringify(map.getUi().getStateData()),
            'editor_options': JSON.stringify(map.getUi().getMapEditorOptions()),
            'presenter_slides': map.getPresenter().getSlideCount(),
            'activity_slides': map.getPresenter().getActivitySlideCount(),
            'change_type': changeList.join(';'),
            'change_description': descriptionList.join('; '),
            'thumbnail_png': map.getPresenter().getMapThumbnail()
        };
        var url = $scope.mapUrl + '.json';

        $scope.updateEditStatus($scope.SAVING);
        $http.put(url, postData).then(function (response) {
            changeTypes = [];
            $scope.updateEditStatus($scope.SAVE_OK);
            // load returned data for analytics, points, badges, versions
            $scope.map.loadMapExtraData(response.data.map);
        }, function () {
            $scope.updateEditStatus($scope.SAVE_FAILED);
        });
    }

    // -------------- handle model changes - trigger autosave ------------------

    var changeDescriptions = {
        move: 'Moved Objects',
        undo_redo: 'Performed Undo/Redo',
        edit_title: 'Edited MetaMap Title',
        edit_description: 'Edited MetaMap Description',
        edit_usertags: 'Edit MetaMap Tags',
        edit_d: 'Edited Distinctions',
        edit_s: 'Edited Systems',
        edit_r: 'Edited Relationships',
        edit_p: 'Edited Perspectives',
        add_thing: 'Added Ideas',
        rename_thing: 'Renamed Ideas',
        delete_thing: 'Deleted Ideas',
        edit_attachments: 'Edited Attachments',
        edit_presenter: 'Edited Presenter Slides',
        edit_generator: 'Inserted Ideas from ThinkQuery',
        edit_standards: 'Edited Links to Common Core Standards'
    };

    // e is a go.ChangedEvent
    this.modelChanged = function (e) {

        if (!self.saveOnModelChanged) {
            return;
        }

        var changeType = null;
        var changeDescription = null;

        if (e.propertyName == 'type') {
            // change R type
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,n,1,o,2,A,3,r,4,r,5,o,6,w,7,s] , newParam: null, newValue: [0,t,1,o] , propertyName: type
            changeType = 'edit_r';
            changeDescription = 'Changed Relationship Types';
        } else if (e.propertyName == 'layout') {
            // change system layout
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,l,1,e,2,f,3,t] , newParam: null, newValue: [0,r,1,i,2,g,3,h,4,t] , propertyName: layout
            changeType = 'edit_s';
        } else if (e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'fromPort', 'R')) {
            // add link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,P] , propertyName: linkDataArray
            // modelChange: linkToPortId, change: ChangedEvent.Property, oldParam: null, oldValue: [0,P] , newParam: null, newValue: [0,R] , propertyName: toPort
            changeType = 'edit_r';
        } else if (e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'fromPort', 'R')) {
            // delete link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,R] , newParam: null, newValue: [] , propertyName: linkDataArray
            changeType = 'edit_r';
        } else if (e.propertyName == 'linkDataArray') {
            // change P/D links
            // add P link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 2, newValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P] , propertyName: linkDataArray
            // modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
            // delete P link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 2, oldValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P,category,P] , newParam: null, newValue: [] , propertyName: linkDataArray
            // add D link
            // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , propertyName: linkDataArray
            // remove D link
            // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , newParam: null, newValue: [] , propertyName: linkDataArray

            if (e.newValue && e.newValue.category == 'P' || e.oldValue && e.oldValue.category == 'P') {
                changeType = 'edit_p';
            } else if (e.newValue && e.newValue.category == 'D' || e.oldValue && e.oldValue.category == 'D') {
                changeType = 'edit_d';
            }
        } else if (e.propertyName == 'category') {
            // add P link
            // modelChanged, modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
            changeType = 'edit_p';
        } else if (e.propertyName == 'group') {
            // drag into S
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
            // reorder part
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
            // drag to D
            // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group

            changeType = 'edit_s';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'isGroup', true)) {
            // add thing
            // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7] , propertyName: nodeDataArray
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,2,1,2,2,8,3,.,4,5,5,6,6,2,7,5,8, ,9,-,10,1,11,4,12,9,13,.,14,6,15,8,16,7,17,5] , propertyName: loc
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: children
            changeType = 'add_thing';
        } else if (e.propertyName == 'text') {
            // move thing
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,b,1,b,2,b,3,b,4,b] , newParam: null, newValue: [0,a,1,a,2,a,3,a,4,a] , propertyName: text
            changeType = 'rename_thing';
            changeDescription = 'Renamed Ideas';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'isGroup', true)) {
            // delete thing
            // modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7,loc,228.5625 -149.6875,children,0,attachments,] , newParam: null, newValue: [] , propertyName: nodeDataArray
            changeType = 'delete_thing';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Insert && propertyEquals(e.newValue, 'isGroup', false)) {
            // add slide
            // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877] , propertyName: nodeDataArray
            changeType = 'edit_presenter';
        } else if (e.propertyName == 'nodeDataArray' && e.change == go.ChangedEvent.Remove && propertyEquals(e.oldValue, 'isGroup', false)) {
            // delete slide
            //modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877,$$hashKey,0XN] , newParam: null, newValue: [] , propertyName: nodeDataArray
            changeType = 'edit_presenter';
        } else if (e.propertyName == 'loc' || e.propertyName == 'width' || e.propertyName == 'height') {
            // move thing or resize slide
            // move slide
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,8] , newParam: null, newValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,7] , propertyName: loc
            // resize slide
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: height
            // move thing
            // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,4,1,7,2,9,3,.,4,8,5,7,6,5,7, ,8,-,9,1,10,2,11,2,12,.,13,8,14,7,15,5] , newParam: null, newValue: [0,5,1,4,2,0,3,.,4,3,5,1,6,2,7,5,8, ,9,-,10,1,11,2,12,1,13,.,14,1,15,8,16,7,17,5] ,            
            changeType = 'move';
        } else if (e.propertyName == 'level' || e.propertyName == 'children') {
            // these attributes are updated as a result of other actions; ignore
            changeType = null;
        } else if (e.propertyName == 'attachments') {
            // edited attachments
            changeType = 'edit_attachments';
        } else if (e.propertyName == 'sExpanded' || e.propertyName == 'pExpanded') {
            // ignore expand/collapse
            changeType = 'move';
        } else if (e.propertyName == 'FinishedUndo' || e.propertyName == 'FinishedRedo') {
            changeType = 'undo_redo';
            map.refresh();
        } else if (e.change != go.ChangedEvent.Transaction) {
            console.log('modelChanged, modelChange: ' + e.modelChange + ', change: ' + e.change + ', oldParam: ' + e.oldParam + ', oldValue: [' + _.pairs(e.oldValue) + '] ' + ', newParam: ' + e.newParam + ', newValue: [' + _.pairs(e.newValue) + '] ' + ', propertyName: ' + e.propertyName);
        }

        if (changeType) {
            map.getAnalytics().updateContextualAnalytics();
            //console.log('calling delayedAutosave, changeType: ' + changeType);
            self.save(changeType);
        }
    };

    // convenience function for checking properties
    function propertyEquals(obj, key, value) {
        return obj !== null && _.has(obj, key) && _.result(obj, key) == value;
    }
};

},{}],7:[function(require,module,exports){
// main controller class

'use strict';

window.SandbankEditor = {};

window.MapEditorCtrl = function ($scope) {

    $scope.map = new SandbankEditor.Map($scope);

    // window.mapData is set in _form view
    var metadata = window.mapData.map.metadata;
    $scope.sandbox = metadata.sandbox;
    $scope.mapData = window.mapData.map.data; // this gets overwritten by load() unless we are in the sandbox with no map ID
    $scope.mapId = metadata.id;
    $scope.mapTitle = metadata.name;
    $scope.mapUserTags = metadata.userTags;
    $scope.mapUrl = metadata.url;
    $scope.canEdit = metadata.canEdit;
    $scope.updatedAt = metadata.updatedAt;
    $scope.updatedBy = metadata.updatedBy; // ID
    $scope.updatedByName = metadata.updatedByName;

    $scope.editingTitle = false;

    $scope.showImageExport = false;
    $scope.imageExportLoading = true;

    $scope.currentTab = null;

    // override parent scope (see user.js) since we're editing a map
    $scope.ccsTagging.mapId = $scope.mapId;

    $scope.maybeStartEditingTitle = function () {
        if ($scope.canEdit) {
            $scope.editingTitle = true;
        }
    };

    $scope.doneEditingTitle = function () {
        //console.log('doneEditingTitle');
        $scope.editingTitle = false;
        $scope.map.getAutosave().save('edit_title');
    };

    $scope.editingTitleKeypress = function (e) {
        if (e.which == 13) {
            $scope.doneEditingTitle();
        }
    };

    $scope.print = function () {
        window.print();
    };

    // ------------ save sandbox map (sign up/sign in) ---------------

    $scope.saveSandboxMap = function () {
        var modalInstance = $modal.open({
            templateUrl: 'template_sandbox_save_modal.html', // see views/users/_template_sandbox_save_modal
            backdrop: 'static',
            controller: sandboxSaveModalCtrl,
            windowClass: 'sandbox-save-modal',
            resolve: {
                outerScope: function outerScope() {
                    return $scope;
                },
                map: function map() {
                    return $scope.map;
                },
                userProfile: function userProfile() {
                    return $scope.userProfile;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    var sandboxSaveModalCtrl = function sandboxSaveModalCtrl($scope, $modalInstance, outerScope, map, userProfile) {

        $scope.map = map;
        $scope.userProfile = userProfile;

        $scope.mapData = map.getDiagram().model.toJson();
        $scope.thumbnailPng = map.getPresenter().getMapThumbnail();

        function getDefaultLoginData() {
            return {
                email: '',
                password: ''
            };
        }

        // this structure is used to store the form data, as well as the validation errors returned from the server...
        function getDefaultSignupData() {
            return {
                email: '',
                first_name: '',
                last_name: '',
                password: '',
                password_confirmation: ''
            };
        }

        $scope.loginData = getDefaultLoginData();
        $scope.loginError = '';

        $scope.signupData = getDefaultSignupData();
        $scope.signupErrors = getDefaultSignupData();

        $scope.doLogin = function () {
            $scope.loginErrors = getDefaultLoginData(); // reset errors
            $http.post('/sign_in.json', {
                user: $scope.loginData
            }).then(function (response) {
                // data is {id:XX, ...}
                outerScope.setUserId(response.data.id);
                outerScope.loadUserProfile(function () {
                    $scope.userProfile = outerScope.userProfile;
                });
            }, function (response) {
                // data is {"error": "Invalid email or password"}
                $scope.loginError = response.data.error;
            });
        };

        $scope.doSignup = function () {
            $scope.signupErrors = getDefaultSignupData(); // reset errors
            $http.post('/users.json', {
                user: $scope.signupData
            }).then(function (response) {
                // data is new user ID
                outerScope.setUserId(response.data);
                outerScope.loadUserProfile(function () {
                    $scope.userProfile = outerScope.userProfile;
                });
            }, function (response) {
                // data is e.g. {"first_name":["can't be blank"], ...}
                _.each(_.keys(response.data), function (key) {
                    $scope.signupErrors[key] = response.data[key].join('; ');
                });
            });
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };

    // ------------- edit status message for header bar ------------------

    $scope.editStatus = '';

    $scope.LAST_UPDATED = '';
    $scope.READ_ONLY = 'View only';
    $scope.SAVING = 'Saving...';
    $scope.SAVE_OK = 'All changes saved';
    $scope.SAVE_FAILED = 'Changes could not be saved';

    $scope.updateEditStatus = function (s) {
        //console.log('updateEditStatus: ' + s);
        $scope.editStatus = s;
        if (s == $scope.SAVE_FAILED) {
            alert('Changes could not be saved - please check your network connection.');
        } else if (s == $scope.LAST_UPDATED) {
            var time = moment($scope.updatedAt).fromNow();
            var by = '';
            if ($scope.updatedBy == $scope.userId) {
                by = 'by me';
            } else if ($scope.updatedByName) {
                by = 'by ' + $scope.updatedByName;
            }
            // TODO: show 'by me' only for editable shared maps?

            $scope.editStatus = 'Last updated ' + time + ' ' + by;
        }

        // Last edit was XX ago by YY
    };

    // -------------------------------------------------------------

    function init() {
        $scope.safeApply(function () {
            $scope.map.init();

            if (!$scope.sandbox) {}

            if ($scope.mapUrl) {
                $scope.map.load();
            } else {
                $scope.map.loadForSandbox();
            }

            addBehaviors();
            handleNavigation();
            handleBackspace();
        });
    }

    // misc. UI behaviors for tooltips, popups etc.
    // TODO: figure out which of these need to be reapplied after dynamic data changes (e.g. LessonBook popovers)
    function addBehaviors() {

        // NOTE: we have to use regular bootstrap tooltips for toolbar buttons (instead of ng-bootstrap ones)
        // so we can turn them off for mobile. We also put the tooltips on wrappers rather than on the actual
        // buttons, so we can avoid the issue of stuck tooltips if a button gets disabled while the tooltip is showing.

        if (!$scope.isTouchDevice()) {
            // $('.tooltip-wrapper').tooltip({
            //     placement: 'top',
            //     container: 'body'
            // });

            // $('.dropdown-menu .btn').tooltip({
            //     placement: 'left',
            //     container: 'body'
            // }); // for layout options

            $('header, #map-title').hover(function () {
                $('body.presenter-playing').addClass('hide-header');
            }, function () {
                $('body.presenter-playing').removeClass('hide-header');
            });
        }
    }

    function handleNavigation() {
        // cross-browser tweaks:
        try {
            // http://www.opera.com/support/kb/view/827/
            opera.setOverrideHistoryNavigationMode('compatible');
            history.navigationMode = 'compatible';
        } catch (e) {}

        // install before-unload handler:

        function exitMessage() {
            return 'Navigating away from your Map will cause any unsaved changes to be lost ' + '(any changes you make are automatically saved, but it takes a couple of seconds).';
        }

        //        $(window).bind('beforeunload', exitMessage);

        // prevent exit prompt when the user deliberately navigates away:

        $('#header-right a').click(function () {
            $(window).unbind('beforeunload', exitMessage);
        });
    }

    function handleBackspace() {
        var BACKSPACE = 8;

        $(document).on('keydown', function (event) {
            if (event.keyCode === BACKSPACE) {
                if (!$('body :focus').is(':input')) {
                    // prevent accidental backspace when no input has focus:
                    event.preventDefault();
                    event.stopPropagation();
                }
            }
        });
    }

    init();
};

// overview diagram
//var overview = go.GraphObject.make(go.Overview, "overview-diagram", {
//    observed: $scope.map.getDiagram(),
//    contentAlignment: go.Spot.Center
//});
//var outline = overview.box.elements.first();
//outline.stroke = "#333";

// no biggie.

},{}],8:[function(require,module,exports){
'use strict';

window.SandbankEditorOptions = {};

SandbankEditorOptions = function ($scope) {

    this.openModal = function (_options, _onSaveDefaults, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_editor_options_modal.html', // see views/maps/_template_editor_options_modal
            backdrop: 'static',
            controller: optionsModalCtrl,
            windowClass: 'options-modal',
            resolve: {
                options: function options() {
                    return _options;
                },
                onSaveDefaults: function onSaveDefaults() {
                    return _onSaveDefaults;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for options modal ---------------------

    var optionsModalCtrl = function optionsModalCtrl($scope, $modalInstance, options, onSaveDefaults, onUpdate) {

        $scope.options = options;

        $scope.setDefaults = {
            value: false
        };

        $scope.ok = function () {
            onUpdate($scope.options);
            if ($scope.setDefaults.value) {
                onSaveDefaults($scope.options);
            }
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };
};

},{}],9:[function(require,module,exports){
// controller for public maps

'use strict';

window.MapsFeedCtrl = function ($scope) {

    $scope.showAdvancedSearch = true;
    $scope.loadingFeed = false;

    $scope.events = [];
    $scope.organizations = [];
    $scope.adminTags = [];

    $scope.sortOptions = [{
        name: 'MOST_RECENT',
        label: 'Most Recent'
    }, {
        name: 'MOST_LIKED',
        label: 'Most Liked'
    }, {
        name: 'MOST_COMMENTED',
        label: 'Most Commented'
    }];

    $scope.filters = [{
        name: 'ALL',
        label: 'All Public Maps'
    }, {
        name: 'FOLLOWED_MAPS',
        label: 'Maps I Follow'
    }, {
        name: 'LIKED_MAPS',
        label: 'Maps I\'ve Liked'
    }, {
        name: 'FOLLOWED_PEOPLE',
        label: 'Maps by People I Follow'
    }, {
        name: 'TAGGED_MAPS',
        label: 'Maps Tagged with My Tags'
    }];

    function getDefaultSearchParams() {
        return {
            text: '',
            organizationId: '',
            adminTagId: '',
            tags: [],
            standards: [],
            withSlides: false,
            withActivitySlides: false,
            sortBy: 'MOST_RECENT',
            filter: 'ALL'
        };
    }

    $scope.searchParams = getDefaultSearchParams();

    $scope.searchParamsToQueryString = function () {
        var sp = $scope.searchParams;
        return 'text=' + sp.text + '&organizationId=' + sp.organizationId + '&adminTagId=' + sp.adminTagId + '&tags=' + sp.tags + '&standards=' + sp.standards + '&withSlides=' + sp.withSlides + '&withActivitySlides=' + sp.withActivitySlides + '&sortBy=' + sp.sortBy + '&filter=' + sp.filter;
    };

    // ----------- query string params to show single event for notifications -------------

    $scope.getNotificationSearchParams = function () {
        var params = _.map(['like', 'comment', 'share'], function (action) {
            return action + '_id=' + (_.has($scope.params, action + '_id') ? $scope.params[action + '_id'] : 'null');
        });
        return params.join('&');
    };

    // $scope.params is set in user.js
    $scope.isSingleCommentView = function () {
        return _.has($scope.params, 'comment_id') && $scope.params['comment_id'] != null;
    };

    // ---------------- map data -----------------

    $scope.eventLimit = 10;

    $scope.loadFeed = function (increment) {

        if (increment) {
            $scope.eventLimit += increment;
        }

        $scope.loadingFeed = true;
        startSpinner();
        $http.get('/maps/feed.json?' + $scope.searchParamsToQueryString() + '&' + $scope.getNotificationSearchParams() + '&limit=' + $scope.eventLimit).then(function (response) {
            $scope.events = response.data.events;
            $scope.organizations = response.data.organizations;
            $scope.adminTags = response.data.adminTags;
            stopSpinner();
            $scope.loadingFeed = false;
        }, function () {
            stopSpinner();
            $scope.loadingFeed = false;
            alert('Could not load MetaMap feed');
        });
    };

    $scope.loadFeed();

    // -------------- infinite scrolling ------------------

    $scope.moreEvents = function () {
        console.log('moreEvents!');
        if (!$scope.loadingFeed) {
            $scope.loadFeed(10);
        }
    };

    // -------------- search form ------------------

    $scope.doSearch = function () {
        $scope.loadFeed();
    };

    $scope.resetSearch = function () {
        $scope.searchParams = getDefaultSearchParams();
        $scope.showAdvancedSearch = false;
        $scope.loadFeed();
    };

    // -------------- view helpers -----------------

    $scope.getTotalTagCount = function (event) {
        return event.map.userTags.length + event.map.adminTags.length + event.map.ccsTags.length;
    };

    // ------------- comment on a map -----------------

    // these are indexed by the index of the event in the feed
    $scope.showAllComments = [];
    $scope.newComments = [];

    // NB: when posting a new comment we don't reload the feed, so
    // that the new comment will stay visible rather than having the
    // feed scroll to the top.
    $scope.addComment = function (eventIndex) {
        var event = $scope.events[eventIndex];
        var mapId = event.map.id;
        var comment = $scope.newComments[eventIndex];
        $http.post('/comments', {
            map_id: mapId,
            text: comment
        }).then(function (response) {
            event.map.comments.push({
                authorId: $scope.userId,
                text: comment,
                updatedAt: event.now,
                author: {
                    id: $scope.userId,
                    name: $scope.userName,
                    avatar: $scope.userProfile.user.avatar
                }
                // TODO: figure out how to show true current time, rather than event.now,
                // which could be a minute or two ago... ??
            });
            $scope.newComments[eventIndex] = ''; // clear edit field
        }, function () {
            alert('Could not post your comment');
        });
    };

    $scope.deleteComment = function (eventIndex, commentId) {
        // console.log('eventIndex: ' + eventIndex);
        var event = $scope.events[eventIndex];
        var mapId = event.map.id;
        $http['delete']('/comments/' + commentId).then(function (response) {
            event.map.comments = _.filter(event.map.comments, function (elt) {
                return elt.id != commentId;
            });
        }, function () {
            alert('Could not delete your comment');
        });
    };

    $scope.focusNewComment = function (eventIndex) {
        $scope.showAllComments[eventIndex] = !$scope.showAllComments[eventIndex];
        window.setTimeout(function () {
            $('#new-comment_' + eventIndex).focus();
        }, 300);
    };

    // ------------- like a map -----------------

    $scope.addLike = function (map) {
        $http.post('/likes', {
            map_id: map.id
        }).then(function (response) {
            //console.log('addLike, response:', response);
            map.likeCount = response.data;
        }, function () {});
    };

    // ----------------- follow a map -----------------

    $scope.addMapFollow = function (map) {
        $http.post('/map_follows', {
            map_id: map.id
        }).then(function (response) {
            map.followCount = response.data;
        }, function () {});
    };
};

},{}],10:[function(require,module,exports){
// functions for the generator (aka ThinkQuery)

'use strict';

var GeneratorCtrl = function GeneratorCtrl($scope) {

    var map = $scope.map;
    var diagram = $scope.map.getDiagram();

    $scope.concept1 = '';
    $scope.concept2 = '';

    $scope.echoConcept1 = function () {
        return $scope.concept1 || '...';
    };

    $scope.echoConcept2 = function () {
        return $scope.concept2 || '...';
    };

    $scope.swapConcepts = function () {
        var tmp = $scope.concept1;
        $scope.concept1 = $scope.concept2;
        $scope.concept2 = tmp;
        $scope.safeApply();
    };

    $scope.mapIt = function (question) {
        startSpinner();
        diagram = map.getDiagram();
        map.getAutosave().saveOnModelChanged = false;

        if ($scope.sandbox) {
            diagram.clear();
        }

        // figure out location for inserted stuff
        var db = map.computeMapBounds();
        var x = db.x + db.width + 200;
        var y = db.y;
        if (isNaN(x) || isNaN(y)) {
            x = y = 0;
        }
        //console.log('x, y: ' + x + ', ' + y);

        // insert the stuff and deselect it
        question(x, y);
        diagram.clearSelection();

        diagram.updateAllTargetBindings();
        diagram.layoutDiagram(true);

        map.getUi().resetZoom();

        map.getAutosave().saveOnModelChanged = true;
        map.getAutosave().save('edit_generator');
        stopSpinner();
    };

    $scope.selectedQuestion = null;

    $scope.selectQuestion = function (question) {
        $scope.selectedQuestion = question;
        if ($scope.sandbox) {
            $scope.mapIt(question);
        }
    };

    $scope.surpriseMe = function () {
        var keys = _.keys($scope.queries);
        var i = _.random(0, keys.length - 1);
        var question = $scope.queries[keys[i]];
        $scope.selectedQuestion = question;
        $scope.mapIt(question);

        $('#questions').animate({ scrollTop: i * 30 }, 1000);
    };

    // ---------- functions for creating each of the structures - see views/maps/generator_tab -----------

    $scope.queries = {

        WHAT_IS: function WHAT_IS(x, y) {
            // 1
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
        },

        WHAT_IS_NOT: function WHAT_IS_NOT(x, y) {
            // 2
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is not?');
            map.createChild(thing1, 'is not?');
            map.createChild(thing1, 'is not?');
        },

        DISTINGUISH_BETWEEN: function DISTINGUISH_BETWEEN(x, y) {
            // 3
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');
            map.createChild(thing1, 'is?');

            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            diagram.model.setDataProperty(thing2.data, 'dflag', true);
            map.createChild(thing2, 'is?');
            map.createChild(thing2, 'is?');
            map.createChild(thing2, 'is?');
        },

        COMPARE_CONTRAST: function COMPARE_CONTRAST(x, y) {
            // 4
            var thing1 = map.createThing(x - 150, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 150, y, $scope.echoConcept2());
            diagram.model.setDataProperty(thing1.data, 'dflag', true);
            diagram.model.setDataProperty(thing2.data, 'dflag', true);
            var rthing1 = map.createRLinkWithRThing(thing1, thing2, 'contrast');
            var rthing2 = map.createRLinkWithRThing(thing1, thing2, 'compare');
            diagram.model.setDataProperty(rthing1.labeledLink.data, 'type', 'toFrom');
            diagram.model.setDataProperty(rthing2.labeledLink.data, 'type', 'toFrom');
        },

        PARTS_OF: function PARTS_OF(x, y) {
            // 5
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            map.createChild(thing1, 'part?');
            map.createChild(thing1, 'part?');
            map.createChild(thing1, 'part?');
        },

        PART_OF: function PART_OF(x, y) {
            // 6
            var thing1 = map.createThing(x, y, 'part of?');
            map.createChild(thing1, $scope.echoConcept1());
        },

        PARTS_HAVE_PARTS: function PARTS_HAVE_PARTS(x, y) {
            // 7
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part?');
            map.createChild(child1, 'part?');
            map.createChild(child1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            map.createChild(child2, 'part?');
            map.createChild(child2, 'part?');
        },

        R_PARTS: function R_PARTS(x, y) {
            // 8
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            var rthing = map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createChild(rthing, 'part?');
            map.createChild(rthing, 'part?');
        },

        P_PARTS: function P_PARTS(x, y) {
            // 9
            var thing1 = map.createThing(x + 300, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var child2 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var child3 = map.createChild(thing1, 'part seen from viewpoint of ' + $scope.echoConcept2() + '?');
            var thing2 = map.createThing(x, y, $scope.echoConcept2());
            map.createPLink(thing2, thing1);
            map.createPLink(thing2, child1);
            map.createPLink(thing2, child2);
            map.createPLink(thing2, child3);
        },

        RS_TO_AND_BY: function RS_TO_AND_BY(x, y) {
            // 10
            var related1 = map.createThing(x, y, 'related idea?');
            var related2 = map.createThing(x + 300, y + 50, 'related idea?');
            var related3 = map.createThing(x + 50, y + 300, 'related idea?');
            var thing = map.createThing(x + 130, y + 130, $scope.echoConcept1());
            map.createRLink(related1, thing);
            map.createRLink(related2, thing);
            map.createRLink(related3, thing);

            var thing1 = map.createThing(x + 500, y + 150, 'idea?');
            var thing2 = map.createThing(x + 750, y + 150, 'idea?');
            map.createRLinkWithRThing(thing1, thing2, $scope.echoConcept1());
        },

        WHAT_IS_R: function WHAT_IS_R(x, y) {
            // 11
            var thing1 = map.createThing(x, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            map.createRLinkWithRThing(thing1, thing2, 'idea?');
        },

        PART_RS_ARE: function PART_RS_ARE(x, y) {
            // 12
            var thing1 = map.createThing(x + 30, y, $scope.echoConcept1(), 'freehand');
            var child1 = map.createChild(thing1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            var child3 = map.createChild(thing1, 'part?');
            diagram.model.setDataProperty(child1.data, 'loc', '-20 110');
            diagram.model.setDataProperty(child2.data, 'loc', '80 110');
            diagram.model.setDataProperty(child3.data, 'loc', '30 190');
            map.createRLinkWithRThing(child1, child2, 'relationship?');
            map.createRLinkWithRThing(child2, child3, 'relationship?');
            map.createRLinkWithRThing(child3, child1, 'relationship?');
        },

        PART_RS_EXIST: function PART_RS_EXIST(x, y) {
            // 13
            var thing1 = map.createThing(x, y, $scope.echoConcept1(), 'right');
            var child11 = map.createChild(thing1, 'part?');
            var child12 = map.createChild(thing1, 'part?');
            var child13 = map.createChild(thing1, 'part?');
            var thing2 = map.createThing(x + 250, y, $scope.echoConcept2());
            var child21 = map.createChild(thing2, 'part?');
            var child22 = map.createChild(thing2, 'part?');
            var child23 = map.createChild(thing2, 'part?');
            map.createRLink(thing1, thing2);
            map.createRLinkWithRThing(child11, child21, 'relationship?');
            map.createRLinkWithRThing(child12, child22, 'relationship?');
            map.createRLinkWithRThing(child13, child23, 'relationship?');
        },

        RS_WITH_OTHERS: function RS_WITH_OTHERS(x, y) {
            // 14
            var thing1 = map.createThing(x - 200, y, $scope.echoConcept1());
            var thing2 = map.createThing(x + 200, y, $scope.echoConcept2());
            var thing3 = map.createThing(x - 200, y + 200, 'another thing');
            var thing4 = map.createThing(x + 200, y + 200, 'another thing');
            map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createRLinkWithRThing(thing1, thing3, 'relationship?');
            map.createRLinkWithRThing(thing1, thing4, 'relationship?');
            map.createRLinkWithRThing(thing2, thing4, 'relationship?');
            map.createRLinkWithRThing(thing3, thing4, 'relationship?');
        },

        PARTS_OF_P: function PARTS_OF_P(x, y) {
            // 15
            var thing1 = map.createThing(x - 100, y, $scope.echoConcept1());
            var child1 = map.createChild(thing1, 'part?');
            var child2 = map.createChild(thing1, 'part?');
            var child3 = map.createChild(thing1, 'part?');
            var thing2 = map.createThing(x + 100, y, $scope.echoConcept2());
            map.createPLink(thing1, thing2);
        },

        POINT_FOR: function POINT_FOR(x, y) {
            // 16
            var thing = map.createThing(x, y, 'new perspective');
            var thing1 = map.createThing(x - 150, y + 150, $scope.echoConcept1());
            var thing2 = map.createThing(x + 150, y + 150, $scope.echoConcept2());
            var rthing = map.createRLinkWithRThing(thing1, thing2, 'relationship?');
            map.createPLink(thing, rthing);
        },

        HAS_MULTIPLE_PS: function HAS_MULTIPLE_PS(x, y) {
            // 17
            var point1 = map.createThing(x, y + 50, 'viewpoint?');
            var point2 = map.createThing(x + 250, y, 'viewpoint?');
            var point3 = map.createThing(x + 500, y + 50, 'viewpoint?');
            var view = map.createThing(x + 250, y + 250, $scope.echoConcept1());
            map.createPLink(point1, view);
            map.createPLink(point2, view);
            map.createPLink(point3, view);
        },

        PARTS_FROM_MULTIPLE_PS: function PARTS_FROM_MULTIPLE_PS(x, y) {
            // 18
            var point1 = map.createThing(x - 100, y, 'viewpoint?');
            var point2 = map.createThing(x - 100, y + 125, 'viewpoint?');
            var point3 = map.createThing(x - 100, y + 250, 'viewpoint?');
            var thing = map.createThing(x + 150, y + 25, $scope.echoConcept1());
            var child1 = map.createChild(thing, 'part seen from viewpoint?');
            var child2 = map.createChild(thing, 'part seen from viewpoint?');
            var child3 = map.createChild(thing, 'part seen from viewpoint?');
            map.createPLink(point1, child1);
            map.createPLink(point1, child2);
            map.createPLink(point2, child2);
            map.createPLink(point3, child3);
        },

        WHAT_ABOUT: function WHAT_ABOUT(x, y) {
            // 19
            $scope.queries.WHAT_IS(x, y);
            $scope.queries.PARTS_OF(x + 300, y);
            $scope.queries.PARTS_FROM_MULTIPLE_PS(x + 700, y);
            $scope.queries.RS_TO_AND_BY(x, y + 400);
        }
    }; // queries
};

SandbankEditor.Generator = function ($scope, map) {

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (oldValue == map.getUi().TAB_ID_GENERATOR) {
            // closing tab
            map.setEditingBlocked(false);
        } else if (newValue == map.getUi().TAB_ID_GENERATOR) {
            // opening tab
            map.setEditingBlocked(true);
        }
    };

    // these get filtered out in LessonBook
    this.getPlaceholderIdeaNames = function () {
        return ['is?', 'is not?', 'part?', 'viewpoint?', 'related idea?', 'idea?', 'part seen from viewpoint?', 'contrast?', 'comparison?', 'relationship?'];
    };
};

// NB: generator is opened on load of empty map; see map.js:load()

},{}],11:[function(require,module,exports){
'use strict';

window.GorgesGrid = {};

// model for row selection

GorgesGrid.RowSelection = function () {

    var self = this;

    this.selectAll = false;
    this.selectedRowIndexes = [];

    this.deselectAll = function () {
        self.selectedRowIndexes = [];
        self.selectAll = false;
    };

    this.toggleSelectAll = function (rowCount) {
        self.selectAll = !self.selectAll;
        if (self.selectAll) {
            for (var i = 0; i < rowCount; i++) {
                self.selectedRowIndexes[i] = true;
            }
        } else {
            self.deselectAll();
        }
    };

    this.selectedRowCount = function () {
        return _.filter(self.selectedRowIndexes, function (i) {
            return i === true;
        }).length;
    };
};

// model for view tree expansion

GorgesGrid.ViewTreeState = function () {

    var self = this;

    this.expandedViews = [];
    this.childSorts = {};

    this.toggleViewExpansion = function (viewName) {
        var i = _.indexOf(self.expandedViews, viewName);
        if (i != -1) {
            self.expandedViews.splice(i, 1);
        } else {
            self.expandedViews.push(viewName);
        }
    };

    this.expandView = function (viewName) {
        if (!self.viewIsExpanded(viewName)) self.toggleViewExpansion(viewName);
    };

    this.collapseView = function (viewName) {
        if (self.viewIsExpanded(viewName)) self.toggleViewExpansion(viewName);
    };

    this.viewIsExpanded = function (viewName) {
        return _.indexOf(self.expandedViews, viewName) != -1;
    };

    this.setChildSort = function (view, sort) {
        self.childSorts[view.name] = sort;
    };

    // returns the state saved herein if set, so the order doesn't change when the grid is refreshed
    this.getChildSort = function (view) {
        return self.childSorts[view.name] || view.childSort;
    };
};

// model for storing paging/sorting settings - see also listing_params.rb

GorgesGrid.ListingParams = function () {

    var self = this;

    this.page = 1; // NB: pages are 1-based
    this.pageSize = 100;
    this.sortBy = 'id';
    this.sortOrder = 'asc';
    this.viewName = '';
    this.filters = '';
    this.totalItems = 0;
    this.pageCount = 0;

    this.setSortBy = function (col) {
        if (self.sortBy === col) {
            self.sortOrder = self.sortOrder === 'asc' ? 'desc' : 'asc';
        } else {
            self.sortOrder = 'asc';
        }
        self.sortBy = col;
        self.page = 1;
    };

    // returns the current sort order if sortBy is set to the given column, else null
    this.getSortOrder = function (col) {
        if (self.sortBy === col) {
            return self.sortOrder;
        } else {
            return null;
        }
    };

    this.toQueryString = function () {
        return 'page=' + self.page + '&pageSize=' + self.pageSize + '&sortBy=' + self.sortBy + '&sortOrder=' + self.sortOrder + '&viewName=' + self.viewName + '&filter=' + self.filters + '&totalItems=' + self.totalItems + '&pageCount=' + self.pageCount;
    };
};

},{}],12:[function(require,module,exports){
// functions handling history display

'use strict';

SandbankEditor.History = function ($scope, map) {

    var self = this;

    // this is updated on map load and after every autosave, in map.loadMapExtraData
    this.versionList = null;
    this.currentVersion = null; // e.g. { index: 0, id: 2, change_description: ..., created_at: ... }
    this.isPlaying = false;
    this.playTimer = null;

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.getUi().TAB_ID_HISTORY) {
            // opening tab
            // load current version, but in read-only mode
            var version = _.last(self.versionList);
            if (version) {
                self.loadVersion(version);
            }
        }
        if (oldValue == map.getUi().TAB_ID_HISTORY) {
            // closing tab
            // reload map
            map.load();
        }
    };

    // loads model data for an individual version and displays it
    this.loadVersion = function (version) {
        self.currentVersion = version;
        map.loadVersion(version.id);

        window.setTimeout(function () {
            // center view on current history item:
            $('#history-list-wrapper').center($('#history-list .current'));
        }, 10);
    };

    this.getVersionDescription = function (version) {
        return version ? version.change_description : '';
    };

    this.advanceVersion = function (increment) {
        if (self.versionList) {
            var currentIndex = _.indexOf(self.versionList, self.currentVersion);
            var newIndex = currentIndex + increment;
            if (currentIndex != -1 && newIndex >= 0 && newIndex <= self.versionList.length - 1) {
                self.currentVersion = self.versionList[newIndex];
                self.loadVersion(self.currentVersion);
            }
        }
    };

    this.firstVersion = function () {
        if (self.versionList) {
            self.currentVersion = self.versionList[0];
            self.loadVersion(self.currentVersion);
        }
    };

    this.lastVersion = function () {
        if (self.versionList) {
            self.currentVersion = self.versionList[self.versionList.length - 1];
            self.loadVersion(self.currentVersion);
        }
    };

    this.isOnFirstVersion = function () {
        // return self.versionList != null && self.currentVersion != null && _.first(self.versionList).id == self.currentVersion.id;
        return self.versionList && _.indexOf(self.versionList, self.currentVersion) === 0;
    };

    this.isOnLastVersion = function () {
        // return self.versionList != null && self.currentVersion != null && _.last(self.versionList).id == self.currentVersion.id;
        return self.versionList && _.indexOf(self.versionList, self.currentVersion) == self.versionList.length - 1;
    };

    this.startPlaying = function () {
        self.isPlaying = true;
        keepPlaying();
        $scope.safeApply();
    };

    function keepPlaying() {
        if (self.currentVersion == _.last(self.versionList)) {
            self.firstVersion();
        } else {
            self.advanceVersion(1);
        }
        self.playTimer = setTimeout(keepPlaying, 1000);
    }

    this.stopPlaying = function () {
        self.isPlaying = false;
        clearTimeout(self.playTimer);
        $scope.safeApply();
    };
};

},{}],13:[function(require,module,exports){
// functions for joining nation, with a modal dialog

'use strict';

window.SandbankJoinNation = {};

SandbankJoinNation = function ($scope) {

    this.openModal = function (_orgId, _orgName) {
        var modalInstance = $modal.open({
            templateUrl: 'template_join_nation_modal.html', // see views/memberships/_template_join_nation_modal
            backdrop: 'static',
            controller: joinModalCtrl,
            windowClass: 'tags-modal',
            resolve: {
                orgId: function orgId() {
                    return _orgId;
                },
                orgName: function orgName() {
                    return _orgName;
                }
            }
        });

        modalInstance.result.then(function () {
            $scope.loadUserProfile();
        });
    };

    // --------------- controller for join modal ---------------------

    var joinModalCtrl = function joinModalCtrl($scope, $modalInstance, orgId, orgName) {

        $scope.orgId = orgId;
        $scope.orgName = orgName;

        // need a dot!
        $scope.formData = {
            joinCode: ''
        };

        $scope.error = '';

        function joinOrg() {
            $http.post('/memberships.json', {
                organization_id: $scope.orgId,
                join_code: $scope.formData.joinCode
            }).then(function (response) {
                $modalInstance.close();
                alert('Welcome! You are now a member of ' + $scope.orgName + '.');
            }, function () {
                $scope.error = 'Could not join ThinkNation - did you enter the correct code?';
            });
        }

        $scope.ok = function () {
            joinOrg();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };
};

},{}],14:[function(require,module,exports){
// layouts used in the editor, for the diagram or individual Groups, plus layout-related functions

'use strict';

SandbankEditor.Layouts = function ($scope, map) {

    var self = this;

    this.init = function () {};

    this.handleDiagramEvent = function (eventName, e) {
        var diagram = map.getDiagram();
        if (eventName == 'InitialLayoutCompleted') {
            diagram.updateAllTargetBindings();
            diagram.layoutDiagram(true);
        } else if (eventName == 'SelectionMoved') {
            updateSelectedPartLocationData(e);
            map.getDiagram().layoutDiagram(true);
        } else if (eventName == 'SelectionDeleted') {
            diagram.updateAllTargetBindings();
        } else if (eventName == 'PartCreated') {} else if (eventName == 'PartResized') {
            setResizedPartDimensionData(e);
        } else if (eventName == 'LinkDrawn') {
            adjustLinkLayout(e.subject);
        } else if (eventName == 'LinkRelinked') {
            adjustLinkLayout(e.subject);
        }
    };

    // ------------ handle location/size attributes for nodes ---------------

    // only update w/h for slides, as all other node types have fixed dimensions according to the templates
    function setResizedPartDimensionData(e) {
        var diagram = map.getDiagram();
        var node = e.subject;
        if (node && node.category == 'slide') {
            //console.log('PartResized: ' + node.part.actualBounds);
            diagram.model.setDataProperty(node.data, 'width', node.part.actualBounds.width);
            diagram.model.setDataProperty(node.data, 'height', node.part.actualBounds.height);
        }
    }

    // set the 'loc' attribute for a new top-level node (created by double-clicking), to support freehand layout
    this.setNewPartLocationData = function (e) {
        var node = e.subject;
        if (node && node.part) {
            if (node instanceof go.Group) {
                map.getDiagram().model.setDataProperty(node.data, 'loc', node.part.location.x + ' ' + node.part.location.y);
            }
        }
    };

    // updates the 'loc' attribute for each selected part, to support freehand layout (does not apply to slides)
    function updateSelectedPartLocationData(e) {
        var diagram = map.getDiagram();
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Group) {
                // thing
                var part = it.value;
                var parentX = 0;
                var parentY = 0;
                if (part.containingGroup) {
                    parentX = part.containingGroup.location.x;
                    parentY = part.containingGroup.location.y;
                }
                console.log('moving group, subject: ' + e.subject + ', part: ' + part + ', height: ' + part.part.desiredSize.height + ', location: ' + part.part.location);
                if (!isNaN(part.location.x)) {
                    diagram.model.setDataProperty(part.data, 'loc', part.location.x - parentX + ' ' + (part.location.y - parentY));
                }
            }
        }
    }

    // ----------- changing layouts of things and their descendants ----------------

    this.fromAndToNodesAreVisible = function (link) {
        return link.fromNode && link.toNode && !self.hasCollapsedAncestor(link.fromNode) && !self.hasCollapsedAncestor(link.toNode);
    };

    this.labelNodeIsVisible = function (link) {
        return link.labelNodes.count && link.labelNodes.first().visible;
    };

    this.hasCollapsedAncestor = function (group) {
        while (true) {
            if (!group.containingGroup) {
                return false;
            } else if (!group.containingGroup.isSubGraphExpanded) {
                return true;
            } else {
                group = group.containingGroup;
            }
        }
    };

    // this.hasLinkLabelAncestor = function(group) {
    //     while (true) {
    //         if (!group.containingGroup) {
    //             return false;
    //         }
    //         else if (group.containingGroup.isLinkLabel) {
    //             return true;
    //         }
    //         else {
    //             group = group.containingGroup;
    //         }
    //     }
    // };

    this.getHighestAncestorWithLayout = function (group, layoutNames) {
        while (true) {
            if (!group.containingGroup) {
                return false;
            } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                return group.containingGroup;
            } else {
                group = group.containingGroup;
            }
        }
    };

    this.areSistersInInventoryLayout = function (group1, group2) {
        return group1.containingGroup == group2.containingGroup && group1.containingGroup && _.contains(['left', 'right'], group1.containingGroup.data.layout);
    };

    this.isNotWithinInventoryLayout = function (group) {
        return !self.isWithinInventoryLayout(group);
    };

    this.isRThingWithinInventoryLayout = function (group) {
        return group.isLinkLabel && self.isWithinInventoryLayout(group);
    };

    this.isWithinInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['left', 'right']);
    };

    this.isWithinLeftInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['left']);
    };

    this.isWithinRightInventoryLayout = function (group) {
        return self.isWithinLayout(group, ['right']);
    };

    this.isWithinFreehandLayout = function (group) {
        return self.isWithinLayout(group, ['freehand']);
    };

    this.isWithinStackedLayout = function (group) {
        return self.isWithinLayout(group, ['stacked']);
    };

    this.isWithinLayout = function (group, layoutNames) {
        while (true) {
            if (!group.containingGroup) {
                //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': false');
                return false;
            } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': true');
                return true;
            } else {
                group = group.containingGroup;
            }
        }
    };

    this.showLeftTextBlock = function (group) {
        return self.isWithinRightInventoryLayout(group) && !self.isWithinStackedLayout(group) && !group.isLinkLabel;
    };

    this.showRightTextBlock = function (group) {
        return self.isWithinLeftInventoryLayout(group) && !self.isWithinStackedLayout(group) && !group.isLinkLabel;
    };

    this.setDescendantLayouts = function (group, layoutName) {
        if (layoutName == 'left' || layoutName == 'right' || layoutName == 'stacked') {
            var it = group.memberParts.iterator;
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group && !part.isLinkLabel) {
                    part.data.layout = layoutName;
                    self.setDescendantLayouts(part, layoutName);
                }
            }
        } else if (layoutName == 'freehand') {}
    };

    this.disableLayoutForSelectedThings = function (layoutName) {
        var it = map.getDiagram().selection.iterator;
        if (!it.count) {
            return true;
        }
        while (it.next()) {
            if (!(it.value instanceof go.Group)) {
                return true;
            } else {
                var group = it.value;
                if (self.isWithinLayout(group, ['left', 'right', 'stacked'])) {
                    return true;
                }
            }
        }
        return false;
    };

    // -------------- scaling functions, etc. ----------------------

    // Computes the level of this group
    this.computeLevel = function (group) {
        //console.log('computeLevel, part: ' + part + ', containingGroup: ' + part.containingGroup);
        if (!(group instanceof go.Group) || group.containingGroup === null) {
            return 0;
        } else {
            return self.computeLevel(group.containingGroup) + 1;
        }
    };

    // gets the basic scaling for thing squares, by level
    function getThingScale(level) {
        return Math.pow(0.45, level); // 1, .45, .2025, .091125, ...
    }

    // this is only used for groups
    this.getScale = function (group, visitedGroupKeys) {
        if (group) {
            // keep track of groups we've visited to avoid infinite recursion
            // TODO: track down exactly how infinite loops are occurring,
            // or IF they still are since map.checkModel was introduced...
            if (visitedGroupKeys && Array.isArray(visitedGroupKeys)) {
                //console.log('visitedGroupKeys: ' + visitedGroupKeys);
                if (_.contains(visitedGroupKeys, group.data.key)) {
                    //console.log('hit already visited key: ' + group.data.key);
                    return 1;
                } else {
                    visitedGroupKeys.push(group.data.key);
                }
            } else {
                visitedGroupKeys = [group.data.key];
            }

            if (group.labeledLink) {
                // R-thing
                var fromScale = self.getScale(group.labeledLink.fromNode, visitedGroupKeys);
                var toScale = self.getScale(group.labeledLink.toNode, visitedGroupKeys);
                //console.log('getScale, fromScale: ' + fromScale + ', toScale: ' + toScale + ', visitedGroupKeys: ' + visitedGroupKeys.join(','));
                return Math.min(fromScale, toScale) * 0.5;
            } else if (group.containingGroup) {
                return self.getScale(group.containingGroup, visitedGroupKeys) * 0.45;
            } else {
                return getThingScale(self.computeLevel(group));
            }
        }
        return 1; // can occur when dragging R to empty space
    };

    // gets the margin to be used in stack layout between this group's children
    function getStackMargin(group) {
        return 10 / 0.45 * self.getScale(group);
    }

    // gets the margin to be used in stack layout between this group's children
    function getInventoryMargin(group) {
        if (self.computeLevel(group) <= 2) {
            return 10 * self.getScale(group);
        } else {
            return 3 * self.getScale(group);
        }
    }

    this.getExternalTextScale = function (group) {
        return 1 - 0.1 * self.computeLevel(group);
    };

    this.getLinkStrokeWidth = function (link) {
        var fromScale = self.getScale(link.fromNode);
        var toScale = self.getScale(link.toNode);
        return (link.isSelected ? 4 : 2) * Math.min(fromScale, toScale); // 2, .9, ...
    };

    // scale arrowheads based on the smallest to/from node,
    // or just the To node for P links
    this.getArrowheadScale = function (link) {
        var fromScale = self.getScale(link.fromNode);
        var toScale = self.getScale(link.toNode);
        var minScale = Math.min(fromScale, toScale);
        //console.log("getArrowheadScale, fromScale: ", fromScale, ', toScale: ', toScale, ', minScale: ', minScale);
        if (link.data.category == 'P') {
            minScale = toScale;
        }
        if (minScale >= 1) {
            return 1 * minScale;
        } else {
            return 1.5 * minScale;
        }
    };

    // -------------- creating new things ----------------------

    // Returns a location for a new sister group (thing) to the given one,
    // which will not hide any existing things (overlap is allowed).
    // The returned coordinates are absolute for a top-level group,
    // or relative to the parent otherwise - suitable for use with FreehandDiagramLayout
    // or FreehandLayout, resp.
    this.getNewSisterLocation = function (group, withR) {
        var diagram = map.getDiagram();
        // if we are within another group, things are in absolute coordinates
        // and sisters are placed above the thing; otherwise relative and below...
        var inGroup = group.containingGroup !== null;
        // ... except if withR is true, we go to the right instead of above or below.

        // start below if in group, else above; or to the right if withR
        var x, y, w, h;
        if (withR) {
            x = group.location.x + group.actualBounds.width * 2.2;
            y = group.location.y;
        } else {
            x = group.location.x;
            y = group.location.y + group.actualBounds.height * 1.1 * (inGroup ? 1 : -1);
        }
        w = group.actualBounds.width;
        h = group.actualBounds.height;

        // check for overlapping parts; if found, increment x,y and continue

        while (true) {
            var rect = new go.Rect(x, y, w, h);
            rect.grow(h / 10, w / 10, h / 10, w / 10);
            var parts = diagram.findObjectsIn(rect, null, self.isGroup);
            if (parts.count) {
                console.log('getNewSisterLocation: overlapping part found in ' + rect);
                if (withR) {
                    x += w / 10;
                    y += h / 10;
                } else {
                    x += w / 10;
                    y += h / 10 * (inGroup ? 1 : -1); // move down if in group, else up
                }
            } else {
                console.log('getNewSisterLocation: no overlapping part found in ' + rect);
                break;
            }
        }
        if (inGroup) {
            // make coordinates relative
            x -= group.containingGroup.location.x;
            y -= group.containingGroup.location.y;
        }
        return new go.Point(x + Math.random(), y + Math.random());
    };

    // Returns a location for a new child group (thing) to the given one,
    // which will not hide any existing children (overlap is allowed).
    // The returned coordinates are relative to the parent group - suitable for use with FreehandLayout.
    this.getNewChildLocation = function (group) {
        var groupBounds = group.actualBounds;
        // NB: all x/y locations are relative to the group location
        var x = 0;
        var y = groupBounds.height * 1.1;
        var w, h;
        var members = group.memberParts;
        // keep testing new rectangles until we find one that doesn't overlap with any existing member of the group
        while (true) {
            members.reset();
            var overlaps = false;
            var member, newRect, memberRect;
            while (members.next()) {
                member = members.value;
                var memberBounds = member.actualBounds;
                w = memberBounds.width;
                h = memberBounds.height;
                // find the existing member's actual bounds (absolute coords)
                memberRect = new go.Rect(memberBounds.x - groupBounds.x, memberBounds.y - groupBounds.y, memberBounds.width, memberBounds.height);
                newRect = new go.Rect(x, y, w, h);
                newRect.grow(h / 5, w / 5, h / 5, w / 5);
                overlaps = newRect.containsRect(memberRect);
                console.log('getNewChildLocation for ' + member + ': newRect = ' + newRect + ', memberRect = ' + memberRect + ', overlaps: ' + overlaps);
                if (overlaps) {
                    break;
                }
            }
            if (overlaps) {
                // increment x, y and try again
                x += w / 5;
                y += h / 5;
            } else {
                // found a good spot!
                break;
            }
        }
        return new go.Point(x, y);
    };

    // a simpler version of getNewChildLocation that places the child outside the bounds of the existing children
    this.getNewChildLocation2 = function (group) {
        var groupBounds = group.actualBounds;
        var childBounds = map.safeRect(map.getDiagram().computePartsBounds(group.memberParts));
        var x = 0;
        var y = 0;
        if (!group.memberParts.count) {
            y = groupBounds.height * 1.2;
        } else {
            y = groupBounds.height * 1.4 + childBounds.height;
        }
        //console.log('getNewChildLocation2, childBounds: ' + childBounds + ', groupBounds: ' + groupBounds + ', x: ' + x + ', y: ' + y);
        return new go.Point(x, y);
    };

    // move all the given new member groups so that their locations are relative to that of
    // the parent and its previously existing members, and scaled down appropriately
    this.layoutNewMembersRelativeTo = function (newMembers, parent, oldMemberBounds) {
        // how big was the parent system before the new groups were added?
        var systemBounds = parent.actualBounds.unionRect(oldMemberBounds);

        // figure out old/new origins - place new origin below existing system
        var oldBounds = map.getDiagram().computePartsBounds(newMembers);
        var oldOrigin = new go.Point(oldBounds.x, oldBounds.y);
        var newOrigin = new go.Point(0, systemBounds.height * 1.2);
        console.log('layoutNewMembersRelativeTo, systemBounds: ' + systemBounds + ', oldBounds: ' + oldBounds + ', oldOrigin: ' + oldOrigin + ', newOrigin: ' + newOrigin);

        // figure out new scaled locations
        // NB: we can assume newMembers are all one level down from parent (see map.addSelectedThingsAsChildrenOf),
        // so we just multiply by the standard scale factor
        var it = newMembers.iterator;
        while (it.next()) {
            var group = it.value;
            var groupBounds = group.actualBounds;
            var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) * 0.45;
            var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) * 0.45;
            var newLoc = go.Point.stringify(new go.Point(newX, newY));
            console.log('layoutNewMembersRelativeTo, groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
            map.getDiagram().model.setDataProperty(group.data, 'loc', newLoc);
        }
    };

    // move all the given old member groups so that their locations are absolute and above
    // the parent, and scaled up appropriately
    this.layoutOldMembersOutsideOf = function (oldMembers, parent, oldMembersBounds, oldMembersLevel) {
        // figure out scale factor (members can be dragged up multiple levels, unlike dragging into S)
        var scaleFactor = Math.pow(0.45, oldMembersLevel - self.computeLevel(parent));
        console.log('layoutOldMembersOutsideOf, scaleFactor: ' + scaleFactor);

        // figure out old/new origins - place new origin above parent, with vertical space for scaled-up oldMembers
        var parentBounds = parent.actualBounds;
        var oldOrigin = new go.Point(oldMembersBounds.x, oldMembersBounds.y);
        var newOrigin = new go.Point(parentBounds.x, parentBounds.y - oldMembersBounds.height * 1.2 / scaleFactor);

        // figure out new scaled locations
        var it = oldMembers.iterator;
        while (it.next()) {
            var group = it.value;
            var groupBounds = group.actualBounds;
            var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) / scaleFactor;
            var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) / scaleFactor;
            var newLoc = go.Point.stringify(new go.Point(newX, newY));
            console.log('layoutOldMembersOutsideOf, parentBounds: ' + parentBounds + ', oldMembersBounds: ' + oldMembersBounds + ', newOrigin: ' + newOrigin + ', groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
            map.getDiagram().model.setDataProperty(group.data, 'loc', go.Point.stringify(newLoc));
        }
    };

    // ----------------- accessors -------------------

    // returns the appropriate layout class by abbreviated name
    this.getLayout = function (layoutName) {
        if (layoutName == 'freehand') return new FreehandLayout();else if (layoutName == 'right') return new RightInventoryLayout();else if (layoutName == 'stacked') return new StackedLayout();else return new LeftInventoryLayout();
    };

    this.getFreehandDiagramLayout = function () {
        return new FreehandDiagramLayout();
    };

    // --------------------------------------------------------------

    // returns true if the to and from nodes for the link have a common ancestor group with one of the given layout names.
    // TODO: verify logic - what if there are multiple such ancestors? - this should return the highest one...
    function getCommonAncestorWithLayout(group1, group2, layoutNames) {
        var ancestors1 = self.getAncestorGroups(group1);
        var ancestors2 = self.getAncestorGroups(group2);
        var commonAncestors = _.intersection(ancestors1, ancestors2);
        var layoutAncestors = _.filter(commonAncestors, function (group) {
            return _.indexOf(layoutNames, group.data.layout) != -1;
        });
        if (layoutAncestors.length) {
            return layoutAncestors[0];
        } else {
            return null;
        }
    }

    // returns the ancestors of this group, including itself
    this.getAncestorGroups = function (group) {
        var ancestors = [group];
        var g = group;
        while (g.containingGroup) {
            ancestors.push(g.containingGroup);
            g = g.containingGroup;
        }
        return ancestors;
    };

    // --------------------------------------------------------------

    function FreehandDiagramLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(FreehandDiagramLayout, go.Layout);

    FreehandDiagramLayout.prototype.toString = function () {
        return 'FreehandDiagramLayout';
    };

    FreehandDiagramLayout.prototype.doLayout = function (coll) {
        //console.log('FreehandDiagramLayout.doLayout');
        var diagram = map.getDiagram();
        // diagram.startTransaction("Freehand Diagram Layout");

        //validateGroupLocations(diagram.findTopLevelGroups());
        var groups = diagram.findTopLevelGroups(); // get new iterator
        while (groups.next()) {
            var group = groups.value;
            if (!group.isLinkLabel) {
                var loc = go.Point.parse(group.data.loc);
                group.move(new go.Point(loc.x, loc.y));
                //console.log('FreehandDiagramLayout, group: ' + group + ' to location: ' + loc.x + ',' + loc.y);
            }
        }

        // all adjustment of links is done from here, not from the other layouts...
        getLinksByNodes(true);
        var links = diagram.links.iterator;
        while (links.next()) {
            var link = links.value;
            // if (isNaN(link.location.x)) {
            //     console.log('link location isNaN');
            //     link.move(new go.Point(0,0));
            // }
            // console.log('link location: ' + link.location);
            adjustLinkLayout(link);
        }

        // diagram.commitTransaction("Freehand Diagram Layout");
    };

    // if any group in the given Iterator does not have a location (data.loc), set one
    // that doesn't overlap with the other members
    function validateGroupLocations(groups) {}

    // --------------------------------------------------------------

    function FreehandLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(FreehandLayout, go.Layout);

    FreehandLayout.prototype.toString = function () {
        return 'FreehandLayout';
    };

    FreehandLayout.prototype.doLayout = function (coll) {
        var diagram = map.getDiagram();
        diagram.startTransaction('Freehand Layout');

        var x = this.group.location.x;
        var y = this.group.location.y;

        var it = this.group.memberParts.iterator;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group && !part.isLinkLabel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('FreehandLayout, part: ' + part.data.text + ', loc: ' + loc + ', location: ' + part.location);
                part.move(new go.Point(x + loc.x, y + loc.y));
                part.layout.doLayout(part);
            }
        }

        diagram.commitTransaction('Freehand Layout');
    };

    // --------------------------------------------------------------

    function StackedLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(StackedLayout, go.Layout);

    StackedLayout.prototype.toString = function () {
        return 'StackedLayout';
    };

    StackedLayout.prototype.doLayout = function (coll) {
        this.diagram.startTransaction('Stacked Layout');
        var margin = getStackMargin(this.group);
        var startX = this.group.location.x;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + margin / 2);
        layoutMembersForStacked(this.group, startX, startY);
        this.diagram.commitTransaction('Stacked Layout');
    };

    // returns the max y value after laying out the last part
    function layoutMembersForStacked(group, startX, startY) {
        var members = getOrderedMembers(group);
        var x = startX;
        var y = startY;
        var rowCount = 0;
        var maxStartY = startY;
        _.each(members, function (part) {
            if (part instanceof go.Group && !part.isLinkLabel) {
                var margin = getStackMargin(part);
                part.move(new go.Point(x, y));
                startY = y + part.actualBounds.height + margin / 2; // start Y position for part's children

                //console.log('layoutMembersForStacked: starting layout of children of ' + part + ' at ' + Math.round(x) + ',' + Math.round(startY));

                if (part.isSubGraphExpanded) {
                    // layout children of this part; check if we've already done a taller part+children in current row
                    maxStartY = Math.max(maxStartY, layoutMembersForStacked(part, x, startY));
                    //console.log('layoutMembersForStacked: laid out children of ' + part + ', maxStartY is now ' + Math.round(maxStartY));
                } else {
                    maxStartY = Math.max(maxStartY, startY);
                }

                // decide whether to wrap
                rowCount++;
                if (rowCount < 2) {
                    // keep going on this line
                    x += part.actualBounds.width + margin;
                } else {
                    // wrap to next line
                    x = startX;
                    y = maxStartY + margin / 2;
                    rowCount = 0;
                }
            }
        });
        return maxStartY;
    }

    // --------------------------------------------------------------

    function RightInventoryLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(RightInventoryLayout, go.Layout);

    RightInventoryLayout.prototype.toString = function () {
        return 'RightInventoryLayout';
    };

    RightInventoryLayout.prototype.doLayout = function (coll) {
        //this.diagram.startTransaction("Inventory Layout");
        var startX = this.group.location.x + this.group.actualBounds.width;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + getInventoryMargin(this.group));
        layoutMembersForInventory(this.group, startX, startY, 'R');
        //this.diagram.commitTransaction("Inventory Layout");
    };

    // --------------------------------------------------------------

    function LeftInventoryLayout() {
        go.Layout.call(this);
    }

    go.Diagram.inherit(LeftInventoryLayout, go.Layout);

    LeftInventoryLayout.prototype.toString = function () {
        return 'LeftInventoryLayout';
    };

    LeftInventoryLayout.prototype.doLayout = function (coll) {
        //console.log('LeftInventoryLayout.doLayout, group: ' + this.group + ', location: ' + this.group.location);
        // this.diagram.startTransaction("Inventory Layout");
        var startX = this.group.location.x;
        var startY = this.group.location.y + (this.group.part.actualBounds.height + getInventoryMargin(this.group));
        layoutMembersForInventory(this.group, startX, startY, 'L');
        // this.diagram.commitTransaction("Inventory Layout");
    };

    // shared stuff for Left/Right Inventory layouts...

    // returns the max y value after laying out the last part
    // side is 'L' or 'R'
    function layoutMembersForInventory(group, startX, startY, side) {
        var members = getOrderedMembers(group);
        _.each(members, function (part) {
            var x = startX; // for left, just use x
            if (side == 'R') x = startX - part.actualBounds.width; // for right, right-align parts to startX
            //console.log('layoutMembersForInventory, part: ' + part + ' to location: ' + x + ',' + startY);
            part.move(new go.Point(x, startY));
            startY += part.actualBounds.height + getInventoryMargin(part);
            if (part.isSubGraphExpanded) {
                //console.log('layoutMembersForInventory, y after moving: ' + part + ' = ' + startY);
                startY = layoutMembersForInventory(part, startX, startY, side);
            }
        });
        return startY + getInventoryMargin(group);
    }

    // returns an array of the group's (non-R-thing) members, sorted by the 'order' data property
    function getOrderedMembers(group) {
        var members = new go.List();
        var it = group.memberParts.iterator;
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group && !part.isLinkLabel) {
                members.add(part);
            }
        }
        return _.sortBy(members.toArray(), function (member) {
            return member.data.order;
        });
    }

    // ------------------------ link routing and visibility ------------------------------

    // adjust the routing, visibility and other properties of a link according to various structural criteria
    function adjustLinkLayout(link) {
        if (!link || !link.fromNode || !link.toNode) {
            return;
        }

        // var loc = link.location;
        // if (isNaN(loc.x) || isNaN(loc.y)) {
        //     link.location = new go.Point(10, 10);
        //     console.log('adjustLinkLayout, link.location: ' + link.location);
        // }
        // console.log('adjustLinkLayout, link.location: ' + link.location);

        // see if link is within a stacked or inventory layout, or if it's a hidden P link
        var inventoryAncestor = getCommonAncestorWithLayout(link.fromNode, link.toNode, ['left', 'right']);
        var stackedAncestor = getCommonAncestorWithLayout(link.fromNode, link.toNode, ['stacked']);
        var hidePLink = link.data && link.data.category == 'P' && !map.getTemplates().showPLink(link);
        var crowdedRThing = hasCrowdedRThing(link);

        // see if this is one of multiple links between the same two nodes
        var snpos = self.getSameNodesLinkPosition(link);
        var isMultiLink = snpos.count > 1;
        //console.log('snpos for link ' + link + ': ' + snpos.index + ' of ' + snpos.count);

        if (inventoryAncestor) {
            applyInventoryCurveRouting(link, snpos, inventoryAncestor.data.layout);
        } else if (isMultiLink) {
            applyMultilinkCurveRouting(link, snpos);
        } else if (crowdedRThing) {
            applyInventoryCurveRouting(link, snpos, 'left');
        } else {
            applyStraightRouting(link);
        }

        // show link only if both connected things are visible (no collapsed ancestors);
        // hide if both are in stacked layout or if it's a P-link that we shouldn't be showing now
        if (self.fromAndToNodesAreVisible(link) && !stackedAncestor && !hidePLink) {
            link.opacity = 1;
            showLabelNodes(link, true);
        } else {
            link.opacity = 0;
            showLabelNodes(link, false);
        }
    }

    // TODO: detect when the R-thing overlaps both from and to nodes, so we can change the link routing
    function hasCrowdedRThing(link) {
        return false;
    }

    function showLabelNodes(link, show) {
        //console.log('showLabelNodes, link: ' + link + ', show: ' + show);
        var it = link.labelNodes;
        if (it) {
            while (it.next()) {
                var group = it.value;
                group.visible = show;
                if (show) {
                    group.layout.doLayout(group);
                }
            }
        }
    }

    // if link is between two things in the same inventory layout (single or multiple),
    // make the line more or less circular on the appropriate side
    function applyInventoryCurveRouting(link, snpos, ancestorLayout) {
        if (ancestorLayout == 'left') {
            link.fromSpot = go.Spot.Left;
            link.toSpot = go.Spot.Left;
        } else if (ancestorLayout == 'right') {
            link.fromSpot = go.Spot.Right;
            link.toSpot = go.Spot.Right;
        }

        // aspect ratio for the link curves - make this smaller to make them taller, larger to make them fatter
        var curveRatio = 0.6;

        var y1 = link.fromNode.actualBounds.y;
        var y2 = link.toNode.actualBounds.y;

        var yDiff = Math.abs(y2 - y1);
        var c = (yDiff === 0 ? 50 : Math.floor(yDiff * curveRatio)) + 100 * (snpos.index / snpos.count);
        //console.log("yDiff = " + yDiff + ', c = ' + c + ' (' + link.fromNode.data.text + ' - ' + p1 + ' - to ' + link.toNode.data.text + ' - ' + p2 + ')');

        link.curve = go.Link.Bezier;
        link.fromEndSegmentLength = c;
        link.toEndSegmentLength = c;
    }

    // if non-inventory link is one of multiple ones between same nodes, make it curved
    function applyMultilinkCurveRouting(link, snpos) {
        link.fromSpot = go.Spot.Default;
        link.toSpot = go.Spot.Default;
        link.curve = go.Link.Bezier;
        // curviness values based on number of links:
        // 2: -25 25
        // 3: -50 0 50
        // 4: -100 -50 0 50 100
        var rangeSize = 10 * (snpos.count - 1);
        var rangeIncrement = 10;
        if (snpos.hasRThing) {
            rangeSize = 100 * (snpos.count - 1);
            rangeIncrement = 100;
        }

        // adjust curviness for smaller scales
        var linkScaleFactor = self.getLinkStrokeWidth(link) / 2; // 2 is max stroke width
        rangeSize *= linkScaleFactor;
        rangeIncrement *= linkScaleFactor;

        var rangeStart = 0 - rangeSize / 2;

        link.curviness = (rangeStart + rangeIncrement * snpos.index) * snpos.orientation;
        // console.log('applyMultilinkCurveRouting, link: ' + link + ', curviness: ' + link.curviness);
    }

    // do normal straight lines for freehand layout, or links between descendants of things with different layouts
    function applyStraightRouting(link) {
        link.fromSpot = go.Spot.Default;
        link.toSpot = go.Spot.Default;
        link.routing = go.Link.Normal;
        link.curve = go.Link.None;
        link.curviness = 0;
    }

    // --------------- calculate how many links there are between a link's nodes ---------------

    // Returns an object of the format { index: 1, count: 2, orientation: -1, hasRThing: false },
    // indicating how many other links there are between the same pair of nodes,
    // where the given link falls within this list, and what its orientation is.
    this.getSameNodesLinkPosition = function (link) {
        var linksByNodes = getLinksByNodes(true);
        // get links with the same key as this one (connecting same nodes)
        var sameLinks = _.where(linksByNodes, {
            key: getSameNodesLinkKey(link)
        });

        // default return value
        var snpos = {
            index: 0,
            count: 1,
            orientation: 1,
            hasRThing: false
        };
        // set index, count, orientation
        for (var i = 0; i < sameLinks.length; i++) {
            if (sameLinks[i].link == link) {
                snpos = {
                    index: i,
                    count: sameLinks.length,
                    orientation: getLinkOrientation(link)
                };
            }
        }
        // check for Rthing
        for (i = 0; i < sameLinks.length; i++) {
            if (sameLinks[i].hasRThing) {
                snpos.hasRThing = true;
            }
        }
        return snpos;
    };

    var _linksByNodes = null;

    // refreshes the cached list of all links with keys, to facilitate grouping them according to connected nodes
    function getLinksByNodes(refresh) {
        //console.log('getLinksByNodes');
        if (!self._linksByNodes || refresh) {
            self._linksByNodes = [];
            var diagram = map.getDiagram();
            var links = diagram.links.iterator;
            while (links.next()) {
                var link = links.value;
                var key = getSameNodesLinkKey(link);
                if (key) {
                    self._linksByNodes.push({
                        key: key,
                        link: link,
                        hasRThing: link.labelNodes.count > 0
                    });
                }
            }
        }
        return self._linksByNodes;
    }

    // Returns a key used to group links according to which pair of nodes they connect.
    // The returned key is non-empty for regular links and P links that should be shown currently,
    // so that these will all be routed by the same rules. A null key is returned for any other
    // links, indicating that no grouping is required.
    function getSameNodesLinkKey(link) {
        //        if (self.isRLink(link) || (self.isPLink(link) && map.getTemplates().showPLink(link))) {
        if (self.isRLink(link)) {
            var key = [link.fromNode.toString(), link.toNode.toString()].sort().join('|');
            //console.log('key: ' + key);
            return key;
        } else {
            return null;
        }
    }

    // We use this to distinguish an A-B link from a B-A link (based on fromNode and toNode, which
    // is independent of the arrowhead settings) when setting curviness, because setting curviness = 25
    // on an A-B link is the same as curviness = -25 on a B-A link.
    function getLinkOrientation(link) {
        if (link.fromNode && link.toNode && link.fromNode.toString() < link.toNode.toString()) {
            return 1;
        } else {
            return -1;
        }
    }

    // -------------- link tests ---------------

    this.isRLink = function (link) {
        return link instanceof go.Link && link.data && !link.data.category && link.fromNode && link.toNode;
    };

    this.isDLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category == 'D';
    };

    this.isPLink = function (link) {
        return link instanceof go.Link && link.data && link.data.category == 'P';
    };

    this.isGroup = function (obj) {
        return obj instanceof go.Group;
    };
};

//console.log('Layouts, PartCreated');
// setNewPartLocationData(e);

// stacked?

},{}],15:[function(require,module,exports){
// functions for creating and manipulating the map (i.e. Diagram)

'use strict';

SandbankEditor.Map = function ($scope) {

    var self = this;

    // ----------- constants ---------------
    this.LEFT = 'left';
    this.RIGHT = 'right';

    // ------------ instance vars ----------

    var _diagram = null;

    // components
    var _analytics = null;
    var _attachments = null;
    var _autosave = null;
    var _generator = null;
    //var _history = null;
    var _layouts = null;
    var _perspectives = null;
    var _presenter = null;
    var _standards = null;
    var _templates = null;
    var _tests = null;
    var _ui = null;

    // ------------ component accessors ----------------

    function getComponents() {
        return [_analytics, _attachments, _autosave, _generator,
        // _history,
        _layouts, _perspectives, _presenter, _standards, _templates, _tests, _ui];
    }

    this.getAnalytics = function () {
        return _analytics;
    };
    this.getAttachments = function () {
        return _attachments;
    };
    this.getAutosave = function () {
        return _autosave;
    };
    this.getGenerator = function () {
        return _generator;
    };
    // this.getHistory = function () { return _history; };
    this.getLayouts = function () {
        return _layouts;
    };
    this.getPerspectives = function () {
        return _perspectives;
    };
    this.getPresenter = function () {
        return _presenter;
    };
    this.getStandards = function () {
        return _standards;
    };
    this.getTemplates = function () {
        return _templates;
    };
    this.getTests = function () {
        return _tests;
    };
    this.getUi = function () {
        return _ui;
    };

    // -------------- map init ------------------

    this.init = function () {

        // initialize components
        _analytics = new SandbankEditor.Analytics($scope, self);
        _attachments = new SandbankEditor.Attachments($scope, self);
        _autosave = new SandbankEditor.Autosave($scope, self);
        _generator = new SandbankEditor.Generator($scope, self);
        // _history = new SandbankEditor.History($scope, self);
        _layouts = new SandbankEditor.Layouts($scope, self);
        _perspectives = new SandbankEditor.Perspectives($scope, self);
        _presenter = new SandbankEditor.Presenter($scope, self);
        _standards = new SandbankEditor.Standards($scope, self);
        _templates = new SandbankEditor.Templates($scope, self);
        _tests = new SandbankEditor.Tests($scope, self);
        _ui = new SandbankEditor.UI($scope, self);

        // call init for each component, if defined
        _.each(getComponents(), function (component) {
            if (component && component.init) component.init();
        });

        // create diagram
        _diagram = new go.Diagram('diagram');
        _diagram.initialContentAlignment = go.Spot.Center;
        _diagram.initialViewportSpot = go.Spot.Center;
        _diagram.initialDocumentSpot = go.Spot.Center;
        _diagram.hasHorizontalScrollbar = false;
        _diagram.hasVerticalScrollbar = false;
        _diagram.padding = 500;
        _diagram.layout = _layouts.getFreehandDiagramLayout();

        initTools();
        _templates.initTemplates(_diagram); // set up templates, customize temporary link behavior
        addDiagramListeners();

        _templates.addExportFooter();

        // watch for tab changes
        // TODO: restore non-Angular version of this
        //$scope.$watch('currentTab', function(newValue, oldValue) {
        //    self.currentTabChanged(newValue, oldValue);
        //});
    };

    // this is called by a $scope.$watch in init()
    this.currentTabChanged = function (newValue, oldValue) {
        // console.log('currentTabChanged, newValue: ' + newValue + ', oldValue: ' + oldValue);
        // notify any interested components
        _.each(getComponents(), function (component) {
            if (component && component.currentTabChanged) {
                component.currentTabChanged(newValue, oldValue);
            }
        });

        //$scope.safeApply();
    };

    this.getDiagram = function () {
        return _diagram;
    };

    // misc. tool configuration
    function initTools() {
        // disable clicking on TextBlocks to edit - we will invoke editing in other ways
        _diagram.allowTextEdit = false;

        // select text when activating editor;
        // use shift-enter to create new lines, enter to finish editing (NB: editor has multiline=true)
        var textTool = _diagram.toolManager.textEditingTool;
        textTool.doActivate = function () {
            go.TextEditingTool.prototype.doActivate.call(textTool);
            if (textTool.defaultTextEditor) {
                textTool.defaultTextEditor.select();

                textTool.defaultTextEditor.addEventListener('keydown', function (e) {
                    if (e.which == 13 && !e.shiftKey) {
                        go.TextEditingTool.prototype.acceptText.call(textTool, go.TextEditingTool.LostFocus);
                    }
                });
            }
        };

        // handle delete key on Mac (default behavior only uses fn-Delete to delete from canvas)
        _diagram.commandHandler.doKeyDown = function () {
            var e = _diagram.lastInput;
            var cmd = _diagram.commandHandler;
            if (e.event.which === 8) {
                cmd.deleteSelection();
            } else {
                go.CommandHandler.prototype.doKeyDown.call(cmd); // call base method with no arguments
            }
        };

        // [disable keyboard shortcuts, as these do not do centering on zoom,
        // and can lead to confusion with browser zoom (which gets fired depends on focus)]
        // - turned back on to support pinch/zoom on iPad
        _diagram.allowZoom = true;

        _diagram.toolManager.mouseWheelBehavior = go.ToolManager.WheelZoom;

        // decide what kinds of Parts can be added to a Group or to top-level
        // _diagram.commandHandler.memberValidation = function (grp, node) {
        //     //if (grp instanceof go.Group && node instanceof go.Group) return false;  // cannot add Groups to Groups
        //     return true;
        // };

        // default link attributes
        _diagram.toolManager.linkingTool.archetypeLinkData = {
            type: 'noArrows'
        };

        // allow double-click in background to create a new node
        _diagram.toolManager.clickCreatingTool.archetypeNodeData = getNewThingData();

        // how long mouse must be held stationary before starting a drag-select (instead of a scroll) - default was 175ms
        _diagram.toolManager.dragSelectingTool.delay = 400;
    }

    // ----------- handling of DiagramEvents --------------------

    function addDiagramListeners() {

        // DiagramEvents to be handled here or by a component
        var diagramEvents = ['InitialLayoutCompleted', 'ChangedSelection', 'BackgroundSingleClicked', 'SelectionCopied', 'SelectionMoved', 'SelectionDeleting', 'SelectionDeleted', 'PartCreated', 'PartResized', 'ClipboardChanged', 'ClipboardPasted', 'LinkDrawn', 'LinkRelinked', 'ViewportBoundsChanged'];
        _.each(diagramEvents, function (eventName) {
            _diagram.addDiagramListener(eventName, function (e) {
                broadcastDiagramEvent(eventName, e);
            });
        });

        _diagram.addDiagramListener('BackgroundContextClicked', function (e) {});
    }

    // broadcasts the given DiagramEvent (see apidocs for go.DiagramEvent)
    // to any components that may be interested, including this one.
    function broadcastDiagramEvent(eventName, e) {
        self.handleDiagramEvent(eventName, e);
        _.each(getComponents(), function (component) {
            if (component && component.handleDiagramEvent) component.handleDiagramEvent(eventName, e);
        });
        $scope.safeApply();
    }

    this.handleDiagramEvent = function (eventName, e) {
        //console.log('handleDiagramEvent: ' + eventName);
        if (eventName == 'ChangedSelection') {
            changedSelection(e);
        } else if (eventName == 'SelectionCopied') {
            selectionCopied(e);
        } else if (eventName == 'PartCreated') {
            partCreated(e);
        } else if (eventName == 'BackgroundSingleClicked') {
            _ui.showHelpTip('canvasTip');
        } else if (eventName == 'LinkDrawn') {
            linkDrawn(e);
            setNewLinkDirection(e);
        } else if (eventName == 'LinkRelinked') {
            linkRelinked(e);
        } else if (eventName == 'ClipboardChanged') {
            clipboardChanged(e);
        } else if (eventName == 'ClipboardPasted') {
            clipboardPasted(e);
        }
    };

    // handle zoom to region if applicable
    function changedSelection(e) {
        //console.log('map.changedSelection');
        _diagram.updateAllTargetBindings();
        _ui.maybeZoomToRegion();
        if (self.relationshipsSelected()) {
            _ui.showHelpTip('relationshipTip');
        }
    }

    function partCreated(e) {
        //console.log('Map, PartCreated');
        var group = e.subject;
        if (!(group instanceof go.Group)) {
            return;
        }
        _diagram.model.setDataProperty(group.data, 'layout', _ui.getMapEditorOptions().defaultThingLayout || 'left');
        _layouts.setNewPartLocationData(e);
    }

    // fix link ports when a link is created -
    // the P and R ports both cover the whole node, and the P port is on top of the R port,
    // so both P and R links get the toPort set to P by default.
    function linkDrawn(e) {
        var link = e.subject;
        console.log('linkDrawn, link: ' + link + ', fromPort: ' + link.fromPortId + ', toPort: ' + link.toPortId);
        if (link.fromPortId == 'P') {
            _diagram.model.startTransaction('change link category');
            _diagram.model.setDataProperty(link.data, 'toPort', 'P');
            _diagram.model.setDataProperty(link.data, 'category', 'P');
            _diagram.model.commitTransaction('change link category');
        }
        // prevent links from R to P
        else if (link.fromPortId == 'R') {
            _diagram.model.startTransaction('change link toPort');
            _diagram.model.setDataProperty(link.data, 'toPort', 'R');
            _diagram.model.commitTransaction('change link toPort');
        }
    }

    // fix link ports when a link is relinked -
    // dragging either end of an R-link to another node will set the corresponding port to P,
    // since P port is on top of R port, so we reset both ports to R if the category is not P.
    function linkRelinked(e) {
        var link = e.subject;
        if (!link.data.category || link.data.category !== 'P') {
            _diagram.model.setDataProperty(link.data, 'fromPort', 'R');
            _diagram.model.setDataProperty(link.data, 'toPort', 'R');
        }
    }

    function setNewLinkDirection(e) {
        var link = e.subject;
        if (link.fromPortId == 'R') {
            _diagram.model.startTransaction('change link direction');
            _diagram.model.setDataProperty(link.data, 'type', _ui.getMapEditorOptions().defaultRelationshipDirection);
            _diagram.commitTransaction('change link direction');
        }
    }

    function clipboardChanged(e) {
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group) {
                console.log('clipboardChanged: part ' + part + ', mainpanel scale: ' + part.findObject('mainpanel').scale);
            }
        }
    }

    // NB: this is called when parts are copied by control-drag, NOT when the copy button is clicked
    function selectionCopied(e) {
        console.log('selectionCopied');
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group && part.isTopLevel) {
                var loc = go.Point.parse(part.data.loc);
                console.log('selectionCopied: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                _diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                part.updateTargetBindings('loc');
            }
        }
    }

    function clipboardPasted(e) {
        var parts = e.subject.iterator;
        while (parts.next()) {
            var part = parts.value;
            if (part instanceof go.Group && part.isTopLevel) {
                var loc = go.Point.parse(part.data.loc);
                //console.log('clipboardPasted: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                _diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                part.updateTargetBindings('loc');
            }
        }
    }

    // computes the bounds of all groups in the diagram - this includes all ideas/things,
    // and excludes nodes, including slides, the slide blocker, and the export footer
    this.computeMapBounds = function () {
        var groups = new go.List(go.Group);
        var nodes = _diagram.nodes;
        while (nodes.next()) {
            if (nodes.value instanceof go.Group) {
                groups.add(nodes.value);
            }
        }
        return _diagram.computePartsBounds(groups).copy(); // return a mutable rect
    };

    // ------------ what is currently selected? ----------------

    // returns true if all selected items are things (i.e. Groups), including r-things
    this.thingsSelected = function () {
        if (!_diagram || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Group)) return false;
        }

        return true;
    };

    // returns true if exactly one thing (Group) is selected
    this.thingSelected = function () {
        return _diagram && _diagram.selection.count == 1 && _diagram.selection.first() instanceof go.Group;
    };

    // if a single group is selected, returns it, otherwise returns null
    this.getUniqueThingSelected = function () {
        if (_diagram && _diagram.selection.count == 1 && _diagram.selection.first() instanceof go.Group) {
            return _diagram.selection.first();
        } else {
            return null;
        }
    };

    this.thingsSelectedAreMembersOf = function (group) {
        if (!_diagram || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Group) || it.value.containingGroup != group) return false;
        }

        return true;
    };

    this.thingsSelectedAreDescendantsOf = function (group) {
        if (!_diagram || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            var ancestors = _layouts.getAncestorGroups(it.value);
            if (_.indexOf(ancestors, group) == -1) return false;
        }

        return true;
    };

    this.thingsSelectedIncludeSlide = function () {
        if (!_diagram || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (it.value.data && it.value.data.category == 'slide') {
                return true;
            }
        }

        return false;
    };

    // returns true if all selected items are relationships (i.e. Links)
    this.relationshipsSelected = function () {
        if (!_diagram || _diagram.selection.count < 1) return false;

        var it = _diagram.selection.iterator;
        while (it.next()) {
            if (!(it.value instanceof go.Link) || !_layouts.isRLink(it.value)) return false;
        }

        return true;
    };

    // returns true if exactly one relationship (Link) is selected
    this.relationshipSelected = function () {
        return _diagram && _diagram.selection.count == 1 && _diagram.selection.first() instanceof go.Link;
    };

    // ------------ load and initialize model -------------

    this.load = function () {
        var url = $scope.mapUrl + '.json';
        if ($scope.sandbox) {
            url = $scope.mapUrl + '.json?sandbox=1';
        }
        //TODO: restore non-Angular http-get for map data
        var data = { 'map': { 'metadata': { 'sandbox': false, 'id': 5547, 'name': 'Untitled Map', 'url': '/maps/5547', 'canEdit': true, 'updatedAt': '2015-05-15T12:29:40.721-04:00', 'updatedBy': null, 'updatedByName': null, 'userTags': [] }, 'data': { 'class': 'go.GraphLinksModel', 'nodeIsLinkLabelProperty': 'isLinkLabel', 'linkLabelKeysProperty': 'labelKeys', 'linkFromPortIdProperty': 'fromPort', 'linkToPortIdProperty': 'toPort', 'nodeDataArray': [{ 'key': 1, 'text': 'New Idea', 'isGroup': true, 'loc': '0 0', 'layout': 'left', 'sExpanded': true, 'pExpanded': true }], 'linkDataArray': [] }, 'stateData': null, 'editorOptions': null, 'analytics': {}, 'versions': [] } };
        _diagram.model = go.Model.fromJson(data);
        _ui.setStateData(data.map.stateData);
        _ui.setMapEditorOptions(data.map.editorOptions);

        self.checkModel();
        _diagram.updateAllTargetBindings();
        _diagram.undoManager.isEnabled = true;
        _diagram.model.addChangedListener(_autosave.modelChanged);
        _autosave.saveOnModelChanged = true;
        _diagram.isReadOnly = !$scope.canEdit;
        $scope.updateEditStatus($scope.canEdit ? $scope.LAST_UPDATED : $scope.READ_ONLY);
        _ui.resetZoom();
        self.loadMapExtraData(data.map);

        // if no nodes OR in thinkquery mode, launch generator
        if ($scope.thinkquery || !_diagram.model.nodeDataArray.length) {
            _ui.openTab(_ui.TAB_ID_GENERATOR);
        }
        // if we have slides, play presentation
        else if (!$scope.canEdit && _presenter.getSlideNodeDatas().length) {
            _presenter.playSlide(1);
        }
    };

    this.loadForSandbox = function () {
        _diagram.model = go.Model.fromJson($scope.mapData);
        _ui.setStateData(''); // important! (otherwise corner highlighting breaks)
        _diagram.updateAllTargetBindings();
        _diagram.undoManager.isEnabled = true;
        _ui.resetZoom();
        $scope.canEdit = true;

        // if no nodes OR in thinkquery mode, launch generator
        if ($scope.thinkquery) {
            _ui.openTab(_ui.TAB_ID_GENERATOR);
        }
        // if we have slides, play presentation
        else if (_presenter.getSlideNodeDatas().length) {
            _presenter.playSlide(1);
        }
    };

    // fix any structural problems in the model before displaying it
    this.checkModel = function () {
        // change "isLinkLabel" property to category:"LinkLabel" (change as of goJS 1.3)
        _.each(_diagram.model.nodeDataArray, function (nodeData, index, list) {
            if (nodeData.isLinkLabel) {
                delete nodeData.isLinkLabel;
                nodeData.category = 'LinkLabel';
            }
        });

        // check for the link label (r-thing) for a link being the same as the from or to node
        // - this can cause infinite recursion in thinks like layout.getScale
        _.each(_diagram.model.linkDataArray, function (linkData, index, list) {
            var badLabelKeys = [];
            _.each(linkData.labelKeys, function (key, index2, list2) {
                if (key == linkData.from || key == linkData.to) {
                    console.log('labelKey same as from or to of link: ' + key);
                    badLabelKeys.push(key);
                }
            });
            linkData.labelKeys = _.difference(linkData.labelKeys, badLabelKeys);
        });
    };

    // loads other data besides the diagram model from the json object returned by maps/show.json
    // - this includes points, badges, versions, and map analytics
    // NB: points and badges are set at page load time in layouts/user and users/badges, but
    // we also need to be able to update them here after an autosave

    // TODO: is this still all needed with the newer userProfile stuff?
    this.loadMapExtraData = function (mapData) {
        $scope.safeApply(function () {
            //console.log('map.loadMapExtraData, mapData: ' + mapData);
            $scope.mapUserTags = mapData.metadata.userTags; // TODO: is this used anywhere?

            //$scope.map.getHistory().versionList = mapData.versions;
            $scope.map.getAnalytics().mapAnalytics = mapData.analytics;
        });
    };

    // loads model data for an individual version and displays it
    // NB: this also disables autosave; load() must be called to re-enable it
    this.loadVersion = function (id) {
        $http.get('/map_versions/' + id).then(function (response) {
            if (response.status === 200) {
                try {
                    //console.log('loaded map version with ID: ' + id);
                    _diagram.model = go.Model.fromJson(response.data);
                    _diagram.updateAllTargetBindings();
                    _diagram.undoManager.isEnabled = false;
                    _autosave.saveOnModelChanged = false;
                    _diagram.layoutDiagram(true);
                    _diagram.isReadOnly = true;
                } catch (e) {
                    alert('Could not load MetaMap version');
                    console.error(e.message);
                }
            }
        });
    };

    // set whether editing capability is temporarily suspended -
    // this is distinct from the global $scope.canEdit setting,
    // which if false prevents editing at all times
    this.setEditingBlocked = function (val) {
        if ($scope.canEdit) {
            _diagram.isReadOnly = val;
        }
    };

    // ------------- creating things in the model -------------------

    // default properties for all new Things (groups) - note that these can be overridden if needed
    function getNewThingData() {
        return {
            text: 'Idea',
            isGroup: true,
            layout: _ui.getMapEditorOptions().defaultThingLayout || 'left',
            sExpanded: true,
            pExpanded: true
        };
    }

    this.createSister = function (thing) {
        if (!$scope.canEdit) {
            return null;
        }

        var newLoc = _layouts.getNewSisterLocation(thing);
        var data = _.extend(getNewThingData(), {
            group: thing.data.group,
            text: 'Idea',
            loc: go.Point.stringify(newLoc)
        });
        _diagram.model.addNodeData(data);
        var newSister = _diagram.findNodeForData(data);

        // put new sister right after thing (not as the last sibling)
        if (thing.containingGroup) {
            self.moveSiblingNextTo(newSister, thing, self.RIGHT);
        }
        return newSister;
    };

    this.createRToSister = function (thing) {
        if (!$scope.canEdit) {
            return null;
        }

        var thingKey = _diagram.model.getKeyForNodeData(thing.data);
        //console.log('thingKey: ' + thingKey);
        var newLoc = _layouts.getNewSisterLocation(thing, true); // withR = true
        var data = _.extend(getNewThingData(), {
            group: thing.data.group,
            text: 'Idea',
            loc: go.Point.stringify(newLoc)
        });
        _diagram.model.addNodeData(data);
        var newSister = _diagram.findNodeForData(data);
        var groupKey = _diagram.model.getKeyForNodeData(data);

        // create link
        var linkData = {
            from: thingKey,
            to: groupKey,
            type: 'to',
            fromPort: 'R',
            toPort: 'R'
        };
        _diagram.model.addLinkData(linkData);

        // put new sister right after thing (not as the last sibling)
        if (thing.containingGroup) {
            self.moveSiblingNextTo(newSister, thing, self.RIGHT);
        }
        return newSister;
    };

    this.createChild = function (thing, name, x, y) {
        if (!$scope.canEdit) {
            return null;
        }

        var newLoc = _layouts.getNewChildLocation2(thing);
        if (x || y) {
            newLoc = new go.Point(x, y);
        }
        var data = _.extend(getNewThingData(), {
            group: thing.data.key,
            text: name || 'Part',
            loc: go.Point.stringify(newLoc)
        });
        _diagram.model.addNodeData(data);
        _layouts.setDescendantLayouts(thing, thing.data.layout);
        var child = _diagram.findNodeForData(data);
        child.updateTargetBindings();
        return child;
    };

    this.createRThing = function (link, name) {
        if (!$scope.canEdit) {
            return null;
        }

        // console.log('createRThing, link: ' + link + ', name: ' + name);
        // don't allow multiple R-things
        if (link.isLabeledLink) {
            // console.log('cannot create RThing, link is already labeled');
            return;
        }

        var data = _.extend(getNewThingData(), {
            text: name || 'Relationship Idea',
            //isLinkLabel: true,     // deprecated as of goJS 1.3
            category: 'LinkLabel', // new as of goJS 1.3
            loc: '0 0'
        });
        _diagram.model.startTransaction('create R Thing');
        _diagram.model.addNodeData(data);
        var key = _diagram.model.getKeyForNodeData(data);
        var node = _diagram.findPartForKey(key);
        node.labeledLink = link;
        _diagram.model.commitTransaction('create R Thing');
        _diagram.updateAllTargetBindings();

        return _diagram.findNodeForData(data);
    };

    // ---------- creating things with specified names/locations - for use by generator and tests ------------

    this.createThing = function (x, y, name, layout) {
        group = _diagram.toolManager.clickCreatingTool.insertPart(new go.Point(x, y));
        _diagram.model.setDataProperty(group.data, 'text', name);
        if (layout) {
            _diagram.model.setDataProperty(group.data, 'layout', layout);
        }
        return group;
    };

    this.createRLinkWithRThing = function (thing1, thing2, name) {
        var link = self.createRLink(thing1, thing2);
        return self.createRThing(link, name);
    };

    // returns the linkData object for the new link
    this.createRLink = function (thing1, thing2) {
        _diagram.model.startTransaction('add link');
        var data = {
            type: 'noArrows',
            from: thing1.data.key,
            to: thing2.data.key,
            fromPort: 'R',
            toPort: 'R'
        };
        _diagram.model.addLinkData(data);
        _diagram.model.commitTransaction('add link');
        return _diagram.findLinkForData(data);
    };

    // returns the linkData object for the new link
    this.createPLink = function (thing1, thing2) {
        _diagram.model.startTransaction('add link');
        var data = {
            type: 'noArrows',
            from: thing1.data.key,
            to: thing2.data.key,
            fromPort: 'P',
            toPort: 'P',
            category: 'P'
        };
        _diagram.model.addLinkData(data);
        _diagram.model.commitTransaction('add link');
        _diagram.model.setDataProperty(thing1.data, 'pExpanded', true);
        return _diagram.findLinkForData(data);
    };

    // ------------- moving things in the model structure -------------------

    // returns a go.List of the items in the current selection that are Groups
    function getSelectedGroups() {
        var it = _diagram.selection.iterator;
        var members = new go.List();
        while (it.next()) {
            var part = it.value;
            if (part instanceof go.Group) {
                members.add(part);
            }
        }
        return members;
    }

    // drag to S
    this.addSelectedThingsAsChildrenOf = function (group) {
        var newMembers = getSelectedGroups();

        // check existing members so we can calculate layout
        var oldMemberBounds = self.safeRect(_diagram.computePartsBounds(group.memberParts));

        // NB: this is subject to validation by CommandHandler.isValidMember,
        // so for example, members of members of newMembers will not be added as members
        group.addMembers(newMembers);

        _layouts.layoutNewMembersRelativeTo(newMembers, group, oldMemberBounds);

        _diagram.clearSelection();
    };

    // drag to D
    this.addSelectedThingsAsSistersOf = function (group) {
        var oldMembers = getSelectedGroups();

        // if dragging to top level, move dragged things so they don't overlap the former parent
        if (!group.containingGroup) {
            // check existing members so we can calculate layout
            var oldMembersBounds = _diagram.computePartsBounds(oldMembers);
            // NB: oldMembers can be on multiple levels, so not clear which level to use for rescaling old members after drag
            var oldMembersLevel = _layouts.computeLevel(oldMembers.first());

            var it = oldMembers.iterator;
            while (it.next()) {
                var member = it.value;
                member.containingGroup = null;
            }
            _layouts.layoutOldMembersOutsideOf(oldMembers, group, oldMembersBounds, oldMembersLevel);
        }
        // if not dragging to top level, place dragged things after former parent in outline
        else {
            var it2 = oldMembers.iterator;
            while (it2.next()) {
                var member2 = it2.value;
                member2.containingGroup = group.containingGroup;
                self.moveSiblingNextTo(member2, group, self.RIGHT);
            }
        }
        _diagram.clearSelection();
    };

    // for dragging parts within a system - side is LEFT or RIGHT (i.e. above or below, resp. in inventory layout)
    this.addSelectedThingAsOrderedSisterOf = function (group, side) {
        //console.log('addSelectedThingAsOrderedSisterOf, side: ' + side);
        var thing = self.getUniqueThingSelected();
        if (!thing) {
            return;
        }
        self.moveSiblingNextTo(thing, group, side);
    };

    // moves the first thing (sibling) to be after the second thing (group)
    // in the part ordering - they are assumed to be siblings
    // side is LEFT or RIGHT
    this.moveSiblingNextTo = function (sibling, group, side) {
        var parent = group.containingGroup;
        console.log('moveSiblingNextTo, sibling: ' + sibling + ', group: ' + group + ', parent: ' + parent + ', sibling.containingGroup: ' + sibling.containingGroup);

        if (!parent || sibling.containingGroup != parent) {
            console.error('Cannot do moveSiblingNextTo on non-siblings or top-level groups');
        }

        // create new member order
        var memberOrder = new go.List();
        var it = parent.memberParts;
        var order = 0;
        while (it.next()) {
            var member = it.value;
            if (member instanceof go.Group) {
                // we're at the target group, so add the moved thing either before or after it
                if (member == group) {
                    if (side == self.LEFT) {
                        memberOrder.add(sibling);
                        _diagram.model.setDataProperty(sibling.data, 'order', order++);
                        memberOrder.add(member);
                        _diagram.model.setDataProperty(member.data, 'order', order++);
                    } else {
                        memberOrder.add(member);
                        _diagram.model.setDataProperty(member.data, 'order', order++);
                        memberOrder.add(sibling);
                        _diagram.model.setDataProperty(sibling.data, 'order', order++);
                    }
                }
                // don't re-add the moved thing, it was added above
                else if (member != sibling) {
                    memberOrder.add(member);
                    _diagram.model.setDataProperty(member.data, 'order', order++);
                }
            }
        }

        // clear existing members
        var newIt = memberOrder.iterator;
        while (newIt.next()) {
            var member2 = newIt.value;
            member2.containingGroup = null;
        }

        // add new members
        newIt.reset();
        while (newIt.next()) {
            var member3 = newIt.value;
            member3.containingGroup = parent;
        }
    };

    this.addThingAsRThing = function (thing, link) {
        thing.labeledLink = link;
        thing.updateTargetBindings();
    };

    // D corner handler (single click)
    this.toggleDFlag = function (thing) {
        _diagram.model.setDataProperty(thing.data, 'dflag', !thing.data.dflag);
        thing.updateTargetBindings();
    };

    // S corner handler (single click)
    this.toggleSExpansion = function (thing) {
        var isExpanded = !(thing.data && !thing.data.sExpanded); // expand by default if property not present
        _diagram.model.setDataProperty(thing.data, 'sExpanded', !isExpanded);
        thing.updateTargetBindings();
        _ui.showCornerTip(thing, 'S');
    };

    // P corner handler (single click)
    this.togglePExpansion = function (thing) {
        _diagram.model.setDataProperty(thing.data, 'pExpanded', !self.pIsExpanded(thing));
        thing.updateTargetBindings();
        _ui.showCornerTip(thing, 'P');
    };

    this.pIsExpanded = function (group) {
        return group.data && group.data.pExpanded === true;
    };

    // ---------------------- undo/redo --------------------

    this.canUndo = function () {
        return _diagram.commandHandler.canUndo();
    };

    this.undo = function () {
        _diagram.commandHandler.undo();
        _diagram.layoutDiagram(true);
    };

    this.canRedo = function () {
        return _diagram.commandHandler.canRedo();
    };

    this.redo = function () {
        _diagram.commandHandler.redo();
        _diagram.layoutDiagram(true);
    };

    this.refresh = function () {
        _diagram.updateAllTargetBindings();
        _diagram.layoutDiagram(true);
    };

    // ------------------- utility ----------------------

    // check for a rect with NaN X/Y/W/H coords, so we can do stuff with it such as unionRect
    // (NaN,NaN,0,0) => (0,0,0,0)
    this.safeRect = function (rect) {
        if (isNaN(rect.x)) {
            rect.x = 0;
        }
        if (isNaN(rect.y)) {
            rect.y = 0;
        }
        if (isNaN(rect.width)) {
            rect.width = 0;
        }
        if (isNaN(rect.height)) {
            rect.height = 0;
        }
        return rect;
    };

    // ------------------- debug map model ----------------------

    this.loadModel = function () {
        $('#map-model-debug').val(_diagram.model.toJson());
    };

    this.saveModel = function () {
        _diagram.model = go.Model.fromJson($('#map-model-debug').val());
        _diagram.updateAllTargetBindings();
        _diagram.model.addChangedListener(_autosave.modelChanged);
        _autosave.saveOnModelChanged = true;
    };
};

// TODO: turn off in production
//console.log('diagram model:' + _diagram.model.toJson());

},{}],16:[function(require,module,exports){
// controller for user's maps/dashboard

'use strict';

window.MapsCtrl = function ($scope) {

    $scope.searchText = '';

    $scope.listingParams = new GorgesGrid.ListingParams();
    $scope.listingParams.sortBy = 'updated_at';
    $scope.listingParams.sortOrder = 'desc';

    $scope.listingParams.viewName = $scope.params.viewName || 'all'; // set default view
    $scope.rowSelection = new GorgesGrid.RowSelection();
    $scope.viewTreeState = new GorgesGrid.ViewTreeState();
    $scope.viewTreeState.expandedViews = ['orgs_belonged_to'];
    $scope.maps = [];
    $scope.views = [];
    $scope.users = [];

    $scope.tagging = new SandbankTagging($scope);
    $scope.adminTagging = new SandbankAdminTagging($scope);
    $scope.sharing = new SandbankSharing($scope);

    $scope.openTaggingModal = function () {
        $scope.tagging.openModal($scope.getSelectedMapIds(), false, // don't show description field (TODO: show if it's a single map that the user can edit?)
        function () {
            $scope.loadMaps();
        } // on update
        );
    };

    $scope.openAdminTaggingModal = function () {
        $scope.adminTagging.openModal($scope.getSelectedMapIds()[0], function () {
            $scope.loadMaps();
        } // on update
        );
    };

    $scope.openSharingModal = function () {
        $scope.sharing.openModal($scope.getSelectedMapIds(), function () {
            $scope.loadMaps();
        } // on update
        );
    };

    // ---------------- row selection -----------------

    // TODO: add conditions for enabling tag/share/delete buttons based on permissions of selected maps

    $scope.getSelectedMapIds = function () {
        var ids = [];
        _.each($scope.rowSelection.selectedRowIndexes, function (element, index, list) {
            if (element) {
                if ($scope.maps[index]) {
                    // should always be true
                    ids.push($scope.maps[index].id);
                }
            }
        });
        return ids;
    };

    // ---------------- respond to view/page changes -----------------

    $scope.maybeSetView = function (view) {
        // don't set the view if a parent view is clicked on
        if (!view.isParent) {
            $scope.listingParams.viewName = view.name;
            $scope.loadMaps();
        }
        $scope.viewTreeState.expandView(view.name);
    };

    $scope.pageSelected = function () {
        $scope.loadMaps();
    };

    $scope.setSortBy = function (col) {
        $scope.listingParams.setSortBy(col);
        $scope.loadMaps();
    };

    $scope.doSearch = function () {
        $scope.loadMaps();
    };

    $scope.resetSearch = function () {
        $scope.searchText = '';
        $scope.loadMaps();
    };

    // ---------------- map data -----------------

    $scope.loadMaps = function () {
        startSpinner();
        $http.get('/maps.json?' + $scope.listingParams.toQueryString() + '&search=' + $scope.searchText).then(function (response) {
            // get updated params
            _.extend($scope.listingParams, response.data.listingParams);
            $scope.rowSelection.deselectAll();
            $scope.views = response.data.views;
            $scope.maps = response.data.maps;
            $scope.users = response.data.users;
            $scope.viewTreeState.expandView($scope.params.expandView);
            stopSpinner();
        }, function () {
            stopSpinner();
            alert('Could not load list of MetaMaps');
        });
    };

    $scope.loadMaps();

    // -------------- view helpers -----------------

    $scope.listUserTags = function (map) {
        return _.pluck(map.userTags, 'name').join(', ');
    };

    $scope.listCcsTags = function (map) {
        return _.pluck(map.ccsTags, 'name').join(', ');
    };

    $scope.listAdminTags = function (map) {
        return _.pluck(map.adminTags, 'name').join(', ');
    };

    $scope.getUserName = function (map) {
        if (map.userId === $scope.userId) {
            return 'Me';
        } else {
            var user = _.findWhere($scope.users, {
                id: map.userId
            });
            return user ? user.name : '';
        }
    };

    // ------------- star a map -----------------

    $scope.toggleStar = function (map) {
        console.log('toggleStar');
        $http.post('/maps/' + map.id + '/toggle_star').then(function (response) {
            $scope.loadMaps(); // reload to update total in TOC
        }, function () {});
    };

    // ------------- delete maps -----------------

    $scope.confirmDeleteSelected = function () {
        var mapIds = $scope.getSelectedMapIds();

        // if (mapIds.length == 1) {
        //     alertify.confirm('Delete selected MetaMap?', function(e) {
        //         if (e) {
        //             deleteSelected(mapIds);
        //         }
        //     });
        // } else if (mapIds.length > 1) {
        //     alertify.confirm('Delete ' + mapIds.length + ' selected MetaMaps?', function(e) {
        //         if (e) {
        //             setTimeout(function() { // this is required to make multiple alertify confirms work...
        //                 alertify.confirm('You are deleting multiple MetaMaps, are you really sure?', function(e2) {
        //                     if (e2) {
        //                         deleteSelected(mapIds);
        //                     }
        //                 });
        //             }, 1000);
        //         }
        //     });
        // }

        if (mapIds.length == 1) {
            if (confirm('Delete selected MetaMap?')) {
                deleteSelected(mapIds);
            }
        } else if (mapIds.length > 1) {
            if (confirm('Delete ' + mapIds.length + ' selected MetaMaps?')) {
                if (confirm('You are deleting multiple MetaMaps, are you really sure?')) {
                    deleteSelected(mapIds);
                }
            }
        }
    };

    function deleteSelected(mapIds) {
        $http.post('/maps/delete_multiple', mapIds).then(function (response) {
            if (response.status === 200 || response.status === 204) {
                $scope.loadMaps();
                alertify.success((mapIds.length > 1 ? 'MetaMaps' : 'MetaMap') + ' deleted');
            } else {
                alertify.error('Could not delete MetaMaps');
            }
        }, function () {
            alert('Could not delete MetaMaps');
        });
    }
};

},{}],17:[function(require,module,exports){
// functions for editing perspectives AND distinctions, which work similarly in the UI

'use strict';

SandbankEditor.Perspectives = function ($scope, map) {

    var self = this;

    // temporary state flag for adding/removing P/D selections programmatically
    var selectingLinkedThings = false;

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        //console.log('Perspectives, currentTabChanged');
        if (newValue == map.getUi().TAB_ID_PERSPECTIVES) {
            // opening perspectives
            setPorDThing('P');
            map.setEditingBlocked(true);
        } else if (oldValue == map.getUi().TAB_ID_PERSPECTIVES) {
            // closing perspectives
            saveLinks('P');
            map.setEditingBlocked(false);
        } else if (newValue == map.getUi().TAB_ID_DISTINCTIONS) {
            // opening distinctions
            setPorDThing('D');
            map.setEditingBlocked(true);
        } else if (oldValue == map.getUi().TAB_ID_DISTINCTIONS) {
            // closing distinctions
            saveLinks('D');
            map.setEditingBlocked(false);
        }
    };

    this.handleDiagramEvent = function (eventName, e) {
        if (eventName == 'ChangedSelection') {
            if (map.getUi().currentTabIs(map.getUi().TAB_ID_PERSPECTIVES) || map.getUi().currentTabIs(map.getUi().TAB_ID_DISTINCTIONS)) {
                updateLinks();
            }
        }
    };

    // ---------- P/D Editor state

    this.isInPOrDEditorMode = function () {
        return map.getUi().state.perspectivePointKey || map.getUi().state.distinctionThingKey;
    };

    this.isInPEditorMode = function () {
        return map.getUi().state.perspectivePointKey;
    };

    this.isInDEditorMode = function () {
        return map.getUi().state.distinctionThingKey;
    };

    this.isPEditorPoint = function (group) {
        return map.getUi().state.perspectivePointKey == group.data.key;
    };

    this.isDEditorThing = function (group) {
        return map.getUi().state.distinctionThingKey == group.data.key;
    };

    // NB: this is called via map.getCornerFunction, so we get the extra corner arg, which we can ignore
    this.setPEditorPoint = function (thing, corner) {
        if ($scope.canEdit) {
            map.getUi().openTab(map.getUi().TAB_ID_PERSPECTIVES);
        }
    };

    this.setDEditorThing = function (thing) {
        if ($scope.canEdit) {
            // NB: need to select only this thing, since this is invoked
            // by a control-click, which will not automatically select just it
            map.getDiagram().clearSelection();
            thing.isSelected = true;
            map.getUi().openTab(map.getUi().TAB_ID_DISTINCTIONS);
        }
    };

    // -----------------------

    this.isPerspectivePoint = function (group) {
        var links = group.findLinksOutOf();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P') {
                return true;
            }
        }
        return false;
    };

    this.isSelectedPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && map.pIsExpanded(link.fromNode) && link.fromNode.isSelected) {
                return true;
            }
        }
        return false;
    };

    this.isToggledPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && map.pIsExpanded(link.fromNode)) {
                return true;
            }
        }
        return false;
    };

    this.isMouseOverPerspectiveView = function (group) {
        var links = group.findLinksInto();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == 'P' && link.fromNode == map.getUi().mouseOverGroup) {
                return true;
            }
        }
        return false;
    };

    this.getPerspectiveViewWeight = function (group) {
        var mode = map.getUi().getMapEditorOptions().perspectiveMode;
        if (mode == 'spotlight' || mode == 'both') {
            return (self.isSelectedPerspectiveView(group) ? 1 : 0) + (self.isToggledPerspectiveView(group) ? 1 : 0) + (self.isMouseOverPerspectiveView(group) ? 1 : 0);
        } else {
            return 0;
        }
    };

    // -----------------------

    // category is "P" or "D" (perspectives or distinctions)
    function setPorDThing(category) {
        // if already set, must do save perspectives or save distinctions
        if (map.getUi().state.perspectivePointKey || map.getUi().state.distinctionThingKey) return;

        var thing = map.getDiagram().selection.first();
        //console.log('setPorDThing: ' + thing);
        if (thing instanceof go.Group) {
            var key = thing.data.key;
            if (category == 'P') {
                map.getUi().state.perspectivePointKey = key;
            } else if (category == 'D') {
                map.getUi().state.distinctionThingKey = key;
            }

            // select views/others
            selectLinkedThingsFor(thing, category);
        }
    }

    // this is called when the selection changes - if the thing is set,
    // adds/removes D/P links according to what is selected; otherwise
    // just shows/hides D/P links for the selected thing(s)
    function updateLinks() {
        if (selectingLinkedThings) // selection is being changed programmatically, so don't respond
            return;

        var pOrDThing = null;
        var category = null;
        if (map.getUi().state.perspectivePointKey) {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.perspectivePointKey);
            category = 'P';
        } else if (map.getUi().state.distinctionThingKey) {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.distinctionThingKey);
            category = 'D';
        }

        var addLinksTo = new go.List();
        var removeLinks = new go.List();

        // iterate through all things
        if (category) {
            var layers = map.getDiagram().layers;
            while (layers.next()) {
                var layer = layers.value;
                var parts = layer.parts;
                while (parts.next()) {
                    var part = parts.value;
                    if (part instanceof go.Group) {
                        // calculate links to add/remove based on selection
                        if (pOrDThing) {
                            var links = part.findLinksInto();
                            var existingLink = null;
                            while (links.next()) {
                                var link = links.value;
                                if (link.fromNode.data.key == pOrDThing.data.key && link.data.category == category) existingLink = link;
                            }

                            // decide whether to add or remove a link to the part, depending on whether
                            // it is selected and whether a link exists
                            if (!existingLink && part.isSelected) addLinksTo.add(part);else if (existingLink && !part.isSelected) removeLinks.add(existingLink);
                        }
                    }
                }
            }
        }

        // do the adding/removing of links
        var adds = addLinksTo.iterator;
        while (adds.next()) {
            map.getDiagram().model.startTransaction('add link');
            var to = adds.value;
            console.log('updateLinks: adding link from ' + pOrDThing + ' to ' + to);
            if (category == 'D' && pOrDThing.data.key == to.data.key) {
                pOrDThing.isSelected = false;
                alert('You can\'t distinguish a thing from itself!');
                continue;
            }
            map.getDiagram().model.addLinkData({
                from: pOrDThing.data.key,
                to: to.data.key,
                fromPort: category,
                toPort: category,
                category: category
            });
            map.getDiagram().model.commitTransaction('add link');
        }
        var removes = removeLinks.iterator;
        while (removes.next()) {
            var remove = removes.value;
            console.log('updateLinks: removing link from ' + remove.fromNode + ' to ' + remove.toNode);
            map.getDiagram().model.startTransaction('remove link');
            map.getDiagram().remove(remove);
            map.getDiagram().model.removeLinkData(remove.data);
            map.getDiagram().model.commitTransaction('remove link');
        }

        // show links
        map.getDiagram().updateAllTargetBindings();
    }

    function saveLinks(category) {
        var pOrDThing = null;
        if (category == 'P') {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.perspectivePointKey);
            map.getUi().state.perspectivePointKey = null;
        } else if (category == 'D') {
            pOrDThing = map.getDiagram().findNodeForKey(map.getUi().state.distinctionThingKey);
            map.getUi().state.distinctionThingKey = null;
        }

        map.getDiagram().clearSelection();
        map.getDiagram().updateAllTargetBindings();
    }

    function selectLinkedThingsFor(group, category) {
        selectingLinkedThings = true;
        map.getDiagram().clearSelection();

        var links = group.findLinksOutOf();
        while (links.next()) {
            var link = links.value;
            if (link.data.category == category) link.toNode.isSelected = true;
        }

        selectingLinkedThings = false;
    }
};

},{}],18:[function(require,module,exports){
// functions for the presenter/slides

'use strict';

SandbankEditor.Presenter = function ($scope, map) {

    var self = this;

    // constants
    this.SLIDE_BLOCKER_WIDTH = 1000;
    this.SLIDE_BLOCKER_COLOR = '#fff';
    this.SLIDE_BLOCKER_OPACITY = 0.9;

    // state vars
    this.currentSlideIndex = null;
    this.isPresenting = false;
    this.showTOC = false;
    this.isCreatingThumbnail = false;

    // mask applied around slide region when presenting
    this.slideBlocker = null;

    this.diagramAspectRatio = null;

    this.init = function () {};

    this.autosave = function () {
        map.getAutosave().save('edit_presenter');
    };

    // ---------- editing functions for different slide types -------------

    // NB: hasLinks can have values false, 1, or true (1 means only a single link)
    this.slideTypes = [{
        name: 'TITLE_BODY', label: 'Title and Body',
        hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: false, hasMapSummary: false, hasLinks: false
    }, {
        name: 'TITLE_BODY_MAP', label: 'Title, Body and MetaMap',
        hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
    }, {
        name: 'ACTIVITY_MAP', label: 'Lesson Activity and MetaMap',
        hasTitle: true, hasNotes: true, hasChecks: true, hasMapRegion: true, hasMapSummary: false, hasLinks: true
    }, {
        name: 'MAP_ONLY', label: 'MetaMap only',
        hasTitle: true, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
    }, {
        name: 'MAP_SUMMARY', label: 'MetaMap Summary',
        hasTitle: false, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: true, hasLinks: false
    }];

    // ------------------ link/attachment types -----------------------

    this.linkTypes = [{ name: '', label: '-- Select attachment type --' }, { name: 'WEB', label: 'Web Page' }, { name: 'PDF', label: 'PDF' }, { name: 'DOC', label: 'Document' }, { name: 'SPREADSHEET', label: 'Spreadsheet' }, { name: 'PRESENTATION', label: 'Presentation' }, { name: 'METAMAP', label: 'MetaMap' }, { name: 'IMAGE', label: 'Image' }, { name: 'AUDIO', label: 'Audio' }, { name: 'VIDEO', label: 'Video' }, { name: 'SURVEY', label: 'Survey' }, { name: 'WORKSHEET', label: 'Worksheet' }];

    // ------------ list of all things in the map, for map summary slides ---------------------

    this.ideaList = '';

    // only call this occasionally, as they won't be editing the map while presenter is open
    function updateIdeaList() {
        var nodes = map.getDiagram().nodes;
        var list = [];
        while (nodes.next()) {
            if (nodes.value instanceof go.Group) {
                list.push(nodes.value.data.text);
            }
        }
        list.sort();

        // filter out placeholder names - see map.js:getNewThingData, createSister, etc.
        list = _.difference(_.uniq(list, true), map.getGenerator().getPlaceholderIdeaNames(), ['New Idea', 'New Distinguished Idea', 'New Related Idea', 'New Relationship Idea', 'New Part Idea', 'Idea', 'Part', 'Relationship Idea'] // newer simplified names
        );

        self.ideaList = list.join(', ');
    }

    this.summaryAnalytics = [{ name: 'COUNT_THINGS', singularLabel: 'Distinction', pluralLabel: 'Distinctions' }, { name: 'COUNT_SYSTEMS', singularLabel: 'System', pluralLabel: 'Systems' }, { name: 'COUNT_RELATIONSHIPS', singularLabel: 'Relationship', pluralLabel: 'Relationships' }, { name: 'COUNT_PERSPECTIVES', singularLabel: 'Perspective', pluralLabel: 'Perspectives' }, { name: 'COUNT_RTHINGS', singularLabel: 'Relationship Idea', pluralLabel: 'Relationship Ideas' }, { name: 'COUNT_SYSTEM_RTHINGS', singularLabel: 'Relationship System', pluralLabel: 'Relationship Systems' }, { name: 'COUNT_SYSTEM_PERSPECTIVES', singularLabel: 'Perspective System', pluralLabel: 'Perspective Systems' }, { name: 'COUNT_DISTINCTIONS', singularLabel: 'Advanced Distinction', pluralLabel: 'Advanced Distinctions' }];

    this.addCheck = function (nodeData) {
        nodeData.checks.push({ text: '' });
        self.autosave();
    };

    this.deleteCheck = function (check, nodeData) {
        var i = _.indexOf(nodeData.checks, check);
        nodeData.checks.splice(i, 1);
        self.autosave();
    };

    this.addLink = function (nodeData) {
        nodeData.links.push({ title: '', url: '', type: '' });
        self.autosave();
    };

    this.deleteLink = function (link, nodeData) {
        var i = _.indexOf(nodeData.links, link);
        nodeData.links.splice(i, 1);
        self.autosave();
    };

    this.toggleTOC = function () {
        $scope.safeApply(function () {
            if (self.isPresenting) {
                self.showTOC = !self.showTOC;
            }
        });
    };

    // NB: can't create this in init as the diagram doesn't exist yet...
    function maybeInitSlideBlocker() {
        if (!self.slideBlocker) {
            var mk = go.GraphObject.make;
            self.slideBlocker = mk(go.Node, go.Panel.Auto, {
                layerName: 'Tool',
                opacity: self.SLIDE_BLOCKER_OPACITY
            }, mk(go.Shape, 'Rectangle', {
                fill: null,
                stroke: self.SLIDE_BLOCKER_COLOR,
                strokeWidth: 1000
            }));
            map.getDiagram().add(self.slideBlocker);
        }
    }

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (oldValue == map.getUi().TAB_ID_PRESENTER) {
            // closing tab
            self.stopPresenting();
        } else if (newValue == map.getUi().TAB_ID_PRESENTER) {
            // opening tab
            // show slides (see layouts.slideTemplate, binding of visible attr)
            self.diagramAspectRatio = $('#diagram').width() / $('#diagram').height();
            console.log('diagramAspectRatio: ' + self.diagramAspectRatio);

            $scope.map.getDiagram().updateAllTargetBindings();
            updateIdeaList();
            if (!self.currentSlideIndex && self.getSlideNodeDatas().length > 0) {
                self.currentSlideIndex = 1;
            }
            self.slideThumbnailSelected(1);
        }
    };

    this.handleDiagramEvent = function (eventName, e) {
        if (!map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER)) {
            return;
        }

        if (eventName == 'SelectionDeleting') {
            var selection = e.subject;
            if (selection.count == 1) {
                var thing = selection.first();
                if (thing instanceof go.Node && thing.data.category == 'slide') {
                    if (!confirm('Delete this slide from the presentation?')) {
                        e.cancel = true;
                    }
                }
            }
        } else if (eventName == 'SelectionDeleted') {
            // if slide is deleted from canvas rather than by thumbnail x button, need to update indexes
            compactSlideIndexes();
        } else if (eventName == 'SelectionMoved' || eventName == 'PartResized') {
            // clear thumbnail cache
            thumbnailCache = [];
        } else if (eventName == 'ViewportBoundsChanged') {}
    };

    this.windowResized = _.debounce(function () {
        self.slideThumbnailSelected(self.currentSlideIndex);
    }, 1000);

    this.showSidebar = function () {
        return map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) && (!self.isPresenting || self.showTOC);
    };

    this.disableMapToolbarButtons = function () {
        return !map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) || self.isPresenting || !self.getCurrentSlideType().hasMapRegion;
    };

    // returns an array of node data objects (not the slide nodes themselves)
    this.getSlideNodeDatas = function () {
        var diagram = map.getDiagram();
        var nodes = diagram.model.nodeDataArray;
        var nodeDatas = _.filter(nodes, function (node) {
            return node.category == 'slide';
        });
        nodeDatas = _.sortBy(nodeDatas, function (nodeData) {
            return nodeData.index;
        });
        //console.log('getSlideNodeDatas, indexes: ' + _.pluck(slidesData, 'index'));
        return nodeDatas;
    };

    this.getSlideCount = function () {
        return self.getSlideNodeDatas().length;
    };

    this.getActivitySlideCount = function () {
        return _.where(self.getSlideNodeDatas(), { type: 'ACTIVITY_MAP' }).length;
    };

    this.getSlideType = function (typeName) {
        return _.findWhere(self.slideTypes, { name: typeName });
    };

    this.getCurrentSlideType = function () {
        var slide = findSlideByIndex(self.currentSlideIndex);
        if (slide) {
            return _.findWhere(self.slideTypes, { name: slide.data.type });
        } else {
            return {};
        }
    };

    function findSlideByIndex(index) {
        var diagram = map.getDiagram();
        var slideData = _.find(self.getSlideNodeDatas(), function (slideData) {
            return slideData.index == index;
        });
        if (slideData !== undefined) {
            return diagram.findNodeForKey(slideData.key);
        } else {
            return undefined;
        }
    }

    // increment is -1 or +1
    this.moveSlide = function (index, increment) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            var neighbor = findSlideByIndex(index + increment);
            if (slide && neighbor) {
                //console.log('moveSlide: swapping ' + slide.data.key + ' with ' + neighbor.data.key);
                diagram.startTransaction('move slide');
                diagram.model.setDataProperty(slide.data, 'index', slide.data.index + increment);
                diagram.model.setDataProperty(neighbor.data, 'index', neighbor.data.index - increment);
                diagram.commitTransaction('move slide');
                thumbnailCache = [];
            }
        });
    };

    function compactSlideIndexes() {
        $scope.safeApply(function () {
            //console.log('compactSlideIndexes');
            var slidesData = self.getSlideNodeDatas();
            var diagram = map.getDiagram();
            var newIndex = 1;
            diagram.startTransaction('compact slide indexes');
            _.each(slidesData, function (slideData) {
                diagram.model.setDataProperty(slideData, 'index', newIndex);
                //console.log('compactSlideIndexes: set index for ' + slideData.key + ' to ' + newIndex);
                newIndex++;
            });
            diagram.commitTransaction('compact slide indexes');
        });
    }

    function getNewSlideKey() {
        var diagram = map.getDiagram();
        var i = 1;
        while (diagram.model.findNodeDataForKey('slide-' + i)) {
            i++;
        }
        return 'slide-' + i;
    }

    // NB: indexes (and keys?) must be 1-based, otherwise first slide gets screwed up
    // (somewhere the index shows up as '' instead of 0)
    function getNewSlideIndex() {
        var slides = self.getSlideNodeDatas();
        return slides.length + 1;
    }

    this.addSlide = function (typeName) {
        $scope.safeApply(function () {
            console.log('addSlide: ' + typeName);
            var diagram = map.getDiagram();

            var db = map.computeMapBounds();
            db.inflate(db.width / 20, db.height / 10);
            var newLoc = db.x + ' ' + db.y;
            var newIndex = getNewSlideIndex();

            var slideType = _.findWhere(self.slideTypes, { name: typeName });

            diagram.startTransaction('add slide');
            diagram.model.addNodeData({
                key: getNewSlideKey(),
                category: 'slide',
                index: newIndex,
                isGroup: false,
                width: db.width,
                height: db.height,
                loc: newLoc,
                level: 0,
                children: 0,
                type: typeName,
                title: '',
                notes: '',
                checks: [],
                hasRegion: slideType.hasMapRegion,
                isSummary: slideType.hasMapSummary,
                links: []
            });
            diagram.commitTransaction('add slide');
            thumbnailCache = [];

            self.slideThumbnailSelected(newIndex); // trigger display of edit form, zoom to map region if applicable
        });
    };

    this.duplicateSlide = function (index) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var newIndex = getNewSlideIndex();
            var slide = findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction('duplicate slide');

                // bump up indexes on subsequent slides to make room for new slide after current one
                _.each(self.getSlideNodeDatas(), function (slideData) {
                    if (slideData.index > index) {
                        diagram.model.setDataProperty(slideData, 'index', slideData.index + 1);
                    }
                });

                // NB: creating a new nodeData object here rather than copying and modifying, to avoid copying $$hashKey (??)
                diagram.model.addNodeData({
                    key: getNewSlideKey(),
                    category: 'slide',
                    index: index + 1,
                    isGroup: false,
                    width: slide.data.width,
                    height: slide.data.height,
                    loc: slide.data.loc,
                    level: 0,
                    children: 0,
                    type: slide.data.type,
                    title: slide.data.title + ' (Copy)',
                    notes: slide.data.notes,
                    checks: slide.data.checks, // clone?
                    hasRegion: slide.data.hasRegion,
                    isSummary: slide.data.isSummary,
                    links: slide.data.links // clone?
                });
                diagram.commitTransaction('duplicate slide');
                thumbnailCache = [];
            }
        });
    };

    this.removeSlide = function (index) {
        $scope.safeApply(function () {
            //console.log('removeSlide: ' + index);
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction('remove slide');
                diagram.model.removeNodeData(slide.data);
                diagram.commitTransaction('remove slide');
            }
            self.currentSlideIndex = null;
            thumbnailCache = [];
            compactSlideIndexes();
        });
    };

    var thumbnailCache = [];

    this.getSlideThumbnail = function (index) {
        return thumbnailCache[index];
    };

    this.createSlideThumbnails = function () {
        _.each(self.getSlideNodeDatas(), function (nd) {
            self.createSlideThumbnail(nd.index);
        });
    };

    this.createSlideThumbnail = function (index) {
        //console.log('createSlideThumbnail');

        var thumbWidth = 1000;
        var thumbHeight = 600;
        var diagram = map.getDiagram();

        var slide = findSlideByIndex(index);
        if (!slide) {
            return '';
        } else if (!slide.data.hasRegion && !slide.data.isSummary) {
            return '';
        } else {
            var db = diagram.documentBounds;
            var sb;
            if (slide.data.isSummary) {
                // for a summary slide we shoot the whole map
                sb = map.safeRect(map.computeMapBounds());
            } else {
                // otherwise just shoot the slide region
                sb = slide.part.actualBounds;
            }

            var imagePosition = new go.Point(sb.x, sb.y);
            //console.log('getSlideThumbnail, slide bounds: ' + sb + ', document bounds: ' + db + ', imagePosition: ' + imagePosition);

            var wScale = thumbWidth / sb.width;
            var hScale = thumbHeight / sb.height;
            var thumbScale = Math.min(wScale, hScale);
            console.log('scale: ' + wScale + ',' + hScale);

            var w = thumbScale * sb.width;
            var h = thumbScale * sb.height;
            //console.log('thumbnail w/h: ' + w + ',' + h);

            // hide slides temporarily while creating thumbnail
            self.isCreatingThumbnail = true;
            diagram.updateAllTargetBindings();

            diagram.scale = thumbScale;

            var imgData = diagram.makeImageData({
                size: new go.Size(w, h),
                position: imagePosition,
                scale: thumbScale
            });

            self.isCreatingThumbnail = false;
            diagram.updateAllTargetBindings();

            thumbnailCache[index] = imgData;

            return imgData;
        }
    };

    // gets a thumbnail of the whole map, for saving (see autosave.js)
    this.getMapThumbnail = function () {

        var diagram = map.getDiagram();
        var sb = map.safeRect(map.computeMapBounds());
        sb.grow(10, 10, 10, 10);
        var w = 150;
        var h = 100;

        // hide slides temporarily while creating thumbnail
        self.isCreatingThumbnail = true;
        diagram.updateAllTargetBindings();

        var imgData = diagram.makeImageData({
            scale: Math.min(h / sb.height, w / sb.width),
            position: new go.Point(sb.x, sb.y),
            size: new go.Size(w, h)
        });

        self.isCreatingThumbnail = false;
        diagram.updateAllTargetBindings();

        return imgData;
    };

    // called via ng-click on thumbnail
    this.slideThumbnailSelected = function (index) {
        //console.log('slideThumbnailSelected: ' + index);
        var diagram = map.getDiagram();
        var slide = findSlideByIndex(index);

        $scope.safeApply(function () {
            // NB: order of statements is important here, as selectSlide can trigger changedSelection with an empty selection sometimes... ??
            selectSlide(index);
            self.currentSlideIndex = index;
            diagram.updateAllTargetBindings(); // show/hide slide nodes - see templates.js: slideTemplate

            if (slide) {
                zoomToSlideInCenter(slide);

                if (self.isPresenting) {
                    self.showTOC = false;
                }
            }
        });
    };

    this.needsNarrowCanvas = function () {
        var slide = findSlideByIndex(self.currentSlideIndex);
        return map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) && slide != null && (slide.data.type == 'TITLE_BODY_MAP' || slide.data.type == 'ACTIVITY_MAP' || slide.data.type == 'MAP_SUMMARY');
    };

    // sets the slide node as selected in the diagram.
    function selectSlide(index) {
        $scope.safeApply(function () {
            //console.log('select slide: ' + index);
            var diagram = map.getDiagram();
            diagram.clearSelection();
            if (index) {
                var slide = findSlideByIndex(index);
                if (slide) {
                    slide.isSelected = true;
                }
            }
            // TODO: scroll to slide?
        });
    }

    this.playSlide = function (index) {
        var diagram = map.getDiagram();
        map.getUi().openTab(map.getUi().TAB_ID_PRESENTER);

        var slides = self.getSlideNodeDatas();
        if (slides.length) {
            self.showTOC = false;
            presentSlide(index);
        }
    };

    // increment is -1 or +1
    this.advanceSlide = function (increment) {
        //console.log('advanceSlide, currentSlideIndex: ' + self.currentSlideIndex);
        $scope.safeApply(function () {
            var slide = findSlideByIndex(self.currentSlideIndex);
            if (slide) {
                self.currentSlideIndex += increment;
                if (self.isPresenting) {
                    presentSlide(self.currentSlideIndex);
                }
            }
        });
    };

    function presentSlide(index) {
        //console.log('presentSlide');
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var slide = findSlideByIndex(index);
            if (!slide) {
                return;
            }

            diagram.clearSelection();
            // NB: need to set this after clearSelection, as that will set it to null! (see changedSelection)
            self.currentSlideIndex = index;
            map.setEditingBlocked(true);
            //console.log('presentSlide, index: ' + index + ', slide: ' + slide + ', currentSlideIndex: ' + self.currentSlideIndex);

            maybeInitSlideBlocker();
            var blockerW = self.SLIDE_BLOCKER_WIDTH;

            if (slide.data.hasRegion) {
                zoomToSlideInCenter(slide);

                // show slide blocker
                self.slideBlocker.desiredSize = new go.Size(slide.actualBounds.width + 2 * blockerW, slide.actualBounds.height + 2 * blockerW);
                self.slideBlocker.location = new go.Point(slide.actualBounds.x - blockerW, slide.actualBounds.y - blockerW);
                self.slideBlocker.visible = true;
                //console.log('slideBlocker: ' + self.slideBlocker.actualBounds);
            } else if (slide.data.isSummary) {
                zoomToSlideInCenter(slide);
                self.slideBlocker.visible = false;
            } else {
                map.getUi().resetZoom();
                self.slideBlocker.visible = false;
            }

            self.isPresenting = true;
            $('body').addClass('presenter-playing');

            map.getDiagram().updateAllTargetBindings(); // hide slide nodes - see templates.js: slideTemplate
        });
    }

    // zoom the diagram to show the given slide in the center of the canvas
    function zoomToSlideInCenter(slide) {
        var diagram = map.getDiagram();

        window.setTimeout(function () {

            var halfWidth = slide.data.type != 'MAP_ONLY';
            var zoomRect = self.getLetterboxedRect(slide.actualBounds, halfWidth);
            zoomRect.inflate(zoomRect.width / 10, zoomRect.height / 10);
            diagram.zoomToRect(zoomRect, go.Diagram.Uniform);
        }, 100);
    }

    // Returns a rectangle containing the given rect, but with appropriate width or height added
    // to give it same aspect ratio as the diagram.
    this.getLetterboxedRect = function (rect, halfWidth) {

        // NB: we calculate the aspect ratio when the tab is opened,
        // rather than each time as the diagram size might be changing...
        var dar = halfWidth ? self.diagramAspectRatio / 2 : self.diagramAspectRatio;
        console.log('rect: ' + rect + ', dar: ' + dar);

        var rectAspectRatio = rect.width / rect.height;

        if (dar > rectAspectRatio) {
            // tall skinny rect, short wide target AR, so add side padding to the rect
            var lbw = rect.height * dar; // because lbw / lbh == dar == lbw / rect.height (lbh == rect.height)
            return rect.copy().inflate((lbw - rect.width) / 2, 0); // add half the width difference to each side of the rect
        } else {
            // short wide rect, tall skinny target AR, so add top/bottom padding to the rect
            var lbh = rect.width / dar; // because lbw / lbh == dar == lbh / rect.width (lbw == rect.width)
            return rect.copy().inflate(0, (lbh - rect.height) / 2); // add half the height difference to top/bottom of the rect
        }
    };

    this.stopPresenting = function () {
        $scope.safeApply(function () {
            //console.log('stopPresenting, currentSlideIndex: ' + self.currentSlideIndex);
            var diagram = map.getDiagram();

            if (self.slideBlocker) {
                self.slideBlocker.visible = false;
            }

            //self.currentSlideIndex = null;
            self.isPresenting = false;
            $('body').removeClass('presenter-playing');

            map.getDiagram().updateAllTargetBindings(); // show slide nodes

            diagram.clearSelection();
            map.setEditingBlocked(false);
            //map.getUi().resetZoom();
        });
    };
};

// adjust zooming of map region
//self.windowResized();

},{}],19:[function(require,module,exports){
// functions for sharing maps, with a modal dialog

'use strict';

window.SandbankSharing = {};

SandbankSharing = function ($scope) {

    this.openModal = function (_mapIds, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_map_sharing_modal.html', // see views/shares/_template_map_sharing_modal
            backdrop: 'static',
            controller: sharingModalCtrl,
            windowClass: 'sharing-modal',
            resolve: {
                userId: function userId() {
                    return $scope.userId;
                },
                userProfile: function userProfile() {
                    return $scope.userProfile;
                },
                mapIds: function mapIds() {
                    return _mapIds;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for sharing modal ---------------------

    var sharingModalCtrl = function sharingModalCtrl($scope, $modalInstance, userId, userProfile, mapIds, onUpdate) {

        $scope.userId = userId;
        $scope.userProfile = userProfile;
        $scope.mapIds = mapIds;

        // all existing shares for selected maps
        // format: [{mapId:1, shareId:1, canEdit:true, userId:2, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.mapShares = [];

        // existing shares, grouped for display
        // format: [{name:'foo', userEmail:'foo@bar.com', userId: null, groupId: id, organizationId: null, isPublic:false, canEdit:true, mapIds:[1,2]}, ...]
        $scope.existingShares = [];

        // new shares added in the dialog
        // format: [{shareType:SHARE_TYPE_INDIVIDUAL, sharePermission:SHARE_PERMISSION_CANVIEW, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.newShares = [];

        // all updated shares, to be saved
        // format: [{mapId:1, canEdit:false, userEmail:'foo@bar.com', groupId:null, organizationId:null, isPublic:false }, ...]
        $scope.updatedShares = [];

        // indexes of users/groups/orgs - format: [{id:1, name:'foo'}, ...]
        $scope.users = [];
        $scope.groups = [];
        $scope.organizations = [];

        // constants
        $scope.SHARE_TYPE_INDIVIDUAL = 'One or more Individuals';
        $scope.SHARE_TYPE_GROUP = 'Group';
        $scope.SHARE_TYPE_ORGANIZATION = 'ThinkNation';
        $scope.SHARE_TYPE_PUBLIC = 'All MetaMap Users';

        $scope.shareTypes = [$scope.SHARE_TYPE_INDIVIDUAL,
        //$scope.SHARE_TYPE_GROUP,
        $scope.SHARE_TYPE_ORGANIZATION, $scope.SHARE_TYPE_PUBLIC];

        $scope.SHARE_PERMISSION_CANVIEW = 'Can view';
        $scope.SHARE_PERMISSION_CANEDIT = 'Can edit';

        $scope.sharePermissions = [$scope.SHARE_PERMISSION_CANVIEW, $scope.SHARE_PERMISSION_CANEDIT];

        $scope.canShareCultureMap = function (share) {
            return _.findWhere($scope.userProfile.memberships, {
                organizationId: share.organizationId,
                leader: true
            });
        };

        // get existing shares
        function loadShares(mapIds) {
            $http.get('/shares/map_shares.json?ids=' + mapIds.join(',')).then(function (response) {
                if (response.status === 200 || response.status === 204) {
                    $scope.mapShares = response.data.mapShares;
                    $scope.users = response.data.users;
                    $scope.groups = response.data.groups;
                    $scope.organizations = response.data.organizations;
                    initExistingShares();
                    if (!$scope.existingShares.length && $scope.canAddNewShare()) {
                        $scope.addNewShare();
                    }
                }
            }, function () {
                alert('Could not load sharing info');
            });
        }

        loadShares(mapIds);

        // group the existing shares by user, group, org and public
        function initExistingShares() {
            // find all emails that occur in a share
            var userEmails = _.without(_.uniq(_.pluck($scope.mapShares, 'userEmail')), null);
            // build an array of shares, one for each email, with the applicable map IDs
            var sharesByUserEmail = _.map(userEmails, function (email) {
                var user = _.findWhere($scope.users, {
                    email: email
                });
                return {
                    isDeleted: false,
                    userEmail: email,
                    userId: user ? user.id : null,
                    groupId: null,
                    organizationId: null,
                    isPublic: false,
                    isCultureMap: false,
                    name: email,
                    // NB: for this attribute we don't try to summarize the value for all the existing shares,
                    // because it would be too complicated to display...
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        userEmail: email
                    }), 'mapId')
                };
            });

            var groupIds = _.without(_.uniq(_.pluck($scope.mapShares, 'groupId')), null);
            var sharesByGroupId = _.map(groupIds, function (id) {
                var group = _.findWhere($scope.groups, {
                    id: id
                });
                return {
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: id,
                    organizationId: null,
                    isPublic: false,
                    isCultureMap: false,
                    name: 'Group: ' + (group ? group.name : ''),
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        groupId: id
                    }), 'mapId')
                };
            });

            var organizationIds = _.without(_.uniq(_.pluck($scope.mapShares, 'organizationId')), null);
            var sharesByOrganizationId = _.map(organizationIds, function (id) {
                var organization = _.findWhere($scope.organizations, {
                    id: id
                });
                return {
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: null,
                    organizationId: id,
                    isPublic: false,
                    isCultureMap: $scope.mapShares.length == 1 && $scope.mapShares[0].isCultureMap,
                    name: 'ThinkNation: ' + (organization ? organization.name : ''),
                    canEdit: $scope.mapShares.length == 1 && $scope.mapShares[0].canEdit,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        organizationId: id
                    }), 'mapId')
                };
            });

            // are any of the selected maps shared publicly?
            var publicShares = [];
            if (_.where($scope.mapShares, {
                isPublic: true
            }).length) {
                publicShares = [{
                    isDeleted: false,
                    userEmail: null,
                    userId: null,
                    groupId: null,
                    organizationId: null,
                    isPublic: true,
                    isCultureMap: false,
                    name: 'Everyone',
                    canEdit: false,
                    mapIds: _.pluck(_.where($scope.mapShares, {
                        isPublic: true
                    }), 'mapId')
                }];
            }

            $scope.existingShares = _.union(sharesByUserEmail, sharesByGroupId, sharesByOrganizationId, publicShares);
        }

        function buildUpdatedShares() {
            $scope.updatedShares = [];

            // for each selected map, decompose the existingShares (grouped by user/group/org/public) into individual shares for saving
            _.each(mapIds, function (id) {
                // get existing shares for this map
                var existingSharesForMapId = _.filter($scope.existingShares, function (existingShare) {
                    // existingShares format: [{name:'foo', userEmail:'foo@bar.com', userId: null, groupId: id, organizationId: null, isPublic:false, isCultureMap:false, canEdit:true, mapIds:[1,2]}, ...]
                    return _.contains(existingShare.mapIds, id);
                });
                // decompose these into individual shares
                _.each(existingSharesForMapId, function (es) {
                    $scope.updatedShares.push({
                        isNew: false,
                        isDeleted: es.isDeleted,
                        mapId: id,
                        userEmail: es.userEmail,
                        userId: es.userId,
                        groupId: es.groupId,
                        organizationId: es.organizationId,
                        isPublic: es.isPublic,
                        isCultureMap: es.isCultureMap,
                        canEdit: es.canEdit
                    });
                });
            });

            // add in the newShares (for each selected map)
            _.each(mapIds, function (id) {
                _.each($scope.newShares, function (ns) {
                    $scope.updatedShares.push({
                        isNew: true,
                        mapId: id,
                        userEmail: ns.shareType == $scope.SHARE_TYPE_INDIVIDUAL ? ns.userEmail : null,
                        groupId: ns.shareType == $scope.SHARE_TYPE_GROUP ? ns.groupId : null,
                        organizationId: ns.shareType == $scope.SHARE_TYPE_ORGANIZATION ? ns.organizationId : null,
                        isPublic: ns.shareType == $scope.SHARE_TYPE_PUBLIC,
                        isCultureMap: ns.isCultureMap,
                        canEdit: ns.shareType == $scope.SHARE_TYPE_PUBLIC ? false : ns.sharePermission == $scope.SHARE_PERMISSION_CANEDIT,
                        message: ns.message
                    });
                });
            });
        }

        function saveShares(onUpdate) {
            $http.put('/shares/update_map_shares', $scope.updatedShares).then(function (response) {
                onUpdate();
            }, function () {
                alert('Could not save sharing info');
            });
        }

        $scope.canDeleteExistingShare = function () {
            return $scope.canAddNewShare();
        };

        $scope.deleteExistingShare = function (share) {
            share.isDeleted = true;
        };

        $scope.canAddNewShare = function () {
            // make sure all maps are owned by the current user
            var mapUserIds = _.uniq(_.pluck($scope.mapShares, 'mapUserId'));
            return mapUserIds.length == 0 || mapUserIds.length == 1 && mapUserIds[0] == $scope.userId;
        };

        $scope.addNewShare = function () {
            // NB: isPublic and canEdit are set in buildUpdateShares
            $scope.newShares.push({
                shareType: $scope.SHARE_TYPE_INDIVIDUAL,
                sharePermission: $scope.SHARE_PERMISSION_CANVIEW,
                userEmail: '',
                groupId: $scope.groups.length ? $scope.groups[0].id : null,
                organizationId: $scope.organizations.length ? $scope.organizations[0].id : null,
                isCultureMap: false,
                message: ''
            });
        };

        $scope.deleteNewShare = function (share) {
            var i = _.indexOf($scope.newShares, share);
            $scope.newShares.splice(i, 1);
        };

        $scope.ok = function () {
            buildUpdatedShares();
            saveShares(onUpdate);
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };
};

},{}],20:[function(require,module,exports){
// common core standards tab -
// this is delegated to the SandbankCcsTagging module, which handles CCS
// for a map OR the user profile - see tagging_ccs.js

"use strict";

SandbankEditor.Standards = function ($scope, map) {

    var self = this;

    this.init = function () {};

    // called when a tab is opened or closed
    this.currentTabChanged = function (newValue, oldValue) {
        if (newValue == map.getUi().TAB_ID_STANDARDS) {
            // opening tab
            // if there are no links, show the modal
            if ($scope.canEdit && !$scope.ccsTagging.links.length) {
                $scope.ccsTagging.addLink();
            }
        }
        if (oldValue == map.getUi().TAB_ID_STANDARDS) {}
    };
};
// closing tab

},{}],21:[function(require,module,exports){
// functions for user-tagging maps, with a modal dialog

// NB: the complexity here is due to the need to show existing tags that may apply
// to any number of the selected maps, vs. new tags that will be added to all selected maps -
// the tagging info needs to be grouped and ungrouped when loading and saving to handle this.

'use strict';

window.SandbankTagging = {};

SandbankTagging = function ($scope) {

    this.openModal = function (_mapIds, _showDescription, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_map_tagging_modal.html', // see views/user_tags/_template_map_tagging_modal
            backdrop: 'static',
            controller: tagsModalCtrl,
            windowClass: 'tags-modal',
            resolve: {
                mapIds: function mapIds() {
                    return _mapIds;
                },
                showDescription: function showDescription() {
                    return _showDescription;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for tags modal ---------------------

    var tagsModalCtrl = function tagsModalCtrl($scope, $modalInstance, mapIds, showDescription, onUpdate) {

        $scope.mapIds = mapIds;

        // all existing tags for selected maps - format: [{mapId: 1, tagId: 1, tagName:'foo'}, ...]
        $scope.mapUserTags = [];

        // existing tags, grouped for display - format: [{name:'foo', mapIds:[1,2]}, ...]
        $scope.existingTags = [];

        // new tags added in the dialog - format: [{name:'foo'}, ...]
        $scope.newTags = [];

        // all updated tags, to be saved - tags format: [{mapId: 1, userTags: "foo, bar, bam"}, ...]
        $scope.updatedTags = { description: '', tags: [] };

        $scope.showDescription = showDescription;

        function loadTags(mapIds) {
            $http.get('/user_tags/map_user_tags.json?ids=' + mapIds.join(',')).then(function (response) {
                $scope.mapUserTags = response.data.mapUserTags;
                // NB: the map description is always passed back if we only pass one map ID,
                // but we may not display it in the dialog - depends on the value of the showDescription flag.
                if (mapIds.length == 1) {
                    $scope.updatedTags.description = response.data.mapDescription;
                }
                initExistingTags();
                $scope.addNewTag();
            }, function () {
                alert('Could not load tags');
            });
        }

        loadTags(mapIds);

        function initExistingTags() {
            var tagNames = _.uniq(_.pluck($scope.mapUserTags, 'tagName')).sort();
            $scope.existingTags = _.map(tagNames, function (name) {
                var mapUserTagsForName = _.where($scope.mapUserTags, { tagName: name });
                var mapIds = _.pluck(mapUserTagsForName, 'mapId');
                return {
                    name: name,
                    mapIds: mapIds
                };
            });
        }

        function buildUpdatedTags() {
            $scope.updatedTags.tags = [];
            _.each(mapIds, function (id) {
                var existingTagsForId = _.filter($scope.existingTags, function (existingTag) {
                    // existingTag format: {name:'foo', mapIds:[1,2]}
                    return _.contains(existingTag.mapIds, id);
                });
                $scope.updatedTags.tags.push({
                    mapId: id,
                    userTags: _.union(_.pluck(existingTagsForId, 'name'), _.without(_.pluck($scope.newTags, 'name'), '') // remove empty tags
                    ).join(', ')
                });
            });
        }

        function saveTags(onUpdate) {
            $http.put('/user_tags/update_map_user_tags', [$scope.updatedTags]).then(function (response) {
                onUpdate();
            }, function () {
                alert('Could not save tags');
            });
        }

        $scope.deleteExistingTag = function (tag) {
            var i = _.indexOf($scope.existingTags, tag);
            $scope.existingTags.splice(i, 1);
        };

        $scope.addNewTag = function () {
            $scope.newTags.push({ name: '' });
        };

        $scope.tagSelected = function (item, model, label) {
            //console.log('tagSelected: ' + item + ', ' + model + ', ' + label);
            $scope.addNewTag();
        };

        $scope.editingTagKeypress = function (e) {
            if (e.which == 13) {
                $scope.addNewTag();
            }
        };

        $scope.deleteNewTag = function (tag) {
            var i = _.indexOf($scope.newTags, tag);
            $scope.newTags.splice(i, 1);
            if (!$scope.newTags.length) {
                $scope.addNewTag(); // always leave at least one tag field
            }
        };

        // tag autocomplete
        $scope.getUserTags = function (viewValue) {
            var url = '/user_tags/list.json?q=' + viewValue;
            return $http.get(url).then(function (response) {
                return response.data.tags;
            });
        };

        $scope.ok = function () {
            buildUpdatedTags();
            saveTags(onUpdate);
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };
};

},{}],22:[function(require,module,exports){
// functions for admin-tagging maps, with a modal dialog

'use strict';

window.SandbankAdminTagging = {};

SandbankAdminTagging = function ($scope) {

    this.openModal = function (_mapId, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_map_admin_tagging_modal.html', // see views/admin_tags/_template_map_admin_tagging_modal
            backdrop: 'static',
            controller: tagsModalCtrl,
            windowClass: 'tags-modal',
            resolve: {
                mapId: function mapId() {
                    return _mapId;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for tags modal ---------------------

    var tagsModalCtrl = function tagsModalCtrl($scope, $modalInstance, mapId, onUpdate) {

        $scope.mapId = mapId;

        // admin tags applied to the map
        $scope.mapAdminTags = [];
        // list of all admin tags
        $scope.adminTagList = [];

        // checkbox selections for admin tags - key (index): admin tag ID; value: true/false (if map has the admin tag)
        $scope.selectedAdminTags = [];

        function initSelectedAdminTags() {
            $scope.selectedAdminTags = [];
            _.each($scope.adminTagList, function (tag) {
                if (_.findWhere($scope.mapAdminTags, { id: tag.id })) {
                    $scope.selectedAdminTags[tag.id] = true;
                }
            });
        }

        function loadTags(mapId) {
            $http.get('/admin_tags/map_admin_tags.json?id=' + mapId).then(function (response) {
                $scope.mapAdminTags = response.data.mapAdminTags;
                $scope.adminTagList = response.data.adminTagList;
                initSelectedAdminTags();
            }, function () {
                alert('Could not load tags');
            });
        }

        loadTags(mapId);

        function saveTags(onUpdate) {
            var selectedTagNames = _.map($scope.adminTagList, function (tag) {
                return $scope.selectedAdminTags[tag.id] ? tag.name : null;
            });
            var tagList = _.without(selectedTagNames, null).join(',');

            $http.put('/admin_tags/update_map_admin_tags', [{ mapId: $scope.mapId, adminTags: tagList }]).then(function (response) {
                onUpdate();
            }, function () {
                alert('Could not save tags');
            });
        }

        $scope.ok = function () {
            saveTags(onUpdate);
            $modalInstance.close();
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    };
};

},{}],23:[function(require,module,exports){
// functions for tagging maps or users with common core standards, with a modal dialog

'use strict';

window.SandbankCcsTagging = {};

SandbankCcsTagging = function ($scope) {

    var self = this;

    // this is set in either user.js or editor.js, and tells us if we're
    // editing CCS tags for the current user or for the current map
    this.mapId = null;

    // the list of links to standards for this map or user.
    // each link is a wrapper for the standard, with this format:
    // { standard: { name: "K.CC.A.1", statement: "..." }, editing: false }
    this.links = [];

    this.addLink = function () {
        var link = {
            standard: null,
            editing: true
        };
        self.links.push(link);
        self.openModal(link);
    };

    this.deleteLink = function (link) {
        var i = _.indexOf(self.links, link);
        self.links.splice(i, 1);
        self.saveCcsTags();
    };

    this.editingALink = function () {
        return self.links && _.findWhere(self.links, {
            editing: true
        }) !== undefined;
    };

    // returns an list of names of the selected standards
    this.getLinkNames = function () {
        return _.map(self.links, function (link) {
            return link.standard.name;
        }).join(',');
    };

    this.loadCcsTags = function () {
        if (self.mapId) {
            $http.get('/common_core_standards/map_ccs_tags.json?id=' + self.mapId).then(function (response) {
                _.each(response.data.mapCcsTags, function (tag) {
                    self.links.push({
                        standard: tag,
                        editing: false
                    });
                });
            }, function () {});
        } else {
            _.each($scope.userProfile.userCcsTags, function (tag) {
                self.links.push({
                    standard: tag,
                    editing: false
                });
            });
        }
    };

    this.saveCcsTags = function () {
        if (self.mapId) {
            $http.put('/common_core_standards/update_map_ccs_tags', [{
                mapId: self.mapId,
                ccsTags: self.getLinkNames()
            }]).then(function (response) {}, function () {
                alert('Could not save Common Core Standards');
            });
        } else {
            $http.put('/common_core_standards/update_user_ccs_tags', [self.getLinkNames()]).then(function (response) {}, function () {
                $scope.profileEditStatus = 'Could not save CCS tags';
            });
        }
    };

    this.openModal = function (_link, _onUpdate) {
        var modalInstance = $modal.open({
            templateUrl: 'template_ccs_tagging_modal.html',
            backdrop: 'static',
            controller: ccsTagsModalCtrl,
            windowClass: 'standards-modal',
            resolve: {
                link: function link() {
                    return _link;
                },
                onUpdate: function onUpdate() {
                    return _onUpdate;
                }
            }
        });

        modalInstance.result.then(function () {});
    };

    // --------------- controller for tags modal ---------------------

    var ccsTagsModalCtrl = function ccsTagsModalCtrl($scope, $modalInstance, link, onUpdate) {

        // the list of all standards, which the user selects from
        $scope.standards = [];
        $scope.selection = {
            standard: link.standard
        };

        // TODO: cache these somehow??
        $scope.loadStandards = function () {
            var url = '/common_core_standards.json';
            $http.get(url).then(function (response) {
                $scope.standards = response.data.standards;
                $scope.applyFilters();
            });
        };

        $scope.loadStandards();

        $scope.filters = {
            // possible values for filter vars
            filteredStandardTypes: [], // these don't actually get filtered, but naming for consistency
            filteredGrades: [],
            filteredCategories: [],
            filteredStandards: [],

            // filter vars
            standardTypeFilter: null,
            gradeFilter: null,
            categoryFilter: null
        };

        // filter the drop-downs and the standards list according to current selections
        $scope.applyFilters = function () {
            // get standard types (e.g. 'Mathematics')
            $scope.filters.filteredStandardTypes = _.uniq(_.pluck($scope.standards, 'standard'));

            // get grade options for selected standard
            $scope.filters.filteredGrades = _.uniq(_.pluck(_.where($scope.standards, {
                standard: $scope.filters.standardTypeFilter
            }), 'grade'));

            // get category options for selected standard and grade
            $scope.filters.filteredCategories = _.uniq(_.pluck(_.where($scope.standards, {
                standard: $scope.filters.standardTypeFilter,
                grade: $scope.filters.gradeFilter
            }), 'category'));

            // get standards for selected standard, grade and category
            $scope.filters.filteredStandards = _.filter($scope.standards, function (std) {
                return (!$scope.filters.standardTypeFilter || std.standard == $scope.filters.standardTypeFilter) && (!$scope.filters.gradeFilter || std.grade == $scope.filters.gradeFilter) && (!$scope.filters.categoryFilter || std.category == $scope.filters.categoryFilter);
            });
        };

        // set the filter drop-downs to match the selected standard
        $scope.setFilters = function (link) {
            if (link.standard) {
                $scope.filters.standardTypeFilter = link.standard.standard;
                $scope.filters.gradeFilter = link.standard.grade;
                $scope.filters.categoryFilter = link.standard.category;
            } else {
                $scope.filters.standardTypeFilter = null;
                $scope.filters.gradeFilter = null;
                $scope.filters.categoryFilter = null;
            }
            $scope.applyFilters();
        };

        $scope.setFilters(link);

        $scope.ok = function () {
            link.standard = $scope.selection.standard;
            link.editing = false;
            $modalInstance.close();
            self.saveCcsTags();
        };

        $scope.cancel = function () {
            link.editing = false;
            // if we were adding a new link, get rid of it
            if (!link.standard) {
                self.deleteLink(link);
            }
            $modalInstance.dismiss('cancel');
        };
    };
};

// $scope.loadUserProfile();
// $scope.profileEditStatus = 'CCS Tags saved';

},{}],24:[function(require,module,exports){
// goJS templates used in the editor

'use strict';

SandbankEditor.Templates = function ($scope, map) {

    var self = this;

    // constants
    this.groupFillColor = '#f9f9f9';

    this.init = function () {};

    // initialize template-related stuff that depends on the diagram (and therefore can't go in init())
    this.initTemplates = function (diagram) {
        diagram.groupTemplate = self.groupTemplate;
        diagram.nodeTemplate = self.slideTemplate;
        diagram.linkTemplate = self.linkTemplate;
        diagram.linkTemplateMap.add('P', self.pLinkTemplate);
        diagram.linkTemplateMap.add('D', self.dLinkTemplate);

        self.setTemporaryLinkTemplates(diagram.toolManager.linkingTool);
        self.setTemporaryLinkTemplates(diagram.toolManager.relinkingTool);

        diagram.toolManager.linkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
            self.handlePortTargeted(diagram.toolManager.linkingTool, realnode, realport, tempnode, tempport, toend);
        };

        diagram.toolManager.relinkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
            self.handlePortTargeted(diagram.toolManager.relinkingTool, realnode, realport, tempnode, tempport, toend);
        };

        diagram.toolManager.relinkingTool.updateAdornments = function (part) {
            go.RelinkingTool.prototype.updateAdornments.call(this, part);
            var from = part.findAdornment('RelinkFrom');
            var to = part.findAdornment('RelinkTo');
            // if (from)
            //     console.log('relinkfrom: ' + from.part.width);
        };

        diagram.toolManager.linkingTool.linkValidation = self.validateLink;
        diagram.toolManager.relinkingTool.linkValidation = self.validateLink;
    };

    // convenient abbreviation for creating templates
    var mk = go.GraphObject.make;

    // DSRP colors (from _variables.scss)
    var colorD = '#f2624c';
    var colorS = '#96c93d';
    var colorR = '#4cbfc2';
    var colorP = '#fbaa36';
    var colorPLight = '#FDDDAF';
    var colorPDark = '#C9882B';

    var eyeSvgPath = 'M 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00c 47.559,94.979, 144.341,160.00, 256.00,160.00c 111.657,0.00, 208.439-65.021, 256.00-160.00 C 464.442,161.021, 367.657,96.00, 256.00,96.00z M 382.225,180.852c 30.081,19.187, 55.571,44.887, 74.717,75.148 c-19.146,30.261-44.637,55.961-74.718,75.149C 344.427,355.257, 300.779,368.00, 256.00,368.00c-44.78,0.00-88.428-12.743-126.225-36.852 C 99.695,311.962, 74.205,286.262, 55.058,256.00c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65 C 130.725,190.866, 128.00,205.613, 128.00,221.00c0.00,70.692, 57.308,128.00, 128.00,128.00s 128.00-57.308, 128.00-128.00c0.00-15.387-2.725-30.134-7.704-43.799 C 378.286,178.39, 380.265,179.602, 382.225,180.852z M 256.00,205.00c0.00,26.51-21.49,48.00-48.00,48.00s-48.00-21.49-48.00-48.00s 21.49-48.00, 48.00-48.00 S 256.00,178.49, 256.00,205.00z';
    var eyeBlockedSvgPath = 'M 419.661,148.208 C 458.483,175.723 490.346,212.754 512.00,256.00 C 464.439,350.979 367.657,416.00 256.00,416.00 C 224.717,416.00 194.604,410.894 166.411,401.458 L 205.389,362.48 C 221.918,366.13 238.875,368.00 256.00,368.00 C 300.779,368.00 344.427,355.257 382.223,331.148 C 412.304,311.96 437.795,286.26 456.941,255.999 C 438.415,226.716 413.934,201.724 385.116,182.752 L 419.661,148.208 ZM 256.00,349.00 C 244.638,349.00 233.624,347.512 223.136,344.733 L 379.729,188.141 C 382.51,198.627 384.00,209.638 384.00,221.00 C 384.00,291.692 326.692,349.00 256.00,349.00 ZM 480.00,0.00l-26.869,0.00 L 343.325,109.806C 315.787,100.844, 286.448,96.00, 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00 c 21.329,42.596, 52.564,79.154, 90.597,106.534L0.00,453.131L0.00,480.00 l 26.869,0.00 L 480.00,26.869L 480.00,0.00 z M 208.00,157.00c 24.022,0.00, 43.923,17.647, 47.446,40.685 l-54.762,54.762C 177.647,248.923, 160.00,229.022, 160.00,205.00C 160.00,178.49, 181.49,157.00, 208.00,157.00z M 55.058,256.00 c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65C 130.725,190.866, 128.00,205.613, 128.00,221.00 c0.00,29.262, 9.825,56.224, 26.349,77.781l-29.275,29.275C 97.038,309.235, 73.197,284.67, 55.058,256.00z';
    var paperclipSvgPath = 'M 348.916,163.524l-32.476-32.461L 154.035,293.434c-26.907,26.896-26.907,70.524,0.00,97.422 c 26.902,26.896, 70.53,26.896, 97.437,0.00l 194.886-194.854c 44.857-44.831, 44.857-117.531,0.00-162.363 c-44.833-44.852-117.556-44.852-162.391,0.00L 79.335,238.212l 0.017,0.016c-0.145,0.152-0.306,0.288-0.438,0.423 c-62.551,62.548-62.551,163.928,0.00,226.453c 62.527,62.528, 163.934,62.528, 226.494,0.00c 0.137-0.137, 0.258-0.284, 0.41-0.438l 0.016,0.017 l 139.666-139.646l-32.493-32.46L 273.35,432.208l-0.008,0.00 c-0.148,0.134-0.282,0.285-0.423,0.422 c-44.537,44.529-116.99,44.529-161.538,0.00c-44.531-44.521-44.531-116.961,0.00-161.489c 0.152-0.152, 0.302-0.291, 0.444-0.423l-0.023-0.03 l 204.64-204.583c 26.856-26.869, 70.572-26.869, 97.443,0.00c 26.856,26.867, 26.856,70.574,0.00,97.42L 218.999,358.375 c-8.968,8.961-23.527,8.961-32.486,0.00c-8.947-8.943-8.947-23.516,0.00-32.46L 348.916,163.524z';

    // footer for image export
    var _exportFooter = null;

    // ------------------- debug info for groups/links --------------------------------

    function groupInfo(obj) {
        return obj.data.text + '\n' + 'object: ' + obj + '\n' + 'key: ' + obj.data.key + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'layout: ' + obj.layout + '\n' + 'data.layout: ' + obj.data.layout + '\n' + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + '\n' + 'freehand position (data.loc): ' + go.Point.parse(obj.data.loc) + '\n' + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + '\n' + 'getScale(): ' + map.getLayouts().getScale(obj) + '\n' + 'isLinkLabel: ' + obj.data.isLinkLabel + '\n' + 'labeledLink: ' + obj.labeledLink + '\n';
    }

    function nodeInfo(obj) {
        return 'object: ' + obj + '\n' + 'key: ' + obj.data.key + '\n' + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + '\n' + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + '\n';
    }

    function linkInfo(obj) {
        var snpos = map.getLayouts().getSameNodesLinkPosition(obj);
        return '' + 'object: ' + obj + '\n' + 'fromNode: ' + obj.fromNode + '\n' + 'toNode: ' + obj.toNode + '\n' + 'labelNodes: ' + obj.labelNodes.count + '\n' + 'labelNodeIsVisible: ' + map.getLayouts().labelNodeIsVisible(obj) + '\n' + 'fromPortId: ' + obj.fromPortId + '\n' + 'toPortId: ' + obj.toPortId + '\n' + 'category: ' + (obj.data ? obj.data.category : '') + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'fromAndToNodesAreVisible: ' + map.getLayouts().fromAndToNodesAreVisible(obj) + '\n' + 'curve: ' + obj.curve + '\n' + 'curviness: ' + obj.curviness + '\n' + 'fromEndSegmentLength: ' + Math.round(obj.fromEndSegmentLength) + '\n' + 'toEndSegmentLength: ' + Math.round(obj.toEndSegmentLength) + '\n' + 'sameNodesLinkPosition: ' + snpos.index + ' of ' + snpos.count + '\n' +
        //+ 'geometry: ' + obj.geometry + "\n" +
        'getLinkStrokeWidth: ' + map.getLayouts().getLinkStrokeWidth(obj) + '\n';
    }

    // -----------------------------------------------------------------------------

    // NB: these are here because they are about colors;
    // similar functions that are scale-related are in layouts.js...
    function getGroupSelectionStroke(obj) {
        if (obj.isSelected) {
            if (map.getPerspectives().isInPEditorMode()) return colorP;else if (map.getPerspectives().isInDEditorMode()) return colorD;else return '#000';
        } else {
            return '#000';
        }
    }

    // OK, this isn't about colors, but it wants to be near the one above...
    function getGroupSelectionStrokeWidth(obj) {
        return obj.isSelected ? 3 : 1;
    }

    function getRLinkSelectionStroke(obj) {
        if (obj.isSelected || obj == map.getUi().mouseOverLink) {
            return colorR; // TODO: can P links be selected?
        } else {
            return '#000';
        }
    }

    // -----------------------------------------------------------------------------

    // callbacks to determine when the corners should be visible

    function showDCorner(group) {
        if (map.getPerspectives().isDEditorThing(group)) {
            // mark distinction thing
            return true;
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || $scope.isTouchDevice() && group.isSelected || canDragSelectionToBecomeSistersOf(group, false) && (!map.getUi().dragTargetPosition || cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
        }
    }

    function showSCorner(group) {
        if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || $scope.isTouchDevice() && group.isSelected || canDragSelectionToBecomeChildrenOf(group, false) && (!map.getUi().dragTargetPosition || cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
        }
    }

    function showRCorner(group) {
        if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || $scope.isTouchDevice() && group.isSelected; // show corners on mouseover
        }
    }

    function showPCorner(group) {
        if (map.getPerspectives().isPEditorPoint(group)) {
            return true; // mark perspective point
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show any corners if in P/D editor mode
            return false;
        } else if (map.getPresenter().isCreatingThumbnail) {
            // don't show any corners if capturing thumbnail
            return false;
        } else {
            return group == map.getUi().mouseOverGroup || $scope.isTouchDevice() && group.isSelected; // show corners on mouseover
        }
    }

    // when a P link should be visible

    this.showPLink = function (link) {
        var mode = map.getUi().getMapEditorOptions().perspectiveMode;
        if (map.getPerspectives().isPEditorPoint(link.fromNode)) {
            // show P's when this link is from the current Point
            return true;
        } else if (map.getPerspectives().isInPOrDEditorMode()) {
            // don't show P's for non-Point things, even on mouseover
            return false;
        } else {
            return (mode == 'lines' || mode == 'both') && (link.fromNode == map.getUi().mouseOverGroup || map.pIsExpanded(link.fromNode));
        }
    };

    this.showPDot = function (link) {
        return true; // map.getUi().getMapEditorOptions().perspectiveMode != 'both';
    };

    // these functions are used in two modes:
    // 1. with isDropping == false, to highlight drop targets based on map.getUi().dragTargetGroup and map.getUi().dragTargetPosition,
    //    which are set on mouseDragEnter/mouseDragleave
    // 2. with isDropping == true, on drop, when the above indicators have gone away, but we know what the dropped
    //    and target groups are, and we want to know what the drop should do.

    function canDragSelectionToBecomeSistersOf(group, isDropping) {
        return (group == map.getUi().dragTargetGroup || isDropping) && map.thingsSelectedAreDescendantsOf(group);
    }

    function canDragSelectionToBecomeChildrenOf(group, isDropping) {
        return (group == map.getUi().dragTargetGroup || isDropping) && !map.thingsSelectedIncludeSlide() && !map.thingsSelectedAreDescendantsOf(group);
    }

    // side is map.LEFT or map.RIGHT
    function canDragSelectionToBecomeOrderedSisterOf(targetGroup, side, isDropping) {
        // must be dragging single group
        var draggedGroup = map.getUniqueThingSelected();
        if (!draggedGroup) {
            return false;
        }

        // dragged and target must be Sisters in inventory layout
        return (targetGroup == map.getUi().dragTargetGroup || isDropping) && (map.getUi().dragTargetPosition == side || isDropping) && map.getLayouts().areSistersInInventoryLayout(draggedGroup, targetGroup);
    }

    function cannotDragSelectionToBecomeOrderedSisterOf(targetGroup) {
        return !canDragSelectionToBecomeOrderedSisterOf(targetGroup, map.LEFT) && !canDragSelectionToBecomeOrderedSisterOf(targetGroup, map.RIGHT);
    }

    // handle drop on one of the three target regions (top, middle, bottom)
    // side is map.LEFT or map.RIGHT
    function handleGroupMouseDrop(event, dropTarget, side) {
        //console.log('dragAboveTarget.mouseDrop, target: ' + dropTarget + ', part: ' + dropTarget .part + ', show: ' + show);
        if (side && canDragSelectionToBecomeOrderedSisterOf(dropTarget.part, side, true)) {
            map.addSelectedThingAsOrderedSisterOf(dropTarget.part, side);
        } else if (canDragSelectionToBecomeSistersOf(dropTarget.part, true)) {
            map.addSelectedThingsAsSistersOf(dropTarget.part);
        } else if (canDragSelectionToBecomeChildrenOf(dropTarget.part, true)) {
            map.addSelectedThingsAsChildrenOf(dropTarget.part);
        }
    }

    // when to show the R-thing knob on a link
    function showKnob(link) {
        return link == map.getUi().mouseOverLink;
    }

    // ---------------- components for main group template ------------------

    function dFlagMarker() {
        return mk(go.Shape, new go.Binding('fill', '', function (obj) {
            return obj.data.dflag ? '#000' : null;
        }).ofObject(), {
            name: 'dflag',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(18, 18),
            geometry: go.Geometry.parse('F M0 1 L0 18 L18 0 L1 0z', true),
            cursor: 'pointer',
            pickable: false,
            stroke: null
        });
    }

    // "D" corner (top left, red)
    function cornerD() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showDCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerD',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            opacity: 0
        }, mk(go.Shape, {
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            geometry: go.Geometry.parse('F M0 1 L0 50 L50 0 L1 0z', true),
            fill: colorD,
            stroke: null,
            cursor: 'pointer',
            click: function click(event, target) {
                //console.log('click, control:' + event.control + ', alt:' + event.alt + ', meta:' + event.meta);
                if (event.alt) {
                    // NB: a side effect of this will be to select just this group,
                    // which would not happen otherwise via control-click
                    map.getPerspectives().setDEditorThing(target.part);
                } else {
                    // handle single or double click
                    map.getUi().handleCornerClick('D', target.part);
                }
            },
            contextClick: function contextClick(event, target) {
                //console.log('contextClick:' + event);
                map.toggleDFlag(target.part);
            }
        }), mk(go.TextBlock, {
            text: 'D',
            stroke: 'white',
            font: '9px sans-serif',
            position: new go.Point(12, 15),
            pickable: false
        }));
    }

    // "S" corner (bottom left, green)
    function cornerS() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showSCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerS',
            position: new go.Point(0, 50),
            desiredSize: new go.Size(50, 50),
            opacity: 0
        }, mk(go.Shape, {
            position: new go.Point(0, 0),
            desiredSize: new go.Size(50, 50),
            geometry: go.Geometry.parse('F M0 0 L0 49 L1 50 L50 50z', true),
            fill: colorS,
            stroke: null,
            cursor: 'pointer',
            click: function click(event, target) {
                // handle single or double click
                map.getUi().handleCornerClick('S', target.part);
            }
        }),
        // expansion indicator
        mk(go.Shape, new go.Binding('position', '', function (obj) {
            return obj.isSubGraphExpanded ? new go.Point(4, 43) : new go.Point(5, 38);
        }).ofObject(), new go.Binding('angle', '', function (obj) {
            return obj.isSubGraphExpanded ? 90 : 0;
        }).ofObject(), {
            desiredSize: new go.Size(5, 10),
            geometry: go.Geometry.parse('F M0 0 L5 5 L0 10z', true),
            fill: '#333',
            stroke: null,
            cursor: 'pointer',
            pickable: false
        }), mk(go.TextBlock, {
            text: 'S',
            stroke: 'white',
            font: '9px sans-serif',
            position: new go.Point(12, 28),
            pickable: false
        }));
    }

    // show only when system is collapsed
    function sCollapsedMarker() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return !showSCorner(obj) && obj.memberParts.count > 0 && !obj.isSubGraphExpanded;
        }).ofObject(), {
            position: new go.Point(5, 88),
            desiredSize: new go.Size(5, 10),
            geometry: go.Geometry.parse('F M0 0 L5 5 L0 10z', true),
            fill: '#333',
            stroke: null,
            cursor: 'pointer',
            pickable: false
        });
    }

    // "R" corner (bottom right, blue)
    function cornerR() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showRCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerR',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            opacity: 0
        }, mk(go.Shape, {
            name: 'cornerRShape',
            // NB: this corner is done differently from the others:
            // 1. the overall shape is the size of the whole square, so the port falls in the middle instead of the corner;
            // 2. the geometry traces around the edges of the whole square, because otherwise the link line will
            //    show inside the main square if it's crossing one of the other 3 quadrants
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            geometry: go.Geometry.parse('F' + 'M0 0 L0 100 ' + // top left to bottom left
            'L99 100 L100 99 L 100 0 ' + // bottom/right sides (round bottom right corner)
            'L 0 0 L 100 0 ' + // back to top left then top right
            'L 100 50 L 50 100 ' + // to midpoint of right side, midpoint of bottom side
            'L0 100z', // bottom left, return home
            true),
            fill: colorR,
            stroke: null,
            cursor: 'pointer',

            portId: 'R',
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: true,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: true,
            click: function click(event, target) {
                // handle single or double click
                map.getUi().handleCornerClick('R', target.part);
            }
        }), mk(go.TextBlock, {
            text: 'R',
            stroke: 'white',
            font: '9px sans-serif',
            pickable: false,
            position: new go.Point(82, 78)
        }));
    }

    function attachmentPaperClip() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return obj.data.attachments && obj.data.attachments !== undefined && obj.data.attachments.length > 0;
        }).ofObject(), new go.Binding('geometry', '', function (obj) {
            return go.Geometry.parse(paperclipSvgPath, true);
        }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
            return new go.Size(512, 512); // NB: the two icons don't scale to the same proportions for some reason - ??
        }).ofObject(), {
            position: new go.Point(46, 85),
            scale: 0.02,
            stroke: '#000',
            fill: '#000',
            click: function click(event, target) {
                console.log('clip clicked');
                map.getUi().toggleTab(map.getUi().TAB_ID_ATTACHMENTS);
            }
        });
    }

    function pEyeball() {
        return mk(go.Shape, new go.Binding('visible', '', function (obj) {
            return map.getPerspectives().isPerspectivePoint(obj);
        }).ofObject(), new go.Binding('geometry', '', function (obj) {
            return go.Geometry.parse(map.pIsExpanded(obj) ? eyeSvgPath : eyeBlockedSvgPath, true);
        }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
            return new go.Size(512, map.pIsExpanded(obj) ? 440 : 512); // NB: the two icons don't scale to the same proportions for some reason - ??
        }).ofObject(), {
            position: new go.Point(87, 4),
            scale: 0.02,
            stroke: '#000',
            fill: '#000',
            pickable: false
        });
    }

    // P expansion indicator - this shows when the P corner is not visible, and only if the thing is a perspective point
    function pointMarker() {
        return pEyeball();
    }

    // P view indicator
    function viewMarker() {
        return mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
            return true;
        }).ofObject(), new go.Binding('fill', '', function (obj) {
            return getViewMarkerFill(obj);
        }).ofObject(), {
            position: new go.Point(0, 0),
            height: 18,
            width: 100,
            stroke: null
        });
    }

    function getViewMarkerFill(obj) {
        var weight = map.getPerspectives().getPerspectiveViewWeight(obj);

        if (weight == 3) {
            return colorPDark;
        } else if (weight == 2) {
            return colorP;
        } else if (weight == 1) {
            return colorPLight;
        } else {
            return 'transparent';
        }
    }

    // "P" corner (top right, orange)
    function cornerP() {
        return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
            return showPCorner(obj) ? 1 : 0;
        }).ofObject(), {
            name: 'cornerP',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            opacity: 0
        }, mk(go.Shape, {
            name: 'cornerPShape',
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100),
            // NB: this geometry covers the whole square; see note above for cornerR
            geometry: go.Geometry.parse('F' + 'M0 0 L0 100 L100 100' + // top left to bottom left to bottom right
            'L100 1 L99 0 L0 0' + // right/top sides (round top right corner)
            'L 50 0 L 100 50 ' + // to midpoint of top side, midpoint of right side
            'L100 100 0 100z', // bottom right, bottom left, return home
            true),

            fill: colorP,
            stroke: null,
            cursor: 'pointer',

            portId: 'P',
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: false,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: false,
            toMaxLinks: 1,
            click: function click(event, target) {
                // handle single or double click
                map.getUi().handleCornerClick('P', target.part);
            }
        }), pEyeball(), // P expansion indicator
        mk(go.TextBlock, {
            text: 'P',
            stroke: 'white',
            font: '9px sans-serif',
            pickable: false,
            position: new go.Point(81, 15)
        }));
    }

    function mainBorder() {
        return mk(go.Shape, 'Border', new go.Binding('stroke', '', getGroupSelectionStroke).ofObject(), new go.Binding('strokeWidth', '', getGroupSelectionStrokeWidth).ofObject(), {
            name: 'mainarea',
            position: new go.Point(0, 0),
            height: 100,
            width: 100,
            fill: null,
            //portId: "",
            cursor: 'pointer',
            fromLinkable: true,
            fromLinkableSelfNode: false,
            fromLinkableDuplicates: true,
            toLinkable: true,
            toLinkableSelfNode: false,
            toLinkableDuplicates: true
        });
    }

    // --------- handlers for mouse drag/drop actions on groups, which need to be replicated on different target parts -------

    // position is map.LEFT, null, or map.RIGHT
    function getGroupMouseDragEnterHandler(position) {
        return function (event, target, obj2) {
            //console.log('mouseDragEnter, e.dp: ' + event.documentPoint + ', target.part: ' + target.part + ', target bounds: ' + target.actualBounds);
            map.getUi().dragTargetGroup = target.part;
            map.getUi().dragTargetPosition = position;
            map.getDiagram().updateAllTargetBindings();
        };
    }

    var groupMouseDragLeaveHandler = function groupMouseDragLeaveHandler(event, target, obj2) {
        map.getUi().dragTargetGroup = null;
        map.getUi().dragTargetPosition = null;
        map.getDiagram().updateAllTargetBindings();
    };

    function getGroupMouseDropHandler(position) {
        return function (event, dropTarget) {
            handleGroupMouseDrop(event, dropTarget, position);
        };
    }

    var groupClickHandler = function groupClickHandler(event, target) {
        // handle single or double click
        map.getUi().handleCornerClick('', target);
    };

    // --------------- targets for dragging to D or S -----------------

    function dragAboveTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(map.LEFT),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(map.LEFT),
            click: groupClickHandler
        },
        // drag target region
        mk(go.Shape, 'Rectangle', {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            cursor: 'pointer',
            stroke: null,
            fill: 'transparent'
        }),
        // drag indicator bar
        mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
            return canDragSelectionToBecomeOrderedSisterOf(obj.part, map.LEFT, false);
        }).ofObject(), {
            position: new go.Point(0, 0),
            height: 10,
            width: 100,
            stroke: null,
            fill: '#000'
        }));
    }

    function dragIntoTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 25),
            height: 50,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(null),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(null),
            click: groupClickHandler
        }, mk(go.Shape, 'Rectangle', {
            position: new go.Point(0, 0),
            height: 50,
            width: 100,
            cursor: 'pointer',
            stroke: null,
            fill: 'transparent'
        }));
    }

    function dragBelowTarget() {
        return mk(go.Panel, go.Panel.Position, {
            position: new go.Point(0, 75),
            height: 25,
            width: 100,
            mouseDragEnter: getGroupMouseDragEnterHandler(map.RIGHT),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(map.RIGHT),
            click: groupClickHandler
        },
        // drag target region
        mk(go.Shape, 'Rectangle', {
            position: new go.Point(0, 0),
            height: 25,
            width: 100,
            cursor: 'pointer',
            stroke: null,
            fill: 'transparent'
        }),
        // drag indicator bar
        mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
            return canDragSelectionToBecomeOrderedSisterOf(obj.part, map.RIGHT, false);
        }).ofObject(), {
            position: new go.Point(0, 15),
            height: 10,
            width: 100,
            stroke: null,
            fill: '#000'
        }));
    }

    // Returns the TextBlock for the group title, for use in the main group template, inside the box.
    function groupInternalTextBlock() {
        return mk(go.Panel, go.Panel.Horizontal, {
            position: new go.Point(0, 0),
            desiredSize: new go.Size(100, 100)
        }, mk(go.TextBlock, new go.Binding('text', 'text').makeTwoWay(), new go.Binding('visible', '', function (group) {
            // always show text inside box for R-things, because external text will throw off layout
            return map.getLayouts().isNotWithinInventoryLayout(group) || map.getLayouts().isRThingWithinInventoryLayout(group);
        }).ofObject(), {
            width: 80,
            margin: 10,
            alignment: go.Spot.Center,
            textAlign: 'center',
            cursor: 'move',
            font: '10px sans-serif',
            isMultiline: true,
            wrap: go.TextBlock.WrapDesiredSize,

            mouseDragEnter: getGroupMouseDragEnterHandler(null),
            mouseDragLeave: groupMouseDragLeaveHandler,
            mouseDrop: getGroupMouseDropHandler(null),
            click: groupClickHandler,
            contextClick: function contextClick(event, target) {
                if (event.control) {
                    console.log(groupInfo(target.part));
                }
            }
        }));
    }

    // Returns a TextBlock for the group title, for use in the main group template, on the left or right.
    // visibleFn is a callback to be bound to the visibility attribute of the TextBlock.
    // textAlign is 'left' or 'right'.
    function groupExternalTextBlock(visibleFn, textAlign) {
        return mk(go.TextBlock, new go.Binding('text', 'text').makeTwoWay(), new go.Binding('visible', '', visibleFn).ofObject(), new go.Binding('scale', '', map.getLayouts().getExternalTextScale).ofObject(), {
            name: 'externaltext-' + textAlign, // NB: this screws up layouts for some reason - ??
            textAlign: textAlign,
            margin: 5,
            font: '10px sans-serif',
            isMultiline: true,
            click: groupClickHandler
        });
    }

    // -------------- group/Thing template --------------------

    this.groupTemplate = mk(go.Group, go.Panel.Vertical, new go.Binding('layout', 'layout', function (layoutName) {
        return map.getLayouts().getLayout(layoutName);
    }), new go.Binding('movable', '', function (obj) {
        return !obj.isLinkLabel;
    }).ofObject(), new go.Binding('isSubGraphExpanded', 'sExpanded'),
    // dim the thing if it's being dragged over another thing (drop to sister/child)
    new go.Binding('opacity', '', function (obj) {
        return obj.isSelected && map.getUi().dragTargetGroup ? 0.25 : 1;
    }).ofObject(), {
        locationObjectName: 'mainpanel',
        locationSpot: go.Spot.TopLeft,
        selectionAdorned: false,
        isSubGraphExpanded: true,
        layerName: 'Foreground',
        // highlight corners
        mouseEnter: function mouseEnter(event, target, obj2) {
            map.getUi().mouseOverGroup = target;
            map.getDiagram().updateAllTargetBindings();
        },
        // unhighlight corners
        mouseLeave: function mouseLeave(event, target, obj2) {
            map.getUi().mouseOverGroup = null;
            map.getDiagram().updateAllTargetBindings();
        }
        // containingGroupChanged: function(part, oldgroup, newgroup) {
        //     map.getDiagram().model.setDataProperty(part.data, 'level', map.computeLevel(part));
        //     //part.updateTargetBindings();  
        // }
    }, mk(go.Panel, go.Panel.Horizontal, groupExternalTextBlock(map.getLayouts().showLeftTextBlock, 'right'), mk(go.Panel, go.Panel.Position, {
        name: 'mainpanel'
    }, new go.Binding('scale', '', map.getLayouts().getScale).ofObject(),
    // drag area
    mk(go.Shape, 'Rectangle', {
        name: 'dragarea',
        position: new go.Point(0, 0),
        width: 100,
        height: 100,
        fill: self.groupFillColor,
        stroke: null,
        cursor: 'move',
        // show debug info
        contextClick: function contextClick(event, target) {
            if (event.control) {
                console.log(groupInfo(target.part));
            }
        }
    }), mk(go.Panel, go.Panel.Position, viewMarker(), dragAboveTarget(), dragIntoTarget(), dragBelowTarget(), groupInternalTextBlock(), cornerD(), dFlagMarker(), cornerS(), sCollapsedMarker(), cornerR(), pointMarker(), cornerP(), attachmentPaperClip(), mainBorder())), groupExternalTextBlock(map.getLayouts().showRightTextBlock, 'left')),

    // the placeholder normally holds the child nodes, but we just use a dummy placeholder
    mk(go.Shape, {
        name: 'placeholder',
        fill: 'transparent',
        stroke: null,
        desiredSize: new go.Size(0, 0)
    }));

    // ------------------- link template ---------------------------

    this.linkTemplate = mk(go.Link, {
        selectionAdorned: false,
        layerName: '',
        routing: go.Link.Normal,
        relinkableFrom: true,
        relinkableTo: true,
        mouseEnter: function mouseEnter(event, target, obj2) {
            map.getUi().mouseOverLink = target;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseLeave: function mouseLeave(event, target, obj2) {
            map.getUi().mouseOverLink = null;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDragEnter: function mouseDragEnter(event, target, dragObject) {
            map.getUi().mouseOverLink = target;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDragLeave: function mouseDragLeave(event, dropTarget, dragObject) {
            map.getUi().mouseOverLink = null;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDrop: function mouseDrop(event, dropTarget) {
            var parts = map.getDiagram().selection;
            if (parts && parts.count == 1 && parts.first() instanceof go.Group) {
                map.addThingAsRThing(parts.first(), dropTarget);
            }
        },
        doubleClick: function doubleClick(event, target) {
            map.createRThing(target);
        },
        contextClick: function contextClick(event, target) {
            if (event.control) {
                console.log(linkInfo(target));
            }
        }
    }, mk(go.Shape, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding('strokeWidth', '', map.getLayouts().getLinkStrokeWidth).ofObject(), {
        name: 'LINKSHAPE'
    }),

    // show to/from arrowheads based on link "type" attribute
    mk(go.Shape, {
        fromArrow: 'Backward'
    }, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t == 'from' || t == 'toFrom';
    })), mk(go.Shape, {
        toArrow: 'Standard'
    }, new go.Binding('stroke', '', getRLinkSelectionStroke).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t == 'to' || t == 'toFrom';
    })), mk(go.Panel, go.Panel.Auto, // link label "knob"
    new go.Binding('opacity', '', function (obj) {
        return showKnob(obj) ? 1 : 0;
    }).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), mk(go.Shape, {
        figure: 'Ellipse',
        fill: colorD,
        stroke: colorD,
        width: 12,
        height: 12
    })));

    this.pLinkTemplate = mk(go.Link, new go.Binding('opacity', '', function (obj) {
        return self.showPLink(obj) ? 1 : 0;
    }).ofObject(), {
        selectionAdorned: false,
        layerName: 'Background', // make P links fall behind R links
        routing: go.Link.Normal,
        contextClick: function contextClick(event, target) {
            if (event.control) {
                console.log(linkInfo(target));
            }
        }
    }, mk(go.Shape, new go.Binding('strokeWidth', '', map.getLayouts().getLinkStrokeWidth).ofObject(), {
        name: 'LINKSHAPE',
        stroke: colorPLight,
        fill: colorPLight
    }), mk(go.Shape,
    // new go.Binding('visible', '', function(obj) {
    //     return (self.showPDot(obj) ? 1 : 0);
    // }).ofObject(),
    new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), {
        toArrow: 'Circle',
        stroke: colorPLight,
        fill: colorPLight
    }));

    this.dLinkTemplate = mk(go.Link, {
        selectable: false
    }, mk(go.Shape, {
        name: 'LINKSHAPE',
        stroke: null
    }));

    // ----------- temporary link/node templates, for use when dragging to create R/P lines -------------

    // define initial temporary link templates - these will be modified when handlePortTargeted is called
    this.setTemporaryLinkTemplates = function (tool) {
        tool.temporaryLink = makeTemporaryLinkTemplate();
        tool.temporaryFromNode = makeTemporaryNodeTemplate();
        tool.temporaryToNode = makeTemporaryNodeTemplate();
    };

    function makeTemporaryLinkTemplate() {
        return mk(go.Link, {
            layerName: 'Tool'
        }, mk(go.Shape, {
            name: 'linkshape',
            strokeWidth: 2
        }));
    }

    function makeTemporaryNodeTemplate() {
        return mk(go.Group, {
            layerName: 'Tool'
        }, mk(go.Shape, 'Border', {
            name: 'border',
            strokeWidth: 3,
            fill: null
        }));
    }

    // change color and portId of temporary link templates based on the type of link being created/relinked
    this.handlePortTargeted = function (tool, realnode, realport, tempnode, tempport, toend) {
        // console.log('portTargeted, realport: ' + (realport ? realport.name : '') + ', tempport: ' + (tempport ? tempport.name : '')
        //     + ', originalFromPort: ' + (ltool.originalFromPort ? ltool.originalFromPort.name : '') + ', originalToPort: ' + ltool.originalToPort);

        var linkShape = tool.temporaryLink.findObject('linkshape');
        var fromBorder = tool.temporaryFromNode.findObject('border');
        var toBorder = tool.temporaryToNode.findObject('border');

        if (tool.originalFromPort && tool.originalFromPort.name == 'cornerPShape') {
            linkShape.stroke = colorP;
            fromBorder.stroke = colorP;
            toBorder.stroke = colorP;
            fromBorder.portId = 'P';
            toBorder.portId = 'P';
        } else if (tool.originalFromPort && tool.originalFromPort.name == 'cornerRShape') {
            linkShape.stroke = colorR;
            fromBorder.stroke = colorR;
            toBorder.stroke = colorR;
            fromBorder.portId = 'R';
            toBorder.portId = 'R';
        }
        tempnode.scale = map.getLayouts().getScale(realnode);
    };

    // prevent duplicate 'P' links in the same direction between the same two things
    this.validateLink = function (fromNode, fromPort, toNode, toPort) {
        // the P port is on top of the R port, so both P and R links get the toPort set to R by default.
        if (fromPort.portId == 'P') {
            // NB: findLinksTo would be simpler, but it doesn't seem to work... (?)
            var pLinks = toNode.findLinksBetween(fromNode, 'P', 'P');
            //console.log('validateLink, pLinks from ' + fromNode + ':' + fromPort + ' to ' + toNode + ':' + toPort + ' = ' + pLinks.count);
            if (pLinks.count) {
                while (pLinks.next()) {
                    var pLink = pLinks.value;
                    if (pLink.fromNode == fromNode && pLink.toNode == toNode) {
                        return false;
                    }
                }
            }
        }
        return true;
    };

    // ------------------- slide node template ----------------------

    function createSlideResizeHandle(alignment) {
        return mk(go.Shape, new go.Binding('desiredSize', '', function (obj) {
            var slide = obj.adornedObject;
            var size = Math.min(slide.width, slide.height) * 0.05;
            return new go.Size(size, size);
        }).ofObject(), {
            alignment: alignment,
            cursor: 'col-resize',
            fill: 'rgba(251,170,54,1)',
            stroke: null
        });
    }

    this.slideTemplate = mk(go.Node, go.Panel.Auto,
    // NB: unlike groups, slides just use a normal 2-way location binding
    new go.Binding('location', 'loc', go.Point.parse).makeTwoWay(go.Point.stringify), new go.Binding('width', 'width').makeTwoWay(), new go.Binding('height', 'height').makeTwoWay(), new go.Binding('visible', '', function (obj) {
        return obj.data.hasRegion && map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) && !map.getPresenter().isPresenting && !map.getPresenter().isCreatingThumbnail && map.getPresenter().currentSlideIndex == obj.data.index;
    }).ofObject(), {
        locationSpot: go.Spot.TopLeft,
        selectionAdorned: false,
        resizable: true,
        resizeAdornmentTemplate: mk(go.Adornment, 'Spot', mk(go.Placeholder), // takes size and position of adorned object                   
        createSlideResizeHandle(go.Spot.TopLeft), createSlideResizeHandle(go.Spot.Top), createSlideResizeHandle(go.Spot.TopRight), createSlideResizeHandle(go.Spot.Right), createSlideResizeHandle(go.Spot.BottomRight), createSlideResizeHandle(go.Spot.Bottom), createSlideResizeHandle(go.Spot.BottomLeft), createSlideResizeHandle(go.Spot.Left)),
        padding: 0,
        contextClick: function contextClick(event, target) {
            console.log(nodeInfo(target.part));
        }
    }, mk(go.Shape, 'Rectangle', {
        name: 'slideborder',
        fill: 'rgba(251,170,54,.1)',
        stroke: null
    }));

    // ------------------- export footer ----------------------

    // NB: this is not a template per se, in that it is added to the diagram
    // statically, rather than being bound to something in the model.
    // But we put it here because it is about creating parts and stuff.

    function createExportFooter() {
        return mk(go.Node, go.Panel.Spot, {
            layerName: 'Foreground',
            location: new go.Point(0, 0),
            scale: 1,
            opacity: 0,
            pickable: false,
            selectable: false
        }, mk(go.Shape, 'Rectangle', {
            name: 'rectangle',
            height: 60,
            fill: null,
            stroke: null
        }), mk(go.Picture, {
            source: 'assets/img/metamap-logo-50.png',
            alignment: go.Spot.TopLeft,
            alignmentFocus: go.Spot.TopLeft,
            width: 195,
            height: 50
        }), mk(go.TextBlock, {
            text: 'metamap.cabreraresearch.org',
            alignment: go.Spot.BottomLeft,
            alignmentFocus: go.Spot.BottomLeft,
            width: 200
        }), mk(go.TextBlock, {
            name: 'mapTitle',
            text: '',
            textAlign: 'right',
            alignment: go.Spot.TopRight,
            alignmentFocus: go.Spot.TopRight,
            width: 300
        }), mk(go.TextBlock, {
            name: 'authorName',
            text: '',
            textAlign: 'right',
            alignment: go.Spot.BottomRight,
            alignmentFocus: go.Spot.BottomRight,
            width: 300
        }));
    }

    // creates or refreshes the footer logo/text that is displayed in the image export
    this.addExportFooter = function () {
        if (!_exportFooter) {
            _exportFooter = createExportFooter();
            map.getDiagram().add(_exportFooter);
        }
    };

    this.showExportFooter = function () {
        var rect = map.computeMapBounds();
        // put footer at least 100 px below bottom of map; make it at least 500px wide
        var x = rect.x;
        var y = rect.y + rect.height + Math.max(100, rect.height / 5);
        var w = Math.max(500, rect.width);
        //console.log('showExportFooter, bounds rect: ' + rect + ', w: ' + w);
        _exportFooter.location = new go.Point(x, y);
        _exportFooter.findObject('rectangle').width = w;
        _exportFooter.findObject('mapTitle').text = 'Map Title: ' + $scope.mapTitle;
        _exportFooter.findObject('authorName').text = 'Author: ' + $scope.userName;
        _exportFooter.opacity = 1;
        _exportFooter.invalidateLayout();
    };

    this.hideExportFooter = function () {
        _exportFooter.opacity = 0;
    };
};
// show corners on mouseover
// drag to D (make it sisters)
// show corners on mouseover
// drag to S (make it children)

},{}],25:[function(require,module,exports){
'use strict';

SandbankEditor.Tests = function ($scope, map) {

    var self = this;

    this.TEST_STATUS_NOT_RUN = 'not-run';
    this.TEST_STATUS_PASSED = 'passed';
    this.TEST_STATUS_EXAMINE = 'examine';
    this.TEST_STATUS_FAILED = 'failed';

    this.currentTest = null;

    this.init = function () {};

    this.runTest = function (name) {
        $scope.safeApply(function () {
            var diagram = map.getDiagram();
            var test = _.findWhere(self.tests, { name: name });
            test.status = self.TEST_STATUS_NOT_RUN;
            self.currentTest = test;
            diagram.clear();
            test.run(diagram);
            if (test.check === undefined) {
                test.status = self.TEST_STATUS_EXAMINE;
            } else {
                test.failReason = test.check(diagram);
                if (_.isString(test.failReason)) {
                    test.status = self.TEST_STATUS_FAILED;
                } else {
                    test.status = self.TEST_STATUS_PASSED;
                }
            }
        });
    };

    this.createGeneratorTest = function (name, mapItFn) {
        return {
            name: 'ThinkQ: ' + name,
            run: function run(diagram) {
                self.runGeneratorTest(mapItFn);
            }
        };
    };

    this.runGeneratorTest = function (mapItFn) {
        var diagram = map.getDiagram();
        var generator = map.getGenerator();
        generator.concept1 = 'CONCEPT 1';
        generator.concept2 = 'CONCEPT 2';
        generator.mapIt(mapItFn);
    };

    this.tests = [
    // {
    //     name: '[Failed test]',
    //     run: function(diagram) {
    //     },
    //     check: function(diagram) {
    //         return 'This test failed - this is only a test.';
    //     }
    // },
    {
        name: 'Reset map',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            map.refresh();
        },
        check: function check(diagram) {
            return diagram.findTopLevelGroups().count == 1;
        }
    }, {
        name: 'Create Sister',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createSister(group);
        },
        check: function check(diagram) {
            return diagram.findTopLevelGroups().count == 2;
        }
    }, {
        name: 'Create R to Sister',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createRToSister(group);
        }
    }, {
        name: 'Create Child',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createChild(group);
        }
    }, {
        name: 'Create 3 children and switch to freehand',
        run: function run(diagram) {
            diagram.toolManager.clickCreatingTool.insertPart(new go.Point(0, 0));
            var group = diagram.findTopLevelGroups().first();
            map.createChild(group);
            map.createChild(group);
            map.createChild(group);
            // diagram.model.setDataProperty(group.data, 'layout', 'freehand');
            group.isSelected = true;
            map.getUi().setSelectedThingsLayout('freehand');
        },
        check: function check(diagram) {
            if (diagram.findTopLevelGroups().count != 1) {
                return 'Top level group count is not 1';
            }
            var group = diagram.findTopLevelGroups().first();
            if (group.memberParts.count != 3) {
                return 'Parent data children is not 3';
            }
            return true;
        }
    }, {
        name: 'Drag RTBB into outline S',
        instructions: 'Drag the preselected RTBB into Whole (S), then do an Undo',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createThing(250, 0, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createThing(500, 0, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB into freehand S',
        instructions: 'Drag the preselected RTBB into Whole (S) and examine layout',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var oldPart1 = map.createChild(whole, 'Old Part 1');
            var part1 = map.createThing(250, 30, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createThing(500, 70, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Create RTBB in outline and switch to freehand',
        instructions: 'Check auto-generated freehand layout of parts',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            whole.isSelected = true;
            map.getUi().setSelectedThingsLayout('freehand');
            //diagram.model.setDataProperty(whole.data, 'layout', 'freehand');
            //map.refresh();
            diagram.clearSelection();
        }
    },

    // create RTBB in freehand, add part in outline, switch back to freehand
    // create RTBB in freehand, drag in part in outline, switch back to freehand

    {
        name: 'Drag RTBB out of S',
        instructions: 'Drag the preselected RTBB onto Whole (D)',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of freehand S',
        instructions: 'Drag the preselected RTBB onto Whole (D)',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1', 10, 120);
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2', 110, 150);
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            part1.isSelected = true;
            part2.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of 2nd level S',
        instructions: 'Drag the preselected RTBB onto Whole (D) of Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var subpart12 = map.createChild(part1, 'Subpart 1.2');
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            var part2 = map.createChild(whole, 'Part 2');
            map.refresh();
            diagram.clearSelection();
            subpart11.isSelected = true;
            subpart12.isSelected = true;
        }
    }, {
        name: 'Drag RTBB out of 2nd level freehand S',
        instructions: 'Drag the preselected RTBB onto Whole (D) of Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1', 0, 120);
            var subpart11 = map.createChild(part1, 'Subpart 1.1', 10, 180);
            var subpart12 = map.createChild(part1, 'Subpart 1.2', 20, 220);
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            var part2 = map.createChild(whole, 'Part 2', 0, 300);
            map.refresh();
            diagram.clearSelection();
            subpart11.isSelected = true;
            subpart12.isSelected = true;
        }
    }, {
        name: 'Rchannel',
        instructions: 'Note that R-things are in part-whole relation',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole 1', 'right');
            var child11 = map.createChild(thing1, 'Part 1.1');
            var thing2 = map.createThing(250, 0, 'Whole 2');
            var child21 = map.createChild(thing2, 'Part 2.1');

            var rThing1 = map.createRLinkWithRThing(thing1, thing2, 'Rthing 1-2');
            var rThing11 = map.createRLinkWithRThing(child11, child21, 'Rthing 1.1 - 2.1');
            console.log('Rchannel, rThing11: ' + rThing11);

            diagram.clearSelection();
            rThing11.isSelected = true;
            map.addSelectedThingsAsChildrenOf(rThing1);
        }
    }, {
        name: 'Disappearing parts on new idea creation',
        instructions: 'Create a new top-level idea - Part 1.1 should not disappear temporarily',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole 1', 'right');
            var child11 = map.createChild(thing1, 'Part 1.1');
        }
    }, {
        name: 'Drag top-level thing into freehand system',
        instructions: 'Drag New Part into Whole; examine resulting part layout',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole', 'freehand');
            var child11 = map.createChild(thing1, 'Part');
            var newPart = map.createThing(250, 0, 'New Part', 'left');
        }
    }, {
        name: 'Drag top-level RTBB into freehand system',
        instructions: 'Drag preselected RTBB into Whole; examine resulting part layout',
        run: function run(diagram) {
            var thing1 = map.createThing(0, 0, 'Whole', 'freehand');
            var child11 = map.createChild(thing1, 'Part');
            var bar = map.createThing(250, 0, 'Bar', 'left');
            var bell = map.createThing(500, 0, 'Bell', 'left');
            var rThing = map.createRLinkWithRThing(bar, bell, 'Rthing');
            map.refresh();
            diagram.clearSelection();
            bar.isSelected = true;
            bell.isSelected = true;
        }
    }, {
        name: 'Drag R-thing square into freehand system',
        instructions: 'Drag preselected square into Whole; examine resulting part layout',
        run: function run(diagram) {
            var whole = map.createThing(-100, 50, 'Whole', 'freehand');
            var child11 = map.createChild(whole, 'Part');
            var part11 = map.createThing(250, 0, 'Part11', 'left');
            var part12 = map.createThing(500, 0, 'Part12', 'left');
            var part21 = map.createThing(250, 250, 'Part21', 'left');
            var part22 = map.createThing(500, 250, 'Part22', 'left');

            var rThing11_12 = map.createRLinkWithRThing(part11, part12, 'Rthing 11-12');
            var rThing11_21 = map.createRLinkWithRThing(part11, part21, 'Rthing 11-21');
            var rThing12_22 = map.createRLinkWithRThing(part12, part22, 'Rthing 12-22');
            var rThing21_22 = map.createRLinkWithRThing(part21, part22, 'Rthing 21-22');
            map.refresh();
            diagram.clearSelection();
            part11.isSelected = true;
            part12.isSelected = true;
            part21.isSelected = true;
            part22.isSelected = true;
        }
    }, {
        name: 'Drag R-thing square out of freehand system',
        instructions: 'Drag preselected square onto D of Whole; examine resulting layout',
        run: function run(diagram) {
            var whole = map.createThing(-100, 50, 'Whole', 'freehand');
            var child11 = map.createChild(whole, 'Part');
            var part11 = map.createChild(whole, 'Part11', 10, 190);
            var part12 = map.createChild(whole, 'Part12', 120, 190);
            var part21 = map.createChild(whole, 'Part21', 10, 300);
            var part22 = map.createChild(whole, 'Part22', 120, 300);

            var rThing11_12 = map.createRLinkWithRThing(part11, part12, 'Rthing 11-12');
            var rThing11_21 = map.createRLinkWithRThing(part11, part21, 'Rthing 11-21');
            var rThing12_22 = map.createRLinkWithRThing(part12, part22, 'Rthing 12-22');
            var rThing21_22 = map.createRLinkWithRThing(part21, part22, 'Rthing 21-22');
            map.refresh();
            diagram.clearSelection();
            part11.isSelected = true;
            part12.isSelected = true;
            part21.isSelected = true;
            part22.isSelected = true;
        }
    }, {
        name: 'Drag 2nd level part to D of parent',
        instructions: 'Drag Subpart 1.1 onto D of Part 1; it should appear below Part 1',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var part2 = map.createChild(whole, 'Part 2');
            map.refresh();
            diagram.clearSelection();
        }
    }, {
        name: 'Invisible R-thing in 2nd level of outline',
        instructions: 'R-thing between Subparts 1.1 and 1.2 should be visible',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'left');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            var subpart12 = map.createChild(part1, 'Subpart 1.2');
            var rThing = map.createRLinkWithRThing(subpart11, subpart12, 'Rthing');
            rThing.desiredSize = new go.Size(30, 30);
            map.refresh();
            console.log('rThing actualBounds: ' + rThing.actualBounds + ', scale: ' + rThing.scale + ', desiredSize: ' + rThing.desiredSize);
            console.log('Whole desiredSize: ' + whole.desiredSize);
            diagram.clearSelection();
        }
    }, {
        name: 'R-thing between ideas in same location (error)',
        instructions: 'This should trigger an error',
        run: function run(diagram) {
            // try {
            var part1 = map.createThing(0, 0, 'Part 1', 'left');
            var part2 = map.createThing(0, 0, 'Part 2', 'left');
            var rThing = map.createRLinkWithRThing(part1, part2, 'Rthing');
            map.refresh();
            // } catch(e) {
            //     alert(e.message);
            // }
        }
    },
    // {
    //     name: 'Fix bad R-thing leading to infinite loop',
    //     instructions: 'Map should display and not trigger infinite loop; model should be fixed so that r-thing is not Part 1.1 or Part 1.2',
    //     run: function(diagram) {
    //         var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
    //         var child11 = map.createChild(thing1, 'Part 1.1');
    //         var child12 = map.createChild(thing1, 'Part 1.2');
    //         var rThing = map.createRLinkWithRThing(child11, child12, 'Rthing');
    //         var rLink = rThing.labeledLink;
    //         rLink.data.labelKeys = [child11.data.key];
    //         map.checkModel();
    //         map.refresh();
    //     }
    // },
    {
        name: 'Drag to create R-line',
        instructions: 'Drag from the R-corner of Thing1 to Thing2; temporary drag line and square should be R-color; created line should be an R-line',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(100, 0, 'Thing2', 'freehand');
        }
    }, {
        name: 'Drag to create P-line',
        instructions: 'Drag from the P-corner of Thing1 to Thing2; temporary drag line and square should be P-color; created line should be a P-line',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(100, 0, 'Thing2', 'freehand');
        }
    }, {
        name: 'Relink from-port of R-line',
        instructions: 'Move the start of the R-link from Thing 1 to Thing 3; make sure it does not turn into a P-link',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(300, 0, 'Thing2', 'freehand');
            var thing3 = map.createThing(100, 200, 'Thing3', 'freehand');
            var rlink = map.createRLink(thing1, thing2);
        }
    }, {
        name: 'Relink to-port of R-line',
        instructions: 'Move the end of the R-link from Thing 2 to Thing 3; make sure it does not turn into a P-link',
        run: function run(diagram) {
            var thing1 = map.createThing(-100, 0, 'Thing1', 'freehand');
            var thing2 = map.createThing(300, 0, 'Thing2', 'freehand');
            var thing3 = map.createThing(100, 200, 'Thing3', 'freehand');
            var rlink = map.createRLink(thing1, thing2);
        }
    }, {
        name: 'Showing parts of parts of a freehand whole',
        instructions: 'Whole, Part 1 and Subpart 1.1 should all be visible',
        run: function run(diagram) {
            var whole = map.createThing(0, 0, 'Whole', 'freehand');
            var part1 = map.createChild(whole, 'Part 1');
            var subpart11 = map.createChild(part1, 'Subpart 1.1');
            map.refresh();
            diagram.clearSelection();
        }
    }

    // self.createGeneratorTest('WHAT_IS', map.getGenerator().WHAT_IS),
    // self.createGeneratorTest('PARTS_OF', map.getGenerator().PARTS_OF),
    // self.createGeneratorTest('PART_OF', map.getGenerator().PART_OF),
    // self.createGeneratorTest('PARTS_HAVE_PARTS', map.getGenerator().PARTS_HAVE_PARTS),
    // self.createGeneratorTest('POINT_FOR', map.getGenerator().POINT_FOR),
    // self.createGeneratorTest('HAS_MULTIPLE_PS', map.getGenerator().HAS_MULTIPLE_PS),
    // self.createGeneratorTest('R_TO', map.getGenerator().R_TO),
    // self.createGeneratorTest('R_EXISTS', map.getGenerator().R_EXISTS),
    // self.createGeneratorTest('WHAT_IS_R', map.getGenerator().WHAT_IS_R),
    // self.createGeneratorTest('DISTINGUISH_BETWEEN', map.getGenerator().DISTINGUISH_BETWEEN),
    // self.createGeneratorTest('IS_R_BETWEEN', map.getGenerator().IS_R_BETWEEN),
    // self.createGeneratorTest('CAN_BE_P', map.getGenerator().CAN_BE_P),
    // self.createGeneratorTest('MULTIPLE_PS_ARE', map.getGenerator().MULTIPLE_PS_ARE),
    // self.createGeneratorTest('P_PARTS', map.getGenerator().P_PARTS),
    // self.createGeneratorTest('COMPARE_CONTRAST', map.getGenerator().COMPARE_CONTRAST),
    // self.createGeneratorTest('R_PARTS', map.getGenerator().R_PARTS),
    // self.createGeneratorTest('PARTS_HAVE_RS', map.getGenerator().PARTS_HAVE_RS),
    // self.createGeneratorTest('PART_RS_EXIST', map.getGenerator().PART_RS_EXIST),
    // self.createGeneratorTest('PART_RS_ARE', map.getGenerator().PART_RS_ARE),
    // self.createGeneratorTest('WHAT_ABOUT', map.getGenerator().WHAT_ABOUT)

    // computePartsBounds

    // createRThing
    // addSelectedThingsAsChildrenOf
    // addSelectedThingAsOrderedSisterOf
    // addSelectedThingsAsSistersOf
    // addThingAsRThing
    // toggleDFlag
    // toggleSExpansion
    // togglePExpansion

    // presenter: select first slide and hit play; make sure first slide notes appear

    ];
};

},{}],26:[function(require,module,exports){
// controller for list of top maps

'use strict';

window.TopMapsCtrl = function ($scope) {

    $scope.topMaps = [];
    $scope.users = [];

    // NB: this is duplicated in feed.js, but we repeat it here to make this controller independent
    $scope.organizations = [];

    $scope.organizationId = '';

    // ---------------- map data -----------------

    $scope.loadTopMaps = function () {
        //startSpinner();
        $http.get('/maps/top_maps.json?organizationId=' + $scope.organizationId).then(function (response) {
            $scope.organizations = response.data.organizations;
            $scope.topMaps = response.data.topMaps;
            $scope.users = response.data.users;
            //  stopSpinner();
        }, function () {
            //stopSpinner();
            alert('Could not load list of top maps');
        });
    };

    $scope.loadTopMaps();

    // -------------- view helpers -----------------

    $scope.getUserName = function (userId) {
        var user = _.findWhere($scope.users, {
            id: userId
        });
        return user ? user.name : '';
    };
};

},{}],27:[function(require,module,exports){
'use strict';

SandbankEditor.Tutorial = function () {

    /** like jQuery $() but starting from #tutorial */
    function $ui(sel) {
        return sel ? $('#tutorial').find(sel) : $('#tutorial');
    }

    /** current section number (div.tutorial-section) */
    var _section = 0;

    /** current card-number (div.tutorial-card) in the current section */
    var _card = 0;

    /** total number of sections */
    var NUM_SECTIONS = $ui('.tutorial-section').length;

    /** total number of cards in each section */
    var NUM_CARDS = $.map($ui('.tutorial-section'), function (section) {
        return $(section).find('.tutorial-card').length;
    });

    /** update the tutorial view */
    function _update() {
        $ui('.tutorial-card').hide();

        var $section = $ui('.tutorial-section').eq(_section),
            $card = $section.find('.tutorial-card').eq(_card);

        $ui().attr('class', $card.attr('data-class'));

        $ui('.prev-btn').toggle(_card > 0);
        $ui('.next-btn').toggle(_card < NUM_CARDS[_section]);

        var $progress = $ui('.tutorial-progress');

        $progress.find('.title').text($section.attr('data-title'));
        $progress.find('.card').text(_card + 1);
        $progress.find('.total').text(NUM_CARDS[_section]);

        $card.show('fast');
    }

    /** start the tutorial */
    function start(section, card) {
        _section = section || 0;
        _card = card || 0;
        _update();
        $ui().show();
    }

    /** button: go to the next card */
    function next() {
        if (_card + 1 === NUM_CARDS[_section]) {
            _card = 0;
            _section++;
        } else {
            _card++;
        }
        _update();
    }

    /** button: go to the previous card */
    function prev() {
        _card--;
        _update();
    }

    /** button: close the tutorial */
    function close() {
        $ui().hide('fast');
    }

    /** hook up the buttons */
    function _initControls() {
        function onclick(sel, fn) {
            $ui(sel).click(function () {
                fn.apply(this, arguments);
                return false;
            });
        }

        onclick('.prev-btn', prev);
        onclick('.next-btn, .start-btn', next);
        onclick('.skip-btn, .done-btn', close);
    }

    _initControls();

    // Public interface:

    this.start = start;
};

},{}],28:[function(require,module,exports){
'use strict';

SandbankEditor.UI = function ($scope, map) {

    var self = this;

    // ----------- tab ("slider") IDs - tabs are rendered in views/maps/_form --------------
    //this.TAB_ID_HISTORY = 'history-tab';
    this.TAB_ID_PRESENTER = 'presenter-tab';
    this.TAB_ID_ANALYTICS_MAP = 'analytics-tab-map';
    this.TAB_ID_ANALYTICS_THING = 'analytics-tab-thing';
    this.TAB_ID_PERSPECTIVES = 'perspectives-tab';
    this.TAB_ID_DISTINCTIONS = 'distinctions-tab';
    this.TAB_ID_ATTACHMENTS = 'attachments-tab';
    this.TAB_ID_GENERATOR = 'generator-tab';
    this.TAB_ID_STANDARDS = 'standards-tab';

    this.init = function () {};

    // ------------ editor options for map/user ----------

    var mapEditorOptions = {};

    var defaultEditorOptions = {
        // noArrows, to, from, toFrom
        defaultRelationshipDirection: 'noArrows',
        // left, right, stacked, freehand
        defaultThingLayout: 'left',
        // lines, spotlight, both
        perspectiveMode: 'lines'
    };

    // called when map is loaded to set stored options for map
    this.setMapEditorOptions = function (options) {
        mapEditorOptions = options;
    };

    // returns appropriate values from the user profile or the default options if options are not set for the map
    this.getMapEditorOptions = function () {
        var profileOptions = $scope.userProfile ? $scope.userProfile.editorOptions : null;
        var vals = [mapEditorOptions, profileOptions, defaultEditorOptions];
        mapEditorOptions = _.find(vals, function (val) {
            return !_.isEmpty(val);
        });
        return mapEditorOptions;
    };

    // saves default options for the user (map options are saved in autosave.js)
    function saveUserEditorOptions(options) {
        var data = {
            user: {
                editor_options: JSON.stringify(options)
            }
        };

        startSpinner();
        $http.put('/users/' + $scope.userId + '.json', data).then(function (response) {
            stopSpinner();
        }, function () {
            stopSpinner();
            $scope.profileEditStatus = 'Could not save editor options';
        });
    }

    // options modal

    $scope.editorOptions = new SandbankEditorOptions($scope);

    this.editOptions = function () {
        $scope.editorOptions.openModal(mapEditorOptions, function (options) {
            // onSaveDefaults
            saveUserEditorOptions(options);
        }, function (options) {
            // onUpdate
            mapEditorOptions = options;
            map.getAutosave().saveNow('edit_options');
        });
    };

    // ------------ state model ----------

    this.state = {};

    var defaultState = {
        showNavigator: false,
        currentTab: null,
        perspectivePointKey: null,
        distinctionThingKey: null
    };

    this.setStateData = function (data) {};

    // TODO: Save state more frequently?? Currently it is only saved when autosave is triggered by other actions...

    this.getStateData = function () {
        return self.state;
    };

    // ----------- temporary state flags ------------

    this.zoomingToRegion = false;

    this.mouseOverGroup = null;
    this.mouseOverLink = null;

    this.dragTargetGroup = null;
    this.dragTargetPosition = null;

    this.helpTip = null;

    // ----------- handle bottom tabs ("sliders") -------------

    // in the following functions, ID is e.g. 'history-tab' (ID of one of the .bottom-tab's)

    // this is called by map.currentTabChanged, which is triggered by a $scope.$watch
    this.currentTabChanged = function (newValue, oldValue) {
        //console.log('ui, currentTabChanged: ' + newValue);
        self.state.currentTab = newValue;
    };

    this.currentTabIs = function (tabID) {
        return $scope.currentTab == tabID;
    };

    this.openTab = function (tabID) {};

    this.closeTab = function (tabID) {};

    this.disableTab = function (tabID) {
        // prevent opening other tabs when in P or D editor
        if ($scope.currentTab == self.TAB_ID_PERSPECTIVES || $scope.currentTab == self.TAB_ID_DISTINCTIONS) {
            return true;
        }
        return false;
    };

    this.toggleTab = function (tabID) {};

    this.toggleNavigator = function () {};

    this.toggleZoomingToRegion = function () {};

    // ----------------- zooming functions -------------------

    this.canZoomIn = function () {
        return map.getDiagram().scale < 32;
    };

    this.canZoomOut = function () {
        return map.getDiagram().scale > 0.25;
    };

    this.zoomIn = function () {
        var diagram = map.getDiagram();
        if (diagram.scale < 32) {
            var vb = diagram.viewportBounds.copy();
            diagram.scale = diagram.scale * 2;
            diagram.centerRect(vb);
        }
    };

    this.zoomOut = function () {
        var diagram = map.getDiagram();
        if (diagram.scale > 0.25) {
            var vb = diagram.viewportBounds.copy();
            diagram.scale = diagram.scale / 2;
            diagram.centerRect(vb);
        }
    };

    this.maybeZoomToRegion = function () {
        var diagram = map.getDiagram();
        // this flag is set by the toolbar button
        if (self.zoomingToRegion) {
            self.zoomingToRegion = false;
            console.log('zoomToRegion, selection count: ' + diagram.selection.count);
            var rect = diagram.computePartsBounds(diagram.selection);
            diagram.zoomToRect(rect);
        }
        //$scope.safeApply();
    };

    this.resetZoom = function () {
        var diagram = map.getDiagram();
        //var rect = diagram.computePartsBounds(diagram.nodes).copy();
        var rect = map.safeRect(map.computeMapBounds());
        //console.log('resetZoom, bounds: ' + rect);
        if (rect.width) {
            rect.inflate(rect.width / 5, rect.height / 5);
        }
        diagram.zoomToRect(rect);
        diagram.alignDocument(go.Spot.Center, go.Spot.Center);
        if (diagram.scale > 1) {
            diagram.scale = 1;
        }
    };

    // ------------ thing options (layout) ----------------

    this.getSelectedThingsOrDefaultLayout = function () {
        var sl = self.getSelectedThingsLayout();
        if (sl) {
            return sl;
        } else {
            return mapEditorOptions.defaultThingLayout;
        }
    };

    // returns a non-null value only if all selected items are groups with the same layout
    this.getSelectedThingsLayout = function () {
        var diagram = map.getDiagram();
        if (diagram === null || diagram.selection.count < 1) return null;

        var layout = null;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (!it.value instanceof go.Group) return null;
            var group = it.value;
            //console.log('getSelectedThingsLayout, it.value: ' + group);
            var groupLayout = group.data ? group.data.layout : null;
            if (layout !== null && groupLayout != layout) return null;
            layout = groupLayout;
        }
        //console.log('getSelectedThingsLayout: ' + layout);

        return layout;
    };

    // sets the layout of all selected things to the given layout
    this.setSelectedThingsLayout = function (layoutName) {
        var diagram = map.getDiagram();
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Group) {
                var group = it.value;
                diagram.model.setDataProperty(group.data, 'layout', layoutName);
                map.getLayouts().setDescendantLayouts(group, group.data.layout);
                map.refresh();
            }
        }
    };

    // ------------ relationship options (direction) ----------------

    this.getSelectedRelationshipsOrDefaultDirection = function () {
        var sd = self.getSelectedRelationshipsDirection();
        if (sd) {
            return sd;
        } else {
            return mapEditorOptions.defaultRelationshipDirection;
        }
    };

    // returns a non-null value only if all selected items are relationships with the same direction
    this.getSelectedRelationshipsDirection = function () {
        var diagram = map.getDiagram();
        if (diagram === null || diagram.selection.count < 1) return null;

        var type = null;
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (!it.value instanceof go.Link) return null;
            var link = it.value;
            var linkType = link.data ? link.data.type : null;
            if (type !== null && linkType != type) return null;
            type = linkType;
        }

        return type;
    };

    // sets the direction of all selected relationships to the given direction
    this.setSelectedRelationshipsDirection = function (direction) {
        var diagram = map.getDiagram();
        //diagram.model.startTransaction("change relationship direction");
        var it = diagram.selection.iterator;
        while (it.next()) {
            if (it.value instanceof go.Link) {
                //diagram.model.startTransaction("change link type");
                diagram.model.setDataProperty(it.value.data, 'type', direction);
                //diagram.model.commitTransaction("change link type");
            }
        }
        //diagram.commitTransaction("change relationship direction");
    };

    // ------- handle corner clicks and double clicks --------

    var _cornerClicked = null;
    var _cornerFunction = null;
    var _cornerTimeout = 300;

    this.handleCornerClick = function (corner, thing) {
        //console.log('handleCornerClick: corner = ' + corner + ', cornerClicked = ' + _cornerClicked);
        // assume it's a single click, and set handler
        _cornerFunction = getCornerFunction(corner, 1);
        // already clicked, so it's a double click; change handler
        if (_cornerClicked == corner) {
            _cornerFunction = getCornerFunction(corner, 2);
            console.log('handleCornerClick: double click on ' + corner);
            return;
        }
        // remember that at least one click has happened for the current corner
        _cornerClicked = corner;

        // set timer to invoke whatever handler we have ready to go (unless another click happens within the interval)
        var timer = setTimeout(function () {
            // ding! invoke it
            if (_cornerFunction == self.showCornerTip) {
                _cornerFunction(thing, corner);
            } else {
                _cornerFunction(thing); // don't pass the corner arg to things like createChild that have a different second arg
            }
            // reset handler and clicked flag
            _cornerFunction = getCornerFunction(corner, 1);
            _cornerClicked = null;
        }, _cornerTimeout);
    };

    function getCornerFunction(corner, clicks) {
        if (corner == 'D') {
            return clicks == 1 ? self.showCornerTip : map.createSister;
        } else if (corner == 'S') {
            return clicks == 1 ? map.toggleSExpansion : map.createChild;
        } else if (corner == 'R') {
            return clicks == 1 ? self.showCornerTip : map.createRToSister;
        } else if (corner == 'P') {
            return clicks == 1 ? map.togglePExpansion : map.getPerspectives().setPEditorPoint;
        } else if (corner === '') {
            // click on text
            return clicks == 1 ? self.showCornerTip : editText;
        } else {
            return function () {
                console.log('getCornerFunction: no function found for corner: ' + corner + '!');
            };
        }
    }

    // NB: in this case the thing is actually the TextBox, except in outline layout it is a Panel if the box is double-clicked...
    function editText(thing, corner) {
        if (!$scope.canEdit) {
            return null;
        }

        console.log('editText, thing: ' + thing);
        if (thing instanceof go.Panel) {
            // outline layout
            var part = thing.part;
            console.log('editText, part: ' + part);
            if (part instanceof go.Group && part.data && (part.data.layout == 'left' || part.data.layout == 'right')) {
                var textBlockName = 'externaltext-' + part.data.layout;
                var text = thing.part.findObject(textBlockName);
                if (text) {
                    thing = text;
                }
            }
        }
        map.getDiagram().commandHandler.editTextBlock(thing);
    }

    // ---------------- help tip functions - see also user.js, views/maps/help_tab ---------------

    // shows thingTip or one of the cornerXTips
    this.showCornerTip = function (thing, corner) {
        //console.log('showCornerTip');
        if (corner === '') {
            self.showHelpTip('thingTip');
        } else {
            self.showHelpTip('corner' + corner + 'Tip');
        }
    };

    this.showHelpTip = function (tip) {
        //console.log('showHelpTip: ' + tip);

        // don't show help if in presenter
        if (self.currentTabIs(self.TAB_ID_PRESENTER)) {
            return;
        }

        self.helpTip = tip;
        //$scope.safeApply();
        $('#help-tip').show();

        setTimeout(function () {
            $('#help-tip').fadeOut(500, function () {
                self.helpTip = null;
                //$scope.safeApply();
            });
        }, 5000);
    };

    // ------------ edit map UserTags ---------------

    $scope.tagging = new SandbankTagging($scope);

    this.editUserTags = function () {
        $scope.tagging.openModal([$scope.mapId], true, // show description field
        function () {
            map.getAutosave().saveNow('edit_usertags');
        } // on update
        );
    };

    // ------------ edit map sharing ---------------

    $scope.sharing = new SandbankSharing($scope);

    this.editMapShares = function () {
        $scope.sharing.openModal([$scope.mapId], function () {} // on update
        );
    };

    // ------------ print/export to image ---------------

    this.printSlides = function () {
        startSpinner();
        map.getPresenter().createSlideThumbnails();
        stopSpinner();
        setTimeout(function () {
            window.print();
        }, 500);
    };

    var MILLION = 1000 * 1000;

    this.exportToImage = function (format) {

        $scope.imageExportLoading = true;
        $('#export-image img').remove();
        map.getTemplates().showExportFooter();

        var rect = map.getDiagram().computePartsBounds(map.getDiagram().nodes).copy();

        var imageMB = rect.width * rect.height * 4 / MILLION; // 4 bytes/pixel
        //console.log('imageMB: ' + imageMB);

        // make the max size of the image 10MB
        // pngSize = imageMB * scale * scale
        // so max scale = sqrt(pngSize / imageMB)
        // These calculations don't seem to be right, but in practice using 500 here
        // we get a scale of 2.43 for an image 19984 x 3424 pixels
        // which results in a file size of 1.88 MB at 32 bits/pixel...
        // OR 28380 x 5196 pixels, scale = 3.41 => file size = 3.49 MB
        var scale = 4;
        if (imageMB) {
            scale = Math.min(4, Math.sqrt(50 / imageMB));
        }

        //console.log('image dimensions: ' + rect.width + ' x ' + rect.height + ', image bytes: ' + (rect.width * rect.height * 4) +
        //        ', imageMB: ' + imageMB + ', scale: ' + scale);

        $scope.showImageExport = true;

        var partsToExport = new go.List();
        partsToExport.addAll(map.getDiagram().nodes);
        partsToExport.addAll(map.getDiagram().links);
        partsToExport.remove(map.getPresenter().slideBlocker);

        var doImage = $timeout(function () {
            var img = map.getDiagram().makeImage({
                parts: partsToExport,
                maxSize: new go.Size((rect.width + 200) * scale, (rect.height + 200) * scale),
                scale: scale,
                padding: 100 * scale,
                background: '#ffffff'
            });

            $('#export-image').append(img);
            $scope.imageExportLoading = false;

            map.getTemplates().hideExportFooter();
        }, 100);
    };

    // --------- utils -------------

    this.splitLines = function (text) {
        return text.split(/\n/);
    };
};

//$scope.safeApply(function() {
//    self.state = data || defaultState;
//    //$scope.currentTab = self.state.currentTab;
//});

//$scope.safeApply(function() {
//    $scope.currentTab = tabID;
//});

//$scope.safeApply(function() {
//    self.state.currentTab = null; // TODO: trigger autosave
//    $scope.currentTab = null;
//});

//$scope.safeApply(function() {
//    if ($scope.currentTab == tabID) {
//        $scope.currentTab = null;
//    } else if (!self.disableTab(tabID)) {
//        $scope.currentTab = tabID;
//    }
//});

//$scope.safeApply(function() {
//    self.state.showNavigator = !self.state.showNavigator;
//});

//$scope.safeApply(function() {
//    self.zoomingToRegion = !self.zoomingToRegion;
//});

},{}],29:[function(require,module,exports){
'use strict';

window.UserCtrl = function ($scope) {

    // query string params
    $scope.params = URI(window.location).query(true);

    // auto-open thinkquery?
    $scope.thinkquery = $scope.params.thinkquery ? true : false;

    $scope.userId = window.userId; // set in layouts/user
    $scope.userIsAdmin = window.userIsAdmin;
    $scope.userName = '';
    $scope.userProfile = null;
    $scope.profileEditStatus = '';
    $scope.password = '';
    $scope.passwordConfirm = '';

    $scope.getNewWindowName = function (action, mapId) {
        if (action == 'VIEW_MAP') {
            return 'VIEW_MAP_' + mapId;
        }
    };

    // show/hide tests UI and model debug form
    $scope.showTests = false;
    $scope.showModel = false;

    $scope.toggleShowTests = function () {
        $scope.showTests = !$scope.showTests;
    };
    $scope.toggleShowModel = function () {
        $scope.showModel = !$scope.showModel;
    };

    $scope.setUserId = function (id) {
        $scope.userId = id;
    };

    function init() {
        window.addEventListener('resize', fixRowHeights);
    }

    // make all cells in a row the same height
    function fixRowHeights() {}

    $scope.loadUserProfile = function (callback) {
        if ($scope.userId) {
            var url = '/users/' + $scope.userId + '/profile.json';
            window.startSpinner();
            $http.get(url).then(function (response) {
                // success
                $scope.userProfile = response.data;
                initSelectedAdminTags();
                initSelectedFollowableOrgs();
                if ($scope.ccsTagging) {
                    $scope.ccsTagging.loadCcsTags();
                }
                window.stopSpinner();
                if (callback) {
                    callback.call();
                }
                fixRowHeights();
            }, function (reason) {
                // error
                window.stopSpinner();
                alert('Could not load user profile data');
            });
        }
    };

    $scope.loadUserProfile();

    // -------------- courses/subscriptions ------------------

    // open the Stripe Checkout dialog and get a token
    // NB: amount is stored in the Stripe plan definition
    $scope.addSubscription = function (plan) {
        var handler = StripeCheckout.configure({
            key: $scope.userProfile.account.stripeKey,
            name: 'Subscribe to MetaMap',
            image: '/assets/badge-logo-64.png',
            description: plan.name,
            panelLabel: 'Pay {{amount}}/' + plan.interval,
            amount: plan.price,
            allowRememberMe: false,
            email: $scope.userProfile.user.email,
            token: function token(_token, args) {
                console.log('token: ', _token);
                window.startSpinner();
                $http.post('/charges/subscribe', {
                    plan_id: plan.code,
                    token_id: _token.id
                }).then(function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.success('Subscription created');
                    });
                }, function () {
                    $scope.loadUserProfile(function () {
                        alertify.error('Subscription could not be created');
                    });
                });
            }
        });
        handler.open();
    };

    // for buy-course-button directive
    $scope.getBuyButtonLabel = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            return 'Free';
        } else if (course = getEnrolledCourse(id)) {
            return 'Enrolled';
        } else if (course = getEnrollableCourse(id)) {
            return 'Enroll - $' + (course.price / 100).toFixed(2);
        } else {
            return '';
        }
    };

    $scope.getCourseStatusSummary = function (id) {
        var course = $scope.getCourse(id);
        if (course) {
            var text = course.stepsCompleted + ' of ' + course.steps + ' steps completed';
            if (course.enrolment) {
                text = 'Enrolled ' + course.enrolment.date + (course.enrolment.stripeData.refunded ? ' (Refunded)' : '') + ' - ' + text;
            }
            return course.code + ' - ' + text;
        } else {
            return null;
        }
    };

    $scope.getCourseCompletedPercent = function (id) {
        var course = $scope.getCourse(id);
        if (course) {
            return course.stepsCompletedPercent;
        } else {
            return null;
        }
    };

    $scope.maybeBuyCourse = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            window.location.href = '/courses/' + course.id;
        } else if (course = getEnrolledCourse(id)) {
            window.location.href = '/courses/' + course.id;
        } else if (course = getEnrollableCourse(id)) {
            $scope.buyCourse(course);
        }
    };

    $scope.getCourse = function (id) {
        var course;
        if (course = getFreeCourse(id)) {
            return course;
        } else if (course = getEnrolledCourse(id)) {
            return course;
        } else if (course = getEnrollableCourse(id)) {
            return course;
        }
        return null;
    };

    function getFreeCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.freeAccessibleCourses, function (course) {
            return course.id == id && course.enrolment == undefined;
        });
    }

    function getEnrolledCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.freeAccessibleCourses, function (course) {
            return course.id == id && course.enrolment !== undefined;
        });
    }

    function getEnrollableCourse(id) {
        return $scope.userProfile && _.find($scope.userProfile.nonFreeAccessibleCourses, function (course) {
            return course.id == id;
        });
    }

    // open the Stripe Checkout dialog and get a token
    // NB: amount is passed from our course definition
    $scope.buyCourse = function (course) {
        var handler = StripeCheckout.configure({
            key: $scope.userProfile.account.stripeKey,
            name: 'Enroll in Course',
            image: '/assets/badge-logo-64.png',
            description: course.code,
            amount: course.price,
            allowRememberMe: false,
            email: $scope.userProfile.user.email,
            token: function token(_token2, args) {
                console.log('token: ', _token2);
                window.startSpinner();
                $http.post('/charges/buy_course', {
                    course_code: course.code,
                    course_price: course.price,
                    token_id: _token2.id
                }).then(function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.success('Course purchased');
                    });

                    // reload page to handle stripe bug (?) - links not clickable
                    window.setTimeout(function () {
                        window.location.reload();
                    }, 1000);
                }, function (response) {
                    $scope.loadUserProfile(function () {
                        alertify.error('Course purchase could not be completed');
                        console.log('stripe error: ', response);
                    });
                });
            }
        });
        handler.open();
    };

    $scope.cancelSubscription = function (subscription) {
        window.startSpinner();
        $http['delete']('/charges/unsubscribe?subscription_id=' + subscription.id).then(function (response) {
            $scope.loadUserProfile(function () {
                alertify.success('Subscription cancelled');
            });
        }, function () {
            $scope.loadUserProfile(function () {
                alertify.error('Subscription could not be cancelled');
            });
        });
    };

    // debug/test only
    $scope.clearCustomer = function () {
        window.startSpinner();
        $http['delete']('/charges/clear_customer').then(function (response) {
            $scope.loadUserProfile(function () {
                alertify.success('Customer cleared');
            });
        }, function () {
            $scope.loadUserProfile(function () {
                alertify.error('Customer could not be cleared');
            });
        });
    };

    // -------------- points and badges ----------------

    $scope.hasCurrentBadge = function (key, level) {
        return $scope.userProfile && $scope.userProfile.badges.current[key] == level;
    };

    $scope.hasNewBadge = function (key, level) {
        return $scope.userProfile && $scope.userProfile.badges['new'][key] == level;
    };

    $scope.hasNewBadges = function () {
        return $scope.userProfile && _.keys($scope.userProfile.badges['new']).length > 0;
    };

    $scope.getBadgeDefinition = function (key) {
        return _.findWhere($scope.userProfile.badges.definitions, {
            key: key
        });
    };

    // -------------- tutorial -----------------

    try {
        $scope.tutorialEnabled = function () {
            return window.mapData !== undefined;
        };

        // start tutorial:
        var _tutorial = new SandbankEditor.Tutorial();

        $scope.startTutorial = function () {
            _tutorial.start();
        };
    } catch (e) {}

    // -------------- feedback form -----------------

    $scope.feedback = '';

    $scope.toggleFeedback = function () {
        $('#feedback-dropdown').slideToggle('fast').find('textarea').get(0).focus();
    };

    $scope.submitFeedback = function () {
        if ($scope.feedback === '') {
            return; // empty input...
        }

        $.ajax({
            type: 'POST',
            url: '/users/feedback',
            data: {
                url: window.location.href,
                feedback: $scope.feedback
            },
            success: function success() {
                $scope.feedback = '';
                alert('Thank you for your feedback!');
            },
            error: function error() {
                console.error('error sending feedback: ', arguments);
            }
        });

        $('#feedback-dropdown').slideToggle('fast');
    };

    // --------- user's user tags -----------

    // NB: this is similar to maps tagging in tagging.js - but simpler, as we do not have to deal with
    // multiple taggable items, which means tracking existing vs. new tags, etc...

    $scope.newTag = {
        name: ''
    };

    // tag autocomplete
    $scope.getUserTags = function (viewValue) {
        var url = '/user_tags/list.json?q=' + viewValue;
        return $http.get(url).then(function (response) {
            return response.data.tags;
        });
    };

    $scope.updateUserUserTags = function () {
        var tagList = _.pluck($scope.userProfile.userTags, 'name').join(',');
        $http.put('/user_tags/update_user_user_tags', [tagList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'Tags saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save tags';
        });
    };

    $scope.deleteTag = function (tag) {
        var i = _.indexOf($scope.userProfile.userTags, tag);
        $scope.userProfile.userTags.splice(i, 1);
        $scope.updateUserUserTags();
    };

    $scope.tagSelected = function (item, model, label) {
        //console.log('tagSelected: ', item, model, label);
        $scope.addTag(item.name);
    };

    $scope.editingTagKeypress = function (e) {
        if (e.which == 13) {
            $scope.addTag($scope.newTag.name);
        }
    };

    $scope.addTag = function (tagName) {
        $scope.userProfile.userTags.push({
            name: tagName
        });
        $scope.newTag.name = '';
        $scope.updateUserUserTags();
    };

    // --------- user's/map's CCS tags -----------

    // this manages CCS tags for either the current user or the current map,
    // depending which page we're on - mapId gets overridden in editor.js if we're editing a map

    try {
        $scope.ccsTagging = new SandbankCcsTagging($scope);
        $scope.ccsTagging.mapId = null;
    } catch (e) {}

    // --------- user's admin tags -----------

    // key (index): admin tag ID; value: true/false (if user follows the admin tag)
    $scope.selectedUserAdminTags = [];

    function initSelectedAdminTags() {
        $scope.selectedUserAdminTags = [];
        _.each($scope.userProfile.adminTags, function (tag) {
            if (_.findWhere($scope.userProfile.userAdminTags, {
                id: tag.id
            })) {
                $scope.selectedUserAdminTags[tag.id] = true;
            }
        });
    }

    $scope.updateUserAdminTags = function () {
        var selectedTagNames = _.map($scope.userProfile.adminTags, function (tag) {
            return $scope.selectedUserAdminTags[tag.id] ? tag.name : null;
        });
        var tagList = _.without(selectedTagNames, null).join(',');
        $http.put('/admin_tags/update_user_admin_tags', [tagList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'Interests saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save interests';
        });
    };

    // --------- user's followed orgs -----------

    // key (index): org ID; value: true/false (if user follows the org)
    $scope.selectedFollowableOrganizations = [];

    $scope.userIsFollowingOrg = function (id) {
        return $scope.selectedFollowableOrganizations[id];
    };

    $scope.toggleUserFollowingOrg = function (id) {
        if (!$scope.selectedFollowableOrganizations[id] || confirm('Stop following this ThinkNation?')) {
            $scope.selectedFollowableOrganizations[id] = !$scope.selectedFollowableOrganizations[id];
            $scope.updateFollowedOrganizations();
        }
    };

    function initSelectedFollowableOrgs() {
        $scope.selectedFollowableOrganizations = [];
        _.each($scope.userProfile.followedOrganizations, function (org) {
            if (_.findWhere($scope.userProfile.followableOrganizations, {
                id: org.id
            })) {
                $scope.selectedFollowableOrganizations[org.id] = true;
            }
        });
    }

    $scope.updateFollowedOrganizations = function () {
        var selectedOrgIds = _.map($scope.userProfile.followableOrganizations, function (org) {
            return $scope.selectedFollowableOrganizations[org.id] ? org.id : null;
        });
        var orgIdList = _.without(selectedOrgIds, null).join(',');
        $http.put('/organization_follows/update_user_organization_follows', [orgIdList]).then(function (response) {
            $scope.loadUserProfile();
            $scope.profileEditStatus = 'ThinkNations saved';
        }, function () {
            $scope.profileEditStatus = 'Could not save ThinkNations';
        });
    };

    // --------- user's org memberships -----------

    $scope.joinNation = new SandbankJoinNation($scope);

    function getMembershipForOrg(id) {
        return _.findWhere($scope.userProfile.memberships, {
            organizationId: id
        });
    }

    $scope.userIsMemberOfOrg = function (id) {
        if ($scope.userProfile) {
            return getMembershipForOrg(id) != undefined;
        } else {
            return false;
        }
    };

    $scope.toggleUserMemberOfOrg = function (id, name) {
        if ($scope.userIsMemberOfOrg(id)) {
            if (confirm('Remove your membership in this ThinkNation?')) {
                var membership = getMembershipForOrg(id);
                $http['delete']('/memberships/' + membership.id + '.json').then(function (response) {
                    $scope.loadUserProfile();
                });
            }
        } else {
            $scope.joinNation.openModal(id, name);
        }
    };

    // ------------ following other users ---------------

    $scope.followUser = function (user) {
        $http.post('/user_follows.json', {
            followee_id: user.id
        }).then(function (response) {
            user.followId = response.data;
            alertify.success('You are now following ' + user.name);
        }, function () {});
    };

    $scope.unfollowUser = function (user) {
        $http['delete']('/user_follows/' + user.followId + '.json').then(function (response) {
            user.followId = null;
            alertify.success('You are no longer following ' + user.name);
        }, function () {});
    };

    // ------------ following tags ---------------

    function followTag(controller, tag) {
        $http.post('/' + controller + '/' + tag.id + '/follow.json', {
            id: tag.id
        }).then(function (response) {
            tag.following = true;
            alertify.success('You are now following ' + tag.name);
        }, function () {});
    }

    function unfollowTag(controller, tag) {
        $http['delete']('/' + controller + '/' + tag.id + '/unfollow.json').then(function (response) {
            tag.following = false;
            alertify.success('You are no longer following ' + tag.name);
        }, function () {});
    }

    $scope.followUserTag = function (tag) {
        followTag('user_tags', tag);
    };
    $scope.unfollowUserTag = function (tag) {
        unfollowTag('user_tags', tag);
    };

    $scope.followAdminTag = function (tag) {
        followTag('admin_tags', tag);
    };
    $scope.unfollowAdminTag = function (tag) {
        unfollowTag('admin_tags', tag);
    };

    $scope.followCcsTag = function (tag) {
        followTag('common_core_standards', tag);
    };
    $scope.unfollowCcsTag = function (tag) {
        unfollowTag('common_core_standards', tag);
    };

    // ------------ auto-save user profile ---------------

    // don't let autosave be triggered more than every N milliseconds...
    $scope.autosave = _.debounce(autosaveNow, 2000);

    function autosaveNow() {
        //console.log('autosaving user profile');
        var data = {
            email: $scope.userProfile.user.email,
            alt_email: $scope.userProfile.user.altEmail,
            first_name: $scope.userProfile.user.firstName,
            last_name: $scope.userProfile.user.lastName,
            about_me: $scope.userProfile.user.aboutMe
        };
        if ($scope.passwordsMatch() && $scope.password.length) {
            data.password = $scope.password;
            data.password_confirmation = $scope.password;
        }

        startSpinner();
        $scope.profileEditStatus = 'Saving...';
        $http.put('/users/' + $scope.userId, data).then(function (response) {
            stopSpinner();
            if (_.has(data, 'password')) {
                $scope.profileEditStatus = 'Profile and password saved';
                console.log($scope.profileEditStatus);
            } else {
                $scope.profileEditStatus = 'Profile saved';
                console.log($scope.profileEditStatus);
            }
        }, function () {
            stopSpinner();
            $scope.profileEditStatus = 'Could not save profile';
        });
    }

    $scope.passwordsMatch = function () {
        return !$scope.password.length && !$scope.passwordConfirm.length || $scope.password == $scope.passwordConfirm;
    };

    // ------------ upload avatar ---------------

    // using: https://github.com/danialfarid/angular-file-upload
    $scope.onAvatarFileSelect = function ($files) {
        startSpinner();
        //$files: an array of files selected, each file has name, size, and type.
        for (var i = 0; i < $files.length; i++) {
            var file = $files[i];
            $scope.upload = $upload.upload({
                url: 'users/' + userId,
                method: 'PUT',
                withCredentials: true,
                file: file, // or list of files: $files for html5 only
                fileFormDataName: 'user[avatar]'
            }).success(function (data, status, headers, config) {
                $scope.loadUserProfile();
                $scope.profileEditStatus = 'Photo updated';
                stopSpinner();
            }).error(function () {
                stopSpinner();
                $scope.profileEditStatus = 'Error: Could not upload photo';
            })
            //.then(success, error, progress);
            ;
        }
    };

    // --------------- view helpers -------------------

    // returns e.g. "a day ago"
    // (NB: now is obtained from the DB to ensure that we have both dates in UTC;
    //    also, SQL vs. ruby dates need to be coerced into a similar format, both in UTC - see feed.json.jbuilder)
    $scope.getEventTime = function (t, now) {
        var time = moment(t, 'YYYY-MM-DD HH:mm:ss.SSS');
        var nowtime = moment(now, 'YYYY-MM-DD HH:mm:ss.SSS');
        // console.log('t:       ' + t);
        // console.log('now:     ' + now);
        // console.log('time:    ' + time.format()); // + ' ' + time.isValid());
        // console.log('nowtime: ' + nowtime.format()); // + ' ' + nowtime.isValid());
        return time.from(nowtime);
    };

    // --------------- notifications -------------------

    $scope.getNotificationFeedUrl = function (notification) {
        if (notification.actions.length) {
            var action = notification.actions[0];
            if (action.action == 'LIKE') {
                return '/social?like_id=' + action.likeId;
            } else if (action.action == 'COMMENT') {
                return '/social?comment_id=' + action.commentId;
            } else if (action.action == 'SHARE_INDIVIDUAL') {
                return '/maps/' + action.mapId;
            } else if (action.action == 'SHARE_PUBLIC') {
                return '/social?share_id=' + action.shareId;
            }
        }
        return '';
    };

    $scope.deleteNotification = function (notification) {
        $http['delete']('/notifications/' + notification.id + '.json').then(function (response) {
            // success
            notification.deleted = true;
        }, function (reason) {
            // error
            alert('Could not delete notification');
        });
    };

    $scope.notificationVerb = function (action) {
        var verbs = {
            LIKE: 'liked this:',
            COMMENT: 'commented on this:',
            SHARE_INDIVIDUAL: 'shared a MetaMap with you',
            SHARE_PUBLIC: 'shared a MetaMap with everyone',
            MAP_FOLLOW: 'followed a MetaMap:',
            USER_FOLLOW: 'followed you'
        };
        return verbs[action];
    };

    // ------------ utility functions ---------------

    // handy function for use with ng-class on radio buttons
    $scope.classIf = function (klass, b) {
        //console.log('classIf: ' + klass + ', ' + b);
        return b ? klass : '';
    };

    // avoid '$apply already in progress' error (source: https://coderwall.com/p/ngisma)
    $scope.safeApply = function (fn) {
        //console.log('safeApply on scope: ' + $scope);

        // TODO? restore non-Angular version of this method
        //var phase = this.$root.$$phase;
        //if (phase == '$apply' || phase == '$digest') {
        if (fn && typeof fn === 'function') {
            fn();
        }
        //} else {
        //    this.$apply(fn);
        //}
    };

    // source: http://ctrlq.org/code/19616-detect-touch-screen-javascript
    $scope.isTouchDevice = function () {
        return 'ontouchstart' in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
    };

    init();
};

// window.setTimeout(function() {
//     $('.row-height').each(function() { 
//         var highestBox = 0;
//         $('> div', this).each(function(){
//             if ($(this).height() > highestBox)
//                 highestBox = $(this).height();
//         }); 
//         $('> div', this).height(highestBox);
//     });       
// }, 300);

},{}],30:[function(require,module,exports){
'use strict';

var status = {
    LAST_UPDATED: '',
    READ_ONLY: 'View only',
    SAVING: 'Saving...',
    SAVE_OK: 'All changes saved',
    SAVE_FAILED: 'Changes could not be saved'
};

Object.freeze(status);

module.exports = status;

},{}],31:[function(require,module,exports){
'use strict';

var TABS = {
    TAB_ID_PRESENTER: 'presenter-tab',
    TAB_ID_ANALYTICS_MAP: 'analytics-tab-map',
    TAB_ID_ANALYTICS_THING: 'analytics-tab-thing',
    TAB_ID_PERSPECTIVES: 'perspectives-tab',
    TAB_ID_DISTINCTIONS: 'distinctions-tab',
    TAB_ID_ATTACHMENTS: 'attachments-tab',
    TAB_ID_GENERATOR: 'generator-tab',
    TAB_ID_STANDARDS: 'standards-tab'
};
Object.freeze(TABS);

module.exports = TABS;

},{}],32:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Auth0Lock = require('auth0-lock');

var Auth0 = (function () {
    function Auth0() {
        _classCallCheck(this, Auth0);

        this.lock = new Auth0Lock('wsOnart23yViIShqT4wfJ18w2vt2cl32', 'metamap.auth0.com');
        this.lock.on('loading ready', function () {
            for (var _len = arguments.length, e = Array(_len), _key = 0; _key < _len; _key++) {
                e[_key] = arguments[_key];
            }
        });
    }

    _createClass(Auth0, [{
        key: 'login',
        value: function login() {
            var that = this;

            var promise = new Promise(function (fulfill, reject) {
                that.getSession().then(function (profile) {
                    if (profile) {
                        fulfill(profile);
                    } else {
                        that.lock.show({
                            closable: false,
                            loginAfterSignup: true,
                            authParams: {
                                scope: 'openid offline_access'
                            }
                        }, function (err, profile, id_token, ctoken, opt, refresh_token) {
                            if (err) {
                                reject(err);
                            } else {
                                localforage.setItem('id_token', id_token);
                                localforage.setItem('profile', profile);
                                localforage.setItem('refresh_token', refresh_token);
                                that.id_token = id_token;
                                that.profile = profile;
                                that.refresh_token = refresh_token;
                                fulfill(profile);
                            }
                        });
                    }
                });
            });
            return promise;
        }
    }, {
        key: 'linkAccount',
        value: function linkAccount() {
            var that = this;
            this.lock.show({
                callbackURL: 'https://popping-fire-897.firebaseapp.com/',
                dict: {
                    signin: {
                        title: 'Link with another account'
                    }
                },
                authParams: {
                    access_token: that.id_token || that.profile.identities[0].access_token
                }
            });
        }
    }, {
        key: 'getSession',
        value: function getSession() {
            var that = this;
            var getProfile = function getProfile(id_token, fulfill, reject) {
                return that.lock.getProfile(id_token, function (err, profile) {
                    if (err) {
                        reject(err);
                    } else {
                        localforage.setItem('id_token', id_token);
                        localforage.setItem('profile', profile);
                        that.id_token = id_token;
                        that.profile = profile;
                        fulfill(profile, id_token);
                    }
                });
            };
            var promise = new Promise(function (fulfill, reject) {
                var fulfilled = false;
                localforage.getItem('refresh_token').then(function (token) {
                    if (token) {
                        that.refresh_token = token;
                        that.lock.getClient().refreshToken(token, function (a, tokObj) {
                            getProfile(tokObj.id_token, fulfill, reject);
                        }, function (error) {
                            reject(error);
                        });
                    } else {
                        localforage.getItem('id_token').then(function (id_token) {
                            if (token) {
                                getProfile(id_token, fulfill, reject);
                            } else {
                                fulfill(null);
                            }
                        });
                    }
                });
            });
            return promise;
        }
    }, {
        key: 'logout',
        value: function logout() {
            localforage.removeItem('id_token');
            localforage.removeItem('refresh_token');
            localforage.removeItem('profile');
            this.profile = null;
            window.location.reload();
        }
    }]);

    return Auth0;
})();

module.exports = Auth0;

},{"auth0-lock":undefined}],33:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Firebase = require('firebase');

var MetaFire = (function () {
    function MetaFire() {
        _classCallCheck(this, MetaFire);

        this.fb = new Firebase('https://popping-fire-897.firebaseio.com');
    }

    _createClass(MetaFire, [{
        key: 'init',
        value: function init() {
            var _this = this;

            var that = this;
            var ret = new Promise(function (fulfill, reject) {
                localforage.getItem('id_token').then(function (id_token) {
                    MetaMap.Auth0.getSession().then(function (profile) {

                        MetaMap.Auth0.lock.getClient().getDelegationToken({
                            target: profile.clientID,
                            id_token: id_token,
                            api_type: 'firebase'
                        }, function (err, delegationResult) {
                            that.firebase_token = delegationResult.id_token;
                            localforage.setItem('firebase_token', that.firebase_token);
                            _this.fb.authWithCustomToken(that.firebase_token, function (error, authData) {
                                if (error) {
                                    reject(error);
                                } else {
                                    fulfill(authData);
                                }
                            });
                        });
                    });
                });
            });
            return ret;
        }
    }, {
        key: 'getChild',
        value: function getChild(path) {
            return this.fb.child(path);
        }
    }, {
        key: 'getData',
        value: function getData(path) {
            var child = this.fb;
            if (path) {
                child = this.getChild(path);
            }
            var promise = new Promise(function (resolve, reject) {
                child.on('value', function (snapshot) {
                    resolve(snapshot.val());
                }, function (error) {
                    reject(error);
                });
            });

            return promise;
        }
    }, {
        key: 'setData',
        value: function setData(data, path) {
            var child = this.fb;
            if (path) {
                child = this.getChild(path);
            }
            return child.set(data);
        }
    }, {
        key: 'logout',
        value: function logout() {
            this.fb.unauth();
        }
    }]);

    return MetaFire;
})();

module.exports = MetaFire;

},{"firebase":undefined}],34:[function(require,module,exports){
'use strict';

var googleAnalytics = function googleAnalytics(config) {
    var apiKey, e, r;
    if (config == null) {
        config = {};
    }
    apiKey = config.GOOGLE_ANALYTICS_TRACKING_ID;
    if (apiKey && window.location.hostname !== 'localhost') {
        window.GoogleAnalyticsObject = 'ga';
        window.ga || (window.ga = function () {
            (window.ga.q = window.ga.q || []).push(arguments);
        });
        window.ga.ga = +new Date();
        e = document.createElement('script');
        r = document.getElementsByTagName('script')[0];
        e.src = '//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e, r);
        ga('create', apiKey);
        return ga('send', 'pageview');
    }
};

module.exports = googleAnalytics;

},{}],35:[function(require,module,exports){
"use strict";

var newRelic = function newRelic(config) {
    var appId, licenseKey;
    if (config == null) {
        config = {};
    }
    licenseKey = config.NEW_RELIC_LICENSE_KEY;
    appId = config.NEW_RELIC_APPLICATION_ID;
    if (licenseKey && appId && window.location.hostname !== "localhost") {
        return (window.NREUM || (NREUM = {}), __nr_require = (function (t, e, n) {
            function r(n) {
                if (!e[n]) {
                    var o = e[n] = { exports: {} };t[n][0].call(o.exports, function (e) {
                        var o = t[n][1][e];return r(o ? o : e);
                    }, o, o.exports);
                }return e[n].exports;
            }if ("function" == typeof __nr_require) return __nr_require;for (var o = 0; o < n.length; o++) r(n[o]);return r;
        })({ QJf3ax: [function (t, e) {
                function n(t) {
                    function e(e, n, a) {
                        t && t(e, n, a), a || (a = {});for (var c = s(e), f = c.length, u = i(a, o, r), d = 0; f > d; d++) c[d].apply(u, n);return u;
                    }function a(t, e) {
                        f[t] = s(t).concat(e);
                    }function s(t) {
                        return f[t] || [];
                    }function c() {
                        return n(e);
                    }var f = {};return { on: a, emit: e, create: c, listeners: s, _events: f };
                }function r() {
                    return {};
                }var o = "nr@context",
                    i = t("gos");e.exports = n();
            }, { gos: "7eSDFh" }], ee: [function (t, e) {
                e.exports = t("QJf3ax");
            }, {}], 3: [function (t) {
                function e(t, e, n, i, s) {
                    try {
                        c ? c -= 1 : r("err", [s || new UncaughtException(t, e, n)]);
                    } catch (f) {
                        try {
                            r("ierr", [f, new Date().getTime(), !0]);
                        } catch (u) {}
                    }return "function" == typeof a ? a.apply(this, o(arguments)) : !1;
                }function UncaughtException(t, e, n) {
                    this.message = t || "Uncaught error with no additional information", this.sourceURL = e, this.line = n;
                }function n(t) {
                    r("err", [t, new Date().getTime()]);
                }var r = t("handle"),
                    o = t(5),
                    i = t("ee"),
                    a = window.onerror,
                    s = !1,
                    c = 0;t("loader").features.err = !0, window.onerror = e, NREUM.noticeError = n;try {
                    throw new Error();
                } catch (f) {
                    "stack" in f && (t(1), t(4), "addEventListener" in window && t(2), window.XMLHttpRequest && XMLHttpRequest.prototype && XMLHttpRequest.prototype.addEventListener && t(3), s = !0);
                }i.on("fn-start", function () {
                    s && (c += 1);
                }), i.on("fn-err", function (t, e, r) {
                    s && (this.thrown = !0, n(r));
                }), i.on("fn-end", function () {
                    s && !this.thrown && c > 0 && (c -= 1);
                }), i.on("internal-error", function (t) {
                    r("ierr", [t, new Date().getTime(), !0]);
                });
            }, { 1: 8, 2: 5, 3: 9, 4: 7, 5: 21, ee: "QJf3ax", handle: "D5DuLP", loader: "G9z0Bl" }], 4: [function (t) {
                function e() {}if (window.performance && window.performance.timing && window.performance.getEntriesByType) {
                    var n = t("ee"),
                        r = t("handle"),
                        o = t(2);t("loader").features.stn = !0, t(1), n.on("fn-start", function (t) {
                        var e = t[0];e instanceof Event && (this.bstStart = Date.now());
                    }), n.on("fn-end", function (t, e) {
                        var n = t[0];n instanceof Event && r("bst", [n, e, this.bstStart, Date.now()]);
                    }), o.on("fn-start", function (t, e, n) {
                        this.bstStart = Date.now(), this.bstType = n;
                    }), o.on("fn-end", function (t, e) {
                        r("bstTimer", [e, this.bstStart, Date.now(), this.bstType]);
                    }), n.on("pushState-start", function () {
                        this.time = Date.now(), this.startPath = location.pathname + location.hash;
                    }), n.on("pushState-end", function () {
                        r("bstHist", [location.pathname + location.hash, this.startPath, this.time]);
                    }), "addEventListener" in window.performance && (window.performance.addEventListener("webkitresourcetimingbufferfull", function () {
                        r("bstResource", [window.performance.getEntriesByType("resource")]), window.performance.webkitClearResourceTimings();
                    }, !1), window.performance.addEventListener("resourcetimingbufferfull", function () {
                        r("bstResource", [window.performance.getEntriesByType("resource")]), window.performance.clearResourceTimings();
                    }, !1)), document.addEventListener("scroll", e, !1), document.addEventListener("keypress", e, !1), document.addEventListener("click", e, !1);
                }
            }, { 1: 6, 2: 8, ee: "QJf3ax", handle: "D5DuLP", loader: "G9z0Bl" }], 5: [function (t, e) {
                function n(t) {
                    i.inPlace(t, ["addEventListener", "removeEventListener"], "-", r);
                }function r(t) {
                    return t[1];
                }var o = (t(1), t("ee").create()),
                    i = t(2)(o),
                    a = t("gos");if ((e.exports = o, n(window), "getPrototypeOf" in Object)) {
                    for (var s = document; s && !s.hasOwnProperty("addEventListener");) s = Object.getPrototypeOf(s);s && n(s);for (var c = XMLHttpRequest.prototype; c && !c.hasOwnProperty("addEventListener");) c = Object.getPrototypeOf(c);c && n(c);
                } else XMLHttpRequest.prototype.hasOwnProperty("addEventListener") && n(XMLHttpRequest.prototype);o.on("addEventListener-start", function (t) {
                    if (t[1]) {
                        var e = t[1];"function" == typeof e ? this.wrapped = t[1] = a(e, "nr@wrapped", function () {
                            return i(e, "fn-", null, e.name || "anonymous");
                        }) : "function" == typeof e.handleEvent && i.inPlace(e, ["handleEvent"], "fn-");
                    }
                }), o.on("removeEventListener-start", function (t) {
                    var e = this.wrapped;e && (t[1] = e);
                });
            }, { 1: 21, 2: 22, ee: "QJf3ax", gos: "7eSDFh" }], 6: [function (t, e) {
                var n = (t(2), t("ee").create()),
                    r = t(1)(n);e.exports = n, r.inPlace(window.history, ["pushState"], "-");
            }, { 1: 22, 2: 21, ee: "QJf3ax" }], 7: [function (t, e) {
                var n = (t(2), t("ee").create()),
                    r = t(1)(n);e.exports = n, r.inPlace(window, ["requestAnimationFrame", "mozRequestAnimationFrame", "webkitRequestAnimationFrame", "msRequestAnimationFrame"], "raf-"), n.on("raf-start", function (t) {
                    t[0] = r(t[0], "fn-");
                });
            }, { 1: 22, 2: 21, ee: "QJf3ax" }], 8: [function (t, e) {
                function n(t, e, n) {
                    var r = t[0];"string" == typeof r && (r = new Function(r)), t[0] = o(r, "fn-", null, n);
                }var r = (t(2), t("ee").create()),
                    o = t(1)(r);e.exports = r, o.inPlace(window, ["setTimeout", "setInterval", "setImmediate"], "setTimer-"), r.on("setTimer-start", n);
            }, { 1: 22, 2: 21, ee: "QJf3ax" }], 9: [function (t, e) {
                function n() {
                    c.inPlace(this, d, "fn-");
                }function r(t, e) {
                    c.inPlace(e, ["onreadystatechange"], "fn-");
                }function o(t, e) {
                    return e;
                }var i = t("ee").create(),
                    a = t(1),
                    s = t(2),
                    c = s(i),
                    f = s(a),
                    u = window.XMLHttpRequest,
                    d = ["onload", "onerror", "onabort", "onloadstart", "onloadend", "onprogress", "ontimeout"];e.exports = i, window.XMLHttpRequest = function (t) {
                    var e = new u(t);try {
                        i.emit("new-xhr", [], e), f.inPlace(e, ["addEventListener", "removeEventListener"], "-", function (t, e) {
                            return e;
                        }), e.addEventListener("readystatechange", n, !1);
                    } catch (r) {
                        try {
                            i.emit("internal-error", [r]);
                        } catch (o) {}
                    }return e;
                }, window.XMLHttpRequest.prototype = u.prototype, c.inPlace(XMLHttpRequest.prototype, ["open", "send"], "-xhr-", o), i.on("send-xhr-start", r), i.on("open-xhr-start", r);
            }, { 1: 5, 2: 22, ee: "QJf3ax" }], 10: [function (t) {
                function e(t) {
                    if ("string" == typeof t && t.length) return t.length;if ("object" != typeof t) return void 0;if ("undefined" != typeof ArrayBuffer && t instanceof ArrayBuffer && t.byteLength) return t.byteLength;if ("undefined" != typeof Blob && t instanceof Blob && t.size) return t.size;if ("undefined" != typeof FormData && t instanceof FormData) return void 0;try {
                        return JSON.stringify(t).length;
                    } catch (e) {
                        return void 0;
                    }
                }function n(t) {
                    var n = this.params,
                        r = this.metrics;if (!this.ended) {
                        this.ended = !0;for (var i = 0; c > i; i++) t.removeEventListener(s[i], this.listener, !1);if (!n.aborted) {
                            if ((r.duration = new Date().getTime() - this.startTime, 4 === t.readyState)) {
                                n.status = t.status;var a = t.responseType,
                                    f = "arraybuffer" === a || "blob" === a || "json" === a ? t.response : t.responseText,
                                    u = e(f);if ((u && (r.rxSize = u), this.sameOrigin)) {
                                    var d = t.getResponseHeader("X-NewRelic-App-Data");d && (n.cat = d.split(", ").pop());
                                }
                            } else n.status = 0;r.cbTime = this.cbTime, o("xhr", [n, r, this.startTime]);
                        }
                    }
                }function r(t, e) {
                    var n = i(e),
                        r = t.params;r.host = n.hostname + ":" + n.port, r.pathname = n.pathname, t.sameOrigin = n.sameOrigin;
                }if (window.XMLHttpRequest && XMLHttpRequest.prototype && XMLHttpRequest.prototype.addEventListener && !/CriOS/.test(navigator.userAgent)) {
                    t("loader").features.xhr = !0;var o = t("handle"),
                        i = t(2),
                        a = t("ee"),
                        s = ["load", "error", "abort", "timeout"],
                        c = s.length,
                        f = t(1);t(4), t(3), a.on("new-xhr", function () {
                        this.totalCbs = 0, this.called = 0, this.cbTime = 0, this.end = n, this.ended = !1, this.xhrGuids = {};
                    }), a.on("open-xhr-start", function (t) {
                        this.params = { method: t[0] }, r(this, t[1]), this.metrics = {};
                    }), a.on("open-xhr-end", function (t, e) {
                        "loader_config" in NREUM && "xpid" in NREUM.loader_config && this.sameOrigin && e.setRequestHeader("X-NewRelic-ID", NREUM.loader_config.xpid);
                    }), a.on("send-xhr-start", function (t, n) {
                        var r = this.metrics,
                            o = t[0],
                            i = this;if (r && o) {
                            var f = e(o);f && (r.txSize = f);
                        }this.startTime = new Date().getTime(), this.listener = function (t) {
                            try {
                                "abort" === t.type && (i.params.aborted = !0), ("load" !== t.type || i.called === i.totalCbs && (i.onloadCalled || "function" != typeof n.onload)) && i.end(n);
                            } catch (e) {
                                try {
                                    a.emit("internal-error", [e]);
                                } catch (r) {}
                            }
                        };for (var u = 0; c > u; u++) n.addEventListener(s[u], this.listener, !1);
                    }), a.on("xhr-cb-time", function (t, e, n) {
                        this.cbTime += t, e ? this.onloadCalled = !0 : this.called += 1, this.called !== this.totalCbs || !this.onloadCalled && "function" == typeof n.onload || this.end(n);
                    }), a.on("xhr-load-added", function (t, e) {
                        var n = "" + f(t) + !!e;this.xhrGuids && !this.xhrGuids[n] && (this.xhrGuids[n] = !0, this.totalCbs += 1);
                    }), a.on("xhr-load-removed", function (t, e) {
                        var n = "" + f(t) + !!e;this.xhrGuids && this.xhrGuids[n] && (delete this.xhrGuids[n], this.totalCbs -= 1);
                    }), a.on("addEventListener-end", function (t, e) {
                        e instanceof XMLHttpRequest && "load" === t[0] && a.emit("xhr-load-added", [t[1], t[2]], e);
                    }), a.on("removeEventListener-end", function (t, e) {
                        e instanceof XMLHttpRequest && "load" === t[0] && a.emit("xhr-load-removed", [t[1], t[2]], e);
                    }), a.on("fn-start", function (t, e, n) {
                        e instanceof XMLHttpRequest && ("onload" === n && (this.onload = !0), ("load" === (t[0] && t[0].type) || this.onload) && (this.xhrCbStart = new Date().getTime()));
                    }), a.on("fn-end", function (t, e) {
                        this.xhrCbStart && a.emit("xhr-cb-time", [new Date().getTime() - this.xhrCbStart, this.onload, e], e);
                    });
                }
            }, { 1: "XL7HBI", 2: 11, 3: 9, 4: 5, ee: "QJf3ax", handle: "D5DuLP", loader: "G9z0Bl" }], 11: [function (t, e) {
                e.exports = function (t) {
                    var e = document.createElement("a"),
                        n = window.location,
                        r = {};e.href = t, r.port = e.port;var o = e.href.split("://");return (!r.port && o[1] && (r.port = o[1].split("/")[0].split("@").pop().split(":")[1]), r.port && "0" !== r.port || (r.port = "https" === o[0] ? "443" : "80"), r.hostname = e.hostname || n.hostname, r.pathname = e.pathname, r.protocol = o[0], "/" !== r.pathname.charAt(0) && (r.pathname = "/" + r.pathname), r.sameOrigin = !e.hostname || e.hostname === document.domain && e.port === n.port && e.protocol === n.protocol, r);
                };
            }, {}], gos: [function (t, e) {
                e.exports = t("7eSDFh");
            }, {}], "7eSDFh": [function (t, e) {
                function n(t, e, n) {
                    if (r.call(t, e)) return t[e];var o = n();if (Object.defineProperty && Object.keys) try {
                        return (Object.defineProperty(t, e, { value: o, writable: !0, enumerable: !1 }), o);
                    } catch (i) {}return (t[e] = o, o);
                }var r = Object.prototype.hasOwnProperty;e.exports = n;
            }, {}], D5DuLP: [function (t, e) {
                function n(t, e, n) {
                    return r.listeners(t).length ? r.emit(t, e, n) : (o[t] || (o[t] = []), void o[t].push(e));
                }var r = t("ee").create(),
                    o = {};e.exports = n, n.ee = r, r.q = o;
            }, { ee: "QJf3ax" }], handle: [function (t, e) {
                e.exports = t("D5DuLP");
            }, {}], XL7HBI: [function (t, e) {
                function n(t) {
                    var e = typeof t;return !t || "object" !== e && "function" !== e ? -1 : t === window ? 0 : i(t, o, function () {
                        return r++;
                    });
                }var r = 1,
                    o = "nr@id",
                    i = t("gos");e.exports = n;
            }, { gos: "7eSDFh" }], id: [function (t, e) {
                e.exports = t("XL7HBI");
            }, {}], loader: [function (t, e) {
                e.exports = t("G9z0Bl");
            }, {}], G9z0Bl: [function (t, e) {
                function n() {
                    var t = l.info = NREUM.info;if (t && t.licenseKey && t.applicationID && f && f.body) {
                        s(h, function (e, n) {
                            e in t || (t[e] = n);
                        }), l.proto = "https" === p.split(":")[0] || t.sslForHttp ? "https://" : "http://", a("mark", ["onload", i()]);var e = f.createElement("script");e.src = l.proto + t.agent, f.body.appendChild(e);
                    }
                }function r() {
                    "complete" === f.readyState && o();
                }function o() {
                    a("mark", ["domContent", i()]);
                }function i() {
                    return new Date().getTime();
                }var a = t("handle"),
                    s = t(1),
                    c = window,
                    f = c.document,
                    u = "addEventListener",
                    d = "attachEvent",
                    p = ("" + location).split("?")[0],
                    h = { beacon: "bam.nr-data.net", errorBeacon: "bam.nr-data.net", agent: "js-agent.newrelic.com/nr-515.min.js" },
                    l = e.exports = { offset: i(), origin: p, features: {} };f[u] ? (f[u]("DOMContentLoaded", o, !1), c[u]("load", n, !1)) : (f[d]("onreadystatechange", r), c[d]("onload", n)), a("mark", ["firstbyte", i()]);
            }, { 1: 20, handle: "D5DuLP" }], 20: [function (t, e) {
                function n(t, e) {
                    var n = [],
                        o = "",
                        i = 0;for (o in t) r.call(t, o) && (n[i] = e(o, t[o]), i += 1);return n;
                }var r = Object.prototype.hasOwnProperty;e.exports = n;
            }, {}], 21: [function (t, e) {
                function n(t, e, n) {
                    e || (e = 0), "undefined" == typeof n && (n = t ? t.length : 0);for (var r = -1, o = n - e || 0, i = Array(0 > o ? 0 : o); ++r < o;) i[r] = t[e + r];return i;
                }e.exports = n;
            }, {}], 22: [function (t, e) {
                function n(t) {
                    return !(t && "function" == typeof t && t.apply && !t[i]);
                }var r = t("ee"),
                    o = t(1),
                    i = "nr@wrapper",
                    a = Object.prototype.hasOwnProperty;e.exports = function (t) {
                    function e(t, e, r, a) {
                        function nrWrapper() {
                            var n, i, s, f;try {
                                i = this, n = o(arguments), s = r && r(n, i) || {};
                            } catch (d) {
                                u([d, "", [n, i, a], s]);
                            }c(e + "start", [n, i, a], s);try {
                                return f = t.apply(i, n);
                            } catch (p) {
                                throw (c(e + "err", [n, i, p], s), p);
                            } finally {
                                c(e + "end", [n, i, f], s);
                            }
                        }return n(t) ? t : (e || (e = ""), nrWrapper[i] = !0, f(t, nrWrapper), nrWrapper);
                    }function s(t, r, o, i) {
                        o || (o = "");var a,
                            s,
                            c,
                            f = "-" === o.charAt(0);for (c = 0; c < r.length; c++) s = r[c], a = t[s], n(a) || (t[s] = e(a, f ? s + o : o, i, s, t));
                    }function c(e, n, r) {
                        try {
                            t.emit(e, n, r);
                        } catch (o) {
                            u([o, e, n, r]);
                        }
                    }function f(t, e) {
                        if (Object.defineProperty && Object.keys) try {
                            var n = Object.keys(t);return (n.forEach(function (n) {
                                Object.defineProperty(e, n, { get: function get() {
                                        return t[n];
                                    }, set: function set(e) {
                                        return (t[n] = e, e);
                                    } });
                            }), e);
                        } catch (r) {
                            u([r]);
                        }for (var o in t) a.call(t, o) && (e[o] = t[o]);return e;
                    }function u(e) {
                        try {
                            t.emit("internal-error", e);
                        } catch (n) {}
                    }return (t || (t = r), e.inPlace = s, e.flag = i, e);
                };
            }, { 1: 21, ee: "QJf3ax" }] }, {}, ["G9z0Bl", 3, 10, 4]));
        ;NREUM.info = { beacon: "bam.nr-data.net", errorBeacon: "bam.nr-data.net", licenseKey: licenseKey, applicationID: appId, sa: 1, agent: "js-agent.newrelic.com/nr-515.min.js" };
    }
};

module.exports = newRelic;

},{}],36:[function(require,module,exports){
'use strict';

var rayGun = function rayGun(config) {
    var apiKey;
    if (config == null) {
        config = {};
    }
    apiKey = config.RAYGUN_API_KEY;
    if (apiKey && window.location.hostname !== 'localhost') {
        if (Raygun != null) {
            Raygun.init(apiKey, {
                ignore3rdPartyErrors: true
            }).attach();
        }
        return Raygun != null ? Raygun.filterSensitiveData(['password']) : void 0;
    }
};

module.exports = rayGun;

},{}],37:[function(require,module,exports){
'use strict';

var userSnap = function userSnap(config) {
    var apiKey = '032baf87-8545-4ebc-a557-934859371fa5.js',
        s,
        x;
    if (config == null) {
        config = {};
    }
    apiKey = config.USER_SNAP_API_KEY;
    if (apiKey && window.location.hostname !== 'localhost') {
        window.usersnapconfig = {
            mode: 'report',
            shortcut: true,
            beforeOpen: function beforeOpen(obj) {
                return UserSnap.setEmailBox(Doc.app.user.userName);
            }
        };
        s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//api.usersnap.com/load/' + apiKey + '.js';
        x = document.getElementsByTagName('head')[0];
        return x.appendChild(s);
    }
};

module.exports = userSnap;

},{}],38:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;

var Analytics = (function () {
    function Analytics(editor, map) {
        _classCallCheck(this, Analytics);

        this._editor = editor;
        this._map = map;

        // this gets populated by this._map.loadMapExtraData, on load and after every autosave
        this.mapAnalytics = null;

        // --------- contextual analytics --------------
        // - these are all calculated here, unlike map analytics which are calculated on the server and connected with badges and points

        // this gets calculated by updateContextualAnalytics
        this.contextualAnalytics = {
            thingName: '',

            // thing stuff
            distinctFrom: 0,
            intentionallyDistinctFrom: 0,
            partOf: 0,
            includesParts: 0,
            relatedTo: 0,
            isRelationship: 0,
            lookingAt: 0,
            lookedAtFrom: 0,

            // R stuff
            rFromThingName: '',
            rToThingName: '',
            isRThing: false,
            isRSystem: false,
            isRPoint: false,
            isRView: false
        };
    }

    _createClass(Analytics, [{
        key: 'handleDiagramEvent',
        value: function handleDiagramEvent(eventName, e) {
            if (eventName === 'ChangedSelection') {
                if (this._map.getUi().currentTabIs(this._map.getUi().TAB_ID_ANALYTICS_THING)) {
                    this.updateContextualAnalytics();
                }
            }
        }
    }, {
        key: 'currentTabChanged',

        // called when a tab is opened or closed
        value: function currentTabChanged(newValue, oldValue) {
            if (newValue === this._map.getUi().TAB_ID_ANALYTICS_THING) {
                // opening thing analytics tab
                this.updateContextualAnalytics();
            }
        }
    }, {
        key: 'updateContextualAnalytics',
        value: function updateContextualAnalytics() {
            //console.log('updateContextualAnalytics');
            if (!this._map.getUi().currentTabIs(this._map.getUi().TAB_ID_ANALYTICS_THING)) {
                return;
            }

            var diagram = this._map.getDiagram();
            var part = diagram.selection.first();
            var a = this.contextualAnalytics;

            if (part && part instanceof go.Group) {
                var thing = part;

                // thing name
                a.thingName = thing.data.text;

                // distinct from
                a.distinctFrom = _.where(diagram.model.nodeDataArray, { isGroup: true }).length - 1;

                // part of
                var level = 0;
                var thing2 = thing;
                while (thing2 = this.getContainingGroup(thing2)) {
                    level++;
                }
                a.partOf = level;

                // includes parts
                a.includesParts = this.countGroups(thing);

                // related to / looking at / looked at from / intentionally distinct from
                a.relatedTo = 0;
                a.lookingAt = 0;
                a.lookedAtFrom = 0;
                a.intentionallyDistinctFrom = 0;
                var links = thing.linksConnected;
                var rConnectedThingKeys = [];
                while (links.next()) {
                    var link = links.value;
                    // P link
                    if (link.data.category === 'P') {
                        if (link.fromNode === thing) {
                            a.lookingAt++;
                        } else if (link.toNode === thing) {
                            a.lookedAtFrom++;
                        }
                    }
                    // D link
                    else if (link.data.category === 'D') {
                        a.intentionallyDistinctFrom++;
                    }
                    // R link
                    else if (!link.data.category) {
                        // track keys of related things so we don't count them multiple times
                        if (link.fromNode === thing) {
                            rConnectedThingKeys.push(link.toNode.data.key);
                        } else if (link.toNode === thing) {
                            rConnectedThingKeys.push(link.fromNode.data.key);
                        }
                    }
                }
                a.relatedTo = _.uniq(rConnectedThingKeys).length;

                // isRelationship
                a.isRelationship = thing.isLinkLabel;
            } else if (part && part instanceof go.Link) {
                var rel = part;

                // thing names
                a.rFromThingName = rel.fromNode.data.text;
                a.rToThingName = rel.toNode.data.text;

                // is R thing
                a.isRThing = rel.isLabeledLink;

                // is R system
                a.isRSystem = rel.isLabeledLink && this.countGroups(rel.labelNodes.first()) > 0;

                // is R point
                a.isRPoint = rel.isLabeledLink && this.isPoint(rel.labelNodes.first());

                // is R view
                a.isRView = rel.isLabeledLink && this.isView(rel.labelNodes.first());
            }
        }
    }, {
        key: 'getContainingGroup',

        // returns either the containingGroup or the rThingContainingGroup, whichever is non-null
        value: function getContainingGroup(group) {
            return group.containingGroup || this.getRThingContainingGroup(group);
        }
    }, {
        key: 'getRThingContainingGroup',

        // if group is an R-thing between two sibling parts of a whole, returns the whole; else returns null
        value: function getRThingContainingGroup(group) {
            if (group.isLinkLabel) {
                var fromParent = group.labeledLink.fromNode.containingGroup;
                var toParent = group.labeledLink.toNode.containingGroup;
                if (fromParent !== null && toParent !== null && fromParent === toParent) {
                    return fromParent;
                }
            }
            return null;
        }
    }, {
        key: 'countGroups',

        // counts the member parts of the group that are groups, recursively (not including the group itself)
        value: function countGroups(group) {
            var count = 0;
            var it = this.getMemberGroups(group).iterator;
            while (it.next()) {
                var part = it.value;
                count += 1 + this.countGroups(part);
            }

            return count;
        }
    }, {
        key: 'getMemberGroups',

        // returns the collection of groups that are either a memberPart of this group, or an R-thing between sibling memberParts
        value: function getMemberGroups(group) {
            var members = new go.List();
            var it = group.memberParts;
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group) {
                    members.add(part);
                    var rthing = this.getRThingToSibling(part); // NB: should not get duplication here, as this checks for r-things in only one direction
                    if (rthing) {
                        members.add(rthing);
                    }
                }
            }
            return members;
        }
    }, {
        key: 'getRThingToSibling',

        // if the group is linked by an R-thing to a sibling (with the group as the fromNode), returns the R-thing; else returns null
        value: function getRThingToSibling(group) {
            var it = group.findLinksOutOf();
            while (it.next()) {
                var link = it.value;
                if (link.labelNodes.count > 0 && link.toNode.containingGroup === group.containingGroup) {
                    return link.labelNodes.first();
                }
            }
            return null;
        }
    }, {
        key: 'isPoint',
        value: function isPoint(group) {
            var it = group.findLinksOutOf();
            while (it.next()) {
                var link = it.value;
                if (link.data.category === 'P') {
                    return true;
                }
            }
            return false;
        }
    }, {
        key: 'isView',
        value: function isView(group) {
            var it = group.findLinksInto();
            while (it.next()) {
                var link = it.value;
                if (link.data.category === 'P') {
                    return true;
                }
            }
            return false;
        }
    }]);

    return Analytics;
})();

module.exports = Analytics;

},{}],39:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Attachments = (function () {
    function Attachments(editor, map) {
        _classCallCheck(this, Attachments);

        this._editor = editor;
        this._map = map;

        this.selectedThing = null;
        this.attachments = null;

        this.attachmentTypes = [{ name: 'note', labelSingular: 'Note', labelPlural: 'Notes' }, { name: 'link', labelSingular: 'Web Link', labelPlural: 'Web Links' }, { name: 'task', labelSingular: 'Task', labelPlural: 'Tasks' }, { name: 'map', labelSingular: 'Linked MetaMap', labelPlural: 'Linked MetaMaps' }
        //{name: 'doc', labelSingular: 'Document', labelPlural: 'Documents'}  // limit overall storage space OR simpler rules?
        // limit file types - pdf, jpg, gif, png, office?...  whitelist vs. blacklist
        ];
    }

    _createClass(Attachments, [{
        key: 'handleDiagramEvent',
        value: function handleDiagramEvent(eventName, e) {
            if (eventName === 'ChangedSelection') {
                if (this._map.getUi().currentTabIs(this._map.getUi().TAB_ID_ATTACHMENTS)) {
                    this.stopEditingAll();
                    this.saveAttachments();
                    this.loadSelectedThingAttachments();
                }
            }
        }
    }, {
        key: 'currentTabChanged',

        // called when a tab is opened or closed
        value: function currentTabChanged(newValue, oldValue) {
            if (newValue === this._map.getUi().TAB_ID_ATTACHMENTS) {
                // opening tab
                this.loadSelectedThingAttachments();
            }
            if (oldValue === this._map.getUi().TAB_ID_ATTACHMENTS) {
                // closing tab
                this.saveAttachments();
            }
        }
    }, {
        key: 'loadSelectedThingAttachments',
        value: function loadSelectedThingAttachments() {
            if (this._map.thingSelected()) {
                this.selectedThing = this._map.getUniqueThingSelected();
                this.attachments = this.selectedThing.data.attachments;
                if (this.attachments === undefined) {
                    this.attachments = [];
                }
            }
        }
    }, {
        key: 'stopEditingAll',

        // set all attachments to editing = false
        value: function stopEditingAll() {
            if (this.attachments) {
                _.each(this.attachments, function (att) {
                    att.editing = false;
                });
            }
        }
    }, {
        key: 'editingAnItem',
        value: function editingAnItem() {
            return this.attachments && _.findWhere(this.attachments, { editing: true }) !== undefined;
        }
    }, {
        key: 'startEditing',

        // set all other attachments to editing = false
        value: function startEditing(attachment) {
            this.stopEditingAll();
            attachment.editing = true;
        }
    }, {
        key: 'saveItem',
        value: function saveItem(attachment) {
            attachment.editing = false;
            this.saveAttachments();
        }
    }, {
        key: 'saveAttachments',
        value: function saveAttachments() {
            console.log('saveAttachments, selected: ' + this.selectedThing);
            if (this.selectedThing) {
                this._map.getDiagram().model.setDataProperty(this.selectedThing.data, 'attachments', this.attachments);
                this.selectedThing.updateTargetBindings();
            }
            this._map.getAutosave().saveNow('edit_attachments');
        }
    }, {
        key: 'listAttachments',
        value: function listAttachments(type) {
            var atts = _.where(this.attachments, { type: type });
            return atts;
        }
    }, {
        key: 'addAttachment',
        value: function addAttachment(type) {
            var item = { type: type, editing: true };
            if (type === 'note') {
                this.attachments.push(_.extend(item, { text: '', url: '' }));
            } else if (type === 'link') {
                this.attachments.push(_.extend(item, { label: '', url: '' }));
            } else if (type === 'task') {
                this.attachments.push(_.extend(item, { text: '' }));
            } else if (type === 'doc') {
                this.attachments.push(_.extend(item, { name: '' }));
            } else if (type === 'map') {
                this.attachments.push(_.extend(item, { mapRef: { id: 0, name: '' } }));
            }
        }
    }, {
        key: 'isValid',
        value: function isValid(attachment) {
            if (attachment.type === 'link') {
                return attachment.label && attachment.url && attachment.label.trim() !== '' && attachment.url.trim() !== '';
            } else if (attachment.type === 'note') {
                return attachment.text && attachment.text.trim() !== '';
            } else if (attachment.type === 'task') {
                return attachment.text && attachment.text.trim() !== '';
            } else if (attachment.type === 'doc') {
                return attachment.name && attachment.name.trim() !== '';
            } else if (attachment.type === 'map') {
                return attachment.mapRef && attachment.mapRef.id !== null && attachment.mapRef.id !== undefined;
            }
        }
    }, {
        key: 'deleteAttachment',
        value: function deleteAttachment(att) {
            var typeLabel = _.findWhere(this.attachmentTypes, { name: att.type }).labelSingular;
            if (confirm('Delete ' + typeLabel + '?')) {
                var i = _.indexOf(this.attachments, att);
                this.attachments.splice(i, 1);
            }
        }
    }, {
        key: 'getOtherMaps',

        // query server for maps containing the given text in the map name
        value: function getOtherMaps(viewValue) {
            // NB: this URL is constructed to match the one generated by the search form on the maps page...
            var url = '/maps/visible_maps.json?utf8=%E2%9C%93&q%5Bname_cont%5D=' + viewValue;
            return $http.get(url).then(function (response) {
                return response.data.maps;
            });
        }
    }, {
        key: 'otherMapSelected',
        value: function otherMapSelected(viewValue, modelValue) {
            console.log('otherMapSelected, viewValue: ' + viewValue.id + ', modelValue: ' + modelValue);
        }
    }, {
        key: 'formatOtherMap',
        value: function formatOtherMap(model) {
            return model ? model.name : '';
        }
    }]);

    return Attachments;
})();

module.exports = Attachments;

},{}],40:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Analytics = require('./Analytics.js');
var Attachments = require('./Attachments.js');
var Autosave = require('./autosave.js');
var Generator = require('./generator.js');
var Layouts = require('./Layouts.js');
var Perspectives = require('./Perspectives.js');
var Presenter = require('./Presenter.js');
var Templates = require('./Templates.js');
var UI = require('./UI.js');

var EditorConfig = function EditorConfig(editor, map) {
    _classCallCheck(this, EditorConfig);

    this.editor = editor;
    this.map = map;
    this.analytics = new Analytics(editor, map);
    this.attachments = new Attachments(editor, map);
    this.autosave = new Autosave(editor, map);
    this.generator = new Generator(editor, map);
    this.layouts = new Layouts(editor, map);
    this.perspectives = new Perspectives(editor, map);
    this.presenter = new Presenter(editor, map);
    //this.standards = new SandbankEditor.Standards(editor, map);
    this.templates = new Templates(editor, map);
    //this.tests = new SandbankEditor.Tests(editor, map);
    this.ui = new UI(editor, map);
};

module.exports = EditorConfig;

},{"./Analytics.js":38,"./Attachments.js":39,"./Layouts.js":41,"./Perspectives.js":43,"./Presenter.js":44,"./Templates.js":45,"./UI.js":46,"./autosave.js":47,"./generator.js":49}],41:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;

// layouts used in the editor, for the diagram or individual Groups, plus layout-related functions

var Layouts = (function () {
    function Layouts(editor, map) {
        _classCallCheck(this, Layouts);

        this._editor = editor;
        this._map = map;
        go.Layout.call(this);
    }

    _createClass(Layouts, [{
        key: 'handleDiagramEvent',
        value: function handleDiagramEvent(eventName, e) {
            var diagram = this._map.getDiagram();
            if (eventName === 'InitialLayoutCompleted') {
                diagram.updateAllTargetBindings();
                diagram.layoutDiagram(true);
            } else if (eventName === 'SelectionMoved') {
                this.updateSelectedPartLocationData(e);
                this._map.getDiagram().layoutDiagram(true);
            } else if (eventName === 'SelectionDeleted') {
                diagram.updateAllTargetBindings();
            } else if (eventName === 'PartCreated') {} else if (eventName === 'PartResized') {
                this.setResizedPartDimensionData(e);
            } else if (eventName === 'LinkDrawn') {
                this.adjustLinkLayout(e.subject);
            } else if (eventName === 'LinkRelinked') {
                this.adjustLinkLayout(e.subject);
            }
        }
    }, {
        key: 'setResizedPartDimensionData',

        // ------------ handle location/size attributes for nodes ---------------

        // only update w/h for slides, as all other node types have fixed dimensions according to the templates
        value: function setResizedPartDimensionData(e) {
            var diagram = this._map.getDiagram();
            var node = e.subject;
            if (node && node.category === 'slide') {
                //console.log('PartResized: ' + node.part.actualBounds);
                diagram.model.setDataProperty(node.data, 'width', node.part.actualBounds.width);
                diagram.model.setDataProperty(node.data, 'height', node.part.actualBounds.height);
            }
        }
    }, {
        key: 'setNewPartLocationData',

        // set the 'loc' attribute for a new top-level node (created by double-clicking), to support freehand layout
        value: function setNewPartLocationData(e) {
            var node = e.subject;
            if (node && node.part) {
                if (node instanceof go.Group) {
                    this._map.getDiagram().model.setDataProperty(node.data, 'loc', node.part.location.x + ' ' + node.part.location.y);
                }
            }
        }
    }, {
        key: 'updateSelectedPartLocationData',

        // updates the 'loc' attribute for each selected part, to support freehand layout (does not apply to slides)
        value: function updateSelectedPartLocationData(e) {
            var diagram = this._map.getDiagram();
            var it = diagram.selection.iterator;
            while (it.next()) {
                if (it.value instanceof go.Group) {
                    // thing
                    var part = it.value;
                    var parentX = 0;
                    var parentY = 0;
                    if (part.containingGroup) {
                        parentX = part.containingGroup.location.x;
                        parentY = part.containingGroup.location.y;
                    }
                    console.log('moving group, subject: ' + e.subject + ', part: ' + part + ', height: ' + part.part.desiredSize.height + ', location: ' + part.part.location);
                    if (!isNaN(part.location.x)) {
                        diagram.model.setDataProperty(part.data, 'loc', part.location.x - parentX + ' ' + (part.location.y - parentY));
                    }
                }
            }
        }
    }, {
        key: 'fromAndToNodesAreVisible',

        // ----------- changing layouts of things and their descendants ----------------

        value: function fromAndToNodesAreVisible(link) {
            return link.fromNode && link.toNode && !this.hasCollapsedAncestor(link.fromNode) && !this.hasCollapsedAncestor(link.toNode);
        }
    }, {
        key: 'labelNodeIsVisible',
        value: function labelNodeIsVisible(link) {
            return link.labelNodes.count && link.labelNodes.first().visible;
        }
    }, {
        key: 'hasCollapsedAncestor',
        value: function hasCollapsedAncestor(group) {
            while (true) {
                if (!group.containingGroup) {
                    return false;
                } else if (!group.containingGroup.isSubGraphExpanded) {
                    return true;
                } else {
                    group = group.containingGroup;
                }
            }
        }
    }, {
        key: 'getHighestAncestorWithLayout',
        value: function getHighestAncestorWithLayout(group, layoutNames) {
            while (true) {
                if (!group.containingGroup) {
                    return false;
                } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                    return group.containingGroup;
                } else {
                    group = group.containingGroup;
                }
            }
        }
    }, {
        key: 'areSistersInInventoryLayout',
        value: function areSistersInInventoryLayout(group1, group2) {
            return group1.containingGroup === group2.containingGroup && group1.containingGroup && _.contains(['left', 'right'], group1.containingGroup.data.layout);
        }
    }, {
        key: 'isNotWithinInventoryLayout',
        value: function isNotWithinInventoryLayout(group) {
            return !this.isWithinInventoryLayout(group);
        }
    }, {
        key: 'isRThingWithinInventoryLayout',
        value: function isRThingWithinInventoryLayout(group) {
            return group.isLinkLabel && this.isWithinInventoryLayout(group);
        }
    }, {
        key: 'isWithinInventoryLayout',
        value: function isWithinInventoryLayout(group) {
            return this.isWithinLayout(group, ['left', 'right']);
        }
    }, {
        key: 'isWithinLeftInventoryLayout',
        value: function isWithinLeftInventoryLayout(group) {
            return this.isWithinLayout(group, ['left']);
        }
    }, {
        key: 'isWithinRightInventoryLayout',
        value: function isWithinRightInventoryLayout(group) {
            return this.isWithinLayout(group, ['right']);
        }
    }, {
        key: 'isWithinFreehandLayout',
        value: function isWithinFreehandLayout(group) {
            return this.isWithinLayout(group, ['freehand']);
        }
    }, {
        key: 'isWithinStackedLayout',
        value: function isWithinStackedLayout(group) {
            return this.isWithinLayout(group, ['stacked']);
        }
    }, {
        key: 'isWithinLayout',
        value: function isWithinLayout(group, layoutNames) {
            while (true) {
                if (!group.containingGroup) {
                    //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': false');
                    return false;
                } else if (_.contains(layoutNames, group.containingGroup.data.layout)) {
                    //console.log('isWithinLayout: ' + group + 'layouts: ' + layoutNames.join() + ': true');
                    return true;
                } else {
                    group = group.containingGroup;
                }
            }
        }
    }, {
        key: 'showLeftTextBlock',
        value: function showLeftTextBlock(group) {
            return this.isWithinRightInventoryLayout(group) && !this.isWithinStackedLayout(group) && !group.isLinkLabel;
        }
    }, {
        key: 'showRightTextBlock',
        value: function showRightTextBlock(group) {
            return this.isWithinLeftInventoryLayout(group) && !this.isWithinStackedLayout(group) && !group.isLinkLabel;
        }
    }, {
        key: 'setDescendantLayouts',
        value: function setDescendantLayouts(group, layoutName) {
            if (layoutName === 'left' || layoutName === 'right' || layoutName === 'stacked') {
                var it = group.memberParts.iterator;
                while (it.next()) {
                    var part = it.value;
                    if (part instanceof go.Group && !part.isLinkLabel) {
                        part.data.layout = layoutName;
                        this.setDescendantLayouts(part, layoutName);
                    }
                }
            } else if (layoutName === 'freehand') {}
        }
    }, {
        key: 'disableLayoutForSelectedThings',
        value: function disableLayoutForSelectedThings(layoutName) {
            var it = this._map.getDiagram().selection.iterator;
            if (!it.count) {
                return true;
            }
            while (it.next()) {
                if (!(it.value instanceof go.Group)) {
                    return true;
                } else {
                    var group = it.value;
                    if (this.isWithinLayout(group, ['left', 'right', 'stacked'])) {
                        return true;
                    }
                }
            }
            return false;
        }
    }, {
        key: 'computeLevel',

        // -------------- scaling functions, etc. ----------------------

        // Computes the level of this group
        value: function computeLevel(group) {
            //console.log('computeLevel, part: ' + part + ', containingGroup: ' + part.containingGroup);
            if (!(group instanceof go.Group) || group.containingGroup === null) {
                return 0;
            } else {
                return this.computeLevel(group.containingGroup) + 1;
            }
        }
    }, {
        key: 'getThingScale',

        // gets the basic scaling for thing squares, by level
        value: function getThingScale(level) {
            return Math.pow(0.45, level); // 1, .45, .2025, .091125, ...
        }
    }, {
        key: 'getScale',

        // this is only used for groups
        value: function getScale(group, visitedGroupKeys) {
            if (group) {
                // keep track of groups we've visited to avoid infinite recursion
                // TODO: track down exactly how infinite loops are occurring,
                // or IF they still are since this._map.checkModel was introduced...
                if (visitedGroupKeys && Array.isArray(visitedGroupKeys)) {
                    //console.log('visitedGroupKeys: ' + visitedGroupKeys);
                    if (_.contains(visitedGroupKeys, group.data.key)) {
                        //console.log('hit already visited key: ' + group.data.key);
                        return 1;
                    } else {
                        visitedGroupKeys.push(group.data.key);
                    }
                } else {
                    visitedGroupKeys = [group.data.key];
                }

                if (group.labeledLink) {
                    // R-thing
                    var fromScale = this.getScale(group.labeledLink.fromNode, visitedGroupKeys);
                    var toScale = this.getScale(group.labeledLink.toNode, visitedGroupKeys);
                    //console.log('getScale, fromScale: ' + fromScale + ', toScale: ' + toScale + ', visitedGroupKeys: ' + visitedGroupKeys.join(','));
                    return Math.min(fromScale, toScale) * 0.5;
                } else if (group.containingGroup) {
                    return this.getScale(group.containingGroup, visitedGroupKeys) * 0.45;
                } else {
                    return this.getThingScale(this.computeLevel(group));
                }
            }
            return 1; // can occur when dragging R to empty space
        }
    }, {
        key: 'getExternalTextScale',
        value: function getExternalTextScale(group) {
            return 1 - 0.1 * this.computeLevel(group);
        }
    }, {
        key: 'getLinkStrokeWidth',
        value: function getLinkStrokeWidth(link) {
            var fromScale = this.getScale(link.fromNode);
            var toScale = this.getScale(link.toNode);
            return (link.isSelected ? 4 : 2) * Math.min(fromScale, toScale); // 2, .9, ...
        }
    }, {
        key: 'getArrowheadScale',

        // scale arrowheads based on the smallest to/from node,
        // or just the To node for P links
        value: function getArrowheadScale(link) {
            var fromScale = this.getScale(link.fromNode);
            var toScale = this.getScale(link.toNode);
            var minScale = Math.min(fromScale, toScale);
            //console.log("getArrowheadScale, fromScale: ", fromScale, ', toScale: ', toScale, ', minScale: ', minScale);
            if (link.data.category === 'P') {
                minScale = toScale;
            }
            if (minScale >= 1) {
                return 1 * minScale;
            } else {
                return 1.5 * minScale;
            }
        }
    }, {
        key: 'getNewSisterLocation',

        // -------------- creating new things ----------------------

        // Returns a location for a new sister group (thing) to the given one,
        // which will not hide any existing things (overlap is allowed).
        // The returned coordinates are absolute for a top-level group,
        // or relative to the parent otherwise - suitable for use with FreehandDiagramLayout
        // or FreehandLayout, resp.
        value: function getNewSisterLocation(group, withR) {
            var diagram = this._map.getDiagram();
            // if we are within another group, things are in absolute coordinates
            // and sisters are placed above the thing; otherwise relative and below...
            var inGroup = group.containingGroup !== null;
            // ... except if withR is true, we go to the right instead of above or below.

            // start below if in group, else above; or to the right if withR
            var x = undefined,
                y = undefined,
                w = undefined,
                h = undefined;
            if (withR) {
                x = group.location.x + group.actualBounds.width * 2.2;
                y = group.location.y;
            } else {
                x = group.location.x;
                y = group.location.y + group.actualBounds.height * 1.1 * (inGroup ? 1 : -1);
            }
            w = group.actualBounds.width;
            h = group.actualBounds.height;

            // check for overlapping parts; if found, increment x,y and continue

            while (true) {
                var rect = new go.Rect(x, y, w, h);
                rect.grow(h / 10, w / 10, h / 10, w / 10);
                var parts = diagram.findObjectsIn(rect, null, this.isGroup);
                if (parts.count) {
                    console.log('getNewSisterLocation: overlapping part found in ' + rect);
                    if (withR) {
                        x += w / 10;
                        y += h / 10;
                    } else {
                        x += w / 10;
                        y += h / 10 * (inGroup ? 1 : -1); // move down if in group, else up
                    }
                } else {
                    console.log('getNewSisterLocation: no overlapping part found in ' + rect);
                    break;
                }
            }
            if (inGroup) {
                // make coordinates relative
                x -= group.containingGroup.location.x;
                y -= group.containingGroup.location.y;
            }
            return new go.Point(x + Math.random(), y + Math.random());
        }
    }, {
        key: 'getNewChildLocation',

        // Returns a location for a new child group (thing) to the given one,
        // which will not hide any existing children (overlap is allowed).
        // The returned coordinates are relative to the parent group - suitable for use with FreehandLayout.
        value: function getNewChildLocation(group) {
            var groupBounds = group.actualBounds;
            // NB: all x/y locations are relative to the group location
            var x = 0;
            var y = groupBounds.height * 1.1;
            var w = undefined,
                h = undefined;
            var members = group.memberParts;
            // keep testing new rectangles until we find one that doesn't overlap with any existing member of the group
            while (true) {
                members.reset();
                var overlaps = false;
                var member = undefined,
                    newRect = undefined,
                    memberRect = undefined;
                while (members.next()) {
                    member = members.value;
                    var memberBounds = member.actualBounds;
                    w = memberBounds.width;
                    h = memberBounds.height;
                    // find the existing member's actual bounds (absolute coords)
                    memberRect = new go.Rect(memberBounds.x - groupBounds.x, memberBounds.y - groupBounds.y, memberBounds.width, memberBounds.height);
                    newRect = new go.Rect(x, y, w, h);
                    newRect.grow(h / 5, w / 5, h / 5, w / 5);
                    overlaps = newRect.containsRect(memberRect);
                    console.log('getNewChildLocation for ' + member + ': newRect = ' + newRect + ', memberRect = ' + memberRect + ', overlaps: ' + overlaps);
                    if (overlaps) {
                        break;
                    }
                }
                if (overlaps) {
                    // increment x, y and try again
                    x += w / 5;
                    y += h / 5;
                } else {
                    // found a good spot!
                    break;
                }
            }
            return new go.Point(x, y);
        }
    }, {
        key: 'getNewChildLocation2',

        // a simpler version of getNewChildLocation that places the child outside the bounds of the existing children
        value: function getNewChildLocation2(group) {
            var groupBounds = group.actualBounds;
            var childBounds = this._map.safeRect(this._map.getDiagram().computePartsBounds(group.memberParts));
            var x = 0;
            var y = 0;
            if (!group.memberParts.count) {
                y = groupBounds.height * 1.2;
            } else {
                y = groupBounds.height * 1.4 + childBounds.height;
            }
            //console.log('getNewChildLocation2, childBounds: ' + childBounds + ', groupBounds: ' + groupBounds + ', x: ' + x + ', y: ' + y);
            return new go.Point(x, y);
        }
    }, {
        key: 'layoutNewMembersRelativeTo',

        // move all the given new member groups so that their locations are relative to that of
        // the parent and its previously existing members, and scaled down appropriately
        value: function layoutNewMembersRelativeTo(newMembers, parent, oldMemberBounds) {
            // how big was the parent system before the new groups were added?
            var systemBounds = parent.actualBounds.unionRect(oldMemberBounds);

            // figure out old/new origins - place new origin below existing system
            var oldBounds = this._map.getDiagram().computePartsBounds(newMembers);
            var oldOrigin = new go.Point(oldBounds.x, oldBounds.y);
            var newOrigin = new go.Point(0, systemBounds.height * 1.2);
            console.log('layoutNewMembersRelativeTo, systemBounds: ' + systemBounds + ', oldBounds: ' + oldBounds + ', oldOrigin: ' + oldOrigin + ', newOrigin: ' + newOrigin);

            // figure out new scaled locations
            // NB: we can assume newMembers are all one level down from parent (see this._map.addSelectedThingsAsChildrenOf),
            // so we just multiply by the standard scale factor
            var it = newMembers.iterator;
            while (it.next()) {
                var group = it.value;
                var groupBounds = group.actualBounds;
                var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) * 0.45;
                var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) * 0.45;
                var newLoc = go.Point.stringify(new go.Point(newX, newY));
                console.log('layoutNewMembersRelativeTo, groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
                this._map.getDiagram().model.setDataProperty(group.data, 'loc', newLoc);
            }
        }
    }, {
        key: 'layoutOldMembersOutsideOf',

        // move all the given old member groups so that their locations are absolute and above
        // the parent, and scaled up appropriately
        value: function layoutOldMembersOutsideOf(oldMembers, parent, oldMembersBounds, oldMembersLevel) {
            // figure out scale factor (members can be dragged up multiple levels, unlike dragging into S)
            var scaleFactor = Math.pow(0.45, oldMembersLevel - this.computeLevel(parent));
            console.log('layoutOldMembersOutsideOf, scaleFactor: ' + scaleFactor);

            // figure out old/new origins - place new origin above parent, with vertical space for scaled-up oldMembers
            var parentBounds = parent.actualBounds;
            var oldOrigin = new go.Point(oldMembersBounds.x, oldMembersBounds.y);
            var newOrigin = new go.Point(parentBounds.x, parentBounds.y - oldMembersBounds.height * 1.2 / scaleFactor);

            // figure out new scaled locations
            var it = oldMembers.iterator;
            while (it.next()) {
                var group = it.value;
                var groupBounds = group.actualBounds;
                var newX = newOrigin.x + (groupBounds.x - oldOrigin.x) / scaleFactor;
                var newY = newOrigin.y + (groupBounds.y - oldOrigin.y) / scaleFactor;
                var newLoc = go.Point.stringify(new go.Point(newX, newY));
                console.log('layoutOldMembersOutsideOf, parentBounds: ' + parentBounds + ', oldMembersBounds: ' + oldMembersBounds + ', newOrigin: ' + newOrigin + ', groupBounds: ' + groupBounds + ', newLoc: ' + newLoc);
                this._map.getDiagram().model.setDataProperty(group.data, 'loc', go.Point.stringify(newLoc));
            }
        }
    }, {
        key: 'getLayout',

        // ----------------- accessors -------------------

        // returns the appropriate layout class by abbreviated name
        value: function getLayout(layoutName) {
            var LeftInventoryLayout = require('./layouts/LeftInventoryLayout.js');
            var RightInventoryLayout = require('./layouts/RightInventoryLayout.js');
            var StackedLayout = require('./layouts/StackedLayout.js');
            var FreehandLayout = require('./layouts/FreehandLayout.js');
            if (layoutName === 'freehand') return new FreehandLayout();else if (layoutName === 'right') return new RightInventoryLayout();else if (layoutName === 'stacked') return new StackedLayout();else return new LeftInventoryLayout();
        }
    }, {
        key: 'getFreehandDiagramLayout',
        value: function getFreehandDiagramLayout() {
            var FreehandDiagramLayout = require('./layouts/FreehandDiagramLayout.js');
            return new FreehandDiagramLayout();
        }
    }, {
        key: 'getCommonAncestorWithLayout',

        // --------------------------------------------------------------

        // returns true if the to and from nodes for the link have a common ancestor group with one of the given layout names.
        // TODO: verify logic - what if there are multiple such ancestors? - this should return the highest one...
        value: function getCommonAncestorWithLayout(group1, group2, layoutNames) {
            var ancestors1 = this.getAncestorGroups(group1);
            var ancestors2 = this.getAncestorGroups(group2);
            var commonAncestors = _.intersection(ancestors1, ancestors2);
            var layoutAncestors = _.filter(commonAncestors, function (group) {
                return _.indexOf(layoutNames, group.data.layout) !== -1;
            });
            if (layoutAncestors.length) {
                return layoutAncestors[0];
            } else {
                return null;
            }
        }
    }, {
        key: 'getAncestorGroups',

        // returns the ancestors of this group, including itself
        value: function getAncestorGroups(group) {
            var ancestors = [group];
            var g = group;
            while (g.containingGroup) {
                ancestors.push(g.containingGroup);
                g = g.containingGroup;
            }
            return ancestors;
        }
    }, {
        key: 'validateGroupLocations',

        // --------------------------------------------------------------

        // if any group in the given Iterator does not have a location (data.loc), set one
        // that doesn't overlap with the other members
        value: function validateGroupLocations(groups) {}
    }, {
        key: 'adjustLinkLayout',

        // --------------------------------------------------------------

        // ------------------------ link routing and visibility ------------------------------

        // adjust the routing, visibility and other properties of a link according to various structural criteria
        value: function adjustLinkLayout(link) {
            if (!link || !link.fromNode || !link.toNode) {
                return;
            }

            // let loc = link.location;
            // if (isNaN(loc.x) || isNaN(loc.y)) {
            //     link.location = new go.Point(10, 10);
            //     console.log('adjustLinkLayout, link.location: ' + link.location);
            // }
            // console.log('adjustLinkLayout, link.location: ' + link.location);

            // see if link is within a stacked or inventory layout, or if it's a hidden P link
            var inventoryAncestor = this.getCommonAncestorWithLayout(link.fromNode, link.toNode, ['left', 'right']);
            var stackedAncestor = this.getCommonAncestorWithLayout(link.fromNode, link.toNode, ['stacked']);
            var hidePLink = link.data && link.data.category === 'P' && !this._map.getTemplates().showPLink(link);
            var crowdedRThing = this.hasCrowdedRThing(link);

            // see if this is one of multiple links between the same two nodes
            var snpos = this.getSameNodesLinkPosition(link);
            var isMultiLink = snpos.count > 1;
            //console.log('snpos for link ' + link + ': ' + snpos.index + ' of ' + snpos.count);

            if (inventoryAncestor) {
                this.applyInventoryCurveRouting(link, snpos, inventoryAncestor.data.layout);
            } else if (isMultiLink) {
                this.applyMultilinkCurveRouting(link, snpos);
            } else if (crowdedRThing) {
                this.applyInventoryCurveRouting(link, snpos, 'left');
            } else {
                this.applyStraightRouting(link);
            }

            // show link only if both connected things are visible (no collapsed ancestors);
            // hide if both are in stacked layout or if it's a P-link that we shouldn't be showing now
            if (this.fromAndToNodesAreVisible(link) && !stackedAncestor && !hidePLink) {
                link.opacity = 1;
                this.showLabelNodes(link, true);
            } else {
                link.opacity = 0;
                this.showLabelNodes(link, false);
            }
        }
    }, {
        key: 'hasCrowdedRThing',

        // TODO: detect when the R-thing overlaps both from and to nodes, so we can change the link routing
        value: function hasCrowdedRThing(link) {
            return false;
        }
    }, {
        key: 'showLabelNodes',
        value: function showLabelNodes(link, show) {
            //console.log('showLabelNodes, link: ' + link + ', show: ' + show);
            var it = link.labelNodes;
            if (it) {
                while (it.next()) {
                    var group = it.value;
                    group.visible = show;
                    if (show) {
                        group.layout.doLayout(group);
                    }
                }
            }
        }
    }, {
        key: 'applyInventoryCurveRouting',

        // if link is between two things in the same inventory layout (single or multiple),
        // make the line more or less circular on the appropriate side
        value: function applyInventoryCurveRouting(link, snpos, ancestorLayout) {
            if (ancestorLayout === 'left') {
                link.fromSpot = go.Spot.Left;
                link.toSpot = go.Spot.Left;
            } else if (ancestorLayout === 'right') {
                link.fromSpot = go.Spot.Right;
                link.toSpot = go.Spot.Right;
            }

            // aspect ratio for the link curves - make this smaller to make them taller, larger to make them fatter
            var curveRatio = 0.6;

            var y1 = link.fromNode.actualBounds.y;
            var y2 = link.toNode.actualBounds.y;

            var yDiff = Math.abs(y2 - y1);
            var c = (yDiff === 0 ? 50 : Math.floor(yDiff * curveRatio)) + 100 * (snpos.index / snpos.count);
            //console.log("yDiff = " + yDiff + ', c = ' + c + ' (' + link.fromNode.data.text + ' - ' + p1 + ' - to ' + link.toNode.data.text + ' - ' + p2 + ')');

            link.curve = go.Link.Bezier;
            link.fromEndSegmentLength = c;
            link.toEndSegmentLength = c;
        }
    }, {
        key: 'applyMultilinkCurveRouting',

        // if non-inventory link is one of multiple ones between same nodes, make it curved
        value: function applyMultilinkCurveRouting(link, snpos) {
            link.fromSpot = go.Spot.Default;
            link.toSpot = go.Spot.Default;
            link.curve = go.Link.Bezier;
            // curviness values based on number of links:
            // 2: -25 25
            // 3: -50 0 50
            // 4: -100 -50 0 50 100
            var rangeSize = 10 * (snpos.count - 1);
            var rangeIncrement = 10;
            if (snpos.hasRThing) {
                rangeSize = 100 * (snpos.count - 1);
                rangeIncrement = 100;
            }

            // adjust curviness for smaller scales
            var linkScaleFactor = this.getLinkStrokeWidth(link) / 2; // 2 is max stroke width
            rangeSize *= linkScaleFactor;
            rangeIncrement *= linkScaleFactor;

            var rangeStart = 0 - rangeSize / 2;

            link.curviness = (rangeStart + rangeIncrement * snpos.index) * snpos.orientation;
            // console.log('applyMultilinkCurveRouting, link: ' + link + ', curviness: ' + link.curviness);
        }
    }, {
        key: 'applyStraightRouting',

        // do normal straight lines for freehand layout, or links between descendants of things with different layouts
        value: function applyStraightRouting(link) {
            link.fromSpot = go.Spot.Default;
            link.toSpot = go.Spot.Default;
            link.routing = go.Link.Normal;
            link.curve = go.Link.None;
            link.curviness = 0;
        }
    }, {
        key: 'getSameNodesLinkPosition',

        // --------------- calculate how many links there are between a link's nodes ---------------

        // Returns an object of the format { index: 1, count: 2, orientation: -1, hasRThing: false },
        // indicating how many other links there are between the same pair of nodes,
        // where the given link falls within this list, and what its orientation is.
        value: function getSameNodesLinkPosition(link) {
            var linksByNodes = this.getLinksByNodes(true);
            // get links with the same key as this one (connecting same nodes)
            var sameLinks = _.where(linksByNodes, {
                key: this.getSameNodesLinkKey(link)
            });

            // default return value
            var snpos = {
                index: 0,
                count: 1,
                orientation: 1,
                hasRThing: false
            };
            // set index, count, orientation
            for (var i = 0; i < sameLinks.length; i++) {
                if (sameLinks[i].link === link) {
                    snpos = {
                        index: i,
                        count: sameLinks.length,
                        orientation: this.getLinkOrientation(link)
                    };
                }
            }
            // check for Rthing
            for (var i = 0; i < sameLinks.length; i++) {
                if (sameLinks[i].hasRThing) {
                    snpos.hasRThing = true;
                }
            }
            return snpos;
        }
    }, {
        key: 'getStackMargin',

        // gets the margin to be used in stack layout between this group's children
        value: function getStackMargin(group) {
            return 10 / 0.45 * this.getScale(group);
        }
    }, {
        key: 'layoutMembersForStacked',

        // returns the max y value after laying out the last part
        value: function layoutMembersForStacked(group, startX, startY) {
            var _this = this;

            var members = this.getOrderedMembers(group);
            var x = startX;
            var y = startY;
            var rowCount = 0;
            var maxStartY = startY;
            _.each(members, function (part) {
                if (part instanceof go.Group && !part.isLinkLabel) {
                    var margin = _this.getStackMargin(part);
                    part.move(new go.Point(x, y));
                    startY = y + part.actualBounds.height + margin / 2; // start Y position for part's children

                    //console.log('layoutMembersForStacked: starting layout of children of ' + part + ' at ' + Math.round(x) + ',' + Math.round(startY));

                    if (part.isSubGraphExpanded) {
                        // layout children of this part; check if we've already done a taller part+children in current row
                        maxStartY = Math.max(maxStartY, _this.layoutMembersForStacked(part, x, startY));
                        //console.log('layoutMembersForStacked: laid out children of ' + part + ', maxStartY is now ' + Math.round(maxStartY));
                    } else {
                        maxStartY = Math.max(maxStartY, startY);
                    }

                    // decide whether to wrap
                    rowCount++;
                    if (rowCount < 2) {
                        // keep going on this line
                        x += part.actualBounds.width + margin;
                    } else {
                        // wrap to next line
                        x = startX;
                        y = maxStartY + margin / 2;
                        rowCount = 0;
                    }
                }
            });
            return maxStartY;
        }
    }, {
        key: 'getInventoryMargin',

        // shared stuff for Left/Right Inventory layouts...

        // gets the margin to be used in stack layout between this group's children
        value: function getInventoryMargin(group) {
            if (this.computeLevel(group) <= 2) {
                return 10 * this.getScale(group);
            } else {
                return 3 * this.getScale(group);
            }
        }
    }, {
        key: 'layoutMembersForInventory',

        // returns the max y value after laying out the last part
        // side is 'L' or 'R'
        value: function layoutMembersForInventory(group, startX, startY, side) {
            var _this2 = this;

            var members = this.getOrderedMembers(group);
            _.each(members, function (part) {
                var x = startX; // for left, just use x
                if (side === 'R') x = startX - part.actualBounds.width; // for right, right-align parts to startX
                //console.log('layoutMembersForInventory, part: ' + part + ' to location: ' + x + ',' + startY);
                part.move(new go.Point(x, startY));
                startY += part.actualBounds.height + _this2.getInventoryMargin(part);
                if (part.isSubGraphExpanded) {
                    //console.log('layoutMembersForInventory, y after moving: ' + part + ' = ' + startY);
                    startY = _this2.layoutMembersForInventory(part, startX, startY, side);
                }
            });
            return startY + this.getInventoryMargin(group);
        }
    }, {
        key: 'getOrderedMembers',

        // returns an array of the group's (non-R-thing) members, sorted by the 'order' data property
        value: function getOrderedMembers(group) {
            var members = new go.List();
            var it = group.memberParts.iterator;
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group && !part.isLinkLabel) {
                    members.add(part);
                }
            }
            return _.sortBy(members.toArray(), function (member) {
                return member.data.order;
            });
        }
    }, {
        key: 'getLinksByNodes',

        // refreshes the cached list of all links with keys, to facilitate grouping them according to connected nodes
        value: function getLinksByNodes(refresh) {
            //console.log('getLinksByNodes');
            if (!this._linksByNodes || refresh) {
                this._linksByNodes = [];
                var diagram = this._map.getDiagram();
                var links = diagram.links.iterator;
                while (links.next()) {
                    var link = links.value;
                    var key = this.getSameNodesLinkKey(link);
                    if (key) {
                        this._linksByNodes.push({
                            key: key,
                            link: link,
                            hasRThing: link.labelNodes.count > 0
                        });
                    }
                }
            }
            return this._linksByNodes;
        }
    }, {
        key: 'getSameNodesLinkKey',

        // Returns a key used to group links according to which pair of nodes they connect.
        // The returned key is non-empty for regular links and P links that should be shown currently,
        // so that these will all be routed by the same rules. A null key is returned for any other
        // links, indicating that no grouping is required.
        value: function getSameNodesLinkKey(link) {
            //        if (this.isRLink(link) || (this.isPLink(link) && this._map.getTemplates().showPLink(link))) {
            if (this.isRLink(link)) {
                var key = [link.fromNode.toString(), link.toNode.toString()].sort().join('|');
                //console.log('key: ' + key);
                return key;
            } else {
                return null;
            }
        }
    }, {
        key: 'getLinkOrientation',

        // We use this to distinguish an A-B link from a B-A link (based on fromNode and toNode, which
        // is independent of the arrowhead settings) when setting curviness, because setting curviness = 25
        // on an A-B link is the same as curviness = -25 on a B-A link.
        value: function getLinkOrientation(link) {
            if (link.fromNode && link.toNode && link.fromNode.toString() < link.toNode.toString()) {
                return 1;
            } else {
                return -1;
            }
        }
    }, {
        key: 'isRLink',

        // -------------- link tests ---------------

        value: function isRLink(link) {
            return link instanceof go.Link && link.data && !link.data.category && link.fromNode && link.toNode;
        }
    }, {
        key: 'isDLink',
        value: function isDLink(link) {
            return link instanceof go.Link && link.data && link.data.category === 'D';
        }
    }, {
        key: 'isPLink',
        value: function isPLink(link) {
            return link instanceof go.Link && link.data && link.data.category === 'P';
        }
    }, {
        key: 'isGroup',
        value: function isGroup(obj) {
            return obj instanceof go.Group;
        }
    }]);

    return Layouts;
})();

go.Diagram.inherit(Layouts, go.Layout);

module.exports = Layouts;

//console.log('Layouts, PartCreated');
// setNewPartLocationData(e);

// stacked?

},{"./layouts/FreehandDiagramLayout.js":50,"./layouts/FreehandLayout.js":51,"./layouts/LeftInventoryLayout.js":52,"./layouts/RightInventoryLayout.js":53,"./layouts/StackedLayout.js":54}],42:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var EditorConfig = require('./EditorConfig.js');

var MILLION = 1000 * 1000;
var LEFT = 'left';
var RIGHT = 'right';
var go = window.go;

var Map = (function () {
    function Map() {
        var config = arguments[0] === undefined ? {} : arguments[0];

        _classCallCheck(this, Map);

        this._editor = config.Editor;

        this._config = new EditorConfig(this._editor, this);
        this._analytics = this._config.analytics;
        this._attachments = this._config.attachments;
        this._autosave = this._config.autosave;
        this._generator = this._config.generator;
        this._layouts = this._config.layouts;
        this._perspectives = this._config.perspectives;
        this._presenter = this._config.presenter;
        this._standards = this._config.standards;
        this._templates = this._config.templates;
        this._tests = this._config.tests;
        this._ui = this._config.ui;

        //this._analytics = new SandbankEditor.Analytics(this._editor, this);
        //this._attachments = new SandbankEditor.Attachments(this._editor, this);
        //this._autosave = new SandbankEditor.Autosave(this._editor, this);
        //this._generator = new SandbankEditor.Generator(this._editor, this);
        //this._layouts = new SandbankEditor.Layouts(this._editor, this);
        //this._perspectives = new SandbankEditor.Perspectives(this._editor, this);
        //this._presenter = new SandbankEditor.Presenter(this._editor, this);
        //this._standards = new SandbankEditor.Standards(this._editor, this);
        //this._templates = new SandbankEditor.Templates(this._editor, this);
        //this._tests = new SandbankEditor.Tests(this._editor, this);
        //this._ui = new SandbankEditor.UI(this._editor, this);

        // call init for each component, if defined
        _.each(this.getComponents(), function (component) {
            if (component && component.init) component.init();
        });

        // create diagram
        this._diagram = new go.Diagram('diagram');
        this._diagram.initialContentAlignment = go.Spot.Center;
        this._diagram.initialViewportSpot = go.Spot.Center;
        this._diagram.initialDocumentSpot = go.Spot.Center;
        this._diagram.hasHorizontalScrollbar = false;
        this._diagram.hasVerticalScrollbar = false;
        this._diagram.padding = 500;
        this._diagram.layout = this._layouts.getFreehandDiagramLayout();

        this.initTools();
        this._templates.initTemplates(this._diagram); // set up templates, customize temporary link behavior
        this.addDiagramListeners();

        this._templates.addExportFooter();
    }

    _createClass(Map, [{
        key: 'printSlides',
        value: function printSlides() {
            this.getPresenter().createSlideThumbnails();

            setTimeout(function () {
                window.print();
            }, 500);
        }
    }, {
        key: 'exportToImage',
        value: function exportToImage(format) {
            var _this = this;

            this.imageExportLoading = true;
            $('#export-image img').remove();
            this.getTemplates().showExportFooter();

            var rect = this.getDiagram().computePartsBounds(this.getDiagram().nodes).copy();

            var imageMB = rect.width * rect.height * 4 / MILLION; // 4 bytes/pixel
            //console.log('imageMB: ' + imageMB);

            // make the max size of the image 10MB
            // pngSize = imageMB * scale * scale
            // so max scale = sqrt(pngSize / imageMB)
            // These calculations don't seem to be right, but in practice using 500 here
            // we get a scale of 2.43 for an image 19984 x 3424 pixels
            // which results in a file size of 1.88 MB at 32 bits/pixel...
            // OR 28380 x 5196 pixels, scale = 3.41 => file size = 3.49 MB
            var scale = 4;
            if (imageMB) {
                scale = Math.min(4, Math.sqrt(50 / imageMB));
            }

            //console.log('image dimensions: ' + rect.width + ' x ' + rect.height + ', image bytes: ' + (rect.width * rect.height * 4) +
            //        ', imageMB: ' + imageMB + ', scale: ' + scale);

            this.showImageExport = true;

            var partsToExport = new go.List();
            partsToExport.addAll(this.getDiagram().nodes);
            partsToExport.addAll(this.getDiagram().links);
            partsToExport.remove(this.getPresenter().slideBlocker);

            var doImage = $timeout(function () {
                var img = _this.getDiagram().makeImage({
                    parts: partsToExport,
                    maxSize: new go.Size((rect.width + 200) * scale, (rect.height + 200) * scale),
                    scale: scale,
                    padding: 100 * scale,
                    background: '#ffffff'
                });

                $('#export-image').append(img);
                _this.imageExportLoading = false;

                _this.getTemplates().hideExportFooter();
            }, 100);
        }
    }, {
        key: 'getComponents',

        // ------------ component accessors ----------------

        value: function getComponents() {
            return [this._analytics, this._attachments, this._autosave, this._generator,
            // this._history,
            this._layouts, this._perspectives, this._presenter, this._standards, this._templates, this._tests, this._ui];
        }
    }, {
        key: 'getAnalytics',
        value: function getAnalytics() {
            return this._analytics;
        }
    }, {
        key: 'getAttachments',
        value: function getAttachments() {
            return this._attachments;
        }
    }, {
        key: 'getAutosave',
        value: function getAutosave() {
            return this._autosave;
        }
    }, {
        key: 'getGenerator',
        value: function getGenerator() {
            return this._generator;
        }
    }, {
        key: 'getLayouts',

        // this.getHistory () { return this._history; };
        value: function getLayouts() {
            return this._layouts;
        }
    }, {
        key: 'getPerspectives',
        value: function getPerspectives() {
            return this._perspectives;
        }
    }, {
        key: 'getPresenter',
        value: function getPresenter() {
            return this._presenter;
        }
    }, {
        key: 'getStandards',
        value: function getStandards() {
            return this._standards;
        }
    }, {
        key: 'getTemplates',
        value: function getTemplates() {
            return this._templates;
        }
    }, {
        key: 'getTests',
        value: function getTests() {
            return this._tests;
        }
    }, {
        key: 'getUi',
        value: function getUi() {
            return this._ui;
        }
    }, {
        key: 'currentTab',
        get: function () {
            return this._currentTab;
        },
        set: function (val) {
            // watch for tab changes
            // TODO: restore non-Angular version of this
            //this._editor.$watch('currentTab', function(newValue, oldValue) {
            //    this.currentTabChanged(newValue, oldValue);
            //});
            this.currentTabChanged(this._currentTab, val);
            this._currentTab = val;
        }
    }, {
        key: 'currentTabChanged',

        // this is called by a this._editor.$watch in init()
        value: function currentTabChanged(newValue, oldValue) {
            // console.log('currentTabChanged, newValue: ' + newValue + ', oldValue: ' + oldValue);
            // notify any interested components
            _.each(this.getComponents(), function (component) {
                if (component && component.currentTabChanged) {
                    component.currentTabChanged(newValue, oldValue);
                }
            });

            //this._editor.safeApply();
        }
    }, {
        key: 'getDiagram',
        value: function getDiagram() {
            return this._diagram;
        }
    }, {
        key: 'initTools',

        // misc. tool configuration
        value: function initTools() {
            var _this2 = this;

            // disable clicking on TextBlocks to edit - we will invoke editing in other ways
            this._diagram.allowTextEdit = false;

            // select text when activating editor;
            // use shift-enter to create new lines, enter to finish editing (NB: editor has multiline=true)
            var textTool = this._diagram.toolManager.textEditingTool;
            textTool.doActivate = function () {
                go.TextEditingTool.prototype.doActivate.call(textTool);
                if (textTool.defaultTextEditor) {
                    textTool.defaultTextEditor.select();

                    textTool.defaultTextEditor.addEventListener('keydown', function (e) {
                        if (e.which === 13 && !e.shiftKey) {
                            go.TextEditingTool.prototype.acceptText.call(textTool, go.TextEditingTool.LostFocus);
                        }
                    });
                }
            };

            // handle delete key on Mac (default behavior only uses fn-Delete to delete from canvas)
            this._diagram.commandHandler.doKeyDown = function () {
                var e = _this2._diagram.lastInput;
                var cmd = _this2._diagram.commandHandler;
                if (e.event.which === 8) {
                    cmd.deleteSelection();
                } else {
                    go.CommandHandler.prototype.doKeyDown.call(cmd); // call base method with no arguments
                }
            };

            // [disable keyboard shortcuts, as these do not do centering on zoom,
            // and can lead to confusion with browser zoom (which gets fired depends on focus)]
            // - turned back on to support pinch/zoom on iPad
            this._diagram.allowZoom = true;

            this._diagram.toolManager.mouseWheelBehavior = go.ToolManager.WheelZoom;

            // decide what kinds of Parts can be added to a Group or to top-level
            // this._diagram.commandHandler.memberValidation (grp, node) {
            //     //if (grp instanceof go.Group && node instanceof go.Group) return false;  // cannot add Groups to Groups
            //     return true;
            // };

            // default link attributes
            this._diagram.toolManager.linkingTool.archetypeLinkData = {
                type: 'noArrows'
            };

            // allow double-click in background to create a new node
            this._diagram.toolManager.clickCreatingTool.archetypeNodeData = this.getNewThingData();

            // how long mouse must be held stationary before starting a drag-select (instead of a scroll) - default was 175ms
            this._diagram.toolManager.dragSelectingTool.delay = 400;
        }
    }, {
        key: 'addDiagramListeners',

        // ----------- handling of DiagramEvents --------------------

        value: function addDiagramListeners() {
            var _this3 = this;

            // DiagramEvents to be handled here or by a component
            var diagramEvents = ['InitialLayoutCompleted', 'ChangedSelection', 'BackgroundSingleClicked', 'SelectionCopied', 'SelectionMoved', 'SelectionDeleting', 'SelectionDeleted', 'PartCreated', 'PartResized', 'ClipboardChanged', 'ClipboardPasted', 'LinkDrawn', 'LinkRelinked', 'ViewportBoundsChanged'];
            _.each(diagramEvents, function (eventName) {
                _this3._diagram.addDiagramListener(eventName, function (e) {
                    _this3.broadcastDiagramEvent(eventName, e);
                });
            });

            this._diagram.addDiagramListener('BackgroundContextClicked', function (e) {});
        }
    }, {
        key: 'broadcastDiagramEvent',

        // broadcasts the given DiagramEvent (see apidocs for go.DiagramEvent)
        // to any components that may be interested, including this one.
        value: function broadcastDiagramEvent(eventName, e) {
            this.handleDiagramEvent(eventName, e);
            _.each(this.getComponents(), function (component) {
                if (component && component.handleDiagramEvent) component.handleDiagramEvent(eventName, e);
            });
        }
    }, {
        key: 'handleDiagramEvent',
        value: function handleDiagramEvent(eventName, e) {
            //console.log('handleDiagramEvent: ' + eventName);
            if (eventName === 'ChangedSelection') {
                this.changedSelection(e);
            } else if (eventName === 'SelectionCopied') {
                this.selectionCopied(e);
            } else if (eventName === 'PartCreated') {
                this.partCreated(e);
            } else if (eventName === 'BackgroundSingleClicked') {
                this._ui.showHelpTip('canvasTip');
            } else if (eventName === 'LinkDrawn') {
                this.linkDrawn(e);
                this.setNewLinkDirection(e);
            } else if (eventName === 'LinkRelinked') {
                this.linkRelinked(e);
            } else if (eventName === 'ClipboardChanged') {
                this.clipboardChanged(e);
            } else if (eventName === 'ClipboardPasted') {
                this.clipboardPasted(e);
            }
        }
    }, {
        key: 'changedSelection',

        // handle zoom to region if applicable
        value: function changedSelection(e) {
            //console.log('this.changedSelection');
            this._diagram.updateAllTargetBindings();
            this._ui.maybeZoomToRegion();
            if (this.relationshipsSelected()) {
                this._ui.showHelpTip('relationshipTip');
            }
        }
    }, {
        key: 'partCreated',
        value: function partCreated(e) {
            //console.log('Map, PartCreated');
            var group = e.subject;
            if (!(group instanceof go.Group)) {
                return;
            }
            this._diagram.model.setDataProperty(group.data, 'layout', this._ui.getMapEditorOptions().defaultThingLayout || 'left');
            this._layouts.setNewPartLocationData(e);
        }
    }, {
        key: 'linkDrawn',

        // fix link ports when a link is created -
        // the P and R ports both cover the whole node, and the P port is on top of the R port,
        // so both P and R links get the toPort set to P by default.
        value: function linkDrawn(e) {
            var link = e.subject;
            console.log('linkDrawn, link: ' + link + ', fromPort: ' + link.fromPortId + ', toPort: ' + link.toPortId);
            if (link.fromPortId === 'P') {
                this._diagram.model.startTransaction('change link category');
                this._diagram.model.setDataProperty(link.data, 'toPort', 'P');
                this._diagram.model.setDataProperty(link.data, 'category', 'P');
                this._diagram.model.commitTransaction('change link category');
            }
            // prevent links from R to P
            else if (link.fromPortId === 'R') {
                this._diagram.model.startTransaction('change link toPort');
                this._diagram.model.setDataProperty(link.data, 'toPort', 'R');
                this._diagram.model.commitTransaction('change link toPort');
            }
        }
    }, {
        key: 'linkRelinked',

        // fix link ports when a link is relinked -
        // dragging either end of an R-link to another node will set the corresponding port to P,
        // since P port is on top of R port, so we reset both ports to R if the category is not P.
        value: function linkRelinked(e) {
            var link = e.subject;
            if (!link.data.category || link.data.category !== 'P') {
                this._diagram.model.setDataProperty(link.data, 'fromPort', 'R');
                this._diagram.model.setDataProperty(link.data, 'toPort', 'R');
            }
        }
    }, {
        key: 'setNewLinkDirection',
        value: function setNewLinkDirection(e) {
            var link = e.subject;
            if (link.fromPortId === 'R') {
                this._diagram.model.startTransaction('change link direction');
                this._diagram.model.setDataProperty(link.data, 'type', this._ui.getMapEditorOptions().defaultRelationshipDirection);
                this._diagram.commitTransaction('change link direction');
            }
        }
    }, {
        key: 'clipboardChanged',
        value: function clipboardChanged(e) {
            var parts = e.subject.iterator;
            while (parts.next()) {
                var part = parts.value;
                if (part instanceof go.Group) {
                    console.log('clipboardChanged: part ' + part + ', mainpanel scale: ' + part.findObject('mainpanel').scale);
                }
            }
        }
    }, {
        key: 'selectionCopied',

        // NB: this is called when parts are copied by control-drag, NOT when the copy button is clicked
        value: function selectionCopied(e) {
            console.log('selectionCopied');
            var parts = e.subject.iterator;
            while (parts.next()) {
                var part = parts.value;
                if (part instanceof go.Group && part.isTopLevel) {
                    var loc = go.Point.parse(part.data.loc);
                    console.log('selectionCopied: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                    this._diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                    part.updateTargetBindings('loc');
                }
            }
        }
    }, {
        key: 'clipboardPasted',
        value: function clipboardPasted(e) {
            var parts = e.subject.iterator;
            while (parts.next()) {
                var part = parts.value;
                if (part instanceof go.Group && part.isTopLevel) {
                    var loc = go.Point.parse(part.data.loc);
                    //console.log('clipboardPasted: updating loc of part ' + part + ' = ' + loc + ', scale: ' + part.scale);
                    this._diagram.model.setDataProperty(part.data, 'loc', loc.x + 50 + ' ' + (loc.y + 50));
                    part.updateTargetBindings('loc');
                }
            }
        }
    }, {
        key: 'computeMapBounds',

        // computes the bounds of all groups in the diagram - this includes all ideas/things,
        // and excludes nodes, including slides, the slide blocker, and the export footer
        value: function computeMapBounds() {
            var groups = new go.List(go.Group);
            var nodes = this._diagram.nodes;
            while (nodes.next()) {
                if (nodes.value instanceof go.Group) {
                    groups.add(nodes.value);
                }
            }
            return this._diagram.computePartsBounds(groups).copy(); // return a mutable rect
        }
    }, {
        key: 'thingsSelected',

        // ------------ what is currently selected? ----------------

        // returns true if all selected items are things (i.e. Groups), including r-things
        value: function thingsSelected() {
            if (!this._diagram || this._diagram.selection.count < 1) return false;

            var it = this._diagram.selection.iterator;
            while (it.next()) {
                if (!(it.value instanceof go.Group)) return false;
            }

            return true;
        }
    }, {
        key: 'thingSelected',

        // returns true if exactly one thing (Group) is selected
        value: function thingSelected() {
            return this._diagram && this._diagram.selection.count === 1 && this._diagram.selection.first() instanceof go.Group;
        }
    }, {
        key: 'getUniqueThingSelected',

        // if a single group is selected, returns it, otherwise returns null
        value: function getUniqueThingSelected() {
            if (this._diagram && this._diagram.selection.count === 1 && this._diagram.selection.first() instanceof go.Group) {
                return this._diagram.selection.first();
            } else {
                return null;
            }
        }
    }, {
        key: 'thingsSelectedAreMembersOf',
        value: function thingsSelectedAreMembersOf(group) {
            if (!this._diagram || this._diagram.selection.count < 1) return false;

            var it = this._diagram.selection.iterator;
            while (it.next()) {
                if (!(it.value instanceof go.Group) || it.value.containingGroup !== group) return false;
            }

            return true;
        }
    }, {
        key: 'thingsSelectedAreDescendantsOf',
        value: function thingsSelectedAreDescendantsOf(group) {
            if (!this._diagram || this._diagram.selection.count < 1) return false;

            var it = this._diagram.selection.iterator;
            while (it.next()) {
                var ancestors = this._layouts.getAncestorGroups(it.value);
                if (_.indexOf(ancestors, group) === -1) return false;
            }

            return true;
        }
    }, {
        key: 'thingsSelectedIncludeSlide',
        value: function thingsSelectedIncludeSlide() {
            if (!this._diagram || this._diagram.selection.count < 1) return false;

            var it = this._diagram.selection.iterator;
            while (it.next()) {
                if (it.value.data && it.value.data.category === 'slide') {
                    return true;
                }
            }

            return false;
        }
    }, {
        key: 'relationshipsSelected',

        // returns true if all selected items are relationships (i.e. Links)
        value: function relationshipsSelected() {
            if (!this._diagram || this._diagram.selection.count < 1) return false;

            var it = this._diagram.selection.iterator;
            while (it.next()) {
                if (!(it.value instanceof go.Link) || !this._layouts.isRLink(it.value)) return false;
            }

            return true;
        }
    }, {
        key: 'relationshipSelected',

        // returns true if exactly one relationship (Link) is selected
        value: function relationshipSelected() {
            return this._diagram && this._diagram.selection.count === 1 && this._diagram.selection.first() instanceof go.Link;
        }
    }, {
        key: 'load',

        // ------------ load and initialize model -------------

        value: function load() {
            var url = this._editor.mapUrl + '.json';
            if (this._editor.sandbox) {
                url = this._editor.mapUrl + '.json?sandbox=1';
            }
            //TODO: restore non-Angular http-get for map data
            var data = { 'map': { 'metadata': { 'sandbox': false, 'id': 5547, 'name': 'Untitled Map', 'url': '/maps/5547', 'canEdit': true, 'updatedAt': '2015-05-15T12:29:40.721-04:00', 'updatedBy': null, 'updatedByName': null, 'userTags': [] }, 'data': { 'class': 'go.GraphLinksModel', 'nodeIsLinkLabelProperty': 'isLinkLabel', 'linkLabelKeysProperty': 'labelKeys', 'linkFromPortIdProperty': 'fromPort', 'linkToPortIdProperty': 'toPort', 'nodeDataArray': [{ 'key': 1, 'text': 'New Idea', 'isGroup': true, 'loc': '0 0', 'layout': 'left', 'sExpanded': true, 'pExpanded': true }], 'linkDataArray': [] }, 'stateData': null, 'editorOptions': null, 'analytics': {}, 'versions': [] } };
            this._diagram.model = go.Model.fromJson(data);
            this._ui.setStateData(data.map.stateData);
            this._ui.setMapEditorOptions(data.map.editorOptions);

            this.checkModel();
            this._diagram.updateAllTargetBindings();
            this._diagram.undoManager.isEnabled = true;
            this._diagram.model.addChangedListener(this._autosave.modelChanged);
            this._autosave.saveOnModelChanged = true;
            this._diagram.isReadOnly = !this._editor.canEdit;
            this._editor.updateEditStatus(this._editor.canEdit ? this._editor.LAST_UPDATED : this._editor.READ_ONLY);
            this._ui.resetZoom();
            this.loadMapExtraData(data.map);

            // if no nodes OR in thinkquery mode, launch generator
            if (this._editor.thinkquery || !this._diagram.model.nodeDataArray.length) {
                this._ui.openTab(this._ui.TAB_ID_GENERATOR);
            }
            // if we have slides, play presentation
            else if (!this._editor.canEdit && this._presenter.getSlideNodeDatas().length) {
                this._presenter.playSlide(1);
            }
        }
    }, {
        key: 'loadForSandbox',
        value: function loadForSandbox() {
            this._diagram.model = go.Model.fromJson(this._editor.mapData);
            this._ui.setStateData(''); // important! (otherwise corner highlighting breaks)
            this._diagram.updateAllTargetBindings();
            this._diagram.undoManager.isEnabled = true;
            this._ui.resetZoom();
            this._editor.canEdit = true;

            // if no nodes OR in thinkquery mode, launch generator
            if (this._editor.thinkquery) {
                this._ui.openTab(this._ui.TAB_ID_GENERATOR);
            }
            // if we have slides, play presentation
            else if (this._presenter.getSlideNodeDatas().length) {
                this._presenter.playSlide(1);
            }
        }
    }, {
        key: 'checkModel',

        // fix any structural problems in the model before displaying it
        value: function checkModel() {
            // change "isLinkLabel" property to category:"LinkLabel" (change as of goJS 1.3)
            _.each(this._diagram.model.nodeDataArray, function (nodeData, index, list) {
                if (nodeData.isLinkLabel) {
                    delete nodeData.isLinkLabel;
                    nodeData.category = 'LinkLabel';
                }
            });

            // check for the link label (r-thing) for a link being the same as the from or to node
            // - this can cause infinite recursion in thinks like layout.getScale
            _.each(this._diagram.model.linkDataArray, function (linkData, index, list) {
                var badLabelKeys = [];
                _.each(linkData.labelKeys, function (key, index2, list2) {
                    if (key === linkData.from || key === linkData.to) {
                        console.log('labelKey same as from or to of link: ' + key);
                        badLabelKeys.push(key);
                    }
                });
                linkData.labelKeys = _.difference(linkData.labelKeys, badLabelKeys);
            });
        }
    }, {
        key: 'loadMapExtraData',

        // loads other data besides the diagram model from the json object returned by maps/show.json
        // - this includes points, badges, versions, and map analytics
        // NB: points and badges are set at page load time in layouts/user and users/badges, but
        // we also need to be able to update them here after an autosave

        // TODO: is this still all needed with the newer userProfile stuff?
        value: function loadMapExtraData(mapData) {
            //console.log('map.loadMapExtraData, mapData: ' + mapData);
            this._editor.mapUserTags = mapData.metadata.userTags; // TODO: is this used anywhere?

            //this._editor.map.getHistory().versionList = mapData.versions;
            this.getAnalytics().mapAnalytics = mapData.analytics;
        }
    }, {
        key: 'loadVersion',

        // loads model data for an individual version and displays it
        // NB: this also disables autosave; load() must be called to re-enable it
        value: function loadVersion(id) {
            var _this4 = this;

            $http.get('/mapthis._versions/' + id).then(function (response) {
                if (response.status === 200) {
                    try {
                        //console.log('loaded map version with ID: ' + id);
                        _this4._diagram.model = go.Model.fromJson(response.data);
                        _this4._diagram.updateAllTargetBindings();
                        _this4._diagram.undoManager.isEnabled = false;
                        _this4._autosave.saveOnModelChanged = false;
                        _this4._diagram.layoutDiagram(true);
                        _this4._diagram.isReadOnly = true;
                    } catch (e) {
                        alert('Could not load MetaMap version');
                        console.error(e.message);
                    }
                }
            });
        }
    }, {
        key: 'setEditingBlocked',

        // set whether editing capability is temporarily suspended -
        // this is distinct from the global this._editor.canEdit setting,
        // which if false prevents editing at all times
        value: function setEditingBlocked(val) {
            if (this._editor.canEdit) {
                this._diagram.isReadOnly = val;
            }
        }
    }, {
        key: 'getNewThingData',

        // ------------- creating things in the model -------------------

        // default properties for all new Things (groups) - note that these can be overridden if needed
        value: function getNewThingData() {
            return {
                text: 'Idea',
                isGroup: true,
                layout: this._ui.getMapEditorOptions().defaultThingLayout || 'left',
                sExpanded: true,
                pExpanded: true
            };
        }
    }, {
        key: 'createSister',
        value: function createSister(thing) {
            if (!this._editor.canEdit) {
                return null;
            }

            var newLoc = this._layouts.getNewSisterLocation(thing);
            var data = _.extend(this.getNewThingData(), {
                group: thing.data.group,
                text: 'Idea',
                loc: go.Point.stringify(newLoc)
            });
            this._diagram.model.addNodeData(data);
            var newSister = this._diagram.findNodeForData(data);

            // put new sister right after thing (not as the last sibling)
            if (thing.containingGroup) {
                this.moveSiblingNextTo(newSister, thing, RIGHT);
            }
            return newSister;
        }
    }, {
        key: 'createRToSister',
        value: function createRToSister(thing) {
            if (!this._editor.canEdit) {
                return null;
            }

            var thingKey = this._diagram.model.getKeyForNodeData(thing.data);
            //console.log('thingKey: ' + thingKey);
            var newLoc = this._layouts.getNewSisterLocation(thing, true); // withR = true
            var data = _.extend(this.getNewThingData(), {
                group: thing.data.group,
                text: 'Idea',
                loc: go.Point.stringify(newLoc)
            });
            this._diagram.model.addNodeData(data);
            var newSister = this._diagram.findNodeForData(data);
            var groupKey = this._diagram.model.getKeyForNodeData(data);

            // create link
            var linkData = {
                from: thingKey,
                to: groupKey,
                type: 'to',
                fromPort: 'R',
                toPort: 'R'
            };
            this._diagram.model.addLinkData(linkData);

            // put new sister right after thing (not as the last sibling)
            if (thing.containingGroup) {
                this.moveSiblingNextTo(newSister, thing, RIGHT);
            }
            return newSister;
        }
    }, {
        key: 'createChild',
        value: function createChild(thing, name, x, y) {
            if (!this._editor.canEdit) {
                return null;
            }

            var newLoc = this._layouts.getNewChildLocation2(thing);
            if (x || y) {
                newLoc = new go.Point(x, y);
            }
            var data = _.extend(this.getNewThingData(), {
                group: thing.data.key,
                text: name || 'Part',
                loc: go.Point.stringify(newLoc)
            });
            this._diagram.model.addNodeData(data);
            this._layouts.setDescendantLayouts(thing, thing.data.layout);
            var child = this._diagram.findNodeForData(data);
            child.updateTargetBindings();
            return child;
        }
    }, {
        key: 'createRThing',
        value: function createRThing(link, name) {
            if (!this._editor.canEdit) {
                return null;
            }

            // console.log('createRThing, link: ' + link + ', name: ' + name);
            // don't allow multiple R-things
            if (link.isLabeledLink) {
                // console.log('cannot create RThing, link is already labeled');
                return;
            }

            var data = _.extend(this.getNewThingData(), {
                text: name || 'Relationship Idea',
                //isLinkLabel: true,     // deprecated as of goJS 1.3
                category: 'LinkLabel', // new as of goJS 1.3
                loc: '0 0'
            });
            this._diagram.model.startTransaction('create R Thing');
            this._diagram.model.addNodeData(data);
            var key = this._diagram.model.getKeyForNodeData(data);
            var node = this._diagram.findPartForKey(key);
            node.labeledLink = link;
            this._diagram.model.commitTransaction('create R Thing');
            this._diagram.updateAllTargetBindings();

            return this._diagram.findNodeForData(data);
        }
    }, {
        key: 'createThing',

        // ---------- creating things with specified names/locations - for use by generator and tests ------------

        value: function createThing(x, y, name, layout) {
            var group = this._diagram.toolManager.clickCreatingTool.insertPart(new go.Point(x, y));
            this._diagram.model.setDataProperty(group.data, 'text', name);
            if (layout) {
                this._diagram.model.setDataProperty(group.data, 'layout', layout);
            }
            return group;
        }
    }, {
        key: 'createRLinkWithRThing',
        value: function createRLinkWithRThing(thing1, thing2, name) {
            var link = this.createRLink(thing1, thing2);
            return this.createRThing(link, name);
        }
    }, {
        key: 'createRLink',

        // returns the linkData object for the new link
        value: function createRLink(thing1, thing2) {
            this._diagram.model.startTransaction('add link');
            var data = {
                type: 'noArrows',
                from: thing1.data.key,
                to: thing2.data.key,
                fromPort: 'R',
                toPort: 'R'
            };
            this._diagram.model.addLinkData(data);
            this._diagram.model.commitTransaction('add link');
            return this._diagram.findLinkForData(data);
        }
    }, {
        key: 'createPLink',

        // returns the linkData object for the new link
        value: function createPLink(thing1, thing2) {
            this._diagram.model.startTransaction('add link');
            var data = {
                type: 'noArrows',
                from: thing1.data.key,
                to: thing2.data.key,
                fromPort: 'P',
                toPort: 'P',
                category: 'P'
            };
            this._diagram.model.addLinkData(data);
            this._diagram.model.commitTransaction('add link');
            this._diagram.model.setDataProperty(thing1.data, 'pExpanded', true);
            return this._diagram.findLinkForData(data);
        }
    }, {
        key: 'getSelectedGroups',

        // ------------- moving things in the model structure -------------------

        // returns a go.List of the items in the current selection that are Groups
        value: function getSelectedGroups() {
            var it = this._diagram.selection.iterator;
            var members = new go.List();
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group) {
                    members.add(part);
                }
            }
            return members;
        }
    }, {
        key: 'addSelectedThingsAsChildrenOf',

        // drag to S
        value: function addSelectedThingsAsChildrenOf(group) {
            var newMembers = this.getSelectedGroups();

            // check existing members so we can calculate layout
            var oldMemberBounds = this.safeRect(this._diagram.computePartsBounds(group.memberParts));

            // NB: this is subject to validation by CommandHandler.isValidMember,
            // so for example, members of members of newMembers will not be added as members
            group.addMembers(newMembers);

            this._layouts.layoutNewMembersRelativeTo(newMembers, group, oldMemberBounds);

            this._diagram.clearSelection();
        }
    }, {
        key: 'addSelectedThingsAsSistersOf',

        // drag to D
        value: function addSelectedThingsAsSistersOf(group) {
            var oldMembers = this.getSelectedGroups();

            // if dragging to top level, move dragged things so they don't overlap the former parent
            if (!group.containingGroup) {
                // check existing members so we can calculate layout
                var oldMembersBounds = this._diagram.computePartsBounds(oldMembers);
                // NB: oldMembers can be on multiple levels, so not clear which level to use for rescaling old members after drag
                var oldMembersLevel = this._layouts.computeLevel(oldMembers.first());

                var it = oldMembers.iterator;
                while (it.next()) {
                    var member = it.value;
                    member.containingGroup = null;
                }
                this._layouts.layoutOldMembersOutsideOf(oldMembers, group, oldMembersBounds, oldMembersLevel);
            }
            // if not dragging to top level, place dragged things after former parent in outline
            else {
                var it2 = oldMembers.iterator;
                while (it2.next()) {
                    var member2 = it2.value;
                    member2.containingGroup = group.containingGroup;
                    this.moveSiblingNextTo(member2, group, RIGHT);
                }
            }
            this._diagram.clearSelection();
        }
    }, {
        key: 'addSelectedThingAsOrderedSisterOf',

        // for dragging parts within a system - side is LEFT or RIGHT (i.e. above or below, resp. in inventory layout)
        value: function addSelectedThingAsOrderedSisterOf(group, side) {
            //console.log('addSelectedThingAsOrderedSisterOf, side: ' + side);
            var thing = this.getUniqueThingSelected();
            if (!thing) {
                return;
            }
            this.moveSiblingNextTo(thing, group, side);
        }
    }, {
        key: 'moveSiblingNextTo',

        // moves the first thing (sibling) to be after the second thing (group)
        // in the part ordering - they are assumed to be siblings
        // side is LEFT or RIGHT
        value: function moveSiblingNextTo(sibling, group, side) {
            var parent = group.containingGroup;
            console.log('moveSiblingNextTo, sibling: ' + sibling + ', group: ' + group + ', parent: ' + parent + ', sibling.containingGroup: ' + sibling.containingGroup);

            if (!parent || sibling.containingGroup !== parent) {
                console.error('Cannot do moveSiblingNextTo on non-siblings or top-level groups');
            }

            // create new member order
            var memberOrder = new go.List();
            var it = parent.memberParts;
            var order = 0;
            while (it.next()) {
                var member = it.value;
                if (member instanceof go.Group) {
                    // we're at the target group, so add the moved thing either before or after it
                    if (member === group) {
                        if (side === LEFT) {
                            memberOrder.add(sibling);
                            this._diagram.model.setDataProperty(sibling.data, 'order', order++);
                            memberOrder.add(member);
                            this._diagram.model.setDataProperty(member.data, 'order', order++);
                        } else {
                            memberOrder.add(member);
                            this._diagram.model.setDataProperty(member.data, 'order', order++);
                            memberOrder.add(sibling);
                            this._diagram.model.setDataProperty(sibling.data, 'order', order++);
                        }
                    }
                    // don't re-add the moved thing, it was added above
                    else if (member !== sibling) {
                        memberOrder.add(member);
                        this._diagram.model.setDataProperty(member.data, 'order', order++);
                    }
                }
            }

            // clear existing members
            var newIt = memberOrder.iterator;
            while (newIt.next()) {
                var member2 = newIt.value;
                member2.containingGroup = null;
            }

            // add new members
            newIt.reset();
            while (newIt.next()) {
                var member3 = newIt.value;
                member3.containingGroup = parent;
            }
        }
    }, {
        key: 'addThingAsRThing',
        value: function addThingAsRThing(thing, link) {
            thing.labeledLink = link;
            thing.updateTargetBindings();
        }
    }, {
        key: 'toggleDFlag',

        // D corner handler (single click)
        value: function toggleDFlag(thing) {
            this._diagram.model.setDataProperty(thing.data, 'dflag', !thing.data.dflag);
            thing.updateTargetBindings();
        }
    }, {
        key: 'toggleSExpansion',

        // S corner handler (single click)
        value: function toggleSExpansion(thing) {
            var isExpanded = !(thing.data && !thing.data.sExpanded); // expand by default if property not present
            this._diagram.model.setDataProperty(thing.data, 'sExpanded', !isExpanded);
            thing.updateTargetBindings();
            this._ui.showCornerTip(thing, 'S');
        }
    }, {
        key: 'togglePExpansion',

        // P corner handler (single click)
        value: function togglePExpansion(thing) {
            this._diagram.model.setDataProperty(thing.data, 'pExpanded', !this.pIsExpanded(thing));
            thing.updateTargetBindings();
            this._ui.showCornerTip(thing, 'P');
        }
    }, {
        key: 'pIsExpanded',
        value: function pIsExpanded(group) {
            return group.data && group.data.pExpanded === true;
        }
    }, {
        key: 'canUndo',

        // ---------------------- undo/redo --------------------

        value: function canUndo() {
            return this._diagram.commandHandler.canUndo();
        }
    }, {
        key: 'undo',
        value: function undo() {
            this._diagram.commandHandler.undo();
            this._diagram.layoutDiagram(true);
        }
    }, {
        key: 'canRedo',
        value: function canRedo() {
            return this._diagram.commandHandler.canRedo();
        }
    }, {
        key: 'redo',
        value: function redo() {
            this._diagram.commandHandler.redo();
            this._diagram.layoutDiagram(true);
        }
    }, {
        key: 'refresh',
        value: function refresh() {
            this._diagram.updateAllTargetBindings();
            this._diagram.layoutDiagram(true);
        }
    }, {
        key: 'safeRect',

        // ------------------- utility ----------------------

        // check for a rect with NaN X/Y/W/H coords, so we can do stuff with it such as unionRect
        // (NaN,NaN,0,0) => (0,0,0,0)
        value: function safeRect(rect) {
            if (isNaN(rect.x)) {
                rect.x = 0;
            }
            if (isNaN(rect.y)) {
                rect.y = 0;
            }
            if (isNaN(rect.width)) {
                rect.width = 0;
            }
            if (isNaN(rect.height)) {
                rect.height = 0;
            }
            return rect;
        }
    }, {
        key: 'loadModel',

        // ------------------- debug map model ----------------------
        value: function loadModel() {
            $('#map-model-debug').val(this._diagram.model.toJson());
        }
    }, {
        key: 'saveModel',
        value: function saveModel() {
            this._diagram.model = go.Model.fromJson($('#map-model-debug').val());
            this._diagram.updateAllTargetBindings();
            this._diagram.model.addChangedListener(this._autosave.modelChanged);
            this._autosave.saveOnModelChanged = true;
        }
    }]);

    return Map;
})();

module.exports = Map;

// TODO: turn off in production
//console.log('diagram model:' + this._diagram.model.toJson());

},{"./EditorConfig.js":40}],43:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;

// functions for editing perspectives AND distinctions, which work similarly in the UI

var Perspectives = (function () {
    function Perspectives(editor, map) {
        _classCallCheck(this, Perspectives);

        // temporary state flag for adding/removing P/D selections programmatically
        this.selectingLinkedThings = false;

        this._editor = editor;
        this._map = map;
    }

    _createClass(Perspectives, [{
        key: 'currentTabChanged',
        value: function currentTabChanged(newValue, oldValue) {
            //console.log('Perspectives, currentTabChanged');
            if (newValue === this._map.getUi().TAB_ID_PERSPECTIVES) {
                // opening perspectives
                this.setPorDThing('P');
                this._map.setEditingBlocked(true);
            } else if (oldValue === this._map.getUi().TAB_ID_PERSPECTIVES) {
                // closing perspectives
                this.saveLinks('P');
                this._map.setEditingBlocked(false);
            } else if (newValue === this._map.getUi().TAB_ID_DISTINCTIONS) {
                // opening distinctions
                this.setPorDThing('D');
                this._map.setEditingBlocked(true);
            } else if (oldValue === this._map.getUi().TAB_ID_DISTINCTIONS) {
                // closing distinctions
                this.saveLinks('D');
                this._map.setEditingBlocked(false);
            }
        }
    }, {
        key: 'handleDiagramEvent',
        value: function handleDiagramEvent(eventName, e) {
            if (eventName === 'ChangedSelection') {
                if (this._map.getUi().currentTabIs(this._map.getUi().TAB_ID_PERSPECTIVES) || this._map.getUi().currentTabIs(this._map.getUi().TAB_ID_DISTINCTIONS)) {
                    this.updateLinks();
                }
            }
        }
    }, {
        key: 'isInPOrDEditorMode',

        // ---------- P/D Editor state

        value: function isInPOrDEditorMode() {
            return this._map.getUi().state.perspectivePointKey || this._map.getUi().state.distinctionThingKey;
        }
    }, {
        key: 'isInPEditorMode',
        value: function isInPEditorMode() {
            return this._map.getUi().state.perspectivePointKey;
        }
    }, {
        key: 'isInDEditorMode',
        value: function isInDEditorMode() {
            return this._map.getUi().state.distinctionThingKey;
        }
    }, {
        key: 'isPEditorPoint',
        value: function isPEditorPoint(group) {
            return this._map.getUi().state.perspectivePointKey === group.data.key;
        }
    }, {
        key: 'isDEditorThing',
        value: function isDEditorThing(group) {
            return this._map.getUi().state.distinctionThingKey === group.data.key;
        }
    }, {
        key: 'setPEditorPoint',

        // NB: this is called via this._map.getCornerFunction, so we get the extra corner arg, which we can ignore
        value: function setPEditorPoint(thing, corner) {
            if (this._editor.canEdit) {
                this._map.getUi().openTab(this._map.getUi().TAB_ID_PERSPECTIVES);
            }
        }
    }, {
        key: 'setDEditorThing',
        value: function setDEditorThing(thing) {
            if (this._editor.canEdit) {
                // NB: need to select only this thing, since this is invoked
                // by a control-click, which will not automatically select just it
                this._map.getDiagram().clearSelection();
                thing.isSelected = true;
                this._map.getUi().openTab(this._map.getUi().TAB_ID_DISTINCTIONS);
            }
        }
    }, {
        key: 'isPerspectivePoint',

        // -----------------------

        value: function isPerspectivePoint(group) {
            var links = group.findLinksOutOf();
            while (links.next()) {
                var link = links.value;
                if (link.data.category === 'P') {
                    return true;
                }
            }
            return false;
        }
    }, {
        key: 'isSelectedPerspectiveView',
        value: function isSelectedPerspectiveView(group) {
            var links = group.findLinksInto();
            while (links.next()) {
                var link = links.value;
                if (link.data.category === 'P' && this._map.pIsExpanded(link.fromNode) && link.fromNode.isSelected) {
                    return true;
                }
            }
            return false;
        }
    }, {
        key: 'isToggledPerspectiveView',
        value: function isToggledPerspectiveView(group) {
            var links = group.findLinksInto();
            while (links.next()) {
                var link = links.value;
                if (link.data.category === 'P' && this._map.pIsExpanded(link.fromNode)) {
                    return true;
                }
            }
            return false;
        }
    }, {
        key: 'isMouseOverPerspectiveView',
        value: function isMouseOverPerspectiveView(group) {
            var links = group.findLinksInto();
            while (links.next()) {
                var link = links.value;
                if (link.data.category === 'P' && link.fromNode === this._map.getUi().mouseOverGroup) {
                    return true;
                }
            }
            return false;
        }
    }, {
        key: 'getPerspectiveViewWeight',
        value: function getPerspectiveViewWeight(group) {
            var mode = this._map.getUi().getMapEditorOptions().perspectiveMode;
            if (mode === 'spotlight' || mode === 'both') {
                return (this.isSelectedPerspectiveView(group) ? 1 : 0) + (this.isToggledPerspectiveView(group) ? 1 : 0) + (this.isMouseOverPerspectiveView(group) ? 1 : 0);
            } else {
                return 0;
            }
        }
    }, {
        key: 'setPorDThing',

        // -----------------------

        // category is "P" or "D" (perspectives or distinctions)
        value: function setPorDThing(category) {
            // if already set, must do save perspectives or save distinctions
            if (this._map.getUi().state.perspectivePointKey || this._map.getUi().state.distinctionThingKey) return;

            var thing = this._map.getDiagram().selection.first();
            //console.log('setPorDThing: ' + thing);
            if (thing instanceof go.Group) {
                var key = thing.data.key;
                if (category === 'P') {
                    this._map.getUi().state.perspectivePointKey = key;
                } else if (category === 'D') {
                    this._map.getUi().state.distinctionThingKey = key;
                }

                // select views/others
                this.selectLinkedThingsFor(thing, category);
            }
        }
    }, {
        key: 'updateLinks',

        // this is called when the selection changes - if the thing is set,
        // adds/removes D/P links according to what is selected; otherwise
        // just shows/hides D/P links for the selected thing(s)
        value: function updateLinks() {
            if (this.selectingLinkedThings) // selection is being changed programmatically, so don't respond
                return;

            var pOrDThing = null;
            var category = null;
            if (this._map.getUi().state.perspectivePointKey) {
                pOrDThing = this._map.getDiagram().findNodeForKey(this._map.getUi().state.perspectivePointKey);
                category = 'P';
            } else if (this._map.getUi().state.distinctionThingKey) {
                pOrDThing = this._map.getDiagram().findNodeForKey(this._map.getUi().state.distinctionThingKey);
                category = 'D';
            }

            var addLinksTo = new go.List();
            var removeLinks = new go.List();

            // iterate through all things
            if (category) {
                var layers = this._map.getDiagram().layers;
                while (layers.next()) {
                    var layer = layers.value;
                    var parts = layer.parts;
                    while (parts.next()) {
                        var part = parts.value;
                        if (part instanceof go.Group) {
                            // calculate links to add/remove based on selection
                            if (pOrDThing) {
                                var links = part.findLinksInto();
                                var existingLink = null;
                                while (links.next()) {
                                    var link = links.value;
                                    if (link.fromNode.data.key === pOrDThing.data.key && link.data.category === category) existingLink = link;
                                }

                                // decide whether to add or remove a link to the part, depending on whether
                                // it is selected and whether a link exists
                                if (!existingLink && part.isSelected) addLinksTo.add(part);else if (existingLink && !part.isSelected) removeLinks.add(existingLink);
                            }
                        }
                    }
                }
            }

            // do the adding/removing of links
            var adds = addLinksTo.iterator;
            while (adds.next()) {
                this._map.getDiagram().model.startTransaction('add link');
                var to = adds.value;
                console.log('updateLinks: adding link from ' + pOrDThing + ' to ' + to);
                if (category === 'D' && pOrDThing.data.key === to.data.key) {
                    pOrDThing.isSelected = false;
                    alert('You can\'t distinguish a thing from itself!');
                    continue;
                }
                this._map.getDiagram().model.addLinkData({
                    from: pOrDThing.data.key,
                    to: to.data.key,
                    fromPort: category,
                    toPort: category,
                    category: category
                });
                this._map.getDiagram().model.commitTransaction('add link');
            }
            var removes = removeLinks.iterator;
            while (removes.next()) {
                var remove = removes.value;
                console.log('updateLinks: removing link from ' + remove.fromNode + ' to ' + remove.toNode);
                this._map.getDiagram().model.startTransaction('remove link');
                this._map.getDiagram().remove(remove);
                this._map.getDiagram().model.removeLinkData(remove.data);
                this._map.getDiagram().model.commitTransaction('remove link');
            }

            // show links
            this._map.getDiagram().updateAllTargetBindings();
        }
    }, {
        key: 'saveLinks',
        value: function saveLinks(category) {
            var pOrDThing = null;
            if (category === 'P') {
                pOrDThing = this._map.getDiagram().findNodeForKey(this._map.getUi().state.perspectivePointKey);
                this._map.getUi().state.perspectivePointKey = null;
            } else if (category === 'D') {
                pOrDThing = this._map.getDiagram().findNodeForKey(this._map.getUi().state.distinctionThingKey);
                this._map.getUi().state.distinctionThingKey = null;
            }

            this._map.getDiagram().clearSelection();
            this._map.getDiagram().updateAllTargetBindings();
        }
    }, {
        key: 'selectLinkedThingsFor',
        value: function selectLinkedThingsFor(group, category) {
            this.selectingLinkedThings = true;
            this._map.getDiagram().clearSelection();

            var links = group.findLinksOutOf();
            while (links.next()) {
                var link = links.value;
                if (link.data.category === category) link.toNode.isSelected = true;
            }

            this.selectingLinkedThings = false;
        }
    }]);

    return Perspectives;
})();

module.exports = Perspectives;

},{}],44:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;
var SLIDE_BLOCKER_WIDTH = 1000;
var SLIDE_BLOCKER_COLOR = '#fff';
var SLIDE_BLOCKER_OPACITY = 0.9;

// functions for the presenter/slides

var Presenter = (function () {
    function Presenter(editor, map) {
        _classCallCheck(this, Presenter);

        this._editor = editor;
        this._map = map;

        this.currentSlideIndex = null;
        this.isPresenting = false;
        this.showTOC = false;
        this.isCreatingThumbnail = false;

        // mask applied around slide region when presenting
        this.slideBlocker = null;

        this.diagramAspectRatio = null;

        // NB: hasLinks can have values false, 1, or true (1 means only a single link)
        this.slideTypes = [{
            name: 'TITLE_BODY', label: 'Title and Body',
            hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: false, hasMapSummary: false, hasLinks: false
        }, {
            name: 'TITLE_BODY_MAP', label: 'Title, Body and MetaMap',
            hasTitle: true, hasNotes: true, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
        }, {
            name: 'ACTIVITY_MAP', label: 'Lesson Activity and MetaMap',
            hasTitle: true, hasNotes: true, hasChecks: true, hasMapRegion: true, hasMapSummary: false, hasLinks: true
        }, {
            name: 'MAP_ONLY', label: 'MetaMap only',
            hasTitle: true, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: false, hasLinks: false
        }, {
            name: 'MAP_SUMMARY', label: 'MetaMap Summary',
            hasTitle: false, hasNotes: false, hasChecks: false, hasMapRegion: true, hasMapSummary: true, hasLinks: false
        }];

        // ------------------ link/attachment types -----------------------
        this.linkTypes = [{ name: '', label: '-- Select attachment type --' }, { name: 'WEB', label: 'Web Page' }, { name: 'PDF', label: 'PDF' }, { name: 'DOC', label: 'Document' }, { name: 'SPREADSHEET', label: 'Spreadsheet' }, { name: 'PRESENTATION', label: 'Presentation' }, { name: 'METAMAP', label: 'MetaMap' }, { name: 'IMAGE', label: 'Image' }, { name: 'AUDIO', label: 'Audio' }, { name: 'VIDEO', label: 'Video' }, { name: 'SURVEY', label: 'Survey' }, { name: 'WORKSHEET', label: 'Worksheet' }];

        // ------------ list of all things in the map, for map summary slides ---------------------
        this.ideaList = '';

        this.summaryAnalytics = [{ name: 'COUNT_THINGS', singularLabel: 'Distinction', pluralLabel: 'Distinctions' }, { name: 'COUNT_SYSTEMS', singularLabel: 'System', pluralLabel: 'Systems' }, { name: 'COUNT_RELATIONSHIPS', singularLabel: 'Relationship', pluralLabel: 'Relationships' }, { name: 'COUNT_PERSPECTIVES', singularLabel: 'Perspective', pluralLabel: 'Perspectives' }, { name: 'COUNT_RTHINGS', singularLabel: 'Relationship Idea', pluralLabel: 'Relationship Ideas' }, { name: 'COUNT_SYSTEM_RTHINGS', singularLabel: 'Relationship System', pluralLabel: 'Relationship Systems' }, { name: 'COUNT_SYSTEM_PERSPECTIVES', singularLabel: 'Perspective System', pluralLabel: 'Perspective Systems' }, { name: 'COUNT_DISTINCTIONS', singularLabel: 'Advanced Distinction', pluralLabel: 'Advanced Distinctions' }];

        this.thumbnailCache = [];
    }

    _createClass(Presenter, [{
        key: 'autosave',
        value: function autosave() {
            this._map.getAutosave().save('edit_presenter');
        }
    }, {
        key: 'updateIdeaList',

        // ---------- editing functions for different slide types -------------

        // only call this occasionally, as they won't be editing the map while presenter is open
        value: function updateIdeaList() {
            var nodes = this._map.getDiagram().nodes;
            var list = [];
            while (nodes.next()) {
                if (nodes.value instanceof go.Group) {
                    list.push(nodes.value.data.text);
                }
            }
            list.sort();

            // filter out placeholder names - see this._map.js:getNewThingData, createSister, etc.
            list = _.difference(_.uniq(list, true), this._map.getGenerator().getPlaceholderIdeaNames(), ['New Idea', 'New Distinguished Idea', 'New Related Idea', 'New Relationship Idea', 'New Part Idea', 'Idea', 'Part', 'Relationship Idea'] // newer simplified names
            );

            this.ideaList = list.join(', ');
        }
    }, {
        key: 'addCheck',
        value: function addCheck(nodeData) {
            nodeData.checks.push({ text: '' });
            this.autosave();
        }
    }, {
        key: 'deleteCheck',
        value: function deleteCheck(check, nodeData) {
            var i = _.indexOf(nodeData.checks, check);
            nodeData.checks.splice(i, 1);
            this.autosave();
        }
    }, {
        key: 'addLink',
        value: function addLink(nodeData) {
            nodeData.links.push({ title: '', url: '', type: '' });
            this.autosave();
        }
    }, {
        key: 'deleteLink',
        value: function deleteLink(link, nodeData) {
            var i = _.indexOf(nodeData.links, link);
            nodeData.links.splice(i, 1);
            this.autosave();
        }
    }, {
        key: 'toggleTOC',
        value: function toggleTOC() {
            if (this.isPresenting) {
                this.showTOC = !this.showTOC;
            }
        }
    }, {
        key: 'maybeInitSlideBlocker',

        // NB: can't create this in init as the diagram doesn't exist yet...
        value: function maybeInitSlideBlocker() {
            if (!this.slideBlocker) {
                var mk = go.GraphObject.make;
                this.slideBlocker = mk(go.Node, go.Panel.Auto, {
                    layerName: 'Tool',
                    opacity: SLIDE_BLOCKER_OPACITY
                }, mk(go.Shape, 'Rectangle', {
                    fill: null,
                    stroke: SLIDE_BLOCKER_COLOR,
                    strokeWidth: 1000
                }));
                this._map.getDiagram().add(this.slideBlocker);
            }
        }
    }, {
        key: 'currentTabChanged',

        // called when a tab is opened or closed
        value: function currentTabChanged(newValue, oldValue) {
            if (oldValue === this._map.getUi().TAB_ID_PRESENTER) {
                // closing tab
                this.stopPresenting();
            } else if (newValue === this._map.getUi().TAB_ID_PRESENTER) {
                // opening tab
                // show slides (see layouts.slideTemplate, binding of visible attr)
                this.diagramAspectRatio = $('#diagram').width() / $('#diagram').height();
                console.log('diagramAspectRatio: ' + this.diagramAspectRatio);

                this._map.getDiagram().updateAllTargetBindings();
                this.updateIdeaList();
                if (!this.currentSlideIndex && this.getSlideNodeDatas().length > 0) {
                    this.currentSlideIndex = 1;
                }
                this.slideThumbnailSelected(1);
            }
        }
    }, {
        key: 'handleDiagramEvent',
        value: function handleDiagramEvent(eventName, e) {
            if (!this._map.getUi().currentTabIs(this._map.getUi().TAB_ID_PRESENTER)) {
                return;
            }

            if (eventName === 'SelectionDeleting') {
                var selection = e.subject;
                if (selection.count === 1) {
                    var thing = selection.first();
                    if (thing instanceof go.Node && thing.data.category === 'slide') {
                        if (!confirm('Delete this slide from the presentation?')) {
                            e.cancel = true;
                        }
                    }
                }
            } else if (eventName === 'SelectionDeleted') {
                // if slide is deleted from canvas rather than by thumbnail x button, need to update indexes
                this.compactSlideIndexes();
            } else if (eventName === 'SelectionMoved' || eventName === 'PartResized') {
                // clear thumbnail cache
                this.thumbnailCache = [];
            } else if (eventName === 'ViewportBoundsChanged') {}
        }
    }, {
        key: 'windowResized',
        get: function () {
            var _this = this;

            if (!this._windowResized) {
                this._windowResized = _.debounce(function () {
                    _this.slideThumbnailSelected(_this.currentSlideIndex);
                }, 1000);
            }
            return this._windowResized;
        }
    }, {
        key: 'showSidebar',
        value: function showSidebar() {
            return this._map.getUi().currentTabIs(this._map.getUi().TAB_ID_PRESENTER) && (!this.isPresenting || this.showTOC);
        }
    }, {
        key: 'disableMapToolbarButtons',
        value: function disableMapToolbarButtons() {
            return !this._map.getUi().currentTabIs(this._map.getUi().TAB_ID_PRESENTER) || this.isPresenting || !this.getCurrentSlideType().hasMapRegion;
        }
    }, {
        key: 'getSlideNodeDatas',

        // returns an array of node data objects (not the slide nodes themselves)
        value: function getSlideNodeDatas() {
            var diagram = this._map.getDiagram();
            var nodes = diagram.model.nodeDataArray;
            var nodeDatas = _.filter(nodes, function (node) {
                return node.category === 'slide';
            });
            nodeDatas = _.sortBy(nodeDatas, function (nodeData) {
                return nodeData.index;
            });
            //console.log('getSlideNodeDatas, indexes: ' + _.pluck(slidesData, 'index'));
            return nodeDatas;
        }
    }, {
        key: 'getSlideCount',
        value: function getSlideCount() {
            return this.getSlideNodeDatas().length;
        }
    }, {
        key: 'getActivitySlideCount',
        value: function getActivitySlideCount() {
            return _.where(this.getSlideNodeDatas(), { type: 'ACTIVITY_MAP' }).length;
        }
    }, {
        key: 'getSlideType',
        value: function getSlideType(typeName) {
            return _.findWhere(this.slideTypes, { name: typeName });
        }
    }, {
        key: 'getCurrentSlideType',
        value: function getCurrentSlideType() {
            var slide = this.findSlideByIndex(this.currentSlideIndex);
            if (slide) {
                return _.findWhere(this.slideTypes, { name: slide.data.type });
            } else {
                return {};
            }
        }
    }, {
        key: 'findSlideByIndex',
        value: function findSlideByIndex(index) {
            var diagram = this._map.getDiagram();
            var slideData = _.find(this.getSlideNodeDatas(), function (slideData) {
                return slideData.index === index;
            });
            if (slideData) {
                return diagram.findNodeForKey(slideData.key);
            } else {
                return undefined;
            }
        }
    }, {
        key: 'moveSlide',

        // increment is -1 or +1
        value: function moveSlide(index, increment) {

            var diagram = this._map.getDiagram();
            var slide = this.findSlideByIndex(index);
            var neighbor = this.findSlideByIndex(index + increment);
            if (slide && neighbor) {
                //console.log('moveSlide: swapping ' + slide.data.key + ' with ' + neighbor.data.key);
                diagram.startTransaction('move slide');
                diagram.model.setDataProperty(slide.data, 'index', slide.data.index + increment);
                diagram.model.setDataProperty(neighbor.data, 'index', neighbor.data.index - increment);
                diagram.commitTransaction('move slide');
                this.thumbnailCache = [];
            }
        }
    }, {
        key: 'compactSlideIndexes',
        value: function compactSlideIndexes() {

            //console.log('compactSlideIndexes');
            var slidesData = this.getSlideNodeDatas();
            var diagram = this._map.getDiagram();
            var newIndex = 1;
            diagram.startTransaction('compact slide indexes');
            _.each(slidesData, function (slideData) {
                diagram.model.setDataProperty(slideData, 'index', newIndex);
                //console.log('compactSlideIndexes: set index for ' + slideData.key + ' to ' + newIndex);
                newIndex++;
            });
            diagram.commitTransaction('compact slide indexes');
        }
    }, {
        key: 'getNewSlideKey',
        value: function getNewSlideKey() {
            var diagram = this._map.getDiagram();
            var i = 1;
            while (diagram.model.findNodeDataForKey('slide-' + i)) {
                i++;
            }
            return 'slide-' + i;
        }
    }, {
        key: 'getNewSlideIndex',

        // NB: indexes (and keys?) must be 1-based, otherwise first slide gets screwed up
        // (somewhere the index shows up as '' instead of 0)
        value: function getNewSlideIndex() {
            var slides = this.getSlideNodeDatas();
            return slides.length + 1;
        }
    }, {
        key: 'addSlide',
        value: function addSlide(typeName) {

            console.log('addSlide: ' + typeName);
            var diagram = this._map.getDiagram();

            var db = this._map.computeMapBounds();
            db.inflate(db.width / 20, db.height / 10);
            var newLoc = db.x + ' ' + db.y;
            var newIndex = this.getNewSlideIndex();

            var slideType = _.findWhere(this.slideTypes, { name: typeName });

            diagram.startTransaction('add slide');
            diagram.model.addNodeData({
                key: this.getNewSlideKey(),
                category: 'slide',
                index: newIndex,
                isGroup: false,
                width: db.width,
                height: db.height,
                loc: newLoc,
                level: 0,
                children: 0,
                type: typeName,
                title: '',
                notes: '',
                checks: [],
                hasRegion: slideType.hasMapRegion,
                isSummary: slideType.hasMapSummary,
                links: []
            });
            diagram.commitTransaction('add slide');
            this.thumbnailCache = [];

            this.slideThumbnailSelected(newIndex); // trigger display of edit form, zoom to map region if applicable
        }
    }, {
        key: 'duplicateSlide',
        value: function duplicateSlide(index) {

            var diagram = this._map.getDiagram();
            var newIndex = this.getNewSlideIndex();
            var slide = this.findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction('duplicate slide');

                // bump up indexes on subsequent slides to make room for new slide after current one
                _.each(this.getSlideNodeDatas(), function (slideData) {
                    if (slideData.index > index) {
                        diagram.model.setDataProperty(slideData, 'index', slideData.index + 1);
                    }
                });

                // NB: creating a new nodeData object here rather than copying and modifying, to avoid copying $$hashKey (??)
                diagram.model.addNodeData({
                    key: this.getNewSlideKey(),
                    category: 'slide',
                    index: index + 1,
                    isGroup: false,
                    width: slide.data.width,
                    height: slide.data.height,
                    loc: slide.data.loc,
                    level: 0,
                    children: 0,
                    type: slide.data.type,
                    title: slide.data.title + ' (Copy)',
                    notes: slide.data.notes,
                    checks: slide.data.checks, // clone?
                    hasRegion: slide.data.hasRegion,
                    isSummary: slide.data.isSummary,
                    links: slide.data.links // clone?
                });
                diagram.commitTransaction('duplicate slide');
                this.thumbnailCache = [];
            }
        }
    }, {
        key: 'removeSlide',
        value: function removeSlide(index) {

            //console.log('removeSlide: ' + index);
            var diagram = this._map.getDiagram();
            var slide = this.findSlideByIndex(index);
            if (slide) {
                diagram.startTransaction('remove slide');
                diagram.model.removeNodeData(slide.data);
                diagram.commitTransaction('remove slide');
            }
            this.currentSlideIndex = null;
            this.thumbnailCache = [];
            this.compactSlideIndexes();
        }
    }, {
        key: 'getSlideThumbnail',
        value: function getSlideThumbnail(index) {
            return this.thumbnailCache[index];
        }
    }, {
        key: 'createSlideThumbnails',
        value: function createSlideThumbnails() {
            var _this2 = this;

            _.each(this.getSlideNodeDatas(), function (nd) {
                _this2.createSlideThumbnail(nd.index);
            });
        }
    }, {
        key: 'createSlideThumbnail',
        value: function createSlideThumbnail(index) {
            //console.log('createSlideThumbnail');

            var thumbWidth = 1000;
            var thumbHeight = 600;
            var diagram = this._map.getDiagram();

            var slide = this.findSlideByIndex(index);
            if (!slide) {
                return '';
            } else if (!slide.data.hasRegion && !slide.data.isSummary) {
                return '';
            } else {
                var db = diagram.documentBounds;
                var sb = undefined;
                if (slide.data.isSummary) {
                    // for a summary slide we shoot the whole map
                    sb = this._map.safeRect(this._map.computeMapBounds());
                } else {
                    // otherwise just shoot the slide region
                    sb = slide.part.actualBounds;
                }

                var imagePosition = new go.Point(sb.x, sb.y);
                //console.log('getSlideThumbnail, slide bounds: ' + sb + ', document bounds: ' + db + ', imagePosition: ' + imagePosition);

                var wScale = thumbWidth / sb.width;
                var hScale = thumbHeight / sb.height;
                var thumbScale = Math.min(wScale, hScale);
                console.log('scale: ' + wScale + ',' + hScale);

                var w = thumbScale * sb.width;
                var h = thumbScale * sb.height;
                //console.log('thumbnail w/h: ' + w + ',' + h);

                // hide slides temporarily while creating thumbnail
                this.isCreatingThumbnail = true;
                diagram.updateAllTargetBindings();

                diagram.scale = thumbScale;

                var imgData = diagram.makeImageData({
                    size: new go.Size(w, h),
                    position: imagePosition,
                    scale: thumbScale
                });

                this.isCreatingThumbnail = false;
                diagram.updateAllTargetBindings();

                this.thumbnailCache[index] = imgData;

                return imgData;
            }
        }
    }, {
        key: 'getMapThumbnail',

        // gets a thumbnail of the whole map, for saving (see autosave.js)
        value: function getMapThumbnail() {

            var diagram = this._map.getDiagram();
            var sb = this._map.safeRect(this._map.computeMapBounds());
            sb.grow(10, 10, 10, 10);
            var w = 150;
            var h = 100;

            // hide slides temporarily while creating thumbnail
            this.isCreatingThumbnail = true;
            diagram.updateAllTargetBindings();

            var imgData = diagram.makeImageData({
                scale: Math.min(h / sb.height, w / sb.width),
                position: new go.Point(sb.x, sb.y),
                size: new go.Size(w, h)
            });

            this.isCreatingThumbnail = false;
            diagram.updateAllTargetBindings();

            return imgData;
        }
    }, {
        key: 'slideThumbnailSelected',

        // called via ng-click on thumbnail
        value: function slideThumbnailSelected(index) {
            //console.log('slideThumbnailSelected: ' + index);
            var diagram = this._map.getDiagram();
            var slide = this.findSlideByIndex(index);

            // NB: order of statements is important here, as selectSlide can trigger changedSelection with an empty selection sometimes... ??
            this.selectSlide(index);
            this.currentSlideIndex = index;
            diagram.updateAllTargetBindings(); // show/hide slide nodes - see templates.js: slideTemplate

            if (slide) {
                this.zoomToSlideInCenter(slide);

                if (this.isPresenting) {
                    this.showTOC = false;
                }
            }
        }
    }, {
        key: 'needsNarrowCanvas',
        value: function needsNarrowCanvas() {
            var slide = this.findSlideByIndex(this.currentSlideIndex);
            return this._map.getUi().currentTabIs(this._map.getUi().TAB_ID_PRESENTER) && slide != null && (slide.data.type === 'TITLE_BODY_MAP' || slide.data.type === 'ACTIVITY_MAP' || slide.data.type === 'MAP_SUMMARY');
        }
    }, {
        key: 'selectSlide',

        // sets the slide node as selected in the diagram.
        value: function selectSlide(index) {

            //console.log('select slide: ' + index);
            var diagram = this._map.getDiagram();
            diagram.clearSelection();
            if (index) {
                var slide = this.findSlideByIndex(index);
                if (slide) {
                    slide.isSelected = true;
                }
            }
            // TODO: scroll to slide?
        }
    }, {
        key: 'playSlide',
        value: function playSlide(index) {
            var diagram = this._map.getDiagram();
            this._map.getUi().openTab(this._map.getUi().TAB_ID_PRESENTER);

            var slides = this.getSlideNodeDatas();
            if (slides.length) {
                this.showTOC = false;
                this.presentSlide(index);
            }
        }
    }, {
        key: 'advanceSlide',

        // increment is -1 or +1
        value: function advanceSlide(increment) {
            //console.log('advanceSlide, currentSlideIndex: ' + this.currentSlideIndex);

            var slide = this.findSlideByIndex(this.currentSlideIndex);
            if (slide) {
                this.currentSlideIndex += increment;
                if (this.isPresenting) {
                    this.presentSlide(this.currentSlideIndex);
                }
            }
        }
    }, {
        key: 'presentSlide',
        value: function presentSlide(index) {
            //console.log('presentSlide');

            var diagram = this._map.getDiagram();
            var slide = this.findSlideByIndex(index);
            if (!slide) {
                return;
            }

            diagram.clearSelection();
            // NB: need to set this after clearSelection, as that will set it to null! (see changedSelection)
            this.currentSlideIndex = index;
            this._map.setEditingBlocked(true);
            //console.log('presentSlide, index: ' + index + ', slide: ' + slide + ', currentSlideIndex: ' + this.currentSlideIndex);

            this.maybeInitSlideBlocker();
            var blockerW = SLIDE_BLOCKER_WIDTH;

            if (slide.data.hasRegion) {
                this.zoomToSlideInCenter(slide);

                // show slide blocker
                this.slideBlocker.desiredSize = new go.Size(slide.actualBounds.width + 2 * blockerW, slide.actualBounds.height + 2 * blockerW);
                this.slideBlocker.location = new go.Point(slide.actualBounds.x - blockerW, slide.actualBounds.y - blockerW);
                this.slideBlocker.visible = true;
                //console.log('slideBlocker: ' + this.slideBlocker.actualBounds);
            } else if (slide.data.isSummary) {
                this.zoomToSlideInCenter(slide);
                this.slideBlocker.visible = false;
            } else {
                this._map.getUi().resetZoom();
                this.slideBlocker.visible = false;
            }

            this.isPresenting = true;
            $('body').addClass('presenter-playing');

            this._map.getDiagram().updateAllTargetBindings(); // hide slide nodes - see templates.js: slideTemplate
        }
    }, {
        key: 'zoomToSlideInCenter',

        // zoom the diagram to show the given slide in the center of the canvas
        value: function zoomToSlideInCenter(slide) {
            var _this3 = this;

            var diagram = this._map.getDiagram();

            window.setTimeout(function () {

                var halfWidth = slide.data.type !== 'MAP_ONLY';
                var zoomRect = _this3.getLetterboxedRect(slide.actualBounds, halfWidth);
                zoomRect.inflate(zoomRect.width / 10, zoomRect.height / 10);
                diagram.zoomToRect(zoomRect, go.Diagram.Uniform);
            }, 100);
        }
    }, {
        key: 'getLetterboxedRect',

        // Returns a rectangle containing the given rect, but with appropriate width or height added
        // to give it same aspect ratio as the diagram.
        value: function getLetterboxedRect(rect, halfWidth) {

            // NB: we calculate the aspect ratio when the tab is opened,
            // rather than each time as the diagram size might be changing...
            var dar = halfWidth ? this.diagramAspectRatio / 2 : this.diagramAspectRatio;
            console.log('rect: ' + rect + ', dar: ' + dar);

            var rectAspectRatio = rect.width / rect.height;

            if (dar > rectAspectRatio) {
                // tall skinny rect, short wide target AR, so add side padding to the rect
                var lbw = rect.height * dar; // because lbw / lbh == dar == lbw / rect.height (lbh == rect.height)
                return rect.copy().inflate((lbw - rect.width) / 2, 0); // add half the width difference to each side of the rect
            } else {
                // short wide rect, tall skinny target AR, so add top/bottom padding to the rect
                var lbh = rect.width / dar; // because lbw / lbh == dar == lbh / rect.width (lbw == rect.width)
                return rect.copy().inflate(0, (lbh - rect.height) / 2); // add half the height difference to top/bottom of the rect
            }
        }
    }, {
        key: 'stopPresenting',
        value: function stopPresenting() {

            //console.log('stopPresenting, currentSlideIndex: ' + this.currentSlideIndex);
            var diagram = this._map.getDiagram();

            if (this.slideBlocker) {
                this.slideBlocker.visible = false;
            }

            //this.currentSlideIndex = null;
            this.isPresenting = false;
            $('body').removeClass('presenter-playing');

            this._map.getDiagram().updateAllTargetBindings(); // show slide nodes

            diagram.clearSelection();
            this._map.setEditingBlocked(false);
            //this._map.getUi().resetZoom();
        }
    }]);

    return Presenter;
})();

module.exports = Presenter;

// adjust zooming of map region
//this.windowResized();

},{}],45:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;
var slideTemplate = require('./templates/slideTemplate.js');
var GroupTemplate = require('./templates/GroupTemplate.js');
var linkTemplate = require('./templates/linkTemplate.js');
var pLinkTemplate = require('./templates/pLinkTemplate.js');
var dLinkTemplate = require('./templates/dLinkTemplate.js');

// convenient abbreviation for creating templates
var mk = go.GraphObject.make;

var colorR = '#4cbfc2';
var colorP = '#fbaa36';

// footer for image export
var _exportFooter = null;

// goJS templates used in the editor

var Templates = (function () {
    function Templates(editor, map) {
        _classCallCheck(this, Templates);

        this._editor = editor;
        this._map = map;

        this.slideTemplate = slideTemplate(map);
        this.groupTemplate = new GroupTemplate(map);
        this.linkTemplate = linkTemplate(map);
        this.pLinkTemplate = pLinkTemplate(map);
        this.dLinkTemplate = dLinkTemplate(map);
    }

    _createClass(Templates, [{
        key: 'initTemplates',
        value: function initTemplates(diagram) {
            var _this = this;

            diagram.groupTemplate = this.groupTemplate;
            diagram.nodeTemplate = this.slideTemplate;
            diagram.linkTemplate = this.linkTemplate;
            diagram.linkTemplateMap.add('P', this.pLinkTemplate);
            diagram.linkTemplateMap.add('D', this.dLinkTemplate);

            this.setTemporaryLinkTemplates(diagram.toolManager.linkingTool);
            this.setTemporaryLinkTemplates(diagram.toolManager.relinkingTool);

            diagram.toolManager.linkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
                _this.handlePortTargeted(diagram.toolManager.linkingTool, realnode, realport, tempnode, tempport, toend);
            };

            diagram.toolManager.relinkingTool.portTargeted = function (realnode, realport, tempnode, tempport, toend) {
                _this.handlePortTargeted(diagram.toolManager.relinkingTool, realnode, realport, tempnode, tempport, toend);
            };

            diagram.toolManager.relinkingTool.updateAdornments = function (part) {
                go.RelinkingTool.prototype.updateAdornments.call(_this, part);
                var from = part.findAdornment('RelinkFrom');
                var to = part.findAdornment('RelinkTo');
                // if (from)
                //     console.log('relinkfrom: ' + from.part.width);
            };

            diagram.toolManager.linkingTool.linkValidation = this.validateLink;
            diagram.toolManager.relinkingTool.linkValidation = this.validateLink;
        }
    }, {
        key: 'setTemporaryLinkTemplates',

        // ----------- temporary link/node templates, for use when dragging to create R/P lines -------------

        // define initial temporary link templates - these will be modified when handlePortTargeted is called
        value: function setTemporaryLinkTemplates(tool) {
            tool.temporaryLink = this.makeTemporaryLinkTemplate();
            tool.temporaryFromNode = this.makeTemporaryNodeTemplate();
            tool.temporaryToNode = this.makeTemporaryNodeTemplate();
        }
    }, {
        key: 'makeTemporaryLinkTemplate',
        value: function makeTemporaryLinkTemplate() {
            return mk(go.Link, {
                layerName: 'Tool'
            }, mk(go.Shape, {
                name: 'linkshape',
                strokeWidth: 2
            }));
        }
    }, {
        key: 'makeTemporaryNodeTemplate',
        value: function makeTemporaryNodeTemplate() {
            return mk(go.Group, {
                layerName: 'Tool'
            }, mk(go.Shape, 'Border', {
                name: 'border',
                strokeWidth: 3,
                fill: null
            }));
        }
    }, {
        key: 'handlePortTargeted',

        // change color and portId of temporary link templates based on the type of link being created/relinked
        value: function handlePortTargeted(tool, realnode, realport, tempnode, tempport, toend) {
            // console.log('portTargeted, realport: ' + (realport ? realport.name : '') + ', tempport: ' + (tempport ? tempport.name : '')
            //     + ', originalFromPort: ' + (ltool.originalFromPort ? ltool.originalFromPort.name : '') + ', originalToPort: ' + ltool.originalToPort);

            var linkShape = tool.temporaryLink.findObject('linkshape');
            var fromBorder = tool.temporaryFromNode.findObject('border');
            var toBorder = tool.temporaryToNode.findObject('border');

            if (tool.originalFromPort && tool.originalFromPort.name === 'cornerPShape') {
                linkShape.stroke = colorP;
                fromBorder.stroke = colorP;
                toBorder.stroke = colorP;
                fromBorder.portId = 'P';
                toBorder.portId = 'P';
            } else if (tool.originalFromPort && tool.originalFromPort.name === 'cornerRShape') {
                linkShape.stroke = colorR;
                fromBorder.stroke = colorR;
                toBorder.stroke = colorR;
                fromBorder.portId = 'R';
                toBorder.portId = 'R';
            }
            tempnode.scale = this._map.getLayouts().getScale(realnode);
        }
    }, {
        key: 'validateLink',

        // prevent duplicate 'P' links in the same direction between the same two things
        value: function validateLink(fromNode, fromPort, toNode, toPort) {
            // the P port is on top of the R port, so both P and R links get the toPort set to R by default.
            if (fromPort.portId === 'P') {
                // NB: findLinksTo would be simpler, but it doesn't seem to work... (?)
                var pLinks = toNode.findLinksBetween(fromNode, 'P', 'P');
                //console.log('validateLink, pLinks from ' + fromNode + ':' + fromPort + ' to ' + toNode + ':' + toPort + ' = ' + pLinks.count);
                if (pLinks.count) {
                    while (pLinks.next()) {
                        var pLink = pLinks.value;
                        if (pLink.fromNode === fromNode && pLink.toNode === toNode) {
                            return false;
                        }
                    }
                }
            }
            return true;
        }
    }, {
        key: 'createExportFooter',

        // ------------------- export footer ----------------------

        // NB: this is not a template per se, in that it is added to the diagram
        // statically, rather than being bound to something in the model.
        // But we put it here because it is about creating parts and stuff.

        value: function createExportFooter() {
            return mk(go.Node, go.Panel.Spot, {
                layerName: 'Foreground',
                location: new go.Point(0, 0),
                scale: 1,
                opacity: 0,
                pickable: false,
                selectable: false
            }, mk(go.Shape, 'Rectangle', {
                name: 'rectangle',
                height: 60,
                fill: null,
                stroke: null
            }), mk(go.Picture, {
                source: 'assets/img/metamap-logo-50.png',
                alignment: go.Spot.TopLeft,
                alignmentFocus: go.Spot.TopLeft,
                width: 195,
                height: 50
            }), mk(go.TextBlock, {
                text: 'metamap.cabreraresearch.org',
                alignment: go.Spot.BottomLeft,
                alignmentFocus: go.Spot.BottomLeft,
                width: 200
            }), mk(go.TextBlock, {
                name: 'mapTitle',
                text: '',
                textAlign: 'right',
                alignment: go.Spot.TopRight,
                alignmentFocus: go.Spot.TopRight,
                width: 300
            }), mk(go.TextBlock, {
                name: 'authorName',
                text: '',
                textAlign: 'right',
                alignment: go.Spot.BottomRight,
                alignmentFocus: go.Spot.BottomRight,
                width: 300
            }));
        }
    }, {
        key: 'addExportFooter',

        // creates or refreshes the footer logo/text that is displayed in the image export
        value: function addExportFooter() {
            if (!_exportFooter) {
                _exportFooter = this.createExportFooter();
                this._map.getDiagram().add(_exportFooter);
            }
        }
    }, {
        key: 'showExportFooter',
        value: function showExportFooter() {
            var rect = this._map.computeMapBounds();
            // put footer at least 100 px below bottom of map; make it at least 500px wide
            var x = rect.x;
            var y = rect.y + rect.height + Math.max(100, rect.height / 5);
            var w = Math.max(500, rect.width);
            //console.log('showExportFooter, bounds rect: ' + rect + ', w: ' + w);
            _exportFooter.location = new go.Point(x, y);
            _exportFooter.findObject('rectangle').width = w;
            _exportFooter.findObject('mapTitle').text = 'Map Title: ' + this._editor.mapTitle;
            _exportFooter.findObject('authorName').text = 'Author: ' + this._editor.userName;
            _exportFooter.opacity = 1;
            _exportFooter.invalidateLayout();
        }
    }, {
        key: 'hideExportFooter',
        value: function hideExportFooter() {
            _exportFooter.opacity = 0;
        }
    }]);

    return Templates;
})();

module.exports = Templates;

},{"./templates/GroupTemplate.js":55,"./templates/dLinkTemplate.js":56,"./templates/linkTemplate.js":57,"./templates/pLinkTemplate.js":58,"./templates/slideTemplate.js":59}],46:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var TABS = require('../constants/tabs.js');
var go = window.go;

var UI = (function () {
    function UI(map, state) {
        _classCallCheck(this, UI);

        this.map = map;
        this.state = state;

        this.zoomingToRegion = false;

        this.mouseOverGroup = null;
        this.mouseOverLink = null;

        this.dragTargetGroup = null;
        this.dragTargetPosition = null;

        this.helpTip = null;

        this._cornerClicked = null;
        this._cornerFunction = null;
        this._cornerTimeout = 300;
    }

    _createClass(UI, [{
        key: 'currentTabChanged',

        // ----------- handle bottom tabs ('sliders') -------------

        // in the following functions, ID is e.g. 'history-tab' (ID of one of the .bottom-tab's)

        // this is called by map.currentTabChanged, which is triggered by a this.$watch
        value: function currentTabChanged(newValue, oldValue) {
            //console.log('ui, currentTabChanged: ' + newValue);
            this.state.currentTab = newValue;
        }
    }, {
        key: 'currentTabIs',
        value: function currentTabIs(tabID) {
            return this.currentTab === tabID;
        }
    }, {
        key: 'openTab',
        value: function openTab(tabID) {
            this.currentTab = tabID;
        }
    }, {
        key: 'closeTab',
        value: function closeTab(tabID) {
            this.state.currentTab = null; // TODO: trigger autosave
            this.currentTab = null;
        }
    }, {
        key: 'disableTab',
        value: function disableTab(tabID) {
            // prevent opening other tabs when in P or D editor
            if (this.currentTab === TABS.TAB_ID_PERSPECTIVES || this.currentTab === TABS.TAB_ID_DISTINCTIONS) {
                return true;
            }
            return false;
        }
    }, {
        key: 'toggleTab',
        value: function toggleTab(tabID) {
            if (this.currentTab === tabID) {
                this.currentTab = null;
            } else if (!this.disableTab(tabID)) {
                this.currentTab = tabID;
            }
        }
    }, {
        key: 'toggleNavigator',
        value: function toggleNavigator() {
            this.state.showNavigator = !this.state.showNavigator;
        }
    }, {
        key: 'toggleZoomingToRegion',
        value: function toggleZoomingToRegion() {
            this.zoomingToRegion = !this.zoomingToRegion;
        }
    }, {
        key: 'canZoomIn',

        // ----------------- zooming functions -------------------
        value: function canZoomIn() {
            return this.map.getDiagram().scale < 32;
        }
    }, {
        key: 'canZoomOut',
        value: function canZoomOut() {
            return this.map.getDiagram().scale > 0.25;
        }
    }, {
        key: 'zoomIn',
        value: function zoomIn() {
            var diagram = this.map.getDiagram();
            if (diagram.scale < 32) {
                var vb = diagram.viewportBounds.copy();
                diagram.scale = diagram.scale * 2;
                diagram.centerRect(vb);
            }
        }
    }, {
        key: 'zoomOut',
        value: function zoomOut() {
            var diagram = this.map.getDiagram();
            if (diagram.scale > 0.25) {
                var vb = diagram.viewportBounds.copy();
                diagram.scale = diagram.scale / 2;
                diagram.centerRect(vb);
            }
        }
    }, {
        key: 'maybeZoomToRegion',
        value: function maybeZoomToRegion() {
            var diagram = this.map.getDiagram();
            // this flag is set by the toolbar button
            if (this.zoomingToRegion) {
                this.zoomingToRegion = false;
                console.log('zoomToRegion, selection count: ' + diagram.selection.count);
                var rect = diagram.computePartsBounds(diagram.selection);
                diagram.zoomToRect(rect);
            }
        }
    }, {
        key: 'resetZoom',
        value: function resetZoom() {
            var diagram = this.map.getDiagram();
            //let rect = diagram.computePartsBounds(diagram.nodes).copy();
            var rect = this.map.safeRect(this.map.computeMapBounds());
            //console.log('resetZoom, bounds: ' + rect);
            if (rect.width) {
                rect.inflate(rect.width / 5, rect.height / 5);
            }
            diagram.zoomToRect(rect);
            diagram.alignDocument(go.Spot.Center, go.Spot.Center);
            if (diagram.scale > 1) {
                diagram.scale = 1;
            }
        }
    }, {
        key: 'getSelectedThingsOrDefaultLayout',

        // ------------ thing options (layout) ----------------

        value: function getSelectedThingsOrDefaultLayout() {
            var sl = this.getSelectedThingsLayout();
            if (sl) {
                return sl;
            } else {
                return mapEditorOptions.defaultThingLayout;
            }
        }
    }, {
        key: 'getSelectedThingsLayout',

        // returns a non-null value only if all selected items are groups with the same layout
        value: function getSelectedThingsLayout() {
            var diagram = this.map.getDiagram();
            if (!diagram || diagram.selection.count < 1) return null;

            var layout = null;
            var it = diagram.selection.iterator;
            while (it.next()) {
                if (!it.value instanceof go.Group) return null;
                var group = it.value;
                //console.log('getSelectedThingsLayout, it.value: ' + group);
                var groupLayout = group.data ? group.data.layout : null;
                if (layout !== null && groupLayout !== layout) return null;
                layout = groupLayout;
            }
            //console.log('getSelectedThingsLayout: ' + layout);

            return layout;
        }
    }, {
        key: 'setSelectedThingsLayout',

        // sets the layout of all selected things to the given layout
        value: function setSelectedThingsLayout(layoutName) {
            var diagram = this.map.getDiagram();
            var it = diagram.selection.iterator;
            while (it.next()) {
                if (it.value instanceof go.Group) {
                    var group = it.value;
                    diagram.model.setDataProperty(group.data, 'layout', layoutName);
                    this.map.getLayouts().setDescendantLayouts(group, group.data.layout);
                    this.map.refresh();
                }
            }
        }
    }, {
        key: 'getSelectedRelationshipsOrDefaultDirection',

        // ------------ relationship options (direction) ----------------

        value: function getSelectedRelationshipsOrDefaultDirection() {
            var sd = this.getSelectedRelationshipsDirection();
            if (sd) {
                return sd;
            } else {
                return mapEditorOptions.defaultRelationshipDirection;
            }
        }
    }, {
        key: 'getSelectedRelationshipsDirection',

        // returns a non-null value only if all selected items are relationships with the same direction
        value: function getSelectedRelationshipsDirection() {
            var diagram = this.map.getDiagram();
            if (!diagram || diagram.selection.count < 1) return null;

            var type = null;
            var it = diagram.selection.iterator;
            while (it.next()) {
                if (!it.value instanceof go.Link) return null;
                var link = it.value;
                var linkType = link.data ? link.data.type : null;
                if (type !== null && linkType !== type) return null;
                type = linkType;
            }

            return type;
        }
    }, {
        key: 'setSelectedRelationshipsDirection',

        // sets the direction of all selected relationships to the given direction
        value: function setSelectedRelationshipsDirection(direction) {
            var diagram = this.map.getDiagram();
            //diagram.model.startTransaction('change relationship direction');
            var it = diagram.selection.iterator;
            while (it.next()) {
                if (it.value instanceof go.Link) {
                    //diagram.model.startTransaction('change link type');
                    diagram.model.setDataProperty(it.value.data, 'type', direction);
                    //diagram.model.commitTransaction('change link type');
                }
            }
            //diagram.commitTransaction('change relationship direction');
        }
    }, {
        key: 'handleCornerClick',

        // ------- handle corner clicks and double clicks --------
        value: function handleCornerClick(corner, thing) {
            var _this = this;

            //console.log('handleCornerClick: corner = ' + corner + ', cornerClicked = ' + _cornerClicked);
            // assume it's a single click, and set handler
            var _cornerFunction = this.getCornerFunction(corner, 1);
            // already clicked, so it's a double click; change handler
            if (this._cornerClicked === corner) {
                _cornerFunction = this.getCornerFunction(corner, 2);
                console.log('handleCornerClick: double click on ' + corner);
                return;
            }
            // remember that at least one click has happened for the current corner
            this._cornerClicked = corner;

            // set timer to invoke whatever handler we have ready to go (unless another click happens within the interval)
            var timer = setTimeout(function () {
                // ding! invoke it
                if (_cornerFunction === _this.showCornerTip) {
                    _cornerFunction(thing, corner);
                } else {
                    _cornerFunction(thing); // don't pass the corner arg to things like createChild that have a different second arg
                }
                // reset handler and clicked flag
                _cornerFunction = _this.getCornerFunction(corner, 1);
                _this._cornerClicked = null;
            }, this._cornerTimeout);
        }
    }, {
        key: 'getCornerFunction',
        value: function getCornerFunction(corner, clicks) {
            if (corner === 'D') {
                return clicks === 1 ? this.showCornerTip : this.map.createSister;
            } else if (corner === 'S') {
                return clicks === 1 ? this.map.toggleSExpansion : this.map.createChild;
            } else if (corner === 'R') {
                return clicks === 1 ? this.showCornerTip : this.map.createRToSister;
            } else if (corner === 'P') {
                return clicks === 1 ? this.map.togglePExpansion : this.map.getPerspectives().setPEditorPoint;
            } else if (corner === '') {
                // click on text
                return clicks === 1 ? this.showCornerTip : this.editText;
            } else {
                return function () {
                    console.log('getCornerFunction: no function found for corner: ' + corner + '!');
                };
            }
        }
    }, {
        key: 'editText',

        // NB: in this case the thing is actually the TextBox, except in outline layout it is a Panel if the box is double-clicked...
        value: function editText(thing, corner) {
            if (!this.canEdit) {
                return null;
            }

            console.log('editText, thing: ' + thing);
            if (thing instanceof go.Panel) {
                // outline layout
                var part = thing.part;
                console.log('editText, part: ' + part);
                if (part instanceof go.Group && part.data && (part.data.layout === 'left' || part.data.layout === 'right')) {
                    var textBlockName = 'externaltext-' + part.data.layout;
                    var text = thing.part.findObject(textBlockName);
                    if (text) {
                        thing = text;
                    }
                }
            }
            this.map.getDiagram().commandHandler.editTextBlock(thing);
        }
    }, {
        key: 'showCornerTip',

        // ---------------- help tip functions - see also user.js, views/maps/help_tab ---------------

        // shows thingTip or one of the cornerXTips
        value: function showCornerTip(thing, corner) {
            //console.log('showCornerTip');
            if (corner === '') {
                this.showHelpTip('thingTip');
            } else {
                this.showHelpTip('corner' + corner + 'Tip');
            }
        }
    }, {
        key: 'showHelpTip',
        value: function showHelpTip(tip) {
            var _this2 = this;

            //console.log('showHelpTip: ' + tip);

            // don't show help if in presenter
            if (this.currentTabIs(TABS.TAB_ID_PRESENTER)) {
                return;
            }

            this.helpTip = tip;
            //this.safeApply();
            $('#help-tip').show();

            setTimeout(function () {
                $('#help-tip').fadeOut(500, function () {
                    _this2.helpTip = null;
                    //this.safeApply();
                });
            }, 5000);
        }
    }]);

    return UI;
})();

module.exports = UI;

},{"../constants/tabs.js":31}],47:[function(require,module,exports){
// functions handling editor autosave function
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var $http = {
    put: function put() {
        return new Promise(function (fulfill, reject) {});
    }
};

var changeDescriptions = {
    move: 'Moved Objects',
    undo_redo: 'Performed Undo/Redo',
    edit_title: 'Edited MetaMap Title',
    edit_description: 'Edited MetaMap Description',
    edit_usertags: 'Edit MetaMap Tags',
    edit_d: 'Edited Distinctions',
    edit_s: 'Edited Systems',
    edit_r: 'Edited Relationships',
    edit_p: 'Edited Perspectives',
    add_thing: 'Added Ideas',
    rename_thing: 'Renamed Ideas',
    delete_thing: 'Deleted Ideas',
    edit_attachments: 'Edited Attachments',
    edit_presenter: 'Edited Presenter Slides',
    edit_generator: 'Inserted Ideas from ThinkQuery',
    edit_standards: 'Edited Links to Common Core Standards'
};

var go = window.go;

var Autosave = (function () {
    function Autosave() {
        _classCallCheck(this, Autosave);

        this.changeTypes = [];
        this.saveOnModelChanged = true;
    }

    _createClass(Autosave, [{
        key: 'save',
        value: function save(changeType) {
            this.changeTypes.push(changeType);
            this.delayedAutosave();
        }
    }, {
        key: 'saveNow',

        // do a save right now
        value: function saveNow(changeType) {
            this.changeTypes.push(changeType);
            this.autosave();
        }
    }, {
        key: 'delayedAutosave',

        // don't let autosave be triggered more than every N milliseconds...
        get: function () {
            if (!this._delayedAutoSave) {
                this._delayedAutoSave = _.debounce(this.autosave, 2000);
            }
            return this._delayedAutoSave;
        }
    }, {
        key: 'autosave',

        // compile the current list of change type descriptions, process them
        // to remove duplicates, and save the current data
        value: function autosave() {
            var _this = this;

            // stop right here if we're in the sandbox and/or we don't have edit permissions
            if (this._editor.sandbox || !this._editor.canEdit) {
                return;
            }

            if (!this.changeTypes.length) {
                console.log('autosave: nothing to save!'); // shouldn't happen
                return;
            }

            // de-dupe the list of change types
            var changeList = _.uniq(this.changeTypes);
            //console.log('changeList: ' + changeList);
            // don't show move events unless that's all we have
            var changeListWithoutMoves = _.without(changeList, 'move');
            if (changeListWithoutMoves.length > 0) {
                changeList = changeListWithoutMoves;
            }
            //console.log('changeList without moves: ' + changeList);
            // get descriptions
            var descriptionList = _.map(changeList, function (ct) {
                return _.result(changeDescriptions, ct);
            });

            //console.log('autosave, changeList: ' + changeList + ', descriptionList: ' + descriptionList);
            var postData = {
                'name': this._editor.mapTitle,
                'data': this._map.getDiagram().model.toJson(),
                'state_data': JSON.stringify(this._map.getUi().getStateData()),
                'editor_options': JSON.stringify(this._map.getUi().getMapEditorOptions()),
                'presenter_slides': this._map.getPresenter().getSlideCount(),
                'activity_slides': this._map.getPresenter().getActivitySlideCount(),
                'change_type': changeList.join(';'),
                'change_description': descriptionList.join('; '),
                'thumbnail_png': this._map.getPresenter().getMapThumbnail()
            };
            var url = this._editor.mapUrl + '.json';

            this._editor.updateEditStatus(this._editor.SAVING);
            $http.put(url, postData).then(function (response) {
                _this.changeTypes = [];
                _this._editor.updateEditStatus(_this._editor.SAVE_OK);
                // load returned data for analytics, points, badges, versions
                _this._editor['this']._map.loadMapExtraData(response.data.map);
            }, function () {
                _this._editor.updateEditStatus(_this._editor.SAVE_FAILED);
            });
        }
    }, {
        key: 'modelChanged',

        // -------------- handle model changes - trigger autosave ------------------

        // e is a go.ChangedEvent
        value: function modelChanged(e) {

            if (!self.saveOnModelChanged) {
                return;
            }

            var changeType = null;
            var changeDescription = null;

            if (e.propertyName === 'type') {
                // change R type
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,n,1,o,2,A,3,r,4,r,5,o,6,w,7,s] , newParam: null, newValue: [0,t,1,o] , propertyName: type
                changeType = 'edit_r';
                changeDescription = 'Changed Relationship Types';
            } else if (e.propertyName === 'layout') {
                // change system layout
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,l,1,e,2,f,3,t] , newParam: null, newValue: [0,r,1,i,2,g,3,h,4,t] , propertyName: layout
                changeType = 'edit_s';
            } else if (e.change === go.ChangedEvent.Insert && this.propertyEquals(e.newValue, 'fromPort', 'R')) {
                // add link
                // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,P] , propertyName: linkDataArray
                // modelChange: linkToPortId, change: ChangedEvent.Property, oldParam: null, oldValue: [0,P] , newParam: null, newValue: [0,R] , propertyName: toPort
                changeType = 'edit_r';
            } else if (e.change === go.ChangedEvent.Remove && this.propertyEquals(e.oldValue, 'fromPort', 'R')) {
                // delete link
                // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [type,noArrows,__gohashid,6005,from,-2,to,-4,labelKeys,,fromPort,R,toPort,R] , newParam: null, newValue: [] , propertyName: linkDataArray
                changeType = 'edit_r';
            } else if (e.propertyName === 'linkDataArray') {
                // change P/D links
                // add P link
                // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 2, newValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P] , propertyName: linkDataArray
                // modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
                // delete P link
                // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 2, oldValue: [type,noArrows,__gohashid,19122,from,-2,to,-4,labelKeys,,fromPort,P,toPort,P,category,P] , newParam: null, newValue: [] , propertyName: linkDataArray
                // add D link
                // modelChange: linkDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 1, newValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , propertyName: linkDataArray
                // remove D link
                // modelChange: linkDataArray, change: ChangedEvent.Remove, oldParam: 1, oldValue: [from,-7,to,-5,fromPort,D,toPort,D,category,D,__gohashid,19522] , newParam: null, newValue: [] , propertyName: linkDataArray

                if (e.newValue && e.newValue.category === 'P' || e.oldValue && e.oldValue.category === 'P') {
                    changeType = 'edit_p';
                } else if (e.newValue && e.newValue.category === 'D' || e.oldValue && e.oldValue.category === 'D') {
                    changeType = 'edit_d';
                }
            } else if (e.propertyName === 'category') {
                // add P link
                // modelChanged, modelChange: linkCategory, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,P] , propertyName: category
                changeType = 'edit_p';
            } else if (e.propertyName === 'group') {
                // drag into S
                // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
                // reorder part
                // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group
                // drag to D
                // modelChanged, modelChange: nodeGroupKey, change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: group

                changeType = 'edit_s';
            } else if (e.propertyName === 'nodeDataArray' && e.change === go.ChangedEvent.Insert && this.propertyEquals(e.newValue, 'isGroup', true)) {
                // add thing
                // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7] , propertyName: nodeDataArray
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [0,2,1,2,2,8,3,.,4,5,5,6,6,2,7,5,8, ,9,-,10,1,11,4,12,9,13,.,14,6,15,8,16,7,17,5] , propertyName: loc
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: children
                changeType = 'add_thing';
            } else if (e.propertyName === 'text') {
                // move thing
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,b,1,b,2,b,3,b,4,b] , newParam: null, newValue: [0,a,1,a,2,a,3,a,4,a] , propertyName: text
                changeType = 'rename_thing';
                changeDescription = 'Renamed Ideas';
            } else if (e.propertyName === 'nodeDataArray' && e.change === go.ChangedEvent.Remove && this.propertyEquals(e.oldValue, 'isGroup', true)) {
                // delete thing
                // modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [text,New Idea,isGroup,true,level,0,layout,left,sExpanded,true,pExpanded,false,dExpanded,false,__gohashid,54688,group,,key,-7,loc,228.5625 -149.6875,children,0,attachments,] , newParam: null, newValue: [] , propertyName: nodeDataArray
                changeType = 'delete_thing';
            } else if (e.propertyName === 'nodeDataArray' && e.change === go.ChangedEvent.Insert && this.propertyEquals(e.newValue, 'isGroup', false)) {
                // add slide
                // modelChange: nodeDataArray, change: ChangedEvent.Insert, oldParam: null, oldValue: [] , newParam: 5, newValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877] , propertyName: nodeDataArray
                changeType = 'edit_presenter';
            } else if (e.propertyName === 'nodeDataArray' && e.change === go.ChangedEvent.Remove && this.propertyEquals(e.oldValue, 'isGroup', false)) {
                // delete slide
                //modelChange: nodeDataArray, change: ChangedEvent.Remove, oldParam: 5, oldValue: [key,slide-0,category,slide,index,0,isGroup,false,width,200,height,200,loc,156.5625 -97.6875,level,0,children,0,title,,notes,,__gohashid,63877,$$hashKey,0XN] , newParam: null, newValue: [] , propertyName: nodeDataArray
                changeType = 'edit_presenter';
            } else if (e.propertyName === 'loc' || e.propertyName === 'width' || e.propertyName === 'height') {
                // move thing or resize slide
                // move slide
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,8] , newParam: null, newValue: [0,2,1,4,2,3,3, ,4,-,5,1,6,2,7,7] , propertyName: loc
                // resize slide
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [] , newParam: null, newValue: [] , propertyName: height
                // move thing
                // modelChange: , change: ChangedEvent.Property, oldParam: null, oldValue: [0,4,1,7,2,9,3,.,4,8,5,7,6,5,7, ,8,-,9,1,10,2,11,2,12,.,13,8,14,7,15,5] , newParam: null, newValue: [0,5,1,4,2,0,3,.,4,3,5,1,6,2,7,5,8, ,9,-,10,1,11,2,12,1,13,.,14,1,15,8,16,7,17,5] ,            
                changeType = 'move';
            } else if (e.propertyName === 'level' || e.propertyName === 'children') {
                // these attributes are updated as a result of other actions; ignore
                changeType = null;
            } else if (e.propertyName === 'attachments') {
                // edited attachments
                changeType = 'edit_attachments';
            } else if (e.propertyName === 'sExpanded' || e.propertyName === 'pExpanded') {
                // ignore expand/collapse
                changeType = 'move';
            } else if (e.propertyName === 'FinishedUndo' || e.propertyName === 'FinishedRedo') {
                changeType = 'undo_redo';
                this._map.refresh();
            } else if (e.change !== go.ChangedEvent.Transaction) {
                console.log('modelChanged, modelChange: ' + e.modelChange + ', change: ' + e.change + ', oldParam: ' + e.oldParam + ', oldValue: [' + _.pairs(e.oldValue) + '] ' + ', newParam: ' + e.newParam + ', newValue: [' + _.pairs(e.newValue) + '] ' + ', propertyName: ' + e.propertyName);
            }

            if (changeType) {
                this._map.getAnalytics().updateContextualAnalytics();
                //console.log('calling delayedAutosave, changeType: ' + changeType);
                self.save(changeType);
            }
        }
    }, {
        key: 'propertyEquals',

        // convenience function for checking properties
        value: function propertyEquals(obj, key, value) {
            return obj !== null && _.has(obj, key) && _.result(obj, key) === value;
        }
    }]);

    return Autosave;
})();

module.exports = Autosave;

},{}],48:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var editStatus = require('../constants/editStatus.js');
var common = require('../tools/Common.js');
var BACKSPACE = 8;
var Map = require('./Map.js');

var Editor = (function () {
    function Editor(mapData) {
        _classCallCheck(this, Editor);

        this.mapData = mapData;
        var metadata = mapData.map.metadata;
        this.sandbox = metadata.sandbox;
        this.mapData = window.mapData.map.data; // this gets overwritten by load() unless we are in the sandbox with no map ID
        this.mapId = metadata.id;
        this.mapTitle = metadata.name;
        this.mapUserTags = metadata.userTags;
        this.mapUrl = metadata.url;
        this.canEdit = metadata.canEdit;
        this.updatedAt = metadata.updatedAt;
        this.updatedBy = metadata.updatedBy; // ID
        this.updatedByName = metadata.updatedByName;
        this.editingTitle = false;
        this.editStatus = '';

        this.showImageExport = false;
        this.imageExportLoading = true;

        this.currentTab = null;

        // override parent scope (see user.js) since we're editing a map
        //this.ccsTagging.mapId = this.mapId;

        this.map = new Map({ Editor: this });

        if (!this.sandbox) {}

        if (this.mapUrl) {
            this.map.load();
        } else {
            this.map.loadForSandbox();
        }

        this.addBehaviors();
        this.handleNavigation();
        this.handleBackspace();
    }

    _createClass(Editor, [{
        key: 'maybeStartEditingTitle',
        value: function maybeStartEditingTitle() {
            if (this.canEdit) {
                this.editingTitle = true;
            }
        }
    }, {
        key: 'doneEditingTitle',
        value: function doneEditingTitle() {
            //console.log('doneEditingTitle');
            this.editingTitle = false;
            this.map.getAutosave().save('edit_title');
        }
    }, {
        key: 'editingTitleKeypress',
        value: function editingTitleKeypress(e) {
            if (e.which === 13) {
                this.doneEditingTitle();
            }
        }
    }, {
        key: 'print',
        value: function print() {
            window.print();
        }
    }, {
        key: 'saveSandboxMap',

        // ------------ save sandbox map (sign up/sign in) ---------------

        value: function saveSandboxMap() {
            var _this = this;

            var modalInstance = $modal.open({
                templateUrl: 'template_sandbox_save_modal.html', // see views/users/_template_sandbox_save_modal
                backdrop: 'static',
                controller: this.sandboxSaveModalCtrl,
                windowClass: 'sandbox-save-modal',
                resolve: {
                    outerScope: function outerScope() {
                        return _this;
                    },
                    map: function map() {
                        return _this.map;
                    },
                    userProfile: function userProfile() {
                        return _this.userProfile;
                    }
                }
            });

            modalInstance.result.then(function () {});
        }
    }, {
        key: 'updateEditStatus',
        value: function updateEditStatus(s) {
            //console.log('updateEditStatus: ' + s);
            this.editStatus = s;
            if (s === editStatus.SAVE_FAILED) {
                alert('Changes could not be saved - please check your network connection.');
            } else if (s === editStatus.LAST_UPDATED) {
                var time = moment(this.updatedAt).fromNow();
                var by = '';
                if (this.updatedBy === this.userId) {
                    by = 'by me';
                } else if (this.updatedByName) {
                    by = 'by ' + this.updatedByName;
                }
                // TODO: show 'by me' only for editable shared maps?

                this.editStatus = 'Last updated ' + time + ' ' + by;
            }

            // Last edit was XX ago by YY
        }
    }, {
        key: 'addBehaviors',

        // misc. UI behaviors for tooltips, popups etc.
        // TODO: figure out which of these need to be reapplied after dynamic data changes (e.g. LessonBook popovers)
        value: function addBehaviors() {

            // NOTE: we have to use regular bootstrap tooltips for toolbar buttons (instead of ng-bootstrap ones)
            // so we can turn them off for mobile. We also put the tooltips on wrappers rather than on the actual
            // buttons, so we can avoid the issue of stuck tooltips if a button gets disabled while the tooltip is showing.

            if (!common.isTouchDevice()) {
                // $('.tooltip-wrapper').tooltip({
                //     placement: 'top',
                //     container: 'body'
                // });

                // $('.dropdown-menu .btn').tooltip({
                //     placement: 'left',
                //     container: 'body'
                // }); // for layout options

                $('header, #map-title').hover(function () {
                    $('body.presenter-playing').addClass('hide-header');
                }, function () {
                    $('body.presenter-playing').removeClass('hide-header');
                });
            }
        }
    }, {
        key: 'handleNavigation',
        value: function handleNavigation() {
            // cross-browser tweaks:
            try {
                // http://www.opera.com/support/kb/view/827/
                opera.setOverrideHistoryNavigationMode('compatible');
                history.navigationMode = 'compatible';
            } catch (e) {}

            // install before-unload handler:

            var exitMessage = function exitMessage() {
                return 'Navigating away from your Map will cause any unsaved changes to be lost ' + '(any changes you make are automatically saved, but it takes a couple of seconds).';
            };

            //        $(window).bind('beforeunload', exitMessage);

            // prevent exit prompt when the user deliberately navigates away:

            $('#header-right a').click(function () {
                $(window).unbind('beforeunload', exitMessage);
            });
        }
    }, {
        key: 'handleBackspace',
        value: function handleBackspace() {
            $(document).on('keydown', function (event) {
                if (event.keyCode === BACKSPACE) {
                    if (!$('body :focus').is(':input')) {
                        // prevent accidental backspace when no input has focus:
                        event.preventDefault();
                        event.stopPropagation();
                    }
                }
            });
        }
    }]);

    return Editor;
})();

module.exports = Editor;

// overview diagram
//let overview = go.GraphObject.make(go.Overview, "overview-diagram", {
//    observed: this.map.getDiagram(),
//    contentAlignment: go.Spot.Center
//});
//let outline = overview.box.elements.first();
//outline.stroke = "#333";

// no biggie.

},{"../constants/editStatus.js":30,"../tools/Common.js":60,"./Map.js":42}],49:[function(require,module,exports){
// functions for the generator (aka ThinkQuery)
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Generator = (function () {
    function Generator(editor, map) {
        var _this = this;

        _classCallCheck(this, Generator);

        this._map = map;
        this._diagram = map.getDiagram();
        this.concept1 = '';
        this.concept2 = '';
        this.selectedQuestion = null;

        // ---------- functions for creating each of the structures - see views/maps/generator_tab -----------
        this.queries = {

            WHAT_IS: function WHAT_IS(x, y) {
                // 1
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                _this._diagram.model.setDataProperty(thing1.data, 'dflag', true);
                _this._map.createChild(thing1, 'is?');
                _this._map.createChild(thing1, 'is?');
                _this._map.createChild(thing1, 'is?');
            },

            WHAT_IS_NOT: function WHAT_IS_NOT(x, y) {
                // 2
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                _this._diagram.model.setDataProperty(thing1.data, 'dflag', true);
                _this._map.createChild(thing1, 'is not?');
                _this._map.createChild(thing1, 'is not?');
                _this._map.createChild(thing1, 'is not?');
            },

            DISTINGUISH_BETWEEN: function DISTINGUISH_BETWEEN(x, y) {
                // 3
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                _this._diagram.model.setDataProperty(thing1.data, 'dflag', true);
                _this._map.createChild(thing1, 'is?');
                _this._map.createChild(thing1, 'is?');
                _this._map.createChild(thing1, 'is?');

                var thing2 = _this._map.createThing(x + 250, y, _this.echoConcept2());
                _this._diagram.model.setDataProperty(thing2.data, 'dflag', true);
                _this._map.createChild(thing2, 'is?');
                _this._map.createChild(thing2, 'is?');
                _this._map.createChild(thing2, 'is?');
            },

            COMPARE_CONTRAST: function COMPARE_CONTRAST(x, y) {
                // 4
                var thing1 = _this._map.createThing(x - 150, y, _this.echoConcept1());
                var thing2 = _this._map.createThing(x + 150, y, _this.echoConcept2());
                _this._diagram.model.setDataProperty(thing1.data, 'dflag', true);
                _this._diagram.model.setDataProperty(thing2.data, 'dflag', true);
                var rthing1 = _this._map.createRLinkWithRThing(thing1, thing2, 'contrast');
                var rthing2 = _this._map.createRLinkWithRThing(thing1, thing2, 'compare');
                _this._diagram.model.setDataProperty(rthing1.labeledLink.data, 'type', 'toFrom');
                _this._diagram.model.setDataProperty(rthing2.labeledLink.data, 'type', 'toFrom');
            },

            PARTS_OF: function PARTS_OF(x, y) {
                // 5
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                _this._map.createChild(thing1, 'part?');
                _this._map.createChild(thing1, 'part?');
                _this._map.createChild(thing1, 'part?');
            },

            PART_OF: function PART_OF(x, y) {
                // 6
                var thing1 = _this._map.createThing(x, y, 'part of?');
                _this._map.createChild(thing1, _this.echoConcept1());
            },

            PARTS_HAVE_PARTS: function PARTS_HAVE_PARTS(x, y) {
                // 7
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                var child1 = _this._map.createChild(thing1, 'part?');
                _this._map.createChild(child1, 'part?');
                _this._map.createChild(child1, 'part?');
                var child2 = _this._map.createChild(thing1, 'part?');
                _this._map.createChild(child2, 'part?');
                _this._map.createChild(child2, 'part?');
            },

            R_PARTS: function R_PARTS(x, y) {
                // 8
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                var thing2 = _this._map.createThing(x + 250, y, _this.echoConcept2());
                var rthing = _this._map.createRLinkWithRThing(thing1, thing2, 'relationship?');
                _this._map.createChild(rthing, 'part?');
                _this._map.createChild(rthing, 'part?');
            },

            P_PARTS: function P_PARTS(x, y) {
                // 9
                var thing1 = _this._map.createThing(x + 300, y, _this.echoConcept1());
                var child1 = _this._map.createChild(thing1, 'part seen from viewpoint of ' + _this.echoConcept2() + '?');
                var child2 = _this._map.createChild(thing1, 'part seen from viewpoint of ' + _this.echoConcept2() + '?');
                var child3 = _this._map.createChild(thing1, 'part seen from viewpoint of ' + _this.echoConcept2() + '?');
                var thing2 = _this._map.createThing(x, y, _this.echoConcept2());
                _this._map.createPLink(thing2, thing1);
                _this._map.createPLink(thing2, child1);
                _this._map.createPLink(thing2, child2);
                _this._map.createPLink(thing2, child3);
            },

            RS_TO_AND_BY: function RS_TO_AND_BY(x, y) {
                // 10
                var related1 = _this._map.createThing(x, y, 'related idea?');
                var related2 = _this._map.createThing(x + 300, y + 50, 'related idea?');
                var related3 = _this._map.createThing(x + 50, y + 300, 'related idea?');
                var thing = _this._map.createThing(x + 130, y + 130, _this.echoConcept1());
                _this._map.createRLink(related1, thing);
                _this._map.createRLink(related2, thing);
                _this._map.createRLink(related3, thing);

                var thing1 = _this._map.createThing(x + 500, y + 150, 'idea?');
                var thing2 = _this._map.createThing(x + 750, y + 150, 'idea?');
                _this._map.createRLinkWithRThing(thing1, thing2, _this.echoConcept1());
            },

            WHAT_IS_R: function WHAT_IS_R(x, y) {
                // 11
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1());
                var thing2 = _this._map.createThing(x + 250, y, _this.echoConcept2());
                _this._map.createRLinkWithRThing(thing1, thing2, 'idea?');
            },

            PART_RS_ARE: function PART_RS_ARE(x, y) {
                // 12
                var thing1 = _this._map.createThing(x + 30, y, _this.echoConcept1(), 'freehand');
                var child1 = _this._map.createChild(thing1, 'part?');
                var child2 = _this._map.createChild(thing1, 'part?');
                var child3 = _this._map.createChild(thing1, 'part?');
                _this._diagram.model.setDataProperty(child1.data, 'loc', '-20 110');
                _this._diagram.model.setDataProperty(child2.data, 'loc', '80 110');
                _this._diagram.model.setDataProperty(child3.data, 'loc', '30 190');
                _this._map.createRLinkWithRThing(child1, child2, 'relationship?');
                _this._map.createRLinkWithRThing(child2, child3, 'relationship?');
                _this._map.createRLinkWithRThing(child3, child1, 'relationship?');
            },

            PART_RS_EXIST: function PART_RS_EXIST(x, y) {
                // 13
                var thing1 = _this._map.createThing(x, y, _this.echoConcept1(), 'right');
                var child11 = _this._map.createChild(thing1, 'part?');
                var child12 = _this._map.createChild(thing1, 'part?');
                var child13 = _this._map.createChild(thing1, 'part?');
                var thing2 = _this._map.createThing(x + 250, y, _this.echoConcept2());
                var child21 = _this._map.createChild(thing2, 'part?');
                var child22 = _this._map.createChild(thing2, 'part?');
                var child23 = _this._map.createChild(thing2, 'part?');
                _this._map.createRLink(thing1, thing2);
                _this._map.createRLinkWithRThing(child11, child21, 'relationship?');
                _this._map.createRLinkWithRThing(child12, child22, 'relationship?');
                _this._map.createRLinkWithRThing(child13, child23, 'relationship?');
            },

            RS_WITH_OTHERS: function RS_WITH_OTHERS(x, y) {
                // 14
                var thing1 = _this._map.createThing(x - 200, y, _this.echoConcept1());
                var thing2 = _this._map.createThing(x + 200, y, _this.echoConcept2());
                var thing3 = _this._map.createThing(x - 200, y + 200, 'another thing');
                var thing4 = _this._map.createThing(x + 200, y + 200, 'another thing');
                _this._map.createRLinkWithRThing(thing1, thing2, 'relationship?');
                _this._map.createRLinkWithRThing(thing1, thing3, 'relationship?');
                _this._map.createRLinkWithRThing(thing1, thing4, 'relationship?');
                _this._map.createRLinkWithRThing(thing2, thing4, 'relationship?');
                _this._map.createRLinkWithRThing(thing3, thing4, 'relationship?');
            },

            PARTS_OF_P: function PARTS_OF_P(x, y) {
                // 15
                var thing1 = _this._map.createThing(x - 100, y, _this.echoConcept1());
                var child1 = _this._map.createChild(thing1, 'part?');
                var child2 = _this._map.createChild(thing1, 'part?');
                var child3 = _this._map.createChild(thing1, 'part?');
                var thing2 = _this._map.createThing(x + 100, y, _this.echoConcept2());
                _this._map.createPLink(thing1, thing2);
            },

            POINT_FOR: function POINT_FOR(x, y) {
                // 16
                var thing = _this._map.createThing(x, y, 'new perspective');
                var thing1 = _this._map.createThing(x - 150, y + 150, _this.echoConcept1());
                var thing2 = _this._map.createThing(x + 150, y + 150, _this.echoConcept2());
                var rthing = _this._map.createRLinkWithRThing(thing1, thing2, 'relationship?');
                _this._map.createPLink(thing, rthing);
            },

            HAS_MULTIPLE_PS: function HAS_MULTIPLE_PS(x, y) {
                // 17
                var point1 = _this._map.createThing(x, y + 50, 'viewpoint?');
                var point2 = _this._map.createThing(x + 250, y, 'viewpoint?');
                var point3 = _this._map.createThing(x + 500, y + 50, 'viewpoint?');
                var view = _this._map.createThing(x + 250, y + 250, _this.echoConcept1());
                _this._map.createPLink(point1, view);
                _this._map.createPLink(point2, view);
                _this._map.createPLink(point3, view);
            },

            PARTS_FROM_MULTIPLE_PS: function PARTS_FROM_MULTIPLE_PS(x, y) {
                // 18
                var point1 = _this._map.createThing(x - 100, y, 'viewpoint?');
                var point2 = _this._map.createThing(x - 100, y + 125, 'viewpoint?');
                var point3 = _this._map.createThing(x - 100, y + 250, 'viewpoint?');
                var thing = _this._map.createThing(x + 150, y + 25, _this.echoConcept1());
                var child1 = _this._map.createChild(thing, 'part seen from viewpoint?');
                var child2 = _this._map.createChild(thing, 'part seen from viewpoint?');
                var child3 = _this._map.createChild(thing, 'part seen from viewpoint?');
                _this._map.createPLink(point1, child1);
                _this._map.createPLink(point1, child2);
                _this._map.createPLink(point2, child2);
                _this._map.createPLink(point3, child3);
            },

            WHAT_ABOUT: function WHAT_ABOUT(x, y) {
                // 19
                _this.queries.WHAT_IS(x, y);
                _this.queries.PARTS_OF(x + 300, y);
                _this.queries.PARTS_FROM_MULTIPLE_PS(x + 700, y);
                _this.queries.RS_TO_AND_BY(x, y + 400);
            }
        }; // queries
    }

    _createClass(Generator, [{
        key: 'echoConcept1',
        value: function echoConcept1() {
            return this.concept1 || '...';
        }
    }, {
        key: 'echoConcept2',
        value: function echoConcept2() {
            return this.concept2 || '...';
        }
    }, {
        key: 'swapConcepts',
        value: function swapConcepts() {
            var tmp = this.concept1;
            this.concept1 = this.concept2;
            this.concept2 = tmp;
        }
    }, {
        key: 'mapIt',
        value: function mapIt(question) {

            this._map.getAutosave().saveOnModelChanged = false;

            if ($scope.sandbox) {
                this._diagram.clear();
            }

            // figure out location for inserted stuff
            var db = this._map.computeMapBounds();
            var x = db.x + db.width + 200;
            var y = db.y;
            if (isNaN(x) || isNaN(y)) {
                x = y = 0;
            }
            //console.log('x, y: ' + x + ', ' + y);

            // insert the stuff and deselect it
            question(x, y);
            this._diagram.clearSelection();

            this._diagram.updateAllTargetBindings();
            this._diagram.layoutDiagram(true);

            this._map.getUi().resetZoom();

            this._map.getAutosave().saveOnModelChanged = true;
            this._map.getAutosave().save('edit_generator');
        }
    }, {
        key: 'selectQuestion',
        value: function selectQuestion(question) {
            this.selectedQuestion = question;
            if ($scope.sandbox) {
                this.mapIt(question);
            }
        }
    }, {
        key: 'surpriseMe',
        value: function surpriseMe() {
            var keys = _.keys(this.queries);
            var i = _.random(0, keys.length - 1);
            var question = this.queries[keys[i]];
            this.selectedQuestion = question;
            this.mapIt(question);

            $('#questions').animate({ scrollTop: i * 30 }, 1000);
        }
    }, {
        key: 'currentTabChanged',

        // called when a tab is opened or closed
        value: function currentTabChanged(newValue, oldValue) {
            if (oldValue === this._map.getUi().TAB_ID_GENERATOR) {
                // closing tab
                this._map.setEditingBlocked(false);
            } else if (newValue === this._map.getUi().TAB_ID_GENERATOR) {
                // opening tab
                this._map.setEditingBlocked(true);
            }
        }
    }, {
        key: 'getPlaceholderIdeaNames',

        // these get filtered out in LessonBook
        value: function getPlaceholderIdeaNames() {
            return ['is?', 'is not?', 'part?', 'viewpoint?', 'related idea?', 'idea?', 'part seen from viewpoint?', 'contrast?', 'comparison?', 'relationship?'];
        }
    }]);

    return Generator;
})();

module.exports = Generator;

},{}],50:[function(require,module,exports){
"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var go = window.go;
var Layouts = require("../Layouts.js");

var FreehandDiagramLayout = (function (_Layouts) {
    function FreehandDiagramLayout() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _classCallCheck(this, FreehandDiagramLayout);

        _get(Object.getPrototypeOf(FreehandDiagramLayout.prototype), "constructor", this).apply(this, args);
    }

    _inherits(FreehandDiagramLayout, _Layouts);

    _createClass(FreehandDiagramLayout, [{
        key: "toString",
        value: function toString() {
            return "FreehandDiagramLayout";
        }
    }, {
        key: "doLayout",
        value: function doLayout(coll) {
            //console.log('FreehandDiagramLayout.doLayout');
            var diagram = this._map.getDiagram();
            // diagram.startTransaction("Freehand Diagram Layout");

            //validateGroupLocations(diagram.findTopLevelGroups());
            var groups = diagram.findTopLevelGroups(); // get new iterator
            while (groups.next()) {
                var group = groups.value;
                if (!group.isLinkLabel) {
                    var loc = go.Point.parse(group.data.loc);
                    group.move(new go.Point(loc.x, loc.y));
                    //console.log('FreehandDiagramLayout, group: ' + group + ' to location: ' + loc.x + ',' + loc.y);
                }
            }

            // all adjustment of links is done from here, not from the other layouts...
            this.getLinksByNodes(true);
            var links = diagram.links.iterator;
            while (links.next()) {
                var link = links.value;
                // if (isNaN(link.location.x)) {
                //     console.log('link location isNaN');
                //     link.move(new go.Point(0,0));
                // }
                // console.log('link location: ' + link.location);
                this.adjustLinkLayout(link);
            }

            // diagram.commitTransaction("Freehand Diagram Layout");
        }
    }]);

    return FreehandDiagramLayout;
})(Layouts);

go.Diagram.inherit(FreehandDiagramLayout, go.Layout);

module.exports = FreehandDiagramLayout;

},{"../Layouts.js":41}],51:[function(require,module,exports){
"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var go = window.go;
var Layouts = require("../Layouts");

var FreehandLayout = (function (_Layouts) {
    function FreehandLayout() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _classCallCheck(this, FreehandLayout);

        _get(Object.getPrototypeOf(FreehandLayout.prototype), "constructor", this).apply(this, args);
    }

    _inherits(FreehandLayout, _Layouts);

    _createClass(FreehandLayout, [{
        key: "toString",
        value: function toString() {
            return "FreehandLayout";
        }
    }, {
        key: "doLayout",
        value: function doLayout(coll) {
            var diagram = this._map.getDiagram();
            diagram.startTransaction("Freehand Layout");

            var x = this.group.location.x;
            var y = this.group.location.y;

            var it = this.group.memberParts.iterator;
            while (it.next()) {
                var part = it.value;
                if (part instanceof go.Group && !part.isLinkLabel) {
                    var loc = go.Point.parse(part.data.loc);
                    //console.log('FreehandLayout, part: ' + part.data.text + ', loc: ' + loc + ', location: ' + part.location);
                    part.move(new go.Point(x + loc.x, y + loc.y));
                    part.layout.doLayout(part);
                }
            }

            diagram.commitTransaction("Freehand Layout");
        }
    }]);

    return FreehandLayout;
})(Layouts);

go.Diagram.inherit(FreehandLayout, go.Layout);

module.exports = FreehandLayout;

},{"../Layouts":41}],52:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var go = window.go;
var Layouts = require('../Layouts.js');

var LeftInventoryLayout = (function (_Layouts) {
    function LeftInventoryLayout() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _classCallCheck(this, LeftInventoryLayout);

        _get(Object.getPrototypeOf(LeftInventoryLayout.prototype), 'constructor', this).apply(this, args);
    }

    _inherits(LeftInventoryLayout, _Layouts);

    _createClass(LeftInventoryLayout, [{
        key: 'toString',
        value: function toString() {
            return 'LeftInventoryLayout';
        }
    }, {
        key: 'doLayout',
        value: function doLayout(coll) {
            //console.log('LeftInventoryLayout.doLayout, group: ' + this.group + ', location: ' + this.group.location);
            // this.diagram.startTransaction("Inventory Layout");
            var startX = this.group.location.x;
            var startY = this.group.location.y + (this.group.part.actualBounds.height + this.getInventoryMargin(this.group));
            this.layoutMembersForInventory(this.group, startX, startY, 'L');
            // this.diagram.commitTransaction("Inventory Layout");
        }
    }]);

    return LeftInventoryLayout;
})(Layouts);

go.Diagram.inherit(LeftInventoryLayout, go.Layout);

module.exports = LeftInventoryLayout;

},{"../Layouts.js":41}],53:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var go = window.go;
var Layouts = require('../Layouts.js');

var RightInventoryLayout = (function (_Layouts) {
    function RightInventoryLayout() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _classCallCheck(this, RightInventoryLayout);

        _get(Object.getPrototypeOf(RightInventoryLayout.prototype), 'constructor', this).apply(this, args);
    }

    _inherits(RightInventoryLayout, _Layouts);

    _createClass(RightInventoryLayout, [{
        key: 'toString',
        value: function toString() {
            return 'RightInventoryLayout';
        }
    }, {
        key: 'doLayout',
        value: function doLayout(coll) {
            //this.diagram.startTransaction("Inventory Layout");
            var startX = this.group.location.x + this.group.actualBounds.width;
            var startY = this.group.location.y + (this.group.part.actualBounds.height + this.getInventoryMargin(this.group));
            this.layoutMembersForInventory(this.group, startX, startY, 'R');
            //this.diagram.commitTransaction("Inventory Layout");
        }
    }]);

    return RightInventoryLayout;
})(Layouts);

go.Diagram.inherit(RightInventoryLayout, go.Layout);

module.exports = RightInventoryLayout;

},{"../Layouts.js":41}],54:[function(require,module,exports){
"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }

var go = window.go;
var Layouts = require("../Layouts.js");

var StackedLayout = (function (_Layouts) {
    function StackedLayout() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _classCallCheck(this, StackedLayout);

        _get(Object.getPrototypeOf(StackedLayout.prototype), "constructor", this).apply(this, args);
    }

    _inherits(StackedLayout, _Layouts);

    _createClass(StackedLayout, [{
        key: "toString",
        value: function toString() {
            return "StackedLayout";
        }
    }, {
        key: "doLayout",
        value: function doLayout(coll) {
            this.diagram.startTransaction("Stacked Layout");
            var margin = this.getStackMargin(this.group);
            var startX = this.group.location.x;
            var startY = this.group.location.y + (this.group.part.actualBounds.height + margin / 2);
            this.layoutMembersForStacked(this.group, startX, startY);
            this.diagram.commitTransaction("Stacked Layout");
        }
    }]);

    return StackedLayout;
})(Layouts);

go.Diagram.inherit(StackedLayout, go.Layout);

module.exports = StackedLayout;

},{"../Layouts.js":41}],55:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var go = window.go;
var mk = go.GraphObject.make;

var groupFillColor = '#f9f9f9';
var colorPLight = '#FDDDAF';
var colorPDark = '#C9882B';

// DSRP colors (from _variables.scss)
var colorD = '#f2624c';
var colorS = '#96c93d';
var colorP = '#fbaa36';

var eyeSvgPath = 'M 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00c 47.559,94.979, 144.341,160.00, 256.00,160.00c 111.657,0.00, 208.439-65.021, 256.00-160.00 C 464.442,161.021, 367.657,96.00, 256.00,96.00z M 382.225,180.852c 30.081,19.187, 55.571,44.887, 74.717,75.148 c-19.146,30.261-44.637,55.961-74.718,75.149C 344.427,355.257, 300.779,368.00, 256.00,368.00c-44.78,0.00-88.428-12.743-126.225-36.852 C 99.695,311.962, 74.205,286.262, 55.058,256.00c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65 C 130.725,190.866, 128.00,205.613, 128.00,221.00c0.00,70.692, 57.308,128.00, 128.00,128.00s 128.00-57.308, 128.00-128.00c0.00-15.387-2.725-30.134-7.704-43.799 C 378.286,178.39, 380.265,179.602, 382.225,180.852z M 256.00,205.00c0.00,26.51-21.49,48.00-48.00,48.00s-48.00-21.49-48.00-48.00s 21.49-48.00, 48.00-48.00 S 256.00,178.49, 256.00,205.00z';
var eyeBlockedSvgPath = 'M 419.661,148.208 C 458.483,175.723 490.346,212.754 512.00,256.00 C 464.439,350.979 367.657,416.00 256.00,416.00 C 224.717,416.00 194.604,410.894 166.411,401.458 L 205.389,362.48 C 221.918,366.13 238.875,368.00 256.00,368.00 C 300.779,368.00 344.427,355.257 382.223,331.148 C 412.304,311.96 437.795,286.26 456.941,255.999 C 438.415,226.716 413.934,201.724 385.116,182.752 L 419.661,148.208 ZM 256.00,349.00 C 244.638,349.00 233.624,347.512 223.136,344.733 L 379.729,188.141 C 382.51,198.627 384.00,209.638 384.00,221.00 C 384.00,291.692 326.692,349.00 256.00,349.00 ZM 480.00,0.00l-26.869,0.00 L 343.325,109.806C 315.787,100.844, 286.448,96.00, 256.00,96.00C 144.341,96.00, 47.559,161.021,0.00,256.00 c 21.329,42.596, 52.564,79.154, 90.597,106.534L0.00,453.131L0.00,480.00 l 26.869,0.00 L 480.00,26.869L 480.00,0.00 z M 208.00,157.00c 24.022,0.00, 43.923,17.647, 47.446,40.685 l-54.762,54.762C 177.647,248.923, 160.00,229.022, 160.00,205.00C 160.00,178.49, 181.49,157.00, 208.00,157.00z M 55.058,256.00 c 19.146-30.262, 44.637-55.962, 74.717-75.148c 1.959-1.25, 3.938-2.461, 5.929-3.65C 130.725,190.866, 128.00,205.613, 128.00,221.00 c0.00,29.262, 9.825,56.224, 26.349,77.781l-29.275,29.275C 97.038,309.235, 73.197,284.67, 55.058,256.00z';
var paperclipSvgPath = 'M 348.916,163.524l-32.476-32.461L 154.035,293.434c-26.907,26.896-26.907,70.524,0.00,97.422 c 26.902,26.896, 70.53,26.896, 97.437,0.00l 194.886-194.854c 44.857-44.831, 44.857-117.531,0.00-162.363 c-44.833-44.852-117.556-44.852-162.391,0.00L 79.335,238.212l 0.017,0.016c-0.145,0.152-0.306,0.288-0.438,0.423 c-62.551,62.548-62.551,163.928,0.00,226.453c 62.527,62.528, 163.934,62.528, 226.494,0.00c 0.137-0.137, 0.258-0.284, 0.41-0.438l 0.016,0.017 l 139.666-139.646l-32.493-32.46L 273.35,432.208l-0.008,0.00 c-0.148,0.134-0.282,0.285-0.423,0.422 c-44.537,44.529-116.99,44.529-161.538,0.00c-44.531-44.521-44.531-116.961,0.00-161.489c 0.152-0.152, 0.302-0.291, 0.444-0.423l-0.023-0.03 l 204.64-204.583c 26.856-26.869, 70.572-26.869, 97.443,0.00c 26.856,26.867, 26.856,70.574,0.00,97.42L 218.999,358.375 c-8.968,8.961-23.527,8.961-32.486,0.00c-8.947-8.943-8.947-23.516,0.00-32.46L 348.916,163.524z';

var GroupTemplate = (function () {
    function GroupTemplate(map) {
        _classCallCheck(this, GroupTemplate);

        this._map = map;
    }

    _createClass(GroupTemplate, [{
        key: 'init',
        value: function init() {
            var _this = this;

            return mk(go.Group, go.Panel.Vertical, new go.Binding('layout', 'layout', function (layoutName) {
                return _this._map.getLayouts().getLayout(layoutName);
            }), new go.Binding('movable', '', function (obj) {
                return !obj.isLinkLabel;
            }).ofObject(), new go.Binding('isSubGraphExpanded', 'sExpanded'),
            // dim the thing if it's being dragged over another thing (drop to sister/child)
            new go.Binding('opacity', '', function (obj) {
                return obj.isSelected && _this._map.getUi().dragTargetGroup ? 0.25 : 1;
            }).ofObject(), {
                locationObjectName: 'mainpanel',
                locationSpot: go.Spot.TopLeft,
                selectionAdorned: false,
                isSubGraphExpanded: true,
                layerName: 'Foreground',
                // highlight corners
                mouseEnter: function mouseEnter(event, target, obj2) {
                    _this._map.getUi().mouseOverGroup = target;
                    _this._map.getDiagram().updateAllTargetBindings();
                },
                // unhighlight corners
                mouseLeave: function mouseLeave(event, target, obj2) {
                    _this._map.getUi().mouseOverGroup = null;
                    _this._map.getDiagram().updateAllTargetBindings();
                }
                // containingGroupChanged: function(part, oldgroup, newgroup) {
                //     this._map.getDiagram().model.setDataProperty(part.data, 'level', this._map.computeLevel(part));
                //     //part.updateTargetBindings();  
                // }
            }, mk(go.Panel, go.Panel.Horizontal, this.groupExternalTextBlock(this._map.getLayouts().showLeftTextBlock, 'right'), mk(go.Panel, go.Panel.Position, {
                name: 'mainpanel'
            }, new go.Binding('scale', '', this._map.getLayouts().getScale).ofObject(),
            // drag area
            mk(go.Shape, 'Rectangle', {
                name: 'dragarea',
                position: new go.Point(0, 0),
                width: 100,
                height: 100,
                fill: groupFillColor,
                stroke: null,
                cursor: 'move',
                // show debug info
                contextClick: function contextClick(event, target) {
                    if (event.control) {
                        console.log(_this.groupInfo(target.part));
                    }
                }
            }), mk(go.Panel, go.Panel.Position, this.viewMarker(), this.dragAboveTarget(), this.dragIntoTarget(), this.dragBelowTarget(), this.groupInternalTextBlock(), this.cornerD(), this.dFlagMarker(), this.cornerS(), this.sCollapsedMarker(), this.cornerR(), this.pointMarker(), this.cornerP(), this.attachmentPaperClip(), this.mainBorder())), this.groupExternalTextBlock(this._map.getLayouts().showRightTextBlock, 'left')),

            // the placeholder normally holds the child nodes, but we just use a dummy placeholder
            mk(go.Shape, {
                name: 'placeholder',
                fill: 'transparent',
                stroke: null,
                desiredSize: new go.Size(0, 0)
            }));
        }
    }, {
        key: 'groupInfo',
        value: function groupInfo(obj) {
            return obj.data.text + '\n' + 'object: ' + obj + '\n' + 'key: ' + obj.data.key + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'layout: ' + obj.layout + '\n' + 'data.layout: ' + obj.data.layout + '\n' + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + '\n' + 'freehand position (data.loc): ' + go.Point.parse(obj.data.loc) + '\n' + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + '\n' + 'getScale(): ' + this._map.getLayouts().getScale(obj) + '\n' + 'isLinkLabel: ' + obj.data.isLinkLabel + '\n' + 'labeledLink: ' + obj.labeledLink + '\n';
        }
    }, {
        key: 'viewMarker',

        // P view indicator
        value: function viewMarker() {
            var _this2 = this;

            return mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
                return true;
            }).ofObject(), new go.Binding('fill', '', function (obj) {
                return _this2.getViewMarkerFill(obj);
            }).ofObject(), {
                position: new go.Point(0, 0),
                height: 18,
                width: 100,
                stroke: null
            });
        }
    }, {
        key: 'getViewMarkerFill',
        value: function getViewMarkerFill(obj) {
            var weight = this._map.getPerspectives().getPerspectiveViewWeight(obj);

            if (weight === 3) {
                return colorPDark;
            } else if (weight === 2) {
                return colorP;
            } else if (weight === 1) {
                return colorPLight;
            } else {
                return 'transparent';
            }
        }
    }, {
        key: 'dragAboveTarget',

        // --------------- targets for dragging to D or S -----------------
        value: function dragAboveTarget() {
            var _this3 = this;

            return mk(go.Panel, go.Panel.Position, {
                position: new go.Point(0, 0),
                height: 25,
                width: 100,
                mouseDragEnter: this.getGroupMouseDragEnterHandler(this._map.LEFT),
                mouseDragLeave: this.groupMouseDragLeaveHandler,
                mouseDrop: this.getGroupMouseDropHandler(this._map.LEFT),
                click: this.groupClickHandler
            },
            // drag target region
            mk(go.Shape, 'Rectangle', {
                position: new go.Point(0, 0),
                height: 25,
                width: 100,
                cursor: 'pointer',
                stroke: null,
                fill: 'transparent'
            }),
            // drag indicator bar
            mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
                return _this3.canDragSelectionToBecomeOrderedSisterOf(obj.part, _this3._map.LEFT, false);
            }).ofObject(), {
                position: new go.Point(0, 0),
                height: 10,
                width: 100,
                stroke: null,
                fill: '#000'
            }));
        }
    }, {
        key: 'dragIntoTarget',
        value: function dragIntoTarget() {
            return mk(go.Panel, go.Panel.Position, {
                position: new go.Point(0, 25),
                height: 50,
                width: 100,
                mouseDragEnter: this.getGroupMouseDragEnterHandler(null),
                mouseDragLeave: this.groupMouseDragLeaveHandler,
                mouseDrop: this.getGroupMouseDropHandler(null),
                click: this.groupClickHandler
            }, mk(go.Shape, 'Rectangle', {
                position: new go.Point(0, 0),
                height: 50,
                width: 100,
                cursor: 'pointer',
                stroke: null,
                fill: 'transparent'
            }));
        }
    }, {
        key: 'dragBelowTarget',
        value: function dragBelowTarget() {
            var _this4 = this;

            return mk(go.Panel, go.Panel.Position, {
                position: new go.Point(0, 75),
                height: 25,
                width: 100,
                mouseDragEnter: this.getGroupMouseDragEnterHandler(this._map.RIGHT),
                mouseDragLeave: this.groupMouseDragLeaveHandler,
                mouseDrop: this.getGroupMouseDropHandler(this._map.RIGHT),
                click: this.groupClickHandler
            },
            // drag target region
            mk(go.Shape, 'Rectangle', {
                position: new go.Point(0, 0),
                height: 25,
                width: 100,
                cursor: 'pointer',
                stroke: null,
                fill: 'transparent'
            }),
            // drag indicator bar
            mk(go.Shape, 'Border', new go.Binding('visible', '', function (obj) {
                return _this4.canDragSelectionToBecomeOrderedSisterOf(obj.part, _this4._map.RIGHT, false);
            }).ofObject(), {
                position: new go.Point(0, 15),
                height: 10,
                width: 100,
                stroke: null,
                fill: '#000'
            }));
        }
    }, {
        key: 'groupInternalTextBlock',

        // Returns the TextBlock for the group title, for use in the main group template, inside the box.
        value: function groupInternalTextBlock() {
            var _this5 = this;

            return mk(go.Panel, go.Panel.Horizontal, {
                position: new go.Point(0, 0),
                desiredSize: new go.Size(100, 100)
            }, mk(go.TextBlock, new go.Binding('text', 'text').makeTwoWay(), new go.Binding('visible', '', function (group) {
                // always show text inside box for R-things, because external text will throw off layout
                return _this5._map.getLayouts().isNotWithinInventoryLayout(group) || _this5._map.getLayouts().isRThingWithinInventoryLayout(group);
            }).ofObject(), {
                width: 80,
                margin: 10,
                alignment: go.Spot.Center,
                textAlign: 'center',
                cursor: 'move',
                font: '10px sans-serif',
                isMultiline: true,
                wrap: go.TextBlock.WrapDesiredSize,

                mouseDragEnter: this.getGroupMouseDragEnterHandler(null),
                mouseDragLeave: this.groupMouseDragLeaveHandler,
                mouseDrop: this.getGroupMouseDropHandler(null),
                click: this.groupClickHandler,
                contextClick: function contextClick(event, target) {
                    if (event.control) {
                        console.log(_this5.groupInfo(target.part));
                    }
                }
            }));
        }
    }, {
        key: 'groupExternalTextBlock',

        // Returns a TextBlock for the group title, for use in the main group template, on the left or right.
        // visibleFn is a callback to be bound to the visibility attribute of the TextBlock.
        // textAlign is 'left' or 'right'.
        value: function groupExternalTextBlock(visibleFn, textAlign) {
            return mk(go.TextBlock, new go.Binding('text', 'text').makeTwoWay(), new go.Binding('visible', '', visibleFn).ofObject(), new go.Binding('scale', '', this._map.getLayouts().getExternalTextScale).ofObject(), {
                name: 'externaltext-' + textAlign, // NB: this screws up layouts for some reason - ??
                textAlign: textAlign,
                margin: 5,
                font: '10px sans-serif',
                isMultiline: true,
                click: this.groupClickHandler
            });
        }
    }, {
        key: 'getGroupMouseDragEnterHandler',

        // --------- handlers for mouse drag/drop actions on groups, which need to be replicated on different target parts -------

        // position is this._map.LEFT, null, or this._map.RIGHT
        value: function getGroupMouseDragEnterHandler(position) {
            var _this6 = this;

            return function (event, target, obj2) {
                //console.log('mouseDragEnter, e.dp: ' + event.documentPoint + ', target.part: ' + target.part + ', target bounds: ' + target.actualBounds);
                _this6._map.getUi().dragTargetGroup = target.part;
                _this6._map.getUi().dragTargetPosition = position;
                _this6._map.getDiagram().updateAllTargetBindings();
            };
        }
    }, {
        key: 'groupMouseDragLeaveHandler',
        value: function groupMouseDragLeaveHandler(event, target, obj2) {
            this._map.getUi().dragTargetGroup = null;
            this._map.getUi().dragTargetPosition = null;
            this._map.getDiagram().updateAllTargetBindings();
        }
    }, {
        key: 'getGroupMouseDropHandler',
        value: function getGroupMouseDropHandler(position) {
            var _this7 = this;

            return function (event, dropTarget) {
                _this7.handleGroupMouseDrop(event, dropTarget, position);
            };
        }
    }, {
        key: 'groupClickHandler',
        value: function groupClickHandler(event, target) {
            // handle single or double click
            this._map.getUi().handleCornerClick('', target);
        }
    }, {
        key: 'handleGroupMouseDrop',

        // handle drop on one of the three target regions (top, middle, bottom)
        // side is this._map.LEFT or this._map.RIGHT
        value: function handleGroupMouseDrop(event, dropTarget, side) {
            //console.log('dragAboveTarget.mouseDrop, target: ' + dropTarget + ', part: ' + dropTarget .part + ', show: ' + show);
            if (side && this.canDragSelectionToBecomeOrderedSisterOf(dropTarget.part, side, true)) {
                this._map.addSelectedThingAsOrderedSisterOf(dropTarget.part, side);
            } else if (this.canDragSelectionToBecomeSistersOf(dropTarget.part, true)) {
                this._map.addSelectedThingsAsSistersOf(dropTarget.part);
            } else if (this.canDragSelectionToBecomeChildrenOf(dropTarget.part, true)) {
                this._map.addSelectedThingsAsChildrenOf(dropTarget.part);
            }
        }
    }, {
        key: 'getGroupSelectionStroke',

        // -----------------------------------------------------------------------------

        // NB: these are here because they are about colors;
        // similar functions that are scale-related are in layouts.js...
        value: function getGroupSelectionStroke(obj) {
            if (obj.isSelected) {
                if (this._map.getPerspectives().isInPEditorMode()) return colorP;else if (this._map.getPerspectives().isInDEditorMode()) return colorD;else return '#000';
            } else {
                return '#000';
            }
        }
    }, {
        key: 'getGroupSelectionStrokeWidth',

        // OK, this isn't about colors, but it wants to be near the one above...
        value: function getGroupSelectionStrokeWidth(obj) {
            return obj.isSelected ? 3 : 1;
        }
    }, {
        key: 'showDCorner',

        // -----------------------------------------------------------------------------

        // callbacks to determine when the corners should be visible

        value: function showDCorner(group) {
            if (this._map.getPerspectives().isDEditorThing(group)) {
                // mark distinction thing
                return true;
            } else if (this._map.getPerspectives().isInPOrDEditorMode()) {
                // don't show any corners if in P/D editor mode
                return false;
            } else if (this._map.getPresenter().isCreatingThumbnail) {
                // don't show any corners if capturing thumbnail
                return false;
            } else {
                return group === this._map.getUi().mouseOverGroup || /*this.isTouchDevice() &&*/group.isSelected || this.canDragSelectionToBecomeSistersOf(group, false) && (!this._map.getUi().dragTargetPosition || this.cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
            }
        }
    }, {
        key: 'showSCorner',
        value: function showSCorner(group) {
            if (this._map.getPerspectives().isInPOrDEditorMode()) {
                // don't show any corners if in P/D editor mode
                return false;
            } else if (this._map.getPresenter().isCreatingThumbnail) {
                // don't show any corners if capturing thumbnail
                return false;
            } else {
                return group === this._map.getUi().mouseOverGroup || /*$scope.isTouchDevice() &&*/group.isSelected || this.canDragSelectionToBecomeChildrenOf(group, false) && (!this._map.getUi().dragTargetPosition || this.cannotDragSelectionToBecomeOrderedSisterOf(group)); // not showing drag above/below indicators
            }
        }
    }, {
        key: 'showRCorner',
        value: function showRCorner(group) {
            if (this._map.getPerspectives().isInPOrDEditorMode()) {
                // don't show any corners if in P/D editor mode
                return false;
            } else if (this._map.getPresenter().isCreatingThumbnail) {
                // don't show any corners if capturing thumbnail
                return false;
            } else {
                return group === this._map.getUi().mouseOverGroup || /*$scope.isTouchDevice() &&*/group.isSelected; // show corners on mouseover
            }
        }
    }, {
        key: 'showPCorner',
        value: function showPCorner(group) {
            if (this._map.getPerspectives().isPEditorPoint(group)) {
                return true; // mark perspective point
            } else if (this._map.getPerspectives().isInPOrDEditorMode()) {
                // don't show any corners if in P/D editor mode
                return false;
            } else if (this._map.getPresenter().isCreatingThumbnail) {
                // don't show any corners if capturing thumbnail
                return false;
            } else {
                return group === this._map.getUi().mouseOverGroup || /*$scope.isTouchDevice() &&*/group.isSelected; // show corners on mouseover
            }
        }
    }, {
        key: 'showPDot',
        value: function showPDot(link) {
            return true; // this._map.getUi().getMapEditorOptions().perspectiveMode != 'both';
        }
    }, {
        key: 'canDragSelectionToBecomeSistersOf',

        // these functions are used in two modes:
        // 1. with isDropping == false, to highlight drop targets based on this._map.getUi().dragTargetGroup and this._map.getUi().dragTargetPosition,
        //    which are set on mouseDragEnter/mouseDragleave
        // 2. with isDropping == true, on drop, when the above indicators have gone away, but we know what the dropped
        //    and target groups are, and we want to know what the drop should do.

        value: function canDragSelectionToBecomeSistersOf(group, isDropping) {
            return (group === this._map.getUi().dragTargetGroup || isDropping) && this._map.thingsSelectedAreDescendantsOf(group);
        }
    }, {
        key: 'canDragSelectionToBecomeChildrenOf',
        value: function canDragSelectionToBecomeChildrenOf(group, isDropping) {
            return (group === this._map.getUi().dragTargetGroup || isDropping) && !this._map.thingsSelectedIncludeSlide() && !this._map.thingsSelectedAreDescendantsOf(group);
        }
    }, {
        key: 'canDragSelectionToBecomeOrderedSisterOf',

        // side is this._map.LEFT or this._map.RIGHT
        value: function canDragSelectionToBecomeOrderedSisterOf(targetGroup, side, isDropping) {
            // must be dragging single group
            var draggedGroup = this._map.getUniqueThingSelected();
            if (!draggedGroup) {
                return false;
            }

            // dragged and target must be Sisters in inventory layout
            return (targetGroup == this._map.getUi().dragTargetGroup || isDropping) && (this._map.getUi().dragTargetPosition === side || isDropping) && this._map.getLayouts().areSistersInInventoryLayout(draggedGroup, targetGroup);
        }
    }, {
        key: 'cannotDragSelectionToBecomeOrderedSisterOf',
        value: function cannotDragSelectionToBecomeOrderedSisterOf(targetGroup) {
            return !this.canDragSelectionToBecomeOrderedSisterOf(targetGroup, this._map.LEFT) && !this.canDragSelectionToBecomeOrderedSisterOf(targetGroup, this._map.RIGHT);
        }
    }, {
        key: 'dFlagMarker',

        // ---------------- components for main group template ------------------

        value: function dFlagMarker() {
            return mk(go.Shape, new go.Binding('fill', '', function (obj) {
                return obj.data.dflag ? '#000' : null;
            }).ofObject(), {
                name: 'dflag',
                position: new go.Point(0, 0),
                desiredSize: new go.Size(18, 18),
                geometry: go.Geometry.parse('F M0 1 L0 18 L18 0 L1 0z', true),
                cursor: 'pointer',
                pickable: false,
                stroke: null
            });
        }
    }, {
        key: 'cornerD',

        // 'D' corner (top left, red)
        value: function cornerD() {
            var _this8 = this;

            return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
                return _this8.showDCorner(obj) ? 1 : 0;
            }).ofObject(), {
                name: 'cornerD',
                position: new go.Point(0, 0),
                desiredSize: new go.Size(50, 50),
                opacity: 0
            }, mk(go.Shape, {
                position: new go.Point(0, 0),
                desiredSize: new go.Size(50, 50),
                geometry: go.Geometry.parse('F M0 1 L0 50 L50 0 L1 0z', true),
                fill: colorD,
                stroke: null,
                cursor: 'pointer',
                click: function click(event, target) {
                    //console.log('click, control:' + event.control + ', alt:' + event.alt + ', meta:' + event.meta);
                    if (event.alt) {
                        // NB: a side effect of this will be to select just this group,
                        // which would not happen otherwise via control-click
                        _this8._map.getPerspectives().setDEditorThing(target.part);
                    } else {
                        // handle single or double click
                        _this8._map.getUi().handleCornerClick('D', target.part);
                    }
                },
                contextClick: function contextClick(event, target) {
                    //console.log('contextClick:' + event);
                    _this8._map.toggleDFlag(target.part);
                }
            }), mk(go.TextBlock, {
                text: 'D',
                stroke: 'white',
                font: '9px sans-serif',
                position: new go.Point(12, 15),
                pickable: false
            }));
        }
    }, {
        key: 'cornerS',

        // 'S' corner (bottom left, green)
        value: function cornerS() {
            var _this9 = this;

            return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
                return _this9.showSCorner(obj) ? 1 : 0;
            }).ofObject(), {
                name: 'cornerS',
                position: new go.Point(0, 50),
                desiredSize: new go.Size(50, 50),
                opacity: 0
            }, mk(go.Shape, {
                position: new go.Point(0, 0),
                desiredSize: new go.Size(50, 50),
                geometry: go.Geometry.parse('F M0 0 L0 49 L1 50 L50 50z', true),
                fill: colorS,
                stroke: null,
                cursor: 'pointer',
                click: function click(event, target) {
                    // handle single or double click
                    _this9._map.getUi().handleCornerClick('S', target.part);
                }
            }),
            // expansion indicator
            mk(go.Shape, new go.Binding('position', '', function (obj) {
                return obj.isSubGraphExpanded ? new go.Point(4, 43) : new go.Point(5, 38);
            }).ofObject(), new go.Binding('angle', '', function (obj) {
                return obj.isSubGraphExpanded ? 90 : 0;
            }).ofObject(), {
                desiredSize: new go.Size(5, 10),
                geometry: go.Geometry.parse('F M0 0 L5 5 L0 10z', true),
                fill: '#333',
                stroke: null,
                cursor: 'pointer',
                pickable: false
            }), mk(go.TextBlock, {
                text: 'S',
                stroke: 'white',
                font: '9px sans-serif',
                position: new go.Point(12, 28),
                pickable: false
            }));
        }
    }, {
        key: 'sCollapsedMarker',

        // show only when system is collapsed
        value: function sCollapsedMarker() {
            var _this10 = this;

            return mk(go.Shape, new go.Binding('visible', '', function (obj) {
                return !_this10.showSCorner(obj) && obj.memberParts.count > 0 && !obj.isSubGraphExpanded;
            }).ofObject(), {
                position: new go.Point(5, 88),
                desiredSize: new go.Size(5, 10),
                geometry: go.Geometry.parse('F M0 0 L5 5 L0 10z', true),
                fill: '#333',
                stroke: null,
                cursor: 'pointer',
                pickable: false
            });
        }
    }, {
        key: 'cornerR',

        // 'R' corner (bottom right, blue)
        value: function cornerR() {
            var _this11 = this;

            return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
                return _this11.showRCorner(obj) ? 1 : 0;
            }).ofObject(), {
                name: 'cornerR',
                position: new go.Point(0, 0),
                desiredSize: new go.Size(100, 100),
                opacity: 0
            }, mk(go.Shape, {
                name: 'cornerRShape',
                // NB: this corner is done differently from the others:
                // 1. the overall shape is the size of the whole square, so the port falls in the middle instead of the corner;
                // 2. the geometry traces around the edges of the whole square, because otherwise the link line will
                //    show inside the main square if it's crossing one of the other 3 quadrants
                position: new go.Point(0, 0),
                desiredSize: new go.Size(100, 100),
                geometry: go.Geometry.parse('F' + 'M0 0 L0 100 ' + // top left to bottom left
                'L99 100 L100 99 L 100 0 ' + // bottom/right sides (round bottom right corner)
                'L 0 0 L 100 0 ' + // back to top left then top right
                'L 100 50 L 50 100 ' + // to midpoint of right side, midpoint of bottom side
                'L0 100z', // bottom left, return home
                true),
                fill: colorR,
                stroke: null,
                cursor: 'pointer',

                portId: 'R',
                fromLinkable: true,
                fromLinkableSelfNode: false,
                fromLinkableDuplicates: true,
                toLinkable: true,
                toLinkableSelfNode: false,
                toLinkableDuplicates: true,
                click: function click(event, target) {
                    // handle single or double click
                    _this11._map.getUi().handleCornerClick('R', target.part);
                }
            }), mk(go.TextBlock, {
                text: 'R',
                stroke: 'white',
                font: '9px sans-serif',
                pickable: false,
                position: new go.Point(82, 78)
            }));
        }
    }, {
        key: 'attachmentPaperClip',
        value: function attachmentPaperClip() {
            var _this12 = this;

            return mk(go.Shape, new go.Binding('visible', '', function (obj) {
                return obj.data.attachments && obj.data.attachments !== undefined && obj.data.attachments.length > 0;
            }).ofObject(), new go.Binding('geometry', '', function (obj) {
                return go.Geometry.parse(paperclipSvgPath, true);
            }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
                return new go.Size(512, 512); // NB: the two icons don't scale to the same proportions for some reason - ??
            }).ofObject(), {
                position: new go.Point(46, 85),
                scale: 0.02,
                stroke: '#000',
                fill: '#000',
                click: function click(event, target) {
                    console.log('clip clicked');
                    _this12._map.getUi().toggleTab(_this12._map.getUi().TAB_ID_ATTACHMENTS);
                }
            });
        }
    }, {
        key: 'pEyeball',
        value: function pEyeball() {
            var _this13 = this;

            return mk(go.Shape, new go.Binding('visible', '', function (obj) {
                return _this13._map.getPerspectives().isPerspectivePoint(obj);
            }).ofObject(), new go.Binding('geometry', '', function (obj) {
                return go.Geometry.parse(_this13._map.pIsExpanded(obj) ? eyeSvgPath : eyeBlockedSvgPath, true);
            }).ofObject(), new go.Binding('desiredSize', '', function (obj) {
                return new go.Size(512, _this13._map.pIsExpanded(obj) ? 440 : 512); // NB: the two icons don't scale to the same proportions for some reason - ??
            }).ofObject(), {
                position: new go.Point(87, 4),
                scale: 0.02,
                stroke: '#000',
                fill: '#000',
                pickable: false
            });
        }
    }, {
        key: 'pointMarker',

        // P expansion indicator - this shows when the P corner is not visible, and only if the thing is a perspective point
        value: function pointMarker() {
            return this.pEyeball();
        }
    }, {
        key: 'cornerP',

        // 'P' corner (top right, orange)
        value: function cornerP() {
            var _this14 = this;

            return mk(go.Panel, go.Panel.Position, new go.Binding('opacity', '', function (obj) {
                return _this14.showPCorner(obj) ? 1 : 0;
            }).ofObject(), {
                name: 'cornerP',
                position: new go.Point(0, 0),
                desiredSize: new go.Size(100, 100),
                opacity: 0
            }, mk(go.Shape, {
                name: 'cornerPShape',
                position: new go.Point(0, 0),
                desiredSize: new go.Size(100, 100),
                // NB: this geometry covers the whole square; see note above for cornerR
                geometry: go.Geometry.parse('F' + 'M0 0 L0 100 L100 100' + // top left to bottom left to bottom right
                'L100 1 L99 0 L0 0' + // right/top sides (round top right corner)
                'L 50 0 L 100 50 ' + // to midpoint of top side, midpoint of right side
                'L100 100 0 100z', // bottom right, bottom left, return home
                true),

                fill: colorP,
                stroke: null,
                cursor: 'pointer',

                portId: 'P',
                fromLinkable: true,
                fromLinkableSelfNode: false,
                fromLinkableDuplicates: false,
                toLinkable: true,
                toLinkableSelfNode: false,
                toLinkableDuplicates: false,
                toMaxLinks: 1,
                click: function click(event, target) {
                    // handle single or double click
                    _this14._map.getUi().handleCornerClick('P', target.part);
                }
            }), this.pEyeball(), // P expansion indicator
            mk(go.TextBlock, {
                text: 'P',
                stroke: 'white',
                font: '9px sans-serif',
                pickable: false,
                position: new go.Point(81, 15)
            }));
        }
    }, {
        key: 'mainBorder',
        value: function mainBorder() {
            return mk(go.Shape, 'Border', new go.Binding('stroke', '', this.getGroupSelectionStroke).ofObject(), new go.Binding('strokeWidth', '', this.getGroupSelectionStrokeWidth).ofObject(), {
                name: 'mainarea',
                position: new go.Point(0, 0),
                height: 100,
                width: 100,
                fill: null,
                //portId: '',
                cursor: 'pointer',
                fromLinkable: true,
                fromLinkableSelfNode: false,
                fromLinkableDuplicates: true,
                toLinkable: true,
                toLinkableSelfNode: false,
                toLinkableDuplicates: true
            });
        }
    }]);

    return GroupTemplate;
})();

module.exports = GroupTemplate;
// show corners on mouseover
// drag to D (make it sisters)
// show corners on mouseover
// drag to S (make it children)

},{}],56:[function(require,module,exports){
"use strict";

var go = window.go;
var mk = go.GraphObject.make;

var dLinkTemplate = function dLinkTemplate(map) {
    return mk(go.Link, {
        selectable: false
    }, mk(go.Shape, {
        name: "LINKSHAPE",
        stroke: null
    }));
};

module.exports = dLinkTemplate;

},{}],57:[function(require,module,exports){
'use strict';

var go = window.go;
var mk = go.GraphObject.make;

var colorR = '#4cbfc2';

var linkInfo = function linkInfo(map, obj) {
    var snpos = map.getLayouts().getSameNodesLinkPosition(obj);
    return '' + 'object: ' + obj + '\n' + 'fromNode: ' + obj.fromNode + '\n' + 'toNode: ' + obj.toNode + '\n' + 'labelNodes: ' + obj.labelNodes.count + '\n' + 'labelNodeIsVisible: ' + map.getLayouts().labelNodeIsVisible(obj) + '\n' + 'fromPortId: ' + obj.fromPortId + '\n' + 'toPortId: ' + obj.toPortId + '\n' + 'category: ' + (obj.data ? obj.data.category : '') + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'fromAndToNodesAreVisible: ' + map.getLayouts().fromAndToNodesAreVisible(obj) + '\n' + 'curve: ' + obj.curve + '\n' + 'curviness: ' + obj.curviness + '\n' + 'fromEndSegmentLength: ' + Math.round(obj.fromEndSegmentLength) + '\n' + 'toEndSegmentLength: ' + Math.round(obj.toEndSegmentLength) + '\n' + 'sameNodesLinkPosition: ' + snpos.index + ' of ' + snpos.count + '\n' +
    //+ 'geometry: ' + obj.geometry + "\n" +
    'getLinkStrokeWidth: ' + map.getLayouts().getLinkStrokeWidth(obj) + '\n';
};

// when to show the R-thing knob on a link
var showKnob = function showKnob(map, link) {
    return link === map.getUi().mouseOverLink;
};

var getRLinkSelectionStroke = function getRLinkSelectionStroke(map, obj) {
    if (obj.isSelected || obj === map.getUi().mouseOverLink) {
        return colorR; // TODO: can P links be selected?
    } else {
        return '#000';
    }
};

var linkTemplate = function linkTemplate(map) {
    return mk(go.Link, {
        selectionAdorned: false,
        layerName: '',
        routing: go.Link.Normal,
        relinkableFrom: true,
        relinkableTo: true,
        mouseEnter: function mouseEnter(event, target, obj2) {
            map.getUi().mouseOverLink = target;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseLeave: function mouseLeave(event, target, obj2) {
            map.getUi().mouseOverLink = null;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDragEnter: function mouseDragEnter(event, target, dragObject) {
            map.getUi().mouseOverLink = target;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDragLeave: function mouseDragLeave(event, dropTarget, dragObject) {
            map.getUi().mouseOverLink = null;
            map.getDiagram().updateAllTargetBindings();
        },
        mouseDrop: function mouseDrop(event, dropTarget) {
            var parts = map.getDiagram().selection;
            if (parts && parts.count === 1 && parts.first() instanceof go.Group) {
                map.addThingAsRThing(parts.first(), dropTarget);
            }
        },
        doubleClick: function doubleClick(event, target) {
            map.createRThing(target);
        },
        contextClick: function contextClick(event, target) {
            if (event.control) {
                console.log(linkInfo(map, target));
            }
        }
    }, mk(go.Shape, new go.Binding('stroke', '', function () {
        return getRLinkSelectionStroke(map);
    }).ofObject(), new go.Binding('strokeWidth', '', map.getLayouts().getLinkStrokeWidth).ofObject(), {
        name: 'LINKSHAPE'
    }),

    // show to/from arrowheads based on link "type" attribute
    mk(go.Shape, {
        fromArrow: 'Backward'
    }, new go.Binding('stroke', '', function () {
        return getRLinkSelectionStroke(map);
    }).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t === 'from' || t === 'toFrom';
    })), mk(go.Shape, {
        toArrow: 'Standard'
    }, new go.Binding('stroke', '', function () {
        return getRLinkSelectionStroke(map);
    }).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), new go.Binding('visible', 'type', function (t) {
        return t === 'to' || t === 'toFrom';
    })), mk(go.Panel, go.Panel.Auto, // link label "knob"
    new go.Binding('opacity', '', function (obj) {
        return showKnob(map, obj) ? 1 : 0;
    }).ofObject(), new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), mk(go.Shape, {
        figure: 'Ellipse',
        fill: colorD,
        stroke: colorD,
        width: 12,
        height: 12
    })));
};

module.exports = linkTemplate;

},{}],58:[function(require,module,exports){
'use strict';

var go = window.go;
var mk = go.GraphObject.make;

var linkInfo = function linkInfo(map, obj) {
    var snpos = map.getLayouts().getSameNodesLinkPosition(obj);
    return '' + 'object: ' + obj + '\n' + 'fromNode: ' + obj.fromNode + '\n' + 'toNode: ' + obj.toNode + '\n' + 'labelNodes: ' + obj.labelNodes.count + '\n' + 'labelNodeIsVisible: ' + map.getLayouts().labelNodeIsVisible(obj) + '\n' + 'fromPortId: ' + obj.fromPortId + '\n' + 'toPortId: ' + obj.toPortId + '\n' + 'category: ' + (obj.data ? obj.data.category : '') + '\n' + 'containingGroup: ' + obj.containingGroup + '\n' + 'fromAndToNodesAreVisible: ' + map.getLayouts().fromAndToNodesAreVisible(obj) + '\n' + 'curve: ' + obj.curve + '\n' + 'curviness: ' + obj.curviness + '\n' + 'fromEndSegmentLength: ' + Math.round(obj.fromEndSegmentLength) + '\n' + 'toEndSegmentLength: ' + Math.round(obj.toEndSegmentLength) + '\n' + 'sameNodesLinkPosition: ' + snpos.index + ' of ' + snpos.count + '\n' +
    //+ 'geometry: ' + obj.geometry + "\n" +
    'getLinkStrokeWidth: ' + map.getLayouts().getLinkStrokeWidth(obj) + '\n';
};

// when a P link should be visible
var showPLink = function showPLink(map, link) {
    var mode = map.getUi().getMapEditorOptions().perspectiveMode;
    if (map.getPerspectives().isPEditorPoint(link.fromNode)) {
        // show P's when this link is from the current Point
        return true;
    } else if (map.getPerspectives().isInPOrDEditorMode()) {
        // don't show P's for non-Point things, even on mouseover
        return false;
    } else {
        return (mode === 'lines' || mode === 'both') && (link.fromNode === map.getUi().mouseOverGroup || map.pIsExpanded(link.fromNode));
    }
};

var pLinkTemplate = function pLinkTemplate(map) {
    return mk(go.Link, new go.Binding('opacity', '', function (obj) {
        return showPLink(map, obj) ? 1 : 0;
    }).ofObject(), {
        selectionAdorned: false,
        layerName: 'Background', // make P links fall behind R links
        routing: go.Link.Normal,
        contextClick: function contextClick(event, target) {
            if (event.control) {
                console.log(linkInfo(map, target));
            }
        }
    }, mk(go.Shape, new go.Binding('strokeWidth', '', map.getLayouts().getLinkStrokeWidth).ofObject(), {
        name: 'LINKSHAPE',
        stroke: colorPLight,
        fill: colorPLight
    }), mk(go.Shape,
    // new go.Binding('visible', '', function(obj) {
    //     return (self.showPDot(obj) ? 1 : 0);
    // }).ofObject(),
    new go.Binding('scale', '', map.getLayouts().getArrowheadScale).ofObject(), {
        toArrow: 'Circle',
        stroke: colorPLight,
        fill: colorPLight
    }));
};

module.exports = pLinkTemplate;

},{}],59:[function(require,module,exports){
'use strict';

var go = window.go;
var mk = go.GraphObject.make;

var nodeInfo = function nodeInfo(obj) {
    return 'object: ' + obj + '\n' + 'key: ' + obj.data.key + '\n' + 'position: ' + parseInt(obj.position.x, 10) + ', ' + parseInt(obj.position.y, 10) + '\n' + 'width/height: ' + parseInt(obj.actualBounds.width, 10) + '/' + parseInt(obj.actualBounds.height, 10) + '\n';
};

var createSlideResizeHandle = function createSlideResizeHandle(alignment) {
    return mk(go.Shape, new go.Binding('desiredSize', '', function (obj) {
        var slide = obj.adornedObject;
        var size = Math.min(slide.width, slide.height) * 0.05;
        return new go.Size(size, size);
    }).ofObject(), {
        alignment: alignment,
        cursor: 'col-resize',
        fill: 'rgba(251,170,54,1)',
        stroke: null
    });
};

var slideTemplate = function slideTemplate(map) {
    return mk(go.Node, go.Panel.Auto,
    // NB: unlike groups, slides just use a normal 2-way location binding
    new go.Binding('location', 'loc', go.Point.parse).makeTwoWay(go.Point.stringify), new go.Binding('width', 'width').makeTwoWay(), new go.Binding('height', 'height').makeTwoWay(), new go.Binding('visible', '', function (obj) {
        return obj.data.hasRegion && map.getUi().currentTabIs(map.getUi().TAB_ID_PRESENTER) && !map.getPresenter().isPresenting && !map.getPresenter().isCreatingThumbnail && map.getPresenter().currentSlideIndex === obj.data.index;
    }).ofObject(), {
        locationSpot: go.Spot.TopLeft,
        selectionAdorned: false,
        resizable: true,
        resizeAdornmentTemplate: mk(go.Adornment, 'Spot', mk(go.Placeholder), // takes size and position of adorned object                   
        createSlideResizeHandle(go.Spot.TopLeft), createSlideResizeHandle(go.Spot.Top), createSlideResizeHandle(go.Spot.TopRight), createSlideResizeHandle(go.Spot.Right), createSlideResizeHandle(go.Spot.BottomRight), createSlideResizeHandle(go.Spot.Bottom), createSlideResizeHandle(go.Spot.BottomLeft), createSlideResizeHandle(go.Spot.Left)),
        padding: 0,
        contextClick: function contextClick(event, target) {
            console.log(nodeInfo(target.part));
        }
    }, mk(go.Shape, 'Rectangle', {
        name: 'slideborder',
        fill: 'rgba(251,170,54,.1)',
        stroke: null
    }));
};

module.exports = slideTemplate;

},{}],60:[function(require,module,exports){
'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Common = (function () {
    function Common() {
        _classCallCheck(this, Common);
    }

    _createClass(Common, null, [{
        key: 'splitLines',
        value: function splitLines(text) {
            return text.split(/\n/);
        }
    }, {
        key: 'getEventTime',
        value: function getEventTime(t, now) {
            var time = moment(t, 'YYYY-MM-DD HH:mm:ss.SSS');
            var nowtime = moment(now, 'YYYY-MM-DD HH:mm:ss.SSS');
            // console.log('t:       ' + t);
            // console.log('now:     ' + now);
            // console.log('time:    ' + time.format()); // + ' ' + time.isValid());
            // console.log('nowtime: ' + nowtime.format()); // + ' ' + nowtime.isValid());
            return time.from(nowtime);
        }
    }, {
        key: 'classIf',
        value: function classIf(klass, b) {
            //console.log('classIf: ' + klass + ', ' + b);
            return b ? klass : '';
        }
    }, {
        key: 'safeApply',

        // avoid '$apply already in progress' error (source: https://coderwall.com/p/ngisma)
        value: function safeApply(fn) {
            if (fn && typeof fn === 'function') {
                fn();
            }
        }
    }, {
        key: 'isTouchDevice',

        // source: http://ctrlq.org/code/19616-detect-touch-screen-javascript
        value: function isTouchDevice() {
            return 'ontouchstart' in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
        }
    }]);

    return Common;
})();

module.exports = Common;

},{}],61:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-actions', '<div class="page-actions"> <div class="btn-group"> <button type="button" class="btn red-haze btn-sm dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <span class="hidden-sm hidden-xs">Actions&nbsp;</span><i class="fa fa-angle-down"></i> </button> <ul class="dropdown-menu" role="menu"> <li class="start active "> <a href="javascript:;"> <i class="fa fa-pencil-square-o"> New Map </i> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-print"> Export/Print </i> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-tag"> Tag Map </i> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-copy"></i> Duplicate Map </a> </li> <li> <a href="javascript:;"> <i class="fa fa-users"></i> Share Map </a> </li> <li class="divider"> </li> <li> <a href="javascript:;"> <i class="fa fa-gear"></i> Settings </a> </li> </ul> </div> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Page Title </span> </div>', function(opts) {
});
},{"riot":"riot"}],62:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-body', '<div class="page-header-fixed page-sidebar-closed-hide-logo page-sidebar-closed-hide-logo"> <page-header></page-header> <div class="clearfix"> </div> <page-container></page-container> <page-footer></page-footer> </div>', function(opts) {
});
},{"riot":"riot"}],63:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-container', '<div class="page-container"> <page-sidebar></page-sidebar> <page-content></page-content> </div>', function(opts) {
});
},{"riot":"riot"}],64:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-content', '<div class="page-content-wrapper"> <div class="page-content"> <div class="page-head"> <div id="app-container"> <div id="diagram" style="position:absolute; background-color: white; height: 100%; width: 80%; "></div> </div> </div> </div> </div>', function(opts) {
});
},{"riot":"riot"}],65:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-footer', '<div class="page-footer"> <div class="page-footer-inner"> 2015 &copy; Cabrera Research Lab </div> <div class="scroll-to-top"> <i class="icon-arrow-up"></i> </div> </div>', function(opts) {
});
},{"riot":"riot"}],66:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-header', '<div id="header-top" class="page-header navbar navbar-fixed-top"> <div id="header-content" class="page-header-inner"> <page-logo></page-logo> <page-actions></page-actions> <div class="page-top"> <page-search></page-search> <page-topmenu></page-topmenu> </div> </div> </div>', function(opts) {
});
},{"riot":"riot"}],67:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-logo', '<div class="page-logo"> <a href="index.html"> <img src="assets/img/metamap_cloud.png" alt="logo" class="logo-default"> </a> <div class="menu-toggler sidebar-toggler">  </div> </div> <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse"> </a>', function(opts) {
});
},{"riot":"riot"}],68:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-search', ' <form class="search-form" action="extra_search.html" method="GET"> <div class="input-group"> <input type="text" class="form-control input-sm" placeholder="Search..." name="query"> <span class="input-group-btn"> <a href="javascript:;" class="btn submit"><i class="fa fa-search"></i></a> </span> </div> </form>', function(opts) {
});
},{"riot":"riot"}],69:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-sidebar', '<div class="page-sidebar-wrapper">   <div class="page-sidebar navbar-collapse collapse">        <ul class="page-sidebar-menu " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200"> <li onclick="{ parent.click }" each="{ data }"> <a if="{ icon }" href="javascript:;"> <i class="{ icon }" riot-style="color:#{ color };"></i> <span class="title">{ title }</span> <span class="{ arrow: menu.length }"></span> </a> <ul if="{ menu.length }" class="sub-menu"> <li each="{ menu }"> <a href="javascript:;"> <i class="{ icon }"></i> <span class="title">{ title }</span> </a> </li> </ul> </li> </ul> </div> </div>', function(opts) {

this.click = function () {
    console.log('foo');
};

var that = this;
that.data = [];
that.MetaMap = MetaMap;
that.MetaMap.MetaFire.getData('menu/sidebar').then(function (data) {
    that.data = data;
    that.update();
});
});
},{"riot":"riot"}],70:[function(require,module,exports){
var riot = require('riot');
module.exports = riot.tag('page-topmenu', '<div class="top-menu"> <ul class="nav navbar-nav pull-right"> <li class="separator hide"></li>  <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_notification_bar"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <i class="fa fa-bell-o"></i> <span class="badge badge-success"> 1 </span> </a> <ul class="dropdown-menu"> <li class="external"> <h3> <span class="bold">1 pending</span> notification </h3> <a href="javascript:;">view all</a> </li> <li> <ul class="dropdown-menu-list scroller" style="height: 250px;" data-handle-color="#637283"> <li> <a href="javascript:;"> <span class="time">just now</span> <span class="details"> <span class="label label-sm label-icon label-success"> <i class="fa fa-plus"></i> </span> New user registered. </span> </a> </li> </ul> </li> </ul> </li> <li class="separator hide"></li>  <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_points_bar"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <i class="fa fa-trophy"></i> <span class="badge badge-success"> 3 </span> </a> <ul class="dropdown-menu"> <li class="external"> <h3> <span class="bold">3 new</span> achievements </h3> <a href="javascript:;">view all</a> </li> <li> <ul class="dropdown-menu-list scroller" style="height: 250px;" data-handle-color="#637283"> <li> <a href="javascript:;"> <span class="time">just now</span> <span class="details"> <span class="label label-sm label-icon label-success"> <i class="fa fa-plus"></i> </span> Created a perspective circle! </span> </a> </li> </ul> </li> </ul> </li>  <li class="separator hide"></li>  <li class="dropdown" id="header_dashboard_bar"> <a class="dropdown-toggle" href="javascript:;"> <i class="fa fa-home"></i> </a> </li> <li class="separator hide"></li>  <li class="dropdown dropdown-extended dropdown-notification dropdown" id="header_help_bar"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <i class="fa fa-graduation-cap"></i> </a> <ul class="dropdown-menu"> <li> <ul class="dropdown-menu-list scroller" style="height: 270px;" data-handle-color="#637283"> <li> <a href="javascript:;"> <i class="fa fa-lightbulb-o"></i> <span class="title">Tutorial</span> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-question"></i> <span class="title">FAQ</span> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-life-ring"></i> <span class="title">Support</span> </a> </li> <li onclick="UserSnap.openReportWindow();"> <a href="javascript:;" > <i class="fa fa-frown-o"></i> <span class="title">Feedback</span> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-bullseye"></i> <span class="title">Inline Training</span> </a> </li> <li> <a href="javascript:;"> <i class="fa fa-laptop"></i> <span class="title">Online Training</span> </a> </li> </ul> </li> </ul> </li> <li class="separator hide"> </li> <li class="dropdown dropdown-user dropdown"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> <span class="username username-hide-on-mobile"> { username } </span> <img alt="" height="39" width="39" class="img-circle" riot-src="{ picture }"> </a> <ul class="dropdown-menu dropdown-menu-default"> <li> <a href="javascript:;"> <i class="fa fa-user"></i> My Profile </a> </li> <li onclick="{ linkAccount }"> <a href="javascript:;"> <i class="fa fa-compress"></i> Link Account </a> </li> <li onclick="{ logout }"> <a href="javascript:;"> <i class="fa fa-sign-out"></i> Log Out </a> </li> </ul> </li> </ul> </div>', function(opts) {
this.username = '';
this.picture = '';

var that = this;
localforage.getItem('profile').then(function (profile) {
    that.username = profile.nickname;
    that.picture = profile.picture || 'assets/admin/layout4/img/avatar.jpg';
    that.update();
});

this.logout = function () {
    MetaMap.Auth0.logout();
};

this.linkAccount = function () {
    MetaMap.Auth0.linkAccount();
};
});
},{"riot":"riot"}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvZW50cnkuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvTWV0YU1hcC5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9hcHAvdXNlci5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9jYW52YXMvYW5hbHl0aWNzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy9hdHRhY2htZW50cy5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9jYW52YXMvYXV0b3NhdmUuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL2VkaXRvci5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9jYW52YXMvZWRpdG9yX29wdGlvbnMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL2ZlZWQuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL2dlbmVyYXRvci5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9jYW52YXMvZ29yZ2VzX2dyaWQuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL2hpc3RvcnkuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL2pvaW5fbmF0aW9uLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy9sYXlvdXRzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy9tYXAuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL21hcHMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL3BlcnNwZWN0aXZlcy5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9jYW52YXMvcHJlc2VudGVyLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy9zaGFyaW5nLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy9zdGFuZGFyZHMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL3RhZ2dpbmcuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL3RhZ2dpbmdfYWRtaW4uanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL3RhZ2dpbmdfY2NzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy90ZW1wbGF0ZXMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL3Rlc3RzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy90b3BfbWFwcy5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9jYW52YXMvdHV0b3JpYWwuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvY2FudmFzL3VpLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NhbnZhcy91c2VyLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NvbnN0YW50cy9lZGl0U3RhdHVzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2NvbnN0YW50cy90YWJzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL2ludGVncmF0aW9ucy9hdXRoMC5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvZmlyZWJhc2UuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvaW50ZWdyYXRpb25zL2dvb2dsZWFuYWx5dGljcy5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvbmV3cmVsaWMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvaW50ZWdyYXRpb25zL3JheWd1bi5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9pbnRlZ3JhdGlvbnMvdXNlcnNuYXAuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbWFwL0FuYWx5dGljcy5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvQXR0YWNobWVudHMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbWFwL0VkaXRvckNvbmZpZy5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvTGF5b3V0cy5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvTWFwLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9QZXJzcGVjdGl2ZXMuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbWFwL1ByZXNlbnRlci5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvVGVtcGxhdGVzLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9VSS5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvYXV0b3NhdmUuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbWFwL2VkaXRvci5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvZ2VuZXJhdG9yLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9sYXlvdXRzL0ZyZWVoYW5kRGlhZ3JhbUxheW91dC5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvbGF5b3V0cy9GcmVlaGFuZExheW91dC5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvbGF5b3V0cy9MZWZ0SW52ZW50b3J5TGF5b3V0LmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9sYXlvdXRzL1JpZ2h0SW52ZW50b3J5TGF5b3V0LmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC9sYXlvdXRzL1N0YWNrZWRMYXlvdXQuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbWFwL3RlbXBsYXRlcy9Hcm91cFRlbXBsYXRlLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL21hcC90ZW1wbGF0ZXMvZExpbmtUZW1wbGF0ZS5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvdGVtcGxhdGVzL2xpbmtUZW1wbGF0ZS5qcyIsIkM6L0dpdGh1Yi9NZXRhTWFwL3NyYy9qcy9tYXAvdGVtcGxhdGVzL3BMaW5rVGVtcGxhdGUuanMiLCJDOi9HaXRodWIvTWV0YU1hcC9zcmMvanMvbWFwL3RlbXBsYXRlcy9zbGlkZVRlbXBsYXRlLmpzIiwiQzovR2l0aHViL01ldGFNYXAvc3JjL2pzL3Rvb2xzL0NvbW1vbi5qcyIsInNyYy90YWdzL3BhZ2UtYWN0aW9ucy50YWciLCJzcmMvdGFncy9wYWdlLWJvZHkudGFnIiwic3JjL3RhZ3MvcGFnZS1jb250YWluZXIudGFnIiwic3JjL3RhZ3MvcGFnZS1jb250ZW50LnRhZyIsInNyYy90YWdzL3BhZ2UtZm9vdGVyLnRhZyIsInNyYy90YWdzL3BhZ2UtaGVhZGVyLnRhZyIsInNyYy90YWdzL3BhZ2UtbG9nby50YWciLCJzcmMvdGFncy9wYWdlLXNlYXJjaC50YWciLCJzcmMvdGFncy9wYWdlLXNpZGViYXIudGFnIiwic3JjL3RhZ3MvcGFnZS10b3BtZW51LnRhZyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDMUIsTUFBTSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDOUIsTUFBTSxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDN0IsTUFBTSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDckMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ25CLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDN0MsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3JCLE9BQU8sQ0FBQyxXQUFXLENBQUMs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QUFFOztBQUU3RixZQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxlQUFlLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQzlFLGVBQU8sQ0FBQyxHQUFHLENBQUMsMENBQTBDLEdBQUcsV0FBVyxDQUFDLENBQUM7OztBQUd0RSxZQUFJLFlBQVksR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDO0FBQ3ZDLFlBQUksU0FBUyxHQUFHLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDckUsWUFBSSxTQUFTLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLFdBQVcsQ0FBQyxDQUFDOzs7QUFHM0csWUFBSSxFQUFFLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQztBQUM3QixlQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLGdCQUFJLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO0FBQ3JCLGdCQUFJLFdBQVcsR0FBRyxLQUFLLENBQUMsWUFBWSxDQUFDO0FBQ3JDLGdCQUFJLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFBLEdBQUksV0FBVyxDQUFDO0FBQ3JFLGdCQUFJLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFBLEdBQUksV0FBVyxDQUFDO0FBQ3JFLGdCQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENB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QyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxFQUFFO0FBQUUsNEJBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7cUJBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFBO2lCQUFFLEFBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFBO2FBQUUsQUFBQyxJQUFJLFVBQVUsSUFBSSxPQUFPLFlBQVksRUFBRSxPQUFPLFlBQVksQ0FBQyxBQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLE9BQU8sQ0FBQyxDQUFBO1NBQUUsQ0FBQSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUFFLDZCQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUEsQUFBQyxDQUFDLEFBQUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxBQUFDLE9BQU8sQ0FBQyxDQUFBO3FCQUFFLEFBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQTtxQkFBRSxBQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUFFLCtCQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUE7cUJBQUUsQUFBQyxTQUFTLENBQUMsR0FBRztBQUFFLCtCQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtxQkFBRSxBQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxBQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQTtpQkFBRSxBQUFDLFNBQVMsQ0FBQyxHQUFHO0FBQUUsMkJBQU8sRUFBRSxDQUFBO2lCQUFFLEFBQUMsSUFBSSxDQUFDLEdBQUcsWUFBWTtvQkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEFBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLEVBQUUsQ0FBQTthQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxpQkFBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUE7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFO0FBQUUs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RyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQSxBQUFDLENBQUE7aUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsVUFBVSxDQUFDLEVBQUU7QUFBRSxxQkFBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxBQUFDLElBQUksSUFBSSxFQUFBLENBQUUsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO2lCQUFFLENBQUMsQ0FBQTthQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFO0FBQUUseUJBQVMsQ0FBQyxHQUFHLEVBQUcsQUFBQyxJQUFJLE1BQU0sQ0FBQyxXQUFXLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRTtBQUFFLHdCQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO3dCQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDO3dCQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsVUFBVSxDQUFDLEVBQUU7QUFBRSw0QkFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsQ0FBQyxZQUFZLEtBQUssS0FBSyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxDQUFDLFlBQVksS0FBSyxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsWUFBWTtBQUFFLDRCQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxlQUFlLEVBQUUsWUFBWTtBQUFFLHlCQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsR0FBRyxRQUFR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LENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLFdBQVcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFBO2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxvQkFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQSxBQUFDO29CQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLHVCQUF1QixFQUFFLDBCQUEwQixFQUFFLDZCQUE2QixFQUFFLHlCQUF5QixDQUFDLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxXQUFXLEVBQUUsVUFBVSxDQUFDLEVBQUU7QUFBRSxxQkFBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUE7aUJBQUUsQ0FBQyxDQUFBO2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx5QkFBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx3QkFBSSxDQUFDLEdBQUcs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QUE7cUJBQUU7aUJBQUUsQUFBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFBRSx3QkFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU07d0JBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQUFBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRTtBQUFFLDRCQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLEFBQUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFO0FBQUUsaUNBQUksQ0FBQyxDQUFDLFFBQVEsR0FBRyxBQUFDLElBQUksSUFBSSxFQUFBLENBQUUsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLFVBQVUsQ0FBQSxFQUFFO0FBQUUsaUNBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxBQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxZQUFZO29DQUFFLENBQUMsR0FBRyxhQUFhLEtBQUssQ0FBQyxJQUFJLE1BQU0sS0FBSyxDQUFDLElBQUksTUFBTSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxZQUFZO29DQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxLQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQSxBQUFDLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQSxFQUFFO0FBQUUsd0NBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLEFBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUE7aUNBQUU7NkJBQUUsTUFBTSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxBQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQTt5QkFBRTtxQkFBRTtpQkFBRSxBQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx3QkFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxBQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLFFBQVEsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFBO2lCQUFFLEFBQUMsSUFBSSxNQUFNLENBQUMsY0FBYyxJQUFJLGNBQWMsQ0FBQyxTQUFTLElBQUksY0FBYyxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxFQUFFO0FBQUUscUJBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEFBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQzt3QkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQzt3QkFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxTQUFTLENBQUM7d0JBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNO3dCQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLFlBQVk7QUFBRSw0QkFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxVQUFVLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsY0FBYyxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHVDQUFlLElBQUksS0FBSyxJQUFJLE1BQU0sSUFBSSxLQUFLLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxDQUFDLGdCQUFnQixDQUFDLGVBQWUsRUFBRSxLQUFLLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFBO3FCQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLGdCQUFnQixFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTzs0QkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzs0QkFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEFBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQUUsZ0NBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQSxBQUFDLENBQUE7eUJBQUUsQUFBQyxJQUFJLENBQUMsU0FBUyxHQUFHLEFBQUMsSUFBSSxJQUFJLEVBQUEsQ0FBRSxPQUFPLEVBQUUsRUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLFVBQVUsQ0FBQyxFQUFFO0FBQUUsZ0NBQUk7QUFBRSx1Q0FBTyxLQUFLLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUEsQUFBQyxFQUFFLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsUUFBUSxLQUFLLENBQUMsQ0FBQyxZQUFZLElBQUksVUFBVSxJQUFJLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQSxBQUFDLENBQUEsSUFBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBOzZCQUFFLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFBRSxvQ0FBSTtBQUFFLHFDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtpQ0FBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUc7NkJBQUU7eUJBQUUsQ0FBQyxBQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSw0QkFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksSUFBSSxVQUFVLElBQUksT0FBTyxDQUFDLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsNEJBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUEsQUFBQyxDQUFBO3FCQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLGtCQUFrQixFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFBLEFBQUMsQ0FBQTtxQkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxzQkFBc0IsRUFBRSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx5QkFBQyxZQUFZLGNBQWMsSUFBSSxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMseUJBQXlCLEVBQUUsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQUMsWUFBWSxjQUFjLElBQUksTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO3FCQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQUMsWUFBWSxjQUFjLEtBQUssUUFBUSxLQUFLLENBQUMsS0FBSyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFBLEFBQUMsRUFBRSxDQUFDLE1BQU0sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQSxBQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQSxLQUFNLElBQUksQ0FBQyxVQUFVLEdBQUcsQUFBQyxJQUFJLElBQUksRUFBQSxDQUFFLE9BQU8sRUFBRSxDQUFBLEFBQUMsQ0FBQSxBQUFDLENBQUE7cUJBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLDRCQUFJLENBQUMsVUFBVSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQUFBQyxJQUFJLElBQUksRUFBQSxDQUFFLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtxQkFBRSxDQUFDLENBQUE7aUJBQUU7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsaUJBQUMsQ0FBQyxPQUFPLEdBQUcsVUFBVSxDQUFDLEVBQUU7QUFBRSx3QkFBSSxDQUFDLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUM7d0JBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxRQUFRO3dCQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQUFBQyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQUFBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxBQUFDLFFBQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsSUFBSSxHQUFHLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQSxBQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsUUFBUSxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsUUFBUSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFBLEFBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUMsUUFBUSxLQUFLLFFBQVEsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxRQUFRLEtBQUssQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUEsQ0FBQTtpQkFBRSxDQUFBO2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxpQkFBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUE7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHdCQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQUFBQyxJQUFJLE1BQU0sQ0FBQyxjQUFjLElBQUksTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJO0FBQUUsZ0NBQU8sTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUEsQ0FBQTtxQkFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUcsQUFBQyxRQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFBLENBQUE7aUJBQUUsQUFBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxBQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFBO2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx5QkFBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSwyQkFBTyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUEsQUFBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFDLENBQUE7aUJBQUUsQUFBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFO29CQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQUFBQyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTthQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxpQkFBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUE7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFBRSx3QkFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUMsQUFBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLFFBQVEsS0FBSyxDQUFDLElBQUksVUFBVSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssTUFBTSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxZQUFZO0FBQUUsK0JBQU8sQ0FBQyxFQUFFLENBQUE7cUJBQUUsQ0FBQyxDQUFBO2lCQUFFLEFBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztvQkFBRSxDQUFDLEdBQUcsT0FBTztvQkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEFBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUE7YUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsaUJBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFBO2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxpQkFBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUE7YUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFTLENBQUMsR0FBRztBQUFFLHdCQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQUFBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsVUFBVSxJQUFJLENBQUMsQ0FBQyxhQUFhLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUU7QUFBRSx5QkFBQyxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSw2QkFBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBLEFBQUMsQ0FBQTt5QkFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssR0FBRyxPQUFPLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsVUFBVSxHQUFHLFVBQVUsR0FBRyxTQUFTLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQUFBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEFBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUE7cUJBQUU7aUJBQUUsQUFBQyxTQUFTLENBQUMsR0FBRztBQUFFLDhCQUFVLEtBQUssQ0FBQyxDQUFDLFVBQVUsSUFBSSxDQUFDLEVBQUUsQ0FBQTtpQkFBRSxBQUFDLFNBQVMsQ0FBQyxHQUFHO0FBQUUscUJBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO2lCQUFFLEFBQUMsU0FBUyxDQUFDLEdBQUc7QUFBRSwyQkFBTyxBQUFDLElBQUksSUFBSSxFQUFBLENBQUUsT0FBTyxFQUFFLENBQUE7aUJBQUUsQUFBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDO29CQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUFFLENBQUMsR0FBRyxNQUFNO29CQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUTtvQkFBRSxDQUFDLEdBQUcsa0JBQWtCO29CQUFFLENBQUMsR0FBRyxhQUFhO29CQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxRQUFRLENBQUEsQ0FBRSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUFFLENBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxXQUFXLEVBQUUsaUJBQWlCLEVBQUUsS0FBSyxFQUFFLHFDQUFxQyxFQUFFO29CQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxHQUFHLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDLEFBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBLElBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLG9CQUFvQixFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUEsQUFBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx3QkFBSSxDQUFDLEdBQUcsRUFBRTt3QkFBRSxDQUFDLEdBQUcsRUFBRTt3QkFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEFBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUEsQUFBQyxDQUFDLEFBQUMsT0FBTyxDQUFDLENBQUE7aUJBQUUsQUFBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxBQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFBO2FBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSx5QkFBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxxQkFBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUEsQUFBQyxFQUFFLFdBQVcsSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFBLEFBQUMsQ0FBQyxBQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEFBQUMsT0FBTyxDQUFDLENBQUE7aUJBQUUsQUFBQyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQTthQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUseUJBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUFFLDJCQUFPLEVBQUUsQ0FBQyxJQUFJLFVBQVUsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLEFBQUMsQ0FBQTtpQkFBRSxBQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7b0JBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQUUsQ0FBQyxHQUFHLFlBQVk7b0JBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLEFBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxVQUFVLENBQUMsRUFBRTtBQUFFLDZCQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSxpQ0FBUyxTQUFTLEdBQUc7QUFBRSxnQ0FBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQUFBQyxJQUFJO0FBQUUsaUNBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBOzZCQUFFLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFBRSxpQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTs2QkFBRSxBQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxBQUFDLElBQUk7QUFBRSx1Q0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7NkJBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUFFLHVDQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUEsQ0FBQTs2QkFBRSxTQUFTO0FBQUUsaUNBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTs2QkFBRTt5QkFBRSxBQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLEVBQUUsU0FBUyxDQUFBLEFBQUMsQ0FBQTtxQkFBRSxBQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUFFLHlCQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQSxBQUFDLENBQUMsQUFBQyxJQUFJLENBQUM7NEJBQUUsQ0FBQzs0QkFBRSxDQUFDOzRCQUFFLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBLEFBQUMsQ0FBQTtxQkFBRSxBQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQUUsNEJBQUk7QUFBRSw2QkFBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO3lCQUFFLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFBRSw2QkFBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTt5QkFBRTtxQkFBRSxBQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFBRSw0QkFBSSxNQUFNLENBQUMsY0FBYyxJQUFJLE1BQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSTtBQUFFLGdDQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUMsUUFBTyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFO0FBQUUsc0NBQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxlQUFZO0FBQUUsK0NBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO3FDQUFFLEVBQUUsR0FBRyxFQUFFLGFBQVUsQ0FBQyxFQUFFO0FBQUUsZ0RBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFD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dEIsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxNQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDcEUsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxNQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDcEUsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDdEUsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDdEUsc0JBQUssSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDakUsc0JBQUssSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDakUsc0JBQUssSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDakUsc0JBQUssSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDakUsc0JBQUssSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsZUFBZSxDQUFDLENBQUM7YUFDcEU7O0FBRUQsc0JBQVUsRUFBRSxvQkFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFLOztBQUNsQixvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLE1BQUssWUFBWSxFQUFFLENBQUMsQ0FBQztBQUNwRSxvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNwRCxvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNwRCxvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNwRCxvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLE1BQUssWUFBWSxFQUFFLENBQUMsQ0FBQztBQUNwRSxzQkFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQzthQUN6Qzs7QUFFRCxxQkFBUyxFQUFFLG1CQUFDLENBQUMsRUFBRSxDQUFDLEVBQUs7O0FBQ2pCLG9CQUFJLEtBQUssR0FBRyxNQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0FBQzNELG9CQUFJLE1BQU0sR0FBRyxNQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLE1BQUssWUFBWSxFQUFFLENBQUMsQ0FBQztBQUMxRSxvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxNQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7QUFDMUUsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDOUUsc0JBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7YUFDeEM7O0FBRUQsMkJBQWUsRUFBRyx5QkFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFLOztBQUN4QixvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQzVELG9CQUFJLE1BQU0sR0FBRyxNQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDN0Qsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDbEUsb0JBQUksSUFBSSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsTUFBSyxZQUFZLEVBQUUsQ0FBQyxDQUFDO0FBQ3hFLHNCQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3BDLHNCQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3BDLHNCQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO2FBQ3ZDOztBQUVELGtDQUFzQixFQUFFLGdDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUs7O0FBQzlCLG9CQUFJLE1BQU0sR0FBRyxNQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDN0Qsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDbkUsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDbkUsb0JBQUksS0FBSyxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsTUFBSyxZQUFZLEVBQUUsQ0FBQyxDQUFDO0FBQ3hFLG9CQUFJLE1BQU0sR0FBRyxNQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLDJCQUEyQixDQUFDLENBQUM7QUFDdkUsb0JBQUksTUFBTSxHQUFHLE1BQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsMkJBQTJCLENBQUMsQ0FBQztBQUN2RSxvQkFBSSxNQUFNLEdBQUcsTUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSwyQkFBMkIsQ0FBQyxDQUFDO0FBQ3ZFLHNCQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3RDLHNCQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3RDLHNCQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3RDLHNCQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO2FBQ3pDOztBQUVELHNCQUFVLEVBQUUsb0JBQUMsQ0FBQyxFQUFFLENBQUMsRUFBSzs7QUFDbEIsc0JBQUssT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDM0Isc0JBQUssT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2xDLHNCQUFLLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2hELHNCQUFLLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQzthQUN6QztTQUNKLENBQUM7S0FDTDs7aUJBMU1DLFNBQVM7O2VBNE1DLHdCQUFHO0FBQ1gsbUJBQU8sSUFBSSxDQUFDLFFBQVEsSUFBSSxLQUFLLENBQUM7U0FDakM7OztlQUVXLHdCQUFHO0FBQ1gsbUJBQU8sSUFBSSxDQUFDLFFBQVEsSUFBSSxLQUFLLENBQUM7U0FDakM7OztlQUVXLHdCQUFHO0FBQ1gsZ0JBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7QUFDeEIsZ0JBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztBQUM5QixnQkFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUM7U0FDdkI7OztlQUVJLGVBQUMsUUFBUSxFQUFFOztBQUVaLGdCQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQzs7QUFFbkQsZ0JBQUksTUFBTSxDQUFDLE9BQU8sRUFBRTtBQUNoQixvQkFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQzthQUN6Qjs7O0FBR0QsZ0JBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztBQUN0QyxnQkFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQztBQUM5QixnQkFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNiLGdCQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDdEIsaUJBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ2I7Ozs7QUFJRCxvQkFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNmLGdCQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxDQUFDOztBQUUvQixnQkFBSSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO0FBQ3hDLGdCQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFbEMsZ0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7O0FBRTlCLGdCQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztBQUNsRCxnQkFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztTQUNsRDs7O2VBRWEsd0JBQUMsUUFBUSxFQUFFO0FBQ3JCLGdCQUFJLENBQUMsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDO0FBQ2pDLGdCQUFJLE1BQU0sQ0FBQyxPQUFPLEVBQUU7QUFDaEIsb0JBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDeEI7U0FDSjs7O2VBRVMsc0JBQUc7QUFDVCxnQkFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDaEMsZ0JBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDckMsZ0JBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDckMsZ0JBQUksQ0FBQyxnQkFBZ0IsR0FBRyxRQUFRLENBQUM7QUFDakMsZ0JBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRXJCLGFBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ3hEOzs7OztlQUdnQiwyQkFBQyxRQUFRLEVBQUUsUUFBUSxFQUFFO0FBQ2xDLGdCQUFJLFFBQVEsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLGdCQUFnQixFQUFFOztBQUNqRCxvQkFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUN0QyxNQUNJLElBQUksUUFBUSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsZ0JBQWdCLEVBQUU7O0FBQ3RELG9CQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ3JDO1NBQ0o7Ozs7O2VBR3NCLG1DQUFHO0FBQ3RCLG1CQUFPLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLGVBQWUsRUFBRSxPQUFPLEVBQ2pFLDJCQUEyQixFQUFFLFdBQVcsRUFBRSxhQUFhLEVBQUUsZUFBZSxDQUFDLENBQUM7U0FDckY7OztXQXZSQyxTQUFTOzs7QUEwUmYsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUM7Ozs7Ozs7Ozs7Ozs7QUMzUjNCLElBQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUM7QUFDckIsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDOztJQUVuQyxxQkFBcUI7QUFDWixhQURULHFCQUFxQixHQUNGOzBDQUFOLElBQUk7QUFBSixnQkFBSTs7OzhCQURqQixxQkFBcUI7O0FBRW5CLG1DQUZGLHFCQUFxQiw4Q0FFVixJQUFJLEVBQUU7S0FDbEI7O2NBSEMscUJBQXFCOztpQkFBckIscUJBQXFCOztlQUtmLG9CQUFHO0FBQ1AsbUJBQU8sdUJBQXVCLENBQUM7U0FDbEM7OztlQUVPLGtCQUFDLElBQUksRUFBRTs7QUFFWCxnQkFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQzs7OztBQUlyQyxnQkFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixFQUFFLENBQUM7QUFDMUMsbUJBQU8sTUFBTSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2xCLG9CQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQ3pCLG9CQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRTtBQUNwQix3QkFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN6Qyx5QkFBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7aUJBRTFDO2FBQ0o7OztBQUdELGdCQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzNCLGdCQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQztBQUNuQyxtQkFBTyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDakIsb0JBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7Ozs7OztBQU12QixvQkFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDO2FBQy9COzs7QUFBQSxTQUdKOzs7V0F2Q0MscUJBQXFCO0dBQVMsT0FBTzs7QUEwQzNDLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLHFCQUFxQixFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFckQsTUFBTSxDQUFDLE9BQU8sR0FBRyxxQkFBcUIsQ0FBQzs7Ozs7Ozs7Ozs7OztBQy9DdEMsSUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztBQUN0QixJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7O0lBRTlCLGNBQWM7QUFDTCxhQURULGNBQWMsR0FDSzswQ0FBTixJQUFJO0FBQUosZ0JBQUk7Ozs4QkFEakIsY0FBYzs7QUFFWixtQ0FGRixjQUFjLDhDQUVILElBQUksRUFBRTtLQUNsQjs7Y0FIQyxjQUFjOztpQkFBZCxjQUFjOztlQUtSLG9CQUFHO0FBQ1AsbUJBQU8sZ0JBQWdCLENBQUM7U0FDM0I7OztlQUVPLGtCQUFDLElBQUksRUFBRTtBQUNYLGdCQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQ3JDLG1CQUFPLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLENBQUMsQ0FBQzs7QUFFNUMsZ0JBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUM5QixnQkFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDOztBQUU5QixnQkFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDO0FBQ3pDLG1CQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNkLG9CQUFJLElBQUksR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO0FBQ3BCLG9CQUFJLElBQUksWUFBWSxFQUFFLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRTtBQUMvQyx3QkFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFeEMsd0JBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM5Qyx3QkFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQzlCO2FBQ0o7O0FBRUQsbUJBQU8sQ0FBQyxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1NBQ2hEOzs7V0E1QkMsY0FBYztHQUFTLE9BQU87O0FBK0JwQyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUU5QyxNQUFNLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQzs7Ozs7Ozs7Ozs7OztBQ3BDaEMsSUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztBQUNyQixJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7O0lBRW5DLG1CQUFtQjtBQUNWLGFBRFQsbUJBQW1CLEdBQ0E7MENBQU4sSUFBSTtBQUFKLGdCQUFJOzs7OEJBRGpCLG1CQUFtQjs7QUFFakIsbUNBRkYsbUJBQW1CLDhDQUVSLElBQUksRUFBRTtLQUNsQjs7Y0FIQyxtQkFBbUI7O2lCQUFuQixtQkFBbUI7O2VBS2Isb0JBQUc7QUFDUCxtQkFBTyxxQkFBcUIsQ0FBQztTQUNoQzs7O2VBRU8sa0JBQUMsSUFBSSxFQUFFOzs7QUFHWCxnQkFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQ25DLGdCQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBLEFBQUMsQ0FBQztBQUNqSCxnQkFBSSxDQUFDLHlCQUF5QixDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQzs7U0FFbkU7OztXQWhCQyxtQkFBbUI7R0FBUyxPQUFPOztBQW1CekMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsbUJBQW1CLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUVuRCxNQUFNLENBQUMsT0FBTyxHQUFHLG1CQUFtQixDQUFDOzs7Ozs7Ozs7Ozs7O0FDeEJyQyxJQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsRUFBRSxDQUFDO0FBQ3JCLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQzs7SUFFbkMsb0JBQW9CO0FBQ1gsYUFEVCxvQkFBb0IsR0FDRDswQ0FBTixJQUFJO0FBQUosZ0JBQUk7Ozs4QkFEakIsb0JBQW9COztBQUVsQixtQ0FGRixvQkFBb0IsOENBRVQsSUFBSSxFQUFFO0tBQ2xCOztjQUhDLG9CQUFvQjs7aUJBQXBCLG9CQUFvQjs7ZUFLZCxvQkFBRztBQUNQLG1CQUFPLHNCQUFzQixDQUFDO1NBQ2pDOzs7ZUFFTyxrQkFBQyxJQUFJLEVBQUU7O0FBRVgsZ0JBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUM7QUFDbkUsZ0JBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUEsQUFBQyxDQUFDO0FBQ2pILGdCQUFJLENBQUMseUJBQXlCLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDOztTQUVuRTs7O1dBZkMsb0JBQW9CO0dBQVMsT0FBTzs7QUFrQjFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLG9CQUFvQixFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFcEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxvQkFBb0IsQ0FBQzs7Ozs7Ozs7Ozs7OztBQ3ZCdEMsSUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztBQUNyQixJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7O0lBRW5DLGFBQWE7QUFDSixhQURULGFBQWEsR0FDTTswQ0FBTixJQUFJO0FBQUosZ0JBQUk7Ozs4QkFEakIsYUFBYTs7QUFFWCxtQ0FGRixhQUFhLDhDQUVGLElBQUksRUFBRTtLQUNsQjs7Y0FIQyxhQUFhOztpQkFBYixhQUFhOztlQUtQLG9CQUFHO0FBQ1AsbUJBQU8sZUFBZSxDQUFDO1NBQzFCOzs7ZUFFTyxrQkFBQyxJQUFJLEVBQUU7QUFDWCxnQkFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ2hELGdCQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUM3QyxnQkFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQ25DLGdCQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxNQUFNLEdBQUcsQ0FBQyxDQUFBLEFBQUMsQ0FBQztBQUN4RixnQkFBSSxDQUFDLHVCQUF1QixDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3pELGdCQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLENBQUM7U0FDcEQ7OztXQWhCQyxhQUFhO0dBQVMsT0FBTzs7QUFvQm5DLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRTdDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsYUFBYSxDQUFDOzs7Ozs7Ozs7QUN6Qi9CLElBQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUM7QUFDckIsSUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUM7O0FBRS9CLElBQU0sY0FBYyxHQUFHLFNBQVMsQ0FBQztBQUNqQyxJQUFNLFdBQVcsR0FBRyxTQUFTLENBQUM7QUFDOUIsSUFBTSxVQUFVLEdBQUcsU0FBUyxDQUFDOzs7QUFHN0IsSUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDO0FBQ3pCLElBQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQztBQUN6QixJQUFNLE1BQU0sR0FBRyxTQUFTLENBQUM7O0FBRXpCLElBQU0sVUFBVSxHQUFHLHEyQkFBcTJCLENBQUM7QUFDejNCLElBQU0saUJBQWlCLEdBQUcsdXRDQUF1dEMsQ0FBQztBQUNsdkMsSUFBTSxnQkFBZ0IsR0FBRyw2M0JBQTYzQixDQUFDOztJQUVqNUIsYUFBYTtBQUNKLGFBRFQsYUFBYSxDQUNILEdBQUcsRUFBRTs4QkFEZixhQUFhOztBQUVYLFlBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDO0tBQ25COztpQkFIQyxhQUFhOztlQUtYLGdCQUFHOzs7QUFDSCxtQkFBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFDakMsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsVUFBQyxVQUFVLEVBQUs7QUFDL0MsdUJBQU8sTUFBSyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO2FBQ3ZELENBQUMsRUFDRixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFDLEdBQUcsRUFBSztBQUNuQyx1QkFBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUM7YUFDM0IsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUNiLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsRUFBRSxXQUFXLENBQUM7O0FBRWpELGdCQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFDLEdBQUcsRUFBSztBQUNuQyx1QkFBUSxHQUFHLENBQUMsVUFBVSxJQUFJLE1BQUssSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLGVBQWUsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFFO2FBQzNFLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUNYLGtDQUFrQixFQUFFLFdBQVc7QUFDL0IsNEJBQVksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU87QUFDN0IsZ0NBQWdCLEVBQUUsS0FBSztBQUN2QixrQ0FBa0IsRUFBRSxJQUFJO0FBQ3hCLHlCQUFTLEVBQUUsWUFBWTs7QUFFdkIsMEJBQVUsRUFBRSxvQkFBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBSztBQUNqQywwQkFBSyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsY0FBYyxHQUFHLE1BQU0sQ0FBQztBQUMxQywwQkFBSyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztpQkFDcEQ7O0FBRUQsMEJBQVUsRUFBRSxvQkFBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBSztBQUNqQywwQkFBSyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztBQUN4QywwQkFBSyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztpQkFDcEQ7Ozs7O0FBQUEsYUFLSixFQUNELEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUM1QixJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxPQUFPLENBQUMsRUFDOUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUU7QUFDeEIsb0JBQUksRUFBRSxXQUFXO2FBQ3BCLEVBQ0QsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRLEVBQUU7O0FBRXZFLGNBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRTtBQUN0QixvQkFBSSxFQUFFLFVBQVU7QUFDaEIsd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM1QixxQkFBSyxFQUFFLEdBQUc7QUFDVixzQkFBTSxFQUFFLEdBQUc7QUFDWCxvQkFBSSxFQUFFLGNBQWM7QUFDcEIsc0JBQU0sRUFBRSxJQUFJO0FBQ1osc0JBQU0sRUFBRSxNQUFNOztBQUVkLDRCQUFZLEVBQUUsc0JBQUMsS0FBSyxFQUFFLE1BQU0sRUFBSztBQUM3Qix3QkFBSSxLQUFLLENBQUMsT0FBTyxFQUFFO0FBQ2YsK0JBQU8sQ0FBQyxHQUFHLENBQUMsTUFBSyxTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7cUJBQzVDO2lCQUNKO2FBQ0osQ0FBQyxFQUNGLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUMxQixJQUFJLENBQUMsVUFBVSxFQUFFLEVBQ2pCLElBQUksQ0FBQyxlQUFlLEVBQUUsRUFDdEIsSUFBSSxDQUFDLGNBQWMsRUFBRSxFQUNyQixJQUFJLENBQUMsZUFBZSxFQUFFLEVBQ3RCLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxFQUM3QixJQUFJLENBQUMsT0FBTyxFQUFFLEVBQ2QsSUFBSSxDQUFDLFdBQVcsRUFBRSxFQUNsQixJQUFJLENBQUMsT0FBTyxFQUFFLEVBQ2QsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQ3ZCLElBQUksQ0FBQyxPQUFPLEVBQUUsRUFDZCxJQUFJLENBQUMsV0FBVyxFQUFFLEVBQ2xCLElBQUksQ0FBQyxPQUFPLEVBQUUsRUFDZCxJQUFJLENBQUMsbUJBQW1CLEVBQUUsRUFDMUIsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUNwQixDQUNKLEVBQ0QsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsa0JBQWtCLEVBQUUsTUFBTSxDQUFDLENBQ2pGOzs7QUFHRCxjQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRTtBQUNULG9CQUFJLEVBQUUsYUFBYTtBQUNuQixvQkFBSSxFQUFFLGFBQWE7QUFDbkIsc0JBQU0sRUFBRSxJQUFJO0FBQ1osMkJBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQzthQUNqQyxDQUFDLENBQ0wsQ0FBQztTQUNMOzs7ZUFFUSxtQkFBQyxHQUFHLEVBQUU7QUFDWCxtQkFBTyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLEdBQ3ZCLFVBQVUsR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUN2QixPQUFPLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxHQUM3QixtQkFBbUIsR0FBRyxHQUFHLENBQUMsZUFBZSxHQUFHLElBQUksR0FDaEQsVUFBVSxHQUFHLEdBQUcsQ0FBQyxNQUFNLEdBQUcsSUFBSSxHQUM5QixlQUFlLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxHQUN4QyxZQUFZLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLElBQUksR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxHQUN4RixnQ0FBZ0MsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FDdEUsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxHQUM1RyxjQUFjLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxHQUM1RCxlQUFlLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxHQUM3QyxlQUFlLEdBQUcsR0FBRyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7U0FDaEQ7Ozs7O2VBR1Msc0JBQUc7OztBQUNULG1CQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFDeEIsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUUsVUFBQyxHQUFHLEVBQUs7QUFDbkMsdUJBQU8sSUFBSSxDQUFDO2FBQ2YsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUNiLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLFVBQUMsR0FBRyxFQUFLO0FBQ2hDLHVCQUFPLE9BQUssaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDdEMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM1QixzQkFBTSxFQUFFLEVBQUU7QUFDVixxQkFBSyxFQUFFLEdBQUc7QUFDVixzQkFBTSxFQUFFLElBQUk7YUFDZixDQUNKLENBQUM7U0FDTDs7O2VBRWdCLDJCQUFDLEdBQUcsRUFBRTtBQUNuQixnQkFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFdkUsZ0JBQUksTUFBTSxLQUFLLENBQUMsRUFBRTtBQUNkLHVCQUFPLFVBQVUsQ0FBQzthQUNyQixNQUFNLElBQUksTUFBTSxLQUFLLENBQUMsRUFBRTtBQUNyQix1QkFBTyxNQUFNLENBQUM7YUFDakIsTUFBTSxJQUFJLE1BQU0sS0FBSyxDQUFDLEVBQUU7QUFDckIsdUJBQU8sV0FBVyxDQUFDO2FBQ3RCLE1BQU07QUFDSCx1QkFBTyxhQUFhLENBQUM7YUFDeEI7U0FDSjs7Ozs7ZUFHYywyQkFBRzs7O0FBQ2QsbUJBQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUU7QUFDbkMsd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM1QixzQkFBTSxFQUFFLEVBQUU7QUFDVixxQkFBSyxFQUFFLEdBQUc7QUFDViw4QkFBYyxFQUFFLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztBQUNsRSw4QkFBYyxFQUFFLElBQUksQ0FBQywwQkFBMEI7QUFDL0MseUJBQVMsRUFBRSxJQUFJLENBQUMsd0JBQXdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDeEQscUJBQUssRUFBRSxJQUFJLENBQUMsaUJBQWlCO2FBQ2hDOztBQUVHLGNBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRTtBQUN0Qix3QkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLHNCQUFNLEVBQUUsRUFBRTtBQUNWLHFCQUFLLEVBQUUsR0FBRztBQUNWLHNCQUFNLEVBQUUsU0FBUztBQUNqQixzQkFBTSxFQUFFLElBQUk7QUFDWixvQkFBSSxFQUFFLGFBQWE7YUFDdEIsQ0FBQzs7QUFFRixjQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQ2pCLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLFVBQUMsR0FBRyxFQUFLO0FBQ25DLHVCQUFPLE9BQUssdUNBQXVDLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxPQUFLLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7YUFDeEYsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM1QixzQkFBTSxFQUFFLEVBQUU7QUFDVixxQkFBSyxFQUFFLEdBQUc7QUFDVixzQkFBTSxFQUFFLElBQUk7QUFDWixvQkFBSSxFQUFFLE1BQU07YUFDZixDQUNKLENBQ0osQ0FBQztTQUNMOzs7ZUFFYSwwQkFBRztBQUNiLG1CQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFO0FBQ25DLHdCQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDN0Isc0JBQU0sRUFBRSxFQUFFO0FBQ1YscUJBQUssRUFBRSxHQUFHO0FBQ1YsOEJBQWMsRUFBRSxJQUFJLENBQUMsNkJBQTZCLENBQUMsSUFBSSxDQUFDO0FBQ3hELDhCQUFjLEVBQUUsSUFBSSxDQUFDLDBCQUEwQjtBQUMvQyx5QkFBUyxFQUFFLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLENBQUM7QUFDOUMscUJBQUssRUFBRSxJQUFJLENBQUMsaUJBQWlCO2FBQ2hDLEVBQ0csRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFO0FBQ3RCLHdCQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDNUIsc0JBQU0sRUFBRSxFQUFFO0FBQ1YscUJBQUssRUFBRSxHQUFHO0FBQ1Ysc0JBQU0sRUFBRSxTQUFTO0FBQ2pCLHNCQUFNLEVBQUUsSUFBSTtBQUNaLG9CQUFJLEVBQUUsYUFBYTthQUN0QixDQUFDLENBQ0wsQ0FBQztTQUNMOzs7ZUFFYywyQkFBRzs7O0FBQ2QsbUJBQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUU7QUFDbkMsd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUM3QixzQkFBTSxFQUFFLEVBQUU7QUFDVixxQkFBSyxFQUFFLEdBQUc7QUFDViw4QkFBYyxFQUFFLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztBQUNuRSw4QkFBYyxFQUFFLElBQUksQ0FBQywwQkFBMEI7QUFDL0MseUJBQVMsRUFBRSxJQUFJLENBQUMsd0JBQXdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDekQscUJBQUssRUFBRSxJQUFJLENBQUMsaUJBQWlCO2FBQ2hDOztBQUVHLGNBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRTtBQUN0Qix3QkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLHNCQUFNLEVBQUUsRUFBRTtBQUNWLHFCQUFLLEVBQUUsR0FBRztBQUNWLHNCQUFNLEVBQUUsU0FBUztBQUNqQixzQkFBTSxFQUFFLElBQUk7QUFDWixvQkFBSSxFQUFFLGFBQWE7YUFDdEIsQ0FBQzs7QUFFRixjQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQ2pCLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLFVBQUMsR0FBRyxFQUFLO0FBQ25DLHVCQUFPLE9BQUssdUNBQXVDLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxPQUFLLElBQUksQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7YUFDekYsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUM3QixzQkFBTSxFQUFFLEVBQUU7QUFDVixxQkFBSyxFQUFFLEdBQUc7QUFDVixzQkFBTSxFQUFFLElBQUk7QUFDWixvQkFBSSxFQUFFLE1BQU07YUFDZixDQUNKLENBQ0osQ0FBQztTQUNMOzs7OztlQUdxQixrQ0FBRzs7O0FBQ3JCLG1CQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFO0FBQ3JDLHdCQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDNUIsMkJBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQzthQUNyQyxFQUNHLEVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUNYLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsVUFBVSxFQUFFLEVBQzNDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLFVBQUMsS0FBSyxFQUFLOztBQUVyQyx1QkFBTyxPQUFLLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQywwQkFBMEIsQ0FBQyxLQUFLLENBQUMsSUFDM0QsT0FBSyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsNkJBQTZCLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDbkUsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gscUJBQUssRUFBRSxFQUFFO0FBQ1Qsc0JBQU0sRUFBRSxFQUFFO0FBQ1YseUJBQVMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU07QUFDekIseUJBQVMsRUFBRSxRQUFRO0FBQ25CLHNCQUFNLEVBQUUsTUFBTTtBQUNkLG9CQUFJLEVBQUUsaUJBQWlCO0FBQ3ZCLDJCQUFXLEVBQUUsSUFBSTtBQUNqQixvQkFBSSxFQUFFLEVBQUUsQ0FBQyxTQUFTLENBQUMsZUFBZTs7QUFFbEMsOEJBQWMsRUFBRSxJQUFJLENBQUMsNkJBQTZCLENBQUMsSUFBSSxDQUFDO0FBQ3hELDhCQUFjLEVBQUUsSUFBSSxDQUFDLDBCQUEwQjtBQUMvQyx5QkFBUyxFQUFFLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLENBQUM7QUFDOUMscUJBQUssRUFBRSxJQUFJLENBQUMsaUJBQWlCO0FBQzdCLDRCQUFZLEVBQUUsc0JBQUMsS0FBSyxFQUFFLE1BQU0sRUFBSztBQUM3Qix3QkFBSSxLQUFLLENBQUMsT0FBTyxFQUFFO0FBQ2YsK0JBQU8sQ0FBQyxHQUFHLENBQUMsT0FBSyxTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7cUJBQzVDO2lCQUNKO2FBQ0osQ0FDSixDQUNKLENBQUM7U0FDTDs7Ozs7OztlQUtxQixnQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFO0FBQ3pDLG1CQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUNsQixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUMzQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFDbkQsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ2pGLG9CQUFJLEVBQUUsZUFBZSxHQUFHLFNBQVM7QUFDakMseUJBQVMsRUFBRSxTQUFTO0FBQ3BCLHNCQUFNLEVBQUUsQ0FBQztBQUNULG9CQUFJLEVBQUUsaUJBQWlCO0FBQ3ZCLDJCQUFXLEVBQUUsSUFBSTtBQUNqQixxQkFBSyxFQUFFLElBQUksQ0FBQyxpQkFBaUI7YUFDaEMsQ0FDSixDQUFDO1NBQ0w7Ozs7Ozs7ZUFLNEIsdUNBQUMsUUFBUSxFQUFFOzs7QUFDcEMsbUJBQU8sVUFBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBSzs7QUFFNUIsdUJBQUssSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLGVBQWUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQ2hELHVCQUFLLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxrQkFBa0IsR0FBRyxRQUFRLENBQUM7QUFDaEQsdUJBQUssSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLHVCQUF1QixFQUFFLENBQUM7YUFDcEQsQ0FBQztTQUNMOzs7ZUFFeUIsb0NBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7QUFDNUMsZ0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztBQUN6QyxnQkFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7QUFDNUMsZ0JBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztTQUNwRDs7O2VBRXVCLGtDQUFDLFFBQVEsRUFBRTs7O0FBQy9CLG1CQUFPLFVBQUMsS0FBSyxFQUFFLFVBQVUsRUFBSztBQUMxQix1QkFBSyxvQkFBb0IsQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDO2FBQzFELENBQUM7U0FDTDs7O2VBRWdCLDJCQUFDLEtBQUssRUFBRSxNQUFNLEVBQUU7O0FBRTdCLGdCQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLGlCQUFpQixDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztTQUNuRDs7Ozs7O2VBSW1CLDhCQUFDLEtBQUssRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFOztBQUUxQyxnQkFBSSxJQUFJLElBQUksSUFBSSxDQUFDLHVDQUF1QyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFO0FBQ25GLG9CQUFJLENBQUMsSUFBSSxDQUFDLGlDQUFpQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDdEUsTUFBTSxJQUFJLElBQUksQ0FBQyxpQ0FBaUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFO0FBQ3RFLG9CQUFJLENBQUMsSUFBSSxDQUFDLDRCQUE0QixDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUMzRCxNQUFNLElBQUksSUFBSSxDQUFDLGtDQUFrQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUU7QUFDdkUsb0JBQUksQ0FBQyxJQUFJLENBQUMsNkJBQTZCLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQzVEO1NBQ0o7Ozs7Ozs7O2VBTXNCLGlDQUFDLEdBQUcsRUFBRTtBQUN6QixnQkFBSSxHQUFHLENBQUMsVUFBVSxFQUFFO0FBQ2hCLG9CQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUMsZUFBZSxFQUFFLEVBQzdDLE9BQU8sTUFBTSxDQUFDLEtBQ2IsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLGVBQWUsRUFBRSxFQUNsRCxPQUFPLE1BQU0sQ0FBQyxLQUVkLE9BQU8sTUFBTSxDQUFDO2FBQ3JCLE1BQU07QUFDSCx1QkFBTyxNQUFNLENBQUM7YUFDakI7U0FDSjs7Ozs7ZUFHMkIsc0NBQUMsR0FBRyxFQUFFO0FBQzlCLG1CQUFRLEdBQUcsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBRTtTQUNuQzs7Ozs7Ozs7ZUFNVSxxQkFBQyxLQUFLLEVBQUU7QUFDZixnQkFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsRUFBRTs7QUFDbkQsdUJBQU8sSUFBSSxDQUFDO2FBQ2YsTUFBTSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUMsa0JBQWtCLEVBQUUsRUFBRTs7QUFDekQsdUJBQU8sS0FBSyxDQUFDO2FBQ2hCLE1BQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLG1CQUFtQixFQUFFOztBQUNyRCx1QkFBTyxLQUFLLENBQUM7YUFDaEIsTUFBTTtBQUNILHVCQUFPLEFBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsY0FBYywrQkFDakIsS0FBSyxDQUFDLFVBQVUsQUFBQyxJQUM3QyxJQUFJLENBQUMsaUNBQWlDLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUNoRCxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsa0JBQWtCLElBQ2xDLElBQUksQ0FBQywwQ0FBMEMsQ0FBQyxLQUFLLENBQUMsQ0FBQSxBQUFDLEFBQUMsQ0FBQzthQUN4RTtTQUNKOzs7ZUFFVSxxQkFBQyxLQUFLLEVBQUU7QUFDZixnQkFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLGtCQUFrQixFQUFFLEVBQUU7O0FBQ2xELHVCQUFPLEtBQUssQ0FBQzthQUNoQixNQUFNLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRTs7QUFDckQsdUJBQU8sS0FBSyxDQUFDO2FBQ2hCLE1BQU07QUFDSCx1QkFBTyxBQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLGNBQWMsaUNBQ2YsS0FBSyxDQUFDLFVBQVUsQUFBQyxJQUMvQyxJQUFJLENBQUMsa0NBQWtDLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUNqRCxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsa0JBQWtCLElBQ2xDLElBQUksQ0FBQywwQ0FBMEMsQ0FBQyxLQUFLLENBQUMsQ0FBQSxBQUFDLEFBQUMsQ0FBQzthQUN4RTtTQUNKOzs7ZUFFVSxxQkFBQyxLQUFLLEVBQUU7QUFDZixnQkFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLGtCQUFrQixFQUFFLEVBQUU7O0FBQ2xELHVCQUFPLEtBQUssQ0FBQzthQUNoQixNQUFNLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRTs7QUFDckQsdUJBQU8sS0FBSyxDQUFDO2FBQ2hCLE1BQU07QUFDSCx1QkFBTyxLQUFLLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxjQUFjLGlDQUNkLEtBQUssQ0FBQyxVQUFVLEFBQUMsQ0FBQzthQUN4RDtTQUNKOzs7ZUFFVSxxQkFBQyxLQUFLLEVBQUU7QUFDZixnQkFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUNuRCx1QkFBTyxJQUFJLENBQUM7YUFDZixNQUFNLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFOztBQUN6RCx1QkFBTyxLQUFLLENBQUM7YUFDaEIsTUFBTSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsbUJBQW1CLEVBQUU7O0FBQ3JELHVCQUFPLEtBQUssQ0FBQzthQUNoQixNQUFNO0FBQ0gsdUJBQU8sS0FBSyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsY0FBYyxpQ0FDZCxLQUFLLENBQUMsVUFBVSxBQUFDLENBQUM7YUFDeEQ7U0FDSjs7O2VBRVEsa0JBQUMsSUFBSSxFQUFFO0FBQ1osbUJBQU8sSUFBSSxDQUFDO1NBQ2Y7Ozs7Ozs7Ozs7ZUFRZ0MsMkNBQUMsS0FBSyxFQUFFLFVBQVUsRUFBRTtBQUNqRCxtQkFBTyxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLGVBQWUsSUFBSSxVQUFVLENBQUEsSUFDN0QsSUFBSSxDQUFDLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUN2RDs7O2VBRWlDLDRDQUFDLEtBQUssRUFBRSxVQUFVLEVBQUU7QUFDbEQsbUJBQU8sQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxlQUFlLElBQUksVUFBVSxDQUFBLElBQzdELENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQywwQkFBMEIsRUFBRSxJQUN2QyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsOEJBQThCLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDeEQ7Ozs7O2VBR3NDLGlEQUFDLFdBQVcsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFOztBQUVuRSxnQkFBSSxZQUFZLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0FBQ3RELGdCQUFJLENBQUMsWUFBWSxFQUFFO0FBQ2YsdUJBQU8sS0FBSyxDQUFDO2FBQ2hCOzs7QUFHRCxtQkFBTyxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLGVBQWUsSUFBSSxVQUFVLENBQUEsS0FDakUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxrQkFBa0IsS0FBSyxJQUFJLElBQUksVUFBVSxDQUFBLEFBQUMsSUFDN0QsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQywyQkFBMkIsQ0FBQyxZQUFZLEVBQUUsV0FBVyxDQUFDLENBQUM7U0FDckY7OztlQUd5QyxvREFBQyxXQUFXLEVBQUU7QUFDcEQsbUJBQU8sQ0FBQyxJQUFJLENBQUMsdUNBQXVDLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQzdFLENBQUMsSUFBSSxDQUFDLHVDQUF1QyxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ25GOzs7Ozs7ZUFJVSx1QkFBRztBQUNWLG1CQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUNkLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLFVBQUMsR0FBRyxFQUFLO0FBQ2hDLHVCQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7YUFDekMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsb0JBQUksRUFBRSxPQUFPO0FBQ2Isd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM1QiwyQkFBVyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDO0FBQ2hDLHdCQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsMEJBQTBCLEVBQUUsSUFBSSxDQUFDO0FBQzdELHNCQUFNLEVBQUUsU0FBUztBQUNqQix3QkFBUSxFQUFFLEtBQUs7QUFDZixzQkFBTSxFQUFFLElBQUk7YUFDZixDQUNKLENBQUM7U0FDTDs7Ozs7ZUFJTSxtQkFBRzs7O0FBQ04sbUJBQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQ2pDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLFVBQUMsR0FBRyxFQUFLO0FBQ25DLHVCQUFRLE9BQUssV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUU7YUFDMUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsb0JBQUksRUFBRSxTQUFTO0FBQ2Ysd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM1QiwyQkFBVyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDO0FBQ2hDLHVCQUFPLEVBQUUsQ0FBQzthQUNiLEVBQ0QsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUU7QUFDVCx3QkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLDJCQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUM7QUFDaEMsd0JBQVEsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsRUFBRSxJQUFJLENBQUM7QUFDN0Qsb0JBQUksRUFBRSxNQUFNO0FBQ1osc0JBQU0sRUFBRSxJQUFJO0FBQ1osc0JBQU0sRUFBRSxTQUFTO0FBQ2pCLHFCQUFLLEVBQUUsZUFBQyxLQUFLLEVBQUUsTUFBTSxFQUFLOztBQUV0Qix3QkFBSSxLQUFLLENBQUMsR0FBRyxFQUFFOzs7QUFHWCwrQkFBSyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztxQkFDNUQsTUFBTTs7QUFFSCwrQkFBSyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsaUJBQWlCLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztxQkFDekQ7aUJBQ0o7QUFDRCw0QkFBWSxFQUFFLHNCQUFDLEtBQUssRUFBRSxNQUFNLEVBQUs7O0FBRTdCLDJCQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO2lCQUN0QzthQUNKLENBQUMsRUFDRixFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRTtBQUNiLG9CQUFJLEVBQUUsR0FBRztBQUNULHNCQUFNLEVBQUUsT0FBTztBQUNmLG9CQUFJLEVBQUUsZ0JBQWdCO0FBQ3RCLHdCQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUM7QUFDOUIsd0JBQVEsRUFBRSxLQUFLO2FBQ2xCLENBQUMsQ0FDTCxDQUFDO1NBQ0w7Ozs7O2VBR00sbUJBQUc7OztBQUNOLG1CQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUNqQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFDLEdBQUcsRUFBSztBQUNuQyx1QkFBUSxPQUFLLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFFO2FBQzFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUNYLG9CQUFJLEVBQUUsU0FBUztBQUNmLHdCQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDN0IsMkJBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztBQUNoQyx1QkFBTyxFQUFFLENBQUM7YUFDYixFQUNELEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFO0FBQ1Qsd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM1QiwyQkFBVyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDO0FBQ2hDLHdCQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsNEJBQTRCLEVBQUUsSUFBSSxDQUFDO0FBQy9ELG9CQUFJLEVBQUUsTUFBTTtBQUNaLHNCQUFNLEVBQUUsSUFBSTtBQUNaLHNCQUFNLEVBQUUsU0FBUztBQUNqQixxQkFBSyxFQUFFLGVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBSzs7QUFFdEIsMkJBQUssSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQ3pEO2FBQ0osQ0FBQzs7QUFFRixjQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFDUCxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLEVBQUUsRUFBRSxVQUFDLEdBQUcsRUFBSztBQUNwQyx1QkFBUSxHQUFHLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFFO2FBQy9FLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFDYixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxVQUFDLEdBQUcsRUFBSztBQUNqQyx1QkFBUSxHQUFHLENBQUMsa0JBQWtCLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBRTthQUM1QyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7QUFDWCwyQkFBVyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQy9CLHdCQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxDQUFDO0FBQ3ZELG9CQUFJLEVBQUUsTUFBTTtBQUNaLHNCQUFNLEVBQUUsSUFBSTtBQUNaLHNCQUFNLEVBQUUsU0FBUztBQUNqQix3QkFBUSxFQUFFLEtBQUs7YUFDbEIsQ0FDSixFQUNELEVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFO0FBQ2Isb0JBQUksRUFBRSxHQUFHO0FBQ1Qsc0JBQU0sRUFBRSxPQUFPO0FBQ2Ysb0JBQUksRUFBRSxnQkFBZ0I7QUFDdEIsd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztBQUM5Qix3QkFBUSxFQUFFLEtBQUs7YUFDbEIsQ0FBQyxDQUNMLENBQUM7U0FDTDs7Ozs7ZUFHZSw0QkFBRzs7O0FBQ2YsbUJBQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQ2QsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUUsVUFBQyxHQUFHLEVBQUs7QUFDbkMsdUJBQU8sQ0FBQyxRQUFLLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUM7YUFDekYsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUM3QiwyQkFBVyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQy9CLHdCQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxDQUFDO0FBQ3ZELG9CQUFJLEVBQUUsTUFBTTtBQUNaLHNCQUFNLEVBQUUsSUFBSTtBQUNaLHNCQUFNLEVBQUUsU0FBUztBQUNqQix3QkFBUSxFQUFFLEtBQUs7YUFDbEIsQ0FDSixDQUFDO1NBQ0w7Ozs7O2VBSU0sbUJBQUc7OztBQUNOLG1CQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUNqQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFDLEdBQUcsRUFBSztBQUNuQyx1QkFBUSxRQUFLLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFFO2FBQzFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUNYLG9CQUFJLEVBQUUsU0FBUztBQUNmLHdCQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDNUIsMkJBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQztBQUNsQyx1QkFBTyxFQUFFLENBQUM7YUFDYixFQUNELEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFO0FBQ1Qsb0JBQUksRUFBRSxjQUFjOzs7OztBQUtwQix3QkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLDJCQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUM7QUFDbEMsd0JBQVEsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQzNCLGNBQWM7QUFDZCwwQ0FBMEI7QUFDMUIsZ0NBQWdCO0FBQ2hCLG9DQUFvQjtBQUNwQix5QkFBUztBQUNULG9CQUFJLENBQUM7QUFDVCxvQkFBSSxFQUFFLE1BQU07QUFDWixzQkFBTSxFQUFFLElBQUk7QUFDWixzQkFBTSxFQUFFLFNBQVM7O0FBRWpCLHNCQUFNLEVBQUUsR0FBRztBQUNYLDRCQUFZLEVBQUUsSUFBSTtBQUNsQixvQ0FBb0IsRUFBRSxLQUFLO0FBQzNCLHNDQUFzQixFQUFFLElBQUk7QUFDNUIsMEJBQVUsRUFBRSxJQUFJO0FBQ2hCLGtDQUFrQixFQUFFLEtBQUs7QUFDekIsb0NBQW9CLEVBQUUsSUFBSTtBQUMxQixxQkFBSyxFQUFFLGVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBSzs7QUFFdEIsNEJBQUssSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQ3pEO2FBQ0osQ0FBQyxFQUNGLEVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFO0FBQ2Isb0JBQUksRUFBRSxHQUFHO0FBQ1Qsc0JBQU0sRUFBRSxPQUFPO0FBQ2Ysb0JBQUksRUFBRSxnQkFBZ0I7QUFDdEIsd0JBQVEsRUFBRSxLQUFLO0FBQ2Ysd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQzthQUNqQyxDQUFDLENBQ0wsQ0FBQztTQUNMOzs7ZUFFa0IsK0JBQUc7OztBQUNsQixtQkFBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFDZCxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFDLEdBQUcsRUFBSztBQUNuQyx1QkFBTyxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsS0FBSyxTQUFTLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQzthQUN4RyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQ2IsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxFQUFFLEVBQUUsVUFBQyxHQUFHLEVBQUs7QUFDcEMsdUJBQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDcEQsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUNiLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsRUFBRSxFQUFFLFVBQUMsR0FBRyxFQUFLO0FBQ3ZDLHVCQUFPLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7YUFDaEMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztBQUM5QixxQkFBSyxFQUFFLElBQUk7QUFDWCxzQkFBTSxFQUFFLE1BQU07QUFDZCxvQkFBSSxFQUFFLE1BQU07QUFDWixxQkFBSyxFQUFFLGVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBSztBQUN0QiwyQkFBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUM1Qiw0QkFBSyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsU0FBUyxDQUFDLFFBQUssSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLGtCQUFrQixDQUFDLENBQUM7aUJBQ3JFO2FBQ0osQ0FDSixDQUFDO1NBQ0w7OztlQUVPLG9CQUFHOzs7QUFDUCxtQkFBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFDZCxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFDLEdBQUcsRUFBSztBQUNuQyx1QkFBTyxRQUFLLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUM5RCxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQ2IsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxFQUFFLEVBQUUsVUFBQyxHQUFHLEVBQUs7QUFDcEMsdUJBQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsUUFBSyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFVBQVUsR0FBRyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsQ0FBQzthQUMvRixDQUFDLENBQUMsUUFBUSxFQUFFLEVBQ2IsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxFQUFFLEVBQUUsVUFBQyxHQUFHLEVBQUs7QUFDdkMsdUJBQU8sSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxRQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2FBQ25FLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUNYLHdCQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDN0IscUJBQUssRUFBRSxJQUFJO0FBQ1gsc0JBQU0sRUFBRSxNQUFNO0FBQ2Qsb0JBQUksRUFBRSxNQUFNO0FBQ1osd0JBQVEsRUFBRSxLQUFLO2FBQ2xCLENBQ0osQ0FBQztTQUNMOzs7OztlQUdVLHVCQUFHO0FBQ1YsbUJBQU8sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1NBQzFCOzs7OztlQUdNLG1CQUFHOzs7QUFDTixtQkFBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFDakMsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUUsVUFBQyxHQUFHLEVBQUs7QUFDbkMsdUJBQVEsUUFBSyxXQUFXLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBRTthQUMxQyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7QUFDWCxvQkFBSSxFQUFFLFNBQVM7QUFDZix3QkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLDJCQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUM7QUFDbEMsdUJBQU8sRUFBRSxDQUFDO2FBQ2IsRUFDRCxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRTtBQUNULG9CQUFJLEVBQUUsY0FBYztBQUNwQix3QkFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLDJCQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUM7O0FBRWxDLHdCQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUMzQixzQkFBc0I7QUFDdEIsbUNBQW1CO0FBQ25CLGtDQUFrQjtBQUNsQixpQ0FBaUI7QUFDakIsb0JBQUksQ0FBQzs7QUFFVCxvQkFBSSxFQUFFLE1BQU07QUFDWixzQkFBTSxFQUFFLElBQUk7QUFDWixzQkFBTSxFQUFFLFNBQVM7O0FBRWpCLHNCQUFNLEVBQUUsR0FBRztBQUNYLDRCQUFZLEVBQUUsSUFBSTtBQUNsQixvQ0FBb0IsRUFBRSxLQUFLO0FBQzNCLHNDQUFzQixFQUFFLEtBQUs7QUFDN0IsMEJBQVUsRUFBRSxJQUFJO0FBQ2hCLGtDQUFrQixFQUFFLEtBQUs7QUFDekIsb0NBQW9CLEVBQUUsS0FBSztBQUMzQiwwQkFBVSxFQUFFLENBQUM7QUFDYixxQkFBSyxFQUFFLGVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBSzs7QUFFdEIsNEJBQUssSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQ3pEO2FBQ0osQ0FBQyxFQUNGLElBQUksQ0FBQyxRQUFRLEVBQUU7QUFDZixjQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRTtBQUNiLG9CQUFJLEVBQUUsR0FBRztBQUNULHNCQUFNLEVBQUUsT0FBTztBQUNmLG9CQUFJLEVBQUUsZ0JBQWdCO0FBQ3RCLHdCQUFRLEVBQUUsS0FBSztBQUNmLHdCQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUM7YUFDakMsQ0FBQyxDQUNMLENBQUM7U0FDTDs7O2VBRVMsc0JBQUc7QUFDVCxtQkFBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQ3hCLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUNyRSxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsNEJBQTRCLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUM3RSxvQkFBSSxFQUFFLFVBQVU7QUFDaEIsd0JBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM1QixzQkFBTSxFQUFFLEdBQUc7QUFDWCxxQkFBSyxFQUFFLEdBQUc7QUFDVixvQkFBSSxFQUFFLElBQUk7O0FBRVYsc0JBQU0sRUFBRSxTQUFTO0FBQ2pCLDRCQUFZLEVBQUUsSUFBSTtBQUNsQixvQ0FBb0IsRUFBRSxLQUFLO0FBQzNCLHNDQUFzQixFQUFFLElBQUk7QUFDNUIsMEJBQVUsRUFBRSxJQUFJO0FBQ2hCLGtDQUFrQixFQUFFLEtBQUs7QUFDekIsb0NBQW9CLEVBQUUsSUFBSTthQUM3QixDQUNKLENBQUM7U0FDTDs7O1dBdnVCQyxhQUFhOzs7QUEwdUJuQixNQUFNLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQzs7Ozs7Ozs7O0FDMXZCL0IsSUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztBQUNyQixJQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQzs7QUFFL0IsSUFBTSxhQUFhLEdBQUcsU0FBaEIsYUFBYSxDQUFJLEdBQUc7V0FDdEIsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUU7QUFDUixrQkFBVSxFQUFFLEtBQUs7S0FDcEIsRUFDSSxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRTtBQUNULFlBQUksRUFBRSxXQUFXO0FBQ2pCLGNBQU0sRUFBRSxJQUFJO0tBQ2YsQ0FBQyxDQUNOO0NBQUEsQ0FBQzs7QUFFTixNQUFNLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQzs7Ozs7QUNiL0IsSUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztBQUNyQixJQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQzs7QUFFL0IsSUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDOztBQUV6QixJQUFNLFFBQVEsR0FBRyxTQUFYLFFBQVEsQ0FBSSxHQUFHLEVBQUUsR0FBRyxFQUFLO0FBQzNCLFFBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMzRCxXQUFPLEVBQUUsR0FDTCxVQUFVLEdBQUcsR0FBRyxHQUFHLElBQUksR0FDdkIsWUFBWSxHQUFHLEdBQUcsQ0FBQyxRQUFRLEdBQUcsSUFBSSxHQUNsQyxVQUFVLEdBQUcsR0FBRyxDQUFDLE1BQU0sR0FBRyxJQUFJLEdBQzlCLGNBQWMsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLEtBQUssR0FBRyxJQUFJLEdBQzVDLHNCQUFzQixHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLEdBQ3hFLGNBQWMsR0FBRyxHQUFHLENBQUMsVUFBVSxHQUFHLElBQUksR0FDdEMsWUFBWSxHQUFHLEdBQUcsQ0FBQyxRQUFRLEdBQUcsSUFBSSxHQUNsQyxZQUFZLElBQUksR0FBRyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUEsQUFBQyxHQUFHLElBQUksR0FDekQsbUJBQW1CLEdBQUcsR0FBRyxDQUFDLGVBQWUsR0FBRyxJQUFJLEdBQ2hELDRCQUE0QixHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLEdBQ3BGLFNBQVMsR0FBRyxHQUFHLENBQUMsS0FBSyxHQUFHLElBQUksR0FDNUIsYUFBYSxHQUFHLEdBQUcsQ0FBQyxTQUFTLEdBQUcsSUFBSSxHQUNwQyx3QkFBd0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLElBQUksR0FDdEUsc0JBQXNCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsR0FBRyxJQUFJLEdBQ2xFLHlCQUF5QixHQUFHLEtBQUssQ0FBQyxLQUFLLEdBQUcsTUFBTSxHQUFHLEtBQUssQ0FBQyxLQUFLLEdBQUcsSUFBSTs7QUFFckUsMEJBQXNCLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQztDQUNoRixDQUFBOzs7QUFHRCxJQUFNLFFBQVEsR0FBRyxTQUFYLFFBQVEsQ0FBSSxHQUFHLEVBQUUsSUFBSSxFQUFLO0FBQzVCLFdBQU8sSUFBSSxLQUFLLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxhQUFhLENBQUM7Q0FDN0MsQ0FBQTs7QUFFRCxJQUFNLHVCQUF1QixHQUFHLFNBQTFCLHVCQUF1QixDQUFJLEdBQUcsRUFBRSxHQUFHLEVBQUs7QUFDMUMsUUFBSSxHQUFHLENBQUMsVUFBVSxJQUFJLEdBQUcsS0FBSyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsYUFBYSxFQUFFO0FBQ3JELGVBQU8sTUFBTSxDQUFDO0tBQ2pCLE1BQU07QUFDSCxlQUFPLE1BQU0sQ0FBQztLQUNqQjtDQUNKLENBQUE7O0FBRUQsSUFBTSxZQUFZLEdBQUcsU0FBZixZQUFZLENBQUksR0FBRztXQUNqQixFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRTtBQUNSLHdCQUFnQixFQUFFLEtBQUs7QUFDdkIsaUJBQVMsRUFBRSxFQUFFO0FBQ2IsZUFBTyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTTtBQUN2QixzQkFBYyxFQUFFLElBQUk7QUFDcEIsb0JBQVksRUFBRSxJQUFJO0FBQ2xCLGtCQUFVLEVBQUUsb0JBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7QUFDdkMsZUFBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGFBQWEsR0FBRyxNQUFNLENBQUM7QUFDbkMsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLHVCQUF1QixFQUFFLENBQUM7U0FDOUM7QUFDRCxrQkFBVSxFQUFFLG9CQUFVLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO0FBQ3ZDLGVBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDO0FBQ2pDLGVBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO1NBQzlDO0FBQ0Qsc0JBQWMsRUFBRSx3QkFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRTtBQUNqRCxlQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsYUFBYSxHQUFHLE1BQU0sQ0FBQztBQUNuQyxlQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztTQUM5QztBQUNELHNCQUFjLEVBQUUsd0JBQVUsS0FBSyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUU7QUFDckQsZUFBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7QUFDakMsZUFBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLHVCQUF1QixFQUFFLENBQUM7U0FDOUM7QUFDRCxpQkFBUyxFQUFFLG1CQUFVLEtBQUssRUFBRSxVQUFVLEVBQUU7QUFDcEMsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxTQUFTLENBQUM7QUFDdkMsZ0JBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxLQUFLLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxLQUFLLEVBQUUsWUFBWSxFQUFFLENBQUMsS0FBSyxFQUFFO0FBQ2pFLG1CQUFHLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLFVBQVUsQ0FBQyxDQUFDO2FBQ25EO1NBQ0o7QUFDRCxtQkFBVyxFQUFFLHFCQUFVLEtBQUssRUFBRSxNQUFNLEVBQUU7QUFDbEMsZUFBRyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUM1QjtBQUNELG9CQUFZLEVBQUUsc0JBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRTtBQUNuQyxnQkFBSSxLQUFLLENBQUMsT0FBTyxFQUFFO0FBQ2YsdUJBQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO2FBQ3RDO1NBQ0o7S0FDSixFQUNHLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUNQLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsRUFBRSxFQUFFO2VBQU0sdUJBQXVCLENBQUMsR0FBRyxDQUFDO0tBQUEsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUMzRSxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUMvRSxZQUFJLEVBQUUsV0FBVztLQUNwQixDQUNKOzs7QUFHRCxNQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRTtBQUNULGlCQUFTLEVBQUUsVUFBVTtLQUN4QixFQUNHLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsRUFBRSxFQUFFO2VBQU0sdUJBQXVCLENBQUMsR0FBRyxDQUFDO0tBQUEsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUMzRSxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFDMUUsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsVUFBVSxDQUFDLEVBQUU7QUFDM0MsZUFBTyxDQUFDLEtBQUssTUFBTSxJQUFJLENBQUMsS0FBSyxRQUFRLENBQUM7S0FDekMsQ0FBQyxDQUNMLEVBQ0QsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUU7QUFDVCxlQUFPLEVBQUUsVUFBVTtLQUN0QixFQUNHLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsRUFBRSxFQUFFO2VBQU0sdUJBQXVCLENBQUMsR0FBRyxDQUFDO0tBQUEsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUMzRSxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFDMUUsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsVUFBVSxDQUFDLEVBQUU7QUFDM0MsZUFBTyxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSyxRQUFRLENBQUM7S0FDdkMsQ0FBQyxDQUNMLEVBRUQsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJO0FBQ3RCLFFBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLGVBQVEsUUFBUSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFFO0tBQ3ZDLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFDYixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFDMUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUU7QUFDVCxjQUFNLEVBQUUsU0FBUztBQUNqQixZQUFJLEVBQUUsTUFBTTtBQUNaLGNBQU0sRUFBRSxNQUFNO0FBQ2QsYUFBSyxFQUFFLEVBQUU7QUFDVCxjQUFNLEVBQUUsRUFBRTtLQUNiLENBQUMsQ0FDTCxDQUNSO0NBQUEsQ0FBQzs7QUFFTixNQUFNLENBQUMsT0FBTyxHQUFHLFlBQVksQ0FBQzs7Ozs7QUN4SDlCLElBQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUM7QUFDckIsSUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUM7O0FBRS9CLElBQU0sUUFBUSxHQUFHLFNBQVgsUUFBUSxDQUFJLEdBQUcsRUFBRSxHQUFHLEVBQUs7QUFDM0IsUUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLHdCQUF3QixDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzNELFdBQU8sRUFBRSxHQUNMLFVBQVUsR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUN2QixZQUFZLEdBQUcsR0FBRyxDQUFDLFFBQVEsR0FBRyxJQUFJLEdBQ2xDLFVBQVUsR0FBRyxHQUFHLENBQUMsTUFBTSxHQUFHLElBQUksR0FDOUIsY0FBYyxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLElBQUksR0FDNUMsc0JBQXNCLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FDeEUsY0FBYyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEdBQUcsSUFBSSxHQUN0QyxZQUFZLEdBQUcsR0FBRyxDQUFDLFFBQVEsR0FBRyxJQUFJLEdBQ2xDLFlBQVksSUFBSSxHQUFHLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQSxBQUFDLEdBQUcsSUFBSSxHQUN6RCxtQkFBbUIsR0FBRyxHQUFHLENBQUMsZUFBZSxHQUFHLElBQUksR0FDaEQsNEJBQTRCLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLHdCQUF3QixDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FDcEYsU0FBUyxHQUFHLEdBQUcsQ0FBQyxLQUFLLEdBQUcsSUFBSSxHQUM1QixhQUFhLEdBQUcsR0FBRyxDQUFDLFNBQVMsR0FBRyxJQUFJLEdBQ3BDLHdCQUF3QixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLEdBQUcsSUFBSSxHQUN0RSxzQkFBc0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLElBQUksR0FDbEUseUJBQXlCLEdBQUcsS0FBSyxDQUFDLEtBQUssR0FBRyxNQUFNLEdBQUcsS0FBSyxDQUFDLEtBQUssR0FBRyxJQUFJOztBQUVyRSwwQkFBc0IsR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsa0JBQWtCLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDO0NBQ2hGLENBQUE7OztBQUdELElBQU0sU0FBUyxHQUFHLFNBQVosU0FBUyxDQUFJLEdBQUcsRUFBRSxJQUFJLEVBQUs7QUFDN0IsUUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLG1CQUFtQixFQUFFLENBQUMsZUFBZSxDQUFDO0FBQzdELFFBQUksR0FBRyxDQUFDLGVBQWUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7O0FBQ3JELGVBQU8sSUFBSSxDQUFDO0tBQ2YsTUFBTSxJQUFJLEdBQUcsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFOztBQUNuRCxlQUFPLEtBQUssQ0FBQztLQUNoQixNQUFNO0FBQ0gsZUFBTyxDQUFDLElBQUksS0FBSyxPQUFPLElBQUksSUFBSSxLQUFLLE1BQU0sQ0FBQSxLQUFNLElBQUksQ0FBQyxRQUFRLEtBQUssR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGNBQWMsSUFBSSxHQUFHLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQSxBQUFDLENBQUM7S0FDcEk7Q0FDSixDQUFDOztBQUVGLElBQU0sYUFBYSxHQUFHLFNBQWhCLGFBQWEsQ0FBSSxHQUFHO1dBQ3RCLEVBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUNOLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLGVBQVEsU0FBUyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFFO0tBQ3hDLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtBQUNYLHdCQUFnQixFQUFFLEtBQUs7QUFDdkIsaUJBQVMsRUFBRSxZQUFZO0FBQ3ZCLGVBQU8sRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU07QUFDdkIsb0JBQVksRUFBRSxzQkFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFO0FBQ25DLGdCQUFJLEtBQUssQ0FBQyxPQUFPLEVBQUU7QUFDZix1QkFBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7YUFDdEM7U0FDSjtLQUNKLEVBQ0QsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQ1AsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7QUFDL0UsWUFBSSxFQUFFLFdBQVc7QUFDakIsY0FBTSxFQUFFLFdBQVc7QUFDbkIsWUFBSSxFQUFFLFdBQVc7S0FDcEIsQ0FDSixFQUNELEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSzs7OztBQUlQLFFBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ3hFLGVBQU8sRUFBRSxRQUFRO0FBQ2pCLGNBQU0sRUFBRSxXQUFXO0FBQ25CLFlBQUksRUFBRSxXQUFXO0tBQ3BCLENBQ0osQ0FDUjtDQUFBLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRyxhQUFhLENBQUM7Ozs7O0FDdEUvQixJQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsRUFBRSxDQUFDO0FBQ3JCLElBQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDOztBQUUvQixJQUFNLFFBQVEsR0FBRyxTQUFYLFFBQVEsQ0FBSSxHQUFHLEVBQUs7QUFDdEIsV0FBTyxVQUFVLEdBQUcsR0FBRyxHQUFHLElBQUksR0FDMUIsT0FBTyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksR0FDN0IsWUFBWSxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxJQUFJLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLElBQUksR0FDeEYsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDO0NBQ3BILENBQUE7O0FBRUQsSUFBTSx1QkFBdUIsR0FBRyxTQUExQix1QkFBdUIsQ0FBSSxTQUFTLEVBQUs7QUFDM0MsV0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFDZCxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLEVBQUUsRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUM3QyxZQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDO0FBQzlCLFlBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsSUFBRyxDQUFDO0FBQ3JELGVBQU8sSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztLQUNsQyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7QUFDWCxpQkFBUyxFQUFFLFNBQVM7QUFDcEIsY0FBTSxFQUFFLFlBQVk7QUFDcEIsWUFBSSxFQUFFLG9CQUFvQjtBQUMxQixjQUFNLEVBQUUsSUFBSTtLQUNmLENBQ0osQ0FBQztDQUNMLENBQUE7O0FBRUQsSUFBTSxhQUFhLEdBQUcsU0FBaEIsYUFBYSxDQUFJLEdBQUc7V0FDbEIsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJOztBQUVyQixRQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxFQUNoRixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUM3QyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUMvQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUN6QyxlQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxJQUNyQixHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUN0RCxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxZQUFZLElBQ2hDLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxDQUFDLG1CQUFtQixJQUN2QyxHQUFHLENBQUMsWUFBWSxFQUFFLENBQUMsaUJBQWlCLEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7S0FDL0QsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0FBQ1gsb0JBQVksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU87QUFDN0Isd0JBQWdCLEVBQUUsS0FBSztBQUN2QixpQkFBUyxFQUFFLElBQUk7QUFDZiwrQkFBdUIsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQzVDLEVBQUUsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDO0FBQ2xCLCtCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQ3hDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQ3BDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQ3pDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQ3RDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQzVDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQ3ZDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQzNDLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQ3hDO0FBQ0QsZUFBTyxFQUFFLENBQUM7QUFDVixvQkFBWSxFQUFFLHNCQUFVLEtBQUssRUFBRSxNQUFNLEVBQUU7QUFDbkMsbUJBQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1NBQ3RDO0tBQ0osRUFFRCxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxXQUFXLEVBQUU7QUFDdEIsWUFBSSxFQUFFLGFBQWE7QUFDbkIsWUFBSSxFQUFFLHFCQUFxQjtBQUMzQixjQUFNLEVBQUUsSUFBSTtLQUNmLENBQUMsQ0FDVDtDQUFBLENBQUM7O0FBRU4sTUFBTSxDQUFDLE9BQU8sR0FBRyxhQUFhLENBQUM7Ozs7Ozs7OztJQ2pFekIsTUFBTTthQUFOLE1BQU07OEJBQU4sTUFBTTs7O2lCQUFOLE1BQU07O2VBRVMsb0JBQUMsSUFBSSxFQUFFO0FBQ3BCLG1CQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDM0I7OztlQUVrQixzQkFBQyxDQUFDLEVBQUUsR0FBRyxFQUFFO0FBQ3hCLGdCQUFJLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQyxFQUFFLHlCQUF5QixDQUFDLENBQUM7QUFDaEQsZ0JBQUksT0FBTyxHQUFHLE1BQU0sQ0FBQyxHQUFHLEVBQUUseUJBQXlCLENBQUMsQ0FBQzs7Ozs7QUFLckQsbUJBQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUM3Qjs7O2VBRWEsaUJBQUMsS0FBSyxFQUFFLENBQUMsRUFBRTs7QUFFckIsbUJBQVEsQ0FBQyxHQUFHLEtBQUssR0FBRyxFQUFFLENBQUU7U0FDM0I7Ozs7O2VBR2UsbUJBQUMsRUFBRSxFQUFFO0FBQ2pCLGdCQUFJLEVBQUUsSUFBSyxPQUFRLEVBQUUsQUFBQyxLQUFLLFVBQVUsQUFBQyxFQUFFO0FBQ3BDLGtCQUFFLEVBQUUsQ0FBQzthQUNSO1NBQ0o7Ozs7O2VBR21CLHlCQUFHO0FBQ25CLG1CQUFRLEFBQUMsY0FBYyxJQUFJLE1BQU0sSUFBTSxTQUFTLENBQUMsY0FBYyxHQUFHLENBQUMsQUFBQyxJQUFLLFNBQVMsQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLEFBQUMsQ0FBRTtTQUM3Rzs7O1dBL0JDLE1BQU07OztBQW1DWixNQUFNLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQzs7O0FDbkN4QjtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInJlcXVpcmUoJ2JhYmVsL3BvbHlmaWxsJyk7XHJcbndpbmRvdy5yaW90ID0gcmVxdWlyZSgncmlvdCcpO1xyXG53aW5kb3cuXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG53aW5kb3cuUHJvbWlzZSA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XHJcbnJlcXVpcmUoJ2NvcmUtanMnKTtcclxud2luZG93LiQgPSB3aW5kb3cualF1ZXJ5ID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnJlcXVpcmUoJ2pxdWVyeS11aScpO1xyXG5yZXF1aXJlKCdib290c3RyYXAnKTtcclxud2luZG93LkZpcmViYXNlID0gcmVxdWlyZSgnZmlyZWJhc2UnKTtcclxud2luZG93Lkh1bWFuaXplID0gcmVxdWlyZSgnaHVtYW5pemUtcGx1cycpO1xyXG53aW5kb3cubW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XHJcbndpbmRvdy5VUkkgPSByZXF1aXJlKCdVUklqcycpO1xyXG53aW5kb3cubG9jYWxmb3JhZ2UgPSByZXF1aXJlKCdsb2NhbGZvcmFnZScpO1xyXG5cclxucmVxdWlyZSgnLi9qcy9pbnRlZ3JhdGlvbnMvYXV0aDAnKTtcclxucmVxdWlyZSgnLi9qcy9pbnRlZ3JhdGlvbnMvZ29vZ2xlYW5hbHl0aWNzJyk7XHJcbnJlcXVpcmUoJy4vanMvaW50ZWdyYXRpb25zL25ld3JlbGljJyk7XHJcbnJlcXVpcmUoJy4vanMvaW50ZWdyYXRpb25zL3JheWd1bicpO1xyXG5yZXF1aXJlKCcuL2pzL2ludGVncmF0aW9ucy91c2Vyc25hcCcpO1xyXG5cclxucmVxdWlyZSgnLi90YWdzL3BhZ2UtYWN0aW9ucy50YWcnKTtcclxucmVxdWlyZSgnLi90YWdzL3BhZ2UtY29udGFpbmVyLnRhZycpO1xyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS1jb250ZW50LnRhZycpO1xyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS1mb290ZXIudGFnJyk7XHJcbnJlcXVpcmUoJy4vdGFncy9wYWdlLWhlYWRlci50YWcnKTtcclxucmVxdWlyZSgnLi90YWdzL3BhZ2UtbG9nby50YWcnKTtcclxucmVxdWlyZSgnLi90YWdzL3BhZ2Utc2VhcmNoLnRhZycpO1xyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS1zaWRlYmFyLnRhZycpO1xyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS10b3BtZW51LnRhZycpO1xyXG5yZXF1aXJlKCcuL3RhZ3MvcGFnZS1ib2R5LnRhZycpO1xyXG5cclxucmVxdWlyZSgnLi9qcy9jYW52YXMvZWRpdG9yLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL3VzZXIuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvam9pbl9uYXRpb24uanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvZWRpdG9yX29wdGlvbnMuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvdHV0b3JpYWwuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvYW5hbHl0aWNzLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL2F0dGFjaG1lbnRzLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL2F1dG9zYXZlLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL2dlbmVyYXRvci5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9oaXN0b3J5LmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL2xheW91dHMuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvZ29yZ2VzX2dyaWQuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvbWFwLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL21hcHMuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvZmVlZC5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy90b3BfbWFwcy5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy9wZXJzcGVjdGl2ZXMuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvcHJlc2VudGVyLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL3NoYXJpbmcuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvc3RhbmRhcmRzLmpzJyk7XHJcbnJlcXVpcmUoJy4vanMvY2FudmFzL3RhZ2dpbmcuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvdGFnZ2luZ19hZG1pbi5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy90YWdnaW5nX2Njcy5qcycpO1xyXG5yZXF1aXJlKCcuL2pzL2NhbnZhcy90ZW1wbGF0ZXMuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvdGVzdHMuanMnKTtcclxucmVxdWlyZSgnLi9qcy9jYW52YXMvdWkuanMnKTtcclxuXHJcbnZhciBtbSA9IHJlcXVpcmUoJy4vTWV0YU1hcCcpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBuZXcgbW0oKTsiLCJ2YXIgTWV0YUZpcmUgPSByZXF1aXJlKCcuL2pzL2ludGVncmF0aW9ucy9maXJlYmFzZScpO1xyXG52YXIgQXV0aDAgPSByZXF1aXJlKCcuL2pzL2ludGVncmF0aW9ucy9hdXRoMCcpO1xyXG52YXIgdXNlcnNuYXAgPSByZXF1aXJlKCcuL2pzL2ludGVncmF0aW9ucy91c2Vyc25hcCcpO1xyXG52YXIgVXNlciA9IHJlcXVpcmUoJy4vanMvYXBwL3VzZXIuanMnKTtcclxudmFyIEVkaXRvciA9IHJlcXVpcmUoJy4vanMvbWFwL2VkaXRvci5qcycpO1xyXG5cclxuY2xhc3MgTWV0YU1hcCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuTWV0YUZpcmUgPSBuZXcgTWV0YUZpcmUoKTtcclxuICAgICAgICB0aGlzLkF1dGgwID0gbmV3IEF1dGgwKCk7XHJcbiAgICAgICAgdXNlcnNuYXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLkF1dGgwLmxvZ2luKCkudGhlbigocHJvZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICBzZWxmLlVzZXIgPSBuZXcgVXNlcihwcm9maWxlKTtcclxuXHJcbiAgICAgICAgICAgIHJpb3QubW91bnQoJyonKTtcclxuICAgICAgICAgICAgXy5kZWxheSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBNZXRyb25pYy5pbml0KCk7IC8vIGluaXQgbWV0cm9uaWMgY29yZSBjb21wb25ldHNcclxuICAgICAgICAgICAgICAgIExheW91dC5pbml0KCk7IC8vIGluaXQgbGF5b3V0XHJcbiAgICAgICAgICAgICAgICBEZW1vLmluaXQoKTsgLy8gaW5pdCBkZW1vIGZlYXR1cmVzXHJcbiAgICAgICAgICAgICAgICBJbmRleC5pbml0KCk7IC8vIGluaXQgaW5kZXggcGFnZVxyXG4gICAgICAgICAgICAgICAgVGFza3MuaW5pdERhc2hib2FyZFdpZGdldCgpOyAvLyBpbml0IHRhc2ggZGFzaGJvYXJkIHdpZGdldFxyXG4gICAgICAgICAgICAgICAgdmFyIHggPSB7IGNzc1RhZ2dpbmc6IHt9IH1cclxuXHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubWFwRGF0YSA9IHsgXCJtYXBcIjogeyBcIm1ldGFkYXRhXCI6IHsgXCJzYW5kYm94XCI6IGZhbHNlLCBcImlkXCI6IDU1NDcsIFwibmFtZVwiOiBcIlVudGl0bGVkIE1hcFwiLCBcInVybFwiOiBcIi9tYXBzLzU1NDdcIiwgXCJjYW5FZGl0XCI6IHRydWUsIFwidXBkYXRlZEF0XCI6IFwiMjAxNS0wNS0xNVQxMjoyOTo0MC43MjEtMDQ6MDBcIiwgXCJ1cGRhdGVkQnlcIjogbnVsbCwgXCJ1cGRhdGVkQnlOYW1lXCI6IG51bGwsIFwidXNlclRhZ3NcIjogW10gfSwgXCJkYXRhXCI6IHsgXCJjbGFzc1wiOiBcImdvLkdyYXBoTGlua3NNb2RlbFwiLCBcIm5vZGVJc0xpbmtMYWJlbFByb3BlcnR5XCI6IFwiaXNMaW5rTGFiZWxcIiwgXCJsaW5rTGFiZWxLZXlzUHJvcGVydHlcIjogXCJsYWJlbEtleXNcIiwgXCJsaW5rRnJvbVBvcnRJZFByb3BlcnR5XCI6IFwiZnJvbVBvcnRcIiwgXCJsaW5rVG9Qb3J0SWRQcm9wZXJ0eVwiOiBcInRvUG9ydFwiLCBcIm5vZGVEYXRhQXJyYXlcIjogW3sgXCJrZXlcIjogMSwgXCJ0ZXh0XCI6IFwiTmV3IElkZWFcIiwgXCJpc0dyb3VwXCI6IHRydWUsIFwibG9jXCI6IFwiMCAwXCIsIFwibGF5b3V0XCI6IFwibGVmdFwiLCBcInNFeHBhbmRlZFwiOiB0cnVlLCBcInBFeHBhbmRlZFwiOiB0cnVlIH1dLCBcImxpbmtEYXRhQXJyYXlcIjogW10gfSwgXCJzdGF0ZURhdGFcIjogbnVsbCwgXCJlZGl0b3JPcHRpb25zXCI6IG51bGwsIFwiYW5hbHl0aWNzXCI6IHt9LCBcInZlcnNpb25zXCI6IFtdIH19O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vd2luZG93Ll91c2VyQ3RybCA9IFVzZXJDdHJsKHgsIHgsICcnLCAnJylcclxuICAgICAgICAgICAgICAgIC8vd2luZG93Ll9tYXBFZGl0b3JDdHJsID0gTWFwRWRpdG9yQ3RybCh4LCB4LCAnJywgJycpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LkNybE1hcCA9IG5ldyBFZGl0b3Iod2luZG93Lm1hcERhdGEpO1xyXG5cclxuICAgICAgICAgICAgfSwgMjUwKTtcclxuICAgICAgICAgICAgdGhpcy5NZXRhRmlyZS5pbml0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9nb3V0KCkge1xyXG4gICAgICAgIHRoaXMuTWV0YUZpcmUubG9nb3V0KCk7XHJcbiAgICAgICAgdGhpcy5BdXRoMC5sb2dvdXQoKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNZXRhTWFwOyIsImNsYXNzIFVzZXIge1xyXG4gICAgY29uc3RydWN0b3IocHJvZmlsZSkge1xyXG4gICAgICAgIHRoaXMucHJvZmlsZSA9IHByb2ZpbGU7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBVUkkod2luZG93LmxvY2F0aW9uKS5xdWVyeSh0cnVlKTtcclxuICAgICAgICB0aGlzLnRoaW5rcXVlcnkgPSAodGhpcy5wYXJhbXMudGhpbmtxdWVyeSA/IHRydWUgOiBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVzZXJJZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9maWxlLnVzZXJfaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzQWRtaW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZmlsZS5yb2xlcy5pbmRleE9mKCdhZG1pbicpICE9PSAtMTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9maWxlLm5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVVzZXJFZGl0b3JPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yX29wdGlvbnM6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3N0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgIC8vJGh0dHAucHV0KCcvdXNlcnMvJyArICRzY29wZS51c2VySWQgKyAnLmpzb24nLCBkYXRhKS50aGVuKFxyXG4gICAgICAgIC8vICAgIGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgIC8vICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgIC8vICAgIH0sXHJcbiAgICAgICAgLy8gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgIC8vICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgZWRpdG9yIG9wdGlvbnMnO1xyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvLyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVXNlcjsiLCIvLyBmdW5jdGlvbnMgaGFuZGxpbmcgYW5hbHl0aWNzXHJcbi8vIGFuYWx5dGljcyBkaXNwbGF5IGlzIGluIHZpZXdzL21hcHMvX2FuYWx5dGljc190YWJfbWFwIGFuZCBfYW5hbHl0aWNzX3RhYl90aGluZ1xyXG5TYW5kYmFua0VkaXRvci5BbmFseXRpY3MgPSBmdW5jdGlvbiAoJHNjb3BlLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xyXG4gICAgICAgICAgICBpZiAobWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9BTkFMWVRJQ1NfVEhJTkcpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfQU5BTFlUSUNTX1RISU5HKSB7IC8vIG9wZW5pbmcgdGhpbmcgYW5hbHl0aWNzIHRhYlxyXG4gICAgICAgICAgICBzZWxmLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoaXMgZ2V0cyBwb3B1bGF0ZWQgYnkgbWFwLmxvYWRNYXBFeHRyYURhdGEsIG9uIGxvYWQgYW5kIGFmdGVyIGV2ZXJ5IGF1dG9zYXZlXHJcbiAgICB0aGlzLm1hcEFuYWx5dGljcyA9IG51bGw7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIGNvbnRleHR1YWwgYW5hbHl0aWNzIC0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyAtIHRoZXNlIGFyZSBhbGwgY2FsY3VsYXRlZCBoZXJlLCB1bmxpa2UgbWFwIGFuYWx5dGljcyB3aGljaCBhcmUgY2FsY3VsYXRlZCBvbiB0aGUgc2VydmVyIGFuZCBjb25uZWN0ZWQgd2l0aCBiYWRnZXMgYW5kIHBvaW50c1xyXG5cclxuICAgIC8vIHRoaXMgZ2V0cyBjYWxjdWxhdGVkIGJ5IHVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3NcclxuICAgIHRoaXMuY29udGV4dHVhbEFuYWx5dGljcyA9IHtcclxuICAgICAgICB0aGluZ05hbWU6ICcnLFxyXG5cclxuICAgICAgICAvLyB0aGluZyBzdHVmZlxyXG4gICAgICAgIGRpc3RpbmN0RnJvbTogMCxcclxuICAgICAgICBpbnRlbnRpb25hbGx5RGlzdGluY3RGcm9tOiAwLFxyXG4gICAgICAgIHBhcnRPZjogMCxcclxuICAgICAgICBpbmNsdWRlc1BhcnRzOiAwLFxyXG4gICAgICAgIHJlbGF0ZWRUbzogMCxcclxuICAgICAgICBpc1JlbGF0aW9uc2hpcDogMCxcclxuICAgICAgICBsb29raW5nQXQ6IDAsXHJcbiAgICAgICAgbG9va2VkQXRGcm9tOiAwLFxyXG5cclxuICAgICAgICAvLyBSIHN0dWZmXHJcbiAgICAgICAgckZyb21UaGluZ05hbWU6ICcnLFxyXG4gICAgICAgIHJUb1RoaW5nTmFtZTogJycsXHJcbiAgICAgICAgaXNSVGhpbmc6IGZhbHNlLFxyXG4gICAgICAgIGlzUlN5c3RlbTogZmFsc2UsXHJcbiAgICAgICAgaXNSUG9pbnQ6IGZhbHNlLFxyXG4gICAgICAgIGlzUlZpZXc6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudXBkYXRlQ29udGV4dHVhbEFuYWx5dGljcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd1cGRhdGVDb250ZXh0dWFsQW5hbHl0aWNzJyk7XHJcbiAgICAgICAgaWYgKCFtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX0FOQUxZVElDU19USElORykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgcGFydCA9IGRpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCk7XHJcbiAgICAgICAgdmFyIGEgPSBzZWxmLmNvbnRleHR1YWxBbmFseXRpY3M7XHJcblxyXG4gICAgICAgIGlmIChwYXJ0ICYmIHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcgPSBwYXJ0O1xyXG5cclxuICAgICAgICAgICAgLy8gdGhpbmcgbmFtZVxyXG4gICAgICAgICAgICBhLnRoaW5nTmFtZSA9IHRoaW5nLmRhdGEudGV4dDtcclxuXHJcbiAgICAgICAgICAgIC8vIGRpc3RpbmN0IGZyb21cclxuICAgICAgICAgICAgYS5kaXN0aW5jdEZyb20gPSBfLndoZXJlKGRpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheSwge2lzR3JvdXA6IHRydWV9KS5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICAgICAgLy8gcGFydCBvZlxyXG4gICAgICAgICAgICB2YXIgbGV2ZWwgPSAwO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gdGhpbmc7XHJcbiAgICAgICAgICAgIHdoaWxlICh0aGluZzIgPSBnZXRDb250YWluaW5nR3JvdXAodGhpbmcyKSkge1xyXG4gICAgICAgICAgICAgICAgbGV2ZWwrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhLnBhcnRPZiA9IGxldmVsO1xyXG5cclxuICAgICAgICAgICAgLy8gaW5jbHVkZXMgcGFydHNcclxuICAgICAgICAgICAgYS5pbmNsdWRlc1BhcnRzID0gY291bnRHcm91cHModGhpbmcpO1xyXG5cclxuICAgICAgICAgICAgLy8gcmVsYXRlZCB0byAvIGxvb2tpbmcgYXQgLyBsb29rZWQgYXQgZnJvbSAvIGludGVudGlvbmFsbHkgZGlzdGluY3QgZnJvbVxyXG4gICAgICAgICAgICBhLnJlbGF0ZWRUbyA9IDA7XHJcbiAgICAgICAgICAgIGEubG9va2luZ0F0ID0gMDtcclxuICAgICAgICAgICAgYS5sb29rZWRBdEZyb20gPSAwO1xyXG4gICAgICAgICAgICBhLmludGVudGlvbmFsbHlEaXN0aW5jdEZyb20gPSAwO1xyXG4gICAgICAgICAgICB2YXIgbGlua3MgPSB0aGluZy5saW5rc0Nvbm5lY3RlZDtcclxuICAgICAgICAgICAgdmFyIHJDb25uZWN0ZWRUaGluZ0tleXMgPSBbXTtcclxuICAgICAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIC8vIFAgbGlua1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGluay5mcm9tTm9kZSA9PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhLmxvb2tpbmdBdCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsaW5rLnRvTm9kZSA9PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhLmxvb2tlZEF0RnJvbSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEQgbGlua1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdEJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGEuaW50ZW50aW9uYWxseURpc3RpbmN0RnJvbSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gUiBsaW5rXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghbGluay5kYXRhLmNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJhY2sga2V5cyBvZiByZWxhdGVkIHRoaW5ncyBzbyB3ZSBkb24ndCBjb3VudCB0aGVtIG11bHRpcGxlIHRpbWVzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmsuZnJvbU5vZGUgPT0gdGhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgckNvbm5lY3RlZFRoaW5nS2V5cy5wdXNoKGxpbmsudG9Ob2RlLmRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobGluay50b05vZGUgPT0gdGhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgckNvbm5lY3RlZFRoaW5nS2V5cy5wdXNoKGxpbmsuZnJvbU5vZGUuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhLnJlbGF0ZWRUbyA9IF8udW5pcShyQ29ubmVjdGVkVGhpbmdLZXlzKS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAvLyBpc1JlbGF0aW9uc2hpcFxyXG4gICAgICAgICAgICBhLmlzUmVsYXRpb25zaGlwID0gdGhpbmcuaXNMaW5rTGFiZWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBhcnQgJiYgcGFydCBpbnN0YW5jZW9mIGdvLkxpbmspIHtcclxuICAgICAgICAgICAgdmFyIHJlbCA9IHBhcnQ7XHJcblxyXG4gICAgICAgICAgICAvLyB0aGluZyBuYW1lc1xyXG4gICAgICAgICAgICBhLnJGcm9tVGhpbmdOYW1lID0gcmVsLmZyb21Ob2RlLmRhdGEudGV4dDtcclxuICAgICAgICAgICAgYS5yVG9UaGluZ05hbWUgPSByZWwudG9Ob2RlLmRhdGEudGV4dDtcclxuXHJcbiAgICAgICAgICAgIC8vIGlzIFIgdGhpbmdcclxuICAgICAgICAgICAgYS5pc1JUaGluZyA9IHJlbC5pc0xhYmVsZWRMaW5rO1xyXG5cclxuICAgICAgICAgICAgLy8gaXMgUiBzeXN0ZW1cclxuICAgICAgICAgICAgYS5pc1JTeXN0ZW0gPSByZWwuaXNMYWJlbGVkTGluayAmJiBjb3VudEdyb3VwcyhyZWwubGFiZWxOb2Rlcy5maXJzdCgpKSA+IDA7XHJcblxyXG4gICAgICAgICAgICAvLyBpcyBSIHBvaW50XHJcbiAgICAgICAgICAgIGEuaXNSUG9pbnQgPSByZWwuaXNMYWJlbGVkTGluayAmJiBpc1BvaW50KHJlbC5sYWJlbE5vZGVzLmZpcnN0KCkpO1xyXG5cclxuICAgICAgICAgICAgLy8gaXMgUiB2aWV3XHJcbiAgICAgICAgICAgIGEuaXNSVmlldyA9IHJlbC5pc0xhYmVsZWRMaW5rICYmIGlzVmlldyhyZWwubGFiZWxOb2Rlcy5maXJzdCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgZWl0aGVyIHRoZSBjb250YWluaW5nR3JvdXAgb3IgdGhlIHJUaGluZ0NvbnRhaW5pbmdHcm91cCwgd2hpY2hldmVyIGlzIG5vbi1udWxsXHJcbiAgICBmdW5jdGlvbiBnZXRDb250YWluaW5nR3JvdXAoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gZ3JvdXAuY29udGFpbmluZ0dyb3VwIHx8IGdldFJUaGluZ0NvbnRhaW5pbmdHcm91cChncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgZ3JvdXAgaXMgYW4gUi10aGluZyBiZXR3ZWVuIHR3byBzaWJsaW5nIHBhcnRzIG9mIGEgd2hvbGUsIHJldHVybnMgdGhlIHdob2xlOyBlbHNlIHJldHVybnMgbnVsbFxyXG4gICAgZnVuY3Rpb24gZ2V0UlRoaW5nQ29udGFpbmluZ0dyb3VwKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKGdyb3VwLmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgIHZhciBmcm9tUGFyZW50ID0gZ3JvdXAubGFiZWxlZExpbmsuZnJvbU5vZGUuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB2YXIgdG9QYXJlbnQgPSBncm91cC5sYWJlbGVkTGluay50b05vZGUuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICBpZiAoZnJvbVBhcmVudCAhPT0gbnVsbCAmJiB0b1BhcmVudCAhPT0gbnVsbCAmJiBmcm9tUGFyZW50ID09IHRvUGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbVBhcmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjb3VudHMgdGhlIG1lbWJlciBwYXJ0cyBvZiB0aGUgZ3JvdXAgdGhhdCBhcmUgZ3JvdXBzLCByZWN1cnNpdmVseSAobm90IGluY2x1ZGluZyB0aGUgZ3JvdXAgaXRzZWxmKVxyXG4gICAgZnVuY3Rpb24gY291bnRHcm91cHMoZ3JvdXApIHtcclxuICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgIHZhciBpdCA9IGdldE1lbWJlckdyb3Vwcyhncm91cCkuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBjb3VudCArPSAxICsgY291bnRHcm91cHMocGFydCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgY29sbGVjdGlvbiBvZiBncm91cHMgdGhhdCBhcmUgZWl0aGVyIGEgbWVtYmVyUGFydCBvZiB0aGlzIGdyb3VwLCBvciBhbiBSLXRoaW5nIGJldHdlZW4gc2libGluZyBtZW1iZXJQYXJ0c1xyXG4gICAgZnVuY3Rpb24gZ2V0TWVtYmVyR3JvdXBzKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLm1lbWJlclBhcnRzO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocGFydCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnRoaW5nID0gZ2V0UlRoaW5nVG9TaWJsaW5nKHBhcnQpOyAvLyBOQjogc2hvdWxkIG5vdCBnZXQgZHVwbGljYXRpb24gaGVyZSwgYXMgdGhpcyBjaGVja3MgZm9yIHItdGhpbmdzIGluIG9ubHkgb25lIGRpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKHJ0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcnMuYWRkKHJ0aGluZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lbWJlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgdGhlIGdyb3VwIGlzIGxpbmtlZCBieSBhbiBSLXRoaW5nIHRvIGEgc2libGluZyAod2l0aCB0aGUgZ3JvdXAgYXMgdGhlIGZyb21Ob2RlKSwgcmV0dXJucyB0aGUgUi10aGluZzsgZWxzZSByZXR1cm5zIG51bGxcclxuICAgIGZ1bmN0aW9uIGdldFJUaGluZ1RvU2libGluZyhncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5sYWJlbE5vZGVzLmNvdW50ID4gMCAmJiBsaW5rLnRvTm9kZS5jb250YWluaW5nR3JvdXAgPT0gZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGluay5sYWJlbE5vZGVzLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNQb2ludChncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc091dE9mKCk7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzVmlldyhncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc0ludG8oKTtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn07IiwiLy8gZnVuY3Rpb25zIGhhbmRsaW5nIGF0dGFjaG1lbnRzXHJcblxyXG53aW5kb3cuU2FuZGJhbmtFZGl0b3IuQXR0YWNobWVudHMgPSBmdW5jdGlvbiAoJHNjb3BlLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5zZWxlY3RlZFRoaW5nID0gbnVsbDtcclxuICAgIHRoaXMuYXR0YWNobWVudHMgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuYXR0YWNobWVudFR5cGVzID0gW1xyXG4gICAgICAgIHtuYW1lOiAnbm90ZScsIGxhYmVsU2luZ3VsYXI6ICdOb3RlJywgbGFiZWxQbHVyYWw6ICdOb3Rlcyd9LCBcclxuICAgICAgICB7bmFtZTogJ2xpbmsnLCBsYWJlbFNpbmd1bGFyOiAnV2ViIExpbmsnLCBsYWJlbFBsdXJhbDogJ1dlYiBMaW5rcyd9LCBcclxuICAgICAgICB7bmFtZTogJ3Rhc2snLCBsYWJlbFNpbmd1bGFyOiAnVGFzaycsIGxhYmVsUGx1cmFsOiAnVGFza3MnfSwgXHJcbiAgICAgICAge25hbWU6ICdtYXAnLCBsYWJlbFNpbmd1bGFyOiAnTGlua2VkIE1ldGFNYXAnLCBsYWJlbFBsdXJhbDogJ0xpbmtlZCBNZXRhTWFwcyd9XHJcbi8vICAgICAgICB7bmFtZTogJ2RvYycsIGxhYmVsU2luZ3VsYXI6ICdEb2N1bWVudCcsIGxhYmVsUGx1cmFsOiAnRG9jdW1lbnRzJ30gIC8vIGxpbWl0IG92ZXJhbGwgc3RvcmFnZSBzcGFjZSBPUiBzaW1wbGVyIHJ1bGVzP1xyXG4gICAgICAgIC8vIGxpbWl0IGZpbGUgdHlwZXMgLSBwZGYsIGpwZywgZ2lmLCBwbmcsIG9mZmljZT8uLi4gIHdoaXRlbGlzdCB2cy4gYmxhY2tsaXN0XHJcbiAgICBdO1xyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5oYW5kbGVEaWFncmFtRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBlKSB7XHJcbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PSAnQ2hhbmdlZFNlbGVjdGlvbicpIHtcclxuICAgICAgICAgICAgaWYgKG1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfQVRUQUNITUVOVFMpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnN0b3BFZGl0aW5nQWxsKCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNhdmVBdHRhY2htZW50cygpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5sb2FkU2VsZWN0ZWRUaGluZ0F0dGFjaG1lbnRzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX0FUVEFDSE1FTlRTKSB7IC8vIG9wZW5pbmcgdGFiXHJcbiAgICAgICAgICAgIHNlbGYubG9hZFNlbGVjdGVkVGhpbmdBdHRhY2htZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2xkVmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX0FUVEFDSE1FTlRTKSB7IC8vIGNsb3NpbmcgdGFiXHJcbiAgICAgICAgICAgIHNlbGYuc2F2ZUF0dGFjaG1lbnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxvYWRTZWxlY3RlZFRoaW5nQXR0YWNobWVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAobWFwLnRoaW5nU2VsZWN0ZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFRoaW5nID0gbWFwLmdldFVuaXF1ZVRoaW5nU2VsZWN0ZWQoKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMgPSBzZWxmLnNlbGVjdGVkVGhpbmcuZGF0YS5hdHRhY2htZW50cztcclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmF0dGFjaG1lbnRzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0IGFsbCBhdHRhY2htZW50cyB0byBlZGl0aW5nID0gZmFsc2VcclxuICAgIHRoaXMuc3RvcEVkaXRpbmdBbGwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5hdHRhY2htZW50cykge1xyXG4gICAgICAgICAgICAgICAgXy5lYWNoKHNlbGYuYXR0YWNobWVudHMsIGZ1bmN0aW9uIChhdHQpIHsgYXR0LmVkaXRpbmcgPSBmYWxzZTsgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5lZGl0aW5nQW5JdGVtID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuYXR0YWNobWVudHMgJiYgXy5maW5kV2hlcmUoc2VsZi5hdHRhY2htZW50cywge2VkaXRpbmc6IHRydWV9KSAhPT0gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzZXQgYWxsIG90aGVyIGF0dGFjaG1lbnRzIHRvIGVkaXRpbmcgPSBmYWxzZVxyXG4gICAgdGhpcy5zdGFydEVkaXRpbmcgPSBmdW5jdGlvbihhdHRhY2htZW50KSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc2VsZi5zdG9wRWRpdGluZ0FsbCgpO1xyXG4gICAgICAgICAgICBhdHRhY2htZW50LmVkaXRpbmcgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNhdmVJdGVtID0gZnVuY3Rpb24oYXR0YWNobWVudCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGF0dGFjaG1lbnQuZWRpdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzZWxmLnNhdmVBdHRhY2htZW50cygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNhdmVBdHRhY2htZW50cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzYXZlQXR0YWNobWVudHMsIHNlbGVjdGVkOiAnICsgc2VsZi5zZWxlY3RlZFRoaW5nKTtcclxuICAgICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWRUaGluZykge1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2VsZi5zZWxlY3RlZFRoaW5nLmRhdGEsICdhdHRhY2htZW50cycsIHNlbGYuYXR0YWNobWVudHMpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWFwLmdldEF1dG9zYXZlKCkuc2F2ZU5vdygnZWRpdF9hdHRhY2htZW50cycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxpc3RBdHRhY2htZW50cyA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgdmFyIGF0dHMgPSBfLndoZXJlKHNlbGYuYXR0YWNobWVudHMsIHt0eXBlOiB0eXBlfSk7XHJcbiAgICAgICAgcmV0dXJuIGF0dHM7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYWRkQXR0YWNobWVudCA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgdmFyIGl0ZW0gPSB7IHR5cGU6IHR5cGUsIGVkaXRpbmc6IHRydWUgfTtcclxuICAgICAgICBpZiAodHlwZSA9PSAnbm90ZScpIHtcclxuICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgdGV4dDogJycsIHVybDogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICdsaW5rJykge1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyBsYWJlbDogJycsIHVybDogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICd0YXNrJykge1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyB0ZXh0OiAnJyB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gJ2RvYycpIHtcclxuICAgICAgICAgICAgc2VsZi5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgbmFtZTogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICdtYXAnKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYXR0YWNobWVudHMucHVzaChfLmV4dGVuZChpdGVtLCB7IG1hcFJlZjogeyBpZDogMCwgbmFtZTogJycgIH0gfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1ZhbGlkID0gZnVuY3Rpb24oYXR0YWNobWVudCkge1xyXG4gICAgICAgIGlmIChhdHRhY2htZW50LnR5cGUgPT0gJ2xpbmsnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LmxhYmVsICYmIGF0dGFjaG1lbnQudXJsICYmIGF0dGFjaG1lbnQubGFiZWwudHJpbSgpICE9PSAnJyAmJiBhdHRhY2htZW50LnVybC50cmltKCkgIT09ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhdHRhY2htZW50LnR5cGUgPT0gJ25vdGUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LnRleHQgJiYgYXR0YWNobWVudC50ZXh0LnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PSAndGFzaycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0dGFjaG1lbnQudGV4dCAmJiBhdHRhY2htZW50LnRleHQudHJpbSgpICE9PSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYXR0YWNobWVudC50eXBlID09ICdkb2MnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50Lm5hbWUgJiYgYXR0YWNobWVudC5uYW1lLnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PSAnbWFwJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYXR0YWNobWVudC5tYXBSZWYgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IG51bGwgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGVsZXRlQXR0YWNobWVudCA9IGZ1bmN0aW9uIChhdHQpIHtcclxuICAgICAgICB2YXIgdHlwZUxhYmVsID0gXy5maW5kV2hlcmUoc2VsZi5hdHRhY2htZW50VHlwZXMsIHsgbmFtZTogYXR0LnR5cGUgfSkubGFiZWxTaW5ndWxhcjtcclxuICAgICAgICBpZiAoY29uZmlybSAoJ0RlbGV0ZSAnICsgdHlwZUxhYmVsICsgJz8nKSkge1xyXG4gICAgICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZihzZWxmLmF0dGFjaG1lbnRzLCBhdHQpO1xyXG4gICAgICAgICAgICBzZWxmLmF0dGFjaG1lbnRzLnNwbGljZShpLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHF1ZXJ5IHNlcnZlciBmb3IgbWFwcyBjb250YWluaW5nIHRoZSBnaXZlbiB0ZXh0IGluIHRoZSBtYXAgbmFtZVxyXG4gICAgdGhpcy5nZXRPdGhlck1hcHMgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICAvLyBOQjogdGhpcyBVUkwgaXMgY29uc3RydWN0ZWQgdG8gbWF0Y2ggdGhlIG9uZSBnZW5lcmF0ZWQgYnkgdGhlIHNlYXJjaCBmb3JtIG9uIHRoZSBtYXBzIHBhZ2UuLi5cclxuICAgICAgICB2YXIgdXJsID0gJy9tYXBzL3Zpc2libGVfbWFwcy5qc29uP3V0Zjg9JUUyJTlDJTkzJnElNUJuYW1lX2NvbnQlNUQ9JyArIHZpZXdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5tYXBzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm90aGVyTWFwU2VsZWN0ZWQgPSBmdW5jdGlvbih2aWV3VmFsdWUsIG1vZGVsVmFsdWUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnb3RoZXJNYXBTZWxlY3RlZCwgdmlld1ZhbHVlOiAnICsgdmlld1ZhbHVlLmlkICsgJywgbW9kZWxWYWx1ZTogJyArIG1vZGVsVmFsdWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmZvcm1hdE90aGVyTWFwID0gZnVuY3Rpb24gKG1vZGVsKSB7XHJcbiAgICAgICAgcmV0dXJuIChtb2RlbCA/IG1vZGVsLm5hbWUgOiAnJyk7XHJcbiAgICB9O1xyXG5cclxufTsiLCIvLyBmdW5jdGlvbnMgaGFuZGxpbmcgZWRpdG9yIGF1dG9zYXZlIGZ1bmN0aW9uXHJcblxyXG5TYW5kYmFua0VkaXRvci5BdXRvc2F2ZSA9IGZ1bmN0aW9uKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHZhciAkaHR0cCA9IHtcclxuICAgICAgICBwdXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHt9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBjaGFuZ2VUeXBlcyA9IFtdO1xyXG5cclxuICAgIHRoaXMuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBkbyBhIHNhdmUgbmV4dCB0aW1lIHRoZSBzZXQgaW50ZXJ2YWwgcGFzc2VzIHdpdGggbm8gc2F2ZSByZXF1ZXN0c1xyXG4gICAgdGhpcy5zYXZlID0gZnVuY3Rpb24oY2hhbmdlVHlwZSkge1xyXG4gICAgICAgIGNoYW5nZVR5cGVzLnB1c2goY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgZGVsYXllZEF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRvIGEgc2F2ZSByaWdodCBub3dcclxuICAgIHRoaXMuc2F2ZU5vdyA9IGZ1bmN0aW9uKGNoYW5nZVR5cGUpIHtcclxuICAgICAgICBjaGFuZ2VUeXBlcy5wdXNoKGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIGF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRvbid0IGxldCBhdXRvc2F2ZSBiZSB0cmlnZ2VyZWQgbW9yZSB0aGFuIGV2ZXJ5IE4gbWlsbGlzZWNvbmRzLi4uXHJcbiAgICB2YXIgZGVsYXllZEF1dG9zYXZlID0gXy5kZWJvdW5jZShhdXRvc2F2ZSwgMjAwMCk7XHJcblxyXG4gICAgLy8gY29tcGlsZSB0aGUgY3VycmVudCBsaXN0IG9mIGNoYW5nZSB0eXBlIGRlc2NyaXB0aW9ucywgcHJvY2VzcyB0aGVtIFxyXG4gICAgLy8gdG8gcmVtb3ZlIGR1cGxpY2F0ZXMsIGFuZCBzYXZlIHRoZSBjdXJyZW50IGRhdGFcclxuICAgIGZ1bmN0aW9uIGF1dG9zYXZlKCkge1xyXG4gICAgICAgIC8vIHN0b3AgcmlnaHQgaGVyZSBpZiB3ZSdyZSBpbiB0aGUgc2FuZGJveCBhbmQvb3Igd2UgZG9uJ3QgaGF2ZSBlZGl0IHBlcm1pc3Npb25zXHJcbiAgICAgICAgaWYgKCRzY29wZS5zYW5kYm94IHx8ICEkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWNoYW5nZVR5cGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYXV0b3NhdmU6IG5vdGhpbmcgdG8gc2F2ZSEnKTsgLy8gc2hvdWxkbid0IGhhcHBlblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkZS1kdXBlIHRoZSBsaXN0IG9mIGNoYW5nZSB0eXBlc1xyXG4gICAgICAgIHZhciBjaGFuZ2VMaXN0ID0gXy51bmlxKGNoYW5nZVR5cGVzKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjaGFuZ2VMaXN0OiAnICsgY2hhbmdlTGlzdCk7XHJcbiAgICAgICAgLy8gZG9uJ3Qgc2hvdyBtb3ZlIGV2ZW50cyB1bmxlc3MgdGhhdCdzIGFsbCB3ZSBoYXZlXHJcbiAgICAgICAgdmFyIGNoYW5nZUxpc3RXaXRob3V0TW92ZXMgPSBfLndpdGhvdXQoY2hhbmdlTGlzdCwgJ21vdmUnKTtcclxuICAgICAgICBpZiAoY2hhbmdlTGlzdFdpdGhvdXRNb3Zlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZUxpc3QgPSBjaGFuZ2VMaXN0V2l0aG91dE1vdmVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjaGFuZ2VMaXN0IHdpdGhvdXQgbW92ZXM6ICcgKyBjaGFuZ2VMaXN0KTtcclxuICAgICAgICAvLyBnZXQgZGVzY3JpcHRpb25zXHJcbiAgICAgICAgdmFyIGRlc2NyaXB0aW9uTGlzdCA9IF8ubWFwKGNoYW5nZUxpc3QsIGZ1bmN0aW9uKGN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfLnJlc3VsdChjaGFuZ2VEZXNjcmlwdGlvbnMsIGN0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnYXV0b3NhdmUsIGNoYW5nZUxpc3Q6ICcgKyBjaGFuZ2VMaXN0ICsgJywgZGVzY3JpcHRpb25MaXN0OiAnICsgZGVzY3JpcHRpb25MaXN0KTtcclxuICAgICAgICB2YXIgcG9zdERhdGEgPSB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiAkc2NvcGUubWFwVGl0bGUsXHJcbiAgICAgICAgICAgIFwiZGF0YVwiOiBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnRvSnNvbigpLFxyXG4gICAgICAgICAgICBcInN0YXRlX2RhdGFcIjogSlNPTi5zdHJpbmdpZnkobWFwLmdldFVpKCkuZ2V0U3RhdGVEYXRhKCkpLFxyXG4gICAgICAgICAgICBcImVkaXRvcl9vcHRpb25zXCI6IEpTT04uc3RyaW5naWZ5KG1hcC5nZXRVaSgpLmdldE1hcEVkaXRvck9wdGlvbnMoKSksXHJcbiAgICAgICAgICAgIFwicHJlc2VudGVyX3NsaWRlc1wiOiBtYXAuZ2V0UHJlc2VudGVyKCkuZ2V0U2xpZGVDb3VudCgpLFxyXG4gICAgICAgICAgICBcImFjdGl2aXR5X3NsaWRlc1wiOiBtYXAuZ2V0UHJlc2VudGVyKCkuZ2V0QWN0aXZpdHlTbGlkZUNvdW50KCksXHJcbiAgICAgICAgICAgIFwiY2hhbmdlX3R5cGVcIjogY2hhbmdlTGlzdC5qb2luKCc7JyksXHJcbiAgICAgICAgICAgIFwiY2hhbmdlX2Rlc2NyaXB0aW9uXCI6IGRlc2NyaXB0aW9uTGlzdC5qb2luKCc7ICcpLFxyXG4gICAgICAgICAgICBcInRodW1ibmFpbF9wbmdcIjogbWFwLmdldFByZXNlbnRlcigpLmdldE1hcFRodW1ibmFpbCgpXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdXJsID0gJHNjb3BlLm1hcFVybCArICcuanNvbic7XHJcblxyXG4gICAgICAgICRzY29wZS51cGRhdGVFZGl0U3RhdHVzKCRzY29wZS5TQVZJTkcpO1xyXG4gICAgICAgICRodHRwLnB1dCh1cmwsIHBvc3REYXRhKS50aGVuKFxyXG4gICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVFZGl0U3RhdHVzKCRzY29wZS5TQVZFX09LKTtcclxuICAgICAgICAgICAgICAgIC8vIGxvYWQgcmV0dXJuZWQgZGF0YSBmb3IgYW5hbHl0aWNzLCBwb2ludHMsIGJhZGdlcywgdmVyc2lvbnNcclxuICAgICAgICAgICAgICAgICRzY29wZS5tYXAubG9hZE1hcEV4dHJhRGF0YShyZXNwb25zZS5kYXRhLm1hcCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUVkaXRTdGF0dXMoJHNjb3BlLlNBVkVfRkFJTEVEKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBoYW5kbGUgbW9kZWwgY2hhbmdlcyAtIHRyaWdnZXIgYXV0b3NhdmUgLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdmFyIGNoYW5nZURlc2NyaXB0aW9ucyA9IHtcclxuICAgICAgICBtb3ZlOiAnTW92ZWQgT2JqZWN0cycsXHJcbiAgICAgICAgdW5kb19yZWRvOiAnUGVyZm9ybWVkIFVuZG8vUmVkbycsXHJcbiAgICAgICAgZWRpdF90aXRsZTogJ0VkaXRlZCBNZXRhTWFwIFRpdGxlJyxcclxuICAgICAgICBlZGl0X2Rlc2NyaXB0aW9uOiAnRWRpdGVkIE1ldGFNYXAgRGVzY3JpcHRpb24nLFxyXG4gICAgICAgIGVkaXRfdXNlcnRhZ3M6ICdFZGl0IE1ldGFNYXAgVGFncycsXHJcbiAgICAgICAgZWRpdF9kOiAnRWRpdGVkIERpc3RpbmN0aW9ucycsXHJcbiAgICAgICAgZWRpdF9zOiAnRWRpdGVkIFN5c3RlbXMnLFxyXG4gICAgICAgIGVkaXRfcjogJ0VkaXRlZCBSZWxhdGlvbnNoaXBzJyxcclxuICAgICAgICBlZGl0X3A6ICdFZGl0ZWQgUGVyc3BlY3RpdmVzJyxcclxuICAgICAgICBhZGRfdGhpbmc6ICdBZGRlZCBJZGVhcycsXHJcbiAgICAgICAgcmVuYW1lX3RoaW5nOiAnUmVuYW1lZCBJZGVhcycsXHJcbiAgICAgICAgZGVsZXRlX3RoaW5nOiAnRGVsZXRlZCBJZGVhcycsXHJcbiAgICAgICAgZWRpdF9hdHRhY2htZW50czogJ0VkaXRlZCBBdHRhY2htZW50cycsXHJcbiAgICAgICAgZWRpdF9wcmVzZW50ZXI6ICdFZGl0ZWQgUHJlc2VudGVyIFNsaWRlcycsXHJcbiAgICAgICAgZWRpdF9nZW5lcmF0b3I6ICdJbnNlcnRlZCBJZGVhcyBmcm9tIFRoaW5rUXVlcnknLFxyXG4gICAgICAgIGVkaXRfc3RhbmRhcmRzOiAnRWRpdGVkIExpbmtzIHRvIENvbW1vbiBDb3JlIFN0YW5kYXJkcydcclxuICAgIH07XHJcblxyXG4gICAgLy8gZSBpcyBhIGdvLkNoYW5nZWRFdmVudFxyXG4gICAgdGhpcy5tb2RlbENoYW5nZWQgPSBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgIGlmICghc2VsZi5zYXZlT25Nb2RlbENoYW5nZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGNoYW5nZVR5cGUgPSBudWxsO1xyXG4gICAgICAgIHZhciBjaGFuZ2VEZXNjcmlwdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChlLnByb3BlcnR5TmFtZSA9PSAndHlwZScpIHtcclxuICAgICAgICAgICAgLy8gY2hhbmdlIFIgdHlwZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCxuLDEsbywyLEEsMyxyLDQsciw1LG8sNix3LDcsc10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLHQsMSxvXSAsIHByb3BlcnR5TmFtZTogdHlwZVxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcic7XHJcbiAgICAgICAgICAgIGNoYW5nZURlc2NyaXB0aW9uID0gJ0NoYW5nZWQgUmVsYXRpb25zaGlwIFR5cGVzJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdsYXlvdXQnKSB7XHJcbiAgICAgICAgICAgIC8vIGNoYW5nZSBzeXN0ZW0gbGF5b3V0XHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLGwsMSxlLDIsZiwzLHRdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCxyLDEsaSwyLGcsMyxoLDQsdF0gLCBwcm9wZXJ0eU5hbWU6IGxheW91dCBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3MnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5jaGFuZ2UgPT0gZ28uQ2hhbmdlZEV2ZW50Lkluc2VydCAmJiBwcm9wZXJ0eUVxdWFscyhlLm5ld1ZhbHVlLCAnZnJvbVBvcnQnLCAnUicpKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogMSwgbmV3VmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsNjAwNSxmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUix0b1BvcnQsUF0gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXlcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtUb1BvcnRJZCwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsUF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLFJdICwgcHJvcGVydHlOYW1lOiB0b1BvcnQgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9yJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5SZW1vdmUgJiYgcHJvcGVydHlFcXVhbHMoZS5vbGRWYWx1ZSwgJ2Zyb21Qb3J0JywgJ1InKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0RhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogMSwgb2xkVmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsNjAwNSxmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUix0b1BvcnQsUl0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnbGlua0RhdGFBcnJheScpIHtcclxuICAgICAgICAgICAgLy8gY2hhbmdlIFAvRCBsaW5rc1xyXG4gICAgICAgICAgICAvLyBhZGQgUCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogMiwgbmV3VmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsMTkxMjIsZnJvbSwtMix0bywtNCxsYWJlbEtleXMsLGZyb21Qb3J0LFAsdG9Qb3J0LFBdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0NhdGVnb3J5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsUF0gLCBwcm9wZXJ0eU5hbWU6IGNhdGVnb3J5IFxyXG4gICAgICAgICAgICAvLyBkZWxldGUgUCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiAyLCBvbGRWYWx1ZTogW3R5cGUsbm9BcnJvd3MsX19nb2hhc2hpZCwxOTEyMixmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUCx0b1BvcnQsUCxjYXRlZ29yeSxQXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIC8vIGFkZCBEIGxpbmtcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiAxLCBuZXdWYWx1ZTogW2Zyb20sLTcsdG8sLTUsZnJvbVBvcnQsRCx0b1BvcnQsRCxjYXRlZ29yeSxELF9fZ29oYXNoaWQsMTk1MjJdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyByZW1vdmUgRCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiAxLCBvbGRWYWx1ZTogW2Zyb20sLTcsdG8sLTUsZnJvbVBvcnQsRCx0b1BvcnQsRCxjYXRlZ29yeSxELF9fZ29oYXNoaWQsMTk1MjJdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheSBcclxuXHJcbiAgICAgICAgICAgIGlmICgoZS5uZXdWYWx1ZSAmJiBlLm5ld1ZhbHVlLmNhdGVnb3J5ID09ICdQJykgfHxcclxuICAgICAgICAgICAgICAgIChlLm9sZFZhbHVlICYmIGUub2xkVmFsdWUuY2F0ZWdvcnkgPT0gJ1AnKSkge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3AnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKChlLm5ld1ZhbHVlICYmIGUubmV3VmFsdWUuY2F0ZWdvcnkgPT0gJ0QnKSB8fFxyXG4gICAgICAgICAgICAgICAgKGUub2xkVmFsdWUgJiYgZS5vbGRWYWx1ZS5jYXRlZ29yeSA9PSAnRCcpKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfZCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdjYXRlZ29yeScpIHtcclxuICAgICAgICAgICAgLy8gYWRkIFAgbGlua1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZWQsIG1vZGVsQ2hhbmdlOiBsaW5rQ2F0ZWdvcnksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCxQXSAsIHByb3BlcnR5TmFtZTogY2F0ZWdvcnkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9wJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdncm91cCcpIHtcclxuICAgICAgICAgICAgLy8gZHJhZyBpbnRvIFNcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG4gICAgICAgICAgICAvLyByZW9yZGVyIHBhcnRcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG4gICAgICAgICAgICAvLyBkcmFnIHRvIERcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG5cclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3MnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ25vZGVEYXRhQXJyYXknICYmIGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5JbnNlcnQgJiYgcHJvcGVydHlFcXVhbHMoZS5uZXdWYWx1ZSwgJ2lzR3JvdXAnLCB0cnVlKSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiA1LCBuZXdWYWx1ZTogW3RleHQsTmV3IElkZWEsaXNHcm91cCx0cnVlLGxldmVsLDAsbGF5b3V0LGxlZnQsc0V4cGFuZGVkLHRydWUscEV4cGFuZGVkLGZhbHNlLGRFeHBhbmRlZCxmYWxzZSxfX2dvaGFzaGlkLDU0Njg4LGdyb3VwLCxrZXksLTddICwgcHJvcGVydHlOYW1lOiBub2RlRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsMiwxLDIsMiw4LDMsLiw0LDUsNSw2LDYsMiw3LDUsOCwgLDksLSwxMCwxLDExLDQsMTIsOSwxMywuLDE0LDYsMTUsOCwxNiw3LDE3LDVdICwgcHJvcGVydHlOYW1lOiBsb2MgXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogY2hpbGRyZW4gXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnYWRkX3RoaW5nJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICd0ZXh0Jykge1xyXG4gICAgICAgICAgICAvLyBtb3ZlIHRoaW5nXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLGIsMSxiLDIsYiwzLGIsNCxiXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsYSwxLGEsMixhLDMsYSw0LGFdICwgcHJvcGVydHlOYW1lOiB0ZXh0IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ3JlbmFtZV90aGluZyc7XHJcbiAgICAgICAgICAgIGNoYW5nZURlc2NyaXB0aW9uID0gJ1JlbmFtZWQgSWRlYXMnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ25vZGVEYXRhQXJyYXknICYmIGUuY2hhbmdlID09IGdvLkNoYW5nZWRFdmVudC5SZW1vdmUgJiYgcHJvcGVydHlFcXVhbHMoZS5vbGRWYWx1ZSwgJ2lzR3JvdXAnLCB0cnVlKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlJlbW92ZSwgb2xkUGFyYW06IDUsIG9sZFZhbHVlOiBbdGV4dCxOZXcgSWRlYSxpc0dyb3VwLHRydWUsbGV2ZWwsMCxsYXlvdXQsbGVmdCxzRXhwYW5kZWQsdHJ1ZSxwRXhwYW5kZWQsZmFsc2UsZEV4cGFuZGVkLGZhbHNlLF9fZ29oYXNoaWQsNTQ2ODgsZ3JvdXAsLGtleSwtNyxsb2MsMjI4LjU2MjUgLTE0OS42ODc1LGNoaWxkcmVuLDAsYXR0YWNobWVudHMsXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IG5vZGVEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZGVsZXRlX3RoaW5nJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdub2RlRGF0YUFycmF5JyAmJiBlLmNoYW5nZSA9PSBnby5DaGFuZ2VkRXZlbnQuSW5zZXJ0ICYmIHByb3BlcnR5RXF1YWxzKGUubmV3VmFsdWUsICdpc0dyb3VwJywgZmFsc2UpKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBzbGlkZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbm9kZURhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuSW5zZXJ0LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFtdICwgbmV3UGFyYW06IDUsIG5ld1ZhbHVlOiBba2V5LHNsaWRlLTAsY2F0ZWdvcnksc2xpZGUsaW5kZXgsMCxpc0dyb3VwLGZhbHNlLHdpZHRoLDIwMCxoZWlnaHQsMjAwLGxvYywxNTYuNTYyNSAtOTcuNjg3NSxsZXZlbCwwLGNoaWxkcmVuLDAsdGl0bGUsLG5vdGVzLCxfX2dvaGFzaGlkLDYzODc3XSAsIHByb3BlcnR5TmFtZTogbm9kZURhdGFBcnJheSBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3ByZXNlbnRlcic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PSAnbm9kZURhdGFBcnJheScgJiYgZS5jaGFuZ2UgPT0gZ28uQ2hhbmdlZEV2ZW50LlJlbW92ZSAmJiBwcm9wZXJ0eUVxdWFscyhlLm9sZFZhbHVlLCAnaXNHcm91cCcsIGZhbHNlKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgc2xpZGVcclxuICAgICAgICAgICAgLy9tb2RlbENoYW5nZTogbm9kZURhdGFBcnJheSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUmVtb3ZlLCBvbGRQYXJhbTogNSwgb2xkVmFsdWU6IFtrZXksc2xpZGUtMCxjYXRlZ29yeSxzbGlkZSxpbmRleCwwLGlzR3JvdXAsZmFsc2Usd2lkdGgsMjAwLGhlaWdodCwyMDAsbG9jLDE1Ni41NjI1IC05Ny42ODc1LGxldmVsLDAsY2hpbGRyZW4sMCx0aXRsZSwsbm90ZXMsLF9fZ29oYXNoaWQsNjM4NzcsJCRoYXNoS2V5LDBYTl0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBub2RlRGF0YUFycmF5IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcHJlc2VudGVyJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdsb2MnIHx8IGUucHJvcGVydHlOYW1lID09ICd3aWR0aCcgfHwgZS5wcm9wZXJ0eU5hbWUgPT0gJ2hlaWdodCcpIHtcclxuICAgICAgICAgICAgLy8gbW92ZSB0aGluZyBvciByZXNpemUgc2xpZGVcclxuICAgICAgICAgICAgLy8gbW92ZSBzbGlkZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCwyLDEsNCwyLDMsMywgLDQsLSw1LDEsNiwyLDcsOF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDIsMSw0LDIsMywzLCAsNCwtLDUsMSw2LDIsNyw3XSAsIHByb3BlcnR5TmFtZTogbG9jIFxyXG4gICAgICAgICAgICAvLyByZXNpemUgc2xpZGVcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFtdICwgcHJvcGVydHlOYW1lOiBoZWlnaHQgXHJcbiAgICAgICAgICAgIC8vIG1vdmUgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsNCwxLDcsMiw5LDMsLiw0LDgsNSw3LDYsNSw3LCAsOCwtLDksMSwxMCwyLDExLDIsMTIsLiwxMyw4LDE0LDcsMTUsNV0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDUsMSw0LDIsMCwzLC4sNCwzLDUsMSw2LDIsNyw1LDgsICw5LC0sMTAsMSwxMSwyLDEyLDEsMTMsLiwxNCwxLDE1LDgsMTYsNywxNyw1XSAsICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ21vdmUnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ2xldmVsJyB8fCBlLnByb3BlcnR5TmFtZSA9PSAnY2hpbGRyZW4nKSB7XHJcbiAgICAgICAgICAgIC8vIHRoZXNlIGF0dHJpYnV0ZXMgYXJlIHVwZGF0ZWQgYXMgYSByZXN1bHQgb2Ygb3RoZXIgYWN0aW9uczsgaWdub3JlXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT0gJ2F0dGFjaG1lbnRzJykge1xyXG4gICAgICAgICAgICAvLyBlZGl0ZWQgYXR0YWNobWVudHNcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X2F0dGFjaG1lbnRzJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdzRXhwYW5kZWQnIHx8IGUucHJvcGVydHlOYW1lID09ICdwRXhwYW5kZWQnKSB7XHJcbiAgICAgICAgICAgIC8vIGlnbm9yZSBleHBhbmQvY29sbGFwc2VcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdtb3ZlJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09ICdGaW5pc2hlZFVuZG8nIHx8IGUucHJvcGVydHlOYW1lID09ICdGaW5pc2hlZFJlZG8nKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAndW5kb19yZWRvJztcclxuICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUuY2hhbmdlICE9IGdvLkNoYW5nZWRFdmVudC5UcmFuc2FjdGlvbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogJyArIGUubW9kZWxDaGFuZ2UgK1xyXG4gICAgICAgICAgICAgICAgJywgY2hhbmdlOiAnICsgZS5jaGFuZ2UgK1xyXG4gICAgICAgICAgICAgICAgJywgb2xkUGFyYW06ICcgKyBlLm9sZFBhcmFtICtcclxuICAgICAgICAgICAgICAgICcsIG9sZFZhbHVlOiBbJyArIF8ucGFpcnMoZS5vbGRWYWx1ZSkgKyAnXSAnICtcclxuICAgICAgICAgICAgICAgICcsIG5ld1BhcmFtOiAnICsgZS5uZXdQYXJhbSArXHJcbiAgICAgICAgICAgICAgICAnLCBuZXdWYWx1ZTogWycgKyBfLnBhaXJzKGUubmV3VmFsdWUpICsgJ10gJyArXHJcbiAgICAgICAgICAgICAgICAnLCBwcm9wZXJ0eU5hbWU6ICcgKyBlLnByb3BlcnR5TmFtZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZVR5cGUpIHtcclxuICAgICAgICAgICAgbWFwLmdldEFuYWx5dGljcygpLnVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY2FsbGluZyBkZWxheWVkQXV0b3NhdmUsIGNoYW5nZVR5cGU6ICcgKyBjaGFuZ2VUeXBlKTtcclxuICAgICAgICAgICAgc2VsZi5zYXZlKGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gY29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIGNoZWNraW5nIHByb3BlcnRpZXNcclxuICAgIGZ1bmN0aW9uIHByb3BlcnR5RXF1YWxzKG9iaiwga2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBvYmogIT09IG51bGwgJiYgXy5oYXMob2JqLCBrZXkpICYmIF8ucmVzdWx0KG9iaiwga2V5KSA9PSB2YWx1ZTtcclxuICAgIH1cclxuXHJcblxyXG59OyIsIi8vIG1haW4gY29udHJvbGxlciBjbGFzc1xyXG5cclxud2luZG93LlNhbmRiYW5rRWRpdG9yID0ge307XHJcblxyXG53aW5kb3cuTWFwRWRpdG9yQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSkge1xyXG5cclxuICAgICRzY29wZS5tYXAgPSBuZXcgU2FuZGJhbmtFZGl0b3IuTWFwKCRzY29wZSk7XHJcblxyXG4gICAgLy8gd2luZG93Lm1hcERhdGEgaXMgc2V0IGluIF9mb3JtIHZpZXdcclxuICAgIHZhciBtZXRhZGF0YSA9IHdpbmRvdy5tYXBEYXRhLm1hcC5tZXRhZGF0YTtcclxuICAgICRzY29wZS5zYW5kYm94ID0gbWV0YWRhdGEuc2FuZGJveDtcclxuICAgICRzY29wZS5tYXBEYXRhID0gd2luZG93Lm1hcERhdGEubWFwLmRhdGE7IC8vIHRoaXMgZ2V0cyBvdmVyd3JpdHRlbiBieSBsb2FkKCkgdW5sZXNzIHdlIGFyZSBpbiB0aGUgc2FuZGJveCB3aXRoIG5vIG1hcCBJRFxyXG4gICAgJHNjb3BlLm1hcElkID0gbWV0YWRhdGEuaWQ7XHJcbiAgICAkc2NvcGUubWFwVGl0bGUgPSBtZXRhZGF0YS5uYW1lO1xyXG4gICAgJHNjb3BlLm1hcFVzZXJUYWdzID0gbWV0YWRhdGEudXNlclRhZ3M7XHJcbiAgICAkc2NvcGUubWFwVXJsID0gbWV0YWRhdGEudXJsO1xyXG4gICAgJHNjb3BlLmNhbkVkaXQgPSBtZXRhZGF0YS5jYW5FZGl0O1xyXG4gICAgJHNjb3BlLnVwZGF0ZWRBdCA9IG1ldGFkYXRhLnVwZGF0ZWRBdDtcclxuICAgICRzY29wZS51cGRhdGVkQnkgPSBtZXRhZGF0YS51cGRhdGVkQnk7IC8vIElEXHJcbiAgICAkc2NvcGUudXBkYXRlZEJ5TmFtZSA9IG1ldGFkYXRhLnVwZGF0ZWRCeU5hbWU7XHJcblxyXG4gICAgJHNjb3BlLmVkaXRpbmdUaXRsZSA9IGZhbHNlO1xyXG5cclxuICAgICRzY29wZS5zaG93SW1hZ2VFeHBvcnQgPSBmYWxzZTtcclxuICAgICRzY29wZS5pbWFnZUV4cG9ydExvYWRpbmcgPSB0cnVlO1xyXG5cclxuICAgICRzY29wZS5jdXJyZW50VGFiID0gbnVsbDtcclxuXHJcbiAgICAvLyBvdmVycmlkZSBwYXJlbnQgc2NvcGUgKHNlZSB1c2VyLmpzKSBzaW5jZSB3ZSdyZSBlZGl0aW5nIGEgbWFwXHJcbiAgICAkc2NvcGUuY2NzVGFnZ2luZy5tYXBJZCA9ICRzY29wZS5tYXBJZDtcclxuXHJcbiAgICAkc2NvcGUubWF5YmVTdGFydEVkaXRpbmdUaXRsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZWRpdGluZ1RpdGxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5kb25lRWRpdGluZ1RpdGxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZG9uZUVkaXRpbmdUaXRsZScpO1xyXG4gICAgICAgICRzY29wZS5lZGl0aW5nVGl0bGUgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUubWFwLmdldEF1dG9zYXZlKCkuc2F2ZSgnZWRpdF90aXRsZScpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZWRpdGluZ1RpdGxlS2V5cHJlc3MgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmRvbmVFZGl0aW5nVGl0bGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5wcmludCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHdpbmRvdy5wcmludCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gc2F2ZSBzYW5kYm94IG1hcCAoc2lnbiB1cC9zaWduIGluKSAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuc2F2ZVNhbmRib3hNYXAgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZV9zYW5kYm94X3NhdmVfbW9kYWwuaHRtbCcsIC8vIHNlZSB2aWV3cy91c2Vycy9fdGVtcGxhdGVfc2FuZGJveF9zYXZlX21vZGFsXHJcbiAgICAgICAgICAgIGJhY2tkcm9wOiAnc3RhdGljJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogc2FuZGJveFNhdmVNb2RhbEN0cmwsXHJcbiAgICAgICAgICAgIHdpbmRvd0NsYXNzOiAnc2FuZGJveC1zYXZlLW1vZGFsJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgb3V0ZXJTY29wZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtYXA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUubWFwO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVzZXJQcm9maWxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBzYW5kYm94U2F2ZU1vZGFsQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIG91dGVyU2NvcGUsIG1hcCwgdXNlclByb2ZpbGUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1hcCA9IG1hcDtcclxuICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUgPSB1c2VyUHJvZmlsZTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1hcERhdGEgPSBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnRvSnNvbigpO1xyXG4gICAgICAgICRzY29wZS50aHVtYm5haWxQbmcgPSBtYXAuZ2V0UHJlc2VudGVyKCkuZ2V0TWFwVGh1bWJuYWlsKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldERlZmF1bHRMb2dpbkRhdGEoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBlbWFpbDogJycsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogJydcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRoaXMgc3RydWN0dXJlIGlzIHVzZWQgdG8gc3RvcmUgdGhlIGZvcm0gZGF0YSwgYXMgd2VsbCBhcyB0aGUgdmFsaWRhdGlvbiBlcnJvcnMgcmV0dXJuZWQgZnJvbSB0aGUgc2VydmVyLi4uXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RGVmYXVsdFNpZ251cERhdGEoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBlbWFpbDogJycsXHJcbiAgICAgICAgICAgICAgICBmaXJzdF9uYW1lOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RfbmFtZTogJycsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogJycsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246ICcnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUubG9naW5EYXRhID0gZ2V0RGVmYXVsdExvZ2luRGF0YSgpO1xyXG4gICAgICAgICRzY29wZS5sb2dpbkVycm9yID0gJyc7XHJcblxyXG4gICAgICAgICRzY29wZS5zaWdudXBEYXRhID0gZ2V0RGVmYXVsdFNpZ251cERhdGEoKTtcclxuICAgICAgICAkc2NvcGUuc2lnbnVwRXJyb3JzID0gZ2V0RGVmYXVsdFNpZ251cERhdGEoKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmRvTG9naW4gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmxvZ2luRXJyb3JzID0gZ2V0RGVmYXVsdExvZ2luRGF0YSgpOyAvLyByZXNldCBlcnJvcnNcclxuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3NpZ25faW4uanNvbicsIHtcclxuICAgICAgICAgICAgICAgIHVzZXI6ICRzY29wZS5sb2dpbkRhdGFcclxuICAgICAgICAgICAgfSkudGhlbihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YSBpcyB7aWQ6WFgsIC4uLn1cclxuICAgICAgICAgICAgICAgICAgICBvdXRlclNjb3BlLnNldFVzZXJJZChyZXNwb25zZS5kYXRhLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRlclNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJQcm9maWxlID0gb3V0ZXJTY29wZS51c2VyUHJvZmlsZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRhdGEgaXMge1wiZXJyb3JcIjogXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvZ2luRXJyb3IgPSByZXNwb25zZS5kYXRhLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmRvU2lnbnVwID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zaWdudXBFcnJvcnMgPSBnZXREZWZhdWx0U2lnbnVwRGF0YSgpOyAvLyByZXNldCBlcnJvcnNcclxuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3VzZXJzLmpzb24nLCB7XHJcbiAgICAgICAgICAgICAgICB1c2VyOiAkc2NvcGUuc2lnbnVwRGF0YVxyXG4gICAgICAgICAgICB9KS50aGVuKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIGlzIG5ldyB1c2VyIElEXHJcbiAgICAgICAgICAgICAgICAgICAgb3V0ZXJTY29wZS5zZXRVc2VySWQocmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0ZXJTY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyUHJvZmlsZSA9IG91dGVyU2NvcGUudXNlclByb2ZpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIGlzIGUuZy4ge1wiZmlyc3RfbmFtZVwiOltcImNhbid0IGJlIGJsYW5rXCJdLCAuLi59XHJcbiAgICAgICAgICAgICAgICAgICAgXy5lYWNoKF8ua2V5cyhyZXNwb25zZS5kYXRhKSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zaWdudXBFcnJvcnNba2V5XSA9IHJlc3BvbnNlLmRhdGFba2V5XS5qb2luKCc7ICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tIGVkaXQgc3RhdHVzIG1lc3NhZ2UgZm9yIGhlYWRlciBiYXIgLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLmVkaXRTdGF0dXMgPSAnJztcclxuXHJcbiAgICAkc2NvcGUuTEFTVF9VUERBVEVEID0gJyc7XHJcbiAgICAkc2NvcGUuUkVBRF9PTkxZID0gJ1ZpZXcgb25seSc7XHJcbiAgICAkc2NvcGUuU0FWSU5HID0gJ1NhdmluZy4uLic7XHJcbiAgICAkc2NvcGUuU0FWRV9PSyA9ICdBbGwgY2hhbmdlcyBzYXZlZCc7XHJcbiAgICAkc2NvcGUuU0FWRV9GQUlMRUQgPSAnQ2hhbmdlcyBjb3VsZCBub3QgYmUgc2F2ZWQnO1xyXG5cclxuICAgICRzY29wZS51cGRhdGVFZGl0U3RhdHVzID0gZnVuY3Rpb24ocykge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3VwZGF0ZUVkaXRTdGF0dXM6ICcgKyBzKTtcclxuICAgICAgICAkc2NvcGUuZWRpdFN0YXR1cyA9IHM7XHJcbiAgICAgICAgaWYgKHMgPT0gJHNjb3BlLlNBVkVfRkFJTEVEKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCdDaGFuZ2VzIGNvdWxkIG5vdCBiZSBzYXZlZCAtIHBsZWFzZSBjaGVjayB5b3VyIG5ldHdvcmsgY29ubmVjdGlvbi4nKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHMgPT0gJHNjb3BlLkxBU1RfVVBEQVRFRCkge1xyXG4gICAgICAgICAgICB2YXIgdGltZSA9IG1vbWVudCgkc2NvcGUudXBkYXRlZEF0KS5mcm9tTm93KCk7XHJcbiAgICAgICAgICAgIHZhciBieSA9ICcnO1xyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnVwZGF0ZWRCeSA9PSAkc2NvcGUudXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICBieSA9ICdieSBtZSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLnVwZGF0ZWRCeU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGJ5ID0gJ2J5ICcgKyAkc2NvcGUudXBkYXRlZEJ5TmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiBzaG93ICdieSBtZScgb25seSBmb3IgZWRpdGFibGUgc2hhcmVkIG1hcHM/XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuZWRpdFN0YXR1cyA9ICdMYXN0IHVwZGF0ZWQgJyArIHRpbWUgKyAnICcgKyBieTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIExhc3QgZWRpdCB3YXMgWFggYWdvIGJ5IFlZXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUubWFwLmluaXQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghJHNjb3BlLnNhbmRib3gpIHtcclxuICAgICAgICAgICAgICAgIC8vIG92ZXJ2aWV3IGRpYWdyYW1cclxuICAgICAgICAgICAgICAgIC8vdmFyIG92ZXJ2aWV3ID0gZ28uR3JhcGhPYmplY3QubWFrZShnby5PdmVydmlldywgXCJvdmVydmlldy1kaWFncmFtXCIsIHtcclxuICAgICAgICAgICAgICAgIC8vICAgIG9ic2VydmVkOiAkc2NvcGUubWFwLmdldERpYWdyYW0oKSxcclxuICAgICAgICAgICAgICAgIC8vICAgIGNvbnRlbnRBbGlnbm1lbnQ6IGdvLlNwb3QuQ2VudGVyXHJcbiAgICAgICAgICAgICAgICAvL30pO1xyXG4gICAgICAgICAgICAgICAgLy92YXIgb3V0bGluZSA9IG92ZXJ2aWV3LmJveC5lbGVtZW50cy5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgLy9vdXRsaW5lLnN0cm9rZSA9IFwiIzMzM1wiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLm1hcFVybCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm1hcC5sb2FkKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubWFwLmxvYWRGb3JTYW5kYm94KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFkZEJlaGF2aW9ycygpO1xyXG4gICAgICAgICAgICBoYW5kbGVOYXZpZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGhhbmRsZUJhY2tzcGFjZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG1pc2MuIFVJIGJlaGF2aW9ycyBmb3IgdG9vbHRpcHMsIHBvcHVwcyBldGMuXHJcbiAgICAvLyBUT0RPOiBmaWd1cmUgb3V0IHdoaWNoIG9mIHRoZXNlIG5lZWQgdG8gYmUgcmVhcHBsaWVkIGFmdGVyIGR5bmFtaWMgZGF0YSBjaGFuZ2VzIChlLmcuIExlc3NvbkJvb2sgcG9wb3ZlcnMpXHJcbiAgICBmdW5jdGlvbiBhZGRCZWhhdmlvcnMoKSB7XHJcblxyXG4gICAgICAgIC8vIE5PVEU6IHdlIGhhdmUgdG8gdXNlIHJlZ3VsYXIgYm9vdHN0cmFwIHRvb2x0aXBzIGZvciB0b29sYmFyIGJ1dHRvbnMgKGluc3RlYWQgb2YgbmctYm9vdHN0cmFwIG9uZXMpXHJcbiAgICAgICAgLy8gc28gd2UgY2FuIHR1cm4gdGhlbSBvZmYgZm9yIG1vYmlsZS4gV2UgYWxzbyBwdXQgdGhlIHRvb2x0aXBzIG9uIHdyYXBwZXJzIHJhdGhlciB0aGFuIG9uIHRoZSBhY3R1YWwgXHJcbiAgICAgICAgLy8gYnV0dG9ucywgc28gd2UgY2FuIGF2b2lkIHRoZSBpc3N1ZSBvZiBzdHVjayB0b29sdGlwcyBpZiBhIGJ1dHRvbiBnZXRzIGRpc2FibGVkIHdoaWxlIHRoZSB0b29sdGlwIGlzIHNob3dpbmcuXHJcblxyXG4gICAgICAgIGlmICghJHNjb3BlLmlzVG91Y2hEZXZpY2UoKSkge1xyXG4gICAgICAgICAgICAvLyAkKCcudG9vbHRpcC13cmFwcGVyJykudG9vbHRpcCh7XHJcbiAgICAgICAgICAgIC8vICAgICBwbGFjZW1lbnQ6ICd0b3AnLFxyXG4gICAgICAgICAgICAvLyAgICAgY29udGFpbmVyOiAnYm9keSdcclxuICAgICAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAkKCcuZHJvcGRvd24tbWVudSAuYnRuJykudG9vbHRpcCh7XHJcbiAgICAgICAgICAgIC8vICAgICBwbGFjZW1lbnQ6ICdsZWZ0JyxcclxuICAgICAgICAgICAgLy8gICAgIGNvbnRhaW5lcjogJ2JvZHknXHJcbiAgICAgICAgICAgIC8vIH0pOyAvLyBmb3IgbGF5b3V0IG9wdGlvbnNcclxuXHJcbiAgICAgICAgICAgICQoJ2hlYWRlciwgI21hcC10aXRsZScpLmhvdmVyKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keS5wcmVzZW50ZXItcGxheWluZycpLmFkZENsYXNzKCdoaWRlLWhlYWRlcicpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHkucHJlc2VudGVyLXBsYXlpbmcnKS5yZW1vdmVDbGFzcygnaGlkZS1oZWFkZXInKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaGFuZGxlTmF2aWdhdGlvbigpIHtcclxuICAgICAgICAvLyBjcm9zcy1icm93c2VyIHR3ZWFrczpcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBodHRwOi8vd3d3Lm9wZXJhLmNvbS9zdXBwb3J0L2tiL3ZpZXcvODI3L1xyXG4gICAgICAgICAgICBvcGVyYS5zZXRPdmVycmlkZUhpc3RvcnlOYXZpZ2F0aW9uTW9kZSgnY29tcGF0aWJsZScpO1xyXG4gICAgICAgICAgICBoaXN0b3J5Lm5hdmlnYXRpb25Nb2RlID0gJ2NvbXBhdGlibGUnO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gbm8gYmlnZ2llLlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaW5zdGFsbCBiZWZvcmUtdW5sb2FkIGhhbmRsZXI6XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGV4aXRNZXNzYWdlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJOYXZpZ2F0aW5nIGF3YXkgZnJvbSB5b3VyIE1hcCB3aWxsIGNhdXNlIGFueSB1bnNhdmVkIGNoYW5nZXMgdG8gYmUgbG9zdCBcIiArXHJcbiAgICAgICAgICAgICAgICBcIihhbnkgY2hhbmdlcyB5b3UgbWFrZSBhcmUgYXV0b21hdGljYWxseSBzYXZlZCwgYnV0IGl0IHRha2VzIGEgY291cGxlIG9mIHNlY29uZHMpLlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgICAgICQod2luZG93KS5iaW5kKCdiZWZvcmV1bmxvYWQnLCBleGl0TWVzc2FnZSk7XHJcblxyXG4gICAgICAgIC8vIHByZXZlbnQgZXhpdCBwcm9tcHQgd2hlbiB0aGUgdXNlciBkZWxpYmVyYXRlbHkgbmF2aWdhdGVzIGF3YXk6XHJcblxyXG4gICAgICAgICQoJyNoZWFkZXItcmlnaHQgYScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkKHdpbmRvdykudW5iaW5kKCdiZWZvcmV1bmxvYWQnLCBleGl0TWVzc2FnZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaGFuZGxlQmFja3NwYWNlKCkge1xyXG4gICAgICAgIHZhciBCQUNLU1BBQ0UgPSA4O1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBCQUNLU1BBQ0UpIHtcclxuICAgICAgICAgICAgICAgIGlmICghJCgnYm9keSA6Zm9jdXMnKS5pcygnOmlucHV0JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBwcmV2ZW50IGFjY2lkZW50YWwgYmFja3NwYWNlIHdoZW4gbm8gaW5wdXQgaGFzIGZvY3VzOlxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCk7XHJcbn07Iiwid2luZG93LlNhbmRiYW5rRWRpdG9yT3B0aW9ucyA9IHt9O1xyXG5cclxuU2FuZGJhbmtFZGl0b3JPcHRpb25zID0gZnVuY3Rpb24oJHNjb3BlKSB7XHJcblxyXG4gICAgdGhpcy5vcGVuTW9kYWwgPSBmdW5jdGlvbihvcHRpb25zLCBvblNhdmVEZWZhdWx0cywgb25VcGRhdGUpIHtcclxuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZV9lZGl0b3Jfb3B0aW9uc19tb2RhbC5odG1sJywgLy8gc2VlIHZpZXdzL21hcHMvX3RlbXBsYXRlX2VkaXRvcl9vcHRpb25zX21vZGFsXHJcbiAgICAgICAgICAgIGJhY2tkcm9wOiAnc3RhdGljJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogb3B0aW9uc01vZGFsQ3RybCxcclxuICAgICAgICAgICAgd2luZG93Q2xhc3M6ICdvcHRpb25zLW1vZGFsJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25TYXZlRGVmYXVsdHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvblNhdmVEZWZhdWx0cztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uVXBkYXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gY29udHJvbGxlciBmb3Igb3B0aW9ucyBtb2RhbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB2YXIgb3B0aW9uc01vZGFsQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIG9wdGlvbnMsIG9uU2F2ZURlZmF1bHRzLCBvblVwZGF0ZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUub3B0aW9ucyA9IG9wdGlvbnM7XHJcblxyXG4gICAgICAgICRzY29wZS5zZXREZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm9rID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG9uVXBkYXRlKCRzY29wZS5vcHRpb25zKTtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5zZXREZWZhdWx0cy52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgb25TYXZlRGVmYXVsdHMoJHNjb3BlLm9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxufTsiLCIvLyBjb250cm9sbGVyIGZvciBwdWJsaWMgbWFwc1xyXG5cclxud2luZG93Lk1hcHNGZWVkQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSkge1xyXG5cclxuICAgICRzY29wZS5zaG93QWR2YW5jZWRTZWFyY2ggPSB0cnVlO1xyXG4gICAgJHNjb3BlLmxvYWRpbmdGZWVkID0gZmFsc2U7XHJcblxyXG4gICAgJHNjb3BlLmV2ZW50cyA9IFtdO1xyXG4gICAgJHNjb3BlLm9yZ2FuaXphdGlvbnMgPSBbXTtcclxuICAgICRzY29wZS5hZG1pblRhZ3MgPSBbXTtcclxuXHJcbiAgICAkc2NvcGUuc29ydE9wdGlvbnMgPSBbe1xyXG4gICAgICAgIG5hbWU6ICdNT1NUX1JFQ0VOVCcsXHJcbiAgICAgICAgbGFiZWw6ICdNb3N0IFJlY2VudCdcclxuICAgIH0sIHtcclxuICAgICAgICBuYW1lOiAnTU9TVF9MSUtFRCcsXHJcbiAgICAgICAgbGFiZWw6ICdNb3N0IExpa2VkJ1xyXG4gICAgfSwge1xyXG4gICAgICAgIG5hbWU6ICdNT1NUX0NPTU1FTlRFRCcsXHJcbiAgICAgICAgbGFiZWw6ICdNb3N0IENvbW1lbnRlZCdcclxuICAgIH1dO1xyXG5cclxuICAgICRzY29wZS5maWx0ZXJzID0gW3tcclxuICAgICAgICBuYW1lOiAnQUxMJyxcclxuICAgICAgICBsYWJlbDogJ0FsbCBQdWJsaWMgTWFwcydcclxuICAgIH0sIHtcclxuICAgICAgICBuYW1lOiAnRk9MTE9XRURfTUFQUycsXHJcbiAgICAgICAgbGFiZWw6ICdNYXBzIEkgRm9sbG93J1xyXG4gICAgfSwge1xyXG4gICAgICAgIG5hbWU6ICdMSUtFRF9NQVBTJyxcclxuICAgICAgICBsYWJlbDogXCJNYXBzIEkndmUgTGlrZWRcIlxyXG4gICAgfSwge1xyXG4gICAgICAgIG5hbWU6ICdGT0xMT1dFRF9QRU9QTEUnLFxyXG4gICAgICAgIGxhYmVsOiAnTWFwcyBieSBQZW9wbGUgSSBGb2xsb3cnXHJcbiAgICB9LCB7XHJcbiAgICAgICAgbmFtZTogJ1RBR0dFRF9NQVBTJyxcclxuICAgICAgICBsYWJlbDogXCJNYXBzIFRhZ2dlZCB3aXRoIE15IFRhZ3NcIlxyXG4gICAgfV07XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RGVmYXVsdFNlYXJjaFBhcmFtcygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0ZXh0OiAnJyxcclxuICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6ICcnLFxyXG4gICAgICAgICAgICBhZG1pblRhZ0lkOiAnJyxcclxuICAgICAgICAgICAgdGFnczogW10sXHJcbiAgICAgICAgICAgIHN0YW5kYXJkczogW10sXHJcbiAgICAgICAgICAgIHdpdGhTbGlkZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICB3aXRoQWN0aXZpdHlTbGlkZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICBzb3J0Qnk6ICdNT1NUX1JFQ0VOVCcsXHJcbiAgICAgICAgICAgIGZpbHRlcjogJ0FMTCdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS5zZWFyY2hQYXJhbXMgPSBnZXREZWZhdWx0U2VhcmNoUGFyYW1zKCk7XHJcblxyXG4gICAgJHNjb3BlLnNlYXJjaFBhcmFtc1RvUXVlcnlTdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc3AgPSAkc2NvcGUuc2VhcmNoUGFyYW1zO1xyXG4gICAgICAgIHJldHVybiAndGV4dD0nICsgc3AudGV4dCArXHJcbiAgICAgICAgICAgICcmb3JnYW5pemF0aW9uSWQ9JyArIHNwLm9yZ2FuaXphdGlvbklkICtcclxuICAgICAgICAgICAgJyZhZG1pblRhZ0lkPScgKyBzcC5hZG1pblRhZ0lkICtcclxuICAgICAgICAgICAgJyZ0YWdzPScgKyBzcC50YWdzICtcclxuICAgICAgICAgICAgJyZzdGFuZGFyZHM9JyArIHNwLnN0YW5kYXJkcyArXHJcbiAgICAgICAgICAgICcmd2l0aFNsaWRlcz0nICsgc3Aud2l0aFNsaWRlcyArXHJcbiAgICAgICAgICAgICcmd2l0aEFjdGl2aXR5U2xpZGVzPScgKyBzcC53aXRoQWN0aXZpdHlTbGlkZXMgK1xyXG4gICAgICAgICAgICAnJnNvcnRCeT0nICsgc3Auc29ydEJ5ICtcclxuICAgICAgICAgICAgJyZmaWx0ZXI9JyArIHNwLmZpbHRlcjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0gcXVlcnkgc3RyaW5nIHBhcmFtcyB0byBzaG93IHNpbmdsZSBldmVudCBmb3Igbm90aWZpY2F0aW9ucyAtLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLmdldE5vdGlmaWNhdGlvblNlYXJjaFBhcmFtcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSBfLm1hcChbJ2xpa2UnLCAnY29tbWVudCcsICdzaGFyZSddLCBmdW5jdGlvbihhY3Rpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFjdGlvbiArICdfaWQ9JyArXHJcbiAgICAgICAgICAgICAgICAoXy5oYXMoJHNjb3BlLnBhcmFtcywgYWN0aW9uICsgJ19pZCcpID8gJHNjb3BlLnBhcmFtc1thY3Rpb24gKyAnX2lkJ10gOiAnbnVsbCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwYXJhbXMuam9pbignJicpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAkc2NvcGUucGFyYW1zIGlzIHNldCBpbiB1c2VyLmpzXHJcbiAgICAkc2NvcGUuaXNTaW5nbGVDb21tZW50VmlldyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfLmhhcygkc2NvcGUucGFyYW1zLCAnY29tbWVudF9pZCcpICYmICRzY29wZS5wYXJhbXNbJ2NvbW1lbnRfaWQnXSAhPSBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tIG1hcCBkYXRhIC0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLmV2ZW50TGltaXQgPSAxMDtcclxuXHJcbiAgICAkc2NvcGUubG9hZEZlZWQgPSBmdW5jdGlvbihpbmNyZW1lbnQpIHtcclxuXHJcbiAgICAgICAgaWYgKGluY3JlbWVudCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZXZlbnRMaW1pdCArPSBpbmNyZW1lbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUubG9hZGluZ0ZlZWQgPSB0cnVlO1xyXG4gICAgICAgIHN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgICRodHRwLmdldCgnL21hcHMvZmVlZC5qc29uPycgK1xyXG4gICAgICAgICAgICAkc2NvcGUuc2VhcmNoUGFyYW1zVG9RdWVyeVN0cmluZygpICsgJyYnICtcclxuICAgICAgICAgICAgJHNjb3BlLmdldE5vdGlmaWNhdGlvblNlYXJjaFBhcmFtcygpICsgJyZsaW1pdD0nICsgJHNjb3BlLmV2ZW50TGltaXRcclxuICAgICAgICApLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5ldmVudHMgPSByZXNwb25zZS5kYXRhLmV2ZW50cztcclxuICAgICAgICAgICAgICAgICRzY29wZS5vcmdhbml6YXRpb25zID0gcmVzcG9uc2UuZGF0YS5vcmdhbml6YXRpb25zO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkbWluVGFncyA9IHJlc3BvbnNlLmRhdGEuYWRtaW5UYWdzO1xyXG4gICAgICAgICAgICAgICAgc3RvcFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nRmVlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZ0ZlZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3QgbG9hZCBNZXRhTWFwIGZlZWQnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5sb2FkRmVlZCgpO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIGluZmluaXRlIHNjcm9sbGluZyAtLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUubW9yZUV2ZW50cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdtb3JlRXZlbnRzIScpO1xyXG4gICAgICAgIGlmICghJHNjb3BlLmxvYWRpbmdGZWVkKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5sb2FkRmVlZCgxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBzZWFyY2ggZm9ybSAtLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuZG9TZWFyY2ggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUubG9hZEZlZWQoKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnJlc2V0U2VhcmNoID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnNlYXJjaFBhcmFtcyA9IGdldERlZmF1bHRTZWFyY2hQYXJhbXMoKTtcclxuICAgICAgICAkc2NvcGUuc2hvd0FkdmFuY2VkU2VhcmNoID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLmxvYWRGZWVkKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIHZpZXcgaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5nZXRUb3RhbFRhZ0NvdW50ID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICByZXR1cm4gZXZlbnQubWFwLnVzZXJUYWdzLmxlbmd0aCArXHJcbiAgICAgICAgICAgIGV2ZW50Lm1hcC5hZG1pblRhZ3MubGVuZ3RoICtcclxuICAgICAgICAgICAgZXZlbnQubWFwLmNjc1RhZ3MubGVuZ3RoO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tIGNvbW1lbnQgb24gYSBtYXAgLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyB0aGVzZSBhcmUgaW5kZXhlZCBieSB0aGUgaW5kZXggb2YgdGhlIGV2ZW50IGluIHRoZSBmZWVkXHJcbiAgICAkc2NvcGUuc2hvd0FsbENvbW1lbnRzID0gW107XHJcbiAgICAkc2NvcGUubmV3Q29tbWVudHMgPSBbXTtcclxuXHJcbiAgICAvLyBOQjogd2hlbiBwb3N0aW5nIGEgbmV3IGNvbW1lbnQgd2UgZG9uJ3QgcmVsb2FkIHRoZSBmZWVkLCBzb1xyXG4gICAgLy8gdGhhdCB0aGUgbmV3IGNvbW1lbnQgd2lsbCBzdGF5IHZpc2libGUgcmF0aGVyIHRoYW4gaGF2aW5nIHRoZVxyXG4gICAgLy8gZmVlZCBzY3JvbGwgdG8gdGhlIHRvcC4gXHJcbiAgICAkc2NvcGUuYWRkQ29tbWVudCA9IGZ1bmN0aW9uKGV2ZW50SW5kZXgpIHtcclxuICAgICAgICB2YXIgZXZlbnQgPSAkc2NvcGUuZXZlbnRzW2V2ZW50SW5kZXhdO1xyXG4gICAgICAgIHZhciBtYXBJZCA9IGV2ZW50Lm1hcC5pZDtcclxuICAgICAgICB2YXIgY29tbWVudCA9ICRzY29wZS5uZXdDb21tZW50c1tldmVudEluZGV4XTtcclxuICAgICAgICAkaHR0cC5wb3N0KCcvY29tbWVudHMnLCB7XHJcbiAgICAgICAgICAgIG1hcF9pZDogbWFwSWQsXHJcbiAgICAgICAgICAgIHRleHQ6IGNvbW1lbnRcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5tYXAuY29tbWVudHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9ySWQ6ICRzY29wZS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogY29tbWVudCxcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGV2ZW50Lm5vdyxcclxuICAgICAgICAgICAgICAgICAgICBhdXRob3I6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICRzY29wZS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICRzY29wZS51c2VyTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXZhdGFyOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5hdmF0YXJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogZmlndXJlIG91dCBob3cgdG8gc2hvdyB0cnVlIGN1cnJlbnQgdGltZSwgcmF0aGVyIHRoYW4gZXZlbnQubm93LCBcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCBjb3VsZCBiZSBhIG1pbnV0ZSBvciB0d28gYWdvLi4uID8/XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5uZXdDb21tZW50c1tldmVudEluZGV4XSA9ICcnOyAvLyBjbGVhciBlZGl0IGZpZWxkXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJDb3VsZCBub3QgcG9zdCB5b3VyIGNvbW1lbnRcIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZGVsZXRlQ29tbWVudCA9IGZ1bmN0aW9uKGV2ZW50SW5kZXgsIGNvbW1lbnRJZCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdldmVudEluZGV4OiAnICsgZXZlbnRJbmRleCk7XHJcbiAgICAgICAgdmFyIGV2ZW50ID0gJHNjb3BlLmV2ZW50c1tldmVudEluZGV4XTtcclxuICAgICAgICB2YXIgbWFwSWQgPSBldmVudC5tYXAuaWQ7XHJcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvY29tbWVudHMvJyArIGNvbW1lbnRJZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQubWFwLmNvbW1lbnRzID0gXy5maWx0ZXIoZXZlbnQubWFwLmNvbW1lbnRzLCBmdW5jdGlvbihlbHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWx0LmlkICE9IGNvbW1lbnRJZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJDb3VsZCBub3QgZGVsZXRlIHlvdXIgY29tbWVudFwiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5mb2N1c05ld0NvbW1lbnQgPSBmdW5jdGlvbihldmVudEluZGV4KSB7XHJcbiAgICAgICAgJHNjb3BlLnNob3dBbGxDb21tZW50c1tldmVudEluZGV4XSA9ICEkc2NvcGUuc2hvd0FsbENvbW1lbnRzW2V2ZW50SW5kZXhdO1xyXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkKCcjbmV3LWNvbW1lbnRfJyArIGV2ZW50SW5kZXgpLmZvY3VzKCk7XHJcbiAgICAgICAgfSwgMzAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tIGxpa2UgYSBtYXAgLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuYWRkTGlrZSA9IGZ1bmN0aW9uKG1hcCkge1xyXG4gICAgICAgICRodHRwLnBvc3QoJy9saWtlcycsIHtcclxuICAgICAgICAgICAgbWFwX2lkOiBtYXAuaWRcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdhZGRMaWtlLCByZXNwb25zZTonLCByZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBtYXAubGlrZUNvdW50ID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tIGZvbGxvdyBhIG1hcCAtLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5hZGRNYXBGb2xsb3cgPSBmdW5jdGlvbihtYXApIHtcclxuICAgICAgICAkaHR0cC5wb3N0KCcvbWFwX2ZvbGxvd3MnLCB7XHJcbiAgICAgICAgICAgIG1hcF9pZDogbWFwLmlkXHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgbWFwLmZvbGxvd0NvdW50ID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxufTsiLCIvLyBmdW5jdGlvbnMgZm9yIHRoZSBnZW5lcmF0b3IgKGFrYSBUaGlua1F1ZXJ5KVxyXG5cclxudmFyIEdlbmVyYXRvckN0cmwgPSBmdW5jdGlvbiAoJHNjb3BlKSB7XHJcblxyXG4gICAgdmFyIG1hcCA9ICRzY29wZS5tYXA7XHJcbiAgICB2YXIgZGlhZ3JhbSA9ICRzY29wZS5tYXAuZ2V0RGlhZ3JhbSgpO1xyXG5cclxuICAgICRzY29wZS5jb25jZXB0MSA9ICcnO1xyXG4gICAgJHNjb3BlLmNvbmNlcHQyID0gJyc7XHJcblxyXG4gICAgJHNjb3BlLmVjaG9Db25jZXB0MSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUuY29uY2VwdDEgfHwgJy4uLic7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5lY2hvQ29uY2VwdDIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLmNvbmNlcHQyIHx8ICcuLi4nO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc3dhcENvbmNlcHRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHRtcCA9ICRzY29wZS5jb25jZXB0MTtcclxuICAgICAgICAkc2NvcGUuY29uY2VwdDEgPSAkc2NvcGUuY29uY2VwdDI7XHJcbiAgICAgICAgJHNjb3BlLmNvbmNlcHQyID0gdG1wO1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLm1hcEl0ID0gZnVuY3Rpb24ocXVlc3Rpb24pIHtcclxuICAgICAgICBzdGFydFNwaW5uZXIoKTtcclxuICAgICAgICBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBtYXAuZ2V0QXV0b3NhdmUoKS5zYXZlT25Nb2RlbENoYW5nZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKCRzY29wZS5zYW5kYm94KSB7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY2xlYXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgbG9jYXRpb24gZm9yIGluc2VydGVkIHN0dWZmXHJcbiAgICAgICAgdmFyIGRiID0gbWFwLmNvbXB1dGVNYXBCb3VuZHMoKTtcclxuICAgICAgICB2YXIgeCA9IGRiLnggKyBkYi53aWR0aCArIDIwMDtcclxuICAgICAgICB2YXIgeSA9IGRiLnk7XHJcbiAgICAgICAgaWYgKGlzTmFOKHgpIHx8IGlzTmFOKHkpKSB7XHJcbiAgICAgICAgICAgIHggPSB5ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygneCwgeTogJyArIHggKyAnLCAnICsgeSk7XHJcblxyXG4gICAgICAgIC8vIGluc2VydCB0aGUgc3R1ZmYgYW5kIGRlc2VsZWN0IGl0XHJcbiAgICAgICAgcXVlc3Rpb24oeCx5KTtcclxuICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7IFxyXG5cclxuICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG1hcC5nZXRVaSgpLnJlc2V0Wm9vbSgpO1xyXG5cclxuICAgICAgICBtYXAuZ2V0QXV0b3NhdmUoKS5zYXZlT25Nb2RlbENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIG1hcC5nZXRBdXRvc2F2ZSgpLnNhdmUoJ2VkaXRfZ2VuZXJhdG9yJyk7XHJcbiAgICAgICAgc3RvcFNwaW5uZXIoKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNlbGVjdGVkUXVlc3Rpb24gPSBudWxsO1xyXG5cclxuICAgICRzY29wZS5zZWxlY3RRdWVzdGlvbiA9IGZ1bmN0aW9uKHF1ZXN0aW9uKSB7XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkUXVlc3Rpb24gPSBxdWVzdGlvbjtcclxuICAgICAgICBpZiAoJHNjb3BlLnNhbmRib3gpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm1hcEl0KHF1ZXN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9OyAgICBcclxuXHJcbiAgICAkc2NvcGUuc3VycHJpc2VNZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBrZXlzID0gXy5rZXlzKCRzY29wZS5xdWVyaWVzKTtcclxuICAgICAgICB2YXIgaSA9IF8ucmFuZG9tKDAsIGtleXMubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgdmFyIHF1ZXN0aW9uID0gJHNjb3BlLnF1ZXJpZXNba2V5c1tpXV07XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkUXVlc3Rpb24gPSBxdWVzdGlvbjtcclxuICAgICAgICAkc2NvcGUubWFwSXQocXVlc3Rpb24pO1xyXG5cclxuICAgICAgICAkKCcjcXVlc3Rpb25zJykuYW5pbWF0ZSh7IHNjcm9sbFRvcDogaSAqIDMwIH0sIDEwMDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tIGZ1bmN0aW9ucyBmb3IgY3JlYXRpbmcgZWFjaCBvZiB0aGUgc3RydWN0dXJlcyAtIHNlZSB2aWV3cy9tYXBzL2dlbmVyYXRvcl90YWIgLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUucXVlcmllcyA9IHtcclxuXHJcbiAgICAgICAgV0hBVF9JUzogZnVuY3Rpb24oeCwgeSkgeyAgLy8gMVxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMS5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcz8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBXSEFUX0lTX05PVDogZnVuY3Rpb24oeCwgeSkgeyAvLyAyXHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcxLmRhdGEsICdkZmxhZycsIHRydWUpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXMgbm90PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXMgbm90PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXMgbm90PycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIERJU1RJTkdVSVNIX0JFVFdFRU46IGZ1bmN0aW9uKHgsIHkpIHsgLy8gM1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMS5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzPycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcz8nKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcyLmRhdGEsICdkZmxhZycsIHRydWUpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdpcz8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ2lzPycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIENPTVBBUkVfQ09OVFJBU1Q6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gNFxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAxNTAsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDE1MCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcxLmRhdGEsICdkZmxhZycsIHRydWUpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzIuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHZhciBydGhpbmcxID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ2NvbnRyYXN0Jyk7XHJcbiAgICAgICAgICAgIHZhciBydGhpbmcyID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ2NvbXBhcmUnKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocnRoaW5nMS5sYWJlbGVkTGluay5kYXRhLCAndHlwZScsICd0b0Zyb20nKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocnRoaW5nMi5sYWJlbGVkTGluay5kYXRhLCAndHlwZScsICd0b0Zyb20nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBQQVJUU19PRjogZnVuY3Rpb24oeCwgeSkgeyAvLyA1XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBQQVJUX09GOiBmdW5jdGlvbih4LCB5KSB7IC8vIDZcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAncGFydCBvZj8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBQQVJUU19IQVZFX1BBUlRTOiBmdW5jdGlvbih4LCB5KSB7IC8vIDdcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChjaGlsZDEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoY2hpbGQxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoY2hpbGQyLCAncGFydD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGNoaWxkMiwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUl9QQVJUUzogZnVuY3Rpb24oeCwgeSkgeyAvLyA4XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICB2YXIgcnRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKHJ0aGluZywgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChydGhpbmcsICdwYXJ0PycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBfUEFSVFM6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gOVxyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAzMDAsIHksICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydCBzZWVuIGZyb20gdmlld3BvaW50IG9mICcgKyAkc2NvcGUuZWNob0NvbmNlcHQyKCkgKyAnPycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQyID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludCBvZiAnICsgJHNjb3BlLmVjaG9Db25jZXB0MigpICsgJz8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMyA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQgb2YgJyArICRzY29wZS5lY2hvQ29uY2VwdDIoKSArICc/Jyk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHRoaW5nMiwgdGhpbmcxKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHRoaW5nMiwgY2hpbGQxKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHRoaW5nMiwgY2hpbGQyKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHRoaW5nMiwgY2hpbGQzKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBSU19UT19BTkRfQlk6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTBcclxuICAgICAgICAgICAgdmFyIHJlbGF0ZWQxID0gbWFwLmNyZWF0ZVRoaW5nKHgsIHksICdyZWxhdGVkIGlkZWE/Jyk7XHJcbiAgICAgICAgICAgIHZhciByZWxhdGVkMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMzAwLCB5ICsgNTAsICdyZWxhdGVkIGlkZWE/Jyk7XHJcbiAgICAgICAgICAgIHZhciByZWxhdGVkMyA9IG1hcC5jcmVhdGVUaGluZyh4ICsgNTAsIHkgKyAzMDAsICdyZWxhdGVkIGlkZWE/Jyk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZyA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMTMwLCB5ICsgMTMwLCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmsocmVsYXRlZDEsIHRoaW5nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rKHJlbGF0ZWQyLCB0aGluZyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGluayhyZWxhdGVkMywgdGhpbmcpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4ICsgNTAwLCB5ICsgMTUwLCAnaWRlYT8nKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgNzUwLCB5ICsgMTUwLCAnaWRlYT8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBXSEFUX0lTX1I6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTFcclxuICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHksICRzY29wZS5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdpZGVhPycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBBUlRfUlNfQVJFOiBmdW5jdGlvbih4LCB5KSB7IC8vIDEyXHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDMwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQxKCksICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMyA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShjaGlsZDEuZGF0YSwgJ2xvYycsICctMjAgMTEwJyk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGNoaWxkMi5kYXRhLCAnbG9jJywgJzgwIDExMCcpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShjaGlsZDMuZGF0YSwgJ2xvYycsICczMCAxOTAnKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDEsIGNoaWxkMiwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDIsIGNoaWxkMywgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDMsIGNoaWxkMSwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBQQVJUX1JTX0VYSVNUOiBmdW5jdGlvbih4LCB5KSB7IC8vIDEzXHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpLCAncmlnaHQnKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMTIgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMTMgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQyMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQyMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQyMyA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmsodGhpbmcxLCB0aGluZzIpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMTEsIGNoaWxkMjEsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQxMiwgY2hpbGQyMiwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDEzLCBjaGlsZDIzLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFJTX1dJVEhfT1RIRVJTOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE0XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDIwMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMjAwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmczID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAyMDAsIHkgKyAyMDAsICdhbm90aGVyIHRoaW5nJyk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzQgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDIwMCwgeSArIDIwMCwgJ2Fub3RoZXIgdGhpbmcnKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMywgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nNCwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzIsIHRoaW5nNCwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzMsIHRoaW5nNCwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBQQVJUU19PRl9QOiBmdW5jdGlvbih4LCB5KSB7IC8vIDE1XHJcbiAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDEwMCwgeSwgJHNjb3BlLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQyID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZDMgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZyh4ICsgMTAwLCB5LCAkc2NvcGUuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsodGhpbmcxLCB0aGluZzIpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFBPSU5UX0ZPUjogZnVuY3Rpb24oeCwgeSkgeyAvLyAxNlxyXG4gICAgICAgICAgICB2YXIgdGhpbmcgPSBtYXAuY3JlYXRlVGhpbmcoeCwgeSwgJ25ldyBwZXJzcGVjdGl2ZScpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAxNTAsIHkgKyAxNTAsICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDE1MCwgeSArIDE1MCwgJHNjb3BlLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgdmFyIHJ0aGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayh0aGluZywgcnRoaW5nKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBIQVNfTVVMVElQTEVfUFM6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTdcclxuICAgICAgICAgICAgdmFyIHBvaW50MSA9IG1hcC5jcmVhdGVUaGluZyh4LCB5ICsgNTAsICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBwb2ludDIgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSwgJ3ZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIHBvaW50MyA9IG1hcC5jcmVhdGVUaGluZyh4ICsgNTAwLCB5ICsgNTAsICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHkgKyAyNTAsICRzY29wZS5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIG1hcC5jcmVhdGVQTGluayhwb2ludDEsIHZpZXcpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsocG9pbnQyLCB2aWV3KTtcclxuICAgICAgICAgICAgbWFwLmNyZWF0ZVBMaW5rKHBvaW50Mywgdmlldyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgUEFSVFNfRlJPTV9NVUxUSVBMRV9QUzogZnVuY3Rpb24oeCwgeSkgeyAvLyAxOFxyXG4gICAgICAgICAgICB2YXIgcG9pbnQxID0gbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHksICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgIHZhciBwb2ludDIgPSBtYXAuY3JlYXRlVGhpbmcoeCAtIDEwMCwgeSArIDEyNSwgJ3ZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgdmFyIHBvaW50MyA9IG1hcC5jcmVhdGVUaGluZyh4IC0gMTAwLCB5ICsgMjUwLCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcgPSBtYXAuY3JlYXRlVGhpbmcoeCArIDE1MCwgeSArIDI1LCAkc2NvcGUuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQxID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nLCAncGFydCBzZWVuIGZyb20gdmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQyID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nLCAncGFydCBzZWVuIGZyb20gdmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQzID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nLCAncGFydCBzZWVuIGZyb20gdmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsocG9pbnQxLCBjaGlsZDEpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsocG9pbnQxLCBjaGlsZDIpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsocG9pbnQyLCBjaGlsZDIpO1xyXG4gICAgICAgICAgICBtYXAuY3JlYXRlUExpbmsocG9pbnQzLCBjaGlsZDMpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIFdIQVRfQUJPVVQ6IGZ1bmN0aW9uKHgsIHkpIHsgLy8gMTlcclxuICAgICAgICAgICAgJHNjb3BlLnF1ZXJpZXMuV0hBVF9JUyh4LCB5KTtcclxuICAgICAgICAgICAgJHNjb3BlLnF1ZXJpZXMuUEFSVFNfT0YoeCArIDMwMCwgeSk7XHJcbiAgICAgICAgICAgICRzY29wZS5xdWVyaWVzLlBBUlRTX0ZST01fTVVMVElQTEVfUFMoeCArIDcwMCwgeSk7XHJcbiAgICAgICAgICAgICRzY29wZS5xdWVyaWVzLlJTX1RPX0FORF9CWSh4LCB5ICsgNDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9OyAvLyBxdWVyaWVzXHJcblxyXG59O1xyXG5cclxuU2FuZGJhbmtFZGl0b3IuR2VuZXJhdG9yID0gZnVuY3Rpb24gKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIE5COiBnZW5lcmF0b3IgaXMgb3BlbmVkIG9uIGxvYWQgb2YgZW1wdHkgbWFwOyBzZWUgbWFwLmpzOmxvYWQoKVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBhIHRhYiBpcyBvcGVuZWQgb3IgY2xvc2VkXHJcbiAgICB0aGlzLmN1cnJlbnRUYWJDaGFuZ2VkID0gZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKG9sZFZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9HRU5FUkFUT1IpIHsgLy8gY2xvc2luZyB0YWJcclxuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX0dFTkVSQVRPUikgeyAvLyBvcGVuaW5nIHRhYlxyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyB0aGVzZSBnZXQgZmlsdGVyZWQgb3V0IGluIExlc3NvbkJvb2tcclxuICAgIHRoaXMuZ2V0UGxhY2Vob2xkZXJJZGVhTmFtZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gWydpcz8nLCAnaXMgbm90PycsICdwYXJ0PycsICd2aWV3cG9pbnQ/JywgJ3JlbGF0ZWQgaWRlYT8nLCAnaWRlYT8nLFxyXG4gICAgICAgICAgICAgICAgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludD8nLCAnY29udHJhc3Q/JywgJ2NvbXBhcmlzb24/JywgJ3JlbGF0aW9uc2hpcD8nXTtcclxuICAgIH07XHJcbn07XHJcbiIsIlxyXG53aW5kb3cuR29yZ2VzR3JpZCA9IHt9O1xyXG5cclxuLy8gbW9kZWwgZm9yIHJvdyBzZWxlY3Rpb24gXHJcblxyXG5Hb3JnZXNHcmlkLlJvd1NlbGVjdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICB0aGlzLnNlbGVjdEFsbCA9IGZhbHNlO1xyXG4gICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMgPSBbXTtcclxuXHJcbiAgICB0aGlzLmRlc2VsZWN0QWxsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2VsZi5zZWxlY3RlZFJvd0luZGV4ZXMgPSBbXTtcclxuICAgICAgICBzZWxmLnNlbGVjdEFsbCA9IGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZVNlbGVjdEFsbCA9IGZ1bmN0aW9uKHJvd0NvdW50KSB7XHJcbiAgICAgICAgc2VsZi5zZWxlY3RBbGwgPSAhc2VsZi5zZWxlY3RBbGw7XHJcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0QWxsKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm93Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFJvd0luZGV4ZXNbaV0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmRlc2VsZWN0QWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNlbGVjdGVkUm93Q291bnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gXy5maWx0ZXIoc2VsZi5zZWxlY3RlZFJvd0luZGV4ZXMsIGZ1bmN0aW9uKGkpIHsgcmV0dXJuIGkgPT09IHRydWU7IH0pLmxlbmd0aDtcclxuICAgIH07XHJcbn07XHJcblxyXG4vLyBtb2RlbCBmb3IgdmlldyB0cmVlIGV4cGFuc2lvblxyXG5cclxuR29yZ2VzR3JpZC5WaWV3VHJlZVN0YXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIFxyXG4gICAgdGhpcy5leHBhbmRlZFZpZXdzID0gW107XHJcbiAgICB0aGlzLmNoaWxkU29ydHMgPSB7fTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZVZpZXdFeHBhbnNpb24gPSBmdW5jdGlvbih2aWV3TmFtZSkge1xyXG4gICAgICAgIHZhciBpID0gXy5pbmRleE9mKHNlbGYuZXhwYW5kZWRWaWV3cywgdmlld05hbWUpO1xyXG4gICAgICAgIGlmIChpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIHNlbGYuZXhwYW5kZWRWaWV3cy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmV4cGFuZGVkVmlld3MucHVzaCh2aWV3TmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmV4cGFuZFZpZXcgPSBmdW5jdGlvbih2aWV3TmFtZSkge1xyXG4gICAgICAgIGlmICghc2VsZi52aWV3SXNFeHBhbmRlZCh2aWV3TmFtZSkpXHJcbiAgICAgICAgICAgIHNlbGYudG9nZ2xlVmlld0V4cGFuc2lvbih2aWV3TmFtZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY29sbGFwc2VWaWV3ID0gZnVuY3Rpb24odmlld05hbWUpIHtcclxuICAgICAgICBpZiAoc2VsZi52aWV3SXNFeHBhbmRlZCh2aWV3TmFtZSkpXHJcbiAgICAgICAgICAgIHNlbGYudG9nZ2xlVmlld0V4cGFuc2lvbih2aWV3TmFtZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudmlld0lzRXhwYW5kZWQgPSBmdW5jdGlvbih2aWV3TmFtZSkge1xyXG4gICAgICAgIHJldHVybiBfLmluZGV4T2Yoc2VsZi5leHBhbmRlZFZpZXdzLCB2aWV3TmFtZSkgIT0gLTE7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2V0Q2hpbGRTb3J0ID0gZnVuY3Rpb24odmlldywgc29ydCkge1xyXG4gICAgICAgIHNlbGYuY2hpbGRTb3J0c1t2aWV3Lm5hbWVdID0gc29ydDtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgc3RhdGUgc2F2ZWQgaGVyZWluIGlmIHNldCwgc28gdGhlIG9yZGVyIGRvZXNuJ3QgY2hhbmdlIHdoZW4gdGhlIGdyaWQgaXMgcmVmcmVzaGVkXHJcbiAgICB0aGlzLmdldENoaWxkU29ydCA9IGZ1bmN0aW9uKHZpZXcpIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5jaGlsZFNvcnRzW3ZpZXcubmFtZV0gfHwgdmlldy5jaGlsZFNvcnQ7XHJcbiAgICB9O1xyXG59O1xyXG5cclxuLy8gbW9kZWwgZm9yIHN0b3JpbmcgcGFnaW5nL3NvcnRpbmcgc2V0dGluZ3MgLSBzZWUgYWxzbyBsaXN0aW5nX3BhcmFtcy5yYlxyXG5cclxuR29yZ2VzR3JpZC5MaXN0aW5nUGFyYW1zID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMucGFnZSA9IDE7IC8vIE5COiBwYWdlcyBhcmUgMS1iYXNlZFxyXG4gICAgdGhpcy5wYWdlU2l6ZSA9IDEwMDtcclxuICAgIHRoaXMuc29ydEJ5ID0gJ2lkJztcclxuICAgIHRoaXMuc29ydE9yZGVyID0gJ2FzYyc7XHJcbiAgICB0aGlzLnZpZXdOYW1lID0gJyc7XHJcbiAgICB0aGlzLmZpbHRlcnMgPSAnJztcclxuICAgIHRoaXMudG90YWxJdGVtcyA9IDA7XHJcbiAgICB0aGlzLnBhZ2VDb3VudCA9IDA7XHJcblxyXG4gICAgdGhpcy5zZXRTb3J0QnkgPSBmdW5jdGlvbihjb2wpIHtcclxuICAgICAgICBpZiAoc2VsZi5zb3J0QnkgPT09IGNvbCkge1xyXG4gICAgICAgICAgICBzZWxmLnNvcnRPcmRlciA9IChzZWxmLnNvcnRPcmRlciA9PT0gJ2FzYycgPyAnZGVzYycgOiAnYXNjJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgIHtcclxuICAgICAgICAgICAgc2VsZi5zb3J0T3JkZXIgPSAnYXNjJztcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5zb3J0QnkgPSBjb2w7XHJcbiAgICAgICAgc2VsZi5wYWdlID0gMTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgY3VycmVudCBzb3J0IG9yZGVyIGlmIHNvcnRCeSBpcyBzZXQgdG8gdGhlIGdpdmVuIGNvbHVtbiwgZWxzZSBudWxsXHJcbiAgICB0aGlzLmdldFNvcnRPcmRlciA9IGZ1bmN0aW9uKGNvbCkge1xyXG4gICAgICAgIGlmIChzZWxmLnNvcnRCeSA9PT0gY29sKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLnNvcnRPcmRlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50b1F1ZXJ5U3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuICdwYWdlPScgKyBzZWxmLnBhZ2UgK1xyXG4gICAgICAgICAgICAgICcmcGFnZVNpemU9JyArIHNlbGYucGFnZVNpemUgK1xyXG4gICAgICAgICAgICAgICcmc29ydEJ5PScgKyBzZWxmLnNvcnRCeSArXHJcbiAgICAgICAgICAgICAgJyZzb3J0T3JkZXI9JyArIHNlbGYuc29ydE9yZGVyICtcclxuICAgICAgICAgICAgICAnJnZpZXdOYW1lPScgKyBzZWxmLnZpZXdOYW1lICtcclxuICAgICAgICAgICAgICAnJmZpbHRlcj0nICsgc2VsZi5maWx0ZXJzICtcclxuICAgICAgICAgICAgICAnJnRvdGFsSXRlbXM9JyArIHNlbGYudG90YWxJdGVtcyArXHJcbiAgICAgICAgICAgICAgJyZwYWdlQ291bnQ9JyArIHNlbGYucGFnZUNvdW50O1xyXG4gICAgfTtcclxufTsiLCIvLyBmdW5jdGlvbnMgaGFuZGxpbmcgaGlzdG9yeSBkaXNwbGF5XHJcblxyXG5TYW5kYmFua0VkaXRvci5IaXN0b3J5ID0gZnVuY3Rpb24oJHNjb3BlLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgLy8gdGhpcyBpcyB1cGRhdGVkIG9uIG1hcCBsb2FkIGFuZCBhZnRlciBldmVyeSBhdXRvc2F2ZSwgaW4gbWFwLmxvYWRNYXBFeHRyYURhdGFcclxuICAgIHRoaXMudmVyc2lvbkxpc3QgPSBudWxsO1xyXG4gICAgdGhpcy5jdXJyZW50VmVyc2lvbiA9IG51bGw7IC8vIGUuZy4geyBpbmRleDogMCwgaWQ6IDIsIGNoYW5nZV9kZXNjcmlwdGlvbjogLi4uLCBjcmVhdGVkX2F0OiAuLi4gfVxyXG4gICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgIHRoaXMucGxheVRpbWVyID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHt9O1xyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICBpZiAobmV3VmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX0hJU1RPUlkpIHsgLy8gb3BlbmluZyB0YWJcclxuICAgICAgICAgICAgLy8gbG9hZCBjdXJyZW50IHZlcnNpb24sIGJ1dCBpbiByZWFkLW9ubHkgbW9kZVxyXG4gICAgICAgICAgICB2YXIgdmVyc2lvbiA9IF8ubGFzdChzZWxmLnZlcnNpb25MaXN0KTtcclxuICAgICAgICAgICAgaWYgKHZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgIHNlbGYubG9hZFZlcnNpb24odmVyc2lvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9sZFZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9ISVNUT1JZKSB7IC8vIGNsb3NpbmcgdGFiXHJcbiAgICAgICAgICAgIC8vIHJlbG9hZCBtYXBcclxuICAgICAgICAgICAgbWFwLmxvYWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGxvYWRzIG1vZGVsIGRhdGEgZm9yIGFuIGluZGl2aWR1YWwgdmVyc2lvbiBhbmQgZGlzcGxheXMgaXRcclxuICAgIHRoaXMubG9hZFZlcnNpb24gPSBmdW5jdGlvbih2ZXJzaW9uKSB7XHJcbiAgICAgICAgc2VsZi5jdXJyZW50VmVyc2lvbiA9IHZlcnNpb247XHJcbiAgICAgICAgbWFwLmxvYWRWZXJzaW9uKHZlcnNpb24uaWQpO1xyXG5cclxuICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGNlbnRlciB2aWV3IG9uIGN1cnJlbnQgaGlzdG9yeSBpdGVtOlxyXG4gICAgICAgICAgICAkKCcjaGlzdG9yeS1saXN0LXdyYXBwZXInKS5jZW50ZXIoJCgnI2hpc3RvcnktbGlzdCAuY3VycmVudCcpKTtcclxuICAgICAgICB9LCAxMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0VmVyc2lvbkRlc2NyaXB0aW9uID0gZnVuY3Rpb24odmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiAodmVyc2lvbiA/IHZlcnNpb24uY2hhbmdlX2Rlc2NyaXB0aW9uIDogJycpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmFkdmFuY2VWZXJzaW9uID0gZnVuY3Rpb24oaW5jcmVtZW50KSB7XHJcbiAgICAgICAgaWYgKHNlbGYudmVyc2lvbkxpc3QpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IF8uaW5kZXhPZihzZWxmLnZlcnNpb25MaXN0LCBzZWxmLmN1cnJlbnRWZXJzaW9uKTtcclxuICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gY3VycmVudEluZGV4ICsgaW5jcmVtZW50O1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudEluZGV4ICE9IC0xICYmIG5ld0luZGV4ID49IDAgJiYgbmV3SW5kZXggPD0gc2VsZi52ZXJzaW9uTGlzdC5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRWZXJzaW9uID0gc2VsZi52ZXJzaW9uTGlzdFtuZXdJbmRleF07XHJcbiAgICAgICAgICAgICAgICBzZWxmLmxvYWRWZXJzaW9uKHNlbGYuY3VycmVudFZlcnNpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmZpcnN0VmVyc2lvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChzZWxmLnZlcnNpb25MaXN0KSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFZlcnNpb24gPSBzZWxmLnZlcnNpb25MaXN0WzBdO1xyXG4gICAgICAgICAgICBzZWxmLmxvYWRWZXJzaW9uKHNlbGYuY3VycmVudFZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5sYXN0VmVyc2lvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChzZWxmLnZlcnNpb25MaXN0KSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFZlcnNpb24gPSBzZWxmLnZlcnNpb25MaXN0W3NlbGYudmVyc2lvbkxpc3QubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIHNlbGYubG9hZFZlcnNpb24oc2VsZi5jdXJyZW50VmVyc2lvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzT25GaXJzdFZlcnNpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyByZXR1cm4gc2VsZi52ZXJzaW9uTGlzdCAhPSBudWxsICYmIHNlbGYuY3VycmVudFZlcnNpb24gIT0gbnVsbCAmJiBfLmZpcnN0KHNlbGYudmVyc2lvbkxpc3QpLmlkID09IHNlbGYuY3VycmVudFZlcnNpb24uaWQ7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYudmVyc2lvbkxpc3QgJiYgXy5pbmRleE9mKHNlbGYudmVyc2lvbkxpc3QsIHNlbGYuY3VycmVudFZlcnNpb24pID09PSAwO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzT25MYXN0VmVyc2lvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIHJldHVybiBzZWxmLnZlcnNpb25MaXN0ICE9IG51bGwgJiYgc2VsZi5jdXJyZW50VmVyc2lvbiAhPSBudWxsICYmIF8ubGFzdChzZWxmLnZlcnNpb25MaXN0KS5pZCA9PSBzZWxmLmN1cnJlbnRWZXJzaW9uLmlkO1xyXG4gICAgICAgIHJldHVybiBzZWxmLnZlcnNpb25MaXN0ICYmIF8uaW5kZXhPZihzZWxmLnZlcnNpb25MaXN0LCBzZWxmLmN1cnJlbnRWZXJzaW9uKSA9PSBzZWxmLnZlcnNpb25MaXN0Lmxlbmd0aCAtIDE7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc3RhcnRQbGF5aW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2VsZi5pc1BsYXlpbmcgPSB0cnVlO1xyXG4gICAgICAgIGtlZXBQbGF5aW5nKCk7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBrZWVwUGxheWluZygpIHtcclxuICAgICAgICBpZiAoc2VsZi5jdXJyZW50VmVyc2lvbiA9PSBfLmxhc3Qoc2VsZi52ZXJzaW9uTGlzdCkpIHtcclxuICAgICAgICAgICAgc2VsZi5maXJzdFZlcnNpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuYWR2YW5jZVZlcnNpb24oMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYucGxheVRpbWVyID0gc2V0VGltZW91dChrZWVwUGxheWluZywgMTAwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zdG9wUGxheWluZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNlbGYuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYucGxheVRpbWVyKTtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICB9O1xyXG59O1xyXG4iLCIvLyBmdW5jdGlvbnMgZm9yIGpvaW5pbmcgbmF0aW9uLCB3aXRoIGEgbW9kYWwgZGlhbG9nXHJcblxyXG53aW5kb3cuU2FuZGJhbmtKb2luTmF0aW9uID0ge307XHJcblxyXG5TYW5kYmFua0pvaW5OYXRpb24gPSBmdW5jdGlvbigkc2NvcGUpIHtcclxuXHJcbiAgICB0aGlzLm9wZW5Nb2RhbCA9IGZ1bmN0aW9uKG9yZ0lkLCBvcmdOYW1lKSB7XHJcbiAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVfam9pbl9uYXRpb25fbW9kYWwuaHRtbCcsIC8vIHNlZSB2aWV3cy9tZW1iZXJzaGlwcy9fdGVtcGxhdGVfam9pbl9uYXRpb25fbW9kYWxcclxuICAgICAgICAgICAgYmFja2Ryb3A6ICdzdGF0aWMnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBqb2luTW9kYWxDdHJsLFxyXG4gICAgICAgICAgICB3aW5kb3dDbGFzczogJ3RhZ3MtbW9kYWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICBvcmdJZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yZ0lkO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZ05hbWU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmdOYW1lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBjb250cm9sbGVyIGZvciBqb2luIG1vZGFsIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHZhciBqb2luTW9kYWxDdHJsID0gZnVuY3Rpb24oJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSwgb3JnSWQsIG9yZ05hbWUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLm9yZ0lkID0gb3JnSWQ7XHJcbiAgICAgICAgJHNjb3BlLm9yZ05hbWUgPSBvcmdOYW1lO1xyXG5cclxuICAgICAgICAvLyBuZWVkIGEgZG90IVxyXG4gICAgICAgICRzY29wZS5mb3JtRGF0YSA9IHtcclxuICAgICAgICAgICAgam9pbkNvZGU6ICcnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmVycm9yID0gJyc7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGpvaW5PcmcoKSB7XHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9tZW1iZXJzaGlwcy5qc29uJywge1xyXG4gICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uX2lkOiAkc2NvcGUub3JnSWQsXHJcbiAgICAgICAgICAgICAgICBqb2luX2NvZGU6ICRzY29wZS5mb3JtRGF0YS5qb2luQ29kZVxyXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1dlbGNvbWUhIFlvdSBhcmUgbm93IGEgbWVtYmVyIG9mICcgKyAkc2NvcGUub3JnTmFtZSArICcuJyk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJDb3VsZCBub3Qgam9pbiBUaGlua05hdGlvbiAtIGRpZCB5b3UgZW50ZXIgdGhlIGNvcnJlY3QgY29kZT9cIjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUub2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgam9pbk9yZygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG59OyIsIi8vIGxheW91dHMgdXNlZCBpbiB0aGUgZWRpdG9yLCBmb3IgdGhlIGRpYWdyYW0gb3IgaW5kaXZpZHVhbCBHcm91cHMsIHBsdXMgbGF5b3V0LXJlbGF0ZWQgZnVuY3Rpb25zXHJcblxyXG5TYW5kYmFua0VkaXRvci5MYXlvdXRzID0gZnVuY3Rpb24oJHNjb3BlLCBtYXApIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7fTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdJbml0aWFsTGF5b3V0Q29tcGxldGVkJykge1xyXG4gICAgICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnU2VsZWN0aW9uTW92ZWQnKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZVNlbGVjdGVkUGFydExvY2F0aW9uRGF0YShlKTtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25EZWxldGVkJykge1xyXG4gICAgICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1BhcnRDcmVhdGVkJykge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdMYXlvdXRzLCBQYXJ0Q3JlYXRlZCcpO1xyXG4gICAgICAgICAgICAvLyBzZXROZXdQYXJ0TG9jYXRpb25EYXRhKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdQYXJ0UmVzaXplZCcpIHtcclxuICAgICAgICAgICAgc2V0UmVzaXplZFBhcnREaW1lbnNpb25EYXRhKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdMaW5rRHJhd24nKSB7XHJcbiAgICAgICAgICAgIGFkanVzdExpbmtMYXlvdXQoZS5zdWJqZWN0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnTGlua1JlbGlua2VkJykge1xyXG4gICAgICAgICAgICBhZGp1c3RMaW5rTGF5b3V0KGUuc3ViamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gaGFuZGxlIGxvY2F0aW9uL3NpemUgYXR0cmlidXRlcyBmb3Igbm9kZXMgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gb25seSB1cGRhdGUgdy9oIGZvciBzbGlkZXMsIGFzIGFsbCBvdGhlciBub2RlIHR5cGVzIGhhdmUgZml4ZWQgZGltZW5zaW9ucyBhY2NvcmRpbmcgdG8gdGhlIHRlbXBsYXRlc1xyXG4gICAgZnVuY3Rpb24gc2V0UmVzaXplZFBhcnREaW1lbnNpb25EYXRhKGUpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5jYXRlZ29yeSA9PSAnc2xpZGUnKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ1BhcnRSZXNpemVkOiAnICsgbm9kZS5wYXJ0LmFjdHVhbEJvdW5kcyk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5vZGUuZGF0YSwgJ3dpZHRoJywgbm9kZS5wYXJ0LmFjdHVhbEJvdW5kcy53aWR0aCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5vZGUuZGF0YSwgJ2hlaWdodCcsIG5vZGUucGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0IHRoZSAnbG9jJyBhdHRyaWJ1dGUgZm9yIGEgbmV3IHRvcC1sZXZlbCBub2RlIChjcmVhdGVkIGJ5IGRvdWJsZS1jbGlja2luZyksIHRvIHN1cHBvcnQgZnJlZWhhbmQgbGF5b3V0XHJcbiAgICB0aGlzLnNldE5ld1BhcnRMb2NhdGlvbkRhdGEgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5wYXJ0KSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5vZGUuZGF0YSwgJ2xvYycsIG5vZGUucGFydC5sb2NhdGlvbi54ICsgJyAnICsgbm9kZS5wYXJ0LmxvY2F0aW9uLnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyB1cGRhdGVzIHRoZSAnbG9jJyBhdHRyaWJ1dGUgZm9yIGVhY2ggc2VsZWN0ZWQgcGFydCwgdG8gc3VwcG9ydCBmcmVlaGFuZCBsYXlvdXQgKGRvZXMgbm90IGFwcGx5IHRvIHNsaWRlcylcclxuICAgIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkUGFydExvY2F0aW9uRGF0YShlKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHZhciBpdCA9IGRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHsgLy8gdGhpbmdcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50WCA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50WSA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFydC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRYID0gcGFydC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRZID0gcGFydC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtb3ZpbmcgZ3JvdXAsIHN1YmplY3Q6ICcgKyBlLnN1YmplY3QgKyAnLCBwYXJ0OiAnICsgcGFydCArICcsIGhlaWdodDogJyArIHBhcnQucGFydC5kZXNpcmVkU2l6ZS5oZWlnaHQgKyAnLCBsb2NhdGlvbjogJyArIHBhcnQucGFydC5sb2NhdGlvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnQubG9jYXRpb24ueCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShwYXJ0LmRhdGEsICdsb2MnLCAocGFydC5sb2NhdGlvbi54IC0gcGFyZW50WCkgKyAnICcgKyAocGFydC5sb2NhdGlvbi55IC0gcGFyZW50WSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIGNoYW5naW5nIGxheW91dHMgb2YgdGhpbmdzIGFuZCB0aGVpciBkZXNjZW5kYW50cyAtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5mcm9tQW5kVG9Ob2Rlc0FyZVZpc2libGUgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsuZnJvbU5vZGUgJiZcclxuICAgICAgICAgICAgbGluay50b05vZGUgJiZcclxuICAgICAgICAgICAgIXNlbGYuaGFzQ29sbGFwc2VkQW5jZXN0b3IobGluay5mcm9tTm9kZSkgJiZcclxuICAgICAgICAgICAgIXNlbGYuaGFzQ29sbGFwc2VkQW5jZXN0b3IobGluay50b05vZGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxhYmVsTm9kZUlzVmlzaWJsZSA9IGZ1bmN0aW9uKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gbGluay5sYWJlbE5vZGVzLmNvdW50ICYmIGxpbmsubGFiZWxOb2Rlcy5maXJzdCgpLnZpc2libGU7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaGFzQ29sbGFwc2VkQW5jZXN0b3IgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cC5pc1N1YkdyYXBoRXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAgPSBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoaXMuaGFzTGlua0xhYmVsQW5jZXN0b3IgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgLy8gICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAvLyAgICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAvLyAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICAgICAgZWxzZSBpZiAoZ3JvdXAuY29udGFpbmluZ0dyb3VwLmlzTGlua0xhYmVsKSB7XHJcbiAgICAvLyAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIC8vICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICBlbHNlIHtcclxuICAgIC8vICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfTtcclxuXHJcbiAgICB0aGlzLmdldEhpZ2hlc3RBbmNlc3RvcldpdGhMYXlvdXQgPSBmdW5jdGlvbihncm91cCwgbGF5b3V0TmFtZXMpIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKF8uY29udGFpbnMobGF5b3V0TmFtZXMsIGdyb3VwLmNvbnRhaW5pbmdHcm91cC5kYXRhLmxheW91dCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBncm91cCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hcmVTaXN0ZXJzSW5JbnZlbnRvcnlMYXlvdXQgPSBmdW5jdGlvbihncm91cDEsIGdyb3VwMikge1xyXG4gICAgICAgIHJldHVybiBncm91cDEuY29udGFpbmluZ0dyb3VwID09IGdyb3VwMi5jb250YWluaW5nR3JvdXAgJiZcclxuICAgICAgICAgICAgZ3JvdXAxLmNvbnRhaW5pbmdHcm91cCAmJlxyXG4gICAgICAgICAgICBfLmNvbnRhaW5zKFsnbGVmdCcsICdyaWdodCddLCBncm91cDEuY29udGFpbmluZ0dyb3VwLmRhdGEubGF5b3V0KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc05vdFdpdGhpbkludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuICFzZWxmLmlzV2l0aGluSW52ZW50b3J5TGF5b3V0KGdyb3VwKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1JUaGluZ1dpdGhpbkludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwLmlzTGlua0xhYmVsICYmIHNlbGYuaXNXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzV2l0aGluSW52ZW50b3J5TGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydsZWZ0JywgJ3JpZ2h0J10pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzV2l0aGluTGVmdEludmVudG9yeUxheW91dCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuaXNXaXRoaW5MYXlvdXQoZ3JvdXAsIFsnbGVmdCddKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1dpdGhpblJpZ2h0SW52ZW50b3J5TGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydyaWdodCddKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1dpdGhpbkZyZWVoYW5kTGF5b3V0ID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpbkxheW91dChncm91cCwgWydmcmVlaGFuZCddKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1dpdGhpblN0YWNrZWRMYXlvdXQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmlzV2l0aGluTGF5b3V0KGdyb3VwLCBbJ3N0YWNrZWQnXSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNXaXRoaW5MYXlvdXQgPSBmdW5jdGlvbihncm91cCwgbGF5b3V0TmFtZXMpIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnaXNXaXRoaW5MYXlvdXQ6ICcgKyBncm91cCArICdsYXlvdXRzOiAnICsgbGF5b3V0TmFtZXMuam9pbigpICsgJzogZmFsc2UnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChfLmNvbnRhaW5zKGxheW91dE5hbWVzLCBncm91cC5jb250YWluaW5nR3JvdXAuZGF0YS5sYXlvdXQpKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdpc1dpdGhpbkxheW91dDogJyArIGdyb3VwICsgJ2xheW91dHM6ICcgKyBsYXlvdXROYW1lcy5qb2luKCkgKyAnOiB0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNob3dMZWZ0VGV4dEJsb2NrID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5pc1dpdGhpblJpZ2h0SW52ZW50b3J5TGF5b3V0KGdyb3VwKSAmJlxyXG4gICAgICAgICAgICAhc2VsZi5pc1dpdGhpblN0YWNrZWRMYXlvdXQoZ3JvdXApICYmXHJcbiAgICAgICAgICAgICFncm91cC5pc0xpbmtMYWJlbDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zaG93UmlnaHRUZXh0QmxvY2sgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmLmlzV2l0aGluTGVmdEludmVudG9yeUxheW91dChncm91cCkgJiZcclxuICAgICAgICAgICAgIXNlbGYuaXNXaXRoaW5TdGFja2VkTGF5b3V0KGdyb3VwKSAmJlxyXG4gICAgICAgICAgICAhZ3JvdXAuaXNMaW5rTGFiZWw7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2V0RGVzY2VuZGFudExheW91dHMgPSBmdW5jdGlvbihncm91cCwgbGF5b3V0TmFtZSkge1xyXG4gICAgICAgIGlmIChsYXlvdXROYW1lID09ICdsZWZ0JyB8fCBsYXlvdXROYW1lID09ICdyaWdodCcgfHwgbGF5b3V0TmFtZSA9PSAnc3RhY2tlZCcpIHtcclxuICAgICAgICAgICAgdmFyIGl0ID0gZ3JvdXAubWVtYmVyUGFydHMuaXRlcmF0b3I7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmICFwYXJ0LmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydC5kYXRhLmxheW91dCA9IGxheW91dE5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXREZXNjZW5kYW50TGF5b3V0cyhwYXJ0LCBsYXlvdXROYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAobGF5b3V0TmFtZSA9PSAnZnJlZWhhbmQnKSB7XHJcbiAgICAgICAgICAgIC8vIHN0YWNrZWQ/XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmRpc2FibGVMYXlvdXRGb3JTZWxlY3RlZFRoaW5ncyA9IGZ1bmN0aW9uKGxheW91dE5hbWUpIHtcclxuICAgICAgICB2YXIgaXQgPSBtYXAuZ2V0RGlhZ3JhbSgpLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICBpZiAoIWl0LmNvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuaXNXaXRoaW5MYXlvdXQoZ3JvdXAsIFsnbGVmdCcsICdyaWdodCcsICdzdGFja2VkJ10pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBzY2FsaW5nIGZ1bmN0aW9ucywgZXRjLiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gQ29tcHV0ZXMgdGhlIGxldmVsIG9mIHRoaXMgZ3JvdXBcclxuICAgIHRoaXMuY29tcHV0ZUxldmVsID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjb21wdXRlTGV2ZWwsIHBhcnQ6ICcgKyBwYXJ0ICsgJywgY29udGFpbmluZ0dyb3VwOiAnICsgcGFydC5jb250YWluaW5nR3JvdXApO1xyXG4gICAgICAgIGlmICghKGdyb3VwIGluc3RhbmNlb2YgZ28uR3JvdXApIHx8IGdyb3VwLmNvbnRhaW5pbmdHcm91cCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb21wdXRlTGV2ZWwoZ3JvdXAuY29udGFpbmluZ0dyb3VwKSArIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBnZXRzIHRoZSBiYXNpYyBzY2FsaW5nIGZvciB0aGluZyBzcXVhcmVzLCBieSBsZXZlbFxyXG4gICAgZnVuY3Rpb24gZ2V0VGhpbmdTY2FsZShsZXZlbCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnBvdygwLjQ1LCBsZXZlbCk7IC8vIDEsIC40NSwgLjIwMjUsIC4wOTExMjUsIC4uLlxyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoaXMgaXMgb25seSB1c2VkIGZvciBncm91cHNcclxuICAgIHRoaXMuZ2V0U2NhbGUgPSBmdW5jdGlvbihncm91cCwgdmlzaXRlZEdyb3VwS2V5cykge1xyXG4gICAgICAgIGlmIChncm91cCkge1xyXG4gICAgICAgICAgICAvLyBrZWVwIHRyYWNrIG9mIGdyb3VwcyB3ZSd2ZSB2aXNpdGVkIHRvIGF2b2lkIGluZmluaXRlIHJlY3Vyc2lvblxyXG4gICAgICAgICAgICAvLyBUT0RPOiB0cmFjayBkb3duIGV4YWN0bHkgaG93IGluZmluaXRlIGxvb3BzIGFyZSBvY2N1cnJpbmcsXHJcbiAgICAgICAgICAgIC8vIG9yIElGIHRoZXkgc3RpbGwgYXJlIHNpbmNlIG1hcC5jaGVja01vZGVsIHdhcyBpbnRyb2R1Y2VkLi4uXHJcbiAgICAgICAgICAgIGlmICh2aXNpdGVkR3JvdXBLZXlzICYmIEFycmF5LmlzQXJyYXkodmlzaXRlZEdyb3VwS2V5cykpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Zpc2l0ZWRHcm91cEtleXM6ICcgKyB2aXNpdGVkR3JvdXBLZXlzKTtcclxuICAgICAgICAgICAgICAgIGlmIChfLmNvbnRhaW5zKHZpc2l0ZWRHcm91cEtleXMsIGdyb3VwLmRhdGEua2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2hpdCBhbHJlYWR5IHZpc2l0ZWQga2V5OiAnICsgZ3JvdXAuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2aXNpdGVkR3JvdXBLZXlzLnB1c2goZ3JvdXAuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmlzaXRlZEdyb3VwS2V5cyA9IFtncm91cC5kYXRhLmtleV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChncm91cC5sYWJlbGVkTGluaykgeyAvLyBSLXRoaW5nXHJcbiAgICAgICAgICAgICAgICB2YXIgZnJvbVNjYWxlID0gc2VsZi5nZXRTY2FsZShncm91cC5sYWJlbGVkTGluay5mcm9tTm9kZSwgdmlzaXRlZEdyb3VwS2V5cyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG9TY2FsZSA9IHNlbGYuZ2V0U2NhbGUoZ3JvdXAubGFiZWxlZExpbmsudG9Ob2RlLCB2aXNpdGVkR3JvdXBLZXlzKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2dldFNjYWxlLCBmcm9tU2NhbGU6ICcgKyBmcm9tU2NhbGUgKyAnLCB0b1NjYWxlOiAnICsgdG9TY2FsZSArICcsIHZpc2l0ZWRHcm91cEtleXM6ICcgKyB2aXNpdGVkR3JvdXBLZXlzLmpvaW4oJywnKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oZnJvbVNjYWxlLCB0b1NjYWxlKSAqIDAuNTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmdldFNjYWxlKGdyb3VwLmNvbnRhaW5pbmdHcm91cCwgdmlzaXRlZEdyb3VwS2V5cykgKiAwLjQ1O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFRoaW5nU2NhbGUoc2VsZi5jb21wdXRlTGV2ZWwoZ3JvdXApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMTsgLy8gY2FuIG9jY3VyIHdoZW4gZHJhZ2dpbmcgUiB0byBlbXB0eSBzcGFjZVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBnZXRzIHRoZSBtYXJnaW4gdG8gYmUgdXNlZCBpbiBzdGFjayBsYXlvdXQgYmV0d2VlbiB0aGlzIGdyb3VwJ3MgY2hpbGRyZW5cclxuICAgIGZ1bmN0aW9uIGdldFN0YWNrTWFyZ2luKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuICgxMCAvIDAuNDUpICogc2VsZi5nZXRTY2FsZShncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0cyB0aGUgbWFyZ2luIHRvIGJlIHVzZWQgaW4gc3RhY2sgbGF5b3V0IGJldHdlZW4gdGhpcyBncm91cCdzIGNoaWxkcmVuXHJcbiAgICBmdW5jdGlvbiBnZXRJbnZlbnRvcnlNYXJnaW4oZ3JvdXApIHtcclxuICAgICAgICBpZiAoc2VsZi5jb21wdXRlTGV2ZWwoZ3JvdXApIDw9IDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEwICogc2VsZi5nZXRTY2FsZShncm91cCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDMgKiBzZWxmLmdldFNjYWxlKGdyb3VwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5nZXRFeHRlcm5hbFRleHRTY2FsZSA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSAwLjEgKiBzZWxmLmNvbXB1dGVMZXZlbChncm91cCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0TGlua1N0cm9rZVdpZHRoID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHZhciBmcm9tU2NhbGUgPSBzZWxmLmdldFNjYWxlKGxpbmsuZnJvbU5vZGUpO1xyXG4gICAgICAgIHZhciB0b1NjYWxlID0gc2VsZi5nZXRTY2FsZShsaW5rLnRvTm9kZSk7XHJcbiAgICAgICAgcmV0dXJuIChsaW5rLmlzU2VsZWN0ZWQgPyA0IDogMikgKiBNYXRoLm1pbihmcm9tU2NhbGUsIHRvU2NhbGUpOyAvLyAyLCAuOSwgLi4uXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNjYWxlIGFycm93aGVhZHMgYmFzZWQgb24gdGhlIHNtYWxsZXN0IHRvL2Zyb20gbm9kZSwgXHJcbiAgICAvLyBvciBqdXN0IHRoZSBUbyBub2RlIGZvciBQIGxpbmtzXHJcbiAgICB0aGlzLmdldEFycm93aGVhZFNjYWxlID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHZhciBmcm9tU2NhbGUgPSBzZWxmLmdldFNjYWxlKGxpbmsuZnJvbU5vZGUpO1xyXG4gICAgICAgIHZhciB0b1NjYWxlID0gc2VsZi5nZXRTY2FsZShsaW5rLnRvTm9kZSk7XHJcbiAgICAgICAgdmFyIG1pblNjYWxlID0gTWF0aC5taW4oZnJvbVNjYWxlLCB0b1NjYWxlKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiZ2V0QXJyb3doZWFkU2NhbGUsIGZyb21TY2FsZTogXCIsIGZyb21TY2FsZSwgJywgdG9TY2FsZTogJywgdG9TY2FsZSwgJywgbWluU2NhbGU6ICcsIG1pblNjYWxlKTtcclxuICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09ICdQJykge1xyXG4gICAgICAgICAgICBtaW5TY2FsZSA9IHRvU2NhbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtaW5TY2FsZSA+PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxICogbWluU2NhbGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEuNSAqIG1pblNjYWxlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gY3JlYXRpbmcgbmV3IHRoaW5ncyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gUmV0dXJucyBhIGxvY2F0aW9uIGZvciBhIG5ldyBzaXN0ZXIgZ3JvdXAgKHRoaW5nKSB0byB0aGUgZ2l2ZW4gb25lLCBcclxuICAgIC8vIHdoaWNoIHdpbGwgbm90IGhpZGUgYW55IGV4aXN0aW5nIHRoaW5ncyAob3ZlcmxhcCBpcyBhbGxvd2VkKS4gXHJcbiAgICAvLyBUaGUgcmV0dXJuZWQgY29vcmRpbmF0ZXMgYXJlIGFic29sdXRlIGZvciBhIHRvcC1sZXZlbCBncm91cCwgXHJcbiAgICAvLyBvciByZWxhdGl2ZSB0byB0aGUgcGFyZW50IG90aGVyd2lzZSAtIHN1aXRhYmxlIGZvciB1c2Ugd2l0aCBGcmVlaGFuZERpYWdyYW1MYXlvdXRcclxuICAgIC8vIG9yIEZyZWVoYW5kTGF5b3V0LCByZXNwLlxyXG4gICAgdGhpcy5nZXROZXdTaXN0ZXJMb2NhdGlvbiA9IGZ1bmN0aW9uKGdyb3VwLCB3aXRoUikge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAvLyBpZiB3ZSBhcmUgd2l0aGluIGFub3RoZXIgZ3JvdXAsIHRoaW5ncyBhcmUgaW4gYWJzb2x1dGUgY29vcmRpbmF0ZXNcclxuICAgICAgICAvLyBhbmQgc2lzdGVycyBhcmUgcGxhY2VkIGFib3ZlIHRoZSB0aGluZzsgb3RoZXJ3aXNlIHJlbGF0aXZlIGFuZCBiZWxvdy4uLlxyXG4gICAgICAgIHZhciBpbkdyb3VwID0gKGdyb3VwLmNvbnRhaW5pbmdHcm91cCAhPT0gbnVsbCk7XHJcbiAgICAgICAgLy8gLi4uIGV4Y2VwdCBpZiB3aXRoUiBpcyB0cnVlLCB3ZSBnbyB0byB0aGUgcmlnaHQgaW5zdGVhZCBvZiBhYm92ZSBvciBiZWxvdy5cclxuXHJcbiAgICAgICAgLy8gc3RhcnQgYmVsb3cgaWYgaW4gZ3JvdXAsIGVsc2UgYWJvdmU7IG9yIHRvIHRoZSByaWdodCBpZiB3aXRoUlxyXG4gICAgICAgIHZhciB4LCB5LCB3LCBoO1xyXG4gICAgICAgIGlmICh3aXRoUikge1xyXG4gICAgICAgICAgICB4ID0gZ3JvdXAubG9jYXRpb24ueCArIGdyb3VwLmFjdHVhbEJvdW5kcy53aWR0aCAqIDIuMjtcclxuICAgICAgICAgICAgeSA9IGdyb3VwLmxvY2F0aW9uLnk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgeCA9IGdyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgICAgIHkgPSBncm91cC5sb2NhdGlvbi55ICsgZ3JvdXAuYWN0dWFsQm91bmRzLmhlaWdodCAqIDEuMSAqIChpbkdyb3VwID8gMSA6IC0xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdyA9IGdyb3VwLmFjdHVhbEJvdW5kcy53aWR0aDtcclxuICAgICAgICBoID0gZ3JvdXAuYWN0dWFsQm91bmRzLmhlaWdodDtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIG92ZXJsYXBwaW5nIHBhcnRzOyBpZiBmb3VuZCwgaW5jcmVtZW50IHgseSBhbmQgY29udGludWVcclxuXHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgdmFyIHJlY3QgPSBuZXcgZ28uUmVjdCh4LCB5LCB3LCBoKTtcclxuICAgICAgICAgICAgcmVjdC5ncm93KGggLyAxMCwgdyAvIDEwLCBoIC8gMTAsIHcgLyAxMCk7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0cyA9IGRpYWdyYW0uZmluZE9iamVjdHNJbihyZWN0LCBudWxsLCBzZWxmLmlzR3JvdXApO1xyXG4gICAgICAgICAgICBpZiAocGFydHMuY291bnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXROZXdTaXN0ZXJMb2NhdGlvbjogb3ZlcmxhcHBpbmcgcGFydCBmb3VuZCBpbiAnICsgcmVjdCk7XHJcbiAgICAgICAgICAgICAgICBpZiAod2l0aFIpIHtcclxuICAgICAgICAgICAgICAgICAgICB4ICs9IHcgLyAxMDtcclxuICAgICAgICAgICAgICAgICAgICB5ICs9IGggLyAxMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeCArPSB3IC8gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgeSArPSBoIC8gMTAgKiAoaW5Hcm91cCA/IDEgOiAtMSk7IC8vIG1vdmUgZG93biBpZiBpbiBncm91cCwgZWxzZSB1cFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldE5ld1Npc3RlckxvY2F0aW9uOiBubyBvdmVybGFwcGluZyBwYXJ0IGZvdW5kIGluICcgKyByZWN0KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbkdyb3VwKSB7IC8vIG1ha2UgY29vcmRpbmF0ZXMgcmVsYXRpdmVcclxuICAgICAgICAgICAgeCAtPSBncm91cC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICAgICAgeSAtPSBncm91cC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBnby5Qb2ludCh4ICsgTWF0aC5yYW5kb20oKSwgeSArIE1hdGgucmFuZG9tKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBSZXR1cm5zIGEgbG9jYXRpb24gZm9yIGEgbmV3IGNoaWxkIGdyb3VwICh0aGluZykgdG8gdGhlIGdpdmVuIG9uZSxcclxuICAgIC8vIHdoaWNoIHdpbGwgbm90IGhpZGUgYW55IGV4aXN0aW5nIGNoaWxkcmVuIChvdmVybGFwIGlzIGFsbG93ZWQpLlxyXG4gICAgLy8gVGhlIHJldHVybmVkIGNvb3JkaW5hdGVzIGFyZSByZWxhdGl2ZSB0byB0aGUgcGFyZW50IGdyb3VwIC0gc3VpdGFibGUgZm9yIHVzZSB3aXRoIEZyZWVoYW5kTGF5b3V0LlxyXG4gICAgdGhpcy5nZXROZXdDaGlsZExvY2F0aW9uID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgZ3JvdXBCb3VuZHMgPSBncm91cC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgLy8gTkI6IGFsbCB4L3kgbG9jYXRpb25zIGFyZSByZWxhdGl2ZSB0byB0aGUgZ3JvdXAgbG9jYXRpb25cclxuICAgICAgICB2YXIgeCA9IDA7XHJcbiAgICAgICAgdmFyIHkgPSBncm91cEJvdW5kcy5oZWlnaHQgKiAxLjE7XHJcbiAgICAgICAgdmFyIHcsIGg7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBncm91cC5tZW1iZXJQYXJ0cztcclxuICAgICAgICAvLyBrZWVwIHRlc3RpbmcgbmV3IHJlY3RhbmdsZXMgdW50aWwgd2UgZmluZCBvbmUgdGhhdCBkb2Vzbid0IG92ZXJsYXAgd2l0aCBhbnkgZXhpc3RpbmcgbWVtYmVyIG9mIHRoZSBncm91cFxyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIG1lbWJlcnMucmVzZXQoKTtcclxuICAgICAgICAgICAgdmFyIG92ZXJsYXBzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBtZW1iZXIsIG5ld1JlY3QsIG1lbWJlclJlY3Q7XHJcbiAgICAgICAgICAgIHdoaWxlIChtZW1iZXJzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVyID0gbWVtYmVycy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBtZW1iZXJCb3VuZHMgPSBtZW1iZXIuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgICAgICAgICAgdyA9IG1lbWJlckJvdW5kcy53aWR0aDtcclxuICAgICAgICAgICAgICAgIGggPSBtZW1iZXJCb3VuZHMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgLy8gZmluZCB0aGUgZXhpc3RpbmcgbWVtYmVyJ3MgYWN0dWFsIGJvdW5kcyAoYWJzb2x1dGUgY29vcmRzKVxyXG4gICAgICAgICAgICAgICAgbWVtYmVyUmVjdCA9IG5ldyBnby5SZWN0KG1lbWJlckJvdW5kcy54IC0gZ3JvdXBCb3VuZHMueCwgbWVtYmVyQm91bmRzLnkgLSBncm91cEJvdW5kcy55LCBtZW1iZXJCb3VuZHMud2lkdGgsIG1lbWJlckJvdW5kcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgbmV3UmVjdCA9IG5ldyBnby5SZWN0KHgsIHksIHcsIGgpO1xyXG4gICAgICAgICAgICAgICAgbmV3UmVjdC5ncm93KGggLyA1LCB3IC8gNSwgaCAvIDUsIHcgLyA1KTtcclxuICAgICAgICAgICAgICAgIG92ZXJsYXBzID0gbmV3UmVjdC5jb250YWluc1JlY3QobWVtYmVyUmVjdCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0TmV3Q2hpbGRMb2NhdGlvbiBmb3IgJyArIG1lbWJlciArICc6IG5ld1JlY3QgPSAnICsgbmV3UmVjdCArICcsIG1lbWJlclJlY3QgPSAnICsgbWVtYmVyUmVjdCArICcsIG92ZXJsYXBzOiAnICsgb3ZlcmxhcHMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG92ZXJsYXBzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG92ZXJsYXBzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpbmNyZW1lbnQgeCwgeSBhbmQgdHJ5IGFnYWluXHJcbiAgICAgICAgICAgICAgICB4ICs9IHcgLyA1O1xyXG4gICAgICAgICAgICAgICAgeSArPSBoIC8gNTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGZvdW5kIGEgZ29vZCBzcG90IVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBnby5Qb2ludCh4LCB5KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gYSBzaW1wbGVyIHZlcnNpb24gb2YgZ2V0TmV3Q2hpbGRMb2NhdGlvbiB0aGF0IHBsYWNlcyB0aGUgY2hpbGQgb3V0c2lkZSB0aGUgYm91bmRzIG9mIHRoZSBleGlzdGluZyBjaGlsZHJlblxyXG4gICAgdGhpcy5nZXROZXdDaGlsZExvY2F0aW9uMiA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgIHZhciBjaGlsZEJvdW5kcyA9IG1hcC5zYWZlUmVjdChtYXAuZ2V0RGlhZ3JhbSgpLmNvbXB1dGVQYXJ0c0JvdW5kcyhncm91cC5tZW1iZXJQYXJ0cykpO1xyXG4gICAgICAgIHZhciB4ID0gMDtcclxuICAgICAgICB2YXIgeSA9IDA7XHJcbiAgICAgICAgaWYgKCFncm91cC5tZW1iZXJQYXJ0cy5jb3VudCkge1xyXG4gICAgICAgICAgICB5ID0gZ3JvdXBCb3VuZHMuaGVpZ2h0ICogMS4yO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHkgPSBncm91cEJvdW5kcy5oZWlnaHQgKiAxLjQgKyBjaGlsZEJvdW5kcy5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2dldE5ld0NoaWxkTG9jYXRpb24yLCBjaGlsZEJvdW5kczogJyArIGNoaWxkQm91bmRzICsgJywgZ3JvdXBCb3VuZHM6ICcgKyBncm91cEJvdW5kcyArICcsIHg6ICcgKyB4ICsgJywgeTogJyArIHkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgZ28uUG9pbnQoeCwgeSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIG1vdmUgYWxsIHRoZSBnaXZlbiBuZXcgbWVtYmVyIGdyb3VwcyBzbyB0aGF0IHRoZWlyIGxvY2F0aW9ucyBhcmUgcmVsYXRpdmUgdG8gdGhhdCBvZiBcclxuICAgIC8vIHRoZSBwYXJlbnQgYW5kIGl0cyBwcmV2aW91c2x5IGV4aXN0aW5nIG1lbWJlcnMsIGFuZCBzY2FsZWQgZG93biBhcHByb3ByaWF0ZWx5XHJcbiAgICB0aGlzLmxheW91dE5ld01lbWJlcnNSZWxhdGl2ZVRvID0gZnVuY3Rpb24obmV3TWVtYmVycywgcGFyZW50LCBvbGRNZW1iZXJCb3VuZHMpIHtcclxuICAgICAgICAvLyBob3cgYmlnIHdhcyB0aGUgcGFyZW50IHN5c3RlbSBiZWZvcmUgdGhlIG5ldyBncm91cHMgd2VyZSBhZGRlZD9cclxuICAgICAgICB2YXIgc3lzdGVtQm91bmRzID0gcGFyZW50LmFjdHVhbEJvdW5kcy51bmlvblJlY3Qob2xkTWVtYmVyQm91bmRzKTtcclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBvbGQvbmV3IG9yaWdpbnMgLSBwbGFjZSBuZXcgb3JpZ2luIGJlbG93IGV4aXN0aW5nIHN5c3RlbVxyXG4gICAgICAgIHZhciBvbGRCb3VuZHMgPSBtYXAuZ2V0RGlhZ3JhbSgpLmNvbXB1dGVQYXJ0c0JvdW5kcyhuZXdNZW1iZXJzKTtcclxuICAgICAgICB2YXIgb2xkT3JpZ2luID0gbmV3IGdvLlBvaW50KG9sZEJvdW5kcy54LCBvbGRCb3VuZHMueSk7XHJcbiAgICAgICAgdmFyIG5ld09yaWdpbiA9IG5ldyBnby5Qb2ludCgwLCBzeXN0ZW1Cb3VuZHMuaGVpZ2h0ICogMS4yKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnbGF5b3V0TmV3TWVtYmVyc1JlbGF0aXZlVG8sIHN5c3RlbUJvdW5kczogJyArIHN5c3RlbUJvdW5kcyArICcsIG9sZEJvdW5kczogJyArIG9sZEJvdW5kcyArXHJcbiAgICAgICAgICAgICcsIG9sZE9yaWdpbjogJyArIG9sZE9yaWdpbiArICcsIG5ld09yaWdpbjogJyArIG5ld09yaWdpbik7XHJcblxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgbmV3IHNjYWxlZCBsb2NhdGlvbnNcclxuICAgICAgICAvLyBOQjogd2UgY2FuIGFzc3VtZSBuZXdNZW1iZXJzIGFyZSBhbGwgb25lIGxldmVsIGRvd24gZnJvbSBwYXJlbnQgKHNlZSBtYXAuYWRkU2VsZWN0ZWRUaGluZ3NBc0NoaWxkcmVuT2YpLCBcclxuICAgICAgICAvLyBzbyB3ZSBqdXN0IG11bHRpcGx5IGJ5IHRoZSBzdGFuZGFyZCBzY2FsZSBmYWN0b3JcclxuICAgICAgICB2YXIgaXQgPSBuZXdNZW1iZXJzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBncm91cEJvdW5kcyA9IGdyb3VwLmFjdHVhbEJvdW5kcztcclxuICAgICAgICAgICAgdmFyIG5ld1ggPSBuZXdPcmlnaW4ueCArIChncm91cEJvdW5kcy54IC0gb2xkT3JpZ2luLngpICogMC40NTtcclxuICAgICAgICAgICAgdmFyIG5ld1kgPSBuZXdPcmlnaW4ueSArIChncm91cEJvdW5kcy55IC0gb2xkT3JpZ2luLnkpICogMC40NTtcclxuICAgICAgICAgICAgdmFyIG5ld0xvYyA9IGdvLlBvaW50LnN0cmluZ2lmeShuZXcgZ28uUG9pbnQobmV3WCwgbmV3WSkpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbGF5b3V0TmV3TWVtYmVyc1JlbGF0aXZlVG8sIGdyb3VwQm91bmRzOiAnICsgZ3JvdXBCb3VuZHMgKyAnLCBuZXdMb2M6ICcgKyBuZXdMb2MpO1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbG9jJywgbmV3TG9jKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIG1vdmUgYWxsIHRoZSBnaXZlbiBvbGQgbWVtYmVyIGdyb3VwcyBzbyB0aGF0IHRoZWlyIGxvY2F0aW9ucyBhcmUgYWJzb2x1dGUgYW5kIGFib3ZlXHJcbiAgICAvLyB0aGUgcGFyZW50LCBhbmQgc2NhbGVkIHVwIGFwcHJvcHJpYXRlbHlcclxuICAgIHRoaXMubGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZiA9IGZ1bmN0aW9uKG9sZE1lbWJlcnMsIHBhcmVudCwgb2xkTWVtYmVyc0JvdW5kcywgb2xkTWVtYmVyc0xldmVsKSB7XHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBzY2FsZSBmYWN0b3IgKG1lbWJlcnMgY2FuIGJlIGRyYWdnZWQgdXAgbXVsdGlwbGUgbGV2ZWxzLCB1bmxpa2UgZHJhZ2dpbmcgaW50byBTKVxyXG4gICAgICAgIHZhciBzY2FsZUZhY3RvciA9IE1hdGgucG93KDAuNDUsIG9sZE1lbWJlcnNMZXZlbCAtIHNlbGYuY29tcHV0ZUxldmVsKHBhcmVudCkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdsYXlvdXRPbGRNZW1iZXJzT3V0c2lkZU9mLCBzY2FsZUZhY3RvcjogJyArIHNjYWxlRmFjdG9yKTtcclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBvbGQvbmV3IG9yaWdpbnMgLSBwbGFjZSBuZXcgb3JpZ2luIGFib3ZlIHBhcmVudCwgd2l0aCB2ZXJ0aWNhbCBzcGFjZSBmb3Igc2NhbGVkLXVwIG9sZE1lbWJlcnNcclxuICAgICAgICB2YXIgcGFyZW50Qm91bmRzID0gcGFyZW50LmFjdHVhbEJvdW5kcztcclxuICAgICAgICB2YXIgb2xkT3JpZ2luID0gbmV3IGdvLlBvaW50KG9sZE1lbWJlcnNCb3VuZHMueCwgb2xkTWVtYmVyc0JvdW5kcy55KTtcclxuICAgICAgICB2YXIgbmV3T3JpZ2luID0gbmV3IGdvLlBvaW50KHBhcmVudEJvdW5kcy54LCBwYXJlbnRCb3VuZHMueSAtIG9sZE1lbWJlcnNCb3VuZHMuaGVpZ2h0ICogMS4yIC8gc2NhbGVGYWN0b3IpO1xyXG5cclxuICAgICAgICAvLyBmaWd1cmUgb3V0IG5ldyBzY2FsZWQgbG9jYXRpb25zXHJcbiAgICAgICAgdmFyIGl0ID0gb2xkTWVtYmVycy5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXBCb3VuZHMgPSBncm91cC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgICAgIHZhciBuZXdYID0gbmV3T3JpZ2luLnggKyAoZ3JvdXBCb3VuZHMueCAtIG9sZE9yaWdpbi54KSAvIHNjYWxlRmFjdG9yO1xyXG4gICAgICAgICAgICB2YXIgbmV3WSA9IG5ld09yaWdpbi55ICsgKGdyb3VwQm91bmRzLnkgLSBvbGRPcmlnaW4ueSkgLyBzY2FsZUZhY3RvcjtcclxuICAgICAgICAgICAgdmFyIG5ld0xvYyA9IGdvLlBvaW50LnN0cmluZ2lmeShuZXcgZ28uUG9pbnQobmV3WCwgbmV3WSkpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZiwgcGFyZW50Qm91bmRzOiAnICsgcGFyZW50Qm91bmRzICsgJywgb2xkTWVtYmVyc0JvdW5kczogJyArIG9sZE1lbWJlcnNCb3VuZHMgK1xyXG4gICAgICAgICAgICAgICAgJywgbmV3T3JpZ2luOiAnICsgbmV3T3JpZ2luICsgJywgZ3JvdXBCb3VuZHM6ICcgKyBncm91cEJvdW5kcyArICcsIG5ld0xvYzogJyArIG5ld0xvYyk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICdsb2MnLCBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLSBhY2Nlc3NvcnMgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlIGxheW91dCBjbGFzcyBieSBhYmJyZXZpYXRlZCBuYW1lXHJcbiAgICB0aGlzLmdldExheW91dCA9IGZ1bmN0aW9uKGxheW91dE5hbWUpIHtcclxuICAgICAgICBpZiAobGF5b3V0TmFtZSA9PSAnZnJlZWhhbmQnKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZyZWVoYW5kTGF5b3V0KCk7XHJcbiAgICAgICAgZWxzZSBpZiAobGF5b3V0TmFtZSA9PSAncmlnaHQnKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJpZ2h0SW52ZW50b3J5TGF5b3V0KCk7XHJcbiAgICAgICAgZWxzZSBpZiAobGF5b3V0TmFtZSA9PSAnc3RhY2tlZCcpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RhY2tlZExheW91dCgpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBMZWZ0SW52ZW50b3J5TGF5b3V0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0RnJlZWhhbmREaWFncmFtTGF5b3V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGcmVlaGFuZERpYWdyYW1MYXlvdXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRydWUgaWYgdGhlIHRvIGFuZCBmcm9tIG5vZGVzIGZvciB0aGUgbGluayBoYXZlIGEgY29tbW9uIGFuY2VzdG9yIGdyb3VwIHdpdGggb25lIG9mIHRoZSBnaXZlbiBsYXlvdXQgbmFtZXMuXHJcbiAgICAvLyBUT0RPOiB2ZXJpZnkgbG9naWMgLSB3aGF0IGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBzdWNoIGFuY2VzdG9ycz8gLSB0aGlzIHNob3VsZCByZXR1cm4gdGhlIGhpZ2hlc3Qgb25lLi4uXHJcbiAgICBmdW5jdGlvbiBnZXRDb21tb25BbmNlc3RvcldpdGhMYXlvdXQoZ3JvdXAxLCBncm91cDIsIGxheW91dE5hbWVzKSB7XHJcbiAgICAgICAgdmFyIGFuY2VzdG9yczEgPSBzZWxmLmdldEFuY2VzdG9yR3JvdXBzKGdyb3VwMSk7XHJcbiAgICAgICAgdmFyIGFuY2VzdG9yczIgPSBzZWxmLmdldEFuY2VzdG9yR3JvdXBzKGdyb3VwMik7XHJcbiAgICAgICAgdmFyIGNvbW1vbkFuY2VzdG9ycyA9IF8uaW50ZXJzZWN0aW9uKGFuY2VzdG9yczEsIGFuY2VzdG9yczIpO1xyXG4gICAgICAgIHZhciBsYXlvdXRBbmNlc3RvcnMgPSBfLmZpbHRlcihjb21tb25BbmNlc3RvcnMsIGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmluZGV4T2YobGF5b3V0TmFtZXMsIGdyb3VwLmRhdGEubGF5b3V0KSAhPSAtMTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAobGF5b3V0QW5jZXN0b3JzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbGF5b3V0QW5jZXN0b3JzWzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBhbmNlc3RvcnMgb2YgdGhpcyBncm91cCwgaW5jbHVkaW5nIGl0c2VsZlxyXG4gICAgdGhpcy5nZXRBbmNlc3Rvckdyb3VwcyA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGFuY2VzdG9ycyA9IFtncm91cF07XHJcbiAgICAgICAgdmFyIGcgPSBncm91cDtcclxuICAgICAgICB3aGlsZSAoZy5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgYW5jZXN0b3JzLnB1c2goZy5jb250YWluaW5nR3JvdXApO1xyXG4gICAgICAgICAgICBnID0gZy5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhbmNlc3RvcnM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gRnJlZWhhbmREaWFncmFtTGF5b3V0KCkge1xyXG4gICAgICAgIGdvLkxheW91dC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdvLkRpYWdyYW0uaW5oZXJpdChGcmVlaGFuZERpYWdyYW1MYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG4gICAgRnJlZWhhbmREaWFncmFtTGF5b3V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBcIkZyZWVoYW5kRGlhZ3JhbUxheW91dFwiO1xyXG4gICAgfTtcclxuXHJcbiAgICBGcmVlaGFuZERpYWdyYW1MYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ0ZyZWVoYW5kRGlhZ3JhbUxheW91dC5kb0xheW91dCcpO1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAvLyBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJGcmVlaGFuZCBEaWFncmFtIExheW91dFwiKTtcclxuXHJcbiAgICAgICAgLy92YWxpZGF0ZUdyb3VwTG9jYXRpb25zKGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkpO1xyXG4gICAgICAgIHZhciBncm91cHMgPSBkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpOyAvLyBnZXQgbmV3IGl0ZXJhdG9yXHJcbiAgICAgICAgd2hpbGUgKGdyb3Vwcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoIWdyb3VwLmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jID0gZ28uUG9pbnQucGFyc2UoZ3JvdXAuZGF0YS5sb2MpO1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAubW92ZShuZXcgZ28uUG9pbnQobG9jLngsIGxvYy55KSk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdGcmVlaGFuZERpYWdyYW1MYXlvdXQsIGdyb3VwOiAnICsgZ3JvdXAgKyAnIHRvIGxvY2F0aW9uOiAnICsgbG9jLnggKyAnLCcgKyBsb2MueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFsbCBhZGp1c3RtZW50IG9mIGxpbmtzIGlzIGRvbmUgZnJvbSBoZXJlLCBub3QgZnJvbSB0aGUgb3RoZXIgbGF5b3V0cy4uLlxyXG4gICAgICAgIGdldExpbmtzQnlOb2Rlcyh0cnVlKTtcclxuICAgICAgICB2YXIgbGlua3MgPSBkaWFncmFtLmxpbmtzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgLy8gaWYgKGlzTmFOKGxpbmsubG9jYXRpb24ueCkpIHtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdsaW5rIGxvY2F0aW9uIGlzTmFOJyk7XHJcbiAgICAgICAgICAgIC8vICAgICBsaW5rLm1vdmUobmV3IGdvLlBvaW50KDAsMCkpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdsaW5rIGxvY2F0aW9uOiAnICsgbGluay5sb2NhdGlvbik7XHJcbiAgICAgICAgICAgIGFkanVzdExpbmtMYXlvdXQobGluayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiRnJlZWhhbmQgRGlhZ3JhbSBMYXlvdXRcIik7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyBpZiBhbnkgZ3JvdXAgaW4gdGhlIGdpdmVuIEl0ZXJhdG9yIGRvZXMgbm90IGhhdmUgYSBsb2NhdGlvbiAoZGF0YS5sb2MpLCBzZXQgb25lXHJcbiAgICAvLyB0aGF0IGRvZXNuJ3Qgb3ZlcmxhcCB3aXRoIHRoZSBvdGhlciBtZW1iZXJzXHJcbiAgICBmdW5jdGlvbiB2YWxpZGF0ZUdyb3VwTG9jYXRpb25zKGdyb3Vwcykge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIEZyZWVoYW5kTGF5b3V0KCkge1xyXG4gICAgICAgIGdvLkxheW91dC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdvLkRpYWdyYW0uaW5oZXJpdChGcmVlaGFuZExheW91dCwgZ28uTGF5b3V0KTtcclxuXHJcbiAgICBGcmVlaGFuZExheW91dC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gXCJGcmVlaGFuZExheW91dFwiO1xyXG4gICAgfTtcclxuXHJcbiAgICBGcmVlaGFuZExheW91dC5wcm90b3R5cGUuZG9MYXlvdXQgPSBmdW5jdGlvbihjb2xsKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcIkZyZWVoYW5kIExheW91dFwiKTtcclxuXHJcbiAgICAgICAgdmFyIHggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgdmFyIHkgPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnk7XHJcblxyXG4gICAgICAgIHZhciBpdCA9IHRoaXMuZ3JvdXAubWVtYmVyUGFydHMuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmICFwYXJ0LmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jID0gZ28uUG9pbnQucGFyc2UocGFydC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdGcmVlaGFuZExheW91dCwgcGFydDogJyArIHBhcnQuZGF0YS50ZXh0ICsgJywgbG9jOiAnICsgbG9jICsgJywgbG9jYXRpb246ICcgKyBwYXJ0LmxvY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIHBhcnQubW92ZShuZXcgZ28uUG9pbnQoeCArIGxvYy54LCB5ICsgbG9jLnkpKTtcclxuICAgICAgICAgICAgICAgIHBhcnQubGF5b3V0LmRvTGF5b3V0KHBhcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiRnJlZWhhbmQgTGF5b3V0XCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIFN0YWNrZWRMYXlvdXQoKSB7XHJcbiAgICAgICAgZ28uTGF5b3V0LmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ28uRGlhZ3JhbS5pbmhlcml0KFN0YWNrZWRMYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG4gICAgU3RhY2tlZExheW91dC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gXCJTdGFja2VkTGF5b3V0XCI7XHJcbiAgICB9O1xyXG5cclxuICAgIFN0YWNrZWRMYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xyXG4gICAgICAgIHRoaXMuZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiU3RhY2tlZCBMYXlvdXRcIik7XHJcbiAgICAgICAgdmFyIG1hcmdpbiA9IGdldFN0YWNrTWFyZ2luKHRoaXMuZ3JvdXApO1xyXG4gICAgICAgIHZhciBzdGFydFggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgdmFyIHN0YXJ0WSA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueSArICh0aGlzLmdyb3VwLnBhcnQuYWN0dWFsQm91bmRzLmhlaWdodCArIG1hcmdpbiAvIDIpO1xyXG4gICAgICAgIGxheW91dE1lbWJlcnNGb3JTdGFja2VkKHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZKTtcclxuICAgICAgICB0aGlzLmRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJTdGFja2VkIExheW91dFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgbWF4IHkgdmFsdWUgYWZ0ZXIgbGF5aW5nIG91dCB0aGUgbGFzdCBwYXJ0XHJcbiAgICBmdW5jdGlvbiBsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZChncm91cCwgc3RhcnRYLCBzdGFydFkpIHtcclxuICAgICAgICB2YXIgbWVtYmVycyA9IGdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKTtcclxuICAgICAgICB2YXIgeCA9IHN0YXJ0WDtcclxuICAgICAgICB2YXIgeSA9IHN0YXJ0WTtcclxuICAgICAgICB2YXIgcm93Q291bnQgPSAwO1xyXG4gICAgICAgIHZhciBtYXhTdGFydFkgPSBzdGFydFk7XHJcbiAgICAgICAgXy5lYWNoKG1lbWJlcnMsIGZ1bmN0aW9uKHBhcnQpIHtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiAhcGFydC5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcmdpbiA9IGdldFN0YWNrTWFyZ2luKHBhcnQpO1xyXG4gICAgICAgICAgICAgICAgcGFydC5tb3ZlKG5ldyBnby5Qb2ludCh4LCB5KSk7XHJcbiAgICAgICAgICAgICAgICBzdGFydFkgPSB5ICsgcGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgbWFyZ2luIC8gMjsgLy8gc3RhcnQgWSBwb3NpdGlvbiBmb3IgcGFydCdzIGNoaWxkcmVuXHJcblxyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvclN0YWNrZWQ6IHN0YXJ0aW5nIGxheW91dCBvZiBjaGlsZHJlbiBvZiAnICsgcGFydCArICcgYXQgJyArIE1hdGgucm91bmQoeCkgKyAnLCcgKyBNYXRoLnJvdW5kKHN0YXJ0WSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0LmlzU3ViR3JhcGhFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxheW91dCBjaGlsZHJlbiBvZiB0aGlzIHBhcnQ7IGNoZWNrIGlmIHdlJ3ZlIGFscmVhZHkgZG9uZSBhIHRhbGxlciBwYXJ0K2NoaWxkcmVuIGluIGN1cnJlbnQgcm93XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4U3RhcnRZID0gTWF0aC5tYXgobWF4U3RhcnRZLCBsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZChwYXJ0LCB4LCBzdGFydFkpKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZDogbGFpZCBvdXQgY2hpbGRyZW4gb2YgJyArIHBhcnQgKyAnLCBtYXhTdGFydFkgaXMgbm93ICcgKyBNYXRoLnJvdW5kKG1heFN0YXJ0WSkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhTdGFydFkgPSBNYXRoLm1heChtYXhTdGFydFksIHN0YXJ0WSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZGVjaWRlIHdoZXRoZXIgdG8gd3JhcFxyXG4gICAgICAgICAgICAgICAgcm93Q291bnQrKztcclxuICAgICAgICAgICAgICAgIGlmIChyb3dDb3VudCA8IDIpIHsgLy8ga2VlcCBnb2luZyBvbiB0aGlzIGxpbmVcclxuICAgICAgICAgICAgICAgICAgICB4ICs9IHBhcnQuYWN0dWFsQm91bmRzLndpZHRoICsgbWFyZ2luO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gd3JhcCB0byBuZXh0IGxpbmVcclxuICAgICAgICAgICAgICAgICAgICB4ID0gc3RhcnRYO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgPSBtYXhTdGFydFkgKyBtYXJnaW4gLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd0NvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBtYXhTdGFydFk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBSaWdodEludmVudG9yeUxheW91dCgpIHtcclxuICAgICAgICBnby5MYXlvdXQuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnby5EaWFncmFtLmluaGVyaXQoUmlnaHRJbnZlbnRvcnlMYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG4gICAgUmlnaHRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiUmlnaHRJbnZlbnRvcnlMYXlvdXRcIjtcclxuICAgIH07XHJcblxyXG4gICAgUmlnaHRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLmRvTGF5b3V0ID0gZnVuY3Rpb24oY29sbCkge1xyXG4gICAgICAgIC8vdGhpcy5kaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJJbnZlbnRvcnkgTGF5b3V0XCIpO1xyXG4gICAgICAgIHZhciBzdGFydFggPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnggKyB0aGlzLmdyb3VwLmFjdHVhbEJvdW5kcy53aWR0aDtcclxuICAgICAgICB2YXIgc3RhcnRZID0gdGhpcy5ncm91cC5sb2NhdGlvbi55ICsgKHRoaXMuZ3JvdXAucGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgZ2V0SW52ZW50b3J5TWFyZ2luKHRoaXMuZ3JvdXApKTtcclxuICAgICAgICBsYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5KHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZLCAnUicpO1xyXG4gICAgICAgIC8vdGhpcy5kaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBMZWZ0SW52ZW50b3J5TGF5b3V0KCkge1xyXG4gICAgICAgIGdvLkxheW91dC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdvLkRpYWdyYW0uaW5oZXJpdChMZWZ0SW52ZW50b3J5TGF5b3V0LCBnby5MYXlvdXQpO1xyXG5cclxuICAgIExlZnRJbnZlbnRvcnlMYXlvdXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiTGVmdEludmVudG9yeUxheW91dFwiO1xyXG4gICAgfTtcclxuXHJcbiAgICBMZWZ0SW52ZW50b3J5TGF5b3V0LnByb3RvdHlwZS5kb0xheW91dCA9IGZ1bmN0aW9uKGNvbGwpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdMZWZ0SW52ZW50b3J5TGF5b3V0LmRvTGF5b3V0LCBncm91cDogJyArIHRoaXMuZ3JvdXAgKyAnLCBsb2NhdGlvbjogJyArIHRoaXMuZ3JvdXAubG9jYXRpb24pO1xyXG4gICAgICAgIC8vIHRoaXMuZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcclxuICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5ncm91cC5sb2NhdGlvbi54O1xyXG4gICAgICAgIHZhciBzdGFydFkgPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnkgKyAodGhpcy5ncm91cC5wYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyBnZXRJbnZlbnRvcnlNYXJnaW4odGhpcy5ncm91cCkpO1xyXG4gICAgICAgIGxheW91dE1lbWJlcnNGb3JJbnZlbnRvcnkodGhpcy5ncm91cCwgc3RhcnRYLCBzdGFydFksICdMJyk7XHJcbiAgICAgICAgLy8gdGhpcy5kaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2hhcmVkIHN0dWZmIGZvciBMZWZ0L1JpZ2h0IEludmVudG9yeSBsYXlvdXRzLi4uXHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgbWF4IHkgdmFsdWUgYWZ0ZXIgbGF5aW5nIG91dCB0aGUgbGFzdCBwYXJ0XHJcbiAgICAvLyBzaWRlIGlzICdMJyBvciAnUidcclxuICAgIGZ1bmN0aW9uIGxheW91dE1lbWJlcnNGb3JJbnZlbnRvcnkoZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZLCBzaWRlKSB7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBnZXRPcmRlcmVkTWVtYmVycyhncm91cCk7XHJcbiAgICAgICAgXy5lYWNoKG1lbWJlcnMsIGZ1bmN0aW9uKHBhcnQpIHtcclxuICAgICAgICAgICAgdmFyIHggPSBzdGFydFg7IC8vIGZvciBsZWZ0LCBqdXN0IHVzZSB4XHJcbiAgICAgICAgICAgIGlmIChzaWRlID09ICdSJylcclxuICAgICAgICAgICAgICAgIHggPSBzdGFydFggLSBwYXJ0LmFjdHVhbEJvdW5kcy53aWR0aDsgLy8gZm9yIHJpZ2h0LCByaWdodC1hbGlnbiBwYXJ0cyB0byBzdGFydFhcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeSwgcGFydDogJyArIHBhcnQgKyAnIHRvIGxvY2F0aW9uOiAnICsgeCArICcsJyArIHN0YXJ0WSk7XHJcbiAgICAgICAgICAgIHBhcnQubW92ZShuZXcgZ28uUG9pbnQoeCwgc3RhcnRZKSk7XHJcbiAgICAgICAgICAgIHN0YXJ0WSArPSBwYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyBnZXRJbnZlbnRvcnlNYXJnaW4ocGFydCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0LmlzU3ViR3JhcGhFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeSwgeSBhZnRlciBtb3Zpbmc6ICcgKyBwYXJ0ICsgJyA9ICcgKyBzdGFydFkpO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRZID0gbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeShwYXJ0LCBzdGFydFgsIHN0YXJ0WSwgc2lkZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gc3RhcnRZICsgZ2V0SW52ZW50b3J5TWFyZ2luKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBncm91cCdzIChub24tUi10aGluZykgbWVtYmVycywgc29ydGVkIGJ5IHRoZSAnb3JkZXInIGRhdGEgcHJvcGVydHlcclxuICAgIGZ1bmN0aW9uIGdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG1lbWJlcnMgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLm1lbWJlclBhcnRzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiAhcGFydC5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVycy5hZGQocGFydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF8uc29ydEJ5KG1lbWJlcnMudG9BcnJheSgpLCBmdW5jdGlvbihtZW1iZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1lbWJlci5kYXRhLm9yZGVyO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBsaW5rIHJvdXRpbmcgYW5kIHZpc2liaWxpdHkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gYWRqdXN0IHRoZSByb3V0aW5nLCB2aXNpYmlsaXR5IGFuZCBvdGhlciBwcm9wZXJ0aWVzIG9mIGEgbGluayBhY2NvcmRpbmcgdG8gdmFyaW91cyBzdHJ1Y3R1cmFsIGNyaXRlcmlhXHJcbiAgICBmdW5jdGlvbiBhZGp1c3RMaW5rTGF5b3V0KGxpbmspIHtcclxuICAgICAgICBpZiAoIWxpbmsgfHwgIWxpbmsuZnJvbU5vZGUgfHwgIWxpbmsudG9Ob2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHZhciBsb2MgPSBsaW5rLmxvY2F0aW9uO1xyXG4gICAgICAgIC8vIGlmIChpc05hTihsb2MueCkgfHwgaXNOYU4obG9jLnkpKSB7XHJcbiAgICAgICAgLy8gICAgIGxpbmsubG9jYXRpb24gPSBuZXcgZ28uUG9pbnQoMTAsIDEwKTtcclxuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ2FkanVzdExpbmtMYXlvdXQsIGxpbmsubG9jYXRpb246ICcgKyBsaW5rLmxvY2F0aW9uKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2FkanVzdExpbmtMYXlvdXQsIGxpbmsubG9jYXRpb246ICcgKyBsaW5rLmxvY2F0aW9uKTtcclxuXHJcbiAgICAgICAgLy8gc2VlIGlmIGxpbmsgaXMgd2l0aGluIGEgc3RhY2tlZCBvciBpbnZlbnRvcnkgbGF5b3V0LCBvciBpZiBpdCdzIGEgaGlkZGVuIFAgbGlua1xyXG4gICAgICAgIHZhciBpbnZlbnRvcnlBbmNlc3RvciA9IGdldENvbW1vbkFuY2VzdG9yV2l0aExheW91dChsaW5rLmZyb21Ob2RlLCBsaW5rLnRvTm9kZSwgWydsZWZ0JywgJ3JpZ2h0J10pO1xyXG4gICAgICAgIHZhciBzdGFja2VkQW5jZXN0b3IgPSBnZXRDb21tb25BbmNlc3RvcldpdGhMYXlvdXQobGluay5mcm9tTm9kZSwgbGluay50b05vZGUsIFsnc3RhY2tlZCddKTtcclxuICAgICAgICB2YXIgaGlkZVBMaW5rID0gKGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnICYmICFtYXAuZ2V0VGVtcGxhdGVzKCkuc2hvd1BMaW5rKGxpbmspKTtcclxuICAgICAgICB2YXIgY3Jvd2RlZFJUaGluZyA9IGhhc0Nyb3dkZWRSVGhpbmcobGluayk7XHJcblxyXG4gICAgICAgIC8vIHNlZSBpZiB0aGlzIGlzIG9uZSBvZiBtdWx0aXBsZSBsaW5rcyBiZXR3ZWVuIHRoZSBzYW1lIHR3byBub2Rlc1xyXG4gICAgICAgIHZhciBzbnBvcyA9IHNlbGYuZ2V0U2FtZU5vZGVzTGlua1Bvc2l0aW9uKGxpbmspO1xyXG4gICAgICAgIHZhciBpc011bHRpTGluayA9IChzbnBvcy5jb3VudCA+IDEpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NucG9zIGZvciBsaW5rICcgKyBsaW5rICsgJzogJyArIHNucG9zLmluZGV4ICsgJyBvZiAnICsgc25wb3MuY291bnQpO1xyXG5cclxuICAgICAgICBpZiAoaW52ZW50b3J5QW5jZXN0b3IpIHtcclxuICAgICAgICAgICAgYXBwbHlJbnZlbnRvcnlDdXJ2ZVJvdXRpbmcobGluaywgc25wb3MsIGludmVudG9yeUFuY2VzdG9yLmRhdGEubGF5b3V0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlzTXVsdGlMaW5rKSB7XHJcbiAgICAgICAgICAgIGFwcGx5TXVsdGlsaW5rQ3VydmVSb3V0aW5nKGxpbmssIHNucG9zKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNyb3dkZWRSVGhpbmcpIHtcclxuICAgICAgICAgICAgYXBwbHlJbnZlbnRvcnlDdXJ2ZVJvdXRpbmcobGluaywgc25wb3MsICdsZWZ0Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXBwbHlTdHJhaWdodFJvdXRpbmcobGluayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzaG93IGxpbmsgb25seSBpZiBib3RoIGNvbm5lY3RlZCB0aGluZ3MgYXJlIHZpc2libGUgKG5vIGNvbGxhcHNlZCBhbmNlc3RvcnMpOyBcclxuICAgICAgICAvLyBoaWRlIGlmIGJvdGggYXJlIGluIHN0YWNrZWQgbGF5b3V0IG9yIGlmIGl0J3MgYSBQLWxpbmsgdGhhdCB3ZSBzaG91bGRuJ3QgYmUgc2hvd2luZyBub3dcclxuICAgICAgICBpZiAoc2VsZi5mcm9tQW5kVG9Ob2Rlc0FyZVZpc2libGUobGluaykgJiYgIXN0YWNrZWRBbmNlc3RvciAmJiAhaGlkZVBMaW5rKSB7XHJcbiAgICAgICAgICAgIGxpbmsub3BhY2l0eSA9IDE7XHJcbiAgICAgICAgICAgIHNob3dMYWJlbE5vZGVzKGxpbmssIHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxpbmsub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgICAgIHNob3dMYWJlbE5vZGVzKGxpbmssIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzogZGV0ZWN0IHdoZW4gdGhlIFItdGhpbmcgb3ZlcmxhcHMgYm90aCBmcm9tIGFuZCB0byBub2Rlcywgc28gd2UgY2FuIGNoYW5nZSB0aGUgbGluayByb3V0aW5nXHJcbiAgICBmdW5jdGlvbiBoYXNDcm93ZGVkUlRoaW5nKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd0xhYmVsTm9kZXMobGluaywgc2hvdykge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3Nob3dMYWJlbE5vZGVzLCBsaW5rOiAnICsgbGluayArICcsIHNob3c6ICcgKyBzaG93KTtcclxuICAgICAgICB2YXIgaXQgPSBsaW5rLmxhYmVsTm9kZXM7XHJcbiAgICAgICAgaWYgKGl0KSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAudmlzaWJsZSA9IHNob3c7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwLmxheW91dC5kb0xheW91dChncm91cCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgbGluayBpcyBiZXR3ZWVuIHR3byB0aGluZ3MgaW4gdGhlIHNhbWUgaW52ZW50b3J5IGxheW91dCAoc2luZ2xlIG9yIG11bHRpcGxlKSxcclxuICAgIC8vIG1ha2UgdGhlIGxpbmUgbW9yZSBvciBsZXNzIGNpcmN1bGFyIG9uIHRoZSBhcHByb3ByaWF0ZSBzaWRlXHJcbiAgICBmdW5jdGlvbiBhcHBseUludmVudG9yeUN1cnZlUm91dGluZyhsaW5rLCBzbnBvcywgYW5jZXN0b3JMYXlvdXQpIHtcclxuICAgICAgICBpZiAoYW5jZXN0b3JMYXlvdXQgPT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgIGxpbmsuZnJvbVNwb3QgPSBnby5TcG90LkxlZnQ7XHJcbiAgICAgICAgICAgIGxpbmsudG9TcG90ID0gZ28uU3BvdC5MZWZ0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYW5jZXN0b3JMYXlvdXQgPT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICBsaW5rLmZyb21TcG90ID0gZ28uU3BvdC5SaWdodDtcclxuICAgICAgICAgICAgbGluay50b1Nwb3QgPSBnby5TcG90LlJpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYXNwZWN0IHJhdGlvIGZvciB0aGUgbGluayBjdXJ2ZXMgLSBtYWtlIHRoaXMgc21hbGxlciB0byBtYWtlIHRoZW0gdGFsbGVyLCBsYXJnZXIgdG8gbWFrZSB0aGVtIGZhdHRlclxyXG4gICAgICAgIHZhciBjdXJ2ZVJhdGlvID0gMC42O1xyXG5cclxuICAgICAgICB2YXIgeTEgPSBsaW5rLmZyb21Ob2RlLmFjdHVhbEJvdW5kcy55O1xyXG4gICAgICAgIHZhciB5MiA9IGxpbmsudG9Ob2RlLmFjdHVhbEJvdW5kcy55O1xyXG5cclxuICAgICAgICB2YXIgeURpZmYgPSBNYXRoLmFicyh5MiAtIHkxKTtcclxuICAgICAgICB2YXIgYyA9ICh5RGlmZiA9PT0gMCA/IDUwIDogTWF0aC5mbG9vcih5RGlmZiAqIGN1cnZlUmF0aW8pKSArIDEwMCAqIChzbnBvcy5pbmRleCAvIHNucG9zLmNvdW50KTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwieURpZmYgPSBcIiArIHlEaWZmICsgJywgYyA9ICcgKyBjICsgJyAoJyArIGxpbmsuZnJvbU5vZGUuZGF0YS50ZXh0ICsgJyAtICcgKyBwMSArICcgLSB0byAnICsgbGluay50b05vZGUuZGF0YS50ZXh0ICsgJyAtICcgKyBwMiArICcpJyk7XHJcblxyXG4gICAgICAgIGxpbmsuY3VydmUgPSBnby5MaW5rLkJlemllcjtcclxuICAgICAgICBsaW5rLmZyb21FbmRTZWdtZW50TGVuZ3RoID0gYztcclxuICAgICAgICBsaW5rLnRvRW5kU2VnbWVudExlbmd0aCA9IGM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgbm9uLWludmVudG9yeSBsaW5rIGlzIG9uZSBvZiBtdWx0aXBsZSBvbmVzIGJldHdlZW4gc2FtZSBub2RlcywgbWFrZSBpdCBjdXJ2ZWRcclxuICAgIGZ1bmN0aW9uIGFwcGx5TXVsdGlsaW5rQ3VydmVSb3V0aW5nKGxpbmssIHNucG9zKSB7XHJcbiAgICAgICAgbGluay5mcm9tU3BvdCA9IGdvLlNwb3QuRGVmYXVsdDtcclxuICAgICAgICBsaW5rLnRvU3BvdCA9IGdvLlNwb3QuRGVmYXVsdDtcclxuICAgICAgICBsaW5rLmN1cnZlID0gZ28uTGluay5CZXppZXI7XHJcbiAgICAgICAgLy8gY3VydmluZXNzIHZhbHVlcyBiYXNlZCBvbiBudW1iZXIgb2YgbGlua3M6XHJcbiAgICAgICAgLy8gMjogLTI1IDI1XHJcbiAgICAgICAgLy8gMzogLTUwIDAgNTBcclxuICAgICAgICAvLyA0OiAtMTAwIC01MCAwIDUwIDEwMFxyXG4gICAgICAgIHZhciByYW5nZVNpemUgPSAxMCAqIChzbnBvcy5jb3VudCAtIDEpO1xyXG4gICAgICAgIHZhciByYW5nZUluY3JlbWVudCA9IDEwO1xyXG4gICAgICAgIGlmIChzbnBvcy5oYXNSVGhpbmcpIHtcclxuICAgICAgICAgICAgcmFuZ2VTaXplID0gMTAwICogKHNucG9zLmNvdW50IC0gMSk7XHJcbiAgICAgICAgICAgIHJhbmdlSW5jcmVtZW50ID0gMTAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWRqdXN0IGN1cnZpbmVzcyBmb3Igc21hbGxlciBzY2FsZXNcclxuICAgICAgICB2YXIgbGlua1NjYWxlRmFjdG9yID0gc2VsZi5nZXRMaW5rU3Ryb2tlV2lkdGgobGluaykgLyAyOyAvLyAyIGlzIG1heCBzdHJva2Ugd2lkdGhcclxuICAgICAgICByYW5nZVNpemUgKj0gbGlua1NjYWxlRmFjdG9yO1xyXG4gICAgICAgIHJhbmdlSW5jcmVtZW50ICo9IGxpbmtTY2FsZUZhY3RvcjtcclxuXHJcbiAgICAgICAgdmFyIHJhbmdlU3RhcnQgPSAwIC0gcmFuZ2VTaXplIC8gMjtcclxuXHJcbiAgICAgICAgbGluay5jdXJ2aW5lc3MgPSAocmFuZ2VTdGFydCArIHJhbmdlSW5jcmVtZW50ICogc25wb3MuaW5kZXgpICogc25wb3Mub3JpZW50YXRpb247XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2FwcGx5TXVsdGlsaW5rQ3VydmVSb3V0aW5nLCBsaW5rOiAnICsgbGluayArICcsIGN1cnZpbmVzczogJyArIGxpbmsuY3VydmluZXNzKTsgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gZG8gbm9ybWFsIHN0cmFpZ2h0IGxpbmVzIGZvciBmcmVlaGFuZCBsYXlvdXQsIG9yIGxpbmtzIGJldHdlZW4gZGVzY2VuZGFudHMgb2YgdGhpbmdzIHdpdGggZGlmZmVyZW50IGxheW91dHNcclxuICAgIGZ1bmN0aW9uIGFwcGx5U3RyYWlnaHRSb3V0aW5nKGxpbmspIHtcclxuICAgICAgICBsaW5rLmZyb21TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsudG9TcG90ID0gZ28uU3BvdC5EZWZhdWx0O1xyXG4gICAgICAgIGxpbmsucm91dGluZyA9IGdvLkxpbmsuTm9ybWFsO1xyXG4gICAgICAgIGxpbmsuY3VydmUgPSBnby5MaW5rLk5vbmU7XHJcbiAgICAgICAgbGluay5jdXJ2aW5lc3MgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBjYWxjdWxhdGUgaG93IG1hbnkgbGlua3MgdGhlcmUgYXJlIGJldHdlZW4gYSBsaW5rJ3Mgbm9kZXMgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgb2YgdGhlIGZvcm1hdCB7IGluZGV4OiAxLCBjb3VudDogMiwgb3JpZW50YXRpb246IC0xLCBoYXNSVGhpbmc6IGZhbHNlIH0sIFxyXG4gICAgLy8gaW5kaWNhdGluZyBob3cgbWFueSBvdGhlciBsaW5rcyB0aGVyZSBhcmUgYmV0d2VlbiB0aGUgc2FtZSBwYWlyIG9mIG5vZGVzLFxyXG4gICAgLy8gd2hlcmUgdGhlIGdpdmVuIGxpbmsgZmFsbHMgd2l0aGluIHRoaXMgbGlzdCwgYW5kIHdoYXQgaXRzIG9yaWVudGF0aW9uIGlzLlxyXG4gICAgdGhpcy5nZXRTYW1lTm9kZXNMaW5rUG9zaXRpb24gPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgdmFyIGxpbmtzQnlOb2RlcyA9IGdldExpbmtzQnlOb2Rlcyh0cnVlKTtcclxuICAgICAgICAvLyBnZXQgbGlua3Mgd2l0aCB0aGUgc2FtZSBrZXkgYXMgdGhpcyBvbmUgKGNvbm5lY3Rpbmcgc2FtZSBub2RlcylcclxuICAgICAgICB2YXIgc2FtZUxpbmtzID0gXy53aGVyZShsaW5rc0J5Tm9kZXMsIHtcclxuICAgICAgICAgICAga2V5OiBnZXRTYW1lTm9kZXNMaW5rS2V5KGxpbmspXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGRlZmF1bHQgcmV0dXJuIHZhbHVlXHJcbiAgICAgICAgdmFyIHNucG9zID0ge1xyXG4gICAgICAgICAgICBpbmRleDogMCxcclxuICAgICAgICAgICAgY291bnQ6IDEsXHJcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAxLFxyXG4gICAgICAgICAgICBoYXNSVGhpbmc6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBzZXQgaW5kZXgsIGNvdW50LCBvcmllbnRhdGlvblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2FtZUxpbmtzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChzYW1lTGlua3NbaV0ubGluayA9PSBsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICBzbnBvcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaSxcclxuICAgICAgICAgICAgICAgICAgICBjb3VudDogc2FtZUxpbmtzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbjogZ2V0TGlua09yaWVudGF0aW9uKGxpbmspXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNoZWNrIGZvciBSdGhpbmdcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2FtZUxpbmtzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChzYW1lTGlua3NbaV0uaGFzUlRoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBzbnBvcy5oYXNSVGhpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzbnBvcztcclxuICAgIH07XHJcblxyXG4gICAgdmFyIF9saW5rc0J5Tm9kZXMgPSBudWxsO1xyXG5cclxuICAgIC8vIHJlZnJlc2hlcyB0aGUgY2FjaGVkIGxpc3Qgb2YgYWxsIGxpbmtzIHdpdGgga2V5cywgdG8gZmFjaWxpdGF0ZSBncm91cGluZyB0aGVtIGFjY29yZGluZyB0byBjb25uZWN0ZWQgbm9kZXNcclxuICAgIGZ1bmN0aW9uIGdldExpbmtzQnlOb2RlcyhyZWZyZXNoKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0TGlua3NCeU5vZGVzJyk7XHJcbiAgICAgICAgaWYgKCFzZWxmLl9saW5rc0J5Tm9kZXMgfHwgcmVmcmVzaCkge1xyXG4gICAgICAgICAgICBzZWxmLl9saW5rc0J5Tm9kZXMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgbGlua3MgPSBkaWFncmFtLmxpbmtzLml0ZXJhdG9yO1xyXG4gICAgICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGdldFNhbWVOb2Rlc0xpbmtLZXkobGluayk7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbGlua3NCeU5vZGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluazogbGluayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzUlRoaW5nOiAobGluay5sYWJlbE5vZGVzLmNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2VsZi5fbGlua3NCeU5vZGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgYSBrZXkgdXNlZCB0byBncm91cCBsaW5rcyBhY2NvcmRpbmcgdG8gd2hpY2ggcGFpciBvZiBub2RlcyB0aGV5IGNvbm5lY3QuXHJcbiAgICAvLyBUaGUgcmV0dXJuZWQga2V5IGlzIG5vbi1lbXB0eSBmb3IgcmVndWxhciBsaW5rcyBhbmQgUCBsaW5rcyB0aGF0IHNob3VsZCBiZSBzaG93biBjdXJyZW50bHksXHJcbiAgICAvLyBzbyB0aGF0IHRoZXNlIHdpbGwgYWxsIGJlIHJvdXRlZCBieSB0aGUgc2FtZSBydWxlcy4gQSBudWxsIGtleSBpcyByZXR1cm5lZCBmb3IgYW55IG90aGVyIFxyXG4gICAgLy8gbGlua3MsIGluZGljYXRpbmcgdGhhdCBubyBncm91cGluZyBpcyByZXF1aXJlZC5cclxuICAgIGZ1bmN0aW9uIGdldFNhbWVOb2Rlc0xpbmtLZXkobGluaykge1xyXG4gICAgICAgIC8vICAgICAgICBpZiAoc2VsZi5pc1JMaW5rKGxpbmspIHx8IChzZWxmLmlzUExpbmsobGluaykgJiYgbWFwLmdldFRlbXBsYXRlcygpLnNob3dQTGluayhsaW5rKSkpIHtcclxuICAgICAgICBpZiAoc2VsZi5pc1JMaW5rKGxpbmspKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBbbGluay5mcm9tTm9kZS50b1N0cmluZygpLCBsaW5rLnRvTm9kZS50b1N0cmluZygpXS5zb3J0KCkuam9pbignfCcpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdrZXk6ICcgKyBrZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBXZSB1c2UgdGhpcyB0byBkaXN0aW5ndWlzaCBhbiBBLUIgbGluayBmcm9tIGEgQi1BIGxpbmsgKGJhc2VkIG9uIGZyb21Ob2RlIGFuZCB0b05vZGUsIHdoaWNoXHJcbiAgICAvLyBpcyBpbmRlcGVuZGVudCBvZiB0aGUgYXJyb3doZWFkIHNldHRpbmdzKSB3aGVuIHNldHRpbmcgY3VydmluZXNzLCBiZWNhdXNlIHNldHRpbmcgY3VydmluZXNzID0gMjVcclxuICAgIC8vIG9uIGFuIEEtQiBsaW5rIGlzIHRoZSBzYW1lIGFzIGN1cnZpbmVzcyA9IC0yNSBvbiBhIEItQSBsaW5rLlxyXG4gICAgZnVuY3Rpb24gZ2V0TGlua09yaWVudGF0aW9uKGxpbmspIHtcclxuICAgICAgICBpZiAobGluay5mcm9tTm9kZSAmJiBsaW5rLnRvTm9kZSAmJiBsaW5rLmZyb21Ob2RlLnRvU3RyaW5nKCkgPCBsaW5rLnRvTm9kZS50b1N0cmluZygpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gbGluayB0ZXN0cyAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmlzUkxpbmsgPSBmdW5jdGlvbihsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiAhbGluay5kYXRhLmNhdGVnb3J5ICYmIGxpbmsuZnJvbU5vZGUgJiYgbGluay50b05vZGU7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNETGluayA9IGZ1bmN0aW9uKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gbGluayBpbnN0YW5jZW9mIGdvLkxpbmsgJiYgbGluay5kYXRhICYmIGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnRCc7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNQTGluayA9IGZ1bmN0aW9uKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gbGluayBpbnN0YW5jZW9mIGdvLkxpbmsgJiYgbGluay5kYXRhICYmIGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCc7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNHcm91cCA9IGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBnby5Hcm91cDtcclxuICAgIH07XHJcbn07IiwiLy8gZnVuY3Rpb25zIGZvciBjcmVhdGluZyBhbmQgbWFuaXB1bGF0aW5nIHRoZSBtYXAgKGkuZS4gRGlhZ3JhbSlcclxuXHJcblNhbmRiYW5rRWRpdG9yLk1hcCA9IGZ1bmN0aW9uKCRzY29wZSkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSBjb25zdGFudHMgLS0tLS0tLS0tLS0tLS0tXHJcbiAgICB0aGlzLkxFRlQgPSAnbGVmdCc7XHJcbiAgICB0aGlzLlJJR0hUID0gJ3JpZ2h0JztcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gaW5zdGFuY2UgdmFycyAtLS0tLS0tLS0tXHJcblxyXG4gICAgdmFyIF9kaWFncmFtID0gbnVsbDtcclxuXHJcbiAgICAvLyBjb21wb25lbnRzXHJcbiAgICB2YXIgX2FuYWx5dGljcyA9IG51bGw7XHJcbiAgICB2YXIgX2F0dGFjaG1lbnRzID0gbnVsbDtcclxuICAgIHZhciBfYXV0b3NhdmUgPSBudWxsO1xyXG4gICAgdmFyIF9nZW5lcmF0b3IgPSBudWxsO1xyXG4gICAgLy92YXIgX2hpc3RvcnkgPSBudWxsO1xyXG4gICAgdmFyIF9sYXlvdXRzID0gbnVsbDtcclxuICAgIHZhciBfcGVyc3BlY3RpdmVzID0gbnVsbDtcclxuICAgIHZhciBfcHJlc2VudGVyID0gbnVsbDtcclxuICAgIHZhciBfc3RhbmRhcmRzID0gbnVsbDtcclxuICAgIHZhciBfdGVtcGxhdGVzID0gbnVsbDtcclxuICAgIHZhciBfdGVzdHMgPSBudWxsO1xyXG4gICAgdmFyIF91aSA9IG51bGw7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIGNvbXBvbmVudCBhY2Nlc3NvcnMgLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldENvbXBvbmVudHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgX2FuYWx5dGljcyxcclxuICAgICAgICAgICAgX2F0dGFjaG1lbnRzLFxyXG4gICAgICAgICAgICBfYXV0b3NhdmUsXHJcbiAgICAgICAgICAgIF9nZW5lcmF0b3IsXHJcbiAgICAgICAgICAgIC8vIF9oaXN0b3J5LCBcclxuICAgICAgICAgICAgX2xheW91dHMsXHJcbiAgICAgICAgICAgIF9wZXJzcGVjdGl2ZXMsXHJcbiAgICAgICAgICAgIF9wcmVzZW50ZXIsXHJcbiAgICAgICAgICAgIF9zdGFuZGFyZHMsXHJcbiAgICAgICAgICAgIF90ZW1wbGF0ZXMsXHJcbiAgICAgICAgICAgIF90ZXN0cyxcclxuICAgICAgICAgICAgX3VpXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdldEFuYWx5dGljcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfYW5hbHl0aWNzO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZ2V0QXR0YWNobWVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX2F0dGFjaG1lbnRzO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZ2V0QXV0b3NhdmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX2F1dG9zYXZlO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZ2V0R2VuZXJhdG9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9nZW5lcmF0b3I7XHJcbiAgICB9O1xyXG4gICAgLy8gdGhpcy5nZXRIaXN0b3J5ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX2hpc3Rvcnk7IH07XHJcbiAgICB0aGlzLmdldExheW91dHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX2xheW91dHM7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5nZXRQZXJzcGVjdGl2ZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX3BlcnNwZWN0aXZlcztcclxuICAgIH07XHJcbiAgICB0aGlzLmdldFByZXNlbnRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfcHJlc2VudGVyO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZ2V0U3RhbmRhcmRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdGFuZGFyZHM7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5nZXRUZW1wbGF0ZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX3RlbXBsYXRlcztcclxuICAgIH07XHJcbiAgICB0aGlzLmdldFRlc3RzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF90ZXN0cztcclxuICAgIH07XHJcbiAgICB0aGlzLmdldFVpID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF91aTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gbWFwIGluaXQgLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIC8vIGluaXRpYWxpemUgY29tcG9uZW50c1xyXG4gICAgICAgIF9hbmFseXRpY3MgPSBuZXcgU2FuZGJhbmtFZGl0b3IuQW5hbHl0aWNzKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgX2F0dGFjaG1lbnRzID0gbmV3IFNhbmRiYW5rRWRpdG9yLkF0dGFjaG1lbnRzKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgX2F1dG9zYXZlID0gbmV3IFNhbmRiYW5rRWRpdG9yLkF1dG9zYXZlKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgX2dlbmVyYXRvciA9IG5ldyBTYW5kYmFua0VkaXRvci5HZW5lcmF0b3IoJHNjb3BlLCBzZWxmKTtcclxuICAgICAgICAvLyBfaGlzdG9yeSA9IG5ldyBTYW5kYmFua0VkaXRvci5IaXN0b3J5KCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgX2xheW91dHMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuTGF5b3V0cygkc2NvcGUsIHNlbGYpO1xyXG4gICAgICAgIF9wZXJzcGVjdGl2ZXMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuUGVyc3BlY3RpdmVzKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgX3ByZXNlbnRlciA9IG5ldyBTYW5kYmFua0VkaXRvci5QcmVzZW50ZXIoJHNjb3BlLCBzZWxmKTtcclxuICAgICAgICBfc3RhbmRhcmRzID0gbmV3IFNhbmRiYW5rRWRpdG9yLlN0YW5kYXJkcygkc2NvcGUsIHNlbGYpO1xyXG4gICAgICAgIF90ZW1wbGF0ZXMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVGVtcGxhdGVzKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgX3Rlc3RzID0gbmV3IFNhbmRiYW5rRWRpdG9yLlRlc3RzKCRzY29wZSwgc2VsZik7XHJcbiAgICAgICAgX3VpID0gbmV3IFNhbmRiYW5rRWRpdG9yLlVJKCRzY29wZSwgc2VsZik7XHJcblxyXG4gICAgICAgIC8vIGNhbGwgaW5pdCBmb3IgZWFjaCBjb21wb25lbnQsIGlmIGRlZmluZWRcclxuICAgICAgICBfLmVhY2goZ2V0Q29tcG9uZW50cygpLCBmdW5jdGlvbihjb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQuaW5pdClcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5pbml0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSBkaWFncmFtXHJcbiAgICAgICAgX2RpYWdyYW0gPSBuZXcgZ28uRGlhZ3JhbShcImRpYWdyYW1cIik7XHJcbiAgICAgICAgX2RpYWdyYW0uaW5pdGlhbENvbnRlbnRBbGlnbm1lbnQgPSBnby5TcG90LkNlbnRlcjtcclxuICAgICAgICBfZGlhZ3JhbS5pbml0aWFsVmlld3BvcnRTcG90ID0gZ28uU3BvdC5DZW50ZXI7XHJcbiAgICAgICAgX2RpYWdyYW0uaW5pdGlhbERvY3VtZW50U3BvdCA9IGdvLlNwb3QuQ2VudGVyO1xyXG4gICAgICAgIF9kaWFncmFtLmhhc0hvcml6b250YWxTY3JvbGxiYXIgPSBmYWxzZTtcclxuICAgICAgICBfZGlhZ3JhbS5oYXNWZXJ0aWNhbFNjcm9sbGJhciA9IGZhbHNlO1xyXG4gICAgICAgIF9kaWFncmFtLnBhZGRpbmcgPSA1MDA7XHJcbiAgICAgICAgX2RpYWdyYW0ubGF5b3V0ID0gX2xheW91dHMuZ2V0RnJlZWhhbmREaWFncmFtTGF5b3V0KCk7XHJcblxyXG4gICAgICAgIGluaXRUb29scygpO1xyXG4gICAgICAgIF90ZW1wbGF0ZXMuaW5pdFRlbXBsYXRlcyhfZGlhZ3JhbSk7IC8vIHNldCB1cCB0ZW1wbGF0ZXMsIGN1c3RvbWl6ZSB0ZW1wb3JhcnkgbGluayBiZWhhdmlvciBcclxuICAgICAgICBhZGREaWFncmFtTGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIF90ZW1wbGF0ZXMuYWRkRXhwb3J0Rm9vdGVyKCk7XHJcblxyXG4gICAgICAgIC8vIHdhdGNoIGZvciB0YWIgY2hhbmdlc1xyXG4gICAgICAgIC8vIFRPRE86IHJlc3RvcmUgbm9uLUFuZ3VsYXIgdmVyc2lvbiBvZiB0aGlzXHJcbiAgICAgICAgLy8kc2NvcGUuJHdhdGNoKCdjdXJyZW50VGFiJywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgLy8gICAgc2VsZi5jdXJyZW50VGFiQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgICAgIC8vfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoaXMgaXMgY2FsbGVkIGJ5IGEgJHNjb3BlLiR3YXRjaCBpbiBpbml0KClcclxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnY3VycmVudFRhYkNoYW5nZWQsIG5ld1ZhbHVlOiAnICsgbmV3VmFsdWUgKyAnLCBvbGRWYWx1ZTogJyArIG9sZFZhbHVlKTtcclxuICAgICAgICAvLyBub3RpZnkgYW55IGludGVyZXN0ZWQgY29tcG9uZW50c1xyXG4gICAgICAgIF8uZWFjaChnZXRDb21wb25lbnRzKCksIGZ1bmN0aW9uKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50ICYmIGNvbXBvbmVudC5jdXJyZW50VGFiQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50LmN1cnJlbnRUYWJDaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8kc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0RGlhZ3JhbSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfZGlhZ3JhbTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbWlzYy4gdG9vbCBjb25maWd1cmF0aW9uXHJcbiAgICBmdW5jdGlvbiBpbml0VG9vbHMoKSB7XHJcbiAgICAgICAgLy8gZGlzYWJsZSBjbGlja2luZyBvbiBUZXh0QmxvY2tzIHRvIGVkaXQgLSB3ZSB3aWxsIGludm9rZSBlZGl0aW5nIGluIG90aGVyIHdheXNcclxuICAgICAgICBfZGlhZ3JhbS5hbGxvd1RleHRFZGl0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIHNlbGVjdCB0ZXh0IHdoZW4gYWN0aXZhdGluZyBlZGl0b3I7IFxyXG4gICAgICAgIC8vIHVzZSBzaGlmdC1lbnRlciB0byBjcmVhdGUgbmV3IGxpbmVzLCBlbnRlciB0byBmaW5pc2ggZWRpdGluZyAoTkI6IGVkaXRvciBoYXMgbXVsdGlsaW5lPXRydWUpXHJcbiAgICAgICAgdmFyIHRleHRUb29sID0gX2RpYWdyYW0udG9vbE1hbmFnZXIudGV4dEVkaXRpbmdUb29sO1xyXG4gICAgICAgIHRleHRUb29sLmRvQWN0aXZhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZ28uVGV4dEVkaXRpbmdUb29sLnByb3RvdHlwZS5kb0FjdGl2YXRlLmNhbGwodGV4dFRvb2wpO1xyXG4gICAgICAgICAgICBpZiAodGV4dFRvb2wuZGVmYXVsdFRleHRFZGl0b3IpIHtcclxuICAgICAgICAgICAgICAgIHRleHRUb29sLmRlZmF1bHRUZXh0RWRpdG9yLnNlbGVjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRleHRUb29sLmRlZmF1bHRUZXh0RWRpdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS53aGljaCA9PSAxMyAmJiAhZS5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnby5UZXh0RWRpdGluZ1Rvb2wucHJvdG90eXBlLmFjY2VwdFRleHQuY2FsbCh0ZXh0VG9vbCwgZ28uVGV4dEVkaXRpbmdUb29sLkxvc3RGb2N1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBoYW5kbGUgZGVsZXRlIGtleSBvbiBNYWMgKGRlZmF1bHQgYmVoYXZpb3Igb25seSB1c2VzIGZuLURlbGV0ZSB0byBkZWxldGUgZnJvbSBjYW52YXMpXHJcbiAgICAgICAgX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIuZG9LZXlEb3duID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBlID0gX2RpYWdyYW0ubGFzdElucHV0O1xyXG4gICAgICAgICAgICB2YXIgY21kID0gX2RpYWdyYW0uY29tbWFuZEhhbmRsZXI7XHJcbiAgICAgICAgICAgIGlmIChlLmV2ZW50LndoaWNoID09PSA4KSB7XHJcbiAgICAgICAgICAgICAgICBjbWQuZGVsZXRlU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBnby5Db21tYW5kSGFuZGxlci5wcm90b3R5cGUuZG9LZXlEb3duLmNhbGwoY21kKTsgLy8gY2FsbCBiYXNlIG1ldGhvZCB3aXRoIG5vIGFyZ3VtZW50c1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gW2Rpc2FibGUga2V5Ym9hcmQgc2hvcnRjdXRzLCBhcyB0aGVzZSBkbyBub3QgZG8gY2VudGVyaW5nIG9uIHpvb20sIFxyXG4gICAgICAgIC8vIGFuZCBjYW4gbGVhZCB0byBjb25mdXNpb24gd2l0aCBicm93c2VyIHpvb20gKHdoaWNoIGdldHMgZmlyZWQgZGVwZW5kcyBvbiBmb2N1cyldXHJcbiAgICAgICAgLy8gLSB0dXJuZWQgYmFjayBvbiB0byBzdXBwb3J0IHBpbmNoL3pvb20gb24gaVBhZFxyXG4gICAgICAgIF9kaWFncmFtLmFsbG93Wm9vbSA9IHRydWU7XHJcblxyXG4gICAgICAgIF9kaWFncmFtLnRvb2xNYW5hZ2VyLm1vdXNlV2hlZWxCZWhhdmlvciA9IGdvLlRvb2xNYW5hZ2VyLldoZWVsWm9vbTtcclxuXHJcbiAgICAgICAgLy8gZGVjaWRlIHdoYXQga2luZHMgb2YgUGFydHMgY2FuIGJlIGFkZGVkIHRvIGEgR3JvdXAgb3IgdG8gdG9wLWxldmVsXHJcbiAgICAgICAgLy8gX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIubWVtYmVyVmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChncnAsIG5vZGUpIHtcclxuICAgICAgICAvLyAgICAgLy9pZiAoZ3JwIGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgbm9kZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSByZXR1cm4gZmFsc2U7ICAvLyBjYW5ub3QgYWRkIEdyb3VwcyB0byBHcm91cHNcclxuICAgICAgICAvLyAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgLy8gfTtcclxuXHJcbiAgICAgICAgLy8gZGVmYXVsdCBsaW5rIGF0dHJpYnV0ZXNcclxuICAgICAgICBfZGlhZ3JhbS50b29sTWFuYWdlci5saW5raW5nVG9vbC5hcmNoZXR5cGVMaW5rRGF0YSA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ25vQXJyb3dzJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGFsbG93IGRvdWJsZS1jbGljayBpbiBiYWNrZ3JvdW5kIHRvIGNyZWF0ZSBhIG5ldyBub2RlXHJcbiAgICAgICAgX2RpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuYXJjaGV0eXBlTm9kZURhdGEgPSBnZXROZXdUaGluZ0RhdGEoKTtcclxuXHJcbiAgICAgICAgLy8gaG93IGxvbmcgbW91c2UgbXVzdCBiZSBoZWxkIHN0YXRpb25hcnkgYmVmb3JlIHN0YXJ0aW5nIGEgZHJhZy1zZWxlY3QgKGluc3RlYWQgb2YgYSBzY3JvbGwpIC0gZGVmYXVsdCB3YXMgMTc1bXNcclxuICAgICAgICBfZGlhZ3JhbS50b29sTWFuYWdlci5kcmFnU2VsZWN0aW5nVG9vbC5kZWxheSA9IDQwMDtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSBoYW5kbGluZyBvZiBEaWFncmFtRXZlbnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gYWRkRGlhZ3JhbUxpc3RlbmVycygpIHtcclxuXHJcbiAgICAgICAgLy8gRGlhZ3JhbUV2ZW50cyB0byBiZSBoYW5kbGVkIGhlcmUgb3IgYnkgYSBjb21wb25lbnRcclxuICAgICAgICB2YXIgZGlhZ3JhbUV2ZW50cyA9IFtcclxuICAgICAgICAgICAgXCJJbml0aWFsTGF5b3V0Q29tcGxldGVkXCIsXHJcbiAgICAgICAgICAgIFwiQ2hhbmdlZFNlbGVjdGlvblwiLFxyXG4gICAgICAgICAgICBcIkJhY2tncm91bmRTaW5nbGVDbGlja2VkXCIsXHJcbiAgICAgICAgICAgIFwiU2VsZWN0aW9uQ29waWVkXCIsXHJcbiAgICAgICAgICAgIFwiU2VsZWN0aW9uTW92ZWRcIixcclxuICAgICAgICAgICAgXCJTZWxlY3Rpb25EZWxldGluZ1wiLFxyXG4gICAgICAgICAgICBcIlNlbGVjdGlvbkRlbGV0ZWRcIixcclxuICAgICAgICAgICAgXCJQYXJ0Q3JlYXRlZFwiLFxyXG4gICAgICAgICAgICBcIlBhcnRSZXNpemVkXCIsXHJcbiAgICAgICAgICAgIFwiQ2xpcGJvYXJkQ2hhbmdlZFwiLFxyXG4gICAgICAgICAgICBcIkNsaXBib2FyZFBhc3RlZFwiLFxyXG4gICAgICAgICAgICBcIkxpbmtEcmF3blwiLFxyXG4gICAgICAgICAgICBcIkxpbmtSZWxpbmtlZFwiLFxyXG4gICAgICAgICAgICBcIlZpZXdwb3J0Qm91bmRzQ2hhbmdlZFwiXHJcbiAgICAgICAgXTtcclxuICAgICAgICBfLmVhY2goZGlhZ3JhbUV2ZW50cywgZnVuY3Rpb24oZXZlbnROYW1lKSB7XHJcbiAgICAgICAgICAgIF9kaWFncmFtLmFkZERpYWdyYW1MaXN0ZW5lcihldmVudE5hbWUsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIGJyb2FkY2FzdERpYWdyYW1FdmVudChldmVudE5hbWUsIGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgX2RpYWdyYW0uYWRkRGlhZ3JhbUxpc3RlbmVyKFwiQmFja2dyb3VuZENvbnRleHRDbGlja2VkXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgLy8gVE9ETzogdHVybiBvZmYgaW4gcHJvZHVjdGlvblxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdkaWFncmFtIG1vZGVsOicgKyBfZGlhZ3JhbS5tb2RlbC50b0pzb24oKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYnJvYWRjYXN0cyB0aGUgZ2l2ZW4gRGlhZ3JhbUV2ZW50IChzZWUgYXBpZG9jcyBmb3IgZ28uRGlhZ3JhbUV2ZW50KVxyXG4gICAgLy8gdG8gYW55IGNvbXBvbmVudHMgdGhhdCBtYXkgYmUgaW50ZXJlc3RlZCwgaW5jbHVkaW5nIHRoaXMgb25lLlxyXG4gICAgZnVuY3Rpb24gYnJvYWRjYXN0RGlhZ3JhbUV2ZW50KGV2ZW50TmFtZSwgZSkge1xyXG4gICAgICAgIHNlbGYuaGFuZGxlRGlhZ3JhbUV2ZW50KGV2ZW50TmFtZSwgZSk7XHJcbiAgICAgICAgXy5lYWNoKGdldENvbXBvbmVudHMoKSwgZnVuY3Rpb24oY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50LmhhbmRsZURpYWdyYW1FdmVudClcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5oYW5kbGVEaWFncmFtRXZlbnQoZXZlbnROYW1lLCBlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5oYW5kbGVEaWFncmFtRXZlbnQgPSBmdW5jdGlvbihldmVudE5hbWUsIGUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdoYW5kbGVEaWFncmFtRXZlbnQ6ICcgKyBldmVudE5hbWUpO1xyXG4gICAgICAgIGlmIChldmVudE5hbWUgPT0gJ0NoYW5nZWRTZWxlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZWRTZWxlY3Rpb24oZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1NlbGVjdGlvbkNvcGllZCcpIHtcclxuICAgICAgICAgICAgc2VsZWN0aW9uQ29waWVkKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdQYXJ0Q3JlYXRlZCcpIHtcclxuICAgICAgICAgICAgcGFydENyZWF0ZWQoZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ0JhY2tncm91bmRTaW5nbGVDbGlja2VkJykge1xyXG4gICAgICAgICAgICBfdWkuc2hvd0hlbHBUaXAoJ2NhbnZhc1RpcCcpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09ICdMaW5rRHJhd24nKSB7XHJcbiAgICAgICAgICAgIGxpbmtEcmF3bihlKTtcclxuICAgICAgICAgICAgc2V0TmV3TGlua0RpcmVjdGlvbihlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnTGlua1JlbGlua2VkJykge1xyXG4gICAgICAgICAgICBsaW5rUmVsaW5rZWQoZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ0NsaXBib2FyZENoYW5nZWQnKSB7XHJcbiAgICAgICAgICAgIGNsaXBib2FyZENoYW5nZWQoZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT0gJ0NsaXBib2FyZFBhc3RlZCcpIHtcclxuICAgICAgICAgICAgY2xpcGJvYXJkUGFzdGVkKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gaGFuZGxlIHpvb20gdG8gcmVnaW9uIGlmIGFwcGxpY2FibGVcclxuICAgIGZ1bmN0aW9uIGNoYW5nZWRTZWxlY3Rpb24oZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ21hcC5jaGFuZ2VkU2VsZWN0aW9uJyk7XHJcbiAgICAgICAgX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICBfdWkubWF5YmVab29tVG9SZWdpb24oKTtcclxuICAgICAgICBpZiAoc2VsZi5yZWxhdGlvbnNoaXBzU2VsZWN0ZWQoKSkge1xyXG4gICAgICAgICAgICBfdWkuc2hvd0hlbHBUaXAoJ3JlbGF0aW9uc2hpcFRpcCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwYXJ0Q3JlYXRlZChlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnTWFwLCBQYXJ0Q3JlYXRlZCcpO1xyXG4gICAgICAgIHZhciBncm91cCA9IGUuc3ViamVjdDtcclxuICAgICAgICBpZiAoIShncm91cCBpbnN0YW5jZW9mIGdvLkdyb3VwKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbGF5b3V0JywgX3VpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5kZWZhdWx0VGhpbmdMYXlvdXQgfHwgJ2xlZnQnKTtcclxuICAgICAgICBfbGF5b3V0cy5zZXROZXdQYXJ0TG9jYXRpb25EYXRhKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGZpeCBsaW5rIHBvcnRzIHdoZW4gYSBsaW5rIGlzIGNyZWF0ZWQgLSBcclxuICAgIC8vIHRoZSBQIGFuZCBSIHBvcnRzIGJvdGggY292ZXIgdGhlIHdob2xlIG5vZGUsIGFuZCB0aGUgUCBwb3J0IGlzIG9uIHRvcCBvZiB0aGUgUiBwb3J0LCBcclxuICAgIC8vIHNvIGJvdGggUCBhbmQgUiBsaW5rcyBnZXQgdGhlIHRvUG9ydCBzZXQgdG8gUCBieSBkZWZhdWx0LlxyXG4gICAgZnVuY3Rpb24gbGlua0RyYXduKGUpIHtcclxuICAgICAgICB2YXIgbGluayA9IGUuc3ViamVjdDtcclxuICAgICAgICBjb25zb2xlLmxvZygnbGlua0RyYXduLCBsaW5rOiAnICsgbGluayArICcsIGZyb21Qb3J0OiAnICsgbGluay5mcm9tUG9ydElkICsgJywgdG9Qb3J0OiAnICsgbGluay50b1BvcnRJZCk7XHJcbiAgICAgICAgaWYgKGxpbmsuZnJvbVBvcnRJZCA9PSAnUCcpIHtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIGNhdGVnb3J5XCIpO1xyXG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndG9Qb3J0JywgJ1AnKTtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ2NhdGVnb3J5JywgJ1AnKTtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayBjYXRlZ29yeVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcHJldmVudCBsaW5rcyBmcm9tIFIgdG8gUFxyXG4gICAgICAgIGVsc2UgaWYgKGxpbmsuZnJvbVBvcnRJZCA9PSAnUicpIHtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHRvUG9ydFwiKTtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ3RvUG9ydCcsICdSJyk7XHJcbiAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgdG9Qb3J0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBmaXggbGluayBwb3J0cyB3aGVuIGEgbGluayBpcyByZWxpbmtlZCAtIFxyXG4gICAgLy8gZHJhZ2dpbmcgZWl0aGVyIGVuZCBvZiBhbiBSLWxpbmsgdG8gYW5vdGhlciBub2RlIHdpbGwgc2V0IHRoZSBjb3JyZXNwb25kaW5nIHBvcnQgdG8gUCwgXHJcbiAgICAvLyBzaW5jZSBQIHBvcnQgaXMgb24gdG9wIG9mIFIgcG9ydCwgc28gd2UgcmVzZXQgYm90aCBwb3J0cyB0byBSIGlmIHRoZSBjYXRlZ29yeSBpcyBub3QgUC5cclxuICAgIGZ1bmN0aW9uIGxpbmtSZWxpbmtlZChlKSB7XHJcbiAgICAgICAgdmFyIGxpbmsgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKCFsaW5rLmRhdGEuY2F0ZWdvcnkgfHwgbGluay5kYXRhLmNhdGVnb3J5ICE9PSAnUCcpIHtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ2Zyb21Qb3J0JywgJ1InKTtcclxuICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ3RvUG9ydCcsICdSJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldE5ld0xpbmtEaXJlY3Rpb24oZSkge1xyXG4gICAgICAgIHZhciBsaW5rID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGlmIChsaW5rLmZyb21Qb3J0SWQgPT0gJ1InKSB7XHJcbiAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayBkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShsaW5rLmRhdGEsICd0eXBlJywgX3VpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5kZWZhdWx0UmVsYXRpb25zaGlwRGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgX2RpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayBkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsaXBib2FyZENoYW5nZWQoZSkge1xyXG4gICAgICAgIHZhciBwYXJ0cyA9IGUuc3ViamVjdC5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGlwYm9hcmRDaGFuZ2VkOiBwYXJ0ICcgKyBwYXJ0ICsgJywgbWFpbnBhbmVsIHNjYWxlOiAnICsgcGFydC5maW5kT2JqZWN0KCdtYWlucGFuZWwnKS5zY2FsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTkI6IHRoaXMgaXMgY2FsbGVkIHdoZW4gcGFydHMgYXJlIGNvcGllZCBieSBjb250cm9sLWRyYWcsIE5PVCB3aGVuIHRoZSBjb3B5IGJ1dHRvbiBpcyBjbGlja2VkXHJcbiAgICBmdW5jdGlvbiBzZWxlY3Rpb25Db3BpZWQoZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3Rpb25Db3BpZWQnKTtcclxuICAgICAgICB2YXIgcGFydHMgPSBlLnN1YmplY3QuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKHBhcnRzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmIHBhcnQuaXNUb3BMZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvYyA9IGdvLlBvaW50LnBhcnNlKHBhcnQuZGF0YS5sb2MpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGlvbkNvcGllZDogdXBkYXRpbmcgbG9jIG9mIHBhcnQgJyArIHBhcnQgKyAnID0gJyArIGxvYyArICcsIHNjYWxlOiAnICsgcGFydC5zY2FsZSk7XHJcbiAgICAgICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbG9jJywgKGxvYy54ICsgNTApICsgJyAnICsgKGxvYy55ICsgNTApKTtcclxuICAgICAgICAgICAgICAgIHBhcnQudXBkYXRlVGFyZ2V0QmluZGluZ3MoJ2xvYycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsaXBib2FyZFBhc3RlZChlKSB7XHJcbiAgICAgICAgdmFyIHBhcnRzID0gZS5zdWJqZWN0Lml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChwYXJ0cy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnQgPSBwYXJ0cy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiBwYXJ0LmlzVG9wTGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsb2MgPSBnby5Qb2ludC5wYXJzZShwYXJ0LmRhdGEubG9jKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NsaXBib2FyZFBhc3RlZDogdXBkYXRpbmcgbG9jIG9mIHBhcnQgJyArIHBhcnQgKyAnID0gJyArIGxvYyArICcsIHNjYWxlOiAnICsgcGFydC5zY2FsZSk7XHJcbiAgICAgICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbG9jJywgKGxvYy54ICsgNTApICsgJyAnICsgKGxvYy55ICsgNTApKTtcclxuICAgICAgICAgICAgICAgIHBhcnQudXBkYXRlVGFyZ2V0QmluZGluZ3MoJ2xvYycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvbXB1dGVzIHRoZSBib3VuZHMgb2YgYWxsIGdyb3VwcyBpbiB0aGUgZGlhZ3JhbSAtIHRoaXMgaW5jbHVkZXMgYWxsIGlkZWFzL3RoaW5ncywgXHJcbiAgICAvLyBhbmQgZXhjbHVkZXMgbm9kZXMsIGluY2x1ZGluZyBzbGlkZXMsIHRoZSBzbGlkZSBibG9ja2VyLCBhbmQgdGhlIGV4cG9ydCBmb290ZXJcclxuICAgIHRoaXMuY29tcHV0ZU1hcEJvdW5kcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBncm91cHMgPSBuZXcgZ28uTGlzdChnby5Hcm91cCk7XHJcbiAgICAgICAgdmFyIG5vZGVzID0gX2RpYWdyYW0ubm9kZXM7XHJcbiAgICAgICAgd2hpbGUgKG5vZGVzLm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAobm9kZXMudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBzLmFkZChub2Rlcy52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9kaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhncm91cHMpLmNvcHkoKTsgLy8gcmV0dXJuIGEgbXV0YWJsZSByZWN0XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSB3aGF0IGlzIGN1cnJlbnRseSBzZWxlY3RlZD8gLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHJldHVybnMgdHJ1ZSBpZiBhbGwgc2VsZWN0ZWQgaXRlbXMgYXJlIHRoaW5ncyAoaS5lLiBHcm91cHMpLCBpbmNsdWRpbmcgci10aGluZ3NcclxuICAgIHRoaXMudGhpbmdzU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoIV9kaWFncmFtIHx8IF9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGl0ID0gX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIGV4YWN0bHkgb25lIHRoaW5nIChHcm91cCkgaXMgc2VsZWN0ZWRcclxuICAgIHRoaXMudGhpbmdTZWxlY3RlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfZGlhZ3JhbSAgJiYgX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50ID09IDEgJiYgX2RpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCkgaW5zdGFuY2VvZiBnby5Hcm91cDtcclxuICAgIH07XHJcblxyXG4gICAgLy8gaWYgYSBzaW5nbGUgZ3JvdXAgaXMgc2VsZWN0ZWQsIHJldHVybnMgaXQsIG90aGVyd2lzZSByZXR1cm5zIG51bGxcclxuICAgIHRoaXMuZ2V0VW5pcXVlVGhpbmdTZWxlY3RlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChfZGlhZ3JhbSAgJiYgX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50ID09IDEgJiYgX2RpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCkgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2RpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRoaW5nc1NlbGVjdGVkQXJlTWVtYmVyc09mID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICBpZiAoIV9kaWFncmFtIHx8IF9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGl0ID0gX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkgfHwgaXQudmFsdWUuY29udGFpbmluZ0dyb3VwICE9IGdyb3VwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudGhpbmdzU2VsZWN0ZWRBcmVEZXNjZW5kYW50c09mID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICBpZiAoIV9kaWFncmFtIHx8IF9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGl0ID0gX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGFuY2VzdG9ycyA9IF9sYXlvdXRzLmdldEFuY2VzdG9yR3JvdXBzKGl0LnZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKF8uaW5kZXhPZihhbmNlc3RvcnMsIGdyb3VwKSA9PSAtMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRoaW5nc1NlbGVjdGVkSW5jbHVkZVNsaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCFfZGlhZ3JhbSB8fCBfZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciBpdCA9IF9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChpdC52YWx1ZS5kYXRhICYmIGl0LnZhbHVlLmRhdGEuY2F0ZWdvcnkgPT0gJ3NsaWRlJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIGFsbCBzZWxlY3RlZCBpdGVtcyBhcmUgcmVsYXRpb25zaGlwcyAoaS5lLiBMaW5rcylcclxuICAgIHRoaXMucmVsYXRpb25zaGlwc1NlbGVjdGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCFfZGlhZ3JhbSB8fCBfZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciBpdCA9IF9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uTGluaykgfHwgIV9sYXlvdXRzLmlzUkxpbmsoaXQudmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgdHJ1ZSBpZiBleGFjdGx5IG9uZSByZWxhdGlvbnNoaXAgKExpbmspIGlzIHNlbGVjdGVkXHJcbiAgICB0aGlzLnJlbGF0aW9uc2hpcFNlbGVjdGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9kaWFncmFtICAmJiBfZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPT0gMSAmJiBfZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKSBpbnN0YW5jZW9mIGdvLkxpbms7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBsb2FkIGFuZCBpbml0aWFsaXplIG1vZGVsIC0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdXJsID0gJHNjb3BlLm1hcFVybCArICcuanNvbic7XHJcbiAgICAgICAgaWYgKCRzY29wZS5zYW5kYm94KSB7XHJcbiAgICAgICAgICAgIHVybCA9ICRzY29wZS5tYXBVcmwgKyAnLmpzb24/c2FuZGJveD0xJztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9UT0RPOiByZXN0b3JlIG5vbi1Bbmd1bGFyIGh0dHAtZ2V0IGZvciBtYXAgZGF0YVxyXG4gICAgICAgIHZhciBkYXRhID0geyBcIm1hcFwiOiB7IFwibWV0YWRhdGFcIjogeyBcInNhbmRib3hcIjogZmFsc2UsIFwiaWRcIjogNTU0NywgXCJuYW1lXCI6IFwiVW50aXRsZWQgTWFwXCIsIFwidXJsXCI6IFwiL21hcHMvNTU0N1wiLCBcImNhbkVkaXRcIjogdHJ1ZSwgXCJ1cGRhdGVkQXRcIjogXCIyMDE1LTA1LTE1VDEyOjI5OjQwLjcyMS0wNDowMFwiLCBcInVwZGF0ZWRCeVwiOiBudWxsLCBcInVwZGF0ZWRCeU5hbWVcIjogbnVsbCwgXCJ1c2VyVGFnc1wiOiBbXSB9LCBcImRhdGFcIjogeyBcImNsYXNzXCI6IFwiZ28uR3JhcGhMaW5rc01vZGVsXCIsIFwibm9kZUlzTGlua0xhYmVsUHJvcGVydHlcIjogXCJpc0xpbmtMYWJlbFwiLCBcImxpbmtMYWJlbEtleXNQcm9wZXJ0eVwiOiBcImxhYmVsS2V5c1wiLCBcImxpbmtGcm9tUG9ydElkUHJvcGVydHlcIjogXCJmcm9tUG9ydFwiLCBcImxpbmtUb1BvcnRJZFByb3BlcnR5XCI6IFwidG9Qb3J0XCIsIFwibm9kZURhdGFBcnJheVwiOiBbeyBcImtleVwiOiAxLCBcInRleHRcIjogXCJOZXcgSWRlYVwiLCBcImlzR3JvdXBcIjogdHJ1ZSwgXCJsb2NcIjogXCIwIDBcIiwgXCJsYXlvdXRcIjogXCJsZWZ0XCIsIFwic0V4cGFuZGVkXCI6IHRydWUsIFwicEV4cGFuZGVkXCI6IHRydWUgfV0sIFwibGlua0RhdGFBcnJheVwiOiBbXSB9LCBcInN0YXRlRGF0YVwiOiBudWxsLCBcImVkaXRvck9wdGlvbnNcIjogbnVsbCwgXCJhbmFseXRpY3NcIjoge30sIFwidmVyc2lvbnNcIjogW10gfSB9O1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24oZGF0YSk7XHJcbiAgICAgICAgX3VpLnNldFN0YXRlRGF0YShkYXRhLm1hcC5zdGF0ZURhdGEpO1xyXG4gICAgICAgIF91aS5zZXRNYXBFZGl0b3JPcHRpb25zKGRhdGEubWFwLmVkaXRvck9wdGlvbnMpO1xyXG5cclxuICAgICAgICBzZWxmLmNoZWNrTW9kZWwoKTtcclxuICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIF9kaWFncmFtLnVuZG9NYW5hZ2VyLmlzRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkQ2hhbmdlZExpc3RlbmVyKF9hdXRvc2F2ZS5tb2RlbENoYW5nZWQpO1xyXG4gICAgICAgIF9hdXRvc2F2ZS5zYXZlT25Nb2RlbENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIF9kaWFncmFtLmlzUmVhZE9ubHkgPSAhJHNjb3BlLmNhbkVkaXQ7XHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZUVkaXRTdGF0dXMoJHNjb3BlLmNhbkVkaXQgPyAkc2NvcGUuTEFTVF9VUERBVEVEIDogJHNjb3BlLlJFQURfT05MWSk7XHJcbiAgICAgICAgX3VpLnJlc2V0Wm9vbSgpO1xyXG4gICAgICAgIHNlbGYubG9hZE1hcEV4dHJhRGF0YShkYXRhLm1hcCk7XHJcblxyXG4gICAgICAgIC8vIGlmIG5vIG5vZGVzIE9SIGluIHRoaW5rcXVlcnkgbW9kZSwgbGF1bmNoIGdlbmVyYXRvclxyXG4gICAgICAgIGlmICgkc2NvcGUudGhpbmtxdWVyeSB8fCAhX2RpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgX3VpLm9wZW5UYWIoX3VpLlRBQl9JRF9HRU5FUkFUT1IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiB3ZSBoYXZlIHNsaWRlcywgcGxheSBwcmVzZW50YXRpb25cclxuICAgICAgICBlbHNlIGlmICghJHNjb3BlLmNhbkVkaXQgJiYgX3ByZXNlbnRlci5nZXRTbGlkZU5vZGVEYXRhcygpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBfcHJlc2VudGVyLnBsYXlTbGlkZSgxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sb2FkRm9yU2FuZGJveCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24oJHNjb3BlLm1hcERhdGEpO1xyXG4gICAgICAgIF91aS5zZXRTdGF0ZURhdGEoJycpOyAvLyBpbXBvcnRhbnQhIChvdGhlcndpc2UgY29ybmVyIGhpZ2hsaWdodGluZyBicmVha3MpXHJcbiAgICAgICAgX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICBfZGlhZ3JhbS51bmRvTWFuYWdlci5pc0VuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIF91aS5yZXNldFpvb20oKTtcclxuICAgICAgICAkc2NvcGUuY2FuRWRpdCA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIGlmIG5vIG5vZGVzIE9SIGluIHRoaW5rcXVlcnkgbW9kZSwgbGF1bmNoIGdlbmVyYXRvclxyXG4gICAgICAgIGlmICgkc2NvcGUudGhpbmtxdWVyeSkge1xyXG4gICAgICAgICAgICBfdWkub3BlblRhYihfdWkuVEFCX0lEX0dFTkVSQVRPUik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHdlIGhhdmUgc2xpZGVzLCBwbGF5IHByZXNlbnRhdGlvblxyXG4gICAgICAgIGVsc2UgaWYgKF9wcmVzZW50ZXIuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgX3ByZXNlbnRlci5wbGF5U2xpZGUoMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgLy8gZml4IGFueSBzdHJ1Y3R1cmFsIHByb2JsZW1zIGluIHRoZSBtb2RlbCBiZWZvcmUgZGlzcGxheWluZyBpdFxyXG4gICAgdGhpcy5jaGVja01vZGVsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gY2hhbmdlIFwiaXNMaW5rTGFiZWxcIiBwcm9wZXJ0eSB0byBjYXRlZ29yeTpcIkxpbmtMYWJlbFwiIChjaGFuZ2UgYXMgb2YgZ29KUyAxLjMpXHJcbiAgICAgICAgXy5lYWNoKF9kaWFncmFtLm1vZGVsLm5vZGVEYXRhQXJyYXksIGZ1bmN0aW9uKG5vZGVEYXRhLCBpbmRleCwgbGlzdCkge1xyXG4gICAgICAgICAgICBpZiAobm9kZURhdGEuaXNMaW5rTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBub2RlRGF0YS5pc0xpbmtMYWJlbDtcclxuICAgICAgICAgICAgICAgIG5vZGVEYXRhLmNhdGVnb3J5ID0gXCJMaW5rTGFiZWxcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBjaGVjayBmb3IgdGhlIGxpbmsgbGFiZWwgKHItdGhpbmcpIGZvciBhIGxpbmsgYmVpbmcgdGhlIHNhbWUgYXMgdGhlIGZyb20gb3IgdG8gbm9kZSBcclxuICAgICAgICAvLyAtIHRoaXMgY2FuIGNhdXNlIGluZmluaXRlIHJlY3Vyc2lvbiBpbiB0aGlua3MgbGlrZSBsYXlvdXQuZ2V0U2NhbGVcclxuICAgICAgICBfLmVhY2goX2RpYWdyYW0ubW9kZWwubGlua0RhdGFBcnJheSwgZnVuY3Rpb24obGlua0RhdGEsIGluZGV4LCBsaXN0KSB7XHJcbiAgICAgICAgICAgIHZhciBiYWRMYWJlbEtleXMgPSBbXTtcclxuICAgICAgICAgICAgXy5lYWNoKGxpbmtEYXRhLmxhYmVsS2V5cywgZnVuY3Rpb24oa2V5LCBpbmRleDIsIGxpc3QyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09IGxpbmtEYXRhLmZyb20gfHwga2V5ID09IGxpbmtEYXRhLnRvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xhYmVsS2V5IHNhbWUgYXMgZnJvbSBvciB0byBvZiBsaW5rOiAnICsga2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBiYWRMYWJlbEtleXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGlua0RhdGEubGFiZWxLZXlzID0gXy5kaWZmZXJlbmNlKGxpbmtEYXRhLmxhYmVsS2V5cywgYmFkTGFiZWxLZXlzKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbG9hZHMgb3RoZXIgZGF0YSBiZXNpZGVzIHRoZSBkaWFncmFtIG1vZGVsIGZyb20gdGhlIGpzb24gb2JqZWN0IHJldHVybmVkIGJ5IG1hcHMvc2hvdy5qc29uXHJcbiAgICAvLyAtIHRoaXMgaW5jbHVkZXMgcG9pbnRzLCBiYWRnZXMsIHZlcnNpb25zLCBhbmQgbWFwIGFuYWx5dGljc1xyXG4gICAgLy8gTkI6IHBvaW50cyBhbmQgYmFkZ2VzIGFyZSBzZXQgYXQgcGFnZSBsb2FkIHRpbWUgaW4gbGF5b3V0cy91c2VyIGFuZCB1c2Vycy9iYWRnZXMsIGJ1dFxyXG4gICAgLy8gd2UgYWxzbyBuZWVkIHRvIGJlIGFibGUgdG8gdXBkYXRlIHRoZW0gaGVyZSBhZnRlciBhbiBhdXRvc2F2ZVxyXG5cclxuICAgIC8vIFRPRE86IGlzIHRoaXMgc3RpbGwgYWxsIG5lZWRlZCB3aXRoIHRoZSBuZXdlciB1c2VyUHJvZmlsZSBzdHVmZj9cclxuICAgIHRoaXMubG9hZE1hcEV4dHJhRGF0YSA9IGZ1bmN0aW9uKG1hcERhdGEpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtYXAubG9hZE1hcEV4dHJhRGF0YSwgbWFwRGF0YTogJyArIG1hcERhdGEpO1xyXG4gICAgICAgICAgICAkc2NvcGUubWFwVXNlclRhZ3MgPSBtYXBEYXRhLm1ldGFkYXRhLnVzZXJUYWdzOyAvLyBUT0RPOiBpcyB0aGlzIHVzZWQgYW55d2hlcmU/XHJcblxyXG4gICAgICAgICAgICAvLyRzY29wZS5tYXAuZ2V0SGlzdG9yeSgpLnZlcnNpb25MaXN0ID0gbWFwRGF0YS52ZXJzaW9ucztcclxuICAgICAgICAgICAgJHNjb3BlLm1hcC5nZXRBbmFseXRpY3MoKS5tYXBBbmFseXRpY3MgPSBtYXBEYXRhLmFuYWx5dGljcztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbG9hZHMgbW9kZWwgZGF0YSBmb3IgYW4gaW5kaXZpZHVhbCB2ZXJzaW9uIGFuZCBkaXNwbGF5cyBpdFxyXG4gICAgLy8gTkI6IHRoaXMgYWxzbyBkaXNhYmxlcyBhdXRvc2F2ZTsgbG9hZCgpIG11c3QgYmUgY2FsbGVkIHRvIHJlLWVuYWJsZSBpdFxyXG4gICAgdGhpcy5sb2FkVmVyc2lvbiA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgJGh0dHAuZ2V0KCcvbWFwX3ZlcnNpb25zLycgKyBpZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbG9hZGVkIG1hcCB2ZXJzaW9uIHdpdGggSUQ6ICcgKyBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbihyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLnVuZG9NYW5hZ2VyLmlzRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hdXRvc2F2ZS5zYXZlT25Nb2RlbENoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBfZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLmlzUmVhZE9ubHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3QgbG9hZCBNZXRhTWFwIHZlcnNpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0IHdoZXRoZXIgZWRpdGluZyBjYXBhYmlsaXR5IGlzIHRlbXBvcmFyaWx5IHN1c3BlbmRlZCAtXHJcbiAgICAvLyB0aGlzIGlzIGRpc3RpbmN0IGZyb20gdGhlIGdsb2JhbCAkc2NvcGUuY2FuRWRpdCBzZXR0aW5nLFxyXG4gICAgLy8gd2hpY2ggaWYgZmFsc2UgcHJldmVudHMgZWRpdGluZyBhdCBhbGwgdGltZXNcclxuICAgIHRoaXMuc2V0RWRpdGluZ0Jsb2NrZWQgPSBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgX2RpYWdyYW0uaXNSZWFkT25seSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0gY3JlYXRpbmcgdGhpbmdzIGluIHRoZSBtb2RlbCAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gZGVmYXVsdCBwcm9wZXJ0aWVzIGZvciBhbGwgbmV3IFRoaW5ncyAoZ3JvdXBzKSAtIG5vdGUgdGhhdCB0aGVzZSBjYW4gYmUgb3ZlcnJpZGRlbiBpZiBuZWVkZWRcclxuICAgIGZ1bmN0aW9uIGdldE5ld1RoaW5nRGF0YSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0ZXh0OiAnSWRlYScsXHJcbiAgICAgICAgICAgIGlzR3JvdXA6IHRydWUsXHJcbiAgICAgICAgICAgIGxheW91dDogX3VpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5kZWZhdWx0VGhpbmdMYXlvdXQgfHwgJ2xlZnQnLFxyXG4gICAgICAgICAgICBzRXhwYW5kZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIHBFeHBhbmRlZDogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jcmVhdGVTaXN0ZXIgPSBmdW5jdGlvbih0aGluZykge1xyXG4gICAgICAgIGlmICghJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbmV3TG9jID0gX2xheW91dHMuZ2V0TmV3U2lzdGVyTG9jYXRpb24odGhpbmcpO1xyXG4gICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQoZ2V0TmV3VGhpbmdEYXRhKCksIHtcclxuICAgICAgICAgICAgZ3JvdXA6IHRoaW5nLmRhdGEuZ3JvdXAsXHJcbiAgICAgICAgICAgIHRleHQ6ICdJZGVhJyxcclxuICAgICAgICAgICAgbG9jOiBnby5Qb2ludC5zdHJpbmdpZnkobmV3TG9jKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLmFkZE5vZGVEYXRhKGRhdGEpO1xyXG4gICAgICAgIHZhciBuZXdTaXN0ZXIgPSBfZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XHJcblxyXG4gICAgICAgIC8vIHB1dCBuZXcgc2lzdGVyIHJpZ2h0IGFmdGVyIHRoaW5nIChub3QgYXMgdGhlIGxhc3Qgc2libGluZylcclxuICAgICAgICBpZiAodGhpbmcuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgIHNlbGYubW92ZVNpYmxpbmdOZXh0VG8obmV3U2lzdGVyLCB0aGluZywgc2VsZi5SSUdIVCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdTaXN0ZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlUlRvU2lzdGVyID0gZnVuY3Rpb24odGhpbmcpIHtcclxuICAgICAgICBpZiAoISRzY29wZS5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRoaW5nS2V5ID0gX2RpYWdyYW0ubW9kZWwuZ2V0S2V5Rm9yTm9kZURhdGEodGhpbmcuZGF0YSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygndGhpbmdLZXk6ICcgKyB0aGluZ0tleSk7XHJcbiAgICAgICAgdmFyIG5ld0xvYyA9IF9sYXlvdXRzLmdldE5ld1Npc3RlckxvY2F0aW9uKHRoaW5nLCB0cnVlKTsgLy8gd2l0aFIgPSB0cnVlXHJcbiAgICAgICAgdmFyIGRhdGEgPSBfLmV4dGVuZChnZXROZXdUaGluZ0RhdGEoKSwge1xyXG4gICAgICAgICAgICBncm91cDogdGhpbmcuZGF0YS5ncm91cCxcclxuICAgICAgICAgICAgdGV4dDogJ0lkZWEnLFxyXG4gICAgICAgICAgICBsb2M6IGdvLlBvaW50LnN0cmluZ2lmeShuZXdMb2MpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoZGF0YSk7XHJcbiAgICAgICAgdmFyIG5ld1Npc3RlciA9IF9kaWFncmFtLmZpbmROb2RlRm9yRGF0YShkYXRhKTtcclxuICAgICAgICB2YXIgZ3JvdXBLZXkgPSBfZGlhZ3JhbS5tb2RlbC5nZXRLZXlGb3JOb2RlRGF0YShkYXRhKTtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIGxpbmtcclxuICAgICAgICB2YXIgbGlua0RhdGEgPSB7XHJcbiAgICAgICAgICAgIGZyb206IHRoaW5nS2V5LFxyXG4gICAgICAgICAgICB0bzogZ3JvdXBLZXksXHJcbiAgICAgICAgICAgIHR5cGU6ICd0bycsXHJcbiAgICAgICAgICAgIGZyb21Qb3J0OiAnUicsXHJcbiAgICAgICAgICAgIHRvUG9ydDogJ1InXHJcbiAgICAgICAgfTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGRMaW5rRGF0YShsaW5rRGF0YSk7XHJcblxyXG4gICAgICAgIC8vIHB1dCBuZXcgc2lzdGVyIHJpZ2h0IGFmdGVyIHRoaW5nIChub3QgYXMgdGhlIGxhc3Qgc2libGluZylcclxuICAgICAgICBpZiAodGhpbmcuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgIHNlbGYubW92ZVNpYmxpbmdOZXh0VG8obmV3U2lzdGVyLCB0aGluZywgc2VsZi5SSUdIVCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdTaXN0ZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlQ2hpbGQgPSBmdW5jdGlvbih0aGluZywgbmFtZSwgeCwgeSkge1xyXG4gICAgICAgIGlmICghJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbmV3TG9jID0gX2xheW91dHMuZ2V0TmV3Q2hpbGRMb2NhdGlvbjIodGhpbmcpO1xyXG4gICAgICAgIGlmICh4IHx8IHkpIHtcclxuICAgICAgICAgICAgbmV3TG9jID0gbmV3IGdvLlBvaW50KHgsIHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZGF0YSA9IF8uZXh0ZW5kKGdldE5ld1RoaW5nRGF0YSgpLCB7XHJcbiAgICAgICAgICAgIGdyb3VwOiB0aGluZy5kYXRhLmtleSxcclxuICAgICAgICAgICAgdGV4dDogbmFtZSB8fCAnUGFydCcsXHJcbiAgICAgICAgICAgIGxvYzogZ28uUG9pbnQuc3RyaW5naWZ5KG5ld0xvYylcclxuICAgICAgICB9KTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICBfbGF5b3V0cy5zZXREZXNjZW5kYW50TGF5b3V0cyh0aGluZywgdGhpbmcuZGF0YS5sYXlvdXQpO1xyXG4gICAgICAgIHZhciBjaGlsZCA9IF9kaWFncmFtLmZpbmROb2RlRm9yRGF0YShkYXRhKTtcclxuICAgICAgICBjaGlsZC51cGRhdGVUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGVSVGhpbmcgPSBmdW5jdGlvbihsaW5rLCBuYW1lKSB7XHJcbiAgICAgICAgaWYgKCEkc2NvcGUuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjcmVhdGVSVGhpbmcsIGxpbms6ICcgKyBsaW5rICsgJywgbmFtZTogJyArIG5hbWUpO1xyXG4gICAgICAgIC8vIGRvbid0IGFsbG93IG11bHRpcGxlIFItdGhpbmdzXHJcbiAgICAgICAgaWYgKGxpbmsuaXNMYWJlbGVkTGluaykge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2Fubm90IGNyZWF0ZSBSVGhpbmcsIGxpbmsgaXMgYWxyZWFkeSBsYWJlbGVkJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQoZ2V0TmV3VGhpbmdEYXRhKCksIHtcclxuICAgICAgICAgICAgdGV4dDogbmFtZSB8fCAnUmVsYXRpb25zaGlwIElkZWEnLFxyXG4gICAgICAgICAgICAvL2lzTGlua0xhYmVsOiB0cnVlLCAgICAgLy8gZGVwcmVjYXRlZCBhcyBvZiBnb0pTIDEuM1xyXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJMaW5rTGFiZWxcIiwgLy8gbmV3IGFzIG9mIGdvSlMgMS4zXHJcbiAgICAgICAgICAgIGxvYzogJzAgMCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY3JlYXRlIFIgVGhpbmdcIik7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoZGF0YSk7XHJcbiAgICAgICAgdmFyIGtleSA9IF9kaWFncmFtLm1vZGVsLmdldEtleUZvck5vZGVEYXRhKGRhdGEpO1xyXG4gICAgICAgIHZhciBub2RlID0gX2RpYWdyYW0uZmluZFBhcnRGb3JLZXkoa2V5KTtcclxuICAgICAgICBub2RlLmxhYmVsZWRMaW5rID0gbGluaztcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbihcImNyZWF0ZSBSIFRoaW5nXCIpO1xyXG4gICAgICAgIF9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBfZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0gY3JlYXRpbmcgdGhpbmdzIHdpdGggc3BlY2lmaWVkIG5hbWVzL2xvY2F0aW9ucyAtIGZvciB1c2UgYnkgZ2VuZXJhdG9yIGFuZCB0ZXN0cyAtLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmNyZWF0ZVRoaW5nID0gZnVuY3Rpb24oeCwgeSwgbmFtZSwgbGF5b3V0KSB7XHJcbiAgICAgICAgZ3JvdXAgPSBfZGlhZ3JhbS50b29sTWFuYWdlci5jbGlja0NyZWF0aW5nVG9vbC5pbnNlcnRQYXJ0KG5ldyBnby5Qb2ludCh4LCB5KSk7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICd0ZXh0JywgbmFtZSk7XHJcbiAgICAgICAgaWYgKGxheW91dCkge1xyXG4gICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ2xheW91dCcsIGxheW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBncm91cDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGVSTGlua1dpdGhSVGhpbmcgPSBmdW5jdGlvbih0aGluZzEsIHRoaW5nMiwgbmFtZSkge1xyXG4gICAgICAgIHZhciBsaW5rID0gc2VsZi5jcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuY3JlYXRlUlRoaW5nKGxpbmssIG5hbWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBsaW5rRGF0YSBvYmplY3QgZm9yIHRoZSBuZXcgbGlua1xyXG4gICAgdGhpcy5jcmVhdGVSTGluayA9IGZ1bmN0aW9uKHRoaW5nMSwgdGhpbmcyKSB7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbignYWRkIGxpbmsnKTtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ25vQXJyb3dzJyxcclxuICAgICAgICAgICAgZnJvbTogdGhpbmcxLmRhdGEua2V5LFxyXG4gICAgICAgICAgICB0bzogdGhpbmcyLmRhdGEua2V5LFxyXG4gICAgICAgICAgICBmcm9tUG9ydDogJ1InLFxyXG4gICAgICAgICAgICB0b1BvcnQ6ICdSJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuYWRkTGlua0RhdGEoZGF0YSk7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgcmV0dXJuIF9kaWFncmFtLmZpbmRMaW5rRm9yRGF0YShkYXRhKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgbGlua0RhdGEgb2JqZWN0IGZvciB0aGUgbmV3IGxpbmtcclxuICAgIHRoaXMuY3JlYXRlUExpbmsgPSBmdW5jdGlvbih0aGluZzEsIHRoaW5nMikge1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdub0Fycm93cycsXHJcbiAgICAgICAgICAgIGZyb206IHRoaW5nMS5kYXRhLmtleSxcclxuICAgICAgICAgICAgdG86IHRoaW5nMi5kYXRhLmtleSxcclxuICAgICAgICAgICAgZnJvbVBvcnQ6ICdQJyxcclxuICAgICAgICAgICAgdG9Qb3J0OiAnUCcsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnUCdcclxuICAgICAgICB9O1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLmFkZExpbmtEYXRhKGRhdGEpO1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ3BFeHBhbmRlZCcsIHRydWUpO1xyXG4gICAgICAgIHJldHVybiBfZGlhZ3JhbS5maW5kTGlua0ZvckRhdGEoZGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0gbW92aW5nIHRoaW5ncyBpbiB0aGUgbW9kZWwgc3RydWN0dXJlIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyByZXR1cm5zIGEgZ28uTGlzdCBvZiB0aGUgaXRlbXMgaW4gdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHRoYXQgYXJlIEdyb3Vwc1xyXG4gICAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRHcm91cHMoKSB7XHJcbiAgICAgICAgdmFyIGl0ID0gX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHZhciBtZW1iZXJzID0gbmV3IGdvLkxpc3QoKTtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIG1lbWJlcnMuYWRkKHBhcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZW1iZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRyYWcgdG8gU1xyXG4gICAgdGhpcy5hZGRTZWxlY3RlZFRoaW5nc0FzQ2hpbGRyZW5PZiA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIG5ld01lbWJlcnMgPSBnZXRTZWxlY3RlZEdyb3VwcygpO1xyXG5cclxuICAgICAgICAvLyBjaGVjayBleGlzdGluZyBtZW1iZXJzIHNvIHdlIGNhbiBjYWxjdWxhdGUgbGF5b3V0XHJcbiAgICAgICAgdmFyIG9sZE1lbWJlckJvdW5kcyA9IHNlbGYuc2FmZVJlY3QoX2RpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKGdyb3VwLm1lbWJlclBhcnRzKSk7XHJcblxyXG4gICAgICAgIC8vIE5COiB0aGlzIGlzIHN1YmplY3QgdG8gdmFsaWRhdGlvbiBieSBDb21tYW5kSGFuZGxlci5pc1ZhbGlkTWVtYmVyLFxyXG4gICAgICAgIC8vIHNvIGZvciBleGFtcGxlLCBtZW1iZXJzIG9mIG1lbWJlcnMgb2YgbmV3TWVtYmVycyB3aWxsIG5vdCBiZSBhZGRlZCBhcyBtZW1iZXJzXHJcbiAgICAgICAgZ3JvdXAuYWRkTWVtYmVycyhuZXdNZW1iZXJzKTtcclxuXHJcbiAgICAgICAgX2xheW91dHMubGF5b3V0TmV3TWVtYmVyc1JlbGF0aXZlVG8obmV3TWVtYmVycywgZ3JvdXAsIG9sZE1lbWJlckJvdW5kcyk7XHJcblxyXG4gICAgICAgIF9kaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRyYWcgdG8gRFxyXG4gICAgdGhpcy5hZGRTZWxlY3RlZFRoaW5nc0FzU2lzdGVyc09mID0gZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgICB2YXIgb2xkTWVtYmVycyA9IGdldFNlbGVjdGVkR3JvdXBzKCk7XHJcblxyXG4gICAgICAgIC8vIGlmIGRyYWdnaW5nIHRvIHRvcCBsZXZlbCwgbW92ZSBkcmFnZ2VkIHRoaW5ncyBzbyB0aGV5IGRvbid0IG92ZXJsYXAgdGhlIGZvcm1lciBwYXJlbnRcclxuICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAvLyBjaGVjayBleGlzdGluZyBtZW1iZXJzIHNvIHdlIGNhbiBjYWxjdWxhdGUgbGF5b3V0XHJcbiAgICAgICAgICAgIHZhciBvbGRNZW1iZXJzQm91bmRzID0gX2RpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKG9sZE1lbWJlcnMpO1xyXG4gICAgICAgICAgICAvLyBOQjogb2xkTWVtYmVycyBjYW4gYmUgb24gbXVsdGlwbGUgbGV2ZWxzLCBzbyBub3QgY2xlYXIgd2hpY2ggbGV2ZWwgdG8gdXNlIGZvciByZXNjYWxpbmcgb2xkIG1lbWJlcnMgYWZ0ZXIgZHJhZ1xyXG4gICAgICAgICAgICB2YXIgb2xkTWVtYmVyc0xldmVsID0gX2xheW91dHMuY29tcHV0ZUxldmVsKG9sZE1lbWJlcnMuZmlyc3QoKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaXQgPSBvbGRNZW1iZXJzLml0ZXJhdG9yO1xyXG4gICAgICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVtYmVyID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXIuY29udGFpbmluZ0dyb3VwID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfbGF5b3V0cy5sYXlvdXRPbGRNZW1iZXJzT3V0c2lkZU9mKG9sZE1lbWJlcnMsIGdyb3VwLCBvbGRNZW1iZXJzQm91bmRzLCBvbGRNZW1iZXJzTGV2ZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiBub3QgZHJhZ2dpbmcgdG8gdG9wIGxldmVsLCBwbGFjZSBkcmFnZ2VkIHRoaW5ncyBhZnRlciBmb3JtZXIgcGFyZW50IGluIG91dGxpbmVcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGl0MiA9IG9sZE1lbWJlcnMuaXRlcmF0b3I7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdDIubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVtYmVyMiA9IGl0Mi52YWx1ZTtcclxuICAgICAgICAgICAgICAgIG1lbWJlcjIuY29udGFpbmluZ0dyb3VwID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5tb3ZlU2libGluZ05leHRUbyhtZW1iZXIyLCBncm91cCwgc2VsZi5SSUdIVCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgX2RpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIGZvciBkcmFnZ2luZyBwYXJ0cyB3aXRoaW4gYSBzeXN0ZW0gLSBzaWRlIGlzIExFRlQgb3IgUklHSFQgKGkuZS4gYWJvdmUgb3IgYmVsb3csIHJlc3AuIGluIGludmVudG9yeSBsYXlvdXQpXHJcbiAgICB0aGlzLmFkZFNlbGVjdGVkVGhpbmdBc09yZGVyZWRTaXN0ZXJPZiA9IGZ1bmN0aW9uKGdyb3VwLCBzaWRlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnYWRkU2VsZWN0ZWRUaGluZ0FzT3JkZXJlZFNpc3Rlck9mLCBzaWRlOiAnICsgc2lkZSk7XHJcbiAgICAgICAgdmFyIHRoaW5nID0gc2VsZi5nZXRVbmlxdWVUaGluZ1NlbGVjdGVkKCk7XHJcbiAgICAgICAgaWYgKCF0aGluZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYubW92ZVNpYmxpbmdOZXh0VG8odGhpbmcsIGdyb3VwLCBzaWRlKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbW92ZXMgdGhlIGZpcnN0IHRoaW5nIChzaWJsaW5nKSB0byBiZSBhZnRlciB0aGUgc2Vjb25kIHRoaW5nIChncm91cClcclxuICAgIC8vIGluIHRoZSBwYXJ0IG9yZGVyaW5nIC0gdGhleSBhcmUgYXNzdW1lZCB0byBiZSBzaWJsaW5nc1xyXG4gICAgLy8gc2lkZSBpcyBMRUZUIG9yIFJJR0hUXHJcbiAgICB0aGlzLm1vdmVTaWJsaW5nTmV4dFRvID0gZnVuY3Rpb24oc2libGluZywgZ3JvdXAsIHNpZGUpIHtcclxuICAgICAgICB2YXIgcGFyZW50ID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdtb3ZlU2libGluZ05leHRUbywgc2libGluZzogJyArIHNpYmxpbmcgKyAnLCBncm91cDogJyArIGdyb3VwICsgJywgcGFyZW50OiAnICsgcGFyZW50ICsgJywgc2libGluZy5jb250YWluaW5nR3JvdXA6ICcgKyBzaWJsaW5nLmNvbnRhaW5pbmdHcm91cCk7XHJcblxyXG4gICAgICAgIGlmICghcGFyZW50IHx8IHNpYmxpbmcuY29udGFpbmluZ0dyb3VwICE9IHBhcmVudCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDYW5ub3QgZG8gbW92ZVNpYmxpbmdOZXh0VG8gb24gbm9uLXNpYmxpbmdzIG9yIHRvcC1sZXZlbCBncm91cHMnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSBuZXcgbWVtYmVyIG9yZGVyXHJcbiAgICAgICAgdmFyIG1lbWJlck9yZGVyID0gbmV3IGdvLkxpc3QoKTtcclxuICAgICAgICB2YXIgaXQgPSBwYXJlbnQubWVtYmVyUGFydHM7XHJcbiAgICAgICAgdmFyIG9yZGVyID0gMDtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBtZW1iZXIgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKG1lbWJlciBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3ZSdyZSBhdCB0aGUgdGFyZ2V0IGdyb3VwLCBzbyBhZGQgdGhlIG1vdmVkIHRoaW5nIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgaXRcclxuICAgICAgICAgICAgICAgIGlmIChtZW1iZXIgPT0gZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA9PSBzZWxmLkxFRlQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKHNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2libGluZy5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKG1lbWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShtZW1iZXIuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKG1lbWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShtZW1iZXIuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChzaWJsaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHNpYmxpbmcuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZG9uJ3QgcmUtYWRkIHRoZSBtb3ZlZCB0aGluZywgaXQgd2FzIGFkZGVkIGFib3ZlXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtZW1iZXIgIT0gc2libGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChtZW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShtZW1iZXIuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNsZWFyIGV4aXN0aW5nIG1lbWJlcnNcclxuICAgICAgICB2YXIgbmV3SXQgPSBtZW1iZXJPcmRlci5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAobmV3SXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBtZW1iZXIyID0gbmV3SXQudmFsdWU7XHJcbiAgICAgICAgICAgIG1lbWJlcjIuY29udGFpbmluZ0dyb3VwID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFkZCBuZXcgbWVtYmVyc1xyXG4gICAgICAgIG5ld0l0LnJlc2V0KCk7XHJcbiAgICAgICAgd2hpbGUgKG5ld0l0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbWVtYmVyMyA9IG5ld0l0LnZhbHVlO1xyXG4gICAgICAgICAgICBtZW1iZXIzLmNvbnRhaW5pbmdHcm91cCA9IHBhcmVudDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYWRkVGhpbmdBc1JUaGluZyA9IGZ1bmN0aW9uKHRoaW5nLCBsaW5rKSB7XHJcbiAgICAgICAgdGhpbmcubGFiZWxlZExpbmsgPSBsaW5rO1xyXG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEQgY29ybmVyIGhhbmRsZXIgKHNpbmdsZSBjbGljaylcclxuICAgIHRoaXMudG9nZ2xlREZsYWcgPSBmdW5jdGlvbih0aGluZykge1xyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAnZGZsYWcnLCAhdGhpbmcuZGF0YS5kZmxhZyk7XHJcbiAgICAgICAgdGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gUyBjb3JuZXIgaGFuZGxlciAoc2luZ2xlIGNsaWNrKVxyXG4gICAgdGhpcy50b2dnbGVTRXhwYW5zaW9uID0gZnVuY3Rpb24odGhpbmcpIHtcclxuICAgICAgICB2YXIgaXNFeHBhbmRlZCA9ICEodGhpbmcuZGF0YSAmJiAhdGhpbmcuZGF0YS5zRXhwYW5kZWQpOyAvLyBleHBhbmQgYnkgZGVmYXVsdCBpZiBwcm9wZXJ0eSBub3QgcHJlc2VudFxyXG4gICAgICAgIF9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAnc0V4cGFuZGVkJywgIWlzRXhwYW5kZWQpO1xyXG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgX3VpLnNob3dDb3JuZXJUaXAodGhpbmcsICdTJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFAgY29ybmVyIGhhbmRsZXIgKHNpbmdsZSBjbGljaylcclxuICAgIHRoaXMudG9nZ2xlUEV4cGFuc2lvbiA9IGZ1bmN0aW9uKHRoaW5nKSB7XHJcbiAgICAgICAgX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nLmRhdGEsICdwRXhwYW5kZWQnLCAhc2VsZi5wSXNFeHBhbmRlZCh0aGluZykpO1xyXG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgX3VpLnNob3dDb3JuZXJUaXAodGhpbmcsIFwiUFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5wSXNFeHBhbmRlZCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwLmRhdGEgJiYgZ3JvdXAuZGF0YS5wRXhwYW5kZWQgPT09IHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gdW5kby9yZWRvIC0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5jYW5VbmRvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLmNhblVuZG8oKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy51bmRvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIudW5kbygpO1xyXG4gICAgICAgIF9kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY2FuUmVkbyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfZGlhZ3JhbS5jb21tYW5kSGFuZGxlci5jYW5SZWRvKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIF9kaWFncmFtLmNvbW1hbmRIYW5kbGVyLnJlZG8oKTtcclxuICAgICAgICBfZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJlZnJlc2ggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBfZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIF9kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gdXRpbGl0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gY2hlY2sgZm9yIGEgcmVjdCB3aXRoIE5hTiBYL1kvVy9IIGNvb3Jkcywgc28gd2UgY2FuIGRvIHN0dWZmIHdpdGggaXQgc3VjaCBhcyB1bmlvblJlY3RcclxuICAgIC8vIChOYU4sTmFOLDAsMCkgPT4gKDAsMCwwLDApXHJcbiAgICB0aGlzLnNhZmVSZWN0ID0gZnVuY3Rpb24ocmVjdCkge1xyXG4gICAgICAgIGlmIChpc05hTihyZWN0LngpKSB7XHJcbiAgICAgICAgICAgIHJlY3QueCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05hTihyZWN0LnkpKSB7XHJcbiAgICAgICAgICAgIHJlY3QueSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05hTihyZWN0LndpZHRoKSkge1xyXG4gICAgICAgICAgICByZWN0LndpZHRoID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzTmFOKHJlY3QuaGVpZ2h0KSkge1xyXG4gICAgICAgICAgICByZWN0LmhlaWdodCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tIGRlYnVnIG1hcCBtb2RlbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5sb2FkTW9kZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKCcjbWFwLW1vZGVsLWRlYnVnJykudmFsKF9kaWFncmFtLm1vZGVsLnRvSnNvbigpKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zYXZlTW9kZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbCA9IGdvLk1vZGVsLmZyb21Kc29uKCQoJyNtYXAtbW9kZWwtZGVidWcnKS52YWwoKSk7XHJcbiAgICAgICAgX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICBfZGlhZ3JhbS5tb2RlbC5hZGRDaGFuZ2VkTGlzdGVuZXIoX2F1dG9zYXZlLm1vZGVsQ2hhbmdlZCk7XHJcbiAgICAgICAgX2F1dG9zYXZlLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IHRydWU7XHJcbiAgICB9O1xyXG59OyIsIi8vIGNvbnRyb2xsZXIgZm9yIHVzZXIncyBtYXBzL2Rhc2hib2FyZFxyXG5cclxud2luZG93Lk1hcHNDdHJsID0gZnVuY3Rpb24oJHNjb3BlKSB7XHJcblxyXG4gICAgJHNjb3BlLnNlYXJjaFRleHQgPSAnJztcclxuXHJcbiAgICAkc2NvcGUubGlzdGluZ1BhcmFtcyA9IG5ldyBHb3JnZXNHcmlkLkxpc3RpbmdQYXJhbXMoKTtcclxuICAgICRzY29wZS5saXN0aW5nUGFyYW1zLnNvcnRCeSA9ICd1cGRhdGVkX2F0JztcclxuICAgICRzY29wZS5saXN0aW5nUGFyYW1zLnNvcnRPcmRlciA9ICdkZXNjJztcclxuXHJcbiAgICAkc2NvcGUubGlzdGluZ1BhcmFtcy52aWV3TmFtZSA9ICRzY29wZS5wYXJhbXMudmlld05hbWUgfHwgJ2FsbCc7IC8vIHNldCBkZWZhdWx0IHZpZXdcclxuICAgICRzY29wZS5yb3dTZWxlY3Rpb24gPSBuZXcgR29yZ2VzR3JpZC5Sb3dTZWxlY3Rpb24oKTtcclxuICAgICRzY29wZS52aWV3VHJlZVN0YXRlID0gbmV3IEdvcmdlc0dyaWQuVmlld1RyZWVTdGF0ZSgpO1xyXG4gICAgJHNjb3BlLnZpZXdUcmVlU3RhdGUuZXhwYW5kZWRWaWV3cyA9IFsnb3Jnc19iZWxvbmdlZF90byddO1xyXG4gICAgJHNjb3BlLm1hcHMgPSBbXTtcclxuICAgICRzY29wZS52aWV3cyA9IFtdO1xyXG4gICAgJHNjb3BlLnVzZXJzID0gW107XHJcblxyXG4gICAgJHNjb3BlLnRhZ2dpbmcgPSBuZXcgU2FuZGJhbmtUYWdnaW5nKCRzY29wZSk7XHJcbiAgICAkc2NvcGUuYWRtaW5UYWdnaW5nID0gbmV3IFNhbmRiYW5rQWRtaW5UYWdnaW5nKCRzY29wZSk7XHJcbiAgICAkc2NvcGUuc2hhcmluZyA9IG5ldyBTYW5kYmFua1NoYXJpbmcoJHNjb3BlKTtcclxuXHJcbiAgICAkc2NvcGUub3BlblRhZ2dpbmdNb2RhbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS50YWdnaW5nLm9wZW5Nb2RhbChcclxuICAgICAgICAgICAgJHNjb3BlLmdldFNlbGVjdGVkTWFwSWRzKCksXHJcbiAgICAgICAgICAgIGZhbHNlLCAvLyBkb24ndCBzaG93IGRlc2NyaXB0aW9uIGZpZWxkIChUT0RPOiBzaG93IGlmIGl0J3MgYSBzaW5nbGUgbWFwIHRoYXQgdGhlIHVzZXIgY2FuIGVkaXQ/KVxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkTWFwcygpO1xyXG4gICAgICAgICAgICB9IC8vIG9uIHVwZGF0ZVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5vcGVuQWRtaW5UYWdnaW5nTW9kYWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuYWRtaW5UYWdnaW5nLm9wZW5Nb2RhbChcclxuICAgICAgICAgICAgJHNjb3BlLmdldFNlbGVjdGVkTWFwSWRzKClbMF0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRNYXBzKCk7XHJcbiAgICAgICAgICAgIH0gLy8gb24gdXBkYXRlXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLm9wZW5TaGFyaW5nTW9kYWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2hhcmluZy5vcGVuTW9kYWwoXHJcbiAgICAgICAgICAgICRzY29wZS5nZXRTZWxlY3RlZE1hcElkcygpLFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkTWFwcygpO1xyXG4gICAgICAgICAgICB9IC8vIG9uIHVwZGF0ZVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0gcm93IHNlbGVjdGlvbiAtLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIFRPRE86IGFkZCBjb25kaXRpb25zIGZvciBlbmFibGluZyB0YWcvc2hhcmUvZGVsZXRlIGJ1dHRvbnMgYmFzZWQgb24gcGVybWlzc2lvbnMgb2Ygc2VsZWN0ZWQgbWFwc1xyXG5cclxuICAgICRzY29wZS5nZXRTZWxlY3RlZE1hcElkcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBpZHMgPSBbXTtcclxuICAgICAgICBfLmVhY2goJHNjb3BlLnJvd1NlbGVjdGlvbi5zZWxlY3RlZFJvd0luZGV4ZXMsIGZ1bmN0aW9uKGVsZW1lbnQsIGluZGV4LCBsaXN0KSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm1hcHNbaW5kZXhdKSB7IC8vIHNob3VsZCBhbHdheXMgYmUgdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIGlkcy5wdXNoKCRzY29wZS5tYXBzW2luZGV4XS5pZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gaWRzO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tIHJlc3BvbmQgdG8gdmlldy9wYWdlIGNoYW5nZXMgLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUubWF5YmVTZXRWaWV3ID0gZnVuY3Rpb24odmlldykge1xyXG4gICAgICAgIC8vIGRvbid0IHNldCB0aGUgdmlldyBpZiBhIHBhcmVudCB2aWV3IGlzIGNsaWNrZWQgb25cclxuICAgICAgICBpZiAoIXZpZXcuaXNQYXJlbnQpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmxpc3RpbmdQYXJhbXMudmlld05hbWUgPSB2aWV3Lm5hbWU7XHJcbiAgICAgICAgICAgICRzY29wZS5sb2FkTWFwcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkc2NvcGUudmlld1RyZWVTdGF0ZS5leHBhbmRWaWV3KHZpZXcubmFtZSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5wYWdlU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUubG9hZE1hcHMoKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFNvcnRCeSA9IGZ1bmN0aW9uKGNvbCkge1xyXG4gICAgICAgICRzY29wZS5saXN0aW5nUGFyYW1zLnNldFNvcnRCeShjb2wpO1xyXG4gICAgICAgICRzY29wZS5sb2FkTWFwcygpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZG9TZWFyY2ggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUubG9hZE1hcHMoKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnJlc2V0U2VhcmNoID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnNlYXJjaFRleHQgPSAnJztcclxuICAgICAgICAkc2NvcGUubG9hZE1hcHMoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLSBtYXAgZGF0YSAtLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5sb2FkTWFwcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgICRodHRwLmdldCgnL21hcHMuanNvbj8nICsgJHNjb3BlLmxpc3RpbmdQYXJhbXMudG9RdWVyeVN0cmluZygpICtcclxuICAgICAgICAgICAgJyZzZWFyY2g9JyArICRzY29wZS5zZWFyY2hUZXh0XHJcbiAgICAgICAgKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBnZXQgdXBkYXRlZCBwYXJhbXNcclxuICAgICAgICAgICAgICAgIF8uZXh0ZW5kKCRzY29wZS5saXN0aW5nUGFyYW1zLCByZXNwb25zZS5kYXRhLmxpc3RpbmdQYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJvd1NlbGVjdGlvbi5kZXNlbGVjdEFsbCgpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZpZXdzID0gcmVzcG9uc2UuZGF0YS52aWV3cztcclxuICAgICAgICAgICAgICAgICRzY29wZS5tYXBzID0gcmVzcG9uc2UuZGF0YS5tYXBzO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gcmVzcG9uc2UuZGF0YS51c2VycztcclxuICAgICAgICAgICAgICAgICRzY29wZS52aWV3VHJlZVN0YXRlLmV4cGFuZFZpZXcoJHNjb3BlLnBhcmFtcy5leHBhbmRWaWV3KTtcclxuICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgc3RvcFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBsb2FkIGxpc3Qgb2YgTWV0YU1hcHMnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5sb2FkTWFwcygpO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIHZpZXcgaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5saXN0VXNlclRhZ3MgPSBmdW5jdGlvbihtYXApIHtcclxuICAgICAgICByZXR1cm4gXy5wbHVjayhtYXAudXNlclRhZ3MsICduYW1lJykuam9pbignLCAnKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmxpc3RDY3NUYWdzID0gZnVuY3Rpb24obWFwKSB7XHJcbiAgICAgICAgcmV0dXJuIF8ucGx1Y2sobWFwLmNjc1RhZ3MsICduYW1lJykuam9pbignLCAnKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmxpc3RBZG1pblRhZ3MgPSBmdW5jdGlvbihtYXApIHtcclxuICAgICAgICByZXR1cm4gXy5wbHVjayhtYXAuYWRtaW5UYWdzLCAnbmFtZScpLmpvaW4oJywgJyk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5nZXRVc2VyTmFtZSA9IGZ1bmN0aW9uKG1hcCkge1xyXG4gICAgICAgIGlmIChtYXAudXNlcklkID09PSAkc2NvcGUudXNlcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIk1lXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHVzZXIgPSBfLmZpbmRXaGVyZSgkc2NvcGUudXNlcnMsIHtcclxuICAgICAgICAgICAgICAgIGlkOiBtYXAudXNlcklkXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gKHVzZXIgPyB1c2VyLm5hbWUgOiAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tIHN0YXIgYSBtYXAgLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUudG9nZ2xlU3RhciA9IGZ1bmN0aW9uKG1hcCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd0b2dnbGVTdGFyJyk7XHJcbiAgICAgICAgJGh0dHAucG9zdCgnL21hcHMvJyArIG1hcC5pZCArICcvdG9nZ2xlX3N0YXInKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZE1hcHMoKTsgLy8gcmVsb2FkIHRvIHVwZGF0ZSB0b3RhbCBpbiBUT0NcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0gZGVsZXRlIG1hcHMgLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuY29uZmlybURlbGV0ZVNlbGVjdGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG1hcElkcyA9ICRzY29wZS5nZXRTZWxlY3RlZE1hcElkcygpO1xyXG5cclxuICAgICAgICAvLyBpZiAobWFwSWRzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgLy8gICAgIGFsZXJ0aWZ5LmNvbmZpcm0oJ0RlbGV0ZSBzZWxlY3RlZCBNZXRhTWFwPycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAvLyAgICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgZGVsZXRlU2VsZWN0ZWQobWFwSWRzKTtcclxuICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgLy8gfSBlbHNlIGlmIChtYXBJZHMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIC8vICAgICBhbGVydGlmeS5jb25maXJtKCdEZWxldGUgJyArIG1hcElkcy5sZW5ndGggKyAnIHNlbGVjdGVkIE1ldGFNYXBzPycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAvLyAgICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgLy8gdGhpcyBpcyByZXF1aXJlZCB0byBtYWtlIG11bHRpcGxlIGFsZXJ0aWZ5IGNvbmZpcm1zIHdvcmsuLi5cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgYWxlcnRpZnkuY29uZmlybSgnWW91IGFyZSBkZWxldGluZyBtdWx0aXBsZSBNZXRhTWFwcywgYXJlIHlvdSByZWFsbHkgc3VyZT8nLCBmdW5jdGlvbihlMikge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgaWYgKGUyKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlU2VsZWN0ZWQobWFwSWRzKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgaWYgKG1hcElkcy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICBpZiAoY29uZmlybSgnRGVsZXRlIHNlbGVjdGVkIE1ldGFNYXA/JykpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZVNlbGVjdGVkKG1hcElkcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKG1hcElkcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIGlmIChjb25maXJtKCdEZWxldGUgJyArIG1hcElkcy5sZW5ndGggKyAnIHNlbGVjdGVkIE1ldGFNYXBzPycpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlybSgnWW91IGFyZSBkZWxldGluZyBtdWx0aXBsZSBNZXRhTWFwcywgYXJlIHlvdSByZWFsbHkgc3VyZT8nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZVNlbGVjdGVkKG1hcElkcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGRlbGV0ZVNlbGVjdGVkKG1hcElkcykge1xyXG4gICAgICAgICRodHRwLnBvc3QoJy9tYXBzL2RlbGV0ZV9tdWx0aXBsZScsIG1hcElkcykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRNYXBzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygobWFwSWRzLmxlbmd0aCA+IDEgPyAnTWV0YU1hcHMnIDogJ01ldGFNYXAnKSArICcgZGVsZXRlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5lcnJvcignQ291bGQgbm90IGRlbGV0ZSBNZXRhTWFwcycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3QgZGVsZXRlIE1ldGFNYXBzJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59OyIsIi8vIGZ1bmN0aW9ucyBmb3IgZWRpdGluZyBwZXJzcGVjdGl2ZXMgQU5EIGRpc3RpbmN0aW9ucywgd2hpY2ggd29yayBzaW1pbGFybHkgaW4gdGhlIFVJXHJcblxyXG5TYW5kYmFua0VkaXRvci5QZXJzcGVjdGl2ZXMgPSBmdW5jdGlvbigkc2NvcGUsIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAvLyB0ZW1wb3Jhcnkgc3RhdGUgZmxhZyBmb3IgYWRkaW5nL3JlbW92aW5nIFAvRCBzZWxlY3Rpb25zIHByb2dyYW1tYXRpY2FsbHlcclxuICAgIHZhciBzZWxlY3RpbmdMaW5rZWRUaGluZ3MgPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHt9O1xyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdQZXJzcGVjdGl2ZXMsIGN1cnJlbnRUYWJDaGFuZ2VkJyk7XHJcbiAgICAgICAgaWYgKG5ld1ZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9QRVJTUEVDVElWRVMpIHsgLy8gb3BlbmluZyBwZXJzcGVjdGl2ZXNcclxuICAgICAgICAgICAgc2V0UG9yRFRoaW5nKCdQJyk7XHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZCh0cnVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9sZFZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9QRVJTUEVDVElWRVMpIHsgLy8gY2xvc2luZyBwZXJzcGVjdGl2ZXNcclxuICAgICAgICAgICAgc2F2ZUxpbmtzKCdQJyk7XHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZChmYWxzZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChuZXdWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfRElTVElOQ1RJT05TKSB7IC8vIG9wZW5pbmcgZGlzdGluY3Rpb25zXHJcbiAgICAgICAgICAgIHNldFBvckRUaGluZygnRCcpO1xyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQodHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChvbGRWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfRElTVElOQ1RJT05TKSB7IC8vIGNsb3NpbmcgZGlzdGluY3Rpb25zXHJcbiAgICAgICAgICAgIHNhdmVMaW5rcygnRCcpO1xyXG4gICAgICAgICAgICBtYXAuc2V0RWRpdGluZ0Jsb2NrZWQoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5oYW5kbGVEaWFncmFtRXZlbnQgPSBmdW5jdGlvbihldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xyXG4gICAgICAgICAgICBpZiAobWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9QRVJTUEVDVElWRVMpIHx8IG1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfRElTVElOQ1RJT05TKSkge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlTGlua3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLSBQL0QgRWRpdG9yIHN0YXRlXHJcblxyXG4gICAgdGhpcy5pc0luUE9yREVkaXRvck1vZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gbWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSB8fCBtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5O1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzSW5QRWRpdG9yTW9kZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5O1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzSW5ERWRpdG9yTW9kZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5IDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1BFZGl0b3JQb2ludCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgPT0gZ3JvdXAuZGF0YS5rZXk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNERWRpdG9yVGhpbmcgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5ID09IGdyb3VwLmRhdGEua2V5O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBOQjogdGhpcyBpcyBjYWxsZWQgdmlhIG1hcC5nZXRDb3JuZXJGdW5jdGlvbiwgc28gd2UgZ2V0IHRoZSBleHRyYSBjb3JuZXIgYXJnLCB3aGljaCB3ZSBjYW4gaWdub3JlXHJcbiAgICB0aGlzLnNldFBFZGl0b3JQb2ludCA9IGZ1bmN0aW9uKHRoaW5nLCBjb3JuZXIpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgbWFwLmdldFVpKCkub3BlblRhYihtYXAuZ2V0VWkoKS5UQUJfSURfUEVSU1BFQ1RJVkVTKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2V0REVkaXRvclRoaW5nID0gZnVuY3Rpb24odGhpbmcpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgLy8gTkI6IG5lZWQgdG8gc2VsZWN0IG9ubHkgdGhpcyB0aGluZywgc2luY2UgdGhpcyBpcyBpbnZva2VkXHJcbiAgICAgICAgICAgIC8vIGJ5IGEgY29udHJvbC1jbGljaywgd2hpY2ggd2lsbCBub3QgYXV0b21hdGljYWxseSBzZWxlY3QganVzdCBpdFxyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaW5nLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5vcGVuVGFiKG1hcC5nZXRVaSgpLlRBQl9JRF9ESVNUSU5DVElPTlMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmlzUGVyc3BlY3RpdmVQb2ludCA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGxpbmtzID0gZ3JvdXAuZmluZExpbmtzT3V0T2YoKTtcclxuICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNTZWxlY3RlZFBlcnNwZWN0aXZlVmlldyA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGxpbmtzID0gZ3JvdXAuZmluZExpbmtzSW50bygpO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcgJiYgbWFwLnBJc0V4cGFuZGVkKGxpbmsuZnJvbU5vZGUpICYmIGxpbmsuZnJvbU5vZGUuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlzVG9nZ2xlZFBlcnNwZWN0aXZlVmlldyA9IGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGxpbmtzID0gZ3JvdXAuZmluZExpbmtzSW50bygpO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSAnUCcgJiYgbWFwLnBJc0V4cGFuZGVkKGxpbmsuZnJvbU5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaXNNb3VzZU92ZXJQZXJzcGVjdGl2ZVZpZXcgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHZhciBsaW5rcyA9IGdyb3VwLmZpbmRMaW5rc0ludG8oKTtcclxuICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT0gJ1AnICYmIGxpbmsuZnJvbU5vZGUgPT0gbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRQZXJzcGVjdGl2ZVZpZXdXZWlnaHQgPSBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgIHZhciBtb2RlID0gbWFwLmdldFVpKCkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLnBlcnNwZWN0aXZlTW9kZTtcclxuICAgICAgICBpZiAobW9kZSA9PSAnc3BvdGxpZ2h0JyB8fCBtb2RlID09ICdib3RoJykge1xyXG4gICAgICAgICAgICByZXR1cm4gKHNlbGYuaXNTZWxlY3RlZFBlcnNwZWN0aXZlVmlldyhncm91cCkgPyAxIDogMCkgK1xyXG4gICAgICAgICAgICAgICAgKHNlbGYuaXNUb2dnbGVkUGVyc3BlY3RpdmVWaWV3KGdyb3VwKSA/IDEgOiAwKSArXHJcbiAgICAgICAgICAgICAgICAoc2VsZi5pc01vdXNlT3ZlclBlcnNwZWN0aXZlVmlldyhncm91cCkgPyAxIDogMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGNhdGVnb3J5IGlzIFwiUFwiIG9yIFwiRFwiIChwZXJzcGVjdGl2ZXMgb3IgZGlzdGluY3Rpb25zKVxyXG4gICAgZnVuY3Rpb24gc2V0UG9yRFRoaW5nKGNhdGVnb3J5KSB7XHJcbiAgICAgICAgLy8gaWYgYWxyZWFkeSBzZXQsIG11c3QgZG8gc2F2ZSBwZXJzcGVjdGl2ZXMgb3Igc2F2ZSBkaXN0aW5jdGlvbnNcclxuICAgICAgICBpZiAobWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSB8fCBtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5KVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciB0aGluZyA9IG1hcC5nZXREaWFncmFtKCkuc2VsZWN0aW9uLmZpcnN0KCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2V0UG9yRFRoaW5nOiAnICsgdGhpbmcpO1xyXG4gICAgICAgIGlmICh0aGluZyBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGluZy5kYXRhLmtleTtcclxuICAgICAgICAgICAgaWYgKGNhdGVnb3J5ID09IFwiUFwiKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5ID0ga2V5O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNhdGVnb3J5ID09IFwiRFwiKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5ID0ga2V5O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzZWxlY3Qgdmlld3Mvb3RoZXJzXHJcbiAgICAgICAgICAgIHNlbGVjdExpbmtlZFRoaW5nc0Zvcih0aGluZywgY2F0ZWdvcnkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyB0aGlzIGlzIGNhbGxlZCB3aGVuIHRoZSBzZWxlY3Rpb24gY2hhbmdlcyAtIGlmIHRoZSB0aGluZyBpcyBzZXQsXHJcbiAgICAvLyBhZGRzL3JlbW92ZXMgRC9QIGxpbmtzIGFjY29yZGluZyB0byB3aGF0IGlzIHNlbGVjdGVkOyBvdGhlcndpc2VcclxuICAgIC8vIGp1c3Qgc2hvd3MvaGlkZXMgRC9QIGxpbmtzIGZvciB0aGUgc2VsZWN0ZWQgdGhpbmcocylcclxuICAgIGZ1bmN0aW9uIHVwZGF0ZUxpbmtzKCkge1xyXG4gICAgICAgIGlmIChzZWxlY3RpbmdMaW5rZWRUaGluZ3MpIC8vIHNlbGVjdGlvbiBpcyBiZWluZyBjaGFuZ2VkIHByb2dyYW1tYXRpY2FsbHksIHNvIGRvbid0IHJlc3BvbmRcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgcE9yRFRoaW5nID0gbnVsbDtcclxuICAgICAgICB2YXIgY2F0ZWdvcnkgPSBudWxsO1xyXG4gICAgICAgIGlmIChtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5KSB7XHJcbiAgICAgICAgICAgIHBPckRUaGluZyA9IG1hcC5nZXREaWFncmFtKCkuZmluZE5vZGVGb3JLZXkobWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSk7XHJcbiAgICAgICAgICAgIGNhdGVnb3J5ID0gXCJQXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5KSB7XHJcbiAgICAgICAgICAgIHBPckRUaGluZyA9IG1hcC5nZXREaWFncmFtKCkuZmluZE5vZGVGb3JLZXkobWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSk7XHJcbiAgICAgICAgICAgIGNhdGVnb3J5ID0gXCJEXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgYWRkTGlua3NUbyA9IG5ldyBnby5MaXN0KCk7XHJcbiAgICAgICAgdmFyIHJlbW92ZUxpbmtzID0gbmV3IGdvLkxpc3QoKTtcclxuXHJcbiAgICAgICAgLy8gaXRlcmF0ZSB0aHJvdWdoIGFsbCB0aGluZ3NcclxuICAgICAgICBpZiAoY2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgdmFyIGxheWVycyA9IG1hcC5nZXREaWFncmFtKCkubGF5ZXJzO1xyXG4gICAgICAgICAgICB3aGlsZSAobGF5ZXJzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gbGF5ZXIucGFydHM7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBwYXJ0cy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBsaW5rcyB0byBhZGQvcmVtb3ZlIGJhc2VkIG9uIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocE9yRFRoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlua3MgPSBwYXJ0LmZpbmRMaW5rc0ludG8oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ0xpbmsgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmsuZnJvbU5vZGUuZGF0YS5rZXkgPT0gcE9yRFRoaW5nLmRhdGEua2V5ICYmIGxpbmsuZGF0YS5jYXRlZ29yeSA9PSBjYXRlZ29yeSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdMaW5rID0gbGluaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWNpZGUgd2hldGhlciB0byBhZGQgb3IgcmVtb3ZlIGEgbGluayB0byB0aGUgcGFydCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCBpcyBzZWxlY3RlZCBhbmQgd2hldGhlciBhIGxpbmsgZXhpc3RzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nTGluayAmJiBwYXJ0LmlzU2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTGlua3NUby5hZGQocGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChleGlzdGluZ0xpbmsgJiYgIXBhcnQuaXNTZWxlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVMaW5rcy5hZGQoZXhpc3RpbmdMaW5rKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZG8gdGhlIGFkZGluZy9yZW1vdmluZyBvZiBsaW5rc1xyXG4gICAgICAgIHZhciBhZGRzID0gYWRkTGlua3NUby5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoYWRkcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgICAgICB2YXIgdG8gPSBhZGRzLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndXBkYXRlTGlua3M6IGFkZGluZyBsaW5rIGZyb20gJyArIHBPckRUaGluZyArICcgdG8gJyArIHRvKTtcclxuICAgICAgICAgICAgaWYgKGNhdGVnb3J5ID09IFwiRFwiICYmIHBPckRUaGluZy5kYXRhLmtleSA9PSB0by5kYXRhLmtleSkge1xyXG4gICAgICAgICAgICAgICAgcE9yRFRoaW5nLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiWW91IGNhbid0IGRpc3Rpbmd1aXNoIGEgdGhpbmcgZnJvbSBpdHNlbGYhXCIpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5tb2RlbC5hZGRMaW5rRGF0YSh7XHJcbiAgICAgICAgICAgICAgICBmcm9tOiBwT3JEVGhpbmcuZGF0YS5rZXksXHJcbiAgICAgICAgICAgICAgICB0bzogdG8uZGF0YS5rZXksXHJcbiAgICAgICAgICAgICAgICBmcm9tUG9ydDogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICB0b1BvcnQ6IGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmVtb3ZlcyA9IHJlbW92ZUxpbmtzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChyZW1vdmVzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcmVtb3ZlID0gcmVtb3Zlcy52YWx1ZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3VwZGF0ZUxpbmtzOiByZW1vdmluZyBsaW5rIGZyb20gJyArIHJlbW92ZS5mcm9tTm9kZSArICcgdG8gJyArIHJlbW92ZS50b05vZGUpO1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ3JlbW92ZSBsaW5rJyk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkucmVtb3ZlKHJlbW92ZSk7XHJcbiAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwucmVtb3ZlTGlua0RhdGEocmVtb3ZlLmRhdGEpO1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdyZW1vdmUgbGluaycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc2hvdyBsaW5rc1xyXG4gICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzYXZlTGlua3MoY2F0ZWdvcnkpIHtcclxuICAgICAgICB2YXIgcE9yRFRoaW5nID0gbnVsbDtcclxuICAgICAgICBpZiAoY2F0ZWdvcnkgPT0gXCJQXCIpIHtcclxuICAgICAgICAgICAgcE9yRFRoaW5nID0gbWFwLmdldERpYWdyYW0oKS5maW5kTm9kZUZvcktleShtYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5KTtcclxuICAgICAgICAgICAgbWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSA9IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjYXRlZ29yeSA9PSBcIkRcIikge1xyXG4gICAgICAgICAgICBwT3JEVGhpbmcgPSBtYXAuZ2V0RGlhZ3JhbSgpLmZpbmROb2RlRm9yS2V5KG1hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkpO1xyXG4gICAgICAgICAgICBtYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1hcC5nZXREaWFncmFtKCkuY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VsZWN0TGlua2VkVGhpbmdzRm9yKGdyb3VwLCBjYXRlZ29yeSkge1xyXG4gICAgICAgIHNlbGVjdGluZ0xpbmtlZFRoaW5ncyA9IHRydWU7XHJcbiAgICAgICAgbWFwLmdldERpYWdyYW0oKS5jbGVhclNlbGVjdGlvbigpO1xyXG5cclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NPdXRPZigpO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PSBjYXRlZ29yeSlcclxuICAgICAgICAgICAgICAgIGxpbmsudG9Ob2RlLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZWN0aW5nTGlua2VkVGhpbmdzID0gZmFsc2U7XHJcbiAgICB9XHJcbn07IiwiLy8gZnVuY3Rpb25zIGZvciB0aGUgcHJlc2VudGVyL3NsaWRlc1xyXG5cclxuU2FuZGJhbmtFZGl0b3IuUHJlc2VudGVyID0gZnVuY3Rpb24gKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIC8vIGNvbnN0YW50c1xyXG4gICAgdGhpcy5TTElERV9CTE9DS0VSX1dJRFRIID0gMTAwMDtcclxuICAgIHRoaXMuU0xJREVfQkxPQ0tFUl9DT0xPUiA9IFwiI2ZmZlwiO1xyXG4gICAgdGhpcy5TTElERV9CTE9DS0VSX09QQUNJVFkgPSAwLjk7XHJcblxyXG4gICAgLy8gc3RhdGUgdmFyc1xyXG4gICAgdGhpcy5jdXJyZW50U2xpZGVJbmRleCA9IG51bGw7XHJcbiAgICB0aGlzLmlzUHJlc2VudGluZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5zaG93VE9DID0gZmFsc2U7XHJcbiAgICB0aGlzLmlzQ3JlYXRpbmdUaHVtYm5haWwgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBtYXNrIGFwcGxpZWQgYXJvdW5kIHNsaWRlIHJlZ2lvbiB3aGVuIHByZXNlbnRpbmdcclxuICAgIHRoaXMuc2xpZGVCbG9ja2VyID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmRpYWdyYW1Bc3BlY3RSYXRpbyA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmF1dG9zYXZlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbWFwLmdldEF1dG9zYXZlKCkuc2F2ZSgnZWRpdF9wcmVzZW50ZXInKTsgXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0gZWRpdGluZyBmdW5jdGlvbnMgZm9yIGRpZmZlcmVudCBzbGlkZSB0eXBlcyAtLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gTkI6IGhhc0xpbmtzIGNhbiBoYXZlIHZhbHVlcyBmYWxzZSwgMSwgb3IgdHJ1ZSAoMSBtZWFucyBvbmx5IGEgc2luZ2xlIGxpbmspXHJcbiAgICB0aGlzLnNsaWRlVHlwZXMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnVElUTEVfQk9EWScsIGxhYmVsOiAnVGl0bGUgYW5kIEJvZHknLFxyXG4gICAgICAgICAgICBoYXNUaXRsZTogdHJ1ZSwgIGhhc05vdGVzOiB0cnVlLCAgaGFzQ2hlY2tzOiBmYWxzZSwgaGFzTWFwUmVnaW9uOiBmYWxzZSwgaGFzTWFwU3VtbWFyeTogZmFsc2UsIGhhc0xpbmtzOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgICAgbmFtZTogJ1RJVExFX0JPRFlfTUFQJywgbGFiZWw6ICdUaXRsZSwgQm9keSBhbmQgTWV0YU1hcCcsXHJcbiAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCAgaGFzTm90ZXM6IHRydWUsICBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IHRydWUsICBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgICBuYW1lOiAnQUNUSVZJVFlfTUFQJywgbGFiZWw6ICdMZXNzb24gQWN0aXZpdHkgYW5kIE1ldGFNYXAnLFxyXG4gICAgICAgICAgICBoYXNUaXRsZTogdHJ1ZSwgIGhhc05vdGVzOiB0cnVlLCAgaGFzQ2hlY2tzOiB0cnVlLCAgaGFzTWFwUmVnaW9uOiB0cnVlLCAgaGFzTWFwU3VtbWFyeTogZmFsc2UsIGhhc0xpbmtzOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgICBuYW1lOiAnTUFQX09OTFknLCBsYWJlbDogJ01ldGFNYXAgb25seScsXHJcbiAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCAgaGFzTm90ZXM6IGZhbHNlLCBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IHRydWUsICBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgICBuYW1lOiAnTUFQX1NVTU1BUlknLCBsYWJlbDogJ01ldGFNYXAgU3VtbWFyeScsXHJcbiAgICAgICAgICAgIGhhc1RpdGxlOiBmYWxzZSwgaGFzTm90ZXM6IGZhbHNlLCBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IHRydWUsIGhhc01hcFN1bW1hcnk6IHRydWUsIGhhc0xpbmtzOiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgIF07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tIGxpbmsvYXR0YWNobWVudCB0eXBlcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMubGlua1R5cGVzID0gW1xyXG4gICAgICAgIHsgbmFtZTogJycsIGxhYmVsOiAnLS0gU2VsZWN0IGF0dGFjaG1lbnQgdHlwZSAtLScgfSxcclxuICAgICAgICB7IG5hbWU6ICdXRUInLCBsYWJlbDogJ1dlYiBQYWdlJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ1BERicsIGxhYmVsOiAnUERGJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0RPQycsIGxhYmVsOiAnRG9jdW1lbnQnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnU1BSRUFEU0hFRVQnLCBsYWJlbDogJ1NwcmVhZHNoZWV0JyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ1BSRVNFTlRBVElPTicsIGxhYmVsOiAnUHJlc2VudGF0aW9uJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ01FVEFNQVAnLCBsYWJlbDogJ01ldGFNYXAnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnSU1BR0UnLCBsYWJlbDogJ0ltYWdlJyB9LFxyXG4gICAgICAgIHsgbmFtZTogJ0FVRElPJywgbGFiZWw6ICdBdWRpbycgfSxcclxuICAgICAgICB7IG5hbWU6ICdWSURFTycsIGxhYmVsOiAnVmlkZW8nIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnU1VSVkVZJywgbGFiZWw6ICdTdXJ2ZXknIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnV09SS1NIRUVUJywgbGFiZWw6ICdXb3Jrc2hlZXQnIH1cclxuICAgIF07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIGxpc3Qgb2YgYWxsIHRoaW5ncyBpbiB0aGUgbWFwLCBmb3IgbWFwIHN1bW1hcnkgc2xpZGVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuaWRlYUxpc3QgPSAnJztcclxuXHJcbiAgICAvLyBvbmx5IGNhbGwgdGhpcyBvY2Nhc2lvbmFsbHksIGFzIHRoZXkgd29uJ3QgYmUgZWRpdGluZyB0aGUgbWFwIHdoaWxlIHByZXNlbnRlciBpcyBvcGVuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVJZGVhTGlzdCgpIHtcclxuICAgICAgICB2YXIgbm9kZXMgPSBtYXAuZ2V0RGlhZ3JhbSgpLm5vZGVzO1xyXG4gICAgICAgIHZhciBsaXN0ID0gW107XHJcbiAgICAgICAgd2hpbGUgKG5vZGVzLm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoKG5vZGVzLnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0LnB1c2gobm9kZXMudmFsdWUuZGF0YS50ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsaXN0LnNvcnQoKTtcclxuXHJcbiAgICAgICAgLy8gZmlsdGVyIG91dCBwbGFjZWhvbGRlciBuYW1lcyAtIHNlZSBtYXAuanM6Z2V0TmV3VGhpbmdEYXRhLCBjcmVhdGVTaXN0ZXIsIGV0Yy5cclxuICAgICAgICBsaXN0ID0gXy5kaWZmZXJlbmNlKF8udW5pcShsaXN0LCB0cnVlKSwgXHJcbiAgICAgICAgICAgIG1hcC5nZXRHZW5lcmF0b3IoKS5nZXRQbGFjZWhvbGRlcklkZWFOYW1lcygpLCBcclxuICAgICAgICAgICAgWydOZXcgSWRlYScsICdOZXcgRGlzdGluZ3Vpc2hlZCBJZGVhJywgJ05ldyBSZWxhdGVkIElkZWEnLCAnTmV3IFJlbGF0aW9uc2hpcCBJZGVhJywgJ05ldyBQYXJ0IElkZWEnLFxyXG4gICAgICAgICAgICAgJ0lkZWEnLCAnUGFydCcsICdSZWxhdGlvbnNoaXAgSWRlYSddIC8vIG5ld2VyIHNpbXBsaWZpZWQgbmFtZXNcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBzZWxmLmlkZWFMaXN0ID0gbGlzdC5qb2luKCcsICcpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc3VtbWFyeUFuYWx5dGljcyA9IFtcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9USElOR1MnLCBzaW5ndWxhckxhYmVsOiAnRGlzdGluY3Rpb24nLCBwbHVyYWxMYWJlbDogJ0Rpc3RpbmN0aW9ucycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9TWVNURU1TJywgc2luZ3VsYXJMYWJlbDogJ1N5c3RlbScsIHBsdXJhbExhYmVsOiAnU3lzdGVtcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9SRUxBVElPTlNISVBTJywgc2luZ3VsYXJMYWJlbDogJ1JlbGF0aW9uc2hpcCcsIHBsdXJhbExhYmVsOiAnUmVsYXRpb25zaGlwcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9QRVJTUEVDVElWRVMnLCBzaW5ndWxhckxhYmVsOiAnUGVyc3BlY3RpdmUnLCBwbHVyYWxMYWJlbDogJ1BlcnNwZWN0aXZlcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9SVEhJTkdTJywgc2luZ3VsYXJMYWJlbDogJ1JlbGF0aW9uc2hpcCBJZGVhJywgcGx1cmFsTGFiZWw6ICdSZWxhdGlvbnNoaXAgSWRlYXMnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfU1lTVEVNX1JUSElOR1MnLCBzaW5ndWxhckxhYmVsOiAnUmVsYXRpb25zaGlwIFN5c3RlbScsIHBsdXJhbExhYmVsOiAnUmVsYXRpb25zaGlwIFN5c3RlbXMnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfU1lTVEVNX1BFUlNQRUNUSVZFUycsIHNpbmd1bGFyTGFiZWw6ICdQZXJzcGVjdGl2ZSBTeXN0ZW0nLCBwbHVyYWxMYWJlbDogJ1BlcnNwZWN0aXZlIFN5c3RlbXMnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfRElTVElOQ1RJT05TJywgc2luZ3VsYXJMYWJlbDogJ0FkdmFuY2VkIERpc3RpbmN0aW9uJywgcGx1cmFsTGFiZWw6ICdBZHZhbmNlZCBEaXN0aW5jdGlvbnMnIH0sXHJcbiAgICBdO1xyXG5cclxuICAgIHRoaXMuYWRkQ2hlY2sgPSBmdW5jdGlvbihub2RlRGF0YSkge1xyXG4gICAgICAgICBub2RlRGF0YS5jaGVja3MucHVzaCh7IHRleHQ6ICcnIH0pO1xyXG4gICAgICAgICBzZWxmLmF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGVsZXRlQ2hlY2sgPSBmdW5jdGlvbiAoY2hlY2ssIG5vZGVEYXRhKSB7XHJcbiAgICAgICAgdmFyIGkgPSBfLmluZGV4T2Yobm9kZURhdGEuY2hlY2tzLCBjaGVjayk7XHJcbiAgICAgICAgbm9kZURhdGEuY2hlY2tzLnNwbGljZShpLCAxKTtcclxuICAgICAgICBzZWxmLmF1dG9zYXZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYWRkTGluayA9IGZ1bmN0aW9uKG5vZGVEYXRhKSB7XHJcbiAgICAgICAgbm9kZURhdGEubGlua3MucHVzaCh7IHRpdGxlOiAnJywgdXJsOiAnJywgdHlwZTogJycgfSk7XHJcbiAgICAgICAgc2VsZi5hdXRvc2F2ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmRlbGV0ZUxpbmsgPSBmdW5jdGlvbiAobGluaywgbm9kZURhdGEpIHtcclxuICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZihub2RlRGF0YS5saW5rcywgbGluayk7XHJcbiAgICAgICAgbm9kZURhdGEubGlua3Muc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIHNlbGYuYXV0b3NhdmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50b2dnbGVUT0MgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5pc1ByZXNlbnRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2hvd1RPQyA9ICFzZWxmLnNob3dUT0M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gTkI6IGNhbid0IGNyZWF0ZSB0aGlzIGluIGluaXQgYXMgdGhlIGRpYWdyYW0gZG9lc24ndCBleGlzdCB5ZXQuLi5cclxuICAgIGZ1bmN0aW9uIG1heWJlSW5pdFNsaWRlQmxvY2tlcigpIHtcclxuICAgICAgICBpZiAoIXNlbGYuc2xpZGVCbG9ja2VyKSB7XHJcbiAgICAgICAgICAgIHZhciBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcbiAgICAgICAgICAgIHNlbGYuc2xpZGVCbG9ja2VyID0gbWsoZ28uTm9kZSwgZ28uUGFuZWwuQXV0byxcclxuICAgICAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJOYW1lOiAnVG9vbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogc2VsZi5TTElERV9CTE9DS0VSX09QQUNJVFlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtayhnby5TaGFwZSwgXCJSZWN0YW5nbGVcIixcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogc2VsZi5TTElERV9CTE9DS0VSX0NPTE9SLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDoxMDAwXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLmFkZChzZWxmLnNsaWRlQmxvY2tlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIHRoaXMuY3VycmVudFRhYkNoYW5nZWQgPSBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICBpZiAob2xkVmFsdWUgPT0gbWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUikgeyAvLyBjbG9zaW5nIHRhYlxyXG4gICAgICAgICAgICBzZWxmLnN0b3BQcmVzZW50aW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG5ld1ZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9QUkVTRU5URVIpIHsgLy8gb3BlbmluZyB0YWJcclxuICAgICAgICAgICAgLy8gc2hvdyBzbGlkZXMgKHNlZSBsYXlvdXRzLnNsaWRlVGVtcGxhdGUsIGJpbmRpbmcgb2YgdmlzaWJsZSBhdHRyKVxyXG4gICAgICAgICAgICBzZWxmLmRpYWdyYW1Bc3BlY3RSYXRpbyA9ICQoJyNkaWFncmFtJykud2lkdGgoKSAvICQoJyNkaWFncmFtJykuaGVpZ2h0KCk7ICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RpYWdyYW1Bc3BlY3RSYXRpbzogJyArIHNlbGYuZGlhZ3JhbUFzcGVjdFJhdGlvKTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5tYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgIHVwZGF0ZUlkZWFMaXN0KCk7XHJcbiAgICAgICAgICAgIGlmICghc2VsZi5jdXJyZW50U2xpZGVJbmRleCAmJiBzZWxmLmdldFNsaWRlTm9kZURhdGFzKCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50U2xpZGVJbmRleCA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5zbGlkZVRodW1ibmFpbFNlbGVjdGVkKDEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5oYW5kbGVEaWFncmFtRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBlKSB7XHJcbiAgICAgICAgaWYgKCFtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PSAnU2VsZWN0aW9uRGVsZXRpbmcnKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb24uY291bnQgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nID0gc2VsZWN0aW9uLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpbmcgaW5zdGFuY2VvZiBnby5Ob2RlICYmIHRoaW5nLmRhdGEuY2F0ZWdvcnkgPT0gJ3NsaWRlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybShcIkRlbGV0ZSB0aGlzIHNsaWRlIGZyb20gdGhlIHByZXNlbnRhdGlvbj9cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldmVudE5hbWUgPT0gJ1NlbGVjdGlvbkRlbGV0ZWQnKSB7XHJcbiAgICAgICAgICAgIC8vIGlmIHNsaWRlIGlzIGRlbGV0ZWQgZnJvbSBjYW52YXMgcmF0aGVyIHRoYW4gYnkgdGh1bWJuYWlsIHggYnV0dG9uLCBuZWVkIHRvIHVwZGF0ZSBpbmRleGVzXHJcbiAgICAgICAgICAgIGNvbXBhY3RTbGlkZUluZGV4ZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXZlbnROYW1lID09ICdTZWxlY3Rpb25Nb3ZlZCcgfHwgZXZlbnROYW1lID09ICdQYXJ0UmVzaXplZCcpIHtcclxuICAgICAgICAgICAgLy8gY2xlYXIgdGh1bWJuYWlsIGNhY2hlXHJcbiAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnVmlld3BvcnRCb3VuZHNDaGFuZ2VkJykge1xyXG4gICAgICAgICAgICAvLyBhZGp1c3Qgem9vbWluZyBvZiBtYXAgcmVnaW9uXHJcbiAgICAgICAgICAgIC8vc2VsZi53aW5kb3dSZXNpemVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLndpbmRvd1Jlc2l6ZWQgPSBfLmRlYm91bmNlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNlbGYuc2xpZGVUaHVtYm5haWxTZWxlY3RlZChzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgIH0sIDEwMDApO1xyXG5cclxuICAgIHRoaXMuc2hvd1NpZGViYXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gbWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9QUkVTRU5URVIpICYmICghc2VsZi5pc1ByZXNlbnRpbmcgfHwgc2VsZi5zaG93VE9DKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kaXNhYmxlTWFwVG9vbGJhckJ1dHRvbnMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gIW1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSBcclxuICAgICAgICAgICAgfHwgc2VsZi5pc1ByZXNlbnRpbmcgXHJcbiAgICAgICAgICAgIHx8ICFzZWxmLmdldEN1cnJlbnRTbGlkZVR5cGUoKS5oYXNNYXBSZWdpb247XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyBhbiBhcnJheSBvZiBub2RlIGRhdGEgb2JqZWN0cyAobm90IHRoZSBzbGlkZSBub2RlcyB0aGVtc2VsdmVzKVxyXG4gICAgdGhpcy5nZXRTbGlkZU5vZGVEYXRhcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIG5vZGVzID0gZGlhZ3JhbS5tb2RlbC5ub2RlRGF0YUFycmF5O1xyXG4gICAgICAgIHZhciBub2RlRGF0YXMgPSBfLmZpbHRlcihub2RlcywgZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuY2F0ZWdvcnkgPT0gJ3NsaWRlJztcclxuICAgICAgICB9KTtcclxuICAgICAgICBub2RlRGF0YXMgPSBfLnNvcnRCeShub2RlRGF0YXMsIGZ1bmN0aW9uIChub2RlRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZURhdGEuaW5kZXg7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2xpZGVOb2RlRGF0YXMsIGluZGV4ZXM6ICcgKyBfLnBsdWNrKHNsaWRlc0RhdGEsICdpbmRleCcpKTtcclxuICAgICAgICByZXR1cm4gbm9kZURhdGFzO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldFNsaWRlQ291bnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLmxlbmd0aDtcclxuICAgIH07ICBcclxuXHJcbiAgICB0aGlzLmdldEFjdGl2aXR5U2xpZGVDb3VudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfLndoZXJlKHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKSwgeyB0eXBlOiAnQUNUSVZJVFlfTUFQJyB9KS5sZW5ndGg7XHJcbiAgICB9OyAgXHJcblxyXG4gICAgdGhpcy5nZXRTbGlkZVR5cGUgPSBmdW5jdGlvbih0eXBlTmFtZSkge1xyXG4gICAgICAgIHJldHVybiBfLmZpbmRXaGVyZShzZWxmLnNsaWRlVHlwZXMsIHsgbmFtZTogdHlwZU5hbWUgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0Q3VycmVudFNsaWRlVHlwZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmZpbmRXaGVyZShzZWxmLnNsaWRlVHlwZXMsIHsgbmFtZTogc2xpZGUuZGF0YS50eXBlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZmluZFNsaWRlQnlJbmRleChpbmRleCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgc2xpZGVEYXRhID0gXy5maW5kKHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKSwgZnVuY3Rpb24gKHNsaWRlRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2xpZGVEYXRhLmluZGV4ID09IGluZGV4O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChzbGlkZURhdGEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZGlhZ3JhbS5maW5kTm9kZUZvcktleShzbGlkZURhdGEua2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGluY3JlbWVudCBpcyAtMSBvciArMVxyXG4gICAgdGhpcy5tb3ZlU2xpZGUgPSBmdW5jdGlvbiAoaW5kZXgsIGluY3JlbWVudCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvciA9IGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXggKyBpbmNyZW1lbnQpO1xyXG4gICAgICAgICAgICBpZiAoc2xpZGUgJiYgbmVpZ2hib3IpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ21vdmVTbGlkZTogc3dhcHBpbmcgJyArIHNsaWRlLmRhdGEua2V5ICsgJyB3aXRoICcgKyBuZWlnaGJvci5kYXRhLmtleSk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJtb3ZlIHNsaWRlXCIpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2xpZGUuZGF0YSwgJ2luZGV4Jywgc2xpZGUuZGF0YS5pbmRleCArIGluY3JlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShuZWlnaGJvci5kYXRhLCAnaW5kZXgnLCBuZWlnaGJvci5kYXRhLmluZGV4IC0gaW5jcmVtZW50KTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJtb3ZlIHNsaWRlXCIpO1xyXG4gICAgICAgICAgICAgICAgdGh1bWJuYWlsQ2FjaGUgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb21wYWN0U2xpZGVJbmRleGVzKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NvbXBhY3RTbGlkZUluZGV4ZXMnKTtcclxuICAgICAgICAgICAgdmFyIHNsaWRlc0RhdGEgPSBzZWxmLmdldFNsaWRlTm9kZURhdGFzKCk7XHJcbiAgICAgICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gMTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiY29tcGFjdCBzbGlkZSBpbmRleGVzXCIpO1xyXG4gICAgICAgICAgICBfLmVhY2goc2xpZGVzRGF0YSwgZnVuY3Rpb24gKHNsaWRlRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2xpZGVEYXRhLCAnaW5kZXgnLCBuZXdJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjb21wYWN0U2xpZGVJbmRleGVzOiBzZXQgaW5kZXggZm9yICcgKyBzbGlkZURhdGEua2V5ICsgJyB0byAnICsgbmV3SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgbmV3SW5kZXgrKztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJjb21wYWN0IHNsaWRlIGluZGV4ZXNcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0TmV3U2xpZGVLZXkoKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHZhciBpID0gMTtcclxuICAgICAgICB3aGlsZSAoZGlhZ3JhbS5tb2RlbC5maW5kTm9kZURhdGFGb3JLZXkoJ3NsaWRlLScgKyBpKSkge1xyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAnc2xpZGUtJyArIGk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTkI6IGluZGV4ZXMgKGFuZCBrZXlzPykgbXVzdCBiZSAxLWJhc2VkLCBvdGhlcndpc2UgZmlyc3Qgc2xpZGUgZ2V0cyBzY3Jld2VkIHVwXHJcbiAgICAvLyAoc29tZXdoZXJlIHRoZSBpbmRleCBzaG93cyB1cCBhcyAnJyBpbnN0ZWFkIG9mIDApXHJcbiAgICBmdW5jdGlvbiBnZXROZXdTbGlkZUluZGV4KCkge1xyXG4gICAgICAgIHZhciBzbGlkZXMgPSBzZWxmLmdldFNsaWRlTm9kZURhdGFzKCk7XHJcbiAgICAgICAgcmV0dXJuIHNsaWRlcy5sZW5ndGggKyAxOyBcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFkZFNsaWRlID0gZnVuY3Rpb24gKHR5cGVOYW1lKSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FkZFNsaWRlOiAnICsgdHlwZU5hbWUpO1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGIgPSBtYXAuY29tcHV0ZU1hcEJvdW5kcygpO1xyXG4gICAgICAgICAgICBkYi5pbmZsYXRlKGRiLndpZHRoIC8gMjAsIGRiLmhlaWdodCAvIDEwKTtcclxuICAgICAgICAgICAgdmFyIG5ld0xvYyA9IGRiLnggKyAnICcgKyBkYi55O1xyXG4gICAgICAgICAgICB2YXIgbmV3SW5kZXggPSBnZXROZXdTbGlkZUluZGV4KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2xpZGVUeXBlID0gXy5maW5kV2hlcmUoc2VsZi5zbGlkZVR5cGVzLCB7IG5hbWU6IHR5cGVOYW1lIH0pO1xyXG5cclxuICAgICAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiYWRkIHNsaWRlXCIpO1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLmFkZE5vZGVEYXRhKHtcclxuICAgICAgICAgICAgICAgIGtleTogZ2V0TmV3U2xpZGVLZXkoKSxcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnc2xpZGUnLFxyXG4gICAgICAgICAgICAgICAgaW5kZXg6IG5ld0luZGV4LFxyXG4gICAgICAgICAgICAgICAgaXNHcm91cDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogZGIud2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGRiLmhlaWdodCxcclxuICAgICAgICAgICAgICAgIGxvYzogbmV3TG9jLFxyXG4gICAgICAgICAgICAgICAgbGV2ZWw6IDAsXHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogMCxcclxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgbm90ZXM6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hlY2tzOiBbXSxcclxuICAgICAgICAgICAgICAgIGhhc1JlZ2lvbjogc2xpZGVUeXBlLmhhc01hcFJlZ2lvbixcclxuICAgICAgICAgICAgICAgIGlzU3VtbWFyeTogc2xpZGVUeXBlLmhhc01hcFN1bW1hcnksXHJcbiAgICAgICAgICAgICAgICBsaW5rczogW11cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJhZGQgc2xpZGVcIik7XHJcbiAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XHJcblxyXG4gICAgICAgICAgICBzZWxmLnNsaWRlVGh1bWJuYWlsU2VsZWN0ZWQobmV3SW5kZXgpOyAvLyB0cmlnZ2VyIGRpc3BsYXkgb2YgZWRpdCBmb3JtLCB6b29tIHRvIG1hcCByZWdpb24gaWYgYXBwbGljYWJsZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmR1cGxpY2F0ZVNsaWRlID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgbmV3SW5kZXggPSBnZXROZXdTbGlkZUluZGV4KCk7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpOyBcclxuICAgICAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJkdXBsaWNhdGUgc2xpZGVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gYnVtcCB1cCBpbmRleGVzIG9uIHN1YnNlcXVlbnQgc2xpZGVzIHRvIG1ha2Ugcm9vbSBmb3IgbmV3IHNsaWRlIGFmdGVyIGN1cnJlbnQgb25lXHJcbiAgICAgICAgICAgICAgICBfLmVhY2goc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpLCBmdW5jdGlvbiAoc2xpZGVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlRGF0YS5pbmRleCA+IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHNsaWRlRGF0YSwgJ2luZGV4Jywgc2xpZGVEYXRhLmluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTkI6IGNyZWF0aW5nIGEgbmV3IG5vZGVEYXRhIG9iamVjdCBoZXJlIHJhdGhlciB0aGFuIGNvcHlpbmcgYW5kIG1vZGlmeWluZywgdG8gYXZvaWQgY29weWluZyAkJGhhc2hLZXkgKD8/KVxyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiBnZXROZXdTbGlkZUtleSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnc2xpZGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNHcm91cDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHNsaWRlLmRhdGEud2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBzbGlkZS5kYXRhLmhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBsb2M6IHNsaWRlLmRhdGEubG9jLFxyXG4gICAgICAgICAgICAgICAgICAgIGxldmVsOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHNsaWRlLmRhdGEudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogc2xpZGUuZGF0YS50aXRsZSArICcgKENvcHkpJyxcclxuICAgICAgICAgICAgICAgICAgICBub3Rlczogc2xpZGUuZGF0YS5ub3RlcyxcclxuICAgICAgICAgICAgICAgICAgICBjaGVja3M6IHNsaWRlLmRhdGEuY2hlY2tzLCAvLyBjbG9uZT9cclxuICAgICAgICAgICAgICAgICAgICBoYXNSZWdpb246IHNsaWRlLmRhdGEuaGFzUmVnaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzU3VtbWFyeTogc2xpZGUuZGF0YS5pc1N1bW1hcnksXHJcbiAgICAgICAgICAgICAgICAgICAgbGlua3M6IHNsaWRlLmRhdGEubGlua3MgLy8gY2xvbmU/XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJkdXBsaWNhdGUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgICAgICB0aHVtYm5haWxDYWNoZSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucmVtb3ZlU2xpZGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdyZW1vdmVTbGlkZTogJyArIGluZGV4KTtcclxuICAgICAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTsgXHJcbiAgICAgICAgICAgIGlmIChzbGlkZSkge1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwicmVtb3ZlIHNsaWRlXCIpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5yZW1vdmVOb2RlRGF0YShzbGlkZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJyZW1vdmUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50U2xpZGVJbmRleCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRodW1ibmFpbENhY2hlID0gW107XHJcbiAgICAgICAgICAgIGNvbXBhY3RTbGlkZUluZGV4ZXMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHRodW1ibmFpbENhY2hlID0gW107XHJcblxyXG4gICAgdGhpcy5nZXRTbGlkZVRodW1ibmFpbCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aHVtYm5haWxDYWNoZVtpbmRleF07XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlU2xpZGVUaHVtYm5haWxzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgXy5lYWNoKHNlbGYuZ2V0U2xpZGVOb2RlRGF0YXMoKSwgZnVuY3Rpb24obmQpIHsgXHJcbiAgICAgICAgICAgIHNlbGYuY3JlYXRlU2xpZGVUaHVtYm5haWwobmQuaW5kZXgpOyBcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jcmVhdGVTbGlkZVRodW1ibmFpbCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NyZWF0ZVNsaWRlVGh1bWJuYWlsJyk7XHJcblxyXG4gICAgICAgIHZhciB0aHVtYldpZHRoID0gMTAwMDtcclxuICAgICAgICB2YXIgdGh1bWJIZWlnaHQgPSA2MDA7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG5cclxuICAgICAgICB2YXIgc2xpZGUgPSBmaW5kU2xpZGVCeUluZGV4KGluZGV4KTtcclxuICAgICAgICBpZiAoIXNsaWRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIXNsaWRlLmRhdGEuaGFzUmVnaW9uICYmICFzbGlkZS5kYXRhLmlzU3VtbWFyeSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgZGIgPSBkaWFncmFtLmRvY3VtZW50Qm91bmRzO1xyXG4gICAgICAgICAgICB2YXIgc2I7XHJcbiAgICAgICAgICAgIGlmIChzbGlkZS5kYXRhLmlzU3VtbWFyeSkgeyAvLyBmb3IgYSBzdW1tYXJ5IHNsaWRlIHdlIHNob290IHRoZSB3aG9sZSBtYXBcclxuICAgICAgICAgICAgICAgIHNiID0gbWFwLnNhZmVSZWN0KG1hcC5jb21wdXRlTWFwQm91bmRzKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgeyAvLyBvdGhlcndpc2UganVzdCBzaG9vdCB0aGUgc2xpZGUgcmVnaW9uXHJcbiAgICAgICAgICAgICAgICBzYiA9IHNsaWRlLnBhcnQuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgaW1hZ2VQb3NpdGlvbiA9IG5ldyBnby5Qb2ludChzYi54LCBzYi55KTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2xpZGVUaHVtYm5haWwsIHNsaWRlIGJvdW5kczogJyArIHNiICsgJywgZG9jdW1lbnQgYm91bmRzOiAnICsgZGIgKyAnLCBpbWFnZVBvc2l0aW9uOiAnICsgaW1hZ2VQb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICB2YXIgd1NjYWxlID0gdGh1bWJXaWR0aCAvIHNiLndpZHRoO1xyXG4gICAgICAgICAgICB2YXIgaFNjYWxlID0gdGh1bWJIZWlnaHQgLyBzYi5oZWlnaHQ7XHJcbiAgICAgICAgICAgIHZhciB0aHVtYlNjYWxlID0gTWF0aC5taW4od1NjYWxlLCBoU2NhbGUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2NhbGU6ICcgKyB3U2NhbGUgKyAnLCcgKyBoU2NhbGUpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHcgPSB0aHVtYlNjYWxlICogc2Iud2lkdGg7XHJcbiAgICAgICAgICAgIHZhciBoID0gdGh1bWJTY2FsZSAqIHNiLmhlaWdodDtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndGh1bWJuYWlsIHcvaDogJyArIHcgKyAnLCcgKyBoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGhpZGUgc2xpZGVzIHRlbXBvcmFyaWx5IHdoaWxlIGNyZWF0aW5nIHRodW1ibmFpbFxyXG4gICAgICAgICAgICBzZWxmLmlzQ3JlYXRpbmdUaHVtYm5haWwgPSB0cnVlO1xyXG4gICAgICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcblxyXG4gICAgICAgICAgICBkaWFncmFtLnNjYWxlID0gdGh1bWJTY2FsZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbWdEYXRhID0gZGlhZ3JhbS5tYWtlSW1hZ2VEYXRhKHtcclxuICAgICAgICAgICAgICAgIHNpemU6IG5ldyBnby5TaXplKHcsIGgpLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGltYWdlUG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogdGh1bWJTY2FsZVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHNlbGYuaXNDcmVhdGluZ1RodW1ibmFpbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcblxyXG4gICAgICAgICAgICB0aHVtYm5haWxDYWNoZVtpbmRleF0gPSBpbWdEYXRhO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGltZ0RhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBnZXRzIGEgdGh1bWJuYWlsIG9mIHRoZSB3aG9sZSBtYXAsIGZvciBzYXZpbmcgKHNlZSBhdXRvc2F2ZS5qcylcclxuICAgIHRoaXMuZ2V0TWFwVGh1bWJuYWlsID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdmFyIHNiID0gbWFwLnNhZmVSZWN0KG1hcC5jb21wdXRlTWFwQm91bmRzKCkpO1xyXG4gICAgICAgIHNiLmdyb3coMTAsMTAsMTAsMTApO1xyXG4gICAgICAgIHZhciB3ID0gMTUwO1xyXG4gICAgICAgIHZhciBoID0gMTAwO1xyXG5cclxuICAgICAgICAvLyBoaWRlIHNsaWRlcyB0ZW1wb3JhcmlseSB3aGlsZSBjcmVhdGluZyB0aHVtYm5haWxcclxuICAgICAgICBzZWxmLmlzQ3JlYXRpbmdUaHVtYm5haWwgPSB0cnVlO1xyXG4gICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgdmFyIGltZ0RhdGEgPSBkaWFncmFtLm1ha2VJbWFnZURhdGEoe1xyXG4gICAgICAgICAgICBzY2FsZTogTWF0aC5taW4oaCAvIHNiLmhlaWdodCwgdyAvIHNiLndpZHRoKSxcclxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludChzYi54LCBzYi55KSxcclxuICAgICAgICAgICAgc2l6ZTpuZXcgZ28uU2l6ZSh3LCBoKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzZWxmLmlzQ3JlYXRpbmdUaHVtYm5haWwgPSBmYWxzZTtcclxuICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBpbWdEYXRhO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gY2FsbGVkIHZpYSBuZy1jbGljayBvbiB0aHVtYm5haWxcclxuICAgIHRoaXMuc2xpZGVUaHVtYm5haWxTZWxlY3RlZCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NsaWRlVGh1bWJuYWlsU2VsZWN0ZWQ6ICcgKyBpbmRleCk7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBOQjogb3JkZXIgb2Ygc3RhdGVtZW50cyBpcyBpbXBvcnRhbnQgaGVyZSwgYXMgc2VsZWN0U2xpZGUgY2FuIHRyaWdnZXIgY2hhbmdlZFNlbGVjdGlvbiB3aXRoIGFuIGVtcHR5IHNlbGVjdGlvbiBzb21ldGltZXMuLi4gPz9cclxuICAgICAgICAgICAgc2VsZWN0U2xpZGUoaW5kZXgpO1xyXG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRTbGlkZUluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTsgLy8gc2hvdy9oaWRlIHNsaWRlIG5vZGVzIC0gc2VlIHRlbXBsYXRlcy5qczogc2xpZGVUZW1wbGF0ZVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgICAgICB6b29tVG9TbGlkZUluQ2VudGVyKHNsaWRlKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuaXNQcmVzZW50aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93VE9DID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5uZWVkc05hcnJvd0NhbnZhcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgcmV0dXJuIG1hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyhtYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSAmJiBcclxuICAgICAgICAgICBzbGlkZSAhPSBudWxsICYmIFxyXG4gICAgICAgICAgIChzbGlkZS5kYXRhLnR5cGUgPT0gJ1RJVExFX0JPRFlfTUFQJyB8fCBzbGlkZS5kYXRhLnR5cGUgPT0gJ0FDVElWSVRZX01BUCcgfHwgc2xpZGUuZGF0YS50eXBlID09ICdNQVBfU1VNTUFSWScpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzZXRzIHRoZSBzbGlkZSBub2RlIGFzIHNlbGVjdGVkIGluIHRoZSBkaWFncmFtLlxyXG4gICAgZnVuY3Rpb24gc2VsZWN0U2xpZGUoaW5kZXgpIHtcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdzZWxlY3Qgc2xpZGU6ICcgKyBpbmRleCk7XHJcbiAgICAgICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzbGlkZSA9IGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVE9ETzogc2Nyb2xsIHRvIHNsaWRlP1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucGxheVNsaWRlID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIG1hcC5nZXRVaSgpLm9wZW5UYWIobWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUik7IFxyXG5cclxuICAgICAgICB2YXIgc2xpZGVzID0gc2VsZi5nZXRTbGlkZU5vZGVEYXRhcygpO1xyXG4gICAgICAgIGlmIChzbGlkZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2hvd1RPQyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBwcmVzZW50U2xpZGUoaW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gaW5jcmVtZW50IGlzIC0xIG9yICsxXHJcbiAgICB0aGlzLmFkdmFuY2VTbGlkZSA9IGZ1bmN0aW9uIChpbmNyZW1lbnQpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdhZHZhbmNlU2xpZGUsIGN1cnJlbnRTbGlkZUluZGV4OiAnICsgc2VsZi5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRTbGlkZUluZGV4ICs9IChpbmNyZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuaXNQcmVzZW50aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlc2VudFNsaWRlKHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIHByZXNlbnRTbGlkZShpbmRleCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3ByZXNlbnRTbGlkZScpO1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAgICAgdmFyIHNsaWRlID0gZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcbiAgICAgICAgICAgIGlmICghc2xpZGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAvLyBOQjogbmVlZCB0byBzZXQgdGhpcyBhZnRlciBjbGVhclNlbGVjdGlvbiwgYXMgdGhhdCB3aWxsIHNldCBpdCB0byBudWxsISAoc2VlIGNoYW5nZWRTZWxlY3Rpb24pXHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFNsaWRlSW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgbWFwLnNldEVkaXRpbmdCbG9ja2VkKHRydWUpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdwcmVzZW50U2xpZGUsIGluZGV4OiAnICsgaW5kZXggKyAnLCBzbGlkZTogJyArIHNsaWRlICsgJywgY3VycmVudFNsaWRlSW5kZXg6ICcgKyBzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIG1heWJlSW5pdFNsaWRlQmxvY2tlcigpO1xyXG4gICAgICAgICAgICB2YXIgYmxvY2tlclcgPSBzZWxmLlNMSURFX0JMT0NLRVJfV0lEVEg7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2xpZGUuZGF0YS5oYXNSZWdpb24pIHtcclxuICAgICAgICAgICAgICAgIHpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHNob3cgc2xpZGUgYmxvY2tlclxyXG4gICAgICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIuZGVzaXJlZFNpemUgPSBuZXcgZ28uU2l6ZShcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMud2lkdGggKyAyICogYmxvY2tlclcsIFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlLmFjdHVhbEJvdW5kcy5oZWlnaHQgKyAyICogYmxvY2tlclcpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIubG9jYXRpb24gPSBuZXcgZ28uUG9pbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuYWN0dWFsQm91bmRzLnggLSBibG9ja2VyVywgXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuYWN0dWFsQm91bmRzLnkgLSBibG9ja2VyVyk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3NsaWRlQmxvY2tlcjogJyArIHNlbGYuc2xpZGVCbG9ja2VyLmFjdHVhbEJvdW5kcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2xpZGUuZGF0YS5pc1N1bW1hcnkpIHtcclxuICAgICAgICAgICAgICAgIHpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zbGlkZUJsb2NrZXIudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldFVpKCkucmVzZXRab29tKCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNsaWRlQmxvY2tlci52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNlbGYuaXNQcmVzZW50aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdwcmVzZW50ZXItcGxheWluZycpO1xyXG5cclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpOyAvLyBoaWRlIHNsaWRlIG5vZGVzIC0gc2VlIHRlbXBsYXRlcy5qczogc2xpZGVUZW1wbGF0ZVxyXG4gICAgICAgIH0pOyAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gem9vbSB0aGUgZGlhZ3JhbSB0byBzaG93IHRoZSBnaXZlbiBzbGlkZSBpbiB0aGUgY2VudGVyIG9mIHRoZSBjYW52YXNcclxuICAgIGZ1bmN0aW9uIHpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG5cclxuICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBoYWxmV2lkdGggPSAoc2xpZGUuZGF0YS50eXBlICE9ICdNQVBfT05MWScpO1xyXG4gICAgICAgIHZhciB6b29tUmVjdCA9IHNlbGYuZ2V0TGV0dGVyYm94ZWRSZWN0KHNsaWRlLmFjdHVhbEJvdW5kcywgaGFsZldpZHRoKTtcclxuICAgICAgICB6b29tUmVjdC5pbmZsYXRlKHpvb21SZWN0LndpZHRoIC8gMTAsIHpvb21SZWN0LmhlaWdodCAvIDEwKTtcclxuICAgICAgICBkaWFncmFtLnpvb21Ub1JlY3Qoem9vbVJlY3QsIGdvLkRpYWdyYW0uVW5pZm9ybSk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIGEgcmVjdGFuZ2xlIGNvbnRhaW5pbmcgdGhlIGdpdmVuIHJlY3QsIGJ1dCB3aXRoIGFwcHJvcHJpYXRlIHdpZHRoIG9yIGhlaWdodCBhZGRlZFxyXG4gICAgLy8gdG8gZ2l2ZSBpdCBzYW1lIGFzcGVjdCByYXRpbyBhcyB0aGUgZGlhZ3JhbS5cclxuICAgIHRoaXMuZ2V0TGV0dGVyYm94ZWRSZWN0ID0gZnVuY3Rpb24gKHJlY3QsIGhhbGZXaWR0aCkge1xyXG5cclxuICAgICAgICAvLyBOQjogd2UgY2FsY3VsYXRlIHRoZSBhc3BlY3QgcmF0aW8gd2hlbiB0aGUgdGFiIGlzIG9wZW5lZCwgXHJcbiAgICAgICAgLy8gcmF0aGVyIHRoYW4gZWFjaCB0aW1lIGFzIHRoZSBkaWFncmFtIHNpemUgbWlnaHQgYmUgY2hhbmdpbmcuLi5cclxuICAgICAgICB2YXIgZGFyID0gKGhhbGZXaWR0aCA/IHNlbGYuZGlhZ3JhbUFzcGVjdFJhdGlvIC8gMiA6IHNlbGYuZGlhZ3JhbUFzcGVjdFJhdGlvKTtcclxuICAgICAgICBjb25zb2xlLmxvZygncmVjdDogJyArIHJlY3QgKyAnLCBkYXI6ICcgKyBkYXIpO1xyXG5cclxuICAgICAgICB2YXIgcmVjdEFzcGVjdFJhdGlvID0gcmVjdC53aWR0aCAvIHJlY3QuaGVpZ2h0O1xyXG5cclxuICAgICAgICBpZiAoZGFyID4gcmVjdEFzcGVjdFJhdGlvKSB7XHJcbiAgICAgICAgICAgIC8vIHRhbGwgc2tpbm55IHJlY3QsIHNob3J0IHdpZGUgdGFyZ2V0IEFSLCBzbyBhZGQgc2lkZSBwYWRkaW5nIHRvIHRoZSByZWN0XHJcbiAgICAgICAgICAgIHZhciBsYncgPSByZWN0LmhlaWdodCAqIGRhcjsgLy8gYmVjYXVzZSBsYncgLyBsYmggPT0gZGFyID09IGxidyAvIHJlY3QuaGVpZ2h0IChsYmggPT0gcmVjdC5oZWlnaHQpXHJcbiAgICAgICAgICAgIHJldHVybiByZWN0LmNvcHkoKS5pbmZsYXRlKChsYncgLSByZWN0LndpZHRoKSAvIDIsIDApOyAvLyBhZGQgaGFsZiB0aGUgd2lkdGggZGlmZmVyZW5jZSB0byBlYWNoIHNpZGUgb2YgdGhlIHJlY3RcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHNob3J0IHdpZGUgcmVjdCwgdGFsbCBza2lubnkgdGFyZ2V0IEFSLCBzbyBhZGQgdG9wL2JvdHRvbSBwYWRkaW5nIHRvIHRoZSByZWN0XHJcbiAgICAgICAgICAgIHZhciBsYmggPSByZWN0LndpZHRoIC8gZGFyOyAvLyBiZWNhdXNlIGxidyAvIGxiaCA9PSBkYXIgPT0gbGJoIC8gcmVjdC53aWR0aCAobGJ3ID09IHJlY3Qud2lkdGgpXHJcbiAgICAgICAgICAgIHJldHVybiByZWN0LmNvcHkoKS5pbmZsYXRlKDAsIChsYmggLSByZWN0LmhlaWdodCkgLyAyKTsgIC8vIGFkZCBoYWxmIHRoZSBoZWlnaHQgZGlmZmVyZW5jZSB0byB0b3AvYm90dG9tIG9mIHRoZSByZWN0XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnN0b3BQcmVzZW50aW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3N0b3BQcmVzZW50aW5nLCBjdXJyZW50U2xpZGVJbmRleDogJyArIHNlbGYuY3VycmVudFNsaWRlSW5kZXgpO1xyXG4gICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VsZi5zbGlkZUJsb2NrZXIpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2xpZGVCbG9ja2VyLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9zZWxmLmN1cnJlbnRTbGlkZUluZGV4ID0gbnVsbDtcclxuICAgICAgICAgICAgc2VsZi5pc1ByZXNlbnRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdwcmVzZW50ZXItcGxheWluZycpO1xyXG5cclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpOyAvLyBzaG93IHNsaWRlIG5vZGVzXHJcblxyXG4gICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIG1hcC5zZXRFZGl0aW5nQmxvY2tlZChmYWxzZSk7XHJcbiAgICAgICAgICAgIC8vbWFwLmdldFVpKCkucmVzZXRab29tKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxufTtcclxuIiwiLy8gZnVuY3Rpb25zIGZvciBzaGFyaW5nIG1hcHMsIHdpdGggYSBtb2RhbCBkaWFsb2dcclxuXHJcbndpbmRvdy5TYW5kYmFua1NoYXJpbmcgPSB7fTtcclxuXHJcblNhbmRiYW5rU2hhcmluZyA9IGZ1bmN0aW9uKCRzY29wZSkge1xyXG5cclxuICAgIHRoaXMub3Blbk1vZGFsID0gZnVuY3Rpb24obWFwSWRzLCBvblVwZGF0ZSkge1xyXG4gICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlX21hcF9zaGFyaW5nX21vZGFsLmh0bWwnLCAvLyBzZWUgdmlld3Mvc2hhcmVzL190ZW1wbGF0ZV9tYXBfc2hhcmluZ19tb2RhbFxyXG4gICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IHNoYXJpbmdNb2RhbEN0cmwsXHJcbiAgICAgICAgICAgIHdpbmRvd0NsYXNzOiAnc2hhcmluZy1tb2RhbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIHVzZXJJZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS51c2VySWQ7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXNlclByb2ZpbGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGU7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbWFwSWRzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFwSWRzO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25VcGRhdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbigpIHt9KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBjb250cm9sbGVyIGZvciBzaGFyaW5nIG1vZGFsIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHZhciBzaGFyaW5nTW9kYWxDdHJsID0gZnVuY3Rpb24oJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSwgdXNlcklkLCB1c2VyUHJvZmlsZSwgbWFwSWRzLCBvblVwZGF0ZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUudXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgICRzY29wZS51c2VyUHJvZmlsZSA9IHVzZXJQcm9maWxlO1xyXG4gICAgICAgICRzY29wZS5tYXBJZHMgPSBtYXBJZHM7XHJcblxyXG4gICAgICAgIC8vIGFsbCBleGlzdGluZyBzaGFyZXMgZm9yIHNlbGVjdGVkIG1hcHNcclxuICAgICAgICAvLyBmb3JtYXQ6IFt7bWFwSWQ6MSwgc2hhcmVJZDoxLCBjYW5FZGl0OnRydWUsIHVzZXJJZDoyLCB1c2VyRW1haWw6J2Zvb0BiYXIuY29tJywgZ3JvdXBJZDpudWxsLCBvcmdhbml6YXRpb25JZDpudWxsLCBpc1B1YmxpYzpmYWxzZSB9LCAuLi5dXHJcbiAgICAgICAgJHNjb3BlLm1hcFNoYXJlcyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBleGlzdGluZyBzaGFyZXMsIGdyb3VwZWQgZm9yIGRpc3BsYXlcclxuICAgICAgICAvLyBmb3JtYXQ6IFt7bmFtZTonZm9vJywgdXNlckVtYWlsOidmb29AYmFyLmNvbScsIHVzZXJJZDogbnVsbCwgZ3JvdXBJZDogaWQsIG9yZ2FuaXphdGlvbklkOiBudWxsLCBpc1B1YmxpYzpmYWxzZSwgY2FuRWRpdDp0cnVlLCBtYXBJZHM6WzEsMl19LCAuLi5dXHJcbiAgICAgICAgJHNjb3BlLmV4aXN0aW5nU2hhcmVzID0gW107XHJcblxyXG4gICAgICAgIC8vIG5ldyBzaGFyZXMgYWRkZWQgaW4gdGhlIGRpYWxvZyBcclxuICAgICAgICAvLyBmb3JtYXQ6IFt7c2hhcmVUeXBlOlNIQVJFX1RZUEVfSU5ESVZJRFVBTCwgc2hhcmVQZXJtaXNzaW9uOlNIQVJFX1BFUk1JU1NJT05fQ0FOVklFVywgdXNlckVtYWlsOidmb29AYmFyLmNvbScsIGdyb3VwSWQ6bnVsbCwgb3JnYW5pemF0aW9uSWQ6bnVsbCwgaXNQdWJsaWM6ZmFsc2UgfSwgLi4uXVxyXG4gICAgICAgICRzY29wZS5uZXdTaGFyZXMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gYWxsIHVwZGF0ZWQgc2hhcmVzLCB0byBiZSBzYXZlZFxyXG4gICAgICAgIC8vIGZvcm1hdDogW3ttYXBJZDoxLCBjYW5FZGl0OmZhbHNlLCB1c2VyRW1haWw6J2Zvb0BiYXIuY29tJywgZ3JvdXBJZDpudWxsLCBvcmdhbml6YXRpb25JZDpudWxsLCBpc1B1YmxpYzpmYWxzZSB9LCAuLi5dXHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZWRTaGFyZXMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gaW5kZXhlcyBvZiB1c2Vycy9ncm91cHMvb3JncyAtIGZvcm1hdDogW3tpZDoxLCBuYW1lOidmb28nfSwgLi4uXVxyXG4gICAgICAgICRzY29wZS51c2VycyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5ncm91cHMgPSBbXTtcclxuICAgICAgICAkc2NvcGUub3JnYW5pemF0aW9ucyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBjb25zdGFudHNcclxuICAgICAgICAkc2NvcGUuU0hBUkVfVFlQRV9JTkRJVklEVUFMID0gJ09uZSBvciBtb3JlIEluZGl2aWR1YWxzJztcclxuICAgICAgICAkc2NvcGUuU0hBUkVfVFlQRV9HUk9VUCA9ICdHcm91cCc7XHJcbiAgICAgICAgJHNjb3BlLlNIQVJFX1RZUEVfT1JHQU5JWkFUSU9OID0gJ1RoaW5rTmF0aW9uJztcclxuICAgICAgICAkc2NvcGUuU0hBUkVfVFlQRV9QVUJMSUMgPSAnQWxsIE1ldGFNYXAgVXNlcnMnO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2hhcmVUeXBlcyA9IFtcclxuICAgICAgICAgICAgJHNjb3BlLlNIQVJFX1RZUEVfSU5ESVZJRFVBTCxcclxuICAgICAgICAgICAgLy8kc2NvcGUuU0hBUkVfVFlQRV9HUk9VUCwgXHJcbiAgICAgICAgICAgICRzY29wZS5TSEFSRV9UWVBFX09SR0FOSVpBVElPTixcclxuICAgICAgICAgICAgJHNjb3BlLlNIQVJFX1RZUEVfUFVCTElDXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FOVklFVyA9ICdDYW4gdmlldyc7XHJcbiAgICAgICAgJHNjb3BlLlNIQVJFX1BFUk1JU1NJT05fQ0FORURJVCA9ICdDYW4gZWRpdCc7XHJcblxyXG4gICAgICAgICRzY29wZS5zaGFyZVBlcm1pc3Npb25zID0gW1xyXG4gICAgICAgICAgICAkc2NvcGUuU0hBUkVfUEVSTUlTU0lPTl9DQU5WSUVXLFxyXG4gICAgICAgICAgICAkc2NvcGUuU0hBUkVfUEVSTUlTU0lPTl9DQU5FRElUXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhblNoYXJlQ3VsdHVyZU1hcCA9IGZ1bmN0aW9uKHNoYXJlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmZpbmRXaGVyZSgkc2NvcGUudXNlclByb2ZpbGUubWVtYmVyc2hpcHMsIHtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBzaGFyZS5vcmdhbml6YXRpb25JZCxcclxuICAgICAgICAgICAgICAgIGxlYWRlcjogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBnZXQgZXhpc3Rpbmcgc2hhcmVzXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZFNoYXJlcyhtYXBJZHMpIHtcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCcvc2hhcmVzL21hcF9zaGFyZXMuanNvbj9pZHM9JyArIG1hcElkcy5qb2luKCcsJykpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1hcFNoYXJlcyA9IHJlc3BvbnNlLmRhdGEubWFwU2hhcmVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnMgPSByZXNwb25zZS5kYXRhLnVzZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ3JvdXBzID0gcmVzcG9uc2UuZGF0YS5ncm91cHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmdhbml6YXRpb25zID0gcmVzcG9uc2UuZGF0YS5vcmdhbml6YXRpb25zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0RXhpc3RpbmdTaGFyZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuZXhpc3RpbmdTaGFyZXMubGVuZ3RoICYmICRzY29wZS5jYW5BZGROZXdTaGFyZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmV3U2hhcmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgnQ291bGQgbm90IGxvYWQgc2hhcmluZyBpbmZvJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvYWRTaGFyZXMobWFwSWRzKTtcclxuXHJcbiAgICAgICAgLy8gZ3JvdXAgdGhlIGV4aXN0aW5nIHNoYXJlcyBieSB1c2VyLCBncm91cCwgb3JnIGFuZCBwdWJsaWNcclxuICAgICAgICBmdW5jdGlvbiBpbml0RXhpc3RpbmdTaGFyZXMoKSB7XHJcbiAgICAgICAgICAgIC8vIGZpbmQgYWxsIGVtYWlscyB0aGF0IG9jY3VyIGluIGEgc2hhcmVcclxuICAgICAgICAgICAgdmFyIHVzZXJFbWFpbHMgPSBfLndpdGhvdXQoXy51bmlxKF8ucGx1Y2soJHNjb3BlLm1hcFNoYXJlcywgJ3VzZXJFbWFpbCcpKSwgbnVsbCk7XHJcbiAgICAgICAgICAgIC8vIGJ1aWxkIGFuIGFycmF5IG9mIHNoYXJlcywgb25lIGZvciBlYWNoIGVtYWlsLCB3aXRoIHRoZSBhcHBsaWNhYmxlIG1hcCBJRHNcclxuICAgICAgICAgICAgdmFyIHNoYXJlc0J5VXNlckVtYWlsID0gXy5tYXAodXNlckVtYWlscywgZnVuY3Rpb24oZW1haWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VyID0gXy5maW5kV2hlcmUoJHNjb3BlLnVzZXJzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNEZWxldGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogKHVzZXIgPyB1c2VyLmlkIDogbnVsbCksXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNDdWx0dXJlTWFwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBlbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICAvLyBOQjogZm9yIHRoaXMgYXR0cmlidXRlIHdlIGRvbid0IHRyeSB0byBzdW1tYXJpemUgdGhlIHZhbHVlIGZvciBhbGwgdGhlIGV4aXN0aW5nIHNoYXJlcywgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYmVjYXVzZSBpdCB3b3VsZCBiZSB0b28gY29tcGxpY2F0ZWQgdG8gZGlzcGxheS4uLlxyXG4gICAgICAgICAgICAgICAgICAgIGNhbkVkaXQ6ICRzY29wZS5tYXBTaGFyZXMubGVuZ3RoID09IDEgJiYgJHNjb3BlLm1hcFNoYXJlc1swXS5jYW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcElkczogXy5wbHVjayhfLndoZXJlKCRzY29wZS5tYXBTaGFyZXMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiBlbWFpbFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLCAnbWFwSWQnKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZ3JvdXBJZHMgPSBfLndpdGhvdXQoXy51bmlxKF8ucGx1Y2soJHNjb3BlLm1hcFNoYXJlcywgJ2dyb3VwSWQnKSksIG51bGwpO1xyXG4gICAgICAgICAgICB2YXIgc2hhcmVzQnlHcm91cElkID0gXy5tYXAoZ3JvdXBJZHMsIGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBfLmZpbmRXaGVyZSgkc2NvcGUuZ3JvdXBzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNEZWxldGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzUHVibGljOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpc0N1bHR1cmVNYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdHcm91cDogJyArIChncm91cCA/IGdyb3VwLm5hbWUgOiAnJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuRWRpdDogJHNjb3BlLm1hcFNoYXJlcy5sZW5ndGggPT0gMSAmJiAkc2NvcGUubWFwU2hhcmVzWzBdLmNhbkVkaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwSWRzOiBfLnBsdWNrKF8ud2hlcmUoJHNjb3BlLm1hcFNoYXJlcywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBpZFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLCAnbWFwSWQnKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3JnYW5pemF0aW9uSWRzID0gXy53aXRob3V0KF8udW5pcShfLnBsdWNrKCRzY29wZS5tYXBTaGFyZXMsICdvcmdhbml6YXRpb25JZCcpKSwgbnVsbCk7XHJcbiAgICAgICAgICAgIHZhciBzaGFyZXNCeU9yZ2FuaXphdGlvbklkID0gXy5tYXAob3JnYW5pemF0aW9uSWRzLCBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yZ2FuaXphdGlvbiA9IF8uZmluZFdoZXJlKCRzY29wZS5vcmdhbml6YXRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNEZWxldGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VyRW1haWw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzUHVibGljOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpc0N1bHR1cmVNYXA6ICRzY29wZS5tYXBTaGFyZXMubGVuZ3RoID09IDEgJiYgJHNjb3BlLm1hcFNoYXJlc1swXS5pc0N1bHR1cmVNYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1RoaW5rTmF0aW9uOiAnICsgKG9yZ2FuaXphdGlvbiA/IG9yZ2FuaXphdGlvbi5uYW1lIDogJycpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbkVkaXQ6ICRzY29wZS5tYXBTaGFyZXMubGVuZ3RoID09IDEgJiYgJHNjb3BlLm1hcFNoYXJlc1swXS5jYW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcElkczogXy5wbHVjayhfLndoZXJlKCRzY29wZS5tYXBTaGFyZXMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGlkXHJcbiAgICAgICAgICAgICAgICAgICAgfSksICdtYXBJZCcpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIGFyZSBhbnkgb2YgdGhlIHNlbGVjdGVkIG1hcHMgc2hhcmVkIHB1YmxpY2x5P1xyXG4gICAgICAgICAgICB2YXIgcHVibGljU2hhcmVzID0gW107XHJcbiAgICAgICAgICAgIGlmIChfLndoZXJlKCRzY29wZS5tYXBTaGFyZXMsIHtcclxuICAgICAgICAgICAgICAgIGlzUHVibGljOiB0cnVlXHJcbiAgICAgICAgICAgIH0pLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcHVibGljU2hhcmVzID0gW3tcclxuICAgICAgICAgICAgICAgICAgICBpc0RlbGV0ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25JZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBpc0N1bHR1cmVNYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdFdmVyeW9uZScsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuRWRpdDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwSWRzOiBfLnBsdWNrKF8ud2hlcmUoJHNjb3BlLm1hcFNoYXJlcywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLCAnbWFwSWQnKVxyXG4gICAgICAgICAgICAgICAgfV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5leGlzdGluZ1NoYXJlcyA9IF8udW5pb24oc2hhcmVzQnlVc2VyRW1haWwsIHNoYXJlc0J5R3JvdXBJZCwgc2hhcmVzQnlPcmdhbml6YXRpb25JZCwgcHVibGljU2hhcmVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkVXBkYXRlZFNoYXJlcygpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZWRTaGFyZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vIGZvciBlYWNoIHNlbGVjdGVkIG1hcCwgZGVjb21wb3NlIHRoZSBleGlzdGluZ1NoYXJlcyAoZ3JvdXBlZCBieSB1c2VyL2dyb3VwL29yZy9wdWJsaWMpIGludG8gaW5kaXZpZHVhbCBzaGFyZXMgZm9yIHNhdmluZ1xyXG4gICAgICAgICAgICBfLmVhY2gobWFwSWRzLCBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZ2V0IGV4aXN0aW5nIHNoYXJlcyBmb3IgdGhpcyBtYXBcclxuICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ1NoYXJlc0Zvck1hcElkID0gXy5maWx0ZXIoJHNjb3BlLmV4aXN0aW5nU2hhcmVzLCBmdW5jdGlvbihleGlzdGluZ1NoYXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RpbmdTaGFyZXMgZm9ybWF0OiBbe25hbWU6J2ZvbycsIHVzZXJFbWFpbDonZm9vQGJhci5jb20nLCB1c2VySWQ6IG51bGwsIGdyb3VwSWQ6IGlkLCBvcmdhbml6YXRpb25JZDogbnVsbCwgaXNQdWJsaWM6ZmFsc2UsIGlzQ3VsdHVyZU1hcDpmYWxzZSwgY2FuRWRpdDp0cnVlLCBtYXBJZHM6WzEsMl19LCAuLi5dXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8uY29udGFpbnMoZXhpc3RpbmdTaGFyZS5tYXBJZHMsIGlkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gZGVjb21wb3NlIHRoZXNlIGludG8gaW5kaXZpZHVhbCBzaGFyZXNcclxuICAgICAgICAgICAgICAgIF8uZWFjaChleGlzdGluZ1NoYXJlc0Zvck1hcElkLCBmdW5jdGlvbihlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVkU2hhcmVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05ldzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVsZXRlZDogZXMuaXNEZWxldGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBJZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogZXMudXNlckVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGVzLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogZXMuZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGVzLm9yZ2FuaXphdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogZXMuaXNQdWJsaWMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ3VsdHVyZU1hcDogZXMuaXNDdWx0dXJlTWFwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5FZGl0OiBlcy5jYW5FZGl0XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBhZGQgaW4gdGhlIG5ld1NoYXJlcyAoZm9yIGVhY2ggc2VsZWN0ZWQgbWFwKVxyXG4gICAgICAgICAgICBfLmVhY2gobWFwSWRzLCBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgICAgXy5lYWNoKCRzY29wZS5uZXdTaGFyZXMsIGZ1bmN0aW9uKG5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZWRTaGFyZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTmV3OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBJZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogKG5zLnNoYXJlVHlwZSA9PSAkc2NvcGUuU0hBUkVfVFlQRV9JTkRJVklEVUFMID8gbnMudXNlckVtYWlsIDogbnVsbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IChucy5zaGFyZVR5cGUgPT0gJHNjb3BlLlNIQVJFX1RZUEVfR1JPVVAgPyBucy5ncm91cElkIDogbnVsbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiAobnMuc2hhcmVUeXBlID09ICRzY29wZS5TSEFSRV9UWVBFX09SR0FOSVpBVElPTiA/IG5zLm9yZ2FuaXphdGlvbklkIDogbnVsbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUHVibGljOiBucy5zaGFyZVR5cGUgPT0gJHNjb3BlLlNIQVJFX1RZUEVfUFVCTElDLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0N1bHR1cmVNYXA6IG5zLmlzQ3VsdHVyZU1hcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRWRpdDogKG5zLnNoYXJlVHlwZSA9PSAkc2NvcGUuU0hBUkVfVFlQRV9QVUJMSUMgPyBmYWxzZSA6IG5zLnNoYXJlUGVybWlzc2lvbiA9PSAkc2NvcGUuU0hBUkVfUEVSTUlTU0lPTl9DQU5FRElUKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbnMubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2F2ZVNoYXJlcyhvblVwZGF0ZSkge1xyXG4gICAgICAgICAgICAkaHR0cC5wdXQoJy9zaGFyZXMvdXBkYXRlX21hcF9zaGFyZXMnLCAkc2NvcGUudXBkYXRlZFNoYXJlcykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBzYXZlIHNoYXJpbmcgaW5mbycpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuY2FuRGVsZXRlRXhpc3RpbmdTaGFyZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLmNhbkFkZE5ld1NoYXJlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmRlbGV0ZUV4aXN0aW5nU2hhcmUgPSBmdW5jdGlvbihzaGFyZSkge1xyXG4gICAgICAgICAgICBzaGFyZS5pc0RlbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5BZGROZXdTaGFyZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgYWxsIG1hcHMgYXJlIG93bmVkIGJ5IHRoZSBjdXJyZW50IHVzZXJcclxuICAgICAgICAgICAgdmFyIG1hcFVzZXJJZHMgPSBfLnVuaXEoXy5wbHVjaygkc2NvcGUubWFwU2hhcmVzLCAnbWFwVXNlcklkJykpO1xyXG4gICAgICAgICAgICByZXR1cm4gbWFwVXNlcklkcy5sZW5ndGggPT0gMCB8fCAobWFwVXNlcklkcy5sZW5ndGggPT0gMSAmJiBtYXBVc2VySWRzWzBdID09ICRzY29wZS51c2VySWQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5hZGROZXdTaGFyZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBOQjogaXNQdWJsaWMgYW5kIGNhbkVkaXQgYXJlIHNldCBpbiBidWlsZFVwZGF0ZVNoYXJlc1xyXG4gICAgICAgICAgICAkc2NvcGUubmV3U2hhcmVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc2hhcmVUeXBlOiAkc2NvcGUuU0hBUkVfVFlQRV9JTkRJVklEVUFMLFxyXG4gICAgICAgICAgICAgICAgc2hhcmVQZXJtaXNzaW9uOiAkc2NvcGUuU0hBUkVfUEVSTUlTU0lPTl9DQU5WSUVXLFxyXG4gICAgICAgICAgICAgICAgdXNlckVtYWlsOiAnJyxcclxuICAgICAgICAgICAgICAgIGdyb3VwSWQ6ICgkc2NvcGUuZ3JvdXBzLmxlbmd0aCA/ICRzY29wZS5ncm91cHNbMF0uaWQgOiBudWxsKSxcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiAoJHNjb3BlLm9yZ2FuaXphdGlvbnMubGVuZ3RoID8gJHNjb3BlLm9yZ2FuaXphdGlvbnNbMF0uaWQgOiBudWxsKSxcclxuICAgICAgICAgICAgICAgIGlzQ3VsdHVyZU1hcDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZGVsZXRlTmV3U2hhcmUgPSBmdW5jdGlvbihzaGFyZSkge1xyXG4gICAgICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZigkc2NvcGUubmV3U2hhcmVzLCBzaGFyZSk7XHJcbiAgICAgICAgICAgICRzY29wZS5uZXdTaGFyZXMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5vayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBidWlsZFVwZGF0ZWRTaGFyZXMoKTtcclxuICAgICAgICAgICAgc2F2ZVNoYXJlcyhvblVwZGF0ZSk7XHJcbiAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxufTsiLCIvLyBjb21tb24gY29yZSBzdGFuZGFyZHMgdGFiIC1cclxuLy8gdGhpcyBpcyBkZWxlZ2F0ZWQgdG8gdGhlIFNhbmRiYW5rQ2NzVGFnZ2luZyBtb2R1bGUsIHdoaWNoIGhhbmRsZXMgQ0NTIFxyXG4vLyBmb3IgYSBtYXAgT1IgdGhlIHVzZXIgcHJvZmlsZSAtIHNlZSB0YWdnaW5nX2Njcy5qc1xyXG5cclxuU2FuZGJhbmtFZGl0b3IuU3RhbmRhcmRzID0gZnVuY3Rpb24gKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIH07XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PSBtYXAuZ2V0VWkoKS5UQUJfSURfU1RBTkRBUkRTKSB7IC8vIG9wZW5pbmcgdGFiXHJcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBubyBsaW5rcywgc2hvdyB0aGUgbW9kYWxcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5jYW5FZGl0ICYmICEkc2NvcGUuY2NzVGFnZ2luZy5saW5rcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jY3NUYWdnaW5nLmFkZExpbmsoKTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9sZFZhbHVlID09IG1hcC5nZXRVaSgpLlRBQl9JRF9TVEFOREFSRFMpIHsgLy8gY2xvc2luZyB0YWJcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59OyIsIi8vIGZ1bmN0aW9ucyBmb3IgdXNlci10YWdnaW5nIG1hcHMsIHdpdGggYSBtb2RhbCBkaWFsb2dcclxuXHJcbi8vIE5COiB0aGUgY29tcGxleGl0eSBoZXJlIGlzIGR1ZSB0byB0aGUgbmVlZCB0byBzaG93IGV4aXN0aW5nIHRhZ3MgdGhhdCBtYXkgYXBwbHkgXHJcbi8vIHRvIGFueSBudW1iZXIgb2YgdGhlIHNlbGVjdGVkIG1hcHMsIHZzLiBuZXcgdGFncyB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gYWxsIHNlbGVjdGVkIG1hcHMgLVxyXG4vLyB0aGUgdGFnZ2luZyBpbmZvIG5lZWRzIHRvIGJlIGdyb3VwZWQgYW5kIHVuZ3JvdXBlZCB3aGVuIGxvYWRpbmcgYW5kIHNhdmluZyB0byBoYW5kbGUgdGhpcy5cclxuXHJcbndpbmRvdy5TYW5kYmFua1RhZ2dpbmcgPSB7fTtcclxuXHJcblNhbmRiYW5rVGFnZ2luZyA9IGZ1bmN0aW9uKCRzY29wZSkge1xyXG5cclxuICAgIHRoaXMub3Blbk1vZGFsID0gZnVuY3Rpb24gKG1hcElkcywgc2hvd0Rlc2NyaXB0aW9uLCBvblVwZGF0ZSkge1xyXG4gICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlX21hcF90YWdnaW5nX21vZGFsLmh0bWwnLCAvLyBzZWUgdmlld3MvdXNlcl90YWdzL190ZW1wbGF0ZV9tYXBfdGFnZ2luZ19tb2RhbFxyXG4gICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IHRhZ3NNb2RhbEN0cmwsXHJcbiAgICAgICAgICAgIHdpbmRvd0NsYXNzOiAndGFncy1tb2RhbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIG1hcElkczogZnVuY3Rpb24oKSB7IHJldHVybiBtYXBJZHM7IH0sXHJcbiAgICAgICAgICAgICAgICBzaG93RGVzY3JpcHRpb246IGZ1bmN0aW9uKCkgeyByZXR1cm4gc2hvd0Rlc2NyaXB0aW9uOyB9LFxyXG4gICAgICAgICAgICAgICAgb25VcGRhdGU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gb25VcGRhdGU7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uKCkge30pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIGNvbnRyb2xsZXIgZm9yIHRhZ3MgbW9kYWwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdmFyIHRhZ3NNb2RhbEN0cmwgPSBmdW5jdGlvbiAoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSwgbWFwSWRzLCBzaG93RGVzY3JpcHRpb24sIG9uVXBkYXRlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5tYXBJZHMgPSBtYXBJZHM7XHJcblxyXG4gICAgICAgIC8vIGFsbCBleGlzdGluZyB0YWdzIGZvciBzZWxlY3RlZCBtYXBzIC0gZm9ybWF0OiBbe21hcElkOiAxLCB0YWdJZDogMSwgdGFnTmFtZTonZm9vJ30sIC4uLl1cclxuICAgICAgICAkc2NvcGUubWFwVXNlclRhZ3MgPSBbXTsgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gZXhpc3RpbmcgdGFncywgZ3JvdXBlZCBmb3IgZGlzcGxheSAtIGZvcm1hdDogW3tuYW1lOidmb28nLCBtYXBJZHM6WzEsMl19LCAuLi5dXHJcbiAgICAgICAgJHNjb3BlLmV4aXN0aW5nVGFncyA9IFtdOyAgIFxyXG5cclxuICAgICAgICAvLyBuZXcgdGFncyBhZGRlZCBpbiB0aGUgZGlhbG9nIC0gZm9ybWF0OiBbe25hbWU6J2Zvbyd9LCAuLi5dXHJcbiAgICAgICAgJHNjb3BlLm5ld1RhZ3MgPSBbXTsgICAgICAgIFxyXG5cclxuICAgICAgICAvLyBhbGwgdXBkYXRlZCB0YWdzLCB0byBiZSBzYXZlZCAtIHRhZ3MgZm9ybWF0OiBbe21hcElkOiAxLCB1c2VyVGFnczogXCJmb28sIGJhciwgYmFtXCJ9LCAuLi5dXHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZWRUYWdzID0geyBkZXNjcmlwdGlvbjogJycsIHRhZ3M6IFtdIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zaG93RGVzY3JpcHRpb24gPSBzaG93RGVzY3JpcHRpb247XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRUYWdzKG1hcElkcykge1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy91c2VyX3RhZ3MvbWFwX3VzZXJfdGFncy5qc29uP2lkcz0nICsgbWFwSWRzLmpvaW4oJywnKSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm1hcFVzZXJUYWdzID0gcmVzcG9uc2UuZGF0YS5tYXBVc2VyVGFncztcclxuICAgICAgICAgICAgICAgIC8vIE5COiB0aGUgbWFwIGRlc2NyaXB0aW9uIGlzIGFsd2F5cyBwYXNzZWQgYmFjayBpZiB3ZSBvbmx5IHBhc3Mgb25lIG1hcCBJRCwgXHJcbiAgICAgICAgICAgICAgICAvLyBidXQgd2UgbWF5IG5vdCBkaXNwbGF5IGl0IGluIHRoZSBkaWFsb2cgLSBkZXBlbmRzIG9uIHRoZSB2YWx1ZSBvZiB0aGUgc2hvd0Rlc2NyaXB0aW9uIGZsYWcuXHJcbiAgICAgICAgICAgICAgICBpZiAobWFwSWRzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZWRUYWdzLmRlc2NyaXB0aW9uID0gcmVzcG9uc2UuZGF0YS5tYXBEZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGluaXRFeGlzdGluZ1RhZ3MoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGROZXdUYWcoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydCgnQ291bGQgbm90IGxvYWQgdGFncycpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvYWRUYWdzKG1hcElkcyk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRFeGlzdGluZ1RhZ3MoKSB7XHJcbiAgICAgICAgICAgIHZhciB0YWdOYW1lcyA9IF8udW5pcShfLnBsdWNrKCRzY29wZS5tYXBVc2VyVGFncywgJ3RhZ05hbWUnKSkuc29ydCgpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXhpc3RpbmdUYWdzID0gXy5tYXAodGFnTmFtZXMsIGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXBVc2VyVGFnc0Zvck5hbWUgPSBfLndoZXJlKCRzY29wZS5tYXBVc2VyVGFncywge3RhZ05hbWU6IG5hbWV9KTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXBJZHMgPSBfLnBsdWNrKG1hcFVzZXJUYWdzRm9yTmFtZSwgJ21hcElkJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOm5hbWUsIFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcElkczptYXBJZHNcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYnVpbGRVcGRhdGVkVGFncygpIHtcclxuICAgICAgICAgICRzY29wZS51cGRhdGVkVGFncy50YWdzID0gW107XHJcbiAgICAgICAgICBfLmVhY2gobWFwSWRzLCBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgIHZhciBleGlzdGluZ1RhZ3NGb3JJZCA9IF8uZmlsdGVyKCRzY29wZS5leGlzdGluZ1RhZ3MsIGZ1bmN0aW9uKGV4aXN0aW5nVGFnKSB7IFxyXG4gICAgICAgICAgICAgICAgLy8gZXhpc3RpbmdUYWcgZm9ybWF0OiB7bmFtZTonZm9vJywgbWFwSWRzOlsxLDJdfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uY29udGFpbnMoZXhpc3RpbmdUYWcubWFwSWRzLCBpZCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZWRUYWdzLnRhZ3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgIG1hcElkOiBpZCwgXHJcbiAgICAgICAgICAgICAgICAgIHVzZXJUYWdzOiBfLnVuaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgXy5wbHVjayhleGlzdGluZ1RhZ3NGb3JJZCwgJ25hbWUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgIF8ud2l0aG91dChfLnBsdWNrKCRzY29wZS5uZXdUYWdzLCAnbmFtZScpLCAnJykgLy8gcmVtb3ZlIGVtcHR5IHRhZ3NcclxuICAgICAgICAgICAgICAgICAgKS5qb2luKCcsICcpXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNhdmVUYWdzKG9uVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICRodHRwLnB1dCgnL3VzZXJfdGFncy91cGRhdGVfbWFwX3VzZXJfdGFncycsIFskc2NvcGUudXBkYXRlZFRhZ3NdKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3Qgc2F2ZSB0YWdzJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLmRlbGV0ZUV4aXN0aW5nVGFnID0gZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgICAgIHZhciBpID0gXy5pbmRleE9mKCRzY29wZS5leGlzdGluZ1RhZ3MsIHRhZyk7XHJcbiAgICAgICAgICAgICRzY29wZS5leGlzdGluZ1RhZ3Muc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIH07ICBcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZE5ld1RhZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUubmV3VGFncy5wdXNoKHtuYW1lOiAnJ30pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS50YWdTZWxlY3RlZCA9IGZ1bmN0aW9uKGl0ZW0sIG1vZGVsLCBsYWJlbCkge1xyXG4gICAgICAgICAgLy9jb25zb2xlLmxvZygndGFnU2VsZWN0ZWQ6ICcgKyBpdGVtICsgJywgJyArIG1vZGVsICsgJywgJyArIGxhYmVsKTtcclxuICAgICAgICAgICRzY29wZS5hZGROZXdUYWcoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZWRpdGluZ1RhZ0tleXByZXNzID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZE5ld1RhZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmRlbGV0ZU5ld1RhZyA9IGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZigkc2NvcGUubmV3VGFncywgdGFnKTtcclxuICAgICAgICAgICAgJHNjb3BlLm5ld1RhZ3Muc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICBpZiAoISRzY29wZS5uZXdUYWdzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZE5ld1RhZygpOyAvLyBhbHdheXMgbGVhdmUgYXQgbGVhc3Qgb25lIHRhZyBmaWVsZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIC8vIHRhZyBhdXRvY29tcGxldGVcclxuICAgICAgICAkc2NvcGUuZ2V0VXNlclRhZ3MgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICcvdXNlcl90YWdzL2xpc3QuanNvbj9xPScgKyB2aWV3VmFsdWU7IFxyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEudGFncztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm9rID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBidWlsZFVwZGF0ZWRUYWdzKCk7XHJcbiAgICAgICAgICAgIHNhdmVUYWdzKG9uVXBkYXRlKTtcclxuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxufTtcclxuIiwiLy8gZnVuY3Rpb25zIGZvciBhZG1pbi10YWdnaW5nIG1hcHMsIHdpdGggYSBtb2RhbCBkaWFsb2dcclxuXHJcbndpbmRvdy5TYW5kYmFua0FkbWluVGFnZ2luZyA9IHt9O1xyXG5cclxuU2FuZGJhbmtBZG1pblRhZ2dpbmcgPSBmdW5jdGlvbigkc2NvcGUpIHtcclxuXHJcbiAgICB0aGlzLm9wZW5Nb2RhbCA9IGZ1bmN0aW9uIChtYXBJZCwgb25VcGRhdGUpIHtcclxuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZV9tYXBfYWRtaW5fdGFnZ2luZ19tb2RhbC5odG1sJywgLy8gc2VlIHZpZXdzL2FkbWluX3RhZ3MvX3RlbXBsYXRlX21hcF9hZG1pbl90YWdnaW5nX21vZGFsXHJcbiAgICAgICAgICAgIGJhY2tkcm9wOiAnc3RhdGljJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogdGFnc01vZGFsQ3RybCxcclxuICAgICAgICAgICAgd2luZG93Q2xhc3M6ICd0YWdzLW1vZGFsJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgbWFwSWQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbWFwSWQ7IH0sXHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24oKSB7IHJldHVybiBvblVwZGF0ZTsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gY29udHJvbGxlciBmb3IgdGFncyBtb2RhbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB2YXIgdGFnc01vZGFsQ3RybCA9IGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbEluc3RhbmNlLCBtYXBJZCwgb25VcGRhdGUpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1hcElkID0gbWFwSWQ7XHJcblxyXG4gICAgICAgIC8vIGFkbWluIHRhZ3MgYXBwbGllZCB0byB0aGUgbWFwXHJcbiAgICAgICAgJHNjb3BlLm1hcEFkbWluVGFncyA9IFtdO1xyXG4gICAgICAgIC8vIGxpc3Qgb2YgYWxsIGFkbWluIHRhZ3NcclxuICAgICAgICAkc2NvcGUuYWRtaW5UYWdMaXN0ID0gW107XHJcblxyXG4gICAgICAgIC8vIGNoZWNrYm94IHNlbGVjdGlvbnMgZm9yIGFkbWluIHRhZ3MgLSBrZXkgKGluZGV4KTogYWRtaW4gdGFnIElEOyB2YWx1ZTogdHJ1ZS9mYWxzZSAoaWYgbWFwIGhhcyB0aGUgYWRtaW4gdGFnKVxyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZEFkbWluVGFncyA9IFtdO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbml0U2VsZWN0ZWRBZG1pblRhZ3MoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEFkbWluVGFncyA9IFtdO1xyXG4gICAgICAgICAgICBfLmVhY2goJHNjb3BlLmFkbWluVGFnTGlzdCwgZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5maW5kV2hlcmUoJHNjb3BlLm1hcEFkbWluVGFncywgeyBpZDogdGFnLmlkIH0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkQWRtaW5UYWdzW3RhZy5pZF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRUYWdzKG1hcElkKSB7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnL2FkbWluX3RhZ3MvbWFwX2FkbWluX3RhZ3MuanNvbj9pZD0nICsgbWFwSWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5tYXBBZG1pblRhZ3MgPSByZXNwb25zZS5kYXRhLm1hcEFkbWluVGFncztcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZG1pblRhZ0xpc3QgPSByZXNwb25zZS5kYXRhLmFkbWluVGFnTGlzdDtcclxuICAgICAgICAgICAgICAgIGluaXRTZWxlY3RlZEFkbWluVGFncygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3QgbG9hZCB0YWdzJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9hZFRhZ3MobWFwSWQpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzYXZlVGFncyhvblVwZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRUYWdOYW1lcyA9IF8ubWFwKCRzY29wZS5hZG1pblRhZ0xpc3QsIGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5zZWxlY3RlZEFkbWluVGFnc1t0YWcuaWRdID8gdGFnLm5hbWUgOiBudWxsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIHRhZ0xpc3QgPSBfLndpdGhvdXQoc2VsZWN0ZWRUYWdOYW1lcywgbnVsbCkuam9pbignLCcpO1xyXG5cclxuICAgICAgICAgICAgJGh0dHAucHV0KCcvYWRtaW5fdGFncy91cGRhdGVfbWFwX2FkbWluX3RhZ3MnLCBbeyBtYXBJZDogJHNjb3BlLm1hcElkLCBhZG1pblRhZ3M6IHRhZ0xpc3QgfV0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBzYXZlIHRhZ3MnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUub2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNhdmVUYWdzKG9uVXBkYXRlKTtcclxuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxufTtcclxuIiwiLy8gZnVuY3Rpb25zIGZvciB0YWdnaW5nIG1hcHMgb3IgdXNlcnMgd2l0aCBjb21tb24gY29yZSBzdGFuZGFyZHMsIHdpdGggYSBtb2RhbCBkaWFsb2dcclxuXHJcbndpbmRvdy5TYW5kYmFua0Njc1RhZ2dpbmcgPSB7fTtcclxuXHJcblNhbmRiYW5rQ2NzVGFnZ2luZyA9IGZ1bmN0aW9uKCRzY29wZSkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAvLyB0aGlzIGlzIHNldCBpbiBlaXRoZXIgdXNlci5qcyBvciBlZGl0b3IuanMsIGFuZCB0ZWxscyB1cyBpZiB3ZSdyZSBcclxuICAgIC8vIGVkaXRpbmcgQ0NTIHRhZ3MgZm9yIHRoZSBjdXJyZW50IHVzZXIgb3IgZm9yIHRoZSBjdXJyZW50IG1hcFxyXG4gICAgdGhpcy5tYXBJZCA9IG51bGw7XHJcblxyXG4gICAgLy8gdGhlIGxpc3Qgb2YgbGlua3MgdG8gc3RhbmRhcmRzIGZvciB0aGlzIG1hcCBvciB1c2VyLlxyXG4gICAgLy8gZWFjaCBsaW5rIGlzIGEgd3JhcHBlciBmb3IgdGhlIHN0YW5kYXJkLCB3aXRoIHRoaXMgZm9ybWF0OlxyXG4gICAgLy8geyBzdGFuZGFyZDogeyBuYW1lOiBcIksuQ0MuQS4xXCIsIHN0YXRlbWVudDogXCIuLi5cIiB9LCBlZGl0aW5nOiBmYWxzZSB9XHJcbiAgICB0aGlzLmxpbmtzID0gW107XHJcblxyXG4gICAgdGhpcy5hZGRMaW5rID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGxpbmsgPSB7XHJcbiAgICAgICAgICAgIHN0YW5kYXJkOiBudWxsLFxyXG4gICAgICAgICAgICBlZGl0aW5nOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZWxmLmxpbmtzLnB1c2gobGluayk7XHJcbiAgICAgICAgc2VsZi5vcGVuTW9kYWwobGluayk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGVsZXRlTGluayA9IGZ1bmN0aW9uKGxpbmspIHtcclxuICAgICAgICB2YXIgaSA9IF8uaW5kZXhPZihzZWxmLmxpbmtzLCBsaW5rKTtcclxuICAgICAgICBzZWxmLmxpbmtzLnNwbGljZShpLCAxKTtcclxuICAgICAgICBzZWxmLnNhdmVDY3NUYWdzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZWRpdGluZ0FMaW5rID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYubGlua3MgJiYgXy5maW5kV2hlcmUoc2VsZi5saW5rcywge1xyXG4gICAgICAgICAgICBlZGl0aW5nOiB0cnVlXHJcbiAgICAgICAgfSkgIT09IHVuZGVmaW5lZDtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyBhbiBsaXN0IG9mIG5hbWVzIG9mIHRoZSBzZWxlY3RlZCBzdGFuZGFyZHNcclxuICAgIHRoaXMuZ2V0TGlua05hbWVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF8ubWFwKHNlbGYubGlua3MsIGZ1bmN0aW9uKGxpbmspIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxpbmsuc3RhbmRhcmQubmFtZTtcclxuICAgICAgICB9KS5qb2luKCcsJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubG9hZENjc1RhZ3MgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoc2VsZi5tYXBJZCkge1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy9jb21tb25fY29yZV9zdGFuZGFyZHMvbWFwX2Njc190YWdzLmpzb24/aWQ9JyArIHNlbGYubWFwSWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBfLmVhY2gocmVzcG9uc2UuZGF0YS5tYXBDY3NUYWdzLCBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5saW5rcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YW5kYXJkOiB0YWcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHt9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfLmVhY2goJHNjb3BlLnVzZXJQcm9maWxlLnVzZXJDY3NUYWdzLCBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYubGlua3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhbmRhcmQ6IHRhZyxcclxuICAgICAgICAgICAgICAgICAgICBlZGl0aW5nOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zYXZlQ2NzVGFncyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChzZWxmLm1hcElkKSB7XHJcbiAgICAgICAgICAgICRodHRwLnB1dCgnL2NvbW1vbl9jb3JlX3N0YW5kYXJkcy91cGRhdGVfbWFwX2Njc190YWdzJywgW3tcclxuICAgICAgICAgICAgICAgIG1hcElkOiBzZWxmLm1hcElkLFxyXG4gICAgICAgICAgICAgICAgY2NzVGFnczogc2VsZi5nZXRMaW5rTmFtZXMoKVxyXG4gICAgICAgICAgICB9XSkudGhlbihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7fSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3Qgc2F2ZSBDb21tb24gQ29yZSBTdGFuZGFyZHMnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRodHRwLnB1dCgnL2NvbW1vbl9jb3JlX3N0YW5kYXJkcy91cGRhdGVfdXNlcl9jY3NfdGFncycsIFtzZWxmLmdldExpbmtOYW1lcygpXSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ0NTIFRhZ3Mgc2F2ZWQnO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdDb3VsZCBub3Qgc2F2ZSBDQ1MgdGFncyc7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMub3Blbk1vZGFsID0gZnVuY3Rpb24obGluaywgb25VcGRhdGUpIHtcclxuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZV9jY3NfdGFnZ2luZ19tb2RhbC5odG1sJyxcclxuICAgICAgICAgICAgYmFja2Ryb3A6ICdzdGF0aWMnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBjY3NUYWdzTW9kYWxDdHJsLFxyXG4gICAgICAgICAgICB3aW5kb3dDbGFzczogJ3N0YW5kYXJkcy1tb2RhbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaW5rO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25VcGRhdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbigpIHt9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIGNvbnRyb2xsZXIgZm9yIHRhZ3MgbW9kYWwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdmFyIGNjc1RhZ3NNb2RhbEN0cmwgPSBmdW5jdGlvbigkc2NvcGUsICRtb2RhbEluc3RhbmNlLCBsaW5rLCBvblVwZGF0ZSkge1xyXG5cclxuICAgICAgICAvLyB0aGUgbGlzdCBvZiBhbGwgc3RhbmRhcmRzLCB3aGljaCB0aGUgdXNlciBzZWxlY3RzIGZyb21cclxuICAgICAgICAkc2NvcGUuc3RhbmRhcmRzID0gW107XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGlvbiA9IHtcclxuICAgICAgICAgICAgc3RhbmRhcmQ6IGxpbmsuc3RhbmRhcmRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBjYWNoZSB0aGVzZSBzb21laG93Pz9cclxuICAgICAgICAkc2NvcGUubG9hZFN0YW5kYXJkcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJy9jb21tb25fY29yZV9zdGFuZGFyZHMuanNvbic7XHJcbiAgICAgICAgICAgICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdGFuZGFyZHMgPSByZXNwb25zZS5kYXRhLnN0YW5kYXJkcztcclxuICAgICAgICAgICAgICAgICRzY29wZS5hcHBseUZpbHRlcnMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmxvYWRTdGFuZGFyZHMoKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmZpbHRlcnMgPSB7XHJcbiAgICAgICAgICAgIC8vIHBvc3NpYmxlIHZhbHVlcyBmb3IgZmlsdGVyIHZhcnNcclxuICAgICAgICAgICAgZmlsdGVyZWRTdGFuZGFyZFR5cGVzOiBbXSwgLy8gdGhlc2UgZG9uJ3QgYWN0dWFsbHkgZ2V0IGZpbHRlcmVkLCBidXQgbmFtaW5nIGZvciBjb25zaXN0ZW5jeVxyXG4gICAgICAgICAgICBmaWx0ZXJlZEdyYWRlczogW10sXHJcbiAgICAgICAgICAgIGZpbHRlcmVkQ2F0ZWdvcmllczogW10sXHJcbiAgICAgICAgICAgIGZpbHRlcmVkU3RhbmRhcmRzOiBbXSxcclxuXHJcbiAgICAgICAgICAgIC8vIGZpbHRlciB2YXJzXHJcbiAgICAgICAgICAgIHN0YW5kYXJkVHlwZUZpbHRlcjogbnVsbCxcclxuICAgICAgICAgICAgZ3JhZGVGaWx0ZXI6IG51bGwsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5RmlsdGVyOiBudWxsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmaWx0ZXIgdGhlIGRyb3AtZG93bnMgYW5kIHRoZSBzdGFuZGFyZHMgbGlzdCBhY2NvcmRpbmcgdG8gY3VycmVudCBzZWxlY3Rpb25zXHJcbiAgICAgICAgJHNjb3BlLmFwcGx5RmlsdGVycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBnZXQgc3RhbmRhcmQgdHlwZXMgKGUuZy4gJ01hdGhlbWF0aWNzJylcclxuICAgICAgICAgICAgJHNjb3BlLmZpbHRlcnMuZmlsdGVyZWRTdGFuZGFyZFR5cGVzID0gXy51bmlxKF8ucGx1Y2soJHNjb3BlLnN0YW5kYXJkcywgJ3N0YW5kYXJkJykpO1xyXG5cclxuICAgICAgICAgICAgLy8gZ2V0IGdyYWRlIG9wdGlvbnMgZm9yIHNlbGVjdGVkIHN0YW5kYXJkXHJcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXJzLmZpbHRlcmVkR3JhZGVzID0gXy51bmlxKF8ucGx1Y2soXy53aGVyZSgkc2NvcGUuc3RhbmRhcmRzLCB7XHJcbiAgICAgICAgICAgICAgICBzdGFuZGFyZDogJHNjb3BlLmZpbHRlcnMuc3RhbmRhcmRUeXBlRmlsdGVyXHJcbiAgICAgICAgICAgIH0pLCAnZ3JhZGUnKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBnZXQgY2F0ZWdvcnkgb3B0aW9ucyBmb3Igc2VsZWN0ZWQgc3RhbmRhcmQgYW5kIGdyYWRlXHJcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXJzLmZpbHRlcmVkQ2F0ZWdvcmllcyA9IF8udW5pcShfLnBsdWNrKF8ud2hlcmUoJHNjb3BlLnN0YW5kYXJkcywge1xyXG4gICAgICAgICAgICAgICAgc3RhbmRhcmQ6ICRzY29wZS5maWx0ZXJzLnN0YW5kYXJkVHlwZUZpbHRlcixcclxuICAgICAgICAgICAgICAgIGdyYWRlOiAkc2NvcGUuZmlsdGVycy5ncmFkZUZpbHRlclxyXG4gICAgICAgICAgICB9KSwgJ2NhdGVnb3J5JykpO1xyXG5cclxuICAgICAgICAgICAgLy8gZ2V0IHN0YW5kYXJkcyBmb3Igc2VsZWN0ZWQgc3RhbmRhcmQsIGdyYWRlIGFuZCBjYXRlZ29yeVxyXG4gICAgICAgICAgICAkc2NvcGUuZmlsdGVycy5maWx0ZXJlZFN0YW5kYXJkcyA9IF8uZmlsdGVyKCRzY29wZS5zdGFuZGFyZHMsIGZ1bmN0aW9uKHN0ZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICghJHNjb3BlLmZpbHRlcnMuc3RhbmRhcmRUeXBlRmlsdGVyIHx8IHN0ZC5zdGFuZGFyZCA9PSAkc2NvcGUuZmlsdGVycy5zdGFuZGFyZFR5cGVGaWx0ZXIpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgKCEkc2NvcGUuZmlsdGVycy5ncmFkZUZpbHRlciB8fCBzdGQuZ3JhZGUgPT0gJHNjb3BlLmZpbHRlcnMuZ3JhZGVGaWx0ZXIpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgKCEkc2NvcGUuZmlsdGVycy5jYXRlZ29yeUZpbHRlciB8fCBzdGQuY2F0ZWdvcnkgPT0gJHNjb3BlLmZpbHRlcnMuY2F0ZWdvcnlGaWx0ZXIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBzZXQgdGhlIGZpbHRlciBkcm9wLWRvd25zIHRvIG1hdGNoIHRoZSBzZWxlY3RlZCBzdGFuZGFyZFxyXG4gICAgICAgICRzY29wZS5zZXRGaWx0ZXJzID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgICAgICBpZiAobGluay5zdGFuZGFyZCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlcnMuc3RhbmRhcmRUeXBlRmlsdGVyID0gbGluay5zdGFuZGFyZC5zdGFuZGFyZDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJzLmdyYWRlRmlsdGVyID0gbGluay5zdGFuZGFyZC5ncmFkZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJzLmNhdGVnb3J5RmlsdGVyID0gbGluay5zdGFuZGFyZC5jYXRlZ29yeTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJzLnN0YW5kYXJkVHlwZUZpbHRlciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVycy5ncmFkZUZpbHRlciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVycy5jYXRlZ29yeUZpbHRlciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmFwcGx5RmlsdGVycygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zZXRGaWx0ZXJzKGxpbmspO1xyXG5cclxuICAgICAgICAkc2NvcGUub2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGluay5zdGFuZGFyZCA9ICRzY29wZS5zZWxlY3Rpb24uc3RhbmRhcmQ7XHJcbiAgICAgICAgICAgIGxpbmsuZWRpdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICBzZWxmLnNhdmVDY3NUYWdzKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsaW5rLmVkaXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gaWYgd2Ugd2VyZSBhZGRpbmcgYSBuZXcgbGluaywgZ2V0IHJpZCBvZiBpdFxyXG4gICAgICAgICAgICBpZiAoIWxpbmsuc3RhbmRhcmQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuZGVsZXRlTGluayhsaW5rKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH07XHJcbn07IiwiLy8gZ29KUyB0ZW1wbGF0ZXMgdXNlZCBpbiB0aGUgZWRpdG9yXHJcblxyXG5TYW5kYmFua0VkaXRvci5UZW1wbGF0ZXMgPSBmdW5jdGlvbigkc2NvcGUsIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAvLyBjb25zdGFudHNcclxuICAgIHRoaXMuZ3JvdXBGaWxsQ29sb3IgPSBcIiNmOWY5ZjlcIjtcclxuXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHt9O1xyXG5cclxuICAgIC8vIGluaXRpYWxpemUgdGVtcGxhdGUtcmVsYXRlZCBzdHVmZiB0aGF0IGRlcGVuZHMgb24gdGhlIGRpYWdyYW0gKGFuZCB0aGVyZWZvcmUgY2FuJ3QgZ28gaW4gaW5pdCgpKVxyXG4gICAgdGhpcy5pbml0VGVtcGxhdGVzID0gZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgIGRpYWdyYW0uZ3JvdXBUZW1wbGF0ZSA9IHNlbGYuZ3JvdXBUZW1wbGF0ZTtcclxuICAgICAgICBkaWFncmFtLm5vZGVUZW1wbGF0ZSA9IHNlbGYuc2xpZGVUZW1wbGF0ZTtcclxuICAgICAgICBkaWFncmFtLmxpbmtUZW1wbGF0ZSA9IHNlbGYubGlua1RlbXBsYXRlO1xyXG4gICAgICAgIGRpYWdyYW0ubGlua1RlbXBsYXRlTWFwLmFkZCgnUCcsIHNlbGYucExpbmtUZW1wbGF0ZSk7XHJcbiAgICAgICAgZGlhZ3JhbS5saW5rVGVtcGxhdGVNYXAuYWRkKCdEJywgc2VsZi5kTGlua1RlbXBsYXRlKTtcclxuXHJcbiAgICAgICAgc2VsZi5zZXRUZW1wb3JhcnlMaW5rVGVtcGxhdGVzKGRpYWdyYW0udG9vbE1hbmFnZXIubGlua2luZ1Rvb2wpO1xyXG4gICAgICAgIHNlbGYuc2V0VGVtcG9yYXJ5TGlua1RlbXBsYXRlcyhkaWFncmFtLnRvb2xNYW5hZ2VyLnJlbGlua2luZ1Rvb2wpO1xyXG5cclxuICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sLnBvcnRUYXJnZXRlZCA9IGZ1bmN0aW9uKHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCkge1xyXG4gICAgICAgICAgICBzZWxmLmhhbmRsZVBvcnRUYXJnZXRlZChkaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sLCByZWFsbm9kZSwgcmVhbHBvcnQsIHRlbXBub2RlLCB0ZW1wcG9ydCwgdG9lbmQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbC5wb3J0VGFyZ2V0ZWQgPSBmdW5jdGlvbihyZWFsbm9kZSwgcmVhbHBvcnQsIHRlbXBub2RlLCB0ZW1wcG9ydCwgdG9lbmQpIHtcclxuICAgICAgICAgICAgc2VsZi5oYW5kbGVQb3J0VGFyZ2V0ZWQoZGlhZ3JhbS50b29sTWFuYWdlci5yZWxpbmtpbmdUb29sLCByZWFsbm9kZSwgcmVhbHBvcnQsIHRlbXBub2RlLCB0ZW1wcG9ydCwgdG9lbmQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbC51cGRhdGVBZG9ybm1lbnRzID0gZnVuY3Rpb24ocGFydCkge1xyXG4gICAgICAgICAgICBnby5SZWxpbmtpbmdUb29sLnByb3RvdHlwZS51cGRhdGVBZG9ybm1lbnRzLmNhbGwodGhpcywgcGFydCk7XHJcbiAgICAgICAgICAgIHZhciBmcm9tID0gcGFydC5maW5kQWRvcm5tZW50KCdSZWxpbmtGcm9tJyk7XHJcbiAgICAgICAgICAgIHZhciB0byA9IHBhcnQuZmluZEFkb3JubWVudCgnUmVsaW5rVG8nKTtcclxuICAgICAgICAgICAgLy8gaWYgKGZyb20pXHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygncmVsaW5rZnJvbTogJyArIGZyb20ucGFydC53aWR0aCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5saW5raW5nVG9vbC5saW5rVmFsaWRhdGlvbiA9IHNlbGYudmFsaWRhdGVMaW5rO1xyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbC5saW5rVmFsaWRhdGlvbiA9IHNlbGYudmFsaWRhdGVMaW5rO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjb252ZW5pZW50IGFiYnJldmlhdGlvbiBmb3IgY3JlYXRpbmcgdGVtcGxhdGVzXHJcbiAgICB2YXIgbWsgPSBnby5HcmFwaE9iamVjdC5tYWtlO1xyXG5cclxuICAgIC8vIERTUlAgY29sb3JzIChmcm9tIF92YXJpYWJsZXMuc2NzcylcclxuICAgIHZhciBjb2xvckQgPSBcIiNmMjYyNGNcIjtcclxuICAgIHZhciBjb2xvclMgPSBcIiM5NmM5M2RcIjtcclxuICAgIHZhciBjb2xvclIgPSBcIiM0Y2JmYzJcIjtcclxuICAgIHZhciBjb2xvclAgPSBcIiNmYmFhMzZcIjtcclxuICAgIHZhciBjb2xvclBMaWdodCA9IFwiI0ZERERBRlwiO1xyXG4gICAgdmFyIGNvbG9yUERhcmsgPSBcIiNDOTg4MkJcIjtcclxuXHJcbiAgICB2YXIgZXllU3ZnUGF0aCA9IFwiTSAyNTYuMDAsOTYuMDBDIDE0NC4zNDEsOTYuMDAsIDQ3LjU1OSwxNjEuMDIxLDAuMDAsMjU2LjAwYyA0Ny41NTksOTQuOTc5LCAxNDQuMzQxLDE2MC4wMCwgMjU2LjAwLDE2MC4wMGMgMTExLjY1NywwLjAwLCAyMDguNDM5LTY1LjAyMSwgMjU2LjAwLTE2MC4wMCBDIDQ2NC40NDIsMTYxLjAyMSwgMzY3LjY1Nyw5Ni4wMCwgMjU2LjAwLDk2LjAweiBNIDM4Mi4yMjUsMTgwLjg1MmMgMzAuMDgxLDE5LjE4NywgNTUuNTcxLDQ0Ljg4NywgNzQuNzE3LDc1LjE0OCBjLTE5LjE0NiwzMC4yNjEtNDQuNjM3LDU1Ljk2MS03NC43MTgsNzUuMTQ5QyAzNDQuNDI3LDM1NS4yNTcsIDMwMC43NzksMzY4LjAwLCAyNTYuMDAsMzY4LjAwYy00NC43OCwwLjAwLTg4LjQyOC0xMi43NDMtMTI2LjIyNS0zNi44NTIgQyA5OS42OTUsMzExLjk2MiwgNzQuMjA1LDI4Ni4yNjIsIDU1LjA1OCwyNTYuMDBjIDE5LjE0Ni0zMC4yNjIsIDQ0LjYzNy01NS45NjIsIDc0LjcxNy03NS4xNDhjIDEuOTU5LTEuMjUsIDMuOTM4LTIuNDYxLCA1LjkyOS0zLjY1IEMgMTMwLjcyNSwxOTAuODY2LCAxMjguMDAsMjA1LjYxMywgMTI4LjAwLDIyMS4wMGMwLjAwLDcwLjY5MiwgNTcuMzA4LDEyOC4wMCwgMTI4LjAwLDEyOC4wMHMgMTI4LjAwLTU3LjMwOCwgMTI4LjAwLTEyOC4wMGMwLjAwLTE1LjM4Ny0yLjcyNS0zMC4xMzQtNy43MDQtNDMuNzk5IEMgMzc4LjI4NiwxNzguMzksIDM4MC4yNjUsMTc5LjYwMiwgMzgyLjIyNSwxODAuODUyeiBNIDI1Ni4wMCwyMDUuMDBjMC4wMCwyNi41MS0yMS40OSw0OC4wMC00OC4wMCw0OC4wMHMtNDguMDAtMjEuNDktNDguMDAtNDguMDBzIDIxLjQ5LTQ4LjAwLCA0OC4wMC00OC4wMCBTIDI1Ni4wMCwxNzguNDksIDI1Ni4wMCwyMDUuMDB6XCI7XHJcbiAgICB2YXIgZXllQmxvY2tlZFN2Z1BhdGggPSBcIk0gNDE5LjY2MSwxNDguMjA4IEMgNDU4LjQ4MywxNzUuNzIzIDQ5MC4zNDYsMjEyLjc1NCA1MTIuMDAsMjU2LjAwIEMgNDY0LjQzOSwzNTAuOTc5IDM2Ny42NTcsNDE2LjAwIDI1Ni4wMCw0MTYuMDAgQyAyMjQuNzE3LDQxNi4wMCAxOTQuNjA0LDQxMC44OTQgMTY2LjQxMSw0MDEuNDU4IEwgMjA1LjM4OSwzNjIuNDggQyAyMjEuOTE4LDM2Ni4xMyAyMzguODc1LDM2OC4wMCAyNTYuMDAsMzY4LjAwIEMgMzAwLjc3OSwzNjguMDAgMzQ0LjQyNywzNTUuMjU3IDM4Mi4yMjMsMzMxLjE0OCBDIDQxMi4zMDQsMzExLjk2IDQzNy43OTUsMjg2LjI2IDQ1Ni45NDEsMjU1Ljk5OSBDIDQzOC40MTUsMjI2LjcxNiA0MTMuOTM0LDIwMS43MjQgMzg1LjExNiwxODIuNzUyIEwgNDE5LjY2MSwxNDguMjA4IFpNIDI1Ni4wMCwzNDkuMDAgQyAyNDQuNjM4LDM0OS4wMCAyMzMuNjI0LDM0Ny41MTIgMjIzLjEzNiwzNDQuNzMzIEwgMzc5LjcyOSwxODguMTQxIEMgMzgyLjUxLDE5OC42MjcgMzg0LjAwLDIwOS42MzggMzg0LjAwLDIyMS4wMCBDIDM4NC4wMCwyOTEuNjkyIDMyNi42OTIsMzQ5LjAwIDI1Ni4wMCwzNDkuMDAgWk0gNDgwLjAwLDAuMDBsLTI2Ljg2OSwwLjAwIEwgMzQzLjMyNSwxMDkuODA2QyAzMTUuNzg3LDEwMC44NDQsIDI4Ni40NDgsOTYuMDAsIDI1Ni4wMCw5Ni4wMEMgMTQ0LjM0MSw5Ni4wMCwgNDcuNTU5LDE2MS4wMjEsMC4wMCwyNTYuMDAgYyAyMS4zMjksNDIuNTk2LCA1Mi41NjQsNzkuMTU0LCA5MC41OTcsMTA2LjUzNEwwLjAwLDQ1My4xMzFMMC4wMCw0ODAuMDAgbCAyNi44NjksMC4wMCBMIDQ4MC4wMCwyNi44NjlMIDQ4MC4wMCwwLjAwIHogTSAyMDguMDAsMTU3LjAwYyAyNC4wMjIsMC4wMCwgNDMuOTIzLDE3LjY0NywgNDcuNDQ2LDQwLjY4NSBsLTU0Ljc2Miw1NC43NjJDIDE3Ny42NDcsMjQ4LjkyMywgMTYwLjAwLDIyOS4wMjIsIDE2MC4wMCwyMDUuMDBDIDE2MC4wMCwxNzguNDksIDE4MS40OSwxNTcuMDAsIDIwOC4wMCwxNTcuMDB6IE0gNTUuMDU4LDI1Ni4wMCBjIDE5LjE0Ni0zMC4yNjIsIDQ0LjYzNy01NS45NjIsIDc0LjcxNy03NS4xNDhjIDEuOTU5LTEuMjUsIDMuOTM4LTIuNDYxLCA1LjkyOS0zLjY1QyAxMzAuNzI1LDE5MC44NjYsIDEyOC4wMCwyMDUuNjEzLCAxMjguMDAsMjIxLjAwIGMwLjAwLDI5LjI2MiwgOS44MjUsNTYuMjI0LCAyNi4zNDksNzcuNzgxbC0yOS4yNzUsMjkuMjc1QyA5Ny4wMzgsMzA5LjIzNSwgNzMuMTk3LDI4NC42NywgNTUuMDU4LDI1Ni4wMHpcIjtcclxuICAgIHZhciBwYXBlcmNsaXBTdmdQYXRoID0gXCJNIDM0OC45MTYsMTYzLjUyNGwtMzIuNDc2LTMyLjQ2MUwgMTU0LjAzNSwyOTMuNDM0Yy0yNi45MDcsMjYuODk2LTI2LjkwNyw3MC41MjQsMC4wMCw5Ny40MjIgYyAyNi45MDIsMjYuODk2LCA3MC41MywyNi44OTYsIDk3LjQzNywwLjAwbCAxOTQuODg2LTE5NC44NTRjIDQ0Ljg1Ny00NC44MzEsIDQ0Ljg1Ny0xMTcuNTMxLDAuMDAtMTYyLjM2MyBjLTQ0LjgzMy00NC44NTItMTE3LjU1Ni00NC44NTItMTYyLjM5MSwwLjAwTCA3OS4zMzUsMjM4LjIxMmwgMC4wMTcsMC4wMTZjLTAuMTQ1LDAuMTUyLTAuMzA2LDAuMjg4LTAuNDM4LDAuNDIzIGMtNjIuNTUxLDYyLjU0OC02Mi41NTEsMTYzLjkyOCwwLjAwLDIyNi40NTNjIDYyLjUyNyw2Mi41MjgsIDE2My45MzQsNjIuNTI4LCAyMjYuNDk0LDAuMDBjIDAuMTM3LTAuMTM3LCAwLjI1OC0wLjI4NCwgMC40MS0wLjQzOGwgMC4wMTYsMC4wMTcgbCAxMzkuNjY2LTEzOS42NDZsLTMyLjQ5My0zMi40NkwgMjczLjM1LDQzMi4yMDhsLTAuMDA4LDAuMDAgYy0wLjE0OCwwLjEzNC0wLjI4MiwwLjI4NS0wLjQyMywwLjQyMiBjLTQ0LjUzNyw0NC41MjktMTE2Ljk5LDQ0LjUyOS0xNjEuNTM4LDAuMDBjLTQ0LjUzMS00NC41MjEtNDQuNTMxLTExNi45NjEsMC4wMC0xNjEuNDg5YyAwLjE1Mi0wLjE1MiwgMC4zMDItMC4yOTEsIDAuNDQ0LTAuNDIzbC0wLjAyMy0wLjAzIGwgMjA0LjY0LTIwNC41ODNjIDI2Ljg1Ni0yNi44NjksIDcwLjU3Mi0yNi44NjksIDk3LjQ0MywwLjAwYyAyNi44NTYsMjYuODY3LCAyNi44NTYsNzAuNTc0LDAuMDAsOTcuNDJMIDIxOC45OTksMzU4LjM3NSBjLTguOTY4LDguOTYxLTIzLjUyNyw4Ljk2MS0zMi40ODYsMC4wMGMtOC45NDctOC45NDMtOC45NDctMjMuNTE2LDAuMDAtMzIuNDZMIDM0OC45MTYsMTYzLjUyNHpcIjtcclxuXHJcbiAgICAvLyBmb290ZXIgZm9yIGltYWdlIGV4cG9ydFxyXG4gICAgdmFyIF9leHBvcnRGb290ZXIgPSBudWxsO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gZGVidWcgaW5mbyBmb3IgZ3JvdXBzL2xpbmtzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gZ3JvdXBJbmZvKG9iaikge1xyXG4gICAgICAgIHJldHVybiBvYmouZGF0YS50ZXh0ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdvYmplY3Q6ICcgKyBvYmogKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2tleTogJyArIG9iai5kYXRhLmtleSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnY29udGFpbmluZ0dyb3VwOiAnICsgb2JqLmNvbnRhaW5pbmdHcm91cCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnbGF5b3V0OiAnICsgb2JqLmxheW91dCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZGF0YS5sYXlvdXQ6ICcgKyBvYmouZGF0YS5sYXlvdXQgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3Bvc2l0aW9uOiAnICsgcGFyc2VJbnQob2JqLnBvc2l0aW9uLngsIDEwKSArICcsICcgKyBwYXJzZUludChvYmoucG9zaXRpb24ueSwgMTApICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdmcmVlaGFuZCBwb3NpdGlvbiAoZGF0YS5sb2MpOiAnICsgZ28uUG9pbnQucGFyc2Uob2JqLmRhdGEubG9jKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnd2lkdGgvaGVpZ2h0OiAnICsgcGFyc2VJbnQob2JqLmFjdHVhbEJvdW5kcy53aWR0aCwgMTApICsgJy8nICsgcGFyc2VJbnQob2JqLmFjdHVhbEJvdW5kcy5oZWlnaHQsIDEwKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnZ2V0U2NhbGUoKTogJyArIG1hcC5nZXRMYXlvdXRzKCkuZ2V0U2NhbGUob2JqKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnaXNMaW5rTGFiZWw6ICcgKyBvYmouZGF0YS5pc0xpbmtMYWJlbCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnbGFiZWxlZExpbms6ICcgKyBvYmoubGFiZWxlZExpbmsgKyBcIlxcblwiO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG5vZGVJbmZvKG9iaikge1xyXG4gICAgICAgIHJldHVybiAnb2JqZWN0OiAnICsgb2JqICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdrZXk6ICcgKyBvYmouZGF0YS5rZXkgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ3Bvc2l0aW9uOiAnICsgcGFyc2VJbnQob2JqLnBvc2l0aW9uLngsIDEwKSArICcsICcgKyBwYXJzZUludChvYmoucG9zaXRpb24ueSwgMTApICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICd3aWR0aC9oZWlnaHQ6ICcgKyBwYXJzZUludChvYmouYWN0dWFsQm91bmRzLndpZHRoLCAxMCkgKyAnLycgKyBwYXJzZUludChvYmouYWN0dWFsQm91bmRzLmhlaWdodCwgMTApICsgXCJcXG5cIjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBsaW5rSW5mbyhvYmopIHtcclxuICAgICAgICB2YXIgc25wb3MgPSBtYXAuZ2V0TGF5b3V0cygpLmdldFNhbWVOb2Rlc0xpbmtQb3NpdGlvbihvYmopO1xyXG4gICAgICAgIHJldHVybiAnJyArXHJcbiAgICAgICAgICAgICdvYmplY3Q6ICcgKyBvYmogKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2Zyb21Ob2RlOiAnICsgb2JqLmZyb21Ob2RlICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICd0b05vZGU6ICcgKyBvYmoudG9Ob2RlICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdsYWJlbE5vZGVzOiAnICsgb2JqLmxhYmVsTm9kZXMuY291bnQgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2xhYmVsTm9kZUlzVmlzaWJsZTogJyArIG1hcC5nZXRMYXlvdXRzKCkubGFiZWxOb2RlSXNWaXNpYmxlKG9iaikgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2Zyb21Qb3J0SWQ6ICcgKyBvYmouZnJvbVBvcnRJZCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAndG9Qb3J0SWQ6ICcgKyBvYmoudG9Qb3J0SWQgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2NhdGVnb3J5OiAnICsgKG9iai5kYXRhID8gb2JqLmRhdGEuY2F0ZWdvcnkgOiAnJykgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2NvbnRhaW5pbmdHcm91cDogJyArIG9iai5jb250YWluaW5nR3JvdXAgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2Zyb21BbmRUb05vZGVzQXJlVmlzaWJsZTogJyArIG1hcC5nZXRMYXlvdXRzKCkuZnJvbUFuZFRvTm9kZXNBcmVWaXNpYmxlKG9iaikgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgJ2N1cnZlOiAnICsgb2JqLmN1cnZlICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdjdXJ2aW5lc3M6ICcgKyBvYmouY3VydmluZXNzICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdmcm9tRW5kU2VnbWVudExlbmd0aDogJyArIE1hdGgucm91bmQob2JqLmZyb21FbmRTZWdtZW50TGVuZ3RoKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAndG9FbmRTZWdtZW50TGVuZ3RoOiAnICsgTWF0aC5yb3VuZChvYmoudG9FbmRTZWdtZW50TGVuZ3RoKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAnc2FtZU5vZGVzTGlua1Bvc2l0aW9uOiAnICsgc25wb3MuaW5kZXggKyAnIG9mICcgKyBzbnBvcy5jb3VudCArIFwiXFxuXCIgK1xyXG4gICAgICAgICAgICAvLysgJ2dlb21ldHJ5OiAnICsgb2JqLmdlb21ldHJ5ICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICdnZXRMaW5rU3Ryb2tlV2lkdGg6ICcgKyBtYXAuZ2V0TGF5b3V0cygpLmdldExpbmtTdHJva2VXaWR0aChvYmopICsgXCJcXG5cIjtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIE5COiB0aGVzZSBhcmUgaGVyZSBiZWNhdXNlIHRoZXkgYXJlIGFib3V0IGNvbG9yczsgXHJcbiAgICAvLyBzaW1pbGFyIGZ1bmN0aW9ucyB0aGF0IGFyZSBzY2FsZS1yZWxhdGVkIGFyZSBpbiBsYXlvdXRzLmpzLi4uXHJcbiAgICBmdW5jdGlvbiBnZXRHcm91cFNlbGVjdGlvblN0cm9rZShvYmopIHtcclxuICAgICAgICBpZiAob2JqLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luUEVkaXRvck1vZGUoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvclA7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luREVkaXRvck1vZGUoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvckQ7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIiMwMDBcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCIjMDAwXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE9LLCB0aGlzIGlzbid0IGFib3V0IGNvbG9ycywgYnV0IGl0IHdhbnRzIHRvIGJlIG5lYXIgdGhlIG9uZSBhYm92ZS4uLlxyXG4gICAgZnVuY3Rpb24gZ2V0R3JvdXBTZWxlY3Rpb25TdHJva2VXaWR0aChvYmopIHtcclxuICAgICAgICByZXR1cm4gKG9iai5pc1NlbGVjdGVkID8gMyA6IDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFJMaW5rU2VsZWN0aW9uU3Ryb2tlKG9iaikge1xyXG4gICAgICAgIGlmIChvYmouaXNTZWxlY3RlZCB8fCBvYmogPT0gbWFwLmdldFVpKCkubW91c2VPdmVyTGluaykge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sb3JSOyAvLyBUT0RPOiBjYW4gUCBsaW5rcyBiZSBzZWxlY3RlZD9cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCIjMDAwXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gY2FsbGJhY2tzIHRvIGRldGVybWluZSB3aGVuIHRoZSBjb3JuZXJzIHNob3VsZCBiZSB2aXNpYmxlXHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd0RDb3JuZXIoZ3JvdXApIHtcclxuICAgICAgICBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzREVkaXRvclRoaW5nKGdyb3VwKSkgeyAvLyBtYXJrIGRpc3RpbmN0aW9uIHRoaW5nXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgaW4gUC9EIGVkaXRvciBtb2RlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcC5nZXRQcmVzZW50ZXIoKS5pc0NyZWF0aW5nVGh1bWJuYWlsKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgY2FwdHVyaW5nIHRodW1ibmFpbFxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChncm91cCA9PSBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCkgfHwgLy8gc2hvdyBjb3JuZXJzIG9uIG1vdXNlb3ZlclxyXG4gICAgICAgICAgICAgICAgKCRzY29wZS5pc1RvdWNoRGV2aWNlKCkgJiYgZ3JvdXAuaXNTZWxlY3RlZCkgfHxcclxuICAgICAgICAgICAgICAgIChjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVTaXN0ZXJzT2YoZ3JvdXAsIGZhbHNlKSAmJiAvLyBkcmFnIHRvIEQgKG1ha2UgaXQgc2lzdGVycylcclxuICAgICAgICAgICAgICAgICAgICAoIW1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5ub3REcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YoZ3JvdXApKSk7IC8vIG5vdCBzaG93aW5nIGRyYWcgYWJvdmUvYmVsb3cgaW5kaWNhdG9yc1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93U0Nvcm5lcihncm91cCkge1xyXG4gICAgICAgIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNJblBPckRFZGl0b3JNb2RlKCkpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBpbiBQL0QgZWRpdG9yIG1vZGVcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFByZXNlbnRlcigpLmlzQ3JlYXRpbmdUaHVtYm5haWwpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBjYXB0dXJpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKGdyb3VwID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwKSB8fCAvLyBzaG93IGNvcm5lcnMgb24gbW91c2VvdmVyXHJcbiAgICAgICAgICAgICAgICAoJHNjb3BlLmlzVG91Y2hEZXZpY2UoKSAmJiBncm91cC5pc1NlbGVjdGVkKSB8fFxyXG4gICAgICAgICAgICAgICAgKGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZUNoaWxkcmVuT2YoZ3JvdXAsIGZhbHNlKSAmJiAvLyBkcmFnIHRvIFMgKG1ha2UgaXQgY2hpbGRyZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgKCFtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0UG9zaXRpb24gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2Fubm90RHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKGdyb3VwKSkpOyAvLyBub3Qgc2hvd2luZyBkcmFnIGFib3ZlL2JlbG93IGluZGljYXRvcnNcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd1JDb3JuZXIoZ3JvdXApIHtcclxuICAgICAgICBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgaW4gUC9EIGVkaXRvciBtb2RlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcC5nZXRQcmVzZW50ZXIoKS5pc0NyZWF0aW5nVGh1bWJuYWlsKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgY2FwdHVyaW5nIHRodW1ibmFpbFxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdyb3VwID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwIHx8XHJcbiAgICAgICAgICAgICAgICAoJHNjb3BlLmlzVG91Y2hEZXZpY2UoKSAmJiBncm91cC5pc1NlbGVjdGVkKTsgLy8gc2hvdyBjb3JuZXJzIG9uIG1vdXNlb3ZlclxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93UENvcm5lcihncm91cCkge1xyXG4gICAgICAgIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNQRWRpdG9yUG9pbnQoZ3JvdXApKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBtYXJrIHBlcnNwZWN0aXZlIHBvaW50XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNJblBPckRFZGl0b3JNb2RlKCkpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBpbiBQL0QgZWRpdG9yIG1vZGVcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFByZXNlbnRlcigpLmlzQ3JlYXRpbmdUaHVtYm5haWwpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBjYXB0dXJpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JvdXAgPT0gbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXAgfHxcclxuICAgICAgICAgICAgICAgICgkc2NvcGUuaXNUb3VjaERldmljZSgpICYmIGdyb3VwLmlzU2VsZWN0ZWQpOyAvLyBzaG93IGNvcm5lcnMgb24gbW91c2VvdmVyXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHdoZW4gYSBQIGxpbmsgc2hvdWxkIGJlIHZpc2libGVcclxuXHJcbiAgICB0aGlzLnNob3dQTGluayA9IGZ1bmN0aW9uKGxpbmspIHtcclxuICAgICAgICB2YXIgbW9kZSA9IG1hcC5nZXRVaSgpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5wZXJzcGVjdGl2ZU1vZGU7XHJcbiAgICAgICAgaWYgKG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc1BFZGl0b3JQb2ludChsaW5rLmZyb21Ob2RlKSkgeyAvLyBzaG93IFAncyB3aGVuIHRoaXMgbGluayBpcyBmcm9tIHRoZSBjdXJyZW50IFBvaW50XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgUCdzIGZvciBub24tUG9pbnQgdGhpbmdzLCBldmVuIG9uIG1vdXNlb3ZlclxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIChtb2RlID09ICdsaW5lcycgfHwgbW9kZSA9PSAnYm90aCcpICYmIChsaW5rLmZyb21Ob2RlID09IG1hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwIHx8IG1hcC5wSXNFeHBhbmRlZChsaW5rLmZyb21Ob2RlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNob3dQRG90ID0gZnVuY3Rpb24obGluaykge1xyXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBtYXAuZ2V0VWkoKS5nZXRNYXBFZGl0b3JPcHRpb25zKCkucGVyc3BlY3RpdmVNb2RlICE9ICdib3RoJztcclxuICAgIH07XHJcblxyXG4gICAgLy8gdGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIGluIHR3byBtb2RlczpcclxuICAgIC8vIDEuIHdpdGggaXNEcm9wcGluZyA9PSBmYWxzZSwgdG8gaGlnaGxpZ2h0IGRyb3AgdGFyZ2V0cyBiYXNlZCBvbiBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgYW5kIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbixcclxuICAgIC8vICAgIHdoaWNoIGFyZSBzZXQgb24gbW91c2VEcmFnRW50ZXIvbW91c2VEcmFnbGVhdmVcclxuICAgIC8vIDIuIHdpdGggaXNEcm9wcGluZyA9PSB0cnVlLCBvbiBkcm9wLCB3aGVuIHRoZSBhYm92ZSBpbmRpY2F0b3JzIGhhdmUgZ29uZSBhd2F5LCBidXQgd2Uga25vdyB3aGF0IHRoZSBkcm9wcGVkXHJcbiAgICAvLyAgICBhbmQgdGFyZ2V0IGdyb3VwcyBhcmUsIGFuZCB3ZSB3YW50IHRvIGtub3cgd2hhdCB0aGUgZHJvcCBzaG91bGQgZG8uXHJcblxyXG4gICAgZnVuY3Rpb24gY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lU2lzdGVyc09mKGdyb3VwLCBpc0Ryb3BwaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIChncm91cCA9PSBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgbWFwLnRoaW5nc1NlbGVjdGVkQXJlRGVzY2VuZGFudHNPZihncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lQ2hpbGRyZW5PZihncm91cCwgaXNEcm9wcGluZykge1xyXG4gICAgICAgIHJldHVybiAoZ3JvdXAgPT0gbWFwLmdldFVpKCkuZHJhZ1RhcmdldEdyb3VwIHx8IGlzRHJvcHBpbmcpICYmXHJcbiAgICAgICAgICAgICFtYXAudGhpbmdzU2VsZWN0ZWRJbmNsdWRlU2xpZGUoKSAmJlxyXG4gICAgICAgICAgICAhbWFwLnRoaW5nc1NlbGVjdGVkQXJlRGVzY2VuZGFudHNPZihncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2lkZSBpcyBtYXAuTEVGVCBvciBtYXAuUklHSFRcclxuICAgIGZ1bmN0aW9uIGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZih0YXJnZXRHcm91cCwgc2lkZSwgaXNEcm9wcGluZykge1xyXG4gICAgICAgIC8vIG11c3QgYmUgZHJhZ2dpbmcgc2luZ2xlIGdyb3VwXHJcbiAgICAgICAgdmFyIGRyYWdnZWRHcm91cCA9IG1hcC5nZXRVbmlxdWVUaGluZ1NlbGVjdGVkKCk7XHJcbiAgICAgICAgaWYgKCFkcmFnZ2VkR3JvdXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZHJhZ2dlZCBhbmQgdGFyZ2V0IG11c3QgYmUgU2lzdGVycyBpbiBpbnZlbnRvcnkgbGF5b3V0XHJcbiAgICAgICAgcmV0dXJuICh0YXJnZXRHcm91cCA9PSBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgKG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbiA9PSBzaWRlIHx8IGlzRHJvcHBpbmcpICYmXHJcbiAgICAgICAgICAgIG1hcC5nZXRMYXlvdXRzKCkuYXJlU2lzdGVyc0luSW52ZW50b3J5TGF5b3V0KGRyYWdnZWRHcm91cCwgdGFyZ2V0R3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNhbm5vdERyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZih0YXJnZXRHcm91cCkge1xyXG4gICAgICAgIHJldHVybiAhY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKHRhcmdldEdyb3VwLCBtYXAuTEVGVCkgJiZcclxuICAgICAgICAgICAgIWNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZih0YXJnZXRHcm91cCwgbWFwLlJJR0hUKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBoYW5kbGUgZHJvcCBvbiBvbmUgb2YgdGhlIHRocmVlIHRhcmdldCByZWdpb25zICh0b3AsIG1pZGRsZSwgYm90dG9tKVxyXG4gICAgLy8gc2lkZSBpcyBtYXAuTEVGVCBvciBtYXAuUklHSFRcclxuICAgIGZ1bmN0aW9uIGhhbmRsZUdyb3VwTW91c2VEcm9wKGV2ZW50LCBkcm9wVGFyZ2V0LCBzaWRlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZHJhZ0Fib3ZlVGFyZ2V0Lm1vdXNlRHJvcCwgdGFyZ2V0OiAnICsgZHJvcFRhcmdldCArICcsIHBhcnQ6ICcgKyBkcm9wVGFyZ2V0IC5wYXJ0ICsgJywgc2hvdzogJyArIHNob3cpO1xyXG4gICAgICAgIGlmIChzaWRlICAmJiBjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YoZHJvcFRhcmdldC5wYXJ0LCBzaWRlLCB0cnVlKSkge1xyXG4gICAgICAgICAgICBtYXAuYWRkU2VsZWN0ZWRUaGluZ0FzT3JkZXJlZFNpc3Rlck9mKGRyb3BUYXJnZXQucGFydCwgc2lkZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVTaXN0ZXJzT2YoZHJvcFRhcmdldC5wYXJ0LCB0cnVlKSkge1xyXG4gICAgICAgICAgICBtYXAuYWRkU2VsZWN0ZWRUaGluZ3NBc1Npc3RlcnNPZihkcm9wVGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lQ2hpbGRyZW5PZihkcm9wVGFyZ2V0LnBhcnQsIHRydWUpKSB7XHJcbiAgICAgICAgICAgIG1hcC5hZGRTZWxlY3RlZFRoaW5nc0FzQ2hpbGRyZW5PZihkcm9wVGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyB3aGVuIHRvIHNob3cgdGhlIFItdGhpbmcga25vYiBvbiBhIGxpbmtcclxuICAgIGZ1bmN0aW9uIHNob3dLbm9iKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gbGluayA9PSBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJMaW5rO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0gY29tcG9uZW50cyBmb3IgbWFpbiBncm91cCB0ZW1wbGF0ZSAtLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBkRmxhZ01hcmtlcigpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdmaWxsJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5kYXRhLmRmbGFnID8gJyMwMDAnIDogbnVsbDtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJkZmxhZ1wiLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxOCwgMTgpLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRiBNMCAxIEwwIDE4IEwxOCAwIEwxIDB6XCIsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcIkRcIiBjb3JuZXIgKHRvcCBsZWZ0LCByZWQpXHJcbiAgICBmdW5jdGlvbiBjb3JuZXJEKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChzaG93RENvcm5lcihvYmopID8gMSA6IDApO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvcm5lckRcIixcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNTAsIDUwKSxcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNTAsIDUwKSxcclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBnby5HZW9tZXRyeS5wYXJzZShcIkYgTTAgMSBMMCA1MCBMNTAgMCBMMSAwelwiLCB0cnVlKSxcclxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yRCxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGljaywgY29udHJvbDonICsgZXZlbnQuY29udHJvbCArICcsIGFsdDonICsgZXZlbnQuYWx0ICsgJywgbWV0YTonICsgZXZlbnQubWV0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmFsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOQjogYSBzaWRlIGVmZmVjdCBvZiB0aGlzIHdpbGwgYmUgdG8gc2VsZWN0IGp1c3QgdGhpcyBncm91cCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hpY2ggd291bGQgbm90IGhhcHBlbiBvdGhlcndpc2UgdmlhIGNvbnRyb2wtY2xpY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmdldFBlcnNwZWN0aXZlcygpLnNldERFZGl0b3JUaGluZyh0YXJnZXQucGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIHNpbmdsZSBvciBkb3VibGUgY2xpY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuaGFuZGxlQ29ybmVyQ2xpY2soXCJEXCIsIHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY29udGV4dENsaWNrOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY29udGV4dENsaWNrOicgKyBldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLnRvZ2dsZURGbGFnKHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJEXCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IFwid2hpdGVcIixcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICc5cHggc2Fucy1zZXJpZicsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDEyLCAxNSksXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFwiU1wiIGNvcm5lciAoYm90dG9tIGxlZnQsIGdyZWVuKVxyXG4gICAgZnVuY3Rpb24gY29ybmVyUygpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoc2hvd1NDb3JuZXIob2JqKSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJjb3JuZXJTXCIsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDUwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1MCwgNTApLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1MCwgNTApLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRiBNMCAwIEwwIDQ5IEwxIDUwIEw1MCA1MHpcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBjb2xvclMsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIHNpbmdsZSBvciBkb3VibGUgY2xpY2tcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5oYW5kbGVDb3JuZXJDbGljayhcIlNcIiwgdGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgLy8gZXhwYW5zaW9uIGluZGljYXRvclxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdwb3NpdGlvbicsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG9iai5pc1N1YkdyYXBoRXhwYW5kZWQgPyBuZXcgZ28uUG9pbnQoNCwgNDMpIDogbmV3IGdvLlBvaW50KDUsIDM4KSk7XHJcbiAgICAgICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2FuZ2xlJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAob2JqLmlzU3ViR3JhcGhFeHBhbmRlZCA/IDkwIDogMCk7XHJcbiAgICAgICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUsIDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoXCJGIE0wIDAgTDUgNSBMMCAxMHpcIiwgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogXCIjMzMzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiU1wiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBcIndoaXRlXCIsXHJcbiAgICAgICAgICAgICAgICBmb250OiAnOXB4IHNhbnMtc2VyaWYnLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgxMiwgMjgpLFxyXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzaG93IG9ubHkgd2hlbiBzeXN0ZW0gaXMgY29sbGFwc2VkXHJcbiAgICBmdW5jdGlvbiBzQ29sbGFwc2VkTWFya2VyKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIXNob3dTQ29ybmVyKG9iaikgJiYgb2JqLm1lbWJlclBhcnRzLmNvdW50ID4gMCAmJiAhb2JqLmlzU3ViR3JhcGhFeHBhbmRlZDtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg1LCA4OCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNSwgMTApLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRiBNMCAwIEw1IDUgTDAgMTB6XCIsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJyMzMzMnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXCJSXCIgY29ybmVyIChib3R0b20gcmlnaHQsIGJsdWUpXHJcbiAgICBmdW5jdGlvbiBjb3JuZXJSKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChzaG93UkNvcm5lcihvYmopID8gMSA6IDApO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvcm5lclJcIixcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMTAwLCAxMDApLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJjb3JuZXJSU2hhcGVcIixcclxuICAgICAgICAgICAgICAgIC8vIE5COiB0aGlzIGNvcm5lciBpcyBkb25lIGRpZmZlcmVudGx5IGZyb20gdGhlIG90aGVyczpcclxuICAgICAgICAgICAgICAgIC8vIDEuIHRoZSBvdmVyYWxsIHNoYXBlIGlzIHRoZSBzaXplIG9mIHRoZSB3aG9sZSBzcXVhcmUsIHNvIHRoZSBwb3J0IGZhbGxzIGluIHRoZSBtaWRkbGUgaW5zdGVhZCBvZiB0aGUgY29ybmVyO1xyXG4gICAgICAgICAgICAgICAgLy8gMi4gdGhlIGdlb21ldHJ5IHRyYWNlcyBhcm91bmQgdGhlIGVkZ2VzIG9mIHRoZSB3aG9sZSBzcXVhcmUsIGJlY2F1c2Ugb3RoZXJ3aXNlIHRoZSBsaW5rIGxpbmUgd2lsbFxyXG4gICAgICAgICAgICAgICAgLy8gICAgc2hvdyBpbnNpZGUgdGhlIG1haW4gc3F1YXJlIGlmIGl0J3MgY3Jvc3Npbmcgb25lIG9mIHRoZSBvdGhlciAzIHF1YWRyYW50cyBcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMTAwLCAxMDApLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKFwiRlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIk0wIDAgTDAgMTAwIFwiICsgLy8gdG9wIGxlZnQgdG8gYm90dG9tIGxlZnRcclxuICAgICAgICAgICAgICAgICAgICBcIkw5OSAxMDAgTDEwMCA5OSBMIDEwMCAwIFwiICsgLy8gYm90dG9tL3JpZ2h0IHNpZGVzIChyb3VuZCBib3R0b20gcmlnaHQgY29ybmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIFwiTCAwIDAgTCAxMDAgMCBcIiArIC8vIGJhY2sgdG8gdG9wIGxlZnQgdGhlbiB0b3AgcmlnaHRcclxuICAgICAgICAgICAgICAgICAgICBcIkwgMTAwIDUwIEwgNTAgMTAwIFwiICsgLy8gdG8gbWlkcG9pbnQgb2YgcmlnaHQgc2lkZSwgbWlkcG9pbnQgb2YgYm90dG9tIHNpZGVcclxuICAgICAgICAgICAgICAgICAgICBcIkwwIDEwMHpcIiwgLy8gYm90dG9tIGxlZnQsIHJldHVybiBob21lXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBjb2xvclIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuXHJcbiAgICAgICAgICAgICAgICBwb3J0SWQ6IFwiUlwiLFxyXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlU2VsZk5vZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlRHVwbGljYXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlU2VsZk5vZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZUR1cGxpY2F0ZXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuaGFuZGxlQ29ybmVyQ2xpY2soXCJSXCIsIHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJSXCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IFwid2hpdGVcIixcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICc5cHggc2Fucy1zZXJpZicsXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDgyLCA3OClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGF0dGFjaG1lbnRQYXBlckNsaXAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmouZGF0YS5hdHRhY2htZW50cyAgJiYgb2JqLmRhdGEuYXR0YWNobWVudHMgIT09IHVuZGVmaW5lZCAmJiBvYmouZGF0YS5hdHRhY2htZW50cy5sZW5ndGggPiAwO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnZ2VvbWV0cnknLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ28uR2VvbWV0cnkucGFyc2UocGFwZXJjbGlwU3ZnUGF0aCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdkZXNpcmVkU2l6ZScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZ28uU2l6ZSg1MTIsIDUxMik7IC8vIE5COiB0aGUgdHdvIGljb25zIGRvbid0IHNjYWxlIHRvIHRoZSBzYW1lIHByb3BvcnRpb25zIGZvciBzb21lIHJlYXNvbiAtID8/XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoNDYsIDg1KSxcclxuICAgICAgICAgICAgICAgIHNjYWxlOiAwLjAyLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMCcsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAnIzAwMCcsXHJcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGlwIGNsaWNrZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS50b2dnbGVUYWIobWFwLmdldFVpKCkuVEFCX0lEX0FUVEFDSE1FTlRTKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcEV5ZWJhbGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNQZXJzcGVjdGl2ZVBvaW50KG9iaik7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdnZW9tZXRyeScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnby5HZW9tZXRyeS5wYXJzZShtYXAucElzRXhwYW5kZWQob2JqKSA/IGV5ZVN2Z1BhdGggOiBleWVCbG9ja2VkU3ZnUGF0aCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdkZXNpcmVkU2l6ZScsICcnLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZ28uU2l6ZSg1MTIsIG1hcC5wSXNFeHBhbmRlZChvYmopID8gNDQwIDogNTEyKTsgLy8gTkI6IHRoZSB0d28gaWNvbnMgZG9uJ3Qgc2NhbGUgdG8gdGhlIHNhbWUgcHJvcG9ydGlvbnMgZm9yIHNvbWUgcmVhc29uIC0gPz9cclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg4NywgNCksXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogMC4wMixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogJyMwMDAnLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJyMwMDAnLFxyXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFAgZXhwYW5zaW9uIGluZGljYXRvciAtIHRoaXMgc2hvd3Mgd2hlbiB0aGUgUCBjb3JuZXIgaXMgbm90IHZpc2libGUsIGFuZCBvbmx5IGlmIHRoZSB0aGluZyBpcyBhIHBlcnNwZWN0aXZlIHBvaW50XHJcbiAgICBmdW5jdGlvbiBwb2ludE1hcmtlcigpIHtcclxuICAgICAgICByZXR1cm4gcEV5ZWJhbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQIHZpZXcgaW5kaWNhdG9yXHJcbiAgICBmdW5jdGlvbiB2aWV3TWFya2VyKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSwgXCJCb3JkZXJcIixcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2ZpbGwnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Vmlld01hcmtlckZpbGwob2JqKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMTgsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFZpZXdNYXJrZXJGaWxsKG9iaikge1xyXG4gICAgICAgIHZhciB3ZWlnaHQgPSBtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuZ2V0UGVyc3BlY3RpdmVWaWV3V2VpZ2h0KG9iaik7XHJcblxyXG4gICAgICAgIGlmICh3ZWlnaHQgPT0gMykge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sb3JQRGFyaztcclxuICAgICAgICB9IGVsc2UgaWYgKHdlaWdodCA9PSAyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xvclA7XHJcbiAgICAgICAgfSBlbHNlIGlmICh3ZWlnaHQgPT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sb3JQTGlnaHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNwYXJlbnRcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXCJQXCIgY29ybmVyICh0b3AgcmlnaHQsIG9yYW5nZSlcclxuICAgIGZ1bmN0aW9uIGNvcm5lclAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNob3dQQ29ybmVyKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY29ybmVyUFwiLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvcm5lclBTaGFwZVwiLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXHJcbiAgICAgICAgICAgICAgICAvLyBOQjogdGhpcyBnZW9tZXRyeSBjb3ZlcnMgdGhlIHdob2xlIHNxdWFyZTsgc2VlIG5vdGUgYWJvdmUgZm9yIGNvcm5lclJcclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBnby5HZW9tZXRyeS5wYXJzZShcIkZcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJNMCAwIEwwIDEwMCBMMTAwIDEwMFwiICsgLy8gdG9wIGxlZnQgdG8gYm90dG9tIGxlZnQgdG8gYm90dG9tIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgXCJMMTAwIDEgTDk5IDAgTDAgMFwiICsgLy8gcmlnaHQvdG9wIHNpZGVzIChyb3VuZCB0b3AgcmlnaHQgY29ybmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIFwiTCA1MCAwIEwgMTAwIDUwIFwiICsgLy8gdG8gbWlkcG9pbnQgb2YgdG9wIHNpZGUsIG1pZHBvaW50IG9mIHJpZ2h0IHNpZGVcclxuICAgICAgICAgICAgICAgICAgICBcIkwxMDAgMTAwIDAgMTAwelwiLCAvLyBib3R0b20gcmlnaHQsIGJvdHRvbSBsZWZ0LCByZXR1cm4gaG9tZVxyXG4gICAgICAgICAgICAgICAgICAgIHRydWUpLFxyXG5cclxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUCxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG5cclxuICAgICAgICAgICAgICAgIHBvcnRJZDogXCJQXCIsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVEdXBsaWNhdGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlU2VsZk5vZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZUR1cGxpY2F0ZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdG9NYXhMaW5rczogMSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIHNpbmdsZSBvciBkb3VibGUgY2xpY2tcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5oYW5kbGVDb3JuZXJDbGljayhcIlBcIiwgdGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgcEV5ZWJhbGwoKSwgLy8gUCBleHBhbnNpb24gaW5kaWNhdG9yXHJcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJQXCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IFwid2hpdGVcIixcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICc5cHggc2Fucy1zZXJpZicsXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDgxLCAxNSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1haW5Cb3JkZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLCBcIkJvcmRlclwiLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc3Ryb2tlJywgJycsIGdldEdyb3VwU2VsZWN0aW9uU3Ryb2tlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc3Ryb2tlV2lkdGgnLCAnJywgZ2V0R3JvdXBTZWxlY3Rpb25TdHJva2VXaWR0aCkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJtYWluYXJlYVwiLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgIGZpbGw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAvL3BvcnRJZDogXCJcIixcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlRHVwbGljYXRlczogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0gaGFuZGxlcnMgZm9yIG1vdXNlIGRyYWcvZHJvcCBhY3Rpb25zIG9uIGdyb3Vwcywgd2hpY2ggbmVlZCB0byBiZSByZXBsaWNhdGVkIG9uIGRpZmZlcmVudCB0YXJnZXQgcGFydHMgLS0tLS0tLVxyXG5cclxuICAgIC8vIHBvc2l0aW9uIGlzIG1hcC5MRUZULCBudWxsLCBvciBtYXAuUklHSFRcclxuICAgIGZ1bmN0aW9uIGdldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbW91c2VEcmFnRW50ZXIsIGUuZHA6ICcgKyBldmVudC5kb2N1bWVudFBvaW50ICsgJywgdGFyZ2V0LnBhcnQ6ICcgKyB0YXJnZXQucGFydCArICcsIHRhcmdldCBib3VuZHM6ICcgKyB0YXJnZXQuYWN0dWFsQm91bmRzKTtcclxuICAgICAgICAgICAgbWFwLmdldFVpKCkuZHJhZ1RhcmdldEdyb3VwID0gdGFyZ2V0LnBhcnQ7XHJcbiAgICAgICAgICAgIG1hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIgPSBmdW5jdGlvbihldmVudCwgdGFyZ2V0LCBvYmoyKSB7XHJcbiAgICAgICAgbWFwLmdldFVpKCkuZHJhZ1RhcmdldEdyb3VwID0gbnVsbDtcclxuICAgICAgICBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0UG9zaXRpb24gPSBudWxsO1xyXG4gICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0R3JvdXBNb3VzZURyb3BIYW5kbGVyKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50LCBkcm9wVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGhhbmRsZUdyb3VwTW91c2VEcm9wKGV2ZW50LCBkcm9wVGFyZ2V0LCBwb3NpdGlvbik7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZ3JvdXBDbGlja0hhbmRsZXIgPSBmdW5jdGlvbihldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgLy8gaGFuZGxlIHNpbmdsZSBvciBkb3VibGUgY2xpY2tcclxuICAgICAgICBtYXAuZ2V0VWkoKS5oYW5kbGVDb3JuZXJDbGljayhcIlwiLCB0YXJnZXQpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gdGFyZ2V0cyBmb3IgZHJhZ2dpbmcgdG8gRCBvciBTIC0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gZHJhZ0Fib3ZlVGFyZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgIG1vdXNlRHJhZ0VudGVyOiBnZXRHcm91cE1vdXNlRHJhZ0VudGVySGFuZGxlcihtYXAuTEVGVCksXHJcbiAgICAgICAgICAgICAgICBtb3VzZURyYWdMZWF2ZTogZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIsXHJcbiAgICAgICAgICAgICAgICBtb3VzZURyb3A6IGdldEdyb3VwTW91c2VEcm9wSGFuZGxlcihtYXAuTEVGVCksXHJcbiAgICAgICAgICAgICAgICBjbGljazogZ3JvdXBDbGlja0hhbmRsZXJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gZHJhZyB0YXJnZXQgcmVnaW9uXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyNSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50J1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgLy8gZHJhZyBpbmRpY2F0b3IgYmFyXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIkJvcmRlclwiLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihvYmoucGFydCwgbWFwLkxFRlQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJyMwMDAnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRyYWdJbnRvVGFyZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMjUpLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA1MCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIobnVsbCksXHJcbiAgICAgICAgICAgICAgICBtb3VzZURyYWdMZWF2ZTogZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIsXHJcbiAgICAgICAgICAgICAgICBtb3VzZURyb3A6IGdldEdyb3VwTW91c2VEcm9wSGFuZGxlcihudWxsKSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBncm91cENsaWNrSGFuZGxlclxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJSZWN0YW5nbGVcIiwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNTAsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRyYWdCZWxvd1RhcmdldCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDc1KSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMjUsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcmFnRW50ZXI6IGdldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKG1hcC5SSUdIVCksXHJcbiAgICAgICAgICAgICAgICBtb3VzZURyYWdMZWF2ZTogZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIsXHJcbiAgICAgICAgICAgICAgICBtb3VzZURyb3A6IGdldEdyb3VwTW91c2VEcm9wSGFuZGxlcihtYXAuUklHSFQpLFxyXG4gICAgICAgICAgICAgICAgY2xpY2s6IGdyb3VwQ2xpY2tIYW5kbGVyXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGRyYWcgdGFyZ2V0IHJlZ2lvblxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJSZWN0YW5nbGVcIiwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMjUsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCdcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIC8vIGRyYWcgaW5kaWNhdG9yIGJhclxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJCb3JkZXJcIixcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2Yob2JqLnBhcnQsIG1hcC5SSUdIVCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMTUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJyMwMDAnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgdGhlIFRleHRCbG9jayBmb3IgdGhlIGdyb3VwIHRpdGxlLCBmb3IgdXNlIGluIHRoZSBtYWluIGdyb3VwIHRlbXBsYXRlLCBpbnNpZGUgdGhlIGJveC5cclxuICAgIGZ1bmN0aW9uIGdyb3VwSW50ZXJuYWxUZXh0QmxvY2soKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Ib3Jpem9udGFsLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDEwMCwgMTAwKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInRleHRcIiwgXCJ0ZXh0XCIpLm1ha2VUd29XYXkoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwidmlzaWJsZVwiLCBcIlwiLCBmdW5jdGlvbihncm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsd2F5cyBzaG93IHRleHQgaW5zaWRlIGJveCBmb3IgUi10aGluZ3MsIGJlY2F1c2UgZXh0ZXJuYWwgdGV4dCB3aWxsIHRocm93IG9mZiBsYXlvdXRcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFwLmdldExheW91dHMoKS5pc05vdFdpdGhpbkludmVudG9yeUxheW91dChncm91cCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmdldExheW91dHMoKS5pc1JUaGluZ1dpdGhpbkludmVudG9yeUxheW91dChncm91cCk7XHJcbiAgICAgICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDgwLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgYWxpZ25tZW50OiBnby5TcG90LkNlbnRlcixcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9udDogJzEwcHggc2Fucy1zZXJpZicsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNNdWx0aWxpbmU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgd3JhcDogZ28uVGV4dEJsb2NrLldyYXBEZXNpcmVkU2l6ZSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbW91c2VEcmFnRW50ZXI6IGdldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKG51bGwpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlRHJhZ0xlYXZlOiBncm91cE1vdXNlRHJhZ0xlYXZlSGFuZGxlcixcclxuICAgICAgICAgICAgICAgICAgICBtb3VzZURyb3A6IGdldEdyb3VwTW91c2VEcm9wSGFuZGxlcihudWxsKSxcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZ3JvdXBDbGlja0hhbmRsZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dENsaWNrOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhncm91cEluZm8odGFyZ2V0LnBhcnQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJucyBhIFRleHRCbG9jayBmb3IgdGhlIGdyb3VwIHRpdGxlLCBmb3IgdXNlIGluIHRoZSBtYWluIGdyb3VwIHRlbXBsYXRlLCBvbiB0aGUgbGVmdCBvciByaWdodC5cclxuICAgIC8vIHZpc2libGVGbiBpcyBhIGNhbGxiYWNrIHRvIGJlIGJvdW5kIHRvIHRoZSB2aXNpYmlsaXR5IGF0dHJpYnV0ZSBvZiB0aGUgVGV4dEJsb2NrLlxyXG4gICAgLy8gdGV4dEFsaWduIGlzICdsZWZ0JyBvciAncmlnaHQnLlxyXG4gICAgZnVuY3Rpb24gZ3JvdXBFeHRlcm5hbFRleHRCbG9jayh2aXNpYmxlRm4sIHRleHRBbGlnbikge1xyXG4gICAgICAgIHJldHVybiBtayhnby5UZXh0QmxvY2ssXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwidGV4dFwiLCBcInRleHRcIikubWFrZVR3b1dheSgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInZpc2libGVcIiwgXCJcIiwgdmlzaWJsZUZuKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInNjYWxlXCIsIFwiXCIsIG1hcC5nZXRMYXlvdXRzKCkuZ2V0RXh0ZXJuYWxUZXh0U2NhbGUpLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdleHRlcm5hbHRleHQtJyArIHRleHRBbGlnbiwgLy8gTkI6IHRoaXMgc2NyZXdzIHVwIGxheW91dHMgZm9yIHNvbWUgcmVhc29uIC0gPz9cclxuICAgICAgICAgICAgICAgIHRleHRBbGlnbjogdGV4dEFsaWduLFxyXG4gICAgICAgICAgICAgICAgbWFyZ2luOiA1LFxyXG4gICAgICAgICAgICAgICAgZm9udDogJzEwcHggc2Fucy1zZXJpZicsXHJcbiAgICAgICAgICAgICAgICBpc011bHRpbGluZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBncm91cENsaWNrSGFuZGxlclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBncm91cC9UaGluZyB0ZW1wbGF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuZ3JvdXBUZW1wbGF0ZSA9XHJcbiAgICAgICAgbWsoZ28uR3JvdXAsIGdvLlBhbmVsLlZlcnRpY2FsLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcImxheW91dFwiLCBcImxheW91dFwiLCBmdW5jdGlvbihsYXlvdXROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFwLmdldExheW91dHMoKS5nZXRMYXlvdXQobGF5b3V0TmFtZSk7XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcIm1vdmFibGVcIiwgXCJcIiwgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIW9iai5pc0xpbmtMYWJlbDtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJpc1N1YkdyYXBoRXhwYW5kZWRcIiwgXCJzRXhwYW5kZWRcIiksXHJcbiAgICAgICAgICAgIC8vIGRpbSB0aGUgdGhpbmcgaWYgaXQncyBiZWluZyBkcmFnZ2VkIG92ZXIgYW5vdGhlciB0aGluZyAoZHJvcCB0byBzaXN0ZXIvY2hpbGQpXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChvYmouaXNTZWxlY3RlZCAmJiBtYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgPyAwLjI1IDogMSk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uT2JqZWN0TmFtZTogXCJtYWlucGFuZWxcIixcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uU3BvdDogZ28uU3BvdC5Ub3BMZWZ0LFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpc1N1YkdyYXBoRXhwYW5kZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBsYXllck5hbWU6ICdGb3JlZ3JvdW5kJyxcclxuICAgICAgICAgICAgICAgIC8vIGhpZ2hsaWdodCBjb3JuZXJzXHJcbiAgICAgICAgICAgICAgICBtb3VzZUVudGVyOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0LCBvYmoyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXAgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIC8vIHVuaGlnaGxpZ2h0IGNvcm5lcnNcclxuICAgICAgICAgICAgICAgIG1vdXNlTGVhdmU6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gY29udGFpbmluZ0dyb3VwQ2hhbmdlZDogZnVuY3Rpb24ocGFydCwgb2xkZ3JvdXAsIG5ld2dyb3VwKSB7IFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIG1hcC5nZXREaWFncmFtKCkubW9kZWwuc2V0RGF0YVByb3BlcnR5KHBhcnQuZGF0YSwgJ2xldmVsJywgbWFwLmNvbXB1dGVMZXZlbChwYXJ0KSk7IFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIC8vcGFydC51cGRhdGVUYXJnZXRCaW5kaW5ncygpOyAgIFxyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5QYW5lbCwgZ28uUGFuZWwuSG9yaXpvbnRhbCxcclxuICAgICAgICAgICAgICAgIGdyb3VwRXh0ZXJuYWxUZXh0QmxvY2sobWFwLmdldExheW91dHMoKS5zaG93TGVmdFRleHRCbG9jaywgJ3JpZ2h0JyksXHJcbiAgICAgICAgICAgICAgICBtayhnby5QYW5lbCwgZ28uUGFuZWwuUG9zaXRpb24sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJtYWlucGFuZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldFNjYWxlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRyYWcgYXJlYVxyXG4gICAgICAgICAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiZHJhZ2FyZWFcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IHNlbGYuZ3JvdXBGaWxsQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcIm1vdmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hvdyBkZWJ1ZyBpbmZvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhncm91cEluZm8odGFyZ2V0LnBhcnQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld01hcmtlcigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFnQWJvdmVUYXJnZXQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0ludG9UYXJnZXQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0JlbG93VGFyZ2V0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSW50ZXJuYWxUZXh0QmxvY2soKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ybmVyRCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkRmxhZ01hcmtlcigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3JuZXJTKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNDb2xsYXBzZWRNYXJrZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ybmVyUigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludE1hcmtlcigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3JuZXJQKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRQYXBlckNsaXAoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFpbkJvcmRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGdyb3VwRXh0ZXJuYWxUZXh0QmxvY2sobWFwLmdldExheW91dHMoKS5zaG93UmlnaHRUZXh0QmxvY2ssICdsZWZ0JylcclxuICAgICAgICAgICAgKSxcclxuXHJcbiAgICAgICAgICAgIC8vIHRoZSBwbGFjZWhvbGRlciBub3JtYWxseSBob2xkcyB0aGUgY2hpbGQgbm9kZXMsIGJ1dCB3ZSBqdXN0IHVzZSBhIGR1bW15IHBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcInBsYWNlaG9sZGVyXCIsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBcInRyYW5zcGFyZW50XCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMCwgMClcclxuICAgICAgICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSBsaW5rIHRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMubGlua1RlbXBsYXRlID1cclxuICAgICAgICBtayhnby5MaW5rLCB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25BZG9ybmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGxheWVyTmFtZTogJycsXHJcbiAgICAgICAgICAgICAgICByb3V0aW5nOiBnby5MaW5rLk5vcm1hbCxcclxuICAgICAgICAgICAgICAgIHJlbGlua2FibGVGcm9tOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVsaW5rYWJsZVRvOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbW91c2VFbnRlcjogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCwgb2JqMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLm1vdXNlT3ZlckxpbmsgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1vdXNlTGVhdmU6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJMaW5rID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcmFnRW50ZXI6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQsIGRyYWdPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJMaW5rID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtb3VzZURyYWdMZWF2ZTogZnVuY3Rpb24oZXZlbnQsIGRyb3BUYXJnZXQsIGRyYWdPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5tb3VzZU92ZXJMaW5rID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbW91c2VEcm9wOiBmdW5jdGlvbihldmVudCwgZHJvcFRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IG1hcC5nZXREaWFncmFtKCkuc2VsZWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cyAmJiBwYXJ0cy5jb3VudCA9PSAxICYmIHBhcnRzLmZpcnN0KCkgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuYWRkVGhpbmdBc1JUaGluZyhwYXJ0cy5maXJzdCgpLCBkcm9wVGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZG91YmxlQ2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuY3JlYXRlUlRoaW5nKHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY29udGV4dENsaWNrOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobGlua0luZm8odGFyZ2V0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2UpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInN0cm9rZVdpZHRoXCIsIFwiXCIsIG1hcC5nZXRMYXlvdXRzKCkuZ2V0TGlua1N0cm9rZVdpZHRoKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJMSU5LU0hBUEVcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApLFxyXG5cclxuICAgICAgICAgICAgLy8gc2hvdyB0by9mcm9tIGFycm93aGVhZHMgYmFzZWQgb24gbGluayBcInR5cGVcIiBhdHRyaWJ1dGVcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tQXJyb3c6IFwiQmFja3dhcmRcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2UpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInNjYWxlXCIsIFwiXCIsIG1hcC5nZXRMYXlvdXRzKCkuZ2V0QXJyb3doZWFkU2NhbGUpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICd0eXBlJywgZnVuY3Rpb24odCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09ICdmcm9tJyB8fCB0ID09ICd0b0Zyb20nO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgICAgICB0b0Fycm93OiBcIlN0YW5kYXJkXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc3Ryb2tlJywgJycsIGdldFJMaW5rU2VsZWN0aW9uU3Ryb2tlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldEFycm93aGVhZFNjYWxlKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAndHlwZScsIGZ1bmN0aW9uKHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PSAndG8nIHx8IHQgPT0gJ3RvRnJvbSc7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApLFxyXG5cclxuICAgICAgICAgICAgbWsoZ28uUGFuZWwsIGdvLlBhbmVsLkF1dG8sIC8vIGxpbmsgbGFiZWwgXCJrbm9iXCJcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdvcGFjaXR5JywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoc2hvd0tub2Iob2JqKSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInNjYWxlXCIsIFwiXCIsIG1hcC5nZXRMYXlvdXRzKCkuZ2V0QXJyb3doZWFkU2NhbGUpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZ3VyZTogXCJFbGxpcHNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogY29sb3JELFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogY29sb3JELFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMixcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEyXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMucExpbmtUZW1wbGF0ZSA9XHJcbiAgICAgICAgbWsoZ28uTGluayxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNlbGYuc2hvd1BMaW5rKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbkFkb3JuZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbGF5ZXJOYW1lOiAnQmFja2dyb3VuZCcsIC8vIG1ha2UgUCBsaW5rcyBmYWxsIGJlaGluZCBSIGxpbmtzXHJcbiAgICAgICAgICAgICAgICByb3V0aW5nOiBnby5MaW5rLk5vcm1hbCxcclxuICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxpbmtJbmZvKHRhcmdldCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInN0cm9rZVdpZHRoXCIsIFwiXCIsIG1hcC5nZXRMYXlvdXRzKCkuZ2V0TGlua1N0cm9rZVdpZHRoKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJMSU5LU0hBUEVcIixcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGNvbG9yUExpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUExpZ2h0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICAgICAgLy8gbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIChzZWxmLnNob3dQRG90KG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgICAgICAvLyB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJzY2FsZVwiLCBcIlwiLCBtYXAuZ2V0TGF5b3V0cygpLmdldEFycm93aGVhZFNjYWxlKS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9BcnJvdzogXCJDaXJjbGVcIixcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IGNvbG9yUExpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUExpZ2h0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5kTGlua1RlbXBsYXRlID1cclxuICAgICAgICBtayhnby5MaW5rLCB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RhYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJMSU5LU0hBUEVcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSB0ZW1wb3JhcnkgbGluay9ub2RlIHRlbXBsYXRlcywgZm9yIHVzZSB3aGVuIGRyYWdnaW5nIHRvIGNyZWF0ZSBSL1AgbGluZXMgLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGRlZmluZSBpbml0aWFsIHRlbXBvcmFyeSBsaW5rIHRlbXBsYXRlcyAtIHRoZXNlIHdpbGwgYmUgbW9kaWZpZWQgd2hlbiBoYW5kbGVQb3J0VGFyZ2V0ZWQgaXMgY2FsbGVkXHJcbiAgICB0aGlzLnNldFRlbXBvcmFyeUxpbmtUZW1wbGF0ZXMgPSBmdW5jdGlvbih0b29sKSB7XHJcbiAgICAgICAgdG9vbC50ZW1wb3JhcnlMaW5rID0gbWFrZVRlbXBvcmFyeUxpbmtUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRvb2wudGVtcG9yYXJ5RnJvbU5vZGUgPSBtYWtlVGVtcG9yYXJ5Tm9kZVRlbXBsYXRlKCk7XHJcbiAgICAgICAgdG9vbC50ZW1wb3JhcnlUb05vZGUgPSBtYWtlVGVtcG9yYXJ5Tm9kZVRlbXBsYXRlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIG1ha2VUZW1wb3JhcnlMaW5rVGVtcGxhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLkxpbmssIHtcclxuICAgICAgICAgICAgICAgIGxheWVyTmFtZTogXCJUb29sXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdsaW5rc2hhcGUnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1ha2VUZW1wb3JhcnlOb2RlVGVtcGxhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLkdyb3VwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXllck5hbWU6IFwiVG9vbFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIkJvcmRlclwiLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnYm9yZGVyJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAzLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogbnVsbFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2hhbmdlIGNvbG9yIGFuZCBwb3J0SWQgb2YgdGVtcG9yYXJ5IGxpbmsgdGVtcGxhdGVzIGJhc2VkIG9uIHRoZSB0eXBlIG9mIGxpbmsgYmVpbmcgY3JlYXRlZC9yZWxpbmtlZFxyXG4gICAgdGhpcy5oYW5kbGVQb3J0VGFyZ2V0ZWQgPSBmdW5jdGlvbih0b29sLCByZWFsbm9kZSwgcmVhbHBvcnQsIHRlbXBub2RlLCB0ZW1wcG9ydCwgdG9lbmQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygncG9ydFRhcmdldGVkLCByZWFscG9ydDogJyArIChyZWFscG9ydCA/IHJlYWxwb3J0Lm5hbWUgOiAnJykgKyAnLCB0ZW1wcG9ydDogJyArICh0ZW1wcG9ydCA/IHRlbXBwb3J0Lm5hbWUgOiAnJykgXHJcbiAgICAgICAgLy8gICAgICsgJywgb3JpZ2luYWxGcm9tUG9ydDogJyArIChsdG9vbC5vcmlnaW5hbEZyb21Qb3J0ID8gbHRvb2wub3JpZ2luYWxGcm9tUG9ydC5uYW1lIDogJycpICsgJywgb3JpZ2luYWxUb1BvcnQ6ICcgKyBsdG9vbC5vcmlnaW5hbFRvUG9ydCk7XHJcblxyXG4gICAgICAgIHZhciBsaW5rU2hhcGUgPSB0b29sLnRlbXBvcmFyeUxpbmsuZmluZE9iamVjdCgnbGlua3NoYXBlJyk7XHJcbiAgICAgICAgdmFyIGZyb21Cb3JkZXIgPSB0b29sLnRlbXBvcmFyeUZyb21Ob2RlLmZpbmRPYmplY3QoJ2JvcmRlcicpO1xyXG4gICAgICAgIHZhciB0b0JvcmRlciA9IHRvb2wudGVtcG9yYXJ5VG9Ob2RlLmZpbmRPYmplY3QoJ2JvcmRlcicpO1xyXG5cclxuICAgICAgICBpZiAodG9vbC5vcmlnaW5hbEZyb21Qb3J0ICYmIHRvb2wub3JpZ2luYWxGcm9tUG9ydC5uYW1lID09ICdjb3JuZXJQU2hhcGUnKSB7XHJcbiAgICAgICAgICAgIGxpbmtTaGFwZS5zdHJva2UgPSBjb2xvclA7XHJcbiAgICAgICAgICAgIGZyb21Cb3JkZXIuc3Ryb2tlID0gY29sb3JQO1xyXG4gICAgICAgICAgICB0b0JvcmRlci5zdHJva2UgPSBjb2xvclA7XHJcbiAgICAgICAgICAgIGZyb21Cb3JkZXIucG9ydElkID0gJ1AnO1xyXG4gICAgICAgICAgICB0b0JvcmRlci5wb3J0SWQgPSAnUCc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0b29sLm9yaWdpbmFsRnJvbVBvcnQgJiYgdG9vbC5vcmlnaW5hbEZyb21Qb3J0Lm5hbWUgPT0gJ2Nvcm5lclJTaGFwZScpIHtcclxuICAgICAgICAgICAgbGlua1NoYXBlLnN0cm9rZSA9IGNvbG9yUjtcclxuICAgICAgICAgICAgZnJvbUJvcmRlci5zdHJva2UgPSBjb2xvclI7XHJcbiAgICAgICAgICAgIHRvQm9yZGVyLnN0cm9rZSA9IGNvbG9yUjtcclxuICAgICAgICAgICAgZnJvbUJvcmRlci5wb3J0SWQgPSAnUic7XHJcbiAgICAgICAgICAgIHRvQm9yZGVyLnBvcnRJZCA9ICdSJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGVtcG5vZGUuc2NhbGUgPSBtYXAuZ2V0TGF5b3V0cygpLmdldFNjYWxlKHJlYWxub2RlKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcHJldmVudCBkdXBsaWNhdGUgJ1AnIGxpbmtzIGluIHRoZSBzYW1lIGRpcmVjdGlvbiBiZXR3ZWVuIHRoZSBzYW1lIHR3byB0aGluZ3NcclxuICAgIHRoaXMudmFsaWRhdGVMaW5rID0gZnVuY3Rpb24oZnJvbU5vZGUsIGZyb21Qb3J0LCB0b05vZGUsIHRvUG9ydCkge1xyXG4gICAgICAgIC8vIHRoZSBQIHBvcnQgaXMgb24gdG9wIG9mIHRoZSBSIHBvcnQsIHNvIGJvdGggUCBhbmQgUiBsaW5rcyBnZXQgdGhlIHRvUG9ydCBzZXQgdG8gUiBieSBkZWZhdWx0LlxyXG4gICAgICAgIGlmIChmcm9tUG9ydC5wb3J0SWQgPT0gJ1AnKSB7XHJcbiAgICAgICAgICAgIC8vIE5COiBmaW5kTGlua3NUbyB3b3VsZCBiZSBzaW1wbGVyLCBidXQgaXQgZG9lc24ndCBzZWVtIHRvIHdvcmsuLi4gKD8pXHJcbiAgICAgICAgICAgIHZhciBwTGlua3MgPSB0b05vZGUuZmluZExpbmtzQmV0d2Vlbihmcm9tTm9kZSwgJ1AnLCAnUCcpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd2YWxpZGF0ZUxpbmssIHBMaW5rcyBmcm9tICcgKyBmcm9tTm9kZSArICc6JyArIGZyb21Qb3J0ICsgJyB0byAnICsgdG9Ob2RlICsgJzonICsgdG9Qb3J0ICsgJyA9ICcgKyBwTGlua3MuY291bnQpO1xyXG4gICAgICAgICAgICBpZiAocExpbmtzLmNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocExpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwTGluayA9IHBMaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocExpbmsuZnJvbU5vZGUgPT0gZnJvbU5vZGUgJiYgcExpbmsudG9Ob2RlID09IHRvTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSBzbGlkZSBub2RlIHRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShhbGlnbm1lbnQpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwiZGVzaXJlZFNpemVcIiwgXCJcIiwgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2xpZGUgPSBvYmouYWRvcm5lZE9iamVjdDtcclxuICAgICAgICAgICAgICAgIHZhciBzaXplID0gTWF0aC5taW4oc2xpZGUud2lkdGgsIHNsaWRlLmhlaWdodCkgKiAuMDU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGdvLlNpemUoc2l6ZSwgc2l6ZSk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogYWxpZ25tZW50LFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcImNvbC1yZXNpemVcIixcclxuICAgICAgICAgICAgICAgIGZpbGw6ICdyZ2JhKDI1MSwxNzAsNTQsMSknLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2xpZGVUZW1wbGF0ZSA9XHJcbiAgICAgICAgbWsoZ28uTm9kZSwgZ28uUGFuZWwuQXV0byxcclxuICAgICAgICAgICAgLy8gTkI6IHVubGlrZSBncm91cHMsIHNsaWRlcyBqdXN0IHVzZSBhIG5vcm1hbCAyLXdheSBsb2NhdGlvbiBiaW5kaW5nXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwibG9jYXRpb25cIiwgXCJsb2NcIiwgZ28uUG9pbnQucGFyc2UpLm1ha2VUd29XYXkoZ28uUG9pbnQuc3RyaW5naWZ5KSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJ3aWR0aFwiLCBcIndpZHRoXCIpLm1ha2VUd29XYXkoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJoZWlnaHRcIiwgXCJoZWlnaHRcIikubWFrZVR3b1dheSgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInZpc2libGVcIiwgXCJcIiwgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmRhdGEuaGFzUmVnaW9uICYmXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuY3VycmVudFRhYklzKG1hcC5nZXRVaSgpLlRBQl9JRF9QUkVTRU5URVIpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIW1hcC5nZXRQcmVzZW50ZXIoKS5pc1ByZXNlbnRpbmcgJiZcclxuICAgICAgICAgICAgICAgICAgICAhbWFwLmdldFByZXNlbnRlcigpLmlzQ3JlYXRpbmdUaHVtYm5haWwgJiZcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0UHJlc2VudGVyKCkuY3VycmVudFNsaWRlSW5kZXggPT0gb2JqLmRhdGEuaW5kZXg7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uU3BvdDogZ28uU3BvdC5Ub3BMZWZ0LFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICByZXNpemVBZG9ybm1lbnRUZW1wbGF0ZTogbWsoZ28uQWRvcm5tZW50LCBcIlNwb3RcIixcclxuICAgICAgICAgICAgICAgICAgICBtayhnby5QbGFjZWhvbGRlciksIC8vIHRha2VzIHNpemUgYW5kIHBvc2l0aW9uIG9mIGFkb3JuZWQgb2JqZWN0ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlRvcExlZnQpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuVG9wKSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlRvcFJpZ2h0KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlJpZ2h0KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LkJvdHRvbVJpZ2h0KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LkJvdHRvbSksXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Cb3R0b21MZWZ0KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LkxlZnQpXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMCxcclxuICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vZGVJbmZvKHRhcmdldC5wYXJ0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJSZWN0YW5nbGVcIiwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJzbGlkZWJvcmRlclwiLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJ3JnYmEoMjUxLDE3MCw1NCwuMSknLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gZXhwb3J0IGZvb3RlciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gTkI6IHRoaXMgaXMgbm90IGEgdGVtcGxhdGUgcGVyIHNlLCBpbiB0aGF0IGl0IGlzIGFkZGVkIHRvIHRoZSBkaWFncmFtIFxyXG4gICAgLy8gc3RhdGljYWxseSwgcmF0aGVyIHRoYW4gYmVpbmcgYm91bmQgdG8gc29tZXRoaW5nIGluIHRoZSBtb2RlbC5cclxuICAgIC8vIEJ1dCB3ZSBwdXQgaXQgaGVyZSBiZWNhdXNlIGl0IGlzIGFib3V0IGNyZWF0aW5nIHBhcnRzIGFuZCBzdHVmZi5cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVFeHBvcnRGb290ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLk5vZGUsIGdvLlBhbmVsLlNwb3QsIHtcclxuICAgICAgICAgICAgICAgIGxheWVyTmFtZTogJ0ZvcmVncm91bmQnLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIHNjYWxlOiAxLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGFibGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCBcIlJlY3RhbmdsZVwiLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcInJlY3RhbmdsZVwiLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA2MCxcclxuICAgICAgICAgICAgICAgIGZpbGw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG1rKGdvLlBpY3R1cmUsIHtcclxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ2Fzc2V0cy9pbWcvbWV0YW1hcC1sb2dvLTUwLnBuZycsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuVG9wTGVmdCxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LlRvcExlZnQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTk1LFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA1MFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIm1ldGFtYXAuY2FicmVyYXJlc2VhcmNoLm9yZ1wiLFxyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50OiBnby5TcG90LkJvdHRvbUxlZnQsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnRGb2N1czogZ28uU3BvdC5Cb3R0b21MZWZ0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDIwMFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIm1hcFRpdGxlXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuVG9wUmlnaHQsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnRGb2N1czogZ28uU3BvdC5Ub3BSaWdodCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAzMDBcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG1rKGdvLlRleHRCbG9jaywge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJhdXRob3JOYW1lXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgdGV4dEFsaWduOiBcInJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuQm90dG9tUmlnaHQsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnRGb2N1czogZ28uU3BvdC5Cb3R0b21SaWdodCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAzMDBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNyZWF0ZXMgb3IgcmVmcmVzaGVzIHRoZSBmb290ZXIgbG9nby90ZXh0IHRoYXQgaXMgZGlzcGxheWVkIGluIHRoZSBpbWFnZSBleHBvcnRcclxuICAgIHRoaXMuYWRkRXhwb3J0Rm9vdGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCFfZXhwb3J0Rm9vdGVyKSB7XHJcbiAgICAgICAgICAgIF9leHBvcnRGb290ZXIgPSBjcmVhdGVFeHBvcnRGb290ZXIoKTtcclxuICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS5hZGQoX2V4cG9ydEZvb3Rlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNob3dFeHBvcnRGb290ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgcmVjdCA9IG1hcC5jb21wdXRlTWFwQm91bmRzKCk7XHJcbiAgICAgICAgLy8gcHV0IGZvb3RlciBhdCBsZWFzdCAxMDAgcHggYmVsb3cgYm90dG9tIG9mIG1hcDsgbWFrZSBpdCBhdCBsZWFzdCA1MDBweCB3aWRlXHJcbiAgICAgICAgdmFyIHggPSByZWN0Lng7XHJcbiAgICAgICAgdmFyIHkgPSByZWN0LnkgKyByZWN0LmhlaWdodCArIE1hdGgubWF4KDEwMCwgcmVjdC5oZWlnaHQgLyA1KTtcclxuICAgICAgICB2YXIgdyA9IE1hdGgubWF4KDUwMCwgcmVjdC53aWR0aCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0V4cG9ydEZvb3RlciwgYm91bmRzIHJlY3Q6ICcgKyByZWN0ICsgJywgdzogJyArIHcpO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIubG9jYXRpb24gPSBuZXcgZ28uUG9pbnQoeCwgeSk7XHJcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5maW5kT2JqZWN0KFwicmVjdGFuZ2xlXCIpLndpZHRoID0gdztcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLmZpbmRPYmplY3QoXCJtYXBUaXRsZVwiKS50ZXh0ID0gXCJNYXAgVGl0bGU6IFwiICsgJHNjb3BlLm1hcFRpdGxlO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIuZmluZE9iamVjdChcImF1dGhvck5hbWVcIikudGV4dCA9IFwiQXV0aG9yOiBcIiArICRzY29wZS51c2VyTmFtZTtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLm9wYWNpdHkgPSAxO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIuaW52YWxpZGF0ZUxheW91dCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhpZGVFeHBvcnRGb290ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLm9wYWNpdHkgPSAwO1xyXG4gICAgfTtcclxuXHJcbn07IiwiXHJcblNhbmRiYW5rRWRpdG9yLlRlc3RzID0gZnVuY3Rpb24gKCRzY29wZSwgbWFwKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMuVEVTVF9TVEFUVVNfTk9UX1JVTiA9ICdub3QtcnVuJztcclxuICAgIHRoaXMuVEVTVF9TVEFUVVNfUEFTU0VEID0gJ3Bhc3NlZCc7XHJcbiAgICB0aGlzLlRFU1RfU1RBVFVTX0VYQU1JTkUgPSAnZXhhbWluZSc7XHJcbiAgICB0aGlzLlRFU1RfU1RBVFVTX0ZBSUxFRCA9ICdmYWlsZWQnO1xyXG5cclxuICAgIHRoaXMuY3VycmVudFRlc3QgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5ydW5UZXN0ID0gZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgICRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAgICAgdmFyIHRlc3QgPSBfLmZpbmRXaGVyZShzZWxmLnRlc3RzLCB7IG5hbWU6IG5hbWUgfSk7XHJcbiAgICAgICAgICAgIHRlc3Quc3RhdHVzID0gc2VsZi5URVNUX1NUQVRVU19OT1RfUlVOO1xyXG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRUZXN0ID0gdGVzdDtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jbGVhcigpO1xyXG4gICAgICAgICAgICB0ZXN0LnJ1bihkaWFncmFtKTtcclxuICAgICAgICAgICAgaWYgKHRlc3QuY2hlY2sgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGVzdC5zdGF0dXMgPSBzZWxmLlRFU1RfU1RBVFVTX0VYQU1JTkU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0ZXN0LmZhaWxSZWFzb24gPSB0ZXN0LmNoZWNrKGRpYWdyYW0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKF8uaXNTdHJpbmcodGVzdC5mYWlsUmVhc29uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlc3Quc3RhdHVzID0gc2VsZi5URVNUX1NUQVRVU19GQUlMRUQ7ICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVzdC5zdGF0dXMgPSBzZWxmLlRFU1RfU1RBVFVTX1BBU1NFRDsgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTsgICAgICAgIFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUdlbmVyYXRvclRlc3QgPSBmdW5jdGlvbihuYW1lLCBtYXBJdEZuKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogJ1RoaW5rUTogJyArIG5hbWUsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkgeyBzZWxmLnJ1bkdlbmVyYXRvclRlc3QobWFwSXRGbik7IH1cclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJ1bkdlbmVyYXRvclRlc3QgPSBmdW5jdGlvbihtYXBJdEZuKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHZhciBnZW5lcmF0b3IgPSBtYXAuZ2V0R2VuZXJhdG9yKCk7XHJcbiAgICAgICAgZ2VuZXJhdG9yLmNvbmNlcHQxID0gJ0NPTkNFUFQgMSc7XHJcbiAgICAgICAgZ2VuZXJhdG9yLmNvbmNlcHQyID0gJ0NPTkNFUFQgMic7XHJcbiAgICAgICAgZ2VuZXJhdG9yLm1hcEl0KG1hcEl0Rm4pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRlc3RzID0gW1xyXG4gICAgICAgIC8vIHtcclxuICAgICAgICAvLyAgICAgbmFtZTogJ1tGYWlsZWQgdGVzdF0nLFxyXG4gICAgICAgIC8vICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAvLyAgICAgfSxcclxuICAgICAgICAvLyAgICAgY2hlY2s6IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiAnVGhpcyB0ZXN0IGZhaWxlZCAtIHRoaXMgaXMgb25seSBhIHRlc3QuJztcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnUmVzZXQgbWFwJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmluc2VydFBhcnQobmV3IGdvLlBvaW50KDAsMCkpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpLmNvdW50ID09IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0NyZWF0ZSBTaXN0ZXInLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuaW5zZXJ0UGFydChuZXcgZ28uUG9pbnQoMCwwKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBtYXAuY3JlYXRlU2lzdGVyKGdyb3VwKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpLmNvdW50ID09IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0NyZWF0ZSBSIHRvIFNpc3RlcicsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5jbGlja0NyZWF0aW5nVG9vbC5pbnNlcnRQYXJ0KG5ldyBnby5Qb2ludCgwLDApKTtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIG1hcC5jcmVhdGVSVG9TaXN0ZXIoZ3JvdXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgQ2hpbGQnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuaW5zZXJ0UGFydChuZXcgZ28uUG9pbnQoMCwwKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoZ3JvdXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgMyBjaGlsZHJlbiBhbmQgc3dpdGNoIHRvIGZyZWVoYW5kJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmluc2VydFBhcnQobmV3IGdvLlBvaW50KDAsMCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZGlhZ3JhbS5maW5kVG9wTGV2ZWxHcm91cHMoKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgbWFwLmNyZWF0ZUNoaWxkKGdyb3VwKTtcclxuICAgICAgICAgICAgICAgIG1hcC5jcmVhdGVDaGlsZChncm91cCk7XHJcbiAgICAgICAgICAgICAgICBtYXAuY3JlYXRlQ2hpbGQoZ3JvdXApO1xyXG4gICAgICAgICAgICAgICAgLy8gZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ2xheW91dCcsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5zZXRTZWxlY3RlZFRoaW5nc0xheW91dCgnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpLmNvdW50ICE9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1RvcCBsZXZlbCBncm91cCBjb3VudCBpcyBub3QgMSc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXAubWVtYmVyUGFydHMuY291bnQgIT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnUGFyZW50IGRhdGEgY2hpbGRyZW4gaXMgbm90IDMnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgUlRCQiBpbnRvIG91dGxpbmUgUycsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgdGhlIHByZXNlbGVjdGVkIFJUQkIgaW50byBXaG9sZSAoUyksIHRoZW4gZG8gYW4gVW5kbycsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAwLCAnUGFydCAxJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MiA9IG1hcC5jcmVhdGVUaGluZyg1MDAsIDAsICdQYXJ0IDInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxLCBwYXJ0MiwgJ1J0aGluZycpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHBhcnQxLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcGFydDIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgUlRCQiBpbnRvIGZyZWVoYW5kIFMnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIHRoZSBwcmVzZWxlY3RlZCBSVEJCIGludG8gV2hvbGUgKFMpIGFuZCBleGFtaW5lIGxheW91dCcsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG9sZFBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnT2xkIFBhcnQgMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZVRoaW5nKDI1MCwgMzAsICdQYXJ0IDEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZVRoaW5nKDUwMCwgNzAsICdQYXJ0IDInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHBhcnQxLCBwYXJ0MiwgJ1J0aGluZycpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHBhcnQxLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcGFydDIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0NyZWF0ZSBSVEJCIGluIG91dGxpbmUgYW5kIHN3aXRjaCB0byBmcmVlaGFuZCcsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0NoZWNrIGF1dG8tZ2VuZXJhdGVkIGZyZWVoYW5kIGxheW91dCBvZiBwYXJ0cycsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAyJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MSwgcGFydDIsICdSdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIHdob2xlLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldFVpKCkuc2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQoJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICAvL2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHdob2xlLmRhdGEsICdsYXlvdXQnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIC8vbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSBSVEJCIGluIGZyZWVoYW5kLCBhZGQgcGFydCBpbiBvdXRsaW5lLCBzd2l0Y2ggYmFjayB0byBmcmVlaGFuZFxyXG4gICAgICAgIC8vIGNyZWF0ZSBSVEJCIGluIGZyZWVoYW5kLCBkcmFnIGluIHBhcnQgaW4gb3V0bGluZSwgc3dpdGNoIGJhY2sgdG8gZnJlZWhhbmRcclxuXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyBSVEJCIG91dCBvZiBTJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyB0aGUgcHJlc2VsZWN0ZWQgUlRCQiBvbnRvIFdob2xlIChEKScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAyJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MSwgcGFydDIsICdSdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhcnQyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFJUQkIgb3V0IG9mIGZyZWVoYW5kIFMnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIHRoZSBwcmVzZWxlY3RlZCBSVEJCIG9udG8gV2hvbGUgKEQpJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDEnLCAxMCwgMTIwKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAyJywgMTEwLCAxNTApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEsIHBhcnQyLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgcGFydDEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0Mi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyBSVEJCIG91dCBvZiAybmQgbGV2ZWwgUycsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgdGhlIHByZXNlbGVjdGVkIFJUQkIgb250byBXaG9sZSAoRCkgb2YgUGFydCAxJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDEyID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHN1YnBhcnQxMSwgc3VicGFydDEyLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDInKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBzdWJwYXJ0MTEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBzdWJwYXJ0MTIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgUlRCQiBvdXQgb2YgMm5kIGxldmVsIGZyZWVoYW5kIFMnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIHRoZSBwcmVzZWxlY3RlZCBSVEJCIG9udG8gV2hvbGUgKEQpIG9mIFBhcnQgMScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAxJywgMCwgMTIwKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQocGFydDEsICdTdWJwYXJ0IDEuMScsIDEwLCAxODApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMiA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4yJywgMjAsIDIyMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhzdWJwYXJ0MTEsIHN1YnBhcnQxMiwgJ1J0aGluZycpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAyJywgMCwgMzAwKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBzdWJwYXJ0MTEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBzdWJwYXJ0MTIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ1JjaGFubmVsJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnTm90ZSB0aGF0IFItdGhpbmdzIGFyZSBpbiBwYXJ0LXdob2xlIHJlbGF0aW9uJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZSAxJywgJ3JpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQxMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdQYXJ0IDEuMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZygyNTAsIDAsICdXaG9sZSAyJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQyMSA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdQYXJ0IDIuMScpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nMSA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdSdGhpbmcgMS0yJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nMTEgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMTEsIGNoaWxkMjEsICdSdGhpbmcgMS4xIC0gMi4xJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmNoYW5uZWwsIHJUaGluZzExOiAnICsgclRoaW5nMTEpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHJUaGluZzExLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgbWFwLmFkZFNlbGVjdGVkVGhpbmdzQXNDaGlsZHJlbk9mKHJUaGluZzEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEaXNhcHBlYXJpbmcgcGFydHMgb24gbmV3IGlkZWEgY3JlYXRpb24nLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdDcmVhdGUgYSBuZXcgdG9wLWxldmVsIGlkZWEgLSBQYXJ0IDEuMSBzaG91bGQgbm90IGRpc2FwcGVhciB0ZW1wb3JhcmlseScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnV2hvbGUgMScsICdyaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnUGFydCAxLjEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyB0b3AtbGV2ZWwgdGhpbmcgaW50byBmcmVlaGFuZCBzeXN0ZW0nLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIE5ldyBQYXJ0IGludG8gV2hvbGU7IGV4YW1pbmUgcmVzdWx0aW5nIHBhcnQgbGF5b3V0JyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnUGFydCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1BhcnQgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAwLCAnTmV3IFBhcnQnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIHRvcC1sZXZlbCBSVEJCIGludG8gZnJlZWhhbmQgc3lzdGVtJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBwcmVzZWxlY3RlZCBSVEJCIGludG8gV2hvbGU7IGV4YW1pbmUgcmVzdWx0aW5nIHBhcnQgbGF5b3V0JyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkMTEgPSBtYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnUGFydCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhciA9IG1hcC5jcmVhdGVUaGluZygyNTAsIDAsICdCYXInLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJlbGwgPSBtYXAuY3JlYXRlVGhpbmcoNTAwLCAwLCAnQmVsbCcsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgclRoaW5nID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhiYXIsIGJlbGwsICdSdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBiYXIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBiZWxsLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdEcmFnIFItdGhpbmcgc3F1YXJlIGludG8gZnJlZWhhbmQgc3lzdGVtJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBwcmVzZWxlY3RlZCBzcXVhcmUgaW50byBXaG9sZTsgZXhhbWluZSByZXN1bHRpbmcgcGFydCBsYXlvdXQnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCA1MCwgJ1dob2xlJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQxMSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MTEgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAwLCAnUGFydDExJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MTIgPSBtYXAuY3JlYXRlVGhpbmcoNTAwLCAwLCAnUGFydDEyJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MjEgPSBtYXAuY3JlYXRlVGhpbmcoMjUwLCAyNTAsICdQYXJ0MjEnLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQyMiA9IG1hcC5jcmVhdGVUaGluZyg1MDAsIDI1MCwgJ1BhcnQyMicsICdsZWZ0Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzExXzEyID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MTEsIHBhcnQxMiwgJ1J0aGluZyAxMS0xMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzExXzIxID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MTEsIHBhcnQyMSwgJ1J0aGluZyAxMS0yMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzEyXzIyID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MTIsIHBhcnQyMiwgJ1J0aGluZyAxMi0yMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJUaGluZzIxXzIyID0gbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhwYXJ0MjEsIHBhcnQyMiwgJ1J0aGluZyAyMS0yMicpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHBhcnQxMS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhcnQxMi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhcnQyMS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhcnQyMi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyBSLXRoaW5nIHNxdWFyZSBvdXQgb2YgZnJlZWhhbmQgc3lzdGVtJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBwcmVzZWxlY3RlZCBzcXVhcmUgb250byBEIG9mIFdob2xlOyBleGFtaW5lIHJlc3VsdGluZyBsYXlvdXQnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aG9sZSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCA1MCwgJ1dob2xlJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQxMSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MTEgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0MTEnLCAxMCwgMTkwKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MTIgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0MTInLCAxMjAsIDE5MCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydDIxJywgMTAsIDMwMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIyID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydDIyJywgMTIwLCAzMDApO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMV8xMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDExLCBwYXJ0MTIsICdSdGhpbmcgMTEtMTInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMV8yMSA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDExLCBwYXJ0MjEsICdSdGhpbmcgMTEtMjEnKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcxMl8yMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEyLCBwYXJ0MjIsICdSdGhpbmcgMTItMjInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcyMV8yMiA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDIxLCBwYXJ0MjIsICdSdGhpbmcgMjEtMjInKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MTEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MTIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MjEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYXJ0MjIuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgMm5kIGxldmVsIHBhcnQgdG8gRCBvZiBwYXJlbnQnLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdEcmFnIFN1YnBhcnQgMS4xIG9udG8gRCBvZiBQYXJ0IDE7IGl0IHNob3VsZCBhcHBlYXIgYmVsb3cgUGFydCAxJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydDIgPSBtYXAuY3JlYXRlQ2hpbGQod2hvbGUsICdQYXJ0IDInKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0ludmlzaWJsZSBSLXRoaW5nIGluIDJuZCBsZXZlbCBvZiBvdXRsaW5lJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnUi10aGluZyBiZXR3ZWVuIFN1YnBhcnRzIDEuMSBhbmQgMS4yIHNob3VsZCBiZSB2aXNpYmxlJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hvbGUgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1dob2xlJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVDaGlsZCh3aG9sZSwgJ1BhcnQgMScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnBhcnQxMSA9IG1hcC5jcmVhdGVDaGlsZChwYXJ0MSwgJ1N1YnBhcnQgMS4xJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDEyID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjInKTtcclxuICAgICAgICAgICAgICAgIHZhciByVGhpbmcgPSBtYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHN1YnBhcnQxMSwgc3VicGFydDEyLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICByVGhpbmcuZGVzaXJlZFNpemUgPSBuZXcgZ28uU2l6ZSgzMCwzMCk7XHJcbiAgICAgICAgICAgICAgICBtYXAucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JUaGluZyBhY3R1YWxCb3VuZHM6ICcgKyByVGhpbmcuYWN0dWFsQm91bmRzICsgJywgc2NhbGU6ICcgKyByVGhpbmcuc2NhbGUgKyAnLCBkZXNpcmVkU2l6ZTogJyArIHJUaGluZy5kZXNpcmVkU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnV2hvbGUgZGVzaXJlZFNpemU6ICcgKyB3aG9sZS5kZXNpcmVkU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ1ItdGhpbmcgYmV0d2VlbiBpZGVhcyBpbiBzYW1lIGxvY2F0aW9uIChlcnJvciknLFxyXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6ICdUaGlzIHNob3VsZCB0cmlnZ2VyIGFuIGVycm9yJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0MSA9IG1hcC5jcmVhdGVUaGluZygwLCAwLCAnUGFydCAxJywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydDIgPSBtYXAuY3JlYXRlVGhpbmcoMCwgMCwgJ1BhcnQgMicsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcocGFydDEsIHBhcnQyLCAnUnRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIC8vIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGFsZXJ0KGUubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIHtcclxuICAgICAgICAvLyAgICAgbmFtZTogJ0ZpeCBiYWQgUi10aGluZyBsZWFkaW5nIHRvIGluZmluaXRlIGxvb3AnLFxyXG4gICAgICAgIC8vICAgICBpbnN0cnVjdGlvbnM6ICdNYXAgc2hvdWxkIGRpc3BsYXkgYW5kIG5vdCB0cmlnZ2VyIGluZmluaXRlIGxvb3A7IG1vZGVsIHNob3VsZCBiZSBmaXhlZCBzbyB0aGF0IHItdGhpbmcgaXMgbm90IFBhcnQgMS4xIG9yIFBhcnQgMS4yJyxcclxuICAgICAgICAvLyAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKC0xMDAsIDAsICdUaGluZzEnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAvLyAgICAgICAgIHZhciBjaGlsZDExID0gbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ1BhcnQgMS4xJyk7XHJcbiAgICAgICAgLy8gICAgICAgICB2YXIgY2hpbGQxMiA9IG1hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdQYXJ0IDEuMicpO1xyXG4gICAgICAgIC8vICAgICAgICAgdmFyIHJUaGluZyA9IG1hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQxMSwgY2hpbGQxMiwgJ1J0aGluZycpO1xyXG4gICAgICAgIC8vICAgICAgICAgdmFyIHJMaW5rID0gclRoaW5nLmxhYmVsZWRMaW5rO1xyXG4gICAgICAgIC8vICAgICAgICAgckxpbmsuZGF0YS5sYWJlbEtleXMgPSBbY2hpbGQxMS5kYXRhLmtleV07XHJcbiAgICAgICAgLy8gICAgICAgICBtYXAuY2hlY2tNb2RlbCgpO1xyXG4gICAgICAgIC8vICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnRHJhZyB0byBjcmVhdGUgUi1saW5lJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnRHJhZyBmcm9tIHRoZSBSLWNvcm5lciBvZiBUaGluZzEgdG8gVGhpbmcyOyB0ZW1wb3JhcnkgZHJhZyBsaW5lIGFuZCBzcXVhcmUgc2hvdWxkIGJlIFItY29sb3I7IGNyZWF0ZWQgbGluZSBzaG91bGQgYmUgYW4gUi1saW5lJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKC0xMDAsIDAsICdUaGluZzEnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoMTAwLCAwLCAnVGhpbmcyJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ0RyYWcgdG8gY3JlYXRlIFAtbGluZScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ0RyYWcgZnJvbSB0aGUgUC1jb3JuZXIgb2YgVGhpbmcxIHRvIFRoaW5nMjsgdGVtcG9yYXJ5IGRyYWcgbGluZSBhbmQgc3F1YXJlIHNob3VsZCBiZSBQLWNvbG9yOyBjcmVhdGVkIGxpbmUgc2hvdWxkIGJlIGEgUC1saW5lJyxcclxuICAgICAgICAgICAgcnVuOiBmdW5jdGlvbihkaWFncmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcxID0gbWFwLmNyZWF0ZVRoaW5nKC0xMDAsIDAsICdUaGluZzEnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzIgPSBtYXAuY3JlYXRlVGhpbmcoMTAwLCAwLCAnVGhpbmcyJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ1JlbGluayBmcm9tLXBvcnQgb2YgUi1saW5lJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnTW92ZSB0aGUgc3RhcnQgb2YgdGhlIFItbGluayBmcm9tIFRoaW5nIDEgdG8gVGhpbmcgMzsgbWFrZSBzdXJlIGl0IGRvZXMgbm90IHR1cm4gaW50byBhIFAtbGluaycsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMSA9IG1hcC5jcmVhdGVUaGluZygtMTAwLCAwLCAnVGhpbmcxJywgJ2ZyZWVoYW5kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmcyID0gbWFwLmNyZWF0ZVRoaW5nKDMwMCwgMCwgJ1RoaW5nMicsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMyA9IG1hcC5jcmVhdGVUaGluZygxMDAsIDIwMCwgJ1RoaW5nMycsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJsaW5rID0gbWFwLmNyZWF0ZVJMaW5rKHRoaW5nMSwgdGhpbmcyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnUmVsaW5rIHRvLXBvcnQgb2YgUi1saW5lJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAnTW92ZSB0aGUgZW5kIG9mIHRoZSBSLWxpbmsgZnJvbSBUaGluZyAyIHRvIFRoaW5nIDM7IG1ha2Ugc3VyZSBpdCBkb2VzIG5vdCB0dXJuIGludG8gYSBQLWxpbmsnLFxyXG4gICAgICAgICAgICBydW46IGZ1bmN0aW9uKGRpYWdyYW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzEgPSBtYXAuY3JlYXRlVGhpbmcoLTEwMCwgMCwgJ1RoaW5nMScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nMiA9IG1hcC5jcmVhdGVUaGluZygzMDAsIDAsICdUaGluZzInLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciB0aGluZzMgPSBtYXAuY3JlYXRlVGhpbmcoMTAwLCAyMDAsICdUaGluZzMnLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBybGluayA9IG1hcC5jcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ1Nob3dpbmcgcGFydHMgb2YgcGFydHMgb2YgYSBmcmVlaGFuZCB3aG9sZScsXHJcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogJ1dob2xlLCBQYXJ0IDEgYW5kIFN1YnBhcnQgMS4xIHNob3VsZCBhbGwgYmUgdmlzaWJsZScsXHJcbiAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oZGlhZ3JhbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdob2xlID0gbWFwLmNyZWF0ZVRoaW5nKDAsIDAsICdXaG9sZScsICdmcmVlaGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnQxID0gbWFwLmNyZWF0ZUNoaWxkKHdob2xlLCAnUGFydCAxJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VicGFydDExID0gbWFwLmNyZWF0ZUNoaWxkKHBhcnQxLCAnU3VicGFydCAxLjEnKTtcclxuICAgICAgICAgICAgICAgIG1hcC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1dIQVRfSVMnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuV0hBVF9JUyksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdQQVJUU19PRicsIG1hcC5nZXRHZW5lcmF0b3IoKS5QQVJUU19PRiksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdQQVJUX09GJywgbWFwLmdldEdlbmVyYXRvcigpLlBBUlRfT0YpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUEFSVFNfSEFWRV9QQVJUUycsIG1hcC5nZXRHZW5lcmF0b3IoKS5QQVJUU19IQVZFX1BBUlRTKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1BPSU5UX0ZPUicsIG1hcC5nZXRHZW5lcmF0b3IoKS5QT0lOVF9GT1IpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnSEFTX01VTFRJUExFX1BTJywgbWFwLmdldEdlbmVyYXRvcigpLkhBU19NVUxUSVBMRV9QUyksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdSX1RPJywgbWFwLmdldEdlbmVyYXRvcigpLlJfVE8pLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUl9FWElTVFMnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUl9FWElTVFMpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnV0hBVF9JU19SJywgbWFwLmdldEdlbmVyYXRvcigpLldIQVRfSVNfUiksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdESVNUSU5HVUlTSF9CRVRXRUVOJywgbWFwLmdldEdlbmVyYXRvcigpLkRJU1RJTkdVSVNIX0JFVFdFRU4pLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnSVNfUl9CRVRXRUVOJywgbWFwLmdldEdlbmVyYXRvcigpLklTX1JfQkVUV0VFTiksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdDQU5fQkVfUCcsIG1hcC5nZXRHZW5lcmF0b3IoKS5DQU5fQkVfUCksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdNVUxUSVBMRV9QU19BUkUnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuTVVMVElQTEVfUFNfQVJFKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1BfUEFSVFMnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUF9QQVJUUyksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdDT01QQVJFX0NPTlRSQVNUJywgbWFwLmdldEdlbmVyYXRvcigpLkNPTVBBUkVfQ09OVFJBU1QpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUl9QQVJUUycsIG1hcC5nZXRHZW5lcmF0b3IoKS5SX1BBUlRTKSxcclxuICAgICAgICAvLyBzZWxmLmNyZWF0ZUdlbmVyYXRvclRlc3QoJ1BBUlRTX0hBVkVfUlMnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUEFSVFNfSEFWRV9SUyksXHJcbiAgICAgICAgLy8gc2VsZi5jcmVhdGVHZW5lcmF0b3JUZXN0KCdQQVJUX1JTX0VYSVNUJywgbWFwLmdldEdlbmVyYXRvcigpLlBBUlRfUlNfRVhJU1QpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnUEFSVF9SU19BUkUnLCBtYXAuZ2V0R2VuZXJhdG9yKCkuUEFSVF9SU19BUkUpLFxyXG4gICAgICAgIC8vIHNlbGYuY3JlYXRlR2VuZXJhdG9yVGVzdCgnV0hBVF9BQk9VVCcsIG1hcC5nZXRHZW5lcmF0b3IoKS5XSEFUX0FCT1VUKVxyXG5cclxuXHJcbi8vIGNvbXB1dGVQYXJ0c0JvdW5kc1xyXG5cclxuLy8gY3JlYXRlUlRoaW5nXHJcbi8vIGFkZFNlbGVjdGVkVGhpbmdzQXNDaGlsZHJlbk9mXHJcbi8vIGFkZFNlbGVjdGVkVGhpbmdBc09yZGVyZWRTaXN0ZXJPZlxyXG4vLyBhZGRTZWxlY3RlZFRoaW5nc0FzU2lzdGVyc09mXHJcbi8vIGFkZFRoaW5nQXNSVGhpbmdcclxuLy8gdG9nZ2xlREZsYWdcclxuLy8gdG9nZ2xlU0V4cGFuc2lvblxyXG4vLyB0b2dnbGVQRXhwYW5zaW9uXHJcblxyXG4vLyBwcmVzZW50ZXI6IHNlbGVjdCBmaXJzdCBzbGlkZSBhbmQgaGl0IHBsYXk7IG1ha2Ugc3VyZSBmaXJzdCBzbGlkZSBub3RlcyBhcHBlYXJcclxuXHJcblxyXG5cclxuICAgIF07XHJcbiAgICBcclxufTtcclxuXHJcblxyXG4iLCIvLyBjb250cm9sbGVyIGZvciBsaXN0IG9mIHRvcCBtYXBzXHJcblxyXG53aW5kb3cuVG9wTWFwc0N0cmwgPSBmdW5jdGlvbigkc2NvcGUpIHtcclxuXHJcbiAgICAkc2NvcGUudG9wTWFwcyA9IFtdO1xyXG4gICAgJHNjb3BlLnVzZXJzID0gW107XHJcblxyXG4gICAgLy8gTkI6IHRoaXMgaXMgZHVwbGljYXRlZCBpbiBmZWVkLmpzLCBidXQgd2UgcmVwZWF0IGl0IGhlcmUgdG8gbWFrZSB0aGlzIGNvbnRyb2xsZXIgaW5kZXBlbmRlbnRcclxuICAgICRzY29wZS5vcmdhbml6YXRpb25zID0gW107XHJcblxyXG4gICAgJHNjb3BlLm9yZ2FuaXphdGlvbklkID0gJyc7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLSBtYXAgZGF0YSAtLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5sb2FkVG9wTWFwcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgJGh0dHAuZ2V0KCcvbWFwcy90b3BfbWFwcy5qc29uP29yZ2FuaXphdGlvbklkPScgKyAkc2NvcGUub3JnYW5pemF0aW9uSWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5vcmdhbml6YXRpb25zID0gcmVzcG9uc2UuZGF0YS5vcmdhbml6YXRpb25zO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnRvcE1hcHMgPSByZXNwb25zZS5kYXRhLnRvcE1hcHM7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnMgPSByZXNwb25zZS5kYXRhLnVzZXJzO1xyXG4gICAgICAgICAgICAgICAgLy8gIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLy9zdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBsb2FkIGxpc3Qgb2YgdG9wIG1hcHMnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5sb2FkVG9wTWFwcygpO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIHZpZXcgaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5nZXRVc2VyTmFtZSA9IGZ1bmN0aW9uKHVzZXJJZCkge1xyXG4gICAgICAgIHZhciB1c2VyID0gXy5maW5kV2hlcmUoJHNjb3BlLnVzZXJzLCB7XHJcbiAgICAgICAgICAgIGlkOiB1c2VySWRcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gKHVzZXIgPyB1c2VyLm5hbWUgOiAnJyk7XHJcbiAgICB9O1xyXG5cclxufTsiLCJTYW5kYmFua0VkaXRvci5UdXRvcmlhbCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAvKiogbGlrZSBqUXVlcnkgJCgpIGJ1dCBzdGFydGluZyBmcm9tICN0dXRvcmlhbCAqL1xyXG4gICAgZnVuY3Rpb24gJHVpKHNlbCkge1xyXG4gICAgICAgIHJldHVybiBzZWwgPyAkKCcjdHV0b3JpYWwnKS5maW5kKHNlbCkgOiAkKCcjdHV0b3JpYWwnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogY3VycmVudCBzZWN0aW9uIG51bWJlciAoZGl2LnR1dG9yaWFsLXNlY3Rpb24pICovXHJcbiAgICB2YXIgX3NlY3Rpb24gPSAwO1xyXG5cclxuICAgIC8qKiBjdXJyZW50IGNhcmQtbnVtYmVyIChkaXYudHV0b3JpYWwtY2FyZCkgaW4gdGhlIGN1cnJlbnQgc2VjdGlvbiAqL1xyXG4gICAgdmFyIF9jYXJkID0gMDtcclxuXHJcbiAgICAvKiogdG90YWwgbnVtYmVyIG9mIHNlY3Rpb25zICovXHJcbiAgICB2YXIgTlVNX1NFQ1RJT05TID0gJHVpKCcudHV0b3JpYWwtc2VjdGlvbicpLmxlbmd0aDtcclxuXHJcbiAgICAvKiogdG90YWwgbnVtYmVyIG9mIGNhcmRzIGluIGVhY2ggc2VjdGlvbiAqL1xyXG4gICAgdmFyIE5VTV9DQVJEUyA9ICQubWFwKFxyXG4gICAgICAgICR1aSgnLnR1dG9yaWFsLXNlY3Rpb24nKSxcclxuICAgICAgICBmdW5jdGlvbihzZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkKHNlY3Rpb24pLmZpbmQoJy50dXRvcmlhbC1jYXJkJykubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgLyoqIHVwZGF0ZSB0aGUgdHV0b3JpYWwgdmlldyAqL1xyXG4gICAgZnVuY3Rpb24gX3VwZGF0ZSgpIHtcclxuICAgICAgICAkdWkoJy50dXRvcmlhbC1jYXJkJykuaGlkZSgpO1xyXG5cclxuICAgICAgICB2YXIgJHNlY3Rpb24gPSAkdWkoJy50dXRvcmlhbC1zZWN0aW9uJykuZXEoX3NlY3Rpb24pLFxyXG4gICAgICAgICAgICAkY2FyZCA9ICRzZWN0aW9uLmZpbmQoJy50dXRvcmlhbC1jYXJkJykuZXEoX2NhcmQpO1xyXG5cclxuICAgICAgICAkdWkoKS5hdHRyKCdjbGFzcycsICRjYXJkLmF0dHIoJ2RhdGEtY2xhc3MnKSk7XHJcblxyXG4gICAgICAgICR1aSgnLnByZXYtYnRuJykudG9nZ2xlKF9jYXJkID4gMCk7XHJcbiAgICAgICAgJHVpKCcubmV4dC1idG4nKS50b2dnbGUoX2NhcmQgPCBOVU1fQ0FSRFNbX3NlY3Rpb25dKTtcclxuXHJcbiAgICAgICAgdmFyICRwcm9ncmVzcyA9ICR1aSgnLnR1dG9yaWFsLXByb2dyZXNzJyk7XHJcblxyXG4gICAgICAgICRwcm9ncmVzcy5maW5kKCcudGl0bGUnKS50ZXh0KCRzZWN0aW9uLmF0dHIoJ2RhdGEtdGl0bGUnKSk7XHJcbiAgICAgICAgJHByb2dyZXNzLmZpbmQoJy5jYXJkJykudGV4dChfY2FyZCArIDEpO1xyXG4gICAgICAgICRwcm9ncmVzcy5maW5kKCcudG90YWwnKS50ZXh0KE5VTV9DQVJEU1tfc2VjdGlvbl0pO1xyXG5cclxuICAgICAgICAkY2FyZC5zaG93KCdmYXN0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHN0YXJ0IHRoZSB0dXRvcmlhbCAqL1xyXG4gICAgZnVuY3Rpb24gc3RhcnQoc2VjdGlvbiwgY2FyZCkge1xyXG4gICAgICAgIF9zZWN0aW9uID0gc2VjdGlvbiB8fCAwO1xyXG4gICAgICAgIF9jYXJkID0gY2FyZCB8fCAwO1xyXG4gICAgICAgIF91cGRhdGUoKTtcclxuICAgICAgICAkdWkoKS5zaG93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIGJ1dHRvbjogZ28gdG8gdGhlIG5leHQgY2FyZCAqL1xyXG4gICAgZnVuY3Rpb24gbmV4dCgpIHtcclxuICAgICAgICBpZiAoX2NhcmQgKyAxID09PSBOVU1fQ0FSRFNbX3NlY3Rpb25dKSB7XHJcbiAgICAgICAgICAgIF9jYXJkID0gMDtcclxuICAgICAgICAgICAgX3NlY3Rpb24rKztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfY2FyZCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIGJ1dHRvbjogZ28gdG8gdGhlIHByZXZpb3VzIGNhcmQgKi9cclxuICAgIGZ1bmN0aW9uIHByZXYoKSB7XHJcbiAgICAgICAgX2NhcmQtLTtcclxuICAgICAgICBfdXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIGJ1dHRvbjogY2xvc2UgdGhlIHR1dG9yaWFsICovXHJcbiAgICBmdW5jdGlvbiBjbG9zZSgpIHtcclxuICAgICAgICAkdWkoKS5oaWRlKCdmYXN0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIGhvb2sgdXAgdGhlIGJ1dHRvbnMgKi9cclxuICAgIGZ1bmN0aW9uIF9pbml0Q29udHJvbHMoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gb25jbGljayhzZWwsIGZuKSB7XHJcbiAgICAgICAgICAgICR1aShzZWwpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb25jbGljaygnLnByZXYtYnRuJywgcHJldik7XHJcbiAgICAgICAgb25jbGljaygnLm5leHQtYnRuLCAuc3RhcnQtYnRuJywgbmV4dCk7XHJcbiAgICAgICAgb25jbGljaygnLnNraXAtYnRuLCAuZG9uZS1idG4nLCBjbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2luaXRDb250cm9scygpO1xyXG5cclxuICAgIC8vIFB1YmxpYyBpbnRlcmZhY2U6XHJcblxyXG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xyXG5cclxufTtcclxuIiwiU2FuZGJhbmtFZGl0b3IuVUkgPSBmdW5jdGlvbigkc2NvcGUsIG1hcCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSB0YWIgKFwic2xpZGVyXCIpIElEcyAtIHRhYnMgYXJlIHJlbmRlcmVkIGluIHZpZXdzL21hcHMvX2Zvcm0gLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vdGhpcy5UQUJfSURfSElTVE9SWSA9ICdoaXN0b3J5LXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9QUkVTRU5URVIgPSAncHJlc2VudGVyLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9BTkFMWVRJQ1NfTUFQID0gJ2FuYWx5dGljcy10YWItbWFwJztcclxuICAgIHRoaXMuVEFCX0lEX0FOQUxZVElDU19USElORyA9ICdhbmFseXRpY3MtdGFiLXRoaW5nJztcclxuICAgIHRoaXMuVEFCX0lEX1BFUlNQRUNUSVZFUyA9ICdwZXJzcGVjdGl2ZXMtdGFiJztcclxuICAgIHRoaXMuVEFCX0lEX0RJU1RJTkNUSU9OUyA9ICdkaXN0aW5jdGlvbnMtdGFiJztcclxuICAgIHRoaXMuVEFCX0lEX0FUVEFDSE1FTlRTID0gJ2F0dGFjaG1lbnRzLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9HRU5FUkFUT1IgPSAnZ2VuZXJhdG9yLXRhYic7XHJcbiAgICB0aGlzLlRBQl9JRF9TVEFOREFSRFMgPSAnc3RhbmRhcmRzLXRhYic7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7fTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZWRpdG9yIG9wdGlvbnMgZm9yIG1hcC91c2VyIC0tLS0tLS0tLS1cclxuXHJcbiAgICB2YXIgbWFwRWRpdG9yT3B0aW9ucyA9IHt9O1xyXG5cclxuICAgIHZhciBkZWZhdWx0RWRpdG9yT3B0aW9ucyA9IHtcclxuICAgICAgICAvLyBub0Fycm93cywgdG8sIGZyb20sIHRvRnJvbVxyXG4gICAgICAgIGRlZmF1bHRSZWxhdGlvbnNoaXBEaXJlY3Rpb246ICdub0Fycm93cycsXHJcbiAgICAgICAgLy8gbGVmdCwgcmlnaHQsIHN0YWNrZWQsIGZyZWVoYW5kXHJcbiAgICAgICAgZGVmYXVsdFRoaW5nTGF5b3V0OiAnbGVmdCcsXHJcbiAgICAgICAgLy8gbGluZXMsIHNwb3RsaWdodCwgYm90aFxyXG4gICAgICAgIHBlcnNwZWN0aXZlTW9kZTogJ2xpbmVzJ1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjYWxsZWQgd2hlbiBtYXAgaXMgbG9hZGVkIHRvIHNldCBzdG9yZWQgb3B0aW9ucyBmb3IgbWFwXHJcbiAgICB0aGlzLnNldE1hcEVkaXRvck9wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgbWFwRWRpdG9yT3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgYXBwcm9wcmlhdGUgdmFsdWVzIGZyb20gdGhlIHVzZXIgcHJvZmlsZSBvciB0aGUgZGVmYXVsdCBvcHRpb25zIGlmIG9wdGlvbnMgYXJlIG5vdCBzZXQgZm9yIHRoZSBtYXBcclxuICAgIHRoaXMuZ2V0TWFwRWRpdG9yT3B0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBwcm9maWxlT3B0aW9ucyA9ICgkc2NvcGUudXNlclByb2ZpbGUgPyAkc2NvcGUudXNlclByb2ZpbGUuZWRpdG9yT3B0aW9ucyA6IG51bGwpO1xyXG4gICAgICAgIHZhciB2YWxzID0gW21hcEVkaXRvck9wdGlvbnMsIHByb2ZpbGVPcHRpb25zLCBkZWZhdWx0RWRpdG9yT3B0aW9uc107XHJcbiAgICAgICAgbWFwRWRpdG9yT3B0aW9ucyA9IF8uZmluZCh2YWxzLCBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuICFfLmlzRW1wdHkodmFsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbWFwRWRpdG9yT3B0aW9ucztcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2F2ZXMgZGVmYXVsdCBvcHRpb25zIGZvciB0aGUgdXNlciAobWFwIG9wdGlvbnMgYXJlIHNhdmVkIGluIGF1dG9zYXZlLmpzKVxyXG4gICAgZnVuY3Rpb24gc2F2ZVVzZXJFZGl0b3JPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yX29wdGlvbnM6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAkaHR0cC5wdXQoJy91c2Vycy8nICsgJHNjb3BlLnVzZXJJZCArICcuanNvbicsIGRhdGEpLnRoZW4oXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgZWRpdG9yIG9wdGlvbnMnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBvcHRpb25zIG1vZGFsXHJcblxyXG4gICAgJHNjb3BlLmVkaXRvck9wdGlvbnMgPSBuZXcgU2FuZGJhbmtFZGl0b3JPcHRpb25zKCRzY29wZSk7XHJcblxyXG4gICAgdGhpcy5lZGl0T3B0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5lZGl0b3JPcHRpb25zLm9wZW5Nb2RhbChcclxuICAgICAgICAgICAgbWFwRWRpdG9yT3B0aW9ucyxcclxuICAgICAgICAgICAgZnVuY3Rpb24ob3B0aW9ucykgeyAvLyBvblNhdmVEZWZhdWx0c1xyXG4gICAgICAgICAgICAgICAgc2F2ZVVzZXJFZGl0b3JPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbihvcHRpb25zKSB7IC8vIG9uVXBkYXRlXHJcbiAgICAgICAgICAgICAgICBtYXBFZGl0b3JPcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRBdXRvc2F2ZSgpLnNhdmVOb3coJ2VkaXRfb3B0aW9ucycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBzdGF0ZSBtb2RlbCAtLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xyXG5cclxuICAgIHZhciBkZWZhdWx0U3RhdGUgPSB7XHJcbiAgICAgICAgc2hvd05hdmlnYXRvcjogZmFsc2UsXHJcbiAgICAgICAgY3VycmVudFRhYjogbnVsbCxcclxuICAgICAgICBwZXJzcGVjdGl2ZVBvaW50S2V5OiBudWxsLFxyXG4gICAgICAgIGRpc3RpbmN0aW9uVGhpbmdLZXk6IG51bGxcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zZXRTdGF0ZURhdGEgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgLy8kc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vICAgIHNlbGYuc3RhdGUgPSBkYXRhIHx8IGRlZmF1bHRTdGF0ZTtcclxuICAgICAgICAvLyAgICAvLyRzY29wZS5jdXJyZW50VGFiID0gc2VsZi5zdGF0ZS5jdXJyZW50VGFiO1xyXG4gICAgICAgIC8vfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFRPRE86IFNhdmUgc3RhdGUgbW9yZSBmcmVxdWVudGx5Pz8gQ3VycmVudGx5IGl0IGlzIG9ubHkgc2F2ZWQgd2hlbiBhdXRvc2F2ZSBpcyB0cmlnZ2VyZWQgYnkgb3RoZXIgYWN0aW9ucy4uLlxyXG5cclxuICAgIHRoaXMuZ2V0U3RhdGVEYXRhID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuc3RhdGU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIHRlbXBvcmFyeSBzdGF0ZSBmbGFncyAtLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLnpvb21pbmdUb1JlZ2lvbiA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMubW91c2VPdmVyR3JvdXAgPSBudWxsO1xyXG4gICAgdGhpcy5tb3VzZU92ZXJMaW5rID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmRyYWdUYXJnZXRHcm91cCA9IG51bGw7XHJcbiAgICB0aGlzLmRyYWdUYXJnZXRQb3NpdGlvbiA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5oZWxwVGlwID0gbnVsbDtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSBoYW5kbGUgYm90dG9tIHRhYnMgKFwic2xpZGVyc1wiKSAtLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gaW4gdGhlIGZvbGxvd2luZyBmdW5jdGlvbnMsIElEIGlzIGUuZy4gJ2hpc3RvcnktdGFiJyAoSUQgb2Ygb25lIG9mIHRoZSAuYm90dG9tLXRhYidzKVxyXG5cclxuICAgIC8vIHRoaXMgaXMgY2FsbGVkIGJ5IG1hcC5jdXJyZW50VGFiQ2hhbmdlZCwgd2hpY2ggaXMgdHJpZ2dlcmVkIGJ5IGEgJHNjb3BlLiR3YXRjaFxyXG4gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3VpLCBjdXJyZW50VGFiQ2hhbmdlZDogJyArIG5ld1ZhbHVlKTtcclxuICAgICAgICBzZWxmLnN0YXRlLmN1cnJlbnRUYWIgPSBuZXdWYWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jdXJyZW50VGFiSXMgPSBmdW5jdGlvbih0YWJJRCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUuY3VycmVudFRhYiA9PSB0YWJJRDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5vcGVuVGFiID0gZnVuY3Rpb24odGFiSUQpIHtcclxuICAgICAgICAvLyRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gICAgJHNjb3BlLmN1cnJlbnRUYWIgPSB0YWJJRDtcclxuICAgICAgICAvL30pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNsb3NlVGFiID0gZnVuY3Rpb24odGFiSUQpIHtcclxuICAgICAgICAvLyRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gICAgc2VsZi5zdGF0ZS5jdXJyZW50VGFiID0gbnVsbDsgLy8gVE9ETzogdHJpZ2dlciBhdXRvc2F2ZVxyXG4gICAgICAgIC8vICAgICRzY29wZS5jdXJyZW50VGFiID0gbnVsbDtcclxuICAgICAgICAvL30pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmRpc2FibGVUYWIgPSBmdW5jdGlvbih0YWJJRCkge1xyXG4gICAgICAgIC8vIHByZXZlbnQgb3BlbmluZyBvdGhlciB0YWJzIHdoZW4gaW4gUCBvciBEIGVkaXRvclxyXG4gICAgICAgIGlmICgkc2NvcGUuY3VycmVudFRhYiA9PSBzZWxmLlRBQl9JRF9QRVJTUEVDVElWRVMgfHwgJHNjb3BlLmN1cnJlbnRUYWIgPT0gc2VsZi5UQUJfSURfRElTVElOQ1RJT05TKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudG9nZ2xlVGFiID0gZnVuY3Rpb24odGFiSUQpIHtcclxuICAgICAgICAvLyRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gICAgaWYgKCRzY29wZS5jdXJyZW50VGFiID09IHRhYklEKSB7XHJcbiAgICAgICAgLy8gICAgICAgICRzY29wZS5jdXJyZW50VGFiID0gbnVsbDtcclxuICAgICAgICAvLyAgICB9IGVsc2UgaWYgKCFzZWxmLmRpc2FibGVUYWIodGFiSUQpKSB7XHJcbiAgICAgICAgLy8gICAgICAgICRzY29wZS5jdXJyZW50VGFiID0gdGFiSUQ7XHJcbiAgICAgICAgLy8gICAgfVxyXG4gICAgICAgIC8vfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudG9nZ2xlTmF2aWdhdG9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8kc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vICAgIHNlbGYuc3RhdGUuc2hvd05hdmlnYXRvciA9ICFzZWxmLnN0YXRlLnNob3dOYXZpZ2F0b3I7XHJcbiAgICAgICAgLy99KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50b2dnbGVab29taW5nVG9SZWdpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gICAgc2VsZi56b29taW5nVG9SZWdpb24gPSAhc2VsZi56b29taW5nVG9SZWdpb247XHJcbiAgICAgICAgLy99KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tIHpvb21pbmcgZnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmNhblpvb21JbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0RGlhZ3JhbSgpLnNjYWxlIDwgMzI7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY2FuWm9vbU91dCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBtYXAuZ2V0RGlhZ3JhbSgpLnNjYWxlID4gMC4yNTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy56b29tSW4gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZGlhZ3JhbSA9IG1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgaWYgKGRpYWdyYW0uc2NhbGUgPCAzMikge1xyXG4gICAgICAgICAgICB2YXIgdmIgPSBkaWFncmFtLnZpZXdwb3J0Qm91bmRzLmNvcHkoKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5zY2FsZSA9IGRpYWdyYW0uc2NhbGUgKiAyO1xyXG4gICAgICAgICAgICBkaWFncmFtLmNlbnRlclJlY3QodmIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy56b29tT3V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGlmIChkaWFncmFtLnNjYWxlID4gMC4yNSkge1xyXG4gICAgICAgICAgICB2YXIgdmIgPSBkaWFncmFtLnZpZXdwb3J0Qm91bmRzLmNvcHkoKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5zY2FsZSA9IGRpYWdyYW0uc2NhbGUgLyAyO1xyXG4gICAgICAgICAgICBkaWFncmFtLmNlbnRlclJlY3QodmIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5tYXliZVpvb21Ub1JlZ2lvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAvLyB0aGlzIGZsYWcgaXMgc2V0IGJ5IHRoZSB0b29sYmFyIGJ1dHRvblxyXG4gICAgICAgIGlmIChzZWxmLnpvb21pbmdUb1JlZ2lvbikge1xyXG4gICAgICAgICAgICBzZWxmLnpvb21pbmdUb1JlZ2lvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnem9vbVRvUmVnaW9uLCBzZWxlY3Rpb24gY291bnQ6ICcgKyBkaWFncmFtLnNlbGVjdGlvbi5jb3VudCk7XHJcbiAgICAgICAgICAgIHZhciByZWN0ID0gZGlhZ3JhbS5jb21wdXRlUGFydHNCb3VuZHMoZGlhZ3JhbS5zZWxlY3Rpb24pO1xyXG4gICAgICAgICAgICBkaWFncmFtLnpvb21Ub1JlY3QocmVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJlc2V0Wm9vbSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAvL3ZhciByZWN0ID0gZGlhZ3JhbS5jb21wdXRlUGFydHNCb3VuZHMoZGlhZ3JhbS5ub2RlcykuY29weSgpO1xyXG4gICAgICAgIHZhciByZWN0ID0gbWFwLnNhZmVSZWN0KG1hcC5jb21wdXRlTWFwQm91bmRzKCkpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3Jlc2V0Wm9vbSwgYm91bmRzOiAnICsgcmVjdCk7XHJcbiAgICAgICAgaWYgKHJlY3Qud2lkdGgpIHtcclxuICAgICAgICAgICAgcmVjdC5pbmZsYXRlKHJlY3Qud2lkdGggLyA1LCByZWN0LmhlaWdodCAvIDUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkaWFncmFtLnpvb21Ub1JlY3QocmVjdCk7XHJcbiAgICAgICAgZGlhZ3JhbS5hbGlnbkRvY3VtZW50KGdvLlNwb3QuQ2VudGVyLCBnby5TcG90LkNlbnRlcik7XHJcbiAgICAgICAgaWYgKGRpYWdyYW0uc2NhbGUgPiAxKSB7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSAxO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHRoaW5nIG9wdGlvbnMgKGxheW91dCkgLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRoaXMuZ2V0U2VsZWN0ZWRUaGluZ3NPckRlZmF1bHRMYXlvdXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc2wgPSBzZWxmLmdldFNlbGVjdGVkVGhpbmdzTGF5b3V0KCk7XHJcbiAgICAgICAgaWYgKHNsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFwRWRpdG9yT3B0aW9ucy5kZWZhdWx0VGhpbmdMYXlvdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIGEgbm9uLW51bGwgdmFsdWUgb25seSBpZiBhbGwgc2VsZWN0ZWQgaXRlbXMgYXJlIGdyb3VwcyB3aXRoIHRoZSBzYW1lIGxheW91dFxyXG4gICAgdGhpcy5nZXRTZWxlY3RlZFRoaW5nc0xheW91dCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoZGlhZ3JhbSA9PT0gbnVsbCB8fCBkaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICB2YXIgbGF5b3V0ID0gbnVsbDtcclxuICAgICAgICB2YXIgaXQgPSBkaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cClcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQsIGl0LnZhbHVlOiAnICsgZ3JvdXApO1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXBMYXlvdXQgPSAoZ3JvdXAuZGF0YSA/IGdyb3VwLmRhdGEubGF5b3V0IDogbnVsbCk7XHJcbiAgICAgICAgICAgIGlmIChsYXlvdXQgIT09IG51bGwgJiYgZ3JvdXBMYXlvdXQgIT0gbGF5b3V0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIGxheW91dCA9IGdyb3VwTGF5b3V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTZWxlY3RlZFRoaW5nc0xheW91dDogJyArIGxheW91dCk7XHJcblxyXG4gICAgICAgIHJldHVybiBsYXlvdXQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNldHMgdGhlIGxheW91dCBvZiBhbGwgc2VsZWN0ZWQgdGhpbmdzIHRvIHRoZSBnaXZlbiBsYXlvdXRcclxuICAgIHRoaXMuc2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQgPSBmdW5jdGlvbihsYXlvdXROYW1lKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHZhciBpdCA9IGRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ2xheW91dCcsIGxheW91dE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldExheW91dHMoKS5zZXREZXNjZW5kYW50TGF5b3V0cyhncm91cCwgZ3JvdXAuZGF0YS5sYXlvdXQpO1xyXG4gICAgICAgICAgICAgICAgbWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHJlbGF0aW9uc2hpcCBvcHRpb25zIChkaXJlY3Rpb24pIC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLmdldFNlbGVjdGVkUmVsYXRpb25zaGlwc09yRGVmYXVsdERpcmVjdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBzZCA9IHNlbGYuZ2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzRGlyZWN0aW9uKCk7XHJcbiAgICAgICAgaWYgKHNkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFwRWRpdG9yT3B0aW9ucy5kZWZhdWx0UmVsYXRpb25zaGlwRGlyZWN0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gcmV0dXJucyBhIG5vbi1udWxsIHZhbHVlIG9ubHkgaWYgYWxsIHNlbGVjdGVkIGl0ZW1zIGFyZSByZWxhdGlvbnNoaXBzIHdpdGggdGhlIHNhbWUgZGlyZWN0aW9uXHJcbiAgICB0aGlzLmdldFNlbGVjdGVkUmVsYXRpb25zaGlwc0RpcmVjdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaWFncmFtID0gbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoZGlhZ3JhbSA9PT0gbnVsbCB8fCBkaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICB2YXIgdHlwZSA9IG51bGw7XHJcbiAgICAgICAgdmFyIGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIWl0LnZhbHVlIGluc3RhbmNlb2YgZ28uTGluaylcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgbGlua1R5cGUgPSAobGluay5kYXRhID8gbGluay5kYXRhLnR5cGUgOiBudWxsKTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgIT09IG51bGwgJiYgbGlua1R5cGUgIT0gdHlwZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB0eXBlID0gbGlua1R5cGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHlwZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0cyB0aGUgZGlyZWN0aW9uIG9mIGFsbCBzZWxlY3RlZCByZWxhdGlvbnNoaXBzIHRvIHRoZSBnaXZlbiBkaXJlY3Rpb25cclxuICAgIHRoaXMuc2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzRGlyZWN0aW9uID0gZnVuY3Rpb24oZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIGRpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIC8vZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY2hhbmdlIHJlbGF0aW9uc2hpcCBkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgdmFyIGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5MaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAvL2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHR5cGVcIik7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShpdC52YWx1ZS5kYXRhLCAndHlwZScsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAvL2RpYWdyYW0ubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oXCJjaGFuZ2UgbGluayB0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSByZWxhdGlvbnNoaXAgZGlyZWN0aW9uXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tIGhhbmRsZSBjb3JuZXIgY2xpY2tzIGFuZCBkb3VibGUgY2xpY2tzIC0tLS0tLS0tXHJcblxyXG4gICAgdmFyIF9jb3JuZXJDbGlja2VkID0gbnVsbDtcclxuICAgIHZhciBfY29ybmVyRnVuY3Rpb24gPSBudWxsO1xyXG4gICAgdmFyIF9jb3JuZXJUaW1lb3V0ID0gMzAwO1xyXG5cclxuICAgIHRoaXMuaGFuZGxlQ29ybmVyQ2xpY2sgPSBmdW5jdGlvbihjb3JuZXIsIHRoaW5nKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaGFuZGxlQ29ybmVyQ2xpY2s6IGNvcm5lciA9ICcgKyBjb3JuZXIgKyAnLCBjb3JuZXJDbGlja2VkID0gJyArIF9jb3JuZXJDbGlja2VkKTtcclxuICAgICAgICAvLyBhc3N1bWUgaXQncyBhIHNpbmdsZSBjbGljaywgYW5kIHNldCBoYW5kbGVyXHJcbiAgICAgICAgX2Nvcm5lckZ1bmN0aW9uID0gZ2V0Q29ybmVyRnVuY3Rpb24oY29ybmVyLCAxKTtcclxuICAgICAgICAvLyBhbHJlYWR5IGNsaWNrZWQsIHNvIGl0J3MgYSBkb3VibGUgY2xpY2s7IGNoYW5nZSBoYW5kbGVyXHJcbiAgICAgICAgaWYgKF9jb3JuZXJDbGlja2VkID09IGNvcm5lcikge1xyXG4gICAgICAgICAgICBfY29ybmVyRnVuY3Rpb24gPSBnZXRDb3JuZXJGdW5jdGlvbihjb3JuZXIsIDIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaGFuZGxlQ29ybmVyQ2xpY2s6IGRvdWJsZSBjbGljayBvbiAnICsgY29ybmVyKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZW1lbWJlciB0aGF0IGF0IGxlYXN0IG9uZSBjbGljayBoYXMgaGFwcGVuZWQgZm9yIHRoZSBjdXJyZW50IGNvcm5lclxyXG4gICAgICAgIF9jb3JuZXJDbGlja2VkID0gY29ybmVyO1xyXG5cclxuICAgICAgICAvLyBzZXQgdGltZXIgdG8gaW52b2tlIHdoYXRldmVyIGhhbmRsZXIgd2UgaGF2ZSByZWFkeSB0byBnbyAodW5sZXNzIGFub3RoZXIgY2xpY2sgaGFwcGVucyB3aXRoaW4gdGhlIGludGVydmFsKVxyXG4gICAgICAgIHZhciB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIGRpbmchIGludm9rZSBpdFxyXG4gICAgICAgICAgICBpZiAoX2Nvcm5lckZ1bmN0aW9uID09IHNlbGYuc2hvd0Nvcm5lclRpcCkge1xyXG4gICAgICAgICAgICAgICAgX2Nvcm5lckZ1bmN0aW9uKHRoaW5nLCBjb3JuZXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2Nvcm5lckZ1bmN0aW9uKHRoaW5nKTsgLy8gZG9uJ3QgcGFzcyB0aGUgY29ybmVyIGFyZyB0byB0aGluZ3MgbGlrZSBjcmVhdGVDaGlsZCB0aGF0IGhhdmUgYSBkaWZmZXJlbnQgc2Vjb25kIGFyZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IGhhbmRsZXIgYW5kIGNsaWNrZWQgZmxhZ1xyXG4gICAgICAgICAgICBfY29ybmVyRnVuY3Rpb24gPSBnZXRDb3JuZXJGdW5jdGlvbihjb3JuZXIsIDEpO1xyXG4gICAgICAgICAgICBfY29ybmVyQ2xpY2tlZCA9IG51bGw7XHJcbiAgICAgICAgfSwgX2Nvcm5lclRpbWVvdXQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDb3JuZXJGdW5jdGlvbihjb3JuZXIsIGNsaWNrcykge1xyXG4gICAgICAgIGlmIChjb3JuZXIgPT0gXCJEXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IHNlbGYuc2hvd0Nvcm5lclRpcCA6IG1hcC5jcmVhdGVTaXN0ZXIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29ybmVyID09IFwiU1wiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09IDEgPyBtYXAudG9nZ2xlU0V4cGFuc2lvbiA6IG1hcC5jcmVhdGVDaGlsZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3JuZXIgPT0gXCJSXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IHNlbGYuc2hvd0Nvcm5lclRpcCA6IG1hcC5jcmVhdGVSVG9TaXN0ZXIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29ybmVyID09IFwiUFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09IDEgPyBtYXAudG9nZ2xlUEV4cGFuc2lvbiA6IG1hcC5nZXRQZXJzcGVjdGl2ZXMoKS5zZXRQRWRpdG9yUG9pbnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29ybmVyID09PSBcIlwiKSB7IC8vIGNsaWNrIG9uIHRleHRcclxuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT0gMSA/IHNlbGYuc2hvd0Nvcm5lclRpcCA6IGVkaXRUZXh0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0Q29ybmVyRnVuY3Rpb246IG5vIGZ1bmN0aW9uIGZvdW5kIGZvciBjb3JuZXI6ICcgKyBjb3JuZXIgKyAnIScpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBOQjogaW4gdGhpcyBjYXNlIHRoZSB0aGluZyBpcyBhY3R1YWxseSB0aGUgVGV4dEJveCwgZXhjZXB0IGluIG91dGxpbmUgbGF5b3V0IGl0IGlzIGEgUGFuZWwgaWYgdGhlIGJveCBpcyBkb3VibGUtY2xpY2tlZC4uLlxyXG4gICAgZnVuY3Rpb24gZWRpdFRleHQodGhpbmcsIGNvcm5lcikge1xyXG4gICAgICAgIGlmICghJHNjb3BlLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnZWRpdFRleHQsIHRoaW5nOiAnICsgdGhpbmcpO1xyXG4gICAgICAgIGlmICh0aGluZyBpbnN0YW5jZW9mIGdvLlBhbmVsKSB7IC8vIG91dGxpbmUgbGF5b3V0XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gdGhpbmcucGFydDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2VkaXRUZXh0LCBwYXJ0OiAnICsgcGFydCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgcGFydC5kYXRhICYmIChwYXJ0LmRhdGEubGF5b3V0ID09ICdsZWZ0JyB8fCBwYXJ0LmRhdGEubGF5b3V0ID09ICdyaWdodCcpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dEJsb2NrTmFtZSA9ICdleHRlcm5hbHRleHQtJyArIHBhcnQuZGF0YS5sYXlvdXQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IHRoaW5nLnBhcnQuZmluZE9iamVjdCh0ZXh0QmxvY2tOYW1lKTtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpbmcgPSB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1hcC5nZXREaWFncmFtKCkuY29tbWFuZEhhbmRsZXIuZWRpdFRleHRCbG9jayh0aGluZyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0gaGVscCB0aXAgZnVuY3Rpb25zIC0gc2VlIGFsc28gdXNlci5qcywgdmlld3MvbWFwcy9oZWxwX3RhYiAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBzaG93cyB0aGluZ1RpcCBvciBvbmUgb2YgdGhlIGNvcm5lclhUaXBzXHJcbiAgICB0aGlzLnNob3dDb3JuZXJUaXAgPSBmdW5jdGlvbih0aGluZywgY29ybmVyKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0Nvcm5lclRpcCcpO1xyXG4gICAgICAgIGlmIChjb3JuZXIgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2hvd0hlbHBUaXAoJ3RoaW5nVGlwJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5zaG93SGVscFRpcCgnY29ybmVyJyArIGNvcm5lciArICdUaXAnKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2hvd0hlbHBUaXAgPSBmdW5jdGlvbih0aXApIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdzaG93SGVscFRpcDogJyArIHRpcCk7XHJcblxyXG4gICAgICAgIC8vIGRvbid0IHNob3cgaGVscCBpZiBpbiBwcmVzZW50ZXJcclxuICAgICAgICBpZiAoc2VsZi5jdXJyZW50VGFiSXMoc2VsZi5UQUJfSURfUFJFU0VOVEVSKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxmLmhlbHBUaXAgPSB0aXA7XHJcbiAgICAgICAgLy8kc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICAgICAgJCgnI2hlbHAtdGlwJykuc2hvdygpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkKCcjaGVscC10aXAnKS5mYWRlT3V0KDUwMCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmhlbHBUaXAgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgLy8kc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIDUwMDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZWRpdCBtYXAgVXNlclRhZ3MgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgJHNjb3BlLnRhZ2dpbmcgPSBuZXcgU2FuZGJhbmtUYWdnaW5nKCRzY29wZSk7XHJcblxyXG4gICAgdGhpcy5lZGl0VXNlclRhZ3MgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUudGFnZ2luZy5vcGVuTW9kYWwoXHJcbiAgICAgICAgICAgIFskc2NvcGUubWFwSWRdLFxyXG4gICAgICAgICAgICB0cnVlLCAvLyBzaG93IGRlc2NyaXB0aW9uIGZpZWxkXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldEF1dG9zYXZlKCkuc2F2ZU5vdygnZWRpdF91c2VydGFncycpO1xyXG4gICAgICAgICAgICB9IC8vIG9uIHVwZGF0ZVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBlZGl0IG1hcCBzaGFyaW5nIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5zaGFyaW5nID0gbmV3IFNhbmRiYW5rU2hhcmluZygkc2NvcGUpO1xyXG5cclxuICAgIHRoaXMuZWRpdE1hcFNoYXJlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5zaGFyaW5nLm9wZW5Nb2RhbChcclxuICAgICAgICAgICAgWyRzY29wZS5tYXBJZF0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge30gLy8gb24gdXBkYXRlXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHByaW50L2V4cG9ydCB0byBpbWFnZSAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLnByaW50U2xpZGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgbWFwLmdldFByZXNlbnRlcigpLmNyZWF0ZVNsaWRlVGh1bWJuYWlscygpO1xyXG4gICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgd2luZG93LnByaW50KCk7XHJcbiAgICAgICAgfSwgNTAwKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIE1JTExJT04gPSAxMDAwICogMTAwMDtcclxuXHJcbiAgICB0aGlzLmV4cG9ydFRvSW1hZ2UgPSBmdW5jdGlvbihmb3JtYXQpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLmltYWdlRXhwb3J0TG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgJCgnI2V4cG9ydC1pbWFnZSBpbWcnKS5yZW1vdmUoKTtcclxuICAgICAgICBtYXAuZ2V0VGVtcGxhdGVzKCkuc2hvd0V4cG9ydEZvb3RlcigpO1xyXG5cclxuICAgICAgICB2YXIgcmVjdCA9IG1hcC5nZXREaWFncmFtKCkuY29tcHV0ZVBhcnRzQm91bmRzKG1hcC5nZXREaWFncmFtKCkubm9kZXMpLmNvcHkoKTtcclxuXHJcbiAgICAgICAgdmFyIGltYWdlTUIgPSByZWN0LndpZHRoICogcmVjdC5oZWlnaHQgKiA0IC8gTUlMTElPTjsgLy8gNCBieXRlcy9waXhlbFxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2ltYWdlTUI6ICcgKyBpbWFnZU1CKTtcclxuXHJcbiAgICAgICAgLy8gbWFrZSB0aGUgbWF4IHNpemUgb2YgdGhlIGltYWdlIDEwTUJcclxuICAgICAgICAvLyBwbmdTaXplID0gaW1hZ2VNQiAqIHNjYWxlICogc2NhbGVcclxuICAgICAgICAvLyBzbyBtYXggc2NhbGUgPSBzcXJ0KHBuZ1NpemUgLyBpbWFnZU1CKVxyXG4gICAgICAgIC8vIFRoZXNlIGNhbGN1bGF0aW9ucyBkb24ndCBzZWVtIHRvIGJlIHJpZ2h0LCBidXQgaW4gcHJhY3RpY2UgdXNpbmcgNTAwIGhlcmVcclxuICAgICAgICAvLyB3ZSBnZXQgYSBzY2FsZSBvZiAyLjQzIGZvciBhbiBpbWFnZSAxOTk4NCB4IDM0MjQgcGl4ZWxzXHJcbiAgICAgICAgLy8gd2hpY2ggcmVzdWx0cyBpbiBhIGZpbGUgc2l6ZSBvZiAxLjg4IE1CIGF0IDMyIGJpdHMvcGl4ZWwuLi5cclxuICAgICAgICAvLyBPUiAyODM4MCB4IDUxOTYgcGl4ZWxzLCBzY2FsZSA9IDMuNDEgPT4gZmlsZSBzaXplID0gMy40OSBNQlxyXG4gICAgICAgIHZhciBzY2FsZSA9IDQ7XHJcbiAgICAgICAgaWYgKGltYWdlTUIpIHtcclxuICAgICAgICAgICAgc2NhbGUgPSBNYXRoLm1pbig0LCBNYXRoLnNxcnQoNTAgLyBpbWFnZU1CKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdpbWFnZSBkaW1lbnNpb25zOiAnICsgcmVjdC53aWR0aCArICcgeCAnICsgcmVjdC5oZWlnaHQgKyAnLCBpbWFnZSBieXRlczogJyArIChyZWN0LndpZHRoICogcmVjdC5oZWlnaHQgKiA0KSArIFxyXG4gICAgICAgIC8vICAgICAgICAnLCBpbWFnZU1COiAnICsgaW1hZ2VNQiArICcsIHNjYWxlOiAnICsgc2NhbGUpO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2hvd0ltYWdlRXhwb3J0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdmFyIHBhcnRzVG9FeHBvcnQgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHBhcnRzVG9FeHBvcnQuYWRkQWxsKG1hcC5nZXREaWFncmFtKCkubm9kZXMpO1xyXG4gICAgICAgIHBhcnRzVG9FeHBvcnQuYWRkQWxsKG1hcC5nZXREaWFncmFtKCkubGlua3MpO1xyXG4gICAgICAgIHBhcnRzVG9FeHBvcnQucmVtb3ZlKG1hcC5nZXRQcmVzZW50ZXIoKS5zbGlkZUJsb2NrZXIpO1xyXG5cclxuICAgICAgICB2YXIgZG9JbWFnZSA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgaW1nID0gbWFwLmdldERpYWdyYW0oKS5tYWtlSW1hZ2Uoe1xyXG4gICAgICAgICAgICAgICAgcGFydHM6IHBhcnRzVG9FeHBvcnQsXHJcbiAgICAgICAgICAgICAgICBtYXhTaXplOiBuZXcgZ28uU2l6ZSgocmVjdC53aWR0aCArIDIwMCkgKiBzY2FsZSwgKHJlY3QuaGVpZ2h0ICsgMjAwKSAqIHNjYWxlKSxcclxuICAgICAgICAgICAgICAgIHNjYWxlOiBzY2FsZSxcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwMCAqIHNjYWxlLFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJyNmZmZmZmYnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJCgnI2V4cG9ydC1pbWFnZScpLmFwcGVuZChpbWcpO1xyXG4gICAgICAgICAgICAkc2NvcGUuaW1hZ2VFeHBvcnRMb2FkaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBtYXAuZ2V0VGVtcGxhdGVzKCkuaGlkZUV4cG9ydEZvb3RlcigpO1xyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLSB1dGlscyAtLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGhpcy5zcGxpdExpbmVzID0gZnVuY3Rpb24odGV4dCkge1xyXG4gICAgICAgIHJldHVybiB0ZXh0LnNwbGl0KC9cXG4vKTtcclxuICAgIH07XHJcbn07Iiwid2luZG93LlVzZXJDdHJsID0gZnVuY3Rpb24oJHNjb3BlKSB7XHJcblxyXG4gICAgLy8gcXVlcnkgc3RyaW5nIHBhcmFtc1xyXG4gICAgJHNjb3BlLnBhcmFtcyA9IFVSSSh3aW5kb3cubG9jYXRpb24pLnF1ZXJ5KHRydWUpO1xyXG5cclxuICAgIC8vIGF1dG8tb3BlbiB0aGlua3F1ZXJ5P1xyXG4gICAgJHNjb3BlLnRoaW5rcXVlcnkgPSAoJHNjb3BlLnBhcmFtcy50aGlua3F1ZXJ5ID8gdHJ1ZSA6IGZhbHNlKTtcclxuXHJcbiAgICAkc2NvcGUudXNlcklkID0gd2luZG93LnVzZXJJZDsgLy8gc2V0IGluIGxheW91dHMvdXNlclxyXG4gICAgJHNjb3BlLnVzZXJJc0FkbWluID0gd2luZG93LnVzZXJJc0FkbWluO1xyXG4gICAgJHNjb3BlLnVzZXJOYW1lID0gJyc7XHJcbiAgICAkc2NvcGUudXNlclByb2ZpbGUgPSBudWxsO1xyXG4gICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJyc7XHJcbiAgICAkc2NvcGUucGFzc3dvcmQgPSAnJztcclxuICAgICRzY29wZS5wYXNzd29yZENvbmZpcm0gPSAnJztcclxuXHJcbiAgICAkc2NvcGUuZ2V0TmV3V2luZG93TmFtZSA9IGZ1bmN0aW9uKGFjdGlvbiwgbWFwSWQpIHtcclxuICAgICAgICBpZiAoYWN0aW9uID09ICdWSUVXX01BUCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdWSUVXX01BUF8nICsgbWFwSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzaG93L2hpZGUgdGVzdHMgVUkgYW5kIG1vZGVsIGRlYnVnIGZvcm1cclxuICAgICRzY29wZS5zaG93VGVzdHMgPSBmYWxzZTtcclxuICAgICRzY29wZS5zaG93TW9kZWwgPSBmYWxzZTtcclxuXHJcbiAgICAkc2NvcGUudG9nZ2xlU2hvd1Rlc3RzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnNob3dUZXN0cyA9ICEkc2NvcGUuc2hvd1Rlc3RzO1xyXG4gICAgfTtcclxuICAgICRzY29wZS50b2dnbGVTaG93TW9kZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuc2hvd01vZGVsID0gISRzY29wZS5zaG93TW9kZWw7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRVc2VySWQgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICRzY29wZS51c2VySWQgPSBpZDtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZml4Um93SGVpZ2h0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbWFrZSBhbGwgY2VsbHMgaW4gYSByb3cgdGhlIHNhbWUgaGVpZ2h0XHJcbiAgICBmdW5jdGlvbiBmaXhSb3dIZWlnaHRzKCkge1xyXG4gICAgICAgIC8vIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vICAgICAkKCcucm93LWhlaWdodCcpLmVhY2goZnVuY3Rpb24oKSB7ICBcclxuICAgICAgICAvLyAgICAgICAgIHZhciBoaWdoZXN0Qm94ID0gMDtcclxuICAgICAgICAvLyAgICAgICAgICQoJz4gZGl2JywgdGhpcykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhlaWdodCgpID4gaGlnaGVzdEJveCkgXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGhpZ2hlc3RCb3ggPSAkKHRoaXMpLmhlaWdodCgpO1xyXG4gICAgICAgIC8vICAgICAgICAgfSk7ICBcclxuICAgICAgICAvLyAgICAgICAgICQoJz4gZGl2JywgdGhpcykuaGVpZ2h0KGhpZ2hlc3RCb3gpO1xyXG4gICAgICAgIC8vICAgICB9KTsgICAgICAgIFxyXG4gICAgICAgIC8vIH0sIDMwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS51c2VySWQpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICcvdXNlcnMvJyArICRzY29wZS51c2VySWQgKyAnL3Byb2ZpbGUuanNvbic7XHJcbiAgICAgICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KHVybCkudGhlbihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7IC8vIHN1Y2Nlc3NcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUgPSByZXNwb25zZS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRTZWxlY3RlZEFkbWluVGFncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRTZWxlY3RlZEZvbGxvd2FibGVPcmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jY3NUYWdnaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jY3NUYWdnaW5nLmxvYWRDY3NUYWdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZpeFJvd0hlaWdodHMoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZWFzb24pIHsgLy8gZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc3RvcFNwaW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgnQ291bGQgbm90IGxvYWQgdXNlciBwcm9maWxlIGRhdGEnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBjb3Vyc2VzL3N1YnNjcmlwdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gb3BlbiB0aGUgU3RyaXBlIENoZWNrb3V0IGRpYWxvZyBhbmQgZ2V0IGEgdG9rZW5cclxuICAgIC8vIE5COiBhbW91bnQgaXMgc3RvcmVkIGluIHRoZSBTdHJpcGUgcGxhbiBkZWZpbml0aW9uXHJcbiAgICAkc2NvcGUuYWRkU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24ocGxhbikge1xyXG4gICAgICAgIHZhciBoYW5kbGVyID0gU3RyaXBlQ2hlY2tvdXQuY29uZmlndXJlKHtcclxuICAgICAgICAgICAga2V5OiAkc2NvcGUudXNlclByb2ZpbGUuYWNjb3VudC5zdHJpcGVLZXksXHJcbiAgICAgICAgICAgIG5hbWU6IFwiU3Vic2NyaWJlIHRvIE1ldGFNYXBcIixcclxuICAgICAgICAgICAgaW1hZ2U6IFwiL2Fzc2V0cy9iYWRnZS1sb2dvLTY0LnBuZ1wiLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogcGxhbi5uYW1lLFxyXG4gICAgICAgICAgICBwYW5lbExhYmVsOiBcIlBheSB7e2Ftb3VudH19L1wiICsgcGxhbi5pbnRlcnZhbCxcclxuICAgICAgICAgICAgYW1vdW50OiBwbGFuLnByaWNlLFxyXG4gICAgICAgICAgICBhbGxvd1JlbWVtYmVyTWU6IGZhbHNlLFxyXG4gICAgICAgICAgICBlbWFpbDogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgIHRva2VuOiBmdW5jdGlvbih0b2tlbiwgYXJncykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Rva2VuOiAnLCB0b2tlbik7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvY2hhcmdlcy9zdWJzY3JpYmUnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhbl9pZDogcGxhbi5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuX2lkOiB0b2tlbi5pZFxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnU3Vic2NyaXB0aW9uIGNyZWF0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LmVycm9yKCdTdWJzY3JpcHRpb24gY291bGQgbm90IGJlIGNyZWF0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBoYW5kbGVyLm9wZW4oKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gZm9yIGJ1eS1jb3Vyc2UtYnV0dG9uIGRpcmVjdGl2ZVxyXG4gICAgJHNjb3BlLmdldEJ1eUJ1dHRvbkxhYmVsID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICB2YXIgY291cnNlO1xyXG4gICAgICAgIGlmIChjb3Vyc2UgPSBnZXRGcmVlQ291cnNlKGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0ZyZWUnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY291cnNlID0gZ2V0RW5yb2xsZWRDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnRW5yb2xsZWQnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY291cnNlID0gZ2V0RW5yb2xsYWJsZUNvdXJzZShpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdFbnJvbGwgLSAkJyArIChjb3Vyc2UucHJpY2UgLyAxMDApLnRvRml4ZWQoMik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmdldENvdXJzZVN0YXR1c1N1bW1hcnkgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIHZhciBjb3Vyc2UgPSAkc2NvcGUuZ2V0Q291cnNlKGlkKTtcclxuICAgICAgICBpZiAoY291cnNlKSB7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gY291cnNlLnN0ZXBzQ29tcGxldGVkICsgJyBvZiAnICsgY291cnNlLnN0ZXBzICsgJyBzdGVwcyBjb21wbGV0ZWQnO1xyXG4gICAgICAgICAgICBpZiAoY291cnNlLmVucm9sbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGV4dCA9IFwiRW5yb2xsZWQgXCIgKyBjb3Vyc2UuZW5yb2xtZW50LmRhdGUgK1xyXG4gICAgICAgICAgICAgICAgICAgIChjb3Vyc2UuZW5yb2xtZW50LnN0cmlwZURhdGEucmVmdW5kZWQgPyBcIiAoUmVmdW5kZWQpXCIgOiBcIlwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAtICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZS5jb2RlICsgJyAtICcgKyB0ZXh0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmdldENvdXJzZUNvbXBsZXRlZFBlcmNlbnQgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIHZhciBjb3Vyc2UgPSAkc2NvcGUuZ2V0Q291cnNlKGlkKTtcclxuICAgICAgICBpZiAoY291cnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2Uuc3RlcHNDb21wbGV0ZWRQZXJjZW50O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLm1heWJlQnV5Q291cnNlID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICB2YXIgY291cnNlO1xyXG4gICAgICAgIGlmIChjb3Vyc2UgPSBnZXRGcmVlQ291cnNlKGlkKSkge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvY291cnNlcy8nICsgY291cnNlLmlkO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY291cnNlID0gZ2V0RW5yb2xsZWRDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9jb3Vyc2VzLycgKyBjb3Vyc2UuaWQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxhYmxlQ291cnNlKGlkKSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuYnV5Q291cnNlKGNvdXJzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZ2V0Q291cnNlID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICB2YXIgY291cnNlO1xyXG4gICAgICAgIGlmIChjb3Vyc2UgPSBnZXRGcmVlQ291cnNlKGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY291cnNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY291cnNlID0gZ2V0RW5yb2xsZWRDb3Vyc2UoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3Vyc2UgPSBnZXRFbnJvbGxhYmxlQ291cnNlKGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY291cnNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0RnJlZUNvdXJzZShpZCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGUgJiYgXy5maW5kKCRzY29wZS51c2VyUHJvZmlsZS5mcmVlQWNjZXNzaWJsZUNvdXJzZXMsIGZ1bmN0aW9uKGNvdXJzZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY291cnNlLmlkID09IGlkICYmIGNvdXJzZS5lbnJvbG1lbnQgPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEVucm9sbGVkQ291cnNlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZSAmJiBfLmZpbmQoJHNjb3BlLnVzZXJQcm9maWxlLmZyZWVBY2Nlc3NpYmxlQ291cnNlcywgZnVuY3Rpb24oY291cnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vyc2UuaWQgPT0gaWQgJiYgY291cnNlLmVucm9sbWVudCAhPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEVucm9sbGFibGVDb3Vyc2UoaWQpIHtcclxuICAgICAgICByZXR1cm4gJHNjb3BlLnVzZXJQcm9maWxlICYmIF8uZmluZCgkc2NvcGUudXNlclByb2ZpbGUubm9uRnJlZUFjY2Vzc2libGVDb3Vyc2VzLCBmdW5jdGlvbihjb3Vyc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdXJzZS5pZCA9PSBpZDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBvcGVuIHRoZSBTdHJpcGUgQ2hlY2tvdXQgZGlhbG9nIGFuZCBnZXQgYSB0b2tlblxyXG4gICAgLy8gTkI6IGFtb3VudCBpcyBwYXNzZWQgZnJvbSBvdXIgY291cnNlIGRlZmluaXRpb25cclxuICAgICRzY29wZS5idXlDb3Vyc2UgPSBmdW5jdGlvbihjb3Vyc2UpIHtcclxuICAgICAgICB2YXIgaGFuZGxlciA9IFN0cmlwZUNoZWNrb3V0LmNvbmZpZ3VyZSh7XHJcbiAgICAgICAgICAgIGtleTogJHNjb3BlLnVzZXJQcm9maWxlLmFjY291bnQuc3RyaXBlS2V5LFxyXG4gICAgICAgICAgICBuYW1lOiBcIkVucm9sbCBpbiBDb3Vyc2VcIixcclxuICAgICAgICAgICAgaW1hZ2U6IFwiL2Fzc2V0cy9iYWRnZS1sb2dvLTY0LnBuZ1wiLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogY291cnNlLmNvZGUsXHJcbiAgICAgICAgICAgIGFtb3VudDogY291cnNlLnByaWNlLFxyXG4gICAgICAgICAgICBhbGxvd1JlbWVtYmVyTWU6IGZhbHNlLFxyXG4gICAgICAgICAgICBlbWFpbDogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgIHRva2VuOiBmdW5jdGlvbih0b2tlbiwgYXJncykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Rva2VuOiAnLCB0b2tlbik7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvY2hhcmdlcy9idXlfY291cnNlJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdXJzZV9jb2RlOiBjb3Vyc2UuY29kZSxcclxuICAgICAgICAgICAgICAgICAgICBjb3Vyc2VfcHJpY2U6IGNvdXJzZS5wcmljZSxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbl9pZDogdG9rZW4uaWRcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ0NvdXJzZSBwdXJjaGFzZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZWxvYWQgcGFnZSB0byBoYW5kbGUgc3RyaXBlIGJ1ZyAoPykgLSBsaW5rcyBub3QgY2xpY2thYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5lcnJvcignQ291cnNlIHB1cmNoYXNlIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdHJpcGUgZXJyb3I6ICcsIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBoYW5kbGVyLm9wZW4oKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNhbmNlbFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgIHdpbmRvdy5zdGFydFNwaW5uZXIoKTtcclxuICAgICAgICAkaHR0cC5kZWxldGUoJy9jaGFyZ2VzL3Vuc3Vic2NyaWJlP3N1YnNjcmlwdGlvbl9pZD0nICsgc3Vic2NyaXB0aW9uLmlkKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ1N1YnNjcmlwdGlvbiBjYW5jZWxsZWQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuZXJyb3IoJ1N1YnNjcmlwdGlvbiBjb3VsZCBub3QgYmUgY2FuY2VsbGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRlYnVnL3Rlc3Qgb25seVxyXG4gICAgJHNjb3BlLmNsZWFyQ3VzdG9tZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB3aW5kb3cuc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvY2hhcmdlcy9jbGVhcl9jdXN0b21lcicpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRpZnkuc3VjY2VzcygnQ3VzdG9tZXIgY2xlYXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydGlmeS5lcnJvcignQ3VzdG9tZXIgY291bGQgbm90IGJlIGNsZWFyZWQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0gcG9pbnRzIGFuZCBiYWRnZXMgLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5oYXNDdXJyZW50QmFkZ2UgPSBmdW5jdGlvbihrZXksIGxldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS51c2VyUHJvZmlsZSAmJiAkc2NvcGUudXNlclByb2ZpbGUuYmFkZ2VzLmN1cnJlbnRba2V5XSA9PSBsZXZlbDtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmhhc05ld0JhZGdlID0gZnVuY3Rpb24oa2V5LCBsZXZlbCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGUgJiYgJHNjb3BlLnVzZXJQcm9maWxlLmJhZGdlcy5uZXdba2V5XSA9PSBsZXZlbDtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmhhc05ld0JhZGdlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAkc2NvcGUudXNlclByb2ZpbGUgJiYgXy5rZXlzKCRzY29wZS51c2VyUHJvZmlsZS5iYWRnZXMubmV3KS5sZW5ndGggPiAwO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZ2V0QmFkZ2VEZWZpbml0aW9uID0gZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIF8uZmluZFdoZXJlKCRzY29wZS51c2VyUHJvZmlsZS5iYWRnZXMuZGVmaW5pdGlvbnMsIHtcclxuICAgICAgICAgICAga2V5OiBrZXlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSB0dXRvcmlhbCAtLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgJHNjb3BlLnR1dG9yaWFsRW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gd2luZG93Lm1hcERhdGEgIT09IHVuZGVmaW5lZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBzdGFydCB0dXRvcmlhbDpcclxuICAgICAgICB2YXIgX3R1dG9yaWFsID0gbmV3IFNhbmRiYW5rRWRpdG9yLlR1dG9yaWFsKCk7XHJcblxyXG4gICAgICAgICRzY29wZS5zdGFydFR1dG9yaWFsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIF90dXRvcmlhbC5zdGFydCgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlKSB7fVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIGZlZWRiYWNrIGZvcm0gLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuZmVlZGJhY2sgPSAnJztcclxuXHJcbiAgICAkc2NvcGUudG9nZ2xlRmVlZGJhY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKCcjZmVlZGJhY2stZHJvcGRvd24nKS5zbGlkZVRvZ2dsZSgnZmFzdCcpLmZpbmQoJ3RleHRhcmVhJykuZ2V0KDApLmZvY3VzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zdWJtaXRGZWVkYmFjayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkc2NvcGUuZmVlZGJhY2sgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjsgLy8gZW1wdHkgaW5wdXQuLi5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgdXJsOiAnL3VzZXJzL2ZlZWRiYWNrJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZixcclxuICAgICAgICAgICAgICAgIGZlZWRiYWNrOiAkc2NvcGUuZmVlZGJhY2tcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmVlZGJhY2sgPSAnJztcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdUaGFuayB5b3UgZm9yIHlvdXIgZmVlZGJhY2shJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yIHNlbmRpbmcgZmVlZGJhY2s6ICcsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnI2ZlZWRiYWNrLWRyb3Bkb3duJykuc2xpZGVUb2dnbGUoJ2Zhc3QnKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIHVzZXIncyB1c2VyIHRhZ3MgLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBOQjogdGhpcyBpcyBzaW1pbGFyIHRvIG1hcHMgdGFnZ2luZyBpbiB0YWdnaW5nLmpzIC0gYnV0IHNpbXBsZXIsIGFzIHdlIGRvIG5vdCBoYXZlIHRvIGRlYWwgd2l0aCBcclxuICAgIC8vIG11bHRpcGxlIHRhZ2dhYmxlIGl0ZW1zLCB3aGljaCBtZWFucyB0cmFja2luZyBleGlzdGluZyB2cy4gbmV3IHRhZ3MsIGV0Yy4uLlxyXG5cclxuICAgICRzY29wZS5uZXdUYWcgPSB7XHJcbiAgICAgICAgbmFtZTogJydcclxuICAgIH07XHJcblxyXG4gICAgLy8gdGFnIGF1dG9jb21wbGV0ZVxyXG4gICAgJHNjb3BlLmdldFVzZXJUYWdzID0gZnVuY3Rpb24odmlld1ZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHVybCA9ICcvdXNlcl90YWdzL2xpc3QuanNvbj9xPScgKyB2aWV3VmFsdWU7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEudGFncztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnVwZGF0ZVVzZXJVc2VyVGFncyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB0YWdMaXN0ID0gXy5wbHVjaygkc2NvcGUudXNlclByb2ZpbGUudXNlclRhZ3MsICduYW1lJykuam9pbignLCcpO1xyXG4gICAgICAgICRodHRwLnB1dCgnL3VzZXJfdGFncy91cGRhdGVfdXNlcl91c2VyX3RhZ3MnLCBbdGFnTGlzdF0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkVXNlclByb2ZpbGUoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9maWxlRWRpdFN0YXR1cyA9ICdUYWdzIHNhdmVkJztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgdGFncyc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZGVsZXRlVGFnID0gZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgdmFyIGkgPSBfLmluZGV4T2YoJHNjb3BlLnVzZXJQcm9maWxlLnVzZXJUYWdzLCB0YWcpO1xyXG4gICAgICAgICRzY29wZS51c2VyUHJvZmlsZS51c2VyVGFncy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgJHNjb3BlLnVwZGF0ZVVzZXJVc2VyVGFncygpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudGFnU2VsZWN0ZWQgPSBmdW5jdGlvbihpdGVtLCBtb2RlbCwgbGFiZWwpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd0YWdTZWxlY3RlZDogJywgaXRlbSwgbW9kZWwsIGxhYmVsKTtcclxuICAgICAgICAkc2NvcGUuYWRkVGFnKGl0ZW0ubmFtZSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5lZGl0aW5nVGFnS2V5cHJlc3MgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmFkZFRhZygkc2NvcGUubmV3VGFnLm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmFkZFRhZyA9IGZ1bmN0aW9uKHRhZ05hbWUpIHtcclxuICAgICAgICAkc2NvcGUudXNlclByb2ZpbGUudXNlclRhZ3MucHVzaCh7XHJcbiAgICAgICAgICAgIG5hbWU6IHRhZ05hbWVcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUubmV3VGFnLm5hbWUgPSAnJztcclxuICAgICAgICAkc2NvcGUudXBkYXRlVXNlclVzZXJUYWdzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLSB1c2VyJ3MvbWFwJ3MgQ0NTIHRhZ3MgLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyB0aGlzIG1hbmFnZXMgQ0NTIHRhZ3MgZm9yIGVpdGhlciB0aGUgY3VycmVudCB1c2VyIG9yIHRoZSBjdXJyZW50IG1hcCwgXHJcbiAgICAvLyBkZXBlbmRpbmcgd2hpY2ggcGFnZSB3ZSdyZSBvbiAtIG1hcElkIGdldHMgb3ZlcnJpZGRlbiBpbiBlZGl0b3IuanMgaWYgd2UncmUgZWRpdGluZyBhIG1hcFxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgJHNjb3BlLmNjc1RhZ2dpbmcgPSBuZXcgU2FuZGJhbmtDY3NUYWdnaW5nKCRzY29wZSk7XHJcbiAgICAgICAgJHNjb3BlLmNjc1RhZ2dpbmcubWFwSWQgPSBudWxsO1xyXG4gICAgfSBjYXRjaCAoZSkge31cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0gdXNlcidzIGFkbWluIHRhZ3MgLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBrZXkgKGluZGV4KTogYWRtaW4gdGFnIElEOyB2YWx1ZTogdHJ1ZS9mYWxzZSAoaWYgdXNlciBmb2xsb3dzIHRoZSBhZG1pbiB0YWcpXHJcbiAgICAkc2NvcGUuc2VsZWN0ZWRVc2VyQWRtaW5UYWdzID0gW107XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdFNlbGVjdGVkQWRtaW5UYWdzKCkge1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZFVzZXJBZG1pblRhZ3MgPSBbXTtcclxuICAgICAgICBfLmVhY2goJHNjb3BlLnVzZXJQcm9maWxlLmFkbWluVGFncywgZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgICAgIGlmIChfLmZpbmRXaGVyZSgkc2NvcGUudXNlclByb2ZpbGUudXNlckFkbWluVGFncywge1xyXG4gICAgICAgICAgICAgICAgaWQ6IHRhZy5pZFxyXG4gICAgICAgICAgICB9KSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVXNlckFkbWluVGFnc1t0YWcuaWRdID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS51cGRhdGVVc2VyQWRtaW5UYWdzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkVGFnTmFtZXMgPSBfLm1hcCgkc2NvcGUudXNlclByb2ZpbGUuYWRtaW5UYWdzLCBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRzY29wZS5zZWxlY3RlZFVzZXJBZG1pblRhZ3NbdGFnLmlkXSA/IHRhZy5uYW1lIDogbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgdGFnTGlzdCA9IF8ud2l0aG91dChzZWxlY3RlZFRhZ05hbWVzLCBudWxsKS5qb2luKCcsJyk7XHJcbiAgICAgICAgJGh0dHAucHV0KCcvYWRtaW5fdGFncy91cGRhdGVfdXNlcl9hZG1pbl90YWdzJywgW3RhZ0xpc3RdKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnSW50ZXJlc3RzIHNhdmVkJztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnQ291bGQgbm90IHNhdmUgaW50ZXJlc3RzJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLSB1c2VyJ3MgZm9sbG93ZWQgb3JncyAtLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGtleSAoaW5kZXgpOiBvcmcgSUQ7IHZhbHVlOiB0cnVlL2ZhbHNlIChpZiB1c2VyIGZvbGxvd3MgdGhlIG9yZylcclxuICAgICRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zID0gW107XHJcblxyXG4gICAgJHNjb3BlLnVzZXJJc0ZvbGxvd2luZ09yZyA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuICRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zW2lkXTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnRvZ2dsZVVzZXJGb2xsb3dpbmdPcmcgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgIGlmICghJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbaWRdIHx8IGNvbmZpcm0oJ1N0b3AgZm9sbG93aW5nIHRoaXMgVGhpbmtOYXRpb24/JykpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnNbaWRdID0gISRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zW2lkXTtcclxuICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUZvbGxvd2VkT3JnYW5pemF0aW9ucygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdFNlbGVjdGVkRm9sbG93YWJsZU9yZ3MoKSB7XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkRm9sbG93YWJsZU9yZ2FuaXphdGlvbnMgPSBbXTtcclxuICAgICAgICBfLmVhY2goJHNjb3BlLnVzZXJQcm9maWxlLmZvbGxvd2VkT3JnYW5pemF0aW9ucywgZnVuY3Rpb24ob3JnKSB7XHJcbiAgICAgICAgICAgIGlmIChfLmZpbmRXaGVyZSgkc2NvcGUudXNlclByb2ZpbGUuZm9sbG93YWJsZU9yZ2FuaXphdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgIGlkOiBvcmcuaWRcclxuICAgICAgICAgICAgfSkpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEZvbGxvd2FibGVPcmdhbml6YXRpb25zW29yZy5pZF0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLnVwZGF0ZUZvbGxvd2VkT3JnYW5pemF0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBzZWxlY3RlZE9yZ0lkcyA9IF8ubWFwKCRzY29wZS51c2VyUHJvZmlsZS5mb2xsb3dhYmxlT3JnYW5pemF0aW9ucywgZnVuY3Rpb24ob3JnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkc2NvcGUuc2VsZWN0ZWRGb2xsb3dhYmxlT3JnYW5pemF0aW9uc1tvcmcuaWRdID8gb3JnLmlkIDogbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgb3JnSWRMaXN0ID0gXy53aXRob3V0KHNlbGVjdGVkT3JnSWRzLCBudWxsKS5qb2luKCcsJyk7XHJcbiAgICAgICAgJGh0dHAucHV0KCcvb3JnYW5pemF0aW9uX2ZvbGxvd3MvdXBkYXRlX3VzZXJfb3JnYW5pemF0aW9uX2ZvbGxvd3MnLCBbb3JnSWRMaXN0XSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRVc2VyUHJvZmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1RoaW5rTmF0aW9ucyBzYXZlZCc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ0NvdWxkIG5vdCBzYXZlIFRoaW5rTmF0aW9ucyc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0gdXNlcidzIG9yZyBtZW1iZXJzaGlwcyAtLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5qb2luTmF0aW9uID0gbmV3IFNhbmRiYW5rSm9pbk5hdGlvbigkc2NvcGUpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldE1lbWJlcnNoaXBGb3JPcmcoaWQpIHtcclxuICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUoJHNjb3BlLnVzZXJQcm9maWxlLm1lbWJlcnNoaXBzLCB7XHJcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBpZFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS51c2VySXNNZW1iZXJPZk9yZyA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS51c2VyUHJvZmlsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKGdldE1lbWJlcnNoaXBGb3JPcmcoaWQpICE9IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnRvZ2dsZVVzZXJNZW1iZXJPZk9yZyA9IGZ1bmN0aW9uKGlkLCBuYW1lKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS51c2VySXNNZW1iZXJPZk9yZyhpZCkpIHtcclxuICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1JlbW92ZSB5b3VyIG1lbWJlcnNoaXAgaW4gdGhpcyBUaGlua05hdGlvbj8nKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lbWJlcnNoaXAgPSBnZXRNZW1iZXJzaGlwRm9yT3JnKGlkKTtcclxuICAgICAgICAgICAgICAgICRodHRwLmRlbGV0ZSgnL21lbWJlcnNoaXBzLycgKyBtZW1iZXJzaGlwLmlkICsgJy5qc29uJylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkc2NvcGUuam9pbk5hdGlvbi5vcGVuTW9kYWwoXHJcbiAgICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgICAgIG5hbWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZm9sbG93aW5nIG90aGVyIHVzZXJzIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICRzY29wZS5mb2xsb3dVc2VyID0gZnVuY3Rpb24odXNlcikge1xyXG4gICAgICAgICRodHRwLnBvc3QoJy91c2VyX2ZvbGxvd3MuanNvbicsIHtcclxuICAgICAgICAgICAgZm9sbG93ZWVfaWQ6IHVzZXIuaWRcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyLmZvbGxvd0lkID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ1lvdSBhcmUgbm93IGZvbGxvd2luZyAnICsgdXNlci5uYW1lKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7fSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS51bmZvbGxvd1VzZXIgPSBmdW5jdGlvbih1c2VyKSB7XHJcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvdXNlcl9mb2xsb3dzLycgKyB1c2VyLmZvbGxvd0lkICsgJy5qc29uJykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgdXNlci5mb2xsb3dJZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBhbGVydGlmeS5zdWNjZXNzKCdZb3UgYXJlIG5vIGxvbmdlciBmb2xsb3dpbmcgJyArIHVzZXIubmFtZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge30pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gZm9sbG93aW5nIHRhZ3MgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnVuY3Rpb24gZm9sbG93VGFnKGNvbnRyb2xsZXIsIHRhZykge1xyXG4gICAgICAgICRodHRwLnBvc3QoJy8nICsgY29udHJvbGxlciArICcvJyArIHRhZy5pZCArICcvZm9sbG93Lmpzb24nLCB7XHJcbiAgICAgICAgICAgIGlkOiB0YWcuaWRcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICB0YWcuZm9sbG93aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ1lvdSBhcmUgbm93IGZvbGxvd2luZyAnICsgdGFnLm5hbWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHt9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1bmZvbGxvd1RhZyhjb250cm9sbGVyLCB0YWcpIHtcclxuICAgICAgICAkaHR0cC5kZWxldGUoJy8nICsgY29udHJvbGxlciArICcvJyArIHRhZy5pZCArICcvdW5mb2xsb3cuanNvbicpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHRhZy5mb2xsb3dpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoJ1lvdSBhcmUgbm8gbG9uZ2VyIGZvbGxvd2luZyAnICsgdGFnLm5hbWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHt9KTtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUuZm9sbG93VXNlclRhZyA9IGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgIGZvbGxvd1RhZygndXNlcl90YWdzJywgdGFnKTtcclxuICAgIH07XHJcbiAgICAkc2NvcGUudW5mb2xsb3dVc2VyVGFnID0gZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgdW5mb2xsb3dUYWcoJ3VzZXJfdGFncycsIHRhZyk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5mb2xsb3dBZG1pblRhZyA9IGZ1bmN0aW9uKHRhZykge1xyXG4gICAgICAgIGZvbGxvd1RhZygnYWRtaW5fdGFncycsIHRhZyk7XHJcbiAgICB9O1xyXG4gICAgJHNjb3BlLnVuZm9sbG93QWRtaW5UYWcgPSBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICB1bmZvbGxvd1RhZygnYWRtaW5fdGFncycsIHRhZyk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5mb2xsb3dDY3NUYWcgPSBmdW5jdGlvbih0YWcpIHtcclxuICAgICAgICBmb2xsb3dUYWcoJ2NvbW1vbl9jb3JlX3N0YW5kYXJkcycsIHRhZyk7XHJcbiAgICB9O1xyXG4gICAgJHNjb3BlLnVuZm9sbG93Q2NzVGFnID0gZnVuY3Rpb24odGFnKSB7XHJcbiAgICAgICAgdW5mb2xsb3dUYWcoJ2NvbW1vbl9jb3JlX3N0YW5kYXJkcycsIHRhZyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBhdXRvLXNhdmUgdXNlciBwcm9maWxlIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGRvbid0IGxldCBhdXRvc2F2ZSBiZSB0cmlnZ2VyZWQgbW9yZSB0aGFuIGV2ZXJ5IE4gbWlsbGlzZWNvbmRzLi4uXHJcbiAgICAkc2NvcGUuYXV0b3NhdmUgPSBfLmRlYm91bmNlKGF1dG9zYXZlTm93LCAyMDAwKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhdXRvc2F2ZU5vdygpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdhdXRvc2F2aW5nIHVzZXIgcHJvZmlsZScpO1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBlbWFpbDogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgIGFsdF9lbWFpbDogJHNjb3BlLnVzZXJQcm9maWxlLnVzZXIuYWx0RW1haWwsXHJcbiAgICAgICAgICAgIGZpcnN0X25hbWU6ICRzY29wZS51c2VyUHJvZmlsZS51c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgbGFzdF9uYW1lOiAkc2NvcGUudXNlclByb2ZpbGUudXNlci5sYXN0TmFtZSxcclxuICAgICAgICAgICAgYWJvdXRfbWU6ICRzY29wZS51c2VyUHJvZmlsZS51c2VyLmFib3V0TWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICgkc2NvcGUucGFzc3dvcmRzTWF0Y2goKSAmJiAkc2NvcGUucGFzc3dvcmQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGRhdGEucGFzc3dvcmQgPSAkc2NvcGUucGFzc3dvcmQ7XHJcbiAgICAgICAgICAgIGRhdGEucGFzc3dvcmRfY29uZmlybWF0aW9uID0gJHNjb3BlLnBhc3N3b3JkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhcnRTcGlubmVyKCk7XHJcbiAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1NhdmluZy4uLic7XHJcbiAgICAgICAgJGh0dHAucHV0KCcvdXNlcnMvJyArICRzY29wZS51c2VySWQsIGRhdGEpLnRoZW4oXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF8uaGFzKGRhdGEsICdwYXNzd29yZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ1Byb2ZpbGUgYW5kIHBhc3N3b3JkIHNhdmVkJztcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnUHJvZmlsZSBzYXZlZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ0NvdWxkIG5vdCBzYXZlIHByb2ZpbGUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUucGFzc3dvcmRzTWF0Y2ggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gKCEkc2NvcGUucGFzc3dvcmQubGVuZ3RoICYmICEkc2NvcGUucGFzc3dvcmRDb25maXJtLmxlbmd0aCkgfHxcclxuICAgICAgICAgICAgJHNjb3BlLnBhc3N3b3JkID09ICRzY29wZS5wYXNzd29yZENvbmZpcm07XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSB1cGxvYWQgYXZhdGFyIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHVzaW5nOiBodHRwczovL2dpdGh1Yi5jb20vZGFuaWFsZmFyaWQvYW5ndWxhci1maWxlLXVwbG9hZFxyXG4gICAgJHNjb3BlLm9uQXZhdGFyRmlsZVNlbGVjdCA9IGZ1bmN0aW9uKCRmaWxlcykge1xyXG4gICAgICAgIHN0YXJ0U3Bpbm5lcigpO1xyXG4gICAgICAgIC8vJGZpbGVzOiBhbiBhcnJheSBvZiBmaWxlcyBzZWxlY3RlZCwgZWFjaCBmaWxlIGhhcyBuYW1lLCBzaXplLCBhbmQgdHlwZS5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRmaWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgZmlsZSA9ICRmaWxlc1tpXTtcclxuICAgICAgICAgICAgJHNjb3BlLnVwbG9hZCA9ICR1cGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgICAgIHVybDogJ3VzZXJzLycgKyB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZmlsZTogZmlsZSwgLy8gb3IgbGlzdCBvZiBmaWxlczogJGZpbGVzIGZvciBodG1sNSBvbmx5XHJcbiAgICAgICAgICAgICAgICBmaWxlRm9ybURhdGFOYW1lOiAndXNlclthdmF0YXJdJ1xyXG4gICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFVzZXJQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZmlsZUVkaXRTdGF0dXMgPSAnUGhvdG8gdXBkYXRlZCc7XHJcbiAgICAgICAgICAgICAgICBzdG9wU3Bpbm5lcigpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0b3BTcGlubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGVFZGl0U3RhdHVzID0gJ0Vycm9yOiBDb3VsZCBub3QgdXBsb2FkIHBob3RvJztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vLnRoZW4oc3VjY2VzcywgZXJyb3IsIHByb2dyZXNzKTsgXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIHZpZXcgaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gcmV0dXJucyBlLmcuIFwiYSBkYXkgYWdvXCJcclxuICAgIC8vIChOQjogbm93IGlzIG9idGFpbmVkIGZyb20gdGhlIERCIHRvIGVuc3VyZSB0aGF0IHdlIGhhdmUgYm90aCBkYXRlcyBpbiBVVEM7IFxyXG4gICAgLy8gICAgYWxzbywgU1FMIHZzLiBydWJ5IGRhdGVzIG5lZWQgdG8gYmUgY29lcmNlZCBpbnRvIGEgc2ltaWxhciBmb3JtYXQsIGJvdGggaW4gVVRDIC0gc2VlIGZlZWQuanNvbi5qYnVpbGRlcilcclxuICAgICRzY29wZS5nZXRFdmVudFRpbWUgPSBmdW5jdGlvbih0LCBub3cpIHtcclxuICAgICAgICB2YXIgdGltZSA9IG1vbWVudCh0LCAnWVlZWS1NTS1ERCBISDptbTpzcy5TU1MnKTtcclxuICAgICAgICB2YXIgbm93dGltZSA9IG1vbWVudChub3csICdZWVlZLU1NLUREIEhIOm1tOnNzLlNTUycpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0OiAgICAgICAnICsgdCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ25vdzogICAgICcgKyBub3cpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0aW1lOiAgICAnICsgdGltZS5mb3JtYXQoKSk7IC8vICsgJyAnICsgdGltZS5pc1ZhbGlkKCkpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdub3d0aW1lOiAnICsgbm93dGltZS5mb3JtYXQoKSk7IC8vICsgJyAnICsgbm93dGltZS5pc1ZhbGlkKCkpO1xyXG4gICAgICAgIHJldHVybiB0aW1lLmZyb20obm93dGltZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBub3RpZmljYXRpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAkc2NvcGUuZ2V0Tm90aWZpY2F0aW9uRmVlZFVybCA9IGZ1bmN0aW9uKG5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgIGlmIChub3RpZmljYXRpb24uYWN0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IG5vdGlmaWNhdGlvbi5hY3Rpb25zWzBdO1xyXG4gICAgICAgICAgICBpZiAoYWN0aW9uLmFjdGlvbiA9PSAnTElLRScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnL3NvY2lhbD9saWtlX2lkPScgKyBhY3Rpb24ubGlrZUlkO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbi5hY3Rpb24gPT0gJ0NPTU1FTlQnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJy9zb2NpYWw/Y29tbWVudF9pZD0nICsgYWN0aW9uLmNvbW1lbnRJZDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24uYWN0aW9uID09ICdTSEFSRV9JTkRJVklEVUFMJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcvbWFwcy8nICsgYWN0aW9uLm1hcElkO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbi5hY3Rpb24gPT0gJ1NIQVJFX1BVQkxJQycpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnL3NvY2lhbD9zaGFyZV9pZD0nICsgYWN0aW9uLnNoYXJlSWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZGVsZXRlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24obm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvbm90aWZpY2F0aW9ucy8nICsgbm90aWZpY2F0aW9uLmlkICsgJy5qc29uJykudGhlbihcclxuICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsgLy8gc3VjY2Vzc1xyXG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLmRlbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbihyZWFzb24pIHsgLy8gZXJyb3JcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdDb3VsZCBub3QgZGVsZXRlIG5vdGlmaWNhdGlvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLm5vdGlmaWNhdGlvblZlcmIgPSBmdW5jdGlvbihhY3Rpb24pIHtcclxuICAgICAgICB2YXIgdmVyYnMgPSB7XHJcbiAgICAgICAgICAgIExJS0U6ICdsaWtlZCB0aGlzOicsXHJcbiAgICAgICAgICAgIENPTU1FTlQ6ICdjb21tZW50ZWQgb24gdGhpczonLFxyXG4gICAgICAgICAgICBTSEFSRV9JTkRJVklEVUFMOiAnc2hhcmVkIGEgTWV0YU1hcCB3aXRoIHlvdScsXHJcbiAgICAgICAgICAgIFNIQVJFX1BVQkxJQzogJ3NoYXJlZCBhIE1ldGFNYXAgd2l0aCBldmVyeW9uZScsXHJcbiAgICAgICAgICAgIE1BUF9GT0xMT1c6ICdmb2xsb3dlZCBhIE1ldGFNYXA6JyxcclxuICAgICAgICAgICAgVVNFUl9GT0xMT1c6ICdmb2xsb3dlZCB5b3UnXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdmVyYnNbYWN0aW9uXTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHV0aWxpdHkgZnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGhhbmR5IGZ1bmN0aW9uIGZvciB1c2Ugd2l0aCBuZy1jbGFzcyBvbiByYWRpbyBidXR0b25zXHJcbiAgICAkc2NvcGUuY2xhc3NJZiA9IGZ1bmN0aW9uKGtsYXNzLCBiKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnY2xhc3NJZjogJyArIGtsYXNzICsgJywgJyArIGIpO1xyXG4gICAgICAgIHJldHVybiAoYiA/IGtsYXNzIDogJycpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBhdm9pZCAnJGFwcGx5IGFscmVhZHkgaW4gcHJvZ3Jlc3MnIGVycm9yIChzb3VyY2U6IGh0dHBzOi8vY29kZXJ3YWxsLmNvbS9wL25naXNtYSlcclxuICAgICRzY29wZS5zYWZlQXBwbHkgPSBmdW5jdGlvbihmbikge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NhZmVBcHBseSBvbiBzY29wZTogJyArICRzY29wZSk7XHJcblxyXG4gICAgICAgIC8vIFRPRE8/IHJlc3RvcmUgbm9uLUFuZ3VsYXIgdmVyc2lvbiBvZiB0aGlzIG1ldGhvZFxyXG4gICAgICAgIC8vdmFyIHBoYXNlID0gdGhpcy4kcm9vdC4kJHBoYXNlO1xyXG4gICAgICAgIC8vaWYgKHBoYXNlID09ICckYXBwbHknIHx8IHBoYXNlID09ICckZGlnZXN0Jykge1xyXG4gICAgICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZihmbikgPT09ICdmdW5jdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICBmbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgLy99IGVsc2Uge1xyXG4gICAgICAgIC8vICAgIHRoaXMuJGFwcGx5KGZuKTtcclxuICAgICAgICAvL31cclxuICAgIH07XHJcblxyXG4gICAgLy8gc291cmNlOiBodHRwOi8vY3RybHEub3JnL2NvZGUvMTk2MTYtZGV0ZWN0LXRvdWNoLXNjcmVlbi1qYXZhc2NyaXB0XHJcbiAgICAkc2NvcGUuaXNUb3VjaERldmljZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAoKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgfHwgKG5hdmlnYXRvci5NYXhUb3VjaFBvaW50cyA+IDApIHx8IChuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDApKTtcclxuICAgIH07XHJcblxyXG4gICAgaW5pdCgpO1xyXG59OyIsImNvbnN0IHN0YXR1cyA9IHtcclxuICAgIExBU1RfVVBEQVRFRDogJycsXHJcbiAgICBSRUFEX09OTFk6ICdWaWV3IG9ubHknLFxyXG4gICAgU0FWSU5HOiAnU2F2aW5nLi4uJyxcclxuICAgIFNBVkVfT0s6ICdBbGwgY2hhbmdlcyBzYXZlZCcsXHJcbiAgICBTQVZFX0ZBSUxFRDogJ0NoYW5nZXMgY291bGQgbm90IGJlIHNhdmVkJ1xyXG59O1xyXG5cclxuT2JqZWN0LmZyZWV6ZShzdGF0dXMpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBzdGF0dXM7IiwiY29uc3QgVEFCUyA9IHtcclxuICAgIFRBQl9JRF9QUkVTRU5URVIgOiAncHJlc2VudGVyLXRhYicsXHJcbiAgICBUQUJfSURfQU5BTFlUSUNTX01BUCA6ICdhbmFseXRpY3MtdGFiLW1hcCcsXHJcbiAgICBUQUJfSURfQU5BTFlUSUNTX1RISU5HIDogJ2FuYWx5dGljcy10YWItdGhpbmcnLFxyXG4gICAgVEFCX0lEX1BFUlNQRUNUSVZFUyA6ICdwZXJzcGVjdGl2ZXMtdGFiJyxcclxuICAgIFRBQl9JRF9ESVNUSU5DVElPTlMgOiAnZGlzdGluY3Rpb25zLXRhYicsXHJcbiAgICBUQUJfSURfQVRUQUNITUVOVFMgOiAnYXR0YWNobWVudHMtdGFiJyxcclxuICAgIFRBQl9JRF9HRU5FUkFUT1IgOiAnZ2VuZXJhdG9yLXRhYicsXHJcbiAgICBUQUJfSURfU1RBTkRBUkRTIDogJ3N0YW5kYXJkcy10YWInXHJcbn07XHJcbk9iamVjdC5mcmVlemUoVEFCUyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFRBQlM7IiwibGV0IEF1dGgwTG9jayA9IHJlcXVpcmUoJ2F1dGgwLWxvY2snKTtcblxuY2xhc3MgQXV0aDAge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubG9jayA9IG5ldyBBdXRoMExvY2soJ3dzT25hcnQyM3lWaUlTaHFUNHdmSjE4dzJ2dDJjbDMyJywgJ21ldGFtYXAuYXV0aDAuY29tJyk7XG4gICAgICAgIHRoaXMubG9jay5vbignbG9hZGluZyByZWFkeScsICguLi5lKSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbG9naW4oKSB7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhhdC5nZXRTZXNzaW9uKCkudGhlbigocHJvZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwocHJvZmlsZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5sb2NrLnNob3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2FibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9naW5BZnRlclNpZ251cDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZTogJ29wZW5pZCBvZmZsaW5lX2FjY2VzcydcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgKGVyciwgcHJvZmlsZSwgaWRfdG9rZW4sIGN0b2tlbiwgb3B0LCByZWZyZXNoX3Rva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ2lkX3Rva2VuJywgaWRfdG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ3Byb2ZpbGUnLCBwcm9maWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGZvcmFnZS5zZXRJdGVtKCdyZWZyZXNoX3Rva2VuJywgcmVmcmVzaF90b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5pZF90b2tlbiA9IGlkX3Rva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQucHJvZmlsZSA9IHByb2ZpbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5yZWZyZXNoX3Rva2VuID0gcmVmcmVzaF90b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKHByb2ZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cblxuICAgIGxpbmtBY2NvdW50KCkge1xuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgIHRoaXMubG9jay5zaG93KHtcbiAgICAgICAgICAgIGNhbGxiYWNrVVJMOiAnaHR0cHM6Ly9wb3BwaW5nLWZpcmUtODk3LmZpcmViYXNlYXBwLmNvbS8nLFxuICAgICAgICAgICAgZGljdDoge1xuICAgICAgICAgICAgICAgIHNpZ25pbjoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0xpbmsgd2l0aCBhbm90aGVyIGFjY291bnQnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1dGhQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NfdG9rZW46IHRoYXQuaWRfdG9rZW4gfHwgdGhhdC5wcm9maWxlLmlkZW50aXRpZXNbMF0uYWNjZXNzX3Rva2VuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFNlc3Npb24oKSB7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgbGV0IGdldFByb2ZpbGUgPSAoaWRfdG9rZW4sIGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQubG9jay5nZXRQcm9maWxlKGlkX3Rva2VuLCBmdW5jdGlvbihlcnIsIHByb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLnNldEl0ZW0oJ2lkX3Rva2VuJywgaWRfdG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbGZvcmFnZS5zZXRJdGVtKCdwcm9maWxlJywgcHJvZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaWRfdG9rZW4gPSBpZF90b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5wcm9maWxlID0gcHJvZmlsZTtcbiAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChwcm9maWxlLCBpZF90b2tlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBsZXQgZnVsZmlsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICBsb2NhbGZvcmFnZS5nZXRJdGVtKCdyZWZyZXNoX3Rva2VuJykudGhlbigodG9rZW4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5yZWZyZXNoX3Rva2VuID0gdG9rZW47XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubG9jay5nZXRDbGllbnQoKS5yZWZyZXNoVG9rZW4odG9rZW4sIChhLCB0b2tPYmopID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFByb2ZpbGUodG9rT2JqLmlkX3Rva2VuLCBmdWxmaWxsLCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZm9yYWdlLmdldEl0ZW0oJ2lkX3Rva2VuJykudGhlbigoaWRfdG9rZW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFByb2ZpbGUoaWRfdG9rZW4sIGZ1bGZpbGwsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIGxvZ291dCgpIHtcbiAgICAgICAgbG9jYWxmb3JhZ2UucmVtb3ZlSXRlbSgnaWRfdG9rZW4nKTtcbiAgICAgICAgbG9jYWxmb3JhZ2UucmVtb3ZlSXRlbSgncmVmcmVzaF90b2tlbicpO1xuICAgICAgICBsb2NhbGZvcmFnZS5yZW1vdmVJdGVtKCdwcm9maWxlJyk7XG4gICAgICAgIHRoaXMucHJvZmlsZSA9IG51bGw7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IEF1dGgwO1xuXG5cbiIsImxldCBGaXJlYmFzZSA9IHJlcXVpcmUoJ2ZpcmViYXNlJyk7XG5cbmNsYXNzIE1ldGFGaXJlIHtcblxuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgdGhpcy5mYiA9IG5ldyBGaXJlYmFzZShcImh0dHBzOi8vcG9wcGluZy1maXJlLTg5Ny5maXJlYmFzZWlvLmNvbVwiKTtcbiAgICB9XG5cbiAgICBpbml0KCkge1xuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgIGxldCByZXQgPSBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBsb2NhbGZvcmFnZS5nZXRJdGVtKCdpZF90b2tlbicpLnRoZW4oKGlkX3Rva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgTWV0YU1hcC5BdXRoMC5nZXRTZXNzaW9uKCkudGhlbigocHJvZmlsZSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgIE1ldGFNYXAuQXV0aDAubG9jay5nZXRDbGllbnQoKS5nZXREZWxlZ2F0aW9uVG9rZW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBwcm9maWxlLmNsaWVudElELFxuICAgICAgICAgICAgICAgICAgICAgICAgaWRfdG9rZW46IGlkX3Rva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpX3R5cGU6ICdmaXJlYmFzZSdcbiAgICAgICAgICAgICAgICAgICAgfSwgKGVyciwgZGVsZWdhdGlvblJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5maXJlYmFzZV90b2tlbiA9IGRlbGVnYXRpb25SZXN1bHQuaWRfdG9rZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGZvcmFnZS5zZXRJdGVtKCdmaXJlYmFzZV90b2tlbicsIHRoYXQuZmlyZWJhc2VfdG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mYi5hdXRoV2l0aEN1c3RvbVRva2VuKHRoYXQuZmlyZWJhc2VfdG9rZW4sIChlcnJvciwgYXV0aERhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGF1dGhEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTsgXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIGdldENoaWxkKHBhdGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmIuY2hpbGQocGF0aCk7XG4gICAgfVxuXG4gICAgZ2V0RGF0YSAocGF0aCkge1xuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmZiO1xuICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgY2hpbGQgPSB0aGlzLmdldENoaWxkKHBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNoaWxkLm9uKCd2YWx1ZScsXG4gICAgICAgICAgICAgICAgKHNuYXBzaG90KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoc25hcHNob3QudmFsKCkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHNldERhdGEgKGRhdGEsIHBhdGgpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5mYjtcbiAgICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgICAgIGNoaWxkID0gdGhpcy5nZXRDaGlsZChwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hpbGQuc2V0KGRhdGEpO1xuICAgIH1cblxuICAgIGxvZ291dCAoKSB7XG4gICAgICAgIHRoaXMuZmIudW5hdXRoKCk7XG4gICAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBNZXRhRmlyZTtcblxuXG4iLCJcbnZhciBnb29nbGVBbmFseXRpY3MgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICB2YXIgYXBpS2V5LCBlLCByO1xuICAgIGlmIChjb25maWcgPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbmZpZyA9IHt9O1xyXG4gICAgfVxuICAgIGFwaUtleSA9IGNvbmZpZy5HT09HTEVfQU5BTFlUSUNTX1RSQUNLSU5HX0lEO1xuICAgIGlmIChhcGlLZXkgJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICE9PSAnbG9jYWxob3N0Jykge1xyXG4gICAgICAgIHdpbmRvdy5Hb29nbGVBbmFseXRpY3NPYmplY3QgPSAnZ2EnO1xuICAgICAgICB3aW5kb3cuZ2EgfHwgKHdpbmRvdy5nYSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgKHdpbmRvdy5nYS5xID0gd2luZG93LmdhLnEgfHwgW10pLnB1c2goYXJndW1lbnRzKTtcclxuICAgICAgICB9KTtcbiAgICAgICAgd2luZG93LmdhLmdhID0gKyhuZXcgRGF0ZSk7XG4gICAgICAgIGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTtcbiAgICAgICAgZS5zcmMgPSAnLy93d3cuZ29vZ2xlLWFuYWx5dGljcy5jb20vYW5hbHl0aWNzLmpzJztcbiAgICAgICAgci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLCByKTtcbiAgICAgICAgZ2EoJ2NyZWF0ZScsIGFwaUtleSk7XG4gICAgICAgIHJldHVybiBnYSgnc2VuZCcsICdwYWdldmlldycpO1xyXG4gICAgfVxyXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdvb2dsZUFuYWx5dGljcztcblxuXG4iLCJcbnZhciBuZXdSZWxpYyA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgIHZhciBhcHBJZCwgbGljZW5zZUtleTtcbiAgICBpZiAoY29uZmlnID09IG51bGwpIHtcclxuICAgICAgICBjb25maWcgPSB7fTtcclxuICAgIH1cbiAgICBsaWNlbnNlS2V5ID0gY29uZmlnLk5FV19SRUxJQ19MSUNFTlNFX0tFWTtcbiAgICBhcHBJZCA9IGNvbmZpZy5ORVdfUkVMSUNfQVBQTElDQVRJT05fSUQ7XG4gICAgaWYgKGxpY2Vuc2VLZXkgJiYgYXBwSWQgJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICE9PSAnbG9jYWxob3N0Jykge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cuTlJFVU0gfHwgKE5SRVVNID0ge30pLCBfX25yX3JlcXVpcmUgPSBmdW5jdGlvbiAodCwgZSwgbikgeyBmdW5jdGlvbiByKG4pIHsgaWYgKCFlW25dKSB7IHZhciBvID0gZVtuXSA9IHsgZXhwb3J0czoge30gfTsgdFtuXVswXS5jYWxsKG8uZXhwb3J0cywgZnVuY3Rpb24gKGUpIHsgdmFyIG8gPSB0W25dWzFdW2VdOyByZXR1cm4gcihvID8gbyA6IGUpIH0sIG8sIG8uZXhwb3J0cykgfSByZXR1cm4gZVtuXS5leHBvcnRzIH0gaWYgKFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgX19ucl9yZXF1aXJlKSByZXR1cm4gX19ucl9yZXF1aXJlOyBmb3IgKHZhciBvID0gMDsgbyA8IG4ubGVuZ3RoOyBvKyspIHIobltvXSk7IHJldHVybiByIH0oeyBRSmYzYXg6IFtmdW5jdGlvbiAodCwgZSkgeyBmdW5jdGlvbiBuKHQpIHsgZnVuY3Rpb24gZShlLCBuLCBhKSB7IHQgJiYgdChlLCBuLCBhKSwgYSB8fCAoYSA9IHt9KTsgZm9yICh2YXIgYyA9IHMoZSksIGYgPSBjLmxlbmd0aCwgdSA9IGkoYSwgbywgciksIGQgPSAwOyBmID4gZDsgZCsrKSBjW2RdLmFwcGx5KHUsIG4pOyByZXR1cm4gdSB9IGZ1bmN0aW9uIGEodCwgZSkgeyBmW3RdID0gcyh0KS5jb25jYXQoZSkgfSBmdW5jdGlvbiBzKHQpIHsgcmV0dXJuIGZbdF0gfHwgW10gfSBmdW5jdGlvbiBjKCkgeyByZXR1cm4gbihlKSB9IHZhciBmID0ge307IHJldHVybiB7IG9uOiBhLCBlbWl0OiBlLCBjcmVhdGU6IGMsIGxpc3RlbmVyczogcywgX2V2ZW50czogZiB9IH0gZnVuY3Rpb24gcigpIHsgcmV0dXJuIHt9IH0gdmFyIG8gPSBcIm5yQGNvbnRleHRcIiwgaSA9IHQoXCJnb3NcIik7IGUuZXhwb3J0cyA9IG4oKSB9LCB7IGdvczogXCI3ZVNERmhcIiB9XSwgZWU6IFtmdW5jdGlvbiAodCwgZSkgeyBlLmV4cG9ydHMgPSB0KFwiUUpmM2F4XCIpIH0sIHt9XSwgMzogW2Z1bmN0aW9uICh0KSB7IGZ1bmN0aW9uIGUodCwgZSwgbiwgaSwgcykgeyB0cnkgeyBjID8gYyAtPSAxIDogcihcImVyclwiLCBbcyB8fCBuZXcgVW5jYXVnaHRFeGNlcHRpb24odCwgZSwgbildKSB9IGNhdGNoIChmKSB7IHRyeSB7IHIoXCJpZXJyXCIsIFtmLCAobmV3IERhdGUpLmdldFRpbWUoKSwgITBdKSB9IGNhdGNoICh1KSB7IH0gfSByZXR1cm4gXCJmdW5jdGlvblwiID09IHR5cGVvZiBhID8gYS5hcHBseSh0aGlzLCBvKGFyZ3VtZW50cykpIDogITEgfSBmdW5jdGlvbiBVbmNhdWdodEV4Y2VwdGlvbih0LCBlLCBuKSB7IHRoaXMubWVzc2FnZSA9IHQgfHwgXCJVbmNhdWdodCBlcnJvciB3aXRoIG5vIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cIiwgdGhpcy5zb3VyY2VVUkwgPSBlLCB0aGlzLmxpbmUgPSBuIH0gZnVuY3Rpb24gbih0KSB7IHIoXCJlcnJcIiwgW3QsIChuZXcgRGF0ZSkuZ2V0VGltZSgpXSkgfSB2YXIgciA9IHQoXCJoYW5kbGVcIiksIG8gPSB0KDUpLCBpID0gdChcImVlXCIpLCBhID0gd2luZG93Lm9uZXJyb3IsIHMgPSAhMSwgYyA9IDA7IHQoXCJsb2FkZXJcIikuZmVhdHVyZXMuZXJyID0gITAsIHdpbmRvdy5vbmVycm9yID0gZSwgTlJFVU0ubm90aWNlRXJyb3IgPSBuOyB0cnkgeyB0aHJvdyBuZXcgRXJyb3IgfSBjYXRjaCAoZikgeyBcInN0YWNrXCIgaW4gZiAmJiAodCgxKSwgdCg0KSwgXCJhZGRFdmVudExpc3RlbmVyXCIgaW4gd2luZG93ICYmIHQoMiksIHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUgJiYgWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgJiYgdCgzKSwgcyA9ICEwKSB9IGkub24oXCJmbi1zdGFydFwiLCBmdW5jdGlvbiAoKSB7IHMgJiYgKGMgKz0gMSkgfSksIGkub24oXCJmbi1lcnJcIiwgZnVuY3Rpb24gKHQsIGUsIHIpIHsgcyAmJiAodGhpcy50aHJvd24gPSAhMCwgbihyKSkgfSksIGkub24oXCJmbi1lbmRcIiwgZnVuY3Rpb24gKCkgeyBzICYmICF0aGlzLnRocm93biAmJiBjID4gMCAmJiAoYyAtPSAxKSB9KSwgaS5vbihcImludGVybmFsLWVycm9yXCIsIGZ1bmN0aW9uICh0KSB7IHIoXCJpZXJyXCIsIFt0LCAobmV3IERhdGUpLmdldFRpbWUoKSwgITBdKSB9KSB9LCB7IDE6IDgsIDI6IDUsIDM6IDksIDQ6IDcsIDU6IDIxLCBlZTogXCJRSmYzYXhcIiwgaGFuZGxlOiBcIkQ1RHVMUFwiLCBsb2FkZXI6IFwiRzl6MEJsXCIgfV0sIDQ6IFtmdW5jdGlvbiAodCkgeyBmdW5jdGlvbiBlKCkgeyB9IGlmICh3aW5kb3cucGVyZm9ybWFuY2UgJiYgd2luZG93LnBlcmZvcm1hbmNlLnRpbWluZyAmJiB3aW5kb3cucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZSkgeyB2YXIgbiA9IHQoXCJlZVwiKSwgciA9IHQoXCJoYW5kbGVcIiksIG8gPSB0KDIpOyB0KFwibG9hZGVyXCIpLmZlYXR1cmVzLnN0biA9ICEwLCB0KDEpLCBuLm9uKFwiZm4tc3RhcnRcIiwgZnVuY3Rpb24gKHQpIHsgdmFyIGUgPSB0WzBdOyBlIGluc3RhbmNlb2YgRXZlbnQgJiYgKHRoaXMuYnN0U3RhcnQgPSBEYXRlLm5vdygpKSB9KSwgbi5vbihcImZuLWVuZFwiLCBmdW5jdGlvbiAodCwgZSkgeyB2YXIgbiA9IHRbMF07IG4gaW5zdGFuY2VvZiBFdmVudCAmJiByKFwiYnN0XCIsIFtuLCBlLCB0aGlzLmJzdFN0YXJ0LCBEYXRlLm5vdygpXSkgfSksIG8ub24oXCJmbi1zdGFydFwiLCBmdW5jdGlvbiAodCwgZSwgbikgeyB0aGlzLmJzdFN0YXJ0ID0gRGF0ZS5ub3coKSwgdGhpcy5ic3RUeXBlID0gbiB9KSwgby5vbihcImZuLWVuZFwiLCBmdW5jdGlvbiAodCwgZSkgeyByKFwiYnN0VGltZXJcIiwgW2UsIHRoaXMuYnN0U3RhcnQsIERhdGUubm93KCksIHRoaXMuYnN0VHlwZV0pIH0pLCBuLm9uKFwicHVzaFN0YXRlLXN0YXJ0XCIsIGZ1bmN0aW9uICgpIHsgdGhpcy50aW1lID0gRGF0ZS5ub3coKSwgdGhpcy5zdGFydFBhdGggPSBsb2NhdGlvbi5wYXRobmFtZSArIGxvY2F0aW9uLmhhc2ggfSksIG4ub24oXCJwdXNoU3RhdGUtZW5kXCIsIGZ1bmN0aW9uICgpIHsgcihcImJzdEhpc3RcIiwgW2xvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uaGFzaCwgdGhpcy5zdGFydFBhdGgsIHRoaXMudGltZV0pIH0pLCBcImFkZEV2ZW50TGlzdGVuZXJcIiBpbiB3aW5kb3cucGVyZm9ybWFuY2UgJiYgKHdpbmRvdy5wZXJmb3JtYW5jZS5hZGRFdmVudExpc3RlbmVyKFwid2Via2l0cmVzb3VyY2V0aW1pbmdidWZmZXJmdWxsXCIsIGZ1bmN0aW9uICgpIHsgcihcImJzdFJlc291cmNlXCIsIFt3aW5kb3cucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcInJlc291cmNlXCIpXSksIHdpbmRvdy5wZXJmb3JtYW5jZS53ZWJraXRDbGVhclJlc291cmNlVGltaW5ncygpIH0sICExKSwgd2luZG93LnBlcmZvcm1hbmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNvdXJjZXRpbWluZ2J1ZmZlcmZ1bGxcIiwgZnVuY3Rpb24gKCkgeyByKFwiYnN0UmVzb3VyY2VcIiwgW3dpbmRvdy5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwicmVzb3VyY2VcIildKSwgd2luZG93LnBlcmZvcm1hbmNlLmNsZWFyUmVzb3VyY2VUaW1pbmdzKCkgfSwgITEpKSwgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBlLCAhMSksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCBlLCAhMSksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlLCAhMSkgfSB9LCB7IDE6IDYsIDI6IDgsIGVlOiBcIlFKZjNheFwiLCBoYW5kbGU6IFwiRDVEdUxQXCIsIGxvYWRlcjogXCJHOXowQmxcIiB9XSwgNTogW2Z1bmN0aW9uICh0LCBlKSB7IGZ1bmN0aW9uIG4odCkgeyBpLmluUGxhY2UodCwgW1wiYWRkRXZlbnRMaXN0ZW5lclwiLCBcInJlbW92ZUV2ZW50TGlzdGVuZXJcIl0sIFwiLVwiLCByKSB9IGZ1bmN0aW9uIHIodCkgeyByZXR1cm4gdFsxXSB9IHZhciBvID0gKHQoMSksIHQoXCJlZVwiKS5jcmVhdGUoKSksIGkgPSB0KDIpKG8pLCBhID0gdChcImdvc1wiKTsgaWYgKGUuZXhwb3J0cyA9IG8sIG4od2luZG93KSwgXCJnZXRQcm90b3R5cGVPZlwiIGluIE9iamVjdCkgeyBmb3IgKHZhciBzID0gZG9jdW1lbnQ7IHMgJiYgIXMuaGFzT3duUHJvcGVydHkoXCJhZGRFdmVudExpc3RlbmVyXCIpIDspIHMgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yocyk7IHMgJiYgbihzKTsgZm9yICh2YXIgYyA9IFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZTsgYyAmJiAhYy5oYXNPd25Qcm9wZXJ0eShcImFkZEV2ZW50TGlzdGVuZXJcIikgOykgYyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihjKTsgYyAmJiBuKGMpIH0gZWxzZSBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoXCJhZGRFdmVudExpc3RlbmVyXCIpICYmIG4oWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlKTsgby5vbihcImFkZEV2ZW50TGlzdGVuZXItc3RhcnRcIiwgZnVuY3Rpb24gKHQpIHsgaWYgKHRbMV0pIHsgdmFyIGUgPSB0WzFdOyBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUgPyB0aGlzLndyYXBwZWQgPSB0WzFdID0gYShlLCBcIm5yQHdyYXBwZWRcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gaShlLCBcImZuLVwiLCBudWxsLCBlLm5hbWUgfHwgXCJhbm9ueW1vdXNcIikgfSkgOiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUuaGFuZGxlRXZlbnQgJiYgaS5pblBsYWNlKGUsIFtcImhhbmRsZUV2ZW50XCJdLCBcImZuLVwiKSB9IH0pLCBvLm9uKFwicmVtb3ZlRXZlbnRMaXN0ZW5lci1zdGFydFwiLCBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IHRoaXMud3JhcHBlZDsgZSAmJiAodFsxXSA9IGUpIH0pIH0sIHsgMTogMjEsIDI6IDIyLCBlZTogXCJRSmYzYXhcIiwgZ29zOiBcIjdlU0RGaFwiIH1dLCA2OiBbZnVuY3Rpb24gKHQsIGUpIHsgdmFyIG4gPSAodCgyKSwgdChcImVlXCIpLmNyZWF0ZSgpKSwgciA9IHQoMSkobik7IGUuZXhwb3J0cyA9IG4sIHIuaW5QbGFjZSh3aW5kb3cuaGlzdG9yeSwgW1wicHVzaFN0YXRlXCJdLCBcIi1cIikgfSwgeyAxOiAyMiwgMjogMjEsIGVlOiBcIlFKZjNheFwiIH1dLCA3OiBbZnVuY3Rpb24gKHQsIGUpIHsgdmFyIG4gPSAodCgyKSwgdChcImVlXCIpLmNyZWF0ZSgpKSwgciA9IHQoMSkobik7IGUuZXhwb3J0cyA9IG4sIHIuaW5QbGFjZSh3aW5kb3csIFtcInJlcXVlc3RBbmltYXRpb25GcmFtZVwiLCBcIm1velJlcXVlc3RBbmltYXRpb25GcmFtZVwiLCBcIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZVwiLCBcIm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdLCBcInJhZi1cIiksIG4ub24oXCJyYWYtc3RhcnRcIiwgZnVuY3Rpb24gKHQpIHsgdFswXSA9IHIodFswXSwgXCJmbi1cIikgfSkgfSwgeyAxOiAyMiwgMjogMjEsIGVlOiBcIlFKZjNheFwiIH1dLCA4OiBbZnVuY3Rpb24gKHQsIGUpIHsgZnVuY3Rpb24gbih0LCBlLCBuKSB7IHZhciByID0gdFswXTsgXCJzdHJpbmdcIiA9PSB0eXBlb2YgciAmJiAociA9IG5ldyBGdW5jdGlvbihyKSksIHRbMF0gPSBvKHIsIFwiZm4tXCIsIG51bGwsIG4pIH0gdmFyIHIgPSAodCgyKSwgdChcImVlXCIpLmNyZWF0ZSgpKSwgbyA9IHQoMSkocik7IGUuZXhwb3J0cyA9IHIsIG8uaW5QbGFjZSh3aW5kb3csIFtcInNldFRpbWVvdXRcIiwgXCJzZXRJbnRlcnZhbFwiLCBcInNldEltbWVkaWF0ZVwiXSwgXCJzZXRUaW1lci1cIiksIHIub24oXCJzZXRUaW1lci1zdGFydFwiLCBuKSB9LCB7IDE6IDIyLCAyOiAyMSwgZWU6IFwiUUpmM2F4XCIgfV0sIDk6IFtmdW5jdGlvbiAodCwgZSkgeyBmdW5jdGlvbiBuKCkgeyBjLmluUGxhY2UodGhpcywgZCwgXCJmbi1cIikgfSBmdW5jdGlvbiByKHQsIGUpIHsgYy5pblBsYWNlKGUsIFtcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiXSwgXCJmbi1cIikgfSBmdW5jdGlvbiBvKHQsIGUpIHsgcmV0dXJuIGUgfSB2YXIgaSA9IHQoXCJlZVwiKS5jcmVhdGUoKSwgYSA9IHQoMSksIHMgPSB0KDIpLCBjID0gcyhpKSwgZiA9IHMoYSksIHUgPSB3aW5kb3cuWE1MSHR0cFJlcXVlc3QsIGQgPSBbXCJvbmxvYWRcIiwgXCJvbmVycm9yXCIsIFwib25hYm9ydFwiLCBcIm9ubG9hZHN0YXJ0XCIsIFwib25sb2FkZW5kXCIsIFwib25wcm9ncmVzc1wiLCBcIm9udGltZW91dFwiXTsgZS5leHBvcnRzID0gaSwgd2luZG93LlhNTEh0dHBSZXF1ZXN0ID0gZnVuY3Rpb24gKHQpIHsgdmFyIGUgPSBuZXcgdSh0KTsgdHJ5IHsgaS5lbWl0KFwibmV3LXhoclwiLCBbXSwgZSksIGYuaW5QbGFjZShlLCBbXCJhZGRFdmVudExpc3RlbmVyXCIsIFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiXSwgXCItXCIsIGZ1bmN0aW9uICh0LCBlKSB7IHJldHVybiBlIH0pLCBlLmFkZEV2ZW50TGlzdGVuZXIoXCJyZWFkeXN0YXRlY2hhbmdlXCIsIG4sICExKSB9IGNhdGNoIChyKSB7IHRyeSB7IGkuZW1pdChcImludGVybmFsLWVycm9yXCIsIFtyXSkgfSBjYXRjaCAobykgeyB9IH0gcmV0dXJuIGUgfSwgd2luZG93LlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZSA9IHUucHJvdG90eXBlLCBjLmluUGxhY2UoWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLCBbXCJvcGVuXCIsIFwic2VuZFwiXSwgXCIteGhyLVwiLCBvKSwgaS5vbihcInNlbmQteGhyLXN0YXJ0XCIsIHIpLCBpLm9uKFwib3Blbi14aHItc3RhcnRcIiwgcikgfSwgeyAxOiA1LCAyOiAyMiwgZWU6IFwiUUpmM2F4XCIgfV0sIDEwOiBbZnVuY3Rpb24gKHQpIHsgZnVuY3Rpb24gZSh0KSB7IGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmIHQubGVuZ3RoKSByZXR1cm4gdC5sZW5ndGg7IGlmIChcIm9iamVjdFwiICE9IHR5cGVvZiB0KSByZXR1cm4gdm9pZCAwOyBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgQXJyYXlCdWZmZXIgJiYgdCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyICYmIHQuYnl0ZUxlbmd0aCkgcmV0dXJuIHQuYnl0ZUxlbmd0aDsgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIEJsb2IgJiYgdCBpbnN0YW5jZW9mIEJsb2IgJiYgdC5zaXplKSByZXR1cm4gdC5zaXplOyBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgRm9ybURhdGEgJiYgdCBpbnN0YW5jZW9mIEZvcm1EYXRhKSByZXR1cm4gdm9pZCAwOyB0cnkgeyByZXR1cm4gSlNPTi5zdHJpbmdpZnkodCkubGVuZ3RoIH0gY2F0Y2ggKGUpIHsgcmV0dXJuIHZvaWQgMCB9IH0gZnVuY3Rpb24gbih0KSB7IHZhciBuID0gdGhpcy5wYXJhbXMsIHIgPSB0aGlzLm1ldHJpY3M7IGlmICghdGhpcy5lbmRlZCkgeyB0aGlzLmVuZGVkID0gITA7IGZvciAodmFyIGkgPSAwOyBjID4gaTsgaSsrKSB0LnJlbW92ZUV2ZW50TGlzdGVuZXIoc1tpXSwgdGhpcy5saXN0ZW5lciwgITEpOyBpZiAoIW4uYWJvcnRlZCkgeyBpZiAoci5kdXJhdGlvbiA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpIC0gdGhpcy5zdGFydFRpbWUsIDQgPT09IHQucmVhZHlTdGF0ZSkgeyBuLnN0YXR1cyA9IHQuc3RhdHVzOyB2YXIgYSA9IHQucmVzcG9uc2VUeXBlLCBmID0gXCJhcnJheWJ1ZmZlclwiID09PSBhIHx8IFwiYmxvYlwiID09PSBhIHx8IFwianNvblwiID09PSBhID8gdC5yZXNwb25zZSA6IHQucmVzcG9uc2VUZXh0LCB1ID0gZShmKTsgaWYgKHUgJiYgKHIucnhTaXplID0gdSksIHRoaXMuc2FtZU9yaWdpbikgeyB2YXIgZCA9IHQuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLU5ld1JlbGljLUFwcC1EYXRhXCIpOyBkICYmIChuLmNhdCA9IGQuc3BsaXQoXCIsIFwiKS5wb3AoKSkgfSB9IGVsc2Ugbi5zdGF0dXMgPSAwOyByLmNiVGltZSA9IHRoaXMuY2JUaW1lLCBvKFwieGhyXCIsIFtuLCByLCB0aGlzLnN0YXJ0VGltZV0pIH0gfSB9IGZ1bmN0aW9uIHIodCwgZSkgeyB2YXIgbiA9IGkoZSksIHIgPSB0LnBhcmFtczsgci5ob3N0ID0gbi5ob3N0bmFtZSArIFwiOlwiICsgbi5wb3J0LCByLnBhdGhuYW1lID0gbi5wYXRobmFtZSwgdC5zYW1lT3JpZ2luID0gbi5zYW1lT3JpZ2luIH0gaWYgKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUgJiYgWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgJiYgIS9DcmlPUy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgeyB0KFwibG9hZGVyXCIpLmZlYXR1cmVzLnhociA9ICEwOyB2YXIgbyA9IHQoXCJoYW5kbGVcIiksIGkgPSB0KDIpLCBhID0gdChcImVlXCIpLCBzID0gW1wibG9hZFwiLCBcImVycm9yXCIsIFwiYWJvcnRcIiwgXCJ0aW1lb3V0XCJdLCBjID0gcy5sZW5ndGgsIGYgPSB0KDEpOyB0KDQpLCB0KDMpLCBhLm9uKFwibmV3LXhoclwiLCBmdW5jdGlvbiAoKSB7IHRoaXMudG90YWxDYnMgPSAwLCB0aGlzLmNhbGxlZCA9IDAsIHRoaXMuY2JUaW1lID0gMCwgdGhpcy5lbmQgPSBuLCB0aGlzLmVuZGVkID0gITEsIHRoaXMueGhyR3VpZHMgPSB7fSB9KSwgYS5vbihcIm9wZW4teGhyLXN0YXJ0XCIsIGZ1bmN0aW9uICh0KSB7IHRoaXMucGFyYW1zID0geyBtZXRob2Q6IHRbMF0gfSwgcih0aGlzLCB0WzFdKSwgdGhpcy5tZXRyaWNzID0ge30gfSksIGEub24oXCJvcGVuLXhoci1lbmRcIiwgZnVuY3Rpb24gKHQsIGUpIHsgXCJsb2FkZXJfY29uZmlnXCIgaW4gTlJFVU0gJiYgXCJ4cGlkXCIgaW4gTlJFVU0ubG9hZGVyX2NvbmZpZyAmJiB0aGlzLnNhbWVPcmlnaW4gJiYgZS5zZXRSZXF1ZXN0SGVhZGVyKFwiWC1OZXdSZWxpYy1JRFwiLCBOUkVVTS5sb2FkZXJfY29uZmlnLnhwaWQpIH0pLCBhLm9uKFwic2VuZC14aHItc3RhcnRcIiwgZnVuY3Rpb24gKHQsIG4pIHsgdmFyIHIgPSB0aGlzLm1ldHJpY3MsIG8gPSB0WzBdLCBpID0gdGhpczsgaWYgKHIgJiYgbykgeyB2YXIgZiA9IGUobyk7IGYgJiYgKHIudHhTaXplID0gZikgfSB0aGlzLnN0YXJ0VGltZSA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpLCB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKHQpIHsgdHJ5IHsgXCJhYm9ydFwiID09PSB0LnR5cGUgJiYgKGkucGFyYW1zLmFib3J0ZWQgPSAhMCksIChcImxvYWRcIiAhPT0gdC50eXBlIHx8IGkuY2FsbGVkID09PSBpLnRvdGFsQ2JzICYmIChpLm9ubG9hZENhbGxlZCB8fCBcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIG4ub25sb2FkKSkgJiYgaS5lbmQobikgfSBjYXRjaCAoZSkgeyB0cnkgeyBhLmVtaXQoXCJpbnRlcm5hbC1lcnJvclwiLCBbZV0pIH0gY2F0Y2ggKHIpIHsgfSB9IH07IGZvciAodmFyIHUgPSAwOyBjID4gdTsgdSsrKSBuLmFkZEV2ZW50TGlzdGVuZXIoc1t1XSwgdGhpcy5saXN0ZW5lciwgITEpIH0pLCBhLm9uKFwieGhyLWNiLXRpbWVcIiwgZnVuY3Rpb24gKHQsIGUsIG4pIHsgdGhpcy5jYlRpbWUgKz0gdCwgZSA/IHRoaXMub25sb2FkQ2FsbGVkID0gITAgOiB0aGlzLmNhbGxlZCArPSAxLCB0aGlzLmNhbGxlZCAhPT0gdGhpcy50b3RhbENicyB8fCAhdGhpcy5vbmxvYWRDYWxsZWQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBuLm9ubG9hZCB8fCB0aGlzLmVuZChuKSB9KSwgYS5vbihcInhoci1sb2FkLWFkZGVkXCIsIGZ1bmN0aW9uICh0LCBlKSB7IHZhciBuID0gXCJcIiArIGYodCkgKyAhIWU7IHRoaXMueGhyR3VpZHMgJiYgIXRoaXMueGhyR3VpZHNbbl0gJiYgKHRoaXMueGhyR3VpZHNbbl0gPSAhMCwgdGhpcy50b3RhbENicyArPSAxKSB9KSwgYS5vbihcInhoci1sb2FkLXJlbW92ZWRcIiwgZnVuY3Rpb24gKHQsIGUpIHsgdmFyIG4gPSBcIlwiICsgZih0KSArICEhZTsgdGhpcy54aHJHdWlkcyAmJiB0aGlzLnhockd1aWRzW25dICYmIChkZWxldGUgdGhpcy54aHJHdWlkc1tuXSwgdGhpcy50b3RhbENicyAtPSAxKSB9KSwgYS5vbihcImFkZEV2ZW50TGlzdGVuZXItZW5kXCIsIGZ1bmN0aW9uICh0LCBlKSB7IGUgaW5zdGFuY2VvZiBYTUxIdHRwUmVxdWVzdCAmJiBcImxvYWRcIiA9PT0gdFswXSAmJiBhLmVtaXQoXCJ4aHItbG9hZC1hZGRlZFwiLCBbdFsxXSwgdFsyXV0sIGUpIH0pLCBhLm9uKFwicmVtb3ZlRXZlbnRMaXN0ZW5lci1lbmRcIiwgZnVuY3Rpb24gKHQsIGUpIHsgZSBpbnN0YW5jZW9mIFhNTEh0dHBSZXF1ZXN0ICYmIFwibG9hZFwiID09PSB0WzBdICYmIGEuZW1pdChcInhoci1sb2FkLXJlbW92ZWRcIiwgW3RbMV0sIHRbMl1dLCBlKSB9KSwgYS5vbihcImZuLXN0YXJ0XCIsIGZ1bmN0aW9uICh0LCBlLCBuKSB7IGUgaW5zdGFuY2VvZiBYTUxIdHRwUmVxdWVzdCAmJiAoXCJvbmxvYWRcIiA9PT0gbiAmJiAodGhpcy5vbmxvYWQgPSAhMCksIChcImxvYWRcIiA9PT0gKHRbMF0gJiYgdFswXS50eXBlKSB8fCB0aGlzLm9ubG9hZCkgJiYgKHRoaXMueGhyQ2JTdGFydCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpKSkgfSksIGEub24oXCJmbi1lbmRcIiwgZnVuY3Rpb24gKHQsIGUpIHsgdGhpcy54aHJDYlN0YXJ0ICYmIGEuZW1pdChcInhoci1jYi10aW1lXCIsIFsobmV3IERhdGUpLmdldFRpbWUoKSAtIHRoaXMueGhyQ2JTdGFydCwgdGhpcy5vbmxvYWQsIGVdLCBlKSB9KSB9IH0sIHsgMTogXCJYTDdIQklcIiwgMjogMTEsIDM6IDksIDQ6IDUsIGVlOiBcIlFKZjNheFwiLCBoYW5kbGU6IFwiRDVEdUxQXCIsIGxvYWRlcjogXCJHOXowQmxcIiB9XSwgMTE6IFtmdW5jdGlvbiAodCwgZSkgeyBlLmV4cG9ydHMgPSBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLCBuID0gd2luZG93LmxvY2F0aW9uLCByID0ge307IGUuaHJlZiA9IHQsIHIucG9ydCA9IGUucG9ydDsgdmFyIG8gPSBlLmhyZWYuc3BsaXQoXCI6Ly9cIik7IHJldHVybiAhci5wb3J0ICYmIG9bMV0gJiYgKHIucG9ydCA9IG9bMV0uc3BsaXQoXCIvXCIpWzBdLnNwbGl0KFwiQFwiKS5wb3AoKS5zcGxpdChcIjpcIilbMV0pLCByLnBvcnQgJiYgXCIwXCIgIT09IHIucG9ydCB8fCAoci5wb3J0ID0gXCJodHRwc1wiID09PSBvWzBdID8gXCI0NDNcIiA6IFwiODBcIiksIHIuaG9zdG5hbWUgPSBlLmhvc3RuYW1lIHx8IG4uaG9zdG5hbWUsIHIucGF0aG5hbWUgPSBlLnBhdGhuYW1lLCByLnByb3RvY29sID0gb1swXSwgXCIvXCIgIT09IHIucGF0aG5hbWUuY2hhckF0KDApICYmIChyLnBhdGhuYW1lID0gXCIvXCIgKyByLnBhdGhuYW1lKSwgci5zYW1lT3JpZ2luID0gIWUuaG9zdG5hbWUgfHwgZS5ob3N0bmFtZSA9PT0gZG9jdW1lbnQuZG9tYWluICYmIGUucG9ydCA9PT0gbi5wb3J0ICYmIGUucHJvdG9jb2wgPT09IG4ucHJvdG9jb2wsIHIgfSB9LCB7fV0sIGdvczogW2Z1bmN0aW9uICh0LCBlKSB7IGUuZXhwb3J0cyA9IHQoXCI3ZVNERmhcIikgfSwge31dLCBcIjdlU0RGaFwiOiBbZnVuY3Rpb24gKHQsIGUpIHsgZnVuY3Rpb24gbih0LCBlLCBuKSB7IGlmIChyLmNhbGwodCwgZSkpIHJldHVybiB0W2VdOyB2YXIgbyA9IG4oKTsgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3Qua2V5cykgdHJ5IHsgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBlLCB7IHZhbHVlOiBvLCB3cml0YWJsZTogITAsIGVudW1lcmFibGU6ICExIH0pLCBvIH0gY2F0Y2ggKGkpIHsgfSByZXR1cm4gdFtlXSA9IG8sIG8gfSB2YXIgciA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7IGUuZXhwb3J0cyA9IG4gfSwge31dLCBENUR1TFA6IFtmdW5jdGlvbiAodCwgZSkgeyBmdW5jdGlvbiBuKHQsIGUsIG4pIHsgcmV0dXJuIHIubGlzdGVuZXJzKHQpLmxlbmd0aCA/IHIuZW1pdCh0LCBlLCBuKSA6IChvW3RdIHx8IChvW3RdID0gW10pLCB2b2lkIG9bdF0ucHVzaChlKSkgfSB2YXIgciA9IHQoXCJlZVwiKS5jcmVhdGUoKSwgbyA9IHt9OyBlLmV4cG9ydHMgPSBuLCBuLmVlID0gciwgci5xID0gbyB9LCB7IGVlOiBcIlFKZjNheFwiIH1dLCBoYW5kbGU6IFtmdW5jdGlvbiAodCwgZSkgeyBlLmV4cG9ydHMgPSB0KFwiRDVEdUxQXCIpIH0sIHt9XSwgWEw3SEJJOiBbZnVuY3Rpb24gKHQsIGUpIHsgZnVuY3Rpb24gbih0KSB7IHZhciBlID0gdHlwZW9mIHQ7IHJldHVybiAhdCB8fCBcIm9iamVjdFwiICE9PSBlICYmIFwiZnVuY3Rpb25cIiAhPT0gZSA/IC0xIDogdCA9PT0gd2luZG93ID8gMCA6IGkodCwgbywgZnVuY3Rpb24gKCkgeyByZXR1cm4gcisrIH0pIH0gdmFyIHIgPSAxLCBvID0gXCJuckBpZFwiLCBpID0gdChcImdvc1wiKTsgZS5leHBvcnRzID0gbiB9LCB7IGdvczogXCI3ZVNERmhcIiB9XSwgaWQ6IFtmdW5jdGlvbiAodCwgZSkgeyBlLmV4cG9ydHMgPSB0KFwiWEw3SEJJXCIpIH0sIHt9XSwgbG9hZGVyOiBbZnVuY3Rpb24gKHQsIGUpIHsgZS5leHBvcnRzID0gdChcIkc5ejBCbFwiKSB9LCB7fV0sIEc5ejBCbDogW2Z1bmN0aW9uICh0LCBlKSB7IGZ1bmN0aW9uIG4oKSB7IHZhciB0ID0gbC5pbmZvID0gTlJFVU0uaW5mbzsgaWYgKHQgJiYgdC5saWNlbnNlS2V5ICYmIHQuYXBwbGljYXRpb25JRCAmJiBmICYmIGYuYm9keSkgeyBzKGgsIGZ1bmN0aW9uIChlLCBuKSB7IGUgaW4gdCB8fCAodFtlXSA9IG4pIH0pLCBsLnByb3RvID0gXCJodHRwc1wiID09PSBwLnNwbGl0KFwiOlwiKVswXSB8fCB0LnNzbEZvckh0dHAgPyBcImh0dHBzOi8vXCIgOiBcImh0dHA6Ly9cIiwgYShcIm1hcmtcIiwgW1wib25sb2FkXCIsIGkoKV0pOyB2YXIgZSA9IGYuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTsgZS5zcmMgPSBsLnByb3RvICsgdC5hZ2VudCwgZi5ib2R5LmFwcGVuZENoaWxkKGUpIH0gfSBmdW5jdGlvbiByKCkgeyBcImNvbXBsZXRlXCIgPT09IGYucmVhZHlTdGF0ZSAmJiBvKCkgfSBmdW5jdGlvbiBvKCkgeyBhKFwibWFya1wiLCBbXCJkb21Db250ZW50XCIsIGkoKV0pIH0gZnVuY3Rpb24gaSgpIHsgcmV0dXJuIChuZXcgRGF0ZSkuZ2V0VGltZSgpIH0gdmFyIGEgPSB0KFwiaGFuZGxlXCIpLCBzID0gdCgxKSwgYyA9IHdpbmRvdywgZiA9IGMuZG9jdW1lbnQsIHUgPSBcImFkZEV2ZW50TGlzdGVuZXJcIiwgZCA9IFwiYXR0YWNoRXZlbnRcIiwgcCA9IChcIlwiICsgbG9jYXRpb24pLnNwbGl0KFwiP1wiKVswXSwgaCA9IHsgYmVhY29uOiBcImJhbS5uci1kYXRhLm5ldFwiLCBlcnJvckJlYWNvbjogXCJiYW0ubnItZGF0YS5uZXRcIiwgYWdlbnQ6IFwianMtYWdlbnQubmV3cmVsaWMuY29tL25yLTUxNS5taW4uanNcIiB9LCBsID0gZS5leHBvcnRzID0geyBvZmZzZXQ6IGkoKSwgb3JpZ2luOiBwLCBmZWF0dXJlczoge30gfTsgZlt1XSA/IChmW3VdKFwiRE9NQ29udGVudExvYWRlZFwiLCBvLCAhMSksIGNbdV0oXCJsb2FkXCIsIG4sICExKSkgOiAoZltkXShcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLCByKSwgY1tkXShcIm9ubG9hZFwiLCBuKSksIGEoXCJtYXJrXCIsIFtcImZpcnN0Ynl0ZVwiLCBpKCldKSB9LCB7IDE6IDIwLCBoYW5kbGU6IFwiRDVEdUxQXCIgfV0sIDIwOiBbZnVuY3Rpb24gKHQsIGUpIHsgZnVuY3Rpb24gbih0LCBlKSB7IHZhciBuID0gW10sIG8gPSBcIlwiLCBpID0gMDsgZm9yIChvIGluIHQpIHIuY2FsbCh0LCBvKSAmJiAobltpXSA9IGUobywgdFtvXSksIGkgKz0gMSk7IHJldHVybiBuIH0gdmFyIHIgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OyBlLmV4cG9ydHMgPSBuIH0sIHt9XSwgMjE6IFtmdW5jdGlvbiAodCwgZSkgeyBmdW5jdGlvbiBuKHQsIGUsIG4pIHsgZSB8fCAoZSA9IDApLCBcInVuZGVmaW5lZFwiID09IHR5cGVvZiBuICYmIChuID0gdCA/IHQubGVuZ3RoIDogMCk7IGZvciAodmFyIHIgPSAtMSwgbyA9IG4gLSBlIHx8IDAsIGkgPSBBcnJheSgwID4gbyA/IDAgOiBvKSA7ICsrciA8IG87KSBpW3JdID0gdFtlICsgcl07IHJldHVybiBpIH0gZS5leHBvcnRzID0gbiB9LCB7fV0sIDIyOiBbZnVuY3Rpb24gKHQsIGUpIHsgZnVuY3Rpb24gbih0KSB7IHJldHVybiAhKHQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0ICYmIHQuYXBwbHkgJiYgIXRbaV0pIH0gdmFyIHIgPSB0KFwiZWVcIiksIG8gPSB0KDEpLCBpID0gXCJuckB3cmFwcGVyXCIsIGEgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OyBlLmV4cG9ydHMgPSBmdW5jdGlvbiAodCkgeyBmdW5jdGlvbiBlKHQsIGUsIHIsIGEpIHsgZnVuY3Rpb24gbnJXcmFwcGVyKCkgeyB2YXIgbiwgaSwgcywgZjsgdHJ5IHsgaSA9IHRoaXMsIG4gPSBvKGFyZ3VtZW50cyksIHMgPSByICYmIHIobiwgaSkgfHwge30gfSBjYXRjaCAoZCkgeyB1KFtkLCBcIlwiLCBbbiwgaSwgYV0sIHNdKSB9IGMoZSArIFwic3RhcnRcIiwgW24sIGksIGFdLCBzKTsgdHJ5IHsgcmV0dXJuIGYgPSB0LmFwcGx5KGksIG4pIH0gY2F0Y2ggKHApIHsgdGhyb3cgYyhlICsgXCJlcnJcIiwgW24sIGksIHBdLCBzKSwgcCB9IGZpbmFsbHkgeyBjKGUgKyBcImVuZFwiLCBbbiwgaSwgZl0sIHMpIH0gfSByZXR1cm4gbih0KSA/IHQgOiAoZSB8fCAoZSA9IFwiXCIpLCBucldyYXBwZXJbaV0gPSAhMCwgZih0LCBucldyYXBwZXIpLCBucldyYXBwZXIpIH0gZnVuY3Rpb24gcyh0LCByLCBvLCBpKSB7IG8gfHwgKG8gPSBcIlwiKTsgdmFyIGEsIHMsIGMsIGYgPSBcIi1cIiA9PT0gby5jaGFyQXQoMCk7IGZvciAoYyA9IDA7IGMgPCByLmxlbmd0aDsgYysrKSBzID0gcltjXSwgYSA9IHRbc10sIG4oYSkgfHwgKHRbc10gPSBlKGEsIGYgPyBzICsgbyA6IG8sIGksIHMsIHQpKSB9IGZ1bmN0aW9uIGMoZSwgbiwgcikgeyB0cnkgeyB0LmVtaXQoZSwgbiwgcikgfSBjYXRjaCAobykgeyB1KFtvLCBlLCBuLCByXSkgfSB9IGZ1bmN0aW9uIGYodCwgZSkgeyBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5rZXlzKSB0cnkgeyB2YXIgbiA9IE9iamVjdC5rZXlzKHQpOyByZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBuLCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdFtuXSB9LCBzZXQ6IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0W25dID0gZSwgZSB9IH0pIH0pLCBlIH0gY2F0Y2ggKHIpIHsgdShbcl0pIH0gZm9yICh2YXIgbyBpbiB0KSBhLmNhbGwodCwgbykgJiYgKGVbb10gPSB0W29dKTsgcmV0dXJuIGUgfSBmdW5jdGlvbiB1KGUpIHsgdHJ5IHsgdC5lbWl0KFwiaW50ZXJuYWwtZXJyb3JcIiwgZSkgfSBjYXRjaCAobikgeyB9IH0gcmV0dXJuIHQgfHwgKHQgPSByKSwgZS5pblBsYWNlID0gcywgZS5mbGFnID0gaSwgZSB9IH0sIHsgMTogMjEsIGVlOiBcIlFKZjNheFwiIH1dIH0sIHt9LCBbXCJHOXowQmxcIiwgMywgMTAsIDRdKTtcbiAgICAgICAgOyBOUkVVTS5pbmZvID0geyBiZWFjb246IFwiYmFtLm5yLWRhdGEubmV0XCIsIGVycm9yQmVhY29uOiBcImJhbS5uci1kYXRhLm5ldFwiLCBsaWNlbnNlS2V5OiBsaWNlbnNlS2V5LCBhcHBsaWNhdGlvbklEOiBhcHBJZCwgc2E6IDEsIGFnZW50OiBcImpzLWFnZW50Lm5ld3JlbGljLmNvbS9uci01MTUubWluLmpzXCIgfVxuICAgICAgICA7XHJcbiAgICB9XHJcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3UmVsaWM7XG4iLCJcclxudmFyIHJheUd1biA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgIHZhciBhcGlLZXk7XHJcbiAgICBpZiAoY29uZmlnID09IG51bGwpIHtcclxuICAgICAgICBjb25maWcgPSB7fTtcclxuICAgIH1cclxuICAgIGFwaUtleSA9IGNvbmZpZy5SQVlHVU5fQVBJX0tFWTtcclxuICAgIGlmIChhcGlLZXkgJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICE9PSAnbG9jYWxob3N0Jykge1xyXG4gICAgICAgIGlmIChSYXlndW4gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBSYXlndW4uaW5pdChhcGlLZXksIHtcclxuICAgICAgICAgICAgICAgIGlnbm9yZTNyZFBhcnR5RXJyb3JzOiB0cnVlXHJcbiAgICAgICAgICAgIH0pLmF0dGFjaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUmF5Z3VuICE9IG51bGwgPyBSYXlndW4uZmlsdGVyU2Vuc2l0aXZlRGF0YShbJ3Bhc3N3b3JkJ10pIDogdm9pZCAwO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByYXlHdW47IiwiXG52YXIgdXNlclNuYXAgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICB2YXIgYXBpS2V5ID0gJzAzMmJhZjg3LTg1NDUtNGViYy1hNTU3LTkzNDg1OTM3MWZhNS5qcycsIHMsIHg7XG4gICAgaWYgKGNvbmZpZyA9PSBudWxsKSB7XHJcbiAgICAgICAgY29uZmlnID0ge307XHJcbiAgICB9XG4gICAgYXBpS2V5ID0gY29uZmlnLlVTRVJfU05BUF9BUElfS0VZO1xuICAgIGlmIChhcGlLZXkgJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICE9PSAnbG9jYWxob3N0Jykge1xyXG4gICAgICAgIHdpbmRvdy51c2Vyc25hcGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgbW9kZTogJ3JlcG9ydCcsXG4gICAgICAgICAgICBzaG9ydGN1dDogdHJ1ZSxcbiAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBVc2VyU25hcC5zZXRFbWFpbEJveChEb2MuYXBwLnVzZXIudXNlck5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcbiAgICAgICAgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICBzLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgICAgcy5hc3luYyA9IHRydWU7XG4gICAgICAgIHMuc3JjID0gJy8vYXBpLnVzZXJzbmFwLmNvbS9sb2FkLycgKyBhcGlLZXkgKyAnLmpzJztcbiAgICAgICAgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gICAgICAgIHJldHVybiB4LmFwcGVuZENoaWxkKHMpO1xyXG4gICAgfVxyXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVzZXJTbmFwO1xuXG5cbiIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5cclxuY2xhc3MgQW5hbHl0aWNzIHtcclxuICAgIGNvbnN0cnVjdG9yKGVkaXRvciwgbWFwKSB7XHJcbiAgICAgICAgdGhpcy5fZWRpdG9yID0gZWRpdG9yO1xyXG4gICAgICAgIHRoaXMuX21hcCA9IG1hcDtcclxuXHJcbiAgICAgICAgLy8gdGhpcyBnZXRzIHBvcHVsYXRlZCBieSB0aGlzLl9tYXAubG9hZE1hcEV4dHJhRGF0YSwgb24gbG9hZCBhbmQgYWZ0ZXIgZXZlcnkgYXV0b3NhdmVcclxuICAgICAgICB0aGlzLm1hcEFuYWx5dGljcyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIC0tLS0tLS0tLSBjb250ZXh0dWFsIGFuYWx5dGljcyAtLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vIC0gdGhlc2UgYXJlIGFsbCBjYWxjdWxhdGVkIGhlcmUsIHVubGlrZSBtYXAgYW5hbHl0aWNzIHdoaWNoIGFyZSBjYWxjdWxhdGVkIG9uIHRoZSBzZXJ2ZXIgYW5kIGNvbm5lY3RlZCB3aXRoIGJhZGdlcyBhbmQgcG9pbnRzXHJcblxyXG4gICAgICAgIC8vIHRoaXMgZ2V0cyBjYWxjdWxhdGVkIGJ5IHVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3NcclxuICAgICAgICB0aGlzLmNvbnRleHR1YWxBbmFseXRpY3MgPSB7XHJcbiAgICAgICAgICAgIHRoaW5nTmFtZTogJycsXHJcblxyXG4gICAgICAgICAgICAvLyB0aGluZyBzdHVmZlxyXG4gICAgICAgICAgICBkaXN0aW5jdEZyb206IDAsXHJcbiAgICAgICAgICAgIGludGVudGlvbmFsbHlEaXN0aW5jdEZyb206IDAsXHJcbiAgICAgICAgICAgIHBhcnRPZjogMCxcclxuICAgICAgICAgICAgaW5jbHVkZXNQYXJ0czogMCxcclxuICAgICAgICAgICAgcmVsYXRlZFRvOiAwLFxyXG4gICAgICAgICAgICBpc1JlbGF0aW9uc2hpcDogMCxcclxuICAgICAgICAgICAgbG9va2luZ0F0OiAwLFxyXG4gICAgICAgICAgICBsb29rZWRBdEZyb206IDAsXHJcblxyXG4gICAgICAgICAgICAvLyBSIHN0dWZmXHJcbiAgICAgICAgICAgIHJGcm9tVGhpbmdOYW1lOiAnJyxcclxuICAgICAgICAgICAgclRvVGhpbmdOYW1lOiAnJyxcclxuICAgICAgICAgICAgaXNSVGhpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc1JTeXN0ZW06IGZhbHNlLFxyXG4gICAgICAgICAgICBpc1JQb2ludDogZmFsc2UsXHJcbiAgICAgICAgICAgIGlzUlZpZXc6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVEaWFncmFtRXZlbnQoZXZlbnROYW1lLCBlKSB7XHJcbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gJ0NoYW5nZWRTZWxlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXModGhpcy5fbWFwLmdldFVpKCkuVEFCX0lEX0FOQUxZVElDU19USElORykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGV4dHVhbEFuYWx5dGljcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIGN1cnJlbnRUYWJDaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gdGhpcy5fbWFwLmdldFVpKCkuVEFCX0lEX0FOQUxZVElDU19USElORykgeyAvLyBvcGVuaW5nIHRoaW5nIGFuYWx5dGljcyB0YWJcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDb250ZXh0dWFsQW5hbHl0aWNzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUNvbnRleHR1YWxBbmFseXRpY3MoKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygndXBkYXRlQ29udGV4dHVhbEFuYWx5dGljcycpO1xyXG4gICAgICAgIGlmICghdGhpcy5fbWFwLmdldFVpKCkuY3VycmVudFRhYklzKHRoaXMuX21hcC5nZXRVaSgpLlRBQl9JRF9BTkFMWVRJQ1NfVEhJTkcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICB2YXIgcGFydCA9IGRpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCk7XHJcbiAgICAgICAgdmFyIGEgPSB0aGlzLmNvbnRleHR1YWxBbmFseXRpY3M7XHJcblxyXG4gICAgICAgIGlmIChwYXJ0ICYmIHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICB2YXIgdGhpbmcgPSBwYXJ0O1xyXG5cclxuICAgICAgICAgICAgLy8gdGhpbmcgbmFtZVxyXG4gICAgICAgICAgICBhLnRoaW5nTmFtZSA9IHRoaW5nLmRhdGEudGV4dDtcclxuXHJcbiAgICAgICAgICAgIC8vIGRpc3RpbmN0IGZyb21cclxuICAgICAgICAgICAgYS5kaXN0aW5jdEZyb20gPSBfLndoZXJlKGRpYWdyYW0ubW9kZWwubm9kZURhdGFBcnJheSwgeyBpc0dyb3VwOiB0cnVlIH0pLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgICAgICAvLyBwYXJ0IG9mXHJcbiAgICAgICAgICAgIHZhciBsZXZlbCA9IDA7XHJcbiAgICAgICAgICAgIHZhciB0aGluZzIgPSB0aGluZztcclxuICAgICAgICAgICAgd2hpbGUgKHRoaW5nMiA9IHRoaXMuZ2V0Q29udGFpbmluZ0dyb3VwKHRoaW5nMikpIHtcclxuICAgICAgICAgICAgICAgIGxldmVsKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYS5wYXJ0T2YgPSBsZXZlbDtcclxuXHJcbiAgICAgICAgICAgIC8vIGluY2x1ZGVzIHBhcnRzXHJcbiAgICAgICAgICAgIGEuaW5jbHVkZXNQYXJ0cyA9IHRoaXMuY291bnRHcm91cHModGhpbmcpO1xyXG5cclxuICAgICAgICAgICAgLy8gcmVsYXRlZCB0byAvIGxvb2tpbmcgYXQgLyBsb29rZWQgYXQgZnJvbSAvIGludGVudGlvbmFsbHkgZGlzdGluY3QgZnJvbVxyXG4gICAgICAgICAgICBhLnJlbGF0ZWRUbyA9IDA7XHJcbiAgICAgICAgICAgIGEubG9va2luZ0F0ID0gMDtcclxuICAgICAgICAgICAgYS5sb29rZWRBdEZyb20gPSAwO1xyXG4gICAgICAgICAgICBhLmludGVudGlvbmFsbHlEaXN0aW5jdEZyb20gPSAwO1xyXG4gICAgICAgICAgICB2YXIgbGlua3MgPSB0aGluZy5saW5rc0Nvbm5lY3RlZDtcclxuICAgICAgICAgICAgdmFyIHJDb25uZWN0ZWRUaGluZ0tleXMgPSBbXTtcclxuICAgICAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIC8vIFAgbGlua1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PT0gJ1AnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmsuZnJvbU5vZGUgPT09IHRoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGEubG9va2luZ0F0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxpbmsudG9Ob2RlID09PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhLmxvb2tlZEF0RnJvbSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBEIGxpbmtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PT0gJ0QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYS5pbnRlbnRpb25hbGx5RGlzdGluY3RGcm9tKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUiBsaW5rXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghbGluay5kYXRhLmNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJhY2sga2V5cyBvZiByZWxhdGVkIHRoaW5ncyBzbyB3ZSBkb24ndCBjb3VudCB0aGVtIG11bHRpcGxlIHRpbWVzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmsuZnJvbU5vZGUgPT09IHRoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJDb25uZWN0ZWRUaGluZ0tleXMucHVzaChsaW5rLnRvTm9kZS5kYXRhLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxpbmsudG9Ob2RlID09PSB0aGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByQ29ubmVjdGVkVGhpbmdLZXlzLnB1c2gobGluay5mcm9tTm9kZS5kYXRhLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGEucmVsYXRlZFRvID0gXy51bmlxKHJDb25uZWN0ZWRUaGluZ0tleXMpLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIC8vIGlzUmVsYXRpb25zaGlwXHJcbiAgICAgICAgICAgIGEuaXNSZWxhdGlvbnNoaXAgPSB0aGluZy5pc0xpbmtMYWJlbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocGFydCAmJiBwYXJ0IGluc3RhbmNlb2YgZ28uTGluaykge1xyXG4gICAgICAgICAgICB2YXIgcmVsID0gcGFydDtcclxuXHJcbiAgICAgICAgICAgIC8vIHRoaW5nIG5hbWVzXHJcbiAgICAgICAgICAgIGEuckZyb21UaGluZ05hbWUgPSByZWwuZnJvbU5vZGUuZGF0YS50ZXh0O1xyXG4gICAgICAgICAgICBhLnJUb1RoaW5nTmFtZSA9IHJlbC50b05vZGUuZGF0YS50ZXh0O1xyXG5cclxuICAgICAgICAgICAgLy8gaXMgUiB0aGluZ1xyXG4gICAgICAgICAgICBhLmlzUlRoaW5nID0gcmVsLmlzTGFiZWxlZExpbms7XHJcblxyXG4gICAgICAgICAgICAvLyBpcyBSIHN5c3RlbVxyXG4gICAgICAgICAgICBhLmlzUlN5c3RlbSA9IHJlbC5pc0xhYmVsZWRMaW5rICYmIHRoaXMuY291bnRHcm91cHMocmVsLmxhYmVsTm9kZXMuZmlyc3QoKSkgPiAwO1xyXG5cclxuICAgICAgICAgICAgLy8gaXMgUiBwb2ludFxyXG4gICAgICAgICAgICBhLmlzUlBvaW50ID0gcmVsLmlzTGFiZWxlZExpbmsgJiYgdGhpcy5pc1BvaW50KHJlbC5sYWJlbE5vZGVzLmZpcnN0KCkpO1xyXG5cclxuICAgICAgICAgICAgLy8gaXMgUiB2aWV3XHJcbiAgICAgICAgICAgIGEuaXNSVmlldyA9IHJlbC5pc0xhYmVsZWRMaW5rICYmIHRoaXMuaXNWaWV3KHJlbC5sYWJlbE5vZGVzLmZpcnN0KCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIGVpdGhlciB0aGUgY29udGFpbmluZ0dyb3VwIG9yIHRoZSByVGhpbmdDb250YWluaW5nR3JvdXAsIHdoaWNoZXZlciBpcyBub24tbnVsbFxyXG4gICAgZ2V0Q29udGFpbmluZ0dyb3VwKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwLmNvbnRhaW5pbmdHcm91cCB8fCB0aGlzLmdldFJUaGluZ0NvbnRhaW5pbmdHcm91cChncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgZ3JvdXAgaXMgYW4gUi10aGluZyBiZXR3ZWVuIHR3byBzaWJsaW5nIHBhcnRzIG9mIGEgd2hvbGUsIHJldHVybnMgdGhlIHdob2xlOyBlbHNlIHJldHVybnMgbnVsbFxyXG4gICAgZ2V0UlRoaW5nQ29udGFpbmluZ0dyb3VwKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKGdyb3VwLmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgIHZhciBmcm9tUGFyZW50ID0gZ3JvdXAubGFiZWxlZExpbmsuZnJvbU5vZGUuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB2YXIgdG9QYXJlbnQgPSBncm91cC5sYWJlbGVkTGluay50b05vZGUuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICBpZiAoZnJvbVBhcmVudCAhPT0gbnVsbCAmJiB0b1BhcmVudCAhPT0gbnVsbCAmJiBmcm9tUGFyZW50ID09PSB0b1BhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZyb21QYXJlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY291bnRzIHRoZSBtZW1iZXIgcGFydHMgb2YgdGhlIGdyb3VwIHRoYXQgYXJlIGdyb3VwcywgcmVjdXJzaXZlbHkgKG5vdCBpbmNsdWRpbmcgdGhlIGdyb3VwIGl0c2VsZilcclxuICAgIGNvdW50R3JvdXBzKGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICB2YXIgaXQgPSB0aGlzLmdldE1lbWJlckdyb3Vwcyhncm91cCkuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBjb3VudCArPSAxICsgdGhpcy5jb3VudEdyb3VwcyhwYXJ0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb3VudDtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBjb2xsZWN0aW9uIG9mIGdyb3VwcyB0aGF0IGFyZSBlaXRoZXIgYSBtZW1iZXJQYXJ0IG9mIHRoaXMgZ3JvdXAsIG9yIGFuIFItdGhpbmcgYmV0d2VlbiBzaWJsaW5nIG1lbWJlclBhcnRzXHJcbiAgICBnZXRNZW1iZXJHcm91cHMoZ3JvdXApIHtcclxuICAgICAgICB2YXIgbWVtYmVycyA9IG5ldyBnby5MaXN0KCk7XHJcbiAgICAgICAgdmFyIGl0ID0gZ3JvdXAubWVtYmVyUGFydHM7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBtZW1iZXJzLmFkZChwYXJ0KTtcclxuICAgICAgICAgICAgICAgIHZhciBydGhpbmcgPSB0aGlzLmdldFJUaGluZ1RvU2libGluZyhwYXJ0KTsgLy8gTkI6IHNob3VsZCBub3QgZ2V0IGR1cGxpY2F0aW9uIGhlcmUsIGFzIHRoaXMgY2hlY2tzIGZvciByLXRoaW5ncyBpbiBvbmx5IG9uZSBkaXJlY3Rpb25cclxuICAgICAgICAgICAgICAgIGlmIChydGhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJzLmFkZChydGhpbmcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZW1iZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIHRoZSBncm91cCBpcyBsaW5rZWQgYnkgYW4gUi10aGluZyB0byBhIHNpYmxpbmcgKHdpdGggdGhlIGdyb3VwIGFzIHRoZSBmcm9tTm9kZSksIHJldHVybnMgdGhlIFItdGhpbmc7IGVsc2UgcmV0dXJucyBudWxsXHJcbiAgICBnZXRSVGhpbmdUb1NpYmxpbmcoZ3JvdXApIHtcclxuICAgICAgICB2YXIgaXQgPSBncm91cC5maW5kTGlua3NPdXRPZigpO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsubGFiZWxOb2Rlcy5jb3VudCA+IDAgJiYgbGluay50b05vZGUuY29udGFpbmluZ0dyb3VwID09PSBncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsaW5rLmxhYmVsTm9kZXMuZmlyc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBpc1BvaW50KGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGl0ID0gZ3JvdXAuZmluZExpbmtzT3V0T2YoKTtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT09ICdQJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVmlldyhncm91cCkge1xyXG4gICAgICAgIHZhciBpdCA9IGdyb3VwLmZpbmRMaW5rc0ludG8oKTtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT09ICdQJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBbmFseXRpY3M7IiwiY2xhc3MgQXR0YWNobWVudHMge1xyXG4gICAgY29uc3RydWN0b3IoZWRpdG9yLCBtYXApIHtcclxuICAgICAgICB0aGlzLl9lZGl0b3IgPSBlZGl0b3I7XHJcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGVkVGhpbmcgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYXR0YWNobWVudHMgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmF0dGFjaG1lbnRUeXBlcyA9IFtcclxuICAgICAgICAgICAgeyBuYW1lOiAnbm90ZScsIGxhYmVsU2luZ3VsYXI6ICdOb3RlJywgbGFiZWxQbHVyYWw6ICdOb3RlcycgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnbGluaycsIGxhYmVsU2luZ3VsYXI6ICdXZWIgTGluaycsIGxhYmVsUGx1cmFsOiAnV2ViIExpbmtzJyB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICd0YXNrJywgbGFiZWxTaW5ndWxhcjogJ1Rhc2snLCBsYWJlbFBsdXJhbDogJ1Rhc2tzJyB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdtYXAnLCBsYWJlbFNpbmd1bGFyOiAnTGlua2VkIE1ldGFNYXAnLCBsYWJlbFBsdXJhbDogJ0xpbmtlZCBNZXRhTWFwcycgfVxyXG4gICAgICAgICAgICAvL3tuYW1lOiAnZG9jJywgbGFiZWxTaW5ndWxhcjogJ0RvY3VtZW50JywgbGFiZWxQbHVyYWw6ICdEb2N1bWVudHMnfSAgLy8gbGltaXQgb3ZlcmFsbCBzdG9yYWdlIHNwYWNlIE9SIHNpbXBsZXIgcnVsZXM/XHJcbiAgICAgICAgICAgIC8vIGxpbWl0IGZpbGUgdHlwZXMgLSBwZGYsIGpwZywgZ2lmLCBwbmcsIG9mZmljZT8uLi4gIHdoaXRlbGlzdCB2cy4gYmxhY2tsaXN0XHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVEaWFncmFtRXZlbnQoZXZlbnROYW1lLCBlKSB7XHJcbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gJ0NoYW5nZWRTZWxlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXModGhpcy5fbWFwLmdldFVpKCkuVEFCX0lEX0FUVEFDSE1FTlRTKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wRWRpdGluZ0FsbCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQXR0YWNobWVudHMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZFNlbGVjdGVkVGhpbmdBdHRhY2htZW50cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIGN1cnJlbnRUYWJDaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gdGhpcy5fbWFwLmdldFVpKCkuVEFCX0lEX0FUVEFDSE1FTlRTKSB7IC8vIG9wZW5pbmcgdGFiXHJcbiAgICAgICAgICAgIHRoaXMubG9hZFNlbGVjdGVkVGhpbmdBdHRhY2htZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2xkVmFsdWUgPT09IHRoaXMuX21hcC5nZXRVaSgpLlRBQl9JRF9BVFRBQ0hNRU5UUykgeyAvLyBjbG9zaW5nIHRhYlxyXG4gICAgICAgICAgICB0aGlzLnNhdmVBdHRhY2htZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsb2FkU2VsZWN0ZWRUaGluZ0F0dGFjaG1lbnRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9tYXAudGhpbmdTZWxlY3RlZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUaGluZyA9IHRoaXMuX21hcC5nZXRVbmlxdWVUaGluZ1NlbGVjdGVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0YWNobWVudHMgPSB0aGlzLnNlbGVjdGVkVGhpbmcuZGF0YS5hdHRhY2htZW50cztcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXR0YWNobWVudHMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50cyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldCBhbGwgYXR0YWNobWVudHMgdG8gZWRpdGluZyA9IGZhbHNlXHJcbiAgICBzdG9wRWRpdGluZ0FsbCgpIHtcclxuICAgICAgICBpZiAodGhpcy5hdHRhY2htZW50cykge1xyXG4gICAgICAgICAgICBfLmVhY2godGhpcy5hdHRhY2htZW50cywgKGF0dCkgPT4geyBhdHQuZWRpdGluZyA9IGZhbHNlOyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZWRpdGluZ0FuSXRlbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hdHRhY2htZW50cyAmJiBfLmZpbmRXaGVyZSh0aGlzLmF0dGFjaG1lbnRzLCB7IGVkaXRpbmc6IHRydWUgfSkgIT09IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzZXQgYWxsIG90aGVyIGF0dGFjaG1lbnRzIHRvIGVkaXRpbmcgPSBmYWxzZVxyXG4gICAgc3RhcnRFZGl0aW5nKGF0dGFjaG1lbnQpIHtcclxuICAgICAgICB0aGlzLnN0b3BFZGl0aW5nQWxsKCk7XHJcbiAgICAgICAgYXR0YWNobWVudC5lZGl0aW5nID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlSXRlbShhdHRhY2htZW50KSB7XHJcbiAgICAgICAgYXR0YWNobWVudC5lZGl0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zYXZlQXR0YWNobWVudHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlQXR0YWNobWVudHMoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3NhdmVBdHRhY2htZW50cywgc2VsZWN0ZWQ6ICcgKyB0aGlzLnNlbGVjdGVkVGhpbmcpO1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVGhpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpcy5zZWxlY3RlZFRoaW5nLmRhdGEsICdhdHRhY2htZW50cycsIHRoaXMuYXR0YWNobWVudHMpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbWFwLmdldEF1dG9zYXZlKCkuc2F2ZU5vdygnZWRpdF9hdHRhY2htZW50cycpO1xyXG4gICAgfVxyXG5cclxuICAgIGxpc3RBdHRhY2htZW50cyh0eXBlKSB7XHJcbiAgICAgICAgbGV0IGF0dHMgPSBfLndoZXJlKHRoaXMuYXR0YWNobWVudHMsIHsgdHlwZTogdHlwZSB9KTtcclxuICAgICAgICByZXR1cm4gYXR0cztcclxuICAgIH1cclxuXHJcbiAgICBhZGRBdHRhY2htZW50KHR5cGUpIHtcclxuICAgICAgICBsZXQgaXRlbSA9IHsgdHlwZTogdHlwZSwgZWRpdGluZzogdHJ1ZSB9O1xyXG4gICAgICAgIGlmICh0eXBlID09PSAnbm90ZScpIHtcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgdGV4dDogJycsIHVybDogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnbGluaycpIHtcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgbGFiZWw6ICcnLCB1cmw6ICcnIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ3Rhc2snKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0YWNobWVudHMucHVzaChfLmV4dGVuZChpdGVtLCB7IHRleHQ6ICcnIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ2RvYycpIHtcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50cy5wdXNoKF8uZXh0ZW5kKGl0ZW0sIHsgbmFtZTogJycgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnbWFwJykge1xyXG4gICAgICAgICAgICB0aGlzLmF0dGFjaG1lbnRzLnB1c2goXy5leHRlbmQoaXRlbSwgeyBtYXBSZWY6IHsgaWQ6IDAsIG5hbWU6ICcnIH0gfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc1ZhbGlkKGF0dGFjaG1lbnQpIHtcclxuICAgICAgICBpZiAoYXR0YWNobWVudC50eXBlID09PSAnbGluaycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0dGFjaG1lbnQubGFiZWwgJiYgYXR0YWNobWVudC51cmwgJiYgYXR0YWNobWVudC5sYWJlbC50cmltKCkgIT09ICcnICYmIGF0dGFjaG1lbnQudXJsLnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PT0gJ25vdGUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LnRleHQgJiYgYXR0YWNobWVudC50ZXh0LnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PT0gJ3Rhc2snKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LnRleHQgJiYgYXR0YWNobWVudC50ZXh0LnRyaW0oKSAhPT0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dGFjaG1lbnQudHlwZSA9PT0gJ2RvYycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0dGFjaG1lbnQubmFtZSAmJiBhdHRhY2htZW50Lm5hbWUudHJpbSgpICE9PSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYXR0YWNobWVudC50eXBlID09PSAnbWFwJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYXR0YWNobWVudC5tYXBSZWYgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IG51bGwgJiYgYXR0YWNobWVudC5tYXBSZWYuaWQgIT09IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQXR0YWNobWVudChhdHQpIHtcclxuICAgICAgICBsZXQgdHlwZUxhYmVsID0gXy5maW5kV2hlcmUodGhpcy5hdHRhY2htZW50VHlwZXMsIHsgbmFtZTogYXR0LnR5cGUgfSkubGFiZWxTaW5ndWxhcjtcclxuICAgICAgICBpZiAoY29uZmlybSgnRGVsZXRlICcgKyB0eXBlTGFiZWwgKyAnPycpKSB7XHJcbiAgICAgICAgICAgIGxldCBpID0gXy5pbmRleE9mKHRoaXMuYXR0YWNobWVudHMsIGF0dCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0YWNobWVudHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBxdWVyeSBzZXJ2ZXIgZm9yIG1hcHMgY29udGFpbmluZyB0aGUgZ2l2ZW4gdGV4dCBpbiB0aGUgbWFwIG5hbWVcclxuICAgIGdldE90aGVyTWFwcyh2aWV3VmFsdWUpIHtcclxuICAgICAgICAvLyBOQjogdGhpcyBVUkwgaXMgY29uc3RydWN0ZWQgdG8gbWF0Y2ggdGhlIG9uZSBnZW5lcmF0ZWQgYnkgdGhlIHNlYXJjaCBmb3JtIG9uIHRoZSBtYXBzIHBhZ2UuLi5cclxuICAgICAgICBsZXQgdXJsID0gJy9tYXBzL3Zpc2libGVfbWFwcy5qc29uP3V0Zjg9JUUyJTlDJTkzJnElNUJuYW1lX2NvbnQlNUQ9JyArIHZpZXdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEubWFwcztcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvdGhlck1hcFNlbGVjdGVkKHZpZXdWYWx1ZSwgbW9kZWxWYWx1ZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdvdGhlck1hcFNlbGVjdGVkLCB2aWV3VmFsdWU6ICcgKyB2aWV3VmFsdWUuaWQgKyAnLCBtb2RlbFZhbHVlOiAnICsgbW9kZWxWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9ybWF0T3RoZXJNYXAobW9kZWwpIHtcclxuICAgICAgICByZXR1cm4gKG1vZGVsID8gbW9kZWwubmFtZSA6ICcnKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBdHRhY2htZW50czsiLCJjb25zdCBBbmFseXRpY3MgPSByZXF1aXJlKCcuL0FuYWx5dGljcy5qcycpO1xyXG5jb25zdCBBdHRhY2htZW50cyA9IHJlcXVpcmUoJy4vQXR0YWNobWVudHMuanMnKTtcclxuY29uc3QgQXV0b3NhdmUgPSByZXF1aXJlKCcuL2F1dG9zYXZlLmpzJyk7XHJcbmNvbnN0IEdlbmVyYXRvciA9IHJlcXVpcmUoJy4vZ2VuZXJhdG9yLmpzJyk7XHJcbmNvbnN0IExheW91dHMgPSByZXF1aXJlKCcuL0xheW91dHMuanMnKTtcclxuY29uc3QgUGVyc3BlY3RpdmVzID0gcmVxdWlyZSgnLi9QZXJzcGVjdGl2ZXMuanMnKTtcclxuY29uc3QgUHJlc2VudGVyID0gcmVxdWlyZSgnLi9QcmVzZW50ZXIuanMnKTtcclxuY29uc3QgVGVtcGxhdGVzID0gcmVxdWlyZSgnLi9UZW1wbGF0ZXMuanMnKTtcclxuY29uc3QgVUkgPSByZXF1aXJlKCcuL1VJLmpzJyk7XHJcblxyXG5jbGFzcyBFZGl0b3JDb25maWcge1xyXG4gICAgY29uc3RydWN0b3IoZWRpdG9yLCBtYXApIHtcclxuICAgICAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcclxuICAgICAgICB0aGlzLm1hcCA9IG1hcDtcclxuICAgICAgICB0aGlzLmFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3MoZWRpdG9yLCBtYXApO1xyXG4gICAgICAgIHRoaXMuYXR0YWNobWVudHMgPSBuZXcgQXR0YWNobWVudHMoZWRpdG9yLCBtYXApO1xyXG4gICAgICAgIHRoaXMuYXV0b3NhdmUgPSBuZXcgQXV0b3NhdmUoZWRpdG9yLCBtYXApO1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gbmV3IEdlbmVyYXRvcihlZGl0b3IsIG1hcCk7XHJcbiAgICAgICAgdGhpcy5sYXlvdXRzID0gbmV3IExheW91dHMoZWRpdG9yLCBtYXApO1xyXG4gICAgICAgIHRoaXMucGVyc3BlY3RpdmVzID0gbmV3IFBlcnNwZWN0aXZlcyhlZGl0b3IsIG1hcCk7XHJcbiAgICAgICAgdGhpcy5wcmVzZW50ZXIgPSBuZXcgUHJlc2VudGVyKGVkaXRvciwgbWFwKTtcclxuICAgICAgICAvL3RoaXMuc3RhbmRhcmRzID0gbmV3IFNhbmRiYW5rRWRpdG9yLlN0YW5kYXJkcyhlZGl0b3IsIG1hcCk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZXMgPSBuZXcgVGVtcGxhdGVzKGVkaXRvciwgbWFwKTtcclxuICAgICAgICAvL3RoaXMudGVzdHMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVGVzdHMoZWRpdG9yLCBtYXApO1xyXG4gICAgICAgIHRoaXMudWkgPSBuZXcgVUkoZWRpdG9yLCBtYXApO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBFZGl0b3JDb25maWc7IiwiY29uc3QgZ28gPSB3aW5kb3cuZ287XHJcblxyXG4vLyBsYXlvdXRzIHVzZWQgaW4gdGhlIGVkaXRvciwgZm9yIHRoZSBkaWFncmFtIG9yIGluZGl2aWR1YWwgR3JvdXBzLCBwbHVzIGxheW91dC1yZWxhdGVkIGZ1bmN0aW9uc1xyXG5jbGFzcyBMYXlvdXRzIHtcclxuICAgIGNvbnN0cnVjdG9yKGVkaXRvciwgbWFwKSB7XHJcbiAgICAgICAgdGhpcy5fZWRpdG9yID0gZWRpdG9yO1xyXG4gICAgICAgIHRoaXMuX21hcCA9IG1hcDtcclxuICAgICAgICBnby5MYXlvdXQuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVEaWFncmFtRXZlbnQoZXZlbnROYW1lLCBlKSB7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGlmIChldmVudE5hbWUgPT09ICdJbml0aWFsTGF5b3V0Q29tcGxldGVkJykge1xyXG4gICAgICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PT0gJ1NlbGVjdGlvbk1vdmVkJykge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkUGFydExvY2F0aW9uRGF0YShlKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09PSAnU2VsZWN0aW9uRGVsZXRlZCcpIHtcclxuICAgICAgICAgICAgZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09PSAnUGFydENyZWF0ZWQnKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ0xheW91dHMsIFBhcnRDcmVhdGVkJyk7XHJcbiAgICAgICAgICAgIC8vIHNldE5ld1BhcnRMb2NhdGlvbkRhdGEoZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT09ICdQYXJ0UmVzaXplZCcpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRSZXNpemVkUGFydERpbWVuc2lvbkRhdGEoZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT09ICdMaW5rRHJhd24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRqdXN0TGlua0xheW91dChlLnN1YmplY3QpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09PSAnTGlua1JlbGlua2VkJykge1xyXG4gICAgICAgICAgICB0aGlzLmFkanVzdExpbmtMYXlvdXQoZS5zdWJqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIGhhbmRsZSBsb2NhdGlvbi9zaXplIGF0dHJpYnV0ZXMgZm9yIG5vZGVzIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIG9ubHkgdXBkYXRlIHcvaCBmb3Igc2xpZGVzLCBhcyBhbGwgb3RoZXIgbm9kZSB0eXBlcyBoYXZlIGZpeGVkIGRpbWVuc2lvbnMgYWNjb3JkaW5nIHRvIHRoZSB0ZW1wbGF0ZXNcclxuICAgIHNldFJlc2l6ZWRQYXJ0RGltZW5zaW9uRGF0YShlKSB7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGxldCBub2RlID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGlmIChub2RlICYmIG5vZGUuY2F0ZWdvcnkgPT09ICdzbGlkZScpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnUGFydFJlc2l6ZWQ6ICcgKyBub2RlLnBhcnQuYWN0dWFsQm91bmRzKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobm9kZS5kYXRhLCAnd2lkdGgnLCBub2RlLnBhcnQuYWN0dWFsQm91bmRzLndpZHRoKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobm9kZS5kYXRhLCAnaGVpZ2h0Jywgbm9kZS5wYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBzZXQgdGhlICdsb2MnIGF0dHJpYnV0ZSBmb3IgYSBuZXcgdG9wLWxldmVsIG5vZGUgKGNyZWF0ZWQgYnkgZG91YmxlLWNsaWNraW5nKSwgdG8gc3VwcG9ydCBmcmVlaGFuZCBsYXlvdXRcclxuICAgIHNldE5ld1BhcnRMb2NhdGlvbkRhdGEoZSkge1xyXG4gICAgICAgIGxldCBub2RlID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGlmIChub2RlICYmIG5vZGUucGFydCkge1xyXG4gICAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnNldERhdGFQcm9wZXJ0eShub2RlLmRhdGEsICdsb2MnLCBub2RlLnBhcnQubG9jYXRpb24ueCArICcgJyArIG5vZGUucGFydC5sb2NhdGlvbi55KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyB1cGRhdGVzIHRoZSAnbG9jJyBhdHRyaWJ1dGUgZm9yIGVhY2ggc2VsZWN0ZWQgcGFydCwgdG8gc3VwcG9ydCBmcmVlaGFuZCBsYXlvdXQgKGRvZXMgbm90IGFwcGx5IHRvIHNsaWRlcylcclxuICAgIHVwZGF0ZVNlbGVjdGVkUGFydExvY2F0aW9uRGF0YShlKSB7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGxldCBpdCA9IGRpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHsgLy8gdGhpbmdcclxuICAgICAgICAgICAgICAgIGxldCBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50WCA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50WSA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFydC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRYID0gcGFydC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRZID0gcGFydC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtb3ZpbmcgZ3JvdXAsIHN1YmplY3Q6ICcgKyBlLnN1YmplY3QgKyAnLCBwYXJ0OiAnICsgcGFydCArICcsIGhlaWdodDogJyArIHBhcnQucGFydC5kZXNpcmVkU2l6ZS5oZWlnaHQgKyAnLCBsb2NhdGlvbjogJyArIHBhcnQucGFydC5sb2NhdGlvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnQubG9jYXRpb24ueCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShwYXJ0LmRhdGEsICdsb2MnLCAocGFydC5sb2NhdGlvbi54IC0gcGFyZW50WCkgKyAnICcgKyAocGFydC5sb2NhdGlvbi55IC0gcGFyZW50WSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIGNoYW5naW5nIGxheW91dHMgb2YgdGhpbmdzIGFuZCB0aGVpciBkZXNjZW5kYW50cyAtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZnJvbUFuZFRvTm9kZXNBcmVWaXNpYmxlKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gbGluay5mcm9tTm9kZSAmJlxyXG4gICAgICAgICAgICBsaW5rLnRvTm9kZSAmJlxyXG4gICAgICAgICAgICAhdGhpcy5oYXNDb2xsYXBzZWRBbmNlc3RvcihsaW5rLmZyb21Ob2RlKSAmJlxyXG4gICAgICAgICAgICAhdGhpcy5oYXNDb2xsYXBzZWRBbmNlc3RvcihsaW5rLnRvTm9kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGFiZWxOb2RlSXNWaXNpYmxlKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gbGluay5sYWJlbE5vZGVzLmNvdW50ICYmIGxpbmsubGFiZWxOb2Rlcy5maXJzdCgpLnZpc2libGU7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzQ29sbGFwc2VkQW5jZXN0b3IoZ3JvdXApIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdyb3VwLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFncm91cC5jb250YWluaW5nR3JvdXAuaXNTdWJHcmFwaEV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEhpZ2hlc3RBbmNlc3RvcldpdGhMYXlvdXQoZ3JvdXAsIGxheW91dE5hbWVzKSB7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgaWYgKCFncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChfLmNvbnRhaW5zKGxheW91dE5hbWVzLCBncm91cC5jb250YWluaW5nR3JvdXAuZGF0YS5sYXlvdXQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXAuY29udGFpbmluZ0dyb3VwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAgPSBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXJlU2lzdGVyc0luSW52ZW50b3J5TGF5b3V0KGdyb3VwMSwgZ3JvdXAyKSB7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwMS5jb250YWluaW5nR3JvdXAgPT09IGdyb3VwMi5jb250YWluaW5nR3JvdXAgJiZcclxuICAgICAgICAgICAgZ3JvdXAxLmNvbnRhaW5pbmdHcm91cCAmJlxyXG4gICAgICAgICAgICBfLmNvbnRhaW5zKFsnbGVmdCcsICdyaWdodCddLCBncm91cDEuY29udGFpbmluZ0dyb3VwLmRhdGEubGF5b3V0KTtcclxuICAgIH1cclxuXHJcbiAgICBpc05vdFdpdGhpbkludmVudG9yeUxheW91dChncm91cCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5pc1dpdGhpbkludmVudG9yeUxheW91dChncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNSVGhpbmdXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gZ3JvdXAuaXNMaW5rTGFiZWwgJiYgdGhpcy5pc1dpdGhpbkludmVudG9yeUxheW91dChncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNXaXRoaW5JbnZlbnRvcnlMYXlvdXQoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc1dpdGhpbkxheW91dChncm91cCwgWydsZWZ0JywgJ3JpZ2h0J10pO1xyXG4gICAgfVxyXG5cclxuICAgIGlzV2l0aGluTGVmdEludmVudG9yeUxheW91dChncm91cCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzV2l0aGluTGF5b3V0KGdyb3VwLCBbJ2xlZnQnXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNXaXRoaW5SaWdodEludmVudG9yeUxheW91dChncm91cCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzV2l0aGluTGF5b3V0KGdyb3VwLCBbJ3JpZ2h0J10pO1xyXG4gICAgfVxyXG5cclxuICAgIGlzV2l0aGluRnJlZWhhbmRMYXlvdXQoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc1dpdGhpbkxheW91dChncm91cCwgWydmcmVlaGFuZCddKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1dpdGhpblN0YWNrZWRMYXlvdXQoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc1dpdGhpbkxheW91dChncm91cCwgWydzdGFja2VkJ10pO1xyXG4gICAgfVxyXG5cclxuICAgIGlzV2l0aGluTGF5b3V0KGdyb3VwLCBsYXlvdXROYW1lcykge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ3JvdXAuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdpc1dpdGhpbkxheW91dDogJyArIGdyb3VwICsgJ2xheW91dHM6ICcgKyBsYXlvdXROYW1lcy5qb2luKCkgKyAnOiBmYWxzZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKF8uY29udGFpbnMobGF5b3V0TmFtZXMsIGdyb3VwLmNvbnRhaW5pbmdHcm91cC5kYXRhLmxheW91dCkpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2lzV2l0aGluTGF5b3V0OiAnICsgZ3JvdXAgKyAnbGF5b3V0czogJyArIGxheW91dE5hbWVzLmpvaW4oKSArICc6IHRydWUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAgPSBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0xlZnRUZXh0QmxvY2soZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc1dpdGhpblJpZ2h0SW52ZW50b3J5TGF5b3V0KGdyb3VwKSAmJlxyXG4gICAgICAgICAgICAhdGhpcy5pc1dpdGhpblN0YWNrZWRMYXlvdXQoZ3JvdXApICYmXHJcbiAgICAgICAgICAgICFncm91cC5pc0xpbmtMYWJlbDtcclxuICAgIH1cclxuXHJcbiAgICBzaG93UmlnaHRUZXh0QmxvY2soZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc1dpdGhpbkxlZnRJbnZlbnRvcnlMYXlvdXQoZ3JvdXApICYmXHJcbiAgICAgICAgICAgICF0aGlzLmlzV2l0aGluU3RhY2tlZExheW91dChncm91cCkgJiZcclxuICAgICAgICAgICAgIWdyb3VwLmlzTGlua0xhYmVsO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERlc2NlbmRhbnRMYXlvdXRzKGdyb3VwLCBsYXlvdXROYW1lKSB7XHJcbiAgICAgICAgaWYgKGxheW91dE5hbWUgPT09ICdsZWZ0JyB8fCBsYXlvdXROYW1lID09PSAncmlnaHQnIHx8IGxheW91dE5hbWUgPT09ICdzdGFja2VkJykge1xyXG4gICAgICAgICAgICBsZXQgaXQgPSBncm91cC5tZW1iZXJQYXJ0cy5pdGVyYXRvcjtcclxuICAgICAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcnQgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgIXBhcnQuaXNMaW5rTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0LmRhdGEubGF5b3V0ID0gbGF5b3V0TmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERlc2NlbmRhbnRMYXlvdXRzKHBhcnQsIGxheW91dE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChsYXlvdXROYW1lID09PSAnZnJlZWhhbmQnKSB7XHJcbiAgICAgICAgICAgIC8vIHN0YWNrZWQ/XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc2FibGVMYXlvdXRGb3JTZWxlY3RlZFRoaW5ncyhsYXlvdXROYW1lKSB7XHJcbiAgICAgICAgbGV0IGl0ID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgaWYgKCFpdC5jb3VudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIShpdC52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZ3JvdXAgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzV2l0aGluTGF5b3V0KGdyb3VwLCBbJ2xlZnQnLCAncmlnaHQnLCAnc3RhY2tlZCddKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLSBzY2FsaW5nIGZ1bmN0aW9ucywgZXRjLiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gQ29tcHV0ZXMgdGhlIGxldmVsIG9mIHRoaXMgZ3JvdXBcclxuICAgIGNvbXB1dGVMZXZlbChncm91cCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NvbXB1dGVMZXZlbCwgcGFydDogJyArIHBhcnQgKyAnLCBjb250YWluaW5nR3JvdXA6ICcgKyBwYXJ0LmNvbnRhaW5pbmdHcm91cCk7XHJcbiAgICAgICAgaWYgKCEoZ3JvdXAgaW5zdGFuY2VvZiBnby5Hcm91cCkgfHwgZ3JvdXAuY29udGFpbmluZ0dyb3VwID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXB1dGVMZXZlbChncm91cC5jb250YWluaW5nR3JvdXApICsgMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0cyB0aGUgYmFzaWMgc2NhbGluZyBmb3IgdGhpbmcgc3F1YXJlcywgYnkgbGV2ZWxcclxuICAgIGdldFRoaW5nU2NhbGUobGV2ZWwpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5wb3coMC40NSwgbGV2ZWwpOyAvLyAxLCAuNDUsIC4yMDI1LCAuMDkxMTI1LCAuLi5cclxuICAgIH1cclxuXHJcbiAgICAvLyB0aGlzIGlzIG9ubHkgdXNlZCBmb3IgZ3JvdXBzXHJcbiAgICBnZXRTY2FsZShncm91cCwgdmlzaXRlZEdyb3VwS2V5cykge1xyXG4gICAgICAgIGlmIChncm91cCkge1xyXG4gICAgICAgICAgICAvLyBrZWVwIHRyYWNrIG9mIGdyb3VwcyB3ZSd2ZSB2aXNpdGVkIHRvIGF2b2lkIGluZmluaXRlIHJlY3Vyc2lvblxyXG4gICAgICAgICAgICAvLyBUT0RPOiB0cmFjayBkb3duIGV4YWN0bHkgaG93IGluZmluaXRlIGxvb3BzIGFyZSBvY2N1cnJpbmcsXHJcbiAgICAgICAgICAgIC8vIG9yIElGIHRoZXkgc3RpbGwgYXJlIHNpbmNlIHRoaXMuX21hcC5jaGVja01vZGVsIHdhcyBpbnRyb2R1Y2VkLi4uXHJcbiAgICAgICAgICAgIGlmICh2aXNpdGVkR3JvdXBLZXlzICYmIEFycmF5LmlzQXJyYXkodmlzaXRlZEdyb3VwS2V5cykpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Zpc2l0ZWRHcm91cEtleXM6ICcgKyB2aXNpdGVkR3JvdXBLZXlzKTtcclxuICAgICAgICAgICAgICAgIGlmIChfLmNvbnRhaW5zKHZpc2l0ZWRHcm91cEtleXMsIGdyb3VwLmRhdGEua2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2hpdCBhbHJlYWR5IHZpc2l0ZWQga2V5OiAnICsgZ3JvdXAuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2aXNpdGVkR3JvdXBLZXlzLnB1c2goZ3JvdXAuZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmlzaXRlZEdyb3VwS2V5cyA9IFtncm91cC5kYXRhLmtleV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChncm91cC5sYWJlbGVkTGluaykgeyAvLyBSLXRoaW5nXHJcbiAgICAgICAgICAgICAgICBsZXQgZnJvbVNjYWxlID0gdGhpcy5nZXRTY2FsZShncm91cC5sYWJlbGVkTGluay5mcm9tTm9kZSwgdmlzaXRlZEdyb3VwS2V5cyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdG9TY2FsZSA9IHRoaXMuZ2V0U2NhbGUoZ3JvdXAubGFiZWxlZExpbmsudG9Ob2RlLCB2aXNpdGVkR3JvdXBLZXlzKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2dldFNjYWxlLCBmcm9tU2NhbGU6ICcgKyBmcm9tU2NhbGUgKyAnLCB0b1NjYWxlOiAnICsgdG9TY2FsZSArICcsIHZpc2l0ZWRHcm91cEtleXM6ICcgKyB2aXNpdGVkR3JvdXBLZXlzLmpvaW4oJywnKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oZnJvbVNjYWxlLCB0b1NjYWxlKSAqIDAuNTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNjYWxlKGdyb3VwLmNvbnRhaW5pbmdHcm91cCwgdmlzaXRlZEdyb3VwS2V5cykgKiAwLjQ1O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGhpbmdTY2FsZSh0aGlzLmNvbXB1dGVMZXZlbChncm91cCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAxOyAvLyBjYW4gb2NjdXIgd2hlbiBkcmFnZ2luZyBSIHRvIGVtcHR5IHNwYWNlXHJcbiAgICB9XHJcblxyXG4gICAgXHJcblxyXG4gICAgXHJcblxyXG4gICAgZ2V0RXh0ZXJuYWxUZXh0U2NhbGUoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gMSAtIDAuMSAqIHRoaXMuY29tcHV0ZUxldmVsKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMaW5rU3Ryb2tlV2lkdGgobGluaykge1xyXG4gICAgICAgIGxldCBmcm9tU2NhbGUgPSB0aGlzLmdldFNjYWxlKGxpbmsuZnJvbU5vZGUpO1xyXG4gICAgICAgIGxldCB0b1NjYWxlID0gdGhpcy5nZXRTY2FsZShsaW5rLnRvTm9kZSk7XHJcbiAgICAgICAgcmV0dXJuIChsaW5rLmlzU2VsZWN0ZWQgPyA0IDogMikgKiBNYXRoLm1pbihmcm9tU2NhbGUsIHRvU2NhbGUpOyAvLyAyLCAuOSwgLi4uXHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2NhbGUgYXJyb3doZWFkcyBiYXNlZCBvbiB0aGUgc21hbGxlc3QgdG8vZnJvbSBub2RlLCBcclxuICAgIC8vIG9yIGp1c3QgdGhlIFRvIG5vZGUgZm9yIFAgbGlua3NcclxuICAgIGdldEFycm93aGVhZFNjYWxlKGxpbmspIHtcclxuICAgICAgICBsZXQgZnJvbVNjYWxlID0gdGhpcy5nZXRTY2FsZShsaW5rLmZyb21Ob2RlKTtcclxuICAgICAgICBsZXQgdG9TY2FsZSA9IHRoaXMuZ2V0U2NhbGUobGluay50b05vZGUpO1xyXG4gICAgICAgIGxldCBtaW5TY2FsZSA9IE1hdGgubWluKGZyb21TY2FsZSwgdG9TY2FsZSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcImdldEFycm93aGVhZFNjYWxlLCBmcm9tU2NhbGU6IFwiLCBmcm9tU2NhbGUsICcsIHRvU2NhbGU6ICcsIHRvU2NhbGUsICcsIG1pblNjYWxlOiAnLCBtaW5TY2FsZSk7XHJcbiAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PT0gJ1AnKSB7XHJcbiAgICAgICAgICAgIG1pblNjYWxlID0gdG9TY2FsZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1pblNjYWxlID49IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEgKiBtaW5TY2FsZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMS41ICogbWluU2NhbGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIGNyZWF0aW5nIG5ldyB0aGluZ3MgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIFJldHVybnMgYSBsb2NhdGlvbiBmb3IgYSBuZXcgc2lzdGVyIGdyb3VwICh0aGluZykgdG8gdGhlIGdpdmVuIG9uZSwgXHJcbiAgICAvLyB3aGljaCB3aWxsIG5vdCBoaWRlIGFueSBleGlzdGluZyB0aGluZ3MgKG92ZXJsYXAgaXMgYWxsb3dlZCkuIFxyXG4gICAgLy8gVGhlIHJldHVybmVkIGNvb3JkaW5hdGVzIGFyZSBhYnNvbHV0ZSBmb3IgYSB0b3AtbGV2ZWwgZ3JvdXAsIFxyXG4gICAgLy8gb3IgcmVsYXRpdmUgdG8gdGhlIHBhcmVudCBvdGhlcndpc2UgLSBzdWl0YWJsZSBmb3IgdXNlIHdpdGggRnJlZWhhbmREaWFncmFtTGF5b3V0XHJcbiAgICAvLyBvciBGcmVlaGFuZExheW91dCwgcmVzcC5cclxuICAgIGdldE5ld1Npc3RlckxvY2F0aW9uKGdyb3VwLCB3aXRoUikge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAvLyBpZiB3ZSBhcmUgd2l0aGluIGFub3RoZXIgZ3JvdXAsIHRoaW5ncyBhcmUgaW4gYWJzb2x1dGUgY29vcmRpbmF0ZXNcclxuICAgICAgICAvLyBhbmQgc2lzdGVycyBhcmUgcGxhY2VkIGFib3ZlIHRoZSB0aGluZzsgb3RoZXJ3aXNlIHJlbGF0aXZlIGFuZCBiZWxvdy4uLlxyXG4gICAgICAgIGxldCBpbkdyb3VwID0gKGdyb3VwLmNvbnRhaW5pbmdHcm91cCAhPT0gbnVsbCk7XHJcbiAgICAgICAgLy8gLi4uIGV4Y2VwdCBpZiB3aXRoUiBpcyB0cnVlLCB3ZSBnbyB0byB0aGUgcmlnaHQgaW5zdGVhZCBvZiBhYm92ZSBvciBiZWxvdy5cclxuXHJcbiAgICAgICAgLy8gc3RhcnQgYmVsb3cgaWYgaW4gZ3JvdXAsIGVsc2UgYWJvdmU7IG9yIHRvIHRoZSByaWdodCBpZiB3aXRoUlxyXG4gICAgICAgIGxldCB4LCB5LCB3LCBoO1xyXG4gICAgICAgIGlmICh3aXRoUikge1xyXG4gICAgICAgICAgICB4ID0gZ3JvdXAubG9jYXRpb24ueCArIGdyb3VwLmFjdHVhbEJvdW5kcy53aWR0aCAqIDIuMjtcclxuICAgICAgICAgICAgeSA9IGdyb3VwLmxvY2F0aW9uLnk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgeCA9IGdyb3VwLmxvY2F0aW9uLng7XHJcbiAgICAgICAgICAgIHkgPSBncm91cC5sb2NhdGlvbi55ICsgZ3JvdXAuYWN0dWFsQm91bmRzLmhlaWdodCAqIDEuMSAqIChpbkdyb3VwID8gMSA6IC0xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdyA9IGdyb3VwLmFjdHVhbEJvdW5kcy53aWR0aDtcclxuICAgICAgICBoID0gZ3JvdXAuYWN0dWFsQm91bmRzLmhlaWdodDtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIG92ZXJsYXBwaW5nIHBhcnRzOyBpZiBmb3VuZCwgaW5jcmVtZW50IHgseSBhbmQgY29udGludWVcclxuXHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgbGV0IHJlY3QgPSBuZXcgZ28uUmVjdCh4LCB5LCB3LCBoKTtcclxuICAgICAgICAgICAgcmVjdC5ncm93KGggLyAxMCwgdyAvIDEwLCBoIC8gMTAsIHcgLyAxMCk7XHJcbiAgICAgICAgICAgIGxldCBwYXJ0cyA9IGRpYWdyYW0uZmluZE9iamVjdHNJbihyZWN0LCBudWxsLCB0aGlzLmlzR3JvdXApO1xyXG4gICAgICAgICAgICBpZiAocGFydHMuY291bnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXROZXdTaXN0ZXJMb2NhdGlvbjogb3ZlcmxhcHBpbmcgcGFydCBmb3VuZCBpbiAnICsgcmVjdCk7XHJcbiAgICAgICAgICAgICAgICBpZiAod2l0aFIpIHtcclxuICAgICAgICAgICAgICAgICAgICB4ICs9IHcgLyAxMDtcclxuICAgICAgICAgICAgICAgICAgICB5ICs9IGggLyAxMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeCArPSB3IC8gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgeSArPSBoIC8gMTAgKiAoaW5Hcm91cCA/IDEgOiAtMSk7IC8vIG1vdmUgZG93biBpZiBpbiBncm91cCwgZWxzZSB1cFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldE5ld1Npc3RlckxvY2F0aW9uOiBubyBvdmVybGFwcGluZyBwYXJ0IGZvdW5kIGluICcgKyByZWN0KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbkdyb3VwKSB7IC8vIG1ha2UgY29vcmRpbmF0ZXMgcmVsYXRpdmVcclxuICAgICAgICAgICAgeCAtPSBncm91cC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICAgICAgeSAtPSBncm91cC5jb250YWluaW5nR3JvdXAubG9jYXRpb24ueTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBnby5Qb2ludCh4ICsgTWF0aC5yYW5kb20oKSwgeSArIE1hdGgucmFuZG9tKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgYSBsb2NhdGlvbiBmb3IgYSBuZXcgY2hpbGQgZ3JvdXAgKHRoaW5nKSB0byB0aGUgZ2l2ZW4gb25lLFxyXG4gICAgLy8gd2hpY2ggd2lsbCBub3QgaGlkZSBhbnkgZXhpc3RpbmcgY2hpbGRyZW4gKG92ZXJsYXAgaXMgYWxsb3dlZCkuXHJcbiAgICAvLyBUaGUgcmV0dXJuZWQgY29vcmRpbmF0ZXMgYXJlIHJlbGF0aXZlIHRvIHRoZSBwYXJlbnQgZ3JvdXAgLSBzdWl0YWJsZSBmb3IgdXNlIHdpdGggRnJlZWhhbmRMYXlvdXQuXHJcbiAgICBnZXROZXdDaGlsZExvY2F0aW9uKGdyb3VwKSB7XHJcbiAgICAgICAgbGV0IGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgIC8vIE5COiBhbGwgeC95IGxvY2F0aW9ucyBhcmUgcmVsYXRpdmUgdG8gdGhlIGdyb3VwIGxvY2F0aW9uXHJcbiAgICAgICAgbGV0IHggPSAwO1xyXG4gICAgICAgIGxldCB5ID0gZ3JvdXBCb3VuZHMuaGVpZ2h0ICogMS4xO1xyXG4gICAgICAgIGxldCB3LCBoO1xyXG4gICAgICAgIGxldCBtZW1iZXJzID0gZ3JvdXAubWVtYmVyUGFydHM7XHJcbiAgICAgICAgLy8ga2VlcCB0ZXN0aW5nIG5ldyByZWN0YW5nbGVzIHVudGlsIHdlIGZpbmQgb25lIHRoYXQgZG9lc24ndCBvdmVybGFwIHdpdGggYW55IGV4aXN0aW5nIG1lbWJlciBvZiB0aGUgZ3JvdXBcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBtZW1iZXJzLnJlc2V0KCk7XHJcbiAgICAgICAgICAgIGxldCBvdmVybGFwcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsZXQgbWVtYmVyLCBuZXdSZWN0LCBtZW1iZXJSZWN0O1xyXG4gICAgICAgICAgICB3aGlsZSAobWVtYmVycy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIG1lbWJlciA9IG1lbWJlcnMudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWVtYmVyQm91bmRzID0gbWVtYmVyLmFjdHVhbEJvdW5kcztcclxuICAgICAgICAgICAgICAgIHcgPSBtZW1iZXJCb3VuZHMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBoID0gbWVtYmVyQm91bmRzLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIC8vIGZpbmQgdGhlIGV4aXN0aW5nIG1lbWJlcidzIGFjdHVhbCBib3VuZHMgKGFic29sdXRlIGNvb3JkcylcclxuICAgICAgICAgICAgICAgIG1lbWJlclJlY3QgPSBuZXcgZ28uUmVjdChtZW1iZXJCb3VuZHMueCAtIGdyb3VwQm91bmRzLngsIG1lbWJlckJvdW5kcy55IC0gZ3JvdXBCb3VuZHMueSwgbWVtYmVyQm91bmRzLndpZHRoLCBtZW1iZXJCb3VuZHMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIG5ld1JlY3QgPSBuZXcgZ28uUmVjdCh4LCB5LCB3LCBoKTtcclxuICAgICAgICAgICAgICAgIG5ld1JlY3QuZ3JvdyhoIC8gNSwgdyAvIDUsIGggLyA1LCB3IC8gNSk7XHJcbiAgICAgICAgICAgICAgICBvdmVybGFwcyA9IG5ld1JlY3QuY29udGFpbnNSZWN0KG1lbWJlclJlY3QpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldE5ld0NoaWxkTG9jYXRpb24gZm9yICcgKyBtZW1iZXIgKyAnOiBuZXdSZWN0ID0gJyArIG5ld1JlY3QgKyAnLCBtZW1iZXJSZWN0ID0gJyArIG1lbWJlclJlY3QgKyAnLCBvdmVybGFwczogJyArIG92ZXJsYXBzKTtcclxuICAgICAgICAgICAgICAgIGlmIChvdmVybGFwcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvdmVybGFwcykge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5jcmVtZW50IHgsIHkgYW5kIHRyeSBhZ2FpblxyXG4gICAgICAgICAgICAgICAgeCArPSB3IC8gNTtcclxuICAgICAgICAgICAgICAgIHkgKz0gaCAvIDU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmb3VuZCBhIGdvb2Qgc3BvdCFcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgZ28uUG9pbnQoeCwgeSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYSBzaW1wbGVyIHZlcnNpb24gb2YgZ2V0TmV3Q2hpbGRMb2NhdGlvbiB0aGF0IHBsYWNlcyB0aGUgY2hpbGQgb3V0c2lkZSB0aGUgYm91bmRzIG9mIHRoZSBleGlzdGluZyBjaGlsZHJlblxyXG4gICAgZ2V0TmV3Q2hpbGRMb2NhdGlvbjIoZ3JvdXApIHtcclxuICAgICAgICBsZXQgZ3JvdXBCb3VuZHMgPSBncm91cC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgbGV0IGNoaWxkQm91bmRzID0gdGhpcy5fbWFwLnNhZmVSZWN0KHRoaXMuX21hcC5nZXREaWFncmFtKCkuY29tcHV0ZVBhcnRzQm91bmRzKGdyb3VwLm1lbWJlclBhcnRzKSk7XHJcbiAgICAgICAgbGV0IHggPSAwO1xyXG4gICAgICAgIGxldCB5ID0gMDtcclxuICAgICAgICBpZiAoIWdyb3VwLm1lbWJlclBhcnRzLmNvdW50KSB7XHJcbiAgICAgICAgICAgIHkgPSBncm91cEJvdW5kcy5oZWlnaHQgKiAxLjI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgeSA9IGdyb3VwQm91bmRzLmhlaWdodCAqIDEuNCArIGNoaWxkQm91bmRzLmhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0TmV3Q2hpbGRMb2NhdGlvbjIsIGNoaWxkQm91bmRzOiAnICsgY2hpbGRCb3VuZHMgKyAnLCBncm91cEJvdW5kczogJyArIGdyb3VwQm91bmRzICsgJywgeDogJyArIHggKyAnLCB5OiAnICsgeSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBnby5Qb2ludCh4LCB5KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBtb3ZlIGFsbCB0aGUgZ2l2ZW4gbmV3IG1lbWJlciBncm91cHMgc28gdGhhdCB0aGVpciBsb2NhdGlvbnMgYXJlIHJlbGF0aXZlIHRvIHRoYXQgb2YgXHJcbiAgICAvLyB0aGUgcGFyZW50IGFuZCBpdHMgcHJldmlvdXNseSBleGlzdGluZyBtZW1iZXJzLCBhbmQgc2NhbGVkIGRvd24gYXBwcm9wcmlhdGVseVxyXG4gICAgbGF5b3V0TmV3TWVtYmVyc1JlbGF0aXZlVG8obmV3TWVtYmVycywgcGFyZW50LCBvbGRNZW1iZXJCb3VuZHMpIHtcclxuICAgICAgICAvLyBob3cgYmlnIHdhcyB0aGUgcGFyZW50IHN5c3RlbSBiZWZvcmUgdGhlIG5ldyBncm91cHMgd2VyZSBhZGRlZD9cclxuICAgICAgICBsZXQgc3lzdGVtQm91bmRzID0gcGFyZW50LmFjdHVhbEJvdW5kcy51bmlvblJlY3Qob2xkTWVtYmVyQm91bmRzKTtcclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBvbGQvbmV3IG9yaWdpbnMgLSBwbGFjZSBuZXcgb3JpZ2luIGJlbG93IGV4aXN0aW5nIHN5c3RlbVxyXG4gICAgICAgIGxldCBvbGRCb3VuZHMgPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLmNvbXB1dGVQYXJ0c0JvdW5kcyhuZXdNZW1iZXJzKTtcclxuICAgICAgICBsZXQgb2xkT3JpZ2luID0gbmV3IGdvLlBvaW50KG9sZEJvdW5kcy54LCBvbGRCb3VuZHMueSk7XHJcbiAgICAgICAgbGV0IG5ld09yaWdpbiA9IG5ldyBnby5Qb2ludCgwLCBzeXN0ZW1Cb3VuZHMuaGVpZ2h0ICogMS4yKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnbGF5b3V0TmV3TWVtYmVyc1JlbGF0aXZlVG8sIHN5c3RlbUJvdW5kczogJyArIHN5c3RlbUJvdW5kcyArICcsIG9sZEJvdW5kczogJyArIG9sZEJvdW5kcyArXHJcbiAgICAgICAgICAgICcsIG9sZE9yaWdpbjogJyArIG9sZE9yaWdpbiArICcsIG5ld09yaWdpbjogJyArIG5ld09yaWdpbik7XHJcblxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgbmV3IHNjYWxlZCBsb2NhdGlvbnNcclxuICAgICAgICAvLyBOQjogd2UgY2FuIGFzc3VtZSBuZXdNZW1iZXJzIGFyZSBhbGwgb25lIGxldmVsIGRvd24gZnJvbSBwYXJlbnQgKHNlZSB0aGlzLl9tYXAuYWRkU2VsZWN0ZWRUaGluZ3NBc0NoaWxkcmVuT2YpLCBcclxuICAgICAgICAvLyBzbyB3ZSBqdXN0IG11bHRpcGx5IGJ5IHRoZSBzdGFuZGFyZCBzY2FsZSBmYWN0b3JcclxuICAgICAgICBsZXQgaXQgPSBuZXdNZW1iZXJzLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgbGV0IGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGxldCBncm91cEJvdW5kcyA9IGdyb3VwLmFjdHVhbEJvdW5kcztcclxuICAgICAgICAgICAgbGV0IG5ld1ggPSBuZXdPcmlnaW4ueCArIChncm91cEJvdW5kcy54IC0gb2xkT3JpZ2luLngpICogMC40NTtcclxuICAgICAgICAgICAgbGV0IG5ld1kgPSBuZXdPcmlnaW4ueSArIChncm91cEJvdW5kcy55IC0gb2xkT3JpZ2luLnkpICogMC40NTtcclxuICAgICAgICAgICAgbGV0IG5ld0xvYyA9IGdvLlBvaW50LnN0cmluZ2lmeShuZXcgZ28uUG9pbnQobmV3WCwgbmV3WSkpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbGF5b3V0TmV3TWVtYmVyc1JlbGF0aXZlVG8sIGdyb3VwQm91bmRzOiAnICsgZ3JvdXBCb3VuZHMgKyAnLCBuZXdMb2M6ICcgKyBuZXdMb2MpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbG9jJywgbmV3TG9jKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbW92ZSBhbGwgdGhlIGdpdmVuIG9sZCBtZW1iZXIgZ3JvdXBzIHNvIHRoYXQgdGhlaXIgbG9jYXRpb25zIGFyZSBhYnNvbHV0ZSBhbmQgYWJvdmVcclxuICAgIC8vIHRoZSBwYXJlbnQsIGFuZCBzY2FsZWQgdXAgYXBwcm9wcmlhdGVseVxyXG4gICAgbGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZihvbGRNZW1iZXJzLCBwYXJlbnQsIG9sZE1lbWJlcnNCb3VuZHMsIG9sZE1lbWJlcnNMZXZlbCkge1xyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgc2NhbGUgZmFjdG9yIChtZW1iZXJzIGNhbiBiZSBkcmFnZ2VkIHVwIG11bHRpcGxlIGxldmVscywgdW5saWtlIGRyYWdnaW5nIGludG8gUylcclxuICAgICAgICBsZXQgc2NhbGVGYWN0b3IgPSBNYXRoLnBvdygwLjQ1LCBvbGRNZW1iZXJzTGV2ZWwgLSB0aGlzLmNvbXB1dGVMZXZlbChwYXJlbnQpKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnbGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZiwgc2NhbGVGYWN0b3I6ICcgKyBzY2FsZUZhY3Rvcik7XHJcblxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgb2xkL25ldyBvcmlnaW5zIC0gcGxhY2UgbmV3IG9yaWdpbiBhYm92ZSBwYXJlbnQsIHdpdGggdmVydGljYWwgc3BhY2UgZm9yIHNjYWxlZC11cCBvbGRNZW1iZXJzXHJcbiAgICAgICAgbGV0IHBhcmVudEJvdW5kcyA9IHBhcmVudC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgbGV0IG9sZE9yaWdpbiA9IG5ldyBnby5Qb2ludChvbGRNZW1iZXJzQm91bmRzLngsIG9sZE1lbWJlcnNCb3VuZHMueSk7XHJcbiAgICAgICAgbGV0IG5ld09yaWdpbiA9IG5ldyBnby5Qb2ludChwYXJlbnRCb3VuZHMueCwgcGFyZW50Qm91bmRzLnkgLSBvbGRNZW1iZXJzQm91bmRzLmhlaWdodCAqIDEuMiAvIHNjYWxlRmFjdG9yKTtcclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBuZXcgc2NhbGVkIGxvY2F0aW9uc1xyXG4gICAgICAgIGxldCBpdCA9IG9sZE1lbWJlcnMuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBsZXQgZ3JvdXAgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgbGV0IGdyb3VwQm91bmRzID0gZ3JvdXAuYWN0dWFsQm91bmRzO1xyXG4gICAgICAgICAgICBsZXQgbmV3WCA9IG5ld09yaWdpbi54ICsgKGdyb3VwQm91bmRzLnggLSBvbGRPcmlnaW4ueCkgLyBzY2FsZUZhY3RvcjtcclxuICAgICAgICAgICAgbGV0IG5ld1kgPSBuZXdPcmlnaW4ueSArIChncm91cEJvdW5kcy55IC0gb2xkT3JpZ2luLnkpIC8gc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIGxldCBuZXdMb2MgPSBnby5Qb2ludC5zdHJpbmdpZnkobmV3IGdvLlBvaW50KG5ld1gsIG5ld1kpKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xheW91dE9sZE1lbWJlcnNPdXRzaWRlT2YsIHBhcmVudEJvdW5kczogJyArIHBhcmVudEJvdW5kcyArICcsIG9sZE1lbWJlcnNCb3VuZHM6ICcgKyBvbGRNZW1iZXJzQm91bmRzICtcclxuICAgICAgICAgICAgICAgICcsIG5ld09yaWdpbjogJyArIG5ld09yaWdpbiArICcsIGdyb3VwQm91bmRzOiAnICsgZ3JvdXBCb3VuZHMgKyAnLCBuZXdMb2M6ICcgKyBuZXdMb2MpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbG9jJywgZ28uUG9pbnQuc3RyaW5naWZ5KG5ld0xvYykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLSBhY2Nlc3NvcnMgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlIGxheW91dCBjbGFzcyBieSBhYmJyZXZpYXRlZCBuYW1lXHJcbiAgICBnZXRMYXlvdXQobGF5b3V0TmFtZSkge1xyXG4gICAgICAgIGNvbnN0IExlZnRJbnZlbnRvcnlMYXlvdXQgPSByZXF1aXJlKCcuL2xheW91dHMvTGVmdEludmVudG9yeUxheW91dC5qcycpO1xyXG4gICAgICAgIGNvbnN0IFJpZ2h0SW52ZW50b3J5TGF5b3V0ID0gcmVxdWlyZSgnLi9sYXlvdXRzL1JpZ2h0SW52ZW50b3J5TGF5b3V0LmpzJyk7XHJcbiAgICAgICAgY29uc3QgU3RhY2tlZExheW91dCA9IHJlcXVpcmUoJy4vbGF5b3V0cy9TdGFja2VkTGF5b3V0LmpzJyk7XHJcbiAgICAgICAgY29uc3QgRnJlZWhhbmRMYXlvdXQgPSByZXF1aXJlKCcuL2xheW91dHMvRnJlZWhhbmRMYXlvdXQuanMnKTtcclxuICAgICAgICBpZiAobGF5b3V0TmFtZSA9PT0gJ2ZyZWVoYW5kJylcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGcmVlaGFuZExheW91dCgpO1xyXG4gICAgICAgIGVsc2UgaWYgKGxheW91dE5hbWUgPT09ICdyaWdodCcpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmlnaHRJbnZlbnRvcnlMYXlvdXQoKTtcclxuICAgICAgICBlbHNlIGlmIChsYXlvdXROYW1lID09PSAnc3RhY2tlZCcpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RhY2tlZExheW91dCgpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBMZWZ0SW52ZW50b3J5TGF5b3V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RnJlZWhhbmREaWFncmFtTGF5b3V0KCkge1xyXG4gICAgICAgIGNvbnN0IEZyZWVoYW5kRGlhZ3JhbUxheW91dCA9IHJlcXVpcmUoJy4vbGF5b3V0cy9GcmVlaGFuZERpYWdyYW1MYXlvdXQuanMnKTtcclxuICAgICAgICByZXR1cm4gbmV3IEZyZWVoYW5kRGlhZ3JhbUxheW91dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIHRoZSB0byBhbmQgZnJvbSBub2RlcyBmb3IgdGhlIGxpbmsgaGF2ZSBhIGNvbW1vbiBhbmNlc3RvciBncm91cCB3aXRoIG9uZSBvZiB0aGUgZ2l2ZW4gbGF5b3V0IG5hbWVzLlxyXG4gICAgLy8gVE9ETzogdmVyaWZ5IGxvZ2ljIC0gd2hhdCBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgc3VjaCBhbmNlc3RvcnM/IC0gdGhpcyBzaG91bGQgcmV0dXJuIHRoZSBoaWdoZXN0IG9uZS4uLlxyXG4gICAgZ2V0Q29tbW9uQW5jZXN0b3JXaXRoTGF5b3V0KGdyb3VwMSwgZ3JvdXAyLCBsYXlvdXROYW1lcykge1xyXG4gICAgICAgIGxldCBhbmNlc3RvcnMxID0gdGhpcy5nZXRBbmNlc3Rvckdyb3Vwcyhncm91cDEpO1xyXG4gICAgICAgIGxldCBhbmNlc3RvcnMyID0gdGhpcy5nZXRBbmNlc3Rvckdyb3Vwcyhncm91cDIpO1xyXG4gICAgICAgIGxldCBjb21tb25BbmNlc3RvcnMgPSBfLmludGVyc2VjdGlvbihhbmNlc3RvcnMxLCBhbmNlc3RvcnMyKTtcclxuICAgICAgICBsZXQgbGF5b3V0QW5jZXN0b3JzID0gXy5maWx0ZXIoY29tbW9uQW5jZXN0b3JzLCBmdW5jdGlvbiAoZ3JvdXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIF8uaW5kZXhPZihsYXlvdXROYW1lcywgZ3JvdXAuZGF0YS5sYXlvdXQpICE9PSAtMTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAobGF5b3V0QW5jZXN0b3JzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbGF5b3V0QW5jZXN0b3JzWzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBhbmNlc3RvcnMgb2YgdGhpcyBncm91cCwgaW5jbHVkaW5nIGl0c2VsZlxyXG4gICAgZ2V0QW5jZXN0b3JHcm91cHMoZ3JvdXApIHtcclxuICAgICAgICBsZXQgYW5jZXN0b3JzID0gW2dyb3VwXTtcclxuICAgICAgICBsZXQgZyA9IGdyb3VwO1xyXG4gICAgICAgIHdoaWxlIChnLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICBhbmNlc3RvcnMucHVzaChnLmNvbnRhaW5pbmdHcm91cCk7XHJcbiAgICAgICAgICAgIGcgPSBnLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ycztcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHJcblxyXG5cclxuICAgIC8vIGlmIGFueSBncm91cCBpbiB0aGUgZ2l2ZW4gSXRlcmF0b3IgZG9lcyBub3QgaGF2ZSBhIGxvY2F0aW9uIChkYXRhLmxvYyksIHNldCBvbmVcclxuICAgIC8vIHRoYXQgZG9lc24ndCBvdmVybGFwIHdpdGggdGhlIG90aGVyIG1lbWJlcnNcclxuICAgIHZhbGlkYXRlR3JvdXBMb2NhdGlvbnMoZ3JvdXBzKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gbGluayByb3V0aW5nIGFuZCB2aXNpYmlsaXR5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGFkanVzdCB0aGUgcm91dGluZywgdmlzaWJpbGl0eSBhbmQgb3RoZXIgcHJvcGVydGllcyBvZiBhIGxpbmsgYWNjb3JkaW5nIHRvIHZhcmlvdXMgc3RydWN0dXJhbCBjcml0ZXJpYVxyXG4gICAgYWRqdXN0TGlua0xheW91dChsaW5rKSB7XHJcbiAgICAgICAgaWYgKCFsaW5rIHx8ICFsaW5rLmZyb21Ob2RlIHx8ICFsaW5rLnRvTm9kZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBsZXQgbG9jID0gbGluay5sb2NhdGlvbjtcclxuICAgICAgICAvLyBpZiAoaXNOYU4obG9jLngpIHx8IGlzTmFOKGxvYy55KSkge1xyXG4gICAgICAgIC8vICAgICBsaW5rLmxvY2F0aW9uID0gbmV3IGdvLlBvaW50KDEwLCAxMCk7XHJcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdhZGp1c3RMaW5rTGF5b3V0LCBsaW5rLmxvY2F0aW9uOiAnICsgbGluay5sb2NhdGlvbik7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdhZGp1c3RMaW5rTGF5b3V0LCBsaW5rLmxvY2F0aW9uOiAnICsgbGluay5sb2NhdGlvbik7XHJcblxyXG4gICAgICAgIC8vIHNlZSBpZiBsaW5rIGlzIHdpdGhpbiBhIHN0YWNrZWQgb3IgaW52ZW50b3J5IGxheW91dCwgb3IgaWYgaXQncyBhIGhpZGRlbiBQIGxpbmtcclxuICAgICAgICBsZXQgaW52ZW50b3J5QW5jZXN0b3IgPSB0aGlzLmdldENvbW1vbkFuY2VzdG9yV2l0aExheW91dChsaW5rLmZyb21Ob2RlLCBsaW5rLnRvTm9kZSwgWydsZWZ0JywgJ3JpZ2h0J10pO1xyXG4gICAgICAgIGxldCBzdGFja2VkQW5jZXN0b3IgPSB0aGlzLmdldENvbW1vbkFuY2VzdG9yV2l0aExheW91dChsaW5rLmZyb21Ob2RlLCBsaW5rLnRvTm9kZSwgWydzdGFja2VkJ10pO1xyXG4gICAgICAgIGxldCBoaWRlUExpbmsgPSAobGluay5kYXRhICYmIGxpbmsuZGF0YS5jYXRlZ29yeSA9PT0gJ1AnICYmICF0aGlzLl9tYXAuZ2V0VGVtcGxhdGVzKCkuc2hvd1BMaW5rKGxpbmspKTtcclxuICAgICAgICBsZXQgY3Jvd2RlZFJUaGluZyA9IHRoaXMuaGFzQ3Jvd2RlZFJUaGluZyhsaW5rKTtcclxuXHJcbiAgICAgICAgLy8gc2VlIGlmIHRoaXMgaXMgb25lIG9mIG11bHRpcGxlIGxpbmtzIGJldHdlZW4gdGhlIHNhbWUgdHdvIG5vZGVzXHJcbiAgICAgICAgbGV0IHNucG9zID0gdGhpcy5nZXRTYW1lTm9kZXNMaW5rUG9zaXRpb24obGluayk7XHJcbiAgICAgICAgbGV0IGlzTXVsdGlMaW5rID0gKHNucG9zLmNvdW50ID4gMSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc25wb3MgZm9yIGxpbmsgJyArIGxpbmsgKyAnOiAnICsgc25wb3MuaW5kZXggKyAnIG9mICcgKyBzbnBvcy5jb3VudCk7XHJcblxyXG4gICAgICAgIGlmIChpbnZlbnRvcnlBbmNlc3Rvcikge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5SW52ZW50b3J5Q3VydmVSb3V0aW5nKGxpbmssIHNucG9zLCBpbnZlbnRvcnlBbmNlc3Rvci5kYXRhLmxheW91dCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc011bHRpTGluaykge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5TXVsdGlsaW5rQ3VydmVSb3V0aW5nKGxpbmssIHNucG9zKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNyb3dkZWRSVGhpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBseUludmVudG9yeUN1cnZlUm91dGluZyhsaW5rLCBzbnBvcywgJ2xlZnQnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5U3RyYWlnaHRSb3V0aW5nKGxpbmspO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc2hvdyBsaW5rIG9ubHkgaWYgYm90aCBjb25uZWN0ZWQgdGhpbmdzIGFyZSB2aXNpYmxlIChubyBjb2xsYXBzZWQgYW5jZXN0b3JzKTsgXHJcbiAgICAgICAgLy8gaGlkZSBpZiBib3RoIGFyZSBpbiBzdGFja2VkIGxheW91dCBvciBpZiBpdCdzIGEgUC1saW5rIHRoYXQgd2Ugc2hvdWxkbid0IGJlIHNob3dpbmcgbm93XHJcbiAgICAgICAgaWYgKHRoaXMuZnJvbUFuZFRvTm9kZXNBcmVWaXNpYmxlKGxpbmspICYmICFzdGFja2VkQW5jZXN0b3IgJiYgIWhpZGVQTGluaykge1xyXG4gICAgICAgICAgICBsaW5rLm9wYWNpdHkgPSAxO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dMYWJlbE5vZGVzKGxpbmssIHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxpbmsub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0xhYmVsTm9kZXMobGluaywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPOiBkZXRlY3Qgd2hlbiB0aGUgUi10aGluZyBvdmVybGFwcyBib3RoIGZyb20gYW5kIHRvIG5vZGVzLCBzbyB3ZSBjYW4gY2hhbmdlIHRoZSBsaW5rIHJvdXRpbmdcclxuICAgIGhhc0Nyb3dkZWRSVGhpbmcobGluaykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93TGFiZWxOb2RlcyhsaW5rLCBzaG93KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2hvd0xhYmVsTm9kZXMsIGxpbms6ICcgKyBsaW5rICsgJywgc2hvdzogJyArIHNob3cpO1xyXG4gICAgICAgIGxldCBpdCA9IGxpbmsubGFiZWxOb2RlcztcclxuICAgICAgICBpZiAoaXQpIHtcclxuICAgICAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBncm91cC52aXNpYmxlID0gc2hvdztcclxuICAgICAgICAgICAgICAgIGlmIChzaG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAubGF5b3V0LmRvTGF5b3V0KGdyb3VwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBsaW5rIGlzIGJldHdlZW4gdHdvIHRoaW5ncyBpbiB0aGUgc2FtZSBpbnZlbnRvcnkgbGF5b3V0IChzaW5nbGUgb3IgbXVsdGlwbGUpLFxyXG4gICAgLy8gbWFrZSB0aGUgbGluZSBtb3JlIG9yIGxlc3MgY2lyY3VsYXIgb24gdGhlIGFwcHJvcHJpYXRlIHNpZGVcclxuICAgIGFwcGx5SW52ZW50b3J5Q3VydmVSb3V0aW5nKGxpbmssIHNucG9zLCBhbmNlc3RvckxheW91dCkge1xyXG4gICAgICAgIGlmIChhbmNlc3RvckxheW91dCA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgIGxpbmsuZnJvbVNwb3QgPSBnby5TcG90LkxlZnQ7XHJcbiAgICAgICAgICAgIGxpbmsudG9TcG90ID0gZ28uU3BvdC5MZWZ0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYW5jZXN0b3JMYXlvdXQgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgbGluay5mcm9tU3BvdCA9IGdvLlNwb3QuUmlnaHQ7XHJcbiAgICAgICAgICAgIGxpbmsudG9TcG90ID0gZ28uU3BvdC5SaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFzcGVjdCByYXRpbyBmb3IgdGhlIGxpbmsgY3VydmVzIC0gbWFrZSB0aGlzIHNtYWxsZXIgdG8gbWFrZSB0aGVtIHRhbGxlciwgbGFyZ2VyIHRvIG1ha2UgdGhlbSBmYXR0ZXJcclxuICAgICAgICBsZXQgY3VydmVSYXRpbyA9IDAuNjtcclxuXHJcbiAgICAgICAgbGV0IHkxID0gbGluay5mcm9tTm9kZS5hY3R1YWxCb3VuZHMueTtcclxuICAgICAgICBsZXQgeTIgPSBsaW5rLnRvTm9kZS5hY3R1YWxCb3VuZHMueTtcclxuXHJcbiAgICAgICAgbGV0IHlEaWZmID0gTWF0aC5hYnMoeTIgLSB5MSk7XHJcbiAgICAgICAgbGV0IGMgPSAoeURpZmYgPT09IDAgPyA1MCA6IE1hdGguZmxvb3IoeURpZmYgKiBjdXJ2ZVJhdGlvKSkgKyAxMDAgKiAoc25wb3MuaW5kZXggLyBzbnBvcy5jb3VudCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInlEaWZmID0gXCIgKyB5RGlmZiArICcsIGMgPSAnICsgYyArICcgKCcgKyBsaW5rLmZyb21Ob2RlLmRhdGEudGV4dCArICcgLSAnICsgcDEgKyAnIC0gdG8gJyArIGxpbmsudG9Ob2RlLmRhdGEudGV4dCArICcgLSAnICsgcDIgKyAnKScpO1xyXG5cclxuICAgICAgICBsaW5rLmN1cnZlID0gZ28uTGluay5CZXppZXI7XHJcbiAgICAgICAgbGluay5mcm9tRW5kU2VnbWVudExlbmd0aCA9IGM7XHJcbiAgICAgICAgbGluay50b0VuZFNlZ21lbnRMZW5ndGggPSBjO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIG5vbi1pbnZlbnRvcnkgbGluayBpcyBvbmUgb2YgbXVsdGlwbGUgb25lcyBiZXR3ZWVuIHNhbWUgbm9kZXMsIG1ha2UgaXQgY3VydmVkXHJcbiAgICBhcHBseU11bHRpbGlua0N1cnZlUm91dGluZyhsaW5rLCBzbnBvcykge1xyXG4gICAgICAgIGxpbmsuZnJvbVNwb3QgPSBnby5TcG90LkRlZmF1bHQ7XHJcbiAgICAgICAgbGluay50b1Nwb3QgPSBnby5TcG90LkRlZmF1bHQ7XHJcbiAgICAgICAgbGluay5jdXJ2ZSA9IGdvLkxpbmsuQmV6aWVyO1xyXG4gICAgICAgIC8vIGN1cnZpbmVzcyB2YWx1ZXMgYmFzZWQgb24gbnVtYmVyIG9mIGxpbmtzOlxyXG4gICAgICAgIC8vIDI6IC0yNSAyNVxyXG4gICAgICAgIC8vIDM6IC01MCAwIDUwXHJcbiAgICAgICAgLy8gNDogLTEwMCAtNTAgMCA1MCAxMDBcclxuICAgICAgICBsZXQgcmFuZ2VTaXplID0gMTAgKiAoc25wb3MuY291bnQgLSAxKTtcclxuICAgICAgICBsZXQgcmFuZ2VJbmNyZW1lbnQgPSAxMDtcclxuICAgICAgICBpZiAoc25wb3MuaGFzUlRoaW5nKSB7XHJcbiAgICAgICAgICAgIHJhbmdlU2l6ZSA9IDEwMCAqIChzbnBvcy5jb3VudCAtIDEpO1xyXG4gICAgICAgICAgICByYW5nZUluY3JlbWVudCA9IDEwMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFkanVzdCBjdXJ2aW5lc3MgZm9yIHNtYWxsZXIgc2NhbGVzXHJcbiAgICAgICAgbGV0IGxpbmtTY2FsZUZhY3RvciA9IHRoaXMuZ2V0TGlua1N0cm9rZVdpZHRoKGxpbmspIC8gMjsgLy8gMiBpcyBtYXggc3Ryb2tlIHdpZHRoXHJcbiAgICAgICAgcmFuZ2VTaXplICo9IGxpbmtTY2FsZUZhY3RvcjtcclxuICAgICAgICByYW5nZUluY3JlbWVudCAqPSBsaW5rU2NhbGVGYWN0b3I7XHJcblxyXG4gICAgICAgIGxldCByYW5nZVN0YXJ0ID0gMCAtIHJhbmdlU2l6ZSAvIDI7XHJcblxyXG4gICAgICAgIGxpbmsuY3VydmluZXNzID0gKHJhbmdlU3RhcnQgKyByYW5nZUluY3JlbWVudCAqIHNucG9zLmluZGV4KSAqIHNucG9zLm9yaWVudGF0aW9uO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdhcHBseU11bHRpbGlua0N1cnZlUm91dGluZywgbGluazogJyArIGxpbmsgKyAnLCBjdXJ2aW5lc3M6ICcgKyBsaW5rLmN1cnZpbmVzcyk7IFxyXG4gICAgfVxyXG5cclxuICAgIC8vIGRvIG5vcm1hbCBzdHJhaWdodCBsaW5lcyBmb3IgZnJlZWhhbmQgbGF5b3V0LCBvciBsaW5rcyBiZXR3ZWVuIGRlc2NlbmRhbnRzIG9mIHRoaW5ncyB3aXRoIGRpZmZlcmVudCBsYXlvdXRzXHJcbiAgICBhcHBseVN0cmFpZ2h0Um91dGluZyhsaW5rKSB7XHJcbiAgICAgICAgbGluay5mcm9tU3BvdCA9IGdvLlNwb3QuRGVmYXVsdDtcclxuICAgICAgICBsaW5rLnRvU3BvdCA9IGdvLlNwb3QuRGVmYXVsdDtcclxuICAgICAgICBsaW5rLnJvdXRpbmcgPSBnby5MaW5rLk5vcm1hbDtcclxuICAgICAgICBsaW5rLmN1cnZlID0gZ28uTGluay5Ob25lO1xyXG4gICAgICAgIGxpbmsuY3VydmluZXNzID0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gY2FsY3VsYXRlIGhvdyBtYW55IGxpbmtzIHRoZXJlIGFyZSBiZXR3ZWVuIGEgbGluaydzIG5vZGVzIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIFJldHVybnMgYW4gb2JqZWN0IG9mIHRoZSBmb3JtYXQgeyBpbmRleDogMSwgY291bnQ6IDIsIG9yaWVudGF0aW9uOiAtMSwgaGFzUlRoaW5nOiBmYWxzZSB9LCBcclxuICAgIC8vIGluZGljYXRpbmcgaG93IG1hbnkgb3RoZXIgbGlua3MgdGhlcmUgYXJlIGJldHdlZW4gdGhlIHNhbWUgcGFpciBvZiBub2RlcyxcclxuICAgIC8vIHdoZXJlIHRoZSBnaXZlbiBsaW5rIGZhbGxzIHdpdGhpbiB0aGlzIGxpc3QsIGFuZCB3aGF0IGl0cyBvcmllbnRhdGlvbiBpcy5cclxuICAgIGdldFNhbWVOb2Rlc0xpbmtQb3NpdGlvbihsaW5rKSB7XHJcbiAgICAgICAgbGV0IGxpbmtzQnlOb2RlcyA9IHRoaXMuZ2V0TGlua3NCeU5vZGVzKHRydWUpO1xyXG4gICAgICAgIC8vIGdldCBsaW5rcyB3aXRoIHRoZSBzYW1lIGtleSBhcyB0aGlzIG9uZSAoY29ubmVjdGluZyBzYW1lIG5vZGVzKVxyXG4gICAgICAgIGxldCBzYW1lTGlua3MgPSBfLndoZXJlKGxpbmtzQnlOb2Rlcywge1xyXG4gICAgICAgICAgICBrZXk6IHRoaXMuZ2V0U2FtZU5vZGVzTGlua0tleShsaW5rKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBkZWZhdWx0IHJldHVybiB2YWx1ZVxyXG4gICAgICAgIGxldCBzbnBvcyA9IHtcclxuICAgICAgICAgICAgaW5kZXg6IDAsXHJcbiAgICAgICAgICAgIGNvdW50OiAxLFxyXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogMSxcclxuICAgICAgICAgICAgaGFzUlRoaW5nOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gc2V0IGluZGV4LCBjb3VudCwgb3JpZW50YXRpb25cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhbWVMaW5rcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoc2FtZUxpbmtzW2ldLmxpbmsgPT09IGxpbmspIHtcclxuICAgICAgICAgICAgICAgIHNucG9zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiBzYW1lTGlua3MubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiB0aGlzLmdldExpbmtPcmllbnRhdGlvbihsaW5rKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjaGVjayBmb3IgUnRoaW5nXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzYW1lTGlua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHNhbWVMaW5rc1tpXS5oYXNSVGhpbmcpIHtcclxuICAgICAgICAgICAgICAgIHNucG9zLmhhc1JUaGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNucG9zO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGdldHMgdGhlIG1hcmdpbiB0byBiZSB1c2VkIGluIHN0YWNrIGxheW91dCBiZXR3ZWVuIHRoaXMgZ3JvdXAncyBjaGlsZHJlblxyXG4gICAgZ2V0U3RhY2tNYXJnaW4oZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gKDEwIC8gMC40NSkgKiB0aGlzLmdldFNjYWxlKGdyb3VwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBtYXggeSB2YWx1ZSBhZnRlciBsYXlpbmcgb3V0IHRoZSBsYXN0IHBhcnRcclxuICAgIGxheW91dE1lbWJlcnNGb3JTdGFja2VkKGdyb3VwLCBzdGFydFgsIHN0YXJ0WSkge1xyXG4gICAgICAgIGxldCBtZW1iZXJzID0gdGhpcy5nZXRPcmRlcmVkTWVtYmVycyhncm91cCk7XHJcbiAgICAgICAgbGV0IHggPSBzdGFydFg7XHJcbiAgICAgICAgbGV0IHkgPSBzdGFydFk7XHJcbiAgICAgICAgbGV0IHJvd0NvdW50ID0gMDtcclxuICAgICAgICBsZXQgbWF4U3RhcnRZID0gc3RhcnRZO1xyXG4gICAgICAgIF8uZWFjaChtZW1iZXJzLCAocGFydCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIGdvLkdyb3VwICYmICFwYXJ0LmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWFyZ2luID0gdGhpcy5nZXRTdGFja01hcmdpbihwYXJ0KTtcclxuICAgICAgICAgICAgICAgIHBhcnQubW92ZShuZXcgZ28uUG9pbnQoeCwgeSkpO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRZID0geSArIHBhcnQuYWN0dWFsQm91bmRzLmhlaWdodCArIG1hcmdpbiAvIDI7IC8vIHN0YXJ0IFkgcG9zaXRpb24gZm9yIHBhcnQncyBjaGlsZHJlblxyXG5cclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xheW91dE1lbWJlcnNGb3JTdGFja2VkOiBzdGFydGluZyBsYXlvdXQgb2YgY2hpbGRyZW4gb2YgJyArIHBhcnQgKyAnIGF0ICcgKyBNYXRoLnJvdW5kKHgpICsgJywnICsgTWF0aC5yb3VuZChzdGFydFkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGFydC5pc1N1YkdyYXBoRXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBsYXlvdXQgY2hpbGRyZW4gb2YgdGhpcyBwYXJ0OyBjaGVjayBpZiB3ZSd2ZSBhbHJlYWR5IGRvbmUgYSB0YWxsZXIgcGFydCtjaGlsZHJlbiBpbiBjdXJyZW50IHJvd1xyXG4gICAgICAgICAgICAgICAgICAgIG1heFN0YXJ0WSA9IE1hdGgubWF4KG1heFN0YXJ0WSwgdGhpcy5sYXlvdXRNZW1iZXJzRm9yU3RhY2tlZChwYXJ0LCB4LCBzdGFydFkpKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdsYXlvdXRNZW1iZXJzRm9yU3RhY2tlZDogbGFpZCBvdXQgY2hpbGRyZW4gb2YgJyArIHBhcnQgKyAnLCBtYXhTdGFydFkgaXMgbm93ICcgKyBNYXRoLnJvdW5kKG1heFN0YXJ0WSkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhTdGFydFkgPSBNYXRoLm1heChtYXhTdGFydFksIHN0YXJ0WSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZGVjaWRlIHdoZXRoZXIgdG8gd3JhcFxyXG4gICAgICAgICAgICAgICAgcm93Q291bnQrKztcclxuICAgICAgICAgICAgICAgIGlmIChyb3dDb3VudCA8IDIpIHsgLy8ga2VlcCBnb2luZyBvbiB0aGlzIGxpbmVcclxuICAgICAgICAgICAgICAgICAgICB4ICs9IHBhcnQuYWN0dWFsQm91bmRzLndpZHRoICsgbWFyZ2luO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gd3JhcCB0byBuZXh0IGxpbmVcclxuICAgICAgICAgICAgICAgICAgICB4ID0gc3RhcnRYO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgPSBtYXhTdGFydFkgKyBtYXJnaW4gLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd0NvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBtYXhTdGFydFk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2hhcmVkIHN0dWZmIGZvciBMZWZ0L1JpZ2h0IEludmVudG9yeSBsYXlvdXRzLi4uXHJcblxyXG4gICAgLy8gZ2V0cyB0aGUgbWFyZ2luIHRvIGJlIHVzZWQgaW4gc3RhY2sgbGF5b3V0IGJldHdlZW4gdGhpcyBncm91cCdzIGNoaWxkcmVuXHJcbiAgICBnZXRJbnZlbnRvcnlNYXJnaW4oZ3JvdXApIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wdXRlTGV2ZWwoZ3JvdXApIDw9IDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEwICogdGhpcy5nZXRTY2FsZShncm91cCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDMgKiB0aGlzLmdldFNjYWxlKGdyb3VwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgbWF4IHkgdmFsdWUgYWZ0ZXIgbGF5aW5nIG91dCB0aGUgbGFzdCBwYXJ0XHJcbiAgICAvLyBzaWRlIGlzICdMJyBvciAnUidcclxuICAgIGxheW91dE1lbWJlcnNGb3JJbnZlbnRvcnkoZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZLCBzaWRlKSB7XHJcbiAgICAgICAgbGV0IG1lbWJlcnMgPSB0aGlzLmdldE9yZGVyZWRNZW1iZXJzKGdyb3VwKTtcclxuICAgICAgICBfLmVhY2gobWVtYmVycywgKHBhcnQpID0+IHtcclxuICAgICAgICAgICAgbGV0IHggPSBzdGFydFg7IC8vIGZvciBsZWZ0LCBqdXN0IHVzZSB4XHJcbiAgICAgICAgICAgIGlmIChzaWRlID09PSAnUicpXHJcbiAgICAgICAgICAgICAgICB4ID0gc3RhcnRYIC0gcGFydC5hY3R1YWxCb3VuZHMud2lkdGg7IC8vIGZvciByaWdodCwgcmlnaHQtYWxpZ24gcGFydHMgdG8gc3RhcnRYXHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xheW91dE1lbWJlcnNGb3JJbnZlbnRvcnksIHBhcnQ6ICcgKyBwYXJ0ICsgJyB0byBsb2NhdGlvbjogJyArIHggKyAnLCcgKyBzdGFydFkpO1xyXG4gICAgICAgICAgICBwYXJ0Lm1vdmUobmV3IGdvLlBvaW50KHgsIHN0YXJ0WSkpO1xyXG4gICAgICAgICAgICBzdGFydFkgKz0gcGFydC5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgdGhpcy5nZXRJbnZlbnRvcnlNYXJnaW4ocGFydCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0LmlzU3ViR3JhcGhFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbGF5b3V0TWVtYmVyc0ZvckludmVudG9yeSwgeSBhZnRlciBtb3Zpbmc6ICcgKyBwYXJ0ICsgJyA9ICcgKyBzdGFydFkpO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRZID0gdGhpcy5sYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5KHBhcnQsIHN0YXJ0WCwgc3RhcnRZLCBzaWRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBzdGFydFkgKyB0aGlzLmdldEludmVudG9yeU1hcmdpbihncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyBhbiBhcnJheSBvZiB0aGUgZ3JvdXAncyAobm9uLVItdGhpbmcpIG1lbWJlcnMsIHNvcnRlZCBieSB0aGUgJ29yZGVyJyBkYXRhIHByb3BlcnR5XHJcbiAgICBnZXRPcmRlcmVkTWVtYmVycyhncm91cCkge1xyXG4gICAgICAgIGxldCBtZW1iZXJzID0gbmV3IGdvLkxpc3QoKTtcclxuICAgICAgICBsZXQgaXQgPSBncm91cC5tZW1iZXJQYXJ0cy5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgIXBhcnQuaXNMaW5rTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIG1lbWJlcnMuYWRkKHBhcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfLnNvcnRCeShtZW1iZXJzLnRvQXJyYXkoKSwgZnVuY3Rpb24gKG1lbWJlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbWVtYmVyLmRhdGEub3JkZXI7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVmcmVzaGVzIHRoZSBjYWNoZWQgbGlzdCBvZiBhbGwgbGlua3Mgd2l0aCBrZXlzLCB0byBmYWNpbGl0YXRlIGdyb3VwaW5nIHRoZW0gYWNjb3JkaW5nIHRvIGNvbm5lY3RlZCBub2Rlc1xyXG4gICAgZ2V0TGlua3NCeU5vZGVzKHJlZnJlc2gpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRMaW5rc0J5Tm9kZXMnKTtcclxuICAgICAgICBpZiAoIXRoaXMuX2xpbmtzQnlOb2RlcyB8fCByZWZyZXNoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpbmtzQnlOb2RlcyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgICAgIGxldCBsaW5rcyA9IGRpYWdyYW0ubGlua3MuaXRlcmF0b3I7XHJcbiAgICAgICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQga2V5ID0gdGhpcy5nZXRTYW1lTm9kZXNMaW5rS2V5KGxpbmspO1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpbmtzQnlOb2Rlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbms6IGxpbmssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc1JUaGluZzogKGxpbmsubGFiZWxOb2Rlcy5jb3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmtzQnlOb2RlcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIGEga2V5IHVzZWQgdG8gZ3JvdXAgbGlua3MgYWNjb3JkaW5nIHRvIHdoaWNoIHBhaXIgb2Ygbm9kZXMgdGhleSBjb25uZWN0LlxyXG4gICAgLy8gVGhlIHJldHVybmVkIGtleSBpcyBub24tZW1wdHkgZm9yIHJlZ3VsYXIgbGlua3MgYW5kIFAgbGlua3MgdGhhdCBzaG91bGQgYmUgc2hvd24gY3VycmVudGx5LFxyXG4gICAgLy8gc28gdGhhdCB0aGVzZSB3aWxsIGFsbCBiZSByb3V0ZWQgYnkgdGhlIHNhbWUgcnVsZXMuIEEgbnVsbCBrZXkgaXMgcmV0dXJuZWQgZm9yIGFueSBvdGhlciBcclxuICAgIC8vIGxpbmtzLCBpbmRpY2F0aW5nIHRoYXQgbm8gZ3JvdXBpbmcgaXMgcmVxdWlyZWQuXHJcbiAgICBnZXRTYW1lTm9kZXNMaW5rS2V5KGxpbmspIHtcclxuICAgICAgICAvLyAgICAgICAgaWYgKHRoaXMuaXNSTGluayhsaW5rKSB8fCAodGhpcy5pc1BMaW5rKGxpbmspICYmIHRoaXMuX21hcC5nZXRUZW1wbGF0ZXMoKS5zaG93UExpbmsobGluaykpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSTGluayhsaW5rKSkge1xyXG4gICAgICAgICAgICBsZXQga2V5ID0gW2xpbmsuZnJvbU5vZGUudG9TdHJpbmcoKSwgbGluay50b05vZGUudG9TdHJpbmcoKV0uc29ydCgpLmpvaW4oJ3wnKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygna2V5OiAnICsga2V5KTtcclxuICAgICAgICAgICAgcmV0dXJuIGtleTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gV2UgdXNlIHRoaXMgdG8gZGlzdGluZ3Vpc2ggYW4gQS1CIGxpbmsgZnJvbSBhIEItQSBsaW5rIChiYXNlZCBvbiBmcm9tTm9kZSBhbmQgdG9Ob2RlLCB3aGljaFxyXG4gICAgLy8gaXMgaW5kZXBlbmRlbnQgb2YgdGhlIGFycm93aGVhZCBzZXR0aW5ncykgd2hlbiBzZXR0aW5nIGN1cnZpbmVzcywgYmVjYXVzZSBzZXR0aW5nIGN1cnZpbmVzcyA9IDI1XHJcbiAgICAvLyBvbiBhbiBBLUIgbGluayBpcyB0aGUgc2FtZSBhcyBjdXJ2aW5lc3MgPSAtMjUgb24gYSBCLUEgbGluay5cclxuICAgIGdldExpbmtPcmllbnRhdGlvbihsaW5rKSB7XHJcbiAgICAgICAgaWYgKGxpbmsuZnJvbU5vZGUgJiYgbGluay50b05vZGUgJiYgbGluay5mcm9tTm9kZS50b1N0cmluZygpIDwgbGluay50b05vZGUudG9TdHJpbmcoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIGxpbmsgdGVzdHMgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgaXNSTGluayhsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiAhbGluay5kYXRhLmNhdGVnb3J5ICYmIGxpbmsuZnJvbU5vZGUgJiYgbGluay50b05vZGU7XHJcbiAgICB9XHJcblxyXG4gICAgaXNETGluayhsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmsgaW5zdGFuY2VvZiBnby5MaW5rICYmIGxpbmsuZGF0YSAmJiBsaW5rLmRhdGEuY2F0ZWdvcnkgPT09ICdEJztcclxuICAgIH1cclxuXHJcbiAgICBpc1BMaW5rKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gbGluayBpbnN0YW5jZW9mIGdvLkxpbmsgJiYgbGluay5kYXRhICYmIGxpbmsuZGF0YS5jYXRlZ29yeSA9PT0gJ1AnO1xyXG4gICAgfVxyXG5cclxuICAgIGlzR3JvdXAob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIGdvLkdyb3VwO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZ28uRGlhZ3JhbS5pbmhlcml0KExheW91dHMsIGdvLkxheW91dCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IExheW91dHM7XHJcbiIsImNvbnN0IEVkaXRvckNvbmZpZyA9IHJlcXVpcmUoJy4vRWRpdG9yQ29uZmlnLmpzJyk7XHJcblxyXG5jb25zdCBNSUxMSU9OID0gMTAwMCAqIDEwMDA7XHJcbmNvbnN0IExFRlQgPSAnbGVmdCc7XHJcbmNvbnN0IFJJR0hUID0gJ3JpZ2h0JztcclxuY29uc3QgZ28gPSB3aW5kb3cuZ287XHJcblxyXG5cclxuY2xhc3MgTWFwIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5fZWRpdG9yID0gY29uZmlnLkVkaXRvcjtcclxuXHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gbmV3IEVkaXRvckNvbmZpZyh0aGlzLl9lZGl0b3IsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX2FuYWx5dGljcyA9IHRoaXMuX2NvbmZpZy5hbmFseXRpY3M7XHJcbiAgICAgICAgdGhpcy5fYXR0YWNobWVudHMgPSB0aGlzLl9jb25maWcuYXR0YWNobWVudHM7XHJcbiAgICAgICAgdGhpcy5fYXV0b3NhdmUgPXRoaXMuX2NvbmZpZy5hdXRvc2F2ZTtcclxuICAgICAgICB0aGlzLl9nZW5lcmF0b3IgPSB0aGlzLl9jb25maWcuZ2VuZXJhdG9yO1xyXG4gICAgICAgIHRoaXMuX2xheW91dHMgPSB0aGlzLl9jb25maWcubGF5b3V0cztcclxuICAgICAgICB0aGlzLl9wZXJzcGVjdGl2ZXMgPSB0aGlzLl9jb25maWcucGVyc3BlY3RpdmVzO1xyXG4gICAgICAgIHRoaXMuX3ByZXNlbnRlciA9dGhpcy5fY29uZmlnLnByZXNlbnRlcjtcclxuICAgICAgICB0aGlzLl9zdGFuZGFyZHMgPXRoaXMuX2NvbmZpZy5zdGFuZGFyZHM7XHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVzID10aGlzLl9jb25maWcudGVtcGxhdGVzO1xyXG4gICAgICAgIHRoaXMuX3Rlc3RzID0gdGhpcy5fY29uZmlnLnRlc3RzO1xyXG4gICAgICAgIHRoaXMuX3VpID0gdGhpcy5fY29uZmlnLnVpO1xyXG5cclxuICAgICAgICAvL3RoaXMuX2FuYWx5dGljcyA9IG5ldyBTYW5kYmFua0VkaXRvci5BbmFseXRpY3ModGhpcy5fZWRpdG9yLCB0aGlzKTtcclxuICAgICAgICAvL3RoaXMuX2F0dGFjaG1lbnRzID0gbmV3IFNhbmRiYW5rRWRpdG9yLkF0dGFjaG1lbnRzKHRoaXMuX2VkaXRvciwgdGhpcyk7XHJcbiAgICAgICAgLy90aGlzLl9hdXRvc2F2ZSA9IG5ldyBTYW5kYmFua0VkaXRvci5BdXRvc2F2ZSh0aGlzLl9lZGl0b3IsIHRoaXMpO1xyXG4gICAgICAgIC8vdGhpcy5fZ2VuZXJhdG9yID0gbmV3IFNhbmRiYW5rRWRpdG9yLkdlbmVyYXRvcih0aGlzLl9lZGl0b3IsIHRoaXMpO1xyXG4gICAgICAgIC8vdGhpcy5fbGF5b3V0cyA9IG5ldyBTYW5kYmFua0VkaXRvci5MYXlvdXRzKHRoaXMuX2VkaXRvciwgdGhpcyk7XHJcbiAgICAgICAgLy90aGlzLl9wZXJzcGVjdGl2ZXMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuUGVyc3BlY3RpdmVzKHRoaXMuX2VkaXRvciwgdGhpcyk7XHJcbiAgICAgICAgLy90aGlzLl9wcmVzZW50ZXIgPSBuZXcgU2FuZGJhbmtFZGl0b3IuUHJlc2VudGVyKHRoaXMuX2VkaXRvciwgdGhpcyk7XHJcbiAgICAgICAgLy90aGlzLl9zdGFuZGFyZHMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuU3RhbmRhcmRzKHRoaXMuX2VkaXRvciwgdGhpcyk7XHJcbiAgICAgICAgLy90aGlzLl90ZW1wbGF0ZXMgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVGVtcGxhdGVzKHRoaXMuX2VkaXRvciwgdGhpcyk7XHJcbiAgICAgICAgLy90aGlzLl90ZXN0cyA9IG5ldyBTYW5kYmFua0VkaXRvci5UZXN0cyh0aGlzLl9lZGl0b3IsIHRoaXMpO1xyXG4gICAgICAgIC8vdGhpcy5fdWkgPSBuZXcgU2FuZGJhbmtFZGl0b3IuVUkodGhpcy5fZWRpdG9yLCB0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gY2FsbCBpbml0IGZvciBlYWNoIGNvbXBvbmVudCwgaWYgZGVmaW5lZFxyXG4gICAgICAgIF8uZWFjaCh0aGlzLmdldENvbXBvbmVudHMoKSwgKGNvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50ICYmIGNvbXBvbmVudC5pbml0KVxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50LmluaXQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIGRpYWdyYW1cclxuICAgICAgICB0aGlzLl9kaWFncmFtID0gbmV3IGdvLkRpYWdyYW0oJ2RpYWdyYW0nKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLmluaXRpYWxDb250ZW50QWxpZ25tZW50ID0gZ28uU3BvdC5DZW50ZXI7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5pbml0aWFsVmlld3BvcnRTcG90ID0gZ28uU3BvdC5DZW50ZXI7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5pbml0aWFsRG9jdW1lbnRTcG90ID0gZ28uU3BvdC5DZW50ZXI7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5oYXNIb3Jpem9udGFsU2Nyb2xsYmFyID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5oYXNWZXJ0aWNhbFNjcm9sbGJhciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ucGFkZGluZyA9IDUwMDtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLmxheW91dCA9IHRoaXMuX2xheW91dHMuZ2V0RnJlZWhhbmREaWFncmFtTGF5b3V0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdFRvb2xzKCk7XHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVzLmluaXRUZW1wbGF0ZXModGhpcy5fZGlhZ3JhbSk7IC8vIHNldCB1cCB0ZW1wbGF0ZXMsIGN1c3RvbWl6ZSB0ZW1wb3JhcnkgbGluayBiZWhhdmlvciBcclxuICAgICAgICB0aGlzLmFkZERpYWdyYW1MaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVzLmFkZEV4cG9ydEZvb3RlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaW50U2xpZGVzKCkge1xyXG4gICAgICAgIHRoaXMuZ2V0UHJlc2VudGVyKCkuY3JlYXRlU2xpZGVUaHVtYm5haWxzKCk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cucHJpbnQoKTtcclxuICAgICAgICB9LCA1MDApO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydFRvSW1hZ2UoZm9ybWF0KSB7XHJcblxyXG4gICAgICAgIHRoaXMuaW1hZ2VFeHBvcnRMb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAkKCcjZXhwb3J0LWltYWdlIGltZycpLnJlbW92ZSgpO1xyXG4gICAgICAgIHRoaXMuZ2V0VGVtcGxhdGVzKCkuc2hvd0V4cG9ydEZvb3RlcigpO1xyXG5cclxuICAgICAgICBsZXQgcmVjdCA9IHRoaXMuZ2V0RGlhZ3JhbSgpLmNvbXB1dGVQYXJ0c0JvdW5kcyh0aGlzLmdldERpYWdyYW0oKS5ub2RlcykuY29weSgpO1xyXG5cclxuICAgICAgICBsZXQgaW1hZ2VNQiA9IHJlY3Qud2lkdGggKiByZWN0LmhlaWdodCAqIDQgLyBNSUxMSU9OOyAvLyA0IGJ5dGVzL3BpeGVsXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaW1hZ2VNQjogJyArIGltYWdlTUIpO1xyXG5cclxuICAgICAgICAvLyBtYWtlIHRoZSBtYXggc2l6ZSBvZiB0aGUgaW1hZ2UgMTBNQlxyXG4gICAgICAgIC8vIHBuZ1NpemUgPSBpbWFnZU1CICogc2NhbGUgKiBzY2FsZVxyXG4gICAgICAgIC8vIHNvIG1heCBzY2FsZSA9IHNxcnQocG5nU2l6ZSAvIGltYWdlTUIpXHJcbiAgICAgICAgLy8gVGhlc2UgY2FsY3VsYXRpb25zIGRvbid0IHNlZW0gdG8gYmUgcmlnaHQsIGJ1dCBpbiBwcmFjdGljZSB1c2luZyA1MDAgaGVyZVxyXG4gICAgICAgIC8vIHdlIGdldCBhIHNjYWxlIG9mIDIuNDMgZm9yIGFuIGltYWdlIDE5OTg0IHggMzQyNCBwaXhlbHNcclxuICAgICAgICAvLyB3aGljaCByZXN1bHRzIGluIGEgZmlsZSBzaXplIG9mIDEuODggTUIgYXQgMzIgYml0cy9waXhlbC4uLlxyXG4gICAgICAgIC8vIE9SIDI4MzgwIHggNTE5NiBwaXhlbHMsIHNjYWxlID0gMy40MSA9PiBmaWxlIHNpemUgPSAzLjQ5IE1CXHJcbiAgICAgICAgbGV0IHNjYWxlID0gNDtcclxuICAgICAgICBpZiAoaW1hZ2VNQikge1xyXG4gICAgICAgICAgICBzY2FsZSA9IE1hdGgubWluKDQsIE1hdGguc3FydCg1MCAvIGltYWdlTUIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2ltYWdlIGRpbWVuc2lvbnM6ICcgKyByZWN0LndpZHRoICsgJyB4ICcgKyByZWN0LmhlaWdodCArICcsIGltYWdlIGJ5dGVzOiAnICsgKHJlY3Qud2lkdGggKiByZWN0LmhlaWdodCAqIDQpICsgXHJcbiAgICAgICAgLy8gICAgICAgICcsIGltYWdlTUI6ICcgKyBpbWFnZU1CICsgJywgc2NhbGU6ICcgKyBzY2FsZSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd0ltYWdlRXhwb3J0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgbGV0IHBhcnRzVG9FeHBvcnQgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHBhcnRzVG9FeHBvcnQuYWRkQWxsKHRoaXMuZ2V0RGlhZ3JhbSgpLm5vZGVzKTtcclxuICAgICAgICBwYXJ0c1RvRXhwb3J0LmFkZEFsbCh0aGlzLmdldERpYWdyYW0oKS5saW5rcyk7XHJcbiAgICAgICAgcGFydHNUb0V4cG9ydC5yZW1vdmUodGhpcy5nZXRQcmVzZW50ZXIoKS5zbGlkZUJsb2NrZXIpO1xyXG5cclxuICAgICAgICBsZXQgZG9JbWFnZSA9ICR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGltZyA9IHRoaXMuZ2V0RGlhZ3JhbSgpLm1ha2VJbWFnZSh7XHJcbiAgICAgICAgICAgICAgICBwYXJ0czogcGFydHNUb0V4cG9ydCxcclxuICAgICAgICAgICAgICAgIG1heFNpemU6IG5ldyBnby5TaXplKChyZWN0LndpZHRoICsgMjAwKSAqIHNjYWxlLCAocmVjdC5oZWlnaHQgKyAyMDApICogc2NhbGUpLFxyXG4gICAgICAgICAgICAgICAgc2NhbGU6IHNjYWxlLFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTAwICogc2NhbGUsXHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnI2ZmZmZmZidcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKCcjZXhwb3J0LWltYWdlJykuYXBwZW5kKGltZyk7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VFeHBvcnRMb2FkaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmdldFRlbXBsYXRlcygpLmhpZGVFeHBvcnRGb290ZXIoKTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSBjb21wb25lbnQgYWNjZXNzb3JzIC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBnZXRDb21wb25lbnRzKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHRoaXMuX2FuYWx5dGljcyxcclxuICAgICAgICAgICAgdGhpcy5fYXR0YWNobWVudHMsXHJcbiAgICAgICAgICAgIHRoaXMuX2F1dG9zYXZlLFxyXG4gICAgICAgICAgICB0aGlzLl9nZW5lcmF0b3IsXHJcbiAgICAgICAgICAgIC8vIHRoaXMuX2hpc3RvcnksIFxyXG4gICAgICAgICAgICB0aGlzLl9sYXlvdXRzLFxyXG4gICAgICAgICAgICB0aGlzLl9wZXJzcGVjdGl2ZXMsXHJcbiAgICAgICAgICAgIHRoaXMuX3ByZXNlbnRlcixcclxuICAgICAgICAgICAgdGhpcy5fc3RhbmRhcmRzLFxyXG4gICAgICAgICAgICB0aGlzLl90ZW1wbGF0ZXMsXHJcbiAgICAgICAgICAgIHRoaXMuX3Rlc3RzLFxyXG4gICAgICAgICAgICB0aGlzLl91aVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QW5hbHl0aWNzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hbmFseXRpY3M7XHJcbiAgICB9XHJcbiAgICBnZXRBdHRhY2htZW50cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXR0YWNobWVudHM7XHJcbiAgICB9XHJcbiAgICBnZXRBdXRvc2F2ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b3NhdmU7XHJcbiAgICB9XHJcbiAgICBnZXRHZW5lcmF0b3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dlbmVyYXRvcjtcclxuICAgIH1cclxuICAgIC8vIHRoaXMuZ2V0SGlzdG9yeSAoKSB7IHJldHVybiB0aGlzLl9oaXN0b3J5OyB9O1xyXG4gICAgZ2V0TGF5b3V0cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbGF5b3V0cztcclxuICAgIH1cclxuICAgIGdldFBlcnNwZWN0aXZlcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGVyc3BlY3RpdmVzO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJlc2VudGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wcmVzZW50ZXI7XHJcbiAgICB9XHJcbiAgICBnZXRTdGFuZGFyZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YW5kYXJkcztcclxuICAgIH1cclxuICAgIGdldFRlbXBsYXRlcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGVtcGxhdGVzO1xyXG4gICAgfVxyXG4gICAgZ2V0VGVzdHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rlc3RzO1xyXG4gICAgfVxyXG4gICAgZ2V0VWkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjdXJyZW50VGFiKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50VGFiO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBjdXJyZW50VGFiKHZhbCkge1xyXG4gICAgICAgIC8vIHdhdGNoIGZvciB0YWIgY2hhbmdlc1xyXG4gICAgICAgIC8vIFRPRE86IHJlc3RvcmUgbm9uLUFuZ3VsYXIgdmVyc2lvbiBvZiB0aGlzXHJcbiAgICAgICAgLy90aGlzLl9lZGl0b3IuJHdhdGNoKCdjdXJyZW50VGFiJywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgLy8gICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgICAgIC8vfSk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGFiQ2hhbmdlZCh0aGlzLl9jdXJyZW50VGFiLCB2YWwpO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRUYWIgPSB2YWw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdGhpcyBpcyBjYWxsZWQgYnkgYSB0aGlzLl9lZGl0b3IuJHdhdGNoIGluIGluaXQoKVxyXG4gICAgY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2N1cnJlbnRUYWJDaGFuZ2VkLCBuZXdWYWx1ZTogJyArIG5ld1ZhbHVlICsgJywgb2xkVmFsdWU6ICcgKyBvbGRWYWx1ZSk7XHJcbiAgICAgICAgLy8gbm90aWZ5IGFueSBpbnRlcmVzdGVkIGNvbXBvbmVudHNcclxuICAgICAgICBfLmVhY2godGhpcy5nZXRDb21wb25lbnRzKCksIChjb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQuY3VycmVudFRhYkNoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5jdXJyZW50VGFiQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vdGhpcy5fZWRpdG9yLnNhZmVBcHBseSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERpYWdyYW0oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpYWdyYW07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbWlzYy4gdG9vbCBjb25maWd1cmF0aW9uXHJcbiAgICBpbml0VG9vbHMoKSB7XHJcbiAgICAgICAgLy8gZGlzYWJsZSBjbGlja2luZyBvbiBUZXh0QmxvY2tzIHRvIGVkaXQgLSB3ZSB3aWxsIGludm9rZSBlZGl0aW5nIGluIG90aGVyIHdheXNcclxuICAgICAgICB0aGlzLl9kaWFncmFtLmFsbG93VGV4dEVkaXQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gc2VsZWN0IHRleHQgd2hlbiBhY3RpdmF0aW5nIGVkaXRvcjsgXHJcbiAgICAgICAgLy8gdXNlIHNoaWZ0LWVudGVyIHRvIGNyZWF0ZSBuZXcgbGluZXMsIGVudGVyIHRvIGZpbmlzaCBlZGl0aW5nIChOQjogZWRpdG9yIGhhcyBtdWx0aWxpbmU9dHJ1ZSlcclxuICAgICAgICBsZXQgdGV4dFRvb2wgPSB0aGlzLl9kaWFncmFtLnRvb2xNYW5hZ2VyLnRleHRFZGl0aW5nVG9vbDtcclxuICAgICAgICB0ZXh0VG9vbC5kb0FjdGl2YXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBnby5UZXh0RWRpdGluZ1Rvb2wucHJvdG90eXBlLmRvQWN0aXZhdGUuY2FsbCh0ZXh0VG9vbCk7XHJcbiAgICAgICAgICAgIGlmICh0ZXh0VG9vbC5kZWZhdWx0VGV4dEVkaXRvcikge1xyXG4gICAgICAgICAgICAgICAgdGV4dFRvb2wuZGVmYXVsdFRleHRFZGl0b3Iuc2VsZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGV4dFRvb2wuZGVmYXVsdFRleHRFZGl0b3IuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS53aGljaCA9PT0gMTMgJiYgIWUuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ28uVGV4dEVkaXRpbmdUb29sLnByb3RvdHlwZS5hY2NlcHRUZXh0LmNhbGwodGV4dFRvb2wsIGdvLlRleHRFZGl0aW5nVG9vbC5Mb3N0Rm9jdXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gaGFuZGxlIGRlbGV0ZSBrZXkgb24gTWFjIChkZWZhdWx0IGJlaGF2aW9yIG9ubHkgdXNlcyBmbi1EZWxldGUgdG8gZGVsZXRlIGZyb20gY2FudmFzKVxyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIuZG9LZXlEb3duID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZSA9IHRoaXMuX2RpYWdyYW0ubGFzdElucHV0O1xyXG4gICAgICAgICAgICBsZXQgY21kID0gdGhpcy5fZGlhZ3JhbS5jb21tYW5kSGFuZGxlcjtcclxuICAgICAgICAgICAgaWYgKGUuZXZlbnQud2hpY2ggPT09IDgpIHtcclxuICAgICAgICAgICAgICAgIGNtZC5kZWxldGVTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdvLkNvbW1hbmRIYW5kbGVyLnByb3RvdHlwZS5kb0tleURvd24uY2FsbChjbWQpOyAvLyBjYWxsIGJhc2UgbWV0aG9kIHdpdGggbm8gYXJndW1lbnRzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBbZGlzYWJsZSBrZXlib2FyZCBzaG9ydGN1dHMsIGFzIHRoZXNlIGRvIG5vdCBkbyBjZW50ZXJpbmcgb24gem9vbSwgXHJcbiAgICAgICAgLy8gYW5kIGNhbiBsZWFkIHRvIGNvbmZ1c2lvbiB3aXRoIGJyb3dzZXIgem9vbSAod2hpY2ggZ2V0cyBmaXJlZCBkZXBlbmRzIG9uIGZvY3VzKV1cclxuICAgICAgICAvLyAtIHR1cm5lZCBiYWNrIG9uIHRvIHN1cHBvcnQgcGluY2gvem9vbSBvbiBpUGFkXHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5hbGxvd1pvb20gPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLl9kaWFncmFtLnRvb2xNYW5hZ2VyLm1vdXNlV2hlZWxCZWhhdmlvciA9IGdvLlRvb2xNYW5hZ2VyLldoZWVsWm9vbTtcclxuXHJcbiAgICAgICAgLy8gZGVjaWRlIHdoYXQga2luZHMgb2YgUGFydHMgY2FuIGJlIGFkZGVkIHRvIGEgR3JvdXAgb3IgdG8gdG9wLWxldmVsXHJcbiAgICAgICAgLy8gdGhpcy5fZGlhZ3JhbS5jb21tYW5kSGFuZGxlci5tZW1iZXJWYWxpZGF0aW9uIChncnAsIG5vZGUpIHtcclxuICAgICAgICAvLyAgICAgLy9pZiAoZ3JwIGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgbm9kZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSByZXR1cm4gZmFsc2U7ICAvLyBjYW5ub3QgYWRkIEdyb3VwcyB0byBHcm91cHNcclxuICAgICAgICAvLyAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgLy8gfTtcclxuXHJcbiAgICAgICAgLy8gZGVmYXVsdCBsaW5rIGF0dHJpYnV0ZXNcclxuICAgICAgICB0aGlzLl9kaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sLmFyY2hldHlwZUxpbmtEYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnbm9BcnJvd3MnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gYWxsb3cgZG91YmxlLWNsaWNrIGluIGJhY2tncm91bmQgdG8gY3JlYXRlIGEgbmV3IG5vZGVcclxuICAgICAgICB0aGlzLl9kaWFncmFtLnRvb2xNYW5hZ2VyLmNsaWNrQ3JlYXRpbmdUb29sLmFyY2hldHlwZU5vZGVEYXRhID0gdGhpcy5nZXROZXdUaGluZ0RhdGEoKTtcclxuXHJcbiAgICAgICAgLy8gaG93IGxvbmcgbW91c2UgbXVzdCBiZSBoZWxkIHN0YXRpb25hcnkgYmVmb3JlIHN0YXJ0aW5nIGEgZHJhZy1zZWxlY3QgKGluc3RlYWQgb2YgYSBzY3JvbGwpIC0gZGVmYXVsdCB3YXMgMTc1bXNcclxuICAgICAgICB0aGlzLl9kaWFncmFtLnRvb2xNYW5hZ2VyLmRyYWdTZWxlY3RpbmdUb29sLmRlbGF5ID0gNDAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tIGhhbmRsaW5nIG9mIERpYWdyYW1FdmVudHMgLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBhZGREaWFncmFtTGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgICAvLyBEaWFncmFtRXZlbnRzIHRvIGJlIGhhbmRsZWQgaGVyZSBvciBieSBhIGNvbXBvbmVudFxyXG4gICAgICAgIGxldCBkaWFncmFtRXZlbnRzID0gW1xyXG4gICAgICAgICAgICBcIkluaXRpYWxMYXlvdXRDb21wbGV0ZWRcIixcclxuICAgICAgICAgICAgXCJDaGFuZ2VkU2VsZWN0aW9uXCIsXHJcbiAgICAgICAgICAgIFwiQmFja2dyb3VuZFNpbmdsZUNsaWNrZWRcIixcclxuICAgICAgICAgICAgXCJTZWxlY3Rpb25Db3BpZWRcIixcclxuICAgICAgICAgICAgXCJTZWxlY3Rpb25Nb3ZlZFwiLFxyXG4gICAgICAgICAgICBcIlNlbGVjdGlvbkRlbGV0aW5nXCIsXHJcbiAgICAgICAgICAgIFwiU2VsZWN0aW9uRGVsZXRlZFwiLFxyXG4gICAgICAgICAgICBcIlBhcnRDcmVhdGVkXCIsXHJcbiAgICAgICAgICAgIFwiUGFydFJlc2l6ZWRcIixcclxuICAgICAgICAgICAgXCJDbGlwYm9hcmRDaGFuZ2VkXCIsXHJcbiAgICAgICAgICAgIFwiQ2xpcGJvYXJkUGFzdGVkXCIsXHJcbiAgICAgICAgICAgIFwiTGlua0RyYXduXCIsXHJcbiAgICAgICAgICAgIFwiTGlua1JlbGlua2VkXCIsXHJcbiAgICAgICAgICAgIFwiVmlld3BvcnRCb3VuZHNDaGFuZ2VkXCJcclxuICAgICAgICBdO1xyXG4gICAgICAgIF8uZWFjaChkaWFncmFtRXZlbnRzLCAoZXZlbnROYW1lKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0uYWRkRGlhZ3JhbUxpc3RlbmVyKGV2ZW50TmFtZSwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnJvYWRjYXN0RGlhZ3JhbUV2ZW50KGV2ZW50TmFtZSwgZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9kaWFncmFtLmFkZERpYWdyYW1MaXN0ZW5lcihcIkJhY2tncm91bmRDb250ZXh0Q2xpY2tlZFwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiB0dXJuIG9mZiBpbiBwcm9kdWN0aW9uXHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2RpYWdyYW0gbW9kZWw6JyArIHRoaXMuX2RpYWdyYW0ubW9kZWwudG9Kc29uKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGJyb2FkY2FzdHMgdGhlIGdpdmVuIERpYWdyYW1FdmVudCAoc2VlIGFwaWRvY3MgZm9yIGdvLkRpYWdyYW1FdmVudClcclxuICAgIC8vIHRvIGFueSBjb21wb25lbnRzIHRoYXQgbWF5IGJlIGludGVyZXN0ZWQsIGluY2x1ZGluZyB0aGlzIG9uZS5cclxuICAgIGJyb2FkY2FzdERpYWdyYW1FdmVudChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZURpYWdyYW1FdmVudChldmVudE5hbWUsIGUpO1xyXG4gICAgICAgIF8uZWFjaCh0aGlzLmdldENvbXBvbmVudHMoKSwgKGNvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50ICYmIGNvbXBvbmVudC5oYW5kbGVEaWFncmFtRXZlbnQpXHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuaGFuZGxlRGlhZ3JhbUV2ZW50KGV2ZW50TmFtZSwgZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZURpYWdyYW1FdmVudChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdoYW5kbGVEaWFncmFtRXZlbnQ6ICcgKyBldmVudE5hbWUpO1xyXG4gICAgICAgIGlmIChldmVudE5hbWUgPT09ICdDaGFuZ2VkU2VsZWN0aW9uJykge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZWRTZWxlY3Rpb24oZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT09ICdTZWxlY3Rpb25Db3BpZWQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uQ29waWVkKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09PSAnUGFydENyZWF0ZWQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFydENyZWF0ZWQoZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudE5hbWUgPT09ICdCYWNrZ3JvdW5kU2luZ2xlQ2xpY2tlZCcpIHtcclxuICAgICAgICAgICAgdGhpcy5fdWkuc2hvd0hlbHBUaXAoJ2NhbnZhc1RpcCcpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09PSAnTGlua0RyYXduJykge1xyXG4gICAgICAgICAgICB0aGlzLmxpbmtEcmF3bihlKTtcclxuICAgICAgICAgICAgdGhpcy5zZXROZXdMaW5rRGlyZWN0aW9uKGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnROYW1lID09PSAnTGlua1JlbGlua2VkJykge1xyXG4gICAgICAgICAgICB0aGlzLmxpbmtSZWxpbmtlZChlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PT0gJ0NsaXBib2FyZENoYW5nZWQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpcGJvYXJkQ2hhbmdlZChlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PT0gJ0NsaXBib2FyZFBhc3RlZCcpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGlwYm9hcmRQYXN0ZWQoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGhhbmRsZSB6b29tIHRvIHJlZ2lvbiBpZiBhcHBsaWNhYmxlXHJcbiAgICBjaGFuZ2VkU2VsZWN0aW9uKGUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd0aGlzLmNoYW5nZWRTZWxlY3Rpb24nKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5fdWkubWF5YmVab29tVG9SZWdpb24oKTtcclxuICAgICAgICBpZiAodGhpcy5yZWxhdGlvbnNoaXBzU2VsZWN0ZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl91aS5zaG93SGVscFRpcCgncmVsYXRpb25zaGlwVGlwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhcnRDcmVhdGVkKGUpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdNYXAsIFBhcnRDcmVhdGVkJyk7XHJcbiAgICAgICAgbGV0IGdyb3VwID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGlmICghKGdyb3VwIGluc3RhbmNlb2YgZ28uR3JvdXApKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoZ3JvdXAuZGF0YSwgJ2xheW91dCcsIHRoaXMuX3VpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5kZWZhdWx0VGhpbmdMYXlvdXQgfHwgJ2xlZnQnKTtcclxuICAgICAgICB0aGlzLl9sYXlvdXRzLnNldE5ld1BhcnRMb2NhdGlvbkRhdGEoZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZml4IGxpbmsgcG9ydHMgd2hlbiBhIGxpbmsgaXMgY3JlYXRlZCAtIFxyXG4gICAgLy8gdGhlIFAgYW5kIFIgcG9ydHMgYm90aCBjb3ZlciB0aGUgd2hvbGUgbm9kZSwgYW5kIHRoZSBQIHBvcnQgaXMgb24gdG9wIG9mIHRoZSBSIHBvcnQsIFxyXG4gICAgLy8gc28gYm90aCBQIGFuZCBSIGxpbmtzIGdldCB0aGUgdG9Qb3J0IHNldCB0byBQIGJ5IGRlZmF1bHQuXHJcbiAgICBsaW5rRHJhd24oZSkge1xyXG4gICAgICAgIGxldCBsaW5rID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdsaW5rRHJhd24sIGxpbms6ICcgKyBsaW5rICsgJywgZnJvbVBvcnQ6ICcgKyBsaW5rLmZyb21Qb3J0SWQgKyAnLCB0b1BvcnQ6ICcgKyBsaW5rLnRvUG9ydElkKTtcclxuICAgICAgICBpZiAobGluay5mcm9tUG9ydElkID09PSAnUCcpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY2hhbmdlIGxpbmsgY2F0ZWdvcnlcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ3RvUG9ydCcsICdQJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ2NhdGVnb3J5JywgJ1AnKTtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIGNhdGVnb3J5XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgLy8gcHJldmVudCBsaW5rcyBmcm9tIFIgdG8gUFxyXG4gICAgICAgIGVsc2UgaWYgKGxpbmsuZnJvbVBvcnRJZCA9PT0gJ1InKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHRvUG9ydFwiKTtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndG9Qb3J0JywgJ1InKTtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIHRvUG9ydFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZml4IGxpbmsgcG9ydHMgd2hlbiBhIGxpbmsgaXMgcmVsaW5rZWQgLSBcclxuICAgIC8vIGRyYWdnaW5nIGVpdGhlciBlbmQgb2YgYW4gUi1saW5rIHRvIGFub3RoZXIgbm9kZSB3aWxsIHNldCB0aGUgY29ycmVzcG9uZGluZyBwb3J0IHRvIFAsIFxyXG4gICAgLy8gc2luY2UgUCBwb3J0IGlzIG9uIHRvcCBvZiBSIHBvcnQsIHNvIHdlIHJlc2V0IGJvdGggcG9ydHMgdG8gUiBpZiB0aGUgY2F0ZWdvcnkgaXMgbm90IFAuXHJcbiAgICBsaW5rUmVsaW5rZWQoZSkge1xyXG4gICAgICAgIGxldCBsaW5rID0gZS5zdWJqZWN0O1xyXG4gICAgICAgIGlmICghbGluay5kYXRhLmNhdGVnb3J5IHx8IGxpbmsuZGF0YS5jYXRlZ29yeSAhPT0gJ1AnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGxpbmsuZGF0YSwgJ2Zyb21Qb3J0JywgJ1InKTtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndG9Qb3J0JywgJ1InKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TmV3TGlua0RpcmVjdGlvbihlKSB7XHJcbiAgICAgICAgbGV0IGxpbmsgPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgaWYgKGxpbmsuZnJvbVBvcnRJZCA9PT0gJ1InKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIGRpcmVjdGlvblwiKTtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkobGluay5kYXRhLCAndHlwZScsIHRoaXMuX3VpLmdldE1hcEVkaXRvck9wdGlvbnMoKS5kZWZhdWx0UmVsYXRpb25zaGlwRGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImNoYW5nZSBsaW5rIGRpcmVjdGlvblwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xpcGJvYXJkQ2hhbmdlZChlKSB7XHJcbiAgICAgICAgbGV0IHBhcnRzID0gZS5zdWJqZWN0Lml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChwYXJ0cy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgbGV0IHBhcnQgPSBwYXJ0cy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaXBib2FyZENoYW5nZWQ6IHBhcnQgJyArIHBhcnQgKyAnLCBtYWlucGFuZWwgc2NhbGU6ICcgKyBwYXJ0LmZpbmRPYmplY3QoJ21haW5wYW5lbCcpLnNjYWxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBOQjogdGhpcyBpcyBjYWxsZWQgd2hlbiBwYXJ0cyBhcmUgY29waWVkIGJ5IGNvbnRyb2wtZHJhZywgTk9UIHdoZW4gdGhlIGNvcHkgYnV0dG9uIGlzIGNsaWNrZWRcclxuICAgIHNlbGVjdGlvbkNvcGllZChlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGlvbkNvcGllZCcpO1xyXG4gICAgICAgIGxldCBwYXJ0cyA9IGUuc3ViamVjdC5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgcGFydC5pc1RvcExldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbG9jID0gZ28uUG9pbnQucGFyc2UocGFydC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0aW9uQ29waWVkOiB1cGRhdGluZyBsb2Mgb2YgcGFydCAnICsgcGFydCArICcgPSAnICsgbG9jICsgJywgc2NhbGU6ICcgKyBwYXJ0LnNjYWxlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHBhcnQuZGF0YSwgJ2xvYycsIChsb2MueCArIDUwKSArICcgJyArIChsb2MueSArIDUwKSk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0LnVwZGF0ZVRhcmdldEJpbmRpbmdzKCdsb2MnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGlwYm9hcmRQYXN0ZWQoZSkge1xyXG4gICAgICAgIGxldCBwYXJ0cyA9IGUuc3ViamVjdC5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAocGFydHMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgcGFydC5pc1RvcExldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbG9jID0gZ28uUG9pbnQucGFyc2UocGFydC5kYXRhLmxvYyk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGlwYm9hcmRQYXN0ZWQ6IHVwZGF0aW5nIGxvYyBvZiBwYXJ0ICcgKyBwYXJ0ICsgJyA9ICcgKyBsb2MgKyAnLCBzY2FsZTogJyArIHBhcnQuc2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbG9jJywgKGxvYy54ICsgNTApICsgJyAnICsgKGxvYy55ICsgNTApKTtcclxuICAgICAgICAgICAgICAgIHBhcnQudXBkYXRlVGFyZ2V0QmluZGluZ3MoJ2xvYycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvbXB1dGVzIHRoZSBib3VuZHMgb2YgYWxsIGdyb3VwcyBpbiB0aGUgZGlhZ3JhbSAtIHRoaXMgaW5jbHVkZXMgYWxsIGlkZWFzL3RoaW5ncywgXHJcbiAgICAvLyBhbmQgZXhjbHVkZXMgbm9kZXMsIGluY2x1ZGluZyBzbGlkZXMsIHRoZSBzbGlkZSBibG9ja2VyLCBhbmQgdGhlIGV4cG9ydCBmb290ZXJcclxuICAgIGNvbXB1dGVNYXBCb3VuZHMoKSB7XHJcbiAgICAgICAgbGV0IGdyb3VwcyA9IG5ldyBnby5MaXN0KGdvLkdyb3VwKTtcclxuICAgICAgICBsZXQgbm9kZXMgPSB0aGlzLl9kaWFncmFtLm5vZGVzO1xyXG4gICAgICAgIHdoaWxlIChub2Rlcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGVzLnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIGdyb3Vwcy5hZGQobm9kZXMudmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWFncmFtLmNvbXB1dGVQYXJ0c0JvdW5kcyhncm91cHMpLmNvcHkoKTsgLy8gcmV0dXJuIGEgbXV0YWJsZSByZWN0XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHdoYXQgaXMgY3VycmVudGx5IHNlbGVjdGVkPyAtLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIGFsbCBzZWxlY3RlZCBpdGVtcyBhcmUgdGhpbmdzIChpLmUuIEdyb3VwcyksIGluY2x1ZGluZyByLXRoaW5nc1xyXG4gICAgdGhpbmdzU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9kaWFncmFtIHx8IHRoaXMuX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBsZXQgaXQgPSB0aGlzLl9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0LnZhbHVlIGluc3RhbmNlb2YgZ28uR3JvdXApKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIGV4YWN0bHkgb25lIHRoaW5nIChHcm91cCkgaXMgc2VsZWN0ZWRcclxuICAgIHRoaW5nU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpYWdyYW0gJiYgdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPT09IDEgJiYgdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKSBpbnN0YW5jZW9mIGdvLkdyb3VwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGEgc2luZ2xlIGdyb3VwIGlzIHNlbGVjdGVkLCByZXR1cm5zIGl0LCBvdGhlcndpc2UgcmV0dXJucyBudWxsXHJcbiAgICBnZXRVbmlxdWVUaGluZ1NlbGVjdGVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kaWFncmFtICYmIHRoaXMuX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50ID09PSAxICYmIHRoaXMuX2RpYWdyYW0uc2VsZWN0aW9uLmZpcnN0KCkgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uZmlyc3QoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpbmdzU2VsZWN0ZWRBcmVNZW1iZXJzT2YoZ3JvdXApIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2RpYWdyYW0gfHwgdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGxldCBpdCA9IHRoaXMuX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkgfHwgaXQudmFsdWUuY29udGFpbmluZ0dyb3VwICE9PSBncm91cClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaW5nc1NlbGVjdGVkQXJlRGVzY2VuZGFudHNPZihncm91cCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZGlhZ3JhbSB8fCB0aGlzLl9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IGl0ID0gdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBsZXQgYW5jZXN0b3JzID0gdGhpcy5fbGF5b3V0cy5nZXRBbmNlc3Rvckdyb3VwcyhpdC52YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmIChfLmluZGV4T2YoYW5jZXN0b3JzLCBncm91cCkgPT09IC0xKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpbmdzU2VsZWN0ZWRJbmNsdWRlU2xpZGUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9kaWFncmFtIHx8IHRoaXMuX2RpYWdyYW0uc2VsZWN0aW9uLmNvdW50IDwgMSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBsZXQgaXQgPSB0aGlzLl9kaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChpdC52YWx1ZS5kYXRhICYmIGl0LnZhbHVlLmRhdGEuY2F0ZWdvcnkgPT09ICdzbGlkZScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIGFsbCBzZWxlY3RlZCBpdGVtcyBhcmUgcmVsYXRpb25zaGlwcyAoaS5lLiBMaW5rcylcclxuICAgIHJlbGF0aW9uc2hpcHNTZWxlY3RlZCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2RpYWdyYW0gfHwgdGhpcy5fZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQgPCAxKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGxldCBpdCA9IHRoaXMuX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5MaW5rKSB8fCAhdGhpcy5fbGF5b3V0cy5pc1JMaW5rKGl0LnZhbHVlKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJldHVybnMgdHJ1ZSBpZiBleGFjdGx5IG9uZSByZWxhdGlvbnNoaXAgKExpbmspIGlzIHNlbGVjdGVkXHJcbiAgICByZWxhdGlvbnNoaXBTZWxlY3RlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGlhZ3JhbSAmJiB0aGlzLl9kaWFncmFtLnNlbGVjdGlvbi5jb3VudCA9PT0gMSAmJiB0aGlzLl9kaWFncmFtLnNlbGVjdGlvbi5maXJzdCgpIGluc3RhbmNlb2YgZ28uTGluaztcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gbG9hZCBhbmQgaW5pdGlhbGl6ZSBtb2RlbCAtLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgbG9hZCgpIHtcclxuICAgICAgICBsZXQgdXJsID0gdGhpcy5fZWRpdG9yLm1hcFVybCArICcuanNvbic7XHJcbiAgICAgICAgaWYgKHRoaXMuX2VkaXRvci5zYW5kYm94KSB7XHJcbiAgICAgICAgICAgIHVybCA9IHRoaXMuX2VkaXRvci5tYXBVcmwgKyAnLmpzb24/c2FuZGJveD0xJztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9UT0RPOiByZXN0b3JlIG5vbi1Bbmd1bGFyIGh0dHAtZ2V0IGZvciBtYXAgZGF0YVxyXG4gICAgICAgIGxldCBkYXRhID0geyBcIm1hcFwiOiB7IFwibWV0YWRhdGFcIjogeyBcInNhbmRib3hcIjogZmFsc2UsIFwiaWRcIjogNTU0NywgXCJuYW1lXCI6IFwiVW50aXRsZWQgTWFwXCIsIFwidXJsXCI6IFwiL21hcHMvNTU0N1wiLCBcImNhbkVkaXRcIjogdHJ1ZSwgXCJ1cGRhdGVkQXRcIjogXCIyMDE1LTA1LTE1VDEyOjI5OjQwLjcyMS0wNDowMFwiLCBcInVwZGF0ZWRCeVwiOiBudWxsLCBcInVwZGF0ZWRCeU5hbWVcIjogbnVsbCwgXCJ1c2VyVGFnc1wiOiBbXSB9LCBcImRhdGFcIjogeyBcImNsYXNzXCI6IFwiZ28uR3JhcGhMaW5rc01vZGVsXCIsIFwibm9kZUlzTGlua0xhYmVsUHJvcGVydHlcIjogXCJpc0xpbmtMYWJlbFwiLCBcImxpbmtMYWJlbEtleXNQcm9wZXJ0eVwiOiBcImxhYmVsS2V5c1wiLCBcImxpbmtGcm9tUG9ydElkUHJvcGVydHlcIjogXCJmcm9tUG9ydFwiLCBcImxpbmtUb1BvcnRJZFByb3BlcnR5XCI6IFwidG9Qb3J0XCIsIFwibm9kZURhdGFBcnJheVwiOiBbeyBcImtleVwiOiAxLCBcInRleHRcIjogXCJOZXcgSWRlYVwiLCBcImlzR3JvdXBcIjogdHJ1ZSwgXCJsb2NcIjogXCIwIDBcIiwgXCJsYXlvdXRcIjogXCJsZWZ0XCIsIFwic0V4cGFuZGVkXCI6IHRydWUsIFwicEV4cGFuZGVkXCI6IHRydWUgfV0sIFwibGlua0RhdGFBcnJheVwiOiBbXSB9LCBcInN0YXRlRGF0YVwiOiBudWxsLCBcImVkaXRvck9wdGlvbnNcIjogbnVsbCwgXCJhbmFseXRpY3NcIjoge30sIFwidmVyc2lvbnNcIjogW10gfSB9O1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbihkYXRhKTtcclxuICAgICAgICB0aGlzLl91aS5zZXRTdGF0ZURhdGEoZGF0YS5tYXAuc3RhdGVEYXRhKTtcclxuICAgICAgICB0aGlzLl91aS5zZXRNYXBFZGl0b3JPcHRpb25zKGRhdGEubWFwLmVkaXRvck9wdGlvbnMpO1xyXG5cclxuICAgICAgICB0aGlzLmNoZWNrTW9kZWwoKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS51bmRvTWFuYWdlci5pc0VuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuYWRkQ2hhbmdlZExpc3RlbmVyKHRoaXMuX2F1dG9zYXZlLm1vZGVsQ2hhbmdlZCk7XHJcbiAgICAgICAgdGhpcy5fYXV0b3NhdmUuc2F2ZU9uTW9kZWxDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLmlzUmVhZE9ubHkgPSAhdGhpcy5fZWRpdG9yLmNhbkVkaXQ7XHJcbiAgICAgICAgdGhpcy5fZWRpdG9yLnVwZGF0ZUVkaXRTdGF0dXModGhpcy5fZWRpdG9yLmNhbkVkaXQgPyB0aGlzLl9lZGl0b3IuTEFTVF9VUERBVEVEIDogdGhpcy5fZWRpdG9yLlJFQURfT05MWSk7XHJcbiAgICAgICAgdGhpcy5fdWkucmVzZXRab29tKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkTWFwRXh0cmFEYXRhKGRhdGEubWFwKTtcclxuXHJcbiAgICAgICAgLy8gaWYgbm8gbm9kZXMgT1IgaW4gdGhpbmtxdWVyeSBtb2RlLCBsYXVuY2ggZ2VuZXJhdG9yXHJcbiAgICAgICAgaWYgKHRoaXMuX2VkaXRvci50aGlua3F1ZXJ5IHx8ICF0aGlzLl9kaWFncmFtLm1vZGVsLm5vZGVEYXRhQXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VpLm9wZW5UYWIodGhpcy5fdWkuVEFCX0lEX0dFTkVSQVRPUik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIHNsaWRlcywgcGxheSBwcmVzZW50YXRpb25cclxuICAgICAgICBlbHNlIGlmICghdGhpcy5fZWRpdG9yLmNhbkVkaXQgJiYgdGhpcy5fcHJlc2VudGVyLmdldFNsaWRlTm9kZURhdGFzKCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ByZXNlbnRlci5wbGF5U2xpZGUoMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvYWRGb3JTYW5kYm94KCkge1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbih0aGlzLl9lZGl0b3IubWFwRGF0YSk7XHJcbiAgICAgICAgdGhpcy5fdWkuc2V0U3RhdGVEYXRhKCcnKTsgLy8gaW1wb3J0YW50ISAob3RoZXJ3aXNlIGNvcm5lciBoaWdobGlnaHRpbmcgYnJlYWtzKVxyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLnVuZG9NYW5hZ2VyLmlzRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fdWkucmVzZXRab29tKCk7XHJcbiAgICAgICAgdGhpcy5fZWRpdG9yLmNhbkVkaXQgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBpZiBubyBub2RlcyBPUiBpbiB0aGlua3F1ZXJ5IG1vZGUsIGxhdW5jaCBnZW5lcmF0b3JcclxuICAgICAgICBpZiAodGhpcy5fZWRpdG9yLnRoaW5rcXVlcnkpIHtcclxuICAgICAgICAgICAgdGhpcy5fdWkub3BlblRhYih0aGlzLl91aS5UQUJfSURfR0VORVJBVE9SKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgc2xpZGVzLCBwbGF5IHByZXNlbnRhdGlvblxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX3ByZXNlbnRlci5nZXRTbGlkZU5vZGVEYXRhcygpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLl9wcmVzZW50ZXIucGxheVNsaWRlKDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gZml4IGFueSBzdHJ1Y3R1cmFsIHByb2JsZW1zIGluIHRoZSBtb2RlbCBiZWZvcmUgZGlzcGxheWluZyBpdFxyXG4gICAgY2hlY2tNb2RlbCgpIHtcclxuICAgICAgICAvLyBjaGFuZ2UgXCJpc0xpbmtMYWJlbFwiIHByb3BlcnR5IHRvIGNhdGVnb3J5OlwiTGlua0xhYmVsXCIgKGNoYW5nZSBhcyBvZiBnb0pTIDEuMylcclxuICAgICAgICBfLmVhY2godGhpcy5fZGlhZ3JhbS5tb2RlbC5ub2RlRGF0YUFycmF5LCAobm9kZURhdGEsIGluZGV4LCBsaXN0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChub2RlRGF0YS5pc0xpbmtMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIG5vZGVEYXRhLmlzTGlua0xhYmVsO1xyXG4gICAgICAgICAgICAgICAgbm9kZURhdGEuY2F0ZWdvcnkgPSBcIkxpbmtMYWJlbFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGZvciB0aGUgbGluayBsYWJlbCAoci10aGluZykgZm9yIGEgbGluayBiZWluZyB0aGUgc2FtZSBhcyB0aGUgZnJvbSBvciB0byBub2RlIFxyXG4gICAgICAgIC8vIC0gdGhpcyBjYW4gY2F1c2UgaW5maW5pdGUgcmVjdXJzaW9uIGluIHRoaW5rcyBsaWtlIGxheW91dC5nZXRTY2FsZVxyXG4gICAgICAgIF8uZWFjaCh0aGlzLl9kaWFncmFtLm1vZGVsLmxpbmtEYXRhQXJyYXksIChsaW5rRGF0YSwgaW5kZXgsIGxpc3QpID0+IHtcclxuICAgICAgICAgICAgbGV0IGJhZExhYmVsS2V5cyA9IFtdO1xyXG4gICAgICAgICAgICBfLmVhY2gobGlua0RhdGEubGFiZWxLZXlzLCAoa2V5LCBpbmRleDIsIGxpc3QyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBsaW5rRGF0YS5mcm9tIHx8IGtleSA9PT0gbGlua0RhdGEudG8pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbGFiZWxLZXkgc2FtZSBhcyBmcm9tIG9yIHRvIG9mIGxpbms6ICcgKyBrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhZExhYmVsS2V5cy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsaW5rRGF0YS5sYWJlbEtleXMgPSBfLmRpZmZlcmVuY2UobGlua0RhdGEubGFiZWxLZXlzLCBiYWRMYWJlbEtleXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGxvYWRzIG90aGVyIGRhdGEgYmVzaWRlcyB0aGUgZGlhZ3JhbSBtb2RlbCBmcm9tIHRoZSBqc29uIG9iamVjdCByZXR1cm5lZCBieSBtYXBzL3Nob3cuanNvblxyXG4gICAgLy8gLSB0aGlzIGluY2x1ZGVzIHBvaW50cywgYmFkZ2VzLCB2ZXJzaW9ucywgYW5kIG1hcCBhbmFseXRpY3NcclxuICAgIC8vIE5COiBwb2ludHMgYW5kIGJhZGdlcyBhcmUgc2V0IGF0IHBhZ2UgbG9hZCB0aW1lIGluIGxheW91dHMvdXNlciBhbmQgdXNlcnMvYmFkZ2VzLCBidXRcclxuICAgIC8vIHdlIGFsc28gbmVlZCB0byBiZSBhYmxlIHRvIHVwZGF0ZSB0aGVtIGhlcmUgYWZ0ZXIgYW4gYXV0b3NhdmVcclxuXHJcbiAgICAvLyBUT0RPOiBpcyB0aGlzIHN0aWxsIGFsbCBuZWVkZWQgd2l0aCB0aGUgbmV3ZXIgdXNlclByb2ZpbGUgc3R1ZmY/XHJcbiAgICBsb2FkTWFwRXh0cmFEYXRhKG1hcERhdGEpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdtYXAubG9hZE1hcEV4dHJhRGF0YSwgbWFwRGF0YTogJyArIG1hcERhdGEpO1xyXG4gICAgICAgIHRoaXMuX2VkaXRvci5tYXBVc2VyVGFncyA9IG1hcERhdGEubWV0YWRhdGEudXNlclRhZ3M7IC8vIFRPRE86IGlzIHRoaXMgdXNlZCBhbnl3aGVyZT9cclxuXHJcbiAgICAgICAgLy90aGlzLl9lZGl0b3IubWFwLmdldEhpc3RvcnkoKS52ZXJzaW9uTGlzdCA9IG1hcERhdGEudmVyc2lvbnM7XHJcbiAgICAgICAgdGhpcy5nZXRBbmFseXRpY3MoKS5tYXBBbmFseXRpY3MgPSBtYXBEYXRhLmFuYWx5dGljcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBsb2FkcyBtb2RlbCBkYXRhIGZvciBhbiBpbmRpdmlkdWFsIHZlcnNpb24gYW5kIGRpc3BsYXlzIGl0XHJcbiAgICAvLyBOQjogdGhpcyBhbHNvIGRpc2FibGVzIGF1dG9zYXZlOyBsb2FkKCkgbXVzdCBiZSBjYWxsZWQgdG8gcmUtZW5hYmxlIGl0XHJcbiAgICBsb2FkVmVyc2lvbihpZCkge1xyXG4gICAgICAgICRodHRwLmdldCgnL21hcHRoaXMuX3ZlcnNpb25zLycgKyBpZCkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xvYWRlZCBtYXAgdmVyc2lvbiB3aXRoIElEOiAnICsgaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwgPSBnby5Nb2RlbC5mcm9tSnNvbihyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS51bmRvTWFuYWdlci5pc0VuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdXRvc2F2ZS5zYXZlT25Nb2RlbENoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5pc1JlYWRPbmx5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgnQ291bGQgbm90IGxvYWQgTWV0YU1hcCB2ZXJzaW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0IHdoZXRoZXIgZWRpdGluZyBjYXBhYmlsaXR5IGlzIHRlbXBvcmFyaWx5IHN1c3BlbmRlZCAtXHJcbiAgICAvLyB0aGlzIGlzIGRpc3RpbmN0IGZyb20gdGhlIGdsb2JhbCB0aGlzLl9lZGl0b3IuY2FuRWRpdCBzZXR0aW5nLFxyXG4gICAgLy8gd2hpY2ggaWYgZmFsc2UgcHJldmVudHMgZWRpdGluZyBhdCBhbGwgdGltZXNcclxuICAgIHNldEVkaXRpbmdCbG9ja2VkKHZhbCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9lZGl0b3IuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kaWFncmFtLmlzUmVhZE9ubHkgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0gY3JlYXRpbmcgdGhpbmdzIGluIHRoZSBtb2RlbCAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gZGVmYXVsdCBwcm9wZXJ0aWVzIGZvciBhbGwgbmV3IFRoaW5ncyAoZ3JvdXBzKSAtIG5vdGUgdGhhdCB0aGVzZSBjYW4gYmUgb3ZlcnJpZGRlbiBpZiBuZWVkZWRcclxuICAgIGdldE5ld1RoaW5nRGF0YSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0ZXh0OiAnSWRlYScsXHJcbiAgICAgICAgICAgIGlzR3JvdXA6IHRydWUsXHJcbiAgICAgICAgICAgIGxheW91dDogdGhpcy5fdWkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLmRlZmF1bHRUaGluZ0xheW91dCB8fCAnbGVmdCcsXHJcbiAgICAgICAgICAgIHNFeHBhbmRlZDogdHJ1ZSxcclxuICAgICAgICAgICAgcEV4cGFuZGVkOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVTaXN0ZXIodGhpbmcpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2VkaXRvci5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG5ld0xvYyA9IHRoaXMuX2xheW91dHMuZ2V0TmV3U2lzdGVyTG9jYXRpb24odGhpbmcpO1xyXG4gICAgICAgIGxldCBkYXRhID0gXy5leHRlbmQodGhpcy5nZXROZXdUaGluZ0RhdGEoKSwge1xyXG4gICAgICAgICAgICBncm91cDogdGhpbmcuZGF0YS5ncm91cCxcclxuICAgICAgICAgICAgdGV4dDogJ0lkZWEnLFxyXG4gICAgICAgICAgICBsb2M6IGdvLlBvaW50LnN0cmluZ2lmeShuZXdMb2MpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICBsZXQgbmV3U2lzdGVyID0gdGhpcy5fZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XHJcblxyXG4gICAgICAgIC8vIHB1dCBuZXcgc2lzdGVyIHJpZ2h0IGFmdGVyIHRoaW5nIChub3QgYXMgdGhlIGxhc3Qgc2libGluZylcclxuICAgICAgICBpZiAodGhpbmcuY29udGFpbmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW92ZVNpYmxpbmdOZXh0VG8obmV3U2lzdGVyLCB0aGluZywgUklHSFQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3U2lzdGVyO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVJUb1Npc3Rlcih0aGluZykge1xyXG4gICAgICAgIGlmICghdGhpcy5fZWRpdG9yLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGhpbmdLZXkgPSB0aGlzLl9kaWFncmFtLm1vZGVsLmdldEtleUZvck5vZGVEYXRhKHRoaW5nLmRhdGEpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3RoaW5nS2V5OiAnICsgdGhpbmdLZXkpO1xyXG4gICAgICAgIGxldCBuZXdMb2MgPSB0aGlzLl9sYXlvdXRzLmdldE5ld1Npc3RlckxvY2F0aW9uKHRoaW5nLCB0cnVlKTsgLy8gd2l0aFIgPSB0cnVlXHJcbiAgICAgICAgbGV0IGRhdGEgPSBfLmV4dGVuZCh0aGlzLmdldE5ld1RoaW5nRGF0YSgpLCB7XHJcbiAgICAgICAgICAgIGdyb3VwOiB0aGluZy5kYXRhLmdyb3VwLFxyXG4gICAgICAgICAgICB0ZXh0OiAnSWRlYScsXHJcbiAgICAgICAgICAgIGxvYzogZ28uUG9pbnQuc3RyaW5naWZ5KG5ld0xvYylcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLmFkZE5vZGVEYXRhKGRhdGEpO1xyXG4gICAgICAgIGxldCBuZXdTaXN0ZXIgPSB0aGlzLl9kaWFncmFtLmZpbmROb2RlRm9yRGF0YShkYXRhKTtcclxuICAgICAgICBsZXQgZ3JvdXBLZXkgPSB0aGlzLl9kaWFncmFtLm1vZGVsLmdldEtleUZvck5vZGVEYXRhKGRhdGEpO1xyXG5cclxuICAgICAgICAvLyBjcmVhdGUgbGlua1xyXG4gICAgICAgIGxldCBsaW5rRGF0YSA9IHtcclxuICAgICAgICAgICAgZnJvbTogdGhpbmdLZXksXHJcbiAgICAgICAgICAgIHRvOiBncm91cEtleSxcclxuICAgICAgICAgICAgdHlwZTogJ3RvJyxcclxuICAgICAgICAgICAgZnJvbVBvcnQ6ICdSJyxcclxuICAgICAgICAgICAgdG9Qb3J0OiAnUidcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuYWRkTGlua0RhdGEobGlua0RhdGEpO1xyXG5cclxuICAgICAgICAvLyBwdXQgbmV3IHNpc3RlciByaWdodCBhZnRlciB0aGluZyAobm90IGFzIHRoZSBsYXN0IHNpYmxpbmcpXHJcbiAgICAgICAgaWYgKHRoaW5nLmNvbnRhaW5pbmdHcm91cCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVTaWJsaW5nTmV4dFRvKG5ld1Npc3RlciwgdGhpbmcsIFJJR0hUKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld1Npc3RlcjtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVDaGlsZCh0aGluZywgbmFtZSwgeCwgeSkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZWRpdG9yLmNhbkVkaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbmV3TG9jID0gdGhpcy5fbGF5b3V0cy5nZXROZXdDaGlsZExvY2F0aW9uMih0aGluZyk7XHJcbiAgICAgICAgaWYgKHggfHwgeSkge1xyXG4gICAgICAgICAgICBuZXdMb2MgPSBuZXcgZ28uUG9pbnQoeCwgeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBkYXRhID0gXy5leHRlbmQodGhpcy5nZXROZXdUaGluZ0RhdGEoKSwge1xyXG4gICAgICAgICAgICBncm91cDogdGhpbmcuZGF0YS5rZXksXHJcbiAgICAgICAgICAgIHRleHQ6IG5hbWUgfHwgJ1BhcnQnLFxyXG4gICAgICAgICAgICBsb2M6IGdvLlBvaW50LnN0cmluZ2lmeShuZXdMb2MpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICB0aGlzLl9sYXlvdXRzLnNldERlc2NlbmRhbnRMYXlvdXRzKHRoaW5nLCB0aGluZy5kYXRhLmxheW91dCk7XHJcbiAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5fZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XHJcbiAgICAgICAgY2hpbGQudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlUlRoaW5nKGxpbmssIG5hbWUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2VkaXRvci5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NyZWF0ZVJUaGluZywgbGluazogJyArIGxpbmsgKyAnLCBuYW1lOiAnICsgbmFtZSk7XHJcbiAgICAgICAgLy8gZG9uJ3QgYWxsb3cgbXVsdGlwbGUgUi10aGluZ3NcclxuICAgICAgICBpZiAobGluay5pc0xhYmVsZWRMaW5rKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjYW5ub3QgY3JlYXRlIFJUaGluZywgbGluayBpcyBhbHJlYWR5IGxhYmVsZWQnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGRhdGEgPSBfLmV4dGVuZCh0aGlzLmdldE5ld1RoaW5nRGF0YSgpLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IG5hbWUgfHwgJ1JlbGF0aW9uc2hpcCBJZGVhJyxcclxuICAgICAgICAgICAgLy9pc0xpbmtMYWJlbDogdHJ1ZSwgICAgIC8vIGRlcHJlY2F0ZWQgYXMgb2YgZ29KUyAxLjNcclxuICAgICAgICAgICAgY2F0ZWdvcnk6IFwiTGlua0xhYmVsXCIsIC8vIG5ldyBhcyBvZiBnb0pTIDEuM1xyXG4gICAgICAgICAgICBsb2M6ICcwIDAnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKFwiY3JlYXRlIFIgVGhpbmdcIik7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5hZGROb2RlRGF0YShkYXRhKTtcclxuICAgICAgICBsZXQga2V5ID0gdGhpcy5fZGlhZ3JhbS5tb2RlbC5nZXRLZXlGb3JOb2RlRGF0YShkYXRhKTtcclxuICAgICAgICBsZXQgbm9kZSA9IHRoaXMuX2RpYWdyYW0uZmluZFBhcnRGb3JLZXkoa2V5KTtcclxuICAgICAgICBub2RlLmxhYmVsZWRMaW5rID0gbGluaztcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKFwiY3JlYXRlIFIgVGhpbmdcIik7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZGlhZ3JhbS5maW5kTm9kZUZvckRhdGEoZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLSBjcmVhdGluZyB0aGluZ3Mgd2l0aCBzcGVjaWZpZWQgbmFtZXMvbG9jYXRpb25zIC0gZm9yIHVzZSBieSBnZW5lcmF0b3IgYW5kIHRlc3RzIC0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGNyZWF0ZVRoaW5nKHgsIHksIG5hbWUsIGxheW91dCkge1xyXG4gICAgICAgIGxldCBncm91cCA9IHRoaXMuX2RpYWdyYW0udG9vbE1hbmFnZXIuY2xpY2tDcmVhdGluZ1Rvb2wuaW5zZXJ0UGFydChuZXcgZ28uUG9pbnQoeCwgeSkpO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGdyb3VwLmRhdGEsICd0ZXh0JywgbmFtZSk7XHJcbiAgICAgICAgaWYgKGxheW91dCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbGF5b3V0JywgbGF5b3V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgbmFtZSkge1xyXG4gICAgICAgIGxldCBsaW5rID0gdGhpcy5jcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUlRoaW5nKGxpbmssIG5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIGxpbmtEYXRhIG9iamVjdCBmb3IgdGhlIG5ldyBsaW5rXHJcbiAgICBjcmVhdGVSTGluayh0aGluZzEsIHRoaW5nMikge1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbignYWRkIGxpbmsnKTtcclxuICAgICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ25vQXJyb3dzJyxcclxuICAgICAgICAgICAgZnJvbTogdGhpbmcxLmRhdGEua2V5LFxyXG4gICAgICAgICAgICB0bzogdGhpbmcyLmRhdGEua2V5LFxyXG4gICAgICAgICAgICBmcm9tUG9ydDogJ1InLFxyXG4gICAgICAgICAgICB0b1BvcnQ6ICdSJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5hZGRMaW5rRGF0YShkYXRhKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWFncmFtLmZpbmRMaW5rRm9yRGF0YShkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBsaW5rRGF0YSBvYmplY3QgZm9yIHRoZSBuZXcgbGlua1xyXG4gICAgY3JlYXRlUExpbmsodGhpbmcxLCB0aGluZzIpIHtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdub0Fycm93cycsXHJcbiAgICAgICAgICAgIGZyb206IHRoaW5nMS5kYXRhLmtleSxcclxuICAgICAgICAgICAgdG86IHRoaW5nMi5kYXRhLmtleSxcclxuICAgICAgICAgICAgZnJvbVBvcnQ6ICdQJyxcclxuICAgICAgICAgICAgdG9Qb3J0OiAnUCcsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnUCdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuYWRkTGlua0RhdGEoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5jb21taXRUcmFuc2FjdGlvbignYWRkIGxpbmsnKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ3BFeHBhbmRlZCcsIHRydWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWFncmFtLmZpbmRMaW5rRm9yRGF0YShkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tIG1vdmluZyB0aGluZ3MgaW4gdGhlIG1vZGVsIHN0cnVjdHVyZSAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gcmV0dXJucyBhIGdvLkxpc3Qgb2YgdGhlIGl0ZW1zIGluIHRoZSBjdXJyZW50IHNlbGVjdGlvbiB0aGF0IGFyZSBHcm91cHNcclxuICAgIGdldFNlbGVjdGVkR3JvdXBzKCkge1xyXG4gICAgICAgIGxldCBpdCA9IHRoaXMuX2RpYWdyYW0uc2VsZWN0aW9uLml0ZXJhdG9yO1xyXG4gICAgICAgIGxldCBtZW1iZXJzID0gbmV3IGdvLkxpc3QoKTtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIG1lbWJlcnMuYWRkKHBhcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZW1iZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRyYWcgdG8gU1xyXG4gICAgYWRkU2VsZWN0ZWRUaGluZ3NBc0NoaWxkcmVuT2YoZ3JvdXApIHtcclxuICAgICAgICBsZXQgbmV3TWVtYmVycyA9IHRoaXMuZ2V0U2VsZWN0ZWRHcm91cHMoKTtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZXhpc3RpbmcgbWVtYmVycyBzbyB3ZSBjYW4gY2FsY3VsYXRlIGxheW91dFxyXG4gICAgICAgIGxldCBvbGRNZW1iZXJCb3VuZHMgPSB0aGlzLnNhZmVSZWN0KHRoaXMuX2RpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKGdyb3VwLm1lbWJlclBhcnRzKSk7XHJcblxyXG4gICAgICAgIC8vIE5COiB0aGlzIGlzIHN1YmplY3QgdG8gdmFsaWRhdGlvbiBieSBDb21tYW5kSGFuZGxlci5pc1ZhbGlkTWVtYmVyLFxyXG4gICAgICAgIC8vIHNvIGZvciBleGFtcGxlLCBtZW1iZXJzIG9mIG1lbWJlcnMgb2YgbmV3TWVtYmVycyB3aWxsIG5vdCBiZSBhZGRlZCBhcyBtZW1iZXJzXHJcbiAgICAgICAgZ3JvdXAuYWRkTWVtYmVycyhuZXdNZW1iZXJzKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbGF5b3V0cy5sYXlvdXROZXdNZW1iZXJzUmVsYXRpdmVUbyhuZXdNZW1iZXJzLCBncm91cCwgb2xkTWVtYmVyQm91bmRzKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRyYWcgdG8gRFxyXG4gICAgYWRkU2VsZWN0ZWRUaGluZ3NBc1Npc3RlcnNPZihncm91cCkge1xyXG4gICAgICAgIGxldCBvbGRNZW1iZXJzID0gdGhpcy5nZXRTZWxlY3RlZEdyb3VwcygpO1xyXG5cclxuICAgICAgICAvLyBpZiBkcmFnZ2luZyB0byB0b3AgbGV2ZWwsIG1vdmUgZHJhZ2dlZCB0aGluZ3Mgc28gdGhleSBkb24ndCBvdmVybGFwIHRoZSBmb3JtZXIgcGFyZW50XHJcbiAgICAgICAgaWYgKCFncm91cC5jb250YWluaW5nR3JvdXApIHtcclxuICAgICAgICAgICAgLy8gY2hlY2sgZXhpc3RpbmcgbWVtYmVycyBzbyB3ZSBjYW4gY2FsY3VsYXRlIGxheW91dFxyXG4gICAgICAgICAgICBsZXQgb2xkTWVtYmVyc0JvdW5kcyA9IHRoaXMuX2RpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKG9sZE1lbWJlcnMpO1xyXG4gICAgICAgICAgICAvLyBOQjogb2xkTWVtYmVycyBjYW4gYmUgb24gbXVsdGlwbGUgbGV2ZWxzLCBzbyBub3QgY2xlYXIgd2hpY2ggbGV2ZWwgdG8gdXNlIGZvciByZXNjYWxpbmcgb2xkIG1lbWJlcnMgYWZ0ZXIgZHJhZ1xyXG4gICAgICAgICAgICBsZXQgb2xkTWVtYmVyc0xldmVsID0gdGhpcy5fbGF5b3V0cy5jb21wdXRlTGV2ZWwob2xkTWVtYmVycy5maXJzdCgpKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBpdCA9IG9sZE1lbWJlcnMuaXRlcmF0b3I7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBtZW1iZXIgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIG1lbWJlci5jb250YWluaW5nR3JvdXAgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2xheW91dHMubGF5b3V0T2xkTWVtYmVyc091dHNpZGVPZihvbGRNZW1iZXJzLCBncm91cCwgb2xkTWVtYmVyc0JvdW5kcywgb2xkTWVtYmVyc0xldmVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIG5vdCBkcmFnZ2luZyB0byB0b3AgbGV2ZWwsIHBsYWNlIGRyYWdnZWQgdGhpbmdzIGFmdGVyIGZvcm1lciBwYXJlbnQgaW4gb3V0bGluZVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgaXQyID0gb2xkTWVtYmVycy5pdGVyYXRvcjtcclxuICAgICAgICAgICAgd2hpbGUgKGl0Mi5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBtZW1iZXIyID0gaXQyLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbWVtYmVyMi5jb250YWluaW5nR3JvdXAgPSBncm91cC5jb250YWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVTaWJsaW5nTmV4dFRvKG1lbWJlcjIsIGdyb3VwLCBSSUdIVCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBmb3IgZHJhZ2dpbmcgcGFydHMgd2l0aGluIGEgc3lzdGVtIC0gc2lkZSBpcyBMRUZUIG9yIFJJR0hUIChpLmUuIGFib3ZlIG9yIGJlbG93LCByZXNwLiBpbiBpbnZlbnRvcnkgbGF5b3V0KVxyXG4gICAgYWRkU2VsZWN0ZWRUaGluZ0FzT3JkZXJlZFNpc3Rlck9mKGdyb3VwLCBzaWRlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnYWRkU2VsZWN0ZWRUaGluZ0FzT3JkZXJlZFNpc3Rlck9mLCBzaWRlOiAnICsgc2lkZSk7XHJcbiAgICAgICAgbGV0IHRoaW5nID0gdGhpcy5nZXRVbmlxdWVUaGluZ1NlbGVjdGVkKCk7XHJcbiAgICAgICAgaWYgKCF0aGluZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubW92ZVNpYmxpbmdOZXh0VG8odGhpbmcsIGdyb3VwLCBzaWRlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBtb3ZlcyB0aGUgZmlyc3QgdGhpbmcgKHNpYmxpbmcpIHRvIGJlIGFmdGVyIHRoZSBzZWNvbmQgdGhpbmcgKGdyb3VwKVxyXG4gICAgLy8gaW4gdGhlIHBhcnQgb3JkZXJpbmcgLSB0aGV5IGFyZSBhc3N1bWVkIHRvIGJlIHNpYmxpbmdzXHJcbiAgICAvLyBzaWRlIGlzIExFRlQgb3IgUklHSFRcclxuICAgIG1vdmVTaWJsaW5nTmV4dFRvKHNpYmxpbmcsIGdyb3VwLCBzaWRlKSB7XHJcbiAgICAgICAgbGV0IHBhcmVudCA9IGdyb3VwLmNvbnRhaW5pbmdHcm91cDtcclxuICAgICAgICBjb25zb2xlLmxvZygnbW92ZVNpYmxpbmdOZXh0VG8sIHNpYmxpbmc6ICcgKyBzaWJsaW5nICsgJywgZ3JvdXA6ICcgKyBncm91cCArICcsIHBhcmVudDogJyArIHBhcmVudCArICcsIHNpYmxpbmcuY29udGFpbmluZ0dyb3VwOiAnICsgc2libGluZy5jb250YWluaW5nR3JvdXApO1xyXG5cclxuICAgICAgICBpZiAoIXBhcmVudCB8fCBzaWJsaW5nLmNvbnRhaW5pbmdHcm91cCAhPT0gcGFyZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBkbyBtb3ZlU2libGluZ05leHRUbyBvbiBub24tc2libGluZ3Mgb3IgdG9wLWxldmVsIGdyb3VwcycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIG5ldyBtZW1iZXIgb3JkZXJcclxuICAgICAgICBsZXQgbWVtYmVyT3JkZXIgPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIGxldCBpdCA9IHBhcmVudC5tZW1iZXJQYXJ0cztcclxuICAgICAgICBsZXQgb3JkZXIgPSAwO1xyXG4gICAgICAgIHdoaWxlIChpdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgbGV0IG1lbWJlciA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobWVtYmVyIGluc3RhbmNlb2YgZ28uR3JvdXApIHtcclxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIGF0IHRoZSB0YXJnZXQgZ3JvdXAsIHNvIGFkZCB0aGUgbW92ZWQgdGhpbmcgZWl0aGVyIGJlZm9yZSBvciBhZnRlciBpdFxyXG4gICAgICAgICAgICAgICAgaWYgKG1lbWJlciA9PT0gZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA9PT0gTEVGVCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJPcmRlci5hZGQoc2libGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHNpYmxpbmcuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChtZW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShtZW1iZXIuZGF0YSwgJ29yZGVyJywgb3JkZXIrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKG1lbWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG1lbWJlci5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyT3JkZXIuYWRkKHNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzaWJsaW5nLmRhdGEsICdvcmRlcicsIG9yZGVyKyspO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCByZS1hZGQgdGhlIG1vdmVkIHRoaW5nLCBpdCB3YXMgYWRkZWQgYWJvdmVcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1lbWJlciAhPT0gc2libGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlck9yZGVyLmFkZChtZW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG1lbWJlci5kYXRhLCAnb3JkZXInLCBvcmRlcisrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2xlYXIgZXhpc3RpbmcgbWVtYmVyc1xyXG4gICAgICAgIGxldCBuZXdJdCA9IG1lbWJlck9yZGVyLml0ZXJhdG9yO1xyXG4gICAgICAgIHdoaWxlIChuZXdJdC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgbGV0IG1lbWJlcjIgPSBuZXdJdC52YWx1ZTtcclxuICAgICAgICAgICAgbWVtYmVyMi5jb250YWluaW5nR3JvdXAgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWRkIG5ldyBtZW1iZXJzXHJcbiAgICAgICAgbmV3SXQucmVzZXQoKTtcclxuICAgICAgICB3aGlsZSAobmV3SXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBtZW1iZXIzID0gbmV3SXQudmFsdWU7XHJcbiAgICAgICAgICAgIG1lbWJlcjMuY29udGFpbmluZ0dyb3VwID0gcGFyZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRUaGluZ0FzUlRoaW5nKHRoaW5nLCBsaW5rKSB7XHJcbiAgICAgICAgdGhpbmcubGFiZWxlZExpbmsgPSBsaW5rO1xyXG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRCBjb3JuZXIgaGFuZGxlciAoc2luZ2xlIGNsaWNrKVxyXG4gICAgdG9nZ2xlREZsYWcodGhpbmcpIHtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAnZGZsYWcnLCAhdGhpbmcuZGF0YS5kZmxhZyk7XHJcbiAgICAgICAgdGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTIGNvcm5lciBoYW5kbGVyIChzaW5nbGUgY2xpY2spXHJcbiAgICB0b2dnbGVTRXhwYW5zaW9uKHRoaW5nKSB7XHJcbiAgICAgICAgbGV0IGlzRXhwYW5kZWQgPSAhKHRoaW5nLmRhdGEgJiYgIXRoaW5nLmRhdGEuc0V4cGFuZGVkKTsgLy8gZXhwYW5kIGJ5IGRlZmF1bHQgaWYgcHJvcGVydHkgbm90IHByZXNlbnRcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZy5kYXRhLCAnc0V4cGFuZGVkJywgIWlzRXhwYW5kZWQpO1xyXG4gICAgICAgIHRoaW5nLnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5fdWkuc2hvd0Nvcm5lclRpcCh0aGluZywgJ1MnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQIGNvcm5lciBoYW5kbGVyIChzaW5nbGUgY2xpY2spXHJcbiAgICB0b2dnbGVQRXhwYW5zaW9uKHRoaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcuZGF0YSwgJ3BFeHBhbmRlZCcsICF0aGlzLnBJc0V4cGFuZGVkKHRoaW5nKSk7XHJcbiAgICAgICAgdGhpbmcudXBkYXRlVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB0aGlzLl91aS5zaG93Q29ybmVyVGlwKHRoaW5nLCBcIlBcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcElzRXhwYW5kZWQoZ3JvdXApIHtcclxuICAgICAgICByZXR1cm4gZ3JvdXAuZGF0YSAmJiBncm91cC5kYXRhLnBFeHBhbmRlZCA9PT0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHVuZG8vcmVkbyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGNhblVuZG8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIuY2FuVW5kbygpO1xyXG4gICAgfVxyXG5cclxuICAgIHVuZG8oKSB7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5jb21tYW5kSGFuZGxlci51bmRvKCk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhblJlZG8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpYWdyYW0uY29tbWFuZEhhbmRsZXIuY2FuUmVkbygpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZG8oKSB7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5jb21tYW5kSGFuZGxlci5yZWRvKCk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5sYXlvdXREaWFncmFtKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0ubGF5b3V0RGlhZ3JhbSh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tIHV0aWxpdHkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGNoZWNrIGZvciBhIHJlY3Qgd2l0aCBOYU4gWC9ZL1cvSCBjb29yZHMsIHNvIHdlIGNhbiBkbyBzdHVmZiB3aXRoIGl0IHN1Y2ggYXMgdW5pb25SZWN0XHJcbiAgICAvLyAoTmFOLE5hTiwwLDApID0+ICgwLDAsMCwwKVxyXG4gICAgc2FmZVJlY3QocmVjdCkge1xyXG4gICAgICAgIGlmIChpc05hTihyZWN0LngpKSB7XHJcbiAgICAgICAgICAgIHJlY3QueCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05hTihyZWN0LnkpKSB7XHJcbiAgICAgICAgICAgIHJlY3QueSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05hTihyZWN0LndpZHRoKSkge1xyXG4gICAgICAgICAgICByZWN0LndpZHRoID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzTmFOKHJlY3QuaGVpZ2h0KSkge1xyXG4gICAgICAgICAgICByZWN0LmhlaWdodCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gZGVidWcgbWFwIG1vZGVsIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIGxvYWRNb2RlbCgpIHtcclxuICAgICAgICAkKCcjbWFwLW1vZGVsLWRlYnVnJykudmFsKHRoaXMuX2RpYWdyYW0ubW9kZWwudG9Kc29uKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVNb2RlbCgpIHtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsID0gZ28uTW9kZWwuZnJvbUpzb24oJCgnI21hcC1tb2RlbC1kZWJ1ZycpLnZhbCgpKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5hZGRDaGFuZ2VkTGlzdGVuZXIodGhpcy5fYXV0b3NhdmUubW9kZWxDaGFuZ2VkKTtcclxuICAgICAgICB0aGlzLl9hdXRvc2F2ZS5zYXZlT25Nb2RlbENoYW5nZWQgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1hcDtcclxuIiwiY29uc3QgZ28gPSB3aW5kb3cuZ287XHJcblxyXG4vLyBmdW5jdGlvbnMgZm9yIGVkaXRpbmcgcGVyc3BlY3RpdmVzIEFORCBkaXN0aW5jdGlvbnMsIHdoaWNoIHdvcmsgc2ltaWxhcmx5IGluIHRoZSBVSVxyXG5jbGFzcyBQZXJzcGVjdGl2ZXMge1xyXG4gICAgY29uc3RydWN0b3IoZWRpdG9yLCBtYXApIHtcclxuICAgICAgICAvLyB0ZW1wb3Jhcnkgc3RhdGUgZmxhZyBmb3IgYWRkaW5nL3JlbW92aW5nIFAvRCBzZWxlY3Rpb25zIHByb2dyYW1tYXRpY2FsbHlcclxuICAgICAgICB0aGlzLnNlbGVjdGluZ0xpbmtlZFRoaW5ncyA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLl9lZGl0b3IgPSBlZGl0b3I7XHJcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xyXG4gICAgfVxyXG5cclxuICAgIGN1cnJlbnRUYWJDaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ1BlcnNwZWN0aXZlcywgY3VycmVudFRhYkNoYW5nZWQnKTtcclxuICAgICAgICBpZiAobmV3VmFsdWUgPT09IHRoaXMuX21hcC5nZXRVaSgpLlRBQl9JRF9QRVJTUEVDVElWRVMpIHsgLy8gb3BlbmluZyBwZXJzcGVjdGl2ZXNcclxuICAgICAgICAgICAgdGhpcy5zZXRQb3JEVGhpbmcoJ1AnKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLnNldEVkaXRpbmdCbG9ja2VkKHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAob2xkVmFsdWUgPT09IHRoaXMuX21hcC5nZXRVaSgpLlRBQl9JRF9QRVJTUEVDVElWRVMpIHsgLy8gY2xvc2luZyBwZXJzcGVjdGl2ZXNcclxuICAgICAgICAgICAgdGhpcy5zYXZlTGlua3MoJ1AnKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLnNldEVkaXRpbmdCbG9ja2VkKGZhbHNlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlID09PSB0aGlzLl9tYXAuZ2V0VWkoKS5UQUJfSURfRElTVElOQ1RJT05TKSB7IC8vIG9wZW5pbmcgZGlzdGluY3Rpb25zXHJcbiAgICAgICAgICAgIHRoaXMuc2V0UG9yRFRoaW5nKCdEJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5zZXRFZGl0aW5nQmxvY2tlZCh0cnVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9sZFZhbHVlID09PSB0aGlzLl9tYXAuZ2V0VWkoKS5UQUJfSURfRElTVElOQ1RJT05TKSB7IC8vIGNsb3NpbmcgZGlzdGluY3Rpb25zXHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZUxpbmtzKCdEJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5zZXRFZGl0aW5nQmxvY2tlZChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZURpYWdyYW1FdmVudChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoZXZlbnROYW1lID09PSAnQ2hhbmdlZFNlbGVjdGlvbicpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX21hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyh0aGlzLl9tYXAuZ2V0VWkoKS5UQUJfSURfUEVSU1BFQ1RJVkVTKSB8fCB0aGlzLl9tYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXModGhpcy5fbWFwLmdldFVpKCkuVEFCX0lEX0RJU1RJTkNUSU9OUykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGlua3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tIFAvRCBFZGl0b3Igc3RhdGVcclxuXHJcbiAgICBpc0luUE9yREVkaXRvck1vZGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgfHwgdGhpcy5fbWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleTtcclxuICAgIH1cclxuXHJcbiAgICBpc0luUEVkaXRvck1vZGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNJbkRFZGl0b3JNb2RlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5O1xyXG4gICAgfVxyXG5cclxuICAgIGlzUEVkaXRvclBvaW50KGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgPT09IGdyb3VwLmRhdGEua2V5O1xyXG4gICAgfVxyXG5cclxuICAgIGlzREVkaXRvclRoaW5nKGdyb3VwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkgPT09IGdyb3VwLmRhdGEua2V5O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE5COiB0aGlzIGlzIGNhbGxlZCB2aWEgdGhpcy5fbWFwLmdldENvcm5lckZ1bmN0aW9uLCBzbyB3ZSBnZXQgdGhlIGV4dHJhIGNvcm5lciBhcmcsIHdoaWNoIHdlIGNhbiBpZ25vcmVcclxuICAgIHNldFBFZGl0b3JQb2ludCh0aGluZywgY29ybmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2VkaXRvci5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXRVaSgpLm9wZW5UYWIodGhpcy5fbWFwLmdldFVpKCkuVEFCX0lEX1BFUlNQRUNUSVZFUyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldERFZGl0b3JUaGluZyh0aGluZykge1xyXG4gICAgICAgIGlmICh0aGlzLl9lZGl0b3IuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICAvLyBOQjogbmVlZCB0byBzZWxlY3Qgb25seSB0aGlzIHRoaW5nLCBzaW5jZSB0aGlzIGlzIGludm9rZWRcclxuICAgICAgICAgICAgLy8gYnkgYSBjb250cm9sLWNsaWNrLCB3aGljaCB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHNlbGVjdCBqdXN0IGl0XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkuY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgdGhpbmcuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXRVaSgpLm9wZW5UYWIodGhpcy5fbWFwLmdldFVpKCkuVEFCX0lEX0RJU1RJTkNUSU9OUyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgaXNQZXJzcGVjdGl2ZVBvaW50KGdyb3VwKSB7XHJcbiAgICAgICAgdmFyIGxpbmtzID0gZ3JvdXAuZmluZExpbmtzT3V0T2YoKTtcclxuICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT09ICdQJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzU2VsZWN0ZWRQZXJzcGVjdGl2ZVZpZXcoZ3JvdXApIHtcclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NJbnRvKCk7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobGluay5kYXRhLmNhdGVnb3J5ID09PSAnUCcgJiYgdGhpcy5fbWFwLnBJc0V4cGFuZGVkKGxpbmsuZnJvbU5vZGUpICYmIGxpbmsuZnJvbU5vZGUuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVG9nZ2xlZFBlcnNwZWN0aXZlVmlldyhncm91cCkge1xyXG4gICAgICAgIHZhciBsaW5rcyA9IGdyb3VwLmZpbmRMaW5rc0ludG8oKTtcclxuICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT09ICdQJyAmJiB0aGlzLl9tYXAucElzRXhwYW5kZWQobGluay5mcm9tTm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpc01vdXNlT3ZlclBlcnNwZWN0aXZlVmlldyhncm91cCkge1xyXG4gICAgICAgIHZhciBsaW5rcyA9IGdyb3VwLmZpbmRMaW5rc0ludG8oKTtcclxuICAgICAgICB3aGlsZSAobGlua3MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gbGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmRhdGEuY2F0ZWdvcnkgPT09ICdQJyAmJiBsaW5rLmZyb21Ob2RlID09PSB0aGlzLl9tYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFBlcnNwZWN0aXZlVmlld1dlaWdodChncm91cCkge1xyXG4gICAgICAgIHZhciBtb2RlID0gdGhpcy5fbWFwLmdldFVpKCkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLnBlcnNwZWN0aXZlTW9kZTtcclxuICAgICAgICBpZiAobW9kZSA9PT0gJ3Nwb3RsaWdodCcgfHwgbW9kZSA9PT0gJ2JvdGgnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5pc1NlbGVjdGVkUGVyc3BlY3RpdmVWaWV3KGdyb3VwKSA/IDEgOiAwKSArXHJcbiAgICAgICAgICAgICAgICAodGhpcy5pc1RvZ2dsZWRQZXJzcGVjdGl2ZVZpZXcoZ3JvdXApID8gMSA6IDApICtcclxuICAgICAgICAgICAgICAgICh0aGlzLmlzTW91c2VPdmVyUGVyc3BlY3RpdmVWaWV3KGdyb3VwKSA/IDEgOiAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBjYXRlZ29yeSBpcyBcIlBcIiBvciBcIkRcIiAocGVyc3BlY3RpdmVzIG9yIGRpc3RpbmN0aW9ucylcclxuICAgIHNldFBvckRUaGluZyhjYXRlZ29yeSkge1xyXG4gICAgICAgIC8vIGlmIGFscmVhZHkgc2V0LCBtdXN0IGRvIHNhdmUgcGVyc3BlY3RpdmVzIG9yIHNhdmUgZGlzdGluY3Rpb25zXHJcbiAgICAgICAgaWYgKHRoaXMuX21hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgfHwgdGhpcy5fbWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgdGhpbmcgPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLnNlbGVjdGlvbi5maXJzdCgpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NldFBvckRUaGluZzogJyArIHRoaW5nKTtcclxuICAgICAgICBpZiAodGhpbmcgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpbmcuZGF0YS5rZXk7XHJcbiAgICAgICAgICAgIGlmIChjYXRlZ29yeSA9PT0gXCJQXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkgPSBrZXk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2F0ZWdvcnkgPT09IFwiRFwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5ID0ga2V5O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzZWxlY3Qgdmlld3Mvb3RoZXJzXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TGlua2VkVGhpbmdzRm9yKHRoaW5nLCBjYXRlZ29yeSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIHNlbGVjdGlvbiBjaGFuZ2VzIC0gaWYgdGhlIHRoaW5nIGlzIHNldCxcclxuICAgIC8vIGFkZHMvcmVtb3ZlcyBEL1AgbGlua3MgYWNjb3JkaW5nIHRvIHdoYXQgaXMgc2VsZWN0ZWQ7IG90aGVyd2lzZVxyXG4gICAgLy8ganVzdCBzaG93cy9oaWRlcyBEL1AgbGlua3MgZm9yIHRoZSBzZWxlY3RlZCB0aGluZyhzKVxyXG4gICAgdXBkYXRlTGlua3MoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW5nTGlua2VkVGhpbmdzKSAvLyBzZWxlY3Rpb24gaXMgYmVpbmcgY2hhbmdlZCBwcm9ncmFtbWF0aWNhbGx5LCBzbyBkb24ndCByZXNwb25kXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdmFyIHBPckRUaGluZyA9IG51bGw7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5ID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5fbWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSkge1xyXG4gICAgICAgICAgICBwT3JEVGhpbmcgPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLmZpbmROb2RlRm9yS2V5KHRoaXMuX21hcC5nZXRVaSgpLnN0YXRlLnBlcnNwZWN0aXZlUG9pbnRLZXkpO1xyXG4gICAgICAgICAgICBjYXRlZ29yeSA9IFwiUFwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fbWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSkge1xyXG4gICAgICAgICAgICBwT3JEVGhpbmcgPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLmZpbmROb2RlRm9yS2V5KHRoaXMuX21hcC5nZXRVaSgpLnN0YXRlLmRpc3RpbmN0aW9uVGhpbmdLZXkpO1xyXG4gICAgICAgICAgICBjYXRlZ29yeSA9IFwiRFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFkZExpbmtzVG8gPSBuZXcgZ28uTGlzdCgpO1xyXG4gICAgICAgIHZhciByZW1vdmVMaW5rcyA9IG5ldyBnby5MaXN0KCk7XHJcblxyXG4gICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBhbGwgdGhpbmdzXHJcbiAgICAgICAgaWYgKGNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgIHZhciBsYXllcnMgPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLmxheWVycztcclxuICAgICAgICAgICAgd2hpbGUgKGxheWVycy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVycy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGxheWVyLnBhcnRzO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHBhcnRzLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHMudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgbGlua3MgdG8gYWRkL3JlbW92ZSBiYXNlZCBvbiBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBPckRUaGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmtzID0gcGFydC5maW5kTGlua3NJbnRvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdMaW5rID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rLmZyb21Ob2RlLmRhdGEua2V5ID09PSBwT3JEVGhpbmcuZGF0YS5rZXkgJiYgbGluay5kYXRhLmNhdGVnb3J5ID09PSBjYXRlZ29yeSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdMaW5rID0gbGluaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWNpZGUgd2hldGhlciB0byBhZGQgb3IgcmVtb3ZlIGEgbGluayB0byB0aGUgcGFydCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCBpcyBzZWxlY3RlZCBhbmQgd2hldGhlciBhIGxpbmsgZXhpc3RzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nTGluayAmJiBwYXJ0LmlzU2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTGlua3NUby5hZGQocGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChleGlzdGluZ0xpbmsgJiYgIXBhcnQuaXNTZWxlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVMaW5rcy5hZGQoZXhpc3RpbmdMaW5rKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZG8gdGhlIGFkZGluZy9yZW1vdmluZyBvZiBsaW5rc1xyXG4gICAgICAgIHZhciBhZGRzID0gYWRkTGlua3NUby5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoYWRkcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKCdhZGQgbGluaycpO1xyXG4gICAgICAgICAgICB2YXIgdG8gPSBhZGRzLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndXBkYXRlTGlua3M6IGFkZGluZyBsaW5rIGZyb20gJyArIHBPckRUaGluZyArICcgdG8gJyArIHRvKTtcclxuICAgICAgICAgICAgaWYgKGNhdGVnb3J5ID09PSBcIkRcIiAmJiBwT3JEVGhpbmcuZGF0YS5rZXkgPT09IHRvLmRhdGEua2V5KSB7XHJcbiAgICAgICAgICAgICAgICBwT3JEVGhpbmcuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJZb3UgY2FuJ3QgZGlzdGluZ3Vpc2ggYSB0aGluZyBmcm9tIGl0c2VsZiFcIik7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLm1vZGVsLmFkZExpbmtEYXRhKHtcclxuICAgICAgICAgICAgICAgIGZyb206IHBPckRUaGluZy5kYXRhLmtleSxcclxuICAgICAgICAgICAgICAgIHRvOiB0by5kYXRhLmtleSxcclxuICAgICAgICAgICAgICAgIGZyb21Qb3J0OiBjYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgIHRvUG9ydDogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oJ2FkZCBsaW5rJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZW1vdmVzID0gcmVtb3ZlTGlua3MuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKHJlbW92ZXMubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIHZhciByZW1vdmUgPSByZW1vdmVzLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndXBkYXRlTGlua3M6IHJlbW92aW5nIGxpbmsgZnJvbSAnICsgcmVtb3ZlLmZyb21Ob2RlICsgJyB0byAnICsgcmVtb3ZlLnRvTm9kZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkubW9kZWwuc3RhcnRUcmFuc2FjdGlvbigncmVtb3ZlIGxpbmsnKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5yZW1vdmUocmVtb3ZlKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5tb2RlbC5yZW1vdmVMaW5rRGF0YShyZW1vdmUuZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkubW9kZWwuY29tbWl0VHJhbnNhY3Rpb24oJ3JlbW92ZSBsaW5rJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzaG93IGxpbmtzXHJcbiAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVMaW5rcyhjYXRlZ29yeSkge1xyXG4gICAgICAgIHZhciBwT3JEVGhpbmcgPSBudWxsO1xyXG4gICAgICAgIGlmIChjYXRlZ29yeSA9PT0gXCJQXCIpIHtcclxuICAgICAgICAgICAgcE9yRFRoaW5nID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKS5maW5kTm9kZUZvcktleSh0aGlzLl9tYXAuZ2V0VWkoKS5zdGF0ZS5wZXJzcGVjdGl2ZVBvaW50S2V5KTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldFVpKCkuc3RhdGUucGVyc3BlY3RpdmVQb2ludEtleSA9IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjYXRlZ29yeSA9PT0gXCJEXCIpIHtcclxuICAgICAgICAgICAgcE9yRFRoaW5nID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKS5maW5kTm9kZUZvcktleSh0aGlzLl9tYXAuZ2V0VWkoKS5zdGF0ZS5kaXN0aW5jdGlvblRoaW5nS2V5KTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldFVpKCkuc3RhdGUuZGlzdGluY3Rpb25UaGluZ0tleSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdExpbmtlZFRoaW5nc0Zvcihncm91cCwgY2F0ZWdvcnkpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGluZ0xpbmtlZFRoaW5ncyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5jbGVhclNlbGVjdGlvbigpO1xyXG5cclxuICAgICAgICB2YXIgbGlua3MgPSBncm91cC5maW5kTGlua3NPdXRPZigpO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSBsaW5rcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGxpbmsuZGF0YS5jYXRlZ29yeSA9PT0gY2F0ZWdvcnkpXHJcbiAgICAgICAgICAgICAgICBsaW5rLnRvTm9kZS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0aW5nTGlua2VkVGhpbmdzID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUGVyc3BlY3RpdmVzO1xyXG4iLCJjb25zdCBnbyA9IHdpbmRvdy5nbztcclxuY29uc3QgU0xJREVfQkxPQ0tFUl9XSURUSCA9IDEwMDA7XHJcbmNvbnN0IFNMSURFX0JMT0NLRVJfQ09MT1IgPSBcIiNmZmZcIjtcclxuY29uc3QgU0xJREVfQkxPQ0tFUl9PUEFDSVRZID0gMC45O1xyXG5cclxuLy8gZnVuY3Rpb25zIGZvciB0aGUgcHJlc2VudGVyL3NsaWRlc1xyXG5jbGFzcyBQcmVzZW50ZXIge1xyXG4gICAgY29uc3RydWN0b3IoZWRpdG9yLCBtYXApIHtcclxuICAgICAgICB0aGlzLl9lZGl0b3IgPSBlZGl0b3I7XHJcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnRTbGlkZUluZGV4ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmlzUHJlc2VudGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2hvd1RPQyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNDcmVhdGluZ1RodW1ibmFpbCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBtYXNrIGFwcGxpZWQgYXJvdW5kIHNsaWRlIHJlZ2lvbiB3aGVuIHByZXNlbnRpbmdcclxuICAgICAgICB0aGlzLnNsaWRlQmxvY2tlciA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuZGlhZ3JhbUFzcGVjdFJhdGlvID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gTkI6IGhhc0xpbmtzIGNhbiBoYXZlIHZhbHVlcyBmYWxzZSwgMSwgb3IgdHJ1ZSAoMSBtZWFucyBvbmx5IGEgc2luZ2xlIGxpbmspXHJcbiAgICAgICAgdGhpcy5zbGlkZVR5cGVzID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnVElUTEVfQk9EWScsIGxhYmVsOiAnVGl0bGUgYW5kIEJvZHknLFxyXG4gICAgICAgICAgICAgICAgaGFzVGl0bGU6IHRydWUsIGhhc05vdGVzOiB0cnVlLCBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IGZhbHNlLCBoYXNNYXBTdW1tYXJ5OiBmYWxzZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdUSVRMRV9CT0RZX01BUCcsIGxhYmVsOiAnVGl0bGUsIEJvZHkgYW5kIE1ldGFNYXAnLFxyXG4gICAgICAgICAgICAgICAgaGFzVGl0bGU6IHRydWUsIGhhc05vdGVzOiB0cnVlLCBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IHRydWUsIGhhc01hcFN1bW1hcnk6IGZhbHNlLCBoYXNMaW5rczogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ0FDVElWSVRZX01BUCcsIGxhYmVsOiAnTGVzc29uIEFjdGl2aXR5IGFuZCBNZXRhTWFwJyxcclxuICAgICAgICAgICAgICAgIGhhc1RpdGxlOiB0cnVlLCBoYXNOb3RlczogdHJ1ZSwgaGFzQ2hlY2tzOiB0cnVlLCBoYXNNYXBSZWdpb246IHRydWUsIGhhc01hcFN1bW1hcnk6IGZhbHNlLCBoYXNMaW5rczogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnTUFQX09OTFknLCBsYWJlbDogJ01ldGFNYXAgb25seScsXHJcbiAgICAgICAgICAgICAgICBoYXNUaXRsZTogdHJ1ZSwgaGFzTm90ZXM6IGZhbHNlLCBoYXNDaGVja3M6IGZhbHNlLCBoYXNNYXBSZWdpb246IHRydWUsIGhhc01hcFN1bW1hcnk6IGZhbHNlLCBoYXNMaW5rczogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ01BUF9TVU1NQVJZJywgbGFiZWw6ICdNZXRhTWFwIFN1bW1hcnknLFxyXG4gICAgICAgICAgICAgICAgaGFzVGl0bGU6IGZhbHNlLCBoYXNOb3RlczogZmFsc2UsIGhhc0NoZWNrczogZmFsc2UsIGhhc01hcFJlZ2lvbjogdHJ1ZSwgaGFzTWFwU3VtbWFyeTogdHJ1ZSwgaGFzTGlua3M6IGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0gbGluay9hdHRhY2htZW50IHR5cGVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgdGhpcy5saW5rVHlwZXMgPSBbXHJcbiAgICAgICAgICAgIHsgbmFtZTogJycsIGxhYmVsOiAnLS0gU2VsZWN0IGF0dGFjaG1lbnQgdHlwZSAtLScgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnV0VCJywgbGFiZWw6ICdXZWIgUGFnZScgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnUERGJywgbGFiZWw6ICdQREYnIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ0RPQycsIGxhYmVsOiAnRG9jdW1lbnQnIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ1NQUkVBRFNIRUVUJywgbGFiZWw6ICdTcHJlYWRzaGVldCcgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnUFJFU0VOVEFUSU9OJywgbGFiZWw6ICdQcmVzZW50YXRpb24nIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ01FVEFNQVAnLCBsYWJlbDogJ01ldGFNYXAnIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ0lNQUdFJywgbGFiZWw6ICdJbWFnZScgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnQVVESU8nLCBsYWJlbDogJ0F1ZGlvJyB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdWSURFTycsIGxhYmVsOiAnVmlkZW8nIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ1NVUlZFWScsIGxhYmVsOiAnU3VydmV5JyB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdXT1JLU0hFRVQnLCBsYWJlbDogJ1dvcmtzaGVldCcgfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLSBsaXN0IG9mIGFsbCB0aGluZ3MgaW4gdGhlIG1hcCwgZm9yIG1hcCBzdW1tYXJ5IHNsaWRlcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICB0aGlzLmlkZWFMaXN0ID0gJyc7XHJcblxyXG4gICAgICAgIHRoaXMuc3VtbWFyeUFuYWx5dGljcyA9IFtcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9USElOR1MnLCBzaW5ndWxhckxhYmVsOiAnRGlzdGluY3Rpb24nLCBwbHVyYWxMYWJlbDogJ0Rpc3RpbmN0aW9ucycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9TWVNURU1TJywgc2luZ3VsYXJMYWJlbDogJ1N5c3RlbScsIHBsdXJhbExhYmVsOiAnU3lzdGVtcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9SRUxBVElPTlNISVBTJywgc2luZ3VsYXJMYWJlbDogJ1JlbGF0aW9uc2hpcCcsIHBsdXJhbExhYmVsOiAnUmVsYXRpb25zaGlwcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9QRVJTUEVDVElWRVMnLCBzaW5ndWxhckxhYmVsOiAnUGVyc3BlY3RpdmUnLCBwbHVyYWxMYWJlbDogJ1BlcnNwZWN0aXZlcycgfSxcclxuICAgICAgICB7IG5hbWU6ICdDT1VOVF9SVEhJTkdTJywgc2luZ3VsYXJMYWJlbDogJ1JlbGF0aW9uc2hpcCBJZGVhJywgcGx1cmFsTGFiZWw6ICdSZWxhdGlvbnNoaXAgSWRlYXMnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfU1lTVEVNX1JUSElOR1MnLCBzaW5ndWxhckxhYmVsOiAnUmVsYXRpb25zaGlwIFN5c3RlbScsIHBsdXJhbExhYmVsOiAnUmVsYXRpb25zaGlwIFN5c3RlbXMnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfU1lTVEVNX1BFUlNQRUNUSVZFUycsIHNpbmd1bGFyTGFiZWw6ICdQZXJzcGVjdGl2ZSBTeXN0ZW0nLCBwbHVyYWxMYWJlbDogJ1BlcnNwZWN0aXZlIFN5c3RlbXMnIH0sXHJcbiAgICAgICAgeyBuYW1lOiAnQ09VTlRfRElTVElOQ1RJT05TJywgc2luZ3VsYXJMYWJlbDogJ0FkdmFuY2VkIERpc3RpbmN0aW9uJywgcGx1cmFsTGFiZWw6ICdBZHZhbmNlZCBEaXN0aW5jdGlvbnMnIH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICB0aGlzLnRodW1ibmFpbENhY2hlID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgYXV0b3NhdmUoKSB7XHJcbiAgICAgICAgdGhpcy5fbWFwLmdldEF1dG9zYXZlKCkuc2F2ZSgnZWRpdF9wcmVzZW50ZXInKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tIGVkaXRpbmcgZnVuY3Rpb25zIGZvciBkaWZmZXJlbnQgc2xpZGUgdHlwZXMgLS0tLS0tLS0tLS0tLVxyXG5cclxuXHJcblxyXG4gICAgLy8gb25seSBjYWxsIHRoaXMgb2NjYXNpb25hbGx5LCBhcyB0aGV5IHdvbid0IGJlIGVkaXRpbmcgdGhlIG1hcCB3aGlsZSBwcmVzZW50ZXIgaXMgb3BlblxyXG4gICAgdXBkYXRlSWRlYUxpc3QoKSB7XHJcbiAgICAgICAgbGV0IG5vZGVzID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKS5ub2RlcztcclxuICAgICAgICBsZXQgbGlzdCA9IFtdO1xyXG4gICAgICAgIHdoaWxlIChub2Rlcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgaWYgKChub2Rlcy52YWx1ZSBpbnN0YW5jZW9mIGdvLkdyb3VwKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdC5wdXNoKG5vZGVzLnZhbHVlLmRhdGEudGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGlzdC5zb3J0KCk7XHJcblxyXG4gICAgICAgIC8vIGZpbHRlciBvdXQgcGxhY2Vob2xkZXIgbmFtZXMgLSBzZWUgdGhpcy5fbWFwLmpzOmdldE5ld1RoaW5nRGF0YSwgY3JlYXRlU2lzdGVyLCBldGMuXHJcbiAgICAgICAgbGlzdCA9IF8uZGlmZmVyZW5jZShfLnVuaXEobGlzdCwgdHJ1ZSksXHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXRHZW5lcmF0b3IoKS5nZXRQbGFjZWhvbGRlcklkZWFOYW1lcygpLFxyXG4gICAgICAgICAgICBbJ05ldyBJZGVhJywgJ05ldyBEaXN0aW5ndWlzaGVkIElkZWEnLCAnTmV3IFJlbGF0ZWQgSWRlYScsICdOZXcgUmVsYXRpb25zaGlwIElkZWEnLCAnTmV3IFBhcnQgSWRlYScsXHJcbiAgICAgICAgICAgICAnSWRlYScsICdQYXJ0JywgJ1JlbGF0aW9uc2hpcCBJZGVhJ10gLy8gbmV3ZXIgc2ltcGxpZmllZCBuYW1lc1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuaWRlYUxpc3QgPSBsaXN0LmpvaW4oJywgJyk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBhZGRDaGVjayhub2RlRGF0YSkge1xyXG4gICAgICAgIG5vZGVEYXRhLmNoZWNrcy5wdXNoKHsgdGV4dDogJycgfSk7XHJcbiAgICAgICAgdGhpcy5hdXRvc2F2ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNoZWNrKGNoZWNrLCBub2RlRGF0YSkge1xyXG4gICAgICAgIGxldCBpID0gXy5pbmRleE9mKG5vZGVEYXRhLmNoZWNrcywgY2hlY2spO1xyXG4gICAgICAgIG5vZGVEYXRhLmNoZWNrcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgdGhpcy5hdXRvc2F2ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZExpbmsobm9kZURhdGEpIHtcclxuICAgICAgICBub2RlRGF0YS5saW5rcy5wdXNoKHsgdGl0bGU6ICcnLCB1cmw6ICcnLCB0eXBlOiAnJyB9KTtcclxuICAgICAgICB0aGlzLmF1dG9zYXZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlTGluayhsaW5rLCBub2RlRGF0YSkge1xyXG4gICAgICAgIGxldCBpID0gXy5pbmRleE9mKG5vZGVEYXRhLmxpbmtzLCBsaW5rKTtcclxuICAgICAgICBub2RlRGF0YS5saW5rcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgdGhpcy5hdXRvc2F2ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZVRPQygpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1ByZXNlbnRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93VE9DID0gIXRoaXMuc2hvd1RPQztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTkI6IGNhbid0IGNyZWF0ZSB0aGlzIGluIGluaXQgYXMgdGhlIGRpYWdyYW0gZG9lc24ndCBleGlzdCB5ZXQuLi5cclxuICAgIG1heWJlSW5pdFNsaWRlQmxvY2tlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2xpZGVCbG9ja2VyKSB7XHJcbiAgICAgICAgICAgIGxldCBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVCbG9ja2VyID0gbWsoZ28uTm9kZSwgZ28uUGFuZWwuQXV0byxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllck5hbWU6ICdUb29sJyxcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBTTElERV9CTE9DS0VSX09QQUNJVFlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtayhnby5TaGFwZSwgXCJSZWN0YW5nbGVcIixcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogU0xJREVfQkxPQ0tFUl9DT0xPUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDEwMDBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkuYWRkKHRoaXMuc2xpZGVCbG9ja2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2FsbGVkIHdoZW4gYSB0YWIgaXMgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKG9sZFZhbHVlID09PSB0aGlzLl9tYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSB7IC8vIGNsb3NpbmcgdGFiXHJcbiAgICAgICAgICAgIHRoaXMuc3RvcFByZXNlbnRpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobmV3VmFsdWUgPT09IHRoaXMuX21hcC5nZXRVaSgpLlRBQl9JRF9QUkVTRU5URVIpIHsgLy8gb3BlbmluZyB0YWJcclxuICAgICAgICAgICAgLy8gc2hvdyBzbGlkZXMgKHNlZSBsYXlvdXRzLnNsaWRlVGVtcGxhdGUsIGJpbmRpbmcgb2YgdmlzaWJsZSBhdHRyKVxyXG4gICAgICAgICAgICB0aGlzLmRpYWdyYW1Bc3BlY3RSYXRpbyA9ICQoJyNkaWFncmFtJykud2lkdGgoKSAvICQoJyNkaWFncmFtJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkaWFncmFtQXNwZWN0UmF0aW86ICcgKyB0aGlzLmRpYWdyYW1Bc3BlY3RSYXRpbyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSWRlYUxpc3QoKTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRTbGlkZUluZGV4ICYmIHRoaXMuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTbGlkZUluZGV4ID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNsaWRlVGh1bWJuYWlsU2VsZWN0ZWQoMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZURpYWdyYW1FdmVudChldmVudE5hbWUsIGUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX21hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyh0aGlzLl9tYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZXZlbnROYW1lID09PSAnU2VsZWN0aW9uRGVsZXRpbmcnKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3Rpb24gPSBlLnN1YmplY3Q7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb24uY291bnQgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZyA9IHNlbGVjdGlvbi5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaW5nIGluc3RhbmNlb2YgZ28uTm9kZSAmJiB0aGluZy5kYXRhLmNhdGVnb3J5ID09PSAnc2xpZGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maXJtKFwiRGVsZXRlIHRoaXMgc2xpZGUgZnJvbSB0aGUgcHJlc2VudGF0aW9uP1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLmNhbmNlbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50TmFtZSA9PT0gJ1NlbGVjdGlvbkRlbGV0ZWQnKSB7XHJcbiAgICAgICAgICAgIC8vIGlmIHNsaWRlIGlzIGRlbGV0ZWQgZnJvbSBjYW52YXMgcmF0aGVyIHRoYW4gYnkgdGh1bWJuYWlsIHggYnV0dG9uLCBuZWVkIHRvIHVwZGF0ZSBpbmRleGVzXHJcbiAgICAgICAgICAgIHRoaXMuY29tcGFjdFNsaWRlSW5kZXhlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldmVudE5hbWUgPT09ICdTZWxlY3Rpb25Nb3ZlZCcgfHwgZXZlbnROYW1lID09PSAnUGFydFJlc2l6ZWQnKSB7XHJcbiAgICAgICAgICAgIC8vIGNsZWFyIHRodW1ibmFpbCBjYWNoZVxyXG4gICAgICAgICAgICB0aGlzLnRodW1ibmFpbENhY2hlID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50TmFtZSA9PT0gJ1ZpZXdwb3J0Qm91bmRzQ2hhbmdlZCcpIHtcclxuICAgICAgICAgICAgLy8gYWRqdXN0IHpvb21pbmcgb2YgbWFwIHJlZ2lvblxyXG4gICAgICAgICAgICAvL3RoaXMud2luZG93UmVzaXplZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCB3aW5kb3dSZXNpemVkKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fd2luZG93UmVzaXplZCkge1xyXG4gICAgICAgICAgICB0aGlzLl93aW5kb3dSZXNpemVkID0gXy5kZWJvdW5jZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlVGh1bWJuYWlsU2VsZWN0ZWQodGhpcy5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fd2luZG93UmVzaXplZDtcclxuICAgIH1cclxuICAgIHNob3dTaWRlYmFyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXModGhpcy5fbWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUikgJiYgKCF0aGlzLmlzUHJlc2VudGluZyB8fCB0aGlzLnNob3dUT0MpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc2FibGVNYXBUb29sYmFyQnV0dG9ucygpIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuX21hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyh0aGlzLl9tYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKVxyXG4gICAgICAgICAgICB8fCB0aGlzLmlzUHJlc2VudGluZ1xyXG4gICAgICAgICAgICB8fCAhdGhpcy5nZXRDdXJyZW50U2xpZGVUeXBlKCkuaGFzTWFwUmVnaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJldHVybnMgYW4gYXJyYXkgb2Ygbm9kZSBkYXRhIG9iamVjdHMgKG5vdCB0aGUgc2xpZGUgbm9kZXMgdGhlbXNlbHZlcylcclxuICAgIGdldFNsaWRlTm9kZURhdGFzKCkge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBsZXQgbm9kZXMgPSBkaWFncmFtLm1vZGVsLm5vZGVEYXRhQXJyYXk7XHJcbiAgICAgICAgbGV0IG5vZGVEYXRhcyA9IF8uZmlsdGVyKG5vZGVzLCAobm9kZSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZS5jYXRlZ29yeSA9PT0gJ3NsaWRlJztcclxuICAgICAgICB9KTtcclxuICAgICAgICBub2RlRGF0YXMgPSBfLnNvcnRCeShub2RlRGF0YXMsIChub2RlRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZURhdGEuaW5kZXg7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2xpZGVOb2RlRGF0YXMsIGluZGV4ZXM6ICcgKyBfLnBsdWNrKHNsaWRlc0RhdGEsICdpbmRleCcpKTtcclxuICAgICAgICByZXR1cm4gbm9kZURhdGFzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNsaWRlQ291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2xpZGVOb2RlRGF0YXMoKS5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWN0aXZpdHlTbGlkZUNvdW50KCkge1xyXG4gICAgICAgIHJldHVybiBfLndoZXJlKHRoaXMuZ2V0U2xpZGVOb2RlRGF0YXMoKSwgeyB0eXBlOiAnQUNUSVZJVFlfTUFQJyB9KS5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2xpZGVUeXBlKHR5cGVOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIF8uZmluZFdoZXJlKHRoaXMuc2xpZGVUeXBlcywgeyBuYW1lOiB0eXBlTmFtZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXJyZW50U2xpZGVUeXBlKCkge1xyXG4gICAgICAgIGxldCBzbGlkZSA9IHRoaXMuZmluZFNsaWRlQnlJbmRleCh0aGlzLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF8uZmluZFdoZXJlKHRoaXMuc2xpZGVUeXBlcywgeyBuYW1lOiBzbGlkZS5kYXRhLnR5cGUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpIHtcclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgbGV0IHNsaWRlRGF0YSA9IF8uZmluZCh0aGlzLmdldFNsaWRlTm9kZURhdGFzKCksIChzbGlkZURhdGEpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHNsaWRlRGF0YS5pbmRleCA9PT0gaW5kZXg7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHNsaWRlRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZGlhZ3JhbS5maW5kTm9kZUZvcktleShzbGlkZURhdGEua2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGluY3JlbWVudCBpcyAtMSBvciArMVxyXG4gICAgbW92ZVNsaWRlKGluZGV4LCBpbmNyZW1lbnQpIHtcclxuXHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGxldCBzbGlkZSA9IHRoaXMuZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcbiAgICAgICAgbGV0IG5laWdoYm9yID0gdGhpcy5maW5kU2xpZGVCeUluZGV4KGluZGV4ICsgaW5jcmVtZW50KTtcclxuICAgICAgICBpZiAoc2xpZGUgJiYgbmVpZ2hib3IpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbW92ZVNsaWRlOiBzd2FwcGluZyAnICsgc2xpZGUuZGF0YS5rZXkgKyAnIHdpdGggJyArIG5laWdoYm9yLmRhdGEua2V5KTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwibW92ZSBzbGlkZVwiKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2xpZGUuZGF0YSwgJ2luZGV4Jywgc2xpZGUuZGF0YS5pbmRleCArIGluY3JlbWVudCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KG5laWdoYm9yLmRhdGEsICdpbmRleCcsIG5laWdoYm9yLmRhdGEuaW5kZXggLSBpbmNyZW1lbnQpO1xyXG4gICAgICAgICAgICBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwibW92ZSBzbGlkZVwiKTtcclxuICAgICAgICAgICAgdGhpcy50aHVtYm5haWxDYWNoZSA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgY29tcGFjdFNsaWRlSW5kZXhlcygpIHtcclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnY29tcGFjdFNsaWRlSW5kZXhlcycpO1xyXG4gICAgICAgIGxldCBzbGlkZXNEYXRhID0gdGhpcy5nZXRTbGlkZU5vZGVEYXRhcygpO1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBsZXQgbmV3SW5kZXggPSAxO1xyXG4gICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcImNvbXBhY3Qgc2xpZGUgaW5kZXhlc1wiKTtcclxuICAgICAgICBfLmVhY2goc2xpZGVzRGF0YSwgKHNsaWRlRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShzbGlkZURhdGEsICdpbmRleCcsIG5ld0luZGV4KTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY29tcGFjdFNsaWRlSW5kZXhlczogc2V0IGluZGV4IGZvciAnICsgc2xpZGVEYXRhLmtleSArICcgdG8gJyArIG5ld0luZGV4KTtcclxuICAgICAgICAgICAgbmV3SW5kZXgrKztcclxuICAgICAgICB9KTtcclxuICAgICAgICBkaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKFwiY29tcGFjdCBzbGlkZSBpbmRleGVzXCIpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXROZXdTbGlkZUtleSgpIHtcclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgbGV0IGkgPSAxO1xyXG4gICAgICAgIHdoaWxlIChkaWFncmFtLm1vZGVsLmZpbmROb2RlRGF0YUZvcktleSgnc2xpZGUtJyArIGkpKSB7XHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICdzbGlkZS0nICsgaTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBOQjogaW5kZXhlcyAoYW5kIGtleXM/KSBtdXN0IGJlIDEtYmFzZWQsIG90aGVyd2lzZSBmaXJzdCBzbGlkZSBnZXRzIHNjcmV3ZWQgdXBcclxuICAgIC8vIChzb21ld2hlcmUgdGhlIGluZGV4IHNob3dzIHVwIGFzICcnIGluc3RlYWQgb2YgMClcclxuICAgIGdldE5ld1NsaWRlSW5kZXgoKSB7XHJcbiAgICAgICAgbGV0IHNsaWRlcyA9IHRoaXMuZ2V0U2xpZGVOb2RlRGF0YXMoKTtcclxuICAgICAgICByZXR1cm4gc2xpZGVzLmxlbmd0aCArIDE7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkU2xpZGUodHlwZU5hbWUpIHtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ2FkZFNsaWRlOiAnICsgdHlwZU5hbWUpO1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuXHJcbiAgICAgICAgbGV0IGRiID0gdGhpcy5fbWFwLmNvbXB1dGVNYXBCb3VuZHMoKTtcclxuICAgICAgICBkYi5pbmZsYXRlKGRiLndpZHRoIC8gMjAsIGRiLmhlaWdodCAvIDEwKTtcclxuICAgICAgICBsZXQgbmV3TG9jID0gZGIueCArICcgJyArIGRiLnk7XHJcbiAgICAgICAgbGV0IG5ld0luZGV4ID0gdGhpcy5nZXROZXdTbGlkZUluZGV4KCk7XHJcblxyXG4gICAgICAgIGxldCBzbGlkZVR5cGUgPSBfLmZpbmRXaGVyZSh0aGlzLnNsaWRlVHlwZXMsIHsgbmFtZTogdHlwZU5hbWUgfSk7XHJcblxyXG4gICAgICAgIGRpYWdyYW0uc3RhcnRUcmFuc2FjdGlvbihcImFkZCBzbGlkZVwiKTtcclxuICAgICAgICBkaWFncmFtLm1vZGVsLmFkZE5vZGVEYXRhKHtcclxuICAgICAgICAgICAga2V5OiB0aGlzLmdldE5ld1NsaWRlS2V5KCksXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnc2xpZGUnLFxyXG4gICAgICAgICAgICBpbmRleDogbmV3SW5kZXgsXHJcbiAgICAgICAgICAgIGlzR3JvdXA6IGZhbHNlLFxyXG4gICAgICAgICAgICB3aWR0aDogZGIud2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogZGIuaGVpZ2h0LFxyXG4gICAgICAgICAgICBsb2M6IG5ld0xvYyxcclxuICAgICAgICAgICAgbGV2ZWw6IDAsXHJcbiAgICAgICAgICAgIGNoaWxkcmVuOiAwLFxyXG4gICAgICAgICAgICB0eXBlOiB0eXBlTmFtZSxcclxuICAgICAgICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICAgICAgICBub3RlczogJycsXHJcbiAgICAgICAgICAgIGNoZWNrczogW10sXHJcbiAgICAgICAgICAgIGhhc1JlZ2lvbjogc2xpZGVUeXBlLmhhc01hcFJlZ2lvbixcclxuICAgICAgICAgICAgaXNTdW1tYXJ5OiBzbGlkZVR5cGUuaGFzTWFwU3VtbWFyeSxcclxuICAgICAgICAgICAgbGlua3M6IFtdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcImFkZCBzbGlkZVwiKTtcclxuICAgICAgICB0aGlzLnRodW1ibmFpbENhY2hlID0gW107XHJcblxyXG4gICAgICAgIHRoaXMuc2xpZGVUaHVtYm5haWxTZWxlY3RlZChuZXdJbmRleCk7IC8vIHRyaWdnZXIgZGlzcGxheSBvZiBlZGl0IGZvcm0sIHpvb20gdG8gbWFwIHJlZ2lvbiBpZiBhcHBsaWNhYmxlXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGR1cGxpY2F0ZVNsaWRlKGluZGV4KSB7XHJcblxyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBsZXQgbmV3SW5kZXggPSB0aGlzLmdldE5ld1NsaWRlSW5kZXgoKTtcclxuICAgICAgICBsZXQgc2xpZGUgPSB0aGlzLmZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpO1xyXG4gICAgICAgIGlmIChzbGlkZSkge1xyXG4gICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJkdXBsaWNhdGUgc2xpZGVcIik7XHJcblxyXG4gICAgICAgICAgICAvLyBidW1wIHVwIGluZGV4ZXMgb24gc3Vic2VxdWVudCBzbGlkZXMgdG8gbWFrZSByb29tIGZvciBuZXcgc2xpZGUgYWZ0ZXIgY3VycmVudCBvbmVcclxuICAgICAgICAgICAgXy5lYWNoKHRoaXMuZ2V0U2xpZGVOb2RlRGF0YXMoKSwgKHNsaWRlRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlRGF0YS5pbmRleCA+IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoc2xpZGVEYXRhLCAnaW5kZXgnLCBzbGlkZURhdGEuaW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBOQjogY3JlYXRpbmcgYSBuZXcgbm9kZURhdGEgb2JqZWN0IGhlcmUgcmF0aGVyIHRoYW4gY29weWluZyBhbmQgbW9kaWZ5aW5nLCB0byBhdm9pZCBjb3B5aW5nICQkaGFzaEtleSAoPz8pXHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwuYWRkTm9kZURhdGEoe1xyXG4gICAgICAgICAgICAgICAga2V5OiB0aGlzLmdldE5ld1NsaWRlS2V5KCksXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJ3NsaWRlJyxcclxuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCArIDEsXHJcbiAgICAgICAgICAgICAgICBpc0dyb3VwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBzbGlkZS5kYXRhLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBzbGlkZS5kYXRhLmhlaWdodCxcclxuICAgICAgICAgICAgICAgIGxvYzogc2xpZGUuZGF0YS5sb2MsXHJcbiAgICAgICAgICAgICAgICBsZXZlbDogMCxcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAwLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogc2xpZGUuZGF0YS50eXBlLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IHNsaWRlLmRhdGEudGl0bGUgKyAnIChDb3B5KScsXHJcbiAgICAgICAgICAgICAgICBub3Rlczogc2xpZGUuZGF0YS5ub3RlcyxcclxuICAgICAgICAgICAgICAgIGNoZWNrczogc2xpZGUuZGF0YS5jaGVja3MsIC8vIGNsb25lP1xyXG4gICAgICAgICAgICAgICAgaGFzUmVnaW9uOiBzbGlkZS5kYXRhLmhhc1JlZ2lvbixcclxuICAgICAgICAgICAgICAgIGlzU3VtbWFyeTogc2xpZGUuZGF0YS5pc1N1bW1hcnksXHJcbiAgICAgICAgICAgICAgICBsaW5rczogc2xpZGUuZGF0YS5saW5rcyAvLyBjbG9uZT9cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJkdXBsaWNhdGUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgIHRoaXMudGh1bWJuYWlsQ2FjaGUgPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVNsaWRlKGluZGV4KSB7XHJcblxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3JlbW92ZVNsaWRlOiAnICsgaW5kZXgpO1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBsZXQgc2xpZGUgPSB0aGlzLmZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpO1xyXG4gICAgICAgIGlmIChzbGlkZSkge1xyXG4gICAgICAgICAgICBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJyZW1vdmUgc2xpZGVcIik7XHJcbiAgICAgICAgICAgIGRpYWdyYW0ubW9kZWwucmVtb3ZlTm9kZURhdGEoc2xpZGUuZGF0YSk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJyZW1vdmUgc2xpZGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3VycmVudFNsaWRlSW5kZXggPSBudWxsO1xyXG4gICAgICAgIHRoaXMudGh1bWJuYWlsQ2FjaGUgPSBbXTtcclxuICAgICAgICB0aGlzLmNvbXBhY3RTbGlkZUluZGV4ZXMoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2xpZGVUaHVtYm5haWwoaW5kZXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50aHVtYm5haWxDYWNoZVtpbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlU2xpZGVUaHVtYm5haWxzKCkge1xyXG4gICAgICAgIF8uZWFjaCh0aGlzLmdldFNsaWRlTm9kZURhdGFzKCksIChuZCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVNsaWRlVGh1bWJuYWlsKG5kLmluZGV4KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVTbGlkZVRodW1ibmFpbChpbmRleCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NyZWF0ZVNsaWRlVGh1bWJuYWlsJyk7XHJcblxyXG4gICAgICAgIGxldCB0aHVtYldpZHRoID0gMTAwMDtcclxuICAgICAgICBsZXQgdGh1bWJIZWlnaHQgPSA2MDA7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpO1xyXG5cclxuICAgICAgICBsZXQgc2xpZGUgPSB0aGlzLmZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpO1xyXG4gICAgICAgIGlmICghc2xpZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghc2xpZGUuZGF0YS5oYXNSZWdpb24gJiYgIXNsaWRlLmRhdGEuaXNTdW1tYXJ5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBkYiA9IGRpYWdyYW0uZG9jdW1lbnRCb3VuZHM7XHJcbiAgICAgICAgICAgIGxldCBzYjtcclxuICAgICAgICAgICAgaWYgKHNsaWRlLmRhdGEuaXNTdW1tYXJ5KSB7IC8vIGZvciBhIHN1bW1hcnkgc2xpZGUgd2Ugc2hvb3QgdGhlIHdob2xlIG1hcFxyXG4gICAgICAgICAgICAgICAgc2IgPSB0aGlzLl9tYXAuc2FmZVJlY3QodGhpcy5fbWFwLmNvbXB1dGVNYXBCb3VuZHMoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7IC8vIG90aGVyd2lzZSBqdXN0IHNob290IHRoZSBzbGlkZSByZWdpb25cclxuICAgICAgICAgICAgICAgIHNiID0gc2xpZGUucGFydC5hY3R1YWxCb3VuZHM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBpbWFnZVBvc2l0aW9uID0gbmV3IGdvLlBvaW50KHNiLngsIHNiLnkpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRTbGlkZVRodW1ibmFpbCwgc2xpZGUgYm91bmRzOiAnICsgc2IgKyAnLCBkb2N1bWVudCBib3VuZHM6ICcgKyBkYiArICcsIGltYWdlUG9zaXRpb246ICcgKyBpbWFnZVBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB3U2NhbGUgPSB0aHVtYldpZHRoIC8gc2Iud2lkdGg7XHJcbiAgICAgICAgICAgIGxldCBoU2NhbGUgPSB0aHVtYkhlaWdodCAvIHNiLmhlaWdodDtcclxuICAgICAgICAgICAgbGV0IHRodW1iU2NhbGUgPSBNYXRoLm1pbih3U2NhbGUsIGhTY2FsZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY2FsZTogJyArIHdTY2FsZSArICcsJyArIGhTY2FsZSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgdyA9IHRodW1iU2NhbGUgKiBzYi53aWR0aDtcclxuICAgICAgICAgICAgbGV0IGggPSB0aHVtYlNjYWxlICogc2IuaGVpZ2h0O1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd0aHVtYm5haWwgdy9oOiAnICsgdyArICcsJyArIGgpO1xyXG5cclxuICAgICAgICAgICAgLy8gaGlkZSBzbGlkZXMgdGVtcG9yYXJpbHkgd2hpbGUgY3JlYXRpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHRoaXMuaXNDcmVhdGluZ1RodW1ibmFpbCA9IHRydWU7XHJcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSB0aHVtYlNjYWxlO1xyXG5cclxuICAgICAgICAgICAgbGV0IGltZ0RhdGEgPSBkaWFncmFtLm1ha2VJbWFnZURhdGEoe1xyXG4gICAgICAgICAgICAgICAgc2l6ZTogbmV3IGdvLlNpemUodywgaCksXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogaW1hZ2VQb3NpdGlvbixcclxuICAgICAgICAgICAgICAgIHNjYWxlOiB0aHVtYlNjYWxlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pc0NyZWF0aW5nVGh1bWJuYWlsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudGh1bWJuYWlsQ2FjaGVbaW5kZXhdID0gaW1nRGF0YTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBpbWdEYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBnZXRzIGEgdGh1bWJuYWlsIG9mIHRoZSB3aG9sZSBtYXAsIGZvciBzYXZpbmcgKHNlZSBhdXRvc2F2ZS5qcylcclxuICAgIGdldE1hcFRodW1ibmFpbCgpIHtcclxuXHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGxldCBzYiA9IHRoaXMuX21hcC5zYWZlUmVjdCh0aGlzLl9tYXAuY29tcHV0ZU1hcEJvdW5kcygpKTtcclxuICAgICAgICBzYi5ncm93KDEwLCAxMCwgMTAsIDEwKTtcclxuICAgICAgICBsZXQgdyA9IDE1MDtcclxuICAgICAgICBsZXQgaCA9IDEwMDtcclxuXHJcbiAgICAgICAgLy8gaGlkZSBzbGlkZXMgdGVtcG9yYXJpbHkgd2hpbGUgY3JlYXRpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgdGhpcy5pc0NyZWF0aW5nVGh1bWJuYWlsID0gdHJ1ZTtcclxuICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcblxyXG4gICAgICAgIGxldCBpbWdEYXRhID0gZGlhZ3JhbS5tYWtlSW1hZ2VEYXRhKHtcclxuICAgICAgICAgICAgc2NhbGU6IE1hdGgubWluKGggLyBzYi5oZWlnaHQsIHcgLyBzYi53aWR0aCksXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoc2IueCwgc2IueSksXHJcbiAgICAgICAgICAgIHNpemU6IG5ldyBnby5TaXplKHcsIGgpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuaXNDcmVhdGluZ1RodW1ibmFpbCA9IGZhbHNlO1xyXG4gICAgICAgIGRpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGltZ0RhdGE7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIGNhbGxlZCB2aWEgbmctY2xpY2sgb24gdGh1bWJuYWlsXHJcbiAgICBzbGlkZVRodW1ibmFpbFNlbGVjdGVkKGluZGV4KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2xpZGVUaHVtYm5haWxTZWxlY3RlZDogJyArIGluZGV4KTtcclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgbGV0IHNsaWRlID0gdGhpcy5maW5kU2xpZGVCeUluZGV4KGluZGV4KTtcclxuXHJcblxyXG4gICAgICAgIC8vIE5COiBvcmRlciBvZiBzdGF0ZW1lbnRzIGlzIGltcG9ydGFudCBoZXJlLCBhcyBzZWxlY3RTbGlkZSBjYW4gdHJpZ2dlciBjaGFuZ2VkU2VsZWN0aW9uIHdpdGggYW4gZW1wdHkgc2VsZWN0aW9uIHNvbWV0aW1lcy4uLiA/P1xyXG4gICAgICAgIHRoaXMuc2VsZWN0U2xpZGUoaW5kZXgpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNsaWRlSW5kZXggPSBpbmRleDtcclxuICAgICAgICBkaWFncmFtLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7IC8vIHNob3cvaGlkZSBzbGlkZSBub2RlcyAtIHNlZSB0ZW1wbGF0ZXMuanM6IHNsaWRlVGVtcGxhdGVcclxuXHJcbiAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1ByZXNlbnRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RPQyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBuZWVkc05hcnJvd0NhbnZhcygpIHtcclxuICAgICAgICBsZXQgc2xpZGUgPSB0aGlzLmZpbmRTbGlkZUJ5SW5kZXgodGhpcy5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5nZXRVaSgpLmN1cnJlbnRUYWJJcyh0aGlzLl9tYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKSAmJlxyXG4gICAgICAgICAgIHNsaWRlICE9IG51bGwgJiZcclxuICAgICAgICAgICAoc2xpZGUuZGF0YS50eXBlID09PSAnVElUTEVfQk9EWV9NQVAnIHx8IHNsaWRlLmRhdGEudHlwZSA9PT0gJ0FDVElWSVRZX01BUCcgfHwgc2xpZGUuZGF0YS50eXBlID09PSAnTUFQX1NVTU1BUlknKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzZXRzIHRoZSBzbGlkZSBub2RlIGFzIHNlbGVjdGVkIGluIHRoZSBkaWFncmFtLlxyXG4gICAgc2VsZWN0U2xpZGUoaW5kZXgpIHtcclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc2VsZWN0IHNsaWRlOiAnICsgaW5kZXgpO1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBkaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgaWYgKGluZGV4KSB7XHJcbiAgICAgICAgICAgIGxldCBzbGlkZSA9IHRoaXMuZmluZFNsaWRlQnlJbmRleChpbmRleCk7XHJcbiAgICAgICAgICAgIGlmIChzbGlkZSkge1xyXG4gICAgICAgICAgICAgICAgc2xpZGUuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETzogc2Nyb2xsIHRvIHNsaWRlP1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwbGF5U2xpZGUoaW5kZXgpIHtcclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgdGhpcy5fbWFwLmdldFVpKCkub3BlblRhYih0aGlzLl9tYXAuZ2V0VWkoKS5UQUJfSURfUFJFU0VOVEVSKTtcclxuXHJcbiAgICAgICAgbGV0IHNsaWRlcyA9IHRoaXMuZ2V0U2xpZGVOb2RlRGF0YXMoKTtcclxuICAgICAgICBpZiAoc2xpZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dUT0MgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5wcmVzZW50U2xpZGUoaW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBpbmNyZW1lbnQgaXMgLTEgb3IgKzFcclxuICAgIGFkdmFuY2VTbGlkZShpbmNyZW1lbnQpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdhZHZhbmNlU2xpZGUsIGN1cnJlbnRTbGlkZUluZGV4OiAnICsgdGhpcy5jdXJyZW50U2xpZGVJbmRleCk7XHJcblxyXG4gICAgICAgIGxldCBzbGlkZSA9IHRoaXMuZmluZFNsaWRlQnlJbmRleCh0aGlzLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICBpZiAoc2xpZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2xpZGVJbmRleCArPSAoaW5jcmVtZW50KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmVzZW50aW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZXNlbnRTbGlkZSh0aGlzLmN1cnJlbnRTbGlkZUluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJlc2VudFNsaWRlKGluZGV4KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygncHJlc2VudFNsaWRlJyk7XHJcblxyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBsZXQgc2xpZGUgPSB0aGlzLmZpbmRTbGlkZUJ5SW5kZXgoaW5kZXgpO1xyXG4gICAgICAgIGlmICghc2xpZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGlhZ3JhbS5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgIC8vIE5COiBuZWVkIHRvIHNldCB0aGlzIGFmdGVyIGNsZWFyU2VsZWN0aW9uLCBhcyB0aGF0IHdpbGwgc2V0IGl0IHRvIG51bGwhIChzZWUgY2hhbmdlZFNlbGVjdGlvbilcclxuICAgICAgICB0aGlzLmN1cnJlbnRTbGlkZUluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgdGhpcy5fbWFwLnNldEVkaXRpbmdCbG9ja2VkKHRydWUpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3ByZXNlbnRTbGlkZSwgaW5kZXg6ICcgKyBpbmRleCArICcsIHNsaWRlOiAnICsgc2xpZGUgKyAnLCBjdXJyZW50U2xpZGVJbmRleDogJyArIHRoaXMuY3VycmVudFNsaWRlSW5kZXgpO1xyXG5cclxuICAgICAgICB0aGlzLm1heWJlSW5pdFNsaWRlQmxvY2tlcigpO1xyXG4gICAgICAgIGxldCBibG9ja2VyVyA9IFNMSURFX0JMT0NLRVJfV0lEVEg7XHJcblxyXG4gICAgICAgIGlmIChzbGlkZS5kYXRhLmhhc1JlZ2lvbikge1xyXG4gICAgICAgICAgICB0aGlzLnpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gc2hvdyBzbGlkZSBibG9ja2VyXHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVCbG9ja2VyLmRlc2lyZWRTaXplID0gbmV3IGdvLlNpemUoXHJcbiAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMud2lkdGggKyAyICogYmxvY2tlclcsXHJcbiAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMuaGVpZ2h0ICsgMiAqIGJsb2NrZXJXKTtcclxuICAgICAgICAgICAgdGhpcy5zbGlkZUJsb2NrZXIubG9jYXRpb24gPSBuZXcgZ28uUG9pbnQoXHJcbiAgICAgICAgICAgICAgICBzbGlkZS5hY3R1YWxCb3VuZHMueCAtIGJsb2NrZXJXLFxyXG4gICAgICAgICAgICAgICAgc2xpZGUuYWN0dWFsQm91bmRzLnkgLSBibG9ja2VyVyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVCbG9ja2VyLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdzbGlkZUJsb2NrZXI6ICcgKyB0aGlzLnNsaWRlQmxvY2tlci5hY3R1YWxCb3VuZHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzbGlkZS5kYXRhLmlzU3VtbWFyeSkge1xyXG4gICAgICAgICAgICB0aGlzLnpvb21Ub1NsaWRlSW5DZW50ZXIoc2xpZGUpO1xyXG4gICAgICAgICAgICB0aGlzLnNsaWRlQmxvY2tlci52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9tYXAuZ2V0VWkoKS5yZXNldFpvb20oKTtcclxuICAgICAgICAgICAgdGhpcy5zbGlkZUJsb2NrZXIudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pc1ByZXNlbnRpbmcgPSB0cnVlO1xyXG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygncHJlc2VudGVyLXBsYXlpbmcnKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpOyAvLyBoaWRlIHNsaWRlIG5vZGVzIC0gc2VlIHRlbXBsYXRlcy5qczogc2xpZGVUZW1wbGF0ZVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyB6b29tIHRoZSBkaWFncmFtIHRvIHNob3cgdGhlIGdpdmVuIHNsaWRlIGluIHRoZSBjZW50ZXIgb2YgdGhlIGNhbnZhc1xyXG4gICAgem9vbVRvU2xpZGVJbkNlbnRlcihzbGlkZSkge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuXHJcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGhhbGZXaWR0aCA9IChzbGlkZS5kYXRhLnR5cGUgIT09ICdNQVBfT05MWScpO1xyXG4gICAgICAgICAgICBsZXQgem9vbVJlY3QgPSB0aGlzLmdldExldHRlcmJveGVkUmVjdChzbGlkZS5hY3R1YWxCb3VuZHMsIGhhbGZXaWR0aCk7XHJcbiAgICAgICAgICAgIHpvb21SZWN0LmluZmxhdGUoem9vbVJlY3Qud2lkdGggLyAxMCwgem9vbVJlY3QuaGVpZ2h0IC8gMTApO1xyXG4gICAgICAgICAgICBkaWFncmFtLnpvb21Ub1JlY3Qoem9vbVJlY3QsIGdvLkRpYWdyYW0uVW5pZm9ybSk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIGEgcmVjdGFuZ2xlIGNvbnRhaW5pbmcgdGhlIGdpdmVuIHJlY3QsIGJ1dCB3aXRoIGFwcHJvcHJpYXRlIHdpZHRoIG9yIGhlaWdodCBhZGRlZFxyXG4gICAgLy8gdG8gZ2l2ZSBpdCBzYW1lIGFzcGVjdCByYXRpbyBhcyB0aGUgZGlhZ3JhbS5cclxuICAgIGdldExldHRlcmJveGVkUmVjdChyZWN0LCBoYWxmV2lkdGgpIHtcclxuXHJcbiAgICAgICAgLy8gTkI6IHdlIGNhbGN1bGF0ZSB0aGUgYXNwZWN0IHJhdGlvIHdoZW4gdGhlIHRhYiBpcyBvcGVuZWQsIFxyXG4gICAgICAgIC8vIHJhdGhlciB0aGFuIGVhY2ggdGltZSBhcyB0aGUgZGlhZ3JhbSBzaXplIG1pZ2h0IGJlIGNoYW5naW5nLi4uXHJcbiAgICAgICAgbGV0IGRhciA9IChoYWxmV2lkdGggPyB0aGlzLmRpYWdyYW1Bc3BlY3RSYXRpbyAvIDIgOiB0aGlzLmRpYWdyYW1Bc3BlY3RSYXRpbyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3JlY3Q6ICcgKyByZWN0ICsgJywgZGFyOiAnICsgZGFyKTtcclxuXHJcbiAgICAgICAgbGV0IHJlY3RBc3BlY3RSYXRpbyA9IHJlY3Qud2lkdGggLyByZWN0LmhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKGRhciA+IHJlY3RBc3BlY3RSYXRpbykge1xyXG4gICAgICAgICAgICAvLyB0YWxsIHNraW5ueSByZWN0LCBzaG9ydCB3aWRlIHRhcmdldCBBUiwgc28gYWRkIHNpZGUgcGFkZGluZyB0byB0aGUgcmVjdFxyXG4gICAgICAgICAgICBsZXQgbGJ3ID0gcmVjdC5oZWlnaHQgKiBkYXI7IC8vIGJlY2F1c2UgbGJ3IC8gbGJoID09IGRhciA9PSBsYncgLyByZWN0LmhlaWdodCAobGJoID09IHJlY3QuaGVpZ2h0KVxyXG4gICAgICAgICAgICByZXR1cm4gcmVjdC5jb3B5KCkuaW5mbGF0ZSgobGJ3IC0gcmVjdC53aWR0aCkgLyAyLCAwKTsgLy8gYWRkIGhhbGYgdGhlIHdpZHRoIGRpZmZlcmVuY2UgdG8gZWFjaCBzaWRlIG9mIHRoZSByZWN0XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBzaG9ydCB3aWRlIHJlY3QsIHRhbGwgc2tpbm55IHRhcmdldCBBUiwgc28gYWRkIHRvcC9ib3R0b20gcGFkZGluZyB0byB0aGUgcmVjdFxyXG4gICAgICAgICAgICBsZXQgbGJoID0gcmVjdC53aWR0aCAvIGRhcjsgLy8gYmVjYXVzZSBsYncgLyBsYmggPT0gZGFyID09IGxiaCAvIHJlY3Qud2lkdGggKGxidyA9PSByZWN0LndpZHRoKVxyXG4gICAgICAgICAgICByZXR1cm4gcmVjdC5jb3B5KCkuaW5mbGF0ZSgwLCAobGJoIC0gcmVjdC5oZWlnaHQpIC8gMik7ICAvLyBhZGQgaGFsZiB0aGUgaGVpZ2h0IGRpZmZlcmVuY2UgdG8gdG9wL2JvdHRvbSBvZiB0aGUgcmVjdFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdG9wUHJlc2VudGluZygpIHtcclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnc3RvcFByZXNlbnRpbmcsIGN1cnJlbnRTbGlkZUluZGV4OiAnICsgdGhpcy5jdXJyZW50U2xpZGVJbmRleCk7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zbGlkZUJsb2NrZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zbGlkZUJsb2NrZXIudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy90aGlzLmN1cnJlbnRTbGlkZUluZGV4ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmlzUHJlc2VudGluZyA9IGZhbHNlO1xyXG4gICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygncHJlc2VudGVyLXBsYXlpbmcnKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpOyAvLyBzaG93IHNsaWRlIG5vZGVzXHJcblxyXG4gICAgICAgIGRpYWdyYW0uY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICB0aGlzLl9tYXAuc2V0RWRpdGluZ0Jsb2NrZWQoZmFsc2UpO1xyXG4gICAgICAgIC8vdGhpcy5fbWFwLmdldFVpKCkucmVzZXRab29tKCk7XHJcblxyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQcmVzZW50ZXI7XHJcbiIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBzbGlkZVRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvc2xpZGVUZW1wbGF0ZS5qcycpO1xyXG5jb25zdCBHcm91cFRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvR3JvdXBUZW1wbGF0ZS5qcycpO1xyXG5jb25zdCBsaW5rVGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9saW5rVGVtcGxhdGUuanMnKTtcclxuY29uc3QgcExpbmtUZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL3BMaW5rVGVtcGxhdGUuanMnKTtcclxuY29uc3QgZExpbmtUZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2RMaW5rVGVtcGxhdGUuanMnKTtcclxuXHJcbi8vIGNvbnZlbmllbnQgYWJicmV2aWF0aW9uIGZvciBjcmVhdGluZyB0ZW1wbGF0ZXNcclxuY29uc3QgbWsgPSBnby5HcmFwaE9iamVjdC5tYWtlO1xyXG5cclxuXHJcbmNvbnN0IGNvbG9yUiA9IFwiIzRjYmZjMlwiO1xyXG5jb25zdCBjb2xvclAgPSBcIiNmYmFhMzZcIjtcclxuXHJcbi8vIGZvb3RlciBmb3IgaW1hZ2UgZXhwb3J0XHJcbmxldCBfZXhwb3J0Rm9vdGVyID0gbnVsbDtcclxuXHJcbi8vIGdvSlMgdGVtcGxhdGVzIHVzZWQgaW4gdGhlIGVkaXRvclxyXG5jbGFzcyBUZW1wbGF0ZXMge1xyXG4gICAgY29uc3RydWN0b3IoZWRpdG9yLCBtYXApIHtcclxuICAgICAgICB0aGlzLl9lZGl0b3IgPSBlZGl0b3I7XHJcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xyXG5cclxuICAgICAgICB0aGlzLnNsaWRlVGVtcGxhdGUgPSBzbGlkZVRlbXBsYXRlKG1hcCk7XHJcbiAgICAgICAgdGhpcy5ncm91cFRlbXBsYXRlID0gbmV3IEdyb3VwVGVtcGxhdGUobWFwKTtcclxuICAgICAgICB0aGlzLmxpbmtUZW1wbGF0ZSA9IGxpbmtUZW1wbGF0ZShtYXApO1xyXG4gICAgICAgIHRoaXMucExpbmtUZW1wbGF0ZSA9IHBMaW5rVGVtcGxhdGUobWFwKTtcclxuICAgICAgICB0aGlzLmRMaW5rVGVtcGxhdGUgPSBkTGlua1RlbXBsYXRlKG1hcCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdFRlbXBsYXRlcyhkaWFncmFtKSB7XHJcbiAgICAgICAgZGlhZ3JhbS5ncm91cFRlbXBsYXRlID0gdGhpcy5ncm91cFRlbXBsYXRlO1xyXG4gICAgICAgIGRpYWdyYW0ubm9kZVRlbXBsYXRlID0gdGhpcy5zbGlkZVRlbXBsYXRlO1xyXG4gICAgICAgIGRpYWdyYW0ubGlua1RlbXBsYXRlID0gdGhpcy5saW5rVGVtcGxhdGU7XHJcbiAgICAgICAgZGlhZ3JhbS5saW5rVGVtcGxhdGVNYXAuYWRkKCdQJywgdGhpcy5wTGlua1RlbXBsYXRlKTtcclxuICAgICAgICBkaWFncmFtLmxpbmtUZW1wbGF0ZU1hcC5hZGQoJ0QnLCB0aGlzLmRMaW5rVGVtcGxhdGUpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFRlbXBvcmFyeUxpbmtUZW1wbGF0ZXMoZGlhZ3JhbS50b29sTWFuYWdlci5saW5raW5nVG9vbCk7XHJcbiAgICAgICAgdGhpcy5zZXRUZW1wb3JhcnlMaW5rVGVtcGxhdGVzKGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbCk7XHJcblxyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIubGlua2luZ1Rvb2wucG9ydFRhcmdldGVkID0gKHJlYWxub2RlLCByZWFscG9ydCwgdGVtcG5vZGUsIHRlbXBwb3J0LCB0b2VuZCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVBvcnRUYXJnZXRlZChkaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sLCByZWFsbm9kZSwgcmVhbHBvcnQsIHRlbXBub2RlLCB0ZW1wcG9ydCwgdG9lbmQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbC5wb3J0VGFyZ2V0ZWQgPSAocmVhbG5vZGUsIHJlYWxwb3J0LCB0ZW1wbm9kZSwgdGVtcHBvcnQsIHRvZW5kKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUG9ydFRhcmdldGVkKGRpYWdyYW0udG9vbE1hbmFnZXIucmVsaW5raW5nVG9vbCwgcmVhbG5vZGUsIHJlYWxwb3J0LCB0ZW1wbm9kZSwgdGVtcHBvcnQsIHRvZW5kKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLnJlbGlua2luZ1Rvb2wudXBkYXRlQWRvcm5tZW50cyA9IChwYXJ0KSA9PiB7XHJcbiAgICAgICAgICAgIGdvLlJlbGlua2luZ1Rvb2wucHJvdG90eXBlLnVwZGF0ZUFkb3JubWVudHMuY2FsbCh0aGlzLCBwYXJ0KTtcclxuICAgICAgICAgICAgbGV0IGZyb20gPSBwYXJ0LmZpbmRBZG9ybm1lbnQoJ1JlbGlua0Zyb20nKTtcclxuICAgICAgICAgICAgbGV0IHRvID0gcGFydC5maW5kQWRvcm5tZW50KCdSZWxpbmtUbycpO1xyXG4gICAgICAgICAgICAvLyBpZiAoZnJvbSlcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdyZWxpbmtmcm9tOiAnICsgZnJvbS5wYXJ0LndpZHRoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBkaWFncmFtLnRvb2xNYW5hZ2VyLmxpbmtpbmdUb29sLmxpbmtWYWxpZGF0aW9uID0gdGhpcy52YWxpZGF0ZUxpbms7XHJcbiAgICAgICAgZGlhZ3JhbS50b29sTWFuYWdlci5yZWxpbmtpbmdUb29sLmxpbmtWYWxpZGF0aW9uID0gdGhpcy52YWxpZGF0ZUxpbms7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0gdGVtcG9yYXJ5IGxpbmsvbm9kZSB0ZW1wbGF0ZXMsIGZvciB1c2Ugd2hlbiBkcmFnZ2luZyB0byBjcmVhdGUgUi9QIGxpbmVzIC0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBkZWZpbmUgaW5pdGlhbCB0ZW1wb3JhcnkgbGluayB0ZW1wbGF0ZXMgLSB0aGVzZSB3aWxsIGJlIG1vZGlmaWVkIHdoZW4gaGFuZGxlUG9ydFRhcmdldGVkIGlzIGNhbGxlZFxyXG4gICAgc2V0VGVtcG9yYXJ5TGlua1RlbXBsYXRlcyh0b29sKSB7XHJcbiAgICAgICAgdG9vbC50ZW1wb3JhcnlMaW5rID0gdGhpcy5tYWtlVGVtcG9yYXJ5TGlua1RlbXBsYXRlKCk7XHJcbiAgICAgICAgdG9vbC50ZW1wb3JhcnlGcm9tTm9kZSA9IHRoaXMubWFrZVRlbXBvcmFyeU5vZGVUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRvb2wudGVtcG9yYXJ5VG9Ob2RlID0gdGhpcy5tYWtlVGVtcG9yYXJ5Tm9kZVRlbXBsYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZVRlbXBvcmFyeUxpbmtUZW1wbGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uTGluaywge1xyXG4gICAgICAgICAgICBsYXllck5hbWU6IFwiVG9vbFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdsaW5rc2hhcGUnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VUZW1wb3JhcnlOb2RlVGVtcGxhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLkdyb3VwLCB7XHJcbiAgICAgICAgICAgIGxheWVyTmFtZTogXCJUb29sXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgXCJCb3JkZXJcIiwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2JvcmRlcicsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMyxcclxuICAgICAgICAgICAgICAgIGZpbGw6IG51bGxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNoYW5nZSBjb2xvciBhbmQgcG9ydElkIG9mIHRlbXBvcmFyeSBsaW5rIHRlbXBsYXRlcyBiYXNlZCBvbiB0aGUgdHlwZSBvZiBsaW5rIGJlaW5nIGNyZWF0ZWQvcmVsaW5rZWRcclxuICAgIGhhbmRsZVBvcnRUYXJnZXRlZCh0b29sLCByZWFsbm9kZSwgcmVhbHBvcnQsIHRlbXBub2RlLCB0ZW1wcG9ydCwgdG9lbmQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygncG9ydFRhcmdldGVkLCByZWFscG9ydDogJyArIChyZWFscG9ydCA/IHJlYWxwb3J0Lm5hbWUgOiAnJykgKyAnLCB0ZW1wcG9ydDogJyArICh0ZW1wcG9ydCA/IHRlbXBwb3J0Lm5hbWUgOiAnJykgXHJcbiAgICAgICAgLy8gICAgICsgJywgb3JpZ2luYWxGcm9tUG9ydDogJyArIChsdG9vbC5vcmlnaW5hbEZyb21Qb3J0ID8gbHRvb2wub3JpZ2luYWxGcm9tUG9ydC5uYW1lIDogJycpICsgJywgb3JpZ2luYWxUb1BvcnQ6ICcgKyBsdG9vbC5vcmlnaW5hbFRvUG9ydCk7XHJcblxyXG4gICAgICAgIGxldCBsaW5rU2hhcGUgPSB0b29sLnRlbXBvcmFyeUxpbmsuZmluZE9iamVjdCgnbGlua3NoYXBlJyk7XHJcbiAgICAgICAgbGV0IGZyb21Cb3JkZXIgPSB0b29sLnRlbXBvcmFyeUZyb21Ob2RlLmZpbmRPYmplY3QoJ2JvcmRlcicpO1xyXG4gICAgICAgIGxldCB0b0JvcmRlciA9IHRvb2wudGVtcG9yYXJ5VG9Ob2RlLmZpbmRPYmplY3QoJ2JvcmRlcicpO1xyXG5cclxuICAgICAgICBpZiAodG9vbC5vcmlnaW5hbEZyb21Qb3J0ICYmIHRvb2wub3JpZ2luYWxGcm9tUG9ydC5uYW1lID09PSAnY29ybmVyUFNoYXBlJykge1xyXG4gICAgICAgICAgICBsaW5rU2hhcGUuc3Ryb2tlID0gY29sb3JQO1xyXG4gICAgICAgICAgICBmcm9tQm9yZGVyLnN0cm9rZSA9IGNvbG9yUDtcclxuICAgICAgICAgICAgdG9Cb3JkZXIuc3Ryb2tlID0gY29sb3JQO1xyXG4gICAgICAgICAgICBmcm9tQm9yZGVyLnBvcnRJZCA9ICdQJztcclxuICAgICAgICAgICAgdG9Cb3JkZXIucG9ydElkID0gJ1AnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodG9vbC5vcmlnaW5hbEZyb21Qb3J0ICYmIHRvb2wub3JpZ2luYWxGcm9tUG9ydC5uYW1lID09PSAnY29ybmVyUlNoYXBlJykge1xyXG4gICAgICAgICAgICBsaW5rU2hhcGUuc3Ryb2tlID0gY29sb3JSO1xyXG4gICAgICAgICAgICBmcm9tQm9yZGVyLnN0cm9rZSA9IGNvbG9yUjtcclxuICAgICAgICAgICAgdG9Cb3JkZXIuc3Ryb2tlID0gY29sb3JSO1xyXG4gICAgICAgICAgICBmcm9tQm9yZGVyLnBvcnRJZCA9ICdSJztcclxuICAgICAgICAgICAgdG9Cb3JkZXIucG9ydElkID0gJ1InO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0ZW1wbm9kZS5zY2FsZSA9IHRoaXMuX21hcC5nZXRMYXlvdXRzKCkuZ2V0U2NhbGUocmVhbG5vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHByZXZlbnQgZHVwbGljYXRlICdQJyBsaW5rcyBpbiB0aGUgc2FtZSBkaXJlY3Rpb24gYmV0d2VlbiB0aGUgc2FtZSB0d28gdGhpbmdzXHJcbiAgICB2YWxpZGF0ZUxpbmsoZnJvbU5vZGUsIGZyb21Qb3J0LCB0b05vZGUsIHRvUG9ydCkge1xyXG4gICAgICAgIC8vIHRoZSBQIHBvcnQgaXMgb24gdG9wIG9mIHRoZSBSIHBvcnQsIHNvIGJvdGggUCBhbmQgUiBsaW5rcyBnZXQgdGhlIHRvUG9ydCBzZXQgdG8gUiBieSBkZWZhdWx0LlxyXG4gICAgICAgIGlmIChmcm9tUG9ydC5wb3J0SWQgPT09ICdQJykge1xyXG4gICAgICAgICAgICAvLyBOQjogZmluZExpbmtzVG8gd291bGQgYmUgc2ltcGxlciwgYnV0IGl0IGRvZXNuJ3Qgc2VlbSB0byB3b3JrLi4uICg/KVxyXG4gICAgICAgICAgICBsZXQgcExpbmtzID0gdG9Ob2RlLmZpbmRMaW5rc0JldHdlZW4oZnJvbU5vZGUsICdQJywgJ1AnKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndmFsaWRhdGVMaW5rLCBwTGlua3MgZnJvbSAnICsgZnJvbU5vZGUgKyAnOicgKyBmcm9tUG9ydCArICcgdG8gJyArIHRvTm9kZSArICc6JyArIHRvUG9ydCArICcgPSAnICsgcExpbmtzLmNvdW50KTtcclxuICAgICAgICAgICAgaWYgKHBMaW5rcy5jb3VudCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHBMaW5rcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcExpbmsgPSBwTGlua3MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBMaW5rLmZyb21Ob2RlID09PSBmcm9tTm9kZSAmJiBwTGluay50b05vZGUgPT09IHRvTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gZXhwb3J0IGZvb3RlciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gTkI6IHRoaXMgaXMgbm90IGEgdGVtcGxhdGUgcGVyIHNlLCBpbiB0aGF0IGl0IGlzIGFkZGVkIHRvIHRoZSBkaWFncmFtIFxyXG4gICAgLy8gc3RhdGljYWxseSwgcmF0aGVyIHRoYW4gYmVpbmcgYm91bmQgdG8gc29tZXRoaW5nIGluIHRoZSBtb2RlbC5cclxuICAgIC8vIEJ1dCB3ZSBwdXQgaXQgaGVyZSBiZWNhdXNlIGl0IGlzIGFib3V0IGNyZWF0aW5nIHBhcnRzIGFuZCBzdHVmZi5cclxuXHJcbiAgICBjcmVhdGVFeHBvcnRGb290ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLk5vZGUsIGdvLlBhbmVsLlNwb3QsIHtcclxuICAgICAgICAgICAgbGF5ZXJOYW1lOiAnRm9yZWdyb3VuZCcsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgIHNjYWxlOiAxLFxyXG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICAgICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHNlbGVjdGFibGU6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiUmVjdGFuZ2xlXCIsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwicmVjdGFuZ2xlXCIsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDYwLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uUGljdHVyZSwge1xyXG4gICAgICAgICAgICAgICAgc291cmNlOiAnYXNzZXRzL2ltZy9tZXRhbWFwLWxvZ28tNTAucG5nJyxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Ub3BMZWZ0LFxyXG4gICAgICAgICAgICAgICAgYWxpZ25tZW50Rm9jdXM6IGdvLlNwb3QuVG9wTGVmdCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxOTUsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDUwXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwibWV0YW1hcC5jYWJyZXJhcmVzZWFyY2gub3JnXCIsXHJcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuQm90dG9tTGVmdCxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LkJvdHRvbUxlZnQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMjAwXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwibWFwVGl0bGVcIixcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Ub3BSaWdodCxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LlRvcFJpZ2h0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDMwMFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImF1dGhvck5hbWVcIixcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudDogZ28uU3BvdC5Cb3R0b21SaWdodCxcclxuICAgICAgICAgICAgICAgIGFsaWdubWVudEZvY3VzOiBnby5TcG90LkJvdHRvbVJpZ2h0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDMwMFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY3JlYXRlcyBvciByZWZyZXNoZXMgdGhlIGZvb3RlciBsb2dvL3RleHQgdGhhdCBpcyBkaXNwbGF5ZWQgaW4gdGhlIGltYWdlIGV4cG9ydFxyXG4gICAgYWRkRXhwb3J0Rm9vdGVyKCkge1xyXG4gICAgICAgIGlmICghX2V4cG9ydEZvb3Rlcikge1xyXG4gICAgICAgICAgICBfZXhwb3J0Rm9vdGVyID0gdGhpcy5jcmVhdGVFeHBvcnRGb290ZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5hZGQoX2V4cG9ydEZvb3Rlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3dFeHBvcnRGb290ZXIoKSB7XHJcbiAgICAgICAgbGV0IHJlY3QgPSB0aGlzLl9tYXAuY29tcHV0ZU1hcEJvdW5kcygpO1xyXG4gICAgICAgIC8vIHB1dCBmb290ZXIgYXQgbGVhc3QgMTAwIHB4IGJlbG93IGJvdHRvbSBvZiBtYXA7IG1ha2UgaXQgYXQgbGVhc3QgNTAwcHggd2lkZVxyXG4gICAgICAgIGxldCB4ID0gcmVjdC54O1xyXG4gICAgICAgIGxldCB5ID0gcmVjdC55ICsgcmVjdC5oZWlnaHQgKyBNYXRoLm1heCgxMDAsIHJlY3QuaGVpZ2h0IC8gNSk7XHJcbiAgICAgICAgbGV0IHcgPSBNYXRoLm1heCg1MDAsIHJlY3Qud2lkdGgpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3Nob3dFeHBvcnRGb290ZXIsIGJvdW5kcyByZWN0OiAnICsgcmVjdCArICcsIHc6ICcgKyB3KTtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLmxvY2F0aW9uID0gbmV3IGdvLlBvaW50KHgsIHkpO1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIuZmluZE9iamVjdChcInJlY3RhbmdsZVwiKS53aWR0aCA9IHc7XHJcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5maW5kT2JqZWN0KFwibWFwVGl0bGVcIikudGV4dCA9IFwiTWFwIFRpdGxlOiBcIiArIHRoaXMuX2VkaXRvci5tYXBUaXRsZTtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLmZpbmRPYmplY3QoXCJhdXRob3JOYW1lXCIpLnRleHQgPSBcIkF1dGhvcjogXCIgKyB0aGlzLl9lZGl0b3IudXNlck5hbWU7XHJcbiAgICAgICAgX2V4cG9ydEZvb3Rlci5vcGFjaXR5ID0gMTtcclxuICAgICAgICBfZXhwb3J0Rm9vdGVyLmludmFsaWRhdGVMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlRXhwb3J0Rm9vdGVyKCkge1xyXG4gICAgICAgIF9leHBvcnRGb290ZXIub3BhY2l0eSA9IDA7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVGVtcGxhdGVzOyIsImxldCBUQUJTID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzL3RhYnMuanMnKTtcclxubGV0IGdvID0gd2luZG93LmdvO1xyXG5cclxuY2xhc3MgVUkge1xyXG4gICAgY29uc3RydWN0b3IobWFwLCBzdGF0ZSkge1xyXG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuXHJcbiAgICAgICAgdGhpcy56b29taW5nVG9SZWdpb24gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5tb3VzZU92ZXJHcm91cCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tb3VzZU92ZXJMaW5rID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5kcmFnVGFyZ2V0R3JvdXAgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZHJhZ1RhcmdldFBvc2l0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5oZWxwVGlwID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5fY29ybmVyQ2xpY2tlZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fY29ybmVyRnVuY3Rpb24gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2Nvcm5lclRpbWVvdXQgPSAzMDA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0gaGFuZGxlIGJvdHRvbSB0YWJzICgnc2xpZGVycycpIC0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBpbiB0aGUgZm9sbG93aW5nIGZ1bmN0aW9ucywgSUQgaXMgZS5nLiAnaGlzdG9yeS10YWInIChJRCBvZiBvbmUgb2YgdGhlIC5ib3R0b20tdGFiJ3MpXHJcblxyXG4gICAgLy8gdGhpcyBpcyBjYWxsZWQgYnkgbWFwLmN1cnJlbnRUYWJDaGFuZ2VkLCB3aGljaCBpcyB0cmlnZ2VyZWQgYnkgYSB0aGlzLiR3YXRjaFxyXG4gICAgY3VycmVudFRhYkNoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygndWksIGN1cnJlbnRUYWJDaGFuZ2VkOiAnICsgbmV3VmFsdWUpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUuY3VycmVudFRhYiA9IG5ld1ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGN1cnJlbnRUYWJJcyh0YWJJRCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRUYWIgPT09IHRhYklEO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW5UYWIodGFiSUQpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRUYWIgPSB0YWJJRDtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZVRhYih0YWJJRCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUuY3VycmVudFRhYiA9IG51bGw7IC8vIFRPRE86IHRyaWdnZXIgYXV0b3NhdmVcclxuICAgICAgICB0aGlzLmN1cnJlbnRUYWIgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc2FibGVUYWIodGFiSUQpIHtcclxuICAgICAgICAvLyBwcmV2ZW50IG9wZW5pbmcgb3RoZXIgdGFicyB3aGVuIGluIFAgb3IgRCBlZGl0b3JcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VGFiID09PSBUQUJTLlRBQl9JRF9QRVJTUEVDVElWRVMgfHwgdGhpcy5jdXJyZW50VGFiID09PSBUQUJTLlRBQl9JRF9ESVNUSU5DVElPTlMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVUYWIodGFiSUQpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VGFiID09PSB0YWJJRCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRUYWIgPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuZGlzYWJsZVRhYih0YWJJRCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VGFiID0gdGFiSUQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZU5hdmlnYXRvcigpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLnNob3dOYXZpZ2F0b3IgPSAhdGhpcy5zdGF0ZS5zaG93TmF2aWdhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZVpvb21pbmdUb1JlZ2lvbigpIHtcclxuICAgICAgICB0aGlzLnpvb21pbmdUb1JlZ2lvbiA9ICF0aGlzLnpvb21pbmdUb1JlZ2lvbjtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLSB6b29taW5nIGZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBjYW5ab29tSW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmdldERpYWdyYW0oKS5zY2FsZSA8IDMyO1xyXG4gICAgfVxyXG5cclxuICAgIGNhblpvb21PdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmdldERpYWdyYW0oKS5zY2FsZSA+IDAuMjU7XHJcbiAgICB9XHJcblxyXG4gICAgem9vbUluKCkge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGlmIChkaWFncmFtLnNjYWxlIDwgMzIpIHtcclxuICAgICAgICAgICAgbGV0IHZiID0gZGlhZ3JhbS52aWV3cG9ydEJvdW5kcy5jb3B5KCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSBkaWFncmFtLnNjYWxlICogMjtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jZW50ZXJSZWN0KHZiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgem9vbU91dCgpIHtcclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMubWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICBpZiAoZGlhZ3JhbS5zY2FsZSA+IDAuMjUpIHtcclxuICAgICAgICAgICAgbGV0IHZiID0gZGlhZ3JhbS52aWV3cG9ydEJvdW5kcy5jb3B5KCk7XHJcbiAgICAgICAgICAgIGRpYWdyYW0uc2NhbGUgPSBkaWFncmFtLnNjYWxlIC8gMjtcclxuICAgICAgICAgICAgZGlhZ3JhbS5jZW50ZXJSZWN0KHZiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbWF5YmVab29tVG9SZWdpb24oKSB7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLm1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgLy8gdGhpcyBmbGFnIGlzIHNldCBieSB0aGUgdG9vbGJhciBidXR0b25cclxuICAgICAgICBpZiAodGhpcy56b29taW5nVG9SZWdpb24pIHtcclxuICAgICAgICAgICAgdGhpcy56b29taW5nVG9SZWdpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3pvb21Ub1JlZ2lvbiwgc2VsZWN0aW9uIGNvdW50OiAnICsgZGlhZ3JhbS5zZWxlY3Rpb24uY291bnQpO1xyXG4gICAgICAgICAgICBsZXQgcmVjdCA9IGRpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKGRpYWdyYW0uc2VsZWN0aW9uKTtcclxuICAgICAgICAgICAgZGlhZ3JhbS56b29tVG9SZWN0KHJlY3QpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXNldFpvb20oKSB7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLm1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgLy9sZXQgcmVjdCA9IGRpYWdyYW0uY29tcHV0ZVBhcnRzQm91bmRzKGRpYWdyYW0ubm9kZXMpLmNvcHkoKTtcclxuICAgICAgICBsZXQgcmVjdCA9IHRoaXMubWFwLnNhZmVSZWN0KHRoaXMubWFwLmNvbXB1dGVNYXBCb3VuZHMoKSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygncmVzZXRab29tLCBib3VuZHM6ICcgKyByZWN0KTtcclxuICAgICAgICBpZiAocmVjdC53aWR0aCkge1xyXG4gICAgICAgICAgICByZWN0LmluZmxhdGUocmVjdC53aWR0aCAvIDUsIHJlY3QuaGVpZ2h0IC8gNSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpYWdyYW0uem9vbVRvUmVjdChyZWN0KTtcclxuICAgICAgICBkaWFncmFtLmFsaWduRG9jdW1lbnQoZ28uU3BvdC5DZW50ZXIsIGdvLlNwb3QuQ2VudGVyKTtcclxuICAgICAgICBpZiAoZGlhZ3JhbS5zY2FsZSA+IDEpIHtcclxuICAgICAgICAgICAgZGlhZ3JhbS5zY2FsZSA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLSB0aGluZyBvcHRpb25zIChsYXlvdXQpIC0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBnZXRTZWxlY3RlZFRoaW5nc09yRGVmYXVsdExheW91dCAoKSB7XHJcbiAgICAgICAgbGV0IHNsID0gdGhpcy5nZXRTZWxlY3RlZFRoaW5nc0xheW91dCgpO1xyXG4gICAgICAgIGlmIChzbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2w7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hcEVkaXRvck9wdGlvbnMuZGVmYXVsdFRoaW5nTGF5b3V0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIGEgbm9uLW51bGwgdmFsdWUgb25seSBpZiBhbGwgc2VsZWN0ZWQgaXRlbXMgYXJlIGdyb3VwcyB3aXRoIHRoZSBzYW1lIGxheW91dFxyXG4gICAgZ2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQgKCkge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGlmICghZGlhZ3JhbSB8fCBkaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICBsZXQgbGF5b3V0ID0gbnVsbDtcclxuICAgICAgICBsZXQgaXQgPSBkaWFncmFtLnNlbGVjdGlvbi5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGlmICghaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cClcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBsZXQgZ3JvdXAgPSBpdC52YWx1ZTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQsIGl0LnZhbHVlOiAnICsgZ3JvdXApO1xyXG4gICAgICAgICAgICBsZXQgZ3JvdXBMYXlvdXQgPSAoZ3JvdXAuZGF0YSA/IGdyb3VwLmRhdGEubGF5b3V0IDogbnVsbCk7XHJcbiAgICAgICAgICAgIGlmIChsYXlvdXQgIT09IG51bGwgJiYgZ3JvdXBMYXlvdXQgIT09IGxheW91dClcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBsYXlvdXQgPSBncm91cExheW91dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0U2VsZWN0ZWRUaGluZ3NMYXlvdXQ6ICcgKyBsYXlvdXQpO1xyXG5cclxuICAgICAgICByZXR1cm4gbGF5b3V0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldHMgdGhlIGxheW91dCBvZiBhbGwgc2VsZWN0ZWQgdGhpbmdzIHRvIHRoZSBnaXZlbiBsYXlvdXRcclxuICAgIHNldFNlbGVjdGVkVGhpbmdzTGF5b3V0IChsYXlvdXROYW1lKSB7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLm1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgbGV0IGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBkaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShncm91cC5kYXRhLCAnbGF5b3V0JywgbGF5b3V0TmFtZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcC5nZXRMYXlvdXRzKCkuc2V0RGVzY2VuZGFudExheW91dHMoZ3JvdXAsIGdyb3VwLmRhdGEubGF5b3V0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0gcmVsYXRpb25zaGlwIG9wdGlvbnMgKGRpcmVjdGlvbikgLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGdldFNlbGVjdGVkUmVsYXRpb25zaGlwc09yRGVmYXVsdERpcmVjdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IHNkID0gdGhpcy5nZXRTZWxlY3RlZFJlbGF0aW9uc2hpcHNEaXJlY3Rpb24oKTtcclxuICAgICAgICBpZiAoc2QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXBFZGl0b3JPcHRpb25zLmRlZmF1bHRSZWxhdGlvbnNoaXBEaXJlY3Rpb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJldHVybnMgYSBub24tbnVsbCB2YWx1ZSBvbmx5IGlmIGFsbCBzZWxlY3RlZCBpdGVtcyBhcmUgcmVsYXRpb25zaGlwcyB3aXRoIHRoZSBzYW1lIGRpcmVjdGlvblxyXG4gICAgZ2V0U2VsZWN0ZWRSZWxhdGlvbnNoaXBzRGlyZWN0aW9uKCkge1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5tYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIGlmICghZGlhZ3JhbSB8fCBkaWFncmFtLnNlbGVjdGlvbi5jb3VudCA8IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICBsZXQgdHlwZSA9IG51bGw7XHJcbiAgICAgICAgbGV0IGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoIWl0LnZhbHVlIGluc3RhbmNlb2YgZ28uTGluaylcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBsZXQgbGluayA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICBsZXQgbGlua1R5cGUgPSAobGluay5kYXRhID8gbGluay5kYXRhLnR5cGUgOiBudWxsKTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgIT09IG51bGwgJiYgbGlua1R5cGUgIT09IHR5cGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgdHlwZSA9IGxpbmtUeXBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0cyB0aGUgZGlyZWN0aW9uIG9mIGFsbCBzZWxlY3RlZCByZWxhdGlvbnNoaXBzIHRvIHRoZSBnaXZlbiBkaXJlY3Rpb25cclxuICAgIHNldFNlbGVjdGVkUmVsYXRpb25zaGlwc0RpcmVjdGlvbiAoZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgbGV0IGRpYWdyYW0gPSB0aGlzLm1hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgLy9kaWFncmFtLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oJ2NoYW5nZSByZWxhdGlvbnNoaXAgZGlyZWN0aW9uJyk7XHJcbiAgICAgICAgbGV0IGl0ID0gZGlhZ3JhbS5zZWxlY3Rpb24uaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGl0Lm5leHQoKSkge1xyXG4gICAgICAgICAgICBpZiAoaXQudmFsdWUgaW5zdGFuY2VvZiBnby5MaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAvL2RpYWdyYW0ubW9kZWwuc3RhcnRUcmFuc2FjdGlvbignY2hhbmdlIGxpbmsgdHlwZScpO1xyXG4gICAgICAgICAgICAgICAgZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoaXQudmFsdWUuZGF0YSwgJ3R5cGUnLCBkaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgLy9kaWFncmFtLm1vZGVsLmNvbW1pdFRyYW5zYWN0aW9uKCdjaGFuZ2UgbGluayB0eXBlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy9kaWFncmFtLmNvbW1pdFRyYW5zYWN0aW9uKCdjaGFuZ2UgcmVsYXRpb25zaGlwIGRpcmVjdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0gaGFuZGxlIGNvcm5lciBjbGlja3MgYW5kIGRvdWJsZSBjbGlja3MgLS0tLS0tLS1cclxuICAgIGhhbmRsZUNvcm5lckNsaWNrIChjb3JuZXIsIHRoaW5nKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaGFuZGxlQ29ybmVyQ2xpY2s6IGNvcm5lciA9ICcgKyBjb3JuZXIgKyAnLCBjb3JuZXJDbGlja2VkID0gJyArIF9jb3JuZXJDbGlja2VkKTtcclxuICAgICAgICAvLyBhc3N1bWUgaXQncyBhIHNpbmdsZSBjbGljaywgYW5kIHNldCBoYW5kbGVyXHJcbiAgICAgICAgbGV0IF9jb3JuZXJGdW5jdGlvbiA9IHRoaXMuZ2V0Q29ybmVyRnVuY3Rpb24oY29ybmVyLCAxKTtcclxuICAgICAgICAvLyBhbHJlYWR5IGNsaWNrZWQsIHNvIGl0J3MgYSBkb3VibGUgY2xpY2s7IGNoYW5nZSBoYW5kbGVyXHJcbiAgICAgICAgaWYgKHRoaXMuX2Nvcm5lckNsaWNrZWQgPT09IGNvcm5lcikge1xyXG4gICAgICAgICAgICBfY29ybmVyRnVuY3Rpb24gPSB0aGlzLmdldENvcm5lckZ1bmN0aW9uKGNvcm5lciwgMik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoYW5kbGVDb3JuZXJDbGljazogZG91YmxlIGNsaWNrIG9uICcgKyBjb3JuZXIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJlbWVtYmVyIHRoYXQgYXQgbGVhc3Qgb25lIGNsaWNrIGhhcyBoYXBwZW5lZCBmb3IgdGhlIGN1cnJlbnQgY29ybmVyXHJcbiAgICAgICAgdGhpcy5fY29ybmVyQ2xpY2tlZCA9IGNvcm5lcjtcclxuXHJcbiAgICAgICAgLy8gc2V0IHRpbWVyIHRvIGludm9rZSB3aGF0ZXZlciBoYW5kbGVyIHdlIGhhdmUgcmVhZHkgdG8gZ28gKHVubGVzcyBhbm90aGVyIGNsaWNrIGhhcHBlbnMgd2l0aGluIHRoZSBpbnRlcnZhbClcclxuICAgICAgICBsZXQgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgLy8gZGluZyEgaW52b2tlIGl0XHJcbiAgICAgICAgICAgIGlmIChfY29ybmVyRnVuY3Rpb24gPT09IHRoaXMuc2hvd0Nvcm5lclRpcCkge1xyXG4gICAgICAgICAgICAgICAgX2Nvcm5lckZ1bmN0aW9uKHRoaW5nLCBjb3JuZXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2Nvcm5lckZ1bmN0aW9uKHRoaW5nKTsgLy8gZG9uJ3QgcGFzcyB0aGUgY29ybmVyIGFyZyB0byB0aGluZ3MgbGlrZSBjcmVhdGVDaGlsZCB0aGF0IGhhdmUgYSBkaWZmZXJlbnQgc2Vjb25kIGFyZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IGhhbmRsZXIgYW5kIGNsaWNrZWQgZmxhZ1xyXG4gICAgICAgICAgICBfY29ybmVyRnVuY3Rpb24gPSB0aGlzLmdldENvcm5lckZ1bmN0aW9uKGNvcm5lciwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Nvcm5lckNsaWNrZWQgPSBudWxsO1xyXG4gICAgICAgIH0sIHRoaXMuX2Nvcm5lclRpbWVvdXQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvcm5lckZ1bmN0aW9uKGNvcm5lciwgY2xpY2tzKSB7XHJcbiAgICAgICAgaWYgKGNvcm5lciA9PT0gJ0QnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5zaG93Q29ybmVyVGlwIDogdGhpcy5tYXAuY3JlYXRlU2lzdGVyKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gJ1MnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5tYXAudG9nZ2xlU0V4cGFuc2lvbiA6IHRoaXMubWFwLmNyZWF0ZUNoaWxkKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gJ1InKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5zaG93Q29ybmVyVGlwIDogdGhpcy5tYXAuY3JlYXRlUlRvU2lzdGVyKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gJ1AnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY2xpY2tzID09PSAxID8gdGhpcy5tYXAudG9nZ2xlUEV4cGFuc2lvbiA6IHRoaXMubWFwLmdldFBlcnNwZWN0aXZlcygpLnNldFBFZGl0b3JQb2ludCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3JuZXIgPT09ICcnKSB7IC8vIGNsaWNrIG9uIHRleHRcclxuICAgICAgICAgICAgcmV0dXJuIChjbGlja3MgPT09IDEgPyB0aGlzLnNob3dDb3JuZXJUaXAgOiB0aGlzLmVkaXRUZXh0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldENvcm5lckZ1bmN0aW9uOiBubyBmdW5jdGlvbiBmb3VuZCBmb3IgY29ybmVyOiAnICsgY29ybmVyICsgJyEnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTkI6IGluIHRoaXMgY2FzZSB0aGUgdGhpbmcgaXMgYWN0dWFsbHkgdGhlIFRleHRCb3gsIGV4Y2VwdCBpbiBvdXRsaW5lIGxheW91dCBpdCBpcyBhIFBhbmVsIGlmIHRoZSBib3ggaXMgZG91YmxlLWNsaWNrZWQuLi5cclxuICAgIGVkaXRUZXh0KHRoaW5nLCBjb3JuZXIpIHtcclxuICAgICAgICBpZiAoIXRoaXMuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdlZGl0VGV4dCwgdGhpbmc6ICcgKyB0aGluZyk7XHJcbiAgICAgICAgaWYgKHRoaW5nIGluc3RhbmNlb2YgZ28uUGFuZWwpIHsgLy8gb3V0bGluZSBsYXlvdXRcclxuICAgICAgICAgICAgbGV0IHBhcnQgPSB0aGluZy5wYXJ0O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZWRpdFRleHQsIHBhcnQ6ICcgKyBwYXJ0KTtcclxuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBnby5Hcm91cCAmJiBwYXJ0LmRhdGEgJiYgKHBhcnQuZGF0YS5sYXlvdXQgPT09ICdsZWZ0JyB8fCBwYXJ0LmRhdGEubGF5b3V0ID09PSAncmlnaHQnKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRleHRCbG9ja05hbWUgPSAnZXh0ZXJuYWx0ZXh0LScgKyBwYXJ0LmRhdGEubGF5b3V0O1xyXG4gICAgICAgICAgICAgICAgbGV0IHRleHQgPSB0aGluZy5wYXJ0LmZpbmRPYmplY3QodGV4dEJsb2NrTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaW5nID0gdGV4dDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1hcC5nZXREaWFncmFtKCkuY29tbWFuZEhhbmRsZXIuZWRpdFRleHRCbG9jayh0aGluZyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0gaGVscCB0aXAgZnVuY3Rpb25zIC0gc2VlIGFsc28gdXNlci5qcywgdmlld3MvbWFwcy9oZWxwX3RhYiAtLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBzaG93cyB0aGluZ1RpcCBvciBvbmUgb2YgdGhlIGNvcm5lclhUaXBzXHJcbiAgICBzaG93Q29ybmVyVGlwKHRoaW5nLCBjb3JuZXIpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdzaG93Q29ybmVyVGlwJyk7XHJcbiAgICAgICAgaWYgKGNvcm5lciA9PT0gJycpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93SGVscFRpcCgndGhpbmdUaXAnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dIZWxwVGlwKCdjb3JuZXInICsgY29ybmVyICsgJ1RpcCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93SGVscFRpcCh0aXApIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdzaG93SGVscFRpcDogJyArIHRpcCk7XHJcblxyXG4gICAgICAgIC8vIGRvbid0IHNob3cgaGVscCBpZiBpbiBwcmVzZW50ZXJcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VGFiSXMoVEFCUy5UQUJfSURfUFJFU0VOVEVSKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmhlbHBUaXAgPSB0aXA7XHJcbiAgICAgICAgLy90aGlzLnNhZmVBcHBseSgpO1xyXG4gICAgICAgICQoJyNoZWxwLXRpcCcpLnNob3coKTtcclxuXHJcbiAgICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgICAgICAgICAkKCcjaGVscC10aXAnKS5mYWRlT3V0KDUwMCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oZWxwVGlwID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5zYWZlQXBwbHkoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgNTAwMCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFVJOyIsIi8vIGZ1bmN0aW9ucyBoYW5kbGluZyBlZGl0b3IgYXV0b3NhdmUgZnVuY3Rpb25cclxuY29uc3QgJGh0dHAgPSB7XHJcbiAgICBwdXQ6ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4geyB9KTtcclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IGNoYW5nZURlc2NyaXB0aW9ucyA9IHtcclxuICAgIG1vdmU6ICdNb3ZlZCBPYmplY3RzJyxcclxuICAgIHVuZG9fcmVkbzogJ1BlcmZvcm1lZCBVbmRvL1JlZG8nLFxyXG4gICAgZWRpdF90aXRsZTogJ0VkaXRlZCBNZXRhTWFwIFRpdGxlJyxcclxuICAgIGVkaXRfZGVzY3JpcHRpb246ICdFZGl0ZWQgTWV0YU1hcCBEZXNjcmlwdGlvbicsXHJcbiAgICBlZGl0X3VzZXJ0YWdzOiAnRWRpdCBNZXRhTWFwIFRhZ3MnLFxyXG4gICAgZWRpdF9kOiAnRWRpdGVkIERpc3RpbmN0aW9ucycsXHJcbiAgICBlZGl0X3M6ICdFZGl0ZWQgU3lzdGVtcycsXHJcbiAgICBlZGl0X3I6ICdFZGl0ZWQgUmVsYXRpb25zaGlwcycsXHJcbiAgICBlZGl0X3A6ICdFZGl0ZWQgUGVyc3BlY3RpdmVzJyxcclxuICAgIGFkZF90aGluZzogJ0FkZGVkIElkZWFzJyxcclxuICAgIHJlbmFtZV90aGluZzogJ1JlbmFtZWQgSWRlYXMnLFxyXG4gICAgZGVsZXRlX3RoaW5nOiAnRGVsZXRlZCBJZGVhcycsXHJcbiAgICBlZGl0X2F0dGFjaG1lbnRzOiAnRWRpdGVkIEF0dGFjaG1lbnRzJyxcclxuICAgIGVkaXRfcHJlc2VudGVyOiAnRWRpdGVkIFByZXNlbnRlciBTbGlkZXMnLFxyXG4gICAgZWRpdF9nZW5lcmF0b3I6ICdJbnNlcnRlZCBJZGVhcyBmcm9tIFRoaW5rUXVlcnknLFxyXG4gICAgZWRpdF9zdGFuZGFyZHM6ICdFZGl0ZWQgTGlua3MgdG8gQ29tbW9uIENvcmUgU3RhbmRhcmRzJ1xyXG59O1xyXG5cclxuY29uc3QgZ28gPSB3aW5kb3cuZ287XHJcblxyXG5jbGFzcyBBdXRvc2F2ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmNoYW5nZVR5cGVzID0gW107XHJcbiAgICAgICAgdGhpcy5zYXZlT25Nb2RlbENoYW5nZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmUoY2hhbmdlVHlwZSkge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlVHlwZXMucHVzaChjaGFuZ2VUeXBlKTtcclxuICAgICAgICB0aGlzLmRlbGF5ZWRBdXRvc2F2ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRvIGEgc2F2ZSByaWdodCBub3dcclxuICAgIHNhdmVOb3coY2hhbmdlVHlwZSkge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlVHlwZXMucHVzaChjaGFuZ2VUeXBlKTtcclxuICAgICAgICB0aGlzLmF1dG9zYXZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZG9uJ3QgbGV0IGF1dG9zYXZlIGJlIHRyaWdnZXJlZCBtb3JlIHRoYW4gZXZlcnkgTiBtaWxsaXNlY29uZHMuLi5cclxuICAgIGdldCBkZWxheWVkQXV0b3NhdmUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9kZWxheWVkQXV0b1NhdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsYXllZEF1dG9TYXZlID0gXy5kZWJvdW5jZSh0aGlzLmF1dG9zYXZlLCAyMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGF5ZWRBdXRvU2F2ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjb21waWxlIHRoZSBjdXJyZW50IGxpc3Qgb2YgY2hhbmdlIHR5cGUgZGVzY3JpcHRpb25zLCBwcm9jZXNzIHRoZW0gXHJcbiAgICAvLyB0byByZW1vdmUgZHVwbGljYXRlcywgYW5kIHNhdmUgdGhlIGN1cnJlbnQgZGF0YVxyXG4gICAgYXV0b3NhdmUoKSB7XHJcbiAgICAgICAgLy8gc3RvcCByaWdodCBoZXJlIGlmIHdlJ3JlIGluIHRoZSBzYW5kYm94IGFuZC9vciB3ZSBkb24ndCBoYXZlIGVkaXQgcGVybWlzc2lvbnNcclxuICAgICAgICBpZiAodGhpcy5fZWRpdG9yLnNhbmRib3ggfHwgIXRoaXMuX2VkaXRvci5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5jaGFuZ2VUeXBlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2F1dG9zYXZlOiBub3RoaW5nIHRvIHNhdmUhJyk7IC8vIHNob3VsZG4ndCBoYXBwZW5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZGUtZHVwZSB0aGUgbGlzdCBvZiBjaGFuZ2UgdHlwZXNcclxuICAgICAgICBsZXQgY2hhbmdlTGlzdCA9IF8udW5pcSh0aGlzLmNoYW5nZVR5cGVzKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjaGFuZ2VMaXN0OiAnICsgY2hhbmdlTGlzdCk7XHJcbiAgICAgICAgLy8gZG9uJ3Qgc2hvdyBtb3ZlIGV2ZW50cyB1bmxlc3MgdGhhdCdzIGFsbCB3ZSBoYXZlXHJcbiAgICAgICAgbGV0IGNoYW5nZUxpc3RXaXRob3V0TW92ZXMgPSBfLndpdGhvdXQoY2hhbmdlTGlzdCwgJ21vdmUnKTtcclxuICAgICAgICBpZiAoY2hhbmdlTGlzdFdpdGhvdXRNb3Zlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZUxpc3QgPSBjaGFuZ2VMaXN0V2l0aG91dE1vdmVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjaGFuZ2VMaXN0IHdpdGhvdXQgbW92ZXM6ICcgKyBjaGFuZ2VMaXN0KTtcclxuICAgICAgICAvLyBnZXQgZGVzY3JpcHRpb25zXHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uTGlzdCA9IF8ubWFwKGNoYW5nZUxpc3QsIChjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gXy5yZXN1bHQoY2hhbmdlRGVzY3JpcHRpb25zLCBjdCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2F1dG9zYXZlLCBjaGFuZ2VMaXN0OiAnICsgY2hhbmdlTGlzdCArICcsIGRlc2NyaXB0aW9uTGlzdDogJyArIGRlc2NyaXB0aW9uTGlzdCk7XHJcbiAgICAgICAgbGV0IHBvc3REYXRhID0ge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogdGhpcy5fZWRpdG9yLm1hcFRpdGxlLFxyXG4gICAgICAgICAgICBcImRhdGFcIjogdGhpcy5fbWFwLmdldERpYWdyYW0oKS5tb2RlbC50b0pzb24oKSxcclxuICAgICAgICAgICAgXCJzdGF0ZV9kYXRhXCI6IEpTT04uc3RyaW5naWZ5KHRoaXMuX21hcC5nZXRVaSgpLmdldFN0YXRlRGF0YSgpKSxcclxuICAgICAgICAgICAgXCJlZGl0b3Jfb3B0aW9uc1wiOiBKU09OLnN0cmluZ2lmeSh0aGlzLl9tYXAuZ2V0VWkoKS5nZXRNYXBFZGl0b3JPcHRpb25zKCkpLFxyXG4gICAgICAgICAgICBcInByZXNlbnRlcl9zbGlkZXNcIjogdGhpcy5fbWFwLmdldFByZXNlbnRlcigpLmdldFNsaWRlQ291bnQoKSxcclxuICAgICAgICAgICAgXCJhY3Rpdml0eV9zbGlkZXNcIjogdGhpcy5fbWFwLmdldFByZXNlbnRlcigpLmdldEFjdGl2aXR5U2xpZGVDb3VudCgpLFxyXG4gICAgICAgICAgICBcImNoYW5nZV90eXBlXCI6IGNoYW5nZUxpc3Quam9pbignOycpLFxyXG4gICAgICAgICAgICBcImNoYW5nZV9kZXNjcmlwdGlvblwiOiBkZXNjcmlwdGlvbkxpc3Quam9pbignOyAnKSxcclxuICAgICAgICAgICAgXCJ0aHVtYm5haWxfcG5nXCI6IHRoaXMuX21hcC5nZXRQcmVzZW50ZXIoKS5nZXRNYXBUaHVtYm5haWwoKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IHVybCA9IHRoaXMuX2VkaXRvci5tYXBVcmwgKyAnLmpzb24nO1xyXG5cclxuICAgICAgICB0aGlzLl9lZGl0b3IudXBkYXRlRWRpdFN0YXR1cyh0aGlzLl9lZGl0b3IuU0FWSU5HKTtcclxuICAgICAgICAkaHR0cC5wdXQodXJsLCBwb3N0RGF0YSkudGhlbihcclxuICAgICAgICAgICAgKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVR5cGVzID0gW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lZGl0b3IudXBkYXRlRWRpdFN0YXR1cyh0aGlzLl9lZGl0b3IuU0FWRV9PSyk7XHJcbiAgICAgICAgICAgICAgICAvLyBsb2FkIHJldHVybmVkIGRhdGEgZm9yIGFuYWx5dGljcywgcG9pbnRzLCBiYWRnZXMsIHZlcnNpb25zXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lZGl0b3IudGhpcy5fbWFwLmxvYWRNYXBFeHRyYURhdGEocmVzcG9uc2UuZGF0YS5tYXApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lZGl0b3IudXBkYXRlRWRpdFN0YXR1cyh0aGlzLl9lZGl0b3IuU0FWRV9GQUlMRUQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tIGhhbmRsZSBtb2RlbCBjaGFuZ2VzIC0gdHJpZ2dlciBhdXRvc2F2ZSAtLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblxyXG5cclxuICAgIC8vIGUgaXMgYSBnby5DaGFuZ2VkRXZlbnRcclxuICAgIG1vZGVsQ2hhbmdlZChlKSB7XHJcblxyXG4gICAgICAgIGlmICghc2VsZi5zYXZlT25Nb2RlbENoYW5nZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGNoYW5nZVR5cGUgPSBudWxsO1xyXG4gICAgICAgIGxldCBjaGFuZ2VEZXNjcmlwdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChlLnByb3BlcnR5TmFtZSA9PT0gJ3R5cGUnKSB7XHJcbiAgICAgICAgICAgIC8vIGNoYW5nZSBSIHR5cGVcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsbiwxLG8sMixBLDMsciw0LHIsNSxvLDYsdyw3LHNdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCx0LDEsb10gLCBwcm9wZXJ0eU5hbWU6IHR5cGVcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3InO1xyXG4gICAgICAgICAgICBjaGFuZ2VEZXNjcmlwdGlvbiA9ICdDaGFuZ2VkIFJlbGF0aW9uc2hpcCBUeXBlcyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PT0gJ2xheW91dCcpIHtcclxuICAgICAgICAgICAgLy8gY2hhbmdlIHN5c3RlbSBsYXlvdXRcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsbCwxLGUsMixmLDMsdF0gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLHIsMSxpLDIsZywzLGgsNCx0XSAsIHByb3BlcnR5TmFtZTogbGF5b3V0IFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLmNoYW5nZSA9PT0gZ28uQ2hhbmdlZEV2ZW50Lkluc2VydCAmJiB0aGlzLnByb3BlcnR5RXF1YWxzKGUubmV3VmFsdWUsICdmcm9tUG9ydCcsICdSJykpIHtcclxuICAgICAgICAgICAgLy8gYWRkIGxpbmtcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiAxLCBuZXdWYWx1ZTogW3R5cGUsbm9BcnJvd3MsX19nb2hhc2hpZCw2MDA1LGZyb20sLTIsdG8sLTQsbGFiZWxLZXlzLCxmcm9tUG9ydCxSLHRvUG9ydCxQXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua1RvUG9ydElkLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCxQXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsUl0gLCBwcm9wZXJ0eU5hbWU6IHRvUG9ydCBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3InO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5jaGFuZ2UgPT09IGdvLkNoYW5nZWRFdmVudC5SZW1vdmUgJiYgdGhpcy5wcm9wZXJ0eUVxdWFscyhlLm9sZFZhbHVlLCAnZnJvbVBvcnQnLCAnUicpKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiAxLCBvbGRWYWx1ZTogW3R5cGUsbm9BcnJvd3MsX19nb2hhc2hpZCw2MDA1LGZyb20sLTIsdG8sLTQsbGFiZWxLZXlzLCxmcm9tUG9ydCxSLHRvUG9ydCxSXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9yJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09PSAnbGlua0RhdGFBcnJheScpIHtcclxuICAgICAgICAgICAgLy8gY2hhbmdlIFAvRCBsaW5rc1xyXG4gICAgICAgICAgICAvLyBhZGQgUCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogMiwgbmV3VmFsdWU6IFt0eXBlLG5vQXJyb3dzLF9fZ29oYXNoaWQsMTkxMjIsZnJvbSwtMix0bywtNCxsYWJlbEtleXMsLGZyb21Qb3J0LFAsdG9Qb3J0LFBdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogbGlua0NhdGVnb3J5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsUF0gLCBwcm9wZXJ0eU5hbWU6IGNhdGVnb3J5IFxyXG4gICAgICAgICAgICAvLyBkZWxldGUgUCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiAyLCBvbGRWYWx1ZTogW3R5cGUsbm9BcnJvd3MsX19nb2hhc2hpZCwxOTEyMixmcm9tLC0yLHRvLC00LGxhYmVsS2V5cywsZnJvbVBvcnQsUCx0b1BvcnQsUCxjYXRlZ29yeSxQXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGxpbmtEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIC8vIGFkZCBEIGxpbmtcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IGxpbmtEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiAxLCBuZXdWYWx1ZTogW2Zyb20sLTcsdG8sLTUsZnJvbVBvcnQsRCx0b1BvcnQsRCxjYXRlZ29yeSxELF9fZ29oYXNoaWQsMTk1MjJdICwgcHJvcGVydHlOYW1lOiBsaW5rRGF0YUFycmF5IFxyXG4gICAgICAgICAgICAvLyByZW1vdmUgRCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBsaW5rRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiAxLCBvbGRWYWx1ZTogW2Zyb20sLTcsdG8sLTUsZnJvbVBvcnQsRCx0b1BvcnQsRCxjYXRlZ29yeSxELF9fZ29oYXNoaWQsMTk1MjJdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbXSAsIHByb3BlcnR5TmFtZTogbGlua0RhdGFBcnJheSBcclxuXHJcbiAgICAgICAgICAgIGlmICgoZS5uZXdWYWx1ZSAmJiBlLm5ld1ZhbHVlLmNhdGVnb3J5ID09PSAnUCcpIHx8XHJcbiAgICAgICAgICAgICAgICAoZS5vbGRWYWx1ZSAmJiBlLm9sZFZhbHVlLmNhdGVnb3J5ID09PSAnUCcpKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfcCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGUubmV3VmFsdWUgJiYgZS5uZXdWYWx1ZS5jYXRlZ29yeSA9PT0gJ0QnKSB8fFxyXG4gICAgICAgICAgICAgICAgKGUub2xkVmFsdWUgJiYgZS5vbGRWYWx1ZS5jYXRlZ29yeSA9PT0gJ0QnKSkge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X2QnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PT0gJ2NhdGVnb3J5Jykge1xyXG4gICAgICAgICAgICAvLyBhZGQgUCBsaW5rXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlZCwgbW9kZWxDaGFuZ2U6IGxpbmtDYXRlZ29yeSwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLFBdICwgcHJvcGVydHlOYW1lOiBjYXRlZ29yeSBcclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3AnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT09ICdncm91cCcpIHtcclxuICAgICAgICAgICAgLy8gZHJhZyBpbnRvIFNcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG4gICAgICAgICAgICAvLyByZW9yZGVyIHBhcnRcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG4gICAgICAgICAgICAvLyBkcmFnIHRvIERcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2VkLCBtb2RlbENoYW5nZTogbm9kZUdyb3VwS2V5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGdyb3VwIFxyXG5cclxuICAgICAgICAgICAgY2hhbmdlVHlwZSA9ICdlZGl0X3MnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT09ICdub2RlRGF0YUFycmF5JyAmJiBlLmNoYW5nZSA9PT0gZ28uQ2hhbmdlZEV2ZW50Lkluc2VydCAmJiB0aGlzLnByb3BlcnR5RXF1YWxzKGUubmV3VmFsdWUsICdpc0dyb3VwJywgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgLy8gYWRkIHRoaW5nXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiBub2RlRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5JbnNlcnQsIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogNSwgbmV3VmFsdWU6IFt0ZXh0LE5ldyBJZGVhLGlzR3JvdXAsdHJ1ZSxsZXZlbCwwLGxheW91dCxsZWZ0LHNFeHBhbmRlZCx0cnVlLHBFeHBhbmRlZCxmYWxzZSxkRXhwYW5kZWQsZmFsc2UsX19nb2hhc2hpZCw1NDY4OCxncm91cCwsa2V5LC03XSAsIHByb3BlcnR5TmFtZTogbm9kZURhdGFBcnJheSBcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogW10gLCBuZXdQYXJhbTogbnVsbCwgbmV3VmFsdWU6IFswLDIsMSwyLDIsOCwzLC4sNCw1LDUsNiw2LDIsNyw1LDgsICw5LC0sMTAsMSwxMSw0LDEyLDksMTMsLiwxNCw2LDE1LDgsMTYsNywxNyw1XSAsIHByb3BlcnR5TmFtZTogbG9jIFxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGNoaWxkcmVuIFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2FkZF90aGluZyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PT0gJ3RleHQnKSB7XHJcbiAgICAgICAgICAgIC8vIG1vdmUgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6ICwgY2hhbmdlOiBDaGFuZ2VkRXZlbnQuUHJvcGVydHksIG9sZFBhcmFtOiBudWxsLCBvbGRWYWx1ZTogWzAsYiwxLGIsMixiLDMsYiw0LGJdICwgbmV3UGFyYW06IG51bGwsIG5ld1ZhbHVlOiBbMCxhLDEsYSwyLGEsMyxhLDQsYV0gLCBwcm9wZXJ0eU5hbWU6IHRleHQgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAncmVuYW1lX3RoaW5nJztcclxuICAgICAgICAgICAgY2hhbmdlRGVzY3JpcHRpb24gPSAnUmVuYW1lZCBJZGVhcyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PT0gJ25vZGVEYXRhQXJyYXknICYmIGUuY2hhbmdlID09PSBnby5DaGFuZ2VkRXZlbnQuUmVtb3ZlICYmIHRoaXMucHJvcGVydHlFcXVhbHMoZS5vbGRWYWx1ZSwgJ2lzR3JvdXAnLCB0cnVlKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgdGhpbmdcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlJlbW92ZSwgb2xkUGFyYW06IDUsIG9sZFZhbHVlOiBbdGV4dCxOZXcgSWRlYSxpc0dyb3VwLHRydWUsbGV2ZWwsMCxsYXlvdXQsbGVmdCxzRXhwYW5kZWQsdHJ1ZSxwRXhwYW5kZWQsZmFsc2UsZEV4cGFuZGVkLGZhbHNlLF9fZ29oYXNoaWQsNTQ2ODgsZ3JvdXAsLGtleSwtNyxsb2MsMjI4LjU2MjUgLTE0OS42ODc1LGNoaWxkcmVuLDAsYXR0YWNobWVudHMsXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IG5vZGVEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZGVsZXRlX3RoaW5nJztcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09PSAnbm9kZURhdGFBcnJheScgJiYgZS5jaGFuZ2UgPT09IGdvLkNoYW5nZWRFdmVudC5JbnNlcnQgJiYgdGhpcy5wcm9wZXJ0eUVxdWFscyhlLm5ld1ZhbHVlLCAnaXNHcm91cCcsIGZhbHNlKSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgc2xpZGVcclxuICAgICAgICAgICAgLy8gbW9kZWxDaGFuZ2U6IG5vZGVEYXRhQXJyYXksIGNoYW5nZTogQ2hhbmdlZEV2ZW50Lkluc2VydCwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiA1LCBuZXdWYWx1ZTogW2tleSxzbGlkZS0wLGNhdGVnb3J5LHNsaWRlLGluZGV4LDAsaXNHcm91cCxmYWxzZSx3aWR0aCwyMDAsaGVpZ2h0LDIwMCxsb2MsMTU2LjU2MjUgLTk3LjY4NzUsbGV2ZWwsMCxjaGlsZHJlbiwwLHRpdGxlLCxub3RlcywsX19nb2hhc2hpZCw2Mzg3N10gLCBwcm9wZXJ0eU5hbWU6IG5vZGVEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9wcmVzZW50ZXInO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT09ICdub2RlRGF0YUFycmF5JyAmJiBlLmNoYW5nZSA9PT0gZ28uQ2hhbmdlZEV2ZW50LlJlbW92ZSAmJiB0aGlzLnByb3BlcnR5RXF1YWxzKGUub2xkVmFsdWUsICdpc0dyb3VwJywgZmFsc2UpKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSBzbGlkZVxyXG4gICAgICAgICAgICAvL21vZGVsQ2hhbmdlOiBub2RlRGF0YUFycmF5LCBjaGFuZ2U6IENoYW5nZWRFdmVudC5SZW1vdmUsIG9sZFBhcmFtOiA1LCBvbGRWYWx1ZTogW2tleSxzbGlkZS0wLGNhdGVnb3J5LHNsaWRlLGluZGV4LDAsaXNHcm91cCxmYWxzZSx3aWR0aCwyMDAsaGVpZ2h0LDIwMCxsb2MsMTU2LjU2MjUgLTk3LjY4NzUsbGV2ZWwsMCxjaGlsZHJlbiwwLHRpdGxlLCxub3RlcywsX19nb2hhc2hpZCw2Mzg3NywkJGhhc2hLZXksMFhOXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IG5vZGVEYXRhQXJyYXkgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnZWRpdF9wcmVzZW50ZXInO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT09ICdsb2MnIHx8IGUucHJvcGVydHlOYW1lID09PSAnd2lkdGgnIHx8IGUucHJvcGVydHlOYW1lID09PSAnaGVpZ2h0Jykge1xyXG4gICAgICAgICAgICAvLyBtb3ZlIHRoaW5nIG9yIHJlc2l6ZSBzbGlkZVxyXG4gICAgICAgICAgICAvLyBtb3ZlIHNsaWRlXHJcbiAgICAgICAgICAgIC8vIG1vZGVsQ2hhbmdlOiAsIGNoYW5nZTogQ2hhbmdlZEV2ZW50LlByb3BlcnR5LCBvbGRQYXJhbTogbnVsbCwgb2xkVmFsdWU6IFswLDIsMSw0LDIsMywzLCAsNCwtLDUsMSw2LDIsNyw4XSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsMiwxLDQsMiwzLDMsICw0LC0sNSwxLDYsMiw3LDddICwgcHJvcGVydHlOYW1lOiBsb2MgXHJcbiAgICAgICAgICAgIC8vIHJlc2l6ZSBzbGlkZVxyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbXSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogW10gLCBwcm9wZXJ0eU5hbWU6IGhlaWdodCBcclxuICAgICAgICAgICAgLy8gbW92ZSB0aGluZ1xyXG4gICAgICAgICAgICAvLyBtb2RlbENoYW5nZTogLCBjaGFuZ2U6IENoYW5nZWRFdmVudC5Qcm9wZXJ0eSwgb2xkUGFyYW06IG51bGwsIG9sZFZhbHVlOiBbMCw0LDEsNywyLDksMywuLDQsOCw1LDcsNiw1LDcsICw4LC0sOSwxLDEwLDIsMTEsMiwxMiwuLDEzLDgsMTQsNywxNSw1XSAsIG5ld1BhcmFtOiBudWxsLCBuZXdWYWx1ZTogWzAsNSwxLDQsMiwwLDMsLiw0LDMsNSwxLDYsMiw3LDUsOCwgLDksLSwxMCwxLDExLDIsMTIsMSwxMywuLDE0LDEsMTUsOCwxNiw3LDE3LDVdICwgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnbW92ZSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PT0gJ2xldmVsJyB8fCBlLnByb3BlcnR5TmFtZSA9PT0gJ2NoaWxkcmVuJykge1xyXG4gICAgICAgICAgICAvLyB0aGVzZSBhdHRyaWJ1dGVzIGFyZSB1cGRhdGVkIGFzIGEgcmVzdWx0IG9mIG90aGVyIGFjdGlvbnM7IGlnbm9yZVxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gbnVsbDtcclxuICAgICAgICB9IGVsc2UgaWYgKGUucHJvcGVydHlOYW1lID09PSAnYXR0YWNobWVudHMnKSB7XHJcbiAgICAgICAgICAgIC8vIGVkaXRlZCBhdHRhY2htZW50c1xyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlID0gJ2VkaXRfYXR0YWNobWVudHMnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5wcm9wZXJ0eU5hbWUgPT09ICdzRXhwYW5kZWQnIHx8IGUucHJvcGVydHlOYW1lID09PSAncEV4cGFuZGVkJykge1xyXG4gICAgICAgICAgICAvLyBpZ25vcmUgZXhwYW5kL2NvbGxhcHNlXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAnbW92ZSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnByb3BlcnR5TmFtZSA9PT0gJ0ZpbmlzaGVkVW5kbycgfHwgZS5wcm9wZXJ0eU5hbWUgPT09ICdGaW5pc2hlZFJlZG8nKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGUgPSAndW5kb19yZWRvJztcclxuICAgICAgICAgICAgdGhpcy5fbWFwLnJlZnJlc2goKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUuY2hhbmdlICE9PSBnby5DaGFuZ2VkRXZlbnQuVHJhbnNhY3Rpb24pIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ21vZGVsQ2hhbmdlZCwgbW9kZWxDaGFuZ2U6ICcgKyBlLm1vZGVsQ2hhbmdlICtcclxuICAgICAgICAgICAgICAgICcsIGNoYW5nZTogJyArIGUuY2hhbmdlICtcclxuICAgICAgICAgICAgICAgICcsIG9sZFBhcmFtOiAnICsgZS5vbGRQYXJhbSArXHJcbiAgICAgICAgICAgICAgICAnLCBvbGRWYWx1ZTogWycgKyBfLnBhaXJzKGUub2xkVmFsdWUpICsgJ10gJyArXHJcbiAgICAgICAgICAgICAgICAnLCBuZXdQYXJhbTogJyArIGUubmV3UGFyYW0gK1xyXG4gICAgICAgICAgICAgICAgJywgbmV3VmFsdWU6IFsnICsgXy5wYWlycyhlLm5ld1ZhbHVlKSArICddICcgK1xyXG4gICAgICAgICAgICAgICAgJywgcHJvcGVydHlOYW1lOiAnICsgZS5wcm9wZXJ0eU5hbWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXRBbmFseXRpY3MoKS51cGRhdGVDb250ZXh0dWFsQW5hbHl0aWNzKCk7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NhbGxpbmcgZGVsYXllZEF1dG9zYXZlLCBjaGFuZ2VUeXBlOiAnICsgY2hhbmdlVHlwZSk7XHJcbiAgICAgICAgICAgIHNlbGYuc2F2ZShjaGFuZ2VUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIGNoZWNraW5nIHByb3BlcnRpZXNcclxuICAgIHByb3BlcnR5RXF1YWxzKG9iaiwga2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBvYmogIT09IG51bGwgJiYgXy5oYXMob2JqLCBrZXkpICYmIF8ucmVzdWx0KG9iaiwga2V5KSA9PT0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEF1dG9zYXZlOyIsImNvbnN0IGVkaXRTdGF0dXMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMvZWRpdFN0YXR1cy5qcycpO1xyXG5jb25zdCBjb21tb24gPSByZXF1aXJlKCcuLi90b29scy9Db21tb24uanMnKTtcclxuY29uc3QgQkFDS1NQQUNFID0gODtcclxuY29uc3QgTWFwID0gcmVxdWlyZSgnLi9NYXAuanMnKTtcclxuXHJcbmNsYXNzIEVkaXRvciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IobWFwRGF0YSkge1xyXG4gICAgICAgIHRoaXMubWFwRGF0YSA9IG1hcERhdGE7XHJcbiAgICAgICAgbGV0IG1ldGFkYXRhID0gbWFwRGF0YS5tYXAubWV0YWRhdGE7XHJcbiAgICAgICAgdGhpcy5zYW5kYm94ID0gbWV0YWRhdGEuc2FuZGJveDtcclxuICAgICAgICB0aGlzLm1hcERhdGEgPSB3aW5kb3cubWFwRGF0YS5tYXAuZGF0YTsgLy8gdGhpcyBnZXRzIG92ZXJ3cml0dGVuIGJ5IGxvYWQoKSB1bmxlc3Mgd2UgYXJlIGluIHRoZSBzYW5kYm94IHdpdGggbm8gbWFwIElEXHJcbiAgICAgICAgdGhpcy5tYXBJZCA9IG1ldGFkYXRhLmlkO1xyXG4gICAgICAgIHRoaXMubWFwVGl0bGUgPSBtZXRhZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMubWFwVXNlclRhZ3MgPSBtZXRhZGF0YS51c2VyVGFncztcclxuICAgICAgICB0aGlzLm1hcFVybCA9IG1ldGFkYXRhLnVybDtcclxuICAgICAgICB0aGlzLmNhbkVkaXQgPSBtZXRhZGF0YS5jYW5FZGl0O1xyXG4gICAgICAgIHRoaXMudXBkYXRlZEF0ID0gbWV0YWRhdGEudXBkYXRlZEF0O1xyXG4gICAgICAgIHRoaXMudXBkYXRlZEJ5ID0gbWV0YWRhdGEudXBkYXRlZEJ5OyAvLyBJRFxyXG4gICAgICAgIHRoaXMudXBkYXRlZEJ5TmFtZSA9IG1ldGFkYXRhLnVwZGF0ZWRCeU5hbWU7XHJcbiAgICAgICAgdGhpcy5lZGl0aW5nVGl0bGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmVkaXRTdGF0dXMgPSAnJztcclxuXHJcbiAgICAgICAgdGhpcy5zaG93SW1hZ2VFeHBvcnQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmltYWdlRXhwb3J0TG9hZGluZyA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudFRhYiA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIG92ZXJyaWRlIHBhcmVudCBzY29wZSAoc2VlIHVzZXIuanMpIHNpbmNlIHdlJ3JlIGVkaXRpbmcgYSBtYXBcclxuICAgICAgICAvL3RoaXMuY2NzVGFnZ2luZy5tYXBJZCA9IHRoaXMubWFwSWQ7XHJcblxyXG4gICAgICAgIHRoaXMubWFwID0gbmV3IE1hcCh7IEVkaXRvcjogdGhpcyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXRoaXMuc2FuZGJveCkge1xyXG4gICAgICAgICAgICAvLyBvdmVydmlldyBkaWFncmFtXHJcbiAgICAgICAgICAgIC8vbGV0IG92ZXJ2aWV3ID0gZ28uR3JhcGhPYmplY3QubWFrZShnby5PdmVydmlldywgXCJvdmVydmlldy1kaWFncmFtXCIsIHtcclxuICAgICAgICAgICAgLy8gICAgb2JzZXJ2ZWQ6IHRoaXMubWFwLmdldERpYWdyYW0oKSxcclxuICAgICAgICAgICAgLy8gICAgY29udGVudEFsaWdubWVudDogZ28uU3BvdC5DZW50ZXJcclxuICAgICAgICAgICAgLy99KTtcclxuICAgICAgICAgICAgLy9sZXQgb3V0bGluZSA9IG92ZXJ2aWV3LmJveC5lbGVtZW50cy5maXJzdCgpO1xyXG4gICAgICAgICAgICAvL291dGxpbmUuc3Ryb2tlID0gXCIjMzMzXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tYXBVcmwpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXAubG9hZCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwLmxvYWRGb3JTYW5kYm94KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFkZEJlaGF2aW9ycygpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlTmF2aWdhdGlvbigpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlQmFja3NwYWNlKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG1heWJlU3RhcnRFZGl0aW5nVGl0bGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FuRWRpdCkge1xyXG4gICAgICAgICAgICB0aGlzLmVkaXRpbmdUaXRsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRvbmVFZGl0aW5nVGl0bGUoKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZG9uZUVkaXRpbmdUaXRsZScpO1xyXG4gICAgICAgIHRoaXMuZWRpdGluZ1RpdGxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5tYXAuZ2V0QXV0b3NhdmUoKS5zYXZlKCdlZGl0X3RpdGxlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZWRpdGluZ1RpdGxlS2V5cHJlc3MoZSkge1xyXG4gICAgICAgIGlmIChlLndoaWNoID09PSAxMykge1xyXG4gICAgICAgICAgICB0aGlzLmRvbmVFZGl0aW5nVGl0bGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpbnQoKSB7XHJcbiAgICAgICAgd2luZG93LnByaW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tIHNhdmUgc2FuZGJveCBtYXAgKHNpZ24gdXAvc2lnbiBpbikgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgc2F2ZVNhbmRib3hNYXAoKSB7XHJcbiAgICAgICAgbGV0IG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVfc2FuZGJveF9zYXZlX21vZGFsLmh0bWwnLCAvLyBzZWUgdmlld3MvdXNlcnMvX3RlbXBsYXRlX3NhbmRib3hfc2F2ZV9tb2RhbFxyXG4gICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IHRoaXMuc2FuZGJveFNhdmVNb2RhbEN0cmwsXHJcbiAgICAgICAgICAgIHdpbmRvd0NsYXNzOiAnc2FuZGJveC1zYXZlLW1vZGFsJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgb3V0ZXJTY29wZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1hcDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcDtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1c2VyUHJvZmlsZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXJQcm9maWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oKCkgPT4geyB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVFZGl0U3RhdHVzKHMpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd1cGRhdGVFZGl0U3RhdHVzOiAnICsgcyk7XHJcbiAgICAgICAgdGhpcy5lZGl0U3RhdHVzID0gcztcclxuICAgICAgICBpZiAocyA9PT0gZWRpdFN0YXR1cy5TQVZFX0ZBSUxFRCkge1xyXG4gICAgICAgICAgICBhbGVydCgnQ2hhbmdlcyBjb3VsZCBub3QgYmUgc2F2ZWQgLSBwbGVhc2UgY2hlY2sgeW91ciBuZXR3b3JrIGNvbm5lY3Rpb24uJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzID09PSBlZGl0U3RhdHVzLkxBU1RfVVBEQVRFRCkge1xyXG4gICAgICAgICAgICBsZXQgdGltZSA9IG1vbWVudCh0aGlzLnVwZGF0ZWRBdCkuZnJvbU5vdygpO1xyXG4gICAgICAgICAgICBsZXQgYnkgPSAnJztcclxuICAgICAgICAgICAgaWYgKHRoaXMudXBkYXRlZEJ5ID09PSB0aGlzLnVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgYnkgPSAnYnkgbWUnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudXBkYXRlZEJ5TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgYnkgPSAnYnkgJyArIHRoaXMudXBkYXRlZEJ5TmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiBzaG93ICdieSBtZScgb25seSBmb3IgZWRpdGFibGUgc2hhcmVkIG1hcHM/XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVkaXRTdGF0dXMgPSAnTGFzdCB1cGRhdGVkICcgKyB0aW1lICsgJyAnICsgYnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBMYXN0IGVkaXQgd2FzIFhYIGFnbyBieSBZWVxyXG4gICAgfVxyXG5cclxuICAgIC8vIG1pc2MuIFVJIGJlaGF2aW9ycyBmb3IgdG9vbHRpcHMsIHBvcHVwcyBldGMuXHJcbiAgICAvLyBUT0RPOiBmaWd1cmUgb3V0IHdoaWNoIG9mIHRoZXNlIG5lZWQgdG8gYmUgcmVhcHBsaWVkIGFmdGVyIGR5bmFtaWMgZGF0YSBjaGFuZ2VzIChlLmcuIExlc3NvbkJvb2sgcG9wb3ZlcnMpXHJcbiAgICBhZGRCZWhhdmlvcnMoKSB7XHJcblxyXG4gICAgICAgIC8vIE5PVEU6IHdlIGhhdmUgdG8gdXNlIHJlZ3VsYXIgYm9vdHN0cmFwIHRvb2x0aXBzIGZvciB0b29sYmFyIGJ1dHRvbnMgKGluc3RlYWQgb2YgbmctYm9vdHN0cmFwIG9uZXMpXHJcbiAgICAgICAgLy8gc28gd2UgY2FuIHR1cm4gdGhlbSBvZmYgZm9yIG1vYmlsZS4gV2UgYWxzbyBwdXQgdGhlIHRvb2x0aXBzIG9uIHdyYXBwZXJzIHJhdGhlciB0aGFuIG9uIHRoZSBhY3R1YWwgXHJcbiAgICAgICAgLy8gYnV0dG9ucywgc28gd2UgY2FuIGF2b2lkIHRoZSBpc3N1ZSBvZiBzdHVjayB0b29sdGlwcyBpZiBhIGJ1dHRvbiBnZXRzIGRpc2FibGVkIHdoaWxlIHRoZSB0b29sdGlwIGlzIHNob3dpbmcuXHJcblxyXG4gICAgICAgIGlmICghY29tbW9uLmlzVG91Y2hEZXZpY2UoKSkge1xyXG4gICAgICAgICAgICAvLyAkKCcudG9vbHRpcC13cmFwcGVyJykudG9vbHRpcCh7XHJcbiAgICAgICAgICAgIC8vICAgICBwbGFjZW1lbnQ6ICd0b3AnLFxyXG4gICAgICAgICAgICAvLyAgICAgY29udGFpbmVyOiAnYm9keSdcclxuICAgICAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAkKCcuZHJvcGRvd24tbWVudSAuYnRuJykudG9vbHRpcCh7XHJcbiAgICAgICAgICAgIC8vICAgICBwbGFjZW1lbnQ6ICdsZWZ0JyxcclxuICAgICAgICAgICAgLy8gICAgIGNvbnRhaW5lcjogJ2JvZHknXHJcbiAgICAgICAgICAgIC8vIH0pOyAvLyBmb3IgbGF5b3V0IG9wdGlvbnNcclxuXHJcbiAgICAgICAgICAgICQoJ2hlYWRlciwgI21hcC10aXRsZScpLmhvdmVyKFxyXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHkucHJlc2VudGVyLXBsYXlpbmcnKS5hZGRDbGFzcygnaGlkZS1oZWFkZXInKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keS5wcmVzZW50ZXItcGxheWluZycpLnJlbW92ZUNsYXNzKCdoaWRlLWhlYWRlcicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVOYXZpZ2F0aW9uKCkge1xyXG4gICAgICAgIC8vIGNyb3NzLWJyb3dzZXIgdHdlYWtzOlxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIGh0dHA6Ly93d3cub3BlcmEuY29tL3N1cHBvcnQva2Ivdmlldy84MjcvXHJcbiAgICAgICAgICAgIG9wZXJhLnNldE92ZXJyaWRlSGlzdG9yeU5hdmlnYXRpb25Nb2RlKCdjb21wYXRpYmxlJyk7XHJcbiAgICAgICAgICAgIGhpc3RvcnkubmF2aWdhdGlvbk1vZGUgPSAnY29tcGF0aWJsZSc7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBubyBiaWdnaWUuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpbnN0YWxsIGJlZm9yZS11bmxvYWQgaGFuZGxlcjpcclxuXHJcbiAgICAgICAgbGV0IGV4aXRNZXNzYWdlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJOYXZpZ2F0aW5nIGF3YXkgZnJvbSB5b3VyIE1hcCB3aWxsIGNhdXNlIGFueSB1bnNhdmVkIGNoYW5nZXMgdG8gYmUgbG9zdCBcIiArXHJcbiAgICAgICAgICAgICAgICBcIihhbnkgY2hhbmdlcyB5b3UgbWFrZSBhcmUgYXV0b21hdGljYWxseSBzYXZlZCwgYnV0IGl0IHRha2VzIGEgY291cGxlIG9mIHNlY29uZHMpLlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgICAgICQod2luZG93KS5iaW5kKCdiZWZvcmV1bmxvYWQnLCBleGl0TWVzc2FnZSk7XHJcblxyXG4gICAgICAgIC8vIHByZXZlbnQgZXhpdCBwcm9tcHQgd2hlbiB0aGUgdXNlciBkZWxpYmVyYXRlbHkgbmF2aWdhdGVzIGF3YXk6XHJcblxyXG4gICAgICAgICQoJyNoZWFkZXItcmlnaHQgYScpLmNsaWNrKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICQod2luZG93KS51bmJpbmQoJ2JlZm9yZXVubG9hZCcsIGV4aXRNZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVCYWNrc3BhY2UoKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEJBQ0tTUEFDRSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKCdib2R5IDpmb2N1cycpLmlzKCc6aW5wdXQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHByZXZlbnQgYWNjaWRlbnRhbCBiYWNrc3BhY2Ugd2hlbiBubyBpbnB1dCBoYXMgZm9jdXM6XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBFZGl0b3I7IiwiLy8gZnVuY3Rpb25zIGZvciB0aGUgZ2VuZXJhdG9yIChha2EgVGhpbmtRdWVyeSlcclxuY2xhc3MgR2VuZXJhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGVkaXRvciwgbWFwKSB7XHJcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0gPSBtYXAuZ2V0RGlhZ3JhbSgpO1xyXG4gICAgICAgIHRoaXMuY29uY2VwdDEgPSAnJztcclxuICAgICAgICB0aGlzLmNvbmNlcHQyID0gJyc7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFF1ZXN0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gLS0tLS0tLS0tLSBmdW5jdGlvbnMgZm9yIGNyZWF0aW5nIGVhY2ggb2YgdGhlIHN0cnVjdHVyZXMgLSBzZWUgdmlld3MvbWFwcy9nZW5lcmF0b3JfdGFiIC0tLS0tLS0tLS0tXHJcbiAgICAgICAgdGhpcy5xdWVyaWVzID0ge1xyXG5cclxuICAgICAgICAgICAgV0hBVF9JUzogKHgsIHkpID0+IHsgIC8vIDFcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBXSEFUX0lTX05PVDogKHgsIHkpID0+IHsgLy8gMlxyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMSA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4LCB5LCB0aGlzLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMS5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdpcyBub3Q/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXMgbm90PycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ2lzIG5vdD8nKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIERJU1RJTkdVSVNIX0JFVFdFRU46ICh4LCB5KSA9PiB7IC8vIDNcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eSh0aGluZzEuZGF0YSwgJ2RmbGFnJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAnaXM/Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMiA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCB0aGlzLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHRoaW5nMi5kYXRhLCAnZGZsYWcnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdpcz8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdpcz8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdpcz8nKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIENPTVBBUkVfQ09OVFJBU1Q6ICh4LCB5KSA9PiB7IC8vIDRcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCAtIDE1MCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcyID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggKyAxNTAsIHksIHRoaXMuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcxLmRhdGEsICdkZmxhZycsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkodGhpbmcyLmRhdGEsICdkZmxhZycsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJ0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAnY29udHJhc3QnKTtcclxuICAgICAgICAgICAgICAgIGxldCBydGhpbmcyID0gdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ2NvbXBhcmUnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KHJ0aGluZzEubGFiZWxlZExpbmsuZGF0YSwgJ3R5cGUnLCAndG9Gcm9tJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaWFncmFtLm1vZGVsLnNldERhdGFQcm9wZXJ0eShydGhpbmcyLmxhYmVsZWRMaW5rLmRhdGEsICd0eXBlJywgJ3RvRnJvbScpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgUEFSVFNfT0Y6ICh4LCB5KSA9PiB7IC8vIDVcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBQQVJUX09GOiAoeCwgeSkgPT4geyAvLyA2XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcxID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHgsIHksICdwYXJ0IG9mPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBQQVJUU19IQVZFX1BBUlRTOiAoeCwgeSkgPT4geyAvLyA3XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcxID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHgsIHksIHRoaXMuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkMSA9IHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKGNoaWxkMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQoY2hpbGQxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDIgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVDaGlsZChjaGlsZDIsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKGNoaWxkMiwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBSX1BBUlRTOiAoeCwgeSkgPT4geyAvLyA4XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcxID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHgsIHksIHRoaXMuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMiA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCB0aGlzLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgICAgIGxldCBydGhpbmcgPSB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHJ0aGluZywgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQocnRoaW5nLCAncGFydD8nKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIFBfUEFSVFM6ICh4LCB5KSA9PiB7IC8vIDlcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDMwMCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQxID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludCBvZiAnICsgdGhpcy5lY2hvQ29uY2VwdDIoKSArICc/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQyID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludCBvZiAnICsgdGhpcy5lY2hvQ29uY2VwdDIoKSArICc/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQzID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludCBvZiAnICsgdGhpcy5lY2hvQ29uY2VwdDIoKSArICc/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcyID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHgsIHksIHRoaXMuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVBMaW5rKHRoaW5nMiwgdGhpbmcxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVQTGluayh0aGluZzIsIGNoaWxkMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUExpbmsodGhpbmcyLCBjaGlsZDIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVBMaW5rKHRoaW5nMiwgY2hpbGQzKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIFJTX1RPX0FORF9CWTogKHgsIHkpID0+IHsgLy8gMTBcclxuICAgICAgICAgICAgICAgIGxldCByZWxhdGVkMSA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4LCB5LCAncmVsYXRlZCBpZGVhPycpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlbGF0ZWQyID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggKyAzMDAsIHkgKyA1MCwgJ3JlbGF0ZWQgaWRlYT8nKTtcclxuICAgICAgICAgICAgICAgIGxldCByZWxhdGVkMyA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgNTAsIHkgKyAzMDAsICdyZWxhdGVkIGlkZWE/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDEzMCwgeSArIDEzMCwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUkxpbmsocmVsYXRlZDEsIHRoaW5nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVSTGluayhyZWxhdGVkMiwgdGhpbmcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rKHJlbGF0ZWQzLCB0aGluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMSA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgNTAwLCB5ICsgMTUwLCAnaWRlYT8nKTtcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzIgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDc1MCwgeSArIDE1MCwgJ2lkZWE/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCB0aGlzLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIFdIQVRfSVNfUjogKHgsIHkpID0+IHsgLy8gMTFcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcyID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggKyAyNTAsIHksIHRoaXMuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nMiwgJ2lkZWE/Jyk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBQQVJUX1JTX0FSRTogKHgsIHkpID0+IHsgLy8gMTJcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDMwLCB5LCB0aGlzLmVjaG9Db25jZXB0MSgpLCAnZnJlZWhhbmQnKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDEgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDIgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDMgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGNoaWxkMS5kYXRhLCAnbG9jJywgJy0yMCAxMTAnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpYWdyYW0ubW9kZWwuc2V0RGF0YVByb3BlcnR5KGNoaWxkMi5kYXRhLCAnbG9jJywgJzgwIDExMCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5tb2RlbC5zZXREYXRhUHJvcGVydHkoY2hpbGQzLmRhdGEsICdsb2MnLCAnMzAgMTkwJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKGNoaWxkMSwgY2hpbGQyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDIsIGNoaWxkMywgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcoY2hpbGQzLCBjaGlsZDEsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBQQVJUX1JTX0VYSVNUOiAoeCwgeSkgPT4geyAvLyAxM1xyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMSA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4LCB5LCB0aGlzLmVjaG9Db25jZXB0MSgpLCAncmlnaHQnKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDExID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQxMiA9IHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzEsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkMTMgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcxLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzIgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDI1MCwgeSwgdGhpcy5lY2hvQ29uY2VwdDIoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQyMSA9IHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZzIsICdwYXJ0PycpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkMjIgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcyLCAncGFydD8nKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDIzID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMiwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUkxpbmsodGhpbmcxLCB0aGluZzIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDExLCBjaGlsZDIxLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDEyLCBjaGlsZDIyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyhjaGlsZDEzLCBjaGlsZDIzLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgUlNfV0lUSF9PVEhFUlM6ICh4LCB5KSA9PiB7IC8vIDE0XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcxID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggLSAyMDAsIHksIHRoaXMuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMiA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgMjAwLCB5LCB0aGlzLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzMgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCAtIDIwMCwgeSArIDIwMCwgJ2Fub3RoZXIgdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzQgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDIwMCwgeSArIDIwMCwgJ2Fub3RoZXIgdGhpbmcnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcxLCB0aGluZzIsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmczLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVJMaW5rV2l0aFJUaGluZyh0aGluZzEsIHRoaW5nNCwgJ3JlbGF0aW9uc2hpcD8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVSTGlua1dpdGhSVGhpbmcodGhpbmcyLCB0aGluZzQsICdyZWxhdGlvbnNoaXA/Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMywgdGhpbmc0LCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgUEFSVFNfT0ZfUDogKHgsIHkpID0+IHsgLy8gMTVcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZzEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCAtIDEwMCwgeSwgdGhpcy5lY2hvQ29uY2VwdDEoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQxID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQyID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQzID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nMSwgJ3BhcnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcyID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggKyAxMDAsIHksIHRoaXMuZWNob0NvbmNlcHQyKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVBMaW5rKHRoaW5nMSwgdGhpbmcyKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIFBPSU5UX0ZPUjogKHgsIHkpID0+IHsgLy8gMTZcclxuICAgICAgICAgICAgICAgIGxldCB0aGluZyA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4LCB5LCAnbmV3IHBlcnNwZWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcxID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggLSAxNTAsIHkgKyAxNTAsIHRoaXMuZWNob0NvbmNlcHQxKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5nMiA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgMTUwLCB5ICsgMTUwLCB0aGlzLmVjaG9Db25jZXB0MigpKTtcclxuICAgICAgICAgICAgICAgIGxldCBydGhpbmcgPSB0aGlzLl9tYXAuY3JlYXRlUkxpbmtXaXRoUlRoaW5nKHRoaW5nMSwgdGhpbmcyLCAncmVsYXRpb25zaGlwPycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVBMaW5rKHRoaW5nLCBydGhpbmcpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgSEFTX01VTFRJUExFX1BTOiAgKHgsIHkpID0+IHsgLy8gMTdcclxuICAgICAgICAgICAgICAgIGxldCBwb2ludDEgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCwgeSArIDUwLCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBvaW50MiA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5LCAndmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBvaW50MyA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgNTAwLCB5ICsgNTAsICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmlldyA9IHRoaXMuX21hcC5jcmVhdGVUaGluZyh4ICsgMjUwLCB5ICsgMjUwLCB0aGlzLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVQTGluayhwb2ludDEsIHZpZXcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVBMaW5rKHBvaW50Miwgdmlldyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUExpbmsocG9pbnQzLCB2aWV3KTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIFBBUlRTX0ZST01fTVVMVElQTEVfUFM6ICh4LCB5KSA9PiB7IC8vIDE4XHJcbiAgICAgICAgICAgICAgICBsZXQgcG9pbnQxID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHksICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcG9pbnQyID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHkgKyAxMjUsICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcG9pbnQzID0gdGhpcy5fbWFwLmNyZWF0ZVRoaW5nKHggLSAxMDAsIHkgKyAyNTAsICd2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpbmcgPSB0aGlzLl9tYXAuY3JlYXRlVGhpbmcoeCArIDE1MCwgeSArIDI1LCB0aGlzLmVjaG9Db25jZXB0MSgpKTtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZDEgPSB0aGlzLl9tYXAuY3JlYXRlQ2hpbGQodGhpbmcsICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQ/Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQyID0gdGhpcy5fbWFwLmNyZWF0ZUNoaWxkKHRoaW5nLCAncGFydCBzZWVuIGZyb20gdmlld3BvaW50PycpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkMyA9IHRoaXMuX21hcC5jcmVhdGVDaGlsZCh0aGluZywgJ3BhcnQgc2VlbiBmcm9tIHZpZXdwb2ludD8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVQTGluayhwb2ludDEsIGNoaWxkMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY3JlYXRlUExpbmsocG9pbnQxLCBjaGlsZDIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLmNyZWF0ZVBMaW5rKHBvaW50MiwgY2hpbGQyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5jcmVhdGVQTGluayhwb2ludDMsIGNoaWxkMyk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBXSEFUX0FCT1VUOiAoeCwgeSkgPT4geyAvLyAxOVxyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWVyaWVzLldIQVRfSVMoeCwgeSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJpZXMuUEFSVFNfT0YoeCArIDMwMCwgeSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJpZXMuUEFSVFNfRlJPTV9NVUxUSVBMRV9QUyh4ICsgNzAwLCB5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVlcmllcy5SU19UT19BTkRfQlkoeCwgeSArIDQwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9OyAvLyBxdWVyaWVzXHJcbiAgICB9XHJcblxyXG4gICAgZWNob0NvbmNlcHQxKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmNlcHQxIHx8ICcuLi4nO1xyXG4gICAgfVxyXG5cclxuICAgIGVjaG9Db25jZXB0MigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25jZXB0MiB8fCAnLi4uJztcclxuICAgIH1cclxuXHJcbiAgICBzd2FwQ29uY2VwdHMoKSB7XHJcbiAgICAgICAgbGV0IHRtcCA9IHRoaXMuY29uY2VwdDE7XHJcbiAgICAgICAgdGhpcy5jb25jZXB0MSA9IHRoaXMuY29uY2VwdDI7XHJcbiAgICAgICAgdGhpcy5jb25jZXB0MiA9IHRtcDtcclxuICAgIH1cclxuXHJcbiAgICBtYXBJdChxdWVzdGlvbikge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX21hcC5nZXRBdXRvc2F2ZSgpLnNhdmVPbk1vZGVsQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoJHNjb3BlLnNhbmRib3gpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGlhZ3JhbS5jbGVhcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCBsb2NhdGlvbiBmb3IgaW5zZXJ0ZWQgc3R1ZmZcclxuICAgICAgICBsZXQgZGIgPSB0aGlzLl9tYXAuY29tcHV0ZU1hcEJvdW5kcygpO1xyXG4gICAgICAgIGxldCB4ID0gZGIueCArIGRiLndpZHRoICsgMjAwO1xyXG4gICAgICAgIGxldCB5ID0gZGIueTtcclxuICAgICAgICBpZiAoaXNOYU4oeCkgfHwgaXNOYU4oeSkpIHtcclxuICAgICAgICAgICAgeCA9IHkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd4LCB5OiAnICsgeCArICcsICcgKyB5KTtcclxuXHJcbiAgICAgICAgLy8gaW5zZXJ0IHRoZSBzdHVmZiBhbmQgZGVzZWxlY3QgaXRcclxuICAgICAgICBxdWVzdGlvbih4LCB5KTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLmNsZWFyU2VsZWN0aW9uKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2RpYWdyYW0udXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB0aGlzLl9kaWFncmFtLmxheW91dERpYWdyYW0odHJ1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX21hcC5nZXRVaSgpLnJlc2V0Wm9vbSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9tYXAuZ2V0QXV0b3NhdmUoKS5zYXZlT25Nb2RlbENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX21hcC5nZXRBdXRvc2F2ZSgpLnNhdmUoJ2VkaXRfZ2VuZXJhdG9yJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZWN0UXVlc3Rpb24ocXVlc3Rpb24pIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkUXVlc3Rpb24gPSBxdWVzdGlvbjtcclxuICAgICAgICBpZiAoJHNjb3BlLnNhbmRib3gpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXBJdChxdWVzdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN1cnByaXNlTWUoKSB7XHJcbiAgICAgICAgbGV0IGtleXMgPSBfLmtleXModGhpcy5xdWVyaWVzKTtcclxuICAgICAgICBsZXQgaSA9IF8ucmFuZG9tKDAsIGtleXMubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgbGV0IHF1ZXN0aW9uID0gdGhpcy5xdWVyaWVzW2tleXNbaV1dO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRRdWVzdGlvbiA9IHF1ZXN0aW9uO1xyXG4gICAgICAgIHRoaXMubWFwSXQocXVlc3Rpb24pO1xyXG5cclxuICAgICAgICAkKCcjcXVlc3Rpb25zJykuYW5pbWF0ZSh7IHNjcm9sbFRvcDogaSAqIDMwIH0sIDEwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNhbGxlZCB3aGVuIGEgdGFiIGlzIG9wZW5lZCBvciBjbG9zZWRcclxuICAgIGN1cnJlbnRUYWJDaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChvbGRWYWx1ZSA9PT0gdGhpcy5fbWFwLmdldFVpKCkuVEFCX0lEX0dFTkVSQVRPUikgeyAvLyBjbG9zaW5nIHRhYlxyXG4gICAgICAgICAgICB0aGlzLl9tYXAuc2V0RWRpdGluZ0Jsb2NrZWQoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChuZXdWYWx1ZSA9PT0gdGhpcy5fbWFwLmdldFVpKCkuVEFCX0lEX0dFTkVSQVRPUikgeyAvLyBvcGVuaW5nIHRhYlxyXG4gICAgICAgICAgICB0aGlzLl9tYXAuc2V0RWRpdGluZ0Jsb2NrZWQodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoZXNlIGdldCBmaWx0ZXJlZCBvdXQgaW4gTGVzc29uQm9va1xyXG4gICAgZ2V0UGxhY2Vob2xkZXJJZGVhTmFtZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFsnaXM/JywgJ2lzIG5vdD8nLCAncGFydD8nLCAndmlld3BvaW50PycsICdyZWxhdGVkIGlkZWE/JywgJ2lkZWE/JyxcclxuICAgICAgICAgICAgICAgICdwYXJ0IHNlZW4gZnJvbSB2aWV3cG9pbnQ/JywgJ2NvbnRyYXN0PycsICdjb21wYXJpc29uPycsICdyZWxhdGlvbnNoaXA/J107XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR2VuZXJhdG9yOyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBMYXlvdXRzID0gcmVxdWlyZSgnLi4vTGF5b3V0cy5qcycpO1xyXG5cclxuY2xhc3MgRnJlZWhhbmREaWFncmFtTGF5b3V0IGV4dGVuZHMgTGF5b3V0cyB7XHJcbiAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiRnJlZWhhbmREaWFncmFtTGF5b3V0XCI7XHJcbiAgICB9XHJcblxyXG4gICAgZG9MYXlvdXQoY29sbCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ0ZyZWVoYW5kRGlhZ3JhbUxheW91dC5kb0xheW91dCcpO1xyXG4gICAgICAgIGxldCBkaWFncmFtID0gdGhpcy5fbWFwLmdldERpYWdyYW0oKTtcclxuICAgICAgICAvLyBkaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJGcmVlaGFuZCBEaWFncmFtIExheW91dFwiKTtcclxuXHJcbiAgICAgICAgLy92YWxpZGF0ZUdyb3VwTG9jYXRpb25zKGRpYWdyYW0uZmluZFRvcExldmVsR3JvdXBzKCkpO1xyXG4gICAgICAgIGxldCBncm91cHMgPSBkaWFncmFtLmZpbmRUb3BMZXZlbEdyb3VwcygpOyAvLyBnZXQgbmV3IGl0ZXJhdG9yXHJcbiAgICAgICAgd2hpbGUgKGdyb3Vwcy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgbGV0IGdyb3VwID0gZ3JvdXBzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoIWdyb3VwLmlzTGlua0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbG9jID0gZ28uUG9pbnQucGFyc2UoZ3JvdXAuZGF0YS5sb2MpO1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAubW92ZShuZXcgZ28uUG9pbnQobG9jLngsIGxvYy55KSk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdGcmVlaGFuZERpYWdyYW1MYXlvdXQsIGdyb3VwOiAnICsgZ3JvdXAgKyAnIHRvIGxvY2F0aW9uOiAnICsgbG9jLnggKyAnLCcgKyBsb2MueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFsbCBhZGp1c3RtZW50IG9mIGxpbmtzIGlzIGRvbmUgZnJvbSBoZXJlLCBub3QgZnJvbSB0aGUgb3RoZXIgbGF5b3V0cy4uLlxyXG4gICAgICAgIHRoaXMuZ2V0TGlua3NCeU5vZGVzKHRydWUpO1xyXG4gICAgICAgIGxldCBsaW5rcyA9IGRpYWdyYW0ubGlua3MuaXRlcmF0b3I7XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLm5leHQoKSkge1xyXG4gICAgICAgICAgICBsZXQgbGluayA9IGxpbmtzLnZhbHVlO1xyXG4gICAgICAgICAgICAvLyBpZiAoaXNOYU4obGluay5sb2NhdGlvbi54KSkge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ2xpbmsgbG9jYXRpb24gaXNOYU4nKTtcclxuICAgICAgICAgICAgLy8gICAgIGxpbmsubW92ZShuZXcgZ28uUG9pbnQoMCwwKSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2xpbmsgbG9jYXRpb246ICcgKyBsaW5rLmxvY2F0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5hZGp1c3RMaW5rTGF5b3V0KGxpbmspO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcIkZyZWVoYW5kIERpYWdyYW0gTGF5b3V0XCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5nby5EaWFncmFtLmluaGVyaXQoRnJlZWhhbmREaWFncmFtTGF5b3V0LCBnby5MYXlvdXQpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBGcmVlaGFuZERpYWdyYW1MYXlvdXQ7Iiwi77u/Y29uc3QgZ28gPSB3aW5kb3cuZ287XHJcbmxldCBMYXlvdXRzID0gcmVxdWlyZSgnLi4vTGF5b3V0cycpO1xyXG5cclxuY2xhc3MgRnJlZWhhbmRMYXlvdXQgZXh0ZW5kcyBMYXlvdXRzIHtcclxuICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcclxuICAgICAgICBzdXBlciguLi5hcmdzKTtcclxuICAgIH1cclxuXHJcbiAgICB0b1N0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gXCJGcmVlaGFuZExheW91dFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGRvTGF5b3V0KGNvbGwpIHtcclxuICAgICAgICBsZXQgZGlhZ3JhbSA9IHRoaXMuX21hcC5nZXREaWFncmFtKCk7XHJcbiAgICAgICAgZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiRnJlZWhhbmQgTGF5b3V0XCIpO1xyXG5cclxuICAgICAgICBsZXQgeCA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueDtcclxuICAgICAgICBsZXQgeSA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueTtcclxuXHJcbiAgICAgICAgbGV0IGl0ID0gdGhpcy5ncm91cC5tZW1iZXJQYXJ0cy5pdGVyYXRvcjtcclxuICAgICAgICB3aGlsZSAoaXQubmV4dCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJ0ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgZ28uR3JvdXAgJiYgIXBhcnQuaXNMaW5rTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGxldCBsb2MgPSBnby5Qb2ludC5wYXJzZShwYXJ0LmRhdGEubG9jKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ0ZyZWVoYW5kTGF5b3V0LCBwYXJ0OiAnICsgcGFydC5kYXRhLnRleHQgKyAnLCBsb2M6ICcgKyBsb2MgKyAnLCBsb2NhdGlvbjogJyArIHBhcnQubG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgcGFydC5tb3ZlKG5ldyBnby5Qb2ludCh4ICsgbG9jLngsIHkgKyBsb2MueSkpO1xyXG4gICAgICAgICAgICAgICAgcGFydC5sYXlvdXQuZG9MYXlvdXQocGFydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJGcmVlaGFuZCBMYXlvdXRcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmdvLkRpYWdyYW0uaW5oZXJpdChGcmVlaGFuZExheW91dCwgZ28uTGF5b3V0KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRnJlZWhhbmRMYXlvdXQ7IiwiY29uc3QgZ28gPSB3aW5kb3cuZ287XHJcbmNvbnN0IExheW91dHMgPSByZXF1aXJlKCcuLi9MYXlvdXRzLmpzJyk7XHJcblxyXG5jbGFzcyBMZWZ0SW52ZW50b3J5TGF5b3V0IGV4dGVuZHMgTGF5b3V0cyB7XHJcbiAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiTGVmdEludmVudG9yeUxheW91dFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGRvTGF5b3V0KGNvbGwpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdMZWZ0SW52ZW50b3J5TGF5b3V0LmRvTGF5b3V0LCBncm91cDogJyArIHRoaXMuZ3JvdXAgKyAnLCBsb2NhdGlvbjogJyArIHRoaXMuZ3JvdXAubG9jYXRpb24pO1xyXG4gICAgICAgIC8vIHRoaXMuZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcclxuICAgICAgICBsZXQgc3RhcnRYID0gdGhpcy5ncm91cC5sb2NhdGlvbi54O1xyXG4gICAgICAgIGxldCBzdGFydFkgPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnkgKyAodGhpcy5ncm91cC5wYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyB0aGlzLmdldEludmVudG9yeU1hcmdpbih0aGlzLmdyb3VwKSk7XHJcbiAgICAgICAgdGhpcy5sYXlvdXRNZW1iZXJzRm9ySW52ZW50b3J5KHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZLCAnTCcpO1xyXG4gICAgICAgIC8vIHRoaXMuZGlhZ3JhbS5jb21taXRUcmFuc2FjdGlvbihcIkludmVudG9yeSBMYXlvdXRcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmdvLkRpYWdyYW0uaW5oZXJpdChMZWZ0SW52ZW50b3J5TGF5b3V0LCBnby5MYXlvdXQpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBMZWZ0SW52ZW50b3J5TGF5b3V0OyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBMYXlvdXRzID0gcmVxdWlyZSgnLi4vTGF5b3V0cy5qcycpO1xyXG5cclxuY2xhc3MgUmlnaHRJbnZlbnRvcnlMYXlvdXQgZXh0ZW5kcyBMYXlvdXRzIHtcclxuICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcclxuICAgICAgICBzdXBlciguLi5hcmdzKTtcclxuICAgIH1cclxuXHJcbiAgICB0b1N0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gXCJSaWdodEludmVudG9yeUxheW91dFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGRvTGF5b3V0KGNvbGwpIHtcclxuICAgICAgICAvL3RoaXMuZGlhZ3JhbS5zdGFydFRyYW5zYWN0aW9uKFwiSW52ZW50b3J5IExheW91dFwiKTtcclxuICAgICAgICBsZXQgc3RhcnRYID0gdGhpcy5ncm91cC5sb2NhdGlvbi54ICsgdGhpcy5ncm91cC5hY3R1YWxCb3VuZHMud2lkdGg7XHJcbiAgICAgICAgbGV0IHN0YXJ0WSA9IHRoaXMuZ3JvdXAubG9jYXRpb24ueSArICh0aGlzLmdyb3VwLnBhcnQuYWN0dWFsQm91bmRzLmhlaWdodCArIHRoaXMuZ2V0SW52ZW50b3J5TWFyZ2luKHRoaXMuZ3JvdXApKTtcclxuICAgICAgICB0aGlzLmxheW91dE1lbWJlcnNGb3JJbnZlbnRvcnkodGhpcy5ncm91cCwgc3RhcnRYLCBzdGFydFksICdSJyk7XHJcbiAgICAgICAgLy90aGlzLmRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJJbnZlbnRvcnkgTGF5b3V0XCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5nby5EaWFncmFtLmluaGVyaXQoUmlnaHRJbnZlbnRvcnlMYXlvdXQsIGdvLkxheW91dCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFJpZ2h0SW52ZW50b3J5TGF5b3V0OyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBMYXlvdXRzID0gcmVxdWlyZSgnLi4vTGF5b3V0cy5qcycpO1xyXG5cclxuY2xhc3MgU3RhY2tlZExheW91dCBleHRlbmRzIExheW91dHMge1xyXG4gICAgY29uc3RydWN0b3IoLi4uYXJncykge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHRvU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBcIlN0YWNrZWRMYXlvdXRcIjtcclxuICAgIH1cclxuXHJcbiAgICBkb0xheW91dChjb2xsKSB7XHJcbiAgICAgICAgdGhpcy5kaWFncmFtLnN0YXJ0VHJhbnNhY3Rpb24oXCJTdGFja2VkIExheW91dFwiKTtcclxuICAgICAgICBsZXQgbWFyZ2luID0gdGhpcy5nZXRTdGFja01hcmdpbih0aGlzLmdyb3VwKTtcclxuICAgICAgICBsZXQgc3RhcnRYID0gdGhpcy5ncm91cC5sb2NhdGlvbi54O1xyXG4gICAgICAgIGxldCBzdGFydFkgPSB0aGlzLmdyb3VwLmxvY2F0aW9uLnkgKyAodGhpcy5ncm91cC5wYXJ0LmFjdHVhbEJvdW5kcy5oZWlnaHQgKyBtYXJnaW4gLyAyKTtcclxuICAgICAgICB0aGlzLmxheW91dE1lbWJlcnNGb3JTdGFja2VkKHRoaXMuZ3JvdXAsIHN0YXJ0WCwgc3RhcnRZKTtcclxuICAgICAgICB0aGlzLmRpYWdyYW0uY29tbWl0VHJhbnNhY3Rpb24oXCJTdGFja2VkIExheW91dFwiKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmdvLkRpYWdyYW0uaW5oZXJpdChTdGFja2VkTGF5b3V0LCBnby5MYXlvdXQpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTdGFja2VkTGF5b3V0OyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcblxyXG5jb25zdCBncm91cEZpbGxDb2xvciA9ICcjZjlmOWY5JztcclxuY29uc3QgY29sb3JQTGlnaHQgPSAnI0ZERERBRic7XHJcbmNvbnN0IGNvbG9yUERhcmsgPSAnI0M5ODgyQic7XHJcblxyXG4vLyBEU1JQIGNvbG9ycyAoZnJvbSBfdmFyaWFibGVzLnNjc3MpXHJcbmNvbnN0IGNvbG9yRCA9ICcjZjI2MjRjJztcclxuY29uc3QgY29sb3JTID0gJyM5NmM5M2QnO1xyXG5jb25zdCBjb2xvclAgPSAnI2ZiYWEzNic7XHJcblxyXG5jb25zdCBleWVTdmdQYXRoID0gJ00gMjU2LjAwLDk2LjAwQyAxNDQuMzQxLDk2LjAwLCA0Ny41NTksMTYxLjAyMSwwLjAwLDI1Ni4wMGMgNDcuNTU5LDk0Ljk3OSwgMTQ0LjM0MSwxNjAuMDAsIDI1Ni4wMCwxNjAuMDBjIDExMS42NTcsMC4wMCwgMjA4LjQzOS02NS4wMjEsIDI1Ni4wMC0xNjAuMDAgQyA0NjQuNDQyLDE2MS4wMjEsIDM2Ny42NTcsOTYuMDAsIDI1Ni4wMCw5Ni4wMHogTSAzODIuMjI1LDE4MC44NTJjIDMwLjA4MSwxOS4xODcsIDU1LjU3MSw0NC44ODcsIDc0LjcxNyw3NS4xNDggYy0xOS4xNDYsMzAuMjYxLTQ0LjYzNyw1NS45NjEtNzQuNzE4LDc1LjE0OUMgMzQ0LjQyNywzNTUuMjU3LCAzMDAuNzc5LDM2OC4wMCwgMjU2LjAwLDM2OC4wMGMtNDQuNzgsMC4wMC04OC40MjgtMTIuNzQzLTEyNi4yMjUtMzYuODUyIEMgOTkuNjk1LDMxMS45NjIsIDc0LjIwNSwyODYuMjYyLCA1NS4wNTgsMjU2LjAwYyAxOS4xNDYtMzAuMjYyLCA0NC42MzctNTUuOTYyLCA3NC43MTctNzUuMTQ4YyAxLjk1OS0xLjI1LCAzLjkzOC0yLjQ2MSwgNS45MjktMy42NSBDIDEzMC43MjUsMTkwLjg2NiwgMTI4LjAwLDIwNS42MTMsIDEyOC4wMCwyMjEuMDBjMC4wMCw3MC42OTIsIDU3LjMwOCwxMjguMDAsIDEyOC4wMCwxMjguMDBzIDEyOC4wMC01Ny4zMDgsIDEyOC4wMC0xMjguMDBjMC4wMC0xNS4zODctMi43MjUtMzAuMTM0LTcuNzA0LTQzLjc5OSBDIDM3OC4yODYsMTc4LjM5LCAzODAuMjY1LDE3OS42MDIsIDM4Mi4yMjUsMTgwLjg1MnogTSAyNTYuMDAsMjA1LjAwYzAuMDAsMjYuNTEtMjEuNDksNDguMDAtNDguMDAsNDguMDBzLTQ4LjAwLTIxLjQ5LTQ4LjAwLTQ4LjAwcyAyMS40OS00OC4wMCwgNDguMDAtNDguMDAgUyAyNTYuMDAsMTc4LjQ5LCAyNTYuMDAsMjA1LjAweic7XHJcbmNvbnN0IGV5ZUJsb2NrZWRTdmdQYXRoID0gJ00gNDE5LjY2MSwxNDguMjA4IEMgNDU4LjQ4MywxNzUuNzIzIDQ5MC4zNDYsMjEyLjc1NCA1MTIuMDAsMjU2LjAwIEMgNDY0LjQzOSwzNTAuOTc5IDM2Ny42NTcsNDE2LjAwIDI1Ni4wMCw0MTYuMDAgQyAyMjQuNzE3LDQxNi4wMCAxOTQuNjA0LDQxMC44OTQgMTY2LjQxMSw0MDEuNDU4IEwgMjA1LjM4OSwzNjIuNDggQyAyMjEuOTE4LDM2Ni4xMyAyMzguODc1LDM2OC4wMCAyNTYuMDAsMzY4LjAwIEMgMzAwLjc3OSwzNjguMDAgMzQ0LjQyNywzNTUuMjU3IDM4Mi4yMjMsMzMxLjE0OCBDIDQxMi4zMDQsMzExLjk2IDQzNy43OTUsMjg2LjI2IDQ1Ni45NDEsMjU1Ljk5OSBDIDQzOC40MTUsMjI2LjcxNiA0MTMuOTM0LDIwMS43MjQgMzg1LjExNiwxODIuNzUyIEwgNDE5LjY2MSwxNDguMjA4IFpNIDI1Ni4wMCwzNDkuMDAgQyAyNDQuNjM4LDM0OS4wMCAyMzMuNjI0LDM0Ny41MTIgMjIzLjEzNiwzNDQuNzMzIEwgMzc5LjcyOSwxODguMTQxIEMgMzgyLjUxLDE5OC42MjcgMzg0LjAwLDIwOS42MzggMzg0LjAwLDIyMS4wMCBDIDM4NC4wMCwyOTEuNjkyIDMyNi42OTIsMzQ5LjAwIDI1Ni4wMCwzNDkuMDAgWk0gNDgwLjAwLDAuMDBsLTI2Ljg2OSwwLjAwIEwgMzQzLjMyNSwxMDkuODA2QyAzMTUuNzg3LDEwMC44NDQsIDI4Ni40NDgsOTYuMDAsIDI1Ni4wMCw5Ni4wMEMgMTQ0LjM0MSw5Ni4wMCwgNDcuNTU5LDE2MS4wMjEsMC4wMCwyNTYuMDAgYyAyMS4zMjksNDIuNTk2LCA1Mi41NjQsNzkuMTU0LCA5MC41OTcsMTA2LjUzNEwwLjAwLDQ1My4xMzFMMC4wMCw0ODAuMDAgbCAyNi44NjksMC4wMCBMIDQ4MC4wMCwyNi44NjlMIDQ4MC4wMCwwLjAwIHogTSAyMDguMDAsMTU3LjAwYyAyNC4wMjIsMC4wMCwgNDMuOTIzLDE3LjY0NywgNDcuNDQ2LDQwLjY4NSBsLTU0Ljc2Miw1NC43NjJDIDE3Ny42NDcsMjQ4LjkyMywgMTYwLjAwLDIyOS4wMjIsIDE2MC4wMCwyMDUuMDBDIDE2MC4wMCwxNzguNDksIDE4MS40OSwxNTcuMDAsIDIwOC4wMCwxNTcuMDB6IE0gNTUuMDU4LDI1Ni4wMCBjIDE5LjE0Ni0zMC4yNjIsIDQ0LjYzNy01NS45NjIsIDc0LjcxNy03NS4xNDhjIDEuOTU5LTEuMjUsIDMuOTM4LTIuNDYxLCA1LjkyOS0zLjY1QyAxMzAuNzI1LDE5MC44NjYsIDEyOC4wMCwyMDUuNjEzLCAxMjguMDAsMjIxLjAwIGMwLjAwLDI5LjI2MiwgOS44MjUsNTYuMjI0LCAyNi4zNDksNzcuNzgxbC0yOS4yNzUsMjkuMjc1QyA5Ny4wMzgsMzA5LjIzNSwgNzMuMTk3LDI4NC42NywgNTUuMDU4LDI1Ni4wMHonO1xyXG5jb25zdCBwYXBlcmNsaXBTdmdQYXRoID0gJ00gMzQ4LjkxNiwxNjMuNTI0bC0zMi40NzYtMzIuNDYxTCAxNTQuMDM1LDI5My40MzRjLTI2LjkwNywyNi44OTYtMjYuOTA3LDcwLjUyNCwwLjAwLDk3LjQyMiBjIDI2LjkwMiwyNi44OTYsIDcwLjUzLDI2Ljg5NiwgOTcuNDM3LDAuMDBsIDE5NC44ODYtMTk0Ljg1NGMgNDQuODU3LTQ0LjgzMSwgNDQuODU3LTExNy41MzEsMC4wMC0xNjIuMzYzIGMtNDQuODMzLTQ0Ljg1Mi0xMTcuNTU2LTQ0Ljg1Mi0xNjIuMzkxLDAuMDBMIDc5LjMzNSwyMzguMjEybCAwLjAxNywwLjAxNmMtMC4xNDUsMC4xNTItMC4zMDYsMC4yODgtMC40MzgsMC40MjMgYy02Mi41NTEsNjIuNTQ4LTYyLjU1MSwxNjMuOTI4LDAuMDAsMjI2LjQ1M2MgNjIuNTI3LDYyLjUyOCwgMTYzLjkzNCw2Mi41MjgsIDIyNi40OTQsMC4wMGMgMC4xMzctMC4xMzcsIDAuMjU4LTAuMjg0LCAwLjQxLTAuNDM4bCAwLjAxNiwwLjAxNyBsIDEzOS42NjYtMTM5LjY0NmwtMzIuNDkzLTMyLjQ2TCAyNzMuMzUsNDMyLjIwOGwtMC4wMDgsMC4wMCBjLTAuMTQ4LDAuMTM0LTAuMjgyLDAuMjg1LTAuNDIzLDAuNDIyIGMtNDQuNTM3LDQ0LjUyOS0xMTYuOTksNDQuNTI5LTE2MS41MzgsMC4wMGMtNDQuNTMxLTQ0LjUyMS00NC41MzEtMTE2Ljk2MSwwLjAwLTE2MS40ODljIDAuMTUyLTAuMTUyLCAwLjMwMi0wLjI5MSwgMC40NDQtMC40MjNsLTAuMDIzLTAuMDMgbCAyMDQuNjQtMjA0LjU4M2MgMjYuODU2LTI2Ljg2OSwgNzAuNTcyLTI2Ljg2OSwgOTcuNDQzLDAuMDBjIDI2Ljg1NiwyNi44NjcsIDI2Ljg1Niw3MC41NzQsMC4wMCw5Ny40MkwgMjE4Ljk5OSwzNTguMzc1IGMtOC45NjgsOC45NjEtMjMuNTI3LDguOTYxLTMyLjQ4NiwwLjAwYy04Ljk0Ny04Ljk0My04Ljk0Ny0yMy41MTYsMC4wMC0zMi40NkwgMzQ4LjkxNiwxNjMuNTI0eic7XHJcblxyXG5jbGFzcyBHcm91cFRlbXBsYXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKG1hcCkge1xyXG4gICAgICAgIHRoaXMuX21hcCA9IG1hcDtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5Hcm91cCwgZ28uUGFuZWwuVmVydGljYWwsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdsYXlvdXQnLCAnbGF5b3V0JywgKGxheW91dE5hbWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0TGF5b3V0cygpLmdldExheW91dChsYXlvdXROYW1lKTtcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdtb3ZhYmxlJywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhb2JqLmlzTGlua0xhYmVsO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnaXNTdWJHcmFwaEV4cGFuZGVkJywgJ3NFeHBhbmRlZCcpLFxyXG4gICAgICAgICAgICAvLyBkaW0gdGhlIHRoaW5nIGlmIGl0J3MgYmVpbmcgZHJhZ2dlZCBvdmVyIGFub3RoZXIgdGhpbmcgKGRyb3AgdG8gc2lzdGVyL2NoaWxkKVxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKG9iai5pc1NlbGVjdGVkICYmIHRoaXMuX21hcC5nZXRVaSgpLmRyYWdUYXJnZXRHcm91cCA/IDAuMjUgOiAxKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25PYmplY3ROYW1lOiAnbWFpbnBhbmVsJyxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uU3BvdDogZ28uU3BvdC5Ub3BMZWZ0LFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpc1N1YkdyYXBoRXhwYW5kZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBsYXllck5hbWU6ICdGb3JlZ3JvdW5kJyxcclxuICAgICAgICAgICAgICAgIC8vIGhpZ2hsaWdodCBjb3JuZXJzXHJcbiAgICAgICAgICAgICAgICBtb3VzZUVudGVyOiAoZXZlbnQsIHRhcmdldCwgb2JqMikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyB1bmhpZ2hsaWdodCBjb3JuZXJzXHJcbiAgICAgICAgICAgICAgICBtb3VzZUxlYXZlOiAoZXZlbnQsIHRhcmdldCwgb2JqMikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcC5nZXRVaSgpLm1vdXNlT3Zlckdyb3VwID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBjb250YWluaW5nR3JvdXBDaGFuZ2VkOiBmdW5jdGlvbihwYXJ0LCBvbGRncm91cCwgbmV3Z3JvdXApIHsgXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS5tb2RlbC5zZXREYXRhUHJvcGVydHkocGFydC5kYXRhLCAnbGV2ZWwnLCB0aGlzLl9tYXAuY29tcHV0ZUxldmVsKHBhcnQpKTsgXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgLy9wYXJ0LnVwZGF0ZVRhcmdldEJpbmRpbmdzKCk7ICAgXHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Ib3Jpem9udGFsLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5ncm91cEV4dGVybmFsVGV4dEJsb2NrKHRoaXMuX21hcC5nZXRMYXlvdXRzKCkuc2hvd0xlZnRUZXh0QmxvY2ssICdyaWdodCcpLFxyXG4gICAgICAgICAgICAgICAgbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtYWlucGFuZWwnXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc2NhbGUnLCAnJywgdGhpcy5fbWFwLmdldExheW91dHMoKS5nZXRTY2FsZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBkcmFnIGFyZWFcclxuICAgICAgICAgICAgICAgICAgICBtayhnby5TaGFwZSwgJ1JlY3RhbmdsZScsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2RyYWdhcmVhJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGdyb3VwRmlsbENvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogJ21vdmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaG93IGRlYnVnIGluZm9cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dENsaWNrOiAoZXZlbnQsIHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmdyb3VwSW5mbyh0YXJnZXQucGFydCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdNYXJrZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnQWJvdmVUYXJnZXQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnSW50b1RhcmdldCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdCZWxvd1RhcmdldCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwSW50ZXJuYWxUZXh0QmxvY2soKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3JuZXJEKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZEZsYWdNYXJrZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3JuZXJTKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc0NvbGxhcHNlZE1hcmtlcigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcm5lclIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2ludE1hcmtlcigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcm5lclAoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50UGFwZXJDbGlwKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbkJvcmRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBFeHRlcm5hbFRleHRCbG9jayh0aGlzLl9tYXAuZ2V0TGF5b3V0cygpLnNob3dSaWdodFRleHRCbG9jaywgJ2xlZnQnKVxyXG4gICAgICAgICAgICApLFxyXG5cclxuICAgICAgICAgICAgLy8gdGhlIHBsYWNlaG9sZGVyIG5vcm1hbGx5IGhvbGRzIHRoZSBjaGlsZCBub2RlcywgYnV0IHdlIGp1c3QgdXNlIGEgZHVtbXkgcGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdwbGFjZWhvbGRlcicsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDAsIDApXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBncm91cEluZm8ob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iai5kYXRhLnRleHQgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdvYmplY3Q6ICcgKyBvYmogKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdrZXk6ICcgKyBvYmouZGF0YS5rZXkgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdjb250YWluaW5nR3JvdXA6ICcgKyBvYmouY29udGFpbmluZ0dyb3VwICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnbGF5b3V0OiAnICsgb2JqLmxheW91dCArICdcXG4nICtcclxuICAgICAgICAgICAgJ2RhdGEubGF5b3V0OiAnICsgb2JqLmRhdGEubGF5b3V0ICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAncG9zaXRpb246ICcgKyBwYXJzZUludChvYmoucG9zaXRpb24ueCwgMTApICsgJywgJyArIHBhcnNlSW50KG9iai5wb3NpdGlvbi55LCAxMCkgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdmcmVlaGFuZCBwb3NpdGlvbiAoZGF0YS5sb2MpOiAnICsgZ28uUG9pbnQucGFyc2Uob2JqLmRhdGEubG9jKSArICdcXG4nICtcclxuICAgICAgICAgICAgJ3dpZHRoL2hlaWdodDogJyArIHBhcnNlSW50KG9iai5hY3R1YWxCb3VuZHMud2lkdGgsIDEwKSArICcvJyArIHBhcnNlSW50KG9iai5hY3R1YWxCb3VuZHMuaGVpZ2h0LCAxMCkgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICdnZXRTY2FsZSgpOiAnICsgdGhpcy5fbWFwLmdldExheW91dHMoKS5nZXRTY2FsZShvYmopICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAnaXNMaW5rTGFiZWw6ICcgKyBvYmouZGF0YS5pc0xpbmtMYWJlbCArICdcXG4nICtcclxuICAgICAgICAgICAgJ2xhYmVsZWRMaW5rOiAnICsgb2JqLmxhYmVsZWRMaW5rICsgJ1xcbic7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUCB2aWV3IGluZGljYXRvclxyXG4gICAgdmlld01hcmtlcigpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uU2hhcGUsICdCb3JkZXInLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2ZpbGwnLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Vmlld01hcmtlckZpbGwob2JqKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMTgsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXdNYXJrZXJGaWxsKG9iaikge1xyXG4gICAgICAgIGxldCB3ZWlnaHQgPSB0aGlzLl9tYXAuZ2V0UGVyc3BlY3RpdmVzKCkuZ2V0UGVyc3BlY3RpdmVWaWV3V2VpZ2h0KG9iaik7XHJcblxyXG4gICAgICAgIGlmICh3ZWlnaHQgPT09IDMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG9yUERhcms7XHJcbiAgICAgICAgfSBlbHNlIGlmICh3ZWlnaHQgPT09IDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG9yUDtcclxuICAgICAgICB9IGVsc2UgaWYgKHdlaWdodCA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sb3JQTGlnaHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICd0cmFuc3BhcmVudCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSB0YXJnZXRzIGZvciBkcmFnZ2luZyB0byBEIG9yIFMgLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIGRyYWdBYm92ZVRhcmdldCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLCB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgIGhlaWdodDogMjUsXHJcbiAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgIG1vdXNlRHJhZ0VudGVyOiB0aGlzLmdldEdyb3VwTW91c2VEcmFnRW50ZXJIYW5kbGVyKHRoaXMuX21hcC5MRUZUKSxcclxuICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6IHRoaXMuZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIsXHJcbiAgICAgICAgICAgIG1vdXNlRHJvcDogdGhpcy5nZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIodGhpcy5fbWFwLkxFRlQpLFxyXG4gICAgICAgICAgICBjbGljazogdGhpcy5ncm91cENsaWNrSGFuZGxlclxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGRyYWcgdGFyZ2V0IHJlZ2lvblxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgJ1JlY3RhbmdsZScsIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50J1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgLy8gZHJhZyBpbmRpY2F0b3IgYmFyXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCAnQm9yZGVyJyxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2Yob2JqLnBhcnQsIHRoaXMuX21hcC5MRUZULCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6ICcjMDAwJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmFnSW50b1RhcmdldCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLCB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMjUpLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IDUwLFxyXG4gICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogdGhpcy5nZXRHcm91cE1vdXNlRHJhZ0VudGVySGFuZGxlcihudWxsKSxcclxuICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6IHRoaXMuZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIsXHJcbiAgICAgICAgICAgIG1vdXNlRHJvcDogdGhpcy5nZXRHcm91cE1vdXNlRHJvcEhhbmRsZXIobnVsbCksXHJcbiAgICAgICAgICAgIGNsaWNrOiB0aGlzLmdyb3VwQ2xpY2tIYW5kbGVyXHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsICdSZWN0YW5nbGUnLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA1MCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYWdCZWxvd1RhcmdldCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLCB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgNzUpLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IDI1LFxyXG4gICAgICAgICAgICB3aWR0aDogMTAwLFxyXG4gICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogdGhpcy5nZXRHcm91cE1vdXNlRHJhZ0VudGVySGFuZGxlcih0aGlzLl9tYXAuUklHSFQpLFxyXG4gICAgICAgICAgICBtb3VzZURyYWdMZWF2ZTogdGhpcy5ncm91cE1vdXNlRHJhZ0xlYXZlSGFuZGxlcixcclxuICAgICAgICAgICAgbW91c2VEcm9wOiB0aGlzLmdldEdyb3VwTW91c2VEcm9wSGFuZGxlcih0aGlzLl9tYXAuUklHSFQpLFxyXG4gICAgICAgICAgICBjbGljazogdGhpcy5ncm91cENsaWNrSGFuZGxlclxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGRyYWcgdGFyZ2V0IHJlZ2lvblxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwgJ1JlY3RhbmdsZScsIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50J1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgLy8gZHJhZyBpbmRpY2F0b3IgYmFyXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCAnQm9yZGVyJyxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2Yob2JqLnBhcnQsIHRoaXMuX21hcC5SSUdIVCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMTUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJyMwMDAnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgdGhlIFRleHRCbG9jayBmb3IgdGhlIGdyb3VwIHRpdGxlLCBmb3IgdXNlIGluIHRoZSBtYWluIGdyb3VwIHRlbXBsYXRlLCBpbnNpZGUgdGhlIGJveC5cclxuICAgIGdyb3VwSW50ZXJuYWxUZXh0QmxvY2soKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Ib3Jpem9udGFsLCB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMClcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygndGV4dCcsICd0ZXh0JykubWFrZVR3b1dheSgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgKGdyb3VwKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWx3YXlzIHNob3cgdGV4dCBpbnNpZGUgYm94IGZvciBSLXRoaW5ncywgYmVjYXVzZSBleHRlcm5hbCB0ZXh0IHdpbGwgdGhyb3cgb2ZmIGxheW91dFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0TGF5b3V0cygpLmlzTm90V2l0aGluSW52ZW50b3J5TGF5b3V0KGdyb3VwKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXAuZ2V0TGF5b3V0cygpLmlzUlRoaW5nV2l0aGluSW52ZW50b3J5TGF5b3V0KGdyb3VwKTtcclxuICAgICAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogODAsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IGdvLlNwb3QuQ2VudGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiAnbW92ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9udDogJzEwcHggc2Fucy1zZXJpZicsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNNdWx0aWxpbmU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgd3JhcDogZ28uVGV4dEJsb2NrLldyYXBEZXNpcmVkU2l6ZSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbW91c2VEcmFnRW50ZXI6IHRoaXMuZ2V0R3JvdXBNb3VzZURyYWdFbnRlckhhbmRsZXIobnVsbCksXHJcbiAgICAgICAgICAgICAgICAgICAgbW91c2VEcmFnTGVhdmU6IHRoaXMuZ3JvdXBNb3VzZURyYWdMZWF2ZUhhbmRsZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbW91c2VEcm9wOiB0aGlzLmdldEdyb3VwTW91c2VEcm9wSGFuZGxlcihudWxsKSxcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5ncm91cENsaWNrSGFuZGxlcixcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Q2xpY2s6IChldmVudCwgdGFyZ2V0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmdyb3VwSW5mbyh0YXJnZXQucGFydCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIGEgVGV4dEJsb2NrIGZvciB0aGUgZ3JvdXAgdGl0bGUsIGZvciB1c2UgaW4gdGhlIG1haW4gZ3JvdXAgdGVtcGxhdGUsIG9uIHRoZSBsZWZ0IG9yIHJpZ2h0LlxyXG4gICAgLy8gdmlzaWJsZUZuIGlzIGEgY2FsbGJhY2sgdG8gYmUgYm91bmQgdG8gdGhlIHZpc2liaWxpdHkgYXR0cmlidXRlIG9mIHRoZSBUZXh0QmxvY2suXHJcbiAgICAvLyB0ZXh0QWxpZ24gaXMgJ2xlZnQnIG9yICdyaWdodCcuXHJcbiAgICBncm91cEV4dGVybmFsVGV4dEJsb2NrKHZpc2libGVGbiwgdGV4dEFsaWduKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlRleHRCbG9jayxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3RleHQnLCAndGV4dCcpLm1ha2VUd29XYXkoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Zpc2libGUnLCAnJywgdmlzaWJsZUZuKS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc2NhbGUnLCAnJywgdGhpcy5fbWFwLmdldExheW91dHMoKS5nZXRFeHRlcm5hbFRleHRTY2FsZSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2V4dGVybmFsdGV4dC0nICsgdGV4dEFsaWduLCAvLyBOQjogdGhpcyBzY3Jld3MgdXAgbGF5b3V0cyBmb3Igc29tZSByZWFzb24gLSA/P1xyXG4gICAgICAgICAgICAgICAgdGV4dEFsaWduOiB0ZXh0QWxpZ24sXHJcbiAgICAgICAgICAgICAgICBtYXJnaW46IDUsXHJcbiAgICAgICAgICAgICAgICBmb250OiAnMTBweCBzYW5zLXNlcmlmJyxcclxuICAgICAgICAgICAgICAgIGlzTXVsdGlsaW5lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuZ3JvdXBDbGlja0hhbmRsZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tIGhhbmRsZXJzIGZvciBtb3VzZSBkcmFnL2Ryb3AgYWN0aW9ucyBvbiBncm91cHMsIHdoaWNoIG5lZWQgdG8gYmUgcmVwbGljYXRlZCBvbiBkaWZmZXJlbnQgdGFyZ2V0IHBhcnRzIC0tLS0tLS1cclxuXHJcbiAgICAvLyBwb3NpdGlvbiBpcyB0aGlzLl9tYXAuTEVGVCwgbnVsbCwgb3IgdGhpcy5fbWFwLlJJR0hUXHJcbiAgICBnZXRHcm91cE1vdXNlRHJhZ0VudGVySGFuZGxlcihwb3NpdGlvbikge1xyXG4gICAgICAgIHJldHVybiAoZXZlbnQsIHRhcmdldCwgb2JqMikgPT4ge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtb3VzZURyYWdFbnRlciwgZS5kcDogJyArIGV2ZW50LmRvY3VtZW50UG9pbnQgKyAnLCB0YXJnZXQucGFydDogJyArIHRhcmdldC5wYXJ0ICsgJywgdGFyZ2V0IGJvdW5kczogJyArIHRhcmdldC5hY3R1YWxCb3VuZHMpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgPSB0YXJnZXQucGFydDtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldFVpKCkuZHJhZ1RhcmdldFBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGdyb3VwTW91c2VEcmFnTGVhdmVIYW5kbGVyKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICB0aGlzLl9tYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX21hcC5nZXRVaSgpLmRyYWdUYXJnZXRQb3NpdGlvbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEdyb3VwTW91c2VEcm9wSGFuZGxlcihwb3NpdGlvbikge1xyXG4gICAgICAgIHJldHVybiAoZXZlbnQsIGRyb3BUYXJnZXQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVHcm91cE1vdXNlRHJvcChldmVudCwgZHJvcFRhcmdldCwgcG9zaXRpb24pO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ3JvdXBDbGlja0hhbmRsZXIoZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgdGhpcy5fbWFwLmdldFVpKCkuaGFuZGxlQ29ybmVyQ2xpY2soJycsIHRhcmdldCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaGFuZGxlIGRyb3Agb24gb25lIG9mIHRoZSB0aHJlZSB0YXJnZXQgcmVnaW9ucyAodG9wLCBtaWRkbGUsIGJvdHRvbSlcclxuICAgIC8vIHNpZGUgaXMgdGhpcy5fbWFwLkxFRlQgb3IgdGhpcy5fbWFwLlJJR0hUXHJcbiAgICBoYW5kbGVHcm91cE1vdXNlRHJvcChldmVudCwgZHJvcFRhcmdldCwgc2lkZSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2RyYWdBYm92ZVRhcmdldC5tb3VzZURyb3AsIHRhcmdldDogJyArIGRyb3BUYXJnZXQgKyAnLCBwYXJ0OiAnICsgZHJvcFRhcmdldCAucGFydCArICcsIHNob3c6ICcgKyBzaG93KTtcclxuICAgICAgICBpZiAoc2lkZSAmJiB0aGlzLmNhbkRyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZihkcm9wVGFyZ2V0LnBhcnQsIHNpZGUsIHRydWUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5hZGRTZWxlY3RlZFRoaW5nQXNPcmRlcmVkU2lzdGVyT2YoZHJvcFRhcmdldC5wYXJ0LCBzaWRlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lU2lzdGVyc09mKGRyb3BUYXJnZXQucGFydCwgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmFkZFNlbGVjdGVkVGhpbmdzQXNTaXN0ZXJzT2YoZHJvcFRhcmdldC5wYXJ0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lQ2hpbGRyZW5PZihkcm9wVGFyZ2V0LnBhcnQsIHRydWUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcC5hZGRTZWxlY3RlZFRoaW5nc0FzQ2hpbGRyZW5PZihkcm9wVGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIE5COiB0aGVzZSBhcmUgaGVyZSBiZWNhdXNlIHRoZXkgYXJlIGFib3V0IGNvbG9yczsgXHJcbiAgICAvLyBzaW1pbGFyIGZ1bmN0aW9ucyB0aGF0IGFyZSBzY2FsZS1yZWxhdGVkIGFyZSBpbiBsYXlvdXRzLmpzLi4uXHJcbiAgICBnZXRHcm91cFNlbGVjdGlvblN0cm9rZShvYmopIHtcclxuICAgICAgICBpZiAob2JqLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX21hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luUEVkaXRvck1vZGUoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvclA7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuX21hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luREVkaXRvck1vZGUoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvckQ7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJldHVybiAnIzAwMCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICcjMDAwJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT0ssIHRoaXMgaXNuJ3QgYWJvdXQgY29sb3JzLCBidXQgaXQgd2FudHMgdG8gYmUgbmVhciB0aGUgb25lIGFib3ZlLi4uXHJcbiAgICBnZXRHcm91cFNlbGVjdGlvblN0cm9rZVdpZHRoKG9iaikge1xyXG4gICAgICAgIHJldHVybiAob2JqLmlzU2VsZWN0ZWQgPyAzIDogMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBjYWxsYmFja3MgdG8gZGV0ZXJtaW5lIHdoZW4gdGhlIGNvcm5lcnMgc2hvdWxkIGJlIHZpc2libGVcclxuXHJcbiAgICBzaG93RENvcm5lcihncm91cCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9tYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNERWRpdG9yVGhpbmcoZ3JvdXApKSB7IC8vIG1hcmsgZGlzdGluY3Rpb24gdGhpbmdcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9tYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNJblBPckRFZGl0b3JNb2RlKCkpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBpbiBQL0QgZWRpdG9yIG1vZGVcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fbWFwLmdldFByZXNlbnRlcigpLmlzQ3JlYXRpbmdUaHVtYm5haWwpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBjYXB0dXJpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKGdyb3VwID09PSB0aGlzLl9tYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCkgfHwgLy8gc2hvdyBjb3JuZXJzIG9uIG1vdXNlb3ZlclxyXG4gICAgICAgICAgICAgICAgKC8qdGhpcy5pc1RvdWNoRGV2aWNlKCkgJiYqLyBncm91cC5pc1NlbGVjdGVkKSB8fFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lU2lzdGVyc09mKGdyb3VwLCBmYWxzZSkgJiYgLy8gZHJhZyB0byBEIChtYWtlIGl0IHNpc3RlcnMpXHJcbiAgICAgICAgICAgICAgICAgICAgKCF0aGlzLl9tYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0UG9zaXRpb24gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5ub3REcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YoZ3JvdXApKSk7IC8vIG5vdCBzaG93aW5nIGRyYWcgYWJvdmUvYmVsb3cgaW5kaWNhdG9yc1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93U0Nvcm5lcihncm91cCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9tYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNJblBPckRFZGl0b3JNb2RlKCkpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBpbiBQL0QgZWRpdG9yIG1vZGVcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fbWFwLmdldFByZXNlbnRlcigpLmlzQ3JlYXRpbmdUaHVtYm5haWwpIHsgLy8gZG9uJ3Qgc2hvdyBhbnkgY29ybmVycyBpZiBjYXB0dXJpbmcgdGh1bWJuYWlsXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKGdyb3VwID09PSB0aGlzLl9tYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCkgfHwgLy8gc2hvdyBjb3JuZXJzIG9uIG1vdXNlb3ZlclxyXG4gICAgICAgICAgICAgICAgKC8qJHNjb3BlLmlzVG91Y2hEZXZpY2UoKSAmJiovIGdyb3VwLmlzU2VsZWN0ZWQpIHx8XHJcbiAgICAgICAgICAgICAgICAodGhpcy5jYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVDaGlsZHJlbk9mKGdyb3VwLCBmYWxzZSkgJiYgLy8gZHJhZyB0byBTIChtYWtlIGl0IGNoaWxkcmVuKVxyXG4gICAgICAgICAgICAgICAgICAgICghdGhpcy5fbWFwLmdldFVpKCkuZHJhZ1RhcmdldFBvc2l0aW9uIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2Fubm90RHJhZ1NlbGVjdGlvblRvQmVjb21lT3JkZXJlZFNpc3Rlck9mKGdyb3VwKSkpOyAvLyBub3Qgc2hvd2luZyBkcmFnIGFib3ZlL2JlbG93IGluZGljYXRvcnNcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1JDb3JuZXIoZ3JvdXApIHtcclxuICAgICAgICBpZiAodGhpcy5fbWFwLmdldFBlcnNwZWN0aXZlcygpLmlzSW5QT3JERWRpdG9yTW9kZSgpKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgaW4gUC9EIGVkaXRvciBtb2RlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX21hcC5nZXRQcmVzZW50ZXIoKS5pc0NyZWF0aW5nVGh1bWJuYWlsKSB7IC8vIGRvbid0IHNob3cgYW55IGNvcm5lcnMgaWYgY2FwdHVyaW5nIHRodW1ibmFpbFxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdyb3VwID09PSB0aGlzLl9tYXAuZ2V0VWkoKS5tb3VzZU92ZXJHcm91cCB8fFxyXG4gICAgICAgICAgICAgICAgKC8qJHNjb3BlLmlzVG91Y2hEZXZpY2UoKSAmJiovIGdyb3VwLmlzU2VsZWN0ZWQpOyAvLyBzaG93IGNvcm5lcnMgb24gbW91c2VvdmVyXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3dQQ29ybmVyKGdyb3VwKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX21hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc1BFZGl0b3JQb2ludChncm91cCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIG1hcmsgcGVyc3BlY3RpdmUgcG9pbnRcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX21hcC5nZXRQZXJzcGVjdGl2ZXMoKS5pc0luUE9yREVkaXRvck1vZGUoKSkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGluIFAvRCBlZGl0b3IgbW9kZVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9tYXAuZ2V0UHJlc2VudGVyKCkuaXNDcmVhdGluZ1RodW1ibmFpbCkgeyAvLyBkb24ndCBzaG93IGFueSBjb3JuZXJzIGlmIGNhcHR1cmluZyB0aHVtYm5haWxcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBncm91cCA9PT0gdGhpcy5fbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXAgfHxcclxuICAgICAgICAgICAgICAgICgvKiRzY29wZS5pc1RvdWNoRGV2aWNlKCkgJiYqLyBncm91cC5pc1NlbGVjdGVkKTsgLy8gc2hvdyBjb3JuZXJzIG9uIG1vdXNlb3ZlclxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93UERvdCAobGluaykge1xyXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyB0aGlzLl9tYXAuZ2V0VWkoKS5nZXRNYXBFZGl0b3JPcHRpb25zKCkucGVyc3BlY3RpdmVNb2RlICE9ICdib3RoJztcclxuICAgIH1cclxuXHJcbiAgICAvLyB0aGVzZSBmdW5jdGlvbnMgYXJlIHVzZWQgaW4gdHdvIG1vZGVzOlxyXG4gICAgLy8gMS4gd2l0aCBpc0Ryb3BwaW5nID09IGZhbHNlLCB0byBoaWdobGlnaHQgZHJvcCB0YXJnZXRzIGJhc2VkIG9uIHRoaXMuX21hcC5nZXRVaSgpLmRyYWdUYXJnZXRHcm91cCBhbmQgdGhpcy5fbWFwLmdldFVpKCkuZHJhZ1RhcmdldFBvc2l0aW9uLFxyXG4gICAgLy8gICAgd2hpY2ggYXJlIHNldCBvbiBtb3VzZURyYWdFbnRlci9tb3VzZURyYWdsZWF2ZVxyXG4gICAgLy8gMi4gd2l0aCBpc0Ryb3BwaW5nID09IHRydWUsIG9uIGRyb3AsIHdoZW4gdGhlIGFib3ZlIGluZGljYXRvcnMgaGF2ZSBnb25lIGF3YXksIGJ1dCB3ZSBrbm93IHdoYXQgdGhlIGRyb3BwZWRcclxuICAgIC8vICAgIGFuZCB0YXJnZXQgZ3JvdXBzIGFyZSwgYW5kIHdlIHdhbnQgdG8ga25vdyB3aGF0IHRoZSBkcm9wIHNob3VsZCBkby5cclxuXHJcbiAgICBjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVTaXN0ZXJzT2YoZ3JvdXAsIGlzRHJvcHBpbmcpIHtcclxuICAgICAgICByZXR1cm4gKGdyb3VwID09PSB0aGlzLl9tYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0R3JvdXAgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgdGhpcy5fbWFwLnRoaW5nc1NlbGVjdGVkQXJlRGVzY2VuZGFudHNPZihncm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuRHJhZ1NlbGVjdGlvblRvQmVjb21lQ2hpbGRyZW5PZihncm91cCwgaXNEcm9wcGluZykge1xyXG4gICAgICAgIHJldHVybiAoZ3JvdXAgPT09IHRoaXMuX21hcC5nZXRVaSgpLmRyYWdUYXJnZXRHcm91cCB8fCBpc0Ryb3BwaW5nKSAmJlxyXG4gICAgICAgICAgICAhdGhpcy5fbWFwLnRoaW5nc1NlbGVjdGVkSW5jbHVkZVNsaWRlKCkgJiZcclxuICAgICAgICAgICAgIXRoaXMuX21hcC50aGluZ3NTZWxlY3RlZEFyZURlc2NlbmRhbnRzT2YoZ3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNpZGUgaXMgdGhpcy5fbWFwLkxFRlQgb3IgdGhpcy5fbWFwLlJJR0hUXHJcbiAgICBjYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YodGFyZ2V0R3JvdXAsIHNpZGUsIGlzRHJvcHBpbmcpIHtcclxuICAgICAgICAvLyBtdXN0IGJlIGRyYWdnaW5nIHNpbmdsZSBncm91cFxyXG4gICAgICAgIGxldCBkcmFnZ2VkR3JvdXAgPSB0aGlzLl9tYXAuZ2V0VW5pcXVlVGhpbmdTZWxlY3RlZCgpO1xyXG4gICAgICAgIGlmICghZHJhZ2dlZEdyb3VwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRyYWdnZWQgYW5kIHRhcmdldCBtdXN0IGJlIFNpc3RlcnMgaW4gaW52ZW50b3J5IGxheW91dFxyXG4gICAgICAgIHJldHVybiAodGFyZ2V0R3JvdXAgPT0gdGhpcy5fbWFwLmdldFVpKCkuZHJhZ1RhcmdldEdyb3VwIHx8IGlzRHJvcHBpbmcpICYmXHJcbiAgICAgICAgICAgICh0aGlzLl9tYXAuZ2V0VWkoKS5kcmFnVGFyZ2V0UG9zaXRpb24gPT09IHNpZGUgfHwgaXNEcm9wcGluZykgJiZcclxuICAgICAgICAgICAgdGhpcy5fbWFwLmdldExheW91dHMoKS5hcmVTaXN0ZXJzSW5JbnZlbnRvcnlMYXlvdXQoZHJhZ2dlZEdyb3VwLCB0YXJnZXRHcm91cCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNhbm5vdERyYWdTZWxlY3Rpb25Ub0JlY29tZU9yZGVyZWRTaXN0ZXJPZih0YXJnZXRHcm91cCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5jYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YodGFyZ2V0R3JvdXAsIHRoaXMuX21hcC5MRUZUKSAmJlxyXG4gICAgICAgICAgICAhdGhpcy5jYW5EcmFnU2VsZWN0aW9uVG9CZWNvbWVPcmRlcmVkU2lzdGVyT2YodGFyZ2V0R3JvdXAsIHRoaXMuX21hcC5SSUdIVCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLSBjb21wb25lbnRzIGZvciBtYWluIGdyb3VwIHRlbXBsYXRlIC0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGRGbGFnTWFya2VyKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2ZpbGwnLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5kYXRhLmRmbGFnID8gJyMwMDAnIDogbnVsbDtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2RmbGFnJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMTgsIDE4KSxcclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBnby5HZW9tZXRyeS5wYXJzZSgnRiBNMCAxIEwwIDE4IEwxOCAwIEwxIDB6JywgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gJ0QnIGNvcm5lciAodG9wIGxlZnQsIHJlZClcclxuICAgIGNvcm5lckQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLnNob3dEQ29ybmVyKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdjb3JuZXJEJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNTAsIDUwKSxcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoNTAsIDUwKSxcclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBnby5HZW9tZXRyeS5wYXJzZSgnRiBNMCAxIEwwIDUwIEw1MCAwIEwxIDB6JywgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBjb2xvckQsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiAoZXZlbnQsIHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NsaWNrLCBjb250cm9sOicgKyBldmVudC5jb250cm9sICsgJywgYWx0OicgKyBldmVudC5hbHQgKyAnLCBtZXRhOicgKyBldmVudC5tZXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuYWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5COiBhIHNpZGUgZWZmZWN0IG9mIHRoaXMgd2lsbCBiZSB0byBzZWxlY3QganVzdCB0aGlzIGdyb3VwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCB3b3VsZCBub3QgaGFwcGVuIG90aGVyd2lzZSB2aWEgY29udHJvbC1jbGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXAuZ2V0UGVyc3BlY3RpdmVzKCkuc2V0REVkaXRvclRoaW5nKHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXAuZ2V0VWkoKS5oYW5kbGVDb3JuZXJDbGljaygnRCcsIHRhcmdldC5wYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY29udGV4dENsaWNrOiAoZXZlbnQsIHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NvbnRleHRDbGljazonICsgZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcC50b2dnbGVERmxhZyh0YXJnZXQucGFydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6ICdEJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogJ3doaXRlJyxcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICc5cHggc2Fucy1zZXJpZicsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDEyLCAxNSksXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICdTJyBjb3JuZXIgKGJvdHRvbSBsZWZ0LCBncmVlbilcclxuICAgIGNvcm5lclMoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLnNob3dTQ29ybmVyKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdjb3JuZXJTJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgNTApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUwLCA1MCksXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDUwLCA1MCksXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoJ0YgTTAgMCBMMCA0OSBMMSA1MCBMNTAgNTB6JywgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBjb2xvclMsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiAoZXZlbnQsIHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLmdldFVpKCkuaGFuZGxlQ29ybmVyQ2xpY2soJ1MnLCB0YXJnZXQucGFydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAvLyBleHBhbnNpb24gaW5kaWNhdG9yXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3Bvc2l0aW9uJywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG9iai5pc1N1YkdyYXBoRXhwYW5kZWQgPyBuZXcgZ28uUG9pbnQoNCwgNDMpIDogbmV3IGdvLlBvaW50KDUsIDM4KSk7XHJcbiAgICAgICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2FuZ2xlJywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG9iai5pc1N1YkdyYXBoRXhwYW5kZWQgPyA5MCA6IDApO1xyXG4gICAgICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1LCAxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdvLkdlb21ldHJ5LnBhcnNlKCdGIE0wIDAgTDUgNSBMMCAxMHonLCB0cnVlKSxcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiAnIzMzMycsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6ICdTJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogJ3doaXRlJyxcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICc5cHggc2Fucy1zZXJpZicsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDEyLCAyOCksXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNob3cgb25seSB3aGVuIHN5c3RlbSBpcyBjb2xsYXBzZWRcclxuICAgIHNDb2xsYXBzZWRNYXJrZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuc2hvd1NDb3JuZXIob2JqKSAmJiBvYmoubWVtYmVyUGFydHMuY291bnQgPiAwICYmICFvYmouaXNTdWJHcmFwaEV4cGFuZGVkO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDUsIDg4KSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSg1LCAxMCksXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoJ0YgTTAgMCBMNSA1IEwwIDEweicsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJyMzMzMnLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vICdSJyBjb3JuZXIgKGJvdHRvbSByaWdodCwgYmx1ZSlcclxuICAgIGNvcm5lclIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlBhbmVsLCBnby5QYW5lbC5Qb3NpdGlvbixcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLnNob3dSQ29ybmVyKG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdjb3JuZXJSJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMTAwLCAxMDApLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2Nvcm5lclJTaGFwZScsXHJcbiAgICAgICAgICAgICAgICAvLyBOQjogdGhpcyBjb3JuZXIgaXMgZG9uZSBkaWZmZXJlbnRseSBmcm9tIHRoZSBvdGhlcnM6XHJcbiAgICAgICAgICAgICAgICAvLyAxLiB0aGUgb3ZlcmFsbCBzaGFwZSBpcyB0aGUgc2l6ZSBvZiB0aGUgd2hvbGUgc3F1YXJlLCBzbyB0aGUgcG9ydCBmYWxscyBpbiB0aGUgbWlkZGxlIGluc3RlYWQgb2YgdGhlIGNvcm5lcjtcclxuICAgICAgICAgICAgICAgIC8vIDIuIHRoZSBnZW9tZXRyeSB0cmFjZXMgYXJvdW5kIHRoZSBlZGdlcyBvZiB0aGUgd2hvbGUgc3F1YXJlLCBiZWNhdXNlIG90aGVyd2lzZSB0aGUgbGluayBsaW5lIHdpbGxcclxuICAgICAgICAgICAgICAgIC8vICAgIHNob3cgaW5zaWRlIHRoZSBtYWluIHNxdWFyZSBpZiBpdCdzIGNyb3NzaW5nIG9uZSBvZiB0aGUgb3RoZXIgMyBxdWFkcmFudHMgXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDAsIDApLFxyXG4gICAgICAgICAgICAgICAgZGVzaXJlZFNpemU6IG5ldyBnby5TaXplKDEwMCwgMTAwKSxcclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBnby5HZW9tZXRyeS5wYXJzZSgnRicgK1xyXG4gICAgICAgICAgICAgICAgICAgICdNMCAwIEwwIDEwMCAnICsgLy8gdG9wIGxlZnQgdG8gYm90dG9tIGxlZnRcclxuICAgICAgICAgICAgICAgICAgICAnTDk5IDEwMCBMMTAwIDk5IEwgMTAwIDAgJyArIC8vIGJvdHRvbS9yaWdodCBzaWRlcyAocm91bmQgYm90dG9tIHJpZ2h0IGNvcm5lcilcclxuICAgICAgICAgICAgICAgICAgICAnTCAwIDAgTCAxMDAgMCAnICsgLy8gYmFjayB0byB0b3AgbGVmdCB0aGVuIHRvcCByaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICdMIDEwMCA1MCBMIDUwIDEwMCAnICsgLy8gdG8gbWlkcG9pbnQgb2YgcmlnaHQgc2lkZSwgbWlkcG9pbnQgb2YgYm90dG9tIHNpZGVcclxuICAgICAgICAgICAgICAgICAgICAnTDAgMTAweicsIC8vIGJvdHRvbSBsZWZ0LCByZXR1cm4gaG9tZVxyXG4gICAgICAgICAgICAgICAgICAgIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogY29sb3JSLFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcblxyXG4gICAgICAgICAgICAgICAgcG9ydElkOiAnUicsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlRHVwbGljYXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiAoZXZlbnQsIHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBzaW5nbGUgb3IgZG91YmxlIGNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLmdldFVpKCkuaGFuZGxlQ29ybmVyQ2xpY2soJ1InLCB0YXJnZXQucGFydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtayhnby5UZXh0QmxvY2ssIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6ICdSJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogJ3doaXRlJyxcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICc5cHggc2Fucy1zZXJpZicsXHJcbiAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvLlBvaW50KDgyLCA3OClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGF0dGFjaG1lbnRQYXBlckNsaXAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmRhdGEuYXR0YWNobWVudHMgJiYgb2JqLmRhdGEuYXR0YWNobWVudHMgIT09IHVuZGVmaW5lZCAmJiBvYmouZGF0YS5hdHRhY2htZW50cy5sZW5ndGggPiAwO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnZ2VvbWV0cnknLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdvLkdlb21ldHJ5LnBhcnNlKHBhcGVyY2xpcFN2Z1BhdGgsIHRydWUpO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnZGVzaXJlZFNpemUnLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBnby5TaXplKDUxMiwgNTEyKTsgLy8gTkI6IHRoZSB0d28gaWNvbnMgZG9uJ3Qgc2NhbGUgdG8gdGhlIHNhbWUgcHJvcG9ydGlvbnMgZm9yIHNvbWUgcmVhc29uIC0gPz9cclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg0NiwgODUpLFxyXG4gICAgICAgICAgICAgICAgc2NhbGU6IDAuMDIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMDAwJyxcclxuICAgICAgICAgICAgICAgIGZpbGw6ICcjMDAwJyxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiAoZXZlbnQsIHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGlwIGNsaWNrZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXAuZ2V0VWkoKS50b2dnbGVUYWIodGhpcy5fbWFwLmdldFVpKCkuVEFCX0lEX0FUVEFDSE1FTlRTKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcEV5ZWJhbGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1rKGdvLlNoYXBlLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICcnLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwLmdldFBlcnNwZWN0aXZlcygpLmlzUGVyc3BlY3RpdmVQb2ludChvYmopO1xyXG4gICAgICAgICAgICB9KS5vZk9iamVjdCgpLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnZ2VvbWV0cnknLCAnJywgKG9iaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdvLkdlb21ldHJ5LnBhcnNlKHRoaXMuX21hcC5wSXNFeHBhbmRlZChvYmopID8gZXllU3ZnUGF0aCA6IGV5ZUJsb2NrZWRTdmdQYXRoLCB0cnVlKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ2Rlc2lyZWRTaXplJywgJycsIChvYmopID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZ28uU2l6ZSg1MTIsIHRoaXMuX21hcC5wSXNFeHBhbmRlZChvYmopID8gNDQwIDogNTEyKTsgLy8gTkI6IHRoZSB0d28gaWNvbnMgZG9uJ3Qgc2NhbGUgdG8gdGhlIHNhbWUgcHJvcG9ydGlvbnMgZm9yIHNvbWUgcmVhc29uIC0gPz9cclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg4NywgNCksXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogMC4wMixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogJyMwMDAnLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogJyMwMDAnLFxyXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFAgZXhwYW5zaW9uIGluZGljYXRvciAtIHRoaXMgc2hvd3Mgd2hlbiB0aGUgUCBjb3JuZXIgaXMgbm90IHZpc2libGUsIGFuZCBvbmx5IGlmIHRoZSB0aGluZyBpcyBhIHBlcnNwZWN0aXZlIHBvaW50XHJcbiAgICBwb2ludE1hcmtlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wRXllYmFsbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICdQJyBjb3JuZXIgKHRvcCByaWdodCwgb3JhbmdlKVxyXG4gICAgY29ybmVyUCgpIHtcclxuICAgICAgICByZXR1cm4gbWsoZ28uUGFuZWwsIGdvLlBhbmVsLlBvc2l0aW9uLFxyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuc2hvd1BDb3JuZXIob2JqKSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2Nvcm5lclAnLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCgwLCAwKSxcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTaXplOiBuZXcgZ28uU2l6ZSgxMDAsIDEwMCksXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnY29ybmVyUFNoYXBlJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkZXNpcmVkU2l6ZTogbmV3IGdvLlNpemUoMTAwLCAxMDApLFxyXG4gICAgICAgICAgICAgICAgLy8gTkI6IHRoaXMgZ2VvbWV0cnkgY292ZXJzIHRoZSB3aG9sZSBzcXVhcmU7IHNlZSBub3RlIGFib3ZlIGZvciBjb3JuZXJSXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ28uR2VvbWV0cnkucGFyc2UoJ0YnICtcclxuICAgICAgICAgICAgICAgICAgICAnTTAgMCBMMCAxMDAgTDEwMCAxMDAnICsgLy8gdG9wIGxlZnQgdG8gYm90dG9tIGxlZnQgdG8gYm90dG9tIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgJ0wxMDAgMSBMOTkgMCBMMCAwJyArIC8vIHJpZ2h0L3RvcCBzaWRlcyAocm91bmQgdG9wIHJpZ2h0IGNvcm5lcilcclxuICAgICAgICAgICAgICAgICAgICAnTCA1MCAwIEwgMTAwIDUwICcgKyAvLyB0byBtaWRwb2ludCBvZiB0b3Agc2lkZSwgbWlkcG9pbnQgb2YgcmlnaHQgc2lkZVxyXG4gICAgICAgICAgICAgICAgICAgICdMMTAwIDEwMCAwIDEwMHonLCAvLyBib3R0b20gcmlnaHQsIGJvdHRvbSBsZWZ0LCByZXR1cm4gaG9tZVxyXG4gICAgICAgICAgICAgICAgICAgIHRydWUpLFxyXG5cclxuICAgICAgICAgICAgICAgIGZpbGw6IGNvbG9yUCxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG5cclxuICAgICAgICAgICAgICAgIHBvcnRJZDogJ1AnLFxyXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlU2VsZk5vZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZnJvbUxpbmthYmxlRHVwbGljYXRlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZVNlbGZOb2RlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVEdXBsaWNhdGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRvTWF4TGlua3M6IDEsXHJcbiAgICAgICAgICAgICAgICBjbGljazogKGV2ZW50LCB0YXJnZXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcC5nZXRVaSgpLmhhbmRsZUNvcm5lckNsaWNrKCdQJywgdGFyZ2V0LnBhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgdGhpcy5wRXllYmFsbCgpLCAvLyBQIGV4cGFuc2lvbiBpbmRpY2F0b3JcclxuICAgICAgICAgICAgbWsoZ28uVGV4dEJsb2NrLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnUCcsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6ICd3aGl0ZScsXHJcbiAgICAgICAgICAgICAgICBmb250OiAnOXB4IHNhbnMtc2VyaWYnLFxyXG4gICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnby5Qb2ludCg4MSwgMTUpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBtYWluQm9yZGVyKCkge1xyXG4gICAgICAgIHJldHVybiBtayhnby5TaGFwZSwgJ0JvcmRlcicsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgdGhpcy5nZXRHcm91cFNlbGVjdGlvblN0cm9rZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ3N0cm9rZVdpZHRoJywgJycsIHRoaXMuZ2V0R3JvdXBTZWxlY3Rpb25TdHJva2VXaWR0aCkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ21haW5hcmVhJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ28uUG9pbnQoMCwgMCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgLy9wb3J0SWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmcm9tTGlua2FibGVEdXBsaWNhdGVzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdG9MaW5rYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRvTGlua2FibGVTZWxmTm9kZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0b0xpbmthYmxlRHVwbGljYXRlczogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHcm91cFRlbXBsYXRlOyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcblxyXG5jb25zdCBkTGlua1RlbXBsYXRlID0gKG1hcCkgPT5cclxuICAgIG1rKGdvLkxpbmssIHtcclxuICAgICAgICBzZWxlY3RhYmxlOiBmYWxzZVxyXG4gICAgfSxcclxuICAgICAgICAgbWsoZ28uU2hhcGUsIHtcclxuICAgICAgICAgICAgIG5hbWU6IFwiTElOS1NIQVBFXCIsXHJcbiAgICAgICAgICAgICBzdHJva2U6IG51bGxcclxuICAgICAgICAgfSlcclxuICAgICk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGRMaW5rVGVtcGxhdGU7IiwiY29uc3QgZ28gPSB3aW5kb3cuZ287XHJcbmNvbnN0IG1rID0gZ28uR3JhcGhPYmplY3QubWFrZTtcclxuXHJcbmNvbnN0IGNvbG9yUiA9IFwiIzRjYmZjMlwiO1xyXG5cclxuY29uc3QgbGlua0luZm8gPSAobWFwLCBvYmopID0+IHtcclxuICAgIHZhciBzbnBvcyA9IG1hcC5nZXRMYXlvdXRzKCkuZ2V0U2FtZU5vZGVzTGlua1Bvc2l0aW9uKG9iaik7XHJcbiAgICByZXR1cm4gJycgK1xyXG4gICAgICAgICdvYmplY3Q6ICcgKyBvYmogKyBcIlxcblwiICtcclxuICAgICAgICAnZnJvbU5vZGU6ICcgKyBvYmouZnJvbU5vZGUgKyBcIlxcblwiICtcclxuICAgICAgICAndG9Ob2RlOiAnICsgb2JqLnRvTm9kZSArIFwiXFxuXCIgK1xyXG4gICAgICAgICdsYWJlbE5vZGVzOiAnICsgb2JqLmxhYmVsTm9kZXMuY291bnQgKyBcIlxcblwiICtcclxuICAgICAgICAnbGFiZWxOb2RlSXNWaXNpYmxlOiAnICsgbWFwLmdldExheW91dHMoKS5sYWJlbE5vZGVJc1Zpc2libGUob2JqKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICdmcm9tUG9ydElkOiAnICsgb2JqLmZyb21Qb3J0SWQgKyBcIlxcblwiICtcclxuICAgICAgICAndG9Qb3J0SWQ6ICcgKyBvYmoudG9Qb3J0SWQgKyBcIlxcblwiICtcclxuICAgICAgICAnY2F0ZWdvcnk6ICcgKyAob2JqLmRhdGEgPyBvYmouZGF0YS5jYXRlZ29yeSA6ICcnKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICdjb250YWluaW5nR3JvdXA6ICcgKyBvYmouY29udGFpbmluZ0dyb3VwICsgXCJcXG5cIiArXHJcbiAgICAgICAgJ2Zyb21BbmRUb05vZGVzQXJlVmlzaWJsZTogJyArIG1hcC5nZXRMYXlvdXRzKCkuZnJvbUFuZFRvTm9kZXNBcmVWaXNpYmxlKG9iaikgKyBcIlxcblwiICtcclxuICAgICAgICAnY3VydmU6ICcgKyBvYmouY3VydmUgKyBcIlxcblwiICtcclxuICAgICAgICAnY3VydmluZXNzOiAnICsgb2JqLmN1cnZpbmVzcyArIFwiXFxuXCIgK1xyXG4gICAgICAgICdmcm9tRW5kU2VnbWVudExlbmd0aDogJyArIE1hdGgucm91bmQob2JqLmZyb21FbmRTZWdtZW50TGVuZ3RoKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICd0b0VuZFNlZ21lbnRMZW5ndGg6ICcgKyBNYXRoLnJvdW5kKG9iai50b0VuZFNlZ21lbnRMZW5ndGgpICsgXCJcXG5cIiArXHJcbiAgICAgICAgJ3NhbWVOb2Rlc0xpbmtQb3NpdGlvbjogJyArIHNucG9zLmluZGV4ICsgJyBvZiAnICsgc25wb3MuY291bnQgKyBcIlxcblwiICtcclxuICAgICAgICAvLysgJ2dlb21ldHJ5OiAnICsgb2JqLmdlb21ldHJ5ICsgXCJcXG5cIiArXHJcbiAgICAgICAgJ2dldExpbmtTdHJva2VXaWR0aDogJyArIG1hcC5nZXRMYXlvdXRzKCkuZ2V0TGlua1N0cm9rZVdpZHRoKG9iaikgKyBcIlxcblwiO1xyXG59XHJcblxyXG4vLyB3aGVuIHRvIHNob3cgdGhlIFItdGhpbmcga25vYiBvbiBhIGxpbmtcclxuY29uc3Qgc2hvd0tub2IgPSAobWFwLCBsaW5rKSA9PiB7XHJcbiAgICByZXR1cm4gbGluayA9PT0gbWFwLmdldFVpKCkubW91c2VPdmVyTGluaztcclxufVxyXG5cclxuY29uc3QgZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2UgPSAobWFwLCBvYmopID0+IHtcclxuICAgIGlmIChvYmouaXNTZWxlY3RlZCB8fCBvYmogPT09IG1hcC5nZXRVaSgpLm1vdXNlT3ZlckxpbmspIHtcclxuICAgICAgICByZXR1cm4gY29sb3JSOyAvLyBUT0RPOiBjYW4gUCBsaW5rcyBiZSBzZWxlY3RlZD9cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFwiIzAwMFwiO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBsaW5rVGVtcGxhdGUgPSAobWFwKSA9PlxyXG4gICAgICAgIG1rKGdvLkxpbmssIHtcclxuICAgICAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGxheWVyTmFtZTogJycsXHJcbiAgICAgICAgICAgIHJvdXRpbmc6IGdvLkxpbmsuTm9ybWFsLFxyXG4gICAgICAgICAgICByZWxpbmthYmxlRnJvbTogdHJ1ZSxcclxuICAgICAgICAgICAgcmVsaW5rYWJsZVRvOiB0cnVlLFxyXG4gICAgICAgICAgICBtb3VzZUVudGVyOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgb2JqMikge1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldFVpKCkubW91c2VPdmVyTGluayA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXREaWFncmFtKCkudXBkYXRlQWxsVGFyZ2V0QmluZGluZ3MoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW91c2VMZWF2ZTogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQsIG9iajIpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLm1vdXNlT3ZlckxpbmsgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtb3VzZURyYWdFbnRlcjogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQsIGRyYWdPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLm1vdXNlT3ZlckxpbmsgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICBtYXAuZ2V0RGlhZ3JhbSgpLnVwZGF0ZUFsbFRhcmdldEJpbmRpbmdzKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1vdXNlRHJhZ0xlYXZlOiBmdW5jdGlvbiAoZXZlbnQsIGRyb3BUYXJnZXQsIGRyYWdPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5nZXRVaSgpLm1vdXNlT3ZlckxpbmsgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgbWFwLmdldERpYWdyYW0oKS51cGRhdGVBbGxUYXJnZXRCaW5kaW5ncygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtb3VzZURyb3A6IGZ1bmN0aW9uIChldmVudCwgZHJvcFRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gbWFwLmdldERpYWdyYW0oKS5zZWxlY3Rpb247XHJcbiAgICAgICAgICAgICAgICBpZiAocGFydHMgJiYgcGFydHMuY291bnQgPT09IDEgJiYgcGFydHMuZmlyc3QoKSBpbnN0YW5jZW9mIGdvLkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmFkZFRoaW5nQXNSVGhpbmcocGFydHMuZmlyc3QoKSwgZHJvcFRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRvdWJsZUNsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgbWFwLmNyZWF0ZVJUaGluZyh0YXJnZXQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb250ZXh0Q2xpY2s6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxpbmtJbmZvKG1hcCwgdGFyZ2V0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgKCkgPT4gZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2UobWFwKSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic3Ryb2tlV2lkdGhcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRMaW5rU3Ryb2tlV2lkdGgpLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkxJTktTSEFQRVwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICksXHJcblxyXG4gICAgICAgICAgICAvLyBzaG93IHRvL2Zyb20gYXJyb3doZWFkcyBiYXNlZCBvbiBsaW5rIFwidHlwZVwiIGF0dHJpYnV0ZVxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgZnJvbUFycm93OiBcIkJhY2t3YXJkXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCdzdHJva2UnLCAnJywgKCkgPT4gZ2V0UkxpbmtTZWxlY3Rpb25TdHJva2UobWFwKSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic2NhbGVcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRBcnJvd2hlYWRTY2FsZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJ3R5cGUnLCBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSAnZnJvbScgfHwgdCA9PT0gJ3RvRnJvbSc7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBtayhnby5TaGFwZSwge1xyXG4gICAgICAgICAgICAgICAgdG9BcnJvdzogXCJTdGFuZGFyZFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygnc3Ryb2tlJywgJycsICgpID0+IGdldFJMaW5rU2VsZWN0aW9uU3Ryb2tlKG1hcCkpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcInNjYWxlXCIsIFwiXCIsIG1hcC5nZXRMYXlvdXRzKCkuZ2V0QXJyb3doZWFkU2NhbGUpLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgZ28uQmluZGluZygndmlzaWJsZScsICd0eXBlJywgZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gJ3RvJyB8fCB0ID09PSAndG9Gcm9tJztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICksXHJcblxyXG4gICAgICAgICAgICBtayhnby5QYW5lbCwgZ28uUGFuZWwuQXV0bywgLy8gbGluayBsYWJlbCBcImtub2JcIlxyXG4gICAgICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoJ29wYWNpdHknLCAnJywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoc2hvd0tub2IobWFwLCBvYmopID8gMSA6IDApO1xyXG4gICAgICAgICAgICAgICAgfSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic2NhbGVcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRBcnJvd2hlYWRTY2FsZSkub2ZPYmplY3QoKSxcclxuICAgICAgICAgICAgICAgIG1rKGdvLlNoYXBlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlndXJlOiBcIkVsbGlwc2VcIixcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBjb2xvckQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBjb2xvckQsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEyLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTJcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIClcclxuICAgICk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGxpbmtUZW1wbGF0ZTsiLCJjb25zdCBnbyA9IHdpbmRvdy5nbztcclxuY29uc3QgbWsgPSBnby5HcmFwaE9iamVjdC5tYWtlO1xyXG5cclxuY29uc3QgbGlua0luZm8gPSAobWFwLCBvYmopID0+IHtcclxuICAgIHZhciBzbnBvcyA9IG1hcC5nZXRMYXlvdXRzKCkuZ2V0U2FtZU5vZGVzTGlua1Bvc2l0aW9uKG9iaik7XHJcbiAgICByZXR1cm4gJycgK1xyXG4gICAgICAgICdvYmplY3Q6ICcgKyBvYmogKyBcIlxcblwiICtcclxuICAgICAgICAnZnJvbU5vZGU6ICcgKyBvYmouZnJvbU5vZGUgKyBcIlxcblwiICtcclxuICAgICAgICAndG9Ob2RlOiAnICsgb2JqLnRvTm9kZSArIFwiXFxuXCIgK1xyXG4gICAgICAgICdsYWJlbE5vZGVzOiAnICsgb2JqLmxhYmVsTm9kZXMuY291bnQgKyBcIlxcblwiICtcclxuICAgICAgICAnbGFiZWxOb2RlSXNWaXNpYmxlOiAnICsgbWFwLmdldExheW91dHMoKS5sYWJlbE5vZGVJc1Zpc2libGUob2JqKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICdmcm9tUG9ydElkOiAnICsgb2JqLmZyb21Qb3J0SWQgKyBcIlxcblwiICtcclxuICAgICAgICAndG9Qb3J0SWQ6ICcgKyBvYmoudG9Qb3J0SWQgKyBcIlxcblwiICtcclxuICAgICAgICAnY2F0ZWdvcnk6ICcgKyAob2JqLmRhdGEgPyBvYmouZGF0YS5jYXRlZ29yeSA6ICcnKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICdjb250YWluaW5nR3JvdXA6ICcgKyBvYmouY29udGFpbmluZ0dyb3VwICsgXCJcXG5cIiArXHJcbiAgICAgICAgJ2Zyb21BbmRUb05vZGVzQXJlVmlzaWJsZTogJyArIG1hcC5nZXRMYXlvdXRzKCkuZnJvbUFuZFRvTm9kZXNBcmVWaXNpYmxlKG9iaikgKyBcIlxcblwiICtcclxuICAgICAgICAnY3VydmU6ICcgKyBvYmouY3VydmUgKyBcIlxcblwiICtcclxuICAgICAgICAnY3VydmluZXNzOiAnICsgb2JqLmN1cnZpbmVzcyArIFwiXFxuXCIgK1xyXG4gICAgICAgICdmcm9tRW5kU2VnbWVudExlbmd0aDogJyArIE1hdGgucm91bmQob2JqLmZyb21FbmRTZWdtZW50TGVuZ3RoKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICd0b0VuZFNlZ21lbnRMZW5ndGg6ICcgKyBNYXRoLnJvdW5kKG9iai50b0VuZFNlZ21lbnRMZW5ndGgpICsgXCJcXG5cIiArXHJcbiAgICAgICAgJ3NhbWVOb2Rlc0xpbmtQb3NpdGlvbjogJyArIHNucG9zLmluZGV4ICsgJyBvZiAnICsgc25wb3MuY291bnQgKyBcIlxcblwiICtcclxuICAgICAgICAvLysgJ2dlb21ldHJ5OiAnICsgb2JqLmdlb21ldHJ5ICsgXCJcXG5cIiArXHJcbiAgICAgICAgJ2dldExpbmtTdHJva2VXaWR0aDogJyArIG1hcC5nZXRMYXlvdXRzKCkuZ2V0TGlua1N0cm9rZVdpZHRoKG9iaikgKyBcIlxcblwiO1xyXG59XHJcblxyXG4vLyB3aGVuIGEgUCBsaW5rIHNob3VsZCBiZSB2aXNpYmxlXHJcbmNvbnN0IHNob3dQTGluayA9IChtYXAsIGxpbmspID0+IHtcclxuICAgIHZhciBtb2RlID0gbWFwLmdldFVpKCkuZ2V0TWFwRWRpdG9yT3B0aW9ucygpLnBlcnNwZWN0aXZlTW9kZTtcclxuICAgIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNQRWRpdG9yUG9pbnQobGluay5mcm9tTm9kZSkpIHsgLy8gc2hvdyBQJ3Mgd2hlbiB0aGlzIGxpbmsgaXMgZnJvbSB0aGUgY3VycmVudCBQb2ludFxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIGlmIChtYXAuZ2V0UGVyc3BlY3RpdmVzKCkuaXNJblBPckRFZGl0b3JNb2RlKCkpIHsgLy8gZG9uJ3Qgc2hvdyBQJ3MgZm9yIG5vbi1Qb2ludCB0aGluZ3MsIGV2ZW4gb24gbW91c2VvdmVyXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gKG1vZGUgPT09ICdsaW5lcycgfHwgbW9kZSA9PT0gJ2JvdGgnKSAmJiAobGluay5mcm9tTm9kZSA9PT0gbWFwLmdldFVpKCkubW91c2VPdmVyR3JvdXAgfHwgbWFwLnBJc0V4cGFuZGVkKGxpbmsuZnJvbU5vZGUpKTtcclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IHBMaW5rVGVtcGxhdGUgPSAobWFwKSA9PlxyXG4gICAgbWsoZ28uTGluayxcclxuICAgICAgICBuZXcgZ28uQmluZGluZygnb3BhY2l0eScsICcnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoc2hvd1BMaW5rKG1hcCwgb2JqKSA/IDEgOiAwKTtcclxuICAgICAgICB9KS5vZk9iamVjdCgpLCB7XHJcbiAgICAgICAgICAgIHNlbGVjdGlvbkFkb3JuZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBsYXllck5hbWU6ICdCYWNrZ3JvdW5kJywgLy8gbWFrZSBQIGxpbmtzIGZhbGwgYmVoaW5kIFIgbGlua3NcclxuICAgICAgICAgICAgcm91dGluZzogZ28uTGluay5Ob3JtYWwsXHJcbiAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobGlua0luZm8obWFwLCB0YXJnZXQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic3Ryb2tlV2lkdGhcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRMaW5rU3Ryb2tlV2lkdGgpLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiTElOS1NIQVBFXCIsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IGNvbG9yUExpZ2h0LFxyXG4gICAgICAgICAgICAgICAgZmlsbDogY29sb3JQTGlnaHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICksXHJcbiAgICAgICAgbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgICAgIC8vIG5ldyBnby5CaW5kaW5nKCd2aXNpYmxlJywgJycsIGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIChzZWxmLnNob3dQRG90KG9iaikgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIC8vIH0pLm9mT2JqZWN0KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwic2NhbGVcIiwgXCJcIiwgbWFwLmdldExheW91dHMoKS5nZXRBcnJvd2hlYWRTY2FsZSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICAgICAgdG9BcnJvdzogXCJDaXJjbGVcIixcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogY29sb3JQTGlnaHQsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBjb2xvclBMaWdodFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBwTGlua1RlbXBsYXRlOyIsImNvbnN0IGdvID0gd2luZG93LmdvO1xyXG5jb25zdCBtayA9IGdvLkdyYXBoT2JqZWN0Lm1ha2U7XHJcblxyXG5jb25zdCBub2RlSW5mbyA9IChvYmopID0+IHtcclxuICAgIHJldHVybiAnb2JqZWN0OiAnICsgb2JqICsgXCJcXG5cIiArXHJcbiAgICAgICAgJ2tleTogJyArIG9iai5kYXRhLmtleSArIFwiXFxuXCIgK1xyXG4gICAgICAgICdwb3NpdGlvbjogJyArIHBhcnNlSW50KG9iai5wb3NpdGlvbi54LCAxMCkgKyAnLCAnICsgcGFyc2VJbnQob2JqLnBvc2l0aW9uLnksIDEwKSArIFwiXFxuXCIgK1xyXG4gICAgICAgICd3aWR0aC9oZWlnaHQ6ICcgKyBwYXJzZUludChvYmouYWN0dWFsQm91bmRzLndpZHRoLCAxMCkgKyAnLycgKyBwYXJzZUludChvYmouYWN0dWFsQm91bmRzLmhlaWdodCwgMTApICsgXCJcXG5cIjtcclxufVxyXG5cclxuY29uc3QgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUgPSAoYWxpZ25tZW50KSA9PiB7XHJcbiAgICByZXR1cm4gbWsoZ28uU2hhcGUsXHJcbiAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJkZXNpcmVkU2l6ZVwiLCBcIlwiLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZSA9IG9iai5hZG9ybmVkT2JqZWN0O1xyXG4gICAgICAgICAgICB2YXIgc2l6ZSA9IE1hdGgubWluKHNsaWRlLndpZHRoLCBzbGlkZS5oZWlnaHQpICogLjA1O1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IGdvLlNpemUoc2l6ZSwgc2l6ZSk7XHJcbiAgICAgICAgfSkub2ZPYmplY3QoKSwge1xyXG4gICAgICAgICAgICBhbGlnbm1lbnQ6IGFsaWdubWVudCxcclxuICAgICAgICAgICAgY3Vyc29yOiBcImNvbC1yZXNpemVcIixcclxuICAgICAgICAgICAgZmlsbDogJ3JnYmEoMjUxLDE3MCw1NCwxKScsXHJcbiAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn1cclxuXHJcbmNvbnN0IHNsaWRlVGVtcGxhdGUgPSAobWFwKSA9PlxyXG4gICAgICAgIG1rKGdvLk5vZGUsIGdvLlBhbmVsLkF1dG8sXHJcbiAgICAgICAgICAgIC8vIE5COiB1bmxpa2UgZ3JvdXBzLCBzbGlkZXMganVzdCB1c2UgYSBub3JtYWwgMi13YXkgbG9jYXRpb24gYmluZGluZ1xyXG4gICAgICAgICAgICBuZXcgZ28uQmluZGluZyhcImxvY2F0aW9uXCIsIFwibG9jXCIsIGdvLlBvaW50LnBhcnNlKS5tYWtlVHdvV2F5KGdvLlBvaW50LnN0cmluZ2lmeSksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwid2lkdGhcIiwgXCJ3aWR0aFwiKS5tYWtlVHdvV2F5KCksXHJcbiAgICAgICAgICAgIG5ldyBnby5CaW5kaW5nKFwiaGVpZ2h0XCIsIFwiaGVpZ2h0XCIpLm1ha2VUd29XYXkoKSxcclxuICAgICAgICAgICAgbmV3IGdvLkJpbmRpbmcoXCJ2aXNpYmxlXCIsIFwiXCIsIGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmouZGF0YS5oYXNSZWdpb24gJiZcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VWkoKS5jdXJyZW50VGFiSXMobWFwLmdldFVpKCkuVEFCX0lEX1BSRVNFTlRFUikgJiZcclxuICAgICAgICAgICAgICAgICAgICAhbWFwLmdldFByZXNlbnRlcigpLmlzUHJlc2VudGluZyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFtYXAuZ2V0UHJlc2VudGVyKCkuaXNDcmVhdGluZ1RodW1ibmFpbCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXRQcmVzZW50ZXIoKS5jdXJyZW50U2xpZGVJbmRleCA9PT0gb2JqLmRhdGEuaW5kZXg7XHJcbiAgICAgICAgICAgIH0pLm9mT2JqZWN0KCksIHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uU3BvdDogZ28uU3BvdC5Ub3BMZWZ0LFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uQWRvcm5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICByZXNpemVBZG9ybm1lbnRUZW1wbGF0ZTogbWsoZ28uQWRvcm5tZW50LCBcIlNwb3RcIixcclxuICAgICAgICAgICAgICAgICAgICBtayhnby5QbGFjZWhvbGRlciksIC8vIHRha2VzIHNpemUgYW5kIHBvc2l0aW9uIG9mIGFkb3JuZWQgb2JqZWN0ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlRvcExlZnQpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlUmVzaXplSGFuZGxlKGdvLlNwb3QuVG9wKSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlRvcFJpZ2h0KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LlJpZ2h0KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LkJvdHRvbVJpZ2h0KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LkJvdHRvbSksXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVSZXNpemVIYW5kbGUoZ28uU3BvdC5Cb3R0b21MZWZ0KSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbGlkZVJlc2l6ZUhhbmRsZShnby5TcG90LkxlZnQpXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMCxcclxuICAgICAgICAgICAgICAgIGNvbnRleHRDbGljazogZnVuY3Rpb24gKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhub2RlSW5mbyh0YXJnZXQucGFydCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgbWsoZ28uU2hhcGUsIFwiUmVjdGFuZ2xlXCIsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwic2xpZGVib3JkZXJcIixcclxuICAgICAgICAgICAgICAgIGZpbGw6ICdyZ2JhKDI1MSwxNzAsNTQsLjEpJyxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogbnVsbFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc2xpZGVUZW1wbGF0ZTsiLCJjbGFzcyBDb21tb24ge1xyXG5cclxuICAgIHN0YXRpYyBzcGxpdExpbmVzKHRleHQpIHtcclxuICAgICAgICByZXR1cm4gdGV4dC5zcGxpdCgvXFxuLyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEV2ZW50VGltZSh0LCBub3cpIHtcclxuICAgICAgICBsZXQgdGltZSA9IG1vbWVudCh0LCAnWVlZWS1NTS1ERCBISDptbTpzcy5TU1MnKTtcclxuICAgICAgICBsZXQgbm93dGltZSA9IG1vbWVudChub3csICdZWVlZLU1NLUREIEhIOm1tOnNzLlNTUycpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0OiAgICAgICAnICsgdCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ25vdzogICAgICcgKyBub3cpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0aW1lOiAgICAnICsgdGltZS5mb3JtYXQoKSk7IC8vICsgJyAnICsgdGltZS5pc1ZhbGlkKCkpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdub3d0aW1lOiAnICsgbm93dGltZS5mb3JtYXQoKSk7IC8vICsgJyAnICsgbm93dGltZS5pc1ZhbGlkKCkpO1xyXG4gICAgICAgIHJldHVybiB0aW1lLmZyb20obm93dGltZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNsYXNzSWYoa2xhc3MsIGIpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGFzc0lmOiAnICsga2xhc3MgKyAnLCAnICsgYik7XHJcbiAgICAgICAgcmV0dXJuIChiID8ga2xhc3MgOiAnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYXZvaWQgJyRhcHBseSBhbHJlYWR5IGluIHByb2dyZXNzJyBlcnJvciAoc291cmNlOiBodHRwczovL2NvZGVyd2FsbC5jb20vcC9uZ2lzbWEpXHJcbiAgICBzdGF0aWMgc2FmZUFwcGx5KGZuKSB7XHJcbiAgICAgICAgaWYgKGZuICYmICh0eXBlb2YgKGZuKSA9PT0gJ2Z1bmN0aW9uJykpIHtcclxuICAgICAgICAgICAgZm4oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc291cmNlOiBodHRwOi8vY3RybHEub3JnL2NvZGUvMTk2MTYtZGV0ZWN0LXRvdWNoLXNjcmVlbi1qYXZhc2NyaXB0XHJcbiAgICBzdGF0aWMgaXNUb3VjaERldmljZSgpIHtcclxuICAgICAgICByZXR1cm4gKCgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHx8IChuYXZpZ2F0b3IuTWF4VG91Y2hQb2ludHMgPiAwKSB8fCAobmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAwKSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENvbW1vbjsiLCJ2YXIgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtYWN0aW9ucycsICc8ZGl2IGNsYXNzPVwicGFnZS1hY3Rpb25zXCI+IDxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIj4gPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gcmVkLWhhemUgYnRuLXNtIGRyb3Bkb3duLXRvZ2dsZVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBkYXRhLWhvdmVyPVwiZHJvcGRvd25cIiBkYXRhLWNsb3NlLW90aGVycz1cInRydWVcIj4gPHNwYW4gY2xhc3M9XCJoaWRkZW4tc20gaGlkZGVuLXhzXCI+QWN0aW9ucyZuYnNwOzwvc3Bhbj48aSBjbGFzcz1cImZhIGZhLWFuZ2xlLWRvd25cIj48L2k+IDwvYnV0dG9uPiA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCIgcm9sZT1cIm1lbnVcIj4gPGxpIGNsYXNzPVwic3RhcnQgYWN0aXZlIFwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtcGVuY2lsLXNxdWFyZS1vXCI+IE5ldyBNYXAgPC9pPiA8L2E+IDwvbGk+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLXByaW50XCI+IEV4cG9ydC9QcmludCA8L2k+IDwvYT4gPC9saT4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtdGFnXCI+IFRhZyBNYXAgPC9pPiA8L2E+IDwvbGk+IDxsaT4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cImZhIGZhLWNvcHlcIj48L2k+IER1cGxpY2F0ZSBNYXAgPC9hPiA8L2xpPiA8bGk+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJmYSBmYS11c2Vyc1wiPjwvaT4gU2hhcmUgTWFwIDwvYT4gPC9saT4gPGxpIGNsYXNzPVwiZGl2aWRlclwiPiA8L2xpPiA8bGk+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJmYSBmYS1nZWFyXCI+PC9pPiBTZXR0aW5ncyA8L2E+IDwvbGk+IDwvdWw+IDwvZGl2PiA8c3Bhbj4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDtQYWdlIFRpdGxlIDwvc3Bhbj4gPC9kaXY+JywgZnVuY3Rpb24ob3B0cykge1xufSk7IiwidmFyIHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLWJvZHknLCAnPGRpdiBjbGFzcz1cInBhZ2UtaGVhZGVyLWZpeGVkIHBhZ2Utc2lkZWJhci1jbG9zZWQtaGlkZS1sb2dvIHBhZ2Utc2lkZWJhci1jbG9zZWQtaGlkZS1sb2dvXCI+IDxwYWdlLWhlYWRlcj48L3BhZ2UtaGVhZGVyPiA8ZGl2IGNsYXNzPVwiY2xlYXJmaXhcIj4gPC9kaXY+IDxwYWdlLWNvbnRhaW5lcj48L3BhZ2UtY29udGFpbmVyPiA8cGFnZS1mb290ZXI+PC9wYWdlLWZvb3Rlcj4gPC9kaXY+JywgZnVuY3Rpb24ob3B0cykge1xufSk7IiwidmFyIHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLWNvbnRhaW5lcicsICc8ZGl2IGNsYXNzPVwicGFnZS1jb250YWluZXJcIj4gPHBhZ2Utc2lkZWJhcj48L3BhZ2Utc2lkZWJhcj4gPHBhZ2UtY29udGVudD48L3BhZ2UtY29udGVudD4gPC9kaXY+JywgZnVuY3Rpb24ob3B0cykge1xufSk7IiwidmFyIHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLWNvbnRlbnQnLCAnPGRpdiBjbGFzcz1cInBhZ2UtY29udGVudC13cmFwcGVyXCI+IDxkaXYgY2xhc3M9XCJwYWdlLWNvbnRlbnRcIj4gPGRpdiBjbGFzcz1cInBhZ2UtaGVhZFwiPiA8ZGl2IGlkPVwiYXBwLWNvbnRhaW5lclwiPiA8ZGl2IGlkPVwiZGlhZ3JhbVwiIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7IGJhY2tncm91bmQtY29sb3I6IHdoaXRlOyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiA4MCU7IFwiPjwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4nLCBmdW5jdGlvbihvcHRzKSB7XG59KTsiLCJ2YXIgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtZm9vdGVyJywgJzxkaXYgY2xhc3M9XCJwYWdlLWZvb3RlclwiPiA8ZGl2IGNsYXNzPVwicGFnZS1mb290ZXItaW5uZXJcIj4gMjAxNSAmY29weTsgQ2FicmVyYSBSZXNlYXJjaCBMYWIgPC9kaXY+IDxkaXYgY2xhc3M9XCJzY3JvbGwtdG8tdG9wXCI+IDxpIGNsYXNzPVwiaWNvbi1hcnJvdy11cFwiPjwvaT4gPC9kaXY+IDwvZGl2PicsIGZ1bmN0aW9uKG9wdHMpIHtcbn0pOyIsInZhciByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1oZWFkZXInLCAnPGRpdiBpZD1cImhlYWRlci10b3BcIiBjbGFzcz1cInBhZ2UtaGVhZGVyIG5hdmJhciBuYXZiYXItZml4ZWQtdG9wXCI+IDxkaXYgaWQ9XCJoZWFkZXItY29udGVudFwiIGNsYXNzPVwicGFnZS1oZWFkZXItaW5uZXJcIj4gPHBhZ2UtbG9nbz48L3BhZ2UtbG9nbz4gPHBhZ2UtYWN0aW9ucz48L3BhZ2UtYWN0aW9ucz4gPGRpdiBjbGFzcz1cInBhZ2UtdG9wXCI+IDxwYWdlLXNlYXJjaD48L3BhZ2Utc2VhcmNoPiA8cGFnZS10b3BtZW51PjwvcGFnZS10b3BtZW51PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PicsIGZ1bmN0aW9uKG9wdHMpIHtcbn0pOyIsInZhciByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1sb2dvJywgJzxkaXYgY2xhc3M9XCJwYWdlLWxvZ29cIj4gPGEgaHJlZj1cImluZGV4Lmh0bWxcIj4gPGltZyBzcmM9XCJhc3NldHMvaW1nL21ldGFtYXBfY2xvdWQucG5nXCIgYWx0PVwibG9nb1wiIGNsYXNzPVwibG9nby1kZWZhdWx0XCI+IDwvYT4gPGRpdiBjbGFzcz1cIm1lbnUtdG9nZ2xlciBzaWRlYmFyLXRvZ2dsZXJcIj4gIDwvZGl2PiA8L2Rpdj4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwibWVudS10b2dnbGVyIHJlc3BvbnNpdmUtdG9nZ2xlclwiIGRhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIiBkYXRhLXRhcmdldD1cIi5uYXZiYXItY29sbGFwc2VcIj4gPC9hPicsIGZ1bmN0aW9uKG9wdHMpIHtcbn0pOyIsInZhciByaW90ID0gcmVxdWlyZSgncmlvdCcpO1xubW9kdWxlLmV4cG9ydHMgPSByaW90LnRhZygncGFnZS1zZWFyY2gnLCAnIDxmb3JtIGNsYXNzPVwic2VhcmNoLWZvcm1cIiBhY3Rpb249XCJleHRyYV9zZWFyY2guaHRtbFwiIG1ldGhvZD1cIkdFVFwiPiA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXBcIj4gPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2wgaW5wdXQtc21cIiBwbGFjZWhvbGRlcj1cIlNlYXJjaC4uLlwiIG5hbWU9XCJxdWVyeVwiPiA8c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLWJ0blwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJidG4gc3VibWl0XCI+PGkgY2xhc3M9XCJmYSBmYS1zZWFyY2hcIj48L2k+PC9hPiA8L3NwYW4+IDwvZGl2PiA8L2Zvcm0+JywgZnVuY3Rpb24ob3B0cykge1xufSk7IiwidmFyIHJpb3QgPSByZXF1aXJlKCdyaW90Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJpb3QudGFnKCdwYWdlLXNpZGViYXInLCAnPGRpdiBjbGFzcz1cInBhZ2Utc2lkZWJhci13cmFwcGVyXCI+ICAgPGRpdiBjbGFzcz1cInBhZ2Utc2lkZWJhciBuYXZiYXItY29sbGFwc2UgY29sbGFwc2VcIj4gICAgICAgIDx1bCBjbGFzcz1cInBhZ2Utc2lkZWJhci1tZW51IFwiIGRhdGEta2VlcC1leHBhbmRlZD1cImZhbHNlXCIgZGF0YS1hdXRvLXNjcm9sbD1cInRydWVcIiBkYXRhLXNsaWRlLXNwZWVkPVwiMjAwXCI+IDxsaSBvbmNsaWNrPVwieyBwYXJlbnQuY2xpY2sgfVwiIGVhY2g9XCJ7IGRhdGEgfVwiPiA8YSBpZj1cInsgaWNvbiB9XCIgaHJlZj1cImphdmFzY3JpcHQ6O1wiPiA8aSBjbGFzcz1cInsgaWNvbiB9XCIgcmlvdC1zdHlsZT1cImNvbG9yOiN7IGNvbG9yIH07XCI+PC9pPiA8c3BhbiBjbGFzcz1cInRpdGxlXCI+eyB0aXRsZSB9PC9zcGFuPiA8c3BhbiBjbGFzcz1cInsgYXJyb3c6IG1lbnUubGVuZ3RoIH1cIj48L3NwYW4+IDwvYT4gPHVsIGlmPVwieyBtZW51Lmxlbmd0aCB9XCIgY2xhc3M9XCJzdWItbWVudVwiPiA8bGkgZWFjaD1cInsgbWVudSB9XCI+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJ7IGljb24gfVwiPjwvaT4gPHNwYW4gY2xhc3M9XCJ0aXRsZVwiPnsgdGl0bGUgfTwvc3Bhbj4gPC9hPiA8L2xpPiA8L3VsPiA8L2xpPiA8L3VsPiA8L2Rpdj4gPC9kaXY+JywgZnVuY3Rpb24ob3B0cykge1xuXG50aGlzLmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKCdmb28nKTtcbn07XG5cbnZhciB0aGF0ID0gdGhpcztcbnRoYXQuZGF0YSA9IFtdO1xudGhhdC5NZXRhTWFwID0gTWV0YU1hcDtcbnRoYXQuTWV0YU1hcC5NZXRhRmlyZS5nZXREYXRhKCdtZW51L3NpZGViYXInKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgdGhhdC5kYXRhID0gZGF0YTtcbiAgICB0aGF0LnVwZGF0ZSgpO1xufSk7XG59KTsiLCJ2YXIgcmlvdCA9IHJlcXVpcmUoJ3Jpb3QnKTtcbm1vZHVsZS5leHBvcnRzID0gcmlvdC50YWcoJ3BhZ2UtdG9wbWVudScsICc8ZGl2IGNsYXNzPVwidG9wLW1lbnVcIj4gPHVsIGNsYXNzPVwibmF2IG5hdmJhci1uYXYgcHVsbC1yaWdodFwiPiA8bGkgY2xhc3M9XCJzZXBhcmF0b3IgaGlkZVwiPjwvbGk+ICA8bGkgY2xhc3M9XCJkcm9wZG93biBkcm9wZG93bi1leHRlbmRlZCBkcm9wZG93bi1ub3RpZmljYXRpb24gZHJvcGRvd25cIiBpZD1cImhlYWRlcl9ub3RpZmljYXRpb25fYmFyXCI+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjbGFzcz1cImRyb3Bkb3duLXRvZ2dsZVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBkYXRhLWhvdmVyPVwiZHJvcGRvd25cIiBkYXRhLWNsb3NlLW90aGVycz1cInRydWVcIj4gPGkgY2xhc3M9XCJmYSBmYS1iZWxsLW9cIj48L2k+IDxzcGFuIGNsYXNzPVwiYmFkZ2UgYmFkZ2Utc3VjY2Vzc1wiPiAxIDwvc3Bhbj4gPC9hPiA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCI+IDxsaSBjbGFzcz1cImV4dGVybmFsXCI+IDxoMz4gPHNwYW4gY2xhc3M9XCJib2xkXCI+MSBwZW5kaW5nPC9zcGFuPiBub3RpZmljYXRpb24gPC9oMz4gPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiPnZpZXcgYWxsPC9hPiA8L2xpPiA8bGk+IDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUtbGlzdCBzY3JvbGxlclwiIHN0eWxlPVwiaGVpZ2h0OiAyNTBweDtcIiBkYXRhLWhhbmRsZS1jb2xvcj1cIiM2MzcyODNcIj4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxzcGFuIGNsYXNzPVwidGltZVwiPmp1c3Qgbm93PC9zcGFuPiA8c3BhbiBjbGFzcz1cImRldGFpbHNcIj4gPHNwYW4gY2xhc3M9XCJsYWJlbCBsYWJlbC1zbSBsYWJlbC1pY29uIGxhYmVsLXN1Y2Nlc3NcIj4gPGkgY2xhc3M9XCJmYSBmYS1wbHVzXCI+PC9pPiA8L3NwYW4+IE5ldyB1c2VyIHJlZ2lzdGVyZWQuIDwvc3Bhbj4gPC9hPiA8L2xpPiA8L3VsPiA8L2xpPiA8L3VsPiA8L2xpPiA8bGkgY2xhc3M9XCJzZXBhcmF0b3IgaGlkZVwiPjwvbGk+ICA8bGkgY2xhc3M9XCJkcm9wZG93biBkcm9wZG93bi1leHRlbmRlZCBkcm9wZG93bi1ub3RpZmljYXRpb24gZHJvcGRvd25cIiBpZD1cImhlYWRlcl9wb2ludHNfYmFyXCI+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjbGFzcz1cImRyb3Bkb3duLXRvZ2dsZVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBkYXRhLWhvdmVyPVwiZHJvcGRvd25cIiBkYXRhLWNsb3NlLW90aGVycz1cInRydWVcIj4gPGkgY2xhc3M9XCJmYSBmYS10cm9waHlcIj48L2k+IDxzcGFuIGNsYXNzPVwiYmFkZ2UgYmFkZ2Utc3VjY2Vzc1wiPiAzIDwvc3Bhbj4gPC9hPiA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCI+IDxsaSBjbGFzcz1cImV4dGVybmFsXCI+IDxoMz4gPHNwYW4gY2xhc3M9XCJib2xkXCI+MyBuZXc8L3NwYW4+IGFjaGlldmVtZW50cyA8L2gzPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+dmlldyBhbGw8L2E+IDwvbGk+IDxsaT4gPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudS1saXN0IHNjcm9sbGVyXCIgc3R5bGU9XCJoZWlnaHQ6IDI1MHB4O1wiIGRhdGEtaGFuZGxlLWNvbG9yPVwiIzYzNzI4M1wiPiA8bGk+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPHNwYW4gY2xhc3M9XCJ0aW1lXCI+anVzdCBub3c8L3NwYW4+IDxzcGFuIGNsYXNzPVwiZGV0YWlsc1wiPiA8c3BhbiBjbGFzcz1cImxhYmVsIGxhYmVsLXNtIGxhYmVsLWljb24gbGFiZWwtc3VjY2Vzc1wiPiA8aSBjbGFzcz1cImZhIGZhLXBsdXNcIj48L2k+IDwvc3Bhbj4gQ3JlYXRlZCBhIHBlcnNwZWN0aXZlIGNpcmNsZSEgPC9zcGFuPiA8L2E+IDwvbGk+IDwvdWw+IDwvbGk+IDwvdWw+IDwvbGk+ICA8bGkgY2xhc3M9XCJzZXBhcmF0b3IgaGlkZVwiPjwvbGk+ICA8bGkgY2xhc3M9XCJkcm9wZG93blwiIGlkPVwiaGVhZGVyX2Rhc2hib2FyZF9iYXJcIj4gPGEgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIiBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtaG9tZVwiPjwvaT4gPC9hPiA8L2xpPiA8bGkgY2xhc3M9XCJzZXBhcmF0b3IgaGlkZVwiPjwvbGk+ICA8bGkgY2xhc3M9XCJkcm9wZG93biBkcm9wZG93bi1leHRlbmRlZCBkcm9wZG93bi1ub3RpZmljYXRpb24gZHJvcGRvd25cIiBpZD1cImhlYWRlcl9oZWxwX2JhclwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgZGF0YS1ob3Zlcj1cImRyb3Bkb3duXCIgZGF0YS1jbG9zZS1vdGhlcnM9XCJ0cnVlXCI+IDxpIGNsYXNzPVwiZmEgZmEtZ3JhZHVhdGlvbi1jYXBcIj48L2k+IDwvYT4gPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPiA8bGk+IDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUtbGlzdCBzY3JvbGxlclwiIHN0eWxlPVwiaGVpZ2h0OiAyNzBweDtcIiBkYXRhLWhhbmRsZS1jb2xvcj1cIiM2MzcyODNcIj4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtbGlnaHRidWxiLW9cIj48L2k+IDxzcGFuIGNsYXNzPVwidGl0bGVcIj5UdXRvcmlhbDwvc3Bhbj4gPC9hPiA8L2xpPiA8bGk+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJmYSBmYS1xdWVzdGlvblwiPjwvaT4gPHNwYW4gY2xhc3M9XCJ0aXRsZVwiPkZBUTwvc3Bhbj4gPC9hPiA8L2xpPiA8bGk+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJmYSBmYS1saWZlLXJpbmdcIj48L2k+IDxzcGFuIGNsYXNzPVwidGl0bGVcIj5TdXBwb3J0PC9zcGFuPiA8L2E+IDwvbGk+IDxsaSBvbmNsaWNrPVwiVXNlclNuYXAub3BlblJlcG9ydFdpbmRvdygpO1wiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgPiA8aSBjbGFzcz1cImZhIGZhLWZyb3duLW9cIj48L2k+IDxzcGFuIGNsYXNzPVwidGl0bGVcIj5GZWVkYmFjazwvc3Bhbj4gPC9hPiA8L2xpPiA8bGk+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJmYSBmYS1idWxsc2V5ZVwiPjwvaT4gPHNwYW4gY2xhc3M9XCJ0aXRsZVwiPklubGluZSBUcmFpbmluZzwvc3Bhbj4gPC9hPiA8L2xpPiA8bGk+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJmYSBmYS1sYXB0b3BcIj48L2k+IDxzcGFuIGNsYXNzPVwidGl0bGVcIj5PbmxpbmUgVHJhaW5pbmc8L3NwYW4+IDwvYT4gPC9saT4gPC91bD4gPC9saT4gPC91bD4gPC9saT4gPGxpIGNsYXNzPVwic2VwYXJhdG9yIGhpZGVcIj4gPC9saT4gPGxpIGNsYXNzPVwiZHJvcGRvd24gZHJvcGRvd24tdXNlciBkcm9wZG93blwiPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgZGF0YS1ob3Zlcj1cImRyb3Bkb3duXCIgZGF0YS1jbG9zZS1vdGhlcnM9XCJ0cnVlXCI+IDxzcGFuIGNsYXNzPVwidXNlcm5hbWUgdXNlcm5hbWUtaGlkZS1vbi1tb2JpbGVcIj4geyB1c2VybmFtZSB9IDwvc3Bhbj4gPGltZyBhbHQ9XCJcIiBoZWlnaHQ9XCIzOVwiIHdpZHRoPVwiMzlcIiBjbGFzcz1cImltZy1jaXJjbGVcIiByaW90LXNyYz1cInsgcGljdHVyZSB9XCI+IDwvYT4gPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudSBkcm9wZG93bi1tZW51LWRlZmF1bHRcIj4gPGxpPiA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+IDxpIGNsYXNzPVwiZmEgZmEtdXNlclwiPjwvaT4gTXkgUHJvZmlsZSA8L2E+IDwvbGk+IDxsaSBvbmNsaWNrPVwieyBsaW5rQWNjb3VudCB9XCI+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJmYSBmYS1jb21wcmVzc1wiPjwvaT4gTGluayBBY2NvdW50IDwvYT4gPC9saT4gPGxpIG9uY2xpY2s9XCJ7IGxvZ291dCB9XCI+IDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj4gPGkgY2xhc3M9XCJmYSBmYS1zaWduLW91dFwiPjwvaT4gTG9nIE91dCA8L2E+IDwvbGk+IDwvdWw+IDwvbGk+IDwvdWw+IDwvZGl2PicsIGZ1bmN0aW9uKG9wdHMpIHtcbnRoaXMudXNlcm5hbWUgPSAnJztcbnRoaXMucGljdHVyZSA9ICcnO1xuXG52YXIgdGhhdCA9IHRoaXM7XG5sb2NhbGZvcmFnZS5nZXRJdGVtKCdwcm9maWxlJykudGhlbihmdW5jdGlvbiAocHJvZmlsZSkge1xuICAgIHRoYXQudXNlcm5hbWUgPSBwcm9maWxlLm5pY2tuYW1lO1xuICAgIHRoYXQucGljdHVyZSA9IHByb2ZpbGUucGljdHVyZSB8fCAnYXNzZXRzL2FkbWluL2xheW91dDQvaW1nL2F2YXRhci5qcGcnO1xuICAgIHRoYXQudXBkYXRlKCk7XG59KTtcblxudGhpcy5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgTWV0YU1hcC5BdXRoMC5sb2dvdXQoKTtcbn07XG5cbnRoaXMubGlua0FjY291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgTWV0YU1hcC5BdXRoMC5saW5rQWNjb3VudCgpO1xufTtcbn0pOyJdfQ==
